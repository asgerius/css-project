[{"tags": ["python", "google-sheets", "gspread"], "answers": [{"comments": [{"owner": {"reputation": 1975, "user_id": 1744744, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/0ea2850ef9a0500fa0ea5de1a528107a?s=128&d=identicon&r=PG&f=1", "display_name": "jason", "link": "https://stackoverflow.com/users/1744744/jason"}, "edited": false, "score": 0, "creation_date": 1486055797, "post_id": 42006607, "comment_id": 71192440, "body": "What version of API does <code>gspread</code> use? I see that <code>pygsheets</code> is using API v4. What is <code>gspread</code> using and what do you plan to do? What&#39;s the roadmap?"}, {"owner": {"reputation": 2621, "user_id": 318359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a8211dd607733fbd0cb67e4906e0c1a?s=128&d=identicon&r=PG", "display_name": "Burnash", "link": "https://stackoverflow.com/users/318359/burnash"}, "reply_to_user": {"reputation": 1975, "user_id": 1744744, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/0ea2850ef9a0500fa0ea5de1a528107a?s=128&d=identicon&r=PG&f=1", "display_name": "jason", "link": "https://stackoverflow.com/users/1744744/jason"}, "edited": false, "score": 0, "creation_date": 1486072103, "post_id": 42006607, "comment_id": 71201407, "body": "Presently, it&#39;s v3, but I&#39;m working on upgrading the library to v4. It&#39;s already using v4 for new features (e.g. sharing a spreadsheet.)"}, {"owner": {"reputation": 400, "user_id": 1537404, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/235d14707a48966c7a6de399ed2ae3b2?s=128&d=identicon&r=PG&f=1", "display_name": "manas", "link": "https://stackoverflow.com/users/1537404/manas"}, "edited": false, "score": 1, "creation_date": 1531948338, "post_id": 42006607, "comment_id": 89793587, "body": "doesn&#39;t work. value of <code>formula</code> becomes <code>None</code> even when there is a formula at <code>A2</code>."}, {"owner": {"reputation": 400, "user_id": 1537404, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/235d14707a48966c7a6de399ed2ae3b2?s=128&d=identicon&r=PG&f=1", "display_name": "manas", "link": "https://stackoverflow.com/users/1537404/manas"}, "edited": false, "score": 1, "creation_date": 1531990144, "post_id": 42006607, "comment_id": 89807349, "body": "use <code>wks.acell(&#39;A2&#39;, value_render_option=&#39;FORMULA&#39;).value</code> instead. <code>input_value</code> doesn&#39;t work anymore."}, {"owner": {"reputation": 1763, "user_id": 764307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f5625275c22d373b7fc41c6d4d6af8f?s=128&d=identicon&r=PG", "display_name": "Jonathan B.", "link": "https://stackoverflow.com/users/764307/jonathan-b"}, "edited": false, "score": 1, "creation_date": 1558220475, "post_id": 42006607, "comment_id": 99029367, "body": "This solution was also helpful for me in writing formulas to google sheet cells: <a href=\"https://stackoverflow.com/a/50648449/764307\">stackoverflow.com/a/50648449/764307</a>"}], "tags": [], "owner": {"reputation": 2621, "user_id": 318359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a8211dd607733fbd0cb67e4906e0c1a?s=128&d=identicon&r=PG", "display_name": "Burnash", "link": "https://stackoverflow.com/users/318359/burnash"}, "is_accepted": true, "score": 5, "last_activity_date": 1532005078, "last_edit_date": 1532005078, "creation_date": 1486050711, "answer_id": 42006607, "question_id": 41992091, "link": "https://stackoverflow.com/questions/41992091/how-to-copy-a-formula-from-one-gsheet-to-another-using-python/42006607#42006607", "title": "How to copy a formula from one gsheet to another using python?", "body": "<h3>Update 19 July 2018:</h3>\n\n<p>Here's how you do it:</p>\n\n<pre><code># Get the formula value from the souce cell:\nformula = wks.acell('A2', value_render_option='FORMULA').value\n\n# Update the target cell with formula:\nwks.update_acell('B3', formula)\n</code></pre>\n\n<p>(this works since gspread 3.0.0 which uses Sheets API v4.)</p>\n\n<h3>Original answer below:</h3>\n\n<p>To access a formula value, you need to use the <code>input_value</code> attribute of a cell object. </p>\n\n<p>Here's an example. (I'm skipping the initialization step. Let's assume you've already opened a spreadsheet and <code>wks</code> is referring to you <a href=\"http://gspread.readthedocs.io/en/latest/index.html#gspread.Worksheet\" rel=\"nofollow noreferrer\">worksheet object</a>.)</p>\n\n<pre><code># To copy a formula from a single cell (say, A2) to another cell (B3)\n# use the input_value property\nformula = wks.acell('A2').input_value\n\n# then paste the value to a new cell\nwks.update_acell('B3', formula)\n</code></pre>\n\n<p>For a group of cells, you'd want to use a <code>wks.range()</code> method to get cell objects. Then you can get formula values via <code>input_value</code> as in the code above. See <a href=\"https://github.com/burnash/gspread#updating-cells\" rel=\"nofollow noreferrer\">the example</a> on the GitHub.</p>\n"}], "owner": {"reputation": 1975, "user_id": 1744744, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/0ea2850ef9a0500fa0ea5de1a528107a?s=128&d=identicon&r=PG&f=1", "display_name": "jason", "link": "https://stackoverflow.com/users/1744744/jason"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3015, "favorite_count": 0, "accepted_answer_id": 42006607, "answer_count": 1, "score": 1, "last_activity_date": 1532005078, "creation_date": 1485993521, "last_edit_date": 1486065589, "question_id": 41992091, "link": "https://stackoverflow.com/questions/41992091/how-to-copy-a-formula-from-one-gsheet-to-another-using-python", "title": "How to copy a formula from one gsheet to another using python?", "body": "<p>I'm not sure if this is possible. I have tons of spreadsheet, and the formulas need to be updated. How do I copy a formula from one cell or a group of cells to another? I've used <code>gspread</code> and it seems it can only do values. I need python to basically paste formulas on hundreds of sheets for me, without me opening each individually and copy and pasting the formulas. </p>\n\n<p>Does anybody have a generic solution for copying and pasting formulas? This is pretty important, you would think someone can do it.</p>\n"}, {"tags": ["python", "django", "psql"], "comments": [{"owner": {"reputation": 2196, "user_id": 4974980, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/20Dm4.jpg?s=128&g=1", "display_name": "Jens Astrup", "link": "https://stackoverflow.com/users/4974980/jens-astrup"}, "edited": false, "score": 0, "creation_date": 1485993717, "post_id": 41992084, "comment_id": 71161195, "body": "<code>Events.objects.create(name = name, start = start, end =end)</code> The user isn&#39;t being set anywhere...On a separate note, you should use a <a href=\"https://docs.djangoproject.com/en/1.10/topics/forms/modelforms/\" rel=\"nofollow noreferrer\">ModelForm</a> for something like this, will save a lot of work."}, {"owner": {"reputation": 47988, "user_id": 267540, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2v58W.jpg?s=128&g=1", "display_name": "e4c5", "link": "https://stackoverflow.com/users/267540/e4c5"}, "reply_to_user": {"reputation": 2196, "user_id": 4974980, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/20Dm4.jpg?s=128&g=1", "display_name": "Jens Astrup", "link": "https://stackoverflow.com/users/4974980/jens-astrup"}, "edited": false, "score": 2, "creation_date": 1485993778, "post_id": 41992084, "comment_id": 71161216, "body": "@jens, that should probably have been an answer. Also tell the op how to do proper is_authenticated check."}, {"owner": {"reputation": 1499, "user_id": 3272303, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/a3bcc0d6cc88ad6a6a9319b79bd1c3d8?s=128&d=identicon&r=PG&f=1", "display_name": "anderish", "link": "https://stackoverflow.com/users/3272303/anderish"}, "edited": false, "score": 0, "creation_date": 1485993849, "post_id": 41992084, "comment_id": 71161234, "body": "Wait sorry, shouldn&#39;t the user already bet set in the models.py? <code>user = models.ForeignKey(settings.AUTH_USER_MODEL)</code>"}, {"owner": {"reputation": 2196, "user_id": 4974980, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/20Dm4.jpg?s=128&g=1", "display_name": "Jens Astrup", "link": "https://stackoverflow.com/users/4974980/jens-astrup"}, "edited": false, "score": 1, "creation_date": 1485994381, "post_id": 41992084, "comment_id": 71161392, "body": "That says Event should have a field containing a user - you need to define what the value should be though in each Event. Models define the table in your database, when you do <code>Event.objects.create</code> you&#39;re creating a new row in that table - if that helps..."}, {"owner": {"reputation": 1499, "user_id": 3272303, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/a3bcc0d6cc88ad6a6a9319b79bd1c3d8?s=128&d=identicon&r=PG&f=1", "display_name": "anderish", "link": "https://stackoverflow.com/users/3272303/anderish"}, "edited": false, "score": 1, "creation_date": 1485994420, "post_id": 41992084, "comment_id": 71161406, "body": "Thanks I had a misunderstanding but now I understand."}], "answers": [{"comments": [{"owner": {"reputation": 1499, "user_id": 3272303, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/a3bcc0d6cc88ad6a6a9319b79bd1c3d8?s=128&d=identicon&r=PG&f=1", "display_name": "anderish", "link": "https://stackoverflow.com/users/3272303/anderish"}, "edited": false, "score": 1, "creation_date": 1485994296, "post_id": 41992182, "comment_id": 71161374, "body": "Actually, I have a middleware provided for that <code>login_required</code> part so I don&#39;t have to put that everywhere."}, {"owner": {"reputation": 420, "user_id": 411677, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28d68f062201f76e4fe2985b97ecd7c1?s=128&d=identicon&r=PG", "display_name": "Ralph", "link": "https://stackoverflow.com/users/411677/ralph"}, "reply_to_user": {"reputation": 1499, "user_id": 3272303, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/a3bcc0d6cc88ad6a6a9319b79bd1c3d8?s=128&d=identicon&r=PG&f=1", "display_name": "anderish", "link": "https://stackoverflow.com/users/3272303/anderish"}, "edited": false, "score": 0, "creation_date": 1485994513, "post_id": 41992182, "comment_id": 71161434, "body": "Ok.  you can just assign <code>request.user</code>"}], "tags": [], "owner": {"reputation": 420, "user_id": 411677, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28d68f062201f76e4fe2985b97ecd7c1?s=128&d=identicon&r=PG", "display_name": "Ralph", "link": "https://stackoverflow.com/users/411677/ralph"}, "is_accepted": false, "score": 0, "last_activity_date": 1485995372, "last_edit_date": 1485995372, "creation_date": 1485994217, "answer_id": 41992182, "question_id": 41992084, "link": "https://stackoverflow.com/questions/41992084/null-value-in-column-user-id-violates-not-null-constraint-django/41992182#41992182", "title": "null value in column &quot;user_id&quot; violates not-null constraint Django", "body": "<p>Just add the user instance because it's required by <code>Events</code>.  I think you should use <code>DateField</code> or <code>DateTimeField</code> on start and end field.  Not sure but I think you plan to put a date value there. </p>\n\n<pre><code>\nEvents.objects.create(<b>user=request.user</b>, name=name, start=start, end=end)\n\n</code></pre>\n\n<p>You should also add a <code>@login_required</code> for your function.</p>\n"}, {"comments": [{"owner": {"reputation": 420, "user_id": 411677, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28d68f062201f76e4fe2985b97ecd7c1?s=128&d=identicon&r=PG", "display_name": "Ralph", "link": "https://stackoverflow.com/users/411677/ralph"}, "edited": false, "score": 1, "creation_date": 1485994443, "post_id": 41992188, "comment_id": 71161412, "body": "change user_id to user.  request.user already return a <code>User</code> object, no need another query <code>user_id = User.objects.get(username=user).pk</code>"}], "tags": [], "owner": {"reputation": 1499, "user_id": 3272303, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/a3bcc0d6cc88ad6a6a9319b79bd1c3d8?s=128&d=identicon&r=PG&f=1", "display_name": "anderish", "link": "https://stackoverflow.com/users/3272303/anderish"}, "is_accepted": false, "score": 0, "last_activity_date": 1485995455, "last_edit_date": 1485995455, "creation_date": 1485994249, "answer_id": 41992188, "question_id": 41992084, "link": "https://stackoverflow.com/questions/41992084/null-value-in-column-user-id-violates-not-null-constraint-django/41992188#41992188", "title": "null value in column &quot;user_id&quot; violates not-null constraint Django", "body": "<p>My solution is this:</p>\n\n<pre><code>\n    from django.contrib.auth.models import User\n    user = request.user\n    <b>user_id = User.objects.get(username=user).pk</b>\n    name = request.POST['name']\n    start = request.POST['start']\n    end = request.POST['end']\n    Events.objects.create(\n        <b>user_id=user_id,</b>\n        name = name,\n        start = start,\n        end =end,\n    )\n</code></pre>\n\n<p>Is that an alright solution? Could there be something better?</p>\n"}, {"comments": [{"owner": {"reputation": 1499, "user_id": 3272303, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/a3bcc0d6cc88ad6a6a9319b79bd1c3d8?s=128&d=identicon&r=PG&f=1", "display_name": "anderish", "link": "https://stackoverflow.com/users/3272303/anderish"}, "edited": false, "score": 0, "creation_date": 1485994386, "post_id": 41992194, "comment_id": 71161395, "body": "Thank you, I am actually aware of the model Form. However, for this purpose I am using Jquery&#39;s Modal Form. So I am using ajax to send the data over."}, {"owner": {"reputation": 2196, "user_id": 4974980, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/20Dm4.jpg?s=128&g=1", "display_name": "Jens Astrup", "link": "https://stackoverflow.com/users/4974980/jens-astrup"}, "reply_to_user": {"reputation": 1499, "user_id": 3272303, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/a3bcc0d6cc88ad6a6a9319b79bd1c3d8?s=128&d=identicon&r=PG&f=1", "display_name": "anderish", "link": "https://stackoverflow.com/users/3272303/anderish"}, "edited": false, "score": 0, "creation_date": 1485994539, "post_id": 41992194, "comment_id": 71161441, "body": "I&#39;d caution against ditching Django Forms to use javascript - you don&#39;t have to decide between one or the other (I went down that road, it gets messy), they can play together. For example, in your case, you can render the form manually but in your view pass the request.POST to the form instance for validation (it also turns all values into Python objects for you)."}], "tags": [], "owner": {"reputation": 2196, "user_id": 4974980, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/20Dm4.jpg?s=128&g=1", "display_name": "Jens Astrup", "link": "https://stackoverflow.com/users/4974980/jens-astrup"}, "is_accepted": true, "score": 0, "last_activity_date": 1485995559, "last_edit_date": 1485995559, "creation_date": 1485994281, "answer_id": 41992194, "question_id": 41992084, "link": "https://stackoverflow.com/questions/41992084/null-value-in-column-user-id-violates-not-null-constraint-django/41992194#41992194", "title": "null value in column &quot;user_id&quot; violates not-null constraint Django", "body": "<p>Making what you have right now <em>work</em>:</p>\n\n<pre><code>def createEvent(request):\n    if request.method == \"POST\":\n        user = request.user\n        print (user)        # Check for Authentication\n        name = request.POST['name']\n        start = request.POST['start']\n        end = request.POST['end']\n        # The user has to be included before being saved\n        Events.objects.create(name=name, start=start, end=end, <b>user=user</b>)\n</code></pre>\n\n<p>Some better practices:\nUsing a <a href=\"https://docs.djangoproject.com/en/1.10/topics/forms/modelforms/\" rel=\"nofollow noreferrer\">ModelForm</a> (note there are <a href=\"https://docs.djangoproject.com/en/1.10/topics/class-based-views/generic-editing/#model-forms\" rel=\"nofollow noreferrer\">class based generic views</a> that make this easier too), and the <a href=\"https://docs.djangoproject.com/en/1.10/topics/auth/default/#django.contrib.auth.decorators.login_required\" rel=\"nofollow noreferrer\">login_required</a> decorator</p>\n\n<pre><code># forms.py\nfrom django.forms import ModelForm\nfrom .models import Event\n\nclass EventForm(ModelForm):\n    class Meta:\n        model = Event\n        fields = ('user', 'start', 'end', 'name')\n\n# views.py\nfrom django.contrib.auth.decorators import login_required\n\n@login_required\ndef create_event(request):\n    if request.POST:\n        form = EventForm(request.POST)\n        if form.is_valid():\n            form.save()\n    else:\n        form = EventForm()\n        return render(..., {'form': form})\n</code></pre>\n"}], "owner": {"reputation": 1499, "user_id": 3272303, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/a3bcc0d6cc88ad6a6a9319b79bd1c3d8?s=128&d=identicon&r=PG&f=1", "display_name": "anderish", "link": "https://stackoverflow.com/users/3272303/anderish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3395, "favorite_count": 0, "accepted_answer_id": 41992194, "answer_count": 3, "score": 1, "last_activity_date": 1485995559, "creation_date": 1485993488, "question_id": 41992084, "link": "https://stackoverflow.com/questions/41992084/null-value-in-column-user-id-violates-not-null-constraint-django", "title": "null value in column &quot;user_id&quot; violates not-null constraint Django", "body": "<p>I know there are a lot of solutions for this problem but they seem a bit different than mine. Here is my models.py:</p>\n\n<pre><code>from __future__ import unicode_literals\n\nfrom django.db import models\nfrom django.conf import settings\nfrom django.contrib.auth.models import User\nfrom django.contrib.postgres.fields import HStoreField\n# Create your models here.\n\nclass Events(models.Model):\n    user = models.ForeignKey(settings.AUTH_USER_MODEL)\n    name = models.CharField(max_length=32)\n    start = models.CharField(max_length=32)\n    end = models.CharField(max_length=32)\n</code></pre>\n\n<p>Very simple table and I want the primary key in <code>Auth_user</code> to be the foreign key in my <code>Events</code> table. So of course this would mean that a <code>User</code> has to be logged in and authenticated for this to work. In my views.py I have:</p>\n\n<pre><code>def createEvent(request):\n    if request.method == \"POST\":\n        user = request.user\n        print (user)        # Check for Authentication\n        name = request.POST['name']\n        start = request.POST['start']\n        end = request.POST['end']\n        Events.objects.create(\n            name = name,\n            start = start,\n            end =end,\n        )\n</code></pre>\n\n<p>The print statement will print out the current user logged in. I can confirm that this part does show that a user is logged in and that this user is in the <code>auth_user</code> table with a unique <code>id</code>. However, when I try to submit a form, I get a null value for the <code>user</code> column. Any ideas?</p>\n"}, {"tags": ["python", "mysql", "web-scraping", "beautifulsoup"], "comments": [{"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1485994484, "post_id": 41992039, "comment_id": 71161418, "body": "what <code>&quot;return string&quot;</code> ? where/how do you get this &quot;return string&quot; ?"}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1485994783, "post_id": 41992039, "comment_id": 71161503, "body": "you define <code>link = []</code>, later you overwrite it with <code>link = cell.a</code>, later you get string <code>link = link.get_text()</code> but you treat it as list <code>id = link[0]</code>, <code>ticker = link[1]</code>. What do you try to do ?"}, {"owner": {"reputation": 573, "user_id": 5369777, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/MEZym.jpg?s=128&g=1", "display_name": "Derek_P", "link": "https://stackoverflow.com/users/5369777/derek-p"}, "reply_to_user": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1485995110, "post_id": 41992039, "comment_id": 71161611, "body": "- removed the redundant link =[], when I comment out the link-list items I get a the link.a data - In an effort to save the data I convereted into list items."}], "answers": [{"comments": [{"owner": {"reputation": 573, "user_id": 5369777, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/MEZym.jpg?s=128&g=1", "display_name": "Derek_P", "link": "https://stackoverflow.com/users/5369777/derek-p"}, "edited": false, "score": 0, "creation_date": 1486058124, "post_id": 41992308, "comment_id": 71193858, "body": "Thanks for the input I hadn&#39;t considered using the &quot;table-dark-row-cp&quot; tags since it pulls every other item. Could I use an &quot;and&quot; to get both &quot;table-dark...&quot; and &quot;table-light...&quot; items?"}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "reply_to_user": {"reputation": 573, "user_id": 5369777, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/MEZym.jpg?s=128&g=1", "display_name": "Derek_P", "link": "https://stackoverflow.com/users/5369777/derek-p"}, "edited": false, "score": 1, "creation_date": 1486064365, "post_id": 41992308, "comment_id": 71197260, "body": "<code>class_=[&quot;table-dark-row-cp&quot;, &quot;table-light-row-cp&quot;]</code>"}, {"owner": {"reputation": 573, "user_id": 5369777, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/MEZym.jpg?s=128&g=1", "display_name": "Derek_P", "link": "https://stackoverflow.com/users/5369777/derek-p"}, "edited": false, "score": 0, "creation_date": 1486064437, "post_id": 41992308, "comment_id": 71197294, "body": "list - of course. I was just working on that - thanks a bunch!"}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "reply_to_user": {"reputation": 573, "user_id": 5369777, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/MEZym.jpg?s=128&g=1", "display_name": "Derek_P", "link": "https://stackoverflow.com/users/5369777/derek-p"}, "edited": false, "score": 1, "creation_date": 1486065197, "post_id": 41992308, "comment_id": 71197732, "body": "see also example with <code>CSS</code> selector"}], "tags": [], "owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "is_accepted": true, "score": 1, "last_activity_date": 1486065234, "last_edit_date": 1486065234, "creation_date": 1485995107, "answer_id": 41992308, "question_id": 41992039, "link": "https://stackoverflow.com/questions/41992039/python-beautifulsoup-mysql-storage-and-interation/41992308#41992308", "title": "Python BeautifulSoup MySQL storage and interation", "body": "<p>I don't know what you real try to do but this works for me</p>\n\n<pre><code>import requests\nfrom bs4 import BeautifulSoup\n\nbase_url = 'http://finviz.com/screener.ashx?v=152&amp;s=ta_topgainers&amp;o=price&amp;c=0,1,2,3,4,5,6,24,25,63,64,65,66,67'\n\nhtml = requests.get(base_url)\nsoup = BeautifulSoup(html.content, \"html.parser\")\n\nrows = soup.find_all('tr', class_=[\"table-dark-row-cp\", \"table-light-row-cp\"])\n\nfor row in rows:\n    columns = row.find_all('td')\n\n    id_ = columns[0].a.get_text()\n    ticker = columns[1].a.get_text()\n    company = columns[2].a.get_text()\n    sector = columns[3].a.get_text()\n    industry = columns[4].a.get_text()\n\n    print(id_, ticker, company, sector, industry)\n</code></pre>\n\n<p>Or event with <code>a</code></p>\n\n<pre><code>for row in rows:\n    columns = row.find_all('a')\n\n    id_ = columns[0].get_text()\n    ticker = columns[1].get_text()\n    company = columns[2].get_text()\n    sector = columns[3].get_text()\n    industry = columns[4].get_text()\n\n    print(id_, ticker, company, sector, industry)\n</code></pre>\n\n<hr>\n\n<p><strong>BTW:</strong> you can also use <code>CSS</code> selector </p>\n\n<pre><code>rows = soup.select('#screener-content table[bgcolor=\"#d3d3d3\"] tr[class]')\n</code></pre>\n\n<p>or </p>\n\n<pre><code>rows = soup.select('#screener-content table[bgcolor=\"#d3d3d3\"] tr')\n# skip first row with headers\nrows = rows[1:]\n</code></pre>\n"}], "owner": {"reputation": 573, "user_id": 5369777, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/MEZym.jpg?s=128&g=1", "display_name": "Derek_P", "link": "https://stackoverflow.com/users/5369777/derek-p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 238, "favorite_count": 0, "accepted_answer_id": 41992308, "answer_count": 1, "score": 0, "last_activity_date": 1486065234, "creation_date": 1485993208, "last_edit_date": 1485995013, "question_id": 41992039, "link": "https://stackoverflow.com/questions/41992039/python-beautifulsoup-mysql-storage-and-interation", "title": "Python BeautifulSoup MySQL storage and interation", "body": "<p>First, there is a leading \"1\" in the return string and I'm encountering trouble iterating passed it - I've tried using [0:]: method and get stuck somewhere. I'd like to skip drop it or skip it to get to the second value that is the id val. the scraped table </p>\n\n<p>Additionally, in trying to format returned items from table for storage - I've been getting index out of range errors. I've been using def store().</p>\n\n<pre><code>import requests\nfrom bs4 import BeautifulSoup\nimport MySQLdb\n\n#mysql portion\nmydb = MySQLdb.connect(host='****',\n   user= '****',\n   passwd='****',\n   db='****')\ncur = mydb.cursor()\ndef store (id, ticker):\n    cur.execute('INSERT IGNORE INTO TEST (id, ticker) VALUES (\\\"%s\\\", \\\"%s\\\")',(id, ticker))\n    cur.connection.commit()\n\nbase_url = 'http://finviz.com/screener.ashx?v=152&amp;s=ta_topgainers&amp;o=price&amp;c=0,1,2,3,4,5,6,24,25,63,64,65,66,67'\nhtml = requests.get(base_url)\nsoup = BeautifulSoup(html.content, \"html.parser\")\nmain_div = soup.find('div', attrs = {'id':'screener-content'})\ntable = main_div.find('table')\nsub = table.findAll('tr')\ncells = sub[5].findAll('td')\n\nfor cell in cells:\n    link = cell.a\n    if link is not None:\n    link = link.get_text()\n        id = link[0]\n        ticker = link[1]\n        store(id, ticker)\n    print(link)\n</code></pre>\n"}, {"tags": ["python", "facebook-live-api"], "answers": [{"comments": [{"owner": {"reputation": 1025, "user_id": 3303824, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/92d481a4b63883196f2f427f6e14b20a?s=128&d=identicon&r=PG&f=1", "display_name": "andrea-f", "link": "https://stackoverflow.com/users/3303824/andrea-f"}, "edited": false, "score": 0, "creation_date": 1488284906, "post_id": 42508346, "comment_id": 72154844, "body": "is there (and it is allowed) a way to do it via scraping using a tool such as Scrapy for example?"}], "tags": [], "owner": {"reputation": 2425, "user_id": 956626, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eLpx6.png?s=128&g=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/956626/nick"}, "is_accepted": true, "score": 1, "last_activity_date": 1488283540, "creation_date": 1488283540, "answer_id": 42508346, "question_id": 41992016, "link": "https://stackoverflow.com/questions/41992016/how-to-access-videos-in-facebook-livemap-programmatically/42508346#42508346", "title": "How to access videos in Facebook livemap programmatically?", "body": "<p>No, there is no such API at this time.</p>\n"}], "owner": {"reputation": 1025, "user_id": 3303824, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/92d481a4b63883196f2f427f6e14b20a?s=128&d=identicon&r=PG&f=1", "display_name": "andrea-f", "link": "https://stackoverflow.com/users/3303824/andrea-f"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 343, "favorite_count": 0, "accepted_answer_id": 42508346, "answer_count": 1, "score": 0, "last_activity_date": 1488283540, "creation_date": 1485993091, "question_id": 41992016, "link": "https://stackoverflow.com/questions/41992016/how-to-access-videos-in-facebook-livemap-programmatically", "title": "How to access videos in Facebook livemap programmatically?", "body": "<p>Is there a Facebook API call to retrieve all or a subset of the current live videos with the relative metadata, such as location, user who is streaming, time at stream?\nThe implementation could be in Python.</p>\n"}, {"tags": ["python", "unicode", "utf-8", "character-encoding", "beautifulsoup"], "comments": [{"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1485993246, "post_id": 41991943, "comment_id": 71161022, "body": "how do you run this code ? in Python Shell or <code>python script.py</code> ? How do you get this text ? Did you use <code>print div[0].text</code> or Python Shell printed this automatically for you ? You have correct text but Python Shell uses <code>print repr( div[0].text )</code> to show text usefull for debugging. So try <code>print repr(div[0].text)</code> and <code>print div[0].text</code> and you will see different text."}, {"owner": {"reputation": 15, "user_id": 7459822, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d1ef2de27d260b88636c715bc6de4f3?s=128&d=identicon&r=PG&f=1", "display_name": "Tim Bremer", "link": "https://stackoverflow.com/users/7459822/tim-bremer"}, "reply_to_user": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1486024829, "post_id": 41991943, "comment_id": 71171654, "body": "I am using Python 2.7.13, the example could be run within the Shell or as a script, doesn&#39;t matter. And yes, &#39;print&#39; shows the correct output, but I need the text within a variable."}, {"owner": {"reputation": 496598, "user_id": 18936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f6f1bea81a68b2f1cfe3efbb9be94bc?s=128&d=identicon&r=PG", "display_name": "bobince", "link": "https://stackoverflow.com/users/18936/bobince"}, "edited": false, "score": 0, "creation_date": 1486028203, "post_id": 41991943, "comment_id": 71173862, "body": "You already have the right characters. The literal <code>u&#39;S\\xe1tur se dirige...&#39;</code> exactly represents the text <code>S&#225;tur se dirige...</code>. If you <code>print()</code> it you will see the raw characters (assuming your console can print them, which if it is Windows it might not)."}, {"owner": {"reputation": 15, "user_id": 7459822, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d1ef2de27d260b88636c715bc6de4f3?s=128&d=identicon&r=PG&f=1", "display_name": "Tim Bremer", "link": "https://stackoverflow.com/users/7459822/tim-bremer"}, "reply_to_user": {"reputation": 496598, "user_id": 18936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f6f1bea81a68b2f1cfe3efbb9be94bc?s=128&d=identicon&r=PG", "display_name": "bobince", "link": "https://stackoverflow.com/users/18936/bobince"}, "edited": false, "score": 0, "creation_date": 1486030188, "post_id": 41991943, "comment_id": 71175134, "body": "@bobince: Yes, but I am using Python 2.7.13 with utf-8. If I assign div[0].text (which is unicode) to a normal string variable (which is utf-8), I get in trouble."}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1486066686, "post_id": 41991943, "comment_id": 71198493, "body": "use only <code>unicode</code> and you will have no problem - so convert all strings to unicode. It is the solution."}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 7459822, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d1ef2de27d260b88636c715bc6de4f3?s=128&d=identicon&r=PG&f=1", "display_name": "Tim Bremer", "link": "https://stackoverflow.com/users/7459822/tim-bremer"}, "edited": false, "score": 0, "creation_date": 1486024968, "post_id": 41996447, "comment_id": 71171728, "body": "I also tried the example with &#39;requests&#39;, which doesn&#39;t change anything.  Well, <code>python3</code> handles unicode a priori, but now I started with python 2.7.13 and I don&#39;t want to change the whole code, looking for inconsistencies. Furthermore I don&#39;t know if Kodi supports python3."}], "tags": [], "owner": {"reputation": 10600, "user_id": 6856342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10020e210dd11a731c13627b306d83d9?s=128&d=identicon&r=PG", "display_name": "\u5b8f\u6770\u674e", "link": "https://stackoverflow.com/users/6856342/%e5%ae%8f%e6%9d%b0%e6%9d%8e"}, "is_accepted": false, "score": -1, "last_activity_date": 1486020581, "creation_date": 1486020581, "answer_id": 41996447, "question_id": 41991943, "link": "https://stackoverflow.com/questions/41991943/yet-another-encoding-issue-with-accented-characters-scraping-a-website-with-pyt/41996447#41996447", "title": "Yet another encoding issue with accented characters (scraping a Website with Python and BeautifulSoup)", "body": "<pre><code>import requests\nfrom bs4 import BeautifulSoup\n\nurl = \"http://www.rtve.es/alacarta/interno/contenttable.shtml?ctx=29010&amp;locale=es&amp;module=&amp;orderCriteria=DESC&amp;pageSize=15&amp;mode=TEXT&amp;seasonFilter=40015\"\nhtml=requests.get(url)\nsoup = BeautifulSoup(html.text, 'lxml')\ndiv = soup.find(\"span\", class_=\"detalle\")\ncapitulo_detalle = div.text \n</code></pre>\n\n<p>out:</p>\n\n<pre><code>'S\u00e1tur se dirige al sur en busca de Estuarda y Gabi, pero un compa\u00f1ero de viaje inesperado har\u00e1 que cambie de rumbo. Los hombres de Juan siguen presos. El enemigo comienza a realizar ejecuciones. \u00c1guila Roja tiene...'\n</code></pre>\n\n<p>use <code>requests</code> and <code>python3</code>, and the problem will never show up</p>\n"}, {"tags": [], "owner": {"reputation": 15, "user_id": 7459822, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d1ef2de27d260b88636c715bc6de4f3?s=128&d=identicon&r=PG&f=1", "display_name": "Tim Bremer", "link": "https://stackoverflow.com/users/7459822/tim-bremer"}, "is_accepted": true, "score": 0, "last_activity_date": 1486075903, "creation_date": 1486075903, "answer_id": 42013817, "question_id": 41991943, "link": "https://stackoverflow.com/questions/41991943/yet-another-encoding-issue-with-accented-characters-scraping-a-website-with-pyt/42013817#42013817", "title": "Yet another encoding issue with accented characters (scraping a Website with Python and BeautifulSoup)", "body": "<p>I believe I finally got it...</p>\n\n<pre><code>&gt;&gt;&gt; div = soup.find(\"span\", class_=\"detalle\")\n&gt;&gt;&gt; div.text\nu'S\\xe1tur se dirige al sur en busca de Estuarda y Gabi, pero\n</code></pre>\n\n<p>---> this is unicode, \\xe1 is the 'code' for '\u00e1' (<a href=\"http://www.utf8-chartable.de/unicode-utf8-table.pl?start=4096&amp;number=128&amp;names=-&amp;utf8=string-literal\" rel=\"nofollow noreferrer\">http://www.utf8-chartable.de/unicode-utf8-table.pl?start=4096&amp;number=128&amp;names=-&amp;utf8=string-literal</a>)</p>\n\n<pre><code>&gt;&gt;&gt; print(div.text)\nS\u00e1tur se dirige al sur en busca de Estuarda y Gabi, pero\n</code></pre>\n\n<p>---> 'print' evaluates the unicode code point correctly</p>\n\n<pre><code>&gt;&gt;&gt; div.text.encode('utf-8')\n'S\\xc3\\xa1tur se dirige al sur en busca de Estuarda y Gabi, pero\n</code></pre>\n\n<p>---> Unicode is encoded to utf-8 according to the table given on the url cited above. I didn't understand why the output is shown as \\xc3\\xa1 and not as '\u00e1'. </p>\n\n<pre><code>&gt;&gt;&gt; print div.text.encode('utf-8')\nS\u251c\u00edtur se dirige al sur en busca de Estuarda y Gabi, pero\n</code></pre>\n\n<p>---> and I didn't understand why print now evaluates it to a strange symbol....</p>\n\n<pre><code>&gt;&gt;&gt; blurr = div.text.encode('cp850')\n&gt;&gt;&gt; blurr\n'S\\xa0tur se dirige al sur en busca de Estuarda y Gabi, pero\n&gt;&gt;&gt; type(blurr)\n&lt;type 'str'&gt;\n</code></pre>\n\n<p>---> Unicode encoded to codepage 850, used within the python-shell under Windows</p>\n\n<pre><code>&gt;&gt;&gt; print(blurr)\nS\u00e1tur se dirige al sur en busca de Estuarda y Gabi, pero\n</code></pre>\n\n<p>---> Finally, it's right !!! </p>\n\n<p>In Kodi I can use the utf-8 representation, so that e.g. the character '\u00e1' is saved within the variable as \\xc3\\xa1, but when the content of the variable is displayed for example with \"xbmcgui.Dialog().ok(addonname, blurr) it is shown correctly on the screen with an '\u00e1'......</p>\n\n<p>Und sowas soll man wissen......</p>\n"}], "owner": {"reputation": 15, "user_id": 7459822, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d1ef2de27d260b88636c715bc6de4f3?s=128&d=identicon&r=PG&f=1", "display_name": "Tim Bremer", "link": "https://stackoverflow.com/users/7459822/tim-bremer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1258, "favorite_count": 0, "accepted_answer_id": 42013817, "answer_count": 2, "score": 0, "last_activity_date": 1486075903, "creation_date": 1485992698, "last_edit_date": 1495540891, "question_id": 41991943, "link": "https://stackoverflow.com/questions/41991943/yet-another-encoding-issue-with-accented-characters-scraping-a-website-with-pyt", "title": "Yet another encoding issue with accented characters (scraping a Website with Python and BeautifulSoup)", "body": "<p>(PREFACE: I know, this problem has been talked about a hundred of times, but I still don't understand it)</p>\n\n<p>I am trying to load a html-page and output the text, even though I am getting the webpage correctly, BeautifulSoup destroys somehow the encoding of accented characters which are not part of the first 127 ASCII-characters: </p>\n\n<pre><code># -*- coding: utf-8 -*-\nimport sys\nfrom urllib import urlencode\nfrom urlparse import parse_qsl\nimport re\nimport urlparse\nimport json\nimport urllib\nfrom bs4 import BeautifulSoup\n\nurl = \"http://www.rtve.es/alacarta/interno/contenttable.shtml?ctx=29010&amp;locale=es&amp;module=&amp;orderCriteria=DESC&amp;pageSize=15&amp;mode=TEXT&amp;seasonFilter=40015\"\nhtml=urllib2.urlopen(url).read()\nsoup = BeautifulSoup(html)\ndiv = soup.find_all(\"span\", class_=\"detalle\")\ncapitulo_detalle = div[0].text   (doesn't work, capitulo_detalle is type str with utf-8, div[0].tex is type unicode)\n</code></pre>\n\n<p>Output of <code>div[0].text</code> should be something like: </p>\n\n<p>S<strong>\u00e1</strong>tur se dirige al sur en busca de Estuarda y Gabi, pero un compa<strong>\u00f1</strong>ero de viaje inesperado har<strong>\u00e1</strong> que cambie de rumbo. Los hombres de Juan siguen presos. El enemigo comienza a realizar ejecuciones. <strong>\u00c1</strong>guila Roja tiene...</p>\n\n<p>But the result I get is: </p>\n\n<p>u'S\\xe1tur se dirige al sur en busca de Estuarda y Gabi, pero un compa\\xf1ero de\n viaje inesperado har\\xe1 que cambie de rumbo. Los hombres de Juan siguen presos\n. El enemigo comienza a realizar ejecuciones. \\xc1guila Roja tiene...'</p>\n\n<p><strong>--> What do I have to change to get the 'right' characters?</strong> </p>\n\n<p>I know it must be a duplicate of these questions, but the answers doesn't seem to work here: \n<a href=\"https://stackoverflow.com/questions/7219361/python-and-beautifulsoup-encoding-issues\">Python and BeautifulSoup encoding issues</a>\n<a href=\"https://stackoverflow.com/questions/20205455/how-to-correctly-parse-utf-8-encoded-html-to-unicode-strings-with-beautifulsoup\">How to correctly parse UTF-8 encoded HTML to Unicode strings with BeautifulSoup?</a></p>\n\n<p>I also read the typical documentations about unicode, utf-8, ascii, e.g. <a href=\"https://docs.python.org/3/howto/unicode.html\" rel=\"nofollow noreferrer\">https://docs.python.org/3/howto/unicode.html</a>, obviously without success...</p>\n"}, {"tags": ["python", "csv", "numpy", "matplotlib", "python-3.5"], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 7283061, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-JcRUlWW86lg/AAAAAAAAAAI/AAAAAAAAQj0/cUkRiZKdpjE/photo.jpg?sz=128", "display_name": "Jinay Jani", "link": "https://stackoverflow.com/users/7283061/jinay-jani"}, "edited": false, "score": 0, "creation_date": 1485995743, "post_id": 41992237, "comment_id": 71161762, "body": "it give the same error like before after making the changes suggested."}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "reply_to_user": {"reputation": 15, "user_id": 7283061, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-JcRUlWW86lg/AAAAAAAAAAI/AAAAAAAAQj0/cUkRiZKdpjE/photo.jpg?sz=128", "display_name": "Jinay Jani", "link": "https://stackoverflow.com/users/7283061/jinay-jani"}, "edited": false, "score": 0, "creation_date": 1485995920, "post_id": 41992237, "comment_id": 71161816, "body": "I highly doubt that, since the line producing the error in the first place (<code>float(line)</code>) is not present in the changed script. If you report about an error, always include the line that throws the error."}, {"owner": {"reputation": 15, "user_id": 7283061, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-JcRUlWW86lg/AAAAAAAAAAI/AAAAAAAAQj0/cUkRiZKdpjE/photo.jpg?sz=128", "display_name": "Jinay Jani", "link": "https://stackoverflow.com/users/7283061/jinay-jani"}, "edited": false, "score": 0, "creation_date": 1485996632, "post_id": 41992237, "comment_id": 71162045, "body": "Traceback (most recent call last):   File &quot;C:\\Users\\JINAY\\AppData\\Local\\Programs\\Python\\Python35\\testf&zwnj;&#8203;ile.py&quot;, line 10, in &lt;module&gt;     for line in reader: ValueError: could not convert string to float: &#39;102.919,103.36&#39;  this this error which is returned back"}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "reply_to_user": {"reputation": 15, "user_id": 7283061, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-JcRUlWW86lg/AAAAAAAAAAI/AAAAAAAAQj0/cUkRiZKdpjE/photo.jpg?sz=128", "display_name": "Jinay Jani", "link": "https://stackoverflow.com/users/7283061/jinay-jani"}, "edited": false, "score": 0, "creation_date": 1485996685, "post_id": 41992237, "comment_id": 71162055, "body": "Yes, but what is line 10 in this case? I do not know your line counting."}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "reply_to_user": {"reputation": 15, "user_id": 7283061, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-JcRUlWW86lg/AAAAAAAAAAI/AAAAAAAAQj0/cUkRiZKdpjE/photo.jpg?sz=128", "display_name": "Jinay Jani", "link": "https://stackoverflow.com/users/7283061/jinay-jani"}, "edited": false, "score": 0, "creation_date": 1485997259, "post_id": 41992237, "comment_id": 71162232, "body": "Close to impossible, if your data really looks like you say. Are you sure it doesn&#39;t have a comma instead of a whitespace between the numbers?"}, {"owner": {"reputation": 15, "user_id": 7283061, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-JcRUlWW86lg/AAAAAAAAAAI/AAAAAAAAQj0/cUkRiZKdpjE/photo.jpg?sz=128", "display_name": "Jinay Jani", "link": "https://stackoverflow.com/users/7283061/jinay-jani"}, "edited": false, "score": 0, "creation_date": 1486057901, "post_id": 41992237, "comment_id": 71193717, "body": "Yes, I am sure my data looks like this and it has whitespaces between the numbers."}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "reply_to_user": {"reputation": 15, "user_id": 7283061, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-JcRUlWW86lg/AAAAAAAAAAI/AAAAAAAAQj0/cUkRiZKdpjE/photo.jpg?sz=128", "display_name": "Jinay Jani", "link": "https://stackoverflow.com/users/7283061/jinay-jani"}, "edited": false, "score": 0, "creation_date": 1486058092, "post_id": 41992237, "comment_id": 71193832, "body": "Does the second option of using np.loadtxt fail as well?"}, {"owner": {"reputation": 15, "user_id": 7283061, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-JcRUlWW86lg/AAAAAAAAAAI/AAAAAAAAQj0/cUkRiZKdpjE/photo.jpg?sz=128", "display_name": "Jinay Jani", "link": "https://stackoverflow.com/users/7283061/jinay-jani"}, "edited": false, "score": 0, "creation_date": 1486101391, "post_id": 41992237, "comment_id": 71209877, "body": "I made some additional changes to the np.loadtext and it worked. Thank you for your help."}], "tags": [], "owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "is_accepted": true, "score": 0, "last_activity_date": 1485995445, "last_edit_date": 1485995445, "creation_date": 1485994585, "answer_id": 41992237, "question_id": 41991922, "link": "https://stackoverflow.com/questions/41991922/coverting-string-to-floats-using-csv-file-and-generating-histogram/41992237#41992237", "title": "Coverting string to floats using .csv file and generating Histogram", "body": "<p>First of all <code>with open('datafile.csv', 'rU') as data:</code> means that you obtain <code>data</code> as a filehandle to the file. You can use this filehandle as an iterable but you cannot append anything to it.</p>\n\n<p>Second <code>csv.DictReader</code> provides access to the data as a dictionary. In this case here, I would recommend using <code>csv.reader</code>, which gives access to the data as a <code>list</code>.</p>\n\n<p>Third, you cannot convert the whole <code>line</code>, may it be a dictionary or a list, to a float. You can only do that with a single element of the list. (This is where the error comes from.) Conversion to float isn't even necessary, since the reader already takes care of that.</p>\n\n<p>Now, you can simply append the elements line by line to an initially empty list and supply this list to the histogram function.</p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\nimport csv\n\ndata = [] #create empty list\nwith open('datafile.csv', 'rU') as f:\n    reader = csv.reader(f, delimiter=' ', quoting=csv.QUOTE_NONNUMERIC)\n    for line in reader:\n        data.extend(line)\n\n# generate the histogram\nhist, bin_edges=np.histogram(data, bins=50, range=[80,135])\n\n\n# generate histogram figure\nplt.hist(data, bin_edges)\n#plt.savefig('chart_file', format=\"pdf\")\nplt.show()\n</code></pre>\n\n<p>Let me just mention that the whole data reading can be done in a much simpler way, using <code>numpy.loadtxt</code>.<br>\nAlso, plotting the histogram may be simplified, in case no further data processing needs to take place.</p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\n\ndata = np.loadtxt('datafile.csv').flatten()\n\nplt.hist(data, bins=50, range=[80,135])\n\nplt.show()\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 7283061, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-JcRUlWW86lg/AAAAAAAAAAI/AAAAAAAAQj0/cUkRiZKdpjE/photo.jpg?sz=128", "display_name": "Jinay Jani", "link": "https://stackoverflow.com/users/7283061/jinay-jani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 756, "favorite_count": 0, "accepted_answer_id": 41992237, "answer_count": 1, "score": 0, "last_activity_date": 1486028270, "creation_date": 1485992590, "last_edit_date": 1486028270, "question_id": 41991922, "link": "https://stackoverflow.com/questions/41991922/coverting-string-to-floats-using-csv-file-and-generating-histogram", "title": "Coverting string to floats using .csv file and generating Histogram", "body": "<p>I've been with .cvs files to generate Histogram from the data. It has data something like this</p>\n\n<pre><code>    102.919 103.36\n    102.602 103.05\n    104.106 104.57\n    108.791 109.26\n    104.045 104.52\n    104.324 104.77\n    105.106 105.57\n    102.619 103.08\n    102.124 102.6\n</code></pre>\n\n<p>Here's the code I have written</p>\n\n<pre><code># histplot.py\n        import numpy as np\n        import matplotlib.pyplot as plt\n        import csv\n\n        with open('datafile.csv', 'rU') as data:\n            reader = csv.DictReader(data, delimiter=' ', quoting=csv.QUOTE_NONNUMERIC)\n            for line in reader:\n                t = float(line)\n                data.append(t)\n            reader.close()\n\n# generate the histogram\n        hist, bin_edges=np.histogram(data, bins=50, range=[80,135])\n\n\n# generate histogram figure\n        plt.hist(data, bin_edges)\n        plt.savefig('chart_file', format=\"pdf\")\n        plt.show()\n</code></pre>\n\n<p>Running this code give me an error <strong>ValueError: could not convert string to float: '102.919,103.36'</strong>\nCan someone help me in giving few ideas regarding converting strings to float using csv file.\nThank you in advance.  </p>\n"}, {"tags": ["python", "jenkins", "docker", "utf-8", "subprocess"], "comments": [{"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1485993894, "post_id": 41991898, "comment_id": 71161250, "body": "text <code>UnicodeDecodeError: &#39;</code> mostly means that console/terminal doesn&#39;t use <code>UTF-8</code> or Python doesn&#39;t know it and it uses <code>encode(&#39;ascii&#39;)</code> instead of <code>encode(&#39;utf-8&#39;)</code> so you have to do it manually when you send string to console."}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1485994028, "post_id": 41991898, "comment_id": 71161301, "body": "BTW: always put <b>FULL</b> error message (Traceback) in <b>QUESTION</b>. There are other usefull information, ie. which line makes problem."}, {"owner": {"reputation": 10180, "user_id": 143397, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/78d44a79f724bc784792b49f78769d3a?s=128&d=identicon&r=PG", "display_name": "davidA", "link": "https://stackoverflow.com/users/143397/davida"}, "reply_to_user": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1485997673, "post_id": 41991898, "comment_id": 71162340, "body": "@furas thanks, I&#39;ve edited to add full traceback."}, {"owner": {"reputation": 10180, "user_id": 143397, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/78d44a79f724bc784792b49f78769d3a?s=128&d=identicon&r=PG", "display_name": "davidA", "link": "https://stackoverflow.com/users/143397/davida"}, "reply_to_user": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1485997748, "post_id": 41991898, "comment_id": 71162355, "body": "The issue I have is that it works fine when run directly from a terminal, but not when run by Jenkins. So if the Python code is to do something special, it needs to know that it is running under Jenkins, and what I don&#39;t understand is what must be changing in this environment, so that the python program can detect it and act accordingly. Again, it all works fine when run from my terminal."}, {"owner": {"reputation": 10180, "user_id": 143397, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/78d44a79f724bc784792b49f78769d3a?s=128&d=identicon&r=PG", "display_name": "davidA", "link": "https://stackoverflow.com/users/143397/davida"}, "reply_to_user": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1485997809, "post_id": 41991898, "comment_id": 71162374, "body": "Also, this error is happening when <i>reading</i> output from a sub-process - I&#39;m not sending any strings to the console."}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1485998372, "post_id": 41991898, "comment_id": 71162520, "body": "check source code of <a href=\"https://github.com/amoffat/sh/blob/master/sh.py\" rel=\"nofollow noreferrer\">sh</a> and you will see that <code>Command()</code> has option <a href=\"https://github.com/amoffat/sh/blob/master/sh.py#L983\" rel=\"nofollow noreferrer\">encoding</a> - maybe it resolve problem - try <code>Command(args[0], encoding=&#39;utf-8&#39;)</code>"}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1485999241, "post_id": 41991898, "comment_id": 71162738, "body": "or rather <code>run(args[1:], ..., _encoding=&#39;utf-8&#39;)</code>"}, {"owner": {"reputation": 10180, "user_id": 143397, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/78d44a79f724bc784792b49f78769d3a?s=128&d=identicon&r=PG", "display_name": "davidA", "link": "https://stackoverflow.com/users/143397/davida"}, "reply_to_user": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1486067253, "post_id": 41991898, "comment_id": 71198778, "body": "@furas Yep, I&#39;ve seen that option (I mentioned it in my question). This only seems to affect the encoding of text emitted via <code>stdout</code> or <code>stderr</code> - i.e. whether to output ASCII or UTF-8 text to the input of a subprocess. It doesn&#39;t appear (by looking at the code) to affect the locale that the subprocess is executed within. And my testing suggests it doesn&#39;t either."}, {"owner": {"reputation": 10180, "user_id": 143397, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/78d44a79f724bc784792b49f78769d3a?s=128&d=identicon&r=PG", "display_name": "davidA", "link": "https://stackoverflow.com/users/143397/davida"}, "reply_to_user": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1486067351, "post_id": 41991898, "comment_id": 71198831, "body": "The key thing, I suspect, is that this works 100% fine when run from a local terminal, and breaks 100% when run from Jenkins. Therefore I suspect it&#39;s related to the Jenkins environment or the options set on the pipes that Jenkins uses to spawn processes (if that can affect a subprocess&#39;s locale - I don&#39;t know enough about that). Jenkins doesn&#39;t allocate a TTY for the subprocesses as far as I can tell, so that might be relevant."}], "answers": [{"tags": [], "owner": {"reputation": 51, "user_id": 8815129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23f4b70212d750c3e1223475c8fb0143?s=128&d=identicon&r=PG&f=1", "display_name": "niwatolli3", "link": "https://stackoverflow.com/users/8815129/niwatolli3"}, "is_accepted": false, "score": 2, "last_activity_date": 1509277826, "creation_date": 1509277826, "answer_id": 46999810, "question_id": 41991898, "link": "https://stackoverflow.com/questions/41991898/python-running-docker-containers-with-sh-and-handling-utf-8-decoding-errors/46999810#46999810", "title": "Python: running docker containers with sh and handling UTF-8 decoding errors", "body": "<p>I had a similar problem when running python script in docker container.</p>\n\n<p>I solved the following procedure.</p>\n\n<p>(Step 1) add the following line in Dockerfile before running python command</p>\n\n<pre><code>ENV LANG C.UTF-8\n</code></pre>\n"}], "owner": {"reputation": 10180, "user_id": 143397, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/78d44a79f724bc784792b49f78769d3a?s=128&d=identicon&r=PG", "display_name": "davidA", "link": "https://stackoverflow.com/users/143397/davida"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 762, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1509277826, "creation_date": 1485992468, "last_edit_date": 1485997651, "question_id": 41991898, "link": "https://stackoverflow.com/questions/41991898/python-running-docker-containers-with-sh-and-handling-utf-8-decoding-errors", "title": "Python: running docker containers with sh and handling UTF-8 decoding errors", "body": "<p>I have a Python program that is directly executed by Jenkins. This program uses the <a href=\"https://pypi.python.org/pypi/sh%20%60sh%60\" rel=\"nofollow noreferrer\"><code>sh</code></a> library to execute a docker container, via this function. Note that it is an important feature of this function that it display the subprocess's output as it executes:</p>\n\n<pre><code>def run_command(*args, **kwargs):\n\n    # pass the parent stream 'tty' state to the command:\n    tty_in = sys.stdin.isatty()\n    tty_out = sys.stdout.isatty()\n\n    run = sh.Command(args[0])\n    try:\n        for line in run(args[1:], _err=sys.stdout, _iter=True, _tty_in=tty_in, _tty_out=tty_out):\n            sys.stdout.write(line)\n            sys.stdout.flush()\n</code></pre>\n\n<p>As per the comments, <code>docker run</code> requires a TTY for input, so the keyword argument <code>_tty_in</code> is set to match whatever the state of <code>stdin</code> is. However when running under Jenkins, it is <code>False</code>.</p>\n\n<p>However the issue is around UTF-8 encoded error messages from programs running within the container such as <code>cp</code>. This results in errors such as:</p>\n\n<pre><code>cp: cannot stat \\xe2\\x80\\x98filename...\n</code></pre>\n\n<p>It turns out those three bytes are utf-8 encoding for a special \"quote\" character that cp likes to use when the locale is UTF-8. If I set the locale to \"C\" manually before running <code>cp</code> directly, I can see that it uses normal ascii instead.</p>\n\n<p>When my Python script encounters these errors, it dies with the following:</p>\n\n<pre><code>Exception in thread Thread-10:\nTraceback (most recent call last):\n  File \"/usr/lib/python2.7/threading.py\", line 810, in __bootstrap_inner\n    self.run()\n  File \"/usr/lib/python2.7/threading.py\", line 763, in run\n    self.__target(*self.__args, **self.__kwargs)\n  File \"/usr/local/lib/python2.7/dist-packages/sh.py\", line 1484, in output_thread\n    done = stream.read()\n  File \"/usr/local/lib/python2.7/dist-packages/sh.py\", line 1974, in read\n    self.write_chunk(chunk)\n  File \"/usr/local/lib/python2.7/dist-packages/sh.py\", line 1949, in write_chunk\n    self.should_quit = self.process_chunk(chunk)\n  File \"/usr/local/lib/python2.7/dist-packages/sh.py\", line 1847, in process\n    handler.write(chunk)\n  File \"/usr/lib/python2.7/codecs.py\", line 351, in write\n    data, consumed = self.encode(object, self.errors)\nUnicodeDecodeError: 'ascii' codec can't decode byte 0xe2 in position 16: ordinal not in range(128)\n</code></pre>\n\n<p>This suggests to me that the <code>sh</code> module is expecting ascii output from the subprocess, but is receiving UTF-8 and is unable to decode it.</p>\n\n<p>I found the <code>_encoding</code> and <code>_decode_errors</code> options for <code>sh</code> and although these do seem to affect the locale that <code>cp</code> sees when run directly by <code>sh</code>, it does not appear to translate correctly for programs running within the docker container. However it does allow the program to continue as the decoding errors are skipped rather than raising an exception.</p>\n\n<p>I would prefer to understand the situation better and implement a proper solution. Can anyone explain what is actually going on here, step by step (Jenkins > Python > sh > Docker > Bash)</p>\n\n<p>I'm using Python 2.7.12 with Jenkins 2.33.</p>\n"}, {"tags": ["python", "numpy"], "comments": [{"owner": {"reputation": 1446, "user_id": 7491302, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55ed578eeae7d2391579f475bbe86fa8?s=128&d=identicon&r=PG&f=1", "display_name": "Tristan", "link": "https://stackoverflow.com/users/7491302/tristan"}, "edited": false, "score": 0, "creation_date": 1485992658, "post_id": 41991897, "comment_id": 71160838, "body": "Perhaps this helps: <a href=\"http://stackoverflow.com/questions/31587802/numpy-add-a-vector-to-matrix-column-wise\" title=\"numpy add a vector to matrix column wise\">stackoverflow.com/questions/31587802/&hellip;</a> It is not much more readable though..."}], "answers": [{"comments": [{"owner": {"reputation": 10628, "user_id": 4565947, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e5b166ea39cc61a22e0c04a67ef53bd7?s=128&d=identicon&r=PG&f=1", "display_name": "Julien", "link": "https://stackoverflow.com/users/4565947/julien"}, "edited": false, "score": 0, "creation_date": 1485992958, "post_id": 41991972, "comment_id": 71160925, "body": "You can also do this (arguably more clearly) with <code>vector.shape=(-1,1)</code>. The <code>-1</code> basically coding for &quot;keep the size of the vector&quot; or defining directly <code>vector = np.array([[10],[20],[30]])</code>"}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 1, "creation_date": 1485998358, "post_id": 41991972, "comment_id": 71162516, "body": "Once you get used to it, the <code>[:, None]</code> version is clear and easy to use."}], "tags": [], "owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "is_accepted": true, "score": 2, "last_activity_date": 1485992825, "creation_date": 1485992825, "answer_id": 41991972, "question_id": 41991897, "link": "https://stackoverflow.com/questions/41991897/how-to-add-matrix-and-vector-column-wise/41991972#41991972", "title": "How to add matrix and vector column-wise?", "body": "<p>Make the vector a column:</p>\n\n<pre><code>matrix + vector[:, None]\n</code></pre>\n"}], "owner": {"reputation": 24576, "user_id": 3767239, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f7cdefb47f96069d7add1222c70f3f70?s=128&d=identicon&r=PG&f=1", "display_name": "a_guest", "link": "https://stackoverflow.com/users/3767239/a-guest"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3638, "favorite_count": 0, "accepted_answer_id": 41991972, "answer_count": 1, "score": 1, "last_activity_date": 1485992825, "creation_date": 1485992467, "question_id": 41991897, "link": "https://stackoverflow.com/questions/41991897/how-to-add-matrix-and-vector-column-wise", "title": "How to add matrix and vector column-wise?", "body": "<p>Consider the following:</p>\n\n<pre><code>&gt;&gt;&gt; matrix = numpy.array([[1, 2, 3],\n...                       [4, 5, 6],\n...                       [7, 8, 9]])\n&gt;&gt;&gt; vector = numpy.array([10, 20, 30])\n&gt;&gt;&gt; matrix + vector\narray([[11, 22, 33],\n       [14, 25, 36],\n       [17, 28, 39]])\n</code></pre>\n\n<p>This adds the vector and the matrix <em>row-wise</em> (i.e. each row being added the vector).</p>\n\n<p>How to perform the same <em>column-wise</em>? The result should be</p>\n\n<pre><code>&gt;&gt;&gt; ???\narray([[11, 12, 13],\n       [24, 25, 26],\n       [37, 38, 39]])\n</code></pre>\n\n<p>I'm aware that I can use</p>\n\n<pre><code>&gt;&gt;&gt; (matrix.T + vector).T\narray([[11, 12, 13],\n       [24, 25, 26],\n       [37, 38, 39]])\n</code></pre>\n\n<p>However I have many such additions and using this double transposition will make the code quite unreadable. Is there a way to configure ndarrays such that they will perform addition along the first axis (instead of the last)?</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 1, "creation_date": 1485993311, "post_id": 41991895, "comment_id": 71161050, "body": "In <i>Approach 1</i> you are taking straight averages over all observations of that hour type.  <i>Approach 2</i> you are summing first (for <code>Volume</code>) across each hour, then taking the average of those sums across all hours.  I&#39;d expect <i>Approach 2</i> to give results a multiple of times bigger than <i>Approach 1</i> where multiple is ~ the frequency of observations per hour."}, {"owner": {"reputation": 3890, "user_id": 4981251, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/9ab8174b71c5ee8db4fb07adc43e512b?s=128&d=identicon&r=PG&f=1", "display_name": "nipy", "link": "https://stackoverflow.com/users/4981251/nipy"}, "reply_to_user": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 0, "creation_date": 1485993484, "post_id": 41991895, "comment_id": 71161109, "body": "hi @piRSquared thanks for your input, I suspected this, which is why I asked how to use the <code>ohlc_dict</code> with approach 1.  Is it possible?"}, {"owner": {"reputation": 3890, "user_id": 4981251, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/9ab8174b71c5ee8db4fb07adc43e512b?s=128&d=identicon&r=PG&f=1", "display_name": "nipy", "link": "https://stackoverflow.com/users/4981251/nipy"}, "reply_to_user": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 0, "creation_date": 1486125193, "post_id": 41991895, "comment_id": 71222682, "body": "@piRsquared (or anyone else interested).  I have cross referenced this data against a commercial charting package and approach 2 appears to be giving the correct output.  Would be useful to see how the  groupby (approach 1) syntax needs to be modified to get same results as approach 2."}], "owner": {"reputation": 3890, "user_id": 4981251, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/9ab8174b71c5ee8db4fb07adc43e512b?s=128&d=identicon&r=PG&f=1", "display_name": "nipy", "link": "https://stackoverflow.com/users/4981251/nipy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1485994940, "creation_date": 1485992444, "question_id": 41991895, "link": "https://stackoverflow.com/questions/41991895/groupby-and-resample-on-time-series-data", "title": "Groupby and resample on time series data", "body": "<p><strong>Data:</strong></p>\n\n<pre><code>ohlc_dict = {\n'Open':'first',\n'High':'max',\n'Low':'min',\n'Last': 'last',\n'Volume': 'sum'}\n\ndata['hod'] = [r.hour for r in data.index]\n\ndata.head(10)\nOut[61]:\n\n                    Open    High    Low    Last    Volume   hod dow\nTimestamp                           \n2014-05-08 08:00:00 136.230 136.290 136.190 136.290 7077    8   Thursday\n2014-05-08 08:15:00 136.290 136.300 136.240 136.250 3881    8   Thursday\n2014-05-08 08:30:00 136.240 136.270 136.230 136.230 2540    8   Thursday\n2014-05-08 08:45:00 136.230 136.260 136.230 136.250 2293    8   Thursday\n2014-05-08 09:00:00 136.250 136.360 136.240 136.360 15014   9   Thursday\n2014-05-08 09:15:00 136.350 136.360 136.260 136.270 11697   9   Thursday\n2014-05-08 09:30:00 136.270 136.270 136.190 136.200 15600   9   Thursday\n2014-05-08 09:45:00 136.200 136.270 136.200 136.240 9025    9   Thursday\n2014-05-08 10:00:00 136.240 136.270 136.240 136.260 7128    10  Thursday\n2014-05-08 10:15:00 136.250 136.260 136.200 136.200 6100    10  Thursday\n</code></pre>\n\n<p><strong>Question:</strong></p>\n\n<p>Both of the following are changing the timeframe from 15 mins to a 1 hour interval:</p>\n\n<p><strong>Approach 1:</strong></p>\n\n<pre><code>data['2016'].groupby('hod').Volume.mean().head()\n\nhod\n8     8452.597\n9    16485.398\n10   15619.626\n11   14132.666\n12   11470.058\nName: Volume, dtype: float64\n</code></pre>\n\n<p><strong>Approach 2:</strong></p>\n\n<pre><code>df_h1 = data.resample('1h').agg(ohlc_dict).dropna()\ndf_h1['hod'] = [r.hour for r in df_h1.index]\ndf_h1['2016'].groupby('hod')['Volume'].mean()\n\nTimestamp\n2014-05-08 08:00:00   15791.000\n2014-05-08 09:00:00   51336.000\n2014-05-08 10:00:00   28855.000\n2014-05-08 11:00:00   56543.000\n2014-05-08 12:00:00   25249.000\nName: Volume, dtype: float64\n</code></pre>\n\n<p>Only approach 2 gives what appears to be accurate output of the volume data.</p>\n\n<p>How do I change approach 1 to give me the same <code>Volume</code> output as approach 2 but using <code>groupby</code> instead of <code>resample</code>?  I'm not sure how to use the <code>ohlc_dict</code> with approach 1 and feel this is what is required.</p>\n"}, {"tags": ["python", "amazon-web-services"], "comments": [{"owner": {"reputation": 2506, "user_id": 983387, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/r8F4P.jpg?s=128&g=1", "display_name": "gsaslis", "link": "https://stackoverflow.com/users/983387/gsaslis"}, "edited": false, "score": 0, "creation_date": 1486021436, "post_id": 41991872, "comment_id": 71169954, "body": "what platform (os / version) are you running this in? Afaik, the installation script does not install all platforms."}, {"owner": {"reputation": 2732, "user_id": 2061886, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/dkfiz.jpg?s=128&g=1", "display_name": "lightweight", "link": "https://stackoverflow.com/users/2061886/lightweight"}, "reply_to_user": {"reputation": 2506, "user_id": 983387, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/r8F4P.jpg?s=128&g=1", "display_name": "gsaslis", "link": "https://stackoverflow.com/users/983387/gsaslis"}, "edited": false, "score": 0, "creation_date": 1486050347, "post_id": 41991872, "comment_id": 71188866, "body": "I&#39;m using RHEL7"}, {"owner": {"reputation": 2506, "user_id": 983387, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/r8F4P.jpg?s=128&g=1", "display_name": "gsaslis", "link": "https://stackoverflow.com/users/983387/gsaslis"}, "edited": false, "score": 0, "creation_date": 1486067548, "post_id": 41991872, "comment_id": 71198940, "body": "well, line 523 is <code>subprocess.call([AWSCLI_CMD, &#39;configure&#39;, &#39;set&#39;, &#39;plugins.cwlogs&#39;, &#39;cwlogs&#39;], env=DEFAULT_ENV)</code> and AWSCLI_CMD is <code>&#47;var&#47;awslogs&#47;bin&#47;aws</code> . can you confirm if that exists?"}, {"owner": {"reputation": 3085, "user_id": 203925, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/3b786104ef0fd14d4708fdca6f342e02?s=128&d=identicon&r=PG", "display_name": "Eric Hydrick", "link": "https://stackoverflow.com/users/203925/eric-hydrick"}, "edited": false, "score": 0, "creation_date": 1494364678, "post_id": 41991872, "comment_id": 74795028, "body": "I&#39;m having this issue, and can confirm /var/awslogs/bin/aws is the file that&#39;s missing."}, {"owner": {"reputation": 3085, "user_id": 203925, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/3b786104ef0fd14d4708fdca6f342e02?s=128&d=identicon&r=PG", "display_name": "Eric Hydrick", "link": "https://stackoverflow.com/users/203925/eric-hydrick"}, "edited": false, "score": 0, "creation_date": 1494365197, "post_id": 41991872, "comment_id": 74795252, "body": "It appears that this is being caused by the script detecting the presence of /var/awslogs/bin/activate - so it&#39;s not creating the virtual environment for awslogs, which I believe is what would install the /var/awslogs/bin/aws file."}, {"owner": {"reputation": 1635, "user_id": 839369, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/512602658a3e6b75967b5e7be37d8344?s=128&d=identicon&r=PG", "display_name": "Bruce Edge", "link": "https://stackoverflow.com/users/839369/bruce-edge"}, "edited": false, "score": 0, "creation_date": 1518737126, "post_id": 41991872, "comment_id": 84639798, "body": "Here&#39;s another solution specifically for ubuntu 17.10 <a href=\"https://stackoverflow.com/questions/48817525/awslogs-agent-setup-py-not-working-on-ubuntu-17-10-artful/48817582#48817582\" title=\"awslogs agent setup py not working on ubuntu 17 10 artful\">stackoverflow.com/questions/48817525/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 823, "user_id": 5178775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O6muf.png?s=128&g=1", "display_name": "Jose Haro Peralta", "link": "https://stackoverflow.com/users/5178775/jose-haro-peralta"}, "is_accepted": false, "score": 1, "last_activity_date": 1496673523, "last_edit_date": 1496673523, "creation_date": 1496400024, "answer_id": 44326940, "question_id": 41991872, "link": "https://stackoverflow.com/questions/41991872/having-trouble-installing-awslogs-agent/44326940#44326940", "title": "having trouble installing awslogs agent", "body": "<p>Although this question is a bit old, I'd like to add an answer to it, as I recently run into the same problem, but managed to find a way around it. I was trying to install this in an instance running CentOS 7. </p>\n\n<p>When I run the installation command for the first time, I got exactly the same error log reported by @user2061886. The installer logs to a file with the following path: /var/log/awslogs-agent-setup.log. I tailed the file and found that internally the installer was complaining about not being able to find the file \"Python.h\":</p>\n\n<pre><code>    creating build/temp.linux-x86_64-2.7\n    checking if libyaml is compilable\n    gcc -pthread -fno-strict-aliasing -O2 -g -pipe -Wall -Wp,-\nD_FORTIFY_SOURCE=2 -fexceptions -fstack-protector-strong --param=ssp-buffer-\nsize=4 -grecord-gcc-switches -m64 -mtune=generic -D_GNU_SOURCE -fPIC -fwrapv -DNDEBUG -O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector-strong --param=ssp-buffer-size=4 -grecord-gcc-switches -m64 -mtune=generic -D_GNU_SOURCE -fPIC -fwrapv -fPIC -I/usr/include/python2.7 -c build/temp.linux-x86_64-2.7/check_libyaml.c -o build/temp.linux-x86_64-2.7/check_libyaml.o\nchecking if libyaml is linkable\ngcc -pthread build/temp.linux-x86_64-2.7/check_libyaml.o -L/usr/lib64 -lyaml -o build/temp.linux-x86_64-2.7/check_libyaml\nbuilding '_yaml' extension\ncreating build/temp.linux-x86_64-2.7/ext\ngcc -pthread -fno-strict-aliasing -O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector-strong --param=ssp-buffer-size=4 -grecord-gcc-switches -m64 -mtune=generic -D_GNU_SOURCE -fPIC -fwrapv -DNDEBUG -O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector-strong --param=ssp-buffer-size=4 -grecord-gcc-switches -m64 -mtune=generic -D_GNU_SOURCE -fPIC -fwrapv -fPIC -I/usr/include/python2.7 -c ext/_yaml.c -o build/temp.linux-x86_64-2.7/ext/_yaml.o\next/_yaml.c:4:20: fatal error: Python.h: No such file or directory\n #include \"Python.h\"\n                    ^\n    compilation terminated.\n    error: command 'gcc' failed with exit status 1\n</code></pre>\n\n<p>I couldn't get it working with Python 2.7, so I switched to Python 3.5. To install Python 3.5 in CentOS 7:</p>\n\n<pre><code>yum -y udpate\n\nyum install -y epel-release\n\nyum install -y http://dl.iuscommunity.org/pub/ius/stable/CentOS/7/x86_64/ius-\nrelease-1.0-13.ius.centos7.noarch.rpm\n\nyum -y update\n\nyum install -y python35u*\n</code></pre>\n\n<p>I run again the installer command and got passed the error reported by @user2061886. I could install and configure the CloudWatch Logs Agent. However, soon after I started the service (sudo service awslogs start), I run into a second problem. This time I had to tail the following file to spot the issue: /var/log/awslogs.log. The cloudwatch logs agent was basically complaining about not being able to find the cwlogs package:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"/var/awslogs/bin/aws\", line 27, in &lt;module&gt;\n    sys.exit(main())\n  File \"/var/awslogs/bin/aws\", line 23, in main\n    return awscli.clidriver.main()\n  File \"/usr/lib/python3.5/site-packages/awscli/clidriver.py\", line 55, in main\n    driver = create_clidriver()\n  File \"/usr/lib/python3.5/site-packages/awscli/clidriver.py\", line 64, in create_clidriver\n    event_hooks=emitter)\n  File \"/usr/lib/python3.5/site-packages/awscli/plugin.py\", line 44, in load_plugins\n    modules = _import_plugins(plugin_mapping)\n  File \"/usr/lib/python3.5/site-packages/awscli/plugin.py\", line 58, in _import_plugins\n    plugins.append(__import__(path))\nImportError: No module named 'cwlogs'\n</code></pre>\n\n<p>I solved this by installing the package manually with pip:</p>\n\n<pre><code>pip3.5 install awscli-cwlogs. \n</code></pre>\n\n<p>This got the problem solved! </p>\n"}, {"tags": [], "owner": {"reputation": 551, "user_id": 2966600, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000197614931/picture?type=large", "display_name": "user2966600", "link": "https://stackoverflow.com/users/2966600/user2966600"}, "is_accepted": false, "score": 0, "last_activity_date": 1500656048, "creation_date": 1500656048, "answer_id": 45242911, "question_id": 41991872, "link": "https://stackoverflow.com/questions/41991872/having-trouble-installing-awslogs-agent/45242911#45242911", "title": "having trouble installing awslogs agent", "body": "<p>^^Yeah..  I fixed a similar issue with some missing dependencies that were pointed to in the /var/log/awslogs.log</p>\n\n<hr>\n\n<p>apt-get update &amp;&amp; apt-get install -y python-pip libpython-dev</p>\n"}, {"tags": [], "owner": {"reputation": 5344, "user_id": 1370986, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5f27d0b43fc28785db65c57ae7e81ec5?s=128&d=identicon&r=PG", "display_name": "Milan Cermak", "link": "https://stackoverflow.com/users/1370986/milan-cermak"}, "is_accepted": false, "score": 5, "last_activity_date": 1507818611, "creation_date": 1507818611, "answer_id": 46712244, "question_id": 41991872, "link": "https://stackoverflow.com/questions/41991872/having-trouble-installing-awslogs-agent/46712244#46712244", "title": "having trouble installing awslogs agent", "body": "<p>I solved this by passing the python interpreter to be used:</p>\n\n<pre><code>sudo python ./awslogs-agent-setup.py --region us-east-1 --python=/usr/bin/python3.5\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 17060, "user_id": 1015483, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2794b93b993e339f7838fea4f5041f4b?s=128&d=identicon&r=PG", "display_name": "Robbie", "link": "https://stackoverflow.com/users/1015483/robbie"}, "edited": false, "score": 0, "creation_date": 1535271328, "post_id": 48118799, "comment_id": 90999086, "body": "python-devel did it for me."}], "tags": [], "owner": {"reputation": 229, "user_id": 2121364, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/45f14ca15f3d6b936696c1e7f9c95a73?s=128&d=identicon&r=PG", "display_name": "rednax", "link": "https://stackoverflow.com/users/2121364/rednax"}, "is_accepted": false, "score": 1, "last_activity_date": 1515174664, "creation_date": 1515174664, "answer_id": 48118799, "question_id": 41991872, "link": "https://stackoverflow.com/questions/41991872/having-trouble-installing-awslogs-agent/48118799#48118799", "title": "having trouble installing awslogs agent", "body": "<p>I had the same problem trying to install on centos docker. Turns out I could do without updating python after installing these packages</p>\n\n<pre><code>python-devel libpython-dev which initscripts cronie\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 10377, "user_id": 2832282, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZJ4WG.jpg?s=128&g=1", "display_name": "Cyril Duchon-Doris", "link": "https://stackoverflow.com/users/2832282/cyril-duchon-doris"}, "is_accepted": false, "score": 5, "last_activity_date": 1544799377, "creation_date": 1544799377, "answer_id": 53782073, "question_id": 41991872, "link": "https://stackoverflow.com/questions/41991872/having-trouble-installing-awslogs-agent/53782073#53782073", "title": "having trouble installing awslogs agent", "body": "<p><strong>Amazon Linux 2</strong></p>\n\n<p>The awslogs agent is available now as a yum package <a href=\"https://docs.aws.amazon.com/AmazonCloudWatch/latest/logs/QuickStartEC2Instance.html\" rel=\"noreferrer\">https://docs.aws.amazon.com/AmazonCloudWatch/latest/logs/QuickStartEC2Instance.html</a></p>\n\n<pre><code>sudo yum install -y awslogs\nsudo systemctl start awslogsd\nsudo systemctl enable awslogsd.service\n</code></pre>\n\n<p>Make sure to change the AWS Region as mentionned in the doc</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 5917134, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-d0G60-7HZII/AAAAAAAAAAI/AAAAAAAAAEk/501JHxHyq80/photo.jpg?sz=128", "display_name": "Kaustav Nandi", "link": "https://stackoverflow.com/users/5917134/kaustav-nandi"}, "is_accepted": false, "score": 0, "last_activity_date": 1566403358, "creation_date": 1566403358, "answer_id": 57595477, "question_id": 41991872, "link": "https://stackoverflow.com/questions/41991872/having-trouble-installing-awslogs-agent/57595477#57595477", "title": "having trouble installing awslogs agent", "body": "<p>So guys Just figured it OUT!!</p>\n\n<blockquote>\n  <p>File \"./awslogs-agent-setup.py\", line 520, in install_awslogs_cli\n      venv_in_path = (subprocess.call([\"which\", \"virtualenv\"], stderr=self.log_file, stdout=self.log_file) == 0)</p>\n</blockquote>\n\n<p>On the above error, you can the \"which\" command is being used and unfortunately \"which\" was not installed.\nOnce installed everything started working.</p>\n\n<p>Cheers!! If it helps anyone. </p>\n"}, {"tags": [], "owner": {"reputation": 781, "user_id": 2344975, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2qVpr.jpg?s=128&g=1", "display_name": "Juan&#237;n", "link": "https://stackoverflow.com/users/2344975/juan%c3%adn"}, "is_accepted": false, "score": 0, "last_activity_date": 1574870129, "creation_date": 1574870129, "answer_id": 59074008, "question_id": 41991872, "link": "https://stackoverflow.com/questions/41991872/having-trouble-installing-awslogs-agent/59074008#59074008", "title": "having trouble installing awslogs agent", "body": "<p>I know I'm 2+ years late but I wasn't able to find an answer to this.</p>\n\n<p>I was having the same problem and it was because the disk was running out of inodes (I think running out of disk space can cause the same problem) and I solved it running <code>sudo apt-get autoremove</code></p>\n\n<p>You can check your inodes with <code>df -i</code></p>\n\n<p>I hope this may help anyone having this problem.</p>\n"}], "owner": {"reputation": 2732, "user_id": 2061886, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/dkfiz.jpg?s=128&g=1", "display_name": "lightweight", "link": "https://stackoverflow.com/users/2061886/lightweight"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8501, "favorite_count": 3, "answer_count": 7, "score": 13, "last_activity_date": 1574870129, "creation_date": 1485992306, "question_id": 41991872, "link": "https://stackoverflow.com/questions/41991872/having-trouble-installing-awslogs-agent", "title": "having trouble installing awslogs agent", "body": "<p>I'm having issues trying to instal awslogs agent on my ec2 node. When I run this command:</p>\n\n<pre><code>sudo python ./awslogs-agent-setup.py --region us-east-1\n</code></pre>\n\n<p>it seems to fail at step 2 like this:</p>\n\n<pre><code>Launching interactive setup of CloudWatch Logs agent ... \n\nStep 1 of 5: Installing pip ...DONE\n\nStep 2 of 5: Downloading the latest CloudWatch Logs agent bits ... \nTraceback (most recent call last):\n  File \"./awslogs-agent-setup.py\", line 1144, in &lt;module&gt;\n    main()\n  File \"./awslogs-agent-setup.py\", line 1140, in main\n    setup.setup_artifacts()\n  File \"./awslogs-agent-setup.py\", line 696, in setup_artifacts\n    self.install_awslogs_cli()\n  File \"./awslogs-agent-setup.py\", line 523, in install_awslogs_cli\n    subprocess.call([AWSCLI_CMD, 'configure', 'set', 'plugins.cwlogs', 'cwlogs'], env=DEFAULT_ENV)\n  File \"/usr/lib64/python2.7/subprocess.py\", line 524, in call\n    return Popen(*popenargs, **kwargs).wait()\n  File \"/usr/lib64/python2.7/subprocess.py\", line 711, in __init__\n    errread, errwrite)\n  File \"/usr/lib64/python2.7/subprocess.py\", line 1327, in _execute_child\n    raise child_exception\nOSError: [Errno 2] No such file or directory\n</code></pre>\n\n<p>what directory or file is it missing?</p>\n"}, {"tags": ["python", "python-3.x", "pandas", "matplotlib", "seaborn"], "comments": [{"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1485995012, "post_id": 41991855, "comment_id": 71161577, "body": "I have problems understanding how your dataframe looks like. Could you provide a printout of a Dataframe that has the envisioned structure and clearly state how this relates to <code>x</code>, <code>y1</code> etc.?"}, {"owner": {"reputation": 314, "user_id": 6950889, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/3d5b81f1615983690bb960acf92c9191?s=128&d=identicon&r=PG&f=1", "display_name": "Greg", "link": "https://stackoverflow.com/users/6950889/greg"}, "reply_to_user": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1485996315, "post_id": 41991855, "comment_id": 71161951, "body": "@ImportanceOfBeingErnest I&#39;m working with a dataset from the World Bank. I&#39;ve updated the post to include some more information."}], "answers": [{"tags": [], "owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "is_accepted": false, "score": 2, "last_activity_date": 1485998182, "creation_date": 1485998182, "answer_id": 41992751, "question_id": 41991855, "link": "https://stackoverflow.com/questions/41991855/iterate-over-a-pandas-dataframe-while-skipping-the-first-row/41992751#41992751", "title": "Iterate over a Pandas dataframe while skipping the first row", "body": "<p><code>subset[1:]</code> selects all but the first <strong>row</strong>, the resulting DataFrame still has six columns.</p>\n\n<p>What you can do instead is to iterate over the dataframe's columns (and leave out the first):</p>\n\n<pre><code>import pandas as pd\nimport numpy as np\nimport seaborn as sns\nimport matplotlib.pyplot as plt\n\n# generate some data\na = np.random.rand(10,6)\na[:,0]= np.arange(10)\ndf = pd.DataFrame(a, columns=[l for l in \"xabcde\"])\n#print df\n\n#plot\nfor col in df.columns[1:]:\n    plt.figure()\n    scatterplot = sns.regplot(x=\"x\", y=col, fit_reg=False, data=df)\n\nplt.show()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 68, "user_id": 7504051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6a151b5800ab065dde433950542db7d?s=128&d=identicon&r=PG&f=1", "display_name": "Deepankar", "link": "https://stackoverflow.com/users/7504051/deepankar"}, "is_accepted": true, "score": 2, "last_activity_date": 1486011372, "creation_date": 1486011372, "answer_id": 41994446, "question_id": 41991855, "link": "https://stackoverflow.com/questions/41991855/iterate-over-a-pandas-dataframe-while-skipping-the-first-row/41994446#41994446", "title": "Iterate over a Pandas dataframe while skipping the first row", "body": "<p>Instead of <code>subset[1:]</code>, use <code>subset.columns[1:]</code></p>\n"}], "owner": {"reputation": 314, "user_id": 6950889, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/3d5b81f1615983690bb960acf92c9191?s=128&d=identicon&r=PG&f=1", "display_name": "Greg", "link": "https://stackoverflow.com/users/6950889/greg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6020, "favorite_count": 0, "accepted_answer_id": 41994446, "answer_count": 2, "score": 1, "last_activity_date": 1486011372, "creation_date": 1485992216, "last_edit_date": 1495539929, "question_id": 41991855, "link": "https://stackoverflow.com/questions/41991855/iterate-over-a-pandas-dataframe-while-skipping-the-first-row", "title": "Iterate over a Pandas dataframe while skipping the first row", "body": "<p>I have a data set organized into a Pandas dataframe.</p>\n\n<p>Here's a small example of the data:</p>\n\n<pre><code>        x142_2012  x126_2012   x156_2012  x167_2012     x1_2012  x243_2012  \n0      690.842629   0.005029   51.600000   5.454545   43.000000  27.700000   \n1     4247.485437   5.062739   95.400000  54.655959  100.000000  15.700000   \n2     5583.616160        NaN   84.900000  15.228027  100.000000  31.600000   \n3             NaN        NaN  100.000000        NaN   59.328910        NaN   \n4    39666.369210  34.335120  100.000000  86.434425  100.000000  50.000000   \n5     5531.776299        NaN   47.800000  16.937210   37.000000  34.100000   \n6    13525.616220  14.674017   97.900000  58.000000   90.875440  10.500000   \n7     7465.145864   3.196932   85.417850  29.954302   86.270751  14.872018   \n8    14357.411590  12.530952   98.600000  55.800000   99.800000  37.400000   \n9     3565.517575   7.142042   99.700000  37.500000  100.000000  10.700000   \n10            NaN        NaN   98.100000  74.000000   90.875440        NaN   \n</code></pre>\n\n<p>I want to build a bunch of scatterplots which compare the variable x142_2012 with each other variable, individually. Therefore, I want to iterate over the dataframe, while skipping the first entry. I tried this</p>\n\n<pre><code>import pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\nfor variable in subset[1:]:\n    plt.figure()\n    scatterplot = sns.regplot(x=\"x142_2012\", y=variable, fit_reg=False, data=subset)\n</code></pre>\n\n<p>but instead of outputting 5 scatterplots (<code>x/y1, x/y2, x/y3, x/y4, x/y5</code>), it output 6 scatterplots with the first being <code>x/x</code>.</p>\n\n<p>I'm getting around the issue with this:</p>\n\n<pre><code>for variable in subset:\n    if variable == \"x142_2012\":\n        continue\n    plt.figure()\n    scatterplot = sns.regplot(x=\"x142_2012\", y=variable, fit_reg=False, data=subset)\n</code></pre>\n\n<p>But I don't find it very elegant. I looked at <a href=\"https://stackoverflow.com/questions/34389922/efficient-way-to-do-pandas-operation-and-skip-row\">Efficient way to do pandas operation and skip row</a> and tried <code>for variable in subset[x].idx[1:]</code> but it gives me <code>AttributeError: 'Series' object has no attribute 'idx'</code>.</p>\n\n<p>Is there a better way to do this?</p>\n"}, {"tags": ["python", "excel", "charts", "xlsxwriter"], "comments": [{"owner": {"reputation": 30680, "user_id": 447970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16a73f02bfb0768bed345de389c7e094?s=128&d=identicon&r=PG", "display_name": "teylyn", "link": "https://stackoverflow.com/users/447970/teylyn"}, "edited": false, "score": 0, "creation_date": 1485993173, "post_id": 41991842, "comment_id": 71161000, "body": "FWIW, don&#39;t use pie charts if you have more than three data points. There are better charts to do that, for example horizontal bars. Sort the data to plot the highest value at the top. If you want, filter out zeros,"}], "answers": [{"comments": [{"owner": {"reputation": 1023, "user_id": 4276591, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/522255844cd42d14219868e703ee18f1?s=128&d=identicon&r=PG&f=1", "display_name": "Reise45", "link": "https://stackoverflow.com/users/4276591/reise45"}, "edited": false, "score": 0, "creation_date": 1486147686, "post_id": 42002088, "comment_id": 71236572, "body": "Thanks! can I send it a list or an array of indexes to delete? Tried various ways but can&#39;t seem to send it a list that is deleted. Also looping through a list for individual arrays also only seems to implement the last deletion"}, {"owner": {"reputation": 28655, "user_id": 10238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8c3b1025babebf20168dd90ea8f268c?s=128&d=identicon&r=PG", "display_name": "jmcnamara", "link": "https://stackoverflow.com/users/10238/jmcnamara"}, "reply_to_user": {"reputation": 1023, "user_id": 4276591, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/522255844cd42d14219868e703ee18f1?s=128&d=identicon&r=PG&f=1", "display_name": "Reise45", "link": "https://stackoverflow.com/users/4276591/reise45"}, "edited": false, "score": 0, "creation_date": 1486161680, "post_id": 42002088, "comment_id": 71242804, "body": "I don&#39;t quite understand. The above example uses a list, no? Are you asking how to generate the list? I&#39;d probably use a list comprehension to generate the list. Maybe ask that as a separate question."}, {"owner": {"reputation": 1023, "user_id": 1556734, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/StF1W.jpg?s=128&g=1", "display_name": "Selvam", "link": "https://stackoverflow.com/users/1556734/selvam"}, "edited": false, "score": 0, "creation_date": 1510297143, "post_id": 42002088, "comment_id": 81383871, "body": "Hi JMC, please help with Pie chart to suppress zero values along with the category - <a href=\"https://stackoverflow.com/questions/47069256/how-to-suppress-category-in-excel-pie-chart-for-zero-values\" title=\"how to suppress category in excel pie chart for zero values\">stackoverflow.com/questions/47069256/&hellip;</a>"}], "tags": [], "owner": {"reputation": 28655, "user_id": 10238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8c3b1025babebf20168dd90ea8f268c?s=128&d=identicon&r=PG", "display_name": "jmcnamara", "link": "https://stackoverflow.com/users/10238/jmcnamara"}, "is_accepted": true, "score": 1, "last_activity_date": 1486037881, "creation_date": 1486037881, "answer_id": 42002088, "question_id": 41991842, "link": "https://stackoverflow.com/questions/41991842/python-remove-from-excel-chart-legend-if-value-0/42002088#42002088", "title": "Python: Remove from excel chart legend if value==0", "body": "<p>The XlsxWriter API for removing series names from a chart legend is the <code>delete_series</code> property of <code>set_legend()</code>, <a href=\"https://i.stack.imgur.com/l2IiK.png\" rel=\"nofollow noreferrer\">see the XlsxWriter docs</a>:</p>\n\n<pre><code># Delete/hide series index 0 and 2 from the legend.\n# i.e., Series 1 and 3 from a 3 series chart.\nchart.set_legend({'delete_series': [0, 2]})\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/l2IiK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/l2IiK.png\" alt=\"enter image description here\"></a></p>\n\n<p>You will need to determine which series items have a zero value.</p>\n\n<p>Note, in order to avoid, or add, confusion it is worth pointing out that Pie charts in Excel are a little different from other charts. Pie charts refer to each point in a series as if it is itself a series. That is why each point appears on the legend.</p>\n"}], "owner": {"reputation": 1023, "user_id": 4276591, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/522255844cd42d14219868e703ee18f1?s=128&d=identicon&r=PG&f=1", "display_name": "Reise45", "link": "https://stackoverflow.com/users/4276591/reise45"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1650, "favorite_count": 0, "accepted_answer_id": 42002088, "answer_count": 1, "score": 1, "last_activity_date": 1495620811, "creation_date": 1485992142, "last_edit_date": 1592644375, "question_id": 41991842, "link": "https://stackoverflow.com/questions/41991842/python-remove-from-excel-chart-legend-if-value-0", "title": "Python: Remove from excel chart legend if value==0", "body": "<p>I am making a pie chart using xlsxwriter. I have lots of rows where the value is zero for the column I want to plot. Is it possible to remove from the legend if value is zero?\nSo For example, in the following case I do not want to show Umbro and Fila in the legend\n<a href=\"https://i.stack.imgur.com/nEopl.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nEopl.jpg\" alt=\"enter image description here\" /></a></p>\n<p>What should my <code>add_series</code> function look like?\nI don't see anything here: <a href=\"https://media.readthedocs.org/pdf/pandas-xlsxwriter-charts/latest/pandas-xlsxwriter-charts.pdf\" rel=\"nofollow noreferrer\">https://media.readthedocs.org/pdf/pandas-xlsxwriter-charts/latest/pandas-xlsxwriter-charts.pdf</a></p>\n"}, {"tags": ["python", "qt", "pyside"], "comments": [{"owner": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "edited": false, "score": 0, "creation_date": 1485995983, "post_id": 41991840, "comment_id": 71161834, "body": "See also <a href=\"http://stackoverflow.com/a/40425316/984421\">this closely related answer</a>."}], "owner": {"reputation": 3297, "user_id": 2749004, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/iKnvb.png?s=128&g=1", "display_name": "Johndt", "link": "https://stackoverflow.com/users/2749004/johndt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 29, "favorite_count": 0, "closed_date": 1485995728, "answer_count": 0, "score": 1, "last_activity_date": 1485992129, "creation_date": 1485992129, "question_id": 41991840, "link": "https://stackoverflow.com/questions/41991840/pyside-qlistview-creating-new-item-during-drag-and-drop-rather-than-passing-or", "closed_reason": "Duplicate", "title": "PySide - QListView creating new item during drag and drop rather than passing original", "body": "<p>I am writing a PySide application with a <code>QListView</code>. This <code>QListView</code> allows drag and drop events to change the order of the items it displays. </p>\n\n<p>The <code>QListView</code> uses a <code>QStandardItemModel</code>, and the <code>QStandardItemModel</code> contains <code>QStanardItem</code> objects. I have given these <code>QStandardItem</code> objects custom instance attributes, as follows:</p>\n\n<pre><code>def createShotItem(self, path, display_name, name):\n    item = CustomItem(display_name)\n    item.setCheckable(True)\n    item.setCheckState(QtCore.Qt.Checked)\n\n    item.path = path\n    item.name = name\n    item.fields = {}  # Used to store setting fields\n\n    return item\n</code></pre>\n\n<p>Below is the <code>CustomItem</code> class. </p>\n\n<pre><code>class CustomItem(QtGui.QStandardItem):\n    def __init__(self, text):\n        self.shot_path = \"\"\n        self.name = \"\"\n        self.fields = {}\n        super(CustomItem, self).__init__(text)\n</code></pre>\n\n<p>Previously, I was simply adding the attributes directly to a <code>QStandardItem</code>, without using a sub-class. There was no difference.</p>\n\n<p>The sub-classed <code>QListView</code> and <code>QStandardItemModel</code> classes are as follows:</p>\n\n<pre><code>class DragDropListView(QtGui.QListView):\n    def __init__(self):\n        super(DragDropListView, self).__init__()\n        self.setAcceptDrops(True)\n        self.setDragDropMode(QtGui.QAbstractItemView.DragDrop)\n        self.setDefaultDropAction(QtCore.Qt.MoveAction)\n        self.setDragDropOverwriteMode(False)\n        self.setSelectionMode(QtGui.QAbstractItemView.ExtendedSelection)\n\n    def dragEnterEvent(self, event):\n        if __name__ == '__main__':\n            if event.mimeData().hasUrls:\n                event.acceptProposedAction()\n        else:\n            super(DragDropListView, self).dragEnterEvent(event)\nclass DragDropItemModel(QtGui.QStandardItemModel):\n    def __init__(self):\n        super(DragDropItemModel, self).__init__()\n\n    def flags(self, index):\n        if index.isValid():\n            return QtCore.Qt.ItemIsSelectable | QtCore.Qt.ItemIsDragEnabled | QtCore.Qt.ItemIsEnabled \\\n                   | QtCore.Qt.ItemIsUserCheckable\n\n        return QtCore.Qt.ItemIsSelectable | QtCore.Qt.ItemIsDragEnabled \\\n               | QtCore.Qt.ItemIsDropEnabled | QtCore.Qt.ItemIsEnabled | QtCore.Qt.ItemIsUserCheckable\n</code></pre>\n\n<p>When I later attempt to access one of these attributes on an item who has been moved in the list, I get an error as follows:</p>\n\n<pre><code>AttributeError: 'PySide.QtGui.QStandardItem' object has no attribute 'fields'\n</code></pre>\n\n<p>As you can see, my <code>CustomItem</code>, which extends <code>QStandardItem</code>, has been replaced by a <code>QStandardItem</code> that does not contain any of my custom attributes.</p>\n\n<p>I believe that this is because, when a re-order occurs, due to a drag-and-drop event, PySide creates a new <code>QStandardItem</code> at the desired index, containing the same <code>text</code> attribute, and other PySide attributes, but discarding my custom attributes.</p>\n\n<p>Note that accessing these custom attributes works fine on all unmoved items. Also, appending or inserting a <code>CustomItem</code> using <code>model.appendRow(item)</code> or <code>model.insertRow(index, item)</code> works fine, so the issue is not with those methods.</p>\n\n<p>How can I maintain these custom attributes throughout move events? Do I need to alter the behavior of the move event, and if so, how?</p>\n"}, {"tags": ["python", "arrays", "numpy"], "answers": [{"tags": [], "owner": {"reputation": 3109, "user_id": 1282043, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5b4a6734cc7ca03c73d12daa91b6e380?s=128&d=identicon&r=PG", "display_name": "Arturo", "link": "https://stackoverflow.com/users/1282043/arturo"}, "is_accepted": false, "score": 0, "last_activity_date": 1485992666, "creation_date": 1485992666, "answer_id": 41991936, "question_id": 41991835, "link": "https://stackoverflow.com/questions/41991835/overwrite-array-size-with-new-array-size-and-values-in-python/41991936#41991936", "title": "Overwrite array size with new array size and values in python", "body": "<p><em>Solution and typo (as Willem marked):</em></p>\n\n<pre><code>data2['sac']['startx'][0][0] = startx_buff\n</code></pre>\n\n<h1>The index was off by a [0]</h1>\n"}, {"tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": false, "score": 1, "last_activity_date": 1486000351, "last_edit_date": 1486000351, "creation_date": 1485999000, "answer_id": 41992857, "question_id": 41991835, "link": "https://stackoverflow.com/questions/41991835/overwrite-array-size-with-new-array-size-and-values-in-python/41992857#41992857", "title": "Overwrite array size with new array size and values in python", "body": "<p>With simpler names (we don't need all that dictionary indexing), what you are trying to do is:</p>\n\n<pre><code>In [212]: X = np.zeros((2,119,20),int)\n\nIn [214]: y = np.ones((2,120,20),int)\nIn [215]: X[0,:,:] = y\n...    \nValueError: could not broadcast input array from shape (2,120,20) into shape (119,20)\n</code></pre>\n\n<p>MATLAB does allow some sort of automatic dimension growth, but somehow I doubt if it is this flexible.  That would be dangerous.  When I worked in MATLAB is never depended on that kind of action.  In any case, <code>numpy</code> expects an exact match - within the rules of broadcasting (which adds a lot of power that MATLAB does not (or at least did not) have).</p>\n\n<p>The point is that <code>X[0,:,:]</code> (I added the : for reader clarity) is a (119,20) slot. There's no way that a (2,120,20) block can fit there.</p>\n\n<p>This does work (reducing the LHS so it fits):</p>\n\n<pre><code>X[0,:,:] = y[0, :119, :]\n</code></pre>\n\n<p>We could also grow <code>X</code> with a concatenate</p>\n\n<pre><code>In [219]: X1 = np.concatenate((X, np.zeros((2,1,20),int)), axis=1)\nIn [220]: X1.shape\nOut[220]: (2, 120, 20)\nIn [221]: X1[0,:,:] = y[0,:,:]\n</code></pre>\n\n<p><code>resize</code> also works, but <code>concatenate</code> gives more control over the fill value:</p>\n\n<pre><code>In [222]: np.resize(X, (2,120,20)).shape\nOut[222]: (2, 120, 20)\n</code></pre>\n\n<p><code>np.empty((2,120,20))</code> is a full array with that shape.  It's empty only in the sense that the values are unspecified.  <code>numpy</code> does not have the equivalent of the list, <code>x[1:3]=[]</code> (well there is a <code>np.delete</code> function.)</p>\n\n<p><code>data2['sac']['startx'][0][0]</code> expression is a bit unclear.  In Python that looks like a couple levels of dictionary access followed by a couple levels of list indexing.  </p>\n\n<p>Keep in mind that numpy arrays are roughly equivalent to MATLAB matrices, and python lists more like MATLAB cells.  Lists like cells can hold anything, including arrays.</p>\n\n<pre><code>In [227]: alist[0]=np.arange(3)\nIn [228]: alist\nOut[228]: [array([0, 1, 2]), [2, 3], None]\n</code></pre>\n"}], "owner": {"reputation": 3109, "user_id": 1282043, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/5b4a6734cc7ca03c73d12daa91b6e380?s=128&d=identicon&r=PG", "display_name": "Arturo", "link": "https://stackoverflow.com/users/1282043/arturo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 199, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1486000351, "creation_date": 1485992077, "last_edit_date": 1485997007, "question_id": 41991835, "link": "https://stackoverflow.com/questions/41991835/overwrite-array-size-with-new-array-size-and-values-in-python", "title": "Overwrite array size with new array size and values in python", "body": "<p>I have the following python code that outputs:</p>\n\n<pre><code># Somecode block before\n#####################\nprint np.shape(data2['sac']['startx'][0][0])\nprint np.shape(startx_buff)\n# New Completed Assignment\ndata2['sac']['startx'][0][0][0] = startx_buff\n\n#**shape of data2['sac']['startx'][0][0] = (2, 119, 20)**\n\n#**shape of startx_buff = (2,120,20)**\n\n#***Error: data2['sac']['startx'][0][0][0] = startx_buff\n</code></pre>\n\n<p>ValueError: could not broadcast input array from shape (2,120,20) into shape (119,20)***</p>\n\n<p>And I'd essentially like to overwrite the <code>data2['sac']['startx'][0][0]</code> entry to have the <code>(2,120,20)</code> dimensions (as well as the values of <code>startx_buff</code>). The reason: After post-processing I noticed an entry value was missing. In MATLAB this is no problem since it is more flexible, and I can potentially redefine a variable by assigning it a new value, and array/cell shape. But other things I've tried in python for a workaround doesnt' work is:</p>\n\n<pre><code>del data2['sac']['startx'][0][0]\ndata2['sac']['startx'][0][0] = np.empty((2,120,20))\n#Error: won't let me delete all the values in the array\n</code></pre>\n\n<p>I'm not quite sure what the solution is, or even under what to look for online (I tried looking for overwriting/overloading array size). Besides finding the answer to this problem, what would be the correct terminology for this issue?</p>\n"}, {"tags": ["python", "matplotlib", "bar-chart"], "comments": [{"owner": {"reputation": 22012, "user_id": 194586, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/1a71658d81f8a82a8122050f21bb86d3?s=128&d=identicon&r=PG", "display_name": "Nick T", "link": "https://stackoverflow.com/users/194586/nick-t"}, "edited": false, "score": 1, "creation_date": 1485992185, "post_id": 41991794, "comment_id": 71160686, "body": "I don&#39;t think matplotlib has a pre-canned method to lay out <a href=\"http://matplotlib.org/users/annotations_intro.html\" rel=\"nofollow noreferrer\">annotations</a> in a way where they are guaranteed to not overlap. There are a bajillion libraries built on MPL though, maybe one can help (it might also help to search for your specific domain too, a la &quot;mass spec matplotlib plotting&quot;)"}], "owner": {"reputation": 11, "user_id": 5979685, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98aedd23a8b8c982d4045698c58696c5?s=128&d=identicon&r=PG&f=1", "display_name": "Nolftop", "link": "https://stackoverflow.com/users/5979685/nolftop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 98, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1485991872, "creation_date": 1485991809, "last_edit_date": 1485991872, "question_id": 41991794, "link": "https://stackoverflow.com/questions/41991794/advanced-bar-plot-labels-in-matplotlib", "title": "Advanced bar plot labels in matplotlib", "body": "<p>Is there a way to label bars through binding values and bars by lines, without text overlapping, like on the picture below? Should I write a complex script which evaluate free coordinates for drawing lines and text or exist simple way? Thx.</p>\n\n<p><img src=\"https://i.stack.imgur.com/SzTiP.png\" alt=\"Labels example\"></p>\n"}, {"tags": ["python", "pyparsing"], "comments": [{"owner": {"reputation": 55852, "user_id": 165216, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U7Xse.jpg?s=128&g=1", "display_name": "PaulMcG", "link": "https://stackoverflow.com/users/165216/paulmcg"}, "edited": false, "score": 0, "creation_date": 1486045835, "post_id": 41991784, "comment_id": 71185621, "body": "Rather than base your evaluation strategy on results names, try using classes that model each level of the operator precedence. You can see an example of this in the SimpleBool.py parser on the pyparsing wiki examples page. With appropriate repr or str methods on the classes, you should be able to get the output you want."}], "owner": {"reputation": 23, "user_id": 7390143, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ua9aIarryvM/AAAAAAAAAAI/AAAAAAAACic/2vWDRWz38Hg/photo.jpg?sz=128", "display_name": "Guillaume de Bure", "link": "https://stackoverflow.com/users/7390143/guillaume-de-bure"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 193, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1485991774, "creation_date": 1485991774, "question_id": 41991784, "link": "https://stackoverflow.com/questions/41991784/parsing-a-complex-filter-definition-with-pyparsing", "title": "parsing a complex filter definition with pyparsing", "body": "<p>I am trying to parse a complex filter definition that will be applied on a set of data. A typical filter could look like this :</p>\n\n<pre><code>attribute1 == value1 and (attribute2 &gt;= 3 or attribute3 != value3)\n</code></pre>\n\n<p>Of course, the filtering can be much more complex using more nested levels and logical operators. What it all boils down to is :</p>\n\n<ol>\n<li>Extracting the \"unit filtering expressions\" such as <code>attribute1 == value1</code></li>\n<li>Run each filter in the set of data</li>\n<li>Combine results using intersections (and) and unions (or)</li>\n</ol>\n\n<p>I heavily reused some examples already provided by Paul McGuire, so my code looks like this :</p>\n\n<pre><code>import pyparsing\n\ndef process_results(result):\n    for key in result.keys():\n        print(key + \":\" + str(result[key]))\n        if key == 'complex_filter':\n            process_results(result[key])\n\n\ndef parse_filter(filter_string):\n    # break these up so we can represent higher precedence for 'and' over 'or'\n    not_operator        = pyparsing.oneOf(['not','^'], caseless=True).setResultsName(\"operator\")\n    and_operator        = pyparsing.oneOf(['and','&amp;'], caseless=True).setResultsName(\"operator\")\n    or_operator         = pyparsing.oneOf(['or' ,'|'], caseless=True).setResultsName(\"operator\")\n\n    # db_keyword is okay, but you might just want to use a general 'identifier' expression,\n    # you won't have to keep updating as you add other terms to your query language\n    ident = pyparsing.Word(pyparsing.alphas+'_'+'-', pyparsing.alphanums+'_'+'-')\n\n    # comparison operators\n    comparison_operator = pyparsing.oneOf(['==','!=','&gt;','&gt;=','&lt;', '&lt;='])\n\n    # instead of generic 'value', define specific value types\n    integer = pyparsing.Regex(r'[+-]?\\d+').setParseAction(lambda t:int(t[0]))\n    float_ = pyparsing.Regex(r'[+-]?\\d+\\.\\d*').setParseAction(lambda t:float(t[0]))\n\n    # use pyparsing's QuotedString class for this, it gives you quote escaping, and\n    # automatically strips quotes from the parsed text\n    quote = pyparsing.QuotedString('\"')\n\n    # when you are doing boolean expressions, it's always handy to add TRUE and FALSE literals\n    literal_true = pyparsing.Keyword('true', caseless=True)\n    literal_false = pyparsing.Keyword('false', caseless=True)\n    boolean_literal = literal_true | literal_false\n\n    # in future, you can expand comparison_operand to be its own operatorPrecedence\n    # term, so that you can do things like \"nucleon != 1+2\" - but this is fine for now\n    comparison_operand = quote | ident | float_ | integer\n    comparison_expr = pyparsing.Group((quote | ident) + comparison_operator + comparison_operand).setResultsName(\"unit_filter\", listAllMatches=True )\n\n\n    grammar = pyparsing.infixNotation(comparison_expr,\n        [\n        (not_operator, 1, pyparsing.opAssoc.RIGHT),\n        (and_operator, 2, pyparsing.opAssoc.LEFT),\n        (or_operator,  2, pyparsing.opAssoc.LEFT),\n        ]\n    ).setResultsName(\"complex_filter\")\n\n    res = grammar.parseString(filter_string, parseAll=True)\n\n    return res\n\nres = parse_filter('attribute1 == value1 and (attribute2 &gt;= 3 or attribute3 != value3)')\n\nprocess_results(res)\n</code></pre>\n\n<p>The output is quite close to what I would like :</p>\n\n<pre><code>complex_filter:[['attribute1', '==', 'value1'], 'and', [['attribute2', '&gt;=', 3], 'or', ['attribute3', '!=', 'value3']]]\nunit_filter:[['attribute1', '==', 'value1']]\noperator:and\n</code></pre>\n\n<p>As you can see, it won't keep looping through the \"nested\" results... I would like the output to be </p>\n\n<pre><code>complex_filter:[['attribute1', '==', 'value1'], 'and', [['attribute2', '&gt;=', 3], 'or', ['attribute3', '!=', 'value3']]]\nunit_filter:[['attribute1', '==', 'value1']]\noperator:and\ncomplex_filter: [['attribute2', '&gt;=', 3], 'or', ['attribute3', '!=', 'value3']]\nunit_filter:[['attribute2', '&gt;=', 3]]\noperator:or\nunit_filter:[['attribute3', '!=', 'value3']]\n</code></pre>\n\n<p>Any idea of what I could do to get there ? Thanks !</p>\n"}, {"tags": ["python", "matplotlib", "networkx", "plotly", "bokeh"], "answers": [{"tags": [], "owner": {"reputation": 3236, "user_id": 6876009, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/201968908078a1f1ea776c886d93631a?s=128&d=identicon&r=PG&f=1", "display_name": "f5r5e5d", "link": "https://stackoverflow.com/users/6876009/f5r5e5d"}, "is_accepted": false, "score": 0, "last_activity_date": 1486016591, "last_edit_date": 1486016591, "creation_date": 1486014813, "answer_id": 41995104, "question_id": 41991774, "link": "https://stackoverflow.com/questions/41991774/polar-projection-with-3-axis-in-matplotlib-plotly-bokeh-for-python-hive-plots/41995104#41995104", "title": "Polar projection with 3 axis in matplotlib/plotly/bokeh for Python? (Hive plots)", "body": "<p>maybe a start, but I would check out matplotlib 2.0 to see if 3D is better now</p>\n\n<pre><code>import numpy as np\n\nfrom mpl_toolkits.mplot3d import Axes3D\nimport matplotlib.pyplot as plt\n\ndef Lin3dSeg(a,b):\n    '''\n    if a, b are spherical coordinate vector tuples, then it\n    returns list of spherical coordinate points of a linear in r, theta, phi\n    3D spiral segment connecting them   \n    ''' \n    return [np.linspace(start, stop) for start, stop in zip(a,b)]\n\ndef Sphere2Cart(sphere_pt): # no particular convention, just thrown together\n    x = sphere_pt[0] * np.sin(sphere_pt[1])\n    y = sphere_pt[0] * np.cos(sphere_pt[1])\n    z = sphere_pt[0] * np.cos(sphere_pt[2])\n    return (x, y, z)\n\ndef SphereSegCarts(seg):\n    return [Sphere2Cart(pt) for pt in zip(*Lin3dSeg(*seg))]\n\nseg_a =((10, 0, 0),(5, np.pi/2, 0))\nseg_b =((10, np.pi/2, 0),(1, 0, np.pi/2))\nseg_c =((3, 0, np.pi/2),(10, np.pi/2, np.pi/2))\n\n\nfig = plt.figure()\nax = fig.add_subplot(111, projection='3d')\nax.view_init(elev=45, azim=45)\n\nax.plot(*zip(*SphereSegCarts(seg_a)), c='r')\nax.plot(*zip(*SphereSegCarts(seg_b)), c='g')\nax.plot(*zip(*SphereSegCarts(seg_c)), c='b')\n\nplt.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/X2PGl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/X2PGl.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 23937, "user_id": 678572, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kZ2Ia.jpg?s=128&g=1", "display_name": "O.rka", "link": "https://stackoverflow.com/users/678572/o-rka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 538, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1486016591, "creation_date": 1485991725, "question_id": 41991774, "link": "https://stackoverflow.com/questions/41991774/polar-projection-with-3-axis-in-matplotlib-plotly-bokeh-for-python-hive-plots", "title": "Polar projection with 3 axis in matplotlib/plotly/bokeh for Python? (Hive plots)", "body": "<p>Is there any tweak to the polar projection that allows for 3 axis? I guess possibly a 3D scatterplot tilted onto 2D so it lines up like this? </p>\n\n<p>I recently found out about <a href=\"https://github.com/ericmjl/hiveplot\" rel=\"nofollow noreferrer\">Hive Plots</a> and I wanted to try to code one up so I could have more free-range on the asthetics to make it look more like <a href=\"http://www.hiveplot.net/\" rel=\"nofollow noreferrer\">these guys</a>. I started trying to make one but the only way I could think of doing it was with polar coordinates like this.</p>\n\n<p>My question:\n<strong>Is there a way to get 3 axis polar coordinates in matplotlib, plotly, or bokeh?</strong>\nor if not\n<strong>Is there a way to fix a 3D plot to have this type of structure?</strong> </p>\n\n<pre><code>fig = plt.figure(figsize=(10,10))\nax = plt.subplot(111, polar=True)\nax.plot(2*[np.pi/2], [0,1], color=\"black\", linewidth=3)\nax.plot(2*[5*np.pi/4], [0,1], color=\"black\", linewidth=3)\nax.plot(2*[7*np.pi/4], [0,1], color=\"black\", linewidth=3)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/Fh1i8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Fh1i8.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "string", "python-3.x", "split"], "answers": [{"comments": [{"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1485992032, "post_id": 41991753, "comment_id": 71160632, "body": "Will this work with multiple spaces as well, i.e., inserting back the correct amount?"}, {"owner": {"reputation": 117275, "user_id": 5393381, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/308ffa6266fda6d94bc56fbd9e9798f9?s=128&d=identicon&r=PG&f=1", "display_name": "MSeifert", "link": "https://stackoverflow.com/users/5393381/mseifert"}, "reply_to_user": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 2, "creation_date": 1485992099, "post_id": 41991753, "comment_id": 71160659, "body": "That makes it ambiguous where the string should be splitted. After the first, second, last? Given that he didn&#39;t specify this information (and I didn&#39;t thought about it given the example) I don&#39;t think that&#39;s necessary."}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "reply_to_user": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1485992117, "post_id": 41991753, "comment_id": 71160663, "body": "@RadLexus: No, it won&#39;t. It&#39;s not possible to preserve arbitrary whitespace with simple use of plain string methods like this."}], "tags": [], "owner": {"reputation": 117275, "user_id": 5393381, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/308ffa6266fda6d94bc56fbd9e9798f9?s=128&d=identicon&r=PG&f=1", "display_name": "MSeifert", "link": "https://stackoverflow.com/users/5393381/mseifert"}, "is_accepted": true, "score": 6, "last_activity_date": 1485991613, "creation_date": 1485991613, "answer_id": 41991753, "question_id": 41991735, "link": "https://stackoverflow.com/questions/41991735/split-string-just-after-space/41991753#41991753", "title": "Split string just after space", "body": "<p>Just split at whitespaces and then add them back again.</p>\n\n<pre><code>a = 'foo bar hello world'\n\nsplitted = a.split()  # split at ' '\n\nsplitted = [x + ' ' for x in splitted]  # add the ' ' at the end\n</code></pre>\n\n<p>Or if you want it a bit more fancy:</p>\n\n<pre><code>splitted = ['{} '.format(item) for item in a.split()]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 127, "user_id": 6388442, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ea04940de943380ca237f30c669078b1?s=128&d=identicon&r=PG", "display_name": "gusg21", "link": "https://stackoverflow.com/users/6388442/gusg21"}, "edited": false, "score": 0, "creation_date": 1485992523, "post_id": 41991830, "comment_id": 71160789, "body": "This is useful and I&#39;ll keep this solution in mind, but I don&#39;t need to keep extra whitespace."}], "tags": [], "owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "is_accepted": false, "score": 8, "last_activity_date": 1485992001, "creation_date": 1485992001, "answer_id": 41991830, "question_id": 41991735, "link": "https://stackoverflow.com/questions/41991735/split-string-just-after-space/41991830#41991830", "title": "Split string just after space", "body": "<p>If you want to handle and preserve arbitrary runs of whitespace, you'll need a regular expression:</p>\n\n<pre><code>&gt;&gt;&gt; import re\n&gt;&gt;&gt; re.findall(r'(?:^|\\S+)\\s*', '   foo \\tbar    hello world')\n['   ', 'foo \\t', 'bar    ', 'hello ', 'world']\n</code></pre>\n"}], "owner": {"reputation": 127, "user_id": 6388442, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ea04940de943380ca237f30c669078b1?s=128&d=identicon&r=PG", "display_name": "gusg21", "link": "https://stackoverflow.com/users/6388442/gusg21"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 332, "favorite_count": 0, "accepted_answer_id": 41991753, "answer_count": 2, "score": 2, "last_activity_date": 1485992001, "creation_date": 1485991499, "last_edit_date": 1485991989, "question_id": 41991735, "link": "https://stackoverflow.com/questions/41991735/split-string-just-after-space", "title": "Split string just after space", "body": "<p>In Python 3.x, how would I split a string like this:</p>\n\n<pre><code>foo bar hello world\n</code></pre>\n\n<p>So the output would be a list like:</p>\n\n<pre><code>['foo ', 'bar ', 'hello ', 'world ']\n</code></pre>\n"}, {"tags": ["python", "django"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 7503171, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Oc2m9CCcZK8/AAAAAAAAAAI/AAAAAAAACjE/5gQ_GNrrTTw/photo.jpg?sz=128", "display_name": "Brooks Johnson", "link": "https://stackoverflow.com/users/7503171/brooks-johnson"}, "edited": false, "score": 0, "creation_date": 1485997484, "post_id": 41992003, "comment_id": 71162279, "body": "This was it exactly, thank you it immediately resolved to the underlying values.  Greatly appreciate your time to answer!"}, {"owner": {"reputation": 47988, "user_id": 267540, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2v58W.jpg?s=128&g=1", "display_name": "e4c5", "link": "https://stackoverflow.com/users/267540/e4c5"}, "edited": false, "score": 0, "creation_date": 1486015013, "post_id": 41992003, "comment_id": 71167011, "body": "if this answer si correct, please mark it as correct"}], "tags": [], "owner": {"reputation": 175, "user_id": 6599471, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-wrHTcdyUax4/AAAAAAAAAAI/AAAAAAAAABY/l6_3v3bc2zE/photo.jpg?sz=128", "display_name": "hassan", "link": "https://stackoverflow.com/users/6599471/hassan"}, "is_accepted": true, "score": 0, "last_activity_date": 1485993007, "creation_date": 1485993007, "answer_id": 41992003, "question_id": 41991724, "link": "https://stackoverflow.com/questions/41991724/django-extract-value-from-dict-response/41992003#41992003", "title": "Django extract value from dict response", "body": "<p>I think these lines</p>\n\n<pre><code>{'Quantity__sum': 11}\n{'Quantity__sum': 99}\n{'Quantity__sum': 222}\n</code></pre>\n\n<p>comes from <code>drug.sumQuantity</code> (located inside the HTML snippet. So, if you want to get the value of the Quantity__sum, you can do a dot notation on the SumQuantity property. So, you may have something similar to this</p>\n\n<pre><code>{% for drug in drug_list %}\n    &lt;td&gt;{{ drug.Name }}&lt;/td&gt;\n    &lt;td&gt;{{ drug.sumQuantity.Quantity__sum }}&lt;/td&gt;\n    {% if not forloop.last %}\n        &lt;/tr&gt;\n        &lt;tr&gt;\n    {% endif %}\n{% endfor %}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 7503171, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Oc2m9CCcZK8/AAAAAAAAAAI/AAAAAAAACjE/5gQ_GNrrTTw/photo.jpg?sz=128", "display_name": "Brooks Johnson", "link": "https://stackoverflow.com/users/7503171/brooks-johnson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 41992003, "answer_count": 1, "score": 0, "last_activity_date": 1485993007, "creation_date": 1485991458, "question_id": 41991724, "link": "https://stackoverflow.com/questions/41991724/django-extract-value-from-dict-response", "title": "Django extract value from dict response", "body": "<p>I have a model \"Drug\" that has a child foreign key \"Accounting Entry\" that contains a quantity.  There are multiple Accounting Entries per drug and I have aggregated the sum of the child quantities to Drug as sumQuantities.</p>\n\n<p>The problem I have now is that when I'm rendering the template I see the following:</p>\n\n<blockquote>\n  <p>Quantity on Hand <br>\n  {'Quantity__sum': 11}<br>\n  {'Quantity__sum': 99}<br>\n  {'Quantity__sum': 222}</p>\n</blockquote>\n\n<p>I'm trying to get the 'Quantity__sum': 11 to display as the basic value (11) but can't seem to get it to function correctly\n<br><br>\nThanks very much for any help<br>\n<br>\nmodels.py</p>\n\n<pre><code>class Drug(models.Model):\nFacility = models.ForeignKey(Facility, on_delete=models.CASCADE)\nName = models.TextField(max_length=120,default='default')\n\ndef _get_sum_quantity(self):\n    return self.quantities.aggregate(Sum('Quantity'))\n\nsumQuantity = property(_get_sum_quantity)\n\ndef __str__(self):\n    drug_name = self.Name\n    return drug_name\n\nclass Meta:\n    verbose_name_plural = 'Drugs'\n\n\nclass AccountingEntry(models.Model):\n    Drug = models.ForeignKey(Drug, on_delete=models.CASCADE, related_name='quantities')\n    Quantity = models.IntegerField(default='0')\n</code></pre>\n\n<p><br>\nviews.py</p>\n\n<pre><code>def update(request):\n    context = locals()\n    template = 'update.html'\n    return render(request, 'update.html', {'drug_list': Drug.objects.all()})\n</code></pre>\n\n<p><br>\nHTML Snippet</p>\n\n<pre><code>{% for drug in drug_list %}\n    &lt;td&gt;{{ drug.Name }}&lt;/td&gt;\n    &lt;td&gt;{{ drug.sumQuantity }}&lt;/td&gt;\n    {% if not forloop.last %}\n        &lt;/tr&gt;\n        &lt;tr&gt;\n    {% endif %}\n{% endfor %}\n</code></pre>\n"}, {"tags": ["python", "excel", "python-2.7", "xlrd"], "answers": [{"tags": [], "owner": {"reputation": 1434, "user_id": 4265407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/209b5e4f4666054de216028dc8c8c776?s=128&d=identicon&r=PG&f=1", "display_name": "Stanislav Ivanov", "link": "https://stackoverflow.com/users/4265407/stanislav-ivanov"}, "is_accepted": true, "score": 0, "last_activity_date": 1486026676, "creation_date": 1486026676, "answer_id": 41998162, "question_id": 41991713, "link": "https://stackoverflow.com/questions/41991713/searching-excel/41998162#41998162", "title": "Searching Excel", "body": "<p>You does not need exception or function definition to exit from loop. Simplest way: keyword <code>break</code>:</p>\n\n<pre><code>import xlrd\nworkbook = xlrd.open_workbook( 'test.xls' )\nsheet_names = workbook.sheet_names()\n\nincomplete_line = False\n\nfor sheet_name in sheet_names:\n    sheet = workbook.sheet_by_name(sheet_name)\n    for row_idx in range(0, sheet.nrows):\n        row_values = sheet.row_values(row_idx)\n        if '' in row_values:\n            print \"Incomplete line in sheet\", sheet_name, \"at line\", row_idx+1\n            incomplete_line = True\n            break\n    if incomplete_line:\n        break\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 7465569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59ce103fdebe9f9213b996aae753d234?s=128&d=identicon&r=PG&f=1", "display_name": "user7465569", "link": "https://stackoverflow.com/users/7465569/user7465569"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 41998162, "answer_count": 1, "score": 0, "last_activity_date": 1486026676, "creation_date": 1485991408, "last_edit_date": 1486020163, "question_id": 41991713, "link": "https://stackoverflow.com/questions/41991713/searching-excel", "title": "Searching Excel", "body": "<p>I have a script that searches each row of an Excel document until it finds an empty row. My issue is i cant get it to move down the rows without calling the function the correct amount of times to reach an empty row (which defeats the purpose of the script). When I tried to make the Excel search function loop within itself I keep getting an IndexError. I tried to create another function outside the original function based on boolean values of global variables but had the same issues (hence the incomplete and the empty variables)  Could someone please help me figure out what I'm doing wrong?</p>\n\n<pre><code>import xlrd\nworkbook = xlrd.open_workbook( 'example.xls' )\nsheet_names = workbook.sheet_names()\n\nglobal incomplete\nglobal empty\nglobal nextrow\nglobal counter\nincomplete = False\nempty = False\ncounter = 0\ndef excelreader():\n    for sheet_name in sheet_names:\n      sheet = workbook.sheet_by_name( 'A Test Sheet')    \n      global counter\n      try:\n          row_values = sheet.row_values(counter)\n          counter += 1\n          if '' in row_values:\n              global incomplete\n              incomplete = True\n              print incomplete\n      except IndexError:\n          print'IndexError'\n\n\n\n\ndef exceliterator():\n    if incomplete is False:\n        excelreader()\n\nexcelreader()\nexcelreader()\nexcelreader()\n</code></pre>\n"}, {"tags": ["python", "named-parameters", "default-parameters"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 2, "creation_date": 1485991358, "post_id": 41991692, "comment_id": 71160413, "body": "Yes indeed, that&#39;s the concept behind a default parameter. You can also name the parameter <b>explicitly</b>, like <code>WebcamVideoStream(src=14)</code>"}, {"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 1, "creation_date": 1485991816, "post_id": 41991692, "comment_id": 71160577, "body": "<a href=\"https://docs.python.org/3/tutorial/controlflow.html#keyword-arguments\" rel=\"nofollow noreferrer\">docs.python.org/3/tutorial/controlflow.html#keyword-argument&zwnj;&#8203;s</a>"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "reply_to_user": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 1, "creation_date": 1485992018, "post_id": 41991692, "comment_id": 71160629, "body": "@cricket_007: Nah, you want the section on <a href=\"https://docs.python.org/3/tutorial/controlflow.html#default-argument-values\" rel=\"nofollow noreferrer\">default argument values</a>. Keyword arguments are syntactically similar but not very related."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1485992036, "post_id": 41991692, "comment_id": 71160634, "body": "That type of construct in a function definition is called a &quot;keyword argument&quot; and always include a default value if it&#39;s omitted when the function is actually called."}, {"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1485992316, "post_id": 41991692, "comment_id": 71160728, "body": "@user2357112 Right. I missed that OP didn&#39;t mention calling with <code>Stream(src=&lt;value&gt;)</code>"}], "answers": [{"tags": [], "owner": {"reputation": 699, "user_id": 5490451, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/85a071747c24e01722af03eed65be9ba?s=128&d=identicon&r=PG&f=1", "display_name": "pivanchy", "link": "https://stackoverflow.com/users/5490451/pivanchy"}, "is_accepted": true, "score": 0, "last_activity_date": 1485992927, "creation_date": 1485992927, "answer_id": 41991990, "question_id": 41991692, "link": "https://stackoverflow.com/questions/41991692/default-parameter-value-in-this-init-methods-definition/41991990#41991990", "title": "Default parameter value in this __init__() method&#39;s definition?", "body": "<p>Quick answer is - yes.</p>\n\n<p>If you run:</p>\n\n<pre><code>vs = WebcamVideoStream(3)\n</code></pre>\n\n<p><code>src</code> equals to 3</p>\n\n<p>if you run:</p>\n\n<pre><code>vs = WebcamVideoStream()\n</code></pre>\n\n<p>src equals to 0(default value).</p>\n\n<p>As an additional Python's feature, Python supports *args and **kwargs for cases when you're not sure how much and which arguments will be used in your method(it's very general explanation, but I hope it's clear).</p>\n\n<p>Some example of using **kwargs I've posted here:\n<a href=\"http://codepad.org/E7m3PnVr\" rel=\"nofollow noreferrer\">http://codepad.org/E7m3PnVr</a></p>\n\n<p>P.S. </p>\n\n<p>1) use *args when you're not sure how many arguments might be passed to your function, i.e. it allows you pass an arbitrary number of arguments to your function.</p>\n\n<p>2) **kwargs allows you to handle named arguments that you have not defined in advance</p>\n"}], "owner": {"reputation": 2511, "user_id": 3015268, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/K2RwN.jpg?s=128&g=1", "display_name": "bakalolo", "link": "https://stackoverflow.com/users/3015268/bakalolo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2614, "favorite_count": 0, "accepted_answer_id": 41991990, "answer_count": 1, "score": 0, "last_activity_date": 1485992927, "creation_date": 1485991315, "last_edit_date": 1485991878, "question_id": 41991692, "link": "https://stackoverflow.com/questions/41991692/default-parameter-value-in-this-init-methods-definition", "title": "Default parameter value in this __init__() method&#39;s definition?", "body": "<p>I am looking at some python code to control a camera and having some trouble understanding it due to being new at python.  I see that the <code>src</code> parameter is set to <code>0</code>.  Does this mean that if a <code>src</code> is not given <code>0</code> will be used otherwise the given <code>src</code> will be used?</p>\n\n<pre><code>class WebcamVideoStream:\n\n    def __init__(self, src=0):\n        # initialize the video camera stream and read the first frame\n        # from the stream\n        self.stream = cv2.VideoCapture(src)\n</code></pre>\n\n<p>so if I do something like this </p>\n\n<pre><code>vs = WebcamVideoStream(3)\n</code></pre>\n\n<p>then the <code>src</code> will be <code>3</code>?\nand if I do this </p>\n\n<pre><code>vs = WebcamVideoStream()\n</code></pre>\n\n<p>then <code>src</code> will be <code>0</code>?</p>\n"}, {"tags": ["python", "numpy", "scipy", "interpolation"], "answers": [{"comments": [{"owner": {"reputation": 1123, "user_id": 893697, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/f41a1315e25fcb9b3cf001a5c30f1fb1?s=128&d=identicon&r=PG", "display_name": "powder", "link": "https://stackoverflow.com/users/893697/powder"}, "edited": false, "score": 0, "creation_date": 1485997424, "post_id": 41992030, "comment_id": 71162264, "body": "After seeing your explanation, it looks clear from the image I posted! Thanks"}], "tags": [], "owner": {"reputation": 4498, "user_id": 897640, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/26c6f0ce8c6d4396d5cb3204bc79ebb1?s=128&d=identicon&r=PG", "display_name": "jdmcbr", "link": "https://stackoverflow.com/users/897640/jdmcbr"}, "is_accepted": true, "score": 2, "last_activity_date": 1485993863, "last_edit_date": 1485993863, "creation_date": 1485993151, "answer_id": 41992030, "question_id": 41991667, "link": "https://stackoverflow.com/questions/41991667/scipy-griddata-interpolation-results-in-lots-on-nans/41992030#41992030", "title": "Scipy griddata interpolation results in lots on NaNs", "body": "<p>You are only interpolating to the extent of the x-axis, because <code>grid_x</code> and <code>grid_y</code> are swapped in order in the last line of your example. Just reverse, like so</p>\n\n<pre><code>interp = griddata(points, values, (grid_y, grid_x), method='cubic')\n</code></pre>\n"}], "owner": {"reputation": 1123, "user_id": 893697, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/f41a1315e25fcb9b3cf001a5c30f1fb1?s=128&d=identicon&r=PG", "display_name": "powder", "link": "https://stackoverflow.com/users/893697/powder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 929, "favorite_count": 0, "accepted_answer_id": 41992030, "answer_count": 1, "score": 2, "last_activity_date": 1485993863, "creation_date": 1485991218, "question_id": 41991667, "link": "https://stackoverflow.com/questions/41991667/scipy-griddata-interpolation-results-in-lots-on-nans", "title": "Scipy griddata interpolation results in lots on NaNs", "body": "<p>I'm trying to interpolate a sparse matrix to fill the 0 values. I'm using numpy <code>griddata</code> function starting from the example available <a href=\"https://docs.scipy.org/doc/scipy-0.18.1/reference/generated/scipy.interpolate.griddata.html\" rel=\"nofollow noreferrer\">here</a>. Just as a reference, the data I'm starting from has the shape of a 1 channel image and looks like this (roughly 1 data point every 4x4):\n<a href=\"https://i.stack.imgur.com/1T7FK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1T7FK.png\" alt=\"sparse data\"></a></p>\n\n<p>The code that should do the interpolation is this:</p>\n\n<pre><code># a contains the data\ngrid_y, grid_x = np.mgrid[0:128:1, 0:384:1]\npoints = []\nfor z in zip(a.nonzero()[0],a.nonzero()[1]):\n    points.append(np.array(z))\n\nvalues = [a[x] for x in zip(a.nonzero()[0],a.nonzero()[1])]\n\ninterp = griddata(points, values, (grid_x, grid_y), method='cubic')\n</code></pre>\n\n<p>But for some reason, this is the result of the interpolation:\n<a href=\"https://i.stack.imgur.com/T4KZb.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/T4KZb.png\" alt=\"results\"></a>\nWhere the white parts in the image are actually NaNs. From my understanding of the example, I really can't figure out what I'm doing wrong. Any ideas?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 175, "user_id": 6599471, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-wrHTcdyUax4/AAAAAAAAAAI/AAAAAAAAABY/l6_3v3bc2zE/photo.jpg?sz=128", "display_name": "hassan", "link": "https://stackoverflow.com/users/6599471/hassan"}, "edited": false, "score": 0, "creation_date": 1485991226, "post_id": 41991602, "comment_id": 71160369, "body": "Can you provide more context as well as an example?"}, {"owner": {"reputation": 344, "user_id": 4837005, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f8b7cffdd05664f7e3988486a381ba49?s=128&d=identicon&r=PG&f=1", "display_name": "Coolq B", "link": "https://stackoverflow.com/users/4837005/coolq-b"}, "edited": false, "score": 0, "creation_date": 1485991456, "post_id": 41991602, "comment_id": 71160444, "body": "I didn&#39;t understand what you mean&#39;t by word limit?"}, {"owner": {"reputation": 10628, "user_id": 4565947, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e5b166ea39cc61a22e0c04a67ef53bd7?s=128&d=identicon&r=PG&f=1", "display_name": "Julien", "link": "https://stackoverflow.com/users/4565947/julien"}, "edited": false, "score": 1, "creation_date": 1485993791, "post_id": 41991602, "comment_id": 71161221, "body": "Please show your code and specific problem. <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 184, "user_id": 7503133, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Yq2b6.jpg?s=128&g=1", "display_name": "Thomas Youngson", "link": "https://stackoverflow.com/users/7503133/thomas-youngson"}, "edited": false, "score": 0, "creation_date": 1485993975, "post_id": 41991602, "comment_id": 71161282, "body": "The code i have used is in the link. Its the top answer (42 up votes)"}, {"owner": {"reputation": 2165, "user_id": 3033053, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/poAO9.jpg?s=128&g=1", "display_name": "silencedmessage", "link": "https://stackoverflow.com/users/3033053/silencedmessage"}, "edited": false, "score": 0, "creation_date": 1486008132, "post_id": 41991602, "comment_id": 71164919, "body": "You said you found &quot;most of the code to this problem.&quot;  That still doesn&#39;t tell anyone what code you&#39;ve tried, or what, specifically, the problem is.  Please read the link Julien left to see more on how to ask."}], "answers": [{"tags": [], "owner": {"reputation": 344, "user_id": 4837005, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f8b7cffdd05664f7e3988486a381ba49?s=128&d=identicon&r=PG&f=1", "display_name": "Coolq B", "link": "https://stackoverflow.com/users/4837005/coolq-b"}, "is_accepted": false, "score": -1, "last_activity_date": 1485991378, "creation_date": 1485991378, "answer_id": 41991711, "question_id": 41991602, "link": "https://stackoverflow.com/questions/41991602/anagram-solver-need-sentence-to-have-word-limit/41991711#41991711", "title": "Anagram solver need sentence to have word limit", "body": "<p>I don't like to make programs <code>for</code> programmers, usually.\nTo the best of my understanding:</p>\n\n<pre><code>import random\n\nword = \"scramble\"\n\nscramble = list(word)\n\nfor i in range(len(scramble)):\n    char = scramble.pop(i)\n    scramble.insert(random.randint(0,len(word)),char)\nprint(''.join(scramble))\n</code></pre>\n\n<p>This will scramble the <code>word</code> variable.</p>\n\n<p>Hope this helps!</p>\n\n<p>Thanks :)</p>\n"}, {"tags": [], "owner": {"reputation": 983, "user_id": 2934716, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WvAGZ.jpg?s=128&g=1", "display_name": "beardo", "link": "https://stackoverflow.com/users/2934716/beardo"}, "is_accepted": true, "score": 1, "last_activity_date": 1485998981, "creation_date": 1485998981, "answer_id": 41992855, "question_id": 41991602, "link": "https://stackoverflow.com/questions/41991602/anagram-solver-need-sentence-to-have-word-limit/41992855#41992855", "title": "Anagram solver need sentence to have word limit", "body": "<p>This is a slight work around, however if you only want to <em>filter</em> out words that have a length shorter than a specified argument, then you could make a change in your programs main.</p>\n\n<p>Your program currently says:</p>\n\n<pre><code>for word in words.anagram(letters):\n   print word\n</code></pre>\n\n<p>You could change your program to say:</p>\n\n<pre><code>for word in words.anagram(letters):\n    if len(word.split()) &lt;= int(argv[2]):\n        print word\n</code></pre>\n\n<p>Not the most elegant answer but, I hope this helps!</p>\n"}], "owner": {"reputation": 184, "user_id": 7503133, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Yq2b6.jpg?s=128&g=1", "display_name": "Thomas Youngson", "link": "https://stackoverflow.com/users/7503133/thomas-youngson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 245, "favorite_count": 0, "accepted_answer_id": 41992855, "answer_count": 2, "score": 0, "last_activity_date": 1578622820, "creation_date": 1485990946, "last_edit_date": 1578622820, "question_id": 41991602, "link": "https://stackoverflow.com/questions/41991602/anagram-solver-need-sentence-to-have-word-limit", "title": "Anagram solver need sentence to have word limit", "body": "<p>I have been trying to make a program that runs over a dictionary which makes anagrams from an inputted string. I found most of the code to this problem here <a href=\"https://stackoverflow.com/questions/55210/algorithm-to-generate-anagrams\">Algorithm to generate anagrams</a> but i need to have the program only output a line of max amount of words instead of only using words of a set length (MIN_WORD_SIZE).</p>\n\n<p>If the input was: python Anagram.py \"Finding Anagrams\" 3 dictionary.txt.\nThe output would be \"Gaming fans nadir\" because it only uses 3 words at most to create the anagram.\n?</p>\n"}, {"tags": ["python", "django", "filter"], "comments": [{"owner": {"reputation": 175, "user_id": 6599471, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-wrHTcdyUax4/AAAAAAAAAAI/AAAAAAAAABY/l6_3v3bc2zE/photo.jpg?sz=128", "display_name": "hassan", "link": "https://stackoverflow.com/users/6599471/hassan"}, "edited": false, "score": 0, "creation_date": 1485991783, "post_id": 41991595, "comment_id": 71160565, "body": "I would suggest you read up on Django queryset API <a href=\"https://docs.djangoproject.com/en/1.10/ref/models/querysets/\" rel=\"nofollow noreferrer\">here</a>"}, {"owner": {"reputation": 12105, "user_id": 6043170, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-iFy-IHfVniw/AAAAAAAAAAI/AAAAAAAAAFM/f_Xao2r127I/photo.jpg?sz=128", "display_name": "2ps", "link": "https://stackoverflow.com/users/6043170/2ps"}, "edited": false, "score": 0, "creation_date": 1485995765, "post_id": 41991595, "comment_id": 71161770, "body": "Please post your models so that we can see how the relationship is defined."}], "answers": [{"comments": [{"owner": {"reputation": 12105, "user_id": 6043170, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-iFy-IHfVniw/AAAAAAAAAAI/AAAAAAAAAFM/f_Xao2r127I/photo.jpg?sz=128", "display_name": "2ps", "link": "https://stackoverflow.com/users/6043170/2ps"}, "edited": false, "score": 1, "creation_date": 1485995844, "post_id": 41992010, "comment_id": 71161791, "body": "You can actually just use <code>__in</code> for or instead of this."}, {"owner": {"reputation": 2330, "user_id": 1014508, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/e12d101bc96cf4f266bc5f1247d8c972?s=128&d=identicon&r=PG", "display_name": "mislavcimpersak", "link": "https://stackoverflow.com/users/1014508/mislavcimpersak"}, "reply_to_user": {"reputation": 12105, "user_id": 6043170, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-iFy-IHfVniw/AAAAAAAAAAI/AAAAAAAAAFM/f_Xao2r127I/photo.jpg?sz=128", "display_name": "2ps", "link": "https://stackoverflow.com/users/6043170/2ps"}, "edited": false, "score": 0, "creation_date": 1485996771, "post_id": 41992010, "comment_id": 71162084, "body": "OP needs &quot;&amp;&quot; not &quot;or&quot;"}], "tags": [], "owner": {"reputation": 2330, "user_id": 1014508, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/e12d101bc96cf4f266bc5f1247d8c972?s=128&d=identicon&r=PG", "display_name": "mislavcimpersak", "link": "https://stackoverflow.com/users/1014508/mislavcimpersak"}, "is_accepted": false, "score": 0, "last_activity_date": 1486018548, "last_edit_date": 1486018548, "creation_date": 1485993054, "answer_id": 41992010, "question_id": 41991595, "link": "https://stackoverflow.com/questions/41991595/django-filter-queryset-on-list-using-and/41992010#41992010", "title": "Django Filter QuerySet on List Using AND", "body": "<p>Let's say that you get your list of colors from somewhere else which I'm guessing is the case:</p>\n\n<pre><code>from django.db.models import Q\n\n# list of color instances\ncolors = [red, green, blue]\n\n# create a list Q filters dynamically \nfilter_by_this = [Q(user_colors__color=color) for color in colors]\n\n# filter using the filter as a list of arguments\nusers = users.filter(*filter_by_this)\n</code></pre>\n\n<p>This is not tested, but I believe that it should be something like that.</p>\n\n<p>In any case you should read up on filtering using <a href=\"https://docs.djangoproject.com/en/1.10/ref/models/querysets/#q-objects\" rel=\"nofollow noreferrer\">Q objects</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 12105, "user_id": 6043170, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-iFy-IHfVniw/AAAAAAAAAAI/AAAAAAAAAFM/f_Xao2r127I/photo.jpg?sz=128", "display_name": "2ps", "link": "https://stackoverflow.com/users/6043170/2ps"}, "is_accepted": true, "score": 0, "last_activity_date": 1486010953, "creation_date": 1486010953, "answer_id": 41994386, "question_id": 41991595, "link": "https://stackoverflow.com/questions/41991595/django-filter-queryset-on-list-using-and/41994386#41994386", "title": "Django Filter QuerySet on List Using AND", "body": "<p>A simple for loop will suffice:</p>\n\n<pre><code># list of color instances\ncolors = [red, green, blue]\n\nfor x in colors:\n    users = users.filter(user_colors__color=x) \n</code></pre>\n\n<p>Successive filters will operate as an AND</p>\n"}], "owner": {"reputation": 33, "user_id": 6703095, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-jjX6QhWstjs/AAAAAAAAAAI/AAAAAAAAC14/d1Z_swdqwvY/photo.jpg?sz=128", "display_name": "Quoshy", "link": "https://stackoverflow.com/users/6703095/quoshy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 776, "favorite_count": 0, "accepted_answer_id": 41994386, "answer_count": 2, "score": 0, "last_activity_date": 1560153993, "creation_date": 1485990905, "last_edit_date": 1560153993, "question_id": 41991595, "link": "https://stackoverflow.com/questions/41991595/django-filter-queryset-on-list-using-and", "title": "Django Filter QuerySet on List Using AND", "body": "<p>I'm trying to user Django's .filter() method with a list of related child objects to return the parent object set that contains all of the child records. See example below.</p>\n\n<p>User is the parent object and Color is the child object directly related to User</p>\n\n<ul>\n<li>User1 has colors <code>[red, blue]</code> </li>\n<li>User2 has colors <code>[black, purple, green, blue]</code></li>\n<li>User3 has colors <code>[red, blue, green]</code></li>\n<li>User4 has colors <code>[red, blue, green, white]</code></li>\n</ul>\n\n<p><code>users = users.filter(user_colors__color__in=colors)</code></p>\n\n<p>colors is a list set by the POST. E.g. <code>[red, blue, green]</code></p>\n\n<p>Currently, users contains the set of users which have any of <code>[red, blue, green]</code>. For the sample set above, I am currently getting <code>User1</code>, <code>User2</code>, <code>User3</code> and <code>User4</code> with the code above. I.e. it's using an OR search. I want to return only the users which have ALL of the specified colors. I.e. use an AND search. For the example above, I want to only get <code>User3</code> and <code>User4</code>.</p>\n\n<p>What is the best way to get only the set of parent records (users) that have all of the requested child records (colors)? Is there a Django method that can do this easily? Or do I need to a loop that filters on each color?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "vagrant", "pycharm"], "answers": [{"tags": [], "owner": {"reputation": 7271, "user_id": 604048, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/3a3794db73b04bdb0e768f2f64c63369?s=128&d=identicon&r=PG", "display_name": "Andr&#233; C. Andersen", "link": "https://stackoverflow.com/users/604048/andr%c3%a9-c-andersen"}, "is_accepted": true, "score": 0, "last_activity_date": 1485990986, "creation_date": 1485990986, "answer_id": 41991612, "question_id": 41991575, "link": "https://stackoverflow.com/questions/41991575/running-python3-using-a-run-debug-config-with-vagrant-error-running-x-py-cant/41991612#41991612", "title": "Running python3 using a Run/Debug config with Vagrant: &quot;Error running x.py Can&#39;t run remote python interpreter&quot;", "body": "<p>Turns out I was only changing the project python interpreter configuration to point to my running Vagrant machine, however, the Run/Debug Configuration wasn't set to use this project interpreter, but rather a different Vagrant machine which was currently down.</p>\n\n<p>Fixed by editing the Run/Debug Configuration and changing the \"Python interpreter\" to \"Project Default\".</p>\n"}], "owner": {"reputation": 7271, "user_id": 604048, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/3a3794db73b04bdb0e768f2f64c63369?s=128&d=identicon&r=PG", "display_name": "Andr&#233; C. Andersen", "link": "https://stackoverflow.com/users/604048/andr%c3%a9-c-andersen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 674, "favorite_count": 0, "accepted_answer_id": 41991612, "answer_count": 1, "score": 0, "last_activity_date": 1485990986, "creation_date": 1485990794, "question_id": 41991575, "link": "https://stackoverflow.com/questions/41991575/running-python3-using-a-run-debug-config-with-vagrant-error-running-x-py-cant", "title": "Running python3 using a Run/Debug config with Vagrant: &quot;Error running x.py Can&#39;t run remote python interpreter&quot;", "body": "<p>I get the following PyCharm error when running my python3 interpreter on Vagrant:</p>\n\n<blockquote>\n  <p>Error running x.py Can't run remote python interpreter: The provider for this   Vagrant-managed machine is reporting that it is not yet ready for SSH. Depending on your provider this can carry different meanings. Make sure your machine is created and running and try again. Additionally, check the output of <code>vagrant status</code> to verify that the machine is in the state that you expect. If you continue to get this error message, please view the documentation for the provider you're using.</p>\n</blockquote>\n\n<p>I have no problem running the code from the terminal. I only have a problem when running through my Run/Debug Configuration.</p>\n\n<p>Using PyCharm 2016.3.1 on Windows 10.\nPyCharm </p>\n\n<p>How do I run from my Run/Debug Configuration?</p>\n"}, {"tags": ["python", "loops", "ssh", "system", "interpolation"], "comments": [{"owner": {"reputation": 2319, "user_id": 4428725, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/Uuubu.jpg?s=128&g=1", "display_name": "Moon Cheesez", "link": "https://stackoverflow.com/users/4428725/moon-cheesez"}, "edited": false, "score": 0, "creation_date": 1485991122, "post_id": 41991553, "comment_id": 71160336, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/4450592/is-there-a-python-equivalent-to-rubys-string-interpolation\">Is there a Python equivalent to Ruby&#39;s string interpolation?</a>"}, {"owner": {"reputation": 22012, "user_id": 194586, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/1a71658d81f8a82a8122050f21bb86d3?s=128&d=identicon&r=PG", "display_name": "Nick T", "link": "https://stackoverflow.com/users/194586/nick-t"}, "edited": false, "score": 0, "creation_date": 1485991140, "post_id": 41991553, "comment_id": 71160339, "body": "If your <code>h</code> is going to be multiple lines rather than just whitespace separated, <code>h.splitlines()</code> is a more explicit/safer (if you wanted to add an argument along-side the host name, perhaps) way to chop it up."}], "answers": [{"tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": false, "score": 1, "last_activity_date": 1485991032, "creation_date": 1485991032, "answer_id": 41991629, "question_id": 41991553, "link": "https://stackoverflow.com/questions/41991553/variable-interpolation-in-a-for-loop/41991629#41991629", "title": "Variable interpolation in a for loop?", "body": "<p>You can either use modulo (<code>%</code>) or <code>.format(..)</code>:</p>\n\n<pre><code>subprocess.check_output(\"ssh foobar@%s `echo hi!`\"%host)\nsubprocess.check_output(\"ssh foobar@{host} `echo hi!`\".format(host=host))\nsubprocess.check_output(\"ssh foobar@{} `echo hi!`\".format(host))\n</code></pre>\n\n<p>The <code>%s</code> is a format specifier meaning you take the string value of host.</p>\n\n<p>In case you want to introduce multiple <strong>named</strong> variables you can use <code>{host}</code> and then call <code>format()</code> with the parameter explicitly named.</p>\n\n<p>You can also use <code>{}</code> which means you take the next element in the arguments given to <code>.format(..)</code>.</p>\n"}], "owner": {"reputation": 23, "user_id": 3934321, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/514627485/picture?type=large", "display_name": "Andrew Benavides", "link": "https://stackoverflow.com/users/3934321/andrew-benavides"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 568, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1485992196, "creation_date": 1485990709, "last_edit_date": 1485992196, "question_id": 41991553, "link": "https://stackoverflow.com/questions/41991553/variable-interpolation-in-a-for-loop", "title": "Variable interpolation in a for loop?", "body": "<p>I've got a list of hosts that I'm trying to iterate over for a ssh connection. In ruby I can use #{variable} to access a the variable within a command, what should I be doing for python?</p>\n\n<p>I've included the ruby syntax in the following python code as a placeholder of where I'd like the functionality. What is the pythonic way of doing this?</p>\n\n<pre><code>h = \"\"\"\nfoo-pants-linux-001\nfoo-pants-linux-002\nfoo-pants-linux-003\nfoo-pants-linux-004\nfoo-pants-linux-005\n\"\"\"\n\nhosts = h.split()\n\nfor host in hosts:\n    subprocess.check_output(\"ssh foobar@#{host} `echo hi!`\")\n</code></pre>\n"}, {"tags": ["python", "if-statement"], "comments": [{"owner": {"reputation": 117275, "user_id": 5393381, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/308ffa6266fda6d94bc56fbd9e9798f9?s=128&d=identicon&r=PG&f=1", "display_name": "MSeifert", "link": "https://stackoverflow.com/users/5393381/mseifert"}, "edited": false, "score": 0, "creation_date": 1485990465, "post_id": 41991502, "comment_id": 71160136, "body": "Looks good, what&#39;s the problem?"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 117275, "user_id": 5393381, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/308ffa6266fda6d94bc56fbd9e9798f9?s=128&d=identicon&r=PG&f=1", "display_name": "MSeifert", "link": "https://stackoverflow.com/users/5393381/mseifert"}, "edited": false, "score": 0, "creation_date": 1485990575, "post_id": 41991502, "comment_id": 71160179, "body": "@MSeifert: well there is a tiny bit of code duplication in the &quot;run dozer()&quot; case. One can optimize this a bit. But indeed, this is not really an issue."}, {"owner": {"reputation": 117275, "user_id": 5393381, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/308ffa6266fda6d94bc56fbd9e9798f9?s=128&d=identicon&r=PG&f=1", "display_name": "MSeifert", "link": "https://stackoverflow.com/users/5393381/mseifert"}, "edited": false, "score": 0, "creation_date": 1485990658, "post_id": 41991502, "comment_id": 71160198, "body": "oh I haven&#39;t spotted the code-duplication. That should have been mentioned in the question :)"}, {"owner": {"reputation": 1643, "user_id": 1051068, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/361200535f0c806be80bc0b4bfca7db7?s=128&d=identicon&r=PG", "display_name": "beebek", "link": "https://stackoverflow.com/users/1051068/beebek"}, "edited": false, "score": 0, "creation_date": 1485990694, "post_id": 41991502, "comment_id": 71160208, "body": "Let me go ahead and edit the question."}, {"owner": {"reputation": 6424, "user_id": 3579910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoMjv.jpg?s=128&g=1", "display_name": "TemporalWolf", "link": "https://stackoverflow.com/users/3579910/temporalwolf"}, "edited": false, "score": 2, "creation_date": 1485990981, "post_id": 41991502, "comment_id": 71160292, "body": "<code>print (&quot;run dozer()&quot;, &quot;run car()&quot;)[a==1 and b==2]</code>"}], "answers": [{"comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 0, "creation_date": 1485990803, "post_id": 41991514, "comment_id": 71160241, "body": "@wim: well the idea is to do an analysis what the &quot;common code paths are&quot;. Since <code>&quot;run dozer&quot;</code> is the only code fragment with duplicated code, I did analysis on that one. And the condition is that this holds when <code>a != 1 or b != 2</code>."}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": false, "score": 0, "last_activity_date": 1485990850, "last_edit_date": 1485990850, "creation_date": 1485990516, "answer_id": 41991514, "question_id": 41991502, "link": "https://stackoverflow.com/questions/41991502/better-way-for-nested-if-else/41991514#41991514", "title": "Better way for nested if else", "body": "<p>The only code fragment that occurs twice is <code>\"run dozer()\"</code> so we can do analysis on the cases where this is printed: this is the case if either <code>a != 1</code> or <code>b != 2</code>. In the other case it prints <code>\"run car()\"</code>. So:</p>\n\n<pre><code>if a != 1 or b != 2:\n    print \"run dozer()\"\nelse:\n    print \"run car()\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3029, "user_id": 36661, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00a07baedb1420bcf39a824439fc7a2b?s=128&d=identicon&r=PG", "display_name": "Ajit George", "link": "https://stackoverflow.com/users/36661/ajit-george"}, "is_accepted": false, "score": 6, "last_activity_date": 1485990573, "creation_date": 1485990573, "answer_id": 41991528, "question_id": 41991502, "link": "https://stackoverflow.com/questions/41991502/better-way-for-nested-if-else/41991528#41991528", "title": "Better way for nested if else", "body": "<pre><code>if a == 1 and b == 2:\n    print \"run car()\"\nelse:\n    print \"run dozer()\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 117275, "user_id": 5393381, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/308ffa6266fda6d94bc56fbd9e9798f9?s=128&d=identicon&r=PG&f=1", "display_name": "MSeifert", "link": "https://stackoverflow.com/users/5393381/mseifert"}, "is_accepted": false, "score": 1, "last_activity_date": 1485991006, "creation_date": 1485991006, "answer_id": 41991619, "question_id": 41991502, "link": "https://stackoverflow.com/questions/41991502/better-way-for-nested-if-else/41991619#41991619", "title": "Better way for nested if else", "body": "<p>It's maybe not a good idea in this case, but you could just run your code through all (expected) cases (<code>0</code> represents not-<code>1</code> for <code>a</code> and not-<code>2</code> for <code>b</code>):</p>\n\n<pre><code>for a in (0, 1):\n    for b in (0, 2):\n        print('a = ', a, ', b = ', b, sep='')\n\n        if a == 1:\n            if b == 2:\n                print(\"run car()\")\n            else:\n                print(\"run dozer()\")\n        else:\n            print(\"run dozer()\")\n</code></pre>\n\n<p>This gives you a list of all combinations:</p>\n\n<pre><code>a = 0, b = 0\nrun dozer()\na = 0, b = 2\nrun dozer()\na = 1, b = 0\nrun dozer()\na = 1, b = 2\nrun car()\n</code></pre>\n\n<p>This gives you a list of combinations that should trigger the <code>run car</code>: <code>a=1, b=2</code>. One solution would be to use tuple-comparison:</p>\n\n<pre><code>if (a, b) == (1, 2):\n    print('run car')\nelse:\n    print('run dozer')\n</code></pre>\n\n<p>In this case this is quite trivial but such an approach <em>could</em> be quite senseable for more complex, deeper nested <code>if</code>s, more variables, more cases (or if you just want to be curious :-))</p>\n"}, {"comments": [{"owner": {"reputation": 6424, "user_id": 3579910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoMjv.jpg?s=128&g=1", "display_name": "TemporalWolf", "link": "https://stackoverflow.com/users/3579910/temporalwolf"}, "edited": false, "score": 1, "creation_date": 1485991500, "post_id": 41991620, "comment_id": 71160454, "body": "Code Golf version: <code>print &quot;run &quot;+(&quot;doze&quot;, &quot;ca&quot;)[(a,b)==(1,2)]+&quot;r()&quot;</code> <i>don&#39;t do this please</i>"}, {"owner": {"reputation": 39529, "user_id": 2063361, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/jB77z.jpg?s=128&g=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/2063361/anonymous"}, "reply_to_user": {"reputation": 6424, "user_id": 3579910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoMjv.jpg?s=128&g=1", "display_name": "TemporalWolf", "link": "https://stackoverflow.com/users/3579910/temporalwolf"}, "edited": false, "score": 1, "creation_date": 1485991770, "post_id": 41991620, "comment_id": 71160559, "body": "@TemporalWolf updated answer with slightly better version; again inspired from your comment :)"}, {"owner": {"reputation": 6424, "user_id": 3579910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoMjv.jpg?s=128&g=1", "display_name": "TemporalWolf", "link": "https://stackoverflow.com/users/3579910/temporalwolf"}, "reply_to_user": {"reputation": 117275, "user_id": 5393381, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/308ffa6266fda6d94bc56fbd9e9798f9?s=128&d=identicon&r=PG&f=1", "display_name": "MSeifert", "link": "https://stackoverflow.com/users/5393381/mseifert"}, "edited": false, "score": 2, "creation_date": 1485992955, "post_id": 41991620, "comment_id": 71160922, "body": "If a &amp; b are ints: <code>print&quot;run %sr()&quot;%(&quot;doze&quot;,&quot;ca&quot;)[0&lt;a&lt;b&lt;3]</code> 39 bytes. @MSeifert <a href=\"http://codegolf.stackexchange.com/\">Code Golf</a>"}, {"owner": {"reputation": 117275, "user_id": 5393381, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/308ffa6266fda6d94bc56fbd9e9798f9?s=128&d=identicon&r=PG&f=1", "display_name": "MSeifert", "link": "https://stackoverflow.com/users/5393381/mseifert"}, "edited": false, "score": 0, "creation_date": 1485993315, "post_id": 41991620, "comment_id": 71161052, "body": "The first one is really good! But I don&#39;t think it&#39;s advisable to teach how one can index tuples with booleans. However the <code>0&lt;a&lt;b&lt;3</code> suggestion is really fascinating :)"}, {"owner": {"reputation": 6424, "user_id": 3579910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoMjv.jpg?s=128&g=1", "display_name": "TemporalWolf", "link": "https://stackoverflow.com/users/3579910/temporalwolf"}, "edited": false, "score": 2, "creation_date": 1485993468, "post_id": 41991620, "comment_id": 71161104, "body": "I agree with MSeifert, Code Golf is off topic for <a href=\"https://stackoverflow.com\">Stack Overflow</a>. Also, pick this apart if you want: <code>print[&quot;Player %s Wins!&quot;%(1+(4256&gt;&gt;len(b*2+a)-9&amp;1)),&quot;Tie!&quot;][a==b]</code> It tells you who wins given &quot;rock&quot; &quot;paper&quot; &quot;scissors&quot; as inputs a/b"}], "tags": [], "owner": {"reputation": 39529, "user_id": 2063361, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/jB77z.jpg?s=128&g=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/2063361/anonymous"}, "is_accepted": false, "score": 1, "last_activity_date": 1485994392, "last_edit_date": 1495540829, "creation_date": 1485991010, "answer_id": 41991620, "question_id": 41991502, "link": "https://stackoverflow.com/questions/41991502/better-way-for-nested-if-else/41991620#41991620", "title": "Better way for nested if else", "body": "<p>You may write the same logic in one-line as:</p>\n\n<pre><code>print \"run car()\" if  a == 1 and b == 2 else \"run dozer()\"\n</code></pre>\n\n<p>Since Python considers <code>True</code>/<code>False</code> as 0 and 1. You may use these booleans as index to fetch the string from tuple as:</p>\n\n<pre><code>print (\"run dozer()\", \"run car()\")[(a, b) == (1, 2)]\n</code></pre>\n\n<p><em>(This answer is inspired by  <a href=\"https://stackoverflow.com/users/3579910\">TemporalWolf</a>'s comment)</em></p>\n\n<hr>\n\n<p>In order to further reduce the code, you may do string formatting as:</p>\n\n<pre><code>print \"run %sr()\" % (\"doze\", \"ca\")[(a, b) == (1, 2)]\n\n# OR, via using `str.format()`\n# print \"run {}r()\".format((\"doze\", \"ca\")[(a, b) == (1, 2)])\n</code></pre>\n\n<p>But DON'T do this. It is not as readable as compared to the previous one.</p>\n\n<p><strong>Edit:</strong> As per another comment by <em>TemporalWolf (The Great Observationist)</em>, since <code>a=1</code>, and <code>b=2</code>; this could be put within single boolean condition as: <code>0&lt;a&lt;b&lt;3</code>. Hence, this code can be further reduced to <em>39 bytes</em>:</p>\n\n<pre><code>print'run %sr()'%('doze','ca')[0&lt;a&lt;b&lt;3]\n</code></pre>\n"}], "owner": {"reputation": 1643, "user_id": 1051068, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/361200535f0c806be80bc0b4bfca7db7?s=128&d=identicon&r=PG", "display_name": "beebek", "link": "https://stackoverflow.com/users/1051068/beebek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1570, "favorite_count": 0, "closed_date": 1580398167, "answer_count": 4, "score": 0, "last_activity_date": 1485994392, "creation_date": 1485990406, "last_edit_date": 1485990746, "question_id": 41991502, "link": "https://stackoverflow.com/questions/41991502/better-way-for-nested-if-else", "closed_reason": "Opinion-based", "title": "Better way for nested if else", "body": "<p>How can the nested if else can be done in a better way?\nI want to minimize code duplication for <code>print \"run dozer()\"</code></p>\n\n<pre><code>print \"some mechanical stuffs before this\"\nif a == 1:\n    if b == 2:\n        print \"run car()\"\n    else:\n        print \"run dozer()\"\nelse:\n    print \"run dozer()\"\nprint \"more mechanical stuffs after this\"\n</code></pre>\n"}, {"tags": ["python", "tensorflow"], "answers": [{"tags": [], "owner": {"reputation": 1654, "user_id": 3128177, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/8edafe4e6093864c46e71839232b06df?s=128&d=identicon&r=PG", "display_name": "nmiculinic", "link": "https://stackoverflow.com/users/3128177/nmiculinic"}, "is_accepted": true, "score": 2, "last_activity_date": 1485991684, "creation_date": 1485991684, "answer_id": 41991764, "question_id": 41991397, "link": "https://stackoverflow.com/questions/41991397/how-to-replace-a-dimension-of-a-tensor-in-tensorflow/41991764#41991764", "title": "How to replace a dimension of a tensor in tensorflow?", "body": "<p>You're doing some computation on last dimension...That is you want to go from (?, 5, 1, 20) -> (?, 5, 1, b) if I understood correctly? </p>\n\n<p>What kind of computation?</p>\n\n<p>You could reshape your tensor, do the computation (such as matrix multiplication) and reshape back. </p>\n\n<pre><code>a = tf.reshape(X, [-1, 20])\na = tf.matmul(a, X)\na = tf.reshape(a, [-1, b])\n</code></pre>\n\n<p>Or you could use <code>tf.einsum()</code> to achieve similar feat. For non-linear computation depends what you want to do. </p>\n\n<p>EDIT:\nAlso you could hack it with Conv2D and using filter of size [1,1, 20, b]. Does the same thing and more efficiently</p>\n"}], "owner": {"reputation": 55, "user_id": 4474386, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/530NZ.jpg?s=128&g=1", "display_name": "bountrisv", "link": "https://stackoverflow.com/users/4474386/bountrisv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 872, "favorite_count": 0, "accepted_answer_id": 41991764, "answer_count": 1, "score": 0, "last_activity_date": 1485992141, "creation_date": 1485989847, "last_edit_date": 1485992141, "question_id": 41991397, "link": "https://stackoverflow.com/questions/41991397/how-to-replace-a-dimension-of-a-tensor-in-tensorflow", "title": "How to replace a dimension of a tensor in tensorflow?", "body": "<p>Say I have a tensor with shape (?, 5, 1, 20)</p>\n\n<p>For each occurence of the last dimension I do some computation (getting the k max values) on the last dimension that produces a smaller tensor b. What do I do if want to replace the last dimension of my original tensor with b?</p>\n\n<p>What (preferably pure tensorflow) path should I take?</p>\n"}, {"tags": ["python", "macos", "python-2.7", "pip"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1485989854, "post_id": 41991390, "comment_id": 71159903, "body": "pip should already come installed with python 2.7"}, {"owner": {"reputation": 943, "user_id": 7053838, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/632092450285868/picture?type=large", "display_name": "Simeon Aleksov", "link": "https://stackoverflow.com/users/7053838/simeon-aleksov"}, "edited": false, "score": 0, "creation_date": 1485989910, "post_id": 41991390, "comment_id": 71159930, "body": "Try reinstalling python and select &quot;Custom installation&quot; under that just select  &quot;Install pip package&quot;."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1485989926, "post_id": 41991390, "comment_id": 71159934, "body": "Or, to be more precise, from your link: <code>If you have Python 2 &gt;=2.7.9 or Python 3 &gt;=3.4 installed from python.org, you will already have pip and setuptools, but will need to upgrade to the latest version...</code>"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1485989976, "post_id": 41991390, "comment_id": 71159953, "body": "And definitely, if you are using the Pytho distribution that is working with OSX sierra, then <code>pip</code> will be there. Try typing <code>pip</code> in the terminal."}, {"owner": {"reputation": 344, "user_id": 4837005, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f8b7cffdd05664f7e3988486a381ba49?s=128&d=identicon&r=PG&f=1", "display_name": "Coolq B", "link": "https://stackoverflow.com/users/4837005/coolq-b"}, "edited": false, "score": 2, "creation_date": 1485989982, "post_id": 41991390, "comment_id": 71159957, "body": "Just putting an idea out there - have you tried running it with <code>sudo</code>? Or are you <code>root</code>?"}, {"owner": {"reputation": 121, "user_id": 3389754, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/a27881b869e144f2a63f079a997b6df8?s=128&d=identicon&r=PG&f=1", "display_name": "sully_r", "link": "https://stackoverflow.com/users/3389754/sully-r"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1485990258, "post_id": 41991390, "comment_id": 71160065, "body": "@juanpa.arrivillaga -- It should come installed, but it is not. When typing <code>pip</code> in terminal I get the response: <code>-bash: pip: command not found</code>"}, {"owner": {"reputation": 6961, "user_id": 1248974, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ClqC2.jpg?s=128&g=1", "display_name": "davedwards", "link": "https://stackoverflow.com/users/1248974/davedwards"}, "edited": false, "score": 0, "creation_date": 1485990265, "post_id": 41991390, "comment_id": 71160069, "body": "Coolq B may be right, <a href=\"http://stackoverflow.com/a/12277916/1248974\">Permission denied error when trying to install pip in Mac OS X Lion</a>, dupe?"}, {"owner": {"reputation": 1446, "user_id": 7491302, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55ed578eeae7d2391579f475bbe86fa8?s=128&d=identicon&r=PG&f=1", "display_name": "Tristan", "link": "https://stackoverflow.com/users/7491302/tristan"}, "edited": false, "score": 1, "creation_date": 1485990375, "post_id": 41991390, "comment_id": 71160109, "body": "The <code>&#47;Library</code> directory requires root privileges to be altered. Run <code>sudo python get-pip.py</code> and enter your password and it should work."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1485990389, "post_id": 41991390, "comment_id": 71160112, "body": "Looks to me you do not have permissions, so running the program with <code>sudo</code> might do the trick."}], "answers": [{"tags": [], "owner": {"reputation": 121, "user_id": 3389754, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/a27881b869e144f2a63f079a997b6df8?s=128&d=identicon&r=PG&f=1", "display_name": "sully_r", "link": "https://stackoverflow.com/users/3389754/sully-r"}, "is_accepted": true, "score": 2, "last_activity_date": 1486053584, "last_edit_date": 1486053584, "creation_date": 1486047503, "answer_id": 42005457, "question_id": 41991390, "link": "https://stackoverflow.com/questions/41991390/error-installing-pip-for-python/42005457#42005457", "title": "Error Installing pip for Python", "body": "<p><strong>Solution:</strong></p>\n\n<p>After trying Tristan's &amp; Coolq B's suggestion <code>sudo python get-pip.py</code> it worked. <em>However</em>, if at first you don't succeed, try again:  after the first try, I experienced a timeout error. I tried it again and it worked. Both results posted:</p>\n\n<p><strong>First try (timeout error):</strong></p>\n\n<pre><code>Myname-MBP:python myname$ sudo python get-pip.py\nPassword:\nThe directory '/Users/myname/Library/Caches/pip/http' or its parent directory is not owned by the current user and the cache has been disabled. Please check the permissions and owner of that directory. If executing pip with sudo, you may want sudo's -H flag.\n    The directory '/Users/myname/Library/Caches/pip' or its parent directory is not owned by the current user and caching wheels has been disabled. check the permissions and owner of that directory. If executing pip with sudo, you may want sudo's -H flag.\n    Collecting pip\n      Downloading pip-9.0.1-py2.py3-none-any.whl (1.3MB)\n        19% |\u2588\u2588\u2588\u2588\u2588\u2588\u258e                         | 245kB 11kB/s eta 0:01:32Exception:\n    Traceback (most recent call last):\n      File \"/tmp/tmpq4Sjum/pip.zip/pip/basecommand.py\", line 215, in main\n        status = self.run(options, args)\n      File \"/tmp/tmpq4Sjum/pip.zip/pip/commands/install.py\", line 324, in run\n        requirement_set.prepare_files(finder)\n      File \"/tmp/tmpq4Sjum/pip.zip/pip/req/req_set.py\", line 380, in prepare_files\n        ignore_dependencies=self.ignore_dependencies))\n      File \"/tmp/tmpq4Sjum/pip.zip/pip/req/req_set.py\", line 620, in _prepare_file\n        session=self.session, hashes=hashes)\n      File \"/tmp/tmpq4Sjum/pip.zip/pip/download.py\", line 821, in unpack_url\n        hashes=hashes\n      File \"/tmp/tmpq4Sjum/pip.zip/pip/download.py\", line 659, in unpack_http_url\n        hashes)\n      File \"/tmp/tmpq4Sjum/pip.zip/pip/download.py\", line 882, in _download_http_url\n        _download_url(resp, link, content_file, hashes)\n      File \"/tmp/tmpq4Sjum/pip.zip/pip/download.py\", line 603, in _download_url\n        hashes.check_against_chunks(downloaded_chunks)\n      File \"/tmp/tmpq4Sjum/pip.zip/pip/utils/hashes.py\", line 46, in check_against_chunks\n        for chunk in chunks:\n      File \"/tmp/tmpq4Sjum/pip.zip/pip/download.py\", line 571, in written_chunks\n        for chunk in chunks:\n      File \"/tmp/tmpq4Sjum/pip.zip/pip/utils/ui.py\", line 139, in iter\n        for x in it:\n      File \"/tmp/tmpq4Sjum/pip.zip/pip/download.py\", line 560, in resp_read\n        decode_content=False):\n      File \"/tmp/tmpq4Sjum/pip.zip/pip/_vendor/requests/packages/urllib3/response.py\", line 357, in stream\n        data = self.read(amt=amt, decode_content=decode_content)\n      File \"/tmp/tmpq4Sjum/pip.zip/pip/_vendor/requests/packages/urllib3/response.py\", line 324, in read\n        flush_decoder = True\n      File \"/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/contextlib.py\", line 35, in __exit__\n        self.gen.throw(type, value, traceback)\n      File \"/tmp/tmpq4Sjum/pip.zip/pip/_vendor/requests/packages/urllib3/response.py\", line 246, in _error_catcher\n        raise ReadTimeoutError(self._pool, None, 'Read timed out.')\n    ReadTimeoutError: HTTPSConnectionPool(host='pypi.python.org', port=443): Read timed out.\n</code></pre>\n\n<p><strong>Second Try (success):</strong></p>\n\n<pre><code>MyName-MBP:python myname$ sudo python get-pip.py\nPassword:\nThe directory '/Users/myname/Library/Caches/pip/http' or its parent directory is not owned by the current user and the cache has been disabled. Please check the permissions and owner of that directory. If executing pip with sudo, you may want sudo's -H flag.\nThe directory '/Users/myname/Library/Caches/pip' or its parent directory is not owned by the current user and caching wheels has been disabled. check the permissions and owner of that directory. If executing pip with sudo, you may want sudo's -H flag.\nCollecting pip\n  Downloading pip-9.0.1-py2.py3-none-any.whl (1.3MB)\n    100% |\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 1.3MB 143kB/s \nCollecting wheel\n  Downloading wheel-0.29.0-py2.py3-none-any.whl (66kB)\n    100% |\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 71kB 72kB/s \nInstalling collected packages: pip, wheel\nSuccessfully installed pip-9.0.1 wheel-0.29.0\n</code></pre>\n"}], "owner": {"reputation": 121, "user_id": 3389754, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/a27881b869e144f2a63f079a997b6df8?s=128&d=identicon&r=PG&f=1", "display_name": "sully_r", "link": "https://stackoverflow.com/users/3389754/sully-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3346, "favorite_count": 1, "accepted_answer_id": 42005457, "answer_count": 1, "score": 1, "last_activity_date": 1486053584, "creation_date": 1485989824, "last_edit_date": 1486047755, "question_id": 41991390, "link": "https://stackoverflow.com/questions/41991390/error-installing-pip-for-python", "title": "Error Installing pip for Python", "body": "<p>In order to install python packages, you must have <code>pip</code> installed. Very clear instructions are found here: <a href=\"https://packaging.python.org/installing/\" rel=\"nofollow noreferrer\">https://packaging.python.org/installing/</a></p>\n\n<p>However, when attempting to install pip via <code>python get-pip.py</code> I receive the following error:</p>\n\n<p><code>OSError: [Errno 13] Permission denied: '/Library/Python/2.7/site-packages/pip'</code></p>\n\n<p>To no avail, I've tried to follow the advice on GitHub (<a href=\"https://github.com/pypa/pip/issues/3761\" rel=\"nofollow noreferrer\">https://github.com/pypa/pip/issues/3761</a>) to alter my permissions and to disable System Integrity Protection as found at this link (<a href=\"http://osxdaily.com/2015/10/05/disable-rootless-system-integrity-protection-mac-os-x/\" rel=\"nofollow noreferrer\">http://osxdaily.com/2015/10/05/disable-rootless-system-integrity-protection-mac-os-x/</a>).</p>\n\n<p>Also, note that <code>pip</code> does not exist on my machine:</p>\n\n<pre><code>Myname-MBP:python myname$ pip\n-bash: pip: command not found\n</code></pre>\n\n<p>I'm running OSX 10.12.2.</p>\n"}, {"tags": ["python", "recursion", "lambda", "python-2.x"], "comments": [{"owner": {"reputation": 11096, "user_id": 541208, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/2dfc2e563d2150994a6e06ef37f9e7be?s=128&d=identicon&r=PG", "display_name": "TankorSmash", "link": "https://stackoverflow.com/users/541208/tankorsmash"}, "edited": false, "score": 0, "creation_date": 1485989889, "post_id": 41991374, "comment_id": 71159921, "body": "Could you format your code out a little bit, there&#39;s a function that&#39;s just plain text, and unindented."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1485990559, "post_id": 41991374, "comment_id": 71160174, "body": "For what it&#39;s worth, <code>lambda</code> functions <i>can</i> call themselves in their definition."}, {"owner": {"reputation": 22012, "user_id": 194586, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/1a71658d81f8a82a8122050f21bb86d3?s=128&d=identicon&r=PG", "display_name": "Nick T", "link": "https://stackoverflow.com/users/194586/nick-t"}, "edited": false, "score": 0, "creation_date": 1485990597, "post_id": 41991374, "comment_id": 71160185, "body": "What do you mean &quot;add up&quot; the functions? Evaluate them all and add the results? Or generate a series of nested functions?"}], "answers": [{"tags": [], "owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "is_accepted": false, "score": 3, "last_activity_date": 1485990542, "creation_date": 1485990542, "answer_id": 41991522, "question_id": 41991374, "link": "https://stackoverflow.com/questions/41991374/convenient-way-to-add-lambda-functions-together/41991522#41991522", "title": "Convenient way to add lambda functions together?", "body": "<p>You can do something like this:</p>\n\n<pre><code>&gt;&gt;&gt; def functionmaker(a, b):\n...     return lambda x: a*x + b\n...\n&gt;&gt;&gt; def summer_funcs(args):\n...     return lambda x: sum(functionmaker(*a)(x) for a in args)\n...\n&gt;&gt;&gt; arguments = [(1,2), (3,4), (5,6)]\n&gt;&gt;&gt; summer_funcs(arguments)(1)\n21\n</code></pre>\n\n<p>Or if you prefer:</p>\n\n<pre><code>&gt;&gt;&gt; f = summer_funcs(arguments)\n&gt;&gt;&gt; f(1)\n21\n&gt;&gt;&gt; f(2)\n30\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "is_accepted": true, "score": 2, "last_activity_date": 1486062767, "last_edit_date": 1486062767, "creation_date": 1485993416, "answer_id": 41992070, "question_id": 41991374, "link": "https://stackoverflow.com/questions/41991374/convenient-way-to-add-lambda-functions-together/41992070#41992070", "title": "Convenient way to add lambda functions together?", "body": "<p>If I've correctly understood your question, you could use the built-in <a href=\"https://docs.python.org/2/library/functions.html#sum\" rel=\"nofollow noreferrer\"><code>sum()</code></a> function and pass it a <a href=\"https://docs.python.org/2/reference/expressions.html#generator-expressions\" rel=\"nofollow noreferrer\">generator&nbsp;expression</a> argument to accomplish the goal:</p>\n\n<pre><code>def functionmaker(a, b):\n     return lambda x: (a*x) + b\n\nablist = [(1,2), (3,4), (5,6)]\nx = 1\ntotal = sum(functionmaker(a, b)(x) for a, b in ablist)\nprint(total)  # -&gt; 21\n</code></pre>\n\n<p>If you need to compute this quantity for many different values of <code>x</code>, then it might be worthwhile to optimize things for doing that:</p>\n\n<pre><code>functions = [functionmaker(a, b) for a, b in ablist]\nsum_of_functions = lambda x: sum(function(x) for function in functions)\n\nfor x in (1, 1.5, 2):\n    print('sum_of_functions(x={:.1f}) -&gt; {:.1f}'.format(x, sum_of_functions(x)))\n</code></pre>\n\n<p>Output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>sum_of_functions(x=1.0) -&gt; 21.0\nsum_of_functions(x=1.5) -&gt; 25.5\nsum_of_functions(x=2.0) -&gt; 30.0\n</code></pre>\n"}], "owner": {"reputation": 349, "user_id": 7503046, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/3d3b34e1b311b2634c3f2883ff913f50?s=128&d=identicon&r=PG&f=1", "display_name": "iammax", "link": "https://stackoverflow.com/users/7503046/iammax"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 156, "favorite_count": 0, "accepted_answer_id": 41992070, "answer_count": 2, "score": 4, "last_activity_date": 1486062767, "creation_date": 1485989728, "last_edit_date": 1486060206, "question_id": 41991374, "link": "https://stackoverflow.com/questions/41991374/convenient-way-to-add-lambda-functions-together", "title": "Convenient way to add lambda functions together?", "body": "<p>Let's say I have this function in a python module:</p>\n\n<pre><code>def functionmaker(a,b):\n     return lambda x: (a*x) + b\n</code></pre>\n\n<p>Now let's say I am given a list of this format:\n<code>ablist = [[a1, b1], [a2, b2]...[an, bn]]</code> of arbitrary length.</p>\n\n<p>My goal is to add up all the resulting functions you get from these a's and b's.</p>\n\n<p>Of course, with the simple example I gave of ax+b, you could algebraically work it out to being <code>(a1 + a2 + ... an)x + (b1  + b2 + ... bn)</code>. But let's ignore that for a moment. The function I am actually working with is a contracted gaussian molecular orbital function, and it's not as easy to trick your way out of the problem with algebra.</p>\n\n<p>What I wanted to do was something like this:</p>\n\n<pre><code>function = lambda x: (a1*x) + b1\nq = 2\n\nwhile q &lt; n:\n     function = lambda x: function(x) + (ablist[q][0]*x) + ablist[q][1])\n     q += 1\n</code></pre>\n\n<p>But it seems you can't call a function inside itself like that. I was hoping it would just over-write the old version of \"function\" with the new one, but I guess not. I guess I probably need to do some kind of recursive way, but maybe there is a nicer way?</p>\n\n<p>By the way I am using python 2.7. </p>\n"}, {"tags": ["python", "class", "implementation"], "comments": [{"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1485990252, "post_id": 41991361, "comment_id": 71160062, "body": "Please <a href=\"https://stackoverflow.com/posts/41991361/edit\">edit</a> your question and include to exactly contents of at least part the list you already have because that will be needed to provide a concrete answer."}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1485991756, "post_id": 41991361, "comment_id": 71160550, "body": "better use list or dictionary - it helps to work with this."}, {"owner": {"reputation": 51, "user_id": 6216892, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/rz5MM.png?s=128&g=1", "display_name": "mary jerson", "link": "https://stackoverflow.com/users/6216892/mary-jerson"}, "reply_to_user": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1485993107, "post_id": 41991361, "comment_id": 71160971, "body": "@furas  I was thinking in use a class because if in the future I need to add a new element I would only have to call the class object and place the needed arguments."}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1485993626, "post_id": 41991361, "comment_id": 71161156, "body": "sorry, I was thinging about keeping objects on list <code>obj_type.append( type_of_thing(...) )</code>. The same with data before you create objects <code>type_of_thing = [ [&quot;x&quot;, ...], [&quot;x&quot;, ...], ]</code> and then you can use <code>for</code> loop to create lists with objects."}], "answers": [{"tags": [], "owner": {"reputation": 344, "user_id": 4837005, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f8b7cffdd05664f7e3988486a381ba49?s=128&d=identicon&r=PG&f=1", "display_name": "Coolq B", "link": "https://stackoverflow.com/users/4837005/coolq-b"}, "is_accepted": false, "score": -1, "last_activity_date": 1485990994, "creation_date": 1485990994, "answer_id": 41991615, "question_id": 41991361, "link": "https://stackoverflow.com/questions/41991361/how-to-implement-a-class-with-multiple-elements-already-created/41991615#41991615", "title": "How to implement a class with multiple elements already created?", "body": "<p>Python stores it's global variables in <code>globals()</code>, you also spoke of a list of information, you can iterate through that list adding classes to <code>globals()</code>.</p>\n\n<pre><code>list_of_things = [(\"x\",\"WRT-001\",\"1-10\",\"custom\",\"2016\",\"class1\"),\n                  (\"x\",\"WRT-001\",\"1-11\",\"custom\",\"2016\",\"class1\"),\n                  (\"xy\",\"WRT-001\",\"1-12\",\"custom\",\"2016\",\"class1\")]\n\nclass type_of_thing():\n    def __init__(self, type, code, version, description, year, family):\n        self.type = type\n        self.code = code\n        self.version = version\n        self.description = description\n        self.year = year\n        self.family = family\n\nfor i,thing in enumerate(list_of_things):\n    globals()[\"thing_\"+str(i)] = type_of_thing(thing[0],thing[1],thing[2],thing[3],thing[4],thing[5])\n\nprint(thing_0)\n</code></pre>\n\n<p>This code will create variables name <code>thing_0</code> to <code>thing-&lt;Number of list indicies&gt;</code>, then print the first one, <code>thing_0</code>.</p>\n\n<p>Hope this helps! If it isn't what you were looking for, please tell me.</p>\n\n<p>Additionally It isn't very pythonic. :/</p>\n\n<p>Thanks :)</p>\n"}, {"comments": [{"owner": {"reputation": 51, "user_id": 6216892, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/rz5MM.png?s=128&g=1", "display_name": "mary jerson", "link": "https://stackoverflow.com/users/6216892/mary-jerson"}, "edited": false, "score": 0, "creation_date": 1486049369, "post_id": 41991670, "comment_id": 71188177, "body": "Thanks, so I think that because of the answers that I got, is not a good idea to have a class and the best I can do is to have a dictionary or a list."}], "tags": [], "owner": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "is_accepted": true, "score": 0, "last_activity_date": 1485993167, "last_edit_date": 1485993167, "creation_date": 1485991232, "answer_id": 41991670, "question_id": 41991361, "link": "https://stackoverflow.com/questions/41991361/how-to-implement-a-class-with-multiple-elements-already-created/41991670#41991670", "title": "How to implement a class with multiple elements already created?", "body": "<p>Assuming those lists are a text string, you can just parse that list and put into a <code>dict</code>. Here is an example:</p>\n\n<pre><code>txt='''\\\ntype = \"x\", \ncode = \"WRT-001\", \nversion= \"1-10\", \ndescription= \"custom\", \nyear = \"2016\", \nfamily = \"class1\"\n\ntype = \"x\", \ncode = \"WRT-001\", \nversion= \"1-11\", \ndescription= \"custom\", \nyear = \"2016\", \nfamily = \"class1\"'''\n\nfor block in txt.split('\\n\\n'): \n    di={}\n    for line in block.splitlines():\n        k,v=[e.strip().strip('\"') for e in line.rstrip().rstrip(',').split('=')]\n        di[k]=v\n    print(di)   \n</code></pre>\n\n<p>Prints:</p>\n\n<pre><code>{'type': 'x', 'code': 'WRT-001', 'version': '1-10', 'description': 'custom', 'year': '2016', 'family': 'class1'}\n{'type': 'x', 'code': 'WRT-001', 'version': '1-11', 'description': 'custom', 'year': '2016', 'family': 'class1'}\n</code></pre>\n\n<p>Then call you class constructor with the dict di. </p>\n\n<hr>\n\n<p>Based on your edit, you can do:</p>\n\n<pre><code>&gt;&gt;&gt; keys=['type', 'code', 'version', 'description', 'year', 'family']   \n&gt;&gt;&gt; vals=[\"x\",\"WRT-001\",\"1-10\",\"custom\",\"2016\",\"class1\"]\n&gt;&gt;&gt; {k:v for k,v in zip(keys, vals)}\n{'type': 'x', 'code': 'WRT-001', 'version': '1-10', 'description': 'custom', 'year': '2016', 'family': 'class1'}\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 6216892, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/rz5MM.png?s=128&g=1", "display_name": "mary jerson", "link": "https://stackoverflow.com/users/6216892/mary-jerson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 41991670, "answer_count": 2, "score": -1, "last_activity_date": 1485993167, "creation_date": 1485989662, "last_edit_date": 1485991526, "question_id": 41991361, "link": "https://stackoverflow.com/questions/41991361/how-to-implement-a-class-with-multiple-elements-already-created", "title": "How to implement a class with multiple elements already created?", "body": "<p>I'm trying to implement a class with this structure:</p>\n\n<pre><code>class type_of_thing():\n    def __init__(self, type, code, version, description, year, family):\n        self.type = type\n        self.code = code\n        self.version = version\n        self.description = description\n        self.year = year\n        self.family = family\n\n# with this I would create a new element of this class:\n\nobj_type1 = type_of_thing(type = \"x\", code = \"WRT-001\", version= \"1-10\", description= \"custom\", year = \"2016\", family = \"class1\")\nobj_type1_2 = type_of_thing(type = \"x\", code = \"WRT-001\", version= \"1-11\", description= \"custom\", year = \"2016\", family = \"class1\")\nobj_type2 = type_of_thing(type = \"xy\", code = \"WRT-001\", version= \"1-12\", description= \"custom\", year = \"2016\", family = \"class1\")\n</code></pre>\n\n<p>but I have to create a hundreds of this elements, I already have them in a list like this:</p>\n\n<pre><code>type of thing1:\n\ntype = \"x\", \ncode = \"WRT-001\", \nversion= \"1-10\", \ndescription= \"custom\", \nyear = \"2016\", \nfamily = \"class1\"\n\ntype = \"x\", \ncode = \"WRT-001\", \nversion= \"1-11\", \ndescription= \"custom\", \nyear = \"2016\", \nfamily = \"class1\"\n\ntype of thing2:\n\ntype = \"xy\", \ncode = \"WRT-001\", \nversion= \"1-12\", \ndescription= \"custom\", \nyear = \"2016\", \nfamily = \"class1\"\n\ntype = \"xy\", \ncode = \"WRT-001\", \nversion= \"1-10\", \ndescription= \"custom\", \nyear = \"2016\", \nfamily = \"class1\"\n\ntype of thing3:\n...\n...\n...\n</code></pre>\n\n<p>Lets say that I could put them in lists like this:</p>\n\n<pre><code>type_of_thing1 = [\"x\",\"WRT-001\",\"1-10\",\"custom\",\"2016\",\"class1\"]\ntype_of_thing1_2 = [\"x\",\"WRT-001\",\"1-11\",\"custom\",\"2016\",\"class1\"]\ntype_of_thing2 = [\"xy\",\"WRT-001\",\"1-12\",\"custom\",\"2016\",\"class1\"]\ntype_of_thing3 = [\"...\",\"...\",\"...\",\"...\",\"..\",\"...\"]\n</code></pre>\n\n<p>So I'm trying to find a pythonic way to implement this using a class and avoid to create a bunch of objects or a bunch of lists to store all the combinations of type of things that I have.</p>\n\n<p>Would it be better to manage it like a list, and access to its elements by position instead of creating a class?\nWhat do you think that I could do something else to improve my code?</p>\n"}, {"tags": ["python", "global-variables", "python-multithreading"], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 7503080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a69ffaea2fc0bbb9bf29ccfd9d87f2b?s=128&d=identicon&r=PG&f=1", "display_name": "Trogdor", "link": "https://stackoverflow.com/users/7503080/trogdor"}, "is_accepted": false, "score": 0, "last_activity_date": 1486065936, "last_edit_date": 1495540891, "creation_date": 1486065936, "answer_id": 42011350, "question_id": 41991355, "link": "https://stackoverflow.com/questions/41991355/appending-a-global-list-with-threading-unable-to-access-results-outside-of-thr/42011350#42011350", "title": "Appending a Global List with threading - unable to access results outside of thread", "body": "<p>I was able to use Queue! Per the below Question, I stored the data I needed with put() within the thread and then storage it in a list I appended with get() outside of the threads.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/1886090/return-value-from-thread\">Return Value From Thread</a></p>\n"}], "owner": {"reputation": 11, "user_id": 7503080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a69ffaea2fc0bbb9bf29ccfd9d87f2b?s=128&d=identicon&r=PG&f=1", "display_name": "Trogdor", "link": "https://stackoverflow.com/users/7503080/trogdor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 680, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1486065936, "creation_date": 1485989637, "last_edit_date": 1485990657, "question_id": 41991355, "link": "https://stackoverflow.com/questions/41991355/appending-a-global-list-with-threading-unable-to-access-results-outside-of-thr", "title": "Appending a Global List with threading - unable to access results outside of thread", "body": "<p>I am using Threading to speed up collecting data from a website via RESTful API. I am storing the results in a list that I will walk later. I have made the list global, however when I try to print(list) outside of a thread, I see no results. Within, I can print(list) and see that it is appending correctly with all data. What's the best way to collect this data?</p>\n\n<pre><code>global global_list\nglobal_list = []\n\npool = ActivePool()\ns = threading.Sempahore(3)\n\n    def get_data(s, pool, i, list):\n        with s:\n            name = threading.currentThread().getName()\n            pool.makeActive(Name)\n            data = []\n            session = get_session(login info and url)#function for establishing connection to remote site\n            request = {API Call 'i'}\n            response = session.post(someurl, json=request)\n            session.close()\n            data = response.json()\n            global_list.append(data)\n            pool.makeInactive(name)\n\ndef main():\n    for i in api_list:\n        t = threading.Thread(target=get_data, name=i['uniqueID'], args=(s, pool, i, global_list))\n    print(global_list)\n\nif __name__ == '__main__':\n    main()\n</code></pre>\n"}, {"tags": ["python", "matplotlib", "astropy", "fits", "ds9"], "comments": [{"owner": {"reputation": 15710, "user_id": 814354, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/7abcbf6044bd332643732412d82e24bd?s=128&d=identicon&r=PG", "display_name": "keflavich", "link": "https://stackoverflow.com/users/814354/keflavich"}, "edited": false, "score": 0, "creation_date": 1485997223, "post_id": 41991344, "comment_id": 71162221, "body": "pyavm (<a href=\"https://github.com/astrofrog/pyavm\" rel=\"nofollow noreferrer\">github.com/astrofrog/pyavm</a>) is meant to add FITS headers to png images.  You might also look at <a href=\"http://aplpy.readthedocs.io/en/stable/api/aplpy.make_rgb_cube.html\" rel=\"nofollow noreferrer\">aplpy.readthedocs.io/en/stable/api/aplpy.make_rgb_cube.html</a>.  A fairly involved example of how to do this is here: <a href=\"https://github.com/keflavich/W51_ALMA_2013.1.00308.S/blob/b2d71e9e1b608fee5b596e755d1b8a7a24f8fa44/plot_code/overview_rgb_figure.py\" rel=\"nofollow noreferrer\">github.com/keflavich/W51_ALMA_2013.1.00308.S/blob/&hellip;</a>.  None of these are answers, but they might point you in the right direction"}], "owner": {"reputation": 23, "user_id": 937656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b812d45b06ab9c468d1374f102a40dc8?s=128&d=identicon&r=PG", "display_name": "gus.morales", "link": "https://stackoverflow.com/users/937656/gus-morales"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 268, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1485989538, "creation_date": 1485989538, "question_id": 41991344, "link": "https://stackoverflow.com/questions/41991344/how-to-correctly-combine-png-and-fits-data-into-one-matplotlib-figure-in-python", "title": "How to correctly combine PNG and FITS data into one Matplotlib figure in Python?", "body": "<p>I have a FITS file of 4545x4545 pixels with a header containing its coordinate system. Since DS9 (another software to view and handle FITS images) handles the color map scaling better, I had the idea of:</p>\n\n<ol>\n<li>open the FITS file using DS9 to tweak the color map of the image,</li>\n<li>save this image in a PNG file,</li>\n<li>load this PNG file in matplotlib and add the header from the original FITS file, so I can add the coordinate system to the PNG file.</li>\n</ol>\n\n<p>But the coordinates are not showing correctly, because <strong>the pixelization changes to different values in every step</strong>. How can I do this correctly?</p>\n\n<p>This the relevant part of my code:</p>\n\n<pre><code>from astropy.io import fits\nimport matplotlib.pyplot as plt\nimport aplpy\nfrom wcsaxes import WCSAxes\nfrom astropy import wcs\nimport sys\nimport matplotlib.image as mpimg\n\nimage_fits = 'image_in.fits'\nimage_png = 'image_in.png' # this came from the one before, has different pixelization\n\nimage_data_png = mpimg.imread(image_png)\nimage_head_fits = fits.getheader(image_fits)\nhdu_list = fits.open(image_fits)\n\nF = aplpy.FITSFigure(hdu_list, figure=plt.figure(1))\n\nfig = plt.figure()\nmywcs = wcs.WCS(image_head_fits)\nax = WCSAxes(fig,[0.1, 0.1, 0.8, 0.8],wcs=mywcs)\n\nfig.add_axes(ax)\n\nax.imshow(image_data_png)\n\nplt.savefig('image_out.png')\n</code></pre>\n"}, {"tags": ["python", "list", "python-3.x", "animation", "pygame"], "comments": [{"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1485990627, "post_id": 41991343, "comment_id": 71160192, "body": "move every alien from list one-by-one with small &quot;step&quot;. After that you start from the beginning. If you will repeat it in loop (mainloop) then it will look like all aliens move at the same time."}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1485990745, "post_id": 41991343, "comment_id": 71160227, "body": "BTW: if alien will have function <code>update()</code> and you will keep in <code>grp = pygame.sprite.Group</code> then you need only `grp.update()"}], "answers": [{"comments": [{"owner": {"reputation": 107, "user_id": 7363708, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b9fa2bb432d030d297b2b116ee5d46ff?s=128&d=identicon&r=PG&f=1", "display_name": "Computing Corn", "link": "https://stackoverflow.com/users/7363708/computing-corn"}, "edited": false, "score": 0, "creation_date": 1485991529, "post_id": 41991400, "comment_id": 71160459, "body": "I have the rect values of each alien in a list. So would this still work?"}, {"owner": {"reputation": 344, "user_id": 4837005, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f8b7cffdd05664f7e3988486a381ba49?s=128&d=identicon&r=PG&f=1", "display_name": "Coolq B", "link": "https://stackoverflow.com/users/4837005/coolq-b"}, "reply_to_user": {"reputation": 107, "user_id": 7363708, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b9fa2bb432d030d297b2b116ee5d46ff?s=128&d=identicon&r=PG&f=1", "display_name": "Computing Corn", "link": "https://stackoverflow.com/users/7363708/computing-corn"}, "edited": false, "score": 0, "creation_date": 1485992042, "post_id": 41991400, "comment_id": 71160636, "body": "A Pygame rect? If so absolutely I can edit my answer if that is the case :)"}, {"owner": {"reputation": 344, "user_id": 4837005, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f8b7cffdd05664f7e3988486a381ba49?s=128&d=identicon&r=PG&f=1", "display_name": "Coolq B", "link": "https://stackoverflow.com/users/4837005/coolq-b"}, "reply_to_user": {"reputation": 107, "user_id": 7363708, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b9fa2bb432d030d297b2b116ee5d46ff?s=128&d=identicon&r=PG&f=1", "display_name": "Computing Corn", "link": "https://stackoverflow.com/users/7363708/computing-corn"}, "edited": false, "score": 0, "creation_date": 1485998922, "post_id": 41991400, "comment_id": 71162665, "body": "why the downvote?"}], "tags": [], "owner": {"reputation": 344, "user_id": 4837005, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f8b7cffdd05664f7e3988486a381ba49?s=128&d=identicon&r=PG&f=1", "display_name": "Coolq B", "link": "https://stackoverflow.com/users/4837005/coolq-b"}, "is_accepted": false, "score": -1, "last_activity_date": 1485989871, "creation_date": 1485989871, "answer_id": 41991400, "question_id": 41991343, "link": "https://stackoverflow.com/questions/41991343/pygame-how-to-move-many-sprites-at-the-same-time/41991400#41991400", "title": "PyGame - How to move many sprites at the same time?", "body": "<p>OK assuming you have the positions of the aliens in the list you can use the <code>map</code> function:</p>\n\n<pre><code>aliens = [[0,0],[5,9],[5,2]] # Three aliens in list, these are their X,Y coords.\n\ndef move_alien_right(alien):\n    alien[0] += 1\n    return alien\n\naliens = list(map(move_alien_right,aliens))\n\nprint(aliens)\n</code></pre>\n\n<p>The <code>map</code> function is very fast, so if you have large groups of aliens it should work quite well.</p>\n\n<p>Thanks :)</p>\n"}, {"comments": [{"owner": {"reputation": 344, "user_id": 4837005, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f8b7cffdd05664f7e3988486a381ba49?s=128&d=identicon&r=PG&f=1", "display_name": "Coolq B", "link": "https://stackoverflow.com/users/4837005/coolq-b"}, "edited": false, "score": 0, "creation_date": 1485999642, "post_id": 41991666, "comment_id": 71162839, "body": "Nice work :) Your code is neat, and descriptive. The only thing I&#39;d advice is the <code>map</code> function, the main point of my answer. Using iteration is much slower. In any case the <code>map</code> function is good practice :) Overall you code looks good :D"}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "reply_to_user": {"reputation": 344, "user_id": 4837005, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f8b7cffdd05664f7e3988486a381ba49?s=128&d=identicon&r=PG&f=1", "display_name": "Coolq B", "link": "https://stackoverflow.com/users/4837005/coolq-b"}, "edited": false, "score": 0, "creation_date": 1485999708, "post_id": 41991666, "comment_id": 71162857, "body": "@CoolqB <code>pygame.sprite.Group()</code> is even better than <code>map</code>"}, {"owner": {"reputation": 344, "user_id": 4837005, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f8b7cffdd05664f7e3988486a381ba49?s=128&d=identicon&r=PG&f=1", "display_name": "Coolq B", "link": "https://stackoverflow.com/users/4837005/coolq-b"}, "edited": false, "score": 0, "creation_date": 1486007590, "post_id": 41991666, "comment_id": 71164778, "body": "Alright, let&#39;s time it, how long does your code take? I timed mine and it took... 0.0 seconds :P  I used cProfile. :)"}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "reply_to_user": {"reputation": 344, "user_id": 4837005, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f8b7cffdd05664f7e3988486a381ba49?s=128&d=identicon&r=PG&f=1", "display_name": "Coolq B", "link": "https://stackoverflow.com/users/4837005/coolq-b"}, "edited": false, "score": 0, "creation_date": 1486010061, "post_id": 41991666, "comment_id": 71165465, "body": "@CoolqB I don&#39;t know how fast is <code>pygame.sprite.Group()</code> but it uses function from SDL library written in <code>C&#47;C++</code> so it can be fast. But it better because it can be used with functions to detect collisions between sprites - so it has other advantages :)"}, {"owner": {"reputation": 344, "user_id": 4837005, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f8b7cffdd05664f7e3988486a381ba49?s=128&d=identicon&r=PG&f=1", "display_name": "Coolq B", "link": "https://stackoverflow.com/users/4837005/coolq-b"}, "edited": false, "score": 0, "creation_date": 1486019002, "post_id": 41991666, "comment_id": 71168733, "body": "ok, thanks anyway. :)"}], "tags": [], "owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "is_accepted": true, "score": 4, "last_activity_date": 1485998439, "last_edit_date": 1485998439, "creation_date": 1485991216, "answer_id": 41991666, "question_id": 41991343, "link": "https://stackoverflow.com/questions/41991343/pygame-how-to-move-many-sprites-at-the-same-time/41991666#41991666", "title": "PyGame - How to move many sprites at the same time?", "body": "<p>Move every alien from list with small \"step\". After that you start from the beginning. If you will repeat it in loop (mainloop) then it will look like all aliens move at the same time.</p>\n\n<pre><code># mainloop\n\nwhile True:\n\n   # events\n   # ....\n\n   # updates\n\n   for aline in aliens_group:\n       alien.rect.x += 1 # small move\n       # or \n       alien.update() # function have to do small move\n\n   # draws\n   # ...\n</code></pre>\n\n<hr>\n\n<p>BTW: if alien will have function <code>update()</code> and you will keep aliens in  <a href=\"http://pygame.org/docs/ref/sprite.html#pygame.sprite.Group\" rel=\"nofollow noreferrer\">pygame.sprite.Group</a> then you need only <code>group.update()</code> </p>\n\n<pre><code>class Alien:\n\n     def update(self):\n         self.rect.x += 1 # small move\n\n# init\n\naliens_group = pygame.sprite.Group()\n\nalien_1 = Alien()\nalien_2 = Alien()\n\naliens_group.app(alien_1, alien_2)\n\n# mainloop\n\nwhile True:\n\n   # events\n   # ....\n\n   # updates\n\n   aliens_group.update() # function have to do small move\n\n   # draws\n\n   aliens_group.draw()\n</code></pre>\n"}], "owner": {"reputation": 107, "user_id": 7363708, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b9fa2bb432d030d297b2b116ee5d46ff?s=128&d=identicon&r=PG&f=1", "display_name": "Computing Corn", "link": "https://stackoverflow.com/users/7363708/computing-corn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 811, "favorite_count": 0, "closed_date": 1486024554, "accepted_answer_id": 41991666, "answer_count": 2, "score": -2, "last_activity_date": 1485998439, "creation_date": 1485989533, "last_edit_date": 1485990690, "question_id": 41991343, "link": "https://stackoverflow.com/questions/41991343/pygame-how-to-move-many-sprites-at-the-same-time", "closed_reason": "Needs more focus", "title": "PyGame - How to move many sprites at the same time?", "body": "<p>Using PyGame, I created a sprite group for aliens in a space invaders style game. </p>\n\n<p>My question is how can I get the aliens to move at the same time? Each instance of an Alien is stored in a list.</p>\n"}, {"tags": ["python", "django"], "comments": [{"owner": {"reputation": 3594, "user_id": 5992118, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/21UQh.png?s=128&g=1", "display_name": "dahrens", "link": "https://stackoverflow.com/users/5992118/dahrens"}, "edited": false, "score": 0, "creation_date": 1485990246, "post_id": 41991333, "comment_id": 71160059, "body": "<b>This is off topic</b>: You should consider not to model a page. Content is a stream - you only need pages, when it comes to printing. Have a look at <a href=\"https://www.latex-project.org/\" rel=\"nofollow noreferrer\">LaTeX</a>."}, {"owner": {"reputation": 182, "user_id": 4052344, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/t7UDm.gif?s=128&g=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4052344/peter"}, "reply_to_user": {"reputation": 3594, "user_id": 5992118, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/21UQh.png?s=128&g=1", "display_name": "dahrens", "link": "https://stackoverflow.com/users/5992118/dahrens"}, "edited": false, "score": 0, "creation_date": 1485991326, "post_id": 41991333, "comment_id": 71160404, "body": "What do you mean content is a stream? I am not following. I am organizing my data this way for specific reasons. Would it be possible for you to help while operating within these parameters."}, {"owner": {"reputation": 3594, "user_id": 5992118, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/21UQh.png?s=128&g=1", "display_name": "dahrens", "link": "https://stackoverflow.com/users/5992118/dahrens"}, "edited": false, "score": 0, "creation_date": 1486019602, "post_id": 41991333, "comment_id": 71169038, "body": "As I told you, the comment was quite off topic - I just wanted to point out, that the model structure might lead to several problems. If you have good reasons to stick with it - just stick with it."}], "answers": [{"comments": [{"owner": {"reputation": 182, "user_id": 4052344, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/t7UDm.gif?s=128&g=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4052344/peter"}, "edited": false, "score": 0, "creation_date": 1485991662, "post_id": 41991723, "comment_id": 71160512, "body": "Great thanks! Would you suggest a better method. I am open to advice. I am just looking to make it so books and pages can be very modular."}, {"owner": {"reputation": 2330, "user_id": 1014508, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/e12d101bc96cf4f266bc5f1247d8c972?s=128&d=identicon&r=PG", "display_name": "mislavcimpersak", "link": "https://stackoverflow.com/users/1014508/mislavcimpersak"}, "reply_to_user": {"reputation": 182, "user_id": 4052344, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/t7UDm.gif?s=128&g=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4052344/peter"}, "edited": false, "score": 0, "creation_date": 1485992225, "post_id": 41991723, "comment_id": 71160697, "body": "Honestly, google around for some alternative way to save you book structure. This structure isn&#39;t very modular :D my answer is specific to your models and it works, but in the end it&#39;s on you how you will structure your data."}], "tags": [], "owner": {"reputation": 2330, "user_id": 1014508, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/e12d101bc96cf4f266bc5f1247d8c972?s=128&d=identicon&r=PG", "display_name": "mislavcimpersak", "link": "https://stackoverflow.com/users/1014508/mislavcimpersak"}, "is_accepted": false, "score": 0, "last_activity_date": 1485991457, "creation_date": 1485991457, "answer_id": 41991723, "question_id": 41991333, "link": "https://stackoverflow.com/questions/41991333/method-for-adding-sub-section-to-an-inline-admin-in-django/41991723#41991723", "title": "Method for adding sub-section to an inline admin in Django?", "body": "<p>If you want to keep the structure perhaps the easiest solution is to use <a href=\"https://github.com/s-block/django-nested-inline\" rel=\"nofollow noreferrer\">Django Nested Inline package</a> and thus keeping everything in one view.</p>\n\n<pre><code>from django.contrib import admin\n\nfrom nested_inline.admin import NestedStackedInline, NestedModelAdmin\n\nfrom .models import Textbook, Page, Section\n\n\nclass SectionInline(NestedStackedInline):\n    model = Section\n    extra = 1\n\n\nclass PageInline(NestedStackedInline):\n    model = Page\n    extra = 1\n    inlines = [SectionInline]\n\n\n@admin.register(Textbook)\nclass TextbookAdmin(NestedModelAdmin):\n    inlines = [PageInline]\n</code></pre>\n"}], "owner": {"reputation": 182, "user_id": 4052344, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/t7UDm.gif?s=128&g=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4052344/peter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 232, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1485991457, "creation_date": 1485989478, "question_id": 41991333, "link": "https://stackoverflow.com/questions/41991333/method-for-adding-sub-section-to-an-inline-admin-in-django", "title": "Method for adding sub-section to an inline admin in Django?", "body": "<p>So like the title says. I am building a book structure and I am looking to make it so when in the admin panel and editing a book object, one can view and add related pages to the book. The page itself also has related objects called sections that are essentially paragraph objects within the page object. </p>\n\n<p>My model is below:</p>\n\n<pre><code>class Textbook(models.Model):\n    founder = models.CharField(max_length=256)\n    title = models.CharField(max_length=256)\n    cover = models.ImageField(upload_to=get_image_path, blank=True, null=True)\n    def __str__(self):\n        return self.title\n\nclass Page(models.Model):\n    textbook = models.ForeignKey(Textbook,related_name=\"pages\")\n    page_title = models.CharField(max_length = 256)\n    page_num = models.IntegerField()\n    def __str__(self):\n        return self.page_title\n\nclass Section(models.Model):\n    page = models.ForeignKey(Page,related_name=\"sections\")\n    section_title = models.CharField(max_length=256)\n    text = models.TextField(max_length = 1024)\n    image = models.CharField(max_length = 256)\n    def __str__(self):\n        return self.section_title\n</code></pre>\n\n<p>Ideally there would be an add new page button within the textbook add/edit panel where I could then add section to that previously mentioned page.</p>\n\n<p>Current admin.py:</p>\n\n<pre><code>class PageInline(admin.TabularInline):\n    model = Page\n\nclass TextbookAdmin(admin.ModelAdmin):\n    inlines = [\n        PageInline,\n    ]\n\nadmin.site.register(Textbook,TextbookAdmin)\nadmin.site.register(Section)\n</code></pre>\n\n<p>Is there a currently built in method like a nest inline that could be used or I am just not thinking in the right mindset for Django? If this is not the proper or ideal way to structure this, what is the proper method?</p>\n"}, {"tags": ["python", "python-3.x", "pyqt", "pyqt4", "pyqt5"], "comments": [{"owner": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "edited": false, "score": 0, "creation_date": 1485989787, "post_id": 41991304, "comment_id": 71159875, "body": "Yes, it is possible. Perhaps you should try writing a small example (hint: use a <code>QLabel</code> for the image/button), and then come back if/when you have a more specific question."}], "answers": [{"tags": [], "owner": {"reputation": 93, "user_id": 5219630, "user_type": "registered", "profile_image": "https://graph.facebook.com/465589873610677/picture?type=large", "display_name": "da Vinci", "link": "https://stackoverflow.com/users/5219630/da-vinci"}, "is_accepted": true, "score": 0, "last_activity_date": 1486042026, "creation_date": 1486042026, "answer_id": 42003447, "question_id": 41991304, "link": "https://stackoverflow.com/questions/41991304/image-as-checkbox-in-python/42003447#42003447", "title": "Image as checkbox in Python", "body": "<p>Here is the solution for this challenge:</p>\n\n<pre><code>import sys\n\nfrom PyQt4 import QtCore\nfrom PyQt4.QtGui import *\n\n\ndef chk():\n    global button, checked\n\n    checked = not checked\n    ic = icon1 if checked else icon2\n    button.setIcon(ic)\n\napp = QApplication(sys.argv)\nwidget = QWidget()\nlayout = QHBoxLayout()\nwidget.setLayout(layout)\n\nchecked = True\nbutton = QPushButton()\nbutton.setFlat(True)\nbutton.clicked.connect(chk)\nbutton.setStyleSheet('border:none')\nlayout.addWidget(button)\n\nicon1 = QIcon(\"off.png\")\nicon2 = QIcon(\"on.png\")\nbutton.setIcon(icon1)\nbutton.setIconSize(QtCore.QSize(30, 30))\n\nwidget.show()\napp.exec_()\n</code></pre>\n"}], "owner": {"reputation": 93, "user_id": 5219630, "user_type": "registered", "profile_image": "https://graph.facebook.com/465589873610677/picture?type=large", "display_name": "da Vinci", "link": "https://stackoverflow.com/users/5219630/da-vinci"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 853, "favorite_count": 0, "accepted_answer_id": 42003447, "answer_count": 1, "score": -1, "last_activity_date": 1486042026, "creation_date": 1485989352, "question_id": 41991304, "link": "https://stackoverflow.com/questions/41991304/image-as-checkbox-in-python", "title": "Image as checkbox in Python", "body": "<p>Is it possible with Python to use image as a checkbox (in a GUI app made with PyQT)? For example, there is a image of a blue circle, and when you click on it, it becomes red.</p>\n"}, {"tags": ["python", "rhino3d"], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 7503089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/393484f92290896b2d0c9c7c234e8580?s=128&d=identicon&r=PG&f=1", "display_name": "Marc den H", "link": "https://stackoverflow.com/users/7503089/marc-den-h"}, "edited": false, "score": 0, "creation_date": 1485989921, "post_id": 41991335, "comment_id": 71159932, "body": "Thanks, but I can&#39;t use the variable &#39;count&#39; in the if-statement, because it will say that it isn&#39;t defined?"}], "tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": true, "score": 1, "last_activity_date": 1485990955, "last_edit_date": 1485990955, "creation_date": 1485989483, "answer_id": 41991335, "question_id": 41991301, "link": "https://stackoverflow.com/questions/41991301/else-statement-counter-within-function/41991335#41991335", "title": "Else statement counter within function", "body": "<p>Pass a counter in the recursive call, and print it when printing <code>Done</code></p>\n\n<pre><code>def conCir(pt, r, count=0):\n    if r &lt;= 0:\n        print \"Done\"\n        print count, \" circles were drawn\"\n    else:\n        rs.AddCircle(pt, r)\n        return conCir(pt, r-1, count+1)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3236, "user_id": 6876009, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/201968908078a1f1ea776c886d93631a?s=128&d=identicon&r=PG&f=1", "display_name": "f5r5e5d", "link": "https://stackoverflow.com/users/6876009/f5r5e5d"}, "is_accepted": false, "score": 0, "last_activity_date": 1485991194, "last_edit_date": 1485991194, "creation_date": 1485990884, "answer_id": 41991589, "question_id": 41991301, "link": "https://stackoverflow.com/questions/41991301/else-statement-counter-within-function/41991589#41991589", "title": "Else statement counter within function", "body": "<p>same as Barmar's answer, expanded debug printing</p>\n\n<p>Python 3 print()</p>\n\n<p>just printing instead of calling Circle for illustration</p>\n\n<p>added default var <code>count = 0</code> for the recursion</p>\n\n<pre><code>def conCir(pt, r, count = 0):\n    if r &lt;= 0:\n        print(\"Done\", 'count= ', count)\n    else:\n        print('AddinCircle ',pt, r) # rs.AddCircle(pt, r)\n        return conCir(pt, r-1, count + 1)\n\nconCir('fred', 5) # count default = 0, no need to enter in call\n\nAddinCircle  fred 5\nAddinCircle  fred 4\nAddinCircle  fred 3\nAddinCircle  fred 2\nAddinCircle  fred 1\nDone count=  5\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 7503089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/393484f92290896b2d0c9c7c234e8580?s=128&d=identicon&r=PG&f=1", "display_name": "Marc den H", "link": "https://stackoverflow.com/users/7503089/marc-den-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 41991335, "answer_count": 2, "score": 0, "last_activity_date": 1485991194, "creation_date": 1485989345, "question_id": 41991301, "link": "https://stackoverflow.com/questions/41991301/else-statement-counter-within-function", "title": "Else statement counter within function", "body": "<pre><code>import rhinoscriptsyntax as rs\n\ndef conCir(pt, r):\n    if r &lt;= 0:\n        print \"Done\"\n    else:\n        rs.AddCircle(pt, r)\n        return conCir(pt, r-1)\n\npt1 = rs.GetPoint(\"Pick First Point\")\npt2 = rs.GetPoint(\"Pick Second Point\")\nr = rs.Distance(pt1, pt2)\nconCir(pt1, r)\n</code></pre>\n\n<p>What I try is to make concentric circles, however, I can't figure out how to count the number of circles created. In an ideal situation, this counter is embedded within the function, but placing it on the first line makes it reset to 0 every time the function is called.</p>\n\n<p>To be clear, when finished the function needs to print \"Done\", count, \"circles were drawn.\"</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 1, "creation_date": 1485991721, "post_id": 41991244, "comment_id": 71160537, "body": "I don&#39;t understand where 12.14 comes from?"}, {"owner": {"reputation": 1034, "user_id": 920085, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/iRByx.jpg?s=128&g=1", "display_name": "krinker", "link": "https://stackoverflow.com/users/920085/krinker"}, "reply_to_user": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 0, "creation_date": 1486049056, "post_id": 41991244, "comment_id": 71187934, "body": "If you add all values available in first example and divide them, you will get 12.14"}, {"owner": {"reputation": 1034, "user_id": 920085, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/iRByx.jpg?s=128&g=1", "display_name": "krinker", "link": "https://stackoverflow.com/users/920085/krinker"}, "reply_to_user": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 0, "creation_date": 1486049085, "post_id": 41991244, "comment_id": 71187957, "body": "10+20+10+10+15+20 / 6 = 12.14"}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 1, "creation_date": 1486054823, "post_id": 41991244, "comment_id": 71191867, "body": "That&#39;s what I mean <code>(10+20+10+10+15+20) &#47; 6 != 12.14</code>"}, {"owner": {"reputation": 1034, "user_id": 920085, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/iRByx.jpg?s=128&g=1", "display_name": "krinker", "link": "https://stackoverflow.com/users/920085/krinker"}, "reply_to_user": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 0, "creation_date": 1486061659, "post_id": 41991244, "comment_id": 71195704, "body": "darn it... you are right, it is 14.16. I guess I copy/paste wrong value."}, {"owner": {"reputation": 1034, "user_id": 920085, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/iRByx.jpg?s=128&g=1", "display_name": "krinker", "link": "https://stackoverflow.com/users/920085/krinker"}, "reply_to_user": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 0, "creation_date": 1486061737, "post_id": 41991244, "comment_id": 71195754, "body": "corrected my question. thank you"}], "answers": [{"comments": [{"owner": {"reputation": 1034, "user_id": 920085, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/iRByx.jpg?s=128&g=1", "display_name": "krinker", "link": "https://stackoverflow.com/users/920085/krinker"}, "edited": false, "score": 0, "creation_date": 1486065038, "post_id": 42010296, "comment_id": 71197648, "body": "Thank you! Actually that&#39;s what I have done, but it felt too &quot;manual&quot;. I was hoping for more elegant way without having to rely on iloc and looping through."}], "tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": false, "score": 0, "last_activity_date": 1486065795, "last_edit_date": 1486065795, "creation_date": 1486062196, "answer_id": 42010296, "question_id": 41991244, "link": "https://stackoverflow.com/questions/41991244/pandas-calculate-the-average-over-all-of-the-columns-for-n-rolling-rows-at-a-ti/42010296#42010296", "title": "Pandas: Calculate the average over all of the columns for n rolling rows at a time", "body": "<p><code>np.nanmean</code> will average everything in a multi-dimensional array.</p>\n\n<pre><code>np.nanmean(df.values)\n\n14.166666666666666\n</code></pre>\n\n<p>Using this in a rolling 3 periods fashion, you could do this</p>\n\n<pre><code>pd.Series({df.index[i]: np.nanmean(df.iloc[i-2:i+1].values) for i in range(2, len(df))})\n\n2    14.166667\ndtype: float64\n</code></pre>\n\n<hr>\n"}], "owner": {"reputation": 1034, "user_id": 920085, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/iRByx.jpg?s=128&g=1", "display_name": "krinker", "link": "https://stackoverflow.com/users/920085/krinker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 333, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1486065795, "creation_date": 1485989050, "last_edit_date": 1486061699, "question_id": 41991244, "link": "https://stackoverflow.com/questions/41991244/pandas-calculate-the-average-over-all-of-the-columns-for-n-rolling-rows-at-a-ti", "title": "Pandas: Calculate the average over all of the columns for n rolling rows at a time", "body": "<p>What I am trying to do is this... I have time series and I want to calculate rolling average, for n rows across multiple columns. \nWhat I did initially was to make another column that would contain average for each row and then do your standard rolling average for n rows.\nHowever, when I don't have values in some of the columns that throws off my calculations.</p>\n\n<p>Example:</p>\n\n<pre><code>Col1 | Col2 | Col3 | Avg\n10   | 20   |      | 15\n     | 10   |      | 10\n10   | 15   |  20  | 15\n</code></pre>\n\n<p>Rolling average of Avg: <code>13.33</code></p>\n\n<p>While it should be: <code>14.16</code></p>\n\n<p>Here is the example that worked for me that has all the numbers...</p>\n\n<pre><code>Col1 | Col2 | Col3 | Avg \n10   | 20   |   15 | 15\n10   | 10   |   10 | 10\n10   | 15   |   20 | 15\n</code></pre>\n\n<p>Rolling average of Avg: <code>13.33</code></p>\n\n<p>While it should be: <code>13.33</code></p>\n\n<p>What I can do is a manual loop... I also can add second column that would contain number of elements in each row.</p>\n\n<p>But is there a better way to do it?</p>\n"}, {"tags": ["python", "google-trends"], "comments": [{"owner": {"reputation": 8411, "user_id": 2399775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29a2523b23d09e0bfc15d3a77e505271?s=128&d=identicon&r=PG", "display_name": "wpercy", "link": "https://stackoverflow.com/users/2399775/wpercy"}, "edited": false, "score": 0, "creation_date": 1485989366, "post_id": 41991213, "comment_id": 71159702, "body": "The issue you link claims it will be fixed in the next release (comment was 7 days ago, idk what version you&#39;re using)"}, {"owner": {"reputation": 897, "user_id": 3477160, "user_type": "registered", "accept_rate": 64, "profile_image": "https://graph.facebook.com/100006652151783/picture?type=large", "display_name": "Chiranga Alwis", "link": "https://stackoverflow.com/users/3477160/chiranga-alwis"}, "reply_to_user": {"reputation": 8411, "user_id": 2399775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29a2523b23d09e0bfc15d3a77e505271?s=128&d=identicon&r=PG", "display_name": "wpercy", "link": "https://stackoverflow.com/users/2399775/wpercy"}, "edited": false, "score": 0, "creation_date": 1485989550, "post_id": 41991213, "comment_id": 71159774, "body": "It is version 3.2.0"}], "answers": [{"comments": [{"owner": {"reputation": 897, "user_id": 3477160, "user_type": "registered", "accept_rate": 64, "profile_image": "https://graph.facebook.com/100006652151783/picture?type=large", "display_name": "Chiranga Alwis", "link": "https://stackoverflow.com/users/3477160/chiranga-alwis"}, "edited": false, "score": 1, "creation_date": 1485989604, "post_id": 41991294, "comment_id": 71159795, "body": "I&#39;ll try this out and notify. Thanks."}, {"owner": {"reputation": 897, "user_id": 3477160, "user_type": "registered", "accept_rate": 64, "profile_image": "https://graph.facebook.com/100006652151783/picture?type=large", "display_name": "Chiranga Alwis", "link": "https://stackoverflow.com/users/3477160/chiranga-alwis"}, "edited": false, "score": 1, "creation_date": 1486059196, "post_id": 41991294, "comment_id": 71194434, "body": "Sorry, for the delayed response but it seems to be working fine with this solution. Thanks, once again."}], "tags": [], "owner": {"reputation": 49533, "user_id": 1057429, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XG8at.jpg?s=128&g=1", "display_name": "Nir Alfasi", "link": "https://stackoverflow.com/users/1057429/nir-alfasi"}, "is_accepted": true, "score": 3, "last_activity_date": 1485989316, "creation_date": 1485989316, "answer_id": 41991294, "question_id": 41991213, "link": "https://stackoverflow.com/questions/41991213/google-trends-error-sorry-our-systems-are-a-little-stressed-out-right-now-and/41991294#41991294", "title": "Google Trends error: Sorry, our systems are a little stressed out right now and need to take a deep breath", "body": "<p>The term is called <a href=\"https://en.wikipedia.org/wiki/Load_Shedding\" rel=\"nofollow noreferrer\">load shedding</a>: it means that google servers are smart enough to recognize when they get a load they can't handle (too many requests) so they start dropping some of them \"on the floor\" (meaning, respond with the error you're seeing, instead of processing it properly).</p>\n\n<p>The way to deal with it from the client-side (your code) is to implement a retry mechanism with an <a href=\"https://en.wikipedia.org/wiki/Exponential_backoff\" rel=\"nofollow noreferrer\">exponential backoff</a> sleep in between retries.</p>\n\n<p>You can see more about their SLA in <a href=\"https://cloud.google.com/prediction/sla\" rel=\"nofollow noreferrer\">their docs</a>.</p>\n"}], "owner": {"reputation": 897, "user_id": 3477160, "user_type": "registered", "accept_rate": 64, "profile_image": "https://graph.facebook.com/100006652151783/picture?type=large", "display_name": "Chiranga Alwis", "link": "https://stackoverflow.com/users/3477160/chiranga-alwis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 394, "favorite_count": 0, "accepted_answer_id": 41991294, "answer_count": 1, "score": 1, "last_activity_date": 1485989316, "creation_date": 1485988955, "question_id": 41991213, "link": "https://stackoverflow.com/questions/41991213/google-trends-error-sorry-our-systems-are-a-little-stressed-out-right-now-and", "title": "Google Trends error: Sorry, our systems are a little stressed out right now and need to take a deep breath", "body": "<p>I have been working with Google Trends recently using Python's pytrends. And I have been experiencing the following error during random requests:</p>\n\n<pre><code>Response did not parse. See server response for details.\nSorry, our systems are a little stressed out right now and need to take a deep breath. Please try again in a few moments.\n</code></pre>\n\n<p>Upon searching I discovered that this was related to the Google Trends Quota limits. For example, <a href=\"https://github.com/GeneralMills/pytrends/issues/66\" rel=\"nofollow noreferrer\">this</a> discusses about the mentioned issue.</p>\n\n<p>But in my case, I have been experiencing this even during my first request after a long period of time and I continue to get it several times until I finally get a proper response. A successful response occurs once in around 5 requests, whereas the rest are erroneous.</p>\n\n<p>Note: it has to be noted that I came across this issue only today although I never came across this when I used Google Trends during the last two days.</p>\n\n<p>The associated code fragments are as follows:</p>\n\n<pre><code>    pytrends = get_pytrends()\n    payload = {'q': 'chelsea', 'date' : 'now 12-H'}\n    print(json.dumps(pytrends.trend(payload, return_type='json'), indent=4))\n</code></pre>\n\n<p>get_pytrends()</p>\n\n<pre><code>def get_pytrends():\n\n    try:\n        google_username = os.environ['GOOGLE_USERNAME']\n        google_password = os.environ['GOOGLE_SECRET']\n    except KeyError:\n        sys.stderr.write(\"GOOGLE_* environment variables not set\\n\")\n        sys.exit(1)\n\n    pytrends = TrendReq(google_username, google_password, custom_useragent=None)\n\n    return pytrends\n</code></pre>\n\n<p>What causes this issue and how should I handle it?</p>\n"}, {"tags": ["python", "arrays", "string", "writing"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1485988975, "post_id": 41991194, "comment_id": 71159560, "body": "What problem are you having?"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1485988987, "post_id": 41991194, "comment_id": 71159570, "body": "You haven&#39;t listed what you have tried. If you don&#39;t identify your misunderstanding then no answer can clear it up for you properly."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1485988999, "post_id": 41991194, "comment_id": 71159576, "body": "<a href=\"http://www.pythonforbeginners.com/files/reading-and-writing-files-in-python\" rel=\"nofollow noreferrer\">pythonforbeginners.com/files/&hellip;</a>"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1485989013, "post_id": 41991194, "comment_id": 71159579, "body": "Welcome to StackOverflow.  Please read and follow the posting guidelines in the help documentation.  <a href=\"http://stackoverflow.com/help/on-topic\">on topic</a> and <a href=\"http://stackoverflow.com/help/how-to-ask\">how to ask</a> apply here. StackOverflow is not a coding or tutorial service."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 1, "creation_date": 1485989249, "post_id": 41991194, "comment_id": 71159659, "body": "People answering: please do <i>not</i> encourage posters to use Stack Overflow in lieu of basic research."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1485989652, "post_id": 41991194, "comment_id": 71159809, "body": "<code>a</code> is called a list in Python."}], "answers": [{"comments": [{"owner": {"reputation": 1453, "user_id": 4932791, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/P5G5H.jpg?s=128&g=1", "display_name": "kRazzy R", "link": "https://stackoverflow.com/users/4932791/krazzy-r"}, "edited": false, "score": 0, "creation_date": 1515097512, "post_id": 41991250, "comment_id": 83181422, "body": "I got TypeError: array([ 0.,  0.,  0., ...,  2.,  2.,  2.]) is not JSON serializable"}], "tags": [], "owner": {"reputation": 1446, "user_id": 7491302, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55ed578eeae7d2391579f475bbe86fa8?s=128&d=identicon&r=PG&f=1", "display_name": "Tristan", "link": "https://stackoverflow.com/users/7491302/tristan"}, "is_accepted": false, "score": 4, "last_activity_date": 1485989084, "creation_date": 1485989084, "answer_id": 41991250, "question_id": 41991194, "link": "https://stackoverflow.com/questions/41991194/write-a-basic-array-to-a-txt-file/41991250#41991250", "title": "Write a basic array to a txt file?", "body": "<p>With <code>json.dump</code> you can easily save python lists or dictionaries to file and reopen it with <code>json.load</code> later on.</p>\n\n<pre><code>import json\na = [\"hello\", \"world\"]\nwith open(\"output.txt\", \"w\") as outfile:\n    json.dump(a, outfile)\n</code></pre>\n\n<p>To load the array from file again:</p>\n\n<pre><code>import json\nwith open(\"output.txt\", \"r\") as infile:\n    a = json.load(infile)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 344, "user_id": 4837005, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f8b7cffdd05664f7e3988486a381ba49?s=128&d=identicon&r=PG&f=1", "display_name": "Coolq B", "link": "https://stackoverflow.com/users/4837005/coolq-b"}, "reply_to_user": {"reputation": 19411, "user_id": 6640099, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/tf1sO.jpg?s=128&g=1", "display_name": "Christian Dean", "link": "https://stackoverflow.com/users/6640099/christian-dean"}, "edited": false, "score": 0, "creation_date": 1485989422, "post_id": 41991271, "comment_id": 71159720, "body": "edited. Thanks leaf."}, {"owner": {"reputation": 129, "user_id": 5587676, "user_type": "registered", "profile_image": "https://graph.facebook.com/561340694021445/picture?type=large", "display_name": "Ben Hughes", "link": "https://stackoverflow.com/users/5587676/ben-hughes"}, "edited": false, "score": 0, "creation_date": 1485989433, "post_id": 41991271, "comment_id": 71159729, "body": "thanks :) I&#39;ll try this"}, {"owner": {"reputation": 344, "user_id": 4837005, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f8b7cffdd05664f7e3988486a381ba49?s=128&d=identicon&r=PG&f=1", "display_name": "Coolq B", "link": "https://stackoverflow.com/users/4837005/coolq-b"}, "reply_to_user": {"reputation": 129, "user_id": 5587676, "user_type": "registered", "profile_image": "https://graph.facebook.com/561340694021445/picture?type=large", "display_name": "Ben Hughes", "link": "https://stackoverflow.com/users/5587676/ben-hughes"}, "edited": false, "score": 0, "creation_date": 1485989512, "post_id": 41991271, "comment_id": 71159755, "body": "Thanks for your consideration :) Helps me out a lot!"}], "tags": [], "owner": {"reputation": 344, "user_id": 4837005, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f8b7cffdd05664f7e3988486a381ba49?s=128&d=identicon&r=PG&f=1", "display_name": "Coolq B", "link": "https://stackoverflow.com/users/4837005/coolq-b"}, "is_accepted": false, "score": 1, "last_activity_date": 1485989508, "last_edit_date": 1485989508, "creation_date": 1485989186, "answer_id": 41991271, "question_id": 41991194, "link": "https://stackoverflow.com/questions/41991194/write-a-basic-array-to-a-txt-file/41991271#41991271", "title": "Write a basic array to a txt file?", "body": "<p>Or even simpler you can merge a list with: <code>''.join(array)</code></p>\n\n<p>This requires little iterations, using built-in functions usually means better performance, built-in functions are usually written in C. It also requires no modules.</p>\n\n<p>Here's an example</p>\n\n<pre><code>a = [\"hello\",\"stack overflow\"]\n\na_merged = ' '.join(a)\nwith open(\"array.txt\",'w') as f:\n    f.write(a_merged)\n</code></pre>\n"}], "owner": {"reputation": 129, "user_id": 5587676, "user_type": "registered", "profile_image": "https://graph.facebook.com/561340694021445/picture?type=large", "display_name": "Ben Hughes", "link": "https://stackoverflow.com/users/5587676/ben-hughes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9810, "favorite_count": 3, "closed_date": 1485989660, "answer_count": 2, "score": 0, "last_activity_date": 1485989555, "creation_date": 1485988857, "last_edit_date": 1485989555, "question_id": 41991194, "link": "https://stackoverflow.com/questions/41991194/write-a-basic-array-to-a-txt-file", "closed_reason": "Needs more focus", "title": "Write a basic array to a txt file?", "body": "<p>I've been really struggling with the simple task of writing python arrays to a txt file.</p>\n\n<p>Let's say I have an array</p>\n\n<pre><code>a = [\"hello\", \"stack overflow\"]\n</code></pre>\n\n<p>I need a way of getting a text file (array.txt) to save this array - I am not bothered in what format it is saved:</p>\n\n<pre><code>\"hello\" \"stack overflow\"\n</code></pre>\n\n<p>Perhaps it is easier to convert it to string and then write to array.txt. In which case how would I write:</p>\n\n<pre><code>a = \"hello stack overflow\"\n</code></pre>\n\n<p>to array.txt.</p>\n"}, {"tags": ["python", "numpy"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1485988901, "post_id": 41991173, "comment_id": 71159528, "body": "Do you mean you want to do this at construction immediately?"}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1485989252, "post_id": 41991173, "comment_id": 71159661, "body": "@WillemVanOnsem I think my answer is yes."}], "answers": [{"tags": [], "owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "is_accepted": true, "score": 2, "last_activity_date": 1485992291, "last_edit_date": 1485992291, "creation_date": 1485989983, "answer_id": 41991425, "question_id": 41991173, "link": "https://stackoverflow.com/questions/41991173/fill-diagonal-on-each-slice-along-axis-using-strides/41991425#41991425", "title": "fill diagonal on each slice along axis using strides", "body": "<p>Here's an approach with <a href=\"http://www.scipy-lectures.org/advanced/advanced_numpy/#indexing-scheme-strides\" rel=\"nofollow noreferrer\"><code>strides</code></a> -</p>\n\n<pre><code>def fill_diag_strided(a, fillval):\n    m,n,r = a.strides\n    a_diag = np.lib.stride_tricks.as_strided(a, shape=a.shape[:2],strides=(m,r+n))\n    a_diag[:] = fillval\n</code></pre>\n\n<p>Sample run -</p>\n\n<pre><code>In [369]: a\nOut[369]: \narray([[[ 0,  1,  2],\n        [ 3,  4,  5],\n        [ 6,  7,  8]],\n\n       [[ 9, 10, 11],\n        [12, 13, 14],\n        [15, 16, 17]]])\n\nIn [370]: fill_diag_strided(a, fillval=-1)\n\nIn [371]: a\nOut[371]: \narray([[[-1,  1,  2],\n        [ 3, -1,  5],\n        [ 6,  7, -1]],\n\n       [[-1, 10, 11],\n        [12, -1, 14],\n        [15, 16, -1]]])\n</code></pre>\n\n<p>Runtime test against an indexing-based approach -</p>\n\n<pre><code>In [35]: a = np.random.rand(100000,3,3)\n\nIn [36]: n = a.shape[1]\n\nIn [37]: %timeit a[:, np.arange(n), np.arange(n)] = -1\n100 loops, best of 3: 4.45 ms per loop\n\nIn [38]: %timeit fill_diag_strided(a, fillval=-1)\n1000 loops, best of 3: 1.76 ms per loop\n</code></pre>\n"}], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 143, "favorite_count": 1, "accepted_answer_id": 41991425, "answer_count": 1, "score": 2, "last_activity_date": 1485992291, "creation_date": 1485988798, "last_edit_date": 1495535367, "question_id": 41991173, "link": "https://stackoverflow.com/questions/41991173/fill-diagonal-on-each-slice-along-axis-using-strides", "title": "fill diagonal on each slice along axis using strides", "body": "<p>consider the numpy array <code>a</code></p>\n\n<pre><code>a = np.arange(18).reshape(2, 3, 3)\nprint(a)\n\n[[[ 0  1  2]\n  [ 3  4  5]\n  [ 6  7  8]]\n\n [[ 9 10 11]\n  [12 13 14]\n  [15 16 17]]]\n</code></pre>\n\n<p>I want to fill in the diagonal of each slice along <code>axis=0</code><br>\nI accomplished this using <a href=\"https://stackoverflow.com/a/41915757/2336654\">this answer</a></p>\n\n<pre><code>a[:, np.arange(3), np.arange(3)] = -1\n\nprint(a)\n\n[[[-1  1  2]\n  [ 3 -1  5]\n  [ 6  7 -1]]\n\n [[-1 10 11]\n  [12 -1 14]\n  [15 16 -1]]]\n</code></pre>\n\n<p>How could I have done this using strides?</p>\n"}, {"tags": ["python", "cookies", "scrapy", "login-script"], "comments": [{"owner": {"reputation": 19115, "user_id": 2572383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a475c78c46b48609cf6b3b3e082f6d4?s=128&d=identicon&r=PG", "display_name": "paul trmbrth", "link": "https://stackoverflow.com/users/2572383/paul-trmbrth"}, "edited": false, "score": 0, "creation_date": 1486028088, "post_id": 41991170, "comment_id": 71173780, "body": "Have you checked in your browser of choice what HTTP headers and cookie values are sent? What&#39;s the difference with what Scrapy is sending? Is there some JavaScript involved?"}, {"owner": {"reputation": 1, "user_id": 7437888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8a3133a1daeca085e3f3f72beda5e56?s=128&d=identicon&r=PG&f=1", "display_name": "Julien", "link": "https://stackoverflow.com/users/7437888/julien"}, "reply_to_user": {"reputation": 19115, "user_id": 2572383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a475c78c46b48609cf6b3b3e082f6d4?s=128&d=identicon&r=PG", "display_name": "paul trmbrth", "link": "https://stackoverflow.com/users/2572383/paul-trmbrth"}, "edited": false, "score": 0, "creation_date": 1486085842, "post_id": 41991170, "comment_id": 71205876, "body": "On Safari, when I open the login page, I get this cookie: Name = gotCookies, value=Yes. But this cookie does not appear in the log with Scrapy. If I delete this cookie on Safari then the site complains about enabling cookies, but then puts the gotCookies cookie. So for some reason, Scrapy misses that cookie?..."}, {"owner": {"reputation": 1, "user_id": 7437888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8a3133a1daeca085e3f3f72beda5e56?s=128&d=identicon&r=PG&f=1", "display_name": "Julien", "link": "https://stackoverflow.com/users/7437888/julien"}, "reply_to_user": {"reputation": 19115, "user_id": 2572383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a475c78c46b48609cf6b3b3e082f6d4?s=128&d=identicon&r=PG", "display_name": "paul trmbrth", "link": "https://stackoverflow.com/users/2572383/paul-trmbrth"}, "edited": false, "score": 0, "creation_date": 1486104041, "post_id": 41991170, "comment_id": 71210853, "body": "SOLVED: I send the cookie {&#39;gotCookies&#39;:&#39;Yes&#39;} with the first request to the login page, and now everything works. Thanks for the suggestion to look at the cookies from a browser!"}], "owner": {"reputation": 1, "user_id": 7437888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8a3133a1daeca085e3f3f72beda5e56?s=128&d=identicon&r=PG&f=1", "display_name": "Julien", "link": "https://stackoverflow.com/users/7437888/julien"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 349, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1485988786, "creation_date": 1485988786, "question_id": 41991170, "link": "https://stackoverflow.com/questions/41991170/scrapy-login-fails-with-cookie-not-enabled-error-cookies-are-enabled", "title": "scrapy login fails with cookie not enabled error (cookies ARE enabled)", "body": "<p>I tried to use scrapy to access this site with login: <a href=\"http://vietmessenger.com/cgi-bin/signin.cgi\" rel=\"nofollow noreferrer\">http://vietmessenger.com/cgi-bin/signin.cgi</a></p>\n\n<p>I use this scrapy python code to login before I scrape the site. However, even after trying many different ways, I always get this error (in response.body):\nERROR:: Set your browser to accept <b>cookies</b>, reload and try again..</p>\n\n<p>I can confirm that if I disable cookies in my Safari browser, I get the same error. I appreciate your help, I do not know what else to try.</p>\n\n<pre><code>import scrapy\nimport re\nimport pickle\nfrom scrapy.http import FormRequest\n\n\nclass LoginSpider(scrapy.Spider):\n    name = \"ebooks\"\n    start_urls = [\"http://vietmessenger.com/cgi-bin/signin.cgi\"]\n\n    def parse(self, response):\n      formdata = {\"MEMBERID\":\"userid\", \"PASSWORD\":\"password\"}\n      yield FormRequest.from_response(\n          response,\n          formdata = formdata,\n          callback = self.after_login)\n\n    def after_login(self, response): \n        #check if login is successful\n        print(response.status)\n        if b'ERROR::' in response.body:\n            self.logger.error('login failed')\n            return\n</code></pre>\n\n<p>Here is the log:</p>\n\n<pre><code>$ scrapy crawl ebooks\n2017-02-01 14:01:32 [scrapy.utils.log] INFO: Scrapy 1.3.0 started (bot: tutorial)\n2017-02-01 14:01:32 [scrapy.utils.log] INFO: Overridden settings: {'BOT_NAME': 'tutorial', 'NEWSPIDER_MODULE': 'tutorial.spiders', 'SPIDER_MODULES': ['tutorial.spiders'], 'ROBOTSTXT_OBEY': True, 'COOKIES_DEBUG': True}\n2017-02-01 14:01:32 [scrapy.middleware] INFO: Enabled extensions:\n['scrapy.extensions.telnet.TelnetConsole',\n 'scrapy.extensions.logstats.LogStats',\n 'scrapy.extensions.corestats.CoreStats']\n2017-02-01 14:01:32 [scrapy.middleware] INFO: Enabled downloader middlewares:\n['scrapy.downloadermiddlewares.robotstxt.RobotsTxtMiddleware',\n 'scrapy.downloadermiddlewares.httpauth.HttpAuthMiddleware',\n 'scrapy.downloadermiddlewares.downloadtimeout.DownloadTimeoutMiddleware',\n 'scrapy.downloadermiddlewares.defaultheaders.DefaultHeadersMiddleware',\n 'scrapy.downloadermiddlewares.useragent.UserAgentMiddleware',\n 'scrapy.downloadermiddlewares.retry.RetryMiddleware',\n 'scrapy.downloadermiddlewares.redirect.MetaRefreshMiddleware',\n 'scrapy.downloadermiddlewares.httpcompression.HttpCompressionMiddleware',\n 'scrapy.downloadermiddlewares.redirect.RedirectMiddleware',\n 'scrapy.downloadermiddlewares.cookies.CookiesMiddleware',\n 'scrapy.downloadermiddlewares.stats.DownloaderStats']\n2017-02-01 14:01:32 [scrapy.middleware] INFO: Enabled spider middlewares:\n['scrapy.spidermiddlewares.httperror.HttpErrorMiddleware',\n 'scrapy.spidermiddlewares.offsite.OffsiteMiddleware',\n 'scrapy.spidermiddlewares.referer.RefererMiddleware',\n 'scrapy.spidermiddlewares.urllength.UrlLengthMiddleware',\n 'scrapy.spidermiddlewares.depth.DepthMiddleware']\n2017-02-01 14:01:32 [scrapy.middleware] INFO: Enabled item pipelines:\n[]\n2017-02-01 14:01:32 [scrapy.core.engine] INFO: Spider opened\n2017-02-01 14:01:32 [scrapy.extensions.logstats] INFO: Crawled 0 pages (at 0 pages/min), scraped 0 items (at 0 items/min)\n2017-02-01 14:01:32 [scrapy.extensions.telnet] DEBUG: Telnet console listening on 127.0.0.1:6023\n2017-02-01 14:01:32 [scrapy.core.engine] DEBUG: Crawled (200) &lt;GET http://vietmessenger.com/robots.txt&gt; (referer: None)\n2017-02-01 14:01:32 [scrapy.downloadermiddlewares.cookies] DEBUG: Received cookies from: &lt;200 http://vietmessenger.com/cgi-bin/signin.cgi&gt;\nSet-Cookie: REFERER=; path=/; domain=vietmessenger.com;\n\n2017-02-01 14:01:32 [scrapy.core.engine] DEBUG: Crawled (200) &lt;GET http://vietmessenger.com/cgi-bin/signin.cgi&gt; (referer: None)\n2017-02-01 14:01:32 [scrapy.downloadermiddlewares.cookies] DEBUG: Sending cookies to: &lt;POST http://vietmessenger.com/cgi-bin/signin.cgi&gt;\nCookie: REFERER=\n\n2017-02-01 14:01:33 [scrapy.downloadermiddlewares.cookies] DEBUG: Received cookies from: &lt;200 http://vietmessenger.com/cgi-bin/signin.cgi&gt;\nSet-Cookie: REFERER=http://vietmessenger.com/cgi-bin/signin.cgi; path=/; domain=vietmessenger.com;\n\n2017-02-01 14:01:33 [scrapy.core.engine] DEBUG: Crawled (200) &lt;POST http://vietmessenger.com/cgi-bin/signin.cgi&gt; (referer: http://vietmessenger.com/cgi-bin/signin.cgi)\n200\n2017-02-01 14:01:33 [ebooks] ERROR: login failed\n2017-02-01 14:01:33 [scrapy.core.engine] INFO: Closing spider (finished)\n2017-02-01 14:01:33 [scrapy.statscollectors] INFO: Dumping Scrapy stats:\n{'downloader/request_bytes': 932,\n 'downloader/request_count': 3,\n 'downloader/request_method_count/GET': 2,\n 'downloader/request_method_count/POST': 1,\n 'downloader/response_bytes': 11490,\n 'downloader/response_count': 3,\n 'downloader/response_status_count/200': 3,\n 'finish_reason': 'finished',\n 'finish_time': datetime.datetime(2017, 2, 1, 22, 1, 33, 276611),\n 'log_count/DEBUG': 7,\n 'log_count/ERROR': 1,\n 'log_count/INFO': 7,\n 'request_depth_max': 1,\n 'response_received_count': 3,\n 'scheduler/dequeued': 2,\n 'scheduler/dequeued/memory': 2,\n 'scheduler/enqueued': 2,\n 'scheduler/enqueued/memory': 2,\n 'start_time': datetime.datetime(2017, 2, 1, 22, 1, 32, 620411)}\n2017-02-01 14:01:33 [scrapy.core.engine] INFO: Spider closed (finished)\n</code></pre>\n"}, {"tags": ["python", "numpy", "matplotlib", "scipy"], "comments": [{"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1485990506, "post_id": 41991156, "comment_id": 71160151, "body": "In order to use <code>imshow</code> the data must be equally spaced on a grid. Is this the case? Can you tell us more how your data is structured in the columns?"}, {"owner": {"reputation": 33, "user_id": 7316134, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/42b24b39fb7f1b44ea47c404dbf2cf19?s=128&d=identicon&r=PG&f=1", "display_name": "raju bhai", "link": "https://stackoverflow.com/users/7316134/raju-bhai"}, "reply_to_user": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1486029878, "post_id": 41991156, "comment_id": 71174926, "body": "The data structure is like this                                                                   array([[ 0.19975574,  0.10402092,  0.00029645],        [ 0.19975574,  0.10727158,  0.00029645],        [ 0.19975574,  0.11052223,  0.00029645],        [ 0.19975574,  0.11377289,  0.00029645],        [ 0.19975574,  0.11702354,  0.00029645],        [ 0.19975574,  0.12027419,  0.00029645],        [ 0.19975574,  0.12352485,  0.00029645],        [ 0.19975574,  0.1267755 ,  0.00029645],        [ 0.19975574,  0.13002616,  0.00029645],        [ 0.19975574,  0.13327681,  0.00029645],...........])"}, {"owner": {"reputation": 33, "user_id": 7316134, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/42b24b39fb7f1b44ea47c404dbf2cf19?s=128&d=identicon&r=PG&f=1", "display_name": "raju bhai", "link": "https://stackoverflow.com/users/7316134/raju-bhai"}, "reply_to_user": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1486029995, "post_id": 41991156, "comment_id": 71175006, "body": "the data is scaled to have unit variance in each axis.. So the data looks above."}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1486030303, "post_id": 41991156, "comment_id": 71175238, "body": "don&#39;t put your data into the comments. Also you can answer questions from the comment section simply by editing your question. Showing the original data makes things a bit complicated. To see the structure, use some other data, in the sense of a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}], "answers": [{"comments": [{"owner": {"reputation": 2068, "user_id": 4028706, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/IdPXD.jpg?s=128&g=1", "display_name": "wgwz", "link": "https://stackoverflow.com/users/4028706/wgwz"}, "edited": false, "score": 0, "creation_date": 1488725768, "post_id": 42093782, "comment_id": 72348992, "body": "Note if you get a black screen with no markers, there&#39;s an issue in vispy: <a href=\"https://github.com/vispy/vispy/issues/1085\" rel=\"nofollow noreferrer\">github.com/vispy/vispy/issues/1085</a>"}, {"owner": {"reputation": 2145, "user_id": 5257450, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/eccdf31878110f7e03a2bd4fd359550e?s=128&d=identicon&r=PG&f=1", "display_name": "xxx222", "link": "https://stackoverflow.com/users/5257450/xxx222"}, "edited": false, "score": 0, "creation_date": 1500936407, "post_id": 42093782, "comment_id": 77544848, "body": "Hi there, I run this code on ipython notebook and I received nothing. Do you know what is the issue?"}, {"owner": {"reputation": 749, "user_id": 7511261, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-X3gXeJt0BjA/AAAAAAAAAAI/AAAAAAAAAEc/r8QZfl2v5mI/photo.jpg?sz=128", "display_name": "Alexandre Kempf", "link": "https://stackoverflow.com/users/7511261/alexandre-kempf"}, "edited": false, "score": 0, "creation_date": 1500938632, "post_id": 42093782, "comment_id": 77545400, "body": "Try to launch it as a python script and not as a ipython notebook :)"}], "tags": [], "owner": {"reputation": 749, "user_id": 7511261, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-X3gXeJt0BjA/AAAAAAAAAAI/AAAAAAAAAEc/r8QZfl2v5mI/photo.jpg?sz=128", "display_name": "Alexandre Kempf", "link": "https://stackoverflow.com/users/7511261/alexandre-kempf"}, "is_accepted": false, "score": 2, "last_activity_date": 1486481612, "creation_date": 1486481612, "answer_id": 42093782, "question_id": 41991156, "link": "https://stackoverflow.com/questions/41991156/plotting-data-with-thousands-of-points-and-its-labelgroup-with-matplotlib/42093782#42093782", "title": "plotting data with thousands of points and its label(group) with matplotlib", "body": "<p>The scatter function in matlplotlib is quiet slow, I would recommend to use vispy that use the GPU to plot a large number of points :</p>\n\n<p>Works with vispy 0.4.0 that you can install with pip or conda :</p>\n\n<pre><code>pip install vispy\n</code></pre>\n\n<p>Here is the code (plotted in less than 2sec on my computer):</p>\n\n<pre><code>import numpy as np\nfrom vispy import scene, visuals, app\nimport matplotlib.pyplot as plt\n\ndata = np.random.random((500000,3))\n\ncanvas = scene.SceneCanvas(keys='interactive', show=True)\nview = canvas.central_widget.add_view()\n# Create the scatter plot\nscatter = scene.visuals.Markers()\nscatter.set_data(data[:,:2], face_color=plt.cm.jet(data[:,2]))\nview.add(scatter)\nview.camera = scene.PanZoomCamera(aspect=1)\nview.camera.set_range()\napp.run()\n</code></pre>\n\n<p>there is a nice documentation for vispy and you can customize your plot in the <code>set_data</code> function with arguments like <strong>face_color, edge_color, size, edge_width, symbol ...</strong></p>\n\n<p>Good luck with your data visualization ;)</p>\n"}], "owner": {"reputation": 33, "user_id": 7316134, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/42b24b39fb7f1b44ea47c404dbf2cf19?s=128&d=identicon&r=PG&f=1", "display_name": "raju bhai", "link": "https://stackoverflow.com/users/7316134/raju-bhai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1560, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1486481612, "creation_date": 1485988734, "last_edit_date": 1485990423, "question_id": 41991156, "link": "https://stackoverflow.com/questions/41991156/plotting-data-with-thousands-of-points-and-its-labelgroup-with-matplotlib", "title": "plotting data with thousands of points and its label(group) with matplotlib", "body": "<p>I have an array of 500000 samples i.e., the data's shape is <code>(500000, 3)</code> where the first two columns represent x-coordinate and y- coordinate, and the third column is Label values to which the datapoint @ (X,Y) belongs.</p>\n\n<p>for example:- <code>data= [ [20,10, 12.3320], [22, 13, 230.221],.....[..] ]</code></p>\n\n<p>I tried the below method. But this is too time consuming and poorly interpreted.</p>\n\n<pre><code>import matplotlib.pyplot as plt\n\ncolors = 10*['r.','g.','b.','c.','k.','y.','m.']\n\nfor i in range(len(labels)):\n    plt.scatter(data[i][0], data[i][1], colors[labels[i]],marker='.')\n\nplt.show()\n</code></pre>\n\n<p>Is there any other method like <code>imshow()</code> or other which is suitable for the above code which leads  to good interpretation?</p>\n"}, {"tags": ["java", "python", "stdout"], "comments": [{"owner": {"reputation": 723, "user_id": 7355135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3f6d3d11cda07d8b738e4380118ed2f?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/7355135/alex"}, "edited": false, "score": 0, "creation_date": 1485990052, "post_id": 41991147, "comment_id": 71159990, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/13530429/read-realtime-output-of-a-command\" title=\"read realtime output of a command\">stackoverflow.com/questions/13530429/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 934, "user_id": 3603602, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/JgF9o.jpg?s=128&g=1", "display_name": "Marco Rehmer", "link": "https://stackoverflow.com/users/3603602/marco-rehmer"}, "edited": false, "score": 0, "creation_date": 1486229985, "post_id": 41991446, "comment_id": 71260048, "body": "nice approach, but the stream handler waits until the process ends. The problem is that the process &quot;never&quot; ends (only if a given time is reached, for example 2 minutes). But I need to read the output lines directly when they appears."}], "tags": [], "owner": {"reputation": 8201, "user_id": 3690024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e2d5067f52318f0ed4db9eca0b2cda1?s=128&d=identicon&r=PG", "display_name": "AJNeufeld", "link": "https://stackoverflow.com/users/3690024/ajneufeld"}, "is_accepted": false, "score": 1, "last_activity_date": 1485990438, "last_edit_date": 1485990438, "creation_date": 1485990083, "answer_id": 41991446, "question_id": 41991147, "link": "https://stackoverflow.com/questions/41991147/read-live-output-of-process-in-java/41991446#41991446", "title": "Read live output of process in java", "body": "<p>I've often written something like:</p>\n\n<pre><code>class StreamHandler extends Thread {\n\n    InputStream is;\n    Writer writer;\n\n    StreamHandler(InputStream is, Writer writer) {\n        super(\"StreamHandler\");\n\n        this.is = is;\n        this.writer = writer;\n    }\n\n    @Override\n    public void run() {\n        try (InputStreamReader isr = new InputStreamReader(is)) {\n\n            char buffer[] = new char[256];\n            int n;\n            while ((n = isr.read(buffer)) &gt; 0) {\n                writer.write(buffer, 0, n);\n            }\n        } catch (IOException e) {\n            System.err.println(\"StreamHandler: \" + e);\n        }\n    }\n}\n</code></pre>\n\n<p>While I've used this for capturing the output stream to my own buffer, you could simply echo to <code>stdout</code> in real time like:</p>\n\n<pre><code>Process process = Runtime.getRuntime().exec(...);\nWriter writer = new OutputStreamWriter(System.out);\nStreamHandler stdout_handler = new StreamHandler(process.getInputStream(), writer);\nstdout_handler.start();\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 294, "user_id": 245691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/614f3577183f1a9219884f73ec2538fd?s=128&d=identicon&r=PG", "display_name": "chaim", "link": "https://stackoverflow.com/users/245691/chaim"}, "is_accepted": true, "score": 4, "last_activity_date": 1485990979, "creation_date": 1485990979, "answer_id": 41991610, "question_id": 41991147, "link": "https://stackoverflow.com/questions/41991147/read-live-output-of-process-in-java/41991610#41991610", "title": "Read live output of process in java", "body": "<p>Using <a href=\"https://github.com/zeroturnaround/zt-exec\" rel=\"nofollow noreferrer\">https://github.com/zeroturnaround/zt-exec</a></p>\n\n<pre><code>new ProcessExecutor().command(\"python\", \"script.py\")\n    .redirectOutput(new LogOutputStream() {\n        @Override\n        protected void processLine(String line) {\n            ...\n        }\n    })\n    .execute();\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 137, "user_id": 7534428, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c6eb9f0c688d802c0d6f1625700cd41?s=128&d=identicon&r=PG&f=1", "display_name": "Mateus Terra", "link": "https://stackoverflow.com/users/7534428/mateus-terra"}, "is_accepted": false, "score": 0, "last_activity_date": 1506995101, "creation_date": 1506995101, "answer_id": 46536041, "question_id": 41991147, "link": "https://stackoverflow.com/questions/41991147/read-live-output-of-process-in-java/46536041#46536041", "title": "Read live output of process in java", "body": "<p>try changing your python code to:</p>\n\n<pre><code>while True:\n    print(\"Heartbeat\", flush=True)\n    time.sleep(1)\n</code></pre>\n\n<p>I've been trying to do the same as you and found this solution on this question: <a href=\"https://stackoverflow.com/questions/45433206/pumpstreamhandler-can-capture-the-process-output-in-realtime\">PumpStreamHandler can capture the process output in realtime</a></p>\n"}, {"tags": [], "owner": {"reputation": 33, "user_id": 8538246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eefd336a0f3f6e8a02252992369e0e0d?s=128&d=identicon&r=PG&f=1", "display_name": "Mohamed Safeuq J", "link": "https://stackoverflow.com/users/8538246/mohamed-safeuq-j"}, "is_accepted": false, "score": 0, "last_activity_date": 1595144033, "creation_date": 1595144033, "answer_id": 62977507, "question_id": 41991147, "link": "https://stackoverflow.com/questions/41991147/read-live-output-of-process-in-java/62977507#62977507", "title": "Read live output of process in java", "body": "<p>If all you want to do is to print to the stream of the current process, then you can use the <code>ProcessBuilder</code> class to create a process and make it &quot;inherit&quot; the IO streams like so:</p>\n<pre><code>Process process = new ProcessBuilder()\n            .command(commandList)\n            .directory(workingDirectory)\n            .inheritIO()\n            .start();\n</code></pre>\n<p>Or, if you want finer control over the streams,</p>\n<pre><code>Process process = new ProcessBuilder()\n            .command(commandList)\n            .directory(workingDirectory)\n            .redirectOutput(ProcessBuilder.Redirect.INHERIT)\n            .redirectInput(ProcessBuilder.Redirect.INHERIT)\n            .redirectError(ProcessBuilder.Redirect.INHERIT)\n            .start();\n</code></pre>\n<p>Again, this may or may not work for your case and that depends on the terminal where the program is running. I've tried running <code>mysql</code> and <code>python</code> command line interpreter with the java program in the system terminal and it worked fine.</p>\n<p>But if you want to redirect output to somewhere else, then the stdout from the process becomes buffered (see <a href=\"https://unix.stackexchange.com/a/59678\">here</a>). And the buffer is only flushed during program completion in your case. So something like setting <code>flush=True</code> in <code>print</code> like @Mateus Terra mentioned in the answer might work.</p>\n"}], "owner": {"reputation": 934, "user_id": 3603602, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/JgF9o.jpg?s=128&g=1", "display_name": "Marco Rehmer", "link": "https://stackoverflow.com/users/3603602/marco-rehmer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3023, "favorite_count": 1, "accepted_answer_id": 41991610, "answer_count": 4, "score": 2, "last_activity_date": 1595144033, "creation_date": 1485988712, "last_edit_date": 1485990313, "question_id": 41991147, "link": "https://stackoverflow.com/questions/41991147/read-live-output-of-process-in-java", "title": "Read live output of process in java", "body": "<p>I start a python script in my java application with </p>\n\n<pre><code>Process p = Runtime.getRuntime().exec(\"python script.py\");\n</code></pre>\n\n<p>This script runs in a loop and is only canceled by an event (or user interaction). The script writes to the output every loop cycle, some text like \"12:22:35 -- Heartbeat\"</p>\n\n<pre><code>while True:\n  print(\"Heartbeat\")\n  time.sleep(1)\n</code></pre>\n\n<p>In my Java application I want to read this output as it appears. My problem is, if I use the BufferReader, it will wait until the process is completed and after that it reads the output. Here is how I read it:</p>\n\n<pre><code>BufferedReader is = new BufferedReader(new InputStreamReader(p.getInputStream()));\nString line;\n\nwhile ((line = is.readLine()) != null)\n   System.out.println(line);\n</code></pre>\n\n<p>How can I read the output \"live\"?</p>\n\n<p>For better understanding: the python-script listen on a hardware button, and when this button is pressed, some output is written out. And in my java application I want to show up this message and sent it to some clients.</p>\n"}, {"tags": ["python", "multithreading", "opencv", "raspberry-pi3"], "comments": [{"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 1, "creation_date": 1485990121, "post_id": 41991097, "comment_id": 71160021, "body": "face detection is an expensive task and raspberry pi is a slow decice. Maybe try a TK1 SoC instead, but no guarantee to be fast enough."}, {"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 1, "creation_date": 1485990201, "post_id": 41991097, "comment_id": 71160049, "body": "if you know the approximate size of faces in your images you can resize the images or limit the detection size."}], "answers": [{"tags": [], "owner": {"reputation": 44839, "user_id": 89766, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/WVViw.jpg?s=128&g=1", "display_name": "George Profenza", "link": "https://stackoverflow.com/users/89766/george-profenza"}, "is_accepted": false, "score": 0, "last_activity_date": 1486034167, "creation_date": 1486034167, "answer_id": 42000791, "question_id": 41991097, "link": "https://stackoverflow.com/questions/41991097/live-image-processing-with-opencv-and-raspberry-pi/42000791#42000791", "title": "Live image processing with OpenCV and Raspberry Pi", "body": "<p>Micka's advices are very good. </p>\n\n<p>I had issues with threading OpenCV in Python (not sure that's possible), but well done on threading the PiCamera frame grabbing. </p>\n\n<p>I addition to the above try the following:</p>\n\n<ol>\n<li>use \"yuv\" colour space instead of \"rgb\" and simply access the first (y - lumminance) channel to get the grayscale data, wasting less time fetching frames and converting from RGB to grayscale</li>\n<li>try using an LBP cascade instead of HAAR (e.g. <code>/usr/local/share/OpenCV/lbpcascades/lbpcascade_frontalface.xml</code>) - should a bit faster, but less accurate</li>\n</ol>\n"}], "owner": {"reputation": 21, "user_id": 6351435, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36374e65bb2164632b8a31163f1ddb97?s=128&d=identicon&r=PG&f=1", "display_name": "Kordian", "link": "https://stackoverflow.com/users/6351435/kordian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2735, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1486034167, "creation_date": 1485988489, "question_id": 41991097, "link": "https://stackoverflow.com/questions/41991097/live-image-processing-with-opencv-and-raspberry-pi", "title": "Live image processing with OpenCV and Raspberry Pi", "body": "<p>recently I'm struggling with speeding up image processing in OpenCV running on my Raspberry Pi 3 platform. I did face recognition application, but it works very slowly. I read many subjects about threading, multiprocessing and so on, but still I'm confused about it. I was testing it with face detection only to make it simplier. Here is my code:</p>\n\n<p><strong>pivideostream.py - updating frames in thread</strong></p>\n\n<pre><code>from picamera.array import PiRGBArray\nfrom picamera import PiCamera\nfrom threading import Thread\nimport cv2\n\nclass PiVideoStream:\n\n    def __init__(self, resolution=(640, 480), framerate=30):\n        self.camera = PiCamera()\n        self.camera.resolution = resolution\n        self.camera.framerate = framerate\n        self.rawCapture = PiRGBArray(self.camera, size=resolution)\n        self.stream = self.camera.capture_continuous(self.rawCapture,format='bgr', use_video_port=True)\n        self.image = None\n        self.stopped = False\n\n    def start(self):\n        t = Thread(target=self.update)\n        t.daemon = True\n        t.start()\n        return self\n\n    def update(self):\n        for frame in self.stream:\n            self.image = frame.array\n            self.rawCapture.truncate(0)\n\n            if self.stopped:\n                self.stream.close()\n                self.rawCapture.close()\n                self.camera.close()\n                return  \n\n    def read(self):\n        return self.image\n\n    def stop(self):\n        self.stopped = True\n</code></pre>\n\n<p><strong>process_img_thread.py - main program</strong></p>\n\n<pre><code>from pivideostream import PiVideoStream\nimport cv2\nfrom picamera.array import PiRGBArray\nfrom picamera import PiCamera\nimport time\n\n\ndef detect_in_thread():\n    # Start updating frames in threaded manner\n    face_cascade = cv2.CascadeClassifier('./haarcascades/haarcascade_frontalface_default.xml')\n    eye_cascade = cv2.CascadeClassifier('./haarcascades/haarcascade_eye.xml')\n    thread_stream = PiVideoStream()\n    thread_stream.start()\n    time.sleep(2)\n\n    # Read frames\n    while True:\n\n        # Original image\n        image = thread_stream.read()\n\n        # Full image - face detection\n        gray = cv2.cvtColor(image, cv2.COLOR_BGR2GRAY)\n        faces = face_cascade.detectMultiScale(gray,1.3,5)\n        for (x,y,w,h) in faces:\n            detected_face = cv2.rectangle(image,(x,y),(x+w,y+h),(0,255,0),2)\n\n            # Region of interest - eyes detection \n            roi_color = image[y:y+h,x:x+w]\n            roi_gray = gray[y:y+h,x:x+w]\n            eyes = eye_cascade.detectMultiScale(roi_gray,1.03,5,0,(40,40))\n            for (ex,ey,ew,eh) in eyes:\n                cv2.rectangle(roi_color,(ex,ey),(ex+ew,ey+eh),(0,255,255),2)\n\n        # Show computed image\n        cv2.imshow('Threaded Camera OpenCV Preview',image)\n\n        if cv2.waitKey(1) &amp; 0xFF == ord(\"q\"):\n            break\n\n    # Close image window and thread\n    cv2.destroyAllWindows()\n    thread_stream.stop()\n\n\nif __name__ == \"__main__\":\n    detect_in_thread()\n</code></pre>\n\n<p>When I display raw frames from camera it's working great, but when I only add something in main program in order to process image, video speed is around 1 FPS :(.\nCan someone help me?</p>\n"}, {"tags": ["python", "monitoring", "disk", "psutil"], "comments": [{"owner": {"reputation": 6961, "user_id": 1248974, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ClqC2.jpg?s=128&g=1", "display_name": "davedwards", "link": "https://stackoverflow.com/users/1248974/davedwards"}, "edited": false, "score": 0, "creation_date": 1485988711, "post_id": 41991033, "comment_id": 71159455, "body": "not sure if this is related, but i think the <a href=\"https://pythonhosted.org/psutil/#psutil.disk_io_counters\" rel=\"nofollow noreferrer\">psutil docs</a> state <code>read_time</code> is in <i>milliseconds</i> not nano seconds"}, {"owner": {"reputation": 183, "user_id": 3746674, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/iUaYE.jpg?s=128&g=1", "display_name": "Jeff Stapleton", "link": "https://stackoverflow.com/users/3746674/jeff-stapleton"}, "reply_to_user": {"reputation": 6961, "user_id": 1248974, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ClqC2.jpg?s=128&g=1", "display_name": "davedwards", "link": "https://stackoverflow.com/users/1248974/davedwards"}, "edited": false, "score": 0, "creation_date": 1485989393, "post_id": 41991033, "comment_id": 71159717, "body": "@downshift I thought so too but the numbers it was returning were too big.  I found an <a href=\"https://github.com/giampaolo/psutil/issues/700\" rel=\"nofollow noreferrer\">post</a> that said it was actually nano seconds, which looked more correct.  I maybe wrong though."}], "owner": {"reputation": 183, "user_id": 3746674, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/iUaYE.jpg?s=128&g=1", "display_name": "Jeff Stapleton", "link": "https://stackoverflow.com/users/3746674/jeff-stapleton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 559, "favorite_count": 2, "answer_count": 0, "score": 2, "last_activity_date": 1485988136, "creation_date": 1485988136, "question_id": 41991033, "link": "https://stackoverflow.com/questions/41991033/calculate-percentage-of-time-disk-is-reading-writing-using-python", "title": "Calculate percentage of time disk is reading/writing using python", "body": "<p>I am trying to set up some system monitoring.  I want to calculate the percentage of time the disk is processing read or write requests.  I am try to do this with <a href=\"https://pypi.python.org/pypi/psutil\" rel=\"nofollow noreferrer\">psutil</a>.  My current solution looks like this:</p>\n\n<pre><code>readtime = (psutil.disk_io_counters().read_time / 1000) / 1000\nwritetime = (psutil.disk_io_counters().write_time / 1000) / 1000\nbusytime = readtime + writetime;\n\npercentage = (busytime) / 60\nprint(percentage)\n</code></pre>\n\n<p>The double divide by 1000 is because I read somewhere that <code>read_time</code> returns nano seconds.  My issue is this solution only ever return 4% even when I run a disk defragmentation and disk % is at 100 it returns 4%.  I must be misunderstanding what <code>read_time</code> and <code>write_time</code> are used for.  Does anyone know what I am doing wrong or have an alternative solution?  I am currently testing this on Windows 10 environment.</p>\n"}, {"tags": ["python", "django"], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 7503058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7471b79ca7b2452208476847881cebbd?s=128&d=identicon&r=PG&f=1", "display_name": "Daniiii", "link": "https://stackoverflow.com/users/7503058/daniiii"}, "edited": false, "score": 0, "creation_date": 1485990911, "post_id": 41991473, "comment_id": 71160274, "body": "hey thanks for your reply, is it correct that I do it in models.py ? Cause in the views.py is where all the calculations get done and so on, the decimals are sorted now all I want is to only allow Numbers for input in all fields."}], "tags": [], "owner": {"reputation": 175, "user_id": 6599471, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-wrHTcdyUax4/AAAAAAAAAAI/AAAAAAAAABY/l6_3v3bc2zE/photo.jpg?sz=128", "display_name": "hassan", "link": "https://stackoverflow.com/users/6599471/hassan"}, "is_accepted": false, "score": 0, "last_activity_date": 1485990282, "creation_date": 1485990282, "answer_id": 41991473, "question_id": 41991011, "link": "https://stackoverflow.com/questions/41991011/python-validate-to-only-allow-numbers-and-2-decimals/41991473#41991473", "title": "Python Validate to only allow Numbers and 2 Decimals", "body": "<p>I think you have defined the models quite well. To validate the model, you can use the clean_fields() or clean() methods of the Django Model class. You can read more about django model validation <a href=\"https://docs.djangoproject.com/en/1.10/ref/models/instances/#django.db.models.Model.clean_fields\" rel=\"nofollow noreferrer\">here</a></p>\n"}, {"tags": [], "owner": {"reputation": 12219, "user_id": 2505071, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88523d3d83f1170a7c88ab917a3faf19?s=128&d=identicon&r=PG", "display_name": "iklinac", "link": "https://stackoverflow.com/users/2505071/iklinac"}, "is_accepted": false, "score": 0, "last_activity_date": 1485997083, "creation_date": 1485997083, "answer_id": 41992606, "question_id": 41991011, "link": "https://stackoverflow.com/questions/41991011/python-validate-to-only-allow-numbers-and-2-decimals/41992606#41992606", "title": "Python Validate to only allow Numbers and 2 Decimals", "body": "<p>You could write and add custom validator to your fields</p>\n\n<blockquote>\n  <p><a href=\"https://docs.djangoproject.com/en/1.10/ref/validators/\" rel=\"nofollow noreferrer\">Django validators</a></p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 2824, "user_id": 5926, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2320cbd60b73ea780998f68601eb8eeb?s=128&d=identicon&r=PG", "display_name": "brian buck", "link": "https://stackoverflow.com/users/5926/brian-buck"}, "is_accepted": true, "score": 1, "last_activity_date": 1486078860, "creation_date": 1486078860, "answer_id": 42014365, "question_id": 41991011, "link": "https://stackoverflow.com/questions/41991011/python-validate-to-only-allow-numbers-and-2-decimals/42014365#42014365", "title": "Python Validate to only allow Numbers and 2 Decimals", "body": "<p>You could do this on the Model or in a Form.</p>\n\n<p>Django has a <a href=\"https://docs.djangoproject.com/en/1.10/ref/validators/#decimalvalidator\" rel=\"nofollow noreferrer\">built-in validator</a> for just this case:</p>\n\n<pre><code>from django.core.validators import DecimalValidator\n...\n# In the model:\ncapital = models.DecimalField(max_digits=10, decimal_places=2, validators=[DecimalValidator])\n\n# Or in a Form:\ncapital = forms.DecimalField(max_digits=10, decimal_places=2, validators=[DecimalValidator])\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 7503058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7471b79ca7b2452208476847881cebbd?s=128&d=identicon&r=PG&f=1", "display_name": "Daniiii", "link": "https://stackoverflow.com/users/7503058/daniiii"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1510, "favorite_count": 0, "accepted_answer_id": 42014365, "answer_count": 3, "score": 1, "last_activity_date": 1580739530, "creation_date": 1485988059, "last_edit_date": 1580739530, "question_id": 41991011, "link": "https://stackoverflow.com/questions/41991011/python-validate-to-only-allow-numbers-and-2-decimals", "title": "Python Validate to only allow Numbers and 2 Decimals", "body": "<p>was wondering if anyone could help me to validate my entries to only allow numeric values with two decimal places.</p>\n\n<p>Here is the models.py:</p>\n\n<pre><code>class Records(models.Model):\n    capital = models.DecimalField(max_digits=10, decimal_places=2)\n    years = models.DecimalField(max_digits=10, decimal_places=2)\n    rate = models.DecimalField(max_digits=10, decimal_places=2)\n    amount = models.DecimalField(max_digits=10, decimal_places=2)\n</code></pre>\n"}, {"tags": ["python", "optimization", "dataframe", "assign", "dask"], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 7112149, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0adfe2a50b86cd55b418606f4bead97d?s=128&d=identicon&r=PG&f=1", "display_name": "oxymoron", "link": "https://stackoverflow.com/users/7112149/oxymoron"}, "edited": false, "score": 0, "creation_date": 1485995874, "post_id": 41991089, "comment_id": 71161801, "body": "Thanks for quick reply. I am using df = df.assign(x=x, y=y, z=z) at the moment, assigning all series at once, but there are those additional nodes in the graph for the columns that do not need those computation. Is there a way to optimize graph in such a way that when you get a subset of columns it crops all the other computations? My workaround was to compute everything, save to hdf, load it, and then I can access some subset of columns on demand. But then hdf columns length limitation hit me and I started chunking data again, picking subsets of columns again."}, {"owner": {"reputation": 47893, "user_id": 616616, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/8749ec52cee260c4c1f67f2dec29d957?s=128&d=identicon&r=PG", "display_name": "MRocklin", "link": "https://stackoverflow.com/users/616616/mrocklin"}, "reply_to_user": {"reputation": 33, "user_id": 7112149, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0adfe2a50b86cd55b418606f4bead97d?s=128&d=identicon&r=PG&f=1", "display_name": "oxymoron", "link": "https://stackoverflow.com/users/7112149/oxymoron"}, "edited": false, "score": 2, "creation_date": 1485997052, "post_id": 41991089, "comment_id": 71162174, "body": "If you only use <code>x</code> and <code>y</code> and not <code>z</code> then dask will remove <code>z</code> from the computation.  However once you assign them all into a dataframe you&#39;re stuck with them all.  Dask doesn&#39;t perform high level optimizations like what you want.  You might try persisting to Parquet instead of HDF5.  It&#39;ll also be much faster to read a few columns than with HDF5"}, {"owner": {"reputation": 33, "user_id": 7112149, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0adfe2a50b86cd55b418606f4bead97d?s=128&d=identicon&r=PG&f=1", "display_name": "oxymoron", "link": "https://stackoverflow.com/users/7112149/oxymoron"}, "edited": false, "score": 0, "creation_date": 1485999661, "post_id": 41991089, "comment_id": 71162843, "body": "Thanks, will try parquet"}], "tags": [], "owner": {"reputation": 47893, "user_id": 616616, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/8749ec52cee260c4c1f67f2dec29d957?s=128&d=identicon&r=PG", "display_name": "MRocklin", "link": "https://stackoverflow.com/users/616616/mrocklin"}, "is_accepted": true, "score": 6, "last_activity_date": 1485988458, "creation_date": 1485988458, "answer_id": 41991089, "question_id": 41990976, "link": "https://stackoverflow.com/questions/41990976/dask-dataframe-assign-blows-up-dask-graph/41991089#41991089", "title": "dask DataFrame.assign blows up dask graph", "body": "<p>Rather than continuously assigning new columns to the dask dataframe, you might want to build several dask series and then concat them all together at the end</p>\n\n<p>So instead of doing this:</p>\n\n<pre><code>df['x'] = df.w + 1\ndf['y'] = df.x * 10\ndf['z'] = df.y ** 2\n</code></pre>\n\n<p>Do this</p>\n\n<pre><code>x = df.w + 1\ny = x + 10\nz = y * 2\ndf = df.assign(x=x, y=y, z=z)\n</code></pre>\n\n<p>Or this:</p>\n\n<pre><code>dd.concat([df, x, y, z], axis=1)\n</code></pre>\n\n<p>This may still result in the same number of tasks in your graph however, but will probably result in fewer memory copies.</p>\n\n<p>Alternatively, if all of your transformations are row-wise then you can construct a pandas function and map that across all partitions</p>\n\n<pre><code>def f(part):\n    part = part.copy()\n    part['x'] = part.w + 1\n    part['y'] = part.x * 10\n    part['z'] = part.y ** 2\n    return part\n\ndf = df.map_partitions(f)\n</code></pre>\n\n<p>Also, while a million-node task graph is less than ideal, it should also be OK.  I've seen larger graphs run comfortably.</p>\n"}], "owner": {"reputation": 33, "user_id": 7112149, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0adfe2a50b86cd55b418606f4bead97d?s=128&d=identicon&r=PG&f=1", "display_name": "oxymoron", "link": "https://stackoverflow.com/users/7112149/oxymoron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 287, "favorite_count": 1, "accepted_answer_id": 41991089, "answer_count": 1, "score": 3, "last_activity_date": 1485988458, "creation_date": 1485987908, "question_id": 41990976, "link": "https://stackoverflow.com/questions/41990976/dask-dataframe-assign-blows-up-dask-graph", "title": "dask DataFrame.assign blows up dask graph", "body": "<p>So I have an issue with dask DataFrame.append. I generate a lot of derivative features from main data and append them to the main dataframe. After that the dask graph for any set of columns is blown up. Here is small example:</p>\n\n<pre><code>%pylab inline\nimport numpy as np\nimport pandas as pd\nimport dask.dataframe as dd\nfrom dask.dot import dot_graph\n\ndf=pd.DataFrame({'x%s'%i:np.random.rand(20) for i in range(5)})\nddf = dd.from_pandas(df, npartitions=2)\n\ndot_graph(ddf['x0'].dask)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/RATBL.png\" rel=\"nofollow noreferrer\">here is the dask graph as expected</a></p>\n\n<pre><code>g=ddf.assign(y=ddf['x0']+ddf['x1'])\ndot_graph(g['x0'].dask)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/Cb9IK.png\" rel=\"nofollow noreferrer\">here the graph for same column is exploded with irrelevant computation</a></p>\n\n<p>Imagine i have lots of lots of spawned columns. So computation graph for any particular column includes irrelevant computations for all the other columns. I.e. in my case I have len(ddf['someColumn'].dask)>100000. So that becomes unusable quickly.</p>\n\n<p>So my question is can this issue be resolved? Are there any existing means to do this? If not - what direction should i look to implement this?  </p>\n\n<p>Thanks! </p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 19411, "user_id": 6640099, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/tf1sO.jpg?s=128&g=1", "display_name": "Christian Dean", "link": "https://stackoverflow.com/users/6640099/christian-dean"}, "edited": false, "score": 0, "creation_date": 1485987888, "post_id": 41990951, "comment_id": 71159104, "body": "What do you plan to do in your for loop?"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1485988103, "post_id": 41990951, "comment_id": 71159190, "body": "We need the entire context in a form we can reproduce.  From this, it merely appears that you neglected to indent the next line.  Python <i>requires</i> indentation for blocks.  Can you post at least two lines that show the problem?"}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1485991650, "post_id": 41990951, "comment_id": 71160508, "body": "You entered a blank line following the beginning of the <code>for</code> loop. The Python console expects you to enter valid lines of code until the entire body of the loop has been input. The block (one or more lines of code) for the body following the first line of a <code>for</code> loop must all be indented. You can workaround the problem by entering a tab character or one or more (usually four) spaces on each line after the first."}, {"owner": {"reputation": 22281, "user_id": 92692, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/046e863d3603ce0dca9c2254a1457a9b?s=128&d=identicon&r=PG", "display_name": "esac", "link": "https://stackoverflow.com/users/92692/esac"}, "edited": false, "score": 0, "creation_date": 1485992782, "post_id": 41990951, "comment_id": 71160868, "body": "Hey, we all started somewhere, right?"}], "answers": [{"comments": [{"owner": {"reputation": 12219, "user_id": 2505071, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88523d3d83f1170a7c88ab917a3faf19?s=128&d=identicon&r=PG", "display_name": "iklinac", "link": "https://stackoverflow.com/users/2505071/iklinac"}, "edited": false, "score": 1, "creation_date": 1485988311, "post_id": 41991020, "comment_id": 71159285, "body": "pass would maybe be a better choice for second line in this example :)"}], "tags": [], "owner": {"reputation": 22281, "user_id": 92692, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/046e863d3603ce0dca9c2254a1457a9b?s=128&d=identicon&r=PG", "display_name": "esac", "link": "https://stackoverflow.com/users/92692/esac"}, "is_accepted": true, "score": 1, "last_activity_date": 1485988096, "creation_date": 1485988096, "answer_id": 41991020, "question_id": 41990951, "link": "https://stackoverflow.com/questions/41990951/meaning-of-indentationerror-expected-an-indented-block-exception/41991020#41991020", "title": "Meaning of &quot;IndentationError: expected an indented block&quot; exception?", "body": "<p>Not much to go on here, but after a for statement such as this, you need a line after this and 4 spaces before your next statement. A lot of programming languages use <code>{</code> and <code>}</code> to signify the start and stop of a block of code, Python uses indentation (4 spaces) to do this. Your code should look something like:</p>\n\n<pre><code>for edad in range(10, 18):\n    print(edad)\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 7503037, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Ys0V9JQN1i4/AAAAAAAAAAI/AAAAAAAADXY/10vNLXsbU_4/photo.jpg?sz=128", "display_name": "Nexobeta28 YT", "link": "https://stackoverflow.com/users/7503037/nexobeta28-yt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 650, "favorite_count": 0, "accepted_answer_id": 41991020, "answer_count": 1, "score": -5, "last_activity_date": 1485991313, "creation_date": 1485987772, "last_edit_date": 1485991313, "question_id": 41990951, "link": "https://stackoverflow.com/questions/41990951/meaning-of-indentationerror-expected-an-indented-block-exception", "title": "Meaning of &quot;IndentationError: expected an indented block&quot; exception?", "body": "<p>I am learning Python but...don't understand what this error means. </p>\n\n<pre class=\"lang-none prettyprint-override\"><code>&gt;&gt;&gt; for edad in range(10, 18): #Que nos muestre la edad de 10 a 18 (Errores causados por los dos puntos)...   File \"&lt;stdin&gt;\", line 2\n...\n  File \"&lt;stdin&gt;\", line 2\n\n    ^\nIndentationError: expected an indented block\n</code></pre>\n"}, {"tags": ["python", "numpy"], "comments": [{"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1485988060, "post_id": 41990931, "comment_id": 71159173, "body": "I think you need to think about what dimensions are used for what really carefully. It actually makes a lot of sense that <code>group[0]</code> is the first object in <code>group</code>. <code>group[:, 0]</code> is the first attribute of all the objects in group. If you need to distinguish a group from an object, just check its <code>ndim</code> attribute. Groups will have 2, objects will have 1."}, {"owner": {"reputation": 24576, "user_id": 3767239, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f7cdefb47f96069d7add1222c70f3f70?s=128&d=identicon&r=PG&f=1", "display_name": "a_guest", "link": "https://stackoverflow.com/users/3767239/a-guest"}, "reply_to_user": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1485989385, "post_id": 41990931, "comment_id": 71159713, "body": "Well that&#39;s the point. I don&#39;t want to distinguish between groups and objects from the method&#39;s point of view. It should work for single objects and behave similarly for groups without the need for explicit checks. Say one method should return the square of the first attribute, then this is simply <code>obj_or_group[0] ** 2</code> without being required to check for dimensions. I want to achieve the same for addition, say a method that should return all attributes plus some attribute vector. I thought one major purpose of numpy is to allow for similar equations when going to higher dimensions."}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1485990403, "post_id": 41990931, "comment_id": 71160118, "body": "You could always specify <code>axis=-1</code> for calls like <code>np.sum</code>."}, {"owner": {"reputation": 24576, "user_id": 3767239, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f7cdefb47f96069d7add1222c70f3f70?s=128&d=identicon&r=PG&f=1", "display_name": "a_guest", "link": "https://stackoverflow.com/users/3767239/a-guest"}, "reply_to_user": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1485991142, "post_id": 41990931, "comment_id": 71160340, "body": "Problem is that I don&#39;t have sums but additions. Consider a <code>(2, 4)</code> matrix and a <code>(2,)</code> vector. I want to add the two <i>row-wise</i>, i.e. the first row in the matrix should be added the first vector element and the second matrix row the second vector element (and so on for higher dimensions). This is not what numpy does. Due to numpy&#39;s broadcasting mechanism it will add column-wise. I would like to know if there&#39;s a way (other than <code>(matrix.T + vector).T</code>) to add the matrix and the vector. Is this conceptually wrong (when going to higher dimensions maybe)? I don&#39;t see why it would be though."}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1486008941, "post_id": 41990931, "comment_id": 71165128, "body": "<code>(group.T + obj).T</code> does not work if the operands are obj and obj. This whole concept is very much flawed."}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1486009082, "post_id": 41990931, "comment_id": 71165176, "body": "What is dot supposed to represent?"}, {"owner": {"reputation": 24576, "user_id": 3767239, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f7cdefb47f96069d7add1222c70f3f70?s=128&d=identicon&r=PG&f=1", "display_name": "a_guest", "link": "https://stackoverflow.com/users/3767239/a-guest"}, "reply_to_user": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1486045485, "post_id": 41990931, "comment_id": 71185356, "body": "What? <code>(obj1.T + obj2).T</code> won&#39;t work for <code>obj1</code> and <code>obj2</code> being 1d arrays? I suggest you give it a try and prove yourself wrong. Transposition is a no-op for 1d arrays. <code>dot</code> means the <a href=\"https://en.wikipedia.org/wiki/Dot_product\" rel=\"nofollow noreferrer\">dot product</a>."}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1486050517, "post_id": 41990931, "comment_id": 71188975, "body": "<code>(obj1.T + obj2).T</code> will work just fine. Try <code>(group.T + obj).T</code> where group is a <code>(2, 3)</code> and <code>obj</code> is a <code>(3,)</code> array."}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1486050565, "post_id": 41990931, "comment_id": 71189014, "body": "I did not fully understand what you were trying to do when I wrote that comment. Please ignore the second part of it."}], "answers": [{"comments": [{"owner": {"reputation": 24576, "user_id": 3767239, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f7cdefb47f96069d7add1222c70f3f70?s=128&d=identicon&r=PG&f=1", "display_name": "a_guest", "link": "https://stackoverflow.com/users/3767239/a-guest"}, "edited": false, "score": 0, "creation_date": 1486045301, "post_id": 41994539, "comment_id": 71185223, "body": "You might have a point here, using the transposed layout while making sure that arrays are always 2d implies consistency across the application. Ensuring that arrays are always 2d could be realized by a decorator, <code>numpy.atleast_2d</code> seems a very interesting option here. Not sure yet if I&#39;ll go this way but this is definitely a promising suggestion."}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "reply_to_user": {"reputation": 24576, "user_id": 3767239, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f7cdefb47f96069d7add1222c70f3f70?s=128&d=identicon&r=PG&f=1", "display_name": "a_guest", "link": "https://stackoverflow.com/users/3767239/a-guest"}, "edited": false, "score": 0, "creation_date": 1486050417, "post_id": 41994539, "comment_id": 71188913, "body": "I had forgotten about making attribute access uniform. Thanks for the reminder. Added an update with a better (as in using numpy more efficiently without giving up convenience) solution than 2D arrays."}, {"owner": {"reputation": 24576, "user_id": 3767239, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f7cdefb47f96069d7add1222c70f3f70?s=128&d=identicon&r=PG&f=1", "display_name": "a_guest", "link": "https://stackoverflow.com/users/3767239/a-guest"}, "edited": false, "score": 0, "creation_date": 1486052258, "post_id": 41994539, "comment_id": 71190155, "body": "Thanks for the update, using <code>...</code> seems nice indeed. However there is a subtle difference in using this syntax for an <code>obj</code> and a <code>group</code> which contains one object. <code>obj[..., 0]</code> returns <code>array(0)</code> while <code>group[..., 0]</code> returns <code>array([0])</code>. For that reason (regarding consistency) I would rather go with #2. As mentioned using a decorator it&#39;s fine having 1-axis objects which become wrapped in a 2-axis group before they are passed to the actual method (and then converted back to 1-axis upon return)."}, {"owner": {"reputation": 24576, "user_id": 3767239, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f7cdefb47f96069d7add1222c70f3f70?s=128&d=identicon&r=PG&f=1", "display_name": "a_guest", "link": "https://stackoverflow.com/users/3767239/a-guest"}, "edited": false, "score": 0, "creation_date": 1486052287, "post_id": 41994539, "comment_id": 71190174, "body": "Anyway I think it&#39;s a trade-off for both group layouts (objects being stored row-wise or column-wise). Using row-wise storage (as proposed by you) one can apply <i>per attribute</i> modifications in a straightforward way (<code>group + attribute_vector</code>) however <i>per object</i> modifications require some twists (e.g. adding a number which is different for each object to all attributes of that object; needs to be something like <code>(group.T + object_vector).T</code> or equivalently <code>group + object_vector[:, None]</code>)."}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "reply_to_user": {"reputation": 24576, "user_id": 3767239, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f7cdefb47f96069d7add1222c70f3f70?s=128&d=identicon&r=PG&f=1", "display_name": "a_guest", "link": "https://stackoverflow.com/users/3767239/a-guest"}, "edited": false, "score": 0, "creation_date": 1486054136, "post_id": 41994539, "comment_id": 71191428, "body": "@a_guest. Try to stay away from <code>.T</code> as much as possible unless the operation is already expensive, like <code>dot</code>. Hopefully my answer has shown that you can treat both objects and groups the same for any given operation as long as you play with the notation a little bit."}, {"owner": {"reputation": 24576, "user_id": 3767239, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f7cdefb47f96069d7add1222c70f3f70?s=128&d=identicon&r=PG&f=1", "display_name": "a_guest", "link": "https://stackoverflow.com/users/3767239/a-guest"}, "edited": false, "score": 0, "creation_date": 1486061624, "post_id": 41994539, "comment_id": 71195677, "body": "In the end I&#39;m going to use an array which stores the objects column-wise (i.e. one object per column) because I actually don&#39;t need to distinguish between objects but only apply collective operations on them. That said I would never use <code>group[0]</code> for row-wise storage however for column-wise storage this will be a frequent feature. In addition I will enforce usage of 2-axis arrays only (no single objects <i>within</i> methods; decorators where needed). Anyway your answer provided quite some insight, thanks! P.S.: I don&#39;t see why transposing an array should be a costly operation."}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "reply_to_user": {"reputation": 24576, "user_id": 3767239, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f7cdefb47f96069d7add1222c70f3f70?s=128&d=identicon&r=PG&f=1", "display_name": "a_guest", "link": "https://stackoverflow.com/users/3767239/a-guest"}, "edited": false, "score": 0, "creation_date": 1486061773, "post_id": 41994539, "comment_id": 71195781, "body": "@a_guest. Not especially costly by itself if you do it once or twice, but it can sometimes require a copy, which can add significantly to runtime if you do it often on large arrays."}], "tags": [], "owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "is_accepted": false, "score": 3, "last_activity_date": 1486050756, "last_edit_date": 1486050756, "creation_date": 1486011839, "answer_id": 41994539, "question_id": 41990931, "link": "https://stackoverflow.com/questions/41990931/element-wise-addition-of-1d-and-2d-numpy-arrays/41994539#41994539", "title": "Element-wise addition of 1D and 2D numpy arrays", "body": "<p>You appear to be confused about which dimension of the matrix is an object and which is an attirbute, as evidenced by the changing object size in your examples. In fact, it it the fact that you are swapping dimensions to match that changing size that is throwing you off. You are also using the unfortunate example of a 3x3 group for your dot product, which is further throwing off your explanation.</p>\n\n<p>In the examples below, objects will be three-element vectors, i.e., they will have three attributes each. The example group will have consistently two rows, meaning two objects in it, and three columns, because objects have three attributes.</p>\n\n<p>The first row of the group, <code>group[0]</code>, a.k.a. <code>group[0, :]</code>, will be the first <strong>object</strong> in the group. The first column, <code>group[:, 0]</code> will be the first <strong>attribute</strong>.</p>\n\n<p>Here are a couple of sample objects and groups to illustrate the points that follow:</p>\n\n<pre><code>&gt;&gt;&gt; obj1 = np.array([1, 2, 3])\n&gt;&gt;&gt; obj2 = np.array([4, 5, 6])\n&gt;&gt;&gt; group1 = np.array([[7, 8, 9],\n                      [0, 1, 2]])\n&gt;&gt;&gt; group2 = np.array([[3, 4, 5]])\n</code></pre>\n\n<p>Addition will work out of the box because of broadcasting now:</p>\n\n<pre><code>&gt;&gt;&gt; obj1 + obj2\narray([5, 7, 9])\n&gt;&gt;&gt; group1 + obj1\narray([[ 8, 10, 12],\n       [ 1,  3,  5]])\n</code></pre>\n\n<p>As you can see, corresponding attributes are getting added just fine. You can even add together groups, but only if they are the same size or if one of them only contains a single object:</p>\n\n<pre><code>&gt;&gt;&gt; group1 + group2\narray([[10, 12, 14],\n       [ 3,  5,  7]])\n&gt;&gt;&gt; group1 + group1\narray([[14, 16, 18],\n       [ 0,  2,  4]])\n</code></pre>\n\n<p>The same will be true for all the binary elementwise operators: <code>*</code>, <code>-</code>, <code>/</code>, <code>np.bitwise_and</code>, etc.</p>\n\n<p>The only remaining question is how to make dot products not care if they are operating on a matrix or a vector. It just so happens that dot products don't care. Your common dimension is always the number of attributes, so the second operand (the multiplier) needs to be transposed so that the number of columns becomes the number of rows. <code>np.dot(x1, x2.T)</code>, or equivalently <code>x1.dot(x2.T)</code> will work correctly whether <code>x1</code> and <code>x2</code> are groups or objects:</p>\n\n<pre><code>&gt;&gt;&gt; obj1.dot(obj2.T)\n32\n&gt;&gt;&gt; obj1.dot(group1.T)\narray([50,  8])\n&gt;&gt;&gt; group1.dot(obj1.T)\narray([50,  8])\n</code></pre>\n\n<p>You can use either <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.atleast_1d.html\" rel=\"nofollow noreferrer\"><code>np.atleast_1d</code></a> or <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.atleast_2d.html\" rel=\"nofollow noreferrer\"><code>np.atleast_2d</code></a> to always coerce the result into a particular shape so you don't end up with a scalar like the <code>obj1.dot(obj2.T)</code> case. I would recommend the latter, so you always have a consistent number of dimensions regardless of the inputs: </p>\n\n<pre><code>&gt;&gt;&gt; np.atleast_2d(obj1.dot(obj2.T))\narray([[32]])\n&gt;&gt;&gt; np.atleast_2d(obj1.dot(group1.T))\narray([[50,  8]])\n</code></pre>\n\n<p>Just keep in mind that the dimensions of the dot product will be the the number of objects in the first operand by the number of objects in the second operand (everything will be treated as a group). The attributes will get multiplied and summed together. Whether or not that has a valid interpretation for your purposes is entirely for you to decide.</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>The only remaining problem at this point is attribute access. As stated above <code>obj1[0]</code> and <code>group1[0]</code> mean very different things. There are three ways to reconcile this difference, listed in the order that I personally prefer them, with 1 being the most preferable:</p>\n\n<ol>\n<li><p>Use the <code>Ellipsis</code> indexing object to get the last index instead of the first</p>\n\n<pre><code>&gt;&gt;&gt; obj1[..., 0]\narray([1])\n&gt;&gt;&gt; group1[..., 0]\narray([7, 0])\n</code></pre>\n\n<p>This is the most efficient way since it does not make any copies, just does a normal index on the original arrays. As you can see, there will be no difference between the result from a single object (1D array) and a group with only one object in it (2D array).</p></li>\n<li><p>Make all your objects 2D. As you pointed out yourself, this can be done with a decorator, and/or using <code>np.atleast_2d</code>. Personally, I would prefer having the convenience of using 1D arrays as single objects without having to wrap them in 2D.</p></li>\n<li><p>Always access attributes via a transpose:</p>\n\n<pre><code>&gt;&gt;&gt; obj1.T[0]\n1\n&gt;&gt;&gt; group1.T[0]\narray([7, 0])\n</code></pre>\n\n<p>While this is functionally equivalent to #1, it is clunky and unsightly by comparison, in addition to doing something very different under-the-hood. This approach at the very least creates a new view of the underlying array, and may run the risk of making unnecessary copies in certain cases if the group arrays are not laid out just right. I would not recommend this approach even if it does solve the problem if uniform access.</p></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 49, "user_id": 9173539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eeb3d354d22d74007c04b6d4572f100b?s=128&d=identicon&r=PG&f=1", "display_name": "Dyslexian coder", "link": "https://stackoverflow.com/users/9173539/dyslexian-coder"}, "is_accepted": false, "score": 4, "last_activity_date": 1555314055, "creation_date": 1555314055, "answer_id": 55684518, "question_id": 41990931, "link": "https://stackoverflow.com/questions/41990931/element-wise-addition-of-1d-and-2d-numpy-arrays/55684518#55684518", "title": "Element-wise addition of 1D and 2D numpy arrays", "body": "<p>what you want to do seems to work with this simple code !!</p>\n\n<pre><code>&gt;&gt;&gt; m\narray([[1, 2, 3],\n       [4, 5, 6]])\n&gt;&gt;&gt; g = np.array([10,20])\n&gt;&gt;&gt; m + g[ : , None]\narray([[11, 12, 13],\n       [24, 25, 26]])\n\n</code></pre>\n"}], "owner": {"reputation": 24576, "user_id": 3767239, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f7cdefb47f96069d7add1222c70f3f70?s=128&d=identicon&r=PG&f=1", "display_name": "a_guest", "link": "https://stackoverflow.com/users/3767239/a-guest"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 15903, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1555314055, "creation_date": 1485987686, "last_edit_date": 1486050584, "question_id": 41990931, "link": "https://stackoverflow.com/questions/41990931/element-wise-addition-of-1d-and-2d-numpy-arrays", "title": "Element-wise addition of 1D and 2D numpy arrays", "body": "<h2>Situation</h2>\n\n<p>I have objects that have attributes which are represented by numpy arrays:</p>\n\n<pre><code>&gt;&gt; obj = numpy.array([1, 2, 3])\n</code></pre>\n\n<p>where <code>1</code>, <code>2</code>, <code>3</code> are the attributes' values.</p>\n\n<p>I'm about to write a few methods that should work equally on <em>both</em> a single object and a group of objects. A group of objects is represented by a 2D numpy array:</p>\n\n<pre><code>&gt;&gt;&gt; group = numpy.array([[11, 21, 31],\n...                      [12, 22, 32],\n...                      [13, 23, 33]])\n</code></pre>\n\n<p>where the first digit indicates the object and the second digit indicates the attribute. That is <code>12</code> is attribute 2 of object 1 and <code>21</code> is attribute 1 of object 2.</p>\n\n<p><strong>Why this way and not transposed?</strong> Because I want the array indices to correspond to the attributes. That is <code>object_or_group[0]</code> should yield the first attribute either as a single number or as a numpy array, so it can be used for further computations.</p>\n\n<p>Alright, so when I want to compute the dot product for example this works out of the box:</p>\n\n<pre><code>&gt;&gt;&gt; obj = numpy.array([1, 2, 3])\n&gt;&gt;&gt; obj.dot(object_or_group)\n</code></pre>\n\n<p>What doesn't work is element-wise addition.</p>\n\n<p>Input:</p>\n\n<pre><code>&gt;&gt;&gt; group\narray([[1, 2, 3],\n       [4, 5, 6]])\n&gt;&gt;&gt; obj\narray([10, 20])\n</code></pre>\n\n<p>The resulting array should be the sum of the first element of <code>group</code> and <code>obj</code> and similar for the second element:</p>\n\n<pre><code>&gt;&gt;&gt; result = numpy.array([group[0] + obj[0],\n...                       group[1] + obj[1]])\n&gt;&gt;&gt; result\narray([[11, 12, 13],\n       [24, 25, 26]])\n</code></pre>\n\n<p>However:</p>\n\n<pre><code>&gt;&gt;&gt; group + obj\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nValueError: operands could not be broadcast together with shapes (2,3) (2,)\n</code></pre>\n\n<p>Which makes sense considering numpy's <a href=\"https://docs.scipy.org/doc/numpy/user/basics.broadcasting.html\" rel=\"nofollow noreferrer\">broadcasting rules</a>.</p>\n\n<p>It seems that there is no numpy function which performs an addition (or equivalently the broadcasting) along a specified axis. While I could use </p>\n\n<pre><code>&gt;&gt;&gt; (group.T + obj).T\narray([[11, 12, 13],\n       [24, 25, 26]])\n</code></pre>\n\n<p>this feels very cumbersome (and if, instead of a group, I consider a single object this feels wrong indeed). Especially because numpy covered each and every corner case for its usage, I have the feeling that I might have gotten something conceptually wrong here.</p>\n\n<h2>To sum it up</h2>\n\n<p>Similarly to</p>\n\n<pre><code>&gt;&gt;&gt; obj1\narray([1, 2])\n&gt;&gt;&gt; obj2\narray([10, 20])\n&gt;&gt;&gt; obj1 + obj2\narray([11, 22])\n</code></pre>\n\n<p>(which performs an element-wise - or attribute-wise - addition) I want to do the same for groups of objects:</p>\n\n<pre><code>&gt;&gt;&gt; group\narray([[1, 2, 3],\n       [4, 5, 6]])\n</code></pre>\n\n<p>while the layout of such a 2D group array must be such that the single objects are listed along the 2nd axis (<code>axis=1</code>) in order to be able to request a certain attribute (or many) via normal indexing: <code>obj[0]</code> and <code>group[0]</code> should both yield the first attribute(s).</p>\n"}, {"tags": ["python", "image", "pygame", "atom-editor"], "comments": [{"owner": {"reputation": 36576, "user_id": 2341603, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZTHIr.jpg?s=128&g=1", "display_name": "Obsidian Age", "link": "https://stackoverflow.com/users/2341603/obsidian-age"}, "edited": false, "score": 0, "creation_date": 1485988301, "post_id": 41990924, "comment_id": 71159279, "body": "You&#39;re using a file with a space in the name, so it&#39;s possible that the interpreter is getting confused, and thinking that <code>my</code> is the file to open, and <code>background.png</code> is another command. Have you tried with a file without a space in the name?"}, {"owner": {"reputation": 25, "user_id": 7366597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QZEld.png?s=128&g=1", "display_name": "yougetagoldstar", "link": "https://stackoverflow.com/users/7366597/yougetagoldstar"}, "reply_to_user": {"reputation": 36576, "user_id": 2341603, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZTHIr.jpg?s=128&g=1", "display_name": "Obsidian Age", "link": "https://stackoverflow.com/users/2341603/obsidian-age"}, "edited": false, "score": 0, "creation_date": 1485988540, "post_id": 41990924, "comment_id": 71159375, "body": "just tried mybackground.png no spaces, and it threw me the same error... so strange."}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 7366597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QZEld.png?s=128&g=1", "display_name": "yougetagoldstar", "link": "https://stackoverflow.com/users/7366597/yougetagoldstar"}, "edited": false, "score": 0, "creation_date": 1486004164, "post_id": 41992900, "comment_id": 71163964, "body": "Gotcha, and thank you. Those lines worked. Didn&#39;t know that about the atom-runner."}], "tags": [], "owner": {"reputation": 818, "user_id": 5463666, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-0GCSsX1WQ04/AAAAAAAAAAI/AAAAAAAAABY/fLxnxtbonBs/photo.jpg?sz=128", "display_name": "Chris", "link": "https://stackoverflow.com/users/5463666/chris"}, "is_accepted": true, "score": 1, "last_activity_date": 1485999349, "creation_date": 1485999349, "answer_id": 41992900, "question_id": 41990924, "link": "https://stackoverflow.com/questions/41990924/atom-atom-runner-cant-find-images-use-them-with-pygame/41992900#41992900", "title": "atom: atom-runner cant find images / use them with pygame", "body": "<p>Your problem is that atom-runner uses the Atom project path as the working directory when running a program.  Your program is assuming the working directory is same as the folder the image is in.  You need to either set up an Atom project with that as the root folder, or use 'os.path' to set the proper path to the image, like so:</p>\n\n<pre><code>from os import path\n\nworking_dir = path.dirname(__file__)\nbackground_image = pygame.image.load(path.join(working_dir, 'my background.png')).convert()\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 7366597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QZEld.png?s=128&g=1", "display_name": "yougetagoldstar", "link": "https://stackoverflow.com/users/7366597/yougetagoldstar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 486, "favorite_count": 0, "accepted_answer_id": 41992900, "answer_count": 1, "score": 0, "last_activity_date": 1485999349, "creation_date": 1485987656, "last_edit_date": 1485993956, "question_id": 41990924, "link": "https://stackoverflow.com/questions/41990924/atom-atom-runner-cant-find-images-use-them-with-pygame", "title": "atom: atom-runner cant find images / use them with pygame", "body": "<p>using python 36, \npygame 1.9.3, \natom 1.13 text editor</p>\n\n<p>First time asking a question here on stack overflow.</p>\n\n<p>For some reason when loading up an image (in the same folder as the .py file) like so:</p>\n\n<pre><code>background_image = pygame.image.load('my background.png').convert()\n</code></pre>\n\n<p>set my blit line, and running it with atom runner I get this error: </p>\n\n<pre><code>pygame.error: Couldn't open my background.png\n</code></pre>\n\n<p>but when I double click on the actual .py file, my image loads fine.</p>\n\n<p>also, if I actually type the full directory path of the image in atom, the image loads fine.</p>\n\n<p>I'm pretty new to coding. I'm guessing this has something to do with \"path\"? I've only messed with paths to make atom runner use the proper pygame version, but I have no idea why it won't load my image file like the python IDLE does.</p>\n"}, {"tags": ["python", "python-3.x", "python-import"], "comments": [{"owner": {"reputation": 118102, "user_id": 4952130, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kKQZw.png?s=128&g=1", "display_name": "Dimitris Fasarakis Hilliard", "link": "https://stackoverflow.com/users/4952130/dimitris-fasarakis-hilliard"}, "edited": false, "score": 3, "creation_date": 1485987894, "post_id": 41990900, "comment_id": 71159108, "body": "Afaik <code>from mod import *</code> isn&#39;t exposed in some way, there&#39;s a special byte-code generated for it and it is handled by <code>C</code> code."}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "reply_to_user": {"reputation": 118102, "user_id": 4952130, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kKQZw.png?s=128&g=1", "display_name": "Dimitris Fasarakis Hilliard", "link": "https://stackoverflow.com/users/4952130/dimitris-fasarakis-hilliard"}, "edited": false, "score": 0, "creation_date": 1485988178, "post_id": 41990900, "comment_id": 71159221, "body": "@JimFasarakis-Hilliard. While possible, I will continue to wait for an answer. Importlib exposes or at least replicates some pretty detailed functionality. I always assumed it had the entire loading mechanism available in it, but haven&#39;t been able to find this particular piece."}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "reply_to_user": {"reputation": 118102, "user_id": 4952130, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kKQZw.png?s=128&g=1", "display_name": "Dimitris Fasarakis Hilliard", "link": "https://stackoverflow.com/users/4952130/dimitris-fasarakis-hilliard"}, "edited": false, "score": 0, "creation_date": 1485988400, "post_id": 41990900, "comment_id": 71159317, "body": "Removed the generic python tag."}, {"owner": {"reputation": 118102, "user_id": 4952130, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kKQZw.png?s=128&g=1", "display_name": "Dimitris Fasarakis Hilliard", "link": "https://stackoverflow.com/users/4952130/dimitris-fasarakis-hilliard"}, "edited": false, "score": 1, "creation_date": 1485988455, "post_id": 41990900, "comment_id": 71159340, "body": "Not sure about it either that&#39;s why I went for a comment :-). Why remove the python tag? You&#39;re excluding many people who don&#39;t lurk in the <code>3.x</code> tag from seeing it."}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "reply_to_user": {"reputation": 118102, "user_id": 4952130, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kKQZw.png?s=128&g=1", "display_name": "Dimitris Fasarakis Hilliard", "link": "https://stackoverflow.com/users/4952130/dimitris-fasarakis-hilliard"}, "edited": false, "score": 1, "creation_date": 1485988568, "post_id": 41990900, "comment_id": 71159392, "body": "@JimFasarakis-Hilliard. My question is specifically Python3 related, but I suppose you have a good point. Reinstated."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1485989219, "post_id": 41990900, "comment_id": 71159644, "body": "The generic <code>python</code> tag should go on all <code>python</code>-related question. If a question is <i>specifically</i> about a particular version, a more <i>specific</i> tag may be added <i>in addition to</i> the generic tag."}], "answers": [{"comments": [{"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1485988798, "post_id": 41991139, "comment_id": 71159487, "body": "I agree that there is no function to replace either statement exactly, but there is an equivalent function <i>call</i> (or couple of calls) that does the same thing. I am very surprised (and a little skeptical) that the selection code you have provided does not exist somewhere in importlib."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "reply_to_user": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1485989070, "post_id": 41991139, "comment_id": 71159600, "body": "@MadPhysicist: They&#39;re not going to provide a function that assigns your variables for you. Too much magic, and it&#39;d only ever be usable at global or class scope anyway. (Regular Python 3 <code>import *</code> is only usable at global scope, but regular <code>import *</code> inside a function can be caught at compile time)."}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1485989212, "post_id": 41991139, "comment_id": 71159641, "body": "That makes sense. I will wait a day or so and select your answer."}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 1, "creation_date": 1486239700, "post_id": 41991139, "comment_id": 71263443, "body": "Just finally processed <code>fromlist=[&#39;*&#39;]</code>. That&#39;s the only non trivial part, so thanks for that specifically"}, {"owner": {"reputation": 26765, "user_id": 281545, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/e9afcf11d81904cdb5677c13d249b6c5?s=128&d=identicon&r=PG", "display_name": "Mr_and_Mrs_D", "link": "https://stackoverflow.com/users/281545/mr-and-mrs-d"}, "edited": false, "score": 0, "creation_date": 1487409023, "post_id": 41991139, "comment_id": 71780490, "body": "Just to make this clear - if no <code>__all__</code> directive is present, will <code>from whatever import *</code> import <i>all submodules</i> if whatever is a package or just the names in <code>whatever&#47;__init__.py</code> ?"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "reply_to_user": {"reputation": 26765, "user_id": 281545, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/e9afcf11d81904cdb5677c13d249b6c5?s=128&d=identicon&r=PG", "display_name": "Mr_and_Mrs_D", "link": "https://stackoverflow.com/users/281545/mr-and-mrs-d"}, "edited": false, "score": 1, "creation_date": 1487435815, "post_id": 41991139, "comment_id": 71788844, "body": "@Mr_and_Mrs_D: It will import whatever submodules happen to be loaded at the end of <code>__init__.py</code>. Which submodules these are will depend on what other imports have been executed in the program."}], "tags": [], "owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "is_accepted": true, "score": 20, "last_activity_date": 1596222779, "last_edit_date": 1596222779, "creation_date": 1485988665, "answer_id": 41991139, "question_id": 41990900, "link": "https://stackoverflow.com/questions/41990900/what-is-the-function-form-of-star-import-in-python-3/41991139#41991139", "title": "What is the function form of star import in Python 3", "body": "<p>There's no function for <code>from whatever import *</code>. In fact, there's no function for <code>import whatever</code>, either! When you do</p>\n<pre><code>mod = __import__(...)\n</code></pre>\n<p>the <code>__import__</code> function is only responsible for part of the job. It provides you with a module object, but you have to assign that module object to a variable separately. There's no function that will import a module <em>and</em> assign it to a variable the way <code>import whatever</code> does.</p>\n<hr />\n<p>In <code>from whatever import *</code>, there are two parts:</p>\n<ul>\n<li>prepare the module object for <code>whatever</code></li>\n<li>assign variables</li>\n</ul>\n<p>The &quot;prepare the module object&quot; part is almost identical to in <code>import whatever</code>, and it can be handled by the same function, <code>__import__</code>. There's a minor difference in that <code>import *</code> will load any not-yet-loaded submodules in a package's <code>__all__</code> list; <code>__import__</code> will handle this for you if you provide <code>fromlist=['*']</code>:</p>\n<pre><code>module = __import__('whatever', fromlist=['*'])\n</code></pre>\n<p>The part about assigning names is where the big differences occur, and again, you have to handle that yourself. It's fairly straightforward, as long as you're at global scope:</p>\n<pre><code>if hasattr(module, '__all__'):\n    all_names = module.__all__\nelse:\n    all_names = [name for name in dir(module) if not name.startswith('_')]\n\nglobals().update({name: getattr(module, name) for name in all_names})\n</code></pre>\n<p>Function scopes don't support assigning variables determined at runtime.</p>\n"}], "owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2098, "favorite_count": 4, "accepted_answer_id": 41991139, "answer_count": 1, "score": 21, "last_activity_date": 1596222779, "creation_date": 1485987556, "last_edit_date": 1495540813, "question_id": 41990900, "link": "https://stackoverflow.com/questions/41990900/what-is-the-function-form-of-star-import-in-python-3", "title": "What is the function form of star import in Python 3", "body": "<p>What is the equivalent of <code>import *</code> in Python using functions (presumably from <code>importlib</code>)?</p>\n\n<p>I know that you can import a module with <code>mod = __import__(...)</code>, which will delegate to whatever the currently configured implementation is. You can also do something like</p>\n\n<pre><code>mod_spec = importlib.utl.spec_from_file_location(...)\nmod = importlib.util.module_from_spec(mod_spec)\nmod_spec.loader.exec_module(mod)\n</code></pre>\n\n<p>which allows you to do crazy things like injecting things into the module by inserting them before the call to <code>exec_module</code>. (Courtesy of <a href=\"https://stackoverflow.com/a/67692/2988730\">https://stackoverflow.com/a/67692/2988730</a> and <a href=\"https://stackoverflow.com/a/38650878/2988730\">https://stackoverflow.com/a/38650878/2988730</a>)</p>\n\n<p>However, my question remains. How does <code>import *</code> work in function form? What function determines which names to load from a module depending on the presence/contents of <code>__all__</code>?</p>\n"}, {"tags": ["python", "tensorflow"], "comments": [{"owner": {"reputation": 1117, "user_id": 6112394, "user_type": "registered", "accept_rate": 82, "profile_image": "https://lh4.googleusercontent.com/-g4lGkT9FtLo/AAAAAAAAAAI/AAAAAAAAXr8/IjImddo1rY4/photo.jpg?sz=128", "display_name": "Matt Camp", "link": "https://stackoverflow.com/users/6112394/matt-camp"}, "edited": false, "score": 0, "creation_date": 1486049342, "post_id": 41990876, "comment_id": 71188154, "body": "Doing some more playing with this and it seems that the problem lies with my read_and_decode function... When I try to run it, the program just sits and doesn&#39;t do anything. Any suggestions?"}, {"owner": {"reputation": 3071, "user_id": 6392807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d22f8ef1f71b37fe6522255d8b3dcc8?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Hawkins", "link": "https://stackoverflow.com/users/6392807/peter-hawkins"}, "edited": false, "score": 0, "creation_date": 1486071650, "post_id": 41990876, "comment_id": 71201187, "body": "Can you distill the problem down to a small self-contained example? There&#39;s too much code here to make it easy to work out the problem."}, {"owner": {"reputation": 1117, "user_id": 6112394, "user_type": "registered", "accept_rate": 82, "profile_image": "https://lh4.googleusercontent.com/-g4lGkT9FtLo/AAAAAAAAAAI/AAAAAAAAXr8/IjImddo1rY4/photo.jpg?sz=128", "display_name": "Matt Camp", "link": "https://stackoverflow.com/users/6112394/matt-camp"}, "reply_to_user": {"reputation": 3071, "user_id": 6392807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d22f8ef1f71b37fe6522255d8b3dcc8?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Hawkins", "link": "https://stackoverflow.com/users/6392807/peter-hawkins"}, "edited": false, "score": 0, "creation_date": 1486086533, "post_id": 41990876, "comment_id": 71206036, "body": "The above code is all self-contained..it will execute and provide the above error.  The below line of code seems to be the main problem, but I don&#39;t know what is wrong. My best guess is that I am reading the TFRecord file as the wrong datatype but I don&#39;t know <code>X, y = read_and_decode(filename_queue, datashape)</code>"}], "answers": [{"tags": [], "owner": {"reputation": 41, "user_id": 2405736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/553468267ee3a5c39caa210e78b9d55c?s=128&d=identicon&r=PG", "display_name": "Tom", "link": "https://stackoverflow.com/users/2405736/tom"}, "is_accepted": false, "score": 0, "last_activity_date": 1485988396, "creation_date": 1485988396, "answer_id": 41991079, "question_id": 41990876, "link": "https://stackoverflow.com/questions/41990876/tfrecords-queuerunner-error/41991079#41991079", "title": "TFRecords QueueRunner Error", "body": "<p>There's a lot to follow there so I'm not sure, but the quickest thing to check is whether your \"num_epochs\" is set properly. Those OutOfRangeErrors are thrown when the epoch limit has been reached.</p>\n"}], "owner": {"reputation": 1117, "user_id": 6112394, "user_type": "registered", "accept_rate": 82, "profile_image": "https://lh4.googleusercontent.com/-g4lGkT9FtLo/AAAAAAAAAAI/AAAAAAAAXr8/IjImddo1rY4/photo.jpg?sz=128", "display_name": "Matt Camp", "link": "https://stackoverflow.com/users/6112394/matt-camp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 481, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1486086993, "creation_date": 1485987477, "last_edit_date": 1486086993, "question_id": 41990876, "link": "https://stackoverflow.com/questions/41990876/tfrecords-queuerunner-error", "title": "TFRecords QueueRunner Error", "body": "<p>I am trying to load many csv files into a single TFRecord file then be able to feed that TFRecord to my model. I below is all my code and I have tried to break it down as to what I think I am doing. </p>\n\n<p><strong>Generate data.. the target variable will be the last column.</strong></p>\n\n<pre><code>for i in range(10):\n    filename = './Data/random_csv' + str(i) + '.csv'\n    pd.DataFrame(np.random.randint(0,100,size=(100, 50))).to_csv(filename)\n</code></pre>\n\n<p><strong>Functions for making TFRecord File</strong></p>\n\n<pre><code>def _int64_feature(value):\n  return tf.train.Feature(int64_list=tf.train.Int64List(value=[value]))\n\ndef _float_feature(value):\n  return tf.train.Feature(float_list=tf.train.FloatList(value=[value]))\n\ndef _bytes_feature(value):\n  return tf.train.Feature(bytes_list=tf.train.BytesList(value=[value]))\n\ndef make_q_list(filepathlist, filetype):\n    filepathlist = filepathlist\n    filepaths = []\n    labels = []\n    for path in filepathlist:\n        data_files = os.listdir(path)\n        for data in data_files:\n            if data.endswith(filetype):\n                data_file = os.path.join(path, data)\n                data_file = data_file\n                data_label = os.path.basename(os.path.normpath(path))\n                filepaths.append(data_file)\n                labels.append(data_label)\n\n    return filepaths, labels\n\ndef rnn_list_format(df):\n    input_data_list = []\n    output_data_list = []\n    y = df[df.columns[-1]]\n    X = df[df.columns[:-1]]\n    for i in range(len(df)):\n        output_data_list.append(y.loc[i])\n        input_data_list.append(X.loc[i].as_matrix())\n\n    return input_data_list, output_data_list\n\ndef data_split(df):\n    y = df[df.columns[-1]]\n    X = df[df.columns[:-1]]\n    X, y = X.as_matrix(), y.as_matrix()\n    return X, y\n</code></pre>\n\n<p><strong>The function to load csvs into Pandas. Then take the last column and make it my target variable, y. The Pandas dataframes get converted to numpy arrays and written to the TFRecords file.</strong></p>\n\n<pre><code>def tables_to_TF(queue_list, tf_filename, file_type='csv'):\n    #Target variable needs to be the last column of data\n    filepath = os.path.join(tf_filename)\n    print('Writing', filepath)\n    writer = tf.python_io.TFRecordWriter(tf_filename)\n    for file in tqdm(queue_list):\n        if file_type == 'csv':\n            data = pd.read_csv(file)\n            X, y = data_split(data)\n        elif file_type == 'hdf':\n            data = pd.read_hdf(file)\n            X, y = data_split(data)\n        else:\n            print(file_type, 'is not supported at this time...')\n            break\n        rec_count = X.shape[0]\n        for index in range(rec_count):\n            _X = np.asarray(X[index]).tostring()\n            _y = np.asarray(y[index]).tostring()\n            example = tf.train.Example(features=tf.train.Features(feature={\n                'X': _bytes_feature(_X),\n                'y': _bytes_feature(_y)}))\n            writer.write(example.SerializeToString())\n</code></pre>\n\n<p><strong>The function to read the TFRecords file.</strong> </p>\n\n<pre><code>def read_and_decode(filename_queue, datashape=160*160*3):\n    reader = tf.TFRecordReader()\n    _, serialized_example = reader.read(filename_queue)\n    features = tf.parse_single_example(\n        serialized_example,\n        features={\n            'X': tf.FixedLenFeature([], tf.string),  \n            'y': tf.FixedLenFeature([], tf.string)\n        })\n\n    X = tf.decode_raw(features['X'], tf.float32)\n    X.set_shape([datashape])\n    X = tf.cast(X, tf.float32)\n\n    y = tf.decode_raw(features['y'], tf.float32)\n    y.set_shape([1])\n    y = tf.cast(y, tf.float32)\n\n    return X, y\n</code></pre>\n\n<p><strong>Created the batches in Tensorflow</strong></p>\n\n<pre><code>def inputs(train_dir, file, batch_size, num_epochs, n_classes, one_hot_labels=False, datashape=160*160*3):\n\n    if not num_epochs: num_epochs = None\n    filename = os.path.join(train_dir, file)\n\n    with tf.name_scope('input'):\n        filename_queue = tf.train.string_input_producer(\n            [filename], num_epochs=num_epochs)\n\n        X, y = read_and_decode(filename_queue, datashape)\n\n        if one_hot_labels:\n            label = tf.one_hot(label, n_classes, dtype=tf.int32)\n\n        example_batch, label_batch = tf.train.shuffle_batch(\n            [X, y], batch_size=batch_size, num_threads=2,\n            capacity=2000, enqueue_many=False,\n            # Ensures a minimum amount of shuffling of examples.\n            min_after_dequeue=1000, name=file)\n\n    return example_batch, label_batch\n</code></pre>\n\n<p><strong>Make the TFRecord file from the data that was created.</strong></p>\n\n<pre><code>filepathlist = ['./Data']\nq, _ = make_q_list(filepathlist, '.csv')            \ntffilename = 'Demo_TFR.tfrecords'\ntables_to_TF(q, tffilename, file_type='csv')\n</code></pre>\n\n<p><strong>Attempt to load the TFRecord file into a queueRunner.</strong></p>\n\n<pre><code>X_train_batch, y_train_batch = inputs('./',\n                                      'Demo_TFR.tfrecords',\n                                      50,\n                                      1,\n                                      0,\n                                      one_hot_labels=False,\n                                      datashape=50)\nsess = tf.Session()\ninit_op = tf.group(tf.global_variables_initializer())\nsess.run(init_op)\ncoord = tf.train.Coordinator()\nthreads = tf.train.start_queue_runners(sess=sess, coord=coord)\nsess.run([X_train_batch, y_train_batch])\n</code></pre>\n\n<p><strong>ERROR</strong></p>\n\n<pre><code>    INFO:tensorflow:Error reported to Coordinator: &lt;class 'tensorflow.python.framework.errors_impl.FailedPreconditionError'&gt;, Attempting to use uninitialized value input/input_producer/limit_epochs/epochs\n     [[Node: input/input_producer/limit_epochs/CountUpTo = CountUpTo[T=DT_INT64, _class=[\"loc:@input/input_producer/limit_epochs/epochs\"], limit=1, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](input/input_producer/limit_epochs/epochs)]]\n\nCaused by op 'input/input_producer/limit_epochs/CountUpTo', defined at:\n  File \"/home/mcamp/anaconda3/lib/python3.5/runpy.py\", line 184, in _run_module_as_main\n    \"__main__\", mod_spec)\n  File \"/home/mcamp/anaconda3/lib/python3.5/runpy.py\", line 85, in _run_code\n    exec(code, run_globals)\n  File \"/home/mcamp/anaconda3/lib/python3.5/site-packages/ipykernel/__main__.py\", line 3, in &lt;module&gt;\n    app.launch_new_instance()\n  File \"/home/mcamp/anaconda3/lib/python3.5/site-packages/traitlets/config/application.py\", line 658, in launch_instance\n    app.start()\n  File \"/home/mcamp/anaconda3/lib/python3.5/site-packages/ipykernel/kernelapp.py\", line 474, in start\n    ioloop.IOLoop.instance().start()\n  File \"/home/mcamp/anaconda3/lib/python3.5/site-packages/zmq/eventloop/ioloop.py\", line 177, in start\n    super(ZMQIOLoop, self).start()\n  File \"/home/mcamp/anaconda3/lib/python3.5/site-packages/tornado/ioloop.py\", line 887, in start\n    handler_func(fd_obj, events)\n  File \"/home/mcamp/anaconda3/lib/python3.5/site-packages/tornado/stack_context.py\", line 275, in null_wrapper\n    return fn(*args, **kwargs)\n  File \"/home/mcamp/anaconda3/lib/python3.5/site-packages/zmq/eventloop/zmqstream.py\", line 440, in _handle_events\n    self._handle_recv()\n  File \"/home/mcamp/anaconda3/lib/python3.5/site-packages/zmq/eventloop/zmqstream.py\", line 472, in _handle_recv\n    self._run_callback(callback, msg)\n  File \"/home/mcamp/anaconda3/lib/python3.5/site-packages/zmq/eventloop/zmqstream.py\", line 414, in _run_callback\n    callback(*args, **kwargs)\n  File \"/home/mcamp/anaconda3/lib/python3.5/site-packages/tornado/stack_context.py\", line 275, in null_wrapper\n    return fn(*args, **kwargs)\n  File \"/home/mcamp/anaconda3/lib/python3.5/site-packages/ipykernel/kernelbase.py\", line 276, in dispatcher\n    return self.dispatch_shell(stream, msg)\n  File \"/home/mcamp/anaconda3/lib/python3.5/site-packages/ipykernel/kernelbase.py\", line 228, in dispatch_shell\n    handler(stream, idents, msg)\n  File \"/home/mcamp/anaconda3/lib/python3.5/site-packages/ipykernel/kernelbase.py\", line 390, in execute_request\n    user_expressions, allow_stdin)\n  File \"/home/mcamp/anaconda3/lib/python3.5/site-packages/ipykernel/ipkernel.py\", line 196, in do_execute\n    res = shell.run_cell(code, store_history=store_history, silent=silent)\n  File \"/home/mcamp/anaconda3/lib/python3.5/site-packages/ipykernel/zmqshell.py\", line 501, in run_cell\n    return super(ZMQInteractiveShell, self).run_cell(*args, **kwargs)\n  File \"/home/mcamp/anaconda3/lib/python3.5/site-packages/IPython/core/interactiveshell.py\", line 2717, in run_cell\n    interactivity=interactivity, compiler=compiler, result=result)\n  File \"/home/mcamp/anaconda3/lib/python3.5/site-packages/IPython/core/interactiveshell.py\", line 2821, in run_ast_nodes\n    if self.run_code(code, result):\n  File \"/home/mcamp/anaconda3/lib/python3.5/site-packages/IPython/core/interactiveshell.py\", line 2881, in run_code\n    exec(code_obj, self.user_global_ns, self.user_ns)\n  File \"&lt;ipython-input-13-a00f528d3e80&gt;\", line 7, in &lt;module&gt;\n    datashape=50)\n  File \"&lt;ipython-input-11-468d0a66f589&gt;\", line 94, in inputs\n    [filename], num_epochs=num_epochs)\n  File \"/home/mcamp/anaconda3/lib/python3.5/site-packages/tensorflow/python/training/input.py\", line 230, in string_input_producer\n    cancel_op=cancel_op)\n  File \"/home/mcamp/anaconda3/lib/python3.5/site-packages/tensorflow/python/training/input.py\", line 156, in input_producer\n    input_tensor = limit_epochs(input_tensor, num_epochs)\n  File \"/home/mcamp/anaconda3/lib/python3.5/site-packages/tensorflow/python/training/input.py\", line 96, in limit_epochs\n    counter = epochs.count_up_to(num_epochs)\n  File \"/home/mcamp/anaconda3/lib/python3.5/site-packages/tensorflow/python/ops/variables.py\", line 652, in count_up_to\n    return state_ops.count_up_to(self._variable, limit=limit)\n  File \"/home/mcamp/anaconda3/lib/python3.5/site-packages/tensorflow/python/ops/gen_state_ops.py\", line 126, in count_up_to\n    result = _op_def_lib.apply_op(\"CountUpTo\", ref=ref, limit=limit, name=name)\n  File \"/home/mcamp/anaconda3/lib/python3.5/site-packages/tensorflow/python/framework/op_def_library.py\", line 759, in apply_op\n    op_def=op_def)\n  File \"/home/mcamp/anaconda3/lib/python3.5/site-packages/tensorflow/python/framework/ops.py\", line 2240, in create_op\n    original_op=self._default_original_op, op_def=op_def)\n  File \"/home/mcamp/anaconda3/lib/python3.5/site-packages/tensorflow/python/framework/ops.py\", line 1128, in __init__\n    self._traceback = _extract_stack()\n\nFailedPreconditionError (see above for traceback): Attempting to use uninitialized value input/input_producer/limit_epochs/epochs\n     [[Node: input/input_producer/limit_epochs/CountUpTo = CountUpTo[T=DT_INT64, _class=[\"loc:@input/input_producer/limit_epochs/epochs\"], limit=1, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](input/input_producer/limit_epochs/epochs)]]\n\n---------------------------------------------------------------------------\nOutOfRangeError                           Traceback (most recent call last)\n/home/mcamp/anaconda3/lib/python3.5/site-packages/tensorflow/python/client/session.py in _do_call(self, fn, *args)\n   1020     try:\n-&gt; 1021       return fn(*args)\n   1022     except errors.OpError as e:\n\n/home/mcamp/anaconda3/lib/python3.5/site-packages/tensorflow/python/client/session.py in _run_fn(session, feed_dict, fetch_list, target_list, options, run_metadata)\n   1002                                  feed_dict, fetch_list, target_list,\n-&gt; 1003                                  status, run_metadata)\n   1004 \n\n/home/mcamp/anaconda3/lib/python3.5/contextlib.py in __exit__(self, type, value, traceback)\n     65             try:\n---&gt; 66                 next(self.gen)\n     67             except StopIteration:\n\n/home/mcamp/anaconda3/lib/python3.5/site-packages/tensorflow/python/framework/errors_impl.py in raise_exception_on_not_ok_status()\n    468           compat.as_text(pywrap_tensorflow.TF_Message(status)),\n--&gt; 469           pywrap_tensorflow.TF_GetCode(status))\n    470   finally:\n\nOutOfRangeError: RandomShuffleQueue '_7_input_1/Demo_TFR.tfrecords/random_shuffle_queue' is closed and has insufficient elements (requested 50, current size 0)\n     [[Node: input_1/Demo_TFR.tfrecords = QueueDequeueMany[_class=[\"loc:@input_1/Demo_TFR.tfrecords/random_shuffle_queue\"], component_types=[DT_FLOAT, DT_FLOAT], timeout_ms=-1, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](input_1/Demo_TFR.tfrecords/random_shuffle_queue, input_1/Demo_TFR.tfrecords/n)]]\n\nDuring handling of the above exception, another exception occurred:\n\nOutOfRangeError                           Traceback (most recent call last)\n&lt;ipython-input-17-a00f528d3e80&gt; in &lt;module&gt;()\n     12 coord = tf.train.Coordinator()\n     13 threads = tf.train.start_queue_runners(sess=sess, coord=coord)\n---&gt; 14 sess.run([X_train_batch, y_train_batch])\n\n/home/mcamp/anaconda3/lib/python3.5/site-packages/tensorflow/python/client/session.py in run(self, fetches, feed_dict, options, run_metadata)\n    764     try:\n    765       result = self._run(None, fetches, feed_dict, options_ptr,\n--&gt; 766                          run_metadata_ptr)\n    767       if run_metadata:\n    768         proto_data = tf_session.TF_GetBuffer(run_metadata_ptr)\n\n/home/mcamp/anaconda3/lib/python3.5/site-packages/tensorflow/python/client/session.py in _run(self, handle, fetches, feed_dict, options, run_metadata)\n    962     if final_fetches or final_targets:\n    963       results = self._do_run(handle, final_targets, final_fetches,\n--&gt; 964                              feed_dict_string, options, run_metadata)\n    965     else:\n    966       results = []\n\n/home/mcamp/anaconda3/lib/python3.5/site-packages/tensorflow/python/client/session.py in _do_run(self, handle, target_list, fetch_list, feed_dict, options, run_metadata)\n   1012     if handle is None:\n   1013       return self._do_call(_run_fn, self._session, feed_dict, fetch_list,\n-&gt; 1014                            target_list, options, run_metadata)\n   1015     else:\n   1016       return self._do_call(_prun_fn, self._session, handle, feed_dict,\n\n/home/mcamp/anaconda3/lib/python3.5/site-packages/tensorflow/python/client/session.py in _do_call(self, fn, *args)\n   1032         except KeyError:\n   1033           pass\n-&gt; 1034       raise type(e)(node_def, op, message)\n   1035 \n   1036   def _extend_graph(self):\n\nOutOfRangeError: RandomShuffleQueue '_7_input_1/Demo_TFR.tfrecords/random_shuffle_queue' is closed and has insufficient elements (requested 50, current size 0)\n     [[Node: input_1/Demo_TFR.tfrecords = QueueDequeueMany[_class=[\"loc:@input_1/Demo_TFR.tfrecords/random_shuffle_queue\"], component_types=[DT_FLOAT, DT_FLOAT], timeout_ms=-1, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](input_1/Demo_TFR.tfrecords/random_shuffle_queue, input_1/Demo_TFR.tfrecords/n)]]\n\nCaused by op 'input_1/Demo_TFR.tfrecords', defined at:\n  File \"/home/mcamp/anaconda3/lib/python3.5/runpy.py\", line 184, in _run_module_as_main\n    \"__main__\", mod_spec)\n  File \"/home/mcamp/anaconda3/lib/python3.5/runpy.py\", line 85, in _run_code\n    exec(code, run_globals)\n  File \"/home/mcamp/anaconda3/lib/python3.5/site-packages/ipykernel/__main__.py\", line 3, in &lt;module&gt;\n    app.launch_new_instance()\n  File \"/home/mcamp/anaconda3/lib/python3.5/site-packages/traitlets/config/application.py\", line 658, in launch_instance\n    app.start()\n  File \"/home/mcamp/anaconda3/lib/python3.5/site-packages/ipykernel/kernelapp.py\", line 474, in start\n    ioloop.IOLoop.instance().start()\n  File \"/home/mcamp/anaconda3/lib/python3.5/site-packages/zmq/eventloop/ioloop.py\", line 177, in start\n    super(ZMQIOLoop, self).start()\n  File \"/home/mcamp/anaconda3/lib/python3.5/site-packages/tornado/ioloop.py\", line 887, in start\n    handler_func(fd_obj, events)\n  File \"/home/mcamp/anaconda3/lib/python3.5/site-packages/tornado/stack_context.py\", line 275, in null_wrapper\n    return fn(*args, **kwargs)\n  File \"/home/mcamp/anaconda3/lib/python3.5/site-packages/zmq/eventloop/zmqstream.py\", line 440, in _handle_events\n    self._handle_recv()\n  File \"/home/mcamp/anaconda3/lib/python3.5/site-packages/zmq/eventloop/zmqstream.py\", line 472, in _handle_recv\n    self._run_callback(callback, msg)\n  File \"/home/mcamp/anaconda3/lib/python3.5/site-packages/zmq/eventloop/zmqstream.py\", line 414, in _run_callback\n    callback(*args, **kwargs)\n  File \"/home/mcamp/anaconda3/lib/python3.5/site-packages/tornado/stack_context.py\", line 275, in null_wrapper\n    return fn(*args, **kwargs)\n  File \"/home/mcamp/anaconda3/lib/python3.5/site-packages/ipykernel/kernelbase.py\", line 276, in dispatcher\n    return self.dispatch_shell(stream, msg)\n  File \"/home/mcamp/anaconda3/lib/python3.5/site-packages/ipykernel/kernelbase.py\", line 228, in dispatch_shell\n    handler(stream, idents, msg)\n  File \"/home/mcamp/anaconda3/lib/python3.5/site-packages/ipykernel/kernelbase.py\", line 390, in execute_request\n    user_expressions, allow_stdin)\n  File \"/home/mcamp/anaconda3/lib/python3.5/site-packages/ipykernel/ipkernel.py\", line 196, in do_execute\n    res = shell.run_cell(code, store_history=store_history, silent=silent)\n  File \"/home/mcamp/anaconda3/lib/python3.5/site-packages/ipykernel/zmqshell.py\", line 501, in run_cell\n    return super(ZMQInteractiveShell, self).run_cell(*args, **kwargs)\n  File \"/home/mcamp/anaconda3/lib/python3.5/site-packages/IPython/core/interactiveshell.py\", line 2717, in run_cell\n    interactivity=interactivity, compiler=compiler, result=result)\n  File \"/home/mcamp/anaconda3/lib/python3.5/site-packages/IPython/core/interactiveshell.py\", line 2821, in run_ast_nodes\n    if self.run_code(code, result):\n  File \"/home/mcamp/anaconda3/lib/python3.5/site-packages/IPython/core/interactiveshell.py\", line 2881, in run_code\n    exec(code_obj, self.user_global_ns, self.user_ns)\n  File \"&lt;ipython-input-17-a00f528d3e80&gt;\", line 7, in &lt;module&gt;\n    datashape=50)\n  File \"&lt;ipython-input-15-468d0a66f589&gt;\", line 105, in inputs\n    min_after_dequeue=1000, name=file)\n  File \"/home/mcamp/anaconda3/lib/python3.5/site-packages/tensorflow/python/training/input.py\", line 917, in shuffle_batch\n    dequeued = queue.dequeue_many(batch_size, name=name)\n  File \"/home/mcamp/anaconda3/lib/python3.5/site-packages/tensorflow/python/ops/data_flow_ops.py\", line 458, in dequeue_many\n    self._queue_ref, n=n, component_types=self._dtypes, name=name)\n  File \"/home/mcamp/anaconda3/lib/python3.5/site-packages/tensorflow/python/ops/gen_data_flow_ops.py\", line 1099, in _queue_dequeue_many\n    timeout_ms=timeout_ms, name=name)\n  File \"/home/mcamp/anaconda3/lib/python3.5/site-packages/tensorflow/python/framework/op_def_library.py\", line 759, in apply_op\n    op_def=op_def)\n  File \"/home/mcamp/anaconda3/lib/python3.5/site-packages/tensorflow/python/framework/ops.py\", line 2240, in create_op\n    original_op=self._default_original_op, op_def=op_def)\n  File \"/home/mcamp/anaconda3/lib/python3.5/site-packages/tensorflow/python/framework/ops.py\", line 1128, in __init__\n    self._traceback = _extract_stack()\n\nOutOfRangeError (see above for traceback): RandomShuffleQueue '_7_input_1/Demo_TFR.tfrecords/random_shuffle_queue' is closed and has insufficient elements (requested 50, current size 0)\n     [[Node: input_1/Demo_TFR.tfrecords = QueueDequeueMany[_class=[\"loc:@input_1/Demo_TFR.tfrecords/random_shuffle_queue\"], component_types=[DT_FLOAT, DT_FLOAT], timeout_ms=-1, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](input_1/Demo_TFR.tfrecords/random_shuffle_queue, input_1/Demo_TFR.tfrecords/n)]]\n</code></pre>\n\n<p><strong>EDIT:</strong>\nThe below code is what seems to be the root cause of the problem. I think I am not parsing the TFRecord file properly (duh*). I think maybe I am not reading it in as the correct data type. Almost the exact same code will read pictures into a TFRecord and back out.. Only difference is that I am trying to send float32 values through it all. </p>\n\n<pre><code>def read_and_decode(filename_queue, datashape=160*160*3):\n    reader = tf.TFRecordReader()\n    _, serialized_example = reader.read(filename_queue)\n    features = tf.parse_single_example(\n        serialized_example,\n        features={\n            'X': tf.FixedLenFeature([], tf.string),  \n            'y': tf.FixedLenFeature([], tf.string)\n        })\n\n    X = tf.decode_raw(features['X'], tf.float32)\n    X.set_shape([datashape])\n    X = tf.cast(X, tf.float32)\n\n    y = tf.decode_raw(features['y'], tf.float32)\n    y.set_shape([1])\n    y = tf.cast(y, tf.float32)\n\n    return X, y\n</code></pre>\n"}, {"tags": ["python", "arrays", "numpy"], "answers": [{"comments": [{"owner": {"reputation": 8803, "user_id": 3867406, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/2953c91f637b80205241c00c3e215b9a?s=128&d=identicon&r=PG&f=1", "display_name": "ted", "link": "https://stackoverflow.com/users/3867406/ted"}, "edited": false, "score": 0, "creation_date": 1485989235, "post_id": 41990983, "comment_id": 71159651, "body": "I did mean the merged index. Thanks for your help!"}], "tags": [], "owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "is_accepted": true, "score": 1, "last_activity_date": 1485988270, "last_edit_date": 1485988270, "creation_date": 1485987951, "answer_id": 41990983, "question_id": 41990871, "link": "https://stackoverflow.com/questions/41990871/argmax-on-2-axis-for-3-d-numpy-array/41990983#41990983", "title": "argmax on 2 axis for 3-d numpy array", "body": "<p>Reshape to merge those last two axes and then use <code>np.argmax</code> -</p>\n\n<pre><code>idx = x.reshape(x.shape[0],-1).argmax(-1)\nout = np.unravel_index(idx, x.shape[-2:])\n</code></pre>\n\n<p>Sample run -</p>\n\n<pre><code>In [263]: x = np.random.randint(10, size=(4,3,3))\n\nIn [264]: x\nOut[264]: \narray([[[0, 9, 2],\n        [7, 7, 8],\n        [2, 5, 9]],\n\n       [[1, 7, 2],\n        [8, 9, 0],\n        [2, 8, 3]],\n\n       [[7, 5, 0],\n        [7, 1, 6],\n        [5, 1, 1]],\n\n       [[0, 7, 3],\n        [5, 4, 1],\n        [9, 8, 9]]])\n\nIn [265]: idx = x.reshape(x.shape[0],-1).argmax(-1)\n\nIn [266]: np.unravel_index(idx, x.shape[-2:])\nOut[266]: (array([0, 1, 0, 2]), array([1, 1, 0, 0]))\n</code></pre>\n\n<p>If you meant getting the merged index, then its simpler -</p>\n\n<pre><code>x.reshape(x.shape[0],-1).argmax(1)\n</code></pre>\n\n<p>Sample run -</p>\n\n<pre><code>In [283]: x\nOut[283]: \narray([[[2, 3, 7],\n        [8, 1, 0],\n        [3, 6, 9]],\n\n       [[8, 0, 5],\n        [2, 2, 9],\n        [9, 0, 9]],\n\n       [[1, 9, 2],\n        [5, 0, 3],\n        [7, 2, 1]],\n\n       [[1, 6, 5],\n        [2, 3, 7],\n        [7, 4, 6]]])\n\nIn [284]: x.reshape(x.shape[0],-1).argmax(1)\nOut[284]: array([8, 5, 1, 5])\n</code></pre>\n"}], "owner": {"reputation": 8803, "user_id": 3867406, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/2953c91f637b80205241c00c3e215b9a?s=128&d=identicon&r=PG&f=1", "display_name": "ted", "link": "https://stackoverflow.com/users/3867406/ted"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1216, "favorite_count": 0, "accepted_answer_id": 41990983, "answer_count": 1, "score": 2, "last_activity_date": 1485988270, "creation_date": 1485987448, "question_id": 41990871, "link": "https://stackoverflow.com/questions/41990871/argmax-on-2-axis-for-3-d-numpy-array", "title": "argmax on 2 axis for 3-d numpy array", "body": "<p>I'd like to obtain a 1D array of indexes from a 3D matrix.</p>\n\n<p>For instance given <code>x = np.random.randint(10, size=(10,3,3))</code>, I'd like to do something like <code>np.argmax(x, axis=(1,2))</code> just like you can do with <code>np.max</code>, that is, obtain a 1D array of length 10 containing the indexes (0 to 8) of the maximums of each submatrix of size <code>(3,3)</code>.</p>\n\n<p>I have not found anything helpful so far and I want to avoid looping on the first dimension (and use <code>np.argmax(x)</code>) as it is quite big.</p>\n\n<p>Cheers!</p>\n"}, {"tags": ["python", "video", "moviepy"], "comments": [{"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1485988400, "post_id": 41990813, "comment_id": 71159318, "body": "always put <b>FULL</b> error message - there is many usefull information."}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1485988517, "post_id": 41990813, "comment_id": 71159365, "body": "use <code>print()</code> and see what you have on list - as for me not <code>VideoFileClip</code> but filenames."}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1485988558, "post_id": 41990813, "comment_id": 71159386, "body": "you create <code>VideoFileClip(clip)</code> but you don&#39;t add this to list."}], "answers": [{"comments": [{"owner": {"reputation": 146, "user_id": 2325014, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7490c6969ef0e44896cb0a463251c581?s=128&d=identicon&r=PG", "display_name": "Digfield", "link": "https://stackoverflow.com/users/2325014/digfield"}, "edited": false, "score": 0, "creation_date": 1485989811, "post_id": 41991152, "comment_id": 71159890, "body": "Thank you @furas! This makes since and works. I will post the entire error message next time. Thanks again!"}, {"owner": {"reputation": 5959, "user_id": 3558644, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/QzHDA.jpg?s=128&g=1", "display_name": "Joe T. Boka", "link": "https://stackoverflow.com/users/3558644/joe-t-boka"}, "edited": false, "score": 0, "creation_date": 1531300770, "post_id": 41991152, "comment_id": 89540752, "body": "I tried this but I get this error: <code>OSError: [WinError 193] %1 is not a valid Win32 application</code>. No idea why. If you know the cause, can you please let me know?"}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "reply_to_user": {"reputation": 5959, "user_id": 3558644, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/QzHDA.jpg?s=128&g=1", "display_name": "Joe T. Boka", "link": "https://stackoverflow.com/users/3558644/joe-t-boka"}, "edited": false, "score": 0, "creation_date": 1531338029, "post_id": 41991152, "comment_id": 89563741, "body": "@JoeT.Boka I would have to see FULL error message - you can create new question. Moviepy use external program <code>ffmpeg</code> so maybe you have to install it. See: <a href=\"http://ffmpeg.org/\" rel=\"nofollow noreferrer\">ffmpeg.org</a>"}], "tags": [], "owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "is_accepted": true, "score": 5, "last_activity_date": 1485988725, "creation_date": 1485988725, "answer_id": 41991152, "question_id": 41990813, "link": "https://stackoverflow.com/questions/41990813/pass-python-list-to-concatenate-videoclips-function-in-moviepy-module/41991152#41991152", "title": "Pass Python list to concatenate_videoclips function in Moviepy module", "body": "<p>You create <code>VideoFileClip(clip)</code> but you don't add to list so you send list with filenames to <code>concatenate_videoclips</code></p>\n\n<p>You need <code>new_list</code> in </p>\n\n<pre><code>def open_clips(clips):\n\n    new_list = []\n\n    for clip in clips:\n        new_list.append(VideoFileClip(clip))\n\n    combine_clips(new_list)\n</code></pre>\n\n<hr>\n\n<p><strong>EDIT:</strong> shorter:</p>\n\n<pre><code>import os\nfrom moviepy.editor import *\n\nclips = []\n\nfor filename in os.listdir('.'):\n    if filename.endswith(\".mov\"):\n        clips.append(VideoFileClip(filename))\n\nvideo = concatenate_videoclips(clips, method='compose')\nvideo.write_videofile('ct_01.mp4')\n</code></pre>\n"}], "owner": {"reputation": 146, "user_id": 2325014, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7490c6969ef0e44896cb0a463251c581?s=128&d=identicon&r=PG", "display_name": "Digfield", "link": "https://stackoverflow.com/users/2325014/digfield"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2301, "favorite_count": 1, "accepted_answer_id": 41991152, "answer_count": 1, "score": 1, "last_activity_date": 1485988725, "creation_date": 1485987214, "last_edit_date": 1485988447, "question_id": 41990813, "link": "https://stackoverflow.com/questions/41990813/pass-python-list-to-concatenate-videoclips-function-in-moviepy-module", "title": "Pass Python list to concatenate_videoclips function in Moviepy module", "body": "<p><strong>Purpose:</strong></p>\n\n<ol>\n<li>Build a python list of video files in a directory</li>\n<li>Open video clips (Understood requirement of moviepy)</li>\n<li>Call combine_clips function and pass 'clips' list (Error occurs here.)</li>\n<li>Write combined clips to single video file</li>\n</ol>\n\n<p><strong>Error:</strong></p>\n\n<pre><code>\"concatenate.py\", line 71, in concatenate_videoclips\ntt = np.cumsum([0] + [c.duration for c in clips])\nAttributeError: 'str' object has no attribute 'duration'\"\n</code></pre>\n\n<p><strong>Script:</strong></p>\n\n<pre><code>import os\nfrom moviepy.editor import *\n\ndef clips_list():\n    clips = []\n    for file in os.listdir('.'):\n        if file.endswith(\".mov\"):\n            clips.append(file)\n    open_clips(clips)\n\ndef open_clips(clips):\n    for clip in clips:\n        VideoFileClip(clip)\n    combine_clips(clips)\n\ndef combine_clips(clips):\n    video = concatenate_videoclips(clips, method='compose')\n\ndef output_video(video):\n    video.write_videofile('ct_01.mp4')\n\nclips_list()\n</code></pre>\n\n<p>Question: Why does \"concatenate_videoclips()\" accept a hardcoded list but fail when I pass it a list.</p>\n"}, {"tags": ["python", "python-3.x", "pandas"], "comments": [{"owner": {"reputation": 3364, "user_id": 1884171, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/uisYs.jpg?s=128&g=1", "display_name": "andrew", "link": "https://stackoverflow.com/users/1884171/andrew"}, "edited": false, "score": 0, "creation_date": 1485988028, "post_id": 41990811, "comment_id": 71159160, "body": "Does this help?  <a href=\"http://stackoverflow.com/questions/34326546/reindex-to-add-missing-dates-to-pandas-dataframe\" title=\"reindex to add missing dates to pandas dataframe\">stackoverflow.com/questions/34326546/&hellip;</a>"}, {"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "edited": false, "score": 1, "creation_date": 1485988190, "post_id": 41990811, "comment_id": 71159229, "body": "can you provide a small (5-7 rows) reproducible sample data set and a desired one?"}, {"owner": {"reputation": 263, "user_id": 1500255, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rHU73.jpg?s=128&g=1", "display_name": "Alek Liskov", "link": "https://stackoverflow.com/users/1500255/alek-liskov"}, "reply_to_user": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "edited": false, "score": 0, "creation_date": 1486045240, "post_id": 41990811, "comment_id": 71185174, "body": "@MaxU added one. I was able to save myself a lot of time by first filtering on groups that need this transformation but still isn&#39;t an ideal solution. Thank you"}, {"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "edited": false, "score": 0, "creation_date": 1486067308, "post_id": 41990811, "comment_id": 71198807, "body": "@AlekLiskov, added an answer"}], "answers": [{"comments": [{"owner": {"reputation": 86789, "user_id": 1422451, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/sFFvX.jpg?s=128&g=1", "display_name": "Parfait", "link": "https://stackoverflow.com/users/1422451/parfait"}, "edited": false, "score": 1, "creation_date": 1485998327, "post_id": 41991116, "comment_id": 71162507, "body": "I believe OP needs <i>Sku</i> and <i>Store</i> mapped as well with missing dates."}, {"owner": {"reputation": 263, "user_id": 1500255, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rHU73.jpg?s=128&g=1", "display_name": "Alek Liskov", "link": "https://stackoverflow.com/users/1500255/alek-liskov"}, "edited": false, "score": 0, "creation_date": 1486003373, "post_id": 41991116, "comment_id": 71163743, "body": "Thank you for the suggestion but it doesn&#39;t achieve what&#39;s needed. The missing dates are information I want to preserve. if the <b>timedelta</b> between max and min dates is say 10 days but there are only 7 rows (thus 3 missing) I would like a <b>datetime</b> array with starting date of t=4 and ending date with t=10. I hope this helps. Thanks again"}], "tags": [], "owner": {"reputation": 3364, "user_id": 1884171, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/uisYs.jpg?s=128&g=1", "display_name": "andrew", "link": "https://stackoverflow.com/users/1884171/andrew"}, "is_accepted": false, "score": 0, "last_activity_date": 1485988590, "creation_date": 1485988590, "answer_id": 41991116, "question_id": 41990811, "link": "https://stackoverflow.com/questions/41990811/replace-a-column-series-by-group-in-pandas/41991116#41991116", "title": "Replace a column/Series by group in pandas", "body": "<p>If all you want to do is fill the index with missing dates, it is straightforward with <code>reindex</code>:</p>\n\n<pre><code>idx = pd.date_range('01.01.2017', '01.10.2017')\nidx_missing = idx[0:3].union(idx[5:])\nvals = range(len(idx_missing))\ndf = pd.DataFrame(index=idx_missing, data=vals)\ndf\n&gt;&gt;&gt;\n            0\n2017-01-01  0\n2017-01-02  1\n2017-01-03  2\n2017-01-06  3\n2017-01-07  4\n2017-01-08  5\n2017-01-09  6\n2017-01-10  7\n\ndf = df.reindex(idx, fill_value=999)\ndf\n&gt;&gt;&gt;\n              0\n2017-01-01    0\n2017-01-02    1\n2017-01-03    2\n2017-01-04  999\n2017-01-05  999\n2017-01-06    3\n2017-01-07    4\n2017-01-08    5\n2017-01-09    6\n2017-01-10    7\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 263, "user_id": 1500255, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rHU73.jpg?s=128&g=1", "display_name": "Alek Liskov", "link": "https://stackoverflow.com/users/1500255/alek-liskov"}, "edited": false, "score": 0, "creation_date": 1486071515, "post_id": 42011683, "comment_id": 71201103, "body": "Thanks @MaxU Not quite but thanks to you I got it.Should I edit your entry because I want to give you the credit"}, {"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "reply_to_user": {"reputation": 263, "user_id": 1500255, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rHU73.jpg?s=128&g=1", "display_name": "Alek Liskov", "link": "https://stackoverflow.com/users/1500255/alek-liskov"}, "edited": false, "score": 0, "creation_date": 1486071771, "post_id": 42011683, "comment_id": 71201238, "body": "@AlekLiskov, sure, go for it"}, {"owner": {"reputation": 263, "user_id": 1500255, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rHU73.jpg?s=128&g=1", "display_name": "Alek Liskov", "link": "https://stackoverflow.com/users/1500255/alek-liskov"}, "edited": false, "score": 0, "creation_date": 1486072271, "post_id": 42011683, "comment_id": 71201480, "body": "Thanks again @MaxU .. saved me"}, {"owner": {"reputation": 263, "user_id": 1500255, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rHU73.jpg?s=128&g=1", "display_name": "Alek Liskov", "link": "https://stackoverflow.com/users/1500255/alek-liskov"}, "edited": false, "score": 0, "creation_date": 1486074326, "post_id": 42011683, "comment_id": 71202468, "body": "never used it. @MaxU Link with example use case ?"}, {"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "reply_to_user": {"reputation": 263, "user_id": 1500255, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rHU73.jpg?s=128&g=1", "display_name": "Alek Liskov", "link": "https://stackoverflow.com/users/1500255/alek-liskov"}, "edited": false, "score": 0, "creation_date": 1486074982, "post_id": 42011683, "comment_id": 71202720, "body": "@AlekLiskov, oh, sorry, i didn&#39;t notice you want to have a &quot;tail&quot; dates for each group. I don&#39;t think we can use <code>.resample()</code> in this case."}], "tags": [], "owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "is_accepted": true, "score": 1, "last_activity_date": 1486072742, "last_edit_date": 1486072742, "creation_date": 1486067182, "answer_id": 42011683, "question_id": 41990811, "link": "https://stackoverflow.com/questions/41990811/replace-a-column-series-by-group-in-pandas/42011683#42011683", "title": "Replace a column/Series by group in pandas", "body": "<p>Is that what you want?</p>\n\n<pre><code>In [62]: dt_rng = pd.date_range(df['dt'].min(), df['dt'].max())\n\nIn [63]: df.groupby('Sku') \\\n           .apply(lambda x: x.set_index('dt').reindex(dt_rng).ffill()) \\\n           .reset_index('Sku', drop=True)\n</code></pre>\n\n<p>EDIT:</p>\n\n<p>Corrent answer:</p>\n\n<p>Warning: Kind of a hack-y workaround, but it's using apply thus runs in under 30 seconds for this size DataFrame.</p>\n\n<pre><code>cols = df.columns\ndf = df.groupby(['Sku','Location']) \\\n       .apply(lambda x: x.set_index(pd.date_range(end=x.dt.max(), periods=x.shape[0]))) \\\n       .drop(['Sku','Location','dt'], axis = 1)\ndf = df.reset_index()\ndf.columns = cols\n</code></pre>\n\n<p>Result: </p>\n\n<p>df</p>\n\n<pre><code>Out[59]: \n  Location   Sku         dt  on_hand  sales\n0      one  loc1 2017-01-30        1      2\n1      one  loc1 2017-01-31        1      2\n2      one  loc1 2017-02-01        1      2\n3      one  loc1 2017-02-02        1      2\n4      two  loc2 2017-01-29        2      4\n5      two  loc2 2017-01-30        2      4\n6      two  loc2 2017-01-31        2      4\n7      two  loc2 2017-02-01        2      4\n</code></pre>\n"}], "owner": {"reputation": 263, "user_id": 1500255, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rHU73.jpg?s=128&g=1", "display_name": "Alek Liskov", "link": "https://stackoverflow.com/users/1500255/alek-liskov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 182, "favorite_count": 0, "accepted_answer_id": 42011683, "answer_count": 2, "score": 1, "last_activity_date": 1486072742, "creation_date": 1485987203, "last_edit_date": 1495540392, "question_id": 41990811, "link": "https://stackoverflow.com/questions/41990811/replace-a-column-series-by-group-in-pandas", "title": "Replace a column/Series by group in pandas", "body": "<p>I have a very large DataFrame (10M+ records) and I an trying to perform a transformation on a <em>datetime</em> column for each Sku/Store combination. </p>\n\n<p>Here's my current working (but not scalable) version:</p>\n\n<pre><code>for sku in sales_inv.Sku.unique():\n    for store in sales_inv[sales_inv.Sku == sku].Location.unique():\n        temp = sales_inv.loc[((sales_inv.Location == store) &amp; (sales_inv.Sku == sku))]\n        temp.loc[:,'dt'] = pd.date_range(end=temp.dt.max(), periods=temp.shape[0])\n</code></pre>\n\n<p>The reason I need to do this transformation is because there are missing dates and I want to simply fill the missing dates by replacing the entire <em>dt</em> Series with a continuous <em>datetime</em> array ending with the last date of observation for each Sku/Store group. The validity of the data is not of importance - i.e. I don't need the data to match with the actual date. </p>\n\n<p>I think <em>pd.DataFrame.groupby().apply()</em> could be used here but I have not been successful yet. I tried using the approach from:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/14529838/apply-multiple-functions-to-multiple-groupby-columns\">Apply multiple functions to multiple groupby columns</a></p>\n\n<p>I tried two approaches:</p>\n\n<pre><code>pad_dates = lambda x: pd.date_range(end=x.max(), periods=x.size)\nsales_inv.group_by(all_cols_but_dt).apply(pad_dates)\n</code></pre>\n\n<p>as well as </p>\n\n<pre><code>f = {'dt': pad_dates}\nsales_inv.group_by(all_cols_but_dt).apply(f)\n</code></pre>\n\n<p>Without any luck. Looking for the fastest way to do the same as the for loop quicker. Any help is really appreciated.</p>\n\n<p>EDIT:</p>\n\n<p>Example </p>\n\n<pre><code>n = 5\nd1 = {'Sku': ['one'] * n, \n      'Location': ['loc1'] * n,\n      'dt': pd.date_range(end=dt.datetime.now().date(), periods=n),\n      'on_hand': [1] * n,\n      'sales': [2] * n}\nd2 = {'Sku': ['two'] * n, \n      'Location': ['loc2'] * n,\n      'dt': pd.date_range(end=dt.datetime.now().date(), periods=n),\n      'on_hand': [2] * n,\n      'sales': [4] * n}\ndf = pd.DataFrame(d1).drop(3, axis=0).append(pd.DataFrame(d2).drop(4,axis=0))\n</code></pre>\n\n<p>The correct should look like:</p>\n\n<pre><code>n = 4\n# assign d1 and d2 using new 'n'\ndf = pd.DataFrame(d1).append(pd.DataFrame(d2))\n</code></pre>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "nlp", "nltk", "spell-checking", "stemming"], "comments": [{"owner": {"reputation": 4539, "user_id": 1698431, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/lpYwg.png?s=128&g=1", "display_name": "lenz", "link": "https://stackoverflow.com/users/1698431/lenz"}, "edited": false, "score": 1, "creation_date": 1486020275, "post_id": 41990796, "comment_id": 71169390, "body": "The Snowball stemmer is rule-based, so it should be straightforward to edit it. Have a look at the <a href=\"http://www.nltk.org/_modules/nltk/stem/snowball.html#EnglishStemmer\" rel=\"nofollow noreferrer\">source</a>: you need to add &#39;in&#39; to the list of step-1b suffices. (If you do this in a child class, it gets a bit tricky with the class attributes, though...)"}, {"owner": {"reputation": 1237, "user_id": 3781320, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/40f10b7ce3156c7372e355d0e5e498de?s=128&d=identicon&r=PG&f=1", "display_name": "RandomEli", "link": "https://stackoverflow.com/users/3781320/randomeli"}, "reply_to_user": {"reputation": 4539, "user_id": 1698431, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/lpYwg.png?s=128&g=1", "display_name": "lenz", "link": "https://stackoverflow.com/users/1698431/lenz"}, "edited": false, "score": 0, "creation_date": 1486104412, "post_id": 41990796, "comment_id": 71211002, "body": "@lenz This helps."}], "answers": [{"comments": [{"owner": {"reputation": 1237, "user_id": 3781320, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/40f10b7ce3156c7372e355d0e5e498de?s=128&d=identicon&r=PG&f=1", "display_name": "RandomEli", "link": "https://stackoverflow.com/users/3781320/randomeli"}, "edited": false, "score": 0, "creation_date": 1486154238, "post_id": 42012251, "comment_id": 71239734, "body": "You can, but d.suggest(&#39;lightin&#39;) only works for this specific case when you manually pick the first suggestion."}, {"owner": {"reputation": 93705, "user_id": 610569, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/0e9087f2672b0e4f28d91266acf9ce57?s=128&d=identicon&r=PG", "display_name": "alvas", "link": "https://stackoverflow.com/users/610569/alvas"}, "reply_to_user": {"reputation": 1237, "user_id": 3781320, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/40f10b7ce3156c7372e355d0e5e498de?s=128&d=identicon&r=PG&f=1", "display_name": "RandomEli", "link": "https://stackoverflow.com/users/3781320/randomeli"}, "edited": false, "score": 0, "creation_date": 1486160667, "post_id": 42012251, "comment_id": 71242464, "body": "I&#39;m interested to see how many % accuracy this would achieve on your dataset. And if this is not enouvh. And whether smarter perplexity methods in selecting the suggestion helps."}, {"owner": {"reputation": 1237, "user_id": 3781320, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/40f10b7ce3156c7372e355d0e5e498de?s=128&d=identicon&r=PG&f=1", "display_name": "RandomEli", "link": "https://stackoverflow.com/users/3781320/randomeli"}, "edited": false, "score": 0, "creation_date": 1486681935, "post_id": 42012251, "comment_id": 71463703, "body": "Spellchecker has a pretty pure accuracy in my case."}], "tags": [], "owner": {"reputation": 93705, "user_id": 610569, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/0e9087f2672b0e4f28d91266acf9ce57?s=128&d=identicon&r=PG", "display_name": "alvas", "link": "https://stackoverflow.com/users/610569/alvas"}, "is_accepted": false, "score": 1, "last_activity_date": 1486069421, "creation_date": 1486069421, "answer_id": 42012251, "question_id": 41990796, "link": "https://stackoverflow.com/questions/41990796/nltk-stemming-does-not-pass-a-simple-case/42012251#42012251", "title": "NLTK stemming does not pass a simple case", "body": "<p>Try running a spellchecker (e.g. <a href=\"http://pythonhosted.org/pyenchant/tutorial.html\" rel=\"nofollow noreferrer\">pyenchant</a>) before stemming:</p>\n\n<pre><code>&gt;&gt;&gt; import enchant\n&gt;&gt;&gt; from nltk.stem import SnowballStemmer\n\n&gt;&gt;&gt; d = enchant.Dict(\"en_US\")\n&gt;&gt;&gt; d.suggest('lightin')\n['lighting', 'lighten', 'light in', 'light-in', 'lightning', 'lightering', 'sighting', 'light', 'flitting', 'Litton']\n\n&gt;&gt;&gt; snowball = SnowballStemmer('english')\n&gt;&gt;&gt; snowball.stem(d.suggest('lightin')[0])\nu'light'\n\n&gt;&gt;&gt; sent = \"Turn on the lightin\".split()\n&gt;&gt;&gt; [snowball.stem(word if d.check(word) else d.suggest(word)[0]) for word in sent]\n[u'turn', 'on', u'the', u'light']\n</code></pre>\n"}], "owner": {"reputation": 1237, "user_id": 3781320, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/40f10b7ce3156c7372e355d0e5e498de?s=128&d=identicon&r=PG&f=1", "display_name": "RandomEli", "link": "https://stackoverflow.com/users/3781320/randomeli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 415, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1486069440, "creation_date": 1485987152, "last_edit_date": 1486069440, "question_id": 41990796, "link": "https://stackoverflow.com/questions/41990796/nltk-stemming-does-not-pass-a-simple-case", "title": "NLTK stemming does not pass a simple case", "body": "<p>I am new to NLTK, and I'm using stemmer function on stemming cases.</p>\n\n<p>I have a simple example sentence to process, which is: \"Turn on the lightin.\" I want to see if NLTK stemmer could help me filter out the typo \"lightin\". I've tested stemmer with \"lighting\", and snowBall stemmer can return the correct word \"light\" for me, but snowBall stemmer returns \"lightin\" in my test. </p>\n\n<p>My stemming process is very trivial:</p>\n\n<pre><code>tokens = \"Turn on the lightin\"\nfor token in tokens:\n    print(\"SnowBall Lemmatizer: \"+snowBallStemmer.stem(token))\n</code></pre>\n\n<p>According to NTLK's doc, snowBallStemmer could be used to stem English. I want to know why snowBallStemmer failed to stem \"lightin\" and what could I do to fix this.</p>\n"}, {"tags": ["python", "html", "django"], "comments": [{"owner": {"reputation": 1602, "user_id": 5682919, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4rC18.png?s=128&g=1", "display_name": "jsanchezs", "link": "https://stackoverflow.com/users/5682919/jsanchezs"}, "edited": false, "score": 0, "creation_date": 1485987556, "post_id": 41990794, "comment_id": 71158939, "body": "Where&#39;s your python script or values.py code ?, please post more info so we can help"}, {"owner": {"reputation": 313, "user_id": 7406018, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/23282ba5b2094e2f0bf34e7df8c312a0?s=128&d=identicon&r=PG&f=1", "display_name": "VisualExstasy", "link": "https://stackoverflow.com/users/7406018/visualexstasy"}, "reply_to_user": {"reputation": 1602, "user_id": 5682919, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4rC18.png?s=128&g=1", "display_name": "jsanchezs", "link": "https://stackoverflow.com/users/5682919/jsanchezs"}, "edited": false, "score": 0, "creation_date": 1485987797, "post_id": 41990794, "comment_id": 71159066, "body": "@jsanchezs the python code I put into my project directory and then in a folder called &quot;templatetags&quot; inside is values.py and init.py"}, {"owner": {"reputation": 1602, "user_id": 5682919, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4rC18.png?s=128&g=1", "display_name": "jsanchezs", "link": "https://stackoverflow.com/users/5682919/jsanchezs"}, "edited": false, "score": 0, "creation_date": 1485987898, "post_id": 41990794, "comment_id": 71159110, "body": "Yeah, tags are indeed the way to achieve that but post your python code in the question so we can figure out how it works and understand exactly what you need to guide you through"}, {"owner": {"reputation": 313, "user_id": 7406018, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/23282ba5b2094e2f0bf34e7df8c312a0?s=128&d=identicon&r=PG&f=1", "display_name": "VisualExstasy", "link": "https://stackoverflow.com/users/7406018/visualexstasy"}, "reply_to_user": {"reputation": 1602, "user_id": 5682919, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4rC18.png?s=128&g=1", "display_name": "jsanchezs", "link": "https://stackoverflow.com/users/5682919/jsanchezs"}, "edited": false, "score": 0, "creation_date": 1485988222, "post_id": 41990794, "comment_id": 71159244, "body": "@jsanchezs its a rather long script and is connected to other features within the database, if you can just guide me to how to even submit a python script into django that would be appreciated. Lets just use a simple dictionary one like the hardcoded above or we can forget about dictionary and just do a simple hello world script"}, {"owner": {"reputation": 1602, "user_id": 5682919, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4rC18.png?s=128&g=1", "display_name": "jsanchezs", "link": "https://stackoverflow.com/users/5682919/jsanchezs"}, "edited": false, "score": 0, "creation_date": 1485989055, "post_id": 41990794, "comment_id": 71159591, "body": "@VisualExtasy I think question it&#39;s quite different from the code you posted, anyhow i posted you a basic example of how tags work. remember to mark as correct the answer if it helped."}], "answers": [{"comments": [{"owner": {"reputation": 313, "user_id": 7406018, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/23282ba5b2094e2f0bf34e7df8c312a0?s=128&d=identicon&r=PG&f=1", "display_name": "VisualExstasy", "link": "https://stackoverflow.com/users/7406018/visualexstasy"}, "edited": false, "score": 0, "creation_date": 1485989257, "post_id": 41991224, "comment_id": 71159664, "body": "I get a tag.py is not a registered tag library error."}, {"owner": {"reputation": 1602, "user_id": 5682919, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4rC18.png?s=128&g=1", "display_name": "jsanchezs", "link": "https://stackoverflow.com/users/5682919/jsanchezs"}, "reply_to_user": {"reputation": 313, "user_id": 7406018, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/23282ba5b2094e2f0bf34e7df8c312a0?s=128&d=identicon&r=PG&f=1", "display_name": "VisualExstasy", "link": "https://stackoverflow.com/users/7406018/visualexstasy"}, "edited": false, "score": 0, "creation_date": 1485989370, "post_id": 41991224, "comment_id": 71159705, "body": "Did you tried my code from zero or are you using your file called values.py ?, remember in this example tag.py should be the name of the file and it should be in templatetags directory."}, {"owner": {"reputation": 313, "user_id": 7406018, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/23282ba5b2094e2f0bf34e7df8c312a0?s=128&d=identicon&r=PG&f=1", "display_name": "VisualExstasy", "link": "https://stackoverflow.com/users/7406018/visualexstasy"}, "edited": false, "score": 0, "creation_date": 1485989462, "post_id": 41991224, "comment_id": 71159736, "body": "Yea I used yours tag.py in templatetags directory and then in the calling its {% load tag.py %}"}, {"owner": {"reputation": 1602, "user_id": 5682919, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4rC18.png?s=128&g=1", "display_name": "jsanchezs", "link": "https://stackoverflow.com/users/5682919/jsanchezs"}, "reply_to_user": {"reputation": 313, "user_id": 7406018, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/23282ba5b2094e2f0bf34e7df8c312a0?s=128&d=identicon&r=PG&f=1", "display_name": "VisualExstasy", "link": "https://stackoverflow.com/users/7406018/visualexstasy"}, "edited": false, "score": 0, "creation_date": 1485989571, "post_id": 41991224, "comment_id": 71159782, "body": "Sorry, it has no &#39;.py&#39; at the end, i updated my answer, it&#39;s : {{ load tag }}"}, {"owner": {"reputation": 313, "user_id": 7406018, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/23282ba5b2094e2f0bf34e7df8c312a0?s=128&d=identicon&r=PG&f=1", "display_name": "VisualExstasy", "link": "https://stackoverflow.com/users/7406018/visualexstasy"}, "edited": false, "score": 0, "creation_date": 1485989794, "post_id": 41991224, "comment_id": 71159880, "body": "it works :D, but do you mind explaining it to me like what is always required when doing template tags and what is just for this example only. I&#39;m assumming the template import and register = template.Library has to be done everytime"}, {"owner": {"reputation": 1602, "user_id": 5682919, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4rC18.png?s=128&g=1", "display_name": "jsanchezs", "link": "https://stackoverflow.com/users/5682919/jsanchezs"}, "reply_to_user": {"reputation": 313, "user_id": 7406018, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/23282ba5b2094e2f0bf34e7df8c312a0?s=128&d=identicon&r=PG&f=1", "display_name": "VisualExstasy", "link": "https://stackoverflow.com/users/7406018/visualexstasy"}, "edited": false, "score": 0, "creation_date": 1485990009, "post_id": 41991224, "comment_id": 71159970, "body": "Sure, template.Library  and @register.assignment_tag it&#39;s needed always so it be a valid tag library, the module must contain a module-level variable named register that is a template.Library instance, in which all the tags and filters are registered. Also as a said before, model imports or calls you may need in your python code...Glad to help, remember to mark my answer as correct."}, {"owner": {"reputation": 313, "user_id": 7406018, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/23282ba5b2094e2f0bf34e7df8c312a0?s=128&d=identicon&r=PG&f=1", "display_name": "VisualExstasy", "link": "https://stackoverflow.com/users/7406018/visualexstasy"}, "edited": false, "score": 0, "creation_date": 1486058312, "post_id": 41991224, "comment_id": 71193966, "body": "in your example youre calling the script hello_world and adding food to the name as it, then putting it into header 3 correct? Why is salute = Hello + name?"}, {"owner": {"reputation": 1602, "user_id": 5682919, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4rC18.png?s=128&g=1", "display_name": "jsanchezs", "link": "https://stackoverflow.com/users/5682919/jsanchezs"}, "reply_to_user": {"reputation": 313, "user_id": 7406018, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/23282ba5b2094e2f0bf34e7df8c312a0?s=128&d=identicon&r=PG&f=1", "display_name": "VisualExstasy", "link": "https://stackoverflow.com/users/7406018/visualexstasy"}, "edited": false, "score": 0, "creation_date": 1486064946, "post_id": 41991224, "comment_id": 71197593, "body": "hello_world function receives a parameter called name, i just call that function inside the template sending it &#39;Foo&#39; as that name and later i concatenate a salute string to return"}, {"owner": {"reputation": 313, "user_id": 7406018, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/23282ba5b2094e2f0bf34e7df8c312a0?s=128&d=identicon&r=PG&f=1", "display_name": "VisualExstasy", "link": "https://stackoverflow.com/users/7406018/visualexstasy"}, "edited": false, "score": 0, "creation_date": 1486159563, "post_id": 41991224, "comment_id": 71242018, "body": "so can would I be able to import a 500 line python code into a template tag or just function definitions?"}, {"owner": {"reputation": 1602, "user_id": 5682919, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4rC18.png?s=128&g=1", "display_name": "jsanchezs", "link": "https://stackoverflow.com/users/5682919/jsanchezs"}, "reply_to_user": {"reputation": 313, "user_id": 7406018, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/23282ba5b2094e2f0bf34e7df8c312a0?s=128&d=identicon&r=PG&f=1", "display_name": "VisualExstasy", "link": "https://stackoverflow.com/users/7406018/visualexstasy"}, "edited": false, "score": 0, "creation_date": 1486387226, "post_id": 41991224, "comment_id": 71308807, "body": "@VisualExstasy The idea it&#39;s to call functions. many of few python code lines are based on what you need to create or achieve with them."}, {"owner": {"reputation": 313, "user_id": 7406018, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/23282ba5b2094e2f0bf34e7df8c312a0?s=128&d=identicon&r=PG&f=1", "display_name": "VisualExstasy", "link": "https://stackoverflow.com/users/7406018/visualexstasy"}, "edited": false, "score": 0, "creation_date": 1486405521, "post_id": 41991224, "comment_id": 71320744, "body": "sorry I&#39;m sort of confused. I have a python code with 600+ lines of code includes connecting to the database, sorting the results, displaying results ext. Would I import all that into template tag and then add the import and register template tag and then put the script in my html to call it?"}, {"owner": {"reputation": 1602, "user_id": 5682919, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4rC18.png?s=128&g=1", "display_name": "jsanchezs", "link": "https://stackoverflow.com/users/5682919/jsanchezs"}, "reply_to_user": {"reputation": 313, "user_id": 7406018, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/23282ba5b2094e2f0bf34e7df8c312a0?s=128&d=identicon&r=PG&f=1", "display_name": "VisualExstasy", "link": "https://stackoverflow.com/users/7406018/visualexstasy"}, "edited": false, "score": 0, "creation_date": 1486409776, "post_id": 41991224, "comment_id": 71323133, "body": "Don worry. No, as i told you before, tags are most of the time used to call functions in a template when you need python code there somehow....for everything you&#39;re saying you use the model and views django system. See the documentation here : <a href=\"https://docs.djangoproject.com/en/1.10/\" rel=\"nofollow noreferrer\">docs.djangoproject.com/en/1.10</a>"}], "tags": [], "owner": {"reputation": 1602, "user_id": 5682919, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4rC18.png?s=128&g=1", "display_name": "jsanchezs", "link": "https://stackoverflow.com/users/5682919/jsanchezs"}, "is_accepted": true, "score": 6, "last_activity_date": 1612792094, "last_edit_date": 1612792094, "creation_date": 1485988996, "answer_id": 41991224, "question_id": 41990794, "link": "https://stackoverflow.com/questions/41990794/django-executing-python-code-in-html/41991224#41991224", "title": "Django-Executing Python code in HTML", "body": "<p>As we talked, tags are the way to achieve that....Let's say you want to do a simple &quot;Hello world&quot; tag, this would be your tag.py code :</p>\n<p><strong>tag.py</strong></p>\n<pre><code>from django import template\n\nregister = template.Library()\n\n@register.assignment_tag\ndef hello_world(name):\n    salute = 'Hello' + name\n    \n    return salute\n</code></pre>\n<p>As you see, you got all the python code there, depending on what you need you may need to import models or anything else from database...assuming you got all that in order as you say, you just create the function, process all code you need and return something (dictionary of data in your case to iterate in template), but for this simple example just a string with the name.</p>\n<p>Then, inside your template you load your tag file, and call the function sending the specific parameter to use it later as i show you here :</p>\n<p><strong>Template.html</strong></p>\n<pre><code>{% load tag %}\n&lt;div id=&quot;id_div&quot;&gt;\n    {% hello_world 'Foo' as salute_text %}\n    &lt;strong&gt; {{ salute_text }} &lt;/strong&gt;\n&lt;/div&gt;\n</code></pre>\n<p>Hope it helps to clarify!!</p>\n"}], "owner": {"reputation": 313, "user_id": 7406018, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/23282ba5b2094e2f0bf34e7df8c312a0?s=128&d=identicon&r=PG&f=1", "display_name": "VisualExstasy", "link": "https://stackoverflow.com/users/7406018/visualexstasy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10300, "favorite_count": 2, "accepted_answer_id": 41991224, "answer_count": 1, "score": 2, "last_activity_date": 1612792094, "creation_date": 1485987132, "question_id": 41990794, "link": "https://stackoverflow.com/questions/41990794/django-executing-python-code-in-html", "title": "Django-Executing Python code in HTML", "body": "<p>I have a python script written up that returns a list of values from a database. I want to incorporate that script into my django website that I have created. I have an html file right now in my templates folder that has dictionary values hardcoded but how do I replace the dictionary hardcoded material with the script, lets call it values.py</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n$(document).ready(function() {\n    var dropDown = [\" \", \"Run1\", \"Run2\", \"Trail1\", \"Trail2\"];\n    var dropDownID = [\" \", \"111111\", \"222222\", \"333333\", \"444444\", \"555555\"];\n    $(\"#dropDown\").select2({\n        data: dropDown\n    });\n\n    $(\"#dropDown\").change(function() {\n        $(\"#dropdownID\").val(dropDownID[$(\"#dropDown option:selected\").index()]);\n    });\n});\n</code></pre>\n\n<p></p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1485986757, "post_id": 41990666, "comment_id": 71158544, "body": "What should <code>self._elem_index</code> be if <code>elem_index</code> is <code>None</code> (or some other false value)?"}, {"owner": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "edited": false, "score": 0, "creation_date": 1485987001, "post_id": 41990666, "comment_id": 71158659, "body": "You don&#39;t always create <code>_elem_index</code> therefore you cant rely on it always being there."}], "answers": [{"comments": [{"owner": {"reputation": 84953, "user_id": 1405065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c422b239ab1f49d3f4fcff9e5df3cf?s=128&d=identicon&r=PG", "display_name": "Blckknght", "link": "https://stackoverflow.com/users/1405065/blckknght"}, "edited": false, "score": 0, "creation_date": 1485987383, "post_id": 41990711, "comment_id": 71158871, "body": "It would also probably be a good idea to set <code>self._elem_index</code> to <i>some value</i> even if no value was provided by the caller. It&#39;s a lot easier and more convenient to check for an attribute having a dummy value (like <code>None</code>) than it is to check if it exists."}], "tags": [], "owner": {"reputation": 118102, "user_id": 4952130, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/kKQZw.png?s=128&g=1", "display_name": "Dimitris Fasarakis Hilliard", "link": "https://stackoverflow.com/users/4952130/dimitris-fasarakis-hilliard"}, "is_accepted": true, "score": 4, "last_activity_date": 1485987189, "last_edit_date": 1485987189, "creation_date": 1485986810, "answer_id": 41990711, "question_id": 41990666, "link": "https://stackoverflow.com/questions/41990666/initializing-several-instances-of-a-class-inside-a-list-with-the-iterator-index/41990711#41990711", "title": "Initializing several instances of a class inside a list with the iterator index", "body": "<p>You are conditionally setting <code>_elem_index</code> as an attribute of your instance based on the truthness of the argument <code>elem_index</code> you pass during initialization. </p>\n\n<p>For <code>i == 0</code>, the first value produced by <code>range(10)</code>, the attribute will not be set since <code>0</code> is <code>False</code> when evaluated in your conditional. As a result the look-up will fail when it is attempted.</p>\n\n<p>Be explicit in your condition:</p>\n\n<pre><code>if elem_index is not None:\n    self._elem_index = elem_index\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 19411, "user_id": 6640099, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/tf1sO.jpg?s=128&g=1", "display_name": "Christian Dean", "link": "https://stackoverflow.com/users/6640099/christian-dean"}, "is_accepted": false, "score": 0, "last_activity_date": 1485987777, "creation_date": 1485987777, "answer_id": 41990952, "question_id": 41990666, "link": "https://stackoverflow.com/questions/41990666/initializing-several-instances-of-a-class-inside-a-list-with-the-iterator-index/41990952#41990952", "title": "Initializing several instances of a class inside a list with the iterator index", "body": "<p>Look closer at the code in your <code>__init__</code> function:</p>\n\n<pre><code>if elem_index:\n    self._elem_index = elem_index\n</code></pre>\n\n<p>What your saying translated to english is, <em>If the boolean value of <code>elem_index</code> is true, give this class instance an attribute called <code>_elem_index</code>. Otherwise, skip this code and never define <code>_elem_index</code></em>.</p>\n\n<p>With that still in mind, understand that the default first value <code>range()</code> generates is zero</p>\n\n<pre><code>&gt;&gt;&gt; list(range(1))\n[0]\n&gt;&gt;&gt;\n</code></pre>\n\n<p>And in python zero evaluates to <code>False</code></p>\n\n<pre><code>&gt;&gt;&gt; bool(0)\nFalse\n&gt;&gt;&gt; \n</code></pre>\n\n<p>This means when you try to call <code>get_index()</code> on the first value in <code>elements</code>, Python raises an error because your condition in <code>__init__</code> failed.</p>\n\n<p>To fix this you need to more specific and tell Python exactly when you want to skip the definition of <code>_elem_index</code>. Instead of doing <code>if elem_index</code>, use this <code>is not</code> operator test explicitly test if <code>elem_index</code> is not equal to<code>None</code>; <code>if elem_index is not None</code>. eg:</p>\n\n<pre><code>&gt;&gt;&gt; var = 0\n&gt;&gt;&gt; if var:\n    print(\"This will not run because zero evalutes to false\")\n\n\n&gt;&gt;&gt; if var is not None:\n    print(\"This will run because were testing if var is equal to None\")\n\n\nThis will run because were testing if var is equal to None\n&gt;&gt;&gt; \n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 1824434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1b44fb8de2161b94a2932ccfb115e96?s=128&d=identicon&r=PG", "display_name": "aminsadeghi", "link": "https://stackoverflow.com/users/1824434/aminsadeghi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 41990711, "answer_count": 2, "score": 0, "last_activity_date": 1485987777, "creation_date": 1485986676, "question_id": 41990666, "link": "https://stackoverflow.com/questions/41990666/initializing-several-instances-of-a-class-inside-a-list-with-the-iterator-index", "title": "Initializing several instances of a class inside a list with the iterator index", "body": "<p>I want to create a list containing instances of a class, and initialized with numbers 0 to 9. Here's what I do:</p>\n\n<pre><code>class Element(object):\n    def __init__(self, elem_index=None):\n        if elem_index:\n            self._elem_index = elem_index\n    def get_index(self):\n        return self._elem_index\n\nelements = [Element(elem_index=i) for i in range(10)]\n\nprint(elements[0].get_index())\n</code></pre>\n\n<p>Here's the error I get:</p>\n\n<pre><code>AttributeError: 'Element' object has no attribute '_elem_index'\n</code></pre>\n"}, {"tags": ["python", "neural-network", "deep-learning", "theano"], "comments": [{"owner": {"reputation": 2515, "user_id": 2552811, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/c24e601c8aca1a57934e9219ceeb3704?s=128&d=identicon&r=PG", "display_name": "Hoa Vu", "link": "https://stackoverflow.com/users/2552811/hoa-vu"}, "edited": false, "score": 0, "creation_date": 1495403367, "post_id": 41990665, "comment_id": 75224402, "body": "I ran into the same problem today and the reason is because I labeled the classes from 1 instead of 0."}], "answers": [{"tags": [], "owner": {"reputation": 2515, "user_id": 2552811, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/c24e601c8aca1a57934e9219ceeb3704?s=128&d=identicon&r=PG", "display_name": "Hoa Vu", "link": "https://stackoverflow.com/users/2552811/hoa-vu"}, "is_accepted": false, "score": 0, "last_activity_date": 1495403654, "creation_date": 1495403654, "answer_id": 44102173, "question_id": 41990665, "link": "https://stackoverflow.com/questions/41990665/theano-valueerror-y-i-value-out-of-bound/44102173#44102173", "title": "Theano ValueError: y_i value out of bound", "body": "<p>In case anyone still got the same error, I ran into this issue today and the reason is because I labeled the classes from 1 instead of 0.</p>\n"}, {"tags": [], "owner": {"reputation": 714, "user_id": 2847782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EeZbJ.jpg?s=128&g=1", "display_name": "raullalves", "link": "https://stackoverflow.com/users/2847782/raullalves"}, "is_accepted": false, "score": 0, "last_activity_date": 1538349351, "creation_date": 1538349351, "answer_id": 52582907, "question_id": 41990665, "link": "https://stackoverflow.com/questions/41990665/theano-valueerror-y-i-value-out-of-bound/52582907#52582907", "title": "Theano ValueError: y_i value out of bound", "body": "<p>When you add a logistic regression layer to your MLP, the number of outputs must be the number of classes you have. Supposing you are dealing with binary classification, your <code>n_out</code> must be 2.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7133494"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 383, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1538349351, "creation_date": 1485986672, "question_id": 41990665, "link": "https://stackoverflow.com/questions/41990665/theano-valueerror-y-i-value-out-of-bound", "title": "Theano ValueError: y_i value out of bound", "body": "<p>I am implementing a Neural network using Theano. Where my input size is 64 nodes, hidden layer is 500 node, and output is 1 node. </p>\n\n<p>My input is a (1,000,000 * 64) matrix, and output is (1,000,000*1) matrix.</p>\n\n<p>I am implementing my Neural network using the following tutorial. <a href=\"http://deeplearning.net/tutorial/mlp.html#mlp\" rel=\"nofollow noreferrer\">http://deeplearning.net/tutorial/mlp.html#mlp</a></p>\n\n<p>Please help!</p>\n\n<p>i am getting out of bound error on the following line its causing me error</p>\n\n<pre><code>##LOADING THE DATA FROM TXT FILE\ntrain_set_x = numpy.loadtxt('x.txt', delimiter=',')\ntrain_set_y = numpy.loadtxt('y.txt', delimiter=',')\ntrain_set_x = theano.shared(numpy.asarray(train_set_x,\n                                           dtype=theano.config.floatX),\n                             borrow=True)\ntrain_set_y = theano.shared(numpy.asarray(train_set_y,\n                                           dtype=theano.config.floatX),\n                             borrow=True)     \ntrain_set_y = T.cast(train_set_y, 'int32')\n\n\n....\n\n\n##TRAINING FUNCTION\ntrain_model = theano.function(\n        inputs=[index],\n        outputs=cost,\n        updates=updates,\n        givens={\n            x: train_set_x[index * batch_size: (index + 1) * batch_size],\n            y: train_set_y[index * batch_size: (index + 1) * batch_size]\n        }\n    )\n\n....\n\n##TRAINING\nwhile (epoch &lt; n_epochs) and (not done_looping):\n        epoch = epoch + 1\n        for minibatch_index in range(n_train_batches):\n            minibatch_avg_cost = train_model(minibatch_index)\n</code></pre>\n\n<p>ERROR:</p>\n\n<pre><code>File \"NN_main.py\", line 276, in test_mlp\n    minibatch_avg_cost = train_model(minibatch_index)\n  File \"C:\\Users\\wei\\Anaconda2\\lib\\site-packages\\theano\\compile\\function_module.py\", line 871, in __call__\n    storage_map=getattr(self.fn, 'storage_map', None))\n  File \"C:\\Users\\wei\\Anaconda2\\lib\\site-packages\\theano\\gof\\link.py\", line 314, in raise_with_op\n    reraise(exc_type, exc_value, exc_trace)\n  File \"C:\\Users\\wei\\Anaconda2\\lib\\site-packages\\theano\\compile\\function_module.py\", line 859, in __call__\n    outputs = self.fn()\nValueError: y_i value out of bounds\nApply node that caused the error: CrossentropySoftmaxArgmax1HotWithBias(Dot22.0, b, Elemwise{Cast{int32}}.0)\nToposort index: 21\nInputs types: [TensorType(float64, matrix), TensorType(float64, vector), TensorType(int32, vector)]\nInputs shapes: [(20L, 1L), (1L,), (20L,)]\nInputs strides: [(8L, 8L), (8L,), (4L,)]\nInputs values: ['not shown', array([ 0.]), 'not shown']\nOutputs clients: [[Sum{acc_dtype=float64}(CrossentropySoftmaxArgmax1HotWithBias.0)], [CrossentropySoftmax1HotWithBiasDx(Elemwise{Inv}[(0, 0)].0, CrossentropySoftmaxArgmax1HotWithBias.1, Elemwise{Cast{int32}}.0)], []]\n\nBacktrace when the node is created(use Theano flag traceback.limit=N to make it longer):\n  File \"NN_main.py\", line 332, in &lt;module&gt;\n    test_mlp()\n  File \"NN_main.py\", line 193, in test_mlp\n    + L2_reg * classifier.L2_sqr\n  File \"C:\\wei\\MyChessEngine\\MyChessEngine\\logistic_sgd.py\", line 112, in negative_log_likelihood\n    return -T.mean(T.log(self.p_y_given_x)[T.arange(y.shape[0]), y])\n\nHINT: Use the Theano flag 'exception_verbosity=high' for a debugprint and storage map footprint of this apply node.\n</code></pre>\n"}, {"tags": ["python", "search", "python-requests"], "comments": [{"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1485987031, "post_id": 41990632, "comment_id": 71158678, "body": "do you mean <code>[ (index, js[index][&quot;name&quot;]) for index in js ]</code> ?"}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1485987202, "post_id": 41990632, "comment_id": 71158770, "body": "What&#39;s in <code>js</code> variable?"}, {"owner": {"reputation": 9070, "user_id": 6817835, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/8GBAa.jpg?s=128&g=1", "display_name": "gold_cy", "link": "https://stackoverflow.com/users/6817835/gold-cy"}, "reply_to_user": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1485987241, "post_id": 41990632, "comment_id": 71158791, "body": "@martineau I assume <code>js</code> is this <code>json</code> in the body of the post, but @furas solution looks correct"}], "answers": [{"tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 0, "last_activity_date": 1485987286, "creation_date": 1485987286, "answer_id": 41990830, "question_id": 41990632, "link": "https://stackoverflow.com/questions/41990632/searching-file-and-returning-2-strings/41990830#41990830", "title": "Searching File and Returning 2 Strings", "body": "<p>Just concatenate the index and the separator in your statement:</p>\n\n<pre><code>names = [index + \" - \" + js[index][\"name\"] for index in js]\n</code></pre>\n\n<p>This gives output</p>\n\n<pre><code>['1 - corner light', '5 - Best Bulb', '4 - Back light', '7 - our bulb']\n</code></pre>\n\n<p>BTW, you'll need to capitalize the Boolean values (True &amp; False) to keep Python happy.</p>\n"}], "owner": {"reputation": 61, "user_id": 7281196, "user_type": "registered", "accept_rate": 8, "profile_image": "https://www.gravatar.com/avatar/60bf97521f77c1b68e4a51da99b4562a?s=128&d=identicon&r=PG&f=1", "display_name": "Dorothy", "link": "https://stackoverflow.com/users/7281196/dorothy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 25, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1485987286, "creation_date": 1485986563, "last_edit_date": 1485986879, "question_id": 41990632, "link": "https://stackoverflow.com/questions/41990632/searching-file-and-returning-2-strings", "title": "Searching File and Returning 2 Strings", "body": "<p>I am wanting to search through this for \"name\" and return the name, which I already have the code for. However, I need to return the \"1\" or \"4\" along with it so I end up with:</p>\n\n<p>1 - corner light</p>\n\n<p>I can then send a HTTP PUT to the correct device with the rest of my program. I can't find anything on how to go about this, any help is appreciated.</p>\n\n<pre><code> names = [js[index][\"name\"] for index in js]\n print (names)     \n{\n\"1\": {\n    \"state\": {\n        \"on\": true,\n        \"bri\": 114,\n        \"alert\": \"none\",\n        \"reachable\": true\n    },\n    \"type\": \"Dimmable light\",\n    \"name\": \"corner light\",\n},\n\"4\": {\n    \"state\": {\n        \"on\": true,\n        \"bri\": 180,\n        \"alert\": \"none\",\n        \"reachable\": true\n    },\n    \"type\": \"Dimmable light\",\n    \"name\": \"Back light\",\n},\n\"5\": {\n    \"state\": {\n        \"on\": true,\n        \"bri\": 228,\n        \"alert\": \"none\",\n        \"reachable\": true\n    },\n    \"type\": \"Dimmable light\",\n    \"name\": \"Best Bulb\",\n},\n\"7\": {\n    \"state\": {\n        \"on\": false,\n        \"bri\": 254,\n        \"alert\": \"none\",\n        \"reachable\": false\n    },\n    \"type\": \"Dimmable light\",\n    \"name\": \"our bulb\",\n},\n</code></pre>\n"}, {"tags": ["python", "bash", "shell", "awk", "grep"], "answers": [{"comments": [{"owner": {"reputation": 349, "user_id": 5001308, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/de1c91521eda30dbc39a364c207a4620?s=128&d=identicon&r=PG&f=1", "display_name": "Rczone", "link": "https://stackoverflow.com/users/5001308/rczone"}, "edited": false, "score": 0, "creation_date": 1486073926, "post_id": 41993167, "comment_id": 71202305, "body": "I have some how managed to get the success scenerios but the fail cases the script is hunging up"}, {"owner": {"reputation": 1074, "user_id": 7381492, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t3vPN.png?s=128&g=1", "display_name": "Mike Wodarczyk", "link": "https://stackoverflow.com/users/7381492/mike-wodarczyk"}, "reply_to_user": {"reputation": 349, "user_id": 5001308, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/de1c91521eda30dbc39a364c207a4620?s=128&d=identicon&r=PG&f=1", "display_name": "Rczone", "link": "https://stackoverflow.com/users/5001308/rczone"}, "edited": false, "score": 0, "creation_date": 1486074961, "post_id": 41993167, "comment_id": 71202715, "body": "Ok. Here is what you need to do."}, {"owner": {"reputation": 1074, "user_id": 7381492, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t3vPN.png?s=128&g=1", "display_name": "Mike Wodarczyk", "link": "https://stackoverflow.com/users/7381492/mike-wodarczyk"}, "reply_to_user": {"reputation": 349, "user_id": 5001308, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/de1c91521eda30dbc39a364c207a4620?s=128&d=identicon&r=PG&f=1", "display_name": "Rczone", "link": "https://stackoverflow.com/users/5001308/rczone"}, "edited": false, "score": 0, "creation_date": 1486075376, "post_id": 41993167, "comment_id": 71202883, "body": "Start the process off to the background. Then In the next statement get the background process Id into a variable. I think that it is in $!. Then start another process in the background that sleeps some amount of time and kills the first process id. You should put the 2 statements in parenthesis and background them both (sleep 15; kill $firstpid) &amp;.  Then get that process id and wait on them both.  Wait $firstpid $secondpid.   The wait will return when either is dead. Then clean up the second process if it is still alive."}, {"owner": {"reputation": 349, "user_id": 5001308, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/de1c91521eda30dbc39a364c207a4620?s=128&d=identicon&r=PG&f=1", "display_name": "Rczone", "link": "https://stackoverflow.com/users/5001308/rczone"}, "edited": false, "score": 0, "creation_date": 1486149828, "post_id": 41993167, "comment_id": 71237566, "body": "Thankyou Mike..It helped..Problem Solved :)"}], "tags": [], "owner": {"reputation": 1074, "user_id": 7381492, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t3vPN.png?s=128&g=1", "display_name": "Mike Wodarczyk", "link": "https://stackoverflow.com/users/7381492/mike-wodarczyk"}, "is_accepted": true, "score": 1, "last_activity_date": 1486001660, "creation_date": 1486001660, "answer_id": 41993167, "question_id": 41990568, "link": "https://stackoverflow.com/questions/41990568/execute-telnet-command-for-port-check-by-ssh-to-remote-hosts-and-get-the-output/41993167#41993167", "title": "Execute telnet command for Port check by SSH to remote hosts and get the output to a file", "body": "<p>When trying to use telnet, you need to run something like expect. Telnet grabs the terminal io. Expect replaces the terminal with a pseudo terminal and allows you to script the input and output.</p>\n"}], "owner": {"reputation": 349, "user_id": 5001308, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/de1c91521eda30dbc39a364c207a4620?s=128&d=identicon&r=PG&f=1", "display_name": "Rczone", "link": "https://stackoverflow.com/users/5001308/rczone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 657, "favorite_count": 0, "accepted_answer_id": 41993167, "answer_count": 1, "score": -2, "last_activity_date": 1489038842, "creation_date": 1485986287, "last_edit_date": 1489038842, "question_id": 41990568, "link": "https://stackoverflow.com/questions/41990568/execute-telnet-command-for-port-check-by-ssh-to-remote-hosts-and-get-the-output", "title": "Execute telnet command for Port check by SSH to remote hosts and get the output to a file", "body": "<p>I have a text file like below with <code>host</code>, <code>site</code> and <code>port</code> to telnet</p>\n\n<pre><code>      Hostname                site                  port\nappwlsqa02.comp.xxx.com fgh-fst13-scan.comp.xxx.com 1521\nappwlsqa03.comp.xxx.com fgh-fst23-scan.comp.xxx.com 1521\ncappwlsqa01.comp.xxx.com fgh-fst13-scan.comp.xxx.com 1521\n</code></pre>\n\n<p>My goal is to ssh each <code>hostname</code> and execute telnet command </p>\n\n<p>for example for the  first row in the file</p>\n\n<pre><code>ssh appwlsqa02.comp.xxx.com \n</code></pre>\n\n<p>then,</p>\n\n<pre><code>telnet fgh-fst13-scan.comp.xxx.com  1521\n</code></pre>\n\n<p>I have tried below:</p>\n\n<pre><code>while read HOST site port ; do ssh $HOST \"echo exit | telnet $site $port \" &lt; /dev/null; done &lt; text.txt`\n</code></pre>\n\n<p>I have to read <code>hostnames</code> as one variable <code>$HOST</code> and host to check as <code>$site</code> and port as<code>$port</code></p>\n\n<p><strong>Update:</strong></p>\n\n<p>Here is the script i have developed based on sugegstions:</p>\n\n<pre><code># /bin/bash\nwhile read HOST site port ; \ndo\necho $HOST $site $port  \nssh -n $HOST \"telnet $site $port | grep \"Connected\" \" &gt;&gt; t.txt &amp;\nPID=$!\nsleep 2 \nkill \"$PID\"\n\nif [ -s t.txt ]\nthen\necho from $HOST to  $site $port is open &gt;&gt; succ.txt\nelse\necho from $HOST to  $site $port is closed &gt;&gt; fail.txt\nfi\nrm t.txt\ndone &lt; text.txt\n</code></pre>\n"}, {"tags": ["python", "numpy"], "answers": [{"comments": [{"owner": {"reputation": 1938, "user_id": 2480410, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/137e895147828842aae77979cb6e48b7?s=128&d=identicon&r=PG", "display_name": "RaduS", "link": "https://stackoverflow.com/users/2480410/radus"}, "edited": false, "score": 0, "creation_date": 1485987787, "post_id": 41990777, "comment_id": 71159058, "body": "wow, this method is exactly the type i was after. Thank you again @Divakar I really appreciate your dedication for helping. You answered really fast to a lot of my newbie questions"}], "tags": [], "owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "is_accepted": true, "score": 3, "last_activity_date": 1485987830, "last_edit_date": 1485987830, "creation_date": 1485987064, "answer_id": 41990777, "question_id": 41990566, "link": "https://stackoverflow.com/questions/41990566/numpy-python-find-the-highest-value-from-a-column-for-each-unique-value-in-anot/41990777#41990777", "title": "numpy python: Find the highest value from a column for each unique value in another column", "body": "<p>Here's one approach -</p>\n\n<pre><code># Lex-sort combining cols-1,3 with col-3 setting the primary order\nsidx = np.lexsort(a[:,[1,3]].T)\n\n# Indices at intervals change for column-3. These would essentially \n# tell us the last indices for each group in a lex-sorted array\nidx = np.append(np.flatnonzero(a[1:,3] &gt; a[:-1,3]), a.shape[0]-1)    \n\n# Finally, index into idx with lex-sorted indices to give us \n# the last indices in a lex-sorted version, which is equivalent \n# of picking up the highest of each group\nout = a[sidx[idx]]\n</code></pre>\n\n<p>Sample run -</p>\n\n<pre><code>In [234]: a  # Input array\nOut[234]: \narray([[ 25,  29,  19,  93],\n       [ 27,  59,  14,  93],\n       [ 24,  46,  15,  93],\n       [ 79,  87,  50, 139],\n       [ 13,  86,  32, 139],\n       [ 56,  25,  85, 142],\n       [ 62,  62,  68, 142],\n       [ 27,  25,  20, 150],\n       [ 29,  53,  71, 150],\n       [ 64,  67,  21, 150],\n       [ 96,  57,  73, 150]])\n\nIn [235]: out    # Output array\nOut[235]: \narray([[ 27,  59,  14,  93],\n       [ 79,  87,  50, 139],\n       [ 62,  62,  68, 142],\n       [ 64,  67,  21, 150]])\n</code></pre>\n\n<p><strong>Performance boost with views</strong></p>\n\n<p>We can slice with <code>a[:,1::2]</code> instead of <code>a[:,[1,3]]</code> to use the same memory space and thus hopefully bring out performance improvement too. \nLet's verify the memory view  -</p>\n\n<pre><code>In [240]: np.may_share_memory(a,a[:,[1,3]])\nOut[240]: False\n\nIn [241]: np.may_share_memory(a,a[:,1::2])\nOut[241]: True\n</code></pre>\n"}], "owner": {"reputation": 1938, "user_id": 2480410, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/137e895147828842aae77979cb6e48b7?s=128&d=identicon&r=PG", "display_name": "RaduS", "link": "https://stackoverflow.com/users/2480410/radus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 380, "favorite_count": 2, "accepted_answer_id": 41990777, "answer_count": 1, "score": 3, "last_activity_date": 1485988189, "creation_date": 1485986276, "last_edit_date": 1485988189, "question_id": 41990566, "link": "https://stackoverflow.com/questions/41990566/numpy-python-find-the-highest-value-from-a-column-for-each-unique-value-in-anot", "title": "numpy python: Find the highest value from a column for each unique value in another column", "body": "<p>Can somebody suggest an efficient method for getting the highest value in one column for each unique value in another</p>\n\n<p>the np.array looks like this [column0,column1,column2,column3]</p>\n\n<pre><code>[[ 37367    421    231385     93]\n [ 37368    428    235156     93]\n [ 37369    408    234251     93]\n [ 37372    403    196292     93]\n [ 55523    400    247141    139]\n [ 55575    415    215818    139]\n [ 55576    402    204404    139]\n [ 69940    402    62244     175]\n [ 69941    402    38274     175]\n [ 69942    404    55171     175]\n [ 69943    416    55495     175]\n [ 69944    407    90231     175]\n [ 69945    411    75382     175]\n [ 69948    405    119129    175]] \n</code></pre>\n\n<p>where i want to return the highest value of column 1 based on the unique value of column 3. After the new array should look like this:</p>\n\n<pre><code>[[ 37368    428   235156     93]\n [ 55575    415   215818    139]\n [ 69943    416    55495    175]] \n</code></pre>\n\n<p>I know how to do this by looping but that is not what i am looking after because the table i am working in is quite big and i want to avoid looping</p>\n"}, {"tags": ["python", "python-3.x"], "answers": [{"tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 3, "last_activity_date": 1485986258, "creation_date": 1485986258, "answer_id": 41990558, "question_id": 41990526, "link": "https://stackoverflow.com/questions/41990526/str-object-has-no-attribute-save-screenshot/41990558#41990558", "title": "&#39;str&#39; object has no attribute &#39;save_screenshot&#39;", "body": "<p>Well here:</p>\n\n<pre><code>threading.Timer(1.0/60.0, take_screenshot,['driver']).start()\n</code></pre>\n\n<p>you feed it a string: <code>'driver'</code>. You can probably fix it with:</p>\n\n<pre><code>threading.Timer(1.0/60.0, take_screenshot,[driver]).start()\n#                                          ^    ^\n#                                         no quotes\n</code></pre>\n"}], "owner": {"reputation": 573, "user_id": 2607331, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/3zZxU.jpg?s=128&g=1", "display_name": "Tushar Saurabh", "link": "https://stackoverflow.com/users/2607331/tushar-saurabh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 428, "favorite_count": 0, "accepted_answer_id": 41990558, "answer_count": 1, "score": 0, "last_activity_date": 1485987684, "creation_date": 1485986146, "last_edit_date": 1485987684, "question_id": 41990526, "link": "https://stackoverflow.com/questions/41990526/str-object-has-no-attribute-save-screenshot", "title": "&#39;str&#39; object has no attribute &#39;save_screenshot&#39;", "body": "<p>I am creating a small python script that will call firefox and take screenshot at interval of 1/60 sec. The screenshot would be taken till end 120th sec.</p>\n\n<p>Error - The script is able to take the first screenshot, however in the next one, I am getting the error <code>'str' object has no attribute 'save_screenshot'</code>.</p>\n\n<p>Code: </p>\n\n<pre><code>from selenium import webdriver\nimport threading\n\ncounter = 0\ndef take_screenshot(driver):\n    global counter\n    print (type(counter))\n    driver.save_screenshot(\"selenium-test_\" + str(counter) + \".png\")\n    counter += 1\n    if counter &lt;= 7200:\n        threading.Timer(1.0/60.0, take_screenshot,['driver']).start()\n    else:\n        driver.quit()\n\ndriver = webdriver.Firefox()\ndriver.set_window_size(1083 ,557)\ndriver.get(\"file:///Users/tusharsaurabh/E%20Card/ecard-coconut-tree/index.html\")\ntake_screenshot(driver)\n</code></pre>\n\n<p>Please let me know, where am I going wrong.</p>\n"}, {"tags": ["python"], "answers": [{"comments": [{"owner": {"reputation": 6424, "user_id": 3579910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoMjv.jpg?s=128&g=1", "display_name": "TemporalWolf", "link": "https://stackoverflow.com/users/3579910/temporalwolf"}, "edited": false, "score": 1, "creation_date": 1485988387, "post_id": 41990984, "comment_id": 71159312, "body": "this pseudo-code is not quite what he&#39;s asking for (each option once), unless you remove each choice as you choose it. Also, you can simplify your decider via <code>number, color = display_candidates[random.randint(0, len(display_candidates))]</code>"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "reply_to_user": {"reputation": 6424, "user_id": 3579910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoMjv.jpg?s=128&g=1", "display_name": "TemporalWolf", "link": "https://stackoverflow.com/users/3579910/temporalwolf"}, "edited": false, "score": 0, "creation_date": 1485988522, "post_id": 41990984, "comment_id": 71159368, "body": "Right.  This was just for a start, but I forgot to do the removal; I&#39;ll add that.  I was trying to keep the technology flexible: hence the multi-line implementation."}, {"owner": {"reputation": 6424, "user_id": 3579910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoMjv.jpg?s=128&g=1", "display_name": "TemporalWolf", "link": "https://stackoverflow.com/users/3579910/temporalwolf"}, "edited": false, "score": 1, "creation_date": 1485988651, "post_id": 41990984, "comment_id": 71159427, "body": "alternatively, you can just use <code>random.shuffle(display_candidates)</code> then loop through them with <code>for candidate in display_candidates:</code> which is considerably cleaner."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "reply_to_user": {"reputation": 6424, "user_id": 3579910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoMjv.jpg?s=128&g=1", "display_name": "TemporalWolf", "link": "https://stackoverflow.com/users/3579910/temporalwolf"}, "edited": false, "score": 1, "creation_date": 1485988827, "post_id": 41990984, "comment_id": 71159498, "body": "Thanks again; you just blew away half of the edit, maybe five seconds before I submitted.  Everyone else, please up-vote @TemporalWolf&#39;s help on this."}], "tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 0, "last_activity_date": 1485988834, "last_edit_date": 1485988834, "creation_date": 1485987954, "answer_id": 41990984, "question_id": 41990508, "link": "https://stackoverflow.com/questions/41990508/number-string-colours-and-trials-need-better-solution/41990984#41990984", "title": "Number string colours and trials. Need better solution", "body": "<p>I suggest a different approach: store the objects you want with <em>all</em> of their characteristics: display character and colour.  This gives you something like:</p>\n\n<pre><code>display_candidates = [\n    ('1', 'r'), ('1', 'r'), ('1', 'r'),\n    ('1', 'g'), ('1', 'b'),\n    ('2', 'g'), ('2', 'g'), ('2', 'g'),\n    ('2', 'b'), ('2', 'r'),\n    ('3', 'b'), ('3', 'b'), ('3', 'b'),\n    ('3', 'r'), ('3', 'g')\n]\n</code></pre>\n\n<p>Now, you pull out a random display object with</p>\n\n<pre><code>import random\n\nrandom.shuffle(display_candidates)\nfor number, colour in display_candidates:\n</code></pre>\n\n<p>Now, use <strong>colour</strong> for setColor, much as you've done above.</p>\n\n<p>You'll need to slap a loop around this to make it run the desired number of times.</p>\n\n<p>Does this get you moving?</p>\n"}, {"comments": [{"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1485988674, "post_id": 41991019, "comment_id": 71159441, "body": "<code>extend</code>, not <code>append</code>. <code>append</code> will add the list as a single element, <code>extend</code> will add the elements of one list to the other."}, {"owner": {"reputation": 6424, "user_id": 3579910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoMjv.jpg?s=128&g=1", "display_name": "TemporalWolf", "link": "https://stackoverflow.com/users/3579910/temporalwolf"}, "reply_to_user": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1485988766, "post_id": 41991019, "comment_id": 71159477, "body": "@MadPhysicist Fixed, thanks. That&#39;s what I get for manually moving the code over instead of copying."}, {"owner": {"reputation": 63, "user_id": 7183223, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/ddb1d6aec6dedcb2fa496eef41acbf36?s=128&d=identicon&r=PG&f=1", "display_name": "Anonypy", "link": "https://stackoverflow.com/users/7183223/anonypy"}, "edited": false, "score": 0, "creation_date": 1485991067, "post_id": 41991019, "comment_id": 71160321, "body": "Hmm this looks good. I&#39;m not sure it&#39;s exactly what I&#39;m looking for though, although I&#39;ll give it a try. I&#39;m quite new to python, so this code is very difficult to understand at the moment. I&#39;m working with Psychopy if that helps."}, {"owner": {"reputation": 6424, "user_id": 3579910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoMjv.jpg?s=128&g=1", "display_name": "TemporalWolf", "link": "https://stackoverflow.com/users/3579910/temporalwolf"}, "reply_to_user": {"reputation": 63, "user_id": 7183223, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/ddb1d6aec6dedcb2fa496eef41acbf36?s=128&d=identicon&r=PG&f=1", "display_name": "Anonypy", "link": "https://stackoverflow.com/users/7183223/anonypy"}, "edited": false, "score": 0, "creation_date": 1485993904, "post_id": 41991019, "comment_id": 71161255, "body": "@Anonypy I added more explanation"}], "tags": [], "owner": {"reputation": 6424, "user_id": 3579910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoMjv.jpg?s=128&g=1", "display_name": "TemporalWolf", "link": "https://stackoverflow.com/users/3579910/temporalwolf"}, "is_accepted": false, "score": 1, "last_activity_date": 1485993892, "last_edit_date": 1485993892, "creation_date": 1485988091, "answer_id": 41991019, "question_id": 41990508, "link": "https://stackoverflow.com/questions/41990508/number-string-colours-and-trials-need-better-solution/41991019#41991019", "title": "Number string colours and trials. Need better solution", "body": "<p>I would probably do:</p>\n\n<pre><code>import random\n\n# Build the question list\nred =   ['1'] * 3 + ['2'] + ['3']\ngreen = ['1'] + ['2'] * 3 + ['3']\nblue =  ['1'] + ['2'] + ['3'] * 3\n\nquestions = []\nquestions.extend([('red', x) for x in red])\nquestions.extend([('green', x) for x in green])\nquestions.extend([('blue', x) for x in blue])\n\nrandom.shuffle(questions)\n\nfor color, number in questions:\n    # do whatever\n</code></pre>\n\n<p>This allows for you to pretty readily change the lists and it will auto-compile and shuffle them for you:</p>\n\n<pre><code>[1]*3+[2]+[3] generates [1, 1, 1, 2, 3]\n</code></pre>\n\n<p>Essentially: I want 3 1s, a 2 and 3 in a list.</p>\n\n<p><code>questions.extend</code> extends the questions list with whatever list you pass it, so I want to put them all together.</p>\n\n<p><code>[('red', x) for x in red]</code> is a <a href=\"https://docs.python.org/2/tutorial/datastructures.html#list-comprehensions\" rel=\"nofollow noreferrer\">list comprehension</a> which says: Make a new list, but for every number in that earlier list, instead say it's ('red', x) where x is what the old list had.</p>\n\n<p>Finally, <code>random.shuffle()</code> shuffles the list so the order is random.</p>\n\n<p><strong>NOTE</strong>: This method (<code>['1'] * 3 + ['2'] + ['3']</code>) of list generation is not safe for <a href=\"https://en.wikibooks.org/wiki/Python_Programming/Data_Types#Mutable_vs_Immutable_Objects\" rel=\"nofollow noreferrer\">mutable objects</a>, but because strings are immutable, we're fine.</p>\n"}, {"comments": [{"owner": {"reputation": 6424, "user_id": 3579910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoMjv.jpg?s=128&g=1", "display_name": "TemporalWolf", "link": "https://stackoverflow.com/users/3579910/temporalwolf"}, "edited": false, "score": 0, "creation_date": 1485989113, "post_id": 41991040, "comment_id": 71159616, "body": "Note there is a trade-off in readability vs space/time complexity by moving to dictionaries instead of tuples, and given the application it&#39;s probably worth making it a dictionary. I would still advocate for letting the program build the dictionary for you instead of typing it all out."}], "tags": [], "owner": {"reputation": 4645, "user_id": 1297830, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8rH9k.jpg?s=128&g=1", "display_name": "Jonas Lindel&#248;v", "link": "https://stackoverflow.com/users/1297830/jonas-lindel%c3%b8v"}, "is_accepted": false, "score": 0, "last_activity_date": 1486128417, "last_edit_date": 1486128417, "creation_date": 1485988200, "answer_id": 41991040, "question_id": 41990508, "link": "https://stackoverflow.com/questions/41990508/number-string-colours-and-trials-need-better-solution/41991040#41991040", "title": "Number string colours and trials. Need better solution", "body": "<p>You should have a data structure that pairs the strings with the colors, and then put in the desired combinations. So something like:</p>\n\n<pre><code>import random\ntrials = [{'text': '1', 'color': 'red'},\n         {'text': '1', 'color': 'red'},\n         {'text': '1', 'color': 'red'},\n         {'text': '1', 'color': 'green'},\n         {'text': '1', 'color': 'blue'},\n         {'text': '2', 'color': 'green'}]  # ... etc\nrandom.shuffle(trials)\nkey_mapping = {'r': 'red', 'g':'green', 'b':'blue'}  # which keys means which color\n\nfor trial in trials:\n    stimu.color = trial['color']\n    stimu.text = trial['text']\n    stimu.draw()\n    ewindow.flip()\n\n    response = event.waitKeys(keyList=key_mapping.keys())[0]  # get first response, only allow keys which have been mapped\n    trial['correct'] = key_mapping[response] == trial['color']  # True if correct, False if incorrect\n</code></pre>\n\n<p>Notice also how I simplified the code for setting stimulus attributes and scoring response - partly made possible by a better data structure. Although a list of dictionaries seems like overkill here, you most likely want to add more info at a later stage (trial number, subject ID, reaction time, etc.) and then it becomes useful.</p>\n"}], "owner": {"reputation": 63, "user_id": 7183223, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/ddb1d6aec6dedcb2fa496eef41acbf36?s=128&d=identicon&r=PG&f=1", "display_name": "Anonypy", "link": "https://stackoverflow.com/users/7183223/anonypy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1486596158, "creation_date": 1485986083, "last_edit_date": 1486596158, "question_id": 41990508, "link": "https://stackoverflow.com/questions/41990508/number-string-colours-and-trials-need-better-solution", "title": "Number string colours and trials. Need better solution", "body": "<p>This is an excerpt from my full script (shortened so that it is more understandable).</p>\n\n<p>I'm very much stuck at the moment. </p>\n"}, {"tags": ["python", "ssl", "pyopenssl"], "comments": [{"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1486035627, "post_id": 41996833, "comment_id": 71178789, "body": "<code>set_servername_callback</code> is used by the server, not the client. Here are a couple of examples in C: <a href=\"http://stackoverflow.com/q/5113333/608639\">How to implement Server Name Indication (SNI)</a> and <a href=\"http://stackoverflow.com/q/22373332/608639\">Serving multiple domains in one box with SNI</a>. You can test your server by connecting to it with <code>s_client</code>: <code>openssl s_client -connect &lt;server&gt;:&lt;port&gt; -tls1 -servername &lt;server&gt;</code>. <code>-servername</code> is the SNI extension."}], "answers": [{"comments": [{"owner": {"reputation": 2237, "user_id": 396997, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/vhqwP.jpg?s=128&g=1", "display_name": "caleb", "link": "https://stackoverflow.com/users/396997/caleb"}, "edited": false, "score": 1, "creation_date": 1486048053, "post_id": 42005399, "comment_id": 71187225, "body": "Thank you! That was exactly the problem - that the context I was modifying was not being set on the socket due to being the same context already used."}], "tags": [], "owner": {"reputation": 59735, "user_id": 1350899, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a42186174515a63b8058100a736252f?s=128&d=identicon&r=PG", "display_name": "mata", "link": "https://stackoverflow.com/users/1350899/mata"}, "is_accepted": true, "score": 3, "last_activity_date": 1486631323, "last_edit_date": 1486631323, "creation_date": 1486047379, "answer_id": 42005399, "question_id": 41996833, "link": "https://stackoverflow.com/questions/41996833/using-ssl-context-set-servername-callback-in-python/42005399#42005399", "title": "Using ssl context.set_servername_callback in Python", "body": "<p>In your callback, <code>cb_context</code> is the same context on which <code>wrap_socket()</code> was called, and the same as <code>socket.context</code>, so <code>socket.context = cb_context</code> sets the context to the same it was before.</p>\n\n<p>Changing the certificate chain of a context does not affect the certificate used for the current <code>wrap_socket()</code> operation. The explanation for this lies in how openssl creates its underlying objects, in this case the underlying SSL structures have already been created and use <a href=\"https://wiki.openssl.org/index.php/Manual:SSL_CTX_add1_chain_cert(3)\" rel=\"nofollow noreferrer\">copies of the chains</a>:</p>\n\n<blockquote>\n  <p>NOTES</p>\n  \n  <p>The chains associate with an SSL_CTX structure are copied to any SSL structures when SSL_new() is called. SSL structures will not be affected by any chains subsequently changed in the parent SSL_CTX.</p>\n</blockquote>\n\n<p>When setting a new context, the SSL structures are updated, but that update is not performed when the <a href=\"https://github.com/openssl/openssl/blob/2c7bd69/ssl/ssl_lib.c#L3480\" rel=\"nofollow noreferrer\">new context is equal to the old one</a>.</p>\n\n<p>You need to set <code>sock.context</code> to a <em>different</em> context to make it work. You currently instantiate a new context on each new incoming connection, which is not needed. Instead you should instantiate your standard context only once and reuse that. Same goes for the dynamically loaded contexts, you could create them all on startup and put them in a dict so you can just do a lookup, e.g:</p>\n\n<pre><code>...\n\ncontexts = {}\n\nfor hostname in os.listdir(\"ssl\"):\n    print('Loading certs for {}'.format(hostname))\n    server_cert = \"ssl/{}/server\".format(hostname)\n    context = ssl.create_default_context(purpose=ssl.Purpose.CLIENT_AUTH)\n    context.load_cert_chain(certfile=\"{}.crt\".format(server_cert),\n                            keyfile=\"{}.key\".format(server_cert))\n    contexts[hostname] = context\n\ndef servername_callback(sock, req_hostname, cb_context, as_callback=True):\n    context = contexts.get(req_hostname)\n    if context is not None:\n        sock.context = context\n    else:\n        pass  # handle unknown hostname case\n\ndef run_server(hostname, port):\n    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\n    s.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)\n    s.bind((hostname, port))\n    s.listen(8)\n    print(\"Serving on {}:{}\".format(hostname, port))\n\n    context = ssl.create_default_context(purpose=ssl.Purpose.CLIENT_AUTH)\n    context.set_servername_callback(servername_callback)\n    default_cert = \"ssl/3.1/server\"\n    context.load_cert_chain(certfile=\"{}.crt\".format(default_cert),\n                            keyfile=\"{}.key\".format(default_cert))\n\n    try:\n        while True:\n            (c, a) = s.accept()\n            ssl_sock = context.wrap_socket(c, server_side=True)\n            try:\n                handle_client(ssl_sock, a)\n            finally:\n                c.close()\n\n    except KeyboardInterrupt:\n        s.close()\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3761, "user_id": 3982001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Fabio says Reinstate Monica", "link": "https://stackoverflow.com/users/3982001/fabio-says-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1543618595, "post_id": 53565666, "comment_id": 93997854, "body": "Your answer contains only code. It would be better if you could also add some commentary to explain what it does and how. Can you please <a href=\"https://stackoverflow.com/posts/53565666/edit\">edit</a> your answer and add it? Thank you!"}], "tags": [], "owner": {"reputation": 49, "user_id": 4594330, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/3ba0143c6badbaeb98a6bcb2329aedd4?s=128&d=identicon&r=PG&f=1", "display_name": "Eduard Florea", "link": "https://stackoverflow.com/users/4594330/eduard-florea"}, "is_accepted": false, "score": 2, "last_activity_date": 1543616308, "creation_date": 1543616308, "answer_id": 53565666, "question_id": 41996833, "link": "https://stackoverflow.com/questions/41996833/using-ssl-context-set-servername-callback-in-python/53565666#53565666", "title": "Using ssl context.set_servername_callback in Python", "body": "<p>So after looking at this post and a few others online, I put together a version of the code above, that worked for me perfectly... so I just thought I would share. In case it helps anyone else. </p>\n\n<pre><code>import sys\nimport ssl\nimport socket\nimport os\n\nfrom pprint import pprint\n\nDOMAIN_CONTEXTS = {}\n\nssl_root_path = \"c:/ssl/\"\n\n# ----------------------------------------------------------------------------------------------------------------------\n#\n# As an example create domains in the ssl root path...ie\n#\n# c:/ssl/example.com\n# c:/ssl/johndoe.com\n# c:/ssl/test.com\n#\n# And then create self signed ssl certificates for each domain to test... and put them in the corresponding domain \n# directory... in this case the cert and key files are called cert.pem, and key.pem.... \n#\n\ndef setup_ssl_certs():\n\n    global DOMAIN_CONTEXTS\n\n    for hostname in os.listdir(ssl_root_path):\n\n        #print('Loading certs for {}'.format(hostname))\n\n        # Establish the certificate and key folder...for the various domains...\n        server_cert = '{rp}{hn}/'.format(rp=ssl_root_path, hn=hostname)\n\n        # Setup the SSL Context manager object, for authentication\n        context = ssl.create_default_context(purpose=ssl.Purpose.CLIENT_AUTH)\n\n        # Load the certificate file, and key file...into the context manager.\n        context.load_cert_chain(certfile=\"{}cert.pem\".format(server_cert), keyfile=\"{}key.pem\".format(server_cert))\n\n        # Set the context object to the global dictionary\n        DOMAIN_CONTEXTS[hostname] = context\n\n    # Uncomment for testing only.\n    #pprint(contexts)\n\n# ----------------------------------------------------------------------------------------------------------------------\n\ndef servername_callback(sock, req_hostname, cb_context, as_callback=True):\n    \"\"\"\n    This is a callback function for the SSL Context manager, this is what does the real work of pulling the\n    domain name in the origional request.\n    \"\"\"\n\n    # Uncomment for testing only\n    #print(sock)\n    #print(req_hostname)\n    #print(cb_context)\n\n    context = DOMAIN_CONTEXTS.get(req_hostname)\n\n    if context:\n\n        try:\n            sock.context = context\n        except Exception as error:\n            print(error)\n        else:\n            sock.server_hostname = req_hostname\n\n    else:\n        pass  # handle unknown hostname case\n\n\ndef handle_client(conn, a):\n\n    request_domain = conn.server_hostname\n\n    request = conn.recv()\n\n    client_ip = conn.getpeername()[0]\n\n    resp = 'Hello {cip} welcome, from domain {d} !'.format(cip=client_ip, d=request_domain)\n\n    conn.write(b'HTTP/1.1 200 OK\\n\\n%s' % resp.encode())\n\n\ndef run_server(hostname, port):\n\n    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\n\n    s.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)\n\n    s.bind((hostname, port))\n\n    s.listen(8)\n\n    #print(\"Serving on {}:{}\".format(hostname, port))\n\n    context = ssl.create_default_context(purpose=ssl.Purpose.CLIENT_AUTH)\n\n    # For Python 3.4+\n    context.set_servername_callback(servername_callback)\n\n    # Only available in 3.7 !!!! have not tested it yet...\n    #context.sni_callback(servername_callback)\n\n    default_cert = \"{rp}default/\".format(rp=ssl_root_path)\n\n    context.load_cert_chain(certfile=\"{}cert.pem\".format(default_cert), keyfile=\"{}key.pem\".format(default_cert))\n\n    context.options |= ssl.OP_NO_TLSv1 | ssl.OP_NO_TLSv1_1  # optional\n\n    context.set_ciphers('EECDH+AESGCM:EDH+AESGCM:AES256+EECDH:AES256+EDH')\n\n    try:\n        while True:\n\n            ssock, addr = s.accept()\n\n            try:\n                conn = context.wrap_socket(ssock, server_side=True)\n\n            except Exception as error:\n                print('!!! Error, {e}'.format(e=error))\n\n            except ssl.SSLError as e:\n                print(e)\n\n            else:\n                handle_client(conn, addr)\n\n                if conn:\n                    conn.close()\n                    #print('Connection closed !')\n\n    except KeyboardInterrupt:\n        s.close()\n\n# ----------------------------------------------------------------------------------------------------------------------\n\ndef main():\n\n    setup_ssl_certs()\n\n    # Don't forget to update your static name resolution...  ie example.com = 127.0.0.1\n    run_server('example.com', 443)\n\n# ----------------------------------------------------------------------------------------------------------------------\n\nif __name__ == '__main__':\n    main()\n</code></pre>\n"}], "migrated_from": {"other_site": {"aliases": ["http://itsecurity.stackexchange.com"], "launch_date": 1310490000, "open_beta_date": 1290106800, "closed_beta_date": 1289502000, "site_state": "normal", "high_resolution_icon_url": "https://cdn.sstatic.net/Sites/security/Img/apple-touch-icon@2.png", "twitter_account": "StackSecurity", "favicon_url": "https://cdn.sstatic.net/Sites/security/Img/favicon.ico", "icon_url": "https://cdn.sstatic.net/Sites/security/Img/apple-touch-icon.png", "audience": "information security professionals", "site_url": "https://security.stackexchange.com", "api_site_parameter": "security", "logo_url": "https://cdn.sstatic.net/Sites/security/Img/logo.png", "name": "Information Security", "site_type": "main_site"}, "on_date": 1486022065, "question_id": 150111}, "owner": {"reputation": 2237, "user_id": 396997, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/vhqwP.jpg?s=128&g=1", "display_name": "caleb", "link": "https://stackoverflow.com/users/396997/caleb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3081, "favorite_count": 3, "accepted_answer_id": 42005399, "answer_count": 2, "score": 5, "last_activity_date": 1543616308, "creation_date": 1485986017, "last_edit_date": 1486035395, "question_id": 41996833, "link": "https://stackoverflow.com/questions/41996833/using-ssl-context-set-servername-callback-in-python", "title": "Using ssl context.set_servername_callback in Python", "body": "<p>I have a goal of allowing an ssl client to select from a number of valid certificate pairs from the server. The client has a CA certificate which it will use to validate the certificate coming from the server.</p>\n\n<p>So to try to accomplish this, I'm using the <code>ssl.SSLContext.set_servername_callback()</code> on the server in combination with <code>ssl.SSLSocket.wrap_socket's parameter:</code>server_hostname` to try to allow the client to specify which keypair to use. Here's what the code looks like:</p>\n\n<p>Server code:</p>\n\n<pre><code>import sys\nimport pickle\nimport ssl\nimport socket\nimport select\n\nrequest = {'msgtype': 0, 'value': 'Ping', 'test': [chr(i) for i in range(256)]}\nresponse = {'msgtype': 1, 'value': 'Pong'}\n\ndef handle_client(c, a):\n    print(\"Connection from {}:{}\".format(*a))\n    req_raw = c.recv(10000)\n    req = pickle.loads(req_raw)\n    print(\"Received message: {}\".format(req))\n    res = pickle.dumps(response)\n    print(\"Sending message: {}\".format(response))\n    c.send(res)\n\ndef run_server(hostname, port):\n    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\n    s.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)\n    s.bind((hostname, port))\n    s.listen(8)\n    print(\"Serving on {}:{}\".format(hostname, port))\n\n    try:\n        while True:\n            (c, a) = s.accept()\n\n            def servername_callback(sock, req_hostname, cb_context, as_callback=True):\n                print('Loading certs for {}'.format(req_hostname))\n                server_cert = \"ssl/{}/server\".format(req_hostname)  # NOTE: This use of socket input is INSECURE\n                cb_context.load_cert_chain(certfile=\"{}.crt\".format(server_cert), keyfile=\"{}.key\".format(server_cert))\n\n                # Seems like this is designed usage: https://github.com/python/cpython/blob/3.4/Modules/_ssl.c#L1469\n                sock.context = cb_context\n                return None\n\n            context = ssl.create_default_context(purpose=ssl.Purpose.CLIENT_AUTH)\n            context.set_servername_callback(servername_callback)\n            default_cert = \"ssl/3.1/server\"\n            context.load_cert_chain(certfile=\"{}.crt\".format(default_cert), keyfile=\"{}.key\".format(default_cert))\n            ssl_sock = context.wrap_socket(c, server_side=True)\n\n            try:\n                handle_client(ssl_sock, a)\n            finally:\n                c.close()\n\n    except KeyboardInterrupt:\n        s.close()\n\nif __name__ == '__main__':\n    hostname = ''\n    port = 6789\n    run_server(hostname, port)\n</code></pre>\n\n<p>Client code:</p>\n\n<pre><code>import sys\nimport pickle\nimport socket\nimport ssl\n\nrequest = {'msgtype': 0, 'value': 'Ping', 'test': [chr(i) for i in range(256)]}\nresponse = {'msgtype': 1, 'value': 'Pong'}\n\n\ndef client(hostname, port):\n    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\n    print(\"Connecting to {}:{}\".format(hostname, port))\n    s.connect((hostname, port))\n\n    ssl_sock = ssl.SSLSocket(sock=s, ca_certs=\"server_old.crt\", cert_reqs=ssl.CERT_REQUIRED, server_hostname='3.2')\n\n    print(\"Sending message: {}\".format(request))\n    req = pickle.dumps(request)\n    ssl_sock.send(req)\n\n    resp_raw = ssl_sock.recv(10000)\n    resp = pickle.loads(resp_raw)\n    print(\"Received message: {}\".format(resp))\n\n    ssl_sock.close()\n\nif __name__ == '__main__':\n    hostname = 'localhost'\n    port = 6789\n    client(hostname, port)\n</code></pre>\n\n<p>But it's not working. What seems to be happening is <code>servername_callback</code> is getting called, is getting the specified \"hostname\", and the call to <code>context.load_cert_chain</code> within the callback is not failing (though it does fail if it's given path that doesn't exist). However, the server always returns the certificate pair that was loaded prior to calling <code>context.wrap_socket(c, server_side=True)</code>. So my question is: is there some way, within the <code>servername_callback</code>, to modify the keypair used by the ssl context, and get that keypair's certificate to be used for the connection?</p>\n\n<p>I should also note that I checked the traffic, and the server's certificate is NOT being sent until after the <code>servername_callback</code> function returns (and will never be sent if it fails to complete successfully, or returns a \"failure\" value).</p>\n"}, {"tags": ["python", "mysql", "postgresql"], "comments": [{"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1485986257, "post_id": 41990464, "comment_id": 71158282, "body": "<code>print &quot;Exists: &quot;,exists</code> your exists variable is not changed by the result of the query. You need to retrieve the result from the query, and assign it to your variable. There probably is some function in your cursor, like <code>exists = cnx.get_result();</code>"}, {"owner": {"reputation": 41, "user_id": 7502895, "user_type": "registered", "profile_image": "https://graph.facebook.com/10100105135665873/picture?type=large", "display_name": "Callie", "link": "https://stackoverflow.com/users/7502895/callie"}, "reply_to_user": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1486074364, "post_id": 41990464, "comment_id": 71202489, "body": "Thank you! Great answers. And at least in the process of my working through this, I realized that since I am testing many words for their existence in my &quot;Port&quot; table, it is actually faster for me to read my table in to a hash or pandas table rather than query the database every time."}], "answers": [{"tags": [], "owner": {"reputation": 2536, "user_id": 5982962, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MMUja.jpg?s=128&g=1", "display_name": "Roman Tkachuk", "link": "https://stackoverflow.com/users/5982962/roman-tkachuk"}, "is_accepted": false, "score": 0, "last_activity_date": 1485986121, "creation_date": 1485986121, "answer_id": 41990518, "question_id": 41990464, "link": "https://stackoverflow.com/questions/41990464/check-postgresql-table-column-for-value-and-return-boolean/41990518#41990518", "title": "Check PostgreSQL table column for value and return boolean", "body": "<p>Exists many variants, but simpliest is: </p>\n\n<pre><code>select count(*) &gt; 0 from ref_locations where \"Port\"='ORAN'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1345, "user_id": 969367, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fba8260dbe94181f52d32658bcf99768?s=128&d=identicon&r=PG", "display_name": "Vic", "link": "https://stackoverflow.com/users/969367/vic"}, "is_accepted": true, "score": 1, "last_activity_date": 1485987528, "creation_date": 1485987528, "answer_id": 41990883, "question_id": 41990464, "link": "https://stackoverflow.com/questions/41990464/check-postgresql-table-column-for-value-and-return-boolean/41990883#41990883", "title": "Check PostgreSQL table column for value and return boolean", "body": "<p>Your postgresql statement isn't problem, though you might shorten it a tad to this:</p>\n\n<pre><code>select exists(select from ref_locations where Port='ORAN');\n</code></pre>\n\n<p>The problem you're having is that the result of the execute statement isn't assigned to anything. </p>\n\n<p>Consider trying this instead (after your execute statement):</p>\n\n<pre><code>exists = cnx.fetchone()\n</code></pre>\n\n<p>or just </p>\n\n<pre><code>print cnx.fetchone()\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 7502895, "user_type": "registered", "profile_image": "https://graph.facebook.com/10100105135665873/picture?type=large", "display_name": "Callie", "link": "https://stackoverflow.com/users/7502895/callie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1276, "favorite_count": 0, "accepted_answer_id": 41990883, "answer_count": 2, "score": 3, "last_activity_date": 1485989840, "creation_date": 1485985922, "question_id": 41990464, "link": "https://stackoverflow.com/questions/41990464/check-postgresql-table-column-for-value-and-return-boolean", "title": "Check PostgreSQL table column for value and return boolean", "body": "<p>I am just learning SQL and apologize if this is repetitive, but I have searched and not found an answer. Writing in python with a PostgreSQL DB.</p>\n\n<p>I want to check a table in my database to see if the \"Port\" column contains a specific location. I can do this interactively, but it returns a table result, eg:</p>\n\n<pre><code>select exists(select 1 from ref_locations where \"Port\"='ORAN');\n</code></pre>\n\n<p>it returns:</p>\n\n<pre><code>exists\n-------\nt\n(1 row)\n</code></pre>\n\n<p>... I want it to return JUST a boolean value, and I want to do it in my python script. In my python script I have:</p>\n\n<pre><code>exists = False\ncnx.execute(\"\"\"select exists(select 1 from ref_locations where \"Port\"='BAKU');\"\"\")\nprint \"Exists: \",exists\n</code></pre>\n\n<p>but exists is always filled with False. Any help greatly appreciated.</p>\n"}, {"tags": ["python", "selenium", "selenium-webdriver", "webdriver"], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 7482600, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1434565153254371/picture?type=large", "display_name": "Mohammed Kamal Mkadaim", "link": "https://stackoverflow.com/users/7482600/mohammed-kamal-mkadaim"}, "edited": false, "score": 0, "creation_date": 1485988197, "post_id": 41990490, "comment_id": 71159232, "body": "thanks for your answer , I tried what you said but the same result ,, if you can give me an example by code"}], "tags": [], "owner": {"reputation": 3891, "user_id": 2326911, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/173ece6e1a474bf45d2dee00f651b543?s=128&d=identicon&r=PG&f=1", "display_name": "\u1d00\u0280\u1d0d\u1d00\u0274", "link": "https://stackoverflow.com/users/2326911/%e1%b4%80%ca%80%e1%b4%8d%e1%b4%80%c9%b4"}, "is_accepted": false, "score": 0, "last_activity_date": 1485986326, "last_edit_date": 1485986326, "creation_date": 1485986026, "answer_id": 41990490, "question_id": 41990407, "link": "https://stackoverflow.com/questions/41990407/how-can-i-use-selenium-to-find-element-in-the-new-page/41990490#41990490", "title": "How can I use Selenium to find element in the new page", "body": "<p>When you using selenium you should consider that in every page you are the browser variable should refer to that page , for example here you go to a url using <code>browser.get()</code> but when you use <code>clicklogin.click()</code> you will go to another page so browser is not reference to that page so when you use  <code>link = browser.find_element_by_css_selector('#Btn_ReFresh')</code> it gave you error and error says unable to locate element just because browser is not in that page, to solve the problem I suggest you to see when you click on login what url should browser go then pass the <code>browser.get</code> that url. for example if it is a <code>a</code> tag , see <code>href</code> attribute of this element and pass that to <code>browser.get()</code></p>\n"}], "owner": {"reputation": 15, "user_id": 7482600, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1434565153254371/picture?type=large", "display_name": "Mohammed Kamal Mkadaim", "link": "https://stackoverflow.com/users/7482600/mohammed-kamal-mkadaim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 314, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1485986326, "creation_date": 1485985640, "last_edit_date": 1485986043, "question_id": 41990407, "link": "https://stackoverflow.com/questions/41990407/how-can-i-use-selenium-to-find-element-in-the-new-page", "title": "How can I use Selenium to find element in the new page", "body": "<p>I'm using this code to create a script fill data itself </p>\n\n<p>Snippet #1, when done, opens a new page in the same tap after pressing login. I want to use the snippet #2 to find the button code refresh and click on it but every time I get an error, shown after this:</p>\n\n<p>Snippet #1</p>\n\n<pre><code>from selenium import webdriver\nfrom selenium.webdriver.common.keys import Keys\nimport re\nimport time\n\nbrowser = webdriver.Firefox()\nbrowser.get('the url')\n\nuser = browser.find_element_by_css_selector('#Frm_Username')\nuser.send_keys('admin')\n\npassword = browser.find_element_by_css_selector('#Frm_Password')\npassword.send_keys('admin')\n\nclickLogin = browser.find_element_by_css_selector('#LoginId')\nclickLogin.click()\n\nbrowser.implicitly_wait(20)\n</code></pre>\n\n<p>Snippet #2</p>\n\n<pre><code>link = browser.find_element_by_css_selector('#Btn_ReFresh')        \nlink.click()\n</code></pre>\n\n<p>The error: </p>\n\n<pre><code>Traceback (most recent call last):\n  File \"C:/Users/myName/Desktop/loginTest1.py\", line 30, in &lt;module&gt;\n    link = browser.find_element_by_css_selector('#Btn_ReFresh')\n  File \"C:\\Users\\myName\\AppData\\Local\\Programs\\Python\\Python36-32\\lib\\site-packages\\selenium\\webdriver\\remote\\webdriver.py\", line 437, in find_element_by_css_selector\n    return self.find_element(by=By.CSS_SELECTOR, value=css_selector)\n  File \"C:\\Users\\myName\\AppData\\Local\\Programs\\Python\\Python36-32\\lib\\site-packages\\selenium\\webdriver\\remote\\webdriver.py\", line 752, in find_element\n    'value': value})['value']\n  File \"C:\\Users\\myName\\AppData\\Local\\Programs\\Python\\Python36-32\\lib\\site-packages\\selenium\\webdriver\\remote\\webdriver.py\", line 236, in execute\n    self.error_handler.check_response(response)\n  File \"C:\\Users\\myName\\AppData\\Local\\Programs\\Python\\Python36-32\\lib\\site-packages\\selenium\\webdriver\\remote\\errorhandler.py\", line 192, in check_response\n    raise exception_class(message, screen, stacktrace)\nselenium.common.exceptions.NoSuchElementException: Message: Unable to locate element: {\"method\":\"css selector\",\"selector\":\"#Btn_ReFresh\"}\nStacktrace:\n    at FirefoxDriver.prototype.findElementInternal_ (file:///C:/Users/myName/AppData/Local/Temp/tmpkiy2vz8t/extensions/fxdriver@googlecode.com/components/driver-component.js:10770)\n    at fxdriver.Timer.prototype.setTimeout/&lt;.notify (file:///C:/Users/myName/AppData/Local/Temp/tmpkiy2vz8t/extensions/fxdriver@googlecode.com/components/driver-component.js:625)\n</code></pre>\n\n<p>All I want is to find an element and click it in the new page which is opened in the same tap after script logged in?</p>\n"}, {"tags": ["python", "django"], "answers": [{"tags": [], "owner": {"reputation": 12105, "user_id": 6043170, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-iFy-IHfVniw/AAAAAAAAAAI/AAAAAAAAAFM/f_Xao2r127I/photo.jpg?sz=128", "display_name": "2ps", "link": "https://stackoverflow.com/users/6043170/2ps"}, "is_accepted": true, "score": 1, "last_activity_date": 1485988902, "creation_date": 1485988902, "answer_id": 41991201, "question_id": 41990369, "link": "https://stackoverflow.com/questions/41990369/django-generate-list-of-strings/41991201#41991201", "title": "Django: Generate list of strings", "body": "<p>Add <code>| safe</code> if you don\u2019t want to see the quotes escaped like that.  </p>\n\n<pre><code>{{ price_cleaning | safe }}\n</code></pre>\n\n<p><a href=\"https://docs.djangoproject.com/en/1.10/ref/templates/builtins/#safe\" rel=\"nofollow noreferrer\">From the docs, the <strong><code>safe</code></strong> filter</a></p>\n\n<blockquote>\n  <p>Marks a string as not requiring further HTML escaping prior to output. When autoescaping is off, this filter has no effect.</p>\n</blockquote>\n"}], "owner": {"reputation": 1756, "user_id": 4594063, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/746e474603a169a3456a4039381a740d?s=128&d=identicon&r=PG&f=1", "display_name": "Wessi", "link": "https://stackoverflow.com/users/4594063/wessi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 41991201, "answer_count": 1, "score": 0, "last_activity_date": 1485988902, "creation_date": 1485985519, "question_id": 41990369, "link": "https://stackoverflow.com/questions/41990369/django-generate-list-of-strings", "title": "Django: Generate list of strings", "body": "<p>I have a function that I pass to the context in views.py and use in a django template for use in a javascript chart.</p>\n\n<p>function:</p>\n\n<pre><code>def cleaning_data_plotly(area_id):\n    _input = pricecleaning.values('percent_of_obs','price_cleaning',)\n    data = []\n    for row in _input:\n        data.append(str(\"Price of cleaning is \"  + str(row['price_cleaning']) + \" USD in \" + str(percent_of_obs)+\" % of cases\"))\nreturn data\n</code></pre>\n\n<p>template:</p>\n\n<pre><code>text: {{ price_cleaning }},\n</code></pre>\n\n<p>When I inspect the output I see this:</p>\n\n<pre><code>text: [&amp;#39;Price of cleaning is 68 USD in 3.58 % of cases &amp;#39;, &amp;#39;Price of cleaning is 78 USD in 7.58 % of cases &amp;#39;],\n</code></pre>\n\n<p>Whereas I expected this:</p>\n\n<pre><code>text: [\"Price of cleaning is 68 USD in 3.58 % of cases\", \"Price of cleaning is 78 USD in 7.58 % of cases\"],\n</code></pre>\n\n<p>How do I get proper strings? Any help is much appreciated!</p>\n\n<p>I'm using Python 3.5 and Django 1.10.</p>\n"}, {"tags": ["python", "regex", "pandas", "filter"], "answers": [{"comments": [{"owner": {"reputation": 309, "user_id": 3981355, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/641886902/picture?type=large", "display_name": "Carlos Arronte Bello", "link": "https://stackoverflow.com/users/3981355/carlos-arronte-bello"}, "edited": false, "score": 0, "creation_date": 1485986605, "post_id": 41990387, "comment_id": 71158467, "body": "ok, i think the best idea is convert the date to datetime, but some values for th fate are None or NA, and i need to show this values too. Any option to do it, cause i think datetime do not accept strings.  The code is something like this"}, {"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "reply_to_user": {"reputation": 309, "user_id": 3981355, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/641886902/picture?type=large", "display_name": "Carlos Arronte Bello", "link": "https://stackoverflow.com/users/3981355/carlos-arronte-bello"}, "edited": false, "score": 0, "creation_date": 1485987136, "post_id": 41990387, "comment_id": 71158742, "body": "@CarlosArronteBello, do you want to have those rows where <code>Date</code> is <code>None</code> or <code>NaN</code> in the resulting data set (after filtering)?"}, {"owner": {"reputation": 309, "user_id": 3981355, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/641886902/picture?type=large", "display_name": "Carlos Arronte Bello", "link": "https://stackoverflow.com/users/3981355/carlos-arronte-bello"}, "edited": false, "score": 0, "creation_date": 1485987214, "post_id": 41990387, "comment_id": 71158777, "body": "yes please i need None and NA also all the dates before octuber 2016(including octuber). And thank you so much"}, {"owner": {"reputation": 309, "user_id": 3981355, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/641886902/picture?type=large", "display_name": "Carlos Arronte Bello", "link": "https://stackoverflow.com/users/3981355/carlos-arronte-bello"}, "edited": false, "score": 0, "creation_date": 1485987823, "post_id": 41990387, "comment_id": 71159077, "body": "ok looks that&#180;s going to work for me, let me try the code, just a quick question, the return will be NaT or will be the string for None and Na and also the date format can be the mm/dd/yyyy, sorry for the bother, i&#180;m basically new in this. And thanks for the help"}, {"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "reply_to_user": {"reputation": 309, "user_id": 3981355, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/641886902/picture?type=large", "display_name": "Carlos Arronte Bello", "link": "https://stackoverflow.com/users/3981355/carlos-arronte-bello"}, "edited": false, "score": 0, "creation_date": 1485988072, "post_id": 41990387, "comment_id": 71159179, "body": "if you want to be able to use vectorized (read fast) operations on <code>ActualDate</code> column, then you want to have it as <code>datetime64</code> dtype. That would also mean that you&#39;ll have <code>NaT</code> (Not a Time) instead of all values which couldn&#39;t be converted to dates and you will have default representation (the way it&#39;s shown on the screen): yyyy-mm-dd. You can convert it to string using whatever format you want, but you will lose flexibility and you you&#39;ll have to work with strings..."}, {"owner": {"reputation": 309, "user_id": 3981355, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/641886902/picture?type=large", "display_name": "Carlos Arronte Bello", "link": "https://stackoverflow.com/users/3981355/carlos-arronte-bello"}, "reply_to_user": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "edited": false, "score": 0, "creation_date": 1485988205, "post_id": 41990387, "comment_id": 71159236, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/134630/discussion-between-carlos-arronte-bello-and-maxu\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "is_accepted": true, "score": 2, "last_activity_date": 1485988822, "last_edit_date": 1485988822, "creation_date": 1485985575, "answer_id": 41990387, "question_id": 41990345, "link": "https://stackoverflow.com/questions/41990345/filtering-in-pandas-using-regex-expression/41990387#41990387", "title": "Filtering in pandas using regex expression", "body": "<p>RegEx is very powerful tool, but in this case there is a better approach:</p>\n\n<pre><code>In [180]: df\nOut[180]:\n        ID  ActualDate\n0   738564  01/21/2016\n1   274628  02/12/2016\n2   571749  03/30/2016\n3   718563  10/01/2016\n4   984739  11/30/2016\n5   938511  12/24/2016\n6   103216  07/16/2014\n7   446754  08/06/2015\n8   135654  02/01/2017\n9   135614  01/16/2017\n10  133346  01/16/2011\n11  234682         NaN\n12  238756      (none)\n</code></pre>\n\n<p>let's convert it <code>datetime</code> dtype:</p>\n\n<pre><code>In [181]: df['ActualDate'] = pd.to_datetime(df['ActualDate'], errors='coerce')\n\nIn [182]: df\nOut[182]:\n        ID ActualDate\n0   738564 2016-01-21\n1   274628 2016-02-12\n2   571749 2016-03-30\n3   718563 2016-10-01\n4   984739 2016-11-30\n5   938511 2016-12-24\n6   103216 2014-07-16\n7   446754 2015-08-06\n8   135654 2017-02-01\n9   135614 2017-01-16\n10  133346 2011-01-16\n11  234682        NaT\n12  238756        NaT\n</code></pre>\n\n<p>filtering using <a href=\"http://pandas.pydata.org/pandas-docs/stable/indexing.html#boolean-indexing\" rel=\"nofollow noreferrer\">boolean indexing</a>:</p>\n\n<pre><code>In [184]: df[(df['ActualDate'] &lt; '2016-11-01') | df['ActualDate'].isnull()]\nOut[184]:\n        ID ActualDate\n0   738564 2016-01-21\n1   274628 2016-02-12\n2   571749 2016-03-30\n3   718563 2016-10-01\n6   103216 2014-07-16\n7   446754 2015-08-06\n10  133346 2011-01-16\n11  234682        NaT\n12  238756        NaT\n</code></pre>\n\n<p>filtering using <a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.query.html\" rel=\"nofollow noreferrer\">.query()</a> method:</p>\n\n<pre><code>In [186]: df.query(\"ActualDate &lt; '2016-11-01' or ActualDate != ActualDate\")\nOut[186]:\n        ID ActualDate\n0   738564 2016-01-21\n1   274628 2016-02-12\n2   571749 2016-03-30\n3   718563 2016-10-01\n6   103216 2014-07-16\n7   446754 2015-08-06\n10  133346 2011-01-16\n11  234682        NaT\n12  238756        NaT\n</code></pre>\n\n<p><strong>UPDATE:</strong> if you want to preserve original <code>Date</code> in string dtype:</p>\n\n<pre><code>In [190]: df\nOut[190]:\n        ID Actual Date\n0   738564  01/21/2016\n1   274628  02/12/2016\n2   571749  03/30/2016\n3   718563  10/01/2016\n4   984739  11/30/2016\n5   938511  12/24/2016\n6   103216  07/16/2014\n7   446754  08/06/2015\n8   135654  02/01/2017\n9   135614  01/16/2017\n10  133346  01/16/2011\n11  234682         NaN\n12  238756      (none)\n</code></pre>\n\n<p>first add a new <code>datetime</code> column:</p>\n\n<pre><code>In [191]: df['Date'] = pd.to_datetime(df['Actual Date'], errors='coerce')\n\nIn [192]: df\nOut[192]:\n        ID Actual Date       Date\n0   738564  01/21/2016 2016-01-21\n1   274628  02/12/2016 2016-02-12\n2   571749  03/30/2016 2016-03-30\n3   718563  10/01/2016 2016-10-01\n4   984739  11/30/2016 2016-11-30\n5   938511  12/24/2016 2016-12-24\n6   103216  07/16/2014 2014-07-16\n7   446754  08/06/2015 2015-08-06\n8   135654  02/01/2017 2017-02-01\n9   135614  01/16/2017 2017-01-16\n10  133346  01/16/2011 2011-01-16\n11  234682         NaN        NaT\n12  238756      (none)        NaT\n</code></pre>\n\n<p>filtering:</p>\n\n<pre><code>In [194]: df.drop('Date', 1).loc[(df['Date'] &lt; '2016-11-01') | df['Date'].isnull()]\nOut[194]:\n        ID Actual Date\n0   738564  01/21/2016\n1   274628  02/12/2016\n2   571749  03/30/2016\n3   718563  10/01/2016\n6   103216  07/16/2014\n7   446754  08/06/2015\n10  133346  01/16/2011\n11  234682         NaN\n12  238756      (none)\n\n\nIn [196]: df.query(\"Date &lt; '2016-11-01' or Date != Date\").drop('Date', 1)\nOut[196]:\n        ID Actual Date\n0   738564  01/21/2016\n1   274628  02/12/2016\n2   571749  03/30/2016\n3   718563  10/01/2016\n6   103216  07/16/2014\n7   446754  08/06/2015\n10  133346  01/16/2011\n11  234682         NaN\n12  238756      (none)\n</code></pre>\n"}], "owner": {"reputation": 309, "user_id": 3981355, "user_type": "registered", "accept_rate": 69, "profile_image": "https://graph.facebook.com/641886902/picture?type=large", "display_name": "Carlos Arronte Bello", "link": "https://stackoverflow.com/users/3981355/carlos-arronte-bello"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 792, "favorite_count": 0, "accepted_answer_id": 41990387, "answer_count": 1, "score": 2, "last_activity_date": 1485988822, "creation_date": 1485985448, "last_edit_date": 1485987083, "question_id": 41990345, "link": "https://stackoverflow.com/questions/41990345/filtering-in-pandas-using-regex-expression", "title": "Filtering in pandas using regex expression", "body": "<p>I\u00b4m doing some work in excel using pandas and python. I have something like this. </p>\n\n<pre><code>  ID         Actual Date\n738564     01/21/2016\n274628     02/12/2016\n571749     03/30/2016\n718563     10/01/2016\n984739     11/30/2016\n938511     12/24/2016\n103216     07/16/2014\n446754     08/06/2015\n135654     02/01/2017\n135614     01/16/2017\n133346     01/16/2011\n234682        N/A\n238756       (none)\n</code></pre>\n\n<p>So i need to filter by date, but i just need to filter the year dates before november 2016( So i need to filter 2014, 2015, and between january and octuber of 2016 ). So basically after the filter i will have something like this </p>\n\n<pre><code>      ID       Actual Date\n   738564   01/21/2016\n   274628   02/12/2016\n   571749   03/30/2016\n   718563   10/01/2016\n   103216   07/16/2014\n   446754   08/06/2015\n   133346   01/16/2011\n   234682        N/A\n   238756       (none)\n</code></pre>\n\n<p>The code i\u00b4m using for this is:</p>\n\n<pre><code>    regex = r\"[0-9]{2}/[0-9]{2}/2016\"\ndf = pd.read_csv(\"Request.csv\", keep_default_na=False)\ndf1 = df.loc[(df[\"Actual Date\"].str.contains(r'[0-9]{2}/[0-9]{2}/2016') &amp;\n             (df[\"Actual Date\"].str.contains(\"2015\")) &amp; \n             (df[\"Actual Date\"].str.contains(\"2014\")) &amp;\n             (df[\"Actual Date\"].str.contains(\"2011\")) &amp;\n             (df[\"Actual Date\"].str.contains(\"(None)\")) &amp;\n             (df[\"Actual Date\"].str.contains(\"N/A\"))))]                 \n</code></pre>\n\n<p>But when i run the code, i receive just the 2011, 2014 and 2015. The regular expression it\u00b4s not working for the 2016 dates. \nI'll really appreciate the help, and sorry for the bad english </p>\n"}, {"tags": ["c#", "python"], "comments": [{"owner": {"reputation": 1465, "user_id": 4681732, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Xuool.jpg?s=128&g=1", "display_name": "nbryans", "link": "https://stackoverflow.com/users/4681732/nbryans"}, "edited": false, "score": 1, "creation_date": 1485985376, "post_id": 41990308, "comment_id": 71157854, "body": "See <a href=\"http://stackoverflow.com/questions/23129054/integration-of-python-in-c-sharp-application\">this thread</a>. The recommendation appears to be IronPython."}, {"owner": {"reputation": 639, "user_id": 1934056, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/73f3181d102938420268fb432f7a6f9f?s=128&d=identicon&r=PG", "display_name": "Joon w K", "link": "https://stackoverflow.com/users/1934056/joon-w-k"}, "reply_to_user": {"reputation": 1465, "user_id": 4681732, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Xuool.jpg?s=128&g=1", "display_name": "nbryans", "link": "https://stackoverflow.com/users/4681732/nbryans"}, "edited": false, "score": 1, "creation_date": 1486106455, "post_id": 41990308, "comment_id": 71211939, "body": "Thank you, nbryans. It also helped me a lot too."}], "answers": [{"tags": [], "owner": {"reputation": 2408, "user_id": 4451406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0d18767747a91ded9aa995def8e4ab1?s=128&d=identicon&r=PG", "display_name": "Irmen de Jong", "link": "https://stackoverflow.com/users/4451406/irmen-de-jong"}, "is_accepted": false, "score": 4, "last_activity_date": 1485987649, "creation_date": 1485987649, "answer_id": 41990921, "question_id": 41990308, "link": "https://stackoverflow.com/questions/41990308/how-to-integrate-python-library-in-c-project/41990921#41990921", "title": "How to integrate python library in c# project", "body": "<p>There's also <a href=\"https://github.com/pythonnet/pythonnet\" rel=\"nofollow noreferrer\">PythonNet</a> \nwhich has similar goals as IronPython but <a href=\"http://pythonnet.github.io/\" rel=\"nofollow noreferrer\">is a different solution</a>. </p>\n"}], "owner": {"reputation": 639, "user_id": 1934056, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/73f3181d102938420268fb432f7a6f9f?s=128&d=identicon&r=PG", "display_name": "Joon w K", "link": "https://stackoverflow.com/users/1934056/joon-w-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9503, "favorite_count": 3, "closed_date": 1550840535, "answer_count": 1, "score": 8, "last_activity_date": 1550838265, "creation_date": 1485985294, "last_edit_date": 1485997182, "question_id": 41990308, "link": "https://stackoverflow.com/questions/41990308/how-to-integrate-python-library-in-c-project", "closed_reason": "Duplicate", "title": "How to integrate python library in c# project", "body": "<p>I started working with machine learning and found that a lot of codes are available in public.</p>\n\n<p>Before I get involved deeply I would like to find out some way of incorporating Python codes into C # project.</p>\n\n<p>Can anyone help me out in this?</p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["python", "python-3.x", "numpy", "concatenation"], "comments": [{"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 0, "creation_date": 1485985291, "post_id": 41990289, "comment_id": 71157817, "body": "Try <code>np.column_stack</code>."}, {"owner": {"reputation": 69, "user_id": 6679951, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b6c63daa092095494c094d735d4dffc1?s=128&d=identicon&r=PG&f=1", "display_name": "Raghavendra MG", "link": "https://stackoverflow.com/users/6679951/raghavendra-mg"}, "reply_to_user": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 0, "creation_date": 1485985689, "post_id": 41990289, "comment_id": 71157994, "body": "now its separating each element to array([ 150.029997]) array([ 148.63714206]) array([ 149.48244044])]]"}, {"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 0, "creation_date": 1485985770, "post_id": 41990289, "comment_id": 71158034, "body": "Did you try : <code>np.column_stack((two_d_array,concat))</code>?"}, {"owner": {"reputation": 69, "user_id": 6679951, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b6c63daa092095494c094d735d4dffc1?s=128&d=identicon&r=PG&f=1", "display_name": "Raghavendra MG", "link": "https://stackoverflow.com/users/6679951/raghavendra-mg"}, "reply_to_user": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 0, "creation_date": 1485986333, "post_id": 41990289, "comment_id": 71158325, "body": "This works thanks a lot!"}], "answers": [{"tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": false, "score": 0, "last_activity_date": 1485987769, "last_edit_date": 1485987769, "creation_date": 1485987432, "answer_id": 41990869, "question_id": 41990289, "link": "https://stackoverflow.com/questions/41990289/adding-a-column-to-a-2d-list/41990869#41990869", "title": "Adding a column to a 2D list", "body": "<p>To do a copy-n-paste of your two arrays I had to a <code>[</code> at the start  The result is 2 2d arrays</p>\n\n<pre><code>In [165]: twod.shape\nOut[165]: (5, 2)\nIn [166]: oned.shape\nOut[166]: (5, 1)\n</code></pre>\n\n<p>A simple concatenate works</p>\n\n<pre><code>In [164]: np.concatenate((twod, oned),axis=1)\nOut[164]: \narray([[ 988.        ,  389.        ,  149.68299837],\n       [ 986.        ,  389.        ,  149.25481567],\n       [ 985.        ,  388.        ,  150.029997  ],\n       [ 977.        ,  388.        ,  148.63714206],\n       [ 976.        ,  387.        ,  149.48244044]])\n</code></pre>\n\n<p>Notice that everything is float now.</p>\n\n<p>Your list map calc produces a list like:</p>\n\n<pre><code>[[array([988, 389]), array([ 149.68299837])],\n [array([986, 389]), array([ 149.25481567])],\n [array([985, 388]), array([ 150.029997])],\n ....\n</code></pre>\n\n<p>Sublists containing 2 arrays of different length.  Substituting <code>hstack</code> for list would have produced a list that could be vstacked</p>\n\n<pre><code>In [173]: temp = list(map(np.hstack, zip(twod, oned.ravel())))\nIn [174]: temp\nOut[174]: \n[array([ 988.        ,  389.        ,  149.68299837]),\n array([ 986.        ,  389.        ,  149.25481567]),\n array([ 985.      ,  388.      ,  150.029997]),\n....\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1486, "user_id": 6828711, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/G2j21.png?s=128&g=1", "display_name": "NaN", "link": "https://stackoverflow.com/users/6828711/nan"}, "is_accepted": true, "score": 1, "last_activity_date": 1485988267, "creation_date": 1485988267, "answer_id": 41991058, "question_id": 41990289, "link": "https://stackoverflow.com/questions/41990289/adding-a-column-to-a-2d-list/41991058#41991058", "title": "Adding a column to a 2D list", "body": "<p>I like np.c_ and np.column_stack ( @Divakar suggestion ) since I care little about timing but I am more interested in how it visually 'looks' for understanding purposes... </p>\n\n<pre><code>&gt;&gt;&gt; a = np.arange(10).reshape(5, 2)\n&gt;&gt;&gt; b = np.arange(10,15)\n&gt;&gt;&gt; c = np.c_[a,b]\n&gt;&gt;&gt; a\narray([[0, 1],\n       [2, 3],\n       [4, 5],\n       [6, 7],\n       [8, 9]])\n&gt;&gt;&gt; b\narray([10, 11, 12, 13, 14])\n&gt;&gt;&gt; c\narray([[ 0,  1, 10],\n       [ 2,  3, 11],\n       [ 4,  5, 12],\n       [ 6,  7, 13],\n       [ 8,  9, 14]])\n&gt;&gt;&gt; np.column_stack((a,b))\narray([[ 0,  1, 10],\n       [ 2,  3, 11],\n       [ 4,  5, 12],\n       [ 6,  7, 13],\n       [ 8,  9, 14]])\n</code></pre>\n\n<p>array a and b are obvious.  I just have to remember to do np.c_ square brackets (np.c_[ stack these ] and of course, stack by columns makes sense to me as well.</p>\n"}], "owner": {"reputation": 69, "user_id": 6679951, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b6c63daa092095494c094d735d4dffc1?s=128&d=identicon&r=PG&f=1", "display_name": "Raghavendra MG", "link": "https://stackoverflow.com/users/6679951/raghavendra-mg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2585, "favorite_count": 0, "accepted_answer_id": 41991058, "answer_count": 2, "score": 0, "last_activity_date": 1485988267, "creation_date": 1485985242, "question_id": 41990289, "link": "https://stackoverflow.com/questions/41990289/adding-a-column-to-a-2d-list", "title": "Adding a column to a 2D list", "body": "<p>I have a 2D list of arrays like</p>\n\n<pre><code>  array( [ 988,  389],\n         [ 986,  389],\n         [ 985,  388],\n         [ 977,  388],\n         [ 976,  387]], dtype=int32)\n</code></pre>\n\n<p>and another list </p>\n\n<pre><code> array( [ 149.68299837],\n        [ 149.25481567],\n        [ 150.029997  ],\n        [ 148.63714206],\n        [ 149.48244044]])\n</code></pre>\n\n<p>I tried to concatenate these two lists using </p>\n\n<pre><code>  trail = list(map(list,zip(two_d_array,concat)))\n  trail = np.vstack(trail)\n</code></pre>\n\n<p>This gives me </p>\n\n<pre><code>  array([array([988, 389], dtype=int32), array([ 149.68299837])],\n        [array([986, 389], dtype=int32), array([ 149.25481567])],\n        [array([985, 388], dtype=int32), array([ 150.029997])],\n        [array([977, 388], dtype=int32), array([ 148.63714206])],\n        [array([976, 387], dtype=int32), array([ 149.48244044])]], dtype=object)\n</code></pre>\n\n<p>How do I remove all the array and dtype and just display the numbers  like</p>\n\n<pre><code>     [ 988,  389,149.68299837],\n     [ 986,  389,149.25481567],\n     [ 985,  388, 150.029997],\n     [ 977,  388,148.63714206],\n     [ 976,  387,149.48244044]\n</code></pre>\n"}, {"tags": ["python", "python-2.7", "numpy", "matplotlib", "scipy"], "comments": [{"owner": {"reputation": 5659, "user_id": 5952681, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cd1d7051c326321b5ebb368d725dfe02?s=128&d=identicon&r=PG", "display_name": "linusg", "link": "https://stackoverflow.com/users/5952681/linusg"}, "edited": false, "score": 1, "creation_date": 1485985414, "post_id": 41990276, "comment_id": 71157872, "body": "It&#39;s getting on my nerves. <a href=\"https://linusgroh.de/programming-issue-google-it\" rel=\"nofollow noreferrer\">linusgroh.de/programming-issue-google-it</a>"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1485985539, "post_id": 41990276, "comment_id": 71157919, "body": "For Windows it&#39;s a pain. <code>pip install wheel</code> (iirc) and then just download these libraries from <a href=\"http://www.lfd.uci.edu/~gohlke/pythonlibs/#numpy\" rel=\"nofollow noreferrer\">here</a>. Get <code>numpy</code> with MLK and download the extra libraries after that"}, {"owner": {"reputation": 1465, "user_id": 4681732, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Xuool.jpg?s=128&g=1", "display_name": "nbryans", "link": "https://stackoverflow.com/users/4681732/nbryans"}, "edited": false, "score": 0, "creation_date": 1485985665, "post_id": 41990276, "comment_id": 71157976, "body": "See <a href=\"http://stackoverflow.com/questions/28190534/windows-scipy-install-no-lapack-blas-resources-found\">this</a>, which I found by googling your issue."}, {"owner": {"reputation": 5659, "user_id": 5952681, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cd1d7051c326321b5ebb368d725dfe02?s=128&d=identicon&r=PG", "display_name": "linusg", "link": "https://stackoverflow.com/users/5952681/linusg"}, "edited": false, "score": 0, "creation_date": 1485985706, "post_id": 41990276, "comment_id": 71158002, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/28190534/windows-scipy-install-no-lapack-blas-resources-found\">Windows Scipy Install: No Lapack/Blas Resources Found</a>"}, {"owner": {"reputation": 5659, "user_id": 5952681, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cd1d7051c326321b5ebb368d725dfe02?s=128&d=identicon&r=PG", "display_name": "linusg", "link": "https://stackoverflow.com/users/5952681/linusg"}, "edited": false, "score": 0, "creation_date": 1485985850, "post_id": 41990276, "comment_id": 71158077, "body": "@upvoter there&#39;s zero efford in the question, and its a dup by the way. Why would one ever upvote this crap?"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "reply_to_user": {"reputation": 5659, "user_id": 5952681, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cd1d7051c326321b5ebb368d725dfe02?s=128&d=identicon&r=PG", "display_name": "linusg", "link": "https://stackoverflow.com/users/5952681/linusg"}, "edited": false, "score": 0, "creation_date": 1485985996, "post_id": 41990276, "comment_id": 71158157, "body": "@linusg As for your first message, I hear you :) But on Windows, the SciPy stack is actually pretty difficult to install. I have scanned your dupe and I don&#39;t see how it is better than the binaries"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "reply_to_user": {"reputation": 5659, "user_id": 5952681, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cd1d7051c326321b5ebb368d725dfe02?s=128&d=identicon&r=PG", "display_name": "linusg", "link": "https://stackoverflow.com/users/5952681/linusg"}, "edited": false, "score": 0, "creation_date": 1485986066, "post_id": 41990276, "comment_id": 71158188, "body": "@linusg I even use Enthought Canopy. It still fell apart for me."}, {"owner": {"reputation": 5659, "user_id": 5952681, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cd1d7051c326321b5ebb368d725dfe02?s=128&d=identicon&r=PG", "display_name": "linusg", "link": "https://stackoverflow.com/users/5952681/linusg"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1485986263, "post_id": 41990276, "comment_id": 71158288, "body": "@roganjosh - Totally agree. Im not a Windows User anymore (Linux is <i>much</i> better here), but I managed installing all the numpy/scypi stuff on Win by downloading the Binaries there too. The site is pretty useful :)"}, {"owner": {"reputation": 15, "user_id": 7209661, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XjrvO.jpg?s=128&g=1", "display_name": "Arif Khan", "link": "https://stackoverflow.com/users/7209661/arif-khan"}, "reply_to_user": {"reputation": 5659, "user_id": 5952681, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cd1d7051c326321b5ebb368d725dfe02?s=128&d=identicon&r=PG", "display_name": "linusg", "link": "https://stackoverflow.com/users/5952681/linusg"}, "edited": false, "score": 0, "creation_date": 1485986277, "post_id": 41990276, "comment_id": 71158300, "body": "@linusg if there were zero effort in doing so i would have done it myself no need for asking and by the way if you are not up for helping someone then don&#39;t even look at it :p and don&#39;t tire your fingers on writing the comment :p happy life bro ;)"}, {"owner": {"reputation": 5659, "user_id": 5952681, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cd1d7051c326321b5ebb368d725dfe02?s=128&d=identicon&r=PG", "display_name": "linusg", "link": "https://stackoverflow.com/users/5952681/linusg"}, "edited": false, "score": 0, "creation_date": 1485986485, "post_id": 41990276, "comment_id": 71158407, "body": "As one said in the comments, this could be solved by simpy looking the error up on Google. Where&#39;s the efford? I can&#39;t see any... And your comment is not helpful at all. I&#39;m here to help people, but not to answer questions asked before several times (and which can be solved by GOOGLEING)"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "reply_to_user": {"reputation": 5659, "user_id": 5952681, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cd1d7051c326321b5ebb368d725dfe02?s=128&d=identicon&r=PG", "display_name": "linusg", "link": "https://stackoverflow.com/users/5952681/linusg"}, "edited": false, "score": 0, "creation_date": 1485986698, "post_id": 41990276, "comment_id": 71158508, "body": "To OP: don&#39;t even bother trying to install via <code>pip</code>, you will find peace in using the binaries I linked :) @linusg it&#39;s not worth getting frustrated mate, this will always exist but don&#39;t let it reflect badly on you if you ever want to use your profile in recruitment"}, {"owner": {"reputation": 5659, "user_id": 5952681, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cd1d7051c326321b5ebb368d725dfe02?s=128&d=identicon&r=PG", "display_name": "linusg", "link": "https://stackoverflow.com/users/5952681/linusg"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 1, "creation_date": 1485986879, "post_id": 41990276, "comment_id": 71158604, "body": "@roganjosh - Kind words, thanks. However, this sort of question is around too much here in the last time. But right, don&#39;t get frustrated, go on with the serious questions :)"}, {"owner": {"reputation": 15, "user_id": 7209661, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XjrvO.jpg?s=128&g=1", "display_name": "Arif Khan", "link": "https://stackoverflow.com/users/7209661/arif-khan"}, "reply_to_user": {"reputation": 5659, "user_id": 5952681, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cd1d7051c326321b5ebb368d725dfe02?s=128&d=identicon&r=PG", "display_name": "linusg", "link": "https://stackoverflow.com/users/5952681/linusg"}, "edited": false, "score": 1, "creation_date": 1485987047, "post_id": 41990276, "comment_id": 71158691, "body": "@linusg peace bro beginners do this kinda stuff and i am a beginner so just chill you people are more experienced so thats why people post here to get some good answers and suggestion but any way thank you for your kind advice and thanks for the ans -roganjosh"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1485987588, "post_id": 41990276, "comment_id": 71158958, "body": "I&#39;ve fallen foul of this myself. It <i>is</i> frustrating for the same kind of questions to come up, but the solution is not always easy to find yourself when you first start out. Open a command prompt in the <code>downloads</code> directory (open it as normal in Windows, hold down <code>shift</code> and right click) and <code>pip install the_downloaded_file_name</code> here once you download the binary."}, {"owner": {"reputation": 15, "user_id": 7209661, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XjrvO.jpg?s=128&g=1", "display_name": "Arif Khan", "link": "https://stackoverflow.com/users/7209661/arif-khan"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1485989566, "post_id": 41990276, "comment_id": 71159779, "body": "Okay thanks for the help @roganjosh i really appreciate your help God bless you :)"}], "answers": [{"tags": [], "owner": {"reputation": 39, "user_id": 7416521, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/e2510cbaba3d9cd35455b96a7fa32de1?s=128&d=identicon&r=PG&f=1", "display_name": "theplaid", "link": "https://stackoverflow.com/users/7416521/theplaid"}, "is_accepted": false, "score": -1, "last_activity_date": 1485985757, "creation_date": 1485985757, "answer_id": 41990427, "question_id": 41990276, "link": "https://stackoverflow.com/questions/41990276/scipy-stack-installation-error/41990427#41990427", "title": "Scipy stack installation error", "body": "<p>I believe Scipy has some weird dependencies that need time and attention to configure properly. So it would be your best route to install the anaconda suite which has much more than scipy and numpy. </p>\n\n<p><a href=\"https://www.continuum.io/downloads#windows\" rel=\"nofollow noreferrer\">https://www.continuum.io/downloads#windows</a></p>\n"}], "owner": {"reputation": 15, "user_id": 7209661, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XjrvO.jpg?s=128&g=1", "display_name": "Arif Khan", "link": "https://stackoverflow.com/users/7209661/arif-khan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1485985757, "creation_date": 1485985199, "question_id": 41990276, "link": "https://stackoverflow.com/questions/41990276/scipy-stack-installation-error", "title": "Scipy stack installation error", "body": "<p>I am trying to install the Scipy stack on windows 8.1 numpy installs perfectly but after that the scipy gives the following error \n<a href=\"https://i.stack.imgur.com/N1CHH.png\" rel=\"nofollow noreferrer\">Error Pic</a></p>\n\n<p>Any help will be much appreciated</p>\n"}, {"tags": ["python", "python-3.x", "numpy", "matplotlib"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1485985184, "post_id": 41990230, "comment_id": 71157771, "body": "<code>eval</code> works on a <code>string</code>. Nevertheless it is not seen as very elegant anyway."}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1485985401, "post_id": 41990230, "comment_id": 71157862, "body": "<i>Time since big bang theory</i> is maximum 90000 seconds nowadays. <i>Time since big bang</i> may be considerably larger."}], "answers": [{"comments": [{"owner": {"reputation": 1971, "user_id": 473736, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/0a16ff00666c9171fa8c37580d1add39?s=128&d=identicon&r=PG", "display_name": "Wasswa Samuel", "link": "https://stackoverflow.com/users/473736/wasswa-samuel"}, "edited": false, "score": 0, "creation_date": 1485986321, "post_id": 41990355, "comment_id": 71158318, "body": "I realise that maybe time <code>t</code> being on the <code>y</code> axis makes more sense. How would you flip it such that time is on <code>y</code> axis and n is on the <code>x</code> axis."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 1971, "user_id": 473736, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/0a16ff00666c9171fa8c37580d1add39?s=128&d=identicon&r=PG", "display_name": "Wasswa Samuel", "link": "https://stackoverflow.com/users/473736/wasswa-samuel"}, "edited": false, "score": 1, "creation_date": 1485986391, "post_id": 41990355, "comment_id": 71158358, "body": "@WasswaSamuel: simply rename <code>x</code>, <code>y</code> and <code>y</code> <code>x</code> in the <b>assignment</b> in the function. Will edit the answer."}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 3, "last_activity_date": 1485986488, "last_edit_date": 1485986488, "creation_date": 1485985472, "answer_id": 41990355, "question_id": 41990230, "link": "https://stackoverflow.com/questions/41990230/plot-an-equation-with-matplotlib-and-numpy/41990355#41990355", "title": "Plot an equation with matplotlib and numpy", "body": "<p>There are several problems here:</p>\n\n<ul>\n<li>The range is supposed to be defined <strong>over integers</strong>;</li>\n<li>The number of items the range would generate <strong>is too large, you have to take huge steps</strong>;</li>\n<li>The formula takes <code>x</code> as a variable, but you seem to define a <code>np.array(x_range)</code> <strong>in <code>y</code></strong>; and more importantly</li>\n<li>you use <code>eval(..)</code>, but <code>eval(..)</code> <strong>usually a string</strong> or another object that can be <em>parsed</em>;</li>\n<li>you do not give <code>graph(..)</code> a formula as first element: before Python calls <code>graph(..)</code> it <strong>first evaluates the operands</strong>.</li>\n</ul>\n\n<p>In my opinion, the best way to achieve this is using a <em>lambda-expression</em>:</p>\n\n<pre><code>import matplotlib.pyplot as plt\nimport numpy as np\n\ndef graph(formula, x_range):  \n    <b>x = </b>np.array(x_range)\n    #^ use x as range variable\n    <b>y = </b>formula(<b>x</b>)\n    #^          ^call the lambda expression with x\n    #| use y as function result\n    plt.plot(x,y)  \n    plt.show() \n\ngraph(<b>lambda x : </b>((np.log(x)*10**6)/np.log(2)) + 1, range(0, <b>435*10**15,10**12</b>))\n#     ^use a lambda expression                               ^range over integers\n#                                                             take huge steps</code></pre>\n\n<p>This generates the following image:</p>\n\n<p><a href=\"https://i.stack.imgur.com/MOUPu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MOUPu.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>EDIT</strong>:</p>\n\n<p>based on your comment you want time on the <em>y</em>-axis and the function on the <em>x</em>-axis, this can simply be achieved by <strong>assigning</strong> to the other variables like:</p>\n\n<pre><code>import matplotlib.pyplot as plt\nimport numpy as np\n\ndef graph(formula, x_range):  \n    <b>y = </b>np.array(x_range)\n    <b>x = </b>formula(<b>y</b>)\n    plt.plot(x,y)  \n    plt.show() \n\ngraph(lambda x : ((np.log(x)*10**6)/np.log(2)) + 1, range(0,435*10**15,10**12))</code></pre>\n\n<p>Note that you do not need to change the name of the variable in the lambda-expression: indeed when you call the lambda expression, the <em>local</em> <code>x</code> will simply be the <code>y</code> of the caller.</p>\n"}], "owner": {"reputation": 1971, "user_id": 473736, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/0a16ff00666c9171fa8c37580d1add39?s=128&d=identicon&r=PG", "display_name": "Wasswa Samuel", "link": "https://stackoverflow.com/users/473736/wasswa-samuel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7661, "favorite_count": 0, "accepted_answer_id": 41990355, "answer_count": 1, "score": 1, "last_activity_date": 1485987766, "creation_date": 1485985004, "last_edit_date": 1485987766, "question_id": 41990230, "link": "https://stackoverflow.com/questions/41990230/plot-an-equation-with-matplotlib-and-numpy", "title": "Plot an equation with matplotlib and numpy", "body": "<p>I want to plot an equation where the <code>x</code> axis represents time <code>t</code> and the <code>y</code> axis represents a variable <code>n</code>.  Now the formula for <code>n</code> is <code>n =((np.log(t)*10**6)/np.log(2)) + 1</code> and the maximum time on my graph is the time since big bang theory in seconds which is <code>4.35 x 10**17 seconds</code>.</p>\n\n<p>I tried this:</p>\n\n<pre><code>import matplotlib.pyplot as plt\nimport numpy as np\n\ndef graph(formula, x_range):  \n    y = np.array(x_range)  \n    x = eval(formula)\n    plt.plot(x,y)  \n    plt.show() \n\ngraph(((np.log(x)*10**6)/np.log(2)) + 1, range(0, 4.35*10**17 ))\n</code></pre>\n\n<p>which doesn't seem to work. Any ideas on how I can achieve this?</p>\n"}, {"tags": ["python", "python-3.4", "python-import", "python-module"], "comments": [{"owner": {"reputation": 26765, "user_id": 281545, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/e9afcf11d81904cdb5677c13d249b6c5?s=128&d=identicon&r=PG", "display_name": "Mr_and_Mrs_D", "link": "https://stackoverflow.com/users/281545/mr-and-mrs-d"}, "edited": false, "score": 0, "creation_date": 1486058004, "post_id": 41990169, "comment_id": 71193772, "body": "Not using python 3 so can&#39;t help here - however summarize your questions it would help other answer. Maybe try <code>sys.path_hooks.insert(0, myFinder.path_hook(loader_details))</code> ? Questions remain"}], "answers": [{"tags": [], "owner": {"reputation": 51, "user_id": 1494961, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e391bd10f757232d5de489c49be52e58?s=128&d=identicon&r=PG", "display_name": "obriencj", "link": "https://stackoverflow.com/users/1494961/obriencj"}, "is_accepted": false, "score": 5, "last_activity_date": 1500385185, "creation_date": 1500385185, "answer_id": 45168493, "question_id": 41990169, "link": "https://stackoverflow.com/questions/41990169/how-to-use-sys-path-hooks-for-customized-loading-of-modules/45168493#45168493", "title": "How to use sys.path_hooks for customized loading of modules?", "body": "<p>The short answer is that the default PathFinder in <code>sys.meta_path</code> isn't meant to have new file extensions and importers added in the same paths it already supports. But there's still hope!</p>\n\n<p><strong>Quick Breakdown</strong></p>\n\n<p><code>sys.path_hooks</code> is consumed by the <code>importlib._bootstrap_external.PathFinder</code> class.</p>\n\n<p>When an import happens, each entry in <code>sys.meta_path</code> is asked to find a matching spec for the requested module. The PathFinder in particular will then take the contents of <code>sys.path</code> and pass it to the factory functions in <code>sys.path_hooks</code>. Each factory function has a chance to either raise an ImportError (basically the factory saying \"nope, I don't support this path entry\") or return a finder instance for that path. The first successfully returned finder is then cached in <code>sys.path_importer_cache</code>. From then on PathFinder will only ask those cached finder instances if they can provide the requested module. </p>\n\n<p>If you look at the contents of <code>sys.path_importer_cache</code>, you'll see all of the directory entries from <code>sys.path</code> have been mapped to FileFinder instances. Non-directory entries (zip files, etc) will be mapped to other finders.</p>\n\n<p>Thus, if you append a new factory created via <code>FileFinder.path_hook</code> to <code>sys.path_hooks</code>, your factory will only be invoked if the previous FileFinder hook didn't accept the path. This is unlikely, since FileFinder will work on any existing directory.</p>\n\n<p>Alternatively, if you insert your new factory to sys.path_hooks ahead of the existing factories, the default hook will only be used if your new factory doesn't accept the path. And again, since FileFinder is so liberal with what it will accept, this would lead to only your loader being used, as you've already observed.</p>\n\n<p><strong>Making it Work</strong></p>\n\n<p>So you can either try to adjust that existing factory to also support your file extension and importer (which is difficult as the importers and extension string tuples are held in a closure), or do what I ended up doing, which is add a new meta path finder.</p>\n\n<p>So eg. from my own project,</p>\n\n<pre><code>\nimport sys\n\nfrom importlib.abc import FileLoader\nfrom importlib.machinery import FileFinder, PathFinder\nfrom os import getcwd\nfrom os.path import basename\n\nfrom sibilant.module import prep_module, exec_module\n\n\nSOURCE_SUFFIXES = [\".lspy\", \".sibilant\"]\n\n\n_path_importer_cache = {}\n_path_hooks = []\n\n\nclass SibilantPathFinder(PathFinder):\n    \"\"\"\n    An overridden PathFinder which will hunt for sibilant files in\n    sys.path. Uses storage in this module to avoid conflicts with the\n    original PathFinder\n    \"\"\"\n\n\n    @classmethod\n    def invalidate_caches(cls):\n        for finder in _path_importer_cache.values():\n            if hasattr(finder, 'invalidate_caches'):\n                finder.invalidate_caches()\n\n\n    @classmethod\n    def _path_hooks(cls, path):\n        for hook in _path_hooks:\n            try:\n                return hook(path)\n            except ImportError:\n                continue\n        else:\n            return None\n\n\n    @classmethod\n    def _path_importer_cache(cls, path):\n        if path == '':\n            try:\n                path = getcwd()\n            except FileNotFoundError:\n                # Don't cache the failure as the cwd can easily change to\n                # a valid directory later on.\n                return None\n        try:\n            finder = _path_importer_cache[path]\n        except KeyError:\n            finder = cls._path_hooks(path)\n            _path_importer_cache[path] = finder\n        return finder\n\n\nclass SibilantSourceFileLoader(FileLoader):\n\n\n    def create_module(self, spec):\n        return None\n\n\n    def get_source(self, fullname):\n        return self.get_data(self.get_filename(fullname)).decode(\"utf8\")\n\n\n    def exec_module(self, module):\n        name = module.__name__\n        source = self.get_source(name)\n        filename = basename(self.get_filename(name))\n\n        prep_module(module)\n        exec_module(module, source, filename=filename)\n\n\ndef _get_lspy_file_loader():\n    return (SibilantSourceFileLoader, SOURCE_SUFFIXES)\n\n\ndef _get_lspy_path_hook():\n    return FileFinder.path_hook(_get_lspy_file_loader())\n\n\ndef _install():\n    done = False\n\n    def install():\n        nonlocal done\n        if not done:\n            _path_hooks.append(_get_lspy_path_hook())\n            sys.meta_path.append(SibilantPathFinder)\n            done = True\n\n    return install\n\n\n_install = _install()\n_install()\n\n</code></pre>\n\n<p>The SibilantPathFinder overrides PathFinder and replaces only those methods which reference <code>sys.path_hook</code> and <code>sys.path_importer_cache</code> with similar implementations which instead look in a <code>_path_hook</code> and <code>_path_importer_cache</code> which are local to this module.</p>\n\n<p>During import, the existing PathFinder will try to find a matching module. If it cannot, then my injected SibilantPathFinder will re-traverse the <code>sys.path</code> and try to find a match with one of my own file extensions.</p>\n\n<p><strong>Figuring More Out</strong></p>\n\n<p>I ended up delving into the source for the _bootstrap_external module\n<a href=\"https://github.com/python/cpython/blob/master/Lib/importlib/_bootstrap_external.py\" rel=\"noreferrer\">https://github.com/python/cpython/blob/master/Lib/importlib/_bootstrap_external.py</a></p>\n\n<p>The <code>_install</code> function and the <code>PathFinder.find_spec</code> method are the best starting points to seeing why things work the way they do.</p>\n"}, {"tags": [], "owner": {"reputation": 15415, "user_id": 982257, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/pRf2i.jpg?s=128&g=1", "display_name": "Iguananaut", "link": "https://stackoverflow.com/users/982257/iguananaut"}, "is_accepted": false, "score": 4, "last_activity_date": 1518032426, "creation_date": 1518032426, "answer_id": 48671982, "question_id": 41990169, "link": "https://stackoverflow.com/questions/41990169/how-to-use-sys-path-hooks-for-customized-loading-of-modules/48671982#48671982", "title": "How to use sys.path_hooks for customized loading of modules?", "body": "<p>@obriencj's analysis of the situation is correct.  But I came up with a different solution to this problem that doesn't require putting anything in <code>sys.meta_path</code>.  Instead, it installs a special hook in <code>sys.path_hooks</code> that acts almost as a sort of middle-ware between the <code>PathFinder</code> in <code>sys.meta_path</code>, and the hooks in <code>sys.path_hooks</code> where, rather than just using the first hook that says \"I can handle this path!\" it tries all matching hooks in order, until it finds one that actually returns a useful <code>ModuleSpec</code> from its <code>find_spec</code> method:</p>\n\n<pre><code>@PathEntryFinder.register\nclass MetaFileFinder:\n    \"\"\"\n    A 'middleware', if you will, between the PathFinder sys.meta_path hook,\n    and sys.path_hooks hooks--particularly FileFinder.\n\n    The hook returned by FileFinder.path_hook is rather 'promiscuous' in that\n    it will handle *any* directory.  So if one wants to insert another\n    FileFinder.path_hook into sys.path_hooks, that will totally take over\n    importing for any directory, and previous path hooks will be ignored.\n\n    This class provides its own sys.path_hooks hook as follows: If inserted\n    on sys.path_hooks (it should be inserted early so that it can supersede\n    anything else).  Its find_spec method then calls each hook on\n    sys.path_hooks after itself and, for each hook that can handle the given\n    sys.path entry, it calls the hook to create a finder, and calls that\n    finder's find_spec.  So each sys.path_hooks entry is tried until a spec is\n    found or all finders are exhausted.\n    \"\"\"\n\n    class hook:\n        \"\"\"\n        Use this little internal class rather than a function with a closure\n        or a classmethod or anything like that so that it's easier to\n        identify our hook and skip over it while processing sys.path_hooks.\n        \"\"\"\n\n        def __init__(self, basepath=None):\n            self.basepath = os.path.abspath(basepath)\n\n        def __call__(self, path):\n            if not os.path.isdir(path):\n                raise ImportError('only directories are supported', path=path)\n            elif not self.handles(path):\n                raise ImportError(\n                    'only directories under {} are supported'.format(\n                        self.basepath), path=path)\n\n            return MetaFileFinder(path)\n\n        def handles(self, path):\n            \"\"\"\n            Return whether this hook will handle the given path, depending on\n            what its basepath is.\n            \"\"\"\n\n            path = os.path.abspath(path)\n\n            return (self.basepath is None or\n                    os.path.commonpath([self.basepath, path]) == self.basepath)\n\n    def __init__(self, path):\n        self.path = path\n        self._finder_cache = {}\n\n    def __repr__(self):\n        return '{}({!r})'.format(self.__class__.__name__, self.path)\n\n    def find_spec(self, fullname, target=None):\n        if not sys.path_hooks:\n            return None\n\n        last = len(sys.path_hooks) - 1\n\n        for idx, hook in enumerate(sys.path_hooks):\n            if isinstance(hook, self.__class__.hook):\n                continue\n\n            finder = None\n            try:\n                if hook in self._finder_cache:\n                    finder = self._finder_cache[hook]\n                    if finder is None:\n                        # We've tried this finder before and got an ImportError\n                        continue\n            except TypeError:\n                # The hook is unhashable\n                pass\n\n            if finder is None:\n                try:\n                    finder = hook(self.path)\n                except ImportError:\n                    pass\n\n            try:\n                self._finder_cache[hook] = finder\n            except TypeError:\n                # The hook is unhashable for some reason so we don't bother\n                # caching it\n                pass\n\n            if finder is not None:\n                spec = finder.find_spec(fullname, target)\n                if (spec is not None and\n                        (spec.loader is not None or idx == last)):\n                    # If no __init__.&lt;suffix&gt; was found by any Finder,\n                    # we may be importing a namespace package (which\n                    # FileFinder.find_spec returns in this case).  But we\n                    # only want to return the namespace ModuleSpec if we've\n                    # exhausted every other finder first.\n                    return spec\n\n        # Module spec not found through any of the finders\n        return None\n\n    def invalidate_caches(self):\n        for finder in self._finder_cache.values():\n            finder.invalidate_caches()\n\n    @classmethod\n    def install(cls, basepath=None):\n        \"\"\"\n        Install the MetaFileFinder in the front sys.path_hooks, so that\n        it can support any existing sys.path_hooks and any that might\n        be appended later.\n\n        If given, only support paths under and including basepath.  In this\n        case it's not necessary to invalidate the entire\n        sys.path_importer_cache, but only any existing entries under basepath.\n        \"\"\"\n\n        if basepath is not None:\n            basepath = os.path.abspath(basepath)\n\n        hook = cls.hook(basepath)\n        sys.path_hooks.insert(0, hook)\n        if basepath is None:\n            sys.path_importer_cache.clear()\n        else:\n            for path in list(sys.path_importer_cache):\n                if hook.handles(path):\n                    del sys.path_importer_cache[path]\n</code></pre>\n\n<p>This is still, depressing, far more complication than should be necessary.  I feel like on Python 2, before the import system rewrite, it was much simpler to do this since less of the support for the built-in module types (<code>.py</code>, etc.) was built on top of the import hooks themselves, so it was harder to break importing normal modules by adding hooks to import new modules types. I'm going to start a discussion on python-ideas to see if there's any way we can't improve this situation.</p>\n"}], "owner": {"reputation": 1038, "user_id": 2803777, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5d1d559e0e8bb8cd62a8d1eea07edc57?s=128&d=identicon&r=PG&f=1", "display_name": "MichaelW", "link": "https://stackoverflow.com/users/2803777/michaelw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3530, "favorite_count": 4, "answer_count": 2, "score": 6, "last_activity_date": 1518032426, "creation_date": 1485984794, "last_edit_date": 1495541349, "question_id": 41990169, "link": "https://stackoverflow.com/questions/41990169/how-to-use-sys-path-hooks-for-customized-loading-of-modules", "title": "How to use sys.path_hooks for customized loading of modules?", "body": "<p>I hope the following question is not too long. But otherwise I cannot explain by problem and what I want:</p>\n\n<p>Learned from <a href=\"https://stackoverflow.com/questions/41941079/how-to-use-importlib-to-import-modules-from-arbitrary-sources\">How to use importlib to import modules from arbitrary sources?</a> (my question of yesterday)\nI have written a specfic loader for a new file type (.xxx).\n(In fact the xxx is an encrypted version of a pyc to protect code from being stolen).</p>\n\n<p>I would like just to <strong>add</strong> an import hook for the new file type \"xxx\" without affecting the other types (.py, .pyc, .pyd) in any way.</p>\n\n<p>Now, the loader is <code>ModuleLoader</code>, inheriting from <code>mportlib.machinery.SourcelessFileLoader</code>.</p>\n\n<p>Using <code>sys.path_hooks</code> the loader shall be added as a hook:</p>\n\n<pre><code>myFinder = importlib.machinery.FileFinder\nloader_details = (ModuleLoader, ['.xxx'])\nsys.path_hooks.append(myFinder.path_hook(loader_details))\n</code></pre>\n\n<p>Note: This is activated once by calling <code>modloader.activateLoader()</code></p>\n\n<p>Upon loading a module named <code>test</code> (which is a <code>test.xxx</code>) I get:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>&gt;&gt;&gt; import modloader\n&gt;&gt;&gt; modloader.activateLoader()\n&gt;&gt;&gt; import test\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nImportError: No module named 'test'\n&gt;&gt;&gt;\n</code></pre>\n\n<p>However, when I delete content of <code>sys.path_hooks</code> before adding the hook:</p>\n\n<pre><code>sys.path_hooks = []\nsys.path.insert(0, '.') # current directory\nsys.path_hooks.append(myFinder.path_hook(loader_details))\n</code></pre>\n\n<p>it works:</p>\n\n<pre><code>&gt;&gt;&gt; modloader.activateLoader()\n&gt;&gt;&gt; import test\nusing xxx class\n\nin xxxLoader exec_module\nin xxxLoader get_code: .\\test.xxx\nANALYZING ...\n\nGENERATE CODE OBJECT ...\n\n  2           0 LOAD_CONST               0\n              3 LOAD_CONST               1 ('foo2')\n              6 MAKE_FUNCTION            0\n              9 STORE_NAME               0 (foo2)\n             12 LOAD_CONST               2 (None)\n             15 RETURN_VALUE\n&gt;&gt;&gt;&gt;&gt;&gt; test\n&lt;module 'test' from '.\\\\test.xxx'&gt;\n</code></pre>\n\n<p>The module is imported correctly after conversion of the files content to a code object.</p>\n\n<p><strong>However I cannot load the same module from a package:</strong> <code>import pack.test</code></p>\n\n<p>Note: <code>__init__.py</code> is of course as an empty file in pack directory.</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>&gt;&gt;&gt; import pack.test\nTraceback (most recent call last):\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 2218, in _find_and_load_unlocked\nAttributeError: 'module' object has no attribute '__path__'\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nImportError: No module named 'pack.test'; 'pack' is not a package\n&gt;&gt;&gt;\n</code></pre>\n\n<p>Not enough, I cannot load plain *.py modules from that package anymore: I get the same error as above:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>&gt;&gt;&gt; import pack.testpy\nTraceback (most recent call last):\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 2218, in _find_and_load_unlocked\nAttributeError: 'module' object has no attribute '__path__'\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nImportError: No module named 'pack.testpy'; 'pack' is not a package\n&gt;&gt;&gt;\n</code></pre>\n\n<p>For my understanding <code>sys.path_hooks</code> is traversed until the last entry is tried. So why is the first variant (without deleting <code>sys.path_hooks</code>) not recognizing the new extension \"xxx\" and the second variant (deleting <code>sys.path_hooks</code>) do?\nIt looks like the machinery is throwing an exception rather than traversing further to the next entry, when an entry of <code>sys.path_hooks</code> is not able to recognize \"xxx\".</p>\n\n<p>And why is the second version <strong>working</strong> for py, pyc and xxx modules in the current directory, <strong>but not working</strong> in the package <code>pack</code>? I would expect that py and pyc is not even working in the current dir, because <code>sys.path_hooks</code> contains only a hook for \"xxx\"...</p>\n"}, {"tags": ["python", "signals", "keyboardinterrupt"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1485984919, "post_id": 41990084, "comment_id": 71157656, "body": "Check if the optimizer you&#39;re using takes parameters to control this. I know <code>scipy.optimize.minimize</code> does."}, {"owner": {"reputation": 1899, "user_id": 350317, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1854db99476e988bc9840a5119b7e593?s=128&d=identicon&r=PG", "display_name": "gilesc", "link": "https://stackoverflow.com/users/350317/gilesc"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1485985135, "post_id": 41990084, "comment_id": 71157756, "body": "Thanks. Yes, they almost always do. Usually there are <code>max_iterations</code> and <code>tolerance</code> parameters. But that only works ahead of time, not manually. For the purposes of this question, I&#39;m talking about functions that I write, because it would be difficult and impractical to modify third-party functions in such a way."}, {"owner": {"reputation": 32227, "user_id": 2337736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77aacbcecad375ad6d8c45cfe43afbc5?s=128&d=identicon&r=PG", "display_name": "Peter DeGlopper", "link": "https://stackoverflow.com/users/2337736/peter-deglopper"}, "edited": false, "score": 4, "creation_date": 1485985208, "post_id": 41990084, "comment_id": 71157776, "body": "I think I would do this by catching <code>KeyboardInterrupt</code> and planning to hit control-C twice if I really wanted to interrupt the whole thing after aborting the loop. But I wouldn&#39;t be shocked if there&#39;s a better way."}, {"owner": {"reputation": 641, "user_id": 4075936, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-yC_fhoQdrMI/AAAAAAAAAAI/AAAAAAAAAGE/jkwCnqcUZf0/photo.jpg?sz=128", "display_name": "asimoneau", "link": "https://stackoverflow.com/users/4075936/asimoneau"}, "edited": false, "score": 0, "creation_date": 1485988302, "post_id": 41990084, "comment_id": 71159280, "body": "You could have your break condition on the compute time instead of the precision of the answer"}], "owner": {"reputation": 1899, "user_id": 350317, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1854db99476e988bc9840a5119b7e593?s=128&d=identicon&r=PG", "display_name": "gilesc", "link": "https://stackoverflow.com/users/350317/gilesc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1485989434, "creation_date": 1485984484, "last_edit_date": 1485989434, "question_id": 41990084, "link": "https://stackoverflow.com/questions/41990084/manually-terminating-iterative-convergent-loop", "title": "Manually terminating iterative/convergent loop?", "body": "<p>I do a lot of data analysis in Python. There are a lot of algorithms out there that are set up in such a way that they gradually approximate a good output to a question, and break when a maximum number of iterations or a tolerance parameter is reached. (<em>pseudocode</em>)</p>\n\n<pre><code>def fn(X):\n    answer = initial_guess(X)\n    for i in range(max_iterations):\n       answer = refine_answer(X, answer)\n       if is_good_enough(answer):\n          break\n    return answer\n</code></pre>\n\n<p>If I have a lot of time on my hands, I just wait until the function is done. But for interactive analysis, this can be quite annoying and suboptimal because most of the improvement comes on the first few iterations with diminishing returns from there. We are talking about 15 minutes+ algorithms here for total convergence.</p>\n\n<p>So what I am looking for is a good way to be able to, optionally, manually interrupt such a loop prematurely without borking my interpreter and then returning the current best result so that I can continue with my analysis.</p>\n\n<p>I think I may be able to do this by catching a <code>KeyboardInterrupt</code>, or maybe more vaguely, by catching some other signal so that I can still use Ctrl+C if that is what I actually want. Is there a standard or good way to do this?</p>\n"}, {"tags": ["python", "bash", "jupyter-notebook"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1485984536, "post_id": 41990072, "comment_id": 71157483, "body": "Maybe you are looking for something in <a href=\"https://docs.python.org/3.5/library/subprocess.html\" rel=\"nofollow noreferrer\">here</a>?"}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1485985395, "post_id": 41990072, "comment_id": 71157858, "body": "<code>${2}</code> gives you absolutely no advantage in correctness over <code>$2</code>, unless you&#39;re performing string concatenation, whereas <code>&quot;$2&quot;</code> would actually ensure that your second argument is passed as a single string, rather than being potentially split or globbed into multiple arguments or passed as no arguments at all (if it contains no characters that aren&#39;t in IFS)."}], "answers": [{"comments": [{"owner": {"reputation": 2381, "user_id": 7428659, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9Jg2f.jpg?s=128&g=1", "display_name": "Miladiouss", "link": "https://stackoverflow.com/users/7428659/miladiouss"}, "edited": false, "score": 0, "creation_date": 1485985793, "post_id": 41990197, "comment_id": 71158047, "body": "Hah! It worked! Thanks a lot! My code is now 75% shorter. I knew about this package, but I didn&#39;t know you could use it like this."}], "tags": [], "owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "is_accepted": true, "score": 0, "last_activity_date": 1485985226, "last_edit_date": 1485985226, "creation_date": 1485984880, "answer_id": 41990197, "question_id": 41990072, "link": "https://stackoverflow.com/questions/41990072/how-to-execute-a-bash-script-from-a-python-string-in-jupyter-notebook/41990197#41990197", "title": "How to execute a bash script from a Python string in Jupyter Notebook?", "body": "<p>The <a href=\"https://docs.python.org/2/library/subprocess.html\" rel=\"nofollow noreferrer\"><code>subprocess</code> module</a> is the Right Thing for invoking external software -- in a shell or otherwise -- from Python.</p>\n\n<pre><code>import subprocess\n\nfolder_dir=\"/\" # your directory\nnames=[\"name_one\", \"name_two\"]   # this is your list of names you want to open\n\nsubprocess.check_call(\n    ['cd \"$1\" || exit; shift; exec ds9 \"$@\"', \"_\", folder_dir] + names,\n    shell=True)\n</code></pre>\n\n<hr>\n\n<h3>How it works (Python)</h3>\n\n<p>When passing a Python list with <code>shell=True</code>, the first item in that list is the script to run; the second is the value of <code>$0</code> when that script is running, and subsequent items are values for <code>$1</code> and onward.</p>\n\n<p>Note that this runs <code>sh -c '...'</code> with your command. <code>sh</code> is not bash, but (in modern systems) a POSIX sh interpreter. It's thus important not to use bash-only syntax in this context.</p>\n\n<h3>How it works (Shell)</h3>\n\n<p>Let's go over this line-by-line:</p>\n\n<pre><code>cd \"$1\" || exit # try to cd to the directory passed as $1; abort if that fails\nshift           # remove $1 from our argument list; the old $2 is now $1, &amp;c.\nexec ds9 \"$@\"   # replace the shell in memory with the \"ds9\" program (as an efficiency\n                # ...measure), with our argument list appended to it.\n</code></pre>\n\n<p>Note that <code>\"$1\"</code> and <code>\"$@\"</code> are quoted. Any unquoted expansion will be string-split and glob-expanded; without this change, you won't be able to open files with spaces in their names.</p>\n"}], "owner": {"reputation": 2381, "user_id": 7428659, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9Jg2f.jpg?s=128&g=1", "display_name": "Miladiouss", "link": "https://stackoverflow.com/users/7428659/miladiouss"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5924, "favorite_count": 0, "accepted_answer_id": 41990197, "answer_count": 1, "score": 3, "last_activity_date": 1485985226, "creation_date": 1485984435, "question_id": 41990072, "link": "https://stackoverflow.com/questions/41990072/how-to-execute-a-bash-script-from-a-python-string-in-jupyter-notebook", "title": "How to execute a bash script from a Python string in Jupyter Notebook?", "body": "<p>I am using Jupyter Notebook and would like to execute a bash script from a python string. I have a python cell creating the bash script which then I need to print, copy to another cell, and then run it. Is it possible to use something like <code>exec('print('hello world!')')</code>?</p>\n\n<p>Here is an example of my bash script:</p>\n\n<pre><code>%%bash -s \"$folder_dir\" \"$name_0\" \"$name_1\" \"$name_2\" \"$name_3\" \"$name_4\" \"$name_5\" \"$name_6\" \"$name_7\" \"$name_8\" \"$name_9\" \"$name_10\" \"$name_11\"\n\ncd $1\n\nds9 ${2} ${3} ${4} ${5} ${6} ${7} ${8} ${9} ${10} ${11} ${12} ${13}\n</code></pre>\n\n<p>If not possible, then how can I go to a different directory, and run</p>\n\n<pre><code>ds9 dir1 dir2 dir3 ...\n</code></pre>\n\n<p>within my Jupyter Notebook since I only can initialize dir's using python. Note that the number of dir's is not fixed every time I run my code. <code>ds9</code> is just a command to open multiple astronomical images at the same time.</p>\n\n<p>I know I can save my bash script to a .sh file and execute that, but I am looking for a classier solution.  </p>\n"}, {"tags": ["python", "arrays", "filtering", "masking"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 7502840, "user_type": "registered", "profile_image": "https://graph.facebook.com/10158129310510392/picture?type=large", "display_name": "Rane Alexander Simpson", "link": "https://stackoverflow.com/users/7502840/rane-alexander-simpson"}, "edited": false, "score": 0, "creation_date": 1486070474, "post_id": 41990088, "comment_id": 71200481, "body": "This seems to be exactly what I want, but I need to be able to mask this array and apply that mask to another array, and then eventually compress them both. Know any way to mask this? I&#39;ve tried masked_where and attempted to use the type as a flag, and I&#39;ve tried masked_value to specify the &#39;-&#39; but none seem to work."}, {"owner": {"reputation": 13, "user_id": 7502840, "user_type": "registered", "profile_image": "https://graph.facebook.com/10158129310510392/picture?type=large", "display_name": "Rane Alexander Simpson", "link": "https://stackoverflow.com/users/7502840/rane-alexander-simpson"}, "edited": false, "score": 1, "creation_date": 1486070829, "post_id": 41990088, "comment_id": 71200699, "body": "Wait I got it! I just changed the &#39;-&#39; to float(&#39;nan&#39;) and used masked_invalid. Thanks!"}], "tags": [], "owner": {"reputation": 1465, "user_id": 4681732, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Xuool.jpg?s=128&g=1", "display_name": "nbryans", "link": "https://stackoverflow.com/users/4681732/nbryans"}, "is_accepted": true, "score": 0, "last_activity_date": 1485984837, "last_edit_date": 1485984837, "creation_date": 1485984505, "answer_id": 41990088, "question_id": 41990066, "link": "https://stackoverflow.com/questions/41990066/how-do-i-mask-an-arrays-elements-that-arent-present-in-a-second-array-in-python/41990088#41990088", "title": "How do I mask an arrays elements that aren&#39;t present in a second array in Python?", "body": "<p>This approach using list comprehension doesn't rely on any numpy constructs. It keeps the number if it's in <code>y</code>, and puts a <code>-</code> in if it's not</p>\n\n<pre><code>x = [i if i in y else '-' for i in range(10)]\n</code></pre>\n\n<p>output</p>\n\n<pre><code>['-', '-', '-', 3, '-', '-', 6, '-', 8, '-']\n</code></pre>\n\n<p>Change the '-' if you want to change the default for the mask.</p>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 7502840, "user_type": "registered", "profile_image": "https://graph.facebook.com/10158129310510392/picture?type=large", "display_name": "Rane Alexander Simpson", "link": "https://stackoverflow.com/users/7502840/rane-alexander-simpson"}, "edited": false, "score": 0, "creation_date": 1486069738, "post_id": 41990394, "comment_id": 71200110, "body": "This is useful, but I need the masked array as an output because I then need to apply that mask to another array. Unless you know a way to produce an array that only keeps the elements corresponding to the indexes from the array intersection?"}], "tags": [], "owner": {"reputation": 156, "user_id": 7346898, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f872d913f13298cab771c88aba1d3b04?s=128&d=identicon&r=PG", "display_name": "Don Charlie", "link": "https://stackoverflow.com/users/7346898/don-charlie"}, "is_accepted": false, "score": 0, "last_activity_date": 1485985921, "last_edit_date": 1485985921, "creation_date": 1485985600, "answer_id": 41990394, "question_id": 41990066, "link": "https://stackoverflow.com/questions/41990066/how-do-i-mask-an-arrays-elements-that-arent-present-in-a-second-array-in-python/41990394#41990394", "title": "How do I mask an arrays elements that aren&#39;t present in a second array in Python?", "body": "<p>You can use set.intersection to get the matching numbers, it will return you the values that match, and it is done without looping:</p>\n\n<pre><code>x = range(10)\ny = [3,6,8]\ns1 = set(x)\ns2 = set(y)\ns1.intersection(s2)\n\n(Output:) set([8, 3, 6])\n\nx = [1,2,3,4,5]\ny = [2,3,6,7,8]\ns1 = set(x)\ns2 = set(y)\ns1.intersection(s2)\n\n(Output:) set([2, 3])\n</code></pre>\n\n<p>You can get a list by casting the set:</p>\n\n<pre><code>y = list(s1.intersection(s2))\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 7502840, "user_type": "registered", "profile_image": "https://graph.facebook.com/10158129310510392/picture?type=large", "display_name": "Rane Alexander Simpson", "link": "https://stackoverflow.com/users/7502840/rane-alexander-simpson"}, "edited": false, "score": 0, "creation_date": 1486069791, "post_id": 41990404, "comment_id": 71200139, "body": "This is definitely a good backup. Ideally I wouldn&#39;t loop at all, but this is likely what I&#39;ll have to do. Thanks!"}], "tags": [], "owner": {"reputation": 641, "user_id": 4075936, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-yC_fhoQdrMI/AAAAAAAAAAI/AAAAAAAAAGE/jkwCnqcUZf0/photo.jpg?sz=128", "display_name": "asimoneau", "link": "https://stackoverflow.com/users/4075936/asimoneau"}, "is_accepted": false, "score": 0, "last_activity_date": 1485985629, "creation_date": 1485985629, "answer_id": 41990404, "question_id": 41990066, "link": "https://stackoverflow.com/questions/41990066/how-do-i-mask-an-arrays-elements-that-arent-present-in-a-second-array-in-python/41990404#41990404", "title": "How do I mask an arrays elements that aren&#39;t present in a second array in Python?", "body": "<p>You could use <code>numpy</code> to do the loops for you, therefore accelerating the calculations.</p>\n\n<pre><code>x = np.arange(10)\ny = np.array([3,6,8])\n\nmask = np.all( x!=y[:,None], 0 )\nx = np.ma.masked_where(mask,x)\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 7502840, "user_type": "registered", "profile_image": "https://graph.facebook.com/10158129310510392/picture?type=large", "display_name": "Rane Alexander Simpson", "link": "https://stackoverflow.com/users/7502840/rane-alexander-simpson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 41990088, "answer_count": 3, "score": 1, "last_activity_date": 1485985921, "creation_date": 1485984396, "question_id": 41990066, "link": "https://stackoverflow.com/questions/41990066/how-do-i-mask-an-arrays-elements-that-arent-present-in-a-second-array-in-python", "title": "How do I mask an arrays elements that aren&#39;t present in a second array in Python?", "body": "<p>This is what I currently have:</p>\n\n<pre><code>x = range(10)\nx2 = array(x)\ny = [3,6,8]\n\nfor i in range(len(x)):\n     x2[i] = x2[i] in y\n\nx = ma.masked_where(x2 == False, x)\n</code></pre>\n\n<p>This gets me what I want, but I want to do so without looping.\nAny way to mask the array x where the values aren't present in y?</p>\n"}, {"tags": ["python", "excel", "openpyxl"], "comments": [{"owner": {"reputation": 9, "user_id": 7502803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e689b7aec08121a019119b46371efe51?s=128&d=identicon&r=PG&f=1", "display_name": "Sharkbite", "link": "https://stackoverflow.com/users/7502803/sharkbite"}, "edited": false, "score": 1, "creation_date": 1486045976, "post_id": 41990042, "comment_id": 71185732, "body": "I see a couple of downvotes but no comment as to why. Please let me know so I can correct whatever caused it. Thx."}], "answers": [{"tags": [], "owner": {"reputation": 13209, "user_id": 7414759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b272ce66c7c245c6cbe9a830691daddc?s=128&d=identicon&r=PG&f=1", "display_name": "stovfl", "link": "https://stackoverflow.com/users/7414759/stovfl"}, "is_accepted": false, "score": 0, "last_activity_date": 1486125032, "creation_date": 1486125032, "answer_id": 42024394, "question_id": 41990042, "link": "https://stackoverflow.com/questions/41990042/reading-cell-value-with-applied-number-format-openpyxl-redux/42024394#42024394", "title": "Reading cell value with applied number format openpyxl? - redux", "body": "<p>It's not implemented.\nWhat you are looking for is cell.number_format.\nTry the following:</p>\n\n<pre><code>def pyDateFormat(nf):\n  import re\n  \"\"\"Convert xlsx cell.number_format to Python date Format.\"\"\"\n  #xlsx Format   = 'YYYYMMDD', 'YYYY\\\\-MM\\\\-DD'\n  #Python Format = '%Y%m%d'\n  nf = re.sub(r'\\\\',r'',nf,0,re.IGNORECASE) #Remove Escapes\n  nf = re.sub(r'([^Y]*)(Y+)(.*)',r'\\1%Y\\3',nf,0,re.IGNORECASE) #Change YYYY to %Y\n  nf = re.sub(r'([^M]*)(M+)(.*)',r'\\1%m\\3',nf,0,re.IGNORECASE) #Change MM to %m\n  nf = re.sub(r'([^D]*)(D+)(.*)',r'\\1%d\\3',nf,0,re.IGNORECASE) #Change DD to %d\n  return nf\n#end def pyDateFormat\n</code></pre>\n\n<p>At the point you need the formated cell.value do:</p>\n\n<pre><code>  cell = wb.ws['A1']\n  if cell.is_date:\n    value = cell.value.date().__format__( pyDateFormat(cell.number_format) )\n</code></pre>\n\n<p><strong><em>Tested with Python: 3.4.2 - openpyxl: 2.4.1 - LibreOffice: 4.3.3.2</em></strong></p>\n"}], "owner": {"reputation": 9, "user_id": 7502803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e689b7aec08121a019119b46371efe51?s=128&d=identicon&r=PG&f=1", "display_name": "Sharkbite", "link": "https://stackoverflow.com/users/7502803/sharkbite"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 906, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1486125032, "creation_date": 1485984328, "last_edit_date": 1495542260, "question_id": 41990042, "link": "https://stackoverflow.com/questions/41990042/reading-cell-value-with-applied-number-format-openpyxl-redux", "title": "Reading cell value with applied number format openpyxl? - redux", "body": "<p>Python 2.7, openpyxl 2.4.x</p>\n\n<p>I'm trying to read a cell that is a date value (\"05/01/2016\") in excel and has custom number formatting applied (\"yyyymm\") so it displays as \"201605\". What I want to end up with is the value after the custom number formatting is applied (i.e. what the user sees in excel (\"201605\")). Any idea how to do this using openpyxl? </p>\n\n<p>Note: I can't just simply take the date and reformat it to yyyymm as the user might change the custom formatting and I need whatever the end result is after the custom format is applied. So maybe there's a way in openpyxl to apply the custom formatting in cells that are read?</p>\n\n<p>I realize this is very similar to this post (<a href=\"https://stackoverflow.com/questions/32675739/reading-cell-value-with-applied-number-format?newreg=805f7ed6aeeb40a7bb395f5da964fe27\">similar question</a>) but I wasn't quite sure how to apply it in my circumstance</p>\n\n<p>Thanks in advance for the help.</p>\n"}, {"tags": ["python", "arrays", "numpy"], "answers": [{"tags": [], "owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "is_accepted": true, "score": 8, "last_activity_date": 1485984641, "creation_date": 1485984641, "answer_id": 41990131, "question_id": 41990028, "link": "https://stackoverflow.com/questions/41990028/add-multiple-values-to-one-numpy-array-index/41990131#41990131", "title": "Add multiple values to one numpy array index", "body": "<p>This is what the <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.ufunc.at.html\" rel=\"noreferrer\"><code>at</code></a> method of NumPy ufuncs is for:</p>\n\n<pre><code>output = numpy.zeros(size)\nnumpy.add.at(output, a[a.cond].ix, a[a.cond].val)\n</code></pre>\n"}], "owner": {"reputation": 135, "user_id": 2817845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d64615421735986b9cf32d90d8eab94c?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/2817845/matt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1823, "favorite_count": 2, "accepted_answer_id": 41990131, "answer_count": 1, "score": 6, "last_activity_date": 1485984641, "creation_date": 1485984301, "question_id": 41990028, "link": "https://stackoverflow.com/questions/41990028/add-multiple-values-to-one-numpy-array-index", "title": "Add multiple values to one numpy array index", "body": "<p><strong>Simple Version:</strong>\nif I do this:</p>\n\n<pre><code>import numpy as np\na = np.zeros(2)\na[[1, 1]] += np.array([1, 1])\n</code></pre>\n\n<p>I get <code>[0, 1]</code> as an output. but I would like <code>[0, 2]</code>. Is that possible somehow, using implicit numpy looping instead of looping over it myself?</p>\n\n<p><strong>What-I-actually-need-to-do version:</strong></p>\n\n<p>I have a structured array that contains an index, a value, and some boolean value. I would like to sum those values at those indices, based on the boolean. Clearly that can be done with a simple loop, but it seems like it should be possible with clever numpy indexing (as above). </p>\n\n<p>For example, I have an array with 5 elements that I want to populate from the array with values, indices, and conditions:</p>\n\n<pre><code>import numpy as np\nsize = 5\nnvalues = 10\nnp.random.seed(1)\na = np.zeros(nvalues, dtype=[('val', float), ('ix', int), ('cond', bool)])\na = np.rec.array(a)\na.val = np.random.rand(nvalues)\na.cond = (np.random.rand(nvalues) &gt; 0.3)\na.ix = np.random.randint(size, size=nvalues)\n\n# obvious solution\nobvssum = np.zeros(size)\nfor i in a:\n    if i.cond:\n        obvssum[i.ix] += i.val\n\n# is something this possible?\ndoesntwork = np.zeros(size)\ndoesntwork[a[a.cond].ix] += a[a.cond].val\n\nprint(doesntwork)\nprint(obvssum)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>[ 0.          0.          0.61927097  0.02592623  0.29965467]\n[ 0.          0.          1.05459336  0.02592623  1.27063303]\n</code></pre>\n\n<p>I think what's happening here is if <code>a[a.cond].ix</code> were guaranteed to be unique, my method would work just fine, as noted in the simple example.</p>\n"}, {"tags": ["python", "azure", "pyodbc"], "comments": [{"owner": {"reputation": 8687, "user_id": 325117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f0766debb859466aed4b305cc915d8e?s=128&d=identicon&r=PG", "display_name": "Martin Broadhurst", "link": "https://stackoverflow.com/users/325117/martin-broadhurst"}, "edited": false, "score": 0, "creation_date": 1485984361, "post_id": 41990019, "comment_id": 71157385, "body": "What is the exception message?"}, {"owner": {"reputation": 345, "user_id": 3364161, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/99d7b98c94aff787844f4e1bb9da8059?s=128&d=identicon&r=PG&f=1", "display_name": "user3364161", "link": "https://stackoverflow.com/users/3364161/user3364161"}, "reply_to_user": {"reputation": 8687, "user_id": 325117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f0766debb859466aed4b305cc915d8e?s=128&d=identicon&r=PG", "display_name": "Martin Broadhurst", "link": "https://stackoverflow.com/users/325117/martin-broadhurst"}, "edited": false, "score": 0, "creation_date": 1485984398, "post_id": 41990019, "comment_id": 71157407, "body": "Oops, not an exception message. It just prints the message from the except block."}, {"owner": {"reputation": 8687, "user_id": 325117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f0766debb859466aed4b305cc915d8e?s=128&d=identicon&r=PG", "display_name": "Martin Broadhurst", "link": "https://stackoverflow.com/users/325117/martin-broadhurst"}, "edited": false, "score": 0, "creation_date": 1485984467, "post_id": 41990019, "comment_id": 71157445, "body": "So catch the exception and print the message."}], "answers": [{"comments": [{"owner": {"reputation": 345, "user_id": 3364161, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/99d7b98c94aff787844f4e1bb9da8059?s=128&d=identicon&r=PG&f=1", "display_name": "user3364161", "link": "https://stackoverflow.com/users/3364161/user3364161"}, "edited": false, "score": 0, "creation_date": 1485984883, "post_id": 41990142, "comment_id": 71157641, "body": "That&#39;s one of the iterations I tried.  <a href=\"https://gyazo.com/5314456156ede0b019f48bb6f831a166\" rel=\"nofollow noreferrer\">gyazo.com/5314456156ede0b019f48bb6f831a166</a>  Here&#39;s a screenshot of what happens when I run that code."}, {"owner": {"reputation": 345, "user_id": 3364161, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/99d7b98c94aff787844f4e1bb9da8059?s=128&d=identicon&r=PG&f=1", "display_name": "user3364161", "link": "https://stackoverflow.com/users/3364161/user3364161"}, "edited": false, "score": 0, "creation_date": 1485984955, "post_id": 41990142, "comment_id": 71157678, "body": "There&#39;s no error message. I don&#39;t actually know how to change the except block to display the type of error"}, {"owner": {"reputation": 8687, "user_id": 325117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f0766debb859466aed4b305cc915d8e?s=128&d=identicon&r=PG", "display_name": "Martin Broadhurst", "link": "https://stackoverflow.com/users/325117/martin-broadhurst"}, "reply_to_user": {"reputation": 345, "user_id": 3364161, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/99d7b98c94aff787844f4e1bb9da8059?s=128&d=identicon&r=PG&f=1", "display_name": "user3364161", "link": "https://stackoverflow.com/users/3364161/user3364161"}, "edited": false, "score": 0, "creation_date": 1485985103, "post_id": 41990142, "comment_id": 71157739, "body": "OK I&#39;ve added it to my answer."}, {"owner": {"reputation": 345, "user_id": 3364161, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/99d7b98c94aff787844f4e1bb9da8059?s=128&d=identicon&r=PG&f=1", "display_name": "user3364161", "link": "https://stackoverflow.com/users/3364161/user3364161"}, "edited": false, "score": 0, "creation_date": 1485985247, "post_id": 41990142, "comment_id": 71157796, "body": "(&#39;Invalid parameter type.  param-index=0 param-type=StringVar&#39;, &#39;HY105&#39;)"}, {"owner": {"reputation": 8687, "user_id": 325117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f0766debb859466aed4b305cc915d8e?s=128&d=identicon&r=PG", "display_name": "Martin Broadhurst", "link": "https://stackoverflow.com/users/325117/martin-broadhurst"}, "reply_to_user": {"reputation": 345, "user_id": 3364161, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/99d7b98c94aff787844f4e1bb9da8059?s=128&d=identicon&r=PG&f=1", "display_name": "user3364161", "link": "https://stackoverflow.com/users/3364161/user3364161"}, "edited": false, "score": 0, "creation_date": 1485985578, "post_id": 41990142, "comment_id": 71157937, "body": "So are your <code>winner_new_rating</code>, <code>winner_id</code> variables strings or numbers?"}, {"owner": {"reputation": 345, "user_id": 3364161, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/99d7b98c94aff787844f4e1bb9da8059?s=128&d=identicon&r=PG&f=1", "display_name": "user3364161", "link": "https://stackoverflow.com/users/3364161/user3364161"}, "edited": false, "score": 0, "creation_date": 1485985767, "post_id": 41990142, "comment_id": 71158031, "body": "winner_new_rating is an int, winner_id is a string"}, {"owner": {"reputation": 8687, "user_id": 325117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f0766debb859466aed4b305cc915d8e?s=128&d=identicon&r=PG", "display_name": "Martin Broadhurst", "link": "https://stackoverflow.com/users/325117/martin-broadhurst"}, "reply_to_user": {"reputation": 345, "user_id": 3364161, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/99d7b98c94aff787844f4e1bb9da8059?s=128&d=identicon&r=PG&f=1", "display_name": "user3364161", "link": "https://stackoverflow.com/users/3364161/user3364161"}, "edited": false, "score": 0, "creation_date": 1485985865, "post_id": 41990142, "comment_id": 71158088, "body": "Try stringifying the numbers with <code>str()</code>. I&#39;ve updated my answer."}, {"owner": {"reputation": 345, "user_id": 3364161, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/99d7b98c94aff787844f4e1bb9da8059?s=128&d=identicon&r=PG&f=1", "display_name": "user3364161", "link": "https://stackoverflow.com/users/3364161/user3364161"}, "edited": false, "score": 0, "creation_date": 1485986242, "post_id": 41990142, "comment_id": 71158269, "body": "It took a while because I messed up other code while trying to make that work, but that worked."}], "tags": [], "owner": {"reputation": 8687, "user_id": 325117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f0766debb859466aed4b305cc915d8e?s=128&d=identicon&r=PG", "display_name": "Martin Broadhurst", "link": "https://stackoverflow.com/users/325117/martin-broadhurst"}, "is_accepted": true, "score": 3, "last_activity_date": 1485985862, "last_edit_date": 1485985862, "creation_date": 1485984677, "answer_id": 41990142, "question_id": 41990019, "link": "https://stackoverflow.com/questions/41990019/pyodbc-update-throws-an-exception/41990142#41990142", "title": "pyodbc UPDATE throws an exception", "body": "<p>This is the correct syntax:</p>\n\n<pre><code>try:\n    cursor.execute(\"UPDATE KIDS SET Rating = ? WHERE LocalID = ?\", \n        str(winner_new_rating), winner_id)\n    cursor.execute(\"UPDATE KIDS SET Rating = ? WHERE LocalID = ?\",\n        str(loser_new_rating), loser_id)\nexcept DatabaseError as e:\n    print(str(e))\n</code></pre>\n"}], "owner": {"reputation": 345, "user_id": 3364161, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/99d7b98c94aff787844f4e1bb9da8059?s=128&d=identicon&r=PG&f=1", "display_name": "user3364161", "link": "https://stackoverflow.com/users/3364161/user3364161"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 217, "favorite_count": 0, "accepted_answer_id": 41990142, "answer_count": 1, "score": 1, "last_activity_date": 1485985862, "creation_date": 1485984264, "last_edit_date": 1485984421, "question_id": 41990019, "link": "https://stackoverflow.com/questions/41990019/pyodbc-update-throws-an-exception", "title": "pyodbc UPDATE throws an exception", "body": "<p>I'm making a python program that does Elo calculations for an Azure SQL database. The problem is with the last two 'cursor.execute' commands (the UPDATEs).</p>\n\n<p>I took out part of the code before posting here to make it smaller, but all the variables are properly passed from the find_winner and find_loser methods-- the print commands show the right value.</p>\n\n<p>When I run the program as is, it prints the change in ratings and the message from the except block. When I comment out the UPDATE methods, it doesn't print the except message. The only reason I can come up with is that the variables from the tuple from find_winner and find_loser aren't being entered into the SQL statement properly.</p>\n\n<p>I tried running it with ? and '%s'  instead of winner_new_rating and winner_id, but none of the 3 versions worked.</p>\n\n<p>Is there something obvious I'm missing? What's the proper way of entering parameters stored in variables?</p>\n\n<pre><code>def rate():\n    try:\n        (winner_rating,winner_name,winner_id) = find_winner()\n        (loser_rating,loser_name,loser_id) = find_loser()\n\n        cursor = conn.cursor()\n\n        print(winner_name, \"wins\", winner_rating, \"--&gt;\", winner_new_rating)\n        print(loser_name, \"loses:\", loser_rating, \"--&gt;\", loser_new_rating)\n\n        cursor.execute(\"UPDATE KIDS SET Rating = winner_new_rating WHERE LocalID = winner_id\")\n        cursor.execute(\"UPDATE KIDS SET Rating = loser_new_rating WHERE LocalID = loser_id\")\n\n        conn.commit()\n\n    except:\n        print(\"Rate method error\")\n</code></pre>\n"}, {"tags": ["python", "flask-sqlalchemy", "alembic", "flask-migrate"], "answers": [{"comments": [{"owner": {"reputation": 710, "user_id": 5398566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b4229867e90bc79688e94b612e67774?s=128&d=identicon&r=PG&f=1", "display_name": "Andy G", "link": "https://stackoverflow.com/users/5398566/andy-g"}, "edited": false, "score": 1, "creation_date": 1486311398, "post_id": 42006649, "comment_id": 71280775, "body": "Worked like a charm! Note also to self and other readers that context.configure is set in two places in env.py: run_migrations_offline() and run_migrations_online()"}], "tags": [], "owner": {"reputation": 56149, "user_id": 904393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07759b65c163ee70d802ae9cce9142ec?s=128&d=identicon&r=PG", "display_name": "Miguel", "link": "https://stackoverflow.com/users/904393/miguel"}, "is_accepted": true, "score": 4, "last_activity_date": 1486050794, "creation_date": 1486050794, "answer_id": 42006649, "question_id": 41989969, "link": "https://stackoverflow.com/questions/41989969/getting-flask-migrate-to-ignore-sql-views-that-are-mapped-as-flask-sqlalchemy-mo/42006649#42006649", "title": "Getting Flask-Migrate to Ignore SQL Views that are mapped as Flask-SQLAlchemy Models", "body": "<p>I think (though haven't tested) that you can mark your Table as a view with the <code>__table_args__</code> attribute:</p>\n\n<pre><code>class ViewSampleView(db.Model):\n    __tablename__ = 'vw_report_high_level_count'\n    __table_args__ = {'info': dict(is_view=True)}\n\nid = db.Column(db.String(), primary_key=True)\nrowcount = db.Column(db.Integer(), nullable=False)\n</code></pre>\n"}], "owner": {"reputation": 710, "user_id": 5398566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b4229867e90bc79688e94b612e67774?s=128&d=identicon&r=PG&f=1", "display_name": "Andy G", "link": "https://stackoverflow.com/users/5398566/andy-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1446, "favorite_count": 0, "accepted_answer_id": 42006649, "answer_count": 1, "score": 4, "last_activity_date": 1553663388, "creation_date": 1485984073, "question_id": 41989969, "link": "https://stackoverflow.com/questions/41989969/getting-flask-migrate-to-ignore-sql-views-that-are-mapped-as-flask-sqlalchemy-mo", "title": "Getting Flask-Migrate to Ignore SQL Views that are mapped as Flask-SQLAlchemy Models", "body": "<p>I am using Flask-SQLAlchemy to define my models, and then using Flask-Migrate to auto-generate migration scripts for deployment onto a PostgreSQL database. I have defined a number of SQL Views on the database that I use in my application like below. </p>\n\n<p>However, Flask-Migrate now generates a migration file for the view as it thinks it's a table. How do I correctly get Flask-Migrate / Alembic to ignore the view during autogenerate?</p>\n\n<p>SQL View name: <code>vw_SampleView</code> with two columns: <code>id</code> and <code>rowcount</code>.</p>\n\n<pre><code>class ViewSampleView(db.Model):\n    __tablename__ = 'vw_report_high_level_count'\n\n    info = dict(is_view=True)\n\n    id = db.Column(db.String(), primary_key=True)\n    rowcount = db.Column(db.Integer(), nullable=False)\n</code></pre>\n\n<p>Which means I can now do queries like so:</p>\n\n<pre><code>ViewSampleView.query.all()\n</code></pre>\n\n<p>I tried following instructions on  <a href=\"http://alembic.zzzcomputing.com/en/latest/cookbook.html\" rel=\"nofollow noreferrer\">http://alembic.zzzcomputing.com/en/latest/cookbook.html</a> and added the <code>info = dict(is_view=True)</code> portion to my model and the following bits to my <code>env.py</code> file, but don't know where to go from here.</p>\n\n<pre><code>def include_object(object, name, type_, reflected, compare_to):\n    \"\"\"\n    Exclude views from Alembic's consideration.\n    \"\"\"\n\n    return not object.info.get('is_view', False)\n\n...\n\ncontext.configure(url=url,include_object = include_object)\n</code></pre>\n"}, {"tags": ["python", "numpy"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1485984390, "post_id": 41989950, "comment_id": 71157402, "body": "How the heck is that second array supposed to have shape <code>(1,)</code>? Is there some sort of weird thing with object arrays going on here?"}, {"owner": {"reputation": 1938, "user_id": 2480410, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/137e895147828842aae77979cb6e48b7?s=128&d=identicon&r=PG", "display_name": "RaduS", "link": "https://stackoverflow.com/users/2480410/radus"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1485984505, "post_id": 41989950, "comment_id": 71157465, "body": "That is what i got when i run array2.shape"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1485984555, "post_id": 41989950, "comment_id": 71157492, "body": "Then your array is seriously messed up in some way, and you need to figure out what&#39;s going on."}, {"owner": {"reputation": 1938, "user_id": 2480410, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/137e895147828842aae77979cb6e48b7?s=128&d=identicon&r=PG", "display_name": "RaduS", "link": "https://stackoverflow.com/users/2480410/radus"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1485984644, "post_id": 41989950, "comment_id": 71157538, "body": "just before that i run this <code>array2 = np.array(np.round(data[:,0]&#47;20))</code>"}], "answers": [{"comments": [{"owner": {"reputation": 2632, "user_id": 513688, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/24467d7889102cb4e68deb43aa51911f?s=128&d=identicon&r=PG", "display_name": "Andrew", "link": "https://stackoverflow.com/users/513688/andrew"}, "edited": false, "score": 1, "creation_date": 1485984401, "post_id": 41989993, "comment_id": 71157408, "body": "The b[:, None] notation is great, but it might also be worth mentioning b.reshape()"}, {"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "reply_to_user": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "edited": false, "score": 1, "creation_date": 1485984479, "post_id": 41989993, "comment_id": 71157453, "body": "@PaulPanzer That&#39;s worth a new post! Consider posting it."}, {"owner": {"reputation": 1938, "user_id": 2480410, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/137e895147828842aae77979cb6e48b7?s=128&d=identicon&r=PG", "display_name": "RaduS", "link": "https://stackoverflow.com/users/2480410/radus"}, "edited": false, "score": 0, "creation_date": 1485985226, "post_id": 41989993, "comment_id": 71157785, "body": "the shape of the second was because of this <code>array2 = np.array(np.round(data[:,0]&#47;20))</code> i fixed with <code>array2 = np.array(np.round(data[:,0]&#47;20)).astype(int)</code>"}], "tags": [], "owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "is_accepted": true, "score": 34, "last_activity_date": 1485985050, "last_edit_date": 1485985050, "creation_date": 1485984152, "answer_id": 41989993, "question_id": 41989950, "link": "https://stackoverflow.com/questions/41989950/numpy-array-concatenate-valueerror-all-the-input-arrays-must-have-same-number/41989993#41989993", "title": "numpy array concatenate: &quot;ValueError: all the input arrays must have same number of dimensions&quot;", "body": "<p>To use <code>np.concatenate</code>, we need to extend the second array to <code>2D</code> and then concatenate along <code>axis=1</code> -</p>\n\n<pre><code>np.concatenate((a,b[:,None]),axis=1)\n</code></pre>\n\n<p>Alternatively, we can use <code>np.column_stack</code> that takes care of it -</p>\n\n<pre><code>np.column_stack((a,b))\n</code></pre>\n\n<p>Sample run -</p>\n\n<pre><code>In [84]: a\nOut[84]: \narray([[54, 30, 55, 12],\n       [64, 94, 50, 72],\n       [67, 31, 56, 43],\n       [26, 58, 35, 14],\n       [97, 76, 84, 52]])\n\nIn [85]: b\nOut[85]: array([56, 70, 43, 19, 16])\n\nIn [86]: np.concatenate((a,b[:,None]),axis=1)\nOut[86]: \narray([[54, 30, 55, 12, 56],\n       [64, 94, 50, 72, 70],\n       [67, 31, 56, 43, 43],\n       [26, 58, 35, 14, 19],\n       [97, 76, 84, 52, 16]])\n</code></pre>\n\n<p>If <code>b</code> is such that its a <code>1D</code> array of <code>dtype=object</code> with a shape of <code>(1,)</code>, most probably all of the data is contained in the only element in it, we need to <em>flatten</em> it out before concatenating. For that purpose, we can use <code>np.concatenate</code> on it too. Here's a sample run to make the point clear -</p>\n\n<pre><code>In [118]: a\nOut[118]: \narray([[54, 30, 55, 12],\n       [64, 94, 50, 72],\n       [67, 31, 56, 43],\n       [26, 58, 35, 14],\n       [97, 76, 84, 52]])\n\nIn [119]: b\nOut[119]: array([array([30, 41, 76, 13, 69])], dtype=object)\n\nIn [120]: b.shape\nOut[120]: (1,)\n\nIn [121]: np.concatenate((a,np.concatenate(b)[:,None]),axis=1)\nOut[121]: \narray([[54, 30, 55, 12, 30],\n       [64, 94, 50, 72, 41],\n       [67, 31, 56, 43, 76],\n       [26, 58, 35, 14, 13],\n       [97, 76, 84, 52, 69]])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 26717, "user_id": 5352399, "user_type": "registered", "accept_rate": 81, "profile_image": "https://lh3.googleusercontent.com/-Rk_dLwN-xPY/AAAAAAAAAAI/AAAAAAAAAC8/DtCya1W9lX4/photo.jpg?sz=128", "display_name": "Wasi Ahmad", "link": "https://stackoverflow.com/users/5352399/wasi-ahmad"}, "is_accepted": false, "score": 2, "last_activity_date": 1485984922, "creation_date": 1485984922, "answer_id": 41990209, "question_id": 41989950, "link": "https://stackoverflow.com/questions/41989950/numpy-array-concatenate-valueerror-all-the-input-arrays-must-have-same-number/41990209#41990209", "title": "numpy array concatenate: &quot;ValueError: all the input arrays must have same number of dimensions&quot;", "body": "<p>You can do something like this.</p>\n\n<pre><code>import numpy as np\n\nx = np.random.randint(100, size=(5, 4))\ny = [16, 15, 12, 12, 17]\n\nprint(x)\n\nval = np.concatenate((x,np.reshape(y,(x.shape[0],1))),axis=1)\nprint(val)\n</code></pre>\n\n<p>This outputs:</p>\n\n<pre><code>[[32 37 35 53]\n [64 23 95 76]\n [17 76 11 30]\n [35 42  6 80]\n [61 88  7 56]]\n\n[[32 37 35 53 16]\n [64 23 95 76 15]\n [17 76 11 30 12]\n [35 42  6 80 12]\n [61 88  7 56 17]]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1485988285, "post_id": 41990280, "comment_id": 71159270, "body": "Dare you to decode this one: <code>np.r_[&#39;1,2,0&#39;, a, -1:-6:-1]</code> :)"}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1485988568, "post_id": 41990280, "comment_id": 71159391, "body": "I wonder if <code>np.c_</code> can always substitute for <code>np.column_stack</code>?"}, {"owner": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "reply_to_user": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1486002047, "post_id": 41990280, "comment_id": 71163407, "body": "@hpaulj Looks like it to me, but I&#39;m not that familiar with <code>np.column_stack</code>. It is basically a 2d <code>concatenate</code> that special cases 1d inputs, right?"}], "tags": [], "owner": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "is_accepted": false, "score": 4, "last_activity_date": 1485985211, "creation_date": 1485985211, "answer_id": 41990280, "question_id": 41989950, "link": "https://stackoverflow.com/questions/41989950/numpy-array-concatenate-valueerror-all-the-input-arrays-must-have-same-number/41990280#41990280", "title": "numpy array concatenate: &quot;ValueError: all the input arrays must have same number of dimensions&quot;", "body": "<p>There's also <code>np.c_</code></p>\n\n<pre><code>&gt;&gt;&gt; a = np.arange(20).reshape(5, 4)\n&gt;&gt;&gt; b = np.arange(-1, -6, -1)\n&gt;&gt;&gt; a\narray([[ 0,  1,  2,  3],\n       [ 4,  5,  6,  7],\n       [ 8,  9, 10, 11],\n       [12, 13, 14, 15],\n       [16, 17, 18, 19]])                                                                                                                                   \n&gt;&gt;&gt; b                                                                                                                                                       \narray([-1, -2, -3, -4, -5])                                                                                                                                 \n&gt;&gt;&gt; np.c_[a, b]\narray([[ 0,  1,  2,  3, -1],          \n       [ 4,  5,  6,  7, -2],                       \n       [ 8,  9, 10, 11, -3],                      \n       [12, 13, 14, 15, -4],                                \n       [16, 17, 18, 19, -5]])\n</code></pre>\n"}], "owner": {"reputation": 1938, "user_id": 2480410, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/137e895147828842aae77979cb6e48b7?s=128&d=identicon&r=PG", "display_name": "RaduS", "link": "https://stackoverflow.com/users/2480410/radus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100476, "favorite_count": 11, "accepted_answer_id": 41989993, "answer_count": 3, "score": 25, "last_activity_date": 1594805362, "creation_date": 1485983970, "last_edit_date": 1594805362, "question_id": 41989950, "link": "https://stackoverflow.com/questions/41989950/numpy-array-concatenate-valueerror-all-the-input-arrays-must-have-same-number", "title": "numpy array concatenate: &quot;ValueError: all the input arrays must have same number of dimensions&quot;", "body": "<p>How to concatenate these <code>numpy</code> arrays?</p>\n<p>first <code>np.array</code> with a shape <code>(5,4)</code></p>\n<pre><code>[[  6487    400 489580      0]\n [  6488    401 492994      0]\n [  6491    408 489247      0]\n [  6491    408 489247      0]\n [  6492    402 499013      0]]\n</code></pre>\n<p>second <code>np.array</code> with a shape <code>(5,)</code></p>\n<pre><code>[  16.   15.   12.  12.  17. ]\n</code></pre>\n<p>final result should be</p>\n<pre><code>[[  6487    400    489580    0   16]\n [  6488    401    492994    0   15]\n [  6491    408    489247    0   12]\n [  6491    408    489247    0   12]\n [  6492    402    499013    0   17]]\n</code></pre>\n<p>I tried <code>np.concatenate([array1, array2])</code>\nbut i get this error</p>\n<p><code>ValueError: all the input arrays must have same number of dimensions</code></p>\n<p>What am I doing wrong?</p>\n"}, {"tags": ["python", "statistics", "confidence-interval", "resampling"], "comments": [{"owner": {"reputation": 6424, "user_id": 3579910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoMjv.jpg?s=128&g=1", "display_name": "TemporalWolf", "link": "https://stackoverflow.com/users/3579910/temporalwolf"}, "edited": false, "score": 0, "creation_date": 1485983889, "post_id": 41989866, "comment_id": 71157173, "body": "Unless you set a <a href=\"https://docs.python.org/2/library/random.html#random.seed\" rel=\"nofollow noreferrer\">random.seed()</a>, it will give different choices across runs. This won&#39;t account for the discrepancy, but is worth fixing for future testing."}, {"owner": {"reputation": 25, "user_id": 7307596, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7p8u7.jpg?s=128&g=1", "display_name": "Shing Tse", "link": "https://stackoverflow.com/users/7307596/shing-tse"}, "reply_to_user": {"reputation": 6424, "user_id": 3579910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoMjv.jpg?s=128&g=1", "display_name": "TemporalWolf", "link": "https://stackoverflow.com/users/3579910/temporalwolf"}, "edited": false, "score": 0, "creation_date": 1485984068, "post_id": 41989866, "comment_id": 71157253, "body": "@TemporalWolf I&#39;m not quite sure I understand what you mean. Could you please elaborate a little further?"}, {"owner": {"reputation": 6424, "user_id": 3579910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoMjv.jpg?s=128&g=1", "display_name": "TemporalWolf", "link": "https://stackoverflow.com/users/3579910/temporalwolf"}, "edited": false, "score": 0, "creation_date": 1485984771, "post_id": 41989866, "comment_id": 71157593, "body": "setting a specific random seed makes it so that it will give you the same choices every time you run it: it&#39;s useful for testing whether the algorithm works with known input."}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 7307596, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7p8u7.jpg?s=128&g=1", "display_name": "Shing Tse", "link": "https://stackoverflow.com/users/7307596/shing-tse"}, "edited": false, "score": 0, "creation_date": 1485984629, "post_id": 41990102, "comment_id": 71157528, "body": "What does random.seed() do?"}, {"owner": {"reputation": 705380, "user_id": 190597, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aabc98d5c6482ca0e1405ec97710f30a?s=128&d=identicon&r=PG&f=1", "display_name": "unutbu", "link": "https://stackoverflow.com/users/190597/unutbu"}, "reply_to_user": {"reputation": 25, "user_id": 7307596, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7p8u7.jpg?s=128&g=1", "display_name": "Shing Tse", "link": "https://stackoverflow.com/users/7307596/shing-tse"}, "edited": false, "score": 0, "creation_date": 1485984773, "post_id": 41990102, "comment_id": 71157597, "body": "It <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.random.seed.html\" rel=\"nofollow noreferrer\">&quot;seeds&quot; the random number generator</a> so the result is repeatable."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1485984860, "post_id": 41990102, "comment_id": 71157631, "body": "I&#39;m pretty sure the confidence interval is <code>mean += z*stderror</code>, where the standard error = (standard deviation) / sqrt(n). The standard error is simply the standard deviation of the <i>sampling</i> distribution."}, {"owner": {"reputation": 25, "user_id": 7307596, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7p8u7.jpg?s=128&g=1", "display_name": "Shing Tse", "link": "https://stackoverflow.com/users/7307596/shing-tse"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1485985628, "post_id": 41990102, "comment_id": 71157958, "body": "@juanpa.arrivillaga In this case, std = np.std(listofmeans, axis=0) gives the standard error, without having to take the square root of n. From what I understand, if I knew the population standard deviation, which I don&#39;t in this case, then I would divide by square root of n."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "reply_to_user": {"reputation": 25, "user_id": 7307596, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7p8u7.jpg?s=128&g=1", "display_name": "Shing Tse", "link": "https://stackoverflow.com/users/7307596/shing-tse"}, "edited": false, "score": 0, "creation_date": 1485985829, "post_id": 41990102, "comment_id": 71158063, "body": "@ShingTse Ah, yes. I think I see now. I was confused by the bootstrapping. Yes, you have <code>listofmeans</code>."}, {"owner": {"reputation": 705380, "user_id": 190597, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aabc98d5c6482ca0e1405ec97710f30a?s=128&d=identicon&r=PG&f=1", "display_name": "unutbu", "link": "https://stackoverflow.com/users/190597/unutbu"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1485985971, "post_id": 41990102, "comment_id": 71158143, "body": "@juanpa.arrivillaga: It is a bit confusing because there are so many means here. But I think what bootstrapping is doing is similar to surveying the height of 10000 boys, finding the mean and std deviation of those heights, and then taking the mean +/- 1.96*std. We&#39;re not computing the standard deviation of a mean, only the standard deviation of a sample."}, {"owner": {"reputation": 705380, "user_id": 190597, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aabc98d5c6482ca0e1405ec97710f30a?s=128&d=identicon&r=PG&f=1", "display_name": "unutbu", "link": "https://stackoverflow.com/users/190597/unutbu"}, "edited": false, "score": 0, "creation_date": 1485986639, "post_id": 41990102, "comment_id": 71158479, "body": "I added <a href=\"http://stackoverflow.com/q/40491298/190597\">a second way</a> to compute the confidence interval which is perhaps more true to the spirit of bootstrapping -- by finding it empirically, not by formula."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1485986648, "post_id": 41990102, "comment_id": 71158483, "body": "Yes, we are sampling means <i>directly</i> in this case."}, {"owner": {"reputation": 25, "user_id": 7307596, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7p8u7.jpg?s=128&g=1", "display_name": "Shing Tse", "link": "https://stackoverflow.com/users/7307596/shing-tse"}, "edited": false, "score": 0, "creation_date": 1485987274, "post_id": 41990102, "comment_id": 71158808, "body": "@unutbu One more question, I don&#39;t see the random.seed() method used in the body of the code. Did I miss something? Where does this method change what the code does?"}, {"owner": {"reputation": 705380, "user_id": 190597, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aabc98d5c6482ca0e1405ec97710f30a?s=128&d=identicon&r=PG&f=1", "display_name": "unutbu", "link": "https://stackoverflow.com/users/190597/unutbu"}, "reply_to_user": {"reputation": 25, "user_id": 7307596, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7p8u7.jpg?s=128&g=1", "display_name": "Shing Tse", "link": "https://stackoverflow.com/users/7307596/shing-tse"}, "edited": false, "score": 0, "creation_date": 1485987891, "post_id": 41990102, "comment_id": 71159105, "body": "@ShingTse: My mistake. I should have called <code>random.seed</code>, not <code>np.random.seed</code>, since we are using <code>random.choice</code>, not <code>np.random.choice</code>. I&#39;ve updated the code above to fix this. <i>Now</i>, when you run the code, the result should be repeatable."}, {"owner": {"reputation": 705380, "user_id": 190597, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aabc98d5c6482ca0e1405ec97710f30a?s=128&d=identicon&r=PG&f=1", "display_name": "unutbu", "link": "https://stackoverflow.com/users/190597/unutbu"}, "edited": false, "score": 0, "creation_date": 1485988435, "post_id": 41990102, "comment_id": 71159334, "body": "To finish the analogy mentioned above, we are finding the interval which includes 95% of the boys."}], "tags": [], "owner": {"reputation": 705380, "user_id": 190597, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aabc98d5c6482ca0e1405ec97710f30a?s=128&d=identicon&r=PG&f=1", "display_name": "unutbu", "link": "https://stackoverflow.com/users/190597/unutbu"}, "is_accepted": true, "score": 3, "last_activity_date": 1485987848, "last_edit_date": 1485987848, "creation_date": 1485984528, "answer_id": 41990102, "question_id": 41989866, "link": "https://stackoverflow.com/questions/41989866/i-created-a-class-to-return-a-confidence-interval-after-bootstrapping-but-my-co/41990102#41990102", "title": "I created a class to return a confidence interval after bootstrapping, but my confidence interval looks oddly narrow. What did I do wrong?", "body": "<p>To find a 95% confidence interval, let <code>z = 1.96</code> (approximately) and compute the interval about the mean, plus or minus <code>z*std</code> where <code>std</code> is the standard deviation. In other words, use <code>z*std</code> not <code>z*std/n</code>:</p>\n\n<pre><code>import numpy as np\nimport random\nrandom.seed(2017)\n\nclass Bootstrapping(object):\n\n    def __init__(self,bslist=[],iteration=10000):\n        self.bslist = bslist\n        self.iteration = iteration\n\n    def CI(self):\n        listofmeans = []\n\n        for numbers in range(0,self.iteration):\n            bootstraplist = [random.choice(self.bslist) for _ in range(len(self.bslist))]\n            mean = sum(bootstraplist) / len(bootstraplist)\n            listofmeans.append(mean)\n\n        mean = np.mean(listofmeans, axis=0)\n        std = np.std(listofmeans, axis=0)\n        z = 1.96\n        err = z*std\n        lower_confidence = mean - err\n        upper_confidence = mean + err\n\n        return lower_confidence, upper_confidence\n\ntest = Bootstrapping([60,33,102,53,63,33,42,19,31,86,15,50,\n                      45,47,26,23,30,20,18,48,22,20,17,29,43,52,29],10000)\nprint(test.CI())\n</code></pre>\n\n<p>yields</p>\n\n<pre><code>(31.309540089458281, 46.876348799430602)\n</code></pre>\n\n<hr>\n\n<p>Alternatively, you can compute the confidence interval without appealing to the mean +/-1.96*std formula. You can get an empirical estimate of the confidence interval by sorting <code>listofmeans</code> and finding the values at the 5th and 95th percentile:</p>\n\n<pre><code>import random\nrandom.seed(2017)\n\nclass Bootstrapping(object):\n\n    def __init__(self,bslist=[],iteration=10000):\n        self.bslist = bslist\n        self.iteration = iteration\n\n    def CI(self):\n        listofmeans = []\n\n        for numbers in range(0,self.iteration):\n            bootstraplist = [random.choice(self.bslist) for _ in range(len(self.bslist))]\n            mean = sum(bootstraplist) / len(bootstraplist)\n            listofmeans.append(mean)\n\n        listofmeans = sorted(listofmeans)    \n        a, b = round(self.iteration*0.05), round(self.iteration*0.95)\n        lower_confidence = listofmeans[a]\n        upper_confidence = listofmeans[b]\n\n        return lower_confidence, upper_confidence\n\ntest = Bootstrapping([60,33,102,53,63,33,42,19,31,86,15,50,\n                      45,47,26,23,30,20,18,48,22,20,17,29,43,52,29],10000)\nprint(test.CI())\n</code></pre>\n\n<p>yields</p>\n\n<pre><code>(32.888888888888886, 45.888888888888886)\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 7307596, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7p8u7.jpg?s=128&g=1", "display_name": "Shing Tse", "link": "https://stackoverflow.com/users/7307596/shing-tse"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 432, "favorite_count": 4, "accepted_answer_id": 41990102, "answer_count": 1, "score": 2, "last_activity_date": 1485987848, "creation_date": 1485983638, "last_edit_date": 1485983804, "question_id": 41989866, "link": "https://stackoverflow.com/questions/41989866/i-created-a-class-to-return-a-confidence-interval-after-bootstrapping-but-my-co", "title": "I created a class to return a confidence interval after bootstrapping, but my confidence interval looks oddly narrow. What did I do wrong?", "body": "<p>My intent is to have the code perform bootstrapping (statistics) on a given list\nwith sample size equal to the length of the list 10,000 times and then calculate\nthe 95% confidence interval.</p>\n\n<pre><code>import numpy\nfrom random import choice\n\nclass bootstrapping(object):\n\n    def __init__(self,bslist=[],iteration=10000):\n        self.bslist = bslist\n        self.iteration = iteration\n\n    def CI(self):\n        listofmeans = []\n\n        for numbers in range(0,self.iteration):\n            bootstraplist = [choice(self.bslist) for _ in range(len(self.bslist))]\n            listofmeans.append(sum(bootstraplist) / len(bootstraplist))\n\n        s = numpy.std(listofmeans)\n        z = 1.96\n        n = self.iteration**0.5\n\n        lower_confidence = (sum(listofmeans) / len(listofmeans)) - (z*s/n)\n        upper_confidence = (sum(listofmeans) / len(listofmeans)) + (z*s/n)\n\n        return lower_confidence,upper_confidence\n\ntest = bootstrapping([60,33,102,53,63,33,42,19,31,86,15,50,\n                      45,47,26,23,30,20,18,48,22,20,17,29,43,52,29],10000)\ntest.CI()\n</code></pre>\n\n<p>The confidence interval I'm getting,(37.897427638499948, 38.102572361500052), is\noddly narrow. When I enter the same list of numbers into Minitab, the 95%\nconfidence interval I get is (30.74, 47.48). Is there something I did wrong?</p>\n"}, {"tags": ["python", "tkinter", "concurrency", "python-3.5", "concurrent.futures"], "comments": [{"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1485991738, "post_id": 41989813, "comment_id": 71160542, "body": "by &quot;performance of a widget&quot; do you actually mean the performance of a block of code that is run by clicking on a widget?"}, {"owner": {"reputation": 5017, "user_id": 5722359, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/08669b0a001a73041f9c0afc3f19408e?s=128&d=identicon&r=PG&f=1", "display_name": "Sun Bear", "link": "https://stackoverflow.com/users/5722359/sun-bear"}, "reply_to_user": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1486009599, "post_id": 41989813, "comment_id": 71165328, "body": "@BryanOakley I like to compare the time taken by <code>self._serial</code> and <code>self._concurrent</code> to find the match. <code>self._serial</code> serves as control. I think a well written code will first try to implement in <code>self._check</code> 2 separate threads to start both of these methods in parallel. Secondly, <code>self._concurrent</code> must contain cmds to use <code>ProcessPoolExecutor</code> to find the matches and output the results to the GUI&#39;s <code>label2</code>. I am trying to achieve this but have not find a way to do these yet. I read from other post that concurrency cmds must be perform in main, hence I referenced it to <code>self.parent</code> ."}, {"owner": {"reputation": 5017, "user_id": 5722359, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/08669b0a001a73041f9c0afc3f19408e?s=128&d=identicon&r=PG&f=1", "display_name": "Sun Bear", "link": "https://stackoverflow.com/users/5722359/sun-bear"}, "reply_to_user": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1486075480, "post_id": 41989813, "comment_id": 71202928, "body": "@BryanOakley My answer to your question is yes. Is what I want to do possible? If yes, how do I do it? Appreciate your help."}, {"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1486075852, "post_id": 41989813, "comment_id": 71203060, "body": "I&#39;m sure it&#39;s possible, but I&#39;ve never used concurrent so I can&#39;t help."}, {"owner": {"reputation": 5017, "user_id": 5722359, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/08669b0a001a73041f9c0afc3f19408e?s=128&d=identicon&r=PG&f=1", "display_name": "Sun Bear", "link": "https://stackoverflow.com/users/5722359/sun-bear"}, "reply_to_user": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1486076815, "post_id": 41989813, "comment_id": 71203416, "body": "@BryanOakley Do you have any examples or references showing how <code>multiprocessing</code> is used for my purpose? I ask because I read that <code>concurrent.futures</code> is a higher level API implementation of  <code>multiprocessing</code> and <code>threading</code>. If so, I think the manner to using them for my scenario should apply to <code>concurrent.futures</code>."}], "answers": [{"comments": [{"owner": {"reputation": 542, "user_id": 881660, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3068eb3fd8caf2d90f9fcbea2c69d6dc?s=128&d=identicon&r=PG", "display_name": "Damiox", "link": "https://stackoverflow.com/users/881660/damiox"}, "edited": false, "score": 0, "creation_date": 1586829128, "post_id": 42221437, "comment_id": 108266052, "body": "There are dozens of answers in stackoverflow for questions about multiprocessing and concurrent.futures . This is the best answer and the only one that worked for me after checking at least 30 different stackoverflow questions. You rock! Thanks"}], "tags": [], "owner": {"reputation": 5017, "user_id": 5722359, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/08669b0a001a73041f9c0afc3f19408e?s=128&d=identicon&r=PG&f=1", "display_name": "Sun Bear", "link": "https://stackoverflow.com/users/5722359/sun-bear"}, "is_accepted": true, "score": 5, "last_activity_date": 1487159902, "last_edit_date": 1487159902, "creation_date": 1487061896, "answer_id": 42221437, "question_id": 41989813, "link": "https://stackoverflow.com/questions/41989813/is-it-possible-to-use-concurrent-futures-to-execute-a-function-method-inside-a-t/42221437#42221437", "title": "Is it possible to use concurrent.futures to execute a function/method inside a tkinter class following an event? If yes, how?", "body": "<p>I finally found a way to answer my question. </p>\n\n<p>Mark Summerfields's book, Python in Practice(2014), mentioned that the <code>multiprocessing</code> module, called by  <code>concurrent.futures.ProcessPoolExecutor</code>, can only call functions that are importable and use modules data (<em>called by the functions</em>) that are pickleable. As such, it is necessary for <code>concurrent.futures.ProcessPoolExecutor</code> and the functions (with its argument) it called to be found in a separate module than the tkinter GUI module, else it would not work.</p>\n\n<p>As such, I created a separate class to host all the codes related to <code>concurrent.futures.ProcessPoolExecutor</code> and the functions and data it called, instead of putting them in the class app, my tkinter.Tk() GUI class, as I did previously. It worked!</p>\n\n<p>I also managed to use <code>threading.Threads</code> to perform concurrent execution of my serial and concurrent tasks.</p>\n\n<p>I am sharing my revised test code below to demonstrate how I did it and hope this helps anyone attempting to use <code>concurrent.futures</code> with tkinter. </p>\n\n<p>It's really beautiful to see all the CPUs revving up with Tk GUI. :)  </p>\n\n<p><strong>Revised Test Code:</strong></p>\n\n<pre><code>#!/usr/bin/python3\n# -*- coding: utf-8 -*-\n''' Code to demonstrate how to use concurrent.futures.Executor object with tkinter.'''\n\nimport tkinter as tk # Python 3 tkinter modules\nimport tkinter.ttk as ttk\nimport concurrent.futures as cf\nimport threading\nfrom time import time, sleep\nfrom itertools import chain \n\n\nclass App(ttk.Frame):\n    def __init__(self, parent):\n        # Initialise App Frame\n        ttk.Frame.__init__(self, parent)\n        self.parent=parent\n\n        self.button = ttk.Button(self, text = 'FIND', command=self._check)\n        self.label0 = ttk.Label(self, foreground='blue')\n        self.label1 = ttk.Label(self, foreground='red')\n        self.label2 = ttk.Label(self, foreground='green')\n        self._labels()\n        self.button.grid(row=0, column=1, rowspan=3, sticky='nsew')\n        self.label0.grid(row=0, column=0, sticky='nsew')\n        self.label1.grid(row=1, column=0, sticky='nsew')\n        self.label2.grid(row=2, column=0, sticky='nsew')\n\n    def _labels(self):\n        self.label0.configure(text='Click \"FIND\" to see how many times the number 5 appears.')\n        self.label1.configure(text='Serial Method:')\n        self.label2.configure(text='Concurrent Method:')\n\n    def _check(self):\n        # Initialisation\n        self._labels()\n        nmax = int(1E8)\n        workers = 6     # Pool of workers\n        chunks_vs_workers = 30 # A factor of =&gt;14 can provide optimum performance \n        num_of_chunks = chunks_vs_workers * workers\n        number = '5'\n        self.label0.configure(\n            text='Finding the number of times {0} appears in 0 to {1}'.format(\n                number, nmax))\n        self.parent.update_idletasks()\n        # Concurrent management of serial and concurrent tasks using threading\n        self.serworker = threading.Thread(target=self._serial,\n                                          args=(0, nmax, number))\n        self.subworker  = threading.Thread(target=self._concurrent,\n                                           args=(nmax, number, workers,\n                                                 num_of_chunks))\n        self.serworker.start()         \n        self.subworker.start()         \n\n    def _serial(self, nmin, nmax, number):\n        fm = Findmatch\n        # Run serial code\n        start = time()\n        smatch = fm._findmatch(fm, 0, nmax, number)\n        end = time() - start\n        self.label1.configure(\n            text='Serial Method: {0} occurrences, Compute Time: {1:.6f}sec'.format(\n                len(smatch), end))\n        self.parent.update_idletasks()\n        #print('smatch = ', smatch) \n\n    def _concurrent(self, nmax, number, workers, num_of_chunks): \n        fm = Findmatch\n        # Run serial code concurrently with concurrent.futures .submit()\n        start = time()\n        cmatch = fm._concurrent_submit(fm, nmax, number, workers,\n                                        num_of_chunks)\n        end = time() - start\n        self.label2.configure(\n            text='Concurrent Method: {0} occurrences, Compute Time: {1:.6f}sec'.format(\n                len(cmatch), end))\n        self.parent.update_idletasks()\n        #print('cmatch = ', cmatch) \n\n\nclass Findmatch:\n    ''' A class specially created to host concurrent.futures.ProcessPoolExecutor\n        so that the function(s) it calls can be accessible by multiprocessing\n        module. Multiprocessing requirements: codes must be importable and code\n        data must be pickerable. ref. Python in Practice, by Mark Summerfields,\n        section 4.3.2, pg 173, 2014'''\n    def __init__(self):\n        self.__init__(self)\n\n    def _findmatch(self, nmin, nmax, number):\n        '''Function to find the occurence of number in range nmin to nmax and return\n           the found occurences in a list.'''\n        start = time()\n        match=[]\n        for n in range(nmin, nmax):\n            if number in str(n): match.append(n)\n        end = time() - start\n        #print(\"\\n def _findmatch {0:&lt;10} {1:&lt;10} {2:&lt;3} found {3:8} in {4:.4f}sec\".\n        #      format(nmin, nmax, number, len(match),end))\n        return match\n\n    def _concurrent_submit(self, nmax, number, workers, num_of_chunks):\n        '''Function that utilises concurrent.futures.ProcessPoolExecutor.submit to\n           find the occurrences of a given number in a number range in a concurrent\n           manner.'''\n        # 1. Local variables\n        start = time()\n        chunksize = nmax // num_of_chunks\n        self.futures = []\n        #2. Parallelization\n        with cf.ProcessPoolExecutor(max_workers=workers) as executor:\n            # 2.1. Discretise workload and submit to worker pool\n            for i in range(num_of_chunks):\n                cstart = chunksize * i\n                cstop = chunksize * (i + 1) if i != num_of_chunks - 1 else nmax\n                self.futures.append(executor.submit(\n                    self._findmatch, self, cstart, cstop, number))\n        end = time() - start\n        print('\\n within statement of def _concurrent_submit(nmax, number, workers, num_of_chunks):')\n        print(\"found in {0:.4f}sec\".format(end))\n        return list(chain.from_iterable(f.result() for f in cf.as_completed(\n            self.futures)))\n\n\nif __name__ == '__main__':\n    root = tk.Tk()\n    root.title('App'), root.geometry('550x60')\n    app = App(root)\n    app.grid(row=0, column=0, sticky='nsew')\n\n    root.rowconfigure(0, weight=1)\n    root.columnconfigure(0, weight=1)\n    app.columnconfigure(0, weight=1)\n\n    app.mainloop()\n</code></pre>\n"}], "owner": {"reputation": 5017, "user_id": 5722359, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/08669b0a001a73041f9c0afc3f19408e?s=128&d=identicon&r=PG&f=1", "display_name": "Sun Bear", "link": "https://stackoverflow.com/users/5722359/sun-bear"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3406, "favorite_count": 0, "accepted_answer_id": 42221437, "answer_count": 1, "score": 2, "last_activity_date": 1487159902, "creation_date": 1485983434, "last_edit_date": 1495535377, "question_id": 41989813, "link": "https://stackoverflow.com/questions/41989813/is-it-possible-to-use-concurrent-futures-to-execute-a-function-method-inside-a-t", "title": "Is it possible to use concurrent.futures to execute a function/method inside a tkinter class following an event? If yes, how?", "body": "<p>I am trying to use the pool of workers provided by <code>concurrent.futures.ProcessPoolExecutor</code> to speed up the performance of a method inside a tkinter class. This is because executing the method is cpu intensive and \"parallelizing\" it should shorten the time to complete it. I hope to benchmark it's performance against a control - a serial execution of the same method. I have written a tkinter GUI test code to perform this benchmark. The serial execution of the method works but the concurrent part does not work. Appreciate any help to get the concurrent part of my code to work.</p>\n\n<p><strong>Update:</strong> I have ensured that I have correctly implemented <code>concurrent.futures.ProcessPoolExecutor</code> to solve my problem outside of Tk(), i.e. from a standard python3 script. It is explained in this <a href=\"https://stackoverflow.com/a/42096963/5722359\">answer</a>. Now I want to implement the concurrent method described in that answer to work with a button in my tkinter.Tk() GUI.</p>\n\n<p>My test code is given below. When you run it, a GUI will appear. When you are click the 'FIND' Button, the _findmatch function will be executed in a serial and concurrent manner to find how many times the number 5 occurs in the number range of 0 to 1E8. The serial part works but the concurrent part is complaining (see below). <strong>Anyone knows how to fix this Pickling error?</strong></p>\n\n<pre><code>Traceback (most recent call last):\n  File \"/usr/lib/python3.5/multiprocessing/queues.py\", line 241, in _feed\n    obj = ForkingPickler.dumps(obj)\n  File \"/usr/lib/python3.5/multiprocessing/reduction.py\", line 50, in dumps\n    cls(buf, protocol).dump(obj)\n_pickle.PicklingError: Can't pickle &lt;class '_tkinter.tkapp'&gt;: attribute lookup tkapp on _tkinter failed\n</code></pre>\n\n<p><strong>Test Code:</strong></p>\n\n<pre><code>#!/usr/bin/python3\n# -*- coding: utf-8 -*-\n\nimport tkinter as tk # Python 3 tkinter modules\nimport tkinter.ttk as ttk\nimport concurrent.futures as cf\nfrom time import time, sleep\nfrom itertools import repeat, chain \n\nclass App(ttk.Frame):\n    def __init__(self, parent):\n        # Initialise App Frame\n        ttk.Frame.__init__(self, parent, style='App.TFrame')\n        self.parent=parent\n\n        self.button = ttk.Button(self, style='start.TButton', text = 'FIND',\n                                 command=self._check)\n        self.label0 = ttk.Label(self, foreground='blue')\n        self.label1 = ttk.Label(self, foreground='red')\n        self.label2 = ttk.Label(self, foreground='green')\n        self._labels()\n        self.button.grid(row=0, column=1, rowspan=3, sticky='nsew')\n        self.label0.grid(row=0, column=0, sticky='nsew')\n        self.label1.grid(row=1, column=0, sticky='nsew')\n        self.label2.grid(row=2, column=0, sticky='nsew')\n\n    def _labels(self):\n        self.label0.configure(text='Click \"FIND\" to see how many times the number 5 appears.')\n        self.label1.configure(text='Serial Method:')\n        self.label2.configure(text='Concurrent Method:')\n\n    def _check(self):\n        # Initialisation\n        self._labels()\n        nmax = int(1E7)\n        smatch=[]\n        cmatch=[]\n        number = '5'\n        self.label0.configure(\n            text='Finding the number of times {0} appears in 0 to {1}'.format(\n                number, nmax))\n        self.parent.update_idletasks()\n\n        # Run serial code\n        start = time()\n        smatch = self._findmatch(0, nmax, number)\n        end = time() - start\n        self.label1.configure(\n            text='Serial: Found {0} occurances,  Time to Find: {1:.6f}sec'.format(\n                len(smatch), end))\n\n        # Run serial code concurrently with concurrent.futures\n        workers = 6     # Pool of workers\n        chunks_vs_workers = 30 # A factor of =&gt;14 can provide optimum performance \n        num_of_chunks = chunks_vs_workers * workers\n        start = time()\n        cmatch = self._concurrent_map(nmax, number, workers, num_of_chunks)\n        end = time() - start\n        self.label2.configure(\n            text='Concurrent: Found {0} occurances,  Time to Find: {1:.6f}sec'.format(\n                len(cmatch), end))\n\n    def _findmatch(self, nmin, nmax, number):\n        '''Function to find the occurence of number in range nmin to nmax and return\n           the found occurences in a list.'''\n        start = time()\n        match=[]\n        for n in range(nmin, nmax):\n            if number in str(n): match.append(n)\n        end = time() - start\n        #print(\"\\n def _findmatch {0:&lt;10} {1:&lt;10} {2:&lt;3} found {3:8} in {4:.4f}sec\".\n        #      format(nmin, nmax, number, len(match),end))\n        return match\n\n    def _concurrent_map(self, nmax, number, workers, num_of_chunks):\n        '''Function that utilises concurrent.futures.ProcessPoolExecutor.map to\n           find the occurrences of a given number in a number range in a concurrent\n           manner.'''\n        # 1. Local variables\n        start = time()\n        chunksize = nmax // num_of_chunks\n        #2. Parallelization\n        with cf.ProcessPoolExecutor(max_workers=workers) as executor:\n            # 2.1. Discretise workload and submit to worker pool\n            cstart = (chunksize * i for i in range(num_of_chunks))\n            cstop = (chunksize * i if i != num_of_chunks else nmax\n                     for i in range(1, num_of_chunks + 1))\n            futures = executor.map(self._findmatch, cstart, cstop, repeat(number))\n        end = time() - start\n        print('\\n within statement of def _concurrent_map(nmax, number, workers, num_of_chunks):')\n        print(\"found in {0:.4f}sec\".format(end))\n        return list(chain.from_iterable(futures))\n\n\nif __name__ == '__main__':\n    root = tk.Tk()\n    root.title('App'), root.geometry('550x60')\n    app = App(root)\n    app.grid(row=0, column=0, sticky='nsew')\n\n    root.rowconfigure(0, weight=1)\n    root.columnconfigure(0, weight=1)\n    app.columnconfigure(0, weight=1)\n\n    app.mainloop()\n</code></pre>\n"}, {"tags": ["python", "mongodb", "pymongo"], "comments": [{"owner": {"reputation": 49301, "user_id": 3100115, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/46d2b7e69a0a4a82fefdd01a8cf476bd?s=128&d=identicon&r=PG&f=1", "display_name": "styvane", "link": "https://stackoverflow.com/users/3100115/styvane"}, "edited": false, "score": 0, "creation_date": 1485987779, "post_id": 41989774, "comment_id": 71159054, "body": "You cannot use <code>$exists</code> in <code>$redact</code>"}, {"owner": {"reputation": 61, "user_id": 6430823, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/1d23f36c737c1ebb038e795233ae1b00?s=128&d=identicon&r=PG&f=1", "display_name": "Jack G", "link": "https://stackoverflow.com/users/6430823/jack-g"}, "reply_to_user": {"reputation": 49301, "user_id": 3100115, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/46d2b7e69a0a4a82fefdd01a8cf476bd?s=128&d=identicon&r=PG&f=1", "display_name": "styvane", "link": "https://stackoverflow.com/users/3100115/styvane"}, "edited": false, "score": 0, "creation_date": 1486037445, "post_id": 41989774, "comment_id": 71180006, "body": "thanks, any suggestions on how I can look for last write time exists, or is a number or something like that..."}], "owner": {"reputation": 61, "user_id": 6430823, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/1d23f36c737c1ebb038e795233ae1b00?s=128&d=identicon&r=PG&f=1", "display_name": "Jack G", "link": "https://stackoverflow.com/users/6430823/jack-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 627, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1485983451, "creation_date": 1485983277, "last_edit_date": 1495540393, "question_id": 41989774, "link": "https://stackoverflow.com/questions/41989774/pymongo-with-exists-true-giving-error-unrecognized-expression-exists", "title": "Pymongo with $exists = true giving error. &quot;Unrecognized expression &#39;$exists&#39;&quot;", "body": "<pre><code>db.VibrationData.aggregate([{\n    \"$unwind\": \"$Records\"\n}, {\n    \"$redact\": {\n        \"$cond\": [{\n                \"$anyElementTrue\": {\n                    \"$map\": {\n                        \"input\": \"$Records.Properties\",\n                        \"as\": \"result\",\n                        \"in\": {\n                            \"$and\": [{\n                                \"$eq\": [\"$$result.Property.Name\", \"LastWrite_User\"]\n                            }, {\n                                \"$eq\": [\"$$result.value\", \"42\"]\n                            }]\n                        }\n                    }\n                }\n            },\n            \"$$KEEP\",\n            \"$$PRUNE\"\n        ]\n    }\n}, {\n    \"$unwind\": \"$Records.Properties\"\n}, {\n    \"$match\": {\n        \"Records.Properties.Property.Name\": 'LastWrite_Time'\n    }\n}, {\n    \"$project\": {\n        \"_id\": 0,\n        \"value\": \"$Records.Properties.value\"\n    }\n}])\n</code></pre>\n\n<p>Now im trying to do the same except with the $exists function </p>\n\n<pre><code>LastWrite_Time = coll.aggregate([{\n    \"$unwind\": \"$Records\"\n}, {\n    \"$redact\": {\n        \"$cond\": [{\n                \"$anyElementTrue\": {\n                    \"$map\": {\n                        \"input\": \"$Records.Properties\",\n                        \"as\": \"result\",\n                        \"in\": {\n                            \"$and\": [{\n                                \"$eq\": [\"$$result.Property.Name\", \"LastWrite_Time\"]\n                            }, {\n                                \"$eq\": [\"$$result.value\", {'$exists': True}]\n                            }]\n                        }\n                    }\n                }\n            },\n            \"$$KEEP\",\n            \"$$PRUNE\"\n        ]\n    }\n}, {\n    \"$unwind\": \"$Records.Properties\"\n}, {\n    \"$match\": {\n        \"Records.Properties.Property.Name\": 'LastWrite_Time'\n    }\n}, {\n    \"$project\": {\n        \"_id\": 0,\n        \"value\": \"$Records.Properties.value\"\n    }\n}])\n</code></pre>\n\n<p>However im getting this error</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"C:\\Python_scripts\\SimulationCEI.py\", line 58, in &lt;module&gt;\n    \"value\": \"$Records.Properties.value\"\n  File \"C:\\Python27\\lib\\site-packages\\pymongo\\collection.py\", line 1870, in aggregate\n    collation=collation)\n  File \"C:\\Python27\\lib\\site-packages\\pymongo\\collection.py\", line 232, in _command\n    collation=collation)\n  File \"C:\\Python27\\lib\\site-packages\\pymongo\\pool.py\", line 419, in command\n    collation=collation)\n  File \"C:\\Python27\\lib\\site-packages\\pymongo\\network.py\", line 116, in command\n    parse_write_concern_error=parse_write_concern_error)\n  File \"C:\\Python27\\lib\\site-packages\\pymongo\\helpers.py\", line 210, in _check_command_response\n    raise OperationFailure(msg % errmsg, code, response)\nOperationFailure: Unrecognized expression '$exists'\n</code></pre>\n\n<p>I had a look here\n<a href=\"https://stackoverflow.com/questions/12398625/mongodb-exists-always-returning-0\">mongodb $exists always returning 0</a></p>\n\n<p>and it seems like it should work... Any ideas</p>\n"}, {"tags": ["python", "pandas", "memory-leaks"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1485983735, "post_id": 41989733, "comment_id": 71157106, "body": "If calling <code>gc.collect()</code> frees the memory, then this is perfectly normal and expected behavior. There are some circular references somewhere preventing the ref-counting mechanism from freeing the memory. Just let your program run; if too many unclaimed, claimable objects pile up, the GC will automatically run and clean them up."}, {"owner": {"reputation": 66, "user_id": 7302683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d541d9d5f9d0ea9360a4f9ec4c947d86?s=128&d=identicon&r=PG&f=1", "display_name": "Sacha Vakili", "link": "https://stackoverflow.com/users/7302683/sacha-vakili"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1485984646, "post_id": 41989733, "comment_id": 71157539, "body": "Thanks for your answer. I&#39;ll let the code run, then wait and see. How would you prevent these circular references then?"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1485984804, "post_id": 41989733, "comment_id": 71157609, "body": "That&#39;d have to be done in the Pandas implementation."}], "answers": [{"tags": [], "owner": {"reputation": 66, "user_id": 7302683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d541d9d5f9d0ea9360a4f9ec4c947d86?s=128&d=identicon&r=PG&f=1", "display_name": "Sacha Vakili", "link": "https://stackoverflow.com/users/7302683/sacha-vakili"}, "is_accepted": false, "score": 1, "last_activity_date": 1490349539, "last_edit_date": 1490349539, "creation_date": 1486028388, "answer_id": 41998700, "question_id": 41989733, "link": "https://stackoverflow.com/questions/41989733/memory-leak-when-reading-value-from-a-pandas-dataframe/41998700#41998700", "title": "Memory leak when reading value from a Pandas Dataframe", "body": "<p>Ok, it seems that the actual pain comes from the way <code>df_ind</code> is created. </p>\n\n<p>Using <strong>references</strong> to the original dataframe <code>df</code> seems to work, but might be a little bit risky if we intend to modify \u0300<code>df_ind</code>.</p>\n\n<p>Using <strong>copies</strong> of the original dataframe <code>df</code> triggers a memory leak. There might be some implicit copies of useless elements from <code>df</code>. These copied elements <strong>are not captured by</strong> <code>del</code>, <strong>but are captured by</strong> <code>gc.collect()</code>. This comes with a time cost since this operation takes time.</p>\n\n<p>Here are listed different attempts to solve this memory leak and their results:</p>\n\n<pre><code>df_ind = df                    # Works! Dangerous since df could be modified\n\ndf_ind = copy.copy(df)         # Works! Equivalent to df_ind = df\ndf_ind = df.copy.deepcopy(df)  # Fails.\n\ndf_ind = df.copy(deep=False)   # Works! Equivalent to df_ind = df\ndf_ind = df.copy(deep=True)    # Fails.\n</code></pre>\n\n<p>To sum up:</p>\n\n<ul>\n<li><p>If you <strong>want to modify the temp dataframe</strong>, then <strong>don't use pandas</strong>. You can use dictionaries or zipped lists to get what you want.</p></li>\n<li><p>If you <strong>don't want to modify the temp dataframe</strong>, then <strong>use pandas</strong> with the explicit option <code>df_ind = df.copy(deep=False)</code></p></li>\n</ul>\n"}], "owner": {"reputation": 66, "user_id": 7302683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d541d9d5f9d0ea9360a4f9ec4c947d86?s=128&d=identicon&r=PG&f=1", "display_name": "Sacha Vakili", "link": "https://stackoverflow.com/users/7302683/sacha-vakili"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1042, "favorite_count": 2, "answer_count": 1, "score": 1, "last_activity_date": 1490349539, "creation_date": 1485983128, "question_id": 41989733, "link": "https://stackoverflow.com/questions/41989733/memory-leak-when-reading-value-from-a-pandas-dataframe", "title": "Memory leak when reading value from a Pandas Dataframe", "body": "<p>It seems that pandas triggers a memory leak, when iteritavely copying a value from a dataframe.</p>\n\n<p>At the beginning of each iteration, a dataframe is created by making a copy from the initial dataframe. A second variable is created by copying a single value from the current dataframe.</p>\n\n<p>At the end of each iteration, these two variables are deleted, and the memory used by the current process is printed (at each 1000 iterations). The <a href=\"https://i.stack.imgur.com/JQcsq.png\" rel=\"nofollow noreferrer\">used memory increases</a> !</p>\n\n<p>I think there might be some implicit copy at some point (probably when reading the dataframe value).</p>\n\n<p>A quick fix to this issue results in applying the Garbage Collector at each iteration, but this is quite an expensive solution: the process is at least 10 times slower.</p>\n\n<p>Is there a clear explanation of why this problem occurs?</p>\n\n<pre><code>import os, gc\nimport psutil, pandas as pd\n\nN_ITER = 100000\nDF_SIZE = 10000\n\n# Define the DataFrame\ndf = pd.DataFrame(index=range(DF_SIZE), columns=['my_col'])\ndf['my_col'] = range(DF_SIZE)\n\n\ndef memory_usage():\n    \"\"\"Return the memory usage of the current python process.\"\"\"\n    return psutil.Process(os.getpid()).memory_info().rss / 1024 ** 2\n\n\nif __name__ == '__main__':\n\n    for i in range(N_ITER):\n        df_ind = pd.DataFrame(df.copy())\n        val = df_ind.at[4242, 'my_col']  # The line that provokes the leak!\n\n        del df_ind, val  # Useless\n        # gc.collect()  # Garbage Collector prevents the leak but is slow\n\n        if (i % 1000) == 0:\n            print('Iter {}\\t {} MB'.format(i, int(memory_usage())))\n</code></pre>\n"}, {"tags": ["python", "jython", "python-2.x"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1485983494, "post_id": 41989696, "comment_id": 71156986, "body": "<code>isinstance</code> returned <code>False</code> because you called it on the <code>FooException</code> type, not an instance. You want <code>issubclass</code>."}, {"owner": {"reputation": 170705, "user_id": 44330, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/dd5a7ef1476fb01998a215b1642dfd07?s=128&d=identicon&r=PG", "display_name": "Jason S", "link": "https://stackoverflow.com/users/44330/jason-s"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1485983533, "post_id": 41989696, "comment_id": 71157001, "body": "just figured that out myself, thanks. Fixed!"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1485984208, "post_id": 41989696, "comment_id": 71157309, "body": "Googling <code>jython proxy class</code> turns up <a href=\"http://www.jython.org/javadoc/org/python/core/PyProxy.html\" rel=\"nofollow noreferrer\">a bit of documentation</a>, but not a complete answer. Any answer to this question is going to have to dig into the details and limitations of how Jython implements Java/Python class interoperability."}, {"owner": {"reputation": 11350, "user_id": 1172714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21b9325e81df235c9f3fbadd082ab651?s=128&d=identicon&r=PG", "display_name": "dsh", "link": "https://stackoverflow.com/users/1172714/dsh"}, "edited": false, "score": 0, "creation_date": 1485984771, "post_id": 41989696, "comment_id": 71157592, "body": "Jython creates proxy classes any time a python class subclasses a java class so that it can map between the python and java semantics and handle the differences between python&#39;s multiple-inheritance versus java&#39;s single-inheritance."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "reply_to_user": {"reputation": 11350, "user_id": 1172714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21b9325e81df235c9f3fbadd082ab651?s=128&d=identicon&r=PG", "display_name": "dsh", "link": "https://stackoverflow.com/users/1172714/dsh"}, "edited": false, "score": 0, "creation_date": 1485985085, "post_id": 41989696, "comment_id": 71157733, "body": "@dsh: Why does that have to be a separate class from <code>FooException</code>, though? As someone unfamiliar with Jython&#39;s implementation details, it&#39;s not clear why that functionality couldn&#39;t be folded into <code>FooException</code> directly, rather than injecting a separate class between <code>FooException</code> and <code>java.lang.Exception</code>."}], "owner": {"reputation": 170705, "user_id": 44330, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/dd5a7ef1476fb01998a215b1642dfd07?s=128&d=identicon&r=PG", "display_name": "Jason S", "link": "https://stackoverflow.com/users/44330/jason-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 305, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1485983792, "creation_date": 1485982955, "last_edit_date": 1485983792, "question_id": 41989696, "link": "https://stackoverflow.com/questions/41989696/jython-exceptions-that-subclass-java-lang-exception-have-an-intermediary-proxy-s", "title": "Jython exceptions that subclass java.lang.Exception have an intermediary proxy subclass?", "body": "<p>I wanted to look at the behavior of subclassing a standard Java Exception class in Jython, and I noticed this:</p>\n\n<pre><code>C:\\tmp&gt;java -jar c:\\app\\java\\lib\\jython-standalone-2.5.3.jar\nJython 2.5.3 (2.5:c56500f08d34+, Aug 13 2012, 14:54:35)\n[Java HotSpot(TM) 64-Bit Server VM (Oracle Corporation)] on java1.8.0_91\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; import java.lang.Exception\n&gt;&gt;&gt;\n&gt;&gt;&gt; class FooException(java.lang.RuntimeException):\n...   def __init__(self, n):\n...     super(FooException, self).__init__(\"I am a Foo and my number is %d\" % n)\n...\n&gt;&gt;&gt; def tryit(n):\n...   try:\n...     if n &gt; 3:\n...       raise FooException(n)\n...   except FooException, e:\n...     print \"caught it:\", e\n...     print \"class:              \", e.__class__\n...     print \"base class:         \", e.__class__.__bases__\n...     print \"base of base class: \", e.__class__.__bases__[0].__bases__\n...     print isinstance(e, java.lang.Exception)\n...\n&gt;&gt;&gt; tryit(4)\ncaught it: org.python.proxies.__main__$FooException$0: I am a Foo and my number is 4\nclass:               &lt;class '__main__.FooException'&gt;\nbase class:          (&lt;type 'org.python.proxies.__main__$FooException$0'&gt;,)\nbase of base class:  (&lt;type 'java.lang.RuntimeException'&gt;,)\nTrue\n&gt;&gt;&gt; issubclass(FooException, java.lang.Exception)\nTrue\n</code></pre>\n\n<p><strong>Why the intermediary class?</strong></p>\n\n<p>Same behavior on Jython 2.7.0.</p>\n\n<p>Here's the input code in case anyone wants to try it themselves:</p>\n\n<pre><code>import java.lang.Exception\n\nclass FooException(java.lang.RuntimeException):\n  def __init__(self, n):\n    super(FooException, self).__init__(\"I am a Foo and my number is %d\" % n)\n\ndef tryit(n):\n  try:\n    if n &gt; 3:\n      raise FooException(n)\n  except FooException, e:\n    print \"caught it:\", e\n    print \"class:              \", e.__class__\n    print \"base class:         \", e.__class__.__bases__\n    print \"base of base class: \", e.__class__.__bases__[0].__bases__\n    print isinstance(e, java.lang.Exception)\n\ntryit(4)\nissubclass(FooException, java.lang.Exception)\n</code></pre>\n"}, {"tags": ["python", "arrays", "numpy", "where", "inequality"], "comments": [{"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 6, "creation_date": 1485983078, "post_id": 41989684, "comment_id": 71156783, "body": "Try <code>np.where(~np.isclose(array1 , array2))</code> to account for being floating pt values?"}, {"owner": {"reputation": 1283, "user_id": 4599066, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d3b3ebaa6cb7900a39e4f71879f5c64a?s=128&d=identicon&r=PG&f=1", "display_name": "ChristineB", "link": "https://stackoverflow.com/users/4599066/christineb"}, "reply_to_user": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 0, "creation_date": 1485983286, "post_id": 41989684, "comment_id": 71156891, "body": "This returned no entries. Does the ~ mean finding where values between the two arrays are NOT close?"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 6, "creation_date": 1485983366, "post_id": 41989684, "comment_id": 71156922, "body": "Floating-point rounding and imprecise input data mean that values that would be equal in exact arithmetic aren&#39;t always exactly equal in floating point math. Comparing floating-point values for exact equality is rarely the correct thing to do."}, {"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 3, "creation_date": 1485983399, "post_id": 41989684, "comment_id": 71156942, "body": "Basically <code>np.isclose()</code> replaces <code>==</code> and thus <code>~np.isclose()</code> replaces your <code>!=</code> but allows for some tolerance as is needed for most floating pt number comparisons."}, {"owner": {"reputation": 1283, "user_id": 4599066, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d3b3ebaa6cb7900a39e4f71879f5c64a?s=128&d=identicon&r=PG&f=1", "display_name": "ChristineB", "link": "https://stackoverflow.com/users/4599066/christineb"}, "edited": false, "score": 0, "creation_date": 1485983568, "post_id": 41989684, "comment_id": 71157017, "body": "Okay, thanks! Look like I have some arithmetic debugging to do..."}], "owner": {"reputation": 1283, "user_id": 4599066, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d3b3ebaa6cb7900a39e4f71879f5c64a?s=128&d=identicon&r=PG&f=1", "display_name": "ChristineB", "link": "https://stackoverflow.com/users/4599066/christineb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 598, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1485982892, "creation_date": 1485982892, "question_id": 41989684, "link": "https://stackoverflow.com/questions/41989684/why-doesnt-np-where-work-here", "title": "Why doesn&#39;t np.where() work here?", "body": "<p><strong>The issue</strong></p>\n\n<p>I have two large lat-lon arrays that appear to have the exact same values after a difference calculation loop I put them through, even though they shouldn't. To find out if there were any entries between the two arrays that weren't equal, I used an <code>np.where()</code> statement. However, the return doesn't seem to be giving me what I'm asking for. That is, it's giving me entries where the values ARE equal, exactly the opposite of what I asked for.</p>\n\n<p><strong>The code</strong></p>\n\n<p>First I created a small example to see how the function works...</p>\n\n<pre><code>test1 = np.array([[1,2,3,4,5],[2,4,6,8,10]])\ntest2 = np.array([[1,2,3,4,6],[1,4,6,8,9]])\nprint np.where(test1 != test2)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>(array([0, 1, 1]), array([4, 0, 4]))\n</code></pre>\n\n<p>Okay, that makes sense. The entries at <code>[0,4]</code>, <code>[1,0]</code>, and <code>[1,4]</code> all have non-matching values. I then tried the same command on my arrays, which both have a size of <code>[120,192,288,40]</code>.</p>\n\n<pre><code>print np.where(array1 != array2)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>(array([  0,   0,   0, ..., 119, 119, 119]), array([  0,   0,   0, ..., 191, 191, 191]), array([  0,   2,   2, ..., 287, 287, 287]), array([ 6,  0,  1, ..., 37, 38, 39]))\n</code></pre>\n\n<p>That's a lot of entries. I checked a couple entries, just the first and last, to see what the non-matching values were.</p>\n\n<pre><code>print array1[0,0,0,6], array2[0,0,0,6]\nprint array1[119,191,287,39], array2[119,191,287,39]\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>-0.0712321083736 -0.0712321083736\n0.0709354614045 0.0709354614045\n</code></pre>\n\n<p>The entries <code>np.where()</code> gave me contain equal values for both arrays, even though I asked for entries where the values are NOT equal. I even checked an entry not included in <code>np.where</code>'s return to see if somehow it got confused.</p>\n\n<pre><code>print array1[0,0,0,5], array1[0,0,0,5]\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>0.0185121137892 0.0185121137892\n</code></pre>\n\n<p>Still equal. <code>np.where</code>'s not only giving me entries where the values are equal; it's giving me only some of those entries and ignoring others.</p>\n\n<p><strong>The question</strong></p>\n\n<p>Why did <code>np.where()</code> work for the test, but it doesn't seem to work for the actual data? Is it a problem with numpy, or my data?</p>\n"}, {"tags": ["python", "python-3.x", "loops"], "answers": [{"tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": true, "score": 1, "last_activity_date": 1485982813, "creation_date": 1485982813, "answer_id": 41989665, "question_id": 41989631, "link": "https://stackoverflow.com/questions/41989631/python-create-file-if-file-does-not-exist-in-list/41989665#41989665", "title": "Python: create file if file does not exist in list", "body": "<p>You could just unindent your <code>else</code> block so it applies to <code>for</code>:</p>\n\n<pre><code>for file in files:\n    if m.search(file):\n        return True\nelse:\n    self.writeFile()\n</code></pre>\n\n<p>note that in that case it's not as interesting as with the <code>break</code> case, you could simply write:</p>\n\n<pre><code>for file in files:\n    if m.search(file):\n        return True\nself.writeFile()\n</code></pre>\n\n<p>since if pattern matches it returns so <code>writeFile</code> is not reached.</p>\n"}, {"tags": [], "owner": {"reputation": 249903, "user_id": 2422776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2353050223ebecb113741c29458de4b2?s=128&d=identicon&r=PG", "display_name": "Mureinik", "link": "https://stackoverflow.com/users/2422776/mureinik"}, "is_accepted": false, "score": 1, "last_activity_date": 1485982847, "creation_date": 1485982847, "answer_id": 41989672, "question_id": 41989631, "link": "https://stackoverflow.com/questions/41989631/python-create-file-if-file-does-not-exist-in-list/41989672#41989672", "title": "Python: create file if file does not exist in list", "body": "<p>You could move out writing the file to after all the checks are exhausted:</p>\n\n<pre><code>m = re.compile(r'(ts|js)config.json$')\nfor file in files:\n    if m.search(file):\n        return True\n\nself.writeFile()\n</code></pre>\n"}], "owner": {"reputation": 6481, "user_id": 2055617, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be834f0968111acbbc6f3bf67041c8d5?s=128&d=identicon&r=PG", "display_name": "mhartington", "link": "https://stackoverflow.com/users/2055617/mhartington"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 41989665, "answer_count": 2, "score": 1, "last_activity_date": 1486010983, "creation_date": 1485982673, "last_edit_date": 1486010983, "question_id": 41989631, "link": "https://stackoverflow.com/questions/41989631/python-create-file-if-file-does-not-exist-in-list", "title": "Python: create file if file does not exist in list", "body": "<p>I'm getting a list of files in a project, which can all range from <code>src/app.ts</code> to <code>src/component/app/app.ts</code>. What I'm looking to do is:</p>\n\n<ul>\n<li>loop over each file in the list, </li>\n<li>see if it matches a pattern of a specific config, </li>\n<li>and if the file does not exist, write it to disk. </li>\n</ul>\n\n<p>Currently I have:</p>\n\n<pre><code>m = re.compile(r'(ts|js)config.json$')\nfor file in files:\n    if m.search(file):\n        return True\n    else:\n        self.writeFile()\n</code></pre>\n\n<p>Which works, but it calls write multiple times when there is not match.\nHow would I only call write after the checks are done? </p>\n"}, {"tags": ["python", "gradle", "pypi", "pygradle"], "comments": [{"owner": {"reputation": 34672, "user_id": 135946, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/cbXyr.jpg?s=128&g=1", "display_name": "Bostone", "link": "https://stackoverflow.com/users/135946/bostone"}, "edited": false, "score": 0, "creation_date": 1486149432, "post_id": 41989587, "comment_id": 71237370, "body": "There&#39;s an active discussion about this at <a href=\"https://github.com/linkedin/pygradle/issues/111\" rel=\"nofollow noreferrer\">github.com/linkedin/pygradle/issues/111</a>"}, {"owner": {"reputation": 34672, "user_id": 135946, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/cbXyr.jpg?s=128&g=1", "display_name": "Bostone", "link": "https://stackoverflow.com/users/135946/bostone"}, "edited": false, "score": 0, "creation_date": 1486149693, "post_id": 41989587, "comment_id": 71237508, "body": "More on inability to use PyPi here: <a href=\"https://github.com/linkedin/pygradle#pypi-artifacts\" rel=\"nofollow noreferrer\">github.com/linkedin/pygradle#pypi-artifacts</a>"}], "answers": [{"tags": [], "owner": {"reputation": 34672, "user_id": 135946, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/cbXyr.jpg?s=128&g=1", "display_name": "Bostone", "link": "https://stackoverflow.com/users/135946/bostone"}, "is_accepted": true, "score": 2, "last_activity_date": 1486493015, "creation_date": 1486493015, "answer_id": 42097526, "question_id": 41989587, "link": "https://stackoverflow.com/questions/41989587/using-pypi-official-repo-with-pygradle/42097526#42097526", "title": "Using PyPi official repo with pygradle", "body": "<p>The short answer - according to documentation direct import from PyPi is not supported. There's a pivy-importer utility that is capable of pulling packages from PiPy into the local Ivy repo but it is also pulling some default packages and needs to be extended (manually) to pull packages that you may need.\nThis is as I understand a work in progress and may be improved as project matures</p>\n"}], "owner": {"reputation": 34672, "user_id": 135946, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/cbXyr.jpg?s=128&g=1", "display_name": "Bostone", "link": "https://stackoverflow.com/users/135946/bostone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1125, "favorite_count": 0, "accepted_answer_id": 42097526, "answer_count": 1, "score": 5, "last_activity_date": 1486493015, "creation_date": 1485982494, "last_edit_date": 1486149599, "question_id": 41989587, "link": "https://stackoverflow.com/questions/41989587/using-pypi-official-repo-with-pygradle", "title": "Using PyPi official repo with pygradle", "body": "<p>I'm trying to build and install my python library using new <a href=\"https://github.com/linkedin/pygradle\" rel=\"noreferrer\">PyGradle plugin</a> from LinkedIn. I immediately run into problems because the <a href=\"https://linkedin.jfrog.io/linkedin/pypi-external/pypi/\" rel=\"noreferrer\">the demo repo</a> is very limited</p>\n\n<pre><code>repositories {\n    pyGradlePyPi()\n}\n</code></pre>\n\n<p>I would like to be able to pull dependencies from the official pypi.python.org repo but to my surprise there's no mention of it in the documentation I was able to dig out from the PyGradle's GitHub site. Is it possible at all and if not what can I do?</p>\n\n<p>P.S. Based on the pygradle documentation there is no direct way of using PyPi repo since it utilizes Ivy to do the actual dependence management. It would be great to get an \"official\" tutorial on how to setup local and Artifactory-based repos and import needed packages</p>\n"}, {"tags": ["python", "parsing", "tensorflow"], "comments": [{"owner": {"reputation": 3071, "user_id": 6392807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d22f8ef1f71b37fe6522255d8b3dcc8?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Hawkins", "link": "https://stackoverflow.com/users/6392807/peter-hawkins"}, "edited": false, "score": 0, "creation_date": 1486071397, "post_id": 41989585, "comment_id": 71201037, "body": "The parsing of <code>FixedLenFeature</code> enforces that the feature has the correct number of elements; it will issue an error if there is a mismatch with the data."}, {"owner": {"reputation": 117, "user_id": 4040030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PX5ck.jpg?s=128&g=1", "display_name": "The_Chicken_Lord", "link": "https://stackoverflow.com/users/4040030/the-chicken-lord"}, "reply_to_user": {"reputation": 3071, "user_id": 6392807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d22f8ef1f71b37fe6522255d8b3dcc8?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Hawkins", "link": "https://stackoverflow.com/users/6392807/peter-hawkins"}, "edited": false, "score": 0, "creation_date": 1486215611, "post_id": 41989585, "comment_id": 71255431, "body": "Ok, so why am I allowed to use and empty shape ([ ]) in some cases but not in others?"}, {"owner": {"reputation": 3071, "user_id": 6392807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d22f8ef1f71b37fe6522255d8b3dcc8?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Hawkins", "link": "https://stackoverflow.com/users/6392807/peter-hawkins"}, "edited": false, "score": 0, "creation_date": 1486395327, "post_id": 41989585, "comment_id": 71314354, "body": "Can you show the example where the empty shape is allowed? (The empty shape is a legal shape; it means &quot;scalar&quot;.)"}], "owner": {"reputation": 117, "user_id": 4040030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PX5ck.jpg?s=128&g=1", "display_name": "The_Chicken_Lord", "link": "https://stackoverflow.com/users/4040030/the-chicken-lord"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1181, "favorite_count": 1, "answer_count": 0, "score": 3, "last_activity_date": 1485985979, "creation_date": 1485982492, "last_edit_date": 1485985979, "question_id": 41989585, "link": "https://stackoverflow.com/questions/41989585/output-tensor-wrong-shape-when-parsing-tfrecord", "title": "Output Tensor Wrong Shape When Parsing TFRecord", "body": "<p>When I attempt to parse a TFRecord file I am getting the following error:</p>\n\n<pre><code>(&lt;tf.Tensor 'ParseSingleExample/Squeeze_tokens:0' shape=() dtype=int64&gt;, &lt;tf.Tensor 'ParseSingleExample/Squeeze_labels:0' shape=() dtype=int64&gt;)\nW tensorflow/core/framework/op_kernel.cc:940] Invalid argument: Name: &lt;unknown&gt;, Key: tokens, Index: 0.  Number of int64 values != expected.  values size: 5 but output shape: []\n</code></pre>\n\n<p>As far as I can tell the line error implies that the output tensor is the wrong shape. I have been following the information <a href=\"https://www.tensorflow.org/how_tos/reading_data/\" rel=\"nofollow noreferrer\">here</a> for the most part. Under the heading <strong>Standard TensorFlow format</strong> it lists two github links that both encode and parse the mnist dataset. In the file that performs the parsing there is no reference to setting the output tensors shape as far as I can tell. I'm not sure how to correct this and I have tried everything I can think of. I have included my code below. </p>\n\n<pre><code>import tensorflow as tf\nimport tempfile\nimport os\n\ndef make_example(sequence, label):\n    #converts a sequence and its labels into a SequenceExample\n\n    # The object we return\n    ex = tf.train.Example()\n    # Feature lists for the two sequential features of our example\n    fl_tokens = ex.features.feature[\"tokens\"]\n    fl_labels = ex.features.feature[\"labels\"]\n    for token in sequence:\n        fl_tokens.int64_list.value.append(token)\n\n    fl_labels.int64_list.value.append(label)\n\n    return ex\n\ndef parse_example(filename_queue):\n    #reads a TFRecord into its constituent parts\n\n    reader = tf.TFRecordReader()\n    _, example = reader.read(filename_queue)\n\n    # Parse the example\n    sequence_parsed = tf.parse_single_example(\n        serialized=example,\n        features={\n            \"tokens\": tf.FixedLenFeature([], dtype=tf.int64),\n            \"labels\": tf.FixedLenFeature([], dtype=tf.int64)\n        }\n    )\n\n    return sequence_parsed[\"tokens\"], sequence_parsed[\"labels\"]\n\nif __name__ == '__main__':\n    sequence = [1,2,3,4,5]\n    label = 1\n    #################################\n    # Write all examples into a TFRecords file\n    #################################\n    with tempfile.NamedTemporaryFile(dir=\".\") as fp:\n        writer = tf.python_io.TFRecordWriter(fp.name)\n\n        ex = make_example(sequence, label)\n        writer.write(ex.SerializeToString())\n        writer.close()\n\n        #################################\n        # Read contents of TFRecord file\n        #################################\n\n        filename = os.path.join(os.getcwd(), fp.name)\n        filename_queue = tf.train.string_input_producer([filename])\n\n        with tf.Session() as sess:\n            coord = tf.train.Coordinator()\n            tf.train.start_queue_runners(coord=coord)\n            out_sequence, out_label = parse_example(filename_queue)\n\n\n            # Print the contents of a single entry:\n            v1,v2 = sess.run([out_sequence, out_label])\n            print(v1,v2)\n</code></pre>\n\n<p>--</p>\n\n<p>EDIT: So I figured out that I can get rid of the error and have things work by changing the line </p>\n\n<pre><code>\"tokens\": tf.FixedLenFeature([], dtype=tf.int64)\n</code></pre>\n\n<p>to </p>\n\n<pre><code>\"tokens\": tf.FixedLenFeature([5], dtype=tf.int64)\n</code></pre>\n\n<p>This forces the shape of the output tensor. I'm still unclear why I need to specify this for the case I have presented while the example in the tensorflow directions does not. If someone could clarify I'd greatly appreciate it.</p>\n"}, {"tags": ["python", "rpy2", "predict", "gam", "mgcv"], "answers": [{"tags": [], "owner": {"reputation": 10688, "user_id": 294017, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8e5422a173711c086b685140dbc498fe?s=128&d=identicon&r=PG", "display_name": "lgautier", "link": "https://stackoverflow.com/users/294017/lgautier"}, "is_accepted": false, "score": 2, "last_activity_date": 1569276481, "last_edit_date": 1569276481, "creation_date": 1486151330, "answer_id": 42031957, "question_id": 41989547, "link": "https://stackoverflow.com/questions/41989547/unable-to-find-predict-in-the-mgcv-package-when-using-rpy2/42031957#42031957", "title": "Unable to find predict in the mgcv package when using rpy2", "body": "<p>As the error says:</p>\n\n<pre><code>NameError: name 'predict' is not defined\n</code></pre>\n\n<p><code>predict</code> is not found in the namespace <code>r_mgcv</code>.</p>\n\n<p>Check how to find where (in which package / namespace) an R symbol is defined here:</p>\n\n<p><a href=\"https://rpy2.github.io/doc/v3.1.x/html/robjects_rpackages.html#finding-where-an-r-symbol-is-coming-from\" rel=\"nofollow noreferrer\">https://rpy2.github.io/doc/v3.1.x/html/robjects_rpackages.html#finding-where-an-r-symbol-is-coming-from</a></p>\n"}], "owner": {"reputation": 119, "user_id": 7502624, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/9438b538ece9d331e37b89d7e3a610de?s=128&d=identicon&r=PG&f=1", "display_name": "P Ved", "link": "https://stackoverflow.com/users/7502624/p-ved"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 342, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1569276481, "creation_date": 1485982358, "last_edit_date": 1485984127, "question_id": 41989547, "link": "https://stackoverflow.com/questions/41989547/unable-to-find-predict-in-the-mgcv-package-when-using-rpy2", "title": "Unable to find predict in the mgcv package when using rpy2", "body": "<p>I am using rpy2 to communicate with mgcv pkg, to get a gam prediction.</p>\n\n<p>I am able to get a gam fit by using the mgcv pkg, however when I try to use the predict method, it errors out with the error:</p>\n\n<blockquote>\n  <p>NameError: name 'predict' is not defined</p>\n</blockquote>\n\n<p>Following is my code.</p>\n\n<pre><code>import pandas as pd \nimport numpy as np\nfrom rpy2.robjects.packages import importr\nimport rpy2.robjects as ro\nimport pandas.rpy.common as com\nfrom rpy2.robjects import pandas2ri\n\npandas2ri.activate()\nr_mgcv = importr('mgcv')\nbase = importr('base')\n\nMainDt = pd.read_csv(FileLocation, header=0)\nR_MainDF = com.convert_to_r_dataframe(MainDt)\n\nmodparams = \"PGOOD ~ \"\n\nfor c in R_MainDF.colnames:\n    if 'RAW' in str(c):\n        modparams += \" s (`\" + c + \"`) + \" \n\nmodparams = str(modparams)[:-2]\ngamFit = r_mgcv.gam(ro.Formula(modparams), data=R_MainDF)\n</code></pre>\n\n<p>The lines below error out:</p>\n\n<pre><code>eolPred= r_mgcv.predict(gamFit,newdata=R_MainDF, type=\"terms\")\nr_mgcv.matrix(ro.NA_Character,base.nrow(R_MainDF), base.ncol(R_MainDF)-2)\n</code></pre>\n\n<p>What am I doing wrong ?</p>\n"}, {"tags": ["python", "machine-learning", "nltk", "part-of-speech"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 2, "creation_date": 1485984143, "post_id": 41989543, "comment_id": 71157282, "body": "what is <code>type(test)</code>? Also, please do <i>not</i> post screen-shots of code. Copy and paste the code into your question <i>as text</i>."}], "answers": [{"tags": [], "owner": {"reputation": 713, "user_id": 1484481, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3cd050469d0dc673111d90be0c44e820?s=128&d=identicon&r=PG", "display_name": "Prophecies", "link": "https://stackoverflow.com/users/1484481/prophecies"}, "is_accepted": false, "score": 1, "last_activity_date": 1485985298, "creation_date": 1485985298, "answer_id": 41990310, "question_id": 41989543, "link": "https://stackoverflow.com/questions/41989543/python-how-do-you-use-the-tags-from-pos-tag-nltk/41990310#41990310", "title": "Python - How do you use the tags from pos_tag (NLTK)?", "body": "<p>In your example, <code>test</code> returns a list so correct way to check if it contains 'VBG' or any other POS is to index the list. Again, in your case, you'd want to do <code>if 'VBG' in test[0]</code>. For a list of words, you can do something like this.</p>\n\n<pre><code>import nltk\nwords = ['doing','cat','blue']\ntags = nltk.pos_tag(words)\nfor idx,word in enumerate(words):\n    if 'VBG' in tags[idx]:\n        print word + ' is a VBG'\n</code></pre>\n\n<p>PS: Please acquaint yourselves with the etiquette of stack overflow before posting a question.</p>\n"}], "owner": {"reputation": 19, "user_id": 7502382, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Sv2lZaFrJ0o/AAAAAAAAAAI/AAAAAAAAAT4/tMQOmogCfz0/photo.jpg?sz=128", "display_name": "Lemon", "link": "https://stackoverflow.com/users/7502382/lemon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1485988008, "creation_date": 1485982344, "last_edit_date": 1485988008, "question_id": 41989543, "link": "https://stackoverflow.com/questions/41989543/python-how-do-you-use-the-tags-from-pos-tag-nltk", "title": "Python - How do you use the tags from pos_tag (NLTK)?", "body": "<p>I have been trying to figure out how to use the 'tagged' results from part of speech tagging. Currently I have this test code:<br></p>\n\n<p><img src=\"https://i.stack.imgur.com/nSJdd.png\" alt=\"click to view\"></p>\n\n<p>When I run it, it returns with this:<br></p>\n\n<p><img src=\"https://i.stack.imgur.com/qduzE.png\" alt=\"click to view\"></p>\n\n<p>This is all fine. But I want to be able to use this result and I don't know how to. How can I check if the 'test' variable contains the 'VBG' tag? Is there a way to check the values of 'test'? I tried doing something like this:<br><br></p>\n\n<pre><code>if 'VBG' in test: \n   print ('success')\nelse:\n    print('Nope')\n    print(test)\n</code></pre>\n\n<p>But this doesn't do anything. How do you find if a word/ string/ attribute is in the result of 'test'? Thanks.</p>\n"}, {"tags": ["python", "django", "python-3.x", "django-models", "django-queryset"], "answers": [{"comments": [{"owner": {"reputation": 8926, "user_id": 337806, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/mQ5M4.jpg?s=128&g=1", "display_name": "dcolumbus", "link": "https://stackoverflow.com/users/337806/dcolumbus"}, "edited": false, "score": 0, "creation_date": 1485982641, "post_id": 41989602, "comment_id": 71156516, "body": "Just updated my question. I need to be able to send a complete data set to a view to loop over."}, {"owner": {"reputation": 428, "user_id": 6855686, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-sVeHLWQSvVI/AAAAAAAAAAI/AAAAAAAAAZQ/LKXu5xiecl8/photo.jpg?sz=128", "display_name": "Juan D. G&#243;mez", "link": "https://stackoverflow.com/users/6855686/juan-d-g%c3%b3mez"}, "reply_to_user": {"reputation": 8926, "user_id": 337806, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/mQ5M4.jpg?s=128&g=1", "display_name": "dcolumbus", "link": "https://stackoverflow.com/users/337806/dcolumbus"}, "edited": false, "score": 0, "creation_date": 1485982725, "post_id": 41989602, "comment_id": 71156575, "body": "with a view you mean a template (HTML) file?"}, {"owner": {"reputation": 8926, "user_id": 337806, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/mQ5M4.jpg?s=128&g=1", "display_name": "dcolumbus", "link": "https://stackoverflow.com/users/337806/dcolumbus"}, "edited": false, "score": 0, "creation_date": 1485983104, "post_id": 41989602, "comment_id": 71156795, "body": "Oh wow ... that&#39;s... incredible, actually. I had no idea. But can you use <code>.first</code> from the template as well?"}, {"owner": {"reputation": 428, "user_id": 6855686, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-sVeHLWQSvVI/AAAAAAAAAAI/AAAAAAAAAZQ/LKXu5xiecl8/photo.jpg?sz=128", "display_name": "Juan D. G&#243;mez", "link": "https://stackoverflow.com/users/6855686/juan-d-g%c3%b3mez"}, "reply_to_user": {"reputation": 8926, "user_id": 337806, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/mQ5M4.jpg?s=128&g=1", "display_name": "dcolumbus", "link": "https://stackoverflow.com/users/337806/dcolumbus"}, "edited": false, "score": 0, "creation_date": 1485983254, "post_id": 41989602, "comment_id": 71156876, "body": "You&#39;re right, I&#39;ve updated my answer due to an error (I wasn&#39;t adding the <code>.all</code> attribute). You can use <code>camera.cameralog_set.first</code> and <code>camera.cameralog_set.last</code> as well"}, {"owner": {"reputation": 428, "user_id": 6855686, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-sVeHLWQSvVI/AAAAAAAAAAI/AAAAAAAAAZQ/LKXu5xiecl8/photo.jpg?sz=128", "display_name": "Juan D. G&#243;mez", "link": "https://stackoverflow.com/users/6855686/juan-d-g%c3%b3mez"}, "reply_to_user": {"reputation": 8926, "user_id": 337806, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/mQ5M4.jpg?s=128&g=1", "display_name": "dcolumbus", "link": "https://stackoverflow.com/users/337806/dcolumbus"}, "edited": false, "score": 0, "creation_date": 1485983372, "post_id": 41989602, "comment_id": 71156927, "body": "Thanks for accepting my answer. If you want to upvote it, also would be great. :)"}, {"owner": {"reputation": 8926, "user_id": 337806, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/mQ5M4.jpg?s=128&g=1", "display_name": "dcolumbus", "link": "https://stackoverflow.com/users/337806/dcolumbus"}, "edited": false, "score": 0, "creation_date": 1485983594, "post_id": 41989602, "comment_id": 71157030, "body": "Sorry, I&#39;m getting <code>&#39;CameraLog&#39; object is not iterable</code>"}], "tags": [], "owner": {"reputation": 428, "user_id": 6855686, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-sVeHLWQSvVI/AAAAAAAAAAI/AAAAAAAAAZQ/LKXu5xiecl8/photo.jpg?sz=128", "display_name": "Juan D. G&#243;mez", "link": "https://stackoverflow.com/users/6855686/juan-d-g%c3%b3mez"}, "is_accepted": false, "score": 0, "last_activity_date": 1485983105, "last_edit_date": 1485983105, "creation_date": 1485982551, "answer_id": 41989602, "question_id": 41989486, "link": "https://stackoverflow.com/questions/41989486/django-get-all-objects-and-the-first-record-of-a-related-model/41989602#41989602", "title": "Django: Get all objects and the first record of a related model", "body": "<p>You just need to do the following:</p>\n\n<pre><code>cameras = Camera.objects.all()\nlast_logs = [camera.cameralog_set.last for camera in cameras]\n</code></pre>\n\n<p>In other words your Camera's CameraLog(s) are already set, and you access to them using <code>cameralog_set</code> attribute.</p>\n\n<p>Remember that you can access to related fields using <code>&lt;relatedfieldname&gt;_set</code> and to all elements with <code>.all()</code>, the first with <code>.first()</code> and the last with <code>.last()</code></p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>From your template you can do exactly the same</p>\n\n<pre><code>{% for camera in cameras %}\n    #show camera info\n    {% for log in camera.cameralog_set.all %}\n        # show camera log info\n    {% endfor %}\n{% endfor %}\n</code></pre>\n\n<p>So, you only need to pass the <code>cameras</code> variable to the template</p>\n"}, {"comments": [{"owner": {"reputation": 8926, "user_id": 337806, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/mQ5M4.jpg?s=128&g=1", "display_name": "dcolumbus", "link": "https://stackoverflow.com/users/337806/dcolumbus"}, "edited": false, "score": 0, "creation_date": 1485983732, "post_id": 41989747, "comment_id": 71157104, "body": "I like this idea, for sure. The inner loop doesn&#39;t look complete?"}, {"owner": {"reputation": 3733, "user_id": 577360, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iPZBi.jpg?s=128&g=1", "display_name": "Bipul Jain", "link": "https://stackoverflow.com/users/577360/bipul-jain"}, "reply_to_user": {"reputation": 8926, "user_id": 337806, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/mQ5M4.jpg?s=128&g=1", "display_name": "dcolumbus", "link": "https://stackoverflow.com/users/337806/dcolumbus"}, "edited": false, "score": 0, "creation_date": 1485983780, "post_id": 41989747, "comment_id": 71157123, "body": "There is no inner loop. Updated."}], "tags": [], "owner": {"reputation": 3733, "user_id": 577360, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iPZBi.jpg?s=128&g=1", "display_name": "Bipul Jain", "link": "https://stackoverflow.com/users/577360/bipul-jain"}, "is_accepted": true, "score": 2, "last_activity_date": 1485983767, "last_edit_date": 1485983767, "creation_date": 1485983187, "answer_id": 41989747, "question_id": 41989486, "link": "https://stackoverflow.com/questions/41989486/django-get-all-objects-and-the-first-record-of-a-related-model/41989747#41989747", "title": "Django: Get all objects and the first record of a related model", "body": "<p>You can create a model property like this . </p>\n\n<pre><code>class Camera(models.Model):\n     fields = models.Fields()\n\n     @property\n     def last_log(self):\n          return self.cameralog_set.first()\n</code></pre>\n\n<p>Now in your templates:</p>\n\n<pre><code>{% for camera in cameras %}\n    #show camera info\n    {{ camera.last_log }}\n    # show camera log info\n\n{% endfor %}\n</code></pre>\n\n<p>You can also use prefetch_related and use django Prefetch() to specify queryset to do this very optimally. </p>\n"}, {"tags": [], "owner": {"reputation": 175, "user_id": 6599471, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-wrHTcdyUax4/AAAAAAAAAAI/AAAAAAAAABY/l6_3v3bc2zE/photo.jpg?sz=128", "display_name": "hassan", "link": "https://stackoverflow.com/users/6599471/hassan"}, "is_accepted": false, "score": 0, "last_activity_date": 1486118789, "last_edit_date": 1486118789, "creation_date": 1485983664, "answer_id": 41989872, "question_id": 41989486, "link": "https://stackoverflow.com/questions/41989486/django-get-all-objects-and-the-first-record-of-a-related-model/41989872#41989872", "title": "Django: Get all objects and the first record of a related model", "body": "<p>I think you can get all cameralog related to a particular camera from that camera instance itself if you define your models well. </p>\n\n<p>So for example, if you have your models defined like this:</p>\n\n<pre><code>from django.db import models\n\nclass Camera(models.Model):\n    name = models.CharField()\n\nclass CameraLogs(models.Model):\n    cameralog = models.ForeignKey(\n        Camera, related_name='cameralogs')\n</code></pre>\n\n<p>So, if you have a particular camera instance equal to camera, saying <code>camera.cameralogs.all()</code> should return all cameralogs belonging to that camera instance. You can read more on Django many-to-one relationships here <a href=\"https://docs.djangoproject.com/en/1.10/topics/db/examples/many_to_one/\" rel=\"nofollow noreferrer\">https://docs.djangoproject.com/en/1.10/topics/db/examples/many_to_one/</a></p>\n"}], "owner": {"reputation": 8926, "user_id": 337806, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/mQ5M4.jpg?s=128&g=1", "display_name": "dcolumbus", "link": "https://stackoverflow.com/users/337806/dcolumbus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2939, "favorite_count": 0, "accepted_answer_id": 41989747, "answer_count": 3, "score": 0, "last_activity_date": 1486118789, "creation_date": 1485982168, "last_edit_date": 1485982620, "question_id": 41989486, "link": "https://stackoverflow.com/questions/41989486/django-get-all-objects-and-the-first-record-of-a-related-model", "title": "Django: Get all objects and the first record of a related model", "body": "<p>Initially I was just grabbing all <code>camera</code> models:</p>\n\n<pre><code>cameras = Camera.objects.all()\nreturn render(request, 'myapp/cameras.html', {'content': cameras})\n</code></pre>\n\n<p>But I now need to also include the latest record of <code>CameraLog</code> for each <code>Camera</code> that is called in the statement above. <code>CameraLog</code> has a foreign key for the <code>Camera</code> it's associated with.</p>\n\n<p>I need to pass these cameras to a view, so I need to be able to loop over not only the <code>Camera</code> data, but the <code>CameraLog</code> log as well.</p>\n\n<p>I'm pretty new to Python, so I'm sure this is an easy modification for you guys...</p>\n\n<pre><code>cameras = Camera.objects.all( and also the latest CameraLog )\n</code></pre>\n"}, {"tags": ["python", "list-comprehension"], "comments": [{"owner": {"reputation": 209114, "user_id": 1427416, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/QWHKg.png?s=128&g=1", "display_name": "BrenBarn", "link": "https://stackoverflow.com/users/1427416/brenbarn"}, "edited": false, "score": 0, "creation_date": 1485982270, "post_id": 41989482, "comment_id": 71156291, "body": "<a href=\"https://docs.python.org/2/library/itertools.html#itertools.product\" rel=\"nofollow noreferrer\"><code>itertools.product</code></a>."}], "answers": [{"tags": [], "owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "is_accepted": false, "score": 1, "last_activity_date": 1485982355, "creation_date": 1485982355, "answer_id": 41989546, "question_id": 41989482, "link": "https://stackoverflow.com/questions/41989482/python-nested-list-comprehension-for-arbitrary-number-of-variables/41989546#41989546", "title": "python nested list comprehension for arbitrary number of variables", "body": "<p>Use <code>product</code> from <code>itertools</code>:</p>\n\n<pre><code>In [3]: import itertools\n\nIn [4]: dims = (2, 3, 4)\n\nIn [5]: for idx in itertools.product(*map(range, dims)):\n    ...:     print(idx)\n    ...:\n(0, 0, 0)\n(0, 0, 1)\n(0, 0, 2)\n(0, 0, 3)\n(0, 1, 0)\n(0, 1, 1)\n(0, 1, 2)\n(0, 1, 3)\n(0, 2, 0)\n(0, 2, 1)\n(0, 2, 2)\n(0, 2, 3)\n(1, 0, 0)\n(1, 0, 1)\n(1, 0, 2)\n(1, 0, 3)\n(1, 1, 0)\n(1, 1, 1)\n(1, 1, 2)\n(1, 1, 3)\n(1, 2, 0)\n(1, 2, 1)\n(1, 2, 2)\n(1, 2, 3)\n</code></pre>\n\n<p>As for dealing with the strings, there are many ways. Here is a quick and dirty way:</p>\n\n<pre><code>In [6]: def block_me(n):\n    ...:     return \"[\" + str(n) + \"]\"\n    ...:\n\nIn [7]: for idx in itertools.product(*map(range, dims)):\n    ...:     print(\"\".join([block_me(i) for i in idx]))\n    ...:\n[0][0][0]\n[0][0][1]\n[0][0][2]\n[0][0][3]\n[0][1][0]\n[0][1][1]\n[0][1][2]\n[0][1][3]\n[0][2][0]\n[0][2][1]\n[0][2][2]\n[0][2][3]\n[1][0][0]\n[1][0][1]\n[1][0][2]\n[1][0][3]\n[1][1][0]\n[1][1][1]\n[1][1][2]\n[1][1][3]\n[1][2][0]\n[1][2][1]\n[1][2][2]\n[1][2][3]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 13815, "user_id": 6575931, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-CumJFhlEBdA/AAAAAAAAAAI/AAAAAAAAi5U/sqexnazvXek/photo.jpg?sz=128", "display_name": "Uriel", "link": "https://stackoverflow.com/users/6575931/uriel"}, "is_accepted": false, "score": 1, "last_activity_date": 1485982488, "creation_date": 1485982488, "answer_id": 41989584, "question_id": 41989482, "link": "https://stackoverflow.com/questions/41989482/python-nested-list-comprehension-for-arbitrary-number-of-variables/41989584#41989584", "title": "python nested list comprehension for arbitrary number of variables", "body": "<p>Use <code>itertools.product</code>:</p>\n\n<pre><code>&gt;&gt;&gt; from itertools import product\n&gt;&gt;&gt; dims = (2, 3, 4, 5)\n&gt;&gt;&gt; list(product(*map(range, dims)))\n[(0, 0, 0, 0), (0, 0, 0, 1), (0, 0, 0, 2), (0, 0, 0, 3), (0, 0, 0, 4), (0, 0, 1, 0), (0, 0, 1, 1), (0, 0, 1, 2), (0, 0, 1, 3), (0, 0, 1, 4), (0, 0, 2, 0), (0, 0, 2, 1), (0, 0, 2, 2), (0, 0, 2, 3), (0, 0, 2, 4), (0, 0, 3, 0), (0, 0, 3, 1), (0, 0, 3, 2), (0, 0, 3, 3), (0, 0, 3, 4), (0, 1, 0, 0), (0, 1, 0, 1), (0, 1, 0, 2), (0, 1, 0, 3), (0, 1, 0, 4), (0, 1, 1, 0), (0, 1, 1, 1), (0, 1, 1, 2), (0, 1, 1, 3), (0, 1, 1, 4), (0, 1, 2, 0), (0, 1, 2, 1), (0, 1, 2, 2), (0, 1, 2, 3), (0, 1, 2, 4), (0, 1, 3, 0), (0, 1, 3, 1), (0, 1, 3, 2), (0, 1, 3, 3), (0, 1, 3, 4), (0, 2, 0, 0), (0, 2, 0, 1), (0, 2, 0, 2), (0, 2, 0, 3), (0, 2, 0, 4), (0, 2, 1, 0), (0, 2, 1, 1), (0, 2, 1, 2), (0, 2, 1, 3), (0, 2, 1, 4), (0, 2, 2, 0), (0, 2, 2, 1), (0, 2, 2, 2), (0, 2, 2, 3), (0, 2, 2, 4), (0, 2, 3, 0), (0, 2, 3, 1), (0, 2, 3, 2), (0, 2, 3, 3), (0, 2, 3, 4), (1, 0, 0, 0), (1, 0, 0, 1), (1, 0, 0, 2), (1, 0, 0, 3), (1, 0, 0, 4), (1, 0, 1, 0), (1, 0, 1, 1), (1, 0, 1, 2), (1, 0, 1, 3), (1, 0, 1, 4), (1, 0, 2, 0), (1, 0, 2, 1), (1, 0, 2, 2), (1, 0, 2, 3), (1, 0, 2, 4), (1, 0, 3, 0), (1, 0, 3, 1), (1, 0, 3, 2), (1, 0, 3, 3), (1, 0, 3, 4), (1, 1, 0, 0), (1, 1, 0, 1), (1, 1, 0, 2), (1, 1, 0, 3), (1, 1, 0, 4), (1, 1, 1, 0), (1, 1, 1, 1), (1, 1, 1, 2), (1, 1, 1, 3), (1, 1, 1, 4), (1, 1, 2, 0), (1, 1, 2, 1), (1, 1, 2, 2), (1, 1, 2, 3), (1, 1, 2, 4), (1, 1, 3, 0), (1, 1, 3, 1), (1, 1, 3, 2), (1, 1, 3, 3), (1, 1, 3, 4), (1, 2, 0, 0), (1, 2, 0, 1), (1, 2, 0, 2), (1, 2, 0, 3), (1, 2, 0, 4), (1, 2, 1, 0), (1, 2, 1, 1), (1, 2, 1, 2), (1, 2, 1, 3), (1, 2, 1, 4), (1, 2, 2, 0), (1, 2, 2, 1), (1, 2, 2, 2), (1, 2, 2, 3), (1, 2, 2, 4), (1, 2, 3, 0), (1, 2, 3, 1), (1, 2, 3, 2), (1, 2, 3, 3), (1, 2, 3, 4)]\n</code></pre>\n"}], "owner": {"reputation": 535, "user_id": 3014653, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/9704cccc18cd6ad0542bc6ec9c7dfa69?s=128&d=identicon&r=PG&f=1", "display_name": "user3014653", "link": "https://stackoverflow.com/users/3014653/user3014653"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1485982532, "creation_date": 1485982153, "question_id": 41989482, "link": "https://stackoverflow.com/questions/41989482/python-nested-list-comprehension-for-arbitrary-number-of-variables", "title": "python nested list comprehension for arbitrary number of variables", "body": "<p>If I have a tuple of dimensions like dims=(2, 3, 4) and I want to generate a list of all possible indices for this array, a good solution I've found is:</p>\n\n<pre><code>dims = (2, 3, 4)\nindices = [range(0, d) for d in dims]\nstrings = [\"[%i][%i][%i]\" % (i,j,k) for i in indices[0] for j in indices[1] for k in indices[2]]\nprint strings:\n['[0][0][0]', '[0][0][1]', '[0][0][2]', '[0][0][3]', '[0][1][0]', '[0][1][1]', '[0][1][2]', '[0][1][3]', '[0][2][0]', '[0][2][1]', '[0][2][2]', '[0][2][3]', '[1][0][0]', '[1][0][1]', '[1][0][2]', '[1][0][3]', '[1][1][0]', '[1][1][1]', '[1][1][2]', '[1][1][3]', '[1][2][0]', '[1][2][1]', '[1][2][2]', '[1][2][3]']\n</code></pre>\n\n<p>This is all well and good, but I'm looking for a nice compact way to generate the strings variable where dims is of arbitrary length.  I'm trying to avoid a bunch of \"if-else\" clauses depending on the length of dims.  Any ideas?</p>\n"}, {"tags": ["python", "pandas", "matplotlib"], "comments": [{"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1485982362, "post_id": 41989431, "comment_id": 71156337, "body": "Provide a sample input file that reproduces this problem please. Cut it down to a dozen lines or fewer if you can."}, {"owner": {"reputation": 1535, "user_id": 3713927, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Vy5vM.jpg?s=128&g=1", "display_name": "TuanDT", "link": "https://stackoverflow.com/users/3713927/tuandt"}, "edited": false, "score": 0, "creation_date": 1485982748, "post_id": 41989431, "comment_id": 71156587, "body": "Have you tried calling xlim() before doing the actual plotting? Will need sample input data to give better diagnostic"}, {"owner": {"reputation": 39, "user_id": 7416521, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/e2510cbaba3d9cd35455b96a7fa32de1?s=128&d=identicon&r=PG&f=1", "display_name": "theplaid", "link": "https://stackoverflow.com/users/7416521/theplaid"}, "edited": false, "score": 0, "creation_date": 1485985443, "post_id": 41989431, "comment_id": 71157886, "body": "added some input to make my question easier to visualize"}], "answers": [{"tags": [], "owner": {"reputation": 2547, "user_id": 2136892, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/8d65df6cc1fbdbc0260ef3abf1333afc?s=128&d=identicon&r=PG&f=1", "display_name": "sundance", "link": "https://stackoverflow.com/users/2136892/sundance"}, "is_accepted": false, "score": 0, "last_activity_date": 1485983357, "last_edit_date": 1485983357, "creation_date": 1485982967, "answer_id": 41989700, "question_id": 41989431, "link": "https://stackoverflow.com/questions/41989431/matplotlib-xlim-interfering-with-graph/41989700#41989700", "title": "Matplotlib xlim interfering with graph", "body": "<p>You need to pass a list of the <code>[low, high]</code> limits to <code>plt.xlim</code>:</p>\n\n<pre><code>plt.xlim([2004, 2017])\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 7416521, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/e2510cbaba3d9cd35455b96a7fa32de1?s=128&d=identicon&r=PG&f=1", "display_name": "theplaid", "link": "https://stackoverflow.com/users/7416521/theplaid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1485985414, "creation_date": 1485981981, "last_edit_date": 1485985414, "question_id": 41989431, "link": "https://stackoverflow.com/questions/41989431/matplotlib-xlim-interfering-with-graph", "title": "Matplotlib xlim interfering with graph", "body": "<p>When I comment out the plt.xlim(2004, 2017) I see the graph but without the correct x-axis. But when it isn't commented, I see the correct x-axis but without the graph.</p>\n\n<p>Is there a way to combine them so the graph is visible with the correct x-axis?</p>\n\n<pre><code>import pandas as pd\nimport matplotlib.pyplot as plt\n\n\npd.set_option('display.max_colwidth', 0, 'display.max_columns', 0)\n\ndf = pd.read_csv('PakistanDroneAttacksWithTemp.csv', encoding='latin1')\n\ndf = df[['Date', 'Al-Qaeda', 'Taliban', 'Civilians Max', 'Total Died Max']]\n\ndf['Terrorists Killed'] = (df['Al-Qaeda'] + df['Taliban'])\n\ndf = df[['Date', 'Terrorists Killed', 'Civilians Max', 'Total Died Max']]\n\ndf.fillna(0, inplace=True)\ndf.drop(df.index[397], inplace=True)\n\n\ndf['Civilians Max'].plot()\ndf['Terrorists Killed'].plot()\ndf['Total Died Max'].plot()\nplt.legend(loc=4)\nplt.xlim(2004, 2017)\nplt.xlabel('Date')\nplt.ylabel('Deaths')\nplt.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/3Xk0m.png\" rel=\"nofollow noreferrer\">Input Data (df.head(20))</a></p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 428, "user_id": 6855686, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-sVeHLWQSvVI/AAAAAAAAAAI/AAAAAAAAAZQ/LKXu5xiecl8/photo.jpg?sz=128", "display_name": "Juan D. G&#243;mez", "link": "https://stackoverflow.com/users/6855686/juan-d-g%c3%b3mez"}, "edited": false, "score": 0, "creation_date": 1485982120, "post_id": 41989410, "comment_id": 71156199, "body": "Wow, I can&#39;t believe that bats is asking for help :O"}, {"owner": {"reputation": 23, "user_id": 7502669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57047ad7d2e63fa48522e71317535f8a?s=128&d=identicon&r=PG&f=1", "display_name": "Batman", "link": "https://stackoverflow.com/users/7502669/batman"}, "reply_to_user": {"reputation": 428, "user_id": 6855686, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-sVeHLWQSvVI/AAAAAAAAAAI/AAAAAAAAAZQ/LKXu5xiecl8/photo.jpg?sz=128", "display_name": "Juan D. G&#243;mez", "link": "https://stackoverflow.com/users/6855686/juan-d-g%c3%b3mez"}, "edited": false, "score": 0, "creation_date": 1485985678, "post_id": 41989410, "comment_id": 71157988, "body": "I&#39;m new to coding and am trying to get the hang of it :3"}], "answers": [{"tags": [], "owner": {"reputation": 13815, "user_id": 6575931, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-CumJFhlEBdA/AAAAAAAAAAI/AAAAAAAAi5U/sqexnazvXek/photo.jpg?sz=128", "display_name": "Uriel", "link": "https://stackoverflow.com/users/6575931/uriel"}, "is_accepted": true, "score": 2, "last_activity_date": 1485981986, "creation_date": 1485981986, "answer_id": 41989434, "question_id": 41989410, "link": "https://stackoverflow.com/questions/41989410/how-to-print-part-of-item-in-a-list/41989434#41989434", "title": "How to print part of item in a list?", "body": "<p>Assuming all the values keep that pattern, split and join back, ignoring last value in splitted array:</p>\n\n<pre><code>l = ['Blake 4', 'Bolt 1', 'De Grasse 3', 'Gatlin 2', 'Simbine 5', 'Youssef Meite 6']\nfor x in l:\n   print(' '.join(x.split()[:-1]))\n</code></pre>\n\n<p>Otherwise, use regex to eliminate numerals:</p>\n\n<pre><code>import re\nl = ['Blake 4', 'Bolt 1', 'De Grasse 3', 'Gatlin 2', 'Simbine 5', 'Youssef Meite 6']\nfor x in l:\n    print(re.sub(' \\d+', '', x))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": false, "score": 1, "last_activity_date": 1485982091, "creation_date": 1485982091, "answer_id": 41989459, "question_id": 41989410, "link": "https://stackoverflow.com/questions/41989410/how-to-print-part-of-item-in-a-list/41989459#41989459", "title": "How to print part of item in a list?", "body": "<p>list comprehension is useless to <em>print</em> stuff (or any operations where you don't need the return value).</p>\n\n<p>In your case, you could use <code>str.rpartition</code> in a loop to print only the left hand of the rightmost space found in the string:</p>\n\n<pre><code>l =['Blake 4', 'Bolt 1', 'De Grasse 3', 'Gatlin 2', 'Simbine 5', 'Youssef Meite 6']\nfor s in l:\n    print(s.rpartition(\" \")[0])\n</code></pre>\n\n<p>Just stripping the last digit off the list would be a good usage of listcomp:</p>\n\n<pre><code>newl = [s.rpartition(\" \")[0] for s in l]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1485983443, "post_id": 41989530, "comment_id": 71156967, "body": "what guarantees that the values won&#39;t be above 9?"}, {"owner": {"reputation": 769, "user_id": 7187106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/084f4df88a7a92fa348f3e619cd2e0ba?s=128&d=identicon&r=PG&f=1", "display_name": "Longwen Ou", "link": "https://stackoverflow.com/users/7187106/longwen-ou"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1485983825, "post_id": 41989530, "comment_id": 71157151, "body": "@Jean-Fran&#231;oisFabre Absolutely valid point. But we don&#39;t have enough information about what the data looks like. My answer is only based on the sample list he provides."}], "tags": [], "owner": {"reputation": 769, "user_id": 7187106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/084f4df88a7a92fa348f3e619cd2e0ba?s=128&d=identicon&r=PG&f=1", "display_name": "Longwen Ou", "link": "https://stackoverflow.com/users/7187106/longwen-ou"}, "is_accepted": false, "score": 1, "last_activity_date": 1485984414, "last_edit_date": 1485984414, "creation_date": 1485982295, "answer_id": 41989530, "question_id": 41989410, "link": "https://stackoverflow.com/questions/41989410/how-to-print-part-of-item-in-a-list/41989530#41989530", "title": "How to print part of item in a list?", "body": "<p>Try this:</p>\n\n<pre><code>l = ['Blake 4', 'Bolt 1', 'De Grasse 3', 'Gatlin 2', 'Simbine 5', 'Youssef Meite 6']\nfor i in l:\n    print(i[:-2])\n</code></pre>\n\n<p>Indexing is sufficient for solving your problem.</p>\n\n<p>Based on @Jean-Fran\u00e7ois 's comment, if you are trying to remove all the characters before the last space, you can do this instead:</p>\n\n<pre><code>l = ['Blake 4', 'Bolt 1', 'De Grasse 3', 'Gatlin 2', 'Simbine 5', 'Youssef Meite 6']\nfor i in l:\n    print(i[:-i[::-1].index(' ')-1])\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 7502669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57047ad7d2e63fa48522e71317535f8a?s=128&d=identicon&r=PG&f=1", "display_name": "Batman", "link": "https://stackoverflow.com/users/7502669/batman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "closed_date": 1485983217, "accepted_answer_id": 41989434, "answer_count": 3, "score": -4, "last_activity_date": 1541443067, "creation_date": 1485981899, "last_edit_date": 1541443067, "question_id": 41989410, "link": "https://stackoverflow.com/questions/41989410/how-to-print-part-of-item-in-a-list", "closed_reason": "Not suitable for this site", "title": "How to print part of item in a list?", "body": "<p>I have a list that looks like this:</p>\n\n<pre><code>['Blake 4', 'Bolt 1', 'De Grasse 3', 'Gatlin 2', 'Simbine 5', 'Youssef Meite 6']\n</code></pre>\n\n<p>I am trying to print this:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Blake\nBolt\nDe Grasse\nGatlin\nSimbine\nYoussef Meite\n</code></pre>\n\n<p>How do I go about writing a list comprehension that handles this scenario? I tried using <code>split</code> and indexing but nothing I have used has worked.</p>\n"}, {"tags": ["python", "loops", "dictionary"], "comments": [{"owner": {"reputation": 72748, "user_id": 3185459, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PBjxg.jpg?s=128&g=1", "display_name": "RomanPerekhrest", "link": "https://stackoverflow.com/users/3185459/romanperekhrest"}, "edited": false, "score": 0, "creation_date": 1485981880, "post_id": 41989365, "comment_id": 71156065, "body": "would the keys among two dicts always be the same?"}, {"owner": {"reputation": 13, "user_id": 2964370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1237fec069d1f362e7d57d2f450d5293?s=128&d=identicon&r=PG&f=1", "display_name": "ip308", "link": "https://stackoverflow.com/users/2964370/ip308"}, "reply_to_user": {"reputation": 72748, "user_id": 3185459, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PBjxg.jpg?s=128&g=1", "display_name": "RomanPerekhrest", "link": "https://stackoverflow.com/users/3185459/romanperekhrest"}, "edited": false, "score": 0, "creation_date": 1485982305, "post_id": 41989365, "comment_id": 71156308, "body": "Sorry, yes forgot to mention, the keys will always be the same"}], "answers": [{"tags": [], "owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "is_accepted": false, "score": 2, "last_activity_date": 1485982070, "creation_date": 1485982070, "answer_id": 41989456, "question_id": 41989365, "link": "https://stackoverflow.com/questions/41989365/join-multiple-dicts-to-create-new-list-with-value-as-list-of-values-of-original/41989456#41989456", "title": "Join multiple dicts to create new list with value as list of values of original dict", "body": "<p>Use a <code>defaultdict</code>:</p>\n\n<pre><code>In [18]: def gen_dictionaries():\n    ...:     yield {'key1': 1, 'key2': 2, 'key3': 3}\n    ...:     yield {'key1': 4, 'key2': 5, 'key3': 6}\n    ...:\n\nIn [19]: from collections import defaultdict\n\nIn [20]: final = defaultdict(list)\n\nIn [21]: for d in gen_dictionaries():\n    ...:     for k, v in d.iteritems():\n    ...:         final[k].append(v)\n    ...:\n\nIn [22]: final\nOut[22]: defaultdict(list, {'key1': [1, 4], 'key2': [2, 5], 'key3': [3, 6]})\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 39529, "user_id": 2063361, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/jB77z.jpg?s=128&g=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/2063361/anonymous"}, "is_accepted": false, "score": 0, "last_activity_date": 1485984065, "last_edit_date": 1485984065, "creation_date": 1485982109, "answer_id": 41989465, "question_id": 41989365, "link": "https://stackoverflow.com/questions/41989365/join-multiple-dicts-to-create-new-list-with-value-as-list-of-values-of-original/41989465#41989465", "title": "Join multiple dicts to create new list with value as list of values of original dict", "body": "<p>One way to achieve this in a generic way is via using <code>set</code> to find the union of keys of both the <code>dict</code>s and then use a <em>dictionary comprehension</em> to get the desired dict as:</p>\n\n<pre><code>&gt;&gt;&gt; dict_list = [d1, d2]  # list of all the dictionaries which are to be joined\n\n # set of the keys present in all the dicts; \n&gt;&gt;&gt; common_keys = set(dict_list[0]).union(*dict_list[1:])\n\n&gt;&gt;&gt; {k: [d[k] for d in dict_list if k in d] for k in common_keys}\n{'key3': [3, 6], 'key2': [2, 5], 'key1': [1, 4]}\n</code></pre>\n\n<p>where <code>d1</code> and <code>d2</code> are:</p>\n\n<pre><code>d1 = {'key1': 1,\n      'key2': 2,\n      'key3': 3}\n\nd2 = {'key1': 4,\n      'key2': 5,\n      'key3': 6}\n</code></pre>\n\n<p><strong>Explanation</strong>: Here, <code>dict_list</code> is the list of all the <code>dict</code> objects you want to combine. Then I am creating the <code>common_keys</code> set  of the <em>keys</em> in all the dict object. Finally I am creating a new dictionary via using <em>dictionary comprehension</em> (with nested <em>list comprehension</em> with filter).</p>\n\n<hr>\n\n<p>Based on comment from OP, since all the dicts hold the same keys, we can skip the usage of set. Hence the code could be written as:</p>\n\n<pre><code>&gt;&gt;&gt; dict_list = [d1, d2]  \n\n&gt;&gt;&gt; {k: [d[k] for d in dict_list] for k in dict_list[0]}\n{'key3': [3, 6], 'key2': [2, 5], 'key1': [1, 4]}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9, "user_id": 6923807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fd0d82e33d534b2b951b5ffce7a470f?s=128&d=identicon&r=PG&f=1", "display_name": "anroyus", "link": "https://stackoverflow.com/users/6923807/anroyus"}, "is_accepted": false, "score": 0, "last_activity_date": 1529297607, "last_edit_date": 1529297607, "creation_date": 1529296310, "answer_id": 50902706, "question_id": 41989365, "link": "https://stackoverflow.com/questions/41989365/join-multiple-dicts-to-create-new-list-with-value-as-list-of-values-of-original/50902706#50902706", "title": "Join multiple dicts to create new list with value as list of values of original dict", "body": "<pre><code>dict1 = {'m': 2, 'n':4, 'o':7, 'p':90}\ndict2 = {'m': 1, 'n': 3}\n\n\ndict3 = {}\n\nfor key,value in dict1.iteritems():\n    if key not in dict3:\n        dict3[key] = list()\n    dict3[key].append(value)\n\n\nfor key,value in dict2.iteritems():\n    if key not in dict3:\n        dict3[key] = list()\n    dict3[key].append(value)\n\n\nprint(dict3)\n</code></pre>\n\n<p>The output looks like this :</p>\n\n<p><code>{'p': [90], 'm': [2, 1], 'o': [7], 'n': [4, 3]}</code></p>\n"}], "owner": {"reputation": 13, "user_id": 2964370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1237fec069d1f362e7d57d2f450d5293?s=128&d=identicon&r=PG&f=1", "display_name": "ip308", "link": "https://stackoverflow.com/users/2964370/ip308"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 273, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1529297607, "creation_date": 1485981712, "last_edit_date": 1485992508, "question_id": 41989365, "link": "https://stackoverflow.com/questions/41989365/join-multiple-dicts-to-create-new-list-with-value-as-list-of-values-of-original", "title": "Join multiple dicts to create new list with value as list of values of original dict", "body": "<p>I'm on Python 2.7 and have looked at several solutions here which works if you know how many dictionaries you are merging, but I could have anything between 2 to 5. </p>\n\n<p>I have a loop which generates a dict with the same keys but different values. I want to add the new values to the previous.</p>\n\n<p>Such as:</p>\n\n<pre><code>for num in numbers:\n    dict = (function which outputs a dictionary)\n    [merge with dictionary from previous run of the loop]\n</code></pre>\n\n<p>So if:</p>\n\n<pre><code>dict (from loop one) = {'key1': 1,\n 'key2': 2,\n 'key3': 3}\n</code></pre>\n\n<p>and </p>\n\n<pre><code>dict (from loop two) = {'key1': 4,\n 'key2': 5,\n 'key3': 6}\n</code></pre>\n\n<p>The resultant dict would be:</p>\n\n<pre><code>dict = {'key1': [1,4]\n 'key2': [2,5],\n 'key3': [3,6]}\n</code></pre>\n"}, {"tags": ["python", "loops", "variables"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1485981715, "post_id": 41989356, "comment_id": 71155976, "body": "don&#39;t create such variables in the first place! Use a list."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 3, "creation_date": 1485981752, "post_id": 41989356, "comment_id": 71156001, "body": "That is what a <i>container</i> is for! E.g. a list, dictionary, set, tuple etc..."}, {"owner": {"reputation": 6846, "user_id": 23034, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6b1453411bcd242378a7e7cc392cb40e?s=128&d=identicon&r=PG", "display_name": "Gabriele D&#39;Antona", "link": "https://stackoverflow.com/users/23034/gabriele-dantona"}, "edited": false, "score": 2, "creation_date": 1485981841, "post_id": 41989356, "comment_id": 71156049, "body": "Maybe you need a so-called &quot;array&quot;? :) M[0], M[1], etc."}], "owner": {"reputation": 87, "user_id": 6332341, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/ee066c3e3b46d2ebed941862a75ee1b2?s=128&d=identicon&r=PG&f=1", "display_name": "Mia.M", "link": "https://stackoverflow.com/users/6332341/mia-m"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1765, "favorite_count": 0, "closed_date": 1485981776, "answer_count": 0, "score": 0, "last_activity_date": 1563066667, "creation_date": 1485981688, "question_id": 41989356, "link": "https://stackoverflow.com/questions/41989356/iterating-over-variable-name", "closed_reason": "Duplicate", "title": "Iterating over variable name", "body": "<p>What I want to do is to create like 10 (or more than 10) variables each containing an int in the name, like <code>M1, M2, M3, M4, M5, M6, M7, M8, M9, M10</code> \nIs there any method I can use in Python to iterate over the int contained in the variable name so that I don't have to call each variable when I want to apply the same function to each of them?</p>\n"}]