[{"tags": ["python", "selenium", "xpath"], "comments": [{"owner": {"reputation": 25595, "user_id": 202229, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6cc1d82c11563b440c57280ad587ee47?s=128&d=identicon&r=PG", "display_name": "smci", "link": "https://stackoverflow.com/users/202229/smci"}, "edited": false, "score": 0, "creation_date": 1568247474, "post_id": 57898065, "comment_id": 102217292, "body": "1) We can&#39;t reproduce this because we don&#39;t have the HTML. Please post the URL. 2) What error/issue do you get? When you try debugging your XPATH by successively adding parts to it, where does it stop working?"}, {"owner": {"reputation": 111, "user_id": 4330885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0830c72e70c94ec8b222d68d26415332?s=128&d=identicon&r=PG&f=1", "display_name": "hakukou", "link": "https://stackoverflow.com/users/4330885/hakukou"}, "reply_to_user": {"reputation": 25595, "user_id": 202229, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6cc1d82c11563b440c57280ad587ee47?s=128&d=identicon&r=PG", "display_name": "smci", "link": "https://stackoverflow.com/users/202229/smci"}, "edited": false, "score": 0, "creation_date": 1568248524, "post_id": 57898065, "comment_id": 102217491, "body": "hi, 1) Internal site 2) I Just want to print text."}, {"owner": {"reputation": 25595, "user_id": 202229, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6cc1d82c11563b440c57280ad587ee47?s=128&d=identicon&r=PG", "display_name": "smci", "link": "https://stackoverflow.com/users/202229/smci"}, "edited": false, "score": 0, "creation_date": 1568248677, "post_id": 57898065, "comment_id": 102217518, "body": "1) Ok but we can&#39;t reproduce it. 2) Doesn&#39;t matter. To debug the xpath, the only sane method I know is start with just <code>&#39;&#47;&#47;*[@id=&quot;context_bar&quot;]&#47;table&#47;tbody</code>, check it works, then add xpath components one-at-a-time until you find where the problem is. Tell us where that is. If you don&#39;t debug it and describe the problem better, then we can&#39;t help you."}, {"owner": {"reputation": 111, "user_id": 4330885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0830c72e70c94ec8b222d68d26415332?s=128&d=identicon&r=PG&f=1", "display_name": "hakukou", "link": "https://stackoverflow.com/users/4330885/hakukou"}, "reply_to_user": {"reputation": 25595, "user_id": 202229, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6cc1d82c11563b440c57280ad587ee47?s=128&d=identicon&r=PG", "display_name": "smci", "link": "https://stackoverflow.com/users/202229/smci"}, "edited": false, "score": 0, "creation_date": 1568249272, "post_id": 57898065, "comment_id": 102217610, "body": "hi,this code can you convert to selenium   <code>title = html.etree.HTML(content).xpath(&#39;&#47;&#47;*[@id=&quot;context_bar&quot;]&#47;table&zwnj;&#8203;&#47;tbody&#47;tr&#47;td[5]&#47;div&#47;&zwnj;&#8203;@title&#39;)[0]</code>"}, {"owner": {"reputation": 25595, "user_id": 202229, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6cc1d82c11563b440c57280ad587ee47?s=128&d=identicon&r=PG", "display_name": "smci", "link": "https://stackoverflow.com/users/202229/smci"}, "edited": false, "score": 0, "creation_date": 1568249778, "post_id": 57898065, "comment_id": 102217693, "body": "Oh, you&#39;re asking us to convert Python ElementTree code to Selenium. I don&#39;t know Selenium but it should be easy, see the Selenium doc."}], "answers": [{"tags": [], "owner": {"reputation": 4256, "user_id": 5386938, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-H3KU09vCXj4/AAAAAAAAAAI/AAAAAAAAAQI/P8vlqd0SX5s/photo.jpg?sz=128", "display_name": "Justin Ezequiel", "link": "https://stackoverflow.com/users/5386938/justin-ezequiel"}, "is_accepted": true, "score": 2, "last_activity_date": 1568250026, "creation_date": 1568250026, "answer_id": 57898446, "question_id": 57898065, "link": "https://stackoverflow.com/questions/57898065/get-text-from-the-page-using-find-element-by-xpath-convert-to-selenium/57898446#57898446", "title": "Get text from the page using find_element_by_xpath convert to selenium", "body": "<p>The method you're calling is <code>find_element_by_xpath</code> so it will return an element.\nif you want to get an attribute of an element then you'll need to call <code>elem.get_attribute(...)</code></p>\n\n<pre><code>div = browser.find_element_by_xpath('//*[@id=\"context_bar\"]/table/tbody/tr/td[5]/div')\ntitle = div.get_attribute('title')\n</code></pre>\n"}], "owner": {"reputation": 111, "user_id": 4330885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0830c72e70c94ec8b222d68d26415332?s=128&d=identicon&r=PG&f=1", "display_name": "hakukou", "link": "https://stackoverflow.com/users/4330885/hakukou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "closed_date": 1568347358, "accepted_answer_id": 57898446, "answer_count": 1, "score": -2, "last_activity_date": 1568279522, "creation_date": 1568245886, "last_edit_date": 1568279522, "question_id": 57898065, "link": "https://stackoverflow.com/questions/57898065/get-text-from-the-page-using-find-element-by-xpath-convert-to-selenium", "closed_reason": "Duplicate", "title": "Get text from the page using find_element_by_xpath convert to selenium", "body": "<p>I want to get the text <em>\"Cleaning General: Audit Based Update\"</em> in the HTML below. It should have the xpath:</p>\n\n<pre><code>//*[@id=\"context_bar\"]/table/tbody/tr/td[5]/div\n</code></pre>\n\n<p>How do I convert the following Python ElementTree code to Selenium?</p>\n\n<pre><code>browser.find_element_by_xpath('//*[@id=\"context_bar\"]/table/tbody/tr/td[5]/div/@title').text()\n</code></pre>\n\n<p>with the following HTML:</p>\n\n<p><img src=\"https://i.imgur.com/mCCJEV4.jpg\" alt=\"image\"></p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 95978, "user_id": 1079354, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c17dd9cf3e2322be19639e96da9f3eb3?s=128&d=identicon&r=PG", "display_name": "Makoto", "link": "https://stackoverflow.com/users/1079354/makoto"}, "edited": false, "score": 1, "creation_date": 1568245653, "post_id": 57898030, "comment_id": 102216948, "body": "The keyword you&#39;re looking for is &quot;scheduler&quot;."}], "answers": [{"tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 2, "last_activity_date": 1568245681, "creation_date": 1568245681, "answer_id": 57898059, "question_id": 57898030, "link": "https://stackoverflow.com/questions/57898030/is-there-a-way-to-execute-code-every-hour-while-still-having-other-code-run/57898059#57898059", "title": "Is there a way to execute code every hour while still having other code run?", "body": "<ol>\n<li>Use <code>asyncio.sleep(3600)</code> to handle your delay.  You'll want multithreading and the asyncio modules.</li>\n<li>Have your loop check the current time at convenient intervals, executing the other code when an hour has passed.  You'll want datetime for this; if you don't mind slipping a little over an hour on each interval, then simply <code>time.time()</code> will do the job.</li>\n</ol>\n"}], "owner": {"reputation": 1, "user_id": 12055608, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57196beffb29f26e03c455fdd1f9942e?s=128&d=identicon&r=PG&f=1", "display_name": "Fish767", "link": "https://stackoverflow.com/users/12055608/fish767"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 0, "closed_date": 1568247074, "answer_count": 1, "score": 0, "last_activity_date": 1568245681, "creation_date": 1568245399, "question_id": 57898030, "link": "https://stackoverflow.com/questions/57898030/is-there-a-way-to-execute-code-every-hour-while-still-having-other-code-run", "closed_reason": "Duplicate", "title": "Is there a way to execute code every hour while still having other code run?", "body": "<p>I am new to python. I am making a bot to play Realm Grinder. Right now I am using PyAutoGui to control the mouse to click on certain options. I want my looping code to stop every hour and execute a different line of code. Then I need it to return to the main code and branch off again in half an hour.</p>\n\n<p>I know I can't use sleep to do it and I have considered using a variable, but I don't know how to set up numeric variables yet. The python documentation I have found is very confusing.</p>\n\n<p>Right now I have:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def realmGrinder():\\\n     (code here)\nwhile True:\n     (code here)\n\nrealmGrinder\n</code></pre>\n"}, {"tags": ["python", "linux", "time", "timezone"], "answers": [{"tags": [], "owner": {"reputation": 137, "user_id": 9182717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da36c6977ac0abed52ccf4cb1c4df1ca?s=128&d=identicon&r=PG&f=1", "display_name": "M. Webb", "link": "https://stackoverflow.com/users/9182717/m-webb"}, "is_accepted": false, "score": 0, "last_activity_date": 1568872029, "creation_date": 1568872029, "answer_id": 58004444, "question_id": 57898001, "link": "https://stackoverflow.com/questions/57898001/why-does-setting-the-time-from-python-using-timedatectl-set-utc-time-while-using/58004444#58004444", "title": "Why does setting the time from python using timedatectl set UTC time while using the command line sets local time?", "body": "<p>I stumbled upon the answer via an indirect route.</p>\n\n<p>The Django settings.py file had </p>\n\n<pre><code>TIME_ZONE = 'UTC'\n</code></pre>\n\n<p>Changing the value to the local timezone, or having it load dynamically resolved the problem.</p>\n"}], "owner": {"reputation": 137, "user_id": 9182717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da36c6977ac0abed52ccf4cb1c4df1ca?s=128&d=identicon&r=PG&f=1", "display_name": "M. Webb", "link": "https://stackoverflow.com/users/9182717/m-webb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 451, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1568872029, "creation_date": 1568245078, "question_id": 57898001, "link": "https://stackoverflow.com/questions/57898001/why-does-setting-the-time-from-python-using-timedatectl-set-utc-time-while-using", "title": "Why does setting the time from python using timedatectl set UTC time while using the command line sets local time?", "body": "<p>I am trying to set the system date/time on ubuntu server from python 3 by running a shell script to which I pass a date/time string of the form \"yyyy-mm-dd hh:mm:ss\". The script passes this string to timedatectl to set the time.</p>\n\n<p>The python call looks like this:</p>\n\n<pre><code>os.system('sudo %s/settime.sh \"%s\"' % (Constants.ScriptDirectory, dt))\n</code></pre>\n\n<p>where dt in this case is \"2019-09-12 07:00:00\"</p>\n\n<p>The shell script is simply:</p>\n\n<pre><code>#!/bin/bash\ntimedatectl set-ntp no\ntimedatectl set-time \"$1\"\n</code></pre>\n\n<p>When I log the actual command called from python I see what I expect:</p>\n\n<pre><code>sudo /home/user/dev/web/sh/settime.sh \"2019-09-12 07:00:00\"\n</code></pre>\n\n<p>The problem is this: The system time is changed, but it sets it as the UTC time (ie. 2019-09-12 07:00:00 UTC) and the time reported by running date is out by the timezone delta. However, if I run the exact same command as above from the command line the time is correctly set in the local timezone, rather than as UTC.</p>\n\n<p>This discrepancy occurs even if I include a call in python to use timedatectl to explicitly set the timezone prior to the call to set the time.</p>\n\n<p>I'm baffled. Why should the effect be different?</p>\n\n<p>For reference, I am using Django 2.2.3 and running the development server. Is it possible that the server is messing with the timezone when it runs python?</p>\n"}, {"tags": ["python", "jupyter-notebook"], "comments": [{"owner": {"reputation": 370, "user_id": 8519578, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-lMCrU7tiQ0w/AAAAAAAAAAI/AAAAAAAAAGg/NTCfHpzt_FE/photo.jpg?sz=128", "display_name": "a_r", "link": "https://stackoverflow.com/users/8519578/a-r"}, "edited": false, "score": 0, "creation_date": 1568246549, "post_id": 57897973, "comment_id": 102217107, "body": "Try putting <code>%matplotlib inline</code> just above the function definition."}, {"owner": {"reputation": 3, "user_id": 12055581, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d6323869569ea92a71da3e016d7867e?s=128&d=identicon&r=PG&f=1", "display_name": "Jayson Vavrek", "link": "https://stackoverflow.com/users/12055581/jayson-vavrek"}, "reply_to_user": {"reputation": 370, "user_id": 8519578, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-lMCrU7tiQ0w/AAAAAAAAAAI/AAAAAAAAAGg/NTCfHpzt_FE/photo.jpg?sz=128", "display_name": "a_r", "link": "https://stackoverflow.com/users/8519578/a-r"}, "edited": false, "score": 0, "creation_date": 1568247221, "post_id": 57897973, "comment_id": 102217241, "body": "@a_ran That doesn&#39;t change the inline behaviour of creating two figures. Plus, I&#39;m looking for a solution that does not involve editing the function definition or the file that contains it."}], "owner": {"reputation": 3, "user_id": 12055581, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d6323869569ea92a71da3e016d7867e?s=128&d=identicon&r=PG&f=1", "display_name": "Jayson Vavrek", "link": "https://stackoverflow.com/users/12055581/jayson-vavrek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1568245721, "creation_date": 1568244737, "last_edit_date": 1568245721, "question_id": 57897973, "link": "https://stackoverflow.com/questions/57897973/jupyter-matplotlib-inline-mode-with-out-of-scope-plt-annotations", "title": "Jupyter matplotlib inline mode with out-of-scope plt annotations", "body": "<p>I have some plotting functions that are called in a jupyter notebook. The plotting functions include the calls</p>\n\n<pre><code>plt.figure()\n</code></pre>\n\n<p>and</p>\n\n<pre><code>plt.show()\n</code></pre>\n\n<p>However, the notebooks add annotations to the plot after the fact. The annotations work properly with</p>\n\n<pre><code>%matplotlib nbagg\n</code></pre>\n\n<p>but not</p>\n\n<pre><code>%matplotlib inline\n</code></pre>\n\n<p>which creates a new figure instead of annotating the old one (edit: this is the same behaviour as running a script in terminal). It seems that there's a scoping issue that nbagg circumvents and that inline does not. See below for a minimal reproducible example.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>%matplotlib inline\nimport numpy as np\nimport matplotlib.pyplot as plt\n\ndef plotter():\n    plt.figure()\n    x = np.arange(-3,3,0.1)\n    y = np.exp(-x*x)\n    plt.scatter(x,y)\n    plt.show()\n\nplotter()\nplt.text(0, 0.5, 'gaus', horizontalalignment='center')\nplt.show()\n</code></pre>\n\n<p>Question: is there a way I can get this to work in inline mode, e.g., by getting the most recently shown figure? I'd rather not edit the back-end plotting functions, which are not my own.</p>\n"}, {"tags": ["python", "ray"], "comments": [{"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1568244655, "post_id": 57897943, "comment_id": 102216773, "body": "Do you have a particular reason to do this? Generally, letting the operating system&#39;s scheduler do its thing works pretty well; pinning is often counterproductive to performance."}, {"owner": {"reputation": 1627, "user_id": 7850499, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/9kovQ.jpg?s=128&g=1", "display_name": "Maybe", "link": "https://stackoverflow.com/users/7850499/maybe"}, "reply_to_user": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1568244847, "post_id": 57897943, "comment_id": 102216804, "body": "Hi, @CharlesDuffy. Because I don&#39;t want to cause contention between actors"}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1568245423, "post_id": 57897943, "comment_id": 102216909, "body": "Are you sure contention <i>really is</i> a problem? Again, the OS scheduler is good at what it does; only one process can fit on a core at a time, and if you have more cores than you have processes, then they&#39;re going to be fine; contrariwise, if you have more immediately-schedulable processes than cores, there&#39;s nothing you can do to <i>prevent</i> contention."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1568245462, "post_id": 57897943, "comment_id": 102216917, "body": "...granted, there&#39;s a cost to moving a process between cores if they don&#39;t share the same cache, but again, the OS scheduler <i>knows about that cost</i>, and pays it only when it makes sense to do so. I&#39;m speaking here as someone with a real-world extremely-parallel workload and real-world extremely-parallel hardware, where when we implemented CPU pinning it made things much worse (wasting resources when a process wasn&#39;t schedulable, thus reducing throughput)."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1568245660, "post_id": 57897943, "comment_id": 102216949, "body": "...so, in my real-world experience, you&#39;re better off adjusting priorities (&quot;niceness&quot;), scheduler algorithms, &amp;c. and letting the scheduler do its thing."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1568246117, "post_id": 57897943, "comment_id": 102217029, "body": "(That said, if you still want to implement this, I&#39;ve given you a hint above -- &quot;CPU pinning&quot; is the keyword/phrase you want to search for)."}, {"owner": {"reputation": 1627, "user_id": 7850499, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/9kovQ.jpg?s=128&g=1", "display_name": "Maybe", "link": "https://stackoverflow.com/users/7850499/maybe"}, "reply_to_user": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1568259772, "post_id": 57897943, "comment_id": 102219540, "body": "Thank you and sorry for the late response, @CharlesDuffy. I really appreciate you helping me understand these system-level details. I want to do this because many distributed reinforcement learning papers stress the importance that the number of workers must be no more than the number of CPU cores so as to avoid contention. But based on my understanding of your comments, it seems that I do not have to deliberately assign a core to each worker. If so, how can I know if there is any potential attention going on?"}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1568289460, "post_id": 57897943, "comment_id": 102232284, "body": "From a monitoring perspective, I&#39;d suggest running <code>vmstat 1</code> and watching it while your process is active -- if you look at the column on the far left, what it shows is the number of processes currently eligible to be scheduled to a CPU (meaning they aren&#39;t blocked on I/O or anything else that makes them not currently ready for a CPU). If that number is higher than the number of physical CPU cores in your machine, you have contention."}, {"owner": {"reputation": 1627, "user_id": 7850499, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/9kovQ.jpg?s=128&g=1", "display_name": "Maybe", "link": "https://stackoverflow.com/users/7850499/maybe"}, "reply_to_user": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1568643315, "post_id": 57897943, "comment_id": 102329310, "body": "Thank you so much, and sorry for the late thanks @CharlesDuffy:-) You really help me understand what&#39;s going on here."}], "owner": {"reputation": 1627, "user_id": 7850499, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/9kovQ.jpg?s=128&g=1", "display_name": "Maybe", "link": "https://stackoverflow.com/users/7850499/maybe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1568244685, "creation_date": 1568244482, "last_edit_date": 1568244685, "question_id": 57897943, "link": "https://stackoverflow.com/questions/57897943/how-can-i-ensure-that-one-worker-runs-on-a-cpu", "title": "How can I ensure that one worker runs on a CPU?", "body": "<p>I create several workers and a learner using <a href=\"https://ray.readthedocs.io/en/latest/#\" rel=\"nofollow noreferrer\">ray</a>. How can I ensure that each actor runs on a CPU without contention?</p>\n"}, {"tags": ["python", "numpy"], "comments": [{"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 1, "creation_date": 1568244753, "post_id": 57897942, "comment_id": 102216791, "body": "I think you are asking the wrong question.  They are both useful.  <code>numpy</code> is best for  calculations, lists are better for iteration.  Also distinguish between numeric arrays, string dtypes arrays, and object dtype arrays."}, {"owner": {"reputation": 1, "user_id": 12055596, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d73344a0bc810e4b4f9f50b353381ba?s=128&d=identicon&r=PG&f=1", "display_name": "Bobo the clown", "link": "https://stackoverflow.com/users/12055596/bobo-the-clown"}, "reply_to_user": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1568244929, "post_id": 57897942, "comment_id": 102216821, "body": "@hpaulj but since <code>numpy</code> arrays can also be iterated upon, is there any downside to always using them (in the place of python lists)?"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1568245600, "post_id": 57897942, "comment_id": 102216941, "body": "@Bobotheclown yes they are much less efficient for non-primitive dtypes, i.e. for anything you would use <code>object</code> dtype for."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1568247187, "post_id": 57897942, "comment_id": 102217234, "body": "Iteration on numpy arrays is slower.  Your example uses strings.  <code>numpy</code> doesn&#39;t have &#39;native&#39; string methods.  Its np.char` functions apply Python string methods to each element."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1568302313, "post_id": 57897942, "comment_id": 102239899, "body": "When you create that array you use a tuple of tuples.  Lists and tuples are integral to python, even when using numpy."}], "answers": [{"tags": [], "owner": {"reputation": 78, "user_id": 7735559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5beb541a09b3a3575db6ec63432b9b21?s=128&d=identicon&r=PG&f=1", "display_name": "Bob Stone", "link": "https://stackoverflow.com/users/7735559/bob-stone"}, "is_accepted": false, "score": -1, "last_activity_date": 1568244672, "creation_date": 1568244672, "answer_id": 57897960, "question_id": 57897942, "link": "https://stackoverflow.com/questions/57897942/what-are-the-downsides-of-always-using-numpy-arrays-instead-of-python-lists/57897960#57897960", "title": "What are the downsides of always using numpy arrays instead of python lists?", "body": "<p>Numpy arrays and functions are better for the most part. Here is an article if you want to look into it more: <a href=\"https://webcourses.ucf.edu/courses/1249560/pages/python-lists-vs-numpy-arrays-what-is-the-difference\" rel=\"nofollow noreferrer\">https://webcourses.ucf.edu/courses/1249560/pages/python-lists-vs-numpy-arrays-what-is-the-difference</a></p>\n"}, {"comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1568245665, "post_id": 57898050, "comment_id": 102216950, "body": "The mix of data-types isn&#39;t the problem, the problem is <code>dtype=object</code>, although, heterogenous <code>numpy.ndarray</code> have to be <code>dtype=object</code>"}], "tags": [], "owner": {"reputation": 44364, "user_id": 2487184, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d8cd1dea84cfe8312c532088a0da08e8?s=128&d=identicon&r=PG", "display_name": "CT Zhu", "link": "https://stackoverflow.com/users/2487184/ct-zhu"}, "is_accepted": false, "score": 0, "last_activity_date": 1568245905, "last_edit_date": 1568245905, "creation_date": 1568245586, "answer_id": 57898050, "question_id": 57897942, "link": "https://stackoverflow.com/questions/57897942/what-are-the-downsides-of-always-using-numpy-arrays-instead-of-python-lists/57898050#57898050", "title": "What are the downsides of always using numpy arrays instead of python lists?", "body": "<p>Yes there are.  The rule of thumb would be to remember <code>numpy.array</code> is better for  data of the same datatype (all integers, all double precision fp, all booleans, strings of the same length etc) instead of a mix bag of things.  In the latter case you might just as well using generic list, considering this:</p>\n\n<pre><code>In [93]: a = [b'5', 5, '55', 'ab', 'cde', 'ef', 4, 6]\n\nIn [94]: b = np.array(a)\n\nIn [95]: %timeit 5 in a\n65.6 ns \u00b1 0.79 ns per loop (mean \u00b1 std. dev. of 7 runs, 10000000 loops each)\n\nIn [96]: %timeit 6 in a  # worst case\n219 ns \u00b1 5.48 ns per loop (mean \u00b1 std. dev. of 7 runs, 1000000 loops each)\n\nIn [97]: %timeit 5 in b\n10.9 \u00b5s \u00b1 217 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)\n</code></pre>\n\n<p>look at this several magnitudes of performance difference, where <code>numpy.array</code> is slower! Certainly this depends on the dimension of the list, and in this particular case depends on the index of 5 or 6 (worst case of O(n) complexity), but you get the idea.</p>\n"}, {"tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": false, "score": 1, "last_activity_date": 1568256886, "creation_date": 1568256886, "answer_id": 57899108, "question_id": 57897942, "link": "https://stackoverflow.com/questions/57897942/what-are-the-downsides-of-always-using-numpy-arrays-instead-of-python-lists/57899108#57899108", "title": "What are the downsides of always using numpy arrays instead of python lists?", "body": "<p>With your small example, the list comprehension is faster than the array method, even when taking the array creation out of the timing loop:</p>\n\n<pre><code>In [204]: list_of_lists = [[\"a\",\"b\",\"c\"], [\"d\",\"e\",\"f\"], [\"g\",\"h\",\"i\"]] \n     ...: flattened_list = [i for j in list_of_lists for i in j]    \n\nIn [205]: timeit [i for j in list_of_lists for i in j]                                                       \n757 ns \u00b1 17.3 ns per loop (mean \u00b1 std. dev. of 7 runs, 1000000 loops each)\n\nIn [206]: np.ravel(list_of_lists)                                                                            \nOut[206]: array(['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i'], dtype='&lt;U1')\n\nIn [207]: timeit np.ravel(list_of_lists)                                                                     \n8.05 \u00b5s \u00b1 12.4 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)\n\nIn [208]: %%timeit x = np.array(list_of_lists) \n     ...: np.ravel(x)                                                                                                     \n2.33 \u00b5s \u00b1 22.8 ns per loop (mean \u00b1 std. dev. of 7 runs, 100000 loops each)\n</code></pre>\n\n<p>With a much larger example, I expect [208] to get better.</p>\n\n<p>If the sublists differ in size, the array is not 2d, and flatten does nothing:</p>\n\n<pre><code>In [209]: list_of_lists = [[\"a\",\"b\",\"c\",23], [\"d\",None,\"f\"], [\"g\",\"h\",\"i\"]] \n     ...: flattened_list = [i for j in list_of_lists for i in j]                                             \nIn [210]: flattened_list                                                                                     \nOut[210]: ['a', 'b', 'c', 23, 'd', None, 'f', 'g', 'h', 'i']\nIn [211]: np.array(list_of_lists)                                                                            \nOut[211]: \narray([list(['a', 'b', 'c', 23]), list(['d', None, 'f']),\n       list(['g', 'h', 'i'])], dtype=object)\n</code></pre>\n\n<p>Growing lists is more efficient:</p>\n\n<pre><code>In [217]: alist = []                                                                                         \nIn [218]: for row in list_of_lists: \n     ...:     alist.append(row) \n     ...:                                                                                                    \nIn [219]: alist                                                                                              \nOut[219]: [['a', 'b', 23], ['d', None, 'f'], ['g', 'h', 'i']]\nIn [220]: np.array(alist)                                                                                    \nOut[220]: \narray([['a', 'b', 23],\n       ['d', None, 'f'],\n       ['g', 'h', 'i']], dtype=object)\n</code></pre>\n\n<p>We strongly discourage iterative concatenation.  Collect the sublists or arrays in a list first.</p>\n"}], "owner": {"reputation": 1, "user_id": 12055596, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d73344a0bc810e4b4f9f50b353381ba?s=128&d=identicon&r=PG&f=1", "display_name": "Bobo the clown", "link": "https://stackoverflow.com/users/12055596/bobo-the-clown"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 211, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1568256886, "creation_date": 1568244478, "question_id": 57897942, "link": "https://stackoverflow.com/questions/57897942/what-are-the-downsides-of-always-using-numpy-arrays-instead-of-python-lists", "title": "What are the downsides of always using numpy arrays instead of python lists?", "body": "<p>I'm writing a program in which I want to flatten an array, so I used the following code:</p>\n\n<pre><code>list_of_lists = [[\"a\",\"b\",\"c\"], [\"d\",\"e\",\"f\"], [\"g\",\"h\",\"i\"]]\nflattened_list = [i for j in list_of_lists for i in j]\n</code></pre>\n\n<p>This results in <code>['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i']</code>, the desired output.</p>\n\n<p>I then found out that using a <code>numpy</code> array, I could've done the same simply by using <code>np.array(((1,2),(3,4),(5,6))).flatten()</code>.</p>\n\n<p>I was wondering if there is any downside to always using <code>numpy</code> arrays in the place of regular Python lists? In other words, is there something that Python lists can do which numpy arrays can't?</p>\n"}, {"tags": ["javascript", "python", "node.js"], "comments": [{"owner": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "edited": false, "score": 0, "creation_date": 1568244433, "post_id": 57897894, "comment_id": 102216717, "body": "your pseudo code is very high level. Have you looked at basic socket tutorials and documentation for python and node?"}, {"owner": {"reputation": 3, "user_id": 11938145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28d29f1191e72c21bdb5ce1dc8e2b44e?s=128&d=identicon&r=PG&f=1", "display_name": "thepronoobkq", "link": "https://stackoverflow.com/users/11938145/thepronoobkq"}, "reply_to_user": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "edited": false, "score": 0, "creation_date": 1568244482, "post_id": 57897894, "comment_id": 102216726, "body": "I know how to do it in python, I can&#39;t figure out the node.js"}], "answers": [{"tags": [], "owner": {"reputation": 2020, "user_id": 3279603, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9zp3k.jpg?s=128&g=1", "display_name": "aminrd", "link": "https://stackoverflow.com/users/3279603/aminrd"}, "is_accepted": true, "score": 1, "last_activity_date": 1568244599, "creation_date": 1568244599, "answer_id": 57897950, "question_id": 57897894, "link": "https://stackoverflow.com/questions/57897894/how-to-use-sockets-to-send-information-from-javascript-to-python/57897950#57897950", "title": "How to use sockets to send information from javascript to python", "body": "<p>You should determine which code is the server and which one is the client. I assume your Python code is your server. \nYou can run a server in python using: </p>\n\n<pre><code>import socket\n\nHOST = '0.0.0.0'\nPORT = 9999    \n\nwith socket.socket(socket.AF_INET, socket.SOCK_STREAM) as s:\n    s.bind((HOST, PORT))\n    s.listen()\n    conn, addr = s.accept()\n    with conn:\n        print('Connected by', addr)\n        while True:\n            data = conn.recv(1024)\n            if not data:\n                break\n            conn.sendall(data)\n</code></pre>\n\n<p>And then you can connect your Nodejs client code to the server: </p>\n\n<pre><code>var net = require('net');\n\nvar HOST = '127.0.0.1';\nvar PORT = 9999;\n\nvar client = new net.Socket();\nclient.connect(PORT, HOST, function() {\n  console.log('CONNECTED TO: ' + HOST + ':' + PORT);\n  // Write a message to the socket as soon as the client is connected, the server will receive it as message from the client\n client.write('Message from client');\n\n});\n\n// Add a 'data' event handler for the client socket\n// data is what the server sent to this socket\nclient.on('data', function(data) {\n  console.log('DATA: ' + data);\n  // Close the client socket completely\n  client.destroy();\n});\n\n// Add a 'close' event handler for the client socket\nclient.on('close', function() {\n  console.log('Connection closed');\n});\n\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 11938145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28d29f1191e72c21bdb5ce1dc8e2b44e?s=128&d=identicon&r=PG&f=1", "display_name": "thepronoobkq", "link": "https://stackoverflow.com/users/11938145/thepronoobkq"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 604, "favorite_count": 0, "accepted_answer_id": 57897950, "answer_count": 1, "score": 0, "last_activity_date": 1568244599, "creation_date": 1568243902, "question_id": 57897894, "link": "https://stackoverflow.com/questions/57897894/how-to-use-sockets-to-send-information-from-javascript-to-python", "title": "How to use sockets to send information from javascript to python", "body": "<p>I want to send information from my Node.js code to Python using sockets. How can I achieve that?</p>\n\n<p>In pseudo-code, what I want is this:</p>\n\n<p>js:</p>\n\n<pre><code>sendInformation(information)\n</code></pre>\n\n<p>python:</p>\n\n<pre><code>recieveInformation()\nsendNewInformation()\n</code></pre>\n\n<p>js:</p>\n\n<pre><code>recievNewInformation()\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "selenium", "xpath"], "answers": [{"comments": [{"owner": {"reputation": 518, "user_id": 6854832, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/071da122e20d0c2f0b694a87adee6af0?s=128&d=identicon&r=PG&f=1", "display_name": "masky007", "link": "https://stackoverflow.com/users/6854832/masky007"}, "edited": false, "score": 1, "creation_date": 1568247481, "post_id": 57898025, "comment_id": 102217294, "body": "Yeah this works, can you explain why is the ., in there? And why my code didn&#39;t work where for the &quot;Start&quot; it worked?"}, {"owner": {"reputation": 25595, "user_id": 202229, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6cc1d82c11563b440c57280ad587ee47?s=128&d=identicon&r=PG", "display_name": "smci", "link": "https://stackoverflow.com/users/202229/smci"}, "edited": false, "score": 0, "creation_date": 1568247556, "post_id": 57898025, "comment_id": 102217308, "body": "@supputuri Please explain what the problem and solution were?"}, {"owner": {"reputation": 12118, "user_id": 4714829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd1b66c22707be26afda19fe995e17ea?s=128&d=identicon&r=PG&f=1", "display_name": "supputuri", "link": "https://stackoverflow.com/users/4714829/supputuri"}, "edited": false, "score": 1, "creation_date": 1568254453, "post_id": 57898025, "comment_id": 102218617, "body": "Check my updated answer and let me know if you have any questions. Don&#39;t forget to <a href=\"https://meta.stackexchange.com/questions/5234/how-does-accepting-an-answer-work\">accept</a> if this/any answer is/was helpful to you and <a href=\"https://stackoverflow.com/help/why-vote\">Upvote</a> for the benefit of the future readers."}, {"owner": {"reputation": 518, "user_id": 6854832, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/071da122e20d0c2f0b694a87adee6af0?s=128&d=identicon&r=PG&f=1", "display_name": "masky007", "link": "https://stackoverflow.com/users/6854832/masky007"}, "edited": false, "score": 1, "creation_date": 1568256163, "post_id": 57898025, "comment_id": 102218905, "body": "@supputuri Just wow - thank you so much for taking the time to give such elaborate answer! Thank you!"}, {"owner": {"reputation": 12118, "user_id": 4714829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd1b66c22707be26afda19fe995e17ea?s=128&d=identicon&r=PG&f=1", "display_name": "supputuri", "link": "https://stackoverflow.com/users/4714829/supputuri"}, "edited": false, "score": 1, "creation_date": 1568257303, "post_id": 57898025, "comment_id": 102219069, "body": "My pleasure. If you fell it&#39;s worthy of throwing some rewards :-) check <a href=\"https://meta.stackexchange.com/questions/16065/how-does-the-bounty-system-work\">Can I award a bounty to an old answer?</a> section how to do it."}, {"owner": {"reputation": 137436, "user_id": 415448, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/P2vVZ.png?s=128&g=1", "display_name": "Michael Kay", "link": "https://stackoverflow.com/users/415448/michael-kay"}, "edited": false, "score": 0, "creation_date": 1568271710, "post_id": 57898025, "comment_id": 102223022, "body": "I would just add one thing, which is that much of the explanation in this answer is specific to XPath 1.0. The expression <code>contains(text(), &#39;End&#39;)</code> in XPath 1.0 examines only the first text node; in XPath 2.0+ it throws an error if there is more than one text node (which is designed to stop people making this common mistake). In both cases using &quot;.&quot; in place of &quot;text()&quot; is the right answer."}, {"owner": {"reputation": 12118, "user_id": 4714829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd1b66c22707be26afda19fe995e17ea?s=128&d=identicon&r=PG&f=1", "display_name": "supputuri", "link": "https://stackoverflow.com/users/4714829/supputuri"}, "edited": false, "score": 0, "creation_date": 1568291506, "post_id": 57898025, "comment_id": 102233455, "body": "Currently Selenium supports XPath 1.0 only, so I did not covered this difference."}], "tags": [], "owner": {"reputation": 12118, "user_id": 4714829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd1b66c22707be26afda19fe995e17ea?s=128&d=identicon&r=PG&f=1", "display_name": "supputuri", "link": "https://stackoverflow.com/users/4714829/supputuri"}, "is_accepted": true, "score": 2, "last_activity_date": 1568254402, "last_edit_date": 1568254402, "creation_date": 1568245354, "answer_id": 57898025, "question_id": 57897885, "link": "https://stackoverflow.com/questions/57897885/xpath-not-finding-the-text-that-is-contained-on-the-web-using-containstext/57898025#57898025", "title": "XPATH not finding the text that is contained on the web - using contains(text())", "body": "<p>Try with the below xpath.</p>\n\n<pre><code>//table//div[contains(.,'End:')]\n</code></pre>\n\n<p><strong>Screenshot:</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/UrcNx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UrcNx.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>Explanation:</strong> Edit 1</p>\n\n<p>First of all let's see how many <code>text()</code> nodes are present under the target <code>div</code>.</p>\n\n<p><a href=\"https://i.stack.imgur.com/lij22.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lij22.png\" alt=\"enter image description here\"></a></p>\n\n<p>So the div have 3 text nodes. </p>\n\n<p>Let me elaborate the original xpath used by OP.</p>\n\n<pre><code>//div[contains(text(), 'End')]\n ^div present anywhere in the document\n     ^which contains\n               ^the **first** text() node with string value as `End`\n</code></pre>\n\n<p>When <kbd>contains()</kbd> is given as its first argument (in <strong>div[argument]</strong>), it takes the <em>string</em> value of the <strong>first</strong> node, but <code>End</code> appears in the second text node, not the first. That's the reason why the xpath did not worked.</p>\n\n<p>We have 2 options to handle this.</p>\n\n<p><strong>1) using text() as the first argument</strong> - By that way it will get all text nodes under current context and then use <code>contains()</code> as a condition to check for the <code>text()</code> value that will match any text() node whose value contains <code>End</code> as shown below.</p>\n\n<pre><code>//div[text()[contains(., 'End')]]\n^div present any where in the document\n     ^which have text() node\n             ^ that contains 'End`\n</code></pre>\n\n<p>Check the below screenshot:</p>\n\n<p><a href=\"https://i.stack.imgur.com/znJ5Q.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/znJ5Q.png\" alt=\"enter image description here\"></a></p>\n\n<p>By this time, you would got a question then why the first xpath (<code>//div[contains(text(), 'Start')]</code>) used by OP worked? </p>\n\n<p>If you look at the text() nodes associated in the div, <code>Start</code> text is present in the 1st text() node itself, that's the reason why he was able to use that xpath.</p>\n\n<p><a href=\"https://i.stack.imgur.com/0nlYC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0nlYC.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>2) Using . to check in current node context</strong> In simple terms when you say <code>.</code> it will check in the entire current element context for the <code>End</code>.</p>\n\n<pre><code>//div[contains(.,'End')]\n</code></pre>\n\n<p>If you don't limit the scopt to <code>//table</code> (at the beginning of the xpath) you will get 5 divs as the ancestor divs of the original div which have this text also be matched with the xpath. So  limit the scope to check with in the table like \n`//table//div[contains(.,'End')]</p>\n"}], "owner": {"reputation": 518, "user_id": 6854832, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/071da122e20d0c2f0b694a87adee6af0?s=128&d=identicon&r=PG&f=1", "display_name": "masky007", "link": "https://stackoverflow.com/users/6854832/masky007"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 57898025, "answer_count": 1, "score": 0, "last_activity_date": 1568255311, "creation_date": 1568243813, "last_edit_date": 1568255311, "question_id": 57897885, "link": "https://stackoverflow.com/questions/57897885/xpath-not-finding-the-text-that-is-contained-on-the-web-using-containstext", "title": "XPATH not finding the text that is contained on the web - using contains(text())", "body": "<p>On this website <a href=\"https://classicdb.ch/?quest=788\" rel=\"nofollow noreferrer\">https://classicdb.ch/?quest=788</a></p>\n\n<p>I tried: </p>\n\n<pre><code>driver.find_element_by_xpath(\n                \"//div[contains(text(), 'Start')]\").text\n</code></pre>\n\n<p>It finds the element and it returns</p>\n\n<pre><code>'Start: Kaltunk'\n</code></pre>\n\n<p>However when I try to find the element that contains \"End\" it doesn't finds anything.</p>\n\n<pre><code>driver.find_element_by_xpath(\n                \"//div[contains(text(), 'End')]\").text\n</code></pre>\n\n<p>Why is this?</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["python", "django"], "comments": [{"owner": {"reputation": 17762, "user_id": 548562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26587173d9156d8ec3114c8700d1b693?s=128&d=identicon&r=PG", "display_name": "Iain Shelvington", "link": "https://stackoverflow.com/users/548562/iain-shelvington"}, "edited": false, "score": 0, "creation_date": 1568243818, "post_id": 57897864, "comment_id": 102216607, "body": "Which version of Django are you using?"}, {"owner": {"reputation": 78, "user_id": 7735559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5beb541a09b3a3575db6ec63432b9b21?s=128&d=identicon&r=PG&f=1", "display_name": "Bob Stone", "link": "https://stackoverflow.com/users/7735559/bob-stone"}, "reply_to_user": {"reputation": 17762, "user_id": 548562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26587173d9156d8ec3114c8700d1b693?s=128&d=identicon&r=PG", "display_name": "Iain Shelvington", "link": "https://stackoverflow.com/users/548562/iain-shelvington"}, "edited": false, "score": 0, "creation_date": 1568244011, "post_id": 57897864, "comment_id": 102216647, "body": "I&#39;m using version 2.2.5"}], "answers": [{"comments": [{"owner": {"reputation": 78, "user_id": 7735559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5beb541a09b3a3575db6ec63432b9b21?s=128&d=identicon&r=PG&f=1", "display_name": "Bob Stone", "link": "https://stackoverflow.com/users/7735559/bob-stone"}, "edited": false, "score": 0, "creation_date": 1568244425, "post_id": 57897915, "comment_id": 102216714, "body": "Thanks, but I was also wondering while creating a registration form, how do I specify what field needs to be filled out when giving an error in django. Right now the error is just &quot;this field is required,&quot; but how do I change this field into the actual field like password, or username or something."}, {"owner": {"reputation": 78, "user_id": 7735559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5beb541a09b3a3575db6ec63432b9b21?s=128&d=identicon&r=PG&f=1", "display_name": "Bob Stone", "link": "https://stackoverflow.com/users/7735559/bob-stone"}, "edited": false, "score": 0, "creation_date": 1568244541, "post_id": 57897915, "comment_id": 102216746, "body": "Yes, I want it to be specified like password is required or username is required, instead of this field is required"}, {"owner": {"reputation": 17762, "user_id": 548562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26587173d9156d8ec3114c8700d1b693?s=128&d=identicon&r=PG", "display_name": "Iain Shelvington", "link": "https://stackoverflow.com/users/548562/iain-shelvington"}, "reply_to_user": {"reputation": 78, "user_id": 7735559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5beb541a09b3a3575db6ec63432b9b21?s=128&d=identicon&r=PG&f=1", "display_name": "Bob Stone", "link": "https://stackoverflow.com/users/7735559/bob-stone"}, "edited": false, "score": 0, "creation_date": 1568245438, "post_id": 57897915, "comment_id": 102216913, "body": "That&#39;s a little more complex, you would have to override the registration form and add these messages there <a href=\"https://stackoverflow.com/questions/1481771/django-override-default-form-error-messages\" title=\"django override default form error messages\">stackoverflow.com/questions/1481771/&hellip;</a>"}], "tags": [], "owner": {"reputation": 17762, "user_id": 548562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26587173d9156d8ec3114c8700d1b693?s=128&d=identicon&r=PG", "display_name": "Iain Shelvington", "link": "https://stackoverflow.com/users/548562/iain-shelvington"}, "is_accepted": true, "score": 2, "last_activity_date": 1568244083, "creation_date": 1568244083, "answer_id": 57897915, "question_id": 57897864, "link": "https://stackoverflow.com/questions/57897864/how-do-i-get-rid-of-the-password-constraints-eg-password-has-to-be-8-character/57897915#57897915", "title": "How do I get rid of the password constraints (eg. password has to be 8 characters, password can&#39;t be too similar to username, etc.) in django", "body": "<p>The setting <a href=\"https://docs.djangoproject.com/en/2.2/topics/auth/passwords/#enabling-password-validation\" rel=\"nofollow noreferrer\">AUTH_PASSWORD_VALIDATORS</a> is a list of validators/constraints that a user's password must pass. If you use <code>startproject</code> these will be set to include both constraints you mention. You can remove them from the setting</p>\n\n<p>For example, this is what the setting looks like from a fresh project started using <code>startproject</code> using the latest version of Django</p>\n\n<pre><code>AUTH_PASSWORD_VALIDATORS = [\n    { # This validates against the username\n        'NAME': 'django.contrib.auth.password_validation.UserAttributeSimilarityValidator',\n    },\n    { # This validates the length\n        'NAME': 'django.contrib.auth.password_validation.MinimumLengthValidator',\n    },\n    {\n        'NAME': 'django.contrib.auth.password_validation.CommonPasswordValidator',\n    },\n    {\n        'NAME': 'django.contrib.auth.password_validation.NumericPasswordValidator',\n    },\n]\n</code></pre>\n"}], "owner": {"reputation": 78, "user_id": 7735559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5beb541a09b3a3575db6ec63432b9b21?s=128&d=identicon&r=PG&f=1", "display_name": "Bob Stone", "link": "https://stackoverflow.com/users/7735559/bob-stone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 1, "accepted_answer_id": 57897915, "answer_count": 1, "score": 1, "last_activity_date": 1568249659, "creation_date": 1568243638, "last_edit_date": 1568249659, "question_id": 57897864, "link": "https://stackoverflow.com/questions/57897864/how-do-i-get-rid-of-the-password-constraints-eg-password-has-to-be-8-character", "title": "How do I get rid of the password constraints (eg. password has to be 8 characters, password can&#39;t be too similar to username, etc.) in django", "body": "<p>I need to get rid of the password constraints in the default django password register system so that a user doesn't need to have the password be eight characters or the password can't be too similar to the username, and be able to add my own password constraints such as a strength detector.</p>\n"}, {"tags": ["python", "string", "python-2.7", "comparison"], "answers": [{"tags": [], "owner": {"reputation": 17762, "user_id": 548562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26587173d9156d8ec3114c8700d1b693?s=128&d=identicon&r=PG", "display_name": "Iain Shelvington", "link": "https://stackoverflow.com/users/548562/iain-shelvington"}, "is_accepted": true, "score": 0, "last_activity_date": 1568243692, "creation_date": 1568243692, "answer_id": 57897869, "question_id": 57897853, "link": "https://stackoverflow.com/questions/57897853/how-do-i-limit-user-input-to-two-possible-strings/57897869#57897869", "title": "How do I limit user input to two possible strings?", "body": "<p>Your condition has an error in it, it should be</p>\n\n<pre><code>if tu != \"F\" and tu != \"C\":\n</code></pre>\n\n<p>To check that a variable is one of multiple values you can use <code>in</code></p>\n\n<pre><code>if tu not in ('F', 'C'):\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 12055547, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDRfi5bIFTAagqRNMsvw3xDpsIhg-1Ob9UvMIxrEg=k-s128", "display_name": "Tim Hill", "link": "https://stackoverflow.com/users/12055547/tim-hill"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "closed_date": 1568244327, "accepted_answer_id": 57897869, "answer_count": 1, "score": 0, "last_activity_date": 1568243692, "creation_date": 1568243512, "question_id": 57897853, "link": "https://stackoverflow.com/questions/57897853/how-do-i-limit-user-input-to-two-possible-strings", "closed_reason": "Duplicate", "title": "How do I limit user input to two possible strings?", "body": "<p>I'm writing a simple algorithm to convert between degrees Celsius and degrees Fahrenheit the rest of the algorithm works perfectly so long as input for tu is limited to either \"F\" or \"C\". however I want to actually prevent users from entering anything but those strings.</p>\n\n<p>I want to replace the commented area with something that will trigger the error message and sys.exit()</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import sys\nt = 0.0\ntu = \"null\"\n\nprint \"This program will convert between degrees C and F.\" \n\nprint \"Input temperature unit. (F or C)\"\ntu = raw_input()\n#if (tu != \"F\" and != \"C\"):\n    #print \"The directions were clear, try again.\"\n    #sys.exit()\n\n\n</code></pre>\n\n<p>Even input that should be allowed triggers the sys.exit(). I obviously don\u2019t want that.</p>\n"}, {"tags": ["python", "json", "replace", "python-requests"], "comments": [{"owner": {"reputation": 11, "user_id": 11860139, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52af8e293c1ecc93231962e2c833d7c6?s=128&d=identicon&r=PG&f=1", "display_name": "pgsteven89", "link": "https://stackoverflow.com/users/11860139/pgsteven89"}, "edited": false, "score": 0, "creation_date": 1568323305, "post_id": 57897788, "comment_id": 102248109, "body": "One thing I did notice, is that if I do   columnNames = json_normalize(data, record_path=[&#39;items&#39;,         [&#39;columnNames&#39;]])  and print columnNames it comes back as a dataframe with each name as a record and those fields don&#39;t show any of the special characters.  But if I then do:  df_rows.columns = columnNames  it works correctly but the column names still have the parenthesis and commas even though they didn&#39;t show in the columnNames dataframe."}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 11860139, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52af8e293c1ecc93231962e2c833d7c6?s=128&d=identicon&r=PG&f=1", "display_name": "pgsteven89", "link": "https://stackoverflow.com/users/11860139/pgsteven89"}, "is_accepted": true, "score": 0, "last_activity_date": 1568839213, "last_edit_date": 1568839213, "creation_date": 1568324976, "answer_id": 57914923, "question_id": 57897788, "link": "https://stackoverflow.com/questions/57897788/replace-function-not-working-when-ran-directly-from-python-requests-reponse/57914923#57914923", "title": "Replace function not working when ran directly from python-requests reponse", "body": "<p>I was able to fix it..... The end</p>\n\n<p>lol, jk</p>\n\n<p>I was able to fix this by sending the column dataframe to a list, running a regex on the list to replace the characters I didn't want, and then set that list as the column names.\nBelow is what fixed it.</p>\n\n<pre><code>columnlist = columnNames[0].to_list()\ncolumnlist = [re.sub(\"[:\\-() ]\",\"\",x) for x in columnlist]\ndf_rows.columns = columnlist\n</code></pre>\n\n<p>Thank you to anyone who may have looked at this.</p>\n\n<p>An update to this is I don't need the regex replace at all. Sending to a list and then directly as the dataframe columns seems to work to not include those special characters.</p>\n"}], "owner": {"reputation": 11, "user_id": 11860139, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52af8e293c1ecc93231962e2c833d7c6?s=128&d=identicon&r=PG&f=1", "display_name": "pgsteven89", "link": "https://stackoverflow.com/users/11860139/pgsteven89"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 57914923, "answer_count": 1, "score": 0, "last_activity_date": 1568839213, "creation_date": 1568242866, "last_edit_date": 1568303769, "question_id": 57897788, "link": "https://stackoverflow.com/questions/57897788/replace-function-not-working-when-ran-directly-from-python-requests-reponse", "title": "Replace function not working when ran directly from python-requests reponse", "body": "<p>I have some code that processes some json data that is received via API. The json is poorly formatted but I've gotten it to process the response so that I get the columns and corresponding rows working correctly and into a pandas dataframe. </p>\n\n<p>However it looks like when processing the column names it's including some special characters that I don't want (parenthesis and a comma) in the column names.</p>\n\n<p>If I process the same json data that's saved to a file on the computer or if I query my mssql server to get the data (I'm saving this data from the API to an MSSQL instance for processing in another program) I am able to run the .replace function and can get it to get rid of the extra characters. </p>\n\n<p>But if I directly process the requests response data into the pandas dataframe and then try using the .replace function on the column names it doesn't work. Either it won't do anything or it will work but it returns all the column names as NaN.</p>\n\n<p>I've tested a number of things including using regex and looked through other posts that may help but have been unable to get anything to work.</p>\n\n<p>I've tried instead to get the column names as a list, using the replace function, and then rename the column names from the list but that also is giving me an error that the lengths don't match. I'd rather not go that second route if possible so I can keep the code smaller.</p>\n\n<pre><code>##This function processes the json file from the desktop\ndef processJsonFile(jsonFile):\n    ##Unpack json file\n    with open(jsonFile) as f:\n        data = json.loads(f)\n    ##unpack rows\n    df_rows = json_normalize(data, record_path=['rows'])\n    df_rows.columns = data['columnNames']\n    return df_rows\n\n##This is the function that processes the json data from the api response\ndef processJsonResponse(jsonFile):\n    ##Unpack json response\n    data = json.loads(jsonFile)\n    ##unpack rows and columns into the dataframe\n    df_rows = json_normalize(data, record_path=['items',['rows']])\n    df_rows.columns = json_normalize(data, record_path=['items', \n       ['columnNames']])\n\n    return df_rows\n\n##process response into dataframe\n##df = processJson(\"incidents.json\")\ndf = pd.DataFrame (columns = {\"(id,)\",\"(lookupName,)\",\"(createdTime,)\"})\n##Remove extra values\ndf.columns = df.columns.str.replace(r'[^a-zA-Z ]\\s?', '')\n</code></pre>\n\n<p>With the above code, if I create the dataframe with the column names that are incorrect and then I run the replace function it works and removes the comma and parenthesis. If I pass through the incidents.json file (which has the same column names as the created dataframe that I tested with) and then run the replace function it works as expected.</p>\n\n<p>However if I take the get request response from my API and pass through the text or content of that response to the processJsonResponse function and then try to run the .replace function it doesn't work. Either it just doesn't do anything or it replaces the column names with \"NaN\" so that isn't helpful.</p>\n\n<p>Preferably I'd like to just pass through the response and be able to format the column names correctly without having to save the response as a file and then open it and process it and I'd prefer not to pass the column data to a list, format the list, then pass that through as the column names. The second option has been causing me some problems with array length not matching.</p>\n\n<p>The json data I'm getting back looks similar to this. </p>\n\n<pre><code>    {\n        \"tableName\": \"incidents\",\n        \"count\": 4,\n        \"columnNames\": [\n            \"id\",\n            \"lookupName\",\n            \"createdTime\",\n            \"updatedTime\"\n        ],\n        \"rows\": [\n            [\n                \"100\",\n                \"1\",\n                \"2015-01-01T00:14:42.000Z\",\n                \"2017-05-02T14:01:03.000Z\"\n            ],\n            [\n                \"101\",\n                \"2\",\n                \"2015-01-01T00:22:56.000Z\",\n                \"2015-01-01T04:34:35.000Z\"\n            ],\n            [\n                \"102\",\n                \"3\",\n                \"2015-01-01T00:29:09.000Z\",\n                \"2015-01-01T00:29:09.000Z\"\n            ],\n            [\n                \"103\",\n                \"4\",\n                \"2015-01-01T00:40:35.000Z\",\n                \"2015-01-01T00:40:35.000Z\"\n            ]\n</code></pre>\n\n<p>]\n}</p>\n\n<p>Any help or insight with why this is acting so weird when processing through the API request response data would be greatly appreciated.</p>\n\n<p>The API request is made using the requests library and is a GET request to an oracle database API. The data sent back is in the JSON format.</p>\n"}, {"tags": ["python", "arrays", "indexing"], "comments": [{"owner": {"reputation": 17762, "user_id": 548562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26587173d9156d8ec3114c8700d1b693?s=128&d=identicon&r=PG", "display_name": "Iain Shelvington", "link": "https://stackoverflow.com/users/548562/iain-shelvington"}, "edited": false, "score": 0, "creation_date": 1568243279, "post_id": 57897769, "comment_id": 102216483, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/8390517/in-python-how-can-i-set-multiple-values-of-a-list-to-zero-simultaneously\">In python how can I set multiple values of a list to zero simultaneously?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 2917, "user_id": 187519, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/nzv7O.jpg?s=128&g=1", "display_name": "Hassan Voyeau", "link": "https://stackoverflow.com/users/187519/hassan-voyeau"}, "is_accepted": true, "score": 1, "last_activity_date": 1568258775, "last_edit_date": 1568258775, "creation_date": 1568242796, "answer_id": 57897782, "question_id": 57897769, "link": "https://stackoverflow.com/questions/57897769/array-index-manipulation-with-multiple-conditions/57897782#57897782", "title": "Array index manipulation with multiple conditions", "body": "<p>You need parenthesis around each condition:</p>\n\n<pre><code>a[(i &gt; 10) &amp; (i &lt; 50)]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3707, "user_id": 9302488, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/097c89e042db32a2510ab6bd328d3b02?s=128&d=identicon&r=PG", "display_name": "Massifox", "link": "https://stackoverflow.com/users/9302488/massifox"}, "is_accepted": false, "score": 0, "last_activity_date": 1568243304, "creation_date": 1568243304, "answer_id": 57897832, "question_id": 57897769, "link": "https://stackoverflow.com/questions/57897769/array-index-manipulation-with-multiple-conditions/57897832#57897832", "title": "Array index manipulation with multiple conditions", "body": "<p>Try this code:</p>\n\n<pre><code>a=np.arange(1,10)\na[(a&gt;3) &amp; (a&lt;7)] = 0\n# output: [1 2 3 0 0 0 7 8 9]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6465, "user_id": 1459669, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/WW5ah.jpg?s=128&g=1", "display_name": "no\u0265\u0287\u028e\u0500\u028ez\u0250\u0279\u0186", "link": "https://stackoverflow.com/users/1459669/no%c9%a5%ca%87%ca%8e%d4%80%ca%8ez%c9%90%c9%b9%c6%86"}, "is_accepted": false, "score": 0, "last_activity_date": 1568248487, "creation_date": 1568248487, "answer_id": 57898308, "question_id": 57897769, "link": "https://stackoverflow.com/questions/57897769/array-index-manipulation-with-multiple-conditions/57898308#57898308", "title": "Array index manipulation with multiple conditions", "body": "<p>You can write this (click for a demo):</p>\n\n<p><a href=\"https://tio.run/#python38pr\" rel=\"nofollow noreferrer\"><code>if i&gt;10 and i&lt;50: l[:] = [0]*len(l)</code></a></p>\n\n<p>Let's break this down:</p>\n\n<p><code>l[:] = value</code> is a slicing statement. This is equivalent to <code>l.__setitem__(slice(), value)</code>. For the built-in list object, leaving out the index to the left of the colon implies an index of zero, and leaving out the index to the right of the colon implies an index of the length of the array minus one. In other words, by leaving out both numbers on the sides of <code>:</code>, we implicitly set the entire list.</p>\n\n<p><code>[0]*len(l)</code> takes a list with a single element, 0, and multiplies it by the length of the list, creating a list of <code>[0, 0, 0, 0, ... 0]</code> as long as the original list.</p>\n\n<hr>\n\n<p>If you want to do this in a single expression, you can write:</p>\n\n<pre><code>           an empty parameter list (slice() uses None,None without arguments \n           |         (which is equivalent to `l[:]`)\n           |\n           |  ternary operator\n           v  vv\nl[slice(**([] if (i &gt; 10 and i &lt; 50) else 0,0))] = [0]*len(l)`\n  ^     ^^\n  |      kwargs argument unpacking\n  |\n  create a slice object -- l[x:y] is just syntactic sugar for l[slice(x, y)\n</code></pre>\n\n<p>This is syntactic sugar for setting <code>[0]*len(l)</code> to <code>l[:]</code> if the condition within holds true and <code>[0]*len(l)</code> to <code>l[0:0]</code> when the condition is false. <code>l[0:0]</code> is an empty range, so nothing changes.</p>\n"}], "owner": {"reputation": 394, "user_id": 10100234, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MxtJg.jpg?s=128&g=1", "display_name": "sebko_iic", "link": "https://stackoverflow.com/users/10100234/sebko-iic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 57897782, "answer_count": 3, "score": 2, "last_activity_date": 1568259706, "creation_date": 1568242687, "last_edit_date": 1568259706, "question_id": 57897769, "link": "https://stackoverflow.com/questions/57897769/array-index-manipulation-with-multiple-conditions", "title": "Array index manipulation with multiple conditions", "body": "<p>I want to change every index in an array that lies between two values.\nI know:</p>\n\n<pre><code>a[a&gt;10]=0\n</code></pre>\n\n<p>will change every index to 0 if the condition that the index itself is greater than 10 is true.\nWhat I now want to achieve is to set every array index to 0 if two conditions are true, if for example the index is greater than 10 and less than 50, but </p>\n\n<p><code>a[a&gt;10 and a&lt;50]=0</code> </p>\n\n<p>won't work.\nI know I can to do this with a few lines of code but I feel like this wouldn't be the most elegant solution therefore my question is something like this possible in a similar elegant way as my simple example above, maybe also a one-liner?</p>\n"}, {"tags": ["python", "pyspark", "user-defined-functions", "try-except", "scipy-optimize"], "comments": [{"owner": {"reputation": 452, "user_id": 4824639, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VaQk.jpg?s=128&g=1", "display_name": "cylim", "link": "https://stackoverflow.com/users/4824639/cylim"}, "edited": false, "score": 1, "creation_date": 1568275207, "post_id": 57897762, "comment_id": 102224719, "body": "Can you give a reproducible example? Try-except clause in PySpark UDF works fine for me."}, {"owner": {"reputation": 31, "user_id": 6855259, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d057d9d19b10f17990ddfab716137708?s=128&d=identicon&r=PG", "display_name": "drdre", "link": "https://stackoverflow.com/users/6855259/drdre"}, "reply_to_user": {"reputation": 452, "user_id": 4824639, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VaQk.jpg?s=128&g=1", "display_name": "cylim", "link": "https://stackoverflow.com/users/4824639/cylim"}, "edited": false, "score": 0, "creation_date": 1568314441, "post_id": 57897762, "comment_id": 102245039, "body": "Just edited my question with more details and reproducible example. Thank you."}], "answers": [{"tags": [], "owner": {"reputation": 1272, "user_id": 3508427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6a80d4e89e47d90ab07ba87f1162fee?s=128&d=identicon&r=PG&f=1", "display_name": "niuer", "link": "https://stackoverflow.com/users/3508427/niuer"}, "is_accepted": true, "score": 0, "last_activity_date": 1568321949, "creation_date": 1568321949, "answer_id": 57914411, "question_id": 57897762, "link": "https://stackoverflow.com/questions/57897762/exception-handling-of-scipy-optimize-curve-fit-in-pyspark-udf/57914411#57914411", "title": "exception handling of scipy.optimize.curve_fit in pyspark UDF", "body": "<p>you need change your exception to: <code>RuntimeError</code> instead of <code>IOError</code>.</p>\n"}], "owner": {"reputation": 31, "user_id": 6855259, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d057d9d19b10f17990ddfab716137708?s=128&d=identicon&r=PG", "display_name": "drdre", "link": "https://stackoverflow.com/users/6855259/drdre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 328, "favorite_count": 0, "accepted_answer_id": 57914411, "answer_count": 1, "score": 2, "last_activity_date": 1568321949, "creation_date": 1568242613, "last_edit_date": 1568314334, "question_id": 57897762, "link": "https://stackoverflow.com/questions/57897762/exception-handling-of-scipy-optimize-curve-fit-in-pyspark-udf", "title": "exception handling of scipy.optimize.curve_fit in pyspark UDF", "body": "<p>I have a <code>scipy.optimize.curve_fit</code> call inside a UDF that might rise exceptions. Is there a way to handle exceptions from outside the UDF?</p>\n\n<p>I tried to handle the exception from inside the UDF but at <code>collect()</code> time the exception is not caught.</p>\n\n<p>I tried:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import numpy as np\nfrom pyspark.sql.functions import udf\nfrom pyspark.sql.types import *\nfrom scipy.optimize import curve_fit\n\ndef fsigmoid(x, x0, l, k):\n    return l / (1.0 + np.exp(-k*(x-x0)))\n\ndef curve_fitter(day_0, day_1, day_2, day_3, day_4, day_5, day_6):   \n    try:\n        # Find sigmoid parameters\n        x = list(range(7))\n        y = [day_0, day_1, day_2, day_3, day_4, day_5, day_6]\n        param_bounds = [[0., 0, -10.], [6., 10., 10.]]\n        (x_0, l, k), _ = curve_fit(fsigmoid, x, y, method='dogbox', bounds=(param_bounds[0], param_bounds[1]), maxfev=100)\n    except IOError as e:\n        (x_0, l, k) = (-1, -1, -1)\n    return (float(x_0), float(l), float(k))\n\n# Define UDF\nudf_return_schema = StructType([\n    StructField(\"x_0\", FloatType(), True),\n    StructField(\"l\", FloatType(), True),\n    StructField(\"k\", FloatType(), True)\n])\nudf_curve_fitter = udf(curve_fitter, udf_return_schema)\n\n# Define df and call UDF\ndata = [(1.6710683580253483, 3.7414496594802005, 5.186749035232343, 8.552623021374485, 0.4000450281109358, 1.7832269020250069, 8.578459510083448)]\ndf = spark.createDataFrame(data, ['day_' + str(i) for i in range(7)])\n\ndf.select([udf_curve_fitter(df['day_0'], df['day_1'], df['day_2'], df['day_3'], df['day_4'], df['day_5'], df['day_6'])]).collect()\n</code></pre>\n\n<p>I expect <code>udf_curve_fitter</code> to return <code>(-1, -1, -1)</code>, instead I get:</p>\n\n<pre><code>---------------------------------------------------------------------------\nPy4JJavaError                             Traceback (most recent call last)\n&lt;ipython-input-1-06f383278c7e&gt; in &lt;module&gt;()\n     30 data = [(1.6710683580253483, 3.7414496594802005, 5.186749035232343, 8.552623021374485, 0.4000450281109358, 1.7832269020250069, 8.578459510083448)]\n     31 df = spark.createDataFrame(data, ['day_' + str(i) for i in range(7)])\n---&gt; 32 df.select([udf_curve_fitter(df['day_0'], df['day_1'], df['day_2'], df['day_3'], df['day_4'], df['day_5'], df['day_6'])]).collect()\n[...]\nPy4JJavaError: An error occurred while calling o130.collectToPython.\n: org.apache.spark.SparkException: Job aborted due to stage failure: Task 1151 in stage 0.0 failed 4 times, most recent failure: Lost task 1151.3 in stage 0.0 (TID 1154, ip-10-0-32-85.ec2.internal, executor 8): org.apache.spark.api.python.PythonException: Traceback (most recent call last):\n  File \"/mnt/eider_environments/EiderPython/local/apollo/env/EiderPython/lib/python3.4/site-packages/pyspark-2.2.1-py3.4.egg/pyspark/worker.py\", line 177, in main\n    process()\n  File \"/mnt/eider_environments/EiderPython/local/apollo/env/EiderPython/lib/python3.4/site-packages/pyspark-2.2.1-py3.4.egg/pyspark/worker.py\", line 172, in process\n    serializer.dump_stream(func(split_index, iterator), outfile)\n  File \"/mnt/eider_environments/EiderPython/local/apollo/env/EiderPython/lib/python3.4/site-packages/pyspark-2.2.1-py3.4.egg/pyspark/serializers.py\", line 220, in dump_stream\n    self.serializer.dump_stream(self._batched(iterator), stream)\n  File \"/mnt/eider_environments/EiderPython/local/apollo/env/EiderPython/lib/python3.4/site-packages/pyspark-2.2.1-py3.4.egg/pyspark/serializers.py\", line 138, in dump_stream\n    for obj in iterator:\n  File \"/mnt/eider_environments/EiderPython/local/apollo/env/EiderPython/lib/python3.4/site-packages/pyspark-2.2.1-py3.4.egg/pyspark/serializers.py\", line 209, in _batched\n    for item in iterator:\n  File \"&lt;string&gt;\", line 1, in &lt;lambda&gt;\n  File \"/mnt/eider_environments/EiderPython/local/apollo/env/EiderPython/lib/python3.4/site-packages/pyspark-2.2.1-py3.4.egg/pyspark/worker.py\", line 69, in &lt;lambda&gt;\n    return lambda *a: toInternal(f(*a))\n  File \"&lt;ipython-input-1-06f383278c7e&gt;\", line 16, in curve_fitter\n  File \"/mnt/eider_environments/EiderPython/local/apollo/env/EiderPython/lib/python3.4/site-packages/scipy/optimize/minpack.py\", line 750, in curve_fit\n    raise RuntimeError(\"Optimal parameters not found: \" + res.message)\nRuntimeError: Optimal parameters not found: The maximum number of function evaluations is exceeded.\n</code></pre>\n"}, {"tags": ["python", "pandas", "pandas-groupby"], "answers": [{"tags": [], "owner": {"reputation": 31306, "user_id": 9081267, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/1knzv.jpg?s=128&g=1", "display_name": "Erfan", "link": "https://stackoverflow.com/users/9081267/erfan"}, "is_accepted": true, "score": 2, "last_activity_date": 1568243667, "creation_date": 1568243667, "answer_id": 57897867, "question_id": 57897734, "link": "https://stackoverflow.com/questions/57897734/conditional-group-by-statement/57897867#57897867", "title": "Conditional Group By Statement", "body": "<p>You were quite close, after your groupby, filter your data on <code>PRODUCT == 30</code>, groupby on date again and then divide the size product by the original <code>avg_summary</code>:</p>\n\n<pre><code>s = df.query('PRODUCT==30').groupby('DATE')['PRODUCT'].size().to_numpy()\navg_summary['PRODUCT'] = s / avg_summary['PRODUCT'] * 100\n</code></pre>\n\n<p><strong>output</strong></p>\n\n<pre><code>      DATE  SPEED  HEIGHT  LENGTH  PRODUCT\n0  2019-08  11.75       7     9.5     75.0\n1  2019-09  11.00       8     6.0     40.0\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 64, "user_id": 8995336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wYyc4.png?s=128&g=1", "display_name": "Jonas Juhler", "link": "https://stackoverflow.com/users/8995336/jonas-juhler"}, "is_accepted": false, "score": 1, "last_activity_date": 1568243671, "creation_date": 1568243671, "answer_id": 57897868, "question_id": 57897734, "link": "https://stackoverflow.com/questions/57897734/conditional-group-by-statement/57897868#57897868", "title": "Conditional Group By Statement", "body": "<p>You could combine the two things that you were talking about and I think that this will get you what you want. </p>\n\n<pre><code>counts = df[df['PRODUCT']==30].groupby(['DATE']).agg({'PRODUCT': 'count'}).reset_index()\n\navg_summary['PRODUCT'] = (counts['PRODUCT'] / avg_summary['PRODUCT'])*100\n</code></pre>\n\n<p>First off you filter on the PRODUCT=30 and then you group by DATE, which gives you the counts by month of PRODUCT=30.</p>\n"}, {"tags": [], "owner": {"reputation": 957, "user_id": 10740966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07256f72861352f5f9d0b5d82936f9e1?s=128&d=identicon&r=PG&f=1", "display_name": "manwithfewneeds", "link": "https://stackoverflow.com/users/10740966/manwithfewneeds"}, "is_accepted": false, "score": 1, "last_activity_date": 1568249139, "creation_date": 1568249139, "answer_id": 57898359, "question_id": 57897734, "link": "https://stackoverflow.com/questions/57897734/conditional-group-by-statement/57898359#57898359", "title": "Conditional Group By Statement", "body": "<p>You could also write an inline function to pass in for the product column.  An f-string can be used if you want the % sign in the column:</p>\n\n<pre><code>df = (df.groupby('DATE', as_index=False)\n        .agg({'SPEED': 'mean',\n              'HEIGHT': 'mean',\n              'LENGTH': 'mean',\n              'PRODUCT': lambda x: f'{100*(x.eq(30).sum()/len(x)):.0f}%'})\n      )\n\n\nprint(df)\n\n      DATE  SPEED  HEIGHT  LENGTH PRODUCT\n0  2019-08  11.75       7     9.5     75%\n1  2019-09  11.00       8     6.0     40%\n</code></pre>\n"}], "owner": {"reputation": 445, "user_id": 11831806, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Ft17asFByR4/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfRMl72ErQTkvGaz7cJQxW7VJcduA/photo.jpg?sz=128", "display_name": "dfahsjdahfsudaf", "link": "https://stackoverflow.com/users/11831806/dfahsjdahfsudaf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 57897867, "answer_count": 3, "score": 1, "last_activity_date": 1568249139, "creation_date": 1568242318, "question_id": 57897734, "link": "https://stackoverflow.com/questions/57897734/conditional-group-by-statement", "title": "Conditional Group By Statement", "body": "<p>I have the data frame : </p>\n\n<pre><code>  PRODUCT  SPEED  HEIGHT  LENGTH      DATE\n      30       10    5       8         2019-08\n      30       13    9       15        2019-08\n      31       19    8       12        2019-08\n      30       5     6       3         2019-08\n      31       11    8       6         2019-09\n      30       11    8       6         2019-09\n      30       11    8       6         2019-09\n      31       11    8       6         2019-09\n      31       11    8       6         2019-09\n</code></pre>\n\n<p>I want to produce a table that has the averages for SPEED, HEIGHT, LENGTH by month. I also want to have a column in that table that has the percentage of the total PRODUCT per month when PRODUCT=30.</p>\n\n<p>My desired output:</p>\n\n<pre><code>  DATE      SPEED   HEIGHT   LENGTH   PRODUCT\n  2019-08    11.75    7        9.5      75%\n  2019-09     11      8         6       40%\n</code></pre>\n\n<p>I have the following code:</p>\n\n<pre><code>avg_summary = df.groupby(['DATE']).agg({'SPEED': 'mean',\n                                         'HEIGHT' : 'mean',\n                                         'LENGTH': 'mean',\n                                         'PRODUCT': 'count'}).reset_index()\n</code></pre>\n\n<p>This outputs:</p>\n\n<pre><code>  DATE      SPEED   HEIGHT   LENGTH   PRODUCT\n  2019-08    11.75    7        9.5      4\n  2019-09     11      8         6       5\n</code></pre>\n\n<p>I know I can do <code>(df[df.PRODUCT == 30].shape[0])</code>to find the count in the whole data frame for when PRODUCT == 30, but I cannot figure out how to count the number of instances for when PRODUCT=30 by month. </p>\n\n<p>I figured I could divide the number of instances for when PRODUCT=30 by the total count of PRODUCT to get the result I am looking for.</p>\n\n<p>Any help/tips would be very appreciated! Thanks.</p>\n"}, {"tags": ["python", "arrays", "numpy", "multidimensional-array"], "comments": [{"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1568243633, "post_id": 57897700, "comment_id": 102216550, "body": "Following that SO link I&#39;d suggest looking at <code>x.strides</code> and <code>x.shape</code> after various operations.  Start by looking at how <code>strides</code> changes when doing the transpose."}, {"owner": {"reputation": 1276, "user_id": 9219425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd28593a1ccb28d6e7408b5a2d5df832?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/9219425/tim"}, "reply_to_user": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1568245578, "post_id": 57897700, "comment_id": 102216938, "body": "Hehe I did look into these... quite extensively! \ud83e\udd2a\ud83d\ude35 See the edit to my question and/or my comment on your answer. I&#39;ll try to neaten up the algorithm to add that to my question tomorrow."}], "answers": [{"comments": [{"owner": {"reputation": 1276, "user_id": 9219425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd28593a1ccb28d6e7408b5a2d5df832?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/9219425/tim"}, "edited": false, "score": 0, "creation_date": 1568245421, "post_id": 57897893, "comment_id": 102216908, "body": "Thanks! I actually experimented a lot with shape and strides - but that was hidden in my oblique reference to writing an algorithm to mimick what&#39;s described in that SO question. The difficulty I ran into is with &quot;partial&quot; transpositions, i.e. when you&#39;re not just doing <code>.T</code> but are doing <code>.tranpose()</code> and passing in arguments where it&#39;s not just your axes in reverse order.  I think the strides have to be completely recalculated if you don&#39;t do a full <code>.T</code>, at which point my algorithm was more complicated than it seemed to have a chance of bringing clarity."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "reply_to_user": {"reputation": 1276, "user_id": 9219425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd28593a1ccb28d6e7408b5a2d5df832?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/9219425/tim"}, "edited": false, "score": 0, "creation_date": 1568250925, "post_id": 57897893, "comment_id": 102217900, "body": "Looking at the strides for a partial transpose, I don&#39;t see how reshape with order can do anything similar.  Frankly transpose is clear enough to me; I don&#39;t do much with order."}], "tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": false, "score": 2, "last_activity_date": 1568250744, "last_edit_date": 1568250744, "creation_date": 1568243898, "answer_id": 57897893, "question_id": 57897700, "link": "https://stackoverflow.com/questions/57897700/are-there-rules-for-the-interaction-between-numpy-reshape-and-transpose/57897893#57897893", "title": "Are there rules for the interaction between numpy reshape() and transpose()?", "body": "<p>I'm not going to try to go through all your cases (for now), but here's an illustration of how reshape, transpose, and order interact:</p>\n\n<pre><code>In [176]: x = np.arange(12)                                                                                  \nIn [177]: x.strides, x.shape                                                                                 \nOut[177]: ((8,), (12,))\nIn [178]: y = x.reshape(3,4)                                                                                 \nIn [179]: y.strides, y.shape                                                                                 \nOut[179]: ((32, 8), (3, 4))        # (32=4*8)\nIn [180]: z = y.T                                                                                            \nIn [181]: z.strides, z.shape                                                                                 \nOut[181]: ((8, 32), (4, 3))         # strides has been switched\nIn [182]: w = x.reshape(4,3, order='F')                                                                      \nIn [183]: w.strides, w.shape                                                                                 \nOut[183]: ((8, 32), (4, 3))\nIn [184]: z                                                                                                  \nOut[184]: \narray([[ 0,  4,  8],\n       [ 1,  5,  9],\n       [ 2,  6, 10],\n       [ 3,  7, 11]])\nIn [185]: w                                                                                                  \nOut[185]: \narray([[ 0,  4,  8],\n       [ 1,  5,  9],\n       [ 2,  6, 10],\n       [ 3,  7, 11]])\n</code></pre>\n\n<p>The <code>reshape</code> with 'F' produces the same thing as a transpose.</p>\n\n<p><code>ravel</code>, which is essentially <code>reshape(-1)</code> (to 1d) </p>\n\n<pre><code>In [186]: w.ravel()     # order C                                                                                          \nOut[186]: array([ 0,  4,  8,  1,  5,  9,  2,  6, 10,  3,  7, 11])\nIn [187]: w.ravel(order='F')                                                                                 \nOut[187]: array([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11])\n</code></pre>\n\n<p>Note that <code>w</code> (and <code>z</code>) is a <code>view</code> of <code>x</code>:</p>\n\n<pre><code>In [190]: w.base                                                                                             \nOut[190]: array([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11])\nIn [191]: x.__array_interface__                                                                              \nOut[191]: \n{'data': (139649452400704, False),\n 'strides': None,\n 'descr': [('', '&lt;i8')],\n 'typestr': '&lt;i8',\n 'shape': (12,),\n 'version': 3}\nIn [192]: w.__array_interface__                                                                              \nOut[192]: \n{'data': (139649452400704, False),   # same data buffer address\n 'strides': (8, 32),\n 'descr': [('', '&lt;i8')],\n 'typestr': '&lt;i8',\n 'shape': (4, 3),\n 'version': 3}\n</code></pre>\n\n<p>for a partial transpose:</p>\n\n<pre><code>In [194]: x = np.arange(24)                                                                                  \nIn [195]: y = x.reshape(2,3,4)                                                                               \nIn [196]: y.strides                                                                                          \nOut[196]: (96, 32, 8)\nIn [197]: z = y.transpose(1,0,2)                                                                             \nIn [198]: z                                                                                                  \nOut[198]: \narray([[[ 0,  1,  2,  3],\n        [12, 13, 14, 15]],\n\n       [[ 4,  5,  6,  7],\n        [16, 17, 18, 19]],\n\n       [[ 8,  9, 10, 11],\n        [20, 21, 22, 23]]])\nIn [199]: z.shape                                                                                            \nOut[199]: (3, 2, 4)\nIn [200]: z.strides                                                                                          \nOut[200]: (32, 96, 8)\n</code></pre>\n\n<p>The partial transpose has permuted shape and strides.  The result is neither order F or C.</p>\n\n<p>Element order in the base:</p>\n\n<pre><code>In [201]: z.ravel(order='K')                                                                                 \nOut[201]: \narray([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16,\n       17, 18, 19, 20, 21, 22, 23])\n</code></pre>\n\n<p>Order going by rows:</p>\n\n<pre><code>In [202]: z.ravel(order='C')                                                                                 \nOut[202]: \narray([ 0,  1,  2,  3, 12, 13, 14, 15,  4,  5,  6,  7, 16, 17, 18, 19,  8,\n        9, 10, 11, 20, 21, 22, 23])\n</code></pre>\n\n<p>order going by columns:</p>\n\n<pre><code>In [203]: z.ravel(order='F')                                                                                 \nOut[203]: \narray([ 0,  4,  8, 12, 16, 20,  1,  5,  9, 13, 17, 21,  2,  6, 10, 14, 18,\n       22,  3,  7, 11, 15, 19, 23])\n</code></pre>\n"}], "owner": {"reputation": 1276, "user_id": 9219425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd28593a1ccb28d6e7408b5a2d5df832?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/9219425/tim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1568250744, "creation_date": 1568242046, "last_edit_date": 1568244704, "question_id": 57897700, "link": "https://stackoverflow.com/questions/57897700/are-there-rules-for-the-interaction-between-numpy-reshape-and-transpose", "title": "Are there rules for the interaction between numpy reshape() and transpose()?", "body": "<p>I've put this question in quite a bit of context, to hopefully make it easier to understand, but feel free to skip down to the actual question.</p>\n\n<hr>\n\n<h2>Context</h2>\n\n<p>Here is the work I was doing which sparked this question:</p>\n\n<p>I'm working with an API to access some tabular data, which is effectively a labelled N-dimensional array. The data is returned as a flattened list of lists (of the actual data values), plus a list of the different axes and their labels, e.g.:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>raw_data = [\n    ['nrm', 'nrf'],\n    ['ngm', 'ngf'],\n    ['nbm', 'nbf'],\n    ['srm', 'srf'],\n    ['sgm', 'sgf'],\n    ['sbm', 'sbf'],\n    ['erm', 'erf'],\n    ['egm', 'egf'],\n    ['ebm', 'ebf'],\n    ['wrm', 'wrf'],\n    ['wgm', 'wgf'],\n    ['wbm', 'wbf'],\n]\n\naxes = [\n    ('Gender', ['Male', 'Female']),\n    ('Color', ['Red', 'Green', 'Blue']),\n    ('Location', ['North', 'South', 'East', 'West']),\n]\n</code></pre>\n\n<p>The data is normally numeric, but I've used strings here so you can easily see how it matches up with the labels, e.g. <code>nrm</code> is the value for <code>North, Red, Male</code>.</p>\n\n<p>The data loops through axis 0 as you go across (within) a list, and then loops through axes 1 and 2 as you go down the lists, with axis 1 (on the \"inside\") varying most rapidly, then 2 (and for higher-dimensional data continuing to work \"outwards\"), viz:</p>\n\n<pre><code>       axis 0 -&gt;\na a [ # # # # # # ]\nx x [ # # # # # # ]\ni i [ # # # # # # ]\ns s [ #  R A W  # ]\n    [ # D A T A # ]\n2 1 [ # # # # # # ]\n\u2193 \u2193 [ # # # # # # ]\n    [ # # # # # # ]\n</code></pre>\n\n<p>I want to reshape this data and match it up with its labels, which I did using the following to output it into a Pandas (multi-index) DataFrame:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import numpy as np\nimport pandas as pd\n\nnames = [name for (name, _) in axes]\nlabels = [labels for (_, labels) in axes]\n\nsizes = tuple(len(L) for L in labels)  # (2, 3, 4)\ndata_as_array = np.array(raw_data)  # shape = (12, 2) = (3*4, 2)\nA = len(sizes)  # number of axes\nnew_shape = (*sizes[1:],sizes[0])  # (3, 4, 2)\n\ndata = data_as_array.reshape(new_shape, order=\"F\").transpose(A - 1, *range(A - 1))\n# With my numbers: data_as_array.reshape((3, 4, 2), order=\"F\").transpose(2, 0, 1)\n\ndf = pd.DataFrame(\n    data.ravel(),\n    index=pd.MultiIndex.from_product(labels, names=names),\n    columns=[\"Value\"],\n)\n\n</code></pre>\n\n<p>(I've noted with comments what some of the particular values are for my example, but the code is meant to be generalised for any N-dimensional data.)</p>\n\n<p>This gives:</p>\n\n<pre><code>                      Value\nGender Color Location      \nMale   Red   North      nrm\n             South      srm\n             East       erm\n             West       wrm\n       Green North      ngm\n             South      sgm\n             East       egm\n             West       wgm\n       Blue  North      nbm\n             South      sbm\n             East       ebm\n             West       wbm\nFemale Red   North      nrf\n             South      srf\n             East       erf\n             West       wrf\n       Green North      ngf\n             South      sgf\n             East       egf\n             West       wgf\n       Blue  North      nbf\n             South      sbf\n             East       ebf\n             West       wbf\n</code></pre>\n\n<p>This is all as desired and expected, and you can see that the values have ended up in the correct places, i.e. attached to their matching labels.</p>\n\n<hr>\n\n<h2>Question</h2>\n\n<p>My <em><strong>actual question</strong></em> concerns this line:</p>\n\n<p><code>data = data_as_array.reshape(new_shape, order=\"F\").transpose(A - 1, *range(A - 1))</code></p>\n\n<p>which with the specific numbers in my example was:</p>\n\n<p><code>data = data_as_array.reshape((3, 4, 2), order=\"F\").transpose(2, 0, 1)</code></p>\n\n<p>After some experimentation, I discovered that all three of the following are equivalent (the first is the original version):</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>data1 = data_as_array.reshape(new_shape, order=\"F\").transpose(D - 1, *range(D - 1))\ndata2 = data_as_array.T.reshape(*reversed(new_shape)).T.transpose(D - 1, *range(D - 1))\ndata3 = data_as_array.reshape(*reversed(sizes)).T\n</code></pre>\n\n<p>But this got me thinking (and here is my question at last!): </p>\n\n<p><strong>Are there any rules that I could use to manipulate the expression, to get from e.g. <code>data1</code> to <code>data3</code>?</strong></p>\n\n<p>In particular, it seems like <code>transpose()</code> and <code>reshape()</code> are closely linked and that there might be a way to \"absorb\" the action of the tranpose into the <code>reshape()</code>, so that you can drop it or at least transform it into a neater <code>.T</code> (as per <code>data3</code>).</p>\n\n<hr>\n\n<h3>My attempt</h3>\n\n<p>I managed to establish the following rule:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>a.reshape(shape, order=\"F\") == a.T.reshape(*reversed(shape)).T\n</code></pre>\n\n<p>You can apply <code>.T</code> to both sides, or substitute <code>a.T</code> in for <code>a</code> to get these variations of it:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>a.reshape(shape) == a.T.reshape(*reversed(shape), order=\"F\").T\na.reshape(shape).T == a.T.reshape(*reversed(shape), order=\"F\")\na.T.reshape(shape) == a.reshape(*reversed(shape), order=\"F\").T\n\na.reshape(shape, order=\"F\") == a.T.reshape(*reversed(shape)).T\na.reshape(shape, order=\"F\").T == a.T.reshape(*reversed(shape))\na.T.reshape(shape, order=\"F\") == a.reshape(*reversed(shape)).T\n</code></pre>\n\n<p>I think this is effectively <em>the definition</em> of the difference between row-major and column-major ordering, and how they relate.</p>\n\n<p>But what I <em>haven't</em> managed to do is show is how you can go from:</p>\n\n<p><code>data = data_as_array.reshape((3, 4, 2), order=\"F\").transpose(2, 0, 1)</code></p>\n\n<p>to:</p>\n\n<p><code>data = data_as_array.reshape((4, 3, 2))</code></p>\n\n<p>So somehow put the transposition into the reshape.</p>\n\n<p>But I'm not even sure if this is generally true, or is specific to my data or e.g. 3 dimensions.</p>\n\n<p><strong>EDIT</strong>: \nTo clarify, I'm reasonably happy with how a straight-up <code>.T</code> transpose works, and the rules above cover that. (Note that <code>.T</code> is equivalent to <code>.tranpose(2, 1, 0)</code> for 3 axes, or <code>.tranpose(n-1, n-2, ... 2, 1, 0)</code> for the general case of <code>n</code> axes.)</p>\n\n<p>It's the case of using <code>.transpose()</code> where you're doing a \"partial\" transpose that I'm curious about, e.g. <code>.tranpose(1, 0, 2)</code> - where you're doing something other than just reversing the order of the axes.</p>\n\n<hr>\n\n<p>Some references:</p>\n\n<ul>\n<li>This covers row-major and column-major differences: <a href=\"https://stackoverflow.com/questions/15988832/how-do-you-unroll-a-numpy-array-of-mxn-dimentions-into-a-single-vector/15993759#15993759\">How do you unroll a Numpy array of (mxn) dimentions into a single vector</a> (and I can quite easily see how that's happening in my data)</li>\n<li>This SO answer is really helpful in explaining transposing, and basically covers reshaping as well: <a href=\"https://stackoverflow.com/a/32034565/9219425\">https://stackoverflow.com/a/32034565/9219425</a> (check out the <em>fantastic</em> diagrams!), including covering how transposing affects shape and strides. I wrote an algorithm mimicking this process to see if that would make things clearer (e.g. transposing might correspond to swapping the order of the <code>for</code> loops in the algorithm), but it didn't really help.</li>\n</ul>\n"}, {"tags": ["python", "python-3.x", "pandas", "csv", "dictionary"], "comments": [{"owner": {"reputation": 17762, "user_id": 548562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26587173d9156d8ec3114c8700d1b693?s=128&d=identicon&r=PG", "display_name": "Iain Shelvington", "link": "https://stackoverflow.com/users/548562/iain-shelvington"}, "edited": false, "score": 0, "creation_date": 1568242422, "post_id": 57897697, "comment_id": 102216285, "body": "Please provide some examples"}, {"owner": {"reputation": 1210, "user_id": 5028532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f50c017af1ddc79a80bc3f92e94521a4?s=128&d=identicon&r=PG&f=1", "display_name": "razdi", "link": "https://stackoverflow.com/users/5028532/razdi"}, "edited": false, "score": 0, "creation_date": 1568242442, "post_id": 57897697, "comment_id": 102216289, "body": "Can you expand on where these csv files are coming from?"}, {"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 1, "creation_date": 1568242498, "post_id": 57897697, "comment_id": 102216305, "body": "Welcome to SO. This isn&#39;t a discussion forum or tutorial. Please take the <a href=\"https://stackoverflow.com/tour\">tour</a> and take the time to read <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> and the other links found on that page."}, {"owner": {"reputation": 21, "user_id": 11094227, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dfdf6f7158d02ed27c5c0e6d4059f8e?s=128&d=identicon&r=PG&f=1", "display_name": "Amitya Agarwal", "link": "https://stackoverflow.com/users/11094227/amitya-agarwal"}, "edited": false, "score": 0, "creation_date": 1568242533, "post_id": 57897697, "comment_id": 102216315, "body": "I already have these csv files downloaded."}, {"owner": {"reputation": 3527, "user_id": 6925185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba6bd7821971973c8143f31356c85df3?s=128&d=identicon&r=PG&f=1", "display_name": "jottbe", "link": "https://stackoverflow.com/users/6925185/jottbe"}, "edited": false, "score": 0, "creation_date": 1568242589, "post_id": 57897697, "comment_id": 102216330, "body": "Where do you get the symbol from? is it contained in the file as well or is it a part of the filename?"}, {"owner": {"reputation": 21, "user_id": 11094227, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dfdf6f7158d02ed27c5c0e6d4059f8e?s=128&d=identicon&r=PG&f=1", "display_name": "Amitya Agarwal", "link": "https://stackoverflow.com/users/11094227/amitya-agarwal"}, "reply_to_user": {"reputation": 3527, "user_id": 6925185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba6bd7821971973c8143f31356c85df3?s=128&d=identicon&r=PG&f=1", "display_name": "jottbe", "link": "https://stackoverflow.com/users/6925185/jottbe"}, "edited": false, "score": 0, "creation_date": 1568244774, "post_id": 57897697, "comment_id": 102216798, "body": "It&#39;s a part of the filename. It&#39;s not there in the file. @jottbe"}, {"owner": {"reputation": 25595, "user_id": 202229, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6cc1d82c11563b440c57280ad587ee47?s=128&d=identicon&r=PG", "display_name": "smci", "link": "https://stackoverflow.com/users/202229/smci"}, "edited": false, "score": 0, "creation_date": 1568248032, "post_id": 57897697, "comment_id": 102217392, "body": "What does <i>&quot;Each CSV file has the data such as Open, High, Low, etc. but not necessarily the same name&quot;</i> mean? That the names might be slightly different like &#39;opening&#39;/&#39;closing&#39;? or some keys might be missing? or what?"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 11094227, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dfdf6f7158d02ed27c5c0e6d4059f8e?s=128&d=identicon&r=PG&f=1", "display_name": "Amitya Agarwal", "link": "https://stackoverflow.com/users/11094227/amitya-agarwal"}, "edited": false, "score": 0, "creation_date": 1568244894, "post_id": 57897802, "comment_id": 102216812, "body": "I get an error in doing &#39;for row in reader&#39;, the error message says that list has no attribute split. Also, I do have a csv but I don&#39;t know how to send it to you."}, {"owner": {"reputation": 3730, "user_id": 5616096, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PjKci.jpg?s=128&g=1", "display_name": "Matthew Gaiser", "link": "https://stackoverflow.com/users/5616096/matthew-gaiser"}, "reply_to_user": {"reputation": 21, "user_id": 11094227, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dfdf6f7158d02ed27c5c0e6d4059f8e?s=128&d=identicon&r=PG&f=1", "display_name": "Amitya Agarwal", "link": "https://stackoverflow.com/users/11094227/amitya-agarwal"}, "edited": false, "score": 0, "creation_date": 1568245067, "post_id": 57897802, "comment_id": 102216847, "body": "13mdg5@queensu.ca is my email. Or consider using <a href=\"https://justbeamit.com\" rel=\"nofollow noreferrer\">justbeamit.com</a>. And if row is a list, then perhaps that particular line is not required."}, {"owner": {"reputation": 3730, "user_id": 5616096, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PjKci.jpg?s=128&g=1", "display_name": "Matthew Gaiser", "link": "https://stackoverflow.com/users/5616096/matthew-gaiser"}, "reply_to_user": {"reputation": 21, "user_id": 11094227, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dfdf6f7158d02ed27c5c0e6d4059f8e?s=128&d=identicon&r=PG&f=1", "display_name": "Amitya Agarwal", "link": "https://stackoverflow.com/users/11094227/amitya-agarwal"}, "edited": false, "score": 0, "creation_date": 1568246407, "post_id": 57897802, "comment_id": 102217083, "body": "Happy to help. Any more questions, just comment here."}, {"owner": {"reputation": 3527, "user_id": 6925185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba6bd7821971973c8143f31356c85df3?s=128&d=identicon&r=PG&f=1", "display_name": "jottbe", "link": "https://stackoverflow.com/users/6925185/jottbe"}, "reply_to_user": {"reputation": 25595, "user_id": 202229, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6cc1d82c11563b440c57280ad587ee47?s=128&d=identicon&r=PG", "display_name": "smci", "link": "https://stackoverflow.com/users/202229/smci"}, "edited": false, "score": 0, "creation_date": 1568276343, "post_id": 57897802, "comment_id": 102225229, "body": "@smci: how exactly would you do that? I mean the question is not about writing/reading data, that is already in a dictionary-like structure, but reading data in table-like-structure and reading it into dictionaries. So it would rather be <code>df.to_dict</code> I think, but this wouldn&#39;t update an existing dictionary but create a new one for each symbol, so it would not work if there are several files with data for the same symbol."}], "tags": [], "owner": {"reputation": 3730, "user_id": 5616096, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PjKci.jpg?s=128&g=1", "display_name": "Matthew Gaiser", "link": "https://stackoverflow.com/users/5616096/matthew-gaiser"}, "is_accepted": false, "score": 1, "last_activity_date": 1568245850, "last_edit_date": 1568245850, "creation_date": 1568242956, "answer_id": 57897802, "question_id": 57897697, "link": "https://stackoverflow.com/questions/57897697/loading-multiple-csv-files-into-one-nested-dictionary/57897802#57897802", "title": "Loading multiple CSV files into one nested dictionary", "body": "<p><s>I don't have a CSV like yours on me, but here is what I came up with. If you have a CSV I can play with, I will happily test it and make improvements. </s></p>\n\n<p>At the very least it seems to work with the AAPL.csv right now. </p>\n\n<p><strong>Updated Version:</strong></p>\n\n<pre><code>import csv\nmarket_data = {}\nlist_of_files = ['AAPL.csv']\nfor file in list_of_files:\n        f = open(file, 'rt')\n        reader = csv.reader(f)\n        market_data[file] = {}\n        flag = False\n        headers = 0\n        for row in reader:\n                if (flag == False):\n                        headers = row\n                        for header in headers:\n                                market_data[file][header] = []\n                                flag = True\n                else:\n                        data = row\n                        print(data)\n                        for a, header in zip(data, headers):\n                                market_data[file][header].append(a)\n\nprint(market_data)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 21, "user_id": 11094227, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dfdf6f7158d02ed27c5c0e6d4059f8e?s=128&d=identicon&r=PG&f=1", "display_name": "Amitya Agarwal", "link": "https://stackoverflow.com/users/11094227/amitya-agarwal"}, "edited": false, "score": 0, "creation_date": 1568245058, "post_id": 57897811, "comment_id": 102216845, "body": "This only stores the information of the last file in the list for some reason"}, {"owner": {"reputation": 3527, "user_id": 6925185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba6bd7821971973c8143f31356c85df3?s=128&d=identicon&r=PG&f=1", "display_name": "jottbe", "link": "https://stackoverflow.com/users/6925185/jottbe"}, "reply_to_user": {"reputation": 21, "user_id": 11094227, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dfdf6f7158d02ed27c5c0e6d4059f8e?s=128&d=identicon&r=PG&f=1", "display_name": "Amitya Agarwal", "link": "https://stackoverflow.com/users/11094227/amitya-agarwal"}, "edited": false, "score": 0, "creation_date": 1568247390, "post_id": 57897811, "comment_id": 102217275, "body": "You&#39;re welcome. You probably looked at <code>symbol_dict</code>. The <code>result_dict</code> contains the infos of all files, I just verified that."}, {"owner": {"reputation": 21, "user_id": 11094227, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dfdf6f7158d02ed27c5c0e6d4059f8e?s=128&d=identicon&r=PG&f=1", "display_name": "Amitya Agarwal", "link": "https://stackoverflow.com/users/11094227/amitya-agarwal"}, "edited": false, "score": 1, "creation_date": 1568314119, "post_id": 57897811, "comment_id": 102244905, "body": "Thanks a lot, this does work, my bad! I was checking <code>symbol_dict</code> earlier ."}, {"owner": {"reputation": 3527, "user_id": 6925185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba6bd7821971973c8143f31356c85df3?s=128&d=identicon&r=PG&f=1", "display_name": "jottbe", "link": "https://stackoverflow.com/users/6925185/jottbe"}, "reply_to_user": {"reputation": 21, "user_id": 11094227, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dfdf6f7158d02ed27c5c0e6d4059f8e?s=128&d=identicon&r=PG&f=1", "display_name": "Amitya Agarwal", "link": "https://stackoverflow.com/users/11094227/amitya-agarwal"}, "edited": false, "score": 0, "creation_date": 1568318211, "post_id": 57897811, "comment_id": 102246388, "body": "No problem. Thank you for retesting."}], "tags": [], "owner": {"reputation": 3527, "user_id": 6925185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba6bd7821971973c8143f31356c85df3?s=128&d=identicon&r=PG&f=1", "display_name": "jottbe", "link": "https://stackoverflow.com/users/6925185/jottbe"}, "is_accepted": true, "score": 1, "last_activity_date": 1568243041, "creation_date": 1568243041, "answer_id": 57897811, "question_id": 57897697, "link": "https://stackoverflow.com/questions/57897697/loading-multiple-csv-files-into-one-nested-dictionary/57897811#57897811", "title": "Loading multiple CSV files into one nested dictionary", "body": "<p>Roughly, you can do it as follows:</p>\n\n<pre><code>import pandas as pd\n# enter your filenames in the list\n# if they are in a particular directory\n# you can also use os.listdir or something \n# like that to get the actual filenames\nfilenames= ['ibm.csv']\nresult_dict= dict()\nfor file in filenames:\n    # load the csv in a dataframe\n    df= pd.read_csv(file, sep=',')\n    symbol= file.split('.')[0]\n    symbol_dict= result_dict.setdefault(symbol, dict())\n    # process the dataframe columnwise\n    # turning each column into a key in the dict\n    # and it's values into a list\n    for col, ser in df.items():\n        symbol_dict.setdefault(col, list()).extend(ser.to_list())\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 11094227, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dfdf6f7158d02ed27c5c0e6d4059f8e?s=128&d=identicon&r=PG&f=1", "display_name": "Amitya Agarwal", "link": "https://stackoverflow.com/users/11094227/amitya-agarwal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 585, "favorite_count": 0, "accepted_answer_id": 57897811, "answer_count": 2, "score": 0, "last_activity_date": 1568247934, "creation_date": 1568241993, "last_edit_date": 1568247934, "question_id": 57897697, "link": "https://stackoverflow.com/questions/57897697/loading-multiple-csv-files-into-one-nested-dictionary", "title": "Loading multiple CSV files into one nested dictionary", "body": "<p>I have multiple CSV files (one for each stock symbol) which I want to load into a nested dictionary like:</p>\n\n<pre><code>market_data[\"Symbol\"] = { \"Open\": [], \"High\": [], \"Low\": [], \"Close\": [],\n    \"Volume\": [], \"Adjusted\": [], \"Date\": [], \"MA_10\":[] }\n</code></pre>\n\n<p>I have a different CSV file for each symbol and each CSV file has the data such as Open, High, Low, etc. but not necessarily the same name. I want to load it into that data structure but I'm not able to figure it out.</p>\n\n<p>I want it to look like :</p>\n\n<blockquote>\n  <p>print market_data</p>\n  \n  <p>{'SYMBOL2': {'High': [20, 22, 23, 19, 21], 'Volume': [100, 200, 300,\n  400, 500], 'Adjusted': [12, 13, 14, 15, 16], 'Low': [10, 12, 13, 9,\n  1], 'MA_10': [], 'Date': ['2015-01-01', '2015-01-02', '2015-01-03',\n  '2015-01-04', '2015-01-05'], 'Close': [15, 15, 15, 11, 16], 'Open':\n  [12, 13, 14, 15, 16]}, 'SYMBOL1': {'High': [20, 22, 23, 19, 21],\n  'Volume': [100, 200, 300, 400, 500], 'Adjusted': [12, 13, 14, 15, 16],\n  'Low': [10, 12, 13, 9, 1], 'MA_10': [], 'Date': ['2015-01-01',\n  '2015-01-02', '2015-01-03', '2015-01-04', '2015-01-05'], 'Close': [15,\n  15, 15, 11, 16], 'Open': [12, 13, 14, 15, 16]}}</p>\n</blockquote>\n"}, {"tags": ["python", "sqlalchemy", "many-to-many"], "comments": [{"owner": {"reputation": 2535, "user_id": 2036070, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WSLZ4.jpg?s=128&g=1", "display_name": "Ian Wilson", "link": "https://stackoverflow.com/users/2036070/ian-wilson"}, "edited": false, "score": 1, "creation_date": 1568257178, "post_id": 57897693, "comment_id": 102219050, "body": "Can you explain your use case?  Specifically why you do not want to use the association proxy ?  Also it seems that you&#39;d really want an explicit <a href=\"https://docs.sqlalchemy.org/en/13/orm/basic_relationships.html#association-object\" rel=\"nofollow noreferrer\">association object</a> for the example you have given anyways."}, {"owner": {"reputation": 33, "user_id": 8177435, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208049735875761/picture?type=large", "display_name": "Nick Erokhin", "link": "https://stackoverflow.com/users/8177435/nick-erokhin"}, "reply_to_user": {"reputation": 2535, "user_id": 2036070, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WSLZ4.jpg?s=128&g=1", "display_name": "Ian Wilson", "link": "https://stackoverflow.com/users/2036070/ian-wilson"}, "edited": false, "score": 0, "creation_date": 1568311245, "post_id": 57897693, "comment_id": 102243734, "body": "@IanWilson I can&#39;t use an association proxy because our system has a lot of complex logic in place for handling relationships since we never anticipated the need for an association proxy. So adding a refactor would take too long.  Thanks for the link! It looks like I got too tangled in other association object usages to notice that I can get the behavior I want by making a relationship between BlueprintParts and Blueprint, instead of BlueprintParts to Parts"}, {"owner": {"reputation": 113, "user_id": 2048311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ec307b0a3113c840e0efd018862e549?s=128&d=identicon&r=PG", "display_name": "tgig", "link": "https://stackoverflow.com/users/2048311/tgig"}, "edited": false, "score": 0, "creation_date": 1568469506, "post_id": 57897693, "comment_id": 102288297, "body": "@NickErokhin sounds like you found the solution? It would be great if you could post the solution to your problem as an answer."}, {"owner": {"reputation": 33, "user_id": 8177435, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208049735875761/picture?type=large", "display_name": "Nick Erokhin", "link": "https://stackoverflow.com/users/8177435/nick-erokhin"}, "reply_to_user": {"reputation": 113, "user_id": 2048311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ec307b0a3113c840e0efd018862e549?s=128&d=identicon&r=PG", "display_name": "tgig", "link": "https://stackoverflow.com/users/2048311/tgig"}, "edited": false, "score": 0, "creation_date": 1568742848, "post_id": 57897693, "comment_id": 102368582, "body": "@tgig thanks for the reminder, I answered"}], "answers": [{"tags": [], "owner": {"reputation": 33, "user_id": 8177435, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208049735875761/picture?type=large", "display_name": "Nick Erokhin", "link": "https://stackoverflow.com/users/8177435/nick-erokhin"}, "is_accepted": false, "score": 1, "last_activity_date": 1568742831, "creation_date": 1568742831, "answer_id": 57979640, "question_id": 57897693, "link": "https://stackoverflow.com/questions/57897693/how-can-i-access-extra-columns-in-sqlalchemy-a-many-to-many-relationship-with-an/57979640#57979640", "title": "How can I access extra columns in SQLAlchemy a many-to-many relationship with an association object (without an association proxy)?", "body": "<p>I was able to get my desired behavior with a few workarounds in the schema and code</p>\n\n<pre><code>class Blueprint(Base):\n    __tablename__ = 'blueprints'\n    id = Column(Integer, primary_key=True)\n    name = Column(String, nullable=False)\n    spec = Column(JSONB, nullable=False)\n    blueprint_parts = relationship('BlueprintParts', lazy='dynamic')\n\n\nclass BlueprintParts(Base):\n    __tablename__ = 'blueprint_parts'\n    id = Column(Integer, primary_key=True)\n    blueprint_id = Column(Integer, ForeignKey('blueprints.id'), primary_key=True)\n    part_id = Column(Integer, ForeignKey('parts.id'), primary_key=True)\n    extra_data = Column(String)\n    part = relationship('Parts', lazy='joined')\n\nclass Parts:\n    __tablename__ = 'parts'\n    id = Column(Integer, primary_key=True)\n    name = Column(String)\n    vendor = Column(String)\n</code></pre>\n\n<p>The code then works as follows</p>\n\n<pre><code>b = Blueprint.query(id=42).one_or_none()\npart = Parts(name='some_name', vendor='some_vendor')\nblueprint_part = BlueprintParts(extra_data='something', part=part)\nb.blueprint_parts.append(blueprint_part)\n\nfor p in b.blueprint_parts:\n    print(p.extra_data)\n    # Access part via p.part\n    print(p.part.name)\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 8177435, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208049735875761/picture?type=large", "display_name": "Nick Erokhin", "link": "https://stackoverflow.com/users/8177435/nick-erokhin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1568742831, "creation_date": 1568241940, "question_id": 57897693, "link": "https://stackoverflow.com/questions/57897693/how-can-i-access-extra-columns-in-sqlalchemy-a-many-to-many-relationship-with-an", "title": "How can I access extra columns in SQLAlchemy a many-to-many relationship with an association object (without an association proxy)?", "body": "<p>I am defining a many-to-many relationship in SQLAlchemy in which I use an association object between two models, and I need to be able to access data in the extra columns as if it was part of the model in the collection</p>\n\n<p>I'm building this under the constraint where I can't use an association proxy, and must use <code>relationship</code> to define the collection</p>\n\n<p>A simple version of the schema I made so far</p>\n\n<pre><code>class Blueprint(Base):\n    __tablename__ = 'blueprints'\n    id = Column(Integer, primary_key=True)\n    name = Column(String, nullable=False)\n    spec = Column(JSONB, nullable=False)\n    parts = relationship('parts', secondary='blueprint_parts', lazy='dynamic')\n\n\nclass BlueprintParts(Base):\n    __tablename__ = 'blueprint_parts'\n    id = Column(Integer, primary_key=True)\n    blueprint_id = Column(Integer, ForeignKey('blueprints.id'), primary_key=True)\n    part_id = Column(Integer, ForeignKey('parts.id'), primary_key=True)\n    extra_data = Column(String)\n\nclass Parts:\n    __tablename__ = 'parts'\n    id = Column(Integer, primary_key=True)\n    name = Column(String)\n    vendor = Column(String)\n\n</code></pre>\n\n<p>A brief example of how I'd like to use this relationship (Autocommit is enabled)</p>\n\n<pre><code>b = Blueprint.query(id=42).one_or_none()\nfor p in b.parts:\n    print(p.extra_data)\n    print(p.name)\n    if condition:\n        p.extra_data = \"blah\"\n</code></pre>\n\n<p>Currently, none of the objects in <code>p.parts</code> contain <code>extra_data</code>. Only the attributes defined in <code>Parts</code></p>\n"}, {"tags": ["python", "unit-testing", "testing", "flask", "pymysql"], "answers": [{"tags": [], "owner": {"reputation": 1787, "user_id": 41060, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1b164a615a3f17a7c1c9f9f965c5026a?s=128&d=identicon&r=PG", "display_name": "audiodude", "link": "https://stackoverflow.com/users/41060/audiodude"}, "is_accepted": false, "score": 0, "last_activity_date": 1568576998, "creation_date": 1568576998, "answer_id": 57947691, "question_id": 57897685, "link": "https://stackoverflow.com/questions/57897685/how-do-i-get-flask-to-connect-to-my-test-database-if-im-storing-the-db-connecti/57947691#57947691", "title": "How do I get Flask to connect to my test database if I&#39;m storing the db connection on the flask.g object?", "body": "<p>The problem was that I had a self.db connection that I was trying to use to:</p>\n\n<ol>\n<li>Setup the database and install the schema</li>\n<li>Run the tests against</li>\n<li>And also teardown the database</li>\n</ol>\n\n<p>Once I separated those steps and used a new connection for steps 1, 2 and 3, I no longer had the issue.</p>\n"}], "owner": {"reputation": 1787, "user_id": 41060, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1b164a615a3f17a7c1c9f9f965c5026a?s=128&d=identicon&r=PG", "display_name": "audiodude", "link": "https://stackoverflow.com/users/41060/audiodude"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 327, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1568576998, "creation_date": 1568241891, "question_id": 57897685, "link": "https://stackoverflow.com/questions/57897685/how-do-i-get-flask-to-connect-to-my-test-database-if-im-storing-the-db-connecti", "title": "How do I get Flask to connect to my test database if I&#39;m storing the db connection on the flask.g object?", "body": "<p>I have a Flask application using pymysql directly, no SQLAlchemy.</p>\n\n<p>In my db.py file, I have the following:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from myns.my_db import db_connect\n\ndef has_db():\n  return hasattr(flask.g, 'db')\n\ndef get_db(name):\n  if not has_db():\n    setattr(flask.g, 'db', db_connect())\n  return getattr(flask.g, 'db')\n</code></pre>\n\n<p>As well as this in my main app.py:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>@app.teardown_request\ndef close_db(ex):\n  if has_db():\n    conn = get_db()\n    conn.close()\n</code></pre>\n\n<p>What I'm trying to do is \"mock\" the database in tests, using the example here: <a href=\"https://flask.palletsprojects.com/en/1.1.x/testing/#faking-resources-and-context\" rel=\"nofollow noreferrer\">https://flask.palletsprojects.com/en/1.1.x/testing/#faking-resources-and-context</a></p>\n\n<p>The error I'm getting when running my test is:</p>\n\n<pre><code>pymysql.err.InterfaceError: (0, '')\n</code></pre>\n\n<p>Which I have encountered before with pymysql. I generally interpret this error to mean that there are multiple threads using a database cursor, or there is a global database cursor being used inside multiple modules. This seems to make sense, because I believe the <code>flask.g</code> object to be some kind of thred-local global object.</p>\n\n<p>Is there a way to \"mock\" the database connection in my test, even if it involves re-architecting my Flask application? Thanks!</p>\n"}, {"tags": ["python", "c", "python-3.x", "mmap"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 3, "creation_date": 1568242360, "post_id": 57897672, "comment_id": 102216272, "body": "When you map a file, the memory and the file are automatically synchronized."}, {"owner": {"reputation": 559, "user_id": 4624106, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ec8065d1fddb547b919b84fef5c43f2f?s=128&d=identicon&r=PG&f=1", "display_name": "giupardeb", "link": "https://stackoverflow.com/users/4624106/giupardeb"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1568242594, "post_id": 57897672, "comment_id": 102216332, "body": "is not here any solution to avoid the sync? with many changes it&#39;s like having a physical file without a map. Maybe is there an alternative to mmap?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1568243182, "post_id": 57897672, "comment_id": 102216455, "body": "What are you really trying to achieve? If you don&#39;t want the file, you can use shared memory instead of <code>mmap</code>. See <a href=\"https://stackoverflow.com/questions/49103709/how-to-use-shared-memory-in-python-and-c-c\" title=\"how to use shared memory in python and c c\">stackoverflow.com/questions/49103709/&hellip;</a>"}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1568247409, "post_id": 57897672, "comment_id": 102217279, "body": "The whole point of the <a href=\"https://docs.python.org/3/library/mmap.html#module-mmap\" rel=\"nofollow noreferrer\"><code>mmap</code></a> module is to support memory-mapped <i>files</i> \u2014 sounds like what you want is memory shared between processes..."}, {"owner": {"reputation": 559, "user_id": 4624106, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ec8065d1fddb547b919b84fef5c43f2f?s=128&d=identicon&r=PG&f=1", "display_name": "giupardeb", "link": "https://stackoverflow.com/users/4624106/giupardeb"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1568270100, "post_id": 57897672, "comment_id": 102222380, "body": "@Barmar Yes my goal is memory shared between processes. I want that Python write on the memory shared and C read from the memoty shared and finally, before the C process ends it must write the memory shared to a file."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1568278010, "post_id": 57897672, "comment_id": 102226081, "body": "It looks like they&#39;re adding a <a href=\"https://docs.python.org/3.9/library/multiprocessing.shared_memory.html\" rel=\"nofollow noreferrer\"><code>multiprocessing.shared_memory.SharedMemory</code></a> class in Python 3.8."}], "owner": {"reputation": 559, "user_id": 4624106, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ec8065d1fddb547b919b84fef5c43f2f?s=128&d=identicon&r=PG&f=1", "display_name": "giupardeb", "link": "https://stackoverflow.com/users/4624106/giupardeb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 70, "favorite_count": 0, "closed_date": 1568316109, "answer_count": 0, "score": 0, "last_activity_date": 1568242353, "creation_date": 1568241804, "last_edit_date": 1568242353, "question_id": 57897672, "link": "https://stackoverflow.com/questions/57897672/write-on-the-memory-with-mmap", "closed_reason": "Duplicate", "title": "Write on the memory with mmap", "body": "<p>I'm on Linux, and I using mmap for sharing information between python code and C code. \nWhen I used this instruction:</p>\n\n<pre><code>buf = mmap.mmap(fd.fileno(), 4096, access=mmap.ACCESS_DEFAULT)\nwith buf:\n    buf.write(b'HELLO WORLD')\n</code></pre>\n\n<p>This is C instruction for mmap:</p>\n\n<pre><code>  int *shared = mmap(NULL, 4096, PROT_READ|PROT_WRITE, MAP_SHARED, fd1, 0);\n</code></pre>\n\n<p>I'm expecting my changes are still in the memory, but it is in a file on the disk already. </p>\n\n<p>I would like that Python code write all information on the memory and C code write all information in the memory to file. Is it possible to do this?</p>\n"}, {"tags": ["python", "python-3.x", "keyword-argument"], "comments": [{"owner": {"reputation": 15430, "user_id": 4518341, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eVuAv.png?s=128&g=1", "display_name": "wjandrea", "link": "https://stackoverflow.com/users/4518341/wjandrea"}, "edited": false, "score": 2, "creation_date": 1568243215, "post_id": 57897649, "comment_id": 102216462, "body": "Related: <a href=\"https://www.reddit.com/r/Python/comments/33fid7/why_does_python_accept_invalid_names_as_keyword/\" rel=\"nofollow noreferrer\">Why does python accept invalid names as keyword arguments when using **? - Reddit</a>"}, {"owner": {"reputation": 2272, "user_id": 262766, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/8023d8bfd21007644156b06c169880ec?s=128&d=identicon&r=PG", "display_name": "engineerchuan", "link": "https://stackoverflow.com/users/262766/engineerchuan"}, "reply_to_user": {"reputation": 15430, "user_id": 4518341, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eVuAv.png?s=128&g=1", "display_name": "wjandrea", "link": "https://stackoverflow.com/users/4518341/wjandrea"}, "edited": false, "score": 0, "creation_date": 1568246765, "post_id": 57897649, "comment_id": 102217151, "body": "Just to be clear, the two questions I was concerned about was: 1) Will the key from kwargs be a str type? 2) Could the key from kwargs have spaces?"}, {"owner": {"reputation": 15430, "user_id": 4518341, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eVuAv.png?s=128&g=1", "display_name": "wjandrea", "link": "https://stackoverflow.com/users/4518341/wjandrea"}, "edited": false, "score": 0, "creation_date": 1568246866, "post_id": 57897649, "comment_id": 102217175, "body": "You could <a href=\"https://stackoverflow.com/posts/57897649/edit\">edit</a> the question if you want"}, {"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1568254494, "post_id": 57897649, "comment_id": 102218628, "body": "<a href=\"https://github.com/python/cpython/blob/master/Include/cpython/abstract.h#L91\" rel=\"nofollow noreferrer\"><code>keywords must only contain strings and all keys must be unique.</code></a> - <code>abstract.h</code> <code>_PyVectorcall_Function</code>"}, {"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1568255478, "post_id": 57897649, "comment_id": 102218788, "body": "<a href=\"https://github.com/python/cpython/blob/2ec70102066fe5534f1a62e8f496d2005e1697db/Python/getargs.c#L1604\" rel=\"nofollow noreferrer\">PyArg_ValidateKeywordArguments(PyObject *kwargs)</a> ... <code>if (!_PyDict_HasOnlyStringKeys(kwargs)) {...</code>  - in getargs.c"}], "answers": [{"comments": [{"owner": {"reputation": 154, "user_id": 4309663, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dtkxs.jpg?s=128&g=1", "display_name": "Rickyy", "link": "https://stackoverflow.com/users/4309663/rickyy"}, "edited": false, "score": 1, "creation_date": 1568242173, "post_id": 57897671, "comment_id": 102216241, "body": "Maybe as a reference to the official <a href=\"https://www.python.org/dev/peps/pep-0362/#parameter-object\" rel=\"nofollow noreferrer\">python docs</a> which says <code>The name of the parameter as a string. Must be a valid python identifier name</code>. And <code>Identifiers can be a combination of letters in lowercase (a to z) or uppercase (A to Z) or digits (0 to 9) or an underscore _</code> from <a href=\"https://www.programiz.com/python-programming/keywords-identifier\" rel=\"nofollow noreferrer\">programiz</a>."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "reply_to_user": {"reputation": 19004, "user_id": 5079316, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f5e325c060deb5b55ee6ac0941af4dbe?s=128&d=identicon&r=PG&f=1", "display_name": "Olivier Melan&#231;on", "link": "https://stackoverflow.com/users/5079316/olivier-melan%c3%a7on"}, "edited": false, "score": 0, "creation_date": 1568242678, "post_id": 57897671, "comment_id": 102216358, "body": "@OlivierMelan&#231;on that would be referring to the name <code>kwargs</code> here"}, {"owner": {"reputation": 3240, "user_id": 10157759, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-c9NabIUCJts/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7oyzFAfLJNxPqTgYUMTb4PPAZ7N5Q/mo/photo.jpg?sz=128", "display_name": "GZ0", "link": "https://stackoverflow.com/users/10157759/gz0"}, "edited": false, "score": 3, "creation_date": 1568242703, "post_id": 57897671, "comment_id": 102216366, "body": "@OlivierMelan&#231;on No. In function signatures and function calls, when an explicit keyword argument like <code>f(..., key=value)</code> is used, <code>key</code> must be a valid identifier name. But when a function is called using dict unpacking like you do, arbitrary strings can be used as keys."}, {"owner": {"reputation": 154, "user_id": 4309663, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dtkxs.jpg?s=128&g=1", "display_name": "Rickyy", "link": "https://stackoverflow.com/users/4309663/rickyy"}, "edited": false, "score": 3, "creation_date": 1568242928, "post_id": 57897671, "comment_id": 102216403, "body": "Python allows the use of arbitrary dictionaries to be passed as **kwargs. I don&#39;t know why they would not verify the kwarg&#39;s name but throw a TypeError when using an int as keyword. This has been discussed in 2013 already - <a href=\"https://stackoverflow.com/questions/16700006/feature-kwargs-allowing-improperly-named-variables\">feature: **kwargs allowing improperly named variables</a>"}, {"owner": {"reputation": 2272, "user_id": 262766, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/8023d8bfd21007644156b06c169880ec?s=128&d=identicon&r=PG", "display_name": "engineerchuan", "link": "https://stackoverflow.com/users/262766/engineerchuan"}, "edited": false, "score": 0, "creation_date": 1568246741, "post_id": 57897671, "comment_id": 102217146, "body": "Thanks makes sense but for kwargs in particular, spaces are allowed.  I&#39;m clarifying my question slightly."}], "tags": [], "owner": {"reputation": 19440, "user_id": 6275103, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KDDMj.jpg?s=128&g=1", "display_name": "MrGeek", "link": "https://stackoverflow.com/users/6275103/mrgeek"}, "is_accepted": false, "score": 3, "last_activity_date": 1568242956, "last_edit_date": 1568242956, "creation_date": 1568241795, "answer_id": 57897671, "question_id": 57897649, "link": "https://stackoverflow.com/questions/57897649/are-the-keys-of-a-kwargs-argument-to-python-function-guaranteed-to-be-type-strin/57897671#57897671", "title": "Are the keys of a kwargs argument to Python function guaranteed to be type string?", "body": "<p>The <code>keywords</code> in <code>kwargs</code> should follow the rules of variable names, <code>full_name</code> is a valid variable name (and a valid <code>keyword</code>), <code>full name</code> is not a valid variable name (and not a valid <code>keyword</code>).</p>\n\n<p>From <a href=\"https://www.python.org/dev/peps/pep-0362/#parameter-object\" rel=\"nofollow noreferrer\">PEP 362 -- Function Signature Object</a>:</p>\n\n<blockquote>\n  <p>A Parameter object has the following public attributes and methods:<br>\n  <strong>name : str</strong><br>\n   - The name of the parameter as a string. Must be a valid python identifier name (with the exception of <code>POSITIONAL_ONLY</code> parameters, which can have it set to <code>None</code>.)</p>\n</blockquote>\n\n<p>And, from the <a href=\"https://docs.python.org/3/reference/lexical_analysis.html#identifiers\" rel=\"nofollow noreferrer\">Docs</a>:</p>\n\n<blockquote>\n  <p><strong>2.3. Identifiers and keywords:</strong><br>\n  ...\n  Within the ASCII range (U+0001..U+007F), the valid characters for identifiers are the same as in Python 2.x: the uppercase and lowercase letters <code>A</code> through <code>Z</code>, the underscore <code>_</code> and, except for the first character, the digits <code>0</code> through <code>9</code>.\n  ...</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1568244758, "post_id": 57897711, "comment_id": 102216793, "body": "<a href=\"https://docs.python.org/3/reference/expressions.html#calls\" rel=\"nofollow noreferrer\">Calls</a> in the Expressions section of the Language Reference talks about parameters being placed in slots - maybe these are <code>__slots__</code>?  <a href=\"https://docs.python.org/3/reference/datamodel.html#object.__slots__\" rel=\"nofollow noreferrer\">object.__slots__</a> seems to implies strings only."}, {"owner": {"reputation": 84953, "user_id": 1405065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c422b239ab1f49d3f4fcff9e5df3cf?s=128&d=identicon&r=PG", "display_name": "Blckknght", "link": "https://stackoverflow.com/users/1405065/blckknght"}, "reply_to_user": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1568246765, "post_id": 57897711, "comment_id": 102217152, "body": "@wwii: No, I&#39;m pretty sure the slots being referred to in that documentation is unrelated to <code>__slots__</code> except to the extent that they represent similar concepts who have ended up with the same names applied. The <code>__slots__</code> mechanic has to do with attributes of class instances, not with function calling."}], "tags": [], "owner": {"reputation": 19004, "user_id": 5079316, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f5e325c060deb5b55ee6ac0941af4dbe?s=128&d=identicon&r=PG&f=1", "display_name": "Olivier Melan&#231;on", "link": "https://stackoverflow.com/users/5079316/olivier-melan%c3%a7on"}, "is_accepted": true, "score": 9, "last_activity_date": 1568291225, "last_edit_date": 1568291225, "creation_date": 1568242113, "answer_id": 57897711, "question_id": 57897649, "link": "https://stackoverflow.com/questions/57897649/are-the-keys-of-a-kwargs-argument-to-python-function-guaranteed-to-be-type-strin/57897711#57897711", "title": "Are the keys of a kwargs argument to Python function guaranteed to be type string?", "body": "<p>A keyword argument passed directly must be a valid Python identifier, and yes it will always be treated as strings. Anything else is a <code>SyntaxError</code>.</p>\n\n<pre><code>f(foo=1) # Works\nf($=1) # Fails\nf(1=1) # Fails\n</code></pre>\n\n<p>Although, you can also give keyword arguments through unpacking. In this case, your keyword arguments must be strings still, but they can take any format.</p>\n\n<p>Let's define a dummy function to test this.</p>\n\n<pre><code>def f(**kwargs):\n    print(kwargs)\n</code></pre>\n\n<p>A keyword argument can contain a space or be a string of digits. It can even contain special characters.</p>\n\n<pre><code>f(**{\"hello world\": 'foo'}) # prints {'hello world': 'foo'}\nf(**{\"1\": 'foo'}) # prints {'1': 'foo'}\nf(**{\"$\": 'foo'}) # prints {'$': 'foo'}\n</code></pre>\n\n<p>A keyword argument must be a string. Anything else is a <code>TypeError</code>.</p>\n\n<pre><code>f(**{1: 'foo'}) # TypeError: f() keywords must be strings\nf(**{b'foo': 1}) # TypeError: f() keywords must be strings\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2336, "user_id": 7389264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/160900497f0373247800b2ad89798e32?s=128&d=identicon&r=PG&f=1", "display_name": "jirassimok", "link": "https://stackoverflow.com/users/7389264/jirassimok"}, "is_accepted": false, "score": 1, "last_activity_date": 1568243329, "last_edit_date": 1568243329, "creation_date": 1568242906, "answer_id": 57897793, "question_id": 57897649, "link": "https://stackoverflow.com/questions/57897649/are-the-keys-of-a-kwargs-argument-to-python-function-guaranteed-to-be-type-strin/57897793#57897793", "title": "Are the keys of a kwargs argument to Python function guaranteed to be type string?", "body": "<p>Others have already covered the practical side of this, but I wondered if the documentation actually made any guarantees about keyword dictionaries' types.</p>\n\n<p>The <a href=\"https://docs.python.org/3/reference/expressions.html#calls\" rel=\"nofollow noreferrer\">documentation on call semantics</a> does not specifically say keyword arguments will have type <code>str</code> in the dictionary.</p>\n\n<p>This is all that the documentation says about the type of the value of keyword arguments passed to a parameter declared with <code>**</code>:</p>\n\n<blockquote>\n  <p>a dictionary containing the excess keyword arguments (using the keywords as keys and the argument values as corresponding values), or a (new) empty dictionary</p>\n</blockquote>\n\n<p>So, theoretically, it appears that the documentation allows you to recieve keyword arguments as <code>bytes</code>, but this does not occur in any current implementation of Python 3.</p>\n\n<p>(For Python 2, the same holds, but for <code>unicode</code> instead of <code>bytes</code>.)</p>\n"}], "owner": {"reputation": 2272, "user_id": 262766, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/8023d8bfd21007644156b06c169880ec?s=128&d=identicon&r=PG", "display_name": "engineerchuan", "link": "https://stackoverflow.com/users/262766/engineerchuan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2213, "favorite_count": 0, "accepted_answer_id": 57897711, "answer_count": 3, "score": 6, "last_activity_date": 1604406428, "creation_date": 1568241535, "last_edit_date": 1604406428, "question_id": 57897649, "link": "https://stackoverflow.com/questions/57897649/are-the-keys-of-a-kwargs-argument-to-python-function-guaranteed-to-be-type-strin", "title": "Are the keys of a kwargs argument to Python function guaranteed to be type string?", "body": "<pre><code>def func(**kwargs):\n   for key, value in kwargs.items():\n      # Is key always going to be a string?\n      # Could it have spaces?\n      pass\n</code></pre>\n<p>Two questions about kwargs in Python.</p>\n<ol>\n<li>Is every key of kwargs guaranteed to be of type str?  If so, I can avoid type checking.</li>\n<li>If #1 is true, would every key be guaranteed to not have spaces?</li>\n</ol>\n"}, {"tags": ["python", "arrays"], "comments": [{"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1568241925, "post_id": 57897636, "comment_id": 102216191, "body": "Your posted code appears to work: you ask it to find <code>888</code>, and it prints <code>congratulations.</code> upon finding the number.  For you to receive help, we need to you clearly show the problem, and to give us the code that produces that problem."}, {"owner": {"reputation": 23, "user_id": 10847173, "user_type": "registered", "profile_image": "https://graph.facebook.com/475283952998724/picture?type=large", "display_name": "Yi\u011fithan Ayd\u0131n", "link": "https://stackoverflow.com/users/10847173/yi%c4%9fithan-ayd%c4%b1n"}, "reply_to_user": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1568451365, "post_id": 57897636, "comment_id": 102284348, "body": "a =888 arrays=[10,20,30,40,50,600,700,888,999,1000] Lets say we have a variables like that the program need to find a variable. At the start find the middle of the &quot;arrays&quot;  variable, say that variable 50 because it is middle of the array 50 is on the index &quot;4&quot; and program says &quot;50 is bigger than a variable?&quot; to ask his self not the client. if its smaller. Program start to find middle of 50 - 1000 and its &quot;700&quot; later that ask him self its bigger? Or smaller? If smaller program start to find middle of 700-1000 and program find the 888 and thats it &quot;congratulations&quot; message."}], "answers": [{"tags": [], "owner": {"reputation": 23, "user_id": 10847173, "user_type": "registered", "profile_image": "https://graph.facebook.com/475283952998724/picture?type=large", "display_name": "Yi\u011fithan Ayd\u0131n", "link": "https://stackoverflow.com/users/10847173/yi%c4%9fithan-ayd%c4%b1n"}, "is_accepted": true, "score": 1, "last_activity_date": 1568617708, "creation_date": 1568617708, "answer_id": 57951914, "question_id": 57897636, "link": "https://stackoverflow.com/questions/57897636/how-to-find-middle-numbers-on-array/57951914#57951914", "title": "How To Find Middle Numbers On Array", "body": "<pre><code>#new program\n\narray= [2, 5, 1, 20, 40, 50, 60, 70, 100, 888, 999, 1000]\nsearchFor = 1000\narray.sort()\narray_uzunlugu = len(array)\narray_baslangic = (array_uzunlugu - array_uzunlugu)\narray_yarisi = int((len(array)/2))\n\norta_deger = array[array_yarisi]\nwhile True:\n    print(array_yarisi)\n    orta_deger = array[array_yarisi]\n    if orta_deger &lt; searchFor:\n        make = True             \n        array_eski = array_yarisi\n        try:\n            if bum == True:\n                array_yarisi = int((array_yarisi + array_eski2)/2)\n        except:\n            array_yarisi = int((array_yarisi + array_uzunlugu)/2)\n    elif orta_deger &gt; searchFor:\n        try:\n            if make == True:\n                array_yarisi = int((array_yarisi+array_eski)/2)\n        except:\n                bum = True\n                array_eski2 = array_yarisi\n                array_yarisi = int((array_yarisi)/2)\n    elif orta_deger == searchFor:\n        print(\"tebrikler.\")\n        break\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 10847173, "user_type": "registered", "profile_image": "https://graph.facebook.com/475283952998724/picture?type=large", "display_name": "Yi\u011fithan Ayd\u0131n", "link": "https://stackoverflow.com/users/10847173/yi%c4%9fithan-ayd%c4%b1n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 160, "favorite_count": 0, "accepted_answer_id": 57951914, "answer_count": 1, "score": 0, "last_activity_date": 1568617708, "creation_date": 1568241462, "last_edit_date": 1568241703, "question_id": 57897636, "link": "https://stackoverflow.com/questions/57897636/how-to-find-middle-numbers-on-array", "title": "How To Find Middle Numbers On Array", "body": "<p>i try to design program like a game.</p>\n\n<p>So i have a array on python its;\nArrays = [1, 2, 5, 20, 40, 50, 60, 70, 100, 888, 999, 1000]</p>\n\n<p>When i was starting the program its need to be work as find of middle on array and ask himself it number is bigger then typed number by us. Or smaller? So we say we started the program its would be start as like that;</p>\n\n<ul>\n<li>data &lt; 60 (middle of arrays)</li>\n<li>typed number is bigger ? &lt; if it is make the selection at 60 to the 1000\nso 60 and 1000 numbers has have a middle ?</li>\n<li>888 it is my selected number ? if yes so finded congratulations , if its doesn't</li>\n<li>it asking himself the array number is bigger or smaller than typed value?</li>\n</ul>\n\n<p>its actually little complicated.</p>\n\n<p>my problem is if the program will noticed array number is smaller than value giving the wrong numbers:</p>\n\n<pre><code>elif ortalen &gt; index:\n    ortalen = int((minlen + ortalen)/2)\n</code></pre>\n\n<p>Code:</p>\n\n<pre><code>import numpy as np\nArray = [1, 2, 5, 20, 40, 50, 60, 70, 100, 888, 999, 1000]\nsearchFor = 888\nminlen = 0\nmaxlen = len(Array)\nortalen = int((maxlen/2))\nindex = 0\nwhile True:\n    index += 1\n    bum = Array[index]\n    if bum == searchFor:\n        break\n    else:\n        pass\nwhile True:\n    #60\n    ortasayi = Array[ortalen]\n    if ortasayi == searchFor:\n        print(\"congratulations.\")\n        break\n    elif ortalen &lt; index:\n        ortalen = int((maxlen + ortalen)/2)\n    elif ortalen &gt; index:\n        ortalen = int((minlen + ortalen)/2)\n</code></pre>\n"}, {"tags": ["python", "django", "python-3.x"], "comments": [{"owner": {"reputation": 17762, "user_id": 548562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26587173d9156d8ec3114c8700d1b693?s=128&d=identicon&r=PG", "display_name": "Iain Shelvington", "link": "https://stackoverflow.com/users/548562/iain-shelvington"}, "edited": false, "score": 1, "creation_date": 1568241715, "post_id": 57897627, "comment_id": 102216142, "body": "The idea is to allow developers that subclass these generic views to be able to override this behaviour. Yes, the default case is just to return the attribute but in some cases you may want the form_class returned to be dynamic"}, {"owner": {"reputation": 8696, "user_id": 10746224, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/znUL5.jpg?s=128&g=1", "display_name": "Lord Elrond", "link": "https://stackoverflow.com/users/10746224/lord-elrond"}, "reply_to_user": {"reputation": 17762, "user_id": 548562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26587173d9156d8ec3114c8700d1b693?s=128&d=identicon&r=PG", "display_name": "Iain Shelvington", "link": "https://stackoverflow.com/users/548562/iain-shelvington"}, "edited": false, "score": 0, "creation_date": 1568241952, "post_id": 57897627, "comment_id": 102216195, "body": "@IainShelvington couldn&#39;t you still dynamically change the <code>form_class</code> by calling <code>self.form_class = &#39;something&#39;</code> without using <code>get_form_class</code>?"}, {"owner": {"reputation": 17762, "user_id": 548562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26587173d9156d8ec3114c8700d1b693?s=128&d=identicon&r=PG", "display_name": "Iain Shelvington", "link": "https://stackoverflow.com/users/548562/iain-shelvington"}, "edited": false, "score": 0, "creation_date": 1568242308, "post_id": 57897627, "comment_id": 102216263, "body": "Yes, that&#39;s possible but where would you put such code? It&#39;s nice and clean to have code that dynamically gets the form_class in a method named get_form_class. It&#39;s a design decision at the end of the day"}], "answers": [{"comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1568246560, "post_id": 57897813, "comment_id": 102217109, "body": "@juanpa.arrivillaga Indeed, many OO languages have &quot;getters&quot; and &quot;setters&quot; that allow you to customize attribute access. But this is the basic principle."}], "tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": false, "score": 1, "last_activity_date": 1568243117, "creation_date": 1568243117, "answer_id": 57897813, "question_id": 57897627, "link": "https://stackoverflow.com/questions/57897627/python-what-is-the-difference-between-calling-self-property-and-creating-a-met/57897813#57897813", "title": "Python What is the difference between calling &quot;self.property&quot; and creating a method that returns &quot;self.property&quot;?", "body": "<p>Using functions makes it easy to have different classes with the same interface, but different implementations. Some implementations may store the value in an attribute, while others have to compute it.</p>\n\n<p>A classic demonstration of this is two classes for representing vectors, either using cartesian or polar coordinates. By accessing the coordinates using methods, you can interchange them.</p>\n\n<pre><code>import math\n\nclass cartesian_vector():\n    def __init__(self, x, y):\n        self.x = x\n        self.y = y\n    def getX(self):\n        return self.x\n    def getY(self):\n        return self.y\n    def getR(self):\n        return math.sqrt(self.x**2 + self.y**2)\n    def getTheta(self):\n        return math.atan(self.y/self.x)\n\nclass polar_vector():\n    def __init__(self, r, theta):\n        self.r = f\n        self.theta = theta\n    def getX(self):\n        return self.r * math.cos(self.theta)\n    def getY(self):\n        return self.r * math.sin(self.theta)\n    def getR(self):\n        return self.r\n    def getTheta(self):\n        return self.theta\n</code></pre>\n"}], "owner": {"reputation": 8696, "user_id": 10746224, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/znUL5.jpg?s=128&g=1", "display_name": "Lord Elrond", "link": "https://stackoverflow.com/users/10746224/lord-elrond"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1568243117, "creation_date": 1568241381, "question_id": 57897627, "link": "https://stackoverflow.com/questions/57897627/python-what-is-the-difference-between-calling-self-property-and-creating-a-met", "title": "Python What is the difference between calling &quot;self.property&quot; and creating a method that returns &quot;self.property&quot;?", "body": "<p>Lets say I have a class like this:</p>\n\n<pre><code>class SomeClass:\n    some_property = 'property'\n\n    def get_some_property(self):\n        return self.some_property\n\n    def some_method(self):\n        pass\n</code></pre>\n\n<p>What is difference (if any) between <code>var1</code> and <code>var2</code> in the following:</p>\n\n<pre><code>    def some_method(self):\n        var1 = self.some_property\n        var2 = self.get_some_property()\n</code></pre>\n\n<p>For a less abstract example of this question, consider the <code>FormMixin</code> class in <code>django.generic.views.edit</code>, which looks something like this:</p>\n\n<pre><code>class FormMixin(ContextMixin):\n    \"\"\"Provide a way to show and handle a form in a request.\"\"\"\n    initial = {}\n    form_class = None\n    success_url = None\n    prefix = None\n\n    ...\n\n    def get_form_class(self):\n        \"\"\"Return the form class to use.\"\"\"\n        return self.form_class\n\n    def get_form(self, form_class=None):\n        \"\"\"Return an instance of the form to be used in this view.\"\"\"\n        if form_class is None:\n            form_class = self.get_form_class()\n        return form_class(**self.get_form_kwargs())\n</code></pre>\n\n<p>The method <code>get_form_class</code> returns the <code>form_class</code> property of self, but isn't this exactly the same as calling <code>self.form_class</code>?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 154, "user_id": 4309663, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dtkxs.jpg?s=128&g=1", "display_name": "Rickyy", "link": "https://stackoverflow.com/users/4309663/rickyy"}, "edited": false, "score": 0, "creation_date": 1568241415, "post_id": 57897611, "comment_id": 102216077, "body": "Not directly an answer to the question, but you should directly go ahead and use python 3 (if possible). Not sure in what context you are coding this."}, {"owner": {"reputation": 10593, "user_id": 4621513, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/uCfJK.png?s=128&g=1", "display_name": "mkrieger1", "link": "https://stackoverflow.com/users/4621513/mkrieger1"}, "edited": false, "score": 2, "creation_date": 1568241501, "post_id": 57897611, "comment_id": 102216095, "body": "What do you think <code>sum(c)</code> means, with <code>c = i**2</code>?"}, {"owner": {"reputation": 8762, "user_id": 1709364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40e026958109464eb03fd70b67fab155?s=128&d=identicon&r=PG", "display_name": "jasonharper", "link": "https://stackoverflow.com/users/1709364/jasonharper"}, "edited": false, "score": 1, "creation_date": 1568241508, "post_id": 57897611, "comment_id": 102216099, "body": "<code>sum(c)</code> is not meaningful when <code>c</code> is a single number."}, {"owner": {"reputation": 10593, "user_id": 4621513, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/uCfJK.png?s=128&g=1", "display_name": "mkrieger1", "link": "https://stackoverflow.com/users/4621513/mkrieger1"}, "edited": false, "score": 1, "creation_date": 1568241621, "post_id": 57897611, "comment_id": 102216127, "body": "What did you define <code>q = 0</code> for in <code>variance</code>? You are not using it. Did you mean <code>d = 0</code> and then <code>d += c</code> instead of <code>d = sum(c)</code>?"}, {"owner": {"reputation": 171, "user_id": 12055478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0dd24b2ffca8e1d4f34addb244c84bb3?s=128&d=identicon&r=PG&f=1", "display_name": "wilberox", "link": "https://stackoverflow.com/users/12055478/wilberox"}, "edited": false, "score": 0, "creation_date": 1568243159, "post_id": 57897611, "comment_id": 102216448, "body": "I left the q=0 in by accident, I knew I needed a similar expression somewhere."}], "answers": [{"comments": [{"owner": {"reputation": 171, "user_id": 12055478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0dd24b2ffca8e1d4f34addb244c84bb3?s=128&d=identicon&r=PG&f=1", "display_name": "wilberox", "link": "https://stackoverflow.com/users/12055478/wilberox"}, "edited": false, "score": 0, "creation_date": 1568242022, "post_id": 57897668, "comment_id": 102216209, "body": "Thank you! Can you explain why using <code>sum(c)</code> does not work?"}, {"owner": {"reputation": 45920, "user_id": 4996248, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IUaWZ.jpg?s=128&g=1", "display_name": "John Coleman", "link": "https://stackoverflow.com/users/4996248/john-coleman"}, "edited": false, "score": 2, "creation_date": 1568242454, "post_id": 57897668, "comment_id": 102216291, "body": "What is the point of <code>q = 0</code> in the definition of variance? Also, it is inefficient to recompute <code>mean(a)</code> in each pass through the loop. Those were OP&#39;s poor design decisions, but a good answer could address them."}, {"owner": {"reputation": 45920, "user_id": 4996248, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IUaWZ.jpg?s=128&g=1", "display_name": "John Coleman", "link": "https://stackoverflow.com/users/4996248/john-coleman"}, "reply_to_user": {"reputation": 171, "user_id": 12055478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0dd24b2ffca8e1d4f34addb244c84bb3?s=128&d=identicon&r=PG&f=1", "display_name": "wilberox", "link": "https://stackoverflow.com/users/12055478/wilberox"}, "edited": false, "score": 1, "creation_date": 1568243381, "post_id": 57897668, "comment_id": 102216501, "body": "@wilberox Pretty good for just three hours! Good luck with your learning."}], "tags": [], "owner": {"reputation": 178, "user_id": 8521526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cf2444d0af05573de33bc03f86f70ab?s=128&d=identicon&r=PG&f=1", "display_name": "mathew gunther", "link": "https://stackoverflow.com/users/8521526/mathew-gunther"}, "is_accepted": true, "score": 0, "last_activity_date": 1568241704, "creation_date": 1568241704, "answer_id": 57897668, "question_id": 57897611, "link": "https://stackoverflow.com/questions/57897611/calculating-variance-using-python-float-object-not-iterable/57897668#57897668", "title": "calculating variance using python: &quot;float&quot; object not iterable", "body": "<p>I believe this is what you're trying to do.  Note the lack of sum(c).</p>\n\n<p>See numpy implementation of the variance for comparison.</p>\n\n<pre><code>import numpy as np\na = [1, 2, 3, 4, 5, 10, 20, 30, 40, 50]\n\ndef mean(a):  \n    q = 0   \n    for x in a:\n        q += x\n    return (1.0*q)/len(a)\n\ndef variance(a):\n    q = 0\n    d = 0\n    for x in a:\n        i = x - mean(a)\n        c = i**2\n        d = d+c\n\n    v = d /len(a)\n    return v\n\nprint (variance(a))\nprint(np.var(a))\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 319, "user_id": 11643870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54d9ce50d9f523c391771d54dff40f9d?s=128&d=identicon&r=PG&f=1", "display_name": "DarkDrassher34", "link": "https://stackoverflow.com/users/11643870/darkdrassher34"}, "reply_to_user": {"reputation": 171, "user_id": 12055478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0dd24b2ffca8e1d4f34addb244c84bb3?s=128&d=identicon&r=PG&f=1", "display_name": "wilberox", "link": "https://stackoverflow.com/users/12055478/wilberox"}, "edited": false, "score": 0, "creation_date": 1568244529, "post_id": 57897881, "comment_id": 102216740, "body": "Maybe the list comprehension was a bit much for a beginner, but how is the mean function complex?"}, {"owner": {"reputation": 18468, "user_id": 5249307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c640cd731ca8e455d79860519b6b208?s=128&d=identicon&r=PG", "display_name": "donkopotamus", "link": "https://stackoverflow.com/users/5249307/donkopotamus"}, "edited": false, "score": 0, "creation_date": 1568244691, "post_id": 57897881, "comment_id": 102216778, "body": "@EAB calling <code>get_mean</code> several times in <code>get_variance</code> is not efficient"}, {"owner": {"reputation": 319, "user_id": 11643870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54d9ce50d9f523c391771d54dff40f9d?s=128&d=identicon&r=PG&f=1", "display_name": "DarkDrassher34", "link": "https://stackoverflow.com/users/11643870/darkdrassher34"}, "edited": false, "score": 0, "creation_date": 1568244798, "post_id": 57897881, "comment_id": 102216800, "body": "True. I had it out initially. Let me fix it :)"}, {"owner": {"reputation": 171, "user_id": 12055478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0dd24b2ffca8e1d4f34addb244c84bb3?s=128&d=identicon&r=PG&f=1", "display_name": "wilberox", "link": "https://stackoverflow.com/users/12055478/wilberox"}, "edited": false, "score": 0, "creation_date": 1568245510, "post_id": 57897881, "comment_id": 102216925, "body": "@EAB I don&#39;t get the syntax yet, sorry"}], "tags": [], "owner": {"reputation": 319, "user_id": 11643870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54d9ce50d9f523c391771d54dff40f9d?s=128&d=identicon&r=PG&f=1", "display_name": "DarkDrassher34", "link": "https://stackoverflow.com/users/11643870/darkdrassher34"}, "is_accepted": false, "score": 0, "last_activity_date": 1568401322, "last_edit_date": 1568401322, "creation_date": 1568243794, "answer_id": 57897881, "question_id": 57897611, "link": "https://stackoverflow.com/questions/57897611/calculating-variance-using-python-float-object-not-iterable/57897881#57897881", "title": "calculating variance using python: &quot;float&quot; object not iterable", "body": "<p>Let's start off by explaining the <code>get_mean</code> function. Passing a list as a parameter, this function sums all the elements of the list and divides this sum by the total number of elements in the list. </p>\n\n<pre><code>a = [1, 2, 3, 4, 5, 10, 20, 30, 40, 50]\n\ndef get_mean(ls):\n    return sum(ls)/len(ls)\n</code></pre>\n\n<p>The <code>get_variance</code> function is a tad more complicated to understand. We pass the same argument, a list, as in the <code>get_mean</code> function. First, we call the <code>get_mean</code> function previously defined to get the mean of the list. We use a list comprehension which iterates over the elements in our list (i.e., [i for i in ls] will return each element i of the list ls) to find the square difference with each element and the mean. The list comprehension returns a list. Because of this, we can calculate the sum of these square differences list and divide the total sum by the length of the list to get the population variance. </p>\n\n<pre><code>def get_variance(ls):\n    mean = get_mean(ls)\n    square_differences = [(i - mean)**2 for i in ls]\n    return sum(square_diffences)/len(ls)\n</code></pre>\n\n<p>Now, when we call our <code>get_variance</code> function by passing <code>a</code> as a parameter, it passes a into our <code>get_mean</code> function and then returns the population variance. </p>\n\n<pre><code>get_variance(a)\n</code></pre>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user11553043"}, "is_accepted": false, "score": 0, "last_activity_date": 1568245218, "creation_date": 1568245218, "answer_id": 57898009, "question_id": 57897611, "link": "https://stackoverflow.com/questions/57897611/calculating-variance-using-python-float-object-not-iterable/57898009#57898009", "title": "calculating variance using python: &quot;float&quot; object not iterable", "body": "<p>Here is a solution that may work using only one callable (defaults to \"mean\")--</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def get_moment(iterable, order=1, sample=False):\n\n    assert order &gt; 0 and type(order) == int \\\n        and len(iterable) &gt;= 2\n\n    _mean = sum(iterable) / len(iterable)\n\n    if order == 1:\n        return _mean\n\n    else:\n        if not sample:\n            return sum((datum**order) - _mean\n                for datum in iterable\n            ) / len(iterable)\n        else:\n            return sum((datum**order) - _mean\n                for datum in iterable\n            ) / (len(iterable) - 1)\n</code></pre>\n"}], "owner": {"reputation": 171, "user_id": 12055478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0dd24b2ffca8e1d4f34addb244c84bb3?s=128&d=identicon&r=PG&f=1", "display_name": "wilberox", "link": "https://stackoverflow.com/users/12055478/wilberox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 389, "favorite_count": 0, "accepted_answer_id": 57897668, "answer_count": 3, "score": 2, "last_activity_date": 1568401322, "creation_date": 1568241261, "last_edit_date": 1568243073, "question_id": 57897611, "link": "https://stackoverflow.com/questions/57897611/calculating-variance-using-python-float-object-not-iterable", "title": "calculating variance using python: &quot;float&quot; object not iterable", "body": "<p>I need to make a function to calculate the variance of a list of numbers. I've made a function to calculate the mean, which I am using later in my variance function, but I can't get my variance function to work. </p>\n\n<pre><code>a = [1, 2, 3, 4, 5, 10, 20, 30, 40, 50]\n\ndef mean(a):  \n    q = 0   \n    for x in a:\n        q += x\n    return (1.0*q)/len(a)\n\ndef variance(a):\n    for x in a:\n        i = x - mean(a)\n        c = i**2\n        d = sum(c)\n        v = d /len(a)\n    return v\nprint variance(a)\n</code></pre>\n\n<p>I have a \"TypeError: 'float' object is not iterable\" in my 13th line.</p>\n\n<p>I know that the functions I am designing may not be the best, but my mean function works and I am working at a very basic level.</p>\n"}, {"tags": ["python", "visual-studio", "directory"], "answers": [{"tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 1, "last_activity_date": 1568241616, "creation_date": 1568241616, "answer_id": 57897660, "question_id": 57897591, "link": "https://stackoverflow.com/questions/57897591/how-to-access-code-outside-of-current-folder-directory/57897660#57897660", "title": "How to access code outside of current folder directory?", "body": "<p>It's a little hard to tell from the screen shots, as the display isn't quite as descriptive as I've like.  However, the main suspicion is at</p>\n\n<pre><code>... import file_to_access.py\n</code></pre>\n\n<p>There is no such module: the <em>module</em> name is merely <code>file_to_access</code>; you supplied the file name.  Also, I suspect that you will want</p>\n\n<pre><code>import mbl.code.utils.file_to_access\n</code></pre>\n\n<p>to properly activate your reference in line 8.</p>\n"}], "owner": {"reputation": 135, "user_id": 11262098, "user_type": "registered", "profile_image": "https://graph.facebook.com/10215477143214117/picture?type=large", "display_name": "Eric", "link": "https://stackoverflow.com/users/11262098/eric"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1568241616, "creation_date": 1568241112, "question_id": 57897591, "link": "https://stackoverflow.com/questions/57897591/how-to-access-code-outside-of-current-folder-directory", "title": "How to access code outside of current folder directory?", "body": "<p>I want to access my 'utils' folder that is outside of the current directory that my code is in. How do I access the files and functions within that file?</p>\n\n<p>For example, I am trying to access functions in file_to_access.py from 00_label_data.py.</p>\n\n<p><a href=\"https://i.stack.imgur.com/6QzaS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6QzaS.png\" alt=\"enter image description here\"></a></p>\n\n<p>I tried doing this but it still is not working and says 'no module found'</p>\n\n<p><a href=\"https://i.stack.imgur.com/IssaS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/IssaS.png\" alt=\"enter image description here\"></a></p>\n\n<p>What is the correct method for doing this method?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1568241258, "post_id": 57897579, "comment_id": 102216037, "body": "We can&#39;t help without seeing q little more your code, so please <a href=\"https://stackoverflow.com/posts/57897579/edit\">edit</a> your question and add it."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 2, "creation_date": 1568241284, "post_id": 57897579, "comment_id": 102216045, "body": "Consult your training materials on the <code>print</code> command.  You haven&#39;t mastered the command syntax."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 3, "creation_date": 1568241336, "post_id": 57897579, "comment_id": 102216060, "body": "I <i>think</i> what you want is <code>print(&quot;Hello&quot;, Name, &quot;you are&quot;, 2019-birth, &quot;years old&quot;)</code>"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 1, "creation_date": 1568241395, "post_id": 57897579, "comment_id": 102216073, "body": "The error is due to your illegal syntax <code>&quot;you are&quot;(...)</code>.  The parentheses after a string constant are illegal."}], "answers": [{"tags": [], "owner": {"reputation": 354, "user_id": 9737135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ba61486a788a4441b20e875eccfb2c6?s=128&d=identicon&r=PG&f=1", "display_name": "kCODINGeroo", "link": "https://stackoverflow.com/users/9737135/kcodingeroo"}, "is_accepted": false, "score": 1, "last_activity_date": 1568311926, "creation_date": 1568311926, "answer_id": 57912390, "question_id": 57897579, "link": "https://stackoverflow.com/questions/57897579/program-keeps-saying-str-object-is-not-callable/57912390#57912390", "title": "program keeps saying &#39;str&#39; object is not callable", "body": "<p>The reason for this error is that you are \"calling\" a string (text) object. This means that you are using the syntax for invoking a function, but with a string: i.e. typing parenthesis after it, as in the <code>\"your are\"(int(2019)-int(birth),\"years old\")</code> part. This is correct if you are calling a function, e.g. 'print <strong>()</strong> ', but not if the preceding item is a string.</p>\n\n<p>The correct version of this line would be:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>print(\"Hello,\", Name, \"you are\", 2019 - int(birth), \"years old\")\n</code></pre>\n\n<p>(Note that I have replaced <code>int(2019)</code> with <code>2019</code>, as this is redundant - python can work out that 2019 is an integer without explicitly converting it to one. I also removed the close-parenthesis after <code>print(\"Hello,\"</code> to ensure that the whole line gets printed, and added some whitespace to enhance readability.)</p>\n"}], "owner": {"reputation": 1, "user_id": 12055466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b10704ba7e80148433e198fa6c2c254e?s=128&d=identicon&r=PG&f=1", "display_name": "xoxo", "link": "https://stackoverflow.com/users/12055466/xoxo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 1, "answer_count": 1, "score": -1, "last_activity_date": 1568316039, "creation_date": 1568241032, "last_edit_date": 1568316039, "question_id": 57897579, "link": "https://stackoverflow.com/questions/57897579/program-keeps-saying-str-object-is-not-callable", "title": "program keeps saying &#39;str&#39; object is not callable", "body": "<p>I am supposed to write a program that asks a user their name and the year of their birth, and them outputs their name and their age in a properly formatted sentence.</p>\n\n<p>It was supposed to turn out like e.g <code>hello,xoxo, you are 15 years old</code>, but it is saying:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code> Traceback (most recent call last):                                                                                            \n  File \"main.py\", line 4, in &lt;module&gt;                                                                                         \n    print(\"Hello,\"),Name,\"you are\"(int(2019)-int(birth),\"years old\")                                                          \nTypeError: 'str' object is not callable\n</code></pre>\n"}, {"tags": ["python", "numpy"], "answers": [{"tags": [], "owner": {"reputation": 713, "user_id": 7371707, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ffd4213f87a6f6ea4d9c6ac0d179978?s=128&d=identicon&r=PG&f=1", "display_name": "ToughMind", "link": "https://stackoverflow.com/users/7371707/toughmind"}, "is_accepted": false, "score": 0, "last_activity_date": 1568251041, "creation_date": 1568251041, "answer_id": 57898544, "question_id": 57897578, "link": "https://stackoverflow.com/questions/57897578/efficient-way-to-calculate-all-ious-of-two-lists/57898544#57898544", "title": "Efficient way to calculate all IoUs of two lists", "body": "<p>You can use <code>product()</code> in <a href=\"https://docs.python.org/3.4/library/itertools.html\" rel=\"nofollow noreferrer\">itertools</a> in python to replace a nested for-loop. Using built-in function is always better I think. Examples can be like:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import numpy as np\n\nl1 = np.random.randint(0, 10, (4, 4))\nl2 = np.random.randint(0, 10, (3, 4))\nprint(f'l1:\\n{l1}')\nprint(f'l2:\\n{l2}')\n\n\nfrom itertools import product\n\nious = np.array([intersection_over_union(box1, box2) for box1, box2 in product(l1, l2)]).reshape(len(l2), len(l1))\nprint(f'ious:\\n{ious}')\n</code></pre>\n\n<p><strong>What's more, you should change</strong> <code>iou = interArea / float(boxAArea + boxBArea - interArea)</code> <strong>to</strong> <code>iou = interArea / float(boxAArea + boxBArea - interArea + 1e-16)</code> <strong>to avoid</strong> <code>divided by zero error.</code></p>\n"}, {"tags": [], "owner": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "is_accepted": true, "score": 4, "last_activity_date": 1568314903, "last_edit_date": 1568314903, "creation_date": 1568264669, "answer_id": 57900021, "question_id": 57897578, "link": "https://stackoverflow.com/questions/57897578/efficient-way-to-calculate-all-ious-of-two-lists/57900021#57900021", "title": "Efficient way to calculate all IoUs of two lists", "body": "<p><strong>vectorize:</strong></p>\n\n<pre><code>low = np.s_[...,:2]\nhigh = np.s_[...,2:]\n\ndef iou(A,B):\n    A,B = A.copy(),B.copy()\n    A[high] += 1; B[high] += 1\n    intrs = (np.maximum(0,np.minimum(A[high],B[high])\n                        -np.maximum(A[low],B[low]))).prod(-1)\n    return intrs / ((A[high]-A[low]).prod(-1)+(B[high]-B[low]).prod(-1)-intrs)\n\nAB = iou(A[:,None],B[None])\n</code></pre>\n\n<p><strong>complexity:</strong></p>\n\n<p>Since you are calculating M x N values reducing complexity below M x N is impossible unless most of the values are zero and a sparse representation of the matrix is acceptable.</p>\n\n<p>This can be done by argsorting (separately for x and y) all the ends of A and B. That's O((M+N) log(M+N)) <strong>EDIT</strong> As the coordinates are integer linear complexity may be possible here. <strong>EDIT ends</strong> This can then be used to prefilter A x B. The complexity of filtering and computing the nonzeros would be O(M + N + number of nonzeros).</p>\n"}], "owner": {"reputation": 340, "user_id": 4028761, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9d9d3bf6a32f1d6f6e1c3938073ff797?s=128&d=identicon&r=PG&f=1", "display_name": "Pikkostack", "link": "https://stackoverflow.com/users/4028761/pikkostack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1592, "favorite_count": 0, "accepted_answer_id": 57900021, "answer_count": 2, "score": 1, "last_activity_date": 1568314903, "creation_date": 1568241027, "question_id": 57897578, "link": "https://stackoverflow.com/questions/57897578/efficient-way-to-calculate-all-ious-of-two-lists", "title": "Efficient way to calculate all IoUs of two lists", "body": "<p>I have a function to calculate the IoU of two rectangles/bounding boxes.</p>\n\n<pre><code>def intersection_over_union(boxA, boxB):\n    # determine the (x, y)-coordinates of the intersection rectangle\n    xA = max(boxA[0], boxB[0])\n    yA = max(boxA[1], boxB[1])\n    xB = min(boxA[2], boxB[2])\n    yB = min(boxA[3], boxB[3])\n\n    # compute the area of intersection rectangle\n    interArea = max(0, xB - xA + 1) * max(0, yB - yA + 1)\n\n    # compute the area of both the prediction and ground-truth\n    # rectangles\n    boxAArea = (boxA[2] - boxA[0] + 1) * (boxA[3] - boxA[1] + 1)\n    boxBArea = (boxB[2] - boxB[0] + 1) * (boxB[3] - boxB[1] + 1)\n\n    # compute the intersection over union by taking the intersection\n    # area and dividing it by the sum of prediction + ground-truth\n    # areas - the interesection area\n    iou = interArea / float(boxAArea + boxBArea - interArea)\n\n    # return the intersection over union value\n    return iou\n</code></pre>\n\n<p>Now I want to calculate all IoUs of bboxes of one list with bboxes of another list, i.e. if list A containts 4 bboxes and list B contains 3 bboxes, then I want a 4x3 matrix with all possible IoUs as a result.</p>\n\n<p>Of course I can do this with two loops like this</p>\n\n<pre><code>import numpy as np\n\nn_i = len(bboxes_a)\nn_j = len(bboxes_b)\niou_mat = np.empty((n_i, n_j))\nfor i in range(n_i):\n    for j in range(n_j):\n        iou_mat[i, j] = intersection_over_union(bboxes_a[i], bboxes_b[j])\n</code></pre>\n\n<p>but this approach is very slow, especially when the lists become very big.</p>\n\n<p>I'm struggling to find a more efficient way. There has to be a way to utilize numpy to get rid of the loops, but I don't get it. Also the complexity right now is O(m*n). Is there a possibility to reduce the complexity?</p>\n"}, {"tags": ["python", "xml", "python-3.x", "parsing", "elementtree"], "comments": [{"owner": {"reputation": 63, "user_id": 11633328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19babcd8dcac0108abb5c65b9b4aef51?s=128&d=identicon&r=PG&f=1", "display_name": "ajrice6713", "link": "https://stackoverflow.com/users/11633328/ajrice6713"}, "edited": false, "score": 0, "creation_date": 1568242575, "post_id": 57897560, "comment_id": 102216325, "body": "After playing around with the code some more, it seems that i can grab the Item_Id attribute value with the nested for loop, however it seems to grab the attribute from every single raw material tag each time, instead of the one inside the parent line item tag"}], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 11633328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19babcd8dcac0108abb5c65b9b4aef51?s=128&d=identicon&r=PG&f=1", "display_name": "ajrice6713", "link": "https://stackoverflow.com/users/11633328/ajrice6713"}, "edited": false, "score": 0, "creation_date": 1568243385, "post_id": 57897808, "comment_id": 102216502, "body": "This is allowing me to pull the data, however it is giving me a list of the Item_Id&#39;s from each raw material tag throughout the entire document, instead of just the one inside the one line item tag. I need the attributes from the line item to correlate with the attributed from the nested raw material tag"}, {"owner": {"reputation": 1787, "user_id": 41060, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1b164a615a3f17a7c1c9f9f965c5026a?s=128&d=identicon&r=PG", "display_name": "audiodude", "link": "https://stackoverflow.com/users/41060/audiodude"}, "reply_to_user": {"reputation": 63, "user_id": 11633328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19babcd8dcac0108abb5c65b9b4aef51?s=128&d=identicon&r=PG&f=1", "display_name": "ajrice6713", "link": "https://stackoverflow.com/users/11633328/ajrice6713"}, "edited": false, "score": 0, "creation_date": 1568244632, "post_id": 57897808, "comment_id": 102216768, "body": "Sorry I don&#39;t know what to tell you, it works for me: <a href=\"https://gist.github.com/audiodude/ad44f412779de3b802dfbcdd3a5a98f5\" rel=\"nofollow noreferrer\">gist.github.com/audiodude/ad44f412779de3b802dfbcdd3a5a98f5</a> That prints two Raw_Material arrays, one with the first line item&#39;s elements, and the second with the second&#39;s."}, {"owner": {"reputation": 1787, "user_id": 41060, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1b164a615a3f17a7c1c9f9f965c5026a?s=128&d=identicon&r=PG", "display_name": "audiodude", "link": "https://stackoverflow.com/users/41060/audiodude"}, "reply_to_user": {"reputation": 63, "user_id": 11633328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19babcd8dcac0108abb5c65b9b4aef51?s=128&d=identicon&r=PG&f=1", "display_name": "ajrice6713", "link": "https://stackoverflow.com/users/11633328/ajrice6713"}, "edited": false, "score": 0, "creation_date": 1568244704, "post_id": 57897808, "comment_id": 102216779, "body": "Are you calling .findall on your grandchild or on root? If you call it on root, the <code>&#47;&#47;</code> syntax will, yes, give you every one in the document."}, {"owner": {"reputation": 63, "user_id": 11633328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19babcd8dcac0108abb5c65b9b4aef51?s=128&d=identicon&r=PG&f=1", "display_name": "ajrice6713", "link": "https://stackoverflow.com/users/11633328/ajrice6713"}, "edited": false, "score": 0, "creation_date": 1568245531, "post_id": 57897808, "comment_id": 102216930, "body": "Your test code definitely works, but my output is still incorrect: <a href=\"https://gist.github.com/ajrice6713/ec0f826b73158842f7ec0ea63ed82ae0\" rel=\"nofollow noreferrer\">gist.github.com/ajrice6713/ec0f826b73158842f7ec0ea63ed82ae0</a>"}, {"owner": {"reputation": 63, "user_id": 11633328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19babcd8dcac0108abb5c65b9b4aef51?s=128&d=identicon&r=PG&f=1", "display_name": "ajrice6713", "link": "https://stackoverflow.com/users/11633328/ajrice6713"}, "edited": false, "score": 0, "creation_date": 1568246050, "post_id": 57897808, "comment_id": 102217017, "body": "Unfortunately i need 20 reputation on stack overflow to use the chat rooms"}, {"owner": {"reputation": 1787, "user_id": 41060, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1b164a615a3f17a7c1c9f9f965c5026a?s=128&d=identicon&r=PG", "display_name": "audiodude", "link": "https://stackoverflow.com/users/41060/audiodude"}, "reply_to_user": {"reputation": 63, "user_id": 11633328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19babcd8dcac0108abb5c65b9b4aef51?s=128&d=identicon&r=PG&f=1", "display_name": "ajrice6713", "link": "https://stackoverflow.com/users/11633328/ajrice6713"}, "edited": false, "score": 0, "creation_date": 1568246574, "post_id": 57897808, "comment_id": 102217116, "body": "Shoot. Well if you can figure out a way for us to chat in real time I&#39;d be happy to help more. I don&#39;t really understand what you&#39;re trying to do (beyond &quot;process an XML file of orders&quot;) and I don&#39;t want to wait 10 minutes every time to figure it out."}, {"owner": {"reputation": 63, "user_id": 11633328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19babcd8dcac0108abb5c65b9b4aef51?s=128&d=identicon&r=PG&f=1", "display_name": "ajrice6713", "link": "https://stackoverflow.com/users/11633328/ajrice6713"}, "edited": false, "score": 0, "creation_date": 1568247020, "post_id": 57897808, "comment_id": 102217205, "body": "emailed from ajrice6713"}], "tags": [], "owner": {"reputation": 1787, "user_id": 41060, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1b164a615a3f17a7c1c9f9f965c5026a?s=128&d=identicon&r=PG", "display_name": "audiodude", "link": "https://stackoverflow.com/users/41060/audiodude"}, "is_accepted": false, "score": 0, "last_activity_date": 1568242995, "creation_date": 1568242995, "answer_id": 57897808, "question_id": 57897560, "link": "https://stackoverflow.com/questions/57897560/how-do-i-pull-attributes-from-deeply-nested-xml-sub-elements-using-elementtree/57897808#57897808", "title": "How do I pull attributes from deeply nested XML sub elements using ElementTree?", "body": "<p>Try using xpath, something like this:</p>\n\n<pre><code>for raw_material in grandchild.findall('.//Raw_Material'):\n  # your code here\n</code></pre>\n\n<p>EDIT: Since grandchild refers to your LineItem elements, you might actually need something like <code>.//Raw_Materials/RawMaterial</code> as your xpath.</p>\n"}, {"comments": [{"owner": {"reputation": 63, "user_id": 11633328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19babcd8dcac0108abb5c65b9b4aef51?s=128&d=identicon&r=PG&f=1", "display_name": "ajrice6713", "link": "https://stackoverflow.com/users/11633328/ajrice6713"}, "edited": false, "score": 0, "creation_date": 1568308113, "post_id": 57901755, "comment_id": 102242488, "body": "Thank you, this is definitely a workable solution. I managed to solve it last night a little differently, i will post my solution separately"}], "tags": [], "owner": {"reputation": 12314, "user_id": 415016, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/48e653222e0c86dbb4947ea2ea926ff9?s=128&d=identicon&r=PG", "display_name": "balderman", "link": "https://stackoverflow.com/users/415016/balderman"}, "is_accepted": false, "score": 0, "last_activity_date": 1568273848, "last_edit_date": 1568273848, "creation_date": 1568273392, "answer_id": 57901755, "question_id": 57897560, "link": "https://stackoverflow.com/questions/57897560/how-do-i-pull-attributes-from-deeply-nested-xml-sub-elements-using-elementtree/57901755#57901755", "title": "How do I pull attributes from deeply nested XML sub elements using ElementTree?", "body": "<p>Below.  </p>\n\n<p>There are 6 <em>Raw_Material</em> elements in the xml doc. 4 of them are empty (zero attributes) and 2 of them has 2 attributes each. This is reflected in the 'output'</p>\n\n<pre><code>import xml.etree.ElementTree as ET\n\nxml = \"\"\"&lt;XML_Order order_Id=\"1\" terms=\"Net30\" ship_via=\"UPS\"&gt;\n        &lt;Line_Items&gt;\n            &lt;Line_Item upc=\"1234567\" item_id=\"1\" color=\"blk\" qty=\"15\"&gt;\n                &lt;Raw_Materials&gt;\n                    &lt;Raw_Material Item_Id=\"H188\" Vendor_Id=\"DI0001\"/&gt; \n                    &lt;Raw_Material Item_Id=\"ST03\" Vendor_Id=\"DI0001\"/&gt;\n                &lt;/Raw_Materials&gt;\n            &lt;/Line_Item&gt;\n              &lt;Line_Item&gt;\n                &lt;Raw_Materials&gt;\n                    &lt;Raw_Material/&gt;\n                    &lt;Raw_Material/&gt;\n                &lt;/Raw_Materials&gt;\n            &lt;/Line_Item&gt;\n            &lt;Line_Item&gt;\n                &lt;Raw_Materials&gt;\n                    &lt;Raw_Material/&gt;\n                    &lt;Raw_Material/&gt;\n                &lt;/Raw_Materials&gt;\n            &lt;/Line_Item&gt;\n         &lt;/Line_Items&gt;\n    &lt;/XML_Order&gt;\"\"\"\n\nroot = ET.fromstring(xml)\n# getting the attributes across the xml doc\nprint('Raw_Materials across the XML doc:')\nraw_materials_lst = [entry.attrib for entry in\n                     list(root.findall(\".//Raw_Material\"))]\nprint(raw_materials_lst)\n\n# getting the attributes per Line_Item\nprint('Raw_Materials per line item:')\nline_items = [entry for entry in list(root.findall(\".//Line_Item\"))]\nfor idx, line_item in enumerate(line_items,1):\n    print('{}) {}'.format(idx, [entry.attrib for entry in\n                                list(line_item.findall(\".//Raw_Material\"))]))\n</code></pre>\n\n<p>output</p>\n\n<pre><code>Raw_Materials across the XML doc:\n[{'Item_Id': 'H188', 'Vendor_Id': 'DI0001'}, {'Item_Id': 'ST03', 'Vendor_Id': 'DI0001'}, {}, {}, {}, {}]\nRaw_Materials per line item:\n1) [{'Item_Id': 'H188', 'Vendor_Id': 'DI0001'}, {'Item_Id': 'ST03', 'Vendor_Id': 'DI0001'}]\n2) [{}, {}]\n3) [{}, {}]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 63, "user_id": 11633328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19babcd8dcac0108abb5c65b9b4aef51?s=128&d=identicon&r=PG&f=1", "display_name": "ajrice6713", "link": "https://stackoverflow.com/users/11633328/ajrice6713"}, "is_accepted": false, "score": 0, "last_activity_date": 1568308622, "last_edit_date": 1568308622, "creation_date": 1568308276, "answer_id": 57911590, "question_id": 57897560, "link": "https://stackoverflow.com/questions/57897560/how-do-i-pull-attributes-from-deeply-nested-xml-sub-elements-using-elementtree/57911590#57911590", "title": "How do I pull attributes from deeply nested XML sub elements using ElementTree?", "body": "<p>HUGE thanks to @audiodude, we worked through this for about an hour last night and managed to come up with a workable solution. Below is what he came up with, the attribute data is going into a FileMaker databse, so he set up some boolean flags to capture the item_Id in the Raw_Material tag (since some of my xml files have these tags, and some do not).</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>for child in root:\n    for grandchild in child:\n\n        # grab any needed attribute data from the line_items element\n\n        has_sticker = False\n        has_tag = False\n        for material_item in grandchild.findall('.//Raw_Material'):\n            item_id = material_item.get('Item_Id')\n            if item_id.startswith('H'):\n                has_tag = True\n                liRecord['hasTag'] = 'True'    # this is the record in my database\n                fms.edit(liRecord)\n            if item_id.startswith('ST'):\n                has_sticker = True\n                liRecord['hasSticker'] = 'True'\n                fms.edit(liRecord)\n\n        if liRecord['hasTag'] == 'False' and liRecord['hasSticker'] == 'False':\n            liRecord['hasTag'] = 'True'\n            fms.edit(liRecord)\n\n\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 11633328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19babcd8dcac0108abb5c65b9b4aef51?s=128&d=identicon&r=PG&f=1", "display_name": "ajrice6713", "link": "https://stackoverflow.com/users/11633328/ajrice6713"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 119, "favorite_count": 1, "answer_count": 3, "score": 1, "last_activity_date": 1568308622, "creation_date": 1568240825, "last_edit_date": 1568244037, "question_id": 57897560, "link": "https://stackoverflow.com/questions/57897560/how-do-i-pull-attributes-from-deeply-nested-xml-sub-elements-using-elementtree", "title": "How do I pull attributes from deeply nested XML sub elements using ElementTree?", "body": "<p>I have .xml files that i am attempting to pull attributes from, and i am having trouble grabbing the attributes from the Raw_Material Sub element. Below is some sample data that represents what the files look like:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>    &lt;XML_Order order_Id='1' terms='Net30' ship_via='UPS'&gt;\n        &lt;Line_Items&gt;\n            &lt;Line_Item upc='1234567' item_id='1' color='blk' qty='15'&gt;\n                &lt;Raw_Materials&gt;\n                    &lt;Raw_Material Item_Id='H188' Vendor_Id='DI0001'&gt; # This is what i need to grab\n                    &lt;Raw_Material Item_Id='ST03' Vendor_Id='DI0001'&gt;\n                &lt;/Raw_Materials&gt;\n            &lt;/Line_Item&gt;\n            &lt;Line_Item&gt;\n                &lt;Raw_Materials&gt;\n                    &lt;Raw_Material&gt;\n                    &lt;Raw_Material&gt;\n                &lt;/Raw_Materials&gt;\n            &lt;/Line_Item&gt;\n            &lt;Line_Item&gt;\n                &lt;Raw_Materials&gt;\n                    &lt;Raw_Material&gt;\n                    &lt;Raw_Material&gt;\n                &lt;/Raw_Materials&gt;\n            &lt;/Line_Item&gt;\n        &lt;/Line_Items&gt;\n    &lt;/XML_Order&gt;\n</code></pre>\n\n<p>I am having no problem iterating and pulling the attributes from the Line_Item tags using the following code: </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>    if filename.endswith('.xml'):\n        tree = Et.ElementTree(file = filename)\n        root = tree.getroot()\n    # order info\n    orderID = root.attrib['Order_Id']    # grab order ID from XML document\n    terms = root.attrib['terms']\n    shipVia = root.attrib['ship_via']\n\n    for child in root:\n        for grandchild in child:\n            upc = grandchild.get('upc')\n            lineItemID = grandchild.get('item_Id')\n            color = grandchild.get('item_Id')\n\n            # I assume this is where i would need a for loop to access the\n            # nested &lt;Raw_Material&gt; element and its attributes\n</code></pre>\n\n<p>I attempted to fill a list with the values with the following in my code (where the last comment is):</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>    for element in tree.iter(tag = 'Raw_Material'):\n        itemID.append(element.get('Item_Id'))\n</code></pre>\n\n<p>and python returns the itemID list with the correct itemId's, but they are repeated over and over, when I only need it to grab the 2 item_Id attribute values. I think it is appending the list for each line item tag in my xml doc, instead of a new list for line item tag</p>\n\n<p>Once I grab the data i need, would a list be the best way to hold the values? There will only ever be be 1 or 2 Raw_Material sub elements, and i don't want my variables to overwrite in a loop. </p>\n"}, {"tags": ["python", "text"], "comments": [{"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 1, "creation_date": 1568241003, "post_id": 57897549, "comment_id": 102215967, "body": "Short answer is that splitting on spaces won&#39;t work so well for that file. Suggestion: Try <code>pandas</code> and reading &quot;fixed-width format&quot;... <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_fwf.html\" rel=\"nofollow noreferrer\">pandas.pydata.org/pandas-docs/stable/reference/api/&hellip;</a> and even then, you&#39;ll have to parse out some data"}, {"owner": {"reputation": 2488, "user_id": 2745140, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/OGCDP.jpg?s=128&g=1", "display_name": "yoonghm", "link": "https://stackoverflow.com/users/2745140/yoonghm"}, "edited": false, "score": 0, "creation_date": 1568241483, "post_id": 57897549, "comment_id": 102216093, "body": "As the fields start from fixed position in each line, you could just use slices at the level. If you want to parse subfields within each field, you then use split."}, {"owner": {"reputation": 2488, "user_id": 2745140, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/OGCDP.jpg?s=128&g=1", "display_name": "yoonghm", "link": "https://stackoverflow.com/users/2745140/yoonghm"}, "edited": false, "score": 0, "creation_date": 1568241874, "post_id": 57897549, "comment_id": 102216181, "body": "The file uploaded by you have wrong formatting.  Please correct before other could help you."}, {"owner": {"reputation": 1133, "user_id": 6283073, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/c7ae026b1a93bc8fadfb78934acdd2b7?s=128&d=identicon&r=PG&f=1", "display_name": "e.iluf", "link": "https://stackoverflow.com/users/6283073/e-iluf"}, "reply_to_user": {"reputation": 2488, "user_id": 2745140, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/OGCDP.jpg?s=128&g=1", "display_name": "yoonghm", "link": "https://stackoverflow.com/users/2745140/yoonghm"}, "edited": false, "score": 1, "creation_date": 1568242596, "post_id": 57897549, "comment_id": 102216334, "body": "@yoonghm whats wrong about the formatting ?"}, {"owner": {"reputation": 2488, "user_id": 2745140, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/OGCDP.jpg?s=128&g=1", "display_name": "yoonghm", "link": "https://stackoverflow.com/users/2745140/yoonghm"}, "edited": false, "score": 0, "creation_date": 1568243040, "post_id": 57897549, "comment_id": 102216428, "body": "Is <code>VENDOR</code> part of <code>PRODUCT NUMBER</code>. Is <code>(00029  )</code> belonged to <code>BIN#</code>. The first line has missing fields, is it correct? The file has 10 connected dashed but it has less number of header fields. What i see may not be what you see though. Perhaps you could explain number of fields and positions a field starts and end ends."}, {"owner": {"reputation": 1133, "user_id": 6283073, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/c7ae026b1a93bc8fadfb78934acdd2b7?s=128&d=identicon&r=PG&f=1", "display_name": "e.iluf", "link": "https://stackoverflow.com/users/6283073/e-iluf"}, "edited": false, "score": 0, "creation_date": 1568244506, "post_id": 57897549, "comment_id": 102216733, "body": "VENDOR is part of PRODUCT NUMBER. 00029 is on a separate line below and can be ignored"}], "answers": [{"tags": [], "owner": {"reputation": 885, "user_id": 3836843, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TPTqK.jpg?s=128&g=1", "display_name": "JacoSolari", "link": "https://stackoverflow.com/users/3836843/jacosolari"}, "is_accepted": false, "score": 0, "last_activity_date": 1568247169, "creation_date": 1568247169, "answer_id": 57898180, "question_id": 57897549, "link": "https://stackoverflow.com/questions/57897549/how-to-parse-this-text-file/57898180#57898180", "title": "How to parse this text file?", "body": "<p>Since your file is formatted in an inconvenient way I can only see this trick as solution:\nYou can look at the headers (feature names) and parse all the lines according to the indices at which they appear, like such</p>\n\n<pre><code>import numpy as np\nwith open('/Users/Copo1/Desktop/aaa.txt') as dataFile:\n    lines = dataFile.readlines()\nheaders = ['ITEM NUMBER','WH ITEM DESCRIPTION', 'PRODUCT NUMBER', 'PRICE']\nstarts = [lines[1].find(h) for h in headers]\nstarts.append(len(lines[0]))\nheaders.append(' ')\nitems = [[line[starts[i]:starts[i+1]] for line in lines] for i,h in zip(range(len(starts)-1), headers[:-1]) ]\n</code></pre>\n\n<p>this produces the following output for the <code>items</code> list (pasting only the first element, corresponding to 'ITEM NUMBER', the other elements are correct as well you can check).</p>\n\n<pre><code>[['                      ',\n  'ITEM NUMBER           ',\n  '--------------- ----- ',\n  '                      ',\n  ' \\n',\n  '10.5PLC/TLED/26V/27K  ',\n  '                      ',\n  ' \\n',\n  '10.5PLC/TLED/26V/30K  ',\n  '                      ',\n  ' \\n',\n  '10.5PLC/TLED/26V/35K  ',\n  '                      ',\n  ' \\n',\n  '10.5PLC/TLED/26V/40K  ',\n  '                      ',\n  ' \\n',\n  '1000PAR64/FFR         ',\n  '                      ',\n  ' \\n',\n  '1000PAR64/WFL/S       ',\n  '                      ',\n  ' \\n',\n  '100A/99               ',\n  '                      ',\n  ' \\n',\n  '100A/CL               ',\n  '                      ',\n  ' '],\n</code></pre>\n\n<p>There might be some extra easy polishing left to do after this (like removing empty strings and '\\n's) but I am sure you can figure out yourself.</p>\n"}, {"comments": [{"owner": {"reputation": 1133, "user_id": 6283073, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/c7ae026b1a93bc8fadfb78934acdd2b7?s=128&d=identicon&r=PG&f=1", "display_name": "e.iluf", "link": "https://stackoverflow.com/users/6283073/e-iluf"}, "edited": false, "score": 0, "creation_date": 1568254830, "post_id": 57898681, "comment_id": 102218685, "body": "amazing! could you please explain what is going on in the code?"}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "reply_to_user": {"reputation": 1133, "user_id": 6283073, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/c7ae026b1a93bc8fadfb78934acdd2b7?s=128&d=identicon&r=PG&f=1", "display_name": "e.iluf", "link": "https://stackoverflow.com/users/6283073/e-iluf"}, "edited": false, "score": 0, "creation_date": 1568257132, "post_id": 57898681, "comment_id": 102219044, "body": "e.iluf: I&#39;ve added a section at the end describing how it works. Please refer to the <code>stuct</code> module&#39;s documentation for more details. If my answer solves your problem, please accept (and up-vote) it. See <a href=\"https://stackoverflow.com/help/someone-answers\">What should I do when someone answers my question?</a>"}], "tags": [], "owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "is_accepted": true, "score": 1, "last_activity_date": 1568389897, "last_edit_date": 1568389897, "creation_date": 1568252208, "answer_id": 57898681, "question_id": 57897549, "link": "https://stackoverflow.com/questions/57897549/how-to-parse-this-text-file/57898681#57898681", "title": "How to parse this text file?", "body": "<p>I think my <a href=\"https://stackoverflow.com/a/4915359/355230\">answer</a> to the question <a href=\"https://stackoverflow.com/questions/4914008/how-to-efficiently-parse-fixed-width-files\">How to efficiently parse fixed width files?</a> can be adapted to do what you want.</p>\n\n<p>The main modification to the code in that answer was to make it also strip any leading and trailing spaces in each field. Below is Python 3.x code illustrating this:</p>\n\n<pre><code>from __future__ import print_function\nimport struct\n\n\nHEADER_LINES = 5\n\n# Indices       0       1        2      3      4      5       6      7\nfieldwidths = (20, -5, 37, -10, 12, -1, 6, -1, 9, -1, 9, -1, 10, -1, 7)\n\n# Convert fieldwidths into a format compatible with struct module.\nfmtstring = ' '.join('{}{}'.format(abs(fw), 'x' if fw &lt; 0 else 's')\n                                    for fw in fieldwidths)\nfieldstruct = struct.Struct(fmtstring)\n#print('fmtstring: {!r}, recsize: {} chars\\n'.format(fmtstring, fieldstruct.size))\n\nunpack_from = fieldstruct.unpack_from  # To optimize calls.\n\n\ndef parse(line):\n    \"\"\" Return unpacked fields in string line, stripped of any leading and\n        trailing whitespace.\n    \"\"\"\n    return list(s.decode().strip() for s in unpack_from(line.encode()))\n\n\ndef readInventoryFile(filename):\n    with open(filename) as invfile:\n        for _ in range(HEADER_LINES):\n            next(invfile)  # Skip header lines.\n\n        for line in invfile:\n            if len(line) &lt; fieldstruct.size:  # Pad line if it's too short.\n                line = line + (' ' * (fieldstruct.size-len(line)))\n            fields = parse(line)\n            if fields[0]:  # First field non-blank?\n                print(fields)\n\nreadInventoryFile('inventoryFiles_INV.txt')\n</code></pre>\n\n<p>Results:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>['10.5PLC/TLED/26V/27K', '14.5W 4PIN CFL REPL 2700K VERT 458406', '20.00 EA', '0.00', '0', '0', 'I68', 'I68']\n['10.5PLC/TLED/26V/30K', '14.5W 4PIN CFL REPL 3000K VERT 458414', '20.00 EA', '0.00', '3', '0', 'PAYOFF I68', 'I68']\n['10.5PLC/TLED/26V/35K', '14.5W 4PIN CFL REPL 3500K VERT 458422', '20.00 EA', '0.00', '0', '0', 'I68', 'I68']\n['10.5PLC/TLED/26V/40K', '14.5W 4PIN CFL REPL 4000K VERT 458430', '20.00 EA', '0.00', '0', '0', 'I68', 'I68']\n['1000PAR64/FFR', '1000W PAR64 HALOGEN GX16D BASE 56217', '50.00 EA', '0.00', '0', '0', 'I10', '']\n['1000PAR64/WFL/S', '1000W PAR64 HALOGEN GX16D BASE S4673', '0.00 EA', '0.00', '0', '0', '', 'I105']\n['100A/99', '100W A19 EXTENDED SERVICE      229781', '2.62 EA', '0.00', '0', '0', 'W6-2   I70', 'I11']\n['100A/CL', '100W A19 130V CLEAR            375279', '0.99 EA', '0.00', '0', '0', 'A2-2   I70', 'I11']\n</code></pre>\n\n<h3>How this works</h3>\n\n<p>In a nutshell, this code leverages Python's <a href=\"https://docs.python.org/3/library/struct.html#module-struct\" rel=\"nofollow noreferrer\"><code>struct</code></a> module ability to split or \"unpack\" a \"buffer\" full of data into fixed-with \"fields\" each containing a certain number of characters.</p>\n\n<p>Although more commonly applied to binary data, it also works on character strings that have been converted into arrays of bytes (which isn't necessary in Python 2.x). Basically you give it a <a href=\"https://docs.python.org/3/library/struct.html#format-strings\" rel=\"nofollow noreferrer\">format string</a> specifying the characteristics of each these fields (type and size), along with the data to parse (a line from the file in this case), which it then unpacks accordingly and returns the results as a list of values.</p>\n"}], "owner": {"reputation": 1133, "user_id": 6283073, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/c7ae026b1a93bc8fadfb78934acdd2b7?s=128&d=identicon&r=PG&f=1", "display_name": "e.iluf", "link": "https://stackoverflow.com/users/6283073/e-iluf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 57898681, "answer_count": 2, "score": 0, "last_activity_date": 1568389897, "creation_date": 1568240723, "last_edit_date": 1568248083, "question_id": 57897549, "link": "https://stackoverflow.com/questions/57897549/how-to-parse-this-text-file", "title": "How to parse this text file?", "body": "<p>I have <a href=\"https://firebasestorage.googleapis.com/v0/b/honeybox-catalogue.appspot.com/o/INV.TXT?alt=media&amp;token=e4c84a24-32de-485a-9943-dea3db5aaa14\" rel=\"nofollow noreferrer\">this text file</a></p>\n\n<pre class=\"lang-none prettyprint-override\"><code>                                                    VENDOR\nITEM NUMBER           WH ITEM DESCRIPTION               PRODUCT NUMBER      PRICE    DISC %   MAIN-WH    ALT-WH  BIN#\n--------------- ----- -- ------------------------------ --------------- ---------    ------ --------- --------- ------\n                                                                             0.00 EA   0.00         0         0\n\n10.5PLC/TLED/26V/27K     14.5W 4PIN CFL REPL 2700K VERT 458406              20.00 EA   0.00         0         0        I68    I68\n                                                         (00029  )\n\n10.5PLC/TLED/26V/30K     14.5W 4PIN CFL REPL 3000K VERT 458414              20.00 EA   0.00         3         0 PAYOFF I68    I68\n                                                         (00029  )\n\n10.5PLC/TLED/26V/35K     14.5W 4PIN CFL REPL 3500K VERT 458422              20.00 EA   0.00         0         0        I68    I68\n                                                         (00029  )\n\n10.5PLC/TLED/26V/40K     14.5W 4PIN CFL REPL 4000K VERT 458430              20.00 EA   0.00         0         0        I68    I68\n                                                         (00029  )\n</code></pre>\n\n<p>I want to read each line item and get the item Number, description, Vendor product number and price.</p>\n\n<p>I tried using this python code</p>\n\n<pre><code>def readInventoryFile():\n    # dataFile = open(\"inventoryFiles/INV.txt\",\"r\")\n    with open('inventoryFiles/INV.txt') as dataFile:\n        for lineItem in dataFile:\n            itemProperties = lineItem.split(\"   \")\n            while(\"\" in itemProperties) :\n                itemProperties.remove(\"\")\n            print(itemProperties)\n            try:\n                itemNum = itemProperties[0]\n                itemDesc = itemProperties[1]\n                partNumb = itemProperties[2]\n                price = itemProperties[3]\n\n                itemSummry = {\n                    \"Name\": itemDesc,\n                    \"Price\": price,\n                    \"PN\": partNumb,\n                }\n\n                print(lineItem, \"\\n \",itemProperties,\"\\n Summary \",itemSummry)\n            except Exception as e:\n                print(e)\n</code></pre>\n\n<p>The code partially works but it's hard to split the line by spaces or other factors because there are spaces that separated and within the content of each line. How could I get the desired product properties?</p>\n"}, {"tags": ["python", "c++", "arrays"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1568240327, "post_id": 57897478, "comment_id": 102215816, "body": "Your assumption is only true the first time. This is presumably executed multiple times, and the next time <code>R[Period, 0]</code> will contain the result of this code, and each time will build on the previous one."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1568240460, "post_id": 57897478, "comment_id": 102215842, "body": "This code doesn&#39;t look like C++. I don&#39;t think it allows declaring 2D arrays like that."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1568240515, "post_id": 57897478, "comment_id": 102215859, "body": "See <a href=\"https://stackoverflow.com/questions/936687/how-do-i-declare-a-2d-array-in-c-using-new\" title=\"how do i declare a 2d array in c using new\">stackoverflow.com/questions/936687/&hellip;</a> for how you create a 2D array dynamically in C++."}, {"owner": {"reputation": 9551, "user_id": 9837301, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9414V.png?s=128&g=1", "display_name": "JaMiT", "link": "https://stackoverflow.com/users/9837301/jamit"}, "edited": false, "score": 0, "creation_date": 1568245245, "post_id": 57897478, "comment_id": 102216878, "body": "You would need more code (more context) to see how the smoothing is performed. However, before asking for a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, I would ask which question do you want answered? 1) How does the Python code work? <i>or</i> 2) How to implement this in C++?"}], "owner": {"reputation": 11, "user_id": 10731939, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3835a2cc35fd1a24db621e157817b689?s=128&d=identicon&r=PG&f=1", "display_name": "User415", "link": "https://stackoverflow.com/users/10731939/user415"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1568240117, "creation_date": 1568240117, "question_id": 57897478, "link": "https://stackoverflow.com/questions/57897478/converting-fourier-transform-from-c-to-python-array-issue", "title": "Converting Fourier transform from C++ to Python, array issue", "body": "<p>I am attempting to convert the Fourier transform of a Pearson correlation from C++ to Python. However, I'm failing to understand the smoothing technique used.</p>\n\n<p>The 2D array R is initialised as shown below. The array is then assigned the smoothed values of the transformed correlation values, SqSum.</p>\n\n<pre><code>double[,] R = new double[70,2];\n\n\n\nfor(int Period = 8; Period &lt;= 48; Period++)\n\n{\n\nR[Period, 1] = R[Period, 0]; \n\nR[Period, 0] = 0.2 * SqSum[Period] * SqSum[Period] + 0.8 * R[Period,1];                 \n\n}               \n</code></pre>\n\n<p>How is this smoothing being performed? If on every iteration of the for loop, R[Period, 1] is being assigned the value of R[Period, 0], which I assume to be 0, should R[Period, 0]  just become 0.2 * SqSum[Period] * SqSum[Period]?  </p>\n\n<p>Sorry if this is a basic question but any help in my understanding is appreciated, cheers.</p>\n"}, {"tags": ["python", "pca", "biplot"], "answers": [{"tags": [], "owner": {"reputation": 64, "user_id": 8995336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wYyc4.png?s=128&g=1", "display_name": "Jonas Juhler", "link": "https://stackoverflow.com/users/8995336/jonas-juhler"}, "is_accepted": false, "score": 0, "last_activity_date": 1568240914, "creation_date": 1568240914, "answer_id": 57897565, "question_id": 57897458, "link": "https://stackoverflow.com/questions/57897458/interpretation-of-pca-biplot/57897565#57897565", "title": "Interpretation of PCA biplot", "body": "<p>Each principal component can be understood as linear combinations of all the features in your dataset. For example if you have three variables A, B and C, then one possibility for a principal component could be calculate it by 0.5A + 0.25B + 0.25C. And a datapoint with values [1, 2, 4] would end up with 0.5*1 + 0.25*2 + 0.25*4 = 2 on the principal component.</p>\n\n<p>The first principal component is extracted by determining the combination of features that yields the highest variance in the data. This roughly means that we tweak the multipliers (0.5, 0.25, 0.25) for each variable such that the variance between all observations is maximized.</p>\n\n<p>The first principal component (green) and second (pink) of 2d data is visualised by the lines through the data in <a href=\"https://www.visiondummy.com/wp-content/uploads/2014/05/correlated_2d.png\" rel=\"nofollow noreferrer\">this</a> plot</p>\n"}, {"tags": [], "owner": {"reputation": 698, "user_id": 13730780, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TI8Gj.png?s=128&g=1", "display_name": "erdogant", "link": "https://stackoverflow.com/users/13730780/erdogant"}, "is_accepted": false, "score": 0, "last_activity_date": 1592593737, "creation_date": 1592593737, "answer_id": 62477035, "question_id": 57897458, "link": "https://stackoverflow.com/questions/57897458/interpretation-of-pca-biplot/62477035#62477035", "title": "Interpretation of PCA biplot", "body": "<p>The PCs are a linear combination of the features. Basically, you can order the PCs on captured variance in the data and label from highest to lowest. PC1 would contain most of the variance, then PC2 etc. Thus for each PC it is known how much variance it exactly explained. However, when you scatterplot the data in 2D, as you did in the boston housing dataset, the it is hard to say \u201chow much\u201d and \u201cwhich\u201d features were contributing in the PCs. Here is were the \u201cbiplot\u201d comes into play. The biplot can plot for each feature its contribution by its angle and length of the vector. When you do this, you will not only know how much variance was explained by the top PCs, but also which features were most important.</p>\n\n<p>Try the \u2018pca\u2019 library. This will plot the explained variance, and create a biplot.</p>\n\n<pre><code>pip install pca\n\nfrom pca import pca\n\n# Initialize to reduce the data up to the number of componentes that explains 95% of the variance.\nmodel = pca(n_components=0.95)\n\n# Or reduce the data towards 2 PCs\nmodel = pca(n_components=2)\n\n# Fit transform\nresults = model.fit_transform(X)\n\n# Plot explained variance\nfig, ax = model.plot()\n\n# Scatter first 2 PCs\nfig, ax = model.scatter()\n\n# Make biplot\nfig, ax = model.biplot(n_feat=4)\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11986280, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDADFfGe0N7UUowsbzn6oWHHrLfVgBHMBjKsGbU_oc=k-s128", "display_name": "ABHIRAJ SURESH", "link": "https://stackoverflow.com/users/11986280/abhiraj-suresh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 108, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1592593737, "creation_date": 1568240001, "question_id": 57897458, "link": "https://stackoverflow.com/questions/57897458/interpretation-of-pca-biplot", "title": "Interpretation of PCA biplot", "body": "<p>I need to understand what the scatterplot created by 2 principal components convey.</p>\n\n<p>I was working on the 'boston housing' dataset from the 'sklearn.datasets' library. I standardized the predictors and the used 'PCA' from 'sklearn.decomposition' library to get 2 principal components and plotted them on the graph. </p>\n\n<p>Now all I want is help in interpreting what the plot says in simple language.<a href=\"https://i.stack.imgur.com/V5TN8.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n"}, {"tags": ["python", "airflow", "directed-acyclic-graphs"], "answers": [{"comments": [{"owner": {"reputation": 301, "user_id": 3908605, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/RGSnp.jpg?s=128&g=1", "display_name": "Gabriel", "link": "https://stackoverflow.com/users/3908605/gabriel"}, "edited": false, "score": 1, "creation_date": 1568418597, "post_id": 57900631, "comment_id": 102280089, "body": "This still gives me the same error, it looks like the first positional value gets assigned to dag_id anyway."}], "tags": [], "owner": {"reputation": 524, "user_id": 5869447, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9842b1e109c070f7305336f86932abe4?s=128&d=identicon&r=PG&f=1", "display_name": "amoskaliov", "link": "https://stackoverflow.com/users/5869447/amoskaliov"}, "is_accepted": false, "score": 1, "last_activity_date": 1568268454, "creation_date": 1568268454, "answer_id": 57900631, "question_id": 57897418, "link": "https://stackoverflow.com/questions/57897418/dagnotfound-error-when-testing-dag-in-airflow-cli/57900631#57900631", "title": "DagNotFound Error when Testing DAG in Airflow CLI", "body": "<p>You need to use the <code>dag_id</code> parameter:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>dag = DAG(\n    dag_id='test_dag', \n    default_args=default_args, \n    schedule_interval=timedelta(days=1)\n)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 1394765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae917bc2a1f38b1bc6cf7eac84634286?s=128&d=identicon&r=PG", "display_name": "George Fields", "link": "https://stackoverflow.com/users/1394765/george-fields"}, "is_accepted": false, "score": 0, "last_activity_date": 1581366577, "creation_date": 1581366577, "answer_id": 60157941, "question_id": 57897418, "link": "https://stackoverflow.com/questions/57897418/dagnotfound-error-when-testing-dag-in-airflow-cli/60157941#60157941", "title": "DagNotFound Error when Testing DAG in Airflow CLI", "body": "<p>When you run your DAG, make sure you're not giving it the Python file. For example, <code>airflow trigger_dag my_job.py</code> will produce the error if your <code>dag_id</code> is actually <code>my_job</code>.</p>\n\n<p>Drop the <code>.py</code> part to make it work:</p>\n\n<p><code>airflow trigger_dag my_job</code></p>\n\n<p>and you may want to make sure that your <code>dag_id</code> matches the file name.</p>\n"}, {"tags": [], "owner": {"reputation": 3971, "user_id": 4683950, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/NiTIZ.jpg?s=128&g=1", "display_name": "Espoir Murhabazi", "link": "https://stackoverflow.com/users/4683950/espoir-murhabazi"}, "is_accepted": false, "score": 0, "last_activity_date": 1589648516, "creation_date": 1589648516, "answer_id": 61840500, "question_id": 57897418, "link": "https://stackoverflow.com/questions/57897418/dagnotfound-error-when-testing-dag-in-airflow-cli/61840500#61840500", "title": "DagNotFound Error when Testing DAG in Airflow CLI", "body": "<p>Got the same issue, it looks like my airflow home env variable was not well set up.</p>\n\n<p>I set it up by doing :</p>\n\n<pre><code>export AIRFLOW_HOME=$(pwd) \n</code></pre>\n\n<p>And retried and it works...</p>\n"}, {"tags": [], "owner": {"reputation": 373, "user_id": 1006855, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1cae52d2d6af095e98bdad5c744c6c68?s=128&d=identicon&r=PG", "display_name": "DenisOgr", "link": "https://stackoverflow.com/users/1006855/denisogr"}, "is_accepted": false, "score": 0, "last_activity_date": 1595334365, "creation_date": 1595334365, "answer_id": 63014532, "question_id": 57897418, "link": "https://stackoverflow.com/questions/57897418/dagnotfound-error-when-testing-dag-in-airflow-cli/63014532#63014532", "title": "DagNotFound Error when Testing DAG in Airflow CLI", "body": "<p>You can not find DAG in DagModel. I think you should add your dag to the backend (for default it is a file) you can run <code>airflow scheduler</code> to do it.</p>\n"}, {"tags": [], "owner": {"reputation": 43, "user_id": 768223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e94cb566cda9c885ab241b1103016f8b?s=128&d=identicon&r=PG", "display_name": "zmjjmz", "link": "https://stackoverflow.com/users/768223/zmjjmz"}, "is_accepted": false, "score": 1, "last_activity_date": 1600365418, "last_edit_date": 1600365418, "creation_date": 1600295814, "answer_id": 63928818, "question_id": 57897418, "link": "https://stackoverflow.com/questions/57897418/dagnotfound-error-when-testing-dag-in-airflow-cli/63928818#63928818", "title": "DagNotFound Error when Testing DAG in Airflow CLI", "body": "<p>I've run into this issue before when adding a new DAG (in a new file). Not sure this will help, but basically I think this happens because list_dags causes Airflow to look for the DAGs and list them, but when you 'trigger' the DAG it's telling the scheduler to look for <code>test_dag</code> in DAGs <em>it</em> knows about - and it may not know about this one (yet) since it's new.</p>\n<p>If you have access to the Web UI, you may notice that the DAG doesn't exist when you get this error -- and hitting the DAG refresh button causes the new DAG to show up. I'm sure there's a fancy solution to watch a directory or something and cause this refresh when it changes, but in <code>airflow.cfg</code> you can set the refresh rate.</p>\n"}], "owner": {"reputation": 301, "user_id": 3908605, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/RGSnp.jpg?s=128&g=1", "display_name": "Gabriel", "link": "https://stackoverflow.com/users/3908605/gabriel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1727, "favorite_count": 0, "answer_count": 5, "score": 2, "last_activity_date": 1600365418, "creation_date": 1568239723, "last_edit_date": 1568418743, "question_id": 57897418, "link": "https://stackoverflow.com/questions/57897418/dagnotfound-error-when-testing-dag-in-airflow-cli", "title": "DagNotFound Error when Testing DAG in Airflow CLI", "body": "<p>I\u2019m getting the error: <code>airflow.exceptions.DagNotFound: Dag id test_task not found in DagModel</code> when trying to run a dag via <code>airflow trigger_dag test_dag</code>.</p>\n\n<p>DAG is listed correctly when running <code>airflow list_dags</code>.  I have also checked to make sure the $AIRFLOW_HOME directory is correctly set to where the dag is.  Only way I can get it to work is by running a specific task such as <code>airflow test test_dag test_task</code>. Running <code>python dags/test_dag.py</code> shows no errors.</p>\n\n<p>Code in the dag file itself, after imports:</p>\n\n<pre><code>default_args = {\n    'owner': 'airflow',\n    'depends_on_past': False,\n    'start_date': datetime(2015, 6, 1),\n    'email': ['my@email.com'],\n    'email_on_failure': False,\n    'email_on_retry': False,\n    'retries': 1,\n    'retry_delay': timedelta(minutes=5),\n}\n\ndag = DAG(\n  dag_id='test_dag'\n  default_args=default_args, \n  schedule_interval=timedelta(days=1)\n)\n\n</code></pre>\n"}, {"tags": ["python", "json", "python-3.x", "discord.py"], "comments": [{"owner": {"reputation": 1152, "user_id": 7316502, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-Lfx3LHRINPk/AAAAAAAAAAI/AAAAAAAAJOk/h36pbP54ZPU/photo.jpg?sz=128", "display_name": "thmsdnnr", "link": "https://stackoverflow.com/users/7316502/thmsdnnr"}, "edited": false, "score": 0, "creation_date": 1568240100, "post_id": 57897393, "comment_id": 102215756, "body": "Does your <code>database.json</code> file contain invalid JSON, like strings enclosed by single quotes?"}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 1, "creation_date": 1568240291, "post_id": 57897393, "comment_id": 102215809, "body": "In the future, note that a question title should be focused on <i>helping other people figure out if they have the same problem</i>, and secondarily, helping people figure out what the problem is generally about to determine if they&#39;re likely to be able to help answer it usefully. Someone else with &quot;a strange error when running code that works elsewhere&quot; is unlikely to have the <i>same</i> &quot;strange error&quot;, making the initial title of this question not helpful towards either of those goals."}, {"owner": {"reputation": 3, "user_id": 12055379, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mA6zkcVnu_fC4knvndDbtRtw5qsCS2hX3e2aDC-sA=k-s128", "display_name": "DiufoemHD", "link": "https://stackoverflow.com/users/12055379/diufoemhd"}, "edited": false, "score": 0, "creation_date": 1568241845, "post_id": 57897393, "comment_id": 102216172, "body": "i&#39;ve edited to include the json file.  i&#39;m new to that language so i&#39;m not really sure on the rules myself.  I skimmed over it and couldn&#39;t find any single quotes, but maybe it&#39;s something else?"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 12055379, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mA6zkcVnu_fC4knvndDbtRtw5qsCS2hX3e2aDC-sA=k-s128", "display_name": "DiufoemHD", "link": "https://stackoverflow.com/users/12055379/diufoemhd"}, "edited": false, "score": 1, "creation_date": 1568241842, "post_id": 57897482, "comment_id": 102216168, "body": "i&#39;ve edited to include the json file.  i&#39;m new to that language so i&#39;m not really sure on the rules myself.  I skimmed over it and couldn&#39;t find any single quotes, but maybe it&#39;s something else?"}, {"owner": {"reputation": 3, "user_id": 12055379, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mA6zkcVnu_fC4knvndDbtRtw5qsCS2hX3e2aDC-sA=k-s128", "display_name": "DiufoemHD", "link": "https://stackoverflow.com/users/12055379/diufoemhd"}, "edited": false, "score": 1, "creation_date": 1568243047, "post_id": 57897482, "comment_id": 102216430, "body": "Nevermind, I&#39;ve found the issue. I have an extra comma on line 42 of my json file. There is still an error somewhere in there, but it no longer has anything to do with the json file."}], "tags": [], "owner": {"reputation": 1282, "user_id": 4621345, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-BrAH_VoKIz4/AAAAAAAAAAI/AAAAAAAAAIM/FT9DTnHcXJ8/photo.jpg?sz=128", "display_name": "Kevin Welch", "link": "https://stackoverflow.com/users/4621345/kevin-welch"}, "is_accepted": true, "score": 0, "last_activity_date": 1568240173, "creation_date": 1568240173, "answer_id": 57897482, "question_id": 57897393, "link": "https://stackoverflow.com/questions/57897393/expecting-property-name-enclosed-in-double-quotes-in-discord/57897482#57897482", "title": "&quot;Expecting property name enclosed in double quotes&quot; in Discord", "body": "<p>This is happening because <code>f</code> is not valid JSON. </p>\n\n<p>It gives you a pretty clear error as to why.\n<code>Expecting property name enclosed in double quotes</code></p>\n\n<p>Without seeing your json file I can't really say more. But I am assuming <code>database.json</code> is not valid JSON. My guess is that you are using single quotes on your keys.</p>\n"}], "owner": {"reputation": 3, "user_id": 12055379, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mA6zkcVnu_fC4knvndDbtRtw5qsCS2hX3e2aDC-sA=k-s128", "display_name": "DiufoemHD", "link": "https://stackoverflow.com/users/12055379/diufoemhd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 725, "favorite_count": 0, "accepted_answer_id": 57897482, "answer_count": 1, "score": 0, "last_activity_date": 1568243006, "creation_date": 1568239592, "last_edit_date": 1568241724, "question_id": 57897393, "link": "https://stackoverflow.com/questions/57897393/expecting-property-name-enclosed-in-double-quotes-in-discord", "title": "&quot;Expecting property name enclosed in double quotes&quot; in Discord", "body": "<p>I am coding a discord bot to use with my friends and I am getting a weird message on one of my cogs.  The code works perfect on one cog and doesn't at all on the other.</p>\n\n<p>I've tried rewriting the command and trying to get the data in a different way to no avail.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import discord\nimport json\nimport os\nfrom discord.ext import commands\n\nclass Inventory(commands.Cog):\n\n    def __init__(self, client):\n        self.client = client\n\n    @commands.command(aliases=['iindex', 'ii'])\n    async def itemindex(self, ctx, arg1='nd', arg2='nd'):\n        await ctx.channel.purge(limit=1)\n        if arg1 == 'nd':\n            embed=discord.Embed(title=\"insert title\", description='insert text', color=0x02a5fd)\n            embed.set_footer(text=\"insert footer\")\n            await ctx.send(embed=embed)\n\n        if arg1 == 'standard':\n\n            if arg2 == 'nd':\n                _n = 1\n                _a = 0\n                embed=discord.Embed(title=\"insert title\", color=0x02a5fd)\n                with open('database.json', 'r') as f:\n                    data = json.load(f) #error on this line\n\n                while _a &lt; 20:\n                    for item in data['items']['standard']:\n                        if data['items']['standard'][item]['itemid'] == _n:\n                            name = data['items']['standard'][item]['name']\n                            embed.add_field(name=f'{name}', value=f'ID: {_n}', inline=False)\n                            _n += 1\n                            _a += 1\n\n                embed.set_footer(text=\"insert footer\")\n                await ctx.send(embed=embed)\n\ndef setup(client):\n    client.add_cog(Inventory(client))\n</code></pre>\n\n<p>What it should be doing is loading the file and looping through the items in the key, but it won't even get to that point.  Instead, it gives me this error:</p>\n\n<pre><code>Ignoring exception in command itemindex:\nTraceback (most recent call last):\n  File \"C:\\Users\\stars\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\discord\\ext\\commands\\core.py\", line 79, in wrapped\n    ret = await coro(*args, **kwargs)\n  File \"C:\\Users\\stars\\Documents\\Projects\\Discord\\Neximator\\cogs\\inventory.py\", line 30, in itemindex\n    data = json.load(f)\n  File \"C:\\Users\\stars\\AppData\\Local\\Programs\\Python\\Python36\\lib\\json\\__init__.py\", line 299, in load\n    parse_constant=parse_constant, object_pairs_hook=object_pairs_hook, **kw)\n  File \"C:\\Users\\stars\\AppData\\Local\\Programs\\Python\\Python36\\lib\\json\\__init__.py\", line 354, in loads\n    return _default_decoder.decode(s)\n  File \"C:\\Users\\stars\\AppData\\Local\\Programs\\Python\\Python36\\lib\\json\\decoder.py\", line 339, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n  File \"C:\\Users\\stars\\AppData\\Local\\Programs\\Python\\Python36\\lib\\json\\decoder.py\", line 355, in raw_decode\n    obj, end = self.scan_once(s, idx)\njson.decoder.JSONDecodeError: Expecting property name enclosed in double quotes: line 43 column 5 (char 1218)\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"C:\\Users\\stars\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\discord\\ext\\commands\\bot.py\", line 859, in invoke\n    await ctx.command.invoke(ctx)\n  File \"C:\\Users\\stars\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\discord\\ext\\commands\\core.py\", line 725, in invoke\n    await injected(*ctx.args, **ctx.kwargs)\n  File \"C:\\Users\\stars\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\discord\\ext\\commands\\core.py\", line 88, in wrapped\n    raise CommandInvokeError(exc) from exc\ndiscord.ext.commands.errors.CommandInvokeError: Command raised an exception: JSONDecodeError: Expecting property name enclosed in double quotes: line 43 column 5 (char 1218)\n</code></pre>\n\n<p>Am I doing something wrong or is this a bug?</p>\n\n<p>Edit: I realize now that this could be a json error because I am pretty new to JSON and don't really know all of the rules.  Here is the database.json file I'm using:</p>\n\n<pre><code>{\n  \"nicknames\": {\n    \"discordname\": \"nickname\",\n  },\n  \"items\": {\n    \"standard\": {\n      \"slimeball\": {\n        \"name\": \"Slimeball\",\n        \"description\": \"Ball of sticky, viscous slime dropped by... well... slimes.\",\n        \"rarity\": \"D\",\n        \"itemid\": 1\n      }\n    },\n    \"weapon\": {\n      \"wooden_dagger\": {\n        \"name\": \"Wooden Dagger\",\n        \"description\": \"A stick with an edge lazily carved into it.\",\n        \"type\": \"sword\",\n        \"damage\": \"1d3\",\n        \"accuracy\": \"1d20\",\n        \"weaponid\": 1\n      },\n      \"wooden_gaunlets\": {\n        \"name\": \"Wooden Gaunlets\",\n        \"description\": \"Two logs with holes for your hands.  There are several designs lazily cut into it.\",\n        \"type\": \"melee\",\n        \"damage\": \"2d2\",\n        \"accuracy\": \"2d10\",\n        \"weaponid\": 2\n      },\n      \"wooden_bow\": {\n        \"name\": \"Wooden Bow\",\n        \"description\": \"A stick with a thin strand of elastic threaded through the ends creating an arch.\",\n        \"type\": \"ranged\",\n        \"damage\": \"1d4\",\n        \"accuracy\": \"1d25\",\n        \"weaponid\": 3\n      },\n    }\n  },\n  \"enemies\": {\n  }\n}\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 185, "user_id": 11866157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd185700814bb9612ebe513e80b7074f?s=128&d=identicon&r=PG&f=1", "display_name": "snamef", "link": "https://stackoverflow.com/users/11866157/snamef"}, "edited": false, "score": 0, "creation_date": 1568240242, "post_id": 57897363, "comment_id": 102215795, "body": "the best way is to declare it normally and write that without parentheses"}, {"owner": {"reputation": 17, "user_id": 5414546, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c5b13e4c3f5e0b991bbec4e0737107f?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Rs.", "link": "https://stackoverflow.com/users/5414546/mike-rs"}, "reply_to_user": {"reputation": 185, "user_id": 11866157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd185700814bb9612ebe513e80b7074f?s=128&d=identicon&r=PG&f=1", "display_name": "snamef", "link": "https://stackoverflow.com/users/11866157/snamef"}, "edited": false, "score": 0, "creation_date": 1568240698, "post_id": 57897363, "comment_id": 102215904, "body": "Yes i&#39;m actualy defragmenting, the real struggle was that this value is recieved from sys.argv[]"}], "answers": [{"tags": [], "owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "is_accepted": false, "score": 0, "last_activity_date": 1568239616, "creation_date": 1568239616, "answer_id": 57897399, "question_id": 57897363, "link": "https://stackoverflow.com/questions/57897363/how-to-cast-a-string-that-contains-a-list-to-class-list/57897399#57897399", "title": "How to cast a string that contains a list to &lt;Class &#39;List&#39;&gt;", "body": "<p>Use <code>ast.literal_eval()</code>.</p>\n\n<pre><code>foo = literal_eval(\"[{'ID': 6622, 'Status': 'Invoice processed'}]\")\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 17, "user_id": 5414546, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c5b13e4c3f5e0b991bbec4e0737107f?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Rs.", "link": "https://stackoverflow.com/users/5414546/mike-rs"}, "edited": false, "score": 0, "creation_date": 1568240863, "post_id": 57897435, "comment_id": 102215935, "body": "This is a complete answer; as i commented, the real problem is that i recieved this value from sys.argv[], thanks this will do the work."}], "tags": [], "owner": {"reputation": 1282, "user_id": 4621345, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-BrAH_VoKIz4/AAAAAAAAAAI/AAAAAAAAAIM/FT9DTnHcXJ8/photo.jpg?sz=128", "display_name": "Kevin Welch", "link": "https://stackoverflow.com/users/4621345/kevin-welch"}, "is_accepted": true, "score": 3, "last_activity_date": 1568239832, "creation_date": 1568239832, "answer_id": 57897435, "question_id": 57897363, "link": "https://stackoverflow.com/questions/57897363/how-to-cast-a-string-that-contains-a-list-to-class-list/57897435#57897435", "title": "How to cast a string that contains a list to &lt;Class &#39;List&#39;&gt;", "body": "<p><code>eval(foo)</code> or <code>literal_eval</code> is the most flexible way to do this as recommended in the other answer.</p>\n\n<p>The alternative is, if your string is valid JSON, using <code>json.loads(foo)</code>, but would require that the string is valid JSON (double quotes around the key names)</p>\n\n<pre><code>import json\nfoo = '[{\"ID\": 6622, \"Status\": \"Invoice processed\"}]'\nbar = json.loads(foo)\n# bar == [{\"ID\": 6622, \"Status\": \"Invoice processed\"}]\n</code></pre>\n\n<p>then you can convert it back to a string:</p>\n\n<pre><code>import json\nfoo = [{\"ID\": 6622, \"Status\": \"Invoice processed\"}]\nbar = json.dumps(foo)\n# bar == '[{\"ID\": 6622, \"Status\": \"Invoice processed\"}]'\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 5414546, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c5b13e4c3f5e0b991bbec4e0737107f?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Rs.", "link": "https://stackoverflow.com/users/5414546/mike-rs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 57897435, "answer_count": 2, "score": 0, "last_activity_date": 1568239832, "creation_date": 1568239349, "question_id": 57897363, "link": "https://stackoverflow.com/questions/57897363/how-to-cast-a-string-that-contains-a-list-to-class-list", "title": "How to cast a string that contains a list to &lt;Class &#39;List&#39;&gt;", "body": "<p>I'm having trouble casting the data in varibale foo (str) to a List object in Python v3.7.2, is there a easy way to do it?</p>\n\n<pre><code>foo = \"[{'ID': 6622, 'Status': 'Invoice processed'}]\"\ntype(foo) # str\n</code></pre>\n"}, {"tags": ["python", "image-segmentation", "scikit-image", "watershed"], "answers": [{"tags": [], "owner": {"reputation": 3747, "user_id": 224254, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3574772b96b3708ab652c69914bbcce0?s=128&d=identicon&r=PG", "display_name": "Juan", "link": "https://stackoverflow.com/users/224254/juan"}, "is_accepted": false, "score": 1, "last_activity_date": 1568344299, "creation_date": 1568344299, "answer_id": 57916846, "question_id": 57897326, "link": "https://stackoverflow.com/questions/57897326/skimage-merge-over-segmented-regions/57916846#57916846", "title": "Skimage merge over-segmented regions", "body": "<p>You can probably use a <a href=\"https://scikit-image.org/docs/dev/auto_examples/segmentation/plot_rag_draw.html#sphx-glr-auto-examples-segmentation-plot-rag-draw-py\" rel=\"nofollow noreferrer\">Region Adjacency Graph (RAG)</a>, and then merge the nodes according to some criterion <a href=\"https://scikit-image.org/docs/dev/auto_examples/segmentation/plot_rag.html#sphx-glr-auto-examples-segmentation-plot-rag-py\" rel=\"nofollow noreferrer\">[1]</a> <a href=\"https://scikit-image.org/docs/dev/auto_examples/segmentation/plot_rag_merge.html#sphx-glr-auto-examples-segmentation-plot-rag-merge-py\" rel=\"nofollow noreferrer\">[2]</a> <a href=\"https://scikit-image.org/docs/dev/auto_examples/segmentation/plot_rag_mean_color.html#sphx-glr-auto-examples-segmentation-plot-rag-mean-color-py\" rel=\"nofollow noreferrer\">[3]</a>. Finding the right criterion is often hard, though.</p>\n\n<p>If you want to do it by hand, you can do it with NumPy indexing:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import numpy as np\n\ndef merge_labels(labels_image,\n                 labels_to_merge,\n                 label_after_merge):\n    labels_map = np.arange(np.max(labels_image) + 1)\n    labels_map[labels_to_merge] = label_after_merge\n    return labels_map[labels_image]\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 11395993, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-VC6Pl7drEG4/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reTSgJhxo4QywzZRKCQ1gsynQWGlg/mo/photo.jpg?sz=128", "display_name": "Gus B", "link": "https://stackoverflow.com/users/11395993/gus-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1040, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1568344299, "creation_date": 1568239104, "question_id": 57897326, "link": "https://stackoverflow.com/questions/57897326/skimage-merge-over-segmented-regions", "title": "Skimage merge over-segmented regions", "body": "<p>I am trying to split this image into nine separate regions (the overlapping circlular areas). Since the circles overlap, I thought watershed segmentation would be the best method for this. I followed <a href=\"https://scikit-image.org/docs/dev/auto_examples/segmentation/plot_watershed.html\" rel=\"nofollow noreferrer\">this scikit-image.org example</a> to perform the technique on my image, and the image is over-segmented and I get 10 segments instead of nine, as checked with the ndi.labels function.</p>\n\n<p>Increasing the size of the footprint within the peak_local_max function raises the problem of under-segmenting, so I think it is better to over-segment and then combine the regions that should be a single region. You can see in the provided output that the eighth circle is split into two separate regions. I used the regionprops function to draw the bounding boxes. </p>\n\n<p><a href=\"https://i.imgur.com/8BxFOfi.png\" rel=\"nofollow noreferrer\">segmented_image_example.png</a></p>\n\n<pre><code>import matplotlib.pyplot as plt\nfrom scipy import ndimage as ndi\n\nfrom skimage import io, img_as_uint\nfrom skimage.filters import median, threshold_minimum\nfrom skimage.morphology import disk, square, closing, watershed\nfrom skimage.feature import peak_local_max\n\n\nimage_bw = ('example_binary.tif')\n\ndistance = ndi.distance_transform_edt(image_bw)\nlocal_maxi_disk10 = peak_local_max(distance, indices=False, \n                                   footprint=np.ones((400, 400)), \n                                   labels=image_bw)\n\nmarkers, num_features = ndi.label(local_maxi_disk10)\nlabels = watershed(-distance, markers, mask=image_bw)\nprint('Number of features (ndi.label):', num_features)\n\nfig, axes = plt.subplots(1, 3, figsize=(10, 4), sharex=True, sharey=True)\nax = axes.ravel()\n\nax[0].imshow(image_bw)\nax[0].set_title('Image Binary')\nax[1].imshow(-distance)\nax[1].set_title('Distances')\nax[2].imshow(labels)\nax[2].set_title('Separated objects')\n\nfor a in ax:\n    a.set_axis_off()\n\nplt.tight_layout()\nplt.show()\n</code></pre>\n\n<p>The final goal is to take the parts of the image that belong to each individual circle and save them as their own images, so to combine the regions that are incomplete, I could just add together their bounding boxes. However, it seems like there should be a way to combine multiple regions from regionprops or perhaps even different labels from the watershed process itself. Can anybody help send me in the right direction to figure out how to do this by merging regions/labels? I will also attach the binary image I used.</p>\n\n<p><a href=\"https://i.imgur.com/NByoKDd.png\" rel=\"nofollow noreferrer\">example_binary.tif</a></p>\n"}, {"tags": ["python", "tensorflow", "machine-learning", "loss-function"], "comments": [{"owner": {"reputation": 1001, "user_id": 1133212, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/271fc29b514e5f964430eb273b8b588d?s=128&d=identicon&r=PG", "display_name": "Tim", "link": "https://stackoverflow.com/users/1133212/tim"}, "edited": false, "score": 0, "creation_date": 1568239730, "post_id": 57897320, "comment_id": 102215667, "body": "How large is your training dataset? Sometimes even with dropout we can be susceptible to overfitting if the training data are too sparse."}, {"owner": {"reputation": 9, "user_id": 5372627, "user_type": "registered", "profile_image": "https://graph.facebook.com/1144139592280720/picture?type=large", "display_name": "George", "link": "https://stackoverflow.com/users/5372627/george"}, "reply_to_user": {"reputation": 1001, "user_id": 1133212, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/271fc29b514e5f964430eb273b8b588d?s=128&d=identicon&r=PG", "display_name": "Tim", "link": "https://stackoverflow.com/users/1133212/tim"}, "edited": false, "score": 0, "creation_date": 1568240223, "post_id": 57897320, "comment_id": 102215790, "body": "the data comes from monitoring of a SDN network and some servers performance, such as CPU and memory load. The data is generated in real time ,so, the dataset itself is big enough, but it is possible that many data points  is very similar to each other."}], "owner": {"reputation": 9, "user_id": 5372627, "user_type": "registered", "profile_image": "https://graph.facebook.com/1144139592280720/picture?type=large", "display_name": "George", "link": "https://stackoverflow.com/users/5372627/george"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1568243095, "creation_date": 1568239037, "last_edit_date": 1568243095, "question_id": 57897320, "link": "https://stackoverflow.com/questions/57897320/how-to-interpret-this-tensorboard-graph-of-loss-value", "title": "how to interpret this TensorBoard graph of loss value?", "body": "<p>After the training i got this graph of loss value . When the loss become approximately smaller than 25,  at some point this value become instantaneously very big (150, 140). </p>\n\n<p>Somebody suggested that the problem can be over fitting , but even after i tried different percentages of dropout (30%, 40% 60%) the problem remains.\n<a href=\"https://i.stack.imgur.com/LYvxw.png\" rel=\"nofollow noreferrer\">a graph of loss function during training</a></p>\n"}, {"tags": ["python", "multithreading"], "comments": [{"owner": {"reputation": 25770, "user_id": 5349916, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/QovYv.jpg?s=128&g=1", "display_name": "MisterMiyagi", "link": "https://stackoverflow.com/users/5349916/mistermiyagi"}, "edited": false, "score": 0, "creation_date": 1568279334, "post_id": 57897259, "comment_id": 102226782, "body": "You are already setting the maximum number of <i>processes</i> in your Pool. You are not using threads at all. What makes you think your setting is ignored and an arbitrary number of threads is spawned?"}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 11373911, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Fo6azdYkKmo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rezTtiHXp1bJaYBmtCbK0qrNAfl0g/mo/photo.jpg?sz=128", "display_name": "Guilherme Lima", "link": "https://stackoverflow.com/users/11373911/guilherme-lima"}, "edited": false, "score": 1, "creation_date": 1568241745, "post_id": 57897396, "comment_id": 102216150, "body": "I already tried that. I cant see the ouput of func anythere. it looks like it is iterating through the numbers infinitely"}, {"owner": {"reputation": 2336, "user_id": 7389264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/160900497f0373247800b2ad89798e32?s=128&d=identicon&r=PG&f=1", "display_name": "jirassimok", "link": "https://stackoverflow.com/users/7389264/jirassimok"}, "reply_to_user": {"reputation": 53, "user_id": 11373911, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Fo6azdYkKmo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rezTtiHXp1bJaYBmtCbK0qrNAfl0g/mo/photo.jpg?sz=128", "display_name": "Guilherme Lima", "link": "https://stackoverflow.com/users/11373911/guilherme-lima"}, "edited": false, "score": 0, "creation_date": 1568243283, "post_id": 57897396, "comment_id": 102216484, "body": "@GuilhermeLima <code>Executor.submit</code> returns a <a href=\"https://docs.python.org/3/library/concurrent.futures.html#concurrent.futures.Future\" rel=\"nofollow noreferrer\"><code>Future</code></a>, so if you say <code>x = pool.submit(...)</code>, you can access the result as <code>x.result()</code> once the thread has completed its job. If you want the results to automatically populate a data structure, you could save them in a <a href=\"https://docs.python.org/3/library/queue.html\" rel=\"nofollow noreferrer\"><code>Queue</code></a> instead of returning them from the function."}, {"owner": {"reputation": 53, "user_id": 11373911, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Fo6azdYkKmo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rezTtiHXp1bJaYBmtCbK0qrNAfl0g/mo/photo.jpg?sz=128", "display_name": "Guilherme Lima", "link": "https://stackoverflow.com/users/11373911/guilherme-lima"}, "edited": false, "score": 0, "creation_date": 1568243990, "post_id": 57897396, "comment_id": 102216639, "body": "i have some print statements inside the worker function and they are not getting printed. Whats going on?"}, {"owner": {"reputation": 2336, "user_id": 7389264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/160900497f0373247800b2ad89798e32?s=128&d=identicon&r=PG&f=1", "display_name": "jirassimok", "link": "https://stackoverflow.com/users/7389264/jirassimok"}, "reply_to_user": {"reputation": 53, "user_id": 11373911, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Fo6azdYkKmo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rezTtiHXp1bJaYBmtCbK0qrNAfl0g/mo/photo.jpg?sz=128", "display_name": "Guilherme Lima", "link": "https://stackoverflow.com/users/11373911/guilherme-lima"}, "edited": false, "score": 0, "creation_date": 1568246011, "post_id": 57897396, "comment_id": 102217011, "body": "@GuilhermeLima I can&#39;t be sure without more details, but I&#39;ve added an example that works for me to my answer. Does it work for you?"}, {"owner": {"reputation": 9227, "user_id": 1830895, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I8Hvh.jpg?s=128&g=1", "display_name": "Pynchia", "link": "https://stackoverflow.com/users/1830895/pynchia"}, "edited": false, "score": 0, "creation_date": 1568287328, "post_id": 57897396, "comment_id": 102231139, "body": "I think the OP&#39;s main points are being able to process the numbers indefinitely and to schedule a new worker as soon as one finishes"}, {"owner": {"reputation": 2336, "user_id": 7389264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/160900497f0373247800b2ad89798e32?s=128&d=identicon&r=PG&f=1", "display_name": "jirassimok", "link": "https://stackoverflow.com/users/7389264/jirassimok"}, "reply_to_user": {"reputation": 53, "user_id": 11373911, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Fo6azdYkKmo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rezTtiHXp1bJaYBmtCbK0qrNAfl0g/mo/photo.jpg?sz=128", "display_name": "Guilherme Lima", "link": "https://stackoverflow.com/users/11373911/guilherme-lima"}, "edited": false, "score": 0, "creation_date": 1568311251, "post_id": 57897396, "comment_id": 102243741, "body": "@GuilhermeLima I think I see where my answer failed. You are dealing with an infinite iterator, so you need to start the new jobs only when an old one finishes, or it will try to put infinite jobs into the queue of upcoming jobs. The simplest way to deal with this is probably using <a href=\"https://docs.python.org/3/library/concurrent.futures.html#concurrent.futures.Future.add_done_callback\" rel=\"nofollow noreferrer\"><code>Future.add_done_callback</code></a> to start the new jobs once each finishes. However, this feels like a bit of a hack."}], "tags": [], "owner": {"reputation": 2336, "user_id": 7389264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/160900497f0373247800b2ad89798e32?s=128&d=identicon&r=PG&f=1", "display_name": "jirassimok", "link": "https://stackoverflow.com/users/7389264/jirassimok"}, "is_accepted": false, "score": 2, "last_activity_date": 1568245807, "last_edit_date": 1568245807, "creation_date": 1568239599, "answer_id": 57897396, "question_id": 57897259, "link": "https://stackoverflow.com/questions/57897259/how-to-limit-the-nr-of-threads-in-a-thread-pool-for-infinite-iterable/57897396#57897396", "title": "How to limit the nr of threads in a thread pool for infinite iterable?", "body": "<p>You want to use a <a href=\"https://docs.python.org/3/library/concurrent.futures.html#threadpoolexecutor\" rel=\"nofollow noreferrer\"><code>ThreadPoolExecutor</code></a>. The first parameter to the constructor is <code>max_workers</code>, which determines how many threads it can use.</p>\n\n<p>So you end up with something like this:</p>\n\n<pre><code>with ThreadPoolExecutor(max_workers=n) as pool:\n    future = pool.submit(function, *args)\nfuture.result() # outputs result\n</code></pre>\n\n<p>The returned value is a <a href=\"https://docs.python.org/3/library/concurrent.futures.html#concurrent.futures.Future\" rel=\"nofollow noreferrer\"><code>Future</code></a>, so you can access the result once the future is completed. When the <code>with</code> block ends, the <code>ThreadPoolExecutor</code> waits for all of its workers to finish, so you can safely access the results after the end of the block.</p>\n\n<hr>\n\n<p>Here is a simple example of <code>ThreadPoolExecutor</code> in action:</p>\n\n<pre><code>from concurrent.futures import ThreadPoolExecutor\nfrom time import sleep\n\ndef fn(delay, result):\n    sleep(x)\n    print(result)\n\nwith ThreadPoolExecutor(max_workers=2) as pool:\n    pool.submit(fn, 3, \"last\")\n    pool.submit(fn, 1, \"first\")\n    pool.submit(fn, 1, \"middle\")\n# This should output \"first\", then \"middle\", then \"last\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9227, "user_id": 1830895, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I8Hvh.jpg?s=128&g=1", "display_name": "Pynchia", "link": "https://stackoverflow.com/users/1830895/pynchia"}, "is_accepted": false, "score": 0, "last_activity_date": 1568290168, "last_edit_date": 1568290168, "creation_date": 1568272773, "answer_id": 57901586, "question_id": 57897259, "link": "https://stackoverflow.com/questions/57897259/how-to-limit-the-nr-of-threads-in-a-thread-pool-for-infinite-iterable/57901586#57901586", "title": "How to limit the nr of threads in a thread pool for infinite iterable?", "body": "<p>One light solution using asyncio</p>\n\n<pre><code>import asyncio\nimport itertools as it\nfrom random import randint\n\n\nMAX_WORKERS = 5\n\nasync def worker(num):\n    s = f\"worker for {num}\"\n    print(s, \"start\")\n    await asyncio.sleep(randint(1,2))\n    print(s, \"end\")\n    return num*100\n\nasync def main():\n    seq = it.count()  # counts natural numbers endlessly\n    pending = []  # the tasks which are pending\n    while True:\n        groups = zip(*[seq]*(MAX_WORKERS-len(pending)))  # fetching only as many inputs as the completed ones\n        works = [\n            worker(i) for i in next(groups)\n        ]  # create as many workers as the ones which have completed\n\n        # now await the completion of the first among the pending tasks and the new ones\n        done, pending = await asyncio.wait(\n            it.chain(pending, works),\n            return_when=asyncio.FIRST_COMPLETED\n        )\n        print(\"Done\", len(done), \"Pending\", len(pending))\n        for t in done:  # print the result of each task which has completed\n            print(t.result())\n\n\nasyncio.run(main())\n</code></pre>\n\n<p>produces, for example:</p>\n\n<pre><code>worker for 1 start\nworker for 4 start\nworker for 0 start\nworker for 2 start\nworker for 3 start\nworker for 1 end\nworker for 4 end\nworker for 0 end\nworker for 2 end\nDone 4 Pending 1\n100\n400\n0\n200\nworker for 5 start\nworker for 8 start\nworker for 6 start\nworker for 7 start\nworker for 3 end\nworker for 8 end\nworker for 6 end\nDone 3 Pending 2\n300\n800\n600\nworker for 11 start\nworker for 10 start\nworker for 9 start\nworker for 5 end\nworker for 7 end\nworker for 11 end\nworker for 9 end\nDone 4 Pending 1\n700\n500\n1100\n900\nworker for 15 start\nworker for 12 start\nworker for 13 start\nworker for 14 start\nworker for 10 end\nDone 1 Pending 4\n1000\nworker for 16 start\nworker for 15 end\nworker for 13 end\nworker for 14 end\nDone 3 Pending 2\n1400\n1300\n1500\nworker for 18 start\nworker for 17 start\nworker for 19 start\nworker for 16 end\nworker for 12 end\nDone 2 Pending 3\n1600\n1200\nworker for 20 start\nworker for 21 start\nworker for 19 end\nDone 1 Pending 4\n1900\nworker for 22 start\nworker for 18 end\nworker for 17 end\nworker for 20 end\nDone 3 Pending 2\n1800\n2000\n1700\nworker for 23 start\nworker for 24 start\nworker for 25 start\nworker for 21 end\nworker for 22 end\nDone 2 Pending 3\n2100\n2200\nworker for 27 start\nworker for 26 start\nworker for 23 end\nworker for 24 end\nworker for 25 end\nworker for 26 end\nDone 4 Pending 1\n2500\n2300\n2600\n2400\nworker for 30 start\nworker for 31 start\nworker for 28 start\nworker for 29 start\nworker for 27 end\nDone 1 Pending 4\n2700\nworker for 32 start\nworker for 30 end\nworker for 31 end\nworker for 28 end\nworker for 29 end\nDone 4 Pending 1\n2900\n3000\n2800\n3100\nworker for 33 start\nworker for 34 start\nworker for 35 start\nworker for 36 start\nworker for 32 end\nworker for 35 end\nworker for 36 end\nDone 3 Pending 2\n3600\n3500\n3200\nworker for 39 start\nworker for 38 start\nworker for 37 start\nworker for 33 end\nworker for 34 end\nDone 2 Pending 3\n3400\n3300\nworker for 40 start\nworker for 41 start\n...\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 11373911, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Fo6azdYkKmo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rezTtiHXp1bJaYBmtCbK0qrNAfl0g/mo/photo.jpg?sz=128", "display_name": "Guilherme Lima", "link": "https://stackoverflow.com/users/11373911/guilherme-lima"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1568290168, "creation_date": 1568238737, "question_id": 57897259, "link": "https://stackoverflow.com/questions/57897259/how-to-limit-the-nr-of-threads-in-a-thread-pool-for-infinite-iterable", "title": "How to limit the nr of threads in a thread pool for infinite iterable?", "body": "<p>Suppose we want to iterate infinitely through all the natural numbers and open a thread for each number up to a limit. Since there are infinite natural number this list acts like a generator, so how can we keep a limit on the number of open threads while generating the numbers? </p>\n\n<p>I'm trying something like:</p>\n\n<pre><code>from multiprocessing import Pool\n\ndef func(i):\n    \"\"\" Do something with i\"\"\"\n\np = Pool(10)\ni = 0\nwhile True:\n    p.imap_unordered(func,i)\n    i += 1\n</code></pre>\n\n<p>I tried many other different ways (threadpools, semaphores, etc) but all of them seem to ignore the max nr of threads. I want to make something take opens up MAX_THREADS threads and everytime a thread finishes, it iterates again and start a new one. How can i achieve this?</p>\n"}, {"tags": ["python", "docker", "tensorflow", "tensorflow-serving"], "answers": [{"tags": [], "owner": {"reputation": 43, "user_id": 7643739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7c55a6e00c7c2fef7b3f112da12feb7?s=128&d=identicon&r=PG&f=1", "display_name": "bennyo27", "link": "https://stackoverflow.com/users/7643739/bennyo27"}, "is_accepted": true, "score": 0, "last_activity_date": 1568421449, "creation_date": 1568421449, "answer_id": 57931593, "question_id": 57897237, "link": "https://stackoverflow.com/questions/57897237/how-to-preprocess-data-for-tensorflow-serving-model/57931593#57931593", "title": "How to preprocess data for tensorflow/serving model?", "body": "<p><strong>UPDATE:</strong></p>\n\n<p>After a long time searching for the answer, I don't know why it took so long for me to come across pickling, the answer to tokenizing the input request with the same tokenizer would be to pickle, so</p>\n\n<pre><code># saving\nwith open('tokenizer.pickle', 'wb') as handle:\n    pickle.dump(tokenizer, handle, protocol=pickle.HIGHEST_PROTOCOL)\n\n# loading\nwith open('tokenizer.pickle', 'rb') as handle:\n    tokenizer = pickle.load(handle)\n</code></pre>\n\n<p>Same can be done with the padding if needed.</p>\n"}], "owner": {"reputation": 43, "user_id": 7643739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7c55a6e00c7c2fef7b3f112da12feb7?s=128&d=identicon&r=PG&f=1", "display_name": "bennyo27", "link": "https://stackoverflow.com/users/7643739/bennyo27"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 201, "favorite_count": 0, "accepted_answer_id": 57931593, "answer_count": 1, "score": -1, "last_activity_date": 1568421449, "creation_date": 1568238583, "last_edit_date": 1568396625, "question_id": 57897237, "link": "https://stackoverflow.com/questions/57897237/how-to-preprocess-data-for-tensorflow-serving-model", "title": "How to preprocess data for tensorflow/serving model?", "body": "<p>I'm relatively new to Tensorflow. I have this model deployed locally, using Docker but the data I'm inputting is not preprocessed so it gives me an error. This might be due to the fact that I preprocessed the data outside the model when creating the model?</p>\n\n<p>When I input the data, I get this error from the deployed tensorflow/serving through Docker:</p>\n\n<pre><code>{ \"error\": \"Failed to process element: 0 of \\'instances\\' list. Error: Invalid argument: JSON Value: \\\"Hello\\\" Type: String is not of expected type: float\" }\n</code></pre>\n\n<p>Meaning it expects an array of tokenized words so, [[32],[1]]. Something like that.</p>\n\n<p><strong>This is what my model looks like:</strong></p>\n\n<pre><code>    model = tf.keras.Sequential([\n            tf.keras.layers.Embedding(\n                vocab_size, embedding_dim, input_length=max_length),\n            tf.keras.layers.Bidirectional(tf.keras.layers.LSTM(32)),\n            tf.keras.layers.Dense(128, activation=\"relu\"),\n            tf.keras.layers.Dense(3, activation=\"softmax\")\n        ])\n</code></pre>\n\n<p>How can I tokenize and pad the data the same way I did with the initial training data or how can I add that step to the model?</p>\n"}, {"tags": ["python", "abstract-syntax-tree"], "answers": [{"tags": [], "owner": {"reputation": 69906, "user_id": 6890912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d291e4dfbf14dcc8874bd4fa620fac23?s=128&d=identicon&r=PG&f=1", "display_name": "blhsing", "link": "https://stackoverflow.com/users/6890912/blhsing"}, "is_accepted": true, "score": 3, "last_activity_date": 1568246184, "creation_date": 1568246184, "answer_id": 57898093, "question_id": 57897223, "link": "https://stackoverflow.com/questions/57897223/how-to-compile-ast-node-in-eval-mode/57898093#57898093", "title": "How to compile ast node in &#39;eval&#39; mode", "body": "<p>Your last attempt is close, but the <code>body</code> of <code>ast.Expression</code> should be a single expression, not a list of expressions.</p>\n\n<p>Change:</p>\n\n<pre><code>expr = ast.Expression(body=[tree])\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>expr = ast.Expression(body=tree)\n</code></pre>\n\n<p>so that <code>eval(exe)</code> returns: <code>4</code></p>\n"}], "owner": {"reputation": 178, "user_id": 11880049, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_cPRInucXAk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdnvjIvmGU6gh7LoEMdhrzSuewfew/photo.jpg?sz=128", "display_name": "Yodogawa Mikio", "link": "https://stackoverflow.com/users/11880049/yodogawa-mikio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 357, "favorite_count": 1, "accepted_answer_id": 57898093, "answer_count": 1, "score": 4, "last_activity_date": 1568246184, "creation_date": 1568238499, "question_id": 57897223, "link": "https://stackoverflow.com/questions/57897223/how-to-compile-ast-node-in-eval-mode", "title": "How to compile ast node in &#39;eval&#39; mode", "body": "<p>I want to create a code object that I would be able to reuse with <code>eval</code> later on. I need to do this based on some <code>ast</code> nodes I have programmatically generated, therefore I can't have code as a string passed to <code>compile</code> function. How to construct a valid <code>ast</code> node for compile? Below are couple of things I have tried:</p>\n\n<pre><code>tree = ast.parse(\"2+2\")\nexe = compile(tree.body[0], filename=\"\", mode=\"eval\")\n</code></pre>\n\n<blockquote>\n  <p>TypeError: expected Expression node, got Expr</p>\n</blockquote>\n\n<pre><code>tree = ast.BinOp(left=ast.Num(n=2), right=ast.Num(n=2), op=ast.Add())\nexe = compile(tree, filename=\"\", mode=\"eval\")\n</code></pre>\n\n<blockquote>\n  <p>TypeError: expected Expression node, got BinOp</p>\n</blockquote>\n\n<pre><code>tree = ast.BinOp(left=ast.Num(n=2), right=ast.Num(n=2), op=ast.Add())\nexpr = ast.Expression(body=[tree])\nast.fix_missing_locations(expr)\nexe = compile(expr, filename=\"\", mode=\"eval\")\n</code></pre>\n\n<blockquote>\n  <p>TypeError: required field \"lineno\" missing from expr</p>\n</blockquote>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 1, "creation_date": 1568238751, "post_id": 57897196, "comment_id": 102215454, "body": "Common issue for query <a href=\"https://github.com/pandas-dev/pandas/issues/6508\" rel=\"nofollow noreferrer\">github.com/pandas-dev/pandas/issues/6508</a>"}, {"owner": {"reputation": 557, "user_id": 6065030, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-Nz00_8Lmc0w/AAAAAAAAAAI/AAAAAAAAECw/SvdmblN97TA/photo.jpg?sz=128", "display_name": "Ravi M", "link": "https://stackoverflow.com/users/6065030/ravi-m"}, "reply_to_user": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 0, "creation_date": 1568239288, "post_id": 57897196, "comment_id": 102215567, "body": "Thanks. Looks like there is a PR ready to merge <code>https:&#47;&#47;github.com&#47;pandas-dev&#47;pandas&#47;pull&#47;28215</code> to take care of this issue."}, {"owner": {"reputation": 557, "user_id": 6065030, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-Nz00_8Lmc0w/AAAAAAAAAAI/AAAAAAAAECw/SvdmblN97TA/photo.jpg?sz=128", "display_name": "Ravi M", "link": "https://stackoverflow.com/users/6065030/ravi-m"}, "reply_to_user": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 0, "creation_date": 1568240311, "post_id": 57897196, "comment_id": 102215814, "body": "I used <code>_clean_special_characters_column_name</code> method available in the PR for the time being to map old column names to new column names and used the new column names in the query expression"}], "answers": [{"comments": [{"owner": {"reputation": 557, "user_id": 6065030, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-Nz00_8Lmc0w/AAAAAAAAAAI/AAAAAAAAECw/SvdmblN97TA/photo.jpg?sz=128", "display_name": "Ravi M", "link": "https://stackoverflow.com/users/6065030/ravi-m"}, "edited": false, "score": 0, "creation_date": 1568239247, "post_id": 57897339, "comment_id": 102215559, "body": "That&#39;s true. I am trying to use <code>query</code> or <code>eval</code> method for the step."}, {"owner": {"reputation": 2244, "user_id": 5338119, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LlwPB.jpg?s=128&g=1", "display_name": "Jan X Marek", "link": "https://stackoverflow.com/users/5338119/jan-x-marek"}, "reply_to_user": {"reputation": 557, "user_id": 6065030, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-Nz00_8Lmc0w/AAAAAAAAAAI/AAAAAAAAECw/SvdmblN97TA/photo.jpg?sz=128", "display_name": "Ravi M", "link": "https://stackoverflow.com/users/6065030/ravi-m"}, "edited": false, "score": 0, "creation_date": 1568240258, "post_id": 57897339, "comment_id": 102215797, "body": "According to the documentation (<a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.eval.html#pandas.eval\" rel=\"nofollow noreferrer\">pandas.pydata.org/pandas-docs/stable/reference/api/&hellip;</a>), the string needs to be a valid python expression, which &#39;first.last &lt; 30&#39; is not, because &#39;.&#39; has a special meaning. You can check this question: <a href=\"https://stackoverflow.com/questions/40045545/pandas-query-string-where-column-name-contains-special-characters\" title=\"pandas query string where column name contains special characters\">stackoverflow.com/questions/40045545/&hellip;</a> The second answer offers a nice hack."}], "tags": [], "owner": {"reputation": 2244, "user_id": 5338119, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LlwPB.jpg?s=128&g=1", "display_name": "Jan X Marek", "link": "https://stackoverflow.com/users/5338119/jan-x-marek"}, "is_accepted": false, "score": 0, "last_activity_date": 1568239184, "creation_date": 1568239184, "answer_id": 57897339, "question_id": 57897196, "link": "https://stackoverflow.com/questions/57897196/pandas-query-or-eval-when-there-is-in-the-column-name/57897339#57897339", "title": "Pandas query or eval when there is `.` in the column name", "body": "<p>You can query the dataframe like this:</p>\n\n<pre><code>df[df['first.last'] &lt; 30]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 557, "user_id": 6065030, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-Nz00_8Lmc0w/AAAAAAAAAAI/AAAAAAAAECw/SvdmblN97TA/photo.jpg?sz=128", "display_name": "Ravi M", "link": "https://stackoverflow.com/users/6065030/ravi-m"}, "edited": false, "score": 0, "creation_date": 1568239392, "post_id": 57897347, "comment_id": 102215591, "body": "Thanks @hrmnjt. But the above approach will cause collisions if there is an additional column name <code>first_last</code>."}, {"owner": {"reputation": 133, "user_id": 10046768, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gY5uC.jpg?s=128&g=1", "display_name": "hrmnjt", "link": "https://stackoverflow.com/users/10046768/hrmnjt"}, "reply_to_user": {"reputation": 557, "user_id": 6065030, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-Nz00_8Lmc0w/AAAAAAAAAAI/AAAAAAAAECw/SvdmblN97TA/photo.jpg?sz=128", "display_name": "Ravi M", "link": "https://stackoverflow.com/users/6065030/ravi-m"}, "edited": false, "score": 1, "creation_date": 1568239591, "post_id": 57897347, "comment_id": 102215627, "body": "You could choose to replace the column name with special format like <code>___</code> to avoid collision. Just trying to help here with money tricks as this is a known issue that is pending to be implemented into pandas core code."}], "tags": [], "owner": {"reputation": 133, "user_id": 10046768, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gY5uC.jpg?s=128&g=1", "display_name": "hrmnjt", "link": "https://stackoverflow.com/users/10046768/hrmnjt"}, "is_accepted": false, "score": 2, "last_activity_date": 1568239252, "creation_date": 1568239252, "answer_id": 57897347, "question_id": 57897196, "link": "https://stackoverflow.com/questions/57897196/pandas-query-or-eval-when-there-is-in-the-column-name/57897347#57897347", "title": "Pandas query or eval when there is `.` in the column name", "body": "<p>You could rename the columns. Please try:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>cols = df.columns\ncols = cols.map(lambda x: x.replace('.', '_') if isinstance(x, (str, unicode)) else x)\ndf.columns = cols\n</code></pre>\n"}], "owner": {"reputation": 557, "user_id": 6065030, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-Nz00_8Lmc0w/AAAAAAAAAAI/AAAAAAAAECw/SvdmblN97TA/photo.jpg?sz=128", "display_name": "Ravi M", "link": "https://stackoverflow.com/users/6065030/ravi-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1568239252, "creation_date": 1568238312, "question_id": 57897196, "link": "https://stackoverflow.com/questions/57897196/pandas-query-or-eval-when-there-is-in-the-column-name", "title": "Pandas query or eval when there is `.` in the column name", "body": "<p>How can I use column names in pandas <code>query</code> or <code>eval</code> method when the column name has <code>.</code> in it. For example, the dataframe has <code>.</code> in its column name <code>first.last</code></p>\n\n<p><code>df = pd.DataFrame({'first.last':[10, 20, 30, 40]})</code></p>\n\n<p>As a result I can't run the following expression \n<code>df.query('first.last &lt; 30')</code></p>\n\n<p>Are there any ways to mitigate this or work around this ? Thanks</p>\n"}, {"tags": ["python", "pip", "jupyter-notebook", "pandas-datareader"], "comments": [{"owner": {"reputation": 1210, "user_id": 5028532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f50c017af1ddc79a80bc3f92e94521a4?s=128&d=identicon&r=PG&f=1", "display_name": "razdi", "link": "https://stackoverflow.com/users/5028532/razdi"}, "edited": false, "score": 0, "creation_date": 1568244039, "post_id": 57897194, "comment_id": 102216652, "body": "My first guess is that you&#39;re installing the package in a different <code>env</code> and running jupyter notebook in a different one. Can you check the top right corner of your jupyter notebook to see <code>Python [env_name]</code>. <code>env_name</code> would be the  env jupyter is running on. Go to anaconda prompt and <code>source activate env_name</code>. After which, you can try installing the package and running jupyter again."}], "answers": [{"tags": [], "owner": {"reputation": 453, "user_id": 9494334, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cy4EL.png?s=128&g=1", "display_name": "Misieq", "link": "https://stackoverflow.com/users/9494334/misieq"}, "is_accepted": false, "score": 1, "last_activity_date": 1568238980, "creation_date": 1568238980, "answer_id": 57897305, "question_id": 57897194, "link": "https://stackoverflow.com/questions/57897194/i-cannot-install-pandas-datareader-on-windows-for-anaconda-jupyter-notebook/57897305#57897305", "title": "I cannot install pandas-datareader on windows for anaconda jupyter notebook", "body": "<p>Most obvious reason can be that you are using differnt enviroments(kernels) for jupyter notebook and others. Try running this code inside jupyter notebook empty project:</p>\n\n<pre><code>try:\n    from pip._internal.operations import freeze\nexcept ImportError:  # if your pip version is bigger then 10\n    from pip.operations import freeze\n\nrequirements = freeze.freeze()\nfor i in requirements:\n    print(i)\n</code></pre>\n\n<p>and check if there are your's missing imports</p>\n"}, {"tags": [], "owner": {"reputation": 51, "user_id": 5612850, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-mIzKnuOo5GY/AAAAAAAAAAI/AAAAAAAAI-g/-hY897bI9NU/photo.jpg?sz=128", "display_name": "Pavel Petr", "link": "https://stackoverflow.com/users/5612850/pavel-petr"}, "is_accepted": false, "score": 0, "last_activity_date": 1588857317, "creation_date": 1588857317, "answer_id": 61658741, "question_id": 57897194, "link": "https://stackoverflow.com/questions/57897194/i-cannot-install-pandas-datareader-on-windows-for-anaconda-jupyter-notebook/61658741#61658741", "title": "I cannot install pandas-datareader on windows for anaconda jupyter notebook", "body": "<p>You have to run CMD Prompt from Anaconda navigator or find it from Start menu. Then use this command:</p>\n\n<pre><code>conda install pandas_datareader \n</code></pre>\n\n<p>I underwent similar difficulties and successfully fixed thanks to this post - <a href=\"https://stackoverflow.com/questions/56808385/trouble-installing-some-libraries-in-python-oauth2client-and-gspread\">Trouble installing some libraries in python (oauth2client and gspread)</a> Conda is installing packagies to environment for Anaconda which is obviously different than pip uses.</p>\n"}], "owner": {"reputation": 1, "user_id": 5125594, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5150890cd11266e01ad1279ffce84b90?s=128&d=identicon&r=PG&f=1", "display_name": "Obi Ifeacho", "link": "https://stackoverflow.com/users/5125594/obi-ifeacho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 990, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1588857317, "creation_date": 1568238296, "question_id": 57897194, "link": "https://stackoverflow.com/questions/57897194/i-cannot-install-pandas-datareader-on-windows-for-anaconda-jupyter-notebook", "title": "I cannot install pandas-datareader on windows for anaconda jupyter notebook", "body": "<p>I cannot import pandas_datareader on my jupyter notebook(via anaconda, python3) on my windows 10 laptop. It has been installed and I can see the file but It's having errors with importing into the jupyter notebook file. Any help?</p>\n\n<p>I have tried :\npip install pandas-datareader ,\npip3 install pandas-datareader  ,\nconda install -c anaconda pandas-datareader </p>\n\n<p>I expect the the code to run smoothly however I get</p>\n\n<p>ModuleNotFoundError                       Traceback (most recent call last)\n in ()\n----> 1 import pandas_datareader</p>\n\n<p>ModuleNotFoundError: No module named 'pandas_datareader'</p>\n"}, {"tags": ["python", "windows", "macos", "virtualenv", "compatibility"], "comments": [{"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 1, "creation_date": 1568238466, "post_id": 57897193, "comment_id": 102215392, "body": "This ultimately depends on what your Python code does... For example, do you need some compiled C library, which is machine-dependant (like numpy)? Simply <code>print(&quot;hello&quot;)</code> will work both on Windows and Mac"}, {"owner": {"reputation": 3005, "user_id": 11703358, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5pIOl.png?s=128&g=1", "display_name": "ipaleka", "link": "https://stackoverflow.com/users/11703358/ipaleka"}, "edited": false, "score": 0, "creation_date": 1568238553, "post_id": 57897193, "comment_id": 102215413, "body": "&gt; besides partitioning HD and booting a Mac OS install; Oracle VirtualBox or VMWare Player then."}, {"owner": {"reputation": 55797, "user_id": 7976758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/512cfbaf98d63ca4acd57b2df792aec6?s=128&d=identicon&r=PG", "display_name": "phd", "link": "https://stackoverflow.com/users/7976758/phd"}, "edited": false, "score": 0, "creation_date": 1568239239, "post_id": 57897193, "comment_id": 102215554, "body": "Or a docker container."}], "owner": {"reputation": 9, "user_id": 8518503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ef3509c05418640e9a2f92c4d6420ae?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Maller", "link": "https://stackoverflow.com/users/8518503/justin-maller"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 72, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1568238291, "creation_date": 1568238291, "question_id": 57897193, "link": "https://stackoverflow.com/questions/57897193/how-to-create-python-application-on-windows-for-mac-os", "title": "How to: Create Python Application ON Windows For Mac OS", "body": "<p>I\u2019d like to see your suggestions for, ultimately, writing a .py on a native windows machine that will run on a Mac OS as a .dmg file. Whether it\u2019s using py2app in a virtual environment etc, besides partitioning HD and booting a Mac OS install.</p>\n\n<p>Note: this is assuming all the modules used in the python code are Mac OS compatible.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 1434, "user_id": 7212665, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KrLoI.jpg?s=128&g=1", "display_name": "Demi-Lune", "link": "https://stackoverflow.com/users/7212665/demi-lune"}, "edited": false, "score": 0, "creation_date": 1568238633, "post_id": 57897181, "comment_id": 102215429, "body": "possible duplicate: <a href=\"https://stackoverflow.com/questions/48763362/python-subprocess-kill-with-timeout\" title=\"python subprocess kill with timeout\">stackoverflow.com/questions/48763362/&hellip;</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user11851036"}, "reply_to_user": {"reputation": 1434, "user_id": 7212665, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KrLoI.jpg?s=128&g=1", "display_name": "Demi-Lune", "link": "https://stackoverflow.com/users/7212665/demi-lune"}, "edited": false, "score": 0, "creation_date": 1568238906, "post_id": 57897181, "comment_id": 102215480, "body": "I have tried that"}], "answers": [{"tags": [], "owner": {"reputation": 358, "user_id": 11365663, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2msqx.png?s=128&g=1", "display_name": "Ammar Askar", "link": "https://stackoverflow.com/users/11365663/ammar-askar"}, "is_accepted": true, "score": 1, "last_activity_date": 1568238577, "creation_date": 1568238577, "answer_id": 57897234, "question_id": 57897181, "link": "https://stackoverflow.com/questions/57897181/how-can-i-kill-process-that-i-have-started-with-python/57897234#57897234", "title": "How can i kill process that i have started with python", "body": "<p>Take a look at the documentation for <a href=\"https://docs.python.org/3.7/library/subprocess.html#subprocess.call\" rel=\"nofollow noreferrer\"><code>subprocess.call</code></a>, it says:</p>\n\n<blockquote>\n  <p>Run the command described by args. Wait for command to complete, then return the <code>returncode</code> attribute.</p>\n</blockquote>\n\n<p><code>subprocess.call</code> waits for the command to finish, i.e until Tor is closed in your case. Instead, you can use the lower-level <code>Popen</code> API <a href=\"https://docs.python.org/3.7/library/subprocess.html#popen-constructor\" rel=\"nofollow noreferrer\">directly</a> which lets you control the process after it's been spawned.</p>\n\n<p>In that case, your code would end up looking something like this:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>p = subprocess.Popen(['./start-tor-browser.desktop'])\n# ...\n# do other stuff here\np.kill()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 133, "user_id": 10046768, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gY5uC.jpg?s=128&g=1", "display_name": "hrmnjt", "link": "https://stackoverflow.com/users/10046768/hrmnjt"}, "is_accepted": false, "score": -1, "last_activity_date": 1568238605, "creation_date": 1568238605, "answer_id": 57897240, "question_id": 57897181, "link": "https://stackoverflow.com/questions/57897181/how-can-i-kill-process-that-i-have-started-with-python/57897240#57897240", "title": "How can i kill process that i have started with python", "body": "<p>On linux you can do</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>ps -fea | grep -i 'tor'\nOR\npgrep applicationName\n</code></pre>\n\n<p>to find the process/pid. And to kill the tor process</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>kill &lt;pid&gt;\n</code></pre>\n\n<p>The command <code>ps -fea | grep &lt;process-name&gt;</code> will enumerate all processes running with name </p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user11851036"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 1, "accepted_answer_id": 57897234, "answer_count": 2, "score": 1, "last_activity_date": 1568238605, "creation_date": 1568238227, "question_id": 57897181, "link": "https://stackoverflow.com/questions/57897181/how-can-i-kill-process-that-i-have-started-with-python", "title": "How can i kill process that i have started with python", "body": "<p>So I made a program that opens tor browser and I need to kill that browser after some time how can I do that </p>\n\n<p>I have tried to kill it with os.system and Linux commands</p>\n\n<p>And this is command with whic I start the browser</p>\n\n<pre><code>    subprocess.call(['./start-tor-browser.desktop'])\n</code></pre>\n"}, {"tags": ["python", "json", "pandas", "dataframe"], "comments": [{"owner": {"reputation": 72931, "user_id": 2538939, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/876f7ddaf27a16c17a62b8a9705b45f1?s=128&d=identicon&r=PG&f=1", "display_name": "Code Different", "link": "https://stackoverflow.com/users/2538939/code-different"}, "edited": false, "score": 0, "creation_date": 1568239531, "post_id": 57897142, "comment_id": 102215616, "body": "How about flattening your DataFrame: <code>from pandas.io.json import json_normalize; json_normalize(data, [&#39;Details&#39;], meta=[&#39;ID&#39;, &#39;Date&#39;, &#39;Term&#39;])</code>"}], "answers": [{"comments": [{"owner": {"reputation": 926, "user_id": 2279829, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/07083c635fd3ea596331cb2f4f60c635?s=128&d=identicon&r=PG", "display_name": "JC23", "link": "https://stackoverflow.com/users/2279829/jc23"}, "edited": false, "score": 0, "creation_date": 1568304206, "post_id": 57897395, "comment_id": 102240801, "body": "that gives <code>TypeError: string indices must be integers</code> b/c &#39;Rate&#39; must be an integer"}, {"owner": {"reputation": 64, "user_id": 8995336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wYyc4.png?s=128&g=1", "display_name": "Jonas Juhler", "link": "https://stackoverflow.com/users/8995336/jonas-juhler"}, "reply_to_user": {"reputation": 926, "user_id": 2279829, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/07083c635fd3ea596331cb2f4f60c635?s=128&d=identicon&r=PG", "display_name": "JC23", "link": "https://stackoverflow.com/users/2279829/jc23"}, "edited": false, "score": 0, "creation_date": 1568306499, "post_id": 57897395, "comment_id": 102241824, "body": "What does <code>df[&#39;Details&#39;].iloc[0]</code> give you?"}], "tags": [], "owner": {"reputation": 64, "user_id": 8995336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wYyc4.png?s=128&g=1", "display_name": "Jonas Juhler", "link": "https://stackoverflow.com/users/8995336/jonas-juhler"}, "is_accepted": false, "score": 0, "last_activity_date": 1568239597, "creation_date": 1568239597, "answer_id": 57897395, "question_id": 57897142, "link": "https://stackoverflow.com/questions/57897142/how-to-access-pandas-series-nested-within-a-dataframe/57897395#57897395", "title": "How to access pandas series nested within a dataframe", "body": "<p>Have you tried this:</p>\n\n<pre><code>df['Details'][0]['Rate']\n</code></pre>\n\n<p>I think it is stored as a Series containing a single dict.</p>\n"}], "owner": {"reputation": 926, "user_id": 2279829, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/07083c635fd3ea596331cb2f4f60c635?s=128&d=identicon&r=PG", "display_name": "JC23", "link": "https://stackoverflow.com/users/2279829/jc23"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1568239597, "creation_date": 1568237994, "question_id": 57897142, "link": "https://stackoverflow.com/questions/57897142/how-to-access-pandas-series-nested-within-a-dataframe", "title": "How to access pandas series nested within a dataframe", "body": "<p>The json response is listed as below:</p>\n\n<pre><code>[{\n\"ID\": \"12345\",\n\"Date\": \"9-11-19\",\n\"Term\": \"Fall\",\n\"Details\": [{\n    \"Version\": \"v2\",\n    \"Release\": \"Series-2\",\n    \"Rate\": \"Quarterly\",\n.\n.\n.\n\n    }]\n}]\n</code></pre>\n\n<p>I believe it's a Series because I get the following in the terminal</p>\n\n<pre><code>print(type(df['Details']))\n&lt;class 'pandas.core.series.Series'&gt;\n</code></pre>\n\n<p>How do I get to Version, Release, Rate or any data within the Details series? I've tried</p>\n\n<pre><code>1) df['Details'].get('Rate') #this always gives me None\n2) df['Details']['Rate'] # KeyError: 'Rate'\n3) df['Details'].tolist() #list can only accessed by indices not strings\n</code></pre>\n\n<p>Unless I made a typo in one of my numerous earlier attempts (the 3 above are the only ones I could Undo via Ctrl + Z) I don't why I'm having such an issue. In the end what I want to do is drop rows from the df based upon Rate values. Should I convert the df to some other type?</p>\n"}, {"tags": ["python", "macos", "actionlistener", "clipboard", "event-listener"], "answers": [{"comments": [{"owner": {"reputation": 1290, "user_id": 4180176, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/1022787394506806/picture?type=large", "display_name": "Joshua Nixon", "link": "https://stackoverflow.com/users/4180176/joshua-nixon"}, "edited": false, "score": 1, "creation_date": 1568240374, "post_id": 57897416, "comment_id": 102215826, "body": "<code>pynput keyboard listener</code> would be a better idea. <a href=\"https://pythonhosted.org/pynput/keyboard.html\" rel=\"nofollow noreferrer\">pythonhosted.org/pynput/keyboard.html</a>"}, {"owner": {"reputation": 19, "user_id": 11947820, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-p7YO9FUkFj0/AAAAAAAAAAI/AAAAAAAAHhg/g6sryDgOTYo/photo.jpg?sz=128", "display_name": "Tomas Stor&#229;s", "link": "https://stackoverflow.com/users/11947820/tomas-stor%c3%a5s"}, "edited": false, "score": 0, "creation_date": 1568385529, "post_id": 57897416, "comment_id": 102268903, "body": "Thanks for both replies! Both of your suggestions helped me in the right direction! @JoshuaNixons suggestion using pynput was the one I finally ended up using. For some reason keyboard module didn&#39;t work for, me might be that it doesn&#39;t work well on Mac, or that I used it incorrectly. I will update my question with my code using keyboard and pynput"}], "tags": [], "owner": {"reputation": 423, "user_id": 11672352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aec15dee006fc05e7c8949582e9dc4ae?s=128&d=identicon&r=PG&f=1", "display_name": "glory9211", "link": "https://stackoverflow.com/users/11672352/glory9211"}, "is_accepted": true, "score": 1, "last_activity_date": 1568239715, "creation_date": 1568239715, "answer_id": 57897416, "question_id": 57897135, "link": "https://stackoverflow.com/questions/57897135/store-clipboard-history-in-file-using-python-on-mac/57897416#57897416", "title": "Store clipboard history in file using Python on mac", "body": "<p>You should use the keyboard library for python in this case <a href=\"https://pypi.org/project/keyboard/\" rel=\"nofollow noreferrer\">https://pypi.org/project/keyboard/</a></p>\n\n<p>The basic structure for your code would look something like this</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import keyboard\nfrom time import sleep\n\nwhile True:\n    try:\n        if keyboard.is_pressed('ctrl+c'):\n            print('Copying the slected')\n            sleep(0.1)  # Avoiding long press, remove to see effect\n            # Your Code\n\n        elif keyboard.is_pressed('esc'):\n            print('Exiting Code')\n            break\n\n    except Exception as error:\n        print(error)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 350, "user_id": 11687405, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-nNSNUMMZ90U/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfVT0ic5fseiprob85BzXZdJ90fzg/mo/photo.jpg?sz=128", "display_name": "bruce", "link": "https://stackoverflow.com/users/11687405/bruce"}, "is_accepted": false, "score": 0, "last_activity_date": 1569255278, "creation_date": 1569255278, "answer_id": 58066374, "question_id": 57897135, "link": "https://stackoverflow.com/questions/57897135/store-clipboard-history-in-file-using-python-on-mac/58066374#58066374", "title": "Store clipboard history in file using Python on mac", "body": "<p>You can try this one use pynput, a function support multi combination keys mapping arbitrary custom functions, just put them into a dict:</p>\n\n<pre><code>def multi_hotkey_listen(hotkey_dict):\n    \"\"\"Multi-hotkey listen\"\"\"\n\n    # Create a mapping of hot keys to function, use hashable frozenset as keys\n    # Original set type is not hashable - so they can't be used as keys of dict\n    frozen_hotkey_dict = {frozenset(k.split('+')): v for k, v in hotkey_dict.items()}\n    # Currently pressed keys\n    current_keys = set()\n\n    def on_press(key):\n        \"\"\"When a key is pressed, add it to the set we are keeping track of\n        and check if this set is in the dictionary\"\"\"\n        try:\n            key_str = key.char\n        except AttributeError:\n            key_str = key.name\n\n        current_keys.add(key_str)\n        # print(current_keys)\n\n        if frozenset(current_keys) in frozen_hotkey_dict:\n            # If the current set of keys are in the mapping, execute the function\n            trigger_func = frozen_hotkey_dict[frozenset(current_keys)]\n            print(f'Success\uff1afunction {trigger_func.__name__} be triggered', )\n            trigger_func()\n\n    def on_release(key):\n        \"\"\"When a key is released, remove it from the set of keys we are keeping track of\"\"\"\n        try:\n            key_str = key.char\n        except AttributeError:\n            key_str = key.name\n        current_keys.remove(key_str)\n\n    with KeyboardListener(on_press=on_press, on_release=on_release, suppress=False) as listener:\n        listener.join()\n\n\nhotkey_dict = {\n    'cmd+x': save_data  # support combination key like ctrl+shift+1\n    'cmd+q': end_loop,\n}\n\nmulti_hotkey_listen(hotkey_dict)\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 11947820, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-p7YO9FUkFj0/AAAAAAAAAAI/AAAAAAAAHhg/g6sryDgOTYo/photo.jpg?sz=128", "display_name": "Tomas Stor&#229;s", "link": "https://stackoverflow.com/users/11947820/tomas-stor%c3%a5s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 495, "favorite_count": 0, "accepted_answer_id": 57897416, "answer_count": 2, "score": 0, "last_activity_date": 1569255278, "creation_date": 1568237939, "last_edit_date": 1568386767, "question_id": 57897135, "link": "https://stackoverflow.com/questions/57897135/store-clipboard-history-in-file-using-python-on-mac", "title": "Store clipboard history in file using Python on mac", "body": "<p>I need copy some words from a text and I would like to store the copied words in a file. Basically a file with the clipboard history.</p>\n\n<p>Since the copying of words is a continuous process I need to use a loop that stores the copied words during the performance. I figured it would be handy to use a action/event listener to 1) store the clipboard data to file when cmd + x is pressed and 2) end loop when, for instance cmd + q is pressed.</p>\n\n<p>I am not very familiar with action/event listeners, and not sure how I should go about using them. Are there any easy implementations I could use?</p>\n\n<p>I have what is mostly a pseudo code, that describes what I would like to accomplish. Any suggestions are appreciated!</p>\n\n<pre><code>import pyperclip\nimport os\nimport os.path\nimport time\n\nsave_path = \"/Users/username/file\"\nFileName = os.path.join(save_path, \"clipboard.txt\")         \nf= open(FileName, \"w\")    \n\ntext = pyperclip.paste()  # text will have the content of clipboard\n\nx = 0\nwhile True:\n    time.sleep(2) #Replace with--&gt;: wait for \"cmd + x\" to be pressed\n    text = pyperclip.paste()  # text will have the content of clipboard\n    f.write(text+\"\\n\")\n    x += 1\n    if x &gt; 10: #Replace with --&gt; break if \"cmd + q\" is pressed \n        break\n\nf.close()\nprint(\"End of session\")\n</code></pre>\n\n<p>The code above waits 2 seconds before copying the text from the clipboard to the file. Loop reaches its end after 10 iterations. </p>\n\n<p>I would the code to react to actions performed so that I could store all copied words into a single file.</p>\n\n<p>EDIT: Using the suggestions in the replies to the question I tried solving the problem in two ways, one with keyboard and pynput module. Keyboard did not work for me, might be due to me using Mac? It did not react as intended when pressing a key.</p>\n\n<h1>Keyboard code # (Does not work)</h1>\n\n<pre><code>while True:\n    try:\n        if keyboard.is_pressed('c'):\n            print('Copying the selected')\n            text = pyperclip.paste()  # text will have the content of clipboard\n            f.write(text+\"\\n\")\n            sleep(0.1)  # Avoiding long press, remove to see effect\n            # Your Code\n        elif keyboard.is_pressed('esc'):\n            print('Exiting Code')\n            break\n    except Exception as error:\n        print(error)\nf.close()\n</code></pre>\n\n<p>Problem: When pressing the key 'c', nothing happens. The print statement does not activate.</p>\n\n<h1>pynput code # (Works)</h1>\n\n<pre><code>def on_release(key):\n    if str(key) == \"'c'\":\n        print('Copying the slected')\n        text = pyperclip.paste()  # text will have the content of clipboard\n        f.write(text+\"\\n\")\n\n    print('{0} release'.format(\n        key))\n    if key == Key.esc:\n        # Stop listener\n        f.close()\n        print(\"End\")\n        return False\n\n\n# Collect events until released\nwith Listener(\n        on_release=on_release) as listener:\n    listener.join()\n</code></pre>\n\n<p>pynput worked as intended, in the way that everytime 'c' key is pressed, as is done when using cmd + c to copy, it copies the currently stored text in clipboard to the text file. </p>\n\n<p>(minor) Problem: I did not get pynput to react on the combination of pressing cmd + c simultaneosly. However that did not matter in this case, as reacting to the key press 'c' is enough. For future references though, please comment if you know how to listen for a combination of keys.</p>\n\n<p>I tried the following, which neither one worked:</p>\n\n<pre><code>if key == Key.cmd and str(key) == \"'c'\":\n        print('Copying the selected')\n</code></pre>\n\n<p>and </p>\n\n<pre><code>if key == Key.cmd:\n    if str(key) == \"'c'\":\n        print('Copying the selected')\n</code></pre>\n"}, {"tags": ["python", "python-requests", "wxpython"], "comments": [{"owner": {"reputation": 41467, "user_id": 351031, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d495a914ca38eca81f0143e62706775d?s=128&d=identicon&r=PG&f=1", "display_name": "g.d.d.c", "link": "https://stackoverflow.com/users/351031/g-d-d-c"}, "edited": false, "score": 0, "creation_date": 1568240745, "post_id": 57897119, "comment_id": 102215911, "body": "I think you want <code>wx.CallAfter</code>.  It allows whatever is currently going on to complete, then invokes your function (in this case the network request).  There&#39;s also <code>wx.CallLater</code> that takes a timeout if you want to wait some specified time before making the network call."}, {"owner": {"reputation": 1061, "user_id": 4820507, "user_type": "registered", "accept_rate": 55, "profile_image": "https://graph.facebook.com/10206544579595606/picture?type=large", "display_name": "Adam Zarn", "link": "https://stackoverflow.com/users/4820507/adam-zarn"}, "reply_to_user": {"reputation": 41467, "user_id": 351031, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d495a914ca38eca81f0143e62706775d?s=128&d=identicon&r=PG&f=1", "display_name": "g.d.d.c", "link": "https://stackoverflow.com/users/351031/g-d-d-c"}, "edited": false, "score": 0, "creation_date": 1568241207, "post_id": 57897119, "comment_id": 102216021, "body": "I tried wx.CallAfter(completion) but it has the same problem. However, wx.CallLater(1, completion) seems to work!"}], "answers": [{"tags": [], "owner": {"reputation": 1061, "user_id": 4820507, "user_type": "registered", "accept_rate": 55, "profile_image": "https://graph.facebook.com/10206544579595606/picture?type=large", "display_name": "Adam Zarn", "link": "https://stackoverflow.com/users/4820507/adam-zarn"}, "is_accepted": false, "score": 0, "last_activity_date": 1568241498, "creation_date": 1568241498, "answer_id": 57897643, "question_id": 57897119, "link": "https://stackoverflow.com/questions/57897119/wxpython-app-is-frozen-until-request-is-done/57897643#57897643", "title": "wxPython app is frozen until request is done", "body": "<p>Using <code>wx.CallLater(1, completion)</code> keeps the UI from freezing up by performing the network request 1 millisecond later. </p>\n"}], "owner": {"reputation": 1061, "user_id": 4820507, "user_type": "registered", "accept_rate": 55, "profile_image": "https://graph.facebook.com/10206544579595606/picture?type=large", "display_name": "Adam Zarn", "link": "https://stackoverflow.com/users/4820507/adam-zarn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1568241498, "creation_date": 1568237818, "question_id": 57897119, "link": "https://stackoverflow.com/questions/57897119/wxpython-app-is-frozen-until-request-is-done", "title": "wxPython app is frozen until request is done", "body": "<p>I have the following method that's supposed to update the UI of my <code>wxPython</code> application when a checkbox is checked, and THEN make a network request. The problem is, if the network request is included in the <code>checkboxChecked</code> function, it causes the UI to stall until the request is done. Is there any way to update the UI, and then make the request?</p>\n\n<pre><code>def checkboxChecked(self, event, completion):\n\n    # UI Updates\n    isChecked = self.readBox.GetValue()\n    self.isReadJSON[str(self.currentChapter)][\"read\"] = isChecked\n    self.setWordsReadLabelText()\n\n    # Network Request\n    completion\n</code></pre>\n"}, {"tags": ["python", "r"], "comments": [{"owner": {"reputation": 661312, "user_id": 3732271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee6e12042dc31b1ef27471482f9ff91f?s=128&d=identicon&r=PG&f=1", "display_name": "akrun", "link": "https://stackoverflow.com/users/3732271/akrun"}, "edited": false, "score": 0, "creation_date": 1568238165, "post_id": 57897109, "comment_id": 102215318, "body": "Try <code>table(df1[-1])</code>"}, {"owner": {"reputation": 273575, "user_id": 3962914, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/tGgv6.jpg?s=128&g=1", "display_name": "Ronak Shah", "link": "https://stackoverflow.com/users/3962914/ronak-shah"}, "edited": false, "score": 0, "creation_date": 1568254895, "post_id": 57897109, "comment_id": 102218701, "body": "In <code>tidyverse</code>, <code>df1 %&gt;%   count(class, smoking) %&gt;%   spread(smoking, n, fill = 0)</code>"}], "answers": [{"tags": [], "owner": {"reputation": 27334, "user_id": 7758804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UBA7j.jpg?s=128&g=1", "display_name": "Trenton McKinney", "link": "https://stackoverflow.com/users/7758804/trenton-mckinney"}, "is_accepted": false, "score": 0, "last_activity_date": 1568238605, "last_edit_date": 1568238605, "creation_date": 1568238278, "answer_id": 57897189, "question_id": 57897109, "link": "https://stackoverflow.com/questions/57897109/how-to-transform-a-set-of-qualitative-data-into-numbers-according-to-quantity/57897189#57897189", "title": "How to transform a set of qualitative data into numbers according to quantity?", "body": "<h2>Python</h2>\n\n<ul>\n<li>Use <code>.groupby</code> and <code>.unstack</code></li>\n<li><a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.groupby.html\" rel=\"nofollow noreferrer\"><code>pandas.DataFrame.groupby</code></a></li>\n<li><a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.count.html\" rel=\"nofollow noreferrer\"><code>pandas.DataFrame.count</code></a></li>\n<li><a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.unstack.html\" rel=\"nofollow noreferrer\"><code>pandas.DataFrame.unstack</code></a></li>\n</ul>\n\n<h3>Data:</h3>\n\n<pre class=\"lang-py prettyprint-override\"><code>country smoking class\n greece     low     B\n    USA  medium     A\n france    none     A\n  italy     low     B\n  spain  medium     A\n</code></pre>\n\n<pre class=\"lang-py prettyprint-override\"><code>import pandas as pd\n\n# to read test data from clipboard\ndf = pd.read_clipboard(sep='\\\\s+')\ndf.groupby(['class', 'smoking'])['smoking'].count().unstack()\n</code></pre>\n\n<h3>Output:</h3>\n\n<p><a href=\"https://i.stack.imgur.com/VgnIF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VgnIF.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 661312, "user_id": 3732271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee6e12042dc31b1ef27471482f9ff91f?s=128&d=identicon&r=PG&f=1", "display_name": "akrun", "link": "https://stackoverflow.com/users/3732271/akrun"}, "is_accepted": false, "score": 0, "last_activity_date": 1568238521, "creation_date": 1568238521, "answer_id": 57897225, "question_id": 57897109, "link": "https://stackoverflow.com/questions/57897109/how-to-transform-a-set-of-qualitative-data-into-numbers-according-to-quantity/57897225#57897225", "title": "How to transform a set of qualitative data into numbers according to quantity?", "body": "<p>In <code>R</code>, this can be done with <code>table</code> (No packages used)</p>\n\n<pre><code>table(df1[3:2])\n#   smoking\n#class low medium none\n#    A   0      2    1\n#    B   2      0    0\n</code></pre>\n\n<h3>data</h3>\n\n<pre><code>df1 &lt;- structure(list(country = c(\"greece\", \"USA\", \"france\", \"italy\", \n\"spain\"), smoking = c(\"low\", \"medium\", \"none\", \"low\", \"medium\"\n), class = c(\"B\", \"A\", \"A\", \"B\", \"A\")), class = \"data.frame\", row.names = c(NA, \n-5L))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5089, "user_id": 6037369, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hiR0q.jpg?s=128&g=1", "display_name": "yusuzech", "link": "https://stackoverflow.com/users/6037369/yusuzech"}, "is_accepted": false, "score": 0, "last_activity_date": 1568238831, "creation_date": 1568238831, "answer_id": 57897274, "question_id": 57897109, "link": "https://stackoverflow.com/questions/57897109/how-to-transform-a-set-of-qualitative-data-into-numbers-according-to-quantity/57897274#57897274", "title": "How to transform a set of qualitative data into numbers according to quantity?", "body": "<p>It's a long to wide problem, you can also use <code>reshape2::dcast()</code></p>\n\n<pre class=\"lang-r prettyprint-override\"><code>data &lt;- structure(list(country = c(\"greece\", \"USA\", \"france\", \"italy\", \n\"spain\"), value = c(\"low\", \"medium\", \"none\", \"low\", \"medium\"), \n    class = c(\"B\", \"A\", \"A\", \"B\", \"A\")), class = c(\"data.frame\"), row.names = c(NA, -5L))\n\n\nreshape2::dcast(\n    data,\n    class ~ value, # formula\n    value.var = \"country\", \n    fun.aggregate = length # use length as aggregation function\n    )\n</code></pre>\n\n<pre class=\"lang-r prettyprint-override\"><code>  class low medium none\n1     A   0      2    1\n2     B   2      0    0\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 12055305, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86f52f8668a34b18eef84640209d5fda?s=128&d=identicon&r=PG&f=1", "display_name": "MarkusFrost", "link": "https://stackoverflow.com/users/12055305/markusfrost"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 75, "favorite_count": 0, "closed_date": 1568254881, "answer_count": 3, "score": 0, "last_activity_date": 1568254948, "creation_date": 1568237747, "last_edit_date": 1568254948, "question_id": 57897109, "link": "https://stackoverflow.com/questions/57897109/how-to-transform-a-set-of-qualitative-data-into-numbers-according-to-quantity", "closed_reason": "Duplicate", "title": "How to transform a set of qualitative data into numbers according to quantity?", "body": "<p>i have a data frame like this:</p>\n\n<pre><code>country level_of_smoking clasification_country\ngermany  high              A\ngreece   low               B\nUSA      medium            A\nfrance   none              A\nitaly    low               B\nspain    medium            A\n</code></pre>\n\n<p>and so on (the list is longer than this is just a example)</p>\n\n<p>so, I wonder how transform this dataframe into something like this:</p>\n\n<pre><code>       high   medium    low    none\nclassA 1        2        0      1\nclassB 0        0        2      0\n</code></pre>\n\n<p>please if you can help me with R or python code that make this.</p>\n"}, {"tags": ["python", "xlsxwriter"], "owner": {"reputation": 31, "user_id": 12054889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a906ec6adbdac6ea1821e0e5743f6ed1?s=128&d=identicon&r=PG&f=1", "display_name": "AlexM", "link": "https://stackoverflow.com/users/12054889/alexm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 161, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1568237718, "creation_date": 1568237718, "question_id": 57897102, "link": "https://stackoverflow.com/questions/57897102/how-to-show-different-fonts-for-different-data-labels-in-pie-doughnut-chart-us", "title": "How to show different fonts for different data labels in pie / doughnut chart using Python &gt; xlsxwriter?", "body": "<p>Using python and xlsxwriter I want to output a doughnut chart where I can hardcode some data labels in a white font, but other data labels in a black font. I would include images, but since I am new here, I apparently can't :( \nTo avoid confusion: if my doughnut chart is divided into 4 equal segments, by data labels I mean the 4 labels that say \"25%\" and are each placed in the center of their respective quarter of the doughnut chart. </p>\n\n<p>My point is that when I have a segment of the doughnut chart with a light background color, I want to be able to code a black font data label (so that it's easily readable), and vice versa with a segment of the doughnut chart that has a dark background color (white font on top of dark background).</p>\n\n<p>So far, I've tried using the chart series option \"data_labels\" a first time at the \"add_series\" level in order to set the main format for my data labels, and then within each of the \"points\" in my doughnut chart, I tried including a different version of the \"data_labels\" option (see code below). Can someone please tell me why this isn't working?</p>\n\n<p>Just FYI: in the code below I use a pandas df (that I generate in the script from a list of lists), but even if this is inefficient right now, I'm doing this so that the next version of the script can read data from an existing (and much bigger) pandas df.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import pandas as pd\nimport xlsxwriter\n\n# initialize list of lists\ndata = [['Tom', 10], ['Jerry', 15], ['Julie', 14], ['Amy', 12], ['Tony', 13]]\n\n# Create pandas df\ndf_new = pd.DataFrame(data, columns = ['Name', 'Apples'])\n\n#\u00a0Write everything to an excel file\nwriter = pd.ExcelWriter('./test.xlsx', engine='xlsxwriter')\n\ndf_new.to_excel(writer, sheet_name='Sheet1', index=False)\nworkbook  = writer.book\nworksheet = writer.sheets['Sheet1']\n\n# Create a new chart object.\nchart = workbook.add_chart({'type': 'doughnut'})\n\n# Add a series to the chart.\nchart.add_series({'values': '=Sheet1!$B$2:$B$6',\n                  'categories': '=Sheet1!$A$2:$A$6',\n                  'data_labels': {'value': True, 'font':{'size': 12, 'color': 'white', 'bold': True}, 'legend_key': True},\n                  'points': [\n                        {'fill': {'color': '#B7DEE8'}, 'data_labels': {'value': True, 'font':{'size': 12, 'color': 'black', 'bold': True}, 'legend_key': True}},\n                        {'fill': {'color': '#FAC090'}, 'data_labels': {'value': True, 'font':{'size': 12, 'color': 'black', 'bold': True}, 'legend_key': True}},\n                        {'fill': {'color': '#604A7B'}},\n                        {'fill': {'color': '#4A452A'}},\n                        {'fill': {'color': '#011f4b'}},\n                  ],\n                  })\n\n# Insert the chart into the worksheet.\nworksheet.insert_chart('D1', chart)\n\nworkbook.close()\n\nwriter.save()\nprint('Finished')\n</code></pre>\n\n<p>Anyhow, I'd really appreciate any help!</p>\n"}, {"tags": ["python", "pylint", "undefined-variable"], "comments": [{"owner": {"reputation": 84953, "user_id": 1405065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c422b239ab1f49d3f4fcff9e5df3cf?s=128&d=identicon&r=PG", "display_name": "Blckknght", "link": "https://stackoverflow.com/users/1405065/blckknght"}, "edited": false, "score": 0, "creation_date": 1568243335, "post_id": 57897097, "comment_id": 102216494, "body": "A linter that only works on one file at a time can&#39;t tell what names are defined by a wildcard import, so I&#39;m not at all surprised that it&#39;s concerned about <code>Structure</code>. I have no idea why it&#39;s confused about <code>a</code>, <code>b</code>, and <code>c</code> though. I&#39;d have expected it to also be confused about <code>c_float</code> (perhaps repeatedly), since I imagine that also comes from <code>ctypes</code>. You may be able to satisfy it by using a more explicit import statement: <code>from ctypes import Structure, c_float</code> (though whether that will fix <code>a</code>, <code>b</code> and <code>c</code> I have no idea)."}], "owner": {"reputation": 480, "user_id": 11402024, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kwozw.jpg?s=128&g=1", "display_name": "Roqux", "link": "https://stackoverflow.com/users/11402024/roqux"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1604, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1568237698, "creation_date": 1568237698, "question_id": 57897097, "link": "https://stackoverflow.com/questions/57897097/pylint-falsely-complaining-of-undefined-variable", "title": "Pylint falsely complaining of undefined variable", "body": "<h1>Summary</h1>\n\n<p>Pylint is complaining of undefined variables in class declarations and the following functions. If I comment out the class declarations, the functions are still being highlighted and I am unsure why.</p>\n\n<h1>Environment</h1>\n\n<p>OS: Suse Leap 42.3<br>\nEditor: vscode 1.38<br>\nPython: 3.4.6<br>\nPylint: 1.4.4<br>\nPylint Args: [\"--load-plugin\", \"pylint_protobuf\", \"--enable=F,E,W\"]</p>\n\n<h1>Reproduction case</h1>\n\n<pre class=\"lang-py prettyprint-override\"><code>#!/usr/bin/env python3\n'''Dummy doc string'''\n\nfrom ctypes import * # pylint: disable=unused-wildcard-import\n\nclass BOX(Structure):\n    _fields_ = [(\"x\", c_float),\n                (\"y\", c_float),\n                (\"w\", c_float),\n                (\"h\", c_float)]\n\ndef example(a, b):\n    c = str(a + b)\n    print(c)\n\n</code></pre>\n\n<p>Which produces the following errors/warnings</p>\n\n<blockquote>\n  <p>Undefined variable 'Structure' pylint(undefined-variable) [6, 11]<br>\n  Undefined variable 'a' pylint(undefined-variable) [13, 13]<br>\n  Undefined variable 'b' pylint(undefined-variable) [13, 17]<br>\n  Undefined variable 'c' pylint(undefined-variable) [14, 11]<br>\n  Locally disabling unused-wildcard-import (W0614) pylint(locally-disabled) [4,1]  </p>\n</blockquote>\n\n<p>If I hover over <code>Structure</code> I can see <code>class PyCStructType()</code>, likewise if I hover over <code>c</code> I can see <code>c: str</code>, so the datatypes are known.</p>\n\n<h1>Questions</h1>\n\n<ul>\n<li>Why does the above code produce pylint errors? (I expect to only see a warning for locally disabling unused wildcard imports)</li>\n<li>Is this issue specific to my environment? (older version of python, etc.)</li>\n</ul>\n\n<p>N.b. I do not want to use <code># pylint: disable=undefined-variable</code></p>\n"}, {"tags": ["python", "debugging", "visual-studio-code"], "comments": [{"owner": {"reputation": 11834, "user_id": 9938317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b72fceef5630b6b962624fed6ac9c82?s=128&d=identicon&r=PG&f=1", "display_name": "rioV8", "link": "https://stackoverflow.com/users/9938317/riov8"}, "edited": false, "score": 0, "creation_date": 1568246535, "post_id": 57897091, "comment_id": 102217105, "body": "First try with the simplest setup. <code>.py</code> file in root of workspace, Default launch config generated by VSC."}, {"owner": {"reputation": 11834, "user_id": 9938317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b72fceef5630b6b962624fed6ac9c82?s=128&d=identicon&r=PG&f=1", "display_name": "rioV8", "link": "https://stackoverflow.com/users/9938317/riov8"}, "edited": false, "score": 0, "creation_date": 1568252126, "post_id": 57897091, "comment_id": 102218157, "body": "why do you need setup.py to run a py file? No Need to use Multi Root Workspace. Just <code>File &gt; Open Folder</code> is enough for the simplest case."}, {"owner": {"reputation": 1730, "user_id": 5691558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/18305559850d1d9ce0aa697f3fa38a2c?s=128&d=identicon&r=PG&f=1", "display_name": "Ger Cas", "link": "https://stackoverflow.com/users/5691558/ger-cas"}, "reply_to_user": {"reputation": 11834, "user_id": 9938317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b72fceef5630b6b962624fed6ac9c82?s=128&d=identicon&r=PG&f=1", "display_name": "rioV8", "link": "https://stackoverflow.com/users/9938317/riov8"}, "edited": false, "score": 0, "creation_date": 1568256408, "post_id": 57897091, "comment_id": 102218950, "body": "I don&#39;t know what is setup.py, just following what you suggested. After I open folder what need to do in order to debug a py script in a simple case?"}, {"owner": {"reputation": 11834, "user_id": 9938317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b72fceef5630b6b962624fed6ac9c82?s=128&d=identicon&r=PG&f=1", "display_name": "rioV8", "link": "https://stackoverflow.com/users/9938317/riov8"}, "edited": false, "score": 0, "creation_date": 1568257087, "post_id": 57897091, "comment_id": 102219040, "body": "Select the correct Launch config and press F5 or green triangle"}, {"owner": {"reputation": 1730, "user_id": 5691558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/18305559850d1d9ce0aa697f3fa38a2c?s=128&d=identicon&r=PG&f=1", "display_name": "Ger Cas", "link": "https://stackoverflow.com/users/5691558/ger-cas"}, "reply_to_user": {"reputation": 11834, "user_id": 9938317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b72fceef5630b6b962624fed6ac9c82?s=128&d=identicon&r=PG&f=1", "display_name": "rioV8", "link": "https://stackoverflow.com/users/9938317/riov8"}, "edited": false, "score": 0, "creation_date": 1568257732, "post_id": 57897091, "comment_id": 102219135, "body": "How to know what is the correct launch? I followed more than one guide and still not working. May you show some example?"}, {"owner": {"reputation": 11834, "user_id": 9938317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b72fceef5630b6b962624fed6ac9c82?s=128&d=identicon&r=PG&f=1", "display_name": "rioV8", "link": "https://stackoverflow.com/users/9938317/riov8"}, "edited": false, "score": 1, "creation_date": 1568284523, "post_id": 57897091, "comment_id": 102229657, "body": "start with an empty <code>launch.json</code> and let VSC generate the default Python launch"}, {"owner": {"reputation": 1730, "user_id": 5691558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/18305559850d1d9ce0aa697f3fa38a2c?s=128&d=identicon&r=PG&f=1", "display_name": "Ger Cas", "link": "https://stackoverflow.com/users/5691558/ger-cas"}, "reply_to_user": {"reputation": 11834, "user_id": 9938317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b72fceef5630b6b962624fed6ac9c82?s=128&d=identicon&r=PG&f=1", "display_name": "rioV8", "link": "https://stackoverflow.com/users/9938317/riov8"}, "edited": false, "score": 0, "creation_date": 1568318127, "post_id": 57897091, "comment_id": 102246358, "body": "@rioV8 Thanks so much for the help. I needed to uninstall VSCode and try again. Only in that way it works like you suggested."}], "answers": [{"comments": [{"owner": {"reputation": 1730, "user_id": 5691558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/18305559850d1d9ce0aa697f3fa38a2c?s=128&d=identicon&r=PG&f=1", "display_name": "Ger Cas", "link": "https://stackoverflow.com/users/5691558/ger-cas"}, "edited": false, "score": 0, "creation_date": 1568836878, "post_id": 57999121, "comment_id": 102405828, "body": "The issue I found is that WSL is not available for Windows 7."}, {"owner": {"reputation": 9571, "user_id": 236574, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8600d16ba667cc8d7f00ddc9f254340?s=128&d=identicon&r=PG", "display_name": "Brett Cannon", "link": "https://stackoverflow.com/users/236574/brett-cannon"}, "reply_to_user": {"reputation": 1730, "user_id": 5691558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/18305559850d1d9ce0aa697f3fa38a2c?s=128&d=identicon&r=PG&f=1", "display_name": "Ger Cas", "link": "https://stackoverflow.com/users/5691558/ger-cas"}, "edited": false, "score": 0, "creation_date": 1568919224, "post_id": 57999121, "comment_id": 102438271, "body": "@GerCas Then I would try Docker as those are the two UNIX-based environments we support on WIndows."}], "tags": [], "owner": {"reputation": 9571, "user_id": 236574, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8600d16ba667cc8d7f00ddc9f254340?s=128&d=identicon&r=PG", "display_name": "Brett Cannon", "link": "https://stackoverflow.com/users/236574/brett-cannon"}, "is_accepted": false, "score": 0, "last_activity_date": 1568919242, "last_edit_date": 1568919242, "creation_date": 1568832513, "answer_id": 57999121, "question_id": 57897091, "link": "https://stackoverflow.com/questions/57897091/how-to-set-up-properly-the-debugging-for-python-in-visual-studio-code/57999121#57999121", "title": "How to set up properly the Debugging for Python in Visual Studio Code?", "body": "<p>It's because you're using cygwin as your shell as that isn't supported. If you wish to use a UNIX shell then please consider using WSL or Docker as those is properly supported.</p>\n"}], "owner": {"reputation": 1730, "user_id": 5691558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/18305559850d1d9ce0aa697f3fa38a2c?s=128&d=identicon&r=PG&f=1", "display_name": "Ger Cas", "link": "https://stackoverflow.com/users/5691558/ger-cas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 121, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1568919242, "creation_date": 1568237660, "last_edit_date": 1568237970, "question_id": 57897091, "link": "https://stackoverflow.com/questions/57897091/how-to-set-up-properly-the-debugging-for-python-in-visual-studio-code", "title": "How to set up properly the Debugging for Python in Visual Studio Code?", "body": "<p>I'm trying to set up the debug for Python3 on Visual Studio Code 1.38.0(latest) but I'm getting errors when I send F5.</p>\n\n<p>I found in SO, Youtube and <a href=\"https://code.visualstudio.com/docs/python/debugging\" rel=\"nofollow noreferrer\">here</a> some examples/procedures in how to do it, but I'm still cannot do the debug to get working.</p>\n\n<p>The path ot Python is <code>C:\\Python3\\python.exe</code>.</p>\n\n<p>I already installed the Microsoft's <a href=\"https://marketplace.visualstudio.com/items?itemName=ms-python.python\" rel=\"nofollow noreferrer\">Python extension for Visual Studio Code</a> </p>\n\n<p>What is missing in my debug configuration?  </p>\n\n<p>When I got to debug mode and send F5 in Terminal appears this error:</p>\n\n<pre><code>$ C:/Python3/python.exe c:\\Users\\MyUser\\.vscode\\extensions\\ms-python.python-2019.9.34911\\pythonFiles\\ptvsd_launcher.py --default --client --host localhost --port 58411\nd:\\Path\\to\\Script\\test.py\nC:\\Python3\\python.exe: can't open file 'c:UsersMyUser.vscodeextensionsms-python.python-2019.9.34911pythonFilesptvsd_launcher.py': [Errno 2] No such file or directory\n</code></pre>\n\n<p>On <code>settings.json</code> I have:</p>\n\n<pre><code> {\n    \"workbench.colorTheme\": \"Default High Contrast\",\n    \"window.zoomLevel\": 0,\n    \"terminal.integrated.shell.windows\": \"D:\\\\d\\\\cygwin64\\\\Cygwin.bat\",\n    \"editor.suggestSelection\": \"first\",\n    \"vsintellicode.modify.editor.suggestSelection\": \"automaticallyOverrodeDefaultValue\",\n    \"python.pythonPath\": \"C:\\\\Python3\\\\python.exe\",\n    \"python.jediEnabled\": false\n}\n</code></pre>\n\n<p>On <code>launch.json</code> I have:</p>\n\n<pre><code>{\n    // Use IntelliSense to learn about possible attributes.\n    // Hover to view descriptions of existing attributes.\n    // For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387\n    \"version\": \"0.2.0\",\n    \"configurations\": [\n\n\n        {\n            \"name\": \"Python3\",\n            \"type\":\"python\",\n            \"request\": \"launch\",\n            \"stopOnEntry\": true,\n            \"pythonPath\": \"${config:python.pythonPath}\",\n            \"program\": \"${file}\",\n            \"cwd\": \"${workspaceFolder}\",\n            \"env\": {},\n            \"envFile\": \"${workspaceFolder}/.env\",\n        }\n            ]\n}\n</code></pre>\n"}, {"tags": ["python", "tensorflow", "keras"], "comments": [{"owner": {"reputation": 165, "user_id": 9548111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb92905fb892a861618a148e30157278?s=128&d=identicon&r=PG&f=1", "display_name": "th0mash", "link": "https://stackoverflow.com/users/9548111/th0mash"}, "edited": false, "score": 0, "creation_date": 1584727866, "post_id": 57897080, "comment_id": 107534935, "body": "I don&#39;t know if it will help you, but I do see a typo in your code <code>load_model(&#39;mymodel.h5&#39;, custom_objects={&#39;custom_loss&#39;: custom_loss(inputs)})</code> (The parenthesis)"}], "answers": [{"tags": [], "owner": {"reputation": 2005, "user_id": 9579075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc8c64d585ddcf6587622a6fc35f3b46?s=128&d=identicon&r=PG&f=1", "display_name": "Srihari Humbarwadi", "link": "https://stackoverflow.com/users/9579075/srihari-humbarwadi"}, "is_accepted": false, "score": 3, "last_activity_date": 1568362786, "creation_date": 1568362786, "answer_id": 57919819, "question_id": 57897080, "link": "https://stackoverflow.com/questions/57897080/load-custom-loss-with-extra-input-in-keras/57919819#57919819", "title": "Load custom loss with extra input in keras", "body": "<p>An alternate way is to compute the loss inside a Keras layer and pass a dummy loss function that just returns the model's output as the loss in the compile method.\nThere are other ways of doing this. But this is the one that I prefer.</p>\n\n<pre><code>import tensorflow as tf\nprint('Tensorflow', tf.__version__)\n\ndef custom_loss(tensor):\n    y_true, y_pred, inputs = tensor[0], tensor[1], tensor[1]\n    loss = ...\n    return tf.constant([0], dtype=tf.float32)\n\ndef dummy_loss(y_true, y_pred):\n    return y_pred\n\ndef get_model(training=False):\n    inputs = tf.keras.layers.Input(shape=(10,))\n    y = tf.keras.layers.Activation('tanh')(inputs)\n    if training:\n        targets = tf.keras.layers.Input(shape=(10,)) \n        loss_layer = tf.keras.layers.Lambda(custom_loss)([targets, y, inputs])\n        model = tf.keras.models.Model(inputs=[inputs, targets], outputs=loss_layer)\n    else:\n        model = tf.keras.models.Model(inputs=inputs, outputs=y)\n    return model\n\n\nmodel = get_model(training=True)\nmodel.compile(optimizer='sgd', loss=dummy_loss)\nmodel.save('model.h5')\n\nnew_model = tf.keras.models.load_model('model.h5', custom_objects={'dummy_loss':dummy_loss})\n</code></pre>\n"}], "owner": {"reputation": 4962, "user_id": 2985049, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f8e0560e8b0947d7609d3576aed494ef?s=128&d=identicon&r=PG&f=1", "display_name": "Luke", "link": "https://stackoverflow.com/users/2985049/luke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1046, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1584735160, "creation_date": 1568237622, "last_edit_date": 1584735160, "question_id": 57897080, "link": "https://stackoverflow.com/questions/57897080/load-custom-loss-with-extra-input-in-keras", "title": "Load custom loss with extra input in keras", "body": "<p>I have a custom loss function that takes the input to the model as one of the arguments. If I load in the same session in which I train, I can load it no problem using <a href=\"https://stackoverflow.com/questions/48373845/loading-model-with-custom-loss-keras\">this</a> technique.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>\ndef custom_loss(inputs):\n    def loss(y_true, y_pred):\n        return ...\n    return loss\n\ninputs = keras.layers.Input(shape=(...))\ny = keras.layers.Activation('tanh')(inputs)\n\nmodel = keras.models.Model(inputs=inputs, outputs=y)\n\nmodel.compile(loss=custom_loss(inputs), optimizer='Adam')\nmodel.fit(...)\nmodel.save('mymodel.h5')\nload_model('mymodel.h5', custom_objects={'custom_loss': custom_loss(inputs})\n</code></pre>\n\n<p>However, I run into problems when I try to load the model in a later session, because this time I don't have access to the original input tensor. If I make a new inputs placeholder, then the model expects two different sets of inputs and I error out.</p>\n\n<pre><code>inputs = keras.layers.Input(shape=(...))\nload_model('mymodel.h5', custom_objects={'custom_loss': custom_loss(inputs)})\n</code></pre>\n\n<p>Is there a good way to solve this problem? The issue at the end of the day is that the inputs haven't been deserialized yet so they can't be passed in to the custom objects.</p>\n\n<p>I don't want to just save the weights and create a new model with the same weights because I lose the optimizer state.</p>\n"}, {"tags": ["python"], "answers": [{"tags": [], "owner": {"reputation": 4527, "user_id": 8468264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8adc0e0b5afd1ff077dd16a48492c1e0?s=128&d=identicon&r=PG&f=1", "display_name": "d_kennetz", "link": "https://stackoverflow.com/users/8468264/d-kennetz"}, "is_accepted": false, "score": 1, "last_activity_date": 1568237854, "creation_date": 1568237854, "answer_id": 57897122, "question_id": 57897078, "link": "https://stackoverflow.com/questions/57897078/merge-rows-with-the-same-id-while-retrieving-the-max-values-from-certain-column/57897122#57897122", "title": "Merge rows with the same id while retrieving the max values from certain column", "body": "<p>you can just do max of the groupby object:</p>\n\n<pre><code>df.groupby('id').max()\n</code></pre>\n\n<p>outputs:</p>\n\n<pre><code>    Rx1  Rx2  Rx3\nid\nA     5    3    2\nB     3    2    2\n</code></pre>\n\n<p>If you want 'id' to stay a column instead of the index you can just change it to:</p>\n\n<pre><code>df.groupby('id').max().reset_index()\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 12055318, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04f51af80cbafd2a6b283f1c68835a2e?s=128&d=identicon&r=PG", "display_name": "Lynn2", "link": "https://stackoverflow.com/users/12055318/lynn2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1568297102, "creation_date": 1568237609, "last_edit_date": 1568297102, "question_id": 57897078, "link": "https://stackoverflow.com/questions/57897078/merge-rows-with-the-same-id-while-retrieving-the-max-values-from-certain-column", "title": "Merge rows with the same id while retrieving the max values from certain column", "body": "<p>I am trying to merge multiple rows and retrieve the max value from the columns:\nsay I have the following data frame:</p>\n\n<pre><code>id  Reaction1 Reaction2 Reaction3 \nA      4         3         2       \nA      1         2         1      \nA      5         1         0       \nB      3         2         1       \nB      1         1         2       \n</code></pre>\n\n<p>and I would like to merge the row to show the max value from each column:</p>\n\n<pre><code>id Reaction1 Reaction2 Reaction3 \nA     5          3         2      \nB     3          2         2\n</code></pre>\n\n<p>The other question is:</p>\n\n<p>keep other rows (don't group them) and override the column using the max(abs), the reason is that I might have other columns information I would like to keep:</p>\n\n<pre><code>id  Reaction1 Reaction2 Reaction3 Other_col\nA      5         3         2       x\nA      5         3         2       y\nA      5         3         2       z\nB      3         2         2       x\nB      3         2         2       y\n</code></pre>\n\n<p>Many thanks!</p>\n"}, {"tags": ["python", "pyspark-sql", "aws-glue", "pyspark-dataframes"], "answers": [{"tags": [], "owner": {"reputation": 1474, "user_id": 7613340, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-CXsnCSktSjI/AAAAAAAAAAI/AAAAAAAAAAA/-LaKIq-KzTs/photo.jpg?sz=128", "display_name": "Sandeep Fatangare", "link": "https://stackoverflow.com/users/7613340/sandeep-fatangare"}, "is_accepted": true, "score": 0, "last_activity_date": 1569045647, "last_edit_date": 1569045647, "creation_date": 1569045297, "answer_id": 58037647, "question_id": 57897041, "link": "https://stackoverflow.com/questions/57897041/how-to-determine-what-are-the-columns-i-need-since-applymapping-isnt-case-sensi/58037647#58037647", "title": "How to determine what are the columns I need since ApplyMapping is&#39;nt case sensitive?", "body": "<p>You can set caseSensitive option in applymapping.</p>\n\n<pre><code>def applyMapping( mappings : Seq[Product4[String, String, String, String]], caseSensitive : Boolean = true, transformationContext : String = \"\", callSite : CallSite = CallSite(\"Not provided\", \"\"), stageThreshold : Long = 0, totalThreshold : Long = 0 ) : DynamicFrame \n</code></pre>\n\n<p><a href=\"https://docs.aws.amazon.com/glue/latest/dg/glue-etl-scala-apis-glue-dynamicframe-class.html#glue-etl-scala-apis-glue-dynamicframe-class-defs-applyMapping\" rel=\"nofollow noreferrer\">https://docs.aws.amazon.com/glue/latest/dg/glue-etl-scala-apis-glue-dynamicframe-class.html#glue-etl-scala-apis-glue-dynamicframe-class-defs-applyMapping</a></p>\n\n<p>Btw, if I am not wrong, applyMapping is casesensitive by default. But spark SQL is case insensitive by default. To set casesensitive in spark SQL,  you may use:\n<code>spark_session.sql('set spark.sql.caseSensitive=true')</code></p>\n"}], "owner": {"reputation": 5, "user_id": 12019981, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mB_X8F-3H70PiMyfSEMHPAU5SgWJH33rYYvo0p-Kg=k-s128", "display_name": "Esteban Echavarr&#236;a", "link": "https://stackoverflow.com/users/12019981/esteban-echavarr%c3%aca"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 273, "favorite_count": 0, "accepted_answer_id": 58037647, "answer_count": 1, "score": 0, "last_activity_date": 1569045647, "creation_date": 1568237310, "last_edit_date": 1568237678, "question_id": 57897041, "link": "https://stackoverflow.com/questions/57897041/how-to-determine-what-are-the-columns-i-need-since-applymapping-isnt-case-sensi", "title": "How to determine what are the columns I need since ApplyMapping is&#39;nt case sensitive?", "body": "<p>I'm updating a Pyspark script with a new Database model and I've encountered some problems calling/updating columns since PySpark apparently brings all columns in uppercase but when I use ApplyMapping it is not case sensitive BUT when I join(By left) with another table it is case sensitive and I end up with multiple columns with the same name but one of them in uppercase and the other one in lowercase and I want to use SelectFields function.  </p>\n\n<p>I've tried the exact same name (Case sensitive) of the columns but it always brings the same. </p>\n\n<p>I've tried printing the schema but the only difference is only the case. </p>\n\n<pre><code>testDF = testDF.join(test2DF, \"COLUMN\",how='left')\n\ntest3DF=test3DF.withColumn(\"column\", test3DF['ATTRB'].substr(4,4))\n\nfullDF= testDF.join(test3DF, (testDF['ID'] == test3DF['ID']) )\n\n</code></pre>\n\n<p>.....</p>\n\n<pre><code>applymappingTest = ApplyMapping.apply(frame = fullDF, mappings = [\n    ('ID', 'string', 'identifier', 'string')\n    ('column', 'string', 'myColumn', 'string')\n    ('COLUMN', 'string', 'someother', 'string')\n    ], transformation_ctx = \"applymappingTest\")\n</code></pre>\n\n<p>......</p>\n\n<pre><code>selectfieldsTest= SelectFields.apply(frame = applymappingTest, paths = [\n     \"identifier\",\n     \"myColumn\",\n], transformation_ctx = \"selectfieldsTest\")\n</code></pre>\n\n<pre><code>Expected result:\nmyColumn is the column with the name in lowercase.\nActual result: \nmyColumn is the column with the name in uppercase.\n</code></pre>\n"}, {"tags": ["python", "json", "parsing", "beautifulsoup"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1568241244, "post_id": 57897037, "comment_id": 102216031, "body": "They&#39;re just obfuscating the JSON by using hex codes for punctuation characters. <code>\\x5B</code> is <code>[</code>, <code>\\x7B</code> is <code>{</code>, <code>\\x22</code> is <code>&quot;</code>, etc."}], "answers": [{"tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": true, "score": 1, "last_activity_date": 1568245562, "last_edit_date": 1568245562, "creation_date": 1568241812, "answer_id": 57897673, "question_id": 57897037, "link": "https://stackoverflow.com/questions/57897037/scrape-json-data/57897673#57897673", "title": "Scrape JSON Data", "body": "<p>All those <code>\\x</code> sequences are hex encodings of punctuation characters like <code>[</code>, <code>{</code>, and <code>\"</code>, to obfuscate the JSON. Python uses the same notation in its string literals, so you can decode it with <code>ast.literal_eval()</code>.</p>\n\n<pre><code>import re\nimport ast\nimport json\n\nline = r\"var players_data = JSON.parse('\\x5B\\x7B\\x22id\\x22\\x3A\\x22318\\x22,\\x22player_name\\x22\\x3A\\x22Pierre\\x2DEmerick\\x20Aubameyang\\x22,\\x22xGBuildup\\x22\\x3A\\x220\\x22\\x7D\\x5D');\"\nliteral = re.search(r\"(?&lt;=JSON\\.parse\\().*(?=\\);$)\", line).group(0)\njson_string = ast.literal_eval(literal)\nplayers_data = json.loads(json_string)\nprint(players_data)\n</code></pre>\n"}], "owner": {"reputation": 81, "user_id": 9580322, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21dae551d4d75d9c1ff96afbf223ce48?s=128&d=identicon&r=PG&f=1", "display_name": "aaron", "link": "https://stackoverflow.com/users/9580322/aaron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "accepted_answer_id": 57897673, "answer_count": 1, "score": 0, "last_activity_date": 1568245562, "creation_date": 1568237271, "question_id": 57897037, "link": "https://stackoverflow.com/questions/57897037/scrape-json-data", "title": "Scrape JSON Data", "body": "<p>I'm trying to scrape <a href=\"https://understat.com/team/Arsenal/2019\" rel=\"nofollow noreferrer\">https://understat.com/team/Arsenal/2019</a> (and other EPL team pages) with BeautifulSoup4 to get links to all the player pages and eventually scrape those pages for individual player data, but have gotten stuck as I am unfamiliar with JSON data.</p>\n\n<p>I've gotten as far as tracing to the part of the webpage which I'm interested in, but my current output looks like this <code>var playersData    = JSON.parse('\\x5B\\x7B\\x22id\\x22\\x3A\\x22318\\x22,\\x22player_name\\x22\\x3A\\x22Pierre\\x2DEmerick\\x20Aubameyang\\x22,</code>...<code>,\\x22xGBuildup\\x22\\x3A\\x220\\x22\\x7D\\x5D');</code>. </p>\n\n<p>I can't find any information about JSON data in this format, and was wondering if someone would be able to help me get the data from this page into ideally the format of a Pandas DataFrame.</p>\n"}, {"tags": ["python", "bottle", "cherrypy", "gevent"], "answers": [{"tags": [], "owner": {"reputation": 2915, "user_id": 3591014, "user_type": "registered", "profile_image": "https://graph.facebook.com/575197264/picture?type=large", "display_name": "eatmeimadanish", "link": "https://stackoverflow.com/users/3591014/eatmeimadanish"}, "is_accepted": false, "score": 1, "last_activity_date": 1608050864, "last_edit_date": 1608050864, "creation_date": 1568906013, "answer_id": 58014145, "question_id": 57897020, "link": "https://stackoverflow.com/questions/57897020/how-to-handle-multiple-requests-using-bottle-gevent/58014145#58014145", "title": "How to handle multiple requests using bottle-gevent?", "body": "<p>You might be over thinking this. You want to use the route decorators.  Each user hitting a route will be inside their own greenlet.  If you want to ensure this, you can call a function with <code>gevent.spawn()</code></p>\n<pre><code>import gevent\nfrom gevent import monkey, signal\nmonkey.patch_all()\nfrom gevent.pywsgi import WSGIServer\nfrom geventwebsocket.handler import WebSocketHandler\nimport bottle\nfrom bottle import get, post, template, request, response\nimport logging.handlers\nlogger = logging.getLogger()\nlogger.setLevel(logging.DEBUG)\n\n# Logging handler for files\nfile_handler = logging.handlers.TimedRotatingFileHandler(&quot;Log.log&quot;, when=&quot;midnight&quot;, interval=1,\n                                                         backupCount=10000)\nfile_handler.setLevel(logging.INFO)\n\n# Formatter's for logging\nformatter = logging.Formatter('%(asctime)s %(name)s %(levelname)s %(message)s')\nfile_handler.setFormatter(formatter)\n# Add handlers to the logger\nlogger.addHandler(file_handler)\n\n\n@get('/hello/&lt;name&gt;')\n@post('/hello/&lt;name&gt;')\ndef _hello(self, name):\n    print(&quot;hello &quot;, name)\n    logger.info(&quot;completed the response&quot;)\n    return &quot;hello {}&quot;.format(name)\n\n\nif __name__ == '__main__':\n    botapp = bottle.app()\n    server = WSGIServer((&quot;0.0.0.0&quot;, 9999), botapp, handler_class=WebSocketHandler)\n    def shutdown():\n        print('Shutting down ...')\n        server.stop(timeout=60)\n        exit(signal.SIGTERM)\n    gevent.signal(signal.SIGTERM, shutdown)\n    gevent.signal(signal.SIGINT, shutdown)  # CTRL C\n    logger.info(&quot;Application Started Successfully.&quot;)\n    server.serve_forever()\n</code></pre>\n"}], "owner": {"reputation": 419, "user_id": 10360845, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-S5socgsgDdw/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaOUvNYK86DGflX2rZtBL3PL8z4WBw/mo/photo.jpg?sz=128", "display_name": "Vamsi Nimmala", "link": "https://stackoverflow.com/users/10360845/vamsi-nimmala"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 436, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1608050864, "creation_date": 1568237172, "last_edit_date": 1568303490, "question_id": 57897020, "link": "https://stackoverflow.com/questions/57897020/how-to-handle-multiple-requests-using-bottle-gevent", "title": "How to handle multiple requests using bottle-gevent?", "body": "<p>I am developing a web service which has huge computations in the backend. Below is the code with bottle framework and \"Cherrypy\" server (Multi-threaded and very stable). \nBut after testing it for sometime, I feel it is not servering as fast as I expected. The code using \"Cherrypy\" is below</p>\n\n<pre><code>from bottle import Bottle\nimport logging.handlers\n\nlogger = logging.getLogger()\nlogger.setLevel(logging.DEBUG)\n\n# Logging handler for files\nfile_handler = logging.handlers.TimedRotatingFileHandler(\"Log.log\", when=\"midnight\", interval=1,\n                                                         backupCount=10000)\nfile_handler.setLevel(logging.INFO)\n\n# Formatter's for logging\nformatter = logging.Formatter('%(asctime)s %(name)s %(levelname)s %(message)s')\nfile_handler.setFormatter(formatter)\n# Add handlers to the logger\nlogger.addHandler(file_handler)\n\n\nclass App:\n\n    def __init__(self, server, host, port):\n        self._app = Bottle()\n        self._host = host\n        self._port = port\n        self._server = server\n        self._route()\n\n    def start(self):\n        self._app.run(server=self._server, host=self._host, port=self._port)\n        logger.info(\"Application Started Successfully.\")\n\n    def _route(self):\n        self._app.route('/hello/&lt;name&gt;', method=\"POST\", callback=self.hello)\n\n    def hello(self, name):\n        print(\"hello \", name)\n        logger.info(\"completed the response\")\n\n\nif __name__ == '__main__':\n    server = App(server='cheroot', host='0.0.0.0', port=9999)\n    server.start()\n</code></pre>\n\n<p>The Web Service which I am developing is called by multiple requests at the same time. The Cherrypy server is on estimate takes 40000ms seconds for the response. This is huge time . \nSo I planned to use \"Gevent\" server (Asynchronous). But I am facing an issue that multiple threads (GREENLET) resolves same request. The code for this is as shown </p>\n\n<pre><code>from bottle import Bottle\nimport logging.handlers\n\nfrom gevent import monkey\nmonkey.patch_all()\n\nclass App:\n\n    def __init__(self, server, host, port):\n        self._app = Bottle()\n        self._host = host\n        self._port = port\n        self._server = server\n        self._route()\n\n    def start(self):\n        self._app.run(server=self._server, host=self._host, port=self._port)\n        logger.info(\"Application Started Successfully.\")\n\n    def _route(self):\n        self._app.route('/hello/&lt;name&gt;', method=\"POST\", callback=self.hello)\n\n    def hello(self, name):\n        print(\"hello \", name)\n        logger.info(\"completed the response\")\n\n\nif __name__ == '__main__':\n    server = App(server='gevent', host='0.0.0.0', port=9999)\n    server.start()\n</code></pre>\n\n<p>Actual time for a single request is 9000ms, So the increse in time to 40000ms or even more some times makes me to choose gevent. </p>\n\n<p>How to control the GREENLET to take a single request and send the response to the request with a minimum time while other GREENLET handling the other request from other machine?</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 2336, "user_id": 7389264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/160900497f0373247800b2ad89798e32?s=128&d=identicon&r=PG&f=1", "display_name": "jirassimok", "link": "https://stackoverflow.com/users/7389264/jirassimok"}, "edited": false, "score": 1, "creation_date": 1568241737, "post_id": 57897019, "comment_id": 102216147, "body": "It&#39;s not entirely clear what you&#39;re asking. The code you&#39;ve posted generates combinations of 10 of the characters in the string, and discards any that have over 3 of the same character. Are you trying to add another rule to filter by, modify the rule to do what you want, or something else?"}, {"owner": {"reputation": 65, "user_id": 12007040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20c2bdd36d27674efaa72ab6a2b052d9?s=128&d=identicon&r=PG&f=1", "display_name": "Pijes", "link": "https://stackoverflow.com/users/12007040/pijes"}, "reply_to_user": {"reputation": 2336, "user_id": 7389264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/160900497f0373247800b2ad89798e32?s=128&d=identicon&r=PG&f=1", "display_name": "jirassimok", "link": "https://stackoverflow.com/users/7389264/jirassimok"}, "edited": false, "score": 0, "creation_date": 1568277954, "post_id": 57897019, "comment_id": 102226047, "body": "Yes, correct. I have problem with that because they first generate combination and than discard it. Is there a way to generate it as it should. I tried to add one more rule to filter but if you have some idea how to do this without generate and discard please tell me. I need a code where I can get all combination from symbols I have with some limit. A=4 times Q=3 times and the rest of characters not to show more than 3. The rest of characters can show 1 time, 2 times but not more than 3. That&#39;s I need. Thank you"}], "answers": [{"comments": [{"owner": {"reputation": 65, "user_id": 12007040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20c2bdd36d27674efaa72ab6a2b052d9?s=128&d=identicon&r=PG&f=1", "display_name": "Pijes", "link": "https://stackoverflow.com/users/12007040/pijes"}, "edited": false, "score": 0, "creation_date": 1568277801, "post_id": 57897699, "comment_id": 102225968, "body": "Thank you Barmar but limits = {&#39;Q&#39;: 4, &#39;A&#39;: 2} don&#39;t work. Do you have some idea why?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 65, "user_id": 12007040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20c2bdd36d27674efaa72ab6a2b052d9?s=128&d=identicon&r=PG&f=1", "display_name": "Pijes", "link": "https://stackoverflow.com/users/12007040/pijes"}, "edited": false, "score": 0, "creation_date": 1568316287, "post_id": 57897699, "comment_id": 102245706, "body": "You accepted the answer, does that mean you got it working?"}, {"owner": {"reputation": 65, "user_id": 12007040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20c2bdd36d27674efaa72ab6a2b052d9?s=128&d=identicon&r=PG&f=1", "display_name": "Pijes", "link": "https://stackoverflow.com/users/12007040/pijes"}, "edited": false, "score": 0, "creation_date": 1568317412, "post_id": 57897699, "comment_id": 102246119, "body": "No, I made mistake. Still without solution"}], "tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": false, "score": 1, "last_activity_date": 1568242037, "creation_date": 1568242037, "answer_id": 57897699, "question_id": 57897019, "link": "https://stackoverflow.com/questions/57897019/i-need-limit-for-particular-characters-in-python-itertools/57897699#57897699", "title": "I need limit for particular characters in Python itertools", "body": "<p>Add a dictionary that specifies the limit for each character, and uses that instead of <code>3</code> in your condition. You can use <code>.get()</code> with a default value so you don't have to specify all the limits.</p>\n\n<pre><code>limits = {'Q': 4, 'A': 2}\n\ndef combine(arr, s):\n    return [x for x in combinations_with_replacement(symbols, s) if max(collections.Counter(x).values()) &lt;= limits.get(x, 3)]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 65, "user_id": 12007040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20c2bdd36d27674efaa72ab6a2b052d9?s=128&d=identicon&r=PG&f=1", "display_name": "Pijes", "link": "https://stackoverflow.com/users/12007040/pijes"}, "edited": false, "score": 0, "creation_date": 1568318291, "post_id": 57912679, "comment_id": 102246426, "body": "Thank you Kevin. This is much faster than my previous code but is it possible that I have in results LNL68NLttN8Lh4NLh I need all combination from symbols but with some limits"}, {"owner": {"reputation": 65, "user_id": 12007040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20c2bdd36d27674efaa72ab6a2b052d9?s=128&d=identicon&r=PG&f=1", "display_name": "Pijes", "link": "https://stackoverflow.com/users/12007040/pijes"}, "edited": false, "score": 0, "creation_date": 1568319298, "post_id": 57912679, "comment_id": 102246818, "body": "For all symols &lt;2 not always 2. And for <code>limits = {&quot;L&quot;:5, &quot;N&quot;: 4}</code> they don&#39;t be always together like LLLLL or NNNN. I need that they would be mixed. Not more than 3 times in row. Thank you again Kevin"}, {"owner": {"reputation": 69452, "user_id": 953482, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/T3HH6.png?s=128&g=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/953482/kevin"}, "reply_to_user": {"reputation": 65, "user_id": 12007040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20c2bdd36d27674efaa72ab6a2b052d9?s=128&d=identicon&r=PG&f=1", "display_name": "Pijes", "link": "https://stackoverflow.com/users/12007040/pijes"}, "edited": false, "score": 0, "creation_date": 1568378413, "post_id": 57912679, "comment_id": 102265204, "body": "&quot;For all symols &lt;2 not always 2&quot;: Yes, my answer already does that. For example, &quot;LLLLLNNNNhhkkPPe3&quot; has the character &quot;e&quot; once, and the character &quot;m&quot; zero times. &quot;I need that they would be mixed&quot;: then what you are asking for is not &quot;combinations&quot;, because a combination always has the same relative order of characters as its input. L is the first symbol in your collection, so it will always appear first in the output."}, {"owner": {"reputation": 69452, "user_id": 953482, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/T3HH6.png?s=128&g=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/953482/kevin"}, "reply_to_user": {"reputation": 65, "user_id": 12007040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20c2bdd36d27674efaa72ab6a2b052d9?s=128&d=identicon&r=PG&f=1", "display_name": "Pijes", "link": "https://stackoverflow.com/users/12007040/pijes"}, "edited": false, "score": 0, "creation_date": 1568378795, "post_id": 57912679, "comment_id": 102265384, "body": "It sounds like what you want is a kind of &quot;cartesian product with limits&quot;... I think this is possible, but it will require a completely different approach. I&#39;ll edit it in if I come up with something."}, {"owner": {"reputation": 65, "user_id": 12007040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20c2bdd36d27674efaa72ab6a2b052d9?s=128&d=identicon&r=PG&f=1", "display_name": "Pijes", "link": "https://stackoverflow.com/users/12007040/pijes"}, "edited": false, "score": 0, "creation_date": 1568808146, "post_id": 57912679, "comment_id": 102391505, "body": "Thank you <a href=\"https://stackoverflow.com/users/953482/kevin\">stackoverflow.com/users/953482/kevin</a> for idea. Can you help me how to exclude from my results LLLLLLLLLL and similar. I want to have for all symols &lt;2 not always 2. And for limits = {&quot;L&quot;:5, &quot;N&quot;: 4} they don&#39;t be always together like LLLLL or NNNN. I need that they would be mixed. Not more than 3 times in row. <code>import itertools somelists = [ [&#39;L&#39;,&#39;N&#39;,&#39;k&#39;,&#39;P&#39;,&#39;e&#39;,&#39;p&#39;,&#39;m&#39;,&#39;3&#39;,&#39;6&#39;,&#39;8&#39;,&#39;4&#39;,&#39;t&#39;], ..... 10 times in total....comment limit [&#39;L&#39;,&#39;N&#39;,&#39;k&#39;,&#39;P&#39;,&#39;e&#39;,&#39;p&#39;,&#39;m&#39;,&#39;3&#39;,&#39;6&#39;,&#39;8&#39;,&#39;4&#39;,&#39;t&#39;]           ] for element in itertools.product(*somelists):        print(&#39;&#39;.join(element))</code>"}], "tags": [], "owner": {"reputation": 69452, "user_id": 953482, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/T3HH6.png?s=128&g=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/953482/kevin"}, "is_accepted": false, "score": 2, "last_activity_date": 1568313234, "creation_date": 1568313234, "answer_id": 57912679, "question_id": 57897019, "link": "https://stackoverflow.com/questions/57897019/i-need-limit-for-particular-characters-in-python-itertools/57912679#57912679", "title": "I need limit for particular characters in Python itertools", "body": "<p>I notice that your <code>symbols</code> collection contains the letter \"h\" twice. I'm not sure whether your \"must appear 0 or 1 or 2 times, but no more\" restriction applies individually to each h, or whether it applies to all \"h\"es collectively. In other words, is \"LLLLLNNNNhh3684hh\" a legal result? The \"first h\" appears twice, and the \"second h\" appears twice, and so there are four instances of \"h\" total.</p>\n\n<p>Here's an approach that works if all symbols are individually restricted and <code>\"LLLLLNNNNhh3684hh\"</code> is a legal result. it works on the principle that any combination of a sequence can be uniquely represented as a list of numbers indicating how many times the element at that index appears in the combination.</p>\n\n<pre><code>def restricted_sum(n, s, restrictions):\n    \"\"\"\n    Restricted sum problem. Find each list that sums up to a certain number, and obeys restrictions regarding its size and contents.\n\n    input:\n    n --            an integer. Indicates the length of the result.\n    s --            an integer. Indicates the sum of the result.\n    restrictions -- a list of tuples. Indicates the minimum and maximum of each corresponding element in the result. \n\n    yields:\n    result -- A list of positive integers, satisfying the requirements:\n        len(result) == n\n        sum(result) == s\n        for i in range(len(result)):\n            restrictions[i][0] &lt;= result[i] &lt;= restrictions[i][1]\n    \"\"\"\n    if n == 0:\n        if s == 0:\n            yield ()\n            return\n        else:\n            return\n    else:\n        if sum(t[0] for t in restrictions) &gt; s: return\n        if sum(t[1] for t in restrictions) &lt; s: return\n        l,r = restrictions[0]\n        for amt in range(l, r+1):\n            for rest in restricted_sum(n-1, s-amt, restrictions[1:]):\n                yield (amt,) + rest\n\ndef combine(characters, size, character_restrictions):\n    assert len(characters) == len(set(characters)) #only works for character sets with no duplicates\n    n = len(characters)\n    s = size\n    restrictions = tuple(character_restrictions[c] for c in characters)\n    for seq in restricted_sum(n, s, restrictions):\n        yield \"\".join(c*i for i,c in zip(seq, characters))\n\nsymbols = \"LNhkPepm3684th\"\ncharacter_restrictions = {}\n\n#most symbols can appear 0-2 times\nfor c in symbols:\n    character_restrictions[c] = (0,2)\n\n#these characters must appear an exact number of times\nlimits = {\"L\":5, \"N\": 4}\nfor c, amt in limits.items():\n    character_restrictions[c] = (amt, amt)\n\nfor result in combine(symbols, 17, character_restrictions):\n    print(result)\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>LLLLLNNNN8844tthh\nLLLLLNNNN6844tthh\nLLLLLNNNN6884tthh\nLLLLLNNNN68844thh\nLLLLLNNNN68844tth\n... 23,462 more values go here...\nLLLLLNNNNhh3684hh\n... 4,847 more values go here...\nLLLLLNNNNhhkkPPe6\nLLLLLNNNNhhkkPPe3\nLLLLLNNNNhhkkPPem\nLLLLLNNNNhhkkPPep\nLLLLLNNNNhhkkPPee\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 12007040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20c2bdd36d27674efaa72ab6a2b052d9?s=128&d=identicon&r=PG&f=1", "display_name": "Pijes", "link": "https://stackoverflow.com/users/12007040/pijes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1568313234, "creation_date": 1568237170, "last_edit_date": 1568241042, "question_id": 57897019, "link": "https://stackoverflow.com/questions/57897019/i-need-limit-for-particular-characters-in-python-itertools", "title": "I need limit for particular characters in Python itertools", "body": "<p>How I can find a way to get all combination with some limits for particular characters. For now I have only limit for all characters. But I want to have character \"Q\" 4 times in every combinations? Is that possible with my code?</p>\n\n<p>I use itertools combination_with_replacement</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from itertools import combinations_with_replacement\nimport collections\n\n\n\n\ndef combine(arr, s):\n    return [x for x in combinations_with_replacement(symbols, s) if max(collections.Counter(x).values()) &lt;= 3]\n\nsymbols = \"LNhkPepm3684th\"\nmax_length = 10 \nset = 10\n\n\n\nprint(combine(symbols, set))\n</code></pre>\n"}, {"tags": ["python", "django", "deployment", "server", "cpanel"], "comments": [{"owner": {"reputation": 73, "user_id": 10711289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0aa8bad93895a6045d3dd3925b03643?s=128&d=identicon&r=PG&f=1", "display_name": "Overlord", "link": "https://stackoverflow.com/users/10711289/overlord"}, "edited": false, "score": 0, "creation_date": 1568272922, "post_id": 57897014, "comment_id": 102223530, "body": "Any suggestion?"}, {"owner": {"reputation": 11923, "user_id": 1577947, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f343750acd1f96953260b47c705582d9?s=128&d=identicon&r=PG", "display_name": "Jarad", "link": "https://stackoverflow.com/users/1577947/jarad"}, "edited": false, "score": 0, "creation_date": 1574137295, "post_id": 57897014, "comment_id": 104114073, "body": "Mentioning who your hosting is / was would have been helpful here. I use NameCheap and am wondering if this advise would work for me."}, {"owner": {"reputation": 73, "user_id": 10711289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0aa8bad93895a6045d3dd3925b03643?s=128&d=identicon&r=PG&f=1", "display_name": "Overlord", "link": "https://stackoverflow.com/users/10711289/overlord"}, "reply_to_user": {"reputation": 11923, "user_id": 1577947, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f343750acd1f96953260b47c705582d9?s=128&d=identicon&r=PG", "display_name": "Jarad", "link": "https://stackoverflow.com/users/1577947/jarad"}, "edited": false, "score": 0, "creation_date": 1574542687, "post_id": 57897014, "comment_id": 104271991, "body": "If your host provides cpanel for management and cpanel is updated this would work for you. My provider is a local one which uses cpanel."}], "answers": [{"comments": [{"owner": {"reputation": 157, "user_id": 1642409, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d36db99219b4f73434a769a44279a65e?s=128&d=identicon&r=PG", "display_name": "Panpaper", "link": "https://stackoverflow.com/users/1642409/panpaper"}, "edited": false, "score": 0, "creation_date": 1576894772, "post_id": 57921796, "comment_id": 105051740, "body": "Not entirely related but do you know what these files would be for a Flask app? Thanks."}, {"owner": {"reputation": 73, "user_id": 10711289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0aa8bad93895a6045d3dd3925b03643?s=128&d=identicon&r=PG&f=1", "display_name": "Overlord", "link": "https://stackoverflow.com/users/10711289/overlord"}, "reply_to_user": {"reputation": 157, "user_id": 1642409, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d36db99219b4f73434a769a44279a65e?s=128&d=identicon&r=PG", "display_name": "Panpaper", "link": "https://stackoverflow.com/users/1642409/panpaper"}, "edited": false, "score": 0, "creation_date": 1576959046, "post_id": 57921796, "comment_id": 105062732, "body": "@Panpaper There is no difference actually set your &quot;Application startup file&quot; to your flask app startup file like main.py and &quot;application entry point&quot; is your app name which is going to be called on passenger_wsgi.py."}], "tags": [], "owner": {"reputation": 73, "user_id": 10711289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0aa8bad93895a6045d3dd3925b03643?s=128&d=identicon&r=PG&f=1", "display_name": "Overlord", "link": "https://stackoverflow.com/users/10711289/overlord"}, "is_accepted": true, "score": 4, "last_activity_date": 1568370135, "creation_date": 1568370135, "answer_id": 57921796, "question_id": 57897014, "link": "https://stackoverflow.com/questions/57897014/what-is-application-startup-file-option-on-cpanel-python-application/57921796#57921796", "title": "What is &quot;Application startup file&quot; option on Cpanel python application?", "body": "<p>Ok it's actually pretty simple. When you want to deploy your Django app to cpanel, these field should be filled with:</p>\n\n<p>Application startup file = Address of Manage.py file to start your app.</p>\n\n<p>Application Entry point = Address of wsgi.py in your project folder.</p>\n"}], "owner": {"reputation": 73, "user_id": 10711289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0aa8bad93895a6045d3dd3925b03643?s=128&d=identicon&r=PG&f=1", "display_name": "Overlord", "link": "https://stackoverflow.com/users/10711289/overlord"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2020, "favorite_count": 0, "accepted_answer_id": 57921796, "answer_count": 1, "score": 3, "last_activity_date": 1568370135, "creation_date": 1568237153, "last_edit_date": 1568272698, "question_id": 57897014, "link": "https://stackoverflow.com/questions/57897014/what-is-application-startup-file-option-on-cpanel-python-application", "title": "What is &quot;Application startup file&quot; option on Cpanel python application?", "body": "<p>I'm trying to deploy my django project to my host using cpanel, but there are some new options in Create python applications tab. What should i set for the following items:</p>\n\n<p>\"Application startup file\"</p>\n\n<p>\"Application Entry point\"</p>\n\n<p><a href=\"https://i.stack.imgur.com/FnTfT.png\" rel=\"nofollow noreferrer\">create application</a></p>\n"}, {"tags": ["python", "postgresql", "makefile", "multicorn"], "comments": [{"owner": {"reputation": 133, "user_id": 10046768, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gY5uC.jpg?s=128&g=1", "display_name": "hrmnjt", "link": "https://stackoverflow.com/users/10046768/hrmnjt"}, "edited": false, "score": 1, "creation_date": 1568240509, "post_id": 57896997, "comment_id": 102215858, "body": "As you mentioned, some shells do not copy the environment variable to the subshell.  FYR - <a href=\"https://unix.stackexchange.com/a/138498/319151\">unix.stackexchange.com/a/138498/319151</a>"}], "answers": [{"tags": [], "owner": {"reputation": 116, "user_id": 830729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc50393ddd41509bfb8a8f2ebe0d6a5e?s=128&d=identicon&r=PG", "display_name": "Kapitol", "link": "https://stackoverflow.com/users/830729/kapitol"}, "is_accepted": true, "score": 1, "last_activity_date": 1568911533, "creation_date": 1568911533, "answer_id": 58015588, "question_id": 57896997, "link": "https://stackoverflow.com/questions/57896997/makefile-shell-function-and-environment-vars/58015588#58015588", "title": "Makefile shell function and environment vars", "body": "<p>You can pass the pyenv version via the PYENV_VERSION environment variable. I'd imagine something like:</p>\n\n<pre><code>PYENV_VERSION=your_virtualenv make\n</code></pre>\n\n<p>to work.</p>\n"}], "owner": {"reputation": 1120, "user_id": 458290, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/92b542a1ec75b4413e8f1b675e76805a?s=128&d=identicon&r=PG", "display_name": "zchtodd", "link": "https://stackoverflow.com/users/458290/zchtodd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 58015588, "answer_count": 1, "score": 0, "last_activity_date": 1568911533, "creation_date": 1568237113, "question_id": 57896997, "link": "https://stackoverflow.com/questions/57896997/makefile-shell-function-and-environment-vars", "title": "Makefile shell function and environment vars", "body": "<p>I'm playing around with <a href=\"https://multicorn.org/\" rel=\"nofollow noreferrer\">Multicorn</a> for Postgres, and its Makefile doesn't seem to play nice with Python virtual environments. It wants to install itself to the system Python in spite of pyenv. I think this is happening because its Makefile is doing this to find the Python version:</p>\n\n<pre><code>$(shell ${PYTHON} --version 2&gt;&amp;1 | cut -d ' ' -f 2 | cut -d '.' -f 1-2)\n</code></pre>\n\n<p>From what I've read, shell starts an entirely new shell, and it doesn't seem to carry over the environment variables that pyenv sets to point everything to a certain Python version.</p>\n\n<p>Wondering if anybody has had a similar problem and how they might have gotten around it.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "amazon-web-services", "amazon-ec2", "boto3"], "answers": [{"tags": [], "owner": {"reputation": 133, "user_id": 10046768, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gY5uC.jpg?s=128&g=1", "display_name": "hrmnjt", "link": "https://stackoverflow.com/users/10046768/hrmnjt"}, "is_accepted": false, "score": 1, "last_activity_date": 1568237622, "creation_date": 1568237622, "answer_id": 57897079, "question_id": 57896987, "link": "https://stackoverflow.com/questions/57896987/running-python-script-in-an-existing-ec2-instance-on-aws/57897079#57897079", "title": "Running Python Script in an existing EC2 instance on AWS", "body": "<p>If you want to use the execute a script inside of an existing EC2 instance - you could use the reference from the existing answer here : <a href=\"https://stackoverflow.com/questions/15501845/boto-execute-shell-command-on-ec2-instance?noredirect=1\">Boto Execute shell command on ec2 instance</a></p>\n\n<p>IMO, to be able to start a script inside the EC2, the script should be present on the EC2.</p>\n"}, {"tags": [], "owner": {"reputation": 338, "user_id": 944224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eca4fe97cffcce33e91861a079a7b412?s=128&d=identicon&r=PG", "display_name": "Rob", "link": "https://stackoverflow.com/users/944224/rob"}, "is_accepted": false, "score": 3, "last_activity_date": 1568237625, "creation_date": 1568237625, "answer_id": 57897084, "question_id": 57896987, "link": "https://stackoverflow.com/questions/57896987/running-python-script-in-an-existing-ec2-instance-on-aws/57897084#57897084", "title": "Running Python Script in an existing EC2 instance on AWS", "body": "<p>Unless you have a specific service running on that machine which allows you to modify mentioned files. I would make an attempt to log onto EC2 instance as to any other machine via network. </p>\n\n<p>You can access EC2 machine via ssh with use of paramiko or pexpect libraries.</p>\n"}, {"tags": [], "owner": {"reputation": 162605, "user_id": 174777, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6PnNW.jpg?s=128&g=1", "display_name": "John Rotenstein", "link": "https://stackoverflow.com/users/174777/john-rotenstein"}, "is_accepted": true, "score": 3, "last_activity_date": 1568245602, "creation_date": 1568245602, "answer_id": 57898051, "question_id": 57896987, "link": "https://stackoverflow.com/questions/57896987/running-python-script-in-an-existing-ec2-instance-on-aws/57898051#57898051", "title": "Running Python Script in an existing EC2 instance on AWS", "body": "<p>An Amazon EC2 instance is just like any computer on the Internet. It is running an operating system (eg Linux or Windows), and it has standard security in-built. The fact that it is an Amazon EC2 instance has no impact.</p>\n\n<p>So, the question really becomes: <em><strong>How do I run a command on a remote computer?</strong></em></p>\n\n<p>Typical ways of doing this include:</p>\n\n<ul>\n<li>Connecting to the computer (eg via SSH) and running a command</li>\n<li>Running a service on the computer that listens on a particular port (eg responding to an API request)</li>\n<li>Using remote shell commands to run an operation on another computer</li>\n</ul>\n\n<p>Fortunately, AWS offers an additional option: Use the <a href=\"https://docs.aws.amazon.com/systems-manager/latest/userguide/execute-remote-commands.html\" rel=\"nofollow noreferrer\">AWS Systems Manager Run Command</a>:</p>\n\n<blockquote>\n  <p>AWS Systems Manager Run Command lets you remotely and securely manage the configuration of your managed instances. A managed instance is any Amazon EC2 instance or on-premises machine in your hybrid environment that has been configured for Systems Manager. Run Command enables you to <strong>automate common administrative tasks and perform ad hoc configuration changes at scale</strong>. You can use Run Command from the AWS console, the AWS Command Line Interface, AWS Tools for Windows PowerShell, or the AWS SDKs. Run Command is offered at no additional cost.</p>\n  \n  <p>Administrators use Run Command to perform the following types of tasks on their managed instances: <strong>install or bootstrap applications</strong>, build a deployment pipeline, capture log files when an instance is terminated from an Auto Scaling group, and join instances to a Windows domain, to name a few.</p>\n</blockquote>\n\n<p>Basically, it is an <strong>agent installed on the instance</strong> (or, for that matter, on any computer on the Internet) and commands can be sent to the computer that are executed by the agent. In fact, the same command can be sent to hundreds of computers if desired.</p>\n\n<p>The AWS Systems Manager Run Command can be <strong>triggered by an API call</strong>, such as a program using boto3.</p>\n"}], "owner": {"reputation": 72, "user_id": 6828398, "user_type": "registered", "profile_image": "https://graph.facebook.com/1116812658409627/picture?type=large", "display_name": "Guilherme Coppini", "link": "https://stackoverflow.com/users/6828398/guilherme-coppini"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1382, "favorite_count": 0, "accepted_answer_id": 57898051, "answer_count": 3, "score": 1, "last_activity_date": 1568245602, "creation_date": 1568237076, "question_id": 57896987, "link": "https://stackoverflow.com/questions/57896987/running-python-script-in-an-existing-ec2-instance-on-aws", "title": "Running Python Script in an existing EC2 instance on AWS", "body": "<p>I have an API (in python) which has to alter files inside an EC2 instance that is already running. I'm searching on boto3 documentation, but could only find functions to start new EC2 instances, not to connect to an already existing one.</p>\n\n<p>I am currently thinking of replicating the APIs functions to alter the files in a script inside the EC2 instance, and having the API simply start that script on the EC2 instance by accessing it using some sort of SSH library. </p>\n\n<p>Would that be the correct approach, or is there some boto3 function (or in some of the other Amazon/AWS libraries) that allows me to start a script inside existing instances?</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 3254, "user_id": 6286540, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ec8c5fdeb86a51c222e55aaaba1d242?s=128&d=identicon&r=PG&f=1", "display_name": "Toby Petty", "link": "https://stackoverflow.com/users/6286540/toby-petty"}, "is_accepted": true, "score": 1, "last_activity_date": 1568237566, "last_edit_date": 1568237566, "creation_date": 1568237033, "answer_id": 57896981, "question_id": 57896955, "link": "https://stackoverflow.com/questions/57896955/python-deduplicate-sort-columns-and-transform-to-a-row/57896981#57896981", "title": "Python DeDuplicate Sort columns and transform to a row", "body": "<p>You can remove duplicates and sort columns with this loop:</p>\n\n<pre><code>for c in df.columns:\n    vals = sorted(df[c].dropna().unique())\n    df[c] = vals + [np.nan for x in range(len(df) - len(vals))]\n</code></pre>\n\n<p>Then just transpose the DataFrame:</p>\n\n<pre><code>df = df.T\n</code></pre>\n"}], "owner": {"reputation": 1186, "user_id": 2458922, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/becbcc9a3ace0d9238fa0329c0502b71?s=128&d=identicon&r=PG", "display_name": "user2458922", "link": "https://stackoverflow.com/users/2458922/user2458922"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28, "favorite_count": 0, "accepted_answer_id": 57896981, "answer_count": 1, "score": 0, "last_activity_date": 1568237566, "creation_date": 1568236861, "question_id": 57896955, "link": "https://stackoverflow.com/questions/57896955/python-deduplicate-sort-columns-and-transform-to-a-row", "title": "Python DeDuplicate Sort columns and transform to a row", "body": "<p>Given Data</p>\n\n<pre><code>Order_1 | Order_2 | Order_3\n-----------------------\nBread    Egg        Key\nEgg      Pen        Tea\n         Pen        Book\n         Key        Bag\n</code></pre>\n\n<p>Needs to be transformed as</p>\n\n<pre><code>Order_1,    Egg,    Bread       \nOrder_2,    Egg,    Key,    Pen \nOrder_3,    Bag,    Book,   Key,    Tea\n</code></pre>\n\n<p>The Header became the index. Each Columns is sorted and De Duplicated.</p>\n"}, {"tags": ["python", "python-3.7", "sctp"], "answers": [{"comments": [{"owner": {"reputation": 4780, "user_id": 149900, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/fdVBU.jpg?s=128&g=1", "display_name": "pepoluan", "link": "https://stackoverflow.com/users/149900/pepoluan"}, "edited": false, "score": 1, "creation_date": 1607952570, "post_id": 57929391, "comment_id": 115425211, "body": "Awesome investigation."}, {"owner": {"reputation": 446, "user_id": 2883500, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fb15873586fbd8a4469b13f2334df59?s=128&d=identicon&r=PG&f=1", "display_name": "pooley1994", "link": "https://stackoverflow.com/users/2883500/pooley1994"}, "reply_to_user": {"reputation": 4780, "user_id": 149900, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/fdVBU.jpg?s=128&g=1", "display_name": "pepoluan", "link": "https://stackoverflow.com/users/149900/pepoluan"}, "edited": false, "score": 1, "creation_date": 1608042440, "post_id": 57929391, "comment_id": 115457091, "body": "Thanks @pepoluan"}], "tags": [], "owner": {"reputation": 446, "user_id": 2883500, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fb15873586fbd8a4469b13f2334df59?s=128&d=identicon&r=PG&f=1", "display_name": "pooley1994", "link": "https://stackoverflow.com/users/2883500/pooley1994"}, "is_accepted": true, "score": 1, "last_activity_date": 1568403009, "creation_date": 1568403009, "answer_id": 57929391, "question_id": 57896924, "link": "https://stackoverflow.com/questions/57896924/how-to-use-sctpsocket-udp-class-in-pysctp-library/57929391#57929391", "title": "How to use sctpsocket_udp class in pysctp library", "body": "<p>Figured out the issue with this one. </p>\n\n<p>Under the hood, calling <code>socket.settimeout(1)</code> or similarly calling <code>socket.setblocking(False)</code> which I also experimented with, results in the underlying socket getting set to non-blocking. The reason this becomes a problem, is that while most socket operations (for instance, just the normal <code>socket.recvmsg</code> that you call on a <code>sctp.sctpsocket_udp</code> object get delegated to the python <code>socket</code> object, the <code>sctp_*</code> calls do not, they are handled via the <code>_sctp.c</code> C extension component of pysctp. What this means, is that when you do something that causes the underlying socket to be nonblocking such as <code>socket.settimeout(1)</code>, and then use one of the <code>sctp_*</code> functions, rather than timing out and then getting a <code>socket.timeout</code> exception, you end up in this part of the underlying C extension:</p>\n\n<pre><code>size = sctp_recvmsg(...)\nif(size &lt; 0){\n    free(msg);\n    PyErr_SetFromErrno(PyExc_IOError);\n    return ret;\n}\n</code></pre>\n\n<p>and thus, get the BlockingIOError referenced above. The solution is to use non-blocking mode rather than bothering with a timeout, and then to catch <code>BlockingIOError</code> instead of  <code>socket.timeout</code> and just check the <code>errno</code> attribute of the exception to make sure it was <code>EAGAIN</code> thus indicating no data available at that point, so sleep or something and then try again.</p>\n"}], "owner": {"reputation": 446, "user_id": 2883500, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fb15873586fbd8a4469b13f2334df59?s=128&d=identicon&r=PG&f=1", "display_name": "pooley1994", "link": "https://stackoverflow.com/users/2883500/pooley1994"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 0, "accepted_answer_id": 57929391, "answer_count": 1, "score": 1, "last_activity_date": 1568403009, "creation_date": 1568236681, "last_edit_date": 1568238049, "question_id": 57896924, "link": "https://stackoverflow.com/questions/57896924/how-to-use-sctpsocket-udp-class-in-pysctp-library", "title": "How to use sctpsocket_udp class in pysctp library", "body": "<p>I am attempting to set up a basic SCTP client/server example using the pysctp library. I would like to use the <code>sctp.sctpsocket_udp</code> class since according to the relevant doc strings:</p>\n\n<blockquote>\n  <p>A UDP-style SCTP socket can hold several associations via a single socket.</p>\n</blockquote>\n\n<p>...and this is functionality that I need. Here is what I have so far:</p>\n\n<pre><code>server_sock = sctp.sctpsocket_udp(socket.AF_INET)\nserver_sock.bind((str(ip_address), port))\nserver_sock.listen(16)\nserver_sock.settimeout(1)\n\nwhile not done:\n    time.sleep(3)\n    fromaddr, flags, msg, notif = server_sock.sctp_recv(3*1024*1024)\n</code></pre>\n\n<p>I have of course omitted things like imports just for the sake of brevity. And the bottom line is that when this is executed I get the following error:</p>\n\n<blockquote>\n  <p>BlockingIOError: [Errno 11] Resource temporarily unavailable</p>\n</blockquote>\n\n<p>The corresponding stack trace indicates that the problem is arising on the underlying call to <code>_sctp.sctp_recv_msg(...)</code></p>\n\n<p>Output from strace shows the following:</p>\n\n<pre><code>1032 socket(PF_INET, SOCK_SEQPACKET|SOCK_CLOEXEC, IPPROTO_SCTP) = 3\n1033 getsockopt(3, 0x84 /* SOL_??? */, 2, \"\\n\\0\\377\\377\\10\\0`\\352\", [8]) = 0\n1034 getsockopt(3, 0x84 /* SOL_??? */, 11, \"\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\", [10]) = 0\n1035 bind(3, {sa_family=AF_INET, sin_port=htons(9000), in_addr=inet_addr(\"127.0.0.1\")}, 16) = 0\n1036 listen(3, 16)                           = 0\n1037 ioctl(3, FIONBIO, [1])                  = 0\n1038 mmap(NULL, 3149824, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7fd621646000\n1039 recvmsg(3, 0x7ffe1a59ba40, 0)           = -1 EAGAIN (Resource temporarily unavailable)\n</code></pre>\n\n<p>I attempted to restart my computer in case there was some resource hung open but this did not help anything.</p>\n"}, {"tags": ["python", "hadoop", "python-2.6"], "comments": [{"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 2, "creation_date": 1568236836, "post_id": 57896915, "comment_id": 102214951, "body": "The <code>x</code> python variable is not being transferred to the <code>$x</code> variable in the command."}, {"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1568236903, "post_id": 57896915, "comment_id": 102214976, "body": "Also, you&#39;re <i>sure</i> the path is <code>&#47;user</code>, and not <code>&#47;usr</code>?"}, {"owner": {"reputation": 117, "user_id": 9254175, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a324fb950b01003ec17faedd5533652a?s=128&d=identicon&r=PG&f=1", "display_name": "Hua Cha", "link": "https://stackoverflow.com/users/9254175/hua-cha"}, "reply_to_user": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1568236990, "post_id": 57896915, "comment_id": 102215003, "body": "@JohnGordon Yes, path is /user. I can do hdfs dfs -ls /user/app"}, {"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 1, "creation_date": 1568237338, "post_id": 57896915, "comment_id": 102215099, "body": "Perhaps it&#39;s because the command doesn&#39;t have a space between <code>$x</code> and <code>&#47;user&#47;app</code>, so it&#39;s effectively <code>$x&#47;user&#47;app</code>, and <code>$x</code> is (presumably) an undefined variable."}, {"owner": {"reputation": 117, "user_id": 9254175, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a324fb950b01003ec17faedd5533652a?s=128&d=identicon&r=PG&f=1", "display_name": "Hua Cha", "link": "https://stackoverflow.com/users/9254175/hua-cha"}, "reply_to_user": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1568237482, "post_id": 57896915, "comment_id": 102215141, "body": "@JohnGordon I added a space after the $x: <code>subprocess.call([&#39;hdfs dfs -copyFromLocal $x &#39; + &#39;&#47;user&#47;edwaeadt&#39;], shell=True)</code> Still seeing the same error. Also, if I can&#39;t use $x, what should I use?"}, {"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 2, "creation_date": 1568237680, "post_id": 57896915, "comment_id": 102215195, "body": "You&#39;ll have to use Python string formatting to insert the contents of <code>x</code>.  Try this: <code>&#39;hdfs dfs -copyFromLocal {} &#47;user&#47;edwaeadt&#39;.format(x)</code>.  That will replace the placeholder token <code>{}</code> in the string with the value of <code>x</code>."}, {"owner": {"reputation": 406, "user_id": 8806969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a397c6039334c3579a59073d340ceb8a?s=128&d=identicon&r=PG&f=1", "display_name": "IcedLance", "link": "https://stackoverflow.com/users/8806969/icedlance"}, "edited": false, "score": 0, "creation_date": 1568238045, "post_id": 57896915, "comment_id": 102215285, "body": "And <code>&#47;user&#47;app</code> is only &#39;legit&#39; in hadoop&#39;s distributed file system, not in local one, and since it can&#39;t resolve <code>$x</code> it assumes <code>&#47;user&#47;app</code> is the first argument, which is the source path in local fs and doesn&#39;t exist."}, {"owner": {"reputation": 117, "user_id": 9254175, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a324fb950b01003ec17faedd5533652a?s=128&d=identicon&r=PG&f=1", "display_name": "Hua Cha", "link": "https://stackoverflow.com/users/9254175/hua-cha"}, "reply_to_user": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1568238224, "post_id": 57896915, "comment_id": 102215341, "body": "@JohnGordon, I&#39;m seeing this error: <code>ValueError: zero length field name in format</code> Any ideas?"}, {"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 1, "creation_date": 1568238549, "post_id": 57896915, "comment_id": 102215412, "body": "Some python versions require a number inside the <code>{}</code> brackets.  Use <code>{0}</code> instead."}, {"owner": {"reputation": 117, "user_id": 9254175, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a324fb950b01003ec17faedd5533652a?s=128&d=identicon&r=PG&f=1", "display_name": "Hua Cha", "link": "https://stackoverflow.com/users/9254175/hua-cha"}, "reply_to_user": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1568238931, "post_id": 57896915, "comment_id": 102215487, "body": "@JohnGordon, that worked! Thanks. Although I have a different error now related to the ^ in the file name."}, {"owner": {"reputation": 36902, "user_id": 223424, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e97c628a88337b15e76a4690e916a2cd?s=128&d=identicon&r=PG", "display_name": "9000", "link": "https://stackoverflow.com/users/223424/9000"}, "edited": false, "score": 0, "creation_date": 1568239295, "post_id": 57896915, "comment_id": 102215570, "body": "Doies your HDFS command work from HDFS command line? Can you list the files you mention? Does prepending <code>hdfs:&#47;&#47;</code> to the paths help?"}, {"owner": {"reputation": 117, "user_id": 9254175, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a324fb950b01003ec17faedd5533652a?s=128&d=identicon&r=PG&f=1", "display_name": "Hua Cha", "link": "https://stackoverflow.com/users/9254175/hua-cha"}, "reply_to_user": {"reputation": 36902, "user_id": 223424, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e97c628a88337b15e76a4690e916a2cd?s=128&d=identicon&r=PG", "display_name": "9000", "link": "https://stackoverflow.com/users/223424/9000"}, "edited": false, "score": 0, "creation_date": 1568240129, "post_id": 57896915, "comment_id": 102215771, "body": "@9000 adding <code>hdfs:&#47;&#47;</code> doesn&#39;t help. Still facing the same error. I know the error is a result of the ^. I just don&#39;t know how, for each instance of x, substitute the ^ with %5E."}, {"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 1, "creation_date": 1568248850, "post_id": 57896915, "comment_id": 102217546, "body": "<code>x.replace</code> would help with that"}], "owner": {"reputation": 117, "user_id": 9254175, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a324fb950b01003ec17faedd5533652a?s=128&d=identicon&r=PG&f=1", "display_name": "Hua Cha", "link": "https://stackoverflow.com/users/9254175/hua-cha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1568239408, "creation_date": 1568236602, "last_edit_date": 1568239408, "question_id": 57896915, "link": "https://stackoverflow.com/questions/57896915/proper-syntax-for-subprocess-call", "title": "proper syntax for subprocess.call()", "body": "<p>I have the following script:</p>\n\n<pre><code>import glob\nimport subprocess\nimport os\n\nfilePath = \"/tmp/ming\"\nkeyword = \"GC10^Dummy-Segment\"\n\n#if keyword in filePath:\nnew=glob.glob('/tmp/ming/*Dummy-Segment*')\nprint(new)\nfor x in new:\n    subprocess.call(['hdfs dfs -copyFromLocal {0} /user/app'.format(x)], shell=True)\n\n</code></pre>\n\n<p>print(new) yields:</p>\n\n<pre><code>['/tmp/mike/GC10^Dummy-Segment_2018', '/tmp/mike/GC10^Dummy-Segment_2019']\n</code></pre>\n\n<p>Seeing the following errors:</p>\n\n<pre><code>copyFromLocal: unexpected URISyntaxException\ncopyFromLocal: unexpected URISyntaxException\n</code></pre>\n\n<p>In an earlier attempt, I had to replace the ^ with %5E but I'm really not sure how to substitute the ^ now.</p>\n\n<p>I think for each x in new, I have to add in %5E where the ^ is, then do the copyFromLocal. But how do I do that?</p>\n\n<p>Also, I'm running Python 2.6.6</p>\n"}, {"tags": ["python", "python-3.x", "cryptography", "pycrypto"], "comments": [{"owner": {"reputation": 1262, "user_id": 1039462, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e900d325da026737779c7e4fd790d3ab?s=128&d=identicon&r=PG", "display_name": "mat", "link": "https://stackoverflow.com/users/1039462/mat"}, "edited": false, "score": 1, "creation_date": 1568291045, "post_id": 57896901, "comment_id": 102233198, "body": "How long is your ciphertext? Can you post the encryption code?"}, {"owner": {"reputation": 3662, "user_id": 980807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24c69185b30a79d0c3d2c99e10d127c3?s=128&d=identicon&r=PG", "display_name": "Erwan Legrand", "link": "https://stackoverflow.com/users/980807/erwan-legrand"}, "edited": false, "score": 0, "creation_date": 1568307153, "post_id": 57896901, "comment_id": 102242078, "body": "SHA-256 is not a proper Key Derivation Function:<a href=\"https://pycryptodome.readthedocs.io/en/latest/src/protocol/kdf.html\" rel=\"nofollow noreferrer\">pycryptodome.readthedocs.io/en/latest/src/protocol/&zwnj;&#8203;kdf.html</a>  The CBC mode is considered obsolete. You should use a AEAD mode: <a href=\"https://pycryptodome.readthedocs.io/en/latest/src/cipher/modern.html\" rel=\"nofollow noreferrer\">pycryptodome.readthedocs.io/en/latest/src/cipher/modern.html</a>"}, {"owner": {"reputation": 3662, "user_id": 980807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24c69185b30a79d0c3d2c99e10d127c3?s=128&d=identicon&r=PG", "display_name": "Erwan Legrand", "link": "https://stackoverflow.com/users/980807/erwan-legrand"}, "reply_to_user": {"reputation": 1262, "user_id": 1039462, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e900d325da026737779c7e4fd790d3ab?s=128&d=identicon&r=PG", "display_name": "mat", "link": "https://stackoverflow.com/users/1039462/mat"}, "edited": false, "score": 0, "creation_date": 1568369500, "post_id": 57896901, "comment_id": 102260911, "body": "@mat Regarding the length of the cipher text, it can be deducted from the information provided by the OP. See my answer. A copy of the encryption code would indeed be useful!"}, {"owner": {"reputation": 3662, "user_id": 980807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24c69185b30a79d0c3d2c99e10d127c3?s=128&d=identicon&r=PG", "display_name": "Erwan Legrand", "link": "https://stackoverflow.com/users/980807/erwan-legrand"}, "edited": false, "score": 0, "creation_date": 1568369623, "post_id": 57896901, "comment_id": 102260980, "body": "The provided code sample does not run, since <code>secret_key</code> is not defined. Are <code>passw</code> and <code>secret_key</code>  supposed to be the same?"}, {"owner": {"reputation": 13, "user_id": 12055273, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d54bc1da1bbe0275922f09c230435ab3?s=128&d=identicon&r=PG&f=1", "display_name": "MrY", "link": "https://stackoverflow.com/users/12055273/mry"}, "edited": false, "score": 0, "creation_date": 1568396082, "post_id": 57896901, "comment_id": 102273670, "body": "<code>secret_key</code> is a variable that contains the actual key. I reformatted my original code to make it clear that <code>passw</code> is the same as <code>secret_key</code> to avoid confusion. <code>mail_pass</code> is the encrypted text while <code>secret_key</code> is the key required to decrypt."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 12055273, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d54bc1da1bbe0275922f09c230435ab3?s=128&d=identicon&r=PG&f=1", "display_name": "MrY", "link": "https://stackoverflow.com/users/12055273/mry"}, "edited": false, "score": 0, "creation_date": 1568312859, "post_id": 57911385, "comment_id": 102244397, "body": "Thanks for the response, Erwan. Using my code, would you be able to provide an example of your explanation so that I can better understand the direction you&#39;re giving?"}, {"owner": {"reputation": 3662, "user_id": 980807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24c69185b30a79d0c3d2c99e10d127c3?s=128&d=identicon&r=PG", "display_name": "Erwan Legrand", "link": "https://stackoverflow.com/users/980807/erwan-legrand"}, "reply_to_user": {"reputation": 13, "user_id": 12055273, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d54bc1da1bbe0275922f09c230435ab3?s=128&d=identicon&r=PG&f=1", "display_name": "MrY", "link": "https://stackoverflow.com/users/12055273/mry"}, "edited": false, "score": 0, "creation_date": 1568368920, "post_id": 57911385, "comment_id": 102260602, "body": "@MrY I have added a code example, but since you do not provide the encryption routine, this might not match your actual code."}, {"owner": {"reputation": 3662, "user_id": 980807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24c69185b30a79d0c3d2c99e10d127c3?s=128&d=identicon&r=PG", "display_name": "Erwan Legrand", "link": "https://stackoverflow.com/users/980807/erwan-legrand"}, "reply_to_user": {"reputation": 13, "user_id": 12055273, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d54bc1da1bbe0275922f09c230435ab3?s=128&d=identicon&r=PG&f=1", "display_name": "MrY", "link": "https://stackoverflow.com/users/12055273/mry"}, "edited": false, "score": 0, "creation_date": 1568369166, "post_id": 57911385, "comment_id": 102260725, "body": "@MrY Also, since it is obvious you do not know enough about cryptography, I think you should not use PyCryptodome or worse, the discontinued PyCrypto. Cryptography is hard. I suggest you use the foolproof pyNaCl instead: <a href=\"https://pynacl.readthedocs.io/en/stable/secret/\" rel=\"nofollow noreferrer\">pynacl.readthedocs.io/en/stable/secret</a>"}], "tags": [], "owner": {"reputation": 3662, "user_id": 980807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24c69185b30a79d0c3d2c99e10d127c3?s=128&d=identicon&r=PG", "display_name": "Erwan Legrand", "link": "https://stackoverflow.com/users/980807/erwan-legrand"}, "is_accepted": false, "score": 0, "last_activity_date": 1568368825, "last_edit_date": 1568368825, "creation_date": 1568307396, "answer_id": 57911385, "question_id": 57896901, "link": "https://stackoverflow.com/questions/57896901/decrypt-function-only-returns-partial-string-and-not-the-entire-value/57911385#57911385", "title": "Decrypt function only returns partial string and not the entire value", "body": "<p>You have not included the IV in the encrypted message. You are using the first encrypted block as the IV during decryption and as a result the data encrypted in the first block is lost.</p>\n\n<p>You must concatenate the IV and the cipher text in the encryption routine if you want this decryption routine to work:</p>\n\n<pre><code>enc = iv + cipher.encrypt(clear)\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 12055273, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d54bc1da1bbe0275922f09c230435ab3?s=128&d=identicon&r=PG&f=1", "display_name": "MrY", "link": "https://stackoverflow.com/users/12055273/mry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 185, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1568396143, "creation_date": 1568236557, "last_edit_date": 1568396143, "question_id": 57896901, "link": "https://stackoverflow.com/questions/57896901/decrypt-function-only-returns-partial-string-and-not-the-entire-value", "title": "Decrypt function only returns partial string and not the entire value", "body": "<p>I'm writing a test script which I'm using to try and decrypt an encrypted string I have the key to. However, while the code somewhat runs, it is not printing the full string/value that I am expecting (and know the result for).</p>\n\n<p>For example, rather than returning <code>ThisIsTheStringThatWorks</code> it is returning <code>atWorks</code></p>\n\n<p>Here is the code:</p>\n\n<pre class=\"lang-python prettyprint-override\"><code>import base64\nimport hashlib\nfrom Crypto.Cipher import AES\n\nBLOCK_SIZE = 16\nunpad = lambda s : s[0:-s[-1]]\n\ndef decrypt(enc, secret_key):\n    private_key = hashlib.sha256(secret_key.encode('utf-8')).digest()\n    enc = base64.b64decode(enc)\n    iv = enc[:BLOCK_SIZE]\n    cipher = AES.new(private_key, AES.MODE_CBC, iv)\n    return unpad(cipher.decrypt(enc[BLOCK_SIZE:]))\n\ndecrypted = decrypt(mail_pass, secret_key)\nprint(bytes.decode(decrypted))\n</code></pre>\n\n<p>Any help would be greatly appreciated. Thanks in advance.</p>\n"}, {"tags": ["python", "turtle-graphics", "hexagonal-tiles"], "answers": [{"tags": [], "owner": {"reputation": 64, "user_id": 8995336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wYyc4.png?s=128&g=1", "display_name": "Jonas Juhler", "link": "https://stackoverflow.com/users/8995336/jonas-juhler"}, "is_accepted": false, "score": 2, "last_activity_date": 1568237756, "creation_date": 1568237756, "answer_id": 57897110, "question_id": 57896899, "link": "https://stackoverflow.com/questions/57896899/drawing-a-triangle-using-only-a-grid-of-circles-python/57897110#57897110", "title": "Drawing a triangle using only a grid of circles, python", "body": "<p>I'm sure there is a smarter approach, but this is one way to do it:</p>\n\n<pre><code>import turtle\nwindow = turtle.Screen()\nmy_boi = turtle.Turtle()\nmy_boi.speed(0)\n\nfor (i,y) in enumerate(range(-200,200,50)):\n    for x in range(-200+(25*i),200-(25*i),50):\n       my_boi.penup()\n       my_boi.setposition(x,y)\n       my_boi.pendown()\n       my_boi.circle(20)\n\nwindow.exitonclick()\n\nturtle.done()\n</code></pre>\n\n<p>In the second for-loop the range is iteratively decreased by 1/2 of the circle diameter in each side.</p>\n"}, {"tags": [], "owner": {"reputation": 32921, "user_id": 5771269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6a5b618f5bd197150a6186318beba7?s=128&d=identicon&r=PG&f=1", "display_name": "cdlane", "link": "https://stackoverflow.com/users/5771269/cdlane"}, "is_accepted": false, "score": 0, "last_activity_date": 1568242321, "creation_date": 1568242321, "answer_id": 57897735, "question_id": 57896899, "link": "https://stackoverflow.com/questions/57896899/drawing-a-triangle-using-only-a-grid-of-circles-python/57897735#57897735", "title": "Drawing a triangle using only a grid of circles, python", "body": "<p>I'd simplify things somewhat:</p>\n\n<pre><code>from turtle import Screen, Turtle\n\nwindow = Screen()\n\nmy_boi = Turtle()\nmy_boi.speed('fastest')\nmy_boi.penup()\n\nfor y in range(1, 9):\n    my_boi.setposition(-25 * y + 25, 50 * y - 250)\n\n    for x in range(y):\n        my_boi.pendown()\n        my_boi.circle(20)\n        my_boi.penup()\n        my_boi.forward(50)\n\nmy_boi.hideturtle()\nwindow.exitonclick()\n</code></pre>\n\n<p>Only the starting position of each row has to be calculated and placed via <code>setposition()</code>.  The column positions can be a simple <code>forward()</code> statement.</p>\n"}], "owner": {"reputation": 19, "user_id": 12055280, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-LvxBAWpfvSg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdcxU9aTca3mveV0KV8Y8mced2bjg/photo.jpg?sz=128", "display_name": "thebadcodeguy", "link": "https://stackoverflow.com/users/12055280/thebadcodeguy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 759, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1568247031, "creation_date": 1568236551, "last_edit_date": 1568247031, "question_id": 57896899, "link": "https://stackoverflow.com/questions/57896899/drawing-a-triangle-using-only-a-grid-of-circles-python", "title": "Drawing a triangle using only a grid of circles, python", "body": "<p>I have to make a change to this specific code, which produces a square grid of circles, I have to change the code to make a triangle grid of circles.</p>\n\n<pre><code>import turtle\nwindow = turtle.Screen()\nmy_boi = turtle.Turtle()\nmy_boi.speed(0)\nfor y in range(-200,200,50):\n    for x in range(-200,200,50):\n       my_boi.penup()\n       my_boi.setposition(x,y)\n       my_boi.pendown()\n       my_boi.circle(20)\nwindow.exitonclick()\n</code></pre>\n"}, {"tags": ["python", "excel"], "comments": [{"owner": {"reputation": 25463, "user_id": 5003756, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8BUMb.jpg?s=128&g=1", "display_name": "James", "link": "https://stackoverflow.com/users/5003756/james"}, "edited": false, "score": 1, "creation_date": 1568236865, "post_id": 57896890, "comment_id": 102214959, "body": "What have you tried so far?  Please post your code"}, {"owner": {"reputation": 31, "user_id": 12054820, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7cbc488524cf553fe95243629ff81f3d?s=128&d=identicon&r=PG&f=1", "display_name": "okeyiaj", "link": "https://stackoverflow.com/users/12054820/okeyiaj"}, "reply_to_user": {"reputation": 25463, "user_id": 5003756, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8BUMb.jpg?s=128&g=1", "display_name": "James", "link": "https://stackoverflow.com/users/5003756/james"}, "edited": false, "score": 0, "creation_date": 1568237311, "post_id": 57896890, "comment_id": 102215094, "body": "@James i can only open the workbook, cannot find the dynamic value reference"}, {"owner": {"reputation": 2680, "user_id": 4440387, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/D6s38.png?s=128&g=1", "display_name": "Denis Rasulev", "link": "https://stackoverflow.com/users/4440387/denis-rasulev"}, "edited": false, "score": 0, "creation_date": 1569131669, "post_id": 57896890, "comment_id": 102492260, "body": "It would be nice to see data sample (Excel file with cell for Phone Number) and at least single attempt of yours to get the data by code."}], "owner": {"reputation": 31, "user_id": 12054820, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7cbc488524cf553fe95243629ff81f3d?s=128&d=identicon&r=PG&f=1", "display_name": "okeyiaj", "link": "https://stackoverflow.com/users/12054820/okeyiaj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 18, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1569132088, "creation_date": 1568236510, "last_edit_date": 1569132088, "question_id": 57896890, "link": "https://stackoverflow.com/questions/57896890/how-to-use-openpyxl-to-find-a-cell-with-a-specific-value", "title": "How to use openpyxl to find a cell with a specific value?", "body": "<p>I have many Excel files, and I want to get the cell reference of the cell, for each file containing <code>Phone Number</code>.</p>\n\n<p>The problem is, the position of this cell reference changes with each file.</p>\n\n<p>I'm able to load the workbook but stuck after </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from openpyxl import *\nwb = load_workbook('Workbook', data_only=True)\nwb_sheet = wb['Sheet1']\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "list", "unpack", "iterable-unpacking"], "comments": [{"owner": {"reputation": 1434, "user_id": 7212665, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KrLoI.jpg?s=128&g=1", "display_name": "Demi-Lune", "link": "https://stackoverflow.com/users/7212665/demi-lune"}, "edited": false, "score": 0, "creation_date": 1568239289, "post_id": 57896860, "comment_id": 102215568, "body": "Option 3 is the one that <code>2to3</code> uses (see e.g. <code>echo &quot;zip([1],[2])&quot; | 2to3 -</code>), so that would vote in its favor."}, {"owner": {"reputation": 3240, "user_id": 10157759, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-c9NabIUCJts/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7oyzFAfLJNxPqTgYUMTb4PPAZ7N5Q/mo/photo.jpg?sz=128", "display_name": "GZ0", "link": "https://stackoverflow.com/users/10157759/gz0"}, "reply_to_user": {"reputation": 4972, "user_id": 10824407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32862a03314e434224acf280c38e6e68?s=128&d=identicon&r=PG&f=1", "display_name": "Olvin Roght", "link": "https://stackoverflow.com/users/10824407/olvin-roght"}, "edited": false, "score": 1, "creation_date": 1568239386, "post_id": 57896860, "comment_id": 102215589, "body": "@OlvinRoght In all my past tests on Python 3 <code>[*it]</code> is always the fastest. It is slightly faster than <code>list(it)</code> because the latter has a small overhead of looking up the <code>list</code> function. However the difference is tiny and only becomes visible when the size of output list is small."}], "answers": [{"tags": [], "owner": {"reputation": 2684, "user_id": 4551945, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tphYr.jpg?s=128&g=1", "display_name": "Matt L.", "link": "https://stackoverflow.com/users/4551945/matt-l"}, "is_accepted": false, "score": 9, "last_activity_date": 1568237119, "creation_date": 1568237119, "answer_id": 57896998, "question_id": 57896860, "link": "https://stackoverflow.com/questions/57896860/pythonic-way-to-unpack-an-iterator-inside-of-a-list/57896998#57896998", "title": "Pythonic way to unpack an iterator inside of a list", "body": "<p>This might be a repeat of <a href=\"https://stackoverflow.com/questions/3790848/fastest-way-to-convert-an-iterator-to-a-list\">Fastest way to convert an iterator to a list</a>, but your question is a bit different since you ask which is the most Pythonic. The accepted answer is <code>list(my_iterator)</code> over <code>[e for e in my_iterator]</code> because the prior runs in C under the hood. One commenter suggests <code>[*my_iterator]</code> is faster than <code>list(my_iterator)</code>, so you might want to test that. My general vote is that they are all equally Pythonic, so I'd go with the faster of the two for your use case. It's also possible that the older answer is out of date.</p>\n"}, {"tags": [], "owner": {"reputation": 15239, "user_id": 3161575, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/V5D7Z.png?s=128&g=1", "display_name": "kederrac", "link": "https://stackoverflow.com/users/3161575/kederrac"}, "is_accepted": true, "score": 5, "last_activity_date": 1568470427, "creation_date": 1568470427, "answer_id": 57936319, "question_id": 57896860, "link": "https://stackoverflow.com/questions/57896860/pythonic-way-to-unpack-an-iterator-inside-of-a-list/57936319#57936319", "title": "Pythonic way to unpack an iterator inside of a list", "body": "<p>After exploring more the subject I've come with some conclusions.</p>\n\n<blockquote>\n  <p>There should be one-- and preferably only one --obvious way to do it</p>\n</blockquote>\n\n<p>(<a href=\"https://legacy.python.org/dev/peps/pep-0020/\" rel=\"noreferrer\">zen of python</a>) </p>\n\n<p>Deciding which option is the \"pythonic\" one should take into consideration some criteria : </p>\n\n<ul>\n<li>how explicit,</li>\n<li>simple,</li>\n<li>and readable it is.</li>\n</ul>\n\n<p>And the obvious \"pythonic\" option winning in all criteria is option number 3):</p>\n\n<blockquote>\n  <p>list = list(my_iterator)</p>\n</blockquote>\n\n<p>Here is why is \"obvious\" that no 3) is the pythonic one:</p>\n\n<ul>\n<li>Option  3) is close to natural language making you to 'instantly'\nthink what is the output.</li>\n<li>Option 2) (using list comprehension) if you see for the first time \nthat line of code will take you to read a little bit more and to pay\na bit more attention. For example, I use list comprehension when I\nwant to add some extra steps(calling a function with the iterated\nelements or having some checking using if statement), so when I see a\nlist comprehension I check for any possible function call inside or\nfor any if statment.</li>\n<li><p>option 1) (unpacking using *) asterisk operator can be a bit confusing\nif you don't  use it regularly, there are <a href=\"https://medium.com/understand-the-python/understanding-the-asterisk-of-python-8b9daaa4a558\" rel=\"noreferrer\">4 cases for using the\nasterisk in Python</a>:</p>\n\n<ol>\n<li>For multiplication and power operations.</li>\n<li>For repeatedly extending the list-type containers.</li>\n<li>For using the variadic arguments. (so-called \u201cpacking\u201d) </li>\n<li>For unpacking the containers.</li>\n</ol></li>\n</ul>\n\n<p>Another good argument is <a href=\"https://docs.python.org/3/download.html\" rel=\"noreferrer\">python docs</a> themselves, I have done some statistics to check which options are chosen by the docs, for this I've chose 4 buil-in iterators and everything from the module <a href=\"https://docs.python.org/3.7/library/itertools.html\" rel=\"noreferrer\">itertools</a> (that are used like: <code>itertools.</code>) to see how they are unpacked in a list:</p>\n\n<ul>\n<li>map</li>\n<li>range</li>\n<li>filter</li>\n<li>enumerate</li>\n<li>itertools.</li>\n</ul>\n\n<p>After exploring the docs I found: 0 iterators unpacked in a list using option 1) and 2) and 35 using option 3).</p>\n\n<p><a href=\"https://i.stack.imgur.com/oQVYt.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/oQVYt.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>Conclusion</strong> : </p>\n\n<blockquote>\n  <p>The pythonic way to unpack an iterator inside of a list is: <code>my_list = list(my_iterator)</code></p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 1685, "user_id": 1642041, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50c6a5e2aeda64b15bf5728ca823f002?s=128&d=identicon&r=PG", "display_name": "Robert Co", "link": "https://stackoverflow.com/users/1642041/robert-co"}, "is_accepted": false, "score": 1, "last_activity_date": 1568564074, "creation_date": 1568564074, "answer_id": 57945933, "question_id": 57896860, "link": "https://stackoverflow.com/questions/57896860/pythonic-way-to-unpack-an-iterator-inside-of-a-list/57945933#57945933", "title": "Pythonic way to unpack an iterator inside of a list", "body": "<p>I tend to use zip if I need to convert a list to a dictionary or use it as a key-value pair in a loop or list comprehension. </p>\n\n<p>However, if this is only for illustration to create an iterator. I will definitely vote for <strong>#3</strong> for clarity.</p>\n"}, {"tags": [], "owner": {"reputation": 69906, "user_id": 6890912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d291e4dfbf14dcc8874bd4fa620fac23?s=128&d=identicon&r=PG&f=1", "display_name": "blhsing", "link": "https://stackoverflow.com/users/6890912/blhsing"}, "is_accepted": false, "score": 2, "last_activity_date": 1568703509, "last_edit_date": 1568703509, "creation_date": 1568669080, "answer_id": 57964600, "question_id": 57896860, "link": "https://stackoverflow.com/questions/57896860/pythonic-way-to-unpack-an-iterator-inside-of-a-list/57964600#57964600", "title": "Pythonic way to unpack an iterator inside of a list", "body": "<p>If you're interested in the least amount of typing possible, you can actually do one character better than <code>my_list = [*my_iterator]</code> with iterable unpacking:</p>\n\n<pre><code>*my_list, = my_iterator\n</code></pre>\n\n<p>or (although this only equals <code>my_list = [*my_iterator]</code> in the number of characters):</p>\n\n<pre><code>[*my_list] = my_iterator\n</code></pre>\n\n<p>(Funny how it has the same effect as <code>my_list = [*my_iterator]</code>.)</p>\n\n<p>For the most Pythonic solution, however, <code>my_list = list(my_iterator)</code> is clearly the clearest and the most readable of all, and should therefore be considered the most Pythonic.</p>\n"}, {"tags": [], "owner": {"reputation": 3240, "user_id": 10157759, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-c9NabIUCJts/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7oyzFAfLJNxPqTgYUMTb4PPAZ7N5Q/mo/photo.jpg?sz=128", "display_name": "GZ0", "link": "https://stackoverflow.com/users/10157759/gz0"}, "is_accepted": false, "score": 2, "last_activity_date": 1568730732, "last_edit_date": 1568730732, "creation_date": 1568695226, "answer_id": 57967453, "question_id": 57896860, "link": "https://stackoverflow.com/questions/57896860/pythonic-way-to-unpack-an-iterator-inside-of-a-list/57967453#57967453", "title": "Pythonic way to unpack an iterator inside of a list", "body": "<p>While the unpacking operator <code>*</code> is not often used for unpacking a single iterable into a list (therefore <code>[*it]</code> is a bit less readable than <code>list(it)</code>), it is handy and more Pythonic in several other cases:</p>\n\n<h3>1. Unpacking an iterable into a single list / tuple / set, adding other values:</h3>\n\n\n\n<pre><code>mixed_list = [a, *it, b]\n</code></pre>\n\n<p>This is more concise and efficient than</p>\n\n<pre><code>mixed_list = [a]\nmixed_list.extend(it)\nmixed_list.append(b)\n</code></pre>\n\n<h3>2. Unpacking multiple iterables + values into a list / tuple / set</h3>\n\n\n\n<pre><code>mixed_list = [*it1, *it2, a, b, ... ]\n</code></pre>\n\n<p>This is similar to the first case.</p>\n\n<h3>3. Unpacking an iterable into a list, excluding elements</h3>\n\n\n\n<pre><code>first, *rest = it\n</code></pre>\n\n<p>This extracts the first element of <code>it</code> into <code>first</code> and unpacks the rest into a list. One can even do</p>\n\n<pre><code>_, *mid, last = it\n</code></pre>\n\n<p>This dumps the first element of <code>it</code> into a don't-care variable <code>_</code>, saves last element into <code>last</code>, and unpacks the rest into a list <code>mid</code>.</p>\n\n<h3>4. Nested unpacking of multiple levels of an iterable in one statement</h3>\n\n<pre><code>it = (0, range(5), 3)\na1, (*a2,), a3 = it          # Unpack the second element of it into a list a2\ne1, (first, *rest), e3 = it  # Separate the first element from the rest while unpacking it[1]\n</code></pre>\n\n<p>This can also be used in <code>for</code> statements:</p>\n\n<pre><code>from itertools import groupby\n\ns = \"Axyz123Bcba345D\"\nfor k, (first, *rest) in groupby(s, key=str.isalpha):\n    ...\n</code></pre>\n"}], "owner": {"reputation": 15239, "user_id": 3161575, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/V5D7Z.png?s=128&g=1", "display_name": "kederrac", "link": "https://stackoverflow.com/users/3161575/kederrac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1851, "favorite_count": 5, "accepted_answer_id": 57936319, "answer_count": 5, "score": 5, "last_activity_date": 1570765434, "creation_date": 1568236344, "last_edit_date": 1570765434, "question_id": 57896860, "link": "https://stackoverflow.com/questions/57896860/pythonic-way-to-unpack-an-iterator-inside-of-a-list", "title": "Pythonic way to unpack an iterator inside of a list", "body": "<p>I'm trying to figure out what is the <a href=\"https://legacy.python.org/dev/peps/pep-0020/\" rel=\"nofollow noreferrer\">pythonic</a> way to unpack an iterator inside of a list.</p>\n\n<p>For example: </p>\n\n<pre><code>my_iterator = zip([1, 2, 3, 4], [1, 2, 3, 4])\n</code></pre>\n\n<p>I have come with the following ways to unpack my iterator inside of a list:</p>\n\n<p>1)</p>\n\n<pre><code>my_list = [*my_iterator]\n</code></pre>\n\n<p>2) </p>\n\n<pre><code>my_list = [e for e in my_iterator]\n</code></pre>\n\n<p>3) </p>\n\n<pre><code>my_list = list(my_iterator)\n</code></pre>\n\n<p>No 1) is my favorite way to do it since is less code, but I'm wondering if this is also the pythonic way. Or maybe there is another way to achieve this besides those 3 which is the pythonic way?</p>\n"}, {"tags": ["python", "sqlalchemy"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1568236808, "post_id": 57896845, "comment_id": 102214941, "body": "I think you&#39;d find <a href=\"https://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-viii-followers\" rel=\"nofollow noreferrer\">this chapter</a> of the Flask Mega Tutorial useful. You don&#39;t have an association table or a <code>secondaryjoin</code>"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1568236948, "post_id": 57896845, "comment_id": 102214989, "body": "Although, I&#39;ll grant that I&#39;ve only just discovered <code>remote_side</code> so perhaps that is a step backwards in fixing this"}], "owner": {"reputation": 11, "user_id": 8910588, "user_type": "registered", "profile_image": "https://graph.facebook.com/2125471394347044/picture?type=large", "display_name": "Coni Lagunas C&#225;ceres", "link": "https://stackoverflow.com/users/8910588/coni-lagunas-c%c3%a1ceres"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1568240623, "creation_date": 1568236251, "last_edit_date": 1568240623, "question_id": 57896845, "link": "https://stackoverflow.com/questions/57896845/self-reference-not-working-on-flask-sqlalchemy", "title": "Self-reference not working on Flask (SQLAlchemy)", "body": "<p>I'm using Flask and SQLAlchemy to create a web app and I'm having troubles with self-reference. On my project I have companies (model), a company can have a provider (another company) or not. If one company is a provider, that company should have a list of clients (every company that it provides services). </p>\n\n<p>Using SQLAlchemy Documentation I've tried to make this self-reference relationship.</p>\n\n<p>This are my models:</p>\n\n<pre><code>from flask_login import UserMixin\nfrom . import db\n\nclass Organization(db.Model):\n    id = db.Column(db.Integer, primary_key=True)\n    rut = db.Column(db.String(10), unique=True)\n    name = db.Column(db.String(100))\n    users = db.relationship('User', backref='organization', lazy=True)\n\nclass Company(db.Model):\n    id = db.Column(db.Integer, primary_key=True)\n    code = db.Column(db.String(100), unique=True)\n    name = db.Column(db.String(100))\n    provider_id = db.Column(db.Integer, db.ForeignKey('company.id'), nullable=True)\n    clients = db.relationship('Company', remote_side=[id])\n    users = db.relationship('User', backref='company', lazy=False)\n\nclass User(UserMixin, db.Model):\n    id = db.Column(db.Integer, primary_key=True)\n    email = db.Column(db.String(100), unique=True)\n    password = db.Column(db.String(100))\n    name = db.Column(db.String(1000))\n    last_name = db.Column(db.String(1000))\n    organization_id = db.Column(db.Integer, db.ForeignKey('organization.id'), nullable=False)\n    company_id = db.Column(db.Integer, db.ForeignKey('company.id'), nullable=True)\n    is_admin = db.Column(db.Boolean, default=False)\n    is_active = db.Column(db.Boolean, default=False)\n</code></pre>\n\n<p>The problem is that, even though I can register the provider_id (provider company) I cannot relate this with the clients field on the provider object. So If I have this company #1 which is company #2's provider, and I check the company #1's clients it's empty. Any ideas of what am I doing wrong?\nThis is my first time working with Flask and SQLAlchemy.\nAnd I need to set up the list of clients because to delete companies I want to be able to delete just the ones with no clients.</p>\n"}, {"tags": ["python", "seaborn"], "comments": [{"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1568236788, "post_id": 57896802, "comment_id": 102214933, "body": "<code>index_col=&#39;date&#39;,</code> means that <code>&#39;date&#39;</code> will be the dataframe&#39;s index. But if it is the index it&#39;s not a column in <code>test_data</code>; so seaborn cannot know which column you want to use. I guess the best test for yourself is: Can I print <code>test_data[&quot;date&quot;]</code>? If not, forget about seaborn and make sure it&#39;s a column first"}, {"owner": {"reputation": 4216, "user_id": 1061892, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/7b6d4763e82634d7097df386b8573727?s=128&d=identicon&r=PG&f=1", "display_name": "cphill", "link": "https://stackoverflow.com/users/1061892/cphill"}, "reply_to_user": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1568306017, "post_id": 57896802, "comment_id": 102241614, "body": "@ImportanceOfBeingErnest thank you for explanation. I see exactly what you mean and that was the issue"}], "owner": {"reputation": 4216, "user_id": 1061892, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/7b6d4763e82634d7097df386b8573727?s=128&d=identicon&r=PG&f=1", "display_name": "cphill", "link": "https://stackoverflow.com/users/1061892/cphill"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 139, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1568235987, "creation_date": 1568235987, "question_id": 57896802, "link": "https://stackoverflow.com/questions/57896802/seaborn-not-accepting-datetime-value", "title": "Seaborn Not Accepting Datetime value", "body": "<p>I have a data frame that has a <code>DateTime</code> column that I am trying to use for my plot visualization, but I am thrown an error when setting the column as my x-axis. I noticed in the documentation where <code>lineplot</code> accepts a number, not a datetime, but that seems strange to me as I have seen seaborn graphs with dates as the x-axis label. Is there something that I am doing wrong?</p>\n\n<pre><code>test_data = pd.read_csv('organic-sessions.csv', header=0, index_col='date', parse_dates=['date'])\ntest_data.info()\n\n&lt;class 'pandas.core.frame.DataFrame'&gt;\nDatetimeIndex: 730 entries, 2018-01-01 to 2019-12-31\nData columns (total 1 columns):\norganic    274 non-null float64\ndtypes: float64(1)\nmemory usage: 11.4 KB\n\nsns.lineplot(x='date', y=\"organic\", legend='full', data=test_data)\n\nValueError: Could not interpret input 'date'\n</code></pre>\n"}, {"tags": ["python", "pandas", "dataframe"], "answers": [{"tags": [], "owner": {"reputation": 26154, "user_id": 11884237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7d7q4.png?s=128&g=1", "display_name": "ansev", "link": "https://stackoverflow.com/users/11884237/ansev"}, "is_accepted": false, "score": 1, "last_activity_date": 1568241884, "last_edit_date": 1568241884, "creation_date": 1568239778, "answer_id": 57897427, "question_id": 57896767, "link": "https://stackoverflow.com/questions/57896767/fetch-values-using-reference-dataframe-from-another-dataframe-and-apply-calulati/57897427#57897427", "title": "fetch values using reference dataframe from another dataframe and apply calulation", "body": "<p>if your <code>DataFrame</code> are:</p>\n\n<pre><code>df1 = pd.DataFrame({'Field_Name' : ['W_LD(1)', 'R_LD(3)', 'WMEAS_LD(1)', 'WMEAS_LD(2)','W_LN(1)','WMEAS_LN(1)'],\n                    'Field_Type' : ['est', 'est', 'meas', 'meas','est','meas'], \n                    'Unit' : ['mw', 'mv', 'mw', 'mw','mw','mw'], \n                    'Asset_Name' : ['LD(1)', 'LD(3)', 'LD(1)', 'LD(2)','LN(1)','LN(1)']})\n\ndf2=pd.DataFrame({'Device_names':['W_LD(1)','R_LD(3)','WMEAS_LD(1)','WMEAS_LD(2)','W_LN(1)','WMEAS_LN(1)'],\n                  'Timestamp':['2.2','3.3','1.2','3.4','2.3','4.5']})\n</code></pre>\n\n<p><strong>1.Solution.</strong></p>\n\n<pre><code>groups=df1.groupby(df1['Asset_Name'])\ndf1['Timestamp']=df1['Field_Name'].map(df2.set_index('Device_names')['Timestamp'])\ndf1['Timestamp']=[float(key) for key in df1['Timestamp']]\ndf1.sort_values('Timestamp',inplace=True)\ndf1.reset_index(drop=True,inplace=True)\ndf1['subtract']=groups['Timestamp'].diff()\ndf1['subtract']=groups['subtract'].transform('first')\n</code></pre>\n\n<hr>\n\n<p><strong>2.Explanation.</strong></p>\n\n<p><a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.groupby.html\" rel=\"nofollow noreferrer\">groupby</a> to calculate the subtraction for each group:</p>\n\n<pre><code>groups=df1.groupby(df1['Asset_Name'])\n</code></pre>\n\n<p>first insert the <code>Timestamp</code> column in <code>df1</code> in the correct order using <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.map.html\" rel=\"nofollow noreferrer\">Series.map</a>.\nOrder using <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.sort_values.html\" rel=\"nofollow noreferrer\">DataFrame.sort_values</a> \u200b\u200bto get the subtraction with a positive sign</p>\n\n<pre><code>df1['Timestamp']=df1['Field_Name'].map(df2.set_index('Device_names')['Timestamp'])\ndf1['Timestamp']=[float(key) for key in df1['Timestamp']]\ndf1.sort_values('Timestamp',inplace=True)\ndf1.reset_index(drop=True,inplace=True)\n</code></pre>\n\n<p>then using <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.core.groupby.DataFrameGroupBy.diff.html\" rel=\"nofollow noreferrer\">groupby.DataFrameGroupBy.diff</a>:</p>\n\n<pre><code>df1['subtract']=groups['Timestamp'].diff()\nprint(df1)\n\n\n    Field_Name Field_Type Unit Asset_Name  Timestamp  subtract\n0  WMEAS_LD(1)       meas   mw      LD(1)        1.2       NaN\n1      W_LD(1)        est   mw      LD(1)        2.2       1.0\n2      W_LN(1)        est   mw      LN(1)        2.3       NaN\n3      R_LD(3)        est   mv      LD(3)        3.3       NaN\n4  WMEAS_LD(2)       meas   mw      LD(2)        3.4       NaN\n5  WMEAS_LN(1)       meas   mw      LN(1)        4.5       2.2\n</code></pre>\n\n<p>Then use <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.transform.html\" rel=\"nofollow noreferrer\">transform</a>:</p>\n\n<pre><code>df1['subtract']=groups['subtract'].transform('first')\nprint(df1)\n\n    Field_Name Field_Type Unit Asset_Name  Timestamp  subtract\n0  WMEAS_LD(1)       meas   mw      LD(1)        1.2       1.0\n1      W_LD(1)        est   mw      LD(1)        2.2       1.0\n2      W_LN(1)        est   mw      LN(1)        2.3       2.2\n3      R_LD(3)        est   mv      LD(3)        3.3       NaN\n4  WMEAS_LD(2)       meas   mw      LD(2)        3.4       NaN\n5  WMEAS_LN(1)       meas   mw      LN(1)        4.5       2.2\n</code></pre>\n"}], "owner": {"reputation": 85, "user_id": 10422686, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/237e49249ed49ed8c3a9a277988c7a40?s=128&d=identicon&r=PG&f=1", "display_name": "anmol", "link": "https://stackoverflow.com/users/10422686/anmol"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1568241884, "creation_date": 1568235755, "last_edit_date": 1568236512, "question_id": 57896767, "link": "https://stackoverflow.com/questions/57896767/fetch-values-using-reference-dataframe-from-another-dataframe-and-apply-calulati", "title": "fetch values using reference dataframe from another dataframe and apply calulation", "body": "<p>I have two dataframes one dataframes containes four column names as Field_name, field_Type, Unit_Measurement, and Asset Name. and another dataframe contains all the field_name in single row and their corressponding values in the another row. \nAn example </p>\n\n<pre><code>import pandas as pd\ndf1 = pd.DataFrame({'Field_Name' : ['W_LD(1)', 'R_LD(3)', 'WMEAS_LD(1)', 'WMEAS_LD(2)','W_LN(1)','WMEAS_LN(1)'],\n                    'Field_Type' : [est, est, meas, meas,est,meas], \n                    'Unit' : ['mw', 'mv', 'mw', 'mw','mw','mw'], \n                    'Asset_Name' : ['LD(1)', 'LD(3)', 'LD(1)', 'LD(2)','LN(1)','LN(1)']})\n\n\nSecond Dataframe [all the infromation rowwise]\nimport pandas as pd\ndf2=pd.Dataframe({['Device_names','W_LD(1)','R_LD(3)','WMEAS_LD(1)','WMEAS_LD(2)','W_LN(1)','WMEAS_LN(1)'],\n                  ['Timestamp','2.2','3.3','1.2','3.4','2.3','4.5']})\n</code></pre>\n\n<p>Now, We have two dataframes. \nSo, basically I have to check if the field type is estimated or measurement, asset_name if LD(1) and Unit is'mw' or 'mv'. </p>\n\n<p>Based on these conditions I have to fetch W_LD(1) and WMEAS_LD(1) from the second dataframe and subtract these two values then the output will be  (3.4-2.2)=1.2. this is for one device, similarly i have to do for multiple devices.</p>\n"}, {"tags": ["python", "jsonschema"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 6916695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f64732c47f0f39d1550010f0f7f49ceb?s=128&d=identicon&r=PG&f=1", "display_name": "kal", "link": "https://stackoverflow.com/users/6916695/kal"}, "edited": false, "score": 1, "creation_date": 1568733650, "post_id": 57897013, "comment_id": 102364418, "body": "Thank you for your solution! It helped me"}, {"owner": {"reputation": 753, "user_id": 4803555, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/987de0ad150cc5d480bde50a580373a4?s=128&d=identicon&r=PG&f=1", "display_name": "Buckeye14Guy", "link": "https://stackoverflow.com/users/4803555/buckeye14guy"}, "reply_to_user": {"reputation": 13, "user_id": 6916695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f64732c47f0f39d1550010f0f7f49ceb?s=128&d=identicon&r=PG&f=1", "display_name": "kal", "link": "https://stackoverflow.com/users/6916695/kal"}, "edited": false, "score": 0, "creation_date": 1568743056, "post_id": 57897013, "comment_id": 102368660, "body": "very happy to hear that. np"}], "tags": [], "owner": {"reputation": 753, "user_id": 4803555, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/987de0ad150cc5d480bde50a580373a4?s=128&d=identicon&r=PG&f=1", "display_name": "Buckeye14Guy", "link": "https://stackoverflow.com/users/4803555/buckeye14guy"}, "is_accepted": true, "score": 1, "last_activity_date": 1568237694, "last_edit_date": 1568237694, "creation_date": 1568237151, "answer_id": 57897013, "question_id": 57896753, "link": "https://stackoverflow.com/questions/57896753/how-to-write-validator-method-to-validate-the-json-element-data-with-python/57897013#57897013", "title": "how to write validator method to validate the json element data with python", "body": "<p>So I am going to give an answer that relies on a 3rd party package that I really really like. I did not contribute to it but I have used it and it is very useful especially for the type of validation here. </p>\n\n<p>Yes you can create a custom validator like</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import json\nimport typing\n\n# here json_data is the data in your question\ndef custom_validator(json_data: typing.Dict):\n    string_attributes = [\"id\", \"name\", \"cake_name\", \"status\", \"time\", \"LA:TB2342\", \"LA:TB2341\", \"LA:TB2344\"]\n    int_attributes = [...]\n    float_attributes = [...]\n    validations_errors = []\n    for attribute in string_attributes:\n        if attribute in json_data:\n            if attribute in string_attributes and not isinstance(json_data.get(attribute), str):\n                validations_errors.append(f\"key {attribute} is not a string, got {json_data.get(attribute)}\")\n                ...\n</code></pre>\n\n<p>This can quickly get out of hand. Perhaps you can spend more time to make it pretty etc.</p>\n\n<p>BUT, I highly suggest that you read up on <a href=\"https://docs.python.org/3/library/dataclasses.html\" rel=\"nofollow noreferrer\">dataclasses</a> and <a href=\"https://pydantic-docs.helpmanual.io/\" rel=\"nofollow noreferrer\">pydantic</a></p>\n\n<p>Here is the solution I would use</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import json\nimport typing\nfrom pydantic import BaseModel\n\n# if you look closely, this just represents those tiny dictionaries in your list\nclass Anticipation(BaseModel):\n    time: str\n    points: float\n    top_properties: typing.Dict[str, float]\n    status: int\n    alert: bool\n\n# this is the whole thing, note how we say that anticipations is a list of those objects we defined above\nclass Data(BaseModel):\n    id: str\n    name: str\n    cake_name: \"str\"\n    metric: float\n    anticipations: typing.List[Anticipation]\n\njson_data = \"\"\"{\n  \"id\": null,\n  \"name\": \"name\",\n  \"cake_name\": \"test\",\n  \"metric\": 0.5,\n  \"anticipations\": [\n    {\n      \"time\": \"2018-01-01 00:00:00\",\n      \"points\": 0.49128797804879504,\n      \"top_properties\": {\n        \"LA:TB2341\": 0.23,\n        \"LA:TB2342\": 0.23,\n        \"LA:TB2343\": 0.23\n      },\n      \"status\": 0,\n      \"alert\": false\n    },\n    {\n      \"time\": \"2018-01-02 00:00:00\",\n      \"points\": 0.588751186433263,\n      \"top_properties\": {\n        \"LA:TB2342\": 0.23,\n        \"LA:TB2341\": 0.23,\n        \"LA:TB2344\": 0.23\n      },\n      \"status\": null,\n      \"alert\": true\n    }\n  ]\n}\n\"\"\"\ndata = json.loads(json_data)\ndata = Data(**data)\n</code></pre>\n\n<p>I changed <code>id</code> to <code>null</code> and <code>status</code> to <code>null</code> in the last anticipation. If you run this, it will fail and show you this message. Which is fairly useful</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>pydantic.error_wrappers.ValidationError: 2 validation errors\nid\n  none is not an allowed value (type=type_error.none.not_allowed)\nanticipations -&gt; 1 -&gt; status\n  value is not a valid integer (type=type_error.integer)\n</code></pre>\n\n<p>Obviously this means that you will have to install a 3rd party package and for a new python coder people would suggest not to do that. In that case, the template below should point you in the right direction</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def validate(my_dict: typing.Dict, string_attributes, int_attributes, float_attributes):\n    validations_errors = []\n    for attribute in string_attributes:\n        if attribute in my_dict:\n            if attribute in string_attributes and not isinstance(my_dict.get(attribute), str):\n                validations_errors.append(f\"key {attribute} is not a string, got {my_dict.get(attribute)}\")\n            if attribute in int_attributes and not isinstance(my_dict.get(attribute), int):\n                # append to the list of errors\n                pass\n    return validations_errors\n\n\ndef custom_validator(json_data: typing.Dict):\n    string_attributes = [\"id\", \"name\", \"cake_name\", \"time\", \"LA:TB2342\", \"LA:TB2341\", \"LA:TB2344\"]\n    int_attributes = [...]\n    float_attributes = [...]\n\n    # now do it for anticipations\n    validation_errors = validate(json_data, string_attributes, int_attributes, float_attributes)\n    for i, anticipation in enumerate(json_data.get('anticipations')):\n        validation_error = validate(anticipation, string_attributes, int_attributes, float_attributes)\n        if validation_error:\n            validation_errors.append(f\"anticipation -&gt; {i} error: {validation_error}\")\n\n    return validation_errors\n</code></pre>\n\n<pre class=\"lang-py prettyprint-override\"><code>data = json.loads(json_data)\ncustom_validator(data)\n</code></pre>\n\n<p>Output: <code>['key id is not a string, got None']</code></p>\n\n<p>You can build up on that function</p>\n"}], "owner": {"reputation": 13, "user_id": 6916695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f64732c47f0f39d1550010f0f7f49ceb?s=128&d=identicon&r=PG&f=1", "display_name": "kal", "link": "https://stackoverflow.com/users/6916695/kal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1250, "favorite_count": 0, "accepted_answer_id": 57897013, "answer_count": 1, "score": 0, "last_activity_date": 1568238016, "creation_date": 1568235690, "last_edit_date": 1568238016, "question_id": 57896753, "link": "https://stackoverflow.com/questions/57896753/how-to-write-validator-method-to-validate-the-json-element-data-with-python", "title": "how to write validator method to validate the json element data with python", "body": "<p>I'm new to python and trying to writing a python script using jsonschema to validate a huge json output file's schema. Want to make sure my json file doesn't have any null values in it. </p>\n\n<p>Wrote a method to read the schema json file and the output json file, now passed them both to validate function. There are many repeating objects in the json file. Then realized that I should write validator function/class to pass each object and keep validating them in a loop.But stuck here not sure how to do that</p>\n\n<pre><code>{\n  \"id\": \"test\",\n  \"name\": \"name\",\n  \"cake_name\": \"test\",\n  \"metric\": 0.5,\n  \"anticipations\": [\n    {\n      \"time\": \"2018-01-01 00:00:00\",\n      \"points\": 0.49128797804879504,\n      \"top_properties\": {\n        \"LA:TB2341\": 0.23,\n        \"LA:TB2342\": 0.23,\n        \"LA:TB2343\": 0.23\n      },\n      \"status\": 0,\n      \"alert\": false\n    },\n    {\n      \"time\": \"2018-01-02 00:00:00\",\n      \"points\": 0.588751186433263,\n      \"top_properties\": {\n        \"LA:TB2342\": 0.23,\n        \"LA:TB2341\": 0.23,\n        \"LA:TB2344\": 0.23\n      },\n      \"status\": 0,\n      \"alert\": true\n    }\n  ]\n}\n</code></pre>\n\n<p>PS: corresponding schema file is generated from \"<a href=\"https://jsonschema.net/\" rel=\"nofollow noreferrer\">https://jsonschema.net/</a>\" which is my moduleschema.json and above json is modelout.json</p>\n\n<p>Code I wrote just to read files:</p>\n\n<pre><code>def test_json(self):\n    with open('/Users/moduleschema.json', 'r') as json_file:\n\n        schema = json_file.read()\n        print(schema)\n\n    with open('/Users/modelout.json', 'r') as output_json:\n        outputfile = output_json.read()\n\n        print(outputfile)\n\n    strt = jsonschema.validate(outputfile, schema)\n    jsonschema.Draft4Validator\n    print(strt)\n</code></pre>\n\n<p>I want to parse through the json file to make sure all the fields display the right types(ints for ints, strings for string values). I'm a newbie in python forgive me if this is a silly question. thanks!</p>\n"}, {"tags": ["python", "dataframe", "tuples"], "comments": [{"owner": {"reputation": 671, "user_id": 1537744, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2ae6c9bc9e51e323d21fc31f52f75183?s=128&d=identicon&r=PG", "display_name": "b3rt0", "link": "https://stackoverflow.com/users/1537744/b3rt0"}, "edited": false, "score": 0, "creation_date": 1568236226, "post_id": 57896741, "comment_id": 102214759, "body": "Do you want the subtraction of all possible pairs combinations in a given tuple?"}, {"owner": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "edited": false, "score": 3, "creation_date": 1568236460, "post_id": 57896741, "comment_id": 102214829, "body": "1) Those are lists, not tuples 2) Are you trying to subtract all values from the first value, or all values from all other values? 3) What have you tried so far? Provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 27334, "user_id": 7758804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UBA7j.jpg?s=128&g=1", "display_name": "Trenton McKinney", "link": "https://stackoverflow.com/users/7758804/trenton-mckinney"}, "edited": false, "score": 0, "creation_date": 1568261451, "post_id": 57896741, "comment_id": 102219894, "body": "Those list are separated by <code>,</code>, so they must be inside something...maybe it&#39;s a <code>tuple</code> of variable length <code>lists</code>"}, {"owner": {"reputation": 2605, "user_id": 5082048, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dd36d8dd498222faa78903ae6bca538f?s=128&d=identicon&r=PG&f=1", "display_name": "Someone", "link": "https://stackoverflow.com/users/5082048/someone"}, "edited": false, "score": 0, "creation_date": 1568979073, "post_id": 57896741, "comment_id": 102457289, "body": "If the question has been answered, can you select an accepted answer?"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 12053240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5df00a71cef5843eb7ecab227a51c1f?s=128&d=identicon&r=PG&f=1", "display_name": "Gustavo Mateus", "link": "https://stackoverflow.com/users/12053240/gustavo-mateus"}, "edited": false, "score": 0, "creation_date": 1568291610, "post_id": 57896880, "comment_id": 102233520, "body": "That&#39;s it!! Thank you so much."}, {"owner": {"reputation": 13, "user_id": 12053240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5df00a71cef5843eb7ecab227a51c1f?s=128&d=identicon&r=PG&f=1", "display_name": "Gustavo Mateus", "link": "https://stackoverflow.com/users/12053240/gustavo-mateus"}, "edited": false, "score": 0, "creation_date": 1568291812, "post_id": 57896880, "comment_id": 102233629, "body": "How do you access all elements after get_differences?"}, {"owner": {"reputation": 13, "user_id": 12053240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5df00a71cef5843eb7ecab227a51c1f?s=128&d=identicon&r=PG&f=1", "display_name": "Gustavo Mateus", "link": "https://stackoverflow.com/users/12053240/gustavo-mateus"}, "edited": false, "score": 0, "creation_date": 1568302753, "post_id": 57896880, "comment_id": 102240136, "body": "Votes cast by those with less than 15 reputation are recorded, but do not change the publicly displayed post score. =(("}], "tags": [], "owner": {"reputation": 2605, "user_id": 5082048, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dd36d8dd498222faa78903ae6bca538f?s=128&d=identicon&r=PG&f=1", "display_name": "Someone", "link": "https://stackoverflow.com/users/5082048/someone"}, "is_accepted": true, "score": 0, "last_activity_date": 1568301928, "last_edit_date": 1568301928, "creation_date": 1568236433, "answer_id": 57896880, "question_id": 57896741, "link": "https://stackoverflow.com/questions/57896741/combine-varible-tuples/57896880#57896880", "title": "Combine Varible Tuples", "body": "<p>This is my suggestion:</p>\n\n<pre><code>lists_of_variable_length = [[72, 252], [259.1, 293.8, 79.1, 113.8], [316.2, 316.2, 136.2]]\n\ndef get_differences(list_):\n    '''Returns differences between non-identical elements in list_'''\n    len_ = len(list_)\n    return [list_[lv1] - list_[lv2 ] \n            for lv1 in range(len_)    # iterate twice over the list\n            for lv2 in range(len_)    # to account for all possible pairs\n            if not lv1 == lv2]        # but don't select identical elements\n\n# use map to apply that function to all lists \nresult = map(get_differences, lists_of_variable_length)\n</code></pre>\n\n<p>Edit:</p>\n\n<p>To get the individual values, you would do:</p>\n\n<pre><code>result[0][0] # get first difference from first list\nresult[0][1] # get second difference from first list\nresult[1][0] # get first difference from second list\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2684, "user_id": 4551945, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tphYr.jpg?s=128&g=1", "display_name": "Matt L.", "link": "https://stackoverflow.com/users/4551945/matt-l"}, "is_accepted": false, "score": 0, "last_activity_date": 1568236658, "creation_date": 1568236658, "answer_id": 57896920, "question_id": 57896741, "link": "https://stackoverflow.com/questions/57896741/combine-varible-tuples/57896920#57896920", "title": "Combine Varible Tuples", "body": "<p>If you want to return the value of i[0]-i[1], i[0]-i[2], etc., you might try something like this:</p>\n\n<pre><code>output = []\nmylist = [[72, 252], [259.1, 293.8, 79.1, 113.8], [316.2, 316.2, 136.2]]\nfor group in mylist:\n    diffs = []\n    for item in group[1:]:\n        diffs.append(group[0]-item)\n    output.append(diffs)\n</code></pre>\n\n<p>You could also do all this with list comprehensions if you feel comfortable with that syntax.    </p>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 12053240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5df00a71cef5843eb7ecab227a51c1f?s=128&d=identicon&r=PG&f=1", "display_name": "Gustavo Mateus", "link": "https://stackoverflow.com/users/12053240/gustavo-mateus"}, "edited": false, "score": 1, "creation_date": 1568294428, "post_id": 57897049, "comment_id": 102235162, "body": "Votes cast by those with less than 15 reputation are recorded, but do not change the publicly displayed post score.   =(("}], "tags": [], "owner": {"reputation": 671, "user_id": 1537744, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2ae6c9bc9e51e323d21fc31f52f75183?s=128&d=identicon&r=PG", "display_name": "b3rt0", "link": "https://stackoverflow.com/users/1537744/b3rt0"}, "is_accepted": false, "score": 0, "last_activity_date": 1568237395, "creation_date": 1568237395, "answer_id": 57897049, "question_id": 57896741, "link": "https://stackoverflow.com/questions/57896741/combine-varible-tuples/57897049#57897049", "title": "Combine Varible Tuples", "body": "<p>I am not quite sure what is your wish, but how about this?</p>\n\n<pre><code>import itertools\n\nexample = [[72, 252], [259.1, 293.8, 79.1, 113.8], [316.2, 316.2, 136.2]]\n\ndef f(x):\n    out = []\n    for xi in x:\n        outi = []\n        for i in itertools.permutations(xi, 2):\n            outi.append(i[0] - i[1])\n        out.append(outi)\n    return(out)\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 12053240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5df00a71cef5843eb7ecab227a51c1f?s=128&d=identicon&r=PG&f=1", "display_name": "Gustavo Mateus", "link": "https://stackoverflow.com/users/12053240/gustavo-mateus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 57896880, "answer_count": 3, "score": 0, "last_activity_date": 1568317417, "creation_date": 1568235607, "last_edit_date": 1568317417, "question_id": 57896741, "link": "https://stackoverflow.com/questions/57896741/combine-varible-tuples", "title": "Combine Varible Tuples", "body": "<p>I have a tuple with variable length: </p>\n\n<pre><code>[72, 252], [259.1, 293.8, 79.1, 113.8], [316.2, 316.2, 136.2]\n</code></pre>\n\n<p>What can I do to compute difference between values like:</p>\n\n<p>For the second set: </p>\n\n<pre><code>259.1 - 293.8, 259.1 - 79.1, 259.1 - 113.8, 293.8 - 259.1, ...\n</code></pre>\n\n<p>For the third set: </p>\n\n<pre><code>316.2 - 316.2, 316.2 - 136.2, ...\n</code></pre>\n"}, {"tags": ["java", "python", "spring", "spring-boot", "tomcat"], "answers": [{"tags": [], "owner": {"reputation": 447, "user_id": 2962455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2055412edcff97781c95551cacb2fef9?s=128&d=identicon&r=PG&f=1", "display_name": "Maciej Skrzypi\u0144ski", "link": "https://stackoverflow.com/users/2962455/maciej-skrzypi%c5%84ski"}, "is_accepted": false, "score": 0, "last_activity_date": 1568312164, "creation_date": 1568312164, "answer_id": 57912445, "question_id": 57896737, "link": "https://stackoverflow.com/questions/57896737/calling-python-script-from-java-web-application-with-processbuilder/57912445#57912445", "title": "Calling python script from java web application with Processbuilder", "body": "<p>I haven't found a solution yet, however I've implemented workaround/cleaner solution.\nI've decided to separate totally java and python code and created microservice for data retrieving. I use flask for rest webservice (followed this tutorial <a href=\"https://docs.dataplicity.com/docs/control-gpios-using-rest-api\" rel=\"nofollow noreferrer\">https://docs.dataplicity.com/docs/control-gpios-using-rest-api</a>) and call it directly from java.<br>\nSince this does not resolve my initial question I do not mark it as an answer, however it might help someone. </p>\n"}], "owner": {"reputation": 447, "user_id": 2962455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2055412edcff97781c95551cacb2fef9?s=128&d=identicon&r=PG&f=1", "display_name": "Maciej Skrzypi\u0144ski", "link": "https://stackoverflow.com/users/2962455/maciej-skrzypi%c5%84ski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 174, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1568312164, "creation_date": 1568235581, "question_id": 57896737, "link": "https://stackoverflow.com/questions/57896737/calling-python-script-from-java-web-application-with-processbuilder", "title": "Calling python script from java web application with Processbuilder", "body": "<p>I am working on a simple meteo station - I want to use raspberry pi 3b+ as a host, dht22 sensor and write a web application in Java (with spring boot, then deploy it to tomcat 8) and Python for retrieving sensor's data.\nWhat I've done so far:</p>\n\n<p>Python application for retrieving and displaying data. Works as expected, it just prints something like \"22.5;37.4\":</p>\n\n<pre><code>import Adafruit_DHT\n\nDHT_SENSOR = Adafruit_DHT.DHT22\nDHT_PIN = 4\n\nhumidity, temperature = Adafruit_DHT.read_retry(DHT_SENSOR, DHT_PIN)\n\nif humidity is not None and temperature is not None:\n    print(\"{0:0.1f};{1:0.1f}\".format(temperature, humidity))\nelse:\n    print(\"FAIL\")\n</code></pre>\n\n<p>Then I've wrote a java application, put it into .jar and checked if I am able to get sensor's data. Not a rocket science, also works as expected when I use java -jar InputTest.jar on my raspberry pi:</p>\n\n<pre><code>public static void main(String[] args) {\n    try {\n        ProcessBuilder pb = new ProcessBuilder(\"python\", \"/home/pi/Desktop/input/dht_once.py\");\n        Process process = pb.start();\n        BufferedReader reader = new BufferedReader(new InputStreamReader(process.getInputStream()));\n        String line;\n        while ((line = reader.readLine()) != null) {\n            System.out.println(\"measured: \" + line);\n        }\n        process.waitFor(); \n    } catch (IOException ) {\n        System.out.println(\" exception \" + e.getLocalizedMessage());\n    }\n}\n</code></pre>\n\n<p>Then I've created a spring boot application, put my java code inside (logic same as above), packed as a war, deployed to tomcat 8 and run it. It turned out nothing is being printed (of course I've changed code to log output to logfile, it works fine, I can see other logs inside). No issues in logs, it looks like reader never returns a line.<br>\nI believe application does not wait for a process to produce output, but I have no idea why. Important thing: it takes up to few seconds to produce sensor's output. I've also changed python script just for test purposes to return value immediately:</p>\n\n<pre><code>print(\"22.4;33.0\")\n</code></pre>\n\n<p>and it results in successful read by java web application. But when it has to wait few seconds for the output it kills process (process.isAlive() is false right after while loop).\nI've also tried to play with sleep() on current thread to force it to wait for python process but no success.    </p>\n\n<p>Do you guys have any idea what can be the reason for this behavior? Is there anything more I should check?  </p>\n\n<p>TLDR;<br>\nJava application which creates python process works fine until I run it as a web application - then it looks like it does not wait for a process' output</p>\n"}, {"tags": ["python", "sql", "python-3.x"], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 10464003, "user_type": "registered", "profile_image": "https://graph.facebook.com/10212383582361180/picture?type=large", "display_name": "Steven H", "link": "https://stackoverflow.com/users/10464003/steven-h"}, "edited": false, "score": 0, "creation_date": 1568236322, "post_id": 57896798, "comment_id": 102214790, "body": "Thanks for the help Chris. This is all on my local PC (no client/server). For the first part, I just use a specific item to get a unique set of dates (each item will only have one entry per date).  SQL Statement is:   <code>item = &#39;CPE_R_SA&#39;   strSQL = r&quot;SELECT TRADE_DATE FROM tblGanData WHERE ITEM = &#39;&quot; + item + &quot;&#39;&quot;   cursor.execute(strSQL)</code>"}, {"owner": {"reputation": 39, "user_id": 10464003, "user_type": "registered", "profile_image": "https://graph.facebook.com/10212383582361180/picture?type=large", "display_name": "Steven H", "link": "https://stackoverflow.com/users/10464003/steven-h"}, "edited": false, "score": 0, "creation_date": 1568237257, "post_id": 57896798, "comment_id": 102215086, "body": "Working through your second suggestion now. In terms of quantity- essentially daily business-day dates from 1/1/2008 through present (3500 or so days) per item. There are 3-8 items per matrix.  Once I have the matrix, I do some basic linear algebra (standardize the &quot;column vectors&quot;, dot-product w/ an array to return a single-column array of dated values). I will have to then do this WHOLE process dozens of times (ultimately will be in the hundreds) to produce that final array for different sets of data. However, I only need the unique dates list once, and I can use it for all of them."}], "tags": [], "owner": {"reputation": 7383, "user_id": 234657, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/24edf474c7978302df1e0589058e16f9?s=128&d=identicon&r=PG", "display_name": "Chris Curvey", "link": "https://stackoverflow.com/users/234657/chris-curvey"}, "is_accepted": false, "score": 1, "last_activity_date": 1568236589, "last_edit_date": 1568236589, "creation_date": 1568235951, "answer_id": 57896798, "question_id": 57896721, "link": "https://stackoverflow.com/questions/57896721/need-more-efficient-way-to-retrieve-several-dated-series-from-a-db/57896798#57896798", "title": "Need more efficient way to retrieve several dated series from a DB", "body": "<p>For the first bit, you might want do to something like this:</p>\n\n<pre><code>dates = [row[0] for row in cursor.fetchall()]\n</code></pre>\n\n<p>But I'd be very interested in seeing the SQL statement that you're using for that cursor.  </p>\n\n<pre><code>select some_date from my_table\n</code></pre>\n\n<p>is going to be faster than</p>\n\n<pre><code>select * from my_table\n</code></pre>\n\n<p>(How much faster depends on how many rows you are getting back and the speed of the network connection between your client and server.)</p>\n\n<p>For your second part, you're executing one query (with the full round-trip cost) for each Item/Date combination.</p>\n\n<p>So maybe something like this</p>\n\n<pre><code># build a list of all the dates\ndates_str = \",\".join(['#' + dt.strftime(dtFormat) + \"#\" \n                      for dt in dates])\n\n# build a list of all the items\nitems_str = \",\".join([\"'\" + item + \"'\" for item in items])\n\n# run one SQL query that gets everything\ncursor.execute(\"\"\"\n    select item, trade_date, currval\n    from tblGanData\n    where item in (%s)\n    and trade_date in (%s)\n    order by item, trade_date\n\"\"\" % (items_str, dates_str))\n</code></pre>\n\n<p>You will have to do some logic when fetching the values to turn the list of currvals into a matrix, let me know if you need help with that.</p>\n\n<p>P.S.  How many items/dates are we talking about here?</p>\n"}], "owner": {"reputation": 39, "user_id": 10464003, "user_type": "registered", "profile_image": "https://graph.facebook.com/10212383582361180/picture?type=large", "display_name": "Steven H", "link": "https://stackoverflow.com/users/10464003/steven-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1568236589, "creation_date": 1568235490, "question_id": 57896721, "link": "https://stackoverflow.com/questions/57896721/need-more-efficient-way-to-retrieve-several-dated-series-from-a-db", "title": "Need more efficient way to retrieve several dated series from a DB", "body": "<p>I have a database table that includes TRADE_DATE, CURRVAL, and ITEM fields. I first have two arrays/lists: arrVars (strings), dates (dates).  Each string in arrVars represents an ITEM for which I need to retrieve the CURRVALs for each TRADE_DATE in dates.  I'm new to Python, and I'm certainly no expert w/ databases, and I'm sure there are ways to speed my code up.</p>\n\n<p>First part is just creating the dates list from my first db connection. I'm just iterating through each row and appending it into the dates list. Is there a better way?</p>\n\n<pre><code>i = 0\nfor row in cursor.fetchall():\n    dates.append(row[0])\n    i+=1\n</code></pre>\n\n<p>Second, I'm looping through each ITEM in arrVars and then looping through each TRADE_DATE in dates to create each array of CURRVALs and put the arrays into a matrix.  This is pretty damn slow, so I'm hoping there is a better way as well.</p>\n\n<pre><code>M = []\ndtFormat = '%Y/%m/%d'\nfor item in arrVars:\n    tmp = []\n    for dt in dates:\n        strSQL = \"SELECT CURRVAL FROM tblGanData WHERE ITEM = '\" + item + \"' AND TRADE_DATE = #\" + dt.strftime(dtFormat) + \"#\"\n        cursor.execute(strSQL)\n        tmp.append(cursor.fetchone()[0])\n    M.append(tmp)\n</code></pre>\n\n<p>Thank you!!</p>\n"}, {"tags": ["python", "html", "css"], "comments": [{"owner": {"reputation": 85012, "user_id": 2442099, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Jtx0O.jpg?s=128&g=1", "display_name": "G-Cyrillus", "link": "https://stackoverflow.com/users/2442099/g-cyrillus"}, "edited": false, "score": 0, "creation_date": 1568235900, "post_id": 57896709, "comment_id": 102214666, "body": "probably a duplicate of : <a href=\"https://stackoverflow.com/questions/8627902/new-line-in-text-area\" title=\"new line in text area\">stackoverflow.com/questions/8627902/new-line-in-text-area</a>"}, {"owner": {"reputation": 11162, "user_id": 6655211, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SnofI.png?s=128&g=1", "display_name": "PRMoureu", "link": "https://stackoverflow.com/users/6655211/prmoureu"}, "edited": false, "score": 0, "creation_date": 1568236031, "post_id": 57896709, "comment_id": 102214702, "body": "both should work, but you don&#39;t say what you send from the view, and what is the bad result you have ?"}, {"owner": {"reputation": 4513, "user_id": 3416272, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/xL2ZJ.jpg?s=128&g=1", "display_name": "Md Johirul Islam", "link": "https://stackoverflow.com/users/3416272/md-johirul-islam"}, "edited": false, "score": 0, "creation_date": 1568262731, "post_id": 57896709, "comment_id": 102220188, "body": "Check whether you are referencing your CSS file properly."}, {"owner": {"reputation": 1, "user_id": 12055196, "user_type": "registered", "profile_image": "https://graph.facebook.com/2505567586188736/picture?type=large", "display_name": "Anirudh Goel", "link": "https://stackoverflow.com/users/12055196/anirudh-goel"}, "edited": false, "score": 0, "creation_date": 1568267963, "post_id": 57896709, "comment_id": 102221655, "body": "the data variable is giving output something like this: \\ncheckTestPlanComments.py\\n------------------------\\nURL: <a href=\"https://docs.google.com/spreadsheets\" rel=\"nofollow noreferrer\">docs.google.com/spreadsheets</a>  and I wanted the \\n to be read as a newline."}], "owner": {"reputation": 1, "user_id": 12055196, "user_type": "registered", "profile_image": "https://graph.facebook.com/2505567586188736/picture?type=large", "display_name": "Anirudh Goel", "link": "https://stackoverflow.com/users/12055196/anirudh-goel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 568, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1568261304, "creation_date": 1568235420, "last_edit_date": 1568261304, "question_id": 57896709, "link": "https://stackoverflow.com/questions/57896709/use-n-in-html-as-newline", "title": "Use \\n in html as newline", "body": "<p>I am trying to use <code>\\n</code> as a newline in HTML, using CSS pre-line, but not able to do it.</p>\n\n<pre><code>#just-line-break \n{\n    white-space: pre-line;\n}\n\n#line-break-and-tab \n{\n    white-space: pre-wrap;\n}\n</code></pre>\n\n<p>Getting data through python.</p>\n\n<pre><code>&lt;p id=\"just-line-break\"&gt;\n{% if data %}\n{{data}}\n{% endif %}\n&lt;/p&gt;\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1568235213, "post_id": 57896641, "comment_id": 102214423, "body": "you should keep widgets in global variables, not local ones, and then you will have access to them in other functions and you can do <code>your_global_widget.destroy()</code>"}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1568235308, "post_id": 57896641, "comment_id": 102214467, "body": "<code>global</code> doesn&#39;t create global variables - all variables created outside functions are automatically global - so <code>global</code> outside functions is useless. You have to use <code>global</code> inside function to inform function that it has to use external(global) variables and not create local one."}], "answers": [{"tags": [], "owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "is_accepted": false, "score": 1, "last_activity_date": 1568235954, "last_edit_date": 1568235954, "creation_date": 1568235598, "answer_id": 57896740, "question_id": 57896641, "link": "https://stackoverflow.com/questions/57896641/python-raspberry-source-code-for-a-little-program/57896740#57896740", "title": "python raspberry source code for a little program", "body": "<p><code>global</code> doesn't create global variables - all variables created outside functions are automatically global.</p>\n\n<p>You have to use <code>global</code> inside function but only if you want to assing new value ie. <code>b = ...</code></p>\n\n<pre><code>def LoginUser1(): \n    global b\n\n    e.grid()\n    e.focus_set()   \n    b = tk.Button(win, text = \"OK\", width = 10, command = callback1)\n    b.grid()\n</code></pre>\n\n<p>To remove widget you have to use <code>destroy()</code></p>\n\n<pre><code>b.destroy()\n</code></pre>\n\n<p>but after that you would have to create againg widget before you put it in grid</p>\n\n<pre><code>b = Button(...)\nb.grid()\n</code></pre>\n\n<p>or you can remove from window</p>\n\n<pre><code>b.grid_forget() # .grid_remove()\n</code></pre>\n\n<p>and then it still exists so you can use only </p>\n\n<pre><code>b.grid() \n</code></pre>\n\n<p>to show it again in window</p>\n"}], "owner": {"reputation": 21, "user_id": 11406225, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000377113073/picture?type=large", "display_name": "Andrea Verdi", "link": "https://stackoverflow.com/users/11406225/andrea-verdi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 24, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1568235954, "creation_date": 1568235055, "question_id": 57896641, "link": "https://stackoverflow.com/questions/57896641/python-raspberry-source-code-for-a-little-program", "title": "python raspberry source code for a little program", "body": "<p>i had to do a simply program in python for raspberry\na simply form with 16 buttons (loginuser1 loginuser2 etc)\nwhen user1 press the loginuser1 button it will appear\nan inputbox and he can enter his password\nif password is corrected the program will launch another .py\nhow can i do?</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>\nimport tkinter as tk\nfrom tkinter import font\nimport subprocess, os\nimport sys\n\nglobal e, master, win, b\n\n\nwin = tk.Tk()\nmyFont = font.Font(family = 'Helvetica', size = 12, weight = 'bold')\nmaster = tk.Tk()\ne = tk.Entry(win)\ncreate = [sys.executable, 'ciao.py']\nnomescript = \"ciao.py\"      \n\n\n\ndef LoginUser1():   \n    e.grid()\n    e.focus_set()   \n    b = tk.Button(win, text = \"OK\", width = 10, command = callback1)\n    b.grid()\n\n\n\ndef callback1():\n    if (e.get() == \"prova1\"):               \n        subprocess.call(create)\n\ndef LoginUser2():\n    e.grid()\n    e.focus_set()\n    b = tk.Button(win, text = \"OK\", width = 10, command = callback2)\n    b.grid()\n\ndef callback2():\n    if (e.get() == \"prova1\"):\n        subprocess.call(create)         \n\ndef LoginUser3():\n    e.grid()\n    e.focus_set()\n    b = tk.Button(win, text = \"OK\", width = 10, command = callback3)\n    b.grid()\n\ndef callback3():\n    if (e.get() == \"prova1\"):\n        subprocess.call(create) \n\n\ndef LoginUser4():\n    e.grid()\n    e.focus_set()\n    b = tk.Button(win, text = \"OK\", width = 10, command = callback4)\n    b.grid()\n\ndef callback4():\n    if (e.get() == \"prova1\"):\n        subprocess.call(create)     \n\ndef LoginUser5():\n    e.grid()\n    e.focus_set()\n    b = tk.Button(win, text = \"OK\", width = 10, command = callback5)\n    b.grid()\n\ndef callback5():\n    if (e.get() == \"prova1\"):\n        subprocess.call(create)             \n\ndef LoginUser6():\n    e.grid()\n    e.focus_set()\n    b = tk.Button(win, text = \"OK\", width = 10, command = callback6)\n    b.grid()\n\ndef callback6():\n    if (e.get() == \"prova1\"):\n        subprocess.call(create)             \n\ndef LoginUser7():\n    e.grid()\n    e.focus_set()\n    b = tk.Button(win, text = \"OK\", width = 10, command = callback7)\n    b.grid()\n\ndef callback7():\n    if (e.get() == \"prova1\"):\n        subprocess.call(create) \n\n\ndef LoginUser8():\n    e.grid()\n    e.focus_set()\n    b = tk.Button(win, text = \"OK\", width = 10, command = callback8)\n    b.grid()\n\ndef callback8():\n    if (e.get() == \"prova1\"):\n        subprocess.call(create) \n\n\ndef LoginUser9():\n    e.grid()\n    e.focus_set()\n    b = tk.Button(win, text = \"OK\", width = 10, command = callback9)\n    b.grid()\n\ndef callback9():\n    if (e.get() == \"prova1\"):\n        subprocess.call(create)             \n\n\ndef LoginUser10():\n    e.grid()\n    e.focus_set()\n    b = tk.Button(win, text = \"OK\", width = 10, command = callback10)\n    b.grid()\n\ndef callback10():\n    if (e.get() == \"prova1\"):\n        subprocess.call(create) \n\n\ndef LoginUser11():\n    e.grid()\n    e.focus_set()\n    b = tk.Button(win, text = \"OK\", width = 10, command = callback11)\n    b.grid()\n\ndef callback11():\n    if (e.get() == \"prova1\"):\n        subprocess.call(create) \n\n\ndef LoginUser12():\n    e.grid()\n    e.focus_set()\n    b = Button(win, text = \"OK\", width = 10, command = callback12)\n    b.grid()\n\ndef callback12():\n    if (e.get() == \"prova1\"):\n        subprocess.call(create)             \n\n\ndef LoginUser13():\n    e.grid()\n    e.focus_set()\n    b = Button(win, text = \"OK\", width = 10, command = callback13)\n    b.grid()\n\ndef callback13():\n    if (e.get() == \"prova1\"):\n        subprocess.call(create) \n\n\ndef LoginUser14():\n    e.grid()\n    e.focus_set()\n    b = Button(win, text = \"OK\", width = 10, command = callback14)\n    b.grid()\n\ndef callback14():\n    if (e.get() == \"prova1\"):\n        subprocess.call(create)                         \n\n\ndef LoginUser15():\n    e.grid()\n    e.focus_set()\n    b = Button(win, text = \"OK\", width = 10, command = callback15)\n    b.grid()\n\ndef callback15():\n    if (e.get() == \"prova1\"):\n        subprocess.call(create)                         \n\n\ndef LoginUser16():\n    e.grid()\n    e.focus_set()\n    b = Button(win, text = \"OK\", width = 10, command = callback16)\n    b.grid()\n\ndef callback16():\n    if (e.get() == \"prova1\"):\n        subprocess.call(create) \n\nwin.title(\"Prova\")\nwin.geometry('800x480')\nbtn1  = tk.Button(win, text = \"User1\", font = myFont, command = LoginUser1, height = 1 , width = 18)\nbtn1.grid(row=1,column=2)\nbtn2 = tk.Button(win, text = \"User2\", font = myFont, command = LoginUser2, height = 1, width = 18 )\nbtn2.grid(row=2,column=2)\nbtn3 = tk.Button(win, text = \"User3\", font = myFont, command = LoginUser3, height = 1, width =18  )\nbtn3.grid(row=3,column=2)\nbtn4 = tk.Button(win, text = \"User4\", font = myFont, command = LoginUser4, height = 1, width =18 )\nbtn4.grid(row=4,column=2)\nbtn5 = tk.Button(win, text = \"User5\", font = myFont, command = LoginUser5, height = 1, width =18 )\nbtn5.grid(row=1,column=3)\nbtn6 = tk.Button(win, text = \"User6\", font = myFont, command = LoginUser6, height = 1, width =18 )\nbtn6.grid(row=2,column=3)\nbtn7 = tk.Button(win, text = \"User7\", font = myFont, command = LoginUser7, height = 1, width =18 )\nbtn7.grid(row=3,column=3)\nbtn8 = tk.Button(win, text = \"User8\", font = myFont, command = LoginUser8, height = 1, width =18 )\nbtn8.grid(row=4,column=3)\nbtn9 = tk.Button(win, text = \"User9\", font = myFont, command = LoginUser9, height = 1, width =18 )\nbtn9.grid(row=10,column=2)\nbtn10 = tk.Button(win, text = \"User10\", font = myFont, command = LoginUser10, height = 1, width = 18 )\nbtn10.grid(row=11,column=2)\nbtn11 = tk.Button(win, text = \"User11\", font = myFont, command = LoginUser11, height = 1, width =18 )\nbtn11.grid(row=12,column=2)\nbtn12 = tk.Button(win, text = \"User12\", font = myFont, command = LoginUser12, height = 1, width =18 )\nbtn12.grid(row=13,column=2)\nbtn13 = tk.Button(win, text = \"User13\", font = myFont, command = LoginUser13, height = 1, width =18 )\nbtn13.grid(row=10,column=3)\nbtn14 = tk.Button(win, text = \"User14\", font = myFont, command = LoginUser14, height = 1, width =18 )\nbtn14.grid(row=11,column=3)\nbtn15 = tk.Button(win, text = \"User15\", font = myFont, command = LoginUser15, height = 1, width =18 )\nbtn15.grid(row=12,column=3)\nbtn16 = tk.Button(win, text = \"User16\", font = myFont, command = LoginUser16, height = 1, width =18 )\nbtn16.grid(row=13,column=3)\nwin.rowconfigure(16, {'minsize': 10})\nwin.columnconfigure(4, {'minsize': 10})     \n\n\nwin.mainloop()\n\n\n\n\n\n\n</code></pre>\n\n<p>i can't delete the entry and button for another operations\nit should delete the button and the entry for the next inputs.</p>\n"}, {"tags": ["python", "python-3.x", "pycharm", "pytorch"], "comments": [{"owner": {"reputation": 690, "user_id": 1898437, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7dc6fab73ea7b9e092cf618335b7948b?s=128&d=identicon&r=PG", "display_name": "Anoop R Desai", "link": "https://stackoverflow.com/users/1898437/anoop-r-desai"}, "edited": false, "score": 0, "creation_date": 1568235276, "post_id": 57896633, "comment_id": 102214453, "body": "What was the exact command you used?"}], "answers": [{"tags": [], "owner": {"reputation": 453, "user_id": 9494334, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cy4EL.png?s=128&g=1", "display_name": "Misieq", "link": "https://stackoverflow.com/users/9494334/misieq"}, "is_accepted": false, "score": 2, "last_activity_date": 1568236680, "creation_date": 1568236680, "answer_id": 57896922, "question_id": 57896633, "link": "https://stackoverflow.com/questions/57896633/unable-to-install-torch-or-torch-vision-in-pycharm-i-am-running-python-3-6/57896922#57896922", "title": "Unable to Install Torch or torch vision in pycharm I am running python 3.6", "body": "<p>Try installing lower version of torch, go to:</p>\n\n<blockquote>\n  <p>File->Setting->Project[project_name]-> Project Interpreter -> + ->\n  search for torch, in right lower corner is check box 'Specify version'</p>\n</blockquote>\n\n<p>check it and try sevral starting from top. From what i see current is 1.2.0</p>\n"}], "owner": {"reputation": 19, "user_id": 11657863, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-hmkOzR_99Oc/AAAAAAAAAAI/AAAAAAAAHsE/SlNQPzXCLH8/photo.jpg?sz=128", "display_name": "Sanchit Sharma", "link": "https://stackoverflow.com/users/11657863/sanchit-sharma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 187, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1568237723, "creation_date": 1568234987, "last_edit_date": 1568237723, "question_id": 57896633, "link": "https://stackoverflow.com/questions/57896633/unable-to-install-torch-or-torch-vision-in-pycharm-i-am-running-python-3-6", "title": "Unable to Install Torch or torch vision in pycharm I am running python 3.6", "body": "<p>Installing torch from PyCharm interpreter but error occurs. Python 3.6 </p>\n\n<pre><code>Collecting torch==0.4.1.post2\n\n  Could not find a version that satisfies the requirement torch==0.4.1.post2 (from versions: 0.1.2, 0.1.2.post1, 0.1.2.post2)\nNo matching distribution found for torch==0.4.1.post2\n</code></pre>\n"}, {"tags": ["python", "abstract-syntax-tree"], "answers": [{"comments": [{"owner": {"reputation": 338, "user_id": 944224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eca4fe97cffcce33e91861a079a7b412?s=128&d=identicon&r=PG", "display_name": "Rob", "link": "https://stackoverflow.com/users/944224/rob"}, "reply_to_user": {"reputation": 1608, "user_id": 1576254, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Jq33n.png?s=128&g=1", "display_name": "ikamen", "link": "https://stackoverflow.com/users/1576254/ikamen"}, "edited": false, "score": 0, "creation_date": 1568236196, "post_id": 57896794, "comment_id": 102214747, "body": "Indeed, just noticed it.  Tried to execute your code locally but it fails. What python version do you use?"}, {"owner": {"reputation": 1608, "user_id": 1576254, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Jq33n.png?s=128&g=1", "display_name": "ikamen", "link": "https://stackoverflow.com/users/1576254/ikamen"}, "edited": false, "score": 0, "creation_date": 1568236275, "post_id": 57896794, "comment_id": 102214773, "body": "py 3.7 or 3.8-dev"}, {"owner": {"reputation": 338, "user_id": 944224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eca4fe97cffcce33e91861a079a7b412?s=128&d=identicon&r=PG", "display_name": "Rob", "link": "https://stackoverflow.com/users/944224/rob"}, "reply_to_user": {"reputation": 1608, "user_id": 1576254, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Jq33n.png?s=128&g=1", "display_name": "ikamen", "link": "https://stackoverflow.com/users/1576254/ikamen"}, "edited": false, "score": 0, "creation_date": 1568236473, "post_id": 57896794, "comment_id": 102214836, "body": "Answer might not been most accurate but it touches on the problem of scopes. See already given answer in <a href=\"https://stackoverflow.com/questions/45535284/exec-and-variable-scope\" title=\"exec and variable scope\">stackoverflow.com/questions/45535284/exec-and-variable-scope</a>"}], "tags": [], "owner": {"reputation": 338, "user_id": 944224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eca4fe97cffcce33e91861a079a7b412?s=128&d=identicon&r=PG", "display_name": "Rob", "link": "https://stackoverflow.com/users/944224/rob"}, "is_accepted": false, "score": 0, "last_activity_date": 1568236512, "last_edit_date": 1568236512, "creation_date": 1568235949, "answer_id": 57896794, "question_id": 57896632, "link": "https://stackoverflow.com/questions/57896632/ast-execution-produces-different-result-in-a-function-vs-module-scope/57896794#57896794", "title": "ast execution produces different result in a function vs module scope", "body": "<p>Variable Y is declared in function scope and its not available outside of it. If you want Y to be available post function call return it or use a global.</p>\n\n<p>Update:\nSee my comment in relation to exec and scopes: <a href=\"https://stackoverflow.com/questions/45535284/exec-and-variable-scope\">exec() and variable scope</a></p>\n"}, {"comments": [{"owner": {"reputation": 1608, "user_id": 1576254, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Jq33n.png?s=128&g=1", "display_name": "ikamen", "link": "https://stackoverflow.com/users/1576254/ikamen"}, "edited": false, "score": 0, "creation_date": 1568237117, "post_id": 57896976, "comment_id": 102215046, "body": "Thanks, it works. A question remains - where did the assignment go when we left scope unspecified? it&#39;s not module globals."}], "tags": [], "owner": {"reputation": 178, "user_id": 11880049, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_cPRInucXAk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdnvjIvmGU6gh7LoEMdhrzSuewfew/photo.jpg?sz=128", "display_name": "Yodogawa Mikio", "link": "https://stackoverflow.com/users/11880049/yodogawa-mikio"}, "is_accepted": true, "score": 1, "last_activity_date": 1568237012, "creation_date": 1568237012, "answer_id": 57896976, "question_id": 57896632, "link": "https://stackoverflow.com/questions/57896632/ast-execution-produces-different-result-in-a-function-vs-module-scope/57896976#57896976", "title": "ast execution produces different result in a function vs module scope", "body": "<p>When in a function, you can capture the assignments into any dictionary that will function as the scope for the executed statements:</p>\n\n<pre><code>def foo():\n    scope = {}\n    exec(\"y = 5.0\", scope)\n    print(scope['y'])\n\nfoo()  # prints 5.0\n</code></pre>\n"}], "owner": {"reputation": 1608, "user_id": 1576254, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Jq33n.png?s=128&g=1", "display_name": "ikamen", "link": "https://stackoverflow.com/users/1576254/ikamen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 57896976, "answer_count": 2, "score": 1, "last_activity_date": 1568237012, "creation_date": 1568234983, "last_edit_date": 1568236387, "question_id": 57896632, "link": "https://stackoverflow.com/questions/57896632/ast-execution-produces-different-result-in-a-function-vs-module-scope", "title": "ast execution produces different result in a function vs module scope", "body": "<p><strong>Edit</strong>: the problem is not related to <code>ast</code> module.</p>\n\n<p>it can be reproduced with just using <code>exec</code>:</p>\n\n<pre><code>y = None\n\nexec(\"y = 5.0\")\nprint(y)  # prints 5.0\n</code></pre>\n\n<p>vs</p>\n\n<pre><code>def foo():\n    y = None\n\n    exec(\"y = 5.0\")\n    print(y)\n\nfoo()  # prints None\n</code></pre>\n\n<hr>\n\n<p><strong>Original question:</strong></p>\n\n<p>I am generating code programmatically using <code>ast</code> module. I have following code, that works: </p>\n\n<pre><code>import ast\n\nnum = ast.Num(n=5.)\ny = None\nassign = ast.Assign(targets=[ast.Name(id='y', ctx=ast.Store())], value=num)\ntree = ast.Module(body=[assign], type_ignores=[])\nast.fix_missing_locations(tree)\nc = compile(tree, filename=\"\", mode=\"exec\")\nexec(c)  # replaces the value of 'y' with 5.0\n\nprint(y) # prints 5.0\n</code></pre>\n\n<p>However, as soon as I wrap this code in a function, it stops working:</p>\n\n<pre><code>import ast\n\ndef foo():\n    num = ast.Num(n=5.)\n\n    y = None\n    assign = ast.Assign(targets=[ast.Name(id='y', ctx=ast.Store())], value=num)\n    tree = ast.Module(body=[assign], type_ignores=[])\n    ast.fix_missing_locations(tree)\n    c = compile(tree, filename=\"\", mode=\"exec\")\n    exec(c)\n\n    print(y)\n\nfoo()  # prints None\n</code></pre>\n\n<p>This is the first time I see python code behave differently after being moved inside a function. I have checked and assignment does not put <code>y</code> in the module (locals) either:</p>\n\n<p><code>print(y)  # NameError: name 'y' is not defined</code></p>\n"}, {"tags": ["python", "python-3.x", "collections", "pycharm", "namedtuple"], "comments": [{"owner": {"reputation": 169, "user_id": 9958575, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-m4PRVc-2p8I/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq37tCNF_f__FYRMwtj5ixWq_kJqAg/mo/photo.jpg?sz=128", "display_name": "Matej Novosad", "link": "https://stackoverflow.com/users/9958575/matej-novosad"}, "edited": false, "score": 0, "creation_date": 1568237417, "post_id": 57896575, "comment_id": 102215121, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/43921240/pythonic-way-to-convert-dictionary-to-namedtuple-or-another-hashable-dict-like\">Pythonic Way to Convert Dictionary to namedtuple, or Another Hashable dict-like?</a>"}, {"owner": {"reputation": 21, "user_id": 3926442, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NgWak.jpg?s=128&g=1", "display_name": "kimiya_Ab", "link": "https://stackoverflow.com/users/3926442/kimiya-ab"}, "reply_to_user": {"reputation": 169, "user_id": 9958575, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-m4PRVc-2p8I/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq37tCNF_f__FYRMwtj5ixWq_kJqAg/mo/photo.jpg?sz=128", "display_name": "Matej Novosad", "link": "https://stackoverflow.com/users/9958575/matej-novosad"}, "edited": false, "score": 1, "creation_date": 1568317761, "post_id": 57896575, "comment_id": 102246231, "body": "It is not a duplicate as it comes from different modules."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 3926442, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NgWak.jpg?s=128&g=1", "display_name": "kimiya_Ab", "link": "https://stackoverflow.com/users/3926442/kimiya-ab"}, "edited": false, "score": 0, "creation_date": 1568306641, "post_id": 57897123, "comment_id": 102241877, "body": "Thanks for the response.  I just want to have new config instead of my defaults for the particular run time that the user is using, I don&#39;t want to change the default for the whole work (I have used NamedTuple for this matter instead of defaultdict because of this reason). for making a new instance from the class there is no &#39;<b>new</b> &#39; for this NamedTuple?"}, {"owner": {"reputation": 21, "user_id": 3926442, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NgWak.jpg?s=128&g=1", "display_name": "kimiya_Ab", "link": "https://stackoverflow.com/users/3926442/kimiya-ab"}, "edited": false, "score": 0, "creation_date": 1568306965, "post_id": 57897123, "comment_id": 102241999, "body": "<code>__new__</code> I meant"}], "tags": [], "owner": {"reputation": 358, "user_id": 11365663, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2msqx.png?s=128&g=1", "display_name": "Ammar Askar", "link": "https://stackoverflow.com/users/11365663/ammar-askar"}, "is_accepted": false, "score": 0, "last_activity_date": 1568237863, "creation_date": 1568237863, "answer_id": 57897123, "question_id": 57896575, "link": "https://stackoverflow.com/questions/57896575/converting-dict-to-typing-namedtuple-in-python/57897123#57897123", "title": "converting dict to typing.NamedTuple in python", "body": "<p>In this case, it's probably easiest to use <code>typing</code>'s own metaclass for <code>NamedTuple</code> to create the class. The tricky part is that <code>typing.NamedTuple</code>s need to have types associated for the fields.</p>\n\n<p>Your conversion functions will end up looking something like this:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def convert(class_specs):\n    field_types = {field: type(value) for field, value in class_specs.items()}\n    return typing.NamedTupleMeta(\n        'GenericDict', [], dict(class_specs, __annotations__=field_types))\n</code></pre>\n\n<p>and like your example you can use it as follows:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>&gt;&gt;&gt; Coordinates = convert({'x': 1, 'y': 23})\n&gt;&gt;&gt; Coordinates()\nGenericDict(x=1, y=23)\n&gt;&gt;&gt; Coordinates(0, 0)\nGenericDict(x=0, y=0)\n</code></pre>\n\n<h2>Getting rid of the defaults</h2>\n\n<p>If you don't want to use the values from the dictionary as defaults, you can simply directly use the NamedTuple constructor like so:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def convert(class_specs):\n    return typing.NamedTuple('GenericDict', \n        [(field, type(value)) for field, value in class_specs.items()])\n</code></pre>\n\n<pre class=\"lang-py prettyprint-override\"><code>&gt;&gt;&gt; Coordinates = convert({'x': 42, 'y': 21})\n&gt;&gt;&gt; Coordinates()\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nTypeError: __new__() missing 2 required positional arguments: 'x' and 'y'\n&gt;&gt;&gt; Coordinates(x=1, y=2)\nGenericDict(x=1, y=2)\n</code></pre>\n\n<h2>Getting rid of defaults and type information</h2>\n\n<p>If you don't want the defaults or typing information, you can simply switch it out for the generic <code>typing.Any</code> using:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def convert(class_specs):\n    return typing.NamedTuple('GenericDict', \n        [(field, typing.Any) for field in class_specs.keys()])\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 3926442, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NgWak.jpg?s=128&g=1", "display_name": "kimiya_Ab", "link": "https://stackoverflow.com/users/3926442/kimiya-ab"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1043, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1568304749, "creation_date": 1568234699, "last_edit_date": 1568304749, "question_id": 57896575, "link": "https://stackoverflow.com/questions/57896575/converting-dict-to-typing-namedtuple-in-python", "title": "converting dict to typing.NamedTuple in python", "body": "<p>For most, I am not sure if it's the right question to be asked but I couldn't yet found out why there are two different types of named tuple... \nI have read <a href=\"https://stackoverflow.com/questions/50766461/whats-the-difference-between-namedtuple-and-namedtuple\">\" What's the difference between namedtuple and NamedTuple?\"</a> page. \nHowever, I still don't understand how to convert a dictionary to a NamedTuple. \nI have tried this code :</p>\n\n<pre><code>from collections import namedtuple\ndef convert(dictionary):\n    return namedtuple('GenericDict', dictionary.keys())(**dictionary)\n\n</code></pre>\n\n<p>however, this piece of code only converts the dict to a namedtuple from the collection module. </p>\n\n<p>I was wondering if anyone can help me out on this. \nHow should I make a function to transform any random dict into a <code>typing.NamedTuple</code>.</p>\n\n<p>Assume we have a class of NamedTuple like this : </p>\n\n<pre><code>\nclass settingdefault(NamedTuple):\n    epoch : int = 8\n    train_size : float = 0.8\n    b: str = \"doe\"\n\n</code></pre>\n\n<p>and we just want to get an input of dict from the user and transform it to NamedTuple. So if there was an element missing it can get replaced by the settingdefault class.</p>\n\n<p>and lets assume that the example dict is : </p>\n\n<pre><code>config = dict(e=10, b=\"test\")\n\n</code></pre>\n\n<p>BTW, I want it to be like a function. other than that I know how to do it like :</p>\n\n<pre><code>\nsetting = settingdefault(config['a'], config['b'])\n</code></pre>\n\n<p>I want to be able to have it for cases that I don't know the keys of the coming config dict as it can be anything.\nOnce again for the clarification ! My question is about typing.NamedTuple not the collections.namedtuple .</p>\n"}, {"tags": ["python", "python-3.x", "turtle-graphics"], "comments": [{"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1568234893, "post_id": 57896564, "comment_id": 102214304, "body": "I think I saw similar problem on Stackoverflow - and problem was only on Mac. I think there was no solutin for this but I don&#39;t use Mac to say something more."}, {"owner": {"reputation": 127, "user_id": 9297288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22684a8894c3f753e26a9b32141c72cc?s=128&d=identicon&r=PG&f=1", "display_name": "Fletchy1995", "link": "https://stackoverflow.com/users/9297288/fletchy1995"}, "edited": false, "score": 0, "creation_date": 1568235054, "post_id": 57896564, "comment_id": 102214358, "body": "Take a look at this thread: <a href=\"https://stackoverflow.com/questions/7217405/turtle-graphics-not-responding\" title=\"turtle graphics not responding\">stackoverflow.com/questions/7217405/&hellip;</a>"}], "owner": {"reputation": 117, "user_id": 12055194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb11f991a0088fab9f56d91f3dc5cf09?s=128&d=identicon&r=PG&f=1", "display_name": "Hunnam ", "link": "https://stackoverflow.com/users/12055194/hunnam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "closed_date": 1568235544, "answer_count": 0, "score": 0, "last_activity_date": 1568234640, "creation_date": 1568234640, "question_id": 57896564, "link": "https://stackoverflow.com/questions/57896564/whenever-i-run-turtle-module-my-computer-automatically-logs-off", "closed_reason": "Duplicate", "title": "Whenever I run turtle module, my computer automatically logs off", "body": "<p>As the title says, whenever I run turtle module and try to use Turtle by import turtle and bob = turtle.Turtle(), my computer logs off and the internet connections is even lost. </p>\n\n<p>I tried to find a similar problem on internet, but I couldn't find it. Below is what I got on terminal. </p>\n\n<pre><code>Python 3.7.3 (default, Mar 27 2019, 16:54:48) \n[Clang 4.0.1 (tags/RELEASE_401/final)] :: Anaconda, Inc. on darwin\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n\n&gt;&gt;&gt; from turtle import Turtle\n&gt;&gt;&gt; t1 = Turtle()\n2019-09-11 15:26:36.461 python[10363:4080288] CGSTrackingRegionSetIsEnabled returned CG error 268435459\n2019-09-11 15:26:36.461 python[10363:4080288] CGSTrackingRegionSetIsEnabled returned CG error 268435459\n2019-09-11 15:26:36.461 python[10363:4080288] CGSTrackingRegionSetIsEnabled returned CG error 268435459\n2019-09-11 15:26:36.461 python[10363:4080288] CGSTrackingRegionSetIsEnabled returned CG error 268435459\n2019-09-11 15:26:36.461 python[10363:4080288] CGSTrackingRegionSetIsEnabled returned CG error 268435459\n2019-09-11 15:26:36.461 python[10363:4080288] CGSTrackingRegionSetIsEnabled returned CG error 268435459\n2019-09-11 15:26:36.461 python[10363:4080288] CGSTrackingRegionSetIsEnabled returned CG error 268435459\n2019-09-11 15:26:36.461 python[10363:4080288] CGSTrackingRegionSetIsEnabled returned CG error 268435459\n2019-09-11 15:26:36.461 python[10363:4080288] CGSTrackingRegionSetIsEnabled returned CG error 268435459\n2019-09-11 15:26:36.462 python[10363:4080288] CGSTrackingRegionSetIsEnabled returned CG error 268435459\n2019-09-11 15:26:36.462 python[10363:4080288] CGSTrackingRegionSetIsEnabled returned CG error 268435459\n2019-09-11 15:26:36.463 python[10363:4080288] CGSTrackingRegionSetIsEnabled returned CG error 268435459\n2019-09-11 15:26:36.463 python[10363:4080288] CGSTrackingRegionSetIsEnabled returned CG error 268435459\n2019-09-11 15:26:36.463 python[10363:4080288] CGSTrackingRegionSetIsEnabled returned CG error 268435459\n2019-09-11 15:26:36.463 python[10363:4080288] CGSTrackingRegionSetIsEnabled returned CG error 268435459\n2019-09-11 15:26:36.463 python[10363:4080288] CGSTrackingRegionSetIsEnabled returned CG error 268435459\n2019-09-11 15:26:36.472 python[10363:4080288] HIToolbox: received notification of WindowServer event port death.\n2019-09-11 15:26:36.472 python[10363:4080288] port matched the WindowServer port created in BindCGSToRunLoop\n\n[Restored Sep 11, 2019 at 3:26:48 PM]\n</code></pre>\n"}, {"tags": ["python", "html", "beautifulsoup", "icalendar"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 12055189, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3561d1b6b5467b9bda2e568f41829de6?s=128&d=identicon&r=PG&f=1", "display_name": "BeautifulRisotto", "link": "https://stackoverflow.com/users/12055189/beautifulrisotto"}, "edited": false, "score": 0, "creation_date": 1568568804, "post_id": 57897360, "comment_id": 102306421, "body": "Thank you. That solved the problem, why I was getting only one dataset."}], "tags": [], "owner": {"reputation": 7383, "user_id": 234657, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/24edf474c7978302df1e0589058e16f9?s=128&d=identicon&r=PG", "display_name": "Chris Curvey", "link": "https://stackoverflow.com/users/234657/chris-curvey"}, "is_accepted": true, "score": 0, "last_activity_date": 1568239341, "creation_date": 1568239341, "answer_id": 57897360, "question_id": 57896556, "link": "https://stackoverflow.com/questions/57896556/how-to-create-ical-files-from-html-table/57897360#57897360", "title": "How to create ical files from HTML table", "body": "<p>I think you're stopping because your using <code>find()</code> which gets one matching tag, instead of <code>find_all()</code> which gets all the matching tags.  Then you have to loop over the results</p>\n\n<pre><code>import requests\nfrom bs4 import BeautifulSoup\n\nresponse = requests.get(\"http://www.ellen-hartmann.de/babybasare.html\")\n\nsoup = BeautifulSoup(response.text, 'html.parser')\n\n# now let's find every row in every table\nfor row in soup.find_all(\"tr\"):\n\n    # grab the cells within the row\n    cells = row.find_all(\"td\")\n\n    # print the value of the cells as a list.  This is the point where\n    # you will need to filter the rows to figure out what is an event (and\n    # what is not), determine the start date and time, and convert the values \n    # to iCal format.\n    print([c.text for c in cells])\n\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 12055189, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3561d1b6b5467b9bda2e568f41829de6?s=128&d=identicon&r=PG&f=1", "display_name": "BeautifulRisotto", "link": "https://stackoverflow.com/users/12055189/beautifulrisotto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 57897360, "answer_count": 1, "score": 0, "last_activity_date": 1568239341, "creation_date": 1568234587, "last_edit_date": 1568236094, "question_id": 57896556, "link": "https://stackoverflow.com/questions/57896556/how-to-create-ical-files-from-html-table", "title": "How to create ical files from HTML table", "body": "<p>I'm trying to create importable calender events from a website.\nThe website has the events clustered into a standard html table.</p>\n\n<p>I was wondering if beautfulsoup is the correct way to takel this problem, because i only get the first entry and then nothing.</p>\n\n<pre><code>quote_page = \"http://www.ellen-hartmann.de/babybasare.html\"\n\npage = urllib2.urlopen(quote_page)\n\nsoup = BeautifulSoup(page, \"html.parser\")\n\ntable = soup.find(\"table\", {\"border\": \"1\"})\n\ntd = table.find(\"td\", text=\"Veranstaltungstyp&amp;nbsp;\")\n\nprint table\n\ntd_next = table.find_next(\"tr\")\n\nprint td_next\n</code></pre>\n"}, {"tags": ["c#", "python", "automation", "ui-automation"], "comments": [{"owner": {"reputation": 1502, "user_id": 4686951, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SBUbs.png?s=128&g=1", "display_name": "Ben Amos", "link": "https://stackoverflow.com/users/4686951/ben-amos"}, "edited": false, "score": 0, "creation_date": 1568239893, "post_id": 57896489, "comment_id": 102215718, "body": "I am fairly certain the answer will be language-specific because Selenium WebDriver is available in so many languages. Which language are you writing your Selenium automations in? Python? Ruby? Java? Also, how are your Selenium automations typically executed? An automation service like Jenkins or cron? Are you running them from within an IDE? Or are you entering commands in the console? If so, what&#39;s the command?"}, {"owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 0, "creation_date": 1568246248, "post_id": 57896489, "comment_id": 102217062, "body": "Welcome to SO. Please take the time to read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>. It will help you craft solid questions that will hopefully get useful answers.  Sounds like you are using C#.  Why not generate the token/value using C# in your selenium script?  And prompting for user input in the middle of automated test is unusual IMO.  YMMV."}, {"owner": {"reputation": 1, "user_id": 12055147, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5216dbc6d989009a0d5672e5928ee100?s=128&d=identicon&r=PG&f=1", "display_name": "Ravi Teja", "link": "https://stackoverflow.com/users/12055147/ravi-teja"}, "reply_to_user": {"reputation": 1502, "user_id": 4686951, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SBUbs.png?s=128&g=1", "display_name": "Ben Amos", "link": "https://stackoverflow.com/users/4686951/ben-amos"}, "edited": false, "score": 0, "creation_date": 1568253033, "post_id": 57896489, "comment_id": 102218360, "body": "@BenAmos I am writing my scripts in C# language and currently I am executing the scripts manually, but I have a pipeline setup ready which I would be using in future to trigger my automation scripts.And I am running my scripts using Visual Studio 2017 and I wont enter the input value from console, I will store those values in a excel file and I will read from that excel file during the execution and send them as input to the Python scripts. Hope this information might be helpful in providing a solution to me"}, {"owner": {"reputation": 1502, "user_id": 4686951, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SBUbs.png?s=128&g=1", "display_name": "Ben Amos", "link": "https://stackoverflow.com/users/4686951/ben-amos"}, "edited": false, "score": 0, "creation_date": 1568400999, "post_id": 57896489, "comment_id": 102275503, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/11779143/how-do-i-run-a-python-script-from-c\">How do I run a Python script from C#?</a>"}], "owner": {"reputation": 1, "user_id": 12055147, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5216dbc6d989009a0d5672e5928ee100?s=128&d=identicon&r=PG&f=1", "display_name": "Ravi Teja", "link": "https://stackoverflow.com/users/12055147/ravi-teja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 399, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1568404230, "creation_date": 1568234198, "last_edit_date": 1568404230, "question_id": 57896489, "link": "https://stackoverflow.com/questions/57896489/how-can-i-run-trigger-a-python-script-using-selenium-webdriver-in-the-middle-of", "title": "How can I run/trigger a python script using selenium webdriver in the middle of a UI based automation scenario", "body": "<p>I have a scenario where I need a value which would be generated by running a python script in the middle of UI based automation script written in C#. Can it be possible to run a python script and provide a value to it and get the result from the python script as input to my UI automation script?</p>\n\n<p>My current automation framework is Selenium using N-unit, and the scenario would be run in Chrome browser</p>\n\n<p>here is the python script which I would be using </p>\n\n<pre><code>(import XYZ\n\nrandom_message = input(\"Please enter the message to be signed\")\nprint(\"Message to be signed is %s\" %random_message)\n\nprivate_key = input(\"Please input firstvalue:\")\nprint(\"Your wallet firstvalueis: %s\" %firstvalue)\n\nConverted_Value= XYZ.firstvalue_to_Converted_Value(firstvalue)\n\nhex_compressed_firstvalue = bitcoin.encode_firstvalue(firstvalue,'hex_compressed')\nprint(\"Your compressed firstvalue is:\", hex_compressed_public_key)\n\nhex_addr = XYZ.pubtoaddr(hex_compressed_firstvalue)\nprint(\"Your wallet address is:\", hex_addr)\n\nsigned_message = XYZ.ecdsa_sign(random_message, Converted_Value)\nprint(\"Signed message is: \", signed_message)\n\n)\n</code></pre>\n"}, {"tags": ["python", "pyqt", "pyqt5", "qprocess"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1568238401, "post_id": 57896472, "comment_id": 102215376, "body": "show RTest.bat..."}, {"owner": {"reputation": 223, "user_id": 9777611, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9bba16d777d9ae50872c3fc8a262b328?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle Dixon", "link": "https://stackoverflow.com/users/9777611/kyle-dixon"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1568238731, "post_id": 57896472, "comment_id": 102215445, "body": "@eyllanesc RTest.bat: <code>&quot;K:\\Market Risk\\Risk App\\R-3.6.1\\bin\\R.exe&quot; CMD BATCH &quot;K:\\Market Risk\\R\\Scripts\\Test.R&quot;</code> Test.R: <code>Sys.sleep(5)</code> The <code>.bat</code> file runs fine on it&#39;s own."}], "answers": [{"comments": [{"owner": {"reputation": 223, "user_id": 9777611, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9bba16d777d9ae50872c3fc8a262b328?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle Dixon", "link": "https://stackoverflow.com/users/9777611/kyle-dixon"}, "edited": false, "score": 0, "creation_date": 1568239648, "post_id": 57897358, "comment_id": 102215646, "body": "You are a life saver. Works great!"}], "tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": true, "score": 1, "last_activity_date": 1568239851, "last_edit_date": 1568239851, "creation_date": 1568239332, "answer_id": 57897358, "question_id": 57896472, "link": "https://stackoverflow.com/questions/57896472/qprocess-not-invoking-finished/57897358#57897358", "title": "QProcess not invoking finished?", "body": "<p>You have 2 errors:</p>\n\n<ul>\n<li>When you finish executing a command in cmd.exe does not imply that you close the cmd.exe, so you must close it using the EXIT command at the end of the .bat.</li>\n</ul>\n\n<p><strong>RTest.bat</strong></p>\n\n<pre><code>:: Another commands\nEXIT\n</code></pre>\n\n<ul>\n<li>Do not use <a href=\"https://doc.qt.io/qt-5/qprocess.html#startDetached-1\" rel=\"nofollow noreferrer\"><code>startDetached()</code></a> since this is a static method that creates an internal QProcess different from the \"process\" variable, you must use the <a href=\"https://doc.qt.io/qt-5/qprocess.html#start\" rel=\"nofollow noreferrer\"><code>start()</code></a> method.</li>\n</ul>\n\n<pre class=\"lang-py prettyprint-override\"><code># ...\nprocess = QtCore.QProcess(self)\nprocess.finished.connect(self.onFinished)\nprocess.start(\"cmd.exe\", [\"/c\", \"K:\\Market Risk\\Risk App\\Batches\\RTest.bat\"])\n</code></pre>\n"}], "owner": {"reputation": 223, "user_id": 9777611, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9bba16d777d9ae50872c3fc8a262b328?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle Dixon", "link": "https://stackoverflow.com/users/9777611/kyle-dixon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 57897358, "answer_count": 1, "score": 1, "last_activity_date": 1568239851, "creation_date": 1568234110, "question_id": 57896472, "link": "https://stackoverflow.com/questions/57896472/qprocess-not-invoking-finished", "title": "QProcess not invoking finished?", "body": "<p>I tried implementing the suggestion from <a href=\"https://stackoverflow.com/questions/5613922/subprocess-popen-blocking-pyqt-gui\">subprocess Popen blocking PyQt GUI</a> but it appears that the onFinished function is never getting invoked.</p>\n\n<pre><code>class MyApp(QtWidgets.QMainWindow, Ui_MainWindow):\n\n[...]\n\n    def Run_PnL_Script(self):\n        self.Run_PnL.setEnabled(False)\n        self.Run_PnL.setStyleSheet(\"background-color: #D3D3D3; color: #FFFFFF\")\n        self.PnL_Status.setText(\"Running...\")\n        process = QtCore.QProcess(self)\n        process.finished.connect(self.onFinished)\n        process.startDetached(\"cmd.exe\", [\"/c\", \"K:\\Market Risk\\Risk App\\Batches\\RTest.bat\"])\n\n    def onFinished(self, exitCode, exitStatus):\n        self.PnL_Status.setText(\"Complete.\")\n        self.Run_PnL.setEnabled(True)\n        self.Run_PnL.setStyleSheet(\"background-color: #4582EC; color: #FFFFFF\")\n\n[...]\n</code></pre>\n\n<p>Thanks in advance for the help.</p>\n"}, {"tags": ["python", "pandas", "spss"], "comments": [{"owner": {"reputation": 92118, "user_id": 1217358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2aafb97833979e3668c61d36e697bfc?s=128&d=identicon&r=PG", "display_name": "Warren Weckesser", "link": "https://stackoverflow.com/users/1217358/warren-weckesser"}, "edited": false, "score": 0, "creation_date": 1568235087, "post_id": 57896457, "comment_id": 102214371, "body": "Which .sav format are you asking about?  Which program or library was used to create the  .sav file?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user11357465"}, "reply_to_user": {"reputation": 92118, "user_id": 1217358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2aafb97833979e3668c61d36e697bfc?s=128&d=identicon&r=PG", "display_name": "Warren Weckesser", "link": "https://stackoverflow.com/users/1217358/warren-weckesser"}, "edited": false, "score": 0, "creation_date": 1568235367, "post_id": 57896457, "comment_id": 102214491, "body": "It&#39;s an old SPSS file, I just want to manipulate it with Pandas"}], "answers": [{"tags": [], "owner": {"reputation": 133, "user_id": 10046768, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gY5uC.jpg?s=128&g=1", "display_name": "hrmnjt", "link": "https://stackoverflow.com/users/10046768/hrmnjt"}, "is_accepted": false, "score": 3, "last_activity_date": 1568234633, "creation_date": 1568234633, "answer_id": 57896562, "question_id": 57896457, "link": "https://stackoverflow.com/questions/57896457/how-to-convert-sav-file-into-csv-file/57896562#57896562", "title": "How to convert .sav file into csv file", "body": "<p>GNU PSPP project (replacement for the proprietary program SPSS) has a helper tool to do this online - <a href=\"https://pspp.benpfaff.org/\" rel=\"nofollow noreferrer\">https://pspp.benpfaff.org/</a></p>\n\n<p>To do this locally\n1. Download GNU PSPP - <a href=\"http://www.gnu.org/software/pspp/get.html\" rel=\"nofollow noreferrer\">http://www.gnu.org/software/pspp/get.html</a>\n2. Use command line to do the conversion</p>\n\n<pre><code>pspp-convert &lt;input.sav&gt; &lt;output.csv&gt;\n</code></pre>\n\n<p>Similar question - <a href=\"https://stackoverflow.com/questions/15150586/how-to-open-spss-data-files-in-excel\">How to open spss data files in excel?</a></p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user11357465"}, "edited": false, "score": 0, "creation_date": 1568237679, "post_id": 57896591, "comment_id": 102215194, "body": "I&#39;ve followed the code and get an error,    &quot;from .pyreadstat import read_sas7bdat, read_xport, read_dta, read_sav, read_por, read_sas7bcat ImportError: DLL load failed: The specified module could not be found.&quot;"}, {"owner": {"reputation": 6705, "user_id": 2162212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29317094ee28cae6e61311c8f7192633?s=128&d=identicon&r=PG", "display_name": "mucio", "link": "https://stackoverflow.com/users/2162212/mucio"}, "edited": false, "score": 0, "creation_date": 1568237878, "post_id": 57896591, "comment_id": 102215241, "body": "did you install the module using <code>pip</code>?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user11357465"}, "edited": false, "score": 0, "creation_date": 1568353081, "post_id": 57896591, "comment_id": 102253758, "body": "Why would this make a difference? I just use Pycharm interface and manually install these libraries from there"}, {"owner": {"reputation": 6705, "user_id": 2162212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29317094ee28cae6e61311c8f7192633?s=128&d=identicon&r=PG", "display_name": "mucio", "link": "https://stackoverflow.com/users/2162212/mucio"}, "edited": false, "score": 0, "creation_date": 1568369866, "post_id": 57896591, "comment_id": 102261101, "body": "maybe <a href=\"https://github.com/Roche/pyreadstat/issues/33\" rel=\"nofollow noreferrer\">this</a> can help you"}], "tags": [], "owner": {"reputation": 6705, "user_id": 2162212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29317094ee28cae6e61311c8f7192633?s=128&d=identicon&r=PG", "display_name": "mucio", "link": "https://stackoverflow.com/users/2162212/mucio"}, "is_accepted": true, "score": 0, "last_activity_date": 1568234782, "creation_date": 1568234782, "answer_id": 57896591, "question_id": 57896457, "link": "https://stackoverflow.com/questions/57896457/how-to-convert-sav-file-into-csv-file/57896591#57896591", "title": "How to convert .sav file into csv file", "body": "<p>You are probably looking for the <a href=\"https://stackoverflow.com/questions/14647006/is-there-a-python-module-to-open-spss-files/20873154#20873154\">pyreadstat</a> module, you can find some code snippet to start on <a href=\"https://github.com/Roche/pyreadstat#basic-usage\" rel=\"nofollow noreferrer\">the github page</a>.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user11357465"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8186, "favorite_count": 0, "accepted_answer_id": 57896591, "answer_count": 2, "score": 2, "last_activity_date": 1568234782, "creation_date": 1568234029, "question_id": 57896457, "link": "https://stackoverflow.com/questions/57896457/how-to-convert-sav-file-into-csv-file", "title": "How to convert .sav file into csv file", "body": "<p>How do you convert .sav into .csv, or .sav into pandas DataFrame? Is there a direct way or doing this or a package that can do this?</p>\n"}, {"tags": ["python", "python-click"], "answers": [{"comments": [{"owner": {"reputation": 18468, "user_id": 5249307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c640cd731ca8e455d79860519b6b208?s=128&d=identicon&r=PG", "display_name": "donkopotamus", "link": "https://stackoverflow.com/users/5249307/donkopotamus"}, "edited": false, "score": 1, "creation_date": 1568234502, "post_id": 57896506, "comment_id": 102214165, "body": "Or you could use a <code>click.exit(&quot;some appropriate message&quot;)</code> rather than an exception."}, {"owner": {"reputation": 1971, "user_id": 7156080, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/OfOoi.jpg?s=128&g=1", "display_name": "ANIL", "link": "https://stackoverflow.com/users/7156080/anil"}, "edited": false, "score": 0, "creation_date": 1568234914, "post_id": 57896506, "comment_id": 102214313, "body": "when I tried this I got a SyntaxError:  <code>def create(name, view=None, provider): SyntaxError: non-default argument follows default argument</code>"}, {"owner": {"reputation": 6344, "user_id": 2486357, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2d50eaca20365c51634c9452835c50ab?s=128&d=identicon&r=PG", "display_name": "C_Z_", "link": "https://stackoverflow.com/users/2486357/c-z"}, "reply_to_user": {"reputation": 1971, "user_id": 7156080, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/OfOoi.jpg?s=128&g=1", "display_name": "ANIL", "link": "https://stackoverflow.com/users/7156080/anil"}, "edited": false, "score": 1, "creation_date": 1568235084, "post_id": 57896506, "comment_id": 102214369, "body": "@ANIL Make sure the <code>view=None</code> is the last thing in your argument list."}], "tags": [], "owner": {"reputation": 6344, "user_id": 2486357, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2d50eaca20365c51634c9452835c50ab?s=128&d=identicon&r=PG", "display_name": "C_Z_", "link": "https://stackoverflow.com/users/2486357/c-z"}, "is_accepted": true, "score": 1, "last_activity_date": 1568234329, "creation_date": 1568234329, "answer_id": 57896506, "question_id": 57896441, "link": "https://stackoverflow.com/questions/57896441/how-to-make-an-argument-optional-based-upon-another-arguments-value-in-python-u/57896506#57896506", "title": "How to make an argument optional based upon another argument&#39;s value in Python using click?", "body": "<p>There's no need for anything fancy, something like this will work</p>\n\n<pre><code>def create(name, provider, view=None):\n    if provider == \"aws\" and view is None:\n        raise AttributeError(\"View is required when provider is 'aws'\")\n</code></pre>\n"}], "owner": {"reputation": 1971, "user_id": 7156080, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/OfOoi.jpg?s=128&g=1", "display_name": "ANIL", "link": "https://stackoverflow.com/users/7156080/anil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 57896506, "answer_count": 1, "score": 0, "last_activity_date": 1568234355, "creation_date": 1568233964, "last_edit_date": 1568234355, "question_id": 57896441, "link": "https://stackoverflow.com/questions/57896441/how-to-make-an-argument-optional-based-upon-another-arguments-value-in-python-u", "title": "How to make an argument optional based upon another argument&#39;s value in Python using click?", "body": "<p>I have this following CLI method that I have created using <code>click</code> module in python.</p>\n\n<pre><code>import click\n\n@click.command()\n@click.argument(\"name\")\n@click.option(\"--provider\", \"-p\", default=\"aws\", help=\"Cloud Provider\")\n@click.argument(\"view\", required=True)\n\ndef create(name, view, provider):\n   print name\n   print view\n   print provider\n\nif __name__ == '__main__':\n    create()\n</code></pre>\n\n<p>I want to manipulate <code>view</code> option based on the value it gets for <code>--provider</code>. For example if <code>--provider</code> is <code>aws</code> then <code>required=True</code> for <code>view</code> else <code>required=False</code> making <code>view</code> optional while running my code.</p>\n"}, {"tags": ["python", "python-3.x", "async-await", "generator", "coroutine"], "answers": [{"tags": [], "owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "is_accepted": false, "score": 1, "last_activity_date": 1577993603, "last_edit_date": 1577993603, "creation_date": 1568266522, "answer_id": 57900306, "question_id": 57896438, "link": "https://stackoverflow.com/questions/57896438/whats-the-difference-between-the-call-return-protocol-of-oldstyle-and-newstyle/57900306#57900306", "title": "What&#39;s the difference between the call/return protocol of oldstyle and newstyle coroutines in Python?", "body": "<p>It is possible, and perhaps instructive, to relate the two models pretty directly.  Modern coroutines are actually implemented, like the old, in terms of the (generalized) iterator protocol.  The difference is that return values from the iterator are automatically propagated upwards through any number of coroutine callers (via an implicit <code>yield from</code>), whereas actual return values are packaged into <code>StopIteration</code> exceptions.</p>\n\n<p>The purpose of this choreography is to inform the driver (the presumed \u201cevent loop\u201d) of the conditions under which a coroutine may be resumed.  That driver may resume the coroutine from an unrelated stack frame and may send data back into the execution\u2014via the awaited object, since it is the only channel known to the driver\u2014again, much as <code>send</code> communicates transparently through a <code>yield from</code>.</p>\n\n<p>An example of such bidirectional communication:</p>\n\n<pre><code>class Send:\n  def __call__(self,x): self.value=x\n  def __await__(self):\n    yield self  # same object for awaiter and driver\n    raise StopIteration(self.value)\n\nasync def add(x):\n  return await Send()+x\n\ndef plus(a,b):  # a driver\n  c=add(b)\n  # Equivalent to next(c.__await__())\n  c.send(None)(a)\n  try: c.send(None)\n  except StopIteration as si: return si.value\n  raise RuntimeError(\"Didn't resume/finish\")\n</code></pre>\n\n<p>A real driver would of course decide to call the result of <code>send</code> only after recognizing it as a <code>Send</code>.</p>\n\n<p>Practically speaking, you don\u2019t want to drive modern coroutines yourself; they are syntax optimized for exactly the opposite approach.  It would, however, be straightforward to use a queue to handle one direction of the communication (as you already noted):</p>\n\n<pre><code>async def avg(q):\n  n=s=0\n  while True:\n    x=await q.get()\n    if x is None: break\n    n+=1; s+=x\n    yield s/n\n\nasync def test():\n  q=asyncio.Queue()\n  i=iter([10,30,5])\n  await q.put(next(i))\n  async for a in avg(q):\n    print(a)\n    await q.put(next(i,None))\n</code></pre>\n\n<p>Providing values that way is a bit painful, but it\u2019s easy if they\u2019re coming from another <code>Queue</code> or so.</p>\n"}], "owner": {"reputation": 333, "user_id": 620316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5917a6ba1ff861ded8d23843f818196a?s=128&d=identicon&r=PG", "display_name": "user620316", "link": "https://stackoverflow.com/users/620316/user620316"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1577993603, "creation_date": 1568233951, "last_edit_date": 1568240472, "question_id": 57896438, "link": "https://stackoverflow.com/questions/57896438/whats-the-difference-between-the-call-return-protocol-of-oldstyle-and-newstyle", "title": "What&#39;s the difference between the call/return protocol of oldstyle and newstyle coroutines in Python?", "body": "<p>I'm transitioning from old-style coroutines (where 'yield' returns a value supplied by 'send', but\nwhich are otherwise essentially generators) to new-style coroutines with 'async def' and 'await'.\nThere are a couple of things that really puzzle me.</p>\n\n<p>Consider the following old-style coroutine that computes the running average of numbers supplied to\nit by 'send', at each point returning the mean-so-far. (This example is from Chapter 16 of <em>Fluent\nPython</em> by Luciano Ramalho.)</p>\n\n<pre><code>def averager():\n    total = 0.0\n    count = 0\n    average = None\n    while True:\n         term = yield average\n         total += term\n         count += 1\n         average = total/count\n</code></pre>\n\n<p>If I now create and prime a coroutine object, I can send it numbers and it will return the running\naverage:</p>\n\n<pre><code>&gt;&gt;&gt; coro_avg = averager()\n&gt;&gt;&gt; next(coro_avg)\n&gt;&gt;&gt; coro_avg.send(10)\n10.0\n&gt;&gt;&gt; coro_avg.send(30)\n20.0\n&gt;&gt;&gt; coro_avg.send(5)\n15.0\n</code></pre>\n\n<p>...and so forth. The question is, how would such a coroutine be written with async/await? There\nare three points that confuse me. Do I understand them correctly?</p>\n\n<p>1) In the old style, anybody can send numbers to the same instance of the averager. I can pass\naround the value coro_avg above and every time .send(N) is called, no matter from where, N is added to the same running\ntotal. With async/await, however, there's no way to \"send in a value\". Each time you 'await' a\ncoroutine you await a new instance with its own context, its own variable values.</p>\n\n<p>2) It seems that the only way for an 'async def' coroutine to hand a value back to the thing awaiting\nit is to 'return' and hence lose context. You can't call 'yield' from inside an 'async\ndef' coroutine (or rather if you do you've created an async generator which\ncan't be used with await). So an 'async def' coroutine can't compute a value and hand\nit out while maintaining context, as averager does.</p>\n\n<p>3) Almost the same as (1): When a coroutine calls 'await' it waits for a single, specific awaitable,\nnamely the argument to await. This is very unlike old-style coroutines, which give up control and\nsit around waiting for <em>anyone</em> to send something to them.</p>\n\n<p>I realize that the new coroutines are a distinct coding paradigm from the old ones: They're used\nwith event loops, and you use data structures like queues to have the coroutine emit a value without\nreturning and losing context. It's kind of unfortunate and somewhat confusing that new and old share the same\nname---coroutine---given that their call/return protocols are so different.</p>\n"}, {"tags": ["python", "variables", "input"], "comments": [{"owner": {"reputation": 442, "user_id": 9932916, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-tzXpqeGz2Kg/AAAAAAAAAAI/AAAAAAAAAAA/-OUONdsc09A/photo.jpg?sz=128", "display_name": "Tagger5926", "link": "https://stackoverflow.com/users/9932916/tagger5926"}, "edited": false, "score": 0, "creation_date": 1568234166, "post_id": 57896433, "comment_id": 102214038, "body": "are you trying to multiply two strings together? what is the expected output?"}, {"owner": {"reputation": 11442, "user_id": 11610186, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HKHsybo6y0o/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdY2OjHwdlmaUkMBZsmKiCkkybzQw/mo/photo.jpg?sz=128", "display_name": "Grzegorz Skibinski", "link": "https://stackoverflow.com/users/11610186/grzegorz-skibinski"}, "edited": false, "score": 0, "creation_date": 1568234206, "post_id": 57896433, "comment_id": 102214051, "body": "try <code>print(slash, x*szokoz, backslash)</code>"}, {"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1568234209, "post_id": 57896433, "comment_id": 102214052, "body": "<code>input()</code> returns a string.  If you want to convert to an integer, wrap the call inside <code>int()</code>, like this: <code>x = int(input(&quot;type an integer&quot;))</code>"}, {"owner": {"reputation": 127, "user_id": 9297288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22684a8894c3f753e26a9b32141c72cc?s=128&d=identicon&r=PG&f=1", "display_name": "Fletchy1995", "link": "https://stackoverflow.com/users/9297288/fletchy1995"}, "edited": false, "score": 0, "creation_date": 1568234572, "post_id": 57896433, "comment_id": 102214201, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/4435169/how-do-i-append-one-string-to-another-in-python\">How do I append one string to another in Python?</a>"}, {"owner": {"reputation": 13, "user_id": 8575698, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dz5iUk4rYT8/AAAAAAAAAAI/AAAAAAAABJU/PwvXXGtXpfU/photo.jpg?sz=128", "display_name": "hetot he", "link": "https://stackoverflow.com/users/8575698/hetot-he"}, "edited": false, "score": 0, "creation_date": 1568234913, "post_id": 57896433, "comment_id": 102214312, "body": "for anyone wondering about what i want to do with this i want it to spell out a big x that you define the height of"}], "answers": [{"comments": [{"owner": {"reputation": 1565, "user_id": 4777984, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hKj3L.jpg?s=128&g=1", "display_name": "tgikal", "link": "https://stackoverflow.com/users/4777984/tgikal"}, "edited": false, "score": 0, "creation_date": 1568234411, "post_id": 57896484, "comment_id": 102214119, "body": "I&#39;m actually surprised, python is ok with multiplying a <code>string</code> by an <code>int</code> and adding the result to other strings."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 1565, "user_id": 4777984, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hKj3L.jpg?s=128&g=1", "display_name": "tgikal", "link": "https://stackoverflow.com/users/4777984/tgikal"}, "edited": false, "score": 1, "creation_date": 1568234454, "post_id": 57896484, "comment_id": 102214137, "body": "@tgikal You can multiply any sequence by an int, and it just duplicates the sequence that many times. E.g. <code>[0] * 3 == [0, 0, 0]</code>"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 1565, "user_id": 4777984, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hKj3L.jpg?s=128&g=1", "display_name": "tgikal", "link": "https://stackoverflow.com/users/4777984/tgikal"}, "edited": false, "score": 1, "creation_date": 1568234514, "post_id": 57896484, "comment_id": 102214171, "body": "It makes sense: x * 3 == x + x + x. When <code>+</code> is concatenation, it simply concatenates that many times."}, {"owner": {"reputation": 13, "user_id": 8575698, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dz5iUk4rYT8/AAAAAAAAAAI/AAAAAAAABJU/PwvXXGtXpfU/photo.jpg?sz=128", "display_name": "hetot he", "link": "https://stackoverflow.com/users/8575698/hetot-he"}, "edited": false, "score": 0, "creation_date": 1568234537, "post_id": 57896484, "comment_id": 102214184, "body": "how do I do that properly? i have tried x=int(x) but it doesn&#39;t seem to work"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 13, "user_id": 8575698, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dz5iUk4rYT8/AAAAAAAAAAI/AAAAAAAABJU/PwvXXGtXpfU/photo.jpg?sz=128", "display_name": "hetot he", "link": "https://stackoverflow.com/users/8575698/hetot-he"}, "edited": false, "score": 0, "creation_date": 1568234630, "post_id": 57896484, "comment_id": 102214221, "body": "@hetothe What do you get instead of the expected number?"}, {"owner": {"reputation": 13, "user_id": 8575698, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dz5iUk4rYT8/AAAAAAAAAAI/AAAAAAAABJU/PwvXXGtXpfU/photo.jpg?sz=128", "display_name": "hetot he", "link": "https://stackoverflow.com/users/8575698/hetot-he"}, "edited": false, "score": 0, "creation_date": 1568234665, "post_id": 57896484, "comment_id": 102214237, "body": "@Barmar oh sorry didn&#39;t notice it thankyou for the help!"}], "tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": true, "score": 2, "last_activity_date": 1568234177, "creation_date": 1568234177, "answer_id": 57896484, "question_id": 57896433, "link": "https://stackoverflow.com/questions/57896433/my-code-puts-out-invalid-syntax-but-i-dont-know-whats-wrong-with-my-variable/57896484#57896484", "title": "my code puts out invalid syntax but i dont know whats wrong with my variable", "body": "<p>You don't concatenate strings simply by putting them next to each other, you need to use the concatenation operator (you can put string <em>literals</em> next to each other, but that's just part of the literal syntax).</p>\n\n<p>Also, if you're using Python 3, <code>input()</code> returns a string, not a number, you need to convert it to an integer.</p>\n\n<pre><code>x=int(input(\"adja meg az x magass\u00e1g\u00e1t, sz\u00e9less\u00e9g\u00e9t egy sz\u00e1m k\u00e9nt\"))\nszokoz=\" \"\nslash=\"/\"\nbackslash=\"\\\\\"\nprint(slash + x*szokoz + backslash)\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 8575698, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dz5iUk4rYT8/AAAAAAAAAAI/AAAAAAAABJU/PwvXXGtXpfU/photo.jpg?sz=128", "display_name": "hetot he", "link": "https://stackoverflow.com/users/8575698/hetot-he"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 57896484, "answer_count": 1, "score": 0, "last_activity_date": 1568234243, "creation_date": 1568233914, "question_id": 57896433, "link": "https://stackoverflow.com/questions/57896433/my-code-puts-out-invalid-syntax-but-i-dont-know-whats-wrong-with-my-variable", "title": "my code puts out invalid syntax but i dont know whats wrong with my variable", "body": "<p>it puts out invalid syntax but I defined x so I don't really know what I'm doing wrong</p>\n\n<p>I have tried putting x as an int and float. because it has to be a number otherwise it won't work</p>\n\n<pre><code>x=input(\"adja meg az x magass\u00e1g\u00e1t, sz\u00e9less\u00e9g\u00e9t egy sz\u00e1m k\u00e9nt\")\nszokoz=\" \"\nslash=\"/\"\nbackslash=\"\\\\\"\nprint(slash x*szokoz backslash)\n</code></pre>\n\n<p>invalid syntax</p>\n"}, {"tags": ["python", "linux", "bash", "docker"], "comments": [{"owner": {"reputation": 8374, "user_id": 3691891, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dcCUM.jpg?s=128&g=1", "display_name": "Arkadiusz Drabczyk", "link": "https://stackoverflow.com/users/3691891/arkadiusz-drabczyk"}, "edited": false, "score": 0, "creation_date": 1568234253, "post_id": 57896407, "comment_id": 102214070, "body": "If you didn&#39;t need <code>sudo</code> before why do you think you need it now?"}, {"owner": {"reputation": 6193, "user_id": 4544413, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e76680e93b59e0f38238f5a0c47d1ca3?s=128&d=identicon&r=PG&f=1", "display_name": "Luis Ramon Ramirez Rodriguez", "link": "https://stackoverflow.com/users/4544413/luis-ramon-ramirez-rodriguez"}, "reply_to_user": {"reputation": 8374, "user_id": 3691891, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dcCUM.jpg?s=128&g=1", "display_name": "Arkadiusz Drabczyk", "link": "https://stackoverflow.com/users/3691891/arkadiusz-drabczyk"}, "edited": false, "score": 0, "creation_date": 1568234438, "post_id": 57896407, "comment_id": 102214130, "body": "@ArkadiuszDrabczyk my bad, I do need it now. Just corrected the question, I currently do: sudo bash create_image.sh"}, {"owner": {"reputation": 690, "user_id": 1898437, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7dc6fab73ea7b9e092cf618335b7948b?s=128&d=identicon&r=PG", "display_name": "Anoop R Desai", "link": "https://stackoverflow.com/users/1898437/anoop-r-desai"}, "edited": false, "score": 0, "creation_date": 1568234996, "post_id": 57896407, "comment_id": 102214345, "body": "Possible duplicate - <a href=\"https://stackoverflow.com/questions/567542/running-a-command-as-a-super-user-from-a-python-script\">running a command as a super user from a python script</a>"}, {"owner": {"reputation": 95, "user_id": 9283447, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PiZac.jpg?s=128&g=1", "display_name": "MohamedSaeed", "link": "https://stackoverflow.com/users/9283447/mohamedsaeed"}, "edited": false, "score": 0, "creation_date": 1568235106, "post_id": 57896407, "comment_id": 102214381, "body": "You can try this solution here <a href=\"https://stackoverflow.com/questions/13045593/using-sudo-with-python-script\" title=\"using sudo with python script\">stackoverflow.com/questions/13045593/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 6193, "user_id": 4544413, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e76680e93b59e0f38238f5a0c47d1ca3?s=128&d=identicon&r=PG&f=1", "display_name": "Luis Ramon Ramirez Rodriguez", "link": "https://stackoverflow.com/users/4544413/luis-ramon-ramirez-rodriguez"}, "edited": false, "score": 0, "creation_date": 1568235864, "post_id": 57896676, "comment_id": 102214653, "body": "Thanks! I just added some details to the question"}, {"owner": {"reputation": 133, "user_id": 10046768, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gY5uC.jpg?s=128&g=1", "display_name": "hrmnjt", "link": "https://stackoverflow.com/users/10046768/hrmnjt"}, "reply_to_user": {"reputation": 6193, "user_id": 4544413, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e76680e93b59e0f38238f5a0c47d1ca3?s=128&d=identicon&r=PG&f=1", "display_name": "Luis Ramon Ramirez Rodriguez", "link": "https://stackoverflow.com/users/4544413/luis-ramon-ramirez-rodriguez"}, "edited": false, "score": 1, "creation_date": 1568236160, "post_id": 57896676, "comment_id": 102214735, "body": "I would suggest you to create a docker-compose and makefile. Whenever you need to run a particular docker function you could use make commands to do that - triggered by the API"}, {"owner": {"reputation": 133, "user_id": 10046768, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gY5uC.jpg?s=128&g=1", "display_name": "hrmnjt", "link": "https://stackoverflow.com/users/10046768/hrmnjt"}, "reply_to_user": {"reputation": 6193, "user_id": 4544413, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e76680e93b59e0f38238f5a0c47d1ca3?s=128&d=identicon&r=PG&f=1", "display_name": "Luis Ramon Ramirez Rodriguez", "link": "https://stackoverflow.com/users/4544413/luis-ramon-ramirez-rodriguez"}, "edited": false, "score": 1, "creation_date": 1568236208, "post_id": 57896676, "comment_id": 102214754, "body": "Reasoning for suggesting the solution - <a href=\"http://datakurre.pandala.org/2016/04/evolution-of-our-makefile-for-docker.html/\" rel=\"nofollow noreferrer\">datakurre.pandala.org/2016/04/&hellip;</a>"}, {"owner": {"reputation": 133, "user_id": 10046768, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gY5uC.jpg?s=128&g=1", "display_name": "hrmnjt", "link": "https://stackoverflow.com/users/10046768/hrmnjt"}, "reply_to_user": {"reputation": 6193, "user_id": 4544413, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e76680e93b59e0f38238f5a0c47d1ca3?s=128&d=identicon&r=PG&f=1", "display_name": "Luis Ramon Ramirez Rodriguez", "link": "https://stackoverflow.com/users/4544413/luis-ramon-ramirez-rodriguez"}, "edited": false, "score": 1, "creation_date": 1568236284, "post_id": 57896676, "comment_id": 102214776, "body": "@luis-ramon-ramirez-rodriguez Or you can read this blog towards the last section - <a href=\"https://medium.com/@daniel.carlier/how-to-build-a-simple-flask-restful-api-with-docker-compose-2d849d738137\" rel=\"nofollow noreferrer\">medium.com/@daniel.carlier/&hellip;</a>"}], "tags": [], "owner": {"reputation": 133, "user_id": 10046768, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gY5uC.jpg?s=128&g=1", "display_name": "hrmnjt", "link": "https://stackoverflow.com/users/10046768/hrmnjt"}, "is_accepted": true, "score": 3, "last_activity_date": 1568238111, "last_edit_date": 1568238111, "creation_date": 1568235254, "answer_id": 57896676, "question_id": 57896407, "link": "https://stackoverflow.com/questions/57896407/run-sh-script-from-python-as-sudo/57896676#57896676", "title": "Run .sh script from python as sudo", "body": "<p>You can try:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>subprocess.call(['sudo', 'bash', 'create_image.sh' ])\n</code></pre>\n\n<p>which is equivalent of  </p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>sudo bash create_image.sh\n</code></pre>\n\n<p><strong>Note</strong>: Let me say that there are better ways of automating docker container creation - please check <a href=\"https://docs.docker.com/compose/\" rel=\"nofollow noreferrer\">docker-compose</a> which can build and start the container easily. If you can elaborate more on the use case, we could help you with an elegant solution for docker. It might not be a python problem</p>\n\n<p>EDIT:\nFollowing the comments, it would be better to create a docker-compose and makefile is used to issue docker commands. Inspiration - <a href=\"https://medium.com/@daniel.carlier/how-to-build-a-simple-flask-restful-api-with-docker-compose-2d849d738137\" rel=\"nofollow noreferrer\">https://medium.com/@daniel.carlier/how-to-build-a-simple-flask-restful-api-with-docker-compose-2d849d738137</a></p>\n"}, {"tags": [], "owner": {"reputation": 105, "user_id": 7916052, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wdIGw.jpg?s=128&g=1", "display_name": "Rasul Osmanov", "link": "https://stackoverflow.com/users/7916052/rasul-osmanov"}, "is_accepted": false, "score": 1, "last_activity_date": 1568841220, "creation_date": 1568841220, "answer_id": 58000797, "question_id": 57896407, "link": "https://stackoverflow.com/questions/57896407/run-sh-script-from-python-as-sudo/58000797#58000797", "title": "Run .sh script from python as sudo", "body": "<p>In case that's because your user can't run docker without sudo, probably it's better to grant him docker API access by including him to docker group: <a href=\"https://askubuntu.com/questions/477551/how-can-i-use-docker-without-sudo\">https://askubuntu.com/questions/477551/how-can-i-use-docker-without-sudo</a></p>\n\n<p>Simply adding user to docker group:</p>\n\n<p><code>sudo gpasswd -a $USER docker</code></p>\n\n<p>Also if You want to automate docker operations on python, I'd recommend to use python library for docker: <a href=\"https://stackoverflow.com/questions/45115509/how-to-build-an-image-using-docker-api-python-client\">How to build an Image using Docker API Python Client?</a></p>\n"}], "owner": {"reputation": 6193, "user_id": 4544413, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e76680e93b59e0f38238f5a0c47d1ca3?s=128&d=identicon&r=PG&f=1", "display_name": "Luis Ramon Ramirez Rodriguez", "link": "https://stackoverflow.com/users/4544413/luis-ramon-ramirez-rodriguez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 154, "favorite_count": 1, "accepted_answer_id": 57896676, "answer_count": 2, "score": 0, "last_activity_date": 1568841220, "creation_date": 1568233818, "last_edit_date": 1568235835, "question_id": 57896407, "link": "https://stackoverflow.com/questions/57896407/run-sh-script-from-python-as-sudo", "title": "Run .sh script from python as sudo", "body": "<p>I'm working on a project with python where I want to automate docker containers creation. I have the project folder already with includes all the files required to create the image. </p>\n\n<p>One of these is create_image.sh</p>\n\n<pre><code>docker build -t my_container:latest .\n</code></pre>\n\n<p>Currently I do: </p>\n\n<pre><code>sudo bash create_image.sh\n</code></pre>\n\n<p>But now I need to automate this process from python.\nI have tried: </p>\n\n<pre><code>import os\nimport subprocess\nsubprocess.check_call(\"bash -c '. create_image.sh'\", shell=True)\n</code></pre>\n\n<p>But I get this error: </p>\n\n<pre><code>CalledProcessError: Command 'bash -c '. create_image.sh'' returned non-zero exit status 1.\n</code></pre>\n\n<p>EDIT: </p>\n\n<p>The use case is to automate containers creation through an API, I have the code in flask and python until this point, where I got stuck in the images creation from the docker file. The rest is automated from templates.  </p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 3830, "user_id": 1176061, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a9fdf3c78b23503dd8529db28e08e84?s=128&d=identicon&r=PG", "display_name": "DeadChex", "link": "https://stackoverflow.com/users/1176061/deadchex"}, "edited": false, "score": 0, "creation_date": 1568234157, "post_id": 57896382, "comment_id": 102214037, "body": "Try printing out your variables on every loop and see if they match what you expect... you&#39;ll likely find the issue"}], "answers": [{"tags": [], "owner": {"reputation": 3651, "user_id": 3653343, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wC454.jpg?s=128&g=1", "display_name": "Nikaido", "link": "https://stackoverflow.com/users/3653343/nikaido"}, "is_accepted": false, "score": 0, "last_activity_date": 1568237008, "last_edit_date": 1568237008, "creation_date": 1568235950, "answer_id": 57896795, "question_id": 57896382, "link": "https://stackoverflow.com/questions/57896382/the-credit-plan-at-tidbit-computer-store/57896795#57896795", "title": "The credit plan at TidBit Computer Store", "body": "<p>The problem is that you are deleting from <code>ending</code> a value (<code>payment</code>) that becomes quickly really small at each iteration (by a factor of 1/20 = 0.05).</p>\n\n<p>Fixing:</p>\n\n<pre><code>ending = 1000\nN = ending\n</code></pre>\n\n<p>as start values, you get:</p>\n\n<pre><code>while ending&gt; 0:\n    Month+=1 \n    payment = N * .05\n    ending-=payment\n    interest = (starting N * rate) / 12 # don't think about this value now \n    principal = payment - interest # don't think about this value now \n    N = ending + payment # N becomes the previous ending, without subtracting payment\n    print(\"Ending: \", ending, \"Payment:\", payment)\n\n\n\n\n# Ending:  4e-323 Payment: 0.0\n# Ending:  4e-323 Payment: 0.0\n# Ending:  4e-323 Payment: 0.0\n...\n</code></pre>\n\n<p>Basically, the amount that you pay at the end becomes so small that the values doesn't go under <code>4e-323</code>, which is really near to 0.</p>\n\n<p>And because <code>4e-323 * 0.05</code> is basically 0 in python you get a value that is forever near to 0 without becoming smaller. </p>\n\n<pre><code>payment = 4e-323 * 0.05 # 0\nending -= payment # 4e-323 - 0 = 4e-323\n</code></pre>\n\n<p>One solution could be to set the condition in the while statement as such:</p>\n\n<pre><code>while ending &gt; 0.00000001 :\n     ...\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 12054969, "user_type": "registered", "profile_image": "https://graph.facebook.com/2780939271935989/picture?type=large", "display_name": "Kenton Jolly", "link": "https://stackoverflow.com/users/12054969/kenton-jolly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 216, "favorite_count": 1, "answer_count": 1, "score": -1, "last_activity_date": 1568237008, "creation_date": 1568233732, "question_id": 57896382, "link": "https://stackoverflow.com/questions/57896382/the-credit-plan-at-tidbit-computer-store", "title": "The credit plan at TidBit Computer Store", "body": "<p>Program that takes the purchase price as input. The program should display a table, with appropriate headers, of a payment schedule for the lifetime of the loan. </p>\n\n<p>I am new to python coding I have tried for hours and the resulted I posted is the best I can do. I have tried to use \"break\" but that result only gets me the first two months.</p>\n\n<pre><code>while ending&gt; 0:\n    Month+=1 \n    payment = starting N * .05\n    ending-=payment\n    interest = (starting N * rate) / 12\n    principal = payment - interest\n    starting N = ending + payment\n</code></pre>\n\n<p>infinite loop</p>\n"}, {"tags": ["python", "django", "view"], "comments": [{"owner": {"reputation": 38834, "user_id": 3705840, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/a7ybc.png?s=128&g=1", "display_name": "lmiguelvargasf", "link": "https://stackoverflow.com/users/3705840/lmiguelvargasf"}, "edited": false, "score": 1, "creation_date": 1568233798, "post_id": 57896373, "comment_id": 102213941, "body": "Can you give more details about your <code>Article</code> model?"}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 10970944, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Af5aHTjAiZI/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMaRMrbN7HIoObmCZJ8krNg1kAddw/mo/photo.jpg?sz=128", "display_name": "Bartosz Zielinski", "link": "https://stackoverflow.com/users/10970944/bartosz-zielinski"}, "edited": false, "score": 0, "creation_date": 1568234149, "post_id": 57896445, "comment_id": 102214033, "body": "Okay but how to detect when someone will click at my article?"}, {"owner": {"reputation": 3730, "user_id": 5616096, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PjKci.jpg?s=128&g=1", "display_name": "Matthew Gaiser", "link": "https://stackoverflow.com/users/5616096/matthew-gaiser"}, "reply_to_user": {"reputation": 19, "user_id": 10970944, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Af5aHTjAiZI/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMaRMrbN7HIoObmCZJ8krNg1kAddw/mo/photo.jpg?sz=128", "display_name": "Bartosz Zielinski", "link": "https://stackoverflow.com/users/10970944/bartosz-zielinski"}, "edited": false, "score": 0, "creation_date": 1568234232, "post_id": 57896445, "comment_id": 102214062, "body": "When someone clicks on the article, Django goes to the particular view for that article to provide it to the person clicking. So the act of opening the page registers the increment in view_count."}, {"owner": {"reputation": 19, "user_id": 10970944, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Af5aHTjAiZI/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMaRMrbN7HIoObmCZJ8krNg1kAddw/mo/photo.jpg?sz=128", "display_name": "Bartosz Zielinski", "link": "https://stackoverflow.com/users/10970944/bartosz-zielinski"}, "edited": false, "score": 0, "creation_date": 1568234443, "post_id": 57896445, "comment_id": 102214132, "body": "Okay. I&#39;d like when the person will click 10 times, I don&#39;t want 10 views. Can I count views throught session of user? When user will click 10 times, the views will be equal to 1 view?"}, {"owner": {"reputation": 3730, "user_id": 5616096, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PjKci.jpg?s=128&g=1", "display_name": "Matthew Gaiser", "link": "https://stackoverflow.com/users/5616096/matthew-gaiser"}, "reply_to_user": {"reputation": 19, "user_id": 10970944, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Af5aHTjAiZI/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMaRMrbN7HIoObmCZJ8krNg1kAddw/mo/photo.jpg?sz=128", "display_name": "Bartosz Zielinski", "link": "https://stackoverflow.com/users/10970944/bartosz-zielinski"}, "edited": false, "score": 0, "creation_date": 1568240299, "post_id": 57896445, "comment_id": 102215810, "body": "You essentially would need to track whether the user had already been seen before on that page. Cookies and session could work for that purpose."}], "tags": [], "owner": {"reputation": 3730, "user_id": 5616096, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PjKci.jpg?s=128&g=1", "display_name": "Matthew Gaiser", "link": "https://stackoverflow.com/users/5616096/matthew-gaiser"}, "is_accepted": false, "score": 0, "last_activity_date": 1568233980, "creation_date": 1568233980, "answer_id": 57896445, "question_id": 57896373, "link": "https://stackoverflow.com/questions/57896373/counting-number-of-views-article/57896445#57896445", "title": "Counting number of views article", "body": "<p>A very basic way to do it would be to have:</p>\n\n<p>In your <code>models.py</code> have a<code>view_count = models.IntegerField(default=0)</code> in your <code>Article</code> model. </p>\n\n<p>In <code>views.py</code>, you would increment <code>view_count</code> by 1 every time it is called and add\n`article.view_count += 1' somewhere to keep track of how many hits the page received. </p>\n\n<p>This runs into the problem of tracking whether it is the same person making the views and could easily be gamed, but it is a workable rudimentary solution. </p>\n"}], "owner": {"reputation": 19, "user_id": 10970944, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Af5aHTjAiZI/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMaRMrbN7HIoObmCZJ8krNg1kAddw/mo/photo.jpg?sz=128", "display_name": "Bartosz Zielinski", "link": "https://stackoverflow.com/users/10970944/bartosz-zielinski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1568233980, "creation_date": 1568233669, "last_edit_date": 1568233771, "question_id": 57896373, "link": "https://stackoverflow.com/questions/57896373/counting-number-of-views-article", "title": "Counting number of views article", "body": "<p>Let's assume I've blog with articles. I'd like to count number of views my article in Django. For example: Views: 153.</p>\n\n<p>How can I count number of the views?</p>\n\n<pre><code>def preview(request, id):\n   article = Articles.objects.get(id=id)\n</code></pre>\n"}, {"tags": ["python", "error-handling", "connection"], "comments": [{"owner": {"reputation": 423, "user_id": 10858691, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-fmYSLY2fD0E/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcbSmJpGprNawDUpFgBVjcmb0W5W9g/mo/photo.jpg?sz=128", "display_name": "MasayoMusic", "link": "https://stackoverflow.com/users/10858691/masayomusic"}, "edited": false, "score": 0, "creation_date": 1591653944, "post_id": 57896371, "comment_id": 110133116, "body": "Did you solve this? I am getting the same error."}], "owner": {"reputation": 21, "user_id": 4015352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69340298bde2cf6c6d901ed4a8e4b0a2?s=128&d=identicon&r=PG&f=1", "display_name": "freak11", "link": "https://stackoverflow.com/users/4015352/freak11"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 96, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1568233659, "creation_date": 1568233659, "question_id": 57896371, "link": "https://stackoverflow.com/questions/57896371/connectionreseterror-winerror-10054-when-reading-website-into-pandas", "title": "ConnectionResetError: [WinError 10054] when reading Website into Pandas", "body": "<p>I try to read the website \"<a href=\"https://www.zacks.com/earnings/earnings-calendar\" rel=\"nofollow noreferrer\">https://www.zacks.com/earnings/earnings-calendar</a>\" into Pandas with the code below, but I always get the following error: ConnectionResetError: [WinError 10054] An existing connection was forcibly closed by the remote host</p>\n\n<pre><code>import pandas as pd\n\ndf = pd.read_html('https://www.zacks.com/earnings/earnings-calendar', header = 1)\n</code></pre>\n\n<p>ConnectionResetError: [WinError 10054] An existing connection was forcibly closed by the remote host</p>\n"}, {"tags": ["python", "numpy"], "comments": [{"owner": {"reputation": 2686, "user_id": 9705687, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v7dmz.jpg?s=128&g=1", "display_name": "bfris", "link": "https://stackoverflow.com/users/9705687/bfris"}, "edited": false, "score": 0, "creation_date": 1568236944, "post_id": 57896289, "comment_id": 102214988, "body": "I think @EliadL&#39;s answer is good and it illustrates why &quot;it depends&quot; on whether you should vectorize. You will often get a performance boost from vectorization -- i.e. your code will run faster. However, there is something to be said for readability. For me, the original <code>for</code> loop in your code is more readable and understandable. OTOH you get into the habit of using numpy every day, then maybe <code>np.where</code> looks completely normal and you get a benefit of speed and readability."}], "answers": [{"comments": [{"owner": {"reputation": 7, "user_id": 11794760, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-gjliwwx7iA0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc-LSksl3f9nmaHSy3yTVbs1Gj6HA/photo.jpg?sz=128", "display_name": "erik townsend", "link": "https://stackoverflow.com/users/11794760/erik-townsend"}, "edited": false, "score": 0, "creation_date": 1568237065, "post_id": 57896626, "comment_id": 102215029, "body": "Thanks so much. But my REAL &quot;real question&quot; is how to learn about this. You knew exactly how to use np.where to achieve THIS PARTICULAR solution. I&#39;m really struggling to absorb the much bigger picture of how to write vectorized code in LOTS of situations. All the articles I can find online are about mathematical relationships. Any ideas how/where to learn to &quot;think vectorized&quot;? Thanks!!!"}, {"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "reply_to_user": {"reputation": 7, "user_id": 11794760, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-gjliwwx7iA0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc-LSksl3f9nmaHSy3yTVbs1Gj6HA/photo.jpg?sz=128", "display_name": "erik townsend", "link": "https://stackoverflow.com/users/11794760/erik-townsend"}, "edited": false, "score": 0, "creation_date": 1568237815, "post_id": 57896626, "comment_id": 102215225, "body": "@eriktownsend To a large extent it&#39;s like learning a new language if you are coming off from a non-vectorized wired mindset. So, just practice and force yourself to avoid loops! NumPy as an enviornment that has those vectorized ufuncs, tools, etc. gives us an easy way to do so, once you get past the syntax(which is easy again with the docs)."}, {"owner": {"reputation": 3482, "user_id": 4960855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d337833329a63160e4c4f9e3841bf90e?s=128&d=identicon&r=PG&f=1", "display_name": "EliadL", "link": "https://stackoverflow.com/users/4960855/eliadl"}, "edited": false, "score": 0, "creation_date": 1568238065, "post_id": 57896626, "comment_id": 102215293, "body": "I was first introduced to vectorization while learning MATLAB in a CS course. See <a href=\"https://www.mathworks.com/help/matlab/matlab_prog/array-comparison-with-relational-operators.html\" rel=\"nofollow noreferrer\">some examples here</a>. Later I ran into it again in two of Andrew Ng&#39;s courses online: <a href=\"https://www.coursera.org/lecture/machine-learning/vectorization-WnQWH\" rel=\"nofollow noreferrer\">Machine Learning</a> and <a href=\"https://www.coursera.org/lecture/neural-networks-deep-learning/vectorization-NYnog\" rel=\"nofollow noreferrer\">Deep Learning</a> (linked to relevant videos, they&#39;re freely available). With <code>numpy</code>, I improved the more I used and googled it or read the docs."}, {"owner": {"reputation": 7, "user_id": 11794760, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-gjliwwx7iA0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc-LSksl3f9nmaHSy3yTVbs1Gj6HA/photo.jpg?sz=128", "display_name": "erik townsend", "link": "https://stackoverflow.com/users/11794760/erik-townsend"}, "edited": false, "score": 0, "creation_date": 1568322989, "post_id": 57896626, "comment_id": 102248020, "body": "Thanks so much for this info. Super helpful!"}], "tags": [], "owner": {"reputation": 3482, "user_id": 4960855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d337833329a63160e4c4f9e3841bf90e?s=128&d=identicon&r=PG&f=1", "display_name": "EliadL", "link": "https://stackoverflow.com/users/4960855/eliadl"}, "is_accepted": true, "score": 2, "last_activity_date": 1568238465, "last_edit_date": 1568238465, "creation_date": 1568234942, "answer_id": 57896626, "question_id": 57896289, "link": "https://stackoverflow.com/questions/57896289/vectorizing-conditional-logic-in-python/57896626#57896626", "title": "Vectorizing CONDITIONAL logic in Python?", "body": "<p>First thing's first, the vectorized version:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>override_is_not_nan = np.logical_not(np.isnan(override))\nnp.where(override_is_not_nan, override, default)\n</code></pre>\n\n<p>As for your real question, vectorization is useful for multiprocessing.<br>\nAnd not just for multi-core CPUs.<br>\nConsidering today's GPUs have thousands of cores, using tensors with similar code can make it run much faster.<br>\n<strong>How much</strong> faster? That depends on your data, implementation and hardware.<br>\nEvidently, the combination of vectorization with GPUs is part of what enabled the huge progress in the field of Deep Learning.</p>\n"}, {"tags": [], "owner": {"reputation": 1271, "user_id": 4465743, "user_type": "registered", "accept_rate": 73, "profile_image": "https://lh5.googleusercontent.com/-Dqf3p5-NRus/AAAAAAAAAAI/AAAAAAAAAJQ/3vdHWzXKiqI/photo.jpg?sz=128", "display_name": "Rajan Chauhan", "link": "https://stackoverflow.com/users/4465743/rajan-chauhan"}, "is_accepted": false, "score": 0, "last_activity_date": 1568236850, "creation_date": 1568236850, "answer_id": 57896952, "question_id": 57896289, "link": "https://stackoverflow.com/questions/57896289/vectorizing-conditional-logic-in-python/57896952#57896952", "title": "Vectorizing CONDITIONAL logic in Python?", "body": "<p>First find the indices where the non-nan values are located.<br>\nReplace the values as indices in the <code>default</code> array with <code>override</code> array values.</p>\n\n<pre><code>import numpy as np\nnp_default = np.array(default).asdtype(float) # Convert np_default to numpy array with float values\nnon_nan_indices = np.where(~np.isnan(override)) # Get non nan indices\nnp_default[non_nan_indices] = np.array(override)[non_nan_indices] # Replacing the values at non-nan indices\nnp_default # Returns array([1.  , 2.  , 3.5 , 4.  , 5.6 , 6.7 , 7.  , 8.95])\n</code></pre>\n\n<p>Vectorization is where numpy comes to your help it takes the advantage of typed natured of array which result in much faster operations. See <a href=\"https://datadiscuss.com/proof-that-numpy-is-much-faster-than-normal-python-array/\" rel=\"nofollow noreferrer\"> [BlogPost]</a> for detail.</p>\n"}, {"comments": [{"owner": {"reputation": 1409, "user_id": 2394952, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/1W5Fl.jpg?s=128&g=1", "display_name": "Adarsh Chavakula", "link": "https://stackoverflow.com/users/2394952/adarsh-chavakula"}, "edited": false, "score": 1, "creation_date": 1568237418, "post_id": 57896988, "comment_id": 102215122, "body": "Fun fact: <code>np.nan</code> fails self equality, ie. <code>np.nan == np.nan</code> returns <code>False</code>. So you can also replace the code with <code>[x if y==y else y for (x,y) in zip(default, override)]</code>"}], "tags": [], "owner": {"reputation": 1409, "user_id": 2394952, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/1W5Fl.jpg?s=128&g=1", "display_name": "Adarsh Chavakula", "link": "https://stackoverflow.com/users/2394952/adarsh-chavakula"}, "is_accepted": false, "score": 0, "last_activity_date": 1568237079, "creation_date": 1568237079, "answer_id": 57896988, "question_id": 57896289, "link": "https://stackoverflow.com/questions/57896289/vectorizing-conditional-logic-in-python/57896988#57896988", "title": "Vectorizing CONDITIONAL logic in Python?", "body": "<p>List comprehension is usually the preferred <em>one line</em> alternative to <code>for</code> loops in Python. It is possible to throw in a conditional into the comprehension as well.</p>\n\n<p>In this specific case we iterate over elements of <code>default</code> and <code>override</code> by zipping them together and replace values of <code>default</code> according to the conditional check.</p>\n\n<pre><code>&gt;&gt;&gt; [y if not(np.isnan(y)) else x for (x,y) in zip(default, override)]\n\n[1, 2, 3.5, 4, 5.6, 6.7, 7, 8.95]\n</code></pre>\n\n<p>To answer your broader question about vectorization and speedups, the answer unfortunately is <em>it depends</em>. There are situations where a simple <code>for</code> loop performs better than its vectorized counterparts. List comprehensions for example, is just for improving the readability of code as opposed to providing a serious speedup. </p>\n\n<p>The answers on <a href=\"https://stackoverflow.com/questions/2703310/list-comprehension-map-and-numpy-vectorize-performance\">this</a> question address this in more detail. </p>\n"}], "owner": {"reputation": 7, "user_id": 11794760, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-gjliwwx7iA0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc-LSksl3f9nmaHSy3yTVbs1Gj6HA/photo.jpg?sz=128", "display_name": "erik townsend", "link": "https://stackoverflow.com/users/11794760/erik-townsend"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 752, "favorite_count": 0, "accepted_answer_id": 57896626, "answer_count": 3, "score": 0, "last_activity_date": 1568238465, "creation_date": 1568233277, "last_edit_date": 1568234739, "question_id": 57896289, "link": "https://stackoverflow.com/questions/57896289/vectorizing-conditional-logic-in-python", "title": "Vectorizing CONDITIONAL logic in Python?", "body": "<p>Old-school c programmer trying to get with the times and learn Python. Struggling to see how to use vectorization effectively to replace for loops. I get the basic concept that Python can do mathematical functions on entire matricies in a single statement, and that's really cool. But I seldom work with mathematical relationships. Almost all my for loops apply CONDITIONAL logic.</p>\n\n<p>Here's a very simple example to illustrate the concept:</p>\n\n<pre><code>import numpy as np\n\n# Initial values\ndefault = [1,2,3,4,5,6,7,8]\n# Override values should only replace initial values when not nan\noverride = [np.nan,np.nan,3.5,np.nan,5.6,6.7,np.nan,8.95] \n\n# I wish I knew how to replace this for loop with a single line of vectorized code\nfor i in range(len(default)):\n    if(np.isnan(override[i])==False): #Only override when override value is other than nan\n        default[i]=override[i]\n\ndefault\n</code></pre>\n\n<p>I have a feeling that for loop could be eliminated with a single python statement that only overwrites values of <code>default</code> with values of <code>override</code> that are not <code>np.nan</code>. But I can't see how to do it.</p>\n\n<p>This is just a simplified example to illustrate the concept. <strong>My real question is whether or not vectorization is generally useful to replace for loops with conditional logic, or if it's only applicable to mathematical relationships, where the benefits and method of achieving them are obvious.</strong> All of my real code challenges are much more complex and the conditional logic is more complex than just a simple \"only use this value if it's non-nan\".</p>\n\n<p>I found hundreds of articles online about how to use vectorization in Python, but they all seem to focus on replacing <em>mathematical calculations</em> in for loops. All my for loops involve conditional logic. Can vectorization help me or am I trying to fit a square peg in a round hole?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "pyspark"], "comments": [{"owner": {"reputation": 32007, "user_id": 5858851, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yXFCX.jpg?s=128&g=1", "display_name": "pault", "link": "https://stackoverflow.com/users/5858851/pault"}, "edited": false, "score": 3, "creation_date": 1568235740, "post_id": 57896287, "comment_id": 102214613, "body": "Seems like changing those <code>&quot;outer&quot;</code>s to <code>&quot;left&quot;</code> would work, or am I missing something?"}, {"owner": {"reputation": 32007, "user_id": 5858851, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yXFCX.jpg?s=128&g=1", "display_name": "pault", "link": "https://stackoverflow.com/users/5858851/pault"}, "edited": false, "score": 2, "creation_date": 1568235829, "post_id": 57896287, "comment_id": 102214639, "body": "Also you should <a href=\"https://stackoverflow.com/posts/57896287/edit\">edit</a> your question to specify if you&#39;re working on spark DataFrames vs pandas Dataframes."}, {"owner": {"reputation": 1620, "user_id": 8190082, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pqYTc.jpg?s=128&g=1", "display_name": "datapug", "link": "https://stackoverflow.com/users/8190082/datapug"}, "edited": false, "score": 2, "creation_date": 1568238741, "post_id": 57896287, "comment_id": 102215447, "body": "I am not able to replicate the issue you are mentioning and the results of the code below look like what you mentioned to be the expected result: ``` a = spark.createDataFrame([(1, 32, &quot;foo&quot;), (2, 12, &quot;bar&quot;)], [&quot;loc&quot;, &quot;sale&quot;, &quot;address&quot;]) b = spark.createDataFrame([(1, 23, &quot;000&quot;)], [&quot;loc&quot;, &quot;app&quot;, &quot;ident&quot;]) c = spark.createDataFrame([(1, 11, 332), (2, 99, 252)], [&quot;loc&quot;, &quot;spa&quot;, &quot;cater&quot;]) joinedDFs = a.join(b, [&#39;loc&#39;], how=&#39;outer&#39;).join(c, [&#39;loc&#39;], how=&#39;outer&#39;) ```"}], "owner": {"reputation": 273, "user_id": 12055013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4f3c475e7acebbec12a684dbdde9ccc?s=128&d=identicon&r=PG&f=1", "display_name": "pairwiseseq", "link": "https://stackoverflow.com/users/12055013/pairwiseseq"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1568237181, "creation_date": 1568233274, "last_edit_date": 1568233683, "question_id": 57896287, "link": "https://stackoverflow.com/questions/57896287/how-to-union-columns-from-multiple-dataframes", "title": "How to union columns from multiple dataframes", "body": "<p>I have three dataframes that I am trying to unionize based on values of a specific column. I am not sure if <code>.join()</code> is the best method (as I have to scale to over 20 dataframes).</p>\n\n<p>I've read that aggregating may also be possible in <a href=\"https://stackoverflow.com/a/38469777/12055013\">another thread</a>, but I'm not sure if it's appropriate for my use case.</p>\n\n<pre><code>a = |loc|sale|address|\n    |1  |32  |foo    |\n    |2  |12  |bar    |\n\nb = |loc|app |ident  |\n    |1  |32  |000    |\n\n\nc = |loc|spa |cater  |\n    |1  |11  |332    |\n    |2  |99  |252    |\n</code></pre>\n\n<p>Note that column <code>loc</code> is the only field that's in all three dataframes. And dataframe <code>b</code> has no row with <code>loc=2</code>.</p>\n\n<p>I've tried equi-join but I'm running into a two issues</p>\n\n<p><code>test = a.join(b, ['loc'], how='outer').join(c, ['loc'], how='outer')</code></p>\n\n<pre><code>My expected result is: \n\ntest = |loc|sale|address|app |ident | spa | cater |\n       |1  |32  |foo    |32  |000   |11   | 332   |\n       |2  |12  |bar    |None|None  |99   | 252   |\n\n\nMy actual result is:\ntest = |loc|sale|address|app |ident | spa | cater |\n       |1  |None|None   |32  |000   |11   | 332   |\n       |2  |None|None   |None|None  |99   | 252   |\n\n\n</code></pre>\n\n<p>The unwanted result is that the columns <code>sale</code> and <code>address</code> from my first left dataframe, <code>a</code>, are filled with <code>None</code> when they should actually have carry the values from <code>a</code>. I need to make sure each row has the same number of columns, including row <code>loc=2</code> even though it is entirely missing in dataframe <code>b</code>.</p>\n\n<p>Thank you for your help.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 690, "user_id": 1898437, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7dc6fab73ea7b9e092cf618335b7948b?s=128&d=identicon&r=PG", "display_name": "Anoop R Desai", "link": "https://stackoverflow.com/users/1898437/anoop-r-desai"}, "edited": false, "score": 0, "creation_date": 1568233583, "post_id": 57896285, "comment_id": 102213878, "body": "So, you just want all numbers within a string? Why are you splitting on <code>$</code>?"}, {"owner": {"reputation": 38834, "user_id": 3705840, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/a7ybc.png?s=128&g=1", "display_name": "lmiguelvargasf", "link": "https://stackoverflow.com/users/3705840/lmiguelvargasf"}, "edited": false, "score": 0, "creation_date": 1568233598, "post_id": 57896285, "comment_id": 102213881, "body": "@LauraSmith, how are you applying the split, are you using <code>myList[0].split(&quot;$&quot;)</code>?"}, {"owner": {"reputation": 263, "user_id": 6506829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eeaa1c7f56604c82c626576eaec847e4?s=128&d=identicon&r=PG&f=1", "display_name": "Laura Smith", "link": "https://stackoverflow.com/users/6506829/laura-smith"}, "reply_to_user": {"reputation": 38834, "user_id": 3705840, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/a7ybc.png?s=128&g=1", "display_name": "lmiguelvargasf", "link": "https://stackoverflow.com/users/3705840/lmiguelvargasf"}, "edited": false, "score": 1, "creation_date": 1568233706, "post_id": 57896285, "comment_id": 102213917, "body": "@lmiguelvargasf See my edits. I use str() then splits"}, {"owner": {"reputation": 43029, "user_id": 7505395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4t4nq.jpg?s=128&g=1", "display_name": "Patrick Artner", "link": "https://stackoverflow.com/users/7505395/patrick-artner"}, "edited": false, "score": 0, "creation_date": 1568233776, "post_id": 57896285, "comment_id": 102213937, "body": "There is no 120 at 0-index -its delimited by &amp; not $"}, {"owner": {"reputation": 7749, "user_id": 4046632, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43e6a87a176719c607a2a73ce6728d88?s=128&d=identicon&r=PG&f=1", "display_name": "buran", "link": "https://stackoverflow.com/users/4046632/buran"}, "edited": false, "score": 0, "creation_date": 1568233813, "post_id": 57896285, "comment_id": 102213948, "body": "still you have <code>&amp;</code> between <code>120</code> and  <code>My life cycle</code>. <code>.split(&#39;$&#39;)</code> will not do and  converting list to <code>str</code> will leave the brackets and quote char"}], "answers": [{"comments": [{"owner": {"reputation": 263, "user_id": 6506829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eeaa1c7f56604c82c626576eaec847e4?s=128&d=identicon&r=PG&f=1", "display_name": "Laura Smith", "link": "https://stackoverflow.com/users/6506829/laura-smith"}, "edited": false, "score": 0, "creation_date": 1568234214, "post_id": 57896351, "comment_id": 102214056, "body": "for example, if I use something like this. <code>[&#39;120&amp;My life cycle 3$121$My daily routine 2&#39;]</code>, I only want the results to have <code>[120, 121]</code>, but that is not the case here. May you please edit to reflect this?"}, {"owner": {"reputation": 3730, "user_id": 5616096, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PjKci.jpg?s=128&g=1", "display_name": "Matthew Gaiser", "link": "https://stackoverflow.com/users/5616096/matthew-gaiser"}, "reply_to_user": {"reputation": 263, "user_id": 6506829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eeaa1c7f56604c82c626576eaec847e4?s=128&d=identicon&r=PG&f=1", "display_name": "Laura Smith", "link": "https://stackoverflow.com/users/6506829/laura-smith"}, "edited": false, "score": 1, "creation_date": 1568234358, "post_id": 57896351, "comment_id": 102214104, "body": "@LauraSmith Will it consistently be a 3 digit number you want to extract and the number after routine will not be a 3 digit number?"}, {"owner": {"reputation": 263, "user_id": 6506829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eeaa1c7f56604c82c626576eaec847e4?s=128&d=identicon&r=PG&f=1", "display_name": "Laura Smith", "link": "https://stackoverflow.com/users/6506829/laura-smith"}, "edited": false, "score": 0, "creation_date": 1568234492, "post_id": 57896351, "comment_id": 102214157, "body": "It is always a number followed by $ followed by a string which could contain numbers followed by $ and this pattern continues. I am only interested in the number which is not part of the strings. The number could be 4 digits or any number of digits. Please refer to the <code>myList = [&#39;120$My life cycle 3$121$My daily routine 2&#39;]</code>"}, {"owner": {"reputation": 43029, "user_id": 7505395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4t4nq.jpg?s=128&g=1", "display_name": "Patrick Artner", "link": "https://stackoverflow.com/users/7505395/patrick-artner"}, "edited": false, "score": 1, "creation_date": 1568235818, "post_id": 57896351, "comment_id": 102214636, "body": "<code>r&#39;\\d+$</code> will look for numbers only at the end of each line. <code>&#39;$&#39;</code> is a special regex character with special meaning -you need to escape it. use <code>&#39;r&#39;\\d+(?:\\$|$)&#39;</code> instead."}, {"owner": {"reputation": 3730, "user_id": 5616096, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PjKci.jpg?s=128&g=1", "display_name": "Matthew Gaiser", "link": "https://stackoverflow.com/users/5616096/matthew-gaiser"}, "reply_to_user": {"reputation": 169, "user_id": 9958575, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-m4PRVc-2p8I/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq37tCNF_f__FYRMwtj5ixWq_kJqAg/mo/photo.jpg?sz=128", "display_name": "Matej Novosad", "link": "https://stackoverflow.com/users/9958575/matej-novosad"}, "edited": false, "score": 1, "creation_date": 1568236121, "post_id": 57896351, "comment_id": 102214726, "body": "@Matej Novosad has a better answer for the changed use case"}, {"owner": {"reputation": 169, "user_id": 9958575, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-m4PRVc-2p8I/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq37tCNF_f__FYRMwtj5ixWq_kJqAg/mo/photo.jpg?sz=128", "display_name": "Matej Novosad", "link": "https://stackoverflow.com/users/9958575/matej-novosad"}, "reply_to_user": {"reputation": 43029, "user_id": 7505395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4t4nq.jpg?s=128&g=1", "display_name": "Patrick Artner", "link": "https://stackoverflow.com/users/7505395/patrick-artner"}, "edited": false, "score": 1, "creation_date": 1568236560, "post_id": 57896351, "comment_id": 102214866, "body": "@PatrickArtner Yes OP changed the question 3 times during this answers stay so I decided to write a new one because this one was no longer the best solution from my POV."}, {"owner": {"reputation": 3730, "user_id": 5616096, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PjKci.jpg?s=128&g=1", "display_name": "Matthew Gaiser", "link": "https://stackoverflow.com/users/5616096/matthew-gaiser"}, "reply_to_user": {"reputation": 169, "user_id": 9958575, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-m4PRVc-2p8I/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq37tCNF_f__FYRMwtj5ixWq_kJqAg/mo/photo.jpg?sz=128", "display_name": "Matej Novosad", "link": "https://stackoverflow.com/users/9958575/matej-novosad"}, "edited": false, "score": 0, "creation_date": 1568236959, "post_id": 57896351, "comment_id": 102214994, "body": "@MatejNovosad I thought I was losing it for a bit there as I swore that I had copied the test case properly."}, {"owner": {"reputation": 169, "user_id": 9958575, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-m4PRVc-2p8I/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq37tCNF_f__FYRMwtj5ixWq_kJqAg/mo/photo.jpg?sz=128", "display_name": "Matej Novosad", "link": "https://stackoverflow.com/users/9958575/matej-novosad"}, "edited": false, "score": 1, "creation_date": 1568237121, "post_id": 57896351, "comment_id": 102215049, "body": "@MatthewGaiser your answer was fully correct and your testcase was the same as with OP. She just edited it like 3 times. :D"}], "tags": [], "owner": {"reputation": 3730, "user_id": 5616096, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PjKci.jpg?s=128&g=1", "display_name": "Matthew Gaiser", "link": "https://stackoverflow.com/users/5616096/matthew-gaiser"}, "is_accepted": false, "score": 2, "last_activity_date": 1568236000, "last_edit_date": 1568236000, "creation_date": 1568233588, "answer_id": 57896351, "question_id": 57896285, "link": "https://stackoverflow.com/questions/57896285/get-the-last-part-of-a-string-in-a-list/57896351#57896351", "title": "Get the last part of a string in a list", "body": "<p><strong>Updated version:</strong> </p>\n\n<pre><code>import re\nmyList = ['120$My life cycle 3$121$My daily routine 2']\nmyList = myList[0].split('$')\nnumbers = []\nfor i in range(0,len(myList),2):\n        temp = re.findall(r'\\d+', myList[i])[0]\n        numbers.append(temp)\n'''\n.finall() returns list of all occurences of a pattern in a given string.\nThe pattern says map all digits in the string. If they are next to each\nother count them as one element in final list. We use index 0 of the \nmyList as thats the string we want to work with.\n'''\nresults = list(map(int, numbers)) # this line performs an int() operation on each of the elements of numbers.\nprint(results)\n</code></pre>\n\n<p>Why not just use <code>re</code>?</p>\n\n<p><code>re</code> is a library for regular expresions in python. They help you find patterns.</p>\n\n<pre><code>import re\nmyList = ['120$My life cycle 3$121$My daily routine 2']\nnumbers = re.findall(r'\\d+$', myList[0]) \n'''\n.finall() returns list of all occurences of a pattern in a given string.\nThe pattern says map all digits in the string. If they are next to each\nother count them as one element in final list. We use index 0 of the \nmyList as thats the string we want to work with.\n'''\nresults = list(map(int, numbers)) # this line performs an int() operation on each of the elements of numbers. \nprint(results)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 263, "user_id": 6506829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eeaa1c7f56604c82c626576eaec847e4?s=128&d=identicon&r=PG&f=1", "display_name": "Laura Smith", "link": "https://stackoverflow.com/users/6506829/laura-smith"}, "edited": false, "score": 0, "creation_date": 1568234260, "post_id": 57896396, "comment_id": 102214077, "body": "Did you try it on the sample input and did you get the output? It doesnt seem to work :("}, {"owner": {"reputation": 7894, "user_id": 981616, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/92513702d30405c7e2ca056bdc72aa9f?s=128&d=identicon&r=PG", "display_name": "uday", "link": "https://stackoverflow.com/users/981616/uday"}, "reply_to_user": {"reputation": 263, "user_id": 6506829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eeaa1c7f56604c82c626576eaec847e4?s=128&d=identicon&r=PG&f=1", "display_name": "Laura Smith", "link": "https://stackoverflow.com/users/6506829/laura-smith"}, "edited": false, "score": 0, "creation_date": 1568234475, "post_id": 57896396, "comment_id": 102214148, "body": "in your string there is &#39;&amp;&#39; instead of &#39;$&#39; so I am only getting [121] as output. Is it something wrong with your <b>string</b> in the question?"}, {"owner": {"reputation": 263, "user_id": 6506829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eeaa1c7f56604c82c626576eaec847e4?s=128&d=identicon&r=PG&f=1", "display_name": "Laura Smith", "link": "https://stackoverflow.com/users/6506829/laura-smith"}, "edited": false, "score": 0, "creation_date": 1568234525, "post_id": 57896396, "comment_id": 102214178, "body": "That was a typo. Updated to reflect the fix"}, {"owner": {"reputation": 7894, "user_id": 981616, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/92513702d30405c7e2ca056bdc72aa9f?s=128&d=identicon&r=PG", "display_name": "uday", "link": "https://stackoverflow.com/users/981616/uday"}, "reply_to_user": {"reputation": 263, "user_id": 6506829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eeaa1c7f56604c82c626576eaec847e4?s=128&d=identicon&r=PG&f=1", "display_name": "Laura Smith", "link": "https://stackoverflow.com/users/6506829/laura-smith"}, "edited": false, "score": 0, "creation_date": 1568234868, "post_id": 57896396, "comment_id": 102214295, "body": "I just took your string out of array and then ran this <code>[int(s) for s in mystr.split(&quot;$&quot;) if s.isdigit()]</code> and it worked"}, {"owner": {"reputation": 263, "user_id": 6506829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eeaa1c7f56604c82c626576eaec847e4?s=128&d=identicon&r=PG&f=1", "display_name": "Laura Smith", "link": "https://stackoverflow.com/users/6506829/laura-smith"}, "edited": false, "score": 0, "creation_date": 1568235035, "post_id": 57896396, "comment_id": 102214352, "body": "For example, if my input is <code>[&#39;100$My String 1A$290$My String 1B&#39;]</code>, I only get 290 with you solution? Can you verify this?"}, {"owner": {"reputation": 7894, "user_id": 981616, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/92513702d30405c7e2ca056bdc72aa9f?s=128&d=identicon&r=PG", "display_name": "uday", "link": "https://stackoverflow.com/users/981616/uday"}, "reply_to_user": {"reputation": 263, "user_id": 6506829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eeaa1c7f56604c82c626576eaec847e4?s=128&d=identicon&r=PG&f=1", "display_name": "Laura Smith", "link": "https://stackoverflow.com/users/6506829/laura-smith"}, "edited": false, "score": 0, "creation_date": 1568235517, "post_id": 57896396, "comment_id": 102214539, "body": "if you do str(myList) you will get the resultant array as following: <code>[&quot;[&#39;100&quot;, &#39;My String 1A&#39;, &#39;290&#39;, &quot;My String 1B&#39;]&quot;]</code> So, the first element has <code>[&quot;[&#39;100&quot;</code> which is not a digit hence you&#39;re not seeing the first element. In order to avoid it, you need to loop into each string element in the list and do like what I said."}], "tags": [], "owner": {"reputation": 7894, "user_id": 981616, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/92513702d30405c7e2ca056bdc72aa9f?s=128&d=identicon&r=PG", "display_name": "uday", "link": "https://stackoverflow.com/users/981616/uday"}, "is_accepted": false, "score": 0, "last_activity_date": 1568235763, "last_edit_date": 1568235763, "creation_date": 1568233774, "answer_id": 57896396, "question_id": 57896285, "link": "https://stackoverflow.com/questions/57896285/get-the-last-part-of-a-string-in-a-list/57896396#57896396", "title": "Get the last part of a string in a list", "body": "<p>Do something like this? </p>\n\n<pre><code>a = ['100$My String 1A$290$My String 1B']\n&gt;&gt;&gt; for x in a:\n...   [int(s) for s in x.split(\"$\") if s.isdigit()]\n...\n[100, 290] \n\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 43029, "user_id": 7505395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4t4nq.jpg?s=128&g=1", "display_name": "Patrick Artner", "link": "https://stackoverflow.com/users/7505395/patrick-artner"}, "is_accepted": true, "score": 5, "last_activity_date": 1568235956, "last_edit_date": 1568235956, "creation_date": 1568233891, "answer_id": 57896425, "question_id": 57896285, "link": "https://stackoverflow.com/questions/57896285/get-the-last-part-of-a-string-in-a-list/57896425#57896425", "title": "Get the last part of a string in a list", "body": "<p>You can split at $ and use a list comprehension <a href=\"https://docs.python.org/3/library/stdtypes.html#str.isdigit\" rel=\"nofollow noreferrer\">with <code>str.isdigit()</code> to</a> extract numbers:</p>\n\n<pre><code>mylist = ['120$My life cycle$121$My daily routine','some$222$othr$text$42']\n\n# split each thing in mylist at $, for each split-result, keep only those that\n# contain only numbers and convert them to integer\nsplitted = [[int(i) for i in p.split(\"$\") if i.isdigit()] for p in mylist] \n\nprint(splitted) # [[120, 121], [222, 42]]\n</code></pre>\n\n<p>This will produce a list of lists and convert the \"string\" numbers into integers. it only works for positive numbers-strings without sign - with sign you can exchange <code>isdigit()</code> for another function:</p>\n\n<pre><code>def isInt(t):\n    try:\n        _ = int(t)\n        return True\n    except:\n        return False\n\nmylist = ['-120$My life cycle$121$My daily routine','some$222$othr$text$42']\nsplitted = [[int(i) for i in p.split(\"$\") if isInt(i) ] for p in mylist] \n\nprint(splitted) # [[-120, 121], [222, 42]]\n</code></pre>\n\n<hr>\n\n<p>To get a flattened list no matter how many strings are in <code>myList</code>: </p>\n\n<pre><code>intlist = list(map(int,( d for d in '$'.join(myList).split(\"$\") if isInt(d))))\nprint(intlist) # [-120, 121, 222, 42]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 169, "user_id": 9958575, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-m4PRVc-2p8I/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq37tCNF_f__FYRMwtj5ixWq_kJqAg/mo/photo.jpg?sz=128", "display_name": "Matej Novosad", "link": "https://stackoverflow.com/users/9958575/matej-novosad"}, "is_accepted": false, "score": 1, "last_activity_date": 1568235462, "creation_date": 1568235462, "answer_id": 57896715, "question_id": 57896285, "link": "https://stackoverflow.com/questions/57896285/get-the-last-part-of-a-string-in-a-list/57896715#57896715", "title": "Get the last part of a string in a list", "body": "<p>First off we split string with <code>'$'</code> as separator. And then we just iterate through every other result from the new list, convert it into integer and append it to results.</p>\n\n<pre><code>myList = ['120$My life cycle 3$121$My daily routine 2']\nmyList = myList[0].split('$')\nresults = []\nfor i in range(0,len(myList),2):\n    results.append(int(myList[i]))\nprint(results)\n# [120, 121]\n</code></pre>\n"}], "owner": {"reputation": 263, "user_id": 6506829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eeaa1c7f56604c82c626576eaec847e4?s=128&d=identicon&r=PG&f=1", "display_name": "Laura Smith", "link": "https://stackoverflow.com/users/6506829/laura-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 1, "accepted_answer_id": 57896425, "answer_count": 4, "score": 0, "last_activity_date": 1568249626, "creation_date": 1568233250, "last_edit_date": 1568249626, "question_id": 57896285, "link": "https://stackoverflow.com/questions/57896285/get-the-last-part-of-a-string-in-a-list", "title": "Get the last part of a string in a list", "body": "<p>I have a list which contains the following <code>string</code> element.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>myList = ['120$My life cycle 3$121$My daily routine 2']\n</code></pre>\n\n<p>I perform a <code>.split(\"$\")</code> operation and get the following new list.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>templist = str(myList).split(\"$\")\n</code></pre>\n\n<p>I want to be able to store all the integer values from this <code>templist</code> which are at even indexes after the split.I want to return a list of integers.</p>\n\n<pre><code>Expected output: [120, 121]\n</code></pre>\n"}, {"tags": ["python", "floating-point", "scientific-notation"], "comments": [{"owner": {"reputation": 1812, "user_id": 11432434, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-lYnbtUu9EOU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf-9ybhwxbzBDHJNyQWMDDx97hP7g/mo/photo.jpg?sz=128", "display_name": "SimonN", "link": "https://stackoverflow.com/users/11432434/simonn"}, "edited": false, "score": 0, "creation_date": 1568233967, "post_id": 57896272, "comment_id": 102213991, "body": "The linked answer isn&#39;t a direct duplicate, but this one is <a href=\"https://stackoverflow.com/questions/53274821/scientific-notation-formatting-in-python\" title=\"scientific notation formatting in python\">stackoverflow.com/questions/53274821/&hellip;</a>"}, {"owner": {"reputation": 193, "user_id": 7530975, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/920da18b4e3052525af589bb1b0e669f?s=128&d=identicon&r=PG&f=1", "display_name": "GAF", "link": "https://stackoverflow.com/users/7530975/gaf"}, "reply_to_user": {"reputation": 1812, "user_id": 11432434, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-lYnbtUu9EOU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf-9ybhwxbzBDHJNyQWMDDx97hP7g/mo/photo.jpg?sz=128", "display_name": "SimonN", "link": "https://stackoverflow.com/users/11432434/simonn"}, "edited": false, "score": 0, "creation_date": 1568287393, "post_id": 57896272, "comment_id": 102231174, "body": "Neither one of the suggested answers addresses my question.  I  see nothing in those answers that takes a number like 1234.56 and convert it to 0.123456e4."}, {"owner": {"reputation": 1812, "user_id": 11432434, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-lYnbtUu9EOU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf-9ybhwxbzBDHJNyQWMDDx97hP7g/mo/photo.jpg?sz=128", "display_name": "SimonN", "link": "https://stackoverflow.com/users/11432434/simonn"}, "edited": false, "score": 0, "creation_date": 1568312025, "post_id": 57896272, "comment_id": 102244052, "body": "There isn&#39;t a straight-up f string that gives this exact format, the closest you could get is 1.2345e+3, but the answer I linked shows how to make a function using two f strings. You should be able to alter it a tiny bit to get your preferred format"}], "owner": {"reputation": 193, "user_id": 7530975, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/920da18b4e3052525af589bb1b0e669f?s=128&d=identicon&r=PG&f=1", "display_name": "GAF", "link": "https://stackoverflow.com/users/7530975/gaf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 26, "favorite_count": 0, "closed_date": 1568233472, "answer_count": 0, "score": 0, "last_activity_date": 1568287833, "creation_date": 1568233211, "last_edit_date": 1568287833, "question_id": 57896272, "link": "https://stackoverflow.com/questions/57896272/how-to-convert-a-float-into-format-of-0-e-in-python", "closed_reason": "Duplicate", "title": "How to convert a float into format of 0.####e# in python", "body": "<p>Using python, I am trying to print floats in the format of 0.####e#.  For example, 1234.56 is converted to 0.123456e4 or .321 is converted to 0.321e0 etc. I am surprised that an extensive search has not produced any sample code for this exercise. As far as I can tell, neither <a href=\"https://stackoverflow.com/questions/6913532/display-a-decimal-in-scientific-notation\">Display a decimal in scientific notation</a> or <a href=\"https://stackoverflow.com/questions/53274821/scientific-notation-formatting-in-python\">stackoverflow.com/questions/53274821/\u2026</a> address converting a number like 1234.56 into 0.123456e4.</p>\n\n<p>If possible, I would like to use the python f-string to do the conversion.  But any solution is very welcomed.</p>\n"}, {"tags": ["python", "pandas", "dataframe", "replace"], "answers": [{"tags": [], "owner": {"reputation": 26154, "user_id": 11884237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7d7q4.png?s=128&g=1", "display_name": "ansev", "link": "https://stackoverflow.com/users/11884237/ansev"}, "is_accepted": true, "score": 0, "last_activity_date": 1568235499, "creation_date": 1568235499, "answer_id": 57896723, "question_id": 57896262, "link": "https://stackoverflow.com/questions/57896262/replace-value-in-dataframe-column-based-upon-value-in-another-column-within-the/57896723#57896723", "title": "Replace Value in Dataframe Column based upon value in another column within the same dataframe", "body": "<p>You can use <a href=\"https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html\" rel=\"nofollow noreferrer\">boolean indexing</a>:</p>\n\n<pre><code>r=Q1Q2['Need to Delete'].notnull()\nQ1Q2.loc[r,'Approver']=Q1Q2.loc[r,'Need to Delete']\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 11564616, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Qxq7OZCJnsw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcloiF5VInOxgW1xJ8ahfjBfQx0Sw/mo/photo.jpg?sz=128", "display_name": "ajsteph", "link": "https://stackoverflow.com/users/11564616/ajsteph"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "accepted_answer_id": 57896723, "answer_count": 1, "score": 0, "last_activity_date": 1568251764, "creation_date": 1568233153, "last_edit_date": 1568251764, "question_id": 57896262, "link": "https://stackoverflow.com/questions/57896262/replace-value-in-dataframe-column-based-upon-value-in-another-column-within-the", "title": "Replace Value in Dataframe Column based upon value in another column within the same dataframe", "body": "<p>I have a pandas dataframe in which some rows didn't pull in correctly so that the values were pushed over into the next column over. Therefore I have a column that is mostly null, but has a few instances where there is a value that should go in the previous column. Below is an example of what it looks like. </p>\n\n<p><a href=\"https://i.stack.imgur.com/4HDJv.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n\n<p>I need to replace the 12345 and 45678 in the Approver column with JJones in the NeedtoDelete column. </p>\n\n<p>I am not sure if a for loop, or a regular expression is the right way to go. I also came across the replace function, but I'm not sure how I would set that up in this scenario. Below is the code I have tried thus far (Q1Q2 is the df name):</p>\n\n<pre><code>for Q1Q2['Approver'] in Q1Q2:\n    Replacement = Q1Q2.loc[Q1Q2['Need to Delete'].notnull()]\n    Q1Q2.loc[Replacement] = Q1Q2['Approver']\n</code></pre>\n\n<hr>\n\n<pre><code>Q1Q2.loc[Q1Q2['Need to Delete'].notnull(), ['Approver'] == Q1Q2['Need to Delete']]\n</code></pre>\n\n<p>If you could help me fix either attempts above, or point me in the right direction, it would be greatly appreciated. Thanks in advance!</p>\n"}, {"tags": ["python", "tensorflow", "machine-learning", "keras", "multilabel-classification"], "comments": [{"owner": {"reputation": 1486, "user_id": 6871623, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/HtbWQ.jpg?s=128&g=1", "display_name": "Everyone", "link": "https://stackoverflow.com/users/6871623/everyone"}, "edited": false, "score": 0, "creation_date": 1572942653, "post_id": 57896249, "comment_id": 103708803, "body": "I know this is way too late, but how exactly is this a multilabel problem? I only see a single label (make) and that&#39;s it. You are not predicting multiple labels together as far as I can see."}], "answers": [{"tags": [], "owner": {"reputation": 51, "user_id": 11244336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9gATC.jpg?s=128&g=1", "display_name": "Fran&#231;ois Menet", "link": "https://stackoverflow.com/users/11244336/fran%c3%a7ois-menet"}, "is_accepted": false, "score": 0, "last_activity_date": 1568234038, "creation_date": 1568234038, "answer_id": 57896459, "question_id": 57896249, "link": "https://stackoverflow.com/questions/57896249/tensorflow-multilabel-classification-loss-decreasing-slowly-not-changing-at-al/57896459#57896459", "title": "Tensorflow - Multilabel classification loss decreasing slowly/not changing at all", "body": "<p>Before you train, you should see whether you can see a correlation between your features.</p>\n\n<p>For example : <em>can you predict if what car you will buy based on your birthday ? Is this sole information enough ?</em></p>\n\n<p>The fact that the learning rate changes slowly can be linked to <strong>the absence of correlation between x and y</strong></p>\n\n<p>To see if it is the case, simply replace your values with random values, then with value that have a clear pattern like (ID&lt;0.5 => target >20). If your accuracy improves with the pattern but not the random values, it may indicate you need more features.</p>\n\n<p>If you are sure about the correlation Did you try changing the learning rate ? A very high learning rate on a well-defined task would create a \"vibrating\" pattern, where learning rate goes up and down. This could imply you need to fine-tune it.</p>\n\n<p>Hope this helps.</p>\n"}], "owner": {"reputation": 33, "user_id": 7718241, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-64E1KKuXnyM/AAAAAAAAAAI/AAAAAAAAAFc/iw5_4omE5Ac/photo.jpg?sz=128", "display_name": "SquishyAura", "link": "https://stackoverflow.com/users/7718241/squishyaura"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 246, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1568234038, "creation_date": 1568233107, "question_id": 57896249, "link": "https://stackoverflow.com/questions/57896249/tensorflow-multilabel-classification-loss-decreasing-slowly-not-changing-at-al", "title": "Tensorflow - Multilabel classification loss decreasing slowly/not changing at all", "body": "<p>I am working on a neural network in Tensorflow. My network performs multilabel classification to predict which users bid on which cars. I have a CSV with three columns; User IDs, Highest bid, and Make names (car models), however I only use User IDs and Make names. User IDs are the input and Make names are the labels, where 86 unique Make names exist. My problem is that when I train my model with the dataset, my loss is decreasing very slowly and accuracy is almost not changing at all.</p>\n\n<p>I have tried changing the amount of layers I am using, as well as trying different amounts of neurons in each hidden layer, however I did not have any luck with that.</p>\n\n<pre><code>from __future__ import absolute_import, division, print_function, unicode_literals\n\nimport os\nimport matplotlib.pyplot as plt\nimport tensorflow as tf\nimport pandas as pd\nimport numpy as np\n\n#\n# READ FILE AND SET FEATURE &amp; LABEL\n#\nraw_train_data = pd.read_csv(\"data2016NEW.csv\", usecols=[\"USERID\"])\n#raw_test_data = pd.read_csv(\"data2017.csv\", usecols=[\"USERID\"])\n\ntrain_target = pd.read_csv(\"data2016NEW.csv\", usecols=[\"MAKENAME\"])\n#test_target = pd.read_csv(\"data2017.csv\", usecols=[\"MAKENAME\"])\n\ntrain_dataset = tf.data.Dataset.from_tensor_slices((raw_train_data.values, train_target.values))\n#test_dataset = tf.data.Dataset.from_tensor_slices((raw_test_data.values, test_target.values))\n\n\ntrain_dataset_shuffled_batched = train_dataset.shuffle(len(raw_train_data)).batch(512)\n#test_dataset_shuffled_batched = test_dataset.shuffle(len(raw_test_data)).batch(512)\n\ndef get_compiled_model():\n    model = tf.keras.Sequential([\n        #input layer\n        tf.keras.layers.Dropout(0.2, input_shape=raw_train_data.shape[1:]),\n        #hidden layers\n        tf.keras.layers.Dense(360, activation='relu'),\n        tf.keras.layers.Dense(360, activation='relu'),\n        tf.keras.layers.Dense(360, activation='relu'),\n        tf.keras.layers.Dense(360, activation='relu'),\n        tf.keras.layers.Dense(360, activation='relu'),\n        tf.keras.layers.Dense(360, activation='relu'),\n        #output layer\n        tf.keras.layers.Dense(90, activation='softmax')\n    ])\n\n    model.compile(\n        optimizer=tf.keras.optimizers.Adam(learning_rate=0.01),\n        loss=tf.keras.losses.sparse_categorical_crossentropy,\n        metrics=['accuracy']\n    )\n\n    return model\n\nmodel = get_compiled_model()\nmodel.summary()\n\nhistory = model.fit(train_dataset_shuffled_batched, epochs=1000, verbose=2)\n</code></pre>\n\n<p>Here is an image that shows a small sample of my data (my dataset is around 160000 rows):\n<img src=\"https://i.imgur.com/Cj02zhJ.png\" alt=\"Dataset example\"></p>\n\n<p>As you can see, User IDs are normalized between 0 and 1, while the label Make name are integers.</p>\n\n<p>Appreciate all the help, cheers!</p>\n"}, {"tags": ["python", "tensorflow", "keras", "neural-network"], "answers": [{"tags": [], "owner": {"reputation": 71, "user_id": 12631434, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-FFdVpva1yj4/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdO5ACYRzkF8zNFG_UBKg_o8nC9xw/photo.jpg?sz=128", "display_name": "Emi", "link": "https://stackoverflow.com/users/12631434/emi"}, "is_accepted": false, "score": 7, "last_activity_date": 1577792225, "last_edit_date": 1577792225, "creation_date": 1577785053, "answer_id": 59542241, "question_id": 57896235, "link": "https://stackoverflow.com/questions/57896235/typeerror-object-of-type-inputlayer-has-no-len/59542241#59542241", "title": "TypeError: object of type &#39;InputLayer&#39; has no len()", "body": "<p>I have had the same problem. I have used <code>tf.keras.layers</code> to implement the model in google colab. The outputs and inputs of keras.layers arn't match outputs and inputs of <code>tf.keras.layers</code>. I haven't look background of models. Problem is solved when I use <code>tf.keras.models.Model</code>(<code>inputs = classifier.input</code>, <code>outputs = layer_outputs</code> ) instead of Model(<code>inputs = classifier.input</code>, <code>outputs = layer_outputs</code> ). I suggest to use <code>tf.keras.*</code> attributes instead of <code>keras.*</code> when you work with google colab.</p>\n"}], "owner": {"reputation": 21, "user_id": 8658456, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-rtETxwqT4Ek/AAAAAAAAAAI/AAAAAAAAQk0/bsXe8FbI9Ag/photo.jpg?sz=128", "display_name": "Jos&#233; Miguel Henao Cardona", "link": "https://stackoverflow.com/users/8658456/jos%c3%a9-miguel-henao-cardona"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1792, "favorite_count": 2, "answer_count": 1, "score": 2, "last_activity_date": 1577792225, "creation_date": 1568233054, "question_id": 57896235, "link": "https://stackoverflow.com/questions/57896235/typeerror-object-of-type-inputlayer-has-no-len", "title": "TypeError: object of type &#39;InputLayer&#39; has no len()", "body": "<p>I want to build a CNN from another CNN to extract the featured vector of an image. The idea is only to take the first 13 layers of the first CNN and build the second with these layers.</p>\n\n<p>I'm using a Google Colab Notebook with GPU's</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from keras.models import Model\n\nlayer_input_f_nmist = model_f_mnist.input\nlayer_outputs = [layer.output for layer in model_f_mnist.layers[:13]] \n\nmodel_mnist_featured = Model(inputs = layer_input_f_nmist, outputs = layer_outputs)\n\nfeatured_f_mnist_train = model_mnist_featured.predict(X_f_mnist_train)\n</code></pre>\n\n<pre class=\"lang-py prettyprint-override\"><code>TypeError                                 Traceback (most recent call last)\n\n&lt;ipython-input-74-ceb627fe9c83&gt; in &lt;module&gt;()\n      4 layer_outputs = [layer.output for layer in model_f_mnist.layers[:13]]\n      5 \n----&gt; 6 model_mnist_featured = Model(inputs = layer_input_f_nmist, outputs = layer_outputs)\n      7 \n      8 featured_f_mnist_train = model_mnist_featured.predict(X_f_mnist_train)\n\n4 frames\n\n/usr/local/lib/python3.6/dist-packages/keras/engine/network.py in build_map(tensor, finished_nodes, nodes_in_progress, layer, node_index, tensor_index)\n   1400 \n   1401         # Propagate to all previous tensors connected to this node.\n-&gt; 1402         for i in range(len(node.inbound_layers)):\n   1403             x = node.input_tensors[i]\n   1404             layer = node.inbound_layers[i]\n\nTypeError: object of type 'InputLayer' has no len()\n</code></pre>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 123382, "user_id": 1252759, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aGFfT.jpg?s=128&g=1", "display_name": "Jon Clements", "link": "https://stackoverflow.com/users/1252759/jon-clements"}, "reply_to_user": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 1, "creation_date": 1568233545, "post_id": 57896231, "comment_id": 102213864, "body": "@piRSquared I think the OP is asking &quot;I&#39;ve already gone beyond the loading stage, now I want to consider my column headers as the first row without having to reload it again&quot; - So the real question (as far as I read it - hopefully James can tell me if I&#39;m wrong) is not best practice of loading - they already seem to know that... but more like, oh, I&#39;ve already got this, now how do I correct it..."}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 0, "creation_date": 1568233847, "post_id": 57896231, "comment_id": 102213958, "body": "fixed... i think"}, {"owner": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "edited": false, "score": 0, "creation_date": 1568235353, "post_id": 57896231, "comment_id": 102214487, "body": "<code>df.T.reset_index().T</code>?"}, {"owner": {"reputation": 12945, "user_id": 2246488, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/7f300ea1293fd5e1b95783b6511d5a13?s=128&d=identicon&r=PG&f=1", "display_name": "James Wierzba", "link": "https://stackoverflow.com/users/2246488/james-wierzba"}, "reply_to_user": {"reputation": 123382, "user_id": 1252759, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aGFfT.jpg?s=128&g=1", "display_name": "Jon Clements", "link": "https://stackoverflow.com/users/1252759/jon-clements"}, "edited": false, "score": 0, "creation_date": 1568235618, "post_id": 57896231, "comment_id": 102214574, "body": "@JonClements you are somewhat correct. I do indeed want to ignore the loading of the dataframe. lets just assume that is a black box and I have no control over that. what I want to do, is to tell the dataframe object to <b>not</b> assume that the first row is the header, after the dataframe is already loaded."}], "answers": [{"tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": false, "score": 1, "last_activity_date": 1568233714, "creation_date": 1568233714, "answer_id": 57896379, "question_id": 57896231, "link": "https://stackoverflow.com/questions/57896231/specify-no-header-on-a-pandas-df-after-reading-the-data/57896379#57896379", "title": "Specify &quot;no header&quot; on a pandas df, after reading the data?", "body": "<p>If you can help it, load it correctly in the first place.</p>\n\n<pre><code>pd.read_csv('myfile.csv', header=None, skiprows=1)\n</code></pre>\n\n<p>Otherwise, you want to set the <code>columns</code> attribute with a <code>pd.RangeIndex</code></p>\n\n<h3>In one line</h3>\n\n<pre><code>pd.read_csv('myfile.csv').pipe(\n    lambda d: d.set_axis(pd.RangeIndex(d.shape[1]), axis=1, inplace=False)\n)\n</code></pre>\n\n<h3>With less <code>lambda</code></h3>\n\n<pre><code>df = pd.read_csv('myfile.csv')\ndf.columns = pd.RangeIndex(df.shape[1])\n</code></pre>\n"}], "owner": {"reputation": 12945, "user_id": 2246488, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/7f300ea1293fd5e1b95783b6511d5a13?s=128&d=identicon&r=PG&f=1", "display_name": "James Wierzba", "link": "https://stackoverflow.com/users/2246488/james-wierzba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 353, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1568233787, "creation_date": 1568233045, "last_edit_date": 1568233787, "question_id": 57896231, "link": "https://stackoverflow.com/questions/57896231/specify-no-header-on-a-pandas-df-after-reading-the-data", "title": "Specify &quot;no header&quot; on a pandas df, after reading the data?", "body": "<p>I know that you can specify no headers when you read data into a pandas dataframe.</p>\n\n<p>But I want to know if it is possible to specify no headers on a pandas dataframe object <em>after</em> the data has been read?</p>\n\n<p>something like:</p>\n\n<pre><code>df = pandas.read_csv('myfile.csv')\n# df assumes first row is header\n\ndf.header = None # &lt;-- I want this\n\n</code></pre>\n\n<p><strong>Edit: for reasons that are far out of scope of this question, the pandas dataframe reference is all we have. we do not have control over the initialization or the loading of data into the dataframe</strong></p>\n"}, {"tags": ["python", "web-scraping", "python-requests", "password-protection"], "comments": [{"owner": {"reputation": 5192, "user_id": 2318649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rW1HG.jpg?s=128&g=1", "display_name": "barny", "link": "https://stackoverflow.com/users/2318649/barny"}, "edited": false, "score": 0, "creation_date": 1568234692, "post_id": 57896219, "comment_id": 102214246, "body": "Every login page can be different, so no-one can give you an exact answer unless they have done this for the specific page you are accessing.. The non-guesswork way to get requests login to work is to first trace what your browser does to login using a tool like Fiddler (Windows) or mitm (linux), then reproduce the same settings for headers, parameters and data for the requests login. Also in the requests session you should probably GET the login page (as your browser does) to receive cookies before doing the POST to login,"}], "answers": [{"tags": [], "owner": {"reputation": 358, "user_id": 11365663, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2msqx.png?s=128&g=1", "display_name": "Ammar Askar", "link": "https://stackoverflow.com/users/11365663/ammar-askar"}, "is_accepted": false, "score": 2, "last_activity_date": 1568234870, "creation_date": 1568234870, "answer_id": 57896609, "question_id": 57896219, "link": "https://stackoverflow.com/questions/57896219/how-can-i-scrape-a-password-protected-website-with-beautifulsoup-and-requests/57896609#57896609", "title": "How can I scrape a password-protected website with BeautifulSoup and requests", "body": "<p>You need to emulate what your browser is doing when you access the website. If you try to login and open up the network monitor in your browser's dev tools (<a href=\"https://developers.google.com/web/tools/chrome-devtools/network/\" rel=\"nofollow noreferrer\">instructions for Chrome</a>), you'll see that the page at <a href=\"https://www.ecoledirecte.com/login\" rel=\"nofollow noreferrer\">https://www.ecoledirecte.com/login</a> simply contains the form, this is not the URL you want to POST to.</p>\n\n<p>Instead when you type in your username, your browser sends a POST request to <a href=\"https://api.ecoledirecte.com/v3/login.awp\" rel=\"nofollow noreferrer\">https://api.ecoledirecte.com/v3/login.awp</a> with a form containing</p>\n\n<pre><code>data={\n    \"identifiant\": \"username\",\n    \"motdepasse\": \"pass\"\n}\n</code></pre>\n\n<p>thus you should change your login code to:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import json\n...\n\n    login_url = 'https://api.ecoledirecte.com/v3/login.awp'\n    login_data = {\n        'identifiant': 'username',\n        'motdepasse': 'password'\n    }\n    payload = {'data': json.dumps(login_data)}\n    with requests.Session() as session:\n        post = session.post(login_url, data=payload)\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 12055062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e652703310efd66ba16af2b725c965af?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/12055062/tom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1280, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1568234870, "creation_date": 1568232962, "last_edit_date": 1568234258, "question_id": 57896219, "link": "https://stackoverflow.com/questions/57896219/how-can-i-scrape-a-password-protected-website-with-beautifulsoup-and-requests", "title": "How can I scrape a password-protected website with BeautifulSoup and requests", "body": "<p>I'm trying to get access to an html page that is protected by a password login(username and password). I tried using requests but it doesn't seem to work. </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import r\nimport requests\ndef Login():\n\n    scrape_url = 'https://www.ecoledirecte.com/Eleves/3668/Notes'\n\n    login_url = 'https://www.ecoledirecte.com/login'\n\n    payload = {\n        'username': '***',\n        'password': '***'\n    }\n\n\n    with requests.Session() as session:\n        post = session.post(login_url, data=payload)\n        r = session.get(scrape_url)\n        print(r.text)\n</code></pre>\n\n<p>I don't get any errors but <code>print(r.text)</code> only gives the html code for the login page and not the <code>scrape_url</code>.</p>\n"}, {"tags": ["python", "frequency"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1568233017, "post_id": 57896204, "comment_id": 102213687, "body": "Which part of this are you having trouble with? Getting the first letters of all the names? Counting frequencies? There&#39;s a module <code>collection.Counter</code> that automates counting frequencies of things."}], "answers": [{"tags": [], "owner": {"reputation": 3730, "user_id": 5616096, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PjKci.jpg?s=128&g=1", "display_name": "Matthew Gaiser", "link": "https://stackoverflow.com/users/5616096/matthew-gaiser"}, "is_accepted": false, "score": 1, "last_activity_date": 1568233337, "creation_date": 1568233337, "answer_id": 57896303, "question_id": 57896204, "link": "https://stackoverflow.com/questions/57896204/how-to-write-a-code-for-the-frequency-of-first-letters-in-a-data-set-of-names/57896303#57896303", "title": "How to write a code for the frequency of first letters in a data set of names", "body": "<ol>\n<li>Figure out what format your dataset is in. </li>\n<li>Create a dict to hold your results</li>\n<li>Loop through your names and extract the first letter</li>\n<li>If the first letter is already a key in the dict, just increment it</li>\n<li>If it is not already a key in the dict, add it to the dict and initialize the count to 1</li>\n<li>Print out the final results of your code. </li>\n</ol>\n\n<pre><code>names = [\"Matthew\", \"Marg\", \"Lexy\"]\ncount_of_letters = {}\nfor name in names:\n        if name[0] in count_of_letters.keys():\n                count_of_letters[name[0]] += 1\n        else:\n                count_of_letters[name[0]] = 1\n\n\nprint(count_of_letters)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2686, "user_id": 9705687, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v7dmz.jpg?s=128&g=1", "display_name": "bfris", "link": "https://stackoverflow.com/users/9705687/bfris"}, "is_accepted": false, "score": 0, "last_activity_date": 1568236225, "creation_date": 1568236225, "answer_id": 57896839, "question_id": 57896204, "link": "https://stackoverflow.com/questions/57896204/how-to-write-a-code-for-the-frequency-of-first-letters-in-a-data-set-of-names/57896839#57896839", "title": "How to write a code for the frequency of first letters in a data set of names", "body": "<p>I really like @MatthewGaiser's solution. It's compact and straightforward. My solution is a little more bruteforce. </p>\n\n<pre><code>names = [\"Matthew\", \"Marg\", \"Lexy\"]\ncount_of_letters = [0]*26  # create a list with 26 entries, all zero\nfor name in names:\n    name = name.upper()   # convert to uppercase so we only deal\n                          # with 26 letters and not 52\n\n    # ord('A') = 65\n    idx = ord(name[0]) - 65  # A --&gt; 0, B --&gt; 1, etc.\n    count_of_letters[idx] += 1\n\nprint(count_of_letters)\nprint()\n\n# bonus histogram!\nfor idx in range(26):\n    line = '%s: %s' % (chr(65+idx), 'x'*count_of_letters[idx])\n    print(line)\n</code></pre>\n\n<p>Output is:</p>\n\n<pre><code>[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]\n\nA:\nB:\nC:\nD:\nE:\nF:\nG:\nH:\nI:\nJ:\nK:\nL: x\nM: xx\nN:\nO:\nP:\nQ:\nR:\nS:\nT:\nU:\nV:\nW:\nX:\nY:\nZ:\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 12055117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40bb13cbb697b459e0331f61d70bde22?s=128&d=identicon&r=PG&f=1", "display_name": "crsrunnerdude", "link": "https://stackoverflow.com/users/12055117/crsrunnerdude"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "closed_date": 1568272742, "answer_count": 2, "score": -3, "last_activity_date": 1568236225, "creation_date": 1568232931, "question_id": 57896204, "link": "https://stackoverflow.com/questions/57896204/how-to-write-a-code-for-the-frequency-of-first-letters-in-a-data-set-of-names", "closed_reason": "Needs more focus", "title": "How to write a code for the frequency of first letters in a data set of names", "body": "<p>I am a Python beginner and I am attempting to write a code to count the frequency of the first letter of a name appearing in a data set. How do I do that? </p>\n"}, {"tags": ["python", "numpy"], "answers": [{"tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 3, "last_activity_date": 1568233246, "creation_date": 1568233246, "answer_id": 57896280, "question_id": 57896199, "link": "https://stackoverflow.com/questions/57896199/numpy-randomly-sample-from-array-where-the-values-are-not-0/57896280#57896280", "title": "numpy randomly sample from array where the values are not 0", "body": "<p>You can get the coordinates with <code>np.where</code>. This will give you a 3-tuple with arrays for the indices where the position is <code>1</code>.</p>\n\n<p>We can use <code>np.transpose(..)</code> or <code>zip(..)</code> to generate 3-tuples with these, and then use for example <code>random.sample(..)</code> to select 20 of these positions.</p>\n\n<p>For example:</p>\n\n<pre><code>&gt;&gt;&gt; random.sample(list(zip(*np.where(x.reshape(10,10,10)))), 20)\n[(9, 0, 5), (2, 2, 9), (3, 7, 8), (8, 2, 4), (2, 5, 9), (8, 5, 4), (3, 3, 7), (2, 6, 7), (9, 4, 8), (7, 5, 7), (7, 8, 7), (0, 8, 6), (9, 4, 3), (5, 0, 2), (4, 4, 1), (9, 0, 6), (1, 1, 8), (1, 3, 8), (5, 4, 5), (5, 2, 0)]\n</code></pre>\n"}], "owner": {"reputation": 8130, "user_id": 2713740, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f1f024ede163fdaebe61807ad5c88f1e?s=128&d=identicon&r=PG&f=1", "display_name": "Luca", "link": "https://stackoverflow.com/users/2713740/luca"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 210, "favorite_count": 0, "accepted_answer_id": 57896280, "answer_count": 1, "score": 2, "last_activity_date": 1568233246, "creation_date": 1568232874, "question_id": 57896199, "link": "https://stackoverflow.com/questions/57896199/numpy-randomly-sample-from-array-where-the-values-are-not-0", "title": "numpy randomly sample from array where the values are not 0", "body": "<p>I am creating a numpy binary array with zeros and ones as follows:</p>\n\n<pre><code>import numpy as np\nx = np.zeros((10, 10, 10))\nx[:4, :4, :4] = 1\nx = x.ravel()\nnp.random.shuffle(x)\nx.reshape(10, 10, 10)\n</code></pre>\n\n<p>Now what I want to do is randomly sample 20 positions within this array where the value is 1. i.e. I want to randomly sample twenty 3D coordinates where the volume elements are turned on.</p>\n\n<p>I am guessing the way to do this would be to get a position mask of all the positions with the positive value and then sample from that but I cannot figure out how to generate that mask with numpy!</p>\n"}]