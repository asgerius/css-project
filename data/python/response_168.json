[{"tags": ["python", "list", "history"], "comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 3, "creation_date": 1522281653, "post_id": 49545991, "comment_id": 86099459, "body": "Definitely not unless you implement your own class or use something 3rd party made."}, {"owner": {"reputation": 267, "user_id": 5266079, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-uRVorNvuq-I/AAAAAAAAAAI/AAAAAAAAAjM/7EKzlHKg9yg/photo.jpg?sz=128", "display_name": "Shige Abe", "link": "https://stackoverflow.com/users/5266079/shige-abe"}, "edited": false, "score": 0, "creation_date": 1522281706, "post_id": 49545991, "comment_id": 86099471, "body": "You might want to try what&#39;s provided in this answer: <a href=\"https://stackoverflow.com/questions/8858525/track-changes-to-lists-and-dictionaries-in-python?utm_medium=organic&amp;utm_source=google_rich_qa&amp;utm_campaign=google_rich_qa\" title=\"track changes to lists and dictionaries in python\">stackoverflow.com/questions/8858525/&hellip;</a>"}, {"owner": {"reputation": 23589, "user_id": 6622817, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/93f66cc4703b66b835cf13dfeee21e7b?s=128&d=identicon&r=PG&f=1", "display_name": "abccd", "link": "https://stackoverflow.com/users/6622817/abccd"}, "edited": false, "score": 0, "creation_date": 1522282488, "post_id": 49545991, "comment_id": 86099670, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/8858525/track-changes-to-lists-and-dictionaries-in-python\">Track changes to lists and dictionaries in python?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 42073, "user_id": 113632, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/f0aa6977c75f54ca9033d4f4d0244023?s=128&d=identicon&r=PG", "display_name": "dimo414", "link": "https://stackoverflow.com/users/113632/dimo414"}, "is_accepted": true, "score": 2, "last_activity_date": 1522282502, "creation_date": 1522282502, "answer_id": 49546130, "question_id": 49545991, "link": "https://stackoverflow.com/questions/49545991/how-to-find-the-history-of-an-index-in-a-list/49546130#49546130", "title": "How to find the history of an index in a list?", "body": "<p>You're asking for a <a href=\"https://en.wikipedia.org/wiki/Persistent_data_structure\" rel=\"nofollow noreferrer\">persistent data structure</a>. Python lists are <em>mutable</em>, and do not store any sort of history (which is a good thing, since the overhead would be very high, and isn't generally desired).</p>\n\n<p>Depending on what you're actually trying to do you might be able to simply create <em>new</em> lists, rather than mutate existing ones. For example instead of:</p>\n\n<pre><code>ls = [1, 2, 3]\nls.insert(0, 4)\n</code></pre>\n\n<p>Create a new list:</p>\n\n<pre><code>ls = [1, 2, 3]\nls2 = [4] + ls\n</code></pre>\n\n<p>This preserves <code>ls</code> and lets you compare it to <code>ls2</code>.</p>\n\n<p>As c\u1d0f\u029f\u1d05s\u1d18\u1d07\u1d07\u1d05 suggests you could also implement your own list-like structure that records its history in a journal. It wouldn't be too complicated, but I'd suggest looking into other options first (and verifying this is <a href=\"https://meta.stackexchange.com/q/66377/147573\">really what you need</a>), it's not a very common thing to want in practice.</p>\n"}, {"tags": [], "owner": {"reputation": 8912, "user_id": 5904928, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/jwFz9.png?s=128&g=1", "display_name": "Aaditya Ura", "link": "https://stackoverflow.com/users/5904928/aaditya-ura"}, "is_accepted": false, "score": 1, "last_activity_date": 1522403353, "creation_date": 1522403353, "answer_id": 49572130, "question_id": 49545991, "link": "https://stackoverflow.com/questions/49545991/how-to-find-the-history-of-an-index-in-a-list/49572130#49572130", "title": "How to find the history of an index in a list?", "body": "<p>Why don't you create a hash table for your list so you can check later for history of indices :</p>\n\n<pre><code>list1 = [1,2,3]\nhash_table={i:j for i,j in enumerate(list1)}\nprint(hash_table)\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>{0: 1, 1: 2, 2: 3}\n</code></pre>\n"}], "owner": {"reputation": 135, "user_id": 9432016, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-srXE7-TBug8/AAAAAAAAAAI/AAAAAAAAD1Q/h5a5CBaDPJY/photo.jpg?sz=128", "display_name": "Aditya", "link": "https://stackoverflow.com/users/9432016/aditya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 49546130, "answer_count": 2, "score": 0, "last_activity_date": 1522403353, "creation_date": 1522281481, "last_edit_date": 1522281926, "question_id": 49545991, "link": "https://stackoverflow.com/questions/49545991/how-to-find-the-history-of-an-index-in-a-list", "title": "How to find the history of an index in a list?", "body": "<p>So lets say I have this code: <code>list1 = [1,2,3]</code>.\nSo lets say we insert 4 in index 0, <code>list1 = [4,1,2,3]</code>.\nIs there a way to go backwords and find what the \"history\" of what was in index 0? This a simplified version of my question, but just imagine many different things happened to change <code>list1</code>. </p>\n"}, {"tags": ["python", "numpy", "pytorch"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 9566877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7681380e6d4607058bae926a20e4c99?s=128&d=identicon&r=PG&f=1", "display_name": "Philip Hodges", "link": "https://stackoverflow.com/users/9566877/philip-hodges"}, "edited": false, "score": 0, "creation_date": 1522282570, "post_id": 49546028, "comment_id": 86099683, "body": "Can I have a numpy array of python ints? I can&#39;t appear to do that. And if not, then am I right to conclude that I can&#39;t use numpy and pytorch together? Isn&#39;t that what most people do?"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "reply_to_user": {"reputation": 3, "user_id": 9566877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7681380e6d4607058bae926a20e4c99?s=128&d=identicon&r=PG&f=1", "display_name": "Philip Hodges", "link": "https://stackoverflow.com/users/9566877/philip-hodges"}, "edited": false, "score": 0, "creation_date": 1522286684, "post_id": 49546028, "comment_id": 86100672, "body": "@PhilipHodges: I&#39;m not familiar with pytorch, but it looks like <a href=\"http://pytorch.org/tutorials/beginner/former_torchies/tensor_tutorial.html#numpy-bridge\" rel=\"nofollow noreferrer\">you can convert between pytorch tensors and numpy arrays pretty easily</a>."}, {"owner": {"reputation": 3, "user_id": 9566877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7681380e6d4607058bae926a20e4c99?s=128&d=identicon&r=PG&f=1", "display_name": "Philip Hodges", "link": "https://stackoverflow.com/users/9566877/philip-hodges"}, "edited": false, "score": 0, "creation_date": 1522289419, "post_id": 49546028, "comment_id": 86101278, "body": "Well damn, now I feel dumb. Thanks for the help with such a simple thing. And I learned one way (the only way?) that Python 2 is better than Python 3."}], "tags": [], "owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "is_accepted": true, "score": 1, "last_activity_date": 1522281757, "creation_date": 1522281757, "answer_id": 49546028, "question_id": 49545988, "link": "https://stackoverflow.com/questions/49545988/pytorch-errors-when-given-numpy-integer-types-only-in-python-3-not-in-python-2/49546028#49546028", "title": "Pytorch errors when given numpy integer types only in python 3 (not in python 2)", "body": "<p>On Python 2, on an OS where a C long is 64-bit, <code>numpy.int64</code> is a subclass of <code>int</code>, so most things that want ints will accept <code>numpy.int64</code> even if they're not written to handle int-like types.</p>\n\n<p>On Python 3, that doesn't happen any more. If you need to use a library that wants real ints, call <code>int</code>:</p>\n\n<pre><code>torch.randn(int(some_numpy_integer))\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 9566877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7681380e6d4607058bae926a20e4c99?s=128&d=identicon&r=PG&f=1", "display_name": "Philip Hodges", "link": "https://stackoverflow.com/users/9566877/philip-hodges"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 521, "favorite_count": 0, "accepted_answer_id": 49546028, "answer_count": 1, "score": 0, "last_activity_date": 1522281757, "creation_date": 1522281474, "question_id": 49545988, "link": "https://stackoverflow.com/questions/49545988/pytorch-errors-when-given-numpy-integer-types-only-in-python-3-not-in-python-2", "title": "Pytorch errors when given numpy integer types only in python 3 (not in python 2)", "body": "<p>For example, the torch.randn function, among others, gets mad when given a numpy.int64 type:</p>\n\n<pre><code>Python 3.5.5 |Anaconda custom (64-bit)| (default, Mar 12 2018, 23:12:44) \n[GCC 7.2.0] on linux\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; import torch\n&gt;&gt;&gt; import numpy\n&gt;&gt;&gt; torch.randn(numpy.int64(4))\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nTypeError: torch.randn received an invalid combination of arguments - got (numpy.int64), but expected one of:\n * (int ... size)\n      didn't match because some of the arguments have invalid types: (numpy.int64)\n * (torch.Size size)\n      didn't match because some of the arguments have invalid types: (numpy.int64)\n * (torch.Generator generator, int ... size)\n * (torch.Generator generator, torch.Size size)\n</code></pre>\n\n<p>But in python 2, this works just fine:</p>\n\n<pre><code>Python 2.7.14 |Anaconda, Inc.| (default, Dec  7 2017, 17:05:42) \n[GCC 7.2.0] on linux2\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; import torch\n&gt;&gt;&gt; import numpy\n&gt;&gt;&gt; torch.randn(numpy.int64(3))\n\n-2.0513\n 0.5409\n-0.0814\n[torch.FloatTensor of size 3]\n</code></pre>\n\n<p>I couldn't find anyone else running into this issue. Is this known? Is this something about my setup? Is there any way to work around this without completely dropping numpy?</p>\n\n<p>I'm using version 0.3.1 of pytorch and version 1.14.2 of numpy.</p>\n"}, {"tags": ["python", "json", "pandas", "dataframe", "exception"], "comments": [{"owner": {"reputation": 1948, "user_id": 3697550, "user_type": "registered", "accept_rate": 73, "profile_image": "https://graph.facebook.com/583000646/picture?type=large", "display_name": "nicholas.reichel", "link": "https://stackoverflow.com/users/3697550/nicholas-reichel"}, "edited": false, "score": 0, "creation_date": 1522281650, "post_id": 49545985, "comment_id": 86099457, "body": "May try iterating through the rows and calling to_json on each row?"}, {"owner": {"reputation": 2472, "user_id": 109554, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/8d5e369f6d7fb6343f9559b0a65abde1?s=128&d=identicon&r=PG", "display_name": "tatlar", "link": "https://stackoverflow.com/users/109554/tatlar"}, "reply_to_user": {"reputation": 1948, "user_id": 3697550, "user_type": "registered", "accept_rate": 73, "profile_image": "https://graph.facebook.com/583000646/picture?type=large", "display_name": "nicholas.reichel", "link": "https://stackoverflow.com/users/3697550/nicholas-reichel"}, "edited": false, "score": 0, "creation_date": 1522431818, "post_id": 49545985, "comment_id": 86165506, "body": "Thanks @mobone -- I figured out a workaround and posted it as an answer."}], "answers": [{"tags": [], "owner": {"reputation": 2472, "user_id": 109554, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/8d5e369f6d7fb6343f9559b0a65abde1?s=128&d=identicon&r=PG", "display_name": "tatlar", "link": "https://stackoverflow.com/users/109554/tatlar"}, "is_accepted": true, "score": 1, "last_activity_date": 1522430539, "creation_date": 1522430539, "answer_id": 49578657, "question_id": 49545985, "link": "https://stackoverflow.com/questions/49545985/catch-pandas-df-to-json-exception/49578657#49578657", "title": "Catch pandas df.to_json() exception", "body": "<p>Not a <em>solution</em>, but a <strong>workaround</strong>.</p>\n\n<p>I <em>believe</em> this is a memory issue with <code>DataFrame.to_json()</code> -- the machine would hang attempting to transform a DataFrame of ~ 5M records x 1000 columns into a JSON file, and exit raising a general <code>Exception</code>.</p>\n\n<p>The workaround is to use <code>DataFrame.to_dict()</code> and then use <code>json.dump()</code>:</p>\n\n\n\n<pre><code>import json\n\nwrite_file = \"/path/to/output.json\"\nholder_dictionary = predictions.to_dict(orient='records')\n\nwith open(write_file, 'w') as outfile:\n    json.dump(holder_dictionary, outfile)\n</code></pre>\n\n<p>This works (so far) for any size DataFrame. In the meantime, I am going to file a bug/issue on the Pandas repo.</p>\n"}], "owner": {"reputation": 2472, "user_id": 109554, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/8d5e369f6d7fb6343f9559b0a65abde1?s=128&d=identicon&r=PG", "display_name": "tatlar", "link": "https://stackoverflow.com/users/109554/tatlar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 336, "favorite_count": 0, "accepted_answer_id": 49578657, "answer_count": 1, "score": 0, "last_activity_date": 1522430539, "creation_date": 1522281449, "question_id": 49545985, "link": "https://stackoverflow.com/questions/49545985/catch-pandas-df-to-json-exception", "title": "Catch pandas df.to_json() exception", "body": "<p>I am trying to determine the reason why I get a failure when executing the pandas <code>DataFrame.to_json()</code> method. The DataFrame is valid, but it's very large (on the order of 1,000,000 records).</p>\n\n<p>Here is my code, where <code>predictions</code> is my DataFrame:</p>\n\n<pre class=\"lang-python prettyprint-override\"><code>try:\n    predictions.to_json(write_file, orient='records', lines=True)\nexcept EOFError as eoferr:\n    print(eoferr)\n    sys.exit('\\nUnable to write file (%s)! EOFError. Exiting...' % write_file)\nexcept IOError as ioerr:\n    print(ioerr)\n    sys.exit('\\nUnable to write file (%s)! Permissions problem Exiting...' % write_file)\nexcept Exception as e:\n    print(e)\n    sys.exit('\\nUnable to write file (%s)! Unknown exception. Exiting...' % write_file)\n</code></pre>\n\n<p>Right now, I am getting the <code>Unknown exception. Exiting...</code> exception being raised. Thanks in advance!</p>\n"}, {"tags": ["python", "scikit-learn", "rasa-nlu"], "comments": [{"owner": {"reputation": 1088, "user_id": 1106484, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/133afd6da45e9f4e7273226527a0b4f4?s=128&d=identicon&r=PG", "display_name": "Uzair A.", "link": "https://stackoverflow.com/users/1106484/uzair-a"}, "edited": false, "score": 1, "creation_date": 1522749918, "post_id": 49545947, "comment_id": 86261553, "body": "I was facing the same problem while trying the default example in an iPython notebook, and <a href=\"https://stackoverflow.com/questions/9031783/hide-all-warnings-in-ipython\">this link</a> helped suppress the warnings in my case. Might help you too in case you haven&#39;t tried this one!"}], "answers": [{"comments": [{"owner": {"reputation": 2632, "user_id": 1338065, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bc4b3c5104521ae3756fc31d9af4d66c?s=128&d=identicon&r=PG", "display_name": "rojobuffalo", "link": "https://stackoverflow.com/users/1338065/rojobuffalo"}, "edited": false, "score": 0, "creation_date": 1523030434, "post_id": 49668081, "comment_id": 86406366, "body": "+1 but not accepted as answer because it doesn&#39;t address silencing the error without changing versions of numpy"}, {"owner": {"reputation": 974, "user_id": 3340228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcb852b3e5f73b28e689d8e10ba2cd64?s=128&d=identicon&r=PG", "display_name": "GauravLuthra", "link": "https://stackoverflow.com/users/3340228/gauravluthra"}, "reply_to_user": {"reputation": 2632, "user_id": 1338065, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bc4b3c5104521ae3756fc31d9af4d66c?s=128&d=identicon&r=PG", "display_name": "rojobuffalo", "link": "https://stackoverflow.com/users/1338065/rojobuffalo"}, "edited": false, "score": 2, "creation_date": 1523165781, "post_id": 49668081, "comment_id": 86442642, "body": "@rojobuffalo I have edited the answer to show how to ignore warnings. We can use filterwarnings method to ignore any category of warning."}, {"owner": {"reputation": 545, "user_id": 7781984, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZO4vj.png?s=128&g=1", "display_name": "Carlos A. Jimenez Holmquist", "link": "https://stackoverflow.com/users/7781984/carlos-a-jimenez-holmquist"}, "edited": false, "score": 0, "creation_date": 1557200899, "post_id": 49668081, "comment_id": 98674588, "body": "@GauravLuthra for some reason this does not work for me. It keeps printing the warnings :("}, {"owner": {"reputation": 974, "user_id": 3340228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcb852b3e5f73b28e689d8e10ba2cd64?s=128&d=identicon&r=PG", "display_name": "GauravLuthra", "link": "https://stackoverflow.com/users/3340228/gauravluthra"}, "reply_to_user": {"reputation": 545, "user_id": 7781984, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZO4vj.png?s=128&g=1", "display_name": "Carlos A. Jimenez Holmquist", "link": "https://stackoverflow.com/users/7781984/carlos-a-jimenez-holmquist"}, "edited": false, "score": 0, "creation_date": 1557231759, "post_id": 49668081, "comment_id": 98688768, "body": "@CarlosA.JimenezHolmquist, Can you share a reproducible example where you are seeing the issue?"}], "tags": [], "owner": {"reputation": 974, "user_id": 3340228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcb852b3e5f73b28e689d8e10ba2cd64?s=128&d=identicon&r=PG", "display_name": "GauravLuthra", "link": "https://stackoverflow.com/users/3340228/gauravluthra"}, "is_accepted": true, "score": 34, "last_activity_date": 1523165657, "last_edit_date": 1523165657, "creation_date": 1522918383, "answer_id": 49668081, "question_id": 49545947, "link": "https://stackoverflow.com/questions/49545947/sklearn-deprecationwarning-truth-value-of-an-array/49668081#49668081", "title": "sklearn DeprecationWarning truth value of an array", "body": "<p>This warning is caused by numpy which deprecated the <a href=\"https://github.com/numpy/numpy/issues/9583\" rel=\"noreferrer\">truth value check on empty array</a></p>\n\n<p>Rationale for this change is</p>\n\n<blockquote>\n  <p>It is impossible to take advantage of the fact that empty arrays are False, because an array can be False for other reasons.</p>\n</blockquote>\n\n<p>Check following example:</p>\n\n<pre><code>&gt;&gt;&gt; import numpy as np\n&gt;&gt;&gt; bool(np.array([]))\nFalse\n&gt;&gt;&gt; # but this is not a good way to test for emptiness, because...\n&gt;&gt;&gt; bool(np.array([0]))\nFalse\n</code></pre>\n\n<h2>Solution</h2>\n\n<p>As per <a href=\"https://github.com/scikit-learn/scikit-learn/issues/10449\" rel=\"noreferrer\">issue 10449</a> on scikit-learn library, this has been fixed in master branch of library. However that will be available around August 2018 so one possible alternate is to use a lesser version of numpy library which does not have this issue i.e. 1.13.3 since scikit-library by default would refer latest version of numpy(which is 1.14.2 at the time of writing this answer)</p>\n\n<pre><code>sudo pip install numpy==1.13.3\n</code></pre>\n\n<p>or with pip3 as follows</p>\n\n<pre><code>sudo pip3 install numpy==1.13.3\n</code></pre>\n\n<h2>Ignoring the warning(s)</h2>\n\n<p>In case we want to use the latest version of library(numpy in this case) which is giving the deprecation warning and just want to silence the deprecation warning then we can achieve it by using <a href=\"https://docs.python.org/2/library/warnings.html#warnings.filterwarnings\" rel=\"noreferrer\">filterwarnings</a> method of python's <a href=\"https://docs.python.org/2/library/warnings.html\" rel=\"noreferrer\">Warnings</a> module</p>\n\n<p>Following example below would produce the deprecation warning mentioned in question above:</p>\n\n<pre><code>from sklearn import preprocessing\n\nif __name__ == '__main__':\n    le = preprocessing.LabelEncoder()\n    le.fit([1, 2, 2, 6])\n    le.transform([1, 1, 2, 6])\n    le.inverse_transform([0, 0, 1, 2])\n</code></pre>\n\n<p>produces</p>\n\n<blockquote>\n  <p>/usr/local/lib/python2.7/dist-packages/sklearn/preprocessing/label.py:151: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use <code>array.size &gt; 0</code> to check that an array is not empty.</p>\n</blockquote>\n\n<p>And to take care of it, add filterwarnings for DeprecationWarning</p>\n\n<pre><code>from sklearn import preprocessing\nimport warnings\n\nif __name__ == '__main__':\n    warnings.filterwarnings(action='ignore', category=DeprecationWarning)\n    le = preprocessing.LabelEncoder()\n    le.fit([1, 2, 2, 6])\n    le.transform([1, 1, 2, 6])\n    le.inverse_transform([0, 0, 1, 2])\n</code></pre>\n\n<p>In case there are multiple modules which are giving warning and we want to selectively silent warning then use <em>module</em> attribute. e.g. to silent deprecation warning from scikit learn module</p>\n\n<pre><code>warnings.filterwarnings(module='sklearn*', action='ignore', category=DeprecationWarning)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 13027530, "user_type": "registered", "profile_image": "https://graph.facebook.com/561191957827238/picture?type=large", "display_name": "Sai Kumar Joru", "link": "https://stackoverflow.com/users/13027530/sai-kumar-joru"}, "is_accepted": false, "score": 0, "last_activity_date": 1601714468, "creation_date": 1601714468, "answer_id": 64182324, "question_id": 49545947, "link": "https://stackoverflow.com/questions/49545947/sklearn-deprecationwarning-truth-value-of-an-array/64182324#64182324", "title": "sklearn DeprecationWarning truth value of an array", "body": "<p>I too had the same problem. The following solution worked for me.\nGo to the path file and line number mentioned in the warning that is if you use anaconda go to Anaconda\\envs\\py2\\Lib\\site-packages\\sklearn\\preprocessing\\label.py Line number:151.</p>\n<p>Change the following code</p>\n<pre><code>if diff:\n    raise ValueError(&quot;y contains new labels: %s&quot; % str(diff))\n</code></pre>\n<p>to the following</p>\n<pre><code>if diff.size&gt;0:\n    raise ValueError(&quot;y contains new labels: %s&quot; % str(diff))\n</code></pre>\n"}], "owner": {"reputation": 2632, "user_id": 1338065, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bc4b3c5104521ae3756fc31d9af4d66c?s=128&d=identicon&r=PG", "display_name": "rojobuffalo", "link": "https://stackoverflow.com/users/1338065/rojobuffalo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 13696, "favorite_count": 7, "accepted_answer_id": 49668081, "answer_count": 2, "score": 16, "last_activity_date": 1601714468, "creation_date": 1522281044, "last_edit_date": 1522281701, "question_id": 49545947, "link": "https://stackoverflow.com/questions/49545947/sklearn-deprecationwarning-truth-value-of-an-array", "title": "sklearn DeprecationWarning truth value of an array", "body": "<p>Running a rasa_core example from the docs with</p>\n\n<pre><code>\u203a python3 -m rasa_core.run -d models/dialogue -u models/nlu/default/current\n</code></pre>\n\n<p>and get this error output after each message in the dialog:</p>\n\n<pre><code>.../sklearn/...: DeprecationWarning: The truth value of an empty array is ambiguous. Returning False, but in future this will result in an error. Use `array.size &gt; 0` to check that an array is not empty.\n</code></pre>\n\n<p>It's an issue with numpy that has been fixed but not been published in the latest release: <a href=\"https://github.com/scikit-learn/scikit-learn/issues/10449\" rel=\"noreferrer\">https://github.com/scikit-learn/scikit-learn/issues/10449</a></p>\n\n<p>The following has <strong>not worked</strong> to temporarily silence the warning:</p>\n\n<ol>\n<li>Adding <code>-W ignore</code></li>\n</ol>\n\n<p><code>python3 -W ignore -m rasa_core.run -d models/dialogue -u models/nlu/default/current</code></p>\n\n<ol start=\"2\">\n<li><code>warnings.simplefilter</code></li>\n</ol>\n\n<p><code>python3</code></p>\n\n<pre><code>&gt;&gt;&gt; warnings.simplefilter('ignore', DeprecationWarning)\n&gt;&gt;&gt; exit()\n</code></pre>\n\n<p><code>python3 -m rasa_core.run -d models/dialogue -u models/nlu/default/current</code></p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 40221, "user_id": 7311767, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/13Fpq.png?s=128&g=1", "display_name": "Stephen Rauch", "link": "https://stackoverflow.com/users/7311767/stephen-rauch"}, "edited": false, "score": 1, "creation_date": 1522283818, "post_id": 49545939, "comment_id": 86099969, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/26309962/appending-a-list-or-series-to-a-pandas-dataframe-as-a-row\">Appending a list or series to a pandas DataFrame as a row?</a>"}, {"owner": {"reputation": 1913, "user_id": 4294553, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b14938e80f2c10fb9fe654dd9e5fffa8?s=128&d=identicon&r=PG&f=1", "display_name": "tim654321", "link": "https://stackoverflow.com/users/4294553/tim654321"}, "edited": false, "score": 0, "creation_date": 1522316185, "post_id": 49545939, "comment_id": 86112417, "body": "Some code to generate your sample data may be helpful to stimulate an answer?"}, {"owner": {"reputation": 1948, "user_id": 3697550, "user_type": "registered", "accept_rate": 73, "profile_image": "https://graph.facebook.com/583000646/picture?type=large", "display_name": "nicholas.reichel", "link": "https://stackoverflow.com/users/3697550/nicholas-reichel"}, "edited": false, "score": 0, "creation_date": 1522335031, "post_id": 49545939, "comment_id": 86126116, "body": "I ended up iterating through the series keys and adding them to the end of the dataframe."}], "owner": {"reputation": 1948, "user_id": 3697550, "user_type": "registered", "accept_rate": 73, "profile_image": "https://graph.facebook.com/583000646/picture?type=large", "display_name": "nicholas.reichel", "link": "https://stackoverflow.com/users/3697550/nicholas-reichel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 801, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1522283804, "creation_date": 1522281014, "last_edit_date": 1522283804, "question_id": 49545939, "link": "https://stackoverflow.com/questions/49545939/append-series-onto-dataframe-as-row", "title": "Append series onto dataframe as row", "body": "<p>I have the following series and dataframe. I would like to append or concat the transposed series onto the dataframe such that the dataframe only has one row.</p>\n\n<p>Series:</p>\n\n<pre><code>No.                                    9\nTicker                              LULU\nCompany         Lululemon Athletica Inc.\nSector                    Consumer Goods\nIndustry      Textile - Apparel Clothing\nCountry                           Canada\nMarket Cap                        11.87B\nP/E                                42.72\nPrice                              85.96\nChange                             9.21%\nVolume                          10704010\nName: 8, dtype: object\n</code></pre>\n\n<p>Dataframe:</p>\n\n<pre><code>     Ask   Bid  Chg     Expiry        IV  IsNonstandard  Last  \\\n57  1.05  0.87 -5.0 2018-04-06  0.333014          False  0.85\n\n             Last_Trade_Date  Open_Int     PctChg      ...       \\\n57  2018-03-28T19:42:27.000Z       8.0 -85.470085      ...\n\n   Underlying_Price Update_Date  Update_Time   Vol  \\\n57            85.96    20180328     14:56:13  65.0\n\n                                 _id  iteration Start Price Diff from Current  \\\n57  LULU_20180406_20180328_26_p_84.0         26        0.96         -0.022801\n\n    Closed Current Price\n57   False          None\n\n[1 rows x 25 columns]\n</code></pre>\n"}, {"tags": ["python", "ssl"], "comments": [{"owner": {"reputation": 89578, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 1, "creation_date": 1522288895, "post_id": 49545930, "comment_id": 86101161, "body": "This is (very likely) not a general behavior with any URL but a behavior with a specific URL. You would need to provide the URL in question so that others can reproduce the problem. Note that protocol version problems can not be bypassed by disabling certificate validation."}, {"owner": {"reputation": 145, "user_id": 6686035, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/633c841b9878208f31de16e0bbfa83cb?s=128&d=identicon&r=PG&f=1", "display_name": "emanuel cristian Mocean", "link": "https://stackoverflow.com/users/6686035/emanuel-cristian-mocean"}, "reply_to_user": {"reputation": 89578, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1522318373, "post_id": 49545930, "comment_id": 86113938, "body": "updated. I thought I am missing something about proper way to call with urlopen. I have zero ssl experience and I am on an urgent deadline."}], "answers": [{"comments": [{"owner": {"reputation": 145, "user_id": 6686035, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/633c841b9878208f31de16e0bbfa83cb?s=128&d=identicon&r=PG&f=1", "display_name": "emanuel cristian Mocean", "link": "https://stackoverflow.com/users/6686035/emanuel-cristian-mocean"}, "edited": false, "score": 0, "creation_date": 1522347370, "post_id": 49561313, "comment_id": 86133335, "body": "thank you very much for reply Ullrich. I still get the same error with both ssl.PROTOCOL_TLSv1_2 and ssl.create_default_context(). Btw if it helps.. the project run for almost a year until I went through the process of getting new authorisation tokens. I will try and see if installing into a virtual-env helps. Maybe it has something to do with the libraries mixing something.."}, {"owner": {"reputation": 89578, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "reply_to_user": {"reputation": 145, "user_id": 6686035, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/633c841b9878208f31de16e0bbfa83cb?s=128&d=identicon&r=PG&f=1", "display_name": "emanuel cristian Mocean", "link": "https://stackoverflow.com/users/6686035/emanuel-cristian-mocean"}, "edited": false, "score": 0, "creation_date": 1522347972, "post_id": 49561313, "comment_id": 86133635, "body": "@emanuelcristianMocean: are you really getting the same error with TLS 1.2? I get a tls alert protocol version with TLS 1.0 but with TLS 1.2 I get a successful TLS handshake and then a 403 error - because my authentication information are wrong."}, {"owner": {"reputation": 145, "user_id": 6686035, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/633c841b9878208f31de16e0bbfa83cb?s=128&d=identicon&r=PG&f=1", "display_name": "emanuel cristian Mocean", "link": "https://stackoverflow.com/users/6686035/emanuel-cristian-mocean"}, "edited": false, "score": 0, "creation_date": 1522348934, "post_id": 49561313, "comment_id": 86134126, "body": "yes. I cannot paste full output in comments but is exactly as before. I&#39;ll try to install a clean copy of python in a virtual machine and get back later."}, {"owner": {"reputation": 145, "user_id": 6686035, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/633c841b9878208f31de16e0bbfa83cb?s=128&d=identicon&r=PG&f=1", "display_name": "emanuel cristian Mocean", "link": "https://stackoverflow.com/users/6686035/emanuel-cristian-mocean"}, "edited": false, "score": 0, "creation_date": 1522359651, "post_id": 49561313, "comment_id": 86139159, "body": "clean OS (win7 32bit on a oracle  virtual machine), clean Python 2.7.14, this line still fails with exactly same error: resp = urllib2.urlopen(url,ssl.create_default_context()).read() If I log the url and copy it to chrome I get the wanted json"}, {"owner": {"reputation": 89578, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "reply_to_user": {"reputation": 145, "user_id": 6686035, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/633c841b9878208f31de16e0bbfa83cb?s=128&d=identicon&r=PG&f=1", "display_name": "emanuel cristian Mocean", "link": "https://stackoverflow.com/users/6686035/emanuel-cristian-mocean"}, "edited": false, "score": 0, "creation_date": 1522383224, "post_id": 49561313, "comment_id": 86144755, "body": "@emanuelcristianMocean: then maybe there is some SSL intercepting firewall fiddling with the connection. Check if you have a proxy configured in the browser. Check also if the browser gets access to the site from the same machine as your Python code. Maybe provide a packet capture (as pcap file) so that one can see what actually happens on the wire."}, {"owner": {"reputation": 145, "user_id": 6686035, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/633c841b9878208f31de16e0bbfa83cb?s=128&d=identicon&r=PG&f=1", "display_name": "emanuel cristian Mocean", "link": "https://stackoverflow.com/users/6686035/emanuel-cristian-mocean"}, "edited": false, "score": 0, "creation_date": 1522423528, "post_id": 49561313, "comment_id": 86161688, "body": "I don&#39;t think any of those apply because node works . Behind the same firewall as python. And in the virtual machine the only firewall was the windows one. Thank you very much for trying to help Ullrich but I am just going to give up and re-code the application on node.js . I hate to do that but I&#39;d rather do that instead of learning tons of SSL stuff I will not need any time soon."}, {"owner": {"reputation": 145, "user_id": 6686035, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/633c841b9878208f31de16e0bbfa83cb?s=128&d=identicon&r=PG&f=1", "display_name": "emanuel cristian Mocean", "link": "https://stackoverflow.com/users/6686035/emanuel-cristian-mocean"}, "edited": false, "score": 0, "creation_date": 1522423796, "post_id": 49561313, "comment_id": 86161827, "body": "Chosen as best answer since you confirmed that the code should work."}], "tags": [], "owner": {"reputation": 89578, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": true, "score": 2, "last_activity_date": 1522342046, "creation_date": 1522342046, "answer_id": 49561313, "question_id": 49545930, "link": "https://stackoverflow.com/questions/49545930/urlerror-urlopen-error-ssl-tlsv1-alert-protocol-version-tlsv1-alert-protoco/49561313#49561313", "title": "URLError: &lt;urlopen error [SSL: TLSV1_ALERT_PROTOCOL_VERSION] tlsv1 alert protocol version (_ssl.c:661)&gt;", "body": "<blockquote>\n  <p>ctx = ssl.SSLContext(ssl.PROTOCOL_TLS) #Itried all the other protocols</p>\n</blockquote>\n\n<p>There is no <code>ssl.PROTOCOL_TLS</code>. There are for example <code>ssl.PROTOCOL_TLSv1</code> which does not work and there is <code>ssl.PROTOCOL_TLSv1_2</code> which does work for me. Even better use <code>ssl.create_default_context()</code>. </p>\n"}], "owner": {"reputation": 145, "user_id": 6686035, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/633c841b9878208f31de16e0bbfa83cb?s=128&d=identicon&r=PG&f=1", "display_name": "emanuel cristian Mocean", "link": "https://stackoverflow.com/users/6686035/emanuel-cristian-mocean"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1737, "favorite_count": 1, "accepted_answer_id": 49561313, "answer_count": 1, "score": 0, "last_activity_date": 1522342046, "creation_date": 1522280949, "last_edit_date": 1522318783, "question_id": 49545930, "link": "https://stackoverflow.com/questions/49545930/urlerror-urlopen-error-ssl-tlsv1-alert-protocol-version-tlsv1-alert-protoco", "title": "URLError: &lt;urlopen error [SSL: TLSV1_ALERT_PROTOCOL_VERSION] tlsv1 alert protocol version (_ssl.c:661)&gt;", "body": "<p>I get the error in the title</p>\n\n<p>I have python 2.7.14 and OpenSSL 1.0.2k  26 Jan 2017</p>\n\n<pre><code>ctx = ssl.SSLContext(ssl.PROTOCOL_TLS) #Itried all the other protocols\nctx.check_hostname = False #fails with or without these 2 lines\nctx.verify_mode = ssl.CERT_NONE\nresp = urllib2.urlopen(url, context=ctx).read()\n</code></pre>\n\n<p>Update:\nThis is the url (sensitive data replaced with ..)\n<a href=\"https://www.upwork.com/api/hr/v2/teams/../users.json?oauth_consumer_key=..&amp;oauth_nonce=..&amp;oauth_signature_method=HMAC-SHA1&amp;oauth_timestamp=..&amp;oauth_token=..&amp;oauth_version=1.0&amp;tz=gmt&amp;oauth_signature=\" rel=\"nofollow noreferrer\">https://www.upwork.com/api/hr/v2/teams/../users.json?oauth_consumer_key=..&amp;oauth_nonce=..&amp;oauth_signature_method=HMAC-SHA1&amp;oauth_timestamp=..&amp;oauth_token=..&amp;oauth_version=1.0&amp;tz=gmt&amp;oauth_signature=</a>..</p>\n\n<p>All keys and tokens work because I also use them on a javscript platform and they work perfectly there.\nAlso simply pasting the link in browser works. \nBut in python I have no idea how to debug this. Anyone can please help ? Thank you, deeply appreciated</p>\n"}, {"tags": ["python", "tensorflow", "machine-learning", "deep-learning"], "comments": [{"owner": {"reputation": 101, "user_id": 9053657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fbb99a10f951b0359c144bbf34b6f90?s=128&d=identicon&r=PG&f=1", "display_name": "mochi", "link": "https://stackoverflow.com/users/9053657/mochi"}, "edited": false, "score": 0, "creation_date": 1522281867, "post_id": 49545926, "comment_id": 86099510, "body": "Try setting the image directory: ./retrain.py --image-dir &lt;directory_name&gt;"}, {"owner": {"reputation": 2102, "user_id": 1524289, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/GoSij.jpg?s=128&g=1", "display_name": "Eliethesaiyan", "link": "https://stackoverflow.com/users/1524289/eliethesaiyan"}, "edited": false, "score": 0, "creation_date": 1522286730, "post_id": 49545926, "comment_id": 86100685, "body": "your image_list is empty ,using keys() on it returns None, try to see if you get the images correctly"}], "answers": [{"comments": [{"owner": {"reputation": 352, "user_id": 8006728, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10209045163868286/picture?type=large", "display_name": "Umang Mistry", "link": "https://stackoverflow.com/users/8006728/umang-mistry"}, "edited": false, "score": 0, "creation_date": 1522360999, "post_id": 49546627, "comment_id": 86139696, "body": "Encountered a few small errors after that. But it worked for me thanks alot"}], "tags": [], "owner": {"reputation": 46, "user_id": 3688123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1508773d618ea84d11dac87f2217d578?s=128&d=identicon&r=PG&f=1", "display_name": "Palash Taneja", "link": "https://stackoverflow.com/users/3688123/palash-taneja"}, "is_accepted": true, "score": 3, "last_activity_date": 1522286750, "creation_date": 1522286750, "answer_id": 49546627, "question_id": 49545926, "link": "https://stackoverflow.com/questions/49545926/tensorflow-attributeerror-nonetype-object-has-no-attribute-keys/49546627#49546627", "title": "Tensorflow AttributeError: &#39;NoneType&#39; object has no attribute &#39;keys&#39;", "body": "<p>You are not supplying all the required parameters in the command line</p>\n\n<p>Windows example from the post you linked:\n<a href=\"https://cdn-images-1.medium.com/max/1600/1*TyIlJnUlpkI42Qb9uFHWIA.png\" rel=\"nofollow noreferrer\">example</a> (SO won't let me post images. )</p>\n\n<p>If the file is stored in <code>C:\\training_data</code> and assuming your working directory is <code>F:\\Tensorflow</code> then the command is </p>\n\n<p><code>python F:\\Tensorflow\\retrain.py --image_dir C:\\training_data --how_many_training_steps 500 --model_dir F:\\Tensorflow\\inception --output_graph=F:\\Tensorflow\\retrained_graph.pb --output_labels=F:\\Tensorflow\\retrained_labels.txt</code> </p>\n"}, {"tags": [], "owner": {"reputation": 1098, "user_id": 5646794, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/q8nBm.jpg?s=128&g=1", "display_name": "Touhid", "link": "https://stackoverflow.com/users/5646794/touhid"}, "is_accepted": false, "score": 0, "last_activity_date": 1560398969, "last_edit_date": 1560398969, "creation_date": 1560334618, "answer_id": 56559773, "question_id": 49545926, "link": "https://stackoverflow.com/questions/49545926/tensorflow-attributeerror-nonetype-object-has-no-attribute-keys/56559773#56559773", "title": "Tensorflow AttributeError: &#39;NoneType&#39; object has no attribute &#39;keys&#39;", "body": "<p><strong>For MAC users who found same error</strong> </p>\n\n<p>Solution of \"Palash Taneja\" can help (Paths will be different on mac):</p>\n\n<p>Example command for MAC users to make training model from images:</p>\n\n<pre><code>python3 code/retrain.py --image_dir flower_photos --bottleneck_dir=bottleneck --how_many_training_steps 500 --model_dir=model --output_graph=graph/retrained_graph.pb --output_labels=graph/retrained_labels.txt\n</code></pre>\n\n<p><em>File and directory tree of terminal's working directory: (Here ML is working directory)</em></p>\n\n<p>ML/code/retain.py</p>\n\n<p>ML/flower_photos/{various dir of flowers or any images}</p>\n\n<p>ML/graph</p>\n\n<p>ML/model</p>\n\n<p>ML/bottleneck</p>\n"}], "owner": {"reputation": 352, "user_id": 8006728, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10209045163868286/picture?type=large", "display_name": "Umang Mistry", "link": "https://stackoverflow.com/users/8006728/umang-mistry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8074, "favorite_count": 1, "accepted_answer_id": 49546627, "answer_count": 2, "score": 0, "last_activity_date": 1560398969, "creation_date": 1522280926, "question_id": 49545926, "link": "https://stackoverflow.com/questions/49545926/tensorflow-attributeerror-nonetype-object-has-no-attribute-keys", "title": "Tensorflow AttributeError: &#39;NoneType&#39; object has no attribute &#39;keys&#39;", "body": "<p>I am trying to make a simple Image Classifier using Tensorflow. \nFrom here\n<a href=\"https://medium.com/@linjunghsuan/create-a-simple-image-classifier-using-tensorflow-a7061635984a\" rel=\"nofollow noreferrer\">https://medium.com/@linjunghsuan/create-a-simple-image-classifier-using-tensorflow-a7061635984a</a></p>\n\n<p>I am using Anaconda2 on Windows 10 (64bit)\nPackages used \nThe following NEW packages will be INSTALLED:</p>\n\n<pre><code>certifi:        2016.2.28-py35_0\npip:            9.0.3-py35_1\npython:         3.5.4-0\nsetuptools:     36.4.0-py35_1\nvc:             14-0\nvs2015_runtime: 14.0.25420-0\nwheel:          0.29.0-py35_0\nwincertstore:   0.2-py35_0\n</code></pre>\n\n<p>I downloaded retrain.py from \n<a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/examples/image_retraining/retrain.py\" rel=\"nofollow noreferrer\">https://github.com/tensorflow/tensorflow/blob/master/tensorflow/examples/image_retraining/retrain.py</a></p>\n\n<p>When I am trying to train the data using </p>\n\n<pre><code>python {$your-working_directory}/retrain.py\n</code></pre>\n\n<p>I am getting these errors </p>\n\n<pre><code>[tensorflow] C:\\Users\\user&gt;python F:\\Tensorflow\\retrain.py\nERROR:tensorflow:Image directory '' not found.\nTraceback (most recent call last):\n  File \"F:\\Tensorflow\\retrain.py\", line 1409, in &lt;module&gt;\n    tf.app.run(main=main, argv=[sys.argv[0]] + unparsed)\n  File \"F:\\Coursera ML\\Anaconda2\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\python\\platform\\app.py\", line 126, in run\n    _sys.exit(main(argv))\n  File \"F:\\Tensorflow\\retrain.py\", line 1061, in main\n    class_count = len(image_lists.keys())\nAttributeError: 'NoneType' object has no attribute 'keys'\n</code></pre>\n\n<p>In F:\\Tensorflow there is one folder with the dataset images and the retrain.py</p>\n\n<p>I am a beginner and this is my first time using Tensorflow and Deep Learning. \nI scrubbed through StackOverflow and Github but I couldnt find any solution that worked. \nI think i am making an error with the directories of the images of the data set. \nAny help is appreciated. \nThanks in advance.\n(Also if you need additional information regarding anything please do let me know)</p>\n"}, {"tags": ["python", "python-3.x", "tuples", "shapely"], "comments": [{"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1522281020, "post_id": 49545922, "comment_id": 86099309, "body": "You can parse tuples of builtin Python objects with <code>ast.literal_eval</code>."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1522281051, "post_id": 49545922, "comment_id": 86099315, "body": "But, before you run off and do that\u2014why do you have reprs of tuples as strings in the first place? If you&#39;re storing data by writing it to a file that way, there are much better ways to do it."}, {"owner": {"reputation": 1203, "user_id": 6850443, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mf2Uj.png?s=128&g=1", "display_name": "BShaps", "link": "https://stackoverflow.com/users/6850443/bshaps"}, "reply_to_user": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1522281438, "post_id": 49545922, "comment_id": 86099407, "body": "@abarnert Poor coding from someone else where they manipulated the string to get it in an odd format.  Turns out I can straight up just do the ast.literal_eval on the string returned from the postgres polygon type and everything works."}], "answers": [{"comments": [{"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1522281114, "post_id": 49545946, "comment_id": 86099324, "body": "<a href=\"https://docs.python.org/3/reference/expressions.html#literals\" rel=\"nofollow noreferrer\">They&#39;re actually not literals.</a> But <code>literal_eval</code> does work on them anyway."}, {"owner": {"reputation": 1203, "user_id": 6850443, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mf2Uj.png?s=128&g=1", "display_name": "BShaps", "link": "https://stackoverflow.com/users/6850443/bshaps"}, "edited": false, "score": 0, "creation_date": 1522281230, "post_id": 49545946, "comment_id": 86099351, "body": "Hmm odd, when I printed my array of tuple strings after doing a ast.literal_eval it showed them as strings still, but it did work when passing it into the shapely Polygon.  Thanks!"}, {"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "reply_to_user": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1522281331, "post_id": 49545946, "comment_id": 86099382, "body": "@abarnert  Huh.  TIL."}], "tags": [], "owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "is_accepted": false, "score": 1, "last_activity_date": 1522281362, "last_edit_date": 1522281362, "creation_date": 1522281044, "answer_id": 49545946, "question_id": 49545922, "link": "https://stackoverflow.com/questions/49545922/how-do-i-convert-an-array-of-tuple-strings-to-an-array-of-tuples/49545946#49545946", "title": "How do I convert an array of tuple strings to an array of tuples?", "body": "<p><strike>They're literals, so</strike> you can safely evaluate them:</p>\n\n<pre><code>&gt;&gt;&gt; import ast\n&gt;&gt;&gt; L = ['(-109.080842,45.002073)','(-105.91517,45.002073)','(-109.080842,45.002073)']\n&gt;&gt;&gt; [ast.literal_eval(x) for x in L]\n[(-109.080842, 45.002073), (-105.91517, 45.002073), (-109.080842, 45.002073)]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "is_accepted": false, "score": 0, "last_activity_date": 1522281110, "creation_date": 1522281110, "answer_id": 49545952, "question_id": 49545922, "link": "https://stackoverflow.com/questions/49545922/how-do-i-convert-an-array-of-tuple-strings-to-an-array-of-tuples/49545952#49545952", "title": "How do I convert an array of tuple strings to an array of tuples?", "body": "<p>This is the functional way with <code>ast.literal_eval</code>:</p>\n\n<pre><code>from ast import literal_eval\n\nlst = ['(-109.080842,45.002073)','(-105.91517,45.002073)','(-109.080842,45.002073)']\n\nres = list(map(literal_eval, lst))\n\n# [(-109.080842, 45.002073), (-105.91517, 45.002073), (-109.080842, 45.002073)]\n</code></pre>\n"}], "owner": {"reputation": 1203, "user_id": 6850443, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mf2Uj.png?s=128&g=1", "display_name": "BShaps", "link": "https://stackoverflow.com/users/6850443/bshaps"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1039, "favorite_count": 0, "closed_date": 1522281057, "answer_count": 2, "score": 0, "last_activity_date": 1522281362, "creation_date": 1522280868, "question_id": 49545922, "link": "https://stackoverflow.com/questions/49545922/how-do-i-convert-an-array-of-tuple-strings-to-an-array-of-tuples", "closed_reason": "Duplicate", "title": "How do I convert an array of tuple strings to an array of tuples?", "body": "<p>My situation is that I'm trying to convert an array of tuples in a string format into an array of tuples.</p>\n\n<p>i.e. I want to go from:</p>\n\n<pre><code>['(-109.080842,45.002073)','(-105.91517,45.002073)','(-109.080842,45.002073)']\n</code></pre>\n\n<p>to</p>\n\n<pre><code>[(-109.080842,45.002073),(-105.91517,45.002073),(-109.080842,45.002073)]\n</code></pre>\n\n<p>The purpose of this is to be able to create a shapely Polygon.  It throws an error when the tuples are a string.  What is the best way to go from strings to actual tuple objects?</p>\n"}, {"tags": ["python", "string", "list"], "comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1522280879, "post_id": 49545913, "comment_id": 86099267, "body": "You&#39;re returning around <code>23751</code> items. Does that sound right?"}, {"owner": {"reputation": 305, "user_id": 6905337, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/6352765d2a38304e8f978d9de470a4be?s=128&d=identicon&r=PG&f=1", "display_name": "Rya", "link": "https://stackoverflow.com/users/6905337/rya"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1522280988, "post_id": 49545913, "comment_id": 86099301, "body": "@c\u1d0f\u029f\u1d05s\u1d18\u1d07\u1d07\u1d05 yes.so how can I save all 23751 items?"}, {"owner": {"reputation": 695068, "user_id": 20862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2343ae368d3241278581ce6c87f62a25?s=128&d=identicon&r=PG", "display_name": "Ignacio Vazquez-Abrams", "link": "https://stackoverflow.com/users/20862/ignacio-vazquez-abrams"}, "edited": false, "score": 1, "creation_date": 1522281038, "post_id": 49545913, "comment_id": 86099311, "body": "What does &quot;save&quot; mean?"}, {"owner": {"reputation": 6690, "user_id": 4225229, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/2YfJM.jpg?s=128&g=1", "display_name": "JacobIRR", "link": "https://stackoverflow.com/users/4225229/jacobirr"}, "edited": false, "score": 0, "creation_date": 1522281146, "post_id": 49545913, "comment_id": 86099331, "body": "If by &quot;save&quot; you mean save to a file on your filesystem disk, you can <code>with open(&quot;yourfile&quot;, &#39;w&#39;) as f: f.write(keywords)</code>"}, {"owner": {"reputation": 305, "user_id": 6905337, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/6352765d2a38304e8f978d9de470a4be?s=128&d=identicon&r=PG&f=1", "display_name": "Rya", "link": "https://stackoverflow.com/users/6905337/rya"}, "reply_to_user": {"reputation": 695068, "user_id": 20862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2343ae368d3241278581ce6c87f62a25?s=128&d=identicon&r=PG", "display_name": "Ignacio Vazquez-Abrams", "link": "https://stackoverflow.com/users/20862/ignacio-vazquez-abrams"}, "edited": false, "score": 0, "creation_date": 1522281159, "post_id": 49545913, "comment_id": 86099336, "body": "@IgnacioVazquez-Abrams it means print out all possible random strings with 4 chars."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1522283212, "post_id": 49545913, "comment_id": 86099832, "body": "&quot;all possible&quot; and &quot;random&quot; comprise a contradiction in terms: if you&#39;re generating all possible permutations, the result is <i>not</i> random."}], "answers": [{"comments": [{"owner": {"reputation": 305, "user_id": 6905337, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/6352765d2a38304e8f978d9de470a4be?s=128&d=identicon&r=PG&f=1", "display_name": "Rya", "link": "https://stackoverflow.com/users/6905337/rya"}, "edited": false, "score": 0, "creation_date": 1522281631, "post_id": 49545977, "comment_id": 86099451, "body": "Thanks.I got it. This method is useful!"}], "tags": [], "owner": {"reputation": 134, "user_id": 7572251, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rMJp5.jpg?s=128&g=1", "display_name": "Harry MW", "link": "https://stackoverflow.com/users/7572251/harry-mw"}, "is_accepted": false, "score": -1, "last_activity_date": 1522289268, "last_edit_date": 1522289268, "creation_date": 1522281369, "answer_id": 49545977, "question_id": 49545913, "link": "https://stackoverflow.com/questions/49545913/save-all-possible-random-strings-in-python/49545977#49545977", "title": "save all possible random strings in python", "body": "<p>It sounds like what you really want is all the possible permutations of length N from a superset.</p>\n\n<p>Check out the <code>itertools.permutations()</code> method. </p>\n\n<p>Or the combination with replacement mentioned above.</p>\n"}], "owner": {"reputation": 305, "user_id": 6905337, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/6352765d2a38304e8f978d9de470a4be?s=128&d=identicon&r=PG&f=1", "display_name": "Rya", "link": "https://stackoverflow.com/users/6905337/rya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "closed_date": 1522281524, "answer_count": 1, "score": -1, "last_activity_date": 1522289268, "creation_date": 1522280774, "last_edit_date": 1522281038, "question_id": 49545913, "link": "https://stackoverflow.com/questions/49545913/save-all-possible-random-strings-in-python", "closed_reason": "Duplicate", "title": "save all possible random strings in python", "body": "<p>Here is my code:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>def randomword(length):\r\n    allchar = string.ascii_lowercase\r\n    keywords =[''.join(random.choice(allchar) for i in range(length))]\r\n    return keywords\r\n\r\nprint(randomword(4))</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>I didn't get all possible random string with 4 characters.I only get one possible random string,such as ['uuph'].</p>\n"}, {"tags": ["python", "django", "numbers"], "comments": [{"owner": {"reputation": 1238, "user_id": 3049987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13670c6d7f471fa532baca3e9de8b9d6?s=128&d=identicon&r=PG&f=1", "display_name": "Tim Woocker", "link": "https://stackoverflow.com/users/3049987/tim-woocker"}, "edited": false, "score": 0, "creation_date": 1522280727, "post_id": 49545897, "comment_id": 86099230, "body": "Your question is not clear enough. What instances are you trying to count? And where?"}, {"owner": {"reputation": 1030, "user_id": 8866053, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Q1QZv.jpg?s=128&g=1", "display_name": "CtrlAltF2", "link": "https://stackoverflow.com/users/8866053/ctrlaltf2"}, "reply_to_user": {"reputation": 1238, "user_id": 3049987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13670c6d7f471fa532baca3e9de8b9d6?s=128&d=identicon&r=PG&f=1", "display_name": "Tim Woocker", "link": "https://stackoverflow.com/users/3049987/tim-woocker"}, "edited": false, "score": 0, "creation_date": 1522280814, "post_id": 49545897, "comment_id": 86099254, "body": "@crey4fun  I mean how many of the counter objects exist in the database. Sorry for confusion."}], "answers": [{"tags": [], "owner": {"reputation": 1238, "user_id": 3049987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13670c6d7f471fa532baca3e9de8b9d6?s=128&d=identicon&r=PG&f=1", "display_name": "Tim Woocker", "link": "https://stackoverflow.com/users/3049987/tim-woocker"}, "is_accepted": false, "score": 2, "last_activity_date": 1522280959, "creation_date": 1522280959, "answer_id": 49545931, "question_id": 49545897, "link": "https://stackoverflow.com/questions/49545897/count-number-of-entries-in-a-column-django/49545931#49545931", "title": "Count Number of Entries in a Column Django", "body": "<p>If you want to count the amount of Counter rows, you can do it like this:</p>\n\n<pre><code>Counter.objects.all().count()\n</code></pre>\n\n<p>This will return the amount of rows as an int.</p>\n"}, {"tags": [], "owner": {"reputation": 701, "user_id": 7717871, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wNctL.jpg?s=128&g=1", "display_name": "edouardtheron", "link": "https://stackoverflow.com/users/7717871/edouardtheron"}, "is_accepted": true, "score": 2, "last_activity_date": 1522282019, "creation_date": 1522282019, "answer_id": 49546072, "question_id": 49545897, "link": "https://stackoverflow.com/questions/49545897/count-number-of-entries-in-a-column-django/49546072#49546072", "title": "Count Number of Entries in a Column Django", "body": "<p>To get an iterable of all the instances of your model, the <code>all()</code> method is what you need (<a href=\"https://docs.djangoproject.com/en/2.0/ref/models/querysets/#django.db.models.query.QuerySet.all\" rel=\"nofollow noreferrer\">see doc</a>)</p>\n\n<pre><code>&gt;&gt;&gt; MyModel.objects.all()   # returns a queryset\n</code></pre>\n\n<p>If you want to count the numbers of <code>Counter</code> instances in your database, thank to the ability of <a href=\"https://docs.djangoproject.com/en/2.0/topics/db/queries/#chaining-filters\" rel=\"nofollow noreferrer\">chaining queries (see doc)</a>, you can just do:</p>\n\n<pre><code>&gt;&gt;&gt; Counter.objects.all().count()  # returns an integer\n</code></pre>\n"}], "owner": {"reputation": 1030, "user_id": 8866053, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Q1QZv.jpg?s=128&g=1", "display_name": "CtrlAltF2", "link": "https://stackoverflow.com/users/8866053/ctrlaltf2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 200, "favorite_count": 0, "accepted_answer_id": 49546072, "answer_count": 2, "score": 0, "last_activity_date": 1522282019, "creation_date": 1522280637, "last_edit_date": 1522280766, "question_id": 49545897, "link": "https://stackoverflow.com/questions/49545897/count-number-of-entries-in-a-column-django", "title": "Count Number of Entries in a Column Django", "body": "<p>I have a counter object defined as</p>\n\n<pre><code>class Counter(models.Model):\n    user = models.ForeignKey(User, on_delete=models.CASCADE)\n    counter_text = models.IntegerField(default=100)\n</code></pre>\n\n<p>I want to count exactly how many counter objects exist in django.</p>\n\n<p>I am using this as an average, so if there is a better way to average a column, please tell me. Thanks in advance!</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "edited": false, "score": 1, "creation_date": 1522279936, "post_id": 49545802, "comment_id": 86099021, "body": "<i>&quot;Why is it printing thrice&quot;</i> Because your <code>print</code> is inside a loop?"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1522279956, "post_id": 49545802, "comment_id": 86099026, "body": "You told it to <code>print</code> every time through the loop, just after appending each element.  This is an excellent debugging tool.  For what you want, though, just pull the <code>print</code> outside the loop: reduce the indentation by one level (shift it left)."}, {"owner": {"reputation": 121, "user_id": 9502238, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/42970431cb1c50698a7fd91898367def?s=128&d=identicon&r=PG&f=1", "display_name": "FCoding", "link": "https://stackoverflow.com/users/9502238/fcoding"}, "edited": false, "score": 0, "creation_date": 1522280274, "post_id": 49545802, "comment_id": 86099113, "body": "Yeah got it .. Thanks guys"}], "answers": [{"tags": [], "owner": {"reputation": 1238, "user_id": 3049987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13670c6d7f471fa532baca3e9de8b9d6?s=128&d=identicon&r=PG&f=1", "display_name": "Tim Woocker", "link": "https://stackoverflow.com/users/3049987/tim-woocker"}, "is_accepted": false, "score": 2, "last_activity_date": 1522279982, "creation_date": 1522279982, "answer_id": 49545813, "question_id": 49545802, "link": "https://stackoverflow.com/questions/49545802/how-do-i-return-a-list-inside-a-for-loop-while-iterating-over-the-elements-of-an/49545813#49545813", "title": "How do I return a list inside a for loop while iterating over the elements of another list?", "body": "<p>Your print() is inside the loop so it gets called multiple times.\nPut it outside the loop like this:</p>\n\n<pre><code>for val in value:\n      result = val1,val2,val3\n      L2.append(result)\nprint(L2)\n</code></pre>\n"}], "owner": {"reputation": 121, "user_id": 9502238, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/42970431cb1c50698a7fd91898367def?s=128&d=identicon&r=PG&f=1", "display_name": "FCoding", "link": "https://stackoverflow.com/users/9502238/fcoding"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1522279982, "creation_date": 1522279871, "question_id": 49545802, "link": "https://stackoverflow.com/questions/49545802/how-do-i-return-a-list-inside-a-for-loop-while-iterating-over-the-elements-of-an", "title": "How do I return a list inside a for loop while iterating over the elements of another list?", "body": "<p>I have two lists. The first list contains :\nL1 = [a,b]\nThe second list contains :\nL2 = []\nI need to iterate over the values of these two lists in nested for loops. What I mean by that is :</p>\n\n<pre><code>for elems1 in L1:\n   ---some-actions---\n   for val in value:\n      result = val1,val2,val3\n      L2.append(result)\n      print(L2)\n\n   #additional tasks \n   for vals in L2:\n        ---additional-tasks to be performed---\n</code></pre>\n\n<p>When I print(L2), I get something like this :</p>\n\n<pre><code>['val1']\n['val1','val2'] \n['val1','val2','val3'] \n</code></pre>\n\n<p>Why is it printing thrice and listing each value separately ? Ideally the output should be</p>\n\n<pre><code>['val1','val2','val3']             \n</code></pre>\n"}, {"tags": ["python", "multithreading", "scikit-learn"], "answers": [{"comments": [{"owner": {"reputation": 931, "user_id": 5824843, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae6ac18604fc6cebd20a2ebb7aa47962?s=128&d=identicon&r=PG&f=1", "display_name": "Spcogg the second", "link": "https://stackoverflow.com/users/5824843/spcogg-the-second"}, "edited": false, "score": 0, "creation_date": 1542416305, "post_id": 49545901, "comment_id": 93573218, "body": "Had the same problem on windows and the same fix - this is a known issue with how parallel processing is implemented on windows. See the discussion here <a href=\"https://github.com/scikit-learn/scikit-learn/issues/5115\" rel=\"nofollow noreferrer\">github.com/scikit-learn/scikit-learn/issues/5115</a>"}], "tags": [], "owner": {"reputation": 21, "user_id": 3956178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b31a39567e16d7f5214a8a9aef88ec8?s=128&d=identicon&r=PG&f=1", "display_name": "heinztomato", "link": "https://stackoverflow.com/users/3956178/heinztomato"}, "is_accepted": false, "score": 1, "last_activity_date": 1522313166, "last_edit_date": 1522313166, "creation_date": 1522280662, "answer_id": 49545901, "question_id": 49545794, "link": "https://stackoverflow.com/questions/49545794/scikit-learn-cross-validate-parameter-n-jobs-1-causes-error/49545901#49545901", "title": "scikit-learn cross_validate parameter n_jobs=-1 causes error", "body": "<p>IFF I execute my script in an external system terminal AND write</p>\n\n<blockquote>\n  <p>if <strong>name</strong> == '<strong>main</strong>':</p>\n</blockquote>\n\n<p>at the beginning of the script: My issue is solved.</p>\n\n<p>Would still be wondering if there is a better solution, especially because on my friends system it is running without that fix (and he is using the same OS and hardware)</p>\n\n<p>Example:</p>\n\n<pre><code>#Imports are here\n\nif __name__ == '__main__':\n\n    #All the other code start from here\n\n    for k, i in enumerate(alpha):\n        Model.set_params(Ridge__alpha = i)\n        scores = cross_validate(Model,X,y,scoring='neg_mean_squared_error',cv=10,n_jobs=-1)\n        avgRMSE[k] = np.mean(np.sqrt(-1*scores['test_score']))\n\n    #More code\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 3956178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b31a39567e16d7f5214a8a9aef88ec8?s=128&d=identicon&r=PG&f=1", "display_name": "heinztomato", "link": "https://stackoverflow.com/users/3956178/heinztomato"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 468, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1522313166, "creation_date": 1522279804, "last_edit_date": 1522312972, "question_id": 49545794, "link": "https://stackoverflow.com/questions/49545794/scikit-learn-cross-validate-parameter-n-jobs-1-causes-error", "title": "scikit-learn cross_validate parameter n_jobs=-1 causes error", "body": "<p>I use scikit-learn and the cross_validate function for a simple machine-learning model. I would like to set the functions parameter \"n_jobs\" to \"-1\" to allow to use of more than one core. However, if always get an error. Does anybody have a solution to this?</p>\n\n<p>Here is the error message:</p>\n\n<pre><code>  File \"C:\\ProgramData\\Anaconda3\\lib\\multiprocessing\\process.py\", line 105, in start\n    self._popen = self._Popen(self)\n\n  File \"C:\\ProgramData\\Anaconda3\\lib\\multiprocessing\\context.py\", line 322, in _Popen\n    return Popen(process_obj)\n\n  File \"C:\\ProgramData\\Anaconda3\\lib\\multiprocessing\\popen_spawn_win32.py\", line 33, in __init__\n    prep_data = spawn.get_preparation_data(process_obj._name)\n\n  File \"C:\\ProgramData\\Anaconda3\\lib\\multiprocessing\\spawn.py\", line 172, in get_preparation_data\n    main_mod_name = getattr(main_module.__spec__, \"name\", None)\n\nAttributeError: module '__main__' has no attribute '__spec__'\n</code></pre>\n\n<p>My code looks the following:</p>\n\n<pre><code>#Go trough each alpha, save average RMSE from crossvalidation into array\nfor k, i in enumerate(alpha):\n    Model.set_params(Ridge__alpha = i)\n    scores = cross_validate(Model,X,y,scoring='neg_mean_squared_error',cv=10,n_jobs=-1)\n    avgRMSE[k] = np.mean(np.sqrt(-1*scores['test_score']))\n</code></pre>\n\n<p>I use the following versions:\nPython 3.6\nAnaconda 5.1\nscikit-learn 0.19.1\nscipy 1.0.0\nnumpy 1.14.2</p>\n\n<p>The exact same script is running on my friends laptop (Win10 same OS as me) without any issues. I have no idea what the issue is here, so I really hope to get some help here :)</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 1238, "user_id": 3049987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13670c6d7f471fa532baca3e9de8b9d6?s=128&d=identicon&r=PG&f=1", "display_name": "Tim Woocker", "link": "https://stackoverflow.com/users/3049987/tim-woocker"}, "edited": false, "score": 0, "creation_date": 1522279841, "post_id": 49545782, "comment_id": 86098997, "body": "dt is already a datetime object so you can just call the timestamp() method on dt: <code>dt.timestamp()</code>"}], "answers": [{"tags": [], "owner": {"reputation": 27354, "user_id": 948550, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/YWVjs.jpg?s=128&g=1", "display_name": "Reut Sharabani", "link": "https://stackoverflow.com/users/948550/reut-sharabani"}, "is_accepted": true, "score": 0, "last_activity_date": 1522279808, "creation_date": 1522279808, "answer_id": 49545795, "question_id": 49545782, "link": "https://stackoverflow.com/questions/49545782/convert-a-string-into-epoch-time/49545795#49545795", "title": "convert a string into epoch time", "body": "<p>You only need to use your datetime instance:</p>\n\n<pre><code>print (dt.timestamp())\n</code></pre>\n\n<p>From the <a href=\"https://docs.python.org/3/library/datetime.html#datetime.datetime.timestamp\" rel=\"nofollow noreferrer\">docs</a>:</p>\n\n<blockquote>\n  <p>Return POSIX timestamp corresponding to the datetime <strong>instance</strong>.</p>\n</blockquote>\n\n<p>What you are currently doing is passing the parsed datetime object to the <a href=\"https://docs.python.org/3/library/datetime.html#datetime.datetime\" rel=\"nofollow noreferrer\">datetime constructor</a> (<code>datetime(dt)</code>)which expects integers.</p>\n"}], "owner": {"reputation": 2073, "user_id": 4088201, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/123a71f0b9f5820d228a098f78e9c44c?s=128&d=identicon&r=PG&f=1", "display_name": "thunder", "link": "https://stackoverflow.com/users/4088201/thunder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "closed_date": 1522279838, "accepted_answer_id": 49545795, "answer_count": 1, "score": 0, "last_activity_date": 1522279808, "creation_date": 1522279734, "question_id": 49545782, "link": "https://stackoverflow.com/questions/49545782/convert-a-string-into-epoch-time", "closed_reason": "Duplicate", "title": "convert a string into epoch time", "body": "<p>I tried to convert a string into epoch time but failed.</p>\n\n<pre><code>from datetime import datetime\nfrom dateutil import parser\n\ndt = '2017-01-01 00:00:00'\ndt = parser.parse(dt)\nprint(dt)\n\nprint (datetime(dt).timestamp())\n</code></pre>\n\n<p>Here is error:</p>\n\n<pre><code> print (datetime(dt).timestamp())\n   TypeError: an integer is required (got type datetime.datetime)\n</code></pre>\n"}, {"tags": ["python", "arrays", "numpy"], "answers": [{"tags": [], "owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": true, "score": 8, "last_activity_date": 1522279647, "creation_date": 1522279647, "answer_id": 49545765, "question_id": 49545758, "link": "https://stackoverflow.com/questions/49545758/flip-or-reverse-columns-in-numpy-array/49545765#49545765", "title": "Flip or reverse columns in numpy array", "body": "<p>Use the aptly named <code>np.flip</code>:</p>\n\n<pre><code>np.flip(contour, axis=1)\n</code></pre>\n\n<p>Or,</p>\n\n<pre><code>np.fliplr(contour)\n</code></pre>\n\n<p></p>\n\n<pre><code>array([[4, 1],\n       [2, 3]])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "is_accepted": false, "score": 4, "last_activity_date": 1522280043, "creation_date": 1522280043, "answer_id": 49545818, "question_id": 49545758, "link": "https://stackoverflow.com/questions/49545758/flip-or-reverse-columns-in-numpy-array/49545818#49545818", "title": "Flip or reverse columns in numpy array", "body": "<p>You can use <code>numpy</code> <a href=\"https://docs.scipy.org/doc/numpy-1.13.0/reference/arrays.indexing.html\" rel=\"nofollow noreferrer\">indexing</a>:</p>\n\n<pre><code>contour[:, ::-1]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "edited": false, "score": 0, "creation_date": 1522288454, "post_id": 49545855, "comment_id": 86101062, "body": "That should be <code>contour[:, :2] = contour[:, 1::-1]</code>, shouldn&#39;t it?"}], "tags": [], "owner": {"reputation": 1154, "user_id": 9565387, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-d6Y3JBWunV4/AAAAAAAAAAI/AAAAAAAAAEk/3020ZVdwdFU/photo.jpg?sz=128", "display_name": "ducminh", "link": "https://stackoverflow.com/users/9565387/ducminh"}, "is_accepted": false, "score": 4, "last_activity_date": 1522311711, "last_edit_date": 1522311711, "creation_date": 1522280313, "answer_id": 49545855, "question_id": 49545758, "link": "https://stackoverflow.com/questions/49545758/flip-or-reverse-columns-in-numpy-array/49545855#49545855", "title": "Flip or reverse columns in numpy array", "body": "<p>In addition to <a href=\"https://stackoverflow.com/a/49545765/9565387\">COLDSPEED's answer</a>, if we only want to swap the first and second column only, not to flip the entire array:</p>\n\n<pre><code>contour[:, :2] = contour[:, 1::-1]\n</code></pre>\n\n<p>Here <code>contour[:, 1::-1]</code> is the array formed by first two columns of the array <code>contour</code>, in the reverse order. It then is assigned to the first two columns (<code>contour[:, :2]</code>). Now the first two column are swapped.</p>\n\n<p>In general, to swap the <code>i</code>th and <code>j</code>th columns, do the following:</p>\n\n<pre><code>contour[:, [i, j]] = contour[:, [j, i]]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "is_accepted": false, "score": 3, "last_activity_date": 1522288248, "creation_date": 1522288248, "answer_id": 49546804, "question_id": 49545758, "link": "https://stackoverflow.com/questions/49545758/flip-or-reverse-columns-in-numpy-array/49546804#49546804", "title": "Flip or reverse columns in numpy array", "body": "<p>Here are two non-inplace ways of swapping the first two columns:</p>\n\n<pre><code>&gt;&gt;&gt; a = np.arange(15).reshape(3, 5)\n&gt;&gt;&gt; a[:, np.r_[1:-1:-1, 2:5]]\narray([[ 1,  0,  2,  3,  4],\n       [ 6,  5,  7,  8,  9],\n       [11, 10, 12, 13, 14]])\n</code></pre>\n\n<p>or</p>\n\n<pre><code>&gt;&gt;&gt; np.c_[a[:, 1::-1], a[:, 2:]]\narray([[ 1,  0,  2,  3,  4],\n       [ 6,  5,  7,  8,  9],\n       [11, 10, 12, 13, 14]])\n</code></pre>\n"}], "owner": {"reputation": 4884, "user_id": 884269, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5692f3ff8b8c6348b701a518ce58d681?s=128&d=identicon&r=PG", "display_name": "waspinator", "link": "https://stackoverflow.com/users/884269/waspinator"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7486, "favorite_count": 1, "accepted_answer_id": 49545765, "answer_count": 4, "score": 4, "last_activity_date": 1522311711, "creation_date": 1522279569, "last_edit_date": 1522280214, "question_id": 49545758, "link": "https://stackoverflow.com/questions/49545758/flip-or-reverse-columns-in-numpy-array", "title": "Flip or reverse columns in numpy array", "body": "<p>I want to flip the first and second values of arrays in an array. A naive solution is to loop through the array. What is the right way of doing this?</p>\n\n<pre><code>import numpy as np\ncontour = np.array([[1, 4],\n                    [3, 2]])\n\nflipped_contour = np.empty((0,2))\nfor point in contour:\n    x_y_fipped = np.array([point[1], point[0]])\n    flipped_contour = np.vstack((flipped_contour, x_y_fipped))\n\nprint(flipped_contour)\n\n[[4. 1.]\n[2. 3.]]\n</code></pre>\n"}, {"tags": ["python", "amazon-web-services", "csv", "amazon-dynamodb", "boto"], "comments": [{"owner": {"reputation": 546, "user_id": 1808935, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/DvPAs.jpg?s=128&g=1", "display_name": "KingJames", "link": "https://stackoverflow.com/users/1808935/kingjames"}, "edited": false, "score": 0, "creation_date": 1522279836, "post_id": 49545712, "comment_id": 86098995, "body": "generally if there is a comma in the cell. the whole data in csv is inside inverted commas. That&#39;s how you differentiate and then you can use python inbuilt csv library like mentioned here - <a href=\"https://stackoverflow.com/questions/8311900/read-csv-file-with-comma-within-fields-in-python\" title=\"read csv file with comma within fields in python\">stackoverflow.com/questions/8311900/&hellip;</a>"}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 1, "creation_date": 1522280512, "post_id": 49545712, "comment_id": 86099176, "body": "There are a number of different quasi-standard dialects of CSV that handle this in different ways. If you want to build this from scratch, you need to either find out how the CSV was created and read up on the docs, or reverse-engineer the rules for yourself. But if you use the stdlib <code>csv</code> module, it already knows the most popular dialects, which makes things a whole lot easier."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 1, "creation_date": 1522280573, "post_id": 49545712, "comment_id": 86099189, "body": "Anyway. if you actually do want to work out the dialect and parse it yourself, you will need to provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>\u2014including enough sample input to work out the dialect. But really, you&#39;re almost certainly better off switching to the <code>csv</code> module and closing this question."}], "answers": [{"tags": [], "owner": {"reputation": 2400, "user_id": 425050, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5d3f6894c5dbedb1e0e4dd94fe6b9b7d?s=128&d=identicon&r=PG", "display_name": "mafrosis", "link": "https://stackoverflow.com/users/425050/mafrosis"}, "is_accepted": false, "score": 1, "last_activity_date": 1522287243, "creation_date": 1522287243, "answer_id": 49546685, "question_id": 49545712, "link": "https://stackoverflow.com/questions/49545712/how-to-ignore-commas-within-cells-when-reading-data-from-a-csv-python/49546685#49546685", "title": "How to ignore commas within cells when reading data from a CSV - Python", "body": "<p>The Python built-in <code>csv</code> library is very good. The documentation really needs no extra explanation:</p>\n\n<p><a href=\"https://docs.python.org/3/library/csv.html\" rel=\"nofollow noreferrer\">https://docs.python.org/3/library/csv.html</a></p>\n"}], "owner": {"reputation": 11, "user_id": 9468461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7809aa4ddca79d3305b5a27059d66a84?s=128&d=identicon&r=PG&f=1", "display_name": "Will Simpson", "link": "https://stackoverflow.com/users/9468461/will-simpson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 651, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1522287243, "creation_date": 1522279331, "question_id": 49545712, "link": "https://stackoverflow.com/questions/49545712/how-to-ignore-commas-within-cells-when-reading-data-from-a-csv-python", "title": "How to ignore commas within cells when reading data from a CSV - Python", "body": "<p>I am attempting to read data from a CSV file and load it into a DynamoDB table. The issue is that description is written in sentences and have commas. How do I read the columns with a comma delimiter, but ignore the commas within the cells?</p>\n\n<p>Currently, I am using this code to read the CSV file and write to the DB:</p>\n\n<pre><code>def import_csv_to_dynamodb(table_name, csv_file_name, col_names, column_types):\n'''\nImport a CSV file to a DynamoDB table\n'''\ndynamodb_conn = boto.connect_dynamodb(aws_access_key_id=MY_ACCESS_KEY_ID,\n                                      aws_secret_access_key=MY_SECRET_ACCESS_KEY)\ndynamodb_table = dynamodb_conn.get_table(table_name)\nBATCH_COUNT = 2  # 25 is the maximum batch size for Amazon DynamoDB\n\nitems = []\n\ncount = 0\ncsv_file = open(csv_file_name, 'r', encoding=\"utf-8-sig\")\nfor cur_line in csv_file:\n    count += 1\n    cur_line = cur_line.strip().split(',')\n\n    row = {}\n    for col_number, col_name in enumerate(col_names):\n        row[col_name] = column_types[col_number](cur_line[col_number])\n\n    item = dynamodb_table.new_item(\n        attrs=row\n    )\n    items.append(item)\n\n    if count % BATCH_COUNT == 0:\n        print\n        'batch write start ... ',\n        do_batch_write(items, table_name, dynamodb_table, dynamodb_conn)\n        items = []\n        print\n        'batch done! (row number: ' + str(count) + ')'\n\n# flush remaining items, if any\nif len(items) &gt; 0:\n    do_batch_write(items, table_name, dynamodb_table, dynamodb_conn)\n\ncsv_file.close()\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "image", "numpy"], "comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 2, "creation_date": 1522279162, "post_id": 49545672, "comment_id": 86098814, "body": "Are you sure it&#39;s a 2D array? An RGB image is usually 3D."}, {"owner": {"reputation": 822, "user_id": 690007, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c279d44ad8029a5e0b2ac59cd05ab433?s=128&d=identicon&r=PG", "display_name": "jt78", "link": "https://stackoverflow.com/users/690007/jt78"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1522279316, "post_id": 49545672, "comment_id": 86098857, "body": "Correct - I suppose it is technically 3D. I said 2D because it is a 2D array of tuples containing the 3 RGB values (which I would imagine are not strictly part of the array?)"}, {"owner": {"reputation": 840, "user_id": 9407941, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/528229d89cebf4befe74508d1317192f?s=128&d=identicon&r=PG&f=1", "display_name": "dROOOze", "link": "https://stackoverflow.com/users/9407941/droooze"}, "edited": false, "score": 0, "creation_date": 1522279377, "post_id": 49545672, "comment_id": 86098878, "body": "Why is <code>b &gt; 220:     # white</code>? There are better criteria for white - e.g. if <code>b</code>, <code>r</code>, and <code>g</code> all are high values. As of now you&#39;ll be catching both white and blue with this method."}, {"owner": {"reputation": 2075, "user_id": 9534390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df129537d255833e014ba2b4bcec8dd1?s=128&d=identicon&r=PG&f=1", "display_name": "pythonic833", "link": "https://stackoverflow.com/users/9534390/pythonic833"}, "edited": false, "score": 0, "creation_date": 1522279393, "post_id": 49545672, "comment_id": 86098882, "body": "it is 3d, each pixel in  <code>imgData[i,j]</code> has 3 values  <code>r,g,b</code>"}, {"owner": {"reputation": 2075, "user_id": 9534390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df129537d255833e014ba2b4bcec8dd1?s=128&d=identicon&r=PG&f=1", "display_name": "pythonic833", "link": "https://stackoverflow.com/users/9534390/pythonic833"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1522279504, "post_id": 49545672, "comment_id": 86098910, "body": "Either use  @c\u1d0f\u029f\u1d05s\u1d18\u1d07\u1d07\u1d05&#39;s proposal or solve this with np.where"}, {"owner": {"reputation": 822, "user_id": 690007, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c279d44ad8029a5e0b2ac59cd05ab433?s=128&d=identicon&r=PG", "display_name": "jt78", "link": "https://stackoverflow.com/users/690007/jt78"}, "reply_to_user": {"reputation": 840, "user_id": 9407941, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/528229d89cebf4befe74508d1317192f?s=128&d=identicon&r=PG&f=1", "display_name": "dROOOze", "link": "https://stackoverflow.com/users/9407941/droooze"}, "edited": false, "score": 0, "creation_date": 1522279634, "post_id": 49545672, "comment_id": 86098944, "body": "@droooze Very true - this was just me trying to remove any unnecessary comparison as there is no blue expected in this particular scenario. The actual definitions of the colour regions are fairly irrelevant to the question though, so you should be able to ignore that."}], "answers": [{"tags": [], "owner": {"reputation": 840, "user_id": 9407941, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/528229d89cebf4befe74508d1317192f?s=128&d=identicon&r=PG&f=1", "display_name": "dROOOze", "link": "https://stackoverflow.com/users/9407941/droooze"}, "is_accepted": false, "score": 1, "last_activity_date": 1522279731, "creation_date": 1522279731, "answer_id": 49545781, "question_id": 49545672, "link": "https://stackoverflow.com/questions/49545672/python-element-wise-vectorised-boolean-operations-to-classify-image-pixels-based/49545781#49545781", "title": "Python element-wise vectorised boolean operations to classify image pixels based on their colour", "body": "<p>Your algorithm as of the moment can be captured like this:</p>\n\n<pre><code>r, g, b = imgData[...,0], imgData[...,1], imgData[...,2]\nmapData = np.ones_like(r, dtype=int)\nmapData[r &gt; 230] = 2\nmapData[b &gt; 220] = 3\n</code></pre>\n\n<p>Note the order of operations in assigning these numbers.</p>\n"}, {"comments": [{"owner": {"reputation": 822, "user_id": 690007, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c279d44ad8029a5e0b2ac59cd05ab433?s=128&d=identicon&r=PG", "display_name": "jt78", "link": "https://stackoverflow.com/users/690007/jt78"}, "edited": false, "score": 1, "creation_date": 1522280448, "post_id": 49545783, "comment_id": 86099159, "body": "That&#39;s great, very fast and no it seems to be producing exactly what I need so I don&#39;t think you missed anything. Many thanks"}], "tags": [], "owner": {"reputation": 2075, "user_id": 9534390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df129537d255833e014ba2b4bcec8dd1?s=128&d=identicon&r=PG&f=1", "display_name": "pythonic833", "link": "https://stackoverflow.com/users/9534390/pythonic833"}, "is_accepted": true, "score": 1, "last_activity_date": 1522280130, "last_edit_date": 1522280130, "creation_date": 1522279737, "answer_id": 49545783, "question_id": 49545672, "link": "https://stackoverflow.com/questions/49545672/python-element-wise-vectorised-boolean-operations-to-classify-image-pixels-based/49545783#49545783", "title": "Python element-wise vectorised boolean operations to classify image pixels based on their colour", "body": "<p>Using <code>np.where</code> makes this pretty fast. </p>\n\n<pre><code>mapData = np.where(imgData[:,:,2] &gt; 220, 3, np.where(imgData[:,:,0]&gt;230, 2, 1))\n</code></pre>\n\n<p>But when applying this to a picture the only results where ones. Did I miss anything or should the cases be made in a different way?</p>\n"}, {"tags": [], "owner": {"reputation": 7702, "user_id": 894763, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d013c9681666f0a68a6c1c00ff4d603?s=128&d=identicon&r=PG", "display_name": "jcupitt", "link": "https://stackoverflow.com/users/894763/jcupitt"}, "is_accepted": false, "score": 0, "last_activity_date": 1522595082, "creation_date": 1522595082, "answer_id": 49599406, "question_id": 49545672, "link": "https://stackoverflow.com/questions/49545672/python-element-wise-vectorised-boolean-operations-to-classify-image-pixels-based/49599406#49599406", "title": "Python element-wise vectorised boolean operations to classify image pixels based on their colour", "body": "<p>Colour classification is usually done by treating RGB colours as vectors. Normalize each one to the magnitude, then find the distance to your target colour. </p>\n\n<p>For example, the skin detector in <a href=\"https://github.com/jwagner/smartcrop.js/\" rel=\"nofollow noreferrer\">smartcrop.js</a> works like this (using <a href=\"https://pypi.python.org/pypi/pyvips\" rel=\"nofollow noreferrer\">pyvips</a>):</p>\n\n<pre><code>def pythag(im):\n    return sum([x ** 2 for x in im]) ** 0.5\n\nskin = [0.78, 0.57, 0.44]\nscore = 1 - pythag(img / pythag(img) - skin)\n</code></pre>\n\n<p>Now <code>score</code> is a float image with values in 0 - 1 which is 1 for pixels most likely to be skin-coloured. Note that it ignores brightness: you'll need another rule to chop off very dark areas.</p>\n\n<p>In your case I guess you'd need an array set of target vectors, then compute all the colour probabilities, and finally label the output pixel with the index of the highest-scoring vector. Something like:</p>\n\n<pre><code>import sys\nimport pyvips\n\ndef pythag(im):\n    return sum([x ** 2 for x in im]) ** 0.5\n\ndef classify(img, target):\n    return 1 - pythag(img / pythag(img) - target)\n\n# find [index, max] of an array of pyvips images\ndef argmax(ar):\n    if len(ar) == 1:\n        return [0, ar[0]]\n    else:\n        index, mx = argmax(ar[:-1])\n        return [(ar[-1] &gt; mx).ifthenelse(len(ar) - 1, index),\n                (ar[-1] &gt; mx).ifthenelse(ar[-1], mx)]\n\nskin = [0.78, 0.57, 0.44]\nred = [1, 0, 0]\ngreen = [0, 1, 0]\ntargets = [red, green, skin] \n\n# we're not doing any coordinate transformations, so we can stream the image\nimg = pyvips.Image.new_from_file(sys.argv[1], access=\"sequential\")\n\nscores = [classify(img, x) for x in targets]\nindex, mx = argmax(scores)\n\nindex.write_to_file(sys.argv[2])\n</code></pre>\n\n<p>(plug: pyvips is typically 2x or 3x faster than numpy and needs much less memory)</p>\n"}], "owner": {"reputation": 822, "user_id": 690007, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c279d44ad8029a5e0b2ac59cd05ab433?s=128&d=identicon&r=PG", "display_name": "jt78", "link": "https://stackoverflow.com/users/690007/jt78"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 177, "favorite_count": 0, "accepted_answer_id": 49545783, "answer_count": 3, "score": 0, "last_activity_date": 1522595082, "creation_date": 1522279080, "last_edit_date": 1522279422, "question_id": 49545672, "link": "https://stackoverflow.com/questions/49545672/python-element-wise-vectorised-boolean-operations-to-classify-image-pixels-based", "title": "Python element-wise vectorised boolean operations to classify image pixels based on their colour", "body": "<p>I have an RGB image which I am loading into a 2D array using PIL</p>\n\n<pre><code>img = Image.open(path)\nimgData = numpy.array(img)\n</code></pre>\n\n<p>I need to efficiently translate this into a 2D array of RGB tuples (in some sense a 3D array) the same size containing a rough 'classification' of each pixel - 'red', 'green', 'white' or 'other' - at each index based on which 'colour region' they lie within. This is for purposes of image recognition.</p>\n\n<p>My current implementation uses a element-wise for loop but is very slow (an 8MP image takes 1+ minutes):</p>\n\n<pre><code>for i in range(cols): # for every col\n    for j in range(rows): # for every row\n        r,g,b = imgData[i,j]\n\n        if b &gt; 220:     # white\n            n = 3\n        elif r &gt; 230:   # red\n            n = 2\n        else:           # green\n            n = 1\n\n        mapData[i,j] = n\n</code></pre>\n\n<p>(I realise that the order of the if statements here affects the precedence of the classifications - this is not a major issue for now although I would prefer to define the colour spaces exclusively)</p>\n\n<p>I am running Python 3.6.4 and happy to use NumPy or not. Having done a bunch of research, it seems like there are a number of faster and more 'pythonic' and vectorised ways to do this but I have not been able to get any working.</p>\n\n<p>Any help would be much appreciated\nThanks!</p>\n"}, {"tags": ["python", "python-3.x", "numbers"], "comments": [{"owner": {"reputation": 7185, "user_id": 4949918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49ebe74084d2bf2feab20ec74c7b05ba?s=128&d=identicon&r=PG&f=1", "display_name": "Axnyff", "link": "https://stackoverflow.com/users/4949918/axnyff"}, "edited": false, "score": 0, "creation_date": 1522278905, "post_id": 49545634, "comment_id": 86098756, "body": "Hello, can you explain what it&#39;s supposed to do and why it does not work?"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 2, "creation_date": 1522279010, "post_id": 49545634, "comment_id": 86098771, "body": "<code>int(blah &#47; blah)</code> is not how you do integer division."}, {"owner": {"reputation": 115, "user_id": 5807686, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f1cbda6cf8b28033f41643f24d6380b?s=128&d=identicon&r=PG&f=1", "display_name": "SecurityBreach", "link": "https://stackoverflow.com/users/5807686/securitybreach"}, "edited": false, "score": 0, "creation_date": 1522279084, "post_id": 49545634, "comment_id": 86098789, "body": "Hello, I just edited. Below code is explanation. I don&#39;t know why it does work with numbers like 234423 but doesn&#39;t work with 6354372758237865"}, {"owner": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "edited": false, "score": 0, "creation_date": 1522279182, "post_id": 49545634, "comment_id": 86098823, "body": "Not sure what &quot;it doesn&#39;t work&quot; is supposed to mean. I can encode and decode 6354372758237865 just fine. Can you describe the problem?"}, {"owner": {"reputation": 115, "user_id": 5807686, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f1cbda6cf8b28033f41643f24d6380b?s=128&d=identicon&r=PG&f=1", "display_name": "SecurityBreach", "link": "https://stackoverflow.com/users/5807686/securitybreach"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1522279433, "post_id": 49545634, "comment_id": 86098894, "body": "I just find out the answer.The problem was with integer division. Thank you @user2357112"}, {"owner": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "edited": false, "score": 0, "creation_date": 1522279458, "post_id": 49545634, "comment_id": 86098901, "body": "Okay, but it would still be a good idea to make the question clear and useful... There&#39;s no real point posting a self-answer if the question isn&#39;t comprehensible."}, {"owner": {"reputation": 115, "user_id": 5807686, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f1cbda6cf8b28033f41643f24d6380b?s=128&d=identicon&r=PG&f=1", "display_name": "SecurityBreach", "link": "https://stackoverflow.com/users/5807686/securitybreach"}, "edited": false, "score": 0, "creation_date": 1522279723, "post_id": 49545634, "comment_id": 86098971, "body": "Sure, I will edit it."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 1, "creation_date": 1522280575, "post_id": 49545634, "comment_id": 86099190, "body": "See question <a href=\"https://stackoverflow.com/questions/1119722/base-62-conversion\">Base 62 conversion</a> for a useful example of something similar."}], "answers": [{"tags": [], "owner": {"reputation": 115, "user_id": 5807686, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f1cbda6cf8b28033f41643f24d6380b?s=128&d=identicon&r=PG&f=1", "display_name": "SecurityBreach", "link": "https://stackoverflow.com/users/5807686/securitybreach"}, "is_accepted": true, "score": 0, "last_activity_date": 1522282325, "last_edit_date": 1522282325, "creation_date": 1522279376, "answer_id": 49545724, "question_id": 49545634, "link": "https://stackoverflow.com/questions/49545634/my-own-numerical-system-implementation/49545724#49545724", "title": "My own numerical system implementation", "body": "<p>Alright, I just find out thanks to @user2357112</p>\n\n<p>The problem was with int(blah / blah).\nCorrected to int(blah // blah).\nNow works fine.</p>\n\n<p>This problem was becasue I switched to python 3 from python 2.\nFor anyone who doesn't know: in python 2, 5/2 = 2 but in python 3, 5/2 = 2.5 yet 5//2 = 2</p>\n\n<p>I just thought dividing integers are the same in python 2 and 3.</p>\n\n<p>Working code in python 3.6.5:</p>\n\n<pre><code>_unnonagesimal = \"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ.-:+=^/*?&amp;&lt;&gt;()[]@%$#,;'`~|\\\"\\\\_\"\n\n\ndef unnonagesimal_to_decimal(s):\n    return sum([_unnonagesimal.find(var) * len(_unnonagesimal) ** i for i, var in enumerate(reversed(s))])\n\n\ndef decimal_to_unnonagesimal(n):\n    if n == 0:\n        return 0\n    else:\n        s = \"\"\n\n        while n != 0:\n            s += _unnonagesimal[n % len(_unnonagesimal)]\n            n = int(n // len(_unnonagesimal))\n\n        return s[::-1]\n</code></pre>\n"}], "owner": {"reputation": 115, "user_id": 5807686, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f1cbda6cf8b28033f41643f24d6380b?s=128&d=identicon&r=PG&f=1", "display_name": "SecurityBreach", "link": "https://stackoverflow.com/users/5807686/securitybreach"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "closed_date": 1522281914, "accepted_answer_id": 49545724, "answer_count": 1, "score": 0, "last_activity_date": 1522282325, "creation_date": 1522278765, "last_edit_date": 1522280129, "question_id": 49545634, "link": "https://stackoverflow.com/questions/49545634/my-own-numerical-system-implementation", "closed_reason": "Duplicate", "title": "My own numerical system implementation", "body": "<p>I'm working with my own 91-numbers numerical system (unnonagesimal) in python 3.6 for RSA algorithm for my studies project. It works really fine but not with large numbers. Numbers I need it to work with are bigger than 1024 bits.</p>\n\n<p>It doesn't work with some numbers, especially with those big ones.</p>\n\n<p>The question is: Why doesn't it work?</p>\n\n<p>Here's my code:</p>\n\n<pre><code>_unnonagesimal = \"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ.-:+=^/*?&amp;&lt;&gt;()[]@%$#,;'`~|\\\"\\\\_\"\n\ndef unnonagesimal_to_decimal(s):\n    return sum([_unnonagesimal.find(var) * len(_unnonagesimal) ** i\n                    for i, var in enumerate(reversed(s))])\n\ndef decimal_to_unnonagesimal(n):\n    if n == 0:\n        return 0\n    else:\n        s = \"\"\n        while n != 0:\n            s += _unnonagesimal[n % len(_unnonagesimal)]\n            n = int(n / len(_unnonagesimal))\n\n        return s[::-1]\n</code></pre>\n\n<p>Where:</p>\n\n<p><code>unnonagesimal_to_decimal(s)</code> converts unnonagesimal string <code>s</code> into a decimal number.</p>\n\n<p>and</p>\n\n<p><code>decimal_to_unnonagesimal(n)</code> converts decimal int <code>n</code> into an unnonagesimal number.</p>\n"}, {"tags": ["python", "arrays", "pandas", "numpy", "transpose"], "answers": [{"tags": [], "owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": true, "score": 16, "last_activity_date": 1575961792, "last_edit_date": 1575961792, "creation_date": 1522278768, "answer_id": 49545635, "question_id": 49545599, "link": "https://stackoverflow.com/questions/49545599/how-to-turn-a-pandas-column-into-array-and-transpose-it/49545635#49545635", "title": "How to turn a Pandas column into array and transpose it?", "body": "<h3>pandas >= 0.24</h3>\n\n<p>Use <code>DataFrame.to_numpy()</code>, the new Right Way to extract a numpy array:</p>\n\n<pre><code>training_set[['label']].to_numpy()\n</code></pre>\n\n<hr>\n\n<p><strong>pandas &lt; 0.24</strong></p>\n\n<p>Slice out your column as a single columned <code>DataFrame</code> (using <code>[[...]]</code>), not as a <code>Series</code>:</p>\n\n<pre><code>Y_train = np.asarray(training_set[['label']])\n</code></pre>\n\n<p>Or,</p>\n\n<pre><code>Y_train = training_set[['label']].values\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 41182, "user_id": 6671176, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4DvZ4.png?s=128&g=1", "display_name": "sacuL", "link": "https://stackoverflow.com/users/6671176/sacul"}, "is_accepted": false, "score": 3, "last_activity_date": 1522279318, "creation_date": 1522279318, "answer_id": 49545707, "question_id": 49545599, "link": "https://stackoverflow.com/questions/49545599/how-to-turn-a-pandas-column-into-array-and-transpose-it/49545707#49545707", "title": "How to turn a Pandas column into array and transpose it?", "body": "<p>Another way would be to reshape your array to shape <code>(-1,1)</code>, which means \"infer number of rows, force to 1 column\":</p>\n\n<pre><code>Y_train = np.array(training_set['label']).reshape(-1,1)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "is_accepted": false, "score": 2, "last_activity_date": 1522279462, "creation_date": 1522279462, "answer_id": 49545737, "question_id": 49545599, "link": "https://stackoverflow.com/questions/49545599/how-to-turn-a-pandas-column-into-array-and-transpose-it/49545737#49545737", "title": "How to turn a Pandas column into array and transpose it?", "body": "<p>One way:</p>\n\n<pre><code>Y_train = training_set['label'].values[:, None]\n</code></pre>\n"}], "owner": {"reputation": 622, "user_id": 6228056, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7015db461b4af5f0a93f3a002e2ebe29?s=128&d=identicon&r=PG&f=1", "display_name": "Stanleyrr", "link": "https://stackoverflow.com/users/6228056/stanleyrr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 23335, "favorite_count": 0, "accepted_answer_id": 49545635, "answer_count": 3, "score": 7, "last_activity_date": 1575961792, "creation_date": 1522278541, "last_edit_date": 1592644375, "question_id": 49545599, "link": "https://stackoverflow.com/questions/49545599/how-to-turn-a-pandas-column-into-array-and-transpose-it", "title": "How to turn a Pandas column into array and transpose it?", "body": "<p>I have a Pandas dataframe called 'training_set' that resembles the screenshot below:</p>\n<p><a href=\"https://i.stack.imgur.com/neApT.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/neApT.png\" alt=\"enter image description here\" /></a></p>\n<p>I try to turn the 'label' column into array and transpose it. I tried doing <code>Y_train=np.asarray(training_set['label'])</code> but what I got is a horizontal array that resembles the screenshot below, which is not what I want.</p>\n<p><a href=\"https://i.stack.imgur.com/3hMv9.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/3hMv9.png\" alt=\"enter image description here\" /></a></p>\n<p>I want the array to display vertically just like the screenshot below (The screenshot has 2 variables per row. My desired output should only contain 1 variable, the 'label', per row.)</p>\n<p><a href=\"https://i.stack.imgur.com/9Tau6.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/9Tau6.png\" alt=\"enter image description here\" /></a></p>\n<p>Any suggestion or help would be greatly appreciated!</p>\n"}, {"tags": ["python", "text", "character", "counter"], "comments": [{"owner": {"reputation": 2599, "user_id": 2730399, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/55f1223c407a8d06c677fec00c1ed32e?s=128&d=identicon&r=PG", "display_name": "Azsgy", "link": "https://stackoverflow.com/users/2730399/azsgy"}, "edited": false, "score": 2, "creation_date": 1522278607, "post_id": 49545589, "comment_id": 86098680, "body": "Works for me. can you give some example data?"}, {"owner": {"reputation": 1154, "user_id": 9565387, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-d6Y3JBWunV4/AAAAAAAAAAI/AAAAAAAAAEk/3020ZVdwdFU/photo.jpg?sz=128", "display_name": "ducminh", "link": "https://stackoverflow.com/users/9565387/ducminh"}, "edited": false, "score": 1, "creation_date": 1522278662, "post_id": 49545589, "comment_id": 86098697, "body": "<code>if &#39;a&#39; in line</code> should check if the string <code>line</code> contains <code>&#39;a&#39;</code> at any position, not just the first character. Could you provide an example where it does not work?"}], "answers": [{"comments": [{"owner": {"reputation": 1154, "user_id": 9565387, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-d6Y3JBWunV4/AAAAAAAAAAI/AAAAAAAAAEk/3020ZVdwdFU/photo.jpg?sz=128", "display_name": "ducminh", "link": "https://stackoverflow.com/users/9565387/ducminh"}, "edited": false, "score": 0, "creation_date": 1522279508, "post_id": 49545713, "comment_id": 86098913, "body": "I think you are misunderstanding the problem. Here we need to count the number of lines containing the character <code>a</code>, not count the number of occurrence of the character <code>a</code>."}, {"owner": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "reply_to_user": {"reputation": 1154, "user_id": 9565387, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-d6Y3JBWunV4/AAAAAAAAAAI/AAAAAAAAAEk/3020ZVdwdFU/photo.jpg?sz=128", "display_name": "ducminh", "link": "https://stackoverflow.com/users/9565387/ducminh"}, "edited": false, "score": 0, "creation_date": 1522279805, "post_id": 49545713, "comment_id": 86098985, "body": "I added that. Thanks"}, {"owner": {"reputation": 53, "user_id": 8781559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a22a1e90ccb333024e7ed2f614a901aa?s=128&d=identicon&r=PG&f=1", "display_name": "Marcus S", "link": "https://stackoverflow.com/users/8781559/marcus-s"}, "edited": false, "score": 0, "creation_date": 1522447332, "post_id": 49545713, "comment_id": 86172054, "body": "The only problem is that the text file is very large. Because the file is so large it becomes difficult to do something with the counter the way you have described as running out of memory will become an issue."}, {"owner": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "edited": false, "score": 0, "creation_date": 1522466167, "post_id": 49545713, "comment_id": 86175815, "body": "That is an imaginary issue. The file is read line-by-line. The counter is only as big as the total unique characters in the file."}], "tags": [], "owner": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "is_accepted": true, "score": 0, "last_activity_date": 1522279586, "last_edit_date": 1522279586, "creation_date": 1522279334, "answer_id": 49545713, "question_id": 49545589, "link": "https://stackoverflow.com/questions/49545589/how-to-check-if-a-line-in-a-text-file-contains-a-certain-character/49545713#49545713", "title": "How to check if a line in a text file contains a certain character", "body": "<p>Halfway tongue in check, why only count one character when you can count all of them more easily:</p>\n\n<pre><code>from collections import Counter\n\nc=Counter()\nwith open('file') as f:\n    c=Counter(ch for line in f for ch in line)\n\n&gt;&gt;&gt; c\nCounter({' ': 99, '-': 85, 'e': 12, 'o': 12, '&gt;': 11, '&lt;': 10, 'n': 8, '\\n': 7, 't': 7, 'd': 6, '/': 5, 'i': 5, 'm': 5, 'r': 4, '|': 4, 'a': 3, 'g': 3, 'f': 3, 'h': 3, '+': 2, 'T': 2, 'b': 2, 'y': 2, '!': 1, \"'\": 1, '.': 1, '1': 1, 'D': 1, 'J': 1, 'R': 1, 'k': 1, 'l': 1, 's': 1, 'w': 1, 'v': 1, 'x': 1})\n</code></pre>\n\n<p>Then to know your specific character count:</p>\n\n<pre><code>&gt;&gt;&gt; c['a'] \n3\n</code></pre>\n\n<p>(in this particular file, there are 3 <code>'a</code>'`)</p>\n\n<p>Or you can skip the Counter if you really only want a single character and use the same comprehension in <code>sum</code>:</p>\n\n<pre><code>with open('file') as f:\n    c=sum(1 for line in f for ch in line if ch=='a')\n\n&gt;&gt;&gt; c\n3\n</code></pre>\n\n<hr>\n\n<p>If you want lines that contain <code>'a'</code> you can do:</p>\n\n<pre><code>with open('file') as f:\n    print sum(1 for line in f if 'a' in line)\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 8781559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a22a1e90ccb333024e7ed2f614a901aa?s=128&d=identicon&r=PG&f=1", "display_name": "Marcus S", "link": "https://stackoverflow.com/users/8781559/marcus-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1406, "favorite_count": 1, "accepted_answer_id": 49545713, "answer_count": 1, "score": 0, "last_activity_date": 1522279586, "creation_date": 1522278473, "question_id": 49545589, "link": "https://stackoverflow.com/questions/49545589/how-to-check-if-a-line-in-a-text-file-contains-a-certain-character", "title": "How to check if a line in a text file contains a certain character", "body": "<p>How do you check to see if a line contains a certain character at any point in the line of a text file? I currently have:</p>\n\n<pre><code>charCounter=0\nwith open('file', 'r') as f:\n    for line in f:\n        if 'a' in line:\n            charCounter=charCounter+1\n</code></pre>\n\n<p>However the only time the counter increments is when the character is the first character in the line. I need to check for the character if it appears in the line at any point.</p>\n"}, {"tags": ["python", "r", "anaconda", "jupyter-notebook"], "answers": [{"tags": [], "owner": {"reputation": 51, "user_id": 82786, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c37c50011af6c1e723d1c2252a1f9484?s=128&d=identicon&r=PG", "display_name": "Alex Mikhalev", "link": "https://stackoverflow.com/users/82786/alex-mikhalev"}, "is_accepted": false, "score": 0, "last_activity_date": 1524603464, "creation_date": 1524603464, "answer_id": 50010623, "question_id": 49545587, "link": "https://stackoverflow.com/questions/49545587/anaconda-library-error-with-jupyter-notebooks-for-r/50010623#50010623", "title": "Anaconda Library Error with Jupyter notebooks for R", "body": "<p>Try</p>\n\n<pre><code>conda remove zeromq\nconda install zeromq\n</code></pre>\n\n<p>worked for me.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 6096376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e7f20cf118f699cec90e3df910188cb?s=128&d=identicon&r=PG&f=1", "display_name": "Lizi Z", "link": "https://stackoverflow.com/users/6096376/lizi-z"}, "is_accepted": false, "score": 1, "last_activity_date": 1524888718, "last_edit_date": 1524888718, "creation_date": 1524867098, "answer_id": 50070919, "question_id": 49545587, "link": "https://stackoverflow.com/questions/49545587/anaconda-library-error-with-jupyter-notebooks-for-r/50070919#50070919", "title": "Anaconda Library Error with Jupyter notebooks for R", "body": "<p><a href=\"https://stackoverflow.com/users/82786/alex-mikhalev\">Alex Mikhalev</a>'s <a href=\"https://stackoverflow.com/a/50010623\">answer</a> partially worked for me. However, it also removed notebook and r-essentials.  </p>\n\n<p>Their answer was:</p>\n\n<pre><code>conda remove zeromq\nconda install zeromq\n</code></pre>\n\n<p>But, I also needed to install the following as well:</p>\n\n<pre><code>conda install notebook\nconda install r-essentials\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 44000, "user_id": 164148, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/8b9388a7e480b3eb53b992ce8683729d?s=128&d=identicon&r=PG&f=1", "display_name": "hhh", "link": "https://stackoverflow.com/users/164148/hhh"}, "is_accepted": false, "score": 0, "last_activity_date": 1546730701, "last_edit_date": 1546730701, "creation_date": 1546729690, "answer_id": 54057149, "question_id": 49545587, "link": "https://stackoverflow.com/questions/49545587/anaconda-library-error-with-jupyter-notebooks-for-r/54057149#54057149", "title": "Anaconda Library Error with Jupyter notebooks for R", "body": "<p><em>Alas! Other answers have addressed the Anaconda methods so I address the title <code>Jupyter notebooks for R?</code> more generally. Anaconda is nice but always little bit behind. There is also other option to run your Jupyter R notebooks and that is Docker.</em></p>\n\n<p><strong>Jupyter Docker Stacks</strong></p>\n\n<p>The Jupyter Docker Stacks contains Jupyter R Notebook <a href=\"https://github.com/jupyter/docker-stacks/tree/master/r-notebook\" rel=\"nofollow noreferrer\">here</a> available in Github and Docker hub. </p>\n\n<p>You could try it with </p>\n\n<pre><code>$ docker run --rm -it -p 6780:8888 -v \"$PWD\":/home/jovyan/ jupyter/r-notebook \n</code></pre>\n\n<p>as in OS X or </p>\n\n<pre><code>$ docker run --rm -it -p 6780:8888 -v \"$PWD\":/tmp jupyter/r-notebook \n</code></pre>\n\n<p>as in some other distros or as path required to be set up by your os.</p>\n\n<p><strong>You may find the following threads useful</strong></p>\n\n<ol>\n<li><p><a href=\"https://stackoverflow.com/questions/48107535/show-volume-files-in-the-gui-of-docker-jupyter-notebook\">Show volume files in the GUI of Docker Jupyter notebook</a></p></li>\n<li><p><a href=\"https://stackoverflow.com/questions/53975454/kernel-error-in-r-jupyter-notebook-due-to-anaconda\">Kernel Error in R Jupyter Notebook due to Anaconda?</a></p></li>\n</ol>\n"}], "owner": {"reputation": 311, "user_id": 1895093, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d28ea85bfe342815a982ed79421075b9?s=128&d=identicon&r=PG", "display_name": "astro person", "link": "https://stackoverflow.com/users/1895093/astro-person"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 723, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1546730701, "creation_date": 1522278466, "last_edit_date": 1546730495, "question_id": 49545587, "link": "https://stackoverflow.com/questions/49545587/anaconda-library-error-with-jupyter-notebooks-for-r", "title": "Anaconda Library Error with Jupyter notebooks for R", "body": "<p>I'm trying to write some R code in Jupyter notebooks (I use python too and would like to be able to use the same app for everything), but I'm having some problems...</p>\n\n<p>I'm on a Mac (Yosemite). I installed Anaconda 3, updated Jupyter, then installed RStudio (which includes R essentials). r-irkernel is installed (I assume also through RStudio), version 0.8.11.</p>\n\n<p>When I try to start an R notebook in Jupyter, it starts a kernel and then immediately it dies. The error given is:</p>\n\n<pre><code>Kernel started: 4275a83e-b2b6-40ef-b161-3a7b2ac57c43\nError: .onLoad failed in loadNamespace() for 'pbdZMQ', details:\n  call: dyn.load(file, DLLpath = DLLpath, ...)\n  error: unable to load shared object '/Applications/anaconda3/lib/R/library/pbdZMQ/libs/pbdZMQ.so':\n  dlopen(/Applications/anaconda3/lib/R/library/pbdZMQ/libs/pbdZMQ.so, 6): Library not loaded: @rpath/libzmq.5.dylib\n  Referenced from: /Applications/anaconda3/lib/R/library/pbdZMQ/libs/pbdZMQ.so\n  Reason: image not found\nExecution halted\n</code></pre>\n\n<p>What's the best way forwards, please? What am I missing?</p>\n\n<p>Thanks! :)</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "edited": false, "score": 1, "creation_date": 1522278603, "post_id": 49545585, "comment_id": 86098678, "body": "You ask python to cast the string <code>x</code> as integer. What do you expect there?"}, {"owner": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "edited": false, "score": 0, "creation_date": 1522278609, "post_id": 49545585, "comment_id": 86098682, "body": "...is your function supposed to subtract numbers or strings? Why are you giving it strings as input? And what&#39;s the whole &quot;subtract numbers without knowing their values&quot; thing about? How can you not know the value of a number? Are you trying to do symbolic math, like sympy?"}], "answers": [{"tags": [], "owner": {"reputation": 1551, "user_id": 806802, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/5kFde.jpg?s=128&g=1", "display_name": "Srini", "link": "https://stackoverflow.com/users/806802/srini"}, "is_accepted": false, "score": 0, "last_activity_date": 1522280842, "last_edit_date": 1522280842, "creation_date": 1522278670, "answer_id": 49545616, "question_id": 49545585, "link": "https://stackoverflow.com/questions/49545585/how-do-i-subtract-two-integers-without-knowing-their-values/49545616#49545616", "title": "How do I subtract two integers without knowing their values?", "body": "<p><code>int</code> is something used to convert something into an integer.</p>\n\n<pre><code>x = '5'\ny = int(x)\n</code></pre>\n\n<p>would result in <code>y</code> having the value <code>5</code></p>\n\n<p><code>int(x)</code> when <code>x=5</code> return <code>5</code>. However, you sent in the character <code>'x'</code> to <code>int</code>. <code>int</code> does not know how to convert that to an integer.</p>\n\n<p>This should work for you</p>\n\n<pre><code>In [3]: def subtractNumber(x, y):\n   ...:     return (int(x) - int(y))\n   ...:\n\nIn [4]: subtractNumber(5, -6)\nOut[4]: 11\n\nIn [5]: subtractNumber(5, 6)\nOut[5]: -1\n\nIn [6]: subtractNumber(-5, 6)\nOut[6]: -11\n\nIn [7]: subtractNumber(-5, -6)\nOut[7]: 1\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7975, "user_id": 5660517, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1iIxK.jpg?s=128&g=1", "display_name": "Ronan Boiteau", "link": "https://stackoverflow.com/users/5660517/ronan-boiteau"}, "is_accepted": false, "score": 0, "last_activity_date": 1522278986, "last_edit_date": 1522278986, "creation_date": 1522278682, "answer_id": 49545623, "question_id": 49545585, "link": "https://stackoverflow.com/questions/49545585/how-do-i-subtract-two-integers-without-knowing-their-values/49545623#49545623", "title": "How do I subtract two integers without knowing their values?", "body": "<p><strong>In your example, <code>'x'</code> and <code>'y'</code> are strings that don\u2019t represent a number, therefore they can\u2019t be converted using <code>int()</code>.</strong></p>\n\n<p>So you can't do that:</p>\n\n<pre><code>subtractNumber('x', 'y')\n</code></pre>\n\n<p>However, these would work:</p>\n\n<pre><code>&gt;&gt;&gt; subtractNumber(13, 7) # Regular integers\n13\n&gt;&gt;&gt; subtractNumber('13', '7') # Strings that contain digits can be converted to int\n13\n&gt;&gt;&gt; x = 13\n&gt;&gt;&gt; y = 7\n&gt;&gt;&gt; subtractNumber(x, y) # Here, x and y are variables, not strings\n13\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1936, "user_id": 9487478, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1qsdAI-3A8I/AAAAAAAAAAI/AAAAAAAAAAc/pfyjZ9jAaKg/photo.jpg?sz=128", "display_name": "Paul", "link": "https://stackoverflow.com/users/9487478/paul"}, "is_accepted": false, "score": 0, "last_activity_date": 1522278718, "creation_date": 1522278718, "answer_id": 49545631, "question_id": 49545585, "link": "https://stackoverflow.com/questions/49545585/how-do-i-subtract-two-integers-without-knowing-their-values/49545631#49545631", "title": "How do I subtract two integers without knowing their values?", "body": "<p><code>'x'</code> and <code>'y'</code> are not numbers, but strings. What number would you assume the character x and the character y to be?</p>\n\n<p>If you want to use previously assigned variables, just pass <code>x</code> and <code>y</code>:</p>\n\n<pre><code>subtractNumber(x, y)\n</code></pre>\n\n<p>If you want to use the ascii char code behind both letters use:</p>\n\n<pre><code>subtractNumber(ord('x'), ord('y'))\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 8469483, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ada82e3551a5a6c3db4e90fea1eb60a?s=128&d=identicon&r=PG&f=1", "display_name": "SunGone", "link": "https://stackoverflow.com/users/8469483/sungone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 117, "favorite_count": 0, "answer_count": 3, "score": -3, "last_activity_date": 1522280842, "creation_date": 1522278458, "question_id": 49545585, "link": "https://stackoverflow.com/questions/49545585/how-do-i-subtract-two-integers-without-knowing-their-values", "title": "How do I subtract two integers without knowing their values?", "body": "<p>So I'm doing this Python exercise and the directions are: Define a function calls subtractNumber(x, y) that takes in two numbers and returns the difference of the two numbers.</p>\n\n<p>Examples</p>\n\n<pre><code>&gt;&gt;&gt; subtractNumber(20, 7)\n13\n&gt;&gt;&gt; subtractNumber(-20, -4)\n-16\n&gt;&gt;&gt; subtractNumber(-2, -2)\n0\n</code></pre>\n\n<p>My code</p>\n\n<pre><code>def subtractNumber(x, y): \n    subtraction = int(x) - int(y)\n    return subtraction\nsubtractNumber('x','y')\n</code></pre>\n\n<p>I get the error:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"D:\\Python Exercises\\Temp_Learning\\Python Practice9.py\", line 4, in &lt;module&gt;\n    subtractNumber('x','y')\n  File \"D:\\Python Exercises\\Temp_Learning\\Python Practice9.py\", line 2, in subtractNumber\n    subtraction = int(x) - int(y)\nValueError: invalid literal for int() with base 10: 'x'\n</code></pre>\n\n<p>I still don't understand where I went wrong.  Can someone help me, please?  Thanks.</p>\n"}, {"tags": ["python", "python-2.7", "pandas", "dataframe"], "comments": [{"owner": {"reputation": 2152, "user_id": 1306026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d117a6182330066d4771187f93e7e98e?s=128&d=identicon&r=PG", "display_name": "Joshua R.", "link": "https://stackoverflow.com/users/1306026/joshua-r"}, "edited": false, "score": 0, "creation_date": 1522278543, "post_id": 49545574, "comment_id": 86098664, "body": "Sounds long.  Can you add some print statements to see where it gets hung up?  Or maybe you know already?"}, {"owner": {"reputation": 2075, "user_id": 9534390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df129537d255833e014ba2b4bcec8dd1?s=128&d=identicon&r=PG&f=1", "display_name": "pythonic833", "link": "https://stackoverflow.com/users/9534390/pythonic833"}, "edited": false, "score": 0, "creation_date": 1522278762, "post_id": 49545574, "comment_id": 86098717, "body": "If I just see that you&#39;re using <code>.iloc[0]</code> all the time and iterate over the whole frame, then I come to the conclusion that you&#39;re using pandas wrong. Though it would be easier if you just give us some data and only a few lines of code to review"}, {"owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "edited": false, "score": 0, "creation_date": 1522279336, "post_id": 49545574, "comment_id": 86098862, "body": "Anything with <code>df.iterrows</code> is likely to be unbearably slow. Try <code>df.itertuples</code> as a first attempt. If it&#39;s still too slow, and you can&#39;t find a way to vectorise via <code>pandas</code>, it may be worthwhile dropping down to <code>numpy</code>. Try also to profile your code so you know which methods / functions are expensive."}, {"owner": {"reputation": 9, "user_id": 9566776, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "MANISH SHAH", "link": "https://stackoverflow.com/users/9566776/manish-shah"}, "edited": false, "score": 0, "creation_date": 1522279989, "post_id": 49545574, "comment_id": 86099036, "body": "it is not hung up. It is still running. The program has been validated using a small data set."}, {"owner": {"reputation": 9, "user_id": 9566776, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "MANISH SHAH", "link": "https://stackoverflow.com/users/9566776/manish-shah"}, "reply_to_user": {"reputation": 2075, "user_id": 9534390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df129537d255833e014ba2b4bcec8dd1?s=128&d=identicon&r=PG&f=1", "display_name": "pythonic833", "link": "https://stackoverflow.com/users/9534390/pythonic833"}, "edited": false, "score": 0, "creation_date": 1522280113, "post_id": 49545574, "comment_id": 86099068, "body": "@pythonic833 It is the for loop that the program is executing.for index, row in df.iterrows():"}, {"owner": {"reputation": 2075, "user_id": 9534390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df129537d255833e014ba2b4bcec8dd1?s=128&d=identicon&r=PG&f=1", "display_name": "pythonic833", "link": "https://stackoverflow.com/users/9534390/pythonic833"}, "reply_to_user": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "edited": false, "score": 0, "creation_date": 1522280315, "post_id": 49545574, "comment_id": 86099128, "body": "Well, as @jpp said, you should vectorize this and please, let&#39;s concentrate on a few lines of code, so that we can see the input and the desired output. Then we will be able to show you how to vectorize this."}, {"owner": {"reputation": 9, "user_id": 9566776, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "MANISH SHAH", "link": "https://stackoverflow.com/users/9566776/manish-shah"}, "edited": false, "score": 0, "creation_date": 1522280680, "post_id": 49545574, "comment_id": 86099216, "body": "The loop extracts the date, time, latitude and longitude from the collision file and matches with the latitude, longitude, date, time from the nearest sensor in the weather file. It extracts the temp, and precipitation from the weather file and appends as columns to the collision file in a new dataframe. It writes the dataframe once 1.2M records are processed."}, {"owner": {"reputation": 9, "user_id": 9566776, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "MANISH SHAH", "link": "https://stackoverflow.com/users/9566776/manish-shah"}, "edited": false, "score": 0, "creation_date": 1522280927, "post_id": 49545574, "comment_id": 86099279, "body": "From the code, I think the following line is making it slow.  selectedWeatherRow = df2.loc[(df2.WBANNO == sensorid) &amp; (df2.LST_DATE == float(fwdate)) &amp; (df2.LST_TIME &gt;= float(fwtime)) &amp; (df2.LST_TIME &lt; ntime) ,[&#39;T_CALC&#39;, &#39;P_CALC&#39;]]"}, {"owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "edited": false, "score": 0, "creation_date": 1522280929, "post_id": 49545574, "comment_id": 86099280, "body": "Why are you converting to <code>datetime</code> and performing time additions in a loop? Look <a href=\"https://stackoverflow.com/questions/26763344/convert-pandas-column-to-datetime\">here</a> and <a href=\"https://stackoverflow.com/questions/28954093/how-to-add-subtract-time-hours-minutes-etc-from-a-pandas-dataframe-index-wh\">here</a> for relevant vectorised calculations. In fact, why do you even set <i>constants</i> in a loop?.. just do <code>df[&#39;mycol&#39;] = 5</code>."}, {"owner": {"reputation": 9, "user_id": 9566776, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "MANISH SHAH", "link": "https://stackoverflow.com/users/9566776/manish-shah"}, "edited": false, "score": 0, "creation_date": 1522281102, "post_id": 49545574, "comment_id": 86099322, "body": "The format of data time in the collision file is different from the weather file. The collision file has the format 03/11/2018,10:12 while the weather file has the format.  20120101 0400. The weather file has the data by the hour."}, {"owner": {"reputation": 9, "user_id": 9566776, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "MANISH SHAH", "link": "https://stackoverflow.com/users/9566776/manish-shah"}, "reply_to_user": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "edited": false, "score": 0, "creation_date": 1522281255, "post_id": 49545574, "comment_id": 86099362, "body": "@jpp 5 and 0 are defaults. these get overwritten if the value is found in the weather file. If not, these are used."}, {"owner": {"reputation": 9, "user_id": 9566776, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "MANISH SHAH", "link": "https://stackoverflow.com/users/9566776/manish-shah"}, "edited": false, "score": 0, "creation_date": 1522281616, "post_id": 49545574, "comment_id": 86099444, "body": "Instead of dataframes, I created a dictionary for the lookup in the weather file and this lookup is faster.  def buildWeatherDict(wlines):     weather_dict = {}     for wline_ in wlines[1:]:         line_ = wline_.split(&#39; &#39;)         sensorid_ = line_[0]         lst_date = line_[3]         lst_time = line_[4]         if not sensorid_ in weather_dict:             weather_dict[sensorid_] = {}         if not lst_date in weather_dict[sensorid_]:             weather_dict[sensorid_][lst_date] = {}         weather_dict[sensorid_][lst_date][lst_time] = line_     return weather_dict"}, {"owner": {"reputation": 9, "user_id": 9566776, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "MANISH SHAH", "link": "https://stackoverflow.com/users/9566776/manish-shah"}, "edited": false, "score": 0, "creation_date": 1522283456, "post_id": 49545574, "comment_id": 86099888, "body": "The code and data is on github.  <a href=\"https://github.com/amshah1107/NYPD_Motor_Vehicle_Collision/tree/master/Preprocessing\" rel=\"nofollow noreferrer\">github.com/amshah1107/NYPD_Motor_Vehicle_Collision/tree/mast&zwnj;&#8203;er/&hellip;</a>"}, {"owner": {"reputation": 46860, "user_id": 4333359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/231e42e97a07b2937c1bf8a313dfa3f7?s=128&d=identicon&r=PG&f=1", "display_name": "ALollz", "link": "https://stackoverflow.com/users/4333359/alollz"}, "edited": false, "score": 0, "creation_date": 1522288490, "post_id": 49545574, "comment_id": 86101073, "body": "Correct me if I&#39;m wrong, but all of those comparisons are killing you. You&#39;re doing at least 8 comparisons every loop, and if sensor IDs is large you could be doing far more. If that is the 1.2M row data frame then you&#39;re killing yourself finding where the <code>==</code> happen over and over and over. You shouldn&#39;t be checking equality on 1.2M rows close to 100x8 K times."}, {"owner": {"reputation": 46860, "user_id": 4333359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/231e42e97a07b2937c1bf8a313dfa3f7?s=128&d=identicon&r=PG&f=1", "display_name": "ALollz", "link": "https://stackoverflow.com/users/4333359/alollz"}, "edited": false, "score": 0, "creation_date": 1522288641, "post_id": 49545574, "comment_id": 86101104, "body": "It sounds like if you want to solve this, you should coarse grain your weather data into latitude and longitude blocks (like squares on a checker board) and then you should convert your lat-long data in the collisions to the same grid. Then it&#39;s a simple <code>df.merge(df2, on=[&#39;lat_bin&#39;, &#39;long_bin&#39;])</code> and it will take all of 60 seconds if that."}, {"owner": {"reputation": 9, "user_id": 9566776, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "MANISH SHAH", "link": "https://stackoverflow.com/users/9566776/manish-shah"}, "reply_to_user": {"reputation": 46860, "user_id": 4333359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/231e42e97a07b2937c1bf8a313dfa3f7?s=128&d=identicon&r=PG&f=1", "display_name": "ALollz", "link": "https://stackoverflow.com/users/4333359/alollz"}, "edited": false, "score": 0, "creation_date": 1522354885, "post_id": 49545574, "comment_id": 86136977, "body": "@ALollz I have the same comparisons in the dictionary version and it is faster. I also have the index set in the dataframe."}], "owner": {"reputation": 9, "user_id": 9566776, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "MANISH SHAH", "link": "https://stackoverflow.com/users/9566776/manish-shah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2022, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1522281522, "creation_date": 1522278404, "last_edit_date": 1522281522, "question_id": 49545574, "link": "https://stackoverflow.com/questions/49545574/is-python-pandas-dataframe-too-slow", "title": "Is python pandas dataframe too slow?", "body": "<p>I have an interesting problem. I have two files, NYPD_Motor_Collisions.csv has 1.2M lines and weatherfinal.txt has 109K lines. The objective is to merge the temp and prec data from weatherfinal.txt to the Collisions files as two columns based on the latitudes and longitudes. I wrote the following code using dataframe in pandas python. </p>\n\n<pre><code>from math import cos, asin, sqrt\nimport pandas as pd\nimport numpy as np\nimport os\nimport re\nimport datetime\n\ndef distance(lat1, lon1, lat2, lon2):\n    p = 0.017453292519943295\n    a = 0.5 - cos((lat2-lat1)*p)/2 + cos(lat1*p)*cos(lat2*p) * (1-cos((lon2-lon1)*p)) / 2\n    return 12742 * asin(sqrt(a))\n\ndef closest(data, v):\n    return min(data, key=lambda p: distance(v['lat'],v['lon'],p['lat'],p['lon']))\n\ntempDataList = []\n\n#v = {'lat': 39.7622290, 'lon': -86.1519750}\n#print(closest(tempDataList, v))\n\nprint os.getcwd()\n\nfiled_ = open(\"weatherfinal.txt\", 'r')\nfileo_ = open(\"weatherfinal_updated.txt\",\"w\")\nlines_ = filed_.readlines()\nfor line_ in lines_:\n    outline = re.sub(\"  +\",\" \",line_)\n    fileo_.write(outline + \"\\n\")\nfileo_.close()\n\ndf = pd.read_csv(\"NYPD_Motor_Vehicle_Collisions.csv\")\n\ncolhead = np.append(df.columns.values,['TEMP', 'PREP'])\n\noutdf = pd.DataFrame(columns=colhead)\n\ndf2 = pd.read_csv(\"weatherfinal_updated.txt\",' ')\ndf2.set_index(['WBANNO', 'LST_DATE', 'LST_TIME'])\n\nsensorIds = df2['WBANNO'].unique()\n\nfor ids_ in sensorIds:\n    longitude = df2.loc[df2['WBANNO']==ids_,'LONGITUDE'].iloc[0]\n    latitude = df2.loc[df2['WBANNO'] == ids_, 'LATITUDE'].iloc[0]\n    tempDataList.append({'lat':latitude,'lon':longitude,'SENSORID': ids_ })\n\nprint tempDataList\n\nfor index, row in df.iterrows():\n    lon_ = row['LONGITUDE']\n    lat_ = row['LATITUDE']\n    tdate = row['DATE']\n    ttime = row['TIME']\n    tcal = 5\n    pcal = 0\n    fwdate = datetime.datetime.strptime(str(tdate), '%m/%d/%Y').strftime('%Y%m%d')\n    fwtime = datetime.datetime.strptime(str(ttime), '%H:%M').strftime('%H%M')\n    ntime = float(fwtime) + float(100)\n    closests_ = closest(tempDataList, {'lat':lat_,'lon':lon_})\n    sensorid = closests_['SENSORID']\n    usedSensorId = sensorid\n    selectedWeatherRow = df2.loc[(df2.WBANNO == sensorid) &amp; (df2.LST_DATE == float(fwdate)) &amp; (df2.LST_TIME &gt;= float(fwtime)) &amp; (df2.LST_TIME &lt; ntime) ,['T_CALC', 'P_CALC']]\n    if len(selectedWeatherRow.index) == 0:\n        for sensId in sensorIds:\n            if sensId == sensorid:\n                continue\n            selectedWeatherRow = df2.loc[(df2.WBANNO == sensId) &amp; (df2.LST_DATE == float(fwdate)) &amp; (df2.LST_TIME &gt;= float(fwtime)) &amp; (df2.LST_TIME &lt; ntime), ['T_CALC', 'P_CALC']]\n            if len(selectedWeatherRow.index) == 0:\n                continue\n            else:\n                tcal = selectedWeatherRow['T_CALC'].values[0]\n                pcal = selectedWeatherRow['P_CALC'].values[0]\n                usedSensorId = sensId\n                break\n    else:\n        tcal = selectedWeatherRow['T_CALC'].values[0]\n        pcal = selectedWeatherRow['P_CALC'].values[0]\n    row['TEMP'] = tcal\n    row['PREP'] = pcal\n    outdf.loc[index] = row\n    print index, tcal, pcal, fwdate, fwtime, ntime, usedSensorId\n\n\nprint \"Loop completed\"\noutdf.to_csv(\"NYPD_TRAFFIC_DATA.csv\")\nprint \"file completed\"\n</code></pre>\n\n<p>This program has been running for days. Not sure why dataframe is too slow. I rewrote the program without dataframe using dictionaries and it completed in a few minutes. Not sure if dataframe is slow or I am not using it correctly. Just posting here for learning. </p>\n"}, {"tags": ["python", "tensorflow", "machine-learning", "neural-network"], "answers": [{"tags": [], "owner": {"reputation": 1295, "user_id": 9328846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a3faa5d96d89e17c614d6e1fc3f5d67?s=128&d=identicon&r=PG&f=1", "display_name": "edn", "link": "https://stackoverflow.com/users/9328846/edn"}, "is_accepted": true, "score": 1, "last_activity_date": 1522288350, "creation_date": 1522288350, "answer_id": 49546823, "question_id": 49545570, "link": "https://stackoverflow.com/questions/49545570/tensorflow-list-object-has-no-attribute-get-shape/49546823#49546823", "title": "Tensorflow &#39;list&#39; object has no attribute &#39;get_shape&#39;", "body": "<p>Solved. Below is the working version. I am not copying the entire thing to save some space.\nIn the excel file, the first column is not a feature, just a training example ID. And the last column is the label only. Stacking the features with the tf.stack(...) function solved the problem.</p>\n\n<pre><code>feature_names = ['f1','f2','f3','f4','f5']\nrecord_defaults = [[\"\"], [0.0], [0.0], [0.0], [0.0], [0.0], [0.0]]\n\n\ndef decode_csv(line):\n   parsed_line = tf.decode_csv(line, record_defaults)\n   label =  parsed_line[-1]\n   del parsed_line[-1]\n   del parsed_line[0]\n   features = tf.stack(parsed_line)    # ADDED LINE\n   d = features, label\n   return d\n\nfilenames = tf.placeholder(tf.string, shape=[None])\ndataset5 = tf.data.Dataset.from_tensor_slices(filenames)\ndataset5 = dataset5.flat_map(lambda filename: tf.data.TextLineDataset(filename).skip(1).map(decode_csv))\ndataset5 = dataset5.shuffle(buffer_size=1000)\ndataset5 = dataset5.batch(7)\niterator5 = dataset5.make_initializable_iterator()\n</code></pre>\n"}], "owner": {"reputation": 1295, "user_id": 9328846, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a3faa5d96d89e17c614d6e1fc3f5d67?s=128&d=identicon&r=PG&f=1", "display_name": "edn", "link": "https://stackoverflow.com/users/9328846/edn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5183, "favorite_count": 0, "accepted_answer_id": 49546823, "answer_count": 1, "score": 2, "last_activity_date": 1522288350, "creation_date": 1522278372, "last_edit_date": 1522283517, "question_id": 49545570, "link": "https://stackoverflow.com/questions/49545570/tensorflow-list-object-has-no-attribute-get-shape", "title": "Tensorflow &#39;list&#39; object has no attribute &#39;get_shape&#39;", "body": "<p>I am trying to read data from multiple csv files by using Tensorflow's Dataset API.</p>\n\n<p>The following version of the code works just fine:</p>\n\n<pre><code>record_defaults = [[\"\"], [0.0], [0.0], [0.0], [0.0], [0.0], [0.]]\n\ndef decode_csv(line):\n   col1, col2, col3, col4, col5, col6, col7 = tf.decode_csv(line, record_defaults)\n   features = tf.stack([col2, col3, col4, col5, col6])\n   labels = tf.stack([col7])\n   return features, labels\n\nfilenames = tf.placeholder(tf.string, shape=[None])\ndataset5 = tf.data.Dataset.from_tensor_slices(filenames)\ndataset5 = dataset5.flat_map(lambda filename: tf.data.TextLineDataset(filename).skip(1).map(decode_csv))\ndataset5 = dataset5.shuffle(buffer_size=1000)\ndataset5 = dataset5.batch(7)\niterator5 = dataset5.make_initializable_iterator()\n</code></pre>\n\n<p>But I would like to make it more dynamic because # columns ( # features) may change in different projects. But when I change the code as following, it just doesn't work. Spending some significant number of hours on the problem did not help either..</p>\n\n<pre><code>record_defaults = [[\"\"], [0.0], [0.0], [0.0], [0.0], [0.0], [0.]]\ndef decode_csv(line):\n   csv_columns = tf.decode_csv(line, record_defaults)\n   labels = csv_columns[-1]    # last column is the label\n   del csv_columns[-1]        # delete the last column\n   del csv_columns[0]       # delete the first column bcz not a feature\n   features = csv_columns\n   return features, labels\n\nfilenames = tf.placeholder(tf.string, shape=[None])\ndataset5 = tf.data.Dataset.from_tensor_slices(filenames)\ndataset5 = dataset5.flat_map(lambda filename: tf.data.TextLineDataset(filename).skip(1).map(decode_csv))\ndataset5 = dataset5.shuffle(buffer_size=1000)\ndataset5 = dataset5.batch(7)\niterator5 = dataset5.make_initializable_iterator()\n</code></pre>\n\n<p>I get the following error when I run the second version above.. Maybe a more experienced person sees the problem at once here..?</p>\n\n<pre><code>---------------------------------------------------------------------------\nAttributeError                            Traceback (most recent call last)\n&lt;ipython-input-21-92ea8cc44da0&gt; in &lt;module&gt;()\n     18 filenames = tf.placeholder(tf.string, shape=[None])\n     19 dataset5 = tf.data.Dataset.from_tensor_slices(filenames)\n---&gt; 20 dataset5 = dataset5.flat_map(lambda filename: tf.data.TextLineDataset(filename).skip(1).map(decode_csv))\n     21 dataset5 = dataset5.shuffle(buffer_size=1000)\n     22 dataset5 = dataset5.batch(7)\n\n~/.local/lib/python3.5/site-packages/tensorflow/python/data/ops/dataset_ops.py in flat_map(self, map_func)\n    799       Dataset: A `Dataset`.\n    800     \"\"\"\n--&gt; 801     return FlatMapDataset(self, map_func)\n    802 \n    803   def interleave(self, map_func, cycle_length, block_length=1):\n\n~/.local/lib/python3.5/site-packages/tensorflow/python/data/ops/dataset_ops.py in __init__(self, input_dataset, map_func)\n   1676 \n   1677     self._map_func = tf_map_func\n-&gt; 1678     self._map_func.add_to_graph(ops.get_default_graph())\n   1679 \n   1680   def _as_variant_tensor(self):\n\n~/.local/lib/python3.5/site-packages/tensorflow/python/framework/function.py in add_to_graph(self, g)\n    484   def add_to_graph(self, g):\n    485     \"\"\"Adds this function into the graph g.\"\"\"\n--&gt; 486     self._create_definition_if_needed()\n    487 \n    488     # Adds this function into 'g'.\n\n~/.local/lib/python3.5/site-packages/tensorflow/python/framework/function.py in _create_definition_if_needed(self)\n    319     \"\"\"Creates the function definition if it's not created yet.\"\"\"\n    320     with context.graph_mode():\n--&gt; 321       self._create_definition_if_needed_impl()\n    322 \n    323   def _create_definition_if_needed_impl(self):\n\n~/.local/lib/python3.5/site-packages/tensorflow/python/framework/function.py in _create_definition_if_needed_impl(self)\n    336       # Call func and gather the output tensors.\n    337       with vs.variable_scope(\"\", custom_getter=temp_graph.getvar):\n--&gt; 338         outputs = self._func(*inputs)\n    339 \n    340       # There is no way of distinguishing between a function not returning\n\n~/.local/lib/python3.5/site-packages/tensorflow/python/data/ops/dataset_ops.py in tf_map_func(*args)\n   1664         dataset = map_func(*nested_args)\n   1665       else:\n-&gt; 1666         dataset = map_func(nested_args)\n   1667 \n   1668       if not isinstance(dataset, Dataset):\n\n&lt;ipython-input-21-92ea8cc44da0&gt; in &lt;lambda&gt;(filename)\n     18 filenames = tf.placeholder(tf.string, shape=[None])\n     19 dataset5 = tf.data.Dataset.from_tensor_slices(filenames)\n---&gt; 20 dataset5 = dataset5.flat_map(lambda filename: tf.data.TextLineDataset(filename).skip(1).map(decode_csv))\n     21 dataset5 = dataset5.shuffle(buffer_size=1000)\n     22 dataset5 = dataset5.batch(7)\n\n~/.local/lib/python3.5/site-packages/tensorflow/python/data/ops/dataset_ops.py in map(self, map_func, num_parallel_calls)\n    784     \"\"\"\n    785     if num_parallel_calls is None:\n--&gt; 786       return MapDataset(self, map_func)\n    787     else:\n    788       return ParallelMapDataset(self, map_func, num_parallel_calls)\n\n~/.local/lib/python3.5/site-packages/tensorflow/python/data/ops/dataset_ops.py in __init__(self, input_dataset, map_func)\n   1587 \n   1588     self._map_func = tf_map_func\n-&gt; 1589     self._map_func.add_to_graph(ops.get_default_graph())\n   1590 \n   1591   def _as_variant_tensor(self):\n\n~/.local/lib/python3.5/site-packages/tensorflow/python/framework/function.py in add_to_graph(self, g)\n    484   def add_to_graph(self, g):\n    485     \"\"\"Adds this function into the graph g.\"\"\"\n--&gt; 486     self._create_definition_if_needed()\n    487 \n    488     # Adds this function into 'g'.\n\n~/.local/lib/python3.5/site-packages/tensorflow/python/framework/function.py in _create_definition_if_needed(self)\n    319     \"\"\"Creates the function definition if it's not created yet.\"\"\"\n    320     with context.graph_mode():\n--&gt; 321       self._create_definition_if_needed_impl()\n    322 \n    323   def _create_definition_if_needed_impl(self):\n\n~/.local/lib/python3.5/site-packages/tensorflow/python/framework/function.py in _create_definition_if_needed_impl(self)\n    336       # Call func and gather the output tensors.\n    337       with vs.variable_scope(\"\", custom_getter=temp_graph.getvar):\n--&gt; 338         outputs = self._func(*inputs)\n    339 \n    340       # There is no way of distinguishing between a function not returning\n\n~/.local/lib/python3.5/site-packages/tensorflow/python/data/ops/dataset_ops.py in tf_map_func(*args)\n   1575       self._output_classes = sparse.get_classes(ret)\n   1576       self._output_shapes = nest.pack_sequence_as(\n-&gt; 1577           ret, [t.get_shape() for t in nest.flatten(ret)])\n   1578       self._output_types = nest.pack_sequence_as(\n   1579           ret, [t.dtype for t in nest.flatten(ret)])\n\n~/.local/lib/python3.5/site-packages/tensorflow/python/data/ops/dataset_ops.py in &lt;listcomp&gt;(.0)\n   1575       self._output_classes = sparse.get_classes(ret)\n   1576       self._output_shapes = nest.pack_sequence_as(\n-&gt; 1577           ret, [t.get_shape() for t in nest.flatten(ret)])\n   1578       self._output_types = nest.pack_sequence_as(\n   1579           ret, [t.dtype for t in nest.flatten(ret)])\n\nAttributeError: 'list' object has no attribute 'get_shape'\n</code></pre>\n\n<p>ADDENDUM:</p>\n\n<p>The following works as well.</p>\n\n<pre><code>feature_names = ['f0','f1','f2','f3','f4','f5']\nrecord_defaults = [[\"\"], [0.0], [0.0], [0.0], [0.0], [0.0], [0.]]\n\ndef decode_csv(line):\n   parsed_line = tf.decode_csv(line, record_defaults) # =&gt; tensor\n   label =  parsed_line[-1]\n   del parsed_line[-1]\n   features = parsed_line\n   d = dict(zip(feature_names,features)),label\n   return d\n\nfilenames = tf.placeholder(tf.string, shape=[None])\ndataset5 = tf.data.Dataset.from_tensor_slices(filenames)\ndataset5 = dataset5.flat_map(lambda filename: tf.data.TextLineDataset(filename).skip(1).map(decode_csv))\ndataset5 = dataset5.shuffle(buffer_size=1000)\ndataset5 = dataset5.batch(7)\niterator5 = dataset5.make_initializable_iterator()\n</code></pre>\n\n<p>But now the decode_csv function is returning a dictionary of (feature_name,feature_value) pairs. Why would someone like to return a dict from this function?  Doesn't it make it very difficult to vectorize calculations like forward propagation, etc?</p>\n"}, {"tags": ["python", "logging", "flask"], "answers": [{"comments": [{"owner": {"reputation": 6662, "user_id": 754176, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/66a75feab0b925bfaa31c247d38b1298?s=128&d=identicon&r=PG", "display_name": "nanounanue", "link": "https://stackoverflow.com/users/754176/nanounanue"}, "edited": false, "score": 0, "creation_date": 1522339217, "post_id": 49546097, "comment_id": 86128845, "body": "Could you give an example of the last advice? Which method do <i>you</i> recommend?"}, {"owner": {"reputation": 6662, "user_id": 754176, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/66a75feab0b925bfaa31c247d38b1298?s=128&d=identicon&r=PG", "display_name": "nanounanue", "link": "https://stackoverflow.com/users/754176/nanounanue"}, "edited": false, "score": 0, "creation_date": 1522341050, "post_id": 49546097, "comment_id": 86129947, "body": "Actually, this first one is not working, it throws the following error: <code>RuntimeError: Working outside of application context.</code>"}, {"owner": {"reputation": 7900, "user_id": 2259934, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/lqiMo.jpg?s=128&g=1", "display_name": "Paul Becotte", "link": "https://stackoverflow.com/users/2259934/paul-becotte"}, "reply_to_user": {"reputation": 6662, "user_id": 754176, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/66a75feab0b925bfaa31c247d38b1298?s=128&d=identicon&r=PG", "display_name": "nanounanue", "link": "https://stackoverflow.com/users/754176/nanounanue"}, "edited": false, "score": 0, "creation_date": 1522341136, "post_id": 49546097, "comment_id": 86129991, "body": "Yes, you would only be able to hit the logger for current_app while actually serving requests."}, {"owner": {"reputation": 6662, "user_id": 754176, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/66a75feab0b925bfaa31c247d38b1298?s=128&d=identicon&r=PG", "display_name": "nanounanue", "link": "https://stackoverflow.com/users/754176/nanounanue"}, "edited": false, "score": 0, "creation_date": 1522341216, "post_id": 49546097, "comment_id": 86130047, "body": "Mmmmm. So the <i>only</i> way to get logging into the console is with your second  proposed approach, right? Could you point me to an example of that?"}, {"owner": {"reputation": 7900, "user_id": 2259934, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/lqiMo.jpg?s=128&g=1", "display_name": "Paul Becotte", "link": "https://stackoverflow.com/users/2259934/paul-becotte"}, "reply_to_user": {"reputation": 6662, "user_id": 754176, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/66a75feab0b925bfaa31c247d38b1298?s=128&d=identicon&r=PG", "display_name": "nanounanue", "link": "https://stackoverflow.com/users/754176/nanounanue"}, "edited": false, "score": 0, "creation_date": 1522341409, "post_id": 49546097, "comment_id": 86130182, "body": "Well, not quite- you just have to make sure you don&#39;t call that logger outside of a request (and just about everything in flask happens inside a request). Like I said though, I do prefer to use my own logging, I added an edit."}], "tags": [], "owner": {"reputation": 7900, "user_id": 2259934, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/lqiMo.jpg?s=128&g=1", "display_name": "Paul Becotte", "link": "https://stackoverflow.com/users/2259934/paul-becotte"}, "is_accepted": true, "score": 1, "last_activity_date": 1522341334, "last_edit_date": 1522341334, "creation_date": 1522282280, "answer_id": 49546097, "question_id": 49545555, "link": "https://stackoverflow.com/questions/49545555/logging-inside-a-flask-microservice/49546097#49546097", "title": "Logging inside a Flask microservice", "body": "<p>Flask uses the global app object to store this stuff. What you most likely want to do is</p>\n\n<pre><code>from flask import current_app\n\ncurrent_app.logger.debug('hi')\n</code></pre>\n\n<p>Alternatively, you could configure the default logger to log to a file the same way that flask configures <em>its</em> logger to do so using standard python logging methods.</p>\n\n<pre><code># app_logger.py\nimport logging\nimport logging.config\n\n\nlogging.config.fileConfig('logging_config.ini')\nlogger = logging.getLogger()\n</code></pre>\n\n<p>Then in other files...</p>\n\n<pre><code>#utils.py\nfrom app_logger import logger\nlogger.debug('hi')\n</code></pre>\n\n<p>This second way is how I set up logging for my flask apps, create a global \"logger\" object and import that object everywhere I want to log (allowing me to easily figure out where to change the config to do things like log to stdout or a file or whatever)</p>\n"}], "owner": {"reputation": 6662, "user_id": 754176, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/66a75feab0b925bfaa31c247d38b1298?s=128&d=identicon&r=PG", "display_name": "nanounanue", "link": "https://stackoverflow.com/users/754176/nanounanue"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 494, "favorite_count": 0, "accepted_answer_id": 49546097, "answer_count": 1, "score": 2, "last_activity_date": 1522341334, "creation_date": 1522278312, "last_edit_date": 1522281199, "question_id": 49545555, "link": "https://stackoverflow.com/questions/49545555/logging-inside-a-flask-microservice", "title": "Logging inside a Flask microservice", "body": "<p>I created a <code>Flask</code> app. All <code>Flask</code> code is inside <code>api.py</code>.  This app uses other files, for example <code>utils.py</code>. This file contains functions that will be used from the <code>api.py</code>.</p>\n\n<p>Inside <code>api.py</code> I am using <code>app.logger</code> for logging, like</p>\n\n<pre><code>app.logger.debug('HI')\n</code></pre>\n\n<p>This log is displayed in the console.</p>\n\n<p>but in <code>utils.py</code> I am using:</p>\n\n<pre><code>import logging\nlogger = logging.getLogger('utils')\n\n...\n\nlogger.debug('SOME MESSAGE')\n</code></pre>\n\n<p>But nothing is displayed in the console. </p>\n\n<p>One awful, <em>awful</em>, <strong>Awful</strong> hack that I am using now, is importing <code>app</code> from <code>api.py</code></p>\n\n<pre><code>from . import api\n\napi.app.logger.debug('SOME MESSAGE')\n</code></pre>\n\n<p>And this message is displayed in the console. But I know that I am wrongdoing here. Is there a better way?</p>\n"}, {"tags": ["python", "anaconda"], "answers": [{"tags": [], "owner": {"reputation": 2321, "user_id": 9544516, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GEe1L.jpg?s=128&g=1", "display_name": "Maarten-vd-Sande", "link": "https://stackoverflow.com/users/9544516/maarten-vd-sande"}, "is_accepted": true, "score": 1, "last_activity_date": 1522278380, "creation_date": 1522278380, "answer_id": 49545572, "question_id": 49545540, "link": "https://stackoverflow.com/questions/49545540/list-the-installed-python-development-environment-within-anaconda/49545572#49545572", "title": "list the installed python development environment within Anaconda", "body": "<p>Check the docs: <a href=\"https://conda.io/docs/user-guide/tasks/manage-environments.html\" rel=\"nofollow noreferrer\">https://conda.io/docs/user-guide/tasks/manage-environments.html</a></p>\n\n<p>try: <code>conda info --envs</code></p>\n"}, {"tags": [], "owner": {"reputation": 100, "user_id": 6253282, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c486960e114cda03318c5feb580e791?s=128&d=identicon&r=PG", "display_name": "MingiuX", "link": "https://stackoverflow.com/users/6253282/mingiux"}, "is_accepted": false, "score": 1, "last_activity_date": 1522278879, "creation_date": 1522278879, "answer_id": 49545644, "question_id": 49545540, "link": "https://stackoverflow.com/questions/49545540/list-the-installed-python-development-environment-within-anaconda/49545644#49545644", "title": "list the installed python development environment within Anaconda", "body": "<p><a href=\"https://conda.io/docs/user-guide/tasks/manage-environments.html#viewing-a-list-of-your-environments\" rel=\"nofollow noreferrer\">Here</a> is specified that you can list installed environments with 2 different commands:</p>\n\n<ol>\n<li><code>conda info --envs</code></li>\n<li><code>conda env list</code></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 701, "user_id": 7717871, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wNctL.jpg?s=128&g=1", "display_name": "edouardtheron", "link": "https://stackoverflow.com/users/7717871/edouardtheron"}, "is_accepted": false, "score": 1, "last_activity_date": 1522279778, "creation_date": 1522279778, "answer_id": 49545790, "question_id": 49545540, "link": "https://stackoverflow.com/questions/49545540/list-the-installed-python-development-environment-within-anaconda/49545790#49545790", "title": "list the installed python development environment within Anaconda", "body": "<p>The <a href=\"https://conda.io/docs/_downloads/conda-cheatsheet.pdf\" rel=\"nofollow noreferrer\">Conda Cheatsheet</a> will help you here. To simply list all of your installed Conda environments, open a terminal and type:</p>\n\n<pre><code>$ conda env list\n</code></pre>\n\n<p>As for <code>git branch</code>, the active environment (default on <code>base</code>) will be shown with a <code>*</code>.</p>\n"}], "owner": {"reputation": 10375, "user_id": 288609, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/2ea29b2ac7bd486fdd8070ac6e10f5ac?s=128&d=identicon&r=PG", "display_name": "user288609", "link": "https://stackoverflow.com/users/288609/user288609"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 49545572, "answer_count": 3, "score": -1, "last_activity_date": 1522279778, "creation_date": 1522278200, "question_id": 49545540, "link": "https://stackoverflow.com/questions/49545540/list-the-installed-python-development-environment-within-anaconda", "title": "list the installed python development environment within Anaconda", "body": "<p>I installed Anaconda pretty long time ago, but I forgot which name I used to setup the python development environment? Are there any commands that can allow me to list all the installed environments? Thanks.</p>\n"}, {"tags": ["python", "google-chrome", "selenium", "selenium-webdriver", "webdriver"], "answers": [{"tags": [], "owner": {"reputation": 116545, "user_id": 7429447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5a25589e600c8ae89717c14e51a6754b?s=128&d=identicon&r=PG&f=1", "display_name": "DebanjanB", "link": "https://stackoverflow.com/users/7429447/debanjanb"}, "is_accepted": true, "score": 0, "last_activity_date": 1522302270, "creation_date": 1522302270, "answer_id": 49548851, "question_id": 49545532, "link": "https://stackoverflow.com/questions/49545532/selenium-clicks-one-time-but-next-click-returns-staleelementreferenceexception/49548851#49548851", "title": "Selenium clicks one time, but next click returns StaleElementReferenceException", "body": "<p>The error says it all :</p>\n\n<pre><code>selenium.common.exceptions.StaleElementReferenceException: Message: stale element reference: element is not attached to the page document\n</code></pre>\n\n<p>In your program within the <code>for()</code> loop you are locating the <code>&lt;a&gt;</code> tag element with text as <strong>>></strong> on a page and invoking <code>click()</code> and due to the <code>click()</code> event the <em>HTML DOM</em> changes. When your program iterates the <code>for()</code> loop for the second time perhaps the <em>WebElement</em> identified as <code>driver.find_element_by_xpath(\"//a[contains(text(),'&gt;&gt;')]\")</code> doesn't gets loaded but <em>Selenium</em> tries to refer the search from the previous iteration which have already turned <strong>stale</strong>. Hence you see <strong>StaleElementReferenceException</strong>.</p>\n\n<h2>Solution</h2>\n\n<p>A convincing way to iterate the pages would be instead of :</p>\n\n<pre><code>driver.find_element_by_xpath(\"//a[contains(text(),'&gt;&gt;')]\").click()\n</code></pre>\n\n<p>You can induce <a href=\"https://seleniumhq.github.io/selenium/docs/api/py/webdriver_support/selenium.webdriver.support.wait.html#module-selenium.webdriver.support.wait\" rel=\"nofollow noreferrer\">WebDriverWait</a> in-conjunction with <a href=\"https://seleniumhq.github.io/selenium/docs/api/py/webdriver_support/selenium.webdriver.support.expected_conditions.html#module-selenium.webdriver.support.expected_conditions\" rel=\"nofollow noreferrer\">expected_conditions</a> clause set to <a href=\"https://seleniumhq.github.io/selenium/docs/api/py/webdriver_support/selenium.webdriver.support.expected_conditions.html#selenium.webdriver.support.expected_conditions.element_to_be_clickable\" rel=\"nofollow noreferrer\">element_to_be_clickable</a> for the <em>WebElement</em> with the particular <em>Page Number</em> (e.g. <strong>3</strong>, <strong>4</strong>, <strong>5</strong>, etc) to be <strong>clickable</strong> as follows :</p>\n\n<pre><code>WebDriverWait(self.driver, 30).until(EC.element_to_be_clickable((By.XPATH, \"//a[contains(text(),'3')]\"))).click()\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 9566508, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "leonard teng", "link": "https://stackoverflow.com/users/9566508/leonard-teng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 142, "favorite_count": 0, "accepted_answer_id": 49548851, "answer_count": 1, "score": 1, "last_activity_date": 1522302270, "creation_date": 1522278147, "last_edit_date": 1522301204, "question_id": 49545532, "link": "https://stackoverflow.com/questions/49545532/selenium-clicks-one-time-but-next-click-returns-staleelementreferenceexception", "title": "Selenium clicks one time, but next click returns StaleElementReferenceException", "body": "<pre><code>import sys\nimport urllib2\nimport time\nfrom bs4 import BeautifulSoup\nfrom selenium import webdriver\nimport string\nimport re\n\nreload(sys)\nsys.setdefaultencoding('utf8')\n\nbaseUrl = 'https://www.breastsurgeons.org/new_layout/membership/membersearch/index.php'\n\ndriver = webdriver.Chrome('/usr/local/Cellar/chromedriver/2.36/bin/chromedriver')\ndriver.get(baseUrl)\ntime.sleep(20)\n\nfor p in range(1,282):\n\n    driver.find_element_by_xpath(\"//a[contains(text(),'&gt;&gt;')]\").click()\n    time.sleep(2)\n\ndriver.quit()\n</code></pre>\n\n<p>After opening the baseUrl, I manually click agree and then search for a list of physicians to show up. I want to flip through the listing. Right now Selenium only clicks the first time by finding \">>\". After which it stops and gives following error.</p>\n\n<pre><code>   driver.find_element_by_xpath(\"//a[contains(text(),'&gt;&gt;')]\").click()\n\n\n  File \"/Library/Python/2.7/site-packages/selenium-3.11.0-py2.7.egg/selenium/webdriver/remote/webelement.py\", line 80, in click\n\n\n    self._execute(Command.CLICK_ELEMENT)\n\n\n  File \"/Library/Python/2.7/site-packages/selenium-3.11.0-py2.7.egg/selenium/webdriver/remote/webelement.py\", line 628, in _execute\n\n\n    return self._parent.execute(command, params)\n\n\n  File \"/Library/Python/2.7/site-packages/selenium-3.11.0-py2.7.egg/selenium/webdriver/remote/webdriver.py\", line 312, in execute\n\n\n    self.error_handler.check_response(response)\n\n\n  File \"/Library/Python/2.7/site-packages/selenium-3.11.0-py2.7.egg/selenium/webdriver/remote/errorhandler.py\", line 242, in check_response\n\n\n    raise exception_class(message, screen, stacktrace)\n\n\nselenium.common.exceptions.StaleElementReferenceException: Message: stale element reference: element is not attached to the page document\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "machine-learning", "dataset"], "comments": [{"owner": {"reputation": 588, "user_id": 5424594, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce513ad19316d19e3690f1abcef2554b?s=128&d=identicon&r=PG&f=1", "display_name": "czr", "link": "https://stackoverflow.com/users/5424594/czr"}, "edited": false, "score": 0, "creation_date": 1522278255, "post_id": 49545502, "comment_id": 86098590, "body": "How do you want to split the file? Random splits?"}, {"owner": {"reputation": 588, "user_id": 5424594, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce513ad19316d19e3690f1abcef2554b?s=128&d=identicon&r=PG&f=1", "display_name": "czr", "link": "https://stackoverflow.com/users/5424594/czr"}, "edited": false, "score": 0, "creation_date": 1522278442, "post_id": 49545502, "comment_id": 86098640, "body": "Also, you do not need to close the file when using with."}, {"owner": {"reputation": 83, "user_id": 6509734, "user_type": "registered", "profile_image": "https://graph.facebook.com/564309597074802/picture?type=large", "display_name": "Amir", "link": "https://stackoverflow.com/users/6509734/amir"}, "reply_to_user": {"reputation": 588, "user_id": 5424594, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce513ad19316d19e3690f1abcef2554b?s=128&d=identicon&r=PG&f=1", "display_name": "czr", "link": "https://stackoverflow.com/users/5424594/czr"}, "edited": false, "score": 0, "creation_date": 1522279720, "post_id": 49545502, "comment_id": 86098970, "body": "Thanks for your answer. no, not randomly. As you can see in the screenshot of my dataset, they are 6 columns that separated by a tab and includes 10milion of rows. I want to split these rows into 3 separate parts, which the first 3333333.333 rows are my dataset1 and then the second 3333333.333 rows are the dataset2 and the rest is the dataset3. so 3 different text files that the order of components(columns) were not changed."}, {"owner": {"reputation": 1238, "user_id": 3049987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13670c6d7f471fa532baca3e9de8b9d6?s=128&d=identicon&r=PG&f=1", "display_name": "Tim Woocker", "link": "https://stackoverflow.com/users/3049987/tim-woocker"}, "edited": false, "score": 0, "creation_date": 1522282736, "post_id": 49545502, "comment_id": 86099721, "body": "And don&#39;t forget to indent the lines after the <code>with...</code>"}, {"owner": {"reputation": 83, "user_id": 6509734, "user_type": "registered", "profile_image": "https://graph.facebook.com/564309597074802/picture?type=large", "display_name": "Amir", "link": "https://stackoverflow.com/users/6509734/amir"}, "edited": false, "score": 0, "creation_date": 1522425215, "post_id": 49545502, "comment_id": 86162460, "body": "Please see the edited question and compare the screenshot of data1 with the screenshot of the original dataset."}], "answers": [{"comments": [{"owner": {"reputation": 83, "user_id": 6509734, "user_type": "registered", "profile_image": "https://graph.facebook.com/564309597074802/picture?type=large", "display_name": "Amir", "link": "https://stackoverflow.com/users/6509734/amir"}, "edited": false, "score": 0, "creation_date": 1522278360, "post_id": 49545528, "comment_id": 86098614, "body": "thanks for your prompt answer. I corrected it but when I execute the print code, I get this error: &quot;NameError: name &#39;data&#39; is not defined&quot;"}, {"owner": {"reputation": 1238, "user_id": 3049987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13670c6d7f471fa532baca3e9de8b9d6?s=128&d=identicon&r=PG&f=1", "display_name": "Tim Woocker", "link": "https://stackoverflow.com/users/3049987/tim-woocker"}, "reply_to_user": {"reputation": 83, "user_id": 6509734, "user_type": "registered", "profile_image": "https://graph.facebook.com/564309597074802/picture?type=large", "display_name": "Amir", "link": "https://stackoverflow.com/users/6509734/amir"}, "edited": false, "score": 0, "creation_date": 1522278616, "post_id": 49545528, "comment_id": 86098684, "body": "Did you change anything else in your code? <code>data</code> should exist inside the <code>with</code> block."}, {"owner": {"reputation": 83, "user_id": 6509734, "user_type": "registered", "profile_image": "https://graph.facebook.com/564309597074802/picture?type=large", "display_name": "Amir", "link": "https://stackoverflow.com/users/6509734/amir"}, "edited": false, "score": 0, "creation_date": 1522280917, "post_id": 49545528, "comment_id": 86099277, "body": "after splitting, they will be my train and test datasets. I should apply the discrete Bayesian rule, Entropy, decision rule, quantization ... on that. So these rows won&#39;t be a string and I should find the probability of each number in each column. but the first step is dividing them into 3 separate datasets that I have used python for that. if windows can do it easier than Python please let me know."}, {"owner": {"reputation": 1238, "user_id": 3049987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13670c6d7f471fa532baca3e9de8b9d6?s=128&d=identicon&r=PG&f=1", "display_name": "Tim Woocker", "link": "https://stackoverflow.com/users/3049987/tim-woocker"}, "reply_to_user": {"reputation": 83, "user_id": 6509734, "user_type": "registered", "profile_image": "https://graph.facebook.com/564309597074802/picture?type=large", "display_name": "Amir", "link": "https://stackoverflow.com/users/6509734/amir"}, "edited": false, "score": 0, "creation_date": 1522281294, "post_id": 49545528, "comment_id": 86099371, "body": "I edited the answer. If you want to turn the lists back into strings now, you can just call <code>&quot;\\n&quot;.join(data1)</code>. This will create a string with &quot;\\n&quot; between every entry from the list."}, {"owner": {"reputation": 1238, "user_id": 3049987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13670c6d7f471fa532baca3e9de8b9d6?s=128&d=identicon&r=PG&f=1", "display_name": "Tim Woocker", "link": "https://stackoverflow.com/users/3049987/tim-woocker"}, "reply_to_user": {"reputation": 83, "user_id": 6509734, "user_type": "registered", "profile_image": "https://graph.facebook.com/564309597074802/picture?type=large", "display_name": "Amir", "link": "https://stackoverflow.com/users/6509734/amir"}, "edited": false, "score": 0, "creation_date": 1522282242, "post_id": 49545528, "comment_id": 86099603, "body": "before slicing <code>lines</code> you need to define it with <code>lines = data.split(&quot;\\n&quot;)</code>"}, {"owner": {"reputation": 83, "user_id": 6509734, "user_type": "registered", "profile_image": "https://graph.facebook.com/564309597074802/picture?type=large", "display_name": "Amir", "link": "https://stackoverflow.com/users/6509734/amir"}, "edited": false, "score": 0, "creation_date": 1522425180, "post_id": 49545528, "comment_id": 86162446, "body": "Please see the edited question and compare the screenshot of data1 with the screenshot of the original dataset."}, {"owner": {"reputation": 1238, "user_id": 3049987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13670c6d7f471fa532baca3e9de8b9d6?s=128&d=identicon&r=PG&f=1", "display_name": "Tim Woocker", "link": "https://stackoverflow.com/users/3049987/tim-woocker"}, "reply_to_user": {"reputation": 83, "user_id": 6509734, "user_type": "registered", "profile_image": "https://graph.facebook.com/564309597074802/picture?type=large", "display_name": "Amir", "link": "https://stackoverflow.com/users/6509734/amir"}, "edited": false, "score": 0, "creation_date": 1522430481, "post_id": 49545528, "comment_id": 86164855, "body": "That shouldn&#39;t be a problem: \\t is not always the same size. It&#39;s every 4 characters. And 3.40 is equal to 3.4"}], "tags": [], "owner": {"reputation": 1238, "user_id": 3049987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13670c6d7f471fa532baca3e9de8b9d6?s=128&d=identicon&r=PG&f=1", "display_name": "Tim Woocker", "link": "https://stackoverflow.com/users/3049987/tim-woocker"}, "is_accepted": false, "score": 2, "last_activity_date": 1522282278, "last_edit_date": 1522282278, "creation_date": 1522278134, "answer_id": 49545528, "question_id": 49545502, "link": "https://stackoverflow.com/questions/49545502/how-to-split-a-huge-text-dataset-in-python/49545528#49545528", "title": "How to split a huge text dataset in python?", "body": "<p>Print needs normal brackets -> ()\nChange your code to:</p>\n\n<pre><code>print(data.read())\n</code></pre>\n\n<p>If you are handling the data as a string (which you are in this example), you should first just split it at every new line with <code>data.split(\"\\n\")</code>. This will return a list with every line.</p>\n\n<p>EDIT:\nNow you can slice that list to get 3 separate lists:</p>\n\n<pre><code>data1 = lines[0:1/3*len(lines)]\ndata2 = lines[1/3*len(lines):2/3*len(lines)]\ndata3 = lines[2/3*len(lines):len(lines)]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 83, "user_id": 6509734, "user_type": "registered", "profile_image": "https://graph.facebook.com/564309597074802/picture?type=large", "display_name": "Amir", "link": "https://stackoverflow.com/users/6509734/amir"}, "edited": false, "score": 0, "creation_date": 1522299631, "post_id": 49546686, "comment_id": 86103878, "body": "great explanation.it runs untill &quot;no_attrs = len(f[0])&quot;. when i run this line, then I get this error:&quot;TypeError: &#39;_io.TextIOWrapper&#39; object is not subscriptable&quot;"}, {"owner": {"reputation": 83, "user_id": 6509734, "user_type": "registered", "profile_image": "https://graph.facebook.com/564309597074802/picture?type=large", "display_name": "Amir", "link": "https://stackoverflow.com/users/6509734/amir"}, "edited": false, "score": 0, "creation_date": 1522301979, "post_id": 49546686, "comment_id": 86104703, "body": "ok. I removed that line and all other lines perfectly run. now, data1 should include the first 1/3 of all 10milion rows, data2 include the second 1/3 and data3 include the rest of rows. how can I write data1,data2,data3? 3 different text files in the same directory."}, {"owner": {"reputation": 121, "user_id": 9476826, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ulR67.jpg?s=128&g=1", "display_name": "Haril Satra", "link": "https://stackoverflow.com/users/9476826/haril-satra"}, "reply_to_user": {"reputation": 83, "user_id": 6509734, "user_type": "registered", "profile_image": "https://graph.facebook.com/564309597074802/picture?type=large", "display_name": "Amir", "link": "https://stackoverflow.com/users/6509734/amir"}, "edited": false, "score": 0, "creation_date": 1522304400, "post_id": 49546686, "comment_id": 86105635, "body": "There are multiple ways to do that. One way is to use the numpy package and convert the multidimensional list into a 2D numpy array and then simply use numpy.savetxt(filename, 2D numpy array) for each of the file. One other way I have shown in the code that I have edited."}, {"owner": {"reputation": 83, "user_id": 6509734, "user_type": "registered", "profile_image": "https://graph.facebook.com/564309597074802/picture?type=large", "display_name": "Amir", "link": "https://stackoverflow.com/users/6509734/amir"}, "edited": false, "score": 0, "creation_date": 1522349031, "post_id": 49546686, "comment_id": 86134174, "body": "the 3 text files are created but they are empty, also I got this error: ValueError: could not convert string to float: &#39; 0.65258 0.52520 0.95356 0.14795 0.36442 1\\n&#39;"}, {"owner": {"reputation": 121, "user_id": 9476826, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ulR67.jpg?s=128&g=1", "display_name": "Haril Satra", "link": "https://stackoverflow.com/users/9476826/haril-satra"}, "reply_to_user": {"reputation": 83, "user_id": 6509734, "user_type": "registered", "profile_image": "https://graph.facebook.com/564309597074802/picture?type=large", "display_name": "Amir", "link": "https://stackoverflow.com/users/6509734/amir"}, "edited": false, "score": 0, "creation_date": 1522366579, "post_id": 49546686, "comment_id": 86141285, "body": "I changed how I was reading the file a bit. I am not specifying any parameter for splitting. I tried it on a simple example and it is working fine now. Take a look at the edited code."}, {"owner": {"reputation": 83, "user_id": 6509734, "user_type": "registered", "profile_image": "https://graph.facebook.com/564309597074802/picture?type=large", "display_name": "Amir", "link": "https://stackoverflow.com/users/6509734/amir"}, "edited": false, "score": 0, "creation_date": 1522377649, "post_id": 49546686, "comment_id": 86143803, "body": "Thank you so much. you perfectly Solved this problem. I voted your answer as the best solution for this problem."}, {"owner": {"reputation": 83, "user_id": 6509734, "user_type": "registered", "profile_image": "https://graph.facebook.com/564309597074802/picture?type=large", "display_name": "Amir", "link": "https://stackoverflow.com/users/6509734/amir"}, "edited": false, "score": 0, "creation_date": 1522425131, "post_id": 49546686, "comment_id": 86162432, "body": "Please see the edited question and compare the screenshot of data1 with the screenshot of the original dataset."}], "tags": [], "owner": {"reputation": 121, "user_id": 9476826, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ulR67.jpg?s=128&g=1", "display_name": "Haril Satra", "link": "https://stackoverflow.com/users/9476826/haril-satra"}, "is_accepted": true, "score": 1, "last_activity_date": 1522366514, "last_edit_date": 1522366514, "creation_date": 1522287257, "answer_id": 49546686, "question_id": 49545502, "link": "https://stackoverflow.com/questions/49545502/how-to-split-a-huge-text-dataset-in-python/49546686#49546686", "title": "How to split a huge text dataset in python?", "body": "<p>So the approach would be as follows:</p>\n\n<ol>\n<li><p>Open the file </p></li>\n<li><p>While reading the file line by line split each line using the split() method. Also while splitting also convert the string obtained into float.</p></li>\n<li><p>Now you have the whole file as a multidimensional array of the type float.</p></li>\n<li><p>Obtain the number of samples(rows).</p></li>\n<li><p>Using slicing store rows from 0 to rows/3 in the first data, rows/3 to rows*2/3 in data2 and the remaining rows in data3.</p></li>\n</ol>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>f = open ( 'input.txt' , 'r')\r\nl = [ map(float,line.strip().split()) for line in f ]\r\n\r\nno_samples = len(l)\r\n\r\ndata1 = l[0:int(no_samples/3)][:]\r\n\r\ndata2 = l[int(no_samples/3):int(no_samples*2/3)][:]\r\n\r\ndata3 = l[int(no_samples*2/3):no_samples][:]\r\n\r\n//Write a multidimensional list to a file\r\nfile = open('data1.txt','w')\r\nfor row in data1: \r\n    file.writelines([\"%s\\t\" % item for item in row]) \r\n    file.writelines(\"\\n\") \r\nfile.close() </code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 83, "user_id": 6509734, "user_type": "registered", "profile_image": "https://graph.facebook.com/564309597074802/picture?type=large", "display_name": "Amir", "link": "https://stackoverflow.com/users/6509734/amir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1687, "favorite_count": 1, "accepted_answer_id": 49546686, "answer_count": 2, "score": 0, "last_activity_date": 1522424566, "creation_date": 1522277971, "last_edit_date": 1522424566, "question_id": 49545502, "link": "https://stackoverflow.com/questions/49545502/how-to-split-a-huge-text-dataset-in-python", "title": "How to split a huge text dataset in python?", "body": "<p>the first part of my Machine learning project is splitting the huge dataset into 3 parts, and then use them as training data sets and test data set. this dataset includes 10milion rows like the following:</p>\n\n<p><a href=\"https://i.stack.imgur.com/UQWLy.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UQWLy.png\" alt=\"enter image description here\"></a></p>\n\n<p>The above picture is the screenshot of my dataset. I don't want to change the order of columns or rows, so the random doesn't work here. As you can see, they are 6 columns that separated by a tab and includes 10milion of rows. I want to split these rows into 3 separate parts, which the first 3333333.333 rows are my dataset1 and then the second 3333333.333 rows are the dataset2 and the rest is the dataset3. so 3 different text files that the order of components(columns) were not changed.\n I am using Spyder3 and I wrote the following codes by your help:</p>\n\n<pre><code>f = open ( 'pr_data.txt' , 'r')  \"\"\"Reading File\"\"\"\n\nl = [ map(float,line.strip().split()) for line in f ]\n\nno_samples = len(l)\n\ndata1 = l[0:int(no_samples/3)][:]\n\ndata2 = l[int(no_samples/3):int(no_samples*2/3)][:]\n\ndata3 = l[int(no_samples*2/3):no_samples][:]\n\nfile = open('data1.txt','w')\nfor row in data1: \n    file.writelines([\"%s\\t\" % item for item in row]) \n    file.writelines(\"\\n\") \nfile.close()\n\nfile = open('data2.txt','w')\nfor row in data2: \n    file.writelines([\"%s\\t\" % item for item in row]) \n    file.writelines(\"\\n\") \nfile.close()\n\nfile = open('data3.txt','w')\nfor row in data3: \n    file.writelines([\"%s\\t\" % item for item in row]) \n    file.writelines(\"\\n\") \nfile.close()\n</code></pre>\n\n<p>by the above code, the 3 text file is created in the same directory, but the problem is: the precision of numbers is changed. for example, 0's and 1's are changed to 0.0 and 1.0. Also, some of them are not in the same column. Please see the screenshot of the first rows of data1, in the following:\n<a href=\"https://i.stack.imgur.com/spvOq.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/spvOq.png\" alt=\"enter image description here\"></a></p>\n\n<p>Please let me know how correct my code?</p>\n"}, {"tags": ["python", "json", "loops", "python-2.x"], "comments": [{"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 3, "creation_date": 1522277908, "post_id": 49545472, "comment_id": 86098495, "body": "<a href=\"http://www.json.org/\" rel=\"nofollow noreferrer\">JSON objects</a> are unordered. So are Python <code>dict</code>s (they&#39;re ordered in newer CPython and PyPy, with some caveats, but that&#39;s obviously not relevant to you). So it makes perfect sense to parse JSON objects into Python dicts with arbitrary ordering."}, {"owner": {"reputation": 1188, "user_id": 4514236, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-ychAiduF2Y8/AAAAAAAAAAI/AAAAAAAAABM/LUFe9_quxVs/photo.jpg?sz=128", "display_name": "Peter Dolan", "link": "https://stackoverflow.com/users/4514236/peter-dolan"}, "edited": false, "score": 1, "creation_date": 1522277980, "post_id": 49545472, "comment_id": 86098513, "body": "Check out top answer <a href=\"https://stackoverflow.com/questions/30152688/json-dumps-messes-up-order\">here</a> Sneha"}, {"owner": {"reputation": 531, "user_id": 7933418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eec40b228d90adc86ec949347733d2e1?s=128&d=identicon&r=PG&f=1", "display_name": "iprof0214", "link": "https://stackoverflow.com/users/7933418/iprof0214"}, "edited": false, "score": 0, "creation_date": 1522278100, "post_id": 49545472, "comment_id": 86098539, "body": "Thanks Aran and Peter, will check them out and see if that helps."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1522278126, "post_id": 49545472, "comment_id": 86098546, "body": "I&#39;m not sure which question this is a dup of, because I&#39;m not sure whether the OP (a) didn&#39;t know that JSON is defined as unordered, (b) does know that but wanted to get the in-file order anyway (for debugging purposes, or to work around a bug in some other code that assumes order, whatever) but didn&#39;t know that dicts are unordered, or (c) knows both and wanted to know how to use <code>OrderedDict</code> instead."}, {"owner": {"reputation": 531, "user_id": 7933418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eec40b228d90adc86ec949347733d2e1?s=128&d=identicon&r=PG&f=1", "display_name": "iprof0214", "link": "https://stackoverflow.com/users/7933418/iprof0214"}, "edited": false, "score": 0, "creation_date": 1522348020, "post_id": 49545472, "comment_id": 86133660, "body": "Use of OrderedDict worked, thanks All."}], "owner": {"reputation": 531, "user_id": 7933418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eec40b228d90adc86ec949347733d2e1?s=128&d=identicon&r=PG&f=1", "display_name": "iprof0214", "link": "https://stackoverflow.com/users/7933418/iprof0214"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 183, "favorite_count": 0, "closed_date": 1522278228, "answer_count": 0, "score": 0, "last_activity_date": 1522278447, "creation_date": 1522277788, "last_edit_date": 1522278447, "question_id": 49545472, "link": "https://stackoverflow.com/questions/49545472/looping-over-a-json-object-is-not-ordered", "closed_reason": "Duplicate", "title": "looping over a json object is not ordered", "body": "<p>I have a json file which I'm reading as a json object and looping over the object. The json object is a list of dictionaries, which has the following structure.</p>\n\n<pre><code>[{\n    \"ACT\": \"235\",\n    \"Unit\": \"ABG\",\n    \"Center\": \"West\",\n    \"web\": \"160\",\n    \"Env\": \"QA\",\n    \"Ret\": \"30\",\n    \"Int\": \"2\",\n    \"All\": \"BU\",\n    \"SRV\": \"Std\",\n    \"Type\": \"none\"\n}, {\n    \"ACT\": \"178\",\n    \"Unit\": \"GHu\",\n    \"Center\": \"West\",\n    \"web\": \"198\",\n    \"Env\": \"PE\",\n    \"Ret\": \"30\",\n    \"Int\": \"3\",\n    \"All\": \"BU\",\n    \"SRV\": \"Std\",\n    \"Type\": \"none\"\n}, {\n    \"ACT\": \"167\",\n    \"Unit\": \"orp\",\n    \"Center\": \"East\",\n    \"web\": \"190\",\n    \"Env\": \"PD\",\n    \"Ret\": \"30\",\n    \"Int\": \"1\",\n    \"All\": \"BU\",\n    \"SRV\": \"Std\",\n    \"Type\": \"none\"\n}]\n</code></pre>\n\n<p>Following is my code to loop over the json object</p>\n\n<pre><code>import json\nimport sys\n\nref_data = json.load(open('roche_test.json'))\n\njson_len = len(ref_data)\n\ni = 0\nj = 0\n\nfor i in range(0,json_len):\n    for j in range (0,len(ref_data[i])):\n        print ref_data[i].values()[j]\n</code></pre>\n\n<p>It's looping through all dictionaries in order, however the looping over each dictionary is jumbled.</p>\n\n<p>Eg : <code>print ref_data[0].values()[3]</code> will output 2\n     and <code>print ref_data[0].keys()[3]</code> will output Int\nwhereas it should have been outputing 160 and web. </p>\n\n<p>Any inputs on why this might be happening?</p>\n"}, {"tags": ["python", "matplotlib", "jupyter-notebook", "seaborn"], "answers": [{"tags": [], "owner": {"reputation": 19039, "user_id": 5851928, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a108205f3620cbf490cb5e6ecd20ebb2?s=128&d=identicon&r=PG&f=1", "display_name": "DavidG", "link": "https://stackoverflow.com/users/5851928/davidg"}, "is_accepted": false, "score": 2, "last_activity_date": 1522278666, "last_edit_date": 1522278666, "creation_date": 1522278332, "answer_id": 49545557, "question_id": 49545409, "link": "https://stackoverflow.com/questions/49545409/dotted-seaborn-distplot/49545557#49545557", "title": "Dotted Seaborn distplot", "body": "<p>You can get a list of the Line2D objects from the axes returned by the seaborn distplot using <code>ax.lines</code>. Then, loop through these objects using <a href=\"https://matplotlib.org/api/_as_gen/matplotlib.lines.Line2D.html#matplotlib.lines.Line2D.set_linestyle\" rel=\"nofollow noreferrer\"><code>set_linesytle</code></a> in order to set the desired linestyle.</p>\n\n<p>For example:</p>\n\n<pre><code>import seaborn as sns\n\nx = np.random.randn(100)\nax = sns.distplot(x, hist=False)\n\n[line.set_linestyle(\"--\") for line in ax.lines] \n\nplt.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/1g666.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1g666.png\" alt=\"enter image description here\"></a></p>\n"}, {"comments": [{"owner": {"reputation": 7251, "user_id": 2441506, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6c40ce248e1f42380d3dbc1afc02c38b?s=128&d=identicon&r=PG", "display_name": "ShikharDua", "link": "https://stackoverflow.com/users/2441506/shikhardua"}, "edited": false, "score": 0, "creation_date": 1522280752, "post_id": 49545876, "comment_id": 86099238, "body": "Yes, I have 7.1. Due to restrictions, I can&#39;t upgrade but thanks for the pointer"}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "reply_to_user": {"reputation": 7251, "user_id": 2441506, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6c40ce248e1f42380d3dbc1afc02c38b?s=128&d=identicon&r=PG", "display_name": "ShikharDua", "link": "https://stackoverflow.com/users/2441506/shikhardua"}, "edited": false, "score": 0, "creation_date": 1522280831, "post_id": 49545876, "comment_id": 86099259, "body": "Seaborn does not have any restrictions. It&#39;s pure python. You can install it with pip or download it from GitHub."}], "tags": [], "owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "is_accepted": false, "score": 5, "last_activity_date": 1522280496, "creation_date": 1522280496, "answer_id": 49545876, "question_id": 49545409, "link": "https://stackoverflow.com/questions/49545409/dotted-seaborn-distplot/49545876#49545876", "title": "Dotted Seaborn distplot", "body": "<p>The second approach using <code>kde_kws={'linestyle':'--'}</code> works fine with seaborn 8.1. Maybe you want to update.</p>\n\n<pre><code>import seaborn as sns\nimport matplotlib.pyplot as plt\nimport numpy as np\n\nx_list = [np.random.rayleigh(1+i/2., size=35) for i in range(4)]\n\nfor x in x_list:\n    sns.distplot(x, hist=False, kde_kws={'linestyle':'--'})\n\nplt.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/cZY2t.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/cZY2t.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 7251, "user_id": 2441506, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6c40ce248e1f42380d3dbc1afc02c38b?s=128&d=identicon&r=PG", "display_name": "ShikharDua", "link": "https://stackoverflow.com/users/2441506/shikhardua"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3981, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1522280496, "creation_date": 1522277452, "last_edit_date": 1522277555, "question_id": 49545409, "link": "https://stackoverflow.com/questions/49545409/dotted-seaborn-distplot", "title": "Dotted Seaborn distplot", "body": "<p>I have a seaborn displot which looks like this\n<a href=\"https://i.stack.imgur.com/UsLpS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UsLpS.png\" alt=\"enter image description here\"></a></p>\n\n<p>I want to make some lines as dotted. How can I achieve this ?\nI tried to use linestyle in 2 different ways and got error</p>\n\n<pre><code>#### approach 1\nfor x, m in x_list:\n    sns.distplot(x, hist=False, label=m, linestyle='--')\n#### approach 2\nfor x, m in x_list:\n    sns.distplot(x, hist=False, label=m, kde_kws={'linestyle':'--'})\n\nTypeError: distplot() got an unexpected keyword argument 'linestyle'\n</code></pre>\n"}, {"tags": ["python", "anaconda", "conda"], "comments": [{"owner": {"reputation": 1431, "user_id": 1208218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e465869337e8036537778d0f817c11f?s=128&d=identicon&r=PG", "display_name": "Roel Van de Paar", "link": "https://stackoverflow.com/users/1208218/roel-van-de-paar"}, "edited": false, "score": 0, "creation_date": 1578470943, "post_id": 49545358, "comment_id": 105444779, "body": "See <a href=\"https://datascience.stackexchange.com/a/66084/88005\">datascience.stackexchange.com/a/66084/88005</a>"}], "answers": [{"tags": [], "owner": {"reputation": 3918, "user_id": 2127762, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b74aa9e2460dfa98ce627c27ee0f4a20?s=128&d=identicon&r=PG", "display_name": "kalefranz", "link": "https://stackoverflow.com/users/2127762/kalefranz"}, "is_accepted": true, "score": 10, "last_activity_date": 1522334974, "creation_date": 1522334974, "answer_id": 49559115, "question_id": 49545358, "link": "https://stackoverflow.com/questions/49545358/how-do-i-repair-conda-after-a-system-crash/49559115#49559115", "title": "How do I repair conda after a system crash?", "body": "<p>You can try <code>conda clean --all</code>, but I'm not sure that will quite get it.  You can also remove the package cache wholesale (i.e. <code>rm -rf /Users/evar/anaconda/pkgs</code>), but that is extreme, and you'll end up with potentially wasted disk space in the future.</p>\n\n<p>Best solution, right now, is to remove any offending packages in the package cache manually.  That is, scan through the list of errors, and find the offending packages.</p>\n\n<pre><code>rm -rf /Users/evar/anaconda/pkgs/html5lib-1.0.1-py35h2f9c1c0_0* \\\n       /Users/evar/anaconda/pkgs/pyqt-5.6.0-py35hbd126f6_6*\n</code></pre>\n"}], "owner": {"reputation": 1598, "user_id": 1410221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/CW5Pu.jpg?s=128&g=1", "display_name": "HappyFace", "link": "https://stackoverflow.com/users/1410221/happyface"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5769, "favorite_count": 2, "accepted_answer_id": 49559115, "answer_count": 1, "score": 4, "last_activity_date": 1522334974, "creation_date": 1522277185, "last_edit_date": 1522283734, "question_id": 49545358, "link": "https://stackoverflow.com/questions/49545358/how-do-i-repair-conda-after-a-system-crash", "title": "How do I repair conda after a system crash?", "body": "<p>I was running this command <code>conda install -c xonsh/channel/dev xonsh</code> when I got a blue screen (black on my macOS :D).\nNow running it results in this output:</p>\n\n<pre><code>Solving environment: done\n\n## Package Plan ##\n\n  environment location: /Users/evar/anaconda\n\n  added / updated specs:\n    - xonsh\n\n\nThe following NEW packages will be INSTALLED:\n\n    more-itertools:                     4.1.0-py35_0\n    setproctitle:                       1.1.9-py35_0               xonsh/channel/dev\n    xonsh:                              0.4.4.dev0-py35_gaa8b735   xonsh/channel/dev\n\nThe following packages will be UPDATED:\n\n    _license:                           1.1-py36_1                                   --&gt; 1.1-py35_1\n    alabaster:                          0.7.10-py36h174008c_0                        --&gt; 0.7.10-py35hb692fe1_0\n    anaconda-client:                    1.6.11-py36_0                                --&gt; 1.6.14-py35_0\n    anaconda-navigator:                 1.7.0-py36_0                                 --&gt; 1.8.2-py35_0\n    anaconda-project:                   0.8.2-py36h9ee5d53_0                         --&gt; 0.8.2-py35ha24014a_0\n    appnope:                            0.1.0-py36hf537a9a_0                         --&gt; 0.1.0-py35hd172556_0\n    appscript:                          1.0.1-py36h9e71e49_1                         --&gt; 1.0.1-py35hdfff33c_1\n    asn1crypto:                         0.24.0-py36_0                                --&gt; 0.24.0-py35_0\n    astroid:                            1.6.1-py36_0                                 --&gt; 1.6.2-py35_0\n    astropy:                            3.0-py36h917ab60_1                           --&gt; 3.0.1-py35h917ab60_1\n    attrs:                              17.4.0-py36_0                                --&gt; 17.4.0-py35_0\n    babel:                              2.5.3-py36_0                                 --&gt; 2.5.3-py35_0\n    backports:                          1.0-py36ha3c1827_1                           --&gt; 1.0-py35h2556c16_1\n    backports.shutil_get_terminal_size: 1.0.0-py36hd7a2ee4_2                         --&gt; 1.0.0-py35h40fcb1f_2\n    beautifulsoup4:                     4.6.0-py36h72d3c9f_1                         --&gt; 4.6.0-py35hb75f182_1\n    bitarray:                           0.8.1-py36h1de35cc_1                         --&gt; 0.8.1-py35h1de35cc_1\n    blaze:                              0.11.3-py36h02e7a37_0                        --&gt; 0.11.3-py35h385aa17_0\n    bleach:                             2.1.3-py36_0                                 --&gt; 2.1.3-py35_0\n    bokeh:                              0.12.14-py36_0                               --&gt; 0.12.14-py35_0\n    boto:                               2.48.0-py36hdbc59ac_1                        --&gt; 2.48.0-py35h10f7326_1\n    bottleneck:                         1.2.1-py36hbd380ad_0                         --&gt; 1.2.1-py35h969083f_0\n    certifi:                            2018.1.18-py36_0                             --&gt; 2018.1.18-py35_0\n    cffi:                               1.11.5-py36h342bebf_0                        --&gt; 1.11.5-py35h342bebf_0\n    chardet:                            3.0.4-py36h96c241c_1                         --&gt; 3.0.4-py35h16a84c2_1\n    click:                              6.7-py36hec950be_0                           --&gt; 6.7-py35hcc65ea6_0\n    cloudpickle:                        0.5.2-py36_1                                 --&gt; 0.5.2-py35_1\n    clyent:                             1.2.2-py36hae3ad88_0                         --&gt; 1.2.2-py35h63ae3d7_0\n    colorama:                           0.3.9-py36hd29a30c_0                         --&gt; 0.3.9-py35h1d66b2b_0\n    conda:                              4.4.11-py36_0                                --&gt; 4.5.0-py35_0\n    contextlib2:                        0.5.5-py36hd66e5e7_0                         --&gt; 0.5.5-py35hc2c67b4_0\n    cryptography:                       2.1.4-py36h842514c_0                         --&gt; 2.2.1-py35h1de35cc_0\n    cycler:                             0.10.0-py36hfc81398_0                        --&gt; 0.10.0-py35hb89929e_0\n    cython:                             0.27.3-py36h6ecb376_0                        --&gt; 0.28.1-py35h1de35cc_0\n    cytoolz:                            0.9.0.1-py36h1de35cc_0                       --&gt; 0.9.0.1-py35h1de35cc_0\n    dask:                               0.17.1-py36_0                                --&gt; 0.17.2-py35_0\n    dask-core:                          0.17.1-py36_0                                --&gt; 0.17.2-py35_0\n    datashape:                          0.5.4-py36hfb22df8_0                         --&gt; 0.5.4-py35hd065018_0\n    decorator:                          4.2.1-py36_0                                 --&gt; 4.2.1-py35_0\n    distributed:                        1.21.2-py36_0                                --&gt; 1.21.4-py35_0\n    docutils:                           0.14-py36hbfde631_0                          --&gt; 0.14-py35hb13dbd9_0\n    entrypoints:                        0.2.3-py36hd81d71f_2                         --&gt; 0.2.3-py35h837ec6f_2\n    et_xmlfile:                         1.0.1-py36h1315bdc_0                         --&gt; 1.0.1-py35h40eb147_0\n    fastcache:                          1.0.2-py36h1de35cc_2                         --&gt; 1.0.2-py35h1de35cc_2\n    flask:                              0.12.2-py36h5658096_0                        --&gt; 0.12.2-py35h7284a24_0\n    flask-cors:                         3.0.3-py36h7387b97_0                         --&gt; 3.0.3-py35h7e589ad_0\n    gevent:                             1.2.2-py36ha70b9d6_0                         --&gt; 1.2.2-py35h8412070_0\n    gmpy2:                              2.0.8-py36hf9c35bd_2                         --&gt; 2.0.8-py35h212fb8a_2\n    greenlet:                           0.4.13-py36h1de35cc_0                        --&gt; 0.4.13-py35h1de35cc_0\n    h5py:                               2.7.1-py36h39cdac5_0                         --&gt; 2.7.1-py35he1c7800_0\n    heapdict:                           1.0.0-py36_2                                 --&gt; 1.0.0-py35_2\n    html5lib:                           1.0.1-py36h2f9c1c0_0                         --&gt; 1.0.1-py35h2f9c1c0_0\n    idna:                               2.6-py36h8628d0a_1                           --&gt; 2.6-py35h01aacb0_1\n    imageio:                            2.2.0-py36h5e01289_0                         --&gt; 2.3.0-py35_0\n    imagesize:                          1.0.0-py36_0                                 --&gt; 1.0.0-py35_0\n    ipykernel:                          4.8.2-py36_0                                 --&gt; 4.8.2-py35_0\n    ipython:                            6.2.1-py36h3dda519_1                         --&gt; 6.2.1-py35h9470683_1\n    ipython_genutils:                   0.2.0-py36h241746c_0                         --&gt; 0.2.0-py35hf129286_0\n    ipywidgets:                         7.1.2-py36_0                                 --&gt; 7.1.2-py35_0\n    isort:                              4.3.4-py36_0                                 --&gt; 4.3.4-py35_0\n    itsdangerous:                       0.24-py36h49fbb8d_1                          --&gt; 0.24-py35hfbd69cd_1\n    jdcal:                              1.3-py36h1986823_0                           --&gt; 1.3-py35h9028778_0\n    jedi:                               0.11.1-py36_0                                --&gt; 0.11.1-py35_1\n    jinja2:                             2.10-py36hd36f9c5_0                          --&gt; 2.10-py35h6ff70ae_0\n    jsonschema:                         2.6.0-py36hb385e00_0                         --&gt; 2.6.0-py35h2dd9e4b_0\n    jupyter:                            1.0.0-py36_4                                 --&gt; 1.0.0-py35_4\n    jupyter_client:                     5.2.2-py36_0                                 --&gt; 5.2.3-py35_0\n    jupyter_console:                    5.2.0-py36hccf5b1c_1                         --&gt; 5.2.0-py35hd2aa692_1\n    jupyter_core:                       4.4.0-py36h79cf704_0                         --&gt; 4.4.0-py35h4ad9194_0\n    kiwisolver:                         1.0.1-py36h792292d_0                         --&gt; 1.0.1-py35h219a9d8_0\n    lazy-object-proxy:                  1.3.1-py36h2fbbe47_0                         --&gt; 1.3.1-py35h7293e74_0\n    llvmlite:                           0.22.0-py36h35728e8_0                        --&gt; 0.22.0-py35h4df07f0_0\n    locket:                             0.2.0-py36hca03003_1                         --&gt; 0.2.0-py35h58cf053_1\n    lxml:                               4.1.1-py36hef8c89e_1                         --&gt; 4.2.1-py35h7166777_0\n    markupsafe:                         1.0-py36h3a1e703_1                           --&gt; 1.0-py35h9ba0a7f_1\n    matplotlib:                         2.2.0-py36hfa7797c_0                         --&gt; 2.2.2-py35ha7267d0_0\n    mccabe:                             0.6.1-py36hdaeb55d_0                         --&gt; 0.6.1-py35h3f6a9a1_0\n    mistune:                            0.8.3-py36_0                                 --&gt; 0.8.3-py35_0\n    mkl-service:                        1.1.2-py36h7ea6df4_4                         --&gt; 1.1.2-py35h6a6947a_4\n    mpmath:                             1.0.0-py36hf1b8295_2                         --&gt; 1.0.0-py35he743aed_2\n    msgpack-python:                     0.5.5-py36h04f5b5a_0                         --&gt; 0.5.6-py35h04f5b5a_0\n    multipledispatch:                   0.5.0-py36_0                                 --&gt; 0.5.0-py35_0\n    navigator-updater:                  0.1.0-py36h7aee5fb_0                         --&gt; 0.1.0-py35hd04e0bf_0\n    nbconvert:                          5.3.1-py36h810822e_0                         --&gt; 5.3.1-py35h63fb950_0\n    nbformat:                           4.4.0-py36h827af21_0                         --&gt; 4.4.0-py35h41c2038_0\n    networkx:                           2.1-py36_0                                   --&gt; 2.1-py35_0\n    nltk:                               3.2.5-py36h1190bce_0                         --&gt; 3.2.5-py35h87b897b_0\n    nose:                               1.3.7-py36h73fae2b_2                         --&gt; 1.3.7-py35h9ce1e3a_2\n    notebook:                           5.4.0-py36_0                                 --&gt; 5.4.1-py35_0\n    numba:                              0.37.0-np114py36h210bcc1_0                   --&gt; 0.37.0-np114py35hc1fb402_0\n    numexpr:                            2.6.4-py36habcfcfe_0                         --&gt; 2.6.4-py35hcf51bc4_0\n    numpy:                              1.14.1-py36ha726252_2                        --&gt; 1.14.2-py35ha9ae307_0\n    numpydoc:                           0.7.0-py36he54d08e_0                         --&gt; 0.7.0-py35h296b98c_0\n    odo:                                0.5.1-py36hc1af34a_0                         --&gt; 0.5.1-py35h7f7a387_0\n    olefile:                            0.45.1-py36_0                                --&gt; 0.45.1-py35_0\n    openpyxl:                           2.5.0-py36_0                                 --&gt; 2.5.1-py35_0\n    openssl:                            1.0.2n-hdbc3d79_0                            --&gt; 1.0.2o-h26aff7b_0\n    packaging:                          17.1-py36_0                                  --&gt; 17.1-py35_0\n    pandas:                             0.22.0-py36h0a44026_0                        --&gt; 0.22.0-py35h0a44026_0\n    pandocfilters:                      1.4.2-py36h3b0b094_1                         --&gt; 1.4.2-py35hff87490_1\n    parso:                              0.1.1-py36hc90e01c_0                         --&gt; 0.1.1-py35hbda7c10_0\n    partd:                              0.3.8-py36hf5c4cb8_0                         --&gt; 0.3.8-py35h6fadee7_0\n    path.py:                            11.0-py36_0                                  --&gt; 11.0-py35_0\n    pathlib2:                           2.3.0-py36h877a6d8_0                         --&gt; 2.3.0-py35hba2ddec_0\n    patsy:                              0.5.0-py36_0                                 --&gt; 0.5.0-py35_0\n    pep8:                               1.7.1-py36_0                                 --&gt; 1.7.1-py35_0\n    pexpect:                            4.4.0-py36_0                                 --&gt; 4.4.0-py35_0\n    pickleshare:                        0.7.4-py36hf512f8e_0                         --&gt; 0.7.4-py35h9517181_0\n    pillow:                             5.0.0-py36hfcce615_0                         --&gt; 5.0.0-py35hfcce615_0\n    pip:                                9.0.1-py36_5                                 --&gt; 9.0.1-py35_5\n    pluggy:                             0.6.0-py36hb1d0581_0                         --&gt; 0.6.0-py35hf57b818_0\n    ply:                                3.11-py36_0                                  --&gt; 3.11-py35_0\n    prompt_toolkit:                     1.0.15-py36haeda067_0                        --&gt; 1.0.15-py35h93950c5_0\n    psutil:                             5.4.3-py36h1de35cc_0                         --&gt; 5.4.3-py35h1de35cc_0\n    ptyprocess:                         0.5.2-py36he6521c3_0                         --&gt; 0.5.2-py35hfc37984_0\n    py:                                 1.5.2-py36ha69170d_0                         --&gt; 1.5.3-py35_0\n    pycodestyle:                        2.3.1-py36h83e8646_0                         --&gt; 2.3.1-py35he0976b1_0\n    pycosat:                            0.6.3-py36hee92d8f_0                         --&gt; 0.6.3-py35h745f8c1_0\n    pycparser:                          2.18-py36h724b2fc_1                          --&gt; 2.18-py35hab820b0_1\n    pycrypto:                           2.6.1-py36h1de35cc_7                         --&gt; 2.6.1-py35h1de35cc_7\n    pycurl:                             7.43.0.1-py36hdbc3d79_0                      --&gt; 7.43.0.1-py35hdbc3d79_0\n    pyflakes:                           1.6.0-py36hea45e83_0                         --&gt; 1.6.0-py35hc517269_0\n    pygments:                           2.2.0-py36h240cd3f_0                         --&gt; 2.2.0-py35h392a662_0\n    pylint:                             1.8.2-py36_0                                 --&gt; 1.8.3-py35_0\n    pyodbc:                             4.0.22-py36h0a44026_0                        --&gt; 4.0.22-py35h0a44026_0\n    pyopenssl:                          17.5.0-py36h51e4350_0                        --&gt; 17.5.0-py35h4065cf8_0\n    pyparsing:                          2.2.0-py36hb281f35_0                         --&gt; 2.2.0-py35h31fab04_0\n    pyqt:                               5.6.0-py36he5c6137_6                         --&gt; 5.6.0-py35hbd126f6_6\n    pysocks:                            1.6.8-py36_0                                 --&gt; 1.6.8-py35_0\n    pytables:                           3.4.2-py36hfbd7ab0_2                         --&gt; 3.4.2-py35hda701c8_2\n    pytest:                             3.4.2-py36_0                                 --&gt; 3.5.0-py35_0\n    pytest-arraydiff:                   0.2-py36_0                                   --&gt; 0.2-py35_0\n    pytest-astropy:                     0.2.1-py36_0                                 --&gt; 0.2.1-py35_0\n    pytest-doctestplus:                 0.1.2-py36_0                                 --&gt; 0.1.2-py35_0\n    pytest-openfiles:                   0.2.0-py36_0                                 --&gt; 0.2.0-py35_0\n    pytest-remotedata:                  0.2.0-py36_0                                 --&gt; 0.2.0-py35_0\n    python-dateutil:                    2.6.1-py36h86d2abb_1                         --&gt; 2.7.2-py35_0\n    python.app:                         2-py36h54569d5_7                             --&gt; 2-py35he4d1c94_7\n    pytz:                               2018.3-py36_0                                --&gt; 2018.3-py35_0\n    pywavelets:                         0.5.2-py36h2710a04_0                         --&gt; 0.5.2-py35h9dc8fb8_0\n    pyyaml:                             3.12-py36h2ba1e63_1                          --&gt; 3.12-py35hf8cec8a_1\n    pyzmq:                              17.0.0-py36h1de35cc_0                        --&gt; 17.0.0-py35h1de35cc_0\n    qtawesome:                          0.4.4-py36h468c6fb_0                         --&gt; 0.4.4-py35h21e61ad_0\n    qtconsole:                          4.3.1-py36hd96c0ff_0                         --&gt; 4.3.1-py35hd6d667b_0\n    qtpy:                               1.3.1-py36h16bb863_0                         --&gt; 1.4.0-py35_0\n    requests:                           2.18.4-py36h4516966_1                        --&gt; 2.18.4-py35h0d65e6b_1\n    rope:                               0.10.7-py36h68959ac_0                        --&gt; 0.10.7-py35h27868a4_0\n    ruamel_yaml:                        0.15.35-py36h1de35cc_1                       --&gt; 0.15.35-py35h1de35cc_1\n    scikit-image:                       0.13.1-py36h1de35cc_1                        --&gt; 0.13.1-py35h1de35cc_1\n    scikit-learn:                       0.19.1-py36hffbff8c_0                        --&gt; 0.19.1-py35h2b554eb_0\n    scipy:                              1.0.0-py36h1de22e9_0                         --&gt; 1.0.0-py35h8b35106_0\n    seaborn:                            0.8.1-py36h595ecd9_0                         --&gt; 0.8.1-py35he0bbe96_0\n    send2trash:                         1.5.0-py36_0                                 --&gt; 1.5.0-py35_0\n    setuptools:                         38.5.1-py36_0                                --&gt; 38.5.1-py35_0\n    simplegeneric:                      0.8.1-py36_2                                 --&gt; 0.8.1-py35_2\n    singledispatch:                     3.4.0.3-py36hf20db9d_0                       --&gt; 3.4.0.3-py35h0acf360_0\n    sip:                                4.18.1-py36h2824476_2                        --&gt; 4.18.1-py35h79e1f92_2\n    six:                                1.11.0-py36h0e22d5e_1                        --&gt; 1.11.0-py35h39a4c60_1\n    snowballstemmer:                    1.2.1-py36h6c7b616_0                         --&gt; 1.2.1-py35hbb7be01_0\n    sortedcollections:                  0.5.3-py36he9c3ed6_0                         --&gt; 0.6.1-py35_0\n    sortedcontainers:                   1.5.9-py36_0                                 --&gt; 1.5.9-py35_0\n    sphinx:                             1.7.1-py36_0                                 --&gt; 1.7.2-py35_0\n    sphinxcontrib:                      1.0-py36h9364dc8_1                           --&gt; 1.0-py35h3eabf46_1\n    sphinxcontrib-websupport:           1.0.1-py36h92f4a7a_1                         --&gt; 1.0.1-py35hcb4ca16_1\n    spyder:                             3.2.7-py36_0                                 --&gt; 3.2.8-py35_0\n    sqlalchemy:                         1.2.4-py36h1de35cc_0                         --&gt; 1.2.5-py35h1de35cc_0\n    statsmodels:                        0.8.0-py36h9c68fc9_0                         --&gt; 0.8.0-py35ha7c9052_0\n    sympy:                              1.1.1-py36h7f3cf04_0                         --&gt; 1.1.1-py35he478fab_0\n    tblib:                              1.3.2-py36hda67792_0                         --&gt; 1.3.2-py35h1b9c5fd_0\n    terminado:                          0.8.1-py36_1                                 --&gt; 0.8.1-py35_1\n    testpath:                           0.3.1-py36h625a49b_0                         --&gt; 0.3.1-py35hf8009f4_0\n    toolz:                              0.9.0-py36_0                                 --&gt; 0.9.0-py35_0\n    tornado:                            5.0-py36_0                                   --&gt; 5.0-py35_0\n    traitlets:                          4.3.2-py36h65bd3ce_0                         --&gt; 4.3.2-py35hd3d1486_0\n    typing:                             3.6.4-py36_0                                 --&gt; 3.6.4-py35_0\n    unicodecsv:                         0.14.1-py36he531d66_0                        --&gt; 0.14.1-py35h2154ad0_0\n    urllib3:                            1.22-py36h68b9469_0                          --&gt; 1.22-py35he002d57_0\n    webencodings:                       0.5.1-py36h3b9701d_1                         --&gt; 0.5.1-py35hcf8ebf9_1\n    werkzeug:                           0.14.1-py36_0                                --&gt; 0.14.1-py35_0\n    wheel:                              0.30.0-py36h5eb2c71_1                        --&gt; 0.30.0-py35h5c0b906_1\n    widgetsnbextension:                 3.1.4-py36_0                                 --&gt; 3.1.4-py35_0\n    wrapt:                              1.10.11-py36hc29e774_0                       --&gt; 1.10.11-py35ha18cf31_0\n    xlrd:                               1.1.0-py36h336f4a2_1                         --&gt; 1.1.0-py35h892fcf7_1\n    xlsxwriter:                         1.0.2-py36h3736301_0                         --&gt; 1.0.2-py35h4d68a89_0\n    xlwings:                            0.11.7-py36_0                                --&gt; 0.11.7-py35_0\n    xlwt:                               1.2.0-py36h5ad1178_0                         --&gt; 1.2.0-py35hf70d7fa_0\n    zict:                               0.1.3-py36h71da714_0                         --&gt; 0.1.3-py35h1ae85d2_0\n\nThe following packages will be DOWNGRADED:\n\n    anaconda:                           custom-py36ha4fed55_0                        --&gt; custom-py35hd7b5ba2_0\n    python:                             3.6.4-hc167b69_1                             --&gt; 3.5.5-hc167b69_1\n    wcwidth:                            0.1.7-py36h8c6ec74_0                         --&gt; 0.1.5-py35_5               xonsh/channel/dev\n\nProceed ([y]/n)? y\n\nPreparing transaction: done\nVerifying transaction: failed\n\nSafetyError: The package for html5lib located at /Users/evar/anaconda/pkgs/html5lib-1.0.1-py35h2f9c1c0_0\nappears to be corrupted. The path 'lib/python3.5/site-packages/html5lib/__pycache__/_tokenizer.cpython-35.pyc'\nhas a sha256 mismatch.\n  reported sha256: 95475d9a871d7e07cb2b8af6d985068c5a1ceb9d593e5c21e42fa8019c7c14c0\n  actual sha256: e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855\n\nCondaVerificationError: The package for html5lib located at /Users/evar/anaconda/pkgs/html5lib-1.0.1-py35h2f9c1c0_0\nappears to be corrupted. The path 'lib/python3.5/site-packages/html5lib/__pycache__/constants.cpython-35.pyc'\nspecified in the package manifest cannot be found.\n\nCondaVerificationError: The package for html5lib located at /Users/evar/anaconda/pkgs/html5lib-1.0.1-py35h2f9c1c0_0\nappears to be corrupted. The path 'lib/python3.5/site-packages/html5lib/__pycache__/html5parser.cpython-35.pyc'\nspecified in the package manifest cannot be found.\n\nCondaVerificationError: The package for html5lib located at /Users/evar/anaconda/pkgs/html5lib-1.0.1-py35h2f9c1c0_0\nappears to be corrupted. The path 'lib/python3.5/site-packages/html5lib/_tokenizer.py'\nspecified in the package manifest cannot be found.\n\nCondaVerificationError: The package for html5lib located at /Users/evar/anaconda/pkgs/html5lib-1.0.1-py35h2f9c1c0_0\nappears to be corrupted. The path 'lib/python3.5/site-packages/html5lib/constants.py'\nspecified in the package manifest cannot be found.\n\nCondaVerificationError: The package for html5lib located at /Users/evar/anaconda/pkgs/html5lib-1.0.1-py35h2f9c1c0_0\nappears to be corrupted. The path 'lib/python3.5/site-packages/html5lib/filters/__init__.py'\nspecified in the package manifest cannot be found.\n\nCondaVerificationError: The package for html5lib located at /Users/evar/anaconda/pkgs/html5lib-1.0.1-py35h2f9c1c0_0\nappears to be corrupted. The path 'lib/python3.5/site-packages/html5lib/html5parser.py'\nspecified in the package manifest cannot be found.\n\nCondaVerificationError: The package for pyqt located at /Users/evar/anaconda/pkgs/pyqt-5.6.0-py35hbd126f6_6\nappears to be corrupted. The path 'bin/pylupdate5'\nspecified in the package manifest cannot be found.\n\nCondaVerificationError: The package for pyqt located at /Users/evar/anaconda/pkgs/pyqt-5.6.0-py35hbd126f6_6\nappears to be corrupted. The path 'lib/python3.5/site-packages/PyQt5/QtBluetooth.so'\nspecified in the package manifest cannot be found.\n\nCondaVerificationError: The package for pyqt located at /Users/evar/anaconda/pkgs/pyqt-5.6.0-py35hbd126f6_6\nappears to be corrupted. The path 'lib/python3.5/site-packages/PyQt5/QtCore.pyi'\nspecified in the package manifest cannot be found.\n\nCondaVerificationError: The package for pyqt located at /Users/evar/anaconda/pkgs/pyqt-5.6.0-py35hbd126f6_6\nappears to be corrupted. The path 'lib/python3.5/site-packages/PyQt5/QtCore.so'\nspecified in the package manifest cannot be found.\n\nCondaVerificationError: The package for pyqt located at /Users/evar/anaconda/pkgs/pyqt-5.6.0-py35hbd126f6_6\nappears to be corrupted. The path 'lib/python3.5/site-packages/PyQt5/QtDesigner.so'\nspecified in the package manifest cannot be found.\n\nCondaVerificationError: The package for pyqt located at /Users/evar/anaconda/pkgs/pyqt-5.6.0-py35hbd126f6_6\nappears to be corrupted. The path 'lib/python3.5/site-packages/PyQt5/QtGui.pyi'\nspecified in the package manifest cannot be found.\n\nCondaVerificationError: The package for pyqt located at /Users/evar/anaconda/pkgs/pyqt-5.6.0-py35hbd126f6_6\nappears to be corrupted. The path 'lib/python3.5/site-packages/PyQt5/QtGui.so'\nspecified in the package manifest cannot be found.\n\nCondaVerificationError: The package for pyqt located at /Users/evar/anaconda/pkgs/pyqt-5.6.0-py35hbd126f6_6\nappears to be corrupted. The path 'lib/python3.5/site-packages/PyQt5/QtHelp.so'\nspecified in the package manifest cannot be found.\n\nCondaVerificationError: The package for pyqt located at /Users/evar/anaconda/pkgs/pyqt-5.6.0-py35hbd126f6_6\nappears to be corrupted. The path 'lib/python3.5/site-packages/PyQt5/QtMultimedia.so'\nspecified in the package manifest cannot be found.\n\nCondaVerificationError: The package for pyqt located at /Users/evar/anaconda/pkgs/pyqt-5.6.0-py35hbd126f6_6\nappears to be corrupted. The path 'lib/python3.5/site-packages/PyQt5/QtMultimediaWidgets.so'\nspecified in the package manifest cannot be found.\n\nSafetyError: The package for pyqt located at /Users/evar/anaconda/pkgs/pyqt-5.6.0-py35hbd126f6_6\nappears to be corrupted. The path 'lib/python3.5/site-packages/PyQt5/QtNetwork.pyi'\nhas a sha256 mismatch.\n  reported sha256: 6d1d0e8dab63eb82e73de1d2e7346ee0584e3796537d5c1d4c015ec22a7da356\n  actual sha256: e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855\n\nCondaVerificationError: The package for pyqt located at /Users/evar/anaconda/pkgs/pyqt-5.6.0-py35hbd126f6_6\nappears to be corrupted. The path 'lib/python3.5/site-packages/PyQt5/QtNetwork.so'\nspecified in the package manifest cannot be found.\n\nCondaVerificationError: The package for pyqt located at /Users/evar/anaconda/pkgs/pyqt-5.6.0-py35hbd126f6_6\nappears to be corrupted. The path 'lib/python3.5/site-packages/PyQt5/QtNfc.so'\nspecified in the package manifest cannot be found.\n\nCondaVerificationError: The package for pyqt located at /Users/evar/anaconda/pkgs/pyqt-5.6.0-py35hbd126f6_6\nappears to be corrupted. The path 'lib/python3.5/site-packages/PyQt5/QtOpenGL.so'\nspecified in the package manifest cannot be found.\n...\n</code></pre>\n\n<p>I looked at <a href=\"https://conda.io/docs/user-guide/troubleshooting.html#\" rel=\"nofollow noreferrer\">https://conda.io/docs/user-guide/troubleshooting.html#</a> but I didn't find anything about these errors or what to do in the case of a system crash.</p>\n"}, {"tags": ["python", "tkinter", "attributes"], "comments": [{"owner": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "edited": false, "score": 0, "creation_date": 1522277017, "post_id": 49545259, "comment_id": 86098256, "body": "Can we get a piece of code that doesn&#39;t throw 2 errors and a tkinter warning, please? In other words, an actual <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>?"}, {"owner": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "edited": false, "score": 0, "creation_date": 1522277107, "post_id": 49545259, "comment_id": 86098288, "body": "Also, what&#39;s the question? And what does <i>&quot;return the user&#39;s input&quot;</i> mean? Return it <i>where</i>?"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 9566703, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-4oYLAkHTeBQ/AAAAAAAAAAI/AAAAAAAAALE/V3tWBy4M6mo/photo.jpg?sz=128", "display_name": "ScienceLuke7", "link": "https://stackoverflow.com/users/9566703/scienceluke7"}, "edited": false, "score": 0, "creation_date": 1522366017, "post_id": 49545342, "comment_id": 86141165, "body": "Thank you is much! Now is it possible to get the result from the user as well as delete the entry?"}], "tags": [], "owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "is_accepted": true, "score": 2, "last_activity_date": 1522277087, "creation_date": 1522277087, "answer_id": 49545342, "question_id": 49545259, "link": "https://stackoverflow.com/questions/49545259/attributeerror-event-instance-has-no-attribute-delete/49545342#49545342", "title": "AttributeError: Event instance has no attribute &#39;delete&#39;", "body": "<p>You're doing this:</p>\n\n<pre><code>def entry_delete(e):\n    e.delete(0, 'end')\n</code></pre>\n\n<p><a href=\"http://effbot.org/tkinterbook/tkinter-events-and-bindings.htm\" rel=\"nofollow noreferrer\">The value that gets passed to a callback for an event binding is an <code>Event</code> object.</a> And they don't have a <code>delete</code> method.</p>\n\n<p>The fact that you also have a global variable with the same name doesn't make any difference (except to confuse you and other readers); the parameter <code>e</code> hides the global <code>e</code>.</p>\n\n<p>So, if you want to call a method on your <code>Entry</code> object, don't hide it:</p>\n\n<pre><code>def e_delete(evt):\n    e.delete(0, 'end')\n</code></pre>\n\n<p>Or, if you want to call a method on whatever widget triggered the event (which, in this case, will always be the same thing, so it's just a matter of which one makes more sense to you), you can do that instead:</p>\n\n<pre><code>def e_delete(evt):\n    evt.widget.delete(0, 'end')\n</code></pre>\n\n<p>However, it's usually even better to give <em>everything</em> clear and distinct names to avoid this kind of confusion:</p>\n\n<pre><code>entry = tk.Entry(root)\nent.pack()\nentry.bind(\"&lt;Return&gt;\", on_change)\nentry.grid(row=2, column=2)\nentry.focus()0\n\ndef entry_delete(evt):\n    entry.delete(0, 'end')\n\nentry.bind(\"&lt;Return&gt;\", entry_delete)\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 9566703, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-4oYLAkHTeBQ/AAAAAAAAAAI/AAAAAAAAALE/V3tWBy4M6mo/photo.jpg?sz=128", "display_name": "ScienceLuke7", "link": "https://stackoverflow.com/users/9566703/scienceluke7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 721, "favorite_count": 0, "accepted_answer_id": 49545342, "answer_count": 1, "score": 1, "last_activity_date": 1522278919, "creation_date": 1522276554, "last_edit_date": 1522278919, "question_id": 49545259, "link": "https://stackoverflow.com/questions/49545259/attributeerror-event-instance-has-no-attribute-delete", "title": "AttributeError: Event instance has no attribute &#39;delete&#39;", "body": "<p>I am trying to make a program that will return the user's input and also clear the <code>Entry</code> when Return/Enter is pressed. When ran, the second method (<code>def e_delete(e):</code>) always gives the error, <code>AttributeError: Event instance has no attribute 'delete'</code> and if the <code>e</code> is changed to <code>self</code> no string is returned and no error happens.</p>\n\n<pre><code>from Tkinter import *\nimport os.path\nimport PIL.Image, PIL.ImageTk\nimport Tkinter as tk\n\ndef on_change(e):\n    inp = e.widget.get()\n    print inp\n\nroot = tk.Tk()\n\n#Makes a canvas for objects\ncanvas = Canvas(root, height=100, width=400)\n#Displays the canvas\ncanvas.grid(row=3, column=2)\n\nroot.grid_columnconfigure(0, weight=1)\nroot.grid_columnconfigure(1, weight=1)\n\nlabel = Label(root, text=\"Enter an element or the atomic number from 1 to 118.\").grid(row=0, column=2)\n\ne = tk.Entry(root)\ne.pack()\ne.bind(\"&lt;Return&gt;\", on_change)\ne.grid(row=2, column=2)\ne.focus()\n\ndef e_delete(e):\n    e.delete(0, 'end')\n\ne.bind(\"&lt;Return&gt;\", e_delete)\n\n#img = create_image(0, 300, 'ptable.png')\n\nroot.mainloop()\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "csv"], "answers": [{"comments": [{"owner": {"reputation": 2625, "user_id": 9557970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6a50i.jpg?s=128&g=1", "display_name": "Aniket Bote", "link": "https://stackoverflow.com/users/9557970/aniket-bote"}, "edited": false, "score": 0, "creation_date": 1522277726, "post_id": 49545282, "comment_id": 86098446, "body": "i m getting this result:&quot;&lt;_csv.reader object at 0x000002219B5B8798&gt;&quot;"}, {"owner": {"reputation": 1238, "user_id": 3049987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13670c6d7f471fa532baca3e9de8b9d6?s=128&d=identicon&r=PG&f=1", "display_name": "Tim Woocker", "link": "https://stackoverflow.com/users/3049987/tim-woocker"}, "reply_to_user": {"reputation": 2625, "user_id": 9557970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6a50i.jpg?s=128&g=1", "display_name": "Aniket Bote", "link": "https://stackoverflow.com/users/9557970/aniket-bote"}, "edited": false, "score": 0, "creation_date": 1522277837, "post_id": 49545282, "comment_id": 86098476, "body": "That is the representation of the reader object you created. Have a look at the docs for more info on how to use that object: <a href=\"https://docs.python.org/3/library/csv.html#csv.reader\" rel=\"nofollow noreferrer\">docs.python.org/3/library/csv.html#csv.reader</a>"}], "tags": [], "owner": {"reputation": 1238, "user_id": 3049987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13670c6d7f471fa532baca3e9de8b9d6?s=128&d=identicon&r=PG&f=1", "display_name": "Tim Woocker", "link": "https://stackoverflow.com/users/3049987/tim-woocker"}, "is_accepted": false, "score": 3, "last_activity_date": 1522276677, "creation_date": 1522276677, "answer_id": 49545282, "question_id": 49545258, "link": "https://stackoverflow.com/questions/49545258/importing-csv-file-produces-an-error/49545282#49545282", "title": "Importing csv file produces an error", "body": "<p>Your own script is called \"csv.py\" so it's trying to import iteself.\nSince you do not have the attribute \"reader\" inside your own script, it's not found.</p>\n\n<p>Try renaming the script you are running and you should be fine.</p>\n"}, {"tags": [], "owner": {"reputation": 68, "user_id": 2452970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d043b375158e290470b7f0c308677eb?s=128&d=identicon&r=PG", "display_name": "jugu", "link": "https://stackoverflow.com/users/2452970/jugu"}, "is_accepted": true, "score": 1, "last_activity_date": 1522276980, "creation_date": 1522276980, "answer_id": 49545323, "question_id": 49545258, "link": "https://stackoverflow.com/questions/49545258/importing-csv-file-produces-an-error/49545323#49545323", "title": "Importing csv file produces an error", "body": "<p>You are importing your own file (csv.py). You need to rename your <code>csv.py</code> file and try again. This is duplicate of <a href=\"https://stackoverflow.com/questions/35341363/attributeerror-module-object-has-no-attribute-reader\">AttributeError: &#39;module&#39; object has no attribute &#39;reader&#39;</a></p>\n"}], "owner": {"reputation": 2625, "user_id": 9557970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6a50i.jpg?s=128&g=1", "display_name": "Aniket Bote", "link": "https://stackoverflow.com/users/9557970/aniket-bote"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "closed_date": 1522278571, "accepted_answer_id": 49545323, "answer_count": 2, "score": 0, "last_activity_date": 1522279417, "creation_date": 1522276549, "last_edit_date": 1522279417, "question_id": 49545258, "link": "https://stackoverflow.com/questions/49545258/importing-csv-file-produces-an-error", "closed_reason": "Duplicate", "title": "Importing csv file produces an error", "body": "<pre><code>import csv\n\nwith open('SalesJan2009.csv') as csvfile:\n    readcsv = csv.reader(csvfile, delimiter =',')\n    print(readcsv)\n</code></pre>\n\n<p>When I run this code I get the following error:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Traceback (most recent call last):\n  File \"D:/ANIKET/PRACTICE PROGRAMS/python projects/csv.py\", line 1, in &lt;module&gt;\n    import csv\n  File \"D:\\ANIKET\\PRACTICE PROGRAMS\\python projects\\csv.py\", line 3, in &lt;module&gt;\n    readcsv = csv.reader(csvfile, delimiter =',')\nAttributeError: module 'csv' has no attribute 'reader'\n</code></pre>\n\n<p>What should I change?</p>\n"}, {"tags": ["python", "overriding", "bonobo-etl"], "comments": [{"owner": {"reputation": 563, "user_id": 1263888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5addf5cf7036bb857a464ee5f7775ed4?s=128&d=identicon&r=PG", "display_name": "Romain", "link": "https://stackoverflow.com/users/1263888/romain"}, "edited": false, "score": 0, "creation_date": 1522309413, "post_id": 49545257, "comment_id": 86108217, "body": "The &quot;TypeError  &quot;quoting&quot; must be an integer&quot; error had been fixed in the repo a while ago but never released (see #249), please upgrade to bonobo ~=0.6.2. I&#39;ll answer on the main question a bit later."}], "answers": [{"tags": [], "owner": {"reputation": 563, "user_id": 1263888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5addf5cf7036bb857a464ee5f7775ed4?s=128&d=identicon&r=PG", "display_name": "Romain", "link": "https://stackoverflow.com/users/1263888/romain"}, "is_accepted": true, "score": 2, "last_activity_date": 1522317687, "creation_date": 1522317687, "answer_id": 49553201, "question_id": 49545257, "link": "https://stackoverflow.com/questions/49545257/bonobo-method-failed-after-overriden/49553201#49553201", "title": "bonobo method failed after overriden", "body": "<p>As of bonobo 0.6, overriding directly Method instances in subclasses is non trivial. Instead, you should provide an overriden implementation in the constructor arguments.</p>\n\n<pre><code>def writer_factory(self, file):\n    return csv.writer(file, **{**self.get_dialect_kwargs(), 'quoting': csv.QUOTE_NONNUMERIC}).writerow\n\ndef get_graph(**options):\n    graph = bonobo.Graph()\n    graph.add_chain(\n      extract,\n      bonobo.CsvWriter('...', writer_factory=writer_factory),\n\n    )\n\n    return graph\n</code></pre>\n\n<p>If you really want to subclass for this use case, you can do it by overriding <code>get_dialect_kwargs()</code> method instead:</p>\n\n<pre><code>@use_context\nclass QuoteNonNumericCsvWriter(bonobo.CsvWriter):\n    def get_dialect_kwargs(self):\n        return {\n            **super().get_dialect_kwargs(),\n            'quoting': csv.QUOTE_NONNUMERIC,\n        }\n</code></pre>\n\n<p>This should work as expected.</p>\n\n<p>Of course, overriding <code>quoting</code> is possible directly from  writer constructor as of bonobo 0.6.2, there was a bug before around this but fix is now released.</p>\n\n<pre><code>def get_graph(**options):\n    graph = bonobo.Graph()\n    graph.add_chain(\n      extract,\n      bonobo.CsvWriter('...', quoting=csv.QUOTE_NONNUMERIC),\n    )\n</code></pre>\n\n<p>All three methods have the exact same behaviour, you should favour the last one.</p>\n\n<p>Hope that helps.</p>\n"}], "owner": {"reputation": 111, "user_id": 1654661, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/v724h.png?s=128&g=1", "display_name": "Jimmy", "link": "https://stackoverflow.com/users/1654661/jimmy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "accepted_answer_id": 49553201, "answer_count": 1, "score": 1, "last_activity_date": 1529373972, "creation_date": 1522276547, "last_edit_date": 1529373972, "question_id": 49545257, "link": "https://stackoverflow.com/questions/49545257/bonobo-method-failed-after-overriden", "title": "bonobo method failed after overriden", "body": "<p>I am using a light ETL library called bonobo.\nThe  csv writer bonobo.CsvWriter class has a factory method:</p>\n\n<pre><code>def writer_factory(self, file):\n        return csv.writer(file, **self.get_dialect_kwargs()).writerow\n</code></pre>\n\n<p>with the docs:</p>\n\n<pre><code>class CsvWriter(FileWriter, CsvHandler):\n    @Method(\n        __doc__='''\n            Builds the CSV writer, a.k.a an object we can pass a field collection to be written as one line in the\n            target file.\n\n            Defaults to builtin csv.writer(...).writerow, but can be overriden to fit your special needs.\n        '''\n    )\n</code></pre>\n\n<p>I'd like to add some extra parameters to customize my csv file, so I try to override it as such:</p>\n\n<pre><code>class quoCsvWriter(bonobo.CsvWriter):    \ndef writer_factory(self, file):\n            return csv.writer(file, **self.get_dialect_kwargs(),quoting=csv.QUOTE_NONNUMERIC).writerow\n</code></pre>\n\n<p>when I add the node into the chain, the programs shows:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"geocoding.py\", line 162, in &lt;module&gt;\n    get_graph(),\n  File \"geocoding.py\", line 135, in get_graph\n    quoCsvWriter('db_addresses.csv')\n  File \"/Users/xxxx/xxxx/lib/python3.6/site-packages/bonobo/config/configurables.py\", line 152, in __new__\n    missing.remove(name)\nKeyError: 'writer_factory'\n</code></pre>\n\n<p>Any hints are appreciated.</p>\n\n<p>Update:</p>\n\n<p>meanwhile when I try to do </p>\n\n<pre><code>bonobo.CsvWriter('filename.csv',quoting=csv.QUOTE_MINIMAL)\n</code></pre>\n\n<p>it throws error:</p>\n\n<pre><code>TypeError  \"quoting\" must be an integer\n</code></pre>\n"}, {"tags": ["python", "list", "dictionary", "compare"], "comments": [{"owner": {"reputation": 6690, "user_id": 4225229, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/2YfJM.jpg?s=128&g=1", "display_name": "JacobIRR", "link": "https://stackoverflow.com/users/4225229/jacobirr"}, "edited": false, "score": 0, "creation_date": 1522276983, "post_id": 49545251, "comment_id": 86098243, "body": "this is a list with a dict inside it: <code>lis2=[{&#39;a&#39;:&#39;1&#39;,&#39;b&#39;:&#39;2&#39;}]</code>"}, {"owner": {"reputation": 11, "user_id": 9423753, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Ehsan", "link": "https://stackoverflow.com/users/9423753/ehsan"}, "reply_to_user": {"reputation": 6690, "user_id": 4225229, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/2YfJM.jpg?s=128&g=1", "display_name": "JacobIRR", "link": "https://stackoverflow.com/users/4225229/jacobirr"}, "edited": false, "score": 0, "creation_date": 1522277090, "post_id": 49545251, "comment_id": 86098280, "body": "yes, data set type is list but inside have dictionary"}], "answers": [{"tags": [], "owner": {"reputation": 1930, "user_id": 9537244, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oUrDo.png?s=128&g=1", "display_name": "ilja", "link": "https://stackoverflow.com/users/9537244/ilja"}, "is_accepted": true, "score": 1, "last_activity_date": 1522277058, "creation_date": 1522277058, "answer_id": 49545338, "question_id": 49545251, "link": "https://stackoverflow.com/questions/49545251/compare-two-list-and-making-new-list-with-missing-items/49545338#49545338", "title": "Compare two list and making new list with missing items", "body": "<p>Actually you have two dictionaries and not two lists, so </p>\n\n<pre><code>dict(set(lis1[0].items()) ^ set(lis2[0].items()))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8912, "user_id": 5904928, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/jwFz9.png?s=128&g=1", "display_name": "Aaditya Ura", "link": "https://stackoverflow.com/users/5904928/aaditya-ura"}, "is_accepted": false, "score": 0, "last_activity_date": 1522403565, "creation_date": 1522403565, "answer_id": 49572194, "question_id": 49545251, "link": "https://stackoverflow.com/questions/49545251/compare-two-list-and-making-new-list-with-missing-items/49572194#49572194", "title": "Compare two list and making new list with missing items", "body": "<p>You can try '-' too:</p>\n\n<pre><code>print(dict(set(lis1[0].items())-set(lis2[0].items())))\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>{'d': '4', 'e': '5', 'c': '3'}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 9423753, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Ehsan", "link": "https://stackoverflow.com/users/9423753/ehsan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 49545338, "answer_count": 2, "score": 0, "last_activity_date": 1522403565, "creation_date": 1522276508, "question_id": 49545251, "link": "https://stackoverflow.com/questions/49545251/compare-two-list-and-making-new-list-with-missing-items", "title": "Compare two list and making new list with missing items", "body": "<p>how can i compare the two list dataset and make a new dataset with missing value.</p>\n\n<pre><code>lis1=[{'a':'1','b':'2','c':'3','d':'4','e':'5'}]\nlis2=[{'a':'1','b':'2'}]\n</code></pre>\n\n<p>i tried the follow code</p>\n\n<pre><code>lis3=set(lis2)-set(lis1)\n</code></pre>\n\n<p>but it make this error:</p>\n\n<pre><code>TypeError: unhashable type: 'dict'\n</code></pre>\n\n<p>also i found this post and tried to use the code but it also didnt work with mine:\n<a href=\"https://stackoverflow.com/questions/41235613/compare-two-list-of-dictionaries-and-update-list-with-missing-key-value-pair\">enter link description here</a> </p>\n\n<p>i appreciate from your support</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "edited": false, "score": 0, "creation_date": 1522276456, "post_id": 49545221, "comment_id": 86098095, "body": "<code>list(map(int, &quot;2 4 6 7 8 10&quot;.split()))</code> ?"}], "answers": [{"tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": false, "score": -1, "last_activity_date": 1522276453, "creation_date": 1522276453, "answer_id": 49545243, "question_id": 49545221, "link": "https://stackoverflow.com/questions/49545221/how-would-i-turn-a-double-digit-number-within-a-string-into-a-single-int-value/49545243#49545243", "title": "How would I turn a double-digit number within a string into a single int value?", "body": "<p>Split the string into words and convert each word to <code>int</code>.</p>\n\n<pre><code>new = [int(word) for word in numbers.split()]\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 9476995, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42f38edafa0bbf59ebddddbdbb510aba?s=128&d=identicon&r=PG&f=1", "display_name": "iryan6627", "link": "https://stackoverflow.com/users/9476995/iryan6627"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 267, "favorite_count": 0, "closed_date": 1522276771, "answer_count": 1, "score": -1, "last_activity_date": 1522277444, "creation_date": 1522276339, "last_edit_date": 1522276645, "question_id": 49545221, "link": "https://stackoverflow.com/questions/49545221/how-would-i-turn-a-double-digit-number-within-a-string-into-a-single-int-value", "closed_reason": "Duplicate", "title": "How would I turn a double-digit number within a string into a single int value?", "body": "<p>I'm trying to write some code that will filter out the \"unique\" number inside a series of numbers. For example, the unique number returned would be an odd number if all other numbers provided were even. Before I can proceed, I needed to turn all the provided numbers into integer values. The problem I have is with double-digit integers; when the user provides a number such as 10, I don't know how to keep the 1 and 0 together rather than have them split up such as what my code does below. How would I fix a problem like this? Thanks for any help. <strong>Also, please refrain from solving the entire thing for me; I just need help with that specific part</strong>. Thanks again!</p>\n\n<pre><code>def iq_test(numbers):\n    isEven = []\n    isOdd = []\n    new = [int(char) for char in list(numbers.replace(\" \", \"\"))]\n\n\n    return new\nprint(iq_test(\"2 4 6 7 8 10\"))\n</code></pre>\n"}, {"tags": ["python", "function", "methods", "class-method", "instance-methods"], "comments": [{"owner": {"reputation": 19714, "user_id": 169947, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/94c9072a6b1ac6e02e735b3df640e277?s=128&d=identicon&r=PG", "display_name": "Ken Williams", "link": "https://stackoverflow.com/users/169947/ken-williams"}, "edited": false, "score": 0, "creation_date": 1522301212, "post_id": 49545214, "comment_id": 86104387, "body": "The question marked as an &quot;exact duplicate&quot; is not the same - that one is (in my terms) how to get <code>Foo(20).bar(7)</code> and <code>Foo.bar(20, 7)</code> to behave the same, mine is about <code>Foo(20).bar(7)</code> and <code>Foo.bar(7)</code>.  The distinction is important because the whole point is to keep the existing interface <code>Foo.bar(7)</code>."}, {"owner": {"reputation": 19714, "user_id": 169947, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/94c9072a6b1ac6e02e735b3df640e277?s=128&d=identicon&r=PG", "display_name": "Ken Williams", "link": "https://stackoverflow.com/users/169947/ken-williams"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1522301768, "post_id": 49545214, "comment_id": 86104610, "body": "Just realized - even though the <i>question</i> isn&#39;t the same, @user2357112&#39;s solution includes a solution to my problem as well.  I&#39;ll give it a shot when I get to work tomorrow."}], "answers": [{"comments": [{"owner": {"reputation": 19714, "user_id": 169947, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/94c9072a6b1ac6e02e735b3df640e277?s=128&d=identicon&r=PG", "display_name": "Ken Williams", "link": "https://stackoverflow.com/users/169947/ken-williams"}, "edited": false, "score": 0, "creation_date": 1522301389, "post_id": 49545275, "comment_id": 86104459, "body": "Thanks, I&#39;ll try to work with that and see if I can come up with something.  If I do, I&#39;ll post it as a new answer."}], "tags": [], "owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "is_accepted": false, "score": 1, "last_activity_date": 1522276639, "creation_date": 1522276639, "answer_id": 49545275, "question_id": 49545214, "link": "https://stackoverflow.com/questions/49545214/function-callable-as-class-method-or-instance-method/49545275#49545275", "title": "Function callable as class method or instance method", "body": "<p>The <a href=\"https://docs.python.org/3/howto/descriptor.html#static-methods-and-class-methods\" rel=\"nofollow noreferrer\">Descriptor HOWTO</a> has entire section on how <code>@classmethod</code> and <code>@staticmethod</code> work, and how to implement variations on them, including this pure-Python equivalent to <code>classmethod</code>:</p>\n\n<pre><code>class ClassMethod(object):\n    \"Emulate PyClassMethod_Type() in Objects/funcobject.c\"\n\n    def __init__(self, f):\n        self.f = f\n\n    def __get__(self, obj, klass=None):\n        if klass is None:\n            klass = type(obj)\n        def newfunc(*args):\n            return self.f(klass, *args)\n        return newfunc\n</code></pre>\n\n<p>If it isn't obvious to you how that works, you probably need to read the whole HOWTO. I've got <a href=\"http://stupidpythonideas.blogspot.com/2013/06/how-methods-work.html\" rel=\"nofollow noreferrer\">a blog post</a> that tries to provide an introduction to the method-related stuff first, which may help get over the abstraction hump of the first part of the HOWTO.</p>\n"}], "owner": {"reputation": 19714, "user_id": 169947, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/94c9072a6b1ac6e02e735b3df640e277?s=128&d=identicon&r=PG", "display_name": "Ken Williams", "link": "https://stackoverflow.com/users/169947/ken-williams"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 297, "favorite_count": 0, "closed_date": 1522276636, "answer_count": 1, "score": 0, "last_activity_date": 1522276639, "creation_date": 1522276326, "question_id": 49545214, "link": "https://stackoverflow.com/questions/49545214/function-callable-as-class-method-or-instance-method", "closed_reason": "Duplicate", "title": "Function callable as class method or instance method", "body": "<p>I have a Python class that I created previously, it looks something like this:</p>\n\n<pre><code>class Foo:\n  @classmethod\n  def bar(cls, x):\n    print(x + 3)\n\nFoo.bar(7)  # prints '10'\n</code></pre>\n\n<p>Now I would like to retrofit this interface with some state, so that the caller can create a <code>Foo</code> object, give it some properties, and then call its <code>bar()</code> method, which has access to <code>self</code> and its properties:</p>\n\n<pre><code>class Foo:\n  def __init__(self, y=3):\n    self.y = y\n  def bar(self, x):\n    print(x + self.y)\n\nFoo().bar(7)  # prints '10'\nFoo(20).bar(7)  # prints '27'\n</code></pre>\n\n<p>Unfortunately, this breaks the previous interface - <code>Foo.bar(7)</code> will now give <code>TypeError: bar() missing 1 required positional argument: 'x'</code>, because <code>Foo.bar(...)</code> is a simple function reference.</p>\n\n<p>I can add a <code>@classmethod</code> decorator to get part way there:</p>\n\n<pre><code>class Foo:\n  def __init__(self, y=3):\n    self.y = y\n  @classmethod\n  def bar(cls, x):\n    self = cls()\n    print(x + self.y)\n\nFoo.bar(7)  # prints '10'\nFoo().bar(7)  # prints '10'\nFoo(20).bar(7)  # prints '10', but I want '27'\n</code></pre>\n\n<p>Is it possible to create a <code>@flexmethod</code> decorator that converts the other direction?  Specifically - if called as an instance method like <code>Foo(20).bar(...)</code>, then do nothing; if called as a class method like <code>Foo.bar(...)</code> then create a new <code>Foo</code> object (using no-arg constructor) and pass that as the <code>self</code> argument.</p>\n\n<p>I was going to try this myself by looking at the source for <code>@classmethod</code>, but it looks like it's implemented at the C level.</p>\n"}, {"tags": ["python", "numpy", "machine-learning", "neural-network"], "comments": [{"owner": {"reputation": 2858, "user_id": 1054154, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/274a8902ebfa77671b35cc3be0948522?s=128&d=identicon&r=PG", "display_name": "tozCSS", "link": "https://stackoverflow.com/users/1054154/tozcss"}, "edited": false, "score": 1, "creation_date": 1522276250, "post_id": 49545186, "comment_id": 86098030, "body": "you can subtract 0.5 from <code>weights</code> then."}, {"owner": {"reputation": 1789, "user_id": 5626104, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d9bff58c22f757507d69a779603d3eac?s=128&d=identicon&r=PG&f=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/5626104/brian"}, "edited": false, "score": 0, "creation_date": 1522276326, "post_id": 49545186, "comment_id": 86098053, "body": "your statement makes a 2d array. I&#39;d think single input and output layer weights would each need a 1d array of weights?"}], "answers": [{"comments": [{"owner": {"reputation": 422, "user_id": 6642021, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/x5GTR.jpg?s=128&g=1", "display_name": "Howard Wang", "link": "https://stackoverflow.com/users/6642021/howard-wang"}, "edited": false, "score": 0, "creation_date": 1522276496, "post_id": 49545206, "comment_id": 86098108, "body": "Wow can&#39;t believe I didn&#39;t think of this! Thanks!"}], "tags": [], "owner": {"reputation": 2321, "user_id": 9544516, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GEe1L.jpg?s=128&g=1", "display_name": "Maarten-vd-Sande", "link": "https://stackoverflow.com/users/9544516/maarten-vd-sande"}, "is_accepted": false, "score": 2, "last_activity_date": 1522396819, "last_edit_date": 1522396819, "creation_date": 1522276249, "answer_id": 49545206, "question_id": 49545186, "link": "https://stackoverflow.com/questions/49545186/generate-random-doubles-between-a-specific-range/49545206#49545206", "title": "Generate random doubles between a specific range", "body": "<p>Just subtract 0.5 from it</p>\n\n<pre><code>weights = np.random.rand(input_size, output_size) - 0.5\n</code></pre>\n\n<p>Voila!</p>\n\n<p><strong>edit:</strong>\nTo generate numbers between any range (e.g. between 3 and 7), you can do it like this:</p>\n\n<pre><code>min = 3\nmax = 7\nweights = np.random.rand(input_size, output_size) * (max - min) + min\n</code></pre>\n\n<p>or like this</p>\n\n<pre><code>weights = np.random.uniform(min, max, (input_size, output_size))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1154, "user_id": 9565387, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-d6Y3JBWunV4/AAAAAAAAAAI/AAAAAAAAAEk/3020ZVdwdFU/photo.jpg?sz=128", "display_name": "ducminh", "link": "https://stackoverflow.com/users/9565387/ducminh"}, "is_accepted": false, "score": 1, "last_activity_date": 1522276372, "creation_date": 1522276372, "answer_id": 49545226, "question_id": 49545186, "link": "https://stackoverflow.com/questions/49545186/generate-random-doubles-between-a-specific-range/49545226#49545226", "title": "Generate random doubles between a specific range", "body": "<p>According to the <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.random.rand.html#numpy.random.rand\" rel=\"nofollow noreferrer\">documentation</a>, <code>np.random.rand</code> generates \"random samples from a uniform distribution over <code>[0, 1)</code>\". You just need to subtract 0.5 from the array:</p>\n\n<pre><code>weights = np.random.rand(input_size, output_size) - 0.5\n</code></pre>\n\n<p>You might also want to generate random samples with different distributions. Many distributions are already available: <a href=\"https://docs.scipy.org/doc/numpy/reference/routines.random.html\" rel=\"nofollow noreferrer\">documentation</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "is_accepted": false, "score": 0, "last_activity_date": 1522290955, "creation_date": 1522290955, "answer_id": 49547121, "question_id": 49545186, "link": "https://stackoverflow.com/questions/49545186/generate-random-doubles-between-a-specific-range/49547121#49547121", "title": "Generate random doubles between a specific range", "body": "<p>You can use <code>np.random.uniform</code>:</p>\n\n<pre><code>&gt;&gt;&gt; np.random.uniform(-0.5, 0.5, (2, 5))\narray([[-0.22340556, -0.23382758, -0.30258041,  0.37783351,  0.27951709],\n       [ 0.03336927,  0.41955043,  0.17132952,  0.29960474,  0.04237655]])\n</code></pre>\n"}], "owner": {"reputation": 422, "user_id": 6642021, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/x5GTR.jpg?s=128&g=1", "display_name": "Howard Wang", "link": "https://stackoverflow.com/users/6642021/howard-wang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1522396819, "creation_date": 1522276082, "question_id": 49545186, "link": "https://stackoverflow.com/questions/49545186/generate-random-doubles-between-a-specific-range", "title": "Generate random doubles between a specific range", "body": "<p>I'm trying to construct a neural network from scratch and I'm having some trouble initializing my weights matrices. I want the weights connecting the different layers to be randomly centered around 0 (ie values ranging from -0.5 to 0.5). I've tried </p>\n\n<pre><code>weights = np.random.rand(input_size, output_size) #input_size = # neurons in input layer, output_size = # neurons in output layer\n</code></pre>\n\n<p>but I think that only generates doubles between 0 and 1.</p>\n"}, {"tags": ["python", "pandas", "pandas-groupby"], "answers": [{"comments": [{"owner": {"reputation": 192, "user_id": 3866172, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/f60997da43c5a202131cfee501ff12a5?s=128&d=identicon&r=PG&f=1", "display_name": "hpca01", "link": "https://stackoverflow.com/users/3866172/hpca01"}, "edited": false, "score": 0, "creation_date": 1522342313, "post_id": 49545299, "comment_id": 86130756, "body": "what you are doing here is that your dropping the entire column. Also this does not result in a queried df, it results in a patched up index. For example if from above data, we dropped &quot;3-28-2018 19:15:.00&quot; for Santa Clara because it didn&#39;t meet the criteria then that would also get rid of Santa Teresa which meets the criteria."}], "tags": [], "owner": {"reputation": 499, "user_id": 2763831, "user_type": "registered", "profile_image": "https://graph.facebook.com/540586285/picture?type=large", "display_name": "TavoloPerUno", "link": "https://stackoverflow.com/users/2763831/tavoloperuno"}, "is_accepted": false, "score": 0, "last_activity_date": 1522276791, "creation_date": 1522276791, "answer_id": 49545299, "question_id": 49545171, "link": "https://stackoverflow.com/questions/49545171/pandas-pivot-table-filtering-based-on-criteria/49545299#49545299", "title": "Pandas Pivot Table Filtering Based on Criteria", "body": "<p>How about iterating over the columns and dropping those that do not meet the count criteria?</p>\n\n<pre><code>for col in pv.columns:\n    if not any(pv[col] &gt; 2):\n        pv.drop(col,axis=1,inplace=True)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 192, "user_id": 3866172, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/f60997da43c5a202131cfee501ff12a5?s=128&d=identicon&r=PG&f=1", "display_name": "hpca01", "link": "https://stackoverflow.com/users/3866172/hpca01"}, "is_accepted": false, "score": 0, "last_activity_date": 1522346738, "creation_date": 1522346738, "answer_id": 49562526, "question_id": 49545171, "link": "https://stackoverflow.com/questions/49545171/pandas-pivot-table-filtering-based-on-criteria/49562526#49562526", "title": "Pandas Pivot Table Filtering Based on Criteria", "body": "<p>Figured it out:</p>\n\n<pre><code>pv[pv[('Base Report')]&gt;2].dropna(axis=0,how='all')\n</code></pre>\n\n<p>you can also apply it in place or just return it...thanks though!</p>\n\n<p>Result below, note that the blanks are 0 values:</p>\n\n<pre><code>None    Base Report Base Report\nFacilityName    Santa Clara Santa Teresa\nTimeToRun       \n2018-03-29 07:00:00 4.0 \n2018-03-29 07:01:00 4.0 \n2018-03-29 07:02:00 6.0 \n2018-03-29 07:03:00 5.0 \n2018-03-29 09:05:00     3.0\n2018-03-29 09:15:00     6.0\n2018-03-29 14:45:00 3.0 \n2018-03-29 17:15:00     5.0\n2018-03-29 19:10:00     3.0\n2018-03-29 19:15:00     4.0\n</code></pre>\n"}], "owner": {"reputation": 192, "user_id": 3866172, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/f60997da43c5a202131cfee501ff12a5?s=128&d=identicon&r=PG&f=1", "display_name": "hpca01", "link": "https://stackoverflow.com/users/3866172/hpca01"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 982, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1522346738, "creation_date": 1522276018, "last_edit_date": 1522342031, "question_id": 49545171, "link": "https://stackoverflow.com/questions/49545171/pandas-pivot-table-filtering-based-on-criteria", "title": "Pandas Pivot Table Filtering Based on Criteria", "body": "<p>So I have a pivot_table, basically a multilevel df, that I want to filter by a couple of parameters.</p>\n\n<p>colum dtypes:</p>\n\n<pre><code>Report          object\nOwner           object\nDescription     object\nTimeToRun       object\nFacilityName    object\nBase Report     object\n</code></pre>\n\n<p>pd func:</p>\n\n<pre><code>pv=pd.pivot_table(test, index = ['TimeToRun'], columns = ['FacilityName'], values = ['Base Report'], aggfunc='count', fill_value=0)\n</code></pre>\n\n<p>pv.columns</p>\n\n<pre><code>MultiIndex(levels=[[u'Base Report'], [u'Roseville', u'Sacramento', u'South Sacramento']],\n       labels=[[0, 0, 0], [0, 1, 2]],\n       names=[None, u'FacName'])\n</code></pre>\n\n<p>My thing is that I want to filter the resulting df by the second level values, i want to filter it so that any values that are greater than count of 2 are indexed. So far, here is my soln, but this does not work in a dynamic situation, where the values in the second level <code>[u'Roseville', u'Sacramento', u'South Sacramento']</code> are different(length of the columns).</p>\n\n<p>Here is my query:</p>\n\n<pre><code>query = pv[(pv[pv.columns[0]]&gt;2) | (pv[pv.columns[1]]&gt;2)| (pv[pv.columns[2]]&gt;2)]\n</code></pre>\n\n<p>here is how the pivot_table looks like, rendered in excel:</p>\n\n<pre><code>    Base Report \nFacilityName        Santa Clara Santa Teresa\nTimeToRun       \n2018-03-28 07:00:00    4    0\n2018-03-28 07:01:00    4    0\n2018-03-28 07:02:00    6    0\n2018-03-28 07:03:00    5    0\n2018-03-28 09:05:00    0    3\n2018-03-28 09:15:00    0    6\n2018-03-28 14:45:00    3    0\n2018-03-28 17:15:00    0    5\n2018-03-28 19:10:00    0    3\n2018-03-28 19:15:00    0    4\n</code></pre>\n\n<p>I am convinced there is a better way, please show me how. Thank you</p>\n"}, {"tags": ["python", "selenium", "raspberry-pi", "selenium-chromedriver"], "comments": [{"owner": {"reputation": 116545, "user_id": 7429447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5a25589e600c8ae89717c14e51a6754b?s=128&d=identicon&r=PG&f=1", "display_name": "DebanjanB", "link": "https://stackoverflow.com/users/7429447/debanjanb"}, "edited": false, "score": 0, "creation_date": 1522299970, "post_id": 49545144, "comment_id": 86103997, "body": "Can you update the question with the <i>Selenium</i>, <i>ChromeDriver</i> and <i>Chrome</i> version you are using along with the complete error trace logs and the exact usecase you are looking at along with your <i>code trials</i>?"}], "answers": [{"comments": [{"owner": {"reputation": 101, "user_id": 3397514, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f7b88084e5e4b94ff3f10f729bf1146?s=128&d=identicon&r=PG", "display_name": "ven42", "link": "https://stackoverflow.com/users/3397514/ven42"}, "edited": false, "score": 0, "creation_date": 1522976873, "post_id": 49545556, "comment_id": 86379069, "body": "This answer was helpful in leading me down the right path, though I didn&#39;t find <code>webbrowser.open_new()</code> useful because it returns immediately instead of blocking while Chromium loads.  I&#39;d love to give you a +1, but I&#39;m sorry that I haven&#39;t earned enough rep yet to upvote."}], "tags": [], "owner": {"reputation": 1633, "user_id": 8791722, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/98WuV.png?s=128&g=1", "display_name": "PixelEinstein", "link": "https://stackoverflow.com/users/8791722/pixeleinstein"}, "is_accepted": false, "score": 0, "last_activity_date": 1522278329, "creation_date": 1522278329, "answer_id": 49545556, "question_id": 49545144, "link": "https://stackoverflow.com/questions/49545144/how-can-i-tell-chromedriver-to-wait-longer-for-chrome-to-launch-before-giving-up/49545556#49545556", "title": "How can I tell ChromeDriver to wait longer for Chrome to launch before giving up?", "body": "<p>You are right, there is no option to explicitly set the <code>timeout</code> of the initial driver creation. I would recommend visiting their git page <a href=\"https://github.com/SeleniumHQ/selenium/wiki/ChromeDriver\" rel=\"nofollow noreferrer\">HERE</a> and creating a new issue. It also has the links for the direct ChromeDriver site in case you want to create a bug there. Currently, there is no option to set <strong>timeout</strong> that I could find.</p>\n\n<p>You could try something like this in the meantime though:</p>\n\n<pre><code>import webbrowser\nfrom selenium import webdriver\nfrom selenium.common.exceptions import WebDriverException\n\ntry:\n    driver = webdriver.Chrome()\nexcept WebDriverException:\n    webbrowser.open_new('http://www.Google.com')\n# Let this try and get Chrome open, then go back and use webdriver\n</code></pre>\n\n<p>Here is the documentation on webbrowser:\n<a href=\"https://docs.python.org/3/library/webbrowser.html\" rel=\"nofollow noreferrer\">https://docs.python.org/3/library/webbrowser.html</a></p>\n"}, {"comments": [{"owner": {"reputation": 1633, "user_id": 8791722, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/98WuV.png?s=128&g=1", "display_name": "PixelEinstein", "link": "https://stackoverflow.com/users/8791722/pixeleinstein"}, "edited": false, "score": 0, "creation_date": 1522339919, "post_id": 49550053, "comment_id": 86129282, "body": "If it were incompatible binaries wouldn&#39;t it be consistently causing the <code>chrome not reachable</code>, I have gotten that error after updating Chrome before, but it happened every time. All they are doing is opening Chromium themselves and letting it open <b>once</b> after automatic updates, and it works. I would think that would lead to another problem since they aren&#39;t changing their versions but it works after one <b>long running</b> clean open."}, {"owner": {"reputation": 116545, "user_id": 7429447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5a25589e600c8ae89717c14e51a6754b?s=128&d=identicon&r=PG&f=1", "display_name": "DebanjanB", "link": "https://stackoverflow.com/users/7429447/debanjanb"}, "reply_to_user": {"reputation": 1633, "user_id": 8791722, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/98WuV.png?s=128&g=1", "display_name": "PixelEinstein", "link": "https://stackoverflow.com/users/8791722/pixeleinstein"}, "edited": false, "score": 0, "creation_date": 1522340288, "post_id": 49550053, "comment_id": 86129506, "body": "@PixelEinstein See OP&#39;s case and your case both have the same trigger <b>newest version of Chromium</b>. For the record <b>Chromium Project</b> clearly provides the dependency in the <b>Release Notes</b> as a heading. Deviation from the recommended configuration/settings are against all the <i>Best Practices</i>."}, {"owner": {"reputation": 1633, "user_id": 8791722, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/98WuV.png?s=128&g=1", "display_name": "PixelEinstein", "link": "https://stackoverflow.com/users/8791722/pixeleinstein"}, "edited": false, "score": 0, "creation_date": 1522341144, "post_id": 49550053, "comment_id": 86129998, "body": "I assumed they were running on current versions since they stated they were installing current versions of both Chromedriver and Chromium. It would help if we knew what version of Chromium and Selenium they were running, their chromedriver is <code>2.35</code>, which is <b>not</b> current if Chromium is auto updating. You are probably right."}, {"owner": {"reputation": 116545, "user_id": 7429447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5a25589e600c8ae89717c14e51a6754b?s=128&d=identicon&r=PG&f=1", "display_name": "DebanjanB", "link": "https://stackoverflow.com/users/7429447/debanjanb"}, "reply_to_user": {"reputation": 1633, "user_id": 8791722, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/98WuV.png?s=128&g=1", "display_name": "PixelEinstein", "link": "https://stackoverflow.com/users/8791722/pixeleinstein"}, "edited": false, "score": 0, "creation_date": 1522341338, "post_id": 49550053, "comment_id": 86130126, "body": "Apart from <code>2.35</code> I am more suspicious about the source of the binary as I can see a index <code>(0)</code> as in <code>Driver info: chromedriver=2.35 (0)</code>"}], "tags": [], "owner": {"reputation": 116545, "user_id": 7429447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5a25589e600c8ae89717c14e51a6754b?s=128&d=identicon&r=PG&f=1", "display_name": "DebanjanB", "link": "https://stackoverflow.com/users/7429447/debanjanb"}, "is_accepted": false, "score": 0, "last_activity_date": 1522307587, "creation_date": 1522307587, "answer_id": 49550053, "question_id": 49545144, "link": "https://stackoverflow.com/questions/49545144/how-can-i-tell-chromedriver-to-wait-longer-for-chrome-to-launch-before-giving-up/49550053#49550053", "title": "How can I tell ChromeDriver to wait longer for Chrome to launch before giving up?", "body": "<p>As per your question without your code trial it would be tough to analyze the reason behind the error which you are seeing as :</p>\n\n<pre><code>selenium.common.exceptions.WebDriverException: Message: chrome not reachable\n</code></pre>\n\n<p>Perhaps a more details about the <strong>version info</strong> of the binaries you are using would have helped us in someway. </p>\n\n<p>Factually, asking <em>ChromeDriver</em> to wait longer for <em>Chrome</em> to launch before giving up won't help us as the default configuration of <em>ChromeDriver</em> takes care of the optimum needs.</p>\n\n<p>However <strong>WebDriverException: Message: chrome not reachable</strong> is pretty common issue when the binary versions are incompatible. You can find a detailed discussion about this issue at <a href=\"https://stackoverflow.com/questions/48323856/org-openqa-selenium-webdriverexception-chrome-not-reachable-when-attempting-t/48328964#48328964\"><strong>org.openqa.selenium.WebDriverException: chrome not reachable - when attempting to start a new session</strong></a></p>\n"}, {"tags": [], "owner": {"reputation": 101, "user_id": 3397514, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f7b88084e5e4b94ff3f10f729bf1146?s=128&d=identicon&r=PG", "display_name": "ven42", "link": "https://stackoverflow.com/users/3397514/ven42"}, "is_accepted": true, "score": 0, "last_activity_date": 1522976719, "creation_date": 1522976719, "answer_id": 49683743, "question_id": 49545144, "link": "https://stackoverflow.com/questions/49545144/how-can-i-tell-chromedriver-to-wait-longer-for-chrome-to-launch-before-giving-up/49683743#49683743", "title": "How can I tell ChromeDriver to wait longer for Chrome to launch before giving up?", "body": "<h2>The bad news</h2>\n\n<p>It turns out that not only is there no <code>timeout</code> option for Selenium to pass to ChromeDriver, but short of recompiling your own custom ChromeDriver, there is currently no way to change this value programmatically whatsoever.  Sadly, <a href=\"https://cs.chromium.org/chromium/src/chrome/test/chromedriver/chrome_launcher.cc?rcl=c7535dc32337aadba84688689a5c1920ca6973be&amp;l=212\" rel=\"nofollow noreferrer\">looking at the source code</a> shows that Google has <em>hard-coded</em> a timeout value of 60 seconds!</p>\n\nfrom chromium /src/chrome/test/chromedriver/chrome_launcher.cc@208:\n\n<pre class=\"lang-cpp prettyprint-override\"><code>std::unique_ptr&lt;DevToolsHttpClient&gt; client(new DevToolsHttpClient(\n    address, context_getter, socket_factory, std::move(device_metrics),\n    std::move(window_types), capabilities-&gt;page_load_strategy));\nbase::TimeTicks deadline =\n    base::TimeTicks::Now() + base::TimeDelta::FromSeconds(60);\nStatus status = client-&gt;Init(deadline - base::TimeTicks::Now());\n</code></pre>\n\n<p>Until this code is changed to allow custom deadlines, the only option is a workaround.</p>\n\n<h2>The workaround</h2>\n\n<p>I ended up taking an approach that \"primed\" Chromium before having Selenium call ChromeDriver.  This gets that one-time, post-upgrade slow start out of the way before ChromeDriver ever begins its countdown.  The answer @PixelEinstein gave helped lead me down the right path, but this solution differs in two ways:</p>\n\n<ol>\n<li>The call to open standalone Chromium here is blocking, while <code>webbrowser.open_new()</code> is not.</li>\n<li>Standalone Chromium is always launched before ChromeDriver whether it is needed or not.  I did this because waiting one minute for ChromeDriver to timeout, then waiting another 2.5 minutes for Chromium to start, then trying ChromeDriver again created a total delay of just over 3.5 minutes.  Launching Chromium as the <em>first</em> action brings the total wait time down to about 2.5 minutes, as you skip the initial ChromeDriver timeout.  On occasions when the long startup time <em>doesn't</em> occur, then this \"double loading\" of Chromium is negligible, as the whole process finishes in a matter of seconds.</li>\n</ol>\n\n<p>Here's the code snippet:</p>\n\n<pre><code>#!/usr/bin/env python3\nimport subprocess\nfrom selenium import webdriver\n\nsome_site = 'http://www.google.com'\nchromedriver_path = '/usr/lib/chromium-browser/chromedriver'\n\n# Block until Chromium finishes launching and self-terminates\nsubprocess.run(['chromium-browser', '--headless', '--disable-gpu', '--dump-dom', 'about:blank'])\n\nbrowser = webdriver.Chrome(executable_path=chromedriver_path)\nbrowser.get(some_site)\n# Continue on with your Selenium business...\n</code></pre>\n\n<p>Before instantiating a <code>webdriver.Chrome()</code> object, this waits for Chromium to finish its post-upgrade housekeeping no matter how long it takes.  Chromium is launched in headless mode where <code>--dump-dom</code> is a one-shot operation that writes the requested web page (in this case <code>about:blank</code>) to stdout, which is ignored.  Chromium self-terminates after completing the operation, which then returns from the <code>subprocess.run()</code> call, unblocking program flow.  After that, it's safe to let ChromeDriver start its countdown, as Chromium will launch in a matter of seconds.</p>\n"}], "owner": {"reputation": 101, "user_id": 3397514, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f7b88084e5e4b94ff3f10f729bf1146?s=128&d=identicon&r=PG", "display_name": "ven42", "link": "https://stackoverflow.com/users/3397514/ven42"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 828, "favorite_count": 0, "accepted_answer_id": 49683743, "answer_count": 3, "score": 0, "last_activity_date": 1522978415, "creation_date": 1522275877, "last_edit_date": 1522978415, "question_id": 49545144, "link": "https://stackoverflow.com/questions/49545144/how-can-i-tell-chromedriver-to-wait-longer-for-chrome-to-launch-before-giving-up", "title": "How can I tell ChromeDriver to wait longer for Chrome to launch before giving up?", "body": "<h3>Background</h3>\n\n<p>I'm using Selenium and Python to automate display and navigation of a website in Chromium on Ubuntu MATE 16.04 on a Raspberry Pi 3.  (Think unattended digital signage.)  This combination was working great until today when the newest version of Chromium (with matching ChromeDriver) installed via automatic updates.</p>\n\n<p>Because Chromium needed to perform some upgrade housekeeping tasks the next time it started up, it took a little longer than usual.  Keep in mind that this is on a Raspberry Pi, so I/O is severely bottlenecked by the SD card.  Unfortunately, it took long enough that my Python script failed because the ChromeDriver gave up on Chromium ever starting:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"call-tracker-start\", line 15, in &lt;module&gt;\n    browser = webdriver.Chrome(executable_path=chromedriver_path, options=chrome_options)\n  File \"/home/pi/.local/lib/python3.5/site-packages/selenium/webdriver/chrome/webdriver.py\", line 75, in __init__\n    desired_capabilities=desired_capabilities)\n  File \"/home/pi/.local/lib/python3.5/site-packages/selenium/webdriver/remote/webdriver.py\", line 154, in __init__\n    self.start_session(desired_capabilities, browser_profile)\n  File \"/home/pi/.local/lib/python3.5/site-packages/selenium/webdriver/remote/webdriver.py\", line 243, in start_session\n    response = self.execute(Command.NEW_SESSION, parameters)\n  File \"/home/pi/.local/lib/python3.5/site-packages/selenium/webdriver/remote/webdriver.py\", line 312, in execute\n    self.error_handler.check_response(response)\n  File \"/home/pi/.local/lib/python3.5/site-packages/selenium/webdriver/remote/errorhandler.py\", line 242, in check_response\n    raise exception_class(message, screen, stacktrace)\nselenium.common.exceptions.WebDriverException: Message: chrome not reachable\n  (Driver info: chromedriver=2.35 (0),platform=Linux 4.4.38-v7+ armv7l)\n</code></pre>\n\n<p>Of course, when the script dies after throwing this exception, the Chromium instance is killed before it can finish its housekeeping, which means that next time it has to start over, so it takes just as long as the last time and fails just as hard.</p>\n\n<p>If I then manually intervene and run Chromium as a normal user, I just... wait... a minute... or two, for Chromium to finish its upgrade housekeeping, then it opens its browser window, and then I cleanly quit the application.  Now that the housekeeping is done, Chromium starts up the next time at a more normal speed, so all of the sudden my Python script runs without any error because the ChromeDriver sees Chromium finish launching within its accepted timeout window.</p>\n\n<p>Everything will likely be fine until the next automatic update comes down, and then this same problem will happen all over again.  I don't want to have to manually intervene after every update, nor do I want to disable automatic updates.</p>\n\n<h3>The root of the question</h3>\n\n<p>How can I tell ChromeDriver not to give up so quickly on launching Chromium?</p>\n\n<p>I looked for some sort of timeout value that I could set, but I couldn't find any in the ChromeDriver or Selenium for Python documentation.</p>\n\n<p>Interestingly, there <em>is</em> a <code>timeout</code> argument that can be passed to the Firefox WebDriver, <a href=\"http://selenium-python.readthedocs.io/api.html#module-selenium.webdriver.firefox.webdriver\" rel=\"nofollow noreferrer\">as shown in the Selenium for Python API documentation</a>:</p>\n\n<blockquote>\n  <p><strong>timeout</strong> \u2013 Time to wait for Firefox to launch when using the extension connection.</p>\n</blockquote>\n\n<p>This parameter is also listed for the Internet Explorer WebDriver, but it's notably absent in the Chrome WebDriver API documentation.</p>\n\n<p>I also wouldn't mind passing something directly to ChromeDriver via <code>service_args</code>, but I couldn't find any relevant options in the ChromeDriver docs.</p>\n\n<h3>Update: found root cause of post-upgrade slowness</h3>\n\n<p>After struggling with finding a way to reproduce this problem in order to test solutions, I was able to pinpoint the reason Chromium takes forever to launch after an upgrade.</p>\n\n<p>It seems that, as part of its post-upgrade housekeeping, Chromium rebuilds the user's font cache.  This is a CPU &amp; I/O intensive process that is especially hard on a Raspberry Pi and its SD card, hence the extreme 2.5 minute launch time whenever the font cache has to be rebuilt.</p>\n\n<p>The problem can be reproduced by purposely deleting the font cache, which forces a rebuild:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>pi@rpi-dev1:~$ killall chromium-browser\npi@rpi-dev1:~$ time chromium-browser --headless --disable-gpu --dump-dom 'about:blank'\n[0405/132706.970822:ERROR:gpu_process_transport_factory.cc(1019)] Lost UI shared context.\n&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;&lt;/body&gt;&lt;/html&gt;\n\nreal    0m0.708s\nuser    0m0.340s\nsys     0m0.200s\n\npi@rpi-dev1:~$ rm -Rf ~/.cache/fontconfig\npi@rpi-dev1:~$ time chromium-browser --headless --disable-gpu --dump-dom 'about:blank'\n[0405/132720.917590:ERROR:gpu_process_transport_factory.cc(1019)] Lost UI shared context.\n&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;&lt;/body&gt;&lt;/html&gt;\n\nreal    2m9.449s\nuser    2m8.670s\nsys     0m0.590s\n</code></pre>\n"}, {"tags": ["python", "opencv", "tensorflow"], "comments": [{"owner": {"reputation": 1238, "user_id": 3049987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13670c6d7f471fa532baca3e9de8b9d6?s=128&d=identicon&r=PG&f=1", "display_name": "Tim Woocker", "link": "https://stackoverflow.com/users/3049987/tim-woocker"}, "edited": false, "score": 3, "creation_date": 1522275942, "post_id": 49545142, "comment_id": 86097925, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/46494160/from-utils-import-label-map-util-import-error-no-module-named-utils\">from utils import label_map_util Import Error: No module named utils</a>"}], "answers": [{"tags": [], "owner": {"reputation": 7231, "user_id": 4915798, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/bb8af3ae95300addb5dfa2e6cb5940c3?s=128&d=identicon&r=PG&f=1", "display_name": "afonso", "link": "https://stackoverflow.com/users/4915798/afonso"}, "is_accepted": true, "score": 6, "last_activity_date": 1522280341, "creation_date": 1522280341, "answer_id": 49545859, "question_id": 49545142, "link": "https://stackoverflow.com/questions/49545142/modulenotfounderror-no-module-named-utils/49545859#49545859", "title": "ModuleNotFoundError: No module named &#39;utils&#39;", "body": "<p>What folder are you running your python script from?</p>\n\n<p>To be able to access the 'utils' module directly, you need to be running the script inside the <code>&lt;models-master&gt;\\research\\object_detection</code> folder.</p>\n"}, {"tags": [], "owner": {"reputation": 346, "user_id": 4418009, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-MfvSveL2fKg/AAAAAAAAAAI/AAAAAAAAA84/nW6LjTmtx1U/photo.jpg?sz=128", "display_name": "Kamble Tanaji", "link": "https://stackoverflow.com/users/4418009/kamble-tanaji"}, "is_accepted": false, "score": 2, "last_activity_date": 1542883142, "last_edit_date": 1542883142, "creation_date": 1542292249, "answer_id": 53321687, "question_id": 49545142, "link": "https://stackoverflow.com/questions/49545142/modulenotfounderror-no-module-named-utils/53321687#53321687", "title": "ModuleNotFoundError: No module named &#39;utils&#39;", "body": "<ul>\n<li><p>Instead of running script inside object detection folder append the \npath of tensorflow object detection in your script by writing </p>\n\n<pre><code>import sys\n\nsys.path.append('PATH_TO_TENSORFLOW_OBJECT_DETECTION_FOLDER')\n</code></pre></li>\n<li><p>e.g 'PATH_TO_TENSORFLOW_OBJECT_DETECTION_FOLDER' in my ubuntu system is</p>\n\n<p>/home/dc-335/Documents/Softwares/tensorflow/models/research/object_detection</p></li>\n<li><p>Cheers, You done it !!</p></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 1714, "user_id": 7404323, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/jYEFn.png?s=128&g=1", "display_name": "sailfish009", "link": "https://stackoverflow.com/users/7404323/sailfish009"}, "is_accepted": false, "score": 4, "last_activity_date": 1563274000, "creation_date": 1563274000, "answer_id": 57055517, "question_id": 49545142, "link": "https://stackoverflow.com/questions/49545142/modulenotfounderror-no-module-named-utils/57055517#57055517", "title": "ModuleNotFoundError: No module named &#39;utils&#39;", "body": "<p>add object_detection to the front of utils:</p>\n\n<pre><code># from utils import label_map_util\n# from utils import visualization_utils as vis_util\n\nfrom object_detection.utils import label_map_util\nfrom object_detection.utils import visualization_utils as vis_util\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 889, "user_id": 10917226, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FWSqN.jpg?s=128&g=1", "display_name": "Lovesh Dongre", "link": "https://stackoverflow.com/users/10917226/lovesh-dongre"}, "is_accepted": false, "score": 2, "last_activity_date": 1583182740, "creation_date": 1583182740, "answer_id": 60496555, "question_id": 49545142, "link": "https://stackoverflow.com/questions/49545142/modulenotfounderror-no-module-named-utils/60496555#60496555", "title": "ModuleNotFoundError: No module named &#39;utils&#39;", "body": "<p>I used a quicker method to fix it.</p>\n\n<p>I copied the <em>utils</em> folder from <em>models\\research\\object_detection</em> and pasted it within the same directory as the python file which required <em>utils</em></p>\n"}, {"tags": [], "owner": {"reputation": 85, "user_id": 9215715, "user_type": "registered", "profile_image": "https://graph.facebook.com/2270308893019181/picture?type=large", "display_name": "lvingstone", "link": "https://stackoverflow.com/users/9215715/lvingstone"}, "is_accepted": false, "score": 0, "last_activity_date": 1617002365, "creation_date": 1617002365, "answer_id": 66850088, "question_id": 49545142, "link": "https://stackoverflow.com/questions/49545142/modulenotfounderror-no-module-named-utils/66850088#66850088", "title": "ModuleNotFoundError: No module named &#39;utils&#39;", "body": "<p>the installation didn't go through, you will notice no module called model_utils in your project folder.\nuninstall it <code>pip uninstall django-model-utils</code>  then install it again <code>pip install django-model-utils</code> a new app called model_utils in your project folder.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6727724"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51469, "favorite_count": 0, "accepted_answer_id": 49545859, "answer_count": 5, "score": 7, "last_activity_date": 1617002365, "creation_date": 1522275872, "question_id": 49545142, "link": "https://stackoverflow.com/questions/49545142/modulenotfounderror-no-module-named-utils", "title": "ModuleNotFoundError: No module named &#39;utils&#39;", "body": "<p>I'm trying to run the object_detection API in Tensorflow using my webcam as an input. </p>\n\n<p>The error says: \"from utils import label_map_util ModuleNotFoundError: No module named 'utils'\"</p>\n\n<p>Which relates to the lines: </p>\n\n<pre><code>from utils import label_map_util\nfrom utils import visualization_utils as vis_util\n</code></pre>\n\n<p>I've tried \"pip install util\" appears to work but doesn't solve the problem. I have also reinstalled multiple versions of protobuf as other questions online appear to have this as the solution. I don't get any errors when I install protoc so I don't think this is the issue. </p>\n\n<p>I'm using python 3.6 on windows 10 with tensorflow-gpu. </p>\n"}, {"tags": ["python", "rsa"], "comments": [{"owner": {"reputation": 242, "user_id": 4733946, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2IPua.jpg?s=128&g=1", "display_name": "SEJPM", "link": "https://stackoverflow.com/users/4733946/sejpm"}, "edited": false, "score": 1, "creation_date": 1522315290, "post_id": 49552334, "comment_id": 86111756, "body": "Yes, you could just send the file, or if you have an open channel in your python application, you could also remove the file I/O operations and replace them with network (?) I/O operations or completely scratch the I/O and have the function return <code>cipher_aes.nonce, tag, ciphertext</code>..."}, {"owner": {"reputation": 79299, "user_id": 589259, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/vJbKg.jpg?s=128&g=1", "display_name": "Maarten Bodewes", "link": "https://stackoverflow.com/users/589259/maarten-bodewes"}, "edited": false, "score": 0, "creation_date": 1522355952, "post_id": 49552334, "comment_id": 86137518, "body": "What exactly do you mean with &quot;should I sign it&quot;? What are you trying to achieve? And what is the actual problem that you are facing? Are you having trouble sending or receiving the message? Decrypting the message? Or do you want to provide authenticity and integrity to the message?"}, {"owner": {"reputation": 31, "user_id": 9571127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fe22f8882a78df650fc1af7c7af3ab9?s=128&d=identicon&r=PG", "display_name": "Ahmed Salama", "link": "https://stackoverflow.com/users/9571127/ahmed-salama"}, "reply_to_user": {"reputation": 242, "user_id": 4733946, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2IPua.jpg?s=128&g=1", "display_name": "SEJPM", "link": "https://stackoverflow.com/users/4733946/sejpm"}, "edited": false, "score": 0, "creation_date": 1522358415, "post_id": 49552334, "comment_id": 86138688, "body": "@SEJPM : you mean sending each one individually and the receiver combine them together ?"}, {"owner": {"reputation": 242, "user_id": 4733946, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2IPua.jpg?s=128&g=1", "display_name": "SEJPM", "link": "https://stackoverflow.com/users/4733946/sejpm"}, "edited": false, "score": 0, "creation_date": 1522358498, "post_id": 49552334, "comment_id": 86138721, "body": "@Ahmed_Salama yes, that could work as a strategy."}, {"owner": {"reputation": 31, "user_id": 9571127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fe22f8882a78df650fc1af7c7af3ab9?s=128&d=identicon&r=PG", "display_name": "Ahmed Salama", "link": "https://stackoverflow.com/users/9571127/ahmed-salama"}, "reply_to_user": {"reputation": 79299, "user_id": 589259, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/vJbKg.jpg?s=128&g=1", "display_name": "Maarten Bodewes", "link": "https://stackoverflow.com/users/589259/maarten-bodewes"}, "edited": false, "score": 0, "creation_date": 1522359277, "post_id": 49552334, "comment_id": 86139029, "body": "@MaartenBodewes : &quot;Sign it &quot; means sending Tag+Nonce+ciphertext.. if not then should i send the ciphertext only! .  -- I&#39;m trying to send the encrypted data which stored in a .bin file. -- The problem is that i want to understand the process of RSA in sending encrypted data. -- i have the &quot;sender.py&quot; and the &quot;Reciever.py&quot; but the &quot;Reciever.py&quot;  opens the file that was created by &quot;sender.py&quot; and decrypting the session then decrypting the message. but this happen because the file is already here. so if the real world how the sender send this file to be on the receiver&#39;s local storage."}, {"owner": {"reputation": 79299, "user_id": 589259, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/vJbKg.jpg?s=128&g=1", "display_name": "Maarten Bodewes", "link": "https://stackoverflow.com/users/589259/maarten-bodewes"}, "edited": false, "score": 0, "creation_date": 1522360782, "post_id": 49552334, "comment_id": 86139620, "body": "If you can already decrypt the file then you can also decrypt the binary stream (even if you have to cache or save everything to file). Using stream encryption / decryption is of course more efficient. You can just send the entire file (including nonce and tag) over any binary interface, e.g. a (secure) socket or HTTP(S). If you send it over a socket you may want to prefix the size so you know that transmission has concluded (without waiting for the other party to close the socket)."}], "migrated_from": {"other_site": {"aliases": ["http://cryptography.stackexchange.com"], "markdown_extensions": ["MathJax"], "launch_date": 1435671420, "open_beta_date": 1312315906, "closed_beta_date": 1310497200, "site_state": "normal", "high_resolution_icon_url": "https://cdn.sstatic.net/Sites/crypto/Img/apple-touch-icon@2.png", "twitter_account": "StackCrypto", "favicon_url": "https://cdn.sstatic.net/Sites/crypto/Img/favicon.ico", "icon_url": "https://cdn.sstatic.net/Sites/crypto/Img/apple-touch-icon.png", "audience": "software developers, mathematicians and others interested in cryptography", "site_url": "https://crypto.stackexchange.com", "api_site_parameter": "crypto", "logo_url": "https://cdn.sstatic.net/Sites/crypto/Img/logo.png", "name": "Cryptography", "site_type": "main_site"}, "on_date": 1522315312, "question_id": 57922}, "owner": {"reputation": 31, "user_id": 9571127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fe22f8882a78df650fc1af7c7af3ab9?s=128&d=identicon&r=PG", "display_name": "Ahmed Salama", "link": "https://stackoverflow.com/users/9571127/ahmed-salama"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 242, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1524451457, "creation_date": 1522275775, "last_edit_date": 1524451457, "question_id": 49552334, "link": "https://stackoverflow.com/questions/49552334/how-to-send-the-rsa-encrypted-data-in-encrypted-data-bin", "title": "How to send the RSA encrypted data in &quot; encrypted_data.bin &quot;?", "body": "<p>i use the python package \" <a href=\"https://www.pycryptodome.org\" rel=\"nofollow noreferrer\">pycryptodome</a> \" to send encrypted data using RSA + AES which is Hybrid cipher.</p>\n\n<p>but i face a problem after encrypting the message which is the code store the encrypted data in a file called \"encrypted_data.bin\" which contains the data + tag + nonce. so i want to send this file to the other end so the receiver can decrypt it. and in every message i sent should i sign it and store the message in a file ? \nHere is my code:</p>\n\n<pre><code>from Crypto.PublicKey import RSA\nfrom Crypto.Random import get_random_bytes\nfrom Crypto.Cipher import AES, PKCS1_OAEP\n\ndef encrypt(msg):\n   file_out = open(\"encrypted_data.bin\", \"wb\")\n   f = open(\"public_key.pem\")\n   recipient_key = RSA.import_key(f.read())\n   f.close()\n   session_key = get_random_bytes(16)\n\n   # Encrypt the session key with the reciever's public RSA key\n   cipher_rsa = PKCS1_OAEP.new(recipient_key)\n   file_out.write(cipher_rsa.encrypt(session_key))\n\n   # Encrypt the data with the AES session key\n   cipher_aes = AES.new(session_key, AES.MODE_EAX)\n   ciphertext, tag = cipher_aes.encrypt_and_digest(msg)\n   print(ciphertext)\n   [ file_out.write(x) for x in (cipher_aes.nonce, tag, ciphertext) ] \n   #add the cipherText to the encrypted_data.bin file\n   file_out.close()\n\nencrypt(b'This is my secret message')\n</code></pre>\n"}, {"tags": ["python", "c++", "docker", "build", "build-tools"], "comments": [{"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1522277094, "post_id": 49545119, "comment_id": 86098284, "body": "This may be too broad or too opinion based a question, I don&#39;t know. Personally I would want to have one install system (RPM) and I would probably keep the individual projects&#39; internal build systems and have an overarching <code>Makefile</code> to manage the cross project relationships because make is very flexible, powerful and portable."}, {"owner": {"reputation": 1758, "user_id": 8724882, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d88f8198fb4ae68267aced911e3533f9?s=128&d=identicon&r=PG&f=1", "display_name": "sandwood", "link": "https://stackoverflow.com/users/8724882/sandwood"}, "edited": false, "score": 0, "creation_date": 1524491934, "post_id": 49545119, "comment_id": 86982185, "body": "concerning the last bullet : I found actually better to have two repositories; but , since it is what you ask, what prevent you to have a unique one ?"}, {"owner": {"reputation": 1758, "user_id": 8724882, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d88f8198fb4ae68267aced911e3533f9?s=128&d=identicon&r=PG&f=1", "display_name": "sandwood", "link": "https://stackoverflow.com/users/8724882/sandwood"}, "edited": false, "score": 0, "creation_date": 1524492025, "post_id": 49545119, "comment_id": 86982245, "body": "I hope that when you said control version system, you do not refer to cvs but you actually use a more modern one . If not jump to svn or git immediatly !"}, {"owner": {"reputation": 1758, "user_id": 8724882, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d88f8198fb4ae68267aced911e3533f9?s=128&d=identicon&r=PG&f=1", "display_name": "sandwood", "link": "https://stackoverflow.com/users/8724882/sandwood"}, "edited": false, "score": 0, "creation_date": 1524492199, "post_id": 49545119, "comment_id": 86982379, "body": "Last but not least : I have worked  in a situation opposite to you, full of components depending of each others, built in one BIG (enormous) solution. The result is broken build every single 5 minutes and really hard to test in isolation."}, {"owner": {"reputation": 1758, "user_id": 8724882, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d88f8198fb4ae68267aced911e3533f9?s=128&d=identicon&r=PG&f=1", "display_name": "sandwood", "link": "https://stackoverflow.com/users/8724882/sandwood"}, "edited": false, "score": 0, "creation_date": 1524492329, "post_id": 49545119, "comment_id": 86982481, "body": "Finally, I would say that the key point is that each component must be managed / tested independantly, each one providing API and ABI stability ! Change required on interface must go first through a deprecation phase (6months or more) which gives time for other components to be updated."}], "owner": {"reputation": 63, "user_id": 4555751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4244821940a38220e726bc2408a07c66?s=128&d=identicon&r=PG&f=1", "display_name": "Ender", "link": "https://stackoverflow.com/users/4555751/ender"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 118, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1522275715, "creation_date": 1522275715, "last_edit_date": 1592644375, "question_id": 49545119, "link": "https://stackoverflow.com/questions/49545119/build-tool-for-a-complex-c-python-project", "title": "Build tool for a complex C++/Python project", "body": "<h1>Context</h1>\n<p>I'm working on a project composed of multiple C++ and Python projects. A typical component is for instance composed of:</p>\n<ul>\n<li>Pure C++ library (depending on other native libraries)</li>\n<li>C/C++ Python binding (depending on the native libraries)</li>\n<li>Pure Python glue code (depending on other Python libraries and Python bindings)</li>\n</ul>\n<p>A component can depend of another components.</p>\n<h1>Current state</h1>\n<p>C++ components are build using CMake and produced RPM files. Python components are packaged using setuptool to Python wheels. Final application is packaged in a Docker image.</p>\n<p>As you can guess, this heterogeneous environment is very difficult to maintain:</p>\n<ul>\n<li>Dependency management is very difficult and error prone. C++ dependencies are managed using the RPM features. Python dependencies using setuptool.</li>\n<li>Build result deployment is hard. 2 servers are maintained, 1 for RPM repository and 1 for a Pypi repository</li>\n<li>Installation is difficult: Integrity between RPM and Python components are not guaranteed. Fetch and install the application is hard as there is no unified dependency management</li>\n<li>Version tagging in control version system is also difficult: you have to change the version in the Python and C++ project. We really need a single entry point.</li>\n</ul>\n<p>I'm sure some people out there have already encountered this kind of problem and I'm looking for a good and durable technical solution. We already tried to managed these projects using Maven (proof of concept) but our experience of this build system is not really positive: it lacks of flexibility and we've not found how to manage custom artifact (RPM, wheels) and the final installation.</p>\n<p>Do you have any ideas on how design a maintainable build system in this context?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 2, "creation_date": 1522275778, "post_id": 49545091, "comment_id": 86097877, "body": "Have you looked at the docs for this third-party module to see if it even claims to handle bash-style globs as arguments the same way bash does?"}, {"owner": {"reputation": 5598, "user_id": 9450991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85d8fa060feb1d11913814710f4ee352?s=128&d=identicon&r=PG&f=1", "display_name": "Oscar Benjamin", "link": "https://stackoverflow.com/users/9450991/oscar-benjamin"}, "edited": false, "score": 1, "creation_date": 1522275828, "post_id": 49545091, "comment_id": 86097891, "body": "I think this is just bash expanding your glob pattern. Try prefixing the bash command with <code>echo</code> to see what arguments are actually being passed to <code>du</code>. You can use Python&#39;s <code>glob</code> module for the same effect."}], "answers": [{"comments": [{"owner": {"reputation": 2958, "user_id": 3781180, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a7fddcdb3bbcaa60147ebe56231c22c1?s=128&d=identicon&r=PG&f=1", "display_name": "OneRaynyDay", "link": "https://stackoverflow.com/users/3781180/oneraynyday"}, "edited": false, "score": 0, "creation_date": 1522276435, "post_id": 49545147, "comment_id": 86098088, "body": "Thank you. I have been cursed with the misfortune of having many pages(including github pages) blocked at work for security reasons, and so I apologize if it was a fairly stupid question. I&#39;ll keep the question open in case some stranger chances upon the same problem though. I&#39;ll accept your answer."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "reply_to_user": {"reputation": 2958, "user_id": 3781180, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a7fddcdb3bbcaa60147ebe56231c22c1?s=128&d=identicon&r=PG&f=1", "display_name": "OneRaynyDay", "link": "https://stackoverflow.com/users/3781180/oneraynyday"}, "edited": false, "score": 0, "creation_date": 1522277625, "post_id": 49545147, "comment_id": 86098423, "body": "@OneRaynyDay Your work lets you install packages off PyPI, but doesn&#39;t let you look up the documentation on how to use those packages properly? That&#39;s a very odd definition of &quot;security&quot;. (Not that I&#39;d be too surprised; I&#39;ve worked with IT people like that in the past\u2026)"}, {"owner": {"reputation": 2958, "user_id": 3781180, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a7fddcdb3bbcaa60147ebe56231c22c1?s=128&d=identicon&r=PG&f=1", "display_name": "OneRaynyDay", "link": "https://stackoverflow.com/users/3781180/oneraynyday"}, "edited": false, "score": 0, "creation_date": 1522278368, "post_id": 49545147, "comment_id": 86098616, "body": "I use an internal anaconda. :)"}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "reply_to_user": {"reputation": 2958, "user_id": 3781180, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a7fddcdb3bbcaa60147ebe56231c22c1?s=128&d=identicon&r=PG&f=1", "display_name": "OneRaynyDay", "link": "https://stackoverflow.com/users/3781180/oneraynyday"}, "edited": false, "score": 0, "creation_date": 1522280058, "post_id": 49545147, "comment_id": 86099055, "body": "@OneRaynyDay OK, not <i>quite</i> as weird. And I suppose blocking docs on Github while allowing SO is a nice way to make sure you copy and paste snippets of code from some random guy instead of code samples from the team that wrote the library\u2026"}], "tags": [], "owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "is_accepted": true, "score": 3, "last_activity_date": 1522275889, "last_edit_date": 1592644375, "creation_date": 1522275889, "answer_id": 49545147, "question_id": 49545091, "link": "https://stackoverflow.com/questions/49545091/python-sh-module-does-not-recognize-pattern-matching/49545147#49545147", "title": "Python `sh` module does not recognize pattern matching", "body": "<p>Looking at <a href=\"http://amoffat.github.io/sh/sections/faq.html#why-doesn-t-work-as-a-command-argument\" rel=\"nofollow noreferrer\">the documentation for this module</a>, it doesn't claim to support bash-style glob expressions the same way bash does. In fact, it doesn't support globs at all:</p>\n<blockquote>\n<p>Glob expansion is a feature of a shell, like Bash, and is performed by the shell before passing the results to the program to be exec\u2019d. Because sh is not a shell, but rather tool to execute programs directly, we do not handle glob expansion like a shell would.</p>\n<p>So in order to use <code>&quot;*&quot;</code> like you would on the commandline, pass it into <code>glob.glob()</code> first:</p>\n</blockquote>\n<pre><code>import sh\nimport glob\nsh.ls(glob.glob(&quot;*.py&quot;))\n</code></pre>\n"}], "owner": {"reputation": 2958, "user_id": 3781180, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a7fddcdb3bbcaa60147ebe56231c22c1?s=128&d=identicon&r=PG&f=1", "display_name": "OneRaynyDay", "link": "https://stackoverflow.com/users/3781180/oneraynyday"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "accepted_answer_id": 49545147, "answer_count": 1, "score": 0, "last_activity_date": 1522275889, "creation_date": 1522275559, "question_id": 49545091, "link": "https://stackoverflow.com/questions/49545091/python-sh-module-does-not-recognize-pattern-matching", "title": "Python `sh` module does not recognize pattern matching", "body": "<p>For some reason, when I run something like:</p>\n\n<pre><code>$ du -sh /some/regex.*/over?/here.txt\n</code></pre>\n\n<p>it gives the correct answer, correctly going through the subdirectories and returning an answer.</p>\n\n<p>Strangely enough, using the <code>sh</code> module in python, I run the same command:</p>\n\n<pre><code>import sh\nprint(sh.du(\"-sh\", \"rsync_perf/d*/xa*\"))\n</code></pre>\n\n<p>and it gives me the following error:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\n  File \"/home/rzhang2/anaconda2/lib/python2.7/site-packages/sh.py\", line 1427, in __call__\n    return RunningCommand(cmd, call_args, stdin, stdout, stderr)\n  File \"/home/rzhang2/anaconda2/lib/python2.7/site-packages/sh.py\", line 774, in __init__\n    self.wait()\n  File \"/home/rzhang2/anaconda2/lib/python2.7/site-packages/sh.py\", line 792, in wait\n    self.handle_command_exit_code(exit_code)\n  File \"/home/rzhang2/anaconda2/lib/python2.7/site-packages/sh.py\", line 815, in handle_command_exit_code\n    raise exc\nsh.ErrorReturnCode_1:\n\n  RAN: /usr/bin/du -sh rsync_perf/d*/xa*\n\n  STDOUT:\n\n\n  STDERR:\n/usr/bin/du: cannot access 'rsync_perf/d*/xa*': No such file or directory\n</code></pre>\n\n<p>It is also not a relative vs. absolute path issue:</p>\n\n<pre><code>print(sh.du(\"-sh\", \"/home/rzhang2/secdata/analysis/rsync_perf/d*/xa*\"))\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\n  File \"/home/rzhang2/anaconda2/lib/python2.7/site-packages/sh.py\", line 1427, in __call__\n    return RunningCommand(cmd, call_args, stdin, stdout, stderr)\n  File \"/home/rzhang2/anaconda2/lib/python2.7/site-packages/sh.py\", line 774, in __init__\n    self.wait()\n  File \"/home/rzhang2/anaconda2/lib/python2.7/site-packages/sh.py\", line 792, in wait\n    self.handle_command_exit_code(exit_code)\n  File \"/home/rzhang2/anaconda2/lib/python2.7/site-packages/sh.py\", line 815, in handle_command_exit_code\n    raise exc\nsh.ErrorReturnCode_1:\n\n  RAN: /usr/bin/du -sh /home/rzhang2/secdata/analysis/rsync_perf/d*/xa*\n\n  STDOUT:\n\n\n  STDERR:\n/usr/bin/du: cannot access '/home/rzhang2/secdata/analysis/rsync_perf/d*/xa*': No such file or directory\n</code></pre>\n\n<p>Note: Running either versions in bash in the same directory gives me the answer I wanted.</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 399, "user_id": 3493239, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/0pqau.jpg?s=128&g=1", "display_name": "LogCapy", "link": "https://stackoverflow.com/users/3493239/logcapy"}, "edited": false, "score": 0, "creation_date": 1522277804, "post_id": 49545304, "comment_id": 86098466, "body": "Thanks!  Yeah, I have mostly having issues with the time range comparisons."}, {"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "reply_to_user": {"reputation": 399, "user_id": 3493239, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/0pqau.jpg?s=128&g=1", "display_name": "LogCapy", "link": "https://stackoverflow.com/users/3493239/logcapy"}, "edited": false, "score": 0, "creation_date": 1522279922, "post_id": 49545304, "comment_id": 86099014, "body": "@Estilus yw happy coding"}], "tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": true, "score": 1, "last_activity_date": 1522276814, "creation_date": 1522276814, "answer_id": 49545304, "question_id": 49545073, "link": "https://stackoverflow.com/questions/49545073/counting-column-value-occurrences-within-a-specified-amount-of-time/49545304#49545304", "title": "Counting column value occurrences within a specified amount of time", "body": "<p>IIUC, By using <code>value_counts</code> with <code>groupby</code> , <code>join</code> here is to compare the time range </p>\n\n<pre><code>def youfunc(df,my,hour):\n    df1=df[df.activity==my]\n    s=df.reset_index(level=1).join(df1.reset_index(level=1),rsuffix ='y')\n    s=s.loc[s.activity!=s.activityy]\n    s['New']=abs((s.time-s.timey).dt.total_seconds()/(hour*3600))\n    return s.groupby(level=0).apply(lambda x : x['activity'][x['New']&lt;=1]).value_counts()\nyoufunc(df,'hw',1)\nOut[363]: \nswim    2\nplay    1\nName: activity, dtype: int64\n</code></pre>\n"}], "owner": {"reputation": 399, "user_id": 3493239, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/0pqau.jpg?s=128&g=1", "display_name": "LogCapy", "link": "https://stackoverflow.com/users/3493239/logcapy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 1, "accepted_answer_id": 49545304, "answer_count": 1, "score": 0, "last_activity_date": 1522277334, "creation_date": 1522275408, "last_edit_date": 1522277334, "question_id": 49545073, "link": "https://stackoverflow.com/questions/49545073/counting-column-value-occurrences-within-a-specified-amount-of-time", "title": "Counting column value occurrences within a specified amount of time", "body": "<p>I have a multi-indexed dataframe, df:</p>\n\n<pre><code>name time                    activity\nBill 2013-10-09 05:27:00     run\n     2013-10-09 07:23:00     play\n     2013-10-09 07:25:00     hw\n     2013-10-09 08:25:00     swim\nRick 2014-11-07 06:27:00     eat\n     2014-11-07 07:25:00     swim\n     2014-11-07 08:25:00     hw\n     2014-11-07 10:30:00     play\n</code></pre>\n\n<p>with name and time as indices.  time is a datetime type.  I want a function, </p>\n\n<pre><code>def find_close_activities(df, a, nhr)\n</code></pre>\n\n<p>that will return the count of activities which occurs within nhr hour(s) away from each instance of activity, a.  </p>\n\n<p>So as an example, </p>\n\n<pre><code>find_close_activities(df, 'hw', 1)\n</code></pre>\n\n<p>would return</p>\n\n<pre><code>play: 1\nswim: 2\n</code></pre>\n\n<p>IMPORTANT: Counts should not overlap between names.  We should only be searching for activities occurring n_hrs away within the same person.  I think that this would require a groupby.</p>\n"}, {"tags": ["python", "django", "list", "class"], "answers": [{"tags": [], "owner": {"reputation": 134, "user_id": 7572251, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rMJp5.jpg?s=128&g=1", "display_name": "Harry MW", "link": "https://stackoverflow.com/users/7572251/harry-mw"}, "is_accepted": false, "score": 0, "last_activity_date": 1522278250, "creation_date": 1522278250, "answer_id": 49545545, "question_id": 49545067, "link": "https://stackoverflow.com/questions/49545067/django-passing-data-through-a-view-context-preferred-storage-method/49545545#49545545", "title": "Django, passing data through a view context, preferred storage method", "body": "<p>For myself, depends on how I'm retrieving/creating the data. </p>\n\n<p>In general forms are a nice way to do it if you want to have some validation or allow the user to submit data or if you're representing something from the ORM but Django's templates accept a lot of data types. </p>\n\n<p>Otherwise I'd recommend creating a dictionary and setting content equal to it. I.E.</p>\n\n<pre><code>varOne = '1'\nvarTwo = 'Two'\nvarThree = 3.0\nmyPassThrougData = \n  {'variableOne': varOne, 'variableTwo': varTwo, 'VariableThree': \n  varThree }\nreturn render(request, 'logon/form.html', {'form': form}, content=myPassThoughData)\n</code></pre>\n"}], "owner": {"reputation": 849, "user_id": 9046380, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e2a3901a83058a91ac4c28c37b4cc87c?s=128&d=identicon&r=PG&f=1", "display_name": "Marcus Grass", "link": "https://stackoverflow.com/users/9046380/marcus-grass"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 244, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1522278250, "creation_date": 1522275396, "question_id": 49545067, "link": "https://stackoverflow.com/questions/49545067/django-passing-data-through-a-view-context-preferred-storage-method", "title": "Django, passing data through a view context, preferred storage method", "body": "<p>I'm trying to pass some data through a django context and am finding it kind of cumbersome. I'm very new to Python and a bit unfamiliar with storing data, I have a few suggestions here shown in the code:\n1. A form to pass data:</p>\n\n<pre><code>def formview(request):\n    if request.method == 'POST':\n        form=LogonForm(request.POST)\n        if form.is_valid():\n            request.session['firstname']=form.cleaned_data['entrykey']\n            request.session['lastname']=form.cleaned_data['firstfield']\n            request.session['age']=form.cleaned_data['secondfield']\n            request.session['location']=form.cleaned_data['thirdfield']\n            return HttpResponseRedirect('thanks')\n    else:\n        form=LogonForm()\n\n    return render(request, 'logon/form.html', {'form': form})\n</code></pre>\n\n<p>A view which reacts to the submitted data, but not from database:</p>\n\n<pre><code>def thanksforform(request):\n    try:\n        #Using class\n        class thanksclass():\n            firstname=request.session['firstname']\n            lastname=request.session['lastname']\n            age=request.session['age']\n            location=request.session['location']\n            under18='Come back in %s years' % str(18-age)\n            over18='Step right up!'\n        #Using array\n        data=np.empty(6, dtype=object)\n        data[0]=request.session['firstname'] #etc. etc. ect.\n        #using list\n        listdata=[request.session['firstname']] #etc etc etc\n    except KeyError:\n        return HttpResponseRedirect('/logon/')\n    request.session.flush()\n    return render(request, 'logon/thanks.html', {'thanksclass': thanksclass})\n</code></pre>\n\n<p>Which type of object is preferred in Django for this kind of purpose, is there a better way to pass data through the view context?</p>\n\n<p>PS. Please disregard the source being session data, It's just an example as I was messing around, I'm aware that you can call session data directly from the template aswell.</p>\n"}, {"tags": ["python", "django", "python-3.x", "python-2.7"], "comments": [{"owner": {"reputation": 1238, "user_id": 3049987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13670c6d7f471fa532baca3e9de8b9d6?s=128&d=identicon&r=PG&f=1", "display_name": "Tim Woocker", "link": "https://stackoverflow.com/users/3049987/tim-woocker"}, "edited": false, "score": 0, "creation_date": 1522275606, "post_id": 49545064, "comment_id": 86097839, "body": "Are you running your server with apache? You could just serve the files with apache or any other webserver. Or do you want to stick to django for the whole project? If so, why?"}, {"owner": {"reputation": 85, "user_id": 7258312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09825ada68d409a81208903c4f74b250?s=128&d=identicon&r=PG&f=1", "display_name": "Dennis Gathagu", "link": "https://stackoverflow.com/users/7258312/dennis-gathagu"}, "reply_to_user": {"reputation": 1238, "user_id": 3049987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13670c6d7f471fa532baca3e9de8b9d6?s=128&d=identicon&r=PG&f=1", "display_name": "Tim Woocker", "link": "https://stackoverflow.com/users/3049987/tim-woocker"}, "edited": false, "score": 0, "creation_date": 1522276782, "post_id": 49545064, "comment_id": 86098186, "body": "I&#39;m using nginx as my web server, I wanted to use django to do all the work since i didn&#39;t know there is another way to get around my problem."}, {"owner": {"reputation": 1238, "user_id": 3049987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13670c6d7f471fa532baca3e9de8b9d6?s=128&d=identicon&r=PG&f=1", "display_name": "Tim Woocker", "link": "https://stackoverflow.com/users/3049987/tim-woocker"}, "edited": false, "score": 0, "creation_date": 1522277029, "post_id": 49545064, "comment_id": 86098259, "body": "Have a look at this question. It could help you set up nginx to serve files outside of django. Django can then just redirect to the requested files. This is the way django is intended to work so I suggest you have a look at this."}, {"owner": {"reputation": 85, "user_id": 7258312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09825ada68d409a81208903c4f74b250?s=128&d=identicon&r=PG&f=1", "display_name": "Dennis Gathagu", "link": "https://stackoverflow.com/users/7258312/dennis-gathagu"}, "reply_to_user": {"reputation": 1238, "user_id": 3049987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13670c6d7f471fa532baca3e9de8b9d6?s=128&d=identicon&r=PG&f=1", "display_name": "Tim Woocker", "link": "https://stackoverflow.com/users/3049987/tim-woocker"}, "edited": false, "score": 0, "creation_date": 1522277312, "post_id": 49545064, "comment_id": 86098332, "body": "i&#39;d be very grateful if you guided me through the whole process of setting up nginx, you haven&#39;t provided a link to the question though"}, {"owner": {"reputation": 1238, "user_id": 3049987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13670c6d7f471fa532baca3e9de8b9d6?s=128&d=identicon&r=PG&f=1", "display_name": "Tim Woocker", "link": "https://stackoverflow.com/users/3049987/tim-woocker"}, "edited": false, "score": 0, "creation_date": 1522277567, "post_id": 49545064, "comment_id": 86098406, "body": "oops, sorry. Here is the link: <a href=\"https://stackoverflow.com/questions/2451739/django-serving-static-files-through-nginx\" title=\"django serving static files through nginx\">stackoverflow.com/questions/2451739/&hellip;</a> you can find many tutorials on how to setup nginx with django. Just search for it on google :)"}], "owner": {"reputation": 85, "user_id": 7258312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09825ada68d409a81208903c4f74b250?s=128&d=identicon&r=PG&f=1", "display_name": "Dennis Gathagu", "link": "https://stackoverflow.com/users/7258312/dennis-gathagu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 91, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1522275385, "creation_date": 1522275385, "question_id": 49545064, "link": "https://stackoverflow.com/questions/49545064/how-do-i-implement-pdf-or-doc-file-upload-and-downloads-on-a-django-project", "title": "How do i implement pdf or doc file upload and downloads on a django project?", "body": "<p>I'm creating a website where i can upload catalogues on a downloads page and users can download them, i can achieve this for a single file by using the following code in the view, but i need a simpler way i can do this on the admin or on a template.</p>\n\n<pre><code>def brochure(request):\n fs = FileSystemStorage()\n filename = 'kastom_profile.pdf'\n if fs.exists(filename):\n    with fs.open(filename) as pdf:\n        response = HttpResponse(pdf, content_type='application/pdf')\n        response['Content-Disposition'] = 'inline;filename=\"kastom_profile.pdf\"'\n        return response\n  else:\n    return HttpResponseNotFound('The requested pdf was not found in our server.')\n</code></pre>\n"}, {"tags": ["python", "windows", "x86", "64-bit"], "comments": [{"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 1, "creation_date": 1522276078, "post_id": 49545009, "comment_id": 86097978, "body": "This is almost certainly not going to be specific to Python; by including that tag, you&#39;re scaring away PowerShell, VB, etc. experts who are probably more likely to know the answer."}], "answers": [{"comments": [{"owner": {"reputation": 1373, "user_id": 1190084, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/xheV9.jpg?s=128&g=1", "display_name": "nerdfever.com", "link": "https://stackoverflow.com/users/1190084/nerdfever-com"}, "edited": false, "score": 0, "creation_date": 1522275999, "post_id": 49545108, "comment_id": 86097950, "body": "That&#39;s a good answer for the specific case of the &#39;ProgramFiles&#39; variable, but is there a general solution?"}, {"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "reply_to_user": {"reputation": 1373, "user_id": 1190084, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/xheV9.jpg?s=128&g=1", "display_name": "nerdfever.com", "link": "https://stackoverflow.com/users/1190084/nerdfever-com"}, "edited": false, "score": 2, "creation_date": 1522277151, "post_id": 49545108, "comment_id": 86098293, "body": "@nerdfever.com: The question was revolving around <i>%ProgramFiles%</i>. There are others in the same situation (e.g. <i>%PROCESSOR_ARCHITECTURE%</i>). But not all. Yo might get the others from the registry. <i>WOW64</i>  topic partially covers this scenario as well."}, {"owner": {"reputation": 37387, "user_id": 137650, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/418a42c29b040f2e0a51eea5330e2b7f?s=128&d=identicon&r=PG", "display_name": "MatsLindh", "link": "https://stackoverflow.com/users/137650/matslindh"}, "reply_to_user": {"reputation": 1373, "user_id": 1190084, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/xheV9.jpg?s=128&g=1", "display_name": "nerdfever.com", "link": "https://stackoverflow.com/users/1190084/nerdfever-com"}, "edited": false, "score": 0, "creation_date": 1522329559, "post_id": 49545108, "comment_id": 86121785, "body": "@nerdfever.com There really isn&#39;t anything like &quot;give me what a 32-bit windows would set these values to&quot; - that&#39;s generally what wow64 tries to do, and you&#39;re asking to work around that. In that case you&#39;ll have to take it case by case - those variables that are relevant for what you&#39;re trying to do."}, {"owner": {"reputation": 1373, "user_id": 1190084, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/xheV9.jpg?s=128&g=1", "display_name": "nerdfever.com", "link": "https://stackoverflow.com/users/1190084/nerdfever-com"}, "edited": false, "score": 3, "creation_date": 1522353770, "post_id": 49545108, "comment_id": 86136415, "body": "@MatsLindh I think you&#39;re misunderstanding what I&#39;m trying to do. I want the actual (not hypothetical) values of the 64-bit env variables, when I&#39;m actually on a 64 bit OS (but running a 32-bit process). Not &quot;what a 32-bit windows would to&quot;, but instead what the 64-bit Windows actually does."}], "tags": [], "owner": {"reputation": 37387, "user_id": 137650, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/418a42c29b040f2e0a51eea5330e2b7f?s=128&d=identicon&r=PG", "display_name": "MatsLindh", "link": "https://stackoverflow.com/users/137650/matslindh"}, "is_accepted": true, "score": 4, "last_activity_date": 1522275648, "creation_date": 1522275648, "answer_id": 49545108, "question_id": 49545009, "link": "https://stackoverflow.com/questions/49545009/how-to-access-64-bit-windows-environment-variables-from-32-bit-python/49545108#49545108", "title": "How to access 64-bit Windows environment variables from 32-bit Python?", "body": "<p>You can use the <code>ProgramW6432</code> environment variable to get the real (64-bit) path of <code>Program Files</code> if you're a 32-bit program running on a 64-bit version of Windows:</p>\n\n<pre><code>ProgramFiles=C:\\Program Files (x86)\nProgramFiles(x86)=C:\\Program Files (x86)\nProgramW6432=C:\\Program Files\n</code></pre>\n\n<p>.. while running under a 32-bit OS won't have the variable set.</p>\n\n<p>So in python, something like:</p>\n\n<pre><code>path = os.environ['ProgramW6432'] if 'ProgramW6432' in os.environ else os.environ['ProgramFiles']\n</code></pre>\n\n<p>.. should work as you want it to.</p>\n"}], "owner": {"reputation": 1373, "user_id": 1190084, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/xheV9.jpg?s=128&g=1", "display_name": "nerdfever.com", "link": "https://stackoverflow.com/users/1190084/nerdfever-com"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 623, "favorite_count": 0, "accepted_answer_id": 49545108, "answer_count": 1, "score": 3, "last_activity_date": 1522275648, "creation_date": 1522275117, "question_id": 49545009, "link": "https://stackoverflow.com/questions/49545009/how-to-access-64-bit-windows-environment-variables-from-32-bit-python", "title": "How to access 64-bit Windows environment variables from 32-bit Python?", "body": "<p>Is there some reasonably straightforward way to read the 64 bit Windows environment variables from 32 bit Python?</p>\n\n<p>For example, the default value of</p>\n\n<pre><code>os.environ['ProgramFiles']\n</code></pre>\n\n<p>is r'C:\\Program Files' in a 32 bit environment (and that's what os.environ reports in a 32 bit Python), but it's r'C:\\Program Files (x86)' in a 64-bit environment.</p>\n\n<p>I want to get at the 64-bit version of the variables from a 32-bit Python. How?</p>\n\n<p>===================================================================</p>\n\n<p>This part of the question is a pre-emptive rant for those of you who can't wait to say <em>\"Why do you want to do that?\"</em> or <em>\"It's not a good idea to do that\"</em>, instead of answering the question.</p>\n\n<p>I have good and sufficient reasons for asking. I'm using Python to automate setup of Windows boxes. They might be running either 32 bit or 64 bit Windows, so only 32 bit Python can be sure to run on both. But the value of the 64 bit variables matters, because they determine where certain files should go.</p>\n\n<p>And - before you say \"just put things in \"C:\\Program Files\" if it's a 32-bit Windows or \"C:\\Program Files (x86)\" if it's a 64-bit Windows, let me point out that these environment variables exist for a reason. While those locations may be correct 99% of the time, users may have moved these folders to other drive letters or other locations. </p>\n\n<p>There's no point in having the environment variables to tell you where things go if nobody looks at them. :-)</p>\n"}, {"tags": ["python", "matplotlib", "jupyter-notebook", "inline", "jupyter"], "comments": [{"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1522275455, "post_id": 49545003, "comment_id": 86097787, "body": "What exactly <i>is</i> the problem? Why would you use <code>plt.ion()</code> in a jupyter cell? To suppress any output from a jupyter cell use <code>%%capture</code> as the first line of that cell. Is that what you mean?"}, {"owner": {"reputation": 23937, "user_id": 678572, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kZ2Ia.jpg?s=128&g=1", "display_name": "O.rka", "link": "https://stackoverflow.com/users/678572/o-rka"}, "reply_to_user": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1522276381, "post_id": 49545003, "comment_id": 86098073, "body": "<code>%%capture</code> can suppress all output from a Jupyter cell? I didn&#39;t know that.  I will take another look at the magic lines.  Thank you.  That will be a good fix for what I&#39;m looking for atm.  Ideally, I would only want to turn off the plotting because I usually write to stdout at certain checkpoints but I could do without that in the meantime.  Ideally I would want something like <code>with %matplotlib inline == False: [code]</code>.  However, I realize that I completely butchered the syntax for the <code>with</code> statement, the <code>magic</code>, and the use of a <code>boolean</code> but I&#39;m not sure if there&#39;s something similar."}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1522277302, "post_id": 49545003, "comment_id": 86098329, "body": "There is <a href=\"https://stackoverflow.com/questions/18717877/prevent-plot-from-showing-in-jupyter-notebook\">this question</a> also, which shows possible solutions. But I have to admit that none except <code>%%capture</code> ever worked for me (hence my answer there)."}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1522279556, "post_id": 49545003, "comment_id": 86098923, "body": "I added <a href=\"https://stackoverflow.com/a/49545730/4124317\">another answer</a> to the linked question. Should we mark this as duplicate? Given that there is no such thing as <code>without inline do:</code>? Else you should probably clearly state in how far this question is different from the other one, explaining why none of the four solutions are not working for you."}, {"owner": {"reputation": 23937, "user_id": 678572, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kZ2Ia.jpg?s=128&g=1", "display_name": "O.rka", "link": "https://stackoverflow.com/users/678572/o-rka"}, "reply_to_user": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1522284644, "post_id": 49545003, "comment_id": 86100181, "body": "Maybe this one should be flagged as duplicate if <code>%%capture</code> was the only approach that worked for you.  Thanks!"}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1522286535, "post_id": 49545003, "comment_id": 86100644, "body": "Well, as pointed out in the newly added answer, <code>%matplotlib agg</code> would work as well. Did you try that?"}, {"owner": {"reputation": 830, "user_id": 789215, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/1185c14f8241b89733e5bba25088e169?s=128&d=identicon&r=PG", "display_name": "Marcus Jones", "link": "https://stackoverflow.com/users/789215/marcus-jones"}, "edited": false, "score": 0, "creation_date": 1535721100, "post_id": 49545003, "comment_id": 91183053, "body": "I had a similar issue (???), I made a context manager to disable plotting in IPython, maybe it helps? See my question; <a href=\"https://stackoverflow.com/questions/52115896/can-i-prevent-spyder-from-displaying-inline-images-temporarily/52116123#52116123\" title=\"can i prevent spyder from displaying inline images temporarily\">stackoverflow.com/questions/52115896/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 2960898, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d00e18554e940c01d84ff7c317811f89?s=128&d=identicon&r=PG&f=1", "display_name": "mrawlik", "link": "https://stackoverflow.com/users/2960898/mrawlik"}, "is_accepted": false, "score": 0, "last_activity_date": 1582110050, "creation_date": 1582110050, "answer_id": 60298850, "question_id": 49545003, "link": "https://stackoverflow.com/questions/49545003/how-to-suppress-matplotlib-inline-for-a-single-cell-in-jupyter-notebooks-lab/60298850#60298850", "title": "How to suppress matplotlib inline for a single cell in Jupyter Notebooks/Lab?", "body": "<p>Figures closed before the end of the cell will not be shown. Calling <code>plt.close(\"all\")</code> at the end of the cell will close all figures and none will be displayed in the cell's output.</p>\n"}], "owner": {"reputation": 23937, "user_id": 678572, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kZ2Ia.jpg?s=128&g=1", "display_name": "O.rka", "link": "https://stackoverflow.com/users/678572/o-rka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1447, "favorite_count": 2, "answer_count": 1, "score": 5, "last_activity_date": 1582110050, "creation_date": 1522275094, "question_id": 49545003, "link": "https://stackoverflow.com/questions/49545003/how-to-suppress-matplotlib-inline-for-a-single-cell-in-jupyter-notebooks-lab", "title": "How to suppress matplotlib inline for a single cell in Jupyter Notebooks/Lab?", "body": "<p>I was looking at <a href=\"https://stackoverflow.com/questions/30878666/matplotlib-python-inline-on-off\">matplotlib python inline on/off</a> and this kind of solves the problem but when I do <code>plt.ion()</code> all of the Figures pop up (100s of figures).  I want to keep them suppressed in a single cell.  Is there a <code>with</code> loop I can use to turn off <code>%matplotlib inline</code> or is this impossible? </p>\n"}, {"tags": ["python", "list"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1522275122, "post_id": 49544992, "comment_id": 86097681, "body": "<code>g[:]</code> is a <i>shallow</i> copy."}, {"owner": {"reputation": 1568, "user_id": 8793975, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/086643c7f3fafe914727c51882e974bc?s=128&d=identicon&r=PG&f=1", "display_name": "enumaris", "link": "https://stackoverflow.com/users/8793975/enumaris"}, "edited": false, "score": 0, "creation_date": 1522275586, "post_id": 49544992, "comment_id": 86097836, "body": "You can read the previous thread in more detail. It will explain that gridC=g[:] method of copying a list is, as the user above stated, only a shallow copy. It copies only the top layer. Since you have a list of lists, the internal lists are not copied. You can use the slicing method only for list of immutable objects. You might try copy.deepcopy() from the copy module."}], "owner": {"reputation": 1, "user_id": 7376939, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6aa4decd81464beab8a114197f1e0077?s=128&d=identicon&r=PG&f=1", "display_name": "Brodiefish", "link": "https://stackoverflow.com/users/7376939/brodiefish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 16, "favorite_count": 0, "closed_date": 1522275105, "answer_count": 0, "score": 0, "last_activity_date": 1522275374, "creation_date": 1522275038, "last_edit_date": 1522275374, "question_id": 49544992, "link": "https://stackoverflow.com/questions/49544992/not-able-to-reset-a-nested-boolean-list-with-iterations-of-a-loop", "closed_reason": "Duplicate", "title": "Not able to reset a nested Boolean list with iterations of a loop?", "body": "<p>I want to be able to reset a nested list of Boolean values lists to a particular configuration once a certain condition has been reached inside a for loop.</p>\n\n<p>So at the start of my program I define the list as follows:</p>\n\n<pre><code>g = [[True,True,False,False,False],[True,False,False,False,False],[False,False,False,False,False],[False,False,False,False,False],[False,False,False,False,False]]\n</code></pre>\n\n<p>Then I have a for loop:</p>\n\n<pre><code>for i in range(10):\n    row = random.randrange(5)\n    col = random.randrange(5)\n    print str(col) + \"\\t\" + str(row)\n    gridC = doMove(gridC,col,row)\n    s += str(col + 1) + \"\\t\" + str(row + 1) + \"\\n\"\n    for i in gridC:\n        print i\n    if isFound(gridC[:]):\n        found = True\n        break\n    else:\n        s = \"\"\n        gridC = g[:]\n</code></pre>\n\n<p>The loop terminates if all values in <code>gridC</code> are false. However when I try to reset <code>gridC</code> to <code>g[:]</code>, it retains the memory of being changed in previous iterations of the loop. I can't work out any way of reliably resetting it to the correct configuration each time.</p>\n\n<p>Edit Note: I am aware of the thread that explains copying a list but as you can see at the bottom of my for loop I have tried this with <code>gridC = g[:]</code>. The problem still persists and I cannot work out why.</p>\n"}, {"tags": ["python", "scikit-learn", "random-forest", "cross-validation"], "comments": [{"owner": {"reputation": 979, "user_id": 9316046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d0367ead53cbd76bc1e5a1aee47034d?s=128&d=identicon&r=PG&f=1", "display_name": "Stev", "link": "https://stackoverflow.com/users/9316046/stev"}, "edited": false, "score": 1, "creation_date": 1522316728, "post_id": 49544981, "comment_id": 86112829, "body": "What is the approximate split between your target classes (0,1 and 2)? And how many samples do you have?"}, {"owner": {"reputation": 979, "user_id": 9316046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d0367ead53cbd76bc1e5a1aee47034d?s=128&d=identicon&r=PG&f=1", "display_name": "Stev", "link": "https://stackoverflow.com/users/9316046/stev"}, "edited": false, "score": 1, "creation_date": 1522317287, "post_id": 49544981, "comment_id": 86113182, "body": "Also, is your data sorted by target class?"}, {"owner": {"reputation": 161, "user_id": 7775026, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-UowLE9AUu18/AAAAAAAAAAI/AAAAAAAAAA8/67iuN79xgoM/photo.jpg?sz=128", "display_name": "Evan", "link": "https://stackoverflow.com/users/7775026/evan"}, "reply_to_user": {"reputation": 979, "user_id": 9316046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d0367ead53cbd76bc1e5a1aee47034d?s=128&d=identicon&r=PG&f=1", "display_name": "Stev", "link": "https://stackoverflow.com/users/9316046/stev"}, "edited": false, "score": 0, "creation_date": 1522330797, "post_id": 49544981, "comment_id": 86122716, "body": "No the data is sorted by two deleted columns: groupID and timestamp (it is a longitudinal repeated measures dataset with around 80 individual environments monitored)"}, {"owner": {"reputation": 161, "user_id": 7775026, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-UowLE9AUu18/AAAAAAAAAAI/AAAAAAAAAA8/67iuN79xgoM/photo.jpg?sz=128", "display_name": "Evan", "link": "https://stackoverflow.com/users/7775026/evan"}, "reply_to_user": {"reputation": 979, "user_id": 9316046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d0367ead53cbd76bc1e5a1aee47034d?s=128&d=identicon&r=PG&f=1", "display_name": "Stev", "link": "https://stackoverflow.com/users/9316046/stev"}, "edited": false, "score": 0, "creation_date": 1522331177, "post_id": 49544981, "comment_id": 86123026, "body": "@Stev, there are 275,956 samples. Class 0 = 217891, class 1 = 6073, class 2 = 51992. I put this info in the OP too. good question"}, {"owner": {"reputation": 979, "user_id": 9316046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d0367ead53cbd76bc1e5a1aee47034d?s=128&d=identicon&r=PG&f=1", "display_name": "Stev", "link": "https://stackoverflow.com/users/9316046/stev"}, "edited": false, "score": 1, "creation_date": 1522331473, "post_id": 49544981, "comment_id": 86123321, "body": "<code>StratifiedKFold</code> (used in <code>cross_val_score</code>) doesn&#39;t shuffle before splitting by default. My understanding is that this means you are also trying to predict a temporal element to your data when doing cross-validation. Unlike in <code>train_test_split</code>, which randomly pulls from the dataset. As a test, try setting <code>cv=ms.StratifiedKFold(n_splits=5, shuffle=True)</code>."}, {"owner": {"reputation": 161, "user_id": 7775026, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-UowLE9AUu18/AAAAAAAAAAI/AAAAAAAAAA8/67iuN79xgoM/photo.jpg?sz=128", "display_name": "Evan", "link": "https://stackoverflow.com/users/7775026/evan"}, "reply_to_user": {"reputation": 979, "user_id": 9316046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d0367ead53cbd76bc1e5a1aee47034d?s=128&d=identicon&r=PG&f=1", "display_name": "Stev", "link": "https://stackoverflow.com/users/9316046/stev"}, "edited": false, "score": 0, "creation_date": 1522334358, "post_id": 49544981, "comment_id": 86125588, "body": "@Stev - that boosted mean accuracy score to 97%"}, {"owner": {"reputation": 979, "user_id": 9316046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d0367ead53cbd76bc1e5a1aee47034d?s=128&d=identicon&r=PG&f=1", "display_name": "Stev", "link": "https://stackoverflow.com/users/9316046/stev"}, "edited": false, "score": 1, "creation_date": 1522334582, "post_id": 49544981, "comment_id": 86125754, "body": "So all fixed? If so, great, I&#39;ll put it as an answer because it&#39;s important that people know about this behaviour."}, {"owner": {"reputation": 161, "user_id": 7775026, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-UowLE9AUu18/AAAAAAAAAAI/AAAAAAAAAA8/67iuN79xgoM/photo.jpg?sz=128", "display_name": "Evan", "link": "https://stackoverflow.com/users/7775026/evan"}, "reply_to_user": {"reputation": 979, "user_id": 9316046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d0367ead53cbd76bc1e5a1aee47034d?s=128&d=identicon&r=PG&f=1", "display_name": "Stev", "link": "https://stackoverflow.com/users/9316046/stev"}, "edited": false, "score": 0, "creation_date": 1522334992, "post_id": 49544981, "comment_id": 86126092, "body": "@Stev - Sure that is a great answer. What if i wanted to split the dataset into training/testing/validation while keeping the 80 individual environments intact? Would it be possible to add a column for groupID, and use that in the stratified k folds?"}, {"owner": {"reputation": 979, "user_id": 9316046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d0367ead53cbd76bc1e5a1aee47034d?s=128&d=identicon&r=PG&f=1", "display_name": "Stev", "link": "https://stackoverflow.com/users/9316046/stev"}, "edited": false, "score": 0, "creation_date": 1522335704, "post_id": 49544981, "comment_id": 86126576, "body": "You could try using <a href=\"http://scikit-learn.org/stable/modules/generated/sklearn.model_selection.GroupKFold.html\" rel=\"nofollow noreferrer\">GroupKFold</a>."}], "answers": [{"tags": [], "owner": {"reputation": 28829, "user_id": 3374996, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ijirj.png?s=128&g=1", "display_name": "Vivek Kumar", "link": "https://stackoverflow.com/users/3374996/vivek-kumar"}, "is_accepted": false, "score": 4, "last_activity_date": 1522320896, "creation_date": 1522320896, "answer_id": 49554266, "question_id": 49544981, "link": "https://stackoverflow.com/questions/49544981/why-does-cross-validation-rf-classification-perform-worse-than-without-cross-val/49554266#49554266", "title": "Why does cross validation RF classification perform worse than without cross validation?", "body": "<p>In the <code>train_test_split</code>, you are using 60% of data for training (<code>test_size=0.4</code>) only a single time. But in <code>cross_val_score</code> the the data will be splitted into 80% train (cv = 5) 5 times (Each time 4 folds will become the train and remaining 1 as test). </p>\n\n<p>Now you should think that 80% training data is more than 60% so the accuracy should not decrease. But there is one more thing to notice here.</p>\n\n<p>The <code>train_test_split</code> will not stratify the splits by default, but it will do in <code>cross_val_score</code>. Stratification is keeping the ratio of classes (targets) same in each fold. So most probably, its happening that the ratio of targets is not maintained in the train_test_split which leads to over-fitting of the classifier and hence this high score.</p>\n\n<p>I would suggest to take the cross_val_score as final score.</p>\n"}, {"tags": [], "owner": {"reputation": 979, "user_id": 9316046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d0367ead53cbd76bc1e5a1aee47034d?s=128&d=identicon&r=PG&f=1", "display_name": "Stev", "link": "https://stackoverflow.com/users/9316046/stev"}, "is_accepted": true, "score": 5, "last_activity_date": 1522336601, "creation_date": 1522336601, "answer_id": 49559631, "question_id": 49544981, "link": "https://stackoverflow.com/questions/49544981/why-does-cross-validation-rf-classification-perform-worse-than-without-cross-val/49559631#49559631", "title": "Why does cross validation RF classification perform worse than without cross validation?", "body": "<p>Normally I would agree with Vivek and tell you to trust your cross-validation.</p>\n\n<p>However, some level of CV is inherent in a random forest because each tree is grown from a bootstrapped sample, so you shouldn\u2019t expect to see such a large reduction in accuracy when running cross-validation. I suspect your problem is due to some sort of time- or location-dependency in your data sorting. </p>\n\n<p>When you use <code>train_test_split</code>, data is drawn randomly from the dataset, so all 80 of your environments are likely to be present in your train and test datasets. However, when you split using the default options for CV, I believe that each of the folds is drawn in order, so each of your environments is not present within every fold (assuming your data is ordered by environment). This leads to a lower accuracy because you are predicting one environment using data from another.</p>\n\n<p>The simple solution is to set <code>cv=ms.StratifiedKFold(n_splits=5, shuffle=True)</code>.</p>\n\n<p>I have run into this problem several times before when using concatenated datasets and there must be hundreds of others who have and haven\u2019t realised what the issue is. The idea of the default behaviour is to maintain order in a time series (from what I have seen in GitHub discussions).</p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 11757036, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-88kinwmCRpc/AAAAAAAAAAI/AAAAAAABAXc/5U5nixA-nP0/photo.jpg?sz=128", "display_name": "Adrian", "link": "https://stackoverflow.com/users/11757036/adrian"}, "is_accepted": false, "score": 2, "last_activity_date": 1562765016, "creation_date": 1562765016, "answer_id": 56971710, "question_id": 49544981, "link": "https://stackoverflow.com/questions/49544981/why-does-cross-validation-rf-classification-perform-worse-than-without-cross-val/56971710#56971710", "title": "Why does cross validation RF classification perform worse than without cross validation?", "body": "<p>Your data likely has some inherent order to it. Change \"shuffle\" to true when you are doing CV.</p>\n"}], "owner": {"reputation": 161, "user_id": 7775026, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-UowLE9AUu18/AAAAAAAAAAI/AAAAAAAAAA8/67iuN79xgoM/photo.jpg?sz=128", "display_name": "Evan", "link": "https://stackoverflow.com/users/7775026/evan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1422, "favorite_count": 0, "accepted_answer_id": 49559631, "answer_count": 3, "score": 4, "last_activity_date": 1562765016, "creation_date": 1522274977, "last_edit_date": 1522331213, "question_id": 49544981, "link": "https://stackoverflow.com/questions/49544981/why-does-cross-validation-rf-classification-perform-worse-than-without-cross-val", "title": "Why does cross validation RF classification perform worse than without cross validation?", "body": "<p>I am puzzled why a Random Forest classification model without cross-validation yields a mean accuracy score of .996, but with 5 fold cross-validation, the model's mean accuracy score is .687. </p>\n\n<p>There are 275,956 samples. Class 0 = 217891, class 1 = 6073, class 2 = 51992</p>\n\n<p>I am trying to predict the \"TARGET\" column, which is 3 classes [0,1,2]:</p>\n\n<pre><code>data.head()\nbottom_temperature  bottom_humidity top_temperature top_humidity    external_temperature    external_humidity   weight  TARGET  \n26.35   42.94   27.15   40.43   27.19   0.0  0.0    1   \n36.39   82.40   33.39   49.08   29.06   0.0  0.0    1   \n36.32   73.74   33.84   42.41   21.25   0.0  0.0    1   \n</code></pre>\n\n<p>From the docs, the data is split into training and test</p>\n\n<pre><code># link to docs http://scikit-learn.org/stable/modules/cross_validation.html\nfrom sklearn.model_selection import train_test_split\nfrom sklearn import datasets\nfrom sklearn import svm\n\n# Create a list of the feature column's names\nfeatures = data.columns[:7]\n\n# View features\nfeatures\nOut[]: Index([u'bottom_temperature', u'bottom_humidity', u'top_temperature',\n       u'top_humidity', u'external_temperature', u'external_humidity',\n       u'weight'],\n      dtype='object')\n\n\n#split data\nX_train, X_test, y_train, y_test = train_test_split(data[features], data.TARGET, test_size=0.4, random_state=0)\n\n#build model\nclf = RandomForestClassifier(n_jobs=2, random_state=0)\nclf.fit(X_train, y_train)\n\n#predict\npreds = clf.predict(X_test)\n\n#accuracy of predictions\naccuracy = accuracy_score(y_test, preds)\nprint('Mean accuracy score:', accuracy)\n\n('Mean accuracy score:', 0.96607267423425713)\n\n#verify - its the same\nclf.score(X_test, y_test)\n0.96607267423425713\n</code></pre>\n\n<p>Onto the cross validation:</p>\n\n<pre><code>from sklearn.model_selection import cross_val_score\nscores = cross_val_score(clf, data[features], data.TARGET, cv=5)\nprint(\"Accuracy: %0.2f (+/- %0.2f)\" % (scores.mean(), scores.std() * 2))\n\nAccuracy: 0.69 (+/- 0.07)\n</code></pre>\n\n<p>It is much lower! </p>\n\n<p>And to verify a second way:</p>\n\n<pre><code>#predict with CV\n# http://scikit-learn.org/stable/modules/generated/sklearn.model_selection.cross_val_predict.html#sklearn.model_selection.cross_val_predict\nfrom sklearn.model_selection import cross_val_predict\npredicted = cross_val_predict(clf, data[features], data.queen3, cv=5)\nmetrics.accuracy_score(data.queen3, predicted) \n\nOut[]: 0.68741031178883594\n</code></pre>\n\n<p>From my understanding, Cross validation should not decrease the accuracy of predictions by this amount, but improve the model's prediction because the model has seen a \"better\" representation of all the data.  </p>\n"}, {"tags": ["python", "django", "python-3.x", "django-channels"], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 8469721, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22faa24afc9e636482155801686078f5?s=128&d=identicon&r=PG&f=1", "display_name": "katrinaathedvig", "link": "https://stackoverflow.com/users/8469721/katrinaathedvig"}, "edited": false, "score": 0, "creation_date": 1522276516, "post_id": 49545094, "comment_id": 86098112, "body": "Thanks tel! I&#39;ve tried adding bufsize=1 and it still doesn&#39;t seem to work. I&#39;ve noticed that if I have both yowzer and the readline logging going, the yowzer line doesn&#39;t get logged either."}, {"owner": {"reputation": 41, "user_id": 8469721, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22faa24afc9e636482155801686078f5?s=128&d=identicon&r=PG&f=1", "display_name": "katrinaathedvig", "link": "https://stackoverflow.com/users/8469721/katrinaathedvig"}, "edited": false, "score": 0, "creation_date": 1522279263, "post_id": 49545094, "comment_id": 86098841, "body": "Thanks tel! I tried running your example script with &#39;dd if=/dev/zero of=/dev/stdout&#39; (my command is a long-running process) and it still seems to hang. Is there no way to get output before the command is done running?"}, {"owner": {"reputation": 11128, "user_id": 425458, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/m6jHW.png?s=128&g=1", "display_name": "tel", "link": "https://stackoverflow.com/users/425458/tel"}, "reply_to_user": {"reputation": 41, "user_id": 8469721, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22faa24afc9e636482155801686078f5?s=128&d=identicon&r=PG&f=1", "display_name": "katrinaathedvig", "link": "https://stackoverflow.com/users/8469721/katrinaathedvig"}, "edited": false, "score": 0, "creation_date": 1522282204, "post_id": 49545094, "comment_id": 86099598, "body": "@katrinaathedvig the thing about the <code>dd if=&#47;dev&#47;zero of=&#47;dev&#47;stdout</code> command is that, even if you just run it in a terminal, it won&#39;t produce any output whatsoever until it either dies or receives a signal (ie <code>TERM</code>). So of course a Python script won&#39;t be able to log the output in real time, since the output doesn&#39;t exist until the command is finished. If that&#39;s the kind of problem you&#39;re running into, see the section under &quot;If that&#39;s still not working&quot; in my answer above"}, {"owner": {"reputation": 41, "user_id": 8469721, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22faa24afc9e636482155801686078f5?s=128&d=identicon&r=PG&f=1", "display_name": "katrinaathedvig", "link": "https://stackoverflow.com/users/8469721/katrinaathedvig"}, "edited": false, "score": 0, "creation_date": 1522284887, "post_id": 49545094, "comment_id": 86100238, "body": "Ah, I tested it out with count=500 before running it without, and somehow didn&#39;t notice the difference in output. The main command I&#39;m running does generate output before it finishes though."}, {"owner": {"reputation": 81, "user_id": 5555593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0105ec24e03e62fb1b65b85be288eed?s=128&d=identicon&r=PG&f=1", "display_name": "mario", "link": "https://stackoverflow.com/users/5555593/mario"}, "edited": false, "score": 1, "creation_date": 1586956779, "post_id": 49545094, "comment_id": 108319387, "body": "If your command is a python script (<code>command = [&#39;python&#39;,&#39;myscript.py&#39;]</code>), and you can&#39;t / don&#39;t want to provide the keyword argument <code>flush=True</code> to all print statements, you can try using the unbuffered command line option for python <code>command = [&#39;python&#39;,&#39;-u&#39;,&#39;myscript.py&#39;]</code>"}], "tags": [], "owner": {"reputation": 11128, "user_id": 425458, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/m6jHW.png?s=128&g=1", "display_name": "tel", "link": "https://stackoverflow.com/users/425458/tel"}, "is_accepted": true, "score": 4, "last_activity_date": 1522282348, "last_edit_date": 1522282348, "creation_date": 1522275579, "answer_id": 49545094, "question_id": 49544927, "link": "https://stackoverflow.com/questions/49544927/realtime-output-from-subprocess-in-python/49545094#49545094", "title": "Realtime output from subprocess in Python", "body": "<p>Getting (or rather, not getting) real time output is a perennial annoyance when calling subprocesses in Python. See <a href=\"http://stackoverflow.com/a/17698359/425458\">this question</a> for an in-depth discussion, but the short version is that adding the keyword arg <code>bufsize=1</code> to the <code>Popen</code> call may be the secret sauce you need.</p>\n\n<p>Also, why do you have <code>time.sleep(10)</code>? You do realize that means that you'll have to wait 10 seconds in between each line getting logged, right? Try restructuring the calls you're making to read the output. Assuming you're using Python 3, try this:</p>\n\n<pre><code>from subprocess import PIPE, Popen\n\nwith Popen(command, shell=True, stdout=PIPE, bufsize=1) as sp:\n    for line in sp.stdout:\n        logging.critical(line)\n</code></pre>\n\n<p>I just tested the above code and can confirm it works. <a href=\"https://repl.it/@telamonian/realtimesubprocesslogging\" rel=\"nofollow noreferrer\">Try it out yourself here</a>. The linked test version prints a timestamp before each line of the log.</p>\n\n<h3>If that's still not working</h3>\n\n<p>There's nothing you can do in the Python script if the subprocess you're calling doesn't flush it's output on a regular basis. You mentioned Django, right? Is the output you're trying to log being produced via standard Python <code>print()</code> calls? If so, you can modify them to flush more aggressively:</p>\n\n<pre><code>print(s, flush=True)\n</code></pre>\n\n<p>Every <a href=\"http://www.cplusplus.com/reference/cstdio/fflush/?kw=fflush\" rel=\"nofollow noreferrer\">other</a> <a href=\"http://www.cplusplus.com/reference/ostream/flush-free/\" rel=\"nofollow noreferrer\">language</a> I've worked with also has an equivalent flush command, so (assuming you have access to/can modify the source of the subprocess) you should be able to make this work.</p>\n"}], "owner": {"reputation": 41, "user_id": 8469721, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22faa24afc9e636482155801686078f5?s=128&d=identicon&r=PG&f=1", "display_name": "katrinaathedvig", "link": "https://stackoverflow.com/users/8469721/katrinaathedvig"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3168, "favorite_count": 0, "accepted_answer_id": 49545094, "answer_count": 1, "score": 3, "last_activity_date": 1522798935, "creation_date": 1522274700, "last_edit_date": 1522798935, "question_id": 49544927, "link": "https://stackoverflow.com/questions/49544927/realtime-output-from-subprocess-in-python", "title": "Realtime output from subprocess in Python", "body": "<p>I am running a Django webserver, and am trying to print the output of a subprocess in real-time to the log. If I commend out the readline line and uncomment the yowzer line, I get the desired stream of logged output, but as soon as I try to run this as-is I get no output. What am I doing wrong? All the results I can find seem to suggest that this would work as-is.</p>\n\n<pre><code>sp = subprocess.Popen(command, shell=True, stdout=subprocess.PIPE)\n\nwhile sp.poll() is None:\n    logging.critical(sp.stdout.readline())\n    #logging.critical('yowzer')\n    time.sleep(10)\n</code></pre>\n\n<p>Thank you!</p>\n\n<p><strong>[edit April 3]</strong> It turns out the issue wasn't that the command was long-running, but rather that I was using a semicolon to concat a 'su user' command with the main command. Removing the su solved the issue.</p>\n"}, {"tags": ["python", "pandas", "dataframe", "stocks"], "comments": [{"owner": {"reputation": 251, "user_id": 3918707, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2da4c58483b34d3284fafe595a4d525d?s=128&d=identicon&r=PG&f=1", "display_name": "revendar", "link": "https://stackoverflow.com/users/3918707/revendar"}, "edited": false, "score": 0, "creation_date": 1522867321, "post_id": 49544923, "comment_id": 86325571, "body": "One solution is to resample the data to higher timeframe and merge(pandas.DataFrame.merge) to the 1 minute Dataframe. This is better in performance, thought not a perfect solution."}], "owner": {"reputation": 251, "user_id": 3918707, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2da4c58483b34d3284fafe595a4d525d?s=128&d=identicon&r=PG&f=1", "display_name": "revendar", "link": "https://stackoverflow.com/users/3918707/revendar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1244, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1522276343, "creation_date": 1522274695, "last_edit_date": 1522276343, "question_id": 49544923, "link": "https://stackoverflow.com/questions/49544923/python-pandas-calculate-atr-on-higher-timeframe-without-resampling", "title": "Python pandas calculate ATR on higher timeframe without resampling", "body": "<p>I'm having a dataframe of 1min stock data. I want to calculate AverageTruerange indicator of a higher time frame without respampling the data. I came up with the below solution, however it is slow. </p>\n\n<p>tf - higher time frame, n = lookback for ATR, OHLC gives higher timeframe candles.</p>\n\n<pre><code>def ATR(df, tf, n):\n  ha_o = 'open_' + str(tf)\n  ha_h = 'high_' + str(tf)\n  ha_l = 'low_' + str(tf)\n  ha_c = 'close_' + str(tf)\n  df = OHLC(df, tf, n)\n  df['p_close'] = df[ha_c].shift(tf)\n  TR = df[ha_h] - df[ha_l]\n  df['TR'] = TR\n  df['TR_avg'] = np.nan\n  atr_label = 'ATR_' + str(tf) + '_' + str(n)\n  df[atr_label] = np.nan\n  i = tf*n\n  while i &lt;= df.index[-1]:\n      TR_sum = 0\n      j = 0\n      while j &lt; n:\n          TR_sum += TR.at[i-j*tf]\n          j += 1\n      TR_sum /= n\n      df.at[(i, 'TR_avg')] = TR_sum\n      df.at[(i, atr_label)] = (TR.at[i] + (n-1)*df.at[(i-tf, 'TR_avg')])/n\n      i = i + 1\n  return df\n</code></pre>\n\n<p>I have seen below pandas ATR function which works well on 1 minute. However I want to calculate on 10/15 minute.</p>\n\n<pre><code>def ATR(df, tf, n):\n  i = 0\n  TR_l = [0]\n  while i &lt; df.index[-1]:\n      TR = max(df.get_value(i + 1, 'high'), df.get_value(i, 'close')) - min(df.get_value(i + 1, 'low'), df.get_value(i, 'close'))\n      TR_l.append(TR)\n      i = i + 1\n  df['ATR_' + str(tf) + '_' + str(n)] = Series(TR_l).ewm(ignore_na=False,span=1,min_periods=tf*n,adjust=False).mean()\n  return df\n</code></pre>\n\n<p>Please help me in optimizing the function.</p>\n"}, {"tags": ["python", "html", "syntax", "writing"], "comments": [{"owner": {"reputation": 6251, "user_id": 1087479, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/fd0121a27aac567a20015792fb7cd705?s=128&d=identicon&r=PG", "display_name": "sschrass", "link": "https://stackoverflow.com/users/1087479/sschrass"}, "edited": false, "score": 1, "creation_date": 1522312583, "post_id": 49544914, "comment_id": 86109985, "body": "is it <code>open&quot;(python for beginners&#47;my_html_file.html),&quot;w&quot;)</code> or <code>open(&quot;python for beginners&#47;my_html_file.html),&quot;w&quot;)</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 9566610, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/--QBohOBlzy4/AAAAAAAAAAI/AAAAAAAAADY/mO3vyOYcd3Q/photo.jpg?sz=128", "display_name": "Marlo Jones", "link": "https://stackoverflow.com/users/9566610/marlo-jones"}, "edited": false, "score": 0, "creation_date": 1522275582, "post_id": 49544930, "comment_id": 86097835, "body": "omg so much i cant believe i didnt see that now im having another error code   Traceback (most recent call last):   File &quot;c:\\python fore beginners\\firstfile.py&quot;, line 3, in &lt;module&gt;     my_html_file= open(&quot;python for beginners/my_html_file.html&quot;, &quot;w&quot;) FileNotFoundError: [Errno 2] No such file or directory: &#39;python for beginners/my_html_file.html&#39;          do i need to create the file or does python create or write the file for me, thanks in advanced"}, {"owner": {"reputation": 1238, "user_id": 3049987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13670c6d7f471fa532baca3e9de8b9d6?s=128&d=identicon&r=PG&f=1", "display_name": "Tim Woocker", "link": "https://stackoverflow.com/users/3049987/tim-woocker"}, "reply_to_user": {"reputation": 63, "user_id": 9566610, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/--QBohOBlzy4/AAAAAAAAAAI/AAAAAAAAADY/mO3vyOYcd3Q/photo.jpg?sz=128", "display_name": "Marlo Jones", "link": "https://stackoverflow.com/users/9566610/marlo-jones"}, "edited": false, "score": 0, "creation_date": 1522275684, "post_id": 49544930, "comment_id": 86097861, "body": "Does the directory &#39;python for beginners&#39; exist in the folder you are running your script from?"}, {"owner": {"reputation": 63, "user_id": 9566610, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/--QBohOBlzy4/AAAAAAAAAAI/AAAAAAAAADY/mO3vyOYcd3Q/photo.jpg?sz=128", "display_name": "Marlo Jones", "link": "https://stackoverflow.com/users/9566610/marlo-jones"}, "edited": false, "score": 0, "creation_date": 1522275971, "post_id": 49544930, "comment_id": 86097938, "body": "i have a folder on my Cdrive  labeled python for beginners with nothing in it"}, {"owner": {"reputation": 1238, "user_id": 3049987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13670c6d7f471fa532baca3e9de8b9d6?s=128&d=identicon&r=PG&f=1", "display_name": "Tim Woocker", "link": "https://stackoverflow.com/users/3049987/tim-woocker"}, "reply_to_user": {"reputation": 63, "user_id": 9566610, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/--QBohOBlzy4/AAAAAAAAAAI/AAAAAAAAADY/mO3vyOYcd3Q/photo.jpg?sz=128", "display_name": "Marlo Jones", "link": "https://stackoverflow.com/users/9566610/marlo-jones"}, "edited": false, "score": 0, "creation_date": 1522276063, "post_id": 49544930, "comment_id": 86097973, "body": "If it is on your C: drive, you should use the absolute path &quot;C:\\\\python for beginners\\\\my_html_file.html&quot; instead. If you don&#39;t specify the drive on a windows machine, python will try to find the file/folder relative to the script&#39;s location."}, {"owner": {"reputation": 63, "user_id": 9566610, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/--QBohOBlzy4/AAAAAAAAAAI/AAAAAAAAADY/mO3vyOYcd3Q/photo.jpg?sz=128", "display_name": "Marlo Jones", "link": "https://stackoverflow.com/users/9566610/marlo-jones"}, "edited": false, "score": 0, "creation_date": 1522276361, "post_id": 49544930, "comment_id": 86098071, "body": "guy you are a life saver thanks it worked like a charm"}], "tags": [], "owner": {"reputation": 1238, "user_id": 3049987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13670c6d7f471fa532baca3e9de8b9d6?s=128&d=identicon&r=PG&f=1", "display_name": "Tim Woocker", "link": "https://stackoverflow.com/users/3049987/tim-woocker"}, "is_accepted": true, "score": 2, "last_activity_date": 1522274714, "creation_date": 1522274714, "answer_id": 49544930, "question_id": 49544914, "link": "https://stackoverflow.com/questions/49544914/need-help-writing-html-file/49544930#49544930", "title": "Need help writing html file", "body": "<p>You have 2 closing brackets and misplaced \" in line 3. Change it to:</p>\n\n<pre><code>my_html_file= open(\"python for beginners/my_html_file.html\", \"w\")\n</code></pre>\n\n<p>Because the path needs to be a string -> put \" before and after it.</p>\n\n<p>It says \"Syntax Error\" in the error message. This means most times that you forgot a bracket or a quotation mark.</p>\n"}], "owner": {"reputation": 63, "user_id": 9566610, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/--QBohOBlzy4/AAAAAAAAAAI/AAAAAAAAADY/mO3vyOYcd3Q/photo.jpg?sz=128", "display_name": "Marlo Jones", "link": "https://stackoverflow.com/users/9566610/marlo-jones"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 147, "favorite_count": 0, "closed_date": 1522313428, "accepted_answer_id": 49544930, "answer_count": 1, "score": 0, "last_activity_date": 1522279822, "creation_date": 1522274619, "last_edit_date": 1522279822, "question_id": 49544914, "link": "https://stackoverflow.com/questions/49544914/need-help-writing-html-file", "closed_reason": "Not suitable for this site", "title": "Need help writing html file", "body": "<p>I'm fairly new to python and I'm still learning how to code. While following a youtube video instruction on writing code, but I can't get it to work.</p>\n\n<pre><code>my_variable = \"&lt;html&gt;&lt;head&gt;&lt;tile&gt;look at this&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;h1&gt;hello world&lt;/h1&gt;&lt;/body&gt;&lt;/html&gt;\"\nmy_html_file= open\"(python for beginners/my_html_file.html),\"w\")\nmy_html_file.write(my_variable)\nmy_html_file.close()\n</code></pre>\n\n<p>and I'm getting the error message below:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>File \"c:\\python fore beginners\\firstfile.py\", line 3\n    my_html_file= open\"(python for beginners/my_html_file.html),\"w\")\n                                                                ^\nSyntaxError: invalid syntax\n</code></pre>\n"}, {"tags": ["python", "django", "postgresql"], "answers": [{"tags": [], "owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "is_accepted": true, "score": 1, "last_activity_date": 1522274997, "creation_date": 1522274997, "answer_id": 49544986, "question_id": 49544913, "link": "https://stackoverflow.com/questions/49544913/best-way-to-modify-django-application-without-affecting-production-database/49544986#49544986", "title": "Best way to modify Django application without affecting production database?", "body": "<p>You can definitely use if/else statements in settings.py, or any Python code really.</p>\n\n<p>Common practice is to put values which differ, especially secrets like database passwords, in environment variables. You set these to different values in production or locally and access them in Python using <code>os.environ</code>.</p>\n"}], "owner": {"reputation": 2857, "user_id": 992432, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/41xJh.png?s=128&g=1", "display_name": "Scott Skiles", "link": "https://stackoverflow.com/users/992432/scott-skiles"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "closed_date": 1522275049, "accepted_answer_id": 49544986, "answer_count": 1, "score": 0, "last_activity_date": 1522274997, "creation_date": 1522274614, "question_id": 49544913, "link": "https://stackoverflow.com/questions/49544913/best-way-to-modify-django-application-without-affecting-production-database", "closed_reason": "Duplicate", "title": "Best way to modify Django application without affecting production database?", "body": "<p>I have a Django application that is successfully being hosted on a remote server using Nginx. The production DB is PostgreSQL. </p>\n\n<p>I have a development server where I'd like to change the code for the Django application. When I use <code>python manage.py runserver</code> for testing, I'd ideally prefer to avoid touching the production DB at all. </p>\n\n<p>This is my first time crossing this bridge. Can someone shed some light on the best practice for 'stubbing' the entire database for development? Can you do some if/else statement in <code>settings.py</code> to use SQLite? Or is there a better solution? </p>\n"}, {"tags": ["python", "firebase", "tensorflow", "scikit-learn", "flutter"], "comments": [{"owner": {"reputation": 25392, "user_id": 2927226, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53acfb6713e194462bfa7182966a9531?s=128&d=identicon&r=PG", "display_name": "rmtmckenzie", "link": "https://stackoverflow.com/users/2927226/rmtmckenzie"}, "edited": false, "score": 0, "creation_date": 1522278239, "post_id": 49544896, "comment_id": 86098581, "body": "Are you wanting to do the processing with Python on the device or on a server?"}, {"owner": {"reputation": 311, "user_id": 3634886, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uelTq.jpg?s=128&g=1", "display_name": "Victor Maricato", "link": "https://stackoverflow.com/users/3634886/victor-maricato"}, "reply_to_user": {"reputation": 25392, "user_id": 2927226, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53acfb6713e194462bfa7182966a9531?s=128&d=identicon&r=PG", "display_name": "rmtmckenzie", "link": "https://stackoverflow.com/users/2927226/rmtmckenzie"}, "edited": false, "score": 0, "creation_date": 1522372598, "post_id": 49544896, "comment_id": 86142680, "body": "What I was planning to do was do the process directly on the device, connecting it just with Firebase."}], "answers": [{"comments": [{"owner": {"reputation": 311, "user_id": 3634886, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uelTq.jpg?s=128&g=1", "display_name": "Victor Maricato", "link": "https://stackoverflow.com/users/3634886/victor-maricato"}, "edited": false, "score": 0, "creation_date": 1522277604, "post_id": 49545273, "comment_id": 86098413, "body": "I don&#39;t know Google Cloud AI yet, can I run tensorflow and scikit-learn codes on it?"}, {"owner": {"reputation": 38473, "user_id": 821657, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/qDRGg.png?s=128&g=1", "display_name": "Andrei Volgin", "link": "https://stackoverflow.com/users/821657/andrei-volgin"}, "reply_to_user": {"reputation": 311, "user_id": 3634886, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uelTq.jpg?s=128&g=1", "display_name": "Victor Maricato", "link": "https://stackoverflow.com/users/3634886/victor-maricato"}, "edited": false, "score": 0, "creation_date": 1522365715, "post_id": 49545273, "comment_id": 86141074, "body": "If you need TensorFlow, you can run it anywhere you like, e.g. Google Cloud Platform, AWS, or on your own server. And make your Flutter app talk to it like it would talk to any other server."}], "tags": [], "owner": {"reputation": 38473, "user_id": 821657, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/qDRGg.png?s=128&g=1", "display_name": "Andrei Volgin", "link": "https://stackoverflow.com/users/821657/andrei-volgin"}, "is_accepted": false, "score": 1, "last_activity_date": 1522276633, "creation_date": 1522276633, "answer_id": 49545273, "question_id": 49544896, "link": "https://stackoverflow.com/questions/49544896/is-there-a-way-to-work-with-python-e-g-tensorflow-or-sci-kit-learn-libs-in-f/49545273#49545273", "title": "Is there a way to work with Python (e.g.: TensorFlow or Sci-kit learn libs) in Flutter apps?", "body": "<p>Flutter builds the apps. The apps can communicate with any backend of your choice - or with multiple backends if you need it. For example, it can connect to Firebase for user data, etc., and connect to a different backend for machine learning (e.g. Google Cloud AI).</p>\n"}, {"comments": [{"owner": {"reputation": 180, "user_id": 2748201, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-N001KYdP11M/AAAAAAAAAAI/AAAAAAAAHBo/Z92VE4VyoCU/photo.jpg?sz=128", "display_name": "LabGecko", "link": "https://stackoverflow.com/users/2748201/labgecko"}, "edited": false, "score": 0, "creation_date": 1560528955, "post_id": 49552352, "comment_id": 99779724, "body": "To your knowledge is this still the case now?"}, {"owner": {"reputation": 1548, "user_id": 4062785, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-tKE7kQDWXvE/AAAAAAAAAAI/AAAAAAAAADc/-7J0RMSdhv4/photo.jpg?sz=128", "display_name": "Javid Noutash", "link": "https://stackoverflow.com/users/4062785/javid-noutash"}, "reply_to_user": {"reputation": 180, "user_id": 2748201, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-N001KYdP11M/AAAAAAAAAAI/AAAAAAAAHBo/Z92VE4VyoCU/photo.jpg?sz=128", "display_name": "LabGecko", "link": "https://stackoverflow.com/users/2748201/labgecko"}, "edited": false, "score": 1, "creation_date": 1560719529, "post_id": 49552352, "comment_id": 99818304, "body": "There is this new plugin that helps accessing Tensorflow Lite APIs in Flutter. <a href=\"https://pub.dev/packages/tflite\" rel=\"nofollow noreferrer\">pub.dev/packages/tflite</a> I haven&#39;t used it myself but looks promissing."}], "tags": [], "owner": {"reputation": 1548, "user_id": 4062785, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-tKE7kQDWXvE/AAAAAAAAAAI/AAAAAAAAADc/-7J0RMSdhv4/photo.jpg?sz=128", "display_name": "Javid Noutash", "link": "https://stackoverflow.com/users/4062785/javid-noutash"}, "is_accepted": true, "score": 1, "last_activity_date": 1522315347, "last_edit_date": 1592644375, "creation_date": 1522315347, "answer_id": 49552352, "question_id": 49544896, "link": "https://stackoverflow.com/questions/49544896/is-there-a-way-to-work-with-python-e-g-tensorflow-or-sci-kit-learn-libs-in-f/49552352#49552352", "title": "Is there a way to work with Python (e.g.: TensorFlow or Sci-kit learn libs) in Flutter apps?", "body": "<p>You can use your python (scikit-learn) code neither in iOS nor in Android.</p>\n<p>However, the Tensorflow is available for <a href=\"https://www.tensorflow.org/mobile/\" rel=\"nofollow noreferrer\">mobile</a>.</p>\n<p>Currently, you cannot use Tensorlfow directly in your Flutter application (with Dart), but you can use it in the native part of your mobile app and link it to your Flutter application using <a href=\"https://flutter.io/platform-channels/\" rel=\"nofollow noreferrer\">platform-channels</a></p>\n<p>Hope it helps.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 10077220, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-CAmhUCu9eOo/AAAAAAAAAAI/AAAAAAAABNU/N5A-3YJeyyU/photo.jpg?sz=128", "display_name": "Hamza Mujeeb Khan", "link": "https://stackoverflow.com/users/10077220/hamza-mujeeb-khan"}, "is_accepted": false, "score": 1, "last_activity_date": 1540793436, "creation_date": 1540793436, "answer_id": 53039686, "question_id": 49544896, "link": "https://stackoverflow.com/questions/49544896/is-there-a-way-to-work-with-python-e-g-tensorflow-or-sci-kit-learn-libs-in-f/53039686#53039686", "title": "Is there a way to work with Python (e.g.: TensorFlow or Sci-kit learn libs) in Flutter apps?", "body": "<p>Rather you can use python plus tensowflow in your jupyter notebook and train your model and then upload your custom model on the firebase ml kit and from their you can use it. </p>\n\n<p>The ml kit in the firebase is very handy in applying machine learning.</p>\n"}, {"tags": [], "owner": {"reputation": 2112, "user_id": 5250973, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0d547c8d93531b8b4fa5c7d3132d729?s=128&d=identicon&r=PG&f=1", "display_name": "Jay Dangar", "link": "https://stackoverflow.com/users/5250973/jay-dangar"}, "is_accepted": false, "score": 1, "last_activity_date": 1618815810, "creation_date": 1618815810, "answer_id": 67157359, "question_id": 49544896, "link": "https://stackoverflow.com/questions/49544896/is-there-a-way-to-work-with-python-e-g-tensorflow-or-sci-kit-learn-libs-in-f/67157359#67157359", "title": "Is there a way to work with Python (e.g.: TensorFlow or Sci-kit learn libs) in Flutter apps?", "body": "<p>Yes It's possible and quite easy to use scikit learn and other python packages such as numpy, scipy, pandas, etc using <a href=\"https://pub.dev/packages/chaquopy\" rel=\"nofollow noreferrer\">chaquopy</a> plugin for flutter.</p>\n"}], "owner": {"reputation": 311, "user_id": 3634886, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uelTq.jpg?s=128&g=1", "display_name": "Victor Maricato", "link": "https://stackoverflow.com/users/3634886/victor-maricato"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2189, "favorite_count": 2, "accepted_answer_id": 49552352, "answer_count": 4, "score": 1, "last_activity_date": 1618815810, "creation_date": 1522274532, "question_id": 49544896, "link": "https://stackoverflow.com/questions/49544896/is-there-a-way-to-work-with-python-e-g-tensorflow-or-sci-kit-learn-libs-in-f", "title": "Is there a way to work with Python (e.g.: TensorFlow or Sci-kit learn libs) in Flutter apps?", "body": "<p>I am creating an app for school and I could use some Machine Learning in it. Although, the libraries I know that I could use to process and predict my data are all for Python. </p>\n\n<p>Is there a way that I could get data from Flutter app, process it in a Python backend and return the output to the Flutter app? </p>\n\n<p>Or is there an alternative I could use on Flutter? I already plan to use Firebase in the app, is there any kind of machine learning tool for data stored on Firebase?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["python", "google-cloud-platform", "google-cloud-kms"], "answers": [{"tags": [], "owner": {"reputation": 1736, "user_id": 1342079, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/av0i6.jpg?s=128&g=1", "display_name": "Tim Dierks", "link": "https://stackoverflow.com/users/1342079/tim-dierks"}, "is_accepted": true, "score": 2, "last_activity_date": 1522279463, "last_edit_date": 1522279463, "creation_date": 1522279124, "answer_id": 49545679, "question_id": 49544888, "link": "https://stackoverflow.com/questions/49544888/is-there-a-way-to-specify-a-name-when-creating-a-key-in-google-kms-via-the-pytho/49545679#49545679", "title": "Is there a way to specify a name when creating a key in Google KMS via the Python client?", "body": "<p>The name for the new key goes into the top-level parameter called <code>cryptoKeyId</code>, and must be provided. The <code>name</code> field in the body cannot be provided when creating a key; the only mandatory field is <code>purpose</code>, which must be <code>ENCRYPT_DECRYPT</code>; then, when the response comes back, the name field will be populated.</p>\n\n<p>Here's a request I just did from the <a href=\"https://developers.google.com/apis-explorer/#search/kms/cloudkms/v1/cloudkms.projects.locations.keyRings.cryptoKeys.create\" rel=\"nofollow noreferrer\">API Explorer</a> (on a project I control with a key ring I'd already created). You can see that the new key name is provided as a URL parameter, <code>cryptoKeyId</code>. (The <code>key={YOUR_API_KEY}</code> is a redaction made by the browser API Explorer UI).</p>\n\n<p><em>Request:</em></p>\n\n<pre><code>POST https://cloudkms.googleapis.com/v1/projects/cloud-kms-demonstration/locations/global/keyRings/test01/cryptoKeys?cryptoKeyId=testKey01&amp;key={YOUR_API_KEY}\n\n{\n \"purpose\": \"ENCRYPT_DECRYPT\"\n}\n</code></pre>\n\n<p><em>Response code:</em> 200</p>\n\n<p><em>Response:</em></p>\n\n<pre><code>{\n \"name\": \"projects/cloud-kms-demonstration/locations/global/keyRings/test01/cryptoKeys/testKey01\",\n \"primary\": {\n  \"name\": \"projects/cloud-kms-demonstration/locations/global/keyRings/test01/cryptoKeys/testKey01/cryptoKeyVersions/1\",\n  \"state\": \"ENABLED\",\n  \"createTime\": \"2018-03-28T23:17:32.485044241Z\"\n },\n \"purpose\": \"ENCRYPT_DECRYPT\",\n \"createTime\": \"2018-03-28T23:17:32.485044241Z\"\n}\n</code></pre>\n"}], "owner": {"reputation": 4516, "user_id": 1350796, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/11dad08c4a88c491ccfb6ae3d91fdcb4?s=128&d=identicon&r=PG", "display_name": "Andrew", "link": "https://stackoverflow.com/users/1350796/andrew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "accepted_answer_id": 49545679, "answer_count": 1, "score": 0, "last_activity_date": 1522279463, "creation_date": 1522274511, "question_id": 49544888, "link": "https://stackoverflow.com/questions/49544888/is-there-a-way-to-specify-a-name-when-creating-a-key-in-google-kms-via-the-pytho", "title": "Is there a way to specify a name when creating a key in Google KMS via the Python client?", "body": "<p>In the documentation <a href=\"https://developers.google.com/resources/api-libraries/documentation/cloudkms/v1/python/latest/cloudkms_v1.projects.locations.keyRings.cryptoKeys.html#create\" rel=\"nofollow noreferrer\">here</a>, you cannot specify a name for the key in the Python client (name is \"Output only\"). However, with the CLI tools you can specify the name of the key (KEY_NAME here) ala <code>gcloud kms keys create KEY_NAME --location LOCATION --keyring KEYRING_NAME --purpose encryption</code>. Is this functionality not available in the Python API?</p>\n"}, {"tags": ["python", "python-3.x", "pandas", "dataframe", "group-by"], "comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1522274265, "post_id": 49544764, "comment_id": 86097329, "body": "If you use <code>keep=False</code> you will lose the row with C=3 regardless. Can you please clarify?"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 1, "creation_date": 1522274271, "post_id": 49544764, "comment_id": 86097336, "body": "Do you want <code>dff.sort_values(&#39;C&#39;, ascending=False).drop_duplicates([&#39;A&#39;, &#39;B&#39;], keep=&#39;first&#39;)</code>?"}, {"owner": {"reputation": 32007, "user_id": 5858851, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yXFCX.jpg?s=128&g=1", "display_name": "pault", "link": "https://stackoverflow.com/users/5858851/pault"}, "edited": false, "score": 0, "creation_date": 1522274273, "post_id": 49544764, "comment_id": 86097337, "body": "How do you get <code>foo  B  3</code> from the sample data you provided?"}], "answers": [{"tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": true, "score": 1, "last_activity_date": 1522274442, "creation_date": 1522274442, "answer_id": 49544864, "question_id": 49544764, "link": "https://stackoverflow.com/questions/49544764/how-to-remove-duplicates-according-to-an-extra-condition/49544864#49544864", "title": "How to remove duplicates according to an extra condition?", "body": "<p>Seems like you need overwrite your column C with <code>group</code> <code>max</code> before you drop duplicate </p>\n\n<pre><code>dff.C=dff.groupby('A').C.transform('max')\ndff.drop_duplicates(subset=['A', 'B'], keep=False)\nOut[325]: \n     A  B  C\n2  foo  B  3\n3  bar  A  1\n</code></pre>\n"}], "owner": {"reputation": 6032, "user_id": 1709738, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/AUYsZ.jpg?s=128&g=1", "display_name": "harrison4", "link": "https://stackoverflow.com/users/1709738/harrison4"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 49544864, "answer_count": 1, "score": 0, "last_activity_date": 1522274442, "creation_date": 1522273904, "question_id": 49544764, "link": "https://stackoverflow.com/questions/49544764/how-to-remove-duplicates-according-to-an-extra-condition", "title": "How to remove duplicates according to an extra condition?", "body": "<p>I have the following code to remove the duplicates of a dataframe based on a given key:</p>\n\n<p>Input:</p>\n\n<pre><code>dff = pd.DataFrame({\"A\":[\"foo\", \"foo\", \"foo\", \"bar\"],  \"B\":[\"A\",\"A\",\"B\",\"A\"], \"C\":[0,3,1,1]})\ndff.drop_duplicates(subset=['A', 'B'], keep=False)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>     A  B  C\n2  foo  B  1\n3  bar  A  1\n</code></pre>\n\n<p>But how can I group by the same key, but selecting the row which has a larger number in \"C\" column. I mean, the desired output would be:</p>\n\n<pre><code>     A  B  C\n2  foo  B  3\n3  bar  A  1\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "fractions"], "comments": [{"owner": {"reputation": 6690, "user_id": 4225229, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/2YfJM.jpg?s=128&g=1", "display_name": "JacobIRR", "link": "https://stackoverflow.com/users/4225229/jacobirr"}, "edited": false, "score": 0, "creation_date": 1522274044, "post_id": 49544755, "comment_id": 86097247, "body": "do you ever <code>break</code> the <code>while True</code> loop?"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1522274046, "post_id": 49544755, "comment_id": 86097252, "body": "The Stern-Brocot tree is infinite. Are you trying to do an infinite amount of computation?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1522274090, "post_id": 49544755, "comment_id": 86097273, "body": "You get an error while <i>compiling</i>? Or while <i>running</i> the function?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9073040"}, "edited": false, "score": 0, "creation_date": 1522274149, "post_id": 49544755, "comment_id": 86097293, "body": "I am accepting a integer value from the user and there will be that many iterations in the sequence. So, it is not infinite in my case."}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1522274251, "post_id": 49544755, "comment_id": 86097324, "body": "@FreeRadical: What value do you pass?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9073040"}, "edited": false, "score": 0, "creation_date": 1522274269, "post_id": 49544755, "comment_id": 86097335, "body": "JacoblRR, I do not. I made it an infinite while loop to continuously accept input from the user. How does that matter by the way?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9073040"}, "reply_to_user": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1522274284, "post_id": 49544755, "comment_id": 86097344, "body": "10 @ShadowRanger"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9073040"}, "edited": false, "score": 0, "creation_date": 1522274407, "post_id": 49544755, "comment_id": 86097394, "body": "@Barmer, while <code>running</code>. My apologies, I made the edit."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user9073040"}, "edited": false, "score": 0, "creation_date": 1522274563, "post_id": 49544861, "comment_id": 86097455, "body": "Got it, Thanks @ShadowRanger."}], "tags": [], "owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "is_accepted": true, "score": 1, "last_activity_date": 1522275018, "last_edit_date": 1522275018, "creation_date": 1522274419, "answer_id": 49544861, "question_id": 49544755, "link": "https://stackoverflow.com/questions/49544755/memory-error-in-python-while-using-fractions/49544861#49544861", "title": "Memory error in Python while using fractions", "body": "<p>You're adding to a <code>list</code> as you iterate it here:</p>\n\n<pre><code>for fraction in list_fractions:\n    numerator = fraction.numerator\n    denominator = fraction.denominator\n    list_fractions.append(MyFraction(denominator, 2*numerator))\n</code></pre>\n\n<p>Each time you pull one element from <code>list_fractions</code>, then add a new one (which will eventually be iterated in turn). So this loop never ends, and the <code>list</code> grows forever (or until the <code>MemoryError</code> anyway).</p>\n\n<p>Similarly, in your next loop in that function (not that you'd ever reach it), you've got a nested loop over <code>list_fractions</code>, and while it's less obvious here, it would also be infinite, because each iteration appends to <code>list_S</code> (which is a global), which was passed as the <code>list_fractions</code> argument, so they're both aliases to the same <code>list</code> (Python function calls don't copy the contents of their arguments, only the reference itself, so anything aside from rebinding <code>list_fractions</code> to a new object would modify <code>list_S</code> too).</p>\n\n<p>I don't know your intended logic, but if the goal is to only add new entries for the existing entries (and not process the added entries), a solution would be to iterate over a shallow copy of the <code>list</code>, e.g.:</p>\n\n<pre><code># list_fractions[:] returns a new list with references to the same values as\n# the original list, but unaffected by subsequent additions and removals\nfor fraction in list_fractions[:]:\n    numerator = fraction.numerator\n    denominator = fraction.denominator\n    list_fractions.append(MyFraction(denominator, 2*numerator))\n</code></pre>\n\n<p>Your nested loop will be more complicated (depending on whether the inner loop should process an updated copy of <code>list_fractions</code> or not); I'll leave you to determine the correct course of action.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9073040"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "accepted_answer_id": 49544861, "answer_count": 1, "score": 0, "last_activity_date": 1522275018, "creation_date": 1522273851, "last_edit_date": 1522274379, "question_id": 49544755, "link": "https://stackoverflow.com/questions/49544755/memory-error-in-python-while-using-fractions", "title": "Memory error in Python while using fractions", "body": "<p>I am using the stern-brocot sequence to generate fractions. These fractions have been appended to list. Now I need to modify this list of fractions as the problem requires me to satisfy 2 conditions on the fractions that exist in the list.</p>\n\n<p>1) for every simplified fraction <code>a/b</code> that is present in the list, <code>b/2a</code> must also be present.</p>\n\n<p>2) for every 2 simplified fractions <code>a/b</code> and <code>c/d</code>, <code>(a+b)/(c+d)</code>\n should also be present.</p>\n\n<p>I've written to following code to just do that.</p>\n\n<pre><code># Python program to print \n# Brocot Sequence\nfrom fractions import Fraction\n\nimport math\n\nclass MyFraction:  # This class has been defined to return unsimplified fractions as they are as the'd get simplified using the fractions module\n    def __init__(self, numerator=1, denominator=1):\n        self.numerator = numerator\n        self.denominator = denominator\n\n    def get_fraction(self):\n        return Fraction(numerator=self.numerator, denominator=self.denominator)\n\n    def __repr__(self):\n        return '{}/{}'.format(self.numerator, self.denominator)\n\n\ndef SternSequenceFunc(BrocotSequence, n):\n\n    # loop to create sequence\n    for i in range(1, n):\n\n        considered_element = BrocotSequence[i]\n        precedent = BrocotSequence[i-1]\n\n        # adding sum of considered\n        # element and it's precedent\n        BrocotSequence.append(considered_element + precedent)\n\n        # adding next considered element\n        BrocotSequence.append(considered_element)\n\n\n    # printing sequence..\n     for i in range(0, n):\n        print(BrocotSequence[i] , end=\" \")\n\n     print(\"\\n\")\n\n# Function to determine if a fraction is simplified or not\n\ndef is_simplified(frac):\n\n    if frac == Fraction(frac.numerator, frac.denominator):\n\n        return True\n\n    else:\n\n        return False\n\n# Function to modify the set to satisfy the given conditions\n\ndef modify_set(list_fractions):\n\n    # To satisfy the 1st condition\n    for fraction in list_fractions:\n        numerator = fraction.numerator\n        denominator = fraction.denominator\n        list_fractions.append(MyFraction(denominator, 2*numerator))\n\n    # To satisfy the 2nd condition\n    for fraction in list_fractions:\n        if is_simplified(fraction):\n            for frac in list_fractions:\n                if frac != fraction:\n                    if is_simplified(frac):\n                        f = MyFraction((fraction.numerator+frac.numerator), (fraction.denominator+frac.denominator))\n                        list_S.append(f)\n\nwhile True: \n\n    list_S = []\n\n    count = 0\n    # Driver code\n    n = int(input(\"Enter value of n : \"))\n    BrocotSequence = []\n\n    # adding first two element\n    # in the sequence\n    BrocotSequence.append(1)\n    BrocotSequence.append(1)\n\n    SternSequenceFunc(BrocotSequence, n)\n\n    for i in range(1, n):\n        list_S.append(Fraction(BrocotSequence[i], BrocotSequence[i-1])) # Appending the list with fractions generated from stern-brocot sequence\n\n    modify_set(list_S)\n\n    print(\"\\n Printing all fractions : \\n\")\n    for fraction in list_S:\n        count = count + 1\n        print(\"\\n\", fraction)\n\n    print(\"Number of fractions: {}\".format(count))\n</code></pre>\n\n<p>After running this code, I got a <code>Memory Error</code> while running the <code>modify_set</code> function. I don't understand why. Can anyone help me understand why and how to solve this?</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["python", "csv", "dictionary"], "comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1522273835, "post_id": 49544742, "comment_id": 86097166, "body": "Using pandas?.."}, {"owner": {"reputation": 35, "user_id": 6081695, "user_type": "registered", "profile_image": "https://graph.facebook.com/1147695358576898/picture?type=large", "display_name": "Vinil Thombrey", "link": "https://stackoverflow.com/users/6081695/vinil-thombrey"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1522273883, "post_id": 49544742, "comment_id": 86097181, "body": "I&#39;m not sure how to do this. Could you please help?"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1522273897, "post_id": 49544742, "comment_id": 86097189, "body": "I asked you if you&#39;re using pandas or not..."}, {"owner": {"reputation": 35, "user_id": 6081695, "user_type": "registered", "profile_image": "https://graph.facebook.com/1147695358576898/picture?type=large", "display_name": "Vinil Thombrey", "link": "https://stackoverflow.com/users/6081695/vinil-thombrey"}, "edited": false, "score": 0, "creation_date": 1522274120, "post_id": 49544742, "comment_id": 86097282, "body": "I&#39;m not using pandas. I am trying to convert in dict of dict format because my Dijkstra&#39;s algorithm for finding the shortest path needs to be in this format."}, {"owner": {"reputation": 35, "user_id": 6081695, "user_type": "registered", "profile_image": "https://graph.facebook.com/1147695358576898/picture?type=large", "display_name": "Vinil Thombrey", "link": "https://stackoverflow.com/users/6081695/vinil-thombrey"}, "edited": false, "score": 0, "creation_date": 1522274153, "post_id": 49544742, "comment_id": 86097295, "body": "So far i have used the following code: g = nx.read_edgelist(&#39;sample2.txt&#39;, nodetype=str, data=((&#39;weight&#39;,float),), create_using=nx.DiGraph())   graph = nx.to_dict_of_dicts(g,edge_data = None)"}, {"owner": {"reputation": 5053, "user_id": 2421391, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/980724d5505b7c2ee035c38b8adabd54?s=128&d=identicon&r=PG", "display_name": "scnerd", "link": "https://stackoverflow.com/users/2421391/scnerd"}, "edited": false, "score": 1, "creation_date": 1522274238, "post_id": 49544742, "comment_id": 86097320, "body": "Please edit your question and put this code in there. It&#39;s vital to a good question that you show what you&#39;ve already tried."}, {"owner": {"reputation": 35, "user_id": 6081695, "user_type": "registered", "profile_image": "https://graph.facebook.com/1147695358576898/picture?type=large", "display_name": "Vinil Thombrey", "link": "https://stackoverflow.com/users/6081695/vinil-thombrey"}, "edited": false, "score": 0, "creation_date": 1522274352, "post_id": 49544742, "comment_id": 86097371, "body": "Yeah I&#39;ll just post it again. Sorry that its not in a good format now since I&#39;m using stack overflow for the first time to post a question"}, {"owner": {"reputation": 5053, "user_id": 2421391, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/980724d5505b7c2ee035c38b8adabd54?s=128&d=identicon&r=PG", "display_name": "scnerd", "link": "https://stackoverflow.com/users/2421391/scnerd"}, "edited": false, "score": 0, "creation_date": 1522274410, "post_id": 49544742, "comment_id": 86097395, "body": "Also, while you&#39;re at it, explain why that code doesn&#39;t work. Does it give a wrong value, or throw an error?"}], "answers": [{"tags": [], "owner": {"reputation": 25901, "user_id": 493928, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ce109c88210d5c36c957082ddfe92d16?s=128&d=identicon&r=PG", "display_name": "khachik", "link": "https://stackoverflow.com/users/493928/khachik"}, "is_accepted": false, "score": 3, "last_activity_date": 1522274495, "creation_date": 1522274495, "answer_id": 49544882, "question_id": 49544742, "link": "https://stackoverflow.com/questions/49544742/convert-text-file-with-3-columns-into-nested-dict-of-dict-in-python/49544882#49544882", "title": "Convert text file with 3 columns into nested dict of dict in Python", "body": "<pre><code>import csv, collections\n\n\ntree = collections.defaultdict(dict)\nwith open(filepath) as fd: \n    reader = csv.reader(fd, delimiter = ' ', skipinitialspace = True)\n    for row in reader:\n        tree[row[0]][row[1]] = row[2]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 56804, "user_id": 7326738, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VgOrW.jpg?s=128&g=1", "display_name": "Ajax1234", "link": "https://stackoverflow.com/users/7326738/ajax1234"}, "is_accepted": true, "score": 1, "last_activity_date": 1522274523, "creation_date": 1522274523, "answer_id": 49544891, "question_id": 49544742, "link": "https://stackoverflow.com/questions/49544742/convert-text-file-with-3-columns-into-nested-dict-of-dict-in-python/49544891#49544891", "title": "Convert text file with 3 columns into nested dict of dict in Python", "body": "<p>You can read in your data and group by first value (FromNodeId):</p>\n\n<pre><code>import itertools, re\nfile_data = [[*a, int(b)] for *a, b in [re.split('\\s+', i.strip('\\n')) for i in open('filename.txt')]]\nlast_results = {a:dict(i[1:] for i in b) for a, b in itertools.groupby(sorted(file_data, key=lambda x:x[0]), key=lambda x:x[0])}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>{'A': {'B': 5, 'D': 3, 'E': 12, 'F': 5}, 'B': {'A': 5, 'D': 1, 'G': 2}, 'C': {'G': 2, 'E': 1, 'F': 16}, 'D': {'B': 1, 'G': 1, 'E': 1, 'A': 3}, 'E': {'A': 12, 'D': 1, 'C': 1, 'F': 2}, 'F': {'A': 5, 'E': 2, 'C': 16}, 'G': {'B': 2, 'D': 1, 'C': 2}}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5053, "user_id": 2421391, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/980724d5505b7c2ee035c38b8adabd54?s=128&d=identicon&r=PG", "display_name": "scnerd", "link": "https://stackoverflow.com/users/2421391/scnerd"}, "reply_to_user": {"reputation": 35, "user_id": 6081695, "user_type": "registered", "profile_image": "https://graph.facebook.com/1147695358576898/picture?type=large", "display_name": "Vinil Thombrey", "link": "https://stackoverflow.com/users/6081695/vinil-thombrey"}, "edited": false, "score": 0, "creation_date": 1522275800, "post_id": 49544994, "comment_id": 86097884, "body": "@VinilThombrey Please &quot;accept&quot; the answer that best solves your problem (checkmark just below the up/down arrows on the left) to make clear that your problem is solved"}, {"owner": {"reputation": 35, "user_id": 6081695, "user_type": "registered", "profile_image": "https://graph.facebook.com/1147695358576898/picture?type=large", "display_name": "Vinil Thombrey", "link": "https://stackoverflow.com/users/6081695/vinil-thombrey"}, "edited": false, "score": 0, "creation_date": 1522329536, "post_id": 49544994, "comment_id": 86121767, "body": "I just did. I didn&#39;t know about it. Thanks :)"}], "tags": [], "owner": {"reputation": 5053, "user_id": 2421391, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/980724d5505b7c2ee035c38b8adabd54?s=128&d=identicon&r=PG", "display_name": "scnerd", "link": "https://stackoverflow.com/users/2421391/scnerd"}, "is_accepted": false, "score": 0, "last_activity_date": 1522275047, "creation_date": 1522275047, "answer_id": 49544994, "question_id": 49544742, "link": "https://stackoverflow.com/questions/49544742/convert-text-file-with-3-columns-into-nested-dict-of-dict-in-python/49544994#49544994", "title": "Convert text file with 3 columns into nested dict of dict in Python", "body": "<p>You commented your original code to be:</p>\n\n<pre><code>g = nx.read_edgelist('sample2.txt', nodetype=str, data=(('Weight', int),), create_using=nx.DiGraph())\ngraph = nx.to_dict_of_dicts(g,edge_data = None)\n</code></pre>\n\n<p>Which returns something like:</p>\n\n<pre><code>{'A': {'B': {'Weight': 5},\n  'D': {'Weight': 3},\n  'E': {'Weight': 12},\n  'F': {'Weight': 5}},\n 'B': {'A': {'Weight': 5}, 'D': {'Weight': 1}, 'G': {'Weight': 2}},\n 'C': {'E': {'Weight': 1}, 'F': {'Weight': 16}, 'G': {'Weight': 2}},\n 'D': {'A': {'Weight': 3},\n  'B': {'Weight': 1},\n  'E': {'Weight': 1},\n  'G': {'Weight': 1}},\n 'E': {'A': {'Weight': 12},\n  'C': {'Weight': 1},\n  'D': {'Weight': 1},\n  'F': {'Weight': 2}},\n 'F': {'A': {'Weight': 5}, 'C': {'Weight': 16}, 'E': {'Weight': 2}},\n 'G': {'B': {'Weight': 2}, 'C': {'Weight': 2}, 'D': {'Weight': 1}}}\n</code></pre>\n\n<p>This is close, you can clean this up manually using a dictionary comprehension:</p>\n\n<pre><code>clean_graph = {a: {b: edge['Weight'] for b, edge in a_vals.items()} for a, a_vals in graph.items()}\n</code></pre>\n\n<p>Which produces:</p>\n\n<pre><code>{'A': {'B': 5, 'D': 3, 'E': 12, 'F': 5},\n 'B': {'A': 5, 'D': 1, 'G': 2},\n 'C': {'E': 1, 'F': 16, 'G': 2},\n 'D': {'A': 3, 'B': 1, 'E': 1, 'G': 1},\n 'E': {'A': 12, 'C': 1, 'D': 1, 'F': 2},\n 'F': {'A': 5, 'C': 16, 'E': 2},\n 'G': {'B': 2, 'C': 2, 'D': 1}}\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 6081695, "user_type": "registered", "profile_image": "https://graph.facebook.com/1147695358576898/picture?type=large", "display_name": "Vinil Thombrey", "link": "https://stackoverflow.com/users/6081695/vinil-thombrey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 251, "favorite_count": 0, "accepted_answer_id": 49544891, "answer_count": 3, "score": 2, "last_activity_date": 1522275047, "creation_date": 1522273799, "last_edit_date": 1522274417, "question_id": 49544742, "link": "https://stackoverflow.com/questions/49544742/convert-text-file-with-3-columns-into-nested-dict-of-dict-in-python", "title": "Convert text file with 3 columns into nested dict of dict in Python", "body": "<p>I have a txt file as below: </p>\n\n<pre><code>#FromNodeId  ToNodeId    Weight\nB   A   5\nB   D   1\nB   G   2\nA   B   5\nA   D   3\nA   E   12\nA   F   5\nD   B   1\nD   G   1\nD   E   1\nD   A   3\nG   B   2\nG   D   1\nG   C   2\nC   G   2\nC   E   1\nC   F   16\nE   A   12\nE   D   1\nE   C   1\nE   F   2\nF   A   5\nF   E   2\nF   C   16\n</code></pre>\n\n<p>I want to convert this into a graph as dict of dicts in python as below:</p>\n\n<pre><code>graph = {\n'B': {'A': 5, 'D': 1, 'G': 2},\n'A': {'B': 5, 'D': 3, 'E': 12, 'F' :5},\n'D': {'B': 1, 'G': 1, 'E': 1, 'A': 3},\n'G': {'B': 2, 'D': 1, 'C': 2},\n'C': {'G': 2, 'E': 1, 'F': 16},\n'E': {'A': 12, 'D': 1, 'C': 1, 'F': 2},\n'F': {'A': 5, 'E': 2, 'C': 16}}\n</code></pre>\n\n<p>How do I do this?</p>\n"}, {"tags": ["python", "python-3.x", "file", "variables"], "comments": [{"owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "edited": false, "score": 0, "creation_date": 1522274139, "post_id": 49544736, "comment_id": 86097288, "body": "Please provide a short, <b>complete</b> program that demonstrates the problem. Without being able to reproduce the problem, we can only guess. See <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> for more info."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1522274234, "post_id": 49544736, "comment_id": 86097318, "body": "If none of the lines match the condition <code>name == details[0]</code>, you never set <code>realName</code>, so you&#39;ll get that error."}], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 9565041, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-04oPFaZof2A/AAAAAAAAAAI/AAAAAAAAAIY/Wl9GIqnRY58/photo.jpg?sz=128", "display_name": "sean", "link": "https://stackoverflow.com/users/9565041/sean"}, "edited": false, "score": 0, "creation_date": 1522274606, "post_id": 49544852, "comment_id": 86097468, "body": "Even when entering 100% correct username&#39;s, I get unknown user. Any thoughts?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 61, "user_id": 9565041, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-04oPFaZof2A/AAAAAAAAAAI/AAAAAAAAAIY/Wl9GIqnRY58/photo.jpg?sz=128", "display_name": "sean", "link": "https://stackoverflow.com/users/9565041/sean"}, "edited": false, "score": 0, "creation_date": 1522274760, "post_id": 49544852, "comment_id": 86097535, "body": "I suggest you add a print statement to the loop so you can see what <code>details[0]</code> is."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 61, "user_id": 9565041, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-04oPFaZof2A/AAAAAAAAAAI/AAAAAAAAAIY/Wl9GIqnRY58/photo.jpg?sz=128", "display_name": "sean", "link": "https://stackoverflow.com/users/9565041/sean"}, "edited": false, "score": 0, "creation_date": 1522274781, "post_id": 49544852, "comment_id": 86097543, "body": "Can you post a sample of the file contents?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 61, "user_id": 9565041, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-04oPFaZof2A/AAAAAAAAAAI/AAAAAAAAAIY/Wl9GIqnRY58/photo.jpg?sz=128", "display_name": "sean", "link": "https://stackoverflow.com/users/9565041/sean"}, "edited": false, "score": 0, "creation_date": 1522274798, "post_id": 49544852, "comment_id": 86097553, "body": "Is there a space after the comma in the file?"}, {"owner": {"reputation": 61, "user_id": 9565041, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-04oPFaZof2A/AAAAAAAAAAI/AAAAAAAAAIY/Wl9GIqnRY58/photo.jpg?sz=128", "display_name": "sean", "link": "https://stackoverflow.com/users/9565041/sean"}, "edited": false, "score": 0, "creation_date": 1522274922, "post_id": 49544852, "comment_id": 86097597, "body": "I added a &#39;print(&quot;user found&#39; after the if statement to see if it does match, and it will print user found confirming that the log in is correct however the name is still unknown user in the print statement @Barmar"}, {"owner": {"reputation": 61, "user_id": 9565041, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-04oPFaZof2A/AAAAAAAAAAI/AAAAAAAAAIY/Wl9GIqnRY58/photo.jpg?sz=128", "display_name": "sean", "link": "https://stackoverflow.com/users/9565041/sean"}, "edited": false, "score": 0, "creation_date": 1522274956, "post_id": 49544852, "comment_id": 86097616, "body": "<a href=\"https://gyazo.com/ab4da4f8527cea030d009dd7e3dc3ca8\" rel=\"nofollow noreferrer\">gyazo.com/ab4da4f8527cea030d009dd7e3dc3ca8</a> -screenshot of the program in action"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 61, "user_id": 9565041, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-04oPFaZof2A/AAAAAAAAAAI/AAAAAAAAAIY/Wl9GIqnRY58/photo.jpg?sz=128", "display_name": "sean", "link": "https://stackoverflow.com/users/9565041/sean"}, "edited": false, "score": 0, "creation_date": 1522274988, "post_id": 49544852, "comment_id": 86097632, "body": "Where is <code>user found</code>?"}, {"owner": {"reputation": 61, "user_id": 9565041, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-04oPFaZof2A/AAAAAAAAAAI/AAAAAAAAAIY/Wl9GIqnRY58/photo.jpg?sz=128", "display_name": "sean", "link": "https://stackoverflow.com/users/9565041/sean"}, "edited": false, "score": 0, "creation_date": 1522275030, "post_id": 49544852, "comment_id": 86097646, "body": "<a href=\"https://gyazo.com/478254d6dd851b2301979b61643b7eae\" rel=\"nofollow noreferrer\">gyazo.com/478254d6dd851b2301979b61643b7eae</a> - that is the document"}, {"owner": {"reputation": 61, "user_id": 9565041, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-04oPFaZof2A/AAAAAAAAAAI/AAAAAAAAAIY/Wl9GIqnRY58/photo.jpg?sz=128", "display_name": "sean", "link": "https://stackoverflow.com/users/9565041/sean"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1522275064, "post_id": 49544852, "comment_id": 86097655, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/167767/discussion-between-sean-and-barmar\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": false, "score": 0, "last_activity_date": 1522274401, "creation_date": 1522274401, "answer_id": 49544852, "question_id": 49544736, "link": "https://stackoverflow.com/questions/49544736/python-cant-make-variable-from-file/49544852#49544852", "title": "Python can&#39;t make variable from file", "body": "<p>This will happen if <code>name</code> doesn't match the first field of any of the lines, since you only set <code>realName</code> when you find a match. You can provide a default when this happens using an <code>else:</code> clause:</p>\n\n<pre><code>def userMenu(name):\n    fileOpen=(\"details.txt\",\"r\")\n    for line in fileOpen:\n        details=line.strip().split(\",\")\n        if name==details[0]:\n            realName=details[1] \n            break\n    else:\n        realName = \"Unknown user\"\n    print(\"hi {0}\".format(realName))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 685, "user_id": 9470078, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-FA8PnJ768P8/AAAAAAAAAAI/AAAAAAAAARQ/9QBFMw1uCfA/photo.jpg?sz=128", "display_name": "Monolith", "link": "https://stackoverflow.com/users/9470078/monolith"}, "is_accepted": false, "score": 1, "last_activity_date": 1522277912, "creation_date": 1522277912, "answer_id": 49545493, "question_id": 49544736, "link": "https://stackoverflow.com/questions/49544736/python-cant-make-variable-from-file/49545493#49545493", "title": "Python can&#39;t make variable from file", "body": "<p>You are getting this error because of the if statement isn't running. Making a variable open(\"filename\", \"r\") does not make that variable a string. It is simply a pointer to a class. Instead, you should do:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>fileOpen=(\"details.txt\",\"r\")\nID=input(\"What is your ID?\")\nfor line in fileOpen.read(): # You need to add the .read() method to make the fileopen variable a string\n    details=line.strip().split(\",\")\n    if ID==details[0]: # id will always match something inside the file\n        realName=details[1] \n        break\nprint(\"Hi, {0}\".format(realName)) \n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 9565041, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-04oPFaZof2A/AAAAAAAAAAI/AAAAAAAAAIY/Wl9GIqnRY58/photo.jpg?sz=128", "display_name": "sean", "link": "https://stackoverflow.com/users/9565041/sean"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1522277912, "creation_date": 1522273780, "last_edit_date": 1522274422, "question_id": 49544736, "link": "https://stackoverflow.com/questions/49544736/python-cant-make-variable-from-file", "title": "Python can&#39;t make variable from file", "body": "<p>From a file I have an ID in the first column, then the person's name in the second column of the text and the IDs/usernames are separated by lines. I'm trying to make a variable of the second column of the file, the one next to the correct ID however when I attempt this, I get an error stating that the local variable 'realName' referenced before assignment. I have no global variables with in my code as well. Any feedback is appreciated!</p>\n\n<pre><code>fileOpen=(\"details.txt\",\"r\")\nID=input(\"What is your ID?\")\nfor line in fileOpen:\n    details=line.strip().split(\",\")\n    if ID==details[0]:#id will always match something inside the file\n        realName=details[1] \n        break\nprint(\"Hi, {0}\".format(realName)) \n</code></pre>\n"}, {"tags": ["python", "r", "pandas", "data.table", "networkx"], "comments": [{"owner": {"reputation": 1154, "user_id": 9565387, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-d6Y3JBWunV4/AAAAAAAAAAI/AAAAAAAAAEk/3020ZVdwdFU/photo.jpg?sz=128", "display_name": "ducminh", "link": "https://stackoverflow.com/users/9565387/ducminh"}, "edited": false, "score": 0, "creation_date": 1522273837, "post_id": 49544702, "comment_id": 86097167, "body": "How do you want to create the network from the dataframe? Could you provide an example?"}, {"owner": {"reputation": 122, "user_id": 6784445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0686c759db8475833c4e93266921f09?s=128&d=identicon&r=PG&f=1", "display_name": "hm6", "link": "https://stackoverflow.com/users/6784445/hm6"}, "reply_to_user": {"reputation": 1154, "user_id": 9565387, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-d6Y3JBWunV4/AAAAAAAAAAI/AAAAAAAAAEk/3020ZVdwdFU/photo.jpg?sz=128", "display_name": "ducminh", "link": "https://stackoverflow.com/users/9565387/ducminh"}, "edited": false, "score": 0, "creation_date": 1522331395, "post_id": 49544702, "comment_id": 86123246, "body": "@ducminh I have edited the question."}, {"owner": {"reputation": 1154, "user_id": 9565387, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-d6Y3JBWunV4/AAAAAAAAAAI/AAAAAAAAAEk/3020ZVdwdFU/photo.jpg?sz=128", "display_name": "ducminh", "link": "https://stackoverflow.com/users/9565387/ducminh"}, "edited": false, "score": 0, "creation_date": 1522334536, "post_id": 49544702, "comment_id": 86125721, "body": "Your question is still unclear. How is the graph related to the dataframe? What do you mean by clusters? Connected components of the graph?"}, {"owner": {"reputation": 122, "user_id": 6784445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0686c759db8475833c4e93266921f09?s=128&d=identicon&r=PG&f=1", "display_name": "hm6", "link": "https://stackoverflow.com/users/6784445/hm6"}, "reply_to_user": {"reputation": 1154, "user_id": 9565387, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-d6Y3JBWunV4/AAAAAAAAAAI/AAAAAAAAAEk/3020ZVdwdFU/photo.jpg?sz=128", "display_name": "ducminh", "link": "https://stackoverflow.com/users/9565387/ducminh"}, "edited": false, "score": 0, "creation_date": 1522344937, "post_id": 49544702, "comment_id": 86132136, "body": "@ducminh yes, by clusters I mean connected components. Thanks"}, {"owner": {"reputation": 1154, "user_id": 9565387, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-d6Y3JBWunV4/AAAAAAAAAAI/AAAAAAAAAEk/3020ZVdwdFU/photo.jpg?sz=128", "display_name": "ducminh", "link": "https://stackoverflow.com/users/9565387/ducminh"}, "edited": false, "score": 0, "creation_date": 1522345001, "post_id": 49544702, "comment_id": 86132172, "body": "But how do you want to construct the graph from the dataframe? Or do you just want to find the connected components of a given graph?"}, {"owner": {"reputation": 122, "user_id": 6784445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0686c759db8475833c4e93266921f09?s=128&d=identicon&r=PG&f=1", "display_name": "hm6", "link": "https://stackoverflow.com/users/6784445/hm6"}, "reply_to_user": {"reputation": 1154, "user_id": 9565387, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-d6Y3JBWunV4/AAAAAAAAAAI/AAAAAAAAAEk/3020ZVdwdFU/photo.jpg?sz=128", "display_name": "ducminh", "link": "https://stackoverflow.com/users/9565387/ducminh"}, "edited": false, "score": 0, "creation_date": 1522359237, "post_id": 49544702, "comment_id": 86139016, "body": "@ducminh As you can see from form the third line of sample code, I am creating the graphs based on the two column of a dataframe. each row represent an edge in the graph and unique elements in each column are nodes of the graph."}], "answers": [{"comments": [{"owner": {"reputation": 122, "user_id": 6784445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0686c759db8475833c4e93266921f09?s=128&d=identicon&r=PG&f=1", "display_name": "hm6", "link": "https://stackoverflow.com/users/6784445/hm6"}, "edited": false, "score": 0, "creation_date": 1522331993, "post_id": 49547422, "comment_id": 86123760, "body": "In your example, how cluster is related to other two columns?"}, {"owner": {"reputation": 724, "user_id": 5321744, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9XfXF.png?s=128&g=1", "display_name": "michaelg", "link": "https://stackoverflow.com/users/5321744/michaelg"}, "reply_to_user": {"reputation": 122, "user_id": 6784445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0686c759db8475833c4e93266921f09?s=128&d=identicon&r=PG&f=1", "display_name": "hm6", "link": "https://stackoverflow.com/users/6784445/hm6"}, "edited": false, "score": 0, "creation_date": 1522332781, "post_id": 49547422, "comment_id": 86124334, "body": "As far as I understand your question, you are asking about adding a new column to the original dataframe. Here, I just used a random cluster number. Do your question is related to the choice of the clustering algorithm instead?"}, {"owner": {"reputation": 122, "user_id": 6784445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0686c759db8475833c4e93266921f09?s=128&d=identicon&r=PG&f=1", "display_name": "hm6", "link": "https://stackoverflow.com/users/6784445/hm6"}, "edited": false, "score": 0, "creation_date": 1522345119, "post_id": 49547422, "comment_id": 86132235, "body": "all connected components of the first two columns create a cluster. Like the the example provided in the question. Thanks"}, {"owner": {"reputation": 724, "user_id": 5321744, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9XfXF.png?s=128&g=1", "display_name": "michaelg", "link": "https://stackoverflow.com/users/5321744/michaelg"}, "reply_to_user": {"reputation": 122, "user_id": 6784445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0686c759db8475833c4e93266921f09?s=128&d=identicon&r=PG&f=1", "display_name": "hm6", "link": "https://stackoverflow.com/users/6784445/hm6"}, "edited": false, "score": 0, "creation_date": 1522345854, "post_id": 49547422, "comment_id": 86132597, "body": "I cannot help you reproduce the same result without understanding the clustering algorithm used. Your example doesn&#39;t make any sense to me."}, {"owner": {"reputation": 122, "user_id": 6784445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0686c759db8475833c4e93266921f09?s=128&d=identicon&r=PG&f=1", "display_name": "hm6", "link": "https://stackoverflow.com/users/6784445/hm6"}, "edited": false, "score": 0, "creation_date": 1522359381, "post_id": 49547422, "comment_id": 86139068, "body": "Every row in dataframe is an edge of the graph and every element from col1, col2 is a node."}, {"owner": {"reputation": 724, "user_id": 5321744, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9XfXF.png?s=128&g=1", "display_name": "michaelg", "link": "https://stackoverflow.com/users/5321744/michaelg"}, "reply_to_user": {"reputation": 122, "user_id": 6784445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0686c759db8475833c4e93266921f09?s=128&d=identicon&r=PG&f=1", "display_name": "hm6", "link": "https://stackoverflow.com/users/6784445/hm6"}, "edited": false, "score": 0, "creation_date": 1522374570, "post_id": 49547422, "comment_id": 86143154, "body": "Sure, but how to predict that edge (1, 11) is in cluster 1 and edge (2, 12) is in cluster 2 ?"}], "tags": [], "owner": {"reputation": 724, "user_id": 5321744, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9XfXF.png?s=128&g=1", "display_name": "michaelg", "link": "https://stackoverflow.com/users/5321744/michaelg"}, "is_accepted": false, "score": 0, "last_activity_date": 1522293263, "creation_date": 1522293263, "answer_id": 49547422, "question_id": 49544702, "link": "https://stackoverflow.com/questions/49544702/create-network-based-on-two-columns-of-a-dataframe-and-add-its-components-ids-as/49547422#49547422", "title": "Create network based on two columns of a dataframe and add its components ids as a new aggregated column", "body": "<h2>How to assign cluster number to a pandas Dataframe ?</h2>\n\n<p>For the demonstration, we will generate a dataframe:</p>\n\n<pre><code>def get_letter():\n    return random.choice(list(set(string.ascii_letters.upper())))\n\norigin = [get_letter() for i in range(100)]\ndestination = [get_letter() for i in range(100)]\n\ndf = pd.DataFrame({'origin':origin, 'destination': destination})\n</code></pre>\n\n<h2>Get the clusters</h2>\n\n<pre><code>clusters = [random.choice(range(100)) for i in range(100)]\n</code></pre>\n\n<h2>Assign the clusters as a new column of the original dataframe</h2>\n\n<pre><code>df['cluster'] = clusters\n</code></pre>\n\n<p>[out:]</p>\n\n<p><kbd>destination</kbd> <kbd>origin </kbd> <kbd>cluster </kbd><br>\n<kbd>D    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</kbd> <kbd>J&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</kbd> <kbd>53&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</kbd><br>\n <kbd>M    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</kbd> <kbd>L&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</kbd> <kbd>60&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</kbd><br>\n <kbd>K    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</kbd> \n<kbd>L&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</kbd> <kbd>3 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</kbd><br></p>\n"}, {"comments": [{"owner": {"reputation": 122, "user_id": 6784445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0686c759db8475833c4e93266921f09?s=128&d=identicon&r=PG&f=1", "display_name": "hm6", "link": "https://stackoverflow.com/users/6784445/hm6"}, "edited": false, "score": 0, "creation_date": 1522445225, "post_id": 49565595, "comment_id": 86171322, "body": "I can accept your answer if you complete it with this final line.  df[&#39;cluId&#39;] = df[&#39;col1&#39;].map(node2id)  Thanks"}], "tags": [], "owner": {"reputation": 1154, "user_id": 9565387, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-d6Y3JBWunV4/AAAAAAAAAAI/AAAAAAAAAEk/3020ZVdwdFU/photo.jpg?sz=128", "display_name": "ducminh", "link": "https://stackoverflow.com/users/9565387/ducminh"}, "is_accepted": false, "score": 1, "last_activity_date": 1522363409, "last_edit_date": 1522363409, "creation_date": 1522360590, "answer_id": 49565595, "question_id": 49544702, "link": "https://stackoverflow.com/questions/49544702/create-network-based-on-two-columns-of-a-dataframe-and-add-its-components-ids-as/49565595#49565595", "title": "Create network based on two columns of a dataframe and add its components ids as a new aggregated column", "body": "<pre><code>import networkx as nx\n\n# Create the graph from the dataframe\ng = nx.Graph()\ng.add_edges_from(df.itertuples(index=False))\n\nconnected_components = nx.connected_components(g)\n\n# Find the component id of the nodes\nnode2id = {}\nfor cid, component in enumerate(connected_components):\n    for node in component:\n        node2id[node] = cid\n</code></pre>\n\n<p>Now <code>node2id</code> is a dictionary mapping a node to its component's id. You could then generate a column based on this dict and add it to the original dataframe as in <a href=\"https://stackoverflow.com/a/49547422/9565387\">michaelg's answer</a>.</p>\n\n<p><strong>Edit</strong></p>\n\n<p>Better way to obtain the graph from the dataframe:</p>\n\n<pre><code>g = nx.from_pandas_edgelist(df, 0, 1)\n</code></pre>\n"}], "owner": {"reputation": 122, "user_id": 6784445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0686c759db8475833c4e93266921f09?s=128&d=identicon&r=PG&f=1", "display_name": "hm6", "link": "https://stackoverflow.com/users/6784445/hm6"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1145, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1522363409, "creation_date": 1522273644, "last_edit_date": 1522331327, "question_id": 49544702, "link": "https://stackoverflow.com/questions/49544702/create-network-based-on-two-columns-of-a-dataframe-and-add-its-components-ids-as", "title": "Create network based on two columns of a dataframe and add its components ids as a new aggregated column", "body": "<p>In R, I can create a network based on two columns of a dataframe and then assign its cluster membership ids as a new aggregated column to the original dataframe as shown below.</p>\n\n<pre><code>library(igraph)\nlibrary(data.table)\ng = graph_from_data_frame(df[, .(col1, col2)])\nclu = clusters(g)\ndf[, cluId := clu$membership[as.character(df[, col1])]]\n</code></pre>\n\n<p>How would you do the same operation in Python with pandas and igraph, or networkx?\nI found a similar question here but the answer provided is very slow.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/39614149/assigning-group-id-to-components-in-networkx\">Assigning Group ID to components in networkx</a></p>\n\n<p>example:</p>\n\n<p><a href=\"https://i.stack.imgur.com/OWAyu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/OWAyu.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 25, "user_id": 9566525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a30ce93ba7b92a6fd4fb06bb477b41d6?s=128&d=identicon&r=PG&f=1", "display_name": "drew", "link": "https://stackoverflow.com/users/9566525/drew"}, "edited": false, "score": 0, "creation_date": 1522275046, "post_id": 49544701, "comment_id": 86097650, "body": "Oh by the way my os is Mac OS X"}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 9566525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a30ce93ba7b92a6fd4fb06bb477b41d6?s=128&d=identicon&r=PG&f=1", "display_name": "drew", "link": "https://stackoverflow.com/users/9566525/drew"}, "edited": false, "score": 0, "creation_date": 1522276354, "post_id": 49545099, "comment_id": 86098068, "body": "oh my god, I feel so silly, that was totally the problem, it&#39;s all fixed and running great now. Thank you very much for your help!"}], "tags": [], "owner": {"reputation": 84953, "user_id": 1405065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c422b239ab1f49d3f4fcff9e5df3cf?s=128&d=identicon&r=PG", "display_name": "Blckknght", "link": "https://stackoverflow.com/users/1405065/blckknght"}, "is_accepted": true, "score": 2, "last_activity_date": 1522275607, "creation_date": 1522275607, "answer_id": 49545099, "question_id": 49544701, "link": "https://stackoverflow.com/questions/49544701/python-3-x-need-help-iterating-through-a-proxy-text-file-line-by-line/49545099#49545099", "title": "Python 3.x, need help iterating through a proxy text file line by line", "body": "<p>Your problem is with these nested loops, which don't appear to be doing what you want:</p>\n\n<pre><code>    proxy = []\n    while count &lt; 10:\n        proxy.append(proxylist[count].strip())\n        count += 1\n        for i in proxy:\n            Visiter(i)\n</code></pre>\n\n<p>The outer loop builds up the <code>proxy</code> list, adding one value each time until there are ten. After each value has been added, the inner loop iterates over the <code>proxy</code> list that has been built so far, visiting each item.</p>\n\n<p>I suspect you want to unnest the loops. That way, the <code>for</code> loop will only run after the <code>while</code> loop has completed, and so it will only visit each proxy once. Try something like this:</p>\n\n<pre><code>    proxy = []\n    while count &lt; 10:\n        proxy.append(proxylist[count].strip())\n        count += 1\n    for i in proxy:\n        Visiter(i)\n</code></pre>\n\n<p>You could simplify that into a single loop, if you want. For instance, using <code>itertools.islice</code> to handle the bounds checking, you could do:</p>\n\n<pre><code>for proxy in itertools.islice(proxylist, 10):\n    Visiter(proxy.strip())\n</code></pre>\n\n<p>You could even run that directly on the file object (since files are iterable) rather than calling <code>readlines</code> first, to read it into a list. (You might then need to add a <code>seek</code> call on the file before writing <code>\"used\"</code>, but you may need that anyway, some OSs don't allow you to mix reads and writes without seeking in between.)</p>\n"}, {"tags": [], "owner": {"reputation": 134, "user_id": 7572251, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rMJp5.jpg?s=128&g=1", "display_name": "Harry MW", "link": "https://stackoverflow.com/users/7572251/harry-mw"}, "is_accepted": false, "score": 1, "last_activity_date": 1522276531, "creation_date": 1522276531, "answer_id": 49545253, "question_id": 49544701, "link": "https://stackoverflow.com/questions/49544701/python-3-x-need-help-iterating-through-a-proxy-text-file-line-by-line/49545253#49545253", "title": "Python 3.x, need help iterating through a proxy text file line by line", "body": "<p><code>while count &lt; 10:\n    proxy.append(proxylist[count].strip())\n    count += 1\n    for i in proxy:\n        Visiter(i)\n</code></p>\n\n<p>The for loop within the while loop means that every time you hit proxy.append you'll call Visiter for <em>every</em> item already in proxy. That might explain why you're getting multiple hits per proxy.</p>\n\n<p>As far as the out of order issue, I'm not sure why readlines() isn't maintaining the line order of your file but I'd try something like:</p>\n\n<p><code>with open('filepath', 'r') as file:\n   for line in file:\n       do_stuff_with_line(line)\n</code>\nWith the above you don't need to hold the whole file in memory at once either which ca be nice for big files.</p>\n\n<p>Good luck!</p>\n"}], "owner": {"reputation": 25, "user_id": 9566525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a30ce93ba7b92a6fd4fb06bb477b41d6?s=128&d=identicon&r=PG&f=1", "display_name": "drew", "link": "https://stackoverflow.com/users/9566525/drew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 706, "favorite_count": 1, "accepted_answer_id": 49545099, "answer_count": 2, "score": 0, "last_activity_date": 1522276531, "creation_date": 1522273642, "question_id": 49544701, "link": "https://stackoverflow.com/questions/49544701/python-3-x-need-help-iterating-through-a-proxy-text-file-line-by-line", "title": "Python 3.x, need help iterating through a proxy text file line by line", "body": "<p>I'm relatively new to python, and I am trying to build a program that can visit a website using a proxy from a list of proxies in a text file, and continue doing so with each proxy in the file until they're all used. I found some code online and tweaked it to my needs, but when I run the program, the proxies are successfully used, but they don't get used in order. For whatever reason, the first proxy gets used twice in a row, then the second proxy gets used, then the first again, then third, blah blah. It doesn't go in order one by one.</p>\n\n<p>The proxies in the text file are organized as such: </p>\n\n<p>123.45.67.89:8080<br>\n987.65.43.21:8080</p>\n\n<p>And so on. Here's the code I am using:</p>\n\n<pre><code>from fake_useragent import UserAgent\nimport pyautogui\nimport webbrowser\nimport time\nimport random\nimport random\nimport requests\nfrom selenium import webdriver\nimport os\nimport re\n\nproxylisttext = 'proxylistlist.txt'\nuseragent = UserAgent()\nprofile = webdriver.FirefoxProfile()\nprofile.set_preference(\"network.proxy.type\", 1)\nprofile.set_preference(\"network.proxy_type\", 1)\n\ndef Visiter(proxy1):\n    try:\n        proxy = proxy1.split(\":\")\n        print ('Visit using proxy :',proxy1)\n        profile.set_preference(\"network.proxy.http\", proxy[0])\n        profile.set_preference(\"network.proxy.http_port\", int(proxy[1]))\n        profile.set_preference(\"network.proxy.ssl\", proxy[0])\n        profile.set_preference(\"network.proxy.ssl_port\", int(proxy[1]))\n        profile.set_preference(\"general.useragent.override\", useragent.random)\n        driver = webdriver.Firefox(firefox_profile=profile)\n        driver.get('https://www.iplocation.net/find-ip-address')\n        time.sleep(2)\n        driver.close()\n    except:\n        print('Proxy failed')\n        pass\n\ndef loadproxy():\n    try:\n        get_file = open(proxylisttext, \"r+\")\n        proxylist = get_file.readlines()\n        writeused = get_file.write('used')\n        count = 0\n        proxy = []\n        while count &lt; 10:\n            proxy.append(proxylist[count].strip())\n            count += 1\n            for i in proxy:\n                Visiter(i)\n    except IOError:\n        print (\"\\n[-] Error: Check your proxylist path\\n\")\n        sys.exit(1)\n\ndef main():\n    loadproxy()\nif __name__ == '__main__':\n    main()\n</code></pre>\n\n<p>And so as I said, this code successfully navigates to the ipchecker site using the proxy, but then it doesn't go line by line in order, the same proxy will get used multiple times. So I guess more specifically, how can I ensure the program iterates through the proxies one by one, without repeating? I have searched exhaustively for a solution, but I haven't been able to find one, so any help would be appreciated. Thank you.</p>\n"}, {"tags": ["python", "python-3.x", "azure-storage-blobs", "bytesio", "csvtoarray"], "answers": [{"comments": [{"owner": {"reputation": 415, "user_id": 8952552, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1118745558228729/picture?type=large", "display_name": "Pepin Peng", "link": "https://stackoverflow.com/users/8952552/pepin-peng"}, "edited": false, "score": 0, "creation_date": 1522274337, "post_id": 49544794, "comment_id": 86097369, "body": "hi, i did as your code, but after check the blob storage, the created testdata123 is a empty file ,,,,"}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "reply_to_user": {"reputation": 415, "user_id": 8952552, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1118745558228729/picture?type=large", "display_name": "Pepin Peng", "link": "https://stackoverflow.com/users/8952552/pepin-peng"}, "edited": false, "score": 0, "creation_date": 1522274791, "post_id": 49544794, "comment_id": 86097549, "body": "@PepinPeng: Does whatever file is referenced by <code>df</code> have anything in it? Odds are it doesn&#39;t, since your previous code (which opened it for write) would have truncated it to an empty file as a side-effect of opening it (so even though the code failed immediately after, the data was already lost)."}, {"owner": {"reputation": 415, "user_id": 8952552, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1118745558228729/picture?type=large", "display_name": "Pepin Peng", "link": "https://stackoverflow.com/users/8952552/pepin-peng"}, "edited": false, "score": 0, "creation_date": 1522274960, "post_id": 49544794, "comment_id": 86097618, "body": "hi, thanks, but i have put a print (f) just before the blob API, and i got this print out as &quot;&lt;_io.BufferedReader name=&#39;WO,1,2,3,4\\n1,600,300,400,500\\n2,200,500,100,300\\n3,10&zwnj;&#8203;0,500,200,300\\n4,300&zwnj;&#8203;,600,100,400\\n&#39;&gt;&quot;  that means after open as f, the data are still there , should i try write to it ?"}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "reply_to_user": {"reputation": 415, "user_id": 8952552, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1118745558228729/picture?type=large", "display_name": "Pepin Peng", "link": "https://stackoverflow.com/users/8952552/pepin-peng"}, "edited": false, "score": 0, "creation_date": 1522275207, "post_id": 49544794, "comment_id": 86097706, "body": "@PepinPeng: Your <code>df</code> was the actual data, not a file name. That would have been useful to know initially. Given that, you don&#39;t need <code>open</code> at all. You want <code>block_blob_service.create_blob_from_stream(&#39;flowshop&#39;, &#39;testdata123&#39;, io.BytesIO(df))</code>, possibly <code>io.BytesIO(df.encode(&#39;utf-8&#39;))</code> if <code>df</code> is a <code>str</code>. Or just skip the rigmarole, and use the API that accepts <code>bytes</code> directly: <code>create_blob_from_bytes(&#39;flowshop&#39;, &#39;testdata123&#39;, df)</code> (again, might need <code>df.encode(&#39;utf-8&#39;)</code> if <code>df</code> is <code>str</code>, not <code>bytes</code>)."}, {"owner": {"reputation": 415, "user_id": 8952552, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1118745558228729/picture?type=large", "display_name": "Pepin Peng", "link": "https://stackoverflow.com/users/8952552/pepin-peng"}, "edited": false, "score": 0, "creation_date": 1522275404, "post_id": 49544794, "comment_id": 86097774, "body": "i was struggling in the Shadow until i met your ShadowRanger, my whole days coding end with a success, thank you ,hahaha"}], "tags": [], "owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "is_accepted": true, "score": 2, "last_activity_date": 1522275357, "last_edit_date": 1522275357, "creation_date": 1522274074, "answer_id": 49544794, "question_id": 49544690, "link": "https://stackoverflow.com/questions/49544690/csv-file-convert-to-io-bytesio-object-then-stream-to-blob-storage-meets-value/49544794#49544794", "title": "csv file convert to io.BytesIO object, then stream to blob storage ,meets value type error:a bytes-like object is required, not &#39;_io.TextIOWrapper&#39;", "body": "<p>You opened <code>df</code> for write, then tried to pass the resulting file object as the initializer of <code>io.BytesIO</code>  (which is supposed to to take actual binary data, e.g. <code>b'1234'</code>). That's the cause of the <code>TypeError</code>; open files (read or write, text or binary) are not <code>bytes</code> or anything similar (<code>bytearray</code>, <code>array.array('B')</code>, <code>mmap.mmap</code>, etc.), so passing them to <code>io.BytesIO</code> makes no sense.</p>\n\n<p><s>It looks like your goal is to <em>read</em> from <code>df</code>, and you shouldn't need <code>io.BytesIO</code> at all for that. Just change the mode from (text) write, <code>'w'</code>, to binary read, <code>'rb'</code>. Then pass the resulting file object to your API directly:</p>\n\n<pre><code>with open(df, 'rb') as f:\n   block_blob_service.create_blob_from_stream('flowshop', 'testdata123', f)\n</code></pre>\n\n<p></s></p>\n\n<p><strong>Update:</strong> Apparently <code>df</code> was your actual data, not a file name to open at all. Given that, you should really skip the stream API (which is pointless if the data is already in memory) and just use <a href=\"https://azure.github.io/azure-storage-python/ref/azure.storage.blob.blockblobservice.html#azure.storage.blob.blockblobservice.BlockBlobService.create_blob_from_bytes\" rel=\"nofollow noreferrer\">the <code>bytes</code> based API</a> directly:</p>\n\n<pre><code>block_blob_service.create_blob_from_bytes('flowshop', 'testdata123', df)\n</code></pre>\n\n<p>or if <code>df</code> is <code>str</code>, not <code>bytes</code>:</p>\n\n<pre><code>block_blob_service.create_blob_from_bytes('flowshop', 'testdata123', df.encode('utf-8'))\n</code></pre>\n"}], "owner": {"reputation": 415, "user_id": 8952552, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1118745558228729/picture?type=large", "display_name": "Pepin Peng", "link": "https://stackoverflow.com/users/8952552/pepin-peng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2124, "favorite_count": 0, "accepted_answer_id": 49544794, "answer_count": 1, "score": 1, "last_activity_date": 1522275357, "creation_date": 1522273584, "last_edit_date": 1522274081, "question_id": 49544690, "link": "https://stackoverflow.com/questions/49544690/csv-file-convert-to-io-bytesio-object-then-stream-to-blob-storage-meets-value", "title": "csv file convert to io.BytesIO object, then stream to blob storage ,meets value type error:a bytes-like object is required, not &#39;_io.TextIOWrapper&#39;", "body": "<p>I am trying to stream a csv  to azure blob storage, the csv is generated directly from python scripts without local copy, i have the following code, df is the csv file:</p>\n\n<pre><code>    with open(df,'w') as f:\n       stream = io.BytesIO(f)\n       stream.seek(0)\n       block_blob_service.create_blob_from_stream('flowshop', 'testdata123', stream)\n</code></pre>\n\n<p>then i got the error massage:</p>\n\n<pre><code>  stream = io.BytesIO(f)  TypeError: a bytes-like object is required, not '_io.TextIOWrapper'\n</code></pre>\n\n<p>i think the problem has been the format incorrect, can you please identify the problem. thanks. </p>\n"}, {"tags": ["python", "amazon-web-services", "amazon-s3", "boto3"], "comments": [{"owner": {"reputation": 45894, "user_id": 271415, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/8648256cc53b261c5e1d266380a256fc?s=128&d=identicon&r=PG", "display_name": "jarmod", "link": "https://stackoverflow.com/users/271415/jarmod"}, "edited": false, "score": 3, "creation_date": 1522281402, "post_id": 49544670, "comment_id": 86099400, "body": "Your response to the first error shouldn&#39;t be to enable transfer acceleration, but to understand why the request failed. Any chance that you have the following in your ~/.aws/config: s3 = use_accelerate_endpoint = true"}, {"owner": {"reputation": 138108, "user_id": 1695906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/638d2ec6b52f3db1583890be23d74cc6?s=128&d=identicon&r=PG", "display_name": "Michael - sqlbot", "link": "https://stackoverflow.com/users/1695906/michael-sqlbot"}, "edited": false, "score": 0, "creation_date": 1522282471, "post_id": 49544670, "comment_id": 86099664, "body": "The second request is failing because you are sending a request to enable the feature... using the endpoint that isn&#39;t available... because the feature is not enabled."}, {"owner": {"reputation": 463, "user_id": 9319317, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ofj8Q.jpg?s=128&g=1", "display_name": "eatsfood", "link": "https://stackoverflow.com/users/9319317/eatsfood"}, "reply_to_user": {"reputation": 45894, "user_id": 271415, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/8648256cc53b261c5e1d266380a256fc?s=128&d=identicon&r=PG", "display_name": "jarmod", "link": "https://stackoverflow.com/users/271415/jarmod"}, "edited": false, "score": 0, "creation_date": 1522349907, "post_id": 49544670, "comment_id": 86134647, "body": "@jarmod, I did have that set in my config file and commented it out for testing. I&#39;ll post the answer to this problem shortly, since I&#39;ve figured it out in full. Thank you for this pointer."}, {"owner": {"reputation": 463, "user_id": 9319317, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ofj8Q.jpg?s=128&g=1", "display_name": "eatsfood", "link": "https://stackoverflow.com/users/9319317/eatsfood"}, "reply_to_user": {"reputation": 138108, "user_id": 1695906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/638d2ec6b52f3db1583890be23d74cc6?s=128&d=identicon&r=PG", "display_name": "Michael - sqlbot", "link": "https://stackoverflow.com/users/1695906/michael-sqlbot"}, "edited": false, "score": 0, "creation_date": 1522349964, "post_id": 49544670, "comment_id": 86134681, "body": "@Michael-sqlbot, &quot;using the endpoint that isn&#39;t available&quot; is exactly the root of this problem. See the Answer below."}], "answers": [{"comments": [{"owner": {"reputation": 45894, "user_id": 271415, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/8648256cc53b261c5e1d266380a256fc?s=128&d=identicon&r=PG", "display_name": "jarmod", "link": "https://stackoverflow.com/users/271415/jarmod"}, "edited": false, "score": 2, "creation_date": 1522367999, "post_id": 49563384, "comment_id": 86141630, "body": "Using s3 = boto3.client(&#39;s3&#39;) should be fine. The issue is, presumably, that your default credentials/config indicate that S3 requests should use the acceleration endpoints. That&#39;s probably not a good default configuration to have, because most buckets you interact with will presumably not be S3-accelerated. I would replicate that [default] config to [accel] and then change the default to remove use_accelerate_endpoint=true."}], "tags": [], "owner": {"reputation": 463, "user_id": 9319317, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ofj8Q.jpg?s=128&g=1", "display_name": "eatsfood", "link": "https://stackoverflow.com/users/9319317/eatsfood"}, "is_accepted": true, "score": 1, "last_activity_date": 1522350363, "creation_date": 1522350363, "answer_id": 49563384, "question_id": 49544670, "link": "https://stackoverflow.com/questions/49544670/problems-enabling-s3-bucket-transfer-acceleration-using-boto3/49563384#49563384", "title": "Problems Enabling S3 Bucket Transfer Acceleration Using boto3", "body": "<p>Although I borrowed the code in the original question from the boto3 documentation, this construct is not complete and did not provide the connectivity that I expected:</p>\n\n<pre><code>s3 = boto3.client('s3')\n</code></pre>\n\n<p>What is really needed are fully-initialized session and client handlers, like this (assuming that the profile variable is set correctly in the ~/.aws/config file and bucketname is a valid S3 bucket):</p>\n\n<pre><code>from boto3 import Session\n\nsession = Session(profile_name=profile)\nclient = session.client('s3')\nresult = client.get_bucket_acl(Bucket=bucketname)\n</code></pre>\n\n<p>After doing this (duh), I was able to connect with or without transfer acceleration.</p>\n\n<p>Thanks to the commenters, since those comments led me to the solution.</p>\n"}], "owner": {"reputation": 463, "user_id": 9319317, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ofj8Q.jpg?s=128&g=1", "display_name": "eatsfood", "link": "https://stackoverflow.com/users/9319317/eatsfood"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1584, "favorite_count": 0, "accepted_answer_id": 49563384, "answer_count": 1, "score": 1, "last_activity_date": 1522350363, "creation_date": 1522273462, "question_id": 49544670, "link": "https://stackoverflow.com/questions/49544670/problems-enabling-s3-bucket-transfer-acceleration-using-boto3", "title": "Problems Enabling S3 Bucket Transfer Acceleration Using boto3", "body": "<p>I am attempting to pull information about an S3 bucket using boto3. Here is the setup (<em>bucketname</em> is set to a valid S3 bucket name):</p>\n\n<pre><code>import boto3\ns3 = boto3.client('s3')\nresult = s3.get_bucket_acl(Bucket=bucketname)\n</code></pre>\n\n<p>When I try, I get this error: </p>\n\n<blockquote>\n  <p>ClientError: An error occurred (InvalidRequest) when calling the\n  GetBucketAcl operation: S3 Transfer Acceleration is not configured on\n  this bucket</p>\n</blockquote>\n\n<p>So, I attempt to enable transfer acceleration:</p>\n\n<pre><code>s3.put_bucket_accelerate_configuration(Bucket=bucketname, AccelerateConfiguration={'Status': 'Enabled'})\n</code></pre>\n\n<p>But, I get this error, which seems silly, since the line above is attempting to configure the bucket. I do have IAM rights (Allow: *) to modify the bucket too:</p>\n\n<blockquote>\n  <p>ClientError: An error occurred (InvalidRequest) when calling the\n  PutBucketAccelerateConfiguration operation: S3 Transfer Acceleration\n  is not configured on this bucket</p>\n</blockquote>\n\n<p>Does anyone have any ideas on what I'm missing here?</p>\n"}, {"tags": ["python", "arrays", "numpy"], "comments": [{"owner": {"reputation": 1200, "user_id": 2105333, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EjpCl.jpg?s=128&g=1", "display_name": "bobrobbob", "link": "https://stackoverflow.com/users/2105333/bobrobbob"}, "edited": false, "score": 0, "creation_date": 1522273431, "post_id": 49544623, "comment_id": 86097007, "body": "don&#39;t give your vars the same name as a function."}], "answers": [{"comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1522273406, "post_id": 49544643, "comment_id": 86096998, "body": "This means <code>func</code> is operating on <code>a</code> assuming it is global; which I don&#39;t recommend."}, {"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1522273724, "post_id": 49544643, "comment_id": 86097113, "body": "Either that or <code>a</code> is (hopefully) a variable local within the function <code>func</code> and is some intermediate value"}], "tags": [], "owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "is_accepted": false, "score": 1, "last_activity_date": 1522273323, "creation_date": 1522273323, "answer_id": 49544643, "question_id": 49544623, "link": "https://stackoverflow.com/questions/49544623/assign-numpy-array-to-a-pre-initialized-variable/49544643#49544643", "title": "Assign numpy array to a pre initialized variable", "body": "<p>You should <code>return</code> from your function</p>\n\n<pre><code>def func():\n    return np.mean(a,axis=0);\n</code></pre>\n\n<p>Then you can assign the return value</p>\n\n<pre><code>mean = func()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": true, "score": 2, "last_activity_date": 1522273723, "last_edit_date": 1522273723, "creation_date": 1522273386, "answer_id": 49544656, "question_id": 49544623, "link": "https://stackoverflow.com/questions/49544623/assign-numpy-array-to-a-pre-initialized-variable/49544656#49544656", "title": "Assign numpy array to a pre initialized variable", "body": "<p>The <code>mean</code> inside <code>func</code> isn't the same as the <code>mean</code> outside. When you assign <code>mean = ...</code> inside <code>func</code>, you are creating a <em>new</em> variable in <code>func</code>'s <em>local scope</em> - this <code>mean</code> is completely different from the <code>mean</code> defined outside, in <em>global scope</em>. Furthermore, the local variable with the same name hides the global variable, so in the end, the global variable is not touched.</p>\n\n<p>The basic fix would be to declare <code>mean</code> as a <code>global</code> variable inside <code>func</code> and use the <code>out</code> param:</p>\n\n<pre><code>mean = np.empty(...)\n\ndef func(a):\n    global mean\n    np.mean(a, axis=0, out=mean) # you don't need the trailing semicolon either\n</code></pre>\n\n<p>However, for the sake of maintainable code I'd recommend <em>not</em> working with <code>global</code> variables at all when you can avoid it. Instead pass <code>a</code> as a parameter to <code>func</code> and return the result:</p>\n\n<pre><code>def func(a):\n    return np.mean(a,axis=0)\n\nmean = func(a)\n</code></pre>\n\n<p>The only event I'd recommend the former method is when it would make more sense performance wise. However, for a simple thing like computing the mean, why even declare a function in the first place?</p>\n"}], "owner": {"reputation": 1115, "user_id": 6544408, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/3f30b2ea793e58029995eea15b4fc2c4?s=128&d=identicon&r=PG&f=1", "display_name": "yobro97", "link": "https://stackoverflow.com/users/6544408/yobro97"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 49544656, "answer_count": 2, "score": 0, "last_activity_date": 1522273723, "creation_date": 1522273249, "question_id": 49544623, "link": "https://stackoverflow.com/questions/49544623/assign-numpy-array-to-a-pre-initialized-variable", "title": "Assign numpy array to a pre initialized variable", "body": "<p>I have to make this piece of code work.</p>\n\n<pre><code>mean = []\n\ndef func():\n    mean = np.mean(a,axis=0);\nprint mean\n</code></pre>\n\n<p>But on printing <code>mean</code> I get an output <code>[]</code>. How can I assign <code>np.mean</code> to <code>mean</code>? \nPS: I am a beginner in numpy so I am quite confused on how variable assignment works here.</p>\n"}, {"tags": ["python", "regex"], "comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1522273120, "post_id": 49544593, "comment_id": 86096893, "body": "Try adding anchors: <code>re.match(r&#39;[a-zA-Z]+$&#39;, str)</code>"}, {"owner": {"reputation": 481672, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1522273140, "post_id": 49544593, "comment_id": 86096900, "body": "<code>re.search(r&#39;^[a-zA-Z]+$&#39;, str)</code> or <code>re.search(r&#39;^[a-zA-Z]{2,}$&#39;, str)</code> (it is not quite clear about <i>of length &gt;1</i>)."}, {"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1522273179, "post_id": 49544593, "comment_id": 86096910, "body": "Also don&#39;t need a regex if you just want a bool answer <code>all(i in string.ascii_letters for i in str)</code>"}, {"owner": {"reputation": 25744, "user_id": 2089675, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sBz5q.jpg?s=128&g=1", "display_name": "smac89", "link": "https://stackoverflow.com/users/2089675/smac89"}, "edited": false, "score": 0, "creation_date": 1522273218, "post_id": 49544593, "comment_id": 86096925, "body": "Guys, are you answering the question or commenting? Oh nvm I didn&#39;t see it is already closed"}, {"owner": {"reputation": 25744, "user_id": 2089675, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sBz5q.jpg?s=128&g=1", "display_name": "smac89", "link": "https://stackoverflow.com/users/2089675/smac89"}, "edited": false, "score": 0, "creation_date": 1522273317, "post_id": 49544593, "comment_id": 86096957, "body": "You can also do this without regex by doing, <code>myStr.isalpha()</code>"}], "owner": {"reputation": 971, "user_id": 2998265, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/bbdecdcdd76fc1e9f2cdc95e601e02fa?s=128&d=identicon&r=PG&f=1", "display_name": "kabeersvohra", "link": "https://stackoverflow.com/users/2998265/kabeersvohra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "closed_date": 1522273120, "answer_count": 0, "score": 0, "last_activity_date": 1522273063, "creation_date": 1522273063, "question_id": 49544593, "link": "https://stackoverflow.com/questions/49544593/regex-to-match-strings-which-only-contain-alphabetic-characters-python", "closed_reason": "Duplicate", "title": "Regex to match strings which only contain alphabetic characters python", "body": "<p>I am looking for a regex using re to match only alphabetic characters, I have tried many things but nothing works. What I am trying to do is like the following:</p>\n\n<pre><code>re.search(r'[a-zA-Z]+', str)\n</code></pre>\n\n<p>This should return true only if it matches with a string of length >1 and contains only alphabetic characters however it currently matches with all strings including '', '\u25cf', '1' etc</p>\n\n<p>Thanks</p>\n\n<p>Kabeer</p>\n"}, {"tags": ["python", "nested"], "comments": [{"owner": {"reputation": 6961, "user_id": 1248974, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ClqC2.jpg?s=128&g=1", "display_name": "davedwards", "link": "https://stackoverflow.com/users/1248974/davedwards"}, "edited": false, "score": 1, "creation_date": 1522273366, "post_id": 49544589, "comment_id": 86096979, "body": "Does it not work as you expected? What about it is not enough?"}, {"owner": {"reputation": 5053, "user_id": 2421391, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/980724d5505b7c2ee035c38b8adabd54?s=128&d=identicon&r=PG", "display_name": "scnerd", "link": "https://stackoverflow.com/users/2421391/scnerd"}, "edited": false, "score": 1, "creation_date": 1522273754, "post_id": 49544589, "comment_id": 86097127, "body": "You are not asking a specific question. What is wrong with the code? Are you getting error messages? Are you failing tests? Do you have any inputs that don&#39;t give you the expected outputs? <a href=\"https://stackoverflow.com/help/how-to-ask\">Clarify what exactly you&#39;re asking</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9404359"}, "edited": false, "score": 0, "creation_date": 1522274455, "post_id": 49544589, "comment_id": 86097415, "body": "I&#39;m sorry for not being specific. The professor&#39;s notes say I need about 4 lines. When I run the program with the code as is, I don&#39;t get any output for wind chill."}, {"owner": {"reputation": 5053, "user_id": 2421391, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/980724d5505b7c2ee035c38b8adabd54?s=128&d=identicon&r=PG", "display_name": "scnerd", "link": "https://stackoverflow.com/users/2421391/scnerd"}, "edited": false, "score": 0, "creation_date": 1522275525, "post_id": 49544589, "comment_id": 86097812, "body": "There&#39;s still not enough information to help you. Your problem is with your input data and condition; clearly, the <code>if</code> statement you&#39;ve written isn&#39;t getting entered, so take a look at your data and problem definition and figure out when you think it ought to be entered and what&#39;s wrong with your conditions."}, {"owner": {"reputation": 5053, "user_id": 2421391, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/980724d5505b7c2ee035c38b8adabd54?s=128&d=identicon&r=PG", "display_name": "scnerd", "link": "https://stackoverflow.com/users/2421391/scnerd"}, "edited": false, "score": 0, "creation_date": 1522275579, "post_id": 49544589, "comment_id": 86097834, "body": "Just a thought though: you never print out the computed <code>TWC</code>, so from the provided code, you wouldn&#39;t expect anything else to get printed to the screen. Should you <code>print(TWC)</code> after computing it?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9404359"}, "edited": false, "score": 0, "creation_date": 1522276047, "post_id": 49544589, "comment_id": 86097967, "body": "scnerd sorry about that, just edited it and included the print block"}, {"owner": {"reputation": 6961, "user_id": 1248974, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ClqC2.jpg?s=128&g=1", "display_name": "davedwards", "link": "https://stackoverflow.com/users/1248974/davedwards"}, "edited": false, "score": 0, "creation_date": 1522284928, "post_id": 49544589, "comment_id": 86100246, "body": "can&#39;t find the block you are struggling with. however, if you&#39;re still getting <code>missing data.. wind chill temperature not computable</code> output, then the condition <code>if T&gt;-900 and U&gt;-900:</code> is not evaluating to <code>True</code>, thus the <code>else</code> clause outputs that message: <code>wind chill temperature not computable</code>, etc. A suggestion to track down why TWC/windchill is not getting computed, just before the line <code>if T&gt;-900 and U&gt;-900:</code> print out the values for variables <code>T</code> and <code>U</code> and check if they are values you expect."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9404359"}, "edited": false, "score": 0, "creation_date": 1522349524, "post_id": 49544589, "comment_id": 86134450, "body": "davedwards when I run it as is for any time stamp, I don&#39;t get any wind chill output. It just says &quot;and here is the computed wind chill temperature:&quot; and nothing after that."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9404359"}, "edited": false, "score": 0, "creation_date": 1522349955, "post_id": 49544589, "comment_id": 86134673, "body": "I am wondering if my wind chill equation is properly formatted. is the TWC = equation written properly?"}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user9404359"}, "is_accepted": false, "score": 0, "last_activity_date": 1522353943, "creation_date": 1522353943, "answer_id": 49564198, "question_id": 49544589, "link": "https://stackoverflow.com/questions/49544589/using-a-nested-if-block-to-calculate-windchill-python/49564198#49564198", "title": "Using a nested &quot;if&quot; block to calculate windchill (python)", "body": "<p>I figured it out! In case anyone struggles with a similar problem, this is what I did: </p>\n\n<pre><code>if T&gt;-900 and U&gt;-900:\n    V = U*3.6\n    if T&lt;10 and V&gt;4.8:\n        TWC = 13.12 + (0.6215*T) - 11.37*(V**0.16) + 0.3965*T*(V**0.16)   \nelse:\n    print(\"\\nmissing data.. wind chill temperature not computable\")\n</code></pre>\n\n<p>And then I called the function</p>\n\n<pre><code>   if TWC != -900 :    \n    print(\"\\n  and here is the computed wind chill temperature:\")\n    twc_celsius_string = \"%6.2f C\" % TWC\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9404359"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 182, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1522353943, "creation_date": 1522273045, "last_edit_date": 1522282518, "question_id": 49544589, "link": "https://stackoverflow.com/questions/49544589/using-a-nested-if-block-to-calculate-windchill-python", "title": "Using a nested &quot;if&quot; block to calculate windchill (python)", "body": "<p>*EDITTED \nHere is the entire script. I need to calculate the wind chill using air temperature (T) and wind speed (U). I have noted the block I am struggling with. When I run the program, TWC = T. In other words, it is not calculating the wind chill. </p>\n\n<pre><code>import sys\nimport cgi # to retrieve arguments from html forms\nfrom mesohelper import getmeso # mesohelper.py needs to be in same \ndirectory\n\nform = cgi.FieldStorage() #this will have the arguments sent via the \nhtml form\ntimestamp = form.getvalue('timestamp','') # '' is default, if timestamp \ndoes not exist  \nstid = form.getvalue('stid','NRMN') # NRMN is default\nstation_id = stid.upper() # this changes stid to uppercase\ndebug = form.getvalue('debug')=='on' # more optional diaganostic \nmessages\n\nprint(\"Content-type: text/html\\n\") # required for serving content as a \nweb page\nprint(\"\"\"&lt;html&gt;\n&lt;head&gt;\n&lt;title&gt;mesosite.cgi&lt;/title&gt;\n&lt;meta name=\"viewport\" content=\"width=300\"&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;pre&gt;\"\"\") # html tags for the top of the page that your sending\n\nif debug: print(form)\n\nprint(\"You requested mesonet data at time:\",timestamp)\nmdata,timefile = getmeso(timestamp,debug=debug) # retrieves requested \nmesonet data\nprint(\"\\nretrieved file with timestamp:\",timefile)\nif debug: print(\"Here is mdata:\\n\",mdata)\n\n# mdata is a dictionary, with keys that access a dictionary for the \nsite\nstids = mdata.keys() # a list of all the mesonet station id\n# look at data for requested station_id:\nif station_id not in stids:\n    print(station_id,\"is not a valid station id\")\nelse: #do things with the stored data\n    print(\"here is the data found for key:\",station_id)\n    sitedata = mdata[station_id] # sitedata is a dictionary within the \n    mdata dictionary\n    keys = sitedata.keys() # keys for the values of the measurements \n    that are stored\n    for key in sorted(keys): \n        print(' ', key, sitedata[key])\n    T = sitedata['tair'] # degree C\n    U = sitedata['wspd'] # in m/s\n    TWC = -900 # it is designated missing, until we compute it \n    if T&gt;-900 and U&gt;-900:\n        V = U*3.6\n        # STUDENTS: Maybe four more lines to compute TWC from T and V\n        # T must be less than 10 C and V greater than 4.8 km/hr, \n        otherwise TWC=T\n        # You may need nested if blocks to accomplish the correct \n        assignment to TWC\n#I wrote these next four lines\n        if T&lt;10 and V&gt;4.8:\n            TWC = 13.12+0.6215*T-11.37*V**0.16+0.3965*T**0.16\n        else:\n            TWC = T\n    else:\n        print(\"\\nmissing data.. wind chill temperature not computable\")\n\n# print out computed wind chill temperature:\n    if TWC != -900 :    \n        print(\"\\n  and here is the computed wind chill temperature:\")\n        twc_celsius_string = \"%6.2f C\" % TWC\n        print(\"  TWC\", twc_celsius_string)\n</code></pre>\n\n<p>The areas marked STUDENT are notes by the professor. I apparently need four lines in the \"if T>-900 and U>-900\" block to calculate wind chill. I thought the four lines I added would work but apparently not. Any help would be so appreciated.</p>\n"}, {"tags": ["python", "django"], "comments": [{"owner": {"reputation": 1930, "user_id": 9537244, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oUrDo.png?s=128&g=1", "display_name": "ilja", "link": "https://stackoverflow.com/users/9537244/ilja"}, "edited": false, "score": 0, "creation_date": 1522273313, "post_id": 49544559, "comment_id": 86096955, "body": "Please read <a href=\"https://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a>. What exactly is the problem /  error?"}, {"owner": {"reputation": 543, "user_id": 2421682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e8135d753d93884f55a3234acf343a5?s=128&d=identicon&r=PG", "display_name": "Shane", "link": "https://stackoverflow.com/users/2421682/shane"}, "edited": false, "score": 0, "creation_date": 1522273577, "post_id": 49544559, "comment_id": 86097059, "body": "You haven&#39;t worded your question well, as mentioned above. I&#39;d also recommend fixing the missing code path where your form is not valid."}, {"owner": {"reputation": 1, "user_id": 9566547, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "chaaimae", "link": "https://stackoverflow.com/users/9566547/chaaimae"}, "edited": false, "score": 0, "creation_date": 1522274051, "post_id": 49544559, "comment_id": 86097254, "body": "thank u for answering  when i click on add it gives me this error : Forbidden (403) CSRF verification failed. Request aborted."}, {"owner": {"reputation": 543, "user_id": 2421682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e8135d753d93884f55a3234acf343a5?s=128&d=identicon&r=PG", "display_name": "Shane", "link": "https://stackoverflow.com/users/2421682/shane"}, "edited": false, "score": 0, "creation_date": 1522274666, "post_id": 49544559, "comment_id": 86097491, "body": "in your template, you&#39;re probably not including {% csrf_token %} when you render your form. You&#39;d need to adjust your question to provide more code (your template and your form code) before getting further help"}, {"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1522305766, "post_id": 49544559, "comment_id": 86106310, "body": "You should use <code>render(request, ...)</code> instead of <code>render_to_response</code>."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 9566547, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "chaaimae", "link": "https://stackoverflow.com/users/9566547/chaaimae"}, "is_accepted": false, "score": 0, "last_activity_date": 1522275038, "creation_date": 1522275038, "answer_id": 49544993, "question_id": 49544559, "link": "https://stackoverflow.com/questions/49544559/create-new-object-task-for-the-current-logged-in-user/49544993#49544993", "title": "create new object task for the current logged in user", "body": "<p>this is my template i already included {% csrf_token %}</p>\n\n<pre><code>&lt;form class=\"login100-form validate-form\" method=\"POST\" action=\"{% url 'ajouter_task' %}\"&gt;{% csrf_token %}\n\n                    &lt;span class=\"login100-form-title\"&gt;\n                        ajouter votre Taches :\n                    &lt;/span&gt;\n\n                        &lt;div class=\"form-group clearfix\"&gt;\n                            &lt;label for=\"{{ form.titre.id_for_label }}\" class=\"col-md-4 control-label text-right\"&gt;Titre&lt;span class=\"text-red\"&gt;&lt;/span&gt;:&lt;/label&gt;\n                            &lt;div class=\"col-md-6\"&gt;&lt;input type=\"text\" class=\"form-control\"/&gt;\n                                {{ form.titre }}\n                            &lt;/div&gt;\n                        &lt;/div&gt;\n                        &lt;div class=\"form-group clearfix\"&gt;\n                            &lt;label for=\"{{ form.date.id_for_label }}\" class=\"col-md-4 control-label text-right\"&gt;Date:&lt;/label&gt;\n                            &lt;div class=\"col-md-6\"&gt;&lt;input type=\"date\" class=\"form-control\"/&gt;\n                                {{ form.date }}\n                            &lt;/div&gt;\n                        &lt;/div&gt;\n                        &lt;div class=\"form-group clearfix\"&gt;\n                            &lt;label for=\"{{ form.objectif.id_for_label }}\" class=\"col-md-4 control-label text-right\"&gt;Objectif:&lt;/label&gt;\n                            &lt;div class=\"col-md-6\"&gt;&lt;input type=\"text\" class=\"form-control\"/&gt;\n                                {{ form.objectif }}\n                            &lt;/div&gt;\n                        &lt;/div&gt;\n                        &lt;div class=\"form-group clearfix\"&gt;\n                            &lt;label for=\"{{ form.theme.id_for_label }}\" class=\"col-md-4 control-label text-right\"&gt;Theme:&lt;/label&gt;\n                            &lt;div class=\"col-md-6\"&gt;&lt;input type=\"text\" class=\"form-control\"/&gt;\n                                {{ form.theme }}\n                            &lt;/div&gt;\n                        &lt;/div&gt;\n\n\n                    &lt;div class=\"container-login100-form-btn\"&gt;\n                        &lt;button class=\"login100-form-btn\" href=\"{% url 'home' %}\"&gt;\n                            ajouter\n                        &lt;/button&gt;\n                    &lt;/div&gt;\n\n\n\n                &lt;/form&gt;\n</code></pre>\n\n<p>my urls.py is </p>\n\n<pre><code>url(r'^ajouter_task/$', views.ajouter_task, name='ajouter_task'),\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9566547, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "chaaimae", "link": "https://stackoverflow.com/users/9566547/chaaimae"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 23, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1522275038, "creation_date": 1522272935, "question_id": 49544559, "link": "https://stackoverflow.com/questions/49544559/create-new-object-task-for-the-current-logged-in-user", "title": "create new object task for the current logged in user", "body": "<p>hi i want to create a new task for the current logged in user so i am using this views \nthis is my views</p>\n\n<pre><code>@login_required\ndef ajouter_task(request):\n\n    if request.method == 'POST':\n        form = TaskForm(request.POST)\n        if form.is_valid():\n            task = form.save(commit=False)\n            task.user = request.user\n            task.save()\n            return redirect('home')\n\n    else:\n        form = TaskForm()\n    return render_to_response('ajouter_task.html', {'form': form})\n</code></pre>\n\n<p>it dosn't work i don't know where the problem is , please help and thank u in advance</p>\n"}, {"tags": ["python", "random"], "comments": [{"owner": {"reputation": 2075, "user_id": 9534390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df129537d255833e014ba2b4bcec8dd1?s=128&d=identicon&r=PG&f=1", "display_name": "pythonic833", "link": "https://stackoverflow.com/users/9534390/pythonic833"}, "edited": false, "score": 1, "creation_date": 1522272930, "post_id": 49544544, "comment_id": 86096815, "body": "So these numbers are no longer random since you want a correlation between them"}, {"owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "reply_to_user": {"reputation": 2075, "user_id": 9534390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df129537d255833e014ba2b4bcec8dd1?s=128&d=identicon&r=PG&f=1", "display_name": "pythonic833", "link": "https://stackoverflow.com/users/9534390/pythonic833"}, "edited": false, "score": 3, "creation_date": 1522272938, "post_id": 49544544, "comment_id": 86096819, "body": "Exactly, @pythonic833. Since the zeroes aren&#39;t random, don&#39;t randomly generate them. Generate 25 non-zero random numbers, add 75 zeros, and <code>random.shuffle()</code> the result."}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "reply_to_user": {"reputation": 2075, "user_id": 9534390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df129537d255833e014ba2b4bcec8dd1?s=128&d=identicon&r=PG&f=1", "display_name": "pythonic833", "link": "https://stackoverflow.com/users/9534390/pythonic833"}, "edited": false, "score": 0, "creation_date": 1522272962, "post_id": 49544544, "comment_id": 86096829, "body": "@pythonic833 That isn&#39;t really true, you can skew distributions to fit your fancy."}, {"owner": {"reputation": 7147, "user_id": 5464747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f60df21c4da5e9dbe92aff62b4ded3b2?s=128&d=identicon&r=PG", "display_name": "dfundako", "link": "https://stackoverflow.com/users/5464747/dfundako"}, "edited": false, "score": 0, "creation_date": 1522273007, "post_id": 49544544, "comment_id": 86096850, "body": "&quot;Random&quot; You Keep Using That Word, I Do Not Think It Means What You Think It Means"}, {"owner": {"reputation": 2075, "user_id": 9534390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df129537d255833e014ba2b4bcec8dd1?s=128&d=identicon&r=PG&f=1", "display_name": "pythonic833", "link": "https://stackoverflow.com/users/9534390/pythonic833"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1522273175, "post_id": 49544544, "comment_id": 86096909, "body": "@c\u1d0f\u029f\u1d05s\u1d18\u1d07\u1d07\u1d05 sure, you can skew distributions but if exactly 75 out of 100 numbers should be zero you can&#39;t talk about randomly generating them anymore however skewed your pdf is."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user8261552"}, "edited": false, "score": 0, "creation_date": 1522273671, "post_id": 49544618, "comment_id": 86097096, "body": "Thanks, this is exactly what I was looking for."}], "tags": [], "owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "is_accepted": true, "score": 7, "last_activity_date": 1522273221, "creation_date": 1522273221, "answer_id": 49544618, "question_id": 49544544, "link": "https://stackoverflow.com/questions/49544544/generate-100-random-numbers-such-that-only-25-out-of-100-numbers-will-be-greater/49544618#49544618", "title": "Generate 100 random numbers such that only 25 out of 100 numbers will be greater than 0.(remaining will be 0)", "body": "<p>Here is how I might do it. I used the insight that only 25 of the numbers are actually randomly generated. The remaining 75 are fixed. This leads to the expression:</p>\n\n<pre><code>[random.randint(1,25) for i in range(25)] + [0]*75\n</code></pre>\n\n<p>You can mix in the zeroes randomly:</p>\n\n<pre><code>random.shuffle(result)\n</code></pre>\n\n<p>And reshape the result to be a 10x10 grid:</p>\n\n<pre><code>result = [result[i*10:(i+1)*10] for i in range(10)]\n</code></pre>\n\n<p>Complete program:</p>\n\n<pre><code>import random\nimport pprint\n\nresult = [random.randint(1,25) for i in range(25)] + [0]*75\nrandom.shuffle(result)\nresult = [result[i*10:(i+1)*10] for i in range(10)]\npprint.pprint(result)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 57, "user_id": 8507446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71081484d736a8bb9d2d76e8e0648892?s=128&d=identicon&r=PG&f=1", "display_name": "Joseph Petroske", "link": "https://stackoverflow.com/users/8507446/joseph-petroske"}, "is_accepted": false, "score": 0, "last_activity_date": 1522273724, "creation_date": 1522273724, "answer_id": 49544723, "question_id": 49544544, "link": "https://stackoverflow.com/questions/49544544/generate-100-random-numbers-such-that-only-25-out-of-100-numbers-will-be-greater/49544723#49544723", "title": "Generate 100 random numbers such that only 25 out of 100 numbers will be greater than 0.(remaining will be 0)", "body": "<pre><code>import random\n\nsource_numbers = [0] * 75 + [random.randint(1, 25) for i in range(25)]\nrandom.shuffle(source_numbers)\ngrid = []\nfor i in range(10):\n    grid = grid + [source_numbers[i * 10 : (i + 1) * 10]]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 2, "creation_date": 1522275796, "post_id": 49544808, "comment_id": 86097882, "body": "This can be a lot simpler: <code>indexes_of_zeros = random.sample(range(0,100), 75)</code>."}], "tags": [], "owner": {"reputation": 423, "user_id": 9442957, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1614474025305055/picture?type=large", "display_name": "Zak Stucke", "link": "https://stackoverflow.com/users/9442957/zak-stucke"}, "is_accepted": false, "score": 1, "last_activity_date": 1522274169, "creation_date": 1522274169, "answer_id": 49544808, "question_id": 49544544, "link": "https://stackoverflow.com/questions/49544544/generate-100-random-numbers-such-that-only-25-out-of-100-numbers-will-be-greater/49544808#49544808", "title": "Generate 100 random numbers such that only 25 out of 100 numbers will be greater than 0.(remaining will be 0)", "body": "<p>Here's how to do it without importing anything new or using shuffle:</p>\n\n<pre><code>import random\n\nindexesOfZeros = []\nfor i in range(76):\n    while True:\n        num = random.randint(0,100)\n        if num not in indexesOfZeros: \n            indexesOfZeros.append(num)\n            break\n\nvals = [random.randint(1,25) if i not in indexesOfZeros else 0 for i in range(100)]\ngrid = [vals[((x*10)-10):(x*10)] for x in range(1,11)]\n\nprint(grid)\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8261552"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 49544618, "answer_count": 3, "score": 2, "last_activity_date": 1522274169, "creation_date": 1522272832, "last_edit_date": 1522273407, "question_id": 49544544, "link": "https://stackoverflow.com/questions/49544544/generate-100-random-numbers-such-that-only-25-out-of-100-numbers-will-be-greater", "title": "Generate 100 random numbers such that only 25 out of 100 numbers will be greater than 0.(remaining will be 0)", "body": "<p>This is the code to print 100 random numbers in a 2-d grid.</p>\n\n<pre><code>[[random.randint(1,25) for i in range(10)] for j in range(10)]\n</code></pre>\n\n<p>How do I print the random numbers such that out of 100 randomly printed numbers, only 25 will be of value greater than 0 ? Remaining all 75 numbers should be 0, in random positions of the grid.</p>\n\n<p>The is what I meant. For example lets consider, a 5 * 5 table where only 12 numbers are allowed to be greater than 0. Remaining all(13) numbers should be 0. The numbers should be  generated randomly and in random positions. </p>\n\n<pre><code>[[ 1, 0, 7, 0, 0],\n [5, 9 , 0 , 0 , 2]\n [3, 0 , 0 , 6, 0]\n [11, 7, 0 , 3, 0]\n [0, 0, 3,  9, 0]]\n</code></pre>\n"}, {"tags": ["python", "machine-learning", "scikit-learn", "auc"], "answers": [{"tags": [], "owner": {"reputation": 161, "user_id": 3347391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d1b79a348aeeb57d0d91bd722a631c3?s=128&d=identicon&r=PG&f=1", "display_name": "Grumpybeard", "link": "https://stackoverflow.com/users/3347391/grumpybeard"}, "is_accepted": false, "score": 1, "last_activity_date": 1522318460, "creation_date": 1522318460, "answer_id": 49553450, "question_id": 49544509, "link": "https://stackoverflow.com/questions/49544509/sklearn-auc-score-diff-metrics-roc-auc-score-model-selection-cross-val-score/49553450#49553450", "title": "sklearn auc score - diff metrics.roc_auc_score &amp; model_selection.cross_val_score", "body": "<p>I believe this is answered by the below linked, which points to the folding in GridSearchCV and scoring on smaller splits?</p>\n\n<p><a href=\"https://stackoverflow.com/questions/35818237/difference-in-roc-auc-scores-in-sklearn-randomforestclassifier-vs-auc-methods\">Difference in ROC-AUC scores in sklearn RandomForestClassifier vs. auc methods</a></p>\n"}], "owner": {"reputation": 161, "user_id": 3347391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d1b79a348aeeb57d0d91bd722a631c3?s=128&d=identicon&r=PG&f=1", "display_name": "Grumpybeard", "link": "https://stackoverflow.com/users/3347391/grumpybeard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 605, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1522318460, "creation_date": 1522272684, "question_id": 49544509, "link": "https://stackoverflow.com/questions/49544509/sklearn-auc-score-diff-metrics-roc-auc-score-model-selection-cross-val-score", "title": "sklearn auc score - diff metrics.roc_auc_score &amp; model_selection.cross_val_score", "body": "<p>Please be gentle, new to sklearn.  Calculating customer churn, using different roc_auc scoring I get 3 different scores. Scores 1&amp;3 close, significant difference between those and score 2.  Grateful for guidance on why such a difference and which may be the preferred? Many thanks!</p>\n\n<pre><code>from sklearn.model_selection import cross_val_score\nfrom sklearn.metrics import roc_auc_score\n\n\nparam_grid = {'n_estimators': range(10, 510, 100)}\ngrid_search = GridSearchCV(estimator=RandomForestClassifier(criterion='gini', max_features='auto',\n                    random_state=20), param_grid=param_grid, scoring='roc_auc', n_jobs=4, iid=False, cv=5, verbose=0)\ngrid_search.fit(self.dataset_train, self.churn_train)\nscore_roc_auc = np.mean(cross_val_score(grid_search, self.dataset_test, self.churn_test, cv=5, scoring='roc_auc'))\n\"^^^ SCORE1 - 0.6395751751133528\n\npred = grid_search.predict(self.dataset_test)\nscore_roc_auc_2 = roc_auc_score(self.churn_test, pred)\n\"^^^ SCORE2 - 0.5063261397640454\n\nprint(\"grid best score \", grid_search.best_score_)\n\"^^^  SCORE3 - 0.6473102070034342\n</code></pre>\n"}, {"tags": ["python", "tensorflow", "deep-learning"], "answers": [{"comments": [{"owner": {"reputation": 176, "user_id": 4500090, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/100000045786087/picture?type=large", "display_name": "Dillon Cortez", "link": "https://stackoverflow.com/users/4500090/dillon-cortez"}, "edited": false, "score": 0, "creation_date": 1522276907, "post_id": 49545154, "comment_id": 86098219, "body": "Thank you so much! I&#39;ve been racking my head against this all day haha I tried using tensorboard but the file would log it because it wasn&#39;t making it to the <code>sess.run</code> where the graph was being written to tensorboard"}], "tags": [], "owner": {"reputation": 61, "user_id": 4030272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dca346bf8de406d482b620ee1ed3715a?s=128&d=identicon&r=PG&f=1", "display_name": "Christian NH", "link": "https://stackoverflow.com/users/4030272/christian-nh"}, "is_accepted": true, "score": 2, "last_activity_date": 1522275930, "creation_date": 1522275930, "answer_id": 49545154, "question_id": 49544495, "link": "https://stackoverflow.com/questions/49544495/tensorflow-gan-no-gradients-provided-for-any-variable/49545154#49545154", "title": "Tensorflow GAN No gradients provided for any variable", "body": "<p>The variables in <code>des_vars</code> are not being used by <code>g_loss</code> and <code>d_loss</code>. Your <code>descriminator</code> function uses <code>g_w</code> and <code>g_b</code> but not <code>d_w</code> or <code>d_b</code>.</p>\n\n<p>You can see which ops depend on which variables very easily by using the <a href=\"https://www.tensorflow.org/programmers_guide/graph_viz\" rel=\"nofollow noreferrer\">TensorBoard</a>. Would you have used it in this case, you would have seen that <code>d_w</code> and <code>d_b</code> were disconnected from the <code>d_loss</code> and <code>g_loss</code> ops in the graph.</p>\n"}], "owner": {"reputation": 176, "user_id": 4500090, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/100000045786087/picture?type=large", "display_name": "Dillon Cortez", "link": "https://stackoverflow.com/users/4500090/dillon-cortez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1343, "favorite_count": 0, "accepted_answer_id": 49545154, "answer_count": 1, "score": 1, "last_activity_date": 1522275930, "creation_date": 1522272630, "question_id": 49544495, "link": "https://stackoverflow.com/questions/49544495/tensorflow-gan-no-gradients-provided-for-any-variable", "title": "Tensorflow GAN No gradients provided for any variable", "body": "<p>I'm trying to build a LSTM-GAN in tensorflow.</p>\n\n<p>Only in the descriminator net, when I try to calculate the loss i get the error </p>\n\n<p><code>ValueError: No gradients provided for any variable, check your graph for ops that do not support gradients, between variables [\"&lt;tf.Variable 'd_w:0' shape=(128, 1) dtype=float32_ref&gt;\", \"&lt;tf.Variable 'd_b:0' shape=(1,) dtype=float32_ref&gt;\"] and loss Tensor(\"Neg:0\", shape=(), dtype=float32).</code></p>\n\n<p>the descriminator net looks like this</p>\n\n<pre><code>## Descriminator net\nx = tf.placeholder(\"float\", [None, time_steps, num_inputs], name='x')\nd_w = tf.Variable(tf.random_normal([num_units,1]), name='d_w')\nd_b = tf.Variable(tf.random_normal([1]), name='d_b')\n\ndes_vars = [d_w, d_b]\n\ndef descriminator(x):\n    inp = tf.unstack(x, time_steps, 1)\n    lstm_layer = rnn.BasicLSTMCell(num_units,forget_bias=1, reuse=tf.AUTO_REUSE)\n    outputs, _ = rnn.static_rnn(lstm_layer, inp, dtype='float32')\n    descriminator_logit = tf.nn.sigmoid(tf.matmul(outputs[-1],g_w)+g_b)\n\n    return descriminator_logit\n\ng_prediction = generator(Z)\nd_real = descriminator(x)\nd_fake = descriminator(Y)\n\n\nd_loss = -tf.reduce_mean( tf.log(d_real) + tf.log(1. - d_fake) )\ng_loss = -tf.reduce_mean( tf.log(d_fake) )\n\ng_optimizer = tf.train.AdamOptimizer().minimize(g_loss, var_list=gen_vars)\nd_optimizer = tf.train.AdamOptimizer().minimize(d_loss, var_list=des_vars)\n</code></pre>\n\n<p>I'm not sure which part of this is breaking it.. I was thinking it could be the d_fake Variavle. <code>Y</code> is a <code>tf.placeholder</code> with the same shape as x but is reformatted so it takes the output of the generator net (this is done inside the <code>tf.session()</code> </p>\n\n<p>any idea why this is breaking?</p>\n"}, {"tags": ["python", "api", "integration-testing", "zapier"], "answers": [{"comments": [{"owner": {"reputation": 4350, "user_id": 1825390, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0bb91ca3e4bded511a38e4a01c26efb2?s=128&d=identicon&r=PG", "display_name": "xavdid", "link": "https://stackoverflow.com/users/1825390/xavdid"}, "reply_to_user": {"reputation": 13, "user_id": 8005054, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154376090821594/picture?type=large", "display_name": "Fares Alsyoufi", "link": "https://stackoverflow.com/users/8005054/fares-alsyoufi"}, "edited": false, "score": 0, "creation_date": 1522281467, "post_id": 49544903, "comment_id": 86099411, "body": "Great! If this answer solved your problem, make sure to upvote it and mark it as correct (<a href=\"https://stackoverflow.com/help/someone-answers\">info</a>)."}, {"owner": {"reputation": 13, "user_id": 8005054, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154376090821594/picture?type=large", "display_name": "Fares Alsyoufi", "link": "https://stackoverflow.com/users/8005054/fares-alsyoufi"}, "edited": false, "score": 0, "creation_date": 1522886770, "post_id": 49544903, "comment_id": 86334403, "body": "Hi David, I updated the code but now it&#39;s not working anymore. You have any tips for me?"}, {"owner": {"reputation": 4350, "user_id": 1825390, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0bb91ca3e4bded511a38e4a01c26efb2?s=128&d=identicon&r=PG", "display_name": "xavdid", "link": "https://stackoverflow.com/users/1825390/xavdid"}, "reply_to_user": {"reputation": 13, "user_id": 8005054, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154376090821594/picture?type=large", "display_name": "Fares Alsyoufi", "link": "https://stackoverflow.com/users/8005054/fares-alsyoufi"}, "edited": false, "score": 0, "creation_date": 1522887267, "post_id": 49544903, "comment_id": 86334535, "body": "In your screenshot, it shows that you&#39;ve got invalid syntax. you need to make sure to indent the lines after the <code>elif</code> statement"}, {"owner": {"reputation": 13, "user_id": 8005054, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154376090821594/picture?type=large", "display_name": "Fares Alsyoufi", "link": "https://stackoverflow.com/users/8005054/fares-alsyoufi"}, "edited": false, "score": 0, "creation_date": 1522957820, "post_id": 49544903, "comment_id": 86372585, "body": "I updated the original question again as this is still not working. Can you check the new error msg please?"}, {"owner": {"reputation": 4350, "user_id": 1825390, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0bb91ca3e4bded511a38e4a01c26efb2?s=128&d=identicon&r=PG", "display_name": "xavdid", "link": "https://stackoverflow.com/users/1825390/xavdid"}, "reply_to_user": {"reputation": 13, "user_id": 8005054, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154376090821594/picture?type=large", "display_name": "Fares Alsyoufi", "link": "https://stackoverflow.com/users/8005054/fares-alsyoufi"}, "edited": false, "score": 0, "creation_date": 1522958794, "post_id": 49544903, "comment_id": 86373087, "body": "Check out <a href=\"https://stackoverflow.com/questions/10116518/im-getting-key-error-in-python\">this question</a>. You need to either always make sure <code>input_data[&#39;Feets&#39;]</code> is present or be more defensive when checking for it (using <code>input_data.get(&#39;Feets&#39;, &#39;&lt;default&gt;&#39;)</code>"}, {"owner": {"reputation": 13, "user_id": 8005054, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154376090821594/picture?type=large", "display_name": "Fares Alsyoufi", "link": "https://stackoverflow.com/users/8005054/fares-alsyoufi"}, "edited": false, "score": 0, "creation_date": 1522964690, "post_id": 49544903, "comment_id": 86375811, "body": "Can you elaborate more on input_data[&#39;Feets&#39;] is present? Isn&#39;t already present?"}, {"owner": {"reputation": 4350, "user_id": 1825390, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0bb91ca3e4bded511a38e4a01c26efb2?s=128&d=identicon&r=PG", "display_name": "xavdid", "link": "https://stackoverflow.com/users/1825390/xavdid"}, "reply_to_user": {"reputation": 13, "user_id": 8005054, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154376090821594/picture?type=large", "display_name": "Fares Alsyoufi", "link": "https://stackoverflow.com/users/8005054/fares-alsyoufi"}, "edited": false, "score": 0, "creation_date": 1522968871, "post_id": 49544903, "comment_id": 86377094, "body": "<code>input_data</code> is the data mapped into this function from a previous step (shown <a href=\"https://i.stack.imgur.com/49vTu.png\" rel=\"nofollow noreferrer\">here</a>). In your example it might have data, but when the zap runs for real, the previous step that provides the <code>Feets</code> number might be missing data, so python throws a <code>KeyError</code>. I&#39;ve made a basic example here: <a href=\"https://repl.it/repls/FirebrickMedicalInfo\" rel=\"nofollow noreferrer\">repl.it/repls/FirebrickMedicalInfo</a>"}], "tags": [], "owner": {"reputation": 4350, "user_id": 1825390, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0bb91ca3e4bded511a38e4a01c26efb2?s=128&d=identicon&r=PG", "display_name": "xavdid", "link": "https://stackoverflow.com/users/1825390/xavdid"}, "is_accepted": false, "score": 2, "last_activity_date": 1522274571, "creation_date": 1522274571, "answer_id": 49544903, "question_id": 49544487, "link": "https://stackoverflow.com/questions/49544487/how-to-correctly-return-an-output-dictionary-in-zapier-code-python/49544903#49544903", "title": "How to correctly return an output dictionary in Zapier Code (Python)?", "body": "<p>David here, from the Zapier Platform team. You've got two issues:</p>\n\n<ol>\n<li>You're missing a <code>:</code> for your else, causing the python to not parse correctly</li>\n<li>In your if, you don't want spaces around the <code>\"'\"</code></li>\n<li>You need to read input from the <code>input_data</code> dict</li>\n</ol>\n\n<p>The following code works as expected:</p>\n\n<pre><code>if \"'\" in input_data['Feets']:\n    output = {'Feets': input_data['Feets'].split(\"'\")[0], 'Inches': input_data['Feets'].split(\"'\")[1]}\nelse:\n    output = {'Feets': input_data['Feets'],'Inches': input_data['Inches']}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 8005054, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154376090821594/picture?type=large", "display_name": "Fares Alsyoufi", "link": "https://stackoverflow.com/users/8005054/fares-alsyoufi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 337, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1522957744, "creation_date": 1522272595, "last_edit_date": 1522957744, "question_id": 49544487, "link": "https://stackoverflow.com/questions/49544487/how-to-correctly-return-an-output-dictionary-in-zapier-code-python", "title": "How to correctly return an output dictionary in Zapier Code (Python)?", "body": "<p>I followed Zapier code documentation for Python but I'm still having this issue:</p>\n\n<p><strong>Objective:</strong></p>\n\n<p>I'm trying reformat my input(Feets) from Acuity Scheduling and update it on Salesforce. </p>\n\n<p><strong>Code:</strong></p>\n\n<pre><code>if \" ' \" in input_data['Feets']:\noutput = {'Feets':Feets.split(\"'\")[0],'Inches':Feets.split(\"'\")[1]}\nelse\noutput = {'Feets':Feets,'Inches':Inches}\n</code></pre>\n\n<p><img src=\"https://i.stack.imgur.com/49vTu.png\" alt=\"\"></p>\n\n<p><strong>Output:</strong></p>\n\n<p><img src=\"https://i.stack.imgur.com/e0eDP.png\" alt=\"\"></p>\n\n<p><strong>Update:</strong></p>\n\n<p>I updated the code but now I'm not able to get the output in the later steps.</p>\n\n<p><strong>Input:</strong></p>\n\n<pre><code>if \"'\" in input_data['Feets']:\n      output = {'Feets': input_data['Feets'].split(\"'\")[0],'Inches':input_data['Feets'].split(\"'\")[1]}\nelif \",\" in input_data['Feets']:\n      output = {'Feets': input_data['Feets'].split(\",\")[0],'Inches':input_data['Feets'].split(\",\")[1]}\nelse:\n      output = {'Feets': input_data['Feets'],'Inches': input_data['Inches']}\n</code></pre>\n\n<p><strong>Error message:</strong></p>\n\n<p>Traceback (most recent call last):\n  File \"/tmp/tmpMwZDgy/usercode.py\", line 8, in the_function\n    if \"'\" in input_data['Feets']:\nKeyError: 'Feets'</p>\n\n<p><a href=\"https://i.stack.imgur.com/Wk3Nd.png\" rel=\"nofollow noreferrer\">Screenshot</a></p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 5192, "user_id": 2318649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rW1HG.jpg?s=128&g=1", "display_name": "barny", "link": "https://stackoverflow.com/users/2318649/barny"}, "edited": false, "score": 0, "creation_date": 1522272755, "post_id": 49544444, "comment_id": 86096743, "body": "If nothing else you should print a and do it at the start of the loop not the end. I don\u2019t understand why you couldn\u2019t/didn\u2019t work that out for yourself, though - just add print statements for the variables every time round the loop"}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 9565706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/362b800835b11db1a895dd8e85b3fff4?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/9565706/sam"}, "edited": false, "score": 0, "creation_date": 1522273369, "post_id": 49544524, "comment_id": 86096980, "body": "Thank you so much! I&#39;m still new to python so I&#39;m not familiar with everything (just yet)"}], "tags": [], "owner": {"reputation": 1154, "user_id": 9565387, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-d6Y3JBWunV4/AAAAAAAAAAI/AAAAAAAAAEk/3020ZVdwdFU/photo.jpg?sz=128", "display_name": "ducminh", "link": "https://stackoverflow.com/users/9565387/ducminh"}, "is_accepted": true, "score": 2, "last_activity_date": 1522272748, "creation_date": 1522272748, "answer_id": 49544524, "question_id": 49544444, "link": "https://stackoverflow.com/questions/49544444/non-recursive-pell-function-python/49544524#49544524", "title": "Non recursive pell function python", "body": "<p>You are printing the second value (<code>b</code> in two consecutive values <code>a</code> and <code>b</code>) after changing it, thus it will start from the third element in the sequence. Changing <code>print(b, \"\", end = \"\")</code> to <code>print(a, \"\", end = \"\")</code> and putting it right after <code>for i in range(length):</code> will yield the desired output.</p>\n\n<p>Also, the line <code>print(b, \"\", end = \"\")</code> could be changed to <code>print(b, end=\" \")</code>, same effect but simpler.</p>\n"}, {"tags": [], "owner": {"reputation": 32921, "user_id": 5771269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6a5b618f5bd197150a6186318beba7?s=128&d=identicon&r=PG&f=1", "display_name": "cdlane", "link": "https://stackoverflow.com/users/5771269/cdlane"}, "is_accepted": false, "score": 1, "last_activity_date": 1522273048, "creation_date": 1522273048, "answer_id": 49544590, "question_id": 49544444, "link": "https://stackoverflow.com/questions/49544444/non-recursive-pell-function-python/49544590#49544590", "title": "Non recursive pell function python", "body": "<p>It looks like you're printing the wrong variable at the wrong time.  Instead consider:</p>\n\n<pre><code>def p_sequence():\n    length = int(input(\"Sequence length: \"))\n\n    a, b = 0, 1\n\n    for _ in range(length):\n        print(a, end=\" \")\n        a, b = b, 2 * b + a\n\n    print()\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 9565706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/362b800835b11db1a895dd8e85b3fff4?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/9565706/sam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 647, "favorite_count": 0, "accepted_answer_id": 49544524, "answer_count": 2, "score": 0, "last_activity_date": 1522273048, "creation_date": 1522272417, "question_id": 49544444, "link": "https://stackoverflow.com/questions/49544444/non-recursive-pell-function-python", "title": "Non recursive pell function python", "body": "<pre><code>def p_sequence():\n    length = int(input(\"Sequence length: \"))\n    a = 0\n    b = 1\n    for i in range(length):\n        c = 2*b+a\n        a = b\n        b = c\n        print(b, \"\", end = \"\")\n    print()\n</code></pre>\n\n<p>I'm trying to create a pell function that's non-recursive and I'm stuck. The output that I want is:</p>\n\n<pre><code>length = 4\nOutput: 0 1 2 5\n</code></pre>\n\n<p>What I get:</p>\n\n<pre><code>length = 4\nOutput: 2 5 12 29\n</code></pre>\n\n<p>I tried putting if statements in the for loop but it didn't work out either... help?</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 525, "user_id": 1509214, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2164bceed131b316f2ba1afda5fc4a53?s=128&d=identicon&r=PG&f=1", "display_name": "cdlm", "link": "https://stackoverflow.com/users/1509214/cdlm"}, "edited": false, "score": 0, "creation_date": 1522356854, "post_id": 49544494, "comment_id": 86137932, "body": "My bad, guess I should have RFTM more closely.  Thanks!"}, {"owner": {"reputation": 525, "user_id": 1509214, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2164bceed131b316f2ba1afda5fc4a53?s=128&d=identicon&r=PG&f=1", "display_name": "cdlm", "link": "https://stackoverflow.com/users/1509214/cdlm"}, "edited": false, "score": 0, "creation_date": 1522358592, "post_id": 49544494, "comment_id": 86138768, "body": "This still doesn&#39;t work as expected if the date values on the start of a new week i.e. Monday.  For example, if I apply <code>resample</code> to &#39;2017-03-06&#39; (a Monday), the resampled value is &#39;2017-02-27&#39; which is one week prior.  The result should be the beginning of the week in which &#39;2017-03-06&#39; falls which is &#39;2017-03-06&#39;."}], "tags": [], "owner": {"reputation": 4890, "user_id": 6866811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8b433dba8feffa45967ca5679a5f6ee?s=128&d=identicon&r=PG&f=1", "display_name": "thesilkworm", "link": "https://stackoverflow.com/users/6866811/thesilkworm"}, "is_accepted": false, "score": 1, "last_activity_date": 1522273865, "last_edit_date": 1522273865, "creation_date": 1522272628, "answer_id": 49544494, "question_id": 49544421, "link": "https://stackoverflow.com/questions/49544421/why-does-pandas-roll-a-week-forward-when-using-resample-with-w-mon-frequency/49544494#49544494", "title": "Why does pandas roll a week forward when using resample with W-MON frequency?", "body": "<p>I'm not sure why it's done this way and I agree that the behaviour you expected seems more intuitive. You can get your desired result by passing <code>label='left'</code> as a keyword parameter. The default value in this case was  <code>'right'</code>.</p>\n\n<pre><code>df.resample('W-MON', label='left').size()\n</code></pre>\n\n<p>From the <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.resample.html\" rel=\"nofollow noreferrer\">documentation</a>:</p>\n\n<blockquote>\n  <p><strong>label</strong> : <em>{\u2018right\u2019, \u2018left\u2019}</em></p>\n  \n  <p>Which bin edge label to label bucket with. The default is \u2018left\u2019 for\n  all frequency offsets except for \u2018M\u2019, \u2018A\u2019, \u2018Q\u2019, \u2018BM\u2019, \u2018BA\u2019, \u2018BQ\u2019, and\n  \u2018W\u2019 which all have a default of \u2018right\u2019.</p>\n</blockquote>\n\n<p>I guess <code>'W-MON'</code> still counts as <code>'W'</code> which is why the default is <code>'right'</code> and therefore your example gave a result of <code>'2018-03-12'</code> rather than <code>'2018-03-05'</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "is_accepted": true, "score": 5, "last_activity_date": 1522360112, "last_edit_date": 1522360112, "creation_date": 1522359731, "answer_id": 49565467, "question_id": 49544421, "link": "https://stackoverflow.com/questions/49544421/why-does-pandas-roll-a-week-forward-when-using-resample-with-w-mon-frequency/49565467#49565467", "title": "Why does pandas roll a week forward when using resample with W-MON frequency?", "body": "<p>Let's try using <code>label</code> and <code>closed</code> <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.resample.html#pandas-dataframe-resample\" rel=\"noreferrer\">see docs</a>:</p>\n\n<pre><code>values = [1, 1, 1]\ndates = pd.to_datetime(np.repeat('2018-03-06', 3))\ndf = pd.DataFrame({\n    'value': values\n}, index=dates)\ndf.resample('W-MON', label='left',closed='left').size()\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>2018-03-05    3\nFreq: W-MON, dtype: int64\n</code></pre>\n\n<p>And,</p>\n\n<pre><code>values = [1, 1, 1]\ndates = pd.to_datetime(np.repeat('2018-03-05', 3))\ndf = pd.DataFrame({\n    'value': values\n}, index=dates)\ndf.resample('W-MON', label='left',closed='left').size()\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>2018-03-05    3\nFreq: W-MON, dtype: int64\n</code></pre>\n\n<blockquote>\n  <p><strong>Interesting note</strong> about the docs, the signature states that 'closed'\n  defaults to None.  However, the docstring states that 'closed' default\n  'left'.</p>\n</blockquote>\n"}], "owner": {"reputation": 525, "user_id": 1509214, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2164bceed131b316f2ba1afda5fc4a53?s=128&d=identicon&r=PG&f=1", "display_name": "cdlm", "link": "https://stackoverflow.com/users/1509214/cdlm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1883, "favorite_count": 1, "accepted_answer_id": 49565467, "answer_count": 2, "score": 7, "last_activity_date": 1522360112, "creation_date": 1522272289, "last_edit_date": 1522359042, "question_id": 49544421, "link": "https://stackoverflow.com/questions/49544421/why-does-pandas-roll-a-week-forward-when-using-resample-with-w-mon-frequency", "title": "Why does pandas roll a week forward when using resample with W-MON frequency?", "body": "<p>As example, I have the following code which creates a dataframe with an index containing a single value - the date '2018-03-06' (a Tuesday).  Note that this date falls in the week of 2018-03-05 (a Monday):</p>\n\n<pre><code>values = [1, 1, 1]\ndates = pd.to_datetime(np.repeat('2018-03-06', 3))\ndf = pd.DataFrame({\n    'value': values\n}, index=dates)\ndf.resample('W-MON').size()\n</code></pre>\n\n<p>which produces:</p>\n\n<pre><code>2018-03-12    3\nFreq: W-MON, dtype: int64\n</code></pre>\n\n<p>Why does pandas roll the date forward one week?  I would have expected the result to have been resampled to 2018-03-05 since that is the week during which the values were generated and I'm using <code>freq='W-MON'</code>.</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>As was pointed out, I needed to add the <code>label</code> argument to <code>resample</code> which defines which bin edge to use.  Using <code>label='left'</code> solves the problem of bucketing the dates in the correct week except when the date falls on the start of the week (in this case, Monday).  For example, if I apply resample to the date 2018-03-05 using <code>label='left'</code> then the resampled value is 2018-02-26 when it should be 2018-03-05.</p>\n"}, {"tags": ["python", "tensorflow"], "answers": [{"tags": [], "owner": {"reputation": 25553, "user_id": 4790871, "user_type": "registered", "accept_rate": 99, "profile_image": "https://lh4.googleusercontent.com/-7sCm6Bl96nw/AAAAAAAAAAI/AAAAAAAAAH4/0LGbJtwJZd0/photo.jpg?sz=128", "display_name": "David Parks", "link": "https://stackoverflow.com/users/4790871/david-parks"}, "is_accepted": true, "score": 1, "last_activity_date": 1522277521, "creation_date": 1522277521, "answer_id": 49545422, "question_id": 49544410, "link": "https://stackoverflow.com/questions/49544410/switching-from-tf-contrib-layers-conv2d-to-tf-nn-conv2d/49545422#49545422", "title": "Switching from tf.contrib.layers.conv2d to tf.nn.conv2d", "body": "<p>You seem to have gotten the shapes correct, the most obvious issue appears to be that you aren't supposed to tell <code>tf.nn.conv2d</code> the shapes, you're supposed to pass it the actual weight tensor.</p>\n\n<pre><code>down0w = tf.get_variable(\"down0w\", shape=[3, 3, input_layer.shape[-1], n_features], initializer=tf.contrib.layers.xavier_initializer())\ndown0a = tf.nn.conv2d(input_layer, filter=down0w, strides=[1, 1, 1, 1], padding='SAME')\n</code></pre>\n"}], "owner": {"reputation": 2268, "user_id": 6409572, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/i2paq.jpg?s=128&g=1", "display_name": "Honeybear", "link": "https://stackoverflow.com/users/6409572/honeybear"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 642, "favorite_count": 0, "accepted_answer_id": 49545422, "answer_count": 1, "score": 2, "last_activity_date": 1522277521, "creation_date": 1522272234, "question_id": 49544410, "link": "https://stackoverflow.com/questions/49544410/switching-from-tf-contrib-layers-conv2d-to-tf-nn-conv2d", "title": "Switching from tf.contrib.layers.conv2d to tf.nn.conv2d", "body": "<p>I am using <code>tf.contrib.layers.conv2d</code> so far, but (e.g. to allow for weight decay filters as discussed <a href=\"https://stackoverflow.com/questions/42785026/tf-nn-conv2d-vs-tf-layers-conv2d\">here</a>) I want to switch to the <code>tf.nn.conv2d</code> implementation. However I am confused regarding the parameters, since apparently I need to specify things that before I haven't.</p>\n\n<p>With doc and SO entries I gave it a try. For 4D-Tensors with [batch_size, x, y, channels], <strong>are these two versions identical?</strong> I.e. am I correct in assuming that input_layer.shape[-1] represents the <code>input_channels</code> as required in <code>filter</code> and that I have to explicitly set strides to the number of dims of my input tensor:</p>\n\n<p><em>with tf.contrib.layers.conv2d  (original)</em></p>\n\n<pre><code>down0a = tf.contrib.layers.conv2d(input_layer, n_features, (3, 3))\ndown0b = tf.contrib.layers.conv2d(down0a, n_features, (3, 3))\ndown0c = tf.contrib.layers.max_pool2d(down0b_do, (2, 2), padding='same')\n</code></pre>\n\n<p><em>with tf.nn.conv2d</em></p>\n\n<pre><code>down0a = tf.nn.conv2d(input_layer, filter=[3, 3, input_layer.shape[-1], n_features], strides=[1, 1, 1, 1], padding='SAME')\ndown0ar = tf.nn.relu(down0a)\ndown0b = tf.nn.conv2d(down0ar, filter=[3, 3, down0ar.shape[-1], n_features], strides=[1, 1, 1, 1], padding='SAME')\ndown0br = tf.nn.relu(down0b)\ndown0c = tf.nn.max_pool(down0br, [2, 2, down0br.shape[-1], n_features], strides=[1, 1, 1, 1], padding='SAME')\n</code></pre>\n"}, {"tags": ["python", "dictionary", "line-breaks"], "comments": [{"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 1, "creation_date": 1522272069, "post_id": 49544353, "comment_id": 86096465, "body": "It&#39;s not super pretty, but you could break it across multiple lines so the indices form a column (in other words visually stack them)"}, {"owner": {"reputation": 39529, "user_id": 2063361, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/jB77z.jpg?s=128&g=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/2063361/anonymous"}, "edited": false, "score": 2, "creation_date": 1522272164, "post_id": 49544353, "comment_id": 86096512, "body": "you may also store the intermediate values of your nested dictionary which are accessed earlier in separate/meaningful variables"}, {"owner": {"reputation": 6961, "user_id": 1248974, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ClqC2.jpg?s=128&g=1", "display_name": "davedwards", "link": "https://stackoverflow.com/users/1248974/davedwards"}, "edited": false, "score": 0, "creation_date": 1522272383, "post_id": 49544353, "comment_id": 86096594, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/3985563/python-best-formatting-practice-for-lists-dictionary-etc\">Python &quot;best formatting practice&quot; for lists, dictionary, etc</a>"}, {"owner": {"reputation": 640, "user_id": 1073754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6678d76f1b73e4e5a508697c689d404?s=128&d=identicon&r=PG", "display_name": "Eric D&#39;Souza", "link": "https://stackoverflow.com/users/1073754/eric-dsouza"}, "edited": false, "score": 0, "creation_date": 1522365080, "post_id": 49544353, "comment_id": 86140932, "body": "davedwards - i updated my question as i should have said nested dictionaries.  i think the possible duplicate you&#39;ve linked is for large lists, but not excessive nesting (based on my original incorrectly worded question the duplicate would have applied)"}], "answers": [{"comments": [{"owner": {"reputation": 640, "user_id": 1073754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6678d76f1b73e4e5a508697c689d404?s=128&d=identicon&r=PG", "display_name": "Eric D&#39;Souza", "link": "https://stackoverflow.com/users/1073754/eric-dsouza"}, "edited": false, "score": 1, "creation_date": 1522364562, "post_id": 49544409, "comment_id": 86140785, "body": "you are right, i was referring to nested dictionaries and not lists.  I have updated my question, as well as adding the sample json that I&#39;m trying to read.  I did not know about the implied line continuation inside parentheses, that solves my problem!"}], "tags": [], "owner": {"reputation": 64040, "user_id": 3620003, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QnqtZ.jpg?s=128&g=1", "display_name": "timgeb", "link": "https://stackoverflow.com/users/3620003/timgeb"}, "is_accepted": true, "score": 5, "last_activity_date": 1522272562, "last_edit_date": 1522272562, "creation_date": 1522272234, "answer_id": 49544409, "question_id": 49544353, "link": "https://stackoverflow.com/questions/49544353/line-wrapping-code-for-nested-dictionaries-in-python/49544409#49544409", "title": "Line wrapping code for nested dictionaries in python", "body": "<p>You are probably refering to nested dictionaries, lists only accept integer indices.</p>\n\n<p>Anyway, (ab?)using the implied line continuation inside parentheses, I think this is pretty readable:</p>\n\n<pre><code>&gt;&gt;&gt; d = {'a':{'b':{'c':'value'}}}\n&gt;&gt;&gt; (d\n...     ['a']\n...     ['b']\n...     ['c']\n... )\n'value'\n</code></pre>\n\n<p>or alternatively</p>\n\n<pre><code>&gt;&gt;&gt; (d['a']\n...   ['b']\n...   ['c'])\n'value'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8277, "user_id": 1682419, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/19B6c.png?s=128&g=1", "display_name": "Jerry101", "link": "https://stackoverflow.com/users/1682419/jerry101"}, "is_accepted": false, "score": 0, "last_activity_date": 1522272946, "creation_date": 1522272946, "answer_id": 49544565, "question_id": 49544353, "link": "https://stackoverflow.com/questions/49544353/line-wrapping-code-for-nested-dictionaries-in-python/49544565#49544565", "title": "Line wrapping code for nested dictionaries in python", "body": "<p>First, you can use some <strong>well-named intermediate variables</strong> to make the program more readable as well as simpler and faster:</p>\n\n<pre><code>volumes = intent['slots']  # Pick meaningful names. I'm just guessing.\nif 'VolumeQuantity' in volumes:\n    quantity = volumes['VolumeQuantity']\n    if 'resolutions' in quantity:\n        half_decibels = quantity['resolutions']['resolutionsPerAuthority'][0]['values'][0]['value']['name'].strip()\n    elif 'value' in quantity:\n        half_decibels = quantity['value'].strip()\n</code></pre>\n\n<p>Second, you can write a <strong>helper function</strong> <code>nav(structure, path)</code> for navigating through these structures, so that, e.g.</p>\n\n<pre><code>nav(quantity, 'resolutions.resolutionsPerAuthority.0.values.0.value.name')\n</code></pre>\n\n<p>splits up the given path and does the sequence of indexing/lookup operations. It could use <code>dict.get(key, default)</code> so you don't have to do so many <code>if key in dict</code> checks.</p>\n"}], "owner": {"reputation": 640, "user_id": 1073754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6678d76f1b73e4e5a508697c689d404?s=128&d=identicon&r=PG", "display_name": "Eric D&#39;Souza", "link": "https://stackoverflow.com/users/1073754/eric-dsouza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 980, "favorite_count": 0, "accepted_answer_id": 49544409, "answer_count": 2, "score": 3, "last_activity_date": 1522365499, "creation_date": 1522271946, "last_edit_date": 1522365499, "question_id": 49544353, "link": "https://stackoverflow.com/questions/49544353/line-wrapping-code-for-nested-dictionaries-in-python", "title": "Line wrapping code for nested dictionaries in python", "body": "<p>with the new <a href=\"https://developer.amazon.com/blogs/alexa/post/5882651c-6377-4bc7-bfd7-0fd661d95abc/entity-resolution-in-skill-builder\" rel=\"nofollow noreferrer\">Entity Resolution</a> in Alexa, nested dictionaries become very nested.  what's the most pythonic way to refer to a deeply nested value?  how do i write the code keeping within 79 characters per line?</p>\n\n<p>this is what i currently have, and while it works, i'm pretty sure there is a better way:</p>\n\n<pre><code>if 'VolumeQuantity' in intent['slots']:\n    if 'resolutions' in intent['slots']['VolumeQuantity']:\n        half_decibels = intent['slots']['VolumeQuantity']['resolutions']['resolutionsPerAuthority'][0]['values'][0]['value']['name'].strip()\n    elif 'value' in intent['slots']['VolumeQuantity']:\n        half_decibels = intent['slots']['VolumeQuantity']['value'].strip()\n</code></pre>\n\n<p>Here is a partial sample of the json from alexa</p>\n\n<pre><code>  {\n    \"type\": \"IntentRequest\",\n    \"requestId\": \"amzn1.echo-api.request.9a...11\",\n    \"timestamp\": \"2018-03-28T20:37:21Z\",\n    \"locale\": \"en-US\",\n    \"intent\": {\n      \"name\": \"RelativeVolumeIntent\",\n      \"confirmationStatus\": \"NONE\",\n      \"slots\": {\n        \"VolumeQuantity\": {\n          \"name\": \"VolumeQuantity\",\n          \"confirmationStatus\": \"NONE\"\n        },\n        \"VolumeDirection\": {\n          \"name\": \"VolumeDirection\",\n          \"value\": \"softer\",\n          \"resolutions\": {\n            \"resolutionsPerAuthority\": [\n              {\n                \"authority\": \"amzn1.er-authority.echo-blah-blah-blah\",\n                \"status\": {\n                  \"code\": \"ER_SUCCESS_MATCH\"\n                },\n                \"values\": [\n                  {\n                    \"value\": {\n                      \"name\": \"down\",\n                      \"id\": \"down\"\n                    }\n                  }\n                ]\n              }\n            ]\n          },\n          \"confirmationStatus\": \"NONE\"\n        }\n      }\n    },\n    \"dialogState\": \"STARTED\"\n  }\n</code></pre>\n"}, {"tags": ["python", "installation", "pip", "airflow"], "answers": [{"tags": [], "owner": {"reputation": 2833, "user_id": 661740, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/d0a8995675440b57ad1cc7156b912e3b?s=128&d=identicon&r=PG", "display_name": "Greg Dougherty", "link": "https://stackoverflow.com/users/661740/greg-dougherty"}, "is_accepted": true, "score": 3, "last_activity_date": 1522292229, "creation_date": 1522292229, "answer_id": 49547301, "question_id": 49544320, "link": "https://stackoverflow.com/questions/49544320/airflow-initdb-failed-importerror-no-module-named-log-logging-mixin/49547301#49547301", "title": "airflow initdb failed: ImportError: No module named log.logging_mixin", "body": "<p>So, the problem is that pip overestimates when it's finished.</p>\n\n<p>I uninstalled airflow, then reinstalled it, and pip complained about the presence of /apps/dist/python/bin/airflow</p>\n\n<p>Uninstalled again, deleted /apps/dist/python/bin/airflow, reinstalled, and now everything works</p>\n"}], "owner": {"reputation": 2833, "user_id": 661740, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/d0a8995675440b57ad1cc7156b912e3b?s=128&d=identicon&r=PG", "display_name": "Greg Dougherty", "link": "https://stackoverflow.com/users/661740/greg-dougherty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4100, "favorite_count": 0, "accepted_answer_id": 49547301, "answer_count": 1, "score": 1, "last_activity_date": 1522292272, "creation_date": 1522271796, "last_edit_date": 1522292272, "question_id": 49544320, "link": "https://stackoverflow.com/questions/49544320/airflow-initdb-failed-importerror-no-module-named-log-logging-mixin", "title": "airflow initdb failed: ImportError: No module named log.logging_mixin", "body": "<p>I had airflow 1.7.0 installed on a machine where I don't have root access.  Everything is installed in /apps/dist/ for which I'm the owner</p>\n\n<p>Ran </p>\n\n<pre><code>$ pip install apache-airflow\n</code></pre>\n\n<p>I had a lot of success, until this:</p>\n\n<pre><code>Installing collected packages: webencodings, html5lib, bleach, configparser, flask-wtf, future, gunicorn, apache-airflow\n  Found existing installation: Flask-WTF 0.12\n    Uninstalling Flask-WTF-0.12:\n      Successfully uninstalled Flask-WTF-0.12\n  Found existing installation: future 0.15.2\n    Uninstalling future-0.15.2:\n      Successfully uninstalled future-0.15.2\n  Found existing installation: gunicorn 19.3.0\n    Uninstalling gunicorn-19.3.0:\n      Successfully uninstalled gunicorn-19.3.0\nException:\nTraceback (most recent call last):\n  File \"/apps/dist/python/lib/python2.7/site-packages/pip/basecommand.py\", line 215, in main\n    status = self.run(options, args)\n  File \"/apps/dist/python/lib/python2.7/site-packages/pip/commands/install.py\", line 342, in run\n    prefix=options.prefix_path,\n  File \"/apps/dist/python/lib/python2.7/site-packages/pip/req/req_set.py\", line 784, in install\n    **kwargs\n  File \"/apps/dist/python/lib/python2.7/site-packages/pip/req/req_install.py\", line 851, in install\n    self.move_wheel_files(self.source_dir, root=root, prefix=prefix)\n  File \"/apps/dist/python/lib/python2.7/site-packages/pip/req/req_install.py\", line 1064, in move_wheel_files\n    isolated=self.isolated,\n  File \"/apps/dist/python/lib/python2.7/site-packages/pip/wheel.py\", line 345, in move_wheel_files\n    clobber(source, lib_dir, True)\n  File \"/apps/dist/python/lib/python2.7/site-packages/pip/wheel.py\", line 329, in clobber\n    os.utime(destfile, (st.st_atime, st.st_mtime))\nOSError: [Errno 1] Operation not permitted: '/apps/dist/python/lib/python2.7/site-packages/airflow/configuration.py'\nYou are using pip version 9.0.1, however version 9.0.3 is available.\nYou should consider upgrading via the 'pip install --upgrade pip' command.\n</code></pre>\n\n<p>So I took their advice, and upgraded pip:</p>\n\n<pre><code>$ pip install --upgrade pip\nCollecting pip\n  Downloading pip-9.0.3-py2.py3-none-any.whl (1.4MB)\n    100% |\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 1.4MB 826kB/s \nInstalling collected packages: pip\n  Found existing installation: pip 9.0.1\n    Uninstalling pip-9.0.1:\n      Successfully uninstalled pip-9.0.1\nSuccessfully installed pip-9.0.3\n</code></pre>\n\n<p>So then I re-ran pip install apache-airflow, and got 57 lines of \"Requirement already satisfied\".  Next step:</p>\n\n<pre><code>$ airflow initdb\nTraceback (most recent call last):\n  File \"/apps/dist/python/bin/airflow\", line 17, in &lt;module&gt;\n    from airflow import configuration\n  File \"/apps/dist/python/lib/python2.7/site-packages/airflow/__init__.py\", line 29, in &lt;module&gt;\n    from airflow import configuration as conf\n  File \"/apps/dist/python/lib/python2.7/site-packages/airflow/configuration.py\", line 31, in &lt;module&gt;\n    from airflow.utils.log.logging_mixin import LoggingMixin\nImportError: No module named log.logging_mixin\n</code></pre>\n\n<p>I searched for \"ImportError: No module named log.logging_mixin\", and got a bunch of hits discussion logging.  So I searched for ImportError: No module named \"log.logging_mixin\", and got essentially no hits.</p>\n\n<p>What am I missing?</p>\n"}, {"tags": ["python", "html", "selenium"], "comments": [{"owner": {"reputation": 1930, "user_id": 9537244, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oUrDo.png?s=128&g=1", "display_name": "ilja", "link": "https://stackoverflow.com/users/9537244/ilja"}, "edited": false, "score": 0, "creation_date": 1522271881, "post_id": 49544272, "comment_id": 86096356, "body": "Are your sure about the ids? I cannt find <code>PeriodicoCmb1_Input</code>, <code>PeriodoCmb1_Input</code> and <code>PesquisaTxt1</code> on the page?"}], "answers": [{"comments": [{"owner": {"reputation": 131, "user_id": 7537290, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c26af571f4ba3d653c8daa2562d741c0?s=128&d=identicon&r=PG&f=1", "display_name": "Phantom139", "link": "https://stackoverflow.com/users/7537290/phantom139"}, "edited": false, "score": 0, "creation_date": 1522292096, "post_id": 49545138, "comment_id": 86101937, "body": "Worked like a charm, some more modifications are needed to capture the update events on the JS elements, but I think I should be able to figure it out from here. Thanks!"}], "tags": [], "owner": {"reputation": 1765, "user_id": 2896125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b50e2389d60321e363a90fa4d314870a?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/2896125/alex"}, "is_accepted": true, "score": 1, "last_activity_date": 1522275859, "creation_date": 1522275859, "answer_id": 49545138, "question_id": 49544272, "link": "https://stackoverflow.com/questions/49544272/using-python-to-scrape-a-js-form/49545138#49545138", "title": "Using Python to Scrape a JS Form", "body": "<p>Your DOM elements you are trying to find are located in <code>iframe</code>. So before using <code>find_element_by_id</code> API you should switch to iframe context.</p>\n\n<p>Here is a code how to switch to <code>iframe</code> context:</p>\n\n<pre><code># add your code\n\nframe_ref = browser.find_elements_by_tag_name(\"iframe\")[0]\n\niframe = browser.switch_to.frame(frame_ref)\n\njournal = browser.find_element_by_id(\"PeriodicoCmb1_Input\")\n\ntimeRange = browser.find_element_by_id(\"PeriodoCmb1_Input\")\n\nsearchTerm = browser.find_element_by_id(\"PesquisaTxt1\")\n\n# add your code\n</code></pre>\n\n<p>Here is a <a href=\"http://selenium-python.readthedocs.io/navigating.html#moving-between-windows-and-frames\" rel=\"nofollow noreferrer\">link</a> describing switching to <code>iframe</code> context.</p>\n"}], "owner": {"reputation": 131, "user_id": 7537290, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c26af571f4ba3d653c8daa2562d741c0?s=128&d=identicon&r=PG&f=1", "display_name": "Phantom139", "link": "https://stackoverflow.com/users/7537290/phantom139"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 193, "favorite_count": 0, "accepted_answer_id": 49545138, "answer_count": 1, "score": 0, "last_activity_date": 1613670769, "creation_date": 1522271560, "last_edit_date": 1613670769, "question_id": 49544272, "link": "https://stackoverflow.com/questions/49544272/using-python-to-scrape-a-js-form", "title": "Using Python to Scrape a JS Form", "body": "<p>I'm currently working on a research project in which we are trying to collect saved image files from Brazil's Hemeroteca database. I've done web scraping on PHP pages before using C/C++ with HTML forms, but as this is a shared script, I need to switch to python such that everyone in the group can use this tool.</p>\n<p>The page which I'm trying to scrape is: <a href=\"http://bndigital.bn.gov.br/hemeroteca-digital/\" rel=\"nofollow noreferrer\">http://bndigital.bn.gov.br/hemeroteca-digital/</a></p>\n<p>There are three forms which populate, the first being the newspaper/journal. Upon selecting this, the available times populate, and the final field is the search term. I've inspected the HTML page here and the three IDs of these are respectively: 'PeriodicoCmb1_Input', 'PeriodoCmb1_Input', and 'PesquisaTxt1'.</p>\n<p>Some google searches on this topic led me to the Selenium package, and I've put together this sample code to attempt to read the page:</p>\n<pre><code>import webbrowser\nimport requests\nfrom selenium import webdriver\nfrom selenium.webdriver.common.keys import Keys\nfrom selenium import webdriver\nfrom selenium.webdriver.support.wait import WebDriverWait\nfrom selenium.webdriver.support import expected_conditions as EC\nfrom selenium.webdriver.common.by import By\nimport time\n\nprint(&quot;Begin...&quot;)\n\nbrowser = webdriver.Chrome()\nurl = &quot;http://bndigital.bn.gov.br/hemeroteca-digital/&quot;\nbrowser.get(url)\n\nprint(&quot;Waiting to load page... (Delay 3 seconds)&quot;)\n\ntime.sleep(3)\n\nprint(&quot;Searching for elements&quot;)\n\njournal = browser.find_element_by_id(&quot;PeriodicoCmb1_Input&quot;)\ntimeRange = browser.find_element_by_id(&quot;PeriodoCmb1_Input&quot;)\nsearchTerm = browser.find_element_by_id(&quot;PesquisaTxt1&quot;)\n\nprint(journal)\n\nprint(&quot;Set fields, delay 3 seconds between input&quot;)\n\nsearch_journal = &quot;Relatorios dos Presidentes dos Estados Brasileiros (BA)&quot;\nsearch_timeRange = &quot;1890 - 1899&quot;\nsearch_text = &quot;Milho&quot;\n\njournal.send_keys(search_journal)\ntime.sleep(3)\ntimeRange.send_keys(search_timeRange)\ntime.sleep(3)\nsearchTerm.send_keys(search_text)\n\nprint(&quot;Perform search&quot;)\n\nsubmitButton = button.find_element_by_id(&quot;PesquisarBtn1_input&quot;)  \nsubmitButton.click()\n</code></pre>\n<p>The script runs to the print(journal) statement, where an error is thrown saying the element cannot be found.</p>\n<p>Can anyone take a quick sweep of the page in question and make sure I've got the general premise of this script in line correctly, or point me towards some examples to get me running on this problem?</p>\n<p>Thanks!</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 57, "user_id": 8507446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71081484d736a8bb9d2d76e8e0648892?s=128&d=identicon&r=PG&f=1", "display_name": "Joseph Petroske", "link": "https://stackoverflow.com/users/8507446/joseph-petroske"}, "is_accepted": false, "score": 0, "last_activity_date": 1522275572, "last_edit_date": 1592644375, "creation_date": 1522275572, "answer_id": 49545093, "question_id": 49544207, "link": "https://stackoverflow.com/questions/49544207/speed-up-calculating-returns/49545093#49545093", "title": "Speed Up Calculating Returns", "body": "<p>I'm not very familiar with pandas, but I'll give this a shot.</p>\n<h1>Problem with your solution</h1>\n<p>Your solution currently does a huge amount of unnecessary calculation. This is mostly due to the line:</p>\n<pre><code>    df['return'] = df.px_last.pct_change()\n</code></pre>\n<p>This line is actually calcuating the percent change for <em>every</em> date between start and end. Just fixing this issue should give you a huge speed up. You should just get the start price and the end price and compare the two. The prices inbetween these two prices are completely irrelevant to your calculations. Again, my familiarity with pandas is nil, but you should do something like this instead:</p>\n<pre><code>def calc_comp_returns(price_df, start_date=None, end_date=None, security=None):\n    df = price_df[price_df.security_id == security]\n    df = df.set_index(['asof'])\n    df = df.loc[start_date:end_date]\n    return 1 + (df['px_last'].iloc(-1) - df['px_last'].iloc(0)\n</code></pre>\n<p>Remember that this code relies on the fact that price_df is sorted by date, so be careful to make sure you only pass <code>calc_comp_returns</code> a date-sorted price_df.</p>\n"}, {"comments": [{"owner": {"reputation": 749, "user_id": 5293603, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-uIKweoGIsew/AAAAAAAAAAI/AAAAAAAAAJk/cIl03iGYPsA/photo.jpg?sz=128", "display_name": "roarkz", "link": "https://stackoverflow.com/users/5293603/roarkz"}, "edited": false, "score": 0, "creation_date": 1522277512, "post_id": 49545103, "comment_id": 86098393, "body": "Never knew about the <code>%prun</code> magic function. That is really useful. Thanks!"}], "tags": [], "owner": {"reputation": 628, "user_id": 9291575, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-JImm-luWgdQ/AAAAAAAAAAI/AAAAAAAACtQ/qARpsNYVCdM/photo.jpg?sz=128", "display_name": "Aule Mahal", "link": "https://stackoverflow.com/users/9291575/aule-mahal"}, "is_accepted": true, "score": 1, "last_activity_date": 1522275629, "creation_date": 1522275629, "answer_id": 49545103, "question_id": 49544207, "link": "https://stackoverflow.com/questions/49544207/speed-up-calculating-returns/49545103#49545103", "title": "Speed Up Calculating Returns", "body": "<p>Here is a solution (100x times faster on my computer with some dummy data).</p>\n\n<pre><code>import numpy as np\n\nprice_df = price_df.set_index('asof')\n\ndef calc_comp_returns_fast(price_df, start_date, end_date, security):\n    rows = price_df[price_df.security_id == security].loc[start_date:end_date]\n    changes = rows.px_last.pct_change()\n    comp_rtrn = np.prod(changes + 1)\n    return comp_rtrn\n</code></pre>\n\n<p>Or, as a one-liner:</p>\n\n<pre><code> def calc_comp_returns_fast(price_df, start_date, end_date, security):\n    return np.prod(price_df[price_df.security_id == security].loc[start_date:end_date].px_last.pct_change() + 1)\n</code></pre>\n\n<p>Not that I call the <code>set_index</code> method beforehand, it only needs to be done once on the entire <code>price_df</code> dataframe. </p>\n\n<p>It is faster because it does not recreate DataFrames at each step. In your code, <code>df</code> is overwritten almost at each line by a new dataframe. Both the init process and the garbage collection (erasing unused data from memory) take a lot of time. </p>\n\n<p>In my code, <code>rows</code> is a slice or a \"view\" of the original data, it does not need to copy or re-init any object. Also, I used directly the numpy product function, which is the same as taking the last cumprod element (pandas uses <code>np.cumprod</code> internally anyway).</p>\n\n<p>Suggestion : if you are using IPython, Jupyter or Spyder, you can use the magic <code>%prun calc_comp_returns(...)</code> to see which part takes the most time. I ran it on your code, and it was the garbage collector, using like more than 50% of the total running time!</p>\n"}, {"tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": false, "score": 0, "last_activity_date": 1522277271, "creation_date": 1522277271, "answer_id": 49545375, "question_id": 49544207, "link": "https://stackoverflow.com/questions/49544207/speed-up-calculating-returns/49545375#49545375", "title": "Speed Up Calculating Returns", "body": "<p>We'll use <code>pd.merge_asof</code> to grab prices from <code>prices_df</code>.  However, when we do, we'll need to have relevant dataframes sorted by the date columns we are utilizing.  Also, for convenience, I'll aggregate some <code>pd.merge_asof</code> parameters in dictionaries to be used as keyword arguments.</p>\n\n<pre><code>prices_df = prices_df.sort_values(['asof'])\n\naed = events_df.sort_values('asof')\nded = events_df.sort_values('disclosed_on')\n\naokw = dict(\n    left_on='asof', right_on='asof',\n    left_by='security_ref_id', right_by='security_id'\n)\n\nstart_price = pd.merge_asof(aed, prices_df, **aokw).px_last\n\ndokw = dict(\n    left_on='disclosed_on', right_on='asof',\n    left_by='security_ref_id', right_by='security_id'\n)\n\nend_price = pd.merge_asof(ded, prices_df, **dokw).px_last\n\nreturns = end_price.div(start_price).sub(1).rename('return')\nevents_df.join(returns)\n\n        asof        disclosed_on  security_ref_id    return\n0 2015-01-05 2015-01-09 16:31:00                1  0.040816\n1 2018-03-22 2018-03-27 16:33:00             3616       NaN\n2 2017-08-03 2018-03-27 12:13:00             2591       NaN\n3 2018-03-22 2018-03-27 11:33:00             3615       NaN\n4 2018-03-22 2018-03-27 10:51:00             3615       NaN\n</code></pre>\n"}], "owner": {"reputation": 749, "user_id": 5293603, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-uIKweoGIsew/AAAAAAAAAAI/AAAAAAAAAJk/cIl03iGYPsA/photo.jpg?sz=128", "display_name": "roarkz", "link": "https://stackoverflow.com/users/5293603/roarkz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 278, "favorite_count": 0, "accepted_answer_id": 49545103, "answer_count": 3, "score": 3, "last_activity_date": 1522277271, "creation_date": 1522271269, "question_id": 49544207, "link": "https://stackoverflow.com/questions/49544207/speed-up-calculating-returns", "title": "Speed Up Calculating Returns", "body": "<p>I am using python 2.7. I am looking to calculate compounding returns from daily returns and my current code is pretty slow at calculating returns, so I was looking for areas where I could gain efficiency. </p>\n\n<p>What I want to do is pass two dates and a security into a price table and calulate the compounding returns between those dates using the giving security.</p>\n\n<p>I have a price table (<code>prices_df</code>):</p>\n\n<pre><code>security_id px_last    asof\n    1       3.055   2015-01-05\n    1       3.360   2015-01-06\n    1       3.315   2015-01-07\n    1       3.245   2015-01-08\n    1       3.185   2015-01-09\n</code></pre>\n\n<p>I also have a table with two dates and security (<code>events_df</code>):</p>\n\n<pre><code>asof            disclosed_on    security_ref_id\n2015-01-05  2015-01-09 16:31:00     1\n2018-03-22  2018-03-27 16:33:00     3616\n2017-08-03  2018-03-27 12:13:00     2591\n2018-03-22  2018-03-27 11:33:00     3615\n2018-03-22  2018-03-27 10:51:00     3615\n</code></pre>\n\n<p>Using the two dates in this table, I want to use the price table to calculate the returns.</p>\n\n<p>The two functions I am using:</p>\n\n<pre><code>import pandas as pd\n# compounds returns\ndef cum_rtrn(df):\n    df_out = df.add(1).cumprod()\n    df_out['return'].iat[0] = 1\n    return df_out\n\n# calculates compound returns from prices between two dates\ndef calc_comp_returns(price_df, start_date=None, end_date=None, security=None):\n    df = price_df[price_df.security_id == security]\n    df = df.set_index(['asof'])\n    df = df.loc[start_date:end_date]\n    df['return'] = df.px_last.pct_change()\n    df = df[['return']]\n    df = cum_rtrn(df)\n    return df.iloc[-1][0]\n</code></pre>\n\n<p>I then iterate over the <code>events_df</code> with <code>.iterrows</code> passng the <code>calc_comp_returns</code> function each time. However, this is a very slow process as I have 10K+ iterations, so I am looking for improvements. Solution does not need to be based in <code>pandas</code> </p>\n\n<pre><code># example of how function is called\nstart = datetime.datetime.strptime('2015-01-05', '%Y-%m-%d').date()\nend = datetime.datetime.strptime('2015-01-09', '%Y-%m-%d').date()\ncalc_comp_returns(prices_df, start_date=start, end_date=end, security=1)\n</code></pre>\n"}, {"tags": ["python", "tensorflow", "regression", "conv-neural-network"], "answers": [{"tags": [], "owner": {"reputation": 5, "user_id": 8049129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7848e44005ce09b9a48e66a2270e5ca2?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Collins", "link": "https://stackoverflow.com/users/8049129/adam-collins"}, "is_accepted": false, "score": 0, "last_activity_date": 1522381505, "creation_date": 1522381505, "answer_id": 49568096, "question_id": 49544165, "link": "https://stackoverflow.com/questions/49544165/having-to-scope-reuse-variables-to-get-network-to-train-as-regression/49568096#49568096", "title": "Having to scope,reuse_variables() to get network to train as regression", "body": "<p>I keep asking stupid questions, but here was the answer for anyone who has this problem in the future. </p>\n\n<p>I found that since I was going from so many output classes, to just one, it really sped up the convergence speed of the network. The pictures actually just indicate a network that converged to all the same answer in just a few training steps. To fix this, you can set the learning rate to 1/10000th (or something similar)of what it was and get a trainable net. In my case the structure for the classifier was learning well at a.001 rate, but when given just one output neuron I needed a .00000001 learning rate to converge to a more acceptable soltuion. Good luck!</p>\n"}], "owner": {"reputation": 5, "user_id": 8049129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7848e44005ce09b9a48e66a2270e5ca2?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Collins", "link": "https://stackoverflow.com/users/8049129/adam-collins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 76, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1522381640, "creation_date": 1522271112, "last_edit_date": 1522381640, "question_id": 49544165, "link": "https://stackoverflow.com/questions/49544165/having-to-scope-reuse-variables-to-get-network-to-train-as-regression", "title": "Having to scope,reuse_variables() to get network to train as regression", "body": "<p>In my train() method the variable where I store the logit return value from the method is not working the first time. Specific section is shown here:</p>\n\n<pre><code>with tf.variable_scope(\"logits_out\") as scope:\n    logits_out = network(image_batch)\n    scope.reuse_variables()\n    v_logits_out = network(v_image_batch)\n    scope.reuse_variables()\n    reused_logits_out = network(image_batch)\n</code></pre>\n\n<p>The first and second calls to network are for the original input images, and the validation images. (I test validate every 100 training steps). However, the output of logits_out would be a constant for the first call (As displayed on tensorboard). The second call, however, would yield different values (as shown in tensorboard), so I tried adding a third call with the original images, shown above as reused_logits_out. And it results in non constant guesses, however the loss function never changes. The loss function is using the 3rd call to the network(), and yet it shows no change, and the tensorboard logs agree. However, the outputs I get with the infer_out using that loss function changes! If I use the 1st call to network in the loss function, the guess is a constant and will not change.</p>\n\n<pre><code>def network(image_batch):\n# 3x3 patch, 3 input channel (the image), 32 output channels\n######################################\n# First layer Convolution \n######################################\n    W_conv1 = weight_variable([3, 3, 3, 32])\n    b_conv1 = bias_variable([32])\n\n# Reshape our image to matrix multiply and number of colors channel \n    x_image = tf.reshape(image_batch, [-1, IMAGE_SIZE, IMAGE_SIZE, 3]) #64\n    tf.summary.image('input', x_image, 10)\n\n    h_conv1 = tf.nn.relu(conv2d(x_image, W_conv1) + b_conv1)\n    #h_pool1 = max_pool_2x2(h_conv1)\n######################################\n# Second layer Convolution M6-1 network [POOLED]\n######################################\n# 3x3 patch, 32 input channel (the previous output channels), 32 output channels\n\n    W_conv2 = weight_variable([3, 3, 32, 64])\n    b_conv2 = bias_variable([64])\n\n    h_conv2 = tf.nn.relu(conv2d(h_conv1, W_conv2) + b_conv2)\n    h_pool2 = max_pool_2x2(h_conv2) # 32\n######################################\n# Third layer Convolution M6-1 network\n######################################\n# 3x3 patch, 32 input channel (the previous output channels), 64 output channels\n    W_conv3 = weight_variable([3, 3, 64, 128])\n    b_conv3 = bias_variable([128])\n\n    h_conv3 = tf.nn.relu(conv2d(h_pool2, W_conv3) + b_conv3)\n    #h_pool3 = max_pool_2x2(h_conv3) \n######################################\n# Forth layer Convolution M6-1 network\n######################################\n# 3x3 patch, 64 input channel (the previous output channels), 64 output channels\n    W_conv4 = weight_variable([4, 4, 128, 256])\n    b_conv4 = bias_variable([256])\n\n    h_conv4 = tf.nn.relu(conv2d(h_conv3, W_conv4) + b_conv4)\n    h_pool4 = max_pool_2x2(h_conv4) # 16\n\n    W_conv5 = weight_variable([5, 5, 256, 256])\n    b_conv5 = bias_variable([256])\n\n    h_conv5 = tf.nn.relu(conv2d(h_pool4, W_conv5) + b_conv5)\n    h_pool5 = max_pool_2x2(h_conv5) # 8\n #was 7*7*256 which makes sense \n######################################\n# Fifth layer fully connected M6-1 network\n######################################\n # Our image is now 16 x 16 after 2 max pools...and we have 256 channels so\n# we want a matrix 16 * 16 * 64 and then 256 neurons\n    W_fc1 = weight_variable([8 * 8 * 256, 2048])\n    b_fc1 = bias_variable([2048])\n\n    h_pool5_flat = tf.reshape(h_pool5, [-1, 8 * 8 * 256])\n    h_fc1 = tf.nn.relu(tf.matmul(h_pool5_flat, W_fc1) + b_fc1)\n\n    #tf.summary.histogram('h_fc1', h_fc1)\n    h_fc1_drop = tf.nn.dropout(h_fc1, 1.0)\n######################################\n# 6th FC layer fully connected M6-1 network\n######################################\n# Our image is now 16 x 16 after 2 max pools...and we have 256 channels so\n# we want a matrix 16 * 16 * 64 and then 256 neurons\n    W_fc2 = weight_variable([2048, 256])\n    b_fc2 = bias_variable([256])\n    #variable_summaries(W_fc2, name=\"2nd_FC_Weights\")\n    #variable_summaries(b_fc2, name=\"2nd_FC_Bias\")\n\n    h_fc2 = tf.nn.relu(tf.matmul(h_fc1_drop, W_fc2) + b_fc2)\n    #tf.summary.histogram('h_fc2', h_fc2)\n    h_fc2_drop = tf.nn.dropout(h_fc2, 1.0)\n######################################\n# 7th FC layer fully connected M6-1 network\n######################################\n    W_fc3 = weight_variable([256, 256])\n    b_fc3 = bias_variable([256])\n    #variable_summaries(W_fc3, name=\"3rd_FC_Weights\")\n    #variable_summaries(b_fc3, name=\"3rd_FC_Bias\")\n\n    h_fc3 = tf.nn.relu(tf.matmul(h_fc2_drop, W_fc3) + b_fc3)\n    #tf.summary.histogram('h_fc3', h_fc3)\n######################################\n# Final FC layer fully connected M6-1 network\n######################################\n    W_fc4 = weight_variable([256, 1])\n    b_fc4 = bias_variable([1])\n    #variable_summaries(W_fc4, name=\"4th_FC_Weights\")\n    #variable_summaries(b_fc4, name=\"4th_FC_Bias\")\n\n    #y_conv = tf.nn.softmax(tf.matmul(h_fc3, W_fc4) + b_fc4)\n    y_conv = tf.multiply(tf.atan(tf.matmul(h_fc3, W_fc4) + b_fc4), 2)\n    variable_summaries(y_conv, name=\"net_out\")\n\n    return y_conv\n\ndef train():\n    image_batch_out, label_batch_out, filename_batch = input(if_eval = False)\n    v_image_batch_out, v_label_batch_out, v_filename_batch = v_input()\n\n    image_batch_placeholder = tf.placeholder(tf.float32, shape=[BATCH_SIZE, None, None, 3])\n    v_image_batch_placeholder = tf.placeholder(tf.float32, shape=[v_BATCH_SIZE, None, None, 3])\n    image_batch = tf.reshape(image_batch_out, (BATCH_SIZE, IMAGE_SIZE, IMAGE_SIZE, 3))\n    v_image_batch = tf.reshape(v_image_batch_out, (v_BATCH_SIZE, IMAGE_SIZE, IMAGE_SIZE, 3))\n\n    label_batch_placeholder = tf.placeholder(tf.float32, shape=[BATCH_SIZE, NUM_CLASSES])\n    label_tensor_placeholder = tf.placeholder(tf.int64, shape=[v_BATCH_SIZE])\n    label_offset = -tf.ones([BATCH_SIZE], dtype=tf.int64, name=\"label_batch_offset\")\n    v_label_offset = -tf.ones([v_BATCH_SIZE], dtype=tf.int64, name=\"label_batch_offset\")\n    label_batch_one_hot = tf.one_hot(tf.add(label_batch_out, label_offset), depth=NUM_CLASSES, on_value=1.0, off_value=0.0)\n    label_batch = tf.add(label_batch_out, label_offset)\n    v_label_batch = tf.add(v_label_batch_out, v_label_offset)\n    with tf.variable_scope(\"logits_out\") as scope:\n\n        logits_out = network(image_batch)\n        scope.reuse_variables()\n        v_logits_out = network(v_image_batch)\n        scope.reuse_variables()\n        reused_logits_out = network(image_batch)\n\n    logits_batch = tf.to_int64(tf.arg_max(v_logits_out, dimension = 1))\n    #loss = tf.reduce_sum(tf.nn.softmax_cross_entropy_with_logits(labels=label_batch_one_hot, logits=logits_out))\n    #prediction_op = tf.nn.softmax(logits_out)\n\n    correct_prediction = tf.equal(logits_batch, label_tensor_placeholder)\n    accuracy = tf.reduce_mean(tf.cast(correct_prediction, tf.float32))\n    #transposed_logits = tf.transpose(logits_out)\n    #loss = tf.losses.mean_squared_error(labels=label_batch_placeholder, predictions=prediction_op)\n    loss = tf.reduce_mean(tf.square(reused_logits_out-label_batch_placeholder))\n    global_step = tf.Variable(0, name='global_step', trainable=False)\n    train_step = tf.train.GradientDescentOptimizer(learning_rate).minimize(loss, global_step=global_step)\n\n    #variable_summaries(prediction_op, name=\"Predictions\")\n    #surity_summary(prediction_op, name=\"Certainty\")\n\n    tf.summary.scalar(\"loss\", loss)\n    merged_summary_op = tf.summary.merge_all()\n\nwith tf.Session() as sess:\n\n        summary_writer = tf.summary.FileWriter(logs_path, graph=tf.get_default_graph())\n\n        sess.run(tf.global_variables_initializer())\n        saver = tf.train.Saver()\n        if(tf.train.checkpoint_exists(chk_path)):\n            saver.restore(sess, chk_path)\n        else:\n            saver.save(sess, chk_path)\n        epoch_file = open(epoch_path, 'r')\n        epoch = int(epoch_file.read())\n        epoch_file.close()\n        accu_file = open(best_path, 'r')\n        best_accu = float(accu_file.read())\n        accu_file.close()\n        improved = 0;\n        not_improved = 0;\n        coord = tf.train.Coordinator()\n        threads = tf.train.start_queue_runners(coord=coord, sess = sess)\n        for j in range(1, 1000):\n            epoch_file= open(epoch_path, 'w')\n            epoch_file.write(str(epoch))\n            epoch_file.close()\n            for i in range(int(TRAINING_SET_SIZE/BATCH_SIZE)):\n                image_out, label_out, label_batch_one_hot_out, filename_out = sess.run([image_batch, label_batch_out, label_batch_one_hot, filename_batch])\n\n                _, infer_out, loss_out, summary, global_step_out = sess.run([train_step, logits_out, loss, merged_summary_op, global_step], feed_dict={image_batch_placeholder: image_out, label_batch_placeholder: label_batch_one_hot_out})\n\n\n                #print(image_out.shape)\n                #print(\"label_out: \")\n                #print(filename_out)\n                #print(label_out)\n                #print(label_batch_one_hot_out)\n                #print(\"infer_out: \")\n                #print(infer_out)\n                #print(\"prediction: \")\n                #print(predict_out)\n                print(\"loss: \" + str(loss_out))\n                print(\"local step: \" + str(i))\n                print(\"global step: \" + str(global_step_out - 1))\n                print(\"epoch: \" + str(epoch))\n                print(\"improved: \" + str(improved))\n                print(\"not improved: \" + str(not_improved))\n                label_value = label_out\n                estimate = infer_out\n                err = label_value - estimate\n                for k in range (0, 1):\n                    print(\"label value: \", label_value[k], \\\n                        \"estimated value: \", estimate[k])#, \\\n#                       \"err: \", err[i])\n                    print(\"[*]==============================\")\n                if(i%100 == 0 and i != 0):\n\n                    accuracy_accu = []\n                    for p in range(int(v_TRAINING_SET_SIZE/v_BATCH_SIZE)):\n                        v_image_out, v_label_out, v_filename_out = sess.run([v_image_batch, v_label_batch, v_filename_batch])\n                        v_accuracy_out, v_logits_batch_out= sess.run([accuracy, logits_batch], feed_dict={v_image_batch_placeholder: v_image_out, label_tensor_placeholder: v_label_out})\n                        accuracy_accu.append(v_accuracy_out)\n\n                        print(p)\n                        print(\"accuracy: \", v_accuracy_out)\n                        print(v_label_out)\n                    print(\"Accuracy: \")\n                    print(np.mean(accuracy_accu))\n                    print(\"Best Accuracy: \")\n                    print(best_accu)\n                    saver.save(sess, chk_path)\n                    if((np.mean(accuracy_accu)) &gt; best_accu):\n                        print(\"improved\")\n                        saver.save(sess, best_chk_path)\n                        print(\"saved\")\n                        best_accu = np.mean(accuracy_accu)\n                        accu_file = open(best_path, 'w')\n                        accu_file.write(str(best_accu))\n                        accu_file.close()\n                        print(\"New best accuracy!\")\n                        improved += 1\n                    else:\n                        print(\"not improved\")\n                        not_improved += 1\n                if(i%10 == 0):\n                    summary_writer.add_summary(summary, global_step_out)                \n            epoch += 1\n        coord.request_stop()\n        coord.join(threads)\n        sess.close()\n\ntrain()\n</code></pre>\n\n<p>Any tips to point me in the right direction would be great. I'll attach a tensorboard image of the logs from the training of this to show you what I mean about the different calls to network()</p>\n\n<p>variable summaries of the different calls to network()</p>\n\n<p><img src=\"https://i.stack.imgur.com/3Shqo.png\" alt=\"\"></p>\n\n<p>loss function, in this picture is using the 3rd call to the network that seems to be making guessues</p>\n\n<p><img src=\"https://i.stack.imgur.com/gZk7y.png\" alt=\"\"></p>\n"}, {"tags": ["python", "pygame"], "comments": [{"owner": {"reputation": 888, "user_id": 6087479, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-5I8NM_JIDkU/AAAAAAAAAAI/AAAAAAAAAAA/MAhvpTXecww/photo.jpg?sz=128", "display_name": "Eziz Durdyyev", "link": "https://stackoverflow.com/users/6087479/eziz-durdyyev"}, "edited": false, "score": 0, "creation_date": 1522309137, "post_id": 49544142, "comment_id": 86108081, "body": "I guess this could help with your second question: <a href=\"https://stackoverflow.com/questions/46557583/how-to-identify-which-button-is-being-pressed-on-ps4-controller-using-pygame?rq=1\" title=\"how to identify which button is being pressed on ps4 controller using pygame\">stackoverflow.com/questions/46557583/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 8291920, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/385fccfe8f8af2827efa7812fd43ef7f?s=128&d=identicon&r=PG&f=1", "display_name": "ark.pytm", "link": "https://stackoverflow.com/users/8291920/ark-pytm"}, "edited": false, "score": 0, "creation_date": 1522347208, "post_id": 49552378, "comment_id": 86133269, "body": "This was exactly what I was looking for and it works really well, I just added some delays and it does it&#39;s job, thank you so much"}], "tags": [], "owner": {"reputation": 186, "user_id": 9245204, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Qk0hh.png?s=128&g=1", "display_name": "OSA413", "link": "https://stackoverflow.com/users/9245204/osa413"}, "is_accepted": true, "score": 3, "last_activity_date": 1522315408, "creation_date": 1522315408, "answer_id": 49552378, "question_id": 49544142, "link": "https://stackoverflow.com/questions/49544142/while-loop-in-pygame/49552378#49552378", "title": "While loop in pygame", "body": "<p>Look closely at this block:</p>\n\n<pre><code>for i in range( buttons ):\n    button = joystick.get_button( i )\n    textPrint.print(screen, \"Button {:&gt;2} value: {}\".format(i,button) )\n</code></pre>\n\n<p><code>textPrint.print</code> draws text with the button ID (<code>i</code>) and its statement (<code>button</code>) (0 is released, 1 is pressed). So, if you need to print some text while a button is pressed, simply add this:</p>\n\n<pre><code>if button == 1:\n    print(\"Button \"+str(i)+\" is pressed\")\n</code></pre>\n\n<p>to the block and it should work.</p>\n\n<p>btw, you can use <code>i</code> (button ID) of this cycle to use in an if statement.</p>\n\n<pre><code>if button == 1:\n    if i == 2:\n        print(\"A is pressed\")\n    elif i == 1:\n        print(\"B is pressed\")\n</code></pre>\n\n<p>That's how the block may look after all:</p>\n\n<pre><code>for i in range( buttons ):\n    button = joystick.get_button( i )\n    if button == 1: #if any button is pressed\n        if i == 2:  #if A button is pressed\n            print(\"A is pressed\")\n        if i == 1:  #if B button is pressed\n            print(\"B is pressed\")\n    textPrint.print(screen, \"Button {:&gt;2} value: {}\".format(i,button) )\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 8291920, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/385fccfe8f8af2827efa7812fd43ef7f?s=128&d=identicon&r=PG&f=1", "display_name": "ark.pytm", "link": "https://stackoverflow.com/users/8291920/ark-pytm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1319, "favorite_count": 0, "accepted_answer_id": 49552378, "answer_count": 1, "score": 3, "last_activity_date": 1522315408, "creation_date": 1522271024, "question_id": 49544142, "link": "https://stackoverflow.com/questions/49544142/while-loop-in-pygame", "title": "While loop in pygame", "body": "<p>I'm trying to add PS4 input to my python code, so I wanted to make it whenever I'm holding down a button, it prints as long as it held down for, not just the one time. I tried many different variations of while loops but it just spams my console with text so I know im doing something wrong. Any help would be appreciated. </p>\n\n<pre><code>import pygame\n\n\nBLACK    = (   0,   0,   0)\nWHITE    = ( 255, 255, 255)\n\n\nclass TextPrint:\n    def __init__(self):\n        self.reset()\n        self.font = pygame.font.Font(None, 25)\n\n    def print(self, screen, textString):\n        textBitmap = self.font.render(textString, True, BLACK)\n        screen.blit(textBitmap, [self.x, self.y])\n        self.y += self.line_height\n\n    def reset(self):\n        self.x = 30\n        self.y = 30\n        self.line_height = 20\n\n    def indent(self):\n        self.x += 10\n\n    def unindent(self):\n        self.x -= 10\n\n\npygame.init()\n\n\nsize = [800, 500]\nscreen = pygame.display.set_mode(size)\n\npygame.display.set_caption(\"My Game\")\n\ndone = False\n\nclock = pygame.time.Clock()\n\npygame.joystick.init()\n\ntextPrint = TextPrint()\n\nwhile done==False:\n    for event in pygame.event.get():\n        if event.type == pygame.QUIT:\n            done=True \n\n\n        if event.type == pygame.JOYBUTTONDOWN:\n            print(\"Joystick button pressed.\")\n        if event.type == pygame.JOYBUTTONUP:\n            print(\"Joystick button released.\")\n\n\n    screen.fill(WHITE)\n    textPrint.reset()\n\n    joystick_count = pygame.joystick.get_count()\n\n    for i in range(joystick_count):\n        joystick = pygame.joystick.Joystick(i)\n        joystick.init()\n\n        name = joystick.get_name()\n        textPrint.print(screen, \"Joystick name: {}\".format(name) )\n\n        buttons = joystick.get_numbuttons()\n        textPrint.print(screen, \"Number of buttons: {}\".format(buttons) )\n        textPrint.indent()\n\n        for i in range( buttons ):\n            button = joystick.get_button( i )\n            textPrint.print(screen, \"Button {:&gt;2} value: {}\".format(i,button) )\n        textPrint.unindent()\n\n        pygame.display.flip()\n\nclock.tick(20)\n\npygame.quit ()     \n</code></pre>\n\n<p><br><em>Modified code from official <a href=\"https://www.pygame.org/docs/ref/joystick.html\" rel=\"nofollow noreferrer\">pygame documentation</a></em>\n\n<br>\nAlso a side question, but its not priority:\nHow would i know exactly which button is being pressed and use it in an if statement? \n</p>\n"}, {"tags": ["python", "pandas", "matplotlib", "plot", "indexing"], "answers": [{"tags": [], "owner": {"reputation": 86789, "user_id": 1422451, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/sFFvX.jpg?s=128&g=1", "display_name": "Parfait", "link": "https://stackoverflow.com/users/1422451/parfait"}, "is_accepted": true, "score": 4, "last_activity_date": 1522273253, "creation_date": 1522273253, "answer_id": 49544625, "question_id": 49544123, "link": "https://stackoverflow.com/questions/49544123/keyerror-item-not-in-index-while-trying-to-build-boxplot-with-pandas/49544625#49544625", "title": "KeyError: item not in index while trying to build boxplot with pandas", "body": "<p>Per the <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.boxplot.html\" rel=\"nofollow noreferrer\">docs</a>, <em>column</em> argument should be the numeric value (input to a <code>groupby</code> not its arguments) to run the boxplot and <em>by</em> argument be the grouping variable:</p>\n\n<pre><code>mydata.boxplot(column='loan_amnt', by='addr_state')\n</code></pre>\n\n<p>To demonstrate with random data:</p>\n\n<pre><code>import pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\n\nnp.random.seed(1212)\nmydata = pd.DataFrame({'loan_amnt': np.random.randn(50)*100,\n                       'tool': [\"\".join(np.random.choice(['pandas', 'r', 'julia',\n                                         'sas', 'stata', 'spss'],1)) for _ in range(50)]})\n\nmydata.boxplot(column='loan_amnt', by='tool')\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/eHroM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/eHroM.png\" alt=\"Boxplot Output\"></a></p>\n"}], "owner": {"reputation": 3976, "user_id": 220255, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/f971b4f294f2a834a1cca619a4663376?s=128&d=identicon&r=PG", "display_name": "abolotnov", "link": "https://stackoverflow.com/users/220255/abolotnov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2360, "favorite_count": 0, "accepted_answer_id": 49544625, "answer_count": 1, "score": 1, "last_activity_date": 1522273253, "creation_date": 1522270920, "last_edit_date": 1522272599, "question_id": 49544123, "link": "https://stackoverflow.com/questions/49544123/keyerror-item-not-in-index-while-trying-to-build-boxplot-with-pandas", "title": "KeyError: item not in index while trying to build boxplot with pandas", "body": "<p>I am trying to build a boxplot out of a simple dataframe. I take one with multiple columns and only take the two that I need:</p>\n\n<pre><code>mydata = data[['addr_state','loan_amnt']].dropna().copy()\nmydata['loan_amnt'] = mydata['loan_amnt'].astype(float)\nmydata[:5]\n\naddr_state  loan_amnt\n0   AZ  5,000.00\n1   GA  2,500.00\n2   IL  2,400.00\n3   CA  10,000.00\n4   OR  3,000.00\n\nmydata.columns\n\nIndex(['addr_state', 'loan_amnt'], dtype='object')\n</code></pre>\n\n<p>Basically, it's a bunch of state - amount records and I am trying to build the candles for it:</p>\n\n<pre><code>mydata.boxplot(column='addr_state')\n\nKeyError: \"['addr_state'] not in index\"\n</code></pre>\n\n<p>I tried set_index() and rebuild_index() but neither seem to fix it.</p>\n"}, {"tags": ["python", "virtualenv"], "comments": [{"owner": {"reputation": 632, "user_id": 8766025, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7112bf0e140281eb3f4191f61eab6fc3?s=128&d=identicon&r=PG&f=1", "display_name": "ChootsMagoots", "link": "https://stackoverflow.com/users/8766025/chootsmagoots"}, "edited": false, "score": 0, "creation_date": 1522270847, "post_id": 49544094, "comment_id": 86095885, "body": "I believe that in every virtualenv a new python executable is created, and as such your virtual environments will continue to run in 3.6.2, but I&#39;m not sure enough about this to advise you to go forwards without more guidance"}], "answers": [{"tags": [], "owner": {"reputation": 2599, "user_id": 2730399, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/55f1223c407a8d06c677fec00c1ed32e?s=128&d=identicon&r=PG", "display_name": "Azsgy", "link": "https://stackoverflow.com/users/2730399/azsgy"}, "is_accepted": true, "score": 2, "last_activity_date": 1522276039, "last_edit_date": 1522276039, "creation_date": 1522273636, "answer_id": 49544698, "question_id": 49544094, "link": "https://stackoverflow.com/questions/49544094/will-a-virtualenv-continue-working-after-a-patchlevel-upgrade-to-the-underlying/49544698#49544698", "title": "Will a virtualenv continue working after a patchlevel upgrade to the underlying Python?", "body": "<p>The answer, as usual, is \"it depends\".</p>\n\n<p>The <code>virtualenv</code> and <code>pipenv</code> tools copy the chosen python version to <code>env/bin/</code>. This means that point-releases will not be recieved by the virtualenv.</p>\n\n<pre><code>$ file env/bin/python3\nenv/bin/python3: ELF 64-bit LSB shared object, x86-64, version 1 (SYSV)\n</code></pre>\n\n<p>The recommended <code>venv</code> (formerly <code>pyvenv</code>) tool however (on linux) creates a symbolic link to the version of python it is executed with (which can be though of as a \"redirect\" for file systems). This means that point-releases will be automatically received by the virtualenv if the original executable is replaced:</p>\n\n<pre><code>$ file env/bin/python3.6\nenv/bin/python3.6: symbolic link to /usr/bin/python3.6\n</code></pre>\n\n<p>This behavior is tunable, and <code>venv</code> can also upgrade versions in place, even if not using symlinks:</p>\n\n<pre><code>$ python3.6 -m venv -h\n[...]\n  --symlinks            Try to use symlinks rather than copies, when symlinks\n                        are not the default for the platform.\n  --copies              Try to use copies rather than symlinks, even when\n                        symlinks are the default for the platform.\n  --upgrade             Upgrade the environment directory to use this version\n                        of Python, assuming Python has been upgraded in-place.\n  [...]\n</code></pre>\n\n<p>As far as I can tell, the <code>virtualenv</code> tool has no such functionality, which is presumably one of the reasons it is suggested to use <code>venv</code> instead now.</p>\n"}], "owner": {"reputation": 8221, "user_id": 88198, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/9ad80bde2ad7ad60b41bceceb38fe2aa?s=128&d=identicon&r=PG", "display_name": "rescdsk", "link": "https://stackoverflow.com/users/88198/rescdsk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 49544698, "answer_count": 1, "score": 3, "last_activity_date": 1522276039, "creation_date": 1522270781, "question_id": 49544094, "link": "https://stackoverflow.com/questions/49544094/will-a-virtualenv-continue-working-after-a-patchlevel-upgrade-to-the-underlying", "title": "Will a virtualenv continue working after a patchlevel upgrade to the underlying Python?", "body": "<p>I'd like to upgrade my system Python from 3.6.2 to 3.6.4 to get a bugfix.  Will this break my virtual environments that were built with 3.6.2?</p>\n"}, {"tags": ["python", "post", "serialization", "deserialization"], "answers": [{"tags": [], "owner": {"reputation": 35280, "user_id": 330867, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/4c1796810a014e9ed1f3198c3edd103e?s=128&d=identicon&r=PG", "display_name": "Cyril N.", "link": "https://stackoverflow.com/users/330867/cyril-n"}, "is_accepted": false, "score": 0, "last_activity_date": 1522316191, "creation_date": 1522316191, "answer_id": 49552652, "question_id": 49544081, "link": "https://stackoverflow.com/questions/49544081/jquery-param-unserialization-in-python/49552652#49552652", "title": "jQuery.param unserialization in Python", "body": "<p>There is an issue with the code above.</p>\n\n<p><code>request.form.to_dict()</code> doesn't do a proper representation of items passed via <code>\"item[]=XXX&amp;item[]=YYY\"</code>. You'll get only one <code>item[]</code>...</p>\n\n<p>So in order to fix this, I've rewritten the <code>to_dict()</code> to this:</p>\n\n<pre><code>from six import string_types\n\ndef convert_val(val):\n    if not isinstance(val, string_types):\n        return val\n    elif val == '':\n        return None\n    elif val.lower() in ('false', 'true'):\n        return True if val.lower() == 'true' else False\n    if val[0:1] == '{':\n        try:\n            return json.loads(val)\n        except ValueError:\n            pass\n\n    try:\n        return int(val)\n    except ValueError:\n        return val\n\n\ndef request_to_dict(params):\n    result = {}\n    for k in params:\n        items = params.getlist(k)\n        if len(items) == 1:\n            result[k] = convert_val(items[0])\n        else:\n            result[k] = items\n\n    return parse_form(result)\n</code></pre>\n\n<p>This returns a proper dictionnary parsing the specificities of the above sample, keeping the type whenever possible (boolean, integer, json, list or string) and is compatible for Python 2 and 3.</p>\n"}], "owner": {"reputation": 35280, "user_id": 330867, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/4c1796810a014e9ed1f3198c3edd103e?s=128&d=identicon&r=PG", "display_name": "Cyril N.", "link": "https://stackoverflow.com/users/330867/cyril-n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1522316191, "creation_date": 1522270726, "question_id": 49544081, "link": "https://stackoverflow.com/questions/49544081/jquery-param-unserialization-in-python", "title": "jQuery.param unserialization in Python", "body": "<p>I'm trying to unserialize complex data serialized via <code>jQuery.param()</code> function.</p>\n\n<p>I've found the python library <a href=\"https://pypi.python.org/pypi/jquery-unparam/2.0.0\" rel=\"nofollow noreferrer\">jquery-unparam</a> but unfortunately it doesn't manage well the kind of complex structure that can happens.</p>\n\n<p>I've made an example that covers all the possibilities, here the data :</p>\n\n<pre><code>sample = {\n    'some': 'value',\n    'with': True,\n    'but[]': ['contains', 'also', 'some', 'array'],\n    'or[0]': 'even',\n    'or[1]': 'numbered',\n    'or[2]': 'arrays',\n    'also[0][some]': 'with',\n    'also[0][sub]': 'complex',\n    'also[0][values]': 'structure',\n    'and[finally]': 'some',\n    'and[easier]': 'ones'\n}\n</code></pre>\n\n<p>This data is the result from <code>request.form.to_dict()</code> in Flask. If you need it, here's the original value after beeing processed by <code>jQuery.param()</code> :</p>\n\n<pre><code>\"some=value&amp;with=true&amp;but%5B%5D=contains&amp;but%5B%5D=also&amp;but%5B%5D=some&amp;but%5B%5D=array&amp;or%5B0%5D=even&amp;or%5B1%5D=numbered&amp;or%5B2%5D=arrays&amp;also%5B0%5D%5Bsome%5D=with&amp;also%5B0%5D%5Bsub%5D=complex&amp;also%5B0%5D%5Bvalues%5D=structure&amp;and%5Bfinally%5D=some&amp;and%5Beasier%5D=ones\"\n</code></pre>\n\n<p>Now, if you run the code from the Python library directly, you get this result:</p>\n\n<pre><code>{\"and\": {\"finally\": \"some\", \"easier\": \"ones\"}, \"some\": \"value\", \"but\": [\"contains\", \"also\", \"some\", \"array\"], \"also\": {\"0\": {\"values\": \"structure\", \"some\": \"with\", \"sub\": \"complex\"}}, \"with\": \"true\", \"or\": {\"1\": \"numbered\", \"0\": \"even\", \"2\": \"arrays\"}}\n</code></pre>\n\n<p>The thing is, the key <code>also</code> should be a list, not a dict, it should be like this:</p>\n\n<pre><code>{\"and\": {\"finally\": \"some\", \"easier\": \"ones\"}, \"some\": \"value\", \"but\": [\"contains\", \"also\", \"some\", \"array\"], \"also\": [{\"values\": \"structure\", \"some\": \"with\", \"sub\": \"complex\"}], \"with\": \"true\", \"or\": {\"1\": \"numbered\", \"0\": \"even\", \"2\": \"arrays\"}}\n</code></pre>\n\n<p>But I'm stuck at making this works.</p>\n\n<p>Here's my code so far (changed from the library to work directly from Flask's to_dict code):</p>\n\n<pre><code>#!/usr/bin/python\n# -*- coding: utf-8 -*-\n\nimport re, json\n\n\ndef parse_key_pair(key, val):\n    groups = re.findall(r\"\\[.*?\\]\", key)\n    groups_joined =  ''.join(groups)\n    if key[-len(groups_joined):] == groups_joined:\n        key = key[:-len(groups_joined)]\n        for group in reversed(groups):\n            if group == '[]':\n                val = val\n            else:\n                # I've implemented this to transform to list, but the result is not good\n                try:\n                    int(group.replace('[', '').replace(']', ''))\n                    val = [val]\n                except ValueError:\n                    val = {group[1:-1]: val}\n\n    return {key: val}\n\n\ndef merge_two_structs(s1, s2):\n    if isinstance(s1, list) and \\\n       isinstance(s2, list):\n        return s1 + s2\n\n    if isinstance(s1, dict) and \\\n       isinstance(s2, dict):\n\n        retval = s1.copy()\n        for key, val in s2.iteritems():\n            if retval.get(key) is None:\n                retval[key] = val\n            else:\n                retval[key] = merge_two_structs(retval[key], val)\n        return retval\n    return s2\n\n\ndef merge_structs(structs):\n    if len(structs) == 0:\n        return None\n    if len(structs) == 1:\n        return structs[0]\n    first, rest = structs[0], structs[1:]\n    return merge_two_structs(first, merge_structs(rest))\n\n\ndef parse_form(pair_strings):\n    key_pairs = [parse_key_pair(x, pair_strings[x]) for x in pair_strings]\n    return merge_structs(key_pairs)\n\n\nsample = {\n    'some': 'value',\n    'with': True,\n    'but[]': ['contains', 'also', 'some', 'array'],\n    'or[0]': 'even',\n    'or[1]': 'numbered',\n    'or[2]': 'arrays',\n    'also[0][some]': 'with',\n    'also[0][sub]': 'complex',\n    'also[0][values]': 'structure',\n    'and[finally]': 'some',\n    'and[easier]': 'ones'\n}\n\nprint (json.dumps(parse_form(sample)))\n</code></pre>\n\n<p>If you can help me out on how to get a list instead of a dict for an array, it will be perfect!</p>\n\n<p>Of course, if there is already an other library that does the job well, I'm all ears!</p>\n"}, {"tags": ["python", "machine-learning", "scikit-learn", "svm"], "answers": [{"comments": [{"owner": {"reputation": 3335, "user_id": 2768038, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/hxk9G.png?s=128&g=1", "display_name": "maxisme", "link": "https://stackoverflow.com/users/2768038/maxisme"}, "edited": false, "score": 0, "creation_date": 1522319544, "post_id": 49546313, "comment_id": 86114700, "body": "I am confused. In the above code snippet <code>clf</code> will not be modified after the initial <code>.fit</code>? So why would I apply <code>patial_fit</code> to that? Could I <code>partial_fit</code> the <code>clf</code> and then &quot;turn it into&quot; a <code>CalibratedClassifierCV</code>?"}, {"owner": {"reputation": 3335, "user_id": 2768038, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/hxk9G.png?s=128&g=1", "display_name": "maxisme", "link": "https://stackoverflow.com/users/2768038/maxisme"}, "edited": false, "score": 0, "creation_date": 1522320765, "post_id": 49546313, "comment_id": 86115535, "body": "I see you can set <code>cv</code> to <code>prefit</code>. So if I run partial fit on <code>clf</code> and then any time I want to run <code>.predict_proba</code> I just run <code>CalibratedClassifierCV(clf, cv=&#39;prefit&#39;, method=&#39;sigmoid&#39;).predict_proba(...</code> does that work?"}, {"owner": {"reputation": 3335, "user_id": 2768038, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/hxk9G.png?s=128&g=1", "display_name": "maxisme", "link": "https://stackoverflow.com/users/2768038/maxisme"}, "edited": false, "score": 0, "creation_date": 1523533623, "post_id": 49546313, "comment_id": 86605640, "body": "Would you be able to explain this to me?"}], "tags": [], "owner": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "is_accepted": false, "score": 0, "last_activity_date": 1522284005, "creation_date": 1522284005, "answer_id": 49546313, "question_id": 49544057, "link": "https://stackoverflow.com/questions/49544057/an-svm-that-has-the-capabilities-to-perform-online-learning-and-give-probabili/49546313#49546313", "title": "An SVM that has the capabilities to perform &quot;online learning&quot; and give probability to a prediction using hinge loss", "body": "<p>As someone asked about that before <a href=\"https://github.com/scikit-learn/scikit-learn/issues/7278\" rel=\"nofollow noreferrer\">@github</a>, the authors then <a href=\"https://github.com/scikit-learn/scikit-learn/pull/7281\" rel=\"nofollow noreferrer\">added</a> mentioning of this to the <a href=\"http://scikit-learn.org/stable/modules/generated/sklearn.linear_model.SGDClassifier.html#sklearn.linear_model.SGDClassifier.predict_proba\" rel=\"nofollow noreferrer\">docs</a>.</p>\n\n<p>So your doc-entry to go for is sklearn's <a href=\"http://scikit-learn.org/stable/modules/calibration.html#calibration\" rel=\"nofollow noreferrer\">Probability calibration</a>.</p>\n\n<p>A basic example was given in the github link as:</p>\n\n<pre><code>from sklearn.calibration import CalibratedClassifierCV\nfrom sklearn.linear_model import SGDClassifier\n\nclf = SGDClassifier(loss='hinge')\ncalibrated_clf = CalibratedClassifierCV(clf, cv=5, method='sigmoid')\ncalibrated_clf.fit(X, y)\n</code></pre>\n\n<p><strong>But</strong> this probably won't work for <code>partial_fit</code> as mentioned <a href=\"https://github.com/scikit-learn/scikit-learn/issues/9538\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>So for your task it's important to know if the following works for you:</p>\n\n<blockquote>\n  <p>no, you can't partial_fit the calibration, but you can partial_fit the\n  underlying classifier</p>\n</blockquote>\n"}], "owner": {"reputation": 3335, "user_id": 2768038, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/hxk9G.png?s=128&g=1", "display_name": "maxisme", "link": "https://stackoverflow.com/users/2768038/maxisme"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 230, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1523555346, "creation_date": 1522270631, "last_edit_date": 1523555346, "question_id": 49544057, "link": "https://stackoverflow.com/questions/49544057/an-svm-that-has-the-capabilities-to-perform-online-learning-and-give-probabili", "title": "An SVM that has the capabilities to perform &quot;online learning&quot; and give probability to a prediction using hinge loss", "body": "<p>There is a bit of a dilemma with sklearn.</p>\n\n<p>Using <a href=\"http://scikit-learn.org/stable/modules/generated/sklearn.svm.SVC.html\" rel=\"nofollow noreferrer\">SVC</a> I can use the method <code>predict_proba</code> to calculate how likely a prediction is.</p>\n\n<p>Using <a href=\"http://scikit-learn.org/stable/modules/generated/sklearn.linear_model.SGDClassifier.html\" rel=\"nofollow noreferrer\">SGDClassifier</a> I can perform \"online/incremental\" learning using the method <code>partial_fit</code> method but <code>predict_proba</code> doesn't work with the 'hinge' <code>loss</code>.</p>\n\n<p>Is there anyway to have both?</p>\n"}, {"tags": ["python", "list", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 64040, "user_id": 3620003, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QnqtZ.jpg?s=128&g=1", "display_name": "timgeb", "link": "https://stackoverflow.com/users/3620003/timgeb"}, "edited": false, "score": 1, "creation_date": 1522271772, "post_id": 49544256, "comment_id": 86096305, "body": "Consider getting the <code>next</code> element from a listiterator over <code>C</code>, this way you won&#39;t have to perform the O(n) <code>pop</code> operation in each iteration."}], "tags": [], "owner": {"reputation": 1930, "user_id": 9537244, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oUrDo.png?s=128&g=1", "display_name": "ilja", "link": "https://stackoverflow.com/users/9537244/ilja"}, "is_accepted": true, "score": 3, "last_activity_date": 1522272600, "last_edit_date": 1522272600, "creation_date": 1522271513, "answer_id": 49544256, "question_id": 49544048, "link": "https://stackoverflow.com/questions/49544048/how-to-append-elements-from-a-list-into-nested-lists-in-a-dataframe-one-by-one/49544256#49544256", "title": "How to append elements from a list into nested lists in a dataframe one by one", "body": "<p>Mybe there is a more elegant solution, but this works :-)</p>\n\n<pre><code>for i in d['B']:\n    for j in i:\n        if (isinstance(j, list)):\n            j.append(C.pop(0))\n        else:\n            i.append(C.pop(0))\n            break\n</code></pre>\n\n<p>A more efficient solution based on timgebs comment (thank you!):</p>\n\n<pre><code>f = iter(C)\nfor i in d['B']:\n    for j in i:\n        if (isinstance(j, list)):\n            j.append(next(f))\n        else:\n            i.append(next(f))\n            break\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "is_accepted": false, "score": 2, "last_activity_date": 1522276000, "creation_date": 1522276000, "answer_id": 49545167, "question_id": 49544048, "link": "https://stackoverflow.com/questions/49544048/how-to-append-elements-from-a-list-into-nested-lists-in-a-dataframe-one-by-one/49545167#49545167", "title": "How to append elements from a list into nested lists in a dataframe one by one", "body": "<p>This is an alternative method using <code>itertools</code>.</p>\n\n<p>The idea is to flatten the list of lists, append your data, then split again via information you have stored on the number of lists in each row.</p>\n\n<pre><code>from itertools import chain, accumulate\nimport pandas as pd\n\nd = {'A': [1,2,3,4], 'B': [[[1,2],[2,3]],[[3,4],[2,5]],[[5,6],[5,6],[5,6]],[[7,8]]]}\ndf = pd.DataFrame(data=d)\nC = [1,2,3,4,5,6,7,8]\n\nacc = [0] + list(accumulate(map(len, B)))\n\nlst = [j+[C[i]] for i, j in enumerate(chain.from_iterable(df['B']))]\n\ndf['B'] = [lst[x:y] for x, y in zip(acc, acc[1:])]\n</code></pre>\n\n<p>Note I have made an important change to the input: the last element of series <code>B</code> is a list of lists, just like all the other elements. For consistency, I would recommend this in any case.</p>\n\n<p><strong>Result</strong></p>\n\n<pre><code>   A                                  B\n0  1             [[1, 2, 1], [2, 3, 2]]\n1  2             [[3, 4, 3], [2, 5, 4]]\n2  3  [[5, 6, 5], [5, 6, 6], [5, 6, 7]]\n3  4                        [[7, 8, 8]]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 115, "user_id": 4232601, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MDddGfxzY5U/AAAAAAAAAAI/AAAAAAAAYxg/UwBiJeLbrJA/photo.jpg?sz=128", "display_name": "opunsoars", "link": "https://stackoverflow.com/users/4232601/opunsoars"}, "is_accepted": false, "score": 0, "last_activity_date": 1522314850, "creation_date": 1522314850, "answer_id": 49552170, "question_id": 49544048, "link": "https://stackoverflow.com/questions/49544048/how-to-append-elements-from-a-list-into-nested-lists-in-a-dataframe-one-by-one/49552170#49552170", "title": "How to append elements from a list into nested lists in a dataframe one by one", "body": "<pre><code>d = {'A': [1,2,3,4], 'B': [[[1,2],[2,3]],[[3,4],[2,5]],[[5,6],[5,6],[5,6]],[7,8]]}\n\ndf = pd.DataFrame(data=d)\n\nC = [1,2,3,4,5,6,7,8]\n\ndf['B_len'] = df.B.apply(len)\ndf['B_len_cumsum']=df.B_len.cumsum()\ndf['C'] = df.apply(lambda row: C[row['B_len_cumsum']-row['B_len']:row['B_len_cumsum']], axis=1)\ndf['B'] = df.B.apply(lambda x: [x] if type(x[0])==int else x)\nfor x,y in zip(df.B,df.C):\n        for xx,yy in zip(x,y):\n            xx.append(yy)\ndf\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>   A                                  B  B_len  B_len_cumsum          C\n0  1             [[1, 2, 1], [2, 3, 2]]      2             2     [1, 2]\n1  2             [[3, 4, 3], [2, 5, 4]]      2             4     [3, 4]\n2  3  [[5, 6, 5], [5, 6, 6], [5, 6, 7]]      3             7  [5, 6, 7]\n3  4                        [[7, 8, 8]]      2             9        [8]\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 2671239, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3124751fc7860d38430097237c51d11c?s=128&d=identicon&r=PG", "display_name": "Seiji", "link": "https://stackoverflow.com/users/2671239/seiji"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 323, "favorite_count": 0, "accepted_answer_id": 49544256, "answer_count": 3, "score": 4, "last_activity_date": 1522325749, "creation_date": 1522270597, "last_edit_date": 1522325749, "question_id": 49544048, "link": "https://stackoverflow.com/questions/49544048/how-to-append-elements-from-a-list-into-nested-lists-in-a-dataframe-one-by-one", "title": "How to append elements from a list into nested lists in a dataframe one by one", "body": "<pre><code>import pandas as pd\n\nd = {'A': [1,2,3,4], 'B': [[[1,2],[2,3]],[[3,4],[2,5]],[[5,6],[5,6],[5,6]],[7,8]]}\n\ndf = pd.DataFrame(data=d)\n\nC = [1,2,3,4,5,6,7,8]\n</code></pre>\n\n<p>I have a pandas dataframe and would like to append each element of a C list into each one of the nested lists of B, maintaining the structure, so that the resulting dataframe is:</p>\n\n<pre><code>'A': [1,2,3,4]\n'B': [[[1,2,1],[2,3,2]],[[3,4,3],[2,5,4]],[[5,6,5],[5,6,6],[5,6,7]],[7,8,8]]\n</code></pre>\n"}, {"tags": ["python", "keras", "conv-neural-network", "sequence-to-sequence"], "comments": [{"owner": {"reputation": 7243, "user_id": 4356204, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qJ6Nk.jpg?s=128&g=1", "display_name": "parsethis", "link": "https://stackoverflow.com/users/4356204/parsethis"}, "edited": false, "score": 0, "creation_date": 1522271248, "post_id": 49543928, "comment_id": 86096081, "body": "Not sure we can help much if we can see the model or a miniature version it.  What  does your <code>model.summary()</code> look like."}, {"owner": {"reputation": 801, "user_id": 8234464, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-JslwPPAq_c4/AAAAAAAAAAI/AAAAAAAAAvU/KT_qYuPhfZI/photo.jpg?sz=128", "display_name": "MRM", "link": "https://stackoverflow.com/users/8234464/mrm"}, "reply_to_user": {"reputation": 7243, "user_id": 4356204, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qJ6Nk.jpg?s=128&g=1", "display_name": "parsethis", "link": "https://stackoverflow.com/users/4356204/parsethis"}, "edited": false, "score": 0, "creation_date": 1522271529, "post_id": 49543928, "comment_id": 86096215, "body": "@putonspectacles , I updated the question and added the code."}, {"owner": {"reputation": 7243, "user_id": 4356204, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qJ6Nk.jpg?s=128&g=1", "display_name": "parsethis", "link": "https://stackoverflow.com/users/4356204/parsethis"}, "edited": false, "score": 0, "creation_date": 1522271876, "post_id": 49543928, "comment_id": 86096354, "body": "okay, also add <code>model.summary()</code>"}, {"owner": {"reputation": 801, "user_id": 8234464, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-JslwPPAq_c4/AAAAAAAAAAI/AAAAAAAAAvU/KT_qYuPhfZI/photo.jpg?sz=128", "display_name": "MRM", "link": "https://stackoverflow.com/users/8234464/mrm"}, "reply_to_user": {"reputation": 7243, "user_id": 4356204, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qJ6Nk.jpg?s=128&g=1", "display_name": "parsethis", "link": "https://stackoverflow.com/users/4356204/parsethis"}, "edited": false, "score": 0, "creation_date": 1522272029, "post_id": 49543928, "comment_id": 86096437, "body": "@putonspectacles , I added the &#39;model.summary()&#39;"}, {"owner": {"reputation": 13381, "user_id": 1531463, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QVFg1.jpg?s=128&g=1", "display_name": "Yu-Yang", "link": "https://stackoverflow.com/users/1531463/yu-yang"}, "edited": false, "score": 1, "creation_date": 1522290712, "post_id": 49543928, "comment_id": 86101598, "body": "Why do you think the output shape would be <code>(1, 1, 64, 64, 1)</code>? There&#39;s no any pooling over axis 1 and you use same padding in <code>Conv3D</code>. The strides in <code>Conv3D</code> are also 1, by default. So the output will also have 10 time steps."}], "owner": {"reputation": 801, "user_id": 8234464, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-JslwPPAq_c4/AAAAAAAAAAI/AAAAAAAAAvU/KT_qYuPhfZI/photo.jpg?sz=128", "display_name": "MRM", "link": "https://stackoverflow.com/users/8234464/mrm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 233, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1522271979, "creation_date": 1522270186, "last_edit_date": 1522271979, "question_id": 49543928, "link": "https://stackoverflow.com/questions/49543928/i-do-not-know-why-in-my-keras-neural-network-model-the-prediction-shape-is-not", "title": "I do not know why in my Keras neural network model, the prediction shape is not consistent with the shape of labels while training?", "body": "<p>I have built a Keras ConvLSTM neural network, and I want to predict one frame ahead based on a sequence of 10 time steps:</p>\n\n<p>Model:</p>\n\n<pre><code>from keras.models import Sequential\nfrom keras.layers.convolutional import Conv3D\nfrom keras.layers.convolutional_recurrent import ConvLSTM2D\nfrom keras.layers.normalization import BatchNormalization\nimport numpy as np\nimport pylab as plt\nfrom keras import layers\n\n# We create a layer which take as input movies of shape\n# (n_frames, width, height, channels) and returns a movie\n# of identical shape.\n\nmodel = Sequential()\nmodel.add(ConvLSTM2D(filters=40, kernel_size=(3, 3),\n                   input_shape=(None, 64, 64, 1),\n                   padding='same', return_sequences=True))\nmodel.add(BatchNormalization())\n\nmodel.add(ConvLSTM2D(filters=40, kernel_size=(3, 3),\n                   padding='same', return_sequences=True))\nmodel.add(BatchNormalization())\n\nmodel.add(ConvLSTM2D(filters=40, kernel_size=(3, 3),\n                   padding='same', return_sequences=True))\nmodel.add(BatchNormalization())\n\nmodel.add(ConvLSTM2D(filters=40, kernel_size=(3, 3),\n                   padding='same', return_sequences=True))\nmodel.add(BatchNormalization())\n\nmodel.add(Conv3D(filters=1, kernel_size=(3, 3, 3),\n               activation='sigmoid',\n               padding='same', data_format='channels_last'))\nmodel.compile(loss='binary_crossentropy', optimizer='adadelta')\n</code></pre>\n\n<p>training:</p>\n\n<pre><code>data_train_x = data_4[0:20, 0:10, :, :, :]\ndata_train_y = data_4[0:20, 10:11, :, :, :]\n\nmodel.fit(data_train_x, data_train_y, batch_size=10, epochs=1, \nvalidation_split=0.05)\n</code></pre>\n\n<p>and I test the model:</p>\n\n<pre><code>test_x = np.reshape(data_test_x[2,:,:,:,:], [1,10,64,64,1])\nnext_frame = model.predict(test_x,batch_size=1, verbose=1, steps=None)\n</code></pre>\n\n<p>but the problem is that 'next_frame' shape is: (1, 10, 64, 64, 1) which based on the train data it should be (1, 1, 64, 64, 1)</p>\n\n<p>And this is the results of 'model.summary()':</p>\n\n<pre><code>_________________________________________________________________\nLayer (type)                 Output Shape              Param #   \n=================================================================\nconv_lst_m2d_1 (ConvLSTM2D)  (None, None, 64, 64, 40)  59200     \n_________________________________________________________________\nbatch_normalization_1 (Batch (None, None, 64, 64, 40)  160       \n_________________________________________________________________\nconv_lst_m2d_2 (ConvLSTM2D)  (None, None, 64, 64, 40)  115360    \n_________________________________________________________________\nbatch_normalization_2 (Batch (None, None, 64, 64, 40)  160       \n_________________________________________________________________\nconv_lst_m2d_3 (ConvLSTM2D)  (None, None, 64, 64, 40)  115360    \n_________________________________________________________________\nbatch_normalization_3 (Batch (None, None, 64, 64, 40)  160       \n_________________________________________________________________\nconv_lst_m2d_4 (ConvLSTM2D)  (None, None, 64, 64, 40)  115360    \n_________________________________________________________________\nbatch_normalization_4 (Batch (None, None, 64, 64, 40)  160       \n_________________________________________________________________\nconv3d_1 (Conv3D)            (None, None, 64, 64, 1)   1081      \n=================================================================\nTotal params: 407,001\nTrainable params: 406,681\nNon-trainable params: 320\n</code></pre>\n"}, {"tags": ["python", "jupyter-notebook", "jupyter"], "comments": [{"owner": {"reputation": 1526, "user_id": 2046923, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/2ac867dafb84fb456bbbecf27778b309?s=128&d=identicon&r=PG", "display_name": "John Strong", "link": "https://stackoverflow.com/users/2046923/john-strong"}, "edited": false, "score": 0, "creation_date": 1522855571, "post_id": 49543860, "comment_id": 86318539, "body": "Only way I&#39;ve managed to remove these pesky, intrusive buttons is to turn on Slideshow, but then I get an even more annoying &quot;Slide type&quot; dropdown list on the upper right corner of every single cell, and nothing I do will make it go away."}], "answers": [{"comments": [{"owner": {"reputation": 593, "user_id": 2434201, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/54c8612090ec1daa71bd95d34efe0360?s=128&d=identicon&r=PG", "display_name": "horaceT", "link": "https://stackoverflow.com/users/2434201/horacet"}, "edited": false, "score": 0, "creation_date": 1529521034, "post_id": 50496394, "comment_id": 88908101, "body": "This works. That makes me wonder why it&#39;s enabled in the first place. Also, how to re-enable it."}, {"owner": {"reputation": 1011, "user_id": 3783996, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba6352930e37b7f800dac5f44dd79967?s=128&d=identicon&r=PG&f=1", "display_name": "pierre", "link": "https://stackoverflow.com/users/3783996/pierre"}, "reply_to_user": {"reputation": 593, "user_id": 2434201, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/54c8612090ec1daa71bd95d34efe0360?s=128&d=identicon&r=PG", "display_name": "horaceT", "link": "https://stackoverflow.com/users/2434201/horacet"}, "edited": false, "score": 1, "creation_date": 1529661630, "post_id": 50496394, "comment_id": 88965695, "body": "@horaceT <code>jupyter-nbextension enable nbpresent --py --sys-prefix</code> should work to re-enable it. See <code>jupyter-nbextension --help</code>."}], "tags": [], "owner": {"reputation": 1011, "user_id": 3783996, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba6352930e37b7f800dac5f44dd79967?s=128&d=identicon&r=PG&f=1", "display_name": "pierre", "link": "https://stackoverflow.com/users/3783996/pierre"}, "is_accepted": true, "score": 4, "last_activity_date": 1527104940, "creation_date": 1527104940, "answer_id": 50496394, "question_id": 49543860, "link": "https://stackoverflow.com/questions/49543860/jupyter-notebook-how-to-get-rid-of-buttons-at-bottom-present-slides-themes/50496394#50496394", "title": "Jupyter Notebook: How to get rid of buttons at bottom (Present, Slides, Themes, Help)", "body": "<p>I was able to disable these buttons by executing the following command in the conda environment from which I was running the jupyter notebook where they had appeared:</p>\n\n<p><code>jupyter-nbextension disable nbpresent --py --sys-prefix</code></p>\n\n<p>(see <a href=\"https://docs.anaconda.com/anaconda/user-guide/tasks/use-jupyter-notebook-extensions#uninstalling-the-extensions\" rel=\"nofollow noreferrer\">https://docs.anaconda.com/anaconda/user-guide/tasks/use-jupyter-notebook-extensions#uninstalling-the-extensions</a>) </p>\n\n<p>I think you can run the <code>jupyter-nbextension</code> command outside of a conda environment with the same effect though. You might as well not be using conda as you don't mention it, but the AWS machine you are using might have the extensions installed by default. I am unsure about this.</p>\n\n<p>For me, conda's notebook extensions were installed after I executed <code>conda install nb_conda</code> in order to have access to conda environments in my notebooks.</p>\n\n<p>(see <a href=\"https://stackoverflow.com/questions/37085665/in-which-conda-environment-is-jupyter-executing\">In which conda environment is Jupyter executing?</a>)</p>\n\n<p>Hope this helps.</p>\n"}], "owner": {"reputation": 28720, "user_id": 4561314, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6ad3771ba6e8e823dbcae710c1cde4da?s=128&d=identicon&r=PG", "display_name": "stackoverflowuser2010", "link": "https://stackoverflow.com/users/4561314/stackoverflowuser2010"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1134, "favorite_count": 1, "accepted_answer_id": 50496394, "answer_count": 1, "score": 3, "last_activity_date": 1527104940, "creation_date": 1522269918, "question_id": 49543860, "link": "https://stackoverflow.com/questions/49543860/jupyter-notebook-how-to-get-rid-of-buttons-at-bottom-present-slides-themes", "title": "Jupyter Notebook: How to get rid of buttons at bottom (Present, Slides, Themes, Help)", "body": "<p>I am using Jupyter Notebook 5.2.2 on Amazon AWS for the first time. When I run a Notebook in my browser (Mac OS Safari 11.0), I see buttons at the bottom of the Notebook. The buttons are for Present, Slides, Themes, and Help. I previously have been using Notebook 4.x and  have never seen them before. How do I get rid of these buttons?</p>\n\n<p><a href=\"https://i.stack.imgur.com/kU5JF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kU5JF.png\" alt=\"enter image description here\"></a></p>\n\n<p>Here is my Jupyter Notebook \"About\" information:</p>\n\n<p><a href=\"https://i.stack.imgur.com/3kdKk.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3kdKk.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "networking", "nmap"], "comments": [{"owner": {"reputation": 1642, "user_id": 3097900, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/eDetc.jpg?s=128&g=1", "display_name": "Adriano Martins", "link": "https://stackoverflow.com/users/3097900/adriano-martins"}, "edited": false, "score": 0, "creation_date": 1522269967, "post_id": 49543771, "comment_id": 86095408, "body": "Are you sure you are just checking if a host is up or not? NMap is a <i>port scanner</i>, although you could use it as a online host checker, it is not the ideal use case. Just to a regular up check a <code>ping</code> could be more effective."}, {"owner": {"reputation": 535, "user_id": 6571935, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/41a7e7b2736b7a5f66fa82cc494660c0?s=128&d=identicon&r=PG&f=1", "display_name": "Corrado", "link": "https://stackoverflow.com/users/6571935/corrado"}, "reply_to_user": {"reputation": 1642, "user_id": 3097900, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/eDetc.jpg?s=128&g=1", "display_name": "Adriano Martins", "link": "https://stackoverflow.com/users/3097900/adriano-martins"}, "edited": false, "score": 0, "creation_date": 1522308369, "post_id": 49543771, "comment_id": 86107673, "body": "Laterali I&#39;m going to use it to check open ports, but I needed to check if a host is up before going nm[host][&#39;tcp&#39;] since if a host isn&#39;t up the tcp key won&#39;t be on the host object"}], "answers": [{"comments": [{"owner": {"reputation": 535, "user_id": 6571935, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/41a7e7b2736b7a5f66fa82cc494660c0?s=128&d=identicon&r=PG&f=1", "display_name": "Corrado", "link": "https://stackoverflow.com/users/6571935/corrado"}, "edited": false, "score": 0, "creation_date": 1522397574, "post_id": 49561927, "comment_id": 86149250, "body": "I thought this would work, but the ip is still not in the nm.all_hosts() lists, so even if I try accessing it with nm[host] it throws a KeyError"}, {"owner": {"reputation": 1642, "user_id": 3097900, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/eDetc.jpg?s=128&g=1", "display_name": "Adriano Martins", "link": "https://stackoverflow.com/users/3097900/adriano-martins"}, "reply_to_user": {"reputation": 535, "user_id": 6571935, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/41a7e7b2736b7a5f66fa82cc494660c0?s=128&d=identicon&r=PG&f=1", "display_name": "Corrado", "link": "https://stackoverflow.com/users/6571935/corrado"}, "edited": false, "score": 0, "creation_date": 1522474682, "post_id": 49561927, "comment_id": 86177223, "body": "Fixed the errors @Corrado. It had a <code>scan</code> before the host index, also added several safety checks. - Also tested it myself."}], "tags": [], "owner": {"reputation": 1642, "user_id": 3097900, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/eDetc.jpg?s=128&g=1", "display_name": "Adriano Martins", "link": "https://stackoverflow.com/users/3097900/adriano-martins"}, "is_accepted": false, "score": 1, "last_activity_date": 1522474674, "last_edit_date": 1522474674, "creation_date": 1522344322, "answer_id": 49561927, "question_id": 49543771, "link": "https://stackoverflow.com/questions/49543771/python-nmap-hosts-never-up/49561927#49561927", "title": "python-nmap hosts never up", "body": "<p>There are a few problems with your code:</p>\n\n<ul>\n<li>You don't create a nmap object;</li>\n<li>The scan() does not seems to support multiple ips using this format, although I might be wrong <a href=\"https://bitbucket.org/xael/python-nmap/src/401642a51919e67d2cd9dd0e6ac1ee45f25b1307/nmap/nmap.py?at=default&amp;fileviewer=file-view-default#nmap.py-194\" rel=\"nofollow noreferrer\">(scan source code)</a>;</li>\n</ul>\n\n<p>Therefore, the fixed code should be:</p>\n\n<pre><code>def scan(registered_hosts, port):\n    hosts_up = []\n    nm = nmap.PortScanner()\n    for host in registered_hosts:\n        scan_result = nm.scan(hosts=host, ports=port)\n        if scan_result['scan'].get(host, {}).get('tcp', {}).get(int(port), {}).get('state', '') == 'open':\n            hosts_up.append({\n                'host': host,\n                'url': 'http://%s:%s' % (host, str(port)),\n                'hostname': nm[host].hostname()\n            })\n    return hosts_up\n</code></pre>\n\n<p>Sadly, this lib seems to be completely synchronous for multiple ips if ain't on a sequence. Therefore if you are looking for an async solution, you should build one yourself :(</p>\n\n<p><em>Please take the code with a grain of salt: It wasn't tested.</em></p>\n"}], "owner": {"reputation": 535, "user_id": 6571935, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/41a7e7b2736b7a5f66fa82cc494660c0?s=128&d=identicon&r=PG&f=1", "display_name": "Corrado", "link": "https://stackoverflow.com/users/6571935/corrado"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 606, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1522474674, "creation_date": 1522269522, "question_id": 49543771, "link": "https://stackoverflow.com/questions/49543771/python-nmap-hosts-never-up", "title": "python-nmap hosts never up", "body": "<p>I've been trying to get python-nmap to take in a list of ip addresses as an input and output a list of the hosts that are up. This, however, results in an empty list. </p>\n\n<pre><code>def scan(registered_hosts, port):\n    hosts_up = []\n    nmScan = nm.scan(' '.join(registered_hosts))\n    for host in nm.all_hosts():\n        if nm[host]['tcp'][port]['state'] == 'open':\n            hosts_up.append({\n                'host': host,\n                'url': 'http://%s:%s' % (host, str(port)),\n                'hostname': nm[host].hostname()\n            })\n    return hosts_up\n</code></pre>\n\n<p>The function's input is a list of ip's (i.e. <code>['192.168.0.1', '192.168.0.2']</code>, and I'm passing it as an argument to the <code>nm.scan()</code> function after I've joined it with a space. I know at least one of the listed addresses is up, but the command returns an empty list. Any idea on what's going on here?</p>\n"}, {"tags": ["python", "pandas", "numpy", "analytics"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1522269846, "post_id": 49543732, "comment_id": 86095355, "body": "Can you please show an example df? It looks like you&#39;re actively selecting null values."}, {"owner": {"reputation": 32007, "user_id": 5858851, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yXFCX.jpg?s=128&g=1", "display_name": "pault", "link": "https://stackoverflow.com/users/5858851/pault"}, "edited": false, "score": 0, "creation_date": 1522270274, "post_id": 49543732, "comment_id": 86095577, "body": "You should just be able to select the rows that meet the inverse of the condition you posted : <code>good_df = new_df[~(new_df[&#39;age&#39;].isnull() &amp; (new_df[&#39;churn&#39;] ==  False) &amp; (new_df[&#39;avgBill&#39;] &lt; 40))]</code>"}], "answers": [{"tags": [], "owner": {"reputation": 86481, "user_id": 2411802, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/RA92x.jpg?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/2411802/alexander"}, "is_accepted": false, "score": 1, "last_activity_date": 1522270379, "creation_date": 1522270379, "answer_id": 49543982, "question_id": 49543732, "link": "https://stackoverflow.com/questions/49543732/how-do-i-delete-selected-rows-from-a-dataframe-that-are-in-a-variable/49543982#49543982", "title": "How do I delete selected rows from a dataframe that are in a variable?", "body": "<p>Use the <code>~</code> symbol to invert your boolean mask.</p>\n\n<pre><code>filtered_df = new_df[~(new_df['age'].isnull() \n                       &amp; new_df['churn'] == False \n                       &amp; new_df['avgBill'].lt(40))]\n</code></pre>\n\n<p>To \"delete\" the rows, you can just reassign the result to the original variable's name:</p>\n\n<pre><code>new_df = new_df[...]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 10318, "user_id": 271641, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a098ae2f1198ec5f649080470b136cc?s=128&d=identicon&r=PG", "display_name": "Marat", "link": "https://stackoverflow.com/users/271641/marat"}, "is_accepted": false, "score": 1, "last_activity_date": 1522270466, "creation_date": 1522270466, "answer_id": 49544006, "question_id": 49543732, "link": "https://stackoverflow.com/questions/49543732/how-do-i-delete-selected-rows-from-a-dataframe-that-are-in-a-variable/49544006#49544006", "title": "How do I delete selected rows from a dataframe that are in a variable?", "body": "<p>First option: use <code>novalue_df</code> index to select the rows</p>\n\n<pre><code>df = new_df.loc[novalue_df.index]\n</code></pre>\n\n<p>Second: reindex (effectively the same):</p>\n\n<pre><code>df = new_df.reindex(novalue_df.index)\n</code></pre>\n\n<p>Third: similar to Alexander's answer, discarded</p>\n"}], "owner": {"reputation": 31, "user_id": 8754608, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-SYxojSiDi6M/AAAAAAAAAAI/AAAAAAAAAJk/h1YdgYd-mnQ/photo.jpg?sz=128", "display_name": "Elena Lanigan", "link": "https://stackoverflow.com/users/8754608/elena-lanigan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1522270466, "creation_date": 1522269404, "question_id": 49543732, "link": "https://stackoverflow.com/questions/49543732/how-do-i-delete-selected-rows-from-a-dataframe-that-are-in-a-variable", "title": "How do I delete selected rows from a dataframe that are in a variable?", "body": "<p>I'm trying to delete rows with no value from a dataframe using Python and pandas.</p>\n\n<p>The selected rows are currently in a variable but it needs to be dropped from the df.</p>\n\n<p>I've tried new_df.dpop but nothing seems to work. Any suggestions?</p>\n\n<pre><code>novalue_df = new_df[new_df['age'].isnull() &amp; (new_df['churn'] == \nFalse) &amp; (new_df['avgBill'] &lt; 40)]\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "md5", "url-encoding", "hashlib"], "comments": [{"owner": {"reputation": 11221, "user_id": 3929826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56f08b81def599c554c7ab93e8593600?s=128&d=identicon&r=PG", "display_name": "Klaus D.", "link": "https://stackoverflow.com/users/3929826/klaus-d"}, "edited": false, "score": 2, "creation_date": 1522269444, "post_id": 49543681, "comment_id": 86095108, "body": "Do you expect the digest to be UTF-8 encoded?"}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1522269620, "post_id": 49543681, "comment_id": 86095210, "body": "...or phrased differently, what makes you expect the digest to be UTF-8 encoded?"}], "answers": [{"tags": [], "owner": {"reputation": 2273, "user_id": 3339058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96e83b11d2c7358ba0a1512054b6c220?s=128&d=identicon&r=PG&f=1", "display_name": "Javier", "link": "https://stackoverflow.com/users/3339058/javier"}, "is_accepted": false, "score": -1, "last_activity_date": 1522269597, "creation_date": 1522269597, "answer_id": 49543793, "question_id": 49543681, "link": "https://stackoverflow.com/questions/49543681/md5-cannot-decode-bytes/49543793#49543793", "title": "md5 cannot decode bytes", "body": "<p><code>hashed.digest().decode(\"utf-8\").rstrip('\\n')</code></p>\n\n<p>Digest returns bytes but not any byte sequence is valid UTF-8.</p>\n\n<p>I don't know what you are trying to accomplish but this code is flawed.</p>\n"}], "owner": {"reputation": 3157, "user_id": 721998, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/2b98f67a866c388331af8cc376846d12?s=128&d=identicon&r=PG", "display_name": "Darth.Vader", "link": "https://stackoverflow.com/users/721998/darth-vader"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 254, "favorite_count": 0, "closed_date": 1522269954, "answer_count": 1, "score": 0, "last_activity_date": 1522269663, "creation_date": 1522269207, "last_edit_date": 1522269663, "question_id": 49543681, "link": "https://stackoverflow.com/questions/49543681/md5-cannot-decode-bytes", "closed_reason": "Duplicate", "title": "md5 cannot decode bytes", "body": "<p>I am trying to call a service in <code>python3</code> using <code>hashlib</code> library. The last line in this code throws the exception:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>auth = hashed.digest().decode(\"utf-8\").rstrip('\\n')\nUnicodeDecodeError: 'utf-8' codec can't decode byte 0x96 in position 0: invalid start byte\n</code></pre>\n\n<p>Here is the code snippet:</p>\n\n<pre><code>import hashlib\nm = hashlib.md5()\nm.update(\"\".encode(\"utf-8\"))\ndata_hash = base64.b64encode(m.digest()).decode(\"utf-8\")\n\n# Create Authorization Header\ncanonical = '%s,application/vnd.api+json,%s,%s,%s' % (action, data_hash, url, format_date_time(stamp))\ncanonical = canonical.encode(\"utf-8\")\n\nhashed = hmac.new(bytearray(secret, \"utf-8\"), canonical, sha1)\nauth = hashed.digest().decode(\"utf-8\").rstrip('\\n')\n</code></pre>\n\n<p>What am I missing?</p>\n"}, {"tags": ["python", "selenium-webdriver", "celery", "selenium-chromedriver"], "comments": [{"owner": {"reputation": 571, "user_id": 9424384, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Alexey Dolgopolov", "link": "https://stackoverflow.com/users/9424384/alexey-dolgopolov"}, "edited": false, "score": 1, "creation_date": 1522269722, "post_id": 49543630, "comment_id": 86095270, "body": "By the way, running non-administrative tasks with root&#39;s privileges is not a healthy habit."}, {"owner": {"reputation": 571, "user_id": 9424384, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Alexey Dolgopolov", "link": "https://stackoverflow.com/users/9424384/alexey-dolgopolov"}, "edited": false, "score": 1, "creation_date": 1522269876, "post_id": 49543630, "comment_id": 86095363, "body": "Activate logging for chromedriver <a href=\"https://sites.google.com/a/chromium.org/chromedriver/logging\" rel=\"nofollow noreferrer\">sites.google.com/a/chromium.org/chromedriver/logging</a> and for Chromium itself <a href=\"https://www.chromium.org/for-testers/enable-logging\" rel=\"nofollow noreferrer\">chromium.org/for-testers/enable-logging</a> to see why Cromium crashes. That might be connected to environment differences (user data directory, env vars etc.)"}], "answers": [{"tags": [], "owner": {"reputation": 686, "user_id": 3486807, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/d71e9f3e4a6ba90f2aaab22f46cd0335?s=128&d=identicon&r=PG&f=1", "display_name": "vmenezes", "link": "https://stackoverflow.com/users/3486807/vmenezes"}, "is_accepted": false, "score": 3, "last_activity_date": 1522289604, "creation_date": 1522289604, "answer_id": 49546963, "question_id": 49543630, "link": "https://stackoverflow.com/questions/49543630/chromium-webdriver-error-when-running-as-root/49546963#49546963", "title": "Chromium webdriver error when running as root", "body": "<p>Activating logs, as suggested by comments, helped me to find/fix the error above when running with <code>sudo</code>. To run as superuser I need the <code>--no-sandbox</code> argument. as below:</p>\n\n<pre><code>$ /var/www/my_proj/env/bin/python\nPython 3.5.2 (default, Nov 17 2016, 17:05:23)\n[GCC 5.4.0 20160609] on linux\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; from selenium import webdriver\n&gt;&gt;&gt;\n&gt;&gt;&gt; chrome_options = webdriver.ChromeOptions()\n&gt;&gt;&gt; chrome_options.add_argument('--no-sandbox')\n&gt;&gt;&gt;\n&gt;&gt;&gt; driver = webdriver.Chrome(\n...   '/usr/lib/chromium-browser/chromedriver',\n...   service_args=[\"--verbose\", \"--log-path=/tmp/CHROMIUM_LOG\"],\n...   options=chrome_options)\n&gt;&gt;&gt;\n</code></pre>\n\n<p>But when called by a <code>Celery</code> task, my Python code was still raising an error trying to open Chromium. I had <code>Xvfb</code> running as a service managed by <code>supervisorctl</code> and set <code>DISPLAY</code> on <code>/etc/environment</code> but still, just when called by a Celery task it wasn't working. My solution was to use <code>pyvirtualdisplay</code> somewhat like below on my Celery task:</p>\n\n<pre><code>$ pip install pyvirtualdisplay\n$ /var/www/my_proj/env/bin/python\nPython 3.5.2 (default, Nov 17 2016, 17:05:23)\n[GCC 5.4.0 20160609] on linux\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; from pyvirtualdisplay import Display\n&gt;&gt;&gt; from selenium import webdriver\n&gt;&gt;&gt;\n&gt;&gt;&gt; display = Display(visible=0, size=(1024, 768))\n&gt;&gt;&gt; display.start()\n&gt;&gt;&gt;\n&gt;&gt;&gt; driver = webdriver.Chrome('/usr/lib/chromium-browser/chromedriver')\n&gt;&gt;&gt;\n&gt;&gt;&gt; driver.quit()\n&gt;&gt;&gt; display.stop()\n</code></pre>\n"}], "owner": {"reputation": 686, "user_id": 3486807, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/d71e9f3e4a6ba90f2aaab22f46cd0335?s=128&d=identicon&r=PG&f=1", "display_name": "vmenezes", "link": "https://stackoverflow.com/users/3486807/vmenezes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1495, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1522289646, "creation_date": 1522268998, "last_edit_date": 1522289646, "question_id": 49543630, "link": "https://stackoverflow.com/questions/49543630/chromium-webdriver-error-when-running-as-root", "title": "Chromium webdriver error when running as root", "body": "<p>On Ubuntu16, Selenium fails when running from a Python/Celery task or from python with sudo. Running script manually runs without problem.</p>\n\n<p>Sample error:</p>\n\n<pre><code>$ sudo /var/www/my_proj/env/bin/python\nPython 3.5.2 (default, Nov 17 2016, 17:05:23)\n[GCC 5.4.0 20160609] on linux\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; from selenium import webdriver\n&gt;&gt;&gt; driver = webdriver.Chrome('/usr/lib/chromium-browser/chromedriver')\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\n  File \"/var/www/my_proj/env/lib/python3.5/site-packages/selenium/webdriver/chrome/webdriver.py\", line 75, in __init__\n    desired_capabilities=desired_capabilities)\n  File \"/var/www/my_proj/env/lib/python3.5/site-packages/selenium/webdriver/remote/webdriver.py\", line 154, in __init__\n    self.start_session(desired_capabilities, browser_profile)\n  File \"/var/www/my_proj/env/lib/python3.5/site-packages/selenium/webdriver/remote/webdriver.py\", line 243, in start_session\n    response = self.execute(Command.NEW_SESSION, parameters)\n  File \"/var/www/my_proj/env/lib/python3.5/site-packages/selenium/webdriver/remote/webdriver.py\", line 312, in execute\n    self.error_handler.check_response(response)\n  File \"/var/www/my_proj/env/lib/python3.5/site-packages/selenium/webdriver/remote/errorhandler.py\", line 242, in check_response\n    raise exception_class(message, screen, stacktrace)\nselenium.common.exceptions.WebDriverException: Message: unknown error: Chrome failed to start: exited abnormally\n  (Driver info: chromedriver=2.35 (0),platform=Linux 4.4.0-116-generic x86_64)\n\n&gt;&gt;&gt;\n</code></pre>\n\n<p>Here is how it runs perfectly without sudo:</p>\n\n<pre><code>$ /var/www/my_proj/env/bin/python\nPython 3.5.2 (default, Nov 17 2016, 17:05:23)\n[GCC 5.4.0 20160609] on linux\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; from selenium import webdriver\n&gt;&gt;&gt; driver = webdriver.Chrome('/usr/lib/chromium-browser/chromedriver')\n&gt;&gt;&gt;\n</code></pre>\n\n<p>Chromium/Xvfb were installed as:</p>\n\n<pre><code>sudo apt install xvfb -y\nsudo apt-get install chromium-chromedriver -y\n</code></pre>\n"}, {"tags": ["python", "subprocess"], "comments": [{"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1522270534, "post_id": 49543605, "comment_id": 86095720, "body": "Quotes in <code>echo -e &#39;foo&#39;</code> are for the shell&#39;s consumption. When you&#39;re passing an explicit argv list and using <code>shell=False</code>, there <i>is</i> no shell to consume them, so they&#39;re literal. Same for the <code>|</code> -- it&#39;s an instruction to the shell; if there is no shell, there&#39;s nothing to follow that instruction."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1522270566, "post_id": 49543605, "comment_id": 86095738, "body": "See the <a href=\"https://docs.python.org/2/library/subprocess.html#replacing-shell-pipeline\" rel=\"nofollow noreferrer\">replacing shell pipelines</a> section in the popen documentation, for cases where you actually <i>did</i> need a pipeline."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1522270630, "post_id": 49543605, "comment_id": 86095778, "body": "That said, <code>echo -e</code> should never be used -- the only interpretation of black-letter POSIX spec is that <code>echo -e</code> <i>must</i> print <code>-e</code> on output; any shell that doesn&#39;t do so is noncompliant. (Bash is noncompliant <i>by default</i>, but becomes compliant if the <code>xpg_echo</code> and <code>posix</code> options are set, so even if your shell is bash, it isn&#39;t safe to make assumptions about what <code>echo -e</code> will do). See <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/utilities/echo.html\" rel=\"nofollow noreferrer\">pubs.opengroup.org/onlinepubs/9699919799/utilities/echo.html</a>&zwnj;&#8203;, particularly, the APPLICATION USAGE and RATIONALE sections."}], "answers": [{"tags": [], "owner": {"reputation": 5053, "user_id": 2421391, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/980724d5505b7c2ee035c38b8adabd54?s=128&d=identicon&r=PG", "display_name": "scnerd", "link": "https://stackoverflow.com/users/2421391/scnerd"}, "is_accepted": true, "score": 2, "last_activity_date": 1522269591, "creation_date": 1522269591, "answer_id": 49543790, "question_id": 49543605, "link": "https://stackoverflow.com/questions/49543605/echoing-commands-with-returns-into-popen-stdin/49543790#49543790", "title": "echo&#39;ing commands (with returns) into Popen stdin", "body": "<p>Why not just run <code>fdisk</code> and send it the input yourself?</p>\n\n<pre><code>command = ['sudo', 'fdisk', '/dev/xvdm']\np = subprocess.Popen(command, stdin=subprocess.PIPE, \n                              stdout=subprocess.PIPE, \n                              stderr=subprocess.PIPE)\noutput, err = p.communicate(b\"o\\nn\\np\\n1\\n\\n\\nw\")\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1522270675, "post_id": 49543995, "comment_id": 86095800, "body": "If you changed it from <code>echo -e</code> (a bashism when doing anything other than printing <code>-e</code> on output) to <code>printf</code> (standard-mandated functionality), you could set <code>shell=True</code> and avoid the need for <code>bash -c</code>."}, {"owner": {"reputation": 13, "user_id": 4974556, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-tNeLLyKrO8s/AAAAAAAAAAI/AAAAAAAA3vY/eqOfE7gSDVI/photo.jpg?sz=128", "display_name": "Guillaume L.", "link": "https://stackoverflow.com/users/4974556/guillaume-l"}, "reply_to_user": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1522271089, "post_id": 49543995, "comment_id": 86096002, "body": "Yes good comment. It is better with shell=True, for exemple: command = [&quot;echo -e &#39;o\\nn\\np\\n1\\n\\n\\nw&#39; | sudo fdisk /dev/xvdm&quot;] p = subprocess.Popen(command, ... , shell=True)"}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1522277860, "post_id": 49543995, "comment_id": 86098481, "body": "With <code>shell=True</code>, your shell is <code>&#47;bin&#47;sh</code>, so <code>echo -e</code> is not guaranteed to work. See <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/utilities/echo.html\" rel=\"nofollow noreferrer\">pubs.opengroup.org/onlinepubs/9699919799/utilities/echo.html</a> -- the POSIX standard for <code>echo</code> itself suggests using <code>printf</code> instead, if using backslashes in format strings, or <code>-n</code>. (<code>-e</code> isn&#39;t mentioned at all, as the black-and-white text of the specification doesn&#39;t permit it to have any special behavior; see &quot;implementations shall not support any options&quot; in the header up top; the only exception to that is specified for <code>-n</code>, which makes behavior undefined when passed as the first operand)."}], "tags": [], "owner": {"reputation": 13, "user_id": 4974556, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-tNeLLyKrO8s/AAAAAAAAAAI/AAAAAAAA3vY/eqOfE7gSDVI/photo.jpg?sz=128", "display_name": "Guillaume L.", "link": "https://stackoverflow.com/users/4974556/guillaume-l"}, "is_accepted": false, "score": 0, "last_activity_date": 1522270427, "creation_date": 1522270427, "answer_id": 49543995, "question_id": 49543605, "link": "https://stackoverflow.com/questions/49543605/echoing-commands-with-returns-into-popen-stdin/49543995#49543995", "title": "echo&#39;ing commands (with returns) into Popen stdin", "body": "<p>You can not use a pipe (|) in a command like this. The pipe is given as argument to the program (\"echo\" in your case).</p>\n\n<p>scnerd give you the best way/answer to send input text to fdisk.</p>\n\n<p>If you really want to keep the pipe, you shall run a \"bash\" program with argument \"-c\" (command), and give in parameter the command (including your pipe) :</p>\n\n<pre><code>command = ['bash', '-c', \"echo -e 'o\\nn\\np\\n1\\n\\n\\nw' | sudo fdisk /dev/xvdm\"]\np = subprocess.Popen(command, stdin=subprocess.PIPE, \n                     stdout=subprocess.PIPE, \n                     stderr=subprocess.PIPE)\noutput, err = p.communicate()\n</code></pre>\n"}], "owner": {"reputation": 450, "user_id": 6775715, "user_type": "registered", "accept_rate": 47, "profile_image": "https://lh4.googleusercontent.com/-WFXHejgHHew/AAAAAAAAAAI/AAAAAAAAAl0/vFbrYjsoFNw/photo.jpg?sz=128", "display_name": "M Leonard", "link": "https://stackoverflow.com/users/6775715/m-leonard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 311, "favorite_count": 0, "accepted_answer_id": 49543790, "answer_count": 2, "score": 0, "last_activity_date": 1522270427, "creation_date": 1522268886, "question_id": 49543605, "link": "https://stackoverflow.com/questions/49543605/echoing-commands-with-returns-into-popen-stdin", "title": "echo&#39;ing commands (with returns) into Popen stdin", "body": "<p>I'd like to run an fdisk function in python, but the returns are making this not work...</p>\n\n<pre><code>command = ['echo', '-e', \"'o\\nn\\np\\n1\\n\\n\\nw'\", '|', 'sudo', 'fdisk', '/dev/xvdm']\np = subprocess.Popen(command, stdin=subprocess.PIPE, \n                              stdout=subprocess.PIPE, \n                              stderr=subprocess.PIPE)\noutput, err = p.communicate()\n</code></pre>\n\n<p>This gives the the (incorrect) output of:\n<code>b\"'o\\nn\\np\\n1\\n\\n\\nw' | sudo fdisk /dev/xvdm\\n\"</code></p>\n\n<p>What is the equivalent? </p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 3298, "user_id": 8928024, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/75f4b1f5d87975964979ce2718af1ae9?s=128&d=identicon&r=PG&f=1", "display_name": "ZF007", "link": "https://stackoverflow.com/users/8928024/zf007"}, "edited": false, "score": 0, "creation_date": 1522269758, "post_id": 49543560, "comment_id": 86095296, "body": "try using [,,] instead of []."}], "answers": [{"comments": [{"owner": {"reputation": 71, "user_id": 9419249, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd42dfcbfdf6dcde72e95accd151412b?s=128&d=identicon&r=PG&f=1", "display_name": "C L", "link": "https://stackoverflow.com/users/9419249/c-l"}, "edited": false, "score": 0, "creation_date": 1523188360, "post_id": 49544036, "comment_id": 86448018, "body": "Perfect! Thank you!"}], "tags": [], "owner": {"reputation": 2261, "user_id": 8544123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f32b871be77d8c71efc294359b300367?s=128&d=identicon&r=PG&f=1", "display_name": "Acccumulation", "link": "https://stackoverflow.com/users/8544123/acccumulation"}, "is_accepted": true, "score": 0, "last_activity_date": 1522270567, "creation_date": 1522270567, "answer_id": 49544036, "question_id": 49543560, "link": "https://stackoverflow.com/questions/49543560/how-do-i-save-my-list-to-a-dataframe-keeping-empty-rows/49544036#49544036", "title": "How do I save my list to a dataframe keeping empty rows?", "body": "<p>You're supposed to pass a DataFrame-shaped object to <code>append</code>. Passing the raw data doesn't work. So <code>df2=df2.append([['0','0','0']],ignore_index=True)</code></p>\n\n<p>You can also wrap your processing in a function <code>process_row</code>, then do <code>df2 = pd.DataFrame([process_row(row) for row in df1.iterrows()])</code>. Note that while <code>append</code> won't work with empty rows, the DataFrame constructor just fills them in with <code>None</code>. If you want empty rows to be <code>['0','0','0']</code>, you have several options: </p>\n\n<p>-Have your processing function return <code>['0','0','0']</code> for empty rows<br>  -Change the list comprehension to <code>[process_row(row) if process_row(row) else ['0','0','0'] for row in df1.iterrows()]</code> <br> -Do <code>df2=df2.fillna('0')</code></p>\n"}], "owner": {"reputation": 71, "user_id": 9419249, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd42dfcbfdf6dcde72e95accd151412b?s=128&d=identicon&r=PG&f=1", "display_name": "C L", "link": "https://stackoverflow.com/users/9419249/c-l"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 49544036, "answer_count": 1, "score": 1, "last_activity_date": 1522270567, "creation_date": 1522268665, "question_id": 49543560, "link": "https://stackoverflow.com/questions/49543560/how-do-i-save-my-list-to-a-dataframe-keeping-empty-rows", "title": "How do I save my list to a dataframe keeping empty rows?", "body": "<p>I'm trying to extract subject-verb-object triplets and then attach an ID. I am using a loop so my list of extracted triplets keeping the results for the rows were no triplet was found. So it looks like:</p>\n\n<pre><code>[]\n[trump,carried,energy]\n[]\n[clinton,doesn't,trust]\n</code></pre>\n\n<p>When I print mylist it looks as expected.</p>\n\n<p>However when I try and create a dataframe from mylist I get an error caused by the empty rows</p>\n\n<pre><code>`IndexError: list index out of range`.\n</code></pre>\n\n<p>I tried to include an if statement to avoid this but the problem is the same. I also tried using reindex instead but the df2 came out empty.</p>\n\n<pre><code># -*- coding: utf-8 -*-\nfrom __future__ import unicode_literals\nimport spacy\nimport textacy\nimport csv, string, re\nimport numpy as np\nimport pandas as pd\n\n#Import csv file with pre-processing already carried out\nimport pandas as pd\ndf = pd.read_csv(\"pre-processed_file_1.csv\", sep=\",\")\n\n#Prepare dataframe to be relevant columns and unicode\ndf1 = df[['text_1', 'id']].copy()\nimport StringIO\ns = StringIO.StringIO()\ntweets = df1.to_csv(encoding='utf-8');\nnlp = spacy.load('en')\n\ncount = 0;\ndf2 = pd.DataFrame();\nfor row in df1.iterrows():\n  doc = nlp(unicode(row));\n  text_ext = textacy.extract.subject_verb_object_triples(doc);\n  tweetID = df['id'].tolist();\n  mylist = list(text_ext)\n  count = count + 1;\n  if (mylist):\n        df2 = df2.append(mylist, ignore_index=True)\n  else:\n        df2 = df2.append('0','0','0')\n</code></pre>\n\n<p>Any help would be very appreciated. Thank you!</p>\n"}, {"tags": ["python", "python-3.x", "python-2.7"], "answers": [{"comments": [{"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "reply_to_user": {"reputation": 385, "user_id": 7071794, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4353587e6012c22df002028e022cb4be?s=128&d=identicon&r=PG&f=1", "display_name": "qasim", "link": "https://stackoverflow.com/users/7071794/qasim"}, "edited": false, "score": 0, "creation_date": 1522269929, "post_id": 49543588, "comment_id": 86095391, "body": "I don&#39;t how to fix it, because I don&#39;t know what you&#39;re doing.  Are those supposed to be the names of the files from the command line?  The data in the files?  Something else?"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "reply_to_user": {"reputation": 385, "user_id": 7071794, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4353587e6012c22df002028e022cb4be?s=128&d=identicon&r=PG&f=1", "display_name": "qasim", "link": "https://stackoverflow.com/users/7071794/qasim"}, "edited": false, "score": 0, "creation_date": 1522269972, "post_id": 49543588, "comment_id": 86095413, "body": "I assumed that picking up command-line arguments could <i>not</i> be your problem, considering the many examples and tutorials on that topic."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "reply_to_user": {"reputation": 385, "user_id": 7071794, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4353587e6012c22df002028e022cb4be?s=128&d=identicon&r=PG&f=1", "display_name": "qasim", "link": "https://stackoverflow.com/users/7071794/qasim"}, "edited": false, "score": 0, "creation_date": 1522276632, "post_id": 49543588, "comment_id": 86098145, "body": "Great; then the on-line sources for working with <code>args</code> (try <code>kwargs</code> if you need to refine the search`) should fix the problem."}], "tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 0, "last_activity_date": 1522268772, "creation_date": 1522268772, "answer_id": 49543588, "question_id": 49543553, "link": "https://stackoverflow.com/questions/49543553/name-error-when-calculating-the-average-error-between-two-data-sets/49543588#49543588", "title": "Name error when calculating the average error between two data sets", "body": "<p>Where are you stuck on this?  The first active statement executed in your main program is</p>\n\n<pre><code>analysis(first1, second2)\n</code></pre>\n\n<p>Neither of those variables is defined anywhere in the main program.\nThat's why you get the error.  The sequence you have is something like this:</p>\n\n<pre><code>import stuff\ndefine (but don't execute) main function\ndefine (but don't execute) analysis function\ncall analysis, giving it variables first1 &amp; second2\n</code></pre>\n\n<p>Again, those variables are <em>not</em> defined yet.</p>\n"}], "owner": {"reputation": 385, "user_id": 7071794, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4353587e6012c22df002028e022cb4be?s=128&d=identicon&r=PG&f=1", "display_name": "qasim", "link": "https://stackoverflow.com/users/7071794/qasim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 111, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1522268772, "creation_date": 1522268636, "question_id": 49543553, "link": "https://stackoverflow.com/questions/49543553/name-error-when-calculating-the-average-error-between-two-data-sets", "title": "Name error when calculating the average error between two data sets", "body": "<p>I want to calculate the average error between two data sets and write the result to a file but my code gives this error: </p>\n\n<blockquote>\n  <p>NameError: name 'first1' is not defined</p>\n</blockquote>\n\n<p>Could you please tell me how to fix this error? </p>\n\n<p>The command I use to run the code is here: </p>\n\n<blockquote>\n  <p>python script.py input1.txt input2.txt > output.txt</p>\n</blockquote>\n\n<p><strong>My code:</strong></p>\n\n<pre><code>import numpy\nfrom numpy import *\nimport scipy\nimport scipy.stats\nimport matplotlib. pyplot as plt\nimport matplotlib.patches as patches\nfrom pylab import *\nimport scipy.integrate\nfrom operator import itemgetter, attrgetter\nimport sys\n\ndef main(argv):\n    t = open(sys.argv[1])\n    first1 = t.readline()\n\n    tt = open(argv[2])\n    second2 = tt.readline()\n    return [first1], [second2]\n\ndef analysis(first1, second2):\n\n    first = np.array(first1, dtype = np.float64)\n    second = np.array(second2, dtype = np.float64)\n\n    #Average error\n    avgerr = (first - second).mean()\n\n    return [avgerr]\n\nanalysis(first1, second2)\n\nif __name__ == '__main__':\n    sys.exit(main(sys.argv))\n</code></pre>\n\n<p><strong>input1.txt:</strong></p>\n\n<pre><code>2.5\n2.8\n3.9\n4.2\n5.8\n</code></pre>\n\n<p><strong>input2.txt:</strong></p>\n\n<pre><code>0.8\n2.5\n3.2\n5.8\n6.3\n</code></pre>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 1188, "user_id": 4514236, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-ychAiduF2Y8/AAAAAAAAAAI/AAAAAAAAABM/LUFe9_quxVs/photo.jpg?sz=128", "display_name": "Peter Dolan", "link": "https://stackoverflow.com/users/4514236/peter-dolan"}, "edited": false, "score": 2, "creation_date": 1522269468, "post_id": 49543533, "comment_id": 86095122, "body": "Hey @doublevoid, just to be clear: you want a subfunction that takes in lines of chunk size = 4, until you reach the end of file correct? Suppose the file was 7 lines long -- would you want one chunk of 4, and one chunk of 3?"}, {"owner": {"reputation": 632, "user_id": 3023032, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/5VlOh.jpg?s=128&g=1", "display_name": "DoubleVoid", "link": "https://stackoverflow.com/users/3023032/doublevoid"}, "reply_to_user": {"reputation": 1188, "user_id": 4514236, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-ychAiduF2Y8/AAAAAAAAAAI/AAAAAAAAABM/LUFe9_quxVs/photo.jpg?sz=128", "display_name": "Peter Dolan", "link": "https://stackoverflow.com/users/4514236/peter-dolan"}, "edited": false, "score": 0, "creation_date": 1522270363, "post_id": 49543533, "comment_id": 86095618, "body": "Correct, if the file has 7 lines, it&#39;s okay if the last chunk contains only 3 lines. :)"}, {"owner": {"reputation": 1188, "user_id": 4514236, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-ychAiduF2Y8/AAAAAAAAAAI/AAAAAAAAABM/LUFe9_quxVs/photo.jpg?sz=128", "display_name": "Peter Dolan", "link": "https://stackoverflow.com/users/4514236/peter-dolan"}, "edited": false, "score": 1, "creation_date": 1522270420, "post_id": 49543533, "comment_id": 86095654, "body": "Got it. In that case I think @Francsco Court answered it!"}, {"owner": {"reputation": 632, "user_id": 3023032, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/5VlOh.jpg?s=128&g=1", "display_name": "DoubleVoid", "link": "https://stackoverflow.com/users/3023032/doublevoid"}, "reply_to_user": {"reputation": 1188, "user_id": 4514236, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-ychAiduF2Y8/AAAAAAAAAAI/AAAAAAAAABM/LUFe9_quxVs/photo.jpg?sz=128", "display_name": "Peter Dolan", "link": "https://stackoverflow.com/users/4514236/peter-dolan"}, "edited": false, "score": 0, "creation_date": 1522270442, "post_id": 49543533, "comment_id": 86095664, "body": "Thanks, I am checking his answer out right now :)"}], "answers": [{"comments": [{"owner": {"reputation": 632, "user_id": 3023032, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/5VlOh.jpg?s=128&g=1", "display_name": "DoubleVoid", "link": "https://stackoverflow.com/users/3023032/doublevoid"}, "edited": false, "score": 0, "creation_date": 1522271717, "post_id": 49543836, "comment_id": 86096286, "body": "This works just fine :) Is there a way to tell Python to always generate 4 entries, even when there are less than 4 values left? I am using <code>lines = all_lines[i:i+4]</code> =&gt; <code>lines[3]</code> could cause an exception when there are only 7 lines in the file. Checking for None than len() seems more elegant to me here. Anyway marked as answer!"}], "tags": [], "owner": {"reputation": 8761, "user_id": 1192111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/578c0836635d7d63abf64daaafb3ffa6?s=128&d=identicon&r=PG", "display_name": "Francisco C", "link": "https://stackoverflow.com/users/1192111/francisco-c"}, "is_accepted": true, "score": 1, "last_activity_date": 1522269798, "creation_date": 1522269798, "answer_id": 49543836, "question_id": 49543533, "link": "https://stackoverflow.com/questions/49543533/read-n-lines-until-eof-in-python-3/49543836#49543836", "title": "Read N lines until EOF in Python 3", "body": "<p>If you want to iterate the lines in chunks of 4, you can do something like this:</p>\n\n<pre><code>if os.path.isfile(myfile):\n    with open(myfile, 'r') as fo:\n        all_lines = fo.readlines()\n        for i in range(0, len(all_lines), 4):\n            print(all_lines[i:i+4])\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 632, "user_id": 3023032, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/5VlOh.jpg?s=128&g=1", "display_name": "DoubleVoid", "link": "https://stackoverflow.com/users/3023032/doublevoid"}, "edited": false, "score": 0, "creation_date": 1522271784, "post_id": 49544011, "comment_id": 86096309, "body": "Thanks for your answer. Since I want to process 4 lines at one, in one block, this does not work. the loop is giving me each line at once, except I missed something here?!"}], "tags": [], "owner": {"reputation": 8239, "user_id": 4056181, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/G0SRK.jpg?s=128&g=1", "display_name": "jmd_dk", "link": "https://stackoverflow.com/users/4056181/jmd-dk"}, "is_accepted": false, "score": 0, "last_activity_date": 1522270482, "creation_date": 1522270482, "answer_id": 49544011, "question_id": 49543533, "link": "https://stackoverflow.com/questions/49543533/read-n-lines-until-eof-in-python-3/49544011#49544011", "title": "Read N lines until EOF in Python 3", "body": "<p>Instead of reading in the whole file and then looping over the lines four at a time, you can simply read them in four at a time. Consider</p>\n\n<pre><code>def fun(myfile):\n    if not os.path.isfile(myfile):\n        return\n    with open(myfile, 'r') as fo:\n        while True:\n            for line in (fo.readline() for _ in range(4)):\n                if not line:\n                    return\n                print(line)\n</code></pre>\n\n<p>Here, a generator expression is used to read four lines, which is embedded in an \"infinite\" loop, which stop when <code>line</code> is falsy (the empty <code>str</code> <code>''</code>), which only happens when we have reached EOF.</p>\n"}], "owner": {"reputation": 632, "user_id": 3023032, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/5VlOh.jpg?s=128&g=1", "display_name": "DoubleVoid", "link": "https://stackoverflow.com/users/3023032/doublevoid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 412, "favorite_count": 0, "accepted_answer_id": 49543836, "answer_count": 2, "score": 0, "last_activity_date": 1522270482, "creation_date": 1522268583, "question_id": 49543533, "link": "https://stackoverflow.com/questions/49543533/read-n-lines-until-eof-in-python-3", "title": "Read N lines until EOF in Python 3", "body": "<p>Hi tried several solutions found on SO but I am missing some info.</p>\n\n<p>I want to read 4 lines at once until I hit EOF. I know how to do it in other languages, but what is the best approach in Python 3?</p>\n\n<p>This is what I have, <code>lines</code> is always the first 4 lines and the code stops afterwards (I know, because the comprehension only gives me the first 4 elements of <code>all_lines</code>. I could use some kind of counter and break and so on, but that seems rather cheap to me.</p>\n\n<pre><code>if os.path.isfile(myfile):\n    with open(myfile, 'r') as fo:\n        all_lines = fo.readlines()\n        for lines in all_lines[:4]:\n            print(lines)\n</code></pre>\n\n<p>I want to handle 4 lines at once until I hit EOF. The file I am working with is rather short, maybe about 100 lines MAX</p>\n"}, {"tags": ["python", "html", "django", "django-templates"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 8155677, "user_type": "registered", "profile_image": "https://graph.facebook.com/10158820969760322/picture?type=large", "display_name": "swilson0897", "link": "https://stackoverflow.com/users/8155677/swilson0897"}, "edited": false, "score": 1, "creation_date": 1522330437, "post_id": 49544118, "comment_id": 86122435, "body": "Thanks @jsanchez, I thought I had tried this but I couldn&#39;t get it working either guess I had something mixed up!."}, {"owner": {"reputation": 1602, "user_id": 5682919, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4rC18.png?s=128&g=1", "display_name": "jsanchezs", "link": "https://stackoverflow.com/users/5682919/jsanchezs"}, "reply_to_user": {"reputation": 13, "user_id": 8155677, "user_type": "registered", "profile_image": "https://graph.facebook.com/10158820969760322/picture?type=large", "display_name": "swilson0897", "link": "https://stackoverflow.com/users/8155677/swilson0897"}, "edited": false, "score": 0, "creation_date": 1522332621, "post_id": 49544118, "comment_id": 86124219, "body": "My pleasure @swilson0897"}], "tags": [], "owner": {"reputation": 1602, "user_id": 5682919, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4rC18.png?s=128&g=1", "display_name": "jsanchezs", "link": "https://stackoverflow.com/users/5682919/jsanchezs"}, "is_accepted": true, "score": 0, "last_activity_date": 1522270900, "creation_date": 1522270900, "answer_id": 49544118, "question_id": 49543522, "link": "https://stackoverflow.com/questions/49543522/how-to-display-user-permission-in-django-template/49544118#49544118", "title": "How to display User Permission in Django template", "body": "<p>Do it like this better:</p>\n\n<p>from django import template\nregister = template.Library()</p>\n\n<pre><code>@register.filter()\ndef check_permission(user, permission):\n    if user.user_permissions.filter(codename = permission).exists():\n        return True\n    return False\n</code></pre>\n\n<p>It checks in a efficient way if the permission exists, then, inside template load tags and use it:</p>\n\n<pre><code>{%load mytags%}  &lt;!-- Assuming this is your tags.py file name --&gt;\n\n{% if user|check_permission:'2018_map_view' %}\n        ... do your staff ...\n{% endif %}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 8155677, "user_type": "registered", "profile_image": "https://graph.facebook.com/10158820969760322/picture?type=large", "display_name": "swilson0897", "link": "https://stackoverflow.com/users/8155677/swilson0897"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 812, "favorite_count": 0, "accepted_answer_id": 49544118, "answer_count": 1, "score": 0, "last_activity_date": 1522270900, "creation_date": 1522268552, "question_id": 49543522, "link": "https://stackoverflow.com/questions/49543522/how-to-display-user-permission-in-django-template", "title": "How to display User Permission in Django template", "body": "<p>So I am currently setting some user permissions upon creation to Django user's.</p>\n\n<p>I would like to display a table of all the users as well as information about them such as username, password permissions etc.. </p>\n\n<p>The code to do this look's similar to this.</p>\n\n<pre><code>&lt;table id='usersTable'&gt;\n                    &lt;tr&gt;\n                        &lt;th&gt;&lt;/th&gt;\n                        &lt;th&gt;Status&lt;/th&gt;\n                        &lt;th&gt;Username&lt;/th&gt;\n                        &lt;th&gt;First Name&lt;/th&gt;\n                        &lt;th&gt;Last Name&lt;/th&gt;\n                        &lt;th&gt;Email&lt;/th&gt;\n                        &lt;th&gt;Last Login&lt;/th&gt;\n                        &lt;th&gt;Expiry Date&lt;/th&gt;\n                        &lt;th&gt;Permission&lt;/th&gt;\n                    &lt;/tr&gt;\n                    {% for user in userlist %}\n                    &lt;tr id='{{ user.id }}' class='user-row urow'&gt;\n                        &lt;td&gt;\n                            &lt;input type=\"checkbox\" name=\"check\" class='userSelection'&gt;\n                        &lt;/td&gt;\n                        &lt;td&gt;\n                            &lt;div class=\"status\"&gt;&lt;/div&gt;\n                        &lt;/td&gt;\n                        &lt;td&gt;{{user.username}}&lt;/td&gt;\n                        &lt;td&gt;{{user.first_name}}&lt;/td&gt;\n                        &lt;td&gt;{{user.last_name}}&lt;/td&gt;\n                        &lt;td&gt;{{user.email}}&lt;/td&gt;\n                        &lt;td&gt;{{user.last_login}}&lt;/td&gt;\n                        &lt;td&gt;{{user.userprofile.date_expiry}}&lt;/td&gt;\n                        {% load user_perm %}\n                        &lt;td&gt;\n                            {% if user|check_permission:'2018_map_view' %}\n                               I have 2018 access\n                            {% endif %}\n                            {% if user|check_permission:'2017_map_view' %}\n                               I have 2017 access\n                            {% endif %}\n                        &lt;/td&gt;\n                    &lt;/tr&gt;\n                    {% endfor %}\n                &lt;/table&gt;\n</code></pre>\n\n<p>I have on the bottom the attempted code to display each user permission in the table however it does not seem to be working. </p>\n\n<p>I have my templatetags code that looks like this </p>\n\n<pre><code>from django.template import Library\n\nregister = Library()\n\n@register.filter()\ndef check_permission(user, permission):\n        permission = user.has_perm(permission)\n        print(permission)\n        return user.has_perm(permission)\n</code></pre>\n\n<p>I believe the problem lies within my user in userList and it is having problem looping through all user's but I am unsure how to fix this. Any insite would be greatly appreciated. </p>\n"}, {"tags": ["python", "unit-testing", "mocking", "patch"], "comments": [{"owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 1, "creation_date": 1522268487, "post_id": 49543486, "comment_id": 86094583, "body": "It sounds like you answered your own question."}, {"owner": {"reputation": 2272, "user_id": 703139, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/V88PN.png?s=128&g=1", "display_name": "tsar2512", "link": "https://stackoverflow.com/users/703139/tsar2512"}, "reply_to_user": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 0, "creation_date": 1522268621, "post_id": 49543486, "comment_id": 86094657, "body": "I actually want to know how I should go about it, I guessed it&#39;s because bar is initialized to <code>None</code> but then in my real code it&#39;s setup somewhere else before this function... here I just need to patch bar.items_dict"}, {"owner": {"reputation": 2272, "user_id": 703139, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/V88PN.png?s=128&g=1", "display_name": "tsar2512", "link": "https://stackoverflow.com/users/703139/tsar2512"}, "reply_to_user": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 0, "creation_date": 1522268629, "post_id": 49543486, "comment_id": 86094660, "body": "@KennyOstrom can you explain how I can do this?"}, {"owner": {"reputation": 7191, "user_id": 4929646, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/HWc5G.jpg?s=128&g=1", "display_name": "Danila Ganchar", "link": "https://stackoverflow.com/users/4929646/danila-ganchar"}, "edited": false, "score": 1, "creation_date": 1522268847, "post_id": 49543486, "comment_id": 86094795, "body": "@tsar2512 Could you show your <code>Foo</code> class, imports and full test?"}, {"owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 0, "creation_date": 1522269118, "post_id": 49543486, "comment_id": 86094956, "body": "mock the bar object, instead of letting it run with None. You can&#39;t set properties on None."}, {"owner": {"reputation": 2272, "user_id": 703139, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/V88PN.png?s=128&g=1", "display_name": "tsar2512", "link": "https://stackoverflow.com/users/703139/tsar2512"}, "reply_to_user": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 0, "creation_date": 1522269280, "post_id": 49543486, "comment_id": 86095031, "body": "@KennyOstrom so that&#39;s what I want to understand how do I mock the object... i.e. the only attributes in the bar object I am concerned about is items_dict.."}, {"owner": {"reputation": 2272, "user_id": 703139, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/V88PN.png?s=128&g=1", "display_name": "tsar2512", "link": "https://stackoverflow.com/users/703139/tsar2512"}, "reply_to_user": {"reputation": 7191, "user_id": 4929646, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/HWc5G.jpg?s=128&g=1", "display_name": "Danila Ganchar", "link": "https://stackoverflow.com/users/4929646/danila-ganchar"}, "edited": false, "score": 0, "creation_date": 1522269556, "post_id": 49543486, "comment_id": 86095173, "body": "@DanilaGanchar updated"}], "answers": [{"comments": [{"owner": {"reputation": 2272, "user_id": 703139, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/V88PN.png?s=128&g=1", "display_name": "tsar2512", "link": "https://stackoverflow.com/users/703139/tsar2512"}, "edited": false, "score": 0, "creation_date": 1522277159, "post_id": 49545022, "comment_id": 86098294, "body": "thank you this is pretty detailed and gives me a good explanation of how mock vs patch works.... I already fixed my code to use Mock and it worked but this helps anyways :)"}, {"owner": {"reputation": 7191, "user_id": 4929646, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/HWc5G.jpg?s=128&g=1", "display_name": "Danila Ganchar", "link": "https://stackoverflow.com/users/4929646/danila-ganchar"}, "reply_to_user": {"reputation": 2272, "user_id": 703139, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/V88PN.png?s=128&g=1", "display_name": "tsar2512", "link": "https://stackoverflow.com/users/703139/tsar2512"}, "edited": false, "score": 0, "creation_date": 1522305771, "post_id": 49545022, "comment_id": 86106316, "body": "@tsar2512 I was glad to help. Good luck ;)"}], "tags": [], "owner": {"reputation": 7191, "user_id": 4929646, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/HWc5G.jpg?s=128&g=1", "display_name": "Danila Ganchar", "link": "https://stackoverflow.com/users/4929646/danila-ganchar"}, "is_accepted": true, "score": 0, "last_activity_date": 1522275212, "creation_date": 1522275212, "answer_id": 49545022, "question_id": 49543486, "link": "https://stackoverflow.com/questions/49543486/mocking-dictionary-in-python/49545022#49545022", "title": "Mocking Dictionary in python", "body": "<p>Not sure that you need <code>patch</code> in your case. <code>Patch</code> more ofen uses to 'mocking' functions of modules. You can use <code>Mock</code> object to create a structure for testing(with 'mocked' methods and properties).</p>\n\n<blockquote>\n  <p>First of all, I think you got the error because you sent <code>None</code> to\n  constructor. But <code>NoneType</code> doesn't have <code>items_dict</code> property.</p>\n</blockquote>\n\n<p>Here a small example which can help you:</p>\n\n<pre><code>from mock import Mock\n\nclass Foo(object):\n\n    def __init__(self, bar_val):  # type: (Bar) -&gt; None\n        self.bar = bar_val\n\n    def get_bar_items_dict(self):  # type: () -&gt; dict\n        # just example - return items_dict of Bar object\n        return self.bar.items_dict\n\n    def create_css_for_imgs(self):  # type: () -&gt; str\n        return 'example'\n\n\nclass Bar(object):\n\n    def __init__(self):\n        self.items_dict = {}\n        # other properties...\n\n\nclass TestExample(TestCase):\n\n    def test_create_css_for_imgs(self):\n        # create Mock instead Bar object and say that items_dict isn't empty dict\n        bar = Mock(items_dict={'custom': 'dict'})\n        # foo.bar will be 'Mock' object\n        foo = Foo(bar)\n        # check result of 'create_css_for_imgs' Foo object\n        self.assertEqual(\n            foo.create_css_for_imgs(),\n            'example'\n        )\n\n        # check result of foo.bar.items_dict\n        self.assertDictEqual(\n            foo.get_bar_items_dict(),\n            {'custom': 'dict'}\n        )\n</code></pre>\n\n<p><strong>So let's summarize.</strong> You got the error because you tried to get <code>items_dict</code> of <code>None</code> type(looks like: <code>a = None a.items_dict</code>).\nYou can create any object for testing(with 'mocked' methods and properties) without 'patching' of original class. Example:</p>\n\n<pre><code>one = Mock(one_propery=1)\ntwo = Mock(one=one)\nthree = Mock(two=two)\nthree.my_method.return_value = [1, 2, 3]\n# check our object\nprint three.two.one.one_propery # 1\nprint three.my_method() # [1, 2, 3]\n</code></pre>\n\n<p>In some cases we need to 'mock' method of class(for example for group tests). In this case you can use <code>patch</code>:</p>\n\n<pre><code>    mocked_create = mock.patch(\n        'your_pack.your_module.Foo.create_css_for_imgs',\n        return_value='changed example'\n    )\n    # change 'example' to 'changed example'\n    mocked_create.start()\n    foo = Foo(Bar())\n    print foo.create_css_for_imgs()  # 'changed example'\n    mocked_create.stop()\n</code></pre>\n\n<p>Hope this helps.</p>\n"}], "owner": {"reputation": 2272, "user_id": 703139, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/V88PN.png?s=128&g=1", "display_name": "tsar2512", "link": "https://stackoverflow.com/users/703139/tsar2512"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5532, "favorite_count": 0, "accepted_answer_id": 49545022, "answer_count": 1, "score": 1, "last_activity_date": 1522275212, "creation_date": 1522268393, "last_edit_date": 1522269198, "question_id": 49543486, "link": "https://stackoverflow.com/questions/49543486/mocking-dictionary-in-python", "title": "Mocking Dictionary in python", "body": "<p>I'm new to patching/mocking in general and in python in particular. I am trying to patch a dict which will be accessed in a test case using the following</p>\n\n<pre><code>obj = Foo(None)\nwith patch.dict(obj.bar.items_dict,{TEST_DIR + '/Transparent.gif', data}):\n    output = obj.create_css_for_imgs()\n</code></pre>\n\n<p>But i get the following error. Please understand that the <code>__init__()</code> function of Foo makes bar <code>None</code> by default</p>\n\n<p>AttributeError: 'NoneType' object has no attribute 'items_dict'</p>\n\n<p>The classes are as follows:</p>\n\n<pre><code>class Foo(object):\n    def __init__(self, barVal):\n        self.bar = barVal\n\nclass Bar():\n    def __init__(self, val)\n        self.items_dict = {}\n        self._load(val)\n</code></pre>\n"}, {"tags": ["python", "list", "tuples"], "comments": [{"owner": {"reputation": 6208, "user_id": 4042267, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b869ca5adc52b16ef56ab1fb6ed5fe97?s=128&d=identicon&r=PG", "display_name": "Graipher", "link": "https://stackoverflow.com/users/4042267/graipher"}, "edited": false, "score": 2, "creation_date": 1522268389, "post_id": 49543468, "comment_id": 86094523, "body": "Did you try <code>tuple1 = (num[0], letter1)</code>?"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 1, "creation_date": 1522268405, "post_id": 49543468, "comment_id": 86094533, "body": "Try <code>itertools.product</code> and/or <code>zip</code> with extension."}, {"owner": {"reputation": 157, "user_id": 9420826, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/33ea51bf7e427bc99812cc069b166ac1?s=128&d=identicon&r=PG&f=1", "display_name": "Karma", "link": "https://stackoverflow.com/users/9420826/karma"}, "reply_to_user": {"reputation": 6208, "user_id": 4042267, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b869ca5adc52b16ef56ab1fb6ed5fe97?s=128&d=identicon&r=PG", "display_name": "Graipher", "link": "https://stackoverflow.com/users/4042267/graipher"}, "edited": false, "score": 0, "creation_date": 1522268615, "post_id": 49543468, "comment_id": 86094652, "body": "@Graipher, if I remove <code>tuple</code>, it returned <code>(&#39;1&#39;, array([&#39;a&#39;, &#39;b&#39;,        &#39;c&#39;, &#39;d&#39;, &#39;e&#39;, &#39;f&#39;],       dtype=object))</code>"}, {"owner": {"reputation": 6208, "user_id": 4042267, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b869ca5adc52b16ef56ab1fb6ed5fe97?s=128&d=identicon&r=PG", "display_name": "Graipher", "link": "https://stackoverflow.com/users/4042267/graipher"}, "edited": false, "score": 0, "creation_date": 1522268709, "post_id": 49543468, "comment_id": 86094708, "body": "Yes (as expected). It was meant to show why you get a <code>TypeError</code> with that approach (<code>tuple</code> takes an iterable and returns a tuple, it does not take the elements of the tuple)."}], "answers": [{"comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1522269189, "post_id": 49543530, "comment_id": 86094988, "body": "and it doesn&#39;t create extra lists. Everything is done with iterables. Welcome back Moinuddin."}], "tags": [], "owner": {"reputation": 39529, "user_id": 2063361, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/jB77z.jpg?s=128&g=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/2063361/anonymous"}, "is_accepted": true, "score": 6, "last_activity_date": 1522270067, "last_edit_date": 1522270067, "creation_date": 1522268575, "answer_id": 49543530, "question_id": 49543468, "link": "https://stackoverflow.com/questions/49543468/convert-list-to-list-of-tuples-with-repeated-value-of-item-in-each-tuple/49543530#49543530", "title": "Convert list to list of tuples with repeated value of item in each tuple", "body": "<p>You may use <a href=\"https://docs.python.org/3/library/functions.html#zip\" rel=\"nofollow noreferrer\"><strong><code>zip</code></strong></a> with <a href=\"https://docs.python.org/3/library/itertools.html#itertools.repeat\" rel=\"nofollow noreferrer\"><strong><code>itertools.repeat</code></strong></a> to achieve this as:</p>\n\n<pre><code>&gt;&gt;&gt; from itertools import repeat\n&gt;&gt;&gt; num = ['1', '2']\n&gt;&gt;&gt; letter1 = ['a', 'b', 'c', 'd', 'e', 'f']\n\n&gt;&gt;&gt; tuple1 = list(zip(repeat(num[0]), letter1))\n&gt;&gt;&gt; tuple1\n[('1', 'a'), ('1', 'b'), ('1', 'c'), ('1', 'd'), ('1', 'e'), ('1', 'f')]\n</code></pre>\n\n<p><strong><em>PS:</strong> Note the commas <code>,</code> between elements in the above lists. Strings separated without comma are treated as a single string.</em> </p>\n\n<hr>\n\n<p>Inspired from the above answer, here's the <em>list comprehension</em> version of the solution to get <code>tuple1</code> and <code>tuple2</code> in a single go:</p>\n\n<pre><code>letter2 = ['aa', 'bb', 'cc', 'dd', 'ee', 'ff'] # rest of the variables same as the above solution\n\ntuple1, tuple2 = [list(zip(repeat(a), b)) for a, b in zip(num, (letter1, letter2))]\n</code></pre>\n\n<p>where these variables will hold the below lists as values:</p>\n\n<pre><code>&gt;&gt;&gt; tuple1\n[('1', 'a'), ('1', 'b'), ('1', 'c'), ('1', 'd'), ('1', 'e'), ('1', 'f')]\n&gt;&gt;&gt; tuple2\n[('2', 'aa'), ('2', 'bb'), ('2', 'cc'), ('2', 'dd'), ('2', 'ee'), ('2', 'ff')]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1522269030, "post_id": 49543592, "comment_id": 86094901, "body": "that&#39;s why you should always test your answers :)"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1522269064, "post_id": 49543592, "comment_id": 86094923, "body": "<code>[next(num)]*len(i)</code> works but I think something better can be done with <code>itertools.repeat</code>: <code>itertools.repeat(next(num),i)</code>: it avoids creating an extra list."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1522269151, "post_id": 49543592, "comment_id": 86094972, "body": "and you can even forget about limiting with <code>i</code> since <code>zip</code> stops on the shortest iterable."}, {"owner": {"reputation": 56804, "user_id": 7326738, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VgOrW.jpg?s=128&g=1", "display_name": "Ajax1234", "link": "https://stackoverflow.com/users/7326738/ajax1234"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1522269290, "post_id": 49543592, "comment_id": 86095040, "body": "@Jean-Fran&#231;oisFabre agreed; however, MoinuddinQuadri&#39;s answer already offers a great solution with <code>itertools.repeat</code>, and I thought that plain <code>zip</code> with <code>next</code> would demonstrate a possibility not relying on builtin libraries"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1522269316, "post_id": 49543592, "comment_id": 86095051, "body": "you&#39;re right, sometimes it&#39;s better to get back to basics."}], "tags": [], "owner": {"reputation": 56804, "user_id": 7326738, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VgOrW.jpg?s=128&g=1", "display_name": "Ajax1234", "link": "https://stackoverflow.com/users/7326738/ajax1234"}, "is_accepted": false, "score": 2, "last_activity_date": 1522269486, "last_edit_date": 1522269486, "creation_date": 1522268802, "answer_id": 49543592, "question_id": 49543468, "link": "https://stackoverflow.com/questions/49543468/convert-list-to-list-of-tuples-with-repeated-value-of-item-in-each-tuple/49543592#49543592", "title": "Convert list to list of tuples with repeated value of item in each tuple", "body": "<p>You can use <code>iter</code> and <code>next</code>:</p>\n\n<pre><code>num = ['1', '2']\nnum = iter(num)\nletter1 = ['a', 'b', 'c', 'd', 'e', 'f']\nletter2 = ['aa', 'bb', 'cc', 'dd', 'ee', 'ff']\ntuple1, tuple2 = [list(zip(i, [next(num)]*len(i))) for i in [letter1, letter2]]\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>[('a', '1'), ('b', '1'), ('c', '1'), ('d', '1'), ('e', '1'), ('f', '1')]\n[('aa', '2'), ('bb', '2'), ('cc', '2'), ('dd', '2'), ('ee', '2'), ('ff', '2')]\n</code></pre>\n\n<p>Without <code>iter</code>:</p>\n\n<pre><code>tuple1, tuple2 = [[(i, h) for i in c] for c, h in zip([letter1, letter2], ['1', '2'])]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 157, "user_id": 9420826, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/33ea51bf7e427bc99812cc069b166ac1?s=128&d=identicon&r=PG&f=1", "display_name": "Karma", "link": "https://stackoverflow.com/users/9420826/karma"}, "edited": false, "score": 0, "creation_date": 1522269781, "post_id": 49543688, "comment_id": 86095321, "body": "I should take note on your method as well. Thanks!"}], "tags": [], "owner": {"reputation": 4890, "user_id": 6866811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8b433dba8feffa45967ca5679a5f6ee?s=128&d=identicon&r=PG&f=1", "display_name": "thesilkworm", "link": "https://stackoverflow.com/users/6866811/thesilkworm"}, "is_accepted": false, "score": 1, "last_activity_date": 1522269242, "creation_date": 1522269242, "answer_id": 49543688, "question_id": 49543468, "link": "https://stackoverflow.com/questions/49543468/convert-list-to-list-of-tuples-with-repeated-value-of-item-in-each-tuple/49543688#49543688", "title": "Convert list to list of tuples with repeated value of item in each tuple", "body": "<p>Some good answers already but I'll share an alternative using a list comprehension. It looks like a bit more code, but will work for larger lengths of <code>nums</code> and <code>lists</code> (as long as they are the same length as each other still):</p>\n\n<pre><code>letter1 = ['a', 'b', 'c', 'd', 'e', 'f']\nletter2 = ['aa', 'bb', 'cc', 'dd', 'ee', 'ff']\nnums = [1, 2]\n\nlists = [letter1, letter2]\ntuples = [[(i, x) for x in l] for i, l in zip(nums, lists)]\n\ntuple1, tuple2 = tuples\n</code></pre>\n\n<p>Results:</p>\n\n<pre><code>In [1]: tuple1\nOut[1]: [(1, 'a'), (1, 'b'), (1, 'c'), (1, 'd'), (1, 'e'), (1, 'f')]\n\nIn [2]: tuple2\nOut[2]: [(2, 'aa'), (2, 'bb'), (2, 'cc'), (2, 'dd'), (2, 'ee'), (2, 'ff')]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 157, "user_id": 9420826, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/33ea51bf7e427bc99812cc069b166ac1?s=128&d=identicon&r=PG&f=1", "display_name": "Karma", "link": "https://stackoverflow.com/users/9420826/karma"}, "edited": false, "score": 0, "creation_date": 1522427514, "post_id": 49572317, "comment_id": 86163498, "body": "Ohh I see what you&#39;re doing here. I can use <code>zip</code> and <code>len</code> to define the numbers of elements in a tuple too. Great!"}], "tags": [], "owner": {"reputation": 8912, "user_id": 5904928, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/jwFz9.png?s=128&g=1", "display_name": "Aaditya Ura", "link": "https://stackoverflow.com/users/5904928/aaditya-ura"}, "is_accepted": false, "score": 1, "last_activity_date": 1522404008, "creation_date": 1522404008, "answer_id": 49572317, "question_id": 49543468, "link": "https://stackoverflow.com/questions/49543468/convert-list-to-list-of-tuples-with-repeated-value-of-item-in-each-tuple/49572317#49572317", "title": "Convert list to list of tuples with repeated value of item in each tuple", "body": "<p>Already there are good answers, I just want to give you hint you can tweak your logic a little </p>\n\n<pre><code>num = ['1','2']\nletter1 = ['a','b' ,'c', 'd', 'e', 'f']\nletter2 = ['aa' ,'bb', 'cc', 'dd' ,'ee' ,'ff']\ntuple1 = tuple(zip(*[[int(num[0])]*len(letter1),letter1]))\ntuple2 = tuple(zip(*[[int(num[1])]*len(letter2), letter2]))\n\nprint(tuple1)\nprint(tuple2)\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>((1, 'a'), (1, 'b'), (1, 'c'), (1, 'd'), (1, 'e'), (1, 'f'))\n((2, 'aa'), (2, 'bb'), (2, 'cc'), (2, 'dd'), (2, 'ee'), (2, 'ff'))\n</code></pre>\n"}], "owner": {"reputation": 157, "user_id": 9420826, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/33ea51bf7e427bc99812cc069b166ac1?s=128&d=identicon&r=PG&f=1", "display_name": "Karma", "link": "https://stackoverflow.com/users/9420826/karma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 400, "favorite_count": 0, "accepted_answer_id": 49543530, "answer_count": 4, "score": 2, "last_activity_date": 1522404008, "creation_date": 1522268323, "last_edit_date": 1522269009, "question_id": 49543468, "link": "https://stackoverflow.com/questions/49543468/convert-list-to-list-of-tuples-with-repeated-value-of-item-in-each-tuple", "title": "Convert list to list of tuples with repeated value of item in each tuple", "body": "<p>I have a few N-dimensional arrays as below. How can I convert these arrays into tuples?</p>\n\n<pre><code>num = ['1' '2']\nletter1 = ['a' 'b' 'c' 'd' 'e' 'f']\nletter2 = ['aa' 'bb' 'cc' 'dd' 'ee' 'ff']\n</code></pre>\n\n<p>The result I want is:</p>\n\n<pre><code>tuple1 = [(1,a),(1,b),(1,c),(1,d),(1,e),(1,f)]\ntuple2 = [(2,aa),(2,bb),(2,cc),(2,dd),(2,ee),(2,ff)]\n</code></pre>\n\n<p>I have</p>\n\n<pre><code>tuple1 = tuple(num[0], letter1)\ntuple2 = tuple(num[1], letter2)\n</code></pre>\n\n<p>But I got an error of <code>TypeError: tuple() takes at most 1 argument (2 given)</code></p>\n\n<p>What would be your approach? Any methods would be appreciated. Thanks.</p>\n"}, {"tags": ["python", "xml", "csv"], "comments": [{"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1522269144, "post_id": 49543465, "comment_id": 86094968, "body": "Can <i>you</i>? Probably, since you asked this, &quot;no&quot;. Can anyone else? Of course. Python is very well suited to this kind of tasks."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8041954, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9f4df4e3e147ce85c8e33c016fe3a84?s=128&d=identicon&r=PG&f=1", "display_name": "Cannedit", "link": "https://stackoverflow.com/users/8041954/cannedit"}, "edited": false, "score": 0, "creation_date": 1522343704, "post_id": 49543892, "comment_id": 86131500, "body": "this is great, works like a charm, thank you so much!"}], "tags": [], "owner": {"reputation": 23944, "user_id": 1305969, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wlo8z.png?s=128&g=1", "display_name": "zx485", "link": "https://stackoverflow.com/users/1305969/zx485"}, "is_accepted": false, "score": 0, "last_activity_date": 1522271546, "last_edit_date": 1522271546, "creation_date": 1522270040, "answer_id": 49543892, "question_id": 49543465, "link": "https://stackoverflow.com/questions/49543465/can-i-use-python-to-edit-xml-file-based-on-csv-file-values/49543892#49543892", "title": "can I use python to edit xml file based on csv file values?", "body": "<p>The smartest way to handle an XML to XML transformation is using XSLT which was designed for <em>this exact purpose</em>.</p>\n\n<p>So to transform your source XML to your desired destination XML you can use this XSLT-1.0 script (named <code>trans.xslt</code>):</p>\n\n<pre><code>&lt;xsl:stylesheet version =\"1.0\" xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\"&gt; \n    &lt;xsl:output method=\"xml\" encoding=\"UTF-8\"/&gt;\n    &lt;xsl:variable name=\"additional\" select=\"document('a_link.xml')/LinkMapping\" /&gt;   &lt;!-- name of helper XML file --&gt;\n\n    &lt;!-- identity template --&gt;\n    &lt;xsl:template match=\"node()|@*\" &gt; \n        &lt;xsl:copy&gt;\n            &lt;xsl:apply-templates select=\"node()|@*\" /&gt;\n        &lt;/xsl:copy&gt;\n    &lt;/xsl:template&gt; \n\n    &lt;!-- item transform template --&gt;\n    &lt;xsl:template match=\"item\" &gt; \n        &lt;xsl:copy&gt;\n            &lt;xsl:copy-of select=\"node()|@*\" /&gt;\n            &lt;xsl:if test=\"$additional/map[@id=current()/unitd]\"&gt;\n                &lt;link&gt;\n                    &lt;xsl:value-of select=\"$additional/map[@id=current()/unitd]/text()\" /&gt;\n                &lt;/link&gt;\n            &lt;/xsl:if&gt;\n        &lt;/xsl:copy&gt;\n    &lt;/xsl:template&gt; \n\n&lt;/xsl:stylesheet&gt;\n</code></pre>\n\n<p>This template requires an additional XML file containing the mapping of the <code>link</code>s from the CSV file called <code>a_link.xml</code>. Your example of a CSV file does not show any relation like this, but transforming the CSV to something like the below format should be no problem.</p>\n\n<pre><code>&lt;LinkMapping&gt;\n    &lt;map id=\"0001\"&gt;link to extra info on item 1&lt;/map&gt;\n    &lt;map id=\"0002\"&gt;link to extra info on item 2&lt;/map&gt;\n    &lt;map id=\"0003\"&gt;link to extra info on item 3&lt;/map&gt;\n    &lt;map id=\"0005\"&gt;link to extra info on item 5&lt;/map&gt;\n    &lt;map id=\"0007\"&gt;link to extra info on item 7&lt;/map&gt;\n&lt;/LinkMapping&gt;\n</code></pre>\n\n<p><em>The output of applying the above XSLT with the XML helper file is as desired.</em></p>\n\n<hr>\n\n<p>So to use this with Python, you can refer <a href=\"https://stackoverflow.com/a/16699042/1305969\">to this SO answer</a> which explains how to transform an XML file with XSLT.</p>\n\n<p>Assuming that your XML file is named <code>input.xml</code> the code could look like this:</p>\n\n<pre><code>import lxml.etree as ET\n\ndom = ET.parse(\"input.xml\")\nxslt = ET.parse(\"trans.xslt\")\ntransform = ET.XSLT(xslt)\nnewdom = transform(dom)\nprint(ET.tostring(newdom, pretty_print=True))\n</code></pre>\n\n<p>Now you should have gotten your desired result.</p>\n"}], "owner": {"reputation": 1, "user_id": 8041954, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9f4df4e3e147ce85c8e33c016fe3a84?s=128&d=identicon&r=PG&f=1", "display_name": "Cannedit", "link": "https://stackoverflow.com/users/8041954/cannedit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 75, "favorite_count": 1, "answer_count": 1, "score": -1, "last_activity_date": 1522271546, "creation_date": 1522268320, "last_edit_date": 1522268641, "question_id": 49543465, "link": "https://stackoverflow.com/questions/49543465/can-i-use-python-to-edit-xml-file-based-on-csv-file-values", "title": "can I use python to edit xml file based on csv file values?", "body": "<p>I have a CSV file with a list of numbers with gaps in them, like:</p>\n\n<pre><code>0001\n0002\n0003\n0005\n0007\netc.\n</code></pre>\n\n<p>And I have an XML file with nodes with identifiers with a list of numbers without gaps, like:</p>\n\n<pre><code>&lt;?xml version='1.0' encoding='utf-8'?&gt;\n&lt;root&gt;\n    &lt;item&gt;\n        &lt;unitd&gt;0001&lt;/unitd&gt;\n        &lt;unittitle&gt;description of item 1&lt;/unittitle&gt;\n    &lt;/item&gt;\n    &lt;item&gt;\n        &lt;unitd&gt;0002&lt;/unitd&gt;\n        &lt;unittitle&gt;description of item 2&lt;/unittitle&gt;\n    &lt;/item&gt;\n    &lt;item&gt;\n        &lt;unitd&gt;0003&lt;/unitd&gt;\n        &lt;unittitle&gt;description of item 3&lt;/unittitle&gt;\n    &lt;/item&gt;\n    &lt;item&gt;\n        &lt;unitd&gt;0004&lt;/unitd&gt;\n        &lt;unittitle&gt;description of item 4&lt;/unittitle&gt;\n    &lt;/item&gt;\n    &lt;item&gt;\n        &lt;unitd&gt;0005&lt;/unitd&gt;\n        &lt;unittitle&gt;description of item 5&lt;/unittitle&gt;\n    &lt;/item&gt;\n    &lt;item&gt;\n        &lt;unitd&gt;0006&lt;/unitd&gt;\n        &lt;unittitle&gt;description of item 6&lt;/unittitle&gt;\n    &lt;/item&gt;\n    &lt;item&gt;\n        &lt;unitd&gt;0007&lt;/unitd&gt;\n        &lt;unittitle&gt;description of item 7&lt;/unittitle&gt;\n    &lt;/item&gt;\n&lt;/root&gt;      &lt;!-- added by edit --&gt;\n</code></pre>\n\n<p>I want to add an extra element to the items of the XML file that have identifiers that can be found in the CSV file, like this:</p>\n\n<pre><code>&lt;root&gt;\n&lt;item&gt;\n    &lt;unitd&gt;0001&lt;/unitd&gt;\n    &lt;unittitle&gt;description of item 1&lt;/unittitle&gt;\n    &lt;link&gt;link to extra info on item 1&lt;/link&gt;\n&lt;/item&gt;\n&lt;item&gt;\n    &lt;unitd&gt;0002&lt;/unitd&gt;\n    &lt;unittitle&gt;description of item 2&lt;/unittitle&gt;\n    &lt;link&gt;link to extra info on item 2&lt;/link&gt;\n&lt;/item&gt;\n&lt;item&gt;\n    &lt;unitd&gt;0003&lt;/unitd&gt;\n    &lt;unittitle&gt;description of item 3&lt;/unittitle&gt;\n    &lt;link&gt;link to extra info on item 3&lt;/link&gt;\n&lt;/item&gt;\n&lt;item&gt;\n    &lt;unitd&gt;0004&lt;/unitd&gt;\n    &lt;unittitle&gt;description of item 4&lt;/unittitle&gt;\n&lt;/item&gt;\n&lt;item&gt;\n    &lt;unitd&gt;0005&lt;/unitd&gt;\n    &lt;unittitle&gt;description of item 5&lt;/unittitle&gt;\n    &lt;link&gt;link to extra info on item 5&lt;/link&gt;\n&lt;/item&gt;\n&lt;item&gt;\n    &lt;unitd&gt;0006&lt;/unitd&gt;\n    &lt;unittitle&gt;description of item 6&lt;/unittitle&gt;\n&lt;/item&gt;\n&lt;item&gt;\n    &lt;unitd&gt;0007&lt;/unitd&gt;\n    &lt;unittitle&gt;description of item 7&lt;/unittitle&gt;\n    &lt;link&gt;link to extra info on item 7&lt;/link&gt;\n&lt;/item&gt;\n</code></pre>\n\n<p></p>\n\n<p>Can I do this using python and how or is there a smarter way to take care of this?</p>\n"}]