[{"tags": ["python", "google-app-engine", "google-cloud-platform", "ftp", "ftps"], "comments": [{"owner": {"reputation": 43265, "user_id": 8016720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bXsod.png?s=128&g=1", "display_name": "John Hanley", "link": "https://stackoverflow.com/users/8016720/john-hanley"}, "edited": false, "score": 1, "creation_date": 1572481670, "post_id": 58635203, "comment_id": 103577554, "body": "Where have you defined a service that listens for connections on port 443? Your service is on port 2121. Also, I do not believe that FTP over port 443 will work. The Google Front End (GFE) expects the HTTP(S) protocol on port 443. The last time I checked App Engine Flexible (03/2019) did not support FTP at all. <code>forwared_ports</code> only works when you use the target instance&#39;s IP address, you cannot use ...appspot.com domain names."}], "answers": [{"tags": [], "owner": {"reputation": 15554, "user_id": 328036, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8db101b3a812b0464c53e5409c12ea94?s=128&d=identicon&r=PG", "display_name": "Dustin Ingram", "link": "https://stackoverflow.com/users/328036/dustin-ingram"}, "is_accepted": false, "score": 0, "last_activity_date": 1572558610, "creation_date": 1572558610, "answer_id": 58651582, "question_id": 58635203, "link": "https://stackoverflow.com/questions/58635203/ftp-over-app-engine-with-python-allow-connection-but-timeout-response/58651582#58651582", "title": "FTP over app engine With Python allow connection but timeout response", "body": "<p>You're not forwarding port 443 to your app:</p>\n\n<pre><code>network:\n  forwarded_ports:\n    - 443/tcp\n</code></pre>\n\n<p>In addition, incoming traffic from outside your network is not allowed through the <a href=\"https://cloud.google.com/compute/docs/networks-and-firewalls#firewalls\" rel=\"nofollow noreferrer\">Google Cloud Platform firewalls</a>. After you have specified port forwarding in your <code>app.yaml</code> file, you must add a firewall rule that allows traffic from the ports you want opened.</p>\n\n<p>You can specify a firewall rule in the <a href=\"https://console.cloud.google.com/networking/firewalls\" rel=\"nofollow noreferrer\">Networking Firewall Rules</a> page in the Google Cloud Platform Console</p>\n"}], "owner": {"reputation": 1963, "user_id": 5248230, "user_type": "registered", "accept_rate": 76, "profile_image": "https://lh6.googleusercontent.com/-ESLiU06kMiw/AAAAAAAAAAI/AAAAAAAAABQ/Rfp6VItfx48/photo.jpg?sz=128", "display_name": "Daniel ORTIZ", "link": "https://stackoverflow.com/users/5248230/daniel-ortiz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 105, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1572558610, "creation_date": 1572479984, "question_id": 58635203, "link": "https://stackoverflow.com/questions/58635203/ftp-over-app-engine-with-python-allow-connection-but-timeout-response", "title": "FTP over app engine With Python allow connection but timeout response", "body": "<p>Hi im try to test my app ftp on python over app engine.</p>\n\n<p>In local works with ftp but when i try to connect:</p>\n\n<p><a href=\"ftp://rebus-v5-prod.appspot.com:443\" rel=\"nofollow noreferrer\">ftp://rebus-v5-prod.appspot.com:443</a>\nor \nftps://rebus-v5-prod.appspot.com:443</p>\n\n<p>Shows me:</p>\n\n<blockquote>\n  <p>Status:       Connection established, waiting for welcome message...\n  Error:            Connection closed by server</p>\n</blockquote>\n\n<p>My code:</p>\n\n<pre><code>import os\nfrom backend import upload_jobs\nfrom firebase.firebase import Firebase\n\nif not bool(os.getenv('CLOUD',False)):\n    from dotenv import load_dotenv\n    load_dotenv(verbose=True)\n    print('LOAD ENV',os.getenv('VERSION'))\nfrom pyftpdlib.authorizers import DummyAuthorizer\nfrom pyftpdlib.handlers import FTPHandler\nfrom pyftpdlib.servers import FTPServer\n\nFirebase()\nclass HandleFTP(FTPHandler):\n    def on_file_received(self, file):\n        upload_jobs(file)\n    def on_connect(self):\n        print(self.remote_ip)\n\nclass Autorizer(DummyAuthorizer):\n    def validate_authentication(self, username, password, handler):\n        print(username,password,handler)\n\ndef main():\n    # Instantiate a dummy authorizer for managing 'virtual' users\n    authorizer = Autorizer()\n\n    # Define a new user having full r/w permissions and a read-only\n    # anonymous user\n    authorizer.add_user('user', '12345', './files', perm='elradfmwMT')\n    #authorizer.add_anonymous(os.getcwd())\n\n    # Instantiate FTP handler class\n    handler = HandleFTP\n    handler.authorizer = authorizer\n    # Define a customized banner (string returned when client connects)\n    handler.banner = \"pyftpdlib based ftpd ready.\"\n    # Specify a masquerade address and the range of ports to use for\n    # passive connections.  Decomment in case you're behind a NAT.\n    # handler.masquerade_address = '151.25.42.11'\n    handler.passive_ports = range(60000, 65535)\n\n    # Instantiate FTP server class and listen on 0.0.0.0:2121\n    address = ('', int(os.environ.get('PORT', 2121)))\n    server = FTPServer(address, handler)\n\n    # set a limit for connections\n    server.max_cons = 256\n    server.max_cons_per_ip = 5\n\n    # start ftp server\n    server.serve_forever()\n    server.handle_write()\n\n\nif __name__ == '__main__':\n    main()\n</code></pre>\n\n<p>App engine YML</p>\n\n<pre><code>runtime: python\nenv: flex\nentrypoint: python app.py\n\nservice: default\n\nruntime_config:\n  python_version: 3\n\nautomatic_scaling:\n  min_num_instances: 1\n  max_num_instances: 15\n  cool_down_period_sec: 180\n  cpu_utilization:\n    target_utilization: 0.6\n\nresources:\n  cpu: 1\n  memory_gb: 0.5\n  disk_size_gb: 10\n\nnetwork:\n  forwarded_ports:\n    - 2121/tcp\n</code></pre>\n"}, {"tags": ["python", "pandas", "numpy", "sampling"], "comments": [{"owner": {"reputation": 30153, "user_id": 12299000, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0pja9.png?s=128&g=1", "display_name": "kaya3", "link": "https://stackoverflow.com/users/12299000/kaya3"}, "edited": false, "score": 0, "creation_date": 1572480238, "post_id": 58635184, "comment_id": 103577253, "body": "Surely this depends on how large a sample you want? Do you want the sample to be as large as possible, or do you want it to be a fixed size? If your question is &quot;how large a sample <i>should</i> I want&quot;, then there is no universal answer."}], "answers": [{"tags": [], "owner": {"reputation": 180853, "user_id": 424499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc2071afd499daef001e75e14d7f9cce?s=128&d=identicon&r=PG", "display_name": "Raymond Hettinger", "link": "https://stackoverflow.com/users/424499/raymond-hettinger"}, "is_accepted": false, "score": 0, "last_activity_date": 1572480909, "last_edit_date": 1572480909, "creation_date": 1572480584, "answer_id": 58635277, "question_id": 58635184, "link": "https://stackoverflow.com/questions/58635184/50-50-sampling-in-python/58635277#58635277", "title": "50/50 Sampling in python", "body": "<p>The general answer (not hard-wired to the 4/96 split) is to partition the data in two groups (the 0 group and the 1 group), and then sample as many as needed from each partition.  (The technique is called \"<a href=\"https://www.investopedia.com/ask/answers/032615/what-are-some-examples-stratified-random-sampling.asp\" rel=\"nofollow noreferrer\">stratified random sampling</a>\").</p>\n\n<pre><code># Partition based on the target variable\ngroup0 = [record for record in data if not record.target_variable]\ngroup1 = [record for record in data if record.target_variable]\n\n# Pick as many as needed from each partition\nsubgroup0 = random.sample(group0, k=4) \nsubgroup1 = random.sample(group1, k=4)\n\n# Combine and shuffle the results\ncombined = subgroup0 + subgroup1\nrandom.shuffle(combined)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 336, "user_id": 2391699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b9db9d706ac1a6d336fb533eefce743?s=128&d=identicon&r=PG", "display_name": "Noleli", "link": "https://stackoverflow.com/users/2391699/noleli"}, "is_accepted": true, "score": 0, "last_activity_date": 1572480699, "creation_date": 1572480699, "answer_id": 58635288, "question_id": 58635184, "link": "https://stackoverflow.com/questions/58635184/50-50-sampling-in-python/58635288#58635288", "title": "50/50 Sampling in python", "body": "<p>You can <code>groupby()</code> your binary variable, then sample from each group.</p>\n\n<p>Generate some random data:</p>\n\n<pre><code>&gt;&gt;&gt; df = pd.DataFrame([{'variable': ''.join(random.sample('abcdefghijklmnopqrstuvwxyz', 4)), 'outcome': (random.random() &gt; .94)} for i in range(100)])\n\n&gt;&gt;&gt; print(df)\n    outcome variable\n0     False     irlk\n1     False     ylmp\n2     True      przk\n3     False     xldf\n4     False     oxsp\n5     False     uytn\n6     False     ifmw\n7     True      lepa\n8     False     zfvm\n...\n99    False     qjek\n100   False     umtw\n</code></pre>\n\n<p>Sample as needed:</p>\n\n<pre><code>&gt;&gt;&gt; num_samples = 3\n&gt;&gt;&gt; df.groupby('outcome').apply(lambda x: x.sample(num_samples))\n            outcome variable\noutcome                     \nFalse   71    False     jdrp\n        98    False     eqrj\n        78    False     tnzl\nTrue    29     True     uvjr\n        36     True     tiwn\n        63     True     tabr\n</code></pre>\n"}], "owner": {"reputation": 91, "user_id": 12300352, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCF-4T5wr0l31gAuQEAZ9zMjTpt0opm5Cq7RIeQNQ=k-s128", "display_name": "lwu29", "link": "https://stackoverflow.com/users/12300352/lwu29"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 229, "favorite_count": 0, "closed_date": 1572521353, "accepted_answer_id": 58635288, "answer_count": 2, "score": -3, "last_activity_date": 1572653163, "creation_date": 1572479734, "last_edit_date": 1572653163, "question_id": 58635184, "link": "https://stackoverflow.com/questions/58635184/50-50-sampling-in-python", "closed_reason": "Opinion-based", "title": "50/50 Sampling in python", "body": "<p>I have a data set with a binary target variable that has a 4/96 percent split. I want to create a subset of the data with a 50/50 split. I would like to know the best way to do that in Python. Thanks!</p>\n"}, {"tags": ["python", "sockets"], "comments": [{"owner": {"reputation": 2039, "user_id": 2825403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d81c88311d9512d0e83bcdf806ba3a4?s=128&d=identicon&r=PG&f=1", "display_name": "pavel", "link": "https://stackoverflow.com/users/2825403/pavel"}, "edited": false, "score": 0, "creation_date": 1572480133, "post_id": 58635165, "comment_id": 103577227, "body": "Not sure if this will help, but <i>In the Internet Protocol Version 4, the address 0.0.0.0 is a non-routable meta-address used to designate an invalid, unknown or non-applicable target.</i> (from Wiki) I&#39;m not so familiar with ports and networking, but if you&#39;re testing locally, why aren&#39;t you using <code>127.0.0.1:5234</code>?"}, {"owner": {"reputation": 1, "user_id": 12300304, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Zo403PnRxX4/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd4Jgjeks33_qVMzfIe9BjyaiCoKQ/photo.jpg?sz=128", "display_name": "Alon Vizner", "link": "https://stackoverflow.com/users/12300304/alon-vizner"}, "reply_to_user": {"reputation": 2039, "user_id": 2825403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d81c88311d9512d0e83bcdf806ba3a4?s=128&d=identicon&r=PG&f=1", "display_name": "pavel", "link": "https://stackoverflow.com/users/2825403/pavel"}, "edited": false, "score": 0, "creation_date": 1572481963, "post_id": 58635165, "comment_id": 103577622, "body": "well, I did test locally, which worked, I&#39;m trying to figure out a way to test if it would work externally. I&#39;m also running the client from the same network but trying to connect externally, I&#39;m not sure about it but it just might be the problem."}, {"owner": {"reputation": 4401, "user_id": 858675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c51db176e8886a2afbc18edd2233c18b?s=128&d=identicon&r=PG", "display_name": "gelonida", "link": "https://stackoverflow.com/users/858675/gelonida"}, "reply_to_user": {"reputation": 2039, "user_id": 2825403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d81c88311d9512d0e83bcdf806ba3a4?s=128&d=identicon&r=PG&f=1", "display_name": "pavel", "link": "https://stackoverflow.com/users/2825403/pavel"}, "edited": false, "score": 0, "creation_date": 1572483295, "post_id": 58635165, "comment_id": 103577911, "body": "@pavel listening on &quot;0.0.0.0&quot; is a way to say you want to listen on <b>all</b> interfaces. so on localhost, but also on your ethernet, wifi, vpn adresses"}, {"owner": {"reputation": 4401, "user_id": 858675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c51db176e8886a2afbc18edd2233c18b?s=128&d=identicon&r=PG", "display_name": "gelonida", "link": "https://stackoverflow.com/users/858675/gelonida"}, "edited": false, "score": 0, "creation_date": 1572483414, "post_id": 58635165, "comment_id": 103577928, "body": "from the machine on which you try to run the client.  What happens if you type <code>telnet 81.218.131.123 5234</code>"}, {"owner": {"reputation": 1, "user_id": 12300304, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Zo403PnRxX4/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd4Jgjeks33_qVMzfIe9BjyaiCoKQ/photo.jpg?sz=128", "display_name": "Alon Vizner", "link": "https://stackoverflow.com/users/12300304/alon-vizner"}, "reply_to_user": {"reputation": 4401, "user_id": 858675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c51db176e8886a2afbc18edd2233c18b?s=128&d=identicon&r=PG", "display_name": "gelonida", "link": "https://stackoverflow.com/users/858675/gelonida"}, "edited": false, "score": 0, "creation_date": 1572485268, "post_id": 58635165, "comment_id": 103578287, "body": "@gelonida I get a connection failed, but when trying with 10.0.0.1:5234 it does work. and other incoming connections such as the check-port sites&#39; also work. seems the router has a problem forwarding to itself or something, it only does this properly locally, but I wanted to try this on a public network for testing"}], "owner": {"reputation": 1, "user_id": 12300304, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Zo403PnRxX4/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd4Jgjeks33_qVMzfIe9BjyaiCoKQ/photo.jpg?sz=128", "display_name": "Alon Vizner", "link": "https://stackoverflow.com/users/12300304/alon-vizner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 21, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1572485056, "creation_date": 1572479587, "last_edit_date": 1572485056, "question_id": 58635165, "link": "https://stackoverflow.com/questions/58635165/connection-refused-running-a-server-externally-although-working-locally", "title": "&quot;Connection Refused&quot; running a server externally , although working locally", "body": "<p>Trying to get into sockets and networking.\nI wrote some simple server and client scripts and ran them,\nwhich was working when connected locally and client-server communicated just fine, yet when my client script tries to connect to my_external_ip:open_port it gets a \"Connection Refused\" [WinError 10061]</p>\n\n<p>I've opened a port (5234 in this case) and checked it using those port-scanning sites, what the server seems to react to and even accept connections.</p>\n\n<p>Yet when I run my client script, it throws an exception, and the server doesn't seem to respond or even be aware of the connection attempt.</p>\n\n<p>I've shut down my firewall temporarily and made sure I'm listening on 0.0.0.0:5234 (which to my understanding should be what I'm doing).</p>\n\n<p>Am I missing something? doesn't make sense to me that the script runs locally, the server takes incoming external connections, yet this doesn't work.\nMaybe the problem is that the client's outbound connection attempt is somehow blocked?</p>\n\n<p>I cleaned up some unrelated code, but that's about it:</p>\n\n<p>SERVER:</p>\n\n<pre><code>s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\nserver = \"\"  #Also tried socket.gethostname() and 0.0.0.0\nport = 5234\ns.bind((server,port))\ns.listen()\nconnection, address = s.accept()\n</code></pre>\n\n<p>CLIENT:</p>\n\n<pre><code>def __init__(self):\n    self.client = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\n    self.server = my_public_ip\n    self.port = 5234\n    self.client.connect((self.server,self.port)\n</code></pre>\n"}, {"tags": ["python", "opencv", "image-processing", "scikit-image"], "comments": [{"owner": {"reputation": 25800, "user_id": 11162165, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t5kgh.png?s=128&g=1", "display_name": "nathancy", "link": "https://stackoverflow.com/users/11162165/nathancy"}, "edited": false, "score": 0, "creation_date": 1572481281, "post_id": 58635150, "comment_id": 103577478, "body": "Could you add your input image?"}, {"owner": {"reputation": 3747, "user_id": 224254, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3574772b96b3708ab652c69914bbcce0?s=128&d=identicon&r=PG", "display_name": "Juan", "link": "https://stackoverflow.com/users/224254/juan"}, "edited": false, "score": 0, "creation_date": 1572482371, "post_id": 58635150, "comment_id": 103577698, "body": "&quot;The result that I want to obtain is the only out contour of the image&quot; Could you clarify this sentence? I&#39;m still not sure exactly what you&#39;re after..."}, {"owner": {"reputation": 19, "user_id": 5084263, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-B6XzUHkkWNA/AAAAAAAAAAI/AAAAAAAAAUQ/tVizE-DhgHQ/photo.jpg?sz=128", "display_name": "Mameli Marco", "link": "https://stackoverflow.com/users/5084263/mameli-marco"}, "edited": false, "score": 0, "creation_date": 1572502128, "post_id": 58635150, "comment_id": 103581647, "body": "I can&#39;t upload the image because contain sensible data. You can find one example image on google or the image in this link &quot;<a href=\"https://milano.repubblica.it/cronaca/2014/07/03/foto/un_volto_e_tanti_nomi_nei_guai_il_re_delle_false_identit-90612174/1/#1\" rel=\"nofollow noreferrer\">milano.repubblica.it/cronaca/2014/07/03/foto/&hellip;</a>&quot;. So as you can see the contours that I want to find is the external contours of document and the contours of the two sections"}, {"owner": {"reputation": 18948, "user_id": 3051961, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/b81cbd6deac24f756452266ff2e8d3ce?s=128&d=identicon&r=PG", "display_name": "ZdaR", "link": "https://stackoverflow.com/users/3051961/zdar"}, "edited": false, "score": 0, "creation_date": 1572509188, "post_id": 58635150, "comment_id": 103583995, "body": "Do you want to get the contour for upper rectangular shaped ID card ?"}, {"owner": {"reputation": 19, "user_id": 5084263, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-B6XzUHkkWNA/AAAAAAAAAAI/AAAAAAAAAUQ/tVizE-DhgHQ/photo.jpg?sz=128", "display_name": "Mameli Marco", "link": "https://stackoverflow.com/users/5084263/mameli-marco"}, "edited": false, "score": 0, "creation_date": 1572510708, "post_id": 58635150, "comment_id": 103584595, "body": "I have to obtain the the entire rectangular outer contour of the ID card and the two rectangular inside border of the two section"}], "owner": {"reputation": 19, "user_id": 5084263, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-B6XzUHkkWNA/AAAAAAAAAAI/AAAAAAAAAUQ/tVizE-DhgHQ/photo.jpg?sz=128", "display_name": "Mameli Marco", "link": "https://stackoverflow.com/users/5084263/mameli-marco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1030, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1572479462, "creation_date": 1572479462, "question_id": 58635150, "link": "https://stackoverflow.com/questions/58635150/python-scikit-image-find-contours-return-the-contours-all-in-the-first-location", "title": "Python Scikit Image find contours return the contours all in the first location of the list", "body": "<p>I'm using scikit-image for computer vision.\nI will use  find contours to obtain the contours of the grayscale image input but the list returned contain the contours in the image all in the first location. \nThe result that I want to obtain is the only out contour of the image, for this reason I try to separate the contours with a for cycles but it requires very long time and the result is not good. Can anyone help me?\nThe code is reported below:</p>\n\n<pre><code>import numpy as np\nfrom skimage.io import imread\nfrom skimage.measure import moments, moments_hu, find_contours, approximate_polygon\nfrom skimage.feature import canny\nfrom matplotlib import pyplot as plt\n#%% Opening image section\nreference_image = imread('referenceImage.jpg', as_gray= True)\nreference_contours = find_contours(reference_image, 0.8, fully_connected='high')\nfirst = True\nadded = False\nreference_contours_list = []\nfor contours in reference_contours:\n    for con in contours:\n        if first:\n            first = False\n            reference_contours_list.append(np.array(np.array([con])))\n        else:\n            for index, past_con in enumerate(reference_contours_list):\n                for past_c in past_con:\n                    if con[0] in range(int(round(past_c[0])) - 1, int(round(past_c[0])) + 2):\n                        reference_contours_list[index] = np.append(reference_contours_list[index], np.array(np.array([con])), axis=0)\n</code></pre>\n"}, {"tags": ["python", "tensorflow", "gpu"], "comments": [{"owner": {"reputation": 470, "user_id": 8195695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26d4e311473332f98cbe46f698974453?s=128&d=identicon&r=PG&f=1", "display_name": "Tom C", "link": "https://stackoverflow.com/users/8195695/tom-c"}, "edited": false, "score": 2, "creation_date": 1572479916, "post_id": 58635145, "comment_id": 103577178, "body": "try: <code>pip install tensorflow-gpu</code>, and make sure you have the CUDA_VISIBLE_DEVICES environment variable set correctly. If those two don&#39;t work, I don&#39;t know what to do without more information."}, {"owner": {"reputation": 368, "user_id": 11861082, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-5ZYmOzBAAWc/AAAAAAAAAAI/AAAAAAAAAbc/7N4KXGbzNzQ/photo.jpg?sz=128", "display_name": "Albert", "link": "https://stackoverflow.com/users/11861082/albert"}, "reply_to_user": {"reputation": 470, "user_id": 8195695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26d4e311473332f98cbe46f698974453?s=128&d=identicon&r=PG&f=1", "display_name": "Tom C", "link": "https://stackoverflow.com/users/8195695/tom-c"}, "edited": false, "score": 0, "creation_date": 1572480765, "post_id": 58635145, "comment_id": 103577380, "body": "@TomC Thanks. Then tensorflow-gpu has been already installed. Can you please let me know how I can make sure CUDA_VISIBLE_DEVICES environment variable has been set correctly?"}, {"owner": {"reputation": 470, "user_id": 8195695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26d4e311473332f98cbe46f698974453?s=128&d=identicon&r=PG&f=1", "display_name": "Tom C", "link": "https://stackoverflow.com/users/8195695/tom-c"}, "edited": false, "score": 0, "creation_date": 1572481580, "post_id": 58635145, "comment_id": 103577534, "body": "try <code>import os; os.environ[&#39;CUDA_VISIBLE_DEVICES&#39;] = &quot;&quot; </code> at the top of your python script. Make sure tensorflow can see your GPU by doing <code>import tensorflow as tf; tf.test.is_gpu_available()</code>."}, {"owner": {"reputation": 14244, "user_id": 10133797, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DLiLn.png?s=128&g=1", "display_name": "OverLordGoldDragon", "link": "https://stackoverflow.com/users/10133797/overlordgolddragon"}, "edited": false, "score": 1, "creation_date": 1572482582, "post_id": 58635145, "comment_id": 103577748, "body": "Are you willing to install it the hard way (build from source)? It&#39;s how I did it - works as intended. The official guide is a bit off, but I recall my exact steps. Also, if you use Anaconda, install via <code>conda</code>, <i>not</i> <code>pip</code>. Lastly, some further info would help: (1) IDE (Visual Studio, Spyder, ...); (2) package manager (pip, Anaconda, ...); (3) GPU; (4) Python version (3.x); (5) which version of TF do you plan on using?"}, {"owner": {"reputation": 2086, "user_id": 10543528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a3a9d1ea239d645f62babcbb003c5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/10543528/michael"}, "edited": false, "score": 0, "creation_date": 1572484760, "post_id": 58635145, "comment_id": 103578170, "body": "Seconding to use conda instead of pip, if you&#39;re using a conda environment. Also check to make sure that you have an up-to-date driver installed. If you run <code>nvidia-smi</code>, what happens?"}], "owner": {"reputation": 368, "user_id": 11861082, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-5ZYmOzBAAWc/AAAAAAAAAAI/AAAAAAAAAbc/7N4KXGbzNzQ/photo.jpg?sz=128", "display_name": "Albert", "link": "https://stackoverflow.com/users/11861082/albert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1695, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1572486747, "creation_date": 1572479429, "last_edit_date": 1572486747, "question_id": 58635145, "link": "https://stackoverflow.com/questions/58635145/cuda-is-installed-but-gpu-is-not-being-used", "title": "CUDA is installed but GPU is not being used", "body": "<p>I have python 3. I have installed CUDA 10, Tensorflow-gpu, and Keras. My code still uses CPU. The error:</p>\n\n<pre><code>2019-10-30 16:20:08.873984: I tensorflow/core/platform/cpu_feature_guard.cc:142] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 AVX512F FMA\n2019-10-30 16:20:08.885799: I tensorflow/stream_executor/platform/default/dso_loader.cc:42] Successfully opened dynamic library libcuda.so.1\n2019-10-30 16:20:08.889181: E tensorflow/stream_executor/cuda/cuda_driver.cc:318] failed call to cuInit: CUDA_ERROR_NO_DEVICE: no CUDA-capable device is detected\n2019-10-30 16:20:08.889217: I tensorflow/stream_executor/cuda/cuda_diagnostics.cc:169] retrieving CUDA diagnostic information for host: exec-gpu02\n2019-10-30 16:20:08.889225: I tensorflow/stream_executor/cuda/cuda_diagnostics.cc:176] hostname: exec-gpu02\n2019-10-30 16:20:08.889280: I tensorflow/stream_executor/cuda/cuda_diagnostics.cc:200] libcuda reported version is: 418.39.0\n2019-10-30 16:20:08.889310: I tensorflow/stream_executor/cuda/cuda_diagnostics.cc:204] kernel reported version is: 418.39.0\n2019-10-30 16:20:08.889316: I tensorflow/stream_executor/cuda/cuda_diagnostics.cc:310] kernel version seems to match DSO: 418.39.0\n2019-10-30 16:20:08.897876: I tensorflow/core/platform/profile_utils/cpu_utils.cc:94] CPU Frequency: 2100000000 Hz\n2019-10-30 16:20:08.900844: I tensorflow/compiler/xla/service/service.cc:168] XLA service 0x3f13fb0 executing computations on platform Host. Devices:\n2019-10-30 16:20:08.900866: I tensorflow/compiler/xla/service/service.cc:175]   StreamExecutor device (0): &lt;undefined&gt;, &lt;undefined&gt;\n</code></pre>\n\n<p>How can I get it fixed?</p>\n"}, {"tags": ["python", "pip", "cython", "failed-installation", "pyzmq"], "comments": [{"owner": {"reputation": 12117, "user_id": 2745495, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5bbcd267235bab78ec6710ef6654ba87?s=128&d=identicon&r=PG", "display_name": "Gino Mempin", "link": "https://stackoverflow.com/users/2745495/gino-mempin"}, "edited": false, "score": 1, "creation_date": 1572480045, "post_id": 58635139, "comment_id": 103577203, "body": "Did you specifically install the Build Tools and checked that Visual Studio 14 is in your PATH?"}, {"owner": {"reputation": 11, "user_id": 12300325, "user_type": "registered", "profile_image": "https://graph.facebook.com/2922128691133989/picture?type=large", "display_name": "Gianfranco Fisco", "link": "https://stackoverflow.com/users/12300325/gianfranco-fisco"}, "reply_to_user": {"reputation": 12117, "user_id": 2745495, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5bbcd267235bab78ec6710ef6654ba87?s=128&d=identicon&r=PG", "display_name": "Gino Mempin", "link": "https://stackoverflow.com/users/2745495/gino-mempin"}, "edited": false, "score": 0, "creation_date": 1572480316, "post_id": 58635139, "comment_id": 103577275, "body": "I&#39;ve installed Visual Studio 14, but didn&#39;t check the PATH. How do I do that?"}, {"owner": {"reputation": 55797, "user_id": 7976758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/512cfbaf98d63ca4acd57b2df792aec6?s=128&d=identicon&r=PG", "display_name": "phd", "link": "https://stackoverflow.com/users/7976758/phd"}, "edited": false, "score": 0, "creation_date": 1572522839, "post_id": 58635139, "comment_id": 103590872, "body": "Try this one: <a href=\"https://www.lfd.uci.edu/~gohlke/pythonlibs/#pyzmq\" rel=\"nofollow noreferrer\">lfd.uci.edu/~gohlke/pythonlibs/#pyzmq</a>"}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 12300325, "user_type": "registered", "profile_image": "https://graph.facebook.com/2922128691133989/picture?type=large", "display_name": "Gianfranco Fisco", "link": "https://stackoverflow.com/users/12300325/gianfranco-fisco"}, "is_accepted": false, "score": 0, "last_activity_date": 1572527439, "creation_date": 1572527439, "answer_id": 58644104, "question_id": 58635139, "link": "https://stackoverflow.com/questions/58635139/trouble-installing-zeromq-pyzmq-in-windows-using-pip/58644104#58644104", "title": "Trouble installing ZeroMQ / pyzmq in Windows, using pip", "body": "<p>I figured it out!</p>\n\n<p>I installed Visual Studio, but that was not enough. I needed the Build Tools too, more specifically, everything that had \"C++\" on the optional packages during the install. After that I could install the packages with no problem.</p>\n"}], "owner": {"reputation": 11, "user_id": 12300325, "user_type": "registered", "profile_image": "https://graph.facebook.com/2922128691133989/picture?type=large", "display_name": "Gianfranco Fisco", "link": "https://stackoverflow.com/users/12300325/gianfranco-fisco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1626, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1572534217, "creation_date": 1572479401, "last_edit_date": 1572534217, "question_id": 58635139, "link": "https://stackoverflow.com/questions/58635139/trouble-installing-zeromq-pyzmq-in-windows-using-pip", "title": "Trouble installing ZeroMQ / pyzmq in Windows, using pip", "body": "<p>I'm kinda new to python and I'm using pip to install packages via console. Worked well with previous installs, but when I try to install pyzmq I receive an error message. I thought the problem was realted to Cython (since I've previously seen something like that), but then I installed Cython and the problem persists. This is the full message I get: </p>\n\n<pre><code>    Collecting pyzmq\n      Using cached https://files.pythonhosted.org/packages/7a/d2/1eb3a994374802b352d4911f3317313a5b4ea786bc830cc5e343dad9b06d/pyzmq-18.1.0.tar.gz\n    Building wheels for collected packages: pyzmq\n      Building wheel for pyzmq (setup.py) ... error\n    ERROR: Command errored out with exit status 1:\n       command: 'C:\\Users\\gianf\\AppData\\Local\\Microsoft\\WindowsApps\\PythonSoftwareFoundation.Python.3.8_qbz5n2kfra8p0\\python.exe' -u -c 'import sys, setuptools, tokenize; sys.argv[0] = '\"'\"'C:\\\\Users\\\\gianf\\\\AppData\\\\Local\\\\Temp\\\\pip-install-7scmlplo\\\\pyzmq\\\\setup.py'\"'\"'; __file__='\"'\"'C:\\\\Users\\\\gianf\\\\AppData\\\\Local\\\\Temp\\\\pip-install-7scmlplo\\\\pyzmq\\\\setup.py'\"'\"';f=getattr(tokenize, '\"'\"'open'\"'\"', open)(__file__);code=f.read().replace('\"'\"'\\r\\n'\"'\"', '\"'\"'\\n'\"'\"');f.close();exec(compile(code, __file__, '\"'\"'exec'\"'\"'))' bdist_wheel -d 'C:\\Users\\gianf\\AppData\\Local\\Temp\\pip-wheel-hxgsq9q7' --python-tag cp38\n           cwd: C:\\Users\\gianf\\AppData\\Local\\Temp\\pip-install-7scmlplo\\pyzmq\\\n      Complete output (191 lines):\n      running bdist_wheel\n      running build\n      running build_py\n      Generating grammar tables from C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.8_3.8.240.0_x64__qbz5n2kfra8p0\\lib\\lib2to3\\Grammar.txt\n      Writing grammar tables to C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.8_3.8.240.0_x64__qbz5n2kfra8p0\\lib\\lib2to3\\Grammar3.8.0.final.0.pickle\n      Writing failed: [Errno 13] Permission denied: 'C:\\\\Program Files\\\\WindowsApps\\\\PythonSoftwareFoundation.Python.3.8_3.8.240.0_x64__qbz5n2kfra8p0\\\\lib\\\\lib2to3\\\\Grammar3.8.0.final.0.pickle'\n      Generating grammar tables from C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.8_3.8.240.0_x64__qbz5n2kfra8p0\\lib\\lib2to3\\PatternGrammar.txt\n      Writing grammar tables to C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.8_3.8.240.0_x64__qbz5n2kfra8p0\\lib\\lib2to3\\PatternGrammar3.8.0.final.0.pickle\n      Writing failed: [Errno 13] Permission denied: 'C:\\\\Program Files\\\\WindowsApps\\\\PythonSoftwareFoundation.Python.3.8_3.8.240.0_x64__qbz5n2kfra8p0\\\\lib\\\\lib2to3\\\\PatternGrammar3.8.0.final.0.pickle'\n      creating build\n(((copying / creating a bunch of stuff I omitted to fit on the post)))\n      copying zmq\\utils\\zmq_constants.h -&gt; build\\lib.win-amd64-3.8\\zmq\\utils\n      running build_ext\n      running configure\n      {'libraries': ['libzmq'], 'include_dirs': [], 'library_dirs': [], 'runtime_library_dirs': [], 'extra_link_args': []}\n      Warning: Couldn't find an acceptable libzmq on the system.\n\n      If you expected pyzmq to link against an installed libzmq, please check to make sure:\n\n          * You have a C compiler installed\n          * A development version of Python is installed (including headers)\n          * A development version of ZMQ &gt;= 3.2 is installed (including headers)\n          * If ZMQ is not in a default location, supply the argument --zmq=&lt;path&gt;\n          * If you did recently install ZMQ to a default location,\n            try rebuilding the ld cache with `sudo ldconfig`\n            or specify zmq's location with `--zmq=/usr/local`\n\n      You can skip all this detection/waiting nonsense if you know\n      you want pyzmq to bundle libzmq as an extension by passing:\n\n          `--zmq=bundled`\n\n      I will now try to build libzmq as a Python extension\n      unless you interrupt me (^C) in the next 10 seconds...\n\n      ************************************************\n       1...\n      Using bundled libzmq\n      already have bundled\\zeromq\n      staging platform.hpp from: C:\\Users\\gianf\\AppData\\Local\\Temp\\pip-install-7scmlplo\\pyzmq\\buildutils\\include_win32\n      error: Microsoft Visual C++ 14.0 is required. Get it with \"Build Tools for Visual Studio\": https://visualstudio.microsoft.com/downloads/\n      ************************************************\n      ----------------------------------------\n      ERROR: Failed building wheel for pyzmq\n      Running setup.py clean for pyzmq\n    Failed to build pyzmq\n    Installing collected packages: pyzmq\n        Running setup.py install for pyzmq ... error\n        ERROR: Command errored out with exit status 1:\n         command: 'C:\\Users\\gianf\\AppData\\Local\\Microsoft\\WindowsApps\\PythonSoftwareFoundation.Python.3.8_qbz5n2kfra8p0\\python.exe' -u -c 'import sys, setuptools, tokenize; sys.argv[0] = '\"'\"'C:\\\\Users\\\\gianf\\\\AppData\\\\Local\\\\Temp\\\\pip-install-7scmlplo\\\\pyzmq\\\\setup.py'\"'\"'; __file__='\"'\"'C:\\\\Users\\\\gianf\\\\AppData\\\\Local\\\\Temp\\\\pip-install-7scmlplo\\\\pyzmq\\\\setup.py'\"'\"';f=getattr(tokenize, '\"'\"'open'\"'\"', open)(__file__);code=f.read().replace('\"'\"'\\r\\n'\"'\"', '\"'\"'\\n'\"'\"');f.close();exec(compile(code, __file__, '\"'\"'exec'\"'\"'))' install --record 'C:\\Users\\gianf\\AppData\\Local\\Temp\\pip-record-7kjkoe_6\\install-record.txt' --single-version-externally-managed --compile --user --prefix=\n             cwd: C:\\Users\\gianf\\AppData\\Local\\Temp\\pip-install-7scmlplo\\pyzmq\\\n        Complete output (193 lines):\n        running install\n        running build\n        running build_py\n        Generating grammar tables from C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.8_3.8.240.0_x64__qbz5n2kfra8p0\\lib\\lib2to3\\Grammar.txt\n        Writing grammar tables to C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.8_3.8.240.0_x64__qbz5n2kfra8p0\\lib\\lib2to3\\Grammar3.8.0.final.0.pickle\n        Writing failed: [Errno 13] Permission denied: 'C:\\\\Program Files\\\\WindowsApps\\\\PythonSoftwareFoundation.Python.3.8_3.8.240.0_x64__qbz5n2kfra8p0\\\\lib\\\\lib2to3\\\\Grammar3.8.0.final.0.pickle'\n        Generating grammar tables from C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.8_3.8.240.0_x64__qbz5n2kfra8p0\\lib\\lib2to3\\PatternGrammar.txt\n        Writing grammar tables to C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.8_3.8.240.0_x64__qbz5n2kfra8p0\\lib\\lib2to3\\PatternGrammar3.8.0.final.0.pickle\n        Writing failed: [Errno 13] Permission denied: 'C:\\\\Program Files\\\\WindowsApps\\\\PythonSoftwareFoundation.Python.3.8_3.8.240.0_x64__qbz5n2kfra8p0\\\\lib\\\\lib2to3\\\\PatternGrammar3.8.0.final.0.pickle'\n(((copying / creating a bunch of lines I omitted to fit on the post)))\n        running build_ext\n        running configure\n        {'libraries': ['libzmq'], 'include_dirs': [], 'library_dirs': [], 'runtime_library_dirs': [], 'extra_link_args': []}\n        Warning: Couldn't find an acceptable libzmq on the system.\n\n        If you expected pyzmq to link against an installed libzmq, please check to make sure:\n\n            * You have a C compiler installed\n            * A development version of Python is installed (including headers)\n            * A development version of ZMQ &gt;= 3.2 is installed (including headers)\n            * If ZMQ is not in a default location, supply the argument --zmq=&lt;path&gt;\n            * If you did recently install ZMQ to a default location,\n              try rebuilding the ld cache with `sudo ldconfig`\n              or specify zmq's location with `--zmq=/usr/local`\n\n        You can skip all this detection/waiting nonsense if you know\n        you want pyzmq to bundle libzmq as an extension by passing:\n\n            `--zmq=bundled`\n\n        I will now try to build libzmq as a Python extension\n        unless you interrupt me (^C) in the next 10 seconds...\n\n         1...\n        Using bundled libzmq\n        already have bundled\\zeromq\n        already have platform.hpp\n        building 'zmq.libzmq' extension\n        error: Microsoft Visual C++ 14.0 is required. Get it with \"Build Tools for Visual Studio\": https://visualstudio.microsoft.com/downloads/\n        ----------------------------------------\n    ERROR: Command errored out with exit status 1: 'C:\\Users\\gianf\\AppData\\Local\\Microsoft\\WindowsApps\\PythonSoftwareFoundation.Python.3.8_qbz5n2kfra8p0\\python.exe' -u -c 'import sys, setuptools, tokenize; sys.argv[0] = '\"'\"'C:\\\\Users\\\\gianf\\\\AppData\\\\Local\\\\Temp\\\\pip-install-7scmlplo\\\\pyzmq\\\\setup.py'\"'\"'; __file__='\"'\"'C:\\\\Users\\\\gianf\\\\AppData\\\\Local\\\\Temp\\\\pip-install-7scmlplo\\\\pyzmq\\\\setup.py'\"'\"';f=getattr(tokenize, '\"'\"'open'\"'\"', open)(__file__);code=f.read().replace('\"'\"'\\r\\n'\"'\"', '\"'\"'\\n'\"'\"');f.close();exec(compile(code, __file__, '\"'\"'exec'\"'\"'))' install --record 'C:\\Users\\gianf\\AppData\\Local\\Temp\\pip-record-7kjkoe_6\\install-record.txt' --single-version-externally-managed --compile --user --prefix= Check the logs for full command output.\n</code></pre>\n\n<p>Since I've noticed an error about MS C++, I downloaded and installed basically everything I could related to Microsoft visual C++, but the error persists.</p>\n\n<p>Also tried to install pyzmq via the msi file, but I'm not sure about the correct path.</p>\n\n<p><a href=\"https://i.stack.imgur.com/70SUb.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/70SUb.jpg\" alt=\"https://i.stack.imgur.com/70SUb.jpg\"></a></p>\n"}, {"tags": ["python", "python-3.x", "python-2.7", "list"], "comments": [{"owner": {"reputation": 18268, "user_id": 5218354, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh4.googleusercontent.com/-NEO9rZKeffY/AAAAAAAAAAI/AAAAAAAAAKc/9IttO1jUOr4/photo.jpg=k-s128", "display_name": "norok2", "link": "https://stackoverflow.com/users/5218354/norok2"}, "edited": false, "score": 0, "creation_date": 1572479968, "post_id": 58635133, "comment_id": 103577189, "body": "I am not quite getting if you are struggling with the formulation or the implementation of the algorithm. If it is only the implementation, could you formulate the algorithm in the question? if you have troubles with the formulation, what is your current thinking?"}, {"owner": {"reputation": 18268, "user_id": 5218354, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh4.googleusercontent.com/-NEO9rZKeffY/AAAAAAAAAAI/AAAAAAAAAKc/9IttO1jUOr4/photo.jpg=k-s128", "display_name": "norok2", "link": "https://stackoverflow.com/users/5218354/norok2"}, "edited": false, "score": 0, "creation_date": 1572480159, "post_id": 58635133, "comment_id": 103577236, "body": "Also, it looks to me that there are multiple possible solutions, e.g. <code>{1: 1, 2: 3, 3: 2, 4: 4}</code> or <code>{1: 2, 2: 3, 3: 4, 4: 1}</code>."}, {"owner": {"reputation": 85, "user_id": 12300341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/019701aa28c787894824eae5d88bd49d?s=128&d=identicon&r=PG&f=1", "display_name": "Jaoa", "link": "https://stackoverflow.com/users/12300341/jaoa"}, "reply_to_user": {"reputation": 18268, "user_id": 5218354, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh4.googleusercontent.com/-NEO9rZKeffY/AAAAAAAAAAI/AAAAAAAAAKc/9IttO1jUOr4/photo.jpg=k-s128", "display_name": "norok2", "link": "https://stackoverflow.com/users/5218354/norok2"}, "edited": false, "score": 0, "creation_date": 1572480359, "post_id": 58635133, "comment_id": 103577288, "body": "@norok2 thanks for your answer. Yes, there are multiple possible solutions. And I am not sure how to formulate the algorithm. Of course, I can brute force this by checking every single possible combinations and only get the unique items, however that is too much computation especially when there are a lot of input"}], "answers": [{"tags": [], "owner": {"reputation": 18268, "user_id": 5218354, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh4.googleusercontent.com/-NEO9rZKeffY/AAAAAAAAAAI/AAAAAAAAAKc/9IttO1jUOr4/photo.jpg=k-s128", "display_name": "norok2", "link": "https://stackoverflow.com/users/5218354/norok2"}, "is_accepted": false, "score": 0, "last_activity_date": 1572508625, "last_edit_date": 1572508625, "creation_date": 1572481853, "answer_id": 58635411, "question_id": 58635133, "link": "https://stackoverflow.com/questions/58635133/select-only-one-unique-element-from-multiple-lists-in-python/58635411#58635411", "title": "Select only one unique element from multiple lists in Python", "body": "<p>A, possibly inefficient, way of solving the issue, is to generate all possible \"solutions\" (with values potentially not present in the lists corresponding to a specific key) and settle for a \"valid\" one (for which all values are present in the corresponding lists).</p>\n\n<p>One way of doing this with <code>itertools.permutation</code> (that is able to compute all possible solutions satisfying the uniqueness constraint) would be:</p>\n\n<pre><code>import itertools\n\n\ndef gen_valid(source):\n    keys = source.keys()\n    possible_values = set(x for k, v in source.items() for x in v)\n    for values in itertools.permutations(possible_values):\n        result = {k: v for k, v in zip(keys, values)}\n        # : check that `result` is valid\n        if all(v in source[k] for k, v in result.items()):\n            yield result\n\n\nd = {1: [1, 2, 3], 2: [1, 2, 3, 4], 3: [2, 4], 4: [1, 2, 3, 4]}\n\n\nnext(gen_valid(d))\n# {1: 1, 2: 2, 3: 4, 4: 3}\n\nlist(gen_valid(d))\n# [{1: 1, 2: 2, 3: 4, 4: 3},\n#  {1: 1, 2: 3, 3: 2, 4: 4},\n#  {1: 1, 2: 3, 3: 4, 4: 2},\n#  {1: 1, 2: 4, 3: 2, 4: 3},\n#  {1: 2, 2: 1, 3: 4, 4: 3},\n#  {1: 2, 2: 3, 3: 4, 4: 1},\n#  {1: 3, 2: 1, 3: 2, 4: 4},\n#  {1: 3, 2: 1, 3: 4, 4: 2},\n#  {1: 3, 2: 2, 3: 4, 4: 1},\n#  {1: 3, 2: 4, 3: 2, 4: 1}]\n</code></pre>\n\n<hr>\n\n<p>This generates <code>n!</code> solutions.</p>\n\n<p>The \"brute force\" approach using a Cartesian product over the lists, produces <code>prod(n_k) = n_1 * n_1 * ... * n_k</code> solutions (with <code>n_k</code> the length of each list). In the worst case scenario (maximum density) this is <code>n ** n</code> solutions, which is asymptotically much worse than the factorial.\nIn the best case scenario (minimum density) this is 1 solution only.\nIn general, this can be either slower or faster than the \"permutation solution\" proposed above, depending on the \"sparsity\" of the lists.</p>\n\n<p>For an average <code>n_k</code> of approx. <code>n / 2</code>, <code>n!</code> is smaller/faster for <code>n &gt;= 6</code>.</p>\n\n<p>For an average <code>n_k</code> of approx. <code>n * (3 / 4)</code>, <code>n!</code> is smaller/faster for <code>n &gt;= 4</code>.</p>\n\n<p>In this example there are <code>4! == 4 * 3 * 2 * 1 == 24</code> permutation solutions, and <code>3 * 4 * 2 * 4 == 96</code> Cartesian product solutions.</p>\n"}, {"comments": [{"owner": {"reputation": 18268, "user_id": 5218354, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh4.googleusercontent.com/-NEO9rZKeffY/AAAAAAAAAAI/AAAAAAAAAKc/9IttO1jUOr4/photo.jpg=k-s128", "display_name": "norok2", "link": "https://stackoverflow.com/users/5218354/norok2"}, "edited": false, "score": 0, "creation_date": 1572483984, "post_id": 58635510, "comment_id": 103578038, "body": "&quot;in Python dictionary objects are unsorted by default&quot; -&gt; &quot;in Python versions prior to 3.7 ...&quot; (actually 3.6, but it was a guaranteed feature only in 3.7)."}, {"owner": {"reputation": 85, "user_id": 12300341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/019701aa28c787894824eae5d88bd49d?s=128&d=identicon&r=PG&f=1", "display_name": "Jaoa", "link": "https://stackoverflow.com/users/12300341/jaoa"}, "edited": false, "score": 0, "creation_date": 1572484356, "post_id": 58635510, "comment_id": 103578089, "body": "A fine solution! However, Kattis does not see this solution as a valid answer."}, {"owner": {"reputation": 191, "user_id": 8121682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbf56b95b7afa3f689d6bfa0bbc3abcb?s=128&d=identicon&r=PG&f=1", "display_name": "matt123788", "link": "https://stackoverflow.com/users/8121682/matt123788"}, "reply_to_user": {"reputation": 85, "user_id": 12300341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/019701aa28c787894824eae5d88bd49d?s=128&d=identicon&r=PG&f=1", "display_name": "Jaoa", "link": "https://stackoverflow.com/users/12300341/jaoa"}, "edited": false, "score": 0, "creation_date": 1572490956, "post_id": 58635510, "comment_id": 103579328, "body": "@Jaoa why is this answer incorrect on Kattis? I print the solution as a list object rather than a string so maybe that is the issue."}, {"owner": {"reputation": 191, "user_id": 8121682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbf56b95b7afa3f689d6bfa0bbc3abcb?s=128&d=identicon&r=PG&f=1", "display_name": "matt123788", "link": "https://stackoverflow.com/users/8121682/matt123788"}, "reply_to_user": {"reputation": 85, "user_id": 12300341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/019701aa28c787894824eae5d88bd49d?s=128&d=identicon&r=PG&f=1", "display_name": "Jaoa", "link": "https://stackoverflow.com/users/12300341/jaoa"}, "edited": false, "score": 0, "creation_date": 1572491830, "post_id": 58635510, "comment_id": 103579481, "body": "@Jaoa change the last two lines to <code>print(&#39; &#39;.join([str(x+1) for x in possible_back_tile_order]))     print(&#39; &#39;.join([str(x+1) for x in possible_front_tile_order]))</code>"}, {"owner": {"reputation": 85, "user_id": 12300341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/019701aa28c787894824eae5d88bd49d?s=128&d=identicon&r=PG&f=1", "display_name": "Jaoa", "link": "https://stackoverflow.com/users/12300341/jaoa"}, "edited": false, "score": 0, "creation_date": 1572492614, "post_id": 58635510, "comment_id": 103579655, "body": "@matt123788 I am not quite sure why it is incorrect. It passed the first few tests but fails later. There must be some issue with the code that it is not catching some of the cases. I am too wondering what the problem is. I am wondering if it&#39;s the for loop <code>for i in range(n_tiles_row):</code> that it only runs for 4 times in our case but may require more in some cases. I am not quite sure at the moment but I will continue investigating."}, {"owner": {"reputation": 85, "user_id": 12300341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/019701aa28c787894824eae5d88bd49d?s=128&d=identicon&r=PG&f=1", "display_name": "Jaoa", "link": "https://stackoverflow.com/users/12300341/jaoa"}, "edited": false, "score": 0, "creation_date": 1572492810, "post_id": 58635510, "comment_id": 103579704, "body": "@matt123788 Also could you please explain how <code>key=lambda x: (x[1], -x[2])</code> works? Thank you!"}], "tags": [], "owner": {"reputation": 191, "user_id": 8121682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbf56b95b7afa3f689d6bfa0bbc3abcb?s=128&d=identicon&r=PG&f=1", "display_name": "matt123788", "link": "https://stackoverflow.com/users/8121682/matt123788"}, "is_accepted": false, "score": 0, "last_activity_date": 1572483136, "last_edit_date": 1572483136, "creation_date": 1572482624, "answer_id": 58635510, "question_id": 58635133, "link": "https://stackoverflow.com/questions/58635133/select-only-one-unique-element-from-multiple-lists-in-python/58635510#58635510", "title": "Select only one unique element from multiple lists in Python", "body": "<p>Here is a solution using the same syntax as the code you provided. </p>\n\n<p>The trick here was to order the tiles first by price ascending (the question asked for non-descending) then by height descending such that the tallest tile of the next lowest price in the back row would be matched the tallest tile of the next lowest price in the front row. \nTo do this sorting I utilized Python's <code>sorted()</code> function. See a Stack Overflow example <a href=\"https://stackoverflow.com/a/6666834/8121682\">here</a>.</p>\n\n<p>I assumed if there was no such match then immediately break and print according to the problem you linked.</p>\n\n<p>As a side note, you had originally claimed that a python dictionary\n<code>{3: 4, 2: 2, 4:1, 1: 3}</code> was equivalent to <code>{1: 3, 2: 2, 3: 4, 4: 1}</code>. While you are correct, you must remember that in Python dictionary objects are unsorted by default so it is not easy to compare keys this way.</p>\n\n<pre><code>import sys\n\nn_tiles_row = int(sys.stdin.readline().rstrip())\n# print(n_tiles_row) ==&gt; 4\n\n# BACK ROW - JOAO\nback_row_price = sys.stdin.readline().rstrip()\n# print(back_row_price) ==&gt; 3 2 1 2\n\nback_row_height = sys.stdin.readline().rstrip()\n# print(back_row_height) ==&gt; 2 3 4 3\n\n# FRONT ROW - MARIA\nfront_row_price = sys.stdin.readline().rstrip()\n# print(front_row_price) ==&gt; 2 1 2 1\n\nfront_row_height = sys.stdin.readline().rstrip()\n# print(front_row_height) ==&gt; 2 2 1 3\n\n# preprocess data into lists of ints\nback_row_price = [int(x) for x in back_row_price.strip().split(' ')]\nback_row_height = [int(x) for x in back_row_height.strip().split(' ')]\nfront_row_price = [int(x) for x in front_row_price.strip().split(' ')]\nfront_row_height = [int(x) for x in front_row_height.strip().split(' ')]\n\n# store each tile into lists of tuples\nfront = list()\nback = list()\nfor i in range(n_tiles_row):\n    back.append((i, back_row_price[i], back_row_height[i]))  # tuples of (tile_num, price, height)\n    front.append((i, front_row_price[i], front_row_height[i]))\n\n# sort tiles by price first (as the price must be non-descending) then by height descending\nback = sorted(back, key=lambda x: (x[1], -x[2]))\nfront = sorted(front, key=lambda x: (x[1], -x[2]))\n\n# print(back) ==&gt; [(2, 1, 4), (1, 2, 3), (3, 2, 3), (0, 3, 2)]\n# print(front) ==&gt; [(3, 1, 3), (1, 1, 2), (0, 2, 2), (2, 2, 1)]\n\npossible_back_tile_order = list()\npossible_front_tile_order = list()\nfor i in range(n_tiles_row):\n    if back[i][2] &gt; front[i][2]:  # if next lowest priced back tile is taller than next lowest priced front tile\n        possible_back_tile_order.append(back[i][0])\n        possible_front_tile_order.append(front[i][0])\n    else:\n        break\n\nif len(possible_back_tile_order) &lt; n_tiles_row:  # check that all tiles had matching pairs in back and front\n    print(\"impossible\")\nelse:\n    print(possible_back_tile_order)\n    print(possible_front_tile_order) \n</code></pre>\n"}], "owner": {"reputation": 85, "user_id": 12300341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/019701aa28c787894824eae5d88bd49d?s=128&d=identicon&r=PG&f=1", "display_name": "Jaoa", "link": "https://stackoverflow.com/users/12300341/jaoa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 106, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1572508625, "creation_date": 1572479357, "question_id": 58635133, "link": "https://stackoverflow.com/questions/58635133/select-only-one-unique-element-from-multiple-lists-in-python", "title": "Select only one unique element from multiple lists in Python", "body": "<p>This is not a homework that I'm struggling to do but I am trying to solve a problem (here is the link if interested <a href=\"https://open.kattis.com/problems/azulejos\" rel=\"nofollow noreferrer\">https://open.kattis.com/problems/azulejos</a>).</p>\n\n<p>Here you actually don't have to understand the problem but what I would like to accomplish now is that I want to select only one element from multiple lists and they do not overlap with each other.</p>\n\n<p>For example, at the end of my code, I get an output:</p>\n\n<pre><code>{1: [1, 2, 3], 2: [1, 2, 3, 4], 3: [2, 4], 4: [1, 2, 3, 4]}\n</code></pre>\n\n<p>I would like to transform this into, for example,</p>\n\n<pre><code>{3: 4, 2: 2, 4:1, 1: 3} -- which is the sample answer that is in the website.\n</code></pre>\n\n<p>But from my understanding, it can also be simply </p>\n\n<pre><code>{1: 3, 2: 2, 3: 4, 4: 1}\n</code></pre>\n\n<p>I am struggling to select only one integer that does not overlap with the others. The dictionary I produce in my code contains lists with multiple integers. And I would like to pick only one from each and they are all unique</p>\n\n<pre><code>import sys\n\nn_tiles_row = int(sys.stdin.readline().rstrip())\n# print(n_tiles_row) ==&gt; 4\n\n# BACK ROW - JOAO\nback_row_price = sys.stdin.readline().rstrip()\n# print(back_row_price) ==&gt; 3 2 1 2\n\nback_row_height = sys.stdin.readline().rstrip()\n# print(back_row_height) ==&gt; 2 3 4 3\n\n# FRONT ROW - MARIA\nfront_row_price = sys.stdin.readline().rstrip()\n# print(front_row_price) ==&gt; 2 1 2 1\n\nfront_row_height = sys.stdin.readline().rstrip()\n# print(front_row_height) ==&gt; 2 2 1 3\n\nbr_num1_price, br_num2_price, br_num3_price, br_num4_price = map(int, back_row_price.split())\n# br_num1_price = 3; br_num2_price = 2; br_num3_price = 1; br_num4_price = 2;\n\nbr_num1_height, br_num2_height, br_num3_height, br_num4_height = map(int, back_row_height.split())\n# 2 3 4 3\n\nfr_num1_price, fr_num2_price, fr_num3_price, fr_num4_price = map(int, front_row_price.split())\n# 2 1 2 1\n\nfr_num1_height, fr_num2_height, fr_num3_height, fr_num4_height = map(int, front_row_height.split())\n# 2 2 1 3\n\nback_row = {1: [br_num1_price, br_num1_height], \n2: [br_num2_price, br_num2_height], \n3: [br_num3_price, br_num3_height], \n4: [br_num4_price, br_num4_height]}\n# {1: [3, 2], 2: [2, 3], 3: [1, 4], 4: [2, 3]}\n\nfront_row = {1: [fr_num1_price, fr_num1_height], \n2: [fr_num2_price, fr_num2_height], \n3: [fr_num3_price, fr_num3_height], \n4: [fr_num4_price, fr_num4_height]}\n# {1: [2, 2], 2: [1, 2], 3: [2, 1], 4: [1, 3]}\n\n_dict = {1: [], \n2: [], \n3: [], \n4: []\n}\n\nfor i in range(n_tiles_row):\n    _list = []\n    for n in range(n_tiles_row):\n        if(list(back_row.values())[i][0] &gt;= list(front_row.values())[n][0] \n        and list(back_row.values())[i][1] &gt;= list(front_row.values())[n][1]):\n            _list.append(list(front_row.keys())[n])\n            _dict[list(back_row.keys())[i]] = _list\n\nprint(_dict)\n# {1: [1, 2, 3], 2: [1, 2, 3, 4], 3: [2, 4], 4: [1, 2, 3, 4]}\n</code></pre>\n\n<p>Please let me know if there is another approach to this problem.</p>\n"}, {"tags": ["python", "python-3.x", "pip", "conda", "importerror"], "comments": [{"owner": {"reputation": 41290, "user_id": 570918, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/27ce5101af57acecf9a5fe563b6192b1?s=128&d=identicon&r=PG", "display_name": "merv", "link": "https://stackoverflow.com/users/570918/merv"}, "edited": false, "score": 0, "creation_date": 1572540052, "post_id": 58635086, "comment_id": 103600509, "body": "In the future, if you are working from example code, please make sure to state that explicitly and point users to that code. In this case, it seems you are working from the code found in <a href=\"https://github.com/glotzerlab/freud-examples/tree/6f9a5f28c95a85f66085abf60860feaf58efd44e/archive/demos\" rel=\"nofollow noreferrer\">these demos from <b>freud-examples</b></a>. Those are archived and not meant to be supported. <a href=\"https://github.com/glotzerlab/freud-examples/blob/6f9a5f28c95a85f66085abf60860feaf58efd44e/archive/demos/util.py\" rel=\"nofollow noreferrer\"><code>util.py</code></a> is simply local code that the Jupyter notebooks load - not a module."}, {"owner": {"reputation": 41290, "user_id": 570918, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/27ce5101af57acecf9a5fe563b6192b1?s=128&d=identicon&r=PG", "display_name": "merv", "link": "https://stackoverflow.com/users/570918/merv"}, "edited": false, "score": 0, "creation_date": 1572540504, "post_id": 58635086, "comment_id": 103600760, "body": "Also, if you have Anaconda, it is best not to use Pip unless absolutely necessary and never use it in the <b>base</b> env (see &quot;<a href=\"https://www.anaconda.com/using-pip-in-a-conda-environment/\" rel=\"nofollow noreferrer\"><i>Using Pip in a Conda Environment</i></a>&quot;). In this case, <code>conda install -c conda-forge freud</code> is clearly stated in the documentation, so that is the installation command to be preferred."}, {"owner": {"reputation": 1, "user_id": 9505158, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Racaio Cmoto", "link": "https://stackoverflow.com/users/9505158/racaio-cmoto"}, "reply_to_user": {"reputation": 41290, "user_id": 570918, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/27ce5101af57acecf9a5fe563b6192b1?s=128&d=identicon&r=PG", "display_name": "merv", "link": "https://stackoverflow.com/users/570918/merv"}, "edited": false, "score": 0, "creation_date": 1572571189, "post_id": 58635086, "comment_id": 103610687, "body": "Thanks for feedback, I should have mentioned i installed using <code>conda install -c conda-forge freud</code> ,,,,, it didn&#39;t load or recognize util, I couldn&#39;t find anywhere in documentation how to install util with conda , that is why I used pip install instead , which still doesn&#39;t work"}, {"owner": {"reputation": 41290, "user_id": 570918, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/27ce5101af57acecf9a5fe563b6192b1?s=128&d=identicon&r=PG", "display_name": "merv", "link": "https://stackoverflow.com/users/570918/merv"}, "edited": false, "score": 0, "creation_date": 1572571800, "post_id": 58635086, "comment_id": 103610804, "body": "I see. Yeah the point is, <code>util</code> isn&#39;t a really a thing, it&#39;s just a file that was used in some old examples. You can download that file and place it alongside code you want to write, but I think it would be better to stick to the newer documentation."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 9505158, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Racaio Cmoto", "link": "https://stackoverflow.com/users/9505158/racaio-cmoto"}, "edited": false, "score": 0, "creation_date": 1572571268, "post_id": 58642729, "comment_id": 103610697, "body": "Thanks for your answer , but I actually did install freud-analysis also and it didn&#39;t work."}], "tags": [], "owner": {"reputation": 55797, "user_id": 7976758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/512cfbaf98d63ca4acd57b2df792aec6?s=128&d=identicon&r=PG", "display_name": "phd", "link": "https://stackoverflow.com/users/7976758/phd"}, "is_accepted": false, "score": 0, "last_activity_date": 1572522572, "creation_date": 1572522572, "answer_id": 58642729, "question_id": 58635086, "link": "https://stackoverflow.com/questions/58635086/cannot-import-name-box-2d-to-points-from-util/58642729#58642729", "title": "cannot import name &#39;box_2d_to_points&#39; from &#39;util&#39;", "body": "<p><code>pip install freud</code> installs a wrong package. The <a href=\"https://freud.readthedocs.io/en/stable/installation.html\" rel=\"nofollow noreferrer\">installation page</a> shows the command <code>pip install freud-analysis</code>. Packages <a href=\"https://pypi.org/project/freud/\" rel=\"nofollow noreferrer\">freud</a> and <a href=\"https://pypi.org/project/freud-analysis/\" rel=\"nofollow noreferrer\">freud-analysis</a> are two completely different and unrelated ones.</p>\n\n<p>So first uninstall <code>freud</code> then install <code>freud-analysis</code>:</p>\n\n<pre><code>pip uninstall freud\npip install freud-analysis\n</code></pre>\n\n<p>Unfortunately even that correct <code>freud</code> <a href=\"https://github.com/glotzerlab/freud/search?q=box_2d_to_points&amp;unscoped_q=box_2d_to_points\" rel=\"nofollow noreferrer\">doesn't have <code>box_2d_to_points</code></a>. The only mention of <code>box_2d_to_points</code> is in the <a href=\"https://freud.readthedocs.io/en/stable/examples/module_intros/Box-ParticleBuffer.html\" rel=\"nofollow noreferrer\">docs</a> and <a href=\"https://www.google.com/search?hl=en&amp;pws=0&amp;q=%22box_2d_to_points%22\" rel=\"nofollow noreferrer\">nowhere else</a>. I think you should <a href=\"https://github.com/glotzerlab/freud/issues\" rel=\"nofollow noreferrer\">ask the authors</a> what they mean.</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 9505158, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Racaio Cmoto", "link": "https://stackoverflow.com/users/9505158/racaio-cmoto"}, "edited": false, "score": 0, "creation_date": 1573490526, "post_id": 58663748, "comment_id": 103890449, "body": "Thanks a lot for your comments, I have gone through your new freud version and noticed that you changed the documentation. It gives me errors when trying to run Accumulation g(r) for fluid:"}, {"owner": {"reputation": 1, "user_id": 9505158, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Racaio Cmoto", "link": "https://stackoverflow.com/users/9505158/racaio-cmoto"}, "edited": false, "score": 0, "creation_date": 1573490830, "post_id": 58663748, "comment_id": 103890603, "body": "Type error <code>----&gt; 4 ax = plot_rdf(box_arr, pos_arr, &#39;rdf&#39;, label=&#39;One frame&#39;)  &lt;ipython-input-9-68714fb3e78e&gt; in plot_rdf(box_arr, points_arr, prop, r_max, bins, label, ax)  ---&gt;16         rdf.compute(system=(box, points), reset=False)  TypeError: compute() takes at least 2 positional arguments (0 given)  </code>"}, {"owner": {"reputation": 312, "user_id": 2525806, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf1a4f2ecb2bddd9b76e584b9f077ee9?s=128&d=identicon&r=PG", "display_name": "Doryx", "link": "https://stackoverflow.com/users/2525806/doryx"}, "reply_to_user": {"reputation": 1, "user_id": 9505158, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Racaio Cmoto", "link": "https://stackoverflow.com/users/9505158/racaio-cmoto"}, "edited": false, "score": 0, "creation_date": 1573496291, "post_id": 58663748, "comment_id": 103892893, "body": "@RacaioCmoto check out the discussion here <a href=\"https://groups.google.com/forum/?utm_medium=email&amp;utm_source=footer#!msg/freud-users/iR1Z8PWXx_M/jyvodC9vBQAJ\" rel=\"nofollow noreferrer\">groups.google.com/forum/&hellip;</a>"}], "tags": [], "owner": {"reputation": 21, "user_id": 2505544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fb70c814342c76931a6681e9c6671e2?s=128&d=identicon&r=PG", "display_name": "Bradley Dice", "link": "https://stackoverflow.com/users/2505544/bradley-dice"}, "is_accepted": false, "score": 2, "last_activity_date": 1572631009, "creation_date": 1572631009, "answer_id": 58663748, "question_id": 58635086, "link": "https://stackoverflow.com/questions/58635086/cannot-import-name-box-2d-to-points-from-util/58663748#58663748", "title": "cannot import name &#39;box_2d_to_points&#39; from &#39;util&#39;", "body": "<p>I am a maintainer of the <code>freud</code> package. This issue with confusion over the <code>util</code> file was previously reported by another user (<a href=\"https://github.com/glotzerlab/freud/issues/446\" rel=\"nofollow noreferrer\">https://github.com/glotzerlab/freud/issues/446</a>) and has been resolved in version 2.0 of the freud library which was released yesterday (October 31, 2019).</p>\n\n<p>As mentioned in other comments and answers, the <code>util.py</code> file is not included in the <code>freud</code> package. It was used in freud documentation examples for version 1.0, and contained functions that were mostly used for generating particle systems and plotting results. Because this has confused several new users, we decided to incorporate many of those functions directly into the <code>freud</code> package. In a few cases, we have chosen to leave the <code>util.py</code> file with plotting-specific code and clearly document where the file can be found (example: <a href=\"https://freud.readthedocs.io/en/stable/examples/module_intros/order.Hexatic.html\" rel=\"nofollow noreferrer\">https://freud.readthedocs.io/en/stable/examples/module_intros/order.Hexatic.html</a>). The reason for this choice to separate utility functions is that <code>freud</code> is primarily an analysis package, and visualization choices are generally left up to the user (though as of v2.0, many compute objects have helper methods for plotting their results with Matplotlib).</p>\n\n<p><strong>In freud v2.0, the documentation has been revised.</strong> The code snippet cited above has been updated for the new API in v2.0 and no longer relies on the <code>util.py</code> file. The new example is located here: <a href=\"https://freud.readthedocs.io/en/stable/examples/module_intros/density.RDF-AccumulateFluid.html\" rel=\"nofollow noreferrer\">https://freud.readthedocs.io/en/stable/examples/module_intros/density.RDF-AccumulateFluid.html</a></p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import numpy as np\nimport freud\nimport matplotlib.pyplot as plt\n\ndata_path = \"data/phi065\"\nbox_data = np.load(\"{}/box_data.npy\".format(data_path))\npos_data = np.load(\"{}/pos_data.npy\".format(data_path))\n\ndef plot_rdf(box_arr, points_arr, prop, r_max=10, bins=100, label=None, ax=None):\n    \"\"\"Helper function for plotting RDFs.\"\"\"\n    if ax is None:\n        fig, ax = plt.subplots(1, 1, figsize=(12, 8))\n        ax.set_title(prop, fontsize=16)\n    rdf = freud.density.RDF(bins, r_max)\n    for box, points in zip(box_arr, points_arr):\n        rdf.compute(system=(box, points), reset=False)\n    if label is not None:\n        ax.plot(rdf.bin_centers, getattr(rdf, prop), label=label)\n        ax.legend()\n    else:\n        ax.plot(rdf.bin_centers, getattr(rdf, prop))\n    return ax\n</code></pre>\n\n<p>Also, I wanted to confirm that <code>pip install freud</code> will not get the right package. <code>freud</code> was originally available through conda channels but not via the Python Package Index (PyPI). We found that the name <code>freud</code> was already taken on PyPI when we started building wheels for easy installation with <code>pip</code>. The <a href=\"https://freud.readthedocs.io/en/stable/installation.html\" rel=\"nofollow noreferrer\">Installation page in the documentation</a> lists the correct methods for installation, which are currently <code>conda install -c conda-forge freud</code> if using a conda environment, or <code>pip install freud-analysis</code>.</p>\n\n<p>Thanks for using freud, and please feel free to reach out on <a href=\"https://groups.google.com/forum/#!forum/freud-users\" rel=\"nofollow noreferrer\">the freud-users mailing list</a> or <a href=\"https://github.com/glotzerlab/freud/issues\" rel=\"nofollow noreferrer\">freud's GitHub issues page</a> if you have further questions.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 9505158, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Racaio Cmoto", "link": "https://stackoverflow.com/users/9505158/racaio-cmoto"}, "is_accepted": false, "score": 0, "last_activity_date": 1572631090, "creation_date": 1572631090, "answer_id": 58663765, "question_id": 58635086, "link": "https://stackoverflow.com/questions/58635086/cannot-import-name-box-2d-to-points-from-util/58663765#58663765", "title": "cannot import name &#39;box_2d_to_points&#39; from &#39;util&#39;", "body": "<p>Having gone through the codes and repository in <a href=\"https://github.com/glotzerlab/freud-examples/blob/6f9a5f28c95a85f66085abf60860feaf58efd44e/archive/demos/util.py\" rel=\"nofollow noreferrer\">GitHub</a> and remarks that users: phd and merv gave , I noticed there is a file called util.py. I copied the it to the right directory and was able to run the code without the errors. If you encounter other problem that files are missing, I think the right way is to make sure you have right modules installed and have the necessary files in your directory. </p>\n"}], "owner": {"reputation": 1, "user_id": 9505158, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Racaio Cmoto", "link": "https://stackoverflow.com/users/9505158/racaio-cmoto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 147, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1572631090, "creation_date": 1572479008, "question_id": 58635086, "link": "https://stackoverflow.com/questions/58635086/cannot-import-name-box-2d-to-points-from-util", "title": "cannot import name &#39;box_2d_to_points&#39; from &#39;util&#39;", "body": "<p>I am trying to run the following code in python 3.7 using spyder</p>\n\n<pre><code>import numpy as np\nimport freud\nfrom util import box_2d_to_points\nimport matplotlib.pyplot as plt\n\ndata_path = \"data/phi065\"\nbox_data = np.load(\"{}/box_data.npy\".format(data_path))\npos_data = np.load(\"{}/pos_data.npy\".format(data_path))\n\ndef plot_rdf(box_arr, points_arr, prop, rmax=10, dr=0.1, label=None, ax=None):\n    \"\"\"Helper function for plotting RDFs.\"\"\"\n    if ax is None:\n        fig, ax = plt.subplots(1, 1, figsize=(12, 8))\n        ax.set_title(prop, fontsize=16)\n    rdf = freud.density.RDF(rmax, dr)\n    for box, points in zip(box_arr, points_arr):\n        rdf.accumulate(box, points)\n    if label is not None:\n        ax.plot(rdf.R, getattr(rdf, prop), label=label)\n        ax.legend()\n    else:\n        ax.plot(rdf.R, getattr(rdf, prop))\n    return ax\n\n</code></pre>\n\n<p>First installed a package called \"freud\" (<code>pip install freud</code>) \nthen when I run i get this error, </p>\n\n<p><strong>ImportError: cannot import name 'box_2d_to_points' from 'util' (/opt/anaconda3/lib/python3.7/site-packages/util/__init__.cpython-37m-darwin.so)</strong></p>\n\n<p>So I checked to see if package is installed by using </p>\n\n<p><code>pip show util</code></p>\n\n<p>I got this: <strong>WARNING: Package(s) not found: util\nNote: you may need to restart the kernel to use updated packages.</strong> </p>\n\n<p>and yes i did restart the kernel, nothing changed. </p>\n\n<p>When i try to install it</p>\n\n<p><code>pip install util</code> </p>\n\n<p><strong>ERROR: Could not find a version that satisfies the requirement util (from versions: none)\nERROR: No matching distribution found for util\nNote: you may need to restart the kernel to use updated packages.</strong></p>\n\n<p>I searched online and found that it can be installed as <code>pip install python-utils</code> but then it creates a different directory and the code doesn't compile even if i change to <code>from python_utils import box_2d_to_points</code>. </p>\n\n<p>But I think it is some directory issue that the package cannot be read. If you look into the screenshot attached, in library with folder 'freud' there is a folder 'util' that has the file \"<strong>init</strong>.cpython-37m-darwin.so\"\nI am wondering how to install this package. I followed the solutions in (<a href=\"https://stackoverflow.com/questions/2915471/install-a-python-package-into-a-different-directory-using-pip\">Install a Python package into a different directory using pip?)</a> but still didn't solve the problem. </p>\n\n<p>The documentation for freud package can be found <a href=\"https://freud.readthedocs.io/en/stable/installation.html\" rel=\"nofollow noreferrer\">here</a>: </p>\n\n<p><a href=\"https://i.stack.imgur.com/RaDFC.png\" rel=\"nofollow noreferrer\">and here is a screen shot of directories</a></p>\n\n<p>Thank you in advance, </p>\n"}, {"tags": ["python", "css", "django", "bootstrap-4"], "comments": [{"owner": {"reputation": 1733, "user_id": 6472447, "user_type": "registered", "profile_image": "https://graph.facebook.com/100002669441680/picture?type=large", "display_name": "Ahmed I. Elsayed", "link": "https://stackoverflow.com/users/6472447/ahmed-i-elsayed"}, "edited": false, "score": 0, "creation_date": 1572479177, "post_id": 58635049, "comment_id": 103577032, "body": "put the h-100 on the column not the card"}, {"owner": {"reputation": 105, "user_id": 11033122, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/f3KxG.png?s=128&g=1", "display_name": "L. McA", "link": "https://stackoverflow.com/users/11033122/l-mca"}, "reply_to_user": {"reputation": 1733, "user_id": 6472447, "user_type": "registered", "profile_image": "https://graph.facebook.com/100002669441680/picture?type=large", "display_name": "Ahmed I. Elsayed", "link": "https://stackoverflow.com/users/6472447/ahmed-i-elsayed"}, "edited": false, "score": 0, "creation_date": 1572505995, "post_id": 58635049, "comment_id": 103582818, "body": "@AhmedI.Elsayed This doesn&#39;t work, I already tried"}], "answers": [{"tags": [], "owner": {"reputation": 3381, "user_id": 1248505, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/vNyyb.jpg?s=128&g=1", "display_name": "Sighil", "link": "https://stackoverflow.com/users/1248505/sighil"}, "is_accepted": true, "score": 1, "last_activity_date": 1572541902, "last_edit_date": 1572541902, "creation_date": 1572541588, "answer_id": 58648202, "question_id": 58635049, "link": "https://stackoverflow.com/questions/58635049/django-bootstrap-4-how-to-align-elements-inside-of-multiple-parent-divs/58648202#58648202", "title": "Django/Bootstrap 4: How to align elements inside of multiple parent divs", "body": "<p>The code can be corrected with a simple re-alignment of the content inside <code>.card</code> and correctly closing <code>&lt;/div&gt;</code> statements. </p>\n\n<ol>\n<li>Remove <code>{% if forloop.first %}&lt;div class=\"row\"&gt;{% endif %}</code> statement and place <code>&lt;div class=\"row\"&gt;</code> above the for loop.</li>\n<li><code>Add to cart</code> and <code>Out of stock</code> buttons should be placed inside <code>.card-footer</code> and <code>.card-body</code> should be closed appropriately. This will leave the image and description within <code>.card-body</code> </li>\n<li>Make sure <code>h-100</code> class is added to `.card'.</li>\n</ol>\n\n<p>Might I suggest adding <code>end of div</code> comments to all the div statements. The code is readable better in this way and helps in mitigating missing or misplaced <code>&lt;/div&gt;</code> statements.</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>{% extends 'base.html' %} \n{% block content %}\n    &lt;div class=\"container-fluid\"&gt;\n       &lt;div class=\"jumbotron\"&gt;\n        &lt;h2&gt;Welcome to MyTea&lt;/h4&gt;\n        &lt;p&gt;Here we have teas of all varieties from all around the globe&lt;/p&gt;\n    &lt;/div&gt;\n    &lt;!-- .jumbotron --&gt;\n    &lt;div class=\"row\"&gt;\n      &lt;div class=\"col-sm-3\"&gt;\n        &lt;h4&gt;Categories&lt;/h4&gt;\n        &lt;ul class=\"list-group\"&gt;\n          &lt;a href=\"{% url 'products' %}\" class=\"list-group-item\"&gt;All Categories&lt;/a&gt; \n          {% for c in countcat %}\n              &lt;a href=\"{{ c.get_absolute_url }}\" class=\"list-group-item catheight\"&gt;{{c.name}}\n                  &lt;span class=\"badge badge-light\"&gt;{{c.num_products}}&lt;/span&gt;\n              &lt;/a&gt; \n          {% endfor %}\n        &lt;/ul&gt;\n      &lt;/div&gt;\n      &lt;!-- .col-sm-3 --&gt;\n      &lt;div class=\"col-sm-9\"&gt;\n        &lt;div class=\"row\"&gt;\n          {% for product in products %}\n            &lt;div class=\"col-sm-6\"&gt;\n              &lt;div class=\"card border-primary mt-3 h-100\"&gt;\n                &lt;div class=\"card-header\"&gt;\n                  &lt;h3&gt;{{product.name}}&lt;/h3&gt;\n                &lt;/div&gt;\n                &lt;!-- .card-header --&gt;\n                &lt;div class=\"card-body\"&gt;\n                  {% if product.image %}\n                    &lt;div class=\"h\"&gt;\n                      &lt;img src=\"{{product.image.url}}\" class=\"img-fluid\"&gt;\n                    &lt;/div&gt;\n                    &lt;!-- .h --&gt;\n                  {% endif %}\n                  &lt;p class=\"bg-light font-weight-light \"&gt;{{product.description}}&lt;/p&gt;\n                &lt;/div&gt;\n                &lt;!-- .card-body --&gt;\n                &lt;div class=\"card-footer\"&gt;\n                  {% if product.stock &gt; 0 %}\n                    &lt;a href=\"{% url 'add_cart' product.id %}\" type=\"button\" class=\"btn btn-primary btn-sm mb-2\"&gt;\n                      &lt;p class=\"m-0\"&gt;Add to cart&lt;/p&gt;\n                    &lt;/a&gt;\n                  {% else %}\n                    &lt;a href=\"#\" type=\"button \" class=\"btn btn-danger btn-sm mb-2\"&gt;\n                      &lt;p class=\"m-0\"&gt;Out of stock&lt;/p&gt;\n                    &lt;/a&gt;\n                  {% endif %}\n                  &lt;p&gt;Price: &amp;euro;{{product.price}}&lt;/p&gt;\n                  &lt;p&gt;Stock left: {{product.stock}}&lt;/p&gt;\n                &lt;/div&gt;\n                &lt;!-- .card-footer --&gt;\n              &lt;/div&gt;\n              &lt;!-- .card --&gt;\n            &lt;/div&gt;\n            &lt;!-- . col-sm-6 --&gt;\n          {% endfor %}\n        &lt;/div&gt;\n        &lt;!-- .row --&gt;\n      &lt;/div&gt;\n      &lt;!-- .col-sm-9 --&gt;\n    &lt;/div&gt;\n    &lt;!-- .row --&gt;\n  &lt;/div&gt;\n  &lt;!-- .container-fluid --&gt;\n{% endblock content %}\n</code></pre>\n\n\n"}], "owner": {"reputation": 105, "user_id": 11033122, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/f3KxG.png?s=128&g=1", "display_name": "L. McA", "link": "https://stackoverflow.com/users/11033122/l-mca"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 356, "favorite_count": 0, "accepted_answer_id": 58648202, "answer_count": 1, "score": 1, "last_activity_date": 1572541902, "creation_date": 1572478683, "last_edit_date": 1572486271, "question_id": 58635049, "link": "https://stackoverflow.com/questions/58635049/django-bootstrap-4-how-to-align-elements-inside-of-multiple-parent-divs", "title": "Django/Bootstrap 4: How to align elements inside of multiple parent divs", "body": "<p>So I am developing a website and for the life of me I can't figure out how to align the description, price, stock and add cart button in multiple versions of the same <code>&lt;div&gt;</code>. I know it is to do with the size of the image I am using but I'm not sure how to fix this. </p>\n\n<p>Here is a diagram of how I want it to look: </p>\n\n<p><a href=\"https://i.stack.imgur.com/EMn1B.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/EMn1B.png\" alt=\"enter image description here\"></a></p>\n\n<hr>\n\n<p>But when I apply a <code>'h-100'</code> class to the card <code>&lt;div&gt;</code> this is what happens:</p>\n\n<p><a href=\"https://i.stack.imgur.com/oDpIn.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/oDpIn.png\" alt=\"enter image description here\"></a></p>\n\n<p>I want the images to keep their positions but for the descriptions, add cart button and price/stock to all be horizontally aligned, as well as the height of the overall cards to be the same.</p>\n\n<p>Here is my Django template code:</p>\n\n<pre><code>{% extends 'base.html' %}\n{% block content %}\n\n&lt;div class=\"container-fluid\"&gt;\n    &lt;div class=\"jumbotron\"&gt;\n        &lt;h2&gt;Welcome to MyTea&lt;/h4&gt;\n        &lt;p&gt;Here we have teas of all varieties from all around the globe&lt;/p&gt;\n    &lt;/div&gt;\n    &lt;div class=\"row\"&gt;\n        &lt;div class=\"col-sm-3\"&gt;\n            &lt;h4&gt;Categories&lt;/h4&gt;\n            &lt;ul class=\"list-group\"&gt;\n                &lt;a href=\"{% url 'products' %}\" class=\"list-group-item\"&gt;All Categories&lt;/a&gt;\n                {% for c in countcat %}\n                    &lt;a href=\"{{ c.get_absolute_url }}\" class=\"list-group-item catheight\"&gt;{{c.name}}\n                        &lt;span class=\"badge badge-light\"&gt;{{c.num_products}}&lt;/span&gt;\n                    &lt;/a&gt;\n                {% endfor %}\n            &lt;/ul&gt;\n        &lt;/div&gt;\n        &lt;div class=\"col-sm-9\"&gt;\n        {% for product in products %}\n        {% if forloop.first %}&lt;div class=\"row\"&gt;{% endif %}\n                &lt;div class=\"col-sm-6\"&gt;\n                    &lt;div class=\"card border-primary mt-3 h-100\"&gt;\n                        &lt;div class=\"card-header\"&gt;&lt;h3&gt;{{product.name}}&lt;/h3&gt;&lt;/div&gt;\n                        &lt;div class=\"card-body\"&gt;\n                            {% if product.image %}\n                            &lt;div class=\"h\"&gt;\n                                &lt;img src=\"{{product.image.url}}\" class=\"img-fluid\"&gt;\n                            &lt;/div&gt;\n                            {% endif %}\n                            &lt;p class=\"bg-light font-weight-light \"&gt;{{product.description}}&lt;/p&gt;\n\n                            {% if product.stock &gt; 0 %}\n                            &lt;a href=\"{% url 'add_cart' product.id %}\" type=\"button\" class=\"btn btn-primary btn-sm mb-2\"&gt;\n                                &lt;p class=\"m-0\"&gt;Add to cart&lt;/p&gt;\n                            &lt;/a&gt;\n                            {% else %}\n                            &lt;a href=\"#\" type=\"button \"class=\"btn btn-danger btn-sm mb-2\"&gt;\n                                &lt;p class=\"m-0\"&gt;Out of stock&lt;/p&gt;\n                            &lt;/a&gt;\n                            {% endif %}\n                            &lt;div class=\"card-footer\"&gt;\n                                &lt;p&gt;Price: &amp;euro;{{product.price}}&lt;/p&gt;\n                                &lt;p&gt;Stock left: {{product.stock}}&lt;/p&gt;\n                            &lt;/div&gt;\n                        &lt;/div&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n        {% endfor %}\n        &lt;/div&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n{% endblock content %}\n\n</code></pre>\n\n<p>Thanks for any help</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1572480986, "post_id": 58635031, "comment_id": 103577427, "body": "Please be specific with your problem.  &quot;I have tried a lot&quot; implies that you have code to post, with actual and expected results.  Please do so.  See <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal, reproducible example</a>.  Your current posting doesn&#39;t tell us whether you&#39;re having trouble reading from a file (should be a direct browser search), parsing the input into blocks and integers (post your attempt), or sorting the list (another direct lookup)."}], "answers": [{"comments": [{"owner": {"reputation": 1353, "user_id": 11914067, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kxxVU.png?s=128&g=1", "display_name": "Rithin Chalumuri", "link": "https://stackoverflow.com/users/11914067/rithin-chalumuri"}, "edited": false, "score": 0, "creation_date": 1572481609, "post_id": 58635258, "comment_id": 103577540, "body": "You would also need to add <code>tuple</code> to the sort key. <code>sorted(s.splitlines(), key=lambda l: tuple(map(int, l.split())))</code>"}, {"owner": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "reply_to_user": {"reputation": 1353, "user_id": 11914067, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kxxVU.png?s=128&g=1", "display_name": "Rithin Chalumuri", "link": "https://stackoverflow.com/users/11914067/rithin-chalumuri"}, "edited": false, "score": 0, "creation_date": 1572482580, "post_id": 58635258, "comment_id": 103577747, "body": "@RithinChalumuri: No, Python can sort lists as will as tuples. Try it!"}, {"owner": {"reputation": 1353, "user_id": 11914067, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kxxVU.png?s=128&g=1", "display_name": "Rithin Chalumuri", "link": "https://stackoverflow.com/users/11914067/rithin-chalumuri"}, "edited": false, "score": 0, "creation_date": 1572482792, "post_id": 58635258, "comment_id": 103577793, "body": "yes python can sort lists/tuples. But, your lambda function is returning a map object and <b>neither</b> a list or tuple. Running the code results in the following error. <code>TypeError: unorderable types: map() &lt; map()</code>."}, {"owner": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "reply_to_user": {"reputation": 1353, "user_id": 11914067, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kxxVU.png?s=128&g=1", "display_name": "Rithin Chalumuri", "link": "https://stackoverflow.com/users/11914067/rithin-chalumuri"}, "edited": false, "score": 0, "creation_date": 1572482852, "post_id": 58635258, "comment_id": 103577801, "body": "@RithinChalumuri: Fair point for Python 3. Python 2 works as is (and it was tagged Python 2...) I will add that..."}, {"owner": {"reputation": 1, "user_id": 12300254, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b431502ada2d86f2433fe3c32c7abdf8?s=128&d=identicon&r=PG&f=1", "display_name": "Sunny", "link": "https://stackoverflow.com/users/12300254/sunny"}, "edited": false, "score": 0, "creation_date": 1572525471, "post_id": 58635258, "comment_id": 103592313, "body": "@dawg: Dear thanks alot for your kind and valuable help, your code helped me and  the problem is solved and also thanks to Rithin Chalumuri for your valuable suggestion."}], "tags": [], "owner": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "is_accepted": false, "score": 1, "last_activity_date": 1572482946, "last_edit_date": 1572482946, "creation_date": 1572480421, "answer_id": 58635258, "question_id": 58635031, "link": "https://stackoverflow.com/questions/58635031/how-to-sort-rows-on-basis-of-a-specific-column-in-a-text-file-in-python/58635258#58635258", "title": "How to sort rows on basis of a specific column in a text file in python", "body": "<p>You can use a regex to find the blocks in the text:</p>\n\n<pre><code>import re \n\nwith open(your_file, r) as f:\n    blocks=re.findall(r'^(Section.*)\\n([\\s\\S]*?(?=^Section|\\Z))', f.read(), flags=re.M)\n</code></pre>\n\n<p><a href=\"https://regex101.com/r/Q0Cbmf/1/\" rel=\"nofollow noreferrer\">Demo of the regex</a></p>\n\n<p>Then sort the blocks and print:</p>\n\n<pre><code>for h,s in blocks:\n    print h\n    print '\\n'.join(sorted(s.splitlines(), key=lambda l:tuple(map(int,l.split()))))\n</code></pre>\n\n<p>That assumes you want to sort both by the first digit and the second so that <code>1  4</code> comes after <code>1  3</code>. If you want to only sort by the first digit and not change the order of the lines based on the second digit, then you would do:</p>\n\n<pre><code>for h,s in blocks:\n    print h\n    print '\\n'.join(sorted(s.splitlines(), key=lambda l:int(l.split()[0])))\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 12300254, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b431502ada2d86f2433fe3c32c7abdf8?s=128&d=identicon&r=PG&f=1", "display_name": "Sunny", "link": "https://stackoverflow.com/users/12300254/sunny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1572482946, "creation_date": 1572478516, "last_edit_date": 1572478689, "question_id": 58635031, "link": "https://stackoverflow.com/questions/58635031/how-to-sort-rows-on-basis-of-a-specific-column-in-a-text-file-in-python", "title": "How to sort rows on basis of a specific column in a text file in python", "body": "<p>I am trying to sort data from a text file on basis of specific column section wise but I am not getting any solution. The data format is like below:</p>\n\n<pre><code>Section-1:\n0  2\n5  3\n3  0\n0  5\n3  5\nSection-2:\n1  4\n3  2\n1  3\n0  11\nSection-3:\n12  8\n0   6\n3   0\n12  0\n0   3\n....\n</code></pre>\n\n<p>Now I want to apply sort on column-1 in each section, I have tried it lot but not getting any solution. If someone help me I will be really thankful.</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["python", "opencv", "object-detection", "ros", "yolo"], "comments": [{"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1572504567, "post_id": 58635017, "comment_id": 103582377, "body": "opencv allows to use subimages, but regarding a triangle (or other polygon) is handles best by postprocessing the detected objects. If want a speedup and you can ignore bigger image parts, you can use subimages and reducr the grid size in yolo v3"}, {"owner": {"reputation": 2682, "user_id": 7602551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e81b7fabc768e5360e25c5875f757883?s=128&d=identicon&r=PG&f=1", "display_name": "unlut", "link": "https://stackoverflow.com/users/7602551/unlut"}, "edited": false, "score": 0, "creation_date": 1572508744, "post_id": 58635017, "comment_id": 103583836, "body": "Unless performance really is a problem, build a new node rather than changing source."}, {"owner": {"reputation": 2682, "user_id": 7602551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e81b7fabc768e5360e25c5875f757883?s=128&d=identicon&r=PG&f=1", "display_name": "unlut", "link": "https://stackoverflow.com/users/7602551/unlut"}, "edited": false, "score": 0, "creation_date": 1572510300, "post_id": 58635017, "comment_id": 103584439, "body": "By performance I mean if you need callbacks to arrive faster."}, {"owner": {"reputation": 305, "user_id": 11968594, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AwONH.png?s=128&g=1", "display_name": "PayamB.", "link": "https://stackoverflow.com/users/11968594/payamb"}, "edited": false, "score": 0, "creation_date": 1590100140, "post_id": 58635017, "comment_id": 109560710, "body": "this will never be a good idea but what if you use two models ? one to detect the area and then detect the objects in that area with the yolo ?!"}], "owner": {"reputation": 11, "user_id": 12300277, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac75938ea86e7c3569922b45030d2c9b?s=128&d=identicon&r=PG&f=1", "display_name": "PeaTiger", "link": "https://stackoverflow.com/users/12300277/peatiger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 351, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1572478393, "creation_date": 1572478393, "question_id": 58635017, "link": "https://stackoverflow.com/questions/58635017/how-to-select-only-certain-area-for-object-detection-in-yolo-using-ros-package", "title": "How to select only certain area for object detection in YOLO? (using ROS package)", "body": "<p>I need to count only objects in certain region on the image feed - the area is in a shape of a triangle. I am using darknet ROS package for object detection. \nI see two ways - either 1. filter the detection area or 2. based on the resulting bounding boxes only count if in valid region.</p>\n\n<p>Since I am using a ROS package (if anyone is familiar with ROS), should I build a new node or change the original source?</p>\n"}, {"tags": ["python", "docstring"], "answers": [{"comments": [{"owner": {"reputation": 400, "user_id": 10982177, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5efbbab68414d486bf5f8c65eb10ca30?s=128&d=identicon&r=PG&f=1", "display_name": "Alex.Kh", "link": "https://stackoverflow.com/users/10982177/alex-kh"}, "edited": false, "score": 1, "creation_date": 1572479579, "post_id": 58635065, "comment_id": 103577117, "body": "Thanks, I just wanted to be 100% sure about that."}], "tags": [], "owner": {"reputation": 18268, "user_id": 5218354, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh4.googleusercontent.com/-NEO9rZKeffY/AAAAAAAAAAI/AAAAAAAAAKc/9IttO1jUOr4/photo.jpg=k-s128", "display_name": "norok2", "link": "https://stackoverflow.com/users/5218354/norok2"}, "is_accepted": true, "score": 2, "last_activity_date": 1572479607, "last_edit_date": 1572479607, "creation_date": 1572478844, "answer_id": 58635065, "question_id": 58635016, "link": "https://stackoverflow.com/questions/58635016/should-docstring-contain-a-raises-statement-if-the-error-is-handled-in-the-cod/58635065#58635065", "title": "Should Docstring contain a &#39;Raises&#39; statement if the error is handled in the code", "body": "<p>You should document the exception raised explicitly, as well as those that may be relevant to the interface, as per the <a href=\"https://google.github.io/styleguide/pyguide.html#doc-function-raises\" rel=\"nofollow noreferrer\">Google Style Guidelines</a> (the same document you mention yourself).</p>\n\n<p>This code does not raise an exception explicitly (there is no <code>raise</code>), and you do not need to mention that you are catching one.\nActually, this code cannot even accidentally raise one (you are catching the only line that could) and therefore it would be misleading if you were to document that the <code>if_a_float()</code> was raising a <code>ValueError</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": false, "score": 2, "last_activity_date": 1572478931, "creation_date": 1572478931, "answer_id": 58635079, "question_id": 58635016, "link": "https://stackoverflow.com/questions/58635016/should-docstring-contain-a-raises-statement-if-the-error-is-handled-in-the-cod/58635079#58635079", "title": "Should Docstring contain a &#39;Raises&#39; statement if the error is handled in the code", "body": "<p>You should only document the exceptions that callers need to be aware of and may want to catch. If the function catches an exception itself and doesn't raise it to the caller, it's an internal implementation detail that callers don't need to be aware of, so it doesn't need to be documented.</p>\n"}], "owner": {"reputation": 400, "user_id": 10982177, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5efbbab68414d486bf5f8c65eb10ca30?s=128&d=identicon&r=PG&f=1", "display_name": "Alex.Kh", "link": "https://stackoverflow.com/users/10982177/alex-kh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 58635065, "answer_count": 2, "score": 0, "last_activity_date": 1572479607, "creation_date": 1572478391, "question_id": 58635016, "link": "https://stackoverflow.com/questions/58635016/should-docstring-contain-a-raises-statement-if-the-error-is-handled-in-the-cod", "title": "Should Docstring contain a &#39;Raises&#39; statement if the error is handled in the code", "body": "<p>Suppose I have a simple function. For example:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def if_a_float(string):\n   try:\n       float(string)\n   except ValueError:\n       return False\n   else:\n       return True\n</code></pre>\n\n<p>Should I include the <code>Raises: ValueError</code> statement into my docstring or should I avoid it as the error was already handled in the code? Is it done for any error (caught/uncaught)? I do understand that it probably depends on the style, so let's say I am using the <a href=\"http://google.github.io/styleguide/pyguide.html,\" rel=\"nofollow noreferrer\" title=\"Google Python Style Guide\">Google Docstring style</a>(though I guess it doesn't matter that much)</p>\n"}, {"tags": ["python", "random"], "comments": [{"owner": {"reputation": 110, "user_id": 10511473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a08bbde42673f83d35a60a62b9d2ceb?s=128&d=identicon&r=PG&f=1", "display_name": "ooi18", "link": "https://stackoverflow.com/users/10511473/ooi18"}, "edited": false, "score": 0, "creation_date": 1572479112, "post_id": 58635003, "comment_id": 103577016, "body": "Have you tried the random() method? <a href=\"https://docs.python.org/2/library/random.html\" rel=\"nofollow noreferrer\">docs.python.org/2/library/random.html</a>"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 12300302, "user_type": "registered", "profile_image": "https://graph.facebook.com/577059656370169/picture?type=large", "display_name": "Jeff Ken", "link": "https://stackoverflow.com/users/12300302/jeff-ken"}, "edited": false, "score": 0, "creation_date": 1572546836, "post_id": 58635735, "comment_id": 103603474, "body": "How can I change so that every letter in the alphabet is interpreted as a variable to equal the number. Also I don&#39;t really understand how &#39;zip&#39; function works can you explain that because I&#39;m a bit of a noob. Thanks."}, {"owner": {"reputation": 18299, "user_id": 2648811, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/ee5af60b10a2d5fd8c864437a2062f0a?s=128&d=identicon&r=PG", "display_name": "Green Cloak Guy", "link": "https://stackoverflow.com/users/2648811/green-cloak-guy"}, "reply_to_user": {"reputation": 11, "user_id": 12300302, "user_type": "registered", "profile_image": "https://graph.facebook.com/577059656370169/picture?type=large", "display_name": "Jeff Ken", "link": "https://stackoverflow.com/users/12300302/jeff-ken"}, "edited": false, "score": 0, "creation_date": 1572550897, "post_id": 58635735, "comment_id": 103605252, "body": "<code>zip()</code> takes several iterables, and &#39;zips&#39; them together into one iterable with corresponding elements (try opening a python console and doing <code>help(zip)</code>. To add them all as actual variable names and values in the local namespace, you could do <code>locals().update(correspondence)</code>. To add them throughout the entire program, <code>globals().update(correspondence)</code> instead (similarly, try opening a python console and doing <code>help(locals)</code> and <code>help(globals)</code> to understand what happens here). You might just want to make <code>correspondence</code> a <code>dict</code>, though - just do <code>dict(correspondence)</code>."}, {"owner": {"reputation": 11, "user_id": 12300302, "user_type": "registered", "profile_image": "https://graph.facebook.com/577059656370169/picture?type=large", "display_name": "Jeff Ken", "link": "https://stackoverflow.com/users/12300302/jeff-ken"}, "edited": false, "score": 0, "creation_date": 1572559945, "post_id": 58635735, "comment_id": 103608265, "body": "Not to be rude but I didn&#39;t really understand anything you said but I found a solution by myself already so it&#39;s fine. thanks for trying to explain though."}], "tags": [], "owner": {"reputation": 18299, "user_id": 2648811, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/ee5af60b10a2d5fd8c864437a2062f0a?s=128&d=identicon&r=PG", "display_name": "Green Cloak Guy", "link": "https://stackoverflow.com/users/2648811/green-cloak-guy"}, "is_accepted": false, "score": 2, "last_activity_date": 1572484980, "creation_date": 1572484980, "answer_id": 58635735, "question_id": 58635003, "link": "https://stackoverflow.com/questions/58635003/python-random-unique-value-for-multiple-variables/58635735#58635735", "title": "Python random unique value for multiple variables", "body": "<p>Use <code>random.sample()</code>, which can take any number of unique elements from a given interval. If you take the entire iterable using it, then you get elements in an effectively random order. For example, the following snippet maps the letters in the alphabet to random numbers <code>1</code> through <code>26</code>, without repeating any.</p>\n\n<pre><code>import random\n\nalphabet = 'abcdefghijklmnopqrstuvwxyz'\nnumbers = range(1, len(alphabet) + 1)\ncorrespondence = list(zip(alphabet, random.sample(numbers, len(alphabet))))\nprint(correspondence)\n# [('a', 21), ('b', 19), ('c', 2),  ('d', 14), ('e', 12), ('f', 3), \n#  ('g', 8),  ('h', 11), ('i', 10), ('j', 4),  ('k', 5),  ('l', 22), \n#  ('m', 18), ('n', 20), ('o', 16), ('p', 23), ('q', 1),  ('r', 25), \n#  ('s', 9),  ('t', 15), ('u', 26), ('v', 7),  ('w', 17), ('x', 24), \n#  ('y', 6),  ('z', 13)]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1353, "user_id": 11914067, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kxxVU.png?s=128&g=1", "display_name": "Rithin Chalumuri", "link": "https://stackoverflow.com/users/11914067/rithin-chalumuri"}, "is_accepted": false, "score": 1, "last_activity_date": 1572485855, "last_edit_date": 1572485855, "creation_date": 1572485218, "answer_id": 58635761, "question_id": 58635003, "link": "https://stackoverflow.com/questions/58635003/python-random-unique-value-for-multiple-variables/58635761#58635761", "title": "Python random unique value for multiple variables", "body": "<p>You can use <code>random.shuffle()</code> (<a href=\"https://docs.python.org/3/library/random.html#random.shuffle\" rel=\"nofollow noreferrer\">docs</a>) and <code>chr()</code> (<a href=\"https://docs.python.org/3/library/functions.html#chr\" rel=\"nofollow noreferrer\">docs</a>) to get your desired outputs. </p>\n\n<p><a href=\"https://roubaixinteractive.com/PlayGround/Binary_Conversion/The_Characters.asp\" rel=\"nofollow noreferrer\">ASCII</a> lower alphabet characters start from 97.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import random\n\nnumbers = list(range(1,27))\n\nrandom.shuffle(numbers)\n\nfor num in numbers:\n  print(f'Letter={chr(96+num)}, Random Number={num}')\n</code></pre>\n\n<p>Outputs:</p>\n\n<pre><code>Letter=v, Random Number=22\nLetter=t, Random Number=20\nLetter=u, Random Number=21\nLetter=w, Random Number=23\nLetter=f, Random Number=6\nLetter=b, Random Number=2\nLetter=d, Random Number=4\nLetter=h, Random Number=8\nLetter=z, Random Number=26\n.\n.\n.\n.\n</code></pre>\n\n<hr>\n\n<p>You can also use <code>random.sample()</code>. More info <a href=\"https://docs.python.org/3/library/random.html#random.sample\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>One liner:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>result = [(chr(96+num), num) for num in random.sample(list(range(1,27)), 26)]\n</code></pre>\n\n<p>Outputs:</p>\n\n<pre><code>[('p', 16), ('x', 24), ('d', 4), ('f', 6), ('w', 23), ('z', 26), ('m', 13), ('n', 14), ('b', 2), ('a', 1), ('s', 19), ('q', 17), ('t', 20), ('u', 21), ('h', 8), ('l', 12), ('e', 5), ('k', 11), ('g', 7), ('c', 3), ('v', 22), ('r', 18), ('j', 10), ('i', 9), ('o', 15), ('y', 25)]\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 12300302, "user_type": "registered", "profile_image": "https://graph.facebook.com/577059656370169/picture?type=large", "display_name": "Jeff Ken", "link": "https://stackoverflow.com/users/12300302/jeff-ken"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1572560862, "creation_date": 1572478304, "last_edit_date": 1572560862, "question_id": 58635003, "link": "https://stackoverflow.com/questions/58635003/python-random-unique-value-for-multiple-variables", "title": "Python random unique value for multiple variables", "body": "<p>The issue I'm having is that I need to set letters a-z a random unique value from 1 to 26. The same number equalling multiple letters is what I want to avoid. Current methods I have is over 70 lines and is just while loops of each letter to not equal the value given previously for a different letter. Any ideas? </p>\n"}, {"tags": ["python", "scrapy", "web-crawler"], "answers": [{"tags": [], "owner": {"reputation": 311, "user_id": 268436, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/bef6efff17e7554c33c7026672454b98?s=128&d=identicon&r=PG", "display_name": "StefWill", "link": "https://stackoverflow.com/users/268436/stefwill"}, "is_accepted": false, "score": 0, "last_activity_date": 1572484114, "creation_date": 1572484114, "answer_id": 58635653, "question_id": 58634996, "link": "https://stackoverflow.com/questions/58634996/scrapy-crawler-to-return-only-url-and-referrer-when-crawling/58635653#58635653", "title": "Scrapy crawler to return only URL and Referrer when crawling", "body": "<p>While this isn't 100% correct this is a great start.</p>\n\n<pre><code>    def parse(self, response):\n    filename = \"output.tsv\"\n    # follow all links\n    for href in response.css('a::attr(href)'):            \n        yield response.follow(href, self.parse)\n        with open(filename, 'a') as f:\n            links = response.css('a::attr(href)').getall()\n            referer = response.request.headers.get('Referer', None)\n            for item in links:\n                f.write(\"{0}\\t{1}\\n\".format(item, referer))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 559, "user_id": 9961622, "user_type": "registered", "profile_image": "https://graph.facebook.com/1241157752688103/picture?type=large", "display_name": "Ikram Khan Niazi", "link": "https://stackoverflow.com/users/9961622/ikram-khan-niazi"}, "is_accepted": true, "score": 0, "last_activity_date": 1572525554, "creation_date": 1572525554, "answer_id": 58643539, "question_id": 58634996, "link": "https://stackoverflow.com/questions/58634996/scrapy-crawler-to-return-only-url-and-referrer-when-crawling/58643539#58643539", "title": "Scrapy crawler to return only URL and Referrer when crawling", "body": "<p>You can get both urls simply in parse.</p>\n\n<p><code>referer = response.request.headers.get('Referer')</code>\n<code>original_url = response.url</code></p>\n\n<p><code>yield {'referer': referer, 'url': original_url}</code></p>\n\n<p>You can write the output to file using </p>\n\n<p><code>scrapy crawl spider_name -o bettybarclay.json</code></p>\n"}], "owner": {"reputation": 311, "user_id": 268436, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/bef6efff17e7554c33c7026672454b98?s=128&d=identicon&r=PG", "display_name": "StefWill", "link": "https://stackoverflow.com/users/268436/stefwill"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 228, "favorite_count": 0, "accepted_answer_id": 58643539, "answer_count": 2, "score": 0, "last_activity_date": 1572556058, "creation_date": 1572478241, "last_edit_date": 1572556058, "question_id": 58634996, "link": "https://stackoverflow.com/questions/58634996/scrapy-crawler-to-return-only-url-and-referrer-when-crawling", "title": "Scrapy crawler to return only URL and Referrer when crawling", "body": "<p>I'm VERY new to scrapy, just found it yesterday and only basic python experience.</p>\n\n<p>I have a group of sub-domains (around 200) that I need to map, every internal and external link. </p>\n\n<p>I'm just not understanding the output side of things I think.</p>\n\n<p>This is what I have so far.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import scrapy\n\nclass LinkSpider(scrapy.Spider):\n    name = 'links'\n\n    allowed_domains = ['example.com']\n    start_urls = ['https://www.example.com/']\n\n    def parse(self, response):\n        # follow all links\n        for href in response.css('a::attr(href)'):\n            yield response.follow(href, self.parse)\n</code></pre>\n\n<p>it outputs to the terminal like so:</p>\n\n<pre><code>DEBUG: Crawled (200) &lt;GET http://www.example.com/&gt; (referer: None)\nDEBUG: Crawled (200) &lt;GET http://www.example.com/aaa/A-content-page&gt; (referer: http://www.example.com/)\nDEBUG: Crawled (200) &lt;GET http://aaa.example.com/bbb/something/&gt; (referer: http://www.example.com/)\n</code></pre>\n\n<p>What I'm after is a CSV or TSV</p>\n\n<pre><code>URL                                         Referer\nhttp://www.example.com/                     None\nhttp://www.example.com/aaa/A-content-page   http://www.example.com/\nhttp://aaa.example.com/bbb/something/       http://www.example.com/\nhttp://aaa.example.com/bbb/another/         http://aaa.example.com/bbb/something/\n</code></pre>\n\n<p>Any assistance is appreciated but would prefer a referral to docs than straight solution.</p>\n\n<p>This is the solution I came up with.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>    def parse(self, response):\n        filename = \"output.tsv\"\n        f = open(filename, 'w')\n        f.write(\"URL\\tLink\\tReferer\\n\")\n        f.close()\n        # follow all links\n        for href in response.css('a::attr(href)'):            \n            yield response.follow(href, self.parse)\n            with open(filename, 'a') as f:\n                url = response.url\n                links = response.css('a::attr(href)').getall()\n                referer = response.request.headers.get('referer', None).decode('utf-8')\n                for item in links:\n                    f.write(\"{0}\\t{1}\\t{2}\\n\".format(url, item, referer))\n\n        f.close()\n</code></pre>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 12906, "user_id": 6849682, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/dVNqQ.png?s=128&g=1", "display_name": "bigbounty", "link": "https://stackoverflow.com/users/6849682/bigbounty"}, "edited": false, "score": 0, "creation_date": 1572477518, "post_id": 58634851, "comment_id": 103576643, "body": "<code>datetime.datetime.today().weekday()</code> should do the job. But Monday is 0 and Sunday is 6. So, you need to add one"}], "answers": [{"comments": [{"owner": {"reputation": 1837, "user_id": 11901732, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RiNDt.jpg?s=128&g=1", "display_name": "nilsinelabore", "link": "https://stackoverflow.com/users/11901732/nilsinelabore"}, "edited": false, "score": 0, "creation_date": 1572478088, "post_id": 58634916, "comment_id": 103576782, "body": "How come it returned <code>SyntaxError: unexpected EOF while parsing</code>? What does it mean?"}, {"owner": {"reputation": 22982, "user_id": 10189214, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oTTBaX3HSZQ/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7ohHVatc4khqXgYvNrBM40bMFj71Q/mo/photo.jpg?sz=128", "display_name": "Andy L.", "link": "https://stackoverflow.com/users/10189214/andy-l"}, "reply_to_user": {"reputation": 1837, "user_id": 11901732, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RiNDt.jpg?s=128&g=1", "display_name": "nilsinelabore", "link": "https://stackoverflow.com/users/11901732/nilsinelabore"}, "edited": false, "score": 0, "creation_date": 1572478387, "post_id": 58634916, "comment_id": 103576857, "body": "@nilsinelabore: some values in your <code>year</code>, <code>month</code>, <code>day</code> are invalid. I added <code>coerce</code> to ignore them. See my updated answer."}], "tags": [], "owner": {"reputation": 22982, "user_id": 10189214, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oTTBaX3HSZQ/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7ohHVatc4khqXgYvNrBM40bMFj71Q/mo/photo.jpg?sz=128", "display_name": "Andy L.", "link": "https://stackoverflow.com/users/10189214/andy-l"}, "is_accepted": true, "score": 0, "last_activity_date": 1572478266, "last_edit_date": 1572478266, "creation_date": 1572477674, "answer_id": 58634916, "question_id": 58634851, "link": "https://stackoverflow.com/questions/58634851/adding-day-of-the-week-column-according-to-multiple-columns-in-python/58634916#58634916", "title": "Adding day of the week column according to multiple columns in python", "body": "<p>Use <code>pd.to_datetime</code> and <code>.dt.dayofweek</code> attribute and plus <code>1</code></p>\n\n<pre><code>df['day_of_week'] = pd.to_datetime(df[['year', 'month', 'day']], \n                                   errors='coerce').dt.dayofweek + 1\n\nOut[410]:\n   year  month  day     A     B    C     D  day_of_week\n0  2019      1    1  26.2  20.2  0.0  32.4            2\n1  2019      1    2  22.9  20.3  0.0  10.0            3\n2  2019      1    3  24.8  18.4  0.0  28.8            4\n3  2019      1    4  26.6  18.3  0.0  33.5            5\n4  2019      1    5  28.3  20.9  0.0  33.4            6\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 74, "user_id": 11842941, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38bd68a544ce3cb7f0f9242b53956485?s=128&d=identicon&r=PG&f=1", "display_name": "Samarth", "link": "https://stackoverflow.com/users/11842941/samarth"}, "is_accepted": false, "score": 0, "last_activity_date": 1572478217, "last_edit_date": 1572478217, "creation_date": 1572477851, "answer_id": 58634943, "question_id": 58634851, "link": "https://stackoverflow.com/questions/58634851/adding-day-of-the-week-column-according-to-multiple-columns-in-python/58634943#58634943", "title": "Adding day of the week column according to multiple columns in python", "body": "<p>If you also want the day name, you can make use of <code>calendar</code>.</p>\n\n<pre><code>import datetime\nimport calendar\n\ndef findDay(date):\n    day_number = datetime.datetime.strptime(date, '%d %m %Y').weekday() + 1\n    day_name = calendar.day_name[day_number-1]\n    return (day_number, day_name)\n</code></pre>\n\n<p>You can generate a date in <code>str</code> format using something like this <code>date = f'{day} {month} {year}'</code> from the <code>year, month, day</code> columns. </p>\n\n<p>Then all you have to do is apply the function above on the new date column. The function will return a tuple with the day number of the week as well as the day name. </p>\n"}], "owner": {"reputation": 1837, "user_id": 11901732, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RiNDt.jpg?s=128&g=1", "display_name": "nilsinelabore", "link": "https://stackoverflow.com/users/11901732/nilsinelabore"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 58634916, "answer_count": 2, "score": 0, "last_activity_date": 1572478266, "creation_date": 1572477189, "question_id": 58634851, "link": "https://stackoverflow.com/questions/58634851/adding-day-of-the-week-column-according-to-multiple-columns-in-python", "title": "Adding day of the week column according to multiple columns in python", "body": "<p>How to add the <code>day_of_week</code> column(the day of the week, eg. 1 = Mon, 2 = Tue) to <code>df1</code> according to the <code>year</code>,<code>month</code>,<code>day</code> values as shown below:</p>\n\n<pre><code>    year month day  A       B       C   D       day_of_week\n0   2019    1   1   26.2    20.2    0.0 32.4        2\n1   2019    1   2   22.9    20.3    0.0 10.0        3\n2   2019    1   3   24.8    18.4    0.0 28.8        4\n3   2019    1   4   26.6    18.3    0.0 33.5        5\n4   2019    1   5   28.3    20.9    0.0 33.4        6\n</code></pre>\n"}, {"tags": ["python", "django", "orm"], "comments": [{"owner": {"reputation": 1834, "user_id": 11225821, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-O91lQO_cGpI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reto2vddsx__HsnQU8BRgt2TGt8iQ/mo/photo.jpg?sz=128", "display_name": "Linh Nguyen", "link": "https://stackoverflow.com/users/11225821/linh-nguyen"}, "edited": false, "score": 1, "creation_date": 1572487150, "post_id": 58634847, "comment_id": 103578665, "body": "have you tried anything ? you basically have a view count field in your Article object anyway, you can do query to filter by hour/day/week/month, if you want to change data every intervals then it&#39;s called <a href=\"https://medium.com/@kevin.michael.horan/scheduling-tasks-in-django-with-the-advanced-python-scheduler-663f17e868e6\" rel=\"nofollow noreferrer\">scheduling tasks</a>"}, {"owner": {"reputation": 662, "user_id": 10065556, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67e04febb07d25f034c7c61ad512dbd7?s=128&d=identicon&r=PG&f=1", "display_name": "Adarsh Punj", "link": "https://stackoverflow.com/users/10065556/adarsh-punj"}, "reply_to_user": {"reputation": 1834, "user_id": 11225821, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-O91lQO_cGpI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reto2vddsx__HsnQU8BRgt2TGt8iQ/mo/photo.jpg?sz=128", "display_name": "Linh Nguyen", "link": "https://stackoverflow.com/users/11225821/linh-nguyen"}, "edited": false, "score": 0, "creation_date": 1572538751, "post_id": 58634847, "comment_id": 103599861, "body": "@LinhNguyen, thanks. I think that should work."}], "owner": {"reputation": 662, "user_id": 10065556, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67e04febb07d25f034c7c61ad512dbd7?s=128&d=identicon&r=PG&f=1", "display_name": "Adarsh Punj", "link": "https://stackoverflow.com/users/10065556/adarsh-punj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1572477173, "creation_date": 1572477173, "question_id": 58634847, "link": "https://stackoverflow.com/questions/58634847/django-sort-articles-by-hourly-daily-views-trending", "title": "Django: Sort articles by hourly/daily views (trending)", "body": "<p>Suppose we have a blog with 100 articles.\nHow can we let the users sort articles (objects) by the number of views (field) in the last hour/day/week/month?</p>\n\n<p>Can we implement something that makes the field <code>views_today</code> such that it becomes <code>0</code> every hour?</p>\n"}, {"tags": ["python", "python-3.x", "python-import", "importerror"], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 2885798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9947688f0b8f66d006f33f0a85913b36?s=128&d=identicon&r=PG&f=1", "display_name": "gabrielh", "link": "https://stackoverflow.com/users/2885798/gabrielh"}, "edited": false, "score": 0, "creation_date": 1572529859, "post_id": 58635378, "comment_id": 103594784, "body": "Thanks. I removed <b>init</b>.py and it didn&#39;t change anything, which I suspect is good. setup.py is in the parent folder from app but it does say the packages are app.web and app.worker (now that I removed <b>init</b>.py). The worker ran successfully with <code>python -m worker.worker</code> but not with <code>python worker&#47;worker.py</code> from the app folder. Any idea why?"}, {"owner": {"reputation": 43, "user_id": 2885798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9947688f0b8f66d006f33f0a85913b36?s=128&d=identicon&r=PG&f=1", "display_name": "gabrielh", "link": "https://stackoverflow.com/users/2885798/gabrielh"}, "edited": false, "score": 0, "creation_date": 1572531363, "post_id": 58635378, "comment_id": 103595637, "body": "One thing, after removing <code>__init__.py</code> from the app folder when I run setup.py it doesn&#39;t find any of my packages anymore. Should I move setup.py inside the app folder or manually define them?"}, {"owner": {"reputation": 4856, "user_id": 3700626, "user_type": "registered", "accept_rate": 30, "profile_image": "https://i.stack.imgur.com/LGCnh.jpg?s=128&g=1", "display_name": "Lior Cohen", "link": "https://stackoverflow.com/users/3700626/lior-cohen"}, "reply_to_user": {"reputation": 43, "user_id": 2885798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9947688f0b8f66d006f33f0a85913b36?s=128&d=identicon&r=PG&f=1", "display_name": "gabrielh", "link": "https://stackoverflow.com/users/2885798/gabrielh"}, "edited": false, "score": 1, "creation_date": 1572531528, "post_id": 58635378, "comment_id": 103595735, "body": "you need to decide what is your project structure. If you want app to be a package it is fine but then all the imports should be like: import app.worker.worker"}, {"owner": {"reputation": 4856, "user_id": 3700626, "user_type": "registered", "accept_rate": 30, "profile_image": "https://i.stack.imgur.com/LGCnh.jpg?s=128&g=1", "display_name": "Lior Cohen", "link": "https://stackoverflow.com/users/3700626/lior-cohen"}, "reply_to_user": {"reputation": 43, "user_id": 2885798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9947688f0b8f66d006f33f0a85913b36?s=128&d=identicon&r=PG&f=1", "display_name": "gabrielh", "link": "https://stackoverflow.com/users/2885798/gabrielh"}, "edited": false, "score": 0, "creation_date": 1572531608, "post_id": 58635378, "comment_id": 103595771, "body": "there are other more advanced ways like relative imports but from my experience imports from the root package downwards is the best practice."}], "tags": [], "owner": {"reputation": 4856, "user_id": 3700626, "user_type": "registered", "accept_rate": 30, "profile_image": "https://i.stack.imgur.com/LGCnh.jpg?s=128&g=1", "display_name": "Lior Cohen", "link": "https://stackoverflow.com/users/3700626/lior-cohen"}, "is_accepted": true, "score": 1, "last_activity_date": 1572481532, "creation_date": 1572481532, "answer_id": 58635378, "question_id": 58634841, "link": "https://stackoverflow.com/questions/58634841/importing-python-modules-from-different-directories/58635378#58635378", "title": "Importing python modules from different directories", "body": "<p>your working imports imply that the project root is the app folder. As such you need to lunch your worker from this folder (or add it to PYTHONPATH environment variable)</p>\n\n<pre><code>python worker/worker.py \n</code></pre>\n\n<p>Or</p>\n\n<pre><code>python -m worker.worker\n</code></pre>\n\n<p>In addition your <code>__init__.py</code> in the app folder should be removed as app is not a package but a project root.</p>\n"}, {"tags": [], "owner": {"reputation": 4770, "user_id": 6340496, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/a2hM0.png?s=128&g=1", "display_name": "S3DEV", "link": "https://stackoverflow.com/users/6340496/s3dev"}, "is_accepted": false, "score": 1, "last_activity_date": 1572511238, "creation_date": 1572511238, "answer_id": 58639513, "question_id": 58634841, "link": "https://stackoverflow.com/questions/58634841/importing-python-modules-from-different-directories/58639513#58639513", "title": "Importing python modules from different directories", "body": "<p>One method we use regularly for development and debugging (but also works in production) is the following.  You can add this to each (offending?) module, or all modules if you choose.</p>\n\n<pre><code>import os\nimport sys\n\n# Add your project root to sys.path.\nsys.path.insert(0, os.path.dirname(os.path.dirname(os.path.realpath(__file__))))\n\nfrom common import tool1\nfrom common import tool2\nfrom worker import worker\netc ...\n</code></pre>\n\n<p>Here you are adding your project root to <code>sys.path</code>.  When performing imports, Python starts by looking through <code>sys.path</code> for the module you're trying to import.  So here, you are adding your project root as the first item in <code>sys.path</code>.</p>\n\n<p>Another advantage is these imports are explicit to your project.  For example, if you have a local <code>workers</code> module which you want to import, but also have a <code>workers</code> package in <code>site-packages</code>, this will look in your local project first.</p>\n"}], "owner": {"reputation": 43, "user_id": 2885798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9947688f0b8f66d006f33f0a85913b36?s=128&d=identicon&r=PG&f=1", "display_name": "gabrielh", "link": "https://stackoverflow.com/users/2885798/gabrielh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 58635378, "answer_count": 2, "score": 0, "last_activity_date": 1572511238, "creation_date": 1572477111, "question_id": 58634841, "link": "https://stackoverflow.com/questions/58634841/importing-python-modules-from-different-directories", "title": "Importing python modules from different directories", "body": "<p>I have a flask app with essentially the following structure:</p>\n\n<pre><code>app/\n  __init__.py\n  myapp.py\n  common/\n    tool1.py\n    tool2.py\n  web/\n    __init__.py\n    views.py\n    api/\n      api_impl.py\n  worker/\n    __init__.py\n    worker.py\n    tasks.py\n</code></pre>\n\n<p>I initialize in <code>myapp.py</code> an important object I use in several places and I can access it from <code>common/tool1.py</code> and <code>web/api/api_impl.py</code> with <code>from myapp import object</code>. I've been able to use <code>tool1</code> and <code>tool2</code> in multiple places in <code>web/</code> and <code>myapp.py</code> importing with <code>from common.tool1 import tool1_def</code>.</p>\n\n<p>Other relevant facts are in <code>myapp.py</code> there is an <code>import web</code> statement for the blueprints and <code>app/__init__.py</code> and <code>worker/__init__.py</code> are empty. <code>web/__init__.py</code> contains the blueprint definitions for the routes.</p>\n\n<p>I can run the app with gunicorn with no issues, but when I try to run my worker with <code>python app/worker/worker.py</code> I get the error <code>ModuleNotFoundError: No module named 'myapp'</code>. The <code>worker.py</code> is trying to import the same object defined in <code>myapp.py</code>.</p>\n\n<p>I just don't understand why I can run the app and it works but when I try to run the worker it doesn't! I'm definitely not fully understanding the import system in this case and everything I've read online doesn't seem to fully clarify this.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 3667, "user_id": 6789321, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-B5oSDMyNAyc/AAAAAAAAAAI/AAAAAAAAT6s/i6ZRf_boOu4/photo.jpg?sz=128", "display_name": "accdias", "link": "https://stackoverflow.com/users/6789321/accdias"}, "edited": false, "score": 3, "creation_date": 1572477234, "post_id": 58634836, "comment_id": 103576579, "body": "Maybe <code>result.append(list(a))</code>."}, {"owner": {"reputation": 92827, "user_id": 369, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/DHcF2.png?s=128&g=1", "display_name": "Blorgbeard", "link": "https://stackoverflow.com/users/369/blorgbeard"}, "edited": false, "score": 0, "creation_date": 1572477382, "post_id": 58634836, "comment_id": 103576613, "body": "For this particular case, do you know about <code>itertools</code>?"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 2, "creation_date": 1572477443, "post_id": 58634836, "comment_id": 103576628, "body": "That isn&#39;t a &quot;hack&quot;, that&#39;s what you have to do if you want to append a copy of that list instead of that same list object. Of course, <code>[item for item in a]</code> is a verbose way of writing <code>list(a)</code>, although if <code>a</code> is a list, perhaps the most readable (and performant) way would simply be <code>a.copy()</code>"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1572477725, "post_id": 58634836, "comment_id": 103576694, "body": "You can also use <code>result.append(a[:])</code>"}, {"owner": {"reputation": 6592, "user_id": 3711219, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/5fpS9.png?s=128&g=1", "display_name": "Claudiu Creanga", "link": "https://stackoverflow.com/users/3711219/claudiu-creanga"}, "edited": false, "score": 0, "creation_date": 1572478296, "post_id": 58634836, "comment_id": 103576834, "body": "ok, I thought there is something wrong with my algorithm that I had to arrive to this"}], "answers": [{"tags": [], "owner": {"reputation": 69906, "user_id": 6890912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d291e4dfbf14dcc8874bd4fa620fac23?s=128&d=identicon&r=PG&f=1", "display_name": "blhsing", "link": "https://stackoverflow.com/users/6890912/blhsing"}, "is_accepted": true, "score": 2, "last_activity_date": 1572478326, "creation_date": 1572478326, "answer_id": 58635006, "question_id": 58634836, "link": "https://stackoverflow.com/questions/58634836/clean-way-to-append-to-a-list-in-a-recursive-function/58635006#58635006", "title": "Clean way to append to a list in a recursive function", "body": "<p>A better recursive approach is to avoid managing the item swapping back-and-forth yourself and instead rely on the call stack to do that for you:</p>\n\n<pre><code>def perm(lst):\n    if lst:\n        for index, item in enumerate(lst):\n            for p in perm(lst[:index] + lst[index + 1:]):\n                yield [item, *p]\n    else:\n        yield []\n</code></pre>\n\n<p>so that:</p>\n\n<pre><code>for p in perm([1, 2, 3]):\n    print(p)\n</code></pre>\n\n<p>outputs:</p>\n\n<pre><code>[1, 2, 3]\n[1, 3, 2]\n[2, 1, 3]\n[2, 3, 1]\n[3, 1, 2]\n[3, 2, 1]\n</code></pre>\n"}], "owner": {"reputation": 6592, "user_id": 3711219, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/5fpS9.png?s=128&g=1", "display_name": "Claudiu Creanga", "link": "https://stackoverflow.com/users/3711219/claudiu-creanga"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 58635006, "answer_count": 1, "score": 1, "last_activity_date": 1572478326, "creation_date": 1572477016, "question_id": 58634836, "link": "https://stackoverflow.com/questions/58634836/clean-way-to-append-to-a-list-in-a-recursive-function", "title": "Clean way to append to a list in a recursive function", "body": "<p>When finding permutations for a list like this:</p>\n\n<pre><code>def permut(nums: List[int]) -&gt; List[List[int]]:\n    result = []\n\n    def perm(a, k=0):\n        if k == len(a):\n            result.append(a)\n        else:\n            for i in range(k, len(a)):\n                a[k], a[i] = a[i], a[k]\n                perm(a, k + 1)\n                a[k], a[i] = a[i], a[k]\n\n    perm(nums)\n    return result\n</code></pre>\n\n<p>this doesn't work because I'm overwriting <code>a</code> each time and result is just a list of items all pointing to <code>a</code></p>\n\n<p>I can change that line to be like:</p>\n\n<pre><code>result.append([item for item in a])\n</code></pre>\n\n<p>But that seems just like a hack to create a new list from a. What is a better way to deal with append to list in recursive functions?</p>\n"}, {"tags": ["python", "list", "dictionary"], "answers": [{"tags": [], "owner": {"reputation": 161, "user_id": 11064668, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05875e85fef82634007f1c522b67d0c4?s=128&d=identicon&r=PG&f=1", "display_name": "MrJuicyBacon", "link": "https://stackoverflow.com/users/11064668/mrjuicybacon"}, "is_accepted": true, "score": 1, "last_activity_date": 1572477841, "creation_date": 1572477841, "answer_id": 58634941, "question_id": 58634835, "link": "https://stackoverflow.com/questions/58634835/get-the-value-from-a-nested-dictionary-python/58634941#58634941", "title": "Get the value from a nested dictionary.Python", "body": "<p>You need to iterate again through the values of the internal dictionary and append each of them to the output variable.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def get_values_from_nested_dict(dic):\n    l = []\n    for outer_value in dic.values():\n        for value in outer_value.values():\n            l.append(value)\n    return l\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 25, "user_id": 12293679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc106aa1dd660d2772ed8594a6329739?s=128&d=identicon&r=PG&f=1", "display_name": "John Tipotas", "link": "https://stackoverflow.com/users/12293679/john-tipotas"}, "edited": false, "score": 0, "creation_date": 1572478371, "post_id": 58634961, "comment_id": 103576855, "body": "Thanks a lot. But I didnt know how to use dict comprehension."}, {"owner": {"reputation": 18268, "user_id": 5218354, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh4.googleusercontent.com/-NEO9rZKeffY/AAAAAAAAAAI/AAAAAAAAAKc/9IttO1jUOr4/photo.jpg=k-s128", "display_name": "norok2", "link": "https://stackoverflow.com/users/5218354/norok2"}, "reply_to_user": {"reputation": 25, "user_id": 12293679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc106aa1dd660d2772ed8594a6329739?s=128&d=identicon&r=PG&f=1", "display_name": "John Tipotas", "link": "https://stackoverflow.com/users/12293679/john-tipotas"}, "edited": false, "score": 1, "creation_date": 1572478511, "post_id": 58634961, "comment_id": 103576884, "body": "@JohnTipotas <a href=\"https://stackoverflow.com/a/58634941/5218354\">MrJuicyBacon&#39;s answer</a> is the equivalent looping without using comprehension. Note that this is not considered a <code>dict</code> comprehension, but rather a <code>list</code> comprehension, since the resulting object is a <code>list</code>. <code>dict</code> comprehension also exist but they have a slightly different syntax and, most importantly they produce a <code>dict</code> instead."}], "tags": [], "owner": {"reputation": 18268, "user_id": 5218354, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh4.googleusercontent.com/-NEO9rZKeffY/AAAAAAAAAAI/AAAAAAAAAKc/9IttO1jUOr4/photo.jpg=k-s128", "display_name": "norok2", "link": "https://stackoverflow.com/users/5218354/norok2"}, "is_accepted": false, "score": 2, "last_activity_date": 1572477990, "creation_date": 1572477990, "answer_id": 58634961, "question_id": 58634835, "link": "https://stackoverflow.com/questions/58634835/get-the-value-from-a-nested-dictionary-python/58634961#58634961", "title": "Get the value from a nested dictionary.Python", "body": "<p>You could simply use a double-comprehension (equivalent to a nested loop) on the <code>dict</code>s's values:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>d = {2.5: {2005: 0.3}, 2.6: {2005: 0.4}, 5.5: {2010: 0.8}, 7.5: {2010: 0.95}}\n\n\n[y for x in d.values() for y in x.values()]\n# [0.3, 0.4, 0.8, 0.95]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9833, "user_id": 4407666, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/AqwYj.jpg?s=128&g=1", "display_name": "Rahul K P", "link": "https://stackoverflow.com/users/4407666/rahul-k-p"}, "is_accepted": false, "score": 0, "last_activity_date": 1572504148, "creation_date": 1572504148, "answer_id": 58638064, "question_id": 58634835, "link": "https://stackoverflow.com/questions/58634835/get-the-value-from-a-nested-dictionary-python/58638064#58638064", "title": "Get the value from a nested dictionary.Python", "body": "<p>You can do like this,</p>\n\n<pre><code>In [97]: d                                                                                                                                                                                                  \nOut[97]: {2.5: {2005: 0.3}, 2.6: {2005: 0.4}, 5.5: {2010: 0.8}, 7.5: {2010: 0.95}}\n\nIn [98]: list(map(lambda x:list(x.values())[0], d.values()))                                                                                                                                                \nOut[98]: [0.3, 0.4, 0.8, 0.95]\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 12293679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc106aa1dd660d2772ed8594a6329739?s=128&d=identicon&r=PG&f=1", "display_name": "John Tipotas", "link": "https://stackoverflow.com/users/12293679/john-tipotas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 58634941, "answer_count": 3, "score": 1, "last_activity_date": 1572504148, "creation_date": 1572477014, "last_edit_date": 1572477811, "question_id": 58634835, "link": "https://stackoverflow.com/questions/58634835/get-the-value-from-a-nested-dictionary-python", "title": "Get the value from a nested dictionary.Python", "body": "<p>I want to get a list of the values from a nested dictionary.</p>\n\n<pre><code>d = {2.5: {2005: 0.3}, 2.6: {2005: 0.4}, 5.5: {2010: 0.8}, 7.5: {2010: 0.95}}\n\ndef get_values_from_nested_dict(dic):\n    list_of_values = dic.values()\n    l = []\n    for i in list_of_values:\n        a = i.values()\n        l.append(a)\n    return l\n\nd1 = get_values_from_nested_dict(d)\nprint(d1)\n</code></pre>\n\n<p>My results:</p>\n\n<pre><code>[dict_values([0.3]), dict_values([0.4]), dict_values([0.8]), dict_values([0.95])]\n</code></pre>\n\n<p>But I want the list to be:</p>\n\n<pre><code>[0.3,0.4,0.8,0.95]\n</code></pre>\n"}, {"tags": ["python", "stack", "environment-variables", "memory-address", "pwntools"], "answers": [{"tags": [], "owner": {"reputation": 71, "user_id": 7018531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c34ab4bde4f5d0ccf3584bbd9a5cd7ae?s=128&d=identicon&r=PG&f=1", "display_name": "pu1p", "link": "https://stackoverflow.com/users/7018531/pu1p"}, "is_accepted": false, "score": 0, "last_activity_date": 1578216230, "creation_date": 1578216230, "answer_id": 59598492, "question_id": 58634785, "link": "https://stackoverflow.com/questions/58634785/is-there-any-functions-in-pythonpwntools-that-i-can-use-to-know-the-address-of/59598492#59598492", "title": "Is there any functions in python(pwntools) that I can use to know the address of environment variable at stack?", "body": "<p>As you already know, the environment variables are on the stack. So you need to leak the stack address through some way. And you should calculate the offset between leaked stack address and the environment variable by local debugging. then you calculate the environment variable's address.</p>\n"}], "owner": {"reputation": 19, "user_id": 7667873, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5gnza.jpg?s=128&g=1", "display_name": "Gan Sama", "link": "https://stackoverflow.com/users/7667873/gan-sama"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1355, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1578216230, "creation_date": 1572476677, "question_id": 58634785, "link": "https://stackoverflow.com/questions/58634785/is-there-any-functions-in-pythonpwntools-that-i-can-use-to-know-the-address-of", "title": "Is there any functions in python(pwntools) that I can use to know the address of environment variable at stack?", "body": "<p>I am trying to do a return-to-libc attack. The problem is that I need the address of an environment variable at the stack for the argument of an gadget. I tried the following code with python. But it seems that it gives an offset or something else ? Not sure about that. </p>\n\n<pre><code>r=process('/rop_level', env={'MYENV': 'cat /flag'})\nos.environ.get('MYENV')\nh = os.environ.get('MYENV')\nhex(id(h))\n</code></pre>\n\n<p>The result it gives is 0x9d4380. I kinda need an address at stack like 0x7ffe.....</p>\n\n<p>The CTF challenge is located in a container which requires ssh so I may not be able to use gdb.</p>\n"}, {"tags": ["python", "pdf", "python-requests"], "comments": [{"owner": {"reputation": 45099, "user_id": 2011147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FGRgf.jpg?s=128&g=1", "display_name": "Selcuk", "link": "https://stackoverflow.com/users/2011147/selcuk"}, "edited": false, "score": 0, "creation_date": 1572476759, "post_id": 58634783, "comment_id": 103576460, "body": "What do you mean by &quot;get the html&quot;? PDF and HTML are two different formats. Do you want to extract the text from the PDF?"}, {"owner": {"reputation": 341, "user_id": 5503494, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/710787c69339972dcc589e96729a3ed8?s=128&d=identicon&r=PG&f=1", "display_name": "tezzaaa", "link": "https://stackoverflow.com/users/5503494/tezzaaa"}, "reply_to_user": {"reputation": 45099, "user_id": 2011147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FGRgf.jpg?s=128&g=1", "display_name": "Selcuk", "link": "https://stackoverflow.com/users/2011147/selcuk"}, "edited": false, "score": 0, "creation_date": 1572476998, "post_id": 58634783, "comment_id": 103576516, "body": "sorry, i&#39;m trying to get an output like this: &#39;&lt;html dir=&quot;ltr&quot; mozdisallowselectionprint=&quot;&quot;&gt;&lt;head&gt;\\n    &lt;meta charset=&quot;utf-8&quot;&gt;\\n    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1, maximum-scale=1&quot;&gt;\\n    &lt;title&gt;"}, {"owner": {"reputation": 30153, "user_id": 12299000, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0pja9.png?s=128&g=1", "display_name": "kaya3", "link": "https://stackoverflow.com/users/12299000/kaya3"}, "edited": false, "score": 0, "creation_date": 1572477044, "post_id": 58634783, "comment_id": 103576526, "body": "There is no such content at the URL you are making a request to. You should not expect to receive HTML, since no HTML is being sent."}, {"owner": {"reputation": 341, "user_id": 5503494, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/710787c69339972dcc589e96729a3ed8?s=128&d=identicon&r=PG&f=1", "display_name": "tezzaaa", "link": "https://stackoverflow.com/users/5503494/tezzaaa"}, "edited": false, "score": 0, "creation_date": 1572477099, "post_id": 58634783, "comment_id": 103576547, "body": "using selenium i&#39;m able to do it: driver.get(link) driver.implicitly_wait(10) # sleep(10) html_source = driver.page_source soup_source=bs(html_source,&#39;html.parser&#39;)  font_spans = [ data for data in soup_source.select(&#39;span&#39;) if &#39;font-size&#39; in str(data) ] output = [] for i in font_spans:     tup = ()     fonts_size = re.search(r&#39;(?is)(font-size:)(.*?)(px)&#39;,str(i.get(&#39;style&#39;)))&zwnj;&#8203;.group(2)     tup = (str(i.text).strip(),fonts_size.strip())     output.append(tup)  --- this to get the font size for instance which is what i&#39;m trying to get to"}, {"owner": {"reputation": 30153, "user_id": 12299000, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0pja9.png?s=128&g=1", "display_name": "kaya3", "link": "https://stackoverflow.com/users/12299000/kaya3"}, "edited": false, "score": 0, "creation_date": 1572477353, "post_id": 58634783, "comment_id": 103576607, "body": "Selenium is a library which interacts with your browser. I suspect that Selenium is giving you the HTML that your browser uses to embed a PDF file in a browser tab. That HTML code is not sent by the server."}, {"owner": {"reputation": 341, "user_id": 5503494, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/710787c69339972dcc589e96729a3ed8?s=128&d=identicon&r=PG&f=1", "display_name": "tezzaaa", "link": "https://stackoverflow.com/users/5503494/tezzaaa"}, "edited": false, "score": 0, "creation_date": 1572477462, "post_id": 58634783, "comment_id": 103576631, "body": "no it seems to give me what i want, i can even see some of the text that is in the pdf itself. The reason I can&#39;t use selenium is that this particular script does not seem to work in Google Colab.. whereas it works on my local instance..!"}, {"owner": {"reputation": 30153, "user_id": 12299000, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0pja9.png?s=128&g=1", "display_name": "kaya3", "link": "https://stackoverflow.com/users/12299000/kaya3"}, "edited": false, "score": 0, "creation_date": 1572477653, "post_id": 58634783, "comment_id": 103576677, "body": "That means your browser is producing HTML that includes some of the text from the PDF, presumably so you can select it and copy it from within the browser tab. Nonetheless, that HTML is not the content of the PDF file, it is generated by your browser."}], "answers": [{"comments": [{"owner": {"reputation": 341, "user_id": 5503494, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/710787c69339972dcc589e96729a3ed8?s=128&d=identicon&r=PG&f=1", "display_name": "tezzaaa", "link": "https://stackoverflow.com/users/5503494/tezzaaa"}, "edited": false, "score": 0, "creation_date": 1572477350, "post_id": 58634824, "comment_id": 103576606, "body": "r.content seems to return stuff in that format: \\xdd\\x93%\\xb7m\\xef\\xfb\\xfc\\x15S\\xf7%NU\\xf6\\xb8 etc"}, {"owner": {"reputation": 30153, "user_id": 12299000, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0pja9.png?s=128&g=1", "display_name": "kaya3", "link": "https://stackoverflow.com/users/12299000/kaya3"}, "reply_to_user": {"reputation": 341, "user_id": 5503494, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/710787c69339972dcc589e96729a3ed8?s=128&d=identicon&r=PG&f=1", "display_name": "tezzaaa", "link": "https://stackoverflow.com/users/5503494/tezzaaa"}, "edited": false, "score": 0, "creation_date": 1572477450, "post_id": 58634824, "comment_id": 103576629, "body": "Yes, binary data. If you want to view it, you will have to use a PDF viewing application, such as Adobe Acrobat, or SumatraPDF, or most browsers."}], "tags": [], "owner": {"reputation": 30153, "user_id": 12299000, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0pja9.png?s=128&g=1", "display_name": "kaya3", "link": "https://stackoverflow.com/users/12299000/kaya3"}, "is_accepted": false, "score": 0, "last_activity_date": 1572476892, "creation_date": 1572476892, "answer_id": 58634824, "question_id": 58634783, "link": "https://stackoverflow.com/questions/58634783/is-there-a-way-to-use-python-requests-to-access-web-pages-which-are-in-fact-pdfs/58634824#58634824", "title": "is there a way to use python-requests to access web pages which are in fact pdfs?", "body": "<p>Yes; a PDF file is a binary file, not a text file, so you should use <code>r.content</code> instead of <code>r.text</code> to access the binary data.</p>\n\n<p>PDF files are not easy to deal with programmatically; but you might (for example) save it to a file:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import requests\n\nlink = 'http://www.pdf995.com/samples/pdf.pdf'\nr = requests.get(link)\n\nwith open('pdf.pdf', 'wb') as f:\n    f.write(r.content)\n</code></pre>\n"}], "owner": {"reputation": 341, "user_id": 5503494, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/710787c69339972dcc589e96729a3ed8?s=128&d=identicon&r=PG&f=1", "display_name": "tezzaaa", "link": "https://stackoverflow.com/users/5503494/tezzaaa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1572476892, "creation_date": 1572476643, "question_id": 58634783, "link": "https://stackoverflow.com/questions/58634783/is-there-a-way-to-use-python-requests-to-access-web-pages-which-are-in-fact-pdfs", "title": "is there a way to use python-requests to access web pages which are in fact pdfs?", "body": "<p>I'm trying to use request to download the content of some web pages which are in fact PDFs. </p>\n\n<p>I've tried the following code but the output that comes back is not properly decoded it seems:</p>\n\n<pre><code>link= 'http://www.pdf995.com/samples/pdf.pdf'\nimport requests\nr = requests.get(link)\nr.text\n</code></pre>\n\n<p>The output looks like below:\n'%PDF-1.3\\n%\ufffd\uc3e2\\n30 0 obj\\n&lt;>\\nstream\\nx\ufffd\ufffd}\u0753%\ufffdm\ufffd\ufffd\ufffd\\x15S\ufffd%NU\ufffd\ufffd\ufffdM&amp;O7\ufffd\u36d4]ql\ufffd\ufffd\ufffd\ufffd\ufffd+Kr\ufffd+\u0652%\ufffd\ufffd\ufffd/~\\x00\ufffd\ufffd=\ufffd\ufffd\ufffd\ufffd{feY\ufffdT\ufffd\\x05\ufffd\ufffd\\r\ufffd\\x00\ufffd/\ufffd\ufffd\ufffdq\ufffd8\ufffd8\ufffd\\x7f\ufffd\\x7f\ufffd~\ufffd\ufffd\ufffd\ufffd\\x1f\ufffd\u0737\ufffdO\ufffdz\ufffd7\ufffd7\ufffdo\\x1f\ufffd\ufffd\ufffd\ufffd7\ufffd\\'\ufffd{\ufffd\ufffd\\x7f&lt;~\ufffd\ufffd\\x1e?\ufffd\ufffd\ufffd\ufffdC\ufffd%\\ByL\u0577K\ufffd\ufffd\ufffd\ufffd!_b^0o\\x083\ufffdK\\x0b\\x0b\ufffd\\x05z\ufffdE\ufffdS\ufffd\ufffd\ufffd?\ufffd~ \ufffd]rb\\x10C\ufffdy\ufffd>_r\ufffd\\x10\ufffd&lt;\ufffdK\ufffd\ufffd&lt;\ufffd\ufffd!>\ufffd\ufffd(\ufffd\\x17\ufffd\ufffd\ufffd~\ufffd.m\ufffd\ufffd]2\\x11\ufffd\ufffd\netc</p>\n\n<p>I was hoping to get the html. I also tried with beautifulsoup but it does not decode it either.. I hope someone can help. Thank you, BR</p>\n"}, {"tags": ["python", "jupyter-notebook", "jupyter-lab"], "comments": [{"owner": {"reputation": 5399, "user_id": 3248412, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/3yGCF.jpg?s=128&g=1", "display_name": "vs97", "link": "https://stackoverflow.com/users/3248412/vs97"}, "edited": false, "score": 2, "creation_date": 1572477287, "post_id": 58634761, "comment_id": 103576588, "body": "I ran your code in jupyter and got in the end [({&#39;alex&#39;, &#39;tom&#39;}, &#39;good&#39;), ({&#39;alex&#39;, &#39;james&#39;}, &#39;bad&#39;), ({&#39;james&#39;, &#39;tom&#39;}, &#39;nice&#39;)]. Is this not what you are expecting? Maybe post how your cells look."}], "answers": [{"tags": [], "owner": {"reputation": 1353, "user_id": 11914067, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kxxVU.png?s=128&g=1", "display_name": "Rithin Chalumuri", "link": "https://stackoverflow.com/users/11914067/rithin-chalumuri"}, "is_accepted": true, "score": 1, "last_activity_date": 1572479261, "last_edit_date": 1572479261, "creation_date": 1572477561, "answer_id": 58634902, "question_id": 58634761, "link": "https://stackoverflow.com/questions/58634761/inputs-within-loop-in-jupyter-lab-cell/58634902#58634902", "title": "Inputs within loop in jupyter lab cell", "body": "<p>You can further simplify your code using <code>itertools.permutations()</code>.</p>\n\n<p>Example:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import itertools\n\nnames = ['alex','tom','james']\n\nunique = set()\npermutations = set(itertools.permutations(names, 2))\n\nfor pair in permutations:\n    if pair not in unique and pair[::-1] not in unique:\n        unique.add(pair)\n\nrelationships = []\n\nfor pair in unique:\n    strength = input(f'what is the relationship between {pair[0]} and {pair[1]}?')\n    relationships.append((pair,strength))\n\nprint(relationships)\n</code></pre>\n\n<p>Console Output:</p>\n\n<pre><code>what is the relationship between alex and james?12\nwhat is the relationship between alex and tom?5\nwhat is the relationship between james and tom?6\n[(('alex', 'james'), '12'), (('alex', 'tom'), '5'), (('james', 'tom'), '6')]\n</code></pre>\n\n<hr>\n\n<p>However, even your code seems to be working fine in jupyter notebook:</p>\n\n<p><a href=\"https://i.stack.imgur.com/ASZrY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ASZrY.png\" alt=\"enter image description here\"></a></p>\n\n<p>You can maybe try restarting the python kernel i.e. in the menu go to Kernal -> Restart and Run all.</p>\n\n<hr>\n\n<p>Related question:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/34968112/how-to-give-jupyter-cell-standard-input-in-python\">How to give jupyter cell standard input in python?</a></p>\n"}], "owner": {"reputation": 448, "user_id": 1320977, "user_type": "registered", "profile_image": "https://graph.facebook.com/506971413/picture?type=large", "display_name": "Charlie Morton", "link": "https://stackoverflow.com/users/1320977/charlie-morton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 434, "favorite_count": 0, "accepted_answer_id": 58634902, "answer_count": 1, "score": 1, "last_activity_date": 1572479261, "creation_date": 1572476430, "question_id": 58634761, "link": "https://stackoverflow.com/questions/58634761/inputs-within-loop-in-jupyter-lab-cell", "title": "Inputs within loop in jupyter lab cell", "body": "<p>I'm running a jupyter lab notebook\nI have a list of names and I want to be able to input some information for relationships between each item in the list.</p>\n\n<p>My thought would normally be to iterate through a for loop but I don't think in jupyter it is possible to loop through inputs. </p>\n\n<pre><code>names = ['alex','tom','james']\nrelationships = []\nfor i in names:\n    for j in names:\n        if j==i:\n            continue\n        skip = False\n        for r in relationships:\n            if r[0] == {i,j}:\n                skip = True\n                break\n        if skip == True:\n            # print(f'skipping {i,j}')\n            continue\n        strength = input(f'what is the relationship between {i} and {j}?')\n        relationships.append(({i,j},strength))\n\nprint(relationships)\n\n</code></pre>\n\n<p>This works if i run it in terminal but not in jupyter lab, what might work?</p>\n"}, {"tags": ["python", "pandas", "dataframe"], "comments": [{"owner": {"reputation": 31306, "user_id": 9081267, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/1knzv.jpg?s=128&g=1", "display_name": "Erfan", "link": "https://stackoverflow.com/users/9081267/erfan"}, "edited": false, "score": 0, "creation_date": 1572476652, "post_id": 58634748, "comment_id": 103576430, "body": "Try: <code>df_syn[&#39;synonyms_text&#39;].str.match(&#39;\\bfood\\b&#39;)</code> to exact match <code>food</code>. But it&#39;s easier if you provide an input dataframe and what your expected output is. Maybe make an easier small example"}, {"owner": {"reputation": 1138, "user_id": 4538768, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/193e75d8ac32ee74d76e503a49388bf9?s=128&d=identicon&r=PG&f=1", "display_name": "Juan Perez", "link": "https://stackoverflow.com/users/4538768/juan-perez"}, "reply_to_user": {"reputation": 31306, "user_id": 9081267, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/1knzv.jpg?s=128&g=1", "display_name": "Erfan", "link": "https://stackoverflow.com/users/9081267/erfan"}, "edited": false, "score": 0, "creation_date": 1572479816, "post_id": 58634748, "comment_id": 103577153, "body": "however this gave the result: <code>df_tmp= df.loc[df[&#39;synonyms_text&#39;].str.contains(r&#39;\\bfood\\b&#39;)]</code>. It is weird, I couldn&#39;t get the result with match as you suggested."}], "answers": [{"tags": [], "owner": {"reputation": 31306, "user_id": 9081267, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/1knzv.jpg?s=128&g=1", "display_name": "Erfan", "link": "https://stackoverflow.com/users/9081267/erfan"}, "is_accepted": true, "score": 1, "last_activity_date": 1572480377, "last_edit_date": 1572480377, "creation_date": 1572480039, "answer_id": 58635214, "question_id": 58634748, "link": "https://stackoverflow.com/questions/58634748/query-pandas-dataframe-for-exact-word-in-a-column-expanding-contains/58635214#58635214", "title": "Query Pandas dataframe for EXACT word in a column expanding contains", "body": "<p>Example dataframe:</p>\n\n<pre><code>df = pd.DataFrame({'category':['Fishing','Refrigeration','store'],\n                   'synonyms_text':['seafood','foodlocker','food']})\n\nprint(df)\n        category synonyms_text\n0        Fishing       seafood\n1  Refrigeration    foodlocker\n2          store          food # &lt;-- we want only the rows with exact \"food\"\n</code></pre>\n\n<hr>\n\n<p>Three ways we can do this:</p>\n\n<ol>\n<li><code>str.match</code></li>\n<li><code>str.contains</code></li>\n<li><code>str.extract</code> (not very useful here)</li>\n</ol>\n\n<pre><code># 1\ndf['synonyms_text'].str.match(r'\\bfood\\b')\n</code></pre>\n\n<pre><code># 2 \ndf['synonyms_text'].str.match(r'\\bfood\\b')\n</code></pre>\n\n<pre><code># 3\ndf['synonyms_text'].str.extract(r'(\\bfood\\b)').eq('food')\n</code></pre>\n\n<p><strong>output</strong></p>\n\n<pre><code>0    False\n1    False\n2     True\nName: synonyms_text, dtype: bool\n</code></pre>\n\n<hr>\n\n<p>Finally we use <code>boolean</code> series to filter out dataframe <code>.loc</code></p>\n\n<pre><code>m = df['synonyms_text'].str.match(r'\\bfood\\b')\ndf.loc[m]\n</code></pre>\n\n<p><strong>output</strong></p>\n\n<pre><code>  category synonyms_text\n2    store          food\n</code></pre>\n\n<hr>\n\n<p><strong>Bonus</strong>:</p>\n\n<p>To match <em>case insensitive</em> use <code>?i</code>:</p>\n\n<p>For example:</p>\n\n<pre><code>df['synonyms_text'].str.match(r'\\b(?i)food\\b')\n</code></pre>\n\n<p>Which will match: <code>food</code>, <code>Food</code>, <code>FOOD</code>, <code>fOoD</code></p>\n"}], "owner": {"reputation": 1138, "user_id": 4538768, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/193e75d8ac32ee74d76e503a49388bf9?s=128&d=identicon&r=PG&f=1", "display_name": "Juan Perez", "link": "https://stackoverflow.com/users/4538768/juan-perez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 58635214, "answer_count": 1, "score": 0, "last_activity_date": 1572480377, "creation_date": 1572476336, "last_edit_date": 1572479139, "question_id": 58634748, "link": "https://stackoverflow.com/questions/58634748/query-pandas-dataframe-for-exact-word-in-a-column-expanding-contains", "title": "Query Pandas dataframe for EXACT word in a column expanding contains", "body": "<p>Having a dataframe df with the following columns:</p>\n\n<p><code>Index(['category', 'synonyms_text', 'enabled', 'stems_text'], dtype='object')</code></p>\n\n<p>I am interested on getting just the rows containing in <code>synonyms_text</code> just the word <code>food</code> and not <code>seafood</code> for instance:</p>\n\n<pre><code>df_text= df_syn.loc[df_syn['synonyms_text'].str.contains('food')]\n</code></pre>\n\n<p>Having the following result (which contains seafood, foodlocker and others that are not wanted):</p>\n\n<pre><code>           category   synonyms_text  \\\n130          Fishing  seafarm, seafood, shellfish, sportfish   \n141   Refrigeration   coldstorage, foodlocker, freeze, fridge, ice, refrigeration   \n183     Food Service  cook, fastfood, foodserve, foodservice, foodtruck, mealprep   \n200       Restaurant  expresso, food, galley, gastropub, grill, java, kitchen\n377         fastfood  carryout, fastfood, takeout\n379  Animal Supplies  feed, fodder, grain, hay, petfood   \n613            store  convenience, food, grocer, grocery, market\n</code></pre>\n\n<p>Then, I sent the result to a list to get just food as word:</p>\n\n<pre><code>food_l=df_text['synonyms_text'].str.split().tolist()\n</code></pre>\n\n<p>However, I am getting in the list values as the following:</p>\n\n<pre><code>['carryout,', 'fastfood,', 'takeout']\n</code></pre>\n\n<p>so, I get rid of commas:</p>\n\n<pre><code>food_l= [[x.replace(\",\",\"\") for x in l]for l in food_l]\n</code></pre>\n\n<p>Then, finally I will get just the word <code>food</code> from the lists of list:</p>\n\n<pre><code>food_l= [[l for x in l if \"food\"==x]for l in food_l]\n</code></pre>\n\n<p>After, I get rid of empty lists:</p>\n\n<pre><code>food_l= [x for x in food_l if x != []]\n</code></pre>\n\n<p>Finally, I flatten the lists of list to get the final result:</p>\n\n<pre><code>food_l = [item for sublist in food_l for item in sublist]\n</code></pre>\n\n<p>And the final result is as follows:</p>\n\n<pre><code>[['bar', 'bistro', 'breakfast', 'buffet', 'cabaret', 'cafe', 'cantina', 'cappuccino', 'chai', 'coffee', 'commissary', 'cuisine', 'deli', 'dhaba', 'dine', 'diner', 'dining', 'eat', 'eater', 'eats', 'edible', 'espresso', 'expresso', 'food', 'galley', 'gastropub', 'grill', 'java', 'kitchen', 'latte', 'lounge', 'pizza', 'pizzeria', 'pub', 'publichouse', 'restaurant', 'roast', 'sandwich', 'snack', 'snax', 'socialhouse', 'steak', 'sub', 'sushi', 'takeout', 'taphouse', 'taverna', 'tea', 'tiffin', 'trattoria', 'treat', 'treatery'], ['convenience', 'food', 'grocer', 'grocery', 'market', 'mart', 'shop', 'store', 'variety']]\n</code></pre>\n\n<p>@Erfan This dataframe can be used as test:</p>\n\n<pre><code>df= pd.DataFrame({'category':['Fishing','Refrigeration','store'],'synonyms_text':['seafood','foodlocker','food']})\n</code></pre>\n\n<p>Both give empty:</p>\n\n<pre><code>df_tmp=  df.loc[df['synonyms_text'].str.match('\\bfood\\b')]\ndf_tmp= df.loc[df['synonyms_text'].str.contains(pat='\\bfood\\b', regex= True)]\n</code></pre>\n\n<p>Do you know a better way to get just the rows with the single word <code>food</code> without going through all this painful process? Do we have other function different to contains to look in the dataframe for an exact match in the values of the dataframe?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "trie"], "comments": [{"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1572476869, "post_id": 58634731, "comment_id": 103576484, "body": "what did you try? Did you try to use word instead of char ?"}, {"owner": {"reputation": 3457, "user_id": 2284490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba571b7d2f77a33c9b92af6c767677bb?s=128&d=identicon&r=PG", "display_name": "Cireo", "link": "https://stackoverflow.com/users/2284490/cireo"}, "edited": false, "score": 0, "creation_date": 1572477152, "post_id": 58634731, "comment_id": 103576562, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/45257286/can-i-use-a-trie-that-has-a-whole-word-on-each-node\" title=\"can i use a trie that has a whole word on each node\">stackoverflow.com/questions/45257286/&hellip;</a>"}], "owner": {"reputation": 702, "user_id": 2840697, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/831a2d6e5200fe22ab220918bfe43cb6?s=128&d=identicon&r=PG&f=1", "display_name": "user98235", "link": "https://stackoverflow.com/users/2840697/user98235"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1572476250, "creation_date": 1572476250, "question_id": 58634731, "link": "https://stackoverflow.com/questions/58634731/building-a-trie-where-each-node-contains-a-token-instead-of-a-character-in-pytho", "title": "building a trie where each node contains a token instead of a character in python", "body": "<p>is there a walkthrough on building a trie where each node contains a token or a word instead of a character in python?</p>\n\n<p>all the trie constructions i've seen on the web have each node containing a character. I'm looking if there are references on a trie where each node contains a token or a word instead of a character.</p>\n"}, {"tags": ["python", "python-3.x", "numpy"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1572476310, "post_id": 58634720, "comment_id": 103576343, "body": "Post your code as plain text, not an image."}], "answers": [{"comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1572476949, "post_id": 58634811, "comment_id": 103576503, "body": "fundamentally, the problem is that <code>matrika[0]</code> creates a <i>new array object</i> but doesn&#39;t copy the underlying buffer from <code>matrika</code>, and instead, shares that buffer, creating two views over the same data"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1572477119, "post_id": 58634811, "comment_id": 103576553, "body": "That&#39;s what I tried to express in my first paragraph."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1572477169, "post_id": 58634811, "comment_id": 103576567, "body": "I know, I upvoted, just sort of elaborating in a comment :) perhaps you can add <code>temp.flags</code> and show the output where you can see <code>OWNDATA : False</code>"}, {"owner": {"reputation": 1, "user_id": 8217173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cf5ece3042b59ade29f2550b14f3315?s=128&d=identicon&r=PG&f=1", "display_name": "nunca13", "link": "https://stackoverflow.com/users/8217173/nunca13"}, "edited": false, "score": 0, "creation_date": 1572720829, "post_id": 58634811, "comment_id": 103650105, "body": "Thank you for the explanation. My question is how should I proceed if I wanted temp to keep the original matrika[0], not just point at it&#39;s current value?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1572807508, "post_id": 58634811, "comment_id": 103666483, "body": "Use <code>np.copy()</code> to make a copy of the array."}], "tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": false, "score": 1, "last_activity_date": 1572476802, "creation_date": 1572476802, "answer_id": 58634811, "question_id": 58634720, "link": "https://stackoverflow.com/questions/58634720/variable-changes-after-i-change-the-element-of-array-i-defined-it-with/58634811#58634811", "title": "Variable changes after I change the element of array I defined it with?", "body": "<p>A numpy array is not like Python lists. The array is a single object, and when you index it you get slices that refer to parts of the array. The rows are not independent objects, they're just views into the array.</p>\n\n<p>So the value of <code>temp</code> is a reference to the first row of the array. Assigning to <code>matrika[0]</code> modifies the array. It's analogous to doing a slice assignment with regular lists, e.g.</p>\n\n<pre><code>matrika = [[1, 2, 3], [4, 5, 6], [5, 5, 5], [53, 1, 2]]\ntemp = matrika[0]\nmatrika[0][:] = matrika[1]\nprint(temp)\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8217173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cf5ece3042b59ade29f2550b14f3315?s=128&d=identicon&r=PG&f=1", "display_name": "nunca13", "link": "https://stackoverflow.com/users/8217173/nunca13"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1572476802, "creation_date": 1572476158, "last_edit_date": 1572476325, "question_id": 58634720, "link": "https://stackoverflow.com/questions/58634720/variable-changes-after-i-change-the-element-of-array-i-defined-it-with", "title": "Variable changes after I change the element of array I defined it with?", "body": "<p>I cannot comprehend what is happening in this picture. I define a variable temp and it changes on it's own after I change the array I defined it with. It's not how I thought it works at all.</p>\n\n<p>I'm using Python 3.6.1 if it matters.</p>\n\n<p><a href=\"https://i.stack.imgur.com/eikEi.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/eikEi.png\" alt=\"Situation\"></a></p>\n"}, {"tags": ["python", "arrays", "list"], "answers": [{"tags": [], "owner": {"reputation": 428, "user_id": 7881582, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8wVa2.png?s=128&g=1", "display_name": "Vikto", "link": "https://stackoverflow.com/users/7881582/vikto"}, "is_accepted": false, "score": 0, "last_activity_date": 1572479190, "last_edit_date": 1572479190, "creation_date": 1572478807, "answer_id": 58635062, "question_id": 58634687, "link": "https://stackoverflow.com/questions/58634687/quick-question-about-intersection-of-lists-in-python/58635062#58635062", "title": "Quick Question About Intersection of Lists in python", "body": "<p>Not sure if I understand your problem, but you can turn your lists into sets to get intersection between them like this:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>first_collection = set([1, 3, 4])\nsecond_collection = set([1, 5, 7])\n\nintersection = first_collection.insersection(second_collection)\n</code></pre>\n\n<p>Hope it helps somehow.</p>\n"}], "owner": {"reputation": 49, "user_id": 12277392, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-UpYdv2xzMzg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3repQydI7nfsJl86-jlVHLvLmlMVdQ/mo/photo.jpg?sz=128", "display_name": "Batselot", "link": "https://stackoverflow.com/users/12277392/batselot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1572479190, "creation_date": 1572475913, "last_edit_date": 1572476047, "question_id": 58634687, "link": "https://stackoverflow.com/questions/58634687/quick-question-about-intersection-of-lists-in-python", "title": "Quick Question About Intersection of Lists in python", "body": "<p>I am very new to python and I have a quick question about comparing lists.The code I have is very simple.I created an array using and wanted the intersection of array's 2nd indiced element and a certain list I have. This list changes constantly on the tags that are used but it consists of numbers.\nAnyway,from this I get the intersection I want homever, I want to do another thing to this code:\nAfter I use intersect function, I want to get the 0th and 1st elements of the row.\n\u0130.e print(intersection(D,liste[-1]))comes out to be [2,3] then I want to get [40,75] and [75,25]\nThis might be a very simple case but as I said I am a beginner and looking forward to learn more.\nThanks in advance</p>\n\n<pre><code>A=np.array([[25,25,1],[40,75,2],[75,25,3],[25,50,10]])\nC=[1,2,6]\nB=[1,2,19]\nD=[]\nD.extend(A[:,2])\ndef intersection(D,B): \n    lst3 = [value for value in D if value in B] \n    return(lst3)\n print(intersection(D,liste[-1])) \n</code></pre>\n"}, {"tags": ["python", "string", "date"], "answers": [{"comments": [{"owner": {"reputation": 75, "user_id": 12173572, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCPc4S-FGEnLA287axVR0KVgTwvtgj3MZ0YFGrlyw=k-s128", "display_name": "salem1992", "link": "https://stackoverflow.com/users/12173572/salem1992"}, "edited": false, "score": 0, "creation_date": 1572479596, "post_id": 58634782, "comment_id": 103577119, "body": "thanks!! for example i have this column of dates, but give me error: f&#39;{df.at[idx,&#39;fecha_vencimiento&#39;].month}/{df.at[idx,&#39;fecha_v&zwnj;&#8203;encimiento&#39;].day}/{d&zwnj;&#8203;f.at[idx,&#39;fecha_venc&zwnj;&#8203;imiento&#39;].year}"}, {"owner": {"reputation": 86481, "user_id": 2411802, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/RA92x.jpg?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/2411802/alexander"}, "reply_to_user": {"reputation": 75, "user_id": 12173572, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCPc4S-FGEnLA287axVR0KVgTwvtgj3MZ0YFGrlyw=k-s128", "display_name": "salem1992", "link": "https://stackoverflow.com/users/12173572/salem1992"}, "edited": false, "score": 0, "creation_date": 1572479740, "post_id": 58634782, "comment_id": 103577138, "body": "Try using the <code>dt</code> accessor function, <code>f&#39;{df.at[idx,&#39;fecha_vencimiento&#39;].dt.month}&#47;{df.at[idx,&#39;fech&zwnj;&#8203;a_vencimiento&#39;].dt.d&zwnj;&#8203;ay}&#47;{df.at[idx,&#39;fech&zwnj;&#8203;a_vencimiento&#39;].dt.y&zwnj;&#8203;ear}&#39;</code>"}, {"owner": {"reputation": 75, "user_id": 12173572, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCPc4S-FGEnLA287axVR0KVgTwvtgj3MZ0YFGrlyw=k-s128", "display_name": "salem1992", "link": "https://stackoverflow.com/users/12173572/salem1992"}, "edited": false, "score": 0, "creation_date": 1572479867, "post_id": 58634782, "comment_id": 103577165, "body": "give me SyntaxError: invalid syntax :("}, {"owner": {"reputation": 75, "user_id": 12173572, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCPc4S-FGEnLA287axVR0KVgTwvtgj3MZ0YFGrlyw=k-s128", "display_name": "salem1992", "link": "https://stackoverflow.com/users/12173572/salem1992"}, "edited": false, "score": 0, "creation_date": 1572479881, "post_id": 58634782, "comment_id": 103577169, "body": "df.at[idx,&#39;fecha_vencimiento&#39;] = f&#39;{df.at[idx,&#39;fecha_vencimiento&#39;].dt.month}/{df.at[idx,&#39;fech&zwnj;&#8203;a_vencimiento&#39;].dt.d&zwnj;&#8203;ay}/{df.at[idx,&#39;fech&zwnj;&#8203;a_vencimiento&#39;].dt.y&zwnj;&#8203;ear}&#39;"}, {"owner": {"reputation": 86481, "user_id": 2411802, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/RA92x.jpg?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/2411802/alexander"}, "reply_to_user": {"reputation": 75, "user_id": 12173572, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCPc4S-FGEnLA287axVR0KVgTwvtgj3MZ0YFGrlyw=k-s128", "display_name": "salem1992", "link": "https://stackoverflow.com/users/12173572/salem1992"}, "edited": false, "score": 0, "creation_date": 1572479950, "post_id": 58634782, "comment_id": 103577185, "body": "What is the output of <code>type(df.at[idx,&#39;fecha_vencimiento&#39;])</code>? That is, what do the date values currently look like? Strings, datetime values, timestamps, etc."}, {"owner": {"reputation": 75, "user_id": 12173572, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCPc4S-FGEnLA287axVR0KVgTwvtgj3MZ0YFGrlyw=k-s128", "display_name": "salem1992", "link": "https://stackoverflow.com/users/12173572/salem1992"}, "edited": false, "score": 0, "creation_date": 1572480133, "post_id": 58634782, "comment_id": 103577226, "body": "&#39;for idx,row in df.iterrows():     df.at[idx,&#39;fecha_vencimiento&#39;] = pd.to_datetime(df.at[idx,&#39;fecha_vencimiento&#39;]) df[&#39;fecha_vencimiento&#39;] = df[&#39;fecha_vencimiento&#39;].apply(lambda x: x.strftime(&#39;%m/%d/%Y&#39;)if not pd.isnull(x) else &#39;&#39;) for idx,row in df.iterrows():     if df.at[idx,&#39;fecha_vencimiento&#39;] != &quot;&quot;:         df.at[idx,&#39;fecha_vencimiento&#39;] = f&#39;{df.at[idx,&#39;fecha_vencimiento&#39;].dt.month}/{df.at[idx,&#39;fech&zwnj;&#8203;a_vencimiento&#39;].dt.d&zwnj;&#8203;ay}/{df.at[idx,&#39;fech&zwnj;&#8203;a_vencimiento&#39;].dt.y&zwnj;&#8203;ear}&#39;"}, {"owner": {"reputation": 75, "user_id": 12173572, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCPc4S-FGEnLA287axVR0KVgTwvtgj3MZ0YFGrlyw=k-s128", "display_name": "salem1992", "link": "https://stackoverflow.com/users/12173572/salem1992"}, "edited": false, "score": 0, "creation_date": 1572480153, "post_id": 58634782, "comment_id": 103577235, "body": "sorry, i cant put this in code mode, the type is STR"}, {"owner": {"reputation": 75, "user_id": 12173572, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCPc4S-FGEnLA287axVR0KVgTwvtgj3MZ0YFGrlyw=k-s128", "display_name": "salem1992", "link": "https://stackoverflow.com/users/12173572/salem1992"}, "edited": false, "score": 0, "creation_date": 1572480258, "post_id": 58634782, "comment_id": 103577259, "body": "some columns have empty rows date"}], "tags": [], "owner": {"reputation": 86481, "user_id": 2411802, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/RA92x.jpg?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/2411802/alexander"}, "is_accepted": true, "score": 1, "last_activity_date": 1572480884, "last_edit_date": 1572480884, "creation_date": 1572476638, "answer_id": 58634782, "question_id": 58634685, "link": "https://stackoverflow.com/questions/58634685/python-strftime-days-without-zero/58634782#58634782", "title": "Python strftime days without ZERO", "body": "<p>That <code>%-m</code> option does state that the format is platform specific, so mileage may vary.</p>\n\n<p>You can simply use f-strings in Python 3.</p>\n\n<pre><code>yest = datetime.now() - timedelta(21)\nyest = f'{yest.month}/{yest.day}/{yest.year}'\n&gt;&gt;&gt; yest\n'10/9/2019'\n</code></pre>\n\n<p>In the case of your dataframe explained in the comments:</p>\n\n<pre><code>df = pd.DataFrame({\n    'fecha_vencimiento': [\n        '12/25/2009', '01/05/2010', '04/13/2011', '']})\n\ndf['fecha_vencimiento'] = pd.to_datetime(\n    df['fecha_vencimiento'], format='%m/%d/%Y', errors='coerce').apply(\n        lambda x: f'{x.month}/{x.day}/{x.year}' \n        if pd.notnull(x) else '')\n</code></pre>\n"}], "owner": {"reputation": 75, "user_id": 12173572, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCPc4S-FGEnLA287axVR0KVgTwvtgj3MZ0YFGrlyw=k-s128", "display_name": "salem1992", "link": "https://stackoverflow.com/users/12173572/salem1992"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 58634782, "answer_count": 1, "score": 1, "last_activity_date": 1572480884, "creation_date": 1572475908, "last_edit_date": 1572478999, "question_id": 58634685, "link": "https://stackoverflow.com/questions/58634685/python-strftime-days-without-zero", "title": "Python strftime days without ZERO", "body": "<p>Why doesn't the codes from this page work?: <a href=\"http://strftime.org/\" rel=\"nofollow noreferrer\">http://strftime.org/</a>.\nI want to output date and months without leading zeroes, like <strong>'m/d/yyyy'</strong></p>\n\n<p>e.g.:\n<strong>'4/5/1992' YES</strong></p>\n\n<p>'04/05/1992' NO</p>\n\n<pre><code>from datetime import datetime, timedelta, date\nyest = datetime.strftime(datetime.now() - timedelta(21), '%-m-%-d-%Y')\nprint(yest)\n</code></pre>\n\n<pre><code>ValueError                                Traceback (most recent call last)\n&lt;ipython-input-35-7c70a0a7eee5&gt; in &lt;module&gt;\n      1 from datetime import datetime, timedelta, date\n----&gt; 2 yest = datetime.strftime(datetime.now() - timedelta(21), '%-m-%-d-%Y')\n      3 print(yest)\n\nValueError: Invalid format string\n</code></pre>\n"}, {"tags": ["python", "django", "python-3.x", "django-forms"], "answers": [{"tags": [], "owner": {"reputation": 61, "user_id": 11703357, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-5xEPY_Y9F40/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdecDoNH3e6PRDw6Tkw-NEIEgo4rg/photo.jpg?sz=128", "display_name": "Dawid D\u0119by", "link": "https://stackoverflow.com/users/11703357/dawid-d%c4%99by"}, "is_accepted": false, "score": 0, "last_activity_date": 1572779415, "creation_date": 1572779415, "answer_id": 58679589, "question_id": 58634650, "link": "https://stackoverflow.com/questions/58634650/can-i-filter-objects-in-forms-manytomanyfield-to-equal-value-selected-in-another/58679589#58679589", "title": "Can I filter objects in forms.ManyToManyField to equal value selected in another field?", "body": "<p>I think you should use instance from \"form\".</p>\n\n<p>Try something like this.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>    def __init__(self, *args, **kwargs):\n        super(ProductForm, self).__init__(*args, **kwargs) \n        self.fields['variants'].queryset = Variant.objects.select_related('variantCategory__productCategory').filter(variantCategory__productCategory_id=self.instance.productCategory_id)\n</code></pre>\n\n<p>This solution won't work if you add new Product, because you won't have instance (instance will be only on memory, not database) so you couldn't match foreign_key. As u can see i added select_related. Bellow some good practice </p>\n\n<ul>\n<li><p>remember to use <strong>select_related</strong>:</p>\n\n<pre><code>Variant.objects.select_related('variantCategory__productCategory').filter(variantCategory__productCategory_id=instance.productCategory_id) \n</code></pre></li>\n<li><p>use model_id instaed of model.id</p>\n\n<p>Variant.objects.select_related('variantCategory__productCategory').filter(variantCategory__productCategory_id=instance.productCategory_id)</p></li>\n</ul>\n\n<hr>\n\n<p>If you just need the query to get all objects where productCategory equals to another productCategory try this:</p>\n\n<pre><code>myProductCategory = ProductCategory.objects.last()\nProduct.objects.filter(productCategory__id=myProductCategory.id)  \n</code></pre>\n\n<p>Let me know if it works :)</p>\n"}], "owner": {"reputation": 35, "user_id": 8551734, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6ede5d6e9ce555195560a109b736076?s=128&d=identicon&r=PG&f=1", "display_name": "Kilian Legters", "link": "https://stackoverflow.com/users/8551734/kilian-legters"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1572779415, "creation_date": 1572475693, "question_id": 58634650, "link": "https://stackoverflow.com/questions/58634650/can-i-filter-objects-in-forms-manytomanyfield-to-equal-value-selected-in-another", "title": "Can I filter objects in forms.ManyToManyField to equal value selected in another field?", "body": "<p>I want to set a queryset on a ManyToManyField to get all objects that have a ForeignKey equal to ForeignKey set in another formfield.</p>\n\n<pre><code>class ProductAdminForm(forms.ModelForm):\n    def __init__(self, *args, **kwargs):\n        super(ProductAdminForm, self).__init__(*args, **kwargs)\n        self.fields['variants'].queryset = Variant.objects.filter(variantCategory__productCategory__name_single='test')\n</code></pre>\n\n<p>This works, It selects all \"Variant\"'s where value of \"name_single\" of productCategory in its variantCategory is equal to 'test'. I want to replace 'test' to be equal to \"name_equal\" of productCategory set in this very form.</p>\n\n<p>Here is some code to ilustrate how the objects relate to eachother.</p>\n\n<pre><code>class Variant(models.Model):\n    variantCategory = models.ForeignKey('VariantCategory')\n\nclass VariantCategory(models.Model):\n    productCategory = models.ForeignKey('ProductCategory')\n\nclass ProductCategory(models.Model):\n    name_single = models.CharField()\n\n</code></pre>\n\n<p><a href=\"https://imgur.com/a/OLah8at\" rel=\"nofollow noreferrer\">https://imgur.com/a/OLah8at</a></p>\n\n<p>This shows the field that should define the productCategory to equal to.</p>\n\n<p>I realize this is kind of hard to explain, if any of you need extra code/info let me know!</p>\n\n<p>Also, I just need the query to get all objects where productCategory equals to another productCategory. The \"name_equal\" part doesn't really matter, could be the id of the object to!</p>\n"}, {"tags": ["python", "argparse"], "comments": [{"owner": {"reputation": 2389, "user_id": 7348030, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-7PmbNFJwfPc/AAAAAAAAAAI/AAAAAAAAAJE/5lDuTFQtNpQ/photo.jpg?sz=128", "display_name": "Florian Bernard", "link": "https://stackoverflow.com/users/7348030/florian-bernard"}, "edited": false, "score": 0, "creation_date": 1572475786, "post_id": 58634636, "comment_id": 103576192, "body": "Please show your error, it&#39;s will be helpful."}, {"owner": {"reputation": 117, "user_id": 10859686, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e6ab2024ccac8a649d70a1b7b9f256a?s=128&d=identicon&r=PG&f=1", "display_name": "NoobCoder", "link": "https://stackoverflow.com/users/10859686/noobcoder"}, "reply_to_user": {"reputation": 2389, "user_id": 7348030, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-7PmbNFJwfPc/AAAAAAAAAAI/AAAAAAAAAJE/5lDuTFQtNpQ/photo.jpg?sz=128", "display_name": "Florian Bernard", "link": "https://stackoverflow.com/users/7348030/florian-bernard"}, "edited": false, "score": 0, "creation_date": 1572476075, "post_id": 58634636, "comment_id": 103576271, "body": "@FlorianBernard, I&#39;ve added one, thanks for having a look"}], "answers": [{"tags": [], "owner": {"reputation": 165, "user_id": 4492008, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3xmVAH1w4Bc/AAAAAAAAAAI/AAAAAAAADBA/CIKDXxqGFe8/photo.jpg?sz=128", "display_name": "andrea_grioni", "link": "https://stackoverflow.com/users/4492008/andrea-grioni"}, "is_accepted": false, "score": 0, "last_activity_date": 1572476117, "creation_date": 1572476117, "answer_id": 58634713, "question_id": 58634636, "link": "https://stackoverflow.com/questions/58634636/new-to-argparse-not-sure-where-my-error-is/58634713#58634713", "title": "new to argParse, not sure where my error is", "body": "<p>you can add 'dest=(str)' to send the argument as an attribute of args.</p>\n\n<pre><code>parser.add_argument(\n          'radius',\n          type=int,\n          help=\"radius plzz\",\n          dest='radius'\n         )\nparser.add_argument(\n                'height',\n                type=int,\n                help=\"height plzz\",\n                dest='height'\n               )\n</code></pre>\n\n<p>Then you can call the arguments as you did in:</p>\n\n<pre><code>print(cylinder_volume(args.radius, args.height))\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 117, "user_id": 10859686, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e6ab2024ccac8a649d70a1b7b9f256a?s=128&d=identicon&r=PG&f=1", "display_name": "NoobCoder", "link": "https://stackoverflow.com/users/10859686/noobcoder"}, "edited": false, "score": 0, "creation_date": 1572476698, "post_id": 58634719, "comment_id": 103576442, "body": "Adding the parser_args([&#39;123&#39;, &#39;456&#39;]) sorted it out for me. Quick question, how can I run my script the other way you pointed out, the &#39;script_name.py 123 456&#39;?"}, {"owner": {"reputation": 69906, "user_id": 6890912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d291e4dfbf14dcc8874bd4fa620fac23?s=128&d=identicon&r=PG&f=1", "display_name": "blhsing", "link": "https://stackoverflow.com/users/6890912/blhsing"}, "reply_to_user": {"reputation": 117, "user_id": 10859686, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e6ab2024ccac8a649d70a1b7b9f256a?s=128&d=identicon&r=PG&f=1", "display_name": "NoobCoder", "link": "https://stackoverflow.com/users/10859686/noobcoder"}, "edited": false, "score": 0, "creation_date": 1572476917, "post_id": 58634719, "comment_id": 103576498, "body": "You would have to run something like <code>python PythonApplication1CommandLine.py 123 456</code> in the command line (in a <code>cmd.exe</code> or PowerShell session) in the directory where the script is located."}, {"owner": {"reputation": 117, "user_id": 10859686, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e6ab2024ccac8a649d70a1b7b9f256a?s=128&d=identicon&r=PG&f=1", "display_name": "NoobCoder", "link": "https://stackoverflow.com/users/10859686/noobcoder"}, "edited": false, "score": 1, "creation_date": 1572478284, "post_id": 58634719, "comment_id": 103576828, "body": "Thank you! You&#39;ve been very helpful"}], "tags": [], "owner": {"reputation": 69906, "user_id": 6890912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d291e4dfbf14dcc8874bd4fa620fac23?s=128&d=identicon&r=PG&f=1", "display_name": "blhsing", "link": "https://stackoverflow.com/users/6890912/blhsing"}, "is_accepted": true, "score": 2, "last_activity_date": 1572476153, "creation_date": 1572476153, "answer_id": 58634719, "question_id": 58634636, "link": "https://stackoverflow.com/questions/58634636/new-to-argparse-not-sure-where-my-error-is/58634719#58634719", "title": "new to argParse, not sure where my error is", "body": "<p><code>args = parser.parse_args()</code> parses the command line arguments (accessible as the <code>sys.argv</code> list) and makes the first argument <code>args.radius</code> and the second argument <code>args.height</code>, per the calls to the <code>add_argument</code> method. So all you need to do is to run the script from the command line with two integer arguments, e.g.:</p>\n\n<pre><code>script_name.py 123 456\n</code></pre>\n\n<p>or to test it in an IDE such as Visual Studio, you can pass a list of arguments to <code>parse_args</code> instead:</p>\n\n<pre><code>args = parser.parse_args(['123', '456'])\n</code></pre>\n\n<p>which outputs:</p>\n\n<pre><code>21673294.79680895\n</code></pre>\n"}], "owner": {"reputation": 117, "user_id": 10859686, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e6ab2024ccac8a649d70a1b7b9f256a?s=128&d=identicon&r=PG&f=1", "display_name": "NoobCoder", "link": "https://stackoverflow.com/users/10859686/noobcoder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "accepted_answer_id": 58634719, "answer_count": 2, "score": 1, "last_activity_date": 1572480924, "creation_date": 1572475587, "last_edit_date": 1572480924, "question_id": 58634636, "link": "https://stackoverflow.com/questions/58634636/new-to-argparse-not-sure-where-my-error-is", "title": "new to argParse, not sure where my error is", "body": "<p>I am completely new to Python, just started today and getting to grips with Python. Running it in Visual Studio btw.</p>\n\n<p>Came across the <code>import argParse</code> and this is where things got a bit confusing for me. \nI have some code I'm trying to get to work but it won't and I am quite clueless. \nI'm getting an error on the code <code>args = parser.parse_args()</code> and I have no idea why either. Code is below</p>\n\n<pre><code>import math\nimport argparse\n\nparser = argparse.ArgumentParser(description='calculate')\nparser.add_argument('radius', type=int, help=\"radius plzz\")\nparser.add_argument('height', type=int, help=\"height plzz\")\nargs = parser.parse_args()\n\n\ndef cylinder_volume(radius, height):\n    vol = (math.pi) * (radius ** 2) * height\n    return vol\n\nif __name__ == '__main__':\n    print(cylinder_volume(args.radius, args.height))\n</code></pre>\n\n<p>I do have an idea of what's going on in this code but I don't know why it won't run as expected? \nMaybe because I'm using Visual Studio? Maybe I need to import something else..</p>\n\n<p>I have an image of the error!\n<a href=\"https://i.stack.imgur.com/ieF6k.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ieF6k.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "batch-file", "urllib"], "answers": [{"tags": [], "owner": {"reputation": 3, "user_id": 10906021, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f0c9dd8c21088c15a9cabaed08a6ce0?s=128&d=identicon&r=PG&f=1", "display_name": "gadkins", "link": "https://stackoverflow.com/users/10906021/gadkins"}, "is_accepted": false, "score": 0, "last_activity_date": 1573591329, "creation_date": 1573591329, "answer_id": 58826365, "question_id": 58634619, "link": "https://stackoverflow.com/questions/58634619/module-urllib-has-no-attribute-request-error-when-run-from-batch-file-but-w/58826365#58826365", "title": "Module &#39;urllib&#39; has no attribute &#39;request&#39; error when run from batch file, but works fine from IDE", "body": "<p>I found a resolution.  I updated my code to <code>import urllib.request</code> which seems to not only import the package, but also the <code>request</code> submodule.  However, I'm still unclear as to why this is needed when executing via the command line, but not with Spyder and Jupyter.</p>\n\n<p>This post seems to summarize the answer best:  </p>\n\n<p><a href=\"https://stackoverflow.com/questions/33206536/import-urllib-parse-fails-when-python-run-from-command-line\">import urllib.parse fails when Python run from command line</a></p>\n"}], "owner": {"reputation": 3, "user_id": 10906021, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f0c9dd8c21088c15a9cabaed08a6ce0?s=128&d=identicon&r=PG&f=1", "display_name": "gadkins", "link": "https://stackoverflow.com/users/10906021/gadkins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 70, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1573591329, "creation_date": 1572475512, "last_edit_date": 1572884907, "question_id": 58634619, "link": "https://stackoverflow.com/questions/58634619/module-urllib-has-no-attribute-request-error-when-run-from-batch-file-but-w", "title": "Module &#39;urllib&#39; has no attribute &#39;request&#39; error when run from batch file, but works fine from IDE", "body": "<p>I get the exception \"module 'urllib' has no attribute 'request'\" when I run my program via a bat file, but it works fine when I run it in the Spyder IDE.  I'm running Python v3.7.  What could be the difference?  I want to run it via the batch file.</p>\n\n<p>Batch file:</p>\n\n<pre><code>@echo off\n@python c:\\users\\gadkins\\documents\\pythonscripts\\dl_unzip.py %*\n@pause\n</code></pre>\n\n<p>py file snippet:</p>\n\n<pre><code>import urllib\nimport smtplib\nimport ssl\n\nurl_src = 'https://site.edu//uploads/tmp/_Files0805-21Oct2019.zip'\nurl_dst = 'D:\\download\\af.zip'\nuzip_src = url_dst\nuzip_dst = r'D:\\data\\af'\ndata_type = 'af'\n\ntry:\n    urllib.request.urlretrieve(url_src, url_dst)\nexcept Exception as e: \n    error = str(e)\n    print(error)\n    print(study + ': ' + data_type + ' download failed!')\n    print('Exception = ' + error)\n\n    #if email == '-e':\n    msg('dl_fail', study, data_type, '', error)\n\n    context = ssl.create_default_context()\n    with smtplib.SMTP_SSL(smtp_server, port, context=context) as server:\n        server.login(sender_email, password)\n        server.sendmail(sender_email, receiver_email, message)\n</code></pre>\n"}, {"tags": ["python", "keras"], "answers": [{"tags": [], "owner": {"reputation": 575, "user_id": 6919063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/359235a871e6b15c4ba2cb529a5dd24e?s=128&d=identicon&r=PG&f=1", "display_name": "Jacob B", "link": "https://stackoverflow.com/users/6919063/jacob-b"}, "is_accepted": false, "score": 0, "last_activity_date": 1572480580, "last_edit_date": 1572480580, "creation_date": 1572480248, "answer_id": 58635241, "question_id": 58634560, "link": "https://stackoverflow.com/questions/58634560/three-dimensional-output-loss/58635241#58635241", "title": "Three Dimensional Output Loss", "body": "<p>I solved this issue, using a model with lower hidden nodes per layer reduced model complexity and allowed for convergence.</p>\n\n<p>That being said, I am still looking for an explanation as to why this is and also I am curious about a three dimensional output and how loss is calculated over time if anyone can provide an answer.</p>\n"}], "owner": {"reputation": 575, "user_id": 6919063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/359235a871e6b15c4ba2cb529a5dd24e?s=128&d=identicon&r=PG&f=1", "display_name": "Jacob B", "link": "https://stackoverflow.com/users/6919063/jacob-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 27, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1572480580, "creation_date": 1572475151, "question_id": 58634560, "link": "https://stackoverflow.com/questions/58634560/three-dimensional-output-loss", "title": "Three Dimensional Output Loss", "body": "<p>I am currently working on implementing a time series prediction task that will produce labels across a sequence (batch, steps, features) -> (batch, steps, classes). I have a TimeDistributed layer as my final layer and have a three dimensional output due to this, I seem to be getting terrible accuracy. I am wondering if this is due to the three dimensional output not being calculated correctly in the loss. Is there a better way to do this?</p>\n\n<pre><code>K.clear_session()\n\ndef acc(y_true, y_pred):\n    y_pred = tf.argmax(y_pred, 2)\n    y_true = tf.squeeze(y_true, -1)\n    return categorical_accuracy(y_true, y_pred)\n\ndef loss(labels, logits):\n    return tf.keras.losses.sparse_categorical_crossentropy(labels, logits, from_logits=True)\n\ndef build_model():\n    char_in = Input(shape=(None, None)) #sequence length, word char length\n    char_emb = Embedding(char_emb_weights.shape[1], 32, weights=char_emb_weights, trainable=False)(char_in)\n    char_GRU = TimeDistributed(Bidirectional(GRU(32, recurrent_initializer='glorot_uniform'), 'concat'))(char_emb)\n    lstm = LSTM(64, return_sequences=True, recurrent_initializer='glorot_uniform')(char_GRU)\n    dense = TimeDistributed(Dense(16, activation='relu'))(lstm)\n    output = TimeDistributed(Dense(3, activation='softmax'))(dense)\n    #output = CRF(target_size, sparse_target=True)(dense)\n    m = Model(inputs=[word_in, char_in], outputs=output)\n    m.compile(optimizer='sgd', loss=loss, metrics=[acc])\n    return m\n</code></pre>\n"}, {"tags": ["python"], "answers": [{"tags": [], "owner": {"reputation": 31669, "user_id": 3799759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5820aa24337a2f622b78e92c39e3e3d6?s=128&d=identicon&r=PG", "display_name": "Samwise", "link": "https://stackoverflow.com/users/3799759/samwise"}, "is_accepted": false, "score": 0, "last_activity_date": 1572475333, "creation_date": 1572475333, "answer_id": 58634591, "question_id": 58634556, "link": "https://stackoverflow.com/questions/58634556/how-to-use-two-arguments-for-a-function-being-one-of-them-a-list-of-values-and-t/58634591#58634591", "title": "How to use two arguments for a function being one of them a list of values and the other a number?", "body": "<p>Here's a simple solution using list comprehension:</p>\n\n<pre><code>def myfunction(data: List[float], percentage: float) -&gt; List[float]:\n    return [datum * 0.01 * percentage for datum in data]\n</code></pre>\n\n<p>Here's how you might do it with a <code>for</code> loop:</p>\n\n<pre><code>def myfunction(data: List[float], percentage: float) -&gt; List[float]:\n    result = []\n    for datum in data:\n        result.append(datum * 0.01 * percentage)\n    return result\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "is_accepted": false, "score": 0, "last_activity_date": 1572475690, "creation_date": 1572475690, "answer_id": 58634648, "question_id": 58634556, "link": "https://stackoverflow.com/questions/58634556/how-to-use-two-arguments-for-a-function-being-one-of-them-a-list-of-values-and-t/58634648#58634648", "title": "How to use two arguments for a function being one of them a list of values and the other a number?", "body": "<p>You can iterate over the list calling your function for each value and create a new list:</p>\n\n<pre><code>values = [100, 25, 368]\n\nresult = [myfunction(value, 12) for value in values]\n</code></pre>\n\n<p>This syntax for creating a list by iterating over some sequence of values is called a <a href=\"https://docs.python.org/3/tutorial/datastructures.html#list-comprehensions\" rel=\"nofollow noreferrer\">List Comprehension</a>.</p>\n"}], "owner": {"reputation": 21, "user_id": 12300131, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/314d6110fb583e08a0830bae6a589a2e?s=128&d=identicon&r=PG&f=1", "display_name": "cptqrk", "link": "https://stackoverflow.com/users/12300131/cptqrk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 29, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1572475690, "creation_date": 1572475130, "last_edit_date": 1572475325, "question_id": 58634556, "link": "https://stackoverflow.com/questions/58634556/how-to-use-two-arguments-for-a-function-being-one-of-them-a-list-of-values-and-t", "title": "How to use two arguments for a function being one of them a list of values and the other a number?", "body": "<p>I need to write a function with two arguments, a list of values and the percentage that we want to calculate, so for example <code>function(100,12)</code> gives me <code>12%</code> of 100 which is 12</p>\n\n<pre><code>def myfunction(data,percentage):\n    return data*0.01*percentage\n\nmyfunction(100,12)\n</code></pre>\n\n<p>Until here everything fine, but the question asks me to calculate for a list of values like <code>[100,25,368]</code></p>\n\n<pre><code>myfunction([100,25,368],12)\n</code></pre>\n\n<p>gives me an error, how can I use in the argument a list of values as this one and obtain another list with the results <code>[12,3,44.16]</code> in this case?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 2192, "user_id": 5942579, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/o6P12.jpg?s=128&g=1", "display_name": "Emmanuel Mtali", "link": "https://stackoverflow.com/users/5942579/emmanuel-mtali"}, "edited": false, "score": 0, "creation_date": 1572475121, "post_id": 58634542, "comment_id": 103576014, "body": "Post the complate code"}, {"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 2, "creation_date": 1572475178, "post_id": 58634542, "comment_id": 103576033, "body": "Empty strings <i>are</i> false."}, {"owner": {"reputation": 15430, "user_id": 4518341, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eVuAv.png?s=128&g=1", "display_name": "wjandrea", "link": "https://stackoverflow.com/users/4518341/wjandrea"}, "edited": false, "score": 0, "creation_date": 1572475264, "post_id": 58634542, "comment_id": 103576056, "body": "Empty strings are <a href=\"https://docs.python.org/3/library/stdtypes.html#truth-value-testing\" rel=\"nofollow noreferrer\">falsy</a>. Please make a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. BTW welcome to Stack Overflow! Check out the <a href=\"https://stackoverflow.com/tour\">tour</a>."}, {"owner": {"reputation": 46136, "user_id": 3890632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hNkgF.png?s=128&g=1", "display_name": "khelwood", "link": "https://stackoverflow.com/users/3890632/khelwood"}, "edited": false, "score": 1, "creation_date": 1572475341, "post_id": 58634542, "comment_id": 103576081, "body": "The problem isn&#39;t that empty strings aren&#39;t falsey (they are). The problem is that <code>[&#39;&#39;]</code>, a list containing an empty string, is not falsey."}], "answers": [{"comments": [{"owner": {"reputation": 15430, "user_id": 4518341, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eVuAv.png?s=128&g=1", "display_name": "wjandrea", "link": "https://stackoverflow.com/users/4518341/wjandrea"}, "edited": false, "score": 0, "creation_date": 1572475627, "post_id": 58634587, "comment_id": 103576151, "body": "You&#39;re talking about a <a href=\"https://docs.python.org/3/library/stdtypes.html?#lists\" rel=\"nofollow noreferrer\">list</a>. An <a href=\"https://docs.python.org/3/library/array.html\" rel=\"nofollow noreferrer\">array</a> is something different in Python."}, {"owner": {"reputation": 64, "user_id": 9817316, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-QfnSu-MoUTk/AAAAAAAAAAI/AAAAAAAAAUs/64YDUeZzWSg/photo.jpg?sz=128", "display_name": "Puddles", "link": "https://stackoverflow.com/users/9817316/puddles"}, "reply_to_user": {"reputation": 15430, "user_id": 4518341, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eVuAv.png?s=128&g=1", "display_name": "wjandrea", "link": "https://stackoverflow.com/users/4518341/wjandrea"}, "edited": false, "score": 0, "creation_date": 1572475677, "post_id": 58634587, "comment_id": 103576171, "body": "Right!  Some antics.  Thanks."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1572475831, "post_id": 58634587, "comment_id": 103576199, "body": "This will append empty strings to <code>city_temp</code> when the line is empty."}], "tags": [], "owner": {"reputation": 64, "user_id": 9817316, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-QfnSu-MoUTk/AAAAAAAAAAI/AAAAAAAAAUs/64YDUeZzWSg/photo.jpg?sz=128", "display_name": "Puddles", "link": "https://stackoverflow.com/users/9817316/puddles"}, "is_accepted": false, "score": -1, "last_activity_date": 1572475689, "last_edit_date": 1572475689, "creation_date": 1572475315, "answer_id": 58634587, "question_id": 58634542, "link": "https://stackoverflow.com/questions/58634542/while-loop-doesnt-terminate-due-to-empty-strings/58634587#58634587", "title": "while loop doesn&#39;t terminate due to empty strings", "body": "<p>It looks like your \"temp\" is a list, which if not empty, will evaluate to True.</p>\n\n<p>Can you use something like:</p>\n\n<pre><code>for t in temp:\n    city_temp.append(t)\n</code></pre>\n\n<p>?</p>\n"}, {"tags": [], "owner": {"reputation": 46136, "user_id": 3890632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hNkgF.png?s=128&g=1", "display_name": "khelwood", "link": "https://stackoverflow.com/users/3890632/khelwood"}, "is_accepted": false, "score": 1, "last_activity_date": 1572475556, "creation_date": 1572475556, "answer_id": 58634627, "question_id": 58634542, "link": "https://stackoverflow.com/questions/58634542/while-loop-doesnt-terminate-due-to-empty-strings/58634627#58634627", "title": "while loop doesn&#39;t terminate due to empty strings", "body": "<p>The problem isn't that empty strings aren't falsey (they are). The problem is that <code>['']</code>, a list containing an empty string, is not falsey. Why not read your string into a variable and check if that is empty, rather than splitting it immediately?</p>\n\n<pre><code>city_temp = []\nline = mean_temp.readline().strip()\nwhile line:\n    city_temp.append(line.split(','))\n    line = mean_temp.readline().strip()\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 12300108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50e18c706f2b26f4cc9cafa9e4dd5209?s=128&d=identicon&r=PG&f=1", "display_name": "WAM", "link": "https://stackoverflow.com/users/12300108/wam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 217, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1572475689, "creation_date": 1572475040, "last_edit_date": 1572475141, "question_id": 58634542, "link": "https://stackoverflow.com/questions/58634542/while-loop-doesnt-terminate-due-to-empty-strings", "title": "while loop doesn&#39;t terminate due to empty strings", "body": "<p>While loop doesn't terminate because temp variable always receives an empty string which is never false.  How can I avoid this?</p>\n\n<pre><code>city_temp = []\ntemp = mean_temp.readline().strip().split(\",\")\nwhile temp:\n    city_temp.append(temp)\n\n    temp = mean_temp.readline().strip().split(\",\")\n</code></pre>\n"}, {"tags": ["python", "function", "jupyter-notebook", "package", "add"], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 9979142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39f6ef0991700091d68926996ac0daa0?s=128&d=identicon&r=PG&f=1", "display_name": "M. Straube", "link": "https://stackoverflow.com/users/9979142/m-straube"}, "edited": false, "score": 0, "creation_date": 1572477641, "post_id": 58634819, "comment_id": 103576676, "body": "Thanks for the hint. This is clear to me. The issue is that NEW functions added to a python package file don&#39;t show up even after new import of the module within a cell."}, {"owner": {"reputation": 106, "user_id": 2774695, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/ccb47d8a4d46ba18331d2ab8ff383feb?s=128&d=identicon&r=PG&f=1", "display_name": "user2774695", "link": "https://stackoverflow.com/users/2774695/user2774695"}, "reply_to_user": {"reputation": 15, "user_id": 9979142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39f6ef0991700091d68926996ac0daa0?s=128&d=identicon&r=PG&f=1", "display_name": "M. Straube", "link": "https://stackoverflow.com/users/9979142/m-straube"}, "edited": false, "score": 0, "creation_date": 1572478912, "post_id": 58634819, "comment_id": 103576966, "body": "Ah I see, one suggestion is to make sure you are modifying a module from the version of python that you are installing. If its source code you are modifying, make sure that you actually install the package via pip."}], "tags": [], "owner": {"reputation": 106, "user_id": 2774695, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/ccb47d8a4d46ba18331d2ab8ff383feb?s=128&d=identicon&r=PG&f=1", "display_name": "user2774695", "link": "https://stackoverflow.com/users/2774695/user2774695"}, "is_accepted": false, "score": 0, "last_activity_date": 1572476850, "creation_date": 1572476850, "answer_id": 58634819, "question_id": 58634531, "link": "https://stackoverflow.com/questions/58634531/jupyter-notebook-newly-added-functions-not-accessible/58634819#58634819", "title": "Jupyter Notebook: Newly added functions not accessible", "body": "<p>When you are in a cell with the code/function you want to use, press Shift + Enter to be able to access that code in the next cell. </p>\n"}, {"tags": [], "owner": {"reputation": 15, "user_id": 9979142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39f6ef0991700091d68926996ac0daa0?s=128&d=identicon&r=PG&f=1", "display_name": "M. Straube", "link": "https://stackoverflow.com/users/9979142/m-straube"}, "is_accepted": true, "score": 0, "last_activity_date": 1572480586, "creation_date": 1572480586, "answer_id": 58635278, "question_id": 58634531, "link": "https://stackoverflow.com/questions/58634531/jupyter-notebook-newly-added-functions-not-accessible/58635278#58635278", "title": "Jupyter Notebook: Newly added functions not accessible", "body": "<p>I solved the issue. It was rather obvious. You need to restart the kernel, so that the newly added methods can be accessed.</p>\n\n<p>Just rerunning the import cell is not sufficient.</p>\n"}], "owner": {"reputation": 15, "user_id": 9979142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39f6ef0991700091d68926996ac0daa0?s=128&d=identicon&r=PG&f=1", "display_name": "M. Straube", "link": "https://stackoverflow.com/users/9979142/m-straube"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 58635278, "answer_count": 2, "score": 0, "last_activity_date": 1572480586, "creation_date": 1572474962, "question_id": 58634531, "link": "https://stackoverflow.com/questions/58634531/jupyter-notebook-newly-added-functions-not-accessible", "title": "Jupyter Notebook: Newly added functions not accessible", "body": "<p><br>\nsimilar to <a href=\"https://stackoverflow.com/questions/53049195/importing-custom-module-into-jupyter-notebook\">this issue</a> and this <a href=\"https://www.pythoncentral.io/how-to-create-a-python-package/\" rel=\"nofollow noreferrer\">topic related article</a>, I have created my own \npackage within Jupyter Notebook. I can successfully access module content after the first import of a python file. <br> <br></p>\n\n<p>However, whenever I'd like to add a new function to the python file, I am unable to access it then within my notebook.</p>\n\n<p>I've tried the following: <br>\n- adjust and save the python file online\n- delete the old python version and upload a new one</p>\n\n<p>The only thing working was to upload the python file with a different name. But this is not really what I want to achieve :D</p>\n\n<p>Anyone here having an idea how to add new functions with direct access ability?</p>\n\n<p>This is how I import my modules:</p>\n\n<pre><code>import os\nimport sys\nsys.path.insert(0, os.path.abspath('/home/ubuntu/jupyter/src/..'))\nfrom src.parsing import general\n\ngeneral.    &lt;-- function list popping up\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "jupyter-notebook", "moviepy"], "answers": [{"comments": [{"owner": {"reputation": 611, "user_id": 624048, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/s7Pgj.jpg?s=128&g=1", "display_name": "Lincoln", "link": "https://stackoverflow.com/users/624048/lincoln"}, "edited": false, "score": 0, "creation_date": 1572556949, "post_id": 58634730, "comment_id": 103607409, "body": "That was it. Thanks"}], "tags": [], "owner": {"reputation": 831, "user_id": 3073185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6hlOb.png?s=128&g=1", "display_name": "Sach", "link": "https://stackoverflow.com/users/3073185/sach"}, "is_accepted": true, "score": 0, "last_activity_date": 1572476250, "creation_date": 1572476250, "answer_id": 58634730, "question_id": 58634515, "link": "https://stackoverflow.com/questions/58634515/how-to-show-only-the-final-output-on-jupyter-notebook/58634730#58634730", "title": "how to show only the final output on jupyter notebook", "body": "<p>In VideoClip.write_videofile, you have option to pass verbose as false, by default it is true.</p>\n\n<pre><code> def write_videofile(self, filename, fps=None, codec=None,\n                        bitrate=None, audio=True, audio_fps=44100,\n                        preset=\"medium\",\n                        audio_nbytes=4, audio_codec=None,\n                        audio_bitrate=None, audio_bufsize=2000,\n                        temp_audiofile=None,\n                        rewrite_audio=True, remove_temp=True,\n                        write_logfile=False, \n                        verbose=True, #pass this as False\n                        threads=None, ffmpeg_params=None,\n                        progress_bar=True):\n</code></pre>\n"}], "owner": {"reputation": 611, "user_id": 624048, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/s7Pgj.jpg?s=128&g=1", "display_name": "Lincoln", "link": "https://stackoverflow.com/users/624048/lincoln"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 58634730, "answer_count": 1, "score": 0, "last_activity_date": 1572476250, "creation_date": 1572474830, "question_id": 58634515, "link": "https://stackoverflow.com/questions/58634515/how-to-show-only-the-final-output-on-jupyter-notebook", "title": "how to show only the final output on jupyter notebook", "body": "<p>How can I only display the final output and not the entire stdout on a notebook? I'm using moviepy and the stdout takes 80% of the screen. <a href=\"https://i.stack.imgur.com/Wfszx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Wfszx.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "python-3.x", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 12134565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf53736a8767ab30023fe72819b4d00b?s=128&d=identicon&r=PG&f=1", "display_name": "ACAYA", "link": "https://stackoverflow.com/users/12134565/acaya"}, "edited": false, "score": 0, "creation_date": 1572478904, "post_id": 58634768, "comment_id": 103576965, "body": "Oh wow!  Thank you!  It took me a minute to follow the nested loops, but I think this is the right process.  I&#39;m running into other issues with my data that was brought to light by your code, but when I isolate parts of the data this code works perfectly for what I want.  Thank you again!"}, {"owner": {"reputation": 3426, "user_id": 10818128, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-YiTeo4kuZiQ/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcYYf6McGCeXvwrDf9sDgLHNO5VGKQ/mo/photo.jpg?sz=128", "display_name": "Derek Eden", "link": "https://stackoverflow.com/users/10818128/derek-eden"}, "reply_to_user": {"reputation": 31, "user_id": 12134565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf53736a8767ab30023fe72819b4d00b?s=128&d=identicon&r=PG&f=1", "display_name": "ACAYA", "link": "https://stackoverflow.com/users/12134565/acaya"}, "edited": false, "score": 0, "creation_date": 1572484891, "post_id": 58634768, "comment_id": 103578195, "body": "this would crash if any of the three fuels is not listed in the row or two or more different fuels occur in each row..is that one of the issues you&#39;re running into?"}], "tags": [], "owner": {"reputation": 3426, "user_id": 10818128, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-YiTeo4kuZiQ/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcYYf6McGCeXvwrDf9sDgLHNO5VGKQ/mo/photo.jpg?sz=128", "display_name": "Derek Eden", "link": "https://stackoverflow.com/users/10818128/derek-eden"}, "is_accepted": true, "score": 1, "last_activity_date": 1572484800, "last_edit_date": 1572484800, "creation_date": 1572476491, "answer_id": 58634768, "question_id": 58634478, "link": "https://stackoverflow.com/questions/58634478/search-columns-for-a-specific-set-of-text-and-if-the-text-is-found-enter-new-a-n/58634768#58634768", "title": "Search columns for a specific set of text and if the text is found enter new a new string of text in a new column pandas", "body": "<p>There's definitely a more optimized solution, but hope this puts you on the right path...basically loops through each row, looping through the columns and potential fuel strings and decides which abbr to use:</p>\n\n<pre><code>d={'diesel':'DSL','gasoline':'GAS','ev':'ELEC'}\ndf['all'] = df.apply(''.join, axis=1)\nfor i,row in df.iterrows():\n    df.at[i,'FUEL'] = d[[key for key in d.keys() if key in row['all'].lower()][0]]\n\ndel df['all']\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>                  SUMN              SOUN      MATN  FUEL\n0   Light duty vehicle  Diesel Tire wear    Rubber   DSL\n1    Heavy duty diesel      Non-catalyst    Diesel   DSL\n2     Light duty truck          catalyst  Gasoline   GAS\n3  Medium duty vehicle     EV brake wear    brakes  ELEC\n</code></pre>\n\n<p>this assume that only one of the fuel types occurs in each row</p>\n\n<p>EDIT: inspired by the other solution:</p>\n\n<pre><code>import re\nd={'diesel':'DSL','gasoline':'GAS','ev':'ELEC'}\ndf['FUEL'] = df.apply(lambda x: d[re.search('gasoline|diesel|ev',''.join(x).lower()).group()], axis=1)\n</code></pre>\n\n<p>same output :)</p>\n"}, {"comments": [{"owner": {"reputation": 3426, "user_id": 10818128, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-YiTeo4kuZiQ/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcYYf6McGCeXvwrDf9sDgLHNO5VGKQ/mo/photo.jpg?sz=128", "display_name": "Derek Eden", "link": "https://stackoverflow.com/users/10818128/derek-eden"}, "edited": false, "score": 1, "creation_date": 1572484168, "post_id": 58635002, "comment_id": 103578063, "body": "&gt;&lt; this is what I was trying to do but couldnt figure out the any(axis=1)..upvote"}], "tags": [], "owner": {"reputation": 31306, "user_id": 9081267, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/1knzv.jpg?s=128&g=1", "display_name": "Erfan", "link": "https://stackoverflow.com/users/9081267/erfan"}, "is_accepted": false, "score": 3, "last_activity_date": 1572478295, "creation_date": 1572478295, "answer_id": 58635002, "question_id": 58634478, "link": "https://stackoverflow.com/questions/58634478/search-columns-for-a-specific-set-of-text-and-if-the-text-is-found-enter-new-a-n/58635002#58635002", "title": "Search columns for a specific set of text and if the text is found enter new a new string of text in a new column pandas", "body": "<p>Here's a way using <code>apply</code> with <code>str.contains</code> to check all columns for each word. And finally we map the words to the correct ones, for example <code>ev -&gt; ELECT</code>.</p>\n\n<p>Note that I use <code>?i</code> in my regex, which makes it <em>not</em> case sensitive:</p>\n\n<pre><code>words = ['gas', 'diesel', 'ev']\nmapping = {'gas':'GAS', 'diesel':'DSL', 'ev':'ELEC'}\n\nfor word in words:\n    m = df.apply(lambda x: x.str.contains(f'(?i)({word})')).any(axis=1)\n    df.loc[m, 'FUEL'] = mapping[word]\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>                  SUMN              SOUN      MATN  FUEL\n0   Light duty vehicle  Diesel Tire wear    Rubber   DSL\n1    Heavy duty diesel      Non-catalyst    Diesel   DSL\n2     Light duty truck          catalyst  Gasoline   GAS\n3  Medium duty vehicle     EV brake wear    brakes  ELEC\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 12134565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf53736a8767ab30023fe72819b4d00b?s=128&d=identicon&r=PG&f=1", "display_name": "ACAYA", "link": "https://stackoverflow.com/users/12134565/acaya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 58634768, "answer_count": 2, "score": 0, "last_activity_date": 1572484800, "creation_date": 1572474589, "question_id": 58634478, "link": "https://stackoverflow.com/questions/58634478/search-columns-for-a-specific-set-of-text-and-if-the-text-is-found-enter-new-a-n", "title": "Search columns for a specific set of text and if the text is found enter new a new string of text in a new column pandas", "body": "<p>I am trying to look for instances where the words 'gas', diesel, or 'ev' occur in any of my columns in my dataframe (not case sensitive).  If any of version of those words are found in the columns I would like to enter an abbreviation for the fuel type in a new column entitled \"FUEL\".</p>\n\n<pre><code>excerpt of my dataframe\n\nSUMN                 SOUN               MATN   \nLight duty vehicle   Diesel Tire wear   Rubber\nHeavy duty diesel    Non-catalyst       Diesel\nLight duty truck     catalyst           Gasoline\nMedium duty vehicle  EV brake wear      brakes\n\nWhat I'm hoping to output\nSUMN                 SOUN               MATN      FUEL\nLight duty vehicle   Diesel Tire wear   Rubber    DSL\nHeavy duty diesel    Non-catalyst       Diesel    DSL\nLight duty truck     catalyst           Gasoline  GAS\nMedium duty vehicle  EV brake wear      brakes    ELEC\n</code></pre>\n\n<p>How do I accomplish this?</p>\n\n<p>I got as far as begin able to look at one column for one type of string, but got stumped on how to move past this point. </p>\n\n<pre><code>df['FUEL'] = df['SUMN'].str.contains('diesel', case=False)\n</code></pre>\n"}, {"tags": ["python", "pulp"], "comments": [{"owner": {"reputation": 1595, "user_id": 3670607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c0ac3a4aac38bc184c7b6c1e45e98e1?s=128&d=identicon&r=PG", "display_name": "Xypron", "link": "https://stackoverflow.com/users/3670607/xypron"}, "edited": false, "score": 0, "creation_date": 1574984561, "post_id": 58634434, "comment_id": 104427662, "body": "What is the question for which you seek an answer? If you want to report a bug in Pulp look on the COIN-OR pages to find out how to report it."}], "answers": [{"tags": [], "owner": {"reputation": 10213, "user_id": 1359058, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f191024999528a3a7375f8d7181e1fe6?s=128&d=identicon&r=PG", "display_name": "abc", "link": "https://stackoverflow.com/users/1359058/abc"}, "is_accepted": false, "score": 1, "last_activity_date": 1573300580, "creation_date": 1573300580, "answer_id": 58779021, "question_id": 58634434, "link": "https://stackoverflow.com/questions/58634434/pulp-hangs-on-infeasible-integer-lp-problem/58779021#58779021", "title": "PuLP hangs on infeasible integer LP problem", "body": "<p>The problem does not come from PuLP (PuLP is a modeling library) but from the CBC solver.</p>\n\n<p>Examples of outputs I get:</p>\n\n<pre><code>...\nCbc0010I After 35000 nodes, 30979 on tree, 1e+50 best solution, best possible 0 (666.85 seconds)\nCbc0010I After 36000 nodes, 31979 on tree, 1e+50 best solution, best possible 0 (691.99 seconds)\nCbc0010I After 37000 nodes, 32979 on tree, 1e+50 best solution, best possible 0 (717.61 seconds)\nCbc0010I After 38000 nodes, 33977 on tree, 1e+50 best solution, best possible 0 (742.93 seconds)\n...\n</code></pre>\n\n<p><code>1e+50</code> as a best solution means that a feasible point has not been found in the branching tree (no incumbent).<br>\nHowever, it goes on with branching.  </p>\n\n<p>With the other solvers I've tried the answer is immediate.</p>\n\n<p><strong>GLPK</strong></p>\n\n<pre><code>GLPK Integer Optimizer, v4.60\n1 row, 3 columns, 2 non-zeros\n2 integer variables, none of which are binary\nPreprocessing...\n1 row, 0 columns, 0 non-zeros\n0 integer variables, none of which are binary\nScaling...\n A: min|aij| =  1.000e+00  max|aij| =  1.000e+00  ratio =  1.000e+00\nProblem data seem to be well scaled\nSolving LP relaxation...\nGLPK Simplex Optimizer, v4.60\n1 row, 0 columns, 0 non-zeros\n~     0: obj =   0.000000000e+00  infeas =  1.000e+00\nPROBLEM HAS NO FEASIBLE SOLUTION\nTime used:   0.0 secs\nMemory used: 0.0 Mb (40416 bytes)\n</code></pre>\n\n<p><strong>CPLEX</strong></p>\n\n<pre><code>Presolve time = 0.00 sec. (0.00 ticks)\n\nRoot node processing (before b&amp;c):\n  Real time             =    0.00 sec. (0.00 ticks)\nParallel b&amp;c, 4 threads:\n  Real time             =    0.00 sec. (0.00 ticks)\n  Sync time (average)   =    0.00 sec.\n  Wait time (average)   =    0.00 sec.\n                          ------------\nTotal (root+branch&amp;cut) =    0.00 sec. (0.00 ticks)\n\n\nMIP - Integer infeasible.\nCurrent MIP best bound =  0.0000000000e+00 (gap is infinite)\nSolution time =    0.00 sec.  Iterations = 0  Nodes = 0\nDeterministic time = 0.00 ticks  (2.89 ticks/sec)\n</code></pre>\n\n<p><strong>GUROBI</strong></p>\n\n<pre><code>OBJ: 1 rows, 3 columns, 2 nonzeros\nOptimize a model with 1 rows, 3 columns and 2 nonzeros\nVariable types: 1 continuous, 2 integer (0 binary)\nCoefficient statistics:\n  Matrix range     [2e+00, 2e+00]\n  Objective range  [1e+00, 1e+00]\n  Bounds range     [0e+00, 0e+00]\n  RHS range        [1e+00, 1e+00]\nPresolve removed 0 rows and 2 columns\nPresolve time: 0.00s\n\nSolution count 0\n\nModel is infeasible\n</code></pre>\n"}], "owner": {"reputation": 101, "user_id": 9307235, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/691402af40ccc83ebe363ed84b4b6c63?s=128&d=identicon&r=PG&f=1", "display_name": "jacer21", "link": "https://stackoverflow.com/users/9307235/jacer21"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 528, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1573300580, "creation_date": 1572474208, "question_id": 58634434, "link": "https://stackoverflow.com/questions/58634434/pulp-hangs-on-infeasible-integer-lp-problem", "title": "PuLP hangs on infeasible integer LP problem", "body": "<p>I have a loop which solves a large number of integer LP problems using PuLP. At some point it comes across something like <code>2a + 2b = 1</code>. This is obviously infeasible, and yet PuLP just hangs on this input.</p>\n\n<p>I've tried solving this using CBC and it instantly returns the correct result -- infeasible or unbounded. So it's not an issue with CBC.</p>\n\n<p>Here's code that reproduces the problem:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from pulp import *\n\na = LpVariable('a', cat=LpInteger)\nb = LpVariable('b', cat=LpInteger)\n\nprob = LpProblem()\nprob += 2*a + 2*b == 1\n\nprob.solve(solver=PULP_CBC_CMD())\nprint(prob.status)\n\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "scheduled-tasks"], "comments": [{"owner": {"reputation": 6690, "user_id": 4225229, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/2YfJM.jpg?s=128&g=1", "display_name": "JacobIRR", "link": "https://stackoverflow.com/users/4225229/jacobirr"}, "edited": false, "score": 1, "creation_date": 1572474268, "post_id": 58634409, "comment_id": 103575797, "body": "Check the time every second with a <code>while</code> loop and <code>if</code> it is one of those kinds of times, execute the function... But: The fact that you mention Scheduled Tasks, make me think you need <code>cron</code> on linux or window&#39;s task scheduler"}], "answers": [{"tags": [], "owner": {"reputation": 1437, "user_id": 3633891, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/stGNM.png?s=128&g=1", "display_name": "Bill Chen", "link": "https://stackoverflow.com/users/3633891/bill-chen"}, "is_accepted": false, "score": 0, "last_activity_date": 1572475213, "last_edit_date": 1572475213, "creation_date": 1572474673, "answer_id": 58634495, "question_id": 58634409, "link": "https://stackoverflow.com/questions/58634409/run-a-function-at-the-start-of-every-round-5-minute-interval/58634495#58634495", "title": "Run a function at the start of every round 5 minute interval", "body": "<p>You can use datetime and condition.</p>\n\n<pre><code>import datetime\n\nwhile True:\n    current_time = datetime.datetime.now()\n    if current_time.second % 5 == 0 and current_time.minute % 1 == 0 and current_time.microsecond == 0:\n\n        print(current_time)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/JUjro.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JUjro.png\" alt=\"enter image description here\"></a></p>\n\n<p>hope this helps.</p>\n"}, {"tags": [], "owner": {"reputation": 2149, "user_id": 163679, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/AWwbu.jpg?s=128&g=1", "display_name": "bigh_29", "link": "https://stackoverflow.com/users/163679/bigh-29"}, "is_accepted": true, "score": 1, "last_activity_date": 1572520709, "last_edit_date": 1572520709, "creation_date": 1572476700, "answer_id": 58634790, "question_id": 58634409, "link": "https://stackoverflow.com/questions/58634409/run-a-function-at-the-start-of-every-round-5-minute-interval/58634790#58634790", "title": "Run a function at the start of every round 5 minute interval", "body": "<p>You could use a <code>threading.Timer</code>. You have to do some math to calculate the next run time. <code>datetime</code> has a handy <code>replace</code> method for that.</p>\n\n<pre><code>from datetime import datetime, timedelta\nfrom threading import Timer\n\ndef get_sleep_time():\n    now = datetime.now()\n    next_run = now.replace(minute=int(now.minute / 5) * 5, second=0, microsecond=0) + timedelta(minutes=5)\n    return (next_run - now).total_seconds()\n\ndef dowork():\n    now = datetime.now()\n    print('Doing some work at', now)\n    schedule_next_run()\n\ndef schedule_next_run():\n    sleep_time = get_sleep_time()\n    print(f'sleeping for {sleep_time} seconds')\n    t = Timer(sleep_time, dowork)\n    t.daemon = True\n    t.start()\n\n\nprint('Starting work schedule')\nschedule_next_run()\ninput('Doing work every 5 minutes. Press enter to exit')\n</code></pre>\n\n<p>On my system, the function fires within a half millisecond of the target time</p>\n\n<p>Note that the time calculation rounds down and then adds a <code>timedelta</code> to carefully wrap around the end of each hour. You would want to ponder how this will behave around daylight savings changes.</p>\n\n<p><strong>Suggestion</strong>: move all this logic to a class to clean it up.</p>\n"}, {"tags": [], "owner": {"reputation": 58, "user_id": 8673005, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-vVP0JSe33IE/AAAAAAAAAAI/AAAAAAAARXI/RFPVBZGV2zA/photo.jpg?sz=128", "display_name": "Ashish Sharma", "link": "https://stackoverflow.com/users/8673005/ashish-sharma"}, "is_accepted": false, "score": 1, "last_activity_date": 1572478815, "last_edit_date": 1572478815, "creation_date": 1572478366, "answer_id": 58635011, "question_id": 58634409, "link": "https://stackoverflow.com/questions/58634409/run-a-function-at-the-start-of-every-round-5-minute-interval/58635011#58635011", "title": "Run a function at the start of every round 5 minute interval", "body": "<pre><code>import datetime, time\n\ndef some_function():\n\nran_once = True\n\nwhile True:\n    current_time = datetime.datetime.now()\n    if  current_time.minute % 5 == 0 and current_time.second % 60 == 0 and not ran_once:\n        print(current_time) # DO YOUR WORK HERE\n        ran_once = True\n\n    elif current_time.minute % 5 == 0 or current_time.second % 60 != 0:\n\n        if current_time.second % 60 == 0:\n            print(\"Time to wait:\", 5 - (current_time.minute % 5), \"minutes and 0 seconds\")\n        else:\n            print(\"Time to wait:\", 4 - (current_time.minute % 5), \"minutes and \", end=\"\")\n            print(60 - (current_time.second % 60), \"seconds\")\n\n        time.sleep( (4 -(current_time.minute % 5))*60 + 60 -(current_time.second % 60))\n\n        ran_once = False\n</code></pre>\n\n<p>The above code runs at intervals of 5 minutes. Initially, the main thread sleeps for the number of seconds required to reach the perfect timestamp. For example, if the program is started at 7:28:30 then it is going to sleep for 90 seconds and then start at 7:30:00. From then on it will wait for 5 minutes before it runs the required functionality again.</p>\n\n<p>Also, I think the performance of firing up at the exact second really varies on how your system handles the threads.</p>\n"}], "owner": {"reputation": 959, "user_id": 3080600, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d6ceaf8fe0241610f0581b4bf28119e7?s=128&d=identicon&r=PG&f=1", "display_name": "user3080600", "link": "https://stackoverflow.com/users/3080600/user3080600"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 922, "favorite_count": 0, "accepted_answer_id": 58634790, "answer_count": 3, "score": 0, "last_activity_date": 1572520709, "creation_date": 1572474053, "last_edit_date": 1572474702, "question_id": 58634409, "link": "https://stackoverflow.com/questions/58634409/run-a-function-at-the-start-of-every-round-5-minute-interval", "title": "Run a function at the start of every round 5 minute interval", "body": "<p>I want to run a function every 5 minutes, it must be at a \"round\" intervals, for example :</p>\n\n<pre><code>12:05:00, 12:10:00, 12:15:00...\n</code></pre>\n\n<p>It cannot be like this:</p>\n\n<pre><code>12:06:00, 12:11:00, 12:16:00...\n</code></pre>\n\n<p>Or like this:</p>\n\n<pre><code>12:05:14, 12:10:14, 12:15:14...\n</code></pre>\n\n<p>What is the most accurate way to do this in python?</p>\n"}, {"tags": ["python", "string", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 2116, "user_id": 9795720, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-p2kjJTpOXtI/AAAAAAAAAAI/AAAAAAAAAKc/XnZfe29QBhw/photo.jpg?sz=128", "display_name": "kantal", "link": "https://stackoverflow.com/users/9795720/kantal"}, "is_accepted": false, "score": 0, "last_activity_date": 1572474484, "creation_date": 1572474484, "answer_id": 58634469, "question_id": 58634401, "link": "https://stackoverflow.com/questions/58634401/how-to-remove-strings-between-between-parentheses-or-any-char-in-dataframe/58634469#58634469", "title": "How to remove strings between between parentheses (or any char) in DataFrame?", "body": "<p>Use str.replace with regex:</p>\n\n<pre><code>df.Voltage.str.replace(r\"\\s\\(.*\",\"\")                                                                                    \nOut: \n0           0\n1           0\n2           0\n3           0\n4           0\n5     310.000\n6     300.000 \n7     190.000 \n8           0\n9     20.000 \nName: Voltage, dtype: object\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 108, "user_id": 9938912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8779e872582fb03f013b667b44e3af5?s=128&d=identicon&r=PG&f=1", "display_name": "srty", "link": "https://stackoverflow.com/users/9938912/srty"}, "is_accepted": false, "score": 0, "last_activity_date": 1572474852, "creation_date": 1572474852, "answer_id": 58634517, "question_id": 58634401, "link": "https://stackoverflow.com/questions/58634401/how-to-remove-strings-between-between-parentheses-or-any-char-in-dataframe/58634517#58634517", "title": "How to remove strings between between parentheses (or any char) in DataFrame?", "body": "<p>You can also use str.split()</p>\n\n<pre><code>df_2 = df['Voltage'].str.split(' ', 0, expand = True).rename(columns = {0:'Voltage'})\ndf_2['Voltage'] = df_2['Voltage'].astype('float')\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 870, "user_id": 805886, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/sWGGP.jpg?s=128&g=1", "display_name": "ScotterMonkey", "link": "https://stackoverflow.com/users/805886/scottermonkey"}, "is_accepted": false, "score": 0, "last_activity_date": 1572476205, "last_edit_date": 1572476205, "creation_date": 1572474913, "answer_id": 58634524, "question_id": 58634401, "link": "https://stackoverflow.com/questions/58634401/how-to-remove-strings-between-between-parentheses-or-any-char-in-dataframe/58634524#58634524", "title": "How to remove strings between between parentheses (or any char) in DataFrame?", "body": "<p>Hopefully, this will work for you:</p>\n\n<pre><code>result = source_value[:source_value.find(\" (\")]\n</code></pre>\n\n<p>NOTE: the find function requires a string as source_value. But if you have parens in your value, I assume it is a string.</p>\n"}, {"tags": [], "owner": {"reputation": 457, "user_id": 5686944, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g68JE.png?s=128&g=1", "display_name": "Matt Reynolds", "link": "https://stackoverflow.com/users/5686944/matt-reynolds"}, "is_accepted": false, "score": 0, "last_activity_date": 1572475020, "creation_date": 1572475020, "answer_id": 58634538, "question_id": 58634401, "link": "https://stackoverflow.com/questions/58634401/how-to-remove-strings-between-between-parentheses-or-any-char-in-dataframe/58634538#58634538", "title": "How to remove strings between between parentheses (or any char) in DataFrame?", "body": "<p>If you know the separating character will always be a space then the following is quite a neat way of doing it:</p>\n\n<pre><code>voltages = [i.rsplit(' ')[0] for i in voltages]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 7776029, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-jc0o9vWMz0I/AAAAAAAAAAI/AAAAAAAAAYo/ec2CwbDHOjk/photo.jpg?sz=128", "display_name": "Yi Zhou", "link": "https://stackoverflow.com/users/7776029/yi-zhou"}, "is_accepted": false, "score": 0, "last_activity_date": 1572475309, "creation_date": 1572475309, "answer_id": 58634585, "question_id": 58634401, "link": "https://stackoverflow.com/questions/58634401/how-to-remove-strings-between-between-parentheses-or-any-char-in-dataframe/58634585#58634585", "title": "How to remove strings between between parentheses (or any char) in DataFrame?", "body": "<p>I think you could try this:</p>\n\n<pre><code>new_series = df['Voltage'].apply(lambda x:int(x.split('.')[0]))\ndf['Voltage'] = new_series\n</code></pre>\n\n<p>I hope it helps.</p>\n"}], "owner": {"reputation": 405, "user_id": 11661267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/656a836be0c93bfb587ed3b98e56647a?s=128&d=identicon&r=PG&f=1", "display_name": "geistmate", "link": "https://stackoverflow.com/users/11661267/geistmate"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 5, "score": 0, "last_activity_date": 1572476205, "creation_date": 1572474002, "question_id": 58634401, "link": "https://stackoverflow.com/questions/58634401/how-to-remove-strings-between-between-parentheses-or-any-char-in-dataframe", "title": "How to remove strings between between parentheses (or any char) in DataFrame?", "body": "<p>I have a string of number chars that I want to change to type int, but I need to remove the parentheses and the numbers in it (it's just a multiplier for my application, this is how I get the data). </p>\n\n<p>Here is the sample code. </p>\n\n<pre><code>import pandas as pd\n\nvoltages = ['0', '0', '0', '0', '0', '310.000 (31)', '300.000 (30)', '190.000 (19)', '0', '20.000 (2)']\n\ndf = pd.DataFrame(voltages, columns=['Voltage'])\ndf\n</code></pre>\n\n<pre><code>Out [1]:\n    Voltage\n0   0\n1   0\n2   0\n3   0\n4   0\n5   310.000 (31)\n6   300.000 (30)\n7   190.000 (19)\n8   0\n9   20.000 (2)\n</code></pre>\n\n<p>How can I remove the substrings within the parenthesis? Is there a Pandas.series.str way to do it? </p>\n"}, {"tags": ["python", "scipy"], "answers": [{"comments": [{"owner": {"reputation": 137, "user_id": 4608359, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2FnO2.jpg?s=128&g=1", "display_name": "Paradox", "link": "https://stackoverflow.com/users/4608359/paradox"}, "edited": false, "score": 1, "creation_date": 1572479133, "post_id": 58634706, "comment_id": 103577021, "body": "Thanks for the clear explanation. Does this mean that the statement in the Wikipedia page &quot;where the non-centrality parameter in this formula is the square root of sum of square&quot; is wrong?"}, {"owner": {"reputation": 92118, "user_id": 1217358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2aafb97833979e3668c61d36e697bfc?s=128&d=identicon&r=PG", "display_name": "Warren Weckesser", "link": "https://stackoverflow.com/users/1217358/warren-weckesser"}, "reply_to_user": {"reputation": 137, "user_id": 4608359, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2FnO2.jpg?s=128&g=1", "display_name": "Paradox", "link": "https://stackoverflow.com/users/4608359/paradox"}, "edited": false, "score": 0, "creation_date": 1572479406, "post_id": 58634706, "comment_id": 103577083, "body": "@Paradox, yes, it looks like that statement is incorrect."}], "tags": [], "owner": {"reputation": 92118, "user_id": 1217358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2aafb97833979e3668c61d36e697bfc?s=128&d=identicon&r=PG", "display_name": "Warren Weckesser", "link": "https://stackoverflow.com/users/1217358/warren-weckesser"}, "is_accepted": true, "score": 0, "last_activity_date": 1572478822, "last_edit_date": 1572478822, "creation_date": 1572476052, "answer_id": 58634706, "question_id": 58634358, "link": "https://stackoverflow.com/questions/58634358/for-noncentral-chi-square-in-scipy-how-is-the-input-nc-defined/58634706#58634706", "title": "For noncentral chi-square in scipy, how is the input &#39;nc&#39; defined?", "body": "<p>The meanings of the noncentrality parameter in those two representations of the PDF in the wikipedia page are the same.  They haven't changed the definition of \u03bb, which is the sum of the squares of the means of normal distributions.</p>\n\n<p>Here's a script that generates the same curves as the plot in the wikipedia page.  The colored lines are computed using <code>scipy.stats.ncx2.pdf</code>, and the gray lines are computed using the first 10 terms of the infinite series given in the wikipedia page.  The plot verifies that these are just different expressions for the same value.</p>\n\n<pre><code>import numpy as np\nfrom scipy.stats import ncx2, chi2\nimport matplotlib.pyplot as plt\n\n\ndef approx_pdf(x, k, lam):\n    p = np.zeros_like(x, dtype=np.float64)\n    f = 1\n    for i in range(10):\n        p += np.exp(-lam/2) * (lam/2)**i * chi2.pdf(x, k + 2*i) / f\n        f *= (i + 1)\n    return p\n\n# df == k on wikipedia\n# nc == lambda on wikipedia\n\nx = np.linspace(0, 8, 400)\n\nlinestyle = '-'\nfor df in [2, 4]:\n    for nc in [1, 2, 3]:\n        plt.plot(x, ncx2.pdf(x, df, nc), linestyle=linestyle,\n                 label=f'k = {df}, \u03bb = {nc}')\n        plt.plot(x, approx_pdf(x, df, nc), 'k', alpha=0.1, linewidth=6)\n    linestyle = '--'\n\nplt.title(\"Noncentral chi-square distribution\\nProbability density function\")\nplt.xlabel('x')\nplt.legend(shadow=True)\nplt.grid(alpha=0.3)\nplt.tight_layout()\nplt.show()\n</code></pre>\n\n<p>The plot generated by the script:</p>\n\n<p><a href=\"https://i.stack.imgur.com/tp9Kp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/tp9Kp.png\" alt=\"plot\"></a></p>\n\n<hr>\n\n<p>Here's another short script, to demonstrate that the noncentrality parameter is, in fact, the sum of the squares of the means of the normal distributions.  It generates a large sample of values, with each value being the sum of the square of three normal random variates with means 1, 1.5 and 3, respectively.  The distribution of this sample should be a noncentral chi-square with 3 degrees of freedom and noncentrality parameter equal to the sum of the squares of the means.</p>\n\n<pre><code>import numpy as np\nfrom scipy.stats import ncx2\nimport matplotlib.pyplot as plt\n\n\n# Means of the normal distributions.\nmu = np.array([1, 1.5, 3])\n\nk = len(mu)          # df in scipy.stats.ncx2\nlam = (mu**2).sum()  # nc in scipy.stats.ncx2\n\n# The distribution of sample should be a noncentral chi-square\n# with len(mu) degrees of freedom and noncentrality sum(mu**2).\nsample = (np.random.normal(loc=mu, size=(100000, k))**2).sum(axis=1)\n\n# Plot the normalized histogram of the sample.\nplt.hist(sample, bins=60, density=True, alpha=0.4)\n\n# This plot of the PDF should match the histogram.\nx = np.linspace(0, sample.max(), 800)\nplt.plot(x, ncx2.pdf(x, k, lam))\n\nplt.xlabel('x')\nplt.grid(alpha=0.3)\nplt.show()\n</code></pre>\n\n<p>As you can see in the plot, the theoretical PDF matches the normalized histogram of the sample.</p>\n\n<p><a href=\"https://i.stack.imgur.com/YTDvr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/YTDvr.png\" alt=\"plot histogram and PDF\"></a></p>\n"}], "owner": {"reputation": 137, "user_id": 4608359, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2FnO2.jpg?s=128&g=1", "display_name": "Paradox", "link": "https://stackoverflow.com/users/4608359/paradox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 188, "favorite_count": 0, "accepted_answer_id": 58634706, "answer_count": 1, "score": 0, "last_activity_date": 1572478822, "creation_date": 1572473662, "question_id": 58634358, "link": "https://stackoverflow.com/questions/58634358/for-noncentral-chi-square-in-scipy-how-is-the-input-nc-defined", "title": "For noncentral chi-square in scipy, how is the input &#39;nc&#39; defined?", "body": "<p>scipy.stats.ncx2 implements some functions for the non-central chi-square distribution. There is one input 'nc' to these functions.</p>\n\n<p>Suppose there are k independent random numbers from N(mu,1)</p>\n\n<p>My question is should nc be defined as k<em>mu^2 or \\sqrt(k</em>mu^2).</p>\n\n<p>I am asking this because from Wikipedia, it explicitly states follows:</p>\n\n<p>\"Alternatively, the pdf can be written as</p>\n\n<p>exp(-(nc+df)/2) * 1/2 * (x/nc)**((df-2)/4) * I(df-2)/2</p>\n\n<p>where the non-centrality parameter in this formula is the square root of sum of square.\"</p>\n\n<p>And in the documentation of scipy.stats.ncx2, the pdf has exactly the same form as above.</p>\n\n<p>So should the input 'nc' be the sum of squrares, or the the square root of sum of square.</p>\n\n<p>Is there some way to numerically verify this?</p>\n"}, {"tags": ["python", "pandas", "matplotlib"], "answers": [{"tags": [], "owner": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "is_accepted": false, "score": 1, "last_activity_date": 1572474288, "creation_date": 1572474288, "answer_id": 58634443, "question_id": 58634338, "link": "https://stackoverflow.com/questions/58634338/plot-with-multiple-bars-how-to-fix/58634443#58634443", "title": "Plot with multiple bars. How to fix?", "body": "<p>IIUC, you can do:</p>\n\n<pre><code>for date, data in df.groupby('Date'):\n    print(data)\n    (data.groupby(['Obj','Feature'])['FeatureValue'].mean()\n        .unstack('Feature').plot.bar())\n</code></pre>\n"}], "owner": {"reputation": 377, "user_id": 4730598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2ca9526f58554d98e814b1563af96f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ison", "link": "https://stackoverflow.com/users/4730598/ison"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 23, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1572474288, "creation_date": 1572473558, "question_id": 58634338, "link": "https://stackoverflow.com/questions/58634338/plot-with-multiple-bars-how-to-fix", "title": "Plot with multiple bars. How to fix?", "body": "<p>I have a dataframe with quite uneven data that looks like this:  </p>\n\n<pre><code>    Date      | Obj  | Feature | FeatureValue |  \n    2019-08-28| DT1  |   foo   |     15       |  \n    2019-08-28| DT1  |   bar   |     25       |  \n    2019-08-28| DT1  |   baz   |     70       |  \n    2019-08-28| DT2  |   foo   |     45       |  \n    2019-08-28| DT2  |   baz   |     67       |  \n    2019-08-28| DT3  |   foo   |     78       |  \n    2019-08-28| DT3  |   bar   |     19       |  \n    2019-08-29| DT1  |   foo   |     12       |  \n    2019-08-29| DT1  |   bar   |     45       |  \n    2019-08-30| DT2  |   foo   |     19       |  \n    2019-08-30| DT2  |   bar   |     23       |  \n    2019-08-30| DT3  |   foo   |     23       |  \n    2019-08-30| DT3  |   baz   |     34       |  \n</code></pre>\n\n<p>My goal is to plot plots for every date where on X-axis is OBJ on Y - Feature value and the bars - Features.   </p>\n\n<p>So I did this:  </p>\n\n<pre><code>df = pd.DataFrame(np.array([['2019-08-28', 'DT1', 'foo' ,15], ['2019-08-28', 'DT1', 'bar',25],\n                            ['2019-08-28', 'DT1', 'baz', 70], ['2019-08-28', 'DT2', 'foo', 45],   \n                            ['2019-08-28', 'DT3', 'baz', 67], ['2019-08-28', 'DT3', 'foo', 78],   \n                            ['2019-08-28', 'DT3', 'bar', 19], ['2019-08-29', 'DT1', 'foo', 12],   \n                            ['2019-08-28', 'DT1', 'bar', 45], ['2019-08-30', 'DT2', 'foo', 19],   \n                            ['2019-08-30', 'DT2', 'bar', 23], ['2019-08-30', 'DT3', 'foo', 23],   \n                            ['2019-08-30', 'DT3', 'baz', 34]]),  \n                           columns=['Date', 'Obj', 'Feature', 'FeatureValue'])\n\nfor date in df.Date.unique():\n    DDD = df[df['Date'] == date]\n    X = DDD.Obj.unique()\n    for obj in X:\n        y1 = np.array(DDD[DDD['Obj'] == obj][DDD['Feature']=='foo']['FeatureValue'].values)\n        y2 = np.array(DDD[DDD['Obj'] == obj][DDD['Feature']=='bar']['FeatureValue'].values)\n        y3 = np.array(DDD[DDD['Obj']==obj][DDD['Feature']=='baz']['FeatureValue'].values)\n        width=0.4\n        fig, ax = plt.subplots()\n        try:\n            ax.bar(X, y1, width, color='#000080', label='AC')\n            ax.bar(X, width, y2, width, color='#0F52BA', label ='Cell (alarm)')\n            ax.bar(X, 2*width, y3, width, color='#6593F5', label='Cell (manual)')\n        except:\n            pass\n        ax.set_title(date)\n        ax.legend()\n        plt.show()  \n</code></pre>\n\n<p>As a result I get smth like this:   </p>\n\n<p><a href=\"https://i.stack.imgur.com/zNvyS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zNvyS.png\" alt=\"enter image description here\"></a>  </p>\n\n<p>And the error IndexError: list index out of range with the link to the plt.legend().  What did I wrong? What should I correct to get the normal plot output?</p>\n"}, {"tags": ["python", "sockets", "ssl", "encryption"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 12244215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7087deaeaad3f023c907d60a061c3cbc?s=128&d=identicon&r=PG&f=1", "display_name": "fazzerking", "link": "https://stackoverflow.com/users/12244215/fazzerking"}, "edited": false, "score": 0, "creation_date": 1572473808, "post_id": 58634356, "comment_id": 103575659, "body": "Thank you but I want this to be a python script only and my script already does all this, except for printing amounts of handshakes like 6/20 with the weak cipher or 15/20 handshakes with the known cipher."}, {"owner": {"user_type": "does_not_exist", "display_name": "user11751534"}, "reply_to_user": {"reputation": 13, "user_id": 12244215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7087deaeaad3f023c907d60a061c3cbc?s=128&d=identicon&r=PG&f=1", "display_name": "fazzerking", "link": "https://stackoverflow.com/users/12244215/fazzerking"}, "edited": false, "score": 0, "creation_date": 1572473998, "post_id": 58634356, "comment_id": 103575723, "body": "So you need like a summary report at the end?"}, {"owner": {"reputation": 13, "user_id": 12244215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7087deaeaad3f023c907d60a061c3cbc?s=128&d=identicon&r=PG&f=1", "display_name": "fazzerking", "link": "https://stackoverflow.com/users/12244215/fazzerking"}, "edited": false, "score": 0, "creation_date": 1572474292, "post_id": 58634356, "comment_id": 103575804, "body": "Yes exactly that&#39;s what I want."}, {"owner": {"user_type": "does_not_exist", "display_name": "user11751534"}, "reply_to_user": {"reputation": 13, "user_id": 12244215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7087deaeaad3f023c907d60a061c3cbc?s=128&d=identicon&r=PG&f=1", "display_name": "fazzerking", "link": "https://stackoverflow.com/users/12244215/fazzerking"}, "edited": false, "score": 0, "creation_date": 1572476854, "post_id": 58634356, "comment_id": 103576476, "body": "Why don&#39;t you add a counter inside each try catch statement and print the summary at the end. The counter will increment each time the particular try statement is running."}, {"owner": {"reputation": 13, "user_id": 12244215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7087deaeaad3f023c907d60a061c3cbc?s=128&d=identicon&r=PG&f=1", "display_name": "fazzerking", "link": "https://stackoverflow.com/users/12244215/fazzerking"}, "edited": false, "score": 0, "creation_date": 1572478060, "post_id": 58634356, "comment_id": 103576778, "body": "I&#39;m not sure how to do it"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user11751534"}, "is_accepted": true, "score": 0, "last_activity_date": 1572524422, "last_edit_date": 1572524422, "creation_date": 1572473655, "answer_id": 58634356, "question_id": 58634308, "link": "https://stackoverflow.com/questions/58634308/python-how-to-print-how-many-websites-support-each-ciphersuite-request/58634356#58634356", "title": "Python - How to print how many websites support each ciphersuite request", "body": "<p>You can write a bash script to test cipher suites. It should get a list of supported cipher suites from OpenSSL and tries to connect using each one. If the handshake is successful, it should prints YES. If the handshake isn't successful, it prints NO, followed by the OpenSSL error text.</p>\n\n<p>nmap has a sample script you can refer to.\nNmap with ssl-enum-ciphers</p>\n\n<pre><code>WeakCipher = 'NULL-MD5'\n\nt_weak=0\n\ncontext = ssl.create_default_context()\ncontext.set_ciphers(WeakCipher)\ns = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\nssl_sock = context.wrap_socket(s, server_hostname=urlre)\ntry:\n    ssl_sock.connect((urlre, 443))\nexcept Exception as e:\n    print(\"ERROR:\", response.url, \"DOES NOT SUPPORT YOUR WEAK CIPHER\")\nelse:\n    t_weak +=1\n    print(response.url,\"CONNECTION ESTABLISHED WITH YOUR WEAK CIPHER\")\n\nprint(\"Number of websites with Weak cipher\", t_weak)\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 12244215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7087deaeaad3f023c907d60a061c3cbc?s=128&d=identicon&r=PG&f=1", "display_name": "fazzerking", "link": "https://stackoverflow.com/users/12244215/fazzerking"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "accepted_answer_id": 58634356, "answer_count": 1, "score": 0, "last_activity_date": 1572524422, "creation_date": 1572473410, "question_id": 58634308, "link": "https://stackoverflow.com/questions/58634308/python-how-to-print-how-many-websites-support-each-ciphersuite-request", "title": "Python - How to print how many websites support each ciphersuite request", "body": "<p>So I have 20 websites in my <code>hosts.txt</code> file which each runs a <code>WeakCipher , KnownCipher, ModernCipher</code> to test if a connection can be established. </p>\n\n<p>This is a school assignment where I'm told to test 3 kinds of ciphers.</p>\n\n<p><strong>How can I make it print how many websites support each ciphersuite?</strong></p>\n\n<pre><code>import socket\nimport ssl\nimport grequests\nimport re\n\n\nWeakCipher = 'NULL-MD5'\n\nKnownCipher = 'DHE-RSA-AES256-GCM-SHA384'\n\nModernCipher = 'ECDHE-RSA-AES256-SHA384'\n\n#Read from txt file and convert it into a List.\nList = open(\"C:\\\\Users\\\\Farzad\\\\Desktop\\\\hosts.txt\").read().splitlines()\n\n#async method to do more than 1 URL at a time\nrs = (grequests.get(url) for url in List)\nrequests = grequests.map(rs)\n\n\nfor response in requests:\n    urlfix = re.compile(r\"https?://(www\\.)?\")\n    urlre = urlfix.sub('', response.url).strip().strip('/')\n\n    context = ssl.create_default_context()\n    context.set_ciphers(WeakCipher)\n    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\n    ssl_sock = context.wrap_socket(s, server_hostname=urlre)\n    try:\n        ssl_sock.connect((urlre, 443))\n    except Exception as e:\n        print(\"ERROR:\", response.url, \"DOES NOT SUPPORT YOUR WEAK CIPHER\")\n    else:\n        print(response.url,\"CONNECTION ESTABLISHED WITH YOUR WEAK CIPHER\")\n\n\n    context = ssl.create_default_context()\n    context.set_ciphers(KnownCipher)\n    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\n    ssl_sock = context.wrap_socket(s, server_hostname=urlre)\n    try:\n        ssl_sock.connect((urlre, 443))\n    except Exception as e:\n        print(\"ERROR:\", response.url, \"DOES NOT SUPPORT YOUR MODERN CIPHER\")\n    else:\n        print(response.url,\"CONNECTION ESTABLISHED WITH YOUR KNOWN CIPHER\" )\n\n\n    context = ssl.create_default_context()\n    context.set_ciphers(ModernCipher)\n    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\n    ssl_sock = context.wrap_socket(s, server_hostname=urlre)\n    try:\n        ssl_sock.connect((urlre, 443))\n    except Exception as e:\n        print(\"ERROR:\", response.url, \"DOES NOT SUPPORT YOUR MODERN CIPHER\" '\\n')\n    else:\n        print(response.url,\"CONNECTION ESTABLISHED WITH YOUR MODERN CIPHER\" '\\n')\n</code></pre>\n"}, {"tags": ["python", "optimization"], "comments": [{"owner": {"reputation": 15430, "user_id": 4518341, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eVuAv.png?s=128&g=1", "display_name": "wjandrea", "link": "https://stackoverflow.com/users/4518341/wjandrea"}, "edited": false, "score": 0, "creation_date": 1572473632, "post_id": 58634276, "comment_id": 103575612, "body": "All posts asking for debugging help should have a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, so I have to ask: Why do you use <code>sleep</code>? Is it important that the code is in a <code>while True</code> loop?"}], "answers": [{"tags": [], "owner": {"reputation": 3306, "user_id": 2750819, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/gOFsQ.png?s=128&g=1", "display_name": "Kent Shikama", "link": "https://stackoverflow.com/users/2750819/kent-shikama"}, "is_accepted": false, "score": 0, "last_activity_date": 1572473471, "creation_date": 1572473471, "answer_id": 58634319, "question_id": 58634276, "link": "https://stackoverflow.com/questions/58634276/extra-new-line-on-print-python/58634319#58634319", "title": "Extra new line on print Python", "body": "<p>With <code>for _ in range(0, 5):</code>, you're looping once more than in your second loop. Try the following:</p>\n\n<pre><code>from time import sleep\n\nwhile True:\n    whitespaces_count = 0\n    dots_count = 8\n    for _ in range(0, 4):\n        print(\"*\"*(dots_count//2)+\" \"*whitespaces_count+\"*\"*(dots_count//2))\n        whitespaces_count += 2\n        dots_count -= 2\n        sleep(0.15)\n    whitespaces_count = 6\n    dots_count = 2\n    for _ in range(0, 4):\n        print(\"*\"*(dots_count//2)+\" \"*whitespaces_count+\"*\"*(dots_count//2))\n        whitespaces_count -= 2\n        dots_count += 2\n        sleep(0.15)\n    print(\"\\n\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "is_accepted": true, "score": 3, "last_activity_date": 1572477468, "last_edit_date": 1572477468, "creation_date": 1572473510, "answer_id": 58634327, "question_id": 58634276, "link": "https://stackoverflow.com/questions/58634276/extra-new-line-on-print-python/58634327#58634327", "title": "Extra new line on print Python", "body": "<p>Your problem isn't <code>print</code>, it's that your first loop runs one extra time printing no dots, all whitespace. Change it to loop over <code>range(4)</code> instead of <code>range(5)</code> and that extra line goes away.</p>\n\n<hr>\n\n<p>Side-note: You should really take advantage of the loop itself to do the work of determining how many asterisks and spaces to <code>print</code>; you're using a <code>range</code> to decide how many loops to run, but it could do double duty, allowing this (minimally fixed code):</p>\n\n<pre><code>whitespaces_count = 0\ndots_count = 8\nfor _ in range(4):\n    print(\"*\"*(dots_count//2)+\" \"*whitespaces_count+\"*\"*(dots_count//2))\n    whitespaces_count += 2\n    dots_count -= 2\n    sleep(0.15)\n</code></pre>\n\n<p>to become:</p>\n\n<pre><code>for whitespaces_count in range(0, 8, 2):\n    dots_count = 8 - whitespaces_count\n    print(\"*\"*(dots_count//2)+\" \"*whitespaces_count+\"*\"*(dots_count//2))\n    sleep(0.15)\n</code></pre>\n\n<p>or letting the loop do even more work, pushing more work to built-ins that outperform hand-written code (and having <code>dots_count</code> refer to the number of dots on each side):</p>\n\n<pre><code>for whitespaces_count, dots_count in zip(range(0, 8, 2), range(4, 0, -1)):\n    print(\"*\"*dots_count + \" \"*whitespaces_count + \"*\"*dots_count)\n    sleep(0.15)\n</code></pre>\n"}], "owner": {"reputation": 468, "user_id": 10872199, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DK0US.jpg?s=128&g=1", "display_name": "PythonNewbie", "link": "https://stackoverflow.com/users/10872199/pythonnewbie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 58634327, "answer_count": 2, "score": 0, "last_activity_date": 1572477468, "creation_date": 1572473219, "question_id": 58634276, "link": "https://stackoverflow.com/questions/58634276/extra-new-line-on-print-python", "title": "Extra new line on print Python", "body": "<p>I have small fun function that prints rhombus with asterisks. It looks like this:</p>\n\n<pre><code>from time import sleep\n\nwhile True:\n    whitespaces_count = 0\n    dots_count = 8\n    for _ in range(0, 5):\n        print(\"*\"*(dots_count//2)+\" \"*whitespaces_count+\"*\"*(dots_count//2))\n        whitespaces_count += 2\n        dots_count -= 2\n        sleep(0.15)\n    whitespaces_count = 6\n    dots_count = 2\n    for _ in range(0, 4):\n        print(\"*\"*(dots_count//2)+\" \"*whitespaces_count+\"*\"*(dots_count//2))\n        whitespaces_count -= 2\n        dots_count += 2\n        sleep(0.15)\n    print(\"\\n\")\n</code></pre>\n\n<p>It works fine, but, after every <code>print</code> command, it prints additional blank line, so output looks like this:</p>\n\n<pre><code>********\n***  ***\n**    **\n*      *\n\n*      *\n**    **\n***  ***\n********\n</code></pre>\n\n<p>But I want it looks like this:</p>\n\n<pre><code>********\n***  ***\n**    **\n*      *\n*      *\n**    **\n***  ***\n********\n</code></pre>\n\n<p><hr>\nWhat am I'm doing wrong?</p>\n"}, {"tags": ["python", "excel", "pandas", "dataframe"], "comments": [{"owner": {"reputation": 17765, "user_id": 9375102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8yBw3.jpg?s=128&g=1", "display_name": "Umar.H", "link": "https://stackoverflow.com/users/9375102/umar-h"}, "edited": false, "score": 0, "creation_date": 1572473471, "post_id": 58634261, "comment_id": 103575563, "body": "whats the <code>dtype</code> for <code>df[&#39;A&#39;]</code> ?"}, {"owner": {"reputation": 1739, "user_id": 10626278, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fsJ1h.jpg?s=128&g=1", "display_name": "Gen Wan", "link": "https://stackoverflow.com/users/10626278/gen-wan"}, "reply_to_user": {"reputation": 17765, "user_id": 9375102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8yBw3.jpg?s=128&g=1", "display_name": "Umar.H", "link": "https://stackoverflow.com/users/9375102/umar-h"}, "edited": false, "score": 1, "creation_date": 1572473588, "post_id": 58634261, "comment_id": 103575600, "body": "Hi @Datanovice, it is &lt;class &#39;pandas.core.series.Series&#39;&gt;. I used print(type(df[&#39;A&#39;]))"}, {"owner": {"reputation": 17765, "user_id": 9375102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8yBw3.jpg?s=128&g=1", "display_name": "Umar.H", "link": "https://stackoverflow.com/users/9375102/umar-h"}, "edited": false, "score": 0, "creation_date": 1572473663, "post_id": 58634261, "comment_id": 103575620, "body": "<code>pd.to_datetime(&#39;01-Jan-01&#39;)</code> returns <code>2001-01-01</code> cast your dates into a valid pandas date time <code>df[&#39;date&#39;] = pd.to_datetime(df[&#39;date&#39;])</code> tested on my machine and i can view in excel."}, {"owner": {"reputation": 2039, "user_id": 2825403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d81c88311d9512d0e83bcdf806ba3a4?s=128&d=identicon&r=PG&f=1", "display_name": "pavel", "link": "https://stackoverflow.com/users/2825403/pavel"}, "edited": false, "score": 0, "creation_date": 1572475569, "post_id": 58634261, "comment_id": 103576136, "body": "I&#39;m just curious as to why you need <code>from pandas import ExcelWriter</code>? You would have already imported pandas earlier(since you are creating a dataframe earlier) and you should be able to use <code>df.to_excel</code> without any additional imports."}, {"owner": {"reputation": 1739, "user_id": 10626278, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fsJ1h.jpg?s=128&g=1", "display_name": "Gen Wan", "link": "https://stackoverflow.com/users/10626278/gen-wan"}, "reply_to_user": {"reputation": 17765, "user_id": 9375102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8yBw3.jpg?s=128&g=1", "display_name": "Umar.H", "link": "https://stackoverflow.com/users/9375102/umar-h"}, "edited": false, "score": 0, "creation_date": 1572475608, "post_id": 58634261, "comment_id": 103576144, "body": "Hi @Datanovice, in our oracle database, &#39;01-Jan-01&#39; is 0001-01-01. Pandas reads the output correctly because the data frame shows &#39;0001-01-01 00:00:00&#39;.  I will have hundreds of columns in the output and I do not want to cast every column manually."}, {"owner": {"reputation": 1739, "user_id": 10626278, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fsJ1h.jpg?s=128&g=1", "display_name": "Gen Wan", "link": "https://stackoverflow.com/users/10626278/gen-wan"}, "reply_to_user": {"reputation": 2039, "user_id": 2825403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d81c88311d9512d0e83bcdf806ba3a4?s=128&d=identicon&r=PG&f=1", "display_name": "pavel", "link": "https://stackoverflow.com/users/2825403/pavel"}, "edited": false, "score": 0, "creation_date": 1572475737, "post_id": 58634261, "comment_id": 103576184, "body": "Hi @user2825403, because I want to [append] the output to the existing excel file. Do you know if there is any other approach?"}, {"owner": {"reputation": 2039, "user_id": 2825403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d81c88311d9512d0e83bcdf806ba3a4?s=128&d=identicon&r=PG&f=1", "display_name": "pavel", "link": "https://stackoverflow.com/users/2825403/pavel"}, "edited": false, "score": 0, "creation_date": 1572476205, "post_id": 58634261, "comment_id": 103576313, "body": "Since you simply want to add a new worksheet to the existing file I&#39;d just do <code>df.to_excel(&#39;GUCS6J-Job Data.xlsx&#39;, sheet_name=str(20))</code>"}, {"owner": {"reputation": 17765, "user_id": 9375102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8yBw3.jpg?s=128&g=1", "display_name": "Umar.H", "link": "https://stackoverflow.com/users/9375102/umar-h"}, "edited": false, "score": 0, "creation_date": 1572476213, "post_id": 58634261, "comment_id": 103576315, "body": "what datetime format is &#39;0001-01-01&#39; ? Year 0 is when the Georgian calendar started unless i&#39;m missing something. You could <code>melt&#47;unpivot</code> the data frame then cast your datetimes into a datetime then save to excel. You could tackle in many ways, depends on the shape of your data, is it just timesheet data with employee id and dates?"}, {"owner": {"reputation": 1739, "user_id": 10626278, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fsJ1h.jpg?s=128&g=1", "display_name": "Gen Wan", "link": "https://stackoverflow.com/users/10626278/gen-wan"}, "edited": false, "score": 0, "creation_date": 1572476506, "post_id": 58634261, "comment_id": 103576399, "body": "hi @user2825403, I just tried this. This approach will re-create the file and it only has one worksheet which is [20]. So I lost my existing tab..."}, {"owner": {"reputation": 1739, "user_id": 10626278, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fsJ1h.jpg?s=128&g=1", "display_name": "Gen Wan", "link": "https://stackoverflow.com/users/10626278/gen-wan"}, "reply_to_user": {"reputation": 17765, "user_id": 9375102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8yBw3.jpg?s=128&g=1", "display_name": "Umar.H", "link": "https://stackoverflow.com/users/9375102/umar-h"}, "edited": false, "score": 0, "creation_date": 1572476851, "post_id": 58634261, "comment_id": 103576475, "body": "@Datanovice, I cannot cast every column manually because we will have hundreds of columns and hundreds of new tabs in the excel file. So the question here is: the second record [2014-09-20 00:00:00] works great in the excel file. Why the [0000-01-01 00:00:00] could not be loaded correctly?"}], "answers": [{"comments": [{"owner": {"reputation": 2236, "user_id": 11384392, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j5bfH.jpg?s=128&g=1", "display_name": "Das_Geek", "link": "https://stackoverflow.com/users/11384392/das-geek"}, "edited": false, "score": 0, "creation_date": 1572483707, "post_id": 58634963, "comment_id": 103577990, "body": "Welcome to StackOverlfow! Please edit your answer to include an example of your linked pages&#39; tips, as they apply to OP&#39;s code. Maybe rewrite their code, adding in your suggested changes? This will make your answer more useful to others who might have this issue later on."}, {"owner": {"reputation": 1, "user_id": 5522906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a33f5485d80e2f79c27eb54da3bb89c0?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522906/kevin"}, "reply_to_user": {"reputation": 2236, "user_id": 11384392, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j5bfH.jpg?s=128&g=1", "display_name": "Das_Geek", "link": "https://stackoverflow.com/users/11384392/das-geek"}, "edited": false, "score": 0, "creation_date": 1572546542, "post_id": 58634963, "comment_id": 103603336, "body": "I think I found the causes <a href=\"https://stackoverflow.com/questions/32888124/pandas-out-of-bounds-nanosecond-timestamp-after-offset-rollforward-plus-adding-a\" title=\"pandas out of bounds nanosecond timestamp after offset rollforward plus adding a\">stackoverflow.com/questions/32888124/&hellip;</a>"}], "tags": [], "owner": {"reputation": 1, "user_id": 5522906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a33f5485d80e2f79c27eb54da3bb89c0?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522906/kevin"}, "is_accepted": false, "score": 0, "last_activity_date": 1572477999, "creation_date": 1572477999, "answer_id": 58634963, "question_id": 58634261, "link": "https://stackoverflow.com/questions/58634261/cannot-write-to-excel-worksheet-with-valid-date-format-with-pandas/58634963#58634963", "title": "Cannot write to Excel worksheet with valid date format with Pandas", "body": "<p>please refer to these two links to see if it solves your problem\n<a href=\"https://xlsxwriter.readthedocs.io/example_pandas_datetime.html\" rel=\"nofollow noreferrer\">https://xlsxwriter.readthedocs.io/example_pandas_datetime.html</a>\n<a href=\"https://stackoverflow.com/questions/37713729/python-pandas-dataframe-date-index-different-format-in-xlsx-and-csv\">Python pandas dataframe &quot;Date&quot; Index different format in xlsx and csv</a></p>\n\n<p>I thinks you need to add the date_format in you ExcelWriter() </p>\n"}], "owner": {"reputation": 1739, "user_id": 10626278, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fsJ1h.jpg?s=128&g=1", "display_name": "Gen Wan", "link": "https://stackoverflow.com/users/10626278/gen-wan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 305, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1572477999, "creation_date": 1572473134, "last_edit_date": 1572476018, "question_id": 58634261, "link": "https://stackoverflow.com/questions/58634261/cannot-write-to-excel-worksheet-with-valid-date-format-with-pandas", "title": "Cannot write to Excel worksheet with valid date format with Pandas", "body": "<p>The background: </p>\n\n<p>1, used Python to execute the SQL and saved the output into DataFrame format using Pandas.</p>\n\n<p>2, appended the output to my existing excel file as one new worksheet. </p>\n\n<p>Below is my code:</p>\n\n<pre><code>from pandas import ExcelWriter\n\nsql_20 = ''''''\n\ndb = cx_Oracle.connect('*****', '*******', '**********')\nconn = db.cursor()\n\nconn.execute(sql_20)\ndf = pandas.read_sql_query(sql_20,db)\nprint(df)\n\nwith ExcelWriter('GUCS6J-Job Data.xlsx', mode='a') as writer:\n    df.to_excel(writer, sheet_name=str(20))\nwriter.save()\n</code></pre>\n\n<hr>\n\n<p>Database: Oracle</p>\n\n<p>Column A data type: date</p>\n\n<p>The SQL result from Oracle:</p>\n\n<p><a href=\"https://i.stack.imgur.com/SZjXM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/SZjXM.png\" alt=\"enter image description here\"></a></p>\n\n<p>The DataFrame print from Python:</p>\n\n<p><a href=\"https://i.stack.imgur.com/Fti6z.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Fti6z.png\" alt=\"enter image description here\"></a></p>\n\n<p>So far so good</p>\n\n<hr>\n\n<p>But what I got in the excel worksheet:</p>\n\n<p><a href=\"https://i.stack.imgur.com/6gh2q.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6gh2q.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/B4GlH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/B4GlH.png\" alt=\"enter image description here\"></a></p>\n\n<p>I am curious why I got the '##################' and the value of this cell is <strong>-693594</strong> in the excel.</p>\n\n<p>I hope I can get the same result as the DataFrame print in the excel file.</p>\n"}, {"tags": ["python", "kivy"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1572473312, "post_id": 58634251, "comment_id": 103575504, "body": "provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 63, "user_id": 11074573, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-2VCqFtDuTUU/AAAAAAAAAAI/AAAAAAAAF30/FFHCgBKrFYw/photo.jpg?sz=128", "display_name": "BrigaDella", "link": "https://stackoverflow.com/users/11074573/brigadella"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1572475392, "post_id": 58634251, "comment_id": 103576096, "body": "@eyllanesc I tried implementing it above i wonder if you would have the time to implement facenet inorder to do face recognition"}, {"owner": {"reputation": 20381, "user_id": 7254633, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XCPaMN6qzA0/AAAAAAAAAAI/AAAAAAAAADs/o9igiVGFyK0/photo.jpg?sz=128", "display_name": "John Anderson", "link": "https://stackoverflow.com/users/7254633/john-anderson"}, "edited": false, "score": 0, "creation_date": 1572477239, "post_id": 58634251, "comment_id": 103576580, "body": "Don&#39;t use <code>Thread.run()</code>. That is not doing multi-threading. Use <code>Thread.start()</code>. And in your <code>coll()</code> method, use <code>Clock.schedule_once()</code> to call a simple method to set <code>self.user.texture</code>, which needs to be done back on the main thread."}, {"owner": {"reputation": 63, "user_id": 11074573, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-2VCqFtDuTUU/AAAAAAAAAAI/AAAAAAAAF30/FFHCgBKrFYw/photo.jpg?sz=128", "display_name": "BrigaDella", "link": "https://stackoverflow.com/users/11074573/brigadella"}, "reply_to_user": {"reputation": 20381, "user_id": 7254633, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XCPaMN6qzA0/AAAAAAAAAAI/AAAAAAAAADs/o9igiVGFyK0/photo.jpg?sz=128", "display_name": "John Anderson", "link": "https://stackoverflow.com/users/7254633/john-anderson"}, "edited": false, "score": 0, "creation_date": 1572504750, "post_id": 58634251, "comment_id": 103582424, "body": "@John Anderson i did what you told me to do, it breaks the gui completely"}], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 11074573, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-2VCqFtDuTUU/AAAAAAAAAAI/AAAAAAAAF30/FFHCgBKrFYw/photo.jpg?sz=128", "display_name": "BrigaDella", "link": "https://stackoverflow.com/users/11074573/brigadella"}, "edited": false, "score": 0, "creation_date": 1572592137, "post_id": 58652893, "comment_id": 103614482, "body": "Well i did try your suggested edit as for  <code>self.user.texture</code>, it still doesn&#39;t change or update  in the GUI it just becomes black  but for the <code>self.trainingSample</code> Image object i did apply <code>Clock.schedule_once</code> to it, its now updating as samples are being taken."}], "tags": [], "owner": {"reputation": 20381, "user_id": 7254633, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XCPaMN6qzA0/AAAAAAAAAAI/AAAAAAAAADs/o9igiVGFyK0/photo.jpg?sz=128", "display_name": "John Anderson", "link": "https://stackoverflow.com/users/7254633/john-anderson"}, "is_accepted": true, "score": 0, "last_activity_date": 1572767821, "last_edit_date": 1572767821, "creation_date": 1572569879, "answer_id": 58652893, "question_id": 58634251, "link": "https://stackoverflow.com/questions/58634251/kivy-image-not-updating-when-ran-from-another-thread-in-a-while-loop/58652893#58652893", "title": "kivy.Image not updating when ran from another thread in a while loop", "body": "<p>Your modified code still is not really using multi-threading, because your new <code>coll()</code> method simply schedules the <code>another()</code> method to run back on the main thread.</p>\n\n<p>To actually use multi-threading, put the guts back into the <code>coll()</code> method, so that it is actually run in a new thread. And replace the <code>self.user.texture = texture1</code> with a <code>Clock.schedule_once()</code> call. Here is what I think it should look like (but I have not tested this code):</p>\n\n<pre><code>def cdata(self, instance):\n    threading.Thread(\n      target=self.coll, daemon=True).start()    \n\ndef coll(self):\n    (self.im_width, self.im_height) = (160, 160)    \n    self.count = 0\n    self.count_max = 10  \n\n    while self.count &lt; self.count_max:    \n        ret = False\n\n        while(not ret):\n            (ret, frame) = self.capture.read()\n            if(not ret):\n                print(\"Couldn't run trying again\") \n                height, width, channels = frame.shape\n                frame = cv2.flip(frame, 1, 0)\n                normal = cv2.cvtColor(frame, cv2.COLOR_BGR2RGB)\n                normal = cv2.cvtColor(normal, cv2.COLOR_RGB2BGR)\n\n                if self.face_Recognition.identify(frame) is None:\n                    faces = None\n                if self.face_Recognition.identify(frame) is not None:\n                    faces, points = self.face_Recognition.identify(frame)\n                if faces is not None:\n                    for face in faces:\n                            face_bb = face.bounding_box.astype(int)\n                            yourface = normal[max(0, face_bb[1]):min(face_bb[3], normal.shape[0]-1), max(0, face_bb[0]):min(face_bb[2], normal.shape[1]-1)]\n                            face_resize = cv2.resize(yourface, (self.im_width, self.im_height))\n                            cv2.rectangle(frame, (face_bb[0], face_bb[1]), (face_bb[2], face_bb[3]),(220,20,60), 1)\n                            cv2.putText(frame, 'user', (face_bb[0], face_bb[3] + 20),cv2.FONT_HERSHEY_SIMPLEX, 0.7, (220,20,60),1, cv2.LINE_AA)\n                            print(\"Saving training sample \" + str(self.count)+\"/\"+str(self.count_max))\n                            cv2.imwrite('example' + str(self.count) + '.png', face_resize)    \n                            self.trainingSample.source = 'example' + str(self.count) + '.png'    \n                            self.count += 1    \n                    buf1 = cv2.flip(frame, 0)    \n                    buf = buf1.tostring()    \n                    texture1 = Texture.create(size=(frame.shape[1], frame.shape[0]), colorfmt='bgr')\n                    texture1.blit_buffer(buf, colorfmt='bgr', bufferfmt='ubyte')  \n                    #self.user.texture = texture1\n                    Clock.schedule_once(partial(self.setUserTexture, texture1))\n\ndef setUserTexture(self, newTexture, dt)\n    self.user.texture = newTexture\n</code></pre>\n\n<p>This is the picture showing the GUI</p>\n\n<p><img src=\"https://i.stack.imgur.com/egG5u.png\" alt=\"\"></p>\n"}], "owner": {"reputation": 63, "user_id": 11074573, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-2VCqFtDuTUU/AAAAAAAAAAI/AAAAAAAAF30/FFHCgBKrFYw/photo.jpg?sz=128", "display_name": "BrigaDella", "link": "https://stackoverflow.com/users/11074573/brigadella"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 281, "favorite_count": 0, "accepted_answer_id": 58652893, "answer_count": 1, "score": -1, "last_activity_date": 1572767821, "creation_date": 1572473054, "last_edit_date": 1572579352, "question_id": 58634251, "link": "https://stackoverflow.com/questions/58634251/kivy-image-not-updating-when-ran-from-another-thread-in-a-while-loop", "title": "kivy.Image not updating when ran from another thread in a while loop", "body": "<p>I have two Kivy.Image objects in my class the main Image shows the main stream from webcam and the other shows the training samples being colllected from the main stream the process can done but we i run it at first before the were threads it blocked my application/ caused it to freeze then i introduced the threads it runs but it doesn't update the main stream and the one that shows training sample being collected.</p>\n\n<p>I tried multiple ways of multi threading in python but it seems i can't figure it out</p>\n\n<pre><code>    from kivy.uix.floatlayout import FloatLayout\n    from kivy.uix.button import Button\n    from kivy.app import App\n    import threading\n\n    import cv2\n    from kivy.uix.image import Image\n    from Clock_In import face as f\n    class example(App):\n\n        def build(self):\n\n            layout = FloatLayout()\n            self.user = Image()\n            self.trainingSample = Image(source=\"C://Users//SELINA//Project Clock-in//data//Images//face_avatar.jpg\")\n\n            self.user.allow_stretch = True\n            self.user.keep_ratio = True\n\n            self.user.size_hint_x = 0.5\n            self.user.size_hint_y = 0.9\n\n\n            self.user.pos_hint = {\"x\":0.06, \"y\":0.2}\n\n            self.trainingSample.allow_stretch =False\n            self.trainingSample.keep_ratio = False\n\n            self.trainingSample.size_hint_x = None\n            self.trainingSample.size_hint_y = None\n\n            self.trainingSample.width =160\n            self.trainingSample.height=160\n\n            self.face_Recognition = f.Recognition()\n            self.capture = cv2.VideoCapture(0)\n            self.trainingSample.pos_hint = {\"x\":0.6, \"y\": 0.68}\n    self.btnText = Button(text=\"Collect Data\", font_size=12, size_hint_y=None, size_hint_x=None, width = 150, height = 30, pos_hint= {\"x\":0.4, \"y\":0.6})\n            self.btnText.bind(on_press=self.cdata)\n\n\n\n            layout.add_widget(self.user)\n            layout.add_widget(self.trainingSample)\n            layout.add_widget(self.btnText)\n\n            return layout\n     #I have tried this\n        def cdata(self, instance):\n            threading.Thread(\n              target=self.another, daemon=True\n            ).start()\n\ndef another(self, dt):\n    (self.im_width, self.im_height) = (160, 160)\n\n\n\n    self.count = 0\n    self.count_max = 10\n\n\n\n    while self.count &lt; self.count_max:\n\n        ret = False\n\n        while(not ret):\n            (ret, frame) = self.capture.read()\n            if(not ret):\n                print(\"Couldn't run trying again\")\n\n\n                height, width, channels = frame.shape\n\n                frame = cv2.flip(frame, 1, 0)\n                normal = cv2.cvtColor(frame, cv2.COLOR_BGR2RGB)\n                normal = cv2.cvtColor(normal, cv2.COLOR_RGB2BGR)\n\n                if self.face_Recognition.identify(frame) is None:\n                    faces = None\n\n\n                if self.face_Recognition.identify(frame) is not None:\n                    faces, points = self.face_Recognition.identify(frame)\n\n\n\n                if faces is not None:\n                    for face in faces:\n                            face_bb = face.bounding_box.astype(int)\n                            yourface = normal[max(0, face_bb[1]):min(face_bb[3], normal.shape[0]-1), max(0, face_bb[0]):min(face_bb[2], normal.shape[1]-1)]\n\n\n                            face_resize = cv2.resize(yourface, (self.im_width, self.im_height))\n                            cv2.rectangle(frame, (face_bb[0], face_bb[1]), (face_bb[2], face_bb[3]),(220,20,60), 1)\n                            cv2.putText(frame, 'user', (face_bb[0], face_bb[3] + 20),cv2.FONT_HERSHEY_SIMPLEX, 0.7, (220,20,60),1, cv2.LINE_AA)\n\n\n\n\n                            print(\"Saving training sample \" + str(self.count)+\"/\"+str(self.count_max))\n\n\n                            cv2.imwrite('example' + str(self.count) + '.png', face_resize)\n\n                            self.trainingSample.source = 'example' + str(self.count) + '.png'\n\n                            self.count += 1\n\n                    buf1 = cv2.flip(frame, 0)\n\n                    buf = buf1.tostring()\n\n                    texture1 = Texture.create(size=(frame.shape[1], frame.shape[0]), colorfmt='bgr')\n                    texture1.blit_buffer(buf, colorfmt='bgr', bufferfmt='ubyte')\n\n\n                    self.user.texture = texture1\n\n\n\n\n\nif __name__ == '__main__':\n    example().run()\n</code></pre>\n\n<p>I want the self.user to update as the it taking user face Image and also the show the taken Image sample of the user in training sample Image in another thread in a while loop, i used david sandberg facenet from github, if you can please try using haarcascade or something simple the issue is not with the recognition but with kivy widgets updating to the user in real time as training sample are being collected</p>\n"}, {"tags": ["python", "selenium", "selenium-chromedriver", "invalidargumentexception"], "comments": [{"owner": {"reputation": 116545, "user_id": 7429447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5a25589e600c8ae89717c14e51a6754b?s=128&d=identicon&r=PG&f=1", "display_name": "DebanjanB", "link": "https://stackoverflow.com/users/7429447/debanjanb"}, "edited": false, "score": 0, "creation_date": 1572516669, "post_id": 58634243, "comment_id": 103587493, "body": "So which error are you seeing exactly <code>selenium.common.exceptions.InvalidArgumentException: Message: invalid argument: user data directory is already in use</code> or <code>selenium.common.exceptions.WebDriverException: Message: chrome not reachable</code>"}, {"owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 1, "creation_date": 1574400473, "post_id": 58634243, "comment_id": 104227789, "body": "hi, You have solved this problem? This problem happens because the previous testcase has opened a chrome browser which is not closed yet."}], "owner": {"reputation": 11, "user_id": 11199485, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-GV60PlBouqs/AAAAAAAAAAI/AAAAAAAAAAc/HtMGI_F9kZ8/photo.jpg?sz=128", "display_name": "Chris Dennison", "link": "https://stackoverflow.com/users/11199485/chris-dennison"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 837, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1572473000, "creation_date": 1572473000, "last_edit_date": 1592644375, "question_id": 58634243, "link": "https://stackoverflow.com/questions/58634243/selenium-chrome-python-invalidargumentexception-specify-a-unique-value-for-u", "title": "selenium chrome python &quot;InvalidArgumentException&quot; specify a unique value for --user-data-dir argument", "body": "<p><a href=\"https://stackoverflow.com/questions/57531032/how-do-i-specify-a-unique-value-for-user-data-dir\">Leo's question on 8/16/2019</a> was marked duplicate, yet was not!  I too get the error</p>\n<blockquote>\n<p>selenium.common.exceptions.InvalidArgumentException: Message: invalid argument: user data directory is already in use, please specify a unique value for --user-data-dir argument, or don't use --user-data-dir</p>\n</blockquote>\n<p>I've tried various forms of options and chrome_options with no change.  I tried with and without specifying the use-data-dir, which then just brings up a generic profile.</p>\n<p><a href=\"https://stackoverflow.com/users/7429447/debanjanb\">DebanjanB</a> reported</p>\n<blockquote>\n<p>This question already has an answer here:</p>\n<p><a href=\"https://stackoverflow.com/questions/49270109/how-to-open-a-chrome-profile-through-python\">How to open a Chrome Profile through Python</a></p>\n<p><a href=\"https://stackoverflow.com/questions/50635087/how-to-open-a-chrome-profile-through-user-data-dir-argument-of-selenium\">How to open a Chrome Profile through --user-data-dir argument of Selenium</a></p>\n<p><a href=\"https://stackoverflow.com/questions/52394408/how-to-use-chrome-profile-in-selenium-webdriver-python-3\">How to use Chrome Profile in Selenium Webdriver Python 3</a></p>\n</blockquote>\n<p>However, these only show how to use selenium, which I am pretty sure Leo and I have written in the code, yet still get this error.  Help!</p>\n<p>Here is the code:</p>\n<pre><code>from selenium import webdriver\nfrom selenium.webdriver.chrome.options import Options\n\nCrOptions = Options()\nProfilePath = &quot;C:\\\\Users\\\\name\\\\AppData\\\\Local\\\\Google\\\\Chrome\\\\User Data\\\\&quot;\nCrOptions.add_argument(&quot;user-data-dir=&quot; + ProfilePath)\nProfileName = &quot;Profile 3&quot;\nCrOptions.add_argument(&quot;profile-directory=&quot; + ProfileName)\nbrowser = webdriver.Chrome(options=CrOptions)\n\nbrowser.get(&quot;HTTP://msftconnectiontest.com/redirect&quot;)\n</code></pre>\n<p>It opens up the correct profile in Chrome, but meanwhile gives the InvalidArgumentException and the get command returns:</p>\n<blockquote>\n<p>selenium.common.exceptions.WebDriverException: Message: chrome not reachable</p>\n</blockquote>\n"}, {"tags": ["python", "format"], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 11551502, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37fd8c117dbf64a636ad64912524e518?s=128&d=identicon&r=PG&f=1", "display_name": "Rick", "link": "https://stackoverflow.com/users/11551502/rick"}, "edited": false, "score": 0, "creation_date": 1572530655, "post_id": 58634316, "comment_id": 103595229, "body": "I  run your code and add a command df at the end to call it, but the output is not formatted. In addition, I need the formatted df to be stored as a dataframe, so  I would  think I need something like  test= .....   What am I doing wrong?"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user11751534"}, "is_accepted": false, "score": 0, "last_activity_date": 1572473663, "last_edit_date": 1572473663, "creation_date": 1572473447, "answer_id": 58634316, "question_id": 58634235, "link": "https://stackoverflow.com/questions/58634235/how-to-formt-df-columns-in-python/58634316#58634316", "title": "How to formt df columns in Python", "body": "<p>You are assigning the style to test. </p>\n\n<pre><code>data=[[0.101, 0.00223], [2.1203, 0.00456]] \n\ndf=pd.DataFrame(data,columns=['a','b'])\n\ndf.style.format(   {'a': \"{:.2f}\" ,   'b': \"{:.2%} \"}      )\n</code></pre>\n\n<p>removing test produces the required output. or you just need to call test again at the end of the code.</p>\n"}, {"comments": [{"owner": {"reputation": 69, "user_id": 11551502, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37fd8c117dbf64a636ad64912524e518?s=128&d=identicon&r=PG&f=1", "display_name": "Rick", "link": "https://stackoverflow.com/users/11551502/rick"}, "edited": false, "score": 0, "creation_date": 1572530799, "post_id": 58634535, "comment_id": 103595300, "body": "works perfectly. How would I do if I want to format all the columns of the df with same format (say, all columns round(x,2) , without having to type one by one (I have too many columns...)?"}, {"owner": {"reputation": 4425, "user_id": 2346961, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/lZJot.jpg?s=128&g=1", "display_name": "Sreejith Nair", "link": "https://stackoverflow.com/users/2346961/sreejith-nair"}, "reply_to_user": {"reputation": 69, "user_id": 11551502, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37fd8c117dbf64a636ad64912524e518?s=128&d=identicon&r=PG&f=1", "display_name": "Rick", "link": "https://stackoverflow.com/users/11551502/rick"}, "edited": false, "score": 0, "creation_date": 1572599233, "post_id": 58634535, "comment_id": 103616613, "body": "@Rick, If you have other requirement other that what was asked then you can post it as new thread. You need to include your work (what you have done to achieve) along with any trouble for us to help you further."}], "tags": [], "owner": {"reputation": 4425, "user_id": 2346961, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/lZJot.jpg?s=128&g=1", "display_name": "Sreejith Nair", "link": "https://stackoverflow.com/users/2346961/sreejith-nair"}, "is_accepted": false, "score": 0, "last_activity_date": 1572474995, "creation_date": 1572474995, "answer_id": 58634535, "question_id": 58634235, "link": "https://stackoverflow.com/questions/58634235/how-to-formt-df-columns-in-python/58634535#58634535", "title": "How to formt df columns in Python", "body": "<p>You may try following. Please note that this is changing format on you raw data along with printing output.</p>\n\n<pre><code>data = [[0.101, 0.00223], [2.1203, 0.00456]]\ndf = pd.DataFrame(data,columns=['a','b'])\ndf['a'] = df['a'].apply(lambda x:round(x,2))\ndf['b'] = df['b'].apply(lambda x:'{:,.2f}%'.format(x*100))\nprint(df)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/1Etwc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1Etwc.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 69, "user_id": 11551502, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37fd8c117dbf64a636ad64912524e518?s=128&d=identicon&r=PG&f=1", "display_name": "Rick", "link": "https://stackoverflow.com/users/11551502/rick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 23, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1572474995, "creation_date": 1572472965, "question_id": 58634235, "link": "https://stackoverflow.com/questions/58634235/how-to-formt-df-columns-in-python", "title": "How to formt df columns in Python", "body": "<pre><code>data=[[0.101, 0.00223], [2.1203, 0.00456]]\ndf=pd.DataFrame(data,columns=['a','b'])\ntest= df.style.format(   {'a': \"{:.2f}\" ,   'b': \"{:.2%} \"}      )\n</code></pre>\n\n<p>I was expecting the output below, but it doesnt produce  any \noutput (I'm using Spyder). No error message is produced.</p>\n\n<p>a       b\n0.10    0.22%\n2.12    0.45%</p>\n\n<p>Is there  a way to do this formatting in a simple way?</p>\n"}, {"tags": ["python", "pycharm", "python-unittest"], "answers": [{"tags": [], "owner": {"reputation": 445, "user_id": 423560, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b254d7fff4430d8dda03a85aaeb79ac7?s=128&d=identicon&r=PG", "display_name": "Samantha Atkins", "link": "https://stackoverflow.com/users/423560/samantha-atkins"}, "is_accepted": false, "score": 0, "last_activity_date": 1572549376, "creation_date": 1572549376, "answer_id": 58649931, "question_id": 58634220, "link": "https://stackoverflow.com/questions/58634220/pycharm-running-unittests-stopped-working/58649931#58649931", "title": "pycharm running unittests stopped working", "body": "<p>Ah ha! The project having the problem was opened via a soft link directory.  When I opened the same thing using the direct directory the problem disappeared.  Bizarre. </p>\n"}], "owner": {"reputation": 445, "user_id": 423560, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b254d7fff4430d8dda03a85aaeb79ac7?s=128&d=identicon&r=PG", "display_name": "Samantha Atkins", "link": "https://stackoverflow.com/users/423560/samantha-atkins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 18, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1572549376, "creation_date": 1572472767, "question_id": 58634220, "link": "https://stackoverflow.com/questions/58634220/pycharm-running-unittests-stopped-working", "title": "pycharm running unittests stopped working", "body": "<p>For some unknown reason my pycharm has stopped successfully running unittests. Before I could simply right click a file of tests and hit Debug unittests in.. \nor in the file itself call for debugging on the TestCase subclass itself or on any test_ method thereof.  Now it just finishes immediately with nothing and creates an artifact in configurations that seems to be treating the unitest file as a simple python file.   If I delete that I sometimes get in a weird state where it fails a bunch of assertions immediately and tries to user my path to the file as a module somehow by the error it puts out.</p>\n\n<p>I don't understand.  I have used pycharm for years and never seen this problem previously. </p>\n\n<p>Looks to be the 2019.2 version running on Ubuntu.  Did something change? </p>\n"}, {"tags": ["python", "tensorflow", "keras", "nlp"], "answers": [{"tags": [], "owner": {"reputation": 35, "user_id": 4432148, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-3dao9EOHG4g/AAAAAAAAAAI/AAAAAAAAJ-s/HayrjTLZqIs/photo.jpg?sz=128", "display_name": "Bernhard Piskernik", "link": "https://stackoverflow.com/users/4432148/bernhard-piskernik"}, "is_accepted": false, "score": 0, "last_activity_date": 1573547822, "creation_date": 1573547822, "answer_id": 58814827, "question_id": 58634202, "link": "https://stackoverflow.com/questions/58634202/keras-lambda-layer-and-py-function-gives-error-cannot-iterate-over-a-shape-with/58814827#58814827", "title": "Keras Lambda Layer and py_function gives error Cannot iterate over a shape with unknown rank", "body": "<p>You need to set the shape of py_function's output:</p>\n\n<pre><code>def get_index_tensor(input):\n    result = tf.py_function(get_index, [input[0], input[1]], tf.string)\n    result.set_shape((None, 70, 1))\n    return result\n</code></pre>\n"}], "owner": {"reputation": 705, "user_id": 682661, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/394398d1c2ac9044830c19ea850d9443?s=128&d=identicon&r=PG", "display_name": "Daisy", "link": "https://stackoverflow.com/users/682661/daisy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 203, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1573547822, "creation_date": 1572472674, "question_id": 58634202, "link": "https://stackoverflow.com/questions/58634202/keras-lambda-layer-and-py-function-gives-error-cannot-iterate-over-a-shape-with", "title": "Keras Lambda Layer and py_function gives error Cannot iterate over a shape with unknown rank", "body": "<p>I am trying to build a model that among its implementation that it takes two text inputs and get a one-hot vector based on one of the indices of the input.</p>\n\n<p>I created the following custom functions:</p>\n\n<pre><code>def get_index(text, word):\n    # get index\n    index = get_expression_indices(text, word)\n    id_seq = []\n    for i in range(70): #length of the text\n        if i == index :\n            id_seq.insert(i, 1)\n        else:\n            id_seq.insert(i, 0)\n    return np.array(id_seq)\n\ndef get_index_tensor(input):\n    return tf.py_function(get_index, [input[0], input[1]], tf.string)\n</code></pre>\n\n<p>And here is a dummy model</p>\n\n<pre><code># input layers\ninput_text_1 = Input(shape=(1,), dtype='string')\ninput_text_2 = Input(shape=(1,), dtype='string')\ncontext = Lambda(emb_utils.get_index_tensor, output_shape=(None,))([input_text_1, input_text_2])\nmodel = Model(inputs=[input_text_1, input_text_2], outputs=context)\n</code></pre>\n\n<p>I get an error: <code>ValueError: Cannot iterate over a shape with unknown rank.</code>\nThe output shape should be (batch_size, 70, 1)\nWhen I remove <code>output_sape=(None,)</code> I get <code>TypeError: object of type 'NoneType' has no len()</code>\nAny ideas on what the problem could be?</p>\n"}, {"tags": ["python", "matplotlib", "axis-labels", "imshow"], "comments": [{"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 1, "creation_date": 1572482058, "post_id": 58634187, "comment_id": 103577644, "body": "You destroyed the <code>set_yticks</code> method by assigning a list to it instead of calling it."}, {"owner": {"reputation": 49, "user_id": 1773603, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh6.googleusercontent.com/-UZXqQyyTv38/AAAAAAAAAAI/AAAAAAAAAAA/AMZuucmjtkpUxrj9UY16bqdK3OfqQoGwmw/photo.jpg?sz=128", "display_name": "youpilat13", "link": "https://stackoverflow.com/users/1773603/youpilat13"}, "reply_to_user": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1572485051, "post_id": 58634187, "comment_id": 103578230, "body": "@ImportanceOfBeingErnest ,  thanks but how to call   it : directly by doing <code>ax.set_yticks(10, 1000, 2000, 3000, 4000, 5000)</code> ??"}], "answers": [{"tags": [], "owner": {"reputation": 5573, "user_id": 7692859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb1b961fa00ddbd4fccc08e070762a27?s=128&d=identicon&r=PG&f=1", "display_name": "Anis R.", "link": "https://stackoverflow.com/users/7692859/anis-r"}, "is_accepted": false, "score": 1, "last_activity_date": 1573760990, "creation_date": 1573760990, "answer_id": 58864711, "question_id": 58634187, "link": "https://stackoverflow.com/questions/58634187/how-to-add-manually-or-automatically-a-missing-y-label-on-y-axis-which-is-not-un/58864711#58864711", "title": "How to add manually or automatically a missing y-label on y-axis which is not uniform towards other regular intervals", "body": "<p>Like @ImportanceOfBeingErnest commented, <code>set_yticks</code> is a function, not a property. You should call it and pass to it a list of labels, like so:</p>\n\n<pre><code>y_label_list = ['10', '1000', '2000', '3000', '4000', '5000']\nax.set_yticks(y_label_list)\n</code></pre>\n\n<p><a href=\"https://matplotlib.org/3.1.1/api/_as_gen/matplotlib.axes.Axes.set_yticks.html\" rel=\"nofollow noreferrer\">Documentation</a></p>\n"}, {"comments": [{"owner": {"reputation": 49, "user_id": 1773603, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh6.googleusercontent.com/-UZXqQyyTv38/AAAAAAAAAAI/AAAAAAAAAAA/AMZuucmjtkpUxrj9UY16bqdK3OfqQoGwmw/photo.jpg?sz=128", "display_name": "youpilat13", "link": "https://stackoverflow.com/users/1773603/youpilat13"}, "edited": false, "score": 0, "creation_date": 1573846500, "post_id": 58880974, "comment_id": 104034348, "body": "Thanks,  is there a way to use the instruction <code>plt.yticks(fontsize = 20) </code> with your solution ? I would like to use with : <code>import matplotlib.pyplot as plt</code> ? I mean without using <code>ax = plt.gca()</code> ?"}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "reply_to_user": {"reputation": 49, "user_id": 1773603, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh6.googleusercontent.com/-UZXqQyyTv38/AAAAAAAAAAI/AAAAAAAAAAA/AMZuucmjtkpUxrj9UY16bqdK3OfqQoGwmw/photo.jpg?sz=128", "display_name": "youpilat13", "link": "https://stackoverflow.com/users/1773603/youpilat13"}, "edited": false, "score": 0, "creation_date": 1573846702, "post_id": 58880974, "comment_id": 104034419, "body": "<code>ax.tick_params(axis=&quot;y&quot;, labelsize=20)</code>?"}, {"owner": {"reputation": 49, "user_id": 1773603, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh6.googleusercontent.com/-UZXqQyyTv38/AAAAAAAAAAI/AAAAAAAAAAA/AMZuucmjtkpUxrj9UY16bqdK3OfqQoGwmw/photo.jpg?sz=128", "display_name": "youpilat13", "link": "https://stackoverflow.com/users/1773603/youpilat13"}, "edited": false, "score": 0, "creation_date": 1573846920, "post_id": 58880974, "comment_id": 104034496, "body": "Am I obliged to use <code>ax = plt.gca()</code>to   handle axis labels ? Can&#39;t I directly use a <code>plt.ax.set_yticks(....)</code> ?"}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "reply_to_user": {"reputation": 49, "user_id": 1773603, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh6.googleusercontent.com/-UZXqQyyTv38/AAAAAAAAAAI/AAAAAAAAAAA/AMZuucmjtkpUxrj9UY16bqdK3OfqQoGwmw/photo.jpg?sz=128", "display_name": "youpilat13", "link": "https://stackoverflow.com/users/1773603/youpilat13"}, "edited": false, "score": 0, "creation_date": 1573846974, "post_id": 58880974, "comment_id": 104034518, "body": "You can use <code>plt.yticks(...)</code> or <code>plt.gca().set_yticks(...)</code>"}], "tags": [], "owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "is_accepted": true, "score": 4, "last_activity_date": 1573834786, "creation_date": 1573834786, "answer_id": 58880974, "question_id": 58634187, "link": "https://stackoverflow.com/questions/58634187/how-to-add-manually-or-automatically-a-missing-y-label-on-y-axis-which-is-not-un/58880974#58880974", "title": "How to add manually or automatically a missing y-label on y-axis which is not uniform towards other regular intervals", "body": "<p>As commented, you destroyed the <code>set_yticks</code> method by assigning a list to it instead of calling it. Also mind that the tick positions should not be strings.</p>\n\n<pre><code>y_label_list = [10, 1000, 2000, 3000, 4000, 5000]\nax.set_yticks(y_label_list)\nax.set_yticklabels(y_label_list)\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 1773603, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh6.googleusercontent.com/-UZXqQyyTv38/AAAAAAAAAAI/AAAAAAAAAAA/AMZuucmjtkpUxrj9UY16bqdK3OfqQoGwmw/photo.jpg?sz=128", "display_name": "youpilat13", "link": "https://stackoverflow.com/users/1773603/youpilat13"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 239, "favorite_count": 0, "accepted_answer_id": 58880974, "answer_count": 2, "score": 2, "last_activity_date": 1573834786, "creation_date": 1572472609, "question_id": 58634187, "link": "https://stackoverflow.com/questions/58634187/how-to-add-manually-or-automatically-a-missing-y-label-on-y-axis-which-is-not-un", "title": "How to add manually or automatically a missing y-label on y-axis which is not uniform towards other regular intervals", "body": "<p>I have the following figure :</p>\n\n<p><a href=\"https://i.stack.imgur.com/QWDi4.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QWDi4.jpg\" alt=\"colormap with starting value not showing on y-axis\"></a></p>\n\n<p>I made it by the following Python script :</p>\n\n<pre><code># Colormap plot\nim = ax.imshow(np.log10(np.abs(matrixCl_der_transposed)), extent = [1e-8, 1e-1, 10, 5000], origin='lower',\\\n               aspect = 'auto', interpolation = 'none', cmap = 'viridis')\n\n# Increase space between x-axis and x-label\nax.tick_params(axis = 'x', which = 'major', pad = 15) \n\n# Add lower multipole l = 10\ny_label_list = ['10', '1000', '2000', '3000', '4000', '5000']\nax.set_yticks = [10, 1000, 2000, 3000, 4000, 5000]\nax.set_yticklabels(y_label_list)\n\n# Log scal for step\nplt.xscale('log')\n\n# Title \nplt.title('$\\log_{10}|(C_{l}\\')|$ of '+paramLatexArray[idParam]+' at $z$ = '+\\\n           str(zrange[idRedshift]), fontsize = 24, pad = 25) \n\n# Lebels on axis\nplt.xlabel('step', fontsize = 20) \nplt.ylabel('$l$ multipole', fontsize = 20) \nplt.xticks(fontsize = 20) \nplt.yticks(fontsize = 20) \nplt.grid()\n\n\n# Color bar \nclb = plt.colorbar(im)\nclb.ax.set_title('$\\log_{10}|(C_{l}\\')|$', fontsize = 20, pad = 12) \nclb.ax.tick_params(labelsize = 16) \ntick_locator = ticker.MaxNLocator(nbins=15)\nclb.locator = tick_locator\nclb.update_ticks()\n</code></pre>\n\n<p>As you can see, I tried to add explicitly  the lower value (origin which is equal to <code>10</code>) of y-axis, by doing :</p>\n\n<pre><code># Add lower multipole l = 10\ny_label_list = ['10', '1000', '2000', '3000', '4000', '5000']\nax.set_yticks = [10, 1000, 2000, 3000, 4000, 5000]\nax.set_yticklabels(y_label_list)\n</code></pre>\n\n<p>But unfortunalety, this lower value doesn't appear on left bottom of the plot. Values <code>1000</code>, <code>2000</code>, <code>3000</code>, <code>4000</code> and <code>5000</code> are shown but not for <code>10</code> value.</p>\n\n<p>Does <code>extent = [1e-8, 1e-1, 10, 5000]</code> option of <code>imshow</code> cause this issue ?</p>\n\n<p>I don't know what to do to add automatically this lower value, if anyone had a solution, this would be nice.</p>\n\n<p>Regards</p>\n"}, {"tags": ["python", "access-token", "flask-restful", "refresh-token", "flask-jwt-extended"], "comments": [{"owner": {"reputation": 2956, "user_id": 272689, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d765f09f68f08a92a904571e7244fa87?s=128&d=identicon&r=PG", "display_name": "vimalloc", "link": "https://stackoverflow.com/users/272689/vimalloc"}, "edited": false, "score": 1, "creation_date": 1572492447, "post_id": 58634180, "comment_id": 103579614, "body": "See this for why you are seeing a 500 error instead of a 400 one: <a href=\"https://github.com/vimalloc/flask-jwt-extended/issues/86#issuecomment-519347386\" rel=\"nofollow noreferrer\">github.com/vimalloc/flask-jwt-extended/issues/&hellip;</a>. Getting the 400 error back should tell you what actually went wrong with validating the token."}, {"owner": {"reputation": 1417, "user_id": 6560773, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/rUJo3.png?s=128&g=1", "display_name": "MattSom", "link": "https://stackoverflow.com/users/6560773/mattsom"}, "reply_to_user": {"reputation": 2956, "user_id": 272689, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d765f09f68f08a92a904571e7244fa87?s=128&d=identicon&r=PG", "display_name": "vimalloc", "link": "https://stackoverflow.com/users/272689/vimalloc"}, "edited": false, "score": 0, "creation_date": 1572527105, "post_id": 58634180, "comment_id": 103593262, "body": "@vimalloc Thanks for the response. I&#39;m not sure what modifications you are suggesting. Should I only set the error handler with the <code>jwt._set_error_handler_callbacks(api)</code> or do I need to return an additional 400 error code in the secret endpoint somehow?"}, {"owner": {"reputation": 2956, "user_id": 272689, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d765f09f68f08a92a904571e7244fa87?s=128&d=identicon&r=PG", "display_name": "vimalloc", "link": "https://stackoverflow.com/users/272689/vimalloc"}, "edited": false, "score": 0, "creation_date": 1572527435, "post_id": 58634180, "comment_id": 103593442, "body": "Just the _set_error_handler_callback or PROPAGATE_EXCEPTIONS thing. Flask_jwt_extended should be returning a 400 response with details as to why decoding the token failed, such as if it was missing, expired, etc, but flask restful and rest plus don\u2019t play nicely with that by default."}, {"owner": {"reputation": 1417, "user_id": 6560773, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/rUJo3.png?s=128&g=1", "display_name": "MattSom", "link": "https://stackoverflow.com/users/6560773/mattsom"}, "reply_to_user": {"reputation": 2956, "user_id": 272689, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d765f09f68f08a92a904571e7244fa87?s=128&d=identicon&r=PG", "display_name": "vimalloc", "link": "https://stackoverflow.com/users/272689/vimalloc"}, "edited": false, "score": 0, "creation_date": 1572530204, "post_id": 58634180, "comment_id": 103594992, "body": "I get <code>@app.errorhandler(NoAuthorizationError) AttributeError: &#39;Api&#39; object has no attribute &#39;errorhandler&#39;</code>. Should I give the Api object or de Flask object as a parameter?"}, {"owner": {"reputation": 2956, "user_id": 272689, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d765f09f68f08a92a904571e7244fa87?s=128&d=identicon&r=PG", "display_name": "vimalloc", "link": "https://stackoverflow.com/users/272689/vimalloc"}, "edited": false, "score": 1, "creation_date": 1572530464, "post_id": 58634180, "comment_id": 103595140, "body": "Oh, it looks like that guide is using flask-restful, not flask-restplus. For flask-restful, you will want to use this (<a href=\"https://github.com/vimalloc/flask-jwt-extended/issues/86#issuecomment-444983119\" rel=\"nofollow noreferrer\">github.com/vimalloc/flask-jwt-extended/issues/&hellip;</a>), not the _set_error_handler_callbacks stuff."}, {"owner": {"reputation": 1417, "user_id": 6560773, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/rUJo3.png?s=128&g=1", "display_name": "MattSom", "link": "https://stackoverflow.com/users/6560773/mattsom"}, "reply_to_user": {"reputation": 2956, "user_id": 272689, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d765f09f68f08a92a904571e7244fa87?s=128&d=identicon&r=PG", "display_name": "vimalloc", "link": "https://stackoverflow.com/users/272689/vimalloc"}, "edited": false, "score": 0, "creation_date": 1572531902, "post_id": 58634180, "comment_id": 103595937, "body": "@vimalloc Yes, I forgot to mention that it is flask-restful. Thank you for the helpful response, I&#39;ve got a detailed stack trace this time so maybe I can look for a specific problem :)"}], "answers": [{"tags": [], "owner": {"reputation": 1417, "user_id": 6560773, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/rUJo3.png?s=128&g=1", "display_name": "MattSom", "link": "https://stackoverflow.com/users/6560773/mattsom"}, "is_accepted": true, "score": 0, "last_activity_date": 1572551078, "creation_date": 1572551078, "answer_id": 58650240, "question_id": 58634180, "link": "https://stackoverflow.com/questions/58634180/flask-jwt-extended-jwt-refresh-token-required-annotation-does-not-work/58650240#58650240", "title": "Flask-JWT-Extended: @jwt_refresh_token_required annotation does not work", "body": "<p>As <a href=\"https://stackoverflow.com/questions/58634180/flask-jwt-extended-jwt-refresh-token-required-annotation-does-not-work#comment103595140_58634180\">@vimalloc</a> has suggested, I needed to add </p>\n\n<pre><code>app.config['PROPAGATE_EXCEPTIONS'] = True\n</code></pre>\n\n<p>while configuring the application object to see the actual error, causing the code to break and return a code 500</p>\n\n<p>The answer is embarrassingly simple, the token checking callback function in the <code>__init__.py</code> file was referencing itself so I had to remove the <code>project_folder</code> prefix:</p>\n\n<p>From this:</p>\n\n<pre><code>@jwt.token_in_blacklist_loader\ndef check_if_token_in_blacklist(decrypted_token):\n    jti = decrypted_token['jti']\n    return poject_folder.Model.RevokedTokenModel.is_jti_blacklisted(jti)\n</code></pre>\n\n<p>To this:</p>\n\n<pre><code>@jwt.token_in_blacklist_loader\ndef check_if_token_in_blacklist(decrypted_token):\n    jti = decrypted_token['jti']\n    return Model.RevokedTokenModel.is_jti_blacklisted(jti)\n</code></pre>\n"}], "owner": {"reputation": 1417, "user_id": 6560773, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/rUJo3.png?s=128&g=1", "display_name": "MattSom", "link": "https://stackoverflow.com/users/6560773/mattsom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1707, "favorite_count": 0, "accepted_answer_id": 58650240, "answer_count": 1, "score": 0, "last_activity_date": 1572551108, "creation_date": 1572472553, "last_edit_date": 1572551108, "question_id": 58634180, "link": "https://stackoverflow.com/questions/58634180/flask-jwt-extended-jwt-refresh-token-required-annotation-does-not-work", "title": "Flask-JWT-Extended: @jwt_refresh_token_required annotation does not work", "body": "<p>I have a login resource (<code>/login</code> endpoint), following Oleg Agapov's <a href=\"https://codeburst.io/jwt-authorization-in-flask-c63c1acf4eeb\" rel=\"nofollow noreferrer\">tutorial</a>:</p>\n\n<pre><code>class UserLogin(Resource):\n    def post(self):\n        data = parser.parse_args()\n        current_user = User.find_by_email(data['email'])\n\n        if not current_user:\n            return {'message': 'User {} doesn\\'t exist'.format(data['email'])}\n\n        if User.verify_hash(data['password'], current_user.password):\n            refresh_token = create_refresh_token(identity = data['email'])\n            return {\n                'message': 'Logged in as {}'.format(current_user.email),\n                'refresh_token': refresh_token\n                }\n        else:\n            return {'message': 'Wrong credentials'}\n</code></pre>\n\n<p>Calling this endpoint with correct credentials I do get the response back:</p>\n\n<pre><code>{\n  \"message\": \"Logged in as test@gmail.com\",\n  \"refresh_token\": \"eyJ0eXAiOiJKV1.............TheVeryLongRefreshTokenString...........JfkRatZ2NaA72Tl4b9C4-e3d6kXA\"\n}\n</code></pre>\n\n<p>Now, I have a test resource on the <code>/secret</code> endpoint:</p>\n\n<pre><code>class SecretResource(Resource):\n    @jwt_refresh_token_required\n    def get(self):\n        return {\n            'answer': 42\n        }\n</code></pre>\n\n<p>Calling this endpoint with the <code>refresh_token</code> included as a Bearer header in the request should return:</p>\n\n<pre><code>{\n   \"answer\": 42\n}\n</code></pre>\n\n<p>Without the <code>@jwt_refresh_token_required</code> annotation (without sending any tokens) this is exactly what I get. But I need the annotation to secure my endpoint with some token requirement. </p>\n\n<p>Only it doesn't work. Using the <code>Authentication : Bearer *Refresh_Token*</code> header I only get:</p>\n\n<pre><code>{\n   \"message\": \"Internal Server Error\"\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/EX9zV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/EX9zV.png\" alt=\"enter image description here\"></a></p>\n\n<p>I know <code>access_token</code> should be used for this, but I did not wanted it for its 15 minutes expiration time. I don't see why would it be a problem since we are doing the same to refresh the <code>access_token</code> itself with an endpoint requiring a <code>refresh_token</code>. I can be wrong of course.</p>\n\n<p>This is the snippet from the <code>poject_folder</code> root folder's <code>__init__.py</code> where the revocation is checked:</p>\n\n<pre><code>@jwt.token_in_blacklist_loader\ndef check_if_token_in_blacklist(decrypted_token):\n    jti = decrypted_token['jti']\n    return poject_folder.Model.RevokedTokenModel.is_jti_blacklisted(jti)\n</code></pre>\n\n<p>What am I missing here?</p>\n"}, {"tags": ["python", "lstm", "recurrent-neural-network", "tensorflow2.0", "dropout"], "answers": [{"tags": [], "owner": {"reputation": 5106, "user_id": 13465258, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af312ebdf3daf22a61af97062eccf2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Tensorflow Warrior", "link": "https://stackoverflow.com/users/13465258/tensorflow-warrior"}, "is_accepted": false, "score": 0, "last_activity_date": 1591180100, "creation_date": 1591180100, "answer_id": 62170633, "question_id": 58634151, "link": "https://stackoverflow.com/questions/58634151/variable-batch-sizes-dont-work-with-tf-keras-layers-rnn-when-dropout-is-used-t/62170633#62170633", "title": "Variable batch sizes don&#39;t work with tf.keras.layers.RNN when dropout is used (TF2.0)?", "body": "<p>I could reproduce your error with <code>Tensorflow Version 2.0.0</code>. </p>\n\n<p>However, there is no error if I upgrade the <code>Tensorflow Version</code> either to <code>2.1</code> or to <code>2.2</code> and run the same code.</p>\n\n<p>Complete working code is shown below:</p>\n\n<pre><code>!pip install tensorflow==2.2\n\nimport numpy as np\nimport tensorflow as tf\n\nprint(tf.__version__) # Printing the Tensorflow Version just to be Sure\n\ninput_dim = 3\noutput_dim = 3\nnum_timesteps = 2\nneurons = [32,32]\n\n# Model\ninput_layer = tf.keras.Input(shape=(num_timesteps, input_dim))\ncell = [tf.keras.layers.LSTMCell(n,dropout=.2) for n in neurons]\nlstm = tf.keras.layers.RNN(cell,return_state=True,return_sequences=True)\nlstm_out, hidden_state, cell_state = lstm(input_layer)\noutput = tf.keras.layers.Dense(output_dim)(lstm_out)\n\nmdl = tf.keras.Model(\n    inputs=input_layer,\n    outputs=[hidden_state, cell_state, output]\n)\n\n# Run batches of different sizes\nbatch_1 = np.random.rand(10, num_timesteps, input_dim).astype(np.float32)\nh_state, c_state, out = mdl(batch_1) # batch size is 10x2x3\n\nbatch_2 = np.random.rand(9, num_timesteps, input_dim).astype(np.float32)\nh_state, c_state, out = mdl(batch_2) # batch size is 9x2x3\n</code></pre>\n\n<p>Output of the above code is shown below:</p>\n\n<pre><code>2.2.0\n</code></pre>\n\n<p>Hope this helps. Happy Learning!</p>\n"}], "owner": {"reputation": 11, "user_id": 4664182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e235c5e81cd6c04111aca309ce3aa29?s=128&d=identicon&r=PG&f=1", "display_name": "Jay", "link": "https://stackoverflow.com/users/4664182/jay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 138, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1591180100, "creation_date": 1572472401, "question_id": 58634151, "link": "https://stackoverflow.com/questions/58634151/variable-batch-sizes-dont-work-with-tf-keras-layers-rnn-when-dropout-is-used-t", "title": "Variable batch sizes don&#39;t work with tf.keras.layers.RNN when dropout is used (TF2.0)?", "body": "<p>I would like to use the RNN wrapper with multiple LSTM cells with dropout. However, if the batch size changes, I get an error. </p>\n\n<p>When I remove dropout, the code the works just fine, so I believe the issue is that the dropout mask is not being reset between batches.</p>\n\n<pre><code>import numpy as np\nimport tensorflow as tf\n\ninput_dim = 3\noutput_dim = 3\nnum_timesteps = 2\nneurons = [32,32]\n\n# Model\ninput_layer = tf.keras.Input(shape=(num_timesteps, input_dim))\ncell = [tf.keras.layers.LSTMCell(n,dropout=.2) for n in neurons]\nlstm = tf.keras.layers.RNN(cell,return_state=True,return_sequences=True)\nlstm_out, hidden_state, cell_state = lstm(input_layer)\noutput = tf.keras.layers.Dense(output_dim)(lstm_out)\n\nmdl = tf.keras.Model(\n    inputs=input_layer,\n    outputs=[hidden_state, cell_state, output]\n)\n\n# Run batches of different sizes\nbatch_1 = np.random.rand(10, num_timesteps, input_dim).astype(np.float32)\nh_state, c_state, out = mdl(batch_1) # batch size is 10x2x3\n\nbatch_2 = np.random.rand(9, num_timesteps, input_dim).astype(np.float32)\nh_state, c_state, out = mdl(batch_2) # batch size is 9x2x3\n</code></pre>\n\n<p>This code gives the error: InvalidArgumentError: Incompatible shapes: [9,3] vs. [10,3] [Op:Mul] name: model/rnn/mul/</p>\n\n<p>If I take out dropout, the code works. Can I use reset_dropout_mask somehow? It seems it's not being called.</p>\n"}, {"tags": ["python", "matplotlib", "extrapolation"], "comments": [{"owner": {"reputation": 458, "user_id": 4292105, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/781e1ee932aa27fb320c1ff03a6286dd?s=128&d=identicon&r=PG&f=1", "display_name": "Leporello", "link": "https://stackoverflow.com/users/4292105/leporello"}, "edited": false, "score": 0, "creation_date": 1572524351, "post_id": 58634096, "comment_id": 103591651, "body": "Well, extrapolating data from <code>interp1d</code> will be based on the last two points, so one way to &quot;fix&quot; it would be to change the index of your last fitted point. But the real question is: what do you want to do? Are the extrapolated lines supposed to be straight lines, for instance?"}, {"owner": {"reputation": 175, "user_id": 10832310, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-BTRsOLhbuYY/AAAAAAAAAAI/AAAAAAAAAAA/sZXLwRw5JZ0/photo.jpg?sz=128", "display_name": "Jung", "link": "https://stackoverflow.com/users/10832310/jung"}, "reply_to_user": {"reputation": 458, "user_id": 4292105, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/781e1ee932aa27fb320c1ff03a6286dd?s=128&d=identicon&r=PG&f=1", "display_name": "Leporello", "link": "https://stackoverflow.com/users/4292105/leporello"}, "edited": false, "score": 0, "creation_date": 1572603884, "post_id": 58634096, "comment_id": 103618327, "body": "@Leporello yes i want the lower extrapolated line to be a straight line ( the continuation of the extrapolated line within the interval 200 to 400). how can i do this?"}], "owner": {"reputation": 175, "user_id": 10832310, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-BTRsOLhbuYY/AAAAAAAAAAI/AAAAAAAAAAA/sZXLwRw5JZ0/photo.jpg?sz=128", "display_name": "Jung", "link": "https://stackoverflow.com/users/10832310/jung"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1572472000, "creation_date": 1572472000, "question_id": 58634096, "link": "https://stackoverflow.com/questions/58634096/extrapolation-in-python-temperature-curve-in-bomb-calorimeter", "title": "Extrapolation in python (temperature curve in bomb calorimeter)", "body": "<p>The 2 red lines in the graph are the 2 extrapolated lines. The upper line works well but the lower line seems to take into account the data outside the range of <code>time2</code> and <code>temp2</code> which makes the line look awkward after the point <code>t=420s</code>. I would like to know how to fix this.</p>\n\n<p>*On a less important note: how can i remove the extra ticks on x-axis on the left of the origin? Thanks a lot.</p>\n\n<pre><code>import pandas as pd\nimport matplotlib.pyplot as plt\nimport numpy as np\nimport matplotlib\nfrom matplotlib.ticker import (MultipleLocator, FormatStrFormatter,\n                               AutoMinorLocator)\nfrom sklearn.linear_model import LinearRegression\nfrom scipy.interpolate import InterpolatedUnivariateSpline\n\n%matplotlib inline\n\nfile = pd.read_excel(\"T8.xlsx\",\"Phthalans\u00e4ureanhydrid\",usecols=[2,3])\nX = file['Zeit(s)']\nY = file['Temperatur(Celcius Grad)']\n\nfig, ax = plt.subplots()\nax.plot(X,Y,'-',color='#10A5F3', label=\"Phthalans\u00e4ureanhydrid\")\nax.grid(True, which='major', axis='both', color='#F19211', linestyle='-')\n#ax.grid(True, which='minor', axis='both', color='#F19211', linestyle='--')\nax.spines['left'].set_position('zero')\nax.spines['right'].set_color('none')\n#ax.spines['bottom'].set_position('zero')\nax.spines['top'].set_color('none')\n#ax.legend(loc='upper center', frameon=True)\n\n#major &amp; minor ticks\nax.xaxis.set_major_locator(MultipleLocator(100))\nax.xaxis.set_major_formatter(FormatStrFormatter('%d'))\nax.xaxis.set_minor_locator(MultipleLocator(10))\n\n#extrapolation - first line\ntemp1 = []\ntime1 = []\nxnew1 = []\nfor i in file.index:\n    if i &gt; 630:\n        temp1.append(file['Temperatur(Celcius Grad)'][i])\n        time1.append(file['Zeit(s)'][i])\n    else:\n        xnew1.append(file['Zeit(s)'][i])\n\norder = 1\nextrapo1 = InterpolatedUnivariateSpline(time1, temp1, k=1)\nynew1 = extrapo1(xnew1)\n\n#extrapolation - second line\ntemp2 = []\ntime2 = []\nxnew2 = []\nfor i in file.index:\n    if 100&lt;i&lt;400:\n        temp2.append(file['Temperatur(Celcius Grad)'][i])\n        time2.append(file['Zeit(s)'][i])\n    if i&gt;200:\n        xnew2.append(file['Zeit(s)'][i])\n\nynew2 = []\nf = interpolate.interp1d(time2, temp2, fill_value='extrapolate')\nfor i in xnew2:\n    ynew2.append(f(i))\n\n\n\nplt.xlabel(r'Zeit[s]')\nplt.ylabel(r'Temperatur[c]')\nplt.plot(xnew1,ynew1,'-', color = '#B94A4D')\nplt.plot(xnew2,ynew2,'-', color = '#B94A4D')\n\n\nplt.savefig('kmn.pdf')\n\n</code></pre>\n\n<p>Link to the data:<a href=\"https://i.stack.imgur.com/9AodA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9AodA.png\" alt=\"enter image description here\"></a> <a href=\"https://docs.google.com/spreadsheets/d/1xznXj-aA-Szq2s4KWb-qPWYxZbQNrA5FgUCQT6i7oVo/edit?usp=sharing\" rel=\"nofollow noreferrer\">https://docs.google.com/spreadsheets/d/1xznXj-aA-Szq2s4KWb-qPWYxZbQNrA5FgUCQT6i7oVo/edit?usp=sharing</a></p>\n"}, {"tags": ["python", "regex", "python-3.x", "regex-greedy"], "comments": [{"owner": {"reputation": 67, "user_id": 7466243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fc66d253f7e05f63659800dec34fe41?s=128&d=identicon&r=PG&f=1", "display_name": "Pradical2190", "link": "https://stackoverflow.com/users/7466243/pradical2190"}, "edited": false, "score": 0, "creation_date": 1572474415, "post_id": 58634026, "comment_id": 103575838, "body": "Edited the question to more accurately reflect my problem. Earlier the condition about the last &#39;great&#39; was not present."}], "answers": [{"comments": [{"owner": {"reputation": 67, "user_id": 7466243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fc66d253f7e05f63659800dec34fe41?s=128&d=identicon&r=PG&f=1", "display_name": "Pradical2190", "link": "https://stackoverflow.com/users/7466243/pradical2190"}, "edited": false, "score": 0, "creation_date": 1572473635, "post_id": 58634059, "comment_id": 103575613, "body": "Thanks. That&#39;s an interesting answer. That raises an additional problem for me. If there is a &#39;great&#39; in the next sentence, I don&#39;t want this to be captured. I will modify the question to reflect this. How would I solve that?"}, {"owner": {"reputation": 91458, "user_id": 5424988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0b4f91c20dcd87cbd58dd351455198c?s=128&d=identicon&r=PG&f=1", "display_name": "The fourth bird", "link": "https://stackoverflow.com/users/5424988/the-fourth-bird"}, "reply_to_user": {"reputation": 67, "user_id": 7466243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fc66d253f7e05f63659800dec34fe41?s=128&d=identicon&r=PG&f=1", "display_name": "Pradical2190", "link": "https://stackoverflow.com/users/7466243/pradical2190"}, "edited": false, "score": 0, "creation_date": 1572473971, "post_id": 58634059, "comment_id": 103575714, "body": "@Pradical2190 That is actually changing the question. My current answer reflects the original question. What is the rule to match the 3 times great but not the last one?"}, {"owner": {"reputation": 67, "user_id": 7466243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fc66d253f7e05f63659800dec34fe41?s=128&d=identicon&r=PG&f=1", "display_name": "Pradical2190", "link": "https://stackoverflow.com/users/7466243/pradical2190"}, "edited": false, "score": 0, "creation_date": 1572474337, "post_id": 58634059, "comment_id": 103575814, "body": "Agreed, and upvoted! But sorry your method raised a problem I did not anticipate earlier."}, {"owner": {"reputation": 91458, "user_id": 5424988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0b4f91c20dcd87cbd58dd351455198c?s=128&d=identicon&r=PG&f=1", "display_name": "The fourth bird", "link": "https://stackoverflow.com/users/5424988/the-fourth-bird"}, "reply_to_user": {"reputation": 67, "user_id": 7466243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fc66d253f7e05f63659800dec34fe41?s=128&d=identicon&r=PG&f=1", "display_name": "Pradical2190", "link": "https://stackoverflow.com/users/7466243/pradical2190"}, "edited": false, "score": 0, "creation_date": 1572474631, "post_id": 58634059, "comment_id": 103575891, "body": "@Pradical2190 Perhaps like this <a href=\"https://regex101.com/r/ynGy43/1\" rel=\"nofollow noreferrer\">regex101.com/r/ynGy43/1</a>"}, {"owner": {"reputation": 67, "user_id": 7466243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fc66d253f7e05f63659800dec34fe41?s=128&d=identicon&r=PG&f=1", "display_name": "Pradical2190", "link": "https://stackoverflow.com/users/7466243/pradical2190"}, "edited": false, "score": 1, "creation_date": 1572474919, "post_id": 58634059, "comment_id": 103575971, "body": "Perfect! Can you update the answer? I will accept it. An explanation, if possible, would be nice."}, {"owner": {"reputation": 91458, "user_id": 5424988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0b4f91c20dcd87cbd58dd351455198c?s=128&d=identicon&r=PG&f=1", "display_name": "The fourth bird", "link": "https://stackoverflow.com/users/5424988/the-fourth-bird"}, "reply_to_user": {"reputation": 67, "user_id": 7466243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fc66d253f7e05f63659800dec34fe41?s=128&d=identicon&r=PG&f=1", "display_name": "Pradical2190", "link": "https://stackoverflow.com/users/7466243/pradical2190"}, "edited": false, "score": 0, "creation_date": 1572476038, "post_id": 58634059, "comment_id": 103576262, "body": "@Pradical2190 I realized that while that pattern works for the example, it also matches <code>&amp;great</code> only <a href=\"https://regex101.com/r/LLpOk2/1\" rel=\"nofollow noreferrer\">regex101.com/r/LLpOk2/1</a>. For that not to work you could make use of infinite lookbehind which is supported using the <a href=\"https://pypi.org/project/regex/\" rel=\"nofollow noreferrer\">PyPi regex module</a> The pattern could then be <code>(?&lt;=\\bThis is \\S*)\\bgreat\\b</code>. You can see it working on regex101 by selecting ECMA script (which is a different engine) See <a href=\"https://regex101.com/r/QF1nAp/1\" rel=\"nofollow noreferrer\">regex101.com/r/QF1nAp/1</a> You can see it working in Python here <a href=\"https://rextester.com/YGFP31452\" rel=\"nofollow noreferrer\">rextester.com/YGFP31452</a>"}], "tags": [], "owner": {"reputation": 91458, "user_id": 5424988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0b4f91c20dcd87cbd58dd351455198c?s=128&d=identicon&r=PG&f=1", "display_name": "The fourth bird", "link": "https://stackoverflow.com/users/5424988/the-fourth-bird"}, "is_accepted": true, "score": 2, "last_activity_date": 1572474968, "last_edit_date": 1572474968, "creation_date": 1572471795, "answer_id": 58634059, "question_id": 58634026, "link": "https://stackoverflow.com/questions/58634026/non-greedy-pattern-with-advance-characters/58634059#58634059", "title": "Non-greedy pattern with advance characters", "body": "<p>One option is to use an <a href=\"https://www.regular-expressions.info/alternation.html\" rel=\"nofollow noreferrer\">alternation</a> and match what you don't want and use a capturing group for <code>great</code> between word boundaries.</p>\n\n<pre><code>^.*?This is |\\b(great)\\b\n</code></pre>\n\n<ul>\n<li><code>^</code> Start of string</li>\n<li><code>.*?This is </code> Match the first occurrence of <code>This is </code> using a lazy quantifier <code>.*?</code></li>\n<li><code>|</code> Or </li>\n<li><code>\\b(great)\\b</code> Capture great between word boundaries in group 1</li>\n</ul>\n\n<p>See a <a href=\"https://regex101.com/r/3mUNdJ/1\" rel=\"nofollow noreferrer\">Regex demo</a></p>\n\n<p><strong>Update</strong></p>\n\n<p>A possible solution to the updated question might be using 2 positive lookbehinds inside an alternation.</p>\n\n<pre><code>(?:(?&lt;=\\bThis is )|(?&lt;=\\S))\\bgreat\\b\n</code></pre>\n\n<ul>\n<li><code>(?:</code> Non capturing group\n\n<ul>\n<li><code>(?&lt;=\\bThis is )</code> positive lookbehind, assert what is on the left is <code>This is </code></li>\n<li><code>|</code> Or</li>\n<li><code>(?&lt;=\\S)</code> Positive lookbehind, assert what is on the left is a non whitespace char</li>\n</ul></li>\n<li><code>)</code> Close non capturing group</li>\n<li><code>\\bgreat\\b</code> Match great between word boundaries</li>\n</ul>\n\n<p><a href=\"https://regex101.com/r/BBj9kH/1\" rel=\"nofollow noreferrer\">Regex demo</a></p>\n"}], "owner": {"reputation": 67, "user_id": 7466243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fc66d253f7e05f63659800dec34fe41?s=128&d=identicon&r=PG&f=1", "display_name": "Pradical2190", "link": "https://stackoverflow.com/users/7466243/pradical2190"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "accepted_answer_id": 58634059, "answer_count": 1, "score": 1, "last_activity_date": 1572474968, "creation_date": 1572471590, "last_edit_date": 1572473745, "question_id": 58634026, "link": "https://stackoverflow.com/questions/58634026/non-greedy-pattern-with-advance-characters", "title": "Non-greedy pattern with advance characters", "body": "<p>I have a simple pattern that I want to match. In this sentence:</p>\n\n<pre><code>great. This is great&amp;great&amp;great. great.\n</code></pre>\n\n<p>I want to match <em>only</em> the 'great' words immediately <em>following</em> 'This is'. So the first great would <em>not</em> be returned, but the next three have to be. The last should not be.</p>\n\n<p>My expression is </p>\n\n<pre><code>This is (great&amp;)*?(great)\n</code></pre>\n\n<p>But this returns only the first great. I read up about greedy and non-greedy patterns, and it works great when I don't have to worry about the advance 'This is'. But these advance characters check is important for my use case. How would I get the required result?</p>\n\n<p>I am able to make this work with:</p>\n\n<pre><code>This is (great&amp;){0}(great)\n</code></pre>\n\n<p>for the first match,</p>\n\n<pre><code>This is (great&amp;){1}(great)\n</code></pre>\n\n<p>for the second, and so on. But it is a cumbersome solution, and I think I am missing something about the behavior of non-greedy patterns. Appreciate any help. Thanks!</p>\n"}, {"tags": ["python", "oracle", "plsql"], "comments": [{"owner": {"reputation": 46136, "user_id": 3890632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hNkgF.png?s=128&g=1", "display_name": "khelwood", "link": "https://stackoverflow.com/users/3890632/khelwood"}, "edited": false, "score": 0, "creation_date": 1572471718, "post_id": 58634017, "comment_id": 103575002, "body": "You shouldn&#39;t use the  <code>%</code> operator to insert values into your SQL. <a href=\"https://xkcd.com/327/\" rel=\"nofollow noreferrer\">xkcd.com/327</a>"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1572471731, "post_id": 58634017, "comment_id": 103575010, "body": "<code>%s</code> as a placeholder in SQL is <i>not the same</i> as the string-formatting parameter in Python"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1572471881, "post_id": 58634017, "comment_id": 103575055, "body": "<code>query_string = &quot;INSERT INTO &quot; + dep_table + &quot; (client, sis, entity_name_1, entity_name_2, flag_dep,process, flag_dep_det) VALUES (%s, %s, %s, %s, %s, %s, %s);&quot;, (&quot;CO&quot;, qo.db_src, qo.table_src, qo.table_des, qo.check_func, qo.table_des, None)</code>. You can&#39;t parameterize table names, so you&#39;ll need to vet that against the schema of the db separately."}, {"owner": {"reputation": 19, "user_id": 11571791, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-uhjw521wRT0/AAAAAAAAAAI/AAAAAAAAABs/bmI24xb50l0/photo.jpg?sz=128", "display_name": "Siham MB", "link": "https://stackoverflow.com/users/11571791/siham-mb"}, "edited": false, "score": 0, "creation_date": 1572471915, "post_id": 58634017, "comment_id": 103575068, "body": "I tried using % but the same problem"}, {"owner": {"reputation": 19, "user_id": 11571791, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-uhjw521wRT0/AAAAAAAAAAI/AAAAAAAAABs/bmI24xb50l0/photo.jpg?sz=128", "display_name": "Siham MB", "link": "https://stackoverflow.com/users/11571791/siham-mb"}, "edited": false, "score": 0, "creation_date": 1572472256, "post_id": 58634017, "comment_id": 103575180, "body": "I tried your suggestion, I got ERROR: Failed to set dependencies informations : expecting string, unicode or buffer object"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1572472427, "post_id": 58634017, "comment_id": 103575235, "body": "Because I gave you a tuple. Get rid of <code>query_string = ...</code> and just use <code>cursor.execute(&quot;INSERT INTO &quot; + dep_table + &quot; (client, sis, entity_name_1, entity_name_2, flag_dep,process, flag_dep_det) VALUES (%s, %s, %s, %s, %s, %s, %s);&quot;, (&quot;CO&quot;, qo.db_src, qo.table_src, qo.table_des, qo.check_func, qo.table_des, None))</code>"}, {"owner": {"reputation": 19, "user_id": 11571791, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-uhjw521wRT0/AAAAAAAAAAI/AAAAAAAAABs/bmI24xb50l0/photo.jpg?sz=128", "display_name": "Siham MB", "link": "https://stackoverflow.com/users/11571791/siham-mb"}, "edited": false, "score": 0, "creation_date": 1572472551, "post_id": 58634017, "comment_id": 103575271, "body": "I did, same ERROR: Failed to set dependencies informations : expecting string, unicode or buffer object"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1572472563, "post_id": 58634017, "comment_id": 103575277, "body": "Then I have no idea. You haven&#39;t given enough information for us to debug this beyond &quot;Here is an approach that is totally open to SQL-injection&quot; along with a disembodied error. If the error points to a particular part of the query, you haven&#39;t shown it."}, {"owner": {"reputation": 19, "user_id": 11571791, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-uhjw521wRT0/AAAAAAAAAAI/AAAAAAAAABs/bmI24xb50l0/photo.jpg?sz=128", "display_name": "Siham MB", "link": "https://stackoverflow.com/users/11571791/siham-mb"}, "edited": false, "score": 0, "creation_date": 1572472998, "post_id": 58634017, "comment_id": 103575414, "body": "I give the query where I have the problem, any way thank you"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1572473175, "post_id": 58634017, "comment_id": 103575473, "body": "The SQL libraries I have used give you an indication <i>where</i> in the query there is an issue, not just &quot;this query, somewhere, is wrong&quot;"}], "answers": [{"tags": [], "owner": {"reputation": 33648, "user_id": 25714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22daa66fbac8321bb4462a6d6befb38d?s=128&d=identicon&r=PG", "display_name": "Gary Myers", "link": "https://stackoverflow.com/users/25714/gary-myers"}, "is_accepted": false, "score": 1, "last_activity_date": 1572476458, "creation_date": 1572476458, "answer_id": 58634764, "question_id": 58634017, "link": "https://stackoverflow.com/questions/58634017/insert-data-in-oracle-database-in-python/58634764#58634764", "title": "Insert data in oracle database in python", "body": "<p>Drop the semi-colon at the end of the string you are creating / executing.</p>\n\n<p>It shouldn't be part of the SQL statement, rather used in some client tools to indicate the end of a statement so that the client can send it to the database to be executed.</p>\n"}, {"tags": [], "owner": {"reputation": 19, "user_id": 11571791, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-uhjw521wRT0/AAAAAAAAAAI/AAAAAAAAABs/bmI24xb50l0/photo.jpg?sz=128", "display_name": "Siham MB", "link": "https://stackoverflow.com/users/11571791/siham-mb"}, "is_accepted": false, "score": 0, "last_activity_date": 1572515106, "creation_date": 1572515106, "answer_id": 58640526, "question_id": 58634017, "link": "https://stackoverflow.com/questions/58634017/insert-data-in-oracle-database-in-python/58640526#58640526", "title": "Insert data in oracle database in python", "body": "<p>I found the solution to the problem\n<code>connection.commit()</code> </p>\n"}, {"tags": [], "owner": {"reputation": 804, "user_id": 8943967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c11be83ef06fdce7f229242ee6c0ee4?s=128&d=identicon&r=PG&f=1", "display_name": "Ergi Nushi", "link": "https://stackoverflow.com/users/8943967/ergi-nushi"}, "is_accepted": false, "score": 0, "last_activity_date": 1572530509, "creation_date": 1572530509, "answer_id": 58645003, "question_id": 58634017, "link": "https://stackoverflow.com/questions/58634017/insert-data-in-oracle-database-in-python/58645003#58645003", "title": "Insert data in oracle database in python", "body": "<p>You can use <code>format</code> method in Python like below:</p>\n\n<pre><code>def execute_query(self, qo):\n    query_string = \"INSERT INTO {0} (client, sis, entity_name_1, entity_name_2, flag_dep,process, flag_dep_det) VALUES ('{1}', '{2}', '{3}', '{4}', '{5}', '{6}', {7})\".format(dep_table, 'CO', qo.db_src, qo.table_src, qo.table_des, qo.check_func, qo.table_des, 'NULL')\n    cursor.execute(query_string)\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 11571791, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-uhjw521wRT0/AAAAAAAAAAI/AAAAAAAAABs/bmI24xb50l0/photo.jpg?sz=128", "display_name": "Siham MB", "link": "https://stackoverflow.com/users/11571791/siham-mb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 362, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1572530509, "creation_date": 1572471541, "question_id": 58634017, "link": "https://stackoverflow.com/questions/58634017/insert-data-in-oracle-database-in-python", "title": "Insert data in oracle database in python", "body": "<p>I can't insert data into database using a dynamic query in python script</p>\n\n<pre><code>def execute_query(self, qo):\n    query_string = \"INSERT INTO \" +dep_table+ \" (client, sis, entity_name_1, entity_name_2, flag_dep,process, flag_dep_det) VALUES (%s, %s, %s, %s, %s, %s, %s)\" % (\"'CO'\",\"'\"+qo.db_src+\"'\",\"'\"+qo.table_src+\"'\",\"'\"+qo.table_des+\"'\",\"'\"+qo.check_func+\"'\",\"'\"+qo.table_des+\"'\",\"'NULL'\")+\";\"\n    cursor.execute(query_string)\n</code></pre>\n\n<p>I got this error:</p>\n\n<pre><code>ERROR: Failed to set dependencies informations : ORA-00933: SQL command not properly ended\n</code></pre>\n\n<p>The connection to the database is okay, but I can't insert.</p>\n"}, {"tags": ["python", "selenium", "selenium-webdriver", "pycharm", "self"], "comments": [{"owner": {"reputation": 14662, "user_id": 3092298, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/70530902b2446a5eccb717b2d21506fb?s=128&d=identicon&r=PG&f=1", "display_name": "Greg Burghardt", "link": "https://stackoverflow.com/users/3092298/greg-burghardt"}, "edited": false, "score": 0, "creation_date": 1572472188, "post_id": 58634011, "comment_id": 103575157, "body": "Is something appearing over top of the element you want to click?"}, {"owner": {"reputation": 1210, "user_id": 5028532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f50c017af1ddc79a80bc3f92e94521a4?s=128&d=identicon&r=PG&f=1", "display_name": "razdi", "link": "https://stackoverflow.com/users/5028532/razdi"}, "edited": false, "score": 0, "creation_date": 1572473219, "post_id": 58634011, "comment_id": 103575485, "body": "Can you add some more info about what you were trying to achieve? It clearly says element is not clickable so what were you trying to click? Something blocking it?"}, {"owner": {"reputation": 3571, "user_id": 11061080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67a9089f9f4f8f14b04d3d8dfe51e7c5?s=128&d=identicon&r=PG&f=1", "display_name": "Dipak Bachhav", "link": "https://stackoverflow.com/users/11061080/dipak-bachhav"}, "edited": false, "score": 0, "creation_date": 1572474103, "post_id": 58634011, "comment_id": 103575753, "body": "use action class to move to that element and then perform a click action"}, {"owner": {"reputation": 855, "user_id": 4744568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/125cdb7d43927756913b920de016f420?s=128&d=identicon&r=PG", "display_name": "pcalkins", "link": "https://stackoverflow.com/users/4744568/pcalkins"}, "edited": false, "score": 0, "creation_date": 1572476233, "post_id": 58634011, "comment_id": 103576318, "body": "this means that another object on the page will receive the click (first...).   The part of the error message you left out will tell you what DOM item is overlaying or retrieving the click.  This can be something on top of, or an event handler at a higher level such as body tag..."}], "answers": [{"comments": [{"owner": {"reputation": 855, "user_id": 4744568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/125cdb7d43927756913b920de016f420?s=128&d=identicon&r=PG", "display_name": "pcalkins", "link": "https://stackoverflow.com/users/4744568/pcalkins"}, "edited": false, "score": 0, "creation_date": 1572548743, "post_id": 58635359, "comment_id": 103604353, "body": "I don&#39;t really see this as a bug but as a useful message telling you that an event will be fired that may dirty your test case.  What it reports is accurate in each case that I&#39;ve seen.  Another item is intercepting the click.  If you then use javascript to click it you will also be dirtying your test case because an end-user would not click in this way.  The actions chain seems clean, but I&#39;m guessing that only works in certain cases.  If you are running tests, it&#39;s important to look into why this exception is being thrown.  If you just work around it, you may be missing a bug in the site."}], "tags": [], "owner": {"reputation": 355, "user_id": 6523855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e4fe1e37ed158ffffd921e177a785b5?s=128&d=identicon&r=PG&f=1", "display_name": "john", "link": "https://stackoverflow.com/users/6523855/john"}, "is_accepted": false, "score": 0, "last_activity_date": 1572481371, "creation_date": 1572481371, "answer_id": 58635359, "question_id": 58634011, "link": "https://stackoverflow.com/questions/58634011/selenium-common-exceptions-elementclickinterceptedexception-message-element-cl/58635359#58635359", "title": "selenium.common.exceptions.ElementClickInterceptedException: Message: element click intercepted:", "body": "<p>There is a bug in chromedriver for that (the problem is that it's marked as won't fix) --> GitHub <a href=\"https://github.com/seleniumhq/selenium-google-code-issue-archive/issues/2766\" rel=\"nofollow noreferrer\">Link</a></p>\n\n<p>There's a workaround suggested at comment #27. It may work for you.</p>\n\n<p>First Solution - Use javascript executor</p>\n\n<pre><code>driver.execute_script(\"arguments[0].click()\", element)\n</code></pre>\n\n<p><br><br>\nSecond Solution - The other way is to use an action like this</p>\n\n<pre><code>from selenium import webdriver\ndriver = webdriver.Firefox()\ndriver.get('someURL')\nel = driver.find_element_by_id(\"someid\")\nwebdriver.ActionChains(driver).move_to_element(el).click(el).perform()\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 12299967, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAbMkupooMXtwBTN6k2YxERKY3Jjzui48rNPCV6=k-s128", "display_name": "Luis Gimenez", "link": "https://stackoverflow.com/users/12299967/luis-gimenez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 500, "favorite_count": 0, "closed_date": 1572517038, "answer_count": 1, "score": 1, "last_activity_date": 1572517077, "creation_date": 1572471518, "last_edit_date": 1572471572, "question_id": 58634011, "link": "https://stackoverflow.com/questions/58634011/selenium-common-exceptions-elementclickinterceptedexception-message-element-cl", "closed_reason": "Duplicate", "title": "selenium.common.exceptions.ElementClickInterceptedException: Message: element click intercepted:", "body": "<p>selenium.common.exceptions.ElementClickInterceptedException: Message: element click intercepted: Element ... is not clickable at point (79, 202). Other element would receive the click: ...\n  (Session info: chrome=77.0.3865.120)</p>\n\n<pre><code>def gotoRelatorios(self):\n    sleep(5)\n    # self.waitLong.until(EC.visibility_of((By.XPATH, '//*[@class=\"m-n font-thin h3 text-black ng-binding\"]')))\n    self.waitLong.until(EC.element_to_be_clickable((By.XPATH, '//*[@id=\"aside\"]//*[@class=\"auto ng-scope\" and @href]//*[contains(text(), \"Relat\u00f3rios\")]'))).click()\n    print(\"click 'Relat\u00f3rios'\")\n</code></pre>\n"}, {"tags": ["python", "csv"], "comments": [{"owner": {"reputation": 1490, "user_id": 11704802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2da9f7d06d966ba98e482d6862846e12?s=128&d=identicon&r=PG&f=1", "display_name": "pciunkiewicz", "link": "https://stackoverflow.com/users/11704802/pciunkiewicz"}, "edited": false, "score": 0, "creation_date": 1572472372, "post_id": 58634006, "comment_id": 103575217, "body": "You\u2019re going to have to show us what\u2019s going on in line 5 of the csv file. It\u2019s likely commas present within the string in that line."}, {"owner": {"reputation": 247, "user_id": 9969435, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1c80a14a471ff836f26cf7880f4d3ca?s=128&d=identicon&r=PG&f=1", "display_name": "user42493", "link": "https://stackoverflow.com/users/9969435/user42493"}, "reply_to_user": {"reputation": 1490, "user_id": 11704802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2da9f7d06d966ba98e482d6862846e12?s=128&d=identicon&r=PG&f=1", "display_name": "pciunkiewicz", "link": "https://stackoverflow.com/users/11704802/pciunkiewicz"}, "edited": false, "score": 0, "creation_date": 1572472626, "post_id": 58634006, "comment_id": 103575296, "body": "ok I updated the picture"}, {"owner": {"reputation": 746, "user_id": 1449447, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2923559d868a6734c328452957ab0f22?s=128&d=identicon&r=PG", "display_name": "Peritract", "link": "https://stackoverflow.com/users/1449447/peritract"}, "edited": false, "score": 0, "creation_date": 1572474119, "post_id": 58634006, "comment_id": 103575756, "body": "Line 5 has values in four cells, while the other rows have only one value each. Combine the four cells together into one, and then it should work."}, {"owner": {"reputation": 1490, "user_id": 11704802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2da9f7d06d966ba98e482d6862846e12?s=128&d=identicon&r=PG&f=1", "display_name": "pciunkiewicz", "link": "https://stackoverflow.com/users/11704802/pciunkiewicz"}, "edited": false, "score": 0, "creation_date": 1572496572, "post_id": 58634006, "comment_id": 103580434, "body": "It looks like quite a few cells have this issue, if it\u2019s only a single column per line you could either go through and use find and replace to eliminate all commas or change the format to use a different delimiter."}], "owner": {"reputation": 247, "user_id": 9969435, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1c80a14a471ff836f26cf7880f4d3ca?s=128&d=identicon&r=PG&f=1", "display_name": "user42493", "link": "https://stackoverflow.com/users/9969435/user42493"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1572472583, "creation_date": 1572471480, "last_edit_date": 1572472583, "question_id": 58634006, "link": "https://stackoverflow.com/questions/58634006/parsererror-when-trying-to-read-csv-file-into-notebook", "title": "ParserError when trying to read csv file into notebook", "body": "<p>I get the following error when trying to read csv file into notebook:\nMy codes are as follow:</p>\n\n<pre><code>import pandas as pd\nimport csv \nnewmessages = pd.read_csv('/content/drive/My Drive/Colab Notebooks/newmessages.csv')\n</code></pre>\n\n<p>And file is suppose to look like this in an excel file:</p>\n\n<p><a href=\"https://i.stack.imgur.com/Plf7F.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Plf7F.png\" alt=\"enter image description here\"></a></p>\n\n<pre><code>pandas/_libs/parsers.pyx in pandas._libs.parsers.TextReader.read()\n\npandas/_libs/parsers.pyx in pandas._libs.parsers.TextReader._read_low_memory()\n\npandas/_libs/parsers.pyx in pandas._libs.parsers.TextReader._read_rows()\n\npandas/_libs/parsers.pyx in pandas._libs.parsers.TextReader._tokenize_rows()\n\npandas/_libs/parsers.pyx in pandas._libs.parsers.raise_parser_error()\n\nParserError: Error tokenizing data. C error: Expected 1 fields in line 5, saw 4\n</code></pre>\n"}, {"tags": ["python", "email"], "comments": [{"owner": {"reputation": 35849, "user_id": 1424875, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/HFA9w.png?s=128&g=1", "display_name": "nanofarad", "link": "https://stackoverflow.com/users/1424875/nanofarad"}, "edited": false, "score": 2, "creation_date": 1572471949, "post_id": 58634000, "comment_id": 103575080, "body": "In short: Most likely you will likely need to run your own mailserver, or require that users specify their own mailserver and account to send mail from (i.e. their own GMail/Yahoo account or whatnot)"}, {"owner": {"reputation": 41, "user_id": 12096767, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBrnkpNx0W86v4FLVGtc5gs4ejLyYPv7NpJbOwn=k-s128", "display_name": "Lucy Lu", "link": "https://stackoverflow.com/users/12096767/lucy-lu"}, "reply_to_user": {"reputation": 35849, "user_id": 1424875, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/HFA9w.png?s=128&g=1", "display_name": "nanofarad", "link": "https://stackoverflow.com/users/1424875/nanofarad"}, "edited": false, "score": 0, "creation_date": 1572472229, "post_id": 58634000, "comment_id": 103575169, "body": "as it is now, they register their email and the app takes that and sends them from a central alerts@yahoo.com mail. ...do you mean, to specify they own GMAIL/yahoo username and password, so that the app can automatically get into their email and send an email to themselves? thanks"}, {"owner": {"reputation": 35849, "user_id": 1424875, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/HFA9w.png?s=128&g=1", "display_name": "nanofarad", "link": "https://stackoverflow.com/users/1424875/nanofarad"}, "edited": false, "score": 0, "creation_date": 1572493284, "post_id": 58634000, "comment_id": 103579792, "body": "Yes, that would be one possibility. Another would be to operate a real mailserver on your end, handling outbound mail only (or mostly outbound mail)."}, {"owner": {"reputation": 41, "user_id": 12096767, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBrnkpNx0W86v4FLVGtc5gs4ejLyYPv7NpJbOwn=k-s128", "display_name": "Lucy Lu", "link": "https://stackoverflow.com/users/12096767/lucy-lu"}, "reply_to_user": {"reputation": 35849, "user_id": 1424875, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/HFA9w.png?s=128&g=1", "display_name": "nanofarad", "link": "https://stackoverflow.com/users/1424875/nanofarad"}, "edited": false, "score": 0, "creation_date": 1572526672, "post_id": 58634000, "comment_id": 103593012, "body": "Is that something that can be done easily?....can I do that with hmailserver??...I keep reading that it is only for local emailing and I am getting confused....how would I get my mail server created with hmailserver to send an email to you for example?"}, {"owner": {"reputation": 35849, "user_id": 1424875, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/HFA9w.png?s=128&g=1", "display_name": "nanofarad", "link": "https://stackoverflow.com/users/1424875/nanofarad"}, "edited": false, "score": 0, "creation_date": 1572541818, "post_id": 58634000, "comment_id": 103601360, "body": "If you set up DNS properly it would suffice for remote emailing. I would just recommend asking users to provide their own outbound email account for now as it&#39;s far more simple."}], "owner": {"reputation": 41, "user_id": 12096767, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBrnkpNx0W86v4FLVGtc5gs4ejLyYPv7NpJbOwn=k-s128", "display_name": "Lucy Lu", "link": "https://stackoverflow.com/users/12096767/lucy-lu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 124, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1572471459, "creation_date": 1572471459, "question_id": 58634000, "link": "https://stackoverflow.com/questions/58634000/how-to-send-email-without-smtp-python", "title": "how to send email without smtp python", "body": "<p>I have an app that sends stock market price alerts via email. The way i designed it was that i created a yahoo low security account, and the app logs into that via smtp and then sends an email to a registered email address of the users...which can be many and scattered globally. The problem is that yahoo suddenly started to give me this error:</p>\n\n<p>raise SMTPDataError(code, resp)\nsmtplib.SMTPDataError: (554, b'6.6.0 Error sending message for delivery.')</p>\n\n<p>my app creates two security problems. </p>\n\n<ol>\n<li>People from all over the world might be using it.\nThe app logs into a central email address, and sends from there email alerts to each users email address which they would have registered priorly.</li>\n<li>the email alerts might be frequent depending on price movement.</li>\n</ol>\n\n<p>both of these , are not liked by gmail or yahoo...</p>\n\n<p>I would appreciate it, if someone can suggest ways around this security nonsense.</p>\n\n<p>Is there a library I could use..or some sort of API, that could help me bypass the above issues.</p>\n\n<p>Thank you</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 15430, "user_id": 4518341, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eVuAv.png?s=128&g=1", "display_name": "wjandrea", "link": "https://stackoverflow.com/users/4518341/wjandrea"}, "edited": false, "score": 1, "creation_date": 1572471752, "post_id": 58633978, "comment_id": 103575018, "body": "This seems like something <code>numpy</code> would be able to do easily"}, {"owner": {"reputation": 16677, "user_id": 1092820, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc78da24118b403595f62fa7856e1b6c?s=128&d=identicon&r=PG", "display_name": "Ruzihm", "link": "https://stackoverflow.com/users/1092820/ruzihm"}, "edited": false, "score": 1, "creation_date": 1572471840, "post_id": 58633978, "comment_id": 103575045, "body": "is it guaranteed to be a square matrix?"}, {"owner": {"reputation": 15430, "user_id": 4518341, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eVuAv.png?s=128&g=1", "display_name": "wjandrea", "link": "https://stackoverflow.com/users/4518341/wjandrea"}, "edited": false, "score": 1, "creation_date": 1572472089, "post_id": 58633978, "comment_id": 103575122, "body": "Please post your existing code and more details about what&#39;s stopping you. It&#39;s hard to help otherwise. You can <a href=\"https://stackoverflow.com/posts/58633978/edit\">edit</a> the question. BTW welcome to Stack Overflow! Check out the <a href=\"https://stackoverflow.com/tour\">tour</a>."}], "answers": [{"tags": [], "owner": {"reputation": 180853, "user_id": 424499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc2071afd499daef001e75e14d7f9cce?s=128&d=identicon&r=PG", "display_name": "Raymond Hettinger", "link": "https://stackoverflow.com/users/424499/raymond-hettinger"}, "is_accepted": false, "score": 0, "last_activity_date": 1572472122, "creation_date": 1572472122, "answer_id": 58634113, "question_id": 58633978, "link": "https://stackoverflow.com/questions/58633978/how-do-i-compare-values-in-a-nested-list/58634113#58634113", "title": "How do I compare values in a nested list?", "body": "<p>You should do some of the work on this yourself.</p>\n\n<p>Here's some code to get you started:</p>\n\n<pre><code>def adjacent_cells(m, row, col):\n    result = []\n    for i, j in ((-1, -1), (-1, 0), (-1, 1),\n                 (0, -1),          (0, 1),\n                 (1, -1), (1, 0),  (1, 1)):\n        try:\n            i += row\n            j += col\n            if i &gt;= 0 and j &gt;= 0:\n                result.append(m[i][j])\n        except IndexError:\n            pass\n    return result\n</code></pre>\n\n<p>Use this as a building block to complete your project.</p>\n"}, {"tags": [], "owner": {"reputation": 16677, "user_id": 1092820, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc78da24118b403595f62fa7856e1b6c?s=128&d=identicon&r=PG", "display_name": "Ruzihm", "link": "https://stackoverflow.com/users/1092820/ruzihm"}, "is_accepted": false, "score": 0, "last_activity_date": 1572472291, "creation_date": 1572472291, "answer_id": 58634135, "question_id": 58633978, "link": "https://stackoverflow.com/questions/58633978/how-do-i-compare-values-in-a-nested-list/58634135#58634135", "title": "How do I compare values in a nested list?", "body": "<p>Here's one solution:</p>\n\n<pre><code>m = [[1, 2, 3, 4],\n     [5, 6, 7, 8],\n     [9, 1, 9, 3],\n     [4, 5, 6, 7]]\n\ndef maxAmongNeighbors(matrix,y,x):\n    return (\n        x in range(1,len(matrix[0]))\n        and y in range(1,len(matrix))\n        and matrix[y][x] &gt;= max(\n            *matrix[y-1][x-1:x+2],\n            *matrix[y][x-1:x+2:2],\n            *matrix[y-1][x-1:x+2]\n        )\n    )\n\nprint (maxAmongNeighbors(m,0,0))\nprint (maxAmongNeighbors(m,1,1))\nprint (maxAmongNeighbors(m,2,2))\n</code></pre>\n\n<blockquote>\n<pre><code>False\nFalse\nTrue\n</code></pre>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 399, "user_id": 12009176, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ucf49TsaS7U/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdFFBRjGPrn8CacrsrKrKi8_T3gwA/photo.jpg?sz=128", "display_name": "Milad Barazandeh", "link": "https://stackoverflow.com/users/12009176/milad-barazandeh"}, "is_accepted": false, "score": 0, "last_activity_date": 1572473145, "creation_date": 1572473145, "answer_id": 58634263, "question_id": 58633978, "link": "https://stackoverflow.com/questions/58633978/how-do-i-compare-values-in-a-nested-list/58634263#58634263", "title": "How do I compare values in a nested list?", "body": "<p>try this:</p>\n\n<pre><code>import numpy as np\n\ndef isLargest(input, r,c):\n    padded = np.pad(input, 1, mode='constant')\n    value = input[r][c]\n    r += 1\n    c += 1\n    if value &gt;= max(padded[r-1][c], padded[r+1][c], padded[r][c-1], padded[r-1][c]):\n        return True\n    else:\n        return False\n</code></pre>\n\n<p>I used zero padding and solved this problem. Padded matrix will be:</p>\n\n<pre><code>[[0 0 0 0 0 0]\n [0 1 2 3 4 0]\n [0 5 6 7 8 0]\n [0 9 1 2 3 0]\n [0 4 5 6 7 0]\n [0 0 0 0 0 0]]\n</code></pre>\n\n<p>then you can easily check condition. The only thing you should notice is that row and column indices should be incremented by one to map the original value.</p>\n"}], "owner": {"reputation": 1, "user_id": 12295743, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/459100174e3afa8545ed75233af4bbae?s=128&d=identicon&r=PG&f=1", "display_name": "Chrisss", "link": "https://stackoverflow.com/users/12295743/chrisss"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 1, "answer_count": 3, "score": -1, "last_activity_date": 1572473145, "creation_date": 1572471361, "last_edit_date": 1572471544, "question_id": 58633978, "link": "https://stackoverflow.com/questions/58633978/how-do-i-compare-values-in-a-nested-list", "title": "How do I compare values in a nested list?", "body": "<p>So I have a matrix looks something like this:</p>\n\n<pre><code>m = [[1, 2, 3, 4],\n     [5, 6, 7, 8],\n     [9, 1, 2, 3],\n     [4, 5, 6, 7]]\n</code></pre>\n\n<p>and I wanna compare values to their adjacent values so the function return a bool. For example, if I input <code>m[1][1]</code> which is 6, the function should compare 6 with 1,2,3,5,7,9,1 and 2 (cells around 6) and return whether 6 is the largest number. And also if I input an index out of range say <code>m[0][4]</code> the function should also return <code>False</code>.</p>\n\n<p>I understand how to do this part (kind of), but when it gets to the values on the edges I'm completely stuck. I cannot assume that the matrix is 4x4 (it could be anything, 3x3, nxn) so it is impossible to write out every situation with if statements. What should I do?</p>\n"}, {"tags": ["python", "pandas", "dataframe"], "comments": [{"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 1, "creation_date": 1572471743, "post_id": 58633971, "comment_id": 103575014, "body": "Adding the second level when you combine two csv"}], "answers": [{"comments": [{"owner": {"reputation": 17765, "user_id": 9375102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8yBw3.jpg?s=128&g=1", "display_name": "Umar.H", "link": "https://stackoverflow.com/users/9375102/umar-h"}, "edited": false, "score": 0, "creation_date": 1572472011, "post_id": 58634054, "comment_id": 103575098, "body": "brilliant answer my dude +1"}], "tags": [], "owner": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "is_accepted": false, "score": 1, "last_activity_date": 1572471777, "creation_date": 1572471777, "answer_id": 58634054, "question_id": 58633971, "link": "https://stackoverflow.com/questions/58633971/change-duplicate-columns-names/58634054#58634054", "title": "Change duplicate columns&#39; names", "body": "<p>You can try adding the <code>firm</code> on duplicates:</p>\n\n<pre><code>duplicates = merged_df.columns.duplicated()\n\nmerged_df.columns = [x+'_firm' if i else x for x, i in zip(merged_df.columns, duplicates)]\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Index(['PortfolioID', 'FirmID', 'PC_City', 'PC_State', 'PC_Country',\n       'Investment_Date', 'Exit_Date', 'Transaction_Comments', 'PC_City_firm',\n       'PC_State_firm', 'PC_Country_firm', 'fundSize'],\n      dtype='object')\n</code></pre>\n\n<p>However, from you naming, you should consider passing <code>suffixes=('portfolio', 'firm')</code> into <code>merge</code> function that creates <code>merged_df</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 22982, "user_id": 10189214, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oTTBaX3HSZQ/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7ohHVatc4khqXgYvNrBM40bMFj71Q/mo/photo.jpg?sz=128", "display_name": "Andy L.", "link": "https://stackoverflow.com/users/10189214/andy-l"}, "is_accepted": false, "score": 0, "last_activity_date": 1572475681, "creation_date": 1572475681, "answer_id": 58634647, "question_id": 58633971, "link": "https://stackoverflow.com/questions/58633971/change-duplicate-columns-names/58634647#58634647", "title": "Change duplicate columns&#39; names", "body": "<p>Assume you want to add <code>_Firms</code> to duplicated values of column</p>\n\n<p>Sample:   </p>\n\n<pre><code>df.columns\n\nOut[372]:\nIndex(['PortfolioID', 'FirmID', 'PC_City', 'PC_State', 'PC_Country',\n       'Investment_Date', 'Exit_Date', 'Transaction_Comments', 'PC_City',\n       'PC_State', 'PC_Country', 'fundSize'],\n      dtype='object')\n</code></pre>\n\n<p>You may use <code>where</code> with <code>duplicated</code> as follows:</p>\n\n<pre><code>cols = df.columns\ndf.columns = cols.where(~cols.duplicated(), cols + '_Firms')\n\nprint(df.columns)\n\nOut[380]:\nIndex(['PortfolioID', 'FirmID', 'PC_City', 'PC_State', 'PC_Country',\n       'Investment_Date', 'Exit_Date', 'Transaction_Comments', 'PC_City_Firms',\n       'PC_State_Firms', 'PC_Country_Firms', 'fundSize'],\n      dtype='object')\n</code></pre>\n"}], "owner": {"reputation": 292, "user_id": 4060622, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/915e504c081f3d9522043ccd01c1730c?s=128&d=identicon&r=PG&f=1", "display_name": "abhishah901", "link": "https://stackoverflow.com/users/4060622/abhishah901"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1572475681, "creation_date": 1572471339, "question_id": 58633971, "link": "https://stackoverflow.com/questions/58633971/change-duplicate-columns-names", "title": "Change duplicate columns&#39; names", "body": "<p>I am trying to change the column name of one set of duplicate columns in the dataframe. I form the dataframe from two different csv files after a bunch of pre-processing.</p>\n\n<p><code>merged_df.columns</code> is this:</p>\n\n<pre><code>Index(['PortfolioID', 'FirmID', 'PC_City', 'PC_State', 'PC_Country',\n   'Investment_Date', 'Exit_Date', 'Transaction_Comments', 'PC_City', \n   'PC_State', 'PC_Country',\n   'fundSize'],\n  dtype='object')\n</code></pre>\n\n<p>The first set of <code>PC_City, PC_State, PC_Country</code> is for portfolio companies and the next set is for the firms. I tried <a href=\"https://datascience.stackexchange.com/a/41466/59059\">this</a> but made both the sets same. Then I saw <a href=\"https://stackoverflow.com/a/39986959/4060622\">this</a> but it can be done only when importing the csv. <a href=\"https://stackoverflow.com/questions/11346283/renaming-columns-in-pandas\">This</a> doesn't talk about duplicates.</p>\n\n<p>Is there any way I can achieve this? <strong>Mods please help with the editing.</strong></p>\n"}, {"tags": ["python", "numpy", "random", "statistics"], "answers": [{"tags": [], "owner": {"reputation": 41290, "user_id": 570918, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/27ce5101af57acecf9a5fe563b6192b1?s=128&d=identicon&r=PG", "display_name": "merv", "link": "https://stackoverflow.com/users/570918/merv"}, "is_accepted": true, "score": 1, "last_activity_date": 1572482912, "creation_date": 1572482912, "answer_id": 58635537, "question_id": 58633930, "link": "https://stackoverflow.com/questions/58633930/simulating-correlated-lognormals-in-python/58635537#58635537", "title": "Simulating correlated lognormals in Python", "body": "<p>The covariance matrix isn't positive semidefinite:</p>\n\n<pre><code>&gt;&gt;&gt; mvn = np.random.multivariate_normal(mu, cov, size=sims, check='raise')\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\n  File \"mtrand.pyx\", line 4542, in mtrand.RandomState.multivariate_normal\nValueError: covariance is not symmetric positive-semidefinite.\n</code></pre>\n\n<p>and therefore there is no distribution of data that actually has the requested covariance structure. At a high-level, consider that you are specifying <em>X</em> and <em>Z</em> to both be highly correlated with <em>Y</em> (0.8 and 0.9), but at the same time to be rather weakly correlated with each other (0.3). A detailed discussion specifically about three variable correlation constraints <a href=\"https://math.stackexchange.com/questions/284877/correlation-between-three-variables-question\">can be found on Mathematics SE</a>.</p>\n\n<p>I don't know the internals of how NumPy gets around it (you should have seen a warning), but if you check the final correlation structure:</p>\n\n<pre><code>&gt;&gt;&gt; np.corrcoef(mvn.T)\narray([[1.        , 0.79817321, 0.33343102],\n       [0.79817321, 1.        , 0.74525583],\n       [0.33343102, 0.74525583, 1.        ]])\n</code></pre>\n\n<p>one can see that the <em>X</em> and <em>Z</em> have lower correlations with <em>Y</em> and higher correlation with each other than originally specified by <code>rho</code>. Again, not sure how exactly the variances get adjusted, but because the covariance is impossible, NumPy can pretty much do what it wants; fortunately, it seems to stay pretty close.</p>\n"}], "owner": {"reputation": 105, "user_id": 9182231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/950cef4193d65e3e503f6b21debe5907?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/9182231/john-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 145, "favorite_count": 0, "accepted_answer_id": 58635537, "answer_count": 1, "score": 0, "last_activity_date": 1572482912, "creation_date": 1572471145, "question_id": 58633930, "link": "https://stackoverflow.com/questions/58633930/simulating-correlated-lognormals-in-python", "title": "Simulating correlated lognormals in Python", "body": "<p>I'm following the answer in this question <a href=\"https://stackoverflow.com/questions/31977175/how-can-i-sample-a-multivariate-log-normal-distribution-in-python\">How can I sample a multivariate log-normal distribution in Python?</a>, but I'm getting that the marginal distributions of the sample data fail to have the same mean and standard deviation of the inputted marginals. For example, consider the multivariate distribution below in the code sample. If we label the marginals as X, Y, and Z, then I would expect that the scale and location parameters (implied from the sample data) to match inputted data. However, for X, you can see below that the scale and location parameters are 0.1000 and 0.5219. So the scale is what we expect, but the location is off by 4%. I'm thinking I'm doing something wrong with the covariance matrix, but I can't seem to figure out what is wrong. I tried setting the correlation matrix to the identity matrix and then the location and scale of the sample data match with the inputted data. Something must be wrong with my covariance matrix, or I'm making another fundamental error. Any help would be appreciated. Please advise if the question is unclear. </p>\n\n<pre><code>import pandas as pd\nimport numpy as np\nfrom copy import deepcopy\n\nmu  = [0.1, 0.2, 0.3]\nsigma = [0.5, 0.8, 0.6]\nsims = 3000000\nrho = [[1, 0.9, 0.3], [0.9, 1, 0.8], [0.3, 0.8 ,1]]\n\ncov = deepcopy(rho)\nfor row in range(len(rho)):\n    for col in range(len(rho)):\n        cov[row][col] = rho[row][col] * sigma[row] * sigma[col]\n\nmvn = np.random.multivariate_normal(mu, cov, size=sims) \n\nsim = pd.DataFrame(np.exp(mvn), columns=['X', 'Y', 'Z'])\n\ndef computeImpliedLogNormalsParams(mean, std):\n    # This method implies lognormal params which match the moments inputed \n    secondMoment = std * std + mean *mean\n    location = np.log(mean*mean / np.sqrt(secondMoment))\n    scale = np.sqrt(np.log(secondMoment / (mean * mean)))\n    return (location, scale)\n\ndef printDistributionProp(col, sim):\n    print(f\"Mean = {sim[col].mean()}, std = {sim[col].std()}\")\n    location, scale = computeImpliedLogNormalsParams(sim[col].mean(), sim[col].std())\n    print(f\"Matching moments gives a lognormal with location {location} and scale {scale}\")\n\n\nprintDistributionProp('X', sim)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Mean = 1.2665338803521895, std = 0.708713940557892\nMatching moments gives a lognormal with location 0.10008162992913544 and scale 0.5219239625443672   \n</code></pre>\n\n<p>Observing the output, we would expect that scale parameter to be very close to 0.5, but it's a bit off. Increasing the number of simulations does nothing since the value has converged. </p>\n"}, {"tags": ["python", "for-loop", "matplotlib", "python-3.7", "colorbar"], "comments": [{"owner": {"reputation": 27334, "user_id": 7758804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UBA7j.jpg?s=128&g=1", "display_name": "Trenton McKinney", "link": "https://stackoverflow.com/users/7758804/trenton-mckinney"}, "edited": false, "score": 1, "creation_date": 1572471200, "post_id": 58633903, "comment_id": 103574835, "body": "You haven&#39;t provided a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">Minimal, Reproducible Example</a> to test.  I&#39;d guess, delete the figure each time after saving it.  <code>plt.close()</code> after <code>plt.save</code>."}, {"owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "edited": false, "score": 0, "creation_date": 1572471421, "post_id": 58633903, "comment_id": 103574906, "body": "Try and move the plt.colorbar() line outside of the for loop at the end."}, {"owner": {"reputation": 67, "user_id": 10173203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f94462696722c57dd08e01937568de4?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/10173203/tim"}, "reply_to_user": {"reputation": 27334, "user_id": 7758804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UBA7j.jpg?s=128&g=1", "display_name": "Trenton McKinney", "link": "https://stackoverflow.com/users/7758804/trenton-mckinney"}, "edited": false, "score": 0, "creation_date": 1572514087, "post_id": 58633903, "comment_id": 103586106, "body": "sorry I didn&#39;t provide enough details. @TrentonMcKinney, thanks for your help! Your suggestion works!"}], "owner": {"reputation": 67, "user_id": 10173203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f94462696722c57dd08e01937568de4?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/10173203/tim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 200, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1572516507, "creation_date": 1572471024, "last_edit_date": 1572516507, "question_id": 58633903, "link": "https://stackoverflow.com/questions/58633903/how-to-show-single-colorbar-in-loop-by-python", "title": "How to show single colorbar in loop by Python?", "body": "<p>I've tried to plot images of my loaded 2D data (512x512 pixels) in a loop by matplotlib with Python3. But it turns out to show weird images with multiple colorbars. Here is my code:</p>\n\n<pre><code>import numpy as np\nimport sys\nimport os\nfrom load_images import load, File\nimport matplotlib.pyplot as plt\nfrom matplotlib import cm\n\narr_spe = [x for x in os.listdir() if x.endswith(\".SPE\")]\n\nfor x in arr_spe:\n    try:\n        dat = load(x)\n\n        plt.imshow(dat,cmap=cm.jet, vmax = 2000)\n        plt.colorbar()\n        plt.savefig(x[:-4]+'.png', dpi=500, bbox_inches='tight')\n    except ValueError as error: \n        print('ValueError(empty)-'+x) \n</code></pre>\n\n<p>I use the code to load my data in the following link: <a href=\"https://scipy-cookbook.readthedocs.io/items/Reading_SPE_files.html\" rel=\"nofollow noreferrer\">Reading SPE file from CCD camera</a> by naming the code as load_images.py. </p>\n\n<p>And I got many images like\n<a href=\"https://i.stack.imgur.com/f1T2w.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/f1T2w.png\" alt=\"Results after running this code\"></a></p>\n\n<p>Does anybody have ideas to solve this issue? Just simply show single colorbar in an image</p>\n"}, {"tags": ["python", "python-3.x", "pandas"], "comments": [{"owner": {"reputation": 1490, "user_id": 11704802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2da9f7d06d966ba98e482d6862846e12?s=128&d=identicon&r=PG&f=1", "display_name": "pciunkiewicz", "link": "https://stackoverflow.com/users/11704802/pciunkiewicz"}, "edited": false, "score": 0, "creation_date": 1572471730, "post_id": 58633886, "comment_id": 103575009, "body": "The pandas styling guide should have everything you need: <a href=\"https://pandas.pydata.org/pandas-docs/stable/user_guide/style.html\" rel=\"nofollow noreferrer\">pandas.pydata.org/pandas-docs/stable/user_guide/style.html</a>"}, {"owner": {"reputation": 17765, "user_id": 9375102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8yBw3.jpg?s=128&g=1", "display_name": "Umar.H", "link": "https://stackoverflow.com/users/9375102/umar-h"}, "edited": false, "score": 0, "creation_date": 1572473062, "post_id": 58633886, "comment_id": 103575431, "body": "What do you mean by highlight ? create a new column so you can filter? can you show ur expected output"}, {"owner": {"reputation": 41, "user_id": 12281253, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAolU1KQ8qQdZUjFxR0oDUOCT1xWoA_jT5pbQ7rYg=k-s128", "display_name": "Louis Kempson-Seaton", "link": "https://stackoverflow.com/users/12281253/louis-kempson-seaton"}, "edited": false, "score": 0, "creation_date": 1572531944, "post_id": 58633886, "comment_id": 103595958, "body": "Creating a new column would work. Or just highlight them with a colour."}], "answers": [{"tags": [], "owner": {"reputation": 74, "user_id": 11842941, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38bd68a544ce3cb7f0f9242b53956485?s=128&d=identicon&r=PG&f=1", "display_name": "Samarth", "link": "https://stackoverflow.com/users/11842941/samarth"}, "is_accepted": false, "score": 0, "last_activity_date": 1572472234, "creation_date": 1572472234, "answer_id": 58634128, "question_id": 58633886, "link": "https://stackoverflow.com/questions/58633886/highlighting-values-in-pandas/58634128#58634128", "title": "Highlighting Values in Pandas", "body": "<p>You can have a look at the Pandas styling options. It has an applymap function which helps you to color code specific columns based on conditions of your choice. </p>\n\n<p>The documention (<a href=\"https://pandas.pydata.org/pandas-docs/stable/user_guide/style.html\" rel=\"nofollow noreferrer\">https://pandas.pydata.org/pandas-docs/stable/user_guide/style.html</a>) has some examples, you can go through these and decide how you would want to highlight the column values. </p>\n\n<p>Assuming you have a DataFrame called df. You can define your own styling function func() and apply it your DataFrame. </p>\n\n<pre><code>df.style.apply(func)\n</code></pre>\n\n<p>You can define your styling function based on the examples in the documentation. Let me know if you have any more questions. </p>\n"}], "owner": {"reputation": 41, "user_id": 12281253, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAolU1KQ8qQdZUjFxR0oDUOCT1xWoA_jT5pbQ7rYg=k-s128", "display_name": "Louis Kempson-Seaton", "link": "https://stackoverflow.com/users/12281253/louis-kempson-seaton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1572472234, "creation_date": 1572470887, "last_edit_date": 1572471481, "question_id": 58633886, "link": "https://stackoverflow.com/questions/58633886/highlighting-values-in-pandas", "title": "Highlighting Values in Pandas", "body": "<p>Good Evening all,\nI have made a pandas DataFrame from an excel spreadsheet. I am trying to highlight the names in this list that have logged in at 9:01:00 etc. Anyone who has logged in past the hour or half hour by 1 minute, but excluding those that have logged in early eg 07:59:00 or 07:29:00. EG. Those with * around the time. I am a complete amateur coder so I apologise. If things could be put in the simplest form without assuming a great degree of knowledge I would very much appreciate it. Also, if this is incredibly complex/ impossible I also apologise.</p>\n\n<pre><code> Name     Login\\nTime\n0            ITo    07:59:09\n1            Ann    07:59:13\n2        Darryll    07:59:24\n3         Darren    07:59:31\n4          FlorR    07:59:42\n5           Colm    07:59:56\n6       NatashaBr   07:59:59\n7        AlexRobe   07:59:59\n8    JonathanSinn   08:00:02\n9       BrendanJo   08:00:04\n10      DanielCov   08:00:15\n11             RW   08:00:17\n12      SaraHerrma  08:00:26\n13     RobertStew   08:00:37\n14      JasonBal    *08:04:36*\n17      KevinAll    08:59:52\n18           JFo    09:00:05\n19     LiviaHarr    09:00:22\n20       Patrick    *09:01:36*\n24         SianDi   09:30:32\n25     AlisonBri    09:59:27\n26       MMulholl   10:00:02\n27   TiffanyThom    10:00:07\n29     GeorgeEdw    11:00:00\n30       JackSha    11:00:50\n31        UsmanA    11:59:46\n32     LewisBrad    12:02:30\n34    RyanmacCor    12:59:20\n35  GerardMcphil    12:59:56\n36        TanjaN    13:00:07\n37  MartinRichar    13:30:08\n38    MarkBellin    13:30:20\n39     KyranSpur    13:30:24\n40       RichRam    13:58:53\n41    OctavioSan    14:30:10\n42      CharlesS    16:45:07\n43    DanielHoll    16:50:55\n44    ThomasHoll    16:59:45\n45       RosieFl    16:59:56\n46      CiaranMur   17:00:01\n47      LouiseDa    17:29:29\n48     WilliamAi    17:30:02\n</code></pre>\n"}, {"tags": ["python", "mongodb", "ssh", "ssh-tunnel"], "comments": [{"owner": {"reputation": 1649, "user_id": 6855531, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153677140887260/picture?type=large", "display_name": "paltaa", "link": "https://stackoverflow.com/users/6855531/paltaa"}, "edited": false, "score": 0, "creation_date": 1572471178, "post_id": 58633874, "comment_id": 103574827, "body": "Does this answer your question? <a href=\"https://stackoverflow.com/questions/42718547/how-to-connect-remote-mongodb-with-pymongo\">How to connect remote mongodb with pymongo</a>"}, {"owner": {"reputation": 508, "user_id": 1935415, "user_type": "registered", "accept_rate": 27, "profile_image": "https://i.stack.imgur.com/0AL2b.png?s=128&g=1", "display_name": "babeyh", "link": "https://stackoverflow.com/users/1935415/babeyh"}, "reply_to_user": {"reputation": 1649, "user_id": 6855531, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153677140887260/picture?type=large", "display_name": "paltaa", "link": "https://stackoverflow.com/users/6855531/paltaa"}, "edited": false, "score": 0, "creation_date": 1572471415, "post_id": 58633874, "comment_id": 103574900, "body": "I showed the question but it is not worked for me. I did not connect to DB if I success it, I will try this answer of the question."}, {"owner": {"reputation": 508, "user_id": 1935415, "user_type": "registered", "accept_rate": 27, "profile_image": "https://i.stack.imgur.com/0AL2b.png?s=128&g=1", "display_name": "babeyh", "link": "https://stackoverflow.com/users/1935415/babeyh"}, "reply_to_user": {"reputation": 1649, "user_id": 6855531, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153677140887260/picture?type=large", "display_name": "paltaa", "link": "https://stackoverflow.com/users/6855531/paltaa"}, "edited": false, "score": 0, "creation_date": 1572471451, "post_id": 58633874, "comment_id": 103574918, "body": "I showed this question, too <a href=\"https://stackoverflow.com/questions/55766606/can-i-connect-to-ghtorrent-mysql-mongodb-database-through-ssh\" title=\"can i connect to ghtorrent mysql mongodb database through ssh\">stackoverflow.com/questions/55766606/&hellip;</a>"}, {"owner": {"reputation": 508, "user_id": 1935415, "user_type": "registered", "accept_rate": 27, "profile_image": "https://i.stack.imgur.com/0AL2b.png?s=128&g=1", "display_name": "babeyh", "link": "https://stackoverflow.com/users/1935415/babeyh"}, "reply_to_user": {"reputation": 1649, "user_id": 6855531, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153677140887260/picture?type=large", "display_name": "paltaa", "link": "https://stackoverflow.com/users/6855531/paltaa"}, "edited": false, "score": 0, "creation_date": 1572471512, "post_id": 58633874, "comment_id": 103574937, "body": "First of all, I want to figure out the parameters of ssh and mongo commands. Because I connect the DB with the terminal."}, {"owner": {"reputation": 1649, "user_id": 6855531, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153677140887260/picture?type=large", "display_name": "paltaa", "link": "https://stackoverflow.com/users/6855531/paltaa"}, "edited": false, "score": 0, "creation_date": 1572471514, "post_id": 58633874, "comment_id": 103574938, "body": "and what is the error ?"}, {"owner": {"reputation": 508, "user_id": 1935415, "user_type": "registered", "accept_rate": 27, "profile_image": "https://i.stack.imgur.com/0AL2b.png?s=128&g=1", "display_name": "babeyh", "link": "https://stackoverflow.com/users/1935415/babeyh"}, "reply_to_user": {"reputation": 1649, "user_id": 6855531, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153677140887260/picture?type=large", "display_name": "paltaa", "link": "https://stackoverflow.com/users/6855531/paltaa"}, "edited": false, "score": 0, "creation_date": 1572471545, "post_id": 58633874, "comment_id": 103574948, "body": "2019-10-31 00:11:51,304| ERROR   | Secsh channel 49 open FAILED: open failed: Administratively prohibited 2019-10-31 00:11:51,305| ERROR   | Could not establish connection from (&#39;127.0.0.1&#39;, 51634) to remote side of the tunnel"}], "owner": {"reputation": 508, "user_id": 1935415, "user_type": "registered", "accept_rate": 27, "profile_image": "https://i.stack.imgur.com/0AL2b.png?s=128&g=1", "display_name": "babeyh", "link": "https://stackoverflow.com/users/1935415/babeyh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 227, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1572554972, "creation_date": 1572470845, "last_edit_date": 1572554972, "question_id": 58633874, "link": "https://stackoverflow.com/questions/58633874/how-can-i-connect-ssh-remote-mongodb-with-python-instead-of-terminal-macos", "title": "how can i connect (ssh remote) mongodb with python instead of terminal macos?", "body": "<p>I want to connect MongoDB server with python. </p>\n\n<p>I have connected it on the terminal of MacOS and I run some MongoDB queries. (as described this link <a href=\"http://ghtorrent.org/raw.html\" rel=\"nofollow noreferrer\">http://ghtorrent.org/raw.html</a>)</p>\n\n<p>sshtunnel: <strong>ssh -L 27017:dutihr.st.ewi.tudelft.nl:27017 ghtorrent@dutihr.st.ewi.tudelft.nl</strong></p>\n\n<p>connect to mongo: <strong>mongo -u ghtorrentro -p ghtorrentro github</strong></p>\n\n<p>what are the parameters of the above \"ssh\" and \"mongo\" commands?</p>\n\n<p><a href=\"https://stackoverflow.com/questions/42718547/how-to-connect-remote-mongodb-with-pymongo\">How to connect remote mongodb with pymongo</a> and\n<a href=\"https://stackoverflow.com/questions/55766606/can-i-connect-to-ghtorrent-mysql-mongodb-database-through-ssh\">Can I connect to GHTorrent MySQL/Mongodb database through ssh?</a></p>\n\n<p>I see these question, I tried to write my code according to these answers but it's not working.</p>\n\n<pre><code>import pymongo\nimport sshtunnel\nfrom sshtunnel import SSHTunnelForwarder\nimport paramiko\nmypkey = paramiko.RSAKey.from_private_key_file(\"/Users/aaa/.ssh/id_rsa\",\"xxx\") #username(aaa) and password(xxx)\nserver = SSHTunnelForwarder(\n     ('dutihr.st.ewi.tudelft.nl', 22), \n        ssh_username=\"\",  \n        ssh_pkey=mypkey, \n        ssh_private_key_password=\"xxx\", #my password for key\n        remote_bind_address=('0.0.0.0',27017))\nserver.start()\n</code></pre>\n\n<p>how can I find the right parameters of these codes? how can I connect this MongoDB server? It give this error; </p>\n\n<pre><code>2019-10-31 00:11:51,304| ERROR | Secsh channel 49 open FAILED: open failed: Administratively prohibited \n2019-10-31 00:11:51,305| ERROR | Could not establish connection from ('127.0.0.1', 51634) to remote side of the tunnel\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "redis", "celery", "pickle"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1572470806, "post_id": 58633852, "comment_id": 103574705, "body": "Never, <b>ever</b> do this in production code: <code>ctypes.cast(obj_memory_id, ctypes.py_object).value</code>."}, {"owner": {"reputation": 990, "user_id": 4764353, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-48IuUHI0z7w/AAAAAAAAAAI/AAAAAAAAAYw/hqtraJsvmR4/photo.jpg?sz=128", "display_name": "Nikolay Shindarov", "link": "https://stackoverflow.com/users/4764353/nikolay-shindarov"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1572470837, "post_id": 58633852, "comment_id": 103574716, "body": "@juanpa.arrivillaga Why?"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1572470982, "post_id": 58633852, "comment_id": 103574765, "body": "Because it relies on an implementation detail, (that the <code>id</code> is the memory address of the PyObject header), and an unsafe cast. In any case, your celary process won&#39;t be able to make sense of the memory address from a separate process like that, see: <a href=\"https://stackoverflow.com/questions/4352668/can-i-pass-an-object-to-another-process-just-passing-its-pointer-to-a-shared-me\" title=\"can i pass an object to another process just passing its pointer to a shared me\">stackoverflow.com/questions/4352668/&hellip;</a>"}, {"owner": {"reputation": 990, "user_id": 4764353, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-48IuUHI0z7w/AAAAAAAAAAI/AAAAAAAAAYw/hqtraJsvmR4/photo.jpg?sz=128", "display_name": "Nikolay Shindarov", "link": "https://stackoverflow.com/users/4764353/nikolay-shindarov"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1572471428, "post_id": 58633852, "comment_id": 103574911, "body": "@juanpa.arrivillaga Thanks. So are you aware of any way to pass unserializable object to a celery task?"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1572471671, "post_id": 58633852, "comment_id": 103574990, "body": "No, it has to be serializable."}], "answers": [{"comments": [{"owner": {"reputation": 990, "user_id": 4764353, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-48IuUHI0z7w/AAAAAAAAAAI/AAAAAAAAAYw/hqtraJsvmR4/photo.jpg?sz=128", "display_name": "Nikolay Shindarov", "link": "https://stackoverflow.com/users/4764353/nikolay-shindarov"}, "edited": false, "score": 0, "creation_date": 1572470967, "post_id": 58633876, "comment_id": 103574760, "body": "Is it impossible if it runs on the same machine (including the broker)?"}, {"owner": {"reputation": 6980, "user_id": 1544347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ad87bb0303238ee876a147dacd557a1?s=128&d=identicon&r=PG", "display_name": "Markus Unterwaditzer", "link": "https://stackoverflow.com/users/1544347/markus-unterwaditzer"}, "reply_to_user": {"reputation": 990, "user_id": 4764353, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-48IuUHI0z7w/AAAAAAAAAAI/AAAAAAAAAYw/hqtraJsvmR4/photo.jpg?sz=128", "display_name": "Nikolay Shindarov", "link": "https://stackoverflow.com/users/4764353/nikolay-shindarov"}, "edited": false, "score": 1, "creation_date": 1572471038, "post_id": 58633876, "comment_id": 103574782, "body": "@NikolayShindarov you can do that but why do you want to run Celery at all then?"}, {"owner": {"reputation": 990, "user_id": 4764353, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-48IuUHI0z7w/AAAAAAAAAAI/AAAAAAAAAYw/hqtraJsvmR4/photo.jpg?sz=128", "display_name": "Nikolay Shindarov", "link": "https://stackoverflow.com/users/4764353/nikolay-shindarov"}, "edited": false, "score": 0, "creation_date": 1572471377, "post_id": 58633876, "comment_id": 103574885, "body": "Let&#39;s say I have something like observer pattern. But when from the observable I call the update method on the observer, I want to call it asynchronously in the background and keep running the observable without waiting for the observer&#39;s execution. So is there any way to achieve what I want?"}, {"owner": {"reputation": 6980, "user_id": 1544347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ad87bb0303238ee876a147dacd557a1?s=128&d=identicon&r=PG", "display_name": "Markus Unterwaditzer", "link": "https://stackoverflow.com/users/1544347/markus-unterwaditzer"}, "reply_to_user": {"reputation": 990, "user_id": 4764353, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-48IuUHI0z7w/AAAAAAAAAAI/AAAAAAAAAYw/hqtraJsvmR4/photo.jpg?sz=128", "display_name": "Nikolay Shindarov", "link": "https://stackoverflow.com/users/4764353/nikolay-shindarov"}, "edited": false, "score": 0, "creation_date": 1572471462, "post_id": 58633876, "comment_id": 103574922, "body": "@NikolayShindarov just use a thread then, right? Celery is useless if you can&#39;t serialize your task arguments."}, {"owner": {"reputation": 990, "user_id": 4764353, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-48IuUHI0z7w/AAAAAAAAAAI/AAAAAAAAAYw/hqtraJsvmR4/photo.jpg?sz=128", "display_name": "Nikolay Shindarov", "link": "https://stackoverflow.com/users/4764353/nikolay-shindarov"}, "edited": false, "score": 0, "creation_date": 1572471552, "post_id": 58633876, "comment_id": 103574949, "body": "I might look into threads, thanks. But I still don&#39;t understand why Celery is useless if the task arguments are not serializable?"}], "tags": [], "owner": {"reputation": 6980, "user_id": 1544347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ad87bb0303238ee876a147dacd557a1?s=128&d=identicon&r=PG", "display_name": "Markus Unterwaditzer", "link": "https://stackoverflow.com/users/1544347/markus-unterwaditzer"}, "is_accepted": true, "score": 2, "last_activity_date": 1572471009, "last_edit_date": 1572471009, "creation_date": 1572470852, "answer_id": 58633876, "question_id": 58633852, "link": "https://stackoverflow.com/questions/58633852/can-you-pass-an-object-to-a-celery-task-by-its-memory-id-using-ctypes/58633876#58633876", "title": "Can you pass an object to a celery task by its memory id using ctypes?", "body": "<p>The celery worker runs in a different process, potentially on a different machine. It is unlikely to share memory with the process that spawns the task. You are passing a random pointer to the task, that task dereferences it and you get garbage.</p>\n\n<p>You need to make your object serializable in some way if you want to use Celery in a useful way. Either by making it pickleable or something better.</p>\n"}], "owner": {"reputation": 990, "user_id": 4764353, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-48IuUHI0z7w/AAAAAAAAAAI/AAAAAAAAAYw/hqtraJsvmR4/photo.jpg?sz=128", "display_name": "Nikolay Shindarov", "link": "https://stackoverflow.com/users/4764353/nikolay-shindarov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 860, "favorite_count": 0, "accepted_answer_id": 58633876, "answer_count": 1, "score": 2, "last_activity_date": 1572472135, "creation_date": 1572470706, "last_edit_date": 1572472135, "question_id": 58633852, "link": "https://stackoverflow.com/questions/58633852/can-you-pass-an-object-to-a-celery-task-by-its-memory-id-using-ctypes", "title": "Can you pass an object to a celery task by its memory id using ctypes?", "body": "<p>I want to pass a object of my own class to a celery task. I am not using Django, this is my own custom class which is not serializable.</p>\n\n<p>After researching, I got the idea to pass the object memory id as an argument and then get the object from the id as per <a href=\"https://stackoverflow.com/a/15702647/4764353\">this answer</a>:</p>\n\n<p><strong>tasks.py</strong>   </p>\n\n<pre><code>import ctypes\n\n@app.task\ndef my_task(obj_memory_id):\n    my_obj = ctypes.cast(obj_memory_id, ctypes.py_object).value\n    my_obj.my_method()\n</code></pre>\n\n<p><strong>main.py</strong></p>\n\n<pre><code>def main():\n    obj = MyClass()\n    obj_memory_id = id(obj)\n    my_task.delay(obj_memory_id)\n</code></pre>\n\n<p>Now, this works when I perform it outside celery. But when I do it with celery, I get:</p>\n\n<pre><code>billiard.exceptions.WorkerLostError: Worker exited prematurely: signal 11 (SIGSEGV).\n</code></pre>\n\n<p>Why is that and how can I achieve my goal?</p>\n\n<p><strong>More info:</strong> I am not instantiating the class inside the Celery task, because this class instantiates very slow (1-2 seconds). For my purposes, even a delay of 1 second is a lot. I want to have its instance ready in advance, and when I need to call its method, to do it immediately.</p>\n"}, {"tags": ["python", "tensorflow", "dataset"], "comments": [{"owner": {"reputation": 5550, "user_id": 7389608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QKeuI.jpg?s=128&g=1", "display_name": "giser_yugang", "link": "https://stackoverflow.com/users/7389608/giser-yugang"}, "edited": false, "score": 0, "creation_date": 1572486657, "post_id": 58633824, "comment_id": 103578566, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/56122670/how-to-get-string-value-out-of-tf-tensor-which-dtype-is-string/56122892#56122892\">how to get string value out of tf.tensor which dtype is string</a>."}], "owner": {"reputation": 307, "user_id": 3943508, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/MgySX.jpg?s=128&g=1", "display_name": "Random Certainty", "link": "https://stackoverflow.com/users/3943508/random-certainty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 456, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1572470526, "creation_date": 1572470526, "question_id": 58633824, "link": "https://stackoverflow.com/questions/58633824/how-to-decode-json-string-from-string-tensor", "title": "How to decode json string from String Tensor?", "body": "<p>My raw data are plain text files where each line is a json string. For example:</p>\n\n<pre><code>{\"f1\": \"v1\", \"f2\": [1, 2, 3]}\n{\"f1\": \"v2\", \"f2\": [2, 3, 4]}\n</code></pre>\n\n<p>I read the file into <code>tf.Dataset</code> by </p>\n\n<pre><code>ds = tf.data.TextLineDataset(\"file_name\"))\n</code></pre>\n\n<p>Now each element of <code>ds</code> is a Tensor with <code>dtype=tf.string</code>.</p>\n\n<p>How do I parse the json strings?</p>\n\n<p>I tried</p>\n\n<pre><code>ds.map(lambda x: json.loads(x)[\"f2\"])\n</code></pre>\n\n<p>but got</p>\n\n<pre><code>TypeError: the JSON object must be str, bytes or bytearray, not 'Tensor'\n</code></pre>\n"}, {"tags": ["python", "r"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1572470726, "post_id": 58633817, "comment_id": 103574679, "body": "R array and vector types are pretty different from python lists."}, {"owner": {"reputation": 942, "user_id": 2992789, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-4u0SelqQsKc/AAAAAAAAAAI/AAAAAAAAAD0/AMZuuclNpBENUXAVmHApflMWfka-QeQxZQ/s96-c/photo.jpg?sz=128", "display_name": "daniel_hck", "link": "https://stackoverflow.com/users/2992789/daniel-hck"}, "edited": false, "score": 0, "creation_date": 1607440775, "post_id": 58633817, "comment_id": 115269689, "body": "Maybe adding context on why you want to do that in python could help to find the right expression. Moreover, please, notice how python and R are using different indexing. Python starters at 0 (first element) where R starts at 1 (first element)."}], "answers": [{"comments": [{"owner": {"reputation": 1083, "user_id": 4739755, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh5.googleusercontent.com/-xGt648wZsco/AAAAAAAAAAI/AAAAAAAAAGo/EfA-KvgfzKo/photo.jpg?sz=128", "display_name": "b_c", "link": "https://stackoverflow.com/users/4739755/b-c"}, "edited": false, "score": 0, "creation_date": 1572470815, "post_id": 58633845, "comment_id": 103574707, "body": "This doesn&#39;t actually answer the posted question"}, {"owner": {"reputation": 1649, "user_id": 6855531, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153677140887260/picture?type=large", "display_name": "paltaa", "link": "https://stackoverflow.com/users/6855531/paltaa"}, "reply_to_user": {"reputation": 1083, "user_id": 4739755, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh5.googleusercontent.com/-xGt648wZsco/AAAAAAAAAAI/AAAAAAAAAGo/EfA-KvgfzKo/photo.jpg?sz=128", "display_name": "b_c", "link": "https://stackoverflow.com/users/4739755/b-c"}, "edited": false, "score": 1, "creation_date": 1572471047, "post_id": 58633845, "comment_id": 103574789, "body": "yes, forgot last part"}], "tags": [], "owner": {"reputation": 1649, "user_id": 6855531, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153677140887260/picture?type=large", "display_name": "paltaa", "link": "https://stackoverflow.com/users/6855531/paltaa"}, "is_accepted": false, "score": 1, "last_activity_date": 1572470984, "last_edit_date": 1572470984, "creation_date": 1572470665, "answer_id": 58633845, "question_id": 58633817, "link": "https://stackoverflow.com/questions/58633817/what-is-the-equivalent-function-of-rs-c-in-python/58633845#58633845", "title": "what is the equivalent function of R&#39;s c( ) in python?", "body": "<p>In python, the correct way of adding items to a list is by append.</p>\n\n<pre><code>mylist.append(element)\n</code></pre>\n\n<p>otherwise, you can use list comprehension for generating a list of None or empty strings:</p>\n\n<pre><code>mylist= [None for i in range(100)]\n</code></pre>\n\n<p>this will generate a list with 100 Nones. Then you can assign by index:</p>\n\n<pre><code>mylist[2] = 4\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 30153, "user_id": 12299000, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0pja9.png?s=128&g=1", "display_name": "kaya3", "link": "https://stackoverflow.com/users/12299000/kaya3"}, "is_accepted": true, "score": 5, "last_activity_date": 1572471944, "last_edit_date": 1572471944, "creation_date": 1572471068, "answer_id": 58633910, "question_id": 58633817, "link": "https://stackoverflow.com/questions/58633817/what-is-the-equivalent-function-of-rs-c-in-python/58633910#58633910", "title": "what is the equivalent function of R&#39;s c( ) in python?", "body": "<p>The <code>c</code> function in R is a function which concatenates its arguments as lists. You can concatenate two lists in Python using <code>+</code>; to concatenate a variable number of lists, as <code>c</code> in R does, you can use the <code>sum</code> function. This normally adds numbers, but can be used to add lists by \"starting\" from an empty list instead of from 0:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>&gt;&gt;&gt; lists = [[1,2,3], [4,5,6], [7,8,9]]\n&gt;&gt;&gt; sum(lists, [])\n[1, 2, 3, 4, 5, 6, 7, 8, 9]\n</code></pre>\n\n<p>However, this is unrelated to the error in your code. The problem is that in Python, you can only use the syntax <code>mylist[i] = x</code> to set a new value at an index which already exists. Since you created an empty list, it has no elements so the index 2 is out of bounds.</p>\n\n<hr>\n\n<p>If you want to be able to set values at arbitrary indices, which don't necessarily form a contiguous range, you could use a dictionary:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>&gt;&gt;&gt; q = dict()\n&gt;&gt;&gt; q[2] = 9\n</code></pre>\n\n<p>However, there will be a mismatch between what some operations do and what you expect them to do for a list-with-some-unset-values; for example, <code>len(q)</code> gives the number of elements which are set, rather than the length of the sequence including the unset values.</p>\n"}], "owner": {"reputation": 85, "user_id": 4772764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c333b66462cdf1a1d57b360c599e7c1?s=128&d=identicon&r=PG&f=1", "display_name": "Nihat", "link": "https://stackoverflow.com/users/4772764/nihat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 490, "favorite_count": 0, "closed_date": 1572503118, "accepted_answer_id": 58633910, "answer_count": 2, "score": 4, "last_activity_date": 1572471944, "creation_date": 1572470470, "question_id": 58633817, "link": "https://stackoverflow.com/questions/58633817/what-is-the-equivalent-function-of-rs-c-in-python", "closed_reason": "Duplicate", "title": "what is the equivalent function of R&#39;s c( ) in python?", "body": "<p>Whenever I try to create an empty list in python, I realized that if I do not know and define the range of it, I can't set a value to whatever indice I want like in R.</p>\n\n<pre><code>q = list()\nq[ 2 ] = 9\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nIndexError: list assignment index out of range\n</code></pre>\n\n<p>But in R, it does not happen.</p>\n\n<pre><code>Q = c( )\nQ[ 4 ] = 3\n&gt;&gt;&gt; [1] NA NA  4\n</code></pre>\n\n<p>Is there any equivalent operation that I can do in python?</p>\n"}, {"tags": ["python", "django", "python-3.x", "nginx", "gunicorn"], "comments": [{"owner": {"reputation": 9530, "user_id": 1755108, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/IkECk.jpg?s=128&g=1", "display_name": "brokenfoot", "link": "https://stackoverflow.com/users/1755108/brokenfoot"}, "edited": false, "score": 0, "creation_date": 1572470648, "post_id": 58633812, "comment_id": 103574649, "body": "Could this be due to <code>WORKERCLASS</code> type for gunicorn? I think by default it is <code>sync</code>. <a href=\"http://docs.gunicorn.org/en/stable/settings.html#worker-class\" rel=\"nofollow noreferrer\">docs.gunicorn.org/en/stable/settings.html#worker-class</a>"}, {"owner": {"reputation": 28612, "user_id": 7954504, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/6POkt.jpg?s=128&g=1", "display_name": "Brad Solomon", "link": "https://stackoverflow.com/users/7954504/brad-solomon"}, "reply_to_user": {"reputation": 9530, "user_id": 1755108, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/IkECk.jpg?s=128&g=1", "display_name": "brokenfoot", "link": "https://stackoverflow.com/users/1755108/brokenfoot"}, "edited": false, "score": 0, "creation_date": 1572470810, "post_id": 58633812, "comment_id": 103574706, "body": "What do you mean @brokenfoot?  I see that the <a href=\"https://docs.gunicorn.org/en/stable/settings.html#worker-class\" rel=\"nofollow noreferrer\">default is sync</a>, but I&#39;ve never seen it noted anywhere that just sticking with default will degrade performance"}, {"owner": {"reputation": 9530, "user_id": 1755108, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/IkECk.jpg?s=128&g=1", "display_name": "brokenfoot", "link": "https://stackoverflow.com/users/1755108/brokenfoot"}, "edited": false, "score": 0, "creation_date": 1572470929, "post_id": 58633812, "comment_id": 103574744, "body": "Somtime back, I ran a flask web server and saw same issues. Then i switched the worked type to any of async options, it made the difference. You can try out <code>gunicorn --log-level DEBUG --bind 0.0.0.0:8000 --workers 4 -k &quot;gevent&quot; project.wsgi</code>, just to see if it speeds up."}, {"owner": {"reputation": 28612, "user_id": 7954504, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/6POkt.jpg?s=128&g=1", "display_name": "Brad Solomon", "link": "https://stackoverflow.com/users/7954504/brad-solomon"}, "reply_to_user": {"reputation": 9530, "user_id": 1755108, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/IkECk.jpg?s=128&g=1", "display_name": "brokenfoot", "link": "https://stackoverflow.com/users/1755108/brokenfoot"}, "edited": false, "score": 0, "creation_date": 1572471275, "post_id": 58633812, "comment_id": 103574856, "body": "Ok - interesting, I&#39;m seeing ~1800 ms with  uwsgi too"}, {"owner": {"reputation": 9530, "user_id": 1755108, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/IkECk.jpg?s=128&g=1", "display_name": "brokenfoot", "link": "https://stackoverflow.com/users/1755108/brokenfoot"}, "edited": false, "score": 0, "creation_date": 1572472301, "post_id": 58633812, "comment_id": 103575192, "body": "I meant try <code>gunicorn</code> with any async worker type.  <code>uwsgi</code> seems to be an alternative for <code>gunicorn</code>."}, {"owner": {"reputation": 4568, "user_id": 698289, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/eb72959564830a0a5807c947b5e91633?s=128&d=identicon&r=PG", "display_name": "DanH", "link": "https://stackoverflow.com/users/698289/danh"}, "edited": false, "score": 0, "creation_date": 1598268025, "post_id": 58633812, "comment_id": 112393243, "body": "Does the response time reduce over time as python code gets compiled/cached for uWSGI? Perhaps the other methods are doing some pre-caching or something?"}, {"owner": {"reputation": 2267, "user_id": 5372462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa59f1ce77e8b10f9a970839226b28de?s=128&d=identicon&r=PG&f=1", "display_name": "ofirule", "link": "https://stackoverflow.com/users/5372462/ofirule"}, "edited": false, "score": 0, "creation_date": 1599844421, "post_id": 58633812, "comment_id": 112911049, "body": "for serving static files you can just use <code>nginx</code> directly, in theory it should be faster because it skips the request <code>proxy_pass</code> to server"}, {"owner": {"reputation": 28612, "user_id": 7954504, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/6POkt.jpg?s=128&g=1", "display_name": "Brad Solomon", "link": "https://stackoverflow.com/users/7954504/brad-solomon"}, "reply_to_user": {"reputation": 2267, "user_id": 5372462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa59f1ce77e8b10f9a970839226b28de?s=128&d=identicon&r=PG&f=1", "display_name": "ofirule", "link": "https://stackoverflow.com/users/5372462/ofirule"}, "edited": false, "score": 0, "creation_date": 1599847983, "post_id": 58633812, "comment_id": 112912305, "body": "True @ofirule, though in this question, by &quot;HTML document&quot;, I implicitly meant one containing data that is rendered dynamically by Django/Flask/Jinja"}], "owner": {"reputation": 28612, "user_id": 7954504, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/6POkt.jpg?s=128&g=1", "display_name": "Brad Solomon", "link": "https://stackoverflow.com/users/7954504/brad-solomon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2961, "favorite_count": 0, "answer_count": 0, "score": 7, "last_activity_date": 1599762325, "creation_date": 1572470459, "last_edit_date": 1572471392, "question_id": 58633812, "link": "https://stackoverflow.com/questions/58633812/gunicorn-or-uwsgi-both-30x-slower-than-django-wsgi-server", "title": "Gunicorn or uwsgi both ~30x slower than Django WSGI server", "body": "<p>I have a Django app.  It uses Nginx, sits on an EC2 instance, and uses an AWS load balancer in front of that.  Nginx serves static files right from disk as well as using <code>proxy_pass</code> for everything else to route to the WSGI app server.</p>\n\n<p>It is the choice of WSGI server that I'm seeing puzzling results for.</p>\n\n<p>When I use Django's development server, <code>./manage.py runserver 0.0.0.0:8000</code>, the average response time for the resulting HTML document at <code>/</code> is <strong>60-70 ms</strong>:</p>\n\n<pre><code>Blocked: 1 ms\nDNS resolution: 0 ms\nConnecting: 0 ms\nTLS setup: 0 ms\nSending: 0 ms\nWaiting: 68 ms\nReceiving: 0 ms\n</code></pre>\n\n<p>Now when I replace this with a \"proper\" Gunicorn server, the average response time for the same request/doc is now <strong>1800 ms</strong>!</p>\n\n<pre><code>Blocked: 1 ms\nDNS resolution: 0 ms\nConnecting: 0 ms\nTLS setup: 0 ms\nSending: 0 ms\nWaiting: 1859 ms\nReceiving: 0 ms\n</code></pre>\n\n<p>Here I'm running Gunicorn as:</p>\n\n<pre><code>gunicorn \\\n    --log-level DEBUG \\\n    --bind 0.0.0.0:8000 \\\n    --workers 4 \\\n    project.wsgi\n</code></pre>\n\n<p>The same exact thing goes for uwsgi, with an average reponse time of <strong>1850 ms</strong>:</p>\n\n<pre><code>uwsgi --chdir=/home/ubuntu/project \\\n    --module=project.wsgi:application \\\n    --env DJANGO_SETTINGS_MODULE=project.settings \\\n    --master \\\n    --http-socket 0.0.0.0:8000 \\\n    --processes=5 \\\n    --max-requests=5000 \\\n    --vacuum\n</code></pre>\n\n<p>And, notably, the response time does not change regardless of whether the number of workers is much higher e.g. <code>--workers 64</code> (nor would I expect it to, since this is not about concurrent requests).</p>\n\n<p>What would likely account for this difference?  Am I falling for some common pitfall?</p>\n\n<p>Versions:</p>\n\n<pre><code>$ python -m django --version\n2.2.6\n$ gunicorn --version\ngunicorn (version 19.9.0)\n$ nginx -v\nnginx version: nginx/1.14.0 (Ubuntu)\n</code></pre>\n"}, {"tags": ["python"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user12282966"}, "edited": false, "score": 0, "creation_date": 1572472932, "post_id": 58633913, "comment_id": 103575389, "body": "Thank you.  one more question, why &quot;inplace = True&quot; does&#39;t work here ? I run data.fillna(method=&quot;backfill&quot;,axis = 1, inplace = True), but it gives error."}, {"owner": {"reputation": 141, "user_id": 10828043, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wfd_6NOgEbQ/AAAAAAAAAAI/AAAAAAAABnM/Tmfpa4GqIlM/photo.jpg?sz=128", "display_name": "Michael Bridges", "link": "https://stackoverflow.com/users/10828043/michael-bridges"}, "edited": false, "score": 0, "creation_date": 1572477045, "post_id": 58633913, "comment_id": 103576528, "body": "I looked here: <a href=\"https://stackoverflow.com/questions/48523762/pandas-fillna-currently-only-can-fill-with-dict-series-column-by-column\" title=\"pandas fillna currently only can fill with dict series column by column\">stackoverflow.com/questions/48523762/&hellip;</a>.  removing the axis argument will allow you to use inplace=True.  It is possibly because the axis argument makes a copy of each vector in that axis, and therefore cannot be done in place. Although I do not know for sure."}], "tags": [], "owner": {"reputation": 141, "user_id": 10828043, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wfd_6NOgEbQ/AAAAAAAAAAI/AAAAAAAABnM/Tmfpa4GqIlM/photo.jpg?sz=128", "display_name": "Michael Bridges", "link": "https://stackoverflow.com/users/10828043/michael-bridges"}, "is_accepted": false, "score": 0, "last_activity_date": 1572471069, "creation_date": 1572471069, "answer_id": 58633913, "question_id": 58633789, "link": "https://stackoverflow.com/questions/58633789/why-nan-in-column-endtemp-is-not-replaced/58633913#58633913", "title": "Why NaN in column &quot;endtemp&quot; is not replaced?", "body": "<p>\"on\" is a value in the \"<strong>air</strong>\" column not the \"<strong>endtemp</strong>\" column. Using axis=1 will replace NaN in that column with non NaN values succeeding them in the same column.</p>\n\n<p>Therefore, since the endtemp column only contains numbers, the NaN's replaced in that column will be numbers.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user12282966"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1572471301, "creation_date": 1572470310, "last_edit_date": 1572471301, "question_id": 58633789, "link": "https://stackoverflow.com/questions/58633789/why-nan-in-column-endtemp-is-not-replaced", "title": "Why NaN in column &quot;endtemp&quot; is not replaced?", "body": "<pre><code>import matplotlib.pyplot as plt\nimport matplotlib.image as img\nimport pandas as pd\nimport numpy as np\nimport seaborn as sns\n%matplotlib inline\n\n\ndata = pd.read_csv('http://www.biointelligence.hu/ids/fuel_data_with_errors.txt', header=0, sep='\\t')\n\ndata.fillna(method=\"backfill\",axis = 1)\n</code></pre>\n\n<p>I don't understand why NaN (No.95 row) in <code>endtemp</code> is not replaced with \"on\".  (I know \"on\" is not a proper value for <code>endtemp</code>)</p>\n"}, {"tags": ["python", "pip", "virtualenv", "ubuntu-18.04"], "comments": [{"owner": {"reputation": 55797, "user_id": 7976758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/512cfbaf98d63ca4acd57b2df792aec6?s=128&d=identicon&r=PG", "display_name": "phd", "link": "https://stackoverflow.com/users/7976758/phd"}, "edited": false, "score": 3, "creation_date": 1572473743, "post_id": 58633776, "comment_id": 103575642, "body": "Do not use <code>sudo</code> with <code>pip install</code>! Do not use <code>sudo</code> with virtual environments!! <code>sudo pip install</code> runs <b>outside</b> of virtualenv!!!"}, {"owner": {"reputation": 264, "user_id": 6453877, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f2d77f47f35b191db9f1a542b5ef3bee?s=128&d=identicon&r=PG&f=1", "display_name": "user6453877", "link": "https://stackoverflow.com/users/6453877/user6453877"}, "reply_to_user": {"reputation": 55797, "user_id": 7976758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/512cfbaf98d63ca4acd57b2df792aec6?s=128&d=identicon&r=PG", "display_name": "phd", "link": "https://stackoverflow.com/users/7976758/phd"}, "edited": false, "score": 0, "creation_date": 1572962445, "post_id": 58633776, "comment_id": 103719140, "body": "Yes, that worked. I was not aware that sudo run outside of virtualenv. I used sudo with pip as I needed the privileges to write to the folder. I solved this by changing the folder location. I believe I also could have solved it by changing the restrictions on the folder."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1572962767, "post_id": 58633776, "comment_id": 103719295, "body": "There are probably ways to ensure <code>sudo</code> will use the virtual environment, but as long as you are creating a virtual environment, you may as well ensure you can access it without <code>sudo</code>."}], "answers": [{"tags": [], "owner": {"reputation": 264, "user_id": 6453877, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f2d77f47f35b191db9f1a542b5ef3bee?s=128&d=identicon&r=PG&f=1", "display_name": "user6453877", "link": "https://stackoverflow.com/users/6453877/user6453877"}, "is_accepted": true, "score": 0, "last_activity_date": 1572962575, "creation_date": 1572962575, "answer_id": 58713012, "question_id": 58633776, "link": "https://stackoverflow.com/questions/58633776/pip3-for-python3-in-virtual-environment-not-installing-package-according-to-path/58713012#58713012", "title": "Pip3 for Python3 in virtual environment not installing package according to path", "body": "<p>Solved by not using sudo. Sudo was used for access.</p>\n"}], "owner": {"reputation": 264, "user_id": 6453877, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f2d77f47f35b191db9f1a542b5ef3bee?s=128&d=identicon&r=PG&f=1", "display_name": "user6453877", "link": "https://stackoverflow.com/users/6453877/user6453877"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 141, "favorite_count": 0, "accepted_answer_id": 58713012, "answer_count": 1, "score": 0, "last_activity_date": 1572962575, "creation_date": 1572470262, "last_edit_date": 1572473772, "question_id": 58633776, "link": "https://stackoverflow.com/questions/58633776/pip3-for-python3-in-virtual-environment-not-installing-package-according-to-path", "title": "Pip3 for Python3 in virtual environment not installing package according to path", "body": "<p>I am trying to install packages in a Python3 virtual environment using pip3. Pip3 is pointing to the virtual environment when it is active. </p>\n\n<p>Packages will not install, since they are installed outside of the virtual environment, already satisfied outside of the virtual environment. </p>\n\n<p>How do I install packages in the virtual environment?</p>\n\n<p>And how can I be sure that I am actually using the interpreter inside the virtual environment? When pip3 is not acting according to the location returned by 'which', I do can not be sure that the python I am using in fact is the one from the virtual environment.</p>\n\n<pre><code>(venv_name) user_name@user_name-ubuntu:/mnt/ramdisk$ which python3\n/mnt/ramdisk/venv_name/bin/python3\n</code></pre>\n\n<hr>\n\n<pre><code>(venv_name) user_name@name-ubuntu:/mnt/ramdisk$ which pip3\n/mnt/ramdisk/venv_name/bin/pip3\n</code></pre>\n\n<hr>\n\n<pre><code>(venv_name) user_name@name-ubuntu:/mnt/ramdisk$ sudo pip3 install pandas\nRequirement already satisfied: pandas in /usr/local/lib/python3.6/dist-packages ...\n</code></pre>\n\n<hr>\n\n<pre><code>(venv_name) user_name@name-ubuntu:/mnt/ramdisk$ python3\nPython 3.7.5 (default, Oct 15 2019, 22:40:07) \n[GCC 7.4.0] on linux\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; \n</code></pre>\n\n<hr>\n\n<pre><code>&gt;&gt;&gt; import pandas\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nModuleNotFoundError: No module named 'pandas'\n</code></pre>\n\n<p>OS: UBUNTU 18.04</p>\n"}, {"tags": ["python", "esri", "arcpy"], "answers": [{"tags": [], "owner": {"reputation": 331, "user_id": 3245251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb707c8463a8c2a5d936c9b10699c40a?s=128&d=identicon&r=PG&f=1", "display_name": "Zipper1365", "link": "https://stackoverflow.com/users/3245251/zipper1365"}, "is_accepted": true, "score": 0, "last_activity_date": 1572529951, "creation_date": 1572529951, "answer_id": 58644830, "question_id": 58633733, "link": "https://stackoverflow.com/questions/58633733/arcpy-fails-to-field-calculate-integer-source-value-to-long-field/58644830#58644830", "title": "Arcpy fails to field calculate integer source value to LONG field", "body": "<p>The problem appears to have been in how the selection query was parsed and executed. For one of the field types, it returned a an empty selection, so there were no trace flags generated from which to perform the upstream trace selection. this returned an empty trace result so there were no record into which to calculate the ID.</p>\n\n<p>adding a test for the source field type appears to have solved the problem.</p>\n\n<p><strong>I am positive that there are more efficient and cleaner way to write this</strong>, but the updated code below DOES appear to perform the desired results in both cases ( source field is TEXT or source field is LONG) so it's an adequate fix for my purposes.</p>\n\n<pre><code>cursor = arcpy.SearchCursor(traceflag)\n\nfields = arcpy.ListFields(traceflag)\nfor field in fields:\n    if field.name == flagname and field.type == 'String':\n        typeIsString = \"True\"\n    elif field.name == flagname and not field.type == 'String':\n        typeIsString = \"False\"\n\n\nfor row in cursor:\n    if typeIsString == \"True\":\n        ID = str((row.getValue(str(flagname))))\n    elif typeIsString == \"False\":\n        ID = int((row.getValue(str((flagname)))))\nwhereclause = (flagname + ' = ' + `ID`)\nfc=str(r\"outfalls_lyr\")\narcpy.MakeFeatureLayer_management(traceflag, fc)\n\ntry:\n    arcpy.SelectLayerByAttribute_management(fc, \"NEW_SELECTION\",str(whereclause))\n    arcpy.MakeFeatureLayer_management( fc,r\"in_memory\\temp_of\")\n    arcpy.TraceGeometricNetwork_management(geomnet, r\"in_memory\\outNet\",r\"in_memory\\temp_of\" , \"TRACE_UPSTREAM\", \"\", \"\", \"\",\"\", \"\", \"NO_TRACE_ENDS\", \"NO_TRACE_INDETERMINATE_FLOW\", \"\", \"\", \"AS_IS\", \"\", \"\", \"\", \"AS_IS\")\n    for layer in arcpy.mapping.Layer(r\"in_memory\\outNet\"):\n        try:\n            print arcpy.mapping.ListLayers(layer)\n            calc = str('\"%s\"' %ID)\n            arcpy.CalculateField_management(layer, fieldname, ID, \"PYTHON\", \"\")\n        except:\n            print arcpy.GetMessages()\n</code></pre>\n"}], "owner": {"reputation": 331, "user_id": 3245251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb707c8463a8c2a5d936c9b10699c40a?s=128&d=identicon&r=PG&f=1", "display_name": "Zipper1365", "link": "https://stackoverflow.com/users/3245251/zipper1365"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "accepted_answer_id": 58644830, "answer_count": 1, "score": -1, "last_activity_date": 1572529951, "creation_date": 1572470020, "question_id": 58633733, "link": "https://stackoverflow.com/questions/58633733/arcpy-fails-to-field-calculate-integer-source-value-to-long-field", "title": "Arcpy fails to field calculate integer source value to LONG field", "body": "<p>I am working on a script that iterates through the records of \"feature class A\", performs a spatial selection (flow tracing) with each individual \"A\" record on \"feature class B\"  and then field calculates an attribute from \"A\" into the resulting selected records in \"B\"</p>\n\n<p>Basically for each downstream-most node on a sewer pipe network, trace upstream and assign the ID of that downstream node to all upstream features.</p>\n\n<p>The attribute value will always be a whole number, but sometimes field in A is formatted as text and sometimes as a number.</p>\n\n<p><strong>I can successfully perform this calulation if:</strong></p>\n\n<p>A is formatted as TEXT </p>\n\n<p>and</p>\n\n<p>B is formatted as LONG</p>\n\n<p><strong>the operation fails to calculate anything if:</strong></p>\n\n<p>A is formatted as LONG</p>\n\n<p>and </p>\n\n<p>B is Formatted as LONG</p>\n\n<p><strong><em>What am I missing  so that this will work for both potential input cases if the ID for A is either text whole number or an integer whole number format?</em></strong></p>\n\n<pre><code>...\nfor row in cursor:\nID = (str(row.getValue(str(flagname))))\nwhereclause = ((str(flagname)) +str(' = ') + \"'%s'\" %ID)\nfc=str(r\"outfalls_lyr\")\narcpy.MakeFeatureLayer_management(traceflag, fc)\n\ntry:\n    arcpy.SelectLayerByAttribute_management(fc, \"NEW_SELECTION\",str(whereclause))\n    arcpy.MakeFeatureLayer_management( fc,r\"in_memory\\temp_of\")\n    arcpy.TraceGeometricNetwork_management(geomnet, r\"in_memory\\outNet\",r\"in_memory\\temp_of\" , \"TRACE_UPSTREAM\", \"\", \"\", \"\",\"\", \"\", \"NO_TRACE_ENDS\", \"NO_TRACE_INDETERMINATE_FLOW\", \"\", \"\", \"AS_IS\", \"\", \"\", \"\", \"AS_IS\")\n    for layer in arcpy.mapping.Layer(r\"in_memory\\outNet\"):\n        try:\n            print arcpy.mapping.ListLayers(layer)\n            calc = str('\"%s\"' %ID)\n            arcpy.CalculateField_management (layer, fieldname, calc,\"\",\"\")\n        except:\n            print arcpy.GetMessages()\n\nexcept:\n    print arcpy.GetMessages()\n</code></pre>\n\n<p>Cross-posted to GIS Stack Exchange, too.</p>\n"}, {"tags": ["python", "python-3.x", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 141, "user_id": 10828043, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wfd_6NOgEbQ/AAAAAAAAAAI/AAAAAAAABnM/Tmfpa4GqIlM/photo.jpg?sz=128", "display_name": "Michael Bridges", "link": "https://stackoverflow.com/users/10828043/michael-bridges"}, "is_accepted": true, "score": 6, "last_activity_date": 1572471342, "last_edit_date": 1572471342, "creation_date": 1572470426, "answer_id": 58633808, "question_id": 58633723, "link": "https://stackoverflow.com/questions/58633723/set-multiple-column-values-to-nan-based-on-condition/58633808#58633808", "title": "set multiple column values to NaN based on condition", "body": "<p>You can try df.loc found here: <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.loc.html\" rel=\"noreferrer\">https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.loc.html</a>.</p>\n\n<p>This way you can state a condition to select the rows, and a list of columns that you want to apply the change to.</p>\n\n<p>Using the constant NaN from numpy: <a href=\"https://docs.scipy.org/doc/numpy/reference/constants.html?highlight=nan#numpy.nan\" rel=\"noreferrer\">https://docs.scipy.org/doc/numpy/reference/constants.html?highlight=nan#numpy.nan</a>.</p>\n\n<pre><code>df.loc[df['col3']&lt;30,['col2','col3']] = np.nan\n</code></pre>\n\n<p>The resulting df will be. </p>\n\n<pre><code>  col1  col2  col3\n0    a   NaN   NaN\n1    b   NaN   NaN\n2    c   3.0  30.0\n3    d   4.0  40.0\n4    e   5.0  50.0\n</code></pre>\n"}], "owner": {"reputation": 169, "user_id": 11322052, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zKoOj.jpg?s=128&g=1", "display_name": "nebulousman", "link": "https://stackoverflow.com/users/11322052/nebulousman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2407, "favorite_count": 1, "accepted_answer_id": 58633808, "answer_count": 1, "score": 4, "last_activity_date": 1572471342, "creation_date": 1572469975, "question_id": 58633723, "link": "https://stackoverflow.com/questions/58633723/set-multiple-column-values-to-nan-based-on-condition", "title": "set multiple column values to NaN based on condition", "body": "<p>I'm trying to set values in 2 columns of my dataframe to null based on condition applied to one of the columns.</p>\n\n<p>I know how to set the value of 1 column to null based on condition. I do that in the following example with col3. My question is how can I also set the value in col2 of the same row to null?</p>\n\n<pre><code>df = pd.DataFrame([['a',1, 10],\n                   ['b',2, 20],\n                   ['c',3, 30],\n                   ['d',4, 40],\n                   ['e',5, 50]], columns=['col1','col2','col3'])\n\ndf\nOut[121]: \n  col1  col2  col3\n0    a     1    10\n1    b     2    20\n2    c     3    30\n3    d     4    40\n4    e     5    50\n\ndf['col3'].mask(df['col3']&lt;30,inplace=True)\n\ndf\nOut[123]: \n  col1  col2  col3\n0    a     1   NaN\n1    b     2   NaN\n2    c     3  30.0\n3    d     4  40.0\n4    e     5  50.0\n</code></pre>\n\n<p>Tried the following and it doesn't work</p>\n\n<pre><code>df['col2','col3'].mask(df['col3']&lt;30,inplace=True)\n</code></pre>\n\n<p>My desired output is</p>\n\n<pre><code>  col1  col2  col3\n0    a   NaN   NaN\n1    b   NaN   NaN\n2    c     3  30.0\n3    d     4  40.0\n4    e     5  50.0\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "list"], "comments": [{"owner": {"reputation": 2454, "user_id": 8784938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/753bb55c80a644f950a41ae11cfbe48c?s=128&d=identicon&r=PG&f=1", "display_name": "SuperStew", "link": "https://stackoverflow.com/users/8784938/superstew"}, "edited": false, "score": 3, "creation_date": 1572469866, "post_id": 58633685, "comment_id": 103574375, "body": "don&#39;t delete stuff from a list you are iterating over, just don&#39;t, it&#39;s not worth the headaches"}, {"owner": {"reputation": 26796, "user_id": 4834, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/6a04e124482c3750617f8dacde3388ce?s=128&d=identicon&r=PG", "display_name": "quamrana", "link": "https://stackoverflow.com/users/4834/quamrana"}, "edited": false, "score": 0, "creation_date": 1572469960, "post_id": 58633685, "comment_id": 103574401, "body": "It looks like you want to move some items from <code>myList</code> to <code>newList</code>. You would be better off making two new lists."}], "answers": [{"tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": false, "score": 1, "last_activity_date": 1572470425, "creation_date": 1572470425, "answer_id": 58633807, "question_id": 58633685, "link": "https://stackoverflow.com/questions/58633685/why-do-indexes-go-out-of-range-when-deleting-items-in-a-list-while-iterating/58633807#58633807", "title": "Why Do Indexes Go out of Range When Deleting Items in a List While Iterating?", "body": "<blockquote>\n  <p>Is this occurring because the range that the loop must go through is now longer than the list itself?</p>\n</blockquote>\n\n<p>Yes. Your loop only gets the length of the list once, when the loop starts. If the list initially has 10 elements, you'll loop from <code>0</code> to <code>9</code>. If you delete an element from the list, the last index will be lower than <code>9</code>, but the loop will still go all the way to <code>9</code> and you'll try to access nonexistent list indexes.</p>\n\n<p>You can solve the problem by iterating in reverse.</p>\n\n<pre><code>for item in range(len(myList), 0, -1):\n    if (insert condition):\n        newList.append(myList[item])\n        del(myList[item])\n</code></pre>\n\n<p>This works because removing an element doesn't affect the elements with lower indexes.</p>\n"}, {"tags": [], "owner": {"reputation": 26796, "user_id": 4834, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/6a04e124482c3750617f8dacde3388ce?s=128&d=identicon&r=PG", "display_name": "quamrana", "link": "https://stackoverflow.com/users/4834/quamrana"}, "is_accepted": false, "score": 0, "last_activity_date": 1572470614, "creation_date": 1572470614, "answer_id": 58633839, "question_id": 58633685, "link": "https://stackoverflow.com/questions/58633685/why-do-indexes-go-out-of-range-when-deleting-items-in-a-list-while-iterating/58633839#58633839", "title": "Why Do Indexes Go out of Range When Deleting Items in a List While Iterating?", "body": "<p>You can make two new lists like this:</p>\n\n<pre><code>newList = [item for item in myList if (Insert Condition)]\nnewMyList = [item for item in myList if not (Insert Condition)]\n</code></pre>\n\n<p>If necessary, you can conclude with:</p>\n\n<pre><code>myList = newMyList\n</code></pre>\n\n<p>which will drop the original list.</p>\n"}], "owner": {"reputation": 21, "user_id": 12150424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa33aa6b76d6f799d7dc0b5219506ff1?s=128&d=identicon&r=PG&f=1", "display_name": "XXXavierXXX", "link": "https://stackoverflow.com/users/12150424/xxxavierxxx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "closed_date": 1572470667, "answer_count": 2, "score": 1, "last_activity_date": 1572470614, "creation_date": 1572469745, "question_id": 58633685, "link": "https://stackoverflow.com/questions/58633685/why-do-indexes-go-out-of-range-when-deleting-items-in-a-list-while-iterating", "closed_reason": "Duplicate", "title": "Why Do Indexes Go out of Range When Deleting Items in a List While Iterating?", "body": "<p>I am writing a piece of code that goes through a list and if the item meets a certain criteria, it is added to a different list and deleted from the current list. For example:</p>\n\n<pre><code>for item in range(len(myList)):\n    if (Insert Condition):\n        newList.append(item)\n        del(myList[item])\n</code></pre>\n\n<p>When I do this, I receive a '<em>list assignment index out of range</em>' error.</p>\n\n<p>Is this occurring because the range that the loop must go through is now longer than the list itself?</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 5, "creation_date": 1572469996, "post_id": 58633653, "comment_id": 103574416, "body": "<code>[]</code> is not a function, you aren&#39;t passing arguments to it. It is part of a list-literal, and even if it were a function, it works differently than <code>list</code>. <code>[]</code> is <b>not</b> and implicit call to <code>list</code>."}], "answers": [{"tags": [], "owner": {"reputation": 15430, "user_id": 4518341, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eVuAv.png?s=128&g=1", "display_name": "wjandrea", "link": "https://stackoverflow.com/users/4518341/wjandrea"}, "is_accepted": true, "score": 3, "last_activity_date": 1572470973, "creation_date": 1572470973, "answer_id": 58633897, "question_id": 58633653, "link": "https://stackoverflow.com/questions/58633653/why-can-we-explicitly-call-list-with-only-one-argument-but-can-pass-multiple/58633897#58633897", "title": "Why can we explicitly call list() with only one argument, but can pass multiple arguments to []?", "body": "<p>Brackets enclose a <a href=\"https://docs.python.org/3/reference/expressions.html#list-displays\" rel=\"nofollow noreferrer\">list display</a> (AKA list literal), and there is no implicit call to <code>list()</code>.</p>\n\n<ul>\n<li>Related: <a href=\"https://stackoverflow.com/q/30216000/4518341\">Why is [] faster than list()?</a></li>\n</ul>\n\n<p><a href=\"https://docs.python.org/3/library/stdtypes.html#list\" rel=\"nofollow noreferrer\"><code>list()</code></a> takes only one argument because it expects an <a href=\"https://docs.python.org/3/glossary.html#term-iterable\" rel=\"nofollow noreferrer\">iterable</a>. For example in <code>list('foo')</code>, the output is <code>['f', 'o', 'o']</code>, not <code>['foo']</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 573, "user_id": 3911355, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac5a661e8c2c34e2e0b0fa6c57bfd513?s=128&d=identicon&r=PG", "display_name": "mgrollins", "link": "https://stackoverflow.com/users/3911355/mgrollins"}, "is_accepted": false, "score": 0, "last_activity_date": 1572471639, "creation_date": 1572471639, "answer_id": 58634033, "question_id": 58633653, "link": "https://stackoverflow.com/questions/58633653/why-can-we-explicitly-call-list-with-only-one-argument-but-can-pass-multiple/58634033#58634033", "title": "Why can we explicitly call list() with only one argument, but can pass multiple arguments to []?", "body": "<p>The <code>list</code> constructor is designed for two cases: to only accept an empty argument and return a new empty list, or to accept an <code>iterable</code> that will be expanded into a list of the separate items within the iterable.</p>\n\n<p>A single string is an iterable, but two strings separated by a comma is not, so:</p>\n\n<pre><code>&gt;&gt;&gt; list('foo')\n['f', 'o', 'o']\n\n&gt;&gt;&gt; help(list)\nHelp on class list in module builtins:\n\nclass list(object)\n |  list() -&gt; new empty list\n |  list(iterable) -&gt; new list initialized from iterable's items\n |\n |  Methods defined here:\n...\n</code></pre>\n"}], "owner": {"reputation": 309, "user_id": 10286430, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/114b33f975d8085f01e665d5b9d49cbe?s=128&d=identicon&r=PG&f=1", "display_name": "HelpfulHound", "link": "https://stackoverflow.com/users/10286430/helpfulhound"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "accepted_answer_id": 58633897, "answer_count": 2, "score": 1, "last_activity_date": 1572471639, "creation_date": 1572469577, "last_edit_date": 1572470085, "question_id": 58633653, "link": "https://stackoverflow.com/questions/58633653/why-can-we-explicitly-call-list-with-only-one-argument-but-can-pass-multiple", "title": "Why can we explicitly call list() with only one argument, but can pass multiple arguments to []?", "body": "<p>When creating lists in python, the two easy methods are <code>list(arg)</code> and <code>[args]</code>. However, only one of these allows multiple arguments, even though both result in an object of type <code>list</code>. Example:</p>\n\n<pre><code>&gt;&gt;&gt; a=list('foo')\n&gt;&gt;&gt; type(a)\n&lt;class 'list'&gt;\n&gt;&gt;&gt; a=list('foo','bar')\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nTypeError: list() takes at most 1 argument (2 given)\n&gt;&gt;&gt; a=['foo','bar']\n&gt;&gt;&gt; a\n['foo', 'bar']\n&gt;&gt;&gt; type(a)\n&lt;class 'list'&gt;\n</code></pre>\n\n<p>Why is only the implicit call to <code>list()</code> via brackets valid?</p>\n"}, {"tags": ["python", "pandas", "fuzzy-search"], "comments": [{"owner": {"reputation": 1628, "user_id": 6564620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/361a9c55ef4d6a796de44ca26d883328?s=128&d=identicon&r=PG&f=1", "display_name": "maow", "link": "https://stackoverflow.com/users/6564620/maow"}, "edited": false, "score": 1, "creation_date": 1572518042, "post_id": 58633634, "comment_id": 103588330, "body": "The thing you are trying to do is called entity resolution. There are tools like dedupe available which might be a better fit for your problem. I can recommend <a href=\"https://medium.com/district-data-labs/basics-of-entity-resolution-with-python-and-dedupe-bc87440b64d4\" rel=\"nofollow noreferrer\">medium.com/district-data-labs/&hellip;</a> for an introduction. It is a bit more sophisticated than a simple partial ratio."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5753581"}, "reply_to_user": {"reputation": 1628, "user_id": 6564620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/361a9c55ef4d6a796de44ca26d883328?s=128&d=identicon&r=PG&f=1", "display_name": "maow", "link": "https://stackoverflow.com/users/6564620/maow"}, "edited": false, "score": 0, "creation_date": 1572522216, "post_id": 58633634, "comment_id": 103590554, "body": "@maow could you provide an example as going onto this page explores how to match against 2 data sets rather than an individual column"}], "owner": {"user_type": "does_not_exist", "display_name": "user5753581"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 216, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1572516580, "creation_date": 1572469498, "last_edit_date": 1572516580, "question_id": 58633634, "link": "https://stackoverflow.com/questions/58633634/using-fuzzymatching-algorithm-to-determine-whether-there-are-similar-words-in-na", "title": "Using FuzzyMatching Algorithm to determine whether there are similar words in Name column", "body": "<p>I am currently having a problem of working out how to use the FuzzyWuzzy package where it identifies the 'Name' column and determines whether a similar there are similar Names. I have also transposed this document as this is the format required for a project I am creating about the GMPP data. Any help would be greatly appreciated :) </p>\n\n<p>The current process is placed into a data frame as I thought this would be the easiest way to go about this problem. I have tried solving straight from a CSV file also but no luck. I have also tried splitting the data into two and comparing but if the data was to be dynamic this would not achieve the objective I was trying to reach in which this process can run if further data is added.</p>\n\n<blockquote>\n  <p><a href=\"https://drive.google.com/open?id=1Aq_2NTfjRtf9b3L5hNHilctVQfcHynPD\" rel=\"nofollow noreferrer\">https://drive.google.com/open?id=1Aq_2NTfjRtf9b3L5hNHilctVQfcHynPD</a>\n  This link has the data file and code I used</p>\n</blockquote>\n\n<pre><code> import pandas as pd\n import numpy as np\n #Fuzzywuzzy used for string matching\n from fuzzywuzzy import fuzz \n from fuzzywuzzy import process \n\n#Reading Data in and creating DB\ndata = pd.read_csv(\"data(2).csv\", encoding=\"ISO-8859-1\")\nprint(data.head)\ndata = data.sort_values('Name')\nprint(data.head)\n\ndf = pd.read_csv(\"data(2).csv\")\n\norg_list = data['Name']\n\nthreshold = 1300\n\ndef find_match(x):\n\n #fuzz.partial_token_sort_ratio attempts to account for similar strings out \nof order\n   match = process.extract(x, org_list, limit=2, \n   scorer=fuzz.partial_token_sort_ratio)[1]\n   match = match if match[1]&gt;threshold else np.nan\n   return match\n\ndf['match found'] = [find_match(row) for row in df['Name']]\n\nprint(df)\n#Transposing CSV\ntransposed_data = data.T\ntransposed_df = df.T\ntransposed_df.to_csv(r'Desktop\\Transposed_Data(1).csv')\ntransposed_data.to_csv(r'Desktop\\Transposed_Data.csv')\n</code></pre>\n\n<p>An example of what I am trying to achieve is if a project name is called HRMC programme and another The HRMC Project I would like it to identify they are similar and put it next to each other and remove the redundant the to keep the same alphabetical format</p>\n\n<p>I have also tried using term frequency-inverse document freqeuncy (TF-IDF) and was able to have some output of names but it doesn't have the full key information. It does however remove 'the' and other redundant information so would this be a way going forward?</p>\n\n<pre><code>import pandas as pd\nimport numpy as np\n#Fuzzywuzzy used for string matching\nfrom fuzzywuzzy import fuzz \nfrom fuzzywuzzy import process\nfrom sklearn.feature_extraction.text import TfidfVectorizer\n\n#Reading Data in and creating DB\ndata = pd.read_csv(\"data(2).csv\", encoding=\"ISO-8859-1\")\n#Alphabetical Order\ndata = data.sort_values('Name')\n\n#Using term frequency\u2013inverse document frequency (TF-IDF)\n#Converts raw document into a matrix of TF-IDF features\nvectorizer = TfidfVectorizer()\n#Collection of text in column Name being gathered\ncorpus  = data['Name'].values\n#Counts how many times each word existed in data set\nvectorizer.fit_transform(corpus)\n#Prints the selected column Names\nprint(vectorizer.get_feature_names())\n\ndef ChunkIterator(filename):\n#The number of rows to be read into a dataframe at a single time to fit \ninto local memory\nfor chunk in pd.read_csv('data(2).csv'):\n    for document in chunk['Name'].values:\n        yield document\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 2454, "user_id": 8784938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/753bb55c80a644f950a41ae11cfbe48c?s=128&d=identicon&r=PG&f=1", "display_name": "SuperStew", "link": "https://stackoverflow.com/users/8784938/superstew"}, "edited": false, "score": 4, "creation_date": 1572469670, "post_id": 58633612, "comment_id": 103574309, "body": "i&#39;m not sure what you&#39;re asking, but don&#39;t call a dict <code>dict</code>"}, {"owner": {"reputation": 668, "user_id": 9704615, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/txhOn.png?s=128&g=1", "display_name": "BenedictWilkinsAI", "link": "https://stackoverflow.com/users/9704615/benedictwilkinsai"}, "edited": false, "score": 1, "creation_date": 1572469688, "post_id": 58633612, "comment_id": 103574319, "body": "Define the dictionary inside your <code>inputStudentData</code> function. The data is being overwritten because the dictionary is in global scope."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1572470156, "post_id": 58633612, "comment_id": 103574476, "body": "Because you keep appending the <b>same</b> dictionary to your list, because your function, <code>inputStudentData</code>, always returns <b>the same dictionary</b>. <code>dict = student</code> <b>does not create a copy</b>."}], "answers": [{"comments": [{"owner": {"reputation": 83, "user_id": 10351382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ee719549dd0bd9d1a653a1629645ff1?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Huang", "link": "https://stackoverflow.com/users/10351382/jack-huang"}, "edited": false, "score": 0, "creation_date": 1572470002, "post_id": 58633696, "comment_id": 103574419, "body": "I know how to derive my desired output. But still want to know the reason to this outcome."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "reply_to_user": {"reputation": 83, "user_id": 10351382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ee719549dd0bd9d1a653a1629645ff1?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Huang", "link": "https://stackoverflow.com/users/10351382/jack-huang"}, "edited": false, "score": 1, "creation_date": 1572470169, "post_id": 58633696, "comment_id": 103574477, "body": "@Hua-MingHuang because <b>you are appending the same list</b>"}, {"owner": {"reputation": 6489, "user_id": 5086255, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XiEYC.jpg?s=128&g=1", "display_name": "sahasrara62", "link": "https://stackoverflow.com/users/5086255/sahasrara62"}, "reply_to_user": {"reputation": 83, "user_id": 10351382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ee719549dd0bd9d1a653a1629645ff1?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Huang", "link": "https://stackoverflow.com/users/10351382/jack-huang"}, "edited": false, "score": 0, "creation_date": 1572473222, "post_id": 58633696, "comment_id": 103575487, "body": "@Hua-MingHuang i updated the solution and provided the reason"}], "tags": [], "owner": {"reputation": 6489, "user_id": 5086255, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XiEYC.jpg?s=128&g=1", "display_name": "sahasrara62", "link": "https://stackoverflow.com/users/5086255/sahasrara62"}, "is_accepted": false, "score": 2, "last_activity_date": 1572473195, "last_edit_date": 1572473195, "creation_date": 1572469783, "answer_id": 58633696, "question_id": 58633612, "link": "https://stackoverflow.com/questions/58633612/how-to-solve-the-side-effects-probably-caused-by-list-append/58633696#58633696", "title": "How to solve the side effects probably caused by list.append()?", "body": "<p>you need to use use <code>dict = student.copy()</code> to get the desired output</p>\n\n<p>why this program behaving like this ?</p>\n\n<p>because you have created a global dictionary student and and in each loop when you call the function and give input, the function take the global dict student  and add value to it and in list.append reference to this dict object is added.</p>\n\n<p>in second loop when you add new data, this global dict got updated and reference to this dict object is added to the list.</p>\n\n<p>so when printing the list, in print function when the iterator in the list goes to the element to print, element points to the value at student dictionary memory location but now at student memory location values are of that last loop. so  for each element same dict object is used, and which is updated for each loop, and it's reference is stored in list. and since each element has same dict object and reference to same mem location you are getting all the value as same.</p>\n\n<p>how to solve this ?</p>\n\n<p>you need to create a shallow copy or deep copy of the dictionary object</p>\n"}, {"comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1572470201, "post_id": 58633739, "comment_id": 103574485, "body": "&quot;And since dictionary in python are mutable you are appending same instance of dict each time.&quot; <b>completely</b> irrelevant to the semantics here, even if you were appending immutable objects, it would still be the same instance."}, {"owner": {"reputation": 2967, "user_id": 4828815, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/--CqgH2V98Jg/AAAAAAAAAAI/AAAAAAAAABY/lilOgpMEIEs/photo.jpg?sz=128", "display_name": "Poojan", "link": "https://stackoverflow.com/users/4828815/poojan"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1572470300, "post_id": 58633739, "comment_id": 103574523, "body": "@juanpa.arrivillaga i dont think so. Change that dict with something like <code>int</code> or <code>str</code>"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1572470355, "post_id": 58633739, "comment_id": 103574541, "body": "Of course it does. Python semantics don&#39;t change basd on the <i>type</i> of the objects. &quot;immutable&quot; objects <b>simply lack mutator methods</b> (and indeed, <i>can</i> be mutated if you are willing to dig into the python internals, using <code>ctypes</code> for example). And yes, try this with, say, a <code>frozenset</code>, which is an immutable type: <code>x = frozenset([&#39;a&#39;]); lst = []; list.append(x); list.append(x); print([id(i) for i in lst])</code>"}], "tags": [], "owner": {"reputation": 2967, "user_id": 4828815, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/--CqgH2V98Jg/AAAAAAAAAAI/AAAAAAAAABY/lilOgpMEIEs/photo.jpg?sz=128", "display_name": "Poojan", "link": "https://stackoverflow.com/users/4828815/poojan"}, "is_accepted": false, "score": 3, "last_activity_date": 1572480751, "last_edit_date": 1572480751, "creation_date": 1572470057, "answer_id": 58633739, "question_id": 58633612, "link": "https://stackoverflow.com/questions/58633612/how-to-solve-the-side-effects-probably-caused-by-list-append/58633739#58633739", "title": "How to solve the side effects probably caused by list.append()?", "body": "<ul>\n<li>you are overwriting <code>student</code> each time you call the function. And in each loop you are appending same instance each time.</li>\n<li>Just look this for an example.</li>\n</ul>\n\n<pre class=\"lang-py prettyprint-override\"><code>l = []\nd = {'a':0,'b':1}\nl.append(d)\nd['a'] = 100\nl.append(d)\nd['b'] = 200\nl.append(d)\nprint(l)\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>[{'a': 100, 'b': 200}, {'a': 100, 'b': 200}, {'a': 100, 'b': 200}]\n</code></pre>\n\n<ul>\n<li>so you either need to use <code>copy</code> or declare your dictionary inside function.   </li>\n</ul>\n\n<p><strong>PS:</strong> Please dont use keywords as variable name. You will run into problems that will haunt you at night. :D</p>\n"}], "owner": {"reputation": 83, "user_id": 10351382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ee719549dd0bd9d1a653a1629645ff1?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Huang", "link": "https://stackoverflow.com/users/10351382/jack-huang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 146, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1572480751, "creation_date": 1572469396, "last_edit_date": 1572470791, "question_id": 58633612, "link": "https://stackoverflow.com/questions/58633612/how-to-solve-the-side-effects-probably-caused-by-list-append", "title": "How to solve the side effects probably caused by list.append()?", "body": "<p>I am writing a program that ask the user to input students info. to a dictionary, and append each student's info. to a list as below. But the result showed that all the previous data appended are overloaded by the last data.   </p>\n\n<p>I can't figure out how the internal operation works in the list. What factor leads the previous data to be overloaded? </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>student = {\"first_name\": 0,\"last_name\": 0,\"matriculation_number\": 0,\n           \"course\": 0,\"university\": 0}\nstudent_list = []\n\ndef inputStudentData(num):\n    dict = student\n    for key in dict.keys():\n        msg = \"Enter no.\" + str(num) +\" student's \" + key + \": \"\n        data = input(msg)\n        dict[key] = data\n    return dict\n\ndef printStudentData(a):\n    for i in a:\n        print(i)\n\nN = int(input(\"Enter numbers of students: \"))\nfor i in range(1,N+1):\n    student_list.append(inputStudentData(i))\n\nprintStudentData(student_list)\n</code></pre>\n\n<p>the result is:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Enter numbers of students: 2\nEnter no.1 student's first_name: 11\nEnter no.1 student's last_name: 1\nEnter no.1 student's matriculation_number: 1\nEnter no.1 student's course: 1\nEnter no.1 student's university: 1\nEnter no.2 student's first_name: 2\nEnter no.2 student's last_name: 2\nEnter no.2 student's matriculation_number: 2\nEnter no.2 student's course: 2\nEnter no.2 student's university: 2\n{'first_name': '2', 'last_name': '2', 'matriculation_number': '2', 'course': '2', 'university': '2'}\n{'first_name': '2', 'last_name': '2', 'matriculation_number': '2', 'course': '2', 'university': '2'}\n</code></pre>\n"}, {"tags": ["python", "c", "ctypes", "python-embedding"], "answers": [{"comments": [{"owner": {"reputation": 91, "user_id": 4243460, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ifPush5tI4o/AAAAAAAAAAI/AAAAAAAAABw/SNUb77E6g-U/photo.jpg?sz=128", "display_name": "Arnaud Loonstra", "link": "https://stackoverflow.com/users/4243460/arnaud-loonstra"}, "edited": false, "score": 0, "creation_date": 1572523933, "post_id": 58634269, "comment_id": 103591441, "body": "If I do <code>return byref(msg._as_parameter_)</code> I receive a NULL pointer. It messes things up, guess that&#39;s the GC?"}, {"owner": {"reputation": 61, "user_id": 4539104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02fb74c54978cd5f1a019c544a3749e8?s=128&d=identicon&r=PG", "display_name": "ersteller", "link": "https://stackoverflow.com/users/4539104/ersteller"}, "reply_to_user": {"reputation": 91, "user_id": 4243460, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ifPush5tI4o/AAAAAAAAAAI/AAAAAAAAABw/SNUb77E6g-U/photo.jpg?sz=128", "display_name": "Arnaud Loonstra", "link": "https://stackoverflow.com/users/4243460/arnaud-loonstra"}, "edited": false, "score": 0, "creation_date": 1572635775, "post_id": 58634269, "comment_id": 103632569, "body": "To prevent GC you need to keep a reference of the object in the python scope but i am not familiar with how memory is handled in python when it is embedded in another application. to be sure and if you have the possibillity you could just allocate it in c. ps: I could not find what that &#39;<i>as_parameter</i>&#39; does but I saw &#39;msg.c_address()&#39; is supposed to return the address in C. i would have to read some of the python docs myself. <a href=\"https://docs.python.org/3/c-api/index.html\" rel=\"nofollow noreferrer\">docs.python.org/3/c-api/index.html</a>"}], "tags": [], "owner": {"reputation": 61, "user_id": 4539104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02fb74c54978cd5f1a019c544a3749e8?s=128&d=identicon&r=PG", "display_name": "ersteller", "link": "https://stackoverflow.com/users/4539104/ersteller"}, "is_accepted": false, "score": 1, "last_activity_date": 1572473165, "creation_date": 1572473165, "answer_id": 58634269, "question_id": 58633540, "link": "https://stackoverflow.com/questions/58633540/return-a-ctypes-c-struct-back-to-c/58634269#58634269", "title": "Return a ctypes C struct back to C", "body": "<p>I would try using <code>return byref(msg)</code> and do some C casting and watch out for garbage-collection. But tbh I am usually calling c from a python process.</p>\n"}, {"tags": [], "owner": {"reputation": 91, "user_id": 4243460, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ifPush5tI4o/AAAAAAAAAAI/AAAAAAAAABw/SNUb77E6g-U/photo.jpg?sz=128", "display_name": "Arnaud Loonstra", "link": "https://stackoverflow.com/users/4243460/arnaud-loonstra"}, "is_accepted": false, "score": 1, "last_activity_date": 1579030427, "creation_date": 1579030427, "answer_id": 59740587, "question_id": 58633540, "link": "https://stackoverflow.com/questions/58633540/return-a-ctypes-c-struct-back-to-c/59740587#59740587", "title": "Return a ctypes C struct back to C", "body": "<p>I'm answering my own question as I was pointed by the python mailinglist to the fact that this question approaches it wrongly. It mixes both the ctypes API and the CPython API. Best is to use one approach. Since to embed Python you need the CPython API best is to use the CPython API to wrap to C methods. That way the when Python returns you'll endup with your own defined Python object in C and can access its internal structure. </p>\n\n<p><a href=\"https://docs.python.org/3/extending/newtypes_tutorial.html\" rel=\"nofollow noreferrer\">This tutorial</a> describes in detail how to wrap a C struct to a Python object.</p>\n"}], "owner": {"reputation": 91, "user_id": 4243460, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ifPush5tI4o/AAAAAAAAAAI/AAAAAAAAABw/SNUb77E6g-U/photo.jpg?sz=128", "display_name": "Arnaud Loonstra", "link": "https://stackoverflow.com/users/4243460/arnaud-loonstra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1579030427, "creation_date": 1572469030, "question_id": 58633540, "link": "https://stackoverflow.com/questions/58633540/return-a-ctypes-c-struct-back-to-c", "title": "Return a ctypes C struct back to C", "body": "<p>I'm trying to wrap my head around the ctypes API. I have a C structure (zmsg_t) I wish to create in Python and then return from Python to C.</p>\n\n<p>So a Python method is called from C and needs to return an object which we then process in C again.</p>\n\n<p>I have a binding to access and create the C methods and structures so in Python I can call the Zmsg() constructor. I now need to return this.</p>\n\n<p>My python test method is simply:</p>\n\n<pre><code>def actor_test(*args, **kwargs):\n    print(\"test\")\n    msg = Zmsg()\n    frame = Zframe(b\"Hello\", 5)\n    msg.prepend(frame)\n    return msg\n</code></pre>\n\n<p>the method is called from C as follows:</p>\n\n<p><code>PyObject *pReturn = PyObject_CallObject(pFunc, NULL);</code></p>\n\n<p>This correctly calls the method. However the returned object is of course a PyObject*. The debugger says it's</p>\n\n<pre><code>\"&lt;czmq._czmq_ctypes.Zmsg object at 0x7ffff5f18e50&gt;\"    PyObject\n            [class]    \"&lt;class 'czmq._czmq_ctypes.Zmsg'&gt;\"   \n            [super class]    \"&lt;class 'object'&gt;\"   \n            [meta type]    \"&lt;class 'type'&gt;\"   \n            ob_refcnt    1    Py_ssize_t\n</code></pre>\n\n<p>How I can I get it back to the original C type (zmsg_t *)</p>\n\n<p>Any help really appreciated.</p>\n\n<p>The ctypes definitions for Zmsg can be seen <a href=\"https://github.com/zeromq/czmq/blob/d6283985ba52fd8c3f8fbdc7cd5c08372ff69ca1/bindings/python/czmq/_czmq_ctypes.py#L4392\" rel=\"nofollow noreferrer\">here</a></p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 2358, "user_id": 2542091, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/67BL1.jpg?s=128&g=1", "display_name": "Aleksander Lidtke", "link": "https://stackoverflow.com/users/2542091/aleksander-lidtke"}, "edited": false, "score": 0, "creation_date": 1572469336, "post_id": 58633531, "comment_id": 103574176, "body": "Hi and welcome to SO! Why doesn&#39;t the code work, i.e. what happens and what would you like to happen? Do you get the same error in your full code or just the example that you&#39;ve posted? What have you tried to resolve this?"}], "answers": [{"tags": [], "owner": {"reputation": 825, "user_id": 9072201, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TkapE.jpg?s=128&g=1", "display_name": "Robert King", "link": "https://stackoverflow.com/users/9072201/robert-king"}, "is_accepted": true, "score": 0, "last_activity_date": 1572469754, "creation_date": 1572469754, "answer_id": 58633690, "question_id": 58633531, "link": "https://stackoverflow.com/questions/58633531/i-need-help-trying-to-find-a-different-value-in-a-list/58633690#58633690", "title": "I need help trying to find a different value in a list", "body": "<p>Not withstanding Ethan's comments above which would help us give better answers, it looks like the first part of your code could be made substantially simpler by using Python <a href=\"https://docs.python.org/3/tutorial/datastructures.html#sets\" rel=\"nofollow noreferrer\">sets</a> and testing membership of these. This is much faster and easier than iterating through the list manually.</p>\n\n<p>e.g.</p>\n\n<pre><code>#set with all the coordinates already used:\n&gt;&gt;&gt; s = {(1,1), (2,1), (3,4)}\n# test different coordinates for membership of s\n&gt;&gt;&gt; (1,1) in s\nTrue\n&gt;&gt;&gt; (4,5) in s\nFalse\n</code></pre>\n"}], "owner": {"reputation": 30, "user_id": 12299772, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-iDxe00L-_NY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcRIX_erp2GBq9HlenHIELsVPrFag/photo.jpg?sz=128", "display_name": "Ethan Culp", "link": "https://stackoverflow.com/users/12299772/ethan-culp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 58633690, "answer_count": 1, "score": 1, "last_activity_date": 1572469754, "creation_date": 1572468994, "last_edit_date": 1572469485, "question_id": 58633531, "link": "https://stackoverflow.com/questions/58633531/i-need-help-trying-to-find-a-different-value-in-a-list", "title": "I need help trying to find a different value in a list", "body": "<p>I am trying to make a maze generator, I am currently trying to spread out the objects evenly without having them overlap. I have already made a function that snaps the coords to a grid. The grid snap is 50 at the moment. What I am having trouble with is trying to make it so that I coords don't overlap. EX: If I already have an object at (100, 100), I dont want another object to go to (100, 100). If you would like the whole file, I can give it to you, but stack overflow wont allow that. The code included for some reason does not work, it really seams like it should though. </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>objectXLst = []\nobjectYLst = []\nobjectXYLst = [(1, 1)]\n\ndef check_list(listToCheck, valToCheck):\n        objectX = valToCheck[0]\n        objectY = valToCheck[1]\n        objectXY = valToCheck\n        for i in range(len(listToCheck)):\n            while listToCheck[i] == objectXY:\n                resultForCheck = True\n                objectX = divisible_random(0, screenWidth, gridSnapVal)\n                objectY = divisible_random(0, screenHeight, gridSnapVal)\n                objectXY = (objectX, objectY)\n                print(\"{}, {}, checking\".format((objectX, objectY), valToCheck), listToCheck[i])\n            else:\n                break\n        return objectX, objectY\nfor i in range(int((screenWidth*screenHeight)/gridSnapVal**2)):\n        index = 0\n        objectX = divisible_random(0, screenWidth, gridSnapVal)\n        objectY = divisible_random(0, screenHeight, gridSnapVal)\n        counter = 0\n        goThru = True\n        val = check_list(objectXYLst, (objectX, objectY))\n        objectX, objectY = check_list(objectXYLst, (objectX, objectY))\n        counter = 0\n        if remove1st is True:\n            objectXYLst.remove((1, 1))\n            remove1st = False\n        print(objectX, objectY)\n        objectXLst.append(objectX)\n        objectYLst.append(objectY)\n        objectXYLst.append((objectX, objectY))\n        gameObjectsList.append(gameObjects)\n</code></pre>\n"}, {"tags": ["python", "web-scraping", "beautifulsoup"], "answers": [{"comments": [{"owner": {"reputation": 314, "user_id": 2918044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c537db011ecc63e69898f43b0d60145?s=128&d=identicon&r=PG&f=1", "display_name": "parikhparth23", "link": "https://stackoverflow.com/users/2918044/parikhparth23"}, "edited": false, "score": 0, "creation_date": 1572472859, "post_id": 58634029, "comment_id": 103575368, "body": "Thank you Bertrand for your quick reply. API part is really helpful :)"}], "tags": [], "owner": {"reputation": 31636, "user_id": 2614364, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tQZrZ.jpg?s=128&g=1", "display_name": "Bertrand Martel", "link": "https://stackoverflow.com/users/2614364/bertrand-martel"}, "is_accepted": true, "score": 3, "last_activity_date": 1572471617, "creation_date": 1572471617, "answer_id": 58634029, "question_id": 58633524, "link": "https://stackoverflow.com/questions/58633524/not-able-to-scrape-data-which-is-not-visible-on-screen-but-is-part-of-the-slider/58634029#58634029", "title": "Not able to scrape data which is not visible on screen but is part of the slider/carousel", "body": "<p>The carousel is generated from Javascript using JSON data hardcoded in JS. Precisely, this JSON is introduced with :</p>\n\n<pre><code>window.__REDUX_STATE__= { ..... }\n</code></pre>\n\n<p>So presumably FYI, this site uses <a href=\"https://redux.js.org/\" rel=\"nofollow noreferrer\">redux</a> to manage the state of the app</p>\n\n<p>We can just extract this JSON with the following script : </p>\n\n<pre><code>import requests\nfrom bs4 import BeautifulSoup\nimport json\nimport pprint\n\nr = requests.get('https://yourstory.com/')\n\nprefix = \"window.__REDUX_STATE__=\"\nsoup = BeautifulSoup(r.content, \"html.parser\")\n\n#get the redux state (json)\ndata = [\n    json.loads(t.text[len(prefix):]) \n    for t in soup.find_all('script')\n    if \"__REDUX_STATE__\" in t.text\n]\n\n#get only the section with cardType == \"CarouselCard\"\ncarouselCards = [\n    t[\"data\"]\n    for t in data[0][\"home\"][\"sections\"]\n    if (\"cardType\" in t) and (t[\"cardType\"] == \"CarouselCard\")\n][0]\n\n#print all cards\npprint.pprint(carouselCards)\n\n#get the name, image path &amp; link path\nprint([\n    (t[\"title\"], t[\"path\"], t[\"metadata\"][\"thumbnail\"]) \n    for t in carouselCards\n])\n</code></pre>\n\n<p>The JSON has a <code>sections</code> array inside <code>home</code> field. This section object includes some object with a <code>cardType</code> with value <code>CarouselCard</code> where there is the data you are looking for</p>\n\n<p>Also, from the JSON, the Carousel section starts like this : </p>\n\n<pre><code>{\n    \"type\":\"content\",\n    \"dataAPI\":\"/api/v2/featured_stories?brand=yourstory&amp;key=CURATED_SET\",\n    \"dataAttribute\":\"featured\",\n    \"cardType\":\"CarouselCard\",\n    \"data\":[]\n}\n</code></pre>\n\n<p>So I suppose you could also just get the cards using the API : <a href=\"https://yourstory.com/api/v2/featured_stories?brand=yourstory&amp;key=CURATED_SET\" rel=\"nofollow noreferrer\">https://yourstory.com/api/v2/featured_stories?brand=yourstory&amp;key=CURATED_SET</a></p>\n\n<pre><code>import requests\n\nr = requests.get('https://yourstory.com/api/v2/featured_stories?brand=yourstory&amp;key=CURATED_SET')\n\n#get the name, image path &amp; link path\nprint([\n    (t[\"title\"], t[\"path\"], t[\"metadata\"][\"thumbnail\"]) \n    for t in r.json()[\"stories\"]\n])\n</code></pre>\n\n<p>which is more straightforward</p>\n"}], "owner": {"reputation": 314, "user_id": 2918044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c537db011ecc63e69898f43b0d60145?s=128&d=identicon&r=PG&f=1", "display_name": "parikhparth23", "link": "https://stackoverflow.com/users/2918044/parikhparth23"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 421, "favorite_count": 0, "accepted_answer_id": 58634029, "answer_count": 1, "score": 3, "last_activity_date": 1572471617, "creation_date": 1572468969, "last_edit_date": 1572469276, "question_id": 58633524, "link": "https://stackoverflow.com/questions/58633524/not-able-to-scrape-data-which-is-not-visible-on-screen-but-is-part-of-the-slider", "title": "Not able to scrape data which is not visible on screen but is part of the slider/carousel", "body": "<p>I am not able to scrape data on a website which is part of the slider/carousel. When i run my script it only scrapes only the first item from the slider/carousel. It does not go through all the pages inside that carousel.</p>\n\n<p>Website i am trying to scrape is: </p>\n\n<blockquote>\n  <p><a href=\"https://yourstory.com/\" rel=\"nofollow noreferrer\">www.yourstory.com</a></p>\n</blockquote>\n\n<p>My Python script:</p>\n\n<pre><code>soup = BeautifulSoup(response, 'html.parser')\ndivTag = soup.find_all(\"a\", class_=['sc-VigVT', 'eJWBx'])\n\nfor tag in divTag:\n    tdTags = tag.find_all(\"h3\", class_=['sc-jAaTju', 'iNsSAY'])\n\n    for tag in tdTags:\n        print(tag.text)\n</code></pre>\n\n<p>Output:</p>\n\n<blockquote>\n  <p>Kunal Bahl and Rohit Bansal reveal the inside story of the Snapdeal turnaround</p>\n</blockquote>\n\n<p>There are 7 carousel items but i can get only the first one. I cannot get the data from 2nd - 7th pages in carousel/slider.</p>\n\n<p>Please check the below image on what i am referring to (red cirlce):</p>\n\n<p><a href=\"https://i.stack.imgur.com/AJgOp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AJgOp.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "c++", "shared-ptr", "swig"], "comments": [{"owner": {"reputation": 81653, "user_id": 168175, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/qxeUf.jpg?s=128&g=1", "display_name": "Flexo", "link": "https://stackoverflow.com/users/168175/flexo"}, "edited": false, "score": 0, "creation_date": 1572475464, "post_id": 58633514, "comment_id": 103576112, "body": "Did you meant to do <code>%include &quot;aiCamera.h&quot;</code> instead perhaps?"}, {"owner": {"reputation": 1304, "user_id": 1927753, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/0f9533437be5bdcf493bfbbd101747a2?s=128&d=identicon&r=PG", "display_name": "Totte Karlsson", "link": "https://stackoverflow.com/users/1927753/totte-karlsson"}, "reply_to_user": {"reputation": 81653, "user_id": 168175, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/qxeUf.jpg?s=128&g=1", "display_name": "Flexo", "link": "https://stackoverflow.com/users/168175/flexo"}, "edited": false, "score": 0, "creation_date": 1572475650, "post_id": 58633514, "comment_id": 103576161, "body": "hoops, editing the post. It is in fact &quot;%included&quot;"}, {"owner": {"reputation": 81653, "user_id": 168175, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/qxeUf.jpg?s=128&g=1", "display_name": "Flexo", "link": "https://stackoverflow.com/users/168175/flexo"}, "edited": false, "score": 1, "creation_date": 1572812325, "post_id": 58633514, "comment_id": 103667773, "body": "What&#39;s the smallest complete example that can reproduce this? I&#39;d have answered it already without a bounty if you&#39;d shown that."}, {"owner": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "edited": false, "score": 0, "creation_date": 1572887214, "post_id": 58633514, "comment_id": 103692369, "body": "What Flexo said...having an example the reproduces the problem goes a long way to getting an answer."}, {"owner": {"reputation": 1304, "user_id": 1927753, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/0f9533437be5bdcf493bfbbd101747a2?s=128&d=identicon&r=PG", "display_name": "Totte Karlsson", "link": "https://stackoverflow.com/users/1927753/totte-karlsson"}, "edited": false, "score": 0, "creation_date": 1572909330, "post_id": 58633514, "comment_id": 103700570, "body": "Had been happy to give away bounty for solution. However, while creating a short example, the problem was found. A third party library had its own shared_ptr implementation and had a using directive of it causing two shared pointer classes (with the same name(!) (shared_ptr), but different namespaces) being in the mix. Did not see any warning about it when building. Not sure how to do with this post. Perhaps writing it as an answer may help someone else?"}, {"owner": {"reputation": 1304, "user_id": 1927753, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/0f9533437be5bdcf493bfbbd101747a2?s=128&d=identicon&r=PG", "display_name": "Totte Karlsson", "link": "https://stackoverflow.com/users/1927753/totte-karlsson"}, "reply_to_user": {"reputation": 81653, "user_id": 168175, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/qxeUf.jpg?s=128&g=1", "display_name": "Flexo", "link": "https://stackoverflow.com/users/168175/flexo"}, "edited": false, "score": 0, "creation_date": 1572909758, "post_id": 58633514, "comment_id": 103700677, "body": "Thanks for the suggestion of creating a small example, @Flexo and Mark Tolonen. It helped fixing the problem!"}, {"owner": {"reputation": 9551, "user_id": 9837301, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9414V.png?s=128&g=1", "display_name": "JaMiT", "link": "https://stackoverflow.com/users/9837301/jamit"}, "edited": false, "score": 0, "creation_date": 1573360359, "post_id": 58633514, "comment_id": 103854382, "body": "@TotteKarlsson Yes, writing it as an answer instead of editing it into the question would make it more likely to help someone else."}], "answers": [{"tags": [], "owner": {"reputation": 1304, "user_id": 1927753, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/0f9533437be5bdcf493bfbbd101747a2?s=128&d=identicon&r=PG", "display_name": "Totte Karlsson", "link": "https://stackoverflow.com/users/1927753/totte-karlsson"}, "is_accepted": true, "score": 1, "last_activity_date": 1573414714, "creation_date": 1573414714, "answer_id": 58792272, "question_id": 58633514, "link": "https://stackoverflow.com/questions/58633514/wrapping-shared-pointer-object-with-swig-dont-give-access-to-class-member-funct/58792272#58792272", "title": "Wrapping shared pointer object with SWIG don&#39;t give access to class member functions", "body": "<p>The question above are dealing with a C/C++ API from Allied Vision, controlling their cameras. They have defined their own shared pointer class and named it using the same name as the std shared pointer class, i.e. shared_ptr. </p>\n\n<p>The client code for this API is using std::shared_ptr's, and at some point the usage of a shared_ptr, without specifying the namespace caused the above problems with Swig. \nBy explicitly specifying the std namespace when using a shared_ptr, the problems were resolved and the resulting swigged objects, using shared pointers, started working perfectly fine.</p>\n"}], "owner": {"reputation": 1304, "user_id": 1927753, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/0f9533437be5bdcf493bfbbd101747a2?s=128&d=identicon&r=PG", "display_name": "Totte Karlsson", "link": "https://stackoverflow.com/users/1927753/totte-karlsson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 376, "favorite_count": 0, "accepted_answer_id": 58792272, "answer_count": 1, "score": 5, "last_activity_date": 1573414764, "creation_date": 1572468914, "last_edit_date": 1573414764, "question_id": 58633514, "link": "https://stackoverflow.com/questions/58633514/wrapping-shared-pointer-object-with-swig-dont-give-access-to-class-member-funct", "title": "Wrapping shared pointer object with SWIG don&#39;t give access to class member functions", "body": "<p>I have a C++ CameraManager class that manages a list of Camera objects. \nThe camera objects are managed by a std::list, as shared pointers, i.e. each list item is of type: shared_ptr &lt; Camera > .</p>\n\n<p>I can obtain a Camera from a CameraManager object as</p>\n\n<pre><code> std::shared_ptr&lt;Camera&gt; c = cameraManager.getCamera();\n</code></pre>\n\n<p>Creating a Python module using Swig, the above is translated to python code as:</p>\n\n<pre><code>  camera = cameraManager.getCamera()\n</code></pre>\n\n<p>The camera Python object above, however, don't allow me to access any of the Camera classes functions. Python says is an object of type: 'Swig object of type 'std::shared_ptr *' at ####</p>\n\n<p>Adding the following in the Swig interface file</p>\n\n<pre><code>%include &lt;std_shared_ptr.i&gt;\n%shared_ptr(Camera)\n</code></pre>\n\n<p>before including</p>\n\n<pre><code>%include \"aiCamera.h\"\n</code></pre>\n\n<p>don't change the behavior in the resulting Python module. Any ideas what might be missing?</p>\n\n<p>Additional info: \nThe C++ code uses a typedef:</p>\n\n<pre><code>typedef CameraSP std::shared_ptr&lt;Camera&gt;;\n</code></pre>\n\n<p>The Camera class is derived from a base class, that is virtually empty.</p>\n\n<pre><code>class MVR_API MVRObject\n{\npublic:\n                                     MVRObject();\n                                     MVRObject(const MVRObject&amp; obj);\n    virtual                         ~MVRObject();\n\n};\n</code></pre>\n\n<p>The code is compiled using VS 2013 and CMake. The CMake code looks like this: </p>\n\n<pre><code>set_source_files_properties(${PyModule}.i PROPERTIES CPLUSPLUS ON)\nset_source_files_properties(${PyModule}.i PROPERTIES SWIG_FLAGS \"-threads\")\n\nSWIG_ADD_LIBRARY(${PyModule}\n    TYPE MODULE \n    LANGUAGE python \n    SOURCES ${PyModule}.i\n    )\n\n\nSWIG_LINK_LIBRARIES (${PyModule}\n    ${PYTHON_LIB_FOLDER}/Python37.lib    \n    dslFoundation\n    aimvr\n)\n\n# INSTALL PYTHON BINDINGS\n# Get the python site packages directory by invoking python\nexecute_process(COMMAND python -c \"import site; print(site.getsitepackages()[0])\" OUTPUT_VARIABLE PYTHON_SITE_PACKAGES OUTPUT_STRIP_TRAILING_WHITESPACE)\nmessage(\"PYTHON_SITE_PACKAGES = ${PYTHON_SITE_PACKAGES}\")\n\nSET(SWIG_RUNTIME ${CMAKE_CURRENT_BINARY_DIR}/mvr_swigpyrun.h)\nexecute_process(COMMAND ${SWIG_EXECUTABLE} -python -external-runtime ${SWIG_RUNTIME})\n\n</code></pre>\n\n<p>UPDATE:\nThe problem was not Swig and usage of shared pointers. It was a third party library having its own implementation of shared_ptr. Resolving the shared pointers by namespace names fixed the problem and the resulting Python module started working as expected.</p>\n"}, {"tags": ["python", "numpy"], "answers": [{"tags": [], "owner": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "is_accepted": true, "score": 0, "last_activity_date": 1572492065, "last_edit_date": 1572492065, "creation_date": 1572475185, "answer_id": 58634564, "question_id": 58633470, "link": "https://stackoverflow.com/questions/58633470/numpy-complex128-division-inconsistent-with-float64-division/58634564#58634564", "title": "NumPy complex128 division inconsistent with float64 division", "body": "<p>This seems to work:</p>\n\n<pre><code>import numpy as np\n\ndef compl_div(A,B):\n    A,B = np.asarray(A),np.asarray(B)\n    Ba = np.abs(B)[...,None]\n    A = (A[...,None].view(float)/Ba).view(complex)[...,0]\n    B = (B.conj()[...,None].view(float)/Ba).view(complex)[...,0]\n    return A*B\n\na = np.random.randn(10000)\nb = np.random.randn(10000)\nA = a.astype(complex)\nB = b.astype(complex)\n\nprint((compl_div(A,B)==a/b).all())\n\nprint((np.sqrt(b*b)==np.abs(b)).all())\n\nac = a.view(complex)\nbc = b.view(complex)\n\nprint(np.allclose(compl_div(ac,bc),ac/bc))\n</code></pre>\n\n<p>Sample run:</p>\n\n<pre><code>True    # complex without imag exactly equal float\nTrue    # reason it works\nTrue    # for nonzeron imag part do we actually get complex division\n</code></pre>\n\n<p>Explanation:</p>\n\n<p>Let us write <code>///</code> for complex by float division <code>(x+iy)///r = x/r + iy/r</code></p>\n\n<p>numpy seems to implement complex division <code>A/B</code> as <code>A*(1/B)</code> (<code>1/B</code> can be computed as <code>B.conj()///(B.conj()*B)</code>), indeed A/B appears to always equal <code>a*(1/b)</code></p>\n\n<p>We do instead <code>(A///abs(B)) * (B.conj()///abs(B))</code> as <code>abs(B)^2 = B*B.conj()</code> this is mathematically, but not numerically, equivalent.</p>\n\n<p>Now, if we had <code>abs(B) == abs(b)</code> then <code>A///abs(B) = a/abs(b)</code> and <code>B///abs(B) = sign(b)</code> and we could see that <code>compl_div(A,B)</code> indeed gives back exactly <code>a/b</code>.</p>\n\n<p>As <code>abs(x+iy) = sqrt(x^2+y^2)</code> we need to show <code>sqrt(b*b) = abs(b)</code>. This is <a href=\"https://stackoverflow.com/q/41656438/7207392\">provably true</a> unless there is over or underflow in the square or the square is denormal or the implementation does not conform to IEEE.</p>\n"}], "owner": {"reputation": 43, "user_id": 9465193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d138c54d55f6401c53a94c1fddfecf4?s=128&d=identicon&r=PG&f=1", "display_name": "Jaroslaw M. Blusewicz", "link": "https://stackoverflow.com/users/9465193/jaroslaw-m-blusewicz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 249, "favorite_count": 0, "accepted_answer_id": 58634564, "answer_count": 1, "score": 4, "last_activity_date": 1572492065, "creation_date": 1572468693, "question_id": 58633470, "link": "https://stackoverflow.com/questions/58633470/numpy-complex128-division-inconsistent-with-float64-division", "title": "NumPy complex128 division inconsistent with float64 division", "body": "<p>I'm doing complex division in a context where numerical precision really matters. I find that dividing two complex128 numbers with no imaginary part gives a different result beyond 15 decimal digits that dividing the same two numbers as float64.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>a = np.float64(1.501)\nb = np.float64(1.337)\n\nprint('{:.20f}'.format(a / b))\n# 1.12266267763649962852\n\na_com = np.complex128(1.501)\nb_com = np.complex128(1.337)\n\nprint('{:.20f}'.format((a_com / b_com).real))\n# 1.12266267763649940647\n</code></pre>\n\n<p>I have a C++ reference implementation where complex division agrees with NumPy float division beyond 15 decimal digits. I'd like to use NumPy complex division with the same precision. Is there a way to accomplish that?</p>\n"}, {"tags": ["python", "string", "sequence"], "comments": [{"owner": {"reputation": 67048, "user_id": 388787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f786b1ad349a30e02802ae61b4518fc?s=128&d=identicon&r=PG", "display_name": "Dan D.", "link": "https://stackoverflow.com/users/388787/dan-d"}, "edited": false, "score": 0, "creation_date": 1572470942, "post_id": 58633442, "comment_id": 103574750, "body": "There are three As in the second string. It decided to match the A at the start of the first string with the first A and not the second."}, {"owner": {"reputation": 378, "user_id": 1472770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd8e4587a9f073c0c17d2f5c7a1217d5?s=128&d=identicon&r=PG", "display_name": "alancalvitti", "link": "https://stackoverflow.com/users/1472770/alancalvitti"}, "reply_to_user": {"reputation": 67048, "user_id": 388787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f786b1ad349a30e02802ae61b4518fc?s=128&d=identicon&r=PG", "display_name": "Dan D.", "link": "https://stackoverflow.com/users/388787/dan-d"}, "edited": false, "score": 0, "creation_date": 1572487789, "post_id": 58633442, "comment_id": 103578770, "body": "@DanD, ok but that doesn&#39;t answer the q why is it matching just the A and not the longer string Attempt?"}], "owner": {"reputation": 378, "user_id": 1472770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd8e4587a9f073c0c17d2f5c7a1217d5?s=128&d=identicon&r=PG", "display_name": "alancalvitti", "link": "https://stackoverflow.com/users/1472770/alancalvitti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 21, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1572468564, "creation_date": 1572468564, "question_id": 58633442, "link": "https://stackoverflow.com/questions/58633442/combining-adjoining-sequencematcher-matches", "title": "Combining adjoining SequenceMatcher matches", "body": "<p>Is there an option or method for difflib.SequenceMatcher to combine adjoining Matches?</p>\n\n<p>Consider this pair:</p>\n\n<pre><code>str_a = \"Attempt to invoke virtual method XXX.XXX on a null object reference\"\n\nstr_b = \"Unable to start activity ComponentInfo{YYY/YYY.YYYActivity}: java.lang.NullPointerException: Attempt to invoke interface method 'void ZZZ.ZZZ(ZZZ.ZZZ.WWW.product.BaseActivity)' on a null object reference\"\n</code></pre>\n\n<p>Excuse the non-minimal examples but the matches returned seem sensitive to even small deletions.</p>\n\n<pre><code>[((i,j,n),str_a[i:i+n],str_b[j:j+n]) for i,j,n in difflib.SequenceMatcher(None,str_a,str_b).get_matching_blocks()]\n</code></pre>\n\n<p>Then</p>\n\n<pre><code>[((0, 50, 1), 'A', 'A'),\n ((1, 94, 17), 'ttempt to invoke ', 'ttempt to invoke '),\n ((22, 158, 1), 'u', 'u'),\n ((40, 176, 27), ' on a null object reference', ' on a null object reference'),\n ((67, 203, 0), '', '')]\n</code></pre>\n\n<p>But why are  'A' and 'ttempt to invoke' returned as 2 separate matches since they are adjoining? Is there a method to join them internally?</p>\n"}, {"tags": ["python", "image", "openpyxl"], "comments": [{"owner": {"reputation": 13209, "user_id": 7414759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b272ce66c7c245c6cbe9a830691daddc?s=128&d=identicon&r=PG&f=1", "display_name": "stovfl", "link": "https://stackoverflow.com/users/7414759/stovfl"}, "edited": false, "score": 1, "creation_date": 1572483062, "post_id": 58633430, "comment_id": 103577846, "body": "<a href=\"https://stackoverflow.com/questions/58368340/applying-row-height-to-all-rows-including-and-after-row-7\">applying-row-height-to-all-rows</a>"}, {"owner": {"reputation": 80, "user_id": 11089078, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-D45Y_H2LozE/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQPW_Wkn3T7XWDGmTGtWp2s0Zj6Jrg/mo/photo.jpg?sz=128", "display_name": "hamza chenni", "link": "https://stackoverflow.com/users/11089078/hamza-chenni"}, "reply_to_user": {"reputation": 13209, "user_id": 7414759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b272ce66c7c245c6cbe9a830691daddc?s=128&d=identicon&r=PG&f=1", "display_name": "stovfl", "link": "https://stackoverflow.com/users/7414759/stovfl"}, "edited": false, "score": 0, "creation_date": 1572510678, "post_id": 58633430, "comment_id": 103584583, "body": "it s done Thank you"}], "answers": [{"comments": [{"owner": {"reputation": 80, "user_id": 11089078, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-D45Y_H2LozE/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQPW_Wkn3T7XWDGmTGtWp2s0Zj6Jrg/mo/photo.jpg?sz=128", "display_name": "hamza chenni", "link": "https://stackoverflow.com/users/11089078/hamza-chenni"}, "edited": false, "score": 0, "creation_date": 1572472403, "post_id": 58634122, "comment_id": 103575228, "body": "i do what you suggest but i got an error  TypeError: Value must be a list, tuple, range or generator, or a dict. Supplied value is &lt;class &#39;dict_values&#39;&gt;"}, {"owner": {"reputation": 115, "user_id": 7418263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229ada96bf675189204220fc7ab956e?s=128&d=identicon&r=PG&f=1", "display_name": "chopchopa", "link": "https://stackoverflow.com/users/7418263/chopchopa"}, "reply_to_user": {"reputation": 80, "user_id": 11089078, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-D45Y_H2LozE/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQPW_Wkn3T7XWDGmTGtWp2s0Zj6Jrg/mo/photo.jpg?sz=128", "display_name": "hamza chenni", "link": "https://stackoverflow.com/users/11089078/hamza-chenni"}, "edited": false, "score": 0, "creation_date": 1572472640, "post_id": 58634122, "comment_id": 103575302, "body": "That is because you are trying to save a <code>product.values()</code> as a cell value. I described it in my answer. <code>product.values()</code> has type <code>dict_values</code> so you need to convert it to <code>list</code> or <code>tuple</code> and append to <code>sheet</code>."}, {"owner": {"reputation": 115, "user_id": 7418263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229ada96bf675189204220fc7ab956e?s=128&d=identicon&r=PG&f=1", "display_name": "chopchopa", "link": "https://stackoverflow.com/users/7418263/chopchopa"}, "reply_to_user": {"reputation": 80, "user_id": 11089078, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-D45Y_H2LozE/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQPW_Wkn3T7XWDGmTGtWp2s0Zj6Jrg/mo/photo.jpg?sz=128", "display_name": "hamza chenni", "link": "https://stackoverflow.com/users/11089078/hamza-chenni"}, "edited": false, "score": 0, "creation_date": 1572472838, "post_id": 58634122, "comment_id": 103575358, "body": "@hamzachenni I made a mistake in first block of code. I fixed it now, check the answer again."}, {"owner": {"reputation": 80, "user_id": 11089078, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-D45Y_H2LozE/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQPW_Wkn3T7XWDGmTGtWp2s0Zj6Jrg/mo/photo.jpg?sz=128", "display_name": "hamza chenni", "link": "https://stackoverflow.com/users/11089078/hamza-chenni"}, "edited": false, "score": 0, "creation_date": 1572473007, "post_id": 58634122, "comment_id": 103575417, "body": "i got some rusulte with                                                                                            for product in products:     for item in product.items():         sheet.append(item)"}, {"owner": {"reputation": 115, "user_id": 7418263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229ada96bf675189204220fc7ab956e?s=128&d=identicon&r=PG&f=1", "display_name": "chopchopa", "link": "https://stackoverflow.com/users/7418263/chopchopa"}, "reply_to_user": {"reputation": 80, "user_id": 11089078, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-D45Y_H2LozE/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQPW_Wkn3T7XWDGmTGtWp2s0Zj6Jrg/mo/photo.jpg?sz=128", "display_name": "hamza chenni", "link": "https://stackoverflow.com/users/11089078/hamza-chenni"}, "edited": false, "score": 0, "creation_date": 1572473167, "post_id": 58634122, "comment_id": 103575468, "body": "What exactly you want to do? You want to insert values of dict as a row or as a column?"}, {"owner": {"reputation": 80, "user_id": 11089078, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-D45Y_H2LozE/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQPW_Wkn3T7XWDGmTGtWp2s0Zj6Jrg/mo/photo.jpg?sz=128", "display_name": "hamza chenni", "link": "https://stackoverflow.com/users/11089078/hamza-chenni"}, "edited": false, "score": 0, "creation_date": 1572473387, "post_id": 58634122, "comment_id": 103575536, "body": "Thank you very much chopchopa    plaese  how can the images into cells of column &#39;F&#39; &#39;photos&#39;"}], "tags": [], "owner": {"reputation": 115, "user_id": 7418263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229ada96bf675189204220fc7ab956e?s=128&d=identicon&r=PG&f=1", "display_name": "chopchopa", "link": "https://stackoverflow.com/users/7418263/chopchopa"}, "is_accepted": false, "score": 1, "last_activity_date": 1572472794, "last_edit_date": 1572472794, "creation_date": 1572472193, "answer_id": 58634122, "question_id": 58633430, "link": "https://stackoverflow.com/questions/58633430/write-python-list-of-dicts-to-xlsx-using-openpyxl/58634122#58634122", "title": "write python list of dicts to xlsx using openpyxl", "body": "<p>There are some problems in your code.<br>\nFirst, you are incrementing <code>next_row</code> value in the loop where you setting it, so increment doesn't have effect and every iteration the value of <code>next_row</code> equals 3.<br>\nSecond, you are trying to write a list of dict values to excel cell, but I think you want it will be written as a row. So you need to just append it as you did with header above the loops:</p>\n\n<pre><code>for product in products:\n    sheet.append(list(product.values()))\n</code></pre>\n\n<p>If you need to insert an image in last cell in a row you may rewrite loop that way:</p>\n\n<pre><code>for row_index, product in enumerate(products):\n    values = list(product.values())\n    sheet.append(values[:-1])\n    col_row = get_column_letter(len(values)) + str(row_index+1) \n    photo_path = values[-1]\n    sheet.add_image(Image(photo_path), col_row)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 14362, "user_id": 2385133, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3a93c5a0f975385738c1f27848f3b50a?s=128&d=identicon&r=PG", "display_name": "Charlie Clark", "link": "https://stackoverflow.com/users/2385133/charlie-clark"}, "edited": false, "score": 0, "creation_date": 1572540997, "post_id": 58634148, "comment_id": 103600982, "body": "You can, of course, pass a generator expression into append."}], "tags": [], "owner": {"reputation": 13209, "user_id": 7414759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b272ce66c7c245c6cbe9a830691daddc?s=128&d=identicon&r=PG&f=1", "display_name": "stovfl", "link": "https://stackoverflow.com/users/7414759/stovfl"}, "is_accepted": true, "score": 2, "last_activity_date": 1572541732, "last_edit_date": 1572541732, "creation_date": 1572472360, "answer_id": 58634148, "question_id": 58633430, "link": "https://stackoverflow.com/questions/58633430/write-python-list-of-dicts-to-xlsx-using-openpyxl/58634148#58634148", "title": "write python list of dicts to xlsx using openpyxl", "body": "<blockquote>\n  <p><strong>Question</strong>: append <code>list</code> of <code>dict</code></p>\n</blockquote>\n\n<pre><code>import openpyxl\n\nproducts = [{'id':46329, \n             'discription':'AD BLeu', \n             'marque':'AZERT',\n             'category':'liquid',\n             'family': 'ADBLEU', \n             'photos':'D:\\\\hamzawi\\\\hamza\\\\image2py\\\\46329_1.png'}\n            ]\n\n# Dictionarys are not in order by default\n# Define a `list` of `keys` in desired order\nfieldnames = ['id', 'discription', 'marque', 'category', 'family', 'photos']\n\n# create a new workbook\nwb = openpyxl.Workbook()\nws = wb.active\n\n# append headers\nws.append([\"Product ID\", \"Product Name\", \"Marque\", \"Category\", \"Family\", \"Photos\"])\n\n# append data\n# iterate `list` of `dict`\nfor product in products:\n    # create a `generator` yield product `value`\n    # use the fieldnames in desired order as `key`\n    values = (product[k] for k in fieldnames)\n\n    # append the `generator values`\n    ws.append(values)\n\n# show Worksheet Values\nfor row_values in ws.iter_rows(values_only=True):\n    for value in row_values:\n        print(value, end='\\t')\n    print()\n</code></pre>\n\n<blockquote>\n  <p><strong>Output</strong>:</p>\n\n<pre><code>Product ID  Product Name    Marque  Category    Family  Photos  \n46329       AD BLeu         AZERT   liquid      ADBLEU  D:\\hamzawi\\hamza\\image2py\\46329_1.png   \n</code></pre>\n</blockquote>\n\n<hr>\n\n<p>If you want the image, instead of the image file path, change the following:</p>\n\n<pre><code># remove 'photos' from fieldnames\nfieldnames = \\\n['id', 'discription', 'marque', 'category', 'family']\n\n# you need the Row index, add a `enumerate(..., 2)`\nfor row, product in enumerate(products,2):\n    values = (product[k] for k in fieldnames)\n    sheet.append(values)\n\n    # after append the `values` add the image\n    # Here, Column 'F'\n    ws.add_image(Image(product['photos']), 'F{}'.format(row))\n</code></pre>\n"}], "owner": {"reputation": 80, "user_id": 11089078, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-D45Y_H2LozE/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQPW_Wkn3T7XWDGmTGtWp2s0Zj6Jrg/mo/photo.jpg?sz=128", "display_name": "hamza chenni", "link": "https://stackoverflow.com/users/11089078/hamza-chenni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 713, "favorite_count": 2, "accepted_answer_id": 58634148, "answer_count": 2, "score": 3, "last_activity_date": 1572541732, "creation_date": 1572468515, "last_edit_date": 1572475069, "question_id": 58633430, "link": "https://stackoverflow.com/questions/58633430/write-python-list-of-dicts-to-xlsx-using-openpyxl", "title": "write python list of dicts to xlsx using openpyxl", "body": "<p>i try to write this <code>list</code> of <code>dicts</code> into <code>xlsx</code> file using <code>openpyxlsx</code></p>\n\n<pre><code>products= [{'id':46329', \n            'discription':'AD BLeu', \n            'marque':'AZERT',\n            'category':'liquid',\n            'family': 'ADBLEU', \n            'photos':'D:\\\\hamzawi\\\\hamza\\\\image2py\\\\46329_1.png'},\n            {dict2 ...},\n            {dictn...}\n           ]\n</code></pre>\n\n<hr>\n\n<pre><code> # creat a workbook\n filena = \"produitimage.xlsx\"\n workbook = Workbook()\n sheet = workbook.active\n #add headers\n sheet.append([\"Product ID\", \"Product Name\", \"Marque\",\n          \"Category\", \"Family\", \"Photos\"])\n for product in products:\n    for item in product.items():\n        for row, entry in enumerate(item, start=3):\n            sheet.cell(row=row, column=1, value=entry)\n #add some images\n images = [item['photos'] for item in products]\n for image in images:\n     logo = Image(image)\n     #logo.height = 150\n     #logo.width = 150\n     sheet.add_image(logo)\n workbook.save(filename=filena)\n</code></pre>\n\n<p>i got xlsx file with only headers no data</p>\n"}, {"tags": ["python", "pandas", "matplotlib"], "answers": [{"tags": [], "owner": {"reputation": 825, "user_id": 9072201, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TkapE.jpg?s=128&g=1", "display_name": "Robert King", "link": "https://stackoverflow.com/users/9072201/robert-king"}, "is_accepted": false, "score": 1, "last_activity_date": 1572469116, "creation_date": 1572469116, "answer_id": 58633555, "question_id": 58633427, "link": "https://stackoverflow.com/questions/58633427/pandas-dataframe-group-by-columns-not-working-in-matplotlib-barplot/58633555#58633555", "title": "Pandas Dataframe Group-by columns not working in Matplotlib Barplot", "body": "<p>You can turn indicies back into columns <code>spe = spe.reset_index()</code></p>\n"}, {"tags": [], "owner": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "is_accepted": false, "score": 0, "last_activity_date": 1572472581, "creation_date": 1572472581, "answer_id": 58634184, "question_id": 58633427, "link": "https://stackoverflow.com/questions/58633427/pandas-dataframe-group-by-columns-not-working-in-matplotlib-barplot/58634184#58634184", "title": "Pandas Dataframe Group-by columns not working in Matplotlib Barplot", "body": "<p>If you are plotting just one group of age as your <code>spe</code> indicates, you can just do:</p>\n\n<pre><code>(df[df['age']=='15-24 years'].groupby('country', as_index=False)\n     .sort_values('suicides_no')\n     .plot.bar(x='country', y='suicides_no')\n)\n</code></pre>\n"}], "owner": {"reputation": 95, "user_id": 11246434, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JHI4S.jpg?s=128&g=1", "display_name": "niimet", "link": "https://stackoverflow.com/users/11246434/niimet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1572472581, "creation_date": 1572468508, "last_edit_date": 1572469019, "question_id": 58633427, "link": "https://stackoverflow.com/questions/58633427/pandas-dataframe-group-by-columns-not-working-in-matplotlib-barplot", "title": "Pandas Dataframe Group-by columns not working in Matplotlib Barplot", "body": "<p>I have a data that contains suicides, year by year and country by country and more. I grouped them by age and country but by doing that i think country and age are becoming indexes and that is why I cant use them on <code>barplot</code>. Here is the code.</p>\n\n<pre><code>spe = df.groupby(['country','age']).sum().sort_values(by='suicides_no').xs(level='age',\n                                                                          key='15-24 years')\nsns.barplot(x = 'country', y = 'suicides_no',data = spe)\nmatplotlib.pyplot.xticks(rotation=90)\n</code></pre>\n\n<p>I get this error:</p>\n\n<blockquote>\n  <p>ValueError: Could not interpret input 'country'</p>\n</blockquote>\n"}, {"tags": ["python", "list"], "comments": [{"owner": {"reputation": 545, "user_id": 7903466, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/76c21598230104abb0c60f24ff68998a?s=128&d=identicon&r=PG&f=1", "display_name": "M Waz", "link": "https://stackoverflow.com/users/7903466/m-waz"}, "edited": false, "score": 0, "creation_date": 1572468685, "post_id": 58633413, "comment_id": 103573892, "body": "If you do [[&#39;a&#39;]] you get the result you wish to get. You are multiplying the elements inside the list, not the lists themselves."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 2, "creation_date": 1572468750, "post_id": 58633413, "comment_id": 103573934, "body": "These sorts of questions really boil down to &quot;because that&#39;s what the people who designed the language decided that should mean&quot;"}, {"owner": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "reply_to_user": {"reputation": 545, "user_id": 7903466, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/76c21598230104abb0c60f24ff68998a?s=128&d=identicon&r=PG&f=1", "display_name": "M Waz", "link": "https://stackoverflow.com/users/7903466/m-waz"}, "edited": false, "score": 2, "creation_date": 1572468854, "post_id": 58633413, "comment_id": 103573975, "body": "@MWaz I&#39;d be careful of that.  List multiplication will give you duplicate objects, which can lead to surprising results when the objects are mutable."}, {"owner": {"reputation": 38630, "user_id": 1324033, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/PaonW.png?s=128&g=1", "display_name": "Sayse", "link": "https://stackoverflow.com/users/1324033/sayse"}, "edited": false, "score": 0, "creation_date": 1572469916, "post_id": 58633413, "comment_id": 103574389, "body": "Would you accept &quot;it is easier to use and there are far more use cases for a single flat list than a nested list&quot; as an answer?"}, {"owner": {"reputation": 2335, "user_id": 3042018, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/14e45cef5bcc4b8e93d81c7c65c15b19?s=128&d=identicon&r=PG", "display_name": "Robin Andrews", "link": "https://stackoverflow.com/users/3042018/robin-andrews"}, "reply_to_user": {"reputation": 545, "user_id": 7903466, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/76c21598230104abb0c60f24ff68998a?s=128&d=identicon&r=PG&f=1", "display_name": "M Waz", "link": "https://stackoverflow.com/users/7903466/m-waz"}, "edited": false, "score": 0, "creation_date": 1572470133, "post_id": 58633413, "comment_id": 103574468, "body": "I&#39;m satisfied with @MWaz and juanpa&#39;s combined comments. I think they should form an answer: &quot;It&#39;s the way Python works&quot;, and &quot;you are multiplying the elements inside the list, not the lists.&quot;"}, {"owner": {"reputation": 38630, "user_id": 1324033, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/PaonW.png?s=128&g=1", "display_name": "Sayse", "link": "https://stackoverflow.com/users/1324033/sayse"}, "edited": false, "score": 0, "creation_date": 1572470606, "post_id": 58633413, "comment_id": 103574632, "body": "@Robin - I believe the answer is Guido <a href=\"http://python-history.blogspot.com/2009/04/origins-of-pythons-functional-features.html\" rel=\"nofollow noreferrer\">took inspiration from existing functional languages</a> but I don&#39;t know if this applies for list operations.."}], "answers": [{"comments": [{"owner": {"reputation": 2335, "user_id": 3042018, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/14e45cef5bcc4b8e93d81c7c65c15b19?s=128&d=identicon&r=PG", "display_name": "Robin Andrews", "link": "https://stackoverflow.com/users/3042018/robin-andrews"}, "edited": false, "score": 0, "creation_date": 1572468572, "post_id": 58633433, "comment_id": 103573841, "body": "I disagree - each of the addends is itself a list."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 3, "creation_date": 1572468611, "post_id": 58633433, "comment_id": 103573867, "body": "Disagree with what? That&#39;s how <code>+</code> is defined for <code>list</code> operands."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1572468685, "post_id": 58633433, "comment_id": 103573891, "body": "If you are bothered by the mixed operands for <code>*</code>, consider the law <code>lst * n + lst * m == lst * (n+m)</code> instead, with <code>lst * 0 == []</code>."}, {"owner": {"reputation": 2335, "user_id": 3042018, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/14e45cef5bcc4b8e93d81c7c65c15b19?s=128&d=identicon&r=PG", "display_name": "Robin Andrews", "link": "https://stackoverflow.com/users/3042018/robin-andrews"}, "edited": false, "score": 0, "creation_date": 1572468735, "post_id": 58633433, "comment_id": 103573923, "body": "make_a_list_from( &#39;a&#39;  * 4), sure."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "reply_to_user": {"reputation": 2335, "user_id": 3042018, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/14e45cef5bcc4b8e93d81c7c65c15b19?s=128&d=identicon&r=PG", "display_name": "Robin Andrews", "link": "https://stackoverflow.com/users/3042018/robin-andrews"}, "edited": false, "score": 0, "creation_date": 1572468782, "post_id": 58633433, "comment_id": 103573947, "body": "@Robin that doesn&#39;t make <i>any</i> sense, note <code>&#39;a&#39;*4 == &#39;aaaa&#39;</code> which would be evaluated first..."}, {"owner": {"reputation": 2335, "user_id": 3042018, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/14e45cef5bcc4b8e93d81c7c65c15b19?s=128&d=identicon&r=PG", "display_name": "Robin Andrews", "link": "https://stackoverflow.com/users/3042018/robin-andrews"}, "edited": false, "score": 0, "creation_date": 1572468886, "post_id": 58633433, "comment_id": 103573990, "body": "But does the python behavior make sense without further elaboration? The unit being multiplied (i.e. repeatedly added) is a LIST containing &#39;a&#39;. So repeatedly adding such lists should produce multiple lists, no?"}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1572468920, "post_id": 58633433, "comment_id": 103574005, "body": "No, the operand <i>is</i> the list, not the contents of the list."}, {"owner": {"reputation": 2335, "user_id": 3042018, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/14e45cef5bcc4b8e93d81c7c65c15b19?s=128&d=identicon&r=PG", "display_name": "Robin Andrews", "link": "https://stackoverflow.com/users/3042018/robin-andrews"}, "edited": false, "score": 0, "creation_date": 1572468981, "post_id": 58633433, "comment_id": 103574022, "body": "If that&#39;s true then the result should be multiple lists, surely?"}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1572469224, "post_id": 58633433, "comment_id": 103574131, "body": "No, because adding two lists doesn&#39;t give you nested lists; why should multiplication?"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "reply_to_user": {"reputation": 2335, "user_id": 3042018, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/14e45cef5bcc4b8e93d81c7c65c15b19?s=128&d=identicon&r=PG", "display_name": "Robin Andrews", "link": "https://stackoverflow.com/users/3042018/robin-andrews"}, "edited": false, "score": 0, "creation_date": 1572469431, "post_id": 58633433, "comment_id": 103574215, "body": "@Robin no, surely it should not. The addition operator maps two <code>List[T]</code> objects to another <code>List[T]</code> objects (let&#39;&#39;s simplify and think that lists in Python are not heterogenous). Try this for yourself: <code>[&#39;a&#39;] + [&#39;a&#39;] + [&#39;a&#39;] + [&#39;a&#39;]</code>"}, {"owner": {"reputation": 2335, "user_id": 3042018, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/14e45cef5bcc4b8e93d81c7c65c15b19?s=128&d=identicon&r=PG", "display_name": "Robin Andrews", "link": "https://stackoverflow.com/users/3042018/robin-andrews"}, "edited": false, "score": 0, "creation_date": 1572469435, "post_id": 58633433, "comment_id": 103574218, "body": "Because adding two items of type X gives two items of type X. The outer braces in my suggestion are a container."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "reply_to_user": {"reputation": 2335, "user_id": 3042018, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/14e45cef5bcc4b8e93d81c7c65c15b19?s=128&d=identicon&r=PG", "display_name": "Robin Andrews", "link": "https://stackoverflow.com/users/3042018/robin-andrews"}, "edited": false, "score": 0, "creation_date": 1572469469, "post_id": 58633433, "comment_id": 103574234, "body": "@Robin not generally, <code>2 + 2</code> doesn&#39;t give you two integers, it results in <i>another</i> integer."}, {"owner": {"reputation": 2335, "user_id": 3042018, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/14e45cef5bcc4b8e93d81c7c65c15b19?s=128&d=identicon&r=PG", "display_name": "Robin Andrews", "link": "https://stackoverflow.com/users/3042018/robin-andrews"}, "edited": false, "score": 0, "creation_date": 1572469649, "post_id": 58633433, "comment_id": 103574302, "body": "What about concatenation then? [&quot;2&quot;] + [&quot;2&quot;] should give [&quot;2&quot;][&quot;2&quot;] or similar, maybe contained in a list themselves. I think there&#39;s some hidden set theory rules being applied that people are assuming are obvious, but which I think need making explicit. Or maybe I&#39;m just missing something."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "reply_to_user": {"reputation": 2335, "user_id": 3042018, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/14e45cef5bcc4b8e93d81c7c65c15b19?s=128&d=identicon&r=PG", "display_name": "Robin Andrews", "link": "https://stackoverflow.com/users/3042018/robin-andrews"}, "edited": false, "score": 0, "creation_date": 1572469828, "post_id": 58633433, "comment_id": 103574358, "body": "@Robin no, no set theory. I mean, have you tried <code>[&quot;2&quot;] + [&quot;2&quot;]</code> ? Is that also not intuitive to you? Because that would sort of simplify your question. Essentially, though, just take it as a &quot;primitive&quot; operation that <code>+</code> means concatenation of lists, in which case, multiplication is defined in terms of addition to make them consistent with the way those binary operators are usually defined"}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1572472492, "post_id": 58633433, "comment_id": 103575256, "body": "<code>[&quot;2&quot;][&quot;2&quot;]</code> isn&#39;t even a thing; you are confusing the string representation of an object with the object itself."}], "tags": [], "owner": {"reputation": 19440, "user_id": 6275103, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KDDMj.jpg?s=128&g=1", "display_name": "MrGeek", "link": "https://stackoverflow.com/users/6275103/mrgeek"}, "is_accepted": false, "score": 1, "last_activity_date": 1572468587, "last_edit_date": 1572468587, "creation_date": 1572468521, "answer_id": 58633433, "question_id": 58633413, "link": "https://stackoverflow.com/questions/58633413/why-does-python-list-multiplication-create-a-single-list-with-multiple-elements/58633433#58633433", "title": "Why Does Python List Multiplication Create A Single List with Multiple Elements?", "body": "<p>Much like multiplication with numbers <code>['a'] * 4</code> is equivalent to <code>['a'] + ['a'] + ['a'] + ['a']</code>, hence <code>['a', 'a', 'a', 'a']</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 2335, "user_id": 3042018, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/14e45cef5bcc4b8e93d81c7c65c15b19?s=128&d=identicon&r=PG", "display_name": "Robin Andrews", "link": "https://stackoverflow.com/users/3042018/robin-andrews"}, "edited": false, "score": 0, "creation_date": 1572469419, "post_id": 58633443, "comment_id": 103574208, "body": "It seems to me there must be an implicit assumption here which makes something obvious to you which is not to me. To me it&#39;s obvious that adding multiple items of type &quot;list&quot; should result in multiple items of type &quot;list&quot;. I think the answers and comments so far are equivalent to &quot;because that&#39;s how Python does it.&quot; I&#39;m thinking maybe there&#39;s some hidden set theory or something going on in the background."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "reply_to_user": {"reputation": 2335, "user_id": 3042018, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/14e45cef5bcc4b8e93d81c7c65c15b19?s=128&d=identicon&r=PG", "display_name": "Robin Andrews", "link": "https://stackoverflow.com/users/3042018/robin-andrews"}, "edited": false, "score": 0, "creation_date": 1572469597, "post_id": 58633443, "comment_id": 103574284, "body": "A list is effectively a free monoid, and a monoid is built from a set of elements, an associative binary operation, and an identity element for that operation. In the case of lists, the operation is concatenation with the empty list as the identity. Multiplication is just repetition of that operation; multiplication of two <i>lists</i> themselves is undefined: <code>[&#39;a&#39;] * [&#39;a&#39;]</code>, for example, is a type error."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "reply_to_user": {"reputation": 2335, "user_id": 3042018, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/14e45cef5bcc4b8e93d81c7c65c15b19?s=128&d=identicon&r=PG", "display_name": "Robin Andrews", "link": "https://stackoverflow.com/users/3042018/robin-andrews"}, "edited": false, "score": 0, "creation_date": 1572469840, "post_id": 58633443, "comment_id": 103574363, "body": "One <i>could</i> define <code>[&#39;a&#39;] * 2</code> to be <code>[[&#39;a&#39;], [&#39;a&#39;]]</code>, but that would be inconsistent with how <code>[&#39;a&#39;] + [&#39;a&#39;]</code> is defined with no apparent benefit."}], "tags": [], "owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "is_accepted": false, "score": 5, "last_activity_date": 1572472452, "last_edit_date": 1572472452, "creation_date": 1572468566, "answer_id": 58633443, "question_id": 58633413, "link": "https://stackoverflow.com/questions/58633413/why-does-python-list-multiplication-create-a-single-list-with-multiple-elements/58633443#58633443", "title": "Why Does Python List Multiplication Create A Single List with Multiple Elements?", "body": "<p>Because, just as with multiplication of integers is repeated addition, multiplication with a lis is repeated concatenation.</p>\n\n<pre><code>&gt;&gt;&gt; ['a'] + ['a'] + ['a'] + ['a']\n['a', 'a', 'a', 'a']\n&gt;&gt;&gt; ['a'] * 4\n['a', 'a', 'a', 'a']\n&gt;&gt;&gt; 4 * ['a']\n['a', 'a', 'a', 'a']\n</code></pre>\n\n<p>This obeys various other laws as well:</p>\n\n<ul>\n<li>Distribution: <code>lst * n + lst * m == lst * (n + m)</code></li>\n<li>Zero property: <code>lst * 0 == 0 * lst == []</code></li>\n<li>Multiplicative identity: <code>lst * 1 == lst</code>.</li>\n</ul>\n\n<p>The above are also consistent with the empty list <code>[]</code> being the additive identity,</p>\n\n<pre><code>['a'] + [] == [] + ['a'] == ['a']\n</code></pre>\n\n<p>since</p>\n\n<pre><code>['a'] + [] == ['a'] * 1 + ['a'] * 0  # zero property and multiplicative identity\n           == ['a'] * (1 + 0)        # distribution\n           == ['a'] * 1              # integer addition\n           == ['a']                  # multiplicative identity\n</code></pre>\n\n<hr>\n\n<p>Arguably, <code>list * int</code> shouldn't be defined at <em>all</em>. The main use case, to quickly produce a list of <code>n</code> identical elements, is more safely done using list comprehensions (which were added to the language later). <code>[x] * n</code> creates a list of references to the single element <code>x</code>, which is usually <em>not</em> what you want if <code>x</code> is mutable. <code>[x for _ in range(n)]</code>, on the other hand, creates a list of independent objects defined by <code>x</code>, which <em>is</em> what you want when <code>x</code> is mutable.</p>\n"}, {"comments": [{"owner": {"reputation": 2335, "user_id": 3042018, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/14e45cef5bcc4b8e93d81c7c65c15b19?s=128&d=identicon&r=PG", "display_name": "Robin Andrews", "link": "https://stackoverflow.com/users/3042018/robin-andrews"}, "edited": false, "score": 0, "creation_date": 1572470315, "post_id": 58633580, "comment_id": 103574528, "body": "I&#39;m not suggesting my alternative is practical. I just think the existing behaviour warrants some explanation."}], "tags": [], "owner": {"reputation": 2967, "user_id": 4828815, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/--CqgH2V98Jg/AAAAAAAAAAI/AAAAAAAAABY/lilOgpMEIEs/photo.jpg?sz=128", "display_name": "Poojan", "link": "https://stackoverflow.com/users/4828815/poojan"}, "is_accepted": false, "score": 0, "last_activity_date": 1572469255, "creation_date": 1572469255, "answer_id": 58633580, "question_id": 58633413, "link": "https://stackoverflow.com/questions/58633413/why-does-python-list-multiplication-create-a-single-list-with-multiple-elements/58633580#58633580", "title": "Why Does Python List Multiplication Create A Single List with Multiple Elements?", "body": "<ul>\n<li>just think this through.</li>\n</ul>\n\n<pre><code>['a'] * 4 == ['a'] + ['a'] + ['a'] + ['a']\n</code></pre>\n\n<ul>\n<li>Adding two list should give list. This is defined behavior with python.</li>\n<li>If what you are saying is true then.</li>\n</ul>\n\n<pre><code>['a'] + ['a'] = [['a'],['a']].\n</code></pre>\n\n<ul>\n<li>And what should be output of this?</li>\n</ul>\n\n<pre><code>['a'] + ['a'] + ['a'] = [[['a'],['a']],['a']]  #??\n\n['a'] + ['a'] + ['a'] + ['a'] = [[[['a'],['a']],['a']],['a']] # ?????????\n(['a']*2)*3 #  what should be output of this?\n</code></pre>\n"}], "owner": {"reputation": 2335, "user_id": 3042018, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/14e45cef5bcc4b8e93d81c7c65c15b19?s=128&d=identicon&r=PG", "display_name": "Robin Andrews", "link": "https://stackoverflow.com/users/3042018/robin-andrews"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1572472686, "creation_date": 1572468409, "last_edit_date": 1572472686, "question_id": 58633413, "link": "https://stackoverflow.com/questions/58633413/why-does-python-list-multiplication-create-a-single-list-with-multiple-elements", "title": "Why Does Python List Multiplication Create A Single List with Multiple Elements?", "body": "<p>In python, <code>['a'] * 4</code> gives <code>['a', 'a', 'a', 'a']</code>. Why not <code>[['a'], ['a'], ['a'], ['a']]</code>?</p>\n"}, {"tags": ["python", "gevent", "monkeypatching"], "comments": [{"owner": {"reputation": 3885, "user_id": 652528, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/a580420b66f89e76e1fb9a368f785b3f?s=128&d=identicon&r=PG", "display_name": "geckos", "link": "https://stackoverflow.com/users/652528/geckos"}, "edited": false, "score": 0, "creation_date": 1572468499, "post_id": 58633378, "comment_id": 103573806, "body": "My guess is that by monkey patching the enable software that is gevent agnostic to work with gevent, but only developers can answer this for sure"}, {"owner": {"reputation": 11221, "user_id": 3929826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56f08b81def599c554c7ab93e8593600?s=128&d=identicon&r=PG", "display_name": "Klaus D.", "link": "https://stackoverflow.com/users/3929826/klaus-d"}, "edited": false, "score": 0, "creation_date": 1572469604, "post_id": 58633378, "comment_id": 103574287, "body": "Why a certain design decision has been made in a software should be discussed with the people who made the decision."}, {"owner": {"reputation": 20539, "user_id": 378594, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/12ecbdbb0d89bc2d6a1a002f2072de10?s=128&d=identicon&r=PG", "display_name": "Uri", "link": "https://stackoverflow.com/users/378594/uri"}, "reply_to_user": {"reputation": 11221, "user_id": 3929826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56f08b81def599c554c7ab93e8593600?s=128&d=identicon&r=PG", "display_name": "Klaus D.", "link": "https://stackoverflow.com/users/3929826/klaus-d"}, "edited": false, "score": 0, "creation_date": 1572469841, "post_id": 58633378, "comment_id": 103574364, "body": "@KlausD. this isn&#39;t a &quot;discussion&quot;, there was a reason (hopefully an interesting one) why they decided it which might be public knowledge and I want to know it, while asking if a solution exists that offers a different path."}, {"owner": {"reputation": 11899, "user_id": 7216865, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/X90W9.png?s=128&g=1", "display_name": "Maurice Meyer", "link": "https://stackoverflow.com/users/7216865/maurice-meyer"}, "edited": false, "score": 0, "creation_date": 1572685525, "post_id": 58633378, "comment_id": 103641315, "body": "@Uri, but in the big picture you are not using one module with gevent, often dozens of modules are used in projects, so <i>someone</i> would need to refactor all of them ?!"}, {"owner": {"reputation": 20539, "user_id": 378594, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/12ecbdbb0d89bc2d6a1a002f2072de10?s=128&d=identicon&r=PG", "display_name": "Uri", "link": "https://stackoverflow.com/users/378594/uri"}, "edited": false, "score": 0, "creation_date": 1572696381, "post_id": 58633378, "comment_id": 103643609, "body": "Right, so I&#39;d imagine the choice should be left to the user whether they want it to work implicitly or explicitly."}], "owner": {"reputation": 20539, "user_id": 378594, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/12ecbdbb0d89bc2d6a1a002f2072de10?s=128&d=identicon&r=PG", "display_name": "Uri", "link": "https://stackoverflow.com/users/378594/uri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 26, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1572468259, "creation_date": 1572468259, "question_id": 58633378, "link": "https://stackoverflow.com/questions/58633378/why-doesnt-gevent-come-with-its-own-arsenal-of-functions-instead-of-monkey-pat", "title": "why doesn&#39;t gevent come with its own arsenal of functions, instead of monkey patching existing ones?", "body": "<p>The monkey-patching needed to use gevent is prone to mistakes, doesn't work well with REPL etc'.</p>\n\n<p>My question is - wouldn't it be easier to just ship a custom version of <code>requests</code> within gevent, with the same API as the standard library, and allow the programmer to use it explicitly whenever they choose to?</p>\n\n<p>(of course this assumes that the raw requests are not done by an internal lib, but this is often the case)</p>\n\n<p>Does such a solution already exist? </p>\n"}, {"tags": ["python", "python-asyncio"], "comments": [{"owner": {"reputation": 10593, "user_id": 4621513, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/uCfJK.png?s=128&g=1", "display_name": "mkrieger1", "link": "https://stackoverflow.com/users/4621513/mkrieger1"}, "edited": false, "score": 0, "creation_date": 1572468586, "post_id": 58633368, "comment_id": 103573851, "body": "What is your question? What is the problem with the code you\u2019ve shown?"}, {"owner": {"reputation": 1362, "user_id": 4701426, "user_type": "registered", "accept_rate": 46, "profile_image": "https://graph.facebook.com/859849924075240/picture?type=large", "display_name": "Saeed", "link": "https://stackoverflow.com/users/4701426/saeed"}, "reply_to_user": {"reputation": 10593, "user_id": 4621513, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/uCfJK.png?s=128&g=1", "display_name": "mkrieger1", "link": "https://stackoverflow.com/users/4621513/mkrieger1"}, "edited": false, "score": 0, "creation_date": 1572468882, "post_id": 58633368, "comment_id": 103573986, "body": "@mkrieger1 edited"}, {"owner": {"reputation": 4673, "user_id": 1305461, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gsnQ6.jpg?s=128&g=1", "display_name": "Felipe", "link": "https://stackoverflow.com/users/1305461/felipe"}, "edited": false, "score": 0, "creation_date": 1572469001, "post_id": 58633368, "comment_id": 103574030, "body": "Please correct me if I am wrong, but I am trying to understand <i>why</i> you would want to do this. All I can think is you either (1) want to run one function before or another that is being called from elsewhere, (2) you want to run functions at specific times, or (3) you are doing this for practice sake? I&#39;m unsure. Could you specify that?"}, {"owner": {"reputation": 412, "user_id": 10558670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdf4beda28d8e5d164e8016b36eb4209?s=128&d=identicon&r=PG&f=1", "display_name": "MAO3J1m0Op", "link": "https://stackoverflow.com/users/10558670/mao3j1m0op"}, "edited": false, "score": 0, "creation_date": 1572469005, "post_id": 58633368, "comment_id": 103574033, "body": "Do you have to use asyncio?"}, {"owner": {"reputation": 1362, "user_id": 4701426, "user_type": "registered", "accept_rate": 46, "profile_image": "https://graph.facebook.com/859849924075240/picture?type=large", "display_name": "Saeed", "link": "https://stackoverflow.com/users/4701426/saeed"}, "reply_to_user": {"reputation": 4673, "user_id": 1305461, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gsnQ6.jpg?s=128&g=1", "display_name": "Felipe", "link": "https://stackoverflow.com/users/1305461/felipe"}, "edited": false, "score": 0, "creation_date": 1572469901, "post_id": 58633368, "comment_id": 103574383, "body": "@FelipeFaria in this script, I am running a bunch of functions/coroutines concurrently using Asyncio and the loop. But I wish this entire script to run only between start_time and end_time."}, {"owner": {"reputation": 1362, "user_id": 4701426, "user_type": "registered", "accept_rate": 46, "profile_image": "https://graph.facebook.com/859849924075240/picture?type=large", "display_name": "Saeed", "link": "https://stackoverflow.com/users/4701426/saeed"}, "reply_to_user": {"reputation": 412, "user_id": 10558670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdf4beda28d8e5d164e8016b36eb4209?s=128&d=identicon&r=PG&f=1", "display_name": "MAO3J1m0Op", "link": "https://stackoverflow.com/users/10558670/mao3j1m0op"}, "edited": false, "score": 0, "creation_date": 1572470075, "post_id": 58633368, "comment_id": 103574449, "body": "@MAO3J1m0Op yes"}, {"owner": {"reputation": 4673, "user_id": 1305461, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gsnQ6.jpg?s=128&g=1", "display_name": "Felipe", "link": "https://stackoverflow.com/users/1305461/felipe"}, "edited": false, "score": 0, "creation_date": 1572473622, "post_id": 58633368, "comment_id": 103575609, "body": "I see what you are trying to do, I just don&#39;t understand the why -- but that&#39;s fine. See the answer below."}, {"owner": {"reputation": 1362, "user_id": 4701426, "user_type": "registered", "accept_rate": 46, "profile_image": "https://graph.facebook.com/859849924075240/picture?type=large", "display_name": "Saeed", "link": "https://stackoverflow.com/users/4701426/saeed"}, "reply_to_user": {"reputation": 4673, "user_id": 1305461, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gsnQ6.jpg?s=128&g=1", "display_name": "Felipe", "link": "https://stackoverflow.com/users/1305461/felipe"}, "edited": false, "score": 0, "creation_date": 1572474128, "post_id": 58633368, "comment_id": 103575758, "body": "@FelipeFaria thanks for your answer. Also, what is a better way to run such a script with asyncio coroutines only between specific times in the day? Sounds like you would do this in an entirely different way"}, {"owner": {"reputation": 4673, "user_id": 1305461, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gsnQ6.jpg?s=128&g=1", "display_name": "Felipe", "link": "https://stackoverflow.com/users/1305461/felipe"}, "edited": false, "score": 0, "creation_date": 1572474986, "post_id": 58633368, "comment_id": 103575988, "body": "I suppose it depends. It makes sense to me if you have a larger <code>asyncio</code> environment and you want to run a function between some time range with access to the environment&#39;s memory stack. Otherwise, if it&#39;s just a simple <code>asyncio</code> task that must ran during some point in the day until another, I think it would be more practical to schedule a <code>cron-job</code> to call some synchronous function that will loop and create an <code>asyncio</code> loop every iteration and execute said asynchronous function until <code>time_end</code>. Hopefully that makes sense."}, {"owner": {"reputation": 1362, "user_id": 4701426, "user_type": "registered", "accept_rate": 46, "profile_image": "https://graph.facebook.com/859849924075240/picture?type=large", "display_name": "Saeed", "link": "https://stackoverflow.com/users/4701426/saeed"}, "reply_to_user": {"reputation": 4673, "user_id": 1305461, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gsnQ6.jpg?s=128&g=1", "display_name": "Felipe", "link": "https://stackoverflow.com/users/1305461/felipe"}, "edited": false, "score": 0, "creation_date": 1572476259, "post_id": 58633368, "comment_id": 103576322, "body": "@FelipeFaria makes sense. But I have no experience with cron so I am trying to keep everything including the scheduling part within this single script and Asyncio"}, {"owner": {"reputation": 4673, "user_id": 1305461, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gsnQ6.jpg?s=128&g=1", "display_name": "Felipe", "link": "https://stackoverflow.com/users/1305461/felipe"}, "edited": false, "score": 0, "creation_date": 1572501784, "post_id": 58633368, "comment_id": 103581540, "body": "Sometimes learning how to make a circle roll is easier than trying to <i>create</i> a square that will roll."}], "answers": [{"comments": [{"owner": {"reputation": 1362, "user_id": 4701426, "user_type": "registered", "accept_rate": 46, "profile_image": "https://graph.facebook.com/859849924075240/picture?type=large", "display_name": "Saeed", "link": "https://stackoverflow.com/users/4701426/saeed"}, "edited": false, "score": 0, "creation_date": 1572487144, "post_id": 58634302, "comment_id": 103578663, "body": "Thanks for the clarifying answer. To be able to use <code>asyncio.create_task</code> I had to upgrade to Python &gt; 3.7. Now, when I use your <code>main()</code> instead of mine, I get <code>RuntimeError: Cannot run the event loop while another loop is running.</code> When I get rid of the whole loop object (last 6 lines of my code above) and instead use <code>asyncio.run(main())</code>, I get <code>RuntimeError: asyncio.run() cannot be called from a running event loop</code> Any ideas?"}, {"owner": {"reputation": 4673, "user_id": 1305461, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gsnQ6.jpg?s=128&g=1", "display_name": "Felipe", "link": "https://stackoverflow.com/users/1305461/felipe"}, "edited": false, "score": 0, "creation_date": 1572494827, "post_id": 58634302, "comment_id": 103580089, "body": "The code above doesn&#39;t work, unfortunately. With <code>asyncio.create_task()</code> you create a <a href=\"https://docs.python.org/3/library/asyncio-task.html#asyncio.Task\" rel=\"nofollow noreferrer\">Task object</a> that must be awaitable. In other words, somewhere in your code before <code>t1.cancel(); t2.cancel()</code> you must call the coroutines <code>await t1; await t2</code> for <code>t1</code> and <code>t2</code> to execute."}, {"owner": {"reputation": 4673, "user_id": 1305461, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gsnQ6.jpg?s=128&g=1", "display_name": "Felipe", "link": "https://stackoverflow.com/users/1305461/felipe"}, "edited": false, "score": 0, "creation_date": 1572494986, "post_id": 58634302, "comment_id": 103580129, "body": "Which if you call them with <code>await t1; await t2</code> you won&#39;t be looping them -- only calling the functions once for the entirety of the program. Say, however, you add <code>while True:</code> in the <code>current_time()</code> and <code>balance_check()</code> functions... now then, <code>t1.cancel(); t2.cancel()</code> never gets reached because of the <code>while True</code>, which never ends, therefore you never go back to <code>await t1; await t2;</code>."}, {"owner": {"reputation": 102109, "user_id": 1600898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/01377f8b31f24b0265854666b29d0c03?s=128&d=identicon&r=PG", "display_name": "user4815162342", "link": "https://stackoverflow.com/users/1600898/user4815162342"}, "reply_to_user": {"reputation": 4673, "user_id": 1305461, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gsnQ6.jpg?s=128&g=1", "display_name": "Felipe", "link": "https://stackoverflow.com/users/1305461/felipe"}, "edited": false, "score": 1, "creation_date": 1572505261, "post_id": 58634302, "comment_id": 103582573, "body": "@FelipeFaria Your comment is incorrect - unlike coroutine objects, tasks <b>do not</b> have to be awaited to execute, they are automatically executed by the event loop &quot;in the background&quot;. If you don&#39;t believe, you can simply <i>run</i> the code from the answer and notice that it works."}, {"owner": {"reputation": 102109, "user_id": 1600898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/01377f8b31f24b0265854666b29d0c03?s=128&d=identicon&r=PG", "display_name": "user4815162342", "link": "https://stackoverflow.com/users/1600898/user4815162342"}, "reply_to_user": {"reputation": 1362, "user_id": 4701426, "user_type": "registered", "accept_rate": 46, "profile_image": "https://graph.facebook.com/859849924075240/picture?type=large", "display_name": "Saeed", "link": "https://stackoverflow.com/users/4701426/saeed"}, "edited": false, "score": 0, "creation_date": 1572505453, "post_id": 58634302, "comment_id": 103582648, "body": "@Saeed You can replace <code>asyncio.create_task()</code> with <code>loop.create_task()</code> in Python &lt; 3.7. However, I don&#39;t understand why you would get such an exception - I tested the code on Python 3.7, and it works both with or without <code>asyncio.run</code>. <a href=\"https://pastebin.com/SNeNsVWx\" rel=\"nofollow noreferrer\">Full code here.</a>"}, {"owner": {"reputation": 4673, "user_id": 1305461, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gsnQ6.jpg?s=128&g=1", "display_name": "Felipe", "link": "https://stackoverflow.com/users/1305461/felipe"}, "edited": false, "score": 0, "creation_date": 1572548969, "post_id": 58634302, "comment_id": 103604441, "body": "@user4815162342 You are right, my apologies -- got myself confused for a second. However, note that while this runs the code from <code>now</code> to <code>end</code>, it won&#39;t run code between a <code>start</code> to <code>end.</code> However, I can see a few modifications making it work.  Good share for the OP. Excuse my misunderstanding."}, {"owner": {"reputation": 102109, "user_id": 1600898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/01377f8b31f24b0265854666b29d0c03?s=128&d=identicon&r=PG", "display_name": "user4815162342", "link": "https://stackoverflow.com/users/1600898/user4815162342"}, "edited": false, "score": 1, "creation_date": 1572554221, "post_id": 58634302, "comment_id": 103606531, "body": "No problem, now I just wish I could get rid of the downvote. :) Regarding waiting for <code>start</code>, that&#39;s straightforward to achieve just by adding a sleep <i>before</i> spawning the tasks."}, {"owner": {"reputation": 4673, "user_id": 1305461, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gsnQ6.jpg?s=128&g=1", "display_name": "Felipe", "link": "https://stackoverflow.com/users/1305461/felipe"}, "edited": false, "score": 0, "creation_date": 1572574323, "post_id": 58634302, "comment_id": 103611198, "body": "Will be honest, my downvote is locked unless the post has a small edit. If you would be so kind, I&#39;ll return the vote :)"}, {"owner": {"reputation": 102109, "user_id": 1600898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/01377f8b31f24b0265854666b29d0c03?s=128&d=identicon&r=PG", "display_name": "user4815162342", "link": "https://stackoverflow.com/users/1600898/user4815162342"}, "reply_to_user": {"reputation": 4673, "user_id": 1305461, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gsnQ6.jpg?s=128&g=1", "display_name": "Felipe", "link": "https://stackoverflow.com/users/1305461/felipe"}, "edited": false, "score": 1, "creation_date": 1572590233, "post_id": 58634302, "comment_id": 103613991, "body": "@FelipeFaria Did the edit (with information about waiting for start_time), thanks for the frankness!"}, {"owner": {"reputation": 4673, "user_id": 1305461, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gsnQ6.jpg?s=128&g=1", "display_name": "Felipe", "link": "https://stackoverflow.com/users/1305461/felipe"}, "edited": false, "score": 1, "creation_date": 1572631258, "post_id": 58634302, "comment_id": 103630884, "body": "@user4815162342 Of course -- we ought to be honest out here. :)"}], "tags": [], "owner": {"reputation": 102109, "user_id": 1600898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/01377f8b31f24b0265854666b29d0c03?s=128&d=identicon&r=PG", "display_name": "user4815162342", "link": "https://stackoverflow.com/users/1600898/user4815162342"}, "is_accepted": true, "score": 2, "last_activity_date": 1572590179, "last_edit_date": 1572590179, "creation_date": 1572473394, "answer_id": 58634302, "question_id": 58633368, "link": "https://stackoverflow.com/questions/58633368/running-an-asyncio-loop-within-a-time-interval/58634302#58634302", "title": "Running an Asyncio loop within a time interval", "body": "<p>The problem is incorrect use of <code>await asyncio.wait([current_time(), balance_check(),])</code>.</p>\n\n<p>Awaiting <code>asyncio.wait()</code> waits for the specified awaitables to <em>complete</em>, i.e. either return a value or raise an exception. Since neither <code>current_time</code> nor <code>balance_check</code> ever return out of their infinite loops, the execution of <code>main()</code> never gets passed <code>await asyncio.wait(...)</code>, as this expression waits for both to finish. In turn, the <code>while</code> loop in <code>main()</code> never gets to its second iteration, and <code>loop.stop()</code> has no chance to run.</p>\n\n<p>If the code's intention was to use <code>asyncio.wait()</code> to give coroutines a chance to run, <code>asyncio.wait</code> is not the tool for that. Instead, one can just start the two tasks by calling <code>asyncio.create_task()</code>, and then <em>do nothing</em>. As long as the event loop can run (i.e. it's not blocked with a call to <code>time.sleep()</code> or similar), asyncio will automatically switch between the coroutines, in this case <code>current_time</code> and <code>balanced_check</code> at their ~1-millisecond pace. Of course, you will want to regain control by the <code>end_time</code> deadline, so \"doing nothing\" is best expressed as a single call to <code>asyncio.sleep()</code>:</p>\n\n<pre><code>async def main():\n    t1 = asyncio.create_task(current_time())\n    t2 = asyncio.create_task(balance_check())\n    end = dt.datetime.combine(dt.date.today(), end_time)\n    now = dt.datetime.now()\n    await asyncio.sleep((end - now).total_seconds())\n    print('loop stopped since {} is outside {} and {}'.format(now, start_time, end_time))\n    t1.cancel()\n    t2.cancel()\n</code></pre>\n\n<p>Note that an explicit <code>loop.stop()</code> is not even necessary, because <code>run_until_complete()</code> will automatically stop the loop once the given coroutine completes. Calling <code>cancel()</code> on the tasks has no practical effect because the loop stops pretty much immediately; it is included to make those tasks complete, so that the garbage collector doesn't warn about destroying tasks that are pending.</p>\n\n<p>As noted in the comments, this code doesn't wait for <code>start_time</code>, but that functionality is easily accomplished by adding another sleep before spawning the tasks.</p>\n"}, {"tags": [], "owner": {"reputation": 4673, "user_id": 1305461, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gsnQ6.jpg?s=128&g=1", "display_name": "Felipe", "link": "https://stackoverflow.com/users/1305461/felipe"}, "is_accepted": false, "score": 1, "last_activity_date": 1572495354, "last_edit_date": 1572495354, "creation_date": 1572473624, "answer_id": 58634351, "question_id": 58633368, "link": "https://stackoverflow.com/questions/58633368/running-an-asyncio-loop-within-a-time-interval/58634351#58634351", "title": "Running an Asyncio loop within a time interval", "body": "<p>You could use <a href=\"https://docs.python.org/3/library/asyncio-sync.html\" rel=\"nofollow noreferrer\">synchronizing primitives'</a> to do this, specifically <code>events</code>.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import datetime as dt\nimport asyncio\n\nasync def function(start_event, end_event):\n    # Waits until we get the start event command.\n    await start_event.wait()\n\n    # Run our function until we get the end_event being set to true.\n    index = 0\n    while not end_event.is_set():\n        print(f\"Function running; index {index}.\")\n        await asyncio.sleep(2)\n        index += 1\n\nasync def controller(start_event, end_event):\n    # Will usually be this. Commented out for testing purposes. Can be passed by main.\n    # Subtraction/addition does not work on dt.datetime(). Inequality does (&gt; or &lt;)\n    # now, start, end = dt.datetime.now().time(), dt.time(17, 24), dt.time(18, 0, 30)\n\n    now = dt.datetime.now()\n    start, end = now + dt.timedelta(seconds=-10), now + dt.timedelta(seconds=10)\n\n    # Starts our function.\n    print(f\"Starting at {start}. Ending in {end - now}. \")\n    start_event.set()\n\n    # Keeps checking until we pass the scheduled time.\n    while start &lt; now &lt; end:\n        print(f\"Ending in {end - now}.\")\n        await asyncio.sleep(2)\n        now = dt.datetime.now()\n\n    # Ends our function.\n    end_event.set()\n    print(f\"Function ended at {now}.\")\n\nasync def main():\n    # Creates two indepedent events.\n    # start_event is flagged when controller is ready for function to be ran (prevents misfires).\n    # end_event is flagged when controller see's start &lt; time.now &lt; end (line 30).\n    start_event = asyncio.Event()\n    end_event = asyncio.Event()\n\n    # Starts both functions at the same time.\n    await asyncio.gather(\n        controller(start_event, end_event), function(start_event, end_event)\n    )\n\nif __name__ == \"__main__\":\n    # Starting our process.\n    asyncio.run(main())\n</code></pre>\n\n<p>This method will require both <code>function</code> and <code>controller</code> to take up space in the <code>asyncio</code> loop. However, <code>function</code> will be locked for most of the time, and it will instead be the controller hogging loop resources with its <code>while</code> loop, so keep that in the back of your mind.</p>\n"}], "owner": {"reputation": 1362, "user_id": 4701426, "user_type": "registered", "accept_rate": 46, "profile_image": "https://graph.facebook.com/859849924075240/picture?type=large", "display_name": "Saeed", "link": "https://stackoverflow.com/users/4701426/saeed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1023, "favorite_count": 1, "accepted_answer_id": 58634302, "answer_count": 2, "score": 3, "last_activity_date": 1572590179, "creation_date": 1572468220, "last_edit_date": 1572468842, "question_id": 58633368, "link": "https://stackoverflow.com/questions/58633368/running-an-asyncio-loop-within-a-time-interval", "title": "Running an Asyncio loop within a time interval", "body": "<p><strong>Goal</strong>: run <code>main()</code> consisting of a bunch of asyncio functions between <code>start_time</code> and <code>end_time</code></p>\n\n<pre><code>import datetime as dt\n\nstart_time, end_time= dt.time(9, 29), dt.time(16, 20)\n</code></pre>\n\n<p><code>current_time()</code> just keeps adding the current time to work space. This time is used at several different points in the script not shown here</p>\n\n<pre><code>async def current_time(): \n    while True:\n        globals()['now'] = dt.datetime.now().replace(microsecond=0)\n        await asyncio.sleep(.001)\n</code></pre>\n\n<p>Another function that does something:</p>\n\n<pre><code>async def balance_check():\n    while True:    \n        #do something here\n        await asyncio.sleep(.001)\n</code></pre>\n\n<p><code>main()</code> awaits the previous coroutines:</p>\n\n<pre><code>async def main():\n    while True:\n#Issue:This is my issue. I am trying to make these\n#coroutines only run between start_time and end_time. \n#Outside this interval, I want the loop to \n#shut down and for the script to stop.\n        if start_time &lt; now.time() &lt; end_time : \n\n            await asyncio.wait([\n                    current_time(),\n                    balance_check(),\n                    ])\n        else:\n            print('loop stopped since {} is outside {} and {}'.format(now, start_time, end_time))\n            loop.stop() \n\n\nloop = asyncio.new_event_loop()\nasyncio.set_event_loop(loop)\ntry:\n    loop.run_until_complete(main())\nfinally:\n    loop.close()\n</code></pre>\n\n<p><strong><em>Issue</em></strong>: this keeps working even after end_time</p>\n"}, {"tags": ["python", "numpy", "tensorflow", "conv-neural-network", "max-pooling"], "comments": [{"owner": {"reputation": 2868, "user_id": 7212365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FBxLp.png?s=128&g=1", "display_name": "zihaozhihao", "link": "https://stackoverflow.com/users/7212365/zihaozhihao"}, "edited": false, "score": 1, "creation_date": 1572468744, "post_id": 58633364, "comment_id": 103573932, "body": "Do you want to max or avg pool? There is a conflict between your code and statement."}, {"owner": {"reputation": 486, "user_id": 5925476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97ca6ce6e4c775b9a79b629d6f4b7848?s=128&d=identicon&r=PG&f=1", "display_name": "mnabil", "link": "https://stackoverflow.com/users/5925476/mnabil"}, "reply_to_user": {"reputation": 2868, "user_id": 7212365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FBxLp.png?s=128&g=1", "display_name": "zihaozhihao", "link": "https://stackoverflow.com/users/7212365/zihaozhihao"}, "edited": false, "score": 0, "creation_date": 1572470285, "post_id": 58633364, "comment_id": 103574512, "body": "Sorry for this confusion. I need both of them at the end and they both have the same issue in the result dimensions. Big thanks for your attention to details; I corrected it now."}, {"owner": {"reputation": 2868, "user_id": 7212365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FBxLp.png?s=128&g=1", "display_name": "zihaozhihao", "link": "https://stackoverflow.com/users/7212365/zihaozhihao"}, "edited": false, "score": 1, "creation_date": 1572472473, "post_id": 58633364, "comment_id": 103575250, "body": "So what&#39;s your expected result dimensions? At least, the result looks correct to me. Your input is <code>(7,7,3)</code>, and your output is <code>(4,4,3)</code> because you use <code>SAME</code> padding. If you do not want pad, you should use <code>VALID</code> instead of <code>SAME</code>. Your comments and codes are contradicted."}, {"owner": {"reputation": 1747, "user_id": 11220884, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6wFcg.jpg?s=128&g=1", "display_name": "Tinu", "link": "https://stackoverflow.com/users/11220884/tinu"}, "edited": false, "score": 1, "creation_date": 1572513396, "post_id": 58633364, "comment_id": 103585737, "body": "Here&#39;s a good SO-post about how to calculate the output size of a convolution layer. The same applies to Max./Avg.-pooling layers: <a href=\"https://stackoverflow.com/questions/53580088/calculate-the-output-size-in-convolution-layer\" title=\"calculate the output size in convolution layer\">stackoverflow.com/questions/53580088/&hellip;</a>"}, {"owner": {"reputation": 486, "user_id": 5925476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97ca6ce6e4c775b9a79b629d6f4b7848?s=128&d=identicon&r=PG&f=1", "display_name": "mnabil", "link": "https://stackoverflow.com/users/5925476/mnabil"}, "reply_to_user": {"reputation": 2868, "user_id": 7212365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FBxLp.png?s=128&g=1", "display_name": "zihaozhihao", "link": "https://stackoverflow.com/users/7212365/zihaozhihao"}, "edited": false, "score": 0, "creation_date": 1572514435, "post_id": 58633364, "comment_id": 103586279, "body": "@zihaozhihao you are write. I wrongly reversed the padding schemes labels and passed &quot;SAME&quot; as no padding! Now, when I pass &quot;VALID&quot;, the dimensions are correct!  Can you please write that as an answer to accept it. Big thanks for your help and attention to details!"}, {"owner": {"reputation": 2868, "user_id": 7212365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FBxLp.png?s=128&g=1", "display_name": "zihaozhihao", "link": "https://stackoverflow.com/users/7212365/zihaozhihao"}, "edited": false, "score": 0, "creation_date": 1572538487, "post_id": 58633364, "comment_id": 103599727, "body": "I have added the answer. Please check it."}], "answers": [{"tags": [], "owner": {"reputation": 2868, "user_id": 7212365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FBxLp.png?s=128&g=1", "display_name": "zihaozhihao", "link": "https://stackoverflow.com/users/7212365/zihaozhihao"}, "is_accepted": true, "score": 1, "last_activity_date": 1572538449, "last_edit_date": 1572538449, "creation_date": 1572472031, "answer_id": 58634102, "question_id": 58633364, "link": "https://stackoverflow.com/questions/58633364/max-pool-a-single-image-in-tensorflow-using-tf-nn-avg-pool/58634102#58634102", "title": "Max pool a single image in tensorflow using &quot;tf.nn.avg_pool&quot;", "body": "<p>Your input is <code>(7,7,3)</code>, kernel size is <code>(3,3)</code> and stride is <code>(2,2)</code>. So if you do not want any paddings, (state in your comment), you should use <code>padding=\"VALID\"</code>, that will return a <code>(3,3)</code> tensor as output. If you use <code>padding=\"SAME\"</code>, it will return <code>(4,4)</code> tensor. </p>\n\n<p>Usually, the formula of calculating output size for SAME pad is:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>out_size = ceil(in_sizei/stride)\n</code></pre>\n\n<p>For VALID pad is:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>out_size = ceil(in_size-filter_size+1/stride)\n</code></pre>\n"}], "owner": {"reputation": 486, "user_id": 5925476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97ca6ce6e4c775b9a79b629d6f4b7848?s=128&d=identicon&r=PG&f=1", "display_name": "mnabil", "link": "https://stackoverflow.com/users/5925476/mnabil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 401, "favorite_count": 0, "accepted_answer_id": 58634102, "answer_count": 1, "score": 1, "last_activity_date": 1572538449, "creation_date": 1572468203, "last_edit_date": 1572512258, "question_id": 58633364, "link": "https://stackoverflow.com/questions/58633364/max-pool-a-single-image-in-tensorflow-using-tf-nn-avg-pool", "title": "Max pool a single image in tensorflow using &quot;tf.nn.avg_pool&quot;", "body": "<p>I want to apply \"tf.nn.max_pool()\" on a single image but I get a result with dimension that is totally different than the input:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import tensorflow as tf\nimport numpy as np\n\nifmaps_1 = tf.Variable(tf.random_uniform( shape=[ 7, 7, 3], minval=0, maxval=3, dtype=tf.int32))\n\nifmaps=tf.dtypes.cast(ifmaps_1, dtype=tf.float64)\n\nofmaps_tf = tf.nn.max_pool([ifmaps], ksize=[1, 3, 3, 1], strides=[1, 2, 2, 1], padding=\"SAME\")[0] # no padding\n\ninit = tf.initialize_all_variables()\nwith tf.Session() as sess:\n    sess.run(init)\n    print(\"ifmaps_tf = \")\n    print(ifmaps.eval())\n    print(\"ofmaps_tf = \")\n    result = sess.run(ofmaps_tf)\n    print(result)\n</code></pre>\n\n<p>I think this is related to trying to apply pooling to single example not on a batch. I need to do the pooling on a single example.</p>\n\n<p>Any help is appreciated.</p>\n"}, {"tags": ["python", "sql-server", "ssms", "pyodbc"], "comments": [{"owner": {"reputation": 2334, "user_id": 7948962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b64557f8a617effccaf4426f16e9035?s=128&d=identicon&r=PG&f=1", "display_name": "Jacob H", "link": "https://stackoverflow.com/users/7948962/jacob-h"}, "edited": false, "score": 0, "creation_date": 1572469417, "post_id": 58633363, "comment_id": 103574207, "body": "Two thoughts. A) You might need to refresh intellisense and 2) your login is different than the one in your code--one has access to the tables and one does not. I&#39;d start there."}, {"owner": {"reputation": 9, "user_id": 6062972, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153799154626329/picture?type=large", "display_name": "Zack S", "link": "https://stackoverflow.com/users/6062972/zack-s"}, "reply_to_user": {"reputation": 2334, "user_id": 7948962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b64557f8a617effccaf4426f16e9035?s=128&d=identicon&r=PG&f=1", "display_name": "Jacob H", "link": "https://stackoverflow.com/users/7948962/jacob-h"}, "edited": false, "score": 0, "creation_date": 1572469734, "post_id": 58633363, "comment_id": 103574332, "body": "I do not know what Intellisense is.   Re my login :  <code>(&#39;Driver={ODBC Driver 17 for SQL Server};&#39;                       &#39;Server=servername;&#39;                       &#39;Database=dbname;&#39;                       &#39;Trusted_Connection=Yes&#39;)</code>  Is the format of my connection. Pyodbc MUST have access to the tables, because when I run select * from statements on tables I create with it (on the server!), it displays their contents correctly. Shouldn&#39;t SSMS always have access to everything given I&#39;m logging in with windows auth as the only admin and user?"}, {"owner": {"reputation": 2334, "user_id": 7948962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b64557f8a617effccaf4426f16e9035?s=128&d=identicon&r=PG&f=1", "display_name": "Jacob H", "link": "https://stackoverflow.com/users/7948962/jacob-h"}, "edited": false, "score": 0, "creation_date": 1572469943, "post_id": 58633363, "comment_id": 103574395, "body": "Are you sure it&#39;s the same instance of SQL Server? You can have multiple running on the same computer. Intellisense is the tool that does all the pop up suggestion stuff in SSMS (and other programs). I was thinking it may just be an issue with you needing to refresh the cache before you can see the tables. Restarting SSMS has the same effect."}, {"owner": {"reputation": 9, "user_id": 6062972, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153799154626329/picture?type=large", "display_name": "Zack S", "link": "https://stackoverflow.com/users/6062972/zack-s"}, "reply_to_user": {"reputation": 2334, "user_id": 7948962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b64557f8a617effccaf4426f16e9035?s=128&d=identicon&r=PG&f=1", "display_name": "Jacob H", "link": "https://stackoverflow.com/users/7948962/jacob-h"}, "edited": false, "score": 0, "creation_date": 1572470104, "post_id": 58633363, "comment_id": 103574462, "body": "Tried re-starting SSMS, no change. To my knowledge, I only have one instance of SQL server running on this computer, Pyodbc can only connect to an instance I&#39;m running - does it create instances if none of the named instance exists?"}, {"owner": {"reputation": 97598, "user_id": 2144390, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6QjmY.jpg?s=128&g=1", "display_name": "Gord Thompson", "link": "https://stackoverflow.com/users/2144390/gord-thompson"}, "edited": false, "score": 1, "creation_date": 1572470547, "post_id": 58633363, "comment_id": 103574613, "body": "If you are not setting <code>autocommit=True</code> then are you remembering to <code>.commit()</code> your changes?"}, {"owner": {"reputation": 9, "user_id": 6062972, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153799154626329/picture?type=large", "display_name": "Zack S", "link": "https://stackoverflow.com/users/6062972/zack-s"}, "edited": false, "score": 0, "creation_date": 1572470842, "post_id": 58633363, "comment_id": 103574720, "body": "Gord, this was it. Thank You!"}], "answers": [{"tags": [], "owner": {"reputation": 97598, "user_id": 2144390, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6QjmY.jpg?s=128&g=1", "display_name": "Gord Thompson", "link": "https://stackoverflow.com/users/2144390/gord-thompson"}, "is_accepted": true, "score": 1, "last_activity_date": 1572562291, "last_edit_date": 1572562291, "creation_date": 1572474238, "answer_id": 58634438, "question_id": 58633363, "link": "https://stackoverflow.com/questions/58633363/pyodbc-can-create-alter-tables-but-i-cant-see-them-in-ssms/58634438#58634438", "title": "Pyodbc can create/alter tables, but I can&#39;t see them in SSMS", "body": "<p>SQL Server allows some DDL statements (e.g., <code>CREATE TABLE</code>) to be executed inside a transaction. Therefore we also have to remember to <code>commit()</code> those changes if we haven't specified <code>autocommit=True</code> on the Connection.</p>\n"}], "owner": {"reputation": 9, "user_id": 6062972, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153799154626329/picture?type=large", "display_name": "Zack S", "link": "https://stackoverflow.com/users/6062972/zack-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 354, "favorite_count": 0, "accepted_answer_id": 58634438, "answer_count": 1, "score": 0, "last_activity_date": 1572562291, "creation_date": 1572468194, "last_edit_date": 1572470940, "question_id": 58633363, "link": "https://stackoverflow.com/questions/58633363/pyodbc-can-create-alter-tables-but-i-cant-see-them-in-ssms", "title": "Pyodbc can create/alter tables, but I can&#39;t see them in SSMS", "body": "<p>Pyodbc is correctly connecting to the same db. When I run </p>\n\n<p><code>SELECT name FROM sys.databases;</code></p>\n\n<p><code>SELECT name FROM master.dbo.sysdatabases;</code></p>\n\n<p>I get the list of all the DBs I can see in MSSQLSMS. </p>\n\n<p>When I look at my Event Profiler in SSMS, I can see that Pyodbc is executing code actions on the same database in the same server as I look at with SSMS. I see my create table statements, select statements, that I'm running in Python with Pyodbc, executing on my SQL server. </p>\n\n<p>So why can I not see the tables I've created in SSMS? Why, when I run the same queries in SSMS, do I not see the table I've created using Pyodbc? </p>\n\n<p>I am extremely confused. Pyodbc appears to be connecting to my local SQL server correctly, and executing SQL code on it, but I'm not able to view the results using SSMS. I can find the table with Pyodbc, and Pyodbc and SSMS are both telling me they're looking at the same places, but SSMS can't see anything Pyodbc has done. </p>\n\n<p>EDIT : Solved</p>\n\n<p><code>conn.autocommit=True</code> is required for Pyodbc to make permanent changes.</p>\n"}, {"tags": ["python", "python-3.x", "web-scraping"], "comments": [{"owner": {"reputation": 1391, "user_id": 5178801, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/exq4J.jpg?s=128&g=1", "display_name": "J. Murray", "link": "https://stackoverflow.com/users/5178801/j-murray"}, "edited": false, "score": 0, "creation_date": 1572468194, "post_id": 58633317, "comment_id": 103573676, "body": "Are you certain this collection contains more than one item?  It might be working as advertised."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 1391, "user_id": 5178801, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/exq4J.jpg?s=128&g=1", "display_name": "J. Murray", "link": "https://stackoverflow.com/users/5178801/j-murray"}, "edited": false, "score": 0, "creation_date": 1572468355, "post_id": 58633317, "comment_id": 103573745, "body": "@J.Murray Use View Source and you&#39;ll see lots of matches."}, {"owner": {"reputation": 2967, "user_id": 4828815, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/--CqgH2V98Jg/AAAAAAAAAAI/AAAAAAAAABY/lilOgpMEIEs/photo.jpg?sz=128", "display_name": "Poojan", "link": "https://stackoverflow.com/users/4828815/poojan"}, "edited": false, "score": 0, "creation_date": 1572468391, "post_id": 58633317, "comment_id": 103573759, "body": "Make sure that there is no dynamic content loading happening there. Try printing <code>key_data</code> block and manually check whats there. Always compare your results with view source."}, {"owner": {"reputation": 1391, "user_id": 5178801, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/exq4J.jpg?s=128&g=1", "display_name": "J. Murray", "link": "https://stackoverflow.com/users/5178801/j-murray"}, "edited": false, "score": 0, "creation_date": 1572468396, "post_id": 58633317, "comment_id": 103573761, "body": "I&#39;m sure you will - but are you setting a breakpoint in your Python code and seeing whats in <b><i>that</i></b> collection?"}, {"owner": {"reputation": 11, "user_id": 12299651, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBgndkrE_A-6BCZWfDl53zQOJcf9VLQZPOgvEpM=k-s128", "display_name": "Monody365", "link": "https://stackoverflow.com/users/12299651/monody365"}, "reply_to_user": {"reputation": 1391, "user_id": 5178801, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/exq4J.jpg?s=128&g=1", "display_name": "J. Murray", "link": "https://stackoverflow.com/users/5178801/j-murray"}, "edited": false, "score": 0, "creation_date": 1572468589, "post_id": 58633317, "comment_id": 103573853, "body": "@J.Murray So I&#39;m looking at the site and in that section currently, it has GE, AMD, PG&amp;E, Fiat, and so on along with their respective stock prices. When I run this code, it only returns the first company and its price (in this case, GE). If I run <code>print(key_data2)</code>, I can see that all the other companies are listed under there too. I need it to get the rest of those companies."}, {"owner": {"reputation": 11, "user_id": 12299651, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBgndkrE_A-6BCZWfDl53zQOJcf9VLQZPOgvEpM=k-s128", "display_name": "Monody365", "link": "https://stackoverflow.com/users/12299651/monody365"}, "reply_to_user": {"reputation": 2967, "user_id": 4828815, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/--CqgH2V98Jg/AAAAAAAAAAI/AAAAAAAAABY/lilOgpMEIEs/photo.jpg?sz=128", "display_name": "Poojan", "link": "https://stackoverflow.com/users/4828815/poojan"}, "edited": false, "score": 0, "creation_date": 1572468738, "post_id": 58633317, "comment_id": 103573927, "body": "@Poojan Yup, I just tried running both <code>print(key_data)</code> and <code>print(key_data2)</code> and both of them contain all the info that I need. I&#39;m thinking the &lt;tr&gt; sections might be breaking it, but I&#39;m not sure how it would."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 12299651, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBgndkrE_A-6BCZWfDl53zQOJcf9VLQZPOgvEpM=k-s128", "display_name": "Monody365", "link": "https://stackoverflow.com/users/12299651/monody365"}, "edited": false, "score": 0, "creation_date": 1572469288, "post_id": 58633458, "comment_id": 103574156, "body": "So I just tried this and it&#39;s now giving me a <code>&#39;NoneType&#39; object is not callable</code> error."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 11, "user_id": 12299651, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBgndkrE_A-6BCZWfDl53zQOJcf9VLQZPOgvEpM=k-s128", "display_name": "Monody365", "link": "https://stackoverflow.com/users/12299651/monody365"}, "edited": false, "score": 0, "creation_date": 1572469399, "post_id": 58633458, "comment_id": 103574201, "body": "Need to add checking in case the items aren&#39;t found"}, {"owner": {"reputation": 11, "user_id": 12299651, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBgndkrE_A-6BCZWfDl53zQOJcf9VLQZPOgvEpM=k-s128", "display_name": "Monody365", "link": "https://stackoverflow.com/users/12299651/monody365"}, "edited": false, "score": 0, "creation_date": 1572469838, "post_id": 58633458, "comment_id": 103574361, "body": "Doing that gives me a <code>&#39;NoneType&#39; object has no attribute &#39;get_text&#39;</code> error. No worries though, I managed to fix it just by changing the value variable to <code>value = i.find(&#39;td&#39;, class_=&#39;colPrimary&#39;)</code> instead of <code>td.find</code>. Not 100% sure why it did, but regardless, thanks for getting me to the answer!"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 11, "user_id": 12299651, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBgndkrE_A-6BCZWfDl53zQOJcf9VLQZPOgvEpM=k-s128", "display_name": "Monody365", "link": "https://stackoverflow.com/users/12299651/monody365"}, "edited": false, "score": 0, "creation_date": 1572470018, "post_id": 58633458, "comment_id": 103574427, "body": "That&#39;s what yo did in the original code. But that only finds the first one in the table."}, {"owner": {"reputation": 11, "user_id": 12299651, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBgndkrE_A-6BCZWfDl53zQOJcf9VLQZPOgvEpM=k-s128", "display_name": "Monody365", "link": "https://stackoverflow.com/users/12299651/monody365"}, "edited": false, "score": 0, "creation_date": 1572470294, "post_id": 58633458, "comment_id": 103574519, "body": "No, I meant keeping the exact format you have now, but only changing the value one to <code>i.find</code> (the label is still using <code>td.find</code>). I just ran the edited version and it gave me all of the values I&#39;m looking for."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 11, "user_id": 12299651, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBgndkrE_A-6BCZWfDl53zQOJcf9VLQZPOgvEpM=k-s128", "display_name": "Monody365", "link": "https://stackoverflow.com/users/12299651/monody365"}, "edited": false, "score": 0, "creation_date": 1572470510, "post_id": 58633458, "comment_id": 103574595, "body": "That will use the same <code>value</code> for all the <code>label</code> in the same <code>tbody</code>."}, {"owner": {"reputation": 11, "user_id": 12299651, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBgndkrE_A-6BCZWfDl53zQOJcf9VLQZPOgvEpM=k-s128", "display_name": "Monody365", "link": "https://stackoverflow.com/users/12299651/monody365"}, "edited": false, "score": 0, "creation_date": 1572471032, "post_id": 58633458, "comment_id": 103574781, "body": "Here&#39;s the result that I got from using that modified version: <code>[(&#39;General Electric Co&#39;, &#39;10.11&#39;), (&#39;Advanced Micro Devices Inc&#39;, &#39;33.13&#39;), (&#39;PG&amp;E Corp&#39;, &#39;6.14&#39;), (&#39;Fiat Chrysler Automobiles NV&#39;, &#39;14.98&#39;), (&#39;Neuralstem Inc&#39;, &#39;1.83&#39;), (&#39;AT&amp;T Inc&#39;, &#39;38.20&#39;), (&#39;GrubHub Inc&#39;, &#39;34.00&#39;), (&#39;Mattel Inc&#39;, &#39;12.02&#39;)]</code>. The values are all correctly associated with their respective companies (which is what I wanted). Might just be pure coincidence that this worked out the way that I needed it to though."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 11, "user_id": 12299651, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBgndkrE_A-6BCZWfDl53zQOJcf9VLQZPOgvEpM=k-s128", "display_name": "Monody365", "link": "https://stackoverflow.com/users/12299651/monody365"}, "edited": false, "score": 0, "creation_date": 1572471611, "post_id": 58633458, "comment_id": 103574970, "body": "Sounds like you should post your final code as an answer, I might not be understanding your comments."}, {"owner": {"reputation": 11, "user_id": 12299651, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBgndkrE_A-6BCZWfDl53zQOJcf9VLQZPOgvEpM=k-s128", "display_name": "Monody365", "link": "https://stackoverflow.com/users/12299651/monody365"}, "edited": false, "score": 0, "creation_date": 1572472612, "post_id": 58633458, "comment_id": 103575291, "body": "Will do, thanks again for helping me get to my answer."}], "tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": false, "score": 1, "last_activity_date": 1572469388, "last_edit_date": 1572469388, "creation_date": 1572468627, "answer_id": 58633458, "question_id": 58633317, "link": "https://stackoverflow.com/questions/58633317/why-does-this-loop-only-take-the-first-value/58633458#58633458", "title": "Why Does This Loop Only Take the First Value?", "body": "<p>you're looping over all the tables, but not looping over all the items in each table.</p>\n\n<pre><code>def pull_active(url):\n    for i in key_data2:\n        for td in i.findall('td', class_='colText'):\n            label = td.find('a', class_='truncateMeTo1')\n            value = td.find('td', class_='colPrimary')\n            if a and col:\n                stock_list.append((label.get_text(), value.get_text()))\n    print(stock_list)\n\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1572470069, "post_id": 58633659, "comment_id": 103574446, "body": "There&#39;s more than one <code>truncateMeTo1</code> and <code>colPrimary</code> in each <code>tr</code>."}, {"owner": {"reputation": 11, "user_id": 12299651, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBgndkrE_A-6BCZWfDl53zQOJcf9VLQZPOgvEpM=k-s128", "display_name": "Monody365", "link": "https://stackoverflow.com/users/12299651/monody365"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1572470394, "post_id": 58633659, "comment_id": 103574554, "body": "@Barmar I just ran this one too and it gives me the same answer as yours does, it works as well. Just curious now about which one would be more efficient though."}], "tags": [], "owner": {"reputation": 513, "user_id": 6924051, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_L7OuioIem8/AAAAAAAAAAI/AAAAAAAAC-g/UV5ml0guI5M/photo.jpg?sz=128", "display_name": "kartheek", "link": "https://stackoverflow.com/users/6924051/kartheek"}, "is_accepted": false, "score": 0, "last_activity_date": 1572469608, "creation_date": 1572469608, "answer_id": 58633659, "question_id": 58633317, "link": "https://stackoverflow.com/questions/58633317/why-does-this-loop-only-take-the-first-value/58633659#58633659", "title": "Why Does This Loop Only Take the First Value?", "body": "<pre><code>import requests\nfrom bs4 import BeautifulSoup\nstock_list = []\nurl='https://markets.on.nytimes.com/research/markets/overview/overview.asp'\n\nresponse = requests.get(url)\nif not response.status_code == 200:\n    print(respose.status_code)\n\nresults_page = BeautifulSoup(response.content,'lxml')\nkey_data=results_page.find('table',class_=\"stock-spotlight-table\",id=\"summ_vol+\")\nkey_data2=key_data.find('tbody').find_all('tr')\n\ndef pull_active(url):\n    for i in key_data2:\n        label = i.find('a', class_='truncateMeTo1').get_text()\n        value = i.find('td', class_='colPrimary').get_text()\n        stock_list.append((label, value))\n    print(stock_list)\n\npull_active(url)\n</code></pre>\n\n<p>key_data2=key_data.find_all('tbody')</p>\n\n<p>This is the line that is causing issues in your solution.\n table row represents each item. So you need to find all the rows and iterate throught that</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 12299651, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBgndkrE_A-6BCZWfDl53zQOJcf9VLQZPOgvEpM=k-s128", "display_name": "Monody365", "link": "https://stackoverflow.com/users/12299651/monody365"}, "is_accepted": false, "score": 0, "last_activity_date": 1572472558, "creation_date": 1572472558, "answer_id": 58634182, "question_id": 58633317, "link": "https://stackoverflow.com/questions/58633317/why-does-this-loop-only-take-the-first-value/58634182#58634182", "title": "Why Does This Loop Only Take the First Value?", "body": "<p>Basing off of the answer by @Barmar , I was able to get a slightly different solution to this as well.</p>\n\n<pre><code>def pull_active(url):\n    for i in key_data2:\n        for td in i.find_all('td', class_='colText'):\n            label = td.find('a', class_='truncateMeTo1').get_text()\n            value = i.find('td', class_='colPrimary').get_text()\n        stock_list.append((label, value))\n    print(stock_list)\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 12299651, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBgndkrE_A-6BCZWfDl53zQOJcf9VLQZPOgvEpM=k-s128", "display_name": "Monody365", "link": "https://stackoverflow.com/users/12299651/monody365"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1572472558, "creation_date": 1572467960, "question_id": 58633317, "link": "https://stackoverflow.com/questions/58633317/why-does-this-loop-only-take-the-first-value", "title": "Why Does This Loop Only Take the First Value?", "body": "<p>So I'm trying to scrape the company names and stock prices from the \"Most Active\" section from URL in the code below and store it all in a list. I was thinking of using a loop so it'll grab all of them, but it's only getting the first company and its stock price for some reason. It seems that regardless of if I get it to search for 'tbody' or not, it'll return the same single company and price instead of looping through that entire section of the webpage. Any help would be greatly appreciated.</p>\n\n<pre><code>import requests\nfrom bs4 import BeautifulSoup\nstock_list = []\nurl='https://markets.on.nytimes.com/research/markets/overview/overview.asp'\n\nresponse = requests.get(url)\nif not response.status_code == 200:\n    print(respose.status_code)\n\nresults_page = BeautifulSoup(response.content,'lxml')\nkey_data=results_page.find('table',class_=\"stock-spotlight-table\",id=\"summ_vol+\")\nkey_data2=key_data.find_all('tbody')\n\ndef pull_active(url):\n    for i in key_data2:\n        label = i.find('a', class_='truncateMeTo1').get_text()\n        value = i.find('td', class_='colPrimary').get_text()\n        stock_list.append((label, value))\n    print(stock_list)\n\npull_active(url)\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "macos"], "answers": [{"comments": [{"owner": {"reputation": 313, "user_id": 4085484, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbc88d83e6cae4e62e35b4f5b317d009?s=128&d=identicon&r=PG&f=1", "display_name": "Alan W.", "link": "https://stackoverflow.com/users/4085484/alan-w"}, "edited": false, "score": 0, "creation_date": 1572537482, "post_id": 58633436, "comment_id": 103599205, "body": "That is fantastic @Alexander!  I have a tough time with comprehensions, and this looks very clean!"}], "tags": [], "owner": {"reputation": 86481, "user_id": 2411802, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/RA92x.jpg?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/2411802/alexander"}, "is_accepted": true, "score": 6, "last_activity_date": 1572468988, "last_edit_date": 1572468988, "creation_date": 1572468545, "answer_id": 58633436, "question_id": 58633300, "link": "https://stackoverflow.com/questions/58633300/how-to-create-a-dictionary-from-os-environment-variables/58633436#58633436", "title": "How to create a dictionary from OS environment variables?", "body": "<pre><code>config = {\n    'host': 'MYSQL_HOST',\n    'database': 'MYSQL_DATABASE',\n    'user': 'MYSQL_UID',\n    'password': 'MYSQL_PWD'\n}\ndb_config = {k: os.environ.get(v) for k, v in config.items()}\n</code></pre>\n\n<p>Depending on how you want to treat items that aren't in <code>os.environ</code>, you can use a conditional dict comprehension to ignore them.</p>\n\n<pre><code>db_config = {k: os.environ.get(v) for k, v in config.items()\n             if v in os.environ}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6489, "user_id": 5086255, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XiEYC.jpg?s=128&g=1", "display_name": "sahasrara62", "link": "https://stackoverflow.com/users/5086255/sahasrara62"}, "is_accepted": false, "score": 0, "last_activity_date": 1572468819, "creation_date": 1572468819, "answer_id": 58633494, "question_id": 58633300, "link": "https://stackoverflow.com/questions/58633300/how-to-create-a-dictionary-from-os-environment-variables/58633494#58633494", "title": "How to create a dictionary from OS environment variables?", "body": "<p>all ENV variable related to MYSQL in one dict</p>\n\n<pre><code>import os\n\nkeys = dict(os.environ).keys()\n\ndic = {}\nfor key in keys:\n    if 'MYSQL_' in key:\n        dic.update({key.split('MYSQL_')[1]:os.environ.get(key)})\n\nprint(dic)      \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 19107, "user_id": 216356, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/dc105cdd75395154274f9da3d7612a9f?s=128&d=identicon&r=PG", "display_name": "Noctis Skytower", "link": "https://stackoverflow.com/users/216356/noctis-skytower"}, "is_accepted": false, "score": 1, "last_activity_date": 1572546541, "last_edit_date": 1572546541, "creation_date": 1572470311, "answer_id": 58633790, "question_id": 58633300, "link": "https://stackoverflow.com/questions/58633300/how-to-create-a-dictionary-from-os-environment-variables/58633790#58633790", "title": "How to create a dictionary from OS environment variables?", "body": "<p>You may wish to rename <code>old_name</code> and <code>new_name</code> in the code below; and if you are sure that the environment variables will be present or require them to be available for your code to work correctly, you can remove the <code>if</code> section of the dictionary comprehension shown below:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import os\n\ntransformations = (\n    ('MYSQL_HOST', 'host'),\n    ('MYSQL_DATABASE', 'database'),\n    ('MYSQL_UID', 'user'),\n    ('MYSQL_PWD', 'password')\n)\n\ndb_config = {\n    new_name: os.environ[old_name]\n    for old_name, new_name in transformations\n    if old_name in os.environ\n}\n</code></pre>\n"}], "owner": {"reputation": 313, "user_id": 4085484, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbc88d83e6cae4e62e35b4f5b317d009?s=128&d=identicon&r=PG&f=1", "display_name": "Alan W.", "link": "https://stackoverflow.com/users/4085484/alan-w"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1983, "favorite_count": 2, "accepted_answer_id": 58633436, "answer_count": 3, "score": 5, "last_activity_date": 1572546541, "creation_date": 1572467871, "last_edit_date": 1572468630, "question_id": 58633300, "link": "https://stackoverflow.com/questions/58633300/how-to-create-a-dictionary-from-os-environment-variables", "title": "How to create a dictionary from OS environment variables?", "body": "<p>There are environment variables set in the operating system (macos):</p>\n\n<pre><code>MYSQL_HOST=\"127.0.0.1\"\nMYSQL_DATABASE=\"invoice\"\nMYSQL_UID=\"dude\"\nMYSQL_PWD=\"pass1234\"\n</code></pre>\n\n<p>I would like to build a list called <code>db_config</code> such that the end result will look like:</p>\n\n<pre><code>db_config = {'host':\"127.0.0.1\", 'database':\"invoice\", 'user':\"dude\",\n             'password':\"pass1234\"}\n</code></pre>\n\n<p>(Note that the environment variable names differ from the keys in <code>db_config</code>.  <code>db_config</code> will be used to pass database connection credentials, and the keys <strong>must</strong> be those listed in the above <code>db_config</code>.)</p>\n\n<p>I can \"manually\" set <code>db_config</code> using:</p>\n\n<pre><code>db_config={'host':os.environ['MYSQL_HOST'], 'database':os.environ['MYSQL_DATABASE'],\n           'user':os.environ['MYSQL_UID'], 'password':os.environ['MYSQL_PWD']}\n</code></pre>\n\n<p>...but it seems like there should be a cleaner more pythonic way of doing this, but I can't figure it out.</p>\n"}, {"tags": ["python", "pandas", "dataframe", "filter", "slice"], "comments": [{"owner": {"reputation": 2967, "user_id": 4828815, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/--CqgH2V98Jg/AAAAAAAAAAI/AAAAAAAAABY/lilOgpMEIEs/photo.jpg?sz=128", "display_name": "Poojan", "link": "https://stackoverflow.com/users/4828815/poojan"}, "edited": false, "score": 0, "creation_date": 1572468071, "post_id": 58633286, "comment_id": 103573624, "body": "Post what code you have tried so far. Some example data and expected output."}, {"owner": {"reputation": 1437, "user_id": 3633891, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/stGNM.png?s=128&g=1", "display_name": "Bill Chen", "link": "https://stackoverflow.com/users/3633891/bill-chen"}, "edited": false, "score": 0, "creation_date": 1572468195, "post_id": 58633286, "comment_id": 103573677, "body": "Please give a data example or code to start."}], "answers": [{"tags": [], "owner": {"reputation": 39, "user_id": 7245509, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9bb34da845a1087b7741698d1275c0dc?s=128&d=identicon&r=PG&f=1", "display_name": "Jozef Fujka", "link": "https://stackoverflow.com/users/7245509/jozef-fujka"}, "is_accepted": false, "score": 0, "last_activity_date": 1572468404, "last_edit_date": 1572468404, "creation_date": 1572468324, "answer_id": 58633395, "question_id": 58633286, "link": "https://stackoverflow.com/questions/58633286/sub-dataframe-creation-from-the-dataframe/58633395#58633395", "title": "Sub Dataframe creation from the Dataframe", "body": "<pre class=\"lang-py prettyprint-override\"><code>import pandas as pd\nimport pandas_datareader as wb\n\ndata = wb.DataReader('spy', 'yahoo', start='1/1/1978', end='30/10/2019')\ndata['Change'] = data['Close'].pct_change() * 100\ndata['Gaps'] = ((data['Open'] - data['Close'].shift(1))/data['Close'].shift(1)) * 100\ndata['Performance during day'] = ((data['Close'] - data['Open'])/data['Open']) * 100\ndata = round(data, 2)\nfiltered_data = data[data['Gaps'] &gt; 2]\nprint(filtered_data)\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 7245509, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9bb34da845a1087b7741698d1275c0dc?s=128&d=identicon&r=PG&f=1", "display_name": "Jozef Fujka", "link": "https://stackoverflow.com/users/7245509/jozef-fujka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1572468797, "creation_date": 1572467783, "last_edit_date": 1572468166, "question_id": 58633286, "link": "https://stackoverflow.com/questions/58633286/sub-dataframe-creation-from-the-dataframe", "title": "Sub Dataframe creation from the Dataframe", "body": "<p>I am facing a real struggle. I want to filter for a particular event but want to explore also events around that filtered event.</p>\n\n<p>Implicit example:</p>\n\n<p>I want to filter Dataframe for days when stocks opened with gaps. When event is identified I want to create chart to see how the stock traded when that particular event happened so I need data pre and post event.</p>\n\n<p>And here I am stuck I do not know whether to create additional column in which I will Boolean for the even I am looking for or if there is any other more elegant solution to do so.</p>\n\n<p>Appreciate your feedback!</p>\n"}, {"tags": ["python", "python-3.7", "zeep"], "answers": [{"comments": [{"owner": {"reputation": 524, "user_id": 5360405, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f188ee3a332cd0fffec25cf5f9ab0737?s=128&d=identicon&r=PG&f=1", "display_name": "JBGreen", "link": "https://stackoverflow.com/users/5360405/jbgreen"}, "edited": false, "score": 0, "creation_date": 1572469706, "post_id": 58633488, "comment_id": 103574326, "body": "There&#39;s nothing in the question suggesting that they use anaconda."}], "tags": [], "owner": {"reputation": 1437, "user_id": 3633891, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/stGNM.png?s=128&g=1", "display_name": "Bill Chen", "link": "https://stackoverflow.com/users/3633891/bill-chen"}, "is_accepted": false, "score": 0, "last_activity_date": 1572468785, "creation_date": 1572468785, "answer_id": 58633488, "question_id": 58633268, "link": "https://stackoverflow.com/questions/58633268/upgrading-python-2-7-to-3-7-and-implementing-zeep-for-soap-calls/58633488#58633488", "title": "Upgrading Python 2.7 to 3.7 and implementing zeep for SOAP calls", "body": "<p>I have the similar issue with the library <code>zmq</code> after I update from python 3.4 to 3.7. What I did is I create a new environment and reinstall all the libraries using:</p>\n\n<p>First, get the environment file:</p>\n\n<pre><code>conda env create -n new_env python=3.7\n</code></pre>\n\n<p>Then use the new environment: <code>conda activate new_env</code></p>\n\n<p>Reinstall all the libraries. </p>\n"}], "owner": {"reputation": 1, "user_id": 12299715, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c6c67f6c65cddec45d7a7815a0bb4dc?s=128&d=identicon&r=PG&f=1", "display_name": "LearningCode", "link": "https://stackoverflow.com/users/12299715/learningcode"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1572468983, "creation_date": 1572467692, "last_edit_date": 1572468983, "question_id": 58633268, "link": "https://stackoverflow.com/questions/58633268/upgrading-python-2-7-to-3-7-and-implementing-zeep-for-soap-calls", "title": "Upgrading Python 2.7 to 3.7 and implementing zeep for SOAP calls", "body": "<p>Upgrading to Python 3.7 and need to implement zeep for SOAP calls. </p>\n\n<p>I am running into this issue:</p>\n\n<p><code>AttributeError: 'Client' object has no attribute 'factory'</code></p>\n\n<p>Code:</p>\n\n<pre><code>from zeep.client import Client\n\nclass UpgradePython(object):\n\n    def __init__(self, wsdl, api_code):\n        logging.basicConfig(level=logging.INFO)\n        logging.getLogger('zeep.client').setLevel(logging.INFO)\n        self.client = Client(wsdl)\n        self.api = api_code\n</code></pre>\n"}, {"tags": ["python", "string", "recursion"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 12299764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0004398c7cf2f04fe29c61aa96f705ff?s=128&d=identicon&r=PG", "display_name": "Invoke Logic", "link": "https://stackoverflow.com/users/12299764/invoke-logic"}, "is_accepted": false, "score": 0, "last_activity_date": 1573078669, "last_edit_date": 1573078669, "creation_date": 1572468054, "answer_id": 58633329, "question_id": 58633252, "link": "https://stackoverflow.com/questions/58633252/recursion-countup-with-string-output/58633329#58633329", "title": "Recursion countup with string output", "body": "<p>For start, this is a basically a duplicate of <a href=\"https://stackoverflow.com/q/17127355/\">python recursive function that prints from 0 to n?</a> and <a href=\"https://stackoverflow.com/q/46201436/\">recursion, Python, countup, countdown</a></p>\n\n<p>Change your ending of the print with <code>print(n, end = ' ')</code> to avoid the new line. See <a href=\"https://stackoverflow.com/q/493386/\">How to print without newline or space?\n</a></p>\n\n<p>Also, your default argument should be <code>n=1</code> to comply with <code>it would count up from 1</code> assuming the call of <code>countup(5)</code></p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def countup(N, n=1):\n    print(n, end = ' ')\n    if n &lt; N:\n        countup(N, n + 1)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 39, "user_id": 12228208, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97c9dc63abe6c597b0fd0efa8d3ba44f?s=128&d=identicon&r=PG&f=1", "display_name": "ellezi", "link": "https://stackoverflow.com/users/12228208/ellezi"}, "edited": false, "score": 0, "creation_date": 1572468539, "post_id": 58633367, "comment_id": 103573826, "body": "can I ask what &quot;res&quot; means?"}, {"owner": {"reputation": 36473, "user_id": 12046409, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZRRhI.jpg?s=128&g=1", "display_name": "JohanC", "link": "https://stackoverflow.com/users/12046409/johanc"}, "reply_to_user": {"reputation": 39, "user_id": 12228208, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97c9dc63abe6c597b0fd0efa8d3ba44f?s=128&d=identicon&r=PG&f=1", "display_name": "ellezi", "link": "https://stackoverflow.com/users/12228208/ellezi"}, "edited": false, "score": 0, "creation_date": 1572468651, "post_id": 58633367, "comment_id": 103573878, "body": "<code>res</code> is a local variable with the temporary result. It&#39;s a string where you build up the result."}], "tags": [], "owner": {"reputation": 36473, "user_id": 12046409, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZRRhI.jpg?s=128&g=1", "display_name": "JohanC", "link": "https://stackoverflow.com/users/12046409/johanc"}, "is_accepted": false, "score": 1, "last_activity_date": 1572468774, "last_edit_date": 1572468774, "creation_date": 1572468217, "answer_id": 58633367, "question_id": 58633252, "link": "https://stackoverflow.com/questions/58633252/recursion-countup-with-string-output/58633367#58633367", "title": "Recursion countup with string output", "body": "<p>If you need to return a string, think about returning strings. The first part of your result is <code>n</code> converted to a string: <code>str(n)</code>. While you're not yet done, you append a space followed by the <em>countup</em> of the rest of the numbers. Like so:</p>\n\n<pre><code>def countup(N, n=1):\n    res = str(n)\n    if n &lt; N:\n        res += ' ' + countup(N, n + 1)\n    return res\n\nprint(countup(5))\n</code></pre>\n\n<p>Another version, without the need of a local variable, is:</p>\n\n<pre><code>def countup(N, n=1):\n    if n &lt; N:\n        return str(n) + ' ' + countup(N, n + 1)\n    else:\n        return str(n)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21440, "user_id": 225020, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/6ae07ec5b34fce5a6c5437fbdab9f079?s=128&d=identicon&r=PG", "display_name": "Jab", "link": "https://stackoverflow.com/users/225020/jab"}, "is_accepted": false, "score": 1, "last_activity_date": 1572470874, "creation_date": 1572470874, "answer_id": 58633882, "question_id": 58633252, "link": "https://stackoverflow.com/questions/58633252/recursion-countup-with-string-output/58633882#58633882", "title": "Recursion countup with string output", "body": "<p>Why not just use <code>str.join</code>? No recursion needed here.</p>\n\n<pre><code>def countup(N, n=1):\n    return ' '.join(map(str, range(n, N)))\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 12228208, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97c9dc63abe6c597b0fd0efa8d3ba44f?s=128&d=identicon&r=PG&f=1", "display_name": "ellezi", "link": "https://stackoverflow.com/users/12228208/ellezi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 372, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1573078669, "creation_date": 1572467624, "last_edit_date": 1572467648, "question_id": 58633252, "link": "https://stackoverflow.com/questions/58633252/recursion-countup-with-string-output", "title": "Recursion countup with string output", "body": "<p>I need to do a countup value that prints as a string  -- so if the user would enter 5 it would count up from 1 -- ' 1 2 3 4 5' in a string and not seperate lines. This is what i have for a basic recursion function that counts up however it is not giving me the output of a string. Any help would be much appreciated</p>\n\n<pre><code>def countup(N, n=0):\n    print(n)\n    if n &lt; N:\n        countup(N, n + 1)\n</code></pre>\n"}, {"tags": ["python", "whitespace"], "answers": [{"tags": [], "owner": {"reputation": 1113, "user_id": 5656533, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/829d758998db1e4a910de7b8c7dfd0ac?s=128&d=identicon&r=PG", "display_name": "Aaron Bentley", "link": "https://stackoverflow.com/users/5656533/aaron-bentley"}, "is_accepted": false, "score": 1, "last_activity_date": 1572467723, "creation_date": 1572467723, "answer_id": 58633272, "question_id": 58633237, "link": "https://stackoverflow.com/questions/58633237/what-does-strip-consider-whitespace/58633272#58633272", "title": "What does strip() consider whitespace?", "body": "<p>Yes, it includes newline and vertical tab.  The full definition is accessible as string.whitespace.</p>\n\n<p><a href=\"https://docs.python.org/3.8/library/string.html?highlight=whitespace#string.whitespace\" rel=\"nofollow noreferrer\">https://docs.python.org/3.8/library/string.html?highlight=whitespace#string.whitespace</a></p>\n"}, {"tags": [], "owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "is_accepted": false, "score": 3, "last_activity_date": 1580606258, "creation_date": 1580606258, "answer_id": 60022511, "question_id": 58633237, "link": "https://stackoverflow.com/questions/58633237/what-does-strip-consider-whitespace/60022511#60022511", "title": "What does strip() consider whitespace?", "body": "<p>Python's definition of whitespace, as used by <code>str.strip</code> and <code>str.isspace</code>, <a href=\"https://docs.python.org/3/library/stdtypes.html#str.isspace\" rel=\"nofollow noreferrer\">is as follows</a>:</p>\n\n<blockquote>\n  <p>A character is <em>whitespace</em> if in the Unicode character database (see <a href=\"https://docs.python.org/3/library/unicodedata.html#module-unicodedata\" rel=\"nofollow noreferrer\"><code>unicodedata</code></a>), either its general category is <code>Zs</code> (\u201cSeparator, space\u201d), or its bidirectional class is one of <code>WS</code>, <code>B</code>, or <code>S</code>.</p>\n</blockquote>\n\n<p>This is different from C's <code>isspace</code>, as it includes Unicode characters outside the ASCII range, as well as a few ASCII characters that C's <code>isspace</code> does not count as whitespace. It is also different from <code>string.whitespace</code>, even for ASCII characters.</p>\n\n<p>As of CPython 3.8.1, the complete list (as defined in the source code, and subject to change) <a href=\"https://github.com/python/cpython/blob/v3.8.1/Objects/unicodetype_db.h#L6148\" rel=\"nofollow noreferrer\">is as follows</a>:</p>\n\n<pre><code>/* Returns 1 for Unicode characters having the bidirectional\n * type 'WS', 'B' or 'S' or the category 'Zs', 0 otherwise.\n */\nint _PyUnicode_IsWhitespace(const Py_UCS4 ch)\n{\n    switch (ch) {\n    case 0x0009:\n    case 0x000A:\n    case 0x000B:\n    case 0x000C:\n    case 0x000D:\n    case 0x001C:\n    case 0x001D:\n    case 0x001E:\n    case 0x001F:\n    case 0x0020:\n    case 0x0085:\n    case 0x00A0:\n    case 0x1680:\n    case 0x2000:\n    case 0x2001:\n    case 0x2002:\n    case 0x2003:\n    case 0x2004:\n    case 0x2005:\n    case 0x2006:\n    case 0x2007:\n    case 0x2008:\n    case 0x2009:\n    case 0x200A:\n    case 0x2028:\n    case 0x2029:\n    case 0x202F:\n    case 0x205F:\n    case 0x3000:\n        return 1;\n    }\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 3225, "user_id": 2052436, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d0b7ab056e97ed88f05549537c42baa4?s=128&d=identicon&r=PG", "display_name": "user2052436", "link": "https://stackoverflow.com/users/2052436/user2052436"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1580606258, "creation_date": 1572467540, "last_edit_date": 1572471262, "question_id": 58633237, "link": "https://stackoverflow.com/questions/58633237/what-does-strip-consider-whitespace", "title": "What does strip() consider whitespace?", "body": "<p>Python's <code>strip</code> functions remove whitespace by default.</p>\n\n<p>What is Python's whitespace?</p>\n\n<p>Is it same as <code>isspace</code> in C/C++, i.e. includes new line, vertical tab, etc.?</p>\n"}, {"tags": ["python", "numpy", "networkx", "graph-theory"], "comments": [{"owner": {"reputation": 633, "user_id": 6332190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/472762a3a772c0c8986d8b3f45e1f9b7?s=128&d=identicon&r=PG&f=1", "display_name": "ComplexGates", "link": "https://stackoverflow.com/users/6332190/complexgates"}, "edited": false, "score": 0, "creation_date": 1572485572, "post_id": 58633225, "comment_id": 103578351, "body": "To clarify, in the third condition example, you say &quot;node 1 could be connected to 2 other nodes in the graph&quot;.  Does this include node 3?  In other words, does node 1 have degree of  2 or 3?"}, {"owner": {"reputation": 65, "user_id": 11838510, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89c4b25a16039604f40bb0683e8006ef?s=128&d=identicon&r=PG&f=1", "display_name": "Newbietocoding", "link": "https://stackoverflow.com/users/11838510/newbietocoding"}, "reply_to_user": {"reputation": 633, "user_id": 6332190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/472762a3a772c0c8986d8b3f45e1f9b7?s=128&d=identicon&r=PG&f=1", "display_name": "ComplexGates", "link": "https://stackoverflow.com/users/6332190/complexgates"}, "edited": false, "score": 0, "creation_date": 1572486479, "post_id": 58633225, "comment_id": 103578529, "body": "Apologies, I see where you are coming from. It would have a degree of 2. Where one of the already established edges is between 1 and 3."}, {"owner": {"reputation": 633, "user_id": 6332190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/472762a3a772c0c8986d8b3f45e1f9b7?s=128&d=identicon&r=PG&f=1", "display_name": "ComplexGates", "link": "https://stackoverflow.com/users/6332190/complexgates"}, "edited": false, "score": 0, "creation_date": 1572487939, "post_id": 58633225, "comment_id": 103578798, "body": "OK, thanks.  One more question.  In your example, from what I understand, A has total weight 0.125 + 0.75 = 0.875, and B has total weight 0.125 + 1.2 = 1.325, so edge A-B should have weight 1/sqrt(1.325 * 0.875) = 1/sqrt(1.159375) = 1/1.0767427733679016 = 0.928726920425144.  Not the 1/sqrt(2.2).  Where did 2.2 come from?"}, {"owner": {"reputation": 65, "user_id": 11838510, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89c4b25a16039604f40bb0683e8006ef?s=128&d=identicon&r=PG&f=1", "display_name": "Newbietocoding", "link": "https://stackoverflow.com/users/11838510/newbietocoding"}, "reply_to_user": {"reputation": 633, "user_id": 6332190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/472762a3a772c0c8986d8b3f45e1f9b7?s=128&d=identicon&r=PG&f=1", "display_name": "ComplexGates", "link": "https://stackoverflow.com/users/6332190/complexgates"}, "edited": false, "score": 0, "creation_date": 1572488557, "post_id": 58633225, "comment_id": 103578911, "body": "Yes you are right there, have amended accordingly."}, {"owner": {"reputation": 1246, "user_id": 11079758, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-6YXHf51acw8/AAAAAAAAAAI/AAAAAAAABcA/fd8wNCbBg9E/photo.jpg?sz=128", "display_name": "Yusuf Baktir", "link": "https://stackoverflow.com/users/11079758/yusuf-baktir"}, "edited": false, "score": 0, "creation_date": 1572498200, "post_id": 58633225, "comment_id": 103580750, "body": "The code should be blazingly fast now. See the first solution."}, {"owner": {"reputation": 1246, "user_id": 11079758, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-6YXHf51acw8/AAAAAAAAAAI/AAAAAAAABcA/fd8wNCbBg9E/photo.jpg?sz=128", "display_name": "Yusuf Baktir", "link": "https://stackoverflow.com/users/11079758/yusuf-baktir"}, "edited": false, "score": 0, "creation_date": 1572523528, "post_id": 58633225, "comment_id": 103591236, "body": "Does the answer work? Can you accept the answer?"}, {"owner": {"reputation": 1246, "user_id": 11079758, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-6YXHf51acw8/AAAAAAAAAAI/AAAAAAAABcA/fd8wNCbBg9E/photo.jpg?sz=128", "display_name": "Yusuf Baktir", "link": "https://stackoverflow.com/users/11079758/yusuf-baktir"}, "edited": false, "score": 0, "creation_date": 1572526401, "post_id": 58633225, "comment_id": 103592846, "body": "Can you also upvote?  I have worked hard on this"}], "answers": [{"comments": [{"owner": {"reputation": 65, "user_id": 11838510, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89c4b25a16039604f40bb0683e8006ef?s=128&d=identicon&r=PG&f=1", "display_name": "Newbietocoding", "link": "https://stackoverflow.com/users/11838510/newbietocoding"}, "edited": false, "score": 0, "creation_date": 1572478493, "post_id": 58633719, "comment_id": 103576882, "body": "I do not think outputs the correct values. However after compiling I realised when the graph has many many nodes (1000), due to the nature of the nested for loops it can take a long time. As the application, is time sensitive, could there possible be another way to do this, doesnt have to use numpy"}, {"owner": {"reputation": 1246, "user_id": 11079758, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-6YXHf51acw8/AAAAAAAAAAI/AAAAAAAABcA/fd8wNCbBg9E/photo.jpg?sz=128", "display_name": "Yusuf Baktir", "link": "https://stackoverflow.com/users/11079758/yusuf-baktir"}, "reply_to_user": {"reputation": 65, "user_id": 11838510, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89c4b25a16039604f40bb0683e8006ef?s=128&d=identicon&r=PG&f=1", "display_name": "Newbietocoding", "link": "https://stackoverflow.com/users/11838510/newbietocoding"}, "edited": false, "score": 0, "creation_date": 1572482146, "post_id": 58633719, "comment_id": 103577656, "body": "If you want speed, you have to rely on numpy. I will fix the outcome but looping might be inavoidable. Do you still want the solution with the loop?"}, {"owner": {"reputation": 65, "user_id": 11838510, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89c4b25a16039604f40bb0683e8006ef?s=128&d=identicon&r=PG&f=1", "display_name": "Newbietocoding", "link": "https://stackoverflow.com/users/11838510/newbietocoding"}, "edited": false, "score": 0, "creation_date": 1572482538, "post_id": 58633719, "comment_id": 103577734, "body": "If it is possible to design a solution without loops then that would be great! But if not then loops can work as long as the output is correct. Thanks!"}, {"owner": {"reputation": 1246, "user_id": 11079758, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-6YXHf51acw8/AAAAAAAAAAI/AAAAAAAABcA/fd8wNCbBg9E/photo.jpg?sz=128", "display_name": "Yusuf Baktir", "link": "https://stackoverflow.com/users/11079758/yusuf-baktir"}, "reply_to_user": {"reputation": 65, "user_id": 11838510, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89c4b25a16039604f40bb0683e8006ef?s=128&d=identicon&r=PG&f=1", "display_name": "Newbietocoding", "link": "https://stackoverflow.com/users/11838510/newbietocoding"}, "edited": false, "score": 1, "creation_date": 1572498174, "post_id": 58633719, "comment_id": 103580743, "body": "I have solved it all with Matrixes for you! Enjoy it. It should be blazingly fast"}], "tags": [], "owner": {"reputation": 1246, "user_id": 11079758, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-6YXHf51acw8/AAAAAAAAAAI/AAAAAAAABcA/fd8wNCbBg9E/photo.jpg?sz=128", "display_name": "Yusuf Baktir", "link": "https://stackoverflow.com/users/11079758/yusuf-baktir"}, "is_accepted": true, "score": 1, "last_activity_date": 1572487018, "last_edit_date": 1572487018, "creation_date": 1572469935, "answer_id": 58633719, "question_id": 58633225, "link": "https://stackoverflow.com/questions/58633225/is-there-a-way-to-create-custom-normalised-numpy-array-given-a-networkx-graph-co/58633719#58633719", "title": "Is there a way to create custom normalised numpy array given a networkx graph containing nodes and weights in python", "body": "<h2>Solution 1</h2>\n\n<pre><code>import networkx as nx\nFG=nx.Graph()\nFG.add_weighted_edges_from([('A','B',0.125),('A','C',0.75),('B','D',1.2),('C','D',0.375)])\n\nlength = len(FG.nodes())\nmatrix = nx.convert_matrix.to_numpy_matrix(FG)\nnew_matrix = np.zeros((length,length))\nnew_matrix = 1/np.sqrt(matrix.sum(axis=1)*matrix.sum(axis=0))\nnew_matrix[matrix==0] = 0\nnp.fill_diagonal(new_matrix,1)\n\n\nnew_matrix\nmatrix([[1.        , 0.92872692, 1.00790526, 0.        ],\n        [0.92872692, 1.        , 0.        , 0.69223218],\n        [1.00790526, 0.        , 1.        , 0.75124823],\n        [0.        , 0.69223218, 0.75124823, 1.        ]])\n\n</code></pre>\n\n<h2>Solution 2</h2>\n\n<pre><code>import networkx as nx\nFG=nx.Graph()\nFG.add_weighted_edges_from([('A','B',0.125),('A','C',0.75),('B','D',1.2),('C','D',0.375)])\n\nlength = len(FG.nodes())\nmatrix = nx.convert_matrix.to_numpy_matrix(FG)\nnew_matrix = np.zeros((length,length))\n\nimport numpy as np\nfor i in range(length):\n    for j in range(length):\n        if i == j:\n            new_matrix[i,j] = 1\n        elif matrix[i,j] == 0:\n            new_matrix[i,j] = 0\n        else:\n            w_1 = matrix[:,i].sum()\n            w_2 = matrix[j,:].sum()\n            new_matrix[i,j] = 1/np.sqrt(w_1*w_2)\nnew_matrix\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 11838510, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89c4b25a16039604f40bb0683e8006ef?s=128&d=identicon&r=PG&f=1", "display_name": "Newbietocoding", "link": "https://stackoverflow.com/users/11838510/newbietocoding"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 136, "favorite_count": 0, "accepted_answer_id": 58633719, "answer_count": 1, "score": 1, "last_activity_date": 1572488502, "creation_date": 1572467498, "last_edit_date": 1572488502, "question_id": 58633225, "link": "https://stackoverflow.com/questions/58633225/is-there-a-way-to-create-custom-normalised-numpy-array-given-a-networkx-graph-co", "title": "Is there a way to create custom normalised numpy array given a networkx graph containing nodes and weights in python", "body": "<p>I have a networkx undirected and weighted graph which has 'n' amount of nodes. I want to create a symmetric custom numpy matrix such that it is of shape n by n. I am trying to design a solution which is not dependant on the 'name' given to the node when created.</p>\n\n<p>Each edge has a given weight.</p>\n\n<p>Only three rules need to apply:</p>\n\n<ol>\n<li>Diagonal of the matrix needs to equal to 1.</li>\n<li>If two nodes in the graph are not connected then that position in the array is populated with 0. For eg if node 1 and node 2 are not connected then position(1,2) and position(2,1) equal to 0. </li>\n<li>If two nodes are connected. For each of the nodes I need to calculate the sum of weight of all edges associated with that node and then apply <code>1/sqrt(w_1*w_2)</code>. For eg if nodes 1 and 3 are connected. Node 1 could be connected to 2 nodes in the graph, where the edge weight of those two connections are 0.6 and 0.4 respectively, therefore w_1=0.6+0.4. Node 3 could be connected to 3 nodes in the graph, where the edge weight is 0.5, 0.2, 0.1 respectively, w_2 =0.5+ 0.2+ 0.1. Hence position(1,3) and position(3,1) equal to 1/sqrt(1*0.8) = 1/sqrt(0.8).</li>\n</ol>\n\n<p>I do realise that networkx has a built in normalized_laplacian_matrix functionality but from my understanding it does not build what I am looking for.</p>\n\n<pre><code>Example:\n    FG=nx.Graph()\n    FG.add_weighted_edges_from([('A','B',0.125),('A','C',0.75),('B','D',1.2),('C','D',0.375)])\n</code></pre>\n\n<p>Therefore this should yield the following matrix</p>\n\n<pre><code>   ([[1.        , 0.92872692, 1.00790526, 0.        ],\n    [0.92872692, 1.        , 0.        , 0.69223218],\n    [1.00790526, 0.        , 1.        , 0.75124823],\n    [0.        , 0.69223218, 0.75124823, 1.        ]])    \n</code></pre>\n"}, {"tags": ["python", "python-3.x", "pandas", "statsmodels"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 2, "creation_date": 1572468980, "post_id": 58633219, "comment_id": 103574021, "body": "These <code>nan</code> compatible integer dtypes are <i>relatively</i> new to pandas, and there is still a warning the the API is not stable, so likely, libraries that rely on / work with pandas won&#39;t entirely incorporate them for some time. In any case, statsmodels is built on top of numpy, not pandas."}, {"owner": {"reputation": 18838, "user_id": 333700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad13088a623822caf74e635a68a55eae?s=128&d=identicon&r=PG", "display_name": "Josef", "link": "https://stackoverflow.com/users/333700/josef"}, "edited": false, "score": 1, "creation_date": 1572495859, "post_id": 58633219, "comment_id": 103580293, "body": "the computation will have to be in float64 to get reasonable numerical precision, so any int dtype will not help for memory reduction in the model fit."}, {"owner": {"reputation": 1748, "user_id": 1735215, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/FMhHx.png?s=128&g=1", "display_name": "0range", "link": "https://stackoverflow.com/users/1735215/0range"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1572523710, "post_id": 58633219, "comment_id": 103591331, "body": "@juanpa.arrivillaga Thanks, this is a valuable hint. I was not aware of that. The problem with numpy seems to be that <code>nan</code> implies float."}, {"owner": {"reputation": 1748, "user_id": 1735215, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/FMhHx.png?s=128&g=1", "display_name": "0range", "link": "https://stackoverflow.com/users/1735215/0range"}, "reply_to_user": {"reputation": 18838, "user_id": 333700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad13088a623822caf74e635a68a55eae?s=128&d=identicon&r=PG", "display_name": "Josef", "link": "https://stackoverflow.com/users/333700/josef"}, "edited": false, "score": 0, "creation_date": 1572524052, "post_id": 58633219, "comment_id": 103591480, "body": "@Josef Do you mean on the level of <code>statsmodels.formula.api.logit</code> or do you mean for logit regressions in general? The latter is not true; imagine the variable in question to be a dummy variable. I reduced the example to highlight the issue that I am asking about (which is the failure of <code>statsmodels.formula.api</code> to work with pandas int types). This does not change if you include further explanatory variables. As mentioned in the OP, I am aware of the fact that regressions should not be done with only a dummy as explaining variable."}, {"owner": {"reputation": 18838, "user_id": 333700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad13088a623822caf74e635a68a55eae?s=128&d=identicon&r=PG", "display_name": "Josef", "link": "https://stackoverflow.com/users/333700/josef"}, "edited": false, "score": 0, "creation_date": 1572525860, "post_id": 58633219, "comment_id": 103592529, "body": "patsy builds a design matrix, <code>exog</code>, from the formula and original data. That design matrix includes the dummy variables and should be float64 for the computation. (It might work with lower precision numerical types in the fit, but that has not been verified.)"}, {"owner": {"reputation": 18838, "user_id": 333700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad13088a623822caf74e635a68a55eae?s=128&d=identicon&r=PG", "display_name": "Josef", "link": "https://stackoverflow.com/users/333700/josef"}, "edited": false, "score": 0, "creation_date": 1572525949, "post_id": 58633219, "comment_id": 103592581, "body": "Having only dummy variables as regressors is not a problem. The simplest case is when we compare means across two samples using a regression model like OLS, Logit or GLM."}], "owner": {"reputation": 1748, "user_id": 1735215, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/FMhHx.png?s=128&g=1", "display_name": "0range", "link": "https://stackoverflow.com/users/1735215/0range"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 187, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1572467436, "creation_date": 1572467436, "question_id": 58633219, "link": "https://stackoverflow.com/questions/58633219/why-can-i-not-use-python-pandas-int-types-like-int8dtype-in-statsmodels-formul", "title": "Why can I not use Python Pandas int types (like Int8Dtype) in statsmodels.formula.api regressions?", "body": "<p>Regressions that will work with numpy int types and even with bool types will in case of pandas int types fail with <code>TypeError: data type not understood\n</code></p>\n\n<p><strong>Sample code</strong></p>\n\n<pre><code>import statsmodels.formula.api as smf\nimport pandas as pd\n\ndf = pd.DataFrame({\"y\": [0.02, 0.011, 0.01, 0.06, 0.12, 0.015],\n                   \"x\": [False, False, False, True, True, False]\n                   })\ndf[\"x2\"] = df[\"x\"].astype('int8')\ndf[\"x3\"] = df[\"x\"].astype('Int8')\nprint(df)\nprint([df[col].dtype for col in df.columns])\nmodel = smf.logit(formula=\"y ~ x\", data=df)     #This works.\nprint(model.fit().summary())\nmodel = smf.logit(formula=\"y ~ x2\", data=df)    #This works too.\nprint(model.fit().summary())\nmodel = smf.logit(formula=\"y ~ x3\", data=df)    #This does not work.\nprint(model.fit().summary())\n</code></pre>\n\n<p><strong>Note:</strong> Never mind the values, sample sizes and goodness in these regressione, I know they are not useful. They are meant as a minimal reproducible example.</p>\n\n<p><strong>Sample output</strong></p>\n\n<pre><code>$ python3 regtest.py \n       y      x  x2  x3\n0  0.020  False   0   0\n1  0.011  False   0   0\n2  0.010  False   0   0\n3  0.060   True   1   1\n4  0.120   True   1   1\n5  0.015  False   0   0\n[dtype('float64'), dtype('bool'), dtype('int8'), Int8Dtype()]\nOptimization terminated successfully.\n         Current function value: 0.057534\n         Iterations 8\n/usr/lib/python3.7/site-packages/statsmodels/discrete/discrete_model.py:3390: RuntimeWarning: divide by zero encountered in double_scalars\n  return 1 - self.llf/self.llnull\n                           Logit Regression Results                           \n==============================================================================\nDep. Variable:                      y   No. Observations:                    6\nModel:                          Logit   Df Residuals:                        4\nMethod:                           MLE   Df Model:                            1\nDate:                Wed, 30 Oct 2019   Pseudo R-squ.:                     inf\nTime:                        20:01:22   Log-Likelihood:               -0.34520\nconverged:                       True   LL-Null:                        0.0000\nCovariance Type:            nonrobust   LLR p-value:                     1.000\n==============================================================================\n                 coef    std err          z      P&gt;|z|      [0.025      0.975]\n------------------------------------------------------------------------------\nIntercept     -4.2546      4.256     -1.000      0.317     -12.596       4.086\nx[T.True]      1.9410      4.921      0.394      0.693      -7.704      11.586\n==============================================================================\nOptimization terminated successfully.\n         Current function value: 0.057534\n         Iterations 8\n/usr/lib/python3.7/site-packages/statsmodels/discrete/discrete_model.py:3390: RuntimeWarning: divide by zero encountered in double_scalars\n  return 1 - self.llf/self.llnull\n                           Logit Regression Results                           \n==============================================================================\nDep. Variable:                      y   No. Observations:                    6\nModel:                          Logit   Df Residuals:                        4\nMethod:                           MLE   Df Model:                            1\nDate:                Wed, 30 Oct 2019   Pseudo R-squ.:                     inf\nTime:                        20:01:22   Log-Likelihood:               -0.34520\nconverged:                       True   LL-Null:                        0.0000\nCovariance Type:            nonrobust   LLR p-value:                     1.000\n==============================================================================\n                 coef    std err          z      P&gt;|z|      [0.025      0.975]\n------------------------------------------------------------------------------\nIntercept     -4.2546      4.256     -1.000      0.317     -12.596       4.086\nx2             1.9410      4.921      0.394      0.693      -7.704      11.586\n==============================================================================\nTraceback (most recent call last):\n  File \"regtest.py\", line 16, in &lt;module&gt;\n    model = smf.logit(formula=\"y ~ x3\", data=df)\n  File \"/usr/lib/python3.7/site-packages/statsmodels/base/model.py\", line 159, in from_formula\n    missing=missing)\n  File \"/usr/lib/python3.7/site-packages/statsmodels/formula/formulatools.py\", line 65, in handle_formula_data\n    NA_action=na_action)\n  File \"/usr/lib/python3.7/site-packages/patsy/highlevel.py\", line 310, in dmatrices\n    NA_action, return_type)\n  File \"/usr/lib/python3.7/site-packages/patsy/highlevel.py\", line 165, in _do_highlevel_design\n    NA_action)\n  File \"/usr/lib/python3.7/site-packages/patsy/highlevel.py\", line 70, in _try_incr_builders\n    NA_action)\n  File \"/usr/lib/python3.7/site-packages/patsy/build.py\", line 696, in design_matrix_builders\n    NA_action)\n  File \"/usr/lib/python3.7/site-packages/patsy/build.py\", line 448, in _examine_factor_types\n    done = cat_sniffers[factor].sniff(value)\n  File \"/usr/lib/python3.7/site-packages/patsy/categorical.py\", line 198, in sniff\n    if hasattr(data, \"dtype\") and safe_issubdtype(data.dtype, np.bool_):\n  File \"/usr/lib/python3.7/site-packages/patsy/util.py\", line 710, in safe_issubdtype\n    return np.issubdtype(dt1, dt2)\n  File \"/usr/lib/python3.7/site-packages/numpy/core/numerictypes.py\", line 393, in issubdtype\n    arg1 = dtype(arg1).type\nTypeError: data type not understood\n</code></pre>\n\n<p><strong>Why would I want this?</strong> In order to save memory, I may want to convert data that contains <code>NaN</code>s into integer types while conserving the <code>NaN</code>s. There is a <a href=\"https://stackoverflow.com/q/57264509/1735215\">question about this</a>; the answer recommends <code>df[col].astype(\"Int32\")</code> as the easiest solution. Float data types can be very memory consuming if I have many observations, so it would be desirable to use small integer types instead. Of course, I could remove the <code>NaN</code>s by hand and then use numpy types, but this is a lot of hassle, a potential source of errors and, I guess, also not very pythonic.</p>\n\n<p><strong>Software</strong> Linux kernel 5.3.7, Python 3.7.4, Pandas 0.25.2, Statsmodels 0.10.1</p>\n"}, {"tags": ["python", "python-3.x"], "answers": [{"comments": [{"owner": {"reputation": 673, "user_id": 2543186, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/27ZWW.jpg?s=128&g=1", "display_name": "Willwsharp", "link": "https://stackoverflow.com/users/2543186/willwsharp"}, "edited": false, "score": 0, "creation_date": 1572468298, "post_id": 58633266, "comment_id": 103573731, "body": "So when it says the standard library is unaffected it means the modules in the standard library don&#39;t have to get recompiled?  I don&#39;t follow why don&#39;t they?  Does Python know not to try to compile modules in a different Python version stdlib?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 673, "user_id": 2543186, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/27ZWW.jpg?s=128&g=1", "display_name": "Willwsharp", "link": "https://stackoverflow.com/users/2543186/willwsharp"}, "edited": false, "score": 1, "creation_date": 1572468714, "post_id": 58633266, "comment_id": 103573913, "body": "It gets the module from the same version."}, {"owner": {"reputation": 673, "user_id": 2543186, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/27ZWW.jpg?s=128&g=1", "display_name": "Willwsharp", "link": "https://stackoverflow.com/users/2543186/willwsharp"}, "edited": false, "score": 0, "creation_date": 1572469101, "post_id": 58633266, "comment_id": 103574074, "body": "So basically, if I ran python 2.6 and imported some source file like <code>&#47;usr&#47;share&#47;bar&#47;foo.py</code>, the pyc would be compiled for 2.6, then if I did the same thing but with like Python 2.7 or something, then the pyc file would be different which is a problem because you have to recompile <code>&#47;usr&#47;share&#47;bar&#47;foo.py</code> if you wanted to use the pyc in Python 2.6.  And the stdlib modules are unaffected by this because each Python version looks for stdlib modules in their own version-specific directory.  That&#39;s the gist of it right?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 673, "user_id": 2543186, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/27ZWW.jpg?s=128&g=1", "display_name": "Willwsharp", "link": "https://stackoverflow.com/users/2543186/willwsharp"}, "edited": false, "score": 1, "creation_date": 1572469212, "post_id": 58633266, "comment_id": 103574126, "body": "No, not when you use a full pathname. We&#39;re talking about the standard library, so you just do <code>import re</code>."}, {"owner": {"reputation": 673, "user_id": 2543186, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/27ZWW.jpg?s=128&g=1", "display_name": "Willwsharp", "link": "https://stackoverflow.com/users/2543186/willwsharp"}, "edited": false, "score": 0, "creation_date": 1572469309, "post_id": 58633266, "comment_id": 103574164, "body": "Just to clarify, which part of my previous comment is incorrect?"}], "tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": true, "score": 1, "last_activity_date": 1572469281, "last_edit_date": 1572469281, "creation_date": 1572467683, "answer_id": 58633266, "question_id": 58633215, "link": "https://stackoverflow.com/questions/58633215/python-standard-library-unaffected-by-pyc-rewrite-fight/58633266#58633266", "title": "Python standard library unaffected by pyc rewrite fight", "body": "<p>Each version of Python has an entire copy of the standard library, installed in a version-specific directory. So when you import a standard library, it finds the one that's already compiled correctly for that version (it has a matching magic number), so it doesn't need to recompile it.</p>\n\n<p>So when you write something like <code>import re</code>, version 2.6 imports <code>re.py</code> from the 2.6 library, version 3.1 imports <code>re.py</code> from the 3.1 library, etc.</p>\n"}], "owner": {"reputation": 673, "user_id": 2543186, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/27ZWW.jpg?s=128&g=1", "display_name": "Willwsharp", "link": "https://stackoverflow.com/users/2543186/willwsharp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 1, "accepted_answer_id": 58633266, "answer_count": 1, "score": 0, "last_activity_date": 1572469281, "creation_date": 1572467413, "last_edit_date": 1572467453, "question_id": 58633215, "link": "https://stackoverflow.com/questions/58633215/python-standard-library-unaffected-by-pyc-rewrite-fight", "title": "Python standard library unaffected by pyc rewrite fight", "body": "<p>I was reading <a href=\"https://www.python.org/dev/peps/pep-3147/#id26\" rel=\"nofollow noreferrer\">PEP 3147</a> but was confused by this paragraph:</p>\n\n<blockquote>\n  <p>Linux distributions such as Ubuntu [4] and Debian [5] provide more than one Python version\n  at the same time to their users. For example, Ubuntu 9.10 Karmic Koala users can install\n  Python 2.5, 2.6, and 3.1, with Python 2.6 being the default.</p>\n  \n  <p>This causes a conflict for third party Python source files installed by the system,\n  because you cannot compile a single Python source file for more than one Python version at a time.\n  When Python finds a pyc file with a non-matching magic number, it falls back to the slower process of \n  recompiling the source. Thus if your system installed a /usr/share/python/foo.py, two different versions of Python\n  would fight over the pyc file and rewrite it each time the source is compiled. (The standard library is \n  unaffected by this, since multiple versions of the stdlib are installed on such distributions..)</p>\n</blockquote>\n\n<p>Why is the standard library unaffected by this 'fight' between different Python versions over the pyc file?  How is it unaffected?  Does it mean it's not recompiled?  Why does having multiple versions of the stdlib installed solve this problem?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["python", "numpy"], "comments": [{"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 0, "creation_date": 1572467566, "post_id": 58633210, "comment_id": 103573400, "body": "What you describe here is a brute force algorithm to find the shortest path between two vertices in a graph. There are other, much more efficient algorithms to do the same thing."}, {"owner": {"reputation": 49, "user_id": 12296575, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-8m3h0VfMBBk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcDYvsoKkLc-cTKUSP770YYxbATUA/photo.jpg?sz=128", "display_name": "Emanuel", "link": "https://stackoverflow.com/users/12296575/emanuel"}, "reply_to_user": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 0, "creation_date": 1572467655, "post_id": 58633210, "comment_id": 103573440, "body": "Exactly, but for practising purposes i want (and have to) solve this problem this way. No matter how inefficient it might be."}, {"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 0, "creation_date": 1572467730, "post_id": 58633210, "comment_id": 103573479, "body": "I&#39;m a noob to numpy, so I&#39;d probably write the loops myself even though there&#39;s almost certainly a better way to do it with numpy magic. Good luck."}, {"owner": {"reputation": 49, "user_id": 12296575, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-8m3h0VfMBBk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcDYvsoKkLc-cTKUSP770YYxbATUA/photo.jpg?sz=128", "display_name": "Emanuel", "link": "https://stackoverflow.com/users/12296575/emanuel"}, "reply_to_user": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 0, "creation_date": 1572467868, "post_id": 58633210, "comment_id": 103573536, "body": "But i dont know how to write the loops to get this summing-over-blocks-problem solved"}, {"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 0, "creation_date": 1572467973, "post_id": 58633210, "comment_id": 103573574, "body": "Try to solve a smaller problem: given a path as a tuple of tuples, calculate the length of the path."}, {"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 0, "creation_date": 1572468023, "post_id": 58633210, "comment_id": 103573599, "body": "In fact, that needs to be broken into a smaller problem: given two pairs, find the distance between the two points."}], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 12296575, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-8m3h0VfMBBk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcDYvsoKkLc-cTKUSP770YYxbATUA/photo.jpg?sz=128", "display_name": "Emanuel", "link": "https://stackoverflow.com/users/12296575/emanuel"}, "edited": false, "score": 0, "creation_date": 1572470038, "post_id": 58633387, "comment_id": 103574435, "body": "Thank you for your answer. I used itertools for the permutations like this:          <code>permutations = list(itertools.permutations(points))</code>  I don&#39;t think that <code>max</code> is the right function for me, i need the shortest way."}], "tags": [], "owner": {"reputation": 16677, "user_id": 1092820, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc78da24118b403595f62fa7856e1b6c?s=128&d=identicon&r=PG", "display_name": "Ruzihm", "link": "https://stackoverflow.com/users/1092820/ruzihm"}, "is_accepted": false, "score": 0, "last_activity_date": 1572468293, "creation_date": 1572468293, "answer_id": 58633387, "question_id": 58633210, "link": "https://stackoverflow.com/questions/58633210/how-to-sum-pairs-of-2d-arrays-in-list/58633387#58633387", "title": "How to sum pairs of 2d arrays in list", "body": "<p>You can use <code>max</code> to find the one with the maximum difference of each adjacent pair of members.  Also, you can use <code>itertools</code> to generate the permutations:</p>\n\n<pre><code>import itertools\nimport numpy as np\n\na = [(1, 1),(0, 0),(7, 9)]\npermutations = tuple(itertools.combinations(a,3))\nprint(permutations)\n\ndef calcDistance(a, b):\n        d = np.linalg.norm(np.asarray(a)-np.asarray(b))\n        return d\n\nmost_dist_permutation = max(permutations, key=lambda x:calcDistance(*x[0:2])+calcDistance(*x[1:3]))\nprint(most_dist_permutation)\n</code></pre>\n\n<blockquote>\n<pre><code>(((1, 1), (0, 0), (7, 9)), ((1, 1), (7, 9), (0, 0)), ((0, 0), (1, 1), (7, 9)), ((0, 0), (7, 9), (1, 1)), ((7, 9), (1, 1), (0, 0)), ((7, 9), (0, 0), (1, 1)))\n((1, 1), (7, 9), (0, 0))\n</code></pre>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 3400, "user_id": 6901690, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/d9QRH.png?s=128&g=1", "display_name": "razimbres", "link": "https://stackoverflow.com/users/6901690/razimbres"}, "is_accepted": false, "score": 0, "last_activity_date": 1572468397, "creation_date": 1572468397, "answer_id": 58633411, "question_id": 58633210, "link": "https://stackoverflow.com/questions/58633210/how-to-sum-pairs-of-2d-arrays-in-list/58633411#58633411", "title": "How to sum pairs of 2d arrays in list", "body": "<p>Run:</p>\n\n<pre><code>import itertools\nss=list(itertools.permutations(np.arange(0,10), 2))\n\ndef calcDistance(a, b):\n    d = np.linalg.norm(a-b)\n    return d\n\n[calcDistance(np.array(ss).T[0][i],np.array(ss).T[1][i]) for i in range(0,np.array(ss).shape[0])]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 16677, "user_id": 1092820, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc78da24118b403595f62fa7856e1b6c?s=128&d=identicon&r=PG", "display_name": "Ruzihm", "link": "https://stackoverflow.com/users/1092820/ruzihm"}, "edited": false, "score": 0, "creation_date": 1572472870, "post_id": 58634206, "comment_id": 103575372, "body": "Ooh nice! Good use of einsum."}], "tags": [], "owner": {"reputation": 1486, "user_id": 6828711, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/G2j21.png?s=128&g=1", "display_name": "NaN", "link": "https://stackoverflow.com/users/6828711/nan"}, "is_accepted": false, "score": 1, "last_activity_date": 1572472686, "creation_date": 1572472686, "answer_id": 58634206, "question_id": 58633210, "link": "https://stackoverflow.com/questions/58633210/how-to-sum-pairs-of-2d-arrays-in-list/58634206#58634206", "title": "How to sum pairs of 2d arrays in list", "body": "<p>Not so elegant for 3 point arrays, but einsum calculations are useful for calculating lengths/distances.  In this case just using your input coordinate sequences and the previously recommended way of creating the point orders </p>\n\n<pre><code>import itertools\n\na = np.array([[1, 1],[0, 0],[7, 9]])\n\np0 = np.asarray(list(itertools.permutations(a, 3)))\n\ndef _cal(a):\n    \"\"\"Perform the calculation, mini-e_leng.\"\"\"\n    diff = a[:-1] - a[1:]\n    return np.nansum(np.sqrt(np.einsum('ij,ij-&gt;i', diff, diff)))\n\n[_cal(i) for i in p0]\n [12.815967813364475,\n 21.40175425099138,\n 11.414213562373096,\n 21.40175425099138,\n 11.414213562373096,\n 12.815967813364475]\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 12296575, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-8m3h0VfMBBk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcDYvsoKkLc-cTKUSP770YYxbATUA/photo.jpg?sz=128", "display_name": "Emanuel", "link": "https://stackoverflow.com/users/12296575/emanuel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1572472686, "creation_date": 1572467397, "last_edit_date": 1572467513, "question_id": 58633210, "link": "https://stackoverflow.com/questions/58633210/how-to-sum-pairs-of-2d-arrays-in-list", "title": "How to sum pairs of 2d arrays in list", "body": "<p>I need a good solution for summing up pairs of 2d vectors.</p>\n\n<p>I want to sum the distance between point1 and point2, point2 and point3... So this has to be done with all pairs (depending on the number of points)</p>\n\n<pre><code>a = np.array([[1, 1],[0, 0],[7, 9]])\npermutations = [((1, 1), (0, 0), (7, 9)), ((1, 1), (7, 9), (0, 0)), ((0, 0), (1, 1), (7, 9))] ....\n</code></pre>\n\n<p>Now after creating all possible permutations i want to sum the distances in order to specify which order is overall the shortest way.\nTo get the distance between to points i use:</p>\n\n<pre><code>    def calcDistance(a, b):\n        d = np.linalg.norm(a-b)\n        return d\n</code></pre>\n\n<p>But i don't know how to apply this on a list to get the distance of every pair of points. I tried to do it with for-loops and slicing.</p>\n\n<pre><code>for i in range(0, len(permutations), 3):\n    print(permutations[i:i+3])\n</code></pre>\n\n<p>As a test it worked, but i have no idea how to apply the calc function on every pair in a list and sum this up again to get a total distance.\nThe permutations are all stored in one list, so my idea was to go over the n-elements (number of points/vectors) for each iteration.</p>\n"}, {"tags": ["python", "numpy", "matplotlib", "scipy", "curve-fitting"], "comments": [{"owner": {"reputation": 10928, "user_id": 1358308, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d9448dee25fd2278def77cb7f0353574?s=128&d=identicon&r=PG", "display_name": "Sam Mason", "link": "https://stackoverflow.com/users/1358308/sam-mason"}, "edited": false, "score": 1, "creation_date": 1572467723, "post_id": 58633204, "comment_id": 103573473, "body": "looks like a pretty good fit to me!  why would you say it&#39;s not very good?"}, {"owner": {"reputation": 21, "user_id": 12299220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9bd57e980676ff0f4f95f74fc57be486?s=128&d=identicon&r=PG&f=1", "display_name": "Pygeon", "link": "https://stackoverflow.com/users/12299220/pygeon"}, "reply_to_user": {"reputation": 10928, "user_id": 1358308, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d9448dee25fd2278def77cb7f0353574?s=128&d=identicon&r=PG", "display_name": "Sam Mason", "link": "https://stackoverflow.com/users/1358308/sam-mason"}, "edited": false, "score": 0, "creation_date": 1572469185, "post_id": 58633204, "comment_id": 103574115, "body": "Max of the fit curve is still far away the max of the data even if other parts of the data curve are pretty well fitted. I was wondering if I could get something even better in term of fitting the data max or if this is the best I could hope.Thx"}, {"owner": {"reputation": 10928, "user_id": 1358308, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d9448dee25fd2278def77cb7f0353574?s=128&d=identicon&r=PG", "display_name": "Sam Mason", "link": "https://stackoverflow.com/users/1358308/sam-mason"}, "edited": false, "score": 0, "creation_date": 1572470141, "post_id": 58633204, "comment_id": 103574470, "body": "assuming that label is accurate and this is a  histogram, then those values would be poisson distributed.  the fit value is ~118 which would mean the upper 95%CI value would be 140 and hence plausible under reasonable assumptions."}, {"owner": {"reputation": 3988, "user_id": 2436862, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4P7Vh.jpg?s=128&g=1", "display_name": "James Phillips", "link": "https://stackoverflow.com/users/2436862/james-phillips"}, "reply_to_user": {"reputation": 10928, "user_id": 1358308, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d9448dee25fd2278def77cb7f0353574?s=128&d=identicon&r=PG", "display_name": "Sam Mason", "link": "https://stackoverflow.com/users/1358308/sam-mason"}, "edited": false, "score": 0, "creation_date": 1572473584, "post_id": 58633204, "comment_id": 103575598, "body": "I fit the data to to over 140 peak and sigmoidal equations with 6 or less parameters. The fit you have is at least as good as any of those. @SamMason I agree you based on these analytical results."}], "owner": {"reputation": 21, "user_id": 12299220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9bd57e980676ff0f4f95f74fc57be486?s=128&d=identicon&r=PG&f=1", "display_name": "Pygeon", "link": "https://stackoverflow.com/users/12299220/pygeon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 256, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1572467368, "creation_date": 1572467368, "question_id": 58633204, "link": "https://stackoverflow.com/questions/58633204/curve-fitting-with-asymetric-double-sigmoidal-function-scipy", "title": "Curve fitting with asymetric double sigmoidal function SciPy", "body": "<p>I am trying to fit data with an asymetric double sigmoidal function (called \"des()\") and despite many attempts I can't get a very good fitting. </p>\n\n<p>Best R-squared obtained is 0.96 and fit curve is far away from ymax.\nI've tried playing with initial guess p0 but it didn't help to get better fitting.</p>\n\n<p>How can I get better fitting?</p>\n\n<p>Any help will be very appreciated. </p>\n\n<p>Thanks.</p>\n\n<pre><code>from __future__ import print_function\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport numpy as np\nimport scipy.optimize as opt\n\nxdata = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17]\nydata = [1, 33, 90, 103 , 141, 96, 85, 86, 43, 32, 17, 9, 8, 6, 11, 4, 4, 1]\n\ndef des(x,a,b,c,d,e,f) : \n    y = a + (b/(1+(np.exp(-1*((x-c+(d/2))/e)))))*(1-(1/(1+np.exp(-1*((x-c-(d/2))/f)))))\n    return (y)\n\np0 =[10,1000,1,1,1,11]\npopt, pcov = opt.curve_fit(des,xdata,ydata, p0 =p0, maxfev = 1000000)\n\nresiduals = ydata - des(xdata, *popt)\nss_res = np.sum(residuals**2)\nss_tot = np.sum((ydata-np.mean(ydata))**2)\nr_squared = 1 - (ss_res / ss_tot)\nprint(r_squared)\n\ny = des(xdata,*popt)\nfig,ax = plt.subplots(1,1,figsize=(6,4))\nax.plot(xdata,ydata, label='data')\nax.plot(xdata,y,label='fit')\nplt.legend()\nplt.title('HBD',fontdict=None, loc='center', pad=None)\nplt.xlabel('HBD')\nplt.ylabel('Frequency')\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/m6LCX.png\" rel=\"nofollow noreferrer\">Plot</a></p>\n"}]