[{"tags": ["python", "windows-services", "keystroke"], "comments": [{"owner": {"reputation": 1292, "user_id": 1887634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57d96d668a832a01e56fae26fc8859bc?s=128&d=identicon&r=PG", "display_name": "Alan", "link": "https://stackoverflow.com/users/1887634/alan"}, "edited": false, "score": 0, "creation_date": 1524102312, "post_id": 49910688, "comment_id": 86838781, "body": "provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, and explain what you mean by &quot;doesn&#39;t work&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 9666935, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Bug Phh", "link": "https://stackoverflow.com/users/9666935/bug-phh"}, "edited": false, "score": 0, "creation_date": 1524317450, "post_id": 49932857, "comment_id": 86928801, "body": "@Alan Do you have some opinions?"}], "tags": [], "owner": {"reputation": 1, "user_id": 9666935, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Bug Phh", "link": "https://stackoverflow.com/users/9666935/bug-phh"}, "is_accepted": false, "score": 0, "last_activity_date": 1524190250, "creation_date": 1524190250, "answer_id": 49932857, "question_id": 49910688, "link": "https://stackoverflow.com/questions/49910688/how-to-create-a-keystroke-monitor-windows-services-in-win10/49932857#49932857", "title": "How to create a keystroke monitor windows services in win10?", "body": "<p>@Peter Haddad </p>\n\n<p>I want to use Keyrecorder_Win.py to record the keystorke information, and use ServiceLauncher.py or \"sc.exe\" to wrap \"Keyrecorder\" into a Windows service. \n\"It doesn't work\" can be classified into 2 situation:</p>\n\n<ul>\n<li><p>situation 1:</p>\n\n<p>When I execute Keyrecorder_win.py, it works normally, but when I put windows into sleep, and wake up it later, it cannot write the keystroke information to file any more.</p></li>\n<li><p>situation 2:</p>\n\n<p>When I wrap python script into Windows service and launch service in the background, it also cannot write infomation to file. </p></li>\n</ul>\n\n<p>My purpose is running this monitor program on the backgroud, and hope it works fine even if when I wake up my computer from sleep status.</p>\n\n<p>Here blow is my code:</p>\n\n<p>Keyrecorder_Win.py:</p>\n\n<pre><code>#!/usr/bin/env python\n#coding: utf-8\nimport pythoncom\nimport pyHook\nimport time\nimport os\nimport re \npress_stack = []\nrelease_stack = []\nclass Keyrecorder(object):\n    def __init__(self):\n        self.path_result_dir = os.path.join(os.getcwd(), \"Result\")\n        if not os.path.exists(self.path_result_dir):\n            os.mkdir(self.path_result_dir)\n\n    def Time2Date(self, sec):\n        time_struct = time.localtime(sec)\n        time_string = time.strftime('%Y-%m-%d', time_struct)\n        return time_string\n\n    def onKeyboardEvent(self, event):\n        time_string = self.Time2Date(time.time())\n        fp = os.path.join(self.path_result_dir, time_string + \".txt\")\n\n        if not os.path.exists(fp):\n            fobj = open(fp, \"w\")\n        else:\n            fobj = open(fp, \"a+\")\n        press_time = -1\n        release_time = -1\n        event_type = event.MessageName # press or release\n        event_key = event.Key # related key\n\n        if event_type == \"key down\":\n            press_time = int(time.time()*10**6)\n            press_stack.append((event_key, press_time))\n        elif event_type == \"key up\":\n            release_time = int(time.time()*10**6)\n            release_stack.append((event_key, release_time))\n\n        len1 = len(press_stack)\n        len2 = len(release_stack)\n        if len1 &gt; 0 and len1 == len2:\n            is_reverse = press_stack[0][0] != release_stack[0][0]\n            # press key in turn\uff0cbut release key in reverse order\n            if len1 == 2 and is_reverse:\n                while len(release_stack) &gt; 0:\n                    p = press_stack.pop(0)\n                    r = release_stack.pop()\n                    duration = r[1] - p[1]\n                    record = \"%s\\t%d\\t%d\\t%d\\n\" % (p[0], p[1], r[1], duration)\n                    fobj.write(record)\n                    fobj.flush()\n\n            # press and release key in turn \n            elif len1 &gt;= 1 and not is_reverse:\n                while len(release_stack) &gt; 0:\n                    p = press_stack.pop(0)\n                    r = release_stack.pop(0)\n                    duration = r[1] - p[1]\n                    record = \"%s\\t%d\\t%d\\t%d\\n\" % (p[0], p[1], r[1], duration)\n                    fobj.write(record)\n                    fobj.flush()\n\n            # function key firstly be pressed\uff0cthen other keys be pressed. \n            # other key be released firstly then release function key. \n            elif len1 &gt; 2 and is_reverse:\n                p = press_stack.pop(0)\n                r = release_stack.pop()\n                duration = r[1] - p[1]\n                record = \"%s\\t%d\\t%d\\t%d\\n\" % (p[0], p[1], r[1], duration)\n                fobj.write(record)\n                fobj.flush()\n\n                while len(release_stack) &gt; 0:\n                    p = press_stack.pop(0)\n                    r = release_stack.pop(0)\n                    duration = r[1] - p[1]\n                    record = \"%s\\t%d\\t%d\\t%d\\n\" % (p[0], p[1], r[1], duration)\n                    fobj.write(record)\n                    fobj.flush()\n        if fobj and not fobj.closed:\n            fobj.flush()\n            fobj.close()\n\n        return True\n\n    def record(self):\n        pythoncom.CoInitialize()\n        hm = pyHook.HookManager()\n        hm.KeyAll = self.onKeyboardEvent\n        hm.HookKeyboard()\n        pythoncom.PumpMessages()\n        pythoncom.CoUninitialize()\n\ndef main():\n    kr = Keyrecorder()\n    kr.record()\n\n\nif __name__ == '__main__':\n    main()\n</code></pre>\n\n<p>ServiceLauncher.py:</p>\n\n<pre><code>#!/usr/bin/env python\n#coding: utf-8\n\nimport win32serviceutil\nimport win32service\nimport win32event\nimport winerror\nimport servicemanager\nimport os\nimport sys\n\nclass ServiceLauncher(win32serviceutil.ServiceFramework):\n    _svc_name_ = 'Keyrecord'\n    _svc_display_name_ = 'Keyrecord'\n    _svc_description_ = \"Keyrecord for windows\"\n\n    def __init__(self, args):\n        win32serviceutil.ServiceFramework.__init__(self, args)\n        self.hWaitStop = win32event.CreateEvent(None, 0, 0, None)\n        self.run = True\n\n    def SvcStop(self):\n        self.ReportServiceStatus(win32service.SERVICE_STOP_PENDING)\n        win32event.SetEvent(self.hWaitStop)\n\n    def SvcDoRun(self):\n        import KeyRecorder_Win\n        kr = KeyRecorder_Win.Keyrecorder()\n        kr.record()\n\nif __name__=='__main__':\n    if len(sys.argv) == 1:\n        try:\n            evtsrc_dll = os.path.abspath(servicemanager.__file__)\n            servicemanager.PrepareToHostSingle(ServiceLauncher)\n            servicemanager.Initialize('ServiceLauncher', evtsrc_dll)\n            servicemanager.StartServiceCtrlDispatcher()\n        except win32service.error, details:\n            if details[0] == winerror.ERROR_FAILED_SERVICE_CONTROLLER_CONNECT:\n                win32serviceutil.usage()\n            else:\n                win32serviceutil.HandleCommandLine(ServiceLauncher)\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9666935, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Bug Phh", "link": "https://stackoverflow.com/users/9666935/bug-phh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1524190250, "creation_date": 1524095974, "last_edit_date": 1524118678, "question_id": 49910688, "link": "https://stackoverflow.com/questions/49910688/how-to-create-a-keystroke-monitor-windows-services-in-win10", "title": "How to create a keystroke monitor windows services in win10?", "body": "<p>I want to record press time and release time of related key and write this information to file in the background. I implement it with python and pack python script into a windows executable file. When I double click this executable file, it works normally, however, when I use <code>\"sc.exe\"</code> tool to transform it into a windows service, it doesn't work.</p>\n\n<p>I have tried the <code>\"win32serviceutil.ServiceFramework\"</code>(python api of windows services), it also doesn't work.</p>\n"}, {"tags": ["python", "pandas", "parameters", "temperature", "converters"], "comments": [{"owner": {"reputation": 1927, "user_id": 1710232, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2c3967002deb2f9b9149c8769fdafc30?s=128&d=identicon&r=PG", "display_name": "prcastro", "link": "https://stackoverflow.com/users/1710232/prcastro"}, "edited": false, "score": 0, "creation_date": 1524101977, "post_id": 49910683, "comment_id": 86838706, "body": "Have you tried to run the function after reading the data? If so, does the same problem occur? If not, have you tried a simpler converter function (like squaring each value)?"}, {"owner": {"reputation": 1, "user_id": 8028109, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a30a6676694c92017e20c2c06f93fd55?s=128&d=identicon&r=PG&f=1", "display_name": "Danny", "link": "https://stackoverflow.com/users/8028109/danny"}, "reply_to_user": {"reputation": 1927, "user_id": 1710232, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2c3967002deb2f9b9149c8769fdafc30?s=128&d=identicon&r=PG", "display_name": "prcastro", "link": "https://stackoverflow.com/users/1710232/prcastro"}, "edited": false, "score": 0, "creation_date": 1524167693, "post_id": 49910683, "comment_id": 86874362, "body": "I just tried a squaring function. Yes the function works after reading the data. The data actually isn&#39;t read in, &quot;df not defined,&quot;  and the same problem occurs."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8028109, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a30a6676694c92017e20c2c06f93fd55?s=128&d=identicon&r=PG&f=1", "display_name": "Danny", "link": "https://stackoverflow.com/users/8028109/danny"}, "edited": false, "score": 0, "creation_date": 1524167923, "post_id": 49911443, "comment_id": 86874474, "body": "Ah, that seems to get rid of the error and the dataframe is created. However, the function isn&#39;t applied. It might be an issue with the function I made..."}], "tags": [], "owner": {"reputation": 1927, "user_id": 1710232, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2c3967002deb2f9b9149c8769fdafc30?s=128&d=identicon&r=PG", "display_name": "prcastro", "link": "https://stackoverflow.com/users/1710232/prcastro"}, "is_accepted": false, "score": 0, "last_activity_date": 1524102336, "creation_date": 1524102336, "answer_id": 49911443, "question_id": 49910683, "link": "https://stackoverflow.com/questions/49910683/pandas-typeerror-when-using-pd-read-table-parameter-converters/49911443#49911443", "title": "Pandas- TypeError when using pd.read_table parameter, &#39;converters&#39;", "body": "<p>If I understood the documentation properly, maybe the converter should expect a string instead of a float:</p>\n\n<blockquote>\n  <p>dtype\u00a0: Type name or dict of column -> type, default None</p>\n  \n  <p>Data type for data or columns. E.g. {\u2018a\u2019: np.float64, \u2018b\u2019: np.int32}\n  Use\u00a0str\u00a0or\u00a0object\u00a0to preserve and not interpret dtype. If converters\n  are specified, they will be applied INSTEAD of dtype conversion.</p>\n</blockquote>\n\n<p>So maybe what is happening is that the column isn't converted to float, but instead the converter is applied directly to the string being read.</p>\n"}], "owner": {"reputation": 1, "user_id": 8028109, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a30a6676694c92017e20c2c06f93fd55?s=128&d=identicon&r=PG&f=1", "display_name": "Danny", "link": "https://stackoverflow.com/users/8028109/danny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1524168212, "creation_date": 1524095917, "last_edit_date": 1524168212, "question_id": 49910683, "link": "https://stackoverflow.com/questions/49910683/pandas-typeerror-when-using-pd-read-table-parameter-converters", "title": "Pandas- TypeError when using pd.read_table parameter, &#39;converters&#39;", "body": "<p>I'm reading in multiple files and want to convert a temperature column using <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.read_table.html\" rel=\"nofollow noreferrer\">pd.read_table</a> converters. The function I'm using to convert Kelvin to Farenheit works on its own, but doesn't work when using the converters parameter. I get a <code>TypeError: unsupported operand type(s) for -: 'str' and 'float'</code>.</p>\n\n<p>Currently, my DataFrame looks like this</p>\n\n<pre><code>             temp\ndate\n2006-01-01  294.6\n2006-02-01  294.1...\n</code></pre>\n\n<p>df['temp'].dtype is <code>dtype('float64')</code></p>\n\n<p>My function:</p>\n\n<pre><code>def k2f(df):         \n     return (df-273.15)*1.8+32.00\n#also tried lambda x : (x-273.15)*1.8+32.00\n</code></pre>\n\n<p>Using function on its own:</p>\n\n<pre><code>&gt;&gt;&gt;k2f(df)\n             temp\ndate\n2006-01-01  70.61\n2006-02-01  69.71...\n</code></pre>\n\n<p>How I read in my datafile, df=...:</p>\n\n<pre><code>df = pd.read_table('pathto.txt',skiprows=9,delimiter='\\s+',\nusecols=(0,4),index_col=(0),\nnames=('date','temp'),na_values=('na'),parse_dates=True,\nconverters={4:k2f}) #also tried 'temp' keyword to same result\n</code></pre>\n\n<p>Full error message when using df=... above:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"mycode.py\", line 24, in &lt;module&gt;\n    df = pd.read_table('pathto.txt',skiprows=9,delimiter='\\s+',usecols=(0,4),index_col=(0),names=('date','temp'),na_values=('na'),parse_dates=True,converters={4:k2f})\n  File \"/usr/local/anaconda2/lib/python2.7/site-packages/pandas/io/parsers.py\", line 655, in parser_f\n    return _read(filepath_or_buffer, kwds)\n  File \"/usr/local/anaconda2/lib/python2.7/site-packages/pandas/io/parsers.py\", line 411, in _read\n    data = parser.read(nrows)\n  File \"/usr/local/anaconda2/lib/python2.7/site-packages/pandas/io/parsers.py\", line 982, in read\n    ret = self._engine.read(nrows)\n  File \"/usr/local/anaconda2/lib/python2.7/site-packages/pandas/io/parsers.py\", line 1719, in read\n    data = self._reader.read(nrows)\n  File \"pandas/_libs/parsers.pyx\", line 890, in pandas._libs.parsers.TextReader.read (pandas/_libs/parsers.c:10862)\n  File \"pandas/_libs/parsers.pyx\", line 912, in pandas._libs.parsers.TextReader._read_low_memory (pandas/_libs/parsers.c:11138)\n  File \"pandas/_libs/parsers.pyx\", line 989, in pandas._libs.parsers.TextReader._read_rows (pandas/_libs/parsers.c:12175)\n  File \"pandas/_libs/parsers.pyx\", line 1112, in pandas._libs.parsers.TextReader._convert_column_data (pandas/_libs/parsers.c:14103)\n  File \"pandas/_libs/parsers.pyx\", line 2274, in pandas._libs.parsers._apply_converter (pandas/_libs/parsers.c:30500)\n  File \"mmm_a.py\", line 20, in k2f\n    return (df-273.15)*1.8+32.00\nTypeError: unsupported operand type(s) for -: 'str' and 'float'\n</code></pre>\n\n<p>As always, any help would be appreciated. This community is great!</p>\n\n<p>Cheers</p>\n\n<h2>Edit/update</h2>\n\n<p>***using quotations for the key, '4', seems to rid the error. df=...:</p>\n\n<pre><code>df = pd.read_table('pathto.txt',skiprows=9,delimiter='\\s+',\nusecols=(0,4),index_col=(0),\nnames=('date','temp'),na_values=('na'),parse_dates=True,\n***converters={'4':k2f}) #though 'temp' still doesn't work, same error\n</code></pre>\n\n<p>but, the function isn't being applied to the values. I.E. df prints, but values aren't changed.</p>\n"}, {"tags": ["python", "pandas", "numpy", "dataframe"], "answers": [{"tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": false, "score": 2, "last_activity_date": 1524097969, "creation_date": 1524097969, "answer_id": 49910920, "question_id": 49910665, "link": "https://stackoverflow.com/questions/49910665/shift-all-even-rows-down-in-python-pandas/49910920#49910920", "title": "Shift all even rows down in python pandas", "body": "<p>I don't think you've described what you're trying to do adequately.  </p>\n\n<p>However, IIUC</p>\n\n<pre><code>def shifty(d):\n    return d.iloc[(np.arange(len(d)) % 2).argsort(kind='mergesort')]\n\ndf.groupby(df.ID.str[0], group_keys=False).apply(shifty)\n\n    ID  value\n0   A1     11\n2   A2     12\n4   A3     13\n1   A1     11\n3   A2     12\n5   A3     13\n6   B1     21\n8   B2     22\n10  B3     23\n7   B1     21\n9   B2     22\n11  B3     23\n12  C1     31\n14  C2     32\n16  C3     33\n13  C1     31\n15  C2     32\n17  C3     33\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 669, "user_id": 8816642, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/--sptEe0bMuY/AAAAAAAAAAI/AAAAAAAAAA4/B0Oa481JYu0/photo.jpg?sz=128", "display_name": "Jiayu Zhang", "link": "https://stackoverflow.com/users/8816642/jiayu-zhang"}, "edited": false, "score": 0, "creation_date": 1524103725, "post_id": 49911138, "comment_id": 86839096, "body": "Hi Wen. Sorry for my description. I changed the &#39;value&#39; column a little bit. Hope I made the question more clear."}, {"owner": {"reputation": 669, "user_id": 8816642, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/--sptEe0bMuY/AAAAAAAAAAI/AAAAAAAAAA4/B0Oa481JYu0/photo.jpg?sz=128", "display_name": "Jiayu Zhang", "link": "https://stackoverflow.com/users/8816642/jiayu-zhang"}, "edited": false, "score": 0, "creation_date": 1524104147, "post_id": 49911138, "comment_id": 86839181, "body": "Sorry I made a bad question title... I thought all moving rows operation were based on shift()..."}], "tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": true, "score": 2, "last_activity_date": 1524105017, "last_edit_date": 1524105017, "creation_date": 1524099887, "answer_id": 49911138, "question_id": 49910665, "link": "https://stackoverflow.com/questions/49910665/shift-all-even-rows-down-in-python-pandas/49911138#49911138", "title": "Shift all even rows down in python pandas", "body": "<p>I am not sure this is what you need, but this is achieve shift two for even number </p>\n\n<pre><code>s=df[np.arange(len(df))%2==0]\ns.index=s.index+2\n\ndf=s.combine_first(df)\n</code></pre>\n\n<p>Update</p>\n\n<pre><code>df['key1']=np.arange(len(df))%2\n\ndf['key2']=np.arange(len(df))//6\n\ndf.sort_values(['key2','key1'])\nOut[770]: \n    ID  value  key1  key2\n0   A1     11     0     0\n2   A2     13     0     0\n4   A3     15     0     0\n1   A1     12     1     0\n3   A2     14     1     0\n5   A3     16     1     0\n6   B1     21     0     1\n8   B2     23     0     1\n10  B3     25     0     1\n7   B1     22     1     1\n9   B2     24     1     1\n11  B3     26     1     1\n12  C1     31     0     2\n14  C2     33     0     2\n16  C3     35     0     2\n13  C1     32     1     2\n15  C2     34     1     2\n17  C3     36     1     2\n</code></pre>\n"}], "owner": {"reputation": 669, "user_id": 8816642, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/--sptEe0bMuY/AAAAAAAAAAI/AAAAAAAAAA4/B0Oa481JYu0/photo.jpg?sz=128", "display_name": "Jiayu Zhang", "link": "https://stackoverflow.com/users/8816642/jiayu-zhang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 152, "favorite_count": 0, "accepted_answer_id": 49911138, "answer_count": 2, "score": 0, "last_activity_date": 1524105017, "creation_date": 1524095748, "last_edit_date": 1524103484, "question_id": 49910665, "link": "https://stackoverflow.com/questions/49910665/shift-all-even-rows-down-in-python-pandas", "title": "Shift all even rows down in python pandas", "body": "<p>I know how to use shift to move the rows.  </p>\n\n<pre><code>df.shift(2)  # periods = 2\n</code></pre>\n\n<p>I know how to select all even rows by steps  </p>\n\n<pre><code> df.iloc[1::2]  # all even rows\n</code></pre>\n\n<p>But how can I move all these even rows down with a specific period in original dataset?</p>\n\n<pre><code>import pandas as pd\n\nd = {'ID': [ \"A1\",\"A1\", \"A2\",\"A2\",\"A3\",\"A3\",\"B1\",\"B1\",\"B2\",\"B2\",\"B3\",\"B3\",\"C1\",\n             \"C1\",\"C2\",\"C2\",\"C3\",\"C3\"],\n\n     'value': [11,12,13,14,15,16,21,22,23,24,25,26,31,32,33,34,35,36]}\n\ndf = pd.DataFrame(data=d)\n  ID  value\n0   A1     11\n1   A1     12\n2   A2     13\n3   A2     14\n4   A3     15\n5   A3     16\n6   B1     21\n7   B1     22\n8   B2     23\n9   B2     24\n10  B3     25\n11  B3     26\n12  C1     31\n13  C1     32\n14  C2     33\n15  C2     34\n16  C3     35\n17  C3     36\n</code></pre>\n\n<p>The final dataframe will be like this,</p>\n\n<pre><code> ID  value\n0   A1     11\n1   A2     13\n2   A3     15     #  all even rows shifted 2 units down\n3   A1     12    #  \u2193\n4   A2     14    #  \u2193\n5   A3     16    #  \u2193\n6   B1     21\n7   B2     23\n8   B3     25\n9   B1     22    #  \u2193\n10  B2     24    #  \u2193\n11  B3     26    #  \u2193\n12  C1     31\n13  C2     33\n14  C3     35\n15  C1     32    #  \u2193\n16  C2     34    #  \u2193\n17  C3     36    #  \u2193\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "list", "big-o"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1524095942, "post_id": 49910662, "comment_id": 86837230, "body": "Big O is not applicable. Big O describes growth, while your input sizes are fixed."}, {"owner": {"reputation": 11552, "user_id": 8112138, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f3b1ddf31abbf37d5fe71ad387e2772c?s=128&d=identicon&r=PG&f=1", "display_name": "Primusa", "link": "https://stackoverflow.com/users/8112138/primusa"}, "edited": false, "score": 1, "creation_date": 1524096810, "post_id": 49910662, "comment_id": 86837442, "body": "Each merge takes <code>O(N)</code>, each partition also takes <code>O(N)</code>. You merge and partition a total of <code>O(logN)</code> times for total complexity <code>O(NlogN)</code>"}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 1, "creation_date": 1524097729, "post_id": 49910662, "comment_id": 86837668, "body": "Merging two lists is O(a+b)unless you merge linked lists,then it <i>can</i> be as low as O(min(a,b))"}], "answers": [{"tags": [], "owner": {"reputation": 4217, "user_id": 9614249, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eJfci.png?s=128&g=1", "display_name": "Increasingly Idiotic", "link": "https://stackoverflow.com/users/9614249/increasingly-idiotic"}, "is_accepted": false, "score": 3, "last_activity_date": 1524097396, "creation_date": 1524097396, "answer_id": 49910850, "question_id": 49910662, "link": "https://stackoverflow.com/questions/49910662/what-is-big-o-for-the-merge-part-of-mergesort/49910850#49910850", "title": "What is big O for the merge part of mergesort?", "body": "<p>Big O notation does not consider a fixed size input. From <a href=\"https://en.wikipedia.org/wiki/Big_O_notation\" rel=\"nofollow noreferrer\">Wikipedia</a>:</p>\n\n<blockquote>\n  <p>In computer science, big O notation is used to classify algorithms according to how their running time or space requirements grow as the input size grows.</p>\n</blockquote>\n\n<p>When merging two sorted lists, the number of comparisons needed depends on the size of the list. Merging two lists of length <em>n</em> requires roughly <em>n</em> comparisons.</p>\n\n<p>In Big O notation this results in a complexity of O(n)</p>\n"}], "owner": {"reputation": 39, "user_id": 6592126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/153fe5e50a2b20815f68795b68396ebe?s=128&d=identicon&r=PG&f=1", "display_name": "JSK", "link": "https://stackoverflow.com/users/6592126/jsk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 182, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1524097396, "creation_date": 1524095726, "last_edit_date": 1524096359, "question_id": 49910662, "link": "https://stackoverflow.com/questions/49910662/what-is-big-o-for-the-merge-part-of-mergesort", "title": "What is big O for the merge part of mergesort?", "body": "<p>Two lists <code>a</code> and <code>b</code> such that both <code>len(a) + len(b) == 5</code> and <code>merge(a,b)</code> does only one comparison. What is th Big O notation for this?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 1598, "user_id": 4024369, "user_type": "registered", "accept_rate": 82, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "JeanVuda", "link": "https://stackoverflow.com/users/4024369/jeanvuda"}, "edited": false, "score": 1, "creation_date": 1524095343, "post_id": 49910616, "comment_id": 86837105, "body": "Is it a homework?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9666957"}, "reply_to_user": {"reputation": 1598, "user_id": 4024369, "user_type": "registered", "accept_rate": 82, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "JeanVuda", "link": "https://stackoverflow.com/users/4024369/jeanvuda"}, "edited": false, "score": 0, "creation_date": 1524095572, "post_id": 49910616, "comment_id": 86837152, "body": "Yes. I do not know how to begin the first year to show up as the starting salary (30,000) instead of 30,600."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9666957"}, "edited": false, "score": 0, "creation_date": 1524095805, "post_id": 49910616, "comment_id": 86837195, "body": "Thanks for the help, but it still starts at 30,600."}, {"owner": {"reputation": 593, "user_id": 2779795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f32f53bb24e3e7fb1ef1935a5576540a?s=128&d=identicon&r=PG&f=1", "display_name": "huck_cussler", "link": "https://stackoverflow.com/users/2779795/huck-cussler"}, "edited": false, "score": 2, "creation_date": 1524096303, "post_id": 49910616, "comment_id": 86837306, "body": "<code>print</code> the salary before adding the increase."}, {"owner": {"reputation": 1104, "user_id": 6296060, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-NZ37JUkP1Pw/AAAAAAAAAAI/AAAAAAAAAYw/Fp6BfZuv7Ho/photo.jpg?sz=128", "display_name": "greedy52", "link": "https://stackoverflow.com/users/6296060/greedy52"}, "edited": false, "score": 0, "creation_date": 1524101369, "post_id": 49910616, "comment_id": 86838571, "body": "if numberYears is 10, will you display 11 salaries or 10 salaries? If 11, print the starting salary before the for loop. if 10, refer to huck_cussier"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 10504901, "user_type": "registered", "profile_image": "https://graph.facebook.com/1920839568211777/picture?type=large", "display_name": "Cruz ", "link": "https://stackoverflow.com/users/10504901/cruz"}, "reply_to_user": {"reputation": 1263, "user_id": 6170930, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BH8Yz.png?s=128&g=1", "display_name": "Niall Cosgrove", "link": "https://stackoverflow.com/users/6170930/niall-cosgrove"}, "edited": false, "score": 0, "creation_date": 1539569633, "post_id": 52808811, "comment_id": 92535821, "body": "Yea, im sorry i don&#39;t know how to use this website yet."}, {"owner": {"reputation": 1263, "user_id": 6170930, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BH8Yz.png?s=128&g=1", "display_name": "Niall Cosgrove", "link": "https://stackoverflow.com/users/6170930/niall-cosgrove"}, "edited": false, "score": 0, "creation_date": 1539570113, "post_id": 52808811, "comment_id": 92535915, "body": "I understand. Was new here myself once. Its worth the effort to get it right. People like to downvote badly formatted code, and there is no penalty for fiddling with your answer until you get it right. Also its usually a good idea to write a short paragraph explaining how you solved the OP&#39;s problem.  Quality gets rewarded here ;)"}], "tags": [], "owner": {"reputation": 1, "user_id": 10504901, "user_type": "registered", "profile_image": "https://graph.facebook.com/1920839568211777/picture?type=large", "display_name": "Cruz ", "link": "https://stackoverflow.com/users/10504901/cruz"}, "is_accepted": false, "score": 0, "last_activity_date": 1539574992, "last_edit_date": 1539574992, "creation_date": 1539568813, "answer_id": 52808811, "question_id": 49910616, "link": "https://stackoverflow.com/questions/49910616/how-to-do-control-statement-for-salary-python/52808811#52808811", "title": "How to do control statement for salary? (Python)", "body": "<p>Try this, if you haven't solved it already.</p>\n\n<pre><code>startSalary = int(input(\" enter beginning salary: \"))\npercentIncrease = (float(input(\" enter percentage increase: \")) / 100)\nnumberYears = list(range(1,(int(input(\" enter number of years in schedule: \"))+1)))\n\n\ndef calculateSalary(startSalary, percentIncrease, numberYears):    \n    for year in numberYears:\n        salaryIncrease = startSalary * percentIncrease\n        newSalary = startSalary + salaryIncrease\n        print(\"{} {:0.2f}\".format(year, startSalary))\n        startSalary = newSalary\n\ncalculateSalary(startSalary, percentIncrease, numberYears)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2192, "user_id": 3106565, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/59de4b3d6299b5b375e072efd690870d?s=128&d=identicon&r=PG&f=1", "display_name": "Osman Mamun", "link": "https://stackoverflow.com/users/3106565/osman-mamun"}, "is_accepted": false, "score": 0, "last_activity_date": 1539578731, "creation_date": 1539578731, "answer_id": 52809895, "question_id": 49910616, "link": "https://stackoverflow.com/questions/49910616/how-to-do-control-statement-for-salary-python/52809895#52809895", "title": "How to do control statement for salary? (Python)", "body": "<pre><code>from tabulate import tabulate\na = ['year', 'salary']\nb = [[i+1, 30000*(1.02**i)] for i in range(10)]\n\nprint(tabulate(b, a))\n\n   year    salary\n  ------  --------\n     1   30000\n     2   30600\n     3   31212\n     4   31836.2\n     5   32473\n     6   33122.4\n     7   33784.9\n     8   34460.6\n     9   35149.8\n    10   35852.8\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9666957"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 446, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1539578731, "creation_date": 1524095200, "last_edit_date": 1524109773, "question_id": 49910616, "link": "https://stackoverflow.com/questions/49910616/how-to-do-control-statement-for-salary-python", "title": "How to do control statement for salary? (Python)", "body": "<blockquote>\n  <p>Write a program that displays a salary schedule, in tabular format,\n  for teachers in a school district. The inputs are the starting salary,\n  the percentage increase, and the number of years in the schedule. Each\n  row in the schedule should contain the year number and the salary for\n  that year. The starting amount is $30,000, increases by 2% over the\n  course of 10 years.</p>\n</blockquote>\n\n<p>So far, I have this:</p>\n\n<pre><code>startSalary = int(input(\"Enter start salary: \"))\n\npercentIncrease = (float(input(\"Enter percent increase: \"))/ 100)\n\nnumberYears = list(range(1,(int(input(\"Enter number of years in the schedule: \")) +1 )))\n\n\ndef calculateSalary(startSalary, percentIncrease, numberYears):\n  for year in numberYears:\n\n    salaryIncrease = startSalary * percentIncrease\n    newSalary = startSalary + salaryIncrease\n    startSalary = newSalary\n    print(year, newSalary)\n\ncalculateSalary(startSalary, percentIncrease, numberYears)\n</code></pre>\n\n<p>This works fine when I run the code, but for my starting year it runs as 30,600 and I need it to start at 30,000 (hence why it is the starting salary).</p>\n"}, {"tags": ["python", "python-3.x", "user-interface", "tkinter", "label"], "answers": [{"comments": [{"owner": {"reputation": 5957, "user_id": 997196, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/E5hdR.png?s=128&g=1", "display_name": "Rivasa", "link": "https://stackoverflow.com/users/997196/rivasa"}, "edited": false, "score": 0, "creation_date": 1524096371, "post_id": 49910631, "comment_id": 86837331, "body": "Perfect! Thank you so much!"}], "tags": [], "owner": {"reputation": 11466, "user_id": 2229945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfbf044eccb8835deec653dae32d56e7?s=128&d=identicon&r=PG", "display_name": "Novel", "link": "https://stackoverflow.com/users/2229945/novel"}, "is_accepted": true, "score": 2, "last_activity_date": 1524095405, "creation_date": 1524095405, "answer_id": 49910631, "question_id": 49910608, "link": "https://stackoverflow.com/questions/49910608/python-3-update-label-in-tkinter-from-different-function/49910631#49910631", "title": "Python 3, Update label in Tkinter from different function?", "body": "<p>To change anything, you have to save the object. In classes you need to give it a name starting with \"self.\". </p>\n\n<pre><code>from tkinter import *\n\nclass MyFirstGUI:\n    def __init__(self, master):\n        self.master = master\n        master.title(\"Login\")\n        Label(master, text=\"E-Mail Address:\").grid(row=0)\n        Label(master, text=\"Password:\").grid(row=1)\n        Label(master, text=\"UserID:\").grid(row=2)\n        e1 = Entry(master)\n        e2 = Entry(master)\n        e3 = Entry(master)\n        e1.grid(row=0, column=1)\n        e2.grid(row=1, column=1)\n        e3.grid(row=2, column=1)\n        b1 = Button(text =\"Login!\", command=self.test)\n        b1.grid(row=3, column=1)\n        Label(master, text=\"Status: \").grid(row=4, column=0)\n        self.mylbl = Label(master, text=\"Boop!\")\n        self.mylbl.grid(row=5, column=0)\n\n    def test(self):\n        self.mylbl.config(text=\"Beep!\")\n\nroot = Tk()\nmy_gui = MyFirstGUI(root)\nroot.mainloop()\n</code></pre>\n\n<p>Note that I made the initialization 2 lines instead of one. This is very important if you want to access the object later. </p>\n"}], "owner": {"reputation": 5957, "user_id": 997196, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/E5hdR.png?s=128&g=1", "display_name": "Rivasa", "link": "https://stackoverflow.com/users/997196/rivasa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 0, "accepted_answer_id": 49910631, "answer_count": 1, "score": 0, "last_activity_date": 1524095405, "creation_date": 1524095160, "question_id": 49910608, "link": "https://stackoverflow.com/questions/49910608/python-3-update-label-in-tkinter-from-different-function", "title": "Python 3, Update label in Tkinter from different function?", "body": "<p>So I'm trying to make a GUI in Tkinter and update a label previously made in the main function, and use a button click to trigger the change. However no matter what I try, including putting a new label on that same grid spot seems to work.</p>\n\n<p>How would I go about this?</p>\n\n<pre><code>from tkinter import *\n\nclass MyFirstGUI:\n    def __init__(self, master):\n        self.master = master\n        master.title(\"Login\")\n        Label(master, text=\"E-Mail Address:\").grid(row=0)\n        Label(master, text=\"Password:\").grid(row=1)\n        Label(master, text=\"UserID:\").grid(row=2)\n        e1 = Entry(master)\n        e2 = Entry(master)\n        e3 = Entry(master)\n        e1.grid(row=0, column=1)\n        e2.grid(row=1, column=1)\n        e3.grid(row=2, column=1)\n        b1 = Button(text =\"Login!\", command=self.test)\n        b1.grid(row=3, column=1)\n        Label(master, text=\"Status: \").grid(row=4, column=0)\n        Label(master, text=\"Boop!\").grid(row=5, column=0)   \n\n    def test(self):\n        # I want to change the label named Boop in this function when button is pressed.\n        # Target word is \"Beep!\"\n\nroot = Tk()\nmy_gui = MyFirstGUI(root)\nroot.mainloop()\n</code></pre>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "edited": false, "score": 1, "creation_date": 1524095214, "post_id": 49910606, "comment_id": 86837076, "body": "Please provide a <b><a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a></b>."}, {"owner": {"reputation": 121, "user_id": 4199161, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-o5tR7eADFbY/AAAAAAAAAAI/AAAAAAAAAEo/nE5Y2nbHzZo/photo.jpg?sz=128", "display_name": "Zain Malik", "link": "https://stackoverflow.com/users/4199161/zain-malik"}, "edited": false, "score": 0, "creation_date": 1524095491, "post_id": 49910606, "comment_id": 86837133, "body": "I have an array of character like this 11000010110001001100011. I want to divide it from the right side like 01100011,01100010,1100001"}, {"owner": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "edited": false, "score": 0, "creation_date": 1524097466, "post_id": 49910606, "comment_id": 86837615, "body": "@ZainMalik. Please edit your question and show exactly how you create the array of characters."}], "answers": [{"tags": [], "owner": {"reputation": 2958, "user_id": 3781180, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a7fddcdb3bbcaa60147ebe56231c22c1?s=128&d=identicon&r=PG&f=1", "display_name": "OneRaynyDay", "link": "https://stackoverflow.com/users/3781180/oneraynyday"}, "is_accepted": false, "score": 2, "last_activity_date": 1524096055, "last_edit_date": 1524096055, "creation_date": 1524095715, "answer_id": 49910660, "question_id": 49910606, "link": "https://stackoverflow.com/questions/49910606/how-to-split-a-array-in-n-character-from-right-side-python/49910660#49910660", "title": "How to split a array in n character from right side python?", "body": "<p>Suppose you have an array <code>arr = [1,2,3,4,5,6]</code>, and <code>m=3</code>.</p>\n\n<p>If you can break it up into divisible chunks, then:</p>\n\n<pre><code>back_m_iter = zip(*([iter(reversed(arr))]*m))\n</code></pre>\n\n<p>Gives you an array grouped by <code>m</code> elements from the back.</p>\n\n<p>If you want the list, simply:</p>\n\n<pre><code>back_m_list = list(back_m_iter)\n\noutput: [(6,5,4),(3,2,1)]\n</code></pre>\n\n<p>If you want to fill the empty spots with <code>None</code>'s for nondivisible arrays(say <code>arr</code> is extended by 1):</p>\n\n<pre><code>from itertools import zip_longest\nback_m_iter = zip_longest(*([iter(reversed(arr))]*m), fillvalue=None)\n\noutput: [(7,6,5),(4,3,2),(1,None,None)]\n</code></pre>\n\n<p>You can replace <code>None</code> with 0's if you wanted the rest to be 0's.</p>\n\n<p><strong>EDIT:</strong> Just saw your comment, here's a revision (misunderstood your question):</p>\n\n<pre><code>back_m_list = [x[::-1] for x in back_m_iter]\n\noutput: [(4,5,6),(1,2,3)]\n</code></pre>\n\n<p>You can also do:</p>\n\n<pre><code>back_m_iter = reversed(list(zip(*([iter(arr)]*m))))\n\noutput: [(4,5,6),(1,2,3)]\n</code></pre>\n"}], "owner": {"reputation": 121, "user_id": 4199161, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-o5tR7eADFbY/AAAAAAAAAAI/AAAAAAAAAEo/nE5Y2nbHzZo/photo.jpg?sz=128", "display_name": "Zain Malik", "link": "https://stackoverflow.com/users/4199161/zain-malik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1524096055, "creation_date": 1524095103, "question_id": 49910606, "link": "https://stackoverflow.com/questions/49910606/how-to-split-a-array-in-n-character-from-right-side-python", "title": "How to split a array in n character from right side python?", "body": "<p>I have a binary array having m characters, I want to divide it into the block of n characters from right side using python. </p>\n"}, {"tags": ["python", "python-2.7", "list"], "answers": [{"comments": [{"owner": {"reputation": 345, "user_id": 1778537, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/0d7b915c9a3eb711e0473b35662867f7?s=128&d=identicon&r=PG", "display_name": "Sigur", "link": "https://stackoverflow.com/users/1778537/sigur"}, "edited": false, "score": 0, "creation_date": 1524098295, "post_id": 49910910, "comment_id": 86837800, "body": "Amazing!! And you are right, I will use only the last one: <code>[13, 11, 12, 9, 4]</code>."}, {"owner": {"reputation": 345, "user_id": 1778537, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/0d7b915c9a3eb711e0473b35662867f7?s=128&d=identicon&r=PG", "display_name": "Sigur", "link": "https://stackoverflow.com/users/1778537/sigur"}, "edited": false, "score": 0, "creation_date": 1524098596, "post_id": 49910910, "comment_id": 86837871, "body": "What is <code>yield</code>?"}, {"owner": {"reputation": 345, "user_id": 1778537, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/0d7b915c9a3eb711e0473b35662867f7?s=128&d=identicon&r=PG", "display_name": "Sigur", "link": "https://stackoverflow.com/users/1778537/sigur"}, "edited": false, "score": 0, "creation_date": 1524098705, "post_id": 49910910, "comment_id": 86837901, "body": "I&#39;d like to update <code>my_list</code> (or create a new one) replacing the elements by those computed as above. I think I can do this. Let me try."}, {"owner": {"reputation": 345, "user_id": 1778537, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/0d7b915c9a3eb711e0473b35662867f7?s=128&d=identicon&r=PG", "display_name": "Sigur", "link": "https://stackoverflow.com/users/1778537/sigur"}, "edited": false, "score": 0, "creation_date": 1524104818, "post_id": 49910910, "comment_id": 86839344, "body": "I edited and added <code>[6, 2]</code> to list. The replacement should work also for <code>6</code>."}], "tags": [], "owner": {"reputation": 67048, "user_id": 388787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f786b1ad349a30e02802ae61b4518fc?s=128&d=identicon&r=PG", "display_name": "Dan D.", "link": "https://stackoverflow.com/users/388787/dan-d"}, "is_accepted": false, "score": 1, "last_activity_date": 1524098516, "last_edit_date": 1524098516, "creation_date": 1524097897, "answer_id": 49910910, "question_id": 49910547, "link": "https://stackoverflow.com/questions/49910547/replace-elements-of-a-list-by-elements-of-other-list/49910910#49910910", "title": "Replace elements of a list by elements of other list", "body": "<pre><code>my_list = [[0], [1], [2], [3], [4], [5], [6], [7, 6, 4, 3], [8, 6, 3], [9], [10, 4, 3], [11], [12, 9], [13, 11, 12]]\n\ndef by_first(l):\n    d = {}\n    for i in l:\n        if len(i) &gt; 1:\n            d.setdefault(i[0], []).append(i)\n    return d\n\nindex = by_first(my_list)\n\ndef dfs(item):\n    for p in index.get(item[-1], []):\n        q = item + p[1:]\n        yield q\n        for v in dfs(q):\n            yield v\n\nfor l in my_list:\n    for p in dfs(l):\n        print p\n</code></pre>\n\n<p>The index contains:</p>\n\n<pre><code>{7: [[7, 6, 4, 3]], \n 8: [[8, 6, 3]], \n 9: [[9, 4]], \n 10: [[10, 4, 3]], \n 12: [[12, 9]], \n 13: [[13, 11, 12]]}\n</code></pre>\n\n<p>Prints without <code>[9, 4]</code>:</p>\n\n<pre><code>[13, 11, 12, 9]\n</code></pre>\n\n<p>If we add <code>[9, 4]</code>:</p>\n\n<pre><code>[9, 4]\n[12, 9, 4]\n[13, 11, 12, 9]\n[13, 11, 12, 9, 4]\n</code></pre>\n\n<p>These are the items that had at least one other item appended to them. <code>[9, 4]</code> is there because it is appended to <code>[9]</code></p>\n\n<p>It appears that you might only want the longest.</p>\n\n<p>To get one of the lists with the same number of items as the longest only do the following:</p>\n\n<pre><code>def find():\n    for l in my_list:\n        #yield l\n        for p in dfs(l):\n            yield p\n\nprint max(find(), key=len)\n</code></pre>\n\n<p>If you want the initial lists to be included uncomment the line <code>yield l</code>.</p>\n"}], "owner": {"reputation": 345, "user_id": 1778537, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/0d7b915c9a3eb711e0473b35662867f7?s=128&d=identicon&r=PG", "display_name": "Sigur", "link": "https://stackoverflow.com/users/1778537/sigur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1524104759, "creation_date": 1524094570, "last_edit_date": 1524104759, "question_id": 49910547, "link": "https://stackoverflow.com/questions/49910547/replace-elements-of-a-list-by-elements-of-other-list", "title": "Replace elements of a list by elements of other list", "body": "<p>Consider the following Python list of lists:</p>\n\n<pre><code>my_list = [[0], [1], [2], [3], [4], [5], [6, 2], [7, 6, 4, 3], [8, 6, 3], [9], [10, 4, 3], [11], [12, 9], [13, 11, 12]]\n</code></pre>\n\n<p>Every element of <code>my_list</code> is a list starting with its index in <code>my_list</code> and the other values are less than the first one, and so also appears as 1st element of some previous list.</p>\n\n<p>For example, <code>my_list[8]</code>  is <code>[8, 6, 3]</code> (and everybody knows that <code>6,3 &lt; 8</code>).</p>\n\n<p>I'd like to do the following replacement when is possible: if <code>s</code> in <code>my_list</code> contains an element <code>s_i</code> such that some previous element <code>r</code> in <code>my_list</code> is as <code>[s_i, a, b, c]</code> (or longer), replace <code>s_i</code> in <code>s</code> by <code>s_i, a, b, c</code> (or more).</p>\n\n<p>For example, instead of <code>[13, 11, 12]</code> <strong><em>(could be done for other elements too)</em></strong> in <code>my_list</code> I'd like to get <code>[13, 11, 12, 9]</code> since <code>[12, 9]</code> is in <code>my_list</code> also.</p>\n\n<p>But, notice that this procedure should be done recursively, if necessary. </p>\n\n<p>For example, suppose that <code>[9, 4]</code> is in <code>my_list</code>, then the result should be <code>[13, 11, 12, 9, 4]</code>.</p>\n\n<p>Or, since <code>[6, 2]</code> is in <code>my_list</code>, such replacement should be done also for <code>[7, 6, 4, 3]</code> and <code>[8, 6, 3]</code>.</p>\n\n<p>Sorry, if is not clear what I need. I think that defining some function and call it in <code>while</code> could be a profit.</p>\n"}, {"tags": ["python", "mysql", "django"], "answers": [{"comments": [{"owner": {"reputation": 718, "user_id": 9275722, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/14eAJ.jpg?s=128&g=1", "display_name": "aaronlhe", "link": "https://stackoverflow.com/users/9275722/aaronlhe"}, "edited": false, "score": 0, "creation_date": 1524130167, "post_id": 49910591, "comment_id": 86850277, "body": "Thanks Ralf =) Good to know that my initial thoughts may not be so far off afterall.."}], "tags": [], "owner": {"reputation": 13134, "user_id": 9225671, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Y1fpFhWva_w/AAAAAAAAAAI/AAAAAAAAAC8/weHLi_-bFj8/photo.jpg?sz=128", "display_name": "Ralf", "link": "https://stackoverflow.com/users/9225671/ralf"}, "is_accepted": false, "score": 1, "last_activity_date": 1524094967, "creation_date": 1524094967, "answer_id": 49910591, "question_id": 49910523, "link": "https://stackoverflow.com/questions/49910523/automatically-delete-old-data-sets-in-django-mysql/49910591#49910591", "title": "Automatically delete &#39;old&#39; data sets in Django - MYSQL", "body": "<p>I usually use a CRON job for this kind of task.</p>\n\n<p>I would set it up just the way you described it.</p>\n"}, {"comments": [{"owner": {"reputation": 718, "user_id": 9275722, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/14eAJ.jpg?s=128&g=1", "display_name": "aaronlhe", "link": "https://stackoverflow.com/users/9275722/aaronlhe"}, "edited": false, "score": 0, "creation_date": 1524130248, "post_id": 49911485, "comment_id": 86850338, "body": "Thanks Jerin, I looked into this and I&#39;m goona give the MYSQL event scheduler a shot during alpha and see how it pans out. Good info!"}], "tags": [], "owner": {"reputation": 54482, "user_id": 8283848, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/YiHgN.jpg?s=128&g=1", "display_name": "JPG", "link": "https://stackoverflow.com/users/8283848/jpg"}, "is_accepted": true, "score": 2, "last_activity_date": 1526108667, "last_edit_date": 1526108667, "creation_date": 1524102683, "answer_id": 49911485, "question_id": 49910523, "link": "https://stackoverflow.com/questions/49910523/automatically-delete-old-data-sets-in-django-mysql/49911485#49911485", "title": "Automatically delete &#39;old&#39; data sets in Django - MYSQL", "body": "<p>I think you could use <strong>MYSQL Event Scheduler</strong>. MySQL Events are tasks that run according to a <code>schedule</code>. Therefore, we sometimes refer to them as <strong>scheduled events</strong>. When you create an event, you are creating a named database object containing one or more SQL statements to be executed at one or more regular intervals, beginning and ending at a specific date and time. Conceptually, this is similar to the idea of the Unix crontab (also known as a \u201ccron job\u201d) or the Windows Task Scheduler.</p>\n\n<p>References:</p>\n\n<ul>\n<li><a href=\"https://dev.mysql.com/doc/refman/5.7/en/events-overview.html\" rel=\"nofollow noreferrer\">MYSQL Event Scheduler</a></li>\n<li><a href=\"http://docs.celeryproject.org/en/latest/userguide/periodic-tasks.html\" rel=\"nofollow noreferrer\">Celery beat</a> is a periodic scheduler, you can also try that too.</li>\n</ul>\n\n<p>Notes:</p>\n\n<ol>\n<li>I'm not sure which is the more reliable method to achieve your requirement</li>\n<li><strong>MySQL Event Scheduler</strong> is only available from version <code>5.1.6</code></li>\n</ol>\n"}], "owner": {"reputation": 718, "user_id": 9275722, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/14eAJ.jpg?s=128&g=1", "display_name": "aaronlhe", "link": "https://stackoverflow.com/users/9275722/aaronlhe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 176, "favorite_count": 0, "accepted_answer_id": 49911485, "answer_count": 2, "score": 0, "last_activity_date": 1526108667, "creation_date": 1524094404, "question_id": 49910523, "link": "https://stackoverflow.com/questions/49910523/automatically-delete-old-data-sets-in-django-mysql", "title": "Automatically delete &#39;old&#39; data sets in Django - MYSQL", "body": "<p>I have a sensor node that is streaming environmental data every 5 minutes (temperature, pH) along with its battery levels to a MYSQL instance (and a Django App). Now, I will store all logged temperature , pH data indefinitely on the db as they stream in, but would like to limit battery-level data storage to up to 3 months only. Reason being, its not an important metric for historical data analytics and there is hence no point on taking up disk space, especially if there are multiple nodes sending in data like this.</p>\n\n<p>Think of my models.py that deal with this battery level data as something like...</p>\n\n<pre><code>class Node_Health(models.Model):\n     # Battery levels, in percentage to two decimal placing\n     timestamp = models.DateTimeField(db_index=True,auto_now=False, auto_now_add=False, null=True) # db index\n     battery_lvl = models.CharField(max_length=4,null=True)\n</code></pre>\n\n<p>Question is, How do I (best practice) automatically monitor &amp; discard of 'old' battery level data once the battery level logs reach > 3 months in the Django-python framework ? i.e. store only the latest three months of battery levels in db. Do i use CRON or Celery with a python script that checks the db for any data in excess and wipes out these 'old data' ? (this is the only way i Know, which may not be the better way to do it)... I am certainly not an expert in db and dev-ops ; would appreciate any pointers or suggestions. </p>\n"}, {"tags": ["python", "django"], "answers": [{"comments": [{"owner": {"reputation": 70, "user_id": 8637661, "user_type": "registered", "profile_image": "https://graph.facebook.com/1620339114703675/picture?type=large", "display_name": "Hemachandra Ghanta", "link": "https://stackoverflow.com/users/8637661/hemachandra-ghanta"}, "edited": false, "score": 0, "creation_date": 1524094933, "post_id": 49910548, "comment_id": 86837008, "body": "Can you please refer to which line of the code should be changed and to what !"}, {"owner": {"reputation": 13134, "user_id": 9225671, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Y1fpFhWva_w/AAAAAAAAAAI/AAAAAAAAAC8/weHLi_-bFj8/photo.jpg?sz=128", "display_name": "Ralf", "link": "https://stackoverflow.com/users/9225671/ralf"}, "reply_to_user": {"reputation": 70, "user_id": 8637661, "user_type": "registered", "profile_image": "https://graph.facebook.com/1620339114703675/picture?type=large", "display_name": "Hemachandra Ghanta", "link": "https://stackoverflow.com/users/8637661/hemachandra-ghanta"}, "edited": false, "score": 0, "creation_date": 1524095080, "post_id": 49910548, "comment_id": 86837049, "body": "Each view should only render one template, so after authenticating a user you should then redirect them to their page, which should be a new view which renders the template."}, {"owner": {"reputation": 13134, "user_id": 9225671, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Y1fpFhWva_w/AAAAAAAAAAI/AAAAAAAAAC8/weHLi_-bFj8/photo.jpg?sz=128", "display_name": "Ralf", "link": "https://stackoverflow.com/users/9225671/ralf"}, "reply_to_user": {"reputation": 70, "user_id": 8637661, "user_type": "registered", "profile_image": "https://graph.facebook.com/1620339114703675/picture?type=large", "display_name": "Hemachandra Ghanta", "link": "https://stackoverflow.com/users/8637661/hemachandra-ghanta"}, "edited": false, "score": 0, "creation_date": 1524095137, "post_id": 49910548, "comment_id": 86837056, "body": "You can read up on djangos <code>redirect</code> helper, <code>login_required</code> and <code>user_passes_test</code> decorators"}, {"owner": {"reputation": 70, "user_id": 8637661, "user_type": "registered", "profile_image": "https://graph.facebook.com/1620339114703675/picture?type=large", "display_name": "Hemachandra Ghanta", "link": "https://stackoverflow.com/users/8637661/hemachandra-ghanta"}, "edited": false, "score": 0, "creation_date": 1524095920, "post_id": 49910548, "comment_id": 86837221, "body": "But I have multiple users who should login from the same Login page put each user after they login will have different HTML web pages. So I should have only one view to operate this!"}], "tags": [], "owner": {"reputation": 13134, "user_id": 9225671, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Y1fpFhWva_w/AAAAAAAAAAI/AAAAAAAAAC8/weHLi_-bFj8/photo.jpg?sz=128", "display_name": "Ralf", "link": "https://stackoverflow.com/users/9225671/ralf"}, "is_accepted": false, "score": 0, "last_activity_date": 1524094573, "creation_date": 1524094573, "answer_id": 49910548, "question_id": 49910515, "link": "https://stackoverflow.com/questions/49910515/confirm-resubmission-error-on-back-button-python-with-django/49910548#49910548", "title": "Confirm resubmission error on back button &quot;Python with Django&quot;", "body": "<p>Each list should be its own view, not just its own template.</p>\n\n<p>Please read the <a href=\"https://docs.djangoproject.com/en/2.0/intro/tutorial01/\" rel=\"nofollow noreferrer\">django docs tutorial</a> and follow the general guidelines presented there.</p>\n"}], "owner": {"reputation": 70, "user_id": 8637661, "user_type": "registered", "profile_image": "https://graph.facebook.com/1620339114703675/picture?type=large", "display_name": "Hemachandra Ghanta", "link": "https://stackoverflow.com/users/8637661/hemachandra-ghanta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 110, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1524094707, "creation_date": 1524094311, "last_edit_date": 1524094707, "question_id": 49910515, "link": "https://stackoverflow.com/questions/49910515/confirm-resubmission-error-on-back-button-python-with-django", "title": "Confirm resubmission error on back button &quot;Python with Django&quot;", "body": "<p>I built a web application where user can login and view work orders, property list and external contractors. However when I click back button on view property list page or view work orders page or view external contractors page it gives me an error saying confirm resubmission.\n<a href=\"https://i.stack.imgur.com/SQncr.png\" rel=\"nofollow noreferrer\">Error screenshot</a></p>\n\n<pre><code>def user_login(request):\nif request.method == 'POST':\n    form = LoginForm(request.POST)\n    if form.is_valid():\n        cd = form.cleaned_data\n        user = authenticate(username=cd['username'], password=cd['password'])\n\n        if user is not None:\n            if user.is_active:\n                login(request, user)\n                if request.user.username == 'propertymanager':\n                    #return HttpResponse('Authenticated successfully')\n                    return render(request, 'account/dashboard.html', {'section': dashboard})\n                elif request.user.username == 'technician1':\n                    #return HttpResponse('Authenticated successfully')\n                    return render(request, 'account/technician_dashboard.html', {'section': dashboard})\n                elif request.user.username == 'technician2':\n                    return render(request, 'account/technician2_dashboard.html',{'section': technician2_dashboard})\n                else:\n                    return render(request, 'registration/incorrect_user.html', {'section':incorrect_user})\n            else:\n                return HttpResponse('Disabled account')\n        else:\n            return render(request, 'registration/login.html', {'section': incorrect_login})\n    else:\n        return render(request, 'registration/login.html', {'section': incorrect_login})\nelse:\n    form = LoginForm()\n    return render(request, 'account/login.html', {'form': form})\n</code></pre>\n\n<p>I tried replacing the last else with dashboard page</p>\n\n<pre><code>                else:\n                return HttpResponse('Disabled account')\n        else:\n            return render(request, 'registration/login.html', {'section': incorrect_login})\n    else:\n        return render(request, 'registration/login.html', {'section': incorrect_login})\nelse:\n    return render(request, 'account/dashboard.html', {'section': dashboard})\n</code></pre>\n\n<p>But now my login button doesn't work.\n<strong>Need Help! When I am on view property list page and click back button I should be able to see the dashboard</strong></p>\n"}, {"tags": ["python", "python-3.x", "pandas"], "comments": [{"owner": {"reputation": 2951, "user_id": 9335964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/601ca67d53004283e6ee4f893597cfda?s=128&d=identicon&r=PG&f=1", "display_name": "Joost", "link": "https://stackoverflow.com/users/9335964/joost"}, "edited": false, "score": 1, "creation_date": 1524094263, "post_id": 49910451, "comment_id": 86836830, "body": "Does event1 have anything to do with event2? Should the calculations be done per ID?"}, {"owner": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "edited": false, "score": 0, "creation_date": 1524104054, "post_id": 49910451, "comment_id": 86839160, "body": "Why are there null values (<code>-</code>) ? Whats the logic for them?"}, {"owner": {"reputation": 6662, "user_id": 754176, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/66a75feab0b925bfaa31c247d38b1298?s=128&d=identicon&r=PG", "display_name": "nanounanue", "link": "https://stackoverflow.com/users/754176/nanounanue"}, "reply_to_user": {"reputation": 2951, "user_id": 9335964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/601ca67d53004283e6ee4f893597cfda?s=128&d=identicon&r=PG&f=1", "display_name": "Joost", "link": "https://stackoverflow.com/users/9335964/joost"}, "edited": false, "score": 0, "creation_date": 1524104176, "post_id": 49910451, "comment_id": 86839188, "body": "@Joost The events are independent and the calculations is per <code>ID</code>. I am gonna edit the question. Thank you for your questions"}, {"owner": {"reputation": 6662, "user_id": 754176, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/66a75feab0b925bfaa31c247d38b1298?s=128&d=identicon&r=PG", "display_name": "nanounanue", "link": "https://stackoverflow.com/users/754176/nanounanue"}, "reply_to_user": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "edited": false, "score": 0, "creation_date": 1524104225, "post_id": 49910451, "comment_id": 86839198, "body": "@RafaelC The meaning of <code>-</code> are <code>None</code> or the equivalent in <code>pandas</code> for <code>Not a date time</code>"}, {"owner": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "edited": false, "score": 0, "creation_date": 1524104379, "post_id": 49910451, "comment_id": 86839238, "body": "I know. I asked why are there null values? For example, why isn&#39;t the first value for <code>time_1</code> zero, and the second the difference between <code>2016-02-07</code> and <code>2016-01-03</code> ? What&#39;s the logic?"}, {"owner": {"reputation": 6662, "user_id": 754176, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/66a75feab0b925bfaa31c247d38b1298?s=128&d=identicon&r=PG", "display_name": "nanounanue", "link": "https://stackoverflow.com/users/754176/nanounanue"}, "reply_to_user": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "edited": false, "score": 0, "creation_date": 1524105735, "post_id": 49910451, "comment_id": 86839524, "body": "@RafaelC Sorry about the confusion. The first value of <code>time_1</code> is <code>None</code> because you don&#39; t have any prior information. So you really don&#39;t know the time elapsed. The second value is <code>0</code> because the event happen in that date. Then the third value is <code>11</code> because there are 11 days between those two dates."}, {"owner": {"reputation": 6662, "user_id": 754176, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/66a75feab0b925bfaa31c247d38b1298?s=128&d=identicon&r=PG", "display_name": "nanounanue", "link": "https://stackoverflow.com/users/754176/nanounanue"}, "edited": false, "score": 0, "creation_date": 1524105828, "post_id": 49910451, "comment_id": 86839541, "body": "I just added a new row, hope that this clarifies"}], "answers": [{"comments": [{"owner": {"reputation": 6662, "user_id": 754176, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/66a75feab0b925bfaa31c247d38b1298?s=128&d=identicon&r=PG", "display_name": "nanounanue", "link": "https://stackoverflow.com/users/754176/nanounanue"}, "edited": false, "score": 0, "creation_date": 1524107229, "post_id": 49912050, "comment_id": 86839842, "body": "Could you add the code for unsetting the indices and then recovering them up?"}], "tags": [], "owner": {"reputation": 288763, "user_id": 487339, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wbe4o.png?s=128&g=1", "display_name": "DSM", "link": "https://stackoverflow.com/users/487339/dsm"}, "is_accepted": true, "score": 4, "last_activity_date": 1524106987, "creation_date": 1524106987, "answer_id": 49912050, "question_id": 49910451, "link": "https://stackoverflow.com/questions/49910451/create-a-new-column-containing-time-since-last-event-in-pandas/49912050#49912050", "title": "Create a new column containing time since last event in pandas", "body": "<p>If you reset the index so that ID and date are columns (just to make referring to them easier -- <code>df.index.get_level_values(\"date\")</code> is kind of unwieldy) and you ensure that df[\"date\"] is a real datetime column and not strings, I think it's pretty straightforward:</p>\n\n<pre><code>df[\"time_1\"] = df[\"date\"] - df[\"date\"].where(df[\"event_1\"]).groupby(df[\"ID\"]).ffill()\ndf[\"time_2\"] = df[\"date\"] - df[\"date\"].where(df[\"event_2\"]).groupby(df[\"ID\"]).ffill()\n</code></pre>\n\n<p>gives me</p>\n\n<pre><code>In [173]: df\nOut[173]: \n   ID       date  event_1  event_2  time_1  time_2\n0   1 2016-01-03    False    False     NaT     NaT\n1   1 2016-02-07     True    False  0 days     NaT\n2   1 2016-02-18    False     True 11 days  0 days\n3   2 2016-01-01    False     True     NaT  0 days\n4   2 2016-01-04    False    False     NaT  3 days\n5   2 2016-02-02     True    False  0 days 32 days\n6   2 2016-02-04    False    False  2 days 34 days\n7   2 2016-02-05    False     True  3 days  0 days\n</code></pre>\n\n<p>which works because (using event_2 because it's more interesting as it has two different Trues) first we select only the \"start\" times:</p>\n\n<pre><code>In [176]: df[\"date\"].where(df[\"event_2\"])\nOut[176]: \n0          NaT\n1          NaT\n2   2016-02-18\n3   2016-01-01\n4          NaT\n5          NaT\n6          NaT\n7   2016-02-05\nName: date, dtype: datetime64[ns]\n</code></pre>\n\n<p>and then we group by the IDs and forward fill the reference dates:</p>\n\n<pre><code>In [177]: df[\"date\"].where(df[\"event_2\"]).groupby(df[\"ID\"]).ffill()\nOut[177]: \n0          NaT\n1          NaT\n2   2016-02-18\n3   2016-01-01\n4   2016-01-01\n5   2016-01-01\n6   2016-01-01\n7   2016-02-05\nName: date, dtype: datetime64[ns]\n</code></pre>\n\n<p>after which we simply need to subtract to get the timedeltas.  You can use</p>\n\n<pre><code>df[\"time_1\"] = df[\"time_1\"].dt.days\ndf[\"time_2\"] = df[\"time_2\"].dt.days\n</code></pre>\n\n<p>to get to floats instead of timedeltas if you prefer.</p>\n"}], "owner": {"reputation": 6662, "user_id": 754176, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/66a75feab0b925bfaa31c247d38b1298?s=128&d=identicon&r=PG", "display_name": "nanounanue", "link": "https://stackoverflow.com/users/754176/nanounanue"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 889, "favorite_count": 1, "accepted_answer_id": 49912050, "answer_count": 1, "score": 1, "last_activity_date": 1524106987, "creation_date": 1524093911, "last_edit_date": 1524105810, "question_id": 49910451, "link": "https://stackoverflow.com/questions/49910451/create-a-new-column-containing-time-since-last-event-in-pandas", "title": "Create a new column containing time since last event in pandas", "body": "<p>I have a pandas dataframe with the following structure:</p>\n\n<pre><code>ID    date           event_1   event_2 \n 1    2016-01-03     False     False\n      2016-02-07     True      False\n      2016-02-18     False     True\n 2    2016-01-01     False     True\n      2016-01-04     False     False\n      2016-02-02     True      False\n      2016-02-04     False     False\n      2016-02-05     False     True\n</code></pre>\n\n<p><code>ID</code> and <code>date</code> are a <code>MultiIndex</code>.</p>\n\n<p>The question is, I want to create two new  columns <code>time_1</code> and <code>time_2</code>. Those columns should show the time elapsed since the corresponding event, e.g. </p>\n\n<pre><code>ID    date           event_1     event_2   time_1    time_2\n 1    2016-01-03     False       False     -          -\n      2016-02-07     True        False     0          -\n      2016-02-18     False       True      11         0\n 2    2016-01-01     False       True      -          0\n      2016-01-04     False       False     -          3\n      2016-02-02     True        False     0          32\n      2016-02-04     False       False     2          34\n      2016-02-05     False       True      3          0\n</code></pre>\n\n<p>How can I create a function that calculates this in <code>pandas</code>, given that the date is an index?</p>\n\n<p>The calculations are per <code>ID</code> and the events are unrelated. </p>\n"}, {"tags": ["python", "django"], "comments": [{"owner": {"reputation": 168, "user_id": 9490848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc36e2370efa1d3d682b5b68bb505bd0?s=128&d=identicon&r=PG&f=1", "display_name": "Flupper", "link": "https://stackoverflow.com/users/9490848/flupper"}, "edited": false, "score": 0, "creation_date": 1524395326, "post_id": 49910445, "comment_id": 86946298, "body": "<a href=\"https://docs.djangoproject.com/en/2.0/topics/db/queries/\" rel=\"nofollow noreferrer\">docs.djangoproject.com/en/2.0/topics/db/queries</a>"}], "answers": [{"comments": [{"owner": {"reputation": 13134, "user_id": 9225671, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Y1fpFhWva_w/AAAAAAAAAAI/AAAAAAAAAC8/weHLi_-bFj8/photo.jpg?sz=128", "display_name": "Ralf", "link": "https://stackoverflow.com/users/9225671/ralf"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1524097367, "post_id": 49910489, "comment_id": 86837579, "body": "I changed the wording of my answer."}, {"owner": {"reputation": 13134, "user_id": 9225671, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Y1fpFhWva_w/AAAAAAAAAAI/AAAAAAAAAC8/weHLi_-bFj8/photo.jpg?sz=128", "display_name": "Ralf", "link": "https://stackoverflow.com/users/9225671/ralf"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1524097737, "post_id": 49910489, "comment_id": 86837671, "body": "In the case of Djangos ORM, it makes sense to separate them like this so you now which ones semantically belong to an instance and which operations belong to the manager."}, {"owner": {"reputation": 168, "user_id": 9490848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc36e2370efa1d3d682b5b68bb505bd0?s=128&d=identicon&r=PG&f=1", "display_name": "Flupper", "link": "https://stackoverflow.com/users/9490848/flupper"}, "edited": false, "score": 0, "creation_date": 1524148669, "post_id": 49910489, "comment_id": 86863394, "body": "i asked that question as I wondered why when I write any query why  there are no parentheses for example modelname().objects.all() as I make an instance from the model class then I call objects attribute."}], "tags": [], "owner": {"reputation": 13134, "user_id": 9225671, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Y1fpFhWva_w/AAAAAAAAAAI/AAAAAAAAAC8/weHLi_-bFj8/photo.jpg?sz=128", "display_name": "Ralf", "link": "https://stackoverflow.com/users/9225671/ralf"}, "is_accepted": false, "score": 0, "last_activity_date": 1524097317, "last_edit_date": 1524097317, "creation_date": 1524094085, "answer_id": 49910489, "question_id": 49910445, "link": "https://stackoverflow.com/questions/49910445/does-anyone-know-the-difference-between-table-level-operations-and-record-lev/49910489#49910489", "title": "Does anyone know the difference between \u201ctable-level\u201d operations and \u201crecord-level\u201d operations", "body": "<p>table-level operations may affect more than one record or row, like <code>select</code> or an <code>update</code> with many rows.</p>\n\n<p>row-level operations affect only one row, like <code>delete</code> or <code>update</code> of a single record.</p>\n"}], "owner": {"reputation": 168, "user_id": 9490848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc36e2370efa1d3d682b5b68bb505bd0?s=128&d=identicon&r=PG&f=1", "display_name": "Flupper", "link": "https://stackoverflow.com/users/9490848/flupper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 68, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1524148124, "creation_date": 1524093857, "last_edit_date": 1524148124, "question_id": 49910445, "link": "https://stackoverflow.com/questions/49910445/does-anyone-know-the-difference-between-table-level-operations-and-record-lev", "title": "Does anyone know the difference between \u201ctable-level\u201d operations and \u201crecord-level\u201d operations", "body": "<p>From <a href=\"https://docs.djangoproject.com/en/2.0/topics/db/queries/\" rel=\"nofollow noreferrer\">Django Documentation</a>:</p>\n\n<blockquote>\n  <p>Managers are accessible only via model classes, rather than from model instances, to enforce a separation between \u201ctable-level\u201d operations and \u201crecord-level\u201d operations.</p>\n</blockquote>\n"}, {"tags": ["python", "regex", "keras", "filenames"], "answers": [{"tags": [], "owner": {"reputation": 1148, "user_id": 4157431, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/--7aZ_ES6FNg/AAAAAAAAAAI/AAAAAAAAB1s/sMWQABH-JQg/photo.jpg?sz=128", "display_name": "Rami Alloush", "link": "https://stackoverflow.com/users/4157431/rami-alloush"}, "is_accepted": false, "score": 0, "last_activity_date": 1525378046, "creation_date": 1525378046, "answer_id": 50163094, "question_id": 49910419, "link": "https://stackoverflow.com/questions/49910419/keras-flow-from-directory-or-flow-using-filenames-instead-of-directories/50163094#50163094", "title": "Keras: flow_from_directory() or flow() using filenames instead of directories", "body": "<p>According to the <a href=\"https://keras.io/preprocessing/image/\" rel=\"nofollow noreferrer\">official documentation</a>, you can add argument \"classes\". Which is an optional list of class subdirectories (e.g. ['dogs', 'cats']). Default: None.</p>\n\n<p>If not provided, the list of classes will be automatically inferred from the subdirectory names/structure under directory, where each subdirectory will be treated as a different class (and the order of the classes, which will map to the label indices, will be alphanumeric). The dictionary containing the mapping from class names to class indices can be obtained via the attribute class_indices.</p>\n"}], "owner": {"reputation": 349, "user_id": 4905697, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/83261660394cf35349c602d83ed3e8d7?s=128&d=identicon&r=PG&f=1", "display_name": "Jasper R.", "link": "https://stackoverflow.com/users/4905697/jasper-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 974, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1525378046, "creation_date": 1524093690, "question_id": 49910419, "link": "https://stackoverflow.com/questions/49910419/keras-flow-from-directory-or-flow-using-filenames-instead-of-directories", "title": "Keras: flow_from_directory() or flow() using filenames instead of directories", "body": "<p>I'm importing images to Keras from a directory. The code looks something like this:</p>\n\n<pre><code>gen = datagen.flow_from_directory (\n    DIRECTORY,\n    target_size = (IMAGE_WIDTH, IMAGE_HEIGHT),\n    batch_size = BATCH_SIZE,\n    class_mode = \"binary\"\n)\n</code></pre>\n\n<p>However, my data is organized not by folders, but by filenames. If I couldn't change this structure, is there any way to flow while separating by a regex (say, ending with \".jpg\" vs. \".png\", or starting with \"numeral_7\" vs \"numeral_8\")?</p>\n"}, {"tags": ["python", "html", "django"], "comments": [{"owner": {"reputation": 6952, "user_id": 5644965, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J9KaA.jpg?s=128&g=1", "display_name": "Lemayzeur", "link": "https://stackoverflow.com/users/5644965/lemayzeur"}, "edited": false, "score": 0, "creation_date": 1524095906, "post_id": 49910402, "comment_id": 86837216, "body": "what kind of attributes that you set to? maybe you can do it with javascript in case the attributes values do not come from any model"}, {"owner": {"reputation": 47, "user_id": 9666876, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-0HY4zNGrVLY/AAAAAAAAAAI/AAAAAAAAAFc/2N3hPX3ILpU/photo.jpg?sz=128", "display_name": "MiakovA", "link": "https://stackoverflow.com/users/9666876/miakova"}, "reply_to_user": {"reputation": 6952, "user_id": 5644965, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J9KaA.jpg?s=128&g=1", "display_name": "Lemayzeur", "link": "https://stackoverflow.com/users/5644965/lemayzeur"}, "edited": false, "score": 0, "creation_date": 1524098570, "post_id": 49910402, "comment_id": 86837867, "body": "@Lemayzeur there&#39;s another ul tag with some li tags in page. so it&#39;s not easy to use javascript because I don&#39;t want to set attributes to them."}, {"owner": {"reputation": 47, "user_id": 9666876, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-0HY4zNGrVLY/AAAAAAAAAAI/AAAAAAAAAFc/2N3hPX3ILpU/photo.jpg?sz=128", "display_name": "MiakovA", "link": "https://stackoverflow.com/users/9666876/miakova"}, "reply_to_user": {"reputation": 6952, "user_id": 5644965, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J9KaA.jpg?s=128&g=1", "display_name": "Lemayzeur", "link": "https://stackoverflow.com/users/5644965/lemayzeur"}, "edited": false, "score": 0, "creation_date": 1524098674, "post_id": 49910402, "comment_id": 86837884, "body": "@Lemayzeur I want to add a bootstrap class. class=&quot;list-group-item&quot;"}, {"owner": {"reputation": 6952, "user_id": 5644965, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J9KaA.jpg?s=128&g=1", "display_name": "Lemayzeur", "link": "https://stackoverflow.com/users/5644965/lemayzeur"}, "edited": false, "score": 0, "creation_date": 1524101206, "post_id": 49910402, "comment_id": 86838530, "body": "I would avoid the modification of the html generated by django. I&#39;d do with the id of the field: <code>$(&quot;#id_checkboxselectmulitplefield .li&quot;).addClass(&quot;li-group-item&quot;)</code>. or with pure js <code>Document.querySelector(&quot;#d_checkboxselectmulitplefield .li).setAttrinutes(&quot;class&quot;,&quot;list-group-item&quot;);</code> Even   though you have other ul tag, there would not be any problem if you target it with the <code>id</code>"}], "answers": [{"tags": [], "owner": {"reputation": 6952, "user_id": 5644965, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J9KaA.jpg?s=128&g=1", "display_name": "Lemayzeur", "link": "https://stackoverflow.com/users/5644965/lemayzeur"}, "is_accepted": true, "score": 0, "last_activity_date": 1524103145, "creation_date": 1524103145, "answer_id": 49911546, "question_id": 49910402, "link": "https://stackoverflow.com/questions/49910402/how-can-i-set-attributes-to-li-tags-in-checkboxselectmultiple/49911546#49911546", "title": "How can I set attributes to li tags in CheckboxSelectMultiple?", "body": "<p>You can proceed that way</p>\n\n<p>Django provides a ul list for <code>MultipleChoiceField</code>. I give you an example since I do not have any clue of your codes</p>\n\n<p><strong>forms.py</strong></p>\n\n<pre><code>OPTIONS = (\n    (\"B\", \"Black\"),\n    (\"Y\", \"Yellow\"),\n    (\"R\", \"Red\"),\n)\ncolors = forms.MultipleChoiceField(widget=forms.CheckboxSelectMultiple,choices=OPTIONS)\n</code></pre>\n\n<p>send the form to the template through <code>your_view</code> </p>\n\n<p><strong>template.html</strong></p>\n\n<p>you would have called it like with <code>{{form.colors}}</code>. This way will let django generates its pre-built html, whereas you can loop through it:</p>\n\n<pre><code>&lt;ul&gt;\n{% for check in form.colors %}\n    &lt;li class='your class'&gt;{{check.tag}} &lt;!-- this is the checkbox input generated by django --&gt;\n    &lt;label for=\"{{check.id_for_label}}\"&gt;{{check.choice_label}}&lt;/label&gt;&lt;/li&gt;\n{% endfor %}\n&lt;/ul&gt;\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 9666876, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-0HY4zNGrVLY/AAAAAAAAAAI/AAAAAAAAAFc/2N3hPX3ILpU/photo.jpg?sz=128", "display_name": "MiakovA", "link": "https://stackoverflow.com/users/9666876/miakova"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 410, "favorite_count": 0, "accepted_answer_id": 49911546, "answer_count": 1, "score": 0, "last_activity_date": 1524103145, "creation_date": 1524093577, "last_edit_date": 1524094586, "question_id": 49910402, "link": "https://stackoverflow.com/questions/49910402/how-can-i-set-attributes-to-li-tags-in-checkboxselectmultiple", "title": "How can I set attributes to li tags in CheckboxSelectMultiple?", "body": "<p>I used CheckboxSelectMultiple as a widget for MultipleChoiceField.\nI know it makes something like this: </p>\n\n<pre><code>&lt;ul&gt;\n  &lt;li&gt;&lt;input type=\"checkbox\" name=\"...\" &gt;&lt;/li&gt;\n  ...\n&lt;/ul&gt;\n</code></pre>\n\n<p>when I set an attribute to CheckboxSelectMultiple, django adds it to ul tag.\nmy question is, how can I set attributes to li?</p>\n"}, {"tags": ["python", "numpy", "matplotlib", "scikit-learn"], "comments": [{"owner": {"reputation": 523, "user_id": 668797, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SAyYU.jpg?s=128&g=1", "display_name": "BradMcDanel", "link": "https://stackoverflow.com/users/668797/bradmcdanel"}, "edited": false, "score": 0, "creation_date": 1524115269, "post_id": 49910393, "comment_id": 86842031, "body": "Looks like the words in the x-axis are sorted alphabetically. Are you sure you are sorting by the counts and not the words themselves?"}, {"owner": {"reputation": 907, "user_id": 4913143, "user_type": "registered", "accept_rate": 47, "profile_image": "https://graph.facebook.com/10206877151395113/picture?type=large", "display_name": "Rodrigo Laguna", "link": "https://stackoverflow.com/users/4913143/rodrigo-laguna"}, "reply_to_user": {"reputation": 523, "user_id": 668797, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SAyYU.jpg?s=128&g=1", "display_name": "BradMcDanel", "link": "https://stackoverflow.com/users/668797/bradmcdanel"}, "edited": false, "score": 0, "creation_date": 1524143575, "post_id": 49910393, "comment_id": 86859688, "body": "Yes, since I&#39;m using <code>np.argsort</code> in <code>count_words</code> and <code>count_words</code> is the result of summing in vectors (line  <code>count_words = np.array(np.sum(vectors, axis=0))</code> ) so <code>count_words</code> is a vector of occurrences of words"}], "owner": {"reputation": 907, "user_id": 4913143, "user_type": "registered", "accept_rate": 47, "profile_image": "https://graph.facebook.com/10206877151395113/picture?type=large", "display_name": "Rodrigo Laguna", "link": "https://stackoverflow.com/users/4913143/rodrigo-laguna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 178, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1524149978, "creation_date": 1524093486, "last_edit_date": 1524149978, "question_id": 49910393, "link": "https://stackoverflow.com/questions/49910393/count-word-occurrences-with-sklearn", "title": "count word occurrences with sklearn", "body": "<p>I'm trying to get the most frequent words, and in a future, bigrams, trigrams, etc, in my corpus. I found <a href=\"https://stackoverflow.com/questions/16288497/find-the-most-common-term-in-scikit-learn-classifier?utm_medium=organic&amp;utm_source=google_rich_qa&amp;utm_campaign=google_rich_qa\">this quiestion</a> but it didn't work for me, and I want to avoid using zip since I want it in a more efficient way.</p>\n\n<p>Up to now I have this code:</p>\n\n<pre><code>vectorizer_words = CountVectorizer(input=u'content',\n                         analyzer=u'word',\n                         lowercase=True,\n                         stop_words=cached_stopwords,\n                         strip_accents=u'unicode',\n                         ngram_range=(1, 1), binary=False)\n\nvectors = vectorizer_words.fit_transform(X, y)\n\n\nN, V = vectors.shape\n\ncount_words = np.array(np.sum(vectors, axis=0))\ncount_words = np.squeeze(count_words)\n\nassert count_words.shape == (V,), \"count_words.shape = {}\".format(count_words.shape)\nwords = np.array(vectorizer_words.get_feature_names())\nassert words.shape[0] == V\n\na = count_words.argsort()[::-1]\n\nprint(words[a][:10])\nprint(count_words[a][:10])\n\nplt.bar(words[a][:10], count_words[a][:10])\nplt.title('title')\nplt.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/6JsY3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6JsY3.png\" alt=\"shouldn&#39;t bars be descending? (image updated)\"></a></p>\n\n<p>I was expecting my graph to be descending but it does not, and I can't understand why. I'm doing something wrong (what?) or I'm misunderstanding the output?</p>\n\n<p><strong>EDIT</strong>\nThe problem seem to be in the <code>plt.bar</code>: looking more carefully at the output of the following lines:</p>\n\n<pre><code>print(words[a][:10])\nprint(count_words[a][:10])\n# Output:\n['atencion' 'bien' 'mas' 'banco' 'buena' 'siempre' 'problemas' 'problema' 'tarjeta' 'rapido']\n[10442  7594  6322  6121  5382  4953  4316  4202  4041  3097]\n</code></pre>\n\n<p>So count_words[a] is sorted as expected, but the plot is in alphabetical order (as suggested in comments, thanks!), so the problem probably is in the plot</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 8884, "user_id": 8372104, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/72UbV.png?s=128&g=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/8372104/simon"}, "edited": false, "score": 2, "creation_date": 1524093395, "post_id": 49910369, "comment_id": 86836608, "body": "Could we have what comes after the with statement?"}, {"owner": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "edited": false, "score": 1, "creation_date": 1524093396, "post_id": 49910369, "comment_id": 86836609, "body": "So, is there any code after the <code>with</code> statement...? <i>Indented</i> code?"}, {"owner": {"reputation": 2599, "user_id": 2730399, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/55f1223c407a8d06c677fec00c1ed32e?s=128&d=identicon&r=PG", "display_name": "Azsgy", "link": "https://stackoverflow.com/users/2730399/azsgy"}, "edited": false, "score": 1, "creation_date": 1524093404, "post_id": 49910369, "comment_id": 86836613, "body": "can&#39;t reproduce. Please post the full code required to produce the error."}], "answers": [{"tags": [], "owner": {"reputation": 7430, "user_id": 3474956, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/RWbuy.jpg?s=128&g=1", "display_name": "kilojoules", "link": "https://stackoverflow.com/users/3474956/kilojoules"}, "is_accepted": true, "score": 1, "last_activity_date": 1524093613, "creation_date": 1524093613, "answer_id": 49910410, "question_id": 49910369, "link": "https://stackoverflow.com/questions/49910369/getting-a-syntaxerror-when-trying-out-with-in-python3-6/49910410#49910410", "title": "Getting a SyntaxError when trying out &quot;with&quot; in Python3.6", "body": "<p>Alls you need to do is do something after the colon. Finish the thought.</p>\n\n<pre><code>$ python -c \"with open ('myfile.txt') as my_new_file:\"\n  File \"&lt;string&gt;\", line 1\n    with open ('myfile.txt') as my_new_file:\n                                           ^\nSyntaxError: unexpected EOF while parsing\n\n\n$ python -c \"with open ('myfile.txt') as my_new_file: print(my_new_file.readlines())\"\n['hey\\n', 'you\\n']\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8884, "user_id": 8372104, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/72UbV.png?s=128&g=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/8372104/simon"}, "is_accepted": false, "score": 1, "last_activity_date": 1524094056, "last_edit_date": 1524094056, "creation_date": 1524093636, "answer_id": 49910412, "question_id": 49910369, "link": "https://stackoverflow.com/questions/49910369/getting-a-syntaxerror-when-trying-out-with-in-python3-6/49910412#49910412", "title": "Getting a SyntaxError when trying out &quot;with&quot; in Python3.6", "body": "<p>An EOF error is an unexpected <strong>End Of File</strong> error where, the Python interpreter was expecting something part of the <code>with</code> statement on the next line. </p>\n\n<p>For example:</p>\n\n<pre><code>with open ('myfile.txt') as my_new_file:\n    my_new_file.read()\n</code></pre>\n\n<p>is valid.  Since the with statement has something in it, whereas:</p>\n\n<pre><code>with open ('myfile.txt') as my_new_file:\nmy_new_file.read()\n</code></pre>\n\n<p>Will return an error since there is nothing part of the <code>with</code>, when there should be at least one function in order to use the flow control.</p>\n\n<p>If you have nothing to do then you should call <code>pass</code>.  This has nothing to do with the file you want to read.  Exactly the same effect can be made by using any statement that requires an indent, without the indent:</p>\n\n<pre><code>for i in range(100):\nprint('Hello')\n</code></pre>\n"}], "owner": {"reputation": 147, "user_id": 9666882, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gNxFR.png?s=128&g=1", "display_name": "Anonymouse", "link": "https://stackoverflow.com/users/9666882/anonymouse"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "accepted_answer_id": 49910410, "answer_count": 2, "score": 1, "last_activity_date": 1524094056, "creation_date": 1524093279, "question_id": 49910369, "link": "https://stackoverflow.com/questions/49910369/getting-a-syntaxerror-when-trying-out-with-in-python3-6", "title": "Getting a SyntaxError when trying out &quot;with&quot; in Python3.6", "body": "<p>When attempting to open an existing text file (myfile.txt) with \"with\":</p>\n\n<pre><code>with open ('myfile.txt') as my_new_file:\n</code></pre>\n\n<p>I get the following error:</p>\n\n<pre><code>File \"&lt;ipython-input-263-06288b4ea914&gt;\", line 1\nwith open ('myfile.txt') as my_new_file:\n                                        ^\nSyntaxError: unexpected EOF while parsing\n</code></pre>\n\n<p>However, I am able to open the file using \"open\":</p>\n\n<pre><code>myfile = open('myfile.txt') \n\nmyfile.read()\n\n'Hello, This is a text file\\nThis is the second line\\nThis is the third line'\n</code></pre>\n\n<p>Can someone point out what it is that I am doing wrong? Thanks!</p>\n"}, {"tags": ["python", "initialization"], "answers": [{"tags": [], "owner": {"reputation": 1890, "user_id": 1977018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/roRTA.png?s=128&g=1", "display_name": "raul.vila", "link": "https://stackoverflow.com/users/1977018/raul-vila"}, "is_accepted": false, "score": 0, "last_activity_date": 1524093691, "last_edit_date": 1524093691, "creation_date": 1524092928, "answer_id": 49910324, "question_id": 49910297, "link": "https://stackoverflow.com/questions/49910297/init-is-missing-1-required-positional-argument/49910324#49910324", "title": "__init__() is missing 1 required positional argument", "body": "<p>When you create an instance of a class yo need to provide the parameters (except for the <code>self</code>) of the <code>__init__</code> function:</p>\n\n<pre><code>class Blaster():\n    def __init__(self, Range, accuracy):\n        self.accuracy = accuracy\n        self.Range = Range\n\nblaster_range = 50\nblaster_accunary = 0.5\nblaster = Blaster(blaster_range, blaster_accunary)\n</code></pre>\n\n<p>Of course you can also do this, I used variables to make clear what's the meaning of the values.</p>\n\n<pre><code>blaster = Blaster(50, 0.5)\n</code></pre>\n\n<p>And for inheritance, you need to pass all the parameters all the way down like this (<a href=\"https://pyfiddle.io/fiddle/b3ee2049-096a-47da-bb9e-1783c6e46f4e\" rel=\"nofollow noreferrer\">See Pyfiddle</a>):</p>\n\n<pre><code>class Item():\n    def __init__(self, name, description, value):\n        self.name = name\n        self.description = description\n        self.value = value\n\nclass Weapon(Item):\n    def __init__(self, name, description, value, damage, speed):\n        self.damage = damage\n        self.speed = speed\n        Item.__init__(self, name, description, value)\n\nclass Blaster(Weapon):\n    def __init__(self, name, description, value, damage, speed, Range, accuracy):\n        self.accuracy = accuracy\n        self.Range = Range\n        Weapon.__init__(self, name, description, value, damage, speed)\n\nblaster = Blaster(\n    name=\"MyBlaster\",\n    description=\"A huge weapon\",\n    value=10,\n    damage=20,\n    speed=30,\n    Range=50,\n    accuracy=0.5\n)\nprint(blaster.name)\nprint(blaster.description)\nprint(blaster.value)\nprint(blaster.damage)\nprint(blaster.speed)\nprint(blaster.Range)\nprint(blaster.accuracy)\n</code></pre>\n\n<p>If all Blasters have a fixed (e.g.) damage and speed, then you can do this;</p>\n\n<pre><code>...\n\nclass Weapon(Item):\n    def __init__(self, name, description, value, damage, speed):\n        self.damage = damage\n        self.speed = speed\n        Item.__init__(self, name, description, value)\n\nclass Blaster(Weapon):\n    def __init__(self, name, description, value, Range, accuracy):\n        self.accuracy = accuracy\n        self.Range = Range\n\n        blasters_damage = 20\n        blasters_speed = 30\n        Weapon.__init__(self, name, description, value, blasters_damage , blasters_speed)\n\nblaster = Blaster(\n    name=\"MyBlaster\",\n    description=\"A huge weapon\",\n    value=10,\n    Range=50,\n    accuracy=0.5\n)\n\n...\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8733227, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c75a9c8d0607392402bdce78da3ab0d?s=128&d=identicon&r=PG&f=1", "display_name": "connera03", "link": "https://stackoverflow.com/users/8733227/connera03"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 357, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1524096515, "creation_date": 1524092709, "last_edit_date": 1524096515, "question_id": 49910297, "link": "https://stackoverflow.com/questions/49910297/init-is-missing-1-required-positional-argument", "title": "__init__() is missing 1 required positional argument", "body": "<pre><code>    class Blaster(Weapon):\n    def __init__(self, Range, accuracy):\n        self.accuracy = accuracy\n        self.Range = Range\n        super()\nblaster = Blaster(Weapon)\n</code></pre>\n\n<p>I am very new to Python and I'm making a game and using classes for the items. When I run this the error code is:</p>\n\n<pre><code>__init__() missing 1 required positional argument: 'accuracy'\n</code></pre>\n\n<p>I want to be able to use objects to hold information on different items, and for them to be printed out for the user.</p>\n\n<p>Superclasses:</p>\n\n<pre><code>class Item():\ndef __init__(self, name, description, value):\n    self.name = name\n    self.description = description\n    self.value = value\n\nclass Weapon(Item):\n    def __init__(self, damage, speed):\n        self.damage = damage\n        self.speed = speed\n        super()\n</code></pre>\n"}, {"tags": ["python", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 91, "user_id": 8572491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc4a3c584db8027926b8944e708b1a8?s=128&d=identicon&r=PG&f=1", "display_name": "jchan", "link": "https://stackoverflow.com/users/8572491/jchan"}, "is_accepted": false, "score": 0, "last_activity_date": 1572257884, "last_edit_date": 1572257884, "creation_date": 1524175159, "answer_id": 49930857, "question_id": 49910264, "link": "https://stackoverflow.com/questions/49910264/pandas-merge-asof-tolerance-must-be-integer/49930857#49930857", "title": "Pandas merge_asof tolerance must be integer", "body": "<p>For anyone else facing a similar problem, the column that the merge is performed on must be an integer.  In my case this meant having to change column A to an int.</p>\n\n<pre><code>df1['A Int'] = df1['A'].astype(int)\ndf2['A Int'] = df2['A'].astype(int)\n\nmerged = pd.merge_asof(df1, df2, on='A Int', direction='nearest', tolerance=1)\n</code></pre>\n"}], "owner": {"reputation": 91, "user_id": 8572491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc4a3c584db8027926b8944e708b1a8?s=128&d=identicon&r=PG&f=1", "display_name": "jchan", "link": "https://stackoverflow.com/users/8572491/jchan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1615, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1572257884, "creation_date": 1524092475, "question_id": 49910264, "link": "https://stackoverflow.com/questions/49910264/pandas-merge-asof-tolerance-must-be-integer", "title": "Pandas merge_asof tolerance must be integer", "body": "<p>I have searched around, but could not find the answer I was looking for.  I have two dataframes, one has fairly discrete integer values in column A (df2) the other does not (df1).  I would like to merge the two such that where column A is within 1, values in columns C and D would get merged once and NaN otherwise.  </p>\n\n<pre><code>df1=\n         A             B\n0      30.00      -52.382420\n1      33.14      -50.392513\n2      36.28      -53.699646\n3      39.42      -49.228439\n..      ...            ...\n497   1590.58     -77.646561\n498   1593.72     -77.049423\n499   1596.86     -77.711639\n500   1600.00     -78.092979\n\ndf2=\n         A             C           D\n0      0.009          NaN         NaN                     \n1      0.036          NaN         NaN\n2      0.100          NaN         NaN \n3     10.000         12.4        0.29 \n4     30.000         12.82       0.307 \n..       ...          ...         ...\n315   15000.000        NaN        7.65\n316   16000.000        NaN        7.72\n317   17000.000        NaN        8.36\n318   18000.000        NaN        8.35\n</code></pre>\n\n<p>I would like the output to be</p>\n\n<pre><code>merged=\n         A             B            C             D\n0      30.00      -52.382420      12.82         0.29\n1      33.14      -50.392513       NaN           NaN\n2      36.28      -53.699646       NaN           NaN\n3      39.42      -49.228439       NaN           NaN\n..       ...          ...          ...           ...\n497    1590.58    -77.646561       NaN           NaN\n498    1593.72    -77.049423       NaN           NaN\n499    1596.86    -77.711639       NaN           NaN\n500    1600.00    -78.092979      28.51          2.5\n</code></pre>\n\n<p>I tried:</p>\n\n<pre><code>merged = pd.merge_asof(df1, df2, left_on='A', tolerance=1, direction='nearest')\n</code></pre>\n\n<p>Which gives me a MergeError: key must be integer or timestamp.</p>\n\n<p>So far the only way I've been able to successfully merge the dataframes is with:</p>\n\n<pre><code>merged = pd.merge_asof(df1, df2, on='A')\n</code></pre>\n\n<p>But this takes whatever value was close enough in columns C and D and fills in the NaN values.</p>\n"}, {"tags": ["python", "networking"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 9666796, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-z5LcXPJk6H0/AAAAAAAAAAI/AAAAAAAAACI/bvl6DnUOb7k/photo.jpg?sz=128", "display_name": "Rawan AlSleebi", "link": "https://stackoverflow.com/users/9666796/rawan-alsleebi"}, "edited": false, "score": 0, "creation_date": 1524267526, "post_id": 49910379, "comment_id": 86918520, "body": "Thank you, I did not use the link you provided but I made a python program on my PC that includes both codes of the Server and the Client. Thus, making my PC as a Server (receives data) and a Client (sends/forwards Data)"}], "tags": [], "owner": {"reputation": 13134, "user_id": 9225671, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Y1fpFhWva_w/AAAAAAAAAAI/AAAAAAAAAC8/weHLi_-bFj8/photo.jpg?sz=128", "display_name": "Ralf", "link": "https://stackoverflow.com/users/9225671/ralf"}, "is_accepted": true, "score": 0, "last_activity_date": 1524093388, "creation_date": 1524093388, "answer_id": 49910379, "question_id": 49910238, "link": "https://stackoverflow.com/questions/49910238/sniffing-socket-communication-python/49910379#49910379", "title": "Sniffing Socket Communication - Python", "body": "<p>You could use your PC as a proxy.</p>\n\n<p>The client send its data to the proxy (which runs on your PC) and the proxy sends it to the server.\nLater the proxy receives the answer from the server and sends it back to the client.</p>\n\n<p>You could look into this proxy, <a href=\"https://github.com/rsc-dev/pyproxy\" rel=\"nofollow noreferrer\">pyproxy</a>, for example.</p>\n"}], "owner": {"reputation": 13, "user_id": 9666796, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-z5LcXPJk6H0/AAAAAAAAAAI/AAAAAAAAACI/bvl6DnUOb7k/photo.jpg?sz=128", "display_name": "Rawan AlSleebi", "link": "https://stackoverflow.com/users/9666796/rawan-alsleebi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 49910379, "answer_count": 1, "score": 1, "last_activity_date": 1524093388, "creation_date": 1524092339, "question_id": 49910238, "link": "https://stackoverflow.com/questions/49910238/sniffing-socket-communication-python", "title": "Sniffing Socket Communication - Python", "body": "<p>I'm using Socket communication to make two Raspberry Pi's communicate. And I'm using python. The program is very simple, because I'm trying to test the socket communication and how can two Pi's communicate. What I want is to capture the traffic (communication of the two Pi's) <strong>from my PC</strong>. The problem is that when I use Wireshark on my PC, I can't see the traffic generated from <code>s.send()</code> and <code>conn.sendall()</code> between the two Pi's, I'm still a student and not very advanced in Networking so I'm not sure if this problem is related to Raspberry Pi, Networking or Wireshark.</p>\n\n<p><strong>This is the code for the first Raspberry Pi (Server)</strong></p>\n\n<pre><code>import socket\n\nhost = ''\nport = 5560\n\nstoredValue = \"Yo, what's up?\"\n\ns = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\ns.bind((host, port))\ns.listen(1)\nconn, address = s.accept()\nprint(\"Connected to: \" + address[0] + \":\" + str(address[1]))\n\nwhile True:\n        data = conn.recv(1024) # receive the data\n        data = data.decode('utf-8')\n        dataMessage = data.split(' ', 1)\n        command = dataMessage[0]\n        reply = storedValue\n        s.close()\n        conn.sendall(str.encode(reply))\n\nconn.close()\n</code></pre>\n\n<p><strong>This is for the second Raspberry Pi (Client)</strong></p>\n\n<pre><code>import socket\n\nhost = '192.168.2.2'\nport = 5560\n\ns = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\ns.connect((host, port))\n\nwhile True:\n    command = input(\"Enter you command: \")\n    s.send(str.encode(command))\n    reply = s.recv(1024)\n    print(reply.decode('utf-8'))\ns.close()\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "mp4", "mp4box"], "comments": [{"owner": {"reputation": 431, "user_id": 8807968, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-n3JPOuspzRQ/AAAAAAAAAAI/AAAAAAAAAXI/Cdxxi3FWPkY/photo.jpg?sz=128", "display_name": "Rohan", "link": "https://stackoverflow.com/users/8807968/rohan"}, "edited": false, "score": 0, "creation_date": 1524095270, "post_id": 49910236, "comment_id": 86837090, "body": "What is your question, exactly?"}, {"owner": {"reputation": 67048, "user_id": 388787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f786b1ad349a30e02802ae61b4518fc?s=128&d=identicon&r=PG", "display_name": "Dan D.", "link": "https://stackoverflow.com/users/388787/dan-d"}, "edited": false, "score": 0, "creation_date": 1524101551, "post_id": 49910236, "comment_id": 86838616, "body": "The only thing that I call see is that <code>subprocess.call</code> waits until the command finishes but as the command is a video encoder that takes a while to finish and so in the meantime it blocks the GUI from updating. You need to use <code>subprocess.Popen</code> instead and poll for the processes exit in the GUI loop."}, {"owner": {"reputation": 111, "user_id": 6021417, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/secsN.png?s=128&g=1", "display_name": "Vyndicu", "link": "https://stackoverflow.com/users/6021417/vyndicu"}, "edited": false, "score": 0, "creation_date": 1524242473, "post_id": 49910236, "comment_id": 86908844, "body": "Updated to use Subprocess.popen instead. Still no luck."}], "owner": {"reputation": 111, "user_id": 6021417, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/secsN.png?s=128&g=1", "display_name": "Vyndicu", "link": "https://stackoverflow.com/users/6021417/vyndicu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1356, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1524242451, "creation_date": 1524092326, "last_edit_date": 1524242451, "question_id": 49910236, "link": "https://stackoverflow.com/questions/49910236/python-3-generating-mp4-files-via-mp4box", "title": "Python 3 generating MP4 files via MP4Box", "body": "<p>I overhauled my code to use popen and still not getting a new MP4 file.</p>\n\n<p>If I manually type it out in terminal MP4Box works. </p>\n\n<p>But when I run the code below it doesn't raise any error whatsoever. So I am puzzled as what is not working.</p>\n\n<p>The two definition are for tkinter GUI buttons.</p>\n\n<pre><code>global now\n\n#put widgets here\n\ndef picapture():\n    try:\n            global now\n            debugLog.insert(0.0, \"Date Initialization Done\\n\")\n            now = datetime.datetime.now().strftime(\"%F_%X\")\n            debugLog.insert(0.0, now + \"\\n\")\n            camera.start_preview(fullscreen=False,window = (200,0,1100,640))\n            camera.start_recording('/home/pi/' + now + '.h264')\n    except:\n            print(traceback.format_exc(limit=10))\n\ndef stopcapture():\n    try:\n            global now\n            camera.stop_recording()\n            camera.stop_preview()\n            MP4Box_Command = ['MP4Box', '-add', now + '.h264', '-0', now + '.mp4']\n            convert = subprocess.Popen(MP4Box_Command, stdout=PIPE, bufsize=1, universal_newlines=True)\n    except subprocess.CalledProcessError as e:\n            raise RunTimeError(\"Commmand '{}'return with error (code {}): {}\".format(e.cmd,e.returncode,e.output))\n    except:\n            print(traceback.format_exc(limit=10))\n</code></pre>\n"}, {"tags": ["python", "pandas", "matplotlib", "pyqt", "pyqt5"], "answers": [{"tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": true, "score": 2, "last_activity_date": 1524093128, "creation_date": 1524093128, "answer_id": 49910349, "question_id": 49910164, "link": "https://stackoverflow.com/questions/49910164/why-isnt-my-line-graph-showing-up-on-gui/49910349#49910349", "title": "Why isn&#39;t my line graph showing up on GUI", "body": "<p>If you want to draw on <code>PyQt</code> you must use <code>FigureCanvas</code>, not <code>matplotlib.pyplot</code>, so if you use <code>plt.plot()</code> you will not draw anything.</p>\n\n<p>In your case a similar example would be:</p>\n\n<pre><code>import sys\nimport pandas as pd\n\nimport matplotlib\nmatplotlib.use('Qt5Agg')\nfrom PyQt5 import QtCore, QtWidgets\nfrom matplotlib.backends.backend_qt5agg import FigureCanvasQTAgg as FigureCanvas\nfrom matplotlib.figure import Figure\n\nclass Widget(QtWidgets.QWidget):\n    def __init__(self, *args, **kwargs):\n        QtWidgets.QWidget.__init__(self, *args, **kwargs)\n        self.figure = Figure(figsize=(5, 4), dpi=100)\n        self.canvas = FigureCanvas(self.figure)\n        self.canvas.setSizePolicy(QtWidgets.QSizePolicy.Expanding, QtWidgets.QSizePolicy.Expanding)\n\n        button = QtWidgets.QPushButton(\"random plot\")\n        button.clicked.connect(self.plot)\n\n        lay = QtWidgets.QVBoxLayout(self)\n        lay.addWidget(self.canvas)\n        lay.addWidget(button)\n        self.plot()\n\n    def plot(self):\n        self.figure.clear()\n        ax = self.figure.add_subplot(111)\n        d = {'nkill': [1, 2, 4, 5, 6], 'iyear': [3, 4, 5, 5, 5]}\n        df = pd.DataFrame(data=d)\n        ax.plot('nkill', 'iyear', data=df)\n        # ax.axis('off')\n        self.canvas.draw()\n\nif __name__ == '__main__':\n    app = QtWidgets.QApplication(sys.argv)\n    w = Widget()\n    w.show()\n    sys.exit(app.exec_())\n</code></pre>\n"}], "owner": {"reputation": 148, "user_id": 6102659, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-14UWPSjBLSc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcu0010n8IL97XiLJfFmP2uNYbc5g/photo.jpg?sz=128", "display_name": "Shreyash Sharma", "link": "https://stackoverflow.com/users/6102659/shreyash-sharma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 49910349, "answer_count": 1, "score": 1, "last_activity_date": 1524111676, "creation_date": 1524091758, "last_edit_date": 1524111676, "question_id": 49910164, "link": "https://stackoverflow.com/questions/49910164/why-isnt-my-line-graph-showing-up-on-gui", "title": "Why isn&#39;t my line graph showing up on GUI", "body": "<p>This is a function which is being called on a button click. It is supposed to display a line graph why is it not showing up.</p>\n\n<pre><code>def plotk2(self):\n#----------------------------------------------------------------Data\n    temp=full_dataset[['country_txt','iyear','nkill']]\n    text = self.k_count.currentText()\n    temp = temp[temp['country_txt'].str.match(text)]\n    temp2=temp.groupby(['iyear'])['nkill'].count()\n    temp2=temp2.to_frame()\n    temp2['iyear']=temp2.index\n#----------------------------------------------------------------\n    self.figure.clear()\n\n    ax = self.figure.add_subplot(111)\n    plt.plot( 'nkill', 'iyear', data=temp2)\n    #ax.axis('off')\n\n\n    plt.show()\n\n    self.canvas.draw()\n</code></pre>\n"}, {"tags": ["python", "python-2.7", "asynchronous"], "answers": [{"tags": [], "owner": {"reputation": 1625, "user_id": 9129289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f8fea2e820b5fd246a78be208350b6c?s=128&d=identicon&r=PG&f=1", "display_name": "Glenn D.J.", "link": "https://stackoverflow.com/users/9129289/glenn-d-j"}, "is_accepted": true, "score": 2, "last_activity_date": 1524092521, "last_edit_date": 1524092521, "creation_date": 1524092188, "answer_id": 49910218, "question_id": 49910152, "link": "https://stackoverflow.com/questions/49910152/how-to-cancel-a-request-after-5-minutes-without-a-reply/49910218#49910218", "title": "How to cancel a request after 5 minutes without a reply", "body": "<p>It seems you just want a request to time out after a given time has passed without reply and move on to the next request. For this functionality there is a <code>timeout</code> parameter you can add to your request. The documentation on this: <a href=\"http://docs.python-requests.org/en/master/user/quickstart/#timeouts\" rel=\"nofollow noreferrer\">http://docs.python-requests.org/en/master/user/quickstart/#timeouts</a>.</p>\n\n<p>With a 300 seconds (5 minutes) timeout your code becomes:</p>\n\n<pre><code>requests.head(data['url'][i], timeout=300)\n</code></pre>\n\n<p>The asynchronous functionality you are mentioning has actually a different objective. It would allow your code to not have to wait the 5 minutes at all before continuing execution but I believe that would be a different question. </p>\n"}], "owner": {"reputation": 1755, "user_id": 5059335, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/b0ca397cbec3c1264f0f22c6cab4e280?s=128&d=identicon&r=PG&f=1", "display_name": "haimen", "link": "https://stackoverflow.com/users/5059335/haimen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 533, "favorite_count": 0, "accepted_answer_id": 49910218, "answer_count": 1, "score": 2, "last_activity_date": 1524096626, "creation_date": 1524091705, "last_edit_date": 1524096626, "question_id": 49910152, "link": "https://stackoverflow.com/questions/49910152/how-to-cancel-a-request-after-5-minutes-without-a-reply", "title": "How to cancel a request after 5 minutes without a reply", "body": "<p>I have the following function,</p>\n\n<pre><code>import requests\n\ndef get_url_type(data):\n    x = {}\n    for i in range(0,len(data)):\n        print i        \n        try:\n            x[i] = requests.head(data['url'][i]).headers.get('content-type')\n        except:\n            x[i] = 'Not Available'\n    return(x)\n</code></pre>\n\n<p>This function returns the URL type of each URL that is being passed to it and whenever there is no response, it throws error which is caught using exception. My problem here is, some of the requests take more than 5-10 mins time which is too much on production environment. I want the function to return \"Not Available\" when it takes more than 5 mins. When I did a research about it, it was mentioned to convert the function to asynchronous one. I have trying to change it without much success.</p>\n\n<p>The following is what I have tried,</p>\n\n<pre><code>import asyncio  \nimport time  \nfrom datetime import datetime\n\nasync def custom_sleep():  \n    print('SLEEP', datetime.now())\n    time.sleep(5)\n</code></pre>\n\n<p>My objective is, whenever the request function takes more than 5 mins, it should return \"Not available\" and move to the next iteration. </p>\n\n<p>Can anybody help me in doing this?</p>\n\n<p>Thanks in advance !</p>\n"}, {"tags": ["python", "django", "audio", "django-rest-framework", "mime-types"], "comments": [{"owner": {"reputation": 13134, "user_id": 9225671, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Y1fpFhWva_w/AAAAAAAAAAI/AAAAAAAAAC8/weHLi_-bFj8/photo.jpg?sz=128", "display_name": "Ralf", "link": "https://stackoverflow.com/users/9225671/ralf"}, "edited": false, "score": 0, "creation_date": 1524094849, "post_id": 49910137, "comment_id": 86836989, "body": "See <a href=\"https://stackoverflow.com/questions/43580/how-to-find-the-mime-type-of-a-file-in-python\">this post</a> for some suggestions."}, {"owner": {"reputation": 1746, "user_id": 3646845, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/quNcM.jpg?s=128&g=1", "display_name": "Paullo", "link": "https://stackoverflow.com/users/3646845/paullo"}, "reply_to_user": {"reputation": 13134, "user_id": 9225671, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Y1fpFhWva_w/AAAAAAAAAAI/AAAAAAAAAC8/weHLi_-bFj8/photo.jpg?sz=128", "display_name": "Ralf", "link": "https://stackoverflow.com/users/9225671/ralf"}, "edited": false, "score": 0, "creation_date": 1524097616, "post_id": 49910137, "comment_id": 86837644, "body": "Thanks @Ralf however that does not apply to my case. I that Mime Type is already known, in my case I Mime Type is unknown"}, {"owner": {"reputation": 13134, "user_id": 9225671, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Y1fpFhWva_w/AAAAAAAAAAI/AAAAAAAAAC8/weHLi_-bFj8/photo.jpg?sz=128", "display_name": "Ralf", "link": "https://stackoverflow.com/users/9225671/ralf"}, "edited": false, "score": 0, "creation_date": 1524097989, "post_id": 49910137, "comment_id": 86837732, "body": "I believe some external libraries mentioned in those answers, like <code>python-magic</code> for example, can be used to determine the file-type and mime-type of your uploaded files."}, {"owner": {"reputation": 255971, "user_id": 464744, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/3dfd6067f4c69986a652444f44bb6d7c?s=128&d=identicon&r=PG", "display_name": "Blender", "link": "https://stackoverflow.com/users/464744/blender"}, "edited": false, "score": 0, "creation_date": 1524100998, "post_id": 49910137, "comment_id": 86838480, "body": "What do you need the MIME type for? Are you trying to determine if the file contains valid audio data?"}, {"owner": {"reputation": 2372, "user_id": 1874596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rXGDk.png?s=128&g=1", "display_name": "Anup Yadav", "link": "https://stackoverflow.com/users/1874596/anup-yadav"}, "edited": false, "score": 0, "creation_date": 1524115319, "post_id": 49910137, "comment_id": 86842052, "body": "Duplicate of <a href=\"https://stackoverflow.com/questions/34287819/python-can-someone-guess-the-type-of-a-file-only-by-its-base64-encoding\" title=\"python can someone guess the type of a file only by its base64 encoding\">stackoverflow.com/questions/34287819/&hellip;</a>"}, {"owner": {"reputation": 1746, "user_id": 3646845, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/quNcM.jpg?s=128&g=1", "display_name": "Paullo", "link": "https://stackoverflow.com/users/3646845/paullo"}, "reply_to_user": {"reputation": 2372, "user_id": 1874596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rXGDk.png?s=128&g=1", "display_name": "Anup Yadav", "link": "https://stackoverflow.com/users/1874596/anup-yadav"}, "edited": false, "score": 0, "creation_date": 1524127824, "post_id": 49910137, "comment_id": 86848697, "body": "@AnupYadav there&#39;s big difference between Image &amp; Audio file processing. This question is for Base64 Audio file processing Not Image."}, {"owner": {"reputation": 1746, "user_id": 3646845, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/quNcM.jpg?s=128&g=1", "display_name": "Paullo", "link": "https://stackoverflow.com/users/3646845/paullo"}, "reply_to_user": {"reputation": 13134, "user_id": 9225671, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Y1fpFhWva_w/AAAAAAAAAAI/AAAAAAAAAC8/weHLi_-bFj8/photo.jpg?sz=128", "display_name": "Ralf", "link": "https://stackoverflow.com/users/9225671/ralf"}, "edited": false, "score": 0, "creation_date": 1524127828, "post_id": 49910137, "comment_id": 86848704, "body": "@Ralf it seems I am making headway with python-magic I will post my solution later"}, {"owner": {"reputation": 2372, "user_id": 1874596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rXGDk.png?s=128&g=1", "display_name": "Anup Yadav", "link": "https://stackoverflow.com/users/1874596/anup-yadav"}, "edited": false, "score": 0, "creation_date": 1524128957, "post_id": 49910137, "comment_id": 86849403, "body": "Please mention that in your question not in comments, second it really doesn&#39;t matter whether you use audio or image, that is applicable in either case."}, {"owner": {"reputation": 1746, "user_id": 3646845, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/quNcM.jpg?s=128&g=1", "display_name": "Paullo", "link": "https://stackoverflow.com/users/3646845/paullo"}, "reply_to_user": {"reputation": 2372, "user_id": 1874596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rXGDk.png?s=128&g=1", "display_name": "Anup Yadav", "link": "https://stackoverflow.com/users/1874596/anup-yadav"}, "edited": false, "score": 0, "creation_date": 1524130431, "post_id": 49910137, "comment_id": 86850478, "body": "@AnupYadav &quot;uploaded base64 audio&quot; is English phase that does NOT need any further interpretation for anyone that understands written English and knows what s/he is doing. Once again Image processing solution can never be same as Audio"}, {"owner": {"reputation": 2372, "user_id": 1874596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rXGDk.png?s=128&g=1", "display_name": "Anup Yadav", "link": "https://stackoverflow.com/users/1874596/anup-yadav"}, "edited": false, "score": 0, "creation_date": 1524130568, "post_id": 49910137, "comment_id": 86850591, "body": "Ok, May be type does matter."}], "answers": [{"tags": [], "owner": {"reputation": 1746, "user_id": 3646845, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/quNcM.jpg?s=128&g=1", "display_name": "Paullo", "link": "https://stackoverflow.com/users/3646845/paullo"}, "is_accepted": false, "score": 0, "last_activity_date": 1524146439, "creation_date": 1524146439, "answer_id": 49923048, "question_id": 49910137, "link": "https://stackoverflow.com/questions/49910137/determine-base64-uploaded-file-extension-and-mime-type/49923048#49923048", "title": "Determine base64 uploaded file extension and mime type", "body": "<p>I finally got this sorted with <a href=\"http://github.com/ahupp/python-magic\" rel=\"nofollow noreferrer\"><code>python-magic</code></a> thanks to @Ralf for the pointer</p>\n\n<pre><code>class AudioField(serializers.FileField):\n    def to_internal_value(self, data):\n        # Check to see if it's a base64 encoded file.\n        if isinstance(data, basestring):\n            # Strip out the data header if it exists.\n            data = re.sub(r\"^data\\:.+base64\\,(.+)$\", r\"\\1\", data)\n\n            try:\n                decoded = base64.b64decode(data)\n                mime_type = magic.from_buffer(decoded, mime=True)\n                file_ext = mimetypes.guess_extension(mime_type)\n\n            except TypeError:\n                raise serializers.ValidationError(_('Not a valid file'))\n\n            file_name = \"{}{}\".format(uuid.uuid4(), file_ext)\n\n            # Check if it's a valid file extension.\n            if file_ext[1:] not in settings.VOICE_VALID_FILE_EXTENSIONS:\n                raise serializers.ValidationError(_('Invalid file type.'))\n\n            # Update the data dict with new values.\n            data = ContentFile(decoded, name=file_name)\n\n            return super(AudioField, self).to_internal_value(data)\n</code></pre>\n\n<p>Required: <a href=\"http://github.com/ahupp/python-magic\" rel=\"nofollow noreferrer\"><code>pip install python-magic</code></a></p>\n"}], "owner": {"reputation": 1746, "user_id": 3646845, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/quNcM.jpg?s=128&g=1", "display_name": "Paullo", "link": "https://stackoverflow.com/users/3646845/paullo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1535, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1524146439, "creation_date": 1524091608, "last_edit_date": 1524109923, "question_id": 49910137, "link": "https://stackoverflow.com/questions/49910137/determine-base64-uploaded-file-extension-and-mime-type", "title": "Determine base64 uploaded file extension and mime type", "body": "<p>I have a <code>FileField</code> Serializer for uploaded base64 audio, I noticed that the Base64 string does not start with data:****. How do I determine the Mime Type of the uploaded file? i_need_the_file_extension_mimetype()</p>\n\n<pre><code>class AudioField(serializers.FileField):\n    def to_internal_value(self, data):\n        if isinstance(data, basestring):\n            data = re.sub(r\"^data\\:.+base64\\,(.+)$\", r\"\\1\", data)\n\n            # Try to base64 decode the data url.\n            try:\n                decoded = base64.b64decode(data)\n            except TypeError:\n                raise serializers.ValidationError(_('Not a valid file'))\n\n            file_name, file_ext, mime_type = self.i_need_the_file_extension_mimetype(decoded)\n\n\n            data = ContentFile(decoded, name=file_name)\n\n            return super(AudioField, self).to_internal_value(data)\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 1, "creation_date": 1524091703, "post_id": 49910112, "comment_id": 86836145, "body": "related:  <a href=\"https://stackoverflow.com/q/9802981/674039\">Avoid or delay evaluation of things which may not be used</a>"}, {"owner": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "edited": false, "score": 0, "creation_date": 1524091874, "post_id": 49910112, "comment_id": 86836184, "body": "What&#39;s the point of having a list of dicts where each dict only has a single key? This looks like you&#39;d do yourself a favor if you got rid of either the list or the dicts. Is there a reason why you can&#39;t use a structure like <code>{&#39;a&#39;: Class1(input_data), &#39;b&#39;: Class2(input_data), &#39;c&#39;: Class3(input_data)}</code>?"}, {"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1524092322, "post_id": 49910112, "comment_id": 86836305, "body": "Wait, are you sure you want a list of single-time dictionarties, not a multi-item dictionary?"}, {"owner": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "edited": false, "score": 0, "creation_date": 1524095580, "post_id": 49910112, "comment_id": 86837155, "body": "How exactly do you create the list? The code in your question cannot possible be anything like your real code. Surely you don&#39;t define separate classes for each item - and do you <i>really</i> pass the same input data to every one of them? Please show a much more realistic example."}, {"owner": {"reputation": 877, "user_id": 2049273, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/794735d9719e9edace9699928c9a45a0?s=128&d=identicon&r=PG", "display_name": "swigganicks", "link": "https://stackoverflow.com/users/2049273/swigganicks"}, "reply_to_user": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 1, "creation_date": 1524159478, "post_id": 49910112, "comment_id": 86870078, "body": "@DyZ I need it in a list because the existing code is accessing by index still and I can&#39;t touch that legacy code yet."}], "answers": [{"comments": [{"owner": {"reputation": 877, "user_id": 2049273, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/794735d9719e9edace9699928c9a45a0?s=128&d=identicon&r=PG", "display_name": "swigganicks", "link": "https://stackoverflow.com/users/2049273/swigganicks"}, "edited": false, "score": 0, "creation_date": 1524159391, "post_id": 49910170, "comment_id": 86870028, "body": "Awesome! This works with minimal modifications to the existing code. Ideally, I wouldn&#39;t have this setup with multiple classes with a list of dicts, but I&#39;m dealing with a lot of legacy code that I simply don&#39;t have the time to refactor."}], "tags": [], "owner": {"reputation": 11552, "user_id": 8112138, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f3b1ddf31abbf37d5fe71ad387e2772c?s=128&d=identicon&r=PG&f=1", "display_name": "Primusa", "link": "https://stackoverflow.com/users/8112138/primusa"}, "is_accepted": true, "score": 3, "last_activity_date": 1524091830, "creation_date": 1524091830, "answer_id": 49910170, "question_id": 49910112, "link": "https://stackoverflow.com/questions/49910112/preventing-a-dict-with-classes-as-values-from-instantiating-unless-needed/49910170#49910170", "title": "Preventing a dict with Classes as values from instantiating unless needed?", "body": "<p>I would just put the class and its input in a tuple:</p>\n\n<pre><code>input_data = {...}\nmy_list = [\n    {\"a\": (Class1, input_data)},\n    {\"b\": (Class2, input_data)},\n    {\"c\": (Class3, input_data)}\n]\n</code></pre>\n\n<p>Then when I want to instantiate:</p>\n\n<pre><code>tup = my_list[0][\"a\"]\ninstantiated_class = tup[0](tup[1])\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 877, "user_id": 2049273, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/794735d9719e9edace9699928c9a45a0?s=128&d=identicon&r=PG", "display_name": "swigganicks", "link": "https://stackoverflow.com/users/2049273/swigganicks"}, "edited": false, "score": 1, "creation_date": 1524159631, "post_id": 49910179, "comment_id": 86870156, "body": "I didn&#39;t know I could just list the constructors without having to initialize, so thanks for the info. I need it in a list because the legacy code that accesses it was doing so by index (when it was just a list of the current keys) and I can&#39;t change that code yet."}], "tags": [], "owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "is_accepted": false, "score": 1, "last_activity_date": 1524092940, "last_edit_date": 1524092940, "creation_date": 1524091906, "answer_id": 49910179, "question_id": 49910112, "link": "https://stackoverflow.com/questions/49910112/preventing-a-dict-with-classes-as-values-from-instantiating-unless-needed/49910179#49910179", "title": "Preventing a dict with Classes as values from instantiating unless needed?", "body": "<p>I feel that you are looking for a dictionary with multiple items, not a list of single-item dictionaries.</p>\n\n<p>You can initialize the dictionary with class constructors rather than class objects and create objects later:</p>\n\n<pre><code>input_data = {...}\nmy_dict = {\n    \"a\": Class1,\n    \"b\": Class2,\n    \"c\": Class3\n}\n\ndef get_item(d, key, data = input_data):\n    if isinstance(d[key], type): \n        d[key] = d[key](data)\n    return d[key]\n</code></pre>\n\n<p>Later:</p>\n\n<pre><code>get_item(my_dict, \"a\") # Returns a Class1 instance\n</code></pre>\n\n<p>Perhaps you can even derive a new \"smart\" dictionary from <code>dict</code> and redefine its <code>__getitem__</code> to instantiate objects when they are accessed for the first time.</p>\n"}, {"tags": [], "owner": {"reputation": 6589, "user_id": 4880003, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/37fa765e81d5152b1a83490cf5120d2d?s=128&d=identicon&r=PG&f=1", "display_name": "Nathan", "link": "https://stackoverflow.com/users/4880003/nathan"}, "is_accepted": false, "score": -2, "last_activity_date": 1524096282, "last_edit_date": 1524096282, "creation_date": 1524092265, "answer_id": 49910229, "question_id": 49910112, "link": "https://stackoverflow.com/questions/49910112/preventing-a-dict-with-classes-as-values-from-instantiating-unless-needed/49910229#49910229", "title": "Preventing a dict with Classes as values from instantiating unless needed?", "body": "<p>It sounds like you need a generator. A generator creates each element as needed when you're iterating over it (the downside is, you can't iterate over the generator again; once you've \"used\" an element, it's gone). <code>range</code> in Python is a (somewhat special) example of a generator. I'm not sure how you're going to pull out the single/few items you need from your list, though - will you just need the first few, or do you access them by index? Here's a generator example you could use if you're just going to use the first items from your list:</p>\n\n<pre><code>class C1:\n    def __init__(*args):\n        print(\"C1 init\")\n\nclass C2:\n    def __init__(*args):\n        print(\"C2 init\")\n\nclass C3:\n    def __init__(*args):\n        print(\"C3 init\")\n\nclasses = [C1, C2, C3]\nkeys = 'abc'\ndata = [3, 5]\ngen = ({keys[i]: classes[i](*data)} for i in range(len(keys)))\n\n# each time you want an element out:\nnew_dict = next(gen)\n</code></pre>\n\n<p>If you want to be able to get the items out by index instead, other answers will probably work better.</p>\n"}, {"tags": [], "owner": {"reputation": 5732, "user_id": 5496433, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/05803febf5f3ccac3dc093fba5fc30fb?s=128&d=identicon&r=PG&f=1", "display_name": "BallpointBen", "link": "https://stackoverflow.com/users/5496433/ballpointben"}, "is_accepted": false, "score": 0, "last_activity_date": 1524093136, "creation_date": 1524093136, "answer_id": 49910353, "question_id": 49910112, "link": "https://stackoverflow.com/questions/49910112/preventing-a-dict-with-classes-as-values-from-instantiating-unless-needed/49910353#49910353", "title": "Preventing a dict with Classes as values from instantiating unless needed?", "body": "<p>You can turn them into functions that return the desired object and which you only evaluate as needed.</p>\n\n<pre><code>my_list = [\n    {\"a\": lambda: Class1(input_data)},\n    {\"b\": lambda: Class2(input_data)},\n    {\"c\": lambda: Class3(input_data)}\n]\n\nc1 = my_list[0][\"a\"]()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "is_accepted": false, "score": 0, "last_activity_date": 1524094801, "creation_date": 1524094801, "answer_id": 49910572, "question_id": 49910112, "link": "https://stackoverflow.com/questions/49910112/preventing-a-dict-with-classes-as-values-from-instantiating-unless-needed/49910572#49910572", "title": "Preventing a dict with Classes as values from instantiating unless needed?", "body": "<p>You could subclass <code>dict</code> along the lines (bare minimum, you may have to override more methods for a smooth experience):</p>\n\n<pre><code>&gt;&gt;&gt; class delayed_dict(dict):\n...     def __init__(self, backstore):\n...         super().__init__()\n...         self._backstore=backstore\n...     def __getitem__(self, key):\n...         if not key in self:\n...             fun, *args = self._backstore[key]\n...             self[key] = fun(*args)\n...         return super().__getitem__(key)\n</code></pre>\n\n<p>Applied to your example:</p>\n\n<pre><code>&gt;&gt;&gt; input_data = (1, 2, 3)\n&gt;&gt;&gt; Class1 = list\n&gt;&gt;&gt; Class2 = tuple\n&gt;&gt;&gt; Class3 = dict.fromkeys\n&gt;&gt;&gt; \n&gt;&gt;&gt; my_list = [\n...     {\"a\": (Class1, input_data)},\n...     {\"b\": (Class2, input_data)},\n...     {\"c\": (Class3, input_data)}\n... ]\n&gt;&gt;&gt; \n&gt;&gt;&gt; lazy = list(map(delayed_dict, my_list))\n&gt;&gt;&gt; \n&gt;&gt;&gt; lazy\n[{}, {}, {}]\n&gt;&gt;&gt; \n&gt;&gt;&gt; x = lazy[1]['b']\n&gt;&gt;&gt; x is lazy[1]['b']\nTrue\n&gt;&gt;&gt; x\n(1, 2, 3)\n&gt;&gt;&gt; lazy\n[{}, {'b': (1, 2, 3)}, {}]\n</code></pre>\n"}], "owner": {"reputation": 877, "user_id": 2049273, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/794735d9719e9edace9699928c9a45a0?s=128&d=identicon&r=PG", "display_name": "swigganicks", "link": "https://stackoverflow.com/users/2049273/swigganicks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 1, "accepted_answer_id": 49910170, "answer_count": 5, "score": 1, "last_activity_date": 1524096282, "creation_date": 1524091453, "question_id": 49910112, "link": "https://stackoverflow.com/questions/49910112/preventing-a-dict-with-classes-as-values-from-instantiating-unless-needed", "title": "Preventing a dict with Classes as values from instantiating unless needed?", "body": "<p>I have a list of dicts that looks roughly like this: </p>\n\n<pre><code>input_data = {...}\nmy_list = [\n    {\"a\": Class1(input_data)},\n    {\"b\": Class2(input_data)},\n    {\"c\": Class3(input_data)}\n]\n</code></pre>\n\n<p>I want to be able to maintain a list like the one above but without all of the classes being instantiated until I need them. Sometimes I'll need to go through all of them, however most times I'll just need to access one of them. As it is now, they all get instantiated and make my runtime longer even if I'm only using one of dicts in the list. </p>\n\n<p>How can I prevent the classes from being instantiated until I need them? </p>\n"}, {"tags": ["python", "pyspark"], "answers": [{"tags": [], "owner": {"reputation": 32007, "user_id": 5858851, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yXFCX.jpg?s=128&g=1", "display_name": "pault", "link": "https://stackoverflow.com/users/5858851/pault"}, "is_accepted": false, "score": 1, "last_activity_date": 1524094795, "creation_date": 1524094795, "answer_id": 49910571, "question_id": 49910075, "link": "https://stackoverflow.com/questions/49910075/make-a-spark-rdd-from-tuples-list-and-use-groupbykey/49910571#49910571", "title": "make a spark rdd from tuples list and use groupByKey", "body": "\n\n<p>You are getting that error because your object is a <code>list</code> and not an <code>rdd</code>. Python lists do not have a <code>groupByKey()</code> method (as the error states).</p>\n\n<p>You can first convert your list to an <code>rdd</code> using <code>sc.parallelize</code>:</p>\n\n<pre class=\"lang-python prettyprint-override\"><code>myrdd = sc.parallelize(ls)\nnc = myrdd.groupByKey().collect()\nprint(nc)\n#[('c',['s', 'm', 'p']), ('h',['bi','vi']), ('n',['l', 'nc'])]\n</code></pre>\n\n<p>This returns a list of tuples where the first element is the key and the second element is a list of the values. If you wanted to flatten these tuples, you can use <code>itertools.chain.from_iterable</code>:</p>\n\n<pre class=\"lang-python prettyprint-override\"><code>from itertools import chain\nnc = [tuple(chain.from_iterable(v)) for v in nc]\nprint(nc)\n#[('c', 's', 'm', 'p'), ('h', 'bi', 'vi'), ('n', 'l', 'nc')]\n</code></pre>\n\n<p>However, you can avoid spark completely achieve the desired result using <code>itertools.groupby</code>:</p>\n\n<pre class=\"lang-python prettyprint-override\"><code>from itertools import groupby, chain\nls=[('c', 's'),('c', 'm'), ('c', 'p'), ('h', 'bi'), ('h', 'vi'), ('n', 'l'), ('n', 'nc')]\n\nnc = [\n    (key,) + tuple(chain.from_iterable(g[1:] for g in list(group)))\n    for key, group in groupby(ls, key=lambda x: x[0])\n]\nprint(nc)\n#[('c', 's', 'm', 'p'), ('h', 'bi', 'vi'), ('n', 'l', 'nc')]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 9667568, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Mayan Salama", "link": "https://stackoverflow.com/users/9667568/mayan-salama"}, "is_accepted": false, "score": 0, "last_activity_date": 1524113639, "creation_date": 1524113639, "answer_id": 49912970, "question_id": 49910075, "link": "https://stackoverflow.com/questions/49910075/make-a-spark-rdd-from-tuples-list-and-use-groupbykey/49912970#49912970", "title": "make a spark rdd from tuples list and use groupByKey", "body": "<p>As pault mentioned, the problem here is that Spark operates on specialised <em>parallelized</em> datasets, such as an RDD. To get the exact format you're after using groupByKey you'll need to do some funky stuff with lists:</p>\n\n<pre><code>ls = sc.parallelize(ls)\ntem=ls.groupByKey().map(lambda x: ([x[0]] + list(x[1]))).collect()\nprint(tem)\n#[['h', 'bi', 'vi'], ['c', 's', 'm', 'p'], ['n', 'l', 'nc']]\n</code></pre>\n\n<p>However, generally its best to avoid groupByKey as it can result in a large number of shuffles. This problem could also be solved with reduceByKey using:</p>\n\n<pre><code>ls=[('c', 's'),('c', 'm'), ('c', 'p'), ('h', 'bi'), ('h', 'vi'), ('n', 'l'), ('n', 'nc')]\nls = sc.parallelize(ls)\ntem=ls.map(lambda x: (x[0], [x[1]])).reduceByKey(lambda x,y: x + y).collect()\nprint(tem)\n</code></pre>\n\n<p>This will scale more effectively, but note that RDD operations can start to look a little cryptic when you need to manipulate list structure.</p>\n"}], "owner": {"reputation": 135, "user_id": 7115128, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18864beed0582f62bd658c65b69c44d2?s=128&d=identicon&r=PG&f=1", "display_name": "sara jones", "link": "https://stackoverflow.com/users/7115128/sara-jones"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1835, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1524113639, "creation_date": 1524091273, "last_edit_date": 1524094052, "question_id": 49910075, "link": "https://stackoverflow.com/questions/49910075/make-a-spark-rdd-from-tuples-list-and-use-groupbykey", "title": "make a spark rdd from tuples list and use groupByKey", "body": "<p>I have a list of tuples like below </p>\n\n<pre><code>ls=[('c', 's'),('c', 'm'), ('c', 'p'), ('h', 'bi'), ('h', 'vi'), ('n', 'l'), ('n', 'nc')]\n</code></pre>\n\n<p>I would like to use pyspark and groupByKey to produce: </p>\n\n<pre><code>nc=[['c','s', 'm', 'p'], ['h','bi','vi'], ['n','l', 'nc']\n</code></pre>\n\n<p>I dont know how to make a spark rdd and use groupByKey. </p>\n\n<p>I tried: </p>\n\n<pre><code>tem=ls.groupByKey()  \n</code></pre>\n\n<blockquote>\n  <p><code>'list' object has no attribute 'groupByKey'</code></p>\n</blockquote>\n"}, {"tags": ["python", "sql-server-2008", "sqlalchemy", "freetds"], "answers": [{"tags": [], "owner": {"reputation": 11187, "user_id": 1394697, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/658ae7ed330d8fc70df1c173960d27ad?s=128&d=identicon&r=PG", "display_name": "FlipperPA", "link": "https://stackoverflow.com/users/1394697/flipperpa"}, "is_accepted": false, "score": 1, "last_activity_date": 1524272026, "creation_date": 1524272026, "answer_id": 49951362, "question_id": 49910052, "link": "https://stackoverflow.com/questions/49910052/finding-varcharmax-and-ntext-are-incompatible-to-operator-when-comparison/49951362#49951362", "title": "Finding &quot;varchar(max) and ntext are incompatible = to operator&quot; when comparison string is long using SQLAlchemy/FreeTDS.", "body": "<p>If you want to avoid <code>CAST</code> statements in raw SQL and to stick to the ORM, you're going to have change the structure of your SQL Server columns. This is a restriction of SQL Server, nothing further down the stack.</p>\n\n<p>You can do one of two things.</p>\n\n<p>Change the <code>VARCHAR(MAX)</code> column to <code>NTEXT</code>:</p>\n\n<pre><code>ALTER TABLE table_name ALTER COLUMN varchar_column NTEXT;\n</code></pre>\n\n<p>or, change both columns to <code>NVARCHAR(MAX)</code>:</p>\n\n<pre><code>ALTER TABLE table_name ALTER COLUMN ntext_column NVARCHAR(MAX);\nALTER TABLE table_name ALTER COLUMN varchar_column NVARCHAR(MAX);\n</code></pre>\n\n<p>Before doing any of this, I'd read up on the side effects of either decision. However, I would suggest that in this case, dropping to raw SQL from the ORM is the best decision you could make. In my experience, ORMs work best when the source database is built by the ORM; trying to shoehorn an ORM on a database that wasn't designed with an ORM in mind always has compromises at best, and unintended consequences at worst.</p>\n\n<p>Good luck!</p>\n"}], "owner": {"reputation": 1697, "user_id": 5848524, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/hEc4a.png?s=128&g=1", "display_name": "Thornhale", "link": "https://stackoverflow.com/users/5848524/thornhale"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 947, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1524272026, "creation_date": 1524091144, "question_id": 49910052, "link": "https://stackoverflow.com/questions/49910052/finding-varcharmax-and-ntext-are-incompatible-to-operator-when-comparison", "title": "Finding &quot;varchar(max) and ntext are incompatible = to operator&quot; when comparison string is long using SQLAlchemy/FreeTDS.", "body": "<p>Before I state the problem, let me state the settings used surrounding this problem:</p>\n\n<pre><code>Compile-time settings (established with the \"configure\" script)\n                        Version: freetds v0.95.81\n         freetds.conf directory: /etc\n MS db-lib source compatibility: yes\n    Sybase binary compatibility: yes\n                  Thread safety: yes\n                  iconv library: yes\n                    TDS version: 4.2\n                          iODBC: no\n                       unixodbc: yes\n          SSPI \"trusted\" logins: no\n                       Kerberos: yes\n                        OpenSSL: no\n                         GnuTLS: yes\n</code></pre>\n\n<ul>\n<li>SQLAlchemy Version 1.1.13</li>\n<li>Connection to MS SQL Server 2008.</li>\n</ul>\n\n<p>Problem description:</p>\n\n<p>I have a table in the database that looks like this:</p>\n\n<pre><code>DNA Sequence\nid (int, primary key)\nNTSequence (varchar(max))\n</code></pre>\n\n<p>In the SQLAlchemy model the table gets represented like so:</p>\n\n<pre><code>class DNAPtsSeq(Base):\n    id = Column(\"DNAPartsSequenceID\", Integer, primary_key=True)\n    nt_seq = Column(\"NTSequence\", VARCHAR('max'))\n</code></pre>\n\n<p>I connect to the DB like so:</p>\n\n<pre><code>prod_eoi_engine = create_engine(\n\"mssql+pyodbc://someuser:somepw@somehost:1234/EOI?driver=FreeTDS\")\n</code></pre>\n\n<p>This is how I connect to the db:</p>\n\n<pre><code>def set_con(engine):\n    # Create a db session outside of the ORM that we can roll back\n    connection = engine.connect()\n    # bind db.session to that connection, and start a nested transaction\n    session = Session(bind=connection)\n    session.autoflush = True\n    return session\n</code></pre>\n\n<p>When I use the following SQLAlchemy query to query the database:</p>\n\n<pre><code>dna_pts_seq = db_s.query(DNAPtsSeq).filter(DNAPtsSeq.nt_seq ==\n                                           nt_seq).first()\n</code></pre>\n\n<p>I am encountering a problem under select circumstances.</p>\n\n<p>If nt_seq is longer than 2000 bp, I am getting the following error:</p>\n\n<pre><code>ProgrammingError}(pyodbc.ProgrammingError) ('42000', '[42000] [FreeTDS][SQL \nServer]The data types varchar(max) and ntext are incompatible in the equal \nto operator. (402) \n</code></pre>\n\n<p>If nt_seq is up to 2000 bp, everything is fine.</p>\n\n<p>I don't know why I am getting this error and need help to troubleshoot it. I have been trying to find solutions but have not found an answer so help would greatly be appreciated.</p>\n\n<p>The following threads do not provide answers even though the topic is similar:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/39055935/django-sqlserver-freetdssql-serverthe-data-types-nvarcharmax-and-ntext-are\">Django SQLServer [FreeTDS][SQL Server]The data types nvarchar(max) and ntext are incompatible in the equal to operator</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/1232142/oledb-comparison-problem-nvarchar-against-ntext-sqlserver-2005\">OLEDB comparison problem nvarchar against ntext (SQLServer 2005)</a></p>\n\n<p>Note: I am trying to not use direct SQL statements in python code, otherwise casting may have been a solution.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/15133094/the-data-types-text-and-varchar-are-incompatible-in-the-equal-to-operator\">The data types text and varchar are incompatible in the equal to operator</a></p>\n\n<p>Note: My database field is already declared as VARCHAR(MAX) and not text.</p>\n"}, {"tags": ["python", "unit-testing", "pytest", "python-unittest"], "answers": [{"tags": [], "owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "is_accepted": true, "score": 2, "last_activity_date": 1524091816, "creation_date": 1524091816, "answer_id": 49910169, "question_id": 49910035, "link": "https://stackoverflow.com/questions/49910035/clean-way-to-test-that-a-function-has-been-applied-to-each-item-of-a-collection/49910169#49910169", "title": "Clean way to test that a function has been applied to each item of a collection?", "body": "<p>You can assert that <code>some_other_function</code> was called on each element by mocking it with a mock that just calls the original function, e.g.:</p>\n\n<pre><code>import unittest\n\nfrom mock import patch, Mock, call\n\n\ndef some_other_function(x):\n    return 2 * x\n\n\ndef some_function_under_test(some_list_type_arg):\n    return map(some_other_function, some_list_type_arg)\n\n\nclass Tests(unittest.TestCase):\n    def test_thing(self):\n        with patch('__main__.some_other_function', Mock(side_effect=some_other_function)) as other_mock:\n            self.assertEqual(list(some_function_under_test([1, 2, 3])),\n                             [2, 4, 6])\n        self.assertEqual(other_mock.call_args_list,\n                         [call(1), call(2), call(3)])\n\n\nunittest.main()\n</code></pre>\n"}], "owner": {"reputation": 4353, "user_id": 3385534, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/3d838751adf50adef228a3b32b383575?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/3385534/bob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 49910169, "answer_count": 1, "score": -1, "last_activity_date": 1524169836, "creation_date": 1524091038, "last_edit_date": 1524169836, "question_id": 49910035, "link": "https://stackoverflow.com/questions/49910035/clean-way-to-test-that-a-function-has-been-applied-to-each-item-of-a-collection", "title": "Clean way to test that a function has been applied to each item of a collection?", "body": "<p>I want to test a function similar to the following:</p>\n\n<pre><code>def some_function_under_test(some_list_type_arg: List):\n    map(some_other_function, some_list_type_arg)\n</code></pre>\n\n<p>What is a good and clean way to unittest this?</p>\n\n<p>I am going to mock the <code>map</code> function</p>\n\n<pre><code>assert map_mock.called_once_with(...)\n</code></pre>\n\n<p>but what if the function will be written this way</p>\n\n<pre><code>for i in some_list_type_arg:\n    some_other_function(i)\n</code></pre>\n\n<p>How do I test this function independently from its implementation, i.e. not tying the test to the <code>map</code> function?</p>\n"}, {"tags": ["python", "css", "django", "background-image"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 8834421, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ia5iMHPCve8/AAAAAAAAAAI/AAAAAAAAANg/l6J5WqasBBY/photo.jpg?sz=128", "display_name": "Daniel Yanez", "link": "https://stackoverflow.com/users/8834421/daniel-yanez"}, "edited": false, "score": 0, "creation_date": 1524092416, "post_id": 49910082, "comment_id": 86836341, "body": "{% load static %} is there. I am able to load images through the HTML BUT not through the CSS file. How do I load it?  #home{         background-image:  url(&#39;store/img/store.jpg&#39;) no-repeat;  }    .....  this is not working"}, {"owner": {"reputation": 151, "user_id": 7343992, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c1c867c37205e7a9752e4ed08fe171a9?s=128&d=identicon&r=PG&f=1", "display_name": "Setti7", "link": "https://stackoverflow.com/users/7343992/setti7"}, "reply_to_user": {"reputation": 3, "user_id": 8834421, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ia5iMHPCve8/AAAAAAAAAAI/AAAAAAAAANg/l6J5WqasBBY/photo.jpg?sz=128", "display_name": "Daniel Yanez", "link": "https://stackoverflow.com/users/8834421/daniel-yanez"}, "edited": false, "score": 0, "creation_date": 1524092716, "post_id": 49910082, "comment_id": 86836428, "body": "I don&#39;t think it is possible through the CSS file, why not just do it in the HTML? Try <code>background:  {% static &quot;&#47;store&#47;img&#47;store.jpg&quot; %} no-repeat; </code>"}], "tags": [], "owner": {"reputation": 151, "user_id": 7343992, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c1c867c37205e7a9752e4ed08fe171a9?s=128&d=identicon&r=PG&f=1", "display_name": "Setti7", "link": "https://stackoverflow.com/users/7343992/setti7"}, "is_accepted": false, "score": 0, "last_activity_date": 1524091613, "last_edit_date": 1524091613, "creation_date": 1524091306, "answer_id": 49910082, "question_id": 49909996, "link": "https://stackoverflow.com/questions/49909996/django-background-img-css/49910082#49910082", "title": "Django Background Img CSS", "body": "<p>If you are using django's standard templating engine you need to load the static files before referencing them. Paste <code>{% load static %}</code> before <code>&lt;img class=\"top\" src={% static \"/store/img/store.jpg\" %}&gt;</code></p>\n\n<p>More help with static files here:\n<a href=\"https://docs.djangoproject.com/pt-br/2.0/howto/static-files/#configuring-static-files\" rel=\"nofollow noreferrer\">https://docs.djangoproject.com/pt-br/2.0/howto/static-files/#configuring-static-files</a></p>\n\n<p>Feel free to ask more questions to me if you want!</p>\n"}], "owner": {"reputation": 3, "user_id": 8834421, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ia5iMHPCve8/AAAAAAAAAAI/AAAAAAAAANg/l6J5WqasBBY/photo.jpg?sz=128", "display_name": "Daniel Yanez", "link": "https://stackoverflow.com/users/8834421/daniel-yanez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 176, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1524091613, "creation_date": 1524090809, "last_edit_date": 1524091110, "question_id": 49909996, "link": "https://stackoverflow.com/questions/49909996/django-background-img-css", "title": "Django Background Img CSS", "body": "<p>My background image is not loading though my CSS file. It loads through the front end with:  </p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;img class=\"top\" src={% static \"/store/img/store.jpg\" %}&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>inside of a div but not with: background:  url('{{ STATIC_URL }}/store/img/store.jpg'); on the css file.   </p>\n\n<p>My path is apps/store/static/store/img/store.jpg, so that's good.</p>\n\n<p>HTML:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;div class=\"w3-display-container w3-content w3-wide\" style=\"max-width:1600px;min-width:500px\" id=\"home\"&gt;\r\n  &lt;div class=\"w3-display-bottomleft w3-padding-large w3-opacity\"&gt;\r\n    &lt;h1&gt;SAN MIGUEL'S EXPORTA&lt;/h1&gt;\r\n  &lt;/div&gt;\r\n&lt;/div&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>CSS:</p>\n\n<pre><code>#home{\n    /* The image used */\nbackground:  url('{{ STATIC_URL }}/store/img/store.jpg') no-repeat;\n\n/* Full height */\nheight: 100%;\n\n/* Create the parallax scrolling effect */\nbackground-attachment: fixed;\nbackground-position: center;\nbackground-size: cover;\n</code></pre>\n\n<p>}</p>\n"}, {"tags": ["python", "python-3.x", "serialization", "cryptography"], "comments": [{"owner": {"reputation": 1488, "user_id": 1224068, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/b0QIa.jpg?s=128&g=1", "display_name": "WhiteHotLoveTiger", "link": "https://stackoverflow.com/users/1224068/whitehotlovetiger"}, "edited": false, "score": 0, "creation_date": 1531482388, "post_id": 49909957, "comment_id": 89623728, "body": "Did you ever get this working?"}, {"owner": {"reputation": 778, "user_id": 2594980, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1480914817/picture?type=large", "display_name": "Roopak A Nelliat", "link": "https://stackoverflow.com/users/2594980/roopak-a-nelliat"}, "edited": false, "score": 0, "creation_date": 1537249330, "post_id": 49909957, "comment_id": 91703463, "body": "Could you solve this? I am currently facing the issue."}, {"owner": {"reputation": 6992, "user_id": 495157, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/UFMPn.png?s=128&g=1", "display_name": "JGFMK", "link": "https://stackoverflow.com/users/495157/jgfmk"}, "edited": false, "score": 0, "creation_date": 1550832093, "post_id": 49909957, "comment_id": 96425300, "body": "Googling: &quot;Could not deserialize key data.&quot; top entry leads to <a href=\"https://github.com/jpadilla/pyjwt/issues/257\" rel=\"nofollow noreferrer\">github.com/jpadilla/pyjwt/issues/257</a> - now this part jumps out key in PEM format should be in the following format:... <b>newlines</b> are important. Perhaps your key is not it the correct format."}], "answers": [{"tags": [], "owner": {"reputation": 1181, "user_id": 3161120, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef04fc6d56e1d0d0cd4661afe041d69c?s=128&d=identicon&r=PG", "display_name": "gbajson", "link": "https://stackoverflow.com/users/3161120/gbajson"}, "is_accepted": false, "score": 0, "last_activity_date": 1568384624, "creation_date": 1568384624, "answer_id": 57925468, "question_id": 49909957, "link": "https://stackoverflow.com/questions/49909957/could-not-deserialize-key-data-with-python3/57925468#57925468", "title": "Could not deserialize key data with python3", "body": "<p>This seems to be invalid. I can't load it using <code>openssl</code>.\nIt contains spaces.</p>\n\n<p>Details:</p>\n\n<pre><code>$ cat pubkey.pem\n-----BEGIN PUBLIC KEY-----\nMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAxt/G jhPU1Pt 0q68jEu\n9aXUohWo46G38t6KV1WQBbGpn28Uz9JvthITARtSW Q/6Sc3MNQdjDyUrdL64Mmq\nPTWVVOS8wSB ZayiZq48isoPQh4TPtv3exFNMaI2/339laoVX3aFjF7zxcyKgTVk\ng4Dm2ny9iPIEN3BTGn3FxD9lz3LyxVUd2pAV29wdI06TdDs8xI1P1xp8/gDJxZH3\nUroRAGphXTnfxn Aq5lAMesGG6HnO0/e KBLGeKFEIkIaH31555yQ3uBptl 3c9m\nkTOeBzMlvxX0rAVsZAXC8k1xoD28glUXQvcewq DqmsUNAVOLfHFhaNP6Lztjjuz\nMQIDAQAB\n-----END PUBLIC KEY-----\n\n\n$ openssl pkey -inform PEM -pubin -in pubkey.pem -noout\nunable to load Public Key\n140571453707392:error:0D07209B:asn1 encoding routines:ASN1_get_object:too long:../crypto/asn1/asn1_lib.c:91:\n140571453707392:error:0D068066:asn1 encoding routines:asn1_check_tlen:bad object header:../crypto/asn1/tasn_dec.c:1118:\n140571453707392:error:0D07803A:asn1 encoding routines:asn1_item_embed_d2i:nested asn1 error:../crypto/asn1/tasn_dec.c:290:Type=X509_PUBKEY\n140571453707392:error:0906700D:PEM routines:PEM_ASN1_read_bio:ASN1 lib:../crypto/pem/pem_oth.c:33:\n</code></pre>\n"}], "owner": {"reputation": 95, "user_id": 7315192, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Yxj0Bjb3UMw/AAAAAAAAAAI/AAAAAAAAAFk/Pvq2_27vrVQ/photo.jpg?sz=128", "display_name": "jdtotow", "link": "https://stackoverflow.com/users/7315192/jdtotow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 4474, "favorite_count": 2, "answer_count": 1, "score": 8, "last_activity_date": 1604476895, "creation_date": 1524090615, "last_edit_date": 1604476895, "question_id": 49909957, "link": "https://stackoverflow.com/questions/49909957/could-not-deserialize-key-data-with-python3", "title": "Could not deserialize key data with python3", "body": "<p>I'm trying to send a public key to a server built with python and i'm getting the following error while calling <code>load_pem_public_key</code></p>\n<pre><code>key = serialization.load_pem_public_key(pem_data,backend=default_backend()) \n\nFile &quot;/usr/local/lib/python3.5/dist-packages/cryptography/hazmat/primitives/serialization.py&quot;, line 24, in load_pem_public_key\n     return backend.load_pem_public_key(data)\nFile &quot;/usr/local/lib/python3.5/dist-packages/cryptography/hazmat/backends/openssl/backend.py&quot;, line 1040, in load_pem_public_key\n     self._handle_key_loading_error()\nFile &quot;/usr/local/lib/python3.5/dist-packages/cryptography/hazmat/backends/openssl/backend.py&quot;, line 1291, in _handle_key_loading_error\n     raise ValueError(&quot;Could not deserialize key data.&quot;) ValueError: Could not deserialize key data.\n</code></pre>\n<p>and my function is like :</p>\n<pre><code>pem_data = request.args.get('public_key').encode()\nkey = serialization.load_pem_public_key(pem_data,backend=default_backend())\n</code></pre>\n<p><code>pem_data looks</code> like (PEM format)</p>\n<pre><code>-----BEGIN PUBLIC KEY-----\\nMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAxt/G jhPU1Pt 0q68jEu\\n9aXUohWo46G38t6KV1WQBbGpn28Uz9JvthITARtSW Q/6Sc3MNQdjDyUrdL64Mmq\\nPTWVVOS8wSB ZayiZq48isoPQh4TPtv3exFNMaI2/339laoVX3aFjF7zxcyKgTVk\\ng4Dm2ny9iPIEN3BTGn3FxD9lz3LyxVUd2pAV29wdI06TdDs8xI1P1xp8/gDJxZH3\\nUroRAGphXTnfxn Aq5lAMesGG6HnO0/e KBLGeKFEIkIaH31555yQ3uBptl 3c9m\\nkTOeBzMlvxX0rAVsZAXC8k1xoD28glUXQvcewq DqmsUNAVOLfHFhaNP6Lztjjuz\\nMQIDAQAB\\n-----END PUBLIC KEY-----\\n\n</code></pre>\n<p>Thank you for your help !</p>\n"}, {"tags": ["python", "gis", "valueerror"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 9666694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9a69e1fc7b734145f0e09bad8780907?s=128&d=identicon&r=PG&f=1", "display_name": "allieJ", "link": "https://stackoverflow.com/users/9666694/alliej"}, "edited": false, "score": 0, "creation_date": 1524091147, "post_id": 49910010, "comment_id": 86836004, "body": "Can&#39;t believe it was that simple! Thank you"}], "tags": [], "owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "is_accepted": false, "score": 1, "last_activity_date": 1524090884, "creation_date": 1524090884, "answer_id": 49910010, "question_id": 49909935, "link": "https://stackoverflow.com/questions/49909935/python-too-many-values-to-unpack-creating-bounding-box/49910010#49910010", "title": "Python- too many values to unpack (creating bounding box)", "body": "<p>Change:</p>\n\n<pre><code>state = [\"ARIZONA\", [coordList], 7016270]\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>state = [\"ARIZONA\", coordList, 7016270]\n</code></pre>\n\n<p><code>coordList</code> is already a list of <code>x, y</code> pairs, leave it like that.</p>\n"}], "owner": {"reputation": 1, "user_id": 9666694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9a69e1fc7b734145f0e09bad8780907?s=128&d=identicon&r=PG&f=1", "display_name": "allieJ", "link": "https://stackoverflow.com/users/9666694/alliej"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 230, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1524091176, "creation_date": 1524090457, "last_edit_date": 1524091176, "question_id": 49909935, "link": "https://stackoverflow.com/questions/49909935/python-too-many-values-to-unpack-creating-bounding-box", "title": "Python- too many values to unpack (creating bounding box)", "body": "<p>I'm attempting to generate a map of Arizona in python, intending to use the method setworldcoordinates() instead of transforming coordinates. I am writing a code to determine the bounding box by but am coming up with \n<code>ValueError: too many values to unpack</code> at the line containing <code>for x,y in state[POINTS]:</code></p>\n\n<p>I've pasted the whole code up to the for loop at the bottom that is yielding the error. For reference, the imported csv file contains 17 rows of data in 2 columns. I'm new to programming and am not sure what error I'm making or how to fix it. </p>\n\n<pre><code>#Importing modules \nimport csv\nimport turtle as t\n\n# Retrieve AZ map coordinates from a csv file\naz_coords = open('AZ_points_simple.csv', \"r\")   # open file\ncsvReader = csv.reader(az_coords)               # create reader object\nheader = csvReader.next()                       # gives back a list of each item in header\nlatIndex = header.index(\"Y\")                    # access column headers needed from file\nlonIndex = header.index(\"X\")\n\n# Make empty list for coordinates\ncoordList = []\n\n# loop through the lines in the file and get each coordinate \nfor row in csvReader:\n    lat = row[latIndex]             # Y coordinate\n    lon = row[lonIndex]             # X coordinate\n    coordList.append([lat,lon])\n\n# DATA MODEL\n# All cities will have a name, 1+ points, and population count\nNAME = 0\nPOINTS= 1\nPOP = 2\n\n# Create state layer \nstate = [\"ARIZONA\", [coordList], 7016270]\n\n# Cities layer list \n# city = [name, [points], population]\ncities = []\n\n# add Phoenix\ncities.append([\"PHOENIX\", [-112.09, 33.57], 1615017])\n# add Tucson\ncities.append([\"TUCSON\", [-110.87, 32.14], 530706])\n# add Flagstaff \ncities.append([\"FLAGSTAFF\", [-111.62, 35.19], 71459])\n\n# MAP SIZING \nmap_width = 400\nmap_height = 300\n\n# State bounding box \n# Use min/max functions to get bounding box \nminx = 180 \nmaxx = -180 \nminy = 90\nmaxy = -90\nfor x,y in state[POINTS]:\n    if x &lt; minx: \n        minx = x\n    elif x &gt; maxx: \n        maxx = x\n    if y &lt; miny:\n        miny = y \n    elif y &gt; maxy:\n        maxy = y`\n</code></pre>\n"}, {"tags": ["python", "python-2.7", "web-scraping", "beautifulsoup", "pyqt4"], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 8061569, "user_type": "registered", "profile_image": "https://graph.facebook.com/1705107973116356/picture?type=large", "display_name": "Eric Cai", "link": "https://stackoverflow.com/users/8061569/eric-cai"}, "edited": false, "score": 0, "creation_date": 1524111162, "post_id": 49909944, "comment_id": 86840855, "body": "Hi, thanks a lot for the answer and I get it! So the problem is not about the JS rendering right?"}], "tags": [], "owner": {"reputation": 1625, "user_id": 9129289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f8fea2e820b5fd246a78be208350b6c?s=128&d=identicon&r=PG&f=1", "display_name": "Glenn D.J.", "link": "https://stackoverflow.com/users/9129289/glenn-d-j"}, "is_accepted": true, "score": 0, "last_activity_date": 1524228246, "last_edit_date": 1524228246, "creation_date": 1524090517, "answer_id": 49909944, "question_id": 49909852, "link": "https://stackoverflow.com/questions/49909852/beautifulsoup-return-empty-value/49909944#49909944", "title": "beautifulsoup return empty value", "body": "<p>I quickly checked the referenced URL, and the reviews are only loaded via an asynchronous call after you click on the \"Ratings &amp; Review\" tab. So if you just load the page without any extra navigation, the reviews will not be present in the DOM (and thus not in the HTML that you are parsing with BeautifulSoup).</p>\n\n<p>So a solution is to simply trigger the click on the \"Ratings &amp; Review\" before you fetch the HTML and pass it to BeautifulSoup.</p>\n\n<p>Alternatively you can make that same asynchronous call to fetch the reviews yourself. The first page of the reviews is retrieved by performing a GET request to this page: <code>https://bedbathandbeyond.ugc.bazaarvoice.com/2009-en_us/1061083288/reviews.djs?format=embeddedhtml&amp;page=1&amp;scrollToTop=true</code>.</p>\n\n<p>You could easily construct this URL yourself for every product on bedbathandbeyond as you only need to have the product id (1061083288 in this case) which can be easily fetched from the original DOM using for instance the div with id <code>prodRatings</code>. It contains a hidden input field with the product id. This you can then simply replace in the URL from before and this would allow you to fetch all the reviews from all the products.</p>\n"}], "owner": {"reputation": 63, "user_id": 8061569, "user_type": "registered", "profile_image": "https://graph.facebook.com/1705107973116356/picture?type=large", "display_name": "Eric Cai", "link": "https://stackoverflow.com/users/8061569/eric-cai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 224, "favorite_count": 0, "accepted_answer_id": 49909944, "answer_count": 1, "score": 0, "last_activity_date": 1524228246, "creation_date": 1524089980, "question_id": 49909852, "link": "https://stackoverflow.com/questions/49909852/beautifulsoup-return-empty-value", "title": "beautifulsoup return empty value", "body": "<p>I'm using Jupyter Python 2.7\nI was trying to retrieve data from this website and everything went on well with using beautifulsoup and lxml parser to scrape description or price. </p>\n\n<p>site = '<a href=\"https://www.bedbathandbeyond.com/store/product/dyson-v7-motorhead-cord-free-stick-vacuum-in-fuchsia-steel/1061083288?brandId=162\" rel=\"nofollow noreferrer\">https://www.bedbathandbeyond.com/store/product/dyson-v7-motorhead-cord-free-stick-vacuum-in-fuchsia-steel/1061083288?brandId=162</a>'</p>\n\n<p>however, when I was trying to scrape comments or location of the reviewer, I could not retrieve anything back, only an empty list []</p>\n\n<p>I also tried PyQt4 to render it first yet it still didn't work. How should I fix it now?</p>\n\n<p>My code is attached below</p>\n\n<pre><code>import PyQt4\nfrom PyQt4.QtGui import *  \nfrom PyQt4.QtCore import *  \nfrom PyQt4.QtWebKit import * \nimport sys\nfrom lxml import html\nfrom bs4 import BeautifulSoup\nimport os\nimport requests\n\nsite = 'https://www.bedbathandbeyond.com/store/product/dyson-v7-motorhead-cord-free-stick-vacuum-in-fuchsia-steel/1061083288?brandId=162'\n\nclass Render(QWebPage):     \n    def __init__(self, url):\n        self.app = QApplication(sys.argv)  \n        QWebPage.__init__(self)  \n        self.loadFinished.connect(self._loadFinished)  \n        self.mainFrame().load(QUrl(url))  \n        self.app.exec_()   \n    def _loadFinished(self, result):  \n        self.frame = self.mainFrame()  \n        self.app.quit()\nr = Render(site)  \nresult = r.frame.toHtml()\nformatted_result = str(result.toAscii())\ntree = html.fromstring(formatted_result)\nsoup = BeautifulSoup(formatted_result,'lxml')\nsoup.find_all('span', class_ = 'BVRRValue BVRRUserLocation')#return value is []\n</code></pre>\n\n<p>Many thanks!</p>\n"}, {"tags": ["python", "regex"], "comments": [{"owner": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "edited": false, "score": 0, "creation_date": 1524090586, "post_id": 49909846, "comment_id": 86835838, "body": "Those are all domain names. What&#39;s your criteria for &quot;domain&quot; ?"}, {"owner": {"reputation": 804, "user_id": 7705353, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6200c325c24134a472bfdb69a94ce2e4?s=128&d=identicon&r=PG&f=1", "display_name": "SShah", "link": "https://stackoverflow.com/users/7705353/sshah"}, "edited": false, "score": 1, "creation_date": 1524090887, "post_id": 49909846, "comment_id": 86835944, "body": "Try this for the regex <code>www[\\w\\d-]*\\.</code>, Except for <code>wwwsco.com</code>, it should work for all the rest, as it should match everything after the first <code>.</code> if you use <code>re.sub</code>."}, {"owner": {"reputation": 298, "user_id": 2375593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10e580d0e851b67c4acfc15dbf988681?s=128&d=identicon&r=PG", "display_name": "Reid", "link": "https://stackoverflow.com/users/2375593/reid"}, "reply_to_user": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "edited": false, "score": 0, "creation_date": 1524091330, "post_id": 49909846, "comment_id": 86836047, "body": "@tdelaney thanks for correcting my language, sorry I&#39;m not sure what the right terminology is. By domain in this context I meant the main part of the url, without any www beforehand. Is there a specific name for that?"}], "answers": [{"comments": [{"owner": {"reputation": 298, "user_id": 2375593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10e580d0e851b67c4acfc15dbf988681?s=128&d=identicon&r=PG", "display_name": "Reid", "link": "https://stackoverflow.com/users/2375593/reid"}, "edited": false, "score": 0, "creation_date": 1524091369, "post_id": 49909918, "comment_id": 86836058, "body": "Thanks so much! I really appreciate the help."}], "tags": [], "owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "is_accepted": true, "score": 2, "last_activity_date": 1524090322, "creation_date": 1524090322, "answer_id": 49909918, "question_id": 49909846, "link": "https://stackoverflow.com/questions/49909846/stripping-urls-in-regex/49909918#49909918", "title": "Stripping URLs in regex", "body": "<pre><code>import re\n\ndef extract(domain):\n    return re.sub(r'^www[\\d-]*\\.?', '', domain)\n\nexamples = ['www2.chccs.k12.nc.us', 'wwwsco.com', 'www-152.aig.com', 'www.google.com']\nresult = [extract(d) for d in examples]\nassert result == ['chccs.k12.nc.us', 'sco.com', 'aig.com', 'google.com'], result\n</code></pre>\n"}], "owner": {"reputation": 298, "user_id": 2375593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10e580d0e851b67c4acfc15dbf988681?s=128&d=identicon&r=PG", "display_name": "Reid", "link": "https://stackoverflow.com/users/2375593/reid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 49909918, "answer_count": 1, "score": -1, "last_activity_date": 1524090557, "creation_date": 1524089938, "question_id": 49909846, "link": "https://stackoverflow.com/questions/49909846/stripping-urls-in-regex", "title": "Stripping URLs in regex", "body": "<p>I am trying to isolate the domain name for a database full of URLs, but I'm running into some regex problems. </p>\n\n<p>Starting example: </p>\n\n<pre><code>examples = ['www2.chccs.k12.nc.us', 'wwwsco.com', 'www-152.aig.com', 'www.google.com']\n</code></pre>\n\n<p>Desired goal:</p>\n\n<pre><code>['chccs.k12.nc.us', 'sco.com', 'aig.com', 'google.com']\n</code></pre>\n\n<p>I've been trying a two stage process where I add in a <em>\".\"</em> before <em>\"www\"</em>, then replace the <em>\"www.\"</em>, but that doesn't quite lead to the results I'd like. </p>\n\n<p>Any regex wizards out there able to help? </p>\n\n<p>Thanks in advance! </p>\n"}, {"tags": ["python", "machine-learning", "scikit-learn", "precision-recall"], "answers": [{"tags": [], "owner": {"reputation": 45172, "user_id": 4685471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/327dc718c142e3ea70e5db4b38050a36?s=128&d=identicon&r=PG", "display_name": "desertnaut", "link": "https://stackoverflow.com/users/4685471/desertnaut"}, "is_accepted": true, "score": 1, "last_activity_date": 1524094135, "last_edit_date": 1592644375, "creation_date": 1524091045, "answer_id": 49910039, "question_id": 49909841, "link": "https://stackoverflow.com/questions/49909841/scikit-learn-classification-report-precision-and-f-score-are-ill-defined-and-b/49910039#49910039", "title": "scikit-learn classification report - Precision and F-score are ill-defined and being set to 0.0", "body": "<p>It's not a matter of the classification report itself; reading closely, the warning in fact tells you that some of the classes are absent from your predictions (i.e. your classifier has predicted no samples as belonging to some classes).</p>\n<p>Adapting the example from the <a href=\"http://scikit-learn.org/stable/modules/model_evaluation.html#classification-report\" rel=\"nofollow noreferrer\">docs</a> helps demonstrating this:</p>\n<pre><code>from sklearn.metrics import classification_report\ny_true = [0, 1, 2, 2, 0]\ny_pred = [0, 0, 2, 2, 0] # no 1's predicted\ntarget_names = ['class 0', 'class 1', 'class 2']\n\nprint classification_report(y_true, y_pred, target_names=target_names)\n</code></pre>\n<p>Here is the result:</p>\n<pre><code>             precision    recall  f1-score   support\n\n    class 0       0.67      1.00      0.80         2\n    class 1       0.00      0.00      0.00         1\n    class 2       1.00      1.00      1.00         2\n\navg / total       0.67      0.80      0.72         5\n\n/home/ctsats/.local/lib/python2.7/site-packages/sklearn/metrics/classification.py:1135: \nUndefinedMetricWarning: Precision and F-score are ill-defined and being set to 0.0 in labels with no predicted samples.\n  \n</code></pre>\n<p>So, the issue is with your classifier and/or training data...</p>\n<p><strong>UPDATE</strong> (after comments): By <em>definition</em>, only the macro-average gives an F1 score <em>for each class (label)</em>; from the <a href=\"http://scikit-learn.org/stable/modules/generated/sklearn.metrics.f1_score.html#sklearn.metrics.f1_score\" rel=\"nofollow noreferrer\">docs</a>:</p>\n<blockquote>\n<p><strong>'micro'</strong>:</p>\n<p>Calculate metrics globally by counting the total true positives, false negatives and false positives.</p>\n<p><strong>'macro'</strong>:</p>\n<p>Calculate metrics for each label, and find their unweighted mean. This does not take label imbalance into account.</p>\n</blockquote>\n<p>This is the reason why in <code>classification_report</code> the F1 score reported is via macro-average. It is true that using micro-average you don't get a warning (since it counts the <em>total</em> true positives, hence it doesn't care if some classes are not represented in the predictions), but you don't get the F1 score <em>per class</em> either - you only get a single, overall number:</p>\n<pre><code>f1_score(y_true, y_pred, average='micro')\n# 0.8000000000000002\n</code></pre>\n<p>which cannot be used in the <code>classification_report</code>, where all reported metrics are per class.</p>\n"}], "owner": {"reputation": 61, "user_id": 9655851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd7b8b749fee4a550f7f784fda8c30e4?s=128&d=identicon&r=PG&f=1", "display_name": "selubamih", "link": "https://stackoverflow.com/users/9655851/selubamih"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3088, "favorite_count": 0, "accepted_answer_id": 49910039, "answer_count": 1, "score": 1, "last_activity_date": 1537646225, "creation_date": 1524089902, "last_edit_date": 1524091496, "question_id": 49909841, "link": "https://stackoverflow.com/questions/49909841/scikit-learn-classification-report-precision-and-f-score-are-ill-defined-and-b", "title": "scikit-learn classification report - Precision and F-score are ill-defined and being set to 0.0", "body": "<p>I am using scikit-learn to compute classification record, when I try to print it, it gives a warning :</p>\n\n<pre><code>print classification_report(original,predicted)\n</code></pre>\n\n<p><b>Warning:</b><br></p>\n\n<pre><code>Precision and F-score are ill-defined and being set to 0.0 in labels with no predicted samples.\n</code></pre>\n\n<p>So I want to report precision and recall via micro averaging. How can I use classification report so that it results in not ill-defined precision and recall ? Thanks in advance.</p>\n"}, {"tags": ["python", "python-3.x", "list"], "comments": [{"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1524089887, "post_id": 49909792, "comment_id": 86835597, "body": "You are correct in that <code>var([])</code> throws <b>an</b> error, but not for the reason you think: <code>NameError: name &#39;var&#39; is not defined</code>. What you probably meant: <code>vars([])</code> throws <code>TypeError: vars() argument must have __dict__ attribute</code>. Also, never say you got <b>an</b> error without saying which one."}], "answers": [{"tags": [], "owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "is_accepted": true, "score": 5, "last_activity_date": 1524089897, "creation_date": 1524089897, "answer_id": 49909839, "question_id": 49909792, "link": "https://stackoverflow.com/questions/49909792/where-are-the-elements-in-a-python-list-stored/49909839#49909839", "title": "Where are the elements in a python list stored?", "body": "<p>In your typical Python distribution (known as CPython), built-in types like lists are implemented in C, not Python. After all, it can't be Python all the way down! This means that the inner workings are hidden, and no attributes will reveal them.</p>\n\n<p>On a similar note, you will find that <code>inspect.getsource([].__getitem__)</code> doesn't work.</p>\n"}], "owner": {"reputation": 11552, "user_id": 8112138, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f3b1ddf31abbf37d5fe71ad387e2772c?s=128&d=identicon&r=PG&f=1", "display_name": "Primusa", "link": "https://stackoverflow.com/users/8112138/primusa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 49909839, "answer_count": 1, "score": 1, "last_activity_date": 1524089897, "creation_date": 1524089648, "last_edit_date": 1524089827, "question_id": 49909792, "link": "https://stackoverflow.com/questions/49909792/where-are-the-elements-in-a-python-list-stored", "title": "Where are the elements in a python list stored?", "body": "<p>Take this example object:</p>\n\n<pre><code>class myObj:\n\n    def __init__(self):\n        self.a = 1\n        self.b = 2\n        self.c = 3\na = myObj()\n</code></pre>\n\n<p>I can use <code>vars(a)</code> and I'll get <code>{'a': 1, 'b': 2, 'c': 3}</code> or <code>dir(a)</code> to get a list of the attributes plus all the functions in a. I can see everything that is stored within <code>a</code>. </p>\n\n<p>However, with a list its a different story. <code>var([])</code> throws an error and <code>dir([1, 2, 3])</code> only lists the functions that are implemented in list. Where does <code>__getitem__</code> get the items in the list from?</p>\n"}, {"tags": ["python", "python-3.x", "text", "passwords"], "comments": [{"owner": {"reputation": 804, "user_id": 7705353, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6200c325c24134a472bfdb69a94ce2e4?s=128&d=identicon&r=PG&f=1", "display_name": "SShah", "link": "https://stackoverflow.com/users/7705353/sshah"}, "edited": false, "score": 0, "creation_date": 1524090023, "post_id": 49909783, "comment_id": 86835642, "body": "add the file open, write and close statements inside the for loop to make it work"}], "answers": [{"tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": true, "score": 2, "last_activity_date": 1524090153, "last_edit_date": 1524090153, "creation_date": 1524089772, "answer_id": 49909818, "question_id": 49909783, "link": "https://stackoverflow.com/questions/49909783/how-to-write-more-than-one-variable-in-a-text-file-python/49909818#49909818", "title": "How to write more than one variable in a text file - Python?", "body": "<p>You get only one password because that's what you told it to do: generate and print out all the passwords.  Once they're all generated, <em>then</em> you write only one password to the file.</p>\n\n<p>You need to pull that print statement into your loop:</p>\n\n<pre><code>f = open(\"PasswordList.txt\",\"w+\")\n\nfor p in range(PasswordNumber):\n    Password = \"\"\n    for i in range(Length):\n        Password += random.choice(Characters)\n    print(Password)\n\n    f.write(Password + \"\\n\")\n\nf.close()\n</code></pre>\n\n<p>To get the same format, simply add a newline to each <code>write</code>, or use the <code>writeln</code> method.</p>\n\n<p>Sample output, with 10 passwords of length 8:</p>\n\n<pre><code>w@wz+]S2\n8t=G#r,F\nH$aITs0&amp;\n=dMbird6\nY)Dpu]EZ\nK\\ZDNI*M\nL6(2L_7_\nVJL3GxF$\n.nRt!XIa\n=OXP8=aC\n</code></pre>\n"}], "owner": {"reputation": 59, "user_id": 9666716, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-LDDCZ5KR7ts/AAAAAAAAAAI/AAAAAAAAAAo/P4u0J4OSx20/photo.jpg?sz=128", "display_name": "Mario Agolli", "link": "https://stackoverflow.com/users/9666716/mario-agolli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 353, "favorite_count": 0, "accepted_answer_id": 49909818, "answer_count": 1, "score": 2, "last_activity_date": 1524110476, "creation_date": 1524089600, "last_edit_date": 1524110476, "question_id": 49909783, "link": "https://stackoverflow.com/questions/49909783/how-to-write-more-than-one-variable-in-a-text-file-python", "title": "How to write more than one variable in a text file - Python?", "body": "<p>I am trying to create a Password Generator. The program is supposed to generate a List of random passwords and then write them to a <code>.txt</code> file. With the code below, the program is only writing the last password generated, rather than all of them.</p>\n\n<pre><code>#!/usr/bin/python3\nimport random\n\n#The Characters List\nCharacters = \"abcdefghijklmnopqrstuvwxyz!@#$%^&amp;*()_+-=[];'\\,./ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890\"\n\n#Password Generator\n\n#Get the Input form the User\nLength = input(\"Password Length &gt; \")\nLength = int(Length)\n\n#Get the Input form the User\nPasswordNumber = input(\"Number of Passwords &gt; \")\nPasswordNumber = int(PasswordNumber)\n\nfor p in range(PasswordNumber):\n    Password = \"\"\n    for i in range(Length):\n        Password += random.choice(Characters)\n    print(Password)\n\nf= open(\"PasswordList.txt\",\"w+\")\nf.write(Password)\nf.close()\n</code></pre>\n\n<p>My results:</p>\n\n<pre><code>Password Length &gt; 10\nNumber of Passwords &gt; 5\nLgoQ$i%e_O\n![i/NxsqQr\nn-ydWA/9.5\nksI,jg]#8q\n![xrU#=2@#\n</code></pre>\n\n<p>But when I open the \"PasswordList.txt\" the text that is inside is only: <code>![xrU#=2@#</code>, the last password it generated. \nAlso I want the passwords to have the same format as seen on the terminal: </p>\n\n<pre><code>LgoQ$i%e_O\n![i/NxsqQr\nn-ydWA/9.5\nksI,jg]#8q\n![xrU#=2@#\n</code></pre>\n\n<p>and not like this: </p>\n\n<pre><code>LgoQ$i%e_O![i/NxsqQrn-ydWA/9.5ksI,jg]#8q![xrU#=2@#\n</code></pre>\n"}, {"tags": ["python", "numpy", "matrix", "numeric", "eigenvalue"], "comments": [{"owner": {"reputation": 2721, "user_id": 8767209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f22597b536b07b41525099a8c16e23ce?s=128&d=identicon&r=PG&f=1", "display_name": "MFisherKDX", "link": "https://stackoverflow.com/users/8767209/mfisherkdx"}, "edited": false, "score": 0, "creation_date": 1524089667, "post_id": 49909773, "comment_id": 86835523, "body": "how much precision are you expecting?"}, {"owner": {"reputation": 53, "user_id": 7096147, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9cef1ed79232f8ba5197333431d19c6?s=128&d=identicon&r=PG&f=1", "display_name": "ma13", "link": "https://stackoverflow.com/users/7096147/ma13"}, "reply_to_user": {"reputation": 2721, "user_id": 8767209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f22597b536b07b41525099a8c16e23ce?s=128&d=identicon&r=PG&f=1", "display_name": "MFisherKDX", "link": "https://stackoverflow.com/users/8767209/mfisherkdx"}, "edited": false, "score": 0, "creation_date": 1524089879, "post_id": 49909773, "comment_id": 86835595, "body": "I expect that the first value should be exactly 0.(as it was defined in theory)"}, {"owner": {"reputation": 5909, "user_id": 500207, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DsvTT.jpg?s=128&g=1", "display_name": "Ahmed Fasih", "link": "https://stackoverflow.com/users/500207/ahmed-fasih"}, "edited": false, "score": 1, "creation_date": 1524090184, "post_id": 49909773, "comment_id": 86835687, "body": "Yes it is connected to floating-point arithmetic. Read the <a href=\"https://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html\" rel=\"nofollow noreferrer\">What Every Computer Scientist Should Know About Floating-Point Arithmetic</a> paper, from 1991 and still crucial, before you hurt yourself."}, {"owner": {"reputation": 5909, "user_id": 500207, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DsvTT.jpg?s=128&g=1", "display_name": "Ahmed Fasih", "link": "https://stackoverflow.com/users/500207/ahmed-fasih"}, "edited": false, "score": 1, "creation_date": 1524090395, "post_id": 49909773, "comment_id": 86835769, "body": "Also study the documentation for <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.isclose.html\" rel=\"nofollow noreferrer\"><code>numpy.isclose</code></a> carefully. This function helps you decide if a value is close enough to 0 to be 0."}, {"owner": {"reputation": 961, "user_id": 6338725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef4feaacbcbd03edc4fb721854ad3f75?s=128&d=identicon&r=PG", "display_name": "Rodrigo de Azevedo", "link": "https://stackoverflow.com/users/6338725/rodrigo-de-azevedo"}, "edited": false, "score": 0, "creation_date": 1526536702, "post_id": 49909773, "comment_id": 87784128, "body": "How large is your Laplacian matrix?"}], "owner": {"reputation": 53, "user_id": 7096147, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9cef1ed79232f8ba5197333431d19c6?s=128&d=identicon&r=PG&f=1", "display_name": "ma13", "link": "https://stackoverflow.com/users/7096147/ma13"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 79, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1526539647, "creation_date": 1524089553, "last_edit_date": 1526539647, "question_id": 49909773, "link": "https://stackoverflow.com/questions/49909773/least-positive-eigenvalue-of-a-laplacian-matrix", "title": "Least positive eigenvalue of a Laplacian matrix", "body": "<p>To calculate the eigenvalues of a Laplacian matrix, I used the function <code>numpy.linalg.eig</code>. The least positive eigenvalue I obtained was <code>2.6645352591003757e-15</code>. What is wrong in the calculation? Is it related to floating point arithmetic? </p>\n"}, {"tags": ["python", "pandas", "dataframe", "scientific-notation"], "answers": [{"comments": [{"owner": {"reputation": 531, "user_id": 7933418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eec40b228d90adc86ec949347733d2e1?s=128&d=identicon&r=PG&f=1", "display_name": "iprof0214", "link": "https://stackoverflow.com/users/7933418/iprof0214"}, "edited": false, "score": 0, "creation_date": 1524091716, "post_id": 49910044, "comment_id": 86836148, "body": "yes, this works, when I just print df.Accountnumber it displays converted values. However, when I print df.Accountnumber.unique(), it still shows all values in exponential format."}, {"owner": {"reputation": 2049, "user_id": 1319128, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7834b5fcfeccfafc1216cd472bc80c7c?s=128&d=identicon&r=PG", "display_name": "user1319128", "link": "https://stackoverflow.com/users/1319128/user1319128"}, "reply_to_user": {"reputation": 531, "user_id": 7933418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eec40b228d90adc86ec949347733d2e1?s=128&d=identicon&r=PG&f=1", "display_name": "iprof0214", "link": "https://stackoverflow.com/users/7933418/iprof0214"}, "edited": false, "score": 1, "creation_date": 1524092152, "post_id": 49910044, "comment_id": 86836258, "body": "In this case, you need to change the data type of account number column , as proposed by @floydn ."}, {"owner": {"reputation": 4480, "user_id": 10232932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec8ac182af86808de7f193677348c87d?s=128&d=identicon&r=PG&f=1", "display_name": "PV8", "link": "https://stackoverflow.com/users/10232932/pv8"}, "edited": false, "score": 0, "creation_date": 1561368098, "post_id": 49910044, "comment_id": 100025961, "body": "you could also change the print format, this solution is better as the original datatype is still valid"}], "tags": [], "owner": {"reputation": 2049, "user_id": 1319128, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7834b5fcfeccfafc1216cd472bc80c7c?s=128&d=identicon&r=PG", "display_name": "user1319128", "link": "https://stackoverflow.com/users/1319128/user1319128"}, "is_accepted": false, "score": 12, "last_activity_date": 1524091125, "creation_date": 1524091125, "answer_id": 49910044, "question_id": 49909710, "link": "https://stackoverflow.com/questions/49909710/suppress-scientific-format-in-a-dataframe-column/49910044#49910044", "title": "Suppress Scientific Format in a Dataframe Column", "body": "<p>You don't need the thousand separators \",\" and the 3 decimals for the account numbers. </p>\n\n<p>Use the following instead. </p>\n\n<pre><code>pd.options.display.float_format = '{:.0f}'.format\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 791, "user_id": 5745815, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sxVE5.jpg?s=128&g=1", "display_name": "floydn", "link": "https://stackoverflow.com/users/5745815/floydn"}, "is_accepted": true, "score": 11, "last_activity_date": 1524091688, "last_edit_date": 1524091688, "creation_date": 1524091622, "answer_id": 49910142, "question_id": 49909710, "link": "https://stackoverflow.com/questions/49909710/suppress-scientific-format-in-a-dataframe-column/49910142#49910142", "title": "Suppress Scientific Format in a Dataframe Column", "body": "<p>I assume the exponential notation for the account numbers must come from the data file. If I create a small csv with the full account numbers, pandas will interpret them as integers.</p>\n\n<pre><code>     acct_num\n0  4118890000\n1  9876543210\n\ndf['acct_num'].dtype\nOut[51]: dtype('int64')\n</code></pre>\n\n<p>However, if the account numbers in the csv are represented in exponential notation then pandas will read them as floats.</p>\n\n<pre><code>       acct_num\n0  4.118890e+11\n1  9.876543e+11\n\ndf['acct_num'].dtype\nOut[54]: dtype('float64')\n</code></pre>\n\n<p>You have 2 options. First, correct the process that creates the csv so the account numbers are written out correctly. The second is to change the data type of the acct_num column to integer.</p>\n\n<pre><code>df['acct_num'] = df['acct_num'].astype('int64')\n\ndf\nOut[66]: \n       acct_num\n0  411889000000\n1  987654321000\n</code></pre>\n"}], "owner": {"reputation": 531, "user_id": 7933418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eec40b228d90adc86ec949347733d2e1?s=128&d=identicon&r=PG&f=1", "display_name": "iprof0214", "link": "https://stackoverflow.com/users/7933418/iprof0214"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 21839, "favorite_count": 1, "accepted_answer_id": 49910142, "answer_count": 2, "score": 12, "last_activity_date": 1524091688, "creation_date": 1524089155, "question_id": 49909710, "link": "https://stackoverflow.com/questions/49909710/suppress-scientific-format-in-a-dataframe-column", "title": "Suppress Scientific Format in a Dataframe Column", "body": "<p>I have a column called accountnumber with values similar to 4.11889000e+11 in a pandas dataframe. I want to suppress the scientific notation and convert the values to 4118890000. I have tried the following method and did not work. </p>\n\n<pre><code>df = pd.read_csv(data.csv)\npd.options.display.float_format = '{:,.3f}'.format\n</code></pre>\n\n<p>Please recommend. </p>\n"}, {"tags": ["python", "pyqt", "pyqt5"], "answers": [{"comments": [{"owner": {"reputation": 4093, "user_id": 203146, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/9b205e2e9aed56d3974a84630f11a3f1?s=128&d=identicon&r=PG", "display_name": "Elliot", "link": "https://stackoverflow.com/users/203146/elliot"}, "edited": false, "score": 1, "creation_date": 1524426275, "post_id": 49910248, "comment_id": 86956012, "body": "Great solution, although you should mention that you need to <code>connect()</code> <code>accept</code> and <code>reject</code> to whatever buttons you put in the UI or you won&#39;t have anything for the <code>if values:</code> to check."}], "tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": true, "score": 7, "last_activity_date": 1524092400, "creation_date": 1524092400, "answer_id": 49910248, "question_id": 49909633, "link": "https://stackoverflow.com/questions/49909633/pyqt5-custom-dialog-input-popup-within-main-window/49910248#49910248", "title": "pyqt5 custom dialog input popup within main window", "body": "<p>There is no single solution but I will give you a guide to do what you want.</p>\n\n<p>If you want to get a widget with the behavior of QInputDialog you must first choose the right template, in this case a good option is Dialog with Buttons Bottom or Dialog with Buttons Right, add the components you want, position it, etc.</p>\n\n<p><a href=\"https://i.stack.imgur.com/oIT75.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/oIT75.png\" alt=\"enter image description here\"></a></p>\n\n<p>Then as you show your code you create a class that inherits from QDialog and then create a method where you get the results but to do so do not use <code>show()</code> but <code>exec_()</code></p>\n\n<pre><code>path = os.path.dirname(__file__)\nqtCreatorFile = \"some_dialog.ui\"\n\nUi_Dialog, _ = uic.loadUiType(os.path.join(path,qtCreatorFile))\n\nclass CustomDialog(QDialog, Ui_Dialog):\n    def __init__(self):\n        super(CustomDialog, self).__init__()\n        self.setupUi(self)\n        # set initials values to widgets\n\n    def getResults(self):\n        if self.exec_() == QDialog.Accepted:\n            # get all values\n            val = self.some_widget.some_function()\n            val2 = self.some_widget2.some_another_function()\n            return val1, val2, ...\n        else:\n            return None\n</code></pre>\n\n<p>And then use it in your function:</p>\n\n<pre><code>class MyApp(QMainWindow, Ui_MainWindow): #gui class\n    def __init__(self):\n        #Set up the gui via Qt\n        super(MyApp, self).__init__()\n        self.setupUi(self)\n\n        self.add_button.clicked.connect(self.add_row) #add_button is QPushButton\n\n    def add_row(self):\n        w = CustomDialog()\n        values = w.getResults()\n        if values:\n            data1, data2, data3 = values\n</code></pre>\n"}], "owner": {"reputation": 4093, "user_id": 203146, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/9b205e2e9aed56d3974a84630f11a3f1?s=128&d=identicon&r=PG", "display_name": "Elliot", "link": "https://stackoverflow.com/users/203146/elliot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3193, "favorite_count": 4, "accepted_answer_id": 49910248, "answer_count": 1, "score": 1, "last_activity_date": 1532844357, "creation_date": 1524088719, "last_edit_date": 1532844357, "question_id": 49909633, "link": "https://stackoverflow.com/questions/49909633/pyqt5-custom-dialog-input-popup-within-main-window", "title": "pyqt5 custom dialog input popup within main window", "body": "<p>I need to generate a custom popup input window triggered by clicking a <code>QPushButton</code> in my app (via <code>clicked</code>). It needs to get several inputs from the user of different types and then return them to the calling function inside the main window app. I have found built in functions such as <code>QInputDialog</code> that can do this for single specific inputs, but I can't figure out how to do this in the case of a popup that asks for several inputs of different types at once (preferably in a window designed in Qt Designer). Does anyone know how to do this?</p>\n\n<pre><code>import sys\nimport os\nfrom PyQt5.QtWidgets import QMainWindow, QApplication\nfrom PyQt5 import uic\n\npath = os.path.dirname(__file__) #uic paths from itself, not the active dir, so path needed\nqtCreatorFile = \"NAME.ui\" #Ui file name, from QtDesigner\n\nUi_MainWindow, QtBaseClass = uic.loadUiType(path + qtCreatorFile) #process through pyuic\n\nclass MyApp(QMainWindow, Ui_MainWindow): #gui class\n    def __init__(self):\n        #Set up the gui via Qt\n        super(MyApp, self).__init__()\n        self.ui = Ui_MainWindow()\n        self.ui.setupUi(self)\n\n        self.ui.add_button.clicked.connect(self.add_row) #add_button is QPushButton\n\n    def add_row(self):\n        data1, data2, data3 = #popup form to get data (types are not the same)\n        #do stuff with data\n        pass\n\n#start app \nif __name__ == \"__main__\":\n    app = QApplication(sys.argv) #instantiate a QtGui (holder for the app)\n    window = MyApp()\n    window.show()\n    sys.exit(app.exec_())\n</code></pre>\n"}, {"tags": ["python", "kivy", "kivy-language"], "answers": [{"tags": [], "owner": {"reputation": 7186, "user_id": 5741460, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oxgS1vLh9Co/AAAAAAAAAAI/AAAAAAAAAAA/5hRLB7BLWWA/photo.jpg?sz=128", "display_name": "Yoav Glazner", "link": "https://stackoverflow.com/users/5741460/yoav-glazner"}, "is_accepted": false, "score": 0, "last_activity_date": 1524170470, "creation_date": 1524170470, "answer_id": 49929891, "question_id": 49909609, "link": "https://stackoverflow.com/questions/49909609/how-to-change-index-of-widget-in-float-layout/49929891#49929891", "title": "How to change index of widget in float layout?", "body": "<p>you can use <code>remove_widget</code> and then <code>add_widget</code> with the index argument</p>\n\n<pre><code>self.remove_widget(w)\nself.add_widget(w, 0) # first\n... # or\nself.add_widget(w, len(self.children)) # last...\n</code></pre>\n\n<p>You can also change <code>children</code> directly:</p>\n\n<pre><code>self.children.insert(self.children.pop(2), 0)\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9420417, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Michal368", "link": "https://stackoverflow.com/users/9420417/michal368"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 302, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1552283819, "creation_date": 1524088570, "last_edit_date": 1552283819, "question_id": 49909609, "link": "https://stackoverflow.com/questions/49909609/how-to-change-index-of-widget-in-float-layout", "title": "How to change index of widget in float layout?", "body": "<p>I've got problem with indexes of images in Float Layout. </p>\n\n<p>I need to put a pressable image (on_press event in ImageButton which inherits from Button and Image) on top of the layout (I mean in Z dimension) during the program. </p>\n\n<p>Any ideas? I was trying to do this, but I didn't make it :/  Here is the FloatLayout in kivy code</p>\n\n<pre><code>FloatLayout:\n    pos: 0, root.height*0.101\n    spacing: 5\n\n    ImageButton:\n        id: mat\n        allow_stretch: True\n        keep_ratio: False\n        size_hint_x: None\n        size_hint_y: None\n        size: root.width * 0.5, self.parent.height * 0.89 * 0.5\n        source: 'mat.png'\n        pos: 0, root.height*0.11 + self.height\n\n    ImageButton:\n        id: geo\n        allow_stretch: True\n        keep_ratio: False\n        size_hint_x: None\n        size_hint_y: None\n        size: root.width * 0.5, self.parent.height* 0.89 * 0.3333\n        source: 'geo.png'\n        pos: root.width*0.5, root.height * 0.11\n    ImageButton:\n        id: human\n        allow_stretch: True\n        keep_ratio: False\n        size_hint_x: None\n        size_hint_y: None\n        size: root.width * 0.5, self.parent.height* 0.89 * 0.3333\n        pos: root.width*0.5, root.height*0.11 + self.height\n        source: 'human.png'\n    ImageButton:\n        id: biot\n        allow_stretch: True\n        keep_ratio: False\n        size_hint_x: None\n        size_hint_y: None\n        size: root.width * 0.5, self.parent.height* 0.89 * 0.3333\n        pos: root.width*0.5, root.height*0.11 + 2*self.height\n        source: 'biotech1.png'\n    ImageButton:\n        id: bio1\n        allow_stretch: True\n        keep_ratio: False\n        size_hint_x: None\n        size_hint_y: None\n        size: root.width * 0.5, self.parent.height* 0.89 * 0.5\n        pos: 0, root.height*0.11\n        source: 'bio1.png'\n</code></pre>\n"}, {"tags": ["python", "subprocess"], "answers": [{"tags": [], "owner": {"reputation": 146, "user_id": 9380604, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "ZZ ll", "link": "https://stackoverflow.com/users/9380604/zz-ll"}, "is_accepted": false, "score": 1, "last_activity_date": 1524088981, "creation_date": 1524088981, "answer_id": 49909688, "question_id": 49909583, "link": "https://stackoverflow.com/questions/49909583/capture-output-from-subprocess-of-a-subprocess/49909688#49909688", "title": "Capture output from subprocess of a subprocess", "body": "<p>The process cannot access to the output of the sub-subprocess so the intermediate subprocess has to behave as a proxy (it writes in its output the output of the sub-subprocess) or the sub-subprocess has to send its output somewhere (a temporary file for example) which will be read by the process</p>\n"}], "owner": {"reputation": 61, "user_id": 6221255, "user_type": "registered", "profile_image": "https://graph.facebook.com/10205863862735003/picture?type=large", "display_name": "Trevor Aron", "link": "https://stackoverflow.com/users/6221255/trevor-aron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 151, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1524096375, "creation_date": 1524088435, "last_edit_date": 1524096375, "question_id": 49909583, "link": "https://stackoverflow.com/questions/49909583/capture-output-from-subprocess-of-a-subprocess", "title": "Capture output from subprocess of a subprocess", "body": "<p>So I am using the following in my script to capture the stdout and stderr output from my subprocess:</p>\n\n<pre><code>output = subprocess.check_output(\n    cmd,\n    stderr=subprocess.STDOUT\n)\n</code></pre>\n\n<p>This is working swimmingly, however, my subprocess has a subprocess it itself calls. The subprocess it itself calls has output I would like to capture. However, with my current set up, I only capture the output of the subprocess I create, and do not receive any of the output of it's child process.</p>\n\n<p>Is there any way I can capture the output of any child subprocess spawned by a subprocess that my code is starting?</p>\n"}, {"tags": ["python", "list", "slice"], "answers": [{"tags": [], "owner": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "is_accepted": true, "score": 1, "last_activity_date": 1524089944, "creation_date": 1524089944, "answer_id": 49909849, "question_id": 49909573, "link": "https://stackoverflow.com/questions/49909573/whats-the-proper-way-to-slice-self-within-a-method-of-a-list-subclass/49909849#49909849", "title": "What&#39;s the proper way to slice `self` within a method of a List subclass?", "body": "<p>The reason why <code>self = self[i:]</code> is incorrect is because all it does is slice the list and assign that slice to a local variable named <code>self</code>. It doesn't actually <em>modify</em> the list.</p>\n\n<p>In order to change the content of the list, you can use a <a href=\"https://docs.python.org/3/tutorial/introduction.html#lists\" rel=\"nofollow noreferrer\">slice assignment</a>:</p>\n\n<pre><code>self[:] = self[i:]\n</code></pre>\n\n<p>This basically means \"replace the entire content of the list with the value on the right side of the <code>=</code> symbol\".</p>\n\n<hr>\n\n<p>The other part of the problem is making your <code>trim</code> method work correctly. There are a few cases that your code doesn't handle. Here's the updated code:</p>\n\n<pre><code>import datetime as dt\n\nclass BarList(list):\n    \"\"\"Items in the list are always in ascending order of .date\"\"\"\n    def trim(self, start:dt.datetime=None, end:dt.datetime=None):\n        \"\"\"Removes all bars before `start` and after `end`\"\"\"\n        if start:\n            for i, bar in enumerate(self):\n                if bar &gt;= start:\n                    # if this date is later than `start`, remove\n                    # everything up to here\n                    self[:] = self[i:]\n                    break\n            else:\n                # if no date greater than `start` was\n                # found, delete everything\n                del self[:]\n</code></pre>\n\n<p>Test run:</p>\n\n<pre><code>l = BarList([dt.datetime.now()])\nprint(l)  # output: [datetime.datetime(2018, 4, 19, 0, 18, 14, 23474)]\nl.trim(dt.datetime.now())\nprint(l)  # output: []\n</code></pre>\n"}], "owner": {"reputation": 3032, "user_id": 4698922, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9c1cdc835c656ed24893548214272aca?s=128&d=identicon&r=PG&f=1", "display_name": "davidtgq", "link": "https://stackoverflow.com/users/4698922/davidtgq"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 27, "favorite_count": 0, "accepted_answer_id": 49909849, "answer_count": 1, "score": 0, "last_activity_date": 1524089975, "creation_date": 1524088393, "last_edit_date": 1524089975, "question_id": 49909573, "link": "https://stackoverflow.com/questions/49909573/whats-the-proper-way-to-slice-self-within-a-method-of-a-list-subclass", "title": "What&#39;s the proper way to slice `self` within a method of a List subclass?", "body": "<p>I intend to create a method to slice a <code>list</code>, however I don't have the correct syntax here, and I haven't been able to come up with the correct search query to find out how to do this:</p>\n\n<pre><code>class BarList(list):\n    \"\"\"Items in the list are always in ascending order of .date\"\"\"\n    def trim(self, start:dt.datetime=None, end:dt.datetime=None):\n        \"\"\"Removes all bars before `start` and after `end`\"\"\"\n        if start:\n            for i, bar in enumerate(self):\n                if bar.date &gt;= start:\n                    self = self[i:]\n                    break\n</code></pre>\n\n<p>What's the proper way to do what I'm trying to express in the above pseudocode?</p>\n"}, {"tags": ["python", "pandas", "indexing"], "answers": [{"tags": [], "owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "is_accepted": false, "score": 2, "last_activity_date": 1524090221, "creation_date": 1524090221, "answer_id": 49909897, "question_id": 49909538, "link": "https://stackoverflow.com/questions/49909538/mapping-a-multi-index-to-existing-pandas-dataframe-columns-using-separate-datafr/49909897#49909897", "title": "mapping a multi-index to existing pandas dataframe columns using separate dataframe", "body": "<p>IIUC, you can do it like this.</p>\n\n<pre><code>df.columns = pd.MultiIndex.from_tuples(cat_df.reset_index()[['broader category','current category']].apply(tuple, axis=1).tolist())\n</code></pre>\n\n<p>print(df)</p>\n\n<p>Output:</p>\n\n<pre><code>   X  Y     Z\n   A  B  C  D\n0  1  2  1  4\n1  3  0  2  2\n2  1  5  3  1\n</code></pre>\n\n<p>Sum level:</p>\n\n<pre><code>df.sum(level=0, axis=1)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>   X  Y  Z\n0  1  3  4\n1  3  2  2\n2  1  8  1\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 325, "user_id": 2411118, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7345b4db3fb14e35b7b32c2257a506ca?s=128&d=identicon&r=PG&f=1", "display_name": "Al S", "link": "https://stackoverflow.com/users/2411118/al-s"}, "edited": false, "score": 1, "creation_date": 1524093266, "post_id": 49909924, "comment_id": 86836574, "body": "This one worked great for me and was the most understandable. However, I had to make one modification as I&#39;m using an older version of Pandas, <code>0.20.3</code>. I replaced the <code>set_axis()</code> line with <code>df.set_axis(1,cols)</code> (with the caveat that it changes the dataframe in place) as the syntax changed in version <code>0.22</code>."}], "tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": true, "score": 4, "last_activity_date": 1524090350, "creation_date": 1524090350, "answer_id": 49909924, "question_id": 49909538, "link": "https://stackoverflow.com/questions/49909538/mapping-a-multi-index-to-existing-pandas-dataframe-columns-using-separate-datafr/49909924#49909924", "title": "mapping a multi-index to existing pandas dataframe columns using separate dataframe", "body": "<pre><code>d = dict(zip(cat_df['current category'], cat_df.index))\n\ncols = pd.MultiIndex.from_arrays([df.columns.map(d.get), df.columns])\ndf.set_axis(cols, axis=1, inplace=False)\n\n   X  Y     Z\n   A  B  C  D\n0  1  2  1  4\n1  3  0  2  2\n2  1  5  3  1\n</code></pre>\n\n<hr>\n\n<pre><code>df_new = df.set_axis(cols, axis=1, inplace=False)\ndf_new.groupby(axis=1, level=0).sum()\n\n   X  Y  Z\n0  1  3  4\n1  3  2  2\n2  1  8  1\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": false, "score": 2, "last_activity_date": 1524092543, "creation_date": 1524092543, "answer_id": 49910269, "question_id": 49909538, "link": "https://stackoverflow.com/questions/49909538/mapping-a-multi-index-to-existing-pandas-dataframe-columns-using-separate-datafr/49910269#49910269", "title": "mapping a multi-index to existing pandas dataframe columns using separate dataframe", "body": "<p>You can using <code>set_index</code> for creating the idx, then assign to your df</p>\n\n<pre><code>idx=df1.set_index('category',append=True).index\n\ndf.columns=idx\n\ndf\nOut[1170]:\ncurrent   X  Y     Z\ncategory  A  B  C  D\n0         1  2  1  4\n1         3  0  2  2\n2         1  5  3  1\n\ndf.sum(axis=1,level=0)\nOut[1171]: \ncurrent  X  Y  Z\n0        1  3  4\n1        3  2  2\n2        1  8  1\n</code></pre>\n"}], "owner": {"reputation": 325, "user_id": 2411118, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/7345b4db3fb14e35b7b32c2257a506ca?s=128&d=identicon&r=PG&f=1", "display_name": "Al S", "link": "https://stackoverflow.com/users/2411118/al-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1207, "favorite_count": 0, "accepted_answer_id": 49909924, "answer_count": 3, "score": 1, "last_activity_date": 1524092543, "creation_date": 1524088173, "last_edit_date": 1524088889, "question_id": 49909538, "link": "https://stackoverflow.com/questions/49909538/mapping-a-multi-index-to-existing-pandas-dataframe-columns-using-separate-datafr", "title": "mapping a multi-index to existing pandas dataframe columns using separate dataframe", "body": "<p>I have an existing data frame in the following format (let's call it <code>df</code>):</p>\n\n<pre><code>               A     B     C     D\n0              1     2     1     4\n1              3     0     2     2\n2              1     5     3     1\n</code></pre>\n\n<p>The column names were extracted from a spreadsheet that has the following form (let's call it <code>cat_df</code>):</p>\n\n<pre><code>                      current category\nbroader category\nX                     A\nY                     B\nY                     C\nZ                     D\n</code></pre>\n\n<p>First I'd like to prepend a higher level index to make <code>df</code> look like so:</p>\n\n<pre><code>               X     Y           Z\n               A     B     C     D\n0              1     2     1     4\n1              3     0     2     2\n2              1     5     3     1\n</code></pre>\n\n<p>Lastly i'd like to 'roll-up' the data into the meta-index by summing over subindices, to generate a new dataframe like so:</p>\n\n<pre><code>               X     Y     Z\n0              1     3     4\n1              3     2     2\n2              1     8     1\n</code></pre>\n\n<p>Using <code>concat</code> from <a href=\"https://stackoverflow.com/questions/14744068/prepend-a-level-to-a-pandas-multiindex\">this answer</a> has gotten me close, but it seems like it'd be a very manual process picking out each subset. My true dataset is has a more complex mapping, so I'd like to refer to it directly as I build my meta-index. I think once I get the meta-index settled, a simple <code>groupby</code> should get me to the summation, but I'm still stuck on the first step. </p>\n"}, {"tags": ["python", "list", "loops", "dynamic", "tuples"], "comments": [{"owner": {"reputation": 599, "user_id": 3877165, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/4f5b7a157319a9d89906ae5d04614599?s=128&d=identicon&r=PG&f=1", "display_name": "eternity1", "link": "https://stackoverflow.com/users/3877165/eternity1"}, "edited": false, "score": 0, "creation_date": 1524155969, "post_id": 49909524, "comment_id": 86868149, "body": "it seems to be a problem with the part <code>+=</code> of  <code>spread_cumdiff += (x[i] - y[i]) **2</code>; I took away <code>+</code> for testing and the function seems to work then. not sure what to do."}], "answers": [{"tags": [], "owner": {"reputation": 2951, "user_id": 9335964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/601ca67d53004283e6ee4f893597cfda?s=128&d=identicon&r=PG&f=1", "display_name": "Joost", "link": "https://stackoverflow.com/users/9335964/joost"}, "is_accepted": false, "score": 1, "last_activity_date": 1524094861, "creation_date": 1524094861, "answer_id": 49910581, "question_id": 49909524, "link": "https://stackoverflow.com/questions/49909524/python-keyerror-0-function-that-creates-a-list-from-subsets-of-data-frame-ac/49910581#49910581", "title": "Python: KeyError: 0 - function that creates a list from subsets of data frame accessed via a loop", "body": "<p>try printing <code>x[i]</code> and <code>y[i]</code> seperaterly so you know which of the 2 causes the keyerror. Also please post the function because without it we have no clue what's going on.</p>\n"}, {"tags": [], "owner": {"reputation": 599, "user_id": 3877165, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/4f5b7a157319a9d89906ae5d04614599?s=128&d=identicon&r=PG&f=1", "display_name": "eternity1", "link": "https://stackoverflow.com/users/3877165/eternity1"}, "is_accepted": false, "score": 0, "last_activity_date": 1524160846, "creation_date": 1524160846, "answer_id": 49927418, "question_id": 49909524, "link": "https://stackoverflow.com/questions/49909524/python-keyerror-0-function-that-creates-a-list-from-subsets-of-data-frame-ac/49927418#49927418", "title": "Python: KeyError: 0 - function that creates a list from subsets of data frame accessed via a loop", "body": "<p>As thought, the problem really was at the cumsum-update function. I have rewritten the function as follows:</p>\n\n<pre><code>def ssd(x, y):\n\n    spread_diff_sq = np.subtract(x, y) **2\n    spread_diff_sq_cum = spread_diff_sq.cumsum()\n    spread_cumdiff = spread_diff_sq_cum.iloc[-1]\n\n    return spread_cumdiff\n</code></pre>\n\n<p>this doesn't go to the root of the problem, nevertheless it's avoiding the loop.</p>\n"}], "owner": {"reputation": 599, "user_id": 3877165, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/4f5b7a157319a9d89906ae5d04614599?s=128&d=identicon&r=PG&f=1", "display_name": "eternity1", "link": "https://stackoverflow.com/users/3877165/eternity1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 221, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1524160846, "creation_date": 1524088132, "last_edit_date": 1524150323, "question_id": 49909524, "link": "https://stackoverflow.com/questions/49909524/python-keyerror-0-function-that-creates-a-list-from-subsets-of-data-frame-ac", "title": "Python: KeyError: 0 - function that creates a list from subsets of data frame accessed via a loop", "body": "<p>I have a loop that creates subsets of a larger data frame, which are then used as input for a function for analysis. This function returns a list. I used prints to see where it stops. So for the first run in the loop I can see the subset, the list output of the function, but when it starts again, second run, I see the second subset but than at the function I get the following error:</p>\n\n<pre><code>&lt;ipython-input-11-8f6203e297e3&gt; in ssd(x, y)\n      8 \n      9     for i in range(x.shape[0]):\n---&gt; 10         spread_cumdiff += (x[i] - y[i]) **2\n     11 \n     12     return spread_cumdiff\n</code></pre>\n\n<p>Note the above part is the last part \"before\" the python-error below. In fact, above has 2 more similar blocks, ie function a) which contains function b) which contains the block above.</p>\n\n<pre><code>~/anaconda3/envs/thesis/lib/python3.5/site-packages/pandas/core/series.py in __getitem__(self, key)\n    621         key = com._apply_if_callable(key, self)\n    622         try:\n--&gt; 623             result = self.index.get_value(self, key)\n    624 \n    625             if not is_scalar(result):\n\n~/anaconda3/envs/thesis/lib/python3.5/site-packages/pandas/core/indexes/base.py in get_value(self, series, key)\n   2558         try:\n   2559             return self._engine.get_value(s, k,\n-&gt; 2560                                           tz=getattr(series.dtype, 'tz', None))\n   2561         except KeyError as e1:\n   2562             if len(self) &gt; 0 and self.inferred_type in ['integer', 'boolean']:\n\npandas/_libs/index.pyx in pandas._libs.index.IndexEngine.get_value()\n\npandas/_libs/index.pyx in pandas._libs.index.IndexEngine.get_value()\n\npandas/_libs/index.pyx in pandas._libs.index.IndexEngine.get_loc()\n\npandas/_libs/hashtable_class_helper.pxi in pandas._libs.hashtable.Int64HashTable.get_item()\n\npandas/_libs/hashtable_class_helper.pxi in pandas._libs.hashtable.Int64HashTable.get_item()\n\nKeyError: 0\n</code></pre>\n\n<p>I have it something along these lines:</p>\n\n<pre><code>df_test = pd.DataFrame(np.random.randint(low=0, high=10, size=(5, 5)),\n                    columns=['a', 'b', 'c', 'd', 'e'], \n                    index = ['20100101', '20100102', '20100103', '20100104', '20100105']\n\ndfs = []\nN = 3\nfor x in np.arange(len(df_test)+1)[N:]:\n    df1 = df_test.iloc[np.arange(x - N, x)]\n\n    test_list = myfunc(df1) # it takes in df1, makes some computation and returns a\n                            # list of 2-element tuples, i.e. [('a', 'b'), ('d', 'e')]\n</code></pre>\n\n<p>edit: please see below the function:</p>\n\n<pre><code>def ssd(x, y):\n\n    spread_cumdiff = 0\n\n    for i in range(x.shape[0]):\n        #print(\"x_i\", x[i])\n        #print(\"y_i\", y[i])\n        spread_cumdiff += (x[i] - y[i]) **2\n\n    return spread_cumdiff\n</code></pre>\n\n<p>I tried to use the print function but it doesn't even come that far for the second run of the loop. </p>\n\n<pre><code>def pairs_match(df, p):\n\n    df_norm = df.assign(**df.drop('datetime', 1).pipe(lambda d: d.div(d.shift().bfill()).cumprod()))\n    df_norm = df_norm.replace([np.inf, -np.inf], np.nan)\n\n    df_norm.fillna(method = 'ffill', inplace = True)\n    df_norm.fillna(method = 'bfill', inplace = True)\n\n    ticker = df_norm.columns.values.tolist()\n    ticker.pop(0)\n    ticker_list = pd.DataFrame({'ticker': ticker})\n\n    # to be implemented: if length of list list &lt;2, then skip the entire run! \n\n    all_pairs = list(itertools.permutations(ticker_list.ticker, 2))\n    squared = []\n    presel_pairs = []\n\n    for i in all_pairs:\n        squared.append(ssd(df_norm[i[0]].head(n = train_win), df_norm[i[1]].head(n = train_win)))   # ssd(x,y) function from above\n\n    tbl_dist = pd.DataFrame({'Pair' : all_pairs, 'SSD' : squared})\n\n    ssd_perctl = p\n    ssd_thresh = stats.scoreatpercentile(tbl_dist['SSD'], ssd_perctl)\n\n    presel_pairs = tbl_dist[tbl_dist['SSD'] &lt;= ssd_thresh]\n    presel_pairs_list = presel_pairs['Pair']\n    presel_pairs_list = presel_pairs_list.reset_index(drop = True)\n\n    return presel_pairs_list      \n</code></pre>\n\n<p><code>def pairs_match(df, p)</code> returns a list, which is then used in another function. </p>\n"}, {"tags": ["python", "pandas", "numpy", "normalization"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 9661998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60b04c81d550f8aef0510c7bb98527ca?s=128&d=identicon&r=PG&f=1", "display_name": "APS", "link": "https://stackoverflow.com/users/9661998/aps"}, "edited": false, "score": 0, "creation_date": 1524130770, "post_id": 49909560, "comment_id": 86850768, "body": "yes, that did work, I changed the line as follows:                             data[a] = (abs(data[a].apply(hash))).astype(str).str.zfill(19)                                    and added data[a] = data[a].str.join(&#39;,&#39;) which gave the result! thanks a bunch!"}], "tags": [], "owner": {"reputation": 1682, "user_id": 4267783, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sv5Im.jpg?s=128&g=1", "display_name": "Thtu", "link": "https://stackoverflow.com/users/4267783/thtu"}, "is_accepted": true, "score": 0, "last_activity_date": 1524088297, "creation_date": 1524088297, "answer_id": 49909560, "question_id": 49909514, "link": "https://stackoverflow.com/questions/49909514/pandas-replacing-column-values-in-dataframe-columns/49909560#49909560", "title": "Pandas: Replacing column values in dataframe columns", "body": "<p>You should be able to use pandas string functions. \ne.g. <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.str.join.html\" rel=\"nofollow noreferrer\">https://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.str.join.html</a></p>\n\n<p><code>\ndf[\"my_column\"].str.join(',')\n</code></p>\n"}], "owner": {"reputation": 13, "user_id": 9661998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60b04c81d550f8aef0510c7bb98527ca?s=128&d=identicon&r=PG&f=1", "display_name": "APS", "link": "https://stackoverflow.com/users/9661998/aps"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "accepted_answer_id": 49909560, "answer_count": 1, "score": 1, "last_activity_date": 1524088297, "creation_date": 1524088084, "question_id": 49909514, "link": "https://stackoverflow.com/questions/49909514/pandas-replacing-column-values-in-dataframe-columns", "title": "Pandas: Replacing column values in dataframe columns", "body": "<p>my goal for this question is to insert a comma between every character in every column value, which have been hashed and padded to a length of 19 digits.</p>\n\n<p>The code below works partially, but the array values get messed up by trying to apply the f_comma function to the column value...thanks for any help!</p>\n\n<p>I've taken some of the answers from other questions and have created the following code:\nusing this function -</p>\n\n<pre><code>def f_comma(p_string, n=1):\n    p_string = str(p_string)\n    return ','.join(p_string[i:i+n] for i in range(0, len(p_string), n))\n</code></pre>\n\n<p>And opening a tsv file</p>\n\n<pre><code>data = pd.read_csv('a1.tsv', sep = '\\t',  dtype=object)\n</code></pre>\n\n<p>I have modified another answer to do the following - </p>\n\n<pre><code>h = 1\ntry:\n    while data.columns[h]:\n        a = data.columns[h]\n        data[a] = f_comma((abs(data[a].apply(hash))).astype(str).str.zfill(19))\n        h += 1\nexcept IndexError:\n    pass\n</code></pre>\n\n<p>which returns this array</p>\n\n<pre><code>array([[ '0, , , , ,4,1,7,5,7,0,1,4,5,4,6,1,6,5,3,1,4,6,1,\\n,N,a,m,e,:, ,d,a,t,e,,, ,d,t,y,p,e,:, ,o,b,j,e,c,t',\n        '0, , , , ,6,2,9,1,6,7,0,8,4,2,8,2,9,1,0,9,5,9,4,\\n,N,a,m,e,:, ,n,a,m,e,,, ,d,t,y,p,e,:, ,o,b,j,e,c,t']], dtype=object)\n</code></pre>\n\n<p>without the f_comma function the array looks like -</p>\n\n<pre><code>array([['3556968867719847281', '3691880917405293133']], dtype=object)\n</code></pre>\n\n<p>The goal is an array like this -</p>\n\n<pre><code>array([['3,5,5,6,9,6,8,8,6,7,7,1,9,8,4,7,2,8,1', '3,6,9,1,8,8,0,9,1,7,4,0,5,2,9,3,1,3,3']], dtype=object)\n</code></pre>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 46136, "user_id": 3890632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hNkgF.png?s=128&g=1", "display_name": "khelwood", "link": "https://stackoverflow.com/users/3890632/khelwood"}, "edited": false, "score": 5, "creation_date": 1524088156, "post_id": 49909507, "comment_id": 86834972, "body": "You put the lines in a <code>set</code>. Sets are unordered containers."}, {"owner": {"reputation": 185, "user_id": 3575229, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Z5K38.jpg?s=128&g=1", "display_name": "Sadiq", "link": "https://stackoverflow.com/users/3575229/sadiq"}, "edited": false, "score": 1, "creation_date": 1524088601, "post_id": 49909507, "comment_id": 86835153, "body": "As khelwood said &quot;set&quot; doesn&#39;t keep order, You can use Orderedset: <a href=\"https://pypi.org/project/orderedset/\" rel=\"nofollow noreferrer\">pypi.org/project/orderedset</a>"}, {"owner": {"reputation": 4217, "user_id": 9614249, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eJfci.png?s=128&g=1", "display_name": "Increasingly Idiotic", "link": "https://stackoverflow.com/users/9614249/increasingly-idiotic"}, "edited": false, "score": 0, "creation_date": 1524089575, "post_id": 49909507, "comment_id": 86835485, "body": "Is there any benefit to using an OrderedSet instead of a List?"}], "answers": [{"tags": [], "owner": {"reputation": 4217, "user_id": 9614249, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eJfci.png?s=128&g=1", "display_name": "Increasingly Idiotic", "link": "https://stackoverflow.com/users/9614249/increasingly-idiotic"}, "is_accepted": true, "score": 1, "last_activity_date": 1524096788, "last_edit_date": 1524096788, "creation_date": 1524089518, "answer_id": 49909766, "question_id": 49909507, "link": "https://stackoverflow.com/questions/49909507/how-to-retrieve-each-line-of-a-text-file-in-order-python-3/49909766#49909766", "title": "How to retrieve each line of a text file in order [python 3]", "body": "<p>From The python documentation for <a href=\"https://docs.python.org/3/tutorial/datastructures.html#sets\" rel=\"nofollow noreferrer\"><strong>Set</strong></a>:</p>\n\n<blockquote>\n  <p>A set is an <strong>unordered</strong> collection with no duplicate elements.</p>\n</blockquote>\n\n<p>When you save each line into a set the order in which the items are retrieved is not guaranteed to be the same as when they went in.</p>\n\n<p>A better choice might be to use a <a href=\"https://docs.python.org/3.6/tutorial/introduction.html#lists\" rel=\"nofollow noreferrer\"><strong>List</strong></a> and in fact, the <a href=\"https://docs.python.org/3/library/stdtypes.html#str.splitlines\" rel=\"nofollow noreferrer\"><code>splitlines()</code></a> function already returns a list.</p>\n\n<p>You should be able to fix your code by simply removing <code>set(...)</code> from line 2.</p>\n\n<pre><code>with open(\"C:/Temp/1_attlog.dat\", \"r\") as f1, open(\"C:/Temp/attlog.dat\",\"r\") as f2, open(\"C:/Temp/attlog_new.dat\", \"w\") as n:\n    f_a = f1.read().splitlines() # No more set\n    f_b = set(f2.read().splitlines())\n    for line in f_a:\n        count_line += 1\n        if line not in f_b:\n            print(line)\n            count_new_lines += 1\n            n.writelines(line)\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 9646644, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Morris", "link": "https://stackoverflow.com/users/9646644/morris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 49909766, "answer_count": 1, "score": -1, "last_activity_date": 1524096788, "creation_date": 1524088028, "last_edit_date": 1524094426, "question_id": 49909507, "link": "https://stackoverflow.com/questions/49909507/how-to-retrieve-each-line-of-a-text-file-in-order-python-3", "title": "How to retrieve each line of a text file in order [python 3]", "body": "<p>I'm attempting to compare two txt files and find the new lines from one file and write them into a new file. </p>\n\n<p>I noticed that the new lines are written in a different order every time I run the program. Is there a way to preserve the original order?</p>\n\n<p>I noticed that the disorder stems from <code>read().splitlines()</code> on lines 2 and 3. </p>\n\n<p>My code:</p>\n\n<pre><code>with open(\"C:/Temp/1_attlog.dat\", \"r\") as f1, open(\"C:/Temp/attlog.dat\",\"r\") as f2, open(\"C:/Temp/attlog_new.dat\", \"w\") as n:\nf_a = set(f1.read().splitlines())\nf_b = set(f2.read().splitlines())\nfor line in f_a:\n    count_line += 1\n    if line not in f_b:\n        print(line)\n        count_new_lines += 1\n        n.writelines(line)\n</code></pre>\n"}, {"tags": ["python", "kivy"], "answers": [{"comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "reply_to_user": {"reputation": 101, "user_id": 8713173, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh4.googleusercontent.com/-pQe-gg98kHc/AAAAAAAAAAI/AAAAAAAAAAc/IlRqiz8GhU4/photo.jpg?sz=128", "display_name": "Adam Kamil", "link": "https://stackoverflow.com/users/8713173/adam-kamil"}, "edited": false, "score": 1, "creation_date": 1524090797, "post_id": 49909811, "comment_id": 86835911, "body": "@AdamKamil  I see that it was necessary, I just deleted the Clock."}], "tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": true, "score": 3, "last_activity_date": 1524090757, "last_edit_date": 1524090757, "creation_date": 1524089733, "answer_id": 49909811, "question_id": 49909495, "link": "https://stackoverflow.com/questions/49909495/kivy-how-to-remove-label-and-add/49909811#49909811", "title": "Kivy how to remove label and add", "body": "<p>Removing a Label to place a widget with another text consumes recourses in an unavoidable way, you only have to update the text. So you must add the label the first time and then update the text. On the other hand it is recommended that the name of variables, classes and functions are not the same. And try to avoid using global variables because they are difficult to debug.</p>\n\n<p>Making those changes we obtain the following code:</p>\n\n<pre><code>from kivy.app import App\nfrom kivy.lang import Builder\nfrom kivy.uix.label import Label\nfrom kivy.uix.screenmanager import Screen\n\nclass GameScreen(Screen):\n    def __init__(self, **args):\n        Screen.__init__(self, **args)\n        self.money = 0\n        self.label = Label(text=str(self.money), color=(1,0,0,1), font_size=(45),size_hint=(0.2,0.1), pos_hint={\"center_x\":0.5, \"center_y\":0.9})\n        self.add_widget(self.label)\n\n    def add_money(self):\n        self.money += 1\n        self.label.text = str(self.money)\n\nBuilder.load_string('''\n&lt;GameScreen&gt;:\n    name: \"GameScreen\"\n    canvas:\n        Color:\n            rgb: 1, 1, 1\n        Rectangle:\n            pos: self.pos\n            size: self.size\n\n    Button:\n        size: self.texture_size\n        on_release: root.add_money()\n        text: \"Press\"\n        font_size: 50\n        color: 1,1,1,1\n        background_color: (0,0,0,1)\n        background_normal: \"\"\n        background_down: \"\"\n        size_hint: None, None\n        pos_hint: {\"center_x\":0.5, \"center_y\":0.6}\n        width: self.texture_size[0] + dp(10)\n        height: self.texture_size[1] + dp(10)\n    ''')\n\nclass TestApp(App):\n    def build(self):\n        return GameScreen()\n\nif __name__ == '__main__':\n    TestApp().run()\n</code></pre>\n"}], "owner": {"reputation": 101, "user_id": 8713173, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh4.googleusercontent.com/-pQe-gg98kHc/AAAAAAAAAAI/AAAAAAAAAAc/IlRqiz8GhU4/photo.jpg?sz=128", "display_name": "Adam Kamil", "link": "https://stackoverflow.com/users/8713173/adam-kamil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 886, "favorite_count": 0, "accepted_answer_id": 49909811, "answer_count": 1, "score": 1, "last_activity_date": 1524090757, "creation_date": 1524087962, "question_id": 49909495, "link": "https://stackoverflow.com/questions/49909495/kivy-how-to-remove-label-and-add", "title": "Kivy how to remove label and add", "body": "<p>I want to make a simple game where you tap and you earn money. I made some code which does that however I don't know how to remove the label. Right now all it does is add 1 to the money variable and make new label.</p>\n\n<p>.py</p>\n\n<pre><code>money = 0\n\n    class GameScreen(Screen):\n        def money(self):\n            global money\n            money += 1\n            self.add_widget(Label(text=str(money), color=(1,0,0,1), font_size=(45),size_hint=(0.2,0.1), pos_hint={\"center_x\":0.5, \"center_y\":0.9}))\n            print(money)\n</code></pre>\n\n<p>.kv</p>\n\n<pre><code>&lt;GameScreen&gt;:\n    name: \"GameScreen\"\n    canvas:\n        Color:\n            rgb: 1, 1, 1\n        Rectangle:\n            pos: self.pos\n            size: self.size\n\n    Button:\n        size: self.texture_size\n        on_release: root.money()\n        text: \"Press\"\n        font_size: 50\n        color: 1,1,1,1\n        background_color: (0,0,0,1)\n        background_normal: \"\"\n        background_down: \"\"\n        size_hint: None, None\n        pos_hint: {\"center_x\":0.5, \"center_y\":0.6}\n        width: self.texture_size[0] + dp(10)\n        height: self.texture_size[1] + dp(10)\n</code></pre>\n"}, {"tags": ["python", "numpy", "scipy", "python-xarray", "xarray"], "answers": [{"comments": [{"owner": {"reputation": 7977, "user_id": 3604159, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e32946c257cb4802dea738db1ecbf0c6?s=128&d=identicon&r=PG&f=1", "display_name": "TheBlackCat", "link": "https://stackoverflow.com/users/3604159/theblackcat"}, "edited": false, "score": 0, "creation_date": 1524498198, "post_id": 49912520, "comment_id": 86986351, "body": "This works in the example I gave, but if I make the signal longer, it no longer works, with <code>ValueError: indexes along dimension &#39;sample&#39; are not equal</code>.  Is there a way to make it work with two different lengths?"}, {"owner": {"reputation": 996, "user_id": 6485764, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-l7jCV7PXUFk/AAAAAAAAAAI/AAAAAAAABnQ/AaukrB7gqf4/photo.jpg?sz=128", "display_name": "Keisuke FUJII", "link": "https://stackoverflow.com/users/6485764/keisuke-fujii"}, "reply_to_user": {"reputation": 7977, "user_id": 3604159, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e32946c257cb4802dea738db1ecbf0c6?s=128&d=identicon&r=PG&f=1", "display_name": "TheBlackCat", "link": "https://stackoverflow.com/users/3604159/theblackcat"}, "edited": false, "score": 0, "creation_date": 1524566438, "post_id": 49912520, "comment_id": 87015096, "body": "Can you give a snippet of this?"}, {"owner": {"reputation": 7977, "user_id": 3604159, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e32946c257cb4802dea738db1ecbf0c6?s=128&d=identicon&r=PG&f=1", "display_name": "TheBlackCat", "link": "https://stackoverflow.com/users/3604159/theblackcat"}, "edited": false, "score": 0, "creation_date": 1524598733, "post_id": 49912520, "comment_id": 87035785, "body": "I have created a new question: <a href=\"https://stackoverflow.com/questions/50009616/trying-to-apply-fftconvolve-over-different-sized-xarrays\" title=\"trying to apply fftconvolve over different sized xarrays\">stackoverflow.com/questions/50009616/&hellip;</a>"}], "tags": [], "owner": {"reputation": 996, "user_id": 6485764, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-l7jCV7PXUFk/AAAAAAAAAAI/AAAAAAAABnQ/AaukrB7gqf4/photo.jpg?sz=128", "display_name": "Keisuke FUJII", "link": "https://stackoverflow.com/users/6485764/keisuke-fujii"}, "is_accepted": true, "score": 2, "last_activity_date": 1524110556, "creation_date": 1524110556, "answer_id": 49912520, "question_id": 49909487, "link": "https://stackoverflow.com/questions/49909487/trying-to-apply-fftconvolve-over-xarray/49912520#49912520", "title": "Trying to apply fftconvolve over xarray", "body": "<p>Specifying <code>output_core_dims</code> solves this,</p>\n\n<pre><code>res = xr.apply_ufunc(fftconvolve, xarr1, xarr2, \n                     input_core_dims=[['sample'], ['sample']], \n                     output_core_dims=[['sample']],\n                     kwargs={'mode': 'same'}, vectorize=True)\n</code></pre>\n"}], "owner": {"reputation": 7977, "user_id": 3604159, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e32946c257cb4802dea738db1ecbf0c6?s=128&d=identicon&r=PG&f=1", "display_name": "TheBlackCat", "link": "https://stackoverflow.com/users/3604159/theblackcat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 248, "favorite_count": 0, "accepted_answer_id": 49912520, "answer_count": 1, "score": 0, "last_activity_date": 1524110556, "creation_date": 1524087929, "question_id": 49909487, "link": "https://stackoverflow.com/questions/49909487/trying-to-apply-fftconvolve-over-xarray", "title": "Trying to apply fftconvolve over xarray", "body": "<p>I have a 3D <code>xarray</code> <code>DataArray</code> and a 1D <code>xarray</code> <code>DataArray</code>.  One dimension of the 3D array has the same size as the single dimension of the other.  I want to apply <code>scipy.signal.fftconvolve</code> along these corresponding dimensions.  But I get an error.  Here is some minimal example code:</p>\n\n<pre><code>import numpy as np\nfrom scipy.signal import fftconvolve\nimport xarray as xr\n\nxarr1 = xr.DataArray(np.random.random([10,20,500]), \n                     dims=('dim1', 'dim2', 'sample'))\nxarr2 = xr.DataArray(np.random.random(500), \n                     dims=('sample',))\nres = xr.apply_ufunc(fftconvolve, xarr1, xarr2, \n                     input_core_dims=[['sample'], ['sample']], \n                     kwargs={'mode': 'same'}, \n                     vectorize=True)\n</code></pre>\n\n<p>What I want to do is the equivalent of this:</p>\n\n<pre><code>res = np.zeros(xarr1.shape)\nfor i1 in range(xarr1.shape[0]):\n    for i2 in range(xarr1.shape[1]):\n       res[i1, i2, :] = fftconvolve(xarr1[i1, i2, :], xarr2, mode='same')\n</code></pre>\n\n<p>But I get the following error with the <code>apply_ufunc</code> version:</p>\n\n<pre><code>---------------------------------------------------------------------------\nValueError                                Traceback (most recent call last)\n&lt;ipython-input-174-4f45f68ab252&gt; in &lt;module&gt;()\n    7 xarr2 = xr.DataArray(np.random.random(500), \n    8                      dims=('sample',))\n----&gt; 9 res = xr.apply_ufunc(fftconvolve, xarr1, xarr2, input_core_dims=[['sample'], ['sample']], kwargs={'mode': 'same'}, vectorize=True)\n\n~\\Anaconda3\\envs\\dataproc\\lib\\site-packages\\xarray\\core\\computation.py in apply_ufunc(func, *args, **kwargs)\n    932                                      join=join,\n    933                                      exclude_dims=exclude_dims,\n--&gt; 934                                      keep_attrs=keep_attrs)\n    935     elif any(isinstance(a, Variable) for a in args):\n    936         return variables_ufunc(*args)\n\n~\\Anaconda3\\envs\\dataproc\\lib\\site-packages\\xarray\\core\\computation.py in apply_dataarray_ufunc(func, *args, **kwargs)\n    209 \n    210     data_vars = [getattr(a, 'variable', a) for a in args]\n--&gt; 211     result_var = func(*data_vars)\n    212 \n    213     if signature.num_outputs &gt; 1:\n\n~\\Anaconda3\\envs\\dataproc\\lib\\site-packages\\xarray\\core\\computation.py in apply_variable_ufunc(func, *args, **kwargs)\n    563             raise ValueError('unknown setting for dask array handling in '\n    564                              'apply_ufunc: {}'.format(dask))\n--&gt; 565     result_data = func(*input_data)\n    566 \n    567     if signature.num_outputs &gt; 1:\n\n~\\Anaconda3\\envs\\dataproc\\lib\\site-packages\\numpy\\lib\\function_base.py in __call__(self, *args, **kwargs)\n2737             vargs.extend([kwargs[_n] for _n in names])\n2738 \n-&gt; 2739         return self._vectorize_call(func=func, args=vargs)\n2740 \n2741     def _get_ufunc_and_otypes(self, func, args):\n\n~\\Anaconda3\\envs\\dataproc\\lib\\site-packages\\numpy\\lib\\function_base.py in _vectorize_call(self, func, args)\n2803         \"\"\"Vectorized call to `func` over positional `args`.\"\"\"\n2804         if self.signature is not None:\n-&gt; 2805             res = self._vectorize_call_with_signature(func, args)\n2806         elif not args:\n2807             res = func()\n\n~\\Anaconda3\\envs\\dataproc\\lib\\site-packages\\numpy\\lib\\function_base.py in _vectorize_call_with_signature(self, func, args)\n2867 \n2868             for output, result in zip(outputs, results):\n-&gt; 2869                 output[index] = result\n2870 \n2871         if outputs is None:\n\nValueError: setting an array element with a sequence.\n</code></pre>\n"}, {"tags": ["python", "linux", "zbar"], "comments": [{"owner": {"reputation": 1385, "user_id": 148680, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rbDbI.png?s=128&g=1", "display_name": "chb", "link": "https://stackoverflow.com/users/148680/chb"}, "edited": false, "score": 0, "creation_date": 1524088185, "post_id": 49909484, "comment_id": 86834990, "body": "Could you edit your post to include the error that <code>apt</code> produced?"}, {"owner": {"reputation": 185, "user_id": 3575229, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Z5K38.jpg?s=128&g=1", "display_name": "Sadiq", "link": "https://stackoverflow.com/users/3575229/sadiq"}, "edited": false, "score": 0, "creation_date": 1524088257, "post_id": 49909484, "comment_id": 86835026, "body": "What is the error that apt gives you?"}, {"owner": {"reputation": 4790, "user_id": 4491743, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aXCqO.jpg?s=128&g=1", "display_name": "Knud Larsen", "link": "https://stackoverflow.com/users/4491743/knud-larsen"}, "edited": false, "score": 0, "creation_date": 1524088322, "post_id": 49909484, "comment_id": 86835055, "body": "All Ubuntu <code>zbar</code> packages <a href=\"https://packages.ubuntu.com/search?keywords=zbar&amp;searchon=names\" rel=\"nofollow noreferrer\">packages.ubuntu.com/search?keywords=zbar&amp;searchon=names</a>"}], "owner": {"reputation": 1, "user_id": 9666643, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-azIowDm6H5o/AAAAAAAAAAI/AAAAAAAAI9M/LxwngKpSupo/photo.jpg?sz=128", "display_name": "Julian Hamelberg", "link": "https://stackoverflow.com/users/9666643/julian-hamelberg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1672, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1524092010, "creation_date": 1524087908, "last_edit_date": 1524092010, "question_id": 49909484, "link": "https://stackoverflow.com/questions/49909484/how-to-install-zbar-shared-libraries-for-linux", "title": "How to install zbar shared libraries for linux", "body": "<p>On the doc: <a href=\"https://pypi.org/project/pyzbar/\" rel=\"nofollow noreferrer\">https://pypi.org/project/pyzbar/</a>\nThe instructions are to use </p>\n\n<pre><code>sudo apt-get install libzbar0\n</code></pre>\n\n<p>which doesn't work. apt-get gives an error </p>\n\n<pre><code>sudo: apt-get: command not found\n</code></pre>\n\n<p>so I use yum</p>\n\n<p>libzbar0 doesn't exist, libzbar-dev doesn't exist, zbar doesn't exist.\nThe end goal is to do </p>\n\n<pre><code>pip install zbar \n</code></pre>\n\n<p>and I dont' get an error gcc exit status 1</p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "evaluation"], "comments": [{"owner": {"reputation": 979, "user_id": 9316046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d0367ead53cbd76bc1e5a1aee47034d?s=128&d=identicon&r=PG&f=1", "display_name": "Stev", "link": "https://stackoverflow.com/users/9316046/stev"}, "edited": false, "score": 0, "creation_date": 1524144076, "post_id": 49909480, "comment_id": 86860027, "body": "Try adding <code>scoring=&#39;roc_auc&#39;</code> to your <code>cros_val_score</code>. Are you seeing similar results to 0.98? If not, is your data ordered? Try running something like <code>cross_val_score(clf, data, target, scoring=&#39;roc_auc&#39;, cv=StratifiedKFold(n_splits=5, shuffle=True))</code> and tell us what you get."}, {"owner": {"reputation": 636, "user_id": 8279594, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/77f50720b70a9855d09727ca7b695098?s=128&d=identicon&r=PG&f=1", "display_name": "Elham", "link": "https://stackoverflow.com/users/8279594/elham"}, "reply_to_user": {"reputation": 979, "user_id": 9316046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d0367ead53cbd76bc1e5a1aee47034d?s=128&d=identicon&r=PG&f=1", "display_name": "Stev", "link": "https://stackoverflow.com/users/9316046/stev"}, "edited": false, "score": 0, "creation_date": 1524146672, "post_id": 49909480, "comment_id": 86861856, "body": "<code>score_auc = cross_val_score(classifier, X, y, cv=StratifiedKFold(n_splits=5, shuffle=True), scoring=&#39;roc_auc&#39;).mean()</code> results =95%"}], "owner": {"reputation": 636, "user_id": 8279594, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/77f50720b70a9855d09727ca7b695098?s=128&d=identicon&r=PG&f=1", "display_name": "Elham", "link": "https://stackoverflow.com/users/8279594/elham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 115, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1524087871, "creation_date": 1524087871, "question_id": 49909480, "link": "https://stackoverflow.com/questions/49909480/auc-and-cross-validation", "title": "AUC and Cross validation", "body": "<p>I have a question regarding AUC and cross validation accuracy.\nIs that possible to have higher accuracy for AUC than cross validation?\nMy cross validation accuracy with random forest estimator is 80% but the AUC is 98%. \n<a href=\"https://i.stack.imgur.com/5ciHO.png%60%60\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5ciHO.png%60%60\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "edited": false, "score": 0, "creation_date": 1524087895, "post_id": 49909438, "comment_id": 86834879, "body": "Your indentation is wrong, please fix it"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1524087969, "post_id": 49909438, "comment_id": 86834906, "body": "Why do you need the <code>count</code> variable? Isn&#39;t that what <code>for _ in range(5):</code> does?"}, {"owner": {"reputation": 127, "user_id": 7948561, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rqr9V.png?s=128&g=1", "display_name": "RandomCat", "link": "https://stackoverflow.com/users/7948561/randomcat"}, "edited": false, "score": 0, "creation_date": 1524088281, "post_id": 49909438, "comment_id": 86835040, "body": "Thanks, Alex, just fixed it. Barmar, initially I started without a count variable, but then when I got an exception, Python went into an infinite loop. So the count variable was my attempt to break it out of the loop, but it clearly didn&#39;t work."}], "answers": [{"tags": [], "owner": {"reputation": 146, "user_id": 9380604, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "ZZ ll", "link": "https://stackoverflow.com/users/9380604/zz-ll"}, "is_accepted": false, "score": 0, "last_activity_date": 1524088290, "creation_date": 1524088290, "answer_id": 49909557, "question_id": 49909438, "link": "https://stackoverflow.com/questions/49909438/writing-nested-loops-in-python-correctly/49909557#49909557", "title": "Writing nested loops in Python correctly", "body": "<p>Python provides no way to break directly from multiple loops.</p>\n\n<p>One solution is to embed your nested loops in a specific function and use return:</p>\n\n<pre><code>def nested_loop(...):\n  while next_cursor != 0:\n    for _ in range(5):\n       if ...:\n         return ...\n</code></pre>\n\n<p>An other solution is to raise a specific exception:</p>\n\n<pre><code>class CustomError(Exception): pass\n\ntry:\n  while next_cursor != 0:\n    for _ in range(5):\n      if ...:\n        raise CustomError\nexcept CustomError:\n   ...\n</code></pre>\n\n<p>A last solution is to use continue/break in a tricky way:</p>\n\n<pre><code>while next_cursor != 0:\n  for _ in range(5):\n    if ...:\n      break\n  else:\n    continue\n\n  # Next line is reached only if break is raised in the for loop\n  break\n</code></pre>\n"}], "owner": {"reputation": 127, "user_id": 7948561, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rqr9V.png?s=128&g=1", "display_name": "RandomCat", "link": "https://stackoverflow.com/users/7948561/randomcat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1524088482, "creation_date": 1524087659, "last_edit_date": 1524088482, "question_id": 49909438, "link": "https://stackoverflow.com/questions/49909438/writing-nested-loops-in-python-correctly", "title": "Writing nested loops in Python correctly", "body": "<p>I'm trying to write a loop that pulls people's Twitter followers. Because Twitter only returns 5K followers at a time, this loop should repeat for each user until it gets all the followers. And because sometimes Twitter returns errors randomly, it should also re-try a few times in case of failure.</p>\n\n<p>Here's my current attempt, which produces an infinite loop, and I don't know how to fix it. I'm pretty sure there's a simpler way to write it, I just don't know what it is.</p>\n\n<pre><code>from twitter import Twitter, OAuth, TwitterHTTPError, TwitterStream\nt = Twitter(auth=OAuth(access_token_key, access_token_secret, consumer_key, consumer_secret))\n\nnext_cursor=-1\nwhile next_cursor!=0:\n    for _ in range(5):\n        count=1\n        try:\n            twitter_pull=t.followers.ids(user_id=some_id,cursor=next_cursor)\n            followers_list=twitter_pull['ids']\n            next_cursor=twitter_pull['next_cursor']\n            if next_cursor!=0:\n                time.sleep(60)\n            break\n        except Exception:\n            print(\"Something went wrong: \", Exception)\n            count=count+1\n            if count&gt;=5:\n                break\n        time.sleep(120)\n</code></pre>\n\n<p>I know there are a bunch of questions on nested loops, but after reading the answers to them, I could not figure out how to solve my problem.</p>\n"}, {"tags": ["python", "security", "python-requests", "windows-authentication", "password-protection"], "comments": [{"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 2, "creation_date": 1524087609, "post_id": 49909381, "comment_id": 86834760, "body": "I don&#39;t know much about Windows programming but why can&#39;t you use Directory Services? It shouldn&#39;t matter what language you are in, if it is a service available to the system you should be able to access it. Is it part of Active Directory? There are various packages to interface with that."}, {"owner": {"reputation": 2231, "user_id": 7994074, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/quW1N.jpg?s=128&g=1", "display_name": "ParthS007", "link": "https://stackoverflow.com/users/7994074/parths007"}, "edited": false, "score": 0, "creation_date": 1524087865, "post_id": 49909381, "comment_id": 86834867, "body": "@Kevin K , Please refer to this <a href=\"https://stackoverflow.com/questions/7014953/i-need-to-securely-store-a-username-and-password-in-python-what-are-my-options?noredirect=1&amp;lq=1\" title=\"i need to securely store a username and password in python what are my options\">stackoverflow.com/questions/7014953/&hellip;</a>  I hope this helps."}], "answers": [{"comments": [{"owner": {"reputation": 1084, "user_id": 6078026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2828ee6ae5d2f5fd4c9a3b4a89abfc43?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin K.", "link": "https://stackoverflow.com/users/6078026/kevin-k"}, "edited": false, "score": 0, "creation_date": 1524088073, "post_id": 49909463, "comment_id": 86834943, "body": "This application will run as a batch process, so there won&#39;t be any opportunity for a user to input their credentials."}], "tags": [], "owner": {"reputation": 28245, "user_id": 1547004, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5255289d0269d550a4e80e6bf6b0f590?s=128&d=identicon&r=PG", "display_name": "Brendan Abel", "link": "https://stackoverflow.com/users/1547004/brendan-abel"}, "is_accepted": false, "score": 2, "last_activity_date": 1524087800, "creation_date": 1524087800, "answer_id": 49909463, "question_id": 49909381, "link": "https://stackoverflow.com/questions/49909381/using-username-and-password-safely-in-python-code/49909463#49909463", "title": "Using username and password safely in Python code", "body": "<p>You could just not store the password at all and require the user to provide the password at runtime</p>\n\n<pre><code>import getpass\nuser = getpass.getuser()\npassword = getpass.getpass()\n</code></pre>\n\n<p>Otherwise, you could do something similar to git and just have the user store their password in plaintext in a config file in their home directory that you then read at runtime.</p>\n"}, {"tags": [], "owner": {"reputation": 1084, "user_id": 6078026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2828ee6ae5d2f5fd4c9a3b4a89abfc43?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin K.", "link": "https://stackoverflow.com/users/6078026/kevin-k"}, "is_accepted": true, "score": 1, "last_activity_date": 1552488857, "creation_date": 1552488857, "answer_id": 55144861, "question_id": 49909381, "link": "https://stackoverflow.com/questions/49909381/using-username-and-password-safely-in-python-code/55144861#55144861", "title": "Using username and password safely in Python code", "body": "<p>I know I asked this question a while ago, but I found a better solution to the NTLM/Windows authentication. I used the <code>requests_negotiate_sspi</code> library to avoid any passwords:</p>\n\n<pre><code>from requests_negotiate_sspi import HttpNegotiateAuth\nauth = HttpNegotiateAuth()\n\ncontent = requests.post(call_string, json=parameters, auth=auth)\n</code></pre>\n"}], "owner": {"reputation": 1084, "user_id": 6078026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2828ee6ae5d2f5fd4c9a3b4a89abfc43?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin K.", "link": "https://stackoverflow.com/users/6078026/kevin-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2709, "favorite_count": 1, "accepted_answer_id": 55144861, "answer_count": 2, "score": 1, "last_activity_date": 1552488857, "creation_date": 1524087293, "last_edit_date": 1524087992, "question_id": 49909381, "link": "https://stackoverflow.com/questions/49909381/using-username-and-password-safely-in-python-code", "title": "Using username and password safely in Python code", "body": "<p>I'm using the Python requests library to make a call to an API that requires Windows Authentication. In C# I have always used the Directory Services, which has allowed me to avoid putting passwords in any of my code or configurations. From what I have found online, it seems that my only option in Python is to have a password somewhere. I have a service account that I will use, but I need to store the password securely. What is the best way to securely store and retrieve a service account password in Python without hard coding plain text?</p>\n\n<p>The code that I am currently using is below. I have the username and password stored in plain text in my configuration:</p>\n\n<pre><code>auth = HttpNtlmAuth(\n    config.ServiceAccount[\"Username\"], \n    config.ServiceAccount[\"Password\"]\n    )\n\ncontent = requests.post(call_string, json=parameters, auth=auth)\n</code></pre>\n\n<p>Edit: I should mention that this will not be a user-facing application. It will run as a batch job. So there will not be any way for a user to enter the username/password while running the application.</p>\n"}, {"tags": ["python", "flask", "celery"], "comments": [{"owner": {"reputation": 5728, "user_id": 7907591, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/0vpof.jpg?s=128&g=1", "display_name": "Morse", "link": "https://stackoverflow.com/users/7907591/morse"}, "edited": false, "score": 0, "creation_date": 1524087889, "post_id": 49909363, "comment_id": 86834875, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/448271/what-is-init-py-for\">What is __init__.py for?</a>"}, {"owner": {"reputation": 1491, "user_id": 1601716, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3916fe472c8c493c0283cc2b716be4a1?s=128&d=identicon&r=PG", "display_name": "user1601716", "link": "https://stackoverflow.com/users/1601716/user1601716"}, "reply_to_user": {"reputation": 5728, "user_id": 7907591, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/0vpof.jpg?s=128&g=1", "display_name": "Morse", "link": "https://stackoverflow.com/users/7907591/morse"}, "edited": false, "score": 0, "creation_date": 1524096718, "post_id": 49909363, "comment_id": 86837420, "body": "I believe I am using unit correctly and have used imports similar to this in the past.  I am guessing I have something out of order, a circular import or import dependency problem.  I had a typo in my original code and have updated."}], "answers": [{"tags": [], "owner": {"reputation": 2951, "user_id": 9335964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/601ca67d53004283e6ee4f893597cfda?s=128&d=identicon&r=PG&f=1", "display_name": "Joost", "link": "https://stackoverflow.com/users/9335964/joost"}, "is_accepted": true, "score": 2, "last_activity_date": 1524097228, "last_edit_date": 1524097228, "creation_date": 1524088229, "answer_id": 49909548, "question_id": 49909363, "link": "https://stackoverflow.com/questions/49909363/variable-defined-in-init-py-can-not-be-imported/49909548#49909548", "title": "variable defined in __init__.py can not be imported", "body": "<p>In your <code>__init__.py</code> you only have <code>cel</code>. You don't have an object called <code>celery</code> in your <code>__init__</code> file, so it can't be imported to some other file. You can try <code>from app import cel</code>.\u02db</p>\n\n<p>EDIT:</p>\n\n<p>in <code>__init__</code> you <code>from .ctasks import subtaskcaller, make_celery</code></p>\n\n<p>but in <code>ctasks</code> you import <code>cel</code> from app (which doesn't exist yet at that point, only Flask, request, and SocketIO exist at that point in time). </p>\n\n<p>So you need to put your <code>@cel</code> decorated functions in yet another script, which you can import all the way at the bottom of <code>__init__</code></p>\n"}], "owner": {"reputation": 1491, "user_id": 1601716, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3916fe472c8c493c0283cc2b716be4a1?s=128&d=identicon&r=PG", "display_name": "user1601716", "link": "https://stackoverflow.com/users/1601716/user1601716"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 606, "favorite_count": 0, "accepted_answer_id": 49909548, "answer_count": 1, "score": 2, "last_activity_date": 1524119755, "creation_date": 1524087191, "last_edit_date": 1524096424, "question_id": 49909363, "link": "https://stackoverflow.com/questions/49909363/variable-defined-in-init-py-can-not-be-imported", "title": "variable defined in __init__.py can not be imported", "body": "<p>I am trying to follow the instructions in <a href=\"http://flask.pocoo.org/docs/0.12/patterns/celery/\" rel=\"nofollow noreferrer\">http://flask.pocoo.org/docs/0.12/patterns/celery/</a> so I can perform flask/socketIO  operations in celery tasks.  My directory structure is a bit different however and I'm not having any luck with imports.</p>\n\n<p>My directory structure is as follows:</p>\n\n<pre><code>\u251c\u2500\u2500 app\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 __init__.py\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 __pycache__\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 auth.py\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 ctasks.py\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 helper.py\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 saml.py\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 socks.py\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 templates\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 threads.py\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 views.py\n\u251c\u2500\u2500 app.py\n\u251c\u2500\u2500 config.py\n\u251c\u2500\u2500 requirements.txt\n\u2514\u2500\u2500 saml\n \u00a0\u00a0 \u251c\u2500\u2500 dev\n \u00a0\u00a0 \u2514\u2500\u2500 prod\n</code></pre>\n\n<p>I call the app from <code>app.py</code></p>\n\n<pre><code>from app import socketio, app\n\nif __name__ == '__main__':\n    socketio.run(app, debug=True, port=443, ssl_context='adhoc')\n</code></pre>\n\n<p><code>__init__.py</code></p>\n\n<pre><code>from flask import Flask, request\nfrom flask_socketio import SocketIO\nfrom .ctasks import subtaskcaller, make_celery\nfrom .helper import wait_to_finish\n\nasync_mode = None\n\napp = Flask(__name__)\napp.config.from_object('config')\nsocketio = SocketIO(app, async_mode=async_mode)\ncel = make_celery(app)\n\nfrom .auth import SamlManager\nsaml_manager = SamlManager()\nsaml_manager.init_app(app) \nfrom app import views, socks, saml, helper, ctasks\n</code></pre>\n\n<p><code>ctasks.py</code></p>\n\n<pre><code>from celery import Celery\nfrom config import *\nfrom .helper import wait_to_finish, emitter\nimport time\nfrom app import cel\n\n\ndef make_celery(app):\n    c = Celery(app.import_name, backend=CELERY_RESULT_BACKEND, broker=CELERY_BROKER_URL)\n    c.conf.update(app.config)\n    taskbase = c.Task\n\n    class ContextTask(taskbase):\n        abstract = True\n\n        def __call__(self, *args, **kwargs):\n            with app.app_context():\n                return taskbase.__call__(self, *args, **kwargs)\n\n    c.Task = ContextTask\n    return c\n\n@cel.task(name='tasks.tester', serializer='pickle')\ndef tester():\n    emitter('emit from subsubtask')\n    for i in range(1, 50):\n        time.sleep(1)\n        print('test {0}'.format(i))\n    x = True\n    return x\n\n@cel.task(name='task.subtaskcaller', serializer='pickle')\ndef subtaskcaller():\n    emitter('emit from subtask')\n    finished = tester.delay()\n    wait_to_finish(finished)\n    return finished\n</code></pre>\n\n<p>I am getting an error when trying to import cel from app  in <code>ctasks.py</code>:</p>\n\n<p><code>ImportError: cannot import name 'cel'</code></p>\n"}, {"tags": ["python", "while-loop"], "comments": [{"owner": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "edited": false, "score": 0, "creation_date": 1524087340, "post_id": 49909357, "comment_id": 86834650, "body": "You can&#39;t. You have to store the user input in a variable. That&#39;s what variables are for."}, {"owner": {"reputation": 2231, "user_id": 7994074, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/quW1N.jpg?s=128&g=1", "display_name": "ParthS007", "link": "https://stackoverflow.com/users/7994074/parths007"}, "edited": false, "score": 0, "creation_date": 1524087347, "post_id": 49909357, "comment_id": 86834655, "body": "@Dave Can you please be more clear what exactly you want to ask. It will be more helpful for others who are willing to answer."}, {"owner": {"reputation": 849, "user_id": 9362240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8648ec32c74cc7d21a0927fb08c8b76?s=128&d=identicon&r=PG&f=1", "display_name": "Rak2018", "link": "https://stackoverflow.com/users/9362240/rak2018"}, "edited": false, "score": 0, "creation_date": 1524087460, "post_id": 49909357, "comment_id": 86834700, "body": "Can you pls give an example of what u need..as it is not clear from your post"}, {"owner": {"reputation": 5, "user_id": 9638499, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Dave", "link": "https://stackoverflow.com/users/9638499/dave"}, "edited": false, "score": 0, "creation_date": 1524087517, "post_id": 49909357, "comment_id": 86834722, "body": "I need to sum an unknown number of inputs ending when the input value is 0.  Using a while loop to process the inputs as long as they are not 0 is the best way I can think of to accomplish that.  The problem is that I now have to sum those inputs.  Example: input 5 7 6 0 output 18"}], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 9638499, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Dave", "link": "https://stackoverflow.com/users/9638499/dave"}, "edited": false, "score": 0, "creation_date": 1524087653, "post_id": 49909395, "comment_id": 86834785, "body": "Thank you!  That is exactly what I was looking for.  I am new at this and didn&#39;t realize I could set the variable before the loop and have it still process."}], "tags": [], "owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "is_accepted": true, "score": 2, "last_activity_date": 1524087371, "creation_date": 1524087371, "answer_id": 49909395, "question_id": 49909357, "link": "https://stackoverflow.com/questions/49909357/how-to-use-unassigned-input-from-while-loop-to-add-to-a-value/49909395#49909395", "title": "How to use unassigned input from while loop to add to a value", "body": "<pre><code>total = 0\nwhile True:\n    x = int(input())\n    if x == 0:\n        break\n    total += x\nprint(total)\n</code></pre>\n\n<p>I prefer the above because it has no repetition, but sometimes people do something like this instead:</p>\n\n<pre><code>total = 0\nx = int(input())\nwhile x != 0:\n    total += x\n    x = int(input())\nprint(total)\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 9638499, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Dave", "link": "https://stackoverflow.com/users/9638499/dave"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 25, "favorite_count": 0, "accepted_answer_id": 49909395, "answer_count": 1, "score": -1, "last_activity_date": 1524087478, "creation_date": 1524087139, "last_edit_date": 1524087478, "question_id": 49909357, "link": "https://stackoverflow.com/questions/49909357/how-to-use-unassigned-input-from-while-loop-to-add-to-a-value", "title": "How to use unassigned input from while loop to add to a value", "body": "<pre><code>total = 0\nwhile int(input()) != 0:\n  total += ??input??\nprint(total)\n</code></pre>\n\n<p>How do I pull the while input into the sum variable?</p>\n\n<p>I can't find anything like this existing but don't know if that is because it is an unasked question or if it just incredibly foolish.</p>\n\n<p>I am trying to add an unknown number of inputs ending when the input is 0.\nAny help or pointing in the right direction would be helpful.</p>\n"}, {"tags": ["python", "django", "rest", "django-rest-framework"], "comments": [{"owner": {"reputation": 341, "user_id": 2800865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e4166c3049508ec9e5ae242e040ea1a?s=128&d=identicon&r=PG", "display_name": "sam", "link": "https://stackoverflow.com/users/2800865/sam"}, "edited": false, "score": 0, "creation_date": 1524086802, "post_id": 49909224, "comment_id": 86834401, "body": "If you pass in <code>HTTP_LICENSE</code> in the <code>self.client.get</code> call, does it perform as you like?"}, {"owner": {"reputation": 139, "user_id": 6527211, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WsEvu.jpg?s=128&g=1", "display_name": "NoiK", "link": "https://stackoverflow.com/users/6527211/noik"}, "reply_to_user": {"reputation": 341, "user_id": 2800865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e4166c3049508ec9e5ae242e040ea1a?s=128&d=identicon&r=PG", "display_name": "sam", "link": "https://stackoverflow.com/users/2800865/sam"}, "edited": false, "score": 0, "creation_date": 1524134943, "post_id": 49909224, "comment_id": 86853610, "body": "@sam If I pass HTTP_LICENSE as a header in self.client.get, it can be retrieve with: request.META[&#39;headers&#39;][&#39;HTTP_LICENSE&#39;], it is not the same behavior as with consumer request :(."}, {"owner": {"reputation": 139, "user_id": 6527211, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WsEvu.jpg?s=128&g=1", "display_name": "NoiK", "link": "https://stackoverflow.com/users/6527211/noik"}, "reply_to_user": {"reputation": 341, "user_id": 2800865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e4166c3049508ec9e5ae242e040ea1a?s=128&d=identicon&r=PG", "display_name": "sam", "link": "https://stackoverflow.com/users/2800865/sam"}, "edited": false, "score": 1, "creation_date": 1524137536, "post_id": 49909224, "comment_id": 86855462, "body": "@sam I tried as you said: self.client.get(self.url, params=params, HTTP_LICENSE=&#39;12345&#39;) and it worked. Thank you!"}], "answers": [{"tags": [], "owner": {"reputation": 71821, "user_id": 57191, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1186a46e65dbea4c8900d524c613f926?s=128&d=identicon&r=PG", "display_name": "cwallenpoole", "link": "https://stackoverflow.com/users/57191/cwallenpoole"}, "is_accepted": true, "score": 5, "last_activity_date": 1524152189, "last_edit_date": 1524152189, "creation_date": 1524151879, "answer_id": 49924911, "question_id": 49909224, "link": "https://stackoverflow.com/questions/49909224/django-rest-framework-custom-headers-are-different-in-client-than-unittests/49924911#49924911", "title": "Django rest framework: custom headers are different in client than unittests", "body": "<p><strong>TL;DR</strong> \u2014 if you want something to show up in META, make it a <code>kwarg</code>. The <code>client.get</code> method is a different signature from <code>requests.get</code>.</p>\n\n<hr>\n\n<p>This is because the kwargs of <code>self.client.get</code> map <em>directly</em> to HTTP attributes.</p>\n\n<p>Take a <a href=\"https://docs.djangoproject.com/en/2.0/_modules/django/test/client/#RequestFactory\" rel=\"nofollow noreferrer\">look at the source</a>. You'll notice the stack is:</p>\n\n<ol>\n<li><code>get</code> </li>\n<li><code>generic</code></li>\n<li><code>request</code></li>\n<li><code>_base_environ</code></li>\n</ol>\n\n<p>In that process, the <code>kwargs</code> are carried to <code>_base_environ</code> with very few alterations. They're then merged into a dictionary that includes all of the basic headers you'd expect:</p>\n\n<pre><code>    # This is a minimal valid WSGI environ dictionary, plus:\n    # - HTTP_COOKIE: for cookie support,\n    # - REMOTE_ADDR: often useful, see #8551.\n    # See http://www.python.org/dev/peps/pep-3333/#environ-variables\n    environ = {\n        'HTTP_COOKIE': self.cookies.output(header='', sep='; '),\n        'PATH_INFO': '/',\n        'REMOTE_ADDR': '127.0.0.1',\n        'REQUEST_METHOD': 'GET',\n        'SCRIPT_NAME': '',\n        'SERVER_NAME': 'testserver',\n        'SERVER_PORT': '80',\n        'SERVER_PROTOCOL': 'HTTP/1.1',\n        'wsgi.version': (1, 0),\n        'wsgi.url_scheme': 'http',\n        'wsgi.input': FakePayload(b''),\n        'wsgi.errors': self.errors,\n        'wsgi.multiprocess': True,\n        'wsgi.multithread': False,\n        'wsgi.run_once': False,\n    }\n    environ.update(self.defaults)\n    environ.update(request)\n    return environ\n</code></pre>\n\n<p>The above is then passed into a <code>WSGIRequest</code> object in the <code>request</code> method. <a href=\"https://github.com/django/django/blob/c1c163b42717ed5e051098ebf0e2f5c77810f20e/django/core/handlers/wsgi.py#L66\" rel=\"nofollow noreferrer\">That class then takes the provided <code>environ</code> dict and assigns it to the META property:</a></p>\n\n<pre><code>class WSGIRequest(HttpRequest):\n    def __init__(self, environ):\n        script_name = get_script_name(environ)\n        # If PATH_INFO is empty (e.g. accessing the SCRIPT_NAME URL without a\n        # trailing slash), operate as if '/' was requested.\n        path_info = get_path_info(environ) or '/'\n\n        ##############################\n        ##                          ##\n        ## This is the line you're  ##\n        ##       looking for.       ##\n        ##                          ##\n        ##############################\n        self.environ = environ\n        self.path_info = path_info\n</code></pre>\n"}], "owner": {"reputation": 139, "user_id": 6527211, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WsEvu.jpg?s=128&g=1", "display_name": "NoiK", "link": "https://stackoverflow.com/users/6527211/noik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1072, "favorite_count": 1, "accepted_answer_id": 49924911, "answer_count": 1, "score": 4, "last_activity_date": 1524152189, "creation_date": 1524086645, "question_id": 49909224, "link": "https://stackoverflow.com/questions/49909224/django-rest-framework-custom-headers-are-different-in-client-than-unittests", "title": "Django rest framework: custom headers are different in client than unittests", "body": "<p>I have a Django Rest API and then, separately, a client that consume this API.</p>\n\n<p>I pass a custom header using requests in the client:</p>\n\n<pre><code>r = requests.get(url, params=params, headers={'license': '12345'})\n</code></pre>\n\n<p>Then in API, in my custom permission, I get the header like:</p>\n\n<pre><code>app_license = request.META['HTTP_LICENSE']\n</code></pre>\n\n<p>I know django <a href=\"https://docs.djangoproject.com/en/2.0/ref/request-response/#django.http.HttpRequest.META\" rel=\"nofollow noreferrer\">rewrites the custom headers</a> for security reasons, so it works fine.</p>\n\n<p>My problem is when I write the unittests in Django rest API:</p>\n\n<pre><code>response = self.client.get(self.url, params=params, headers={'license': '12345'})\n</code></pre>\n\n<p>Then it raise:</p>\n\n<pre><code>KeyError: 'HTTP_LICENSE'\n</code></pre>\n\n<p>But if I change the code like this, the test passes without problem but the consumer doesn't work:</p>\n\n<pre><code>request.META['headers']['license']\n</code></pre>\n\n<p>I can check if there is 'headers' key or not but I don't want to change the code only to pass the unittest, it must be some way to write a unittest that matches reality, right?</p>\n\n<p>I tried to use:</p>\n\n<pre><code>from django.test import TestCase\n</code></pre>\n\n<p>And:</p>\n\n<pre><code>from rest_framework.test import APITestCase\n</code></pre>\n\n<p>Both with same result. There is any solution? Thank you!</p>\n"}, {"tags": ["python", "arrays", "numpy"], "comments": [{"owner": {"reputation": 2902, "user_id": 9222967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1fea8d50fa7e8f88451b16ac164fb30?s=128&d=identicon&r=PG&f=1", "display_name": "the_cheff", "link": "https://stackoverflow.com/users/9222967/the-cheff"}, "edited": false, "score": 0, "creation_date": 1524086842, "post_id": 49909210, "comment_id": 86834428, "body": "You can use the the optional <code>where</code> argument for exactly this <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.add.html\" rel=\"nofollow noreferrer\">np.add</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9415015"}, "reply_to_user": {"reputation": 2902, "user_id": 9222967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1fea8d50fa7e8f88451b16ac164fb30?s=128&d=identicon&r=PG&f=1", "display_name": "the_cheff", "link": "https://stackoverflow.com/users/9222967/the-cheff"}, "edited": false, "score": 0, "creation_date": 1524087344, "post_id": 49909210, "comment_id": 86834654, "body": "@the_cheff How would you set up the arguments if you were to use <code>where</code>?"}, {"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 0, "creation_date": 1524087355, "post_id": 49909210, "comment_id": 86834659, "body": "<code>x[idx] += y[idx]</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 3236, "user_id": 6876009, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/201968908078a1f1ea776c886d93631a?s=128&d=identicon&r=PG&f=1", "display_name": "f5r5e5d", "link": "https://stackoverflow.com/users/6876009/f5r5e5d"}, "is_accepted": true, "score": 0, "last_activity_date": 1524090432, "creation_date": 1524090432, "answer_id": 49909933, "question_id": 49909210, "link": "https://stackoverflow.com/questions/49909210/adding-a-numpy-array-with-another-numpy-array-only-at-selected-indeces/49909933#49909933", "title": "Adding a numpy array with another numpy array only at selected indeces", "body": "<p>broadcasting takes into acount both sides of the assignment</p>\n\n<pre><code>x = np.array([1., 2., 3., 4., 5.])\ny = np.array([1., 1., 1., 1., 1.])\nidx = np.array([1, 3])\n\nx[idx] += y[idx]\n\nx\nOut[3]: array([1., 3., 3., 5., 5.])\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9415015"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 49909933, "answer_count": 1, "score": 0, "last_activity_date": 1524090432, "creation_date": 1524086571, "question_id": 49909210, "link": "https://stackoverflow.com/questions/49909210/adding-a-numpy-array-with-another-numpy-array-only-at-selected-indeces", "title": "Adding a numpy array with another numpy array only at selected indeces", "body": "<p>I would like to add certain elements in an array to another array selectively using indeces. Is this achievable without using an if statement? For instance:</p>\n\n<pre><code>import numpy as np\n\nx = np.array([1., 2., 3., 4., 5.])\ny = np.array([1., 1., 1., 1., 1.])\nidx = np.array([1, 3])\n\nres = np.add(x,y[idx])\n\nprint res\n</code></pre>\n\n<p>How would you get a desired result of <code>[1., 3., 3., 5., 5.]</code> without using an if statement? </p>\n"}, {"tags": ["python", "pandas", "dictionary"], "comments": [{"owner": {"reputation": 5728, "user_id": 7907591, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/0vpof.jpg?s=128&g=1", "display_name": "Morse", "link": "https://stackoverflow.com/users/7907591/morse"}, "edited": false, "score": 0, "creation_date": 1524086984, "post_id": 49909176, "comment_id": 86834507, "body": "you can use <code>str.__contains__(&#39;BRONX&#39;)</code> or <code>regex expressions</code>"}, {"owner": {"reputation": 8541, "user_id": 8366499, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/z9t89.jpg?s=128&g=1", "display_name": "divibisan", "link": "https://stackoverflow.com/users/8366499/divibisan"}, "edited": false, "score": 0, "creation_date": 1524087883, "post_id": 49909176, "comment_id": 86834872, "body": "What you&#39;re looking for are regular expressions. Look at the <code>re</code> module in python (included in all base installs) and use <a href=\"https://regex101.com/\" rel=\"nofollow noreferrer\">regex101.com</a> to play around with your expression. Welcome to StackOverflow!"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 9666496, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Alex Laval", "link": "https://stackoverflow.com/users/9666496/alex-laval"}, "edited": false, "score": 0, "creation_date": 1524087585, "post_id": 49909340, "comment_id": 86834747, "body": "Thanks! However, if the number of boroughs were to be longer (say 50), should I just create a function like Victor Valente suggested?"}, {"owner": {"reputation": 62908, "user_id": 567620, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/g8HIM.jpg?s=128&g=1", "display_name": "ely", "link": "https://stackoverflow.com/users/567620/ely"}, "reply_to_user": {"reputation": 23, "user_id": 9666496, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Alex Laval", "link": "https://stackoverflow.com/users/9666496/alex-laval"}, "edited": false, "score": 0, "creation_date": 1524087683, "post_id": 49909340, "comment_id": 86834796, "body": "Rather than a function, I would create a <code>dict</code>, and then change the enumerated 5 assignments into a for-loop over the <code>dict</code> that makes the assignments. I would see zero reason to do this with a mapped function unless the DataFrame is gigantic or the set of unique boroughs is a gigantic fraction of the length of DataFrame."}, {"owner": {"reputation": 23, "user_id": 9666496, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Alex Laval", "link": "https://stackoverflow.com/users/9666496/alex-laval"}, "edited": false, "score": 0, "creation_date": 1524089650, "post_id": 49909340, "comment_id": 86835516, "body": "I get this error: KeyError: &#39;[0 0 0 ... 0 0 0] not in index&#39;"}, {"owner": {"reputation": 62908, "user_id": 567620, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/g8HIM.jpg?s=128&g=1", "display_name": "ely", "link": "https://stackoverflow.com/users/567620/ely"}, "reply_to_user": {"reputation": 23, "user_id": 9666496, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Alex Laval", "link": "https://stackoverflow.com/users/9666496/alex-laval"}, "edited": false, "score": 0, "creation_date": 1524089794, "post_id": 49909340, "comment_id": 86835565, "body": "@AlexLaval I would have to see your full code to know why. The code as-is from my answer does not produce that error. Likely you are using the wrong variable as if it is a <code>dict</code> key somewhere."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1524090399, "post_id": 49909340, "comment_id": 86835773, "body": "I think the second version of the code in this answer is what you&#39;d almost always want, whether for the 5 boroughs of Manhattan or all 62 counties of New York or some not-even-static set of data."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1524090468, "post_id": 49909340, "comment_id": 86835788, "body": "Also, I like the way you raised the performance cost of repeated vectorizing then explained why it&#39;s probably not important\u2014if this really is a bottleneck in someone&#39;s code, that probably is something they want to take a quick look at, so it&#39;s worth knowing about, but it&#39;s rarely going to be relevant."}, {"owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "edited": false, "score": 0, "creation_date": 1524092049, "post_id": 49909340, "comment_id": 86836230, "body": "The second solution here should be the accepted answer, given OP already has a <code>dict</code>."}, {"owner": {"reputation": 23, "user_id": 9666496, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Alex Laval", "link": "https://stackoverflow.com/users/9666496/alex-laval"}, "edited": false, "score": 0, "creation_date": 1524092094, "post_id": 49909340, "comment_id": 86836242, "body": "@ely can I send you the code? Even with the second answer I get errors"}, {"owner": {"reputation": 62908, "user_id": 567620, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/g8HIM.jpg?s=128&g=1", "display_name": "ely", "link": "https://stackoverflow.com/users/567620/ely"}, "reply_to_user": {"reputation": 23, "user_id": 9666496, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Alex Laval", "link": "https://stackoverflow.com/users/9666496/alex-laval"}, "edited": false, "score": 0, "creation_date": 1524139574, "post_id": 49909340, "comment_id": 86856877, "body": "@AlexLaval Just add it as an update to your question and notify me when you do. Please make sure to add all the relevant code, not just the specific lines that implement the second approach, because the bug might be in a variable assignment elsewhere, etc. And include whatever error traceback you are seeing."}], "tags": [], "owner": {"reputation": 62908, "user_id": 567620, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/g8HIM.jpg?s=128&g=1", "display_name": "ely", "link": "https://stackoverflow.com/users/567620/ely"}, "is_accepted": true, "score": 4, "last_activity_date": 1524087953, "last_edit_date": 1524087953, "creation_date": 1524087084, "answer_id": 49909340, "question_id": 49909176, "link": "https://stackoverflow.com/questions/49909176/creating-dictionary-keys-with-substrings-from-another-column/49909340#49909340", "title": "Creating dictionary keys with substrings from another column", "body": "<p>Since there is a small set of borough names for which to assign the integer codes, it's perfectly acceptable to do it as a series of explicit logical index assignments, such as with some example data below.</p>\n\n<p>Specifically, there is no need in this case to try to encapsulate the borough-to-code mapping into a <code>dict</code> or a helper function or any fancier <code>apply</code> or <code>map</code> operation on the DataFrame. </p>\n\n<p>Just a set of 5 boring, direct logical assignments.</p>\n\n<pre><code>In [13]: df = pandas.DataFrame({\n    'Borough': [\"Manhattan\", \"Brooklyn\", \"Bronx\", \"07 Bronx\", \n                \"109 Staten Island\", \"03 Brooklyn\", \"04 Queens\"], \n    'Value':[1, 2, 3, 4, 5, 6, 7]\n})\n\nIn [14]: df\nOut[14]:\n             Borough  Value\n0          Manhattan      1\n1           Brooklyn      2\n2              Bronx      3\n3           07 Bronx      4\n4  109 Staten Island      5\n5        03 Brooklyn      6\n6          04 Queens      7\n\nIn [15]: df['Borough_num'] = 6  # everything defaults to the 'other' case\n\nIn [16]: df.loc[df.Borough.str.contains(\"Manhattan\"), 'Borough_num'] = 1\n\nIn [17]: df.loc[df.Borough.str.contains(\"Brooklyn\"), 'Borough_num'] = 2\n\nIn [18]: df.loc[df.Borough.str.contains(\"Queens\"), 'Borough_num'] = 3\n\nIn [19]: df.loc[df.Borough.str.contains(\"Staten Island\"), 'Borough_num'] = 4\n\nIn [20]: df.loc[df.Borough.str.contains(\"Bronx\"), 'Borough_num'] = 5\n\nIn [21]: df\nOut[21]: \n             Borough  Value  Borough_num\n0          Manhattan      1            1\n1           Brooklyn      2            2\n2              Bronx      3            5\n3           07 Bronx      4            5\n4  109 Staten Island      5            4\n5        03 Brooklyn      6            2\n6          04 Queens      7            3\n</code></pre>\n\n<p>If you want to encapsulate the borough-to-code mapping for whatever reason, you can do it with a simple <code>dict</code> followed by a loop:</p>\n\n<pre><code>In [30]: borough_code = {'Manhattan': 1, 'Brooklyn': 2, 'Queens': 3,\n                         'Staten Island': 4, 'Bronx': 5}\n\nIn [31]: for borough, code in borough_code.items():\n    ...:     df.loc[df.Borough.str.contains(borough), 'Borough_num'] = code\n</code></pre>\n\n<p>Unless the DataFrame is gigantic, the repeated vectorized calculation of <code>str.contains</code> will be indistinguishable from mapping a function across the column, but will be much easier to understand.</p>\n"}, {"comments": [{"owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "edited": false, "score": 1, "creation_date": 1524087991, "post_id": 49909348, "comment_id": 86834917, "body": "Not me, but that&#39;s only because I have no votes left today. This is extremely inefficient and not scalable."}, {"owner": {"reputation": 23, "user_id": 9666496, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Alex Laval", "link": "https://stackoverflow.com/users/9666496/alex-laval"}, "edited": false, "score": 0, "creation_date": 1524088151, "post_id": 49909348, "comment_id": 86834969, "body": "Hey Victor, I&#39;m not sure. I just created a profile to ask this question, so I have no authority to vote yet. Thank you for the advice though!"}, {"owner": {"reputation": 62908, "user_id": 567620, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/g8HIM.jpg?s=128&g=1", "display_name": "ely", "link": "https://stackoverflow.com/users/567620/ely"}, "edited": false, "score": 0, "creation_date": 1524088227, "post_id": 49909348, "comment_id": 86835015, "body": "I also didn&#39;t downvote. While I believe setting up a helper function to use via <code>apply</code> is overkill for this problem, I don&#39;t believe that should warrant any downvotes. Don&#39;t take it personally. Many questions involving tools like Pandas suffer from the problem of &quot;the fights are so bitter because the stakes are so low.&quot; There&#39;s a lot of punitive downvoting just based on mere preference, or totally spurious performance criteria that have zilch to do with the question at hand. Your answer is perfectly normal and fine in 99% of cases."}, {"owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "reply_to_user": {"reputation": 62908, "user_id": 567620, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/g8HIM.jpg?s=128&g=1", "display_name": "ely", "link": "https://stackoverflow.com/users/567620/ely"}, "edited": false, "score": 0, "creation_date": 1524088464, "post_id": 49909348, "comment_id": 86835104, "body": "@ely, I respect your opinion, but this is more about <code>python</code>, in fact more to do with <i>data structure</i> choice. Maintaining a nested <code>if</code> / <code>else</code> construct, even for ~5 items (as in here) isn&#39;t <i>ideal</i> when a dictionary solution is possible. Nothing to do with <code>pandas</code> in my opinion."}, {"owner": {"reputation": 62908, "user_id": 567620, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/g8HIM.jpg?s=128&g=1", "display_name": "ely", "link": "https://stackoverflow.com/users/567620/ely"}, "reply_to_user": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "edited": false, "score": 0, "creation_date": 1524088915, "post_id": 49909348, "comment_id": 86835265, "body": "@jpp The question is solely about pandas syntax, and certainly not about data structure code golf. It&#39;s just a boring business logic question about integer coding of data. These questions pop up all the time and almost never have any connection to efficient data structure choices or other generalizations."}, {"owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "reply_to_user": {"reputation": 62908, "user_id": 567620, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/g8HIM.jpg?s=128&g=1", "display_name": "ely", "link": "https://stackoverflow.com/users/567620/ely"}, "edited": false, "score": 0, "creation_date": 1524089276, "post_id": 49909348, "comment_id": 86835382, "body": "@ely, Well, IMHO that&#39;s a mistake. <b>Data structure choice</b> is absolutely critical. It&#39;s not something you should brush over as irrelevant because the post is tagged <code>[pandas]</code>; in fact, if you use <code>pandas</code> you should be <i>even more cognisant</i> of underlying data structures (since they are often hidden away)."}, {"owner": {"reputation": 62908, "user_id": 567620, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/g8HIM.jpg?s=128&g=1", "display_name": "ely", "link": "https://stackoverflow.com/users/567620/ely"}, "reply_to_user": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "edited": false, "score": 0, "creation_date": 1524089517, "post_id": 49909348, "comment_id": 86835462, "body": "@jpp The important thing is that it doesn&#39;t matter what is your opinion or my opinion. Data structure concerns just are inappropriate for a question like this as a pure matter of fact. The question is about a straightforward business need (a certain application logic). Any extra constraints or structure that <i>you</i> put onto it (like a concern about data structures or elegance or code reuse, etc.) are <i>yours</i>. I respect your passion for the topic, but it saddens me when it&#39;s turned into a punitive tactic to downvote other answers or to try to lobby for your own approaches."}, {"owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "reply_to_user": {"reputation": 62908, "user_id": 567620, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/g8HIM.jpg?s=128&g=1", "display_name": "ely", "link": "https://stackoverflow.com/users/567620/ely"}, "edited": false, "score": 0, "creation_date": 1524089573, "post_id": 49909348, "comment_id": 86835483, "body": "@ely, FYI, not my downvote (but I&#39;ve already said that). We&#39;ll agree to disagree. There will <i>always</i> be 2 camps on this."}, {"owner": {"reputation": 62908, "user_id": 567620, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/g8HIM.jpg?s=128&g=1", "display_name": "ely", "link": "https://stackoverflow.com/users/567620/ely"}, "reply_to_user": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "edited": false, "score": 0, "creation_date": 1524089699, "post_id": 49909348, "comment_id": 86835527, "body": "@jpp I&#39;d say there are more like 3 camps: (1) programmers who don&#39;t yet know that these data structure concerns might exist, (2) programmers who do know that data structure concerns exist but who are overly headstrong about focusing on it too much, and (3) programmers who know about the data structure issues but who recognize that it would be a form of premature optimization to worry about it or even bring it up in this sort of context."}, {"owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "reply_to_user": {"reputation": 62908, "user_id": 567620, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/g8HIM.jpg?s=128&g=1", "display_name": "ely", "link": "https://stackoverflow.com/users/567620/ely"}, "edited": false, "score": 0, "creation_date": 1524089748, "post_id": 49909348, "comment_id": 86835550, "body": "@ely, So it&#39;s &quot;the ignorant, the right, and the wrong&quot; - how open-minded!"}, {"owner": {"reputation": 62908, "user_id": 567620, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/g8HIM.jpg?s=128&g=1", "display_name": "ely", "link": "https://stackoverflow.com/users/567620/ely"}, "reply_to_user": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "edited": false, "score": 0, "creation_date": 1524089842, "post_id": 49909348, "comment_id": 86835581, "body": "@jpp More like the inexperienced, the shortsighted, and the humble enough to not harp on technicalities without good reason for it."}, {"owner": {"reputation": 24066, "user_id": 4686625, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gsGGS.jpg?s=128&g=1", "display_name": "miradulo", "link": "https://stackoverflow.com/users/4686625/miradulo"}, "reply_to_user": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "edited": false, "score": 2, "creation_date": 1524089905, "post_id": 49909348, "comment_id": 86835605, "body": "@jpp I&#39;ll repeat it here - your dict solutions are misguided, given that you perform a linear lookup beforehand."}, {"owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "reply_to_user": {"reputation": 24066, "user_id": 4686625, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gsGGS.jpg?s=128&g=1", "display_name": "miradulo", "link": "https://stackoverflow.com/users/4686625/miradulo"}, "edited": false, "score": 0, "creation_date": 1524090126, "post_id": 49909348, "comment_id": 86835671, "body": "@miradulo, My point isn&#39;t just about performance. I <i>know</i> it&#39;s a linear lookup. But I&#39;d much rather have a linear look-up in a dictionary than a dozen <code>if</code> / <code>elif</code> / <code>else</code> clauses."}, {"owner": {"reputation": 24066, "user_id": 4686625, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gsGGS.jpg?s=128&g=1", "display_name": "miradulo", "link": "https://stackoverflow.com/users/4686625/miradulo"}, "reply_to_user": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "edited": false, "score": 1, "creation_date": 1524090511, "post_id": 49909348, "comment_id": 86835816, "body": "@jpp Looks to me like you&#39;re just needlessly adding overhead and confusion. If you want to use a dict, ely&#39;s answer (with one linear lookup) seems like the best way."}], "tags": [], "owner": {"reputation": 651, "user_id": 2666057, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/V62UY.jpg?s=128&g=1", "display_name": "Victor Valente", "link": "https://stackoverflow.com/users/2666057/victor-valente"}, "is_accepted": false, "score": -1, "last_activity_date": 1524087100, "creation_date": 1524087100, "answer_id": 49909348, "question_id": 49909176, "link": "https://stackoverflow.com/questions/49909176/creating-dictionary-keys-with-substrings-from-another-column/49909348#49909348", "title": "Creating dictionary keys with substrings from another column", "body": "<p>A naive way to do it is to define a function to search for a string and if that string is found, then return the intended id.</p>\n\n<pre><code>def borough_id(borough):\n    if 'Bronx' in borough:\n        return 5\n    elif ...\n        ...\n        ...\n    else:\n        return None\n\ndf['borough_num'] = df['Borough'].apply(lambda x: borough_id(x))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2872, "user_id": 6805091, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6abbb6c8d37d0e91ad6265d68a55bf?s=128&d=identicon&r=PG&f=1", "display_name": "Bubble Bubble Bubble Gut", "link": "https://stackoverflow.com/users/6805091/bubble-bubble-bubble-gut"}, "is_accepted": false, "score": 1, "last_activity_date": 1524087141, "creation_date": 1524087141, "answer_id": 49909358, "question_id": 49909176, "link": "https://stackoverflow.com/questions/49909176/creating-dictionary-keys-with-substrings-from-another-column/49909358#49909358", "title": "Creating dictionary keys with substrings from another column", "body": "<p>Maybe write a simple helper function: </p>\n\n<pre><code>def find_borough_id(name):\n    for k, v in borough_dict.items():\n        if k in name:\n            return v\n    return 0\n\ndf['borough_num'] = df['Borough'].apply(find_borough_id)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 23, "user_id": 9666496, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Alex Laval", "link": "https://stackoverflow.com/users/9666496/alex-laval"}, "edited": false, "score": 0, "creation_date": 1524090140, "post_id": 49909417, "comment_id": 86835673, "body": "Thank you! The first alternative (the function) didn&#39;t quite work in my dataframe as it would assign the wrong values. The second one works better, but it still assigns some random values (I have one row with Saten Island, and it has assigned it a value of 0 instead of 4). Any clue why this happens?"}], "tags": [], "owner": {"reputation": 146, "user_id": 9380604, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "ZZ ll", "link": "https://stackoverflow.com/users/9380604/zz-ll"}, "is_accepted": false, "score": 1, "last_activity_date": 1524087501, "creation_date": 1524087501, "answer_id": 49909417, "question_id": 49909176, "link": "https://stackoverflow.com/questions/49909176/creating-dictionary-keys-with-substrings-from-another-column/49909417#49909417", "title": "Creating dictionary keys with substrings from another column", "body": "<p>One solution is to search which key of borough_dict is a substring of x and returns its associated value:</p>\n\n<pre><code>def get_borough_num(x):\n  for key, val in borough_dict.items():\n    if key in x:\n       return val\n  return 0\ndf['borough_num'] = df['Borough'].apply(get_borough_num)\n</code></pre>\n\n<hr>\n\n<p>An alternative solution is to assume that all rows use as borough_name the borough name or endswith a space + the borough name. With such assumption, you can get the borough_name using:</p>\n\n<pre><code>x.rsplit(' ')[-1]\n</code></pre>\n\n<p>which returns the string after the last space if the string contains a space or the whole string otherwise:</p>\n\n<pre><code>\"Manhattan\".rsplit(' ')[-1] =&gt; \"Manhattan\"\n\"blah Manhattan\".rsplit(' ')[-1] =&gt; \"Manhattan\"\n</code></pre>\n\n<p>so when ends up with:</p>\n\n<pre><code>get_borough_num = lambda x: borough_dict.get(x.rsplit(' ')[-1], 0)\ndf['borough_num'] = df['Borough'].apply(get_borough_num)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 24066, "user_id": 4686625, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gsGGS.jpg?s=128&g=1", "display_name": "miradulo", "link": "https://stackoverflow.com/users/4686625/miradulo"}, "edited": false, "score": 2, "creation_date": 1524089522, "post_id": 49909485, "comment_id": 86835465, "body": "This completely defeats the point of a dict though. Now you have linear lookup."}, {"owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "reply_to_user": {"reputation": 24066, "user_id": 4686625, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gsGGS.jpg?s=128&g=1", "display_name": "miradulo", "link": "https://stackoverflow.com/users/4686625/miradulo"}, "edited": false, "score": 0, "creation_date": 1524099039, "post_id": 49909485, "comment_id": 86837990, "body": "@miradulo. Linear look is not, in itself, bad. If performance is an issue, OP would note."}, {"owner": {"reputation": 24066, "user_id": 4686625, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gsGGS.jpg?s=128&g=1", "display_name": "miradulo", "link": "https://stackoverflow.com/users/4686625/miradulo"}, "edited": false, "score": 0, "creation_date": 1524110930, "post_id": 49909485, "comment_id": 86840771, "body": "Indeed linear is fine. But creating a not-so-useful dict subclass just to do this one particular linear lookup seems.. odd."}], "tags": [], "owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "is_accepted": false, "score": -2, "last_activity_date": 1524089138, "last_edit_date": 1524089138, "creation_date": 1524087923, "answer_id": 49909485, "question_id": 49909176, "link": "https://stackoverflow.com/questions/49909176/creating-dictionary-keys-with-substrings-from-another-column/49909485#49909485", "title": "Creating dictionary keys with substrings from another column", "body": "<p><strong>Object-oriented approach</strong></p>\n\n<p>You can subclass <code>dict</code> and then use <code>pd.Series.map</code>.</p>\n\n<pre><code>class dict_endswith(dict):\n    def __getitem__(self, value):\n        key = next((k for k in self.keys() if value.endswith(k)), None)\n        return self.get(key)\n\ndf = pd.DataFrame({'Borough': ['07 BRONX', '01 MANHATTAN', 'STATEN ISLAND', '12 QUEENS', 'UNKNOWN']})\n\nd = dict_endswith({'MANHATTAN':1, 'BROOKLYN':2, 'QUEENS': 3, 'STATEN ISLAND': 4, 'BRONX': 5, 'OTHER':6})\n\ndf['borough_num'] = df['Borough'].map(lambda x: d[x]).fillna('OTHER')\n\nprint(df)\n\n#          Borough borough_num\n# 0       07 BRONX           5\n# 1   01 MANHATTAN           1\n# 2  STATEN ISLAND           4\n# 3      12 QUEENS           3\n# 4        UNKNOWN       OTHER\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "is_accepted": false, "score": -1, "last_activity_date": 1524088265, "creation_date": 1524088265, "answer_id": 49909553, "question_id": 49909176, "link": "https://stackoverflow.com/questions/49909176/creating-dictionary-keys-with-substrings-from-another-column/49909553#49909553", "title": "Creating dictionary keys with substrings from another column", "body": "<p><strong>Functional approach</strong></p>\n\n<p>Use a custom function with a generator expression, and make use of the default value of <code>dict.get</code> to return 'OTHER' if no match is found.</p>\n\n<p>Then apply the function via <code>pd.Series.apply</code>.</p>\n\n<pre><code>df = pd.DataFrame({'Borough': ['07 BRONX', '01 MANHATTAN', 'STATEN ISLAND', '12 QUEENS', 'UNKNOWN']})\n\nd = {'MANHATTAN':1, 'BROOKLYN':2, 'QUEENS': 3, 'STATEN ISLAND': 4, 'BRONX': 5, 'OTHER':6}\n\ndef map_borough(x, mapping):\n    return mapping.get(next((k for k in mapping if x.endswith(k)), None), 'OTHER')\n\ndf['borough_num'] = df['Borough'].apply(map_borough, mapping=d)\n\nprint(df)\n\n#          Borough borough_num\n# 0       07 BRONX           5\n# 1   01 MANHATTAN           1\n# 2  STATEN ISLAND           4\n# 3      12 QUEENS           3\n# 4        UNKNOWN       OTHER\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "is_accepted": false, "score": 1, "last_activity_date": 1524088334, "creation_date": 1524088334, "answer_id": 49909565, "question_id": 49909176, "link": "https://stackoverflow.com/questions/49909176/creating-dictionary-keys-with-substrings-from-another-column/49909565#49909565", "title": "Creating dictionary keys with substrings from another column", "body": "<p>Let's use Pandas str accessor and string functions such as <code>extract</code>, <code>join</code>, <code>upper</code> and python method <code>map</code>.</p>\n\n<p>Given setup from @alexlaval question:</p>\n\n<pre><code>borough_dict = {'MANHATTAN':1, 'BROOKLYN':2, 'QUEENS': 3, 'STATEN ISLAND': 4, 'BRONX': 5, 'OTHER':6}\n</code></pre>\n\n<p>and setup from @ely</p>\n\n<pre><code>df = pd.DataFrame({\n    'Borough': [\"Manhattan\", \"Brooklyn\", \"Bronx\", \"07 Bronx\", \n                \"109 Staten Island\", \"03 Brooklyn\", \"04 Queens\",\"Unknown\"], \n    'Value':[1, 2, 3, 4, 5, 6, 7, 8]\n})\n</code></pre>\n\n<p>Let's create a regex to extract boroughs from dataframe column:</p>\n\n<pre><code>x = '(' + '|'.join(borough_dict.keys()) + ')'\n</code></pre>\n\n<p>Now, let's use extract and map to get borough number</p>\n\n<pre><code>df['Borough_number'] = df.Borough.str.upper()\\\n                         .str.extract(x, expand=False).fillna('OTHER')\\\n                         .map(borough_dict)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>             Borough  Value  Borough_number\n0          Manhattan      1               1\n1           Brooklyn      2               2\n2              Bronx      3               5\n3           07 Bronx      4               5\n4  109 Staten Island      5               4\n5        03 Brooklyn      6               2\n6          04 Queens      7               3\n7            Unknown      8               6\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "is_accepted": false, "score": -2, "last_activity_date": 1524091512, "last_edit_date": 1524091512, "creation_date": 1524090585, "answer_id": 49909955, "question_id": 49909176, "link": "https://stackoverflow.com/questions/49909176/creating-dictionary-keys-with-substrings-from-another-column/49909955#49909955", "title": "Creating dictionary keys with substrings from another column", "body": "<p><strong>Loopy solution</strong></p>\n\n<p>If you want to use a loop, then make your code more readable by separating data structure from logic.</p>\n\n<p>In this example, you can iterate your dictionary items sequentially. <a href=\"https://stackoverflow.com/a/49909340/9209546\">@ely's version</a> is better for a larger dataframe.</p>\n\n<pre><code>df = pd.DataFrame({'Borough': ['07 BRONX', '01 MANHATTAN', 'STATEN ISLAND', '12 QUEENS', 'UNKNOWN']})\n\nd = {'MANHATTAN':1, 'BROOKLYN':2, 'QUEENS': 3, 'STATEN ISLAND': 4, 'BRONX': 5, 'OTHER':6}\n\ndef map_borough(x, mapping):\n    for k, v in mapping.items():\n        if k in x:\n            return v\n    else:\n        return 'OTHER'\n\ndf['borough_num'] = df['Borough'].apply(map_borough, mapping=d)\n\n#          Borough borough_num\n# 0       07 BRONX           5\n# 1   01 MANHATTAN           1\n# 2  STATEN ISLAND           4\n# 3      12 QUEENS           3\n# 4        UNKNOWN       OTHER\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 9666496, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Alex Laval", "link": "https://stackoverflow.com/users/9666496/alex-laval"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 289, "favorite_count": 1, "accepted_answer_id": 49909340, "answer_count": 8, "score": 2, "last_activity_date": 1524091512, "creation_date": 1524086398, "last_edit_date": 1524089492, "question_id": 49909176, "link": "https://stackoverflow.com/questions/49909176/creating-dictionary-keys-with-substrings-from-another-column", "title": "Creating dictionary keys with substrings from another column", "body": "<p>I have a dataframe with a column that includes the names of boroughs in New York City (Manhattan, Brooklyn, etc.). I want to create another column, 'borough_num', that assigns a number for each borough (Manhattan -> 1, Brooklyn -> 2, Queens -> 3, Staten Island -> 4, Bronx -> 5, Other -> 0). </p>\n\n<p>However, in the Borough column, some rows contain numbers in front of the borough name (e.g. instead of \"Bronx\" I have \"07 Bronx\"). Because this \"07 Bronx\" is still part of the Bronx borough, it should also be assigned to the same value \"5\" as \"Bronx\". I therefore need to create a dictionary that assigns the number 5 to a string that <strong>contains</strong> the word \"Bronx\". The same for each Borough. Any clue on how to do this? I am new to python!</p>\n\n<p>This is what I had before noticing the cells with the numbers:</p>\n\n<pre><code>df['Borough'] = df['Borough'].fillna('OTHER')\nborough_dict = {'MANHATTAN':1, 'BROOKLYN':2, 'QUEENS': 3, 'STATEN ISLAND': 4, 'BRONX': 5, 'OTHER':6}\ndf['borough_num'] = df['Borough'].apply(lambda x:0 if borough_dict.get(x) == None else borough_dict.get(x))\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/8Z6NM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8Z6NM.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "logistic-regression", "random-seed"], "comments": [{"owner": {"reputation": 25595, "user_id": 202229, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6cc1d82c11563b440c57280ad587ee47?s=128&d=identicon&r=PG", "display_name": "smci", "link": "https://stackoverflow.com/users/202229/smci"}, "edited": false, "score": 0, "creation_date": 1524087480, "post_id": 49909153, "comment_id": 86834712, "body": "random_state is supposed to be an integer (random seed), not boolean. There are 142 questions on    <a href=\"https://stackoverflow.com/search?q=random_state+parameter\">stackoverflow.com/search?q=random_state+parameter</a> , we should make one canonical then close this in favor of it."}, {"owner": {"reputation": 25595, "user_id": 202229, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6cc1d82c11563b440c57280ad587ee47?s=128&d=identicon&r=PG", "display_name": "smci", "link": "https://stackoverflow.com/users/202229/smci"}, "edited": false, "score": 0, "creation_date": 1524091157, "post_id": 49909153, "comment_id": 86836009, "body": "This is getting confusing, your title is grossly misleading: you <b>don&#39;t pass any parameters whatsoever to <code>logist = LogisticRegression()</code></b>. You pass <code>random_state=True</code> to <code>train_test_split()</code>.  So LogisticRegression&#39;s defaults to random_state=None, which the doc tells you it uses some random number from the random-number generator. <code>train_test_split()</code> and <code>LogisticRegression()</code> do not somehow silently share parameters with each other. Seriously please read the doc on both and understand what the code is actually doing, then revise your question."}, {"owner": {"reputation": 25595, "user_id": 202229, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6cc1d82c11563b440c57280ad587ee47?s=128&d=identicon&r=PG", "display_name": "smci", "link": "https://stackoverflow.com/users/202229/smci"}, "edited": false, "score": 0, "creation_date": 1524093310, "post_id": 49909153, "comment_id": 86836588, "body": "And <code>threshold</code> isn&#39;t a parameter to either splitting or LR training, it&#39;s a cutoff parameter in scoring the output of LR <code>predict()</code>. You could just train once and then watch/plot the effect  as you sweep <code>threshold</code> across a range of values."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 8307340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/576db2c01b52425b0ff9af41ed13bba0?s=128&d=identicon&r=PG&f=1", "display_name": "Rashmi Singh", "link": "https://stackoverflow.com/users/8307340/rashmi-singh"}, "edited": false, "score": 0, "creation_date": 1524090513, "post_id": 49909306, "comment_id": 86835818, "body": "Even if I provide random_state some value,same problem is coming.It should consider the value of argument &#39;threshold&#39; provided during function call, but it keeps on producing same results for every value of threshold"}, {"owner": {"reputation": 25595, "user_id": 202229, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6cc1d82c11563b440c57280ad587ee47?s=128&d=identicon&r=PG", "display_name": "smci", "link": "https://stackoverflow.com/users/202229/smci"}, "reply_to_user": {"reputation": 11, "user_id": 8307340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/576db2c01b52425b0ff9af41ed13bba0?s=128&d=identicon&r=PG&f=1", "display_name": "Rashmi Singh", "link": "https://stackoverflow.com/users/8307340/rashmi-singh"}, "edited": false, "score": 0, "creation_date": 1524090671, "post_id": 49909306, "comment_id": 86835867, "body": "Tell us what values of <code>threshold</code> you tried, already! You didn&#39;t put that in the question. Also, don&#39;t just tell us &quot;it doesn&#39;t work&quot;, inspect <code>coef_</code>, the LR coefficients, and verify that they change and have meaningful values."}, {"owner": {"reputation": 11, "user_id": 8307340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/576db2c01b52425b0ff9af41ed13bba0?s=128&d=identicon&r=PG&f=1", "display_name": "Rashmi Singh", "link": "https://stackoverflow.com/users/8307340/rashmi-singh"}, "edited": false, "score": 0, "creation_date": 1524090885, "post_id": 49909306, "comment_id": 86835943, "body": "model(0.2) , model (0.6) and others as well and it keeps on producing same output.0.975333333333 [[2906    2]  [  72   20]]"}, {"owner": {"reputation": 25595, "user_id": 202229, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6cc1d82c11563b440c57280ad587ee47?s=128&d=identicon&r=PG", "display_name": "smci", "link": "https://stackoverflow.com/users/202229/smci"}, "reply_to_user": {"reputation": 11, "user_id": 8307340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/576db2c01b52425b0ff9af41ed13bba0?s=128&d=identicon&r=PG&f=1", "display_name": "Rashmi Singh", "link": "https://stackoverflow.com/users/8307340/rashmi-singh"}, "edited": false, "score": 0, "creation_date": 1524090926, "post_id": 49909306, "comment_id": 86835952, "body": "...or plot a graph of the distribution of outputs"}, {"owner": {"reputation": 11, "user_id": 8307340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/576db2c01b52425b0ff9af41ed13bba0?s=128&d=identicon&r=PG&f=1", "display_name": "Rashmi Singh", "link": "https://stackoverflow.com/users/8307340/rashmi-singh"}, "edited": false, "score": 0, "creation_date": 1524113707, "post_id": 49909306, "comment_id": 86841526, "body": "I am still not getting the solution ...I have made separate function for comparing predicted value with the threshold.If it&#39;s still not correct, can you please help me how to do the required comparison done."}, {"owner": {"reputation": 25595, "user_id": 202229, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6cc1d82c11563b440c57280ad587ee47?s=128&d=identicon&r=PG", "display_name": "smci", "link": "https://stackoverflow.com/users/202229/smci"}, "reply_to_user": {"reputation": 11, "user_id": 8307340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/576db2c01b52425b0ff9af41ed13bba0?s=128&d=identicon&r=PG&f=1", "display_name": "Rashmi Singh", "link": "https://stackoverflow.com/users/8307340/rashmi-singh"}, "edited": false, "score": 0, "creation_date": 1524114362, "post_id": 49909306, "comment_id": 86841722, "body": "I asked you to <b>watch/plot the effect as you sweep <code>threshold</code> across a range of values. Show us a table with at least five different values of threshold. Like <code>[0,0.25,0.5,0.75,1.0]</code>, and whatever value you mean by &quot;the result&quot;</b>. Next, what do you mean by &quot;the result&quot;? Your accuracy <code>acc_score</code>, your confusion matrix <code>conf</code>, or what? For now, forget confusion matrix. Just look at say the effect of applying different values of <code>threshold</code> to the same array of predicted values <code>y_pred</code>. Also, you want to sanity-check <code>y_pred</code>, inspect it. Is it all-one? all-zero? What is its mean, median etc"}, {"owner": {"reputation": 11, "user_id": 8307340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/576db2c01b52425b0ff9af41ed13bba0?s=128&d=identicon&r=PG&f=1", "display_name": "Rashmi Singh", "link": "https://stackoverflow.com/users/8307340/rashmi-singh"}, "edited": false, "score": 0, "creation_date": 1524116792, "post_id": 49909306, "comment_id": 86842568, "body": "okay....got it now.The dataset is like this .For the values [0,0.25,0.5,0.75,1.0],only at the value of 1.0, I got different value for accuracy. Thanks a lot!"}, {"owner": {"reputation": 25595, "user_id": 202229, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6cc1d82c11563b440c57280ad587ee47?s=128&d=identicon&r=PG", "display_name": "smci", "link": "https://stackoverflow.com/users/202229/smci"}, "reply_to_user": {"reputation": 11, "user_id": 8307340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/576db2c01b52425b0ff9af41ed13bba0?s=128&d=identicon&r=PG&f=1", "display_name": "Rashmi Singh", "link": "https://stackoverflow.com/users/8307340/rashmi-singh"}, "edited": false, "score": 0, "creation_date": 1524117867, "post_id": 49909306, "comment_id": 86843007, "body": "Good news, just please still post those actual data. Show us (say) the first ten values of <code>y_pred</code>. Make sure those are acting sane before you try to measure accuracy, or anything higher up. Always check your assumptions."}], "tags": [], "owner": {"reputation": 25595, "user_id": 202229, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6cc1d82c11563b440c57280ad587ee47?s=128&d=identicon&r=PG", "display_name": "smci", "link": "https://stackoverflow.com/users/202229/smci"}, "is_accepted": false, "score": 1, "last_activity_date": 1524119117, "last_edit_date": 1524119117, "creation_date": 1524086961, "answer_id": 49909306, "question_id": 49909153, "link": "https://stackoverflow.com/questions/49909153/logistic-regression-how-to-compare-predicted-value-with-a-threshold-and-get-the/49909306#49909306", "title": "Logistic Regression: how to compare predicted value with a threshold and get the classification done", "body": "<p>EDIT (in response to the first two edits of this question statement): you don't pass any parameters whatsoever to <code>logist = LogisticRegression()</code>. You pass <code>random_state=True</code> to <code>train_test_split()</code>. Not to <code>LogisticRegression</code>.</p>\n\n<p><code>random_state</code> is supposed to be an integer (random seed), not boolean - read the <a href=\"http://scikit-learn.org/stable/modules/generated/sklearn.linear_model.LogisticRegression.html\" rel=\"nofollow noreferrer\">doc</a>. So by passing <code>True</code>, which will get coerced to 1, you just keep setting <code>random_state = 1</code>.</p>\n\n<p>Try it on some other integer values and you'll get different results.</p>\n\n<p>EDIT2: Your issue had nothing to do with <code>random_state</code> parameter as originally titled. It is to do with your predicted values <code>y_pred = logist.predict(X_test)</code>, and specifically how behave as you sweep your <code>threshold</code> parameter across the possible range [0,1] of LR output values. Show us a table with at least five different values of threshold. Like [0,0.25,0.5,0.75,1.0], and whatever value you mean by \"the result\". Next, what do you mean by \"the result\"? Your accuracy acc_score, your confusion matrix conf, or what? For now, forget confusion matrix. Just look at say the effect of applying different values of threshold to the same array of predicted values <code>y_pred</code>. Also, you want to sanity-check <code>y_pred</code>, inspect it. Is it all-one? all-zero? What are its mean, median etc. Please post a table of data. Do not just keep saying \"it doesn't work\".</p>\n"}], "owner": {"reputation": 11, "user_id": 8307340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/576db2c01b52425b0ff9af41ed13bba0?s=128&d=identicon&r=PG&f=1", "display_name": "Rashmi Singh", "link": "https://stackoverflow.com/users/8307340/rashmi-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 193, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1524119117, "creation_date": 1524086278, "last_edit_date": 1524113922, "question_id": 49909153, "link": "https://stackoverflow.com/questions/49909153/logistic-regression-how-to-compare-predicted-value-with-a-threshold-and-get-the", "title": "Logistic Regression: how to compare predicted value with a threshold and get the classification done", "body": "<p>I have this Credit Default dataset with head like this: </p>\n\n<pre><code>default student balance      income        default_Yes\n\nNo      No      729.526495   44361.625074   0 \n\nNo      Yes     817.180407   12106.134700   0 \n\nNo      No      1073.549164  31767.138947   0 \n\nNo      No      529.250605   35704.493935   0 \n\nNo      No      785.655883   38463.495879   0 \n</code></pre>\n\n<p>I am trying to perform logistic regression for 'default_Yes' based on the 'balance' attribute and used the following function:</p>\n\n<pre><code> from sklearn.cross_validation import train_test_split\n from sklearn import metrics\n X = cred_def[['balance']]\n Y = cred_def['default_Yes']\n X_train, X_test,Y_train,Y_test = train_test_split(X,Y,test_size=0.3,random_state=76)\n logist = LogisticRegression()\n logist.fit(X_train,Y_train)\n y_pred = logist.predict(X_test)\n\n\n def model(threshold):\n     def_thresh = np.greater(y_pred, threshold).astype(int)\n     acc_score = metrics.accuracy_score(Y_test, def_thresh)\n     print(acc_score)\n     plt.scatter(X_test.values,Y_test.values)\n     plt.scatter(X_test.values,def_thresh)\n     conf = metrics.confusion_matrix(Y_test, y_pred)\n     print(conf)\n</code></pre>\n\n<p>The problem I am facing is: no matter what value of <code>threshold</code> I am passing to the function 'model', it's producing same output and not considering the value passed.</p>\n"}, {"tags": ["python", "button", "tkinter"], "comments": [{"owner": {"reputation": 14442, "user_id": 7475225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/niMZR.jpg?s=128&g=1", "display_name": "Mike - SMT", "link": "https://stackoverflow.com/users/7475225/mike-smt"}, "edited": false, "score": 1, "creation_date": 1524086171, "post_id": 49909113, "comment_id": 86834147, "body": "Do you want the button to toggle or the label?"}, {"owner": {"reputation": 43, "user_id": 1518214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/229cc453e2cab0d27cd5d3e767d477b3?s=128&d=identicon&r=PG", "display_name": "Christina", "link": "https://stackoverflow.com/users/1518214/christina"}, "reply_to_user": {"reputation": 14442, "user_id": 7475225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/niMZR.jpg?s=128&g=1", "display_name": "Mike - SMT", "link": "https://stackoverflow.com/users/7475225/mike-smt"}, "edited": false, "score": 0, "creation_date": 1524086523, "post_id": 49909113, "comment_id": 86834293, "body": "The text/color change is just an example. In reality, I would like to run pile of code A on the first click and pile of code B on the second click. So, I guess the button."}, {"owner": {"reputation": 14442, "user_id": 7475225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/niMZR.jpg?s=128&g=1", "display_name": "Mike - SMT", "link": "https://stackoverflow.com/users/7475225/mike-smt"}, "edited": false, "score": 1, "creation_date": 1524086573, "post_id": 49909113, "comment_id": 86834313, "body": "In that case I think Novel&#39;s answer should provide a good example for both the button and label."}], "answers": [{"comments": [{"owner": {"reputation": 14442, "user_id": 7475225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/niMZR.jpg?s=128&g=1", "display_name": "Mike - SMT", "link": "https://stackoverflow.com/users/7475225/mike-smt"}, "edited": false, "score": 0, "creation_date": 1524086455, "post_id": 49909160, "comment_id": 86834262, "body": "You beet me to it :D. One thing thought. You may want to add the globals for the toggle function. I know python will eventually check global even if its not provided but I think its best for the OP and others learning."}, {"owner": {"reputation": 73988, "user_id": 1639625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4224d1458a149d37b56a53115656f4df?s=128&d=identicon&r=PG", "display_name": "tobias_k", "link": "https://stackoverflow.com/users/1639625/tobias-k"}, "edited": false, "score": 0, "creation_date": 1524086572, "post_id": 49909160, "comment_id": 86834314, "body": "Or use a <code>dict</code> mapping current state to next state."}, {"owner": {"reputation": 43, "user_id": 1518214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/229cc453e2cab0d27cd5d3e767d477b3?s=128&d=identicon&r=PG", "display_name": "Christina", "link": "https://stackoverflow.com/users/1518214/christina"}, "edited": false, "score": 0, "creation_date": 1524087147, "post_id": 49909160, "comment_id": 86834579, "body": "Excellent! Thanks all!"}, {"owner": {"reputation": 30484, "user_id": 2875563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/umbJB.jpg?s=128&g=1", "display_name": "Reblochon Masque", "link": "https://stackoverflow.com/users/2875563/reblochon-masque"}, "edited": false, "score": 0, "creation_date": 1524097337, "post_id": 49909160, "comment_id": 86837566, "body": "Why is your <code>Button</code> inheriting from <code>Frame</code>?"}, {"owner": {"reputation": 11466, "user_id": 2229945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfbf044eccb8835deec653dae32d56e7?s=128&d=identicon&r=PG", "display_name": "Novel", "link": "https://stackoverflow.com/users/2229945/novel"}, "reply_to_user": {"reputation": 30484, "user_id": 2875563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/umbJB.jpg?s=128&g=1", "display_name": "Reblochon Masque", "link": "https://stackoverflow.com/users/2875563/reblochon-masque"}, "edited": false, "score": 0, "creation_date": 1524163643, "post_id": 49909160, "comment_id": 86872254, "body": "@ReblochonMasque because OP wanted a Button and a Label combined, so I used a Frame to hold those 2."}], "tags": [], "owner": {"reputation": 11466, "user_id": 2229945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfbf044eccb8835deec653dae32d56e7?s=128&d=identicon&r=PG", "display_name": "Novel", "link": "https://stackoverflow.com/users/2229945/novel"}, "is_accepted": true, "score": 4, "last_activity_date": 1524086921, "last_edit_date": 1524086921, "creation_date": 1524086337, "answer_id": 49909160, "question_id": 49909113, "link": "https://stackoverflow.com/questions/49909113/how-do-i-use-a-tkinter-button-for-two-states/49909160#49909160", "title": "How do I use a Tkinter Button for two states?", "body": "<p>You will need an if block to choose what to do. You can make another flag variable to keep track of the state, or just use the current Label or Button text:</p>\n\n<pre><code>from Tkinter import *\n\nwindow = Tk()\nwindow.title(\"Start/Stop Button\")\nwindow.geometry('200x100')\n\ndef clicked_rf1():\n    if btn_rf1['text'] == \"Start\":\n        btn_rf1.configure(text=\"Stop\")\n        lbl_rf1.configure(text=\"  ON  \", bg=\"green\")\n    else:\n        btn_rf1.configure(text=\"Start\")\n        lbl_rf1.configure(text=\"  OFF \", bg=\"red\")\n\nbtn_rf1 = Button(window, text=\"Start\", command=clicked_rf1)\nbtn_rf1.grid(column=1, row=1)\nlbl_rf1 = Label(window, text=\"  OFF \", bg=\"red\")\nlbl_rf1.grid(column=2, row=1)\n\nwindow.mainloop()\n</code></pre>\n\n<p>This would be an ideal place to make a custom Button subclass, so you could have many of these in your program:</p>\n\n<pre><code>from Tkinter import *\n\nwindow = Tk()\nwindow.title(\"Start/Stop Button\")\nwindow.geometry('200x100')\n\nclass Christina(Frame):\n    def __init__(self, master=None, **kwargs):\n        Frame.__init__(self, master, **kwargs)\n\n        self.btn = Button(self, text=\"Start\", command=self.clicked)\n        self.btn.grid(column=0, row=0)\n        self.lbl = Label(self, text=\"  OFF \", bg=\"red\")\n        self.lbl.grid(column=1, row=0)\n\n    def clicked(self):\n        if self.btn['text'] == \"Start\":\n            self.btn.configure(text=\"Stop\")\n            self.lbl.configure(text=\"  ON  \", bg=\"green\")\n        else:\n            self.btn.configure(text=\"Start\")\n            self.lbl.configure(text=\"  OFF \", bg=\"red\")\n\nbtn1 = Christina(window)\nbtn1.grid()\nbtn2 = Christina(window)\nbtn2.grid()\nbtn3 = Christina(window)\nbtn3.grid()\n\nwindow.mainloop()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 73988, "user_id": 1639625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4224d1458a149d37b56a53115656f4df?s=128&d=identicon&r=PG", "display_name": "tobias_k", "link": "https://stackoverflow.com/users/1639625/tobias-k"}, "is_accepted": false, "score": 2, "last_activity_date": 1524086913, "creation_date": 1524086913, "answer_id": 49909291, "question_id": 49909113, "link": "https://stackoverflow.com/questions/49909113/how-do-i-use-a-tkinter-button-for-two-states/49909291#49909291", "title": "How do I use a Tkinter Button for two states?", "body": "<p>Another approach might be to put the \"pile of code\" to run into different function, collect those in an iterator, and then get the <code>next</code> function from that iterator and execute it:</p>\n\n<pre><code>def bunchofcode():\n    print(\"foo\")\n\ndef somethingelse():\n    print(\"bar\")\n\nwhattodo = iter([bunchofcode, somethingelse])\n\ndef clicked_rf1():\n    try:\n        next(whattodo)()\n    except StopIteration:\n        print(\"nothing to do\")\n</code></pre>\n\n<p>Or for cyclic behaviour:</p>\n\n<pre><code>from itertools import cycle\nwhattodo = cycle([bunchofcode, somethingelse])\n</code></pre>\n\n<hr>\n\n<p>For a two-state toggle button, you could also use a <code>dict</code> to map the current state to the next. You could also use the button's <code>relief</code> to mark the state.</p>\n\n<pre><code>def clicked_rf1():\n    transition = {\"raised\": \"sunken\", \"sunken\": \"raised\"}\n    btn_rf1[\"relief\"] = transition[btn_rf1[\"relief\"]]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "is_accepted": false, "score": 3, "last_activity_date": 1524089990, "creation_date": 1524089990, "answer_id": 49909854, "question_id": 49909113, "link": "https://stackoverflow.com/questions/49909113/how-do-i-use-a-tkinter-button-for-two-states/49909854#49909854", "title": "How do I use a Tkinter Button for two states?", "body": "<p>If you want a toggle, you can use the checkbutton without an indicator. It has options for the color in the selected and deselected state, and you can tie the value and the label together so that the label changes when you toggle the button.</p>\n\n<p>Like any button, you can tie a command to it. The command can check the value of the variable to determine whether it should do the \"on\" function or the \"off\" function.</p>\n\n<p>Here's a simple example:</p>\n\n<pre><code>import Tkinter as tk\n\ndef toggle():\n    if var.get() == \"ON\":\n        print(\"turning on...\")\n    else:\n        print(\"turning off...\")\n\nroot = tk.Tk()\nvar = tk.StringVar()\ntoggle = tk.Checkbutton(root, onvalue=\"ON\", offvalue=\"OFF\", width=4,\n                        indicatoron=False, \n                        variable=var, textvariable=var,\n                        selectcolor=\"green\", background=\"red\",\n                        command=toggle)\n\nvar.set(\"OFF\")\ntoggle.pack()\n\nroot.mainloop()\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 1518214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/229cc453e2cab0d27cd5d3e767d477b3?s=128&d=identicon&r=PG", "display_name": "Christina", "link": "https://stackoverflow.com/users/1518214/christina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2422, "favorite_count": 0, "accepted_answer_id": 49909160, "answer_count": 3, "score": 2, "last_activity_date": 1524089990, "creation_date": 1524086085, "question_id": 49909113, "link": "https://stackoverflow.com/questions/49909113/how-do-i-use-a-tkinter-button-for-two-states", "title": "How do I use a Tkinter Button for two states?", "body": "<p>I have the following code, which causes a color/text change when a Tkinter button is clicked. I would like to revert to the original color/text when the button is clicked a second time.</p>\n\n<pre><code>from Tkinter import *\n\nwindow = Tk()\nwindow.title(\"Start/Stop Button\")\nwindow.geometry('200x100')\n\ndef clicked_rf1():\n    btn_rf1.configure(text=\"Stop\")\n    lbl_rf1.configure(text=\"  ON  \", bg=\"green\")\n\nbtn_rf1 = Button(window, text=\"Start\", command=clicked_rf1)\nbtn_rf1.grid(column=1, row=1)\nlbl_rf1 = Label(window, text=\"  OFF \", bg=\"red\")\nlbl_rf1.grid(column=2, row=1)\n\nwindow.mainloop()\n</code></pre>\n\n<p>I want something that behaves a little more like a toggle, but I would like the look of a button.</p>\n\n<p>Help gratefully received.</p>\n"}, {"tags": ["python", "python-3.x", "tree", "binary-tree", "tree-traversal"], "comments": [{"owner": {"reputation": 6367, "user_id": 6914441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbc12c764b93fa915b8e5384f521fe12?s=128&d=identicon&r=PG&f=1", "display_name": "jferard", "link": "https://stackoverflow.com/users/6914441/jferard"}, "edited": false, "score": 1, "creation_date": 1524086414, "post_id": 49909109, "comment_id": 86834249, "body": "Have a look at <a href=\"https://en.wikipedia.org/wiki/Breadth-first_search\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Breadth-first_search</a>"}], "answers": [{"tags": [], "owner": {"reputation": 4470, "user_id": 1884363, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/DmTLe.jpg?s=128&g=1", "display_name": "sudo", "link": "https://stackoverflow.com/users/1884363/sudo"}, "is_accepted": false, "score": 1, "last_activity_date": 1524099449, "last_edit_date": 1524099449, "creation_date": 1524098825, "answer_id": 49911007, "question_id": 49909109, "link": "https://stackoverflow.com/questions/49909109/count-number-of-nodes-per-level-in-a-binary-tree/49911007#49911007", "title": "Count number of nodes per level in a binary tree", "body": "<p>The search ordering doesn't really matter as long as you only count each node once. A depth-first search solution with recursion would be:</p>\n\n<ul>\n<li>Create a map <code>counters</code> to store a counter for each level. E.g. <code>counters[i]</code> is the number of nodes found so far at level <code>i</code>. Let's say level 0 is the root.</li>\n<li>Define a recursive function <code>count_subtree(node, level)</code>: Increment <code>counters[level]</code> once. Then for each child of the given node, call <code>count_subtree(child, level + 1)</code> (the child is at a 1-deeper level).</li>\n<li>Call <code>count_subtree(root_node, 0)</code> to count starting at the root. This will result in <code>count_subtree</code> being run exactly once on each node because each node only has one parent, so <code>counters[level]</code> will be incremented once per node. A leaf node is the base case (no children to call the recursive function on).</li>\n<li>Build your final list from the values of counters, ordered by their keys ascending.</li>\n</ul>\n\n<p>This would work with any kind of tree, not just binary. Running time is O(number of nodes in tree). Side note: The depth-first search solution would be easier to divide and run on parallel processors or machines than a similar breadth-first search solution.</p>\n"}], "owner": {"reputation": 39, "user_id": 8850216, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3111d74203b1f20513f79845e0093755?s=128&d=identicon&r=PG&f=1", "display_name": "YellowSnow15", "link": "https://stackoverflow.com/users/8850216/yellowsnow15"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1313, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1524099449, "creation_date": 1524086062, "question_id": 49909109, "link": "https://stackoverflow.com/questions/49909109/count-number-of-nodes-per-level-in-a-binary-tree", "title": "Count number of nodes per level in a binary tree", "body": "<p>I've been searching for a bit now and haven't been able to find anything similar to my question. Maybe i'm just not searching correctly. Anyways this is a question from my exam review. Given a binary tree, I need to output a list such that each item in the list is the number of nodes on a level in a binary tree at the items list index. What I mean, lst = [1,2,1] and the 0th index is the 0th level in the tree and the 1 is how many nodes are in that level. lst[1] will represent the number of nodes (2) in that binary tree at level 1. The tree isn't guaranteed to be balanced. We've only been taught preorder,inorder and postorder traversals, and I don't see how they would be useful in this question. I'm not asking for specific code, just an idea on how I could figure this out or the logic behind it. Any help is appreciated.</p>\n"}, {"tags": ["python", "list", "membership"], "comments": [{"owner": {"reputation": 24066, "user_id": 4686625, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gsGGS.jpg?s=128&g=1", "display_name": "miradulo", "link": "https://stackoverflow.com/users/4686625/miradulo"}, "edited": false, "score": 1, "creation_date": 1524086237, "post_id": 49909061, "comment_id": 86834174, "body": "Maybe it is just me but I really can&#39;t make sense of your mapping from input to output."}, {"owner": {"reputation": 1890, "user_id": 1977018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/roRTA.png?s=128&g=1", "display_name": "raul.vila", "link": "https://stackoverflow.com/users/1977018/raul-vila"}, "edited": false, "score": 1, "creation_date": 1524086267, "post_id": 49909061, "comment_id": 86834187, "body": "where does the last 2 elements <code>[E],[E]</code> come from? &#211;_&#242; Same question with <code>[D,E,F],[D,E,F]</code> elements which are after <code>[A,B,C,D,E,F],[A,B,C,D,E,F]</code>"}, {"owner": {"reputation": 1890, "user_id": 1977018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/roRTA.png?s=128&g=1", "display_name": "raul.vila", "link": "https://stackoverflow.com/users/1977018/raul-vila"}, "edited": false, "score": 0, "creation_date": 1524086959, "post_id": 49909061, "comment_id": 86834484, "body": "I think I understood... they are the elements that are allowed to apear four times. See answer :)"}, {"owner": {"reputation": 374, "user_id": 8367234, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e858cadab898981618f280c7d2ba2a5?s=128&d=identicon&r=PG&f=1", "display_name": "Joylove", "link": "https://stackoverflow.com/users/8367234/joylove"}, "edited": false, "score": 0, "creation_date": 1524088568, "post_id": 49909061, "comment_id": 86835143, "body": "Yeah the last two are the tricky ones.  you get 4 of the items_that_appear_four but only 2 of the items_that_appear_twice."}], "answers": [{"comments": [{"owner": {"reputation": 374, "user_id": 8367234, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e858cadab898981618f280c7d2ba2a5?s=128&d=identicon&r=PG&f=1", "display_name": "Joylove", "link": "https://stackoverflow.com/users/8367234/joylove"}, "edited": false, "score": 1, "creation_date": 1524109738, "post_id": 49909185, "comment_id": 86840438, "body": "Marked as answer but thanks to everyone for all the fine choices.  Hard to pick one."}], "tags": [], "owner": {"reputation": 1890, "user_id": 1977018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/roRTA.png?s=128&g=1", "display_name": "raul.vila", "link": "https://stackoverflow.com/users/1977018/raul-vila"}, "is_accepted": true, "score": 2, "last_activity_date": 1524087341, "last_edit_date": 1524087341, "creation_date": 1524086438, "answer_id": 49909185, "question_id": 49909061, "link": "https://stackoverflow.com/questions/49909061/product-of-lists-of-lists-with-variable-members/49909185#49909185", "title": "Product of lists of lists with variable members", "body": "<p>I have a working version: <a href=\"https://pyfiddle.io/fiddle/524bde82-6c42-49b2-84a6-b64dac3d563f\" rel=\"nofollow noreferrer\">See Pyfiddle</a>.</p>\n\n<pre><code>my_input_list = [['A'],['A','B','C'],['D'],['D','E','F'],['A','B','C','D','E','F'],['A','C','E']]\nitems_that_appear_twice = ['A','B','C']\nitems_that_appear_four = ['D','E','F']\n\nmy_output_list = []\nfor my_input in my_input_list:\n    items_allowed_to_appear_twice = list(filter(\n        lambda value: (value in items_that_appear_twice \n                       or value in items_that_appear_four),\n        my_input))\n\n    items_allowed_to_appear_four = list(filter(\n        lambda value: value in items_that_appear_four,\n        my_input))\n\n    my_output_list += 2*[items_allowed_to_appear_twice]\n    if len(items_allowed_to_appear_four):\n        my_output_list += 2*[items_allowed_to_appear_four]\n\nprint(my_output_list)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1890, "user_id": 1977018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/roRTA.png?s=128&g=1", "display_name": "raul.vila", "link": "https://stackoverflow.com/users/1977018/raul-vila"}, "edited": false, "score": 1, "creation_date": 1524087363, "post_id": 49909346, "comment_id": 86834664, "body": "Small improvement, you can replace the two <code>my_output_list.append(sub)</code> with just one <code>my_output_list += 2*[sub]</code>, in both occurences. <a href=\"https://pyfiddle.io/fiddle/48d007c0-c96d-4a57-a37b-5807d44a5b8e\" rel=\"nofollow noreferrer\">Pyfiddle</a>"}, {"owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "reply_to_user": {"reputation": 1890, "user_id": 1977018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/roRTA.png?s=128&g=1", "display_name": "raul.vila", "link": "https://stackoverflow.com/users/1977018/raul-vila"}, "edited": false, "score": 1, "creation_date": 1524087710, "post_id": 49909346, "comment_id": 86834803, "body": "@raul.vila that&#39;s clever, shorter, and more flexible if OP changes the numbers, but for now I prefer my version because it&#39;s instantly obvious what it does, whereas I had to think for a moment to understand yours."}, {"owner": {"reputation": 1890, "user_id": 1977018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/roRTA.png?s=128&g=1", "display_name": "raul.vila", "link": "https://stackoverflow.com/users/1977018/raul-vila"}, "edited": false, "score": 0, "creation_date": 1524087796, "post_id": 49909346, "comment_id": 86834836, "body": "No need to change your code, of course. With your version and my comment anyone can choose :)."}], "tags": [], "owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "is_accepted": false, "score": 1, "last_activity_date": 1524087096, "creation_date": 1524087096, "answer_id": 49909346, "question_id": 49909061, "link": "https://stackoverflow.com/questions/49909061/product-of-lists-of-lists-with-variable-members/49909346#49909346", "title": "Product of lists of lists with variable members", "body": "<pre><code>my_input_list = [['A'],\n                 ['A', 'B', 'C'],\n                 ['D'],\n                 ['D', 'E', 'F'],\n                 ['A', 'B', 'C', 'D', 'E', 'F'],\n                 ['A', 'C', 'E']]\nitems_that_appear_twice = ['A', 'B', 'C']\nitems_that_appear_four = ['D', 'E', 'F']\n\nmy_output_list = []\nfor sub in my_input_list:\n    my_output_list.append(sub)\n    my_output_list.append(sub)\n    sub = [x for x in sub if x in items_that_appear_four]\n    if sub:\n        my_output_list.append(sub)\n        my_output_list.append(sub)\n\nassert my_output_list == [\n    ['A'], ['A'],\n    ['A', 'B', 'C'], ['A', 'B', 'C'],\n    ['D'], ['D'], ['D'], ['D'],\n    ['D', 'E', 'F'], ['D', 'E', 'F'], ['D', 'E', 'F'], ['D', 'E', 'F'],\n    ['A', 'B', 'C', 'D', 'E', 'F'], ['A', 'B', 'C', 'D', 'E', 'F'], ['D', 'E', 'F'], ['D', 'E', 'F'],\n    ['A', 'C', 'E'], ['A', 'C', 'E'], ['E'], ['E']]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9258, "user_id": 5665870, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TQBw0.png?s=128&g=1", "display_name": "Sphinx", "link": "https://stackoverflow.com/users/5665870/sphinx"}, "is_accepted": false, "score": 1, "last_activity_date": 1524087828, "creation_date": 1524087828, "answer_id": 49909471, "question_id": 49909061, "link": "https://stackoverflow.com/questions/49909061/product-of-lists-of-lists-with-variable-members/49909471#49909471", "title": "Product of lists of lists with variable members", "body": "<p>Below is my solution, sort the sub list first, then append to the result according different situation.</p>\n\n<pre><code>my_input_list = [['A'],['A','B','C'],['D'],['D','E','F'],['A','B','C','D','E','F'],['A','C','E']]\nitems_that_appear_twice = ['A','B','C']\nitems_that_appear_four = ['D','E','F']\n\nresult = []\nfor sublist in my_input_list:\n    appearence = {1:[], 2:[], 4:[]}\n    for item in sublist:\n        appearence[2].append(item) if item in items_that_appear_twice else (appearence[4].append(item) if item in items_that_appear_four else appearence[1].append(item))\n    if len(appearence[2]) &gt; 0:\n        result.append([appearence[2] + appearence[4]] * 2 + ([appearence[4]] * 2 if appearence[4] and len(appearence[4]) &gt; 0 else []))\n    else:\n        result.append([appearence[4]] * 4)\nfor item in result:\n    print(item)\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>[['A'], ['A']]\n[['A', 'B', 'C'], ['A', 'B', 'C']]\n[['D'], ['D'], ['D'], ['D']]\n[['D', 'E', 'F'], ['D', 'E', 'F'], ['D', 'E', 'F'], ['D', 'E', 'F']]\n[['A', 'B', 'C', 'D', 'E', 'F'], ['A', 'B', 'C', 'D', 'E', 'F'], ['D', 'E', 'F'], ['D', 'E', 'F']]\n[['A', 'C', 'E'], ['A', 'C', 'E'], ['E'], ['E']]\n[Finished in 0.178s]\n</code></pre>\n"}], "owner": {"reputation": 374, "user_id": 8367234, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e858cadab898981618f280c7d2ba2a5?s=128&d=identicon&r=PG&f=1", "display_name": "Joylove", "link": "https://stackoverflow.com/users/8367234/joylove"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 49909185, "answer_count": 3, "score": 1, "last_activity_date": 1524096661, "creation_date": 1524085822, "last_edit_date": 1524096661, "question_id": 49909061, "link": "https://stackoverflow.com/questions/49909061/product-of-lists-of-lists-with-variable-members", "title": "Product of lists of lists with variable members", "body": "<p>Say I have this input data</p>\n\n<pre><code>my_input_list = [[A],[A,B,C],[D],[D,E,F],[A,B,C,D,E,F],[A,C,E]]\nitems_that_appear_twice = [A,B,C]\nitems_that_appear_four = [D,E,F]\n</code></pre>\n\n<p>And I want to create an expansion such that some elements are only allowed to appear twice.</p>\n\n<pre><code>my_output_list = [\n[A],[A],\n[A,B,C],[A,B,C],\n[D],[D],[D],[D],\n[D,E,F],[D,E,F],[D,E,F],[D,E,F],\n[A,B,C,D,E,F],[A,B,C,D,E,F],[D,E,F],[D,E,F],\n[A,C,E],[A,C,E],[E],[E]]\n</code></pre>\n\n<p>I tired a few ideas and didn't find a really neat solution, like building lists of four and <code>list.remove()</code> from them which generated two empty lists.\nFor example list removal techniques on <code>my_input_list[0]*4</code> gives <code>[A],[A],[],[]</code> (two empty lists) when I want <code>[A],[A]</code> .</p>\n"}, {"tags": ["python", "algorithm", "function", "loops"], "answers": [{"tags": [], "owner": {"reputation": 28245, "user_id": 1547004, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5255289d0269d550a4e80e6bf6b0f590?s=128&d=identicon&r=PG", "display_name": "Brendan Abel", "link": "https://stackoverflow.com/users/1547004/brendan-abel"}, "is_accepted": false, "score": 7, "last_activity_date": 1524086513, "last_edit_date": 1524086513, "creation_date": 1524086139, "answer_id": 49909127, "question_id": 49909039, "link": "https://stackoverflow.com/questions/49909039/python-suggestions-in-reducing-complexity/49909127#49909127", "title": "Python: Suggestions in reducing complexity", "body": "<p>You could simplify your code by using <a href=\"https://docs.python.org/3/library/stdtypes.html#sequence-types-list-tuple-range\" rel=\"noreferrer\">advanced slicing</a> on strings</p>\n\n<pre><code>s = input().strip()\nprint(s[::2], s[1::2])\n</code></pre>\n\n<p>For <code>s[i:j:k]</code></p>\n\n<p><code>i</code> is the start index, if omitted, it just uses <code>0</code></p>\n\n<p><code>j</code> is the end index, if omitted, it just uses <code>len(s)</code></p>\n\n<p><code>k</code> is the step value, so it will iterate though the sequence by that amount.</p>\n\n<p>So for even indexed characters, we start at the <code>0</code> index and step through every other character.  For odd indexed characters, we just start at the <code>1</code> index and get every other character.</p>\n"}], "owner": {"reputation": 33, "user_id": 7135730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/041fee894a83edbab76138db923f839b?s=128&d=identicon&r=PG&f=1", "display_name": "ysp", "link": "https://stackoverflow.com/users/7135730/ysp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1524086513, "creation_date": 1524085703, "last_edit_date": 1524085845, "question_id": 49909039, "link": "https://stackoverflow.com/questions/49909039/python-suggestions-in-reducing-complexity", "title": "Python: Suggestions in reducing complexity", "body": "<p><strong>Task:</strong> Given a string, S, of length N that is indexed from 0 to N-1 , print its even-indexed and odd-indexed characters as 2 space-separated strings on a single line.</p>\n\n<p><strong>Input Format</strong>: The first line contains an integer, T (the number of test cases). \nEach line  i of the T subsequent lines contain a String S, .</p>\n\n<p><strong>Constraints</strong> : T in range(1,11), len of String S in range(2,10001).</p>\n\n<pre><code>T = int(input().strip())\nif T in range(1,11):\n    for i in range(T):\n        S = str(input().strip())\n        arr= []\n        arr +=S\n        #print(arr[1])\n        eve = []\n        odd = []\n        if len(arr) in range(2,10001):\n            for n in range(0,len(arr)):\n                if n%2 ==0:\n                    eve.append(arr[n])\n                else:\n                    odd.append(arr[n])\n        eve1 = ''.join(eve)\n        odd1 = ''.join(odd)\n        print(eve1,odd1)\n</code></pre>\n"}, {"tags": ["python", "string", "python-3.x", "list", "list-comprehension"], "comments": [{"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 1, "creation_date": 1524085715, "post_id": 49909027, "comment_id": 86833982, "body": "How would a string be even? Are you trying to test the <i>length</i>?"}, {"owner": {"reputation": 198, "user_id": 8865512, "user_type": "registered", "profile_image": "https://graph.facebook.com/838766229569328/picture?type=large", "display_name": "blockByblock", "link": "https://stackoverflow.com/users/8865512/blockbyblock"}, "reply_to_user": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1524085809, "post_id": 49909027, "comment_id": 86834013, "body": "Thank you!!! Feel like dumb right now. Yes wanted to test their length"}, {"owner": {"reputation": 461, "user_id": 6352735, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f86af23beeb0b4bcb98dc138f03a461e?s=128&d=identicon&r=PG&f=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/6352735/michael"}, "edited": false, "score": 0, "creation_date": 1524086149, "post_id": 49909027, "comment_id": 86834141, "body": "You&#39;re trying to see if a string is even or not?? I&#39;m having trouble seeing where you are going with this. Are you trying to see if the number of characters is even or not??"}], "answers": [{"tags": [], "owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "is_accepted": true, "score": 5, "last_activity_date": 1524085932, "last_edit_date": 1524085932, "creation_date": 1524085791, "answer_id": 49909054, "question_id": 49909027, "link": "https://stackoverflow.com/questions/49909027/python-list-comprehension-even-string-length-or-not/49909054#49909054", "title": "Python list comprehension even string length or not", "body": "<p>You are using the <code>%</code> operator on a string:</p>\n\n<pre><code>&gt;&gt;&gt; x = 'A'\n&gt;&gt;&gt; x % 2\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nTypeError: not all arguments converted during string formatting\n</code></pre>\n\n<p>When using <code>%</code> on a string, you are not getting the modulus, but are using <a href=\"https://docs.python.org/3/library/stdtypes.html#old-string-formatting\" rel=\"nofollow noreferrer\"><em><code>printf</code>-style string formatting</em></a> instead. And that requires a <code>%</code>-style placeholder for the value on the right to be formatted into. With no placeholders in the string on the left, you get the error you see.</p>\n\n<p>If you wanted to test if the <em>length</em> of the string is even, you need to use the <code>len()</code> function to get that length:</p>\n\n<pre><code>myList3 = ['even' if len(x) % 2 == 0 else 'nope' for x in myNames]\n</code></pre>\n\n<p>Demo:</p>\n\n<pre><code>&gt;&gt;&gt; myNames = ['A','BB','CCC','DDDD']\n&gt;&gt;&gt; ['even' if len(x) % 2 == 0 else 'nope' for x in myNames]\n['nope', 'even', 'nope', 'even']\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "is_accepted": false, "score": 0, "last_activity_date": 1524085797, "creation_date": 1524085797, "answer_id": 49909056, "question_id": 49909027, "link": "https://stackoverflow.com/questions/49909027/python-list-comprehension-even-string-length-or-not/49909056#49909056", "title": "Python list comprehension even string length or not", "body": "<p>The <code>%</code> operator, when used with a string as the left-hand argument, is for printf-style formatting. If you want to test the <em>length</em> of your strings, you need to convert from string to the length with <code>len</code>, e.g.</p>\n\n<pre><code>myList3 = [ 'even' if len(x) % 2==0 else 'nope' for x in myNames]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "is_accepted": false, "score": 2, "last_activity_date": 1524086411, "creation_date": 1524086411, "answer_id": 49909177, "question_id": 49909027, "link": "https://stackoverflow.com/questions/49909027/python-list-comprehension-even-string-length-or-not/49909177#49909177", "title": "Python list comprehension even string length or not", "body": "<p>The other answers explain why your syntax is incorrect.</p>\n\n<p>If you are interested, here is an alternative implementation using a dictionary.</p>\n\n<p>Eliminating <code>if</code> / <code>else</code> constructs in favour of a dictionary is often both efficient and readable.</p>\n\n<pre><code>myNames = ['A','BB','CCC','DDDD']\n\nmapper = {0: 'even', 1: 'nope'}\nres = [mapper[len(i) %2] for i in myNames]\n\n# ['nope', 'even', 'nope', 'even']\n</code></pre>\n"}], "owner": {"reputation": 198, "user_id": 8865512, "user_type": "registered", "profile_image": "https://graph.facebook.com/838766229569328/picture?type=large", "display_name": "blockByblock", "link": "https://stackoverflow.com/users/8865512/blockbyblock"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 382, "favorite_count": 0, "accepted_answer_id": 49909054, "answer_count": 3, "score": 0, "last_activity_date": 1524086619, "creation_date": 1524085642, "last_edit_date": 1524086619, "question_id": 49909027, "link": "https://stackoverflow.com/questions/49909027/python-list-comprehension-even-string-length-or-not", "title": "Python list comprehension even string length or not", "body": "<p>I am trying to print \"even\" or not with list comprehension, but I get an error.</p>\n\n<pre><code>myNames = ['A','BB','CCC','DDDD']\nmyList3 = [ 'even' if x%2==0 else 'nope' for x in myNames]\n\nError: TypeError: not all arguments converted during string formatting\n</code></pre>\n\n<p>What is the reason behind it? </p>\n"}, {"tags": ["python", "python-3.x", "bluetooth", "pybluez"], "answers": [{"tags": [], "owner": {"reputation": 144, "user_id": 9014975, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3BoIc.jpg?s=128&g=1", "display_name": "Yaoshicn", "link": "https://stackoverflow.com/users/9014975/yaoshicn"}, "is_accepted": true, "score": 0, "last_activity_date": 1524086716, "last_edit_date": 1524086716, "creation_date": 1524086082, "answer_id": 49909112, "question_id": 49909005, "link": "https://stackoverflow.com/questions/49909005/oserror-on-pybluez-0-22/49909112#49909112", "title": "OSError on PyBluez 0.22", "body": "<p>This is because <a href=\"https://pypi.org/project/PyBluez/#description\" rel=\"nofollow noreferrer\">PyBluez</a> only works with GNU/Linux and Windows XP with guarantee. And you are trying to use PyBluez on Win10.</p>\n\n<p>You may try to plug your bluetooth device on a USB 3.0 port as mentioned in this <a href=\"https://github.com/pybluez/pybluez/issues/155\" rel=\"nofollow noreferrer\">issue</a>.</p>\n"}], "owner": {"reputation": 13, "user_id": 8795429, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92ef2206fc86705f9f1c4371f7842934?s=128&d=identicon&r=PG&f=1", "display_name": "G. Thaler", "link": "https://stackoverflow.com/users/8795429/g-thaler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1700, "favorite_count": 0, "accepted_answer_id": 49909112, "answer_count": 1, "score": 0, "last_activity_date": 1536535904, "creation_date": 1524085548, "question_id": 49909005, "link": "https://stackoverflow.com/questions/49909005/oserror-on-pybluez-0-22", "title": "OSError on PyBluez 0.22", "body": "<p>Running PyBluez on Windows 10 and Python 3.6, I get OSError everytime I call the bluetooth.discover_devices() function.</p>\n\n<p>As of now, the codes only consists in 3 lines:</p>\n\n<pre><code>import bluetooth\n\nprint \"Searching for devices... \\n\"\nnearby_devices = bluetooth.discover_devices()\n</code></pre>\n\n<p>Console then gives:</p>\n\n<pre><code>Searching for devices...\nTraceback (most recent call last):\n  File \"D:\\Documentos\\UFSC\\9\u00aa Fase\\Projeto Integrador\\testeBT.py\", line 9, in &lt;module&gt;\n    nearby_devices = bluetooth.discover_devices()\n  File \"C:\\Users\\Thaler\\AppData\\Local\\Programs\\Python\\Python36-32\\lib\\site-packages\\bluetooth\\msbt.py\", line 15, in discover_devices\n    devices = bt.discover_devices(duration=duration, flush_cache=flush_cache)\nOSError\n</code></pre>\n\n<p>Any solution? I've never used PyBluez before, and this was supposed to be a simple test program...</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 502, "user_id": 462794, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/590ab8e31e515d6d8666c8b81f3a1317?s=128&d=identicon&r=PG", "display_name": "Bussiere", "link": "https://stackoverflow.com/users/462794/bussiere"}, "reply_to_user": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 0, "creation_date": 1524086031, "post_id": 49908986, "comment_id": 86834102, "body": "@wim there &#39;s not the combination theme and different size of combination in the answer you marked as duplicate."}, {"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 1, "creation_date": 1524086952, "post_id": 49908986, "comment_id": 86834480, "body": "OK, fair enough.  Re-opened."}], "answers": [{"tags": [], "owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "is_accepted": true, "score": 2, "last_activity_date": 1524087427, "last_edit_date": 1524087427, "creation_date": 1524087076, "answer_id": 49909338, "question_id": 49908986, "link": "https://stackoverflow.com/questions/49908986/how-to-make-all-combinations-of-many-functions-in-python/49909338#49909338", "title": "How to make all combinations of many functions in python?", "body": "<p>First the combinations part:</p>\n\n<pre><code>&gt;&gt;&gt; functions = [first, second, third]\n&gt;&gt;&gt; from itertools import combinations, permutations\n&gt;&gt;&gt; for n in range(len(functions)):\n...     for comb in combinations(functions, n + 1):\n...         for perm in permutations(comb, len(comb)):\n...             print('_'.join(f.__name__ for f in perm))\n...             \nfirst\nsecond\nthird\nfirst_second\nsecond_first\nfirst_third\nthird_first\nsecond_third\nthird_second\nfirst_second_third\nfirst_third_second\nsecond_first_third\nsecond_third_first\nthird_first_second\nthird_second_first\n</code></pre>\n\n<p>Next the composing part, steal the <code>@Composable</code> decorator from the question <a href=\"https://stackoverflow.com/q/30195045/674039\">How to multiply functions in python?</a> and use it to compose functions from each permutation.</p>\n\n<pre><code>from operator import mul\nfrom functools import reduce\nfor n in range(len(functions)):\n    for comb in combinations(functions, n + 1):\n        for perm in permutations(comb, len(comb)):\n            func_name = '_'.join(f.__name__ for f in perm)\n            func = reduce(mul, [Composable(f) for f in perm])\n            d[func_name] = func\n</code></pre>\n\n<p>Now you have a namespace of functions (actually callable classes), demo:</p>\n\n<pre><code>&gt;&gt;&gt; f = d['third_first_second']\n&gt;&gt;&gt; f(123)\n254.0\n&gt;&gt;&gt; third(first(second(123)))\n254.0\n&gt;&gt;&gt; ((123 / 2) + 2) * 4\n254.0\n</code></pre>\n"}], "owner": {"reputation": 502, "user_id": 462794, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/590ab8e31e515d6d8666c8b81f3a1317?s=128&d=identicon&r=PG", "display_name": "Bussiere", "link": "https://stackoverflow.com/users/462794/bussiere"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 1, "accepted_answer_id": 49909338, "answer_count": 1, "score": 1, "last_activity_date": 1524087427, "creation_date": 1524085471, "last_edit_date": 1524085983, "question_id": 49908986, "link": "https://stackoverflow.com/questions/49908986/how-to-make-all-combinations-of-many-functions-in-python", "title": "How to make all combinations of many functions in python?", "body": "<p>So i have </p>\n\n<pre><code>x = 3 \n\ndef first(x):\n    return x+2\n\ndef second(x):\n    return x/2\n\ndef third(x):\n    return x*4\n</code></pre>\n\n<p>I would like to make a pipe of functions like :</p>\n\n<p>first -> second -> third</p>\n\n<p>but all combinations of functions :\nlike first -> second , first -> third</p>\n\n<p>and get each time the value of x for each combination.</p>\n\n<p>And i don't need not only to multiply them but to be able to make multiple combination of various length.</p>\n\n<p>Here it's just fixed number of combination : \n<a href=\"https://stackoverflow.com/questions/30195045/how-to-multiply-functions-in-python\">How to multiply functions in python?</a></p>\n\n<p>regards and thanks</p>\n"}, {"tags": ["python", "asynchronous"], "comments": [{"owner": {"reputation": 4693, "user_id": 5501536, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/50b9ab14ab8699a3862c14ee48126abe?s=128&d=identicon&r=PG&f=1", "display_name": "chevybow", "link": "https://stackoverflow.com/users/5501536/chevybow"}, "edited": false, "score": 0, "creation_date": 1524085583, "post_id": 49908972, "comment_id": 86833939, "body": "It means you are running out of memory. It is unclear why without looking at your code- but your dump method is using up too much memory. <a href=\"https://docs.python.org/3/library/exceptions.html\" rel=\"nofollow noreferrer\">docs.python.org/3/library/exceptions.html</a>"}, {"owner": {"reputation": 1796, "user_id": 5532710, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-aPOwlZda9jk/AAAAAAAAAAI/AAAAAAAAGLg/Jgn71nR389c/photo.jpg?sz=128", "display_name": "Carlo Zanocco", "link": "https://stackoverflow.com/users/5532710/carlo-zanocco"}, "edited": false, "score": 0, "creation_date": 1598705052, "post_id": 49908972, "comment_id": 112549012, "body": "Hi @user3813960, as first thing you can try to profile the memory usage, take a look <a href=\"https://stackoverflow.com/questions/552744/how-do-i-profile-memory-usage-in-python\">here</a>. Add some code to your question, maybe the task that you think is more expansive, also post the output of the memory profiling. With some extra details we can help you better understand where the problem is, also share your OS info. Thanks."}], "owner": {"reputation": 71, "user_id": 3813960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6c6f1106413f6c136974b735d51990e?s=128&d=identicon&r=PG&f=1", "display_name": "user3813960", "link": "https://stackoverflow.com/users/3813960/user3813960"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 529, "favorite_count": 0, "answer_count": 0, "score": 6, "last_activity_date": 1598703877, "creation_date": 1524085397, "last_edit_date": 1598703877, "question_id": 49908972, "link": "https://stackoverflow.com/questions/49908972/generic-python-error-memoryerror", "title": "Generic Python Error &quot;MemoryError&quot;", "body": "<p>I have a Python program that runs in several processes, and I periodically get the following error message that I can't resolve...or even really tie down to a specific section of code.  Any suggestions on the cause, or a way to trap for this error and continue around it?</p>\n\n<pre><code> File \"/usr/lib/python3.4/multiprocessing/queues.py\", line 242, in _feed\n    obj = ForkingPickler.dumps(obj)\n  File \"/usr/lib/python3.4/multiprocessing/reduction.py\", line 50, in dumps\n    cls(buf, protocol).dump(obj)\nMemoryError\n</code></pre>\n\n<p>I am running Python 3.4.2</p>\n"}, {"tags": ["python", "amazon-web-services", "amazon-ec2", "boto3", "aws-cli"], "answers": [{"tags": [], "owner": {"reputation": 141, "user_id": 8791134, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3cc70f9a56c1d299301b46de56333b3e?s=128&d=identicon&r=PG&f=1", "display_name": "Darrell Plessas", "link": "https://stackoverflow.com/users/8791134/darrell-plessas"}, "is_accepted": false, "score": 0, "last_activity_date": 1524092155, "creation_date": 1524092155, "answer_id": 49910212, "question_id": 49908912, "link": "https://stackoverflow.com/questions/49908912/how-can-i-use-python-boto3-to-cycle-through-all-aws-ec2-instances-and-remove-a/49910212#49910212", "title": "How can I use python (BOTO3) to cycle through all AWS EC2 instances and remove a security group from them?", "body": "<p>You are calling the wrong class, you want modify_instance_attribute instead of delete_security_group. Delete_security_group will remove the sq from your account if it worked, but it would fail if there are things using the security group. Look at this instead, focus on the Groups section: </p>\n\n<p><a href=\"https://boto3.readthedocs.io/en/latest/reference/services/ec2.html#EC2.Client.modify_instance_attribute\" rel=\"nofollow noreferrer\">https://boto3.readthedocs.io/en/latest/reference/services/ec2.html#EC2.Client.modify_instance_attribute</a></p>\n\n<p>Here is a quick and dirty example, I whipped up to show how to loop through it and set all this instances to the default security group. Hopefully you can take it from here. Good luck</p>\n\n<pre><code>import boto3\n\nboto3.setup_default_session(region_name='us-west-2')\nec2 = boto3.client('ec2')\npaginator = ec2.get_paginator('describe_instances')\ninstances = paginator.paginate().build_full_result()\n\ninstance_list = []\ntry:\n    for reservation in instances['Reservations']:\n        for instance in reservation['Instances']:\n            instance_list.append(instance['InstanceId'])\n\n    for i in image['Images']:\n        client.modify_instance_attribute(InstanceId=image, Groups=['Default',])\n\nexcept Exception as e:\n    print e\n</code></pre>\n"}], "owner": {"reputation": 119, "user_id": 2241296, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/4d8e6e9a6dfc5d060a2f576915dfb6c5?s=128&d=identicon&r=PG", "display_name": "RaptorPete", "link": "https://stackoverflow.com/users/2241296/raptorpete"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1054, "favorite_count": 0, "closed_date": 1524146588, "answer_count": 1, "score": 1, "last_activity_date": 1524092155, "creation_date": 1524085093, "question_id": 49908912, "link": "https://stackoverflow.com/questions/49908912/how-can-i-use-python-boto3-to-cycle-through-all-aws-ec2-instances-and-remove-a", "closed_reason": "Duplicate", "title": "How can I use python (BOTO3) to cycle through all AWS EC2 instances and remove a security group from them?", "body": "<p>I am looking for a script that will cycle through all of my AWS EC2 instances, check for a specific security group, and then delete that group from the instance.</p>\n\n<p>I've been reading through the documentation here: <a href=\"https://boto3.readthedocs.io/en/latest/reference/services/ec2.html#EC2.Client.delete_security_group\" rel=\"nofollow noreferrer\">https://boto3.readthedocs.io/en/latest/reference/services/ec2.html#EC2.Client.delete_security_group</a> but I'm not sure how I can apply that to a for loop within Python or Bash.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "xml", "web-scraping", "beautifulsoup", "elementtree"], "comments": [{"owner": {"reputation": 5895, "user_id": 2834978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05b09a797fd0c59d1627b30fb4cdba01?s=128&d=identicon&r=PG&f=1", "display_name": "Luis Mu&#241;oz", "link": "https://stackoverflow.com/users/2834978/luis-mu%c3%b1oz"}, "edited": false, "score": 0, "creation_date": 1524097454, "post_id": 49908884, "comment_id": 86837609, "body": "Is unmarshalling the xml into a python object an option, instead of a map?"}], "answers": [{"comments": [{"owner": {"reputation": 891, "user_id": 8407951, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/22ac0be4f472b5379a2175a668266f83?s=128&d=identicon&r=PG&f=1", "display_name": "Slowat_Kela", "link": "https://stackoverflow.com/users/8407951/slowat-kela"}, "edited": false, "score": 0, "creation_date": 1524125796, "post_id": 49911233, "comment_id": 86847556, "body": "I really appreciate this. But is the drugbank-plus.xsd file freely available? When I go to the downloads folder of drugbank <a href=\"https://www.drugbank.ca/releases/latest\" rel=\"nofollow noreferrer\">here</a>, there is only a drugbank.xsd file and not drugbank-plus.xsd file? When I have the (1) DB01048.py file, (2)  DB01048.xml and (3) drugbank.xsd file in the one directory and run the code above, I get an error, I&#39;ve added the input and error to my above question to show you, I&#39;m wondering if it&#39;s the result of a difference between drugbank and drugbank-plus?"}, {"owner": {"reputation": 891, "user_id": 8407951, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/22ac0be4f472b5379a2175a668266f83?s=128&d=identicon&r=PG&f=1", "display_name": "Slowat_Kela", "link": "https://stackoverflow.com/users/8407951/slowat-kela"}, "edited": false, "score": 0, "creation_date": 1524126143, "post_id": 49911233, "comment_id": 86847757, "body": "Also just to mention, it may or may not be relevant, when I run <code>pyxbgen -m DB01048 -u drugbank.xsd --no-validate-changes</code>; I get a lot of warning such as <code>WARNING:pyxb.binding.generate:Element use {http:&#47;&#47;www.drugbank.ca}drug-type.{http:&#47;&#47;www.drugbank.ca}vo&zwnj;&#8203;lume-of-distribution renamed to volume_of_distribution</code> ;not sure if it&#39;s important to mention (because from reading around e.g. <a href=\"https://github.com/pabigot/pyxb/issues/60\" rel=\"nofollow noreferrer\">here</a>, it doesn&#39;t seem to cause other people issues."}, {"owner": {"reputation": 891, "user_id": 8407951, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/22ac0be4f472b5379a2175a668266f83?s=128&d=identicon&r=PG&f=1", "display_name": "Slowat_Kela", "link": "https://stackoverflow.com/users/8407951/slowat-kela"}, "edited": false, "score": 0, "creation_date": 1524126577, "post_id": 49911233, "comment_id": 86847986, "body": "Another thing I&#39;ve noticed that is wrong with my original script is that for some reason it duplicates the data in the output dictionary, but maybe that&#39;s to do with a for loop or something."}, {"owner": {"reputation": 5895, "user_id": 2834978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05b09a797fd0c59d1627b30fb4cdba01?s=128&d=identicon&r=PG&f=1", "display_name": "Luis Mu&#241;oz", "link": "https://stackoverflow.com/users/2834978/luis-mu%c3%b1oz"}, "reply_to_user": {"reputation": 891, "user_id": 8407951, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/22ac0be4f472b5379a2175a668266f83?s=128&d=identicon&r=PG&f=1", "display_name": "Slowat_Kela", "link": "https://stackoverflow.com/users/8407951/slowat-kela"}, "edited": false, "score": 1, "creation_date": 1524152590, "post_id": 49911233, "comment_id": 86866113, "body": "The <code>drugbank-plus.xsd</code> is declared in the XML first tag, so it must be public for consumers to parse it. Regarding the warnings, seems to be caused by hyphens in element names, couldn&#39;t figure out how to avoid it yet. You could also observed an error related to <code>exported-on</code> attribute on some elements, to fix it you need to add a couple of lines to DB01048.py. Unfortunately don&#39;t have them at hand, will add to the answer later today."}, {"owner": {"reputation": 891, "user_id": 8407951, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/22ac0be4f472b5379a2175a668266f83?s=128&d=identicon&r=PG&f=1", "display_name": "Slowat_Kela", "link": "https://stackoverflow.com/users/8407951/slowat-kela"}, "edited": false, "score": 0, "creation_date": 1524479774, "post_id": 49911233, "comment_id": 86973920, "body": "Thanks; so <a href=\"https://www.drugbank.ca/releases/latest\" rel=\"nofollow noreferrer\">here</a>; I seem to only be able to get drugbank.xsd; is this where you got your file from? Yes the warnings are fine, I&#39;ve been checking around. If you could, I would appreciate it. Thanks."}, {"owner": {"reputation": 5895, "user_id": 2834978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05b09a797fd0c59d1627b30fb4cdba01?s=128&d=identicon&r=PG&f=1", "display_name": "Luis Mu&#241;oz", "link": "https://stackoverflow.com/users/2834978/luis-mu%c3%b1oz"}, "reply_to_user": {"reputation": 891, "user_id": 8407951, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/22ac0be4f472b5379a2175a668266f83?s=128&d=identicon&r=PG&f=1", "display_name": "Slowat_Kela", "link": "https://stackoverflow.com/users/8407951/slowat-kela"}, "edited": false, "score": 1, "creation_date": 1524490209, "post_id": 49911233, "comment_id": 86980901, "body": "hey, I got the url form the root tag of the xml (second URL in xsi:schemaLocation namespace declaration): <code>&lt;drugbank xmlns=&quot;http:&#47;&#47;www.drugbank.ca&quot; xmlns:xsi=&quot;http:&#47;&#47;www.w3.org&#47;2001&#47;XMLSchema-instance&quot; xsi:schemaLocation=&quot;http:&#47;&#47;www.drugbank.ca http:&#47;&#47;www.drugbank.ca&#47;docs&#47;drugbank-plus.xsd&quot; version=&quot;5.1&quot;&gt;</code>. Open it in a browser or download with wget/curl."}, {"owner": {"reputation": 891, "user_id": 8407951, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/22ac0be4f472b5379a2175a668266f83?s=128&d=identicon&r=PG&f=1", "display_name": "Slowat_Kela", "link": "https://stackoverflow.com/users/8407951/slowat-kela"}, "edited": false, "score": 0, "creation_date": 1524500986, "post_id": 49911233, "comment_id": 86988011, "body": "Thank you so much for your help, it was invaluable."}, {"owner": {"reputation": 5895, "user_id": 2834978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05b09a797fd0c59d1627b30fb4cdba01?s=128&d=identicon&r=PG&f=1", "display_name": "Luis Mu&#241;oz", "link": "https://stackoverflow.com/users/2834978/luis-mu%c3%b1oz"}, "reply_to_user": {"reputation": 891, "user_id": 8407951, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/22ac0be4f472b5379a2175a668266f83?s=128&d=identicon&r=PG&f=1", "display_name": "Slowat_Kela", "link": "https://stackoverflow.com/users/8407951/slowat-kela"}, "edited": false, "score": 0, "creation_date": 1524502347, "post_id": 49911233, "comment_id": 86988750, "body": "My pleasure, glad to hear it helped."}], "tags": [], "owner": {"reputation": 5895, "user_id": 2834978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05b09a797fd0c59d1627b30fb4cdba01?s=128&d=identicon&r=PG&f=1", "display_name": "Luis Mu&#241;oz", "link": "https://stackoverflow.com/users/2834978/luis-mu%c3%b1oz"}, "is_accepted": true, "score": 2, "last_activity_date": 1524152834, "last_edit_date": 1524152834, "creation_date": 1524100649, "answer_id": 49911233, "question_id": 49908884, "link": "https://stackoverflow.com/questions/49908884/parsing-file-with-elementtree-and-beautifulsoup-is-there-a-way-to-parse-the-fil/49911233#49911233", "title": "Parsing file with ElementTree and BeautifulSoup: is there a way to parse the file by number of tag levels?", "body": "<p>A more pythonic method could be to use the PyXB package to generate a python object unmarshalled from the xml file.</p>\n\n<ul>\n<li>Install PyXB package</li>\n</ul>\n\n<p><code>pip install PyXB</code></p>\n\n<ul>\n<li>Create python module from downloaded xsd. Will create DB01048.py</li>\n</ul>\n\n<p><code>pyxbgen -m DB01048 -u drugbank-plus.xsd --no-validate-changes</code></p>\n\n<ul>\n<li><p>Use the generated module as</p>\n\n<pre><code>from __future__ import print_function\nimport DB01048\n\nxml = open('DB01048.xml').read()\nd_01048 = DB01048.CreateFromDocument(xml)\n\nprint(d_01048.drug[0].state)\nprint(d_01048.drug[0].name)\nprint(d_01048.drug[0].general_references.articles.article[0].pubmed_id)\n</code></pre></li>\n</ul>\n\n<p><code>solid\n Abacavir\n 17356469</code></p>\n\n<p>If a MissingAttribute error appears related to some <code>exported-on</code> attribute, add the following lines before the first Class on DB01048.py</p>\n\n<p><code>pyxb.RequireValidWhenParsing(True)\npyxb.RequireValidWhenParsing(False)\n</code></p>\n"}], "owner": {"reputation": 891, "user_id": 8407951, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/22ac0be4f472b5379a2175a668266f83?s=128&d=identicon&r=PG&f=1", "display_name": "Slowat_Kela", "link": "https://stackoverflow.com/users/8407951/slowat-kela"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1049, "favorite_count": 1, "accepted_answer_id": 49911233, "answer_count": 1, "score": 1, "last_activity_date": 1524152834, "creation_date": 1524084972, "last_edit_date": 1524125971, "question_id": 49908884, "link": "https://stackoverflow.com/questions/49908884/parsing-file-with-elementtree-and-beautifulsoup-is-there-a-way-to-parse-the-fil", "title": "Parsing file with ElementTree and BeautifulSoup: is there a way to parse the file by number of tag levels?", "body": "<p>I have <a href=\"https://www.drugbank.ca/drugs/DB01048.xml\" rel=\"nofollow noreferrer\">this</a> xml file, and I basically want to record all of the information into a dictionary.</p>\n\n<p>I wrote this code:</p>\n\n<pre><code>import requests\nimport xml.etree.ElementTree as ET\nimport urllib2\nimport glob\nimport pprint\nfrom bs4 import BeautifulSoup\n\n#get the XML file\n#response = requests.get('https://www.drugbank.ca/drugs/DB01048.xml')\n#with open('output.txt', 'w') as input:\n#          input.write(response.content)\n\n\n#set up lists etc\nset_of_files = glob.glob('output*txt')\nval = lambda x: \"{http://www.drugbank.ca}\" + str(x)\nkey_list = ['drugbank-id','name','description','cas-number','unii','average-mass','monoisotopic-mass','state','indication','pharmacodynamics','mechanism-of-action','toxicity','metabolism','absorption','half-life','protein-binding','route-of-elimination','volume-of-distribution','fda-label','msds']\nkey_dict = {}\nmethod1 = ['groups','synonyms','patent']\nmethod3_inputs = [('dosages','dosage'),('salts','salt'),('products','product'),('mixtures','mixture'),('packagers','packager'),('categories','category'),('atc-codes','atc-code'),('pdb-entries','pdb-entry'),('food-interactions','food-interaction'),('drug-interactions','drug-interaction'),('properties','property'),('external-identifiers','external-identifier'),('external-links','external-link'),('reactions','reaction')]\nlist_to_run_thru = ['description','direct-parent','kingdom','superclass','class','subclass']\nalternative_parents = []\nhttp_add = '{http://www.drugbank.ca}'\nsubstituents = []\nap_sub = lambda x:'{http://www.drugbank.ca}'+ x\n\ndef method2(list2_name,list3_name,list4_name):\n     temp_list = []\n     for i in subnode:\n          if i.tag == list2_name:\n               for a in i:\n                    if a.tag == list3_name:\n                         for u in a:\n                              if u.tag == list4_name:\n                                   temp_list.append(u.text)\n     return temp_list\n\ndef method3(list1_name):\n     list_of_tuples = []\n     for i in subnode:\n          if i.tag == list1_name:\n               temp_list = []\n               for a in i:\n                    temp_list.append(a.text)\n                    list_of_tuples.append(temp_list)\n     return list_of_tuples\n\nnew_method3 = []\nfor i in method3_inputs:\n     new_k = http_add + i[0]\n     new_v = http_add + i[1]\n     new_method3.append((new_k,new_v))\n\nfor each_file in set_of_files:\n     tree = ET.parse(each_file)\n     root = tree.getroot()\n     for i in key_list:\n          for child in root.getchildren():\n               if i not in key_dict:\n                    key_dict[i] = [child.find(val(i)).text.encode('utf-8')]\n               else:\n                    key_dict[i].append(child.find(val(i)).text.encode('utf-8'))\n\n     for node in root:\n          for subnode in node:\n               if subnode.tag == '{http://www.drugbank.ca}general-references':\n                    if 'pubmed-id' not in key_dict:\n                         key_dict['pubmed-id'] = method2('{http://www.drugbank.ca}articles','{http://www.drugbank.ca}article','{http://www.drugbank.ca}pubmed-id')\n                    else:\n                         key_dict['pubmed-id'].append(method2('{http://www.drugbank.ca}articles','{http://www.drugbank.ca}article','{http://www.drugbank.ca}pubmed-id'))\n\n               for a,b in zip(method3_inputs,new_method3):\n                    if subnode.tag == b[0]:\n                         if a[0] not in key_dict:\n                              key_dict[a[0]] = method3(b[1])\n                         else:\n                              key_dict[method3_inputs].append(method3(b[1]))\n\n               if subnode.tag == '{http://www.drugbank.ca}classification': \n                    for each_item in list_to_run_thru:\n                         for i in subnode:\n                               if i.tag == ap_sub(each_item):\n                                   if i.tag == '{http://www.drugbank.ca}alternative-parent':\n                                         alternative_parents.append(i.text)  \n                                   if i.tag == '{http://www.drugbank.ca}substituent':\n                                         substituents.append(i.text)  \n\n               for i in method1:\n                    if subnode.tag == '{http://www.drugbank.ca}' + i:\n                         for n in subnode:\n                              if i not in key_dict:\n                                   key_dict[i] = [n.text]\n                              elif i in key_dict:\n                                   key_dict[i].append(n.text)\n\n               if subnode.tag == '{http://www.drugbank.ca}pathways':\n                    if 'pathways'not in key_dict:\n                         key_dict['pathways'] = method2('{http://www.drugbank.ca}pathways','{http://www.drugbank.ca}pathway','{http://www.drugbank.ca}drug')\n                    else:\n                         key_dict['pathways'].append(method2('{http://www.drugbank.ca}pathways','{http://www.drugbank.ca}pathway','{http://www.drugbank.ca}drug'))\n\n\nkey_dict['alternative_parents'] = alternative_parents\nkey_dict['substituent'] = substituents\n\n\nhtml = requests.get('https://www.drugbank.ca/drugs/DB01048').text\nsoup = BeautifulSoup(html, 'html.parser')\ndiv_targets = soup.find('div', class_='bond-list-container targets')\ntargets = div_targets.find_all('div', class_='bond card')\n\nfor target in targets:\n    k = []\n    v = []\n    for property in target.find_all('dt'):\n        k.append(property.get_text())\n    for property in target.find_all('dd'):\n        v.append(property.get_text())\n    key_dict[target.find('strong').get_text()] = dict(zip(k, v))\n\nprint key_dict.keys()\n</code></pre>\n\n<p>The code runs on the XML file described fine. But there are some issues I would like to see if anyone can improve:</p>\n\n<ol>\n<li>You can clearly see I had to hard-code a lot of it. For example, some of the tags are one-layer deep (e.g. drugbank-id), some are two layers deep (e.g. groups -> group), some are three layers deep (e.g. products, product,name) etc.</li>\n</ol>\n\n<p>You can see that I've written a function for the two and three layers deep (the functions are called method3 and method2), and then I've hardcoded in lists that belong to each function.</p>\n\n<p>I'm wondering can anyone show me code that is better/cleaner/more efficient than this. My idea would be that I have a list of IDs (e.g. description, products) and somehow the function understands 'this is a 3-layer tag (e.g. products -> product ->name), so then I don't have to hard code in all the 3-layer tags, all the 2-layer tags etc. something like having an if statement 'if tags are 3-layers deep...do this function....if tags are 2-layers deep....do this'.</p>\n\n<ol start=\"2\">\n<li><p>Disclaimer: I know this method uses both BeautifulSoup and ET to parse, as I was stuck on a section and got help <a href=\"https://stackoverflow.com/questions/49904532/difficulty-parsing-a-section-of-xml-file-with-elementtree\">here</a>. Unfortunately I need to master one before I can move on, and I found the HTML version much more confusing than the XML, for now, so that's why the script parses the file from both a XML and HTML perspective.</p></li>\n<li><p>Does anyone have any general comments on how this script can be made cleaner? The idea would be to take each of the 'top-level' tags (i.e. everything immediately below the 'drug type' tag) and then basically pull down all that info into dictionaries/lists/whatever, and then whenever I want to search for something, I can just search the dictionary for the 'top level' word and it has sub-data for that tag that I can read through (and the levels are organised properly, e.g. if there is only one level below the tag, just a string is fine, but if there is a lot of tags below the tag, maybe returning a dictionary/list/tuple/something more appropriate).</p></li>\n</ol>\n\n<p>Edit:\nBased on the below help, I downloaded drugbank.xsd and ran this command:</p>\n\n<pre><code>pyxbgen -m DB01048 -u drugbank.xsd --no-validate-changes\n</code></pre>\n\n<p>and then this script:</p>\n\n<pre><code>from __future__ import print_function\nimport DB01048\n\nxml = open('DB01048.xml').read()\nd_01048 = DB01048.CreateFromDocument(xml)\n\n#print(d_01048.drug[0].state)\n#print(d_01048.drug[0].name)\n#print(d_01048.drug[0].general_references.articles.article[0].pubmed_id)\n</code></pre>\n\n<p>and the error:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"parse_drug_db.py\", line 5, in &lt;module&gt;\n    d_01048 = DB01048.CreateFromDocument(xml)\n  File \"/home/drugs/DB01048.py\", line 65, in CreateFromDocument\n    saxer.parse(io.BytesIO(xmld))\n  File \"/usr/lib/python2.7/xml/sax/expatreader.py\", line 110, in parse\n    xmlreader.IncrementalParser.parse(self, source)\n  File \"/usr/lib/python2.7/xml/sax/xmlreader.py\", line 123, in parse\n    self.feed(buffer)\n  File \"/usr/lib/python2.7/xml/sax/expatreader.py\", line 213, in feed\n    self._parser.Parse(data, isFinal)\n  File \"/usr/lib/python2.7/xml/sax/expatreader.py\", line 365, in end_element_ns\n    self._cont_handler.endElementNS(pair, None)\n  File \"/home/aoidoh/bin/local/lib/python2.7/site-packages/pyxb/binding/saxer.py\", line 388, in endElementNS\n    binding_object = this_state.endBindingElement()\n  File \"/home/aoidoh/bin/local/lib/python2.7/site-packages/pyxb/binding/saxer.py\", line 245, in endBindingElement\n    return self.__bindingInstance._postDOMValidate()\n  File \"/home/aoidoh/bin/local/lib/python2.7/site-packages/pyxb/binding/basis.py\", line 2652, in _postDOMValidate\n    self._validateAttributes()\n  File \"/home/aoidoh/bin/local/lib/python2.7/site-packages/pyxb/binding/basis.py\", line 2246, in _validateAttributes\n    au.validate(self)\n  File \"/home/aoidoh/bin/local/lib/python2.7/site-packages/pyxb/binding/content.py\", line 251, in validate\n    raise pyxb.MissingAttributeError(type(ctd_instance), self.__name, ctd_instance)\npyxb.exceptions_.MissingAttributeError: Instance of &lt;class 'DB01048.drugbank_type'&gt; lacks required attribute exported-on\n</code></pre>\n"}, {"tags": ["python", "list", "class"], "comments": [{"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 1, "creation_date": 1524085143, "post_id": 49908859, "comment_id": 86833767, "body": "Not working how? What is not happening that is supposed to be? What errors do you get?"}, {"owner": {"reputation": 11, "user_id": 9666493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fbd1f058d573cafe474bd7bd3e744d8?s=128&d=identicon&r=PG&f=1", "display_name": "user9666493", "link": "https://stackoverflow.com/users/9666493/user9666493"}, "reply_to_user": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1524085423, "post_id": 49908859, "comment_id": 86833884, "body": "@Daniel Roseman so sorry for not including the error message that iam recieving. here it is:          all_movies[movie_code] = [movie_code, movie_title, movie_director]     IndexError: list assignment index out of range"}, {"owner": {"reputation": 8191, "user_id": 8881141, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/C3ydX.jpg?s=128&g=1", "display_name": "Mr. T", "link": "https://stackoverflow.com/users/8881141/mr-t"}, "edited": false, "score": 0, "creation_date": 1524105159, "post_id": 49908859, "comment_id": 86839413, "body": "If you have additional information, please edit your question. You can&#39;t format code/error messages in the comments and people often don&#39;t read comments."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 9666493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fbd1f058d573cafe474bd7bd3e744d8?s=128&d=identicon&r=PG&f=1", "display_name": "user9666493", "link": "https://stackoverflow.com/users/9666493/user9666493"}, "edited": false, "score": 0, "creation_date": 1524116473, "post_id": 49913140, "comment_id": 86842445, "body": "thank you for your assistance. i am using classes for this project so i must keep the init. the movie_list was being used to store additional information if you needed. I will implement the changes and see what happens.   Is there anyway to do this by keeping the information in a list or would dictionary just make it a lot easier?"}, {"owner": {"reputation": 9253, "user_id": 3744747, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/be3e2dbd8f056a7244934fbe197f5b3b?s=128&d=identicon&r=PG", "display_name": "Mehrdad Pedramfar", "link": "https://stackoverflow.com/users/3744747/mehrdad-pedramfar"}, "reply_to_user": {"reputation": 11, "user_id": 9666493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fbd1f058d573cafe474bd7bd3e744d8?s=128&d=identicon&r=PG&f=1", "display_name": "user9666493", "link": "https://stackoverflow.com/users/9666493/user9666493"}, "edited": false, "score": 0, "creation_date": 1524126834, "post_id": 49913140, "comment_id": 86848126, "body": "@user9666493 you can also use list, but the fact that you need to access each movie by its code will guide you to use a dict for your store process."}, {"owner": {"reputation": 11, "user_id": 9666493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fbd1f058d573cafe474bd7bd3e744d8?s=128&d=identicon&r=PG&f=1", "display_name": "user9666493", "link": "https://stackoverflow.com/users/9666493/user9666493"}, "edited": false, "score": 0, "creation_date": 1524143921, "post_id": 49913140, "comment_id": 86859922, "body": "thank you for your help again. I just want to give you a bit more background, this is part of a much bigger project that I am working on. I want the outcome to be as follows:   Video Number:1 Video Code: 1231234 Title: Up Director: Disney   When a new one is added using the code above, it must recognise that the code is the same and give the new Video the next available number eg: 2. It must not allow the title or director to be different if the video code is the same.   Video Number:2 Video Code: 1231234 Title: Up Director: Disney"}, {"owner": {"reputation": 9253, "user_id": 3744747, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/be3e2dbd8f056a7244934fbe197f5b3b?s=128&d=identicon&r=PG", "display_name": "Mehrdad Pedramfar", "link": "https://stackoverflow.com/users/3744747/mehrdad-pedramfar"}, "reply_to_user": {"reputation": 11, "user_id": 9666493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fbd1f058d573cafe474bd7bd3e744d8?s=128&d=identicon&r=PG&f=1", "display_name": "user9666493", "link": "https://stackoverflow.com/users/9666493/user9666493"}, "edited": false, "score": 0, "creation_date": 1524207427, "post_id": 49913140, "comment_id": 86887036, "body": "@user9666493 I am working on it. I will notify you when its ready."}], "tags": [], "owner": {"reputation": 9253, "user_id": 3744747, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/be3e2dbd8f056a7244934fbe197f5b3b?s=128&d=identicon&r=PG", "display_name": "Mehrdad Pedramfar", "link": "https://stackoverflow.com/users/3744747/mehrdad-pedramfar"}, "is_accepted": false, "score": 0, "last_activity_date": 1524209292, "last_edit_date": 1524209292, "creation_date": 1524114712, "answer_id": 49913140, "question_id": 49908859, "link": "https://stackoverflow.com/questions/49908859/updating-a-list-in-a-python-class/49913140#49913140", "title": "Updating a list in a Python class", "body": "<p>First of all this structure is not suitable for your desires. <br>\nAbout the error you got, I should say that you have to define you all movies as a dictionary not a list (because of the that you want to use for each movie). <br>\ntry this:</p>\n\n<pre><code>all_movies = {}\n</code></pre>\n\n<p>in you <code>add_movie</code> method:</p>\n\n<pre><code>@staticmethod\ndef add_movie():\n\n    mv_code = input(\"Code of movie: \")\n    movie_code = int(mv_code)\n    movie_title = input(\"Name of movie: \")\n    movie_director = input(\"Director: \")\n\n    if len(mv_code) == 7:\n       if movie_code in all_movies.keys():\n           print(\"the movie already exists\")\n           # what do you want to happen here ? \n       else:\n           all_movies[movie_code] = (movie_code, movie_title, movie_director)\n           print(\"movie added to database\")\n    else:\n        print(\"the code must be 7 digits long, add movie again.\")\n</code></pre>\n\n<p>This will add a movie to the <code>all_movies</code> and you don't need the rest your code, and i didn't understand the usage of <code>init</code> and <code>movie_list</code>.\n<br>\nTry this, then tell me what happens if the code already exists in the movies, I will update my answer for you. </p>\n\n<h2>UPDATE:</h2>\n\n<p>According to your desires in comment the method will updated to something like this:</p>\n\n<pre><code>@staticmethod\ndef add_movie():\n\n    mv_code = input(\"Code of movie: \")\n    movie_code = int(mv_code)\n    movie_title = input(\"Name of movie: \")\n    movie_director = input(\"Director: \")\n\n    if len(mv_code) == 7:\n       if movie_code in all_movies.keys():\n           print(\"the movie is already exists, adding it with another video number\")\n           # all_movies[movie_code][-1] is the last video with an existing key\n           # all_movies[movie_code][-1][-1] last video number generated\n           new_video_number = all_movies[movie_code][-1][-1] + 1\n           all_movies[movie_code].append([movie_title, movie_director, new_video_number]) # adding it with new video number\n           print(\"movie added to database with new video number\")        \n       else:\n           all_movies[movie_code] = []\n           all_movies[movie_code].append([movie_title, movie_director, 1]) # 1 is the first movie added(video number)\n           print(\"movie added to database\")\n    else:\n        print(\"the code must be 7 digits long, add movie again.\")\n</code></pre>\n\n<p>This will returns <code>all_movies</code> like this:</p>\n\n<pre><code>{\n    '1231235':[\n        ['Taxi Driver', 'Film-maker', 1]\n    ]\n    '1122334':[\n        ['Up', 'Director',1],\n        ['Up', 'Director',2],\n        ['Up', 'Director',3],\n   ]\n    '1122333':[\n        ['Another movie', 'Another Director',1],\n        ['Another movie', 'Another Director',2],\n   ]\n}\n</code></pre>\n\n<p>The last element of inner list are the <code>video_numbers</code> that generated automatically by system. </p>\n"}], "owner": {"reputation": 11, "user_id": 9666493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fbd1f058d573cafe474bd7bd3e744d8?s=128&d=identicon&r=PG&f=1", "display_name": "user9666493", "link": "https://stackoverflow.com/users/9666493/user9666493"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 449, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1524209292, "creation_date": 1524084838, "last_edit_date": 1524122271, "question_id": 49908859, "link": "https://stackoverflow.com/questions/49908859/updating-a-list-in-a-python-class", "title": "Updating a list in a Python class", "body": "<p>I want to update a list to include new items added by a user. There are a few conditions such as the code must be 7 digits long. If the code already exists, the system will notify the user. If the user tries to add another copy of 'up' with a different code, the system will not allow it. It will make them try again as the code must be the same. Eventually I will include a video number, so if there are two copies of 'up' they will have two different video numbers but the same video code. </p>\n\n<p>Can someone show me why the following code is not working for me? </p>\n\n<pre><code>all_movies = []\n\nclass Movie(object):\n    movie_list = []\n\n\n    def __init__(self, code, title, director):\n        self.code = code\n        self.title = title\n        self.director = director\n\n        Movie.movie_list.append(self)\n\n    @staticmethod\n    def add_movie():\n\n        mv_code = input(\"Code of movie: \")\n        movie_code = int(mv_code)\n        movie_title = input(\"Name of movie: \")\n        movie_director = input(\"Director: \")\n\n        if len(mv_code) == 7:\n           all_movies.append(Movie(movie_code, movie_title, movie_director))\n\n           print(\"movie added to database\")\n        else:\n            print(\"the code must be 7 digits long, add movie again.\")\n\n        def check_validity(movie_code, all_movies):\n            if movie_code in all_movies:\n                return True\n            else:\n                return False\n\n        if check_validity(movie_code, all_movies):\n            all_movies[all_movies] += Movie\n            print()\n            print(\"updated\")\n        else:\n            all_movies[movie_code] = [movie_code, movie_title, movie_director]\n\ndef main():\n    movie1 = Movie(1122334, 'Up', 'Director')\n    movie2 = Movie(1231235, 'Taxi Driver', 'Film-maker')\n</code></pre>\n\n<p>This is the error message that I am receiving:</p>\n\n<pre><code>all_movies[movie_code] = [movie_code, movie_title, movie_director] \nIndexError: list assignment index out of range\n</code></pre>\n"}, {"tags": ["python", "multiplication"], "comments": [{"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 4, "creation_date": 1524085141, "post_id": 49908829, "comment_id": 86833764, "body": "Fine. Do you have a question?"}, {"owner": {"reputation": 11, "user_id": 9117914, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-YR5LQqucBEQ/AAAAAAAAAAI/AAAAAAAAAEg/QPd01W5ckBQ/photo.jpg?sz=128", "display_name": "Kyle Fleming", "link": "https://stackoverflow.com/users/9117914/kyle-fleming"}, "reply_to_user": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 0, "creation_date": 1524086199, "post_id": 49908829, "comment_id": 86834157, "body": "sorry, wanted to know how to make the output dependent on the input, right now the code executes and gives me a constant wall of numbers that are the same (all the multiplication tables of 1-12) I am very new to programming and am not sure what I am doing wrong at the moment. Thank you for your time"}], "answers": [{"tags": [], "owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "is_accepted": false, "score": -1, "last_activity_date": 1524085454, "creation_date": 1524085454, "answer_id": 49908982, "question_id": 49908829, "link": "https://stackoverflow.com/questions/49908829/nested-for-loop-multiplication-table-python/49908982#49908982", "title": "nested for loop multiplication table python", "body": "<p>If you are happy to use a 3rd party library, this is trivial with <code>numpy</code>:</p>\n\n<pre><code>import numpy as np\n\ndef return_table(n):\n    return np.arange(1, 13) * np.arange(1, n+1)[:, None]\n\nprint(return_table(3))\n\n# [[ 1  2  3  4  5  6  7  8  9 10 11 12]\n#  [ 2  4  6  8 10 12 14 16 18 20 22 24]\n#  [ 3  6  9 12 15 18 21 24 27 30 33 36]]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 73988, "user_id": 1639625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4224d1458a149d37b56a53115656f4df?s=128&d=identicon&r=PG", "display_name": "tobias_k", "link": "https://stackoverflow.com/users/1639625/tobias-k"}, "edited": false, "score": 0, "creation_date": 1524085705, "post_id": 49909017, "comment_id": 86833978, "body": "You should also mention passing the value(s) from <code>input</code> into the function and fixing the loop boundaries."}, {"owner": {"reputation": 11, "user_id": 9117914, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-YR5LQqucBEQ/AAAAAAAAAAI/AAAAAAAAAEg/QPd01W5ckBQ/photo.jpg?sz=128", "display_name": "Kyle Fleming", "link": "https://stackoverflow.com/users/9117914/kyle-fleming"}, "edited": false, "score": 0, "creation_date": 1524086480, "post_id": 49909017, "comment_id": 86834276, "body": "Sorry I don&#39;t quite understand what you&#39;re getting at?"}], "tags": [], "owner": {"reputation": 149, "user_id": 3760933, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/Ck4aM.png?s=128&g=1", "display_name": "cephalopodMD", "link": "https://stackoverflow.com/users/3760933/cephalopodmd"}, "is_accepted": false, "score": 0, "last_activity_date": 1524095437, "last_edit_date": 1524095437, "creation_date": 1524085606, "answer_id": 49909017, "question_id": 49908829, "link": "https://stackoverflow.com/questions/49908829/nested-for-loop-multiplication-table-python/49909017#49909017", "title": "nested for loop multiplication table python", "body": "<p>You're reusing variable and parameter names. That is, when you create the for loops, you should be using new variables to loop over so you don't overwrite your parameters, column and tuple. I'd also change tuple to row to be more clear. your loop variables could be named c and r to keep things short.</p>\n\n<p>Additionally, you hardcoded 13 as your table size. You should make sure to loop from 1 to the number of columns and 1 to the number of rows.</p>\n\n<pre><code>def mathTable(column, row):\n  for r in range(1, row): #r is a temporary variable for the outer loop\n    for c in range(1, column): #c is a temporary variable for the inner loop\n      print(\"%6d\" % (c * r), end = '') #note column and row don't change now, they just act as bounds for the loop\n    print(\"\")\n</code></pre>\n\n<p>now, if you call mathTable(3, 4), you'd get a multiplication table of</p>\n\n<pre><code>1 2 3 4\n2 4 6 8\n3 6 9 12\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 9117914, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-YR5LQqucBEQ/AAAAAAAAAAI/AAAAAAAAAEg/QPd01W5ckBQ/photo.jpg?sz=128", "display_name": "Kyle Fleming", "link": "https://stackoverflow.com/users/9117914/kyle-fleming"}, "is_accepted": false, "score": 0, "last_activity_date": 1524091440, "creation_date": 1524091440, "answer_id": 49910110, "question_id": 49908829, "link": "https://stackoverflow.com/questions/49908829/nested-for-loop-multiplication-table-python/49910110#49910110", "title": "nested for loop multiplication table python", "body": "<p>alright so after bashing my forehead on the numpad for a few hours I have realized I am a numbskull. </p>\n\n<pre><code>def mathTable(column, tuple):\n    for c in range(1, x + 1):\n        print(\"\")\n        for t in range(1, 13):\n            print(\"%6d\" % (c * t), end = '\\t')\n    return(\"\\n\")\n\nx = int(input(\"Enter the value of the multiplication table: \"))\ncolumn = \"\"\ntuple = ''\nprint(mathTable(column, tuple))\n</code></pre>\n\n<p>so this is what ended up working perfectly, I used the first for statement to define how many rows I was asking for and then the second for statement was the amount of times I would be multiplying the two together.\nthe second argument in the range of the first for statement is directly tied to my inputs and this allows me to vary the output of the table to any size I want (pls don't put 9 figure numbers in it, never put a sentinel value in so you'd have to close down your command line to do anything with it) </p>\n\n<p>finally to get rid of the \"NONE\" text that appears after the table prints you need to keep in mind that you have created a function that doesn't actually answer anything so just saying {return(\"\")} suited my purposes since I have achieved the output I set out to create. </p>\n\n<p>Thank you to the person who tried to help me I am so sorry I didn't understand you at the time!</p>\n"}], "owner": {"reputation": 11, "user_id": 9117914, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-YR5LQqucBEQ/AAAAAAAAAAI/AAAAAAAAAEg/QPd01W5ckBQ/photo.jpg?sz=128", "display_name": "Kyle Fleming", "link": "https://stackoverflow.com/users/9117914/kyle-fleming"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 3791, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1602671044, "creation_date": 1524084732, "last_edit_date": 1524085120, "question_id": 49908829, "link": "https://stackoverflow.com/questions/49908829/nested-for-loop-multiplication-table-python", "title": "nested for loop multiplication table python", "body": "<p>Have an assignment for python class, we have to make a program that asks for an input and will display a multiplication table for all values up to the input. It requires we use a nested for loop.</p>\n\n<pre><code>def mathTable(column, tuple):\n    for column in range(1, 13):\n        for tuple in range(1, 13):\n            print(\"%6d\" % (column * tuple), end = '')\n    print(\"\")\n\nx = int(input(\"Enter the value of the multiplication table: \"))\ncolumn = \"\"\ntuple = ''\nprint(mathTable(column, tuple))\n</code></pre>\n\n<p>this is what it needs to look like:</p>\n\n<p><img src=\"https://i.stack.imgur.com/cknjd.png\" alt=\"\"></p>\n"}, {"tags": ["python", "if-statement", "boolean"], "comments": [{"owner": {"reputation": 106, "user_id": 8050503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6b5354bef2f61f792c08fdce5a36ad5?s=128&d=identicon&r=PG&f=1", "display_name": "spooky", "link": "https://stackoverflow.com/users/8050503/spooky"}, "edited": false, "score": 1, "creation_date": 1524084859, "post_id": 49908828, "comment_id": 86833632, "body": "take a look at this: <a href=\"https://docs.python.org/3/reference/datamodel.html#object.__bool__\" rel=\"nofollow noreferrer\">docs.python.org/3/reference/datamodel.html#object.__bool__</a>"}, {"owner": {"reputation": 5732, "user_id": 5496433, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/05803febf5f3ccac3dc093fba5fc30fb?s=128&d=identicon&r=PG&f=1", "display_name": "BallpointBen", "link": "https://stackoverflow.com/users/5496433/ballpointben"}, "edited": false, "score": 0, "creation_date": 1524084867, "post_id": 49908828, "comment_id": 86833639, "body": "Yes. 11 more characters to go..."}, {"owner": {"reputation": 7073, "user_id": 1708751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b03d21276ae07910a1ab8f22f7bf282?s=128&d=identicon&r=PG", "display_name": "Sunny Patel", "link": "https://stackoverflow.com/users/1708751/sunny-patel"}, "edited": false, "score": 1, "creation_date": 1524084937, "post_id": 49908828, "comment_id": 86833675, "body": "In that link you provided, had a link to the Python docs to <a href=\"https://docs.python.org/2/reference/datamodel.html#object.__nonzero__\" rel=\"nofollow noreferrer\"><code>__nonzero__</code></a> which says that internally <code>bool()</code> checks <code>__nonzero__</code> first, then <code>__len__</code> functions."}, {"owner": {"reputation": 24066, "user_id": 4686625, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gsGGS.jpg?s=128&g=1", "display_name": "miradulo", "link": "https://stackoverflow.com/users/4686625/miradulo"}, "edited": false, "score": 1, "creation_date": 1524085072, "post_id": 49908828, "comment_id": 86833731, "body": "The linked question seems to answer your question, so I&#39;m not really sure what you&#39;re asking. It isn&#39;t always the case that <code>bool(OBJECT)</code> is False if <code>OBJECT == None</code> because one can be customized with <code>__bool__</code> and the other with <code>__eq__</code>"}, {"owner": {"reputation": 15789, "user_id": 722804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3qBY9.png?s=128&g=1", "display_name": "Terry Jan Reedy", "link": "https://stackoverflow.com/users/722804/terry-jan-reedy"}, "edited": false, "score": 1, "creation_date": 1524085243, "post_id": 49908828, "comment_id": 86833807, "body": "<code>__nonzero__</code> predates <code>bool</code> and is not used in 3.x.  Tests for <code>None</code> should use <code>is</code> or <code>is not</code>."}, {"owner": {"reputation": 446, "user_id": 8929814, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/2ccd9997b512a76e7b3e2d8a393b4b62?s=128&d=identicon&r=PG&f=1", "display_name": "CopyPasteIt", "link": "https://stackoverflow.com/users/8929814/copypasteit"}, "reply_to_user": {"reputation": 24066, "user_id": 4686625, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gsGGS.jpg?s=128&g=1", "display_name": "miradulo", "link": "https://stackoverflow.com/users/4686625/miradulo"}, "edited": false, "score": 0, "creation_date": 1524085583, "post_id": 49908828, "comment_id": 86833938, "body": "@miradulo The comments and answers here are all helpful. Years ago I programmed in Cobol. I find python to be amazingly expressive!"}, {"owner": {"reputation": 446, "user_id": 8929814, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/2ccd9997b512a76e7b3e2d8a393b4b62?s=128&d=identicon&r=PG&f=1", "display_name": "CopyPasteIt", "link": "https://stackoverflow.com/users/8929814/copypasteit"}, "reply_to_user": {"reputation": 15789, "user_id": 722804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3qBY9.png?s=128&g=1", "display_name": "Terry Jan Reedy", "link": "https://stackoverflow.com/users/722804/terry-jan-reedy"}, "edited": false, "score": 0, "creation_date": 1524086519, "post_id": 49908828, "comment_id": 86834291, "body": "@TerryJanReedy Now using <code>if nxt_page is not None:</code>. Remember reading about this syntax before, and I am getting more comfortable with it now."}], "answers": [{"tags": [], "owner": {"reputation": 249903, "user_id": 2422776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2353050223ebecb113741c29458de4b2?s=128&d=identicon&r=PG", "display_name": "Mureinik", "link": "https://stackoverflow.com/users/2422776/mureinik"}, "is_accepted": true, "score": 1, "last_activity_date": 1524084941, "creation_date": 1524084941, "answer_id": 49908882, "question_id": 49908828, "link": "https://stackoverflow.com/questions/49908828/does-the-python-if-statement-implicitly-apply-bool-to-objects-found-in-the-condi/49908882#49908882", "title": "Does the Python if statement implicitly apply bool to objects found in the conditional?", "body": "<p>The <a href=\"https://docs.python.org/3/reference/expressions.html#booleans\" rel=\"nofollow noreferrer\">documentation</a> is very clear on how values are evaluated in a boolean context:</p>\n\n<blockquote>\n  <p>In the context of Boolean operations, and also when expressions are used by control flow statements, the following values are interpreted as false: <code>False</code>, <code>None</code>, numeric zero of all types, and empty strings and containers (including strings, tuples, lists, dictionaries, sets and frozensets). All other values are interpreted as true. User-defined objects can customize their truth value by providing a <code>__bool__()</code> method.</p>\n</blockquote>\n"}], "owner": {"reputation": 446, "user_id": 8929814, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/2ccd9997b512a76e7b3e2d8a393b4b62?s=128&d=identicon&r=PG&f=1", "display_name": "CopyPasteIt", "link": "https://stackoverflow.com/users/8929814/copypasteit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 49908882, "answer_count": 1, "score": 1, "last_activity_date": 1524139253, "creation_date": 1524084729, "last_edit_date": 1524139253, "question_id": 49908828, "link": "https://stackoverflow.com/questions/49908828/does-the-python-if-statement-implicitly-apply-bool-to-objects-found-in-the-condi", "title": "Does the Python if statement implicitly apply bool to objects found in the conditional?", "body": "<p>I have a working selenium program that contains this code:</p>\n\n<pre><code>nxt_page = driver.find_element_by_class_name('btn--alt')\nprint(type(nxt_page))\nif nxt_page:\n    driver.execute_script('arguments[0].scrollIntoView();', nxt_page)\n    print(type(nxt_page))\n    nxt_page.click()\n</code></pre>\n\n<p>(see <a href=\"https://stackoverflow.com/a/46772329/8929814\">Scraping Duckduckgo with Python 3.6)\n</a></p>\n\n<p>When the program runs, the two print statement show</p>\n\n<pre><code>&lt;class 'selenium.webdriver.remote.webelement.WebElement'&gt;\n&lt;class 'selenium.webdriver.remote.webelement.WebElement'&gt;\n</code></pre>\n\n<p>Question: If you use an object for the [if conditional], like</p>\n\n<pre><code>if OBJECT:\n    print('found')\n</code></pre>\n\n<p>is python simply substituting <code>bool(OBJECT)</code> for the conditional? </p>\n\n<p>Is it always the case that <code>bool(OBJECT)</code> is False if <code>OBJECT == None</code>? I wouldn't think that a programmer could tamper with that. You could then equivalently write</p>\n\n<pre><code>if nxt_page is not None:\n    ect.\n</code></pre>\n\n<p>Before posting this I just found <a href=\"https://stackoverflow.com/questions/1087135/boolean-value-of-objects-in-python\">Boolean value of objects in Python\n</a>, and that is certainly helpful.</p>\n"}, {"tags": ["python", "numpy", "opencv"], "owner": {"reputation": 43, "user_id": 6186289, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-5o5hWwLHQcQ/AAAAAAAAAAI/AAAAAAAAAIE/wbh1VW1NJQk/photo.jpg?sz=128", "display_name": "Monirul Islam", "link": "https://stackoverflow.com/users/6186289/monirul-islam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 27, "favorite_count": 0, "closed_date": 1524085064, "answer_count": 0, "score": 1, "last_activity_date": 1524085113, "creation_date": 1524084697, "question_id": 49908817, "link": "https://stackoverflow.com/questions/49908817/numpy-array-max-min-from-pixelpoints-of-open-cv", "closed_reason": "Duplicate", "title": "numpy array max min from pixelpoints of open cv", "body": "<p>having a lot of difficulty with numpy here, i am very new at numpy. i have used these codes:</p>\n\n<pre><code>pixelpoints = cv2.findNonZero(mask)\n</code></pre>\n\n<p>this returns a np.ndarray object that looks like this:</p>\n\n<pre><code>[[1288  700]]\n[[1289  700]]\n[[1290  700]]\n[[1291  700]]\n[[1287  701]]\n[[1288  701]]\n[[1289  701]]\n[[1290  701]]\n[[1291  701]]\n[[1292  701]]\n</code></pre>\n\n<p>as you can see the first number of these pairs repeat quite often. in example, 1290 repeats at 700 and 701. i have a million of pairs like this in a np.ndarray object. \nQuestion: how do i find the minimum for a given first entry? let me elucidate my question. suppose for the first entry 1290, there are more than five hundred ordered pairs. how do i find the pair that has the least value for 1290 and max value for 1290? is there anyway to break this np.ndarray into simple arrays so that i can use max / min functions?</p>\n"}, {"tags": ["python", "numpy", "memory"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1524084708, "post_id": 49908788, "comment_id": 86833566, "body": "Can you reproduce the problem with a smaller array, so that it&#39;s small enough to print the mapped version and the loaded version?"}, {"owner": {"reputation": 38371, "user_id": 3555845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e06f616d9a53b1ca18287d1049a28ee?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/3555845/daniel"}, "edited": false, "score": 1, "creation_date": 1524085003, "post_id": 49908788, "comment_id": 86833701, "body": "npy-files have a header, but <code>memmap</code> maps raw bytes."}], "answers": [{"comments": [{"owner": {"reputation": 564, "user_id": 5989906, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/otUg0.jpg?s=128&g=1", "display_name": "Samuel Prevost", "link": "https://stackoverflow.com/users/5989906/samuel-prevost"}, "edited": false, "score": 0, "creation_date": 1524085521, "post_id": 49908880, "comment_id": 86833924, "body": "Thanks, that works well ! I now use <code>viddata = np.load(viddata_path, mmap_mode=&quot;r+&quot;)</code> . However, later on I need to convert my ndarray to <code>float32</code> dtype but I run into a MemoryError which is what I was trying to avoid in the first place. Any tips ?"}, {"owner": {"reputation": 92118, "user_id": 1217358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2aafb97833979e3668c61d36e697bfc?s=128&d=identicon&r=PG", "display_name": "Warren Weckesser", "link": "https://stackoverflow.com/users/1217358/warren-weckesser"}, "reply_to_user": {"reputation": 564, "user_id": 5989906, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/otUg0.jpg?s=128&g=1", "display_name": "Samuel Prevost", "link": "https://stackoverflow.com/users/5989906/samuel-prevost"}, "edited": false, "score": 0, "creation_date": 1524085710, "post_id": 49908880, "comment_id": 86833979, "body": "Perhaps work in batches?  Really, a question about memory management is too broad to be handled in stackoverflow comments.  If you can&#39;t figure something out, ask another SO question."}, {"owner": {"reputation": 564, "user_id": 5989906, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/otUg0.jpg?s=128&g=1", "display_name": "Samuel Prevost", "link": "https://stackoverflow.com/users/5989906/samuel-prevost"}, "edited": false, "score": 0, "creation_date": 1524085922, "post_id": 49908880, "comment_id": 86834053, "body": "Okay, thank you, for people reading this post, I found <a href=\"https://dask.pydata.org/en/latest/\" rel=\"nofollow noreferrer\">Dask</a> which helps handle up to 100 Go arrays and is compatible with numpy ndarrays, pandas DataFrame and scikit-learn."}], "tags": [], "owner": {"reputation": 92118, "user_id": 1217358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2aafb97833979e3668c61d36e697bfc?s=128&d=identicon&r=PG", "display_name": "Warren Weckesser", "link": "https://stackoverflow.com/users/1217358/warren-weckesser"}, "is_accepted": true, "score": 4, "last_activity_date": 1524084935, "creation_date": 1524084935, "answer_id": 49908880, "question_id": 49908788, "link": "https://stackoverflow.com/questions/49908788/sum-of-values-accessed-through-numpy-memmap-is-wrong/49908880#49908880", "title": "Sum of values accessed through numpy memmap is wrong", "body": "<p><code>numpy.memmap</code> is for treating <em>raw data</em> in a file as a numpy array.  Your filename is <code>'file.npy'</code>, so that is not \"raw\" data.  It is a NPY file, which has a header containing meta-information about the array stored in it.</p>\n\n<p>To memory-map a NPY file, use the <code>mmap_mode</code> argument of <code>numpy.load()</code>.</p>\n"}], "owner": {"reputation": 564, "user_id": 5989906, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/otUg0.jpg?s=128&g=1", "display_name": "Samuel Prevost", "link": "https://stackoverflow.com/users/5989906/samuel-prevost"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 253, "favorite_count": 0, "accepted_answer_id": 49908880, "answer_count": 1, "score": 0, "last_activity_date": 1524084935, "creation_date": 1524084521, "question_id": 49908788, "link": "https://stackoverflow.com/questions/49908788/sum-of-values-accessed-through-numpy-memmap-is-wrong", "title": "Sum of values accessed through numpy memmap is wrong", "body": "<p>I have a large (9.3 GB) <code>.npy</code> file containing a <code>uint8</code> values in an (67000, 9, 128, 128) ndarray. I created it using <code>np.save()</code> and when loading it using <code>x = np.memmap('file.npy', \"uint8\", shape=(67000, 9, 128, 128), mode=\"r\")</code>, <code>np.sum(x[0,0,:,0])</code> returns 13783. The \"problem\" is that when I try loading it with <code>np.load(\"file.npy\")</code> and run the same function, I get the sum to 13768.</p>\n\n<p>Since <code>np.load()</code> loads the whole file in memory, I'd assume that the sum computed on its ndarray is correct, while the one returned by the ndarray loaded with memmap is wrong, but why are they different ? If it was a reading error the sum should be really off, so why is it off by only 15 ??! </p>\n\n<p>I have no clue why that is the case. This won't affect my computation <em>per say</em> but it could be significant for other tasks.</p>\n"}, {"tags": ["python", "loops", "exception-handling", "sleep"], "comments": [{"owner": {"reputation": 1850, "user_id": 5281047, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/R6JZs.png?s=128&g=1", "display_name": "Gabriel", "link": "https://stackoverflow.com/users/5281047/gabriel"}, "edited": false, "score": 0, "creation_date": 1524084918, "post_id": 49908787, "comment_id": 86833669, "body": "Your real problem is the random errors anywhere anytime."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1524086301, "post_id": 49908787, "comment_id": 86834205, "body": "&quot;Random errors&quot; can include I/O errors, which happen but over which you have no control."}], "answers": [{"tags": [], "owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "is_accepted": false, "score": 1, "last_activity_date": 1524086267, "last_edit_date": 1524086267, "creation_date": 1524085949, "answer_id": 49909087, "question_id": 49908787, "link": "https://stackoverflow.com/questions/49908787/exception-handling-sleep-then-retry-the-same-line-that-produces-error/49909087#49909087", "title": "Exception handling - sleep then retry the same line that produces error", "body": "<p>You can use conditionals and an explicitly tracked to-do list to fake a set of goto's. Each time a task succeeds, remove it from the to-do list so that you won't try it again.</p>\n\n<pre><code>import time, random\n\nattempts = 0\n# Reverse order because it's more efficient to remove an item\n# from the end of a list than the beginning. Use a deque\n# if this bothers you.\nto_do = [\"E\", \"D\", \"C\", \"B\", \"A\"]\nwhile to_do and attempts &lt;= 20:\n    try:\n        if to_do[-1] == \"A\":\n            x, y = 1, random.choice([0,1])\n            x/y\n            print \"A\"\n            to_do.pop()\n        elif to_do[-1] == \"B\": \n            x, y = 1, random.choice([0,1])\n            x/y\n            print \"B\"\n            to_do.pop()\n        elif to_do[-1] == \"C\":\n            x, y = 1, random.choice([0,1])\n            x/y\n            print \"C\"\n            to_do.pop()\n        elif to_do[-1] == \"D\":\n            x, y = 1, random.choice([0,1])\n            x/y\n            print \"D\"\n            to_do.pop()\n        elif to_do[-1] == \"E\":\n            x, y = 1, random.choice([0,1])\n            x/y\n            print \"E\"\n            to_do.pop()\n    except ZeroDivisionError:\n        attempts += 1\n        time.sleep(3)\n</code></pre>\n\n<p>However, this can be cleaned up significantly by defining a separate function for each task, and using the presence of the function itself\non your <code>failures</code> list to indicate it still needs to be run.</p>\n\n<pre><code>to_do = [task_e, task_d, task_c, task_b, task_a]\nwhile attempts &lt;= 20:\n    while to_do:\n        try:\n            to_do[-1]()\n        except ZeroDivisionError:\n            attempts += 1\n            time.sleep(3)\n        else:\n            to_do.pop()\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9666288, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "bsperl", "link": "https://stackoverflow.com/users/9666288/bsperl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 165, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1524086267, "creation_date": 1524084519, "question_id": 49908787, "link": "https://stackoverflow.com/questions/49908787/exception-handling-sleep-then-retry-the-same-line-that-produces-error", "title": "Exception handling - sleep then retry the same line that produces error", "body": "<p>suppose I have an exception that is (unpredictably/inconsistently) raised at different lines in the script every time I run it. How can I handle this exception in such a way that (1) forces the script to sleep for a few seconds following the error then (2) tries to re-execute the same line of code that caused the error in hopes of a successful result the 2nd time around (or 3rd, or 4th ...), AND (3) does not re-execute all of the lines leading up to that point in the script? In other words, I want it to \"goto\" the previous line and try again until it succeeds, albeit with a cap on the number of attempts to avoid an infinite loop.</p>\n\n<p>The code below is conceptual example of my problem. The desired result would print:</p>\n\n<p>A\nB\nC\nD\nE</p>\n\n<p>but instead prints something like:</p>\n\n<p>A\nA\nB\nA\nB\nA\nA\nA\nA\nB\nA\nA\nA\nB\nC\nD\nE</p>\n\n<pre><code>import time, random\n\nsuccess, attempts = False, 0\n\nwhile success == False and attempts &lt;= 20:\n    try:\n\n        x, y = 1, random.choice([0,1])\n        x/y\n        print \"A\"\n\n        x, y = 1, random.choice([0,1])\n        x/y\n        print \"B\"\n\n        x, y = 1, random.choice([0,1])\n        x/y\n        print \"C\"\n\n        x, y = 1, random.choice([0,1])\n        x/y\n        print \"D\"\n\n        x, y = 1, random.choice([0,1])\n        x/y\n        print \"E\"\n\n        success = True\n    except ZeroDivisionError:\n        attempts += 1\n        time.sleep(3)\n</code></pre>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["python", "arrays", "python-3.x", "numpy"], "comments": [{"owner": {"reputation": 106, "user_id": 8050503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6b5354bef2f61f792c08fdce5a36ad5?s=128&d=identicon&r=PG&f=1", "display_name": "spooky", "link": "https://stackoverflow.com/users/8050503/spooky"}, "edited": false, "score": 1, "creation_date": 1524084752, "post_id": 49908780, "comment_id": 86833586, "body": "check out <a href=\"https://stackoverflow.com/questions/311775/python-create-a-list-with-initial-capacity\" title=\"python create a list with initial capacity\">stackoverflow.com/questions/311775/&hellip;</a>"}, {"owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "edited": false, "score": 0, "creation_date": 1524085235, "post_id": 49908780, "comment_id": 86833804, "body": "I don&#39;t think this is a precise duplicate as user is open to <code>numpy</code>."}, {"owner": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "edited": false, "score": 0, "creation_date": 1524086892, "post_id": 49908780, "comment_id": 86834448, "body": "I fail to see how this is a duplicate of the linked question. Initializing to a length and actually restricting the length are not the same thing."}, {"owner": {"reputation": 24066, "user_id": 4686625, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gsGGS.jpg?s=128&g=1", "display_name": "miradulo", "link": "https://stackoverflow.com/users/4686625/miradulo"}, "reply_to_user": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "edited": false, "score": 0, "creation_date": 1524086926, "post_id": 49908780, "comment_id": 86834466, "body": "@jpp I added another to the dupe list with the same C foreword even."}, {"owner": {"reputation": 24066, "user_id": 4686625, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gsGGS.jpg?s=128&g=1", "display_name": "miradulo", "link": "https://stackoverflow.com/users/4686625/miradulo"}, "reply_to_user": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "edited": false, "score": 0, "creation_date": 1524086948, "post_id": 49908780, "comment_id": 86834476, "body": "@PaulPanzer Did you see the second duplicate in the list there?"}, {"owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "edited": false, "score": 0, "creation_date": 1524087094, "post_id": 49908780, "comment_id": 86834567, "body": "Hmm, someone reopened this one. I&#39;ll turn my answer into a community wiki if/when it&#39;s dup&#39;d correctly."}, {"owner": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "reply_to_user": {"reputation": 24066, "user_id": 4686625, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gsGGS.jpg?s=128&g=1", "display_name": "miradulo", "link": "https://stackoverflow.com/users/4686625/miradulo"}, "edited": false, "score": 0, "creation_date": 1524087167, "post_id": 49908780, "comment_id": 86834590, "body": "@miradulo nope, sorry, must have missed that, I see only one linked item. Could you be kind enough to repost it for me?"}, {"owner": {"reputation": 24066, "user_id": 4686625, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gsGGS.jpg?s=128&g=1", "display_name": "miradulo", "link": "https://stackoverflow.com/users/4686625/miradulo"}, "reply_to_user": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "edited": false, "score": 0, "creation_date": 1524087341, "post_id": 49908780, "comment_id": 86834651, "body": "@PaulPanzer No worries. I marked it with <a href=\"https://stackoverflow.com/questions/6142689/initialising-an-array-of-fixed-size-in-python\">this one</a>, though for NumPy <a href=\"https://stackoverflow.com/questions/4535374/initialize-a-numpy-array\">this one</a> could be added too. I fail to see what is unique about this question."}, {"owner": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "reply_to_user": {"reputation": 24066, "user_id": 4686625, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gsGGS.jpg?s=128&g=1", "display_name": "miradulo", "link": "https://stackoverflow.com/users/4686625/miradulo"}, "edited": false, "score": 0, "creation_date": 1524088087, "post_id": 49908780, "comment_id": 86834948, "body": "@miradulo thanks. I&#39;m still not convinced, I don&#39;t see any of the answers over there enforcing the list is not resized. And arrays with their slower <code>__getitem__</code> are not necessarily a suitable replacement."}, {"owner": {"reputation": 24066, "user_id": 4686625, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gsGGS.jpg?s=128&g=1", "display_name": "miradulo", "link": "https://stackoverflow.com/users/4686625/miradulo"}, "reply_to_user": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "edited": false, "score": 0, "creation_date": 1524088231, "post_id": 49908780, "comment_id": 86835017, "body": "@PaulPanzer I suppose we just differ in what we believe the OP is intending to ask. They closed with the first duplicate themselves - and a dynamically allocated array in C does not prevent resizing either."}, {"owner": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "reply_to_user": {"reputation": 24066, "user_id": 4686625, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gsGGS.jpg?s=128&g=1", "display_name": "miradulo", "link": "https://stackoverflow.com/users/4686625/miradulo"}, "edited": false, "score": 0, "creation_date": 1524088377, "post_id": 49908780, "comment_id": 86835078, "body": "@miradulo ok, let&#39;s leave it at that. If you want to start another close cycle I won&#39;t reopen."}, {"owner": {"reputation": 24066, "user_id": 4686625, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gsGGS.jpg?s=128&g=1", "display_name": "miradulo", "link": "https://stackoverflow.com/users/4686625/miradulo"}, "reply_to_user": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "edited": false, "score": 0, "creation_date": 1524088470, "post_id": 49908780, "comment_id": 86835110, "body": "@PaulPanzer Sure thing - I already VTCed earlier so I cannot. Here&#39;s another: <a href=\"https://stackoverflow.com/questions/10617045/how-to-create-a-fix-size-list-in-python\">How to create a fix size list in python?</a>, with the answers I&#39;d expect."}], "answers": [{"tags": [], "owner": {"reputation": 308, "user_id": 9558954, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Tyler K", "link": "https://stackoverflow.com/users/9558954/tyler-k"}, "is_accepted": false, "score": 1, "last_activity_date": 1524085123, "creation_date": 1524085123, "answer_id": 49908913, "question_id": 49908780, "link": "https://stackoverflow.com/questions/49908780/how-to-restrict-the-number-of-elements-in-python-lists/49908913#49908913", "title": "How to restrict the number of elements in python lists", "body": "<p>You can use <code>deque</code> from collections that has a maxlen property.</p>\n\n<pre><code>from collections import deque\nd = deque(maxlen=2)\n</code></pre>\n\n<p>You can then append, pop, iterate or do whatever you want with your restricted list. </p>\n"}, {"tags": [], "owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "is_accepted": true, "score": 2, "last_activity_date": 1524085213, "creation_date": 1524085213, "answer_id": 49908928, "question_id": 49908780, "link": "https://stackoverflow.com/questions/49908780/how-to-restrict-the-number-of-elements-in-python-lists/49908928#49908928", "title": "How to restrict the number of elements in python lists", "body": "<p>To ensure an array is of a fixed size and of a certain type, you should use <code>numpy</code>. This is true even with non-numeric data.</p>\n\n<p>Some examples are below.</p>\n\n<pre><code>import numpy as np\n\narr = np.zeros(10, dtype=float)\n# array([ 0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.]), dtype = float64\n\narr = np.zeros(10, dtype=int)\n# array([0, 0, 0, 0, 0, 0, 0, 0, 0, 0]), dtype = int32\n\narr = np.empty(10, dtype='&lt;U8')\n# array(['', '', '', '', '', '', '', '', '', ''],\n#       dtype='&lt;U8')\n</code></pre>\n"}], "owner": {"reputation": 123, "user_id": 8595091, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820fd4c35541daa78c8617e8cb1ee9c4?s=128&d=identicon&r=PG&f=1", "display_name": "steve", "link": "https://stackoverflow.com/users/8595091/steve"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 0, "accepted_answer_id": 49908928, "answer_count": 2, "score": 1, "last_activity_date": 1524086898, "creation_date": 1524084481, "last_edit_date": 1524086654, "question_id": 49908780, "link": "https://stackoverflow.com/questions/49908780/how-to-restrict-the-number-of-elements-in-python-lists", "title": "How to restrict the number of elements in python lists", "body": "<p>I came from <code>C</code> world where the size of buffers can be controlled in advance. For instance, declaring a buffer of doubles that holds 10 elements, we do:</p>\n\n<pre><code>double *buffer = calloc(10, sizeof(double));\n</code></pre>\n\n<p>In Python, it is quite the contrary in the sense that we don't need to worry about the details and the size of the buffer by saying <code>buffer=[]</code>.</p>\n\n<p>My question is: If I want to restrict a python list to hold an arbitrary number of values, say 10 doubles, how can we do that with default python lists or maybe <code>numpy</code>?</p>\n"}, {"tags": ["python", "mathematical-optimization", "pulp"], "comments": [{"owner": {"reputation": 2284, "user_id": 3684792, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/24880a587c5f7bece55cd19c733e223e?s=128&d=identicon&r=PG&f=1", "display_name": "user3684792", "link": "https://stackoverflow.com/users/3684792/user3684792"}, "edited": false, "score": 0, "creation_date": 1524087217, "post_id": 49908715, "comment_id": 86834607, "body": "this is basically incomprehensible"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 3885100, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d61da50de4e2bb9ec7cca1acbb30e3b3?s=128&d=identicon&r=PG&f=1", "display_name": "user3885100", "link": "https://stackoverflow.com/users/3885100/user3885100"}, "is_accepted": false, "score": 0, "last_activity_date": 1524113854, "creation_date": 1524113854, "answer_id": 49913003, "question_id": 49908715, "link": "https://stackoverflow.com/questions/49908715/python-constraint/49913003#49913003", "title": "Python Constraint", "body": "<p>The only method I could figure out was to create a flag, 1 or 0, for each color and then make a constraint that the max value for that flag could not be more than one.</p>\n\n<pre><code># Import PuLP modeler functions\nfrom pulp import *\n\n#Import data\nimport pandas\ndf = pandas.read_excel('Test.xlsx')\n\n#Set Items\nIDS=df['ID'].tolist()\n\nfinal_color=set(df['Color'].tolist())\n\n#Setting Fields to dictionaries\ncolors=df.set_index('ID')['Color'].to_dict()\nNumbers=df.set_index('ID')['Number'].to_dict()\nred=df.set_index('ID')['Red'].to_dict()\nblue=df.set_index('ID')['Blue'].to_dict()\n\n\n# Create the 'prob' variable to contain the problem data\nprob = LpProblem(\"Color Problem\",LpMinimize)\n\n#Set Variables\n# variable(name, low, upper, discrete/continuous)\nused_vars = LpVariable.dicts(\"Used\",IDS,0,1,LpInteger)\n\n# Set Objective Function\nprob += lpSum([Numbers[i]*used_vars[i] for i in IDS]),\"Minimum Amount\"\n\n#Constraints\nprob += lpSum([used_vars[i] for i in IDS]) == 2, \"Minimum Options\"\nprob += lpSum([red[i] * used_vars[i] for i in IDS]) == 1, \"Red\"\nprob += lpSum([blue[i] * used_vars[i] for i in IDS]) == 1, \"Blue\"\n\n\n# The problem data is written to an .lp file\nprob.writeLP(\"colors.lp\")\n\n# The problem is solved using PuLP's choice of Solver\nprob.solve()\n\n# The status of the solution is printed to the screen\nprint (\"Status:\", LpStatus[prob.status])\n\n# Each of the variables is printed with it's resolved optimum value\nfor v in prob.variables():\n    print (v.name, \"=\", v.varValue)\n\n# The optimised objective function value is printed to the screen\nprint (\"Total Cost of Diet = \", value(prob.objective))\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 3885100, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d61da50de4e2bb9ec7cca1acbb30e3b3?s=128&d=identicon&r=PG&f=1", "display_name": "user3885100", "link": "https://stackoverflow.com/users/3885100/user3885100"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 429, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1524113854, "creation_date": 1524084204, "last_edit_date": 1524086991, "question_id": 49908715, "link": "https://stackoverflow.com/questions/49908715/python-constraint", "title": "Python Constraint", "body": "<p>I am looking to find the best replacement item for an old item. An old item can have several potential options for replacement items. I want to only choose one replacement item for each old item.</p>\n\n<p>So in data form lets say that the color is the old item</p>\n\n<pre><code>Color-Number\nRed-1\nRed-2\nRed-3\nBlue-1\nBlue-2\n</code></pre>\n\n<p>At the end, I want only one red and one blue selected.</p>\n\n<p>For my variable I am using:</p>\n\n<pre><code>used_vars = LpVariable.dicts(\"Used\",Option,0,1,LpInteger) \n</code></pre>\n\n<p>This is to indicate if I used an option or not.</p>\n\n<p>Then for my constraint I want each item to be used only once to be used in all the options so I tried this for my constraint...</p>\n\n<pre><code>prob += lpSum([used_vars['Red']])==1\nprob += lpSum([used_vars['Blue']])==1\n</code></pre>\n\n<p>However, I get this error... Key Error 'Red'.</p>\n\n<p>So what's the best way to write this constraint?</p>\n\n<p>**UPDATE</p>\n\n<p>I have also tried </p>\n\n<p><code>for x in final_color_list:\n    prob += sum([used_vars[x] for i in Option] )==1, ''</code></p>\n"}, {"tags": ["python", "python-3.x", "decorator"], "answers": [{"comments": [{"owner": {"reputation": 1262, "user_id": 4343502, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f5e19333dfe0dc29e10d2b5e6afbd627?s=128&d=identicon&r=PG&f=1", "display_name": "touch my body", "link": "https://stackoverflow.com/users/4343502/touch-my-body"}, "edited": false, "score": 0, "creation_date": 1524084402, "post_id": 49908754, "comment_id": 86833442, "body": "Nice, never heard of this!"}], "tags": [], "owner": {"reputation": 2872, "user_id": 6805091, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6abbb6c8d37d0e91ad6265d68a55bf?s=128&d=identicon&r=PG&f=1", "display_name": "Bubble Bubble Bubble Gut", "link": "https://stackoverflow.com/users/6805091/bubble-bubble-bubble-gut"}, "is_accepted": true, "score": 2, "last_activity_date": 1524084368, "creation_date": 1524084368, "answer_id": 49908754, "question_id": 49908714, "link": "https://stackoverflow.com/questions/49908714/decorator-hide-method-description/49908754#49908754", "title": "Decorator hide method description", "body": "<p>Using <a href=\"https://docs.python.org/3/library/functools.html\" rel=\"nofollow noreferrer\">functools.wraps</a>:</p>\n\n<pre><code>def decorator(f):\n    @functools.wrap(f)\n    def wrapped(*args):\n        # do something\n    return wrapped\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 9613177, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1dfbf5c130b2931cc509d13fda7475f3?s=128&d=identicon&r=PG&f=1", "display_name": "velvel", "link": "https://stackoverflow.com/users/9613177/velvel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "closed_date": 1524084519, "accepted_answer_id": 49908754, "answer_count": 1, "score": 1, "last_activity_date": 1524084368, "creation_date": 1524084194, "question_id": 49908714, "link": "https://stackoverflow.com/questions/49908714/decorator-hide-method-description", "closed_reason": "Duplicate", "title": "Decorator hide method description", "body": "<p>When I put a class method under a decorator it hides the method description (\"\"\"x\"\"\") in help(class_name).\nHow can I fix that please ?</p>\n"}, {"tags": ["python", "python-3.x", "pandas", "dataframe"], "answers": [{"tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": false, "score": 8, "last_activity_date": 1524084297, "creation_date": 1524084297, "answer_id": 49908738, "question_id": 49908710, "link": "https://stackoverflow.com/questions/49908710/how-to-standardize-strings-between-rows-in-a-pandas-dataframe/49908738#49908738", "title": "How to standardize strings between rows in a pandas DataFrame?", "body": "<p>You can using <code>str.pad</code></p>\n\n<pre><code>df.pattern.str.pad(width=df.pattern.str.len().max(),side='right',fillchar='?')\nOut[1154]: \n0    AAABCDEE\n1    ABBBBD??\n2    CCCDE???\n3    AA??????\n4    ABCDE???\nName: pattern, dtype: object\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 12268, "user_id": 4596596, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b00c839c9e28eb73aeb299bf3ef69a76?s=128&d=identicon&r=PG&f=1", "display_name": "ShanZhengYang", "link": "https://stackoverflow.com/users/4596596/shanzhengyang"}, "edited": false, "score": 0, "creation_date": 1524086589, "post_id": 49908757, "comment_id": 86834322, "body": "I never new about <code>Series.str.ljust()</code>. Thanks for this!"}, {"owner": {"reputation": 24066, "user_id": 4686625, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gsGGS.jpg?s=128&g=1", "display_name": "miradulo", "link": "https://stackoverflow.com/users/4686625/miradulo"}, "reply_to_user": {"reputation": 12268, "user_id": 4596596, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b00c839c9e28eb73aeb299bf3ef69a76?s=128&d=identicon&r=PG&f=1", "display_name": "ShanZhengYang", "link": "https://stackoverflow.com/users/4596596/shanzhengyang"}, "edited": false, "score": 0, "creation_date": 1524086875, "post_id": 49908757, "comment_id": 86834439, "body": "@ShanZhengYang No worries. There are a whole bunch, see <a href=\"https://pandas.pydata.org/pandas-docs/stable/api.html#string-handling\" rel=\"nofollow noreferrer\">String handling</a> in the docs."}], "tags": [], "owner": {"reputation": 24066, "user_id": 4686625, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gsGGS.jpg?s=128&g=1", "display_name": "miradulo", "link": "https://stackoverflow.com/users/4686625/miradulo"}, "is_accepted": true, "score": 9, "last_activity_date": 1524085967, "last_edit_date": 1524085967, "creation_date": 1524084385, "answer_id": 49908757, "question_id": 49908710, "link": "https://stackoverflow.com/questions/49908710/how-to-standardize-strings-between-rows-in-a-pandas-dataframe/49908757#49908757", "title": "How to standardize strings between rows in a pandas DataFrame?", "body": "<p>You can use <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.str.ljust.html#pandas.Series.str.ljust\" rel=\"noreferrer\"><code>Series.str.ljust</code></a> for this, after acquiring the max string length in the column. </p>\n\n<pre><code>df.pattern.str.ljust(df.pattern.str.len().max(), '?')\n\n# 0    AAABCDEE\n# 1    ABBBBD??\n# 2    CCCDE???\n# 3    AA??????\n# 4    ABCDE???\n# Name: pattern, dtype: object\n</code></pre>\n\n<p>In the source for Pandas <code>0.22.0</code> <a href=\"https://github.com/pandas-dev/pandas/blob/0.22.x/pandas/core/strings.py#L960\" rel=\"noreferrer\">here</a> it can be seen that <code>ljust</code> is entirely equivalent to <code>pad</code> with <code>side='right'</code>, so pick whichever you find more clear. </p>\n"}, {"comments": [{"owner": {"reputation": 105, "user_id": 13045508, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d29583ee0b1741d9480b55817765f2e8?s=128&d=identicon&r=PG", "display_name": "Subham", "link": "https://stackoverflow.com/users/13045508/subham"}, "edited": false, "score": 0, "creation_date": 1616848003, "post_id": 49909726, "comment_id": 118134600, "body": "can you please explain what is f-string doing here.."}], "tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": false, "score": 3, "last_activity_date": 1524089250, "creation_date": 1524089250, "answer_id": 49909726, "question_id": 49908710, "link": "https://stackoverflow.com/questions/49908710/how-to-standardize-strings-between-rows-in-a-pandas-dataframe/49909726#49909726", "title": "How to standardize strings between rows in a pandas DataFrame?", "body": "<h2>Python 3.6 f-string</h2>\n\n<pre><code>n = df.pattern.str.len().max()\ndf.assign(pattern=[f'{i:?&lt;{n}s}' for i in df.pattern])\n\n       ID   pattern\n0   first  AAABCDEE\n1  second  ABBBBD??\n2   third  CCCDE???\n3  fourth  AA??????\n4   fifth  ABCDE???\n</code></pre>\n\n<hr>\n"}], "owner": {"reputation": 12268, "user_id": 4596596, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b00c839c9e28eb73aeb299bf3ef69a76?s=128&d=identicon&r=PG&f=1", "display_name": "ShanZhengYang", "link": "https://stackoverflow.com/users/4596596/shanzhengyang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 420, "favorite_count": 0, "accepted_answer_id": 49908757, "answer_count": 3, "score": 4, "last_activity_date": 1524089250, "creation_date": 1524084174, "question_id": 49908710, "link": "https://stackoverflow.com/questions/49908710/how-to-standardize-strings-between-rows-in-a-pandas-dataframe", "title": "How to standardize strings between rows in a pandas DataFrame?", "body": "<p>I have the following pandas DataFrame in Python3.x:</p>\n\n<pre><code>import pandas as pd\n\ndict1 = {\n    'ID':['first', 'second', 'third', 'fourth', 'fifth'], \n    'pattern':['AAABCDEE', 'ABBBBD', 'CCCDE', 'AA', 'ABCDE']\n}\n\ndf = pd.DataFrame(dict1)\n\n&gt;&gt;&gt; df\n       ID   pattern\n0   first  AAABCDEE\n1  second    ABBBBD\n2   third     CCCDE\n3  fourth        AA\n4   fifth     ABCDE\n</code></pre>\n\n<p>There are two columns, <code>ID</code> and <code>pattern</code>. The string in <code>pattern</code> with the longest length is in the first row, <code>len('AAABCDEE')</code>, which is length 8. </p>\n\n<p>My goal is to standardize the strings such that these are the same length, with the trailing spaces as <code>?</code>. </p>\n\n<p>Here is what the output should look like:</p>\n\n<pre><code>&gt;&gt;&gt; df\n       ID   pattern\n0   first  AAABCDEE\n1  second  ABBBBD?? \n2   third  CCCDE???\n3  fourth  AA??????\n4   fifth  ABCDE???\n</code></pre>\n\n<p>If I was able to make the trailing spaces <code>NaN</code>, then I could try something like:</p>\n\n<pre><code>df = df.applymap(lambda x: int(x) if pd.notnull(x) else str(\"?\"))\n</code></pre>\n\n<p>But I'm not sure how one would efficiently (1) find the longest string in <code>pattern</code> and (2) then add <code>NaN</code> add the end of the strings up to this length? This may be a convoluted approach...</p>\n"}, {"tags": ["python", "machine-learning", "rnn"], "comments": [{"owner": {"reputation": 4911, "user_id": 1543197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d56346d382d7c16bc452c8fb572f481?s=128&d=identicon&r=PG", "display_name": "Greg", "link": "https://stackoverflow.com/users/1543197/greg"}, "edited": false, "score": 0, "creation_date": 1568680399, "post_id": 49908705, "comment_id": 102342555, "body": "This <a href=\"https://arxiv.org/pdf/1901.02514.pdf\" rel=\"nofollow noreferrer\">paper</a> might be discussing part of the solution to your problem."}], "owner": {"reputation": 473, "user_id": 5606344, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/mC21D.png?s=128&g=1", "display_name": "Michal Fa\u0161&#225;nek", "link": "https://stackoverflow.com/users/5606344/michal-fa%c5%a1%c3%a1nek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 642, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1524084147, "creation_date": 1524084147, "question_id": 49908705, "link": "https://stackoverflow.com/questions/49908705/how-to-use-smote-for-sequential-data", "title": "How to use SMOTE for sequential data", "body": "<p>I am training LSTM RNN on sequential data.</p>\n\n<p>I have imbalanced dataset of ~2000 classes.\nI would like to use the combination of oversampling/undersampling.</p>\n\n<p>I downsampled more represented classes and wanted to use python implementation of SMOTE to oversample minority classes. However, with RNN, my input is a list of vectors, not a single vector. I tried to use basic example of SMOTE for the task, generating error:</p>\n\n<p><strong>ValueError: Found array with dim 3. Estimator expected &lt;= 2.</strong></p>\n\n<p>Is there any way to use SMOTE in this way? This is my current code:</p>\n\n<pre><code>all_vector_inputs = [vector_pair[0] for vector_pair in all_user_vectors]\nall_vector_targets = [vector_pair[1] for vector_pair in all_user_vectors]\n\ninputs_res, targets_res = SMOTE(kind='svm').fit_sample(\n    all_vector_inputs, \n    all_vector_targets\n)\n</code></pre>\n\n<p>Any SMOTE substitution suggestions in Python welcome as well.</p>\n"}, {"tags": ["python", "selenium"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 9465176, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-sZagpP2ANx8/AAAAAAAAAAI/AAAAAAAAI9k/oPwZrFKR5QM/photo.jpg?sz=128", "display_name": "Jude Rocks", "link": "https://stackoverflow.com/users/9465176/jude-rocks"}, "edited": false, "score": 0, "creation_date": 1524084446, "post_id": 49908726, "comment_id": 86833457, "body": "How can I make sure that it&#39;s red though? I need for the color to be red."}, {"owner": {"reputation": 2872, "user_id": 6805091, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6abbb6c8d37d0e91ad6265d68a55bf?s=128&d=identicon&r=PG&f=1", "display_name": "Bubble Bubble Bubble Gut", "link": "https://stackoverflow.com/users/6805091/bubble-bubble-bubble-gut"}, "reply_to_user": {"reputation": 13, "user_id": 9465176, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-sZagpP2ANx8/AAAAAAAAAAI/AAAAAAAAI9k/oPwZrFKR5QM/photo.jpg?sz=128", "display_name": "Jude Rocks", "link": "https://stackoverflow.com/users/9465176/jude-rocks"}, "edited": false, "score": 0, "creation_date": 1524084529, "post_id": 49908726, "comment_id": 86833483, "body": "@Andersson &#39;s answer is better"}], "tags": [], "owner": {"reputation": 2872, "user_id": 6805091, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6abbb6c8d37d0e91ad6265d68a55bf?s=128&d=identicon&r=PG&f=1", "display_name": "Bubble Bubble Bubble Gut", "link": "https://stackoverflow.com/users/6805091/bubble-bubble-bubble-gut"}, "is_accepted": false, "score": 0, "last_activity_date": 1524084237, "creation_date": 1524084237, "answer_id": 49908726, "question_id": 49908601, "link": "https://stackoverflow.com/questions/49908601/what-command-do-i-use-to-locate-this-element/49908726#49908726", "title": "What command do I use to locate this element?", "body": "<p>Using <a href=\"https://www.w3schools.com/cssref/css_selectors.asp\" rel=\"nofollow noreferrer\">CSS Selector</a>:</p>\n\n<pre><code>browser.find_element_by_css_selector('p[itemprop=model]')\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 46903, "user_id": 4549554, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/Vxi1i.jpg?s=128&g=1", "display_name": "Andersson", "link": "https://stackoverflow.com/users/4549554/andersson"}, "is_accepted": true, "score": 1, "last_activity_date": 1524084356, "creation_date": 1524084356, "answer_id": 49908752, "question_id": 49908601, "link": "https://stackoverflow.com/questions/49908601/what-command-do-i-use-to-locate-this-element/49908752#49908752", "title": "What command do I use to locate this element?", "body": "<p>If you want to locate element by its text content you might use below XPath:</p>\n\n<pre><code>browser.find_element_by_xpath(\"//p[.='Red']\")\n</code></pre>\n\n<p>Note that <code>find_element_by_name()</code> intend to get <code>name</code> attribute as argument, e.g. <code>&lt;p name=\"Red\"&gt;...&lt;p&gt;</code>, <code>find_element_by_link_text()</code> applicable for links only, e.g. <code>&lt;a href=\"/red\"&gt;Red&lt;/a&gt;</code></p>\n"}], "owner": {"reputation": 13, "user_id": 9465176, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-sZagpP2ANx8/AAAAAAAAAAI/AAAAAAAAI9k/oPwZrFKR5QM/photo.jpg?sz=128", "display_name": "Jude Rocks", "link": "https://stackoverflow.com/users/9465176/jude-rocks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "accepted_answer_id": 49908752, "answer_count": 2, "score": 0, "last_activity_date": 1524084356, "creation_date": 1524083672, "last_edit_date": 1524084022, "question_id": 49908601, "link": "https://stackoverflow.com/questions/49908601/what-command-do-i-use-to-locate-this-element", "title": "What command do I use to locate this element?", "body": "<p>The source HTML code is as follows: </p>\n\n<pre><code>&lt;p class=\"style protect\" itemprop=\"model\"&gt;Red&lt;/p&gt;\n</code></pre>\n\n<p>How can I get selenium to search for \"Red\" when it isn't named? I have tried using</p>\n\n<pre><code>browser.find_element_by_name('Red')\n</code></pre>\n\n<p>and a lot of other commands (<code>find_element_by_link_text</code>...) but I cannot find the correct one to use to find a click the word \"Red\". Can someone please tell me what I'm doing wrong?    </p>\n"}, {"tags": ["python", "machine-learning", "theano", "neupy"], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 9482144, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lTznw.jpg?s=128&g=1", "display_name": "10donovanr", "link": "https://stackoverflow.com/users/9482144/10donovanr"}, "edited": false, "score": 0, "creation_date": 1524168279, "post_id": 49925028, "comment_id": 86874662, "body": "Two recommendations: (1)  adding a comment/demonstration on trainability; and (2) plots always help. But this works fantastic and is very instructional. Thanks!"}], "tags": [], "owner": {"reputation": 1168, "user_id": 2759088, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/beff21da129211f95ceca8340dffb5b7?s=128&d=identicon&r=PG&f=1", "display_name": "itdxer", "link": "https://stackoverflow.com/users/2759088/itdxer"}, "is_accepted": true, "score": 1, "last_activity_date": 1524152256, "creation_date": 1524152256, "answer_id": 49925028, "question_id": 49908588, "link": "https://stackoverflow.com/questions/49908588/trainable-multi-parameter-activ-function-rbf-neupy-theano/49925028#49925028", "title": "Trainable, Multi-Parameter Activ. Function (RBF) NeuPy / Theano", "body": "<p>When layer changes shape of the input variable it has to inform the subsequent layers about the change. For this case it must have customized <code>output_shape</code> property. For example:</p>\n\n<pre><code>from neupy import layers\nfrom neupy.utils import as_tuple\nimport theano.tensor as T\n\nclass Flatten(layers.BaseLayer):\n    \"\"\"\n    Slight modification of the Reshape layer from the neupy library:\n    https://github.com/itdxer/neupy/blob/master/neupy/layers/reshape.py\n    \"\"\"\n    @property \n    def output_shape(self):\n        # Number of output feature depends on the input shape \n        # When layer receives input with shape (10, 3, 4)\n        # than output will be (10, 12). First number 10 defines\n        # number of samples which you typically don't need to\n        # change during propagation\n        n_output_features = np.prod(self.input_shape)\n        return (n_output_features,)\n\n    def output(self, input_value):\n        n_samples = input_value.shape[0]\n        return T.reshape(input_value, as_tuple(n_samples, self.output_shape))\n</code></pre>\n\n<p>If you run it in terminal you will see that it works</p>\n\n<pre><code>&gt;&gt;&gt; network = layers.Input((3, 4)) &gt; Flatten()\n&gt;&gt;&gt; predict = network.compile()\n&gt;&gt;&gt; predict(np.random.random((10, 3, 4))).shape\n(10, 12)\n</code></pre>\n\n<p>In your example I can see a few issues:</p>\n\n<ol>\n<li>The <code>rbf</code> function doesn't return theano expression. It should fail during the function compilation </li>\n<li>Functions like <code>np.linalg.norm</code> will return you scalar if you won't specify axis along which you want to calculate norm. </li>\n</ol>\n\n<p>The following solution should work for you</p>\n\n<pre><code>import numpy as np\nfrom neupy import layers, init\nimport theano.tensor as T\n\n\ndef norm(value, axis=None):\n    return T.sqrt(T.sum(T.square(value), axis=axis))\n\n\nclass RBF(layers.BaseLayer):\n    def initialize(self):\n        super(RBF, self).initialize()\n\n        # It's more flexible when shape of the parameters\n        # denend on the input shape\n        self.add_parameter(\n            name='mean', shape=self.input_shape,\n            value=init.Constant(0.), trainable=True)\n\n        self.add_parameter(\n            name='std_dev', shape=self.input_shape,\n            value=init.Constant(1.), trainable=True)\n\n    def output(self, input_value):\n        K = input_value - self.mean\n        return T.exp(-norm(K, axis=0) / self.std_dev)\n\n\nnetwork = layers.Input(1) &gt; RBF()\npredict = network.compile()\nprint(predict(np.random.random((10, 1))))\n\nnetwork = layers.Input(4) &gt; RBF()\npredict = network.compile()\nprint(predict(np.random.random((10, 4))))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 63, "user_id": 9482144, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lTznw.jpg?s=128&g=1", "display_name": "10donovanr", "link": "https://stackoverflow.com/users/9482144/10donovanr"}, "is_accepted": false, "score": 0, "last_activity_date": 1524347484, "last_edit_date": 1592644375, "creation_date": 1524169622, "answer_id": 49929692, "question_id": 49908588, "link": "https://stackoverflow.com/questions/49908588/trainable-multi-parameter-activ-function-rbf-neupy-theano/49929692#49929692", "title": "Trainable, Multi-Parameter Activ. Function (RBF) NeuPy / Theano", "body": "<p>Although itdxer answered the question sufficiently, I would like to add the exact solution to this problem.</p>\n<h1>Creation of Architecture</h1>\n<pre><code>network = layers.Input(size) &gt; RBF() &gt; layers.Softmax(num_out)\n</code></pre>\n<h1>Activation Function</h1>\n<pre><code>    # Elementwise Gaussian (RBF)\n    def rbf(value, mean, std):\n        return T.exp(-.5*T.sqr(value-mean)/T.sqr(std))/(std*T.sqrt(2*np.pi))\n</code></pre>\n<h1>RBF Class</h1>\n<pre><code>    class RBF(layers.BaseLayer):\n \n        def initialize(self):\n \n            # Begin by initializing.\n            super(RBF, self).initialize()\n \n            # Add parameters to train\n            self.add_parameter(name='means', shape=self.input_shape,\n                           value=init.Normal(), trainable=True)\n            self.add_parameter(name='std_dev', shape=self.input_shape,\n                           value=init.Normal(), trainable=True)\n \n        # Define output function for the RBF layer.\n        def output(self, input_value):\n            K = input_value - self.means\n            return rbf(input_value,self.means,self.std_dev\n</code></pre>\n<h1>Training</h1>\n<p>If you are interested in training. It is  as simple as,</p>\n<pre><code># Set training algorithm\ngdnet = algorithms.Momentum(\n    network,\n    momenutm = 0.1\n)\n\n# Train. \ngdnet.train(x,y,max_iter=100)\n</code></pre>\n<p>This compiles with the proper input and target and mean and variances are updated on an elementwise basis.</p>\n"}], "owner": {"reputation": 63, "user_id": 9482144, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lTznw.jpg?s=128&g=1", "display_name": "10donovanr", "link": "https://stackoverflow.com/users/9482144/10donovanr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 0, "accepted_answer_id": 49925028, "answer_count": 2, "score": 1, "last_activity_date": 1524347484, "creation_date": 1524083638, "last_edit_date": 1524168790, "question_id": 49908588, "link": "https://stackoverflow.com/questions/49908588/trainable-multi-parameter-activ-function-rbf-neupy-theano", "title": "Trainable, Multi-Parameter Activ. Function (RBF) NeuPy / Theano", "body": "<p>How do I implement a custom activation function (RBF kernel with mean and variances adjusted by gradient descent) in Neupy or Theano for use in Neupy.</p>\n\n<p>{Quick Background: Gradient Descent works with every parameter in the network. I want to make a specialized features space that contains optimized feature parameters so Neupy}</p>\n\n<p>I think my problems is in the creation of parameters, how they are sized, and how they are all connected.</p>\n\n<p>Primary functions of interest.</p>\n\n<h1>Activation Function Class</h1>\n\n<pre><code>class RBF(layers.ActivationLayer):\n    def initialize(self):\n        super(RBF, self).initialize()\n        self.add_parameter(name='mean', shape=(1,),\n                       value=init.Normal(), trainable=True)\n        self.add_parameter(name='std_dev', shape=(1,),\n                       value=init.Normal(), trainable=True)\n    def output(self, input_value):\n        return rbf(input_value, self.parameters)\n</code></pre>\n\n<h1>RBF Function</h1>\n\n<pre><code>def rbf(input_value, parameters):\n    K = _outer_substract(input_value, parameters['mean'])\n    return np.exp(- np.linalg.norm(K)/parameters['std_dev'])\n</code></pre>\n\n<h1>Function to shape?</h1>\n\n<pre><code>def _outer_substract(x, y):\n    return (x - y.T).T\n</code></pre>\n\n<p>Help will be much appreciated as this is will provide great insight into how to customize neupy networks. The documentation could use some work in some areas to say the least...</p>\n"}, {"tags": ["python", "django"], "comments": [{"owner": {"reputation": 7147, "user_id": 5464747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f60df21c4da5e9dbe92aff62b4ded3b2?s=128&d=identicon&r=PG", "display_name": "dfundako", "link": "https://stackoverflow.com/users/5464747/dfundako"}, "edited": false, "score": 2, "creation_date": 1524083691, "post_id": 49908557, "comment_id": 86833087, "body": "Show the URL you attempted and show the traceback."}, {"owner": {"reputation": 6386, "user_id": 2950593, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/c2a48d4e4bc7b3acde3023813cec112b?s=128&d=identicon&r=PG&f=1", "display_name": "user2950593", "link": "https://stackoverflow.com/users/2950593/user2950593"}, "reply_to_user": {"reputation": 7147, "user_id": 5464747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f60df21c4da5e9dbe92aff62b4ded3b2?s=128&d=identicon&r=PG", "display_name": "dfundako", "link": "https://stackoverflow.com/users/5464747/dfundako"}, "edited": false, "score": 0, "creation_date": 1524084026, "post_id": 49908557, "comment_id": 86833254, "body": "@dfundako updated with traceback"}, {"owner": {"reputation": 7147, "user_id": 5464747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f60df21c4da5e9dbe92aff62b4ded3b2?s=128&d=identicon&r=PG", "display_name": "dfundako", "link": "https://stackoverflow.com/users/5464747/dfundako"}, "edited": false, "score": 0, "creation_date": 1524084235, "post_id": 49908557, "comment_id": 86833351, "body": "See this about your WSGI attribute error: <a href=\"https://stackoverflow.com/questions/38930157/django-error-wsgirequest-object-has-no-attribute-user#38930587\" title=\"django error wsgirequest object has no attribute user%2338930587\">stackoverflow.com/questions/38930157/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 106, "user_id": 8050503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6b5354bef2f61f792c08fdce5a36ad5?s=128&d=identicon&r=PG&f=1", "display_name": "spooky", "link": "https://stackoverflow.com/users/8050503/spooky"}, "is_accepted": false, "score": 0, "last_activity_date": 1524084103, "creation_date": 1524084103, "answer_id": 49908694, "question_id": 49908557, "link": "https://stackoverflow.com/questions/49908557/the-current-path-admin-didnt-match-any-of-these-django/49908694#49908694", "title": "The current path, admin, didn&#39;t match any of these. django", "body": "<p>try changing your url definition to this:</p>\n\n<p><code>url(r'^admin/', admin.site.urls),</code></p>\n"}, {"tags": [], "owner": {"reputation": 6386, "user_id": 2950593, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/c2a48d4e4bc7b3acde3023813cec112b?s=128&d=identicon&r=PG&f=1", "display_name": "user2950593", "link": "https://stackoverflow.com/users/2950593/user2950593"}, "is_accepted": false, "score": 0, "last_activity_date": 1524084516, "creation_date": 1524084516, "answer_id": 49908786, "question_id": 49908557, "link": "https://stackoverflow.com/questions/49908557/the-current-path-admin-didnt-match-any-of-these-django/49908786#49908786", "title": "The current path, admin, didn&#39;t match any of these. django", "body": "<p>This helped:</p>\n\n<p>In case anyone is having this problem with Django 2.0, the following configuration with new-style MIDDLEWARE seems to work (docs here):</p>\n\n<pre><code>MIDDLEWARE = [\n    'django.middleware.security.SecurityMiddleware',\n    'django.contrib.sessions.middleware.SessionMiddleware',\n    'django.middleware.common.CommonMiddleware',\n    'django.middleware.csrf.CsrfViewMiddleware',\n    'django.contrib.auth.middleware.AuthenticationMiddleware',\n    'django.contrib.messages.middleware.MessageMiddleware',\n    'django.middleware.clickjacking.XFrameOptionsMiddleware',\n]\n</code></pre>\n\n<p>thanks guys from here: <a href=\"https://stackoverflow.com/a/47795057/2950593\">https://stackoverflow.com/a/47795057/2950593</a></p>\n"}], "owner": {"reputation": 6386, "user_id": 2950593, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/c2a48d4e4bc7b3acde3023813cec112b?s=128&d=identicon&r=PG&f=1", "display_name": "user2950593", "link": "https://stackoverflow.com/users/2950593/user2950593"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1885, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1524084516, "creation_date": 1524083542, "last_edit_date": 1524083877, "question_id": 49908557, "link": "https://stackoverflow.com/questions/49908557/the-current-path-admin-didnt-match-any-of-these-django", "title": "The current path, admin, didn&#39;t match any of these. django", "body": "<p>I use django 2.0\nmy urls.py file:</p>\n\n<pre><code>\"\"\"django_direct URL Configuration\n\nThe `urlpatterns` list routes URLs to views. For more information please see:\n    https://docs.djangoproject.com/en/1.9/topics/http/urls/\nExamples:\nFunction views\n    1. Add an import:  from my_app import views\n    2. Add a URL to urlpatterns:  url(r'^$', views.home, name='home')\nClass-based views\n    1. Add an import:  from other_app.views import Home\n    2. Add a URL to urlpatterns:  url(r'^$', Home.as_view(), name='home')\nIncluding another URLconf\n    1. Add an import:  from blog import urls as blog_urls\n    2. Import the include() function: from django.conf.urls import url, include\n    3. Add a URL to urlpatterns:  url(r'^blog/', include(blog_urls))\n\"\"\"\nfrom django.conf.urls import url,include\nfrom django.contrib import admin\nfrom main_app import views\n\nurlpatterns = [\n    url('^admin/', admin.site.urls),\n    # url(r'^/', include('main_app.urls')),\n    url('/', views.index),\n]\n</code></pre>\n\n<p>This is url, I visit:\n<a href=\"https://django-direct-jonsdirewolf.c9users.io/admin\" rel=\"nofollow noreferrer\">https://django-direct-jonsdirewolf.c9users.io/admin</a>\nI use cloud 9 Ide (it's online ide) so it's like localhost:8000/admin\n<a href=\"https://i.stack.imgur.com/fjKIR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fjKIR.png\" alt=\"enter image description here\"></a></p>\n\n<pre><code>Internal Server Error: /admin/\nTraceback (most recent call last):\n  File \"/usr/local/lib/python3.4/dist-packages/django/core/handlers/exception.py\", line 35, in inner\n    response = get_response(request)\n  File \"/usr/local/lib/python3.4/dist-packages/django/core/handlers/base.py\", line 128, in _get_response\n    response = self.process_exception_by_middleware(e, request)\n  File \"/usr/local/lib/python3.4/dist-packages/django/core/handlers/base.py\", line 126, in _get_response\n    response = wrapped_callback(request, *callback_args, **callback_kwargs)\n  File \"/usr/local/lib/python3.4/dist-packages/django/contrib/admin/sites.py\", line 241, in wrapper\n    return self.admin_view(view, cacheable)(*args, **kwargs)\n  File \"/usr/local/lib/python3.4/dist-packages/django/utils/decorators.py\", line 142, in _wrapped_view\n    response = view_func(request, *args, **kwargs)\n  File \"/usr/local/lib/python3.4/dist-packages/django/views/decorators/cache.py\", line 44, in _wrapped_view_func\n    response = view_func(request, *args, **kwargs)\n  File \"/usr/local/lib/python3.4/dist-packages/django/contrib/admin/sites.py\", line 212, in inner\n    if not self.has_permission(request):\n  File \"/usr/local/lib/python3.4/dist-packages/django/contrib/admin/sites.py\", line 186, in has_permission\n    return request.user.is_active and request.user.is_staff\nAttributeError: 'WSGIRequest' object has no attribute 'user'\n[18/Apr/2018 20:38:23] \"GET /admin/ HTTP/1.1\" 500 86326\nNot Found: /admin\n[18/Apr/2018 20:38:34] \"GET /admin HTTP/1.1\" 404 2087\nInternal\n</code></pre>\n"}, {"tags": ["python", "numpy", "opencv", "c++11"], "comments": [{"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 1, "creation_date": 1524086177, "post_id": 49908548, "comment_id": 86834150, "body": "Not exactly, but almost :) -- <code>np.array(3,2,3)</code> will cause a syntax error, <code>np.zeros((3,2,3))</code> will use <code>np.float64</code> as datatype. To make it equivalent to the C++ code, you want <code>np.float32</code>. <code>cv::Vec3f</code> matches <code>CV_32FC3</code>. It could be used to represent pixel colors in a 3 channel image (e.g. RGB)."}, {"owner": {"reputation": 950, "user_id": 4355878, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/d8eaf7432b176754d0ac0d9c2df9eecc?s=128&d=identicon&r=PG&f=1", "display_name": "j35t3r", "link": "https://stackoverflow.com/users/4355878/j35t3r"}, "reply_to_user": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1524124046, "post_id": 49908548, "comment_id": 86846526, "body": "ok. thanks. You clarified my question :)"}], "owner": {"reputation": 950, "user_id": 4355878, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/d8eaf7432b176754d0ac0d9c2df9eecc?s=128&d=identicon&r=PG&f=1", "display_name": "j35t3r", "link": "https://stackoverflow.com/users/4355878/j35t3r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 181, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1524123955, "creation_date": 1524083516, "last_edit_date": 1524123955, "question_id": 49908548, "link": "https://stackoverflow.com/questions/49908548/3d-array-as-cvmat-and-numpy", "title": "3D array as cv::mat and numpy", "body": "<p>When I use cv::Mat is it the same as np.array((3,2,3))?</p>\n\n<pre><code>cv::Mat mat_32f_C3(mat.rows, mat.cols, CV_32FC3);\nmat_32f_C3.at&lt;cv::Vec3f&gt;(0,0) = cv::Vec3f(1,1,1); \nmat_32f_C3.at&lt;cv::Vec3f&gt;(0,1) = cv::Vec3f(2,2,2);\nmat_32f_C3.at&lt;cv::Vec3f&gt;(1,0) = cv::Vec3f(3,3,3);\nmat_32f_C3.at&lt;cv::Vec3f&gt;(1,1) = cv::Vec3f(4,4,4);\nmat_32f_C3.at&lt;cv::Vec3f&gt;(2,0) = cv::Vec3f(5,5,5);\nmat_32f_C3.at&lt;cv::Vec3f&gt;(2,1) = cv::Vec3f(6,6,6);\n</code></pre>\n\n<p>I am not sure if the <code>cv::Vec3f</code> represents RGB in a color image.</p>\n\n<p>In python I would write</p>\n\n<pre><code>broadcast = np.zeros((3,2,3))\ni1 = np.arange(1, 7, 1).reshape((3,2))\nresult = i1 + broadcast\n\noutput array([[[[1., 2.],\n         [3., 4.],\n         [5., 6.]],\n        [[1., 2.],\n         [3., 4.],\n         [5., 6.]],\n        [[1., 2.],\n         [3., 4.],\n         [5., 6.]]]])\n</code></pre>\n\n<p>Are these examples the same?</p>\n"}, {"tags": ["python", "python-2.7", "gcc", "pyodbc", "python-2.6"], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 7581543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf1bec20c9ec01047bfbb369685bb78b?s=128&d=identicon&r=PG&f=1", "display_name": "ksten", "link": "https://stackoverflow.com/users/7581543/ksten"}, "is_accepted": false, "score": 0, "last_activity_date": 1524753851, "creation_date": 1524753851, "answer_id": 50045919, "question_id": 49908470, "link": "https://stackoverflow.com/questions/49908470/gcc-error-when-installing-pyodbc/50045919#50045919", "title": "gcc error when installing pyodbc", "body": "<p>The resolution was to re-install Python2.7</p>\n"}], "owner": {"reputation": 11, "user_id": 7581543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf1bec20c9ec01047bfbb369685bb78b?s=128&d=identicon&r=PG&f=1", "display_name": "ksten", "link": "https://stackoverflow.com/users/7581543/ksten"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 371, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1524753851, "creation_date": 1524083097, "question_id": 49908470, "link": "https://stackoverflow.com/questions/49908470/gcc-error-when-installing-pyodbc", "title": "gcc error when installing pyodbc", "body": "<p>I am installing pyodbc on Redhat 6.5.  Python 2.6 and 2.7.4 are installed.  I get the following error below even though the header files needed for gcc are in the /usr/include/python2.6.</p>\n\n<p>I have updated every dev package:  yum groupinstall -y 'development tools'</p>\n\n<p>Any ideas on how to resolve this issue would be greatly appreciated???</p>\n\n<p>Installing pyodbc...<br/>\nProcessing ./pyodbc-3.0.10.tar.gz<br/>\nInstalling collected packages: pyodbc<br/>\n Running setup.py install for pyodbc ... error<br/>\n    Complete output from command /opt/rh/python27/root/usr/bin/python -u -c \"import setuptools, tokenize;<strong>file</strong>='/tmp/pip-JAGZDD-build/setup.py';exec(compile(getattr(tokenize, 'open', open)(<strong>file</strong>).read().replace('\\r\\n', '\\n'), <strong>file</strong>, 'exec'))\" install --record /tmp/pip-QJasL0-record/install-record.txt --single-version-externally-managed --compile:<br/>\n    running install<br/>\n    running build<br/>\n    running build_ext<br/>\n    building 'pyodbc' extension<br/>\n    creating build<br/>\n    creating build/temp.linux-x86_64-2.7<br/>\n    creating build/temp.linux-x86_64-2.7/tmp<br/>\n    creating build/temp.linux-x86_64-2.7/tmp/pip-JAGZDD-build<br/>\n    creating build/temp.linux-x86_64-2.7/tmp/pip-JAGZDD-build/src<br/>\n    gcc -pthread -fno-strict-aliasing -O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m64 -mtune=generic -D_GNU_SOURCE -fPIC -fwrapv -DNDEBUG -O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m64 -mtune=generic -D_GNU_SOURCE -fPIC -fwrapv -fPIC -DPYODBC_VERSION=3.0.10 -DPYODBC_UNICODE_WIDTH=4 -DSQL_WCHART_CONVERT=1 -I/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.8.sdk/usr/include -I/opt/rh/python27/root/usr/include/python2.7 -c /tmp/pip-JAGZDD-build/src/cnxninfo.cpp -o build/temp.linux-x86_64-2.7/tmp/pip-JAGZDD-build/src/cnxninfo.o -Wno-write-strings<br/>\n    In file included from /tmp/pip-JAGZDD-build/src/cnxninfo.cpp:8:<br/>\n    **</p>\n\n<h2>**/tmp/pip-JAGZDD-build/src/pyodbc.h:41:20: error: Python.h: No such file or directory<br/> /tmp/pip-JAGZDD-build/src/pyodbc.h:42:25: error: floatobject.h: No such file or directory<br/> /tmp/pip-JAGZDD-build/src/pyodbc.h:43:24: error: longobject.h: No such file or directory<br/> /tmp/pip-JAGZDD-build/src/pyodbc.h:44:24: error: boolobject.h: No such file or directory<br/> /tmp/pip-JAGZDD-build/src/pyodbc.h:45:27: error: unicodeobject.h: No such file or directory<br/> /tmp/pip-JAGZDD-build/src/pyodbc.h:46:26: error: structmember.h: No such file or directory<br/></h2>\n\n<p>**\n    In file included from /tmp/pip-JAGZDD-build/src/pyodbc.h:137,<br/>\n                     from /tmp/pip-JAGZDD-build/src/cnxninfo.cpp:8:<br/>\n    /tmp/pip-JAGZDD-build/src/pyodbccompat.h:61:28: error: stringobject.h: No such file or directory<br/>\n    /tmp/pip-JAGZDD-build/src/pyodbccompat.h:62:25: error: intobject.h: No such file or directory<br/>\n    /tmp/pip-JAGZDD-build/src/pyodbccompat.h:63:28: error: bufferobject.h: No such file or directory<br/>\n    In file included from /tmp/pip-JAGZDD-build/src/cnxninfo.cpp:8:<br/>\n    /tmp/pip-JAGZDD-build/src/pyodbc.h: In function \u2018void _strlwr(char*)\u2019:<br/>\n    /tmp/pip-JAGZDD-build/src/pyodbc.h:92: error: \u2018tolower\u2019 was not declared in this scope<br/>\n    In file included from /tmp/pip-JAGZDD-build/src/pyodbc.h:137,<br/>\n                     from /tmp/pip-JAGZDD-build/src/cnxninfo.cpp:8:<br/>\n    /tmp/pip-JAGZDD-build/src/pyodbccompat.h: At global scope:<br/>\n    /tmp/pip-JAGZDD-build/src/pyodbccompat.h:71: error: expected initializer before \u2018*\u2019 token<br/>\n    /tmp/pip-JAGZDD-build/src/pyodbccompat.h:81: error: \u2018Text_Buffer\u2019 declared as an \u2018inline\u2019 variable<br/>\n    /tmp/pip-JAGZDD-build/src/pyodbccompat.h:81: error: \u2018PyObject\u2019 was not declared in this scope<br/>\n    /tmp/pip-JAGZDD-build/src/pyodbccompat.h:81: error: \u2018o\u2019 was not declared in this scope<br/>\n    /tmp/pip-JAGZDD-build/src/pyodbccompat.h:82: error: expected \u2018,\u2019 or \u2018;\u2019 before \u2018{\u2019 token<br/>\n    /tmp/pip-JAGZDD-build/src/pyodbccompat.h:93: error: \u2018Text_Check\u2019 declared as an \u2018inline\u2019 variable<br/>\n    /tmp/pip-JAGZDD-build/src/pyodbccompat.h:93: error: \u2018PyObject\u2019 was not declared in this scope<br/>\n    /tmp/pip-JAGZDD-build/src/pyodbccompat.h:93: error: \u2018o\u2019 was not declared in this scope<br/>\n    /tmp/pip-JAGZDD-build/src/pyodbccompat.h:94: error: expected \u2018,\u2019 or \u2018;\u2019 before \u2018{\u2019 token<br/>\n    /tmp/pip-JAGZDD-build/src/pyodbccompat.h:104: error: \u2018PyObject\u2019 was not declared in this scope<br/>\n    /tmp/pip-JAGZDD-build/src/pyodbccompat.h:104: error: \u2018lhs\u2019 was not declared in this scope<br/>\n    /tmp/pip-JAGZDD-build/src/pyodbccompat.h:104: error: expected primary-expression before \u2018const\u2019<br/>\n    /tmp/pip-JAGZDD-build/src/pyodbccompat.h:104: error: initializer expression list treated as compound expression<br/>\n    /tmp/pip-JAGZDD-build/src/pyodbccompat.h:109: error: \u2018Text_Size\u2019 declared as an \u2018inline\u2019 variable<br/>\n    /tmp/pip-JAGZDD-build/src/pyodbccompat.h:109: error: \u2018PyObject\u2019 was not declared in this scope<br/>\n    /tmp/pip-JAGZDD-build/src/pyodbccompat.h:109: error: \u2018o\u2019 was not declared in this scope<br/>\n    /tmp/pip-JAGZDD-build/src/pyodbccompat.h:110: error: expected \u2018,\u2019 or \u2018;\u2019 before \u2018{\u2019 token<br/>\n    /tmp/pip-JAGZDD-build/src/pyodbccompat.h:118: error: \u2018TextCopyToUnicode\u2019 declared as an \u2018inline\u2019 variable<br/>\n    /tmp/pip-JAGZDD-build/src/pyodbccompat.h:118: error: \u2018Py_UNICODE\u2019 was not declared in this scope<br/>\n    /tmp/pip-JAGZDD-build/src/pyodbccompat.h:118: error: \u2018buffer\u2019 was not declared in this scope<br/>\n    /tmp/pip-JAGZDD-build/src/pyodbccompat.h:118: error: \u2018PyObject\u2019 was not declared in this scope<br/>\n    /tmp/pip-JAGZDD-build/src/pyodbccompat.h:118: error: \u2018o\u2019 was not declared in this scope<br/>\n    /tmp/pip-JAGZDD-build/src/pyodbccompat.h:118: error: initializer expression list treated as compound expression<br/>\n    /tmp/pip-JAGZDD-build/src/pyodbccompat.h:119: error: expected \u2018,\u2019 or \u2018;\u2019 before \u2018{\u2019 token<br/>\n    error: command 'gcc' failed with exit status 1</p>\n"}, {"tags": ["python", "linux", "bash", "perl", "awk"], "comments": [{"owner": {"reputation": 15409, "user_id": 2877364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a101160e41fd7fd75f5fc701f8acb1c?s=128&d=identicon&r=PG", "display_name": "cxw", "link": "https://stackoverflow.com/users/2877364/cxw"}, "edited": false, "score": 12, "creation_date": 1524083195, "post_id": 49908444, "comment_id": 86832832, "body": "<code>ripgrep -F</code> =&gt; four minutes for the whole file - not too bad for 100GB.  It probably took you longer than that to write this question ;) .  Allow me to suggest using an actual database for datasets of that size :) ."}, {"owner": {"reputation": 2029, "user_id": 6703569, "user_type": "registered", "accept_rate": 74, "profile_image": "https://lh4.googleusercontent.com/-SEU_x8PjYg4/AAAAAAAAAAI/AAAAAAAAAA8/9Ht4S0ndBuI/photo.jpg?sz=128", "display_name": "Bhawan", "link": "https://stackoverflow.com/users/6703569/bhawan"}, "reply_to_user": {"reputation": 15409, "user_id": 2877364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a101160e41fd7fd75f5fc701f8acb1c?s=128&d=identicon&r=PG", "display_name": "cxw", "link": "https://stackoverflow.com/users/2877364/cxw"}, "edited": false, "score": 0, "creation_date": 1524083264, "post_id": 49908444, "comment_id": 86832859, "body": "The above analysis is for 6 GB file only."}, {"owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 1, "creation_date": 1524083305, "post_id": 49908444, "comment_id": 86832888, "body": "<code>((100&#47;6)*14)&#47;60</code> = about 4 minutes. His math is right."}, {"owner": {"reputation": 2029, "user_id": 6703569, "user_type": "registered", "accept_rate": 74, "profile_image": "https://lh4.googleusercontent.com/-SEU_x8PjYg4/AAAAAAAAAAI/AAAAAAAAAA8/9Ht4S0ndBuI/photo.jpg?sz=128", "display_name": "Bhawan", "link": "https://stackoverflow.com/users/6703569/bhawan"}, "edited": false, "score": 0, "creation_date": 1524083352, "post_id": 49908444, "comment_id": 86832912, "body": "What will be the benefit of using database , like what will you use for string search in database ?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 6, "creation_date": 1524083382, "post_id": 49908444, "comment_id": 86832934, "body": "Have you considered using a less bad data structure?"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1524083509, "post_id": 49908444, "comment_id": 86833009, "body": "the problem is that you&#39;re relying on linear search with <code>grep</code>. If you had a hash table structure you could be much faster."}, {"owner": {"reputation": 15409, "user_id": 2877364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a101160e41fd7fd75f5fc701f8acb1c?s=128&d=identicon&r=PG", "display_name": "cxw", "link": "https://stackoverflow.com/users/2877364/cxw"}, "edited": false, "score": 0, "creation_date": 1524083581, "post_id": 49908444, "comment_id": 86833042, "body": "Here&#39;s a couple of links I found via Google - <a href=\"http://www.drdobbs.com/rdb-a-unix-command-line-database/199101326\" rel=\"nofollow noreferrer\">RDB</a> (actually uses text files - not sure if it would be any faster), <a href=\"https://dev.mysql.com/doc/refman/5.6/en/mysql-commands.html\" rel=\"nofollow noreferrer\">MySQL command reference</a>"}, {"owner": {"reputation": 68627, "user_id": 3776858, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/juunm.png?s=128&g=1", "display_name": "Cyrus", "link": "https://stackoverflow.com/users/3776858/cyrus"}, "edited": false, "score": 0, "creation_date": 1524083653, "post_id": 49908444, "comment_id": 86833070, "body": "What exactly are you looking for? Complete email, username or password_hash or substring of email, username or password_hash?"}, {"owner": {"reputation": 2029, "user_id": 6703569, "user_type": "registered", "accept_rate": 74, "profile_image": "https://lh4.googleusercontent.com/-SEU_x8PjYg4/AAAAAAAAAAI/AAAAAAAAAA8/9Ht4S0ndBuI/photo.jpg?sz=128", "display_name": "Bhawan", "link": "https://stackoverflow.com/users/6703569/bhawan"}, "edited": false, "score": 0, "creation_date": 1524083772, "post_id": 49908444, "comment_id": 86833129, "body": "the user can search a string, which can be either a part of email or part of user name."}, {"owner": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 0, "creation_date": 1524084131, "post_id": 49908444, "comment_id": 86833295, "body": "At what frequency is the file updated, and is it ordered in any way? An advantage to using a database is the potential for indexed queries."}, {"owner": {"reputation": 766, "user_id": 8746930, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh3.googleusercontent.com/-4vA616Iuc-I/AAAAAAAAAAI/AAAAAAAAAAc/5hrF-krxrXM/photo.jpg?sz=128", "display_name": "eagle", "link": "https://stackoverflow.com/users/8746930/eagle"}, "edited": false, "score": 0, "creation_date": 1524084201, "post_id": 49908444, "comment_id": 86833331, "body": "GNU Parallel, I can not recommend enough, break the file into tiny chunks and then feed it into parallel"}, {"owner": {"reputation": 2029, "user_id": 6703569, "user_type": "registered", "accept_rate": 74, "profile_image": "https://lh4.googleusercontent.com/-SEU_x8PjYg4/AAAAAAAAAAI/AAAAAAAAAA8/9Ht4S0ndBuI/photo.jpg?sz=128", "display_name": "Bhawan", "link": "https://stackoverflow.com/users/6703569/bhawan"}, "reply_to_user": {"reputation": 13399, "user_id": 716443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d13509991dbbd5467f01f55988ae4e?s=128&d=identicon&r=PG", "display_name": "DavidO", "link": "https://stackoverflow.com/users/716443/davido"}, "edited": false, "score": 0, "creation_date": 1524084262, "post_id": 49908444, "comment_id": 86833366, "body": "@DavidO, the frequency is very low."}, {"owner": {"reputation": 2029, "user_id": 6703569, "user_type": "registered", "accept_rate": 74, "profile_image": "https://lh4.googleusercontent.com/-SEU_x8PjYg4/AAAAAAAAAAI/AAAAAAAAAA8/9Ht4S0ndBuI/photo.jpg?sz=128", "display_name": "Bhawan", "link": "https://stackoverflow.com/users/6703569/bhawan"}, "reply_to_user": {"reputation": 766, "user_id": 8746930, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh3.googleusercontent.com/-4vA616Iuc-I/AAAAAAAAAAI/AAAAAAAAAAc/5hrF-krxrXM/photo.jpg?sz=128", "display_name": "eagle", "link": "https://stackoverflow.com/users/8746930/eagle"}, "edited": false, "score": 0, "creation_date": 1524084285, "post_id": 49908444, "comment_id": 86833385, "body": "@eagle, I tried the parallel command also, but still slower."}, {"owner": {"reputation": 766, "user_id": 8746930, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh3.googleusercontent.com/-4vA616Iuc-I/AAAAAAAAAAI/AAAAAAAAAAc/5hrF-krxrXM/photo.jpg?sz=128", "display_name": "eagle", "link": "https://stackoverflow.com/users/8746930/eagle"}, "edited": false, "score": 0, "creation_date": 1524084370, "post_id": 49908444, "comment_id": 86833421, "body": "you might not be using it properly, but at this point you can also go the map reduce route"}, {"owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "edited": false, "score": 7, "creation_date": 1524085667, "post_id": 49908444, "comment_id": 86833967, "body": "what is your expectation of good timing? Is this a frequent query which might be worth creating index or even using a small db?  Can it be sorted in the searched field?"}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 1, "creation_date": 1524101639, "post_id": 49908444, "comment_id": 86838639, "body": "Also see <a href=\"https://stackoverflow.com/q/6219141/608639\">Searching for a string in a large text file - profiling various methods in python</a>, <a href=\"https://stackoverflow.com/q/13913014/608639\">Grepping a huge file (80GB) any way to speed it up?</a>, etc."}, {"owner": {"reputation": 5790, "user_id": 5407270, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-NsKU95wNnz8/AAAAAAAAAAI/AAAAAAAAAlI/JsEGfhwPOqU/photo.jpg?sz=128", "display_name": "Andriy Makukha", "link": "https://stackoverflow.com/users/5407270/andriy-makukha"}, "edited": false, "score": 1, "creation_date": 1524107058, "post_id": 49908444, "comment_id": 86839793, "body": "If the query is frequent, you might want to learn about &quot;full-text search&quot; and set up an indexing engine, like Lucene or Sphinx. If your rows are all uniform, you can use MySQL table."}, {"owner": {"reputation": 123805, "user_id": 622310, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8b6d35219e1808520bc238b28161e2e6?s=128&d=identicon&r=PG", "display_name": "Borodin", "link": "https://stackoverflow.com/users/622310/borodin"}, "edited": false, "score": 0, "creation_date": 1524123858, "post_id": 49908444, "comment_id": 86846420, "body": "Unless your file is on an SSD, you are getting extremely good performance as it is. A reasonable guess for the read speed of a hard disk is about 100MB/s, so it will take about one minute to read through a 6GB text file, even without the overhead of searching the data. I can only guess that the superior speeds you are seeing are because the file has been partially cached in memory from your previous attempts. I would stick with <code>ripgrep -F</code> as it&#39;s very much faster than you should expect. To improve the access time further you need to put the data into a proper database."}, {"owner": {"reputation": 20517, "user_id": 8344060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1UbPk.png?s=128&g=1", "display_name": "kvantour", "link": "https://stackoverflow.com/users/8344060/kvantour"}, "edited": false, "score": 0, "creation_date": 1524133050, "post_id": 49908444, "comment_id": 86852401, "body": "Is your file sorted?"}, {"owner": {"reputation": 10100, "user_id": 619216, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c07104de771c3b6f6c30be8f592ef8f7?s=128&d=identicon&r=PG", "display_name": "BurntSushi5", "link": "https://stackoverflow.com/users/619216/burntsushi5"}, "edited": false, "score": 1, "creation_date": 1524136290, "post_id": 49908444, "comment_id": 86854588, "body": "The fact that <code>rg literal</code> and <code>rg -F literal</code> take different times to run strongly suggests that your search is disk bound, which isn&#39;t a surprise given the size of the file you&#39;re searching. Notably, there is zero performance difference between <code>rg foo</code> and <code>rg -F foo</code>. Therefore, the only way to speed it up is to get a faster disk or index it."}], "answers": [{"comments": [{"owner": {"reputation": 132964, "user_id": 171318, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ePRKy.jpg?s=128&g=1", "display_name": "hek2mgl", "link": "https://stackoverflow.com/users/171318/hek2mgl"}, "edited": false, "score": 0, "creation_date": 1524134438, "post_id": 49915445, "comment_id": 86853268, "body": "Reason for the down-vote? I&#39;m curious"}], "tags": [], "owner": {"reputation": 132964, "user_id": 171318, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ePRKy.jpg?s=128&g=1", "display_name": "hek2mgl", "link": "https://stackoverflow.com/users/171318/hek2mgl"}, "is_accepted": false, "score": 1, "last_activity_date": 1524123856, "creation_date": 1524123856, "answer_id": 49915445, "question_id": 49908444, "link": "https://stackoverflow.com/questions/49908444/search-for-a-string-in-a-100-gb-file/49915445#49915445", "title": "Search for a string in a 100 GB file", "body": "<p>If you have to do this just once: Use grep and wait until it finishes. </p>\n\n<p>If searching for a strings in 600GB csv files is part of your regular process then you'll have to change the process. Options are: use a database instead of a text file, use map/reduce and spread the load across multiple machines and cores (hadoop), ...</p>\n"}], "owner": {"reputation": 2029, "user_id": 6703569, "user_type": "registered", "accept_rate": 74, "profile_image": "https://lh4.googleusercontent.com/-SEU_x8PjYg4/AAAAAAAAAAI/AAAAAAAAAA8/9Ht4S0ndBuI/photo.jpg?sz=128", "display_name": "Bhawan", "link": "https://stackoverflow.com/users/6703569/bhawan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 476, "favorite_count": 1, "closed_date": 1524125891, "answer_count": 1, "score": 3, "last_activity_date": 1524123856, "creation_date": 1524083013, "last_edit_date": 1524123345, "question_id": 49908444, "link": "https://stackoverflow.com/questions/49908444/search-for-a-string-in-a-100-gb-file", "closed_reason": "Not suitable for this site", "title": "Search for a string in a 100 GB file", "body": "<p>I have a 100GB text file. The data in that file is in this format:</p>\n\n<pre><code>email||username||password_hash\n</code></pre>\n\n<p>I am testing on a 6GB file which I made separately by splitting the bigger file.</p>\n\n<p>I am running <code>grep</code> to match the lines and output them.</p>\n\n<ol>\n<li><p>I used <code>grep</code>. It is taking around 1 minute 22 seconds</p></li>\n<li><p>I used other options with <code>grep</code>, like, <code>LC_ALL=C and -F</code>, but the time is reduced to <code>1 minute 15 seconds</code>, which is still not good for a 6GB file.</p></li>\n<li><p>Then I used <code>ripgrep,</code> it is taking <code>27 seconds</code> on my machine, still not good.</p></li>\n<li><p>Then I used <code>ripgrep with -F option</code>, it is taking <code>14 seconds</code>, still not good.</p></li>\n<li><p>I tried <code>ag also (the silver searcher)</code>, but I found that it won't work for files bigger than 2 GB.</p></li>\n</ol>\n\n<p>I need your help which command line tool (or language) to achieve better results, or some way I can take advantage of the format of data to search by column. Like if I am searching by username, then instead of matching the whole line, I search only on the second column. I tried that using <code>awk</code>, but it is still slower.</p>\n"}, {"tags": ["python", "python-3.7", "python-dataclasses"], "answers": [{"comments": [{"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 1, "creation_date": 1526239422, "post_id": 49908595, "comment_id": 87655357, "body": "\u20131 It is incorrect to use a copy/deepcopy for field replacement on dataclasses.  In some complex use cases (e.g. init/post_init hooks), data may not be handled correctly.  The better way is to use <code>dataclasses.replace()</code> function."}, {"owner": {"reputation": 62908, "user_id": 567620, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/g8HIM.jpg?s=128&g=1", "display_name": "ely", "link": "https://stackoverflow.com/users/567620/ely"}, "reply_to_user": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 0, "creation_date": 1526239779, "post_id": 49908595, "comment_id": 87655461, "body": "@wim It appears you are looking through my answer history to punitively downvote / argue, possibly as retaliation for <a href=\"https://stackoverflow.com/questions/49931096/how-to-add-a-dataclass-field-without-annotating-the-type/49931177#comment87638798_50311270\">my opinion</a> regarding a downvote of a question &amp; answer you made. Please discontinue this behavior as my experience of it leads me to feel it is bordering on abusive at this point."}, {"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 1, "creation_date": 1526240243, "post_id": 49908595, "comment_id": 87655596, "body": "No, it is a coincidence. I&#39;m a follower (currently the only follower) of the [python-dataclasses] tag. The existence of the <code>replace</code> method was brought to my attention when I attended a PyCon talk about it yesterday."}], "tags": [], "owner": {"reputation": 62908, "user_id": 567620, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/g8HIM.jpg?s=128&g=1", "display_name": "ely", "link": "https://stackoverflow.com/users/567620/ely"}, "is_accepted": false, "score": 0, "last_activity_date": 1524083655, "creation_date": 1524083655, "answer_id": 49908595, "question_id": 49908399, "link": "https://stackoverflow.com/questions/49908399/replace-attributes-in-data-class-objects/49908595#49908595", "title": "Replace attributes in Data Class objects", "body": "<p><code>dataclass</code> is just syntactic sugar for the automatic creation of a special <code>__init__</code> method and a host of other \"boilerplate\" methods based on type-annotated attributes.</p>\n\n<p>Once the class is created, it is like any other, and its attributes can be overwritten and instances can be copied, e.g.</p>\n\n<pre><code>import copy\n\nv_ = copy.deepcopy(v)\nv_.x = -1\n</code></pre>\n\n<p>Depending on what the attributes are, you may only require <code>copy.copy</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "is_accepted": true, "score": 28, "last_activity_date": 1526759729, "last_edit_date": 1526759729, "creation_date": 1526239291, "answer_id": 50319825, "question_id": 49908399, "link": "https://stackoverflow.com/questions/49908399/replace-attributes-in-data-class-objects/50319825#50319825", "title": "Replace attributes in Data Class objects", "body": "<p>Python dataclasses module has a public API for field replacement on dataclass instances, documented <a href=\"https://docs.python.org/3.7/library/dataclasses.html#dataclasses.replace\" rel=\"noreferrer\">here</a>. This feature is provided by a module level helper function:</p>\n\n<pre><code>from dataclasses import replace\n</code></pre>\n\n<p>The usage differs from <code>collections.namedtuple</code>, where this functionality was provided via a method on the generated type (<em>Side note:</em> <a href=\"https://docs.python.org/3/library/collections.html#collections.somenamedtuple._replace\" rel=\"noreferrer\"><code>namedtuple._replace</code></a> is documented/public.  This name choice was called a \"regret\" by the author - see link at end of answer).</p>\n\n<p><em>Example usage:</em></p>\n\n<pre><code>&gt;&gt;&gt; from dataclasses import dataclass, replace\n&gt;&gt;&gt; @dataclass\n... class V:\n...     x: int\n...     y: int\n...     \n&gt;&gt;&gt; v = V(1, 2)\n&gt;&gt;&gt; v_ = replace(v, y=42)\n&gt;&gt;&gt; v\nV(x=1, y=2)\n&gt;&gt;&gt; v_\nV(x=1, y=42)\n</code></pre>\n\n<p>For more background of the design, see the PyCon 2018 talk - <a href=\"https://www.youtube.com/watch?v=T-TwcmT6Rcw\" rel=\"noreferrer\">Dataclasses: The code generator to end all code generators</a>.  The <code>replace</code> API is discussed in depth, along with other design differences between <code>namedtuple</code> and <code>dataclasses</code> as well as some performance comparisons.</p>\n"}, {"tags": [], "owner": {"reputation": 7517, "user_id": 857390, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7549ae4abf6f58a804e8c257190ed436?s=128&d=identicon&r=PG", "display_name": "Florian Brucker", "link": "https://stackoverflow.com/users/857390/florian-brucker"}, "is_accepted": false, "score": 0, "last_activity_date": 1608101994, "creation_date": 1608101994, "answer_id": 65318622, "question_id": 49908399, "link": "https://stackoverflow.com/questions/49908399/replace-attributes-in-data-class-objects/65318622#65318622", "title": "Replace attributes in Data Class objects", "body": "<p>I know the question is about <code>dataclass</code>, but if you're using <code>attr.s</code> instead then you can use <a href=\"https://www.attrs.org/en/stable/api.html#attr.evolve\" rel=\"nofollow noreferrer\"><code>attr.evolve</code></a> instead of <code>dataclasses.replace</code>:</p>\n<pre class=\"lang-py prettyprint-override\"><code>import attr\n\n@attr.s(frozen=True)\nclass Foo:\n    x = attr.ib()\n    y = attr.ib()\n\nfoo = Foo(1, 2)\nbar = attr.evolve(foo, y=3)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4082, "user_id": 3216427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e0186cf05b82361bc8de3344f542eaf?s=128&d=identicon&r=PG&f=1", "display_name": "joanis", "link": "https://stackoverflow.com/users/3216427/joanis"}, "edited": false, "score": 0, "creation_date": 1617217647, "post_id": 66890686, "comment_id": 118246195, "body": "Welcome to StackOverflow! Can you add some text to your answer to explain how it solves the problem, and maybe also point our how it adds to the other answers already provided?"}], "tags": [], "owner": {"reputation": 1, "user_id": 15523610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51366043b8883bc720f0250e4aa6aae6?s=128&d=identicon&r=PG", "display_name": "adg08101", "link": "https://stackoverflow.com/users/15523610/adg08101"}, "is_accepted": false, "score": 0, "last_activity_date": 1617204908, "last_edit_date": 1617204908, "creation_date": 1617204218, "answer_id": 66890686, "question_id": 49908399, "link": "https://stackoverflow.com/questions/49908399/replace-attributes-in-data-class-objects/66890686#66890686", "title": "Replace attributes in Data Class objects", "body": "<pre><code>@dataclass()\nclass Point:\n    x: float = dataclasses.Field(repr=True, default=0.00, default_factory=float, init=True, hash=True, compare=True,\n                                 metadata={'x_axis': &quot;X Axis&quot;, 'ext_name': &quot;Point X Axis&quot;})\n    y: float = dataclasses.Field(repr=True, default=0.00, default_factory=float, init=True, hash=True, compare=True,\n                                 metadata={'y_axis': &quot;Y Axis&quot;, 'ext_name': &quot;Point Y Axis&quot;})\n\nPoint1 = Point(13.5, 455.25)\nPoint2 = dataclasses.replace(Point1, y=255.25)\n\nprint(Point1, Point2)\n</code></pre>\n"}], "owner": {"reputation": 891, "user_id": 3072050, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/650ec66cdc45f55124d49a7d3b672cd4?s=128&d=identicon&r=PG&f=1", "display_name": "BayerSe", "link": "https://stackoverflow.com/users/3072050/bayerse"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6930, "favorite_count": 1, "accepted_answer_id": 50319825, "answer_count": 4, "score": 19, "last_activity_date": 1617204908, "creation_date": 1524082870, "last_edit_date": 1526239472, "question_id": 49908399, "link": "https://stackoverflow.com/questions/49908399/replace-attributes-in-data-class-objects", "title": "Replace attributes in Data Class objects", "body": "<p>I'd like to replace the attributes of a <a href=\"https://www.python.org/dev/peps/pep-0557/\" rel=\"noreferrer\">dataclass</a> instance, analogous to <code>namedtuple._replace()</code>, i.e. making an altered copy of the original object:</p>\n\n<pre><code>from dataclasses import dataclass\nfrom collections import namedtuple\n\nU = namedtuple(\"U\", \"x\")\n\n@dataclass\nclass V:\n    x: int\n\nu = U(x=1)\nu_ = u._replace(x=-1)\nv = V(x=1)\n\nprint(u)\nprint(u_)\nprint(v)\n</code></pre>\n\n<p>This returns:</p>\n\n<pre><code>U(x=1)\nU(x=-1)\nV(x=1)\n</code></pre>\n\n<p>How can I mimic this functionality in dataclass objects?</p>\n"}, {"tags": ["python", "dictionary"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 3, "creation_date": 1524082949, "post_id": 49908393, "comment_id": 86832703, "body": "StackOverflow is not a free coding service. SO expects you to <a href=\"http://meta.stackoverflow.com/questions/261592\">try to solve your own problem first</a>. Please update your question to show what you have already tried in a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. For further information, please see <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>, and take the <a href=\"https://stackoverflow.com/tour\">tour</a> :)"}, {"owner": {"reputation": 9258, "user_id": 5665870, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TQBw0.png?s=128&g=1", "display_name": "Sphinx", "link": "https://stackoverflow.com/users/5665870/sphinx"}, "edited": false, "score": 0, "creation_date": 1524083073, "post_id": 49908393, "comment_id": 86832758, "body": "if there are two elements like  <code>{ 1 : ( x,y,z,...)</code> and <code>{ 1 : ( z,y,x,...)</code>, what is the expected output? Then what have you tried so far?"}, {"owner": {"reputation": 139, "user_id": 8355631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca852aca4601ee5b824f83c8827f4c32?s=128&d=identicon&r=PG&f=1", "display_name": "sai", "link": "https://stackoverflow.com/users/8355631/sai"}, "edited": false, "score": 0, "creation_date": 1524083126, "post_id": 49908393, "comment_id": 86832788, "body": "I&#39;m creating a data structure to populate an xml schema."}, {"owner": {"reputation": 139, "user_id": 8355631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca852aca4601ee5b824f83c8827f4c32?s=128&d=identicon&r=PG&f=1", "display_name": "sai", "link": "https://stackoverflow.com/users/8355631/sai"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1524083514, "post_id": 49908393, "comment_id": 86833016, "body": "@Barmar , Thanks for the heads up, Will go through it and ask better questions on future occasions."}, {"owner": {"reputation": 7073, "user_id": 1708751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b03d21276ae07910a1ab8f22f7bf282?s=128&d=identicon&r=PG", "display_name": "Sunny Patel", "link": "https://stackoverflow.com/users/1708751/sunny-patel"}, "edited": false, "score": 0, "creation_date": 1524084173, "post_id": 49908393, "comment_id": 86833313, "body": "Are there any alternative data formats, like additional keys within each dict, or alternate key names?"}, {"owner": {"reputation": 139, "user_id": 8355631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca852aca4601ee5b824f83c8827f4c32?s=128&d=identicon&r=PG&f=1", "display_name": "sai", "link": "https://stackoverflow.com/users/8355631/sai"}, "edited": false, "score": 0, "creation_date": 1524084394, "post_id": 49908393, "comment_id": 86833437, "body": "Within each dictionaries, there are any additional keys for example, the dictionary with the key as &#39;a&#39;  has  1, 2, 3."}], "answers": [{"comments": [{"owner": {"reputation": 139, "user_id": 8355631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca852aca4601ee5b824f83c8827f4c32?s=128&d=identicon&r=PG&f=1", "display_name": "sai", "link": "https://stackoverflow.com/users/8355631/sai"}, "edited": false, "score": 1, "creation_date": 1524084616, "post_id": 49908552, "comment_id": 86833522, "body": "Thanks!  that&#39;s a very concise answer. Although it looks like I would need to work on the structure more to be able to import the data into my xml schema."}], "tags": [], "owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "is_accepted": true, "score": 2, "last_activity_date": 1524083521, "creation_date": 1524083521, "answer_id": 49908552, "question_id": 49908393, "link": "https://stackoverflow.com/questions/49908393/merging-dictionaries-with-same-keys/49908552#49908552", "title": "Merging dictionaries with same keys", "body": "<p>Use a nested dictionary structure via <code>collections.defaultdict</code>.</p>\n\n<p>Note that in this implementation duplicate inner keys are not permitted; for example, you cannot have two dictionaries with outer key 'a' and inner key 1. In this case, the last will take precedence.</p>\n\n<pre><code>from collections import defaultdict\n\nlst = [ { 'a' : { 1 : ( 3, 4, 5 ) }}, \n        { 'a' : { 2 : ( 6, 7, 8 ) }},\n        { 'a' : { 3 : ( 1, 2, 3 ) }},\n        { 'c' : { 4 : ( 5, 9, 8 ) }}, \n        { 'b' : { 1 : ( 6, 6, 8 ) }},\n        { 'c' : { 3 : ( 2, 5, 7 ) }}]\n\nd = defaultdict(dict)\n\nfor item in lst:\n    key = next(iter(item))\n    d[key].update(item[key])\n\n# defaultdict(dict,\n#             {'a': {1: (3, 4, 5), 2: (6, 7, 8), 3: (1, 2, 3)},\n#              'b': {1: (6, 6, 8)},\n#              'c': {3: (2, 5, 7), 4: (5, 9, 8)}})\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "is_accepted": false, "score": 1, "last_activity_date": 1524083626, "creation_date": 1524083626, "answer_id": 49908583, "question_id": 49908393, "link": "https://stackoverflow.com/questions/49908393/merging-dictionaries-with-same-keys/49908583#49908583", "title": "Merging dictionaries with same keys", "body": "<p>How's this?</p>\n\n<pre><code>data = [{'a': {1: 4}, 'b': {7: 8}},\n        {'a': {2: 5}, 'b': {9: 10}},\n        {'a': {3: 6}}]\nall_keys = set().union(*data)\nresult = {}\nfor key in all_keys:\n    result[key] = {}\n    for d in data:\n        if key in d:\n            result[key].update(d[key])\n\nprint(result)  # {'b': {7: 8, 9: 10}, 'a': {1: 4, 2: 5, 3: 6}}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7073, "user_id": 1708751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b03d21276ae07910a1ab8f22f7bf282?s=128&d=identicon&r=PG", "display_name": "Sunny Patel", "link": "https://stackoverflow.com/users/1708751/sunny-patel"}, "is_accepted": false, "score": 0, "last_activity_date": 1524083634, "creation_date": 1524083634, "answer_id": 49908586, "question_id": 49908393, "link": "https://stackoverflow.com/questions/49908393/merging-dictionaries-with-same-keys/49908586#49908586", "title": "Merging dictionaries with same keys", "body": "<p>You can make use of the <a href=\"https://docs.python.org/2/library/functions.html#reduce\" rel=\"nofollow noreferrer\"><code>reduce</code></a> function and <a href=\"https://docs.python.org/2/library/stdtypes.html#dict.update\" rel=\"nofollow noreferrer\"><code>dict.update</code></a> to transform the data. Assuming that <code>'a'</code> is your only key, you can do this:</p>\n\n<pre><code>a = [\n  {'a': {1: (1, 2, 3)}},\n  {'a': {2: (4, 5, 6)}},\n  {'a': {3: (7, 8, 9)}}\n]\n\ndef update(d, c):\n  d['a'].update(c['a'])\n  return d\nprint reduce(update, a, {'a':{}}) #Prints {'a': {1: (1, 2, 3), 2: (4, 5, 6), 3: (7, 8, 9)}}\n</code></pre>\n"}], "owner": {"reputation": 139, "user_id": 8355631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca852aca4601ee5b824f83c8827f4c32?s=128&d=identicon&r=PG&f=1", "display_name": "sai", "link": "https://stackoverflow.com/users/8355631/sai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 49908552, "answer_count": 3, "score": 0, "last_activity_date": 1524083710, "creation_date": 1524082818, "last_edit_date": 1524083710, "question_id": 49908393, "link": "https://stackoverflow.com/questions/49908393/merging-dictionaries-with-same-keys", "title": "Merging dictionaries with same keys", "body": "<p>I wrote some python code to pull data from SQL server and I'm currently trying to merge the data. I tried to pull the data into a Dataframe and then work with it, but wasn't able to do that. </p>\n\n<p>The current form that I set the data up as is like this :</p>\n\n<pre><code>[ { a : { 1 : ( x,y,z,...) }}, \n{ a : { 2 : ( x,y,z,...) }},\n{ a : { 3 : ( x,y,z,...) }} ]\n</code></pre>\n\n<p>This is where I want to get to </p>\n\n<pre><code>[ { a : { 1 : ( x,y,z,...) , 2 : (x,y,...) , 3 : (x,y,z,...) } ]\n</code></pre>\n"}, {"tags": ["python", "django", "csv", "strip"], "comments": [{"owner": {"reputation": 43029, "user_id": 7505395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4t4nq.jpg?s=128&g=1", "display_name": "Patrick Artner", "link": "https://stackoverflow.com/users/7505395/patrick-artner"}, "edited": false, "score": 3, "creation_date": 1524083179, "post_id": 49908389, "comment_id": 86832820, "body": "Show sample of your data and format your code correctly."}, {"owner": {"reputation": 4914, "user_id": 7549907, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/29473460bbc1b265961d33279d837412?s=128&d=identicon&r=PG", "display_name": "tim-mccurrach", "link": "https://stackoverflow.com/users/7549907/tim-mccurrach"}, "edited": false, "score": 3, "creation_date": 1524083884, "post_id": 49908389, "comment_id": 86833183, "body": "Also, could you explain how this code doesn&#39;t fit your desired functionality, it very much depends on what you are trying to do. (or supply the error that is produced)"}, {"owner": {"reputation": 6847, "user_id": 1081569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8682dc66d5900d9645a8dff1316495e1?s=128&d=identicon&r=PG", "display_name": "Paulo Almeida", "link": "https://stackoverflow.com/users/1081569/paulo-almeida"}, "edited": false, "score": 0, "creation_date": 1524095606, "post_id": 49908389, "comment_id": 86837162, "body": "Your code looks fine for the purpose you described, but the last line is suspicious. <code>query</code> is using the original <code>line</code>; if that&#39;s where the space is causing problems, you need to have <code>query = cleanline</code>."}, {"owner": {"reputation": 204, "user_id": 9592854, "user_type": "registered", "profile_image": "https://graph.facebook.com/1644452132308418/picture?type=large", "display_name": "\u0130lkem &#199;etinkaya", "link": "https://stackoverflow.com/users/9592854/%c4%b0lkem-%c3%87etinkaya"}, "edited": false, "score": 0, "creation_date": 1524158611, "post_id": 49908389, "comment_id": 86869598, "body": "I tried to use cleanline too for the query (It needs to match with the database) but these approaches not working in the loop.Maybe I need to use rstip while reading the file. I don&#39;t know why.I will try Martin&#39;s code now."}, {"owner": {"reputation": 37454, "user_id": 4985733, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/r7daF.jpg?s=128&g=1", "display_name": "Martin Evans", "link": "https://stackoverflow.com/users/4985733/martin-evans"}, "edited": false, "score": 0, "creation_date": 1524161460, "post_id": 49908389, "comment_id": 86871097, "body": "You appear to have just a normal file, not a CSV file. There are no <code>|</code> delimiter characters on the lines?"}, {"owner": {"reputation": 204, "user_id": 9592854, "user_type": "registered", "profile_image": "https://graph.facebook.com/1644452132308418/picture?type=large", "display_name": "\u0130lkem &#199;etinkaya", "link": "https://stackoverflow.com/users/9592854/%c4%b0lkem-%c3%87etinkaya"}, "edited": false, "score": 0, "creation_date": 1524161870, "post_id": 49908389, "comment_id": 86871301, "body": "yes true I am not using delimiter yet.Maybe in the future."}], "answers": [{"comments": [{"owner": {"reputation": 204, "user_id": 9592854, "user_type": "registered", "profile_image": "https://graph.facebook.com/1644452132308418/picture?type=large", "display_name": "\u0130lkem &#199;etinkaya", "link": "https://stackoverflow.com/users/9592854/%c4%b0lkem-%c3%87etinkaya"}, "edited": false, "score": 0, "creation_date": 1524159874, "post_id": 49924711, "comment_id": 86870291, "body": "end of my data within the csv file.There is only space after the point,which I want to remove:     CSV File:  desteklemelidir. CRLR     Your code adds in front of the text [&#39; and at the end &#39;]"}, {"owner": {"reputation": 37454, "user_id": 4985733, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/r7daF.jpg?s=128&g=1", "display_name": "Martin Evans", "link": "https://stackoverflow.com/users/4985733/martin-evans"}, "reply_to_user": {"reputation": 204, "user_id": 9592854, "user_type": "registered", "profile_image": "https://graph.facebook.com/1644452132308418/picture?type=large", "display_name": "\u0130lkem &#199;etinkaya", "link": "https://stackoverflow.com/users/9592854/%c4%b0lkem-%c3%87etinkaya"}, "edited": false, "score": 0, "creation_date": 1524160614, "post_id": 49924711, "comment_id": 86870651, "body": "Please add an example of your CSV file to your question, that way I would be able to recreate what you are getting. Also which version of Python are you using 2.x or 3.x ?"}, {"owner": {"reputation": 204, "user_id": 9592854, "user_type": "registered", "profile_image": "https://graph.facebook.com/1644452132308418/picture?type=large", "display_name": "\u0130lkem &#199;etinkaya", "link": "https://stackoverflow.com/users/9592854/%c4%b0lkem-%c3%87etinkaya"}, "edited": false, "score": 0, "creation_date": 1524161084, "post_id": 49924711, "comment_id": 86870888, "body": "I am using python 3 version. I put the csv file to the question"}, {"owner": {"reputation": 204, "user_id": 9592854, "user_type": "registered", "profile_image": "https://graph.facebook.com/1644452132308418/picture?type=large", "display_name": "\u0130lkem &#199;etinkaya", "link": "https://stackoverflow.com/users/9592854/%c4%b0lkem-%c3%87etinkaya"}, "edited": false, "score": 0, "creation_date": 1524161672, "post_id": 49924711, "comment_id": 86871207, "body": "I need to manipulate the file before sending to the database for this I need to do while looping in for loop,right ? That&#39;s the only option ?"}], "tags": [], "owner": {"reputation": 37454, "user_id": 4985733, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/r7daF.jpg?s=128&g=1", "display_name": "Martin Evans", "link": "https://stackoverflow.com/users/4985733/martin-evans"}, "is_accepted": true, "score": 1, "last_activity_date": 1524161857, "last_edit_date": 1524161857, "creation_date": 1524151292, "answer_id": 49924711, "question_id": 49908389, "link": "https://stackoverflow.com/questions/49908389/python-rstrip-usage-within-loop-while-reading-csv-file/49924711#49924711", "title": "python rstrip usage within loop while reading csv file", "body": "<p>You could try the following approach:</p>\n\n<pre><code>import csv\n\npath = 'input.csv'\nlines = []\n\nwith open(path, newline='', encoding='utf-8') as f:\n    data = csv.reader(f, delimiter='|', skipinitialspace=True)\n\n    for row in data:\n        lines.append([c.strip() for c in row])\n\nprint(lines)        \n</code></pre>\n\n<p>This removes all leading and trailing spaces from each cell in a row using the <code>strip()</code> command. Depending on your data, it might be just enough to add the additional <code>skipinitialspace=True</code> parameter. This though would not remove trailing spaces before the next delimiter. <code>newline=''</code> should also be used in Python 3.x when used with a <code>csv.reader()</code>.</p>\n\n<hr>\n\n<p>The file you have given just contains lines of text, as such you could read it as follows:</p>\n\n<pre><code>lines = []\n\nwith open('input.csv', encoding='utf-8') as f_input:\n    for line in f_input:\n        lines.append(line.strip())\n\nprint(lines)\n</code></pre>\n\n<p>This would give you <code>lines</code> containing:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>['Sistem en az 23.8  in\u00e7 boyutlar\u0131nda olmal\u0131d\u0131r.', '1 adet HDMI port olmal\u0131d\u0131r.']\n</code></pre>\n"}], "owner": {"reputation": 204, "user_id": 9592854, "user_type": "registered", "profile_image": "https://graph.facebook.com/1644452132308418/picture?type=large", "display_name": "\u0130lkem &#199;etinkaya", "link": "https://stackoverflow.com/users/9592854/%c4%b0lkem-%c3%87etinkaya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 484, "favorite_count": 0, "accepted_answer_id": 49924711, "answer_count": 1, "score": 0, "last_activity_date": 1524161857, "creation_date": 1524082806, "last_edit_date": 1524161340, "question_id": 49908389, "link": "https://stackoverflow.com/questions/49908389/python-rstrip-usage-within-loop-while-reading-csv-file", "title": "python rstrip usage within loop while reading csv file", "body": "<p>I have a CSV file where I am looping and matching with my database for getting results according to these matches.</p>\n\n<p>I encountered a problem in the case where there is a space at the end of the text. So I did my research and found that I need to add the <code>rstrip</code> function to remove spaces at the end of the text.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>with open(path, encoding='utf-8') as f:\n    data = csv.reader(f, delimiter='|')\n    for row in data:\n        line = row[0]\n        cleanline = line.rstrip()\n        lines.append(cleanline)\n        query = line\n</code></pre>\n\n<p>The code is not working. I tried also strings like <code>/s</code> or <code>strip</code>, and replace functions as well but nothing is working. What can be the reason? What am I doing wrong?</p>\n\n<p>CSV File with empty space at the end: </p>\n\n<pre><code>Sistem en az 23.8  in\u00e7 boyutlar\u0131nda olmal\u0131d\u0131r. \n1 adet HDMI port olmal\u0131d\u0131r. \n</code></pre>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 0, "creation_date": 1524083956, "post_id": 49908385, "comment_id": 86833217, "body": "I do not know why you come out this question. if any size is 2 , which row from foo, you want to select?"}], "answers": [{"tags": [], "owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "is_accepted": true, "score": 2, "last_activity_date": 1524083160, "creation_date": 1524083160, "answer_id": 49908482, "question_id": 49908385, "link": "https://stackoverflow.com/questions/49908385/pandas-slice-into-dataframe-using-indicies-of-multiindex-dataframe/49908482#49908482", "title": "Pandas - Slice into DataFrame using indicies of MultiIndex DataFrame", "body": "<p>Use merge to fitler records:</p>\n\n<pre><code>foo.merge(foo_multi.to_frame(), left_on=['bar','baz'], right_index=True).drop(0, axis=1)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>   bar baz qux\n0    1   a   z\n1    2   b   x\n2    3   c   c\n</code></pre>\n"}], "owner": {"reputation": 999, "user_id": 6137760, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8deb9e6ab542c0dc522da27d7769d5e3?s=128&d=identicon&r=PG&f=1", "display_name": "Mike S", "link": "https://stackoverflow.com/users/6137760/mike-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28, "favorite_count": 0, "accepted_answer_id": 49908482, "answer_count": 1, "score": 0, "last_activity_date": 1524083160, "creation_date": 1524082785, "question_id": 49908385, "link": "https://stackoverflow.com/questions/49908385/pandas-slice-into-dataframe-using-indicies-of-multiindex-dataframe", "title": "Pandas - Slice into DataFrame using indicies of MultiIndex DataFrame", "body": "<p>I have a DataFrame, for example, <code>foo</code> below. And a MultiIndex DataFrame, whose index levels correspond to the first two columns of <code>foo</code>, for example, <code>foo_multi</code> below. I want to slice into <code>foo</code> so that I only get the results with column values that match the indices of <code>foo_multi</code>.</p>\n\n<pre><code>foo = pd.DataFrame({'bar':[1,2,3,4,5,3,8,4,4,5],\n                    'baz':['a','b','c','d','d','d','d','b','a','a'],\n                    'qux':['z','x','c','x','z','z','x','c','c','c']})\nfoo_multi = foo.groupby(['bar', 'baz']).size().nlargest(3)\n\n&gt;&gt;&gt; foo\n   bar baz qux\n0    1   a   z\n1    2   b   x\n2    3   c   c\n3    4   d   x\n4    5   d   z\n5    3   d   z\n6    8   d   x\n7    4   b   c\n8    4   a   c\n9    5   a   c\n&gt;&gt;&gt; foo_multi\nbar  baz\n  1    a    1\n  2    b    1\n  3    c    1\ndtype: int64\n</code></pre>\n\n<p>So I'm looking for a method that, using only <code>foo</code> and <code>foo_multi</code> would return</p>\n\n<pre><code>   bar baz qux\n0    1   a   z\n1    2   b   x\n2    3   c   c\n</code></pre>\n"}, {"tags": ["python", "excel", "openpyxl"], "comments": [{"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1524082821, "post_id": 49908361, "comment_id": 86832644, "body": "Please give us the traceback, not just a description of the error. Without knowing which line the error came from, it&#39;s pretty hard to know what the problem is."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1524082874, "post_id": 49908361, "comment_id": 86832670, "body": "Meanwhile, does <code>C:\\example.xlsx</code> actually exist? Do you have permissions to create new files in <code>C:`? Or, if </code>C:\\Todolist2.xlsx` already exists, do you have permissions to overwrite it, and do you know that it&#39;s not opened with an exclusive lock by someone else?"}, {"owner": {"reputation": 129, "user_id": 9646227, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f97bc11a18876c3ebf84c2803cebd42b?s=128&d=identicon&r=PG&f=1", "display_name": "superx", "link": "https://stackoverflow.com/users/9646227/superx"}, "reply_to_user": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1524084918, "post_id": 49908361, "comment_id": 86833668, "body": "Sorry here it is:Traceback (most recent call last):   File &quot;C:/Python34/updateExcel.py&quot;, line 13, in &lt;module&gt;     wb.save(&quot;C:\\\\Todolist2.xlsx&quot;)   File &quot;C:\\Python34\\lib\\site-packages\\openpyxl\\workbook\\workbook.py&zwnj;&#8203;&quot;, line 367, in save     save_workbook(self, filename)   File &quot;C:\\Python34\\lib\\site-packages\\openpyxl\\writer\\excel.py&quot;, line 282, in save_workbook     archive = ZipFile(filename, &#39;w&#39;, ZIP_DEFLATED, allowZip64=True)   File &quot;C:\\Python34\\lib\\zipfile.py&quot;, line 1090, in <b>init</b>     self.fp = io.open(file, filemode) PermissionError: [Errno 13] Permission denied: &#39;C:\\\\Todolist2.xlsx&#39;"}, {"owner": {"reputation": 129, "user_id": 9646227, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f97bc11a18876c3ebf84c2803cebd42b?s=128&d=identicon&r=PG&f=1", "display_name": "superx", "link": "https://stackoverflow.com/users/9646227/superx"}, "reply_to_user": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1524084995, "post_id": 49908361, "comment_id": 86833698, "body": "And here&#39;s the other error:  yes it does Traceback (most recent call last):   File &quot;C:/Python34/updateExcel.py&quot;, line 8, in &lt;module&gt;     modDate = os.stat(&quot;C:\\\\example.xlsx&quot;) FileNotFoundError: [WinError 2] The system cannot find the file specified: &#39;C:\\\\example.xlsx&#39;"}, {"owner": {"reputation": 129, "user_id": 9646227, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f97bc11a18876c3ebf84c2803cebd42b?s=128&d=identicon&r=PG&f=1", "display_name": "superx", "link": "https://stackoverflow.com/users/9646227/superx"}, "reply_to_user": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1524085186, "post_id": 49908361, "comment_id": 86833787, "body": "Yes C:\\example.xlsx and C:\\Todolist2.xlsx does exist.  These files are not locked by anyone else because these files are local to my machine.  When I run it the first time, it works.  It opens Todolist2.  Just doesnt work thereafter."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 1, "creation_date": 1524086357, "post_id": 49908361, "comment_id": 86834226, "body": "First, edit the tracebacks into the question, don&#39;t try to cram them into comments."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1524086470, "post_id": 49908361, "comment_id": 86834272, "body": "Second, &quot;local to my machine&quot; doesn&#39;t mean not locked. On Windows, many programs\u2014like Notepad and Excel\u2014often lock files when opening them, meaning no other program has permission to write the file until they close it."}], "answers": [{"comments": [{"owner": {"reputation": 129, "user_id": 9646227, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f97bc11a18876c3ebf84c2803cebd42b?s=128&d=identicon&r=PG&f=1", "display_name": "superx", "link": "https://stackoverflow.com/users/9646227/superx"}, "edited": false, "score": 0, "creation_date": 1524103827, "post_id": 49909283, "comment_id": 86839113, "body": "Abarnert: do you mean to use keyboard/mouse simulation or hotkey simulation to close a worksheet that is already open?  or do you mean using subprocess to open an instance of the worksheet, that way I can continue to write to it while open and just keep closing and opening it?  I don&#39;t really See documentation on COM.   Autogui I understand but not COM.  Your help is appreciated."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "reply_to_user": {"reputation": 129, "user_id": 9646227, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f97bc11a18876c3ebf84c2803cebd42b?s=128&d=identicon&r=PG&f=1", "display_name": "superx", "link": "https://stackoverflow.com/users/9646227/superx"}, "edited": false, "score": 0, "creation_date": 1524110338, "post_id": 49909283, "comment_id": 86840615, "body": "@superx The fifth option is using <code>subprocess</code>. The third option is using something like <code>autogui</code> or COM automation. The other options are different options. And honestly, I think the first is probably simplest. As for COM automation\u2014it&#39;s not actually called that anymore, but I don&#39;t know what it <i>is</i> called. It also works through .NET interop instead of directly in most modern Windows software. But <code>pywin32.win32com</code> still works, if you read the old tutorials. (Or using Python.NET, or maybe IronPython, to talk .NET directly might be easier\u2014much closer to the current VB.NET documentation\u2026)"}, {"owner": {"reputation": 129, "user_id": 9646227, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f97bc11a18876c3ebf84c2803cebd42b?s=128&d=identicon&r=PG&f=1", "display_name": "superx", "link": "https://stackoverflow.com/users/9646227/superx"}, "edited": false, "score": 0, "creation_date": 1524145200, "post_id": 49909283, "comment_id": 86860767, "body": "Thanks for throwing me the suggestions.  I will try to look up subprocess.  TBH, i just finished reading &#39;automate the boring stuff with python&#39;, and this is literally my first project.  I find most of the excel modules deal with reading/writing, parsing, but not much for opening up a read only copy of a excel file, and auto refreshing the entire sheet if someone made changes to it.  This is really my whole goal.  But thanks for throwing your suggestions my way, i will try to persevere."}], "tags": [], "owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "is_accepted": false, "score": 0, "last_activity_date": 1524086883, "creation_date": 1524086883, "answer_id": 49909283, "question_id": 49908361, "link": "https://stackoverflow.com/questions/49908361/python-cant-find-file-specified-permission-denied-on-file-operation/49909283#49909283", "title": "Python - can&#39;t find file specified &amp; permission denied on file operation", "body": "<p>You seem to have two different problems here but they may be related.</p>\n\n<p>Since you gave a traceback for the Permission Denied error on <code>C:\\Todolist2.xlsx</code>, let's look at that one.</p>\n\n<p>On Windows, many programs, when they open a file, put a lock on it. This is especially true for \"applications\" programs, like Excel and Notepad. If one program has a file locked, any another program that tries to open that file to overwrite it will get a permissions error.</p>\n\n<p>And that's exactly what you're seeing: The first time through, your code overwrites <code>Todolist2.xslx</code>, then uses <code>startfile</code> to tell Excel (or some application that's registered for Excel files) to open it, which works. Then it tries to overwrite the same file, which Excel presumably still has locked and open, which fails.</p>\n\n<p>Depending on what you're actually trying to do here, there are a few possible workarounds:</p>\n\n<ul>\n<li>Copy <code>Todolist2.xlsx</code> to a temporary file, then start that temporary.</li>\n<li>Create new files <code>Todolist2.xlsx</code>, <code>Todolist2-1.xlsx</code>, etc., and keep opening them.</li>\n<li>Use either COM automation or a GUI scripting framework like <code>autogui</code> to make Excel open a copy of the file rather than opening the file itself.</li>\n<li>Use either of the above to make Excel close the file before overwriting the file and launching it.</li>\n<li>Launch a new Excel instance to open the file using <code>subprocess.Popen</code>, so you can kill it and launch a new one.</li>\n<li>Rewrite your whole code to build the spreadsheet using Excel COM automation, rather than by building a file to pass to it.</li>\n</ul>\n"}], "owner": {"reputation": 129, "user_id": 9646227, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f97bc11a18876c3ebf84c2803cebd42b?s=128&d=identicon&r=PG&f=1", "display_name": "superx", "link": "https://stackoverflow.com/users/9646227/superx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 618, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1524086883, "creation_date": 1524082701, "question_id": 49908361, "link": "https://stackoverflow.com/questions/49908361/python-cant-find-file-specified-permission-denied-on-file-operation", "title": "Python - can&#39;t find file specified &amp; permission denied on file operation", "body": "<p>Hi I am checking to see if a excel file is modified, and if it is basically save it as something else and open it.  So it works the first time around, but on the second time I modify the file, I am getting error: The system cannot find the file specified: 'C:\\example.xlsx'  </p>\n\n<p>Sometimes it would also throw: Permission denied: 'C:\\Todolist2.xlsx'</p>\n\n<p>Please help.  Newbie here.  Thank You</p>\n\n<pre><code>import time, os.path, os, openpyxl\nfrom openpyxl import Workbook\n\ncurrentFD = os.stat(\"C:\\\\example.xlsx\")\n\nwhile True:\n\n    modDate = os.stat(\"C:\\\\example.xlsx\")\n\n    if (modDate &gt; currentFD):\n        print('yes it does')\n        wb=openpyxl.load_workbook(\"C:\\\\example.xlsx\")\n        wb.save(\"C:\\\\Todolist2.xlsx\")\n        os.startfile(\"C:\\\\Todolist2.xlsx\")\n\n        currentFD = modDate\n</code></pre>\n"}, {"tags": ["python", "for-loop", "math", "sqrt"], "comments": [{"owner": {"reputation": 64597, "user_id": 1453822, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2c8db97d2ecdfe5e044cee4c470abb60?s=128&d=identicon&r=PG", "display_name": "DeepSpace", "link": "https://stackoverflow.com/users/1453822/deepspace"}, "edited": false, "score": 8, "creation_date": 1524082818, "post_id": 49908354, "comment_id": 86832641, "body": "Don&#39;t take the square root of negative numbers"}, {"owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "edited": false, "score": 1, "creation_date": 1524082846, "post_id": 49908354, "comment_id": 86832650, "body": "<code>math.sqrt</code> doesn&#39;t accept negative numbers, which is probably the problem. What do you want <code>ant</code> to do when the input is negative? Return a complex number? Return 0?"}, {"owner": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "edited": false, "score": 2, "creation_date": 1524082873, "post_id": 49908354, "comment_id": 86832668, "body": "If complex values are ok with you and your specific problem use module <code>cmath</code> instead of <code>math</code>"}, {"owner": {"reputation": 41, "user_id": 8926947, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/6e0ff8062519e43296e91578929a69d3?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/8926947/bob"}, "reply_to_user": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "edited": false, "score": 0, "creation_date": 1524082916, "post_id": 49908354, "comment_id": 86832683, "body": "@AlexHall  we have random number, some of them lead to negative value under sqrt, How should I tell python to pass them."}, {"owner": {"reputation": 1622, "user_id": 2539738, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/2f62a1e98960916a7314360211062a81?s=128&d=identicon&r=PG", "display_name": "Mohammad Athar", "link": "https://stackoverflow.com/users/2539738/mohammad-athar"}, "edited": false, "score": 4, "creation_date": 1524082963, "post_id": 49908354, "comment_id": 86832706, "body": "<code>if value&lt;0: continue</code>"}, {"owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "edited": false, "score": 0, "creation_date": 1524083165, "post_id": 49908354, "comment_id": 86832808, "body": "What do you mean by &#39;pass them&#39;? For example you could do nothing when <code>f_list.append(dl(i,Om,w,M))</code> fails (because <code>dl</code> fails because <code>ant</code> fails) and thus end up with <code>f_list</code> having fewer elements. Would that work?"}, {"owner": {"reputation": 41, "user_id": 8926947, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/6e0ff8062519e43296e91578929a69d3?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/8926947/bob"}, "reply_to_user": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "edited": false, "score": 0, "creation_date": 1524083242, "post_id": 49908354, "comment_id": 86832852, "body": "@AlexHall assume, random number <code>1</code>, <code>2</code>, <code>3</code> lead a negative value, I want to jump of them and calculate with another or next value"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "edited": false, "score": 2, "creation_date": 1524083639, "post_id": 49908354, "comment_id": 86833060, "body": "@PaulPanzer or use <code>**0.5</code>"}, {"owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "edited": false, "score": 0, "creation_date": 1524083767, "post_id": 49908354, "comment_id": 86833126, "body": "So is it fine if <code>f_list</code> has fewer than 31 elements? Or do you want to keep increasing <code>i</code> until the size is right?"}, {"owner": {"reputation": 41, "user_id": 8926947, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/6e0ff8062519e43296e91578929a69d3?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/8926947/bob"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1524083807, "post_id": 49908354, "comment_id": 86833148, "body": "@Jean-Fran&#231;oisFabre  I think in this case this one can be accepted, Thank you, but for guarantee I need some thing more general. But thank you. What are the differences between <code>sqrt</code> and <code>**0.5</code>"}, {"owner": {"reputation": 41, "user_id": 8926947, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/6e0ff8062519e43296e91578929a69d3?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/8926947/bob"}, "reply_to_user": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "edited": false, "score": 0, "creation_date": 1524083862, "post_id": 49908354, "comment_id": 86833171, "body": "@AlexHall no it contains a veeeery big matrix <code>31*31</code>, <code>760*760</code> and so on"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1524084068, "post_id": 49908354, "comment_id": 86833270, "body": "@Bob ask google, which redirects to StackOverflow :) <a href=\"https://stackoverflow.com/questions/33684948/difference-between-1-2-math-sqrt-and-cmath-sqrt\" title=\"difference between 1 2 math sqrt and cmath sqrt\">stackoverflow.com/questions/33684948/&hellip;</a>"}, {"owner": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1524084101, "post_id": 49908354, "comment_id": 86833282, "body": "@Jean-Fran&#231;oisFabre thanks, didn&#39;t know that."}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 8926947, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/6e0ff8062519e43296e91578929a69d3?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/8926947/bob"}, "edited": false, "score": 0, "creation_date": 1524083296, "post_id": 49908455, "comment_id": 86832885, "body": "should I write this block you wrote under <code>def name():</code>?"}, {"owner": {"reputation": 1262, "user_id": 4343502, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f5e19333dfe0dc29e10d2b5e6afbd627?s=128&d=identicon&r=PG&f=1", "display_name": "touch my body", "link": "https://stackoverflow.com/users/4343502/touch-my-body"}, "reply_to_user": {"reputation": 41, "user_id": 8926947, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/6e0ff8062519e43296e91578929a69d3?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/8926947/bob"}, "edited": false, "score": 0, "creation_date": 1524083370, "post_id": 49908455, "comment_id": 86832925, "body": "Hard to say... I don&#39;t see where this function is even being used.  If you posted where <code>ant</code> is being called I could advise"}, {"owner": {"reputation": 41, "user_id": 8926947, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/6e0ff8062519e43296e91578929a69d3?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/8926947/bob"}, "edited": false, "score": 0, "creation_date": 1524083455, "post_id": 49908455, "comment_id": 86832980, "body": "<code>ant</code> is used in the second function <code>dl(n,Om,w,M): </code> in the line of <code>q=quad(ant,0,xx[n],args=(Om,w))[0]</code>"}, {"owner": {"reputation": 1262, "user_id": 4343502, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f5e19333dfe0dc29e10d2b5e6afbd627?s=128&d=identicon&r=PG&f=1", "display_name": "touch my body", "link": "https://stackoverflow.com/users/4343502/touch-my-body"}, "reply_to_user": {"reputation": 41, "user_id": 8926947, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/6e0ff8062519e43296e91578929a69d3?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/8926947/bob"}, "edited": false, "score": 0, "creation_date": 1524083763, "post_id": 49908455, "comment_id": 86833125, "body": "This code is difficult to read for formatting reasons.  What I can see is you&#39;re using <code>np.random.normal()</code> to generate gaussian noise.  This is the source of your negative numbers, and this is why you&#39;re getting negative square roots."}, {"owner": {"reputation": 41, "user_id": 8926947, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/6e0ff8062519e43296e91578929a69d3?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/8926947/bob"}, "edited": false, "score": 0, "creation_date": 1524083975, "post_id": 49908455, "comment_id": 86833236, "body": "yes my friend, exactly, because of this, I need something to jump of numbers which lead to negative value. If your recommended code is correct how should I use it under a <code>def</code> block?"}, {"owner": {"reputation": 1262, "user_id": 4343502, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f5e19333dfe0dc29e10d2b5e6afbd627?s=128&d=identicon&r=PG&f=1", "display_name": "touch my body", "link": "https://stackoverflow.com/users/4343502/touch-my-body"}, "reply_to_user": {"reputation": 41, "user_id": 8926947, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/6e0ff8062519e43296e91578929a69d3?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/8926947/bob"}, "edited": false, "score": 0, "creation_date": 1524084268, "post_id": 49908455, "comment_id": 86833373, "body": "Hard to say.  One way is to just take the absolute value of everything, but I don&#39;t know if that&#39;s appropriate in your case.  Not sure what your code is supposed to do.  If that&#39;s fine, just add <code>z = abs(z)</code> (and the others) under the <code>def ant</code> you have now.  Again, not sure if that&#39;s appropriate since I don&#39;t know what your code is supposed to do"}, {"owner": {"reputation": 41, "user_id": 8926947, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/6e0ff8062519e43296e91578929a69d3?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/8926947/bob"}, "edited": false, "score": 0, "creation_date": 1524084762, "post_id": 49908455, "comment_id": 86833591, "body": "Ok thank you, but my code in the third function is calculating the multiplication of 3 matrixes, the items of these 3 matrixes are calculating in second function, and second function which is a integration calls another function which is the first function. I need a code line which I don&#39;t know how, to tell Python, ok, you are checking <code>if</code> and` loop` but please check and jump of those numbers which leads the sqrt in the first def a negative value. in the comments a user told me to use <code>**0.5</code>"}], "tags": [], "owner": {"reputation": 1262, "user_id": 4343502, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f5e19333dfe0dc29e10d2b5e6afbd627?s=128&d=identicon&r=PG&f=1", "display_name": "touch my body", "link": "https://stackoverflow.com/users/4343502/touch-my-body"}, "is_accepted": false, "score": 0, "last_activity_date": 1524083391, "last_edit_date": 1524083391, "creation_date": 1524083035, "answer_id": 49908455, "question_id": 49908354, "link": "https://stackoverflow.com/questions/49908354/how-to-avoid-math-domain-error-when-we-have-sqrt/49908455#49908455", "title": "How to avoid math domain error when we have sqrt", "body": "<p>Your code is trying to find the square root of a negative number.</p>\n\n<p>This is not allowed with real-valued numbers (for obvious mathematical reasons), so your best bet is to use a try/except block:</p>\n\n<pre><code>def ant(z,Om,w):\n    try:\n        return 1/sqrt(Om*(1+z)**3+omg0*(1+z)**6+(1-Om-omg0))\n    except ValueError:\n        return None\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 41, "user_id": 8926947, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/6e0ff8062519e43296e91578929a69d3?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/8926947/bob"}, "edited": false, "score": 0, "creation_date": 1524085275, "post_id": 49908832, "comment_id": 86833826, "body": "3 questions: <code>1</code> you mean using <code>**0.5</code> lead to wrong answer? <code>2</code> the first box jump of the error? <code>3</code> the second box, I am not sure that does what I want. my code are saying: calculate <code>L</code> if it is bigger than a random number accept new values but if it is smaller than that random number choose the value of previous step."}, {"owner": {"reputation": 41, "user_id": 8926947, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/6e0ff8062519e43296e91578929a69d3?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/8926947/bob"}, "edited": false, "score": 0, "creation_date": 1524085453, "post_id": 49908832, "comment_id": 86833895, "body": "the first box works well, but speed of calculating goes down."}, {"owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "reply_to_user": {"reputation": 41, "user_id": 8926947, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/6e0ff8062519e43296e91578929a69d3?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/8926947/bob"}, "edited": false, "score": 0, "creation_date": 1524085870, "post_id": 49908832, "comment_id": 86834035, "body": "@Bob <code>1</code> we don&#39;t know what the right or wrong answer is. It&#39;s not clear what you want to do, we&#39;re all guessing. I don&#39;t know if putting complex numbers in your code will do the wrong thing. <code>2</code> the first box doesn&#39;t change much, it just means that in the second box I can write <code>except SqrtError</code> instead of the more general <code>except ValueError</code> which might catch things I don&#39;t want it to (like errors from <code>log10</code>). <code>3</code> I&#39;ve edited the second box to clarify and only generate <code>R3</code> once."}, {"owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "reply_to_user": {"reputation": 41, "user_id": 8926947, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/6e0ff8062519e43296e91578929a69d3?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/8926947/bob"}, "edited": false, "score": 0, "creation_date": 1524085957, "post_id": 49908832, "comment_id": 86834061, "body": "If you don&#39;t understand the meaning of <code>try&#47;except&#47;raise&#47;else&#47;while True&#47;continue&#47;break</code> please go read carefully about them."}, {"owner": {"reputation": 41, "user_id": 8926947, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/6e0ff8062519e43296e91578929a69d3?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/8926947/bob"}, "edited": false, "score": 0, "creation_date": 1524085985, "post_id": 49908832, "comment_id": 86834076, "body": "the first box after printing some output gets this error:<code>File &quot;C:\\.......py&quot;, line 68, in ant     raise SqrtError SqrtError</code>"}, {"owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "reply_to_user": {"reputation": 41, "user_id": 8926947, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/6e0ff8062519e43296e91578929a69d3?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/8926947/bob"}, "edited": false, "score": 0, "creation_date": 1524086085, "post_id": 49908832, "comment_id": 86834120, "body": "The first box is useless without the second box. It doesn&#39;t sound like you understand at all the constructs that I&#39;m using. Please go read about them, that is essential to solving your problem and an important part of learning to code."}, {"owner": {"reputation": 41, "user_id": 8926947, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/6e0ff8062519e43296e91578929a69d3?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/8926947/bob"}, "edited": false, "score": 0, "creation_date": 1524086199, "post_id": 49908832, "comment_id": 86834155, "body": "No man, I got it entirely. But after too many errors my mind is blowing up. I will read your answer in couple of mins later. sorry for this questions."}, {"owner": {"reputation": 41, "user_id": 8926947, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/6e0ff8062519e43296e91578929a69d3?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/8926947/bob"}, "edited": false, "score": 0, "creation_date": 1524086646, "post_id": 49908832, "comment_id": 86834345, "body": "It sounds correct, the only problem which I run into it, is, my loop is <code>N=100</code> but the out put are 37. maybe 63 numbers lead the sqrt to negative value!"}], "tags": [], "owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "is_accepted": true, "score": 2, "last_activity_date": 1524085608, "last_edit_date": 1524085608, "creation_date": 1524084749, "answer_id": 49908832, "question_id": 49908354, "link": "https://stackoverflow.com/questions/49908354/how-to-avoid-math-domain-error-when-we-have-sqrt/49908832#49908832", "title": "How to avoid math domain error when we have sqrt", "body": "<p>Here are some options:</p>\n\n<ol>\n<li><p>Replace <code>sqrt(...)</code> with <code>(...)**0.5</code>. This will produce complex numbers, which may or may not be acceptable. For example <code>(-1)**0.5</code> produces <code>i</code> which in Python will appear as <code>1j</code> (ignoring floating point errors).</p></li>\n<li><p>Catch errors and move on. Since you probably want to catch the errors higher up, I recommend translating the <code>ValueError</code> from <code>sqrt</code> into a custom error:</p></li>\n</ol>\n\n\n\n<pre><code>class SqrtError(ValueError):\n    pass\n\ndef ant(z, Om, w):\n    val = Om * (1 + z) ** 3 + w * (1 + z) ** 6 + (1 - Om - w)\n    try:\n        sq = sqrt(val)\n    except ValueError:\n        raise SqrtError\n    return 1 / sq\n</code></pre>\n\n<p>Then it sounds like you want to keep trying new random numbers until you get one that works, which could be done like so:</p>\n\n<pre><code>for i in range(1, N):\n    R3 = np.random.uniform(0, 1)\n    while True:\n\n        Omn[i] = Omo[i - 1] + 0.05 * np.random.normal()\n        wn[i] = wo[i - 1] + 0.05 * np.random.normal()\n        Mn[i] = Mo[i - 1] + 0.1 * np.random.normal()\n\n        try:\n            L = exp(-0.5 * (c(Omn[i], wn[i], Mn[i]) - c(Omo[i - 1], wo[i - 1], Mo[i - 1])))\n        except SqrtError:\n            continue\n        else:\n            break\n\n    if L &gt; R3:\n        wo[i] = wn[i]\n\n    else:\n        wo[i] = wo[i - 1]\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 8926947, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/6e0ff8062519e43296e91578929a69d3?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/8926947/bob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2127, "favorite_count": 0, "accepted_answer_id": 49908832, "answer_count": 2, "score": -1, "last_activity_date": 1524085608, "creation_date": 1524082676, "last_edit_date": 1524083023, "question_id": 49908354, "link": "https://stackoverflow.com/questions/49908354/how-to-avoid-math-domain-error-when-we-have-sqrt", "title": "How to avoid math domain error when we have sqrt", "body": "<p>I wrote the following code, after printing about 10 outputs it gets error </p>\n\n<pre><code>return 1/sqrt(Om*(1+z)**3+omg0*(1+z)**6+(1-Om-omg0))\nValueError: math domain error\n</code></pre>\n\n<p><strong>the three first functions are correct and work well in other programs</strong> please do not be sensitive about their structures, I think the problem is in <code>for-loop</code> and choosing some values which cannot satisfy the condition of <code>sqrt</code>. Could I add some lines to tell Python avoid numbers which lead to <code>math domain error</code>? If yes, How should I do that? I mean passing the step which leads to negative value under <code>sqrt</code>?</p>\n\n<p><code>Cov</code> is a <code>31*31</code> mtrix, <code>xx[n]</code> is a list of 31 numbers.</p>\n\n<pre><code>def ant(z,Om,w):\n    return 1/sqrt(Om*(1+z)**3+w*(1+z)**6+(1-Om-w))\n\ndef dl(n,Om,w,M):  \n    q=quad(ant,0,xx[n],args=(Om,w))[0]\n    h=5*log10((1+xx[n])*q)\n    fn=(yy[n]-M-h)                  \n    return fn\n\ndef c(Om,w,M):\n    f_list = []\n    for i in range(31):  # the value '2' reflects matrix size\n        f_list.append(dl(i,Om,w,M))\n    A=[f_list]\n    B=[[f] for f in f_list]\n    C=np.dot(A,Cov)\n    D=np.dot(C,B)\n    F=np.linalg.det(D)*0.000001\n    return F\n\nN=100\nfor i in range (1,N):\n    R3=np.random.uniform(0,1)\n\n    Omn[i]=Omo[i-1]+0.05*np.random.normal()\n    wn[i]=wo[i-1]+0.05*np.random.normal()\n    Mn[i]=Mo[i-1]+0.1*np.random.normal()\n\n    L=exp(-0.5*(c(Omn[i],wn[i],Mn[i])-c(Omo[i-1],wo[i-1],Mo[i-1])))\n\n    if L&gt;R3:\n        wo[i]=wn[i]\n\n    else:\n        wo[i]=wo[i-1]\n\n    print(wo[i])\n</code></pre>\n\n<p>The output is:</p>\n\n<pre><code>0.12059556415714912\n0.16292726528216397\n0.16644447885609648\n0.1067588804671105\n0.0321446951572128\n0.0321446951572128\n0.013169965429457382\nTraceback (most recent call last):\n......\nreturn 1/sqrt(Om*(1+z)**3+omg0*(1+z)**6+(1-Om-omg0))\nValueError: math domain error\n</code></pre>\n"}, {"tags": ["python", "import", "architecture", "python-import", "software-design"], "owner": {"reputation": 2153, "user_id": 6330511, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/SEM44.jpg?s=128&g=1", "display_name": "gmolau", "link": "https://stackoverflow.com/users/6330511/gmolau"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1524495032, "creation_date": 1524082656, "last_edit_date": 1524495032, "question_id": 49908347, "link": "https://stackoverflow.com/questions/49908347/how-to-get-absolute-imports-to-work-in-python", "title": "How to get absolute imports to work in Python?", "body": "<p>I know there are dozens of similar questions about Python imports, so I'll try to phrase it a bit differently. I'll spare you the details of the days of desperation that lie behind me, and instead approach the issue from a more general point of view: What does it take to make imports of the form <code>from package.module.submodule import SomeClass</code> work in Python 3.6 in 2018?</p>\n\n<p>When I look into random modules of large Python projects like <a href=\"https://github.com/django/django/blob/master/django/core/signing.py\" rel=\"nofollow noreferrer\">Django</a>, <a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/estimator/estimator.py\" rel=\"nofollow noreferrer\">Tensorflow</a> or <a href=\"https://github.com/twisted/twisted/blob/trunk/src/twisted/internet/task.py\" rel=\"nofollow noreferrer\">Twisted</a> this seems to be the import pattern they all use, probably because it has the two benefits of a) making clear where an object comes from and b) keeping the actual invocation of that object short and clean.</p>\n\n<p>I thought it can't be wrong to learn from these projects and tried to emulate this pattern in my own package \u2013 and as others before me I have run into the hell of circular imports.</p>\n\n<p>Thankfully there are already a lot of posts on this topic, and their recommendations seem to fall into two broad categories:</p>\n\n<p>1) Change the imports</p>\n\n<p>A lot of suggestions go in the direction of using some other form of import syntax. Quite common seems to be the approach to avoid <code>from X.Y import Z</code> statements and instead rely only on <code>import X.Y</code> and then use <code>Y.Z()</code> in the code. Long story short, I have tried this and rewritten my entire package in that manner, and it didn't change anything. It also looks very unpythonic and ugly to me.</p>\n\n<p>2) Fix the circular dependencies</p>\n\n<p>That is the second family of recommendations, and I agree entirely that it would be preferable to dodge this issue entirely by employing good design from the start. The problem is that I don't really have a coherent idea how to do this.</p>\n\n<p>My project is certainly not the pinnacle of excellent software design, but it's also not spaghetti code. It's ten modules in a single package (no submodules) of around 1000 lines of code in total. Each module has a single responsibility: One has the main function, one is a flask instance, another one an API client, another one has all the data models and so on. To me its seems pretty much unavoidable that the imports between these modules (not the classes themselves) sometimes end up being circular. I have of course tried to break these circles (they are usually four or five modules long), but that always leads to other circles, if not immediately, then five commits later.</p>\n\n<p>Now, I'm just a second year CS student and I'm entirely willing to accept that this might just be a point where I still have to learn much, much more. But to start with that it would be really helpful if someone could explain how this problem is dealt with in some of these larger projects mentioned above. Shouldn't they run into circular imports all the time? How do they prevent contributors from introducing a circle somewhere accidentally? Do they constantly refactor there codebase when they find out that an import isn't possible because it would lead to a circle? What's the general approach here?</p>\n"}, {"tags": ["python", "regex", "python-3.x", "web-scraping"], "comments": [{"owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "edited": false, "score": 1, "creation_date": 1524082704, "post_id": 49908284, "comment_id": 86832584, "body": "What do you mean by scraping them locally? Have you tried printing <code>res</code> and seeing if it contains the phone numbers?"}, {"owner": {"reputation": 481672, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1524083375, "post_id": 49908284, "comment_id": 86832929, "body": "Try <code>r&quot;\\+?\\d{1,3}\\s?\\d{4}\\s?\\d{4}&quot;</code>"}, {"owner": {"reputation": 19801, "user_id": 9189799, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/U2hEg.jpg?s=128&g=1", "display_name": "SIM", "link": "https://stackoverflow.com/users/9189799/sim"}, "reply_to_user": {"reputation": 481672, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1524084636, "post_id": 49908284, "comment_id": 86833530, "body": "I tried with your suggested expression @Wiktor Stribi\u017cew and got this <code>3333333333,14465014376</code>. Thanks."}], "answers": [{"comments": [{"owner": {"reputation": 19801, "user_id": 9189799, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/U2hEg.jpg?s=128&g=1", "display_name": "SIM", "link": "https://stackoverflow.com/users/9189799/sim"}, "edited": false, "score": 0, "creation_date": 1524084957, "post_id": 49908853, "comment_id": 86833685, "body": "Thanks for the solution sir. I know it won&#39;t work in other cases. However, I intended to see how regex can be applied in parsing phone numbers from the web."}], "tags": [], "owner": {"reputation": 46903, "user_id": 4549554, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/Vxi1i.jpg?s=128&g=1", "display_name": "Andersson", "link": "https://stackoverflow.com/users/4549554/andersson"}, "is_accepted": true, "score": 1, "last_activity_date": 1524084810, "creation_date": 1524084810, "answer_id": 49908853, "question_id": 49908284, "link": "https://stackoverflow.com/questions/49908284/regex-used-within-python-giving-unknown-results/49908853#49908853", "title": "Regex used within python giving unknown results", "body": "<p>In your case below regex should return required output</p>\n\n<pre><code>r\"\\+\\d{2}\\s\\d{4}\\s?\\d{4}\"\n</code></pre>\n\n<p>Note that it can be applied to mentioned schemas:</p>\n\n<ul>\n<li>+65 6881 9083</li>\n<li>+65 93895060</li>\n</ul>\n\n<p>and might not work in other cases</p>\n"}, {"tags": [], "owner": {"reputation": 336, "user_id": 3006162, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/c8fc63411f15909f8e0b2d9747e04c6e?s=128&d=identicon&r=PG&f=1", "display_name": "izxle", "link": "https://stackoverflow.com/users/3006162/izxle"}, "is_accepted": false, "score": 0, "last_activity_date": 1524088264, "creation_date": 1524088264, "answer_id": 49909552, "question_id": 49908284, "link": "https://stackoverflow.com/questions/49908284/regex-used-within-python-giving-unknown-results/49909552#49909552", "title": "Regex used within python giving unknown results", "body": "<p>You are using <code>\\d+\\s?\\d+</code> which will match <code>9 9</code>, <code>99</code> and <code>1999</code> because the <code>+</code> quantifier allows the first <code>\\d+</code> to grab as many digits as it can while leaving at least one digit to the others. One solution is to state a specific number of repetitions you want (like in Andersson's answer).</p>\n\n<p>I suggest you try regex101.com, it will highlight to help you visualize what the regex is matching and capturing. There you can paste an example of the text you want to search and tweak your regex.</p>\n"}], "owner": {"reputation": 19801, "user_id": 9189799, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/U2hEg.jpg?s=128&g=1", "display_name": "SIM", "link": "https://stackoverflow.com/users/9189799/sim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 49908853, "answer_count": 2, "score": 1, "last_activity_date": 1524088264, "creation_date": 1524082387, "last_edit_date": 1524084230, "question_id": 49908284, "link": "https://stackoverflow.com/questions/49908284/regex-used-within-python-giving-unknown-results", "title": "Regex used within python giving unknown results", "body": "<p>I've written a script in python using <code>regular expression</code> to find phone numbers from two different sites. when I tried with below pattern to scrape the two phone numbers locally then it works flawlessly. However, when i try the same in the websites, It no longer works. It only fetches two unidentified numbers <code>1999</code> and <code>8211</code>.</p>\n\n<p>This is what I've tried so far:</p>\n\n<pre><code>import requests, re\n\nlinks=[\n    'http://www.latamcham.org/contact-us/',\n    'http://www.cityscape.com.sg/?page_id=37'\n    ]\n\ndef FetchPhone(site):\n    res = requests.get(site).text\n    phone = re.findall(r\"\\+?[\\d]+\\s?[\\d]+\\s?[\\d]+\",res)[0]  #I'm not sure if it is an ideal pattern. Works locally though\n    print(phone)\n\nif __name__ == '__main__':\n    for link in links:\n        FetchPhone(link)\n</code></pre>\n\n<p>The output I wish to have:</p>\n\n<pre><code>+65 6881 9083\n+65 93895060\n</code></pre>\n\n<p>This is what I meant by locally:</p>\n\n<pre><code>import re\n\nphonelist = \"+65 6881 9083,+65 93895060\"\n\nphone = [item for item in re.findall(r\"\\+?[\\d]+\\s?[\\d]+\\s?[\\d]+\",phonelist)]\nprint(phone)  #it can print them\n</code></pre>\n\n<p>Post script: the phone numbers are not generated dynamically. When I print text then I can see the <code>numbers</code> in the console.</p>\n"}, {"tags": ["python", "websphere", "jython", "websphere-9"], "answers": [{"tags": [], "owner": {"reputation": 692, "user_id": 1293660, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/22c069d7e35bcdeae3046090e5c307e8?s=128&d=identicon&r=PG", "display_name": "kgibm", "link": "https://stackoverflow.com/users/1293660/kgibm"}, "is_accepted": true, "score": 1, "last_activity_date": 1524082916, "creation_date": 1524082916, "answer_id": 49908413, "question_id": 49908270, "link": "https://stackoverflow.com/questions/49908270/websphere-9x-unable-to-deploy-ear-file-via-jython-script/49908413#49908413", "title": "Websphere 9X unable to deploy ear file via jython script", "body": "<p>You're concatenating the ear file name with the options, whereas those are two parameters separated by a comma. Try:</p>\n\n<pre><code>AdminApp.install(EAR_FILE, \"'\" + \"[\" + ParameterStr + \"]\" + \"'\")\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 1802263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a07fd573b6c473148f497d46d5143dd4?s=128&d=identicon&r=PG", "display_name": "user1802263", "link": "https://stackoverflow.com/users/1802263/user1802263"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 583, "favorite_count": 0, "accepted_answer_id": 49908413, "answer_count": 1, "score": 2, "last_activity_date": 1524245047, "creation_date": 1524082297, "last_edit_date": 1524245047, "question_id": 49908270, "link": "https://stackoverflow.com/questions/49908270/websphere-9x-unable-to-deploy-ear-file-via-jython-script", "title": "Websphere 9X unable to deploy ear file via jython script", "body": "<p>I'm writing due to an error I just cannot seem to work around. </p>\n\n<pre><code>WASX7017E: Exception received while running file \"/root/wsDeploy.py\"; exception information: com.ibm.ws.scripting.ScriptingException: WASX7115E: Cannot read input file \"/opt/IBM/WebSphere/AppServer/profiles/AppSrv01/installableApps/my_ear_file.ear,'[-node DefaultNode01 -cell DefaultCell01 -server server1 -MapWebModToVH [[ \"Our War One\" first_war.war,WEB-INF/web.xml default_host ][\"Our War Two\" second_war.war,WEB-INF/web.xml default_host][\"Our War Three\" third_war.war,WEB-INF/web.xml default_host]]]'\"\n</code></pre>\n\n<p>Now that script has the following variables and syntax:</p>\n\n<pre><code>ParameterStr = \"-node DefaultNode01 -cell DefaultCell01 -server server1 -MapWebModToVH [[ \\\"Our War One\\\" first_war.war,WEB-INF/web.xml default_host ][\\\"Our War Two\\\" second_war.war,WEB-INF/web.xml default_host][\\\"Our War Three\\\" third_war.war,WEB-INF/web.xml default_host]]\"\n\nEAR_FILE=/path/to/file/my_ear_file.ear\n</code></pre>\n\n<p>This is the portion of code which is choking when executed by websphere in jython(2.7) (Also fails in 2.1)</p>\n\n<pre><code>elif UpdateExistingorNewApp == \"INITIAL\" and ConditionForUpdate == 0:\n      AdminApp.install(EAR_FILE + \",\" + \"'\" + \"[\" + ParameterStr + \"]\" + \"'\")\n      AdminConfig.save()\n</code></pre>\n\n<p>I have tried</p>\n\n<pre><code>AdminApp.install( 'EAR_FILE' + \",\" + \"'\" + \"[\" + ParameterStr + \"]\" + \"'\")\nAdminApp.install( \"'\" + EAR_FILE + \"'\" +\",\" + \"'\" + \"[\" + ParameterStr + \"]\" + \"'\")\nAdminApp.install( \\' EAR_FILE \\' + \",\" + \"'\" + \"[\" + ParameterStr + \"]\" + \"'\")\n</code></pre>\n\n<p>I have even tried adding the \"[ ]\" pair inside the ParameterStr variables as well. </p>\n\n<p>I have looked at the following documents for guidance: </p>\n\n<p><a href=\"https://www.ibm.com/developerworks/community/forums/html/topic?id=43cee700-9074-49e1-9223-7c4db2d89680\" rel=\"nofollow noreferrer\">https://www.ibm.com/developerworks/community/forums/html/topic?id=43cee700-9074-49e1-9223-7c4db2d89680</a></p>\n\n<p><a href=\"https://developer.ibm.com/answers/questions/258458/ucd-install-application-fails-with-wasx7115e-canno/\" rel=\"nofollow noreferrer\">https://developer.ibm.com/answers/questions/258458/ucd-install-application-fails-with-wasx7115e-canno/</a></p>\n\n<p>I have verified the path to the ear, the permissions on the ear, and the ownership of the ear. </p>\n\n<p>Am I having an issue similar to globbing? The input file is there, and is world readable. I have even run the script from the same location as the (installableApps) folder for the AppSrv01 Profile.</p>\n\n<p>Any help would be highly appreciated.</p>\n\n<p>EDIT: </p>\n\n<p>So it we're past this part now. So I imagine that I will need to start escaping any meta characters. I'm posting what a fully constructed argument looks like: </p>\n\n<pre><code>AdminApp.install('/opt/IBM/WebSphere/AppServer/installableApps/my_ear_file.ear','[-node DefaultNode01 -cell DefaultCell01 -server server1 -MapWebModToVH [[ \\\"Our War One\\\" first_war.war,WEB-INF/web.xml default_host ][\\\"Our War Two\\\" second_war.war,WEB-INF/web.xml default_host][\\\"Our War Three\\\" third_war.war,WEB-INF/web.xml default_host]]]')\n</code></pre>\n\n<p>Our argument is slightly different at this time, but that appears to still be acceptable to the interpreter </p>\n\n<pre><code>AdminApp.install( /opt/IBM/WebSphere/AppServer/installableApps/my_ear_file.ear,'[-node DefaultNode01 -cell DefaultCell01 -server server1 -MapWebModToVH [[ \\\"Our War One\\\" first_war.war,WEB-INF/web.xml default_host ][\\\"Our War Two\\\" second_war.war,WEB-INF/web.xml default_host][\\\"Our War Three\\\" third_war.war,WEB-INF/web.xml default_host]]]')\n</code></pre>\n\n<p>So that generates a </p>\n\n<pre><code>java.lang.IllegalArgumentException: java.lang.IllegalArgumentException: WASX7122E: Expected \"-\"  not found.\n</code></pre>\n\n<p>So I am now trying to see which meta characters I can deal with via trial and errors.</p>\n\n<p>I am basing this off of the comment response by kgibm.</p>\n"}, {"tags": ["python", "subclass", "type-hinting", "mypy", "type-variables"], "answers": [{"tags": [], "owner": {"reputation": 40179, "user_id": 646543, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/a6xF2.jpg?s=128&g=1", "display_name": "Michael0x2a", "link": "https://stackoverflow.com/users/646543/michael0x2a"}, "is_accepted": true, "score": 0, "last_activity_date": 1524150356, "creation_date": 1524150356, "answer_id": 49924380, "question_id": 49908265, "link": "https://stackoverflow.com/questions/49908265/dict-type-does-not-work-with-typevar-using-mypy/49924380#49924380", "title": "Dict type does not work with TypeVar using mypy?", "body": "<p>No. Neither the <code>__init__</code> function nor your class is generic, so the <code>E</code> type has no meaning within the context of the <code>__init__</code> function.</p>\n\n<p>The way you'd make this typecheck is to have your ServiceLocator class be generic:</p>\n\n<pre><code>from typing import Generic\n\n# ...snip...\n\nclass ServiceLocator(QObject, Generic[E]): #type: ignore\n    _instance = None;\n    allServicesInited = pyqtSignal()\n\n    def __init__(self) -&gt; None:\n        super().__init__()\n        self._instance = self\n\n        self._services: Dict[Type[E], E] = {}\n\n    def registerService(self, t: Type[E], instance: E) -&gt; None:\n        self._services[t] = instance\n\n    def getService(self, service: Type[E]) -&gt; E:\n        return self._services[service]\n</code></pre>\n\n<p>That said, this would likely not do what you'd expect: you'd be insisting that your ServiceLocator is capable of storing exactly one type of service, and no other.</p>\n\n<p>What you want instead is a way of establishing some invariant on your <code>_services</code> field: to state that there's some relationship that must always be true of every key-value pair.</p>\n\n<p>However, AFAIK, this is impossible to do using Python's type system: dicts (and other containers) are treated in a completely homogenous way. We know the keys must be a particular type and the values must be some other type, but that's about it. </p>\n\n<p>You'll have to settle instead for checking this relationship at runtime:</p>\n\n<pre><code>class ServiceLocator(QObject): #type: ignore\n    _instance = None;\n    allServicesInited = pyqtSignal()\n\n    def __init__(self) -&gt; None:\n        super().__init__()\n        self._instance = self\n\n        self._services: Dict[Type[BaseService], BaseService] = {}\n\n    def registerService(self, t: Type[E], instance: E) -&gt; None:\n        self._services[t] = instance\n\n    def getService(self, service: Type[E]) -&gt; E:\n        instance = self._services[service]\n        assert isinstance(instance, service)\n        return instance\n</code></pre>\n\n<p>Note the assert in the last method -- mypy is smart enough to understand basic assert and isinstance checks. So before the assert, <code>instance</code> is of type <code>BaseService</code>; after the assert mypy understands to infer that the narrowed type is <code>E</code>.</p>\n\n<p>(You could also use a cast, but I personally prefer using explicit runtime checks in cases where the typesystem isn't strong enough to express some constraint.)</p>\n"}], "owner": {"reputation": 4606, "user_id": 574633, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/998cbb418b181eeaccdd47b70f14ed15?s=128&d=identicon&r=PG", "display_name": "Notbad", "link": "https://stackoverflow.com/users/574633/notbad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 477, "favorite_count": 0, "accepted_answer_id": 49924380, "answer_count": 1, "score": 0, "last_activity_date": 1524150356, "creation_date": 1524082281, "last_edit_date": 1524083481, "question_id": 49908265, "link": "https://stackoverflow.com/questions/49908265/dict-type-does-not-work-with-typevar-using-mypy", "title": "Dict type does not work with TypeVar using mypy?", "body": "<p>I'm trying to create a little service locator. All services are children classes of BaseService class. I use registerService method to register a service class type with its instance and it is stored in the _services Dict. Then you can get the service instance calling getService with the class type needed. Example:</p>\n\n<pre><code>ServiceLocator.instance().registerService(LogService,LogService())\nlogServiceInstance =ServiceLocator.instance().getService(LogService)\n</code></pre>\n\n<p>This is the code showing the error:</p>\n\n<pre><code>  E = TypeVar('E', bound=BaseService)\n\n\n  class ServiceLocator(QObject): #type: ignore\n\n      _instance = None;\n      allServicesInited = pyqtSignal()\n\n      def __init__(self) -&gt; None:\n          super().__init__()\n          self._instance = self\n\n          self._services: Dict[Type[E], E] = {} # This gives error: Invalid type \"servicelocator.E\"\n\n      def registerService(self, t: Type[E], instance: E)-&gt;None:\n          self._services[t]=instance\n      def getService(self,service: Type[E])-&gt; E:\n          return self._services[service]\n</code></pre>\n\n<p>I get error: Invalid type \"servicelocator.E\" at the line where the Dict annotation is added as I show in the code.</p>\n\n<p>I'm using Python 3.6.4 and MyPy 0.590. Mypy flags are: </p>\n\n<pre><code>--ignore-missing-imports --strict\n</code></pre>\n\n<p>Shouldn't this work correclty?</p>\n"}, {"tags": ["python", "apache-spark", "pyspark", "virtualenv", "dependency-management"], "answers": [{"comments": [{"owner": {"reputation": 55797, "user_id": 7976758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/512cfbaf98d63ca4acd57b2df792aec6?s=128&d=identicon&r=PG", "display_name": "phd", "link": "https://stackoverflow.com/users/7976758/phd"}, "edited": false, "score": 0, "creation_date": 1524084600, "post_id": 49908599, "comment_id": 86833511, "body": "s<code>park-submit</code>!"}, {"owner": {"reputation": 17084, "user_id": 626537, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DogUx.jpg?s=128&g=1", "display_name": "clstaudt", "link": "https://stackoverflow.com/users/626537/clstaudt"}, "edited": false, "score": 2, "creation_date": 1524122010, "post_id": 49908599, "comment_id": 86845235, "body": "Do I need to manually package all dependencies (numpy, scipy, scikit-learn, pandas...) into <code>my_dependency.zip</code>? Could I instead pass a list of requirements and rely on <code>pip</code>?"}], "tags": [], "owner": {"reputation": 829, "user_id": 5475320, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/10204305224303200/picture?type=large", "display_name": "Vijay Krishna", "link": "https://stackoverflow.com/users/5475320/vijay-krishna"}, "is_accepted": false, "score": -2, "last_activity_date": 1524157372, "last_edit_date": 1524157372, "creation_date": 1524083667, "answer_id": 49908599, "question_id": 49908264, "link": "https://stackoverflow.com/questions/49908264/installing-requirements-of-pyspark-job-before-spark-submit/49908599#49908599", "title": "installing requirements of pyspark job before spark-submit", "body": "<p>You have to run the job in cluster mode. Assuming you are using Yarn as the scheduler. </p>\n\n<pre><code>spark-submit --master yarn-cluster my_script.py --py-files my_dependency.zip\n</code></pre>\n\n<p>Also try the following </p>\n\n<pre><code>from sklearn import grid_search, datasets\nfrom sklearn.ensemble import RandomForestClassifier\nfrom sklearn.grid_search import GridSearchCV\n</code></pre>\n\n<p>Regarding pandas, If you have the exact Data structure you can call <code>toPandas()</code></p>\n\n<p>numpy is generally integrated into a lot of pyspark calls but not sure of this though. </p>\n"}], "owner": {"reputation": 17084, "user_id": 626537, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DogUx.jpg?s=128&g=1", "display_name": "clstaudt", "link": "https://stackoverflow.com/users/626537/clstaudt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 746, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1524157372, "creation_date": 1524082280, "question_id": 49908264, "link": "https://stackoverflow.com/questions/49908264/installing-requirements-of-pyspark-job-before-spark-submit", "title": "installing requirements of pyspark job before spark-submit", "body": "<p>I want to run a Python application on a Spark cluster, sending it there via <code>spark-submit</code>. The application has several dependencies, such as <code>pandas</code>, <code>numpy</code>, <code>scikit-learn</code>. What is a clean way to ensure that the dependencies are installed before submitting the job?</p>\n\n<p>As I have used virtualenv for development, a <code>requirements.txt</code> can easily be generated. </p>\n"}, {"tags": ["python", "python-3.x", "opencv", "opencv3.3"], "comments": [{"owner": {"reputation": 12138, "user_id": 243103, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/6c8ef2ca3f81839e3ef4f2c061313502?s=128&d=identicon&r=PG", "display_name": "Stefan Dragnev", "link": "https://stackoverflow.com/users/243103/stefan-dragnev"}, "edited": false, "score": 0, "creation_date": 1524082860, "post_id": 49908246, "comment_id": 86832662, "body": "Maybe if you could demonstrate the problem in a Jupyter notebook, maybe on Google Colaboratory"}, {"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1524085740, "post_id": 49908246, "comment_id": 86833992, "body": "Well, you know the problem statement, so how about doing some debugging? Say, investigate the value of all the variables you use there?"}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user7159290"}, "is_accepted": true, "score": 1, "last_activity_date": 1525674190, "creation_date": 1525674190, "answer_id": 50208151, "question_id": 49908246, "link": "https://stackoverflow.com/questions/49908246/opencv-typeerror-int-object-is-not-iterable/50208151#50208151", "title": "opencv TypeError: &#39;int&#39; object is not iterable", "body": "<p>Finally, I have got the solution. The problem with was version of opencv. This code is for <strong>opencv2.4</strong> and I was trying to run it on <strong>opencv3</strong>.</p>\n\n<p>Well, The final code for <strong>opencv3</strong> is as following:</p>\n\n<pre><code>import cv2\n\nfaceDetect = cv2.CascadeClassifier('haarcascade_frontalface_default.xml')\ncam = cv2.VideoCapture(0)\nrec = cv2.face.createLBPHFaceRecognizer()\nrec.load('recognizer/trainningData.yml')\nid = 0\nfont = cv2.FONT_HERSHEY_SIMPLEX\nwhile True:\n    ret, img = cam.read()\n    gray = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)\n    faces = faceDetect.detectMultiScale(gray, 1.3, 5)\n    for (x, y, w, h) in faces:\n        cv2.rectangle(img, (x, y), (x + w, y + h), (0, 0, 255), 2)\n        id= rec.predict(gray[y:y + h, x:x + w])\n        cv2.putText(img, str(id), (x, y + h), font, 255, (255, 0, 0))\n    cv2.imshow(\"Face\", img)\n    if cv2.waitKey(1) == ord('q'):\n        break\ncam.release()\ncv2.destroyAllWindows()\n</code></pre>\n\n<p>There is no need to mention the variable <strong>conf</strong>.</p>\n\n<p><strong>rec.predict(gray[y:y + h, x:x + w])</strong> is returning the <strong>id</strong> of the person from the <strong>database</strong>.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7159290"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 930, "favorite_count": 1, "accepted_answer_id": 50208151, "answer_count": 1, "score": 3, "last_activity_date": 1525674190, "creation_date": 1524082222, "question_id": 49908246, "link": "https://stackoverflow.com/questions/49908246/opencv-typeerror-int-object-is-not-iterable", "title": "opencv TypeError: &#39;int&#39; object is not iterable", "body": "<p>I am trying to detect a face using OpenCV. I have a file <strong>recognizer.py</strong> as follows:</p>\n\n<pre><code>import cv2\n\nfaceDetect = cv2.CascadeClassifier('haarcascade_frontalface_default.xml')\ncam = cv2.VideoCapture(0)\nrec = cv2.face.createLBPHFaceRecognizer()\nrec.load('recognizer/trainningData.yml')\nid = 0\nfont = cv2.FONT_HERSHEY_SIMPLEX\nwhile True:\n    ret, img = cam.read()\n    gray = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)\n    faces = faceDetect.detectMultiScale(gray, 1.3, 5)\n    for (x, y, w, h) in faces:\n        cv2.rectangle(img, (x, y), (x + w, y + h), (0, 0, 255), 2)\n        id, conf = rec.predict(gray[y:y + h, x:x + w])\n        cv2.putText(img, str(id), (x, y + h), font, 255, (255, 0, 0))\n    cv2.imshow(\"Face\", img)\n    if cv2.waitKey(1) == ord('q'):\n        break\ncam.release()\ncv2.destroyAllWindows()\n</code></pre>\n\n<p>When I am trying to run this code, the program is running successfully and opening a camera window.</p>\n\n<p>But whenever, I am trying to show my face in front of the camera, the program is terminating with <strong>exit code 1</strong> and showing the following error:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"/home/prateek/recognizer.py\", line 15, in &lt;module&gt;\n    id, conf = rec.predict(gray[y:y + h, x:x + w])\n\nTypeError: 'int' object is not iterable\n\nProcess finished with exit code 1\n</code></pre>\n\n<p>Means, I am getting the error on <strong>line 15</strong> which is as follows:</p>\n\n<pre><code>id, conf = rec.predict(gray[y:y + h, x:x + w])\n</code></pre>\n\n<p>I don't know how to resolve this problem. I am using <strong>Python3</strong> and <strong>OpenCV3.3</strong>.</p>\n"}, {"tags": ["python", "macos", "pyinstaller"], "answers": [{"comments": [{"owner": {"reputation": 2290, "user_id": 1945087, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a821bc5d486ccd8228e6cf740e12d51f?s=128&d=identicon&r=PG", "display_name": "J Jones", "link": "https://stackoverflow.com/users/1945087/j-jones"}, "edited": false, "score": 0, "creation_date": 1538071181, "post_id": 52426788, "comment_id": 92025234, "body": "Yes, I found the same.  Annoyingly, getting old versions of OSX (through legitimate channels) turned out to be nearly impossible."}, {"owner": {"reputation": 31, "user_id": 1226990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a39e0237373d4b04cde87ca6e1a23f3?s=128&d=identicon&r=PG", "display_name": "fresbeeplayer", "link": "https://stackoverflow.com/users/1226990/fresbeeplayer"}, "reply_to_user": {"reputation": 2290, "user_id": 1945087, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a821bc5d486ccd8228e6cf740e12d51f?s=128&d=identicon&r=PG", "display_name": "J Jones", "link": "https://stackoverflow.com/users/1945087/j-jones"}, "edited": false, "score": 1, "creation_date": 1538473705, "post_id": 52426788, "comment_id": 92145879, "body": "Yeah, you&#39;d have to have already installed it previously to find it in the history, otherwise it won&#39;t let you download the image. You&#39;d need to ask someone else that has it to download it for you. Otherwise checkout nuitka.net, it&#39;s a totally different way, but can create packages from any host OS"}], "tags": [], "owner": {"reputation": 31, "user_id": 1226990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a39e0237373d4b04cde87ca6e1a23f3?s=128&d=identicon&r=PG", "display_name": "fresbeeplayer", "link": "https://stackoverflow.com/users/1226990/fresbeeplayer"}, "is_accepted": false, "score": 2, "last_activity_date": 1537451584, "creation_date": 1537451584, "answer_id": 52426788, "question_id": 49908236, "link": "https://stackoverflow.com/questions/49908236/pyinstaller-executable-fails-on-old-os-x/52426788#52426788", "title": "Pyinstaller executable fails on old OS X", "body": "<p>A bit late, but it has happened to me as well. After a bit of research, as per the documentation:\n<a href=\"https://pyinstaller.readthedocs.io/en/stable/usage.html#making-mac-os-x-apps-forward-compatible\" rel=\"nofollow noreferrer\">https://pyinstaller.readthedocs.io/en/stable/usage.html#making-mac-os-x-apps-forward-compatible</a></p>\n\n<p>Basically you'll need to install a virtual machine with the oldest OS you'd like support (say, osx maverick, or ubuntu 16) with the complete development environment and run pyinstaller there. As of the time of writing, there seems to be no way around it.</p>\n"}], "owner": {"reputation": 2290, "user_id": 1945087, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a821bc5d486ccd8228e6cf740e12d51f?s=128&d=identicon&r=PG", "display_name": "J Jones", "link": "https://stackoverflow.com/users/1945087/j-jones"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 868, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1537451584, "creation_date": 1524082173, "question_id": 49908236, "link": "https://stackoverflow.com/questions/49908236/pyinstaller-executable-fails-on-old-os-x", "title": "Pyinstaller executable fails on old OS X", "body": "<p>I have a wxPython GUI packaged into an executable with Pyinstaller.  It works correctly on OS X 10.13.4, but doesn't initialize on OS X 10.12.6.</p>\n\n<p>This is the error output when my executable is run from the command line:</p>\n\n<pre><code>[4693] Error loading Python lib '/var/folders/9_/5d_4dfcs4lj11bdjq4twtl5w0000gp/T/_MEIYsEh11/Python': dlopen:   dlopen(/var/folders/9_/5d_4dfcs4lj11bdjq4twtl5w0000gp/T/_MEIYsEh11/Python, 10): Symbol not found: _futimens\nReferenced from: /var/folders/9_/5d_4dfcs4lj11bdjq4twtl5w0000gp/T/_MEIYsEh11/Python (which was built for Mac OS X 10.13)\nExpected in: /usr/lib/libSystem.B.dylib\nin /var/folders/9_/5d_4dfcs4lj11bdjq4twtl5w0000gp/T/_MEIYsEh11/Python\n</code></pre>\n\n<p>I have no idea what this error message means.  I've tried googling some pieces of it, but I'm not getting any meaningful results.  </p>\n\n<p>I'm looking for any clue to get me going in the right direction -- what might be wrong, or how to debug.  Unfortunately I don't have access to OS X 10.12.6, so I'm having to troubleshoot for a user remotely.</p>\n\n<p>This is my version of Pyinstaller:</p>\n\n<pre><code>pyinstaller 3.4.dev0+g07ab024c\n</code></pre>\n\n<p>This seems to happen with brew-installed Python or Anaconda.</p>\n"}, {"tags": ["python", "keyword-argument", "python-3.7", "python-dataclasses"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1524087236, "post_id": 49908182, "comment_id": 86834611, "body": "<code>...</code> won&#39;t do anything any other code could see."}], "answers": [{"tags": [], "owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "is_accepted": true, "score": 13, "last_activity_date": 1524268408, "last_edit_date": 1524268408, "creation_date": 1524103679, "answer_id": 49911616, "question_id": 49908182, "link": "https://stackoverflow.com/questions/49908182/how-to-make-keyword-only-fields-with-dataclasses/49911616#49911616", "title": "How to make &quot;keyword-only&quot; fields with dataclasses?", "body": "<p>You're not going to get much help from <code>dataclasses</code> when doing this. There's no way to say that a field should be initialized by keyword-only argument, and the <code>__post_init__</code> hook doesn't know whether the original constructor arguments were passed by keyword. Also, there's no good way to introspect <code>InitVar</code>s, let alone mark <code>InitVar</code>s as keyword-only.</p>\n\n<p>At minimum, you'll have to replace the generated <code>__init__</code>. Probably the simplest way is to just define <code>__init__</code> by hand. If you don't want to do that, probably the most robust way is to create field objects and mark them kwonly in the <code>metadata</code>, then inspect the metadata in your own decorator. This is even more complicated than it sounds:</p>\n\n<pre><code>import dataclasses\nimport functools\nimport inspect\n\n# Helper to make calling field() less verbose\ndef kwonly(default=dataclasses.MISSING, **kwargs):\n    kwargs.setdefault('metadata', {})\n    kwargs['metadata']['kwonly'] = True\n    return dataclasses.field(default=default, **kwargs)\n\ndef mydataclass(_cls, *, init=True, **kwargs):\n    if _cls is None:\n        return functools.partial(mydataclass, **kwargs)\n\n    no_generated_init = (not init or '__init__' in _cls.__dict__)\n    _cls = dataclasses.dataclass(_cls, **kwargs)\n    if no_generated_init:\n        # No generated __init__. The user will have to provide __init__,\n        # and they probably already have. We assume their __init__ does\n        # what they want.\n        return _cls\n\n    fields = dataclasses.fields(_cls)\n    if any(field.metadata.get('kwonly') and not field.init for field in fields):\n        raise TypeError('Non-init field marked kwonly')\n\n    # From this point on, ignore non-init fields - but we don't know\n    # about InitVars yet.\n    init_fields = [field for field in fields if field.init]\n    for i, field in enumerate(init_fields):\n        if field.metadata.get('kwonly'):\n            first_kwonly = field.name\n            num_kwonly = len(init_fields) - i\n            break\n    else:\n        # No kwonly fields. Why were we called? Assume there was a reason.\n        return _cls\n\n    if not all(field.metadata.get('kwonly') for field in init_fields[-num_kwonly:]):\n        raise TypeError('non-kwonly init fields following kwonly fields')\n\n    required_kwonly = [field.name for field in init_fields[-num_kwonly:]\n                       if field.default is field.default_factory is dataclasses.MISSING]\n\n    original_init = _cls.__init__\n\n    # Time to handle InitVars. This is going to get ugly.\n    # InitVars don't show up in fields(). They show up in __annotations__,\n    # but the current dataclasses implementation doesn't understand string\n    # annotations, and we want an implementation that's robust against\n    # changes in string annotation handling.\n    # We could inspect __post_init__, except there doesn't have to be a\n    # __post_init__. (It'd be weird to use InitVars with no __post_init__,\n    # but it's allowed.)\n    # As far as I can tell, that leaves inspecting __init__ parameters as\n    # the only option.\n\n    init_params = tuple(inspect.signature(original_init).parameters)\n    if init_params[-num_kwonly] != first_kwonly:\n        # InitVars following kwonly fields. We could adopt a convention like\n        # \"InitVars after kwonly are kwonly\" - in fact, we could have adopted\n        # \"all fields after kwonly are kwonly\" too - but it seems too likely\n        # to cause confusion with inheritance.\n        raise TypeError('InitVars after kwonly fields.')\n    # -1 to exclude self from this count.\n    max_positional = len(init_params) - num_kwonly - 1\n\n    @functools.wraps(original_init)\n    def __init__(self, *args, **kwargs):\n        if len(args) &gt; max_positional:\n            raise TypeError('Too many positional arguments')\n        check_required_kwargs(kwargs, required_kwonly)\n        return original_init(self, *args, **kwargs)\n    _cls.__init__ = __init__\n\n    return _cls\n\ndef check_required_kwargs(kwargs, required):\n    # Not strictly necessary, but if we don't do this, error messages for\n    # required kwonly args will list them as positional instead of\n    # keyword-only.\n    missing = [name for name in required if name not in kwargs]\n    if not missing:\n        return\n    # We don't bother to exactly match the built-in logic's exception\n    raise TypeError(f\"__init__ missing required keyword-only argument(s): {missing}\")\n</code></pre>\n\n<p>Usage example:</p>\n\n<pre><code>@mydataclass\nclass S3Obj:\n    bucket: str\n    key: str\n    storage_class: str = kwonly('Standard')\n</code></pre>\n\n<p>This is somewhat tested, but not as thoroughly as I would like.</p>\n\n<hr>\n\n<p>You can't get the syntax you propose with <code>...</code>, because <code>...</code> doesn't do anything a metaclass or decorator can see. You can get something pretty close with something that actually triggers name lookup or assignment, like <code>kwonly_start = True</code>, so a metaclass can see it happen. However, a robust implementation of this is complicated to write, because there are a lot of things that need dedicated handling. Inheritance, <code>typing.ClassVar</code>, <code>dataclasses.InitVar</code>, forward references in annotations, etc. will all cause problems if not handled carefully. Inheritance probably causes the most problems.</p>\n\n<p>A proof-of-concept that doesn't handle all the fiddly bits might look like this:</p>\n\n<pre><code># Does not handle inheritance, InitVar, ClassVar, or anything else\n# I'm forgetting.\n\nclass POCMetaDict(dict):\n    def __setitem__(self, key, item):\n        # __setitem__ instead of __getitem__ because __getitem__ is\n        # easier to trigger by accident.\n        if key == 'kwonly_start':\n            self['__non_kwonly'] = len(self['__annotations__'])\n        super().__setitem__(key, item)\n\nclass POCMeta(type):\n    @classmethod\n    def __prepare__(cls, name, bases, **kwargs):\n        return POCMetaDict()\n    def __new__(cls, name, bases, classdict, **kwargs):\n        classdict.pop('kwonly_start')\n        non_kwonly = classdict.pop('__non_kwonly')\n\n        newcls = super().__new__(cls, name, bases, classdict, **kwargs)\n        newcls = dataclass(newcls)\n\n        if non_kwonly is None:\n            return newcls\n\n        original_init = newcls.__init__\n\n        @functools.wraps(original_init)\n        def __init__(self, *args, **kwargs):\n            if len(args) &gt; non_kwonly:\n                raise TypeError('Too many positional arguments')\n            return original_init(self, *args, **kwargs)\n\n        newcls.__init__ = __init__\n        return newcls\n</code></pre>\n\n<p>You'd use it like</p>\n\n<pre><code>class S3Obj(metaclass=POCMeta):\n    bucket: str\n    key: str\n\n    kwonly_start = True\n\n    storage_class: str = 'Standard'\n</code></pre>\n\n<p>This is untested.</p>\n"}, {"tags": [], "owner": {"reputation": 4323, "user_id": 1720199, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cODPq.jpg?s=128&g=1", "display_name": "cglacet", "link": "https://stackoverflow.com/users/1720199/cglacet"}, "is_accepted": false, "score": 1, "last_activity_date": 1605941016, "creation_date": 1605941016, "answer_id": 64940536, "question_id": 49908182, "link": "https://stackoverflow.com/questions/49908182/how-to-make-keyword-only-fields-with-dataclasses/64940536#64940536", "title": "How to make &quot;keyword-only&quot; fields with dataclasses?", "body": "<p>I wonder why this is not part of the dataclass API, that seems important to me.</p>\n<p>If all arguments are keyword arguments maybe its a bit simpler and the following could suffice?</p>\n<pre class=\"lang-py prettyprint-override\"><code>from dataclasses import dataclass\nfrom functools import wraps\n\ndef kwargs_only(cls):\n    \n    @wraps(cls)\n    def call(**kwargs):\n        return cls(**kwargs)\n    \n    return call\n\n@kwargs_only\n@dataclass\nclass Coordinates:\n    latitude: float = 0\n    longitude: float = 0\n</code></pre>\n<p>That's not perfect because the error when using positional argument refers to <code>call</code>:</p>\n<pre class=\"lang-sh prettyprint-override\"><code>--------------------------------------------------------\nTypeError              Traceback (most recent call last)\n&lt;ipython-input-24-fb588c816ecf&gt; in &lt;module&gt;\n----&gt; 1 c = Coordinates(1, longitude=2)\n      2 help(c)\n\nTypeError: call() takes 0 positional arguments but 1 was given\n</code></pre>\n<p>Similarly the dataclass' constructor documentation is outdated and doesn't reflect the new constraint.</p>\n<p>If there are only some keyword fields, maybe this?</p>\n<pre class=\"lang-py prettyprint-override\"><code>def kwargs(*keywords):\n    \n    def decorator(cls):\n        @wraps(cls)\n        def call(*args, **kwargs):\n            if any(kw not in kwargs for kw in keywords):\n                raise TypeError(f&quot;{cls.__name__}.__init__() requires {keywords} as keyword arguments&quot;)\n            return cls(*args, **kwargs)\n        \n        return call\n\n    return decorator\n\n\n@kwargs('longitude')\n@dataclass(frozen=True)\nclass Coordinates:\n    latitude: float\n    longitude: float = 0\n</code></pre>\n"}], "owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3191, "favorite_count": 3, "accepted_answer_id": 49911616, "answer_count": 2, "score": 26, "last_activity_date": 1605941016, "creation_date": 1524081926, "last_edit_date": 1524087598, "question_id": 49908182, "link": "https://stackoverflow.com/questions/49908182/how-to-make-keyword-only-fields-with-dataclasses", "title": "How to make &quot;keyword-only&quot; fields with dataclasses?", "body": "<p><a href=\"https://www.python.org/dev/peps/pep-3102/\" rel=\"noreferrer\">Since 3.0</a> there is support to make an argument keyword only:</p>\n\n<pre><code>class S3Obj:\n    def __init__(self, bucket, key, *, storage_class='Standard'):\n        self.bucket = bucket\n        self.key = key\n        self.storage_class = storage_class\n</code></pre>\n\n<p>How to get that kind of signature using <a href=\"https://www.python.org/dev/peps/pep-0557/\" rel=\"noreferrer\">dataclasses</a>?  Something like this, but preferably without the <code>SyntaxError</code>:</p>\n\n<pre><code>@dataclass\nclass S3Obj:\n    bucket: str\n    key: str\n    *\n    storage_class: str = 'Standard'\n</code></pre>\n\n<p>Ideally declarative, but using the <code>__post_init__</code> hook and/or a replacement class decorator is fine too - as long as the code is reusable.</p>\n\n<p><em>Edit:</em> maybe something like this syntax, using an ellipsis literal</p>\n\n<pre><code>@mydataclass\nclass S3Obj:\n    bucket: str\n    key: str\n    ...\n    storage_class: str = 'Standard'\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 3420, "user_id": 1530134, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/d6b1b610a6302fd94ff9f8971a4f1899?s=128&d=identicon&r=PG", "display_name": "Alyssa Haroldsen", "link": "https://stackoverflow.com/users/1530134/alyssa-haroldsen"}, "edited": false, "score": 2, "creation_date": 1524081972, "post_id": 49908163, "comment_id": 86832191, "body": "Please show something you think should work, but doesn&#39;t. Remember that Stack Overflow is not a homework-answering site."}, {"owner": {"reputation": 2958, "user_id": 3781180, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a7fddcdb3bbcaa60147ebe56231c22c1?s=128&d=identicon&r=PG&f=1", "display_name": "OneRaynyDay", "link": "https://stackoverflow.com/users/3781180/oneraynyday"}, "edited": false, "score": 1, "creation_date": 1524081984, "post_id": 49908163, "comment_id": 86832196, "body": "We can&#39;t just write your code for you. Show us what you&#39;ve tried."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1524082246, "post_id": 49908163, "comment_id": 86832334, "body": "Welcome to StackOverflow.  Please read and follow the posting guidelines in the help documentation, as suggested when you created this account.  <a href=\"http://stackoverflow.com/help/on-topic\">On topic</a> and <a href=\"http://stackoverflow.com/help/how-to-ask\">how to ask</a> apply here. StackOverflow is not a design, coding, research, or tutorial service."}], "answers": [{"tags": [], "owner": {"reputation": 306, "user_id": 6272169, "user_type": "registered", "accept_rate": 73, "profile_image": "https://graph.facebook.com/10156870110820287/picture?type=large", "display_name": "mickNeill", "link": "https://stackoverflow.com/users/6272169/mickneill"}, "is_accepted": false, "score": 0, "last_activity_date": 1524085203, "creation_date": 1524085203, "answer_id": 49908926, "question_id": 49908163, "link": "https://stackoverflow.com/questions/49908163/adding-together-two-columns-from-a-read-file-in-python/49908926#49908926", "title": "adding together two columns from a read file in python", "body": "<p>Heres a start</p>\n\n<pre><code>import pandas\ncolnames = ['start', 'summit']\ndata = pandas.read_csv('Book2.csv', names=colnames)\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9666309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c04ba9e4cdc4cfda9ba2493ab784612?s=128&d=identicon&r=PG&f=1", "display_name": "M.Greene", "link": "https://stackoverflow.com/users/9666309/m-greene"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 1, "score": -5, "last_activity_date": 1524085203, "creation_date": 1524081868, "last_edit_date": 1524082359, "question_id": 49908163, "link": "https://stackoverflow.com/questions/49908163/adding-together-two-columns-from-a-read-file-in-python", "title": "adding together two columns from a read file in python", "body": "<p>I am working on a project for school and I need to add two columns together from a read file in python and I have tried a lot of different things and nothing has worked. I have two columns </p>\n\n<pre><code> start  \n 713866 \n 936003 \n 937328 \n 968012\n1004680\n1167304\n1209211\n</code></pre>\n\n<p>and </p>\n\n<pre><code>summit \n 207    \n 263   \n  46     \n 459    \n  61     \n 154   \n 180   \n 158 \n</code></pre>\n\n<p>How would I add for example (713866 + 207) and get an answer and have python do that for the rest of the list?</p>\n"}, {"tags": ["python", "python-3.x", "web-scraping", "scrapy", "jupyter-notebook"], "comments": [{"owner": {"reputation": 12943, "user_id": 4094231, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/da5d12e4b0c319022432a23fc5344831?s=128&d=identicon&r=PG&f=1", "display_name": "Umair Ayub", "link": "https://stackoverflow.com/users/4094231/umair-ayub"}, "edited": false, "score": 0, "creation_date": 1524132784, "post_id": 49908158, "comment_id": 86852251, "body": "You could have used scrapy shell"}, {"owner": {"reputation": 1764, "user_id": 4219202, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e09f95f4755fbc7befc9accfcaaf15f?s=128&d=identicon&r=PG&f=1", "display_name": "Zephro", "link": "https://stackoverflow.com/users/4219202/zephro"}, "edited": false, "score": 0, "creation_date": 1524137462, "post_id": 49908158, "comment_id": 86855407, "body": "your third-party requests library is actually an integral part of  python ;) btw you can also execute bash &#180;!scrapy shell &quot;some-url&quot;in&#180; from jupyter"}, {"owner": {"reputation": 1936, "user_id": 7576819, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-GsET9kif7jM/AAAAAAAAAAI/AAAAAAAARdo/zN92oXaOgHE/photo.jpg?sz=128", "display_name": "Dustin Michels", "link": "https://stackoverflow.com/users/7576819/dustin-michels"}, "reply_to_user": {"reputation": 12943, "user_id": 4094231, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/da5d12e4b0c319022432a23fc5344831?s=128&d=identicon&r=PG&f=1", "display_name": "Umair Ayub", "link": "https://stackoverflow.com/users/4094231/umair-ayub"}, "edited": false, "score": 0, "creation_date": 1524158845, "post_id": 49908158, "comment_id": 86869723, "body": "Thank you for the replies. @Umair, I want to use Jupyter instead of the scrapy shell so I can more easily save/modify the commands I try. @Zephro, <code>urllib.request</code> is built-in, but they were using <code>requests</code> which must be installed separately. And ex<code>!scrapy shell &quot;some-url&quot;</code> doesn&#39;t work because it tries to launch a shell inside the cell and freezes the notebook."}], "answers": [{"tags": [], "owner": {"reputation": 76, "user_id": 9078072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc046d68a3896df8f7cd61c780f8b967?s=128&d=identicon&r=PG&f=1", "display_name": "BT Einstein", "link": "https://stackoverflow.com/users/9078072/bt-einstein"}, "is_accepted": true, "score": 6, "last_activity_date": 1530442407, "creation_date": 1530442407, "answer_id": 51122616, "question_id": 49908158, "link": "https://stackoverflow.com/questions/49908158/using-scrapy-in-jupyter-notebook-accessing-response-directly/51122616#51122616", "title": "Using Scrapy in Jupyter notebook / accessing response directly", "body": "<p>You can approach the problem this way</p>\n\n<pre><code>import requests\nfrom scrapy.http import TextResponse\n\nres = requests.get('some-url')\nresponse = TextResponse(res.url, body=res.text, encoding='utf-8')\n</code></pre>\n"}], "owner": {"reputation": 1936, "user_id": 7576819, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-GsET9kif7jM/AAAAAAAAAAI/AAAAAAAARdo/zN92oXaOgHE/photo.jpg?sz=128", "display_name": "Dustin Michels", "link": "https://stackoverflow.com/users/7576819/dustin-michels"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3164, "favorite_count": 3, "protected_date": 1530442488, "accepted_answer_id": 51122616, "answer_count": 1, "score": 7, "last_activity_date": 1530442407, "creation_date": 1524081861, "last_edit_date": 1524082427, "question_id": 49908158, "link": "https://stackoverflow.com/questions/49908158/using-scrapy-in-jupyter-notebook-accessing-response-directly", "title": "Using Scrapy in Jupyter notebook / accessing response directly", "body": "<p>I want to directly interact with a Scrapy <code>response</code> object in a Jupyter notebook, the same way you can after entering the <a href=\"https://doc.scrapy.org/en/latest/topics/shell.html\" rel=\"noreferrer\">Scrapy shell</a> by typing <code>scrapy shell \"some-url\"</code> in the command line.</p>\n\n<p>In a notebook, I can run these commands without error:</p>\n\n<pre><code>import scrapy\nrequest = scrapy.Request(\"some-url\")\nresponse = scrapy.http.Response(\"some-url\")\n</code></pre>\n\n<p>But <code>request</code> and <code>response</code> both have an empty body property. According to the <a href=\"https://doc.scrapy.org/en/latest/topics/request-response.html\" rel=\"noreferrer\">docs</a>:</p>\n\n<blockquote>\n  <p>Typically, Request objects are generated in the spiders and pass\n  across the system until they reach the Downloader, which executes the\n  request and returns a Response object which travels back to the spider\n  that issued the request.</p>\n</blockquote>\n\n<p>It seems I'm missing the step where \"the Downloader\" executes a request object and returns a Response object. I can't figure out how that works.</p>\n\n<p>Does anyone know what happens when you run <code>scrapy shell \"some-url\"</code>in the command line, so I can replicate those steps in a a Jupyter notebook?</p>\n\n<p><strong>Note</strong>: A very similar question <a href=\"https://stackoverflow.com/questions/26177620/how-to-execute-scrapy-shell-url-with-notebook\">was posted here</a>, and the given answer works for me, but using the additional, third-party \"Requests\" library seems unnecessary/ non-ideal. </p>\n"}]