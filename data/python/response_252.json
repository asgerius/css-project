[{"tags": ["python", "neural-network"], "comments": [{"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1573084951, "post_id": 58740108, "comment_id": 103770147, "body": "So did it work?"}, {"owner": {"reputation": 247, "user_id": 9969435, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1c80a14a471ff836f26cf7880f4d3ca?s=128&d=identicon&r=PG&f=1", "display_name": "user42493", "link": "https://stackoverflow.com/users/9969435/user42493"}, "reply_to_user": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1573085363, "post_id": 58740108, "comment_id": 103770234, "body": "took too long to run actually. so I&#39;m not sure"}, {"owner": {"reputation": 1235, "user_id": 9477338, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/n1s0o.png?s=128&g=1", "display_name": "Natthaphon Hongcharoen", "link": "https://stackoverflow.com/users/9477338/natthaphon-hongcharoen"}, "edited": false, "score": 0, "creation_date": 1573093282, "post_id": 58740108, "comment_id": 103771885, "body": "You have an <code>activation=&#39;softmax&#39;</code> at the LAST layer. The output will be probability anyway."}, {"owner": {"reputation": 247, "user_id": 9969435, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1c80a14a471ff836f26cf7880f4d3ca?s=128&d=identicon&r=PG&f=1", "display_name": "user42493", "link": "https://stackoverflow.com/users/9969435/user42493"}, "edited": false, "score": 0, "creation_date": 1573093409, "post_id": 58740108, "comment_id": 103771912, "body": "But when you do prediction, wouldn\u2019t it return a onehot vector instead?"}, {"owner": {"reputation": 49730, "user_id": 349130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e4efeebbf6994bb904738c4fb8922bf?s=128&d=identicon&r=PG", "display_name": "Dr. Snoopy", "link": "https://stackoverflow.com/users/349130/dr-snoopy"}, "edited": false, "score": 0, "creation_date": 1573130730, "post_id": 58740108, "comment_id": 103786528, "body": "No, the output of a neural network with softmax activations are probabilities, continuous values."}], "owner": {"reputation": 247, "user_id": 9969435, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1c80a14a471ff836f26cf7880f4d3ca?s=128&d=identicon&r=PG&f=1", "display_name": "user42493", "link": "https://stackoverflow.com/users/9969435/user42493"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 21, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1573084743, "creation_date": 1573084743, "question_id": 58740108, "link": "https://stackoverflow.com/questions/58740108/neural-network-return-classes-instead-of-probabilities", "title": "neural network return classes instead of probabilities", "body": "<p>I have a list of 70k datas of dimension 25000 that I'm trying to feed into a neural network to get a classification of 20 different things. The system run out of memory before I can do anything. So I came out with this idea. So I divide the set of features into 5 5000. Then I feed each of the 5 set of data of dimension 5000 into a neural network. Then the result of prediction is the average of the 5. </p>\n\n<p>Here is how I separated the datas:</p>\n\n<pre><code>datas_feature1=datas[:,0:5000]\ndatas_feature2=datas[:,5000:10000]\ndatas_feature3=datas[:,10000:15000]\ndatas_feature4=datas[:,15000:20000]\ndatas_feature5=datas[:,20000:25000]\n</code></pre>\n\n<p>Then I feed each of them into a neural network:</p>\n\n<pre><code>model1 = Sequential()\nmodel1.add(layers.Dense(300, activation = \"relu\", input_shape=(5000,)))\n# Hidden - Layers\nmodel1.add(layers.Dropout(0.4, noise_shape=None, seed=None))\nmodel1.add(layers.Dense(20, activation = \"softmax\"))\nmodel1.summary()\n\nmodel1.compile(loss=\"categorical_crossentropy\",\n              optimizer=\"adam\",\n              metrics=['accuracy'])\nmodel1.fit( np.array(vectorized_training1), np.array(y_train_neralnettr),\n          batch_size=2000,\n          epochs=10,\n          verbose=1,\n          validation_data=(np.array(vectorized_validation1), np.array(y_validation_neralnet)))\npredict1= model1.predict(np.array(vectorized_validation1))\n</code></pre>\n\n<p>I have this same code for model2 neural network trained on feature2 dataset and so on. \nAnd in the end, I took the average of the predictions. </p>\n\n<p>Here is my question: prediction from neural network gives an elementary vector and not a probability. So taking the average of the predictions is going to return a vector of 1s and 0s. How can I change so that I actually get a probability of being one of the 20 classes for each prediction?</p>\n\n<p>Is my method good to try?</p>\n\n<p>can you give me sone reference?</p>\n"}, {"tags": ["python", "for-loop", "integer"], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 12211700, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAEJjbGEbBJ3VEedN_J38lCTkcTEuADcYJkPikE=k-s128", "display_name": "snk", "link": "https://stackoverflow.com/users/12211700/snk"}, "edited": false, "score": 0, "creation_date": 1573516813, "post_id": 58740136, "comment_id": 103899912, "body": "Since ((len(n)/2)-0.5) is supposed to find the middle character, wouldnt the logical thing to do would be making an if statement where it would return True if ((len(n)/2)-0.5) == 0? for some reason I get an &quot;None&quot; returned."}, {"owner": {"reputation": 499, "user_id": 5893957, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/a69416e79406914fafe6bebdf90712b3?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisFNZ", "link": "https://stackoverflow.com/users/5893957/chrisfnz"}, "reply_to_user": {"reputation": 85, "user_id": 12211700, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAEJjbGEbBJ3VEedN_J38lCTkcTEuADcYJkPikE=k-s128", "display_name": "snk", "link": "https://stackoverflow.com/users/12211700/snk"}, "edited": false, "score": 0, "creation_date": 1573760068, "post_id": 58740136, "comment_id": 103999556, "body": "@FarhanIqbal That&#39;s an alternative way of handling what my second bulletpoint item covers."}], "tags": [], "owner": {"reputation": 499, "user_id": 5893957, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/a69416e79406914fafe6bebdf90712b3?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisFNZ", "link": "https://stackoverflow.com/users/5893957/chrisfnz"}, "is_accepted": false, "score": 3, "last_activity_date": 1573085006, "creation_date": 1573085006, "answer_id": 58740136, "question_id": 58740103, "link": "https://stackoverflow.com/questions/58740103/how-to-find-out-if-a-specific-digit-is-in-the-middle-of-an-integer-value/58740136#58740136", "title": "How to find out if a specific digit is in the middle of an integer value?", "body": "<p>I'll provide a response in the form of an algorithm:</p>\n\n<ul>\n<li>Convert the number to a string</li>\n<li>Detect whether the string has an even or odd number of characters (because even numbered strings don't have a single \"middle\" character)</li>\n<li>Look at the middle character which is character # (len(str)/2)-0.5</li>\n<li>That's your middle character</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 85, "user_id": 12211700, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAEJjbGEbBJ3VEedN_J38lCTkcTEuADcYJkPikE=k-s128", "display_name": "snk", "link": "https://stackoverflow.com/users/12211700/snk"}, "edited": false, "score": 0, "creation_date": 1573662135, "post_id": 58740284, "comment_id": 103956840, "body": "Hey Vishwan, Thank you for the reply but for some reason whenever I try to run the code it gives me an error which says:    if(n[len(n+1)/2]==0): (len(str)/2)-0.5) == 0):TypeError: object of type &#39;int&#39; ha s no len()s no len()"}], "tags": [], "owner": {"reputation": 31, "user_id": 12334796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kfSw5.jpg?s=128&g=1", "display_name": "Vishwam Pandya", "link": "https://stackoverflow.com/users/12334796/vishwam-pandya"}, "is_accepted": false, "score": 0, "last_activity_date": 1573713268, "last_edit_date": 1573713268, "creation_date": 1573086277, "answer_id": 58740284, "question_id": 58740103, "link": "https://stackoverflow.com/questions/58740103/how-to-find-out-if-a-specific-digit-is-in-the-middle-of-an-integer-value/58740284#58740284", "title": "How to find out if a specific digit is in the middle of an integer value?", "body": "<p>This code will work for an input n.  </p>\n\n<pre><code>n = str(n)\nif(len(n)%2==0): #Checks if even\n    if(n[len(n)/2]==0): #Checks for presence of 0\n        return True\nelse:\n    if(n[len(n+1)/2]==0): #Checks for presence of 0\n        return True\n</code></pre>\n"}], "owner": {"reputation": 85, "user_id": 12211700, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAEJjbGEbBJ3VEedN_J38lCTkcTEuADcYJkPikE=k-s128", "display_name": "snk", "link": "https://stackoverflow.com/users/12211700/snk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1573713268, "creation_date": 1573084708, "last_edit_date": 1573085003, "question_id": 58740103, "link": "https://stackoverflow.com/questions/58740103/how-to-find-out-if-a-specific-digit-is-in-the-middle-of-an-integer-value", "title": "How to find out if a specific digit is in the middle of an integer value?", "body": "<p>Homework question is asking me to write a program that would output True if an integer is odd and has the number \"0\" in the middle of it. I figured out how to get it to print True if a number is odd but can't figure out how to detect if the number 0 is in the middle.</p>\n\n<p>I've figured out the first condition which would be detecting if it's odd. </p>\n\n<pre><code>input:\n  def is_cyclops(n):\n    if len(str (n)) % 2 != 0:\n      return True\n    return False\n  print (is_cyclops(11011))\noutput:\nTrue\n</code></pre>\n\n<p>I want to know how to get the code to detect the number 0 in the middle.</p>\n"}, {"tags": ["python", "python-3.x", "pandas", "numpy", "csv"], "comments": [{"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1573084850, "post_id": 58740091, "comment_id": 103770116, "body": "Prepend a path instead of chdiring"}], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 9513405, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-lQJsIXhp_00/AAAAAAAAAAI/AAAAAAAAMak/LgQLrrcNQCE/photo.jpg?sz=128", "display_name": "Ali Ajaz", "link": "https://stackoverflow.com/users/9513405/ali-ajaz"}, "edited": false, "score": 0, "creation_date": 1573141688, "post_id": 58740217, "comment_id": 103792718, "body": "Hey Rajith, Thanks for the help. This code works perfectly fine."}, {"owner": {"reputation": 3053, "user_id": 5828160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f1bce66871c9b17ac7d152e59e8f3a7?s=128&d=identicon&r=PG", "display_name": "Rajith Thennakoon", "link": "https://stackoverflow.com/users/5828160/rajith-thennakoon"}, "reply_to_user": {"reputation": 39, "user_id": 9513405, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-lQJsIXhp_00/AAAAAAAAAAI/AAAAAAAAMak/LgQLrrcNQCE/photo.jpg?sz=128", "display_name": "Ali Ajaz", "link": "https://stackoverflow.com/users/9513405/ali-ajaz"}, "edited": false, "score": 0, "creation_date": 1573171206, "post_id": 58740217, "comment_id": 103804696, "body": "great,happy coding"}], "tags": [], "owner": {"reputation": 3053, "user_id": 5828160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f1bce66871c9b17ac7d152e59e8f3a7?s=128&d=identicon&r=PG", "display_name": "Rajith Thennakoon", "link": "https://stackoverflow.com/users/5828160/rajith-thennakoon"}, "is_accepted": true, "score": 1, "last_activity_date": 1573085710, "creation_date": 1573085710, "answer_id": 58740217, "question_id": 58740091, "link": "https://stackoverflow.com/questions/58740091/iterate-a-script-over-multiple-folders-in-master-folder/58740217#58740217", "title": "Iterate a script over multiple folders in master folder", "body": "<p>Try this</p>\n\n<pre><code>import os\nimport pandas as pd\nimport numpy as np\nimport csv\n\nmaster_path = '&lt;master dir path&gt;'\nsubfolders = list(filter(lambda x: os.path.isdir(os.path.join(master_path, x)), os.listdir(master_path)))\nfor folder in subfolders:\n\n    ppt = pd.read_csv(f\"{master_path}/{folder}/ppt.csv\")\n    et = pd.read_csv(f\"{master_path}/{folder}/et.csv\")\n    tmx = pd.read_csv(f\"{master_path}/{folder}/tmax.csv\")\n    weather_SIM = pd.read_csv(f\"{master_path}/{folder}/Weather_SIM1.csv\")\n\n    big_frame = pd.concat([weather_SIM, ppt,et,tmx], axis=1)\n\n    np.savetxt(f\"{master_path}/{folder}/Weather.txt\", big_frame, fmt= \"%0.0f\\t %0.0f\\t %0.0f\\t %0.1f\\t %0.1f\\t %0.1f\", header='Year\\t Month\\t Date\\t ppt\\t et\\t tmax', comments='')\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 9513405, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-lQJsIXhp_00/AAAAAAAAAAI/AAAAAAAAMak/LgQLrrcNQCE/photo.jpg?sz=128", "display_name": "Ali Ajaz", "link": "https://stackoverflow.com/users/9513405/ali-ajaz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "accepted_answer_id": 58740217, "answer_count": 1, "score": 0, "last_activity_date": 1573085710, "creation_date": 1573084636, "question_id": 58740091, "link": "https://stackoverflow.com/questions/58740091/iterate-a-script-over-multiple-folders-in-master-folder", "title": "Iterate a script over multiple folders in master folder", "body": "<p>I have written a script that extracts columns from multiple csv files (staying in a folder named SIM1) and saves them in a txt file. Now, I need to iterate this script over multiple folders (SIM2, SIM3, SIM4,...). All of these SIM folders are in one master folder. I will really appreciate if I can get help on iteration? (I am using Python 3.7)</p>\n\n<pre><code>    import os\n    import pandas as pd\n    import numpy as np\n    import csv\n\n    os.chdir(r'D:\\GRIDS\\SIM1')\n\n    ppt = pd.read_csv(\"ppt.csv\")\n    et = pd.read_csv(\"et.csv\")\n    tmx = pd.read_csv(\"tmax.csv\")\n    weather_SIM = pd.read_csv(\"Weather_SIM1.csv\")\n\n    big_frame = pd.concat([weather_SIM, ppt,et,tmx], axis=1)\n\n    np.savetxt('Weather.txt', big_frame, fmt= \"%0.0f\\t %0.0f\\t %0.0f\\t %0.1f\\t %0.1f\\t %0.1f\", header='Year\\t Month\\t Date\\t ppt\\t et\\t tmax', comments='')\n</code></pre>\n"}, {"tags": ["python", "numpy", "autograd"], "answers": [{"tags": [], "owner": {"reputation": 808, "user_id": 3769033, "user_type": "registered", "accept_rate": 56, "profile_image": "https://graph.facebook.com/100006135939851/picture?type=large", "display_name": "JoshuaF", "link": "https://stackoverflow.com/users/3769033/joshuaf"}, "is_accepted": true, "score": 0, "last_activity_date": 1573085123, "creation_date": 1573085123, "answer_id": 58740149, "question_id": 58740084, "link": "https://stackoverflow.com/questions/58740084/autograd-breaks-np-empty-like/58740149#58740149", "title": "Autograd breaks np.empty_like", "body": "<p>Based on the tutorial <a href=\"https://github.com/HIPS/autograd/blob/master/docs/tutorial.md\" rel=\"nofollow noreferrer\">https://github.com/HIPS/autograd/blob/master/docs/tutorial.md</a>, it looks like array assignment is unfortunately not supported in autograd functions. </p>\n"}], "owner": {"reputation": 808, "user_id": 3769033, "user_type": "registered", "accept_rate": 56, "profile_image": "https://graph.facebook.com/100006135939851/picture?type=large", "display_name": "JoshuaF", "link": "https://stackoverflow.com/users/3769033/joshuaf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 0, "accepted_answer_id": 58740149, "answer_count": 1, "score": 0, "last_activity_date": 1573085123, "creation_date": 1573084590, "question_id": 58740084, "link": "https://stackoverflow.com/questions/58740084/autograd-breaks-np-empty-like", "title": "Autograd breaks np.empty_like", "body": "<p>I'm trying to take the gradient of a function in which I assign numpy array elements individually (assigning local forces to a global force vector in an FEA), but this appears to break Autograd -- if I use <code>np.zeros</code> for the global array I get <code>ValueError: setting an array element with a sequence</code>, while if I use <code>np.empty</code> I get <code>NotImplementedError: VJP of empty_like wrt argnums (0,) not defined</code>.</p>\n\n<p>Example:</p>\n\n<pre><code>import autograd.numpy as np\nfrom autograd import jacobian, grad\n\ndef test(input):\n    a = np.empty_like(input)\n    a[:] = input[:]\n\ngrad(test)(np.array([0.]))\n</code></pre>\n\n<p>Gives the error:</p>\n\n<pre><code>C:\\Miniconda3\\python.exe C:/Users/JoshuaF/Desktop/gripper/softDrone/bug_test.py\nTraceback (most recent call last):\n  File \"C:\\Miniconda3\\lib\\site-packages\\autograd\\core.py\", line 31, in __init__\n    vjpmaker = primitive_vjps[fun]\nKeyError: &lt;function primitive.&lt;locals&gt;.f_wrapped at 0x000001AB1D0AA8C8&gt;\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"C:/Users/JoshuaF/Desktop/gripper/softDrone/bug_test.py\", line 8, in &lt;module&gt;\n    grad(test)(np.array([0.]))\n  File \"C:\\Miniconda3\\lib\\site-packages\\autograd\\wrap_util.py\", line 20, in nary_f\n    return unary_operator(unary_f, x, *nary_op_args, **nary_op_kwargs)\n  File \"C:\\Miniconda3\\lib\\site-packages\\autograd\\differential_operators.py\", line 25, in grad\n    vjp, ans = _make_vjp(fun, x)\n  File \"C:\\Miniconda3\\lib\\site-packages\\autograd\\core.py\", line 10, in make_vjp\n    end_value, end_node =  trace(start_node, fun, x)\n  File \"C:\\Miniconda3\\lib\\site-packages\\autograd\\tracer.py\", line 10, in trace\n    end_box = fun(start_box)\n  File \"C:\\Miniconda3\\lib\\site-packages\\autograd\\wrap_util.py\", line 15, in unary_f\n    return fun(*subargs, **kwargs)\n  File \"C:/Users/JoshuaF/Desktop/gripper/softDrone/bug_test.py\", line 5, in test\n    a = np.empty_like(input)\n  File \"C:\\Miniconda3\\lib\\site-packages\\autograd\\tracer.py\", line 45, in f_wrapped\n    node = node_constructor(ans, f_wrapped, argvals, kwargs, argnums, parents)\n  File \"C:\\Miniconda3\\lib\\site-packages\\autograd\\core.py\", line 35, in __init__\n    .format(fun_name, parent_argnums))\nNotImplementedError: VJP of empty_like wrt argnums (0,) not defined\n</code></pre>\n\n<p>Is there any way to use Autograd on a numpy array which is assembled element-wise?</p>\n"}, {"tags": ["python", "tensorflow", "module"], "comments": [{"owner": {"reputation": 17762, "user_id": 548562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26587173d9156d8ec3114c8700d1b693?s=128&d=identicon&r=PG", "display_name": "Iain Shelvington", "link": "https://stackoverflow.com/users/548562/iain-shelvington"}, "edited": false, "score": 0, "creation_date": 1573084642, "post_id": 58740068, "comment_id": 103770064, "body": "Have you installed the package(s)?"}, {"owner": {"reputation": 85, "user_id": 12068687, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAWkSr4ZxKVYnt_zFnR4Kk5rJDbqWtptLN8xuNoYw=k-s128", "display_name": "Khosraw Azizi", "link": "https://stackoverflow.com/users/12068687/khosraw-azizi"}, "reply_to_user": {"reputation": 17762, "user_id": 548562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26587173d9156d8ec3114c8700d1b693?s=128&d=identicon&r=PG", "display_name": "Iain Shelvington", "link": "https://stackoverflow.com/users/548562/iain-shelvington"}, "edited": false, "score": 0, "creation_date": 1573084737, "post_id": 58740068, "comment_id": 103770091, "body": "Yes, I mentioned that..."}, {"owner": {"reputation": 17762, "user_id": 548562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26587173d9156d8ec3114c8700d1b693?s=128&d=identicon&r=PG", "display_name": "Iain Shelvington", "link": "https://stackoverflow.com/users/548562/iain-shelvington"}, "edited": false, "score": 1, "creation_date": 1573084792, "post_id": 58740068, "comment_id": 103770108, "body": "How did you install them? Are they present in the output of <code>python -m pip freeze</code>?"}, {"owner": {"reputation": 3968, "user_id": 3722635, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e48cb6fc07fdbea551f3895fb1664c45?s=128&d=identicon&r=PG&f=1", "display_name": "wowkin2", "link": "https://stackoverflow.com/users/3722635/wowkin2"}, "edited": false, "score": 0, "creation_date": 1573084965, "post_id": 58740068, "comment_id": 103770149, "body": "@KhosrawAzizi have you installed them using venv or conda or installed it globally for Python?"}, {"owner": {"reputation": 85, "user_id": 12068687, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAWkSr4ZxKVYnt_zFnR4Kk5rJDbqWtptLN8xuNoYw=k-s128", "display_name": "Khosraw Azizi", "link": "https://stackoverflow.com/users/12068687/khosraw-azizi"}, "edited": false, "score": 0, "creation_date": 1573084994, "post_id": 58740068, "comment_id": 103770156, "body": "Yes, I installed them using pip install --pip install --trusted-host pypi.org --trusted-host files.pythonhosted.org pip {package}. Yes, they are all in the output of <code>python -m pip freeze</code>."}, {"owner": {"reputation": 3968, "user_id": 3722635, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e48cb6fc07fdbea551f3895fb1664c45?s=128&d=identicon&r=PG&f=1", "display_name": "wowkin2", "link": "https://stackoverflow.com/users/3722635/wowkin2"}, "edited": false, "score": 0, "creation_date": 1573085025, "post_id": 58740068, "comment_id": 103770165, "body": "@KhosrawAzizi Another guess is - try to rename file from <code>tensorflow.py</code> to something other than library name."}, {"owner": {"reputation": 85, "user_id": 12068687, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAWkSr4ZxKVYnt_zFnR4Kk5rJDbqWtptLN8xuNoYw=k-s128", "display_name": "Khosraw Azizi", "link": "https://stackoverflow.com/users/12068687/khosraw-azizi"}, "edited": false, "score": 0, "creation_date": 1573085043, "post_id": 58740068, "comment_id": 103770173, "body": "I am not sure if I have installed them globally. I don&#39;t know how you even do that. I did not use venv."}, {"owner": {"reputation": 85, "user_id": 12068687, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAWkSr4ZxKVYnt_zFnR4Kk5rJDbqWtptLN8xuNoYw=k-s128", "display_name": "Khosraw Azizi", "link": "https://stackoverflow.com/users/12068687/khosraw-azizi"}, "reply_to_user": {"reputation": 3968, "user_id": 3722635, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e48cb6fc07fdbea551f3895fb1664c45?s=128&d=identicon&r=PG&f=1", "display_name": "wowkin2", "link": "https://stackoverflow.com/users/3722635/wowkin2"}, "edited": false, "score": 0, "creation_date": 1573085345, "post_id": 58740068, "comment_id": 103770228, "body": "I changed the file name to helloworld and ran it. It gave me the output of ``` Traceback (most recent call last):   File &quot;helloworld.py&quot;, line 1, in &lt;module&gt;     import tensorflow as tf ModuleNotFoundError: No module named &#39;tensorflow&#39; ``` @wowkin2"}, {"owner": {"reputation": 559, "user_id": 12322064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/23a8u.jpg?s=128&g=1", "display_name": "ufoxDan", "link": "https://stackoverflow.com/users/12322064/ufoxdan"}, "edited": false, "score": 0, "creation_date": 1573086149, "post_id": 58740068, "comment_id": 103770395, "body": "Do you have multiple versions of python installed? I&#39;ve had problems with pip referring to a different version of python than the one I am running. Looks like you are on Windows, are you running from powershell?"}, {"owner": {"reputation": 85, "user_id": 12068687, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAWkSr4ZxKVYnt_zFnR4Kk5rJDbqWtptLN8xuNoYw=k-s128", "display_name": "Khosraw Azizi", "link": "https://stackoverflow.com/users/12068687/khosraw-azizi"}, "reply_to_user": {"reputation": 559, "user_id": 12322064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/23a8u.jpg?s=128&g=1", "display_name": "ufoxDan", "link": "https://stackoverflow.com/users/12322064/ufoxdan"}, "edited": false, "score": 0, "creation_date": 1573086809, "post_id": 58740068, "comment_id": 103770547, "body": "I am running from command prompt. I installed the latest version of Python and I uninstalled everything from the previous version. @ufoxDan"}, {"owner": {"reputation": 559, "user_id": 12322064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/23a8u.jpg?s=128&g=1", "display_name": "ufoxDan", "link": "https://stackoverflow.com/users/12322064/ufoxdan"}, "edited": false, "score": 0, "creation_date": 1573087003, "post_id": 58740068, "comment_id": 103770583, "body": "What is the ouptut of <code>where python</code> and <code>where pip</code>?"}, {"owner": {"reputation": 85, "user_id": 12068687, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAWkSr4ZxKVYnt_zFnR4Kk5rJDbqWtptLN8xuNoYw=k-s128", "display_name": "Khosraw Azizi", "link": "https://stackoverflow.com/users/12068687/khosraw-azizi"}, "reply_to_user": {"reputation": 559, "user_id": 12322064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/23a8u.jpg?s=128&g=1", "display_name": "ufoxDan", "link": "https://stackoverflow.com/users/12322064/ufoxdan"}, "edited": false, "score": 0, "creation_date": 1573087430, "post_id": 58740068, "comment_id": 103770691, "body": "@ufoxDan For where python : ``` C:\\Users\\Khosr\\AppData\\Local\\Programs\\Python\\Python37-32\\pyt&zwnj;&#8203;hon.exe ``` For where pip: ``` C:\\Users\\Khosr\\AppData\\Local\\Programs\\Python\\Python37\\Script&zwnj;&#8203;s\\pip.exe C:\\Users\\Khosr\\AppData\\Local\\Programs\\Python\\Python37-32\\Scr&zwnj;&#8203;ipts\\pip.exe ```"}], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 12068687, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAWkSr4ZxKVYnt_zFnR4Kk5rJDbqWtptLN8xuNoYw=k-s128", "display_name": "Khosraw Azizi", "link": "https://stackoverflow.com/users/12068687/khosraw-azizi"}, "edited": false, "score": 0, "creation_date": 1573090143, "post_id": 58740475, "comment_id": 103771239, "body": "I fixed it, never mind. I selected edit on the Path but there is no Python37 only Python37-32"}, {"owner": {"reputation": 85, "user_id": 12068687, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAWkSr4ZxKVYnt_zFnR4Kk5rJDbqWtptLN8xuNoYw=k-s128", "display_name": "Khosraw Azizi", "link": "https://stackoverflow.com/users/12068687/khosraw-azizi"}, "edited": false, "score": 0, "creation_date": 1573091804, "post_id": 58740475, "comment_id": 103771598, "body": "I uninstalled Python37 and used Python37-32 but I still get the error."}, {"owner": {"reputation": 559, "user_id": 12322064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/23a8u.jpg?s=128&g=1", "display_name": "ufoxDan", "link": "https://stackoverflow.com/users/12322064/ufoxdan"}, "reply_to_user": {"reputation": 85, "user_id": 12068687, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAWkSr4ZxKVYnt_zFnR4Kk5rJDbqWtptLN8xuNoYw=k-s128", "display_name": "Khosraw Azizi", "link": "https://stackoverflow.com/users/12068687/khosraw-azizi"}, "edited": false, "score": 0, "creation_date": 1573091995, "post_id": 58740475, "comment_id": 103771628, "body": "Can you try using <code>where</code> on pip and python again? If it shows pip in two places still then share a screenshot of your PATH variables because it would be in there somewhere."}, {"owner": {"reputation": 85, "user_id": 12068687, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAWkSr4ZxKVYnt_zFnR4Kk5rJDbqWtptLN8xuNoYw=k-s128", "display_name": "Khosraw Azizi", "link": "https://stackoverflow.com/users/12068687/khosraw-azizi"}, "edited": false, "score": 0, "creation_date": 1573166263, "post_id": 58740475, "comment_id": 103803426, "body": "``` C:\\Users\\Khosr\\AppData\\Local\\Programs\\Python\\Python37-32\\Scr&zwnj;&#8203;ipts\\pip.exe ```"}], "tags": [], "owner": {"reputation": 559, "user_id": 12322064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/23a8u.jpg?s=128&g=1", "display_name": "ufoxDan", "link": "https://stackoverflow.com/users/12322064/ufoxdan"}, "is_accepted": false, "score": 0, "last_activity_date": 1573087931, "creation_date": 1573087931, "answer_id": 58740475, "question_id": 58740068, "link": "https://stackoverflow.com/questions/58740068/how-do-i-import-packages-and-modules-in-python-without-any-errors/58740475#58740475", "title": "How do I import packages and modules in Python without any errors?", "body": "<p>Since your <code>where</code> is showing a pip in /Python37 first and your python is in /Python37-32 your calls to pip and python are not the same python version. You can remove the Python37 folder from your PATH to fix this.</p>\n\n<p>Go to Start Menu and search \"Change system environment variable\", select edit variable or something of the like and then remove the other python folder from your PATH variables. You will have to reopen cmd after this is done.</p>\n"}], "owner": {"reputation": 85, "user_id": 12068687, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAWkSr4ZxKVYnt_zFnR4Kk5rJDbqWtptLN8xuNoYw=k-s128", "display_name": "Khosraw Azizi", "link": "https://stackoverflow.com/users/12068687/khosraw-azizi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1573087931, "creation_date": 1573084441, "question_id": 58740068, "link": "https://stackoverflow.com/questions/58740068/how-do-i-import-packages-and-modules-in-python-without-any-errors", "title": "How do I import packages and modules in Python without any errors?", "body": "<p>I am trying to import tensorflow, matplotlib, numpy, and keras. When I try to do this I get an error saying that the module does not exist.</p>\n\n<p>I have tried installing the latest version of everything as well as reinstalling them. </p>\n\n<pre><code>import tensorflow as tf \nfrom tensorflow import keras\nimport numpy as np\nimport matplotlib.pyplot as plt \n\ndata = keras.dataset_fashion_mnist\n\n(train_images, train_labels), (test_images, test_labels) = data.data_load()\n\nprint(train_labels[1])\n</code></pre>\n\n<p>I expect the output to be a number between 1 and 10.</p>\n\n<p>There might be an error such as:</p>\n\n<pre><code>C:\\Users\\admin\\Desktop&gt;python \"tensorflow.py\"\nTraceback (most recent call last):\n  File \"tensorflow.py\", line 2, in &lt;module&gt;\n    import matplotlib.pyplot as plt\nModuleNotFoundError: No module named 'matplotlib'\n</code></pre>\n\n<p>Note that this is not the only module that is having issues. Same thing happens with numpy and tensorflow.</p>\n"}, {"tags": ["python", "anaconda", "environment-variables"], "comments": [{"owner": {"reputation": 1219, "user_id": 11547576, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8YD74.jpg?s=128&g=1", "display_name": "neutrino_logic", "link": "https://stackoverflow.com/users/11547576/neutrino-logic"}, "edited": false, "score": 1, "creation_date": 1573084778, "post_id": 58740049, "comment_id": 103770104, "body": "What system are you on? Windows cmd?  Linux bash? Is Powershell an option?"}, {"owner": {"reputation": 11, "user_id": 9062793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69734ebd79b38a6cca381fbd639fffab?s=128&d=identicon&r=PG&f=1", "display_name": "Gmuersch", "link": "https://stackoverflow.com/users/9062793/gmuersch"}, "reply_to_user": {"reputation": 1219, "user_id": 11547576, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8YD74.jpg?s=128&g=1", "display_name": "neutrino_logic", "link": "https://stackoverflow.com/users/11547576/neutrino-logic"}, "edited": false, "score": 0, "creation_date": 1573084878, "post_id": 58740049, "comment_id": 103770124, "body": "oops I am using windows 10"}, {"owner": {"reputation": 38630, "user_id": 1324033, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/PaonW.png?s=128&g=1", "display_name": "Sayse", "link": "https://stackoverflow.com/users/1324033/sayse"}, "edited": false, "score": 0, "creation_date": 1573085401, "post_id": 58740049, "comment_id": 103770240, "body": "That&#39;s how virtual environments work, they&#39;re not supposed to replace your local python, that&#39;s the whole point"}, {"owner": {"reputation": 1219, "user_id": 11547576, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8YD74.jpg?s=128&g=1", "display_name": "neutrino_logic", "link": "https://stackoverflow.com/users/11547576/neutrino-logic"}, "edited": false, "score": 0, "creation_date": 1573085414, "post_id": 58740049, "comment_id": 103770246, "body": "Well it&#39;s pretty easy if you use Powershell rather than cmd.  You can edit the $profile variable and put in the line <code>conda activate myenv</code> .  <a href=\"https://superuser.com/a/886960\">superuser.com/a/886960</a>  Otherwise if you use cmd you have to mess about with registry keys <a href=\"https://stackoverflow.com/questions/17404165/how-to-run-a-command-on-command-prompt-startup-in-windows\" title=\"how to run a command on command prompt startup in windows\">stackoverflow.com/questions/17404165/&hellip;</a>"}, {"owner": {"reputation": 1219, "user_id": 11547576, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8YD74.jpg?s=128&g=1", "display_name": "neutrino_logic", "link": "https://stackoverflow.com/users/11547576/neutrino-logic"}, "reply_to_user": {"reputation": 38630, "user_id": 1324033, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/PaonW.png?s=128&g=1", "display_name": "Sayse", "link": "https://stackoverflow.com/users/1324033/sayse"}, "edited": false, "score": 0, "creation_date": 1573085544, "post_id": 58740049, "comment_id": 103770269, "body": "@Sayse true enough but if you mostly work in one virtual env its convenient to activate it every time you open a new window, then just deactivate it as needed."}, {"owner": {"reputation": 11, "user_id": 9062793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69734ebd79b38a6cca381fbd639fffab?s=128&d=identicon&r=PG&f=1", "display_name": "Gmuersch", "link": "https://stackoverflow.com/users/9062793/gmuersch"}, "edited": false, "score": 0, "creation_date": 1573086531, "post_id": 58740049, "comment_id": 103770495, "body": "I just dont get why I cant use any packages with sublime even though everything is set up. I never had to activate my environment every time before"}, {"owner": {"reputation": 41290, "user_id": 570918, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/27ce5101af57acecf9a5fe563b6192b1?s=128&d=identicon&r=PG", "display_name": "merv", "link": "https://stackoverflow.com/users/570918/merv"}, "edited": false, "score": 0, "creation_date": 1573144045, "post_id": 58740049, "comment_id": 103794099, "body": "Don&#39;t manipulate <code>PATH</code>, but instead use <code>conda init</code> to configure your shell. Duplicate: <a href=\"https://stackoverflow.com/questions/18675907/how-to-run-conda\">How to run Conda?</a>, specifically <a href=\"https://stackoverflow.com/a/55526573/570918\">this answer</a> has the latest best practice."}], "owner": {"reputation": 11, "user_id": 9062793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69734ebd79b38a6cca381fbd639fffab?s=128&d=identicon&r=PG&f=1", "display_name": "Gmuersch", "link": "https://stackoverflow.com/users/9062793/gmuersch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 75, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1573119379, "creation_date": 1573084262, "last_edit_date": 1573119379, "question_id": 58740049, "link": "https://stackoverflow.com/questions/58740049/need-to-activate-myenv-every-time-i-use-python-in-order-to-use-packages", "title": "need to activate myenv every time I use python in order to use packages", "body": "<p>I had an issue with my anaconda and I had to reinstalled it. I set the path to my environment variable and installed everything correctly but every time I open cmd and type 'python' I get a warning to activate my environment. </p>\n\n<p>I can still use base python despite the warning but I cant import any packages at all, if I try I get the module not found error. </p>\n\n<p>So I type the command \"activate \" and then I can enter python and I can use all my packages just fine. The problem is that I have to type \"activate \" every time I open a new cmd or the old issue keeps appearing. </p>\n\n<p>Also when I write any code in my sublime text editor I cannot use any packages at all, just the base python. It seems my environment is not getting activated unless I type in the command, but then it goes away each cmd session and I cant use sublime text with any packages.  </p>\n\n<p>Does anyone have any idea why this is?  I have spent most of the day trying to get this to work</p>\n"}, {"tags": ["python", "sqlalchemy"], "comments": [{"owner": {"reputation": 6911, "user_id": 6560549, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8OQgD.jpg?s=128&g=1", "display_name": "SuperShoot", "link": "https://stackoverflow.com/users/6560549/supershoot"}, "edited": false, "score": 0, "creation_date": 1573085314, "post_id": 58740043, "comment_id": 103770216, "body": "Related: <a href=\"https://stackoverflow.com/questions/56044922/how-to-access-psycopg2-error-wrapped-in-sqlalchemy-error/56050741#56050741\" title=\"how to access psycopg2 error wrapped in sqlalchemy error\">stackoverflow.com/questions/56044922/&hellip;</a>"}, {"owner": {"reputation": 6911, "user_id": 6560549, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8OQgD.jpg?s=128&g=1", "display_name": "SuperShoot", "link": "https://stackoverflow.com/users/6560549/supershoot"}, "edited": false, "score": 0, "creation_date": 1573085469, "post_id": 58740043, "comment_id": 103770258, "body": "Sqlalchemy wraps the underlying dbapi error, so you need to catch the sqlalchemy error, not the dbapi one, then you can inspect the original error through the SQLAlchemy one."}, {"owner": {"reputation": 6911, "user_id": 6560549, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8OQgD.jpg?s=128&g=1", "display_name": "SuperShoot", "link": "https://stackoverflow.com/users/6560549/supershoot"}, "edited": false, "score": 0, "creation_date": 1573085713, "post_id": 58740043, "comment_id": 103770309, "body": "Also I answered this recently which is related: <a href=\"https://stackoverflow.com/a/57766555/6560549\">stackoverflow.com/a/57766555/6560549</a>"}, {"owner": {"reputation": 3806, "user_id": 274030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fd910b4f7c7baabc22976dc6b29b744?s=128&d=identicon&r=PG", "display_name": "Everett", "link": "https://stackoverflow.com/users/274030/everett"}, "reply_to_user": {"reputation": 6911, "user_id": 6560549, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8OQgD.jpg?s=128&g=1", "display_name": "SuperShoot", "link": "https://stackoverflow.com/users/6560549/supershoot"}, "edited": false, "score": 0, "creation_date": 1573104130, "post_id": 58740043, "comment_id": 103774018, "body": "Thanks.  I am, however, still very unclear on how to identify the classname of the original exception I&#39;m attempting to trap.  Is Googling the psycopg2 docs the only way to figure out what exception was thrown? Why isn&#39;t this more transparent in Python?"}, {"owner": {"reputation": 6911, "user_id": 6560549, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8OQgD.jpg?s=128&g=1", "display_name": "SuperShoot", "link": "https://stackoverflow.com/users/6560549/supershoot"}, "edited": false, "score": 0, "creation_date": 1573109563, "post_id": 58740043, "comment_id": 103775750, "body": "Have done my best to explain in below answer, happy to elaborate on any points there, just ask in the comments."}], "answers": [{"tags": [], "owner": {"reputation": 416, "user_id": 2390269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d80641e2edac30d5c84e24e94bd1a22?s=128&d=identicon&r=PG", "display_name": "jayg_code", "link": "https://stackoverflow.com/users/2390269/jayg-code"}, "is_accepted": false, "score": 7, "last_activity_date": 1573084964, "creation_date": 1573084964, "answer_id": 58740133, "question_id": 58740043, "link": "https://stackoverflow.com/questions/58740043/how-do-i-catch-a-psycopg2-errors-uniqueviolation-error-in-a-python-flask-app/58740133#58740133", "title": "How do I catch a psycopg2.errors.UniqueViolation error in a Python (Flask) app?", "body": "<p>According to psycopg2 <a href=\"http://initd.org/psycopg/docs/module.html#dbapi-exceptions\" rel=\"noreferrer\">docs</a>:</p>\n\n<blockquote>\n  <p>In compliance with the DB API 2.0, the module makes informations about errors available through the following exceptions:</p>\n  \n  <p><strong>exception psycopg2.Error</strong></p>\n  \n  <p>Exception that is the base class of all other error exceptions. You can use this to catch all errors with one single except statement. Warnings are not considered errors and thus not use this class as base. It is a subclass of the Python StandardError (Exception on Python 3).</p>\n</blockquote>\n\n<p>Thus, the proper way to catch the exceptions is:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>try:\n    # your stuff here\nexcept psycopg2.Error as e:\n    # get error code\n    error = e.pgcode\n    # then do something.\n</code></pre>\n\n<p>Yours in particular is error 23505 according to the <a href=\"https://www.postgresql.org/docs/current/errcodes-appendix.html#ERRCODES-TABLE\" rel=\"noreferrer\">ErrCodes Table</a></p>\n"}, {"comments": [{"owner": {"reputation": 3806, "user_id": 274030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fd910b4f7c7baabc22976dc6b29b744?s=128&d=identicon&r=PG", "display_name": "Everett", "link": "https://stackoverflow.com/users/274030/everett"}, "edited": false, "score": 2, "creation_date": 1573154346, "post_id": 58743364, "comment_id": 103798832, "body": "Yikes, that omission wasn&#39;t on purpose -- for some reason, I&#39;m not seeing <code>sqlalchemy.exc.IntegrityError</code> in my logs which makes me wonder what our custom logger is doing."}, {"owner": {"reputation": 184, "user_id": 1318346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d977b1e5d83c66ac6663890059b8168b?s=128&d=identicon&r=PG", "display_name": "Jared Beekman", "link": "https://stackoverflow.com/users/1318346/jared-beekman"}, "edited": false, "score": 8, "creation_date": 1580076537, "post_id": 58743364, "comment_id": 105969554, "body": "That&#39;s because it probably wasn&#39;t there just like mine. People on the internet just love assuming malice though."}, {"owner": {"reputation": 597, "user_id": 4058635, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22705258eece2e8b87be01f8582e3b9d?s=128&d=identicon&r=PG&f=1", "display_name": "Jwely", "link": "https://stackoverflow.com/users/4058635/jwely"}, "edited": false, "score": 0, "creation_date": 1599057955, "post_id": 58743364, "comment_id": 112656925, "body": "The following import statement does not work. <code>from psycopg2.errors import UniqueViolation</code>."}, {"owner": {"reputation": 6911, "user_id": 6560549, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8OQgD.jpg?s=128&g=1", "display_name": "SuperShoot", "link": "https://stackoverflow.com/users/6560549/supershoot"}, "reply_to_user": {"reputation": 597, "user_id": 4058635, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22705258eece2e8b87be01f8582e3b9d?s=128&d=identicon&r=PG&f=1", "display_name": "Jwely", "link": "https://stackoverflow.com/users/4058635/jwely"}, "edited": false, "score": 0, "creation_date": 1599090344, "post_id": 58743364, "comment_id": 112668897, "body": "@Jwely Yes, it does. I just tested on latest PyPI version (2.8.5)."}, {"owner": {"reputation": 597, "user_id": 4058635, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22705258eece2e8b87be01f8582e3b9d?s=128&d=identicon&r=PG&f=1", "display_name": "Jwely", "link": "https://stackoverflow.com/users/4058635/jwely"}, "edited": false, "score": 0, "creation_date": 1599582631, "post_id": 58743364, "comment_id": 112815400, "body": "@SuperShoot. There is clearly some environmental issue. On two different environments installed from the same requirements, one allows the import and the other does not. Identical versions of python, psycopg2, and postgres. I&#39;ll dig deeper into it to add more  useful information, may open a new question."}], "tags": [], "owner": {"reputation": 6911, "user_id": 6560549, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8OQgD.jpg?s=128&g=1", "display_name": "SuperShoot", "link": "https://stackoverflow.com/users/6560549/supershoot"}, "is_accepted": false, "score": 20, "last_activity_date": 1573115721, "last_edit_date": 1573115721, "creation_date": 1573109501, "answer_id": 58743364, "question_id": 58740043, "link": "https://stackoverflow.com/questions/58740043/how-do-i-catch-a-psycopg2-errors-uniqueviolation-error-in-a-python-flask-app/58743364#58743364", "title": "How do I catch a psycopg2.errors.UniqueViolation error in a Python (Flask) app?", "body": "<p>The error that you have posted in your question isn't the error that has been raised. The full error message is:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>sqlalchemy.exc.IntegrityError: (psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint \"model_name_key\"\n</code></pre>\n\n<p>The key part being the SQLAlchemy error which you've chosen to omit for some reason. SQLAlchemy catches the original error, wraps it in it's own error and raises that.</p>\n\n<blockquote>\n  <p>but in Python, this is much more obfuscated... Why does Python hide this?</p>\n</blockquote>\n\n<p>This isn't obfuscation, nothing is hidden, the behavior is documented, specific to the frameworks that you are using and is not enforced by the Python language. SQLAlchemy is an abstraction library and if it were to raise exceptions specific to the underlying dpapi adapter, it would significantly reduce the portability of code written within it.</p>\n\n<p>From the <a href=\"https://docs.sqlalchemy.org/en/13/errors.html?highlight=exceptions#dbapi-errors\" rel=\"noreferrer\">docs</a>:</p>\n\n<blockquote>\n  <p>SQLAlchemy does not generate these exceptions directly. Instead, they\n  are intercepted from the database driver and wrapped by the\n  SQLAlchemy-provided exception DBAPIError, however the messaging within\n  the exception is generated by the driver, not SQLAlchemy.</p>\n</blockquote>\n\n<p>Exceptions raised by the dbapi layer are wrapped in a subclass of the <a href=\"https://docs.sqlalchemy.org/en/13/core/exceptions.html?highlight=exceptions#sqlalchemy.exc.DBAPIError\" rel=\"noreferrer\">sqlalchemy.exc.DBAPIError</a>, where it is noted:</p>\n\n<blockquote>\n  <p>The wrapped exception object is available in the <code>orig</code> attribute.</p>\n</blockquote>\n\n<p>So it's very straightforward to catch the SQLAlchemy exception and inspect the original exception, which is an instance of <code>psycopg2.errors.UniqueViolation</code>, as you'd expect. However, unless your error handling is very specific to the type raised by the dbapi layer, I'd suggest that inspecting the underlying type might be unnecessary as the SQLAlchemy exception that is raised will provide enough runtime information to do what you have to do.</p>\n\n<p>Here is an example script that raises a <code>sqlalchemy.exc.IntegrityError</code>, catches it, inspects the underlying exception through the <code>orig</code> attribute and raises an alternate, locally-defined exception.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from sqlalchemy import create_engine, Column, Integer, String\nfrom sqlalchemy.exc import IntegrityError\nfrom sqlalchemy.ext.declarative import declarative_base\nfrom sqlalchemy.orm import sessionmaker\nfrom psycopg2.errors import UniqueViolation\n\n\nengine = create_engine(\"postgresql+psycopg2://some-user:mysecretpassword@localhost:5432/some-user\")\n\nBase = declarative_base()\nSession = sessionmaker(bind=engine)\n\n\nclass BadRequest(Exception):\n    pass\n\n\nclass Model(Base):\n    __tablename__ = \"model\"\n    id = Column(Integer, primary_key=True)\n    name = Column(String, unique=True)\n\n\nif __name__ == \"__main__\":\n    Base.metadata.drop_all(engine)\n    Base.metadata.create_all(engine)\n    s = Session()\n    s.add(Model(name=\"a\"))\n    s.commit()\n    s.add(Model(name=\"a\"))\n    try:\n        s.commit()\n    except IntegrityError as e:\n        assert isinstance(e.orig, UniqueViolation)  # proves the original exception\n        raise BadRequest from e\n</code></pre>\n\n<p>And that raises:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>sqlalchemy.exc.IntegrityError: (psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint \"model_name_key\"\nDETAIL:  Key (name)=(a) already exists.\n\n[SQL: INSERT INTO model (name) VALUES (%(name)s) RETURNING model.id]\n[parameters: {'name': 'a'}]\n(Background on this error at: http://sqlalche.me/e/gkpj)\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \".\\main.py\", line 36, in &lt;module&gt;\n    raise BadRequest from e\n__main__.BadRequest\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 13037883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22ca9098c6b7162f4e0124a3c8acf502?s=128&d=identicon&r=PG&f=1", "display_name": "andrewn", "link": "https://stackoverflow.com/users/13037883/andrewn"}, "is_accepted": false, "score": 0, "last_activity_date": 1616204658, "last_edit_date": 1616204658, "creation_date": 1616062096, "answer_id": 66688884, "question_id": 58740043, "link": "https://stackoverflow.com/questions/58740043/how-do-i-catch-a-psycopg2-errors-uniqueviolation-error-in-a-python-flask-app/66688884#66688884", "title": "How do I catch a psycopg2.errors.UniqueViolation error in a Python (Flask) app?", "body": "<pre class=\"lang-py prettyprint-override\"><code>from db import DbApi\nfrom my_exceptions import BadRequest\nfrom psycopg2 import errors\n\nclass MyClass:\n    def __init__(self):\n        self.db = DbApi() \n\n    def create(self, data: dict) -&gt; MyRecord:\n        try:\n            with self.db.session_local(expire_on_commit=False) as session:\n                my_rec = MyRecord(**data)\n                session.add(my_rec)\n                session.commit()\n                session.refresh(my_rec)\n                return my_rec\n        except errors.lookup(&quot;23505&quot;):\n            raise BadRequest('A duplicate record already exists')\n</code></pre>\n<p>I get a <code>psycopg2.errors.UniqueViolation</code> error. How do I handle it ?</p>\n<p>please refer to <a href=\"https://www.psycopg.org/docs/errors.html\" rel=\"nofollow noreferrer\">https://www.psycopg.org/docs/errors.html</a> for more details about how to handle psycopg2 errors</p>\n"}, {"tags": [], "owner": {"reputation": 1912, "user_id": 13903942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YEj2M.png?s=128&g=1", "display_name": "Federico Ba&#249;", "link": "https://stackoverflow.com/users/13903942/federico-ba%c3%b9"}, "is_accepted": false, "score": 0, "last_activity_date": 1618653626, "creation_date": 1618653626, "answer_id": 67136890, "question_id": 58740043, "link": "https://stackoverflow.com/questions/58740043/how-do-i-catch-a-psycopg2-errors-uniqueviolation-error-in-a-python-flask-app/67136890#67136890", "title": "How do I catch a psycopg2.errors.UniqueViolation error in a Python (Flask) app?", "body": "<p>For a quick reference to <strong>how to import the psycopg2 UniqueViolation</strong> (or any other error)\nwith some quick <em>recipes</em>.</p>\n<h2>1) Import  UniqueViolation</h2>\n<pre><code>   import traceback   # Used for printing the full traceback | Better for debug.\n   from psycopg2 import errors\n\n   UniqueViolation = errors.lookup('23505')  # Correct way to Import the psycopg2 errors\n\n   # ...... Code ....\n\n    try:\n        db.commit()           \n    except UniqueViolation as err:\n        traceback.print_exc()\n        db.rollback()            \n\n    # ...... Code ....\n</code></pre>\n<hr />\n<h2>2) Import  IntegrityError</h2>\n<p>UniqueViolation base-exception is actually IntegrityError , so for a broader error catch\n(for whatever reason, normally is not recommended, but rule are meant to be broken)</p>\n<pre><code>   import traceback   # Used for printing the full traceback | Better for debug.\n   from psycopg2._psycopg import IntegrityError\n\n   # ...... Code ....\n\n    try:\n        db.commit()           \n    except IntegrityError as err:\n        traceback.print_exc()\n        db.rollback()            \n\n    # ...... Code ....\n</code></pre>\n<hr />\n<h2>3) Source Code</h2>\n<p>The <strong>psycopg2</strong> errors module is found here --&gt; <code>/psycopg2/errors.py</code>, and is actually like a <em>gateway</em> for the real error code list.</p>\n<p>Here you can see the function used to call the correct error by given code:</p>\n<pre><code>    #\n    # NOTE: the exceptions are injected into this module by the C extention.\n    #\n    \n    \n    def lookup(code):\n        &quot;&quot;&quot;Lookup an error code and return its exception class.\n    \n        Raise `!KeyError` if the code is not found.\n        &quot;&quot;&quot;\n        from psycopg2._psycopg import sqlstate_errors   # avoid circular import\n        return sqlstate_errors[code]\n</code></pre>\n<p>But the really juicy stuff are found here ---&gt; <code>\\psycopg2\\_psycopg\\__init__.py</code>\nOnce here find the variable <code>sqlstate_errors</code> which is a dict containing the codes as value and the actual error as Note, here is a small snippet (is pretty big):</p>\n<pre><code>    sqlstate_errors = {\n        '02000': None, # (!) real value is &quot;&lt;class 'psycopg2.errors.NoData'&gt;&quot;\n        '02001': None, # (!) real value is &quot;&lt;class 'psycopg2.errors.NoAdditionalDynamicResultSetsReturned'&gt;&quot;\n        '03000': None, # (!) real value is &quot;&lt;class 'psycopg2.errors.SqlStatementNotYetComplete'&gt;&quot;\n        '08000': None, # (!) real value is &quot;&lt;class 'psycopg2.errors.ConnectionException'&gt;&quot;\n        '08001': None, # (!) real value is &quot;&lt;class 'psycopg2.errors.SqlclientUnableToEstablishSqlconnection'&gt;&quot;\n        '08003': None, # (!) real value is &quot;&lt;class 'psycopg2.errors.ConnectionDoesNotExist'&gt;&quot;\n        '08004': None, # (!) real value is &quot;&lt;class 'psycopg2.errors.SqlserverRejectedEstablishmentOfSqlconnection'&gt;&quot;\n        '08006': None, # (!) real value is &quot;&lt;class 'psycopg2.errors.ConnectionFailure'&gt;&quot;\n        '08007': None, # (!) real value is &quot;&lt;class 'psycopg2.errors.TransactionResolutionUnknown'&gt;&quot;\n        '08P01': None, # (!) real value is &quot;&lt;class 'psycopg2.errors.ProtocolViolation'&gt;&quot;\n # -------- Lots of lines ---------- # \n        '23503': None, # (!) real value is &quot;&lt;class 'psycopg2.errors.ForeignKeyViolation'&gt;&quot;\n        # There you are!!!\n        '23505': None, # (!) real value is &quot;&lt;class 'psycopg2.errors.UniqueViolation'&gt;&quot; \n        # ---------------- \n        '23514': None, # (!) real value is &quot;&lt;class 'psycopg2.errors.CheckViolation'&gt;&quot;\n        '23P01': None, # (!) real value is &quot;&lt;class 'psycopg2.errors.ExclusionViolation'&gt;&quot;\n</code></pre>\n<hr />\n<h2>4) Documentation</h2>\n<ul>\n<li><a href=\"https://www.psycopg.org/docs/errors.html#sqlstate-exception-classes\" rel=\"nofollow noreferrer\">psycopg.org | SQLSTATE   Exception</a></li>\n<li><a href=\"https://www.postgresql.org/docs/current/errcodes-appendix.html#ERRCODES-TABLE\" rel=\"nofollow noreferrer\">postgresq | PostgreSQL Error Codes</a></li>\n</ul>\n"}], "owner": {"reputation": 3806, "user_id": 274030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fd910b4f7c7baabc22976dc6b29b744?s=128&d=identicon&r=PG", "display_name": "Everett", "link": "https://stackoverflow.com/users/274030/everett"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10793, "favorite_count": 5, "answer_count": 4, "score": 21, "last_activity_date": 1618653626, "creation_date": 1573084194, "last_edit_date": 1615477306, "question_id": 58740043, "link": "https://stackoverflow.com/questions/58740043/how-do-i-catch-a-psycopg2-errors-uniqueviolation-error-in-a-python-flask-app", "title": "How do I catch a psycopg2.errors.UniqueViolation error in a Python (Flask) app?", "body": "<p>I have a small Python web app (written in Flask) that uses sqlalchemy to persist data to the database.  When I try to insert a duplicate row, an exception is raised, something like this:</p>\n\n<pre><code>(psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint \"uix_my_column\"\n</code></pre>\n\n<p>I would like to wrap the exception and re-raise my own so I can add my own logging and messaging that is specific to that particular error.  This is what I tried (simplified):</p>\n\n<pre><code>from db import DbApi\nfrom my_exceptions import BadRequest\nfrom psycopg2.errors import UniqueViolation # &lt;-- this does not exist!\n\nclass MyClass:\n    def __init__(self):\n        self.db = DbApi() \n\n    def create(self, data: dict) -&gt; MyRecord:\n        try:\n            with self.db.session_local(expire_on_commit=False) as session:\n                my_rec = MyRecord(**data)\n                session.add(my_rec)\n                session.commit()\n                session.refresh(my_rec)\n                return my_rec\n        except UniqueViolation as e:\n            raise BadRequest('A duplicate record already exists')\n</code></pre>\n\n<p>But this fails to trap the error because <code>psycopg2.errors.UniqueViolation</code> isn't actually a class name (!).</p>\n\n<p>In PHP, this would be as easy as catching copy/pasting the classname of the exception, but in Python, this is much more obfuscated.</p>\n\n<p>There was a similar question <a href=\"https://stackoverflow.com/questions/14769988/django-python-catch-mysql-integrityerror\">here</a>, but it didn't deal with this specific use-case and (importantly), it did not clarify how one can identify the root exception class name. </p>\n\n<p>How does one find out what exception is actually being raised? Why does Python hide this?</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 91, "user_id": 5824365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea2ec07848c3a44acf8353cf6d5eba67?s=128&d=identicon&r=PG&f=1", "display_name": "roushrsh", "link": "https://stackoverflow.com/users/5824365/roushrsh"}, "edited": false, "score": 0, "creation_date": 1573090758, "post_id": 58740526, "comment_id": 103771385, "body": "Dude, thanks a ton! It doesn&#39;t do it in the way I wanted it done (ie, what&#39;s a fastest way to multi replace columns based on multiple other columns), but it gets the job done regardless for this case. Thanks again."}, {"owner": {"reputation": 8568, "user_id": 9177877, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5qL1i.png?s=128&g=1", "display_name": "It_is_Chris", "link": "https://stackoverflow.com/users/9177877/it-is-chris"}, "reply_to_user": {"reputation": 91, "user_id": 5824365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea2ec07848c3a44acf8353cf6d5eba67?s=128&d=identicon&r=PG&f=1", "display_name": "roushrsh", "link": "https://stackoverflow.com/users/5824365/roushrsh"}, "edited": false, "score": 0, "creation_date": 1573098925, "post_id": 58740526, "comment_id": 103772987, "body": "@roushrsh I added an update that answers your question on multi replace columns based on another DataFrame"}], "tags": [], "owner": {"reputation": 8568, "user_id": 9177877, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5qL1i.png?s=128&g=1", "display_name": "It_is_Chris", "link": "https://stackoverflow.com/users/9177877/it-is-chris"}, "is_accepted": true, "score": 0, "last_activity_date": 1573098869, "last_edit_date": 1573098869, "creation_date": 1573088483, "answer_id": 58740526, "question_id": 58740038, "link": "https://stackoverflow.com/questions/58740038/fill-a-table-based-on-multiple-positions-in-another-dataframe/58740526#58740526", "title": "Fill a table based on multiple positions in another dataframe", "body": "<p>You do not need your first df just use <code>pivot_table</code> on df2:</p>\n\n<pre><code>import pandas as pd\nfrom io import StringIO\n\n# your sample data\ns2 = \"\"\"Age,Name,Item,Amount\n\n12,'Bob','Dog',1\n\n12,'Bob','Cat',3\n\n12,'Sam','Cat',1\n\n18,'Sam','Cat',1\n\n18,'Sam','House',3\"\"\"\n\ndf2 = pd.read_csv(StringIO(s2), quotechar=\"'\")\n\n\n# use pivot_table to reshape your dataFrame and reset your index\ndf2.pivot_table('Amount', ['Age', 'Name'], 'Item', aggfunc=sum).reset_index()\n\nItem  Age Name  Cat  Dog  House\n0      12  Bob  3.0  1.0    NaN\n1      12  Sam  1.0  NaN    NaN\n2      18  Sam  1.0  NaN    3.0\n</code></pre>\n\n<p>Or just use <code>groupby</code> and <code>unstack</code>:</p>\n\n<pre><code>df2.groupby(['Age', 'Name', 'Item'])['Amount'].sum().unstack().reset_index()\n\nItem  Age Name  Cat  Dog  House\n0      12  Bob  3.0  1.0    NaN\n1      12  Sam  1.0  NaN    NaN\n2      18  Sam  1.0  NaN    3.0\n</code></pre>\n\n<p>For the first example, just change <code>aggfunc</code> to whatever function you want to use to handle multiple values and same for <code>groupby</code> change <code>.sum()</code> to whatever function you want.</p>\n\n<h1>An update to answer your real question: replace values in a df:</h1>\n\n<pre><code>import pandas as pd\nfrom io import StringIO\n\n# your sample data\n\ns = \"\"\"Age,Name,Dog,Cat,House,Car,Food\n\n12,'Bob',0,0,0,0,0\n\n12,'Sam',0,0,0,0,0\n\n18,'Sam',0,0,0,0,0\"\"\"\n\ndf1 = pd.read_csv(StringIO(s), quotechar=\"'\")\n\ns2 = \"\"\"Age,Name,Item,Amount\n\n12,'Bob','Dog',1\n\n12,'Bob','Cat',3\n\n12,'Sam','Cat',1\n\n18,'Sam','Cat',1\n\n18,'Sam','House',3\"\"\"\n\ndf2 = pd.read_csv(StringIO(s2), quotechar=\"'\")\n\n\n# use pivot_table to reshape your dataFrame\npivot = df2.pivot_table('Amount', ['Age', 'Name'], 'Item', aggfunc=sum)\n\n# set the index to age and name and create a new df\ndf1 = df1.set_index(['Age', 'Name'])\n\n# use update to replace values\ndf1.update(pivot)\nprint(df1.reset_index())\n\n   Age Name  Dog  Cat  House  Car  Food\n0   12  Bob  1.0  3.0    0.0    0     0\n1   12  Sam  0.0  1.0    0.0    0     0\n2   18  Sam  0.0  1.0    3.0    0     0\n</code></pre>\n"}], "owner": {"reputation": 91, "user_id": 5824365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea2ec07848c3a44acf8353cf6d5eba67?s=128&d=identicon&r=PG&f=1", "display_name": "roushrsh", "link": "https://stackoverflow.com/users/5824365/roushrsh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 58740526, "answer_count": 1, "score": -1, "last_activity_date": 1573098869, "creation_date": 1573084164, "last_edit_date": 1573084298, "question_id": 58740038, "link": "https://stackoverflow.com/questions/58740038/fill-a-table-based-on-multiple-positions-in-another-dataframe", "title": "Fill a table based on multiple positions in another dataframe", "body": "<p>I have two dataframes. One is:</p>\n\n<pre><code>Age,Name,Dog,Cat,House,Car,Food\n\n12,'Bob',0,0,0,0,0\n\n12,'Sam',0,0,0,0,0\n\n18,'Sam',0,0,0,0,0\n</code></pre>\n\n<p>And I have a much longer table</p>\n\n<pre><code>Age,Name,Item,Amount\n\n12,'Bob','Dog',1\n\n12,'Bob','Cat',3\n\n12,'Sam','Cat',1\n\n18,'Sam','Cat',1\n\n18,'Sam','House',3\n</code></pre>\n\n<p>Final product:</p>\n\n<pre><code>Age,Name,Dog,Cat,House,Car,Food\n\n12,'Bob',1,0,0,0,0\n\n12,'Sam',0,1,0,0,0\n\n18,'Sam',0,1,3,0,0\n</code></pre>\n\n<p>Basically I have to fill the first table up with values in the second table.\nI have to match the age and name from the first to the second table, then see which one of the 1st tables columns I'm given in the second table, and fill in the amount</p>\n\n<p>I've hardcoded it using three &amp; conditions, but I have millions of rows/columns so it will literally take days to run if I do it that way.</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 471, "user_id": 6801991, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-MGoA91yGouk/AAAAAAAAAAI/AAAAAAAABmQ/XdaNdU--HxE/photo.jpg?sz=128", "display_name": "hilton92", "link": "https://stackoverflow.com/users/6801991/hilton92"}, "edited": false, "score": 2, "creation_date": 1573084491, "post_id": 58740027, "comment_id": 103770038, "body": "Please see here <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">stackoverflow.com/help/minimal-reproducible-example</a> for a guide on asking questions. Others should be able to recreate your problem easily. And please print out your stack trace."}], "answers": [{"tags": [], "owner": {"reputation": 1020, "user_id": 12119282, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BvAPB.jpg?s=128&g=1", "display_name": "Samuel Muldoon", "link": "https://stackoverflow.com/users/12119282/samuel-muldoon"}, "is_accepted": false, "score": 0, "last_activity_date": 1573089278, "creation_date": 1573089278, "answer_id": 58740609, "question_id": 58740027, "link": "https://stackoverflow.com/questions/58740027/typeerror-method-object-is-not-subscriptable/58740609#58740609", "title": "TypeError method object is not subscriptable", "body": "<p><code>TypeError method object is not subscriptable</code> means that you tried to call a function using <code>[]</code> instead of <code>()</code></p>\n\n<p>There is a difference between <code>print(\"banana\")</code> and <code>print[\"banana\"]</code></p>\n"}], "owner": {"reputation": 1, "user_id": 12334905, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAF5LhMFdpQgzL9a3saqqTErfin3rq7p6rC82ELHw=k-s128", "display_name": "Laura M. Julio S.", "link": "https://stackoverflow.com/users/12334905/laura-m-julio-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1357, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1573089278, "creation_date": 1573084076, "question_id": 58740027, "link": "https://stackoverflow.com/questions/58740027/typeerror-method-object-is-not-subscriptable", "title": "TypeError method object is not subscriptable", "body": "<p>I'm trying to set the trimester of this <a href=\"https://www.dropbox.com/s/c9ajy7szesji6wp/accidentalidad2017.csv?dl=0\" rel=\"nofollow noreferrer\">data</a> with pandas to start working. I already tried the date_range and others with dates but it doesn't work because there are many (many) rows with the same index. So I'm trying with the .loc but if I use <strong>and</strong> I get an ambiguous error, so I don't know what to do.</p>\n\n<p>Heeeeelp </p>\n\n<p>I have this code </p>\n\n<pre><code>    import numpy as np\nimport pandas as pd \nimport matplotlib as pld\n\n#COMENZAR \nheader_list = ['OBJECTID','X','Y','RADICADO','FECHA','HORA','DIA','PERIODO','CLASE','DIRECCION','DIRECCION_ENC','CBML','TIPO_GEOCOD','GRAVEDAD','BARRIO','COMUNA','DISENO']\n\ndata = pd.read_csv('Datasets/accidentalidad2017.csv', engine='python', sep=',', header=1, names=header_list)\n\n\ncolumn=['FECHA','HORA','DIA','CLASE','GRAVEDAD','BARRIO']\ndf=pd.DataFrame(data,columns=column)\ndf.set_index('FECHA',inplace=True) #convertir la columna FECHA en el index\n\n\n\n# Filtro por fecha\n\ndt = pd.to_datetime(df.index, format='%Y-%m-%d %H:%M:%S')\n\nstart='2017-1'\nend='2017-3'\nfecha= df.any[(dt &gt;=start) | (dt &lt;=end)]\nprint(fecha) \n</code></pre>\n"}, {"tags": ["python", "python-3.x", "function", "loops"], "comments": [{"owner": {"reputation": 35977, "user_id": 24718, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/0kiYe.jpg?s=128&g=1", "display_name": "monkut", "link": "https://stackoverflow.com/users/24718/monkut"}, "edited": false, "score": 2, "creation_date": 1573084206, "post_id": 58740021, "comment_id": 103769974, "body": "add a <code>print()</code> statement"}], "answers": [{"comments": [{"owner": {"reputation": 127, "user_id": 3195313, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/1a56a0551b31c98a83e7df2259fdf660?s=128&d=identicon&r=PG&f=1", "display_name": "random-xyz", "link": "https://stackoverflow.com/users/3195313/random-xyz"}, "edited": false, "score": 0, "creation_date": 1573085741, "post_id": 58740083, "comment_id": 103770312, "body": "Thank you so much for taking the time to help, that seem to have solved it!"}], "tags": [], "owner": {"reputation": 2086, "user_id": 10543528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a3a9d1ea239d645f62babcbb003c5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/10543528/michael"}, "is_accepted": false, "score": 1, "last_activity_date": 1573084570, "creation_date": 1573084570, "answer_id": 58740083, "question_id": 58740021, "link": "https://stackoverflow.com/questions/58740021/how-to-write-an-adding-function-that-prints-each-number-being-added-up-to-a-cer/58740083#58740083", "title": "How to write an adding function that prints each number being added, up to a certain number", "body": "<pre><code>def adding(num):\n    summ = 0\n    for x in range(1, num+1):\n        if x &gt; 1:\n            print(' + ', end='')\n        print('+'.join([str(x) for _ in range(x)]), end='')\n        summ += x*x\n    print(' =', summ)\n\n    return summ\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 67, "user_id": 6288238, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/664e3ccfb4f3beed45cc4d86a2c0628e?s=128&d=identicon&r=PG&f=1", "display_name": "Hot Whiskey", "link": "https://stackoverflow.com/users/6288238/hot-whiskey"}, "is_accepted": false, "score": 0, "last_activity_date": 1573098181, "last_edit_date": 1573098181, "creation_date": 1573085764, "answer_id": 58740224, "question_id": 58740021, "link": "https://stackoverflow.com/questions/58740021/how-to-write-an-adding-function-that-prints-each-number-being-added-up-to-a-cer/58740224#58740224", "title": "How to write an adding function that prints each number being added, up to a certain number", "body": "<p>This way is not beautiful by any means but I think it illustrates pretty simply what you're trying to do</p>\n\n<pre><code>def adding(num):\n    summ = 0\n    string = ''\n    for x in range(1, num + 1):\n        if x &gt; 1:\n            # append to string x, x times #\n            string += ' + ' + (str(x) + '+') * x\n            # remove final character in string #\n            string = string[:-1]\n        else:\n            string += str(x)\n    summ += x * x\n\n    if x == num:\n        string += ' = ' + str(summ)\n        print(string)\n    return summ\n</code></pre>\n"}], "owner": {"reputation": 127, "user_id": 3195313, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/1a56a0551b31c98a83e7df2259fdf660?s=128&d=identicon&r=PG&f=1", "display_name": "random-xyz", "link": "https://stackoverflow.com/users/3195313/random-xyz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1573098181, "creation_date": 1573084024, "last_edit_date": 1573086004, "question_id": 58740021, "link": "https://stackoverflow.com/questions/58740021/how-to-write-an-adding-function-that-prints-each-number-being-added-up-to-a-cer", "title": "How to write an adding function that prints each number being added, up to a certain number", "body": "<p>I want to create a function that will multiply each number starting from one, up to the number that is specified as a parameter in the function by itself and then add them up together to the parameter number, the trick is, that I want also to write the multiplication as an adding equation.</p>\n\n<p>Here's what I have so far: </p>\n\n<pre><code>def adding(num):\nsumm = 0\nfor x in range(1, num+1):\n    summ += x*x\n\nreturn summ\n</code></pre>\n\n<p>So far I can show the total result, but I can't figure out a way to print each number being added as I showed above.</p>\n"}, {"tags": ["python", "python-3.x", "bash", "subprocess", "shlex"], "comments": [{"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 1, "creation_date": 1573084748, "post_id": 58740013, "comment_id": 103770096, "body": "Have you tried just using subprocess.run?"}, {"owner": {"reputation": 1160, "user_id": 5507055, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a77ac26ed5edc0fa82bb8d2fb810a8a2?s=128&d=identicon&r=PG&f=1", "display_name": "ikreb", "link": "https://stackoverflow.com/users/5507055/ikreb"}, "reply_to_user": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1573085131, "post_id": 58740013, "comment_id": 103770188, "body": "Yes, but then I get the error message <code>AttributeError: &#39;bytes&#39; object has no attribute &#39;fileno&#39;</code>. I replaced only Popen with run."}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 2, "creation_date": 1573085168, "post_id": 58740013, "comment_id": 103770193, "body": "Show how you did it. Sounds like you passed in the wrong thing."}, {"owner": {"reputation": 1160, "user_id": 5507055, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a77ac26ed5edc0fa82bb8d2fb810a8a2?s=128&d=identicon&r=PG&f=1", "display_name": "ikreb", "link": "https://stackoverflow.com/users/5507055/ikreb"}, "reply_to_user": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1573111158, "post_id": 58740013, "comment_id": 103776363, "body": "It looks like my current code except <code>Popen</code> is replaced with <code>run</code>."}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1573111569, "post_id": 58740013, "comment_id": 103776555, "body": "I mean edit your question with actual code. If something isn&#39;t working, describing what you think is important isn&#39;t really a good technique. If you knew what was important, you wouldn&#39;t be asking on SO. Please be specific and detailed."}], "answers": [{"comments": [{"owner": {"reputation": 1160, "user_id": 5507055, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a77ac26ed5edc0fa82bb8d2fb810a8a2?s=128&d=identicon&r=PG&f=1", "display_name": "ikreb", "link": "https://stackoverflow.com/users/5507055/ikreb"}, "edited": false, "score": 0, "creation_date": 1573165638, "post_id": 58749583, "comment_id": 103803221, "body": "Thanks four your answer. But how do I get the result form subprocess.run? <code>stdout</code> is None. I get the <code>CompletedProcess</code>."}, {"owner": {"reputation": 11476, "user_id": 8572380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4a5d854aa543e6bf01abe8351d38782?s=128&d=identicon&r=PG&f=1", "display_name": "tshiono", "link": "https://stackoverflow.com/users/8572380/tshiono"}, "reply_to_user": {"reputation": 1160, "user_id": 5507055, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a77ac26ed5edc0fa82bb8d2fb810a8a2?s=128&d=identicon&r=PG&f=1", "display_name": "ikreb", "link": "https://stackoverflow.com/users/5507055/ikreb"}, "edited": false, "score": 1, "creation_date": 1573169485, "post_id": 58749583, "comment_id": 103804314, "body": "If my script properly prints the desired output on the terminal and you want to capture it to a variable, please try the updated answer. Hope it will work."}], "tags": [], "owner": {"reputation": 11476, "user_id": 8572380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4a5d854aa543e6bf01abe8351d38782?s=128&d=identicon&r=PG&f=1", "display_name": "tshiono", "link": "https://stackoverflow.com/users/8572380/tshiono"}, "is_accepted": true, "score": 2, "last_activity_date": 1573169259, "last_edit_date": 1573169259, "creation_date": 1573132606, "answer_id": 58749583, "question_id": 58740013, "link": "https://stackoverflow.com/questions/58740013/how-to-get-wlan-device-name-with-python/58749583#58749583", "title": "How to get wlan device name with python?", "body": "<p>A type glob and a pathname expansion by shell will be a headache.<br>\nIn my environment, the following snippet works:</p>\n\n<pre><code>import subprocess\nsubprocess.run('echo /sys/class/net/*/wireless', shell=True)\n</code></pre>\n\n<p>But the following returns an empty string:</p>\n\n<pre><code>import subprocess\nsubprocess.run(['echo', '/sys/class/net/*/wireless'], shell=True)\n</code></pre>\n\n<p>Then please try the following as a starting point:</p>\n\n<pre><code>import subprocess\nsubprocess.run('echo /sys/class/net/*/wireless | awk -F\"/\" \"{ print \\$5 }\"', shell=True)\n</code></pre>\n\n<p>which will bring your desired output.</p>\n\n<p>[Update]\nIf you want to assign a variable to the output above, please try:</p>\n\n<pre><code>import subprocess\n\nproc = subprocess.run('echo /sys/class/net/*/wireless | awk -F\"/\" \"{ print \\$5 }\"', shell=True, stdout = subprocess.PIPE)\nwlan = proc.stdout.decode(\"utf8\").rstrip(\"\\n\")\nprint(wlan)\n</code></pre>\n\n<p>BTW if you don't stick to the <code>subprocess</code> module, why don't you go with a native way as:</p>\n\n<pre><code>import glob\nlist = glob.glob('/sys/class/net/*/wireless')\nfor elm in list:\n    print(elm.split('/')[4])\n</code></pre>\n\n<p>Hope this helps.</p>\n"}], "owner": {"reputation": 1160, "user_id": 5507055, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a77ac26ed5edc0fa82bb8d2fb810a8a2?s=128&d=identicon&r=PG&f=1", "display_name": "ikreb", "link": "https://stackoverflow.com/users/5507055/ikreb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 58749583, "answer_count": 1, "score": 1, "last_activity_date": 1573169259, "creation_date": 1573083984, "last_edit_date": 1573114944, "question_id": 58740013, "link": "https://stackoverflow.com/questions/58740013/how-to-get-wlan-device-name-with-python", "title": "How to get wlan device name with python?", "body": "<p>I want only the wlan device name at a linux system with python. I could get the device name with shell scripting:</p>\n\n<pre><code>echo /sys/class/net/*/wireless | awk -F'/' '{ print $5 }'\n</code></pre>\n\n<p>So i want to use this at python with <code>subprocess</code>.</p>\n\n<pre><code>import shlex\nimport subprocess\n\ndef main():\n    echo = shlex.split('echo /sys/class/net/*/wireless')\n    echo_proc = subprocess.Popen(echo, shell=True, stdout=subprocess.PIPE)\n    awk = shlex.split(\"awk -F'/' '{ print $5 }'\")\n    awk_proc = subprocess.Popen(awk, stdin=echo_proc.stdout)\n    print(awk_proc.stdout)\n</code></pre>\n\n<p>But I get only <code>None</code> as output. If it is possible, I would prefer a solution with <code>subprocess.run()</code>. So I replaced <code>Popen</code> with <code>run</code>. But then I get the error message <code>AttributeError: 'bytes' object has no attribute 'fileno'</code>.</p>\n"}, {"tags": ["python", "python-3.x", "multiprocessing"], "comments": [{"owner": {"reputation": 7647, "user_id": 987358, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ace6dfd8c4f8c95d5a3fddc020af97f8?s=128&d=identicon&r=PG", "display_name": "Michael Butscher", "link": "https://stackoverflow.com/users/987358/michael-butscher"}, "edited": false, "score": 0, "creation_date": 1573084894, "post_id": 58740008, "comment_id": 103770130, "body": "&quot;multiprocessing&quot; has the &quot;Pool&quot; class with methods like &quot;map&quot; to make this easier."}], "answers": [{"tags": [], "owner": {"reputation": 506, "user_id": 2784303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2ab1d8d0530485d1027cc9f5bce2664?s=128&d=identicon&r=PG", "display_name": "Bill Huneke", "link": "https://stackoverflow.com/users/2784303/bill-huneke"}, "is_accepted": false, "score": 0, "last_activity_date": 1573094666, "creation_date": 1573094666, "answer_id": 58741228, "question_id": 58740008, "link": "https://stackoverflow.com/questions/58740008/how-to-have-a-multi-procsesing-function-return-and-store-values-in-python/58741228#58741228", "title": "How to have a multi-procsesing function return and store values in python?", "body": "<p>In your code fragment you have input <em>dataSets</em> which is a list of some unspecified size. You have a function <em>processImages</em> which takes a dataSet element and apparently returns a value you want to capture.</p>\n\n<h1>cpu_count == dataset length ?</h1>\n\n<p>The first problem I notice is that os.cpu_count() drives the range of values <em>i</em> which then determines which datasets you process.  I'm going to assume you would prefer these two things to be independent.  That is, you want to be able to crunch some X number of datasets and you want it to work on any machine, having anywhere from 1 - 1000 (or more...) cores.</p>\n\n<h1>An aside about CPU-bound work</h1>\n\n<p>I'm also going to assume that you have already determined that the task really is CPU-bound, thus it makes sense to split by core. If, instead, your task is disk io-bound, you would want more workers. You could also be memory bound or cache bound. If optimal parallelization is important to you, you should consider doing some trials to see which number of workers really gives you maximum performance.</p>\n\n<p>Here's more <a href=\"https://stackoverflow.com/a/33510470/2784303\">reading</a> if you like </p>\n\n<h1>Pool class</h1>\n\n<p>Anyway, as mentioned by Michael Butscher, the Pool class simplifies this for you. Yours is a standard use case.  You have a set of work to be done (your list of datasets to be processed) and a number of workers to do it (in your code fragment, your number of cores).  </p>\n\n<h1>TLDR</h1>\n\n<p>Use those simple multiprocessing concepts like this:</p>\n\n<pre><code> from multiprocessing import Pool\n\n # Renaming this variable just for clarity of the example here\n work_queue = datasets\n\n # This is the number you might want to find experimentally. Or just run with cpu_count()\n worker_count = os.cpu_count()\n\n # This will create processes (fork) and join all for you behind the scenes\n worker_pool = Pool(worker_count)\n\n # Farm out the work, gather the results. Does not care whether dataset count equals cpu count\n processed_work = worker_pool.map(processImages, work_queue)\n\n # Do something with the result\n print(processed_work)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 310, "user_id": 9575303, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hS3s9.png?s=128&g=1", "display_name": "Sean.H", "link": "https://stackoverflow.com/users/9575303/sean-h"}, "reply_to_user": {"reputation": 21554, "user_id": 1329296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1026699dbf4140d3fc7262842428e808?s=128&d=identicon&r=PG", "display_name": "lenik", "link": "https://stackoverflow.com/users/1329296/lenik"}, "edited": false, "score": 0, "creation_date": 1573097408, "post_id": 58741419, "comment_id": 103772691, "body": "@lenik I thought, if what spchee want is get and store the result(s) returned from a function, then <code>multiprocessing.pool.ThreadPool</code> maybe not a bad way to go."}, {"owner": {"reputation": 21554, "user_id": 1329296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1026699dbf4140d3fc7262842428e808?s=128&d=identicon&r=PG", "display_name": "lenik", "link": "https://stackoverflow.com/users/1329296/lenik"}, "edited": false, "score": 0, "creation_date": 1573097752, "post_id": 58741419, "comment_id": 103772767, "body": "if his tasks are CPU bound, multithreading will just slow things down, instead of running them in parallel, like multiprocessing does. which kind of defeats the purpose."}, {"owner": {"reputation": 310, "user_id": 9575303, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hS3s9.png?s=128&g=1", "display_name": "Sean.H", "link": "https://stackoverflow.com/users/9575303/sean-h"}, "reply_to_user": {"reputation": 21554, "user_id": 1329296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1026699dbf4140d3fc7262842428e808?s=128&d=identicon&r=PG", "display_name": "lenik", "link": "https://stackoverflow.com/users/1329296/lenik"}, "edited": false, "score": 0, "creation_date": 1573097938, "post_id": 58741419, "comment_id": 103772802, "body": "I agree with you. <code>multiprocessing.pool.ThreadPool</code> only good at <code>IO bound jobs</code>."}], "tags": [], "owner": {"reputation": 310, "user_id": 9575303, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hS3s9.png?s=128&g=1", "display_name": "Sean.H", "link": "https://stackoverflow.com/users/9575303/sean-h"}, "is_accepted": false, "score": 0, "last_activity_date": 1573097468, "last_edit_date": 1573097468, "creation_date": 1573096138, "answer_id": 58741419, "question_id": 58740008, "link": "https://stackoverflow.com/questions/58740008/how-to-have-a-multi-procsesing-function-return-and-store-values-in-python/58741419#58741419", "title": "How to have a multi-procsesing function return and store values in python?", "body": "<p>If you want to use the result <code>object</code> returned by a multiprocessing, try this</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from multiprocessing.pool import ThreadPool\n\n\ndef fun(fun_argument1, ... , fun_argumentn):\n    &lt;blabla&gt;\n    return object_1, object_2\n\n\npool = ThreadPool(processes=number_of_your_process)\nasync_num1 = pool.apply_async(fun, (fun_argument1, ... , fun_argumentn))\nobject_1, object_2 = async_num1.get()\n</code></pre>\n\n<p>then you can do whatever you want.</p>\n"}, {"tags": [], "owner": {"reputation": 21554, "user_id": 1329296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1026699dbf4140d3fc7262842428e808?s=128&d=identicon&r=PG", "display_name": "lenik", "link": "https://stackoverflow.com/users/1329296/lenik"}, "is_accepted": false, "score": 0, "last_activity_date": 1573096344, "creation_date": 1573096344, "answer_id": 58741451, "question_id": 58740008, "link": "https://stackoverflow.com/questions/58740008/how-to-have-a-multi-procsesing-function-return-and-store-values-in-python/58741451#58741451", "title": "How to have a multi-procsesing function return and store values in python?", "body": "<p>You cannot return the variable from another process. The recommended way would be to create a <code>Queue</code> (multiprocessing.Queue), then have your subprocess put the results to that queue, and once it's done, you may read them back -- this works if you have a lot of results.</p>\n\n<p>If you just need a single number -- using <code>Value</code> or <code>Array</code> could be easier.</p>\n\n<p>Just remember, you cannot use a simple variable for that, it has to be wrapped with above mentioned classes from <code>multiprocessing</code> lib.</p>\n"}], "owner": {"reputation": 41, "user_id": 8728746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f170f8433a0e5c78b70dd0fba8bd93b9?s=128&d=identicon&r=PG&f=1", "display_name": "spchee", "link": "https://stackoverflow.com/users/8728746/spchee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1573097468, "creation_date": 1573083964, "question_id": 58740008, "link": "https://stackoverflow.com/questions/58740008/how-to-have-a-multi-procsesing-function-return-and-store-values-in-python", "title": "How to have a multi-procsesing function return and store values in python?", "body": "<p>I have a function which I will run using multi-processing. However the function returns a value and I do not know how to store that value once it's done.</p>\n\n<p>I read somewhere online about using a queue but I don't know how to implement it or if that'd even work.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>cores = []\nfor i in range(os.cpu_count()):\n    cores.append(Process(target=processImages, args=(dataSets[i],))) \nfor core in cores: \n    core.start()\nfor core in cores:\n    core.join()\n</code></pre>\n\n<p>Where the function 'processImages' returns a value. How do I save the returned value?</p>\n"}, {"tags": ["python", "django", "django-allauth", "django-rest-auth"], "comments": [{"owner": {"reputation": 17762, "user_id": 548562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26587173d9156d8ec3114c8700d1b693?s=128&d=identicon&r=PG", "display_name": "Iain Shelvington", "link": "https://stackoverflow.com/users/548562/iain-shelvington"}, "edited": false, "score": 0, "creation_date": 1573085932, "post_id": 58739948, "comment_id": 103770350, "body": "Can you share the full traceback? Which versions of Django and allauth are you using?"}], "owner": {"reputation": 21308, "user_id": 289246, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/6559194055071e71f24d8f890d4a4f1b?s=128&d=identicon&r=PG", "display_name": "Naor", "link": "https://stackoverflow.com/users/289246/naor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 85, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1573083496, "creation_date": 1573083496, "question_id": 58739948, "link": "https://stackoverflow.com/questions/58739948/integrate-django-rest-auth-with-django-allauth", "title": "Integrate django rest auth with django allauth", "body": "<p>I am trying to integrate <a href=\"https://github.com/Tivix/django-rest-auth\" rel=\"nofollow noreferrer\">django rest auth</a> with <a href=\"https://github.com/pennersr/django-allauth\" rel=\"nofollow noreferrer\">django allauth</a>.<br>\nI installed them both as their documentation says and I have issue with configuring the routes.<br>\nThis is what I made in my urls file:</p>\n\n<pre><code>urlpatterns = [\n  re_path(r'^auth/', include('rest_auth.urls')),\n  re_path(r'^auth/signup/', include('rest_auth.registration.urls')),\n  ...\n]\n</code></pre>\n\n<p>The registration works fine, but on my confirmation email that I receive there is a link. Clicking on that link gives 500 status code with the following exception:</p>\n\n<pre><code>TemplateResponseMixin requires either a definition of 'template_name' or an implementation of 'get_template_names()'\n</code></pre>\n\n<p>What did I do wrong? how should I configure django rest auth and django allauth? Is there any tutorial that provide step by step instructions (I am new to django)?</p>\n"}, {"tags": ["python", "image", "printing"], "comments": [{"owner": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "edited": false, "score": 1, "creation_date": 1573083634, "post_id": 58739942, "comment_id": 103769848, "body": "How do you know it&#39;s not working?"}, {"owner": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "edited": false, "score": 1, "creation_date": 1573083711, "post_id": 58739942, "comment_id": 103769873, "body": "<code>my_file</code> is a path name to a single file. When you say <code>for name in my_file</code> what do you expect <code>name</code> to be?"}, {"owner": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "edited": false, "score": 0, "creation_date": 1573083780, "post_id": 58739942, "comment_id": 103769886, "body": "What do you get if you <code>print(my_file)</code>?"}, {"owner": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "edited": false, "score": 0, "creation_date": 1573083827, "post_id": 58739942, "comment_id": 103769894, "body": "<code>Crooms terminal\\ Welcome </code> looks dodgy. Do you really have a file name which starts with a space?"}, {"owner": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "edited": false, "score": 0, "creation_date": 1573083873, "post_id": 58739942, "comment_id": 103769903, "body": "How can you append something to <code>frames</code> when it hasn&#39;t been defined anywhere?"}, {"owner": {"reputation": 46136, "user_id": 3890632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hNkgF.png?s=128&g=1", "display_name": "khelwood", "link": "https://stackoverflow.com/users/3890632/khelwood"}, "edited": false, "score": 0, "creation_date": 1573084021, "post_id": 58739942, "comment_id": 103769940, "body": "Why are you trying to <code>path.join</code> onto the start of an absolute path?"}, {"owner": {"reputation": 3, "user_id": 11875231, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/R2Rmh.jpg?s=128&g=1", "display_name": "Haxcks", "link": "https://stackoverflow.com/users/11875231/haxcks"}, "edited": false, "score": 0, "creation_date": 1573272444, "post_id": 58739942, "comment_id": 103838134, "body": "Sorry everyone for not being more specific about what my problem didn&#39;t think this many people would respond . Anyway /Peter Wood/ The reason how I now its not working to due to the fact that the pycharm is was giving me this error  Traceback (most recent call last):   File &quot;&lt;input&gt;&quot;, line 7, in &lt;module&gt; FileNotFoundError: [Errno 2] No such file or directory: &#39;C&#39;"}, {"owner": {"reputation": 3, "user_id": 11875231, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/R2Rmh.jpg?s=128&g=1", "display_name": "Haxcks", "link": "https://stackoverflow.com/users/11875231/haxcks"}, "edited": false, "score": 0, "creation_date": 1573272622, "post_id": 58739942, "comment_id": 103838154, "body": "For the next question  /Peter wood/what I was trying to do was make a my_file a variable to my file path with as you can see is not working for me"}, {"owner": {"reputation": 3, "user_id": 11875231, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/R2Rmh.jpg?s=128&g=1", "display_name": "Haxcks", "link": "https://stackoverflow.com/users/11875231/haxcks"}, "edited": false, "score": 0, "creation_date": 1573272933, "post_id": 58739942, "comment_id": 103838177, "body": "/Peter Wood/ Yes , it does have a space in it and I tried with and without the space and it was still was not working."}, {"owner": {"reputation": 3, "user_id": 11875231, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/R2Rmh.jpg?s=128&g=1", "display_name": "Haxcks", "link": "https://stackoverflow.com/users/11875231/haxcks"}, "edited": false, "score": 0, "creation_date": 1573273300, "post_id": 58739942, "comment_id": 103838210, "body": "/Peter Wood/ Ok so the part were you mention about me appending frames and then I did&#39;t define it any were so that&#39;s my fault"}, {"owner": {"reputation": 3, "user_id": 11875231, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/R2Rmh.jpg?s=128&g=1", "display_name": "Haxcks", "link": "https://stackoverflow.com/users/11875231/haxcks"}, "edited": false, "score": 0, "creation_date": 1573273497, "post_id": 58739942, "comment_id": 103838243, "body": "/khelwood/ So the reason why I put the path.join was because I added a animation to switch in between two text files for a specific  time to display kind of like a animation in the terminal ."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 11875231, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/R2Rmh.jpg?s=128&g=1", "display_name": "Haxcks", "link": "https://stackoverflow.com/users/11875231/haxcks"}, "edited": false, "score": 0, "creation_date": 1573273713, "post_id": 58740101, "comment_id": 103838270, "body": "Thank you so much for the example of code I will let you know if it works out"}, {"owner": {"reputation": 3, "user_id": 11875231, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/R2Rmh.jpg?s=128&g=1", "display_name": "Haxcks", "link": "https://stackoverflow.com/users/11875231/haxcks"}, "edited": false, "score": 0, "creation_date": 1573274415, "post_id": 58740101, "comment_id": 103838355, "body": "Also I already tried the very easy and it gave me this error  File &quot;&lt;input&gt;&quot;, line 2 SyntaxError: (unicode error) &#39;unicodeescape&#39; codec can&#39;t decode bytes in position 2-3: truncated \\UXXXXXXXX escape Which what I thought means I need to put it in a 8 bit encoding utcf thing  but I don&#39;t no where I would put the code , Thats my main problem I was having."}], "tags": [], "owner": {"reputation": 16, "user_id": 12334894, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Qyqy_8XreUg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfl32j-XP1wyQGfeYreXVKv6IVpBg/photo.jpg?sz=128", "display_name": "Ionut Gradinaru", "link": "https://stackoverflow.com/users/12334894/ionut-gradinaru"}, "is_accepted": true, "score": 0, "last_activity_date": 1573084702, "creation_date": 1573084702, "answer_id": 58740101, "question_id": 58739942, "link": "https://stackoverflow.com/questions/58739942/i-cant-display-this-file-for-some-reason/58740101#58740101", "title": "I can&#39;t display this file for some reason", "body": "<p>The code you pasted is not formatted right and I see many things that could be wrong... </p>\n\n<p>For ex. <code>frames</code> and <code>file</code> are not defined</p>\n\n<p>There are some extra spaces in the path, ...</p>\n\n<p>But here's how I would do it:</p>\n\n<pre><code>#THIS_FOLDER = os.path.dirname(os.path.abspath(file))\nmy_file = os.path.join(r\"d:\\temp\", 'terminal.txt')\nframes = []\n#for name in my_file:\nwith open(my_file, \"r\") as f:\n    frames.append(f.readlines())\nprint(my_file)\nfor frame in frames:\n    print(\"\".join(frame))\n</code></pre>\n\n<p>Also a very easy way to show the content of a file would be something like this:</p>\n\n<pre><code>my_file = os.path.join(r\"d:\\temp\", 'terminal.txt')\nwith open(my_file, \"r\") as f:\n    print(f.read())\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 11875231, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/R2Rmh.jpg?s=128&g=1", "display_name": "Haxcks", "link": "https://stackoverflow.com/users/11875231/haxcks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "accepted_answer_id": 58740101, "answer_count": 1, "score": -3, "last_activity_date": 1573084702, "creation_date": 1573083474, "last_edit_date": 1573083712, "question_id": 58739942, "link": "https://stackoverflow.com/questions/58739942/i-cant-display-this-file-for-some-reason", "title": "I can&#39;t display this file for some reason", "body": "<p>The file I am trying to show is a normal text file.  </p>\n\n<p>Here's the code I wrote so far:</p>\n\n<pre><code>import os                      \n\nTHIS_FOLDER = os.path.dirname(os.path.abspath(__file__))\nmy_file = os.path.join(THIS_FOLDER, r' C:\\Users\\dylan\\PycharmProjects\\Crooms terminal\\ Welcome to the crooms terminal.txt')\n\nfor name in my_file:\n    with open(name, \"r\", encoding=\"utf8\") as f:\n        frames.append(f.readlines())\n\nprint(my_file)\nfor frame in frames:\n    print(\"\".join(frame))\n</code></pre>\n\n<p>And here is the image I am trying to print </p>\n\n<pre><code>  _____                                 _______                  _             _ \n / ____|                               |__   __|                (_)           | |\n| |     _ __ ___   ___  _ __ ___  ___     | | ___ _ __ _ __ ___  _ _ __   __ _| |\n| |    | '__/ _ \\ / _ \\| '_ ` _ \\/ __|    | |/ _ \\ '__| '_ ` _ \\| | '_ \\ / _` | |\n| |____| | | (_) | (_) | | | | | \\__ \\    | |  __/ |  | | | | | | | | | | (_| | |\n \\_____|_|  \\___/ \\___/|_| |_| |_|___/    |_|\\___|_|  |_| |_| |_|_|_| |_|\\__,_|_|\n</code></pre>\n"}, {"tags": ["python", "logging"], "answers": [{"tags": [], "owner": {"reputation": 1020, "user_id": 12119282, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BvAPB.jpg?s=128&g=1", "display_name": "Samuel Muldoon", "link": "https://stackoverflow.com/users/12119282/samuel-muldoon"}, "is_accepted": true, "score": 1, "last_activity_date": 1578743098, "last_edit_date": 1578743098, "creation_date": 1573086515, "answer_id": 58740325, "question_id": 58739931, "link": "https://stackoverflow.com/questions/58739931/how-to-use-multiple-formats-for-a-single-logger/58740325#58740325", "title": "How to use multiple formats for a single logger", "body": "<p>You have two handlers:</p>\n\n<ol>\n<li>A handler named <code>handler</code>. The output stream for <code>handler</code> is <code>sys.stdout</code>. <code>handler</code> prints messages only, without time-stamps.</li>\n<li>You have a handler named <code>console</code>. <code>console</code> prints time-stamp and message. You left the output stream unspecified.</li>\n</ol>\n\n<p>Note that you did not pass anything into the constructor when you wrote, <code>console = logging.StreamHandler()</code> By default, the target of a StreamHandler is <code>sys.stderr</code> Neither of your handlers print to file. One prints to the console via <code>stdout</code> and the other prints to the console via <code>stderr</code>. I'm guessing that you are seeing time-stamps on the console from the <code>stderr</code> feed.</p>\n\n<hr>\n\n<p>I recommend something like the following:</p>\n\n<pre><code>import logging\nimport sys\n\nsysout = True\nlogger = logging.getLogger('simple_example')\nlogger.setLevel(logging.INFO)\nfile_handler = logging.FileHandler(\"mylog.log\", delay=True)\n# If delay is true, then file opening\n# is deferred until the first call to emit().\n#\n# there's no need to open the file until\n# records are ready to be written\nfile_handler.setLevel(logging.INFO)\nlogger.addHandler(file_handler)\nfrmt_time_and_msg = logging.Formatter('%(asctime)s - %(message)s')\nfile_handler.setFormatter(frmt_time_and_msg)\n\n\nif sysout:\n    stdout_handler = logging.StreamHandler(sys.stdout)\n    stdout_handler.setLevel(logging.INFO)\n    msg_only = logging.Formatter('%(message)s')\n    stdout_handler.setFormatter(msg_only)\n    logger.addHandler(stdout_handler)\n\n\nlogger.debug('debug message')\nlogger.info('info message')\nlogger.warning('warn message')\nlogger.error('error message')\nlogger.critical('critical message')\n</code></pre>\n\n<p>Output seen on <code>sys.stdout</code>. Not that there are no time stamps:</p>\n\n<pre><code>info message\nwarn message\nerror message\ncritical message\n</code></pre>\n\n<p>The contents of <code>mylog.log</code>:</p>\n\n<pre><code>2019-11-06 17:24:55,502 - info message\n2019-11-06 17:24:55,508 - warn message\n2019-11-06 17:24:55,508 - error message\n2019-11-06 17:24:55,508 - critical message\n</code></pre>\n"}], "owner": {"reputation": 204, "user_id": 4815148, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1evsIwOrwTY/AAAAAAAAAAI/AAAAAAAAFuQ/j_Sda8bfDCM/photo.jpg?sz=128", "display_name": "CNIDog", "link": "https://stackoverflow.com/users/4815148/cnidog"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 307, "favorite_count": 0, "accepted_answer_id": 58740325, "answer_count": 1, "score": 0, "last_activity_date": 1578743098, "creation_date": 1573083403, "last_edit_date": 1573092708, "question_id": 58739931, "link": "https://stackoverflow.com/questions/58739931/how-to-use-multiple-formats-for-a-single-logger", "title": "How to use multiple formats for a single logger", "body": "<p>I have a module that outputs data to the console and to a log file.  I would like the console output to have a simple <code>'%(message)s'</code> format but in the log file I would like to add the timestamp <code>'%(asctime)s - %(message)s'</code>.  How does one setup the handlers to send a different format to the console than it does to the log file?  The methods I have tried result in sending <em>both</em> messages to the console.</p>\n\n<p>Below is one example of what does NOT work:</p>\n\n<pre><code>    console = logging.StreamHandler()\n    console.setLevel(logging.INFO)\n    formatter = logging.Formatter('%(asctime)s - %(message)s')\n    console.setFormatter(formatter)\n    root.addHandler(console)\n    if sysout:\n        handler = logging.StreamHandler(sys.stdout)\n        handler.setLevel(logging.INFO)\n        formatter = logging.Formatter('%(message)s')\n        handler.setFormatter(formatter)\n        root.addHandler(handler)\n</code></pre>\n\n<p><strong>PARTIAL SOLUTION:</strong></p>\n\n<p>In my <code>setup_logging</code> function, I am using the following code:</p>\n\n<pre><code>    logging.basicConfig(filename=abs_log_file, level=logging.DEBUG,\n                        format='%(asctime)s - %(message)s')\n    root = logging.getLogger()\n    console = logging.StreamHandler()\n    console.setLevel(logging.INFO)\n    formatter = logging.Formatter('%(message)s')\n    console.setFormatter(formatter)\n    root.addHandler(console)\n</code></pre>\n\n<p>...and in the module that calls <code>setup_logging</code>, I have the following:</p>\n\n<p><code># inhibits timestamps from printing to console\nlogging.getLogger('').handlers[1].formatter._fmt = '%(message)s'</code> </p>\n\n<p>This works as desired, but I get the warning \"Access to a protected member _fmt of a class\".  What is a compliant solution?</p>\n"}, {"tags": ["python", "regex"], "comments": [{"owner": {"reputation": 14946, "user_id": 8188846, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/85a7614508b329eb4a495c59ccf64ac7?s=128&d=identicon&r=PG", "display_name": "Maximilian Burszley", "link": "https://stackoverflow.com/users/8188846/maximilian-burszley"}, "edited": false, "score": 0, "creation_date": 1573083506, "post_id": 58739913, "comment_id": 103769819, "body": "Use a lookahead instead: <code>(?=\\n#)</code>"}, {"owner": {"reputation": 481672, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1573084339, "post_id": 58739913, "comment_id": 103770011, "body": "Please stop logging from various accounts, <a href=\"https://stackoverflow.com/questions/58738970/grabbing-a-body-of-text-using-regex-excluding-specific-conditions\">the answer is already given</a>"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user11727742"}, "edited": false, "score": 0, "creation_date": 1573084039, "post_id": 58739963, "comment_id": 103769945, "body": "(?s)\\A.*(?#) why this regex not working ?# has greedy match right?"}, {"owner": {"reputation": 481672, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1573084385, "post_id": 58739963, "comment_id": 103770021, "body": "@cdac <a href=\"https://stackoverflow.com/questions/58738970/grabbing-a-body-of-text-using-regex-excluding-specific-conditions\"><b>The answer is here</b></a>"}, {"owner": {"reputation": 1408, "user_id": 3251540, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PbLpq.jpg?s=128&g=1", "display_name": "AER", "link": "https://stackoverflow.com/users/3251540/aer"}, "edited": false, "score": 1, "creation_date": 1573084461, "post_id": 58739963, "comment_id": 103770035, "body": "What you have above is different to what I posted. I&#39;m not even sure why you put the <code>?</code> before the hash without something to define it (it&#39;s an incorrect pattern). <code>?</code> before the parentheses just means you can have 0 to unlimited 1 or none times..."}], "tags": [], "owner": {"reputation": 1408, "user_id": 3251540, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PbLpq.jpg?s=128&g=1", "display_name": "AER", "link": "https://stackoverflow.com/users/3251540/aer"}, "is_accepted": true, "score": 0, "last_activity_date": 1573084273, "last_edit_date": 1573084273, "creation_date": 1573083576, "answer_id": 58739963, "question_id": 58739913, "link": "https://stackoverflow.com/questions/58739913/how-to-regex-to-avoid-the-last-matched-string/58739963#58739963", "title": "How to regex to avoid the last matched string", "body": "<p>Simply a case of using a positive look-ahead <code>(?=#)</code>. Use the below pattern:</p>\n\n<pre><code>(?s)\\A.*(?=\\#)\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user11727742"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "closed_date": 1573147332, "accepted_answer_id": 58739963, "answer_count": 1, "score": -1, "last_activity_date": 1573084273, "creation_date": 1573083256, "question_id": 58739913, "link": "https://stackoverflow.com/questions/58739913/how-to-regex-to-avoid-the-last-matched-string", "closed_reason": "Duplicate", "title": "How to regex to avoid the last matched string", "body": "<p>wrote a regex to get the character till the the searched one. Here till <code>#</code> i need to extract</p>\n\n<pre><code>import re\ntext = '''text1\ntext2\ntext3\n#text4\ntext5'''\nprint(re.search('(?s)\\A.*?(\\#)', text))\n</code></pre>\n\n<p>My Out</p>\n\n<pre><code>&lt;re.Match object; span=(0, 19), match='text1\\ntext2\\ntext3\\n#'&gt;\n</code></pre>\n\n<p>Expected </p>\n\n<pre><code>&lt;re.Match object; span=(0, 19), match='text1\\ntext2\\ntext3'&gt;\n</code></pre>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 471, "user_id": 6801991, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-MGoA91yGouk/AAAAAAAAAAI/AAAAAAAABmQ/XdaNdU--HxE/photo.jpg?sz=128", "display_name": "hilton92", "link": "https://stackoverflow.com/users/6801991/hilton92"}, "edited": false, "score": 0, "creation_date": 1573083969, "post_id": 58739890, "comment_id": 103769928, "body": "Can you post the initial dataframes so others can replicate the issue easily? See here <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">stackoverflow.com/help/minimal-reproducible-example</a> for a guide on asking questions"}, {"owner": {"reputation": 471, "user_id": 6801991, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-MGoA91yGouk/AAAAAAAAAAI/AAAAAAAABmQ/XdaNdU--HxE/photo.jpg?sz=128", "display_name": "hilton92", "link": "https://stackoverflow.com/users/6801991/hilton92"}, "edited": false, "score": 1, "creation_date": 1573084190, "post_id": 58739890, "comment_id": 103769971, "body": "Your issue is probably that <code>df</code> and <code>df3</code> have different indexes. You can only compare series like that if they have the same indices. <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.equals.html\" rel=\"nofollow noreferrer\">pandas.pydata.org/pandas-docs/stable/reference/api/&hellip;</a>. Seperately your <code>set_index</code> lines won&#39;t actually do anything, you either need to assign this to another variable or use <code>in_place=True</code>"}], "owner": {"reputation": 184, "user_id": 12270273, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/278f74eb98e458d2022132327d415ad8?s=128&d=identicon&r=PG&f=1", "display_name": "SpindriftSeltzer", "link": "https://stackoverflow.com/users/12270273/spindriftseltzer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 28, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1573251394, "creation_date": 1573083056, "last_edit_date": 1573251394, "question_id": 58739890, "link": "https://stackoverflow.com/questions/58739890/error-when-comparing-two-dataframes-based-on-a-key", "title": "Error when comparing two dataframes based on a key", "body": "<p>I have two dataframes and I'm attempting to compare the two dataframes, so if the value of df1 is in df, drop the row. I've listed out both columns, and they're named exactly alike. </p>\n\n<p>So in my code below, I rename the column in another dataframe (df3) so that I can merge them into a new dataframe (df1). I attempt to set the index to the permit values, but don't wish to drop the index (because I want to keep the permit numbers), then compare them.</p>\n\n<pre><code>df   Permit Number  Sub Permit   \n     BLD-00045         NaN          \n     ELE-2019        BLD-00045     \n     PLM-2018        BLD-00045     \n</code></pre>\n\n<pre><code>df1  Permit Number    Sub Permit    \n     BLD-00001         NaN          \n     ELE-2019         BLD-00045     \n     PLM-7777         BLD-00045     \n</code></pre>\n\n<p>So my goal would be to keep the rows BLD-00045 and PLM-7777, but drop ELE-2019 because it's equal between the two dataframes.</p>\n\n<pre><code>df3.rename(columns={'permit_num': \"Permit Number\"}, inplace=True)\ndf1 = pd.merge(df, df3, on='Permit Number')\ndf.set_index('Permit Number', inplace=False)\ndf1.set_index('Permit Number', inplace=False)\ndf = df.loc[df['Permit Number'] != df1['Permit Number']]\nprint(df)\n</code></pre>\n\n<p>I keep getting ValueError: Can only compare identically-labeled Series object.</p>\n"}, {"tags": ["python", "pandas", "apache-spark", "pyspark", "apache-spark-sql"], "comments": [{"owner": {"reputation": 393, "user_id": 10994363, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-CoOC0rac0zU/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQNHC5XSQoviUMtOzgnQwDCOVn_BGA/mo/photo.jpg?sz=128", "display_name": "Micah Kornfield", "link": "https://stackoverflow.com/users/10994363/micah-kornfield"}, "edited": false, "score": 0, "creation_date": 1573201721, "post_id": 58739888, "comment_id": 103812119, "body": "What does your schema look like?  The current java library for Apache Arrow has some limitation for columns (they can&#39;t hold more then 2 GB)."}, {"owner": {"reputation": 822, "user_id": 5965537, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/be4da9013bd5e509538dea3d5ea751e4?s=128&d=identicon&r=PG&f=1", "display_name": "Megan", "link": "https://stackoverflow.com/users/5965537/megan"}, "reply_to_user": {"reputation": 393, "user_id": 10994363, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-CoOC0rac0zU/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQNHC5XSQoviUMtOzgnQwDCOVn_BGA/mo/photo.jpg?sz=128", "display_name": "Micah Kornfield", "link": "https://stackoverflow.com/users/10994363/micah-kornfield"}, "edited": false, "score": 0, "creation_date": 1573758407, "post_id": 58739888, "comment_id": 103998798, "body": "@MicahKornfield apologies for the late reply, I have two string columns that contain &quot;stringified&quot; JSON for ~9,900,000 rows"}, {"owner": {"reputation": 822, "user_id": 5965537, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/be4da9013bd5e509538dea3d5ea751e4?s=128&d=identicon&r=PG&f=1", "display_name": "Megan", "link": "https://stackoverflow.com/users/5965537/megan"}, "reply_to_user": {"reputation": 393, "user_id": 10994363, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-CoOC0rac0zU/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQNHC5XSQoviUMtOzgnQwDCOVn_BGA/mo/photo.jpg?sz=128", "display_name": "Micah Kornfield", "link": "https://stackoverflow.com/users/10994363/micah-kornfield"}, "edited": false, "score": 0, "creation_date": 1573759236, "post_id": 58739888, "comment_id": 103999184, "body": "I have two string columns that contain &quot;stringified&quot; JSON for ~9,900,000 rows (each is around 490 bytes per row, which leads to ~2.6GB for these columns). I&#39;m going to try to calculate these after the pandas_udf is called to prevent this error"}], "owner": {"reputation": 822, "user_id": 5965537, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/be4da9013bd5e509538dea3d5ea751e4?s=128&d=identicon&r=PG&f=1", "display_name": "Megan", "link": "https://stackoverflow.com/users/5965537/megan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 321, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1573083043, "creation_date": 1573083043, "question_id": 58739888, "link": "https://stackoverflow.com/questions/58739888/spark-is-it-possible-to-increase-pyarrow-buffer", "title": "Spark: Is it possible to increase pyarrow buffer?", "body": "<p>I am attempting to pass a large (~30GB) dataframe to a pandas_udf in spark like so:</p>\n\n<pre><code>@f.pandas_udf(gen_udf_schema(), f.PandasUDFType.GROUPED_MAP)\ndef _my_udf(df):\n    # ... do df work ...\n    return df\n\ndf = df.groupBy('some_col').apply(_my_udf)\n</code></pre>\n\n<p>I tried increasing my executor memory, driver memory, and driver maxResultSize but I am still getting the pyarrow memory error detailed below in my cluster. Is there a equivalent of driver maxResultSize, i.e. <code>executor maxResultSize</code> I can use to avoid this error? There does not seem to be much information on this online. </p>\n\n<p>I can't split up the dataframe because it is actually a union of 1 small dataframe, and 1 large dataframe that is ~29GB. Inside my udf I split the two and do my work, and then only return the small dataframe.</p>\n\n<pre><code>y4j.protocol.Py4JJavaError: An error occurred while calling o324.showString.\n: org.apache.spark.SparkException: Job aborted due to stage failure: Task 44 in stage 19.0 failed 4 times, most recent failure: Lost task 44.3 in stage 19.0 (TID 368, ip-172-31-13-57.us-west-2.compute.internal, executor 3): org.apache.arrow.vector.util.OversizedAllocationException: Unable to expand the buffer\n    at org.apache.arrow.vector.BaseVariableWidthVector.reallocBufferHelper(BaseVariableWidthVector.java:547)\n    at org.apache.arrow.vector.BaseVariableWidthVector.reallocValidityAndOffsetBuffers(BaseVariableWidthVector.java:529)\n    at org.apache.arrow.vector.BaseVariableWidthVector.handleSafe(BaseVariableWidthVector.java:1221)\n    at org.apache.arrow.vector.BaseVariableWidthVector.fillEmpties(BaseVariableWidthVector.java:881)\n    at org.apache.arrow.vector.BaseVariableWidthVector.setSafe(BaseVariableWidthVector.java:1062)\n    at org.apache.spark.sql.execution.arrow.StringWriter.setValue(ArrowWriter.scala:242)\n    at org.apache.spark.sql.execution.arrow.ArrowFieldWriter.write(ArrowWriter.scala:121)\n    at org.apache.spark.sql.execution.arrow.ArrowWriter.write(ArrowWriter.scala:86)\n    at org.apache.spark.sql.execution.python.ArrowPythonRunner$$anon$2$$anonfun$writeIteratorToStream$1.apply$mcV$sp(ArrowPythonRunner.scala:85)\n    at org.apache.spark.sql.execution.python.ArrowPythonRunner$$anon$2$$anonfun$writeIteratorToStream$1.apply(ArrowPythonRunner.scala:76)\n    at org.apache.spark.sql.execution.python.ArrowPythonRunner$$anon$2$$anonfun$writeIteratorToStream$1.apply(ArrowPythonRunner.scala:76)\n    at org.apache.spark.util.Utils$.tryWithSafeFinally(Utils.scala:1360)\n    at org.apache.spark.sql.execution.python.ArrowPythonRunner$$anon$2.writeIteratorToStream(ArrowPythonRunner.scala:96)\n    at org.apache.spark.api.python.BasePythonRunner$WriterThread$$anonfun$run$1.apply(PythonRunner.scala:345)\n    at org.apache.spark.util.Utils$.logUncaughtExceptions(Utils.scala:1945)\n    at org.apache.spark.api.python.BasePythonRunner$WriterThread.run(PythonRunner.scala:194)\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 0, "creation_date": 1573083427, "post_id": 58739877, "comment_id": 103769799, "body": "You should make this a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> though. Most of the code (like the <code>number</code> stuff) isn&#39;t relevant to the problem."}, {"owner": {"reputation": 92827, "user_id": 369, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/DHcF2.png?s=128&g=1", "display_name": "Blorgbeard", "link": "https://stackoverflow.com/users/369/blorgbeard"}, "edited": false, "score": 1, "creation_date": 1573083553, "post_id": 58739877, "comment_id": 103769833, "body": "Does this answer your question? <a href=\"https://stackoverflow.com/questions/44645109/unboundlocalerror-in-python-while-printing-global-variable\">UnBoundLocalError in Python while printing global variable</a>"}, {"owner": {"reputation": 92827, "user_id": 369, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/DHcF2.png?s=128&g=1", "display_name": "Blorgbeard", "link": "https://stackoverflow.com/users/369/blorgbeard"}, "edited": false, "score": 0, "creation_date": 1573083665, "post_id": 58739877, "comment_id": 103769859, "body": "I think this is the same as the linked issue: you&#39;re shadowing the global <code>pickle</code> with your local <code>pickle</code>, and the local declaration is hoisted to the top of the function."}, {"owner": {"reputation": 61, "user_id": 5541269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33efd42f29f7cafde000f02c4f334012?s=128&d=identicon&r=PG&f=1", "display_name": "user5541269", "link": "https://stackoverflow.com/users/5541269/user5541269"}, "edited": false, "score": 0, "creation_date": 1573189263, "post_id": 58739877, "comment_id": 103808342, "body": "I don&#39;t think Python &quot;hoists&quot; variables. If I add a <code>print(dir())</code> statement at the start of the function, it shows the local namespace only contains <code>number</code> and there is no <code>pickle</code>. Going by the LEGB look-up rules, when it doesn&#39;t find <code>pickle</code> it should look in the global namespace."}, {"owner": {"reputation": 92827, "user_id": 369, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/DHcF2.png?s=128&g=1", "display_name": "Blorgbeard", "link": "https://stackoverflow.com/users/369/blorgbeard"}, "edited": false, "score": 0, "creation_date": 1573250796, "post_id": 58739877, "comment_id": 103834679, "body": "Maybe hoisting is kind of a red herring. The point is that because you assign to <code>pickle</code> <i>somewhere</i> inside the function, python considers every reference to it in the function as a local reference."}], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 5541269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33efd42f29f7cafde000f02c4f334012?s=128&d=identicon&r=PG&f=1", "display_name": "user5541269", "link": "https://stackoverflow.com/users/5541269/user5541269"}, "edited": false, "score": 0, "creation_date": 1573418504, "post_id": 58761677, "comment_id": 103867145, "body": "That explains what is happening, but not why. Why doesn&#39;t Python apply LEGB lookup rules just because the name is also used locally later on? In an interpreted language I wouldn&#39;t expect this to happen. I guess that&#39;s my real question."}], "tags": [], "owner": {"reputation": 67048, "user_id": 388787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f786b1ad349a30e02802ae61b4518fc?s=128&d=identicon&r=PG", "display_name": "Dan D.", "link": "https://stackoverflow.com/users/388787/dan-d"}, "is_accepted": false, "score": 0, "last_activity_date": 1573195397, "creation_date": 1573195397, "answer_id": 58761677, "question_id": 58739877, "link": "https://stackoverflow.com/questions/58739877/python-accessing-global-module-fails-in-function-with-import/58761677#58761677", "title": "Python accessing global module fails in function with import", "body": "<p>The <code>import pickle</code> in the function causes the name <code>pickle</code> to be marked as a local. The code then fails at runtime when it attempts to access a local that has not yet had a value assigned.</p>\n\n<p>The top level <code>import pickle</code> isn't required for this to happen. This is not even specific to <code>import</code>. The following has the same issue:</p>\n\n<pre><code>def func():\n    x # This line will fail\n    x = 1  # This line is the cause of the failure.\n\nfunc()\n</code></pre>\n\n<p>The error is <code>UnboundLocalError: local variable 'x' referenced before assignment</code> without the assignment to mark the name as a local the error is <code>NameError: global name 'x' is not defined</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 61, "user_id": 5541269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33efd42f29f7cafde000f02c4f334012?s=128&d=identicon&r=PG&f=1", "display_name": "user5541269", "link": "https://stackoverflow.com/users/5541269/user5541269"}, "edited": false, "score": 0, "creation_date": 1573221871, "post_id": 58762241, "comment_id": 103821811, "body": "In this case, I expect shadowing to work, but it&#39;s not. Those other explanations talk about <i>hoisting</i>, but printing the local namespace shows that hoisting is not happening. This question has been asked before but I don&#39;t think it has been answered correctly."}, {"owner": {"reputation": 1634, "user_id": 11796003, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yysPJ.jpg?s=128&g=1", "display_name": "Adam Strauss", "link": "https://stackoverflow.com/users/11796003/adam-strauss"}, "reply_to_user": {"reputation": 61, "user_id": 5541269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33efd42f29f7cafde000f02c4f334012?s=128&d=identicon&r=PG&f=1", "display_name": "user5541269", "link": "https://stackoverflow.com/users/5541269/user5541269"}, "edited": false, "score": 0, "creation_date": 1573222360, "post_id": 58762241, "comment_id": 103822085, "body": "In your case it is shadowing. &quot;UnboundLocalError: local variable &#39;pickle&#39; referenced before assignment&quot;, you are importing pickle after calling pickle."}], "tags": [], "owner": {"reputation": 1634, "user_id": 11796003, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yysPJ.jpg?s=128&g=1", "display_name": "Adam Strauss", "link": "https://stackoverflow.com/users/11796003/adam-strauss"}, "is_accepted": false, "score": 0, "last_activity_date": 1573199792, "last_edit_date": 1573199792, "creation_date": 1573198224, "answer_id": 58762241, "question_id": 58739877, "link": "https://stackoverflow.com/questions/58739877/python-accessing-global-module-fails-in-function-with-import/58762241#58762241", "title": "Python accessing global module fails in function with import", "body": "<p>It is <strong>shadowing</strong> of one variable to another variable. Variable declared within a function can overshadow another variable declared outside of it. You can use another word for it <strong>SCOPE</strong></p>\n\n<p>Here you can find explanation and examples as well <a href=\"http://www.oznetnerd.com/python-shadowing/\" rel=\"nofollow noreferrer\">LINK</a>.</p>\n\n<p>Similar question on <a href=\"https://stackoverflow.com/questions/44645109/unboundlocalerror-in-python-while-printing-global-variable\">stack1</a> , <a href=\"https://stackoverflow.com/questions/20125172/how-bad-is-shadowing-names-defined-in-outer-scopes\">stack2</a></p>\n"}], "owner": {"reputation": 61, "user_id": 5541269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33efd42f29f7cafde000f02c4f334012?s=128&d=identicon&r=PG&f=1", "display_name": "user5541269", "link": "https://stackoverflow.com/users/5541269/user5541269"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 97, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1573589396, "creation_date": 1573082984, "last_edit_date": 1573589396, "question_id": 58739877, "link": "https://stackoverflow.com/questions/58739877/python-accessing-global-module-fails-in-function-with-import", "title": "Python accessing global module fails in function with import", "body": "<p>The following program throws <code>UnboundLocalError</code> but I don't understand why.\nIt's a very condensed version of a nasty bug found in one of my scripts.</p>\n\n<p>EDIT: I don't accept the explanation of \"variable hoisting\". I don't think this actually happens in Python. If the function namespace is printed, it shows that <code>pickle</code> does not exist locally. Going by the LEGB lookup rules, Python should find the <code>pickle</code> name in the global namespace. </p>\n\n<p>Sometimes it takes a while to frame the question. I guess the real question is <em>why</em>. I understand what is happening, but why does Python do this? Why does Python break its own LEGB lookup rules?</p>\n\n<pre><code>import pickle\n\ndef func(number):\n    print(\"Global variables=%s\" % repr(globals()))\n    print(\"Local namespace=%s\" % repr(dir()))\n    dir(pickle) # This line will fail\n    import pickle   # This line is the cause of the failure.\n    return number\n\nfunc(5)\n</code></pre>\n\n<p>Program output:</p>\n\n<pre><code>Global variables={'__builtins__': &lt;module '__builtin__' (built-in)&gt;, '__file__': 'c:\\\\python27\\\\globaltext.py', '__package__': None, 'func': &lt;function func at 0x02320E70&gt;, '__name__': '__main__', 'pickle': &lt;module 'pickle' from 'C:\\Python27\\lib\\pickle.pyc'&gt;, '__doc__': None}\nLocal namespace=['number']\nTraceback (most recent call last):\n  File \"test.py\", line 8, in &lt;module&gt;\n    func(5)\n  File \"test.py\", line 4, in func\n    dir(pickle) # This line will fail\nUnboundLocalError: local variable 'pickle' referenced before assignment\n</code></pre>\n"}, {"tags": ["python", "pandas", "list", "dataframe", "concat"], "comments": [{"owner": {"reputation": 86789, "user_id": 1422451, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/sFFvX.jpg?s=128&g=1", "display_name": "Parfait", "link": "https://stackoverflow.com/users/1422451/parfait"}, "edited": false, "score": 0, "creation_date": 1573083500, "post_id": 58739864, "comment_id": 103769818, "body": "<a href=\"https://stackoverflow.com/a/36489724/1422451\">Never call DataFrame.append or pd.concat inside a for-loop. It leads to quadratic copying.</a>"}, {"owner": {"reputation": 86789, "user_id": 1422451, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/sFFvX.jpg?s=128&g=1", "display_name": "Parfait", "link": "https://stackoverflow.com/users/1422451/parfait"}, "edited": false, "score": 0, "creation_date": 1573083626, "post_id": 58739864, "comment_id": 103769844, "body": "Try iterating through letters not dfs: <code>df_list3 = [pd.concat(df_list1[x], df_list2[x]) for x in list(&#39;ABC&#39;)]</code>"}, {"owner": {"reputation": 29, "user_id": 3675256, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70605083b110096f204bcdaf7f06dbb0?s=128&d=identicon&r=PG&f=1", "display_name": "jkat", "link": "https://stackoverflow.com/users/3675256/jkat"}, "reply_to_user": {"reputation": 86789, "user_id": 1422451, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/sFFvX.jpg?s=128&g=1", "display_name": "Parfait", "link": "https://stackoverflow.com/users/1422451/parfait"}, "edited": false, "score": 0, "creation_date": 1573084674, "post_id": 58739864, "comment_id": 103770071, "body": "@Parfait hey but A,B,C are not characters. so I meant writing [A,B,C]. I edited my post"}, {"owner": {"reputation": 86789, "user_id": 1422451, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/sFFvX.jpg?s=128&g=1", "display_name": "Parfait", "link": "https://stackoverflow.com/users/1422451/parfait"}, "edited": false, "score": 0, "creation_date": 1573140667, "post_id": 58739864, "comment_id": 103792082, "body": "Then try elementwise loop with <code>zip</code>: <code>df_list3 = [pd.concat(d1, d2) for d1, d2 in zip(df_list1, df_list2)]</code>"}], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 3675256, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70605083b110096f204bcdaf7f06dbb0?s=128&d=identicon&r=PG&f=1", "display_name": "jkat", "link": "https://stackoverflow.com/users/3675256/jkat"}, "edited": false, "score": 0, "creation_date": 1573171525, "post_id": 58740223, "comment_id": 103804768, "body": "hey thanks @PeptideWitch. If both list are not in order like d1=[B,A,C] and d2=[A,C,B] and still I want to concat A to A and B to B likewise, could you help how can I do it?"}, {"owner": {"reputation": 1336, "user_id": 8763097, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/07748010c90ca48d262a588483d84367?s=128&d=identicon&r=PG&f=1", "display_name": "PeptideWitch", "link": "https://stackoverflow.com/users/8763097/peptidewitch"}, "reply_to_user": {"reputation": 29, "user_id": 3675256, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70605083b110096f204bcdaf7f06dbb0?s=128&d=identicon&r=PG&f=1", "display_name": "jkat", "link": "https://stackoverflow.com/users/3675256/jkat"}, "edited": false, "score": 0, "creation_date": 1573180869, "post_id": 58740223, "comment_id": 103806676, "body": "No worries! So your follow-on question can be taken a few different ways. It comes down to how you know that the list is out of order. You could go through each list and check the index of the dataframe or name of a column, or if you already know the order of the lists then you could make an index list: <code>[1,0,2]</code> and  <code>[0,2,1]</code> then do an iteration: <code>for x in range(len(l))</code> and access the dataframe lists using the <code>x</code> as your indexer -- <code>df_list1[index_list.index(x)]</code>."}], "tags": [], "owner": {"reputation": 1336, "user_id": 8763097, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/07748010c90ca48d262a588483d84367?s=128&d=identicon&r=PG&f=1", "display_name": "PeptideWitch", "link": "https://stackoverflow.com/users/8763097/peptidewitch"}, "is_accepted": true, "score": 1, "last_activity_date": 1573086711, "last_edit_date": 1573086711, "creation_date": 1573085740, "answer_id": 58740223, "question_id": 58739864, "link": "https://stackoverflow.com/questions/58739864/how-to-concatenate-two-dataframeswith-same-names-and-same-columns-from-list-wi/58740223#58740223", "title": "How to Concatenate two dataframes(with same names and same columns) from List without loop in Python?", "body": "<p><s>I don't think you can get past using a loop, but</s> you may be interested in the <code>zip</code> function, which matches the elements of respective lists as you iterate through them.</p>\n\n<pre><code>df_list1=[A,B,C]\ndf_list2=[A,B,C]\nconcat_list = []\n\nfor x, y in zip(df_list1, df_list2):\n    concat_list.append(pd.concat([x, y]))\n</code></pre>\n\n<p><strong>EDIT:</strong></p>\n\n<p>Actually, you could use <code>map</code>:</p>\n\n<pre><code>concat_list = list(map(lambda x: pd.concat([x[0], x[1]), zip(df_list1, df_list2)))\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 3675256, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70605083b110096f204bcdaf7f06dbb0?s=128&d=identicon&r=PG&f=1", "display_name": "jkat", "link": "https://stackoverflow.com/users/3675256/jkat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 235, "favorite_count": 0, "accepted_answer_id": 58740223, "answer_count": 1, "score": 0, "last_activity_date": 1573086711, "creation_date": 1573082897, "last_edit_date": 1573084723, "question_id": 58739864, "link": "https://stackoverflow.com/questions/58739864/how-to-concatenate-two-dataframeswith-same-names-and-same-columns-from-list-wi", "title": "How to Concatenate two dataframes(with same names and same columns) from List without loop in Python?", "body": "<pre><code>df_list1=[A,B,C]\ndf_list2=[A,B,C]\n</code></pre>\n\n<p>I want to use pandas concat to concatenate A(df_list1) to A(df_list2), B to B like wise without loop. Here A, B, C are dataframes. I have tried iterating one of the list and just concatenating one dataframe from each list at a time.</p>\n\n<pre><code>i=0\nfor df in df_list1:\n   l=[df,df_list2[i]]\n   df=pd.concat(l)\n   i=i+1\n</code></pre>\n\n<p>Could someone help me doing this without loop as I have certain time execution requirement(basically I need to reduce time)?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1573082846, "post_id": 58739847, "comment_id": 103769671, "body": "<code>str()</code> returns a string, not a list."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1573082861, "post_id": 58739847, "comment_id": 103769672, "body": "<code>raw_input()</code> returns a string, you don&#39;t need to call <code>str()</code>."}, {"owner": {"reputation": 92827, "user_id": 369, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/DHcF2.png?s=128&g=1", "display_name": "Blorgbeard", "link": "https://stackoverflow.com/users/369/blorgbeard"}, "edited": false, "score": 2, "creation_date": 1573082990, "post_id": 58739847, "comment_id": 103769695, "body": "also probably don&#39;t call the variable <code>list</code> since that&#39;s a python type already.."}, {"owner": {"reputation": 5573, "user_id": 7692859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb1b961fa00ddbd4fccc08e070762a27?s=128&d=identicon&r=PG&f=1", "display_name": "Anis R.", "link": "https://stackoverflow.com/users/7692859/anis-r"}, "edited": false, "score": 0, "creation_date": 1573082991, "post_id": 58739847, "comment_id": 103769696, "body": "What is your user input like?"}], "answers": [{"comments": [{"owner": {"reputation": 333, "user_id": 4435344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8da550af253bf9825c7524fa914c8616?s=128&d=identicon&r=PG&f=1", "display_name": "akozi", "link": "https://stackoverflow.com/users/4435344/akozi"}, "edited": false, "score": 2, "creation_date": 1573083277, "post_id": 58739883, "comment_id": 103769760, "body": "In case @Ellie Doesn&#39;t know <code>.split()</code> takes a singular string and sends it to a list of items where each item is the letters broken by spaces. I.e. <code>&quot;1 2 3 4&quot;.split()</code> would output <code>[&quot;1&quot;, &quot;2&quot;, &quot;3&quot;, &quot;4&quot;]</code>.  Map then casts each of these items to an int."}], "tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": true, "score": 3, "last_activity_date": 1573083019, "creation_date": 1573083019, "answer_id": 58739883, "question_id": 58739847, "link": "https://stackoverflow.com/questions/58739847/python-second-smallest-number-with-user-input/58739883#58739883", "title": "Python - second smallest number with user input", "body": "<p><code>str()</code> and <code>raw_input()</code> return strings, not lists. If you want to get a list of the words the user typed, you need to use <code>split()</code>. And then you need to convert them to integers with <code>int()</code>.</p>\n\n<p>Also, you shouldn't use <code>list</code> as a variable name, since it's the name of a built-in function.</p>\n\n<pre><code>number_list = map(int, raw_input().split())\nfor number in number_list:\n    ...\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 186, "user_id": 9727376, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-I3XDxwAwvms/AAAAAAAAAAI/AAAAAAAAC80/h5w76sa2WE0/photo.jpg?sz=128", "display_name": "Francisco Melo junior", "link": "https://stackoverflow.com/users/9727376/francisco-melo-junior"}, "edited": false, "score": 0, "creation_date": 1573083542, "post_id": 58739910, "comment_id": 103769830, "body": "The answer seems to be similar to the other and although useful do not add anything else."}, {"owner": {"reputation": 5573, "user_id": 7692859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb1b961fa00ddbd4fccc08e070762a27?s=128&d=identicon&r=PG&f=1", "display_name": "Anis R.", "link": "https://stackoverflow.com/users/7692859/anis-r"}, "reply_to_user": {"reputation": 186, "user_id": 9727376, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-I3XDxwAwvms/AAAAAAAAAAI/AAAAAAAAC80/h5w76sa2WE0/photo.jpg?sz=128", "display_name": "Francisco Melo junior", "link": "https://stackoverflow.com/users/9727376/francisco-melo-junior"}, "edited": false, "score": 0, "creation_date": 1573083628, "post_id": 58739910, "comment_id": 103769845, "body": "@FranciscoMelojunior I was writing my answer when Barmar posted his. You&#39;re talking as if I literally copy/pasted his answer."}, {"owner": {"reputation": 186, "user_id": 9727376, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-I3XDxwAwvms/AAAAAAAAAAI/AAAAAAAAC80/h5w76sa2WE0/photo.jpg?sz=128", "display_name": "Francisco Melo junior", "link": "https://stackoverflow.com/users/9727376/francisco-melo-junior"}, "edited": false, "score": 0, "creation_date": 1573084689, "post_id": 58739910, "comment_id": 103770076, "body": "No, just justifying why I downvoted your answer and how you can improve, most of the people only downvote."}, {"owner": {"reputation": 1900, "user_id": 7872793, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v7Css.jpg?s=128&g=1", "display_name": "Connor", "link": "https://stackoverflow.com/users/7872793/connor"}, "reply_to_user": {"reputation": 186, "user_id": 9727376, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-I3XDxwAwvms/AAAAAAAAAAI/AAAAAAAAC80/h5w76sa2WE0/photo.jpg?sz=128", "display_name": "Francisco Melo junior", "link": "https://stackoverflow.com/users/9727376/francisco-melo-junior"}, "edited": false, "score": 1, "creation_date": 1573087097, "post_id": 58739910, "comment_id": 103770606, "body": "@FranciscoMelojunior There will inevitably be similar answers to a question like this. There is only one answer to give. Downvoting people because they have taken the time to write an answer (at the same time as the other answer) is A: inane and B: disincentivizes thoughtful (slow) answers. Furthermore, this is clearly a better answer, because invoking <code>map</code> for an early user seems like a poor choice. Better to use a list comprehension (which I will edit this to use)."}], "tags": [], "owner": {"reputation": 5573, "user_id": 7692859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb1b961fa00ddbd4fccc08e070762a27?s=128&d=identicon&r=PG&f=1", "display_name": "Anis R.", "link": "https://stackoverflow.com/users/7692859/anis-r"}, "is_accepted": false, "score": 0, "last_activity_date": 1573119446, "last_edit_date": 1573119446, "creation_date": 1573083240, "answer_id": 58739910, "question_id": 58739847, "link": "https://stackoverflow.com/questions/58739847/python-second-smallest-number-with-user-input/58739910#58739910", "title": "Python - second smallest number with user input", "body": "<p>The issue is that <code>raw_input()</code> returns a string, not a list. So, you need to split your string into multiple parts (each part being one of the numbers) in order to get a list from your input.</p>\n\n<p>Assuming your input is of the following form (i.e. the numbers separated by commas):</p>\n\n<pre><code>input = '1,2,3,4,5,6'\n</code></pre>\n\n<p>You can split this string by the comma character to get a list like so:</p>\n\n<pre><code>input_list_strings = input.split(',')\n#input_list_strings = ['1', '2', '3', '4', '5', '6']\n</code></pre>\n\n<p>Then you need to convert the character list to integers</p>\n\n<pre><code>input_list = [int(string) for string in input_list_strings]\n#input_list = [1, 2, 3, 4, 5, 6]\n</code></pre>\n\n<p>You could do all this in one line with: </p>\n\n<pre><code>input_list = [int(string) for string in input.split(',')]\n</code></pre>\n\n<p>Then you should be able to continue with your algorithm normally.</p>\n\n<p>The stuff in the brackets is called a list comprehension, it's generally considered more pythonic to use a list comprehension than it is to use <code>map</code> because it's more readable. You can read about them <a href=\"https://www.pythonforbeginners.com/basics/list-comprehensions-in-python\" rel=\"nofollow noreferrer\">here</a>. </p>\n"}], "owner": {"reputation": 65, "user_id": 10321989, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-grIKTeSUkXI/AAAAAAAAAAI/AAAAAAAAAWo/DWZAfPqyGLs/photo.jpg?sz=128", "display_name": "Ellie", "link": "https://stackoverflow.com/users/10321989/ellie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "accepted_answer_id": 58739883, "answer_count": 2, "score": 2, "last_activity_date": 1573119446, "creation_date": 1573082696, "question_id": 58739847, "link": "https://stackoverflow.com/questions/58739847/python-second-smallest-number-with-user-input", "title": "Python - second smallest number with user input", "body": "<p>I found a <a href=\"https://www.youtube.com/watch?v=IuHTPffYMoM\" rel=\"nofollow noreferrer\">YouTube video</a> with a program to find the second smallest number in a list. I am trying to modify this code so it works with user input. This is the code from the video:</p>\n\n<pre><code>numbers = [ 6, 6, 6, 4, 3, 4, 5 ]\n\nprint(f\"Number: {numbers}\")\n\nfirst = 10000 \nsecond = 10000\n\nfor number in numbers:\n    if number &lt; first:\n        second = first\n        first = number\n    elif number &gt; first and number &lt; second:\n        second = number\n\nprint(f\"First:  {first}\")\nprint(f\"Second: {second}\")\n</code></pre>\n\n<p>And this is what I have so far but the output is always 99 and I can't figure out how to solve it. (I work with python 2.7)</p>\n\n<pre><code>list = str(raw_input())\n\nfirst = 99\nsecond = 99\n\nfor number in list:\n    if number &lt; first:\n        second = first\n        first = number\n    elif first &lt; number &lt; second:\n        second = number\n\nprint \"The second smallest number is : %d\" % second\n</code></pre>\n\n<p>I know there are already some questions about this topic but they all work with functions and I don't know how to use them yet. </p>\n"}, {"tags": ["python", "networkx"], "comments": [{"owner": {"reputation": 551, "user_id": 3277821, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/34RdS.jpg?s=128&g=1", "display_name": "sboysel", "link": "https://stackoverflow.com/users/3277821/sboysel"}, "edited": false, "score": 1, "creation_date": 1573091500, "post_id": 58739785, "comment_id": 103771538, "body": "Hi @killerownage2006, the code is very well documented in the comments.  Is there something specific you&#39;re having trouble with?"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 11221640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b288e5c31a3dc245da1d09d23de2982?s=128&d=identicon&r=PG&f=1", "display_name": "killerownage2006", "link": "https://stackoverflow.com/users/11221640/killerownage2006"}, "edited": false, "score": 0, "creation_date": 1573091906, "post_id": 58740846, "comment_id": 103771616, "body": "Thank you alot! That helped with my understanding :)"}], "tags": [], "owner": {"reputation": 17226, "user_id": 2966723, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e40a62626d129d5df080d4d57c22b53d?s=128&d=identicon&r=PG&f=1", "display_name": "Joel", "link": "https://stackoverflow.com/users/2966723/joel"}, "is_accepted": true, "score": 1, "last_activity_date": 1573093964, "last_edit_date": 1573093964, "creation_date": 1573091477, "answer_id": 58740846, "question_id": 58739785, "link": "https://stackoverflow.com/questions/58739785/scale-free-network-using-preferential-attachment-algorithm/58740846#58740846", "title": "Scale-free network using preferential attachment algorithm", "body": "<p>So the first part of this makes sure that <code>m</code> is at least 1 and <code>n&gt;m</code>.  </p>\n\n<pre><code>def scale_free(n,m):\n    if m &lt; 1 or  m &gt;=n: \n        raise nx.NetworkXError(\"Preferential attactment algorithm must have m &gt;= 1\"\n                               \" and m &lt; n, m = %d, n = %d\" % (m, n)) \n</code></pre>\n\n<p>Then it creates a graph with no edges and the first <code>m</code> nodes <code>0</code>, <code>1</code>, ..., <code>m-1</code>.\nThis looks a bit different from the standard barabasi-albert graph which starts from a connected version, rather than a version without any edges.</p>\n\n<pre><code>    # Add m initial nodes (m0 in barabasi-speak)\n    G=nx.empty_graph(m)\n</code></pre>\n\n<p>Now it's going to start adding new nodes 1 at a time and connecting them to existing nodes based on various rules.  It first creates a set of \"targets\" that has all of the nodes in the edge-less graph.</p>\n\n<pre><code>    # Target nodes for new edges\n    targets=list(range(m))\n    # List of existing nodes, with nodes repeated once for each adjacent edge\n    repeated_nodes=[]\n    # Start adding the other n-m nodes. The first node is m.\n    source=m\n</code></pre>\n\n<p>Now it's going to add each node 1 at a time.  When it does that, it will add the new node with edges to <code>m</code> of the previous existing nodes.  Those <code>m</code> previous nodes have been stored in a list called <code>targets</code>.</p>\n\n<pre><code>    while source&lt;n:\n</code></pre>\n\n<p>Here it creates those edges</p>\n\n<pre><code>        # Add edges to m nodes from the source.\n        G.add_edges_from(zip([source]*m,targets))\n</code></pre>\n\n<p>Now it's going to decide who will get those edges when the next node is added.  It's supposed to choose them with probability proportional to their degree  The way it does that is by having a list <code>repeated_nodes</code> which has each node appearing once per edge.  It then chooses a random set of <code>m</code> nodes from that to be the new targets.  Depending on how <code>_random_subset</code> is defined, it might or might not be able to choose the same node several times to be a target in the same step.</p>\n\n<pre><code>        # Add one node to the list for each new edge just created.\n        repeated_nodes.extend(targets)\n        # And the new node \"source\" has m edges to add to the list.\n        repeated_nodes.extend([source]*m)\n        # Now choose m unique nodes from the existing nodes\n        # Pick uniformly from repeated_nodes (preferential attachement)\n        targets = _random_subset(repeated_nodes,m)\n        source += 1\n    return G\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 11221640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b288e5c31a3dc245da1d09d23de2982?s=128&d=identicon&r=PG&f=1", "display_name": "killerownage2006", "link": "https://stackoverflow.com/users/11221640/killerownage2006"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 463, "favorite_count": 1, "accepted_answer_id": 58740846, "answer_count": 1, "score": 0, "last_activity_date": 1573093964, "creation_date": 1573082106, "last_edit_date": 1573089557, "question_id": 58739785, "link": "https://stackoverflow.com/questions/58739785/scale-free-network-using-preferential-attachment-algorithm", "title": "Scale-free network using preferential attachment algorithm", "body": "<p>I'm having trouble understanding what this piece of code does. Please could someone step by step go through the code and explain how it works and what it's doing? </p>\n\n<pre><code>def scale_free(n,m):\n    if m &lt; 1 or  m &gt;=n: \n        raise nx.NetworkXError(\"Preferential attactment algorithm must have m &gt;= 1\"\n                               \" and m &lt; n, m = %d, n = %d\" % (m, n)) \n    # Add m initial nodes (m0 in barabasi-speak)\n    G=nx.empty_graph(m)\n\n    # Target nodes for new edges\n    targets=list(range(m))\n    # List of existing nodes, with nodes repeated once for each adjacent edge\n    repeated_nodes=[]\n    # Start adding the other n-m nodes. The first node is m.\n    source=m\n    while source&lt;n:\n        # Add edges to m nodes from the source.\n        G.add_edges_from(zip([source]*m,targets))\n        # Add one node to the list for each new edge just created.\n        repeated_nodes.extend(targets)\n        # And the new node \"source\" has m edges to add to the list.\n        repeated_nodes.extend([source]*m)\n        # Now choose m unique nodes from the existing nodes\n        # Pick uniformly from repeated_nodes (preferential attachement)\n        targets = _random_subset(repeated_nodes,m)\n        source += 1\n    return G\n</code></pre>\n"}, {"tags": ["python", "html"], "comments": [{"owner": {"reputation": 30153, "user_id": 12299000, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0pja9.png?s=128&g=1", "display_name": "kaya3", "link": "https://stackoverflow.com/users/12299000/kaya3"}, "edited": false, "score": 1, "creation_date": 1573082055, "post_id": 58739772, "comment_id": 103769457, "body": "Two <code>unescape</code> calls are are required here because the string has been escaped twice."}, {"owner": {"reputation": 57, "user_id": 12334839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aad743f34dab8e55c9ca5704c0b65dcf?s=128&d=identicon&r=PG&f=1", "display_name": "H8oddo", "link": "https://stackoverflow.com/users/12334839/h8oddo"}, "reply_to_user": {"reputation": 30153, "user_id": 12299000, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0pja9.png?s=128&g=1", "display_name": "kaya3", "link": "https://stackoverflow.com/users/12299000/kaya3"}, "edited": false, "score": 0, "creation_date": 1573082321, "post_id": 58739772, "comment_id": 103769535, "body": "But technically, you might need to call this function more than twice, how do you control to make sure all characters are unescaped?"}, {"owner": {"reputation": 30153, "user_id": 12299000, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0pja9.png?s=128&g=1", "display_name": "kaya3", "link": "https://stackoverflow.com/users/12299000/kaya3"}, "edited": false, "score": 0, "creation_date": 1573082463, "post_id": 58739772, "comment_id": 103769568, "body": "You should unescape as many times as the string is escaped. Presumably the string comes from an API of some sort, which escapes the string more than once (which is strange), but at least it escapes it a predictable number of times (2 in this case)."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1573082701, "post_id": 58739772, "comment_id": 103769634, "body": "You generally should only need to unescape once. If it still has entities in it, it should be because the text was trying to display the entity literally. E.g. <code>The HTML entity for &amp; is &amp;amp;</code>"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1573082796, "post_id": 58739772, "comment_id": 103769663, "body": "If it has actually been escaped multiple times, that&#39;s usually a bug in the source of the data. Or maybe your code mistakenly escaped data that was already escaped."}], "answers": [{"tags": [], "owner": {"reputation": 2929, "user_id": 3566606, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/B36KF.jpg?s=128&g=1", "display_name": "jonathan.scholbach", "link": "https://stackoverflow.com/users/3566606/jonathan-scholbach"}, "is_accepted": true, "score": 0, "last_activity_date": 1573083555, "last_edit_date": 1573083555, "creation_date": 1573082489, "answer_id": 58739826, "question_id": 58739772, "link": "https://stackoverflow.com/questions/58739772/is-there-a-way-to-avoid-multiple-html-unescape-calls-in-python-3/58739826#58739826", "title": "Is there a way to avoid multiple html.unescape calls in Python 3?", "body": "<p>Comments are right when they say that there is usually something wrong with our data when it is escaped multiple levels deep. However, if we want to accept this problem as it is, and still need to solve it, so if we receive a string that is escaped potentially multiple times, and we do not know how often it is escaped, we could just unescape the heck out of it, i.e. until it does not change any more.</p>\n\n<p>We could do this with a <code>while</code>-loop as follows:</p>\n\n<pre><code>import html\n\n\ndef ultimately_unescape(s: str) -&gt; str:\n    unescaped = \"\"\n    while unescaped != s:\n        s = html.unescape(s)\n        unescaped = html.unescape(s)\n\n    return s\n</code></pre>\n\n<p>which gives us:</p>\n\n<pre><code>&gt;&gt;&gt; ultimately_unescape(\"Anchor says Buckingham Palace pressure killed ABC&amp;amp;#39;s story on Epstein\"))\n\"Anchor says Buckingham Palace pressure killed ABC's story on Epstein\"\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 12334839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aad743f34dab8e55c9ca5704c0b65dcf?s=128&d=identicon&r=PG&f=1", "display_name": "H8oddo", "link": "https://stackoverflow.com/users/12334839/h8oddo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 58739826, "answer_count": 1, "score": 0, "last_activity_date": 1573083555, "creation_date": 1573081968, "question_id": 58739772, "link": "https://stackoverflow.com/questions/58739772/is-there-a-way-to-avoid-multiple-html-unescape-calls-in-python-3", "title": "Is there a way to avoid multiple html.unescape calls in Python 3?", "body": "<p>So I've been trying to get rid of special HTML characters and used html.unescape for that. The problem is if there are 2 special characters in a row the functions doesn't really work how I would've wanted</p>\n\n<p>I tried multiple function calls like html.unescape(html.unescape(text)), but surely that's a terrible idea</p>\n\n<pre><code>str='Anchor says Buckingham Palace pressure killed ABC&amp;amp;#39;s story on Epstein'\nprint(html.unescape(str))\n</code></pre>\n\n<p>So instead of getting all the characters replaced, the output is:</p>\n\n<pre><code>Anchor says Buckingham Palace pressure killed ABC&amp;#39;s story on Epstein\n</code></pre>\n\n<p>Is there a way to deal with this kind of a problem?</p>\n"}, {"tags": ["python", "python-3.x", "turtle-graphics", "flappy-bird-clone"], "comments": [{"owner": {"reputation": 374, "user_id": 6509779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7Oejm.jpg?s=128&g=1", "display_name": "Wilco", "link": "https://stackoverflow.com/users/6509779/wilco"}, "edited": false, "score": 0, "creation_date": 1573083488, "post_id": 58739746, "comment_id": 103769816, "body": "I&#39;m just learning python too, so I don&#39;t have an answer but I did have a similar issue when I was playing .wav files in my pong clone. <a href=\"https://github.com/WilcoxJ/Pong\" rel=\"nofollow noreferrer\">github.com/WilcoxJ/Pong</a>   The fix was to have them play asynchronously so they wouldn&#39;t pause all other actions while it played."}, {"owner": {"reputation": 21, "user_id": 12334808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40410eb33c52ff9012ef9f61184a1a2b?s=128&d=identicon&r=PG&f=1", "display_name": "Dilano55", "link": "https://stackoverflow.com/users/12334808/dilano55"}, "reply_to_user": {"reputation": 374, "user_id": 6509779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7Oejm.jpg?s=128&g=1", "display_name": "Wilco", "link": "https://stackoverflow.com/users/6509779/wilco"}, "edited": false, "score": 0, "creation_date": 1573152233, "post_id": 58739746, "comment_id": 103797948, "body": "how would i go about doing that? ive tried googling a little bit but I didnt really understand anything from that."}, {"owner": {"reputation": 374, "user_id": 6509779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7Oejm.jpg?s=128&g=1", "display_name": "Wilco", "link": "https://stackoverflow.com/users/6509779/wilco"}, "edited": false, "score": 0, "creation_date": 1573161729, "post_id": 58739746, "comment_id": 103801876, "body": "Seems like turtle may not be the ideal lib to use for this, butI think you need to change your obstacle for loops so that player and obstacle turtle movement take place in the same block. I found this which might help you:   <a href=\"https://stackoverflow.com/questions/53199459/how-do-i-run-two-turtles-in-python-simultaneously\" title=\"how do i run two turtles in python simultaneously\">stackoverflow.com/questions/53199459/&hellip;</a>"}, {"owner": {"reputation": 21, "user_id": 12334808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40410eb33c52ff9012ef9f61184a1a2b?s=128&d=identicon&r=PG&f=1", "display_name": "Dilano55", "link": "https://stackoverflow.com/users/12334808/dilano55"}, "reply_to_user": {"reputation": 374, "user_id": 6509779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7Oejm.jpg?s=128&g=1", "display_name": "Wilco", "link": "https://stackoverflow.com/users/6509779/wilco"}, "edited": false, "score": 0, "creation_date": 1573165036, "post_id": 58739746, "comment_id": 103803032, "body": "mmm thank you very much ill try to figure it out from this and if i cant ill just move on to my next project or maybe create flappybird in pygame. I might comeback to this later if i cant figure it out right now tho. Thanks alot anyway."}, {"owner": {"reputation": 374, "user_id": 6509779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7Oejm.jpg?s=128&g=1", "display_name": "Wilco", "link": "https://stackoverflow.com/users/6509779/wilco"}, "edited": false, "score": 0, "creation_date": 1573165140, "post_id": 58739746, "comment_id": 103803064, "body": "np! If you get a fix post it here so I can learn too! :D"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 12334808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40410eb33c52ff9012ef9f61184a1a2b?s=128&d=identicon&r=PG&f=1", "display_name": "Dilano55", "link": "https://stackoverflow.com/users/12334808/dilano55"}, "edited": false, "score": 0, "creation_date": 1573215896, "post_id": 58758881, "comment_id": 103818836, "body": "wow thanks alot! i dont have lot of time on my hands right now since ive got some exams for my school. So ill look at this later this week. Thanks alot tho!"}], "tags": [], "owner": {"reputation": 32921, "user_id": 5771269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6a5b618f5bd197150a6186318beba7?s=128&d=identicon&r=PG&f=1", "display_name": "cdlane", "link": "https://stackoverflow.com/users/5771269/cdlane"}, "is_accepted": false, "score": 1, "last_activity_date": 1573173949, "creation_date": 1573173949, "answer_id": 58758881, "question_id": 58739746, "link": "https://stackoverflow.com/questions/58739746/when-press-a-key-to-move-the-turtle-up-my-other-turtles-freeze/58758881#58758881", "title": "When press a key to move the turtle up, my other turtles freeze", "body": "<p>One problem is that your horizontal motion is controlled, out of sync, by a <code>while True:</code> loop but your vertical motion is controlled, in sync, by a keyboard event.  We need to get both motions in sync using events via replacing your <code>while True:</code> with an <code>ontimer()</code> event.  Here's my complete rework of your code along these lines with a few simplifications for example purposes:</p>\n\n<pre><code>from turtle import Screen, Turtle\nfrom random import choice, randrange\n\nCOLORS = [\"red\", \"green\", \"yellow\", \"blue\", \"purple\", \"pink\"]\n\nPLAYER_SPEED = 50\n\nGRAVITY = 3\n\nNUMBER_OBSTACLES_UPPER = 2\nNUMBER_OBSTACLES_LOWER = 2\n\n# movement\ndef playerup():\n    screen.onkeypress(None, 'space')  # disable handler inside handler\n\n    player.sety(player.ycor() + PLAYER_SPEED)\n\n    if player.ycor() &gt; 287:\n        player.speed('fastest')\n        player.sety(287)\n        player.speed('slowest')\n\n    screen.onkeypress(playerup, 'space')\n\n# collision\ndef hit(t1, t2):\n    xdistance = abs(t1.xcor() - t2.xcor())\n\n    if xdistance &gt;= 20:\n        return False\n\n    ydistance = abs(t1.ycor() - t2.ycor())\n\n    return ydistance &lt; 130\n\n# border\ndef fall():\n    return player.ycor() &lt; -300\n\ndef ceiling():\n    return player.ycor() &gt; 300\n\n# main program loop\ndef move():\n    global points, obstacle_speed_upper, obstacle_speed_lower\n\n    player.sety(player.ycor() - GRAVITY)\n\n    for obstacle in obstacles_upper:\n        obstacle.setx(obstacle.xcor() - obstacle_speed_upper)\n\n        if obstacle.xcor() &lt; -270:\n            obstacle.hideturtle()\n            obstacle.setposition(randrange(230, 300), randrange(140, 190))\n            obstacle.showturtle()\n            obstacle_speed_upper += 1\n\n            points += 1\n            scoreboard.clear()\n            scoreboard.write(points, font=('Arial', 30,))\n\n        if hit(player, obstacle):\n            player.hideturtle()\n            gameover.write(\"Game Over\", align='center', font=('Arial', 50,))\n            return\n\n    for obstacle in obstacles_lower:\n        obstacle.setx(obstacle.xcor() - obstacle_speed_lower)\n\n        if obstacle.xcor() &lt; -270:\n            obstacle.hideturtle()\n            obstacle.setposition(randrange(230, 300), - randrange(160, 190))\n            obstacle.showturtle()\n            obstacle_speed_lower += 1\n\n            points += 1\n            scoreboard.clear()\n            scoreboard.write(points, font=('Arial', 30,))\n\n        if hit(player, obstacle):\n            player.hideturtle()\n            gameover.write(\"Game Over\", align='center', font=('Arial', 50,))\n            return\n\n    if ceiling() or fall():\n        player.hideturtle()\n        gameover.write(\"Game Over\", align='center', font=('Arial', 50,))\n        return\n\n    screen.ontimer(move, 100)\n\n# starting conditions\nscreen = Screen()\nscreen.setup(750, 750)\nscreen.bgcolor('black')\nscreen.title(\"Game Screen\")\n\n# borders\nbox = Turtle()\nbox.hideturtle()\nbox.color('blue')\nbox.speed('fastest')\nbox.pensize(3)\n\nbox.penup()\nbox.setpos(-300, -300)\nbox.pendown()\n\nfor _ in range(4):\n    box.forward(600)\n    box.left(90)\n\ngameover = Turtle()\ngameover.hideturtle()\ngameover.color('red')\ngameover.penup()\ngameover.sety(-25)\n\npoints = 0\n\nscoreboard = Turtle()\nscoreboard.hideturtle()\nscoreboard.color('blue')\nscoreboard.penup()\nscoreboard.setpos(-300, 320)\nscoreboard.write(points, font=('Arial', 30,))\n\nplayer = Turtle()\nplayer.hideturtle()\nplayer.shape('turtle')\nplayer.speed('slowest')\nplayer.color('yellow')\nplayer.setheading(90)\nplayer.penup()\nplayer.setx(-200)\nplayer.showturtle()\n\n# obstacle list\nobstacle_speed_upper = 3\nobstacles_upper = []\n\nfor _ in range(NUMBER_OBSTACLES_UPPER):\n    obstacle = Turtle()\n    obstacle.hideturtle()\n    obstacle.shape('square')\n    obstacle.turtlesize(12, 3)\n    obstacle.speed('fastest')\n    obstacle.color(choice(COLORS))\n\n    obstacle.penup()\n    xobs = randrange(-100, 280)\n    yobs = randrange(145, 190)\n    obstacle.setposition(xobs, yobs)\n\n    obstacle.showturtle()\n\n    obstacles_upper.append(obstacle)\n\n# lower obstacles list\nobstacle_speed_lower = 3\nobstacles_lower = []\n\nfor _ in range(NUMBER_OBSTACLES_LOWER):\n    obstacle = Turtle()\n    obstacle.hideturtle()\n    obstacle.shape('square')\n    obstacle.turtlesize(12, 3)\n    obstacle.speed('fastest')\n    obstacle.color(choice(COLORS))\n\n    obstacle.penup()\n    xobs = randrange(-100, 280)\n    yobs = randrange(160, 190)\n    obstacle.setposition(xobs, -yobs)\n\n    obstacle.showturtle()\n\n    obstacles_lower.append(obstacle)\n\nscreen.onkeypress(playerup, 'space')\nscreen.listen()\n\nmove()\n\nscreen.mainloop()\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 12334808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40410eb33c52ff9012ef9f61184a1a2b?s=128&d=identicon&r=PG&f=1", "display_name": "Dilano55", "link": "https://stackoverflow.com/users/12334808/dilano55"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1573174178, "creation_date": 1573081772, "last_edit_date": 1573174178, "question_id": 58739746, "link": "https://stackoverflow.com/questions/58739746/when-press-a-key-to-move-the-turtle-up-my-other-turtles-freeze", "title": "When press a key to move the turtle up, my other turtles freeze", "body": "<p>When I run my code and I move my turtle up with the space bar, all the obstacles, that are supposed to be moving, stop moving. What causes the problem and how do I fix this?</p>\n\n<p>I have no idea what can cause this problem and I've tried Googling but can't find anything. Since this is my first week of trying out Python, or programming in general, I have no idea what I've done wrong.</p>\n\n<pre><code>import turtle\nimport math\nimport random\n#starting conditions\nplayer = turtle.Turtle()\nplayer.hideturtle()\nplayer.penup()\nplayer.shape(\"turtle\")\nplayer.setheading(90)\nplayer.setpos(-200,0)\nplayer.speed(1)\nplayer.color(\"yellow\")\ncanvas = turtle.Screen()\ncanvas.bgcolor(\"black\")\ncanvas.title(\"gamescreen\")\ngameover = turtle.Turtle()\ngameover.penup()\ngameover.hideturtle()\ngameover.color(\"red\")\ngameover.speed(0)\ngameover.setpos(-150, 330)\nscoreboard = turtle.Turtle()\nscoreboard.hideturtle()\nscoreboard.color(\"blue\")\nscoreboard.penup()\nscoreboard.setpos(-300,320)\n#borders\nbox = turtle.Turtle()\nbox.speed(0)\nbox.hideturtle()\nbox.setheading(0)\nbox.color(\"blue\")\nbox.pensize(3)\nbox.penup()\nbox.setpos(-300,-300)\nfor i in range(4):\n    box.pendown()\n    box.forward(600)\n    box.left(90)\nplayer.showturtle()\n#movement\nspd = 50\ndef playerup():\n    player.sety(player.ycor()+ spd)\n    if (player.ycor()+ spd) &gt; 287:\n        player.speed(0)\n        player.sety(287)\n        player.speed(1)\ndef playerdown():\n    player.sety(player.ycor()- spd)\n    if (player.ycor()+ spd) &lt; -287:\n        player.speed(0)\n        player.sety(-287)\n        player.speed(1)\nturtle.listen()\ngravity = 3\nobsspd = 3\n#collision\ndef hit(t1, t2):\n              xdistance = t1.xcor()-t2.xcor()\n              ydistance = t1.ycor()-t2.ycor()\n              if (abs(xdistance) &lt; 20) and (abs(ydistance) &lt; 130):\n               return True\n\n              else:\n                  return False\n\n\n#obstacle list\nnumber_obstacles = 2\nobstacles = []\nnumberslistx = list(range(-100,280))\nnumberslisty = list(range(143,190))  \n\nfor i in range(number_obstacles):\n    obstacles.append(turtle.Turtle())\nfor obstacle in obstacles:\n    obstacle.hideturtle()\n    obstacle.speed(0)\n    obstacle.color(\"green\")\n    obstacle.penup()\n    obstacle.shape(\"square\")\n    obstacle.turtlesize(12,3)\n    xobs = random.choice(numberslistx)\n    yobs = random.choice(numberslisty)\n    obstacle.setposition(xobs,yobs)\n    obstacle.showturtle()\n#obstacle2 list\nnumber_obstacles2 = 2\nobstacles2 = []\nnumberslistx = list(range(-100,280))\nnumberslisty = list(range(160,190))           \nfor i in range (number_obstacles2):\n    obstacles2.append(turtle.Turtle())\nfor obstacle2 in obstacles2:\n    obstacle2.hideturtle()\n    obstacle2.speed(0)\n    obstacle2.color(\"green\")\n    obstacle2.penup()\n    obstacle2.shape(\"square\")\n    xobs = random.choice(numberslistx)\n    yobs = random.choice(numberslisty)\n    obstacle2.turtlesize(12,3)\n    obstacle2.setposition(xobs,-yobs)\n    obstacle2.showturtle()\n    if(obstacle.xcor()-obstacle2.xcor())&gt; 10:\n        obstacle.setposition(xobs,yobs)\n        obstacle2.setposition(xobs,-yobs)\n\n\n#border\ndef fall():\n    if (player.ycor()&lt; -300):\n        return True\ndef ceiling():\n    if (player.ycor() &gt; 300):\n        return True\ncolors = [\"red\", \"green\",\"yellow\",\"blue\",\"purple\",\"pink\"]\npoints = 1\nwhile True:\n    player.sety(player.ycor()-gravity)\n    xresetpos = random.choice(range(230,300))\n    yresetpos = random.choice(range(140,190))\n\n    for obstacle in obstacles:\n        obstacle.setx(obstacle.xcor()-obsspd)\n        if (obstacle.xcor()-obsspd) &lt; -270:\n            obstacle.hideturtle()\n            obstacle.setx(xresetpos)\n            obstacle.sety(yresetpos)\n            obstacle.showturtle()\n            obsspd+=1\n            points += 1\n            display = points\n            scoreboard.clear()\n            scoreboard.write(display)\n            player.color(random.choice(colors))\n            obstacle.color(random.choice(colors))\n\n\n    for obstacle2 in obstacles2:\n        obstacle2.setx(obstacle2.xcor()-(obsspd))\n        if (obstacle2.xcor()-obsspd) &lt; -270:\n            obstacle2.hideturtle()                   \n            obstacle2.setx(xresetpos)\n            obstacle2.sety(-(int(yresetpos))-15)\n            obstacle2.showturtle()\n            player.color(random.choice(colors))\n            obstacle2.color(random.choice(colors))\n        if hit(player, obstacle):\n            player.hideturtle()\n            player.setpos(400,0)\n            gameover.color(\"red\")\n            gameover.setpos(-150,-20)\n            gameover.write(\"Game over\",False,\"left\",(\"Arial\",50,))\n            gameover.setpos(-160,-200)\n            gameover.write(\"Press x to play again\",False,\"left\",(\"Arial\",30,))\n            break\n        if hit(player, obstacle2):\n            player.hideturtle()\n            player.setpos(400,0)\n            gameover.setpos(-150,-20)\n            gameover.write(\"Game over\",False,\"left\",(\"Arial\",50,))\n            gameover.setpos(-160,-200)\n            gameover.write(\"Press x to play again\",False,\"left\",(\"Arial\",30,))\n            break\n\n    if fall():\n        player.hideturtle()\n        player.setpos(400,0)\n        gameover.setpos(-150,-20)\n        gameover.write(\"Game over\",False,\"left\",(\"Arial\",50,))\n        gameover.setpos(-160,-200)\n        gameover.write(\"Press x to play again\",False,\"left\",(\"Arial\",30,))\n        break\n    if ceiling():\n        player.setycor(280)\n    #if score(player,obstacle1):\n     #   points += 1\n     #   display = points\n     #   scoreboard.clear()\n      #  scoreboard.write(display)\n    turtle.onkeypress(playerup, \"space\")\n    #turtle.onkeypress(playerdown, \"Down\")\n    #if player.xcor() is obstacle1.xcor():\n     #   points += 1\n     #   scoreboard.clear()\n      #  scoreboard.write(points)\n\n#balken stoppen niet als jij beweegt\n</code></pre>\n"}, {"tags": ["python", "pandas", "merge"], "comments": [{"owner": {"reputation": 423, "user_id": 11865845, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-CO7J2olZJzM/AAAAAAAAAAI/AAAAAAAAIg8/9pROx6wG_gQ/photo.jpg?sz=128", "display_name": "Peter", "link": "https://stackoverflow.com/users/11865845/peter"}, "edited": false, "score": 0, "creation_date": 1573084251, "post_id": 58739744, "comment_id": 103769992, "body": "@Quang Hoang , Do you have an clue in how I can accomplish that? I missed this step in my other question, I need the count of leads to be able to get it done"}, {"owner": {"reputation": 3746, "user_id": 3704368, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/1585b68aa4256705af091781aa50497a?s=128&d=identicon&r=PG&f=1", "display_name": "min2bro", "link": "https://stackoverflow.com/users/3704368/min2bro"}, "edited": false, "score": 0, "creation_date": 1573095719, "post_id": 58739744, "comment_id": 103772382, "body": "How did you get those Lead column values in the desired output dataframe, For campaign id 154 there are only 2 values in cw. How did you get 5?"}], "answers": [{"tags": [], "owner": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "is_accepted": true, "score": 1, "last_activity_date": 1573136921, "last_edit_date": 1573136921, "creation_date": 1573136505, "answer_id": 58750746, "question_id": 58739744, "link": "https://stackoverflow.com/questions/58739744/how-to-merge-2-df-based-on-comparison-of-2-columns-to-match-1-column/58750746#58750746", "title": "How to merge 2 df based on comparison of 2 columns to match 1 column", "body": "<p>I would first set <code>id_name</code> as index in <code>g_spend</code>, then do a <code>replace</code> on <code>cw</code>, followed by a <code>value_counts</code>:</p>\n\n<pre><code>s = (cw.campaignid\n       .replace(g_spend.set_index('id_name').campaignid\n       .value_counts()\n       .to_frame('leads')\n    )\n\ng_spend = g_spend.merge(s, left_on='campaignid', right_index=True)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>  campaignid     id_name  cost  leads\n0        154   campaign1    15      5\n1        155   campaign2    12      1\n2       1566  campaign33    12      3\n3        158   campaign4    33      2\n</code></pre>\n"}], "owner": {"reputation": 423, "user_id": 11865845, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-CO7J2olZJzM/AAAAAAAAAAI/AAAAAAAAIg8/9pROx6wG_gQ/photo.jpg?sz=128", "display_name": "Peter", "link": "https://stackoverflow.com/users/11865845/peter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 58750746, "answer_count": 1, "score": 0, "last_activity_date": 1573136921, "creation_date": 1573081747, "question_id": 58739744, "link": "https://stackoverflow.com/questions/58739744/how-to-merge-2-df-based-on-comparison-of-2-columns-to-match-1-column", "title": "How to merge 2 df based on comparison of 2 columns to match 1 column", "body": "<p>How to .merge 2 df, 1 column to match 2 columns ??</p>\n\n<ul>\n<li>The goal is to merge 2 df to have count of records for every campaign id from a REF table to the Data by id.</li>\n<li>The issue .merge just compare 1 column with 1 column </li>\n</ul>\n\n<p>The Data is mess up and for some rows there are id names rather then id's.</p>\n\n<p>It works if I want to merge 1 column to 1 column, or 2 columns to 2 columns, but NOT for 1 column to 2 columns</p>\n\n<p>Reff table</p>\n\n<pre><code>g_spend =\n\ncampaignid   id_name      cost\n\n154          campaign1    15\n155          campaign2    12\n1566         campaign33   12\n158          campaign4    33\n\n</code></pre>\n\n<p>Data</p>\n\n<pre><code>cw = \n\ncampaignid\n\n154\n154\n155\ncampaign1    \ncampaign33\n1566\n158\ncampaign1    \ncampaign1    \ncampaign33\ncampaign4\n\n</code></pre>\n\n<p>Desired output</p>\n\n<pre><code>\n\ng_spend =\n\ncampaignid  id_name      cost    leads\n\n154        campaign1    15       5\n155        campaign2    12       0\n1566       campaign33   12       3\n158        campaign4    33       2\n\n</code></pre>\n\n<p>What I done..</p>\n\n<pre><code># Just work for one column\n\ncw.head()\ngrouped_cw = cw.groupby([\"campaignid\"]).count()\ngrouped_cw.rename(columns={'reach':'leads'}, inplace=True)\n\ngrouped_cw = pd.DataFrame(grouped_cw)\n\n\n# now merging\ng_spend.campaignid = g_spend.campaignid.astype(str)\n\ng_spend = g_spend.merge(grouped_cw, left_on='campaignid', right_index=True)\n\n</code></pre>\n"}, {"tags": ["python", "multiprocessing", "python-3.7"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1573081789, "post_id": 58739710, "comment_id": 103769399, "body": "use a <code>multiprocessing.Manager</code> object and create a list from that."}, {"owner": {"reputation": 25770, "user_id": 5349916, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/QovYv.jpg?s=128&g=1", "display_name": "MisterMiyagi", "link": "https://stackoverflow.com/users/5349916/mistermiyagi"}, "edited": false, "score": 0, "creation_date": 1573082586, "post_id": 58739710, "comment_id": 103769601, "body": "Multiprocessing runs a <i>copy</i> of your objects and functions. You need to explicitly share data between processes."}], "answers": [{"tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": true, "score": 6, "last_activity_date": 1573082058, "creation_date": 1573082058, "answer_id": 58739780, "question_id": 58739710, "link": "https://stackoverflow.com/questions/58739710/how-can-i-append-to-class-variables-using-multiprocessing-in-python/58739780#58739780", "title": "How can I append to class variables using multiprocessing in python?", "body": "<p><code>arr</code> is a <code>list</code> that's not going to be shared across subprocess instances.</p>\n\n<p>For that you have to use a <code>Manager</code> object to create a managed list that is aware of the fact that it's shared between processes.</p>\n\n<p>The key is:</p>\n\n<pre><code>self.arr = multiprocessing.Manager().list()\n</code></pre>\n\n<p>full working example:</p>\n\n<pre><code>import multiprocessing\n\nclass MyClass(object):\n    def __init__(self):\n        self.arr = multiprocessing.Manager().list()\n\n    def helper_function(self, n):\n        self.arr.append(n)\n\n    def main_function(self):\n        jobs = []\n\n        for i in range(0,10):\n            p = multiprocessing.Process(target=self.helper_function, args=(i,))\n            jobs.append(p)\n            p.start()\n\n        for job in jobs:\n            job.join()\n\n        print(self.arr)\n\nif __name__ == \"__main__\":\n    a = MyClass()\n    a.main_function()\n</code></pre>\n\n<p>this code now prints: <code>[7, 9, 2, 8, 6, 0, 4, 3, 1, 5]</code></p>\n"}, {"comments": [{"owner": {"reputation": 25770, "user_id": 5349916, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/QovYv.jpg?s=128&g=1", "display_name": "MisterMiyagi", "link": "https://stackoverflow.com/users/5349916/mistermiyagi"}, "edited": false, "score": 0, "creation_date": 1573082784, "post_id": 58739827, "comment_id": 103769658, "body": "Running this with a ThreadPool side-steps the problem -- <code>self.arr</code> is properly built only because it is never computed in a separate process in the first place."}, {"owner": {"reputation": 149, "user_id": 7881192, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-amtuvNfklW4/AAAAAAAAAAI/AAAAAAAAAhQ/-8aWnFV04XQ/photo.jpg?sz=128", "display_name": "James Gabriel", "link": "https://stackoverflow.com/users/7881192/james-gabriel"}, "reply_to_user": {"reputation": 25770, "user_id": 5349916, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/QovYv.jpg?s=128&g=1", "display_name": "MisterMiyagi", "link": "https://stackoverflow.com/users/5349916/mistermiyagi"}, "edited": false, "score": 0, "creation_date": 1573083244, "post_id": 58739827, "comment_id": 103769753, "body": "Side-steps the problem that this whole setup is not thread-safe? Definitely. I don&#39;t see how it changes how <code>self.arr</code> is calculated though. Can you expand on that?"}, {"owner": {"reputation": 25770, "user_id": 5349916, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/QovYv.jpg?s=128&g=1", "display_name": "MisterMiyagi", "link": "https://stackoverflow.com/users/5349916/mistermiyagi"}, "edited": false, "score": 1, "creation_date": 1573084072, "post_id": 58739827, "comment_id": 103769956, "body": "The initial problem is not that this is not thread-safe -- the problem is that processes do not share memory but copy objects. Each process only modifies its own copy of <code>self.arr</code>. Using threads &quot;fixes&quot; the memory sharing because threads share memory by nature, not because it adds memory sharing compatible with processes.  The processes are required for the desired speedup, however. Using a regular <code>Pool</code> instead of the <code>dummy.Pool</code> shows the same problem as in the question."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1573108763, "post_id": 58739827, "comment_id": 103775390, "body": "the problem is that with threads you don&#39;t use all machine CPUs and also in most python implementations GIL prevents from threads to work simultaneously."}], "tags": [], "owner": {"reputation": 149, "user_id": 7881192, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-amtuvNfklW4/AAAAAAAAAAI/AAAAAAAAAhQ/-8aWnFV04XQ/photo.jpg?sz=128", "display_name": "James Gabriel", "link": "https://stackoverflow.com/users/7881192/james-gabriel"}, "is_accepted": false, "score": 0, "last_activity_date": 1573082493, "creation_date": 1573082493, "answer_id": 58739827, "question_id": 58739710, "link": "https://stackoverflow.com/questions/58739710/how-can-i-append-to-class-variables-using-multiprocessing-in-python/58739827#58739827", "title": "How can I append to class variables using multiprocessing in python?", "body": "<p>multiprocessing is touchy.</p>\n\n<p>For simple multiprocessing tasks, I would recomend:</p>\n\n<pre><code>from multiprocessing.dummy import Pool as ThreadPool\n\n\nclass MyClass(object):\n    def __init__(self):\n        self.arr = list()\n\n    def helper_function(self, n):\n        self.arr.append(n)\n\n    def main_function(self):\n        pool = ThreadPool(4)\n        pool.map(self.helper_function, range(10))\n        print(self.arr)\n\n\nif __name__ == '__main__':\n    c = MyClass()\n    c.main_function()\n</code></pre>\n\n<p>The idea of using map instead of complicated multithreading calls is from one of my favorite blog posts: <a href=\"https://chriskiehl.com/article/parallelism-in-one-line\" rel=\"nofollow noreferrer\">https://chriskiehl.com/article/parallelism-in-one-line</a></p>\n"}], "owner": {"reputation": 193, "user_id": 12334809, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-1OjlslLA53E/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfjDPACMGPe75xX-_6JFtKZBmC9oA/photo.jpg?sz=128", "display_name": "Randy Maldonado", "link": "https://stackoverflow.com/users/12334809/randy-maldonado"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "accepted_answer_id": 58739780, "answer_count": 2, "score": 3, "last_activity_date": 1573082493, "creation_date": 1573081511, "question_id": 58739710, "link": "https://stackoverflow.com/questions/58739710/how-can-i-append-to-class-variables-using-multiprocessing-in-python", "title": "How can I append to class variables using multiprocessing in python?", "body": "<p>I have this program where everything is built in a class object. There is a function that does 50 computations of a another function, each with a different input, so I decided to use multiprocessing to speed it up. However, the list that needs to be returned in the end always returns empty. any ideas? Here is a simplified version of my problem. The output of main_function() should be a list containing the numbers 0-9, however the list returns empty.</p>\n\n<pre><code>class MyClass(object):\n    def __init__(self):\n        self.arr = list()\n\n    def helper_function(self, n):\n        self.arr.append(n)\n\n    def main_function(self):\n        jobs = []\n\n        for i in range(0,10):\n            p = multiprocessing.Process(target=self.helper_function, args=(i,))\n            jobs.append(p)\n            p.start()\n\n        for job in jobs:\n            jobs.join()\n\n        print(self.arr)\n\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "matplotlib"], "comments": [{"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 1, "creation_date": 1573081537, "post_id": 58739689, "comment_id": 103769310, "body": "Seems your matplotlib installation is either broken or not the correct one for your system."}, {"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 2, "creation_date": 1573081601, "post_id": 58739689, "comment_id": 103769338, "body": "Most likely, architecture mismatch: <a href=\"https://stackoverflow.com/questions/57187566/python-ctypes-loading-dll-throws-oserror-winerror-193-1-is-not-a-valid-win/57297745#57297745\" title=\"python ctypes loading dll throws oserror winerror 193 1 is not a valid win\">stackoverflow.com/questions/57187566/&hellip;</a>."}, {"owner": {"reputation": 11, "user_id": 11961497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/221dbd64ddfe956238d4eaf94b9f6372?s=128&d=identicon&r=PG&f=1", "display_name": "Tverrrr", "link": "https://stackoverflow.com/users/11961497/tverrrr"}, "edited": false, "score": 0, "creation_date": 1573081649, "post_id": 58739689, "comment_id": 103769354, "body": "I tried to reinstall this module three times, but the error does not disappear"}, {"owner": {"reputation": 27334, "user_id": 7758804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UBA7j.jpg?s=128&g=1", "display_name": "Trenton McKinney", "link": "https://stackoverflow.com/users/7758804/trenton-mckinney"}, "edited": false, "score": 0, "creation_date": 1573081711, "post_id": 58739689, "comment_id": 103769379, "body": "Update PyCharm.  There are known issues."}, {"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 1, "creation_date": 1573082818, "post_id": 58739689, "comment_id": 103769667, "body": "What <i>Python</i> version are you using? Do you have both <i>Python</i> <i>64bit</i> and <i>32bit</i> installed? What <i>Python</i> is <i>PyCharm</i> invoking? How did you install the &quot;faulty&quot; modules?"}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 11961497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/221dbd64ddfe956238d4eaf94b9f6372?s=128&d=identicon&r=PG&f=1", "display_name": "Tverrrr", "link": "https://stackoverflow.com/users/11961497/tverrrr"}, "is_accepted": false, "score": -1, "last_activity_date": 1573083359, "creation_date": 1573083359, "answer_id": 58739923, "question_id": 58739689, "link": "https://stackoverflow.com/questions/58739689/trying-to-use-matplotlib-but-getting-errors/58739923#58739923", "title": "Trying to use matplotlib, but getting errors", "body": "<p>I have installed unofficial builds of these libraries. The error disappeared</p>\n"}], "owner": {"reputation": 11, "user_id": 11961497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/221dbd64ddfe956238d4eaf94b9f6372?s=128&d=identicon&r=PG&f=1", "display_name": "Tverrrr", "link": "https://stackoverflow.com/users/11961497/tverrrr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1573083359, "creation_date": 1573081384, "question_id": 58739689, "link": "https://stackoverflow.com/questions/58739689/trying-to-use-matplotlib-but-getting-errors", "title": "Trying to use matplotlib, but getting errors", "body": "<p>I am using Python 3.7.5 + PyCharm 2018 Edition\nThe following shows what I get in the console at startup:  </p>\n\n<pre><code>Traceback (most recent call last):\nFile \"C:/Users/User/Desktop/\u041f\u0440\u043e\u0435\u043a\u0442 \u0414\u041e \u0427\u0415\u0422\u0412\u0415\u0420\u0413\u0410!/\u0442\u0435\u0441\u0442 \u043b\u0438\u0431\u044b yandex.translate.py\", line 3, in &lt;module&gt;\n      import matplotlib\nFile \"C:\\Python\\lib\\site-packages\\matplotlib\\__init__.py\", line 138, in &lt;module&gt;\n      from . import cbook, rcsetup\nFile \"C:\\Python\\lib\\site-packages\\matplotlib\\cbook\\__init__.py\", line 31, in &lt;module&gt;\n      import numpy as np\nFile \"C:\\Python\\lib\\site-packages\\numpy\\__init__.py\", line 140, in &lt;module&gt;\n      from . import _distributor_init\nFile \"C:\\Python\\lib\\site-packages\\numpy\\_distributor_init.py\", line 26, in &lt;module&gt;\n      WinDLL(os.path.abspath(filename))\nFile \"C:\\Python\\lib\\ctypes\\__init__.py\", line 364, in __init__\n      self._handle = _dlopen(self._name, mode)\nOSError: [WinError 193] %1 is not a valid Win32 application\n\nProcess finished with exit code 1\n</code></pre>\n\n<p>The code I am trying to run:      </p>\n\n<pre><code>datelist =  ['2014-05-06', '2014-05-07', '2014-05-08', '2014-05-09', '2014-05-10',    '2014-05-11', '2014-05-12', '2014-05-13']\n\nimport matplotlib\nfrom matplotlib import pyplot\nfrom matplotlib import dates\nimport datetime\n\nconverted_dates = list(map(datetime.datetime.strptime, datelist, len(datelist)*['%Y-%m-%d']))\nx_axis = converted_dates\nformatter = dates.DateFormatter('%Y-%m-%d')\n\n\ny_axis = range(0,8)\npyplot.plot( x_axis, y_axis, '-' )\nax = pyplot.gcf().axes[0]\nax.xaxis.set_major_formatter(formatter)\npyplot.gcf().autofmt_xdate(rotation=25)\npyplot.show()\n</code></pre>\n\n<p>Would be extremely glad if you help me find the error and help correct it.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 1, "creation_date": 1573081061, "post_id": 58739631, "comment_id": 103769182, "body": "<a href=\"https://stackoverflow.com/questions/184643/what-is-the-best-way-to-copy-a-list/184660#184660\" title=\"what is the best way to copy a list\">stackoverflow.com/questions/184643/&hellip;</a>, It is good to make a copy :-) when you do object assignment"}, {"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 5, "creation_date": 1573081082, "post_id": 58739631, "comment_id": 103769189, "body": "I&#39;m not sure what you think this is showing. Variables are always references."}, {"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 1, "creation_date": 1573085086, "post_id": 58739631, "comment_id": 103770179, "body": "<a href=\"https://nedbatchelder.com/text/names.html\" rel=\"nofollow noreferrer\">Facts and myths about Python names and values</a>"}], "answers": [{"comments": [{"owner": {"reputation": 7889, "user_id": 2619038, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ec0034cda843c9fffd6fcccb5ec689bc?s=128&d=identicon&r=PG", "display_name": "NoName", "link": "https://stackoverflow.com/users/2619038/noname"}, "edited": false, "score": 0, "creation_date": 1573082741, "post_id": 58739684, "comment_id": 103769647, "body": "Okay, but why does <code>list1[2]=5</code> not change <code>a</code>, but <code>a = 5</code> does? Considering <code>list1[2]</code> contains <code>a</code>. Although <code>a</code> is immutable, I am assigning them to a new value, not modifying an existing one which should work either way.    Unless, you&#39;re saying immutable types are passed as values and not references?"}, {"owner": {"reputation": 12375, "user_id": 2231972, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/448e80e6a88a682d7c2a3e13c6804903?s=128&d=identicon&r=PG", "display_name": "Roman Konoval", "link": "https://stackoverflow.com/users/2231972/roman-konoval"}, "reply_to_user": {"reputation": 7889, "user_id": 2619038, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ec0034cda843c9fffd6fcccb5ec689bc?s=128&d=identicon&r=PG", "display_name": "NoName", "link": "https://stackoverflow.com/users/2619038/noname"}, "edited": false, "score": 0, "creation_date": 1573083212, "post_id": 58739684, "comment_id": 103769746, "body": "<code>list1[2]</code> does not contain <code>a</code>. It contains the reference to an <code>int</code> object with value  <code>3</code>. <code>a</code> also contains the reference to the same object (of type <code>int</code> and value <code>3</code>) but these two reference are stored in different locations though they  reference the same object. <code>list1[2]=5</code> modifies the value of the reference stored in <code>list1[2]</code>, this does not affect neither object of type <code>int</code> with value <code>3</code> nor the reference to it stored in <code>a</code>. Then immutable is the object of type <code>int</code> with value <code>3</code> but not the <code>a</code> (which is a variable that stores the reference to that object)."}, {"owner": {"reputation": 7889, "user_id": 2619038, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ec0034cda843c9fffd6fcccb5ec689bc?s=128&d=identicon&r=PG", "display_name": "NoName", "link": "https://stackoverflow.com/users/2619038/noname"}, "edited": false, "score": 0, "creation_date": 1573083945, "post_id": 58739684, "comment_id": 103769922, "body": "Hmmm, I see. So to achieve the same effect as the 2nd example in the 1st example. I would have to write <code>list1[2] = [5, 4]</code>. In this case, I would not be modifying the existing object pointed by both references, but pointing the reference in the list to a completely new object. And the output would be:   <code>[1, 2, [5, 4]]</code>   <code>[3, 4]</code>?"}], "tags": [], "owner": {"reputation": 12375, "user_id": 2231972, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/448e80e6a88a682d7c2a3e13c6804903?s=128&d=identicon&r=PG", "display_name": "Roman Konoval", "link": "https://stackoverflow.com/users/2231972/roman-konoval"}, "is_accepted": true, "score": 1, "last_activity_date": 1573081361, "creation_date": 1573081361, "answer_id": 58739684, "question_id": 58739631, "link": "https://stackoverflow.com/questions/58739631/when-does-a-variable-store-value-and-when-does-it-store-reference/58739684#58739684", "title": "When does a variable store value and when does it store reference?", "body": "<p>Variable always stores a reference.</p>\n\n<p>The key to your confusion might be if the object that is referenced is mutable or not. In your first example <code>a</code> stores a reference to a list object which is mutable. In the second example <code>a</code> stores a reference to an immutable object of type <code>int</code>.</p>\n\n<p>So this operation:</p>\n\n<pre><code>list1[2][0] = 5\n</code></pre>\n\n<p>modifies a reference stored in the list that <code>a</code> references to. So changes done to it are visible when you access the list via reference stored in <code>a</code>.</p>\n\n<p>But this operation:</p>\n\n<pre><code>list1[2] = 5\n</code></pre>\n\n<p>Modifies a list element (which was initialized from the <code>a</code>) and now this element stores a reference to a new object. But a reference stored in <code>a</code> was not changed hence the result you get.</p>\n"}], "owner": {"reputation": 7889, "user_id": 2619038, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ec0034cda843c9fffd6fcccb5ec689bc?s=128&d=identicon&r=PG", "display_name": "NoName", "link": "https://stackoverflow.com/users/2619038/noname"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 58739684, "answer_count": 1, "score": -3, "last_activity_date": 1573081361, "creation_date": 1573080914, "question_id": 58739631, "link": "https://stackoverflow.com/questions/58739631/when-does-a-variable-store-value-and-when-does-it-store-reference", "title": "When does a variable store value and when does it store reference?", "body": "<p><strong>Variable stores reference:</strong></p>\n\n<pre><code>a = [3, 4]\nlist1 = [1, 2, a]\nlist1[2][0]=5\nprint(list1)\nprint(a)\n</code></pre>\n\n<p>output:</p>\n\n<p>[1, 2, [5, 4]]</p>\n\n<p>[5, 4]</p>\n\n<p><strong>Variable stores value:</strong></p>\n\n<pre><code>a = 3\nlist1 = [1, 2, a]\nlist1[2]=5\nprint(list1)\nprint(a)\n</code></pre>\n\n<p>output:</p>\n\n<p>[1, 2, 5]</p>\n\n<p>3</p>\n\n<p>Is there a rule I can remember? Cause sometimes I have to manipulate the variable indirectly and I don't know if it'll change the original or not.</p>\n"}, {"tags": ["python", "pandas", "matplotlib"], "comments": [{"owner": {"reputation": 2525, "user_id": 9795817, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5ivtG.png?s=128&g=1", "display_name": "Arturo Sbr", "link": "https://stackoverflow.com/users/9795817/arturo-sbr"}, "edited": false, "score": 0, "creation_date": 1573081274, "post_id": 58739620, "comment_id": 103769239, "body": "@ansev Haha, almost. I want both figures, but also as separate legends."}, {"owner": {"reputation": 9302, "user_id": 8300135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0eaa9ded8087b3af42dd463c95696733?s=128&d=identicon&r=PG&f=1", "display_name": "SpghttCd", "link": "https://stackoverflow.com/users/8300135/spghttcd"}, "edited": false, "score": 0, "creation_date": 1573083025, "post_id": 58739620, "comment_id": 103769703, "body": "I don&#39;t really get what issue is caused by the fact that one plot has two y values at the same x. As you can see, it can be plot without any issues. And perhaps if you invert the order of the three points it consists of, you might even be able to plot the whole line (the square) with one plot command."}, {"owner": {"reputation": 2525, "user_id": 9795817, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5ivtG.png?s=128&g=1", "display_name": "Arturo Sbr", "link": "https://stackoverflow.com/users/9795817/arturo-sbr"}, "reply_to_user": {"reputation": 9302, "user_id": 8300135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0eaa9ded8087b3af42dd463c95696733?s=128&d=identicon&r=PG&f=1", "display_name": "SpghttCd", "link": "https://stackoverflow.com/users/8300135/spghttcd"}, "edited": false, "score": 0, "creation_date": 1573163056, "post_id": 58739620, "comment_id": 103802343, "body": "@SpghttCd Typically, I would plot using <code>f[&#39;y_axis].plot(...)</code>, but this wouldn&#39;t work with <code>f[f[&#39;figure].eq(&#39;fig1&#39;)]</code> because I also have to specify <code>x_axis</code>. Does this make sense?"}], "answers": [{"tags": [], "owner": {"reputation": 26154, "user_id": 11884237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7d7q4.png?s=128&g=1", "display_name": "ansev", "link": "https://stackoverflow.com/users/11884237/ansev"}, "is_accepted": false, "score": 1, "last_activity_date": 1573118302, "last_edit_date": 1573118302, "creation_date": 1573081453, "answer_id": 58739696, "question_id": 58739620, "link": "https://stackoverflow.com/questions/58739620/overlay-two-subplots-in-the-same-subplot-matplotlib/58739696#58739696", "title": "Overlay two subplots in the same subplot (matplotlib)", "body": "<p>Use <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.pivot_table.html#pandas.DataFrame.pivot_table\" rel=\"nofollow noreferrer\"><code>DataFrame.pivot_table</code></a>:</p>\n\n<pre><code>df_toplot=df.pivot_table(columns='figure',index='x_axis',values='y_axis').ffill()\nprint(df_toplot)\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>figure        fig1       fig2\nx_axis                       \n0       100.000000  37.033667\n1        99.969669  37.033667\n2        99.939339  37.033667\n3        99.939339  37.033667\n4        99.909008  37.033667\n...            ...        ...\n365       0.060661  18.516833\n366       0.060661  18.516833\n367       0.060661  18.516833\n368       0.060661  18.516833\n369       0.030331  18.516833\n</code></pre>\n\n<hr>\n\n<pre><code>df_toplot.plot(legend=False)\n</code></pre>\n\n<p><strong>Output image:</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/vUvM4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vUvM4.png\" alt=\"enter image description here\"></a></p>\n"}, {"comments": [{"owner": {"reputation": 2525, "user_id": 9795817, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5ivtG.png?s=128&g=1", "display_name": "Arturo Sbr", "link": "https://stackoverflow.com/users/9795817/arturo-sbr"}, "edited": false, "score": 0, "creation_date": 1573137225, "post_id": 58739748, "comment_id": 103790125, "body": "Awesome! I had used <code>subplots</code> before, but I always did it in the form of &#39;f[&#39;y_axis&#39;].plot(ax=ax)&#180;.  I didn&#39;t know you could specify an axis as well as the <code>x</code> and <code>y</code> parameters. I now see I don&#39;t understand a fundamental part of matplotlib."}], "tags": [], "owner": {"reputation": 9302, "user_id": 8300135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0eaa9ded8087b3af42dd463c95696733?s=128&d=identicon&r=PG&f=1", "display_name": "SpghttCd", "link": "https://stackoverflow.com/users/8300135/spghttcd"}, "is_accepted": true, "score": 3, "last_activity_date": 1573081773, "creation_date": 1573081773, "answer_id": 58739748, "question_id": 58739620, "link": "https://stackoverflow.com/questions/58739620/overlay-two-subplots-in-the-same-subplot-matplotlib/58739748#58739748", "title": "Overlay two subplots in the same subplot (matplotlib)", "body": "<p>You can always plot again and again into the same plot if you have stored its axes object, e.g. like</p>\n\n<pre><code>import matplotlib.pyplot as plt\nfig, ax = plt.subplots()\n\nf[f['figure'] == 'fig1'].plot(ax=ax, x='x_axis', y='y_axis', legend=False)\nf[f['figure'] == 'fig2'].plot(ax=ax, x='x_axis', y='y_axis', legend=False)\nplt.show()\n</code></pre>\n\n<p>Note that this is just one single example how to get the current axes - another one might be</p>\n\n<pre><code>ax = plt.gca()\n</code></pre>\n\n<p>The main point here is to refer to it in pandas' plot command with the <code>ax</code> kwarg.</p>\n"}], "owner": {"reputation": 2525, "user_id": 9795817, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5ivtG.png?s=128&g=1", "display_name": "Arturo Sbr", "link": "https://stackoverflow.com/users/9795817/arturo-sbr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1759, "favorite_count": 0, "accepted_answer_id": 58739748, "answer_count": 2, "score": 0, "last_activity_date": 1573118302, "creation_date": 1573080840, "question_id": 58739620, "link": "https://stackoverflow.com/questions/58739620/overlay-two-subplots-in-the-same-subplot-matplotlib", "title": "Overlay two subplots in the same subplot (matplotlib)", "body": "<p>I plotted two different subplots using <code>matplotlib.plt</code> and <code>pandas.DataFrame.plot</code>.</p>\n\n<p>Both figures are stored in the same pandas dataframe, which I called <code>f</code>. <a href=\"https://www.dropbox.com/s/m3bi6xfqt55a050/so.csv?dl=0\" rel=\"nofollow noreferrer\">You can download the sample data here</a>.</p>\n\n<p>One of these plots cannot be described by a function (that is, one <code>x</code> value can yield two or more <code>y</code> values. This is what's causing the issue (I'm trying to plot a square).</p>\n\n<p>I tried:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>f[f['figure'] == 'fig1'].plot(x='x_axis', y='y_axis', legend=False)\nf[f['figure'] == 'fig2'].plot(x='x_axis', y='y_axis', legend=False)\nplt.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/fJaHB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fJaHB.png\" alt=\"Figs\"></a></p>\n\n<p>I want both subplots combined into a single one. Is there a way to plot the second subplot in the same subplot as the first? I want to stack both figures in a single subplot.</p>\n"}, {"tags": ["python", "list", "dictionary", "sum", "defaultdict"], "answers": [{"tags": [], "owner": {"reputation": 22954, "user_id": 5238915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fncqh.jpg?s=128&g=1", "display_name": "RoadRunner", "link": "https://stackoverflow.com/users/5238915/roadrunner"}, "is_accepted": true, "score": 1, "last_activity_date": 1573081600, "creation_date": 1573081600, "answer_id": 58739724, "question_id": 58739548, "link": "https://stackoverflow.com/questions/58739548/how-do-i-merge-a-list-of-dictionaries-by-an-identical-field-and-sum-another-fiel/58739724#58739724", "title": "How do I merge a list of dictionaries by an identical field and sum another field in the process?", "body": "<p>Here is something you can try. It basically groups the sublists from <code>lst</code> by the first URL into a defaultdict of lists, then builds a new result only with the second item number summed up. </p>\n\n<pre><code>from collections import defaultdict\nfrom pprint import pprint\n\nlst = ...\n\nd = defaultdict(list)\nfor item in lst:\n    d[item[0]].append(item)\n\nresult = [[v[0][0]] + [sum(x[1] for x in v)] + v[0][2:] for v in d.values()]\n\npprint(result)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>[['https://www.website.com/directory/link-1',\n  206,\n  'Long Text Field 1',\n  'String 1',\n  {'url': 'https://www.website.com/images/image-1.jpg'},\n  255],\n ['https://www.website.com/directory/link-2',\n  296,\n  'Long Text Field 2',\n  {'url': 'https://www.website.com/images/image-2.jpg'},\n  303],\n ['https://www.website.com/directory/link-3',\n  354,\n  'Long Text Field 3',\n  {'url': 'https://www.website.com/images/image-3.jpg'},\n  388],\n ['https://www.website.com/directory/link-4',\n  606,\n  'Long Text Field 4',\n  {'url': 'https://www.website.com/images/image-4.jpg'},\n  624]]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 79, "user_id": 796844, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/aaaf73951f463520d3c7f84911e6be7f?s=128&d=identicon&r=PG", "display_name": "CarlosM", "link": "https://stackoverflow.com/users/796844/carlosm"}, "edited": false, "score": 0, "creation_date": 1573084290, "post_id": 58739979, "comment_id": 103770005, "body": "That&#39;s cool, thank you. You&#39;re right, my code is inconsistent, thank you for pointing that out as well. Fixed. I love pandas!"}], "tags": [], "owner": {"reputation": 3457, "user_id": 2284490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba571b7d2f77a33c9b92af6c767677bb?s=128&d=identicon&r=PG", "display_name": "Cireo", "link": "https://stackoverflow.com/users/2284490/cireo"}, "is_accepted": false, "score": 1, "last_activity_date": 1573083743, "creation_date": 1573083743, "answer_id": 58739979, "question_id": 58739548, "link": "https://stackoverflow.com/questions/58739548/how-do-i-merge-a-list-of-dictionaries-by-an-identical-field-and-sum-another-fiel/58739979#58739979", "title": "How do I merge a list of dictionaries by an identical field and sum another field in the process?", "body": "<p>If you want to use <code>pandas</code> you can get something like the following:</p>\n\n<pre><code>                                       Page  Count               Text    String                                         Url  Magic\n0  https://www.website.com/directory/link-1     21  Long Text Field 1  String 1  https://www.website.com/images/image-1.jpg    255\n1  https://www.website.com/directory/link-1    185  Long Text Field 1  String 1  https://www.website.com/images/image-1.jpg    255\n2  https://www.website.com/directory/link-2    296  Long Text Field 2      None  https://www.website.com/images/image-2.jpg    303\n3  https://www.website.com/directory/link-3    354  Long Text Field 3      None  https://www.website.com/images/image-3.jpg    388\n4  https://www.website.com/directory/link-4    606  Long Text Field 4      None  https://www.website.com/images/image-4.jpg    624\n\n----\n\n                                       Page  Count  Magic    String                                         Url               Text\n0  https://www.website.com/directory/link-1    206    255  String 1  https://www.website.com/images/image-1.jpg  Long Text Field 1\n1  https://www.website.com/directory/link-2    296    303      None  https://www.website.com/images/image-2.jpg  Long Text Field 2\n2  https://www.website.com/directory/link-3    354    388      None  https://www.website.com/images/image-3.jpg  Long Text Field 3\n3  https://www.website.com/directory/link-4    606    624      None  https://www.website.com/images/image-4.jpg  Long Text Field 4\n</code></pre>\n\n<p>by running the below code.  Note that I had to add dummy values for the missing strings, since your data format is somewhat inconsistent.</p>\n\n<pre><code>import pandas as pd\n\ndata = [\n  ['https://www.website.com/directory/link-1',\n  21,\n  'Long Text Field 1',\n  'String 1',\n  {'url': 'https://www.website.com/images/image-1.jpg'},\n  255],\n\n  ['https://www.website.com/directory/link-1',\n  185,\n  'Long Text Field 1',\n  'String 1',\n  {'url': 'https://www.website.com/images/image-1.jpg'},\n  255],\n\n  ['https://www.website.com/directory/link-2',\n  296,\n  'Long Text Field 2',\n  {'url': 'https://www.website.com/images/image-2.jpg'},\n  303],\n\n  ['https://www.website.com/directory/link-3',\n  354,\n  'Long Text Field 3',\n  {'url': 'https://www.website.com/images/image-3.jpg'},\n  388],\n\n  ['https://www.website.com/directory/link-4',\n  606,\n  'Long Text Field 4',\n  {'url': 'https://www.website.com/images/image-4.jpg'},\n  624]\n]\ncolumns = ['Page', 'Count', 'Text', 'String', 'Url', 'Magic']\n\nfor d in data:\n    if len(d) != 6:\n        d.insert(3, None)\n    d[4] = d[4]['url']\ndf = pd.DataFrame(data, columns=columns)\n\n\nagg = dict.fromkeys(columns, 'first')\nagg.update({'Count': 'sum'})\ndel agg['Page']\ndf2 = df.groupby(['Page'], as_index=False).agg(agg)\n\npd.options.display.width = 0\nprint df\nprint '\\n----\\n'\nprint df2\n</code></pre>\n"}], "owner": {"reputation": 79, "user_id": 796844, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/aaaf73951f463520d3c7f84911e6be7f?s=128&d=identicon&r=PG", "display_name": "CarlosM", "link": "https://stackoverflow.com/users/796844/carlosm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 1, "accepted_answer_id": 58739724, "answer_count": 2, "score": 1, "last_activity_date": 1573084375, "creation_date": 1573080298, "last_edit_date": 1573084375, "question_id": 58739548, "link": "https://stackoverflow.com/questions/58739548/how-do-i-merge-a-list-of-dictionaries-by-an-identical-field-and-sum-another-fiel", "title": "How do I merge a list of dictionaries by an identical field and sum another field in the process?", "body": "<p>Attempting to merge a list of dictionaries by a url field, which if has an identical dictionary item in the list, will merge the identical ones by this field while adding the sum for another field at the same time.</p>\n\n<p>I've tried using 'setdefault' but it doesn't always work as expected. I'm still getting duplicate results after running the loop.</p>\n\n<p>Here is the list of dicts I'm trying to condense with the sum of the second field added to get its sum where identical urls exist:</p>\n\n<pre><code>[\n  ['https://www.website.com/directory/link-1',\n  21,\n  'Long Text Field 1',\n  'String 1',\n  {'url': 'https://www.website.com/images/image-1.jpg'},\n  255],\n\n  ['https://www.website.com/directory/link-1',\n  185,\n  'Long Text Field 1',\n  'String 1',\n  {'url': 'https://www.website.com/images/image-1.jpg'},\n  255],\n\n  ['https://www.website.com/directory/link-2',\n  296,\n  'Long Text Field 2',\n  'String 2',\n  {'url': 'https://www.website.com/images/image-2.jpg'},\n  303],\n\n  ['https://www.website.com/directory/link-3',\n  354,\n  'Long Text Field 3',\n  'String 3',\n  {'url': 'https://www.website.com/images/image-3.jpg'},\n  388],\n\n  ['https://www.website.com/directory/link-4',\n  606,\n  'Long Text Field 4',\n  'String 4',\n  {'url': 'https://www.website.com/images/image-4.jpg'},\n  624]\n]\n</code></pre>\n\n<p>This is the result I'm trying to get:</p>\n\n<pre><code>[\n ['https://www.website.com/directory/link-1',\n  206,\n  'Long Text Field 1',\n  'String 1',\n  {'url': 'https://www.website.com/images/image-1.jpg'},\n  255],\n\n  ['https://www.website.com/directory/link-2',\n  296,\n  'Long Text Field 2',\n  'String 2',\n  {'url': 'https://www.website.com/images/image-2.jpg'},\n  303],\n\n  ['https://www.website.com/directory/link-3',\n  354,\n  'Long Text Field 3',\n  'String 3',\n  {'url': 'https://www.website.com/images/image-3.jpg'},\n  388],\n\n  ['https://www.website.com/directory/link-4',\n  606,\n  'Long Text Field 4',\n  'String 4',\n  {'url': 'https://www.website.com/images/image-4.jpg'},\n  624]\n]\n</code></pre>\n\n<p>I'm trying</p>\n\n<pre><code>for url, long_text, number_to_count, another_field, ..., ... in list:\n    d = {}\n    d.setdefault(url, {}).setdefault(\"long text\", []).append(long_text)\n    d[url].setdefault(\"number_to_count\",[]).append(number_to_count)\n    d[url].setdefault(\"another_field\",[]).append(another_field)\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "openpyxl"], "comments": [{"owner": {"reputation": 1202, "user_id": 147204, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e593ac63e5f25649b701dc25f69d1b7?s=128&d=identicon&r=PG", "display_name": "luis.parravicini", "link": "https://stackoverflow.com/users/147204/luis-parravicini"}, "edited": false, "score": 2, "creation_date": 1573080335, "post_id": 58739524, "comment_id": 103768986, "body": "And what is the problem/error you have?"}, {"owner": {"reputation": 687, "user_id": 6775809, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UBqjI.jpg?s=128&g=1", "display_name": "GTA.sprx", "link": "https://stackoverflow.com/users/6775809/gta-sprx"}, "reply_to_user": {"reputation": 1202, "user_id": 147204, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e593ac63e5f25649b701dc25f69d1b7?s=128&d=identicon&r=PG", "display_name": "luis.parravicini", "link": "https://stackoverflow.com/users/147204/luis-parravicini"}, "edited": false, "score": 0, "creation_date": 1573082756, "post_id": 58739524, "comment_id": 103769654, "body": "@luis.parravicini Sorry I forgot to add my error. I updated my question."}], "answers": [{"tags": [], "owner": {"reputation": 3053, "user_id": 5828160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f1bce66871c9b17ac7d152e59e8f3a7?s=128&d=identicon&r=PG", "display_name": "Rajith Thennakoon", "link": "https://stackoverflow.com/users/5828160/rajith-thennakoon"}, "is_accepted": false, "score": 0, "last_activity_date": 1573087752, "creation_date": 1573087752, "answer_id": 58740453, "question_id": 58739524, "link": "https://stackoverflow.com/questions/58739524/recursively-replace-string-in-directory-of-excel-files/58740453#58740453", "title": "Recursively replace string in directory of excel files", "body": "<p>Try this</p>\n\n<pre><code>basepath=\"directory_path\"\nfiles = list(filter(lambda x: '.xlsx' in x, os.listdir(basepath)))\nfor file in files:\n    wb = openpyxl.load_workbook(f\"{basepath}/file\")\n    for sheet in wb.worksheets:\n        for cell in sheet.iter_rows('C{}:C{}'.format(sheet.min_row,sheet.max_row)):\n            print(cell + \"\\n\")\n            if cell.value == target:\n                cell.value = replace\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4256, "user_id": 5386938, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-H3KU09vCXj4/AAAAAAAAAAI/AAAAAAAAAQI/P8vlqd0SX5s/photo.jpg?sz=128", "display_name": "Justin Ezequiel", "link": "https://stackoverflow.com/users/5386938/justin-ezequiel"}, "is_accepted": true, "score": 2, "last_activity_date": 1573090984, "creation_date": 1573090984, "answer_id": 58740798, "question_id": 58739524, "link": "https://stackoverflow.com/questions/58739524/recursively-replace-string-in-directory-of-excel-files/58740798#58740798", "title": "Recursively replace string in directory of excel files", "body": "<p><a href=\"https://docs.python.org/3/library/os.html#os.walk\" rel=\"nofollow noreferrer\">os.walk</a> does not return a sequence of files. It yields (root, dirs, files).</p>\n\n<pre><code>for (root, dirs, files) in os.walk(directory):\n    for name in files:\n        if name.endswith(\".xlsx\"):\n            path = os.path.join(root, name)\n            # the rest of your code here\n</code></pre>\n"}], "owner": {"reputation": 687, "user_id": 6775809, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UBqjI.jpg?s=128&g=1", "display_name": "GTA.sprx", "link": "https://stackoverflow.com/users/6775809/gta-sprx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 58740798, "answer_count": 2, "score": 0, "last_activity_date": 1573157956, "creation_date": 1573080087, "last_edit_date": 1573157956, "question_id": 58739524, "link": "https://stackoverflow.com/questions/58739524/recursively-replace-string-in-directory-of-excel-files", "title": "Recursively replace string in directory of excel files", "body": "<p>I'm trying to replace every occurrence of a given string with another string in a directory of excel files. </p>\n\n<pre><code>for (root, dirs, files) in os.walk(DIRECTORY):\n    for file in files:\n        if file.endswith(\".xlsx\"):\n            path = os.path.join(root, file)\n            print(\"Opening: \" + path)\n            wb = openpyxl.load_workbook(path)\n            for ws in wb.worksheets:\n                for row in ws.iter_rows():\n                    for cell in row:\n                        print(cell.value)\n                        if cell.value == target:\n                            print(\"TARGET STRING FOUND\")\n                            cell.value = replace\n                wb.save(wb)\n</code></pre>\n\n<p>I get <code>AttributeError: 'list' object has no attribute 'endswith'</code> when I run the script.</p>\n\n<p>Thanks for any help</p>\n"}, {"tags": ["python", "pandas", "dataframe"], "comments": [{"owner": {"reputation": 26154, "user_id": 11884237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7d7q4.png?s=128&g=1", "display_name": "ansev", "link": "https://stackoverflow.com/users/11884237/ansev"}, "edited": false, "score": 2, "creation_date": 1573080164, "post_id": 58739492, "comment_id": 103768941, "body": "<code>df[&#39;vapor_pressure&#39;] = df[&#39;T_dry_bulb&#39;].apply(processvaporpressure)</code>?"}, {"owner": {"reputation": 11, "user_id": 4409237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67f7ca1e53599f64d71233f7bebf4b99?s=128&d=identicon&r=PG&f=1", "display_name": "ExergyEngineer", "link": "https://stackoverflow.com/users/4409237/exergyengineer"}, "reply_to_user": {"reputation": 26154, "user_id": 11884237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7d7q4.png?s=128&g=1", "display_name": "ansev", "link": "https://stackoverflow.com/users/11884237/ansev"}, "edited": false, "score": 0, "creation_date": 1573237189, "post_id": 58739492, "comment_id": 103829736, "body": "Thanks for the suggestion, but no dice. Also, I&#39;m looking for a way to pass multiple arguments from the dataframe into the function."}], "owner": {"reputation": 11, "user_id": 4409237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67f7ca1e53599f64d71233f7bebf4b99?s=128&d=identicon&r=PG&f=1", "display_name": "ExergyEngineer", "link": "https://stackoverflow.com/users/4409237/exergyengineer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 99, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1573079870, "creation_date": 1573079870, "question_id": 58739492, "link": "https://stackoverflow.com/questions/58739492/how-do-i-pass-a-series-to-a-boolean-function-in-a-pandas-dataframe", "title": "How do I pass a series to a boolean function in a Pandas dataframe?", "body": "<p>I'm trying to use a user-defined function to create a new column in a Pandas dataframe, which is calculated from other columns. My function calls other functions from a Python library (psychrolib) to perform the operation. I get the following error:</p>\n\n<pre><code>ValueError: The truth value of a Series is ambiguous. Use a.empty, a.bool(), a.item(), a.any() or a.all().\n</code></pre>\n\n<p>I'm aware that you need to use &amp;, |, and ! as logical operators when working in Pandas (rather than and, or, not), but since I'm using a function from a library this isn't an option. I ran down the code in the library just to be sure and found this excerpt:</p>\n\n<pre><code>    if (TDryBulb &lt; -148 or TDryBulb &gt; 392):\n        raise ValueError(\"Dry bulb temperature must be in range [-148, 392]\u00b0F\")\n</code></pre>\n\n<p>Is there another way to pass a column to a user-defined function in Pandas, or another data type I should be using? Some sample code below:</p>\n\n<pre><code># Import libraries\nimport numpy as np\nimport psychrolib as psych\npsych.SetUnitSystem(psych.IP) # Set unit system in psychrometric library to IP\nimport pandas as pd\n\n# create example data\n\ndf = pd.DataFrame({'T_dry_bulb':[80,82,84,86,88,90]})\n\ndef processvaporpressure(t_db):\n    # Calculate the vapor pressure from the a psychrometric library function\n    # and then do something special to it.\n    return psych.GetSatVapPres(t_db) + 0.5\n\ndf['vapor_pressure'] = df.apply(processvaporpressure,args=(df['T_dry_bulb']))\n</code></pre>\n"}, {"tags": ["python", "c++", "pybind11"], "comments": [{"owner": {"reputation": 2343, "user_id": 9448377, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Wim Lavrijsen", "link": "https://stackoverflow.com/users/9448377/wim-lavrijsen"}, "edited": false, "score": 0, "creation_date": 1573085678, "post_id": 58739466, "comment_id": 103770297, "body": "<code>py::object data_class_output;</code> just creates a handle to a nullptr, not an actual python object, so then trying to add an attribute crashes. What is the intended output type? The same as the input type?"}, {"owner": {"reputation": 41, "user_id": 10694472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02ac61e4ea6cfd106526c71a23f1f652?s=128&d=identicon&r=PG&f=1", "display_name": "raef", "link": "https://stackoverflow.com/users/10694472/raef"}, "reply_to_user": {"reputation": 2343, "user_id": 9448377, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Wim Lavrijsen", "link": "https://stackoverflow.com/users/9448377/wim-lavrijsen"}, "edited": false, "score": 0, "creation_date": 1573137660, "post_id": 58739466, "comment_id": 103790375, "body": "thanks for the input. Regarding the output, in this example i want it to be similar to the input (a new python class with a float member variable &quot;new_data&quot;)."}, {"owner": {"reputation": 2343, "user_id": 9448377, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Wim Lavrijsen", "link": "https://stackoverflow.com/users/9448377/wim-lavrijsen"}, "edited": false, "score": 0, "creation_date": 1573140845, "post_id": 58739466, "comment_id": 103792169, "body": "Is not quite what I meant. I&#39;ll post a full code example as an &quot;answer&quot; below that will ease the discussion."}], "answers": [{"tags": [], "owner": {"reputation": 2343, "user_id": 9448377, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Wim Lavrijsen", "link": "https://stackoverflow.com/users/9448377/wim-lavrijsen"}, "is_accepted": false, "score": 1, "last_activity_date": 1573141158, "creation_date": 1573141158, "answer_id": 58752178, "question_id": 58739466, "link": "https://stackoverflow.com/questions/58739466/how-to-set-a-new-attribute-in-pybind11-to-python-object-within-c/58752178#58752178", "title": "How to set a new attribute in pybind11 to python object within c++?", "body": "<p>There needs to be some object instance to attach the new attribute to. This object, if you want a new one, will need to be created from some type. If based on the discussion above you want the output type and input type to be the same, you can get the proper type from the <code>__class__</code> attribute of the input. Then, assuming <code>__init__</code> takes no additional parameters, create an instance and attach the attribute.</p>\n\n<p>Working example by adjusting yours follows:</p>\n\n<pre><code>#include &lt;pybind11/pybind11.h&gt;\n\nnamespace py = pybind11;\n\npy::object func_wrapper(py::object data_class_input){\n\n    //1) read in the data of some python class\n    int a       = data_class_input.attr(\"a\").cast&lt;int&gt;();\n\n    //2) do something\n    float new_data = 3.1; //just an example value\n\n    //3) make the results accessible from python:\n    py::object data_class_input_type = data_class_input.attr(\"__class__\");\n    py::object data_class_output = data_class_input_type();\n    data_class_output.attr(\"new_data\")    = py::cast(new_data);\n\n    return data_class_output;\n}\n\n//pybind11-related:\nPYBIND11_MODULE(TEST,m){\n  m.doc() = \"pybind11 example plugin\";\n  m.def(\"func_wrapper\",  &amp;func_wrapper);\n}\n</code></pre>\n\n<p>after which your python snippet will print:</p>\n\n<pre><code>3.09999990463\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 10694472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02ac61e4ea6cfd106526c71a23f1f652?s=128&d=identicon&r=PG&f=1", "display_name": "raef", "link": "https://stackoverflow.com/users/10694472/raef"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 877, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1573141158, "creation_date": 1573079673, "question_id": 58739466, "link": "https://stackoverflow.com/questions/58739466/how-to-set-a-new-attribute-in-pybind11-to-python-object-within-c", "title": "How to set a new attribute in pybind11 to python object within c++?", "body": "<p>I am trying to create a new python class in c++ with pybind11, fill it with data and then return it. </p>\n\n<p>For example, take a simple class in python, which is then used in a c++ function call compiled with pybind11.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from TEST import func_wrapper \n\nclass class_DATA_py:\n    def __init__(self):\n        self.a   = 1\n\ndata_class_input = class_DATA_py()\ndata_return      = func_wrapper(data_class_input) #is not compiling\nprint(data_return.new_data) #is what I wish to see\n</code></pre>\n\n<p>Now use the class in c++ with the help of pybind 11. </p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;pybind11/pybind11.h&gt;\nnamespace py = pybind11;\n\npy::object func_wrapper(py::object data_class_input){\n\n    //1) read in the data of some python class\n    int a       = data_class_input.attr(\"a\").cast&lt;int&gt;();  \n\n    //2) do something \n    float new_data = 3.1; //just an example value\n\n    //3) make the results accessible from python:\n    py::object data_class_output;\n    //This is where things go wrong and crashes during compilation\n    //Is there a way to set an attribute so that I can write something like below?\n    data_class_output.attr(\"new_data\")    = py::cast(new_data);\n    return data_class_output;\n}\n\n//pybind11-related:\nPYBIND11_MODULE(TEST,m){\n  m.doc() = \"pybind11 example plugin\";\n  m.def(\"func_wrapper\",  &amp;func_wrapper);\n  );\n\n</code></pre>\n\n<p>The idea is then to be able to use the data_class_output in python and access for example the data_class_output.new_data value. </p>\n\n<p>A workaround is defining the data_class_output class also in python, use it as an additional input and fill the values there then. </p>\n\n<p>However, is it possible to work in the way outlined above and define the \"py::object data_class_output\" from scratch in c++ and then use it in python without problems?</p>\n"}, {"tags": ["python", "keras", "keras-layer"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 12334699, "user_type": "registered", "profile_image": "https://graph.facebook.com/1333748360139380/picture?type=large", "display_name": "NhatLe", "link": "https://stackoverflow.com/users/12334699/nhatle"}, "edited": false, "score": 0, "creation_date": 1573148925, "post_id": 58739681, "comment_id": 103796566, "body": "it didn&#39;t work. The error it outputs is ValueError: Error when checking input: expected dense_1_input to have shape (6,) but got array with shape (1,)"}, {"owner": {"reputation": 6145, "user_id": 9690090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/280beabfb095bdf65a194d15dded9b8a?s=128&d=identicon&r=PG&f=1", "display_name": "Gwang-Jin Kim", "link": "https://stackoverflow.com/users/9690090/gwang-jin-kim"}, "reply_to_user": {"reputation": 1, "user_id": 12334699, "user_type": "registered", "profile_image": "https://graph.facebook.com/1333748360139380/picture?type=large", "display_name": "NhatLe", "link": "https://stackoverflow.com/users/12334699/nhatle"}, "edited": false, "score": 0, "creation_date": 1573191575, "post_id": 58739681, "comment_id": 103808856, "body": "well without showing us your input data, nobody can help - the error is your input data - it seems to have only 1 column and not 6."}], "tags": [], "owner": {"reputation": 6145, "user_id": 9690090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/280beabfb095bdf65a194d15dded9b8a?s=128&d=identicon&r=PG&f=1", "display_name": "Gwang-Jin Kim", "link": "https://stackoverflow.com/users/9690090/gwang-jin-kim"}, "is_accepted": false, "score": 0, "last_activity_date": 1573081353, "creation_date": 1573081353, "answer_id": 58739681, "question_id": 58739452, "link": "https://stackoverflow.com/questions/58739452/how-do-i-build-a-neural-network-model-that-takes-in-a-list-of-tuples/58739681#58739681", "title": "How do I build a neural network model that takes in a list of tuples", "body": "<p>Try this:</p>\n\n<pre><code>n_output = 3\n\ndef network(self):\n        model = Sequential()\n        model.add(Dense(6, input_dim=6, kernel_initializer='normal', activation='relu'))\n        model.add(Dense(4, kernel_initializer='normal', activation='relu'))\n        model.add(Dense(n_output, activation='softmax'))\n        opt = Adam(self.learning_rate)\n        model.compile(loss='mse', optimizer=opt)\n        return model\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 12334699, "user_type": "registered", "profile_image": "https://graph.facebook.com/1333748360139380/picture?type=large", "display_name": "NhatLe", "link": "https://stackoverflow.com/users/12334699/nhatle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 118, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1573081353, "creation_date": 1573079590, "question_id": 58739452, "link": "https://stackoverflow.com/questions/58739452/how-do-i-build-a-neural-network-model-that-takes-in-a-list-of-tuples", "title": "How do I build a neural network model that takes in a list of tuples", "body": "<p>I am trying to make an AI using Keras model that learns how to play pong. The input that my current model takes in is a list of tuple of agent.rect which is taken from pygame.Rect() function and agent.rect.center alongside with the bot that I coded and the ball of the game. How do I build a kind of model that takes in that type of input and outputs a proper result. </p>\n\n<p>I've tried changing the input_dim to 18 from the original code, but it wouldn't work</p>\n\n<p>This is my model</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def network(self):\n        model = Sequential()\n        model.add(Dense(output_dim=120, activation='relu', input_dim=6))\n        model.add(Dropout(0.15))\n        model.add(Dense(output_dim=120, activation='relu'))\n        model.add(Dropout(0.15))\n        model.add(Dense(output_dim=120, activation='relu'))\n        model.add(Dropout(0.15))\n        model.add(Dense(output_dim=3, activation='softmax'))\n        opt = Adam(self.learning_rate)\n        model.compile(loss='mse', optimizer=opt)\n        return model\n</code></pre>\n\n<p>This is the state I tried to put in</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def get_state(self, pong, player, bot):\n\n        state = [player.rect, player.rect.center, pong.rect, pong.rect.center, bot.rect, bot.rect.center]\n        self.length = len(state)\n        return np.asarray(state)\n</code></pre>\n\n<p>And this is where the error is</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>print self.model.predict(np.array(next_state))\n                target = reward + self.gamma * np.amax(self.model.predict(np.array([next_state]))[0])\n            target_f = self.model.predict(np.array([state]))\n            target_f[0][np.argmax(action)] = target\n            self.model.fit(np.array([state]), target_f, epochs=1, verbose=0)\n</code></pre>\n\n<p>The error output is ValueError: Error when checking input: expected dense_1_input to have shape (6,) but got array with shape (1,)</p>\n"}, {"tags": ["python", "tensorflow", "machine-learning", "keras", "deep-learning"], "comments": [{"owner": {"reputation": 5586, "user_id": 5763590, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AUdju.png?s=128&g=1", "display_name": "mrk", "link": "https://stackoverflow.com/users/5763590/mrk"}, "edited": false, "score": 0, "creation_date": 1573554208, "post_id": 58739419, "comment_id": 103910976, "body": "What is your batchsize? And how does your Groundtruth look like?"}, {"owner": {"reputation": 816, "user_id": 1184789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fae6c039d476cf27fc5228889af53828?s=128&d=identicon&r=PG", "display_name": "Daniel Samuels", "link": "https://stackoverflow.com/users/1184789/daniel-samuels"}, "reply_to_user": {"reputation": 5586, "user_id": 5763590, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AUdju.png?s=128&g=1", "display_name": "mrk", "link": "https://stackoverflow.com/users/5763590/mrk"}, "edited": false, "score": 0, "creation_date": 1573555285, "post_id": 58739419, "comment_id": 103911462, "body": "Batch size for both training and validation is currently set to 32. I don&#39;t know what the ground truth is."}, {"owner": {"reputation": 14204, "user_id": 4723795, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/980705688614873/picture?type=large", "display_name": "xenteros", "link": "https://stackoverflow.com/users/4723795/xenteros"}, "edited": false, "score": 0, "creation_date": 1573728140, "post_id": 58739419, "comment_id": 103981507, "body": "Could you show <code>helpers</code>?"}, {"owner": {"reputation": 816, "user_id": 1184789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fae6c039d476cf27fc5228889af53828?s=128&d=identicon&r=PG", "display_name": "Daniel Samuels", "link": "https://stackoverflow.com/users/1184789/daniel-samuels"}, "reply_to_user": {"reputation": 14204, "user_id": 4723795, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/980705688614873/picture?type=large", "display_name": "xenteros", "link": "https://stackoverflow.com/users/4723795/xenteros"}, "edited": false, "score": 0, "creation_date": 1573745391, "post_id": 58739419, "comment_id": 103991610, "body": "@xenteros Sure, I&#39;ve just edited the original post to include it."}, {"owner": {"reputation": 14204, "user_id": 4723795, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/980705688614873/picture?type=large", "display_name": "xenteros", "link": "https://stackoverflow.com/users/4723795/xenteros"}, "edited": false, "score": 0, "creation_date": 1573747312, "post_id": 58739419, "comment_id": 103992827, "body": "@DanielSamuels please have a look at the updated answer"}], "answers": [{"tags": [], "owner": {"reputation": 73682, "user_id": 2097240, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/JskU5.jpg?s=128&g=1", "display_name": "Daniel M&#246;ller", "link": "https://stackoverflow.com/users/2097240/daniel-m%c3%b6ller"}, "is_accepted": false, "score": 1, "last_activity_date": 1573503115, "creation_date": 1573503115, "answer_id": 58808059, "question_id": 58739419, "link": "https://stackoverflow.com/questions/58739419/accuracy-no-longer-improving-after-switching-to-dataset/58808059#58808059", "title": "Accuracy no longer improving after switching to Dataset", "body": "<p>There are somethings you must check. </p>\n\n<ul>\n<li>Try a few more times, you may have been unlucky with the 'relu' activations (if one layer goes to all zeros, you're stuck forever).     </li>\n<li>Take a <code>x, y</code> pair from the dataset and verify that <code>y</code> is within 0 and 1 (because you're using 'sigmoid').     </li>\n</ul>\n\n<p>These two are the most troublesome and probable things. </p>\n\n<p>Later you might want to check whether <code>x</code> from the dataset is within the same range you trained before (not crucial, but might change a little the performance), if the number of channels are the same, etc. </p>\n\n<hr>\n\n<p>For the relus, there are solutions like <a href=\"https://stackoverflow.com/questions/54688502/neural-network-does-not-learn-loss-stays-the-same/54688983#54688983\">this one</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 164, "user_id": 2276700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11183651fda4ea3e05c750dd46ca3f1b?s=128&d=identicon&r=PG", "display_name": "Karandeepdps", "link": "https://stackoverflow.com/users/2276700/karandeepdps"}, "is_accepted": false, "score": 0, "last_activity_date": 1574068436, "creation_date": 1574068436, "answer_id": 58911198, "question_id": 58739419, "link": "https://stackoverflow.com/questions/58739419/accuracy-no-longer-improving-after-switching-to-dataset/58911198#58911198", "title": "Accuracy no longer improving after switching to Dataset", "body": "<p>First of all remove all the image augmentation.\nThen overfit your model on a small dataset after this include the dataset with augmentation.\nAlso note:\ntraining/\n        true/  (366 images)\n        false/ (354 images)</p>\n\n<p>validation/\n        true/  (175 images)\n        false/ (885 images)\nYour validation dataset looks too complex to me try to add more percentage of images in training dataset.</p>\n"}, {"tags": [], "owner": {"reputation": 2454, "user_id": 4373898, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-iv9fB-QtuE0/AAAAAAAAAAI/AAAAAAAAAoQ/iXlMjqkhDDk/photo.jpg?sz=128", "display_name": "AlexisBRENON", "link": "https://stackoverflow.com/users/4373898/alexisbrenon"}, "is_accepted": false, "score": 0, "last_activity_date": 1574092361, "creation_date": 1574092361, "answer_id": 58918412, "question_id": 58739419, "link": "https://stackoverflow.com/questions/58739419/accuracy-no-longer-improving-after-switching-to-dataset/58918412#58918412", "title": "Accuracy no longer improving after switching to Dataset", "body": "<p>You should highlight what changed compare to your code when it worked well.</p>\n\n<p>I hope the <code>process_path</code> function was quiet similar and so that there is not any error there (image decoding, channel management, label generation).</p>\n\n<p>So if the modifications are only related to the <code>Dataset</code> API you can start by checking the generated sample:</p>\n\n<pre><code>batch = next(iter(training_dataset))\ntf.print(\"Image: \", batch[0][0])\ntf.print(\"Label: \", batch[1][0])\n</code></pre>\n\n<p>Other things that seems strange:</p>\n\n<ul>\n<li>a shuffle buffer of size 10000 seems to big for your +700 images</li>\n<li>are you sure of your <code>steps_per_epoch</code> value. Dataset cardinality is not always very accurate.</li>\n</ul>\n"}], "owner": {"reputation": 816, "user_id": 1184789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fae6c039d476cf27fc5228889af53828?s=128&d=identicon&r=PG", "display_name": "Daniel Samuels", "link": "https://stackoverflow.com/users/1184789/daniel-samuels"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 237, "favorite_count": 0, "answer_count": 3, "score": 6, "last_activity_date": 1574092361, "creation_date": 1573079389, "last_edit_date": 1573745378, "question_id": 58739419, "link": "https://stackoverflow.com/questions/58739419/accuracy-no-longer-improving-after-switching-to-dataset", "title": "Accuracy no longer improving after switching to Dataset", "body": "<p>I recently trained a binary image classifier and ended up with a model which was around 97.8% accurate. I created this classifier by following a couple of official Tensorflow guides, namely:</p>\n\n<ul>\n<li><a href=\"https://www.tensorflow.org/tutorials/images/classification\" rel=\"nofollow noreferrer\">https://www.tensorflow.org/tutorials/images/classification</a></li>\n<li><a href=\"https://www.tensorflow.org/tutorials/load_data/images\" rel=\"nofollow noreferrer\">https://www.tensorflow.org/tutorials/load_data/images</a></li>\n</ul>\n\n<p>I noticed while training (on a GTX 1080) that each epoch was taking around 30 seconds to run. Further reading revealed that a better way to load data into a Tensorflow training run is by using a Dataset. So I updated my code to load the images into a dataset and then have them read by the <code>model.fit_generator</code> method.</p>\n\n<p>Now when I perform my training I find that my accuracy and loss metrics are static - even with the learning rate changing automatically over time. The output looks something like this:</p>\n\n<pre><code>loss: 7.7125 - acc: 0.5000 - val_loss: 7.7125 - val_acc: 0.5000\n</code></pre>\n\n<p>Given that I'm training a binary classifier an accuracy of 50% is the same as guessing, so I'm wondering if there's a problem with the way I'm providing the images, or perhaps with the size of the dataset.</p>\n\n<p>My image data is split like this:</p>\n\n<pre><code>training/\n        true/  (366 images)\n        false/ (354 images)\n\nvalidation/\n        true/  (175 images)\n        false/ (885 images)\n</code></pre>\n\n<p>I was using <code>ImageDataGenerator</code> before with various mutations being performed, therefore increasing the overall dataset. Is my problem with the size of my dataset?</p>\n\n<p>The application code I'm using is as follows:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import math\n\nimport tensorflow as tf\nimport os\n\nfrom tensorflow.keras.optimizers import RMSprop\nfrom tensorflow.keras.callbacks import EarlyStopping\n\nimport helpers\nimport settings\n\nAUTOTUNE = tf.data.experimental.AUTOTUNE\n\nassert tf.test.is_built_with_cuda()\nassert tf.test.is_gpu_available()\n\n# Collect the list of training files and process their paths.\ntraining_dataset_files = tf.data.Dataset.list_files(os.path.join(settings.TRAINING_DIRECTORY, '*', '*.png'))\ntraining_dataset_labelled = training_dataset_files.map(helpers.process_path, num_parallel_calls=AUTOTUNE)\ntraining_dataset = helpers.prepare_for_training(training_dataset_labelled)\n\n# Collect the validation files.\nvalidation_dataset_files = tf.data.Dataset.list_files(os.path.join(settings.VALIDATION_DIRECTORY, '*', '*.png'))\nvalidation_dataset_labelled = validation_dataset_files.map(helpers.process_path, num_parallel_calls=AUTOTUNE)\nvalidation_dataset = helpers.prepare_for_training(validation_dataset_labelled)\n\nmodel = tf.keras.models.Sequential([\n    # This is the first convolution\n    tf.keras.layers.Conv2D(16, (3, 3), activation='relu', input_shape=(settings.TARGET_IMAGE_HEIGHT, settings.TARGET_IMAGE_WIDTH, 3)),\n    tf.keras.layers.MaxPooling2D(2, 2),\n    # The second convolution\n    tf.keras.layers.Conv2D(32, (3, 3), activation='relu'),\n    tf.keras.layers.MaxPooling2D(2, 2),\n    # The third convolution\n    tf.keras.layers.Conv2D(64, (3, 3), activation='relu'),\n    tf.keras.layers.MaxPooling2D(2, 2),\n    # The fourth convolution\n    tf.keras.layers.Conv2D(64, (3, 3), activation='relu'),\n    tf.keras.layers.MaxPooling2D(2, 2),\n    # The fifth convolution\n    tf.keras.layers.Conv2D(64, (3, 3), activation='relu'),\n    tf.keras.layers.MaxPooling2D(2, 2),\n    # Flatten the results to feed into a DNN\n    tf.keras.layers.Flatten(),\n    # 512 neuron hidden layer\n    tf.keras.layers.Dense(512, activation='relu'),\n    # Only 1 output neuron. It will contain a value from 0-1 where 0 for 1 class ('false') and 1 for the other ('true')\n    tf.keras.layers.Dense(1, activation='sigmoid')\n])\n\nmodel.summary()\n\nmodel.compile(\n    loss='binary_crossentropy',\n    optimizer=RMSprop(lr=0.1),\n    metrics=['acc']\n)\n\ncallbacks = [\n    # EarlyStopping(patience=4),\n    tf.keras.callbacks.ReduceLROnPlateau(\n        monitor='val_acc',\n        patience=2,\n        verbose=1,\n        factor=0.5,\n        min_lr=0.00001\n    ),\n    tf.keras.callbacks.ModelCheckpoint(\n        # Path where to save the model\n        filepath=settings.CHECKPOINT_FILE,\n        # The two parameters below mean that we will overwrite\n        # the current checkpoint if and only if\n        # the `val_loss` score has improved.\n        save_best_only=True,\n        monitor='val_loss',\n        verbose=1\n    ),\n    tf.keras.callbacks.TensorBoard(\n        log_dir=settings.LOG_DIRECTORY,\n        histogram_freq=1\n    )\n]\n\ntraining_dataset_length = tf.data.experimental.cardinality(training_dataset_files).numpy()\nsteps_per_epoch = math.ceil(training_dataset_length // settings.TRAINING_BATCH_SIZE)\n\nvalidation_dataset_length = tf.data.experimental.cardinality(validation_dataset_files).numpy()\nvalidation_steps = math.ceil(validation_dataset_length // settings.VALIDATION_BATCH_SIZE)\n\nhistory = model.fit_generator(\n    training_dataset,\n    steps_per_epoch=steps_per_epoch,\n    epochs=20000,\n    verbose=1,\n    validation_data=validation_dataset,\n    validation_steps=validation_steps,\n    callbacks=callbacks,\n)\n\nmodel.save(settings.FULL_MODEL_FILE)\n</code></pre>\n\n<p>With <code>helpers.py</code> looking like this:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import tensorflow as tf\nimport settings\n\nAUTOTUNE = tf.data.experimental.AUTOTUNE\n\n\ndef process_path(file_path):\n    parts = tf.strings.split(file_path, '\\\\')\n    label = parts[-2] == settings.CLASS_NAMES\n\n    # Read the file and decode the image\n    img = tf.io.read_file(file_path)\n    img = tf.image.decode_png(img, channels=3)\n    img = tf.image.convert_image_dtype(img, tf.float32)\n    img = tf.image.resize(img, [settings.TARGET_IMAGE_HEIGHT, settings.TARGET_IMAGE_WIDTH])\n    return img, label\n\n\ndef prepare_for_training(ds, cache=True, shuffle_buffer_size=10000):\n    if cache:\n        if isinstance(cache, str):\n            ds = ds.cache(cache)\n        else:\n            ds = ds.cache()\n\n    ds = ds.shuffle(buffer_size=shuffle_buffer_size)\n\n    ds = ds.repeat()\n    ds = ds.batch(settings.TRAINING_BATCH_SIZE)\n    ds = ds.prefetch(buffer_size=AUTOTUNE)\n\n    return ds\n</code></pre>\n\n<p>A larger snippet of application output is as follows:</p>\n\n<pre><code>21/22 [===========================&gt;..] - ETA: 0s - loss: 7.7125 - acc: 0.5000\nEpoch 00207: val_loss did not improve from 7.71247\n22/22 [==============================] - 5s 247ms/step - loss: 7.7125 - acc: 0.5000 - val_loss: 7.7125 - val_acc: 0.5000\nEpoch 208/20000\n21/22 [===========================&gt;..] - ETA: 0s - loss: 7.7125 - acc: 0.5000\nEpoch 00208: val_loss did not improve from 7.71247\n22/22 [==============================] - 5s 248ms/step - loss: 7.7125 - acc: 0.5000 - val_loss: 7.7125 - val_acc: 0.5000\nEpoch 209/20000\n21/22 [===========================&gt;..] - ETA: 0s - loss: 7.7125 - acc: 0.5000\nEpoch 00209: val_loss did not improve from 7.71247\n22/22 [==============================] - 6s 251ms/step - loss: 7.7125 - acc: 0.5000 - val_loss: 7.7125 - val_acc: 0.5000\nEpoch 210/20000\n21/22 [===========================&gt;..] - ETA: 0s - loss: 7.7125 - acc: 0.5000\nEpoch 00210: val_loss did not improve from 7.71247\n22/22 [==============================] - 5s 242ms/step - loss: 7.7125 - acc: 0.5000 - val_loss: 7.7125 - val_acc: 0.5000\nEpoch 211/20000\n21/22 [===========================&gt;..] - ETA: 0s - loss: 7.7125 - acc: 0.5000\nEpoch 00211: val_loss did not improve from 7.71247\n22/22 [==============================] - 5s 246ms/step - loss: 7.7125 - acc: 0.5000 - val_loss: 7.7125 - val_acc: 0.5000\nEpoch 212/20000\n21/22 [===========================&gt;..] - ETA: 0s - loss: 7.7125 - acc: 0.5000\nEpoch 00212: val_loss did not improve from 7.71247\n22/22 [==============================] - 6s 252ms/step - loss: 7.7125 - acc: 0.5000 - val_loss: 7.7125 - val_acc: 0.5000\nEpoch 213/20000\n21/22 [===========================&gt;..] - ETA: 0s - loss: 7.7125 - acc: 0.5000\nEpoch 00213: val_loss did not improve from 7.71247\n22/22 [==============================] - 5s 242ms/step - loss: 7.7125 - acc: 0.5000 - val_loss: 7.7125 - val_acc: 0.5000\nEpoch 214/20000\n21/22 [===========================&gt;..] - ETA: 0s - loss: 7.7125 - acc: 0.5000\nEpoch 00214: val_loss did not improve from 7.71247\n22/22 [==============================] - 5s 241ms/step - loss: 7.7125 - acc: 0.5000 - val_loss: 7.7125 - val_acc: 0.5000\nEpoch 215/20000\n21/22 [===========================&gt;..] - ETA: 0s - loss: 7.7125 - acc: 0.5000\nEpoch 00215: val_loss did not improve from 7.71247\n22/22 [==============================] - 5s 247ms/step - loss: 7.7125 - acc: 0.5000 - val_loss: 7.7125 - val_acc: 0.5000\nEpoch 216/20000\n21/22 [===========================&gt;..] - ETA: 0s - loss: 7.7125 - acc: 0.5000\nEpoch 00216: val_loss did not improve from 7.71247\n22/22 [==============================] - 5s 248ms/step - loss: 7.7125 - acc: 0.5000 - val_loss: 7.7125 - val_acc: 0.5000\nEpoch 217/20000\n21/22 [===========================&gt;..] - ETA: 0s - loss: 7.7125 - acc: 0.5000\nEpoch 00217: val_loss did not improve from 7.71247\n22/22 [==============================] - 5s 249ms/step - loss: 7.7125 - acc: 0.5000 - val_loss: 7.7125 - val_acc: 0.5000\nEpoch 218/20000\n21/22 [===========================&gt;..] - ETA: 0s - loss: 7.7125 - acc: 0.5000\nEpoch 00218: val_loss did not improve from 7.71247\n22/22 [==============================] - 5s 244ms/step - loss: 7.7125 - acc: 0.5000 - val_loss: 7.7125 - val_acc: 0.5000\nEpoch 219/20000\n19/22 [========================&gt;.....] - ETA: 0s - loss: 7.7125 - acc: 0.5000\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 2479, "user_id": 11301900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8826c4b7675bd83127fddefc109b7f5d?s=128&d=identicon&r=PG&f=1", "display_name": "AMC", "link": "https://stackoverflow.com/users/11301900/amc"}, "edited": false, "score": 0, "creation_date": 1573082770, "post_id": 58739380, "comment_id": 103769656, "body": "You seem to be confusing lists and tuples. <code>(1, 2, 3)</code> is a tuple, <code>[1, 2, 3]</code> is a list. Variables should generally follow the <code>lowercase_with_underscores</code> naming convention, see <a href=\"https://www.python.org/dev/peps/pep-0008/\" rel=\"nofollow noreferrer\">PEP 8</a> for more on Python style."}], "answers": [{"tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": false, "score": 0, "last_activity_date": 1573079573, "creation_date": 1573079573, "answer_id": 58739448, "question_id": 58739380, "link": "https://stackoverflow.com/questions/58739380/i-want-to-take-out-integer-from-text/58739448#58739448", "title": "I want to take out integer from text", "body": "<p>Use a regular expression to match all the integers.</p>\n\n<pre><code>import re\nsometext = 'somekindoftext123withthis445'\nnumlist = list(map(int, re.findall(r'\\d+', sometext)))\nprint(numlist)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9, "user_id": 12217236, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-uf89ZiKq4xY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc7v_1iTIkRpaX13FpAH6Q25BMOtQ/photo.jpg?sz=128", "display_name": "TLuna7", "link": "https://stackoverflow.com/users/12217236/tluna7"}, "edited": false, "score": 0, "creation_date": 1573123365, "post_id": 58739457, "comment_id": 103782565, "body": "This helped me, butcan you tell me what (num *=10) does?"}, {"owner": {"reputation": 5045, "user_id": 7688996, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HKydk.png?s=128&g=1", "display_name": "Mohd", "link": "https://stackoverflow.com/users/7688996/mohd"}, "reply_to_user": {"reputation": 9, "user_id": 12217236, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-uf89ZiKq4xY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc7v_1iTIkRpaX13FpAH6Q25BMOtQ/photo.jpg?sz=128", "display_name": "TLuna7", "link": "https://stackoverflow.com/users/12217236/tluna7"}, "edited": false, "score": 0, "creation_date": 1573148185, "post_id": 58739457, "comment_id": 103796269, "body": "@TLuna7 multiplies the number by 10 (num = num * 10), which is used to create the number digit by digit (0 * 10 + 1 = 1) (1 * 10 + 2 = 12) (12 * 10 + 3 = 123)"}], "tags": [], "owner": {"reputation": 5045, "user_id": 7688996, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HKydk.png?s=128&g=1", "display_name": "Mohd", "link": "https://stackoverflow.com/users/7688996/mohd"}, "is_accepted": true, "score": 3, "last_activity_date": 1573079993, "last_edit_date": 1573079993, "creation_date": 1573079618, "answer_id": 58739457, "question_id": 58739380, "link": "https://stackoverflow.com/questions/58739380/i-want-to-take-out-integer-from-text/58739457#58739457", "title": "I want to take out integer from text", "body": "<p>You can use regular expressions to find all occurrences of digits as the following:</p>\n\n<pre><code>import re\ns = 'somekindoftext123withthis445'\nnums = [int(x) for x in re.findall(r'\\d+', s)]\nprint(nums)\n# [123, 445]\n</code></pre>\n\n<p>However, if you don't want to use regular expressions and use loop instead you can do something like:</p>\n\n<pre><code>s = 'somekindoftext123withthis445'\nnum = 0\nnums = []\nok = False\nfor c in s:\n    if c.isdigit():\n        num *= 10\n        num += int(c)\n        ok = True\n    else:\n        if ok:\n            nums.append(num)\n            num = 0\n            ok = False\nif num:\n    nums.append(num)\nprint(nums)\n# [123, 445]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 12334796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kfSw5.jpg?s=128&g=1", "display_name": "Vishwam Pandya", "link": "https://stackoverflow.com/users/12334796/vishwam-pandya"}, "is_accepted": false, "score": 0, "last_activity_date": 1573081153, "creation_date": 1573081153, "answer_id": 58739658, "question_id": 58739380, "link": "https://stackoverflow.com/questions/58739380/i-want-to-take-out-integer-from-text/58739658#58739658", "title": "I want to take out integer from text", "body": "<p>A one liner solution:</p>\n\n<pre><code>print [i for i in Sometext if i.isdigit()]\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 12217236, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-uf89ZiKq4xY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc7v_1iTIkRpaX13FpAH6Q25BMOtQ/photo.jpg?sz=128", "display_name": "TLuna7", "link": "https://stackoverflow.com/users/12217236/tluna7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "accepted_answer_id": 58739457, "answer_count": 3, "score": 0, "last_activity_date": 1573081153, "creation_date": 1573079130, "last_edit_date": 1573079433, "question_id": 58739380, "link": "https://stackoverflow.com/questions/58739380/i-want-to-take-out-integer-from-text", "title": "I want to take out integer from text", "body": "<p>So, there some text that has integers in it, i want to take those out and put them in different list, but not together. \nexample: </p>\n\n<pre><code>Sometext = somekindoftext123withthis445\nnumlist = (123,445)\n</code></pre>\n\n<p>i tried doing it with lists</p>\n\n<pre><code>nums = (\"0\",\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\")\n</code></pre>\n\n<p>but it rather puts these separately.</p>\n\n<pre><code>listi = []\nnum = []\nwhile True:\n  inputi = input(\"Text here: \")\n  if inputi == \"stop\":\n    break\n  else:  listi.append(inputi)\n\n\nfor i in inputi:\n  if len(inputi) &gt; 0:\n    listi.append(inputi)\nwhile nums != 1000:\n    if nums in listi[0]:\n      num.append(nums)\n</code></pre>\n"}, {"tags": ["python", "cryptography", "ecdsa"], "answers": [{"tags": [], "owner": {"reputation": 506, "user_id": 2784303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2ab1d8d0530485d1027cc9f5bce2664?s=128&d=identicon&r=PG", "display_name": "Bill Huneke", "link": "https://stackoverflow.com/users/2784303/bill-huneke"}, "is_accepted": true, "score": 1, "last_activity_date": 1573095882, "creation_date": 1573095882, "answer_id": 58741381, "question_id": 58739375, "link": "https://stackoverflow.com/questions/58739375/python-ecdsa-get-private-and-public-key/58741381#58741381", "title": "python ecdsa get private and public key", "body": "<p>You have generated the private and public keys correctly. You now have class instances. These instances are not necessarily printing the way you expect - I think that is your only issue.</p>\n\n<p>If you want to see PEM format, you should do this:</p>\n\n<pre><code>private_key = SigningKey.generate(SECP256k1)\npublic_key = private_key.get_verifying_key()\nprint(\"private_key:\")\nprint(private_key.to_pem())\nprint(\"public_key:\")\nprint(public_key.to_pem())\n</code></pre>\n\n<p>For DER format, use <em>to_der()</em>.  For raw bytes, use <em>to_string()</em>.</p>\n\n<p>If you are communicating a key to someone, to a wallet, to openssl, etc, you probably want PEM format.</p>\n"}], "owner": {"reputation": 7950, "user_id": 2848189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Sy43q.png?s=128&g=1", "display_name": "Alejandro Veintimilla", "link": "https://stackoverflow.com/users/2848189/alejandro-veintimilla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 58741381, "answer_count": 1, "score": 0, "last_activity_date": 1573095882, "creation_date": 1573079094, "question_id": 58739375, "link": "https://stackoverflow.com/questions/58739375/python-ecdsa-get-private-and-public-key", "title": "python ecdsa get private and public key", "body": "<p>This question may seem simple for those who know the library. How do I get the actual value of the private and public keys? I have:</p>\n\n<pre><code>private_key = SigningKey.generate(SECP256k1)\npublic_key = private_key.get_verifying_key()\nprint(\"private_key:\")\nprint(private_key)\nprint(\"public_key:\")\nprint(public_key)\n</code></pre>\n\n<p>And it prints:</p>\n\n<blockquote>\n  <blockquote>\n    <blockquote>\n      <blockquote>\n        <p>generate_keys() private_key:  public_key:\n        VerifyingKey.from_string(b'\\x029q\\xfd\\xe9\\x1dL\\xc0\\xab\\xb1\\xd2GG\\xef8\\xcb\\x89\\xce\\xbb\\xa8\\x10*\\xfa\\xda\\x0c\\x92\\x12\\xa5\\xa0\\x81\\xef\\x07\\x9e',\n        SECP256k1, sha1) (,\n        VerifyingKey.from_string(b'\\x029q\\xfd\\xe9\\x1dL\\xc0\\xab\\xb1\\xd2GG\\xef8\\xcb\\x89\\xce\\xbb\\xa8\\x10*\\xfa\\xda\\x0c\\x92\\x12\\xa5\\xa0\\x81\\xef\\x07\\x9e',\n        SECP256k1, sha1))</p>\n      </blockquote>\n    </blockquote>\n  </blockquote>\n</blockquote>\n\n<p>I need the private_key and public_key real values. How do I get them?</p>\n"}, {"tags": ["python", "django", "python-imaging-library"], "comments": [{"owner": {"reputation": 1336, "user_id": 8763097, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/07748010c90ca48d262a588483d84367?s=128&d=identicon&r=PG&f=1", "display_name": "PeptideWitch", "link": "https://stackoverflow.com/users/8763097/peptidewitch"}, "edited": false, "score": 1, "creation_date": 1573079355, "post_id": 58739369, "comment_id": 103768675, "body": "I&#39;m guessing you&#39;re using PyCharm. Can you double check that the project interpreter is set to the same version of python that has PIL installed? <a href=\"https://www.jetbrains.com/help/pycharm/configuring-python-interpreter.html\" rel=\"nofollow noreferrer\">jetbrains.com/help/pycharm/configuring-python-interpreter.ht&zwnj;&#8203;ml</a>"}, {"owner": {"reputation": 4837, "user_id": 9769953, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f14a586643a20c8d68010f7a329f5a04?s=128&d=identicon&r=PG", "display_name": "0 0", "link": "https://stackoverflow.com/users/9769953/0-0"}, "edited": false, "score": 0, "creation_date": 1573079550, "post_id": 58739369, "comment_id": 103768744, "body": "How are you importing it?"}, {"owner": {"reputation": 4837, "user_id": 9769953, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f14a586643a20c8d68010f7a329f5a04?s=128&d=identicon&r=PG", "display_name": "0 0", "link": "https://stackoverflow.com/users/9769953/0-0"}, "edited": false, "score": 3, "creation_date": 1573079573, "post_id": 58739369, "comment_id": 103768750, "body": "Please don&#39;t use images; copy-paste the output from the terminal into your question (e.g., as a code block)."}], "answers": [{"tags": [], "owner": {"reputation": 1752, "user_id": 12335841, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FZUCt.png?s=128&g=1", "display_name": "Mukul Kumar", "link": "https://stackoverflow.com/users/12335841/mukul-kumar"}, "is_accepted": false, "score": 0, "last_activity_date": 1573124646, "creation_date": 1573124646, "answer_id": 58747383, "question_id": 58739369, "link": "https://stackoverflow.com/questions/58739369/pillow-installed-but-getting-no-module-named-pillow/58747383#58747383", "title": "Pillow installed, but getting \u201cno module named pillow\u201d", "body": "<p>Activate the virtual environment, then install Pillow package</p>\n\n<p>pip install Pillow</p>\n\n<p>and try to use pillow package in your activated environment</p>\n"}], "owner": {"reputation": 1, "user_id": 12332489, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAFZFtxvi_SCjWRHdX4PS26p0KvMeQrx0tGcrJBjw=k-s128", "display_name": "Ahmed Maher", "link": "https://stackoverflow.com/users/12332489/ahmed-maher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 1, "score": -6, "last_activity_date": 1573124646, "creation_date": 1573079062, "question_id": 58739369, "link": "https://stackoverflow.com/questions/58739369/pillow-installed-but-getting-no-module-named-pillow", "title": "Pillow installed, but getting \u201cno module named pillow\u201d", "body": "<p><a href=\"https://i.stack.imgur.com/IaB8d.png\" rel=\"nofollow noreferrer\">i can't import PIL even when i installed it ?</a></p>\n"}, {"tags": ["python", "pickle", "google-colaboratory", "defaultdict"], "answers": [{"comments": [{"owner": {"reputation": 2479, "user_id": 11301900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8826c4b7675bd83127fddefc109b7f5d?s=128&d=identicon&r=PG&f=1", "display_name": "AMC", "link": "https://stackoverflow.com/users/11301900/amc"}, "edited": false, "score": 0, "creation_date": 1573520525, "post_id": 58740957, "comment_id": 103900615, "body": "I believe you can also use <code>.text</code> directly instead of <code>.string</code> and then casting with <code>str()</code>."}], "tags": [], "owner": {"reputation": 655, "user_id": 4570144, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/10152794699891185/picture?type=large", "display_name": "Travis Black", "link": "https://stackoverflow.com/users/4570144/travis-black"}, "is_accepted": false, "score": 1, "last_activity_date": 1573092336, "creation_date": 1573092336, "answer_id": 58740957, "question_id": 58739357, "link": "https://stackoverflow.com/questions/58739357/google-colab-cant-pickle-my-defaultdict-recursionerror/58740957#58740957", "title": "google colab, can&#39;t pickle my defaultdict - recursionerror", "body": "<p>Alright, it drove me nuts but I eventually figured it out.\nI had a defaultdict(list) of what I thought were strings.</p>\n\n<p>But actually they were some sort of beautiful soup objects that result from calling table.string.</p>\n\n<p>A bit misleading.  And apparently it completely screws up any sort of pickling.  Also screwed up my attempt at json dumps, too.</p>\n\n<p>I fixed it by explicitly casting them to strings, and now it will actually pickle.</p>\n"}], "owner": {"reputation": 655, "user_id": 4570144, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/10152794699891185/picture?type=large", "display_name": "Travis Black", "link": "https://stackoverflow.com/users/4570144/travis-black"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 211, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1573092336, "creation_date": 1573078965, "question_id": 58739357, "link": "https://stackoverflow.com/questions/58739357/google-colab-cant-pickle-my-defaultdict-recursionerror", "title": "google colab, can&#39;t pickle my defaultdict - recursionerror", "body": "<p>I am using google colab.  I have done the exact thing I am trying to do many times, so I don't know why it's not working now.</p>\n\n<p>All i do is make a dictionary with around 1000 keys, and every value is a list of 4 strings.\nI've confirmed the dictionary is exactly what I think it is.</p>\n\n<p>I am using joblib.  I also tried just, pickle.dump.</p>\n\n<p><code>dump(mydict,'/content/gdrive/My Drive/mydict.joblib')</code></p>\n\n<p>It results in:</p>\n\n<pre><code>---------------------------------------------------------------------------\nRecursionError                            Traceback (most recent call last)\n&lt;ipython-input-5-7edb860e5e4b&gt; in &lt;module&gt;()\n----&gt; 1 dump(newdict,'/content/gdrive/My Drive/refs2019.joblib')\n\n74 frames\n... (skipped 134 stack entries. Use sys.last_value and sys.last_traceback to investigate further.) ...\n... last 203 frames repeated, from the frame below ...\n\n/usr/lib/python3.6/pickle.py in save(self, obj, save_persistent_id)\n    519 \n    520         # Save the reduce() output and finally memoize the object\n--&gt; 521         self.save_reduce(obj=obj, *rv)\n    522 \n    523     def persistent_id(self, obj):\n\nRecursionError: maximum recursion depth exceeded in comparison\n</code></pre>\n\n<p>I've tried it several times.  I tried it on different runtimes.  I checked that my google drive isn't full, it isn't.  I even created a list of comparable size and pickled it in the same runtime.  It worked fine.</p>\n\n<p>Any advice?  I am not sure what to do.  Maybe just try it again later?  I'd be a bit sad if that's the case.</p>\n"}, {"tags": ["python", "python-3.x", "pip", "linux-mint"], "comments": [{"owner": {"reputation": 7276, "user_id": 3220135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RR7BR.jpg?s=128&g=1", "display_name": "Aaron", "link": "https://stackoverflow.com/users/3220135/aaron"}, "edited": false, "score": 0, "creation_date": 1573079218, "post_id": 58739348, "comment_id": 103768635, "body": "<a href=\"https://askubuntu.com/a/509630\">askubuntu.com/a/509630</a>"}, {"owner": {"reputation": 9376, "user_id": 11138259, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2faec9f4f30093c8b0f5d47a69e551f?s=128&d=identicon&r=PG&f=1", "display_name": "sinoroc", "link": "https://stackoverflow.com/users/11138259/sinoroc"}, "edited": false, "score": 1, "creation_date": 1573079223, "post_id": 58739348, "comment_id": 103768636, "body": "Are you confusing the Debian / Mint <i>apt</i>-installable system package <code>python3-numpy</code> with its corresponding Python / PyPI <i>pip</i>-installable project <code>numpy</code>?"}, {"owner": {"reputation": 31, "user_id": 4509717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c92e2eb53547423e8f6c99f6d179cd14?s=128&d=identicon&r=PG&f=1", "display_name": "Jheni Gonsalves", "link": "https://stackoverflow.com/users/4509717/jheni-gonsalves"}, "edited": false, "score": 0, "creation_date": 1573079820, "post_id": 58739348, "comment_id": 103768846, "body": "Maybe, what is the difference? I tried installing it without the pip, like this: sudo apt install python3-numpy, it installed, but i&#39;s not working either"}], "answers": [{"tags": [], "owner": {"reputation": 736, "user_id": 5518510, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-SWxmZSBk6X4/AAAAAAAAAAI/AAAAAAAABUo/IYVOQ29qXu0/photo.jpg?sz=128", "display_name": "James Mchugh", "link": "https://stackoverflow.com/users/5518510/james-mchugh"}, "is_accepted": false, "score": 1, "last_activity_date": 1573096829, "creation_date": 1573096829, "answer_id": 58741500, "question_id": 58739348, "link": "https://stackoverflow.com/questions/58739348/how-to-fix-python3-instalation-on-linux-mint/58741500#58741500", "title": "How to fix python3 instalation on linux mint", "body": "<p>It looks like you may be using the <code>apt</code> package name in <code>pip</code> as opposed to the name of the PyPi package. First, check the default versions for pip and python on your system. This can be done using <code>pip --version</code> and <code>python --version</code>. If both are defaulting to Python 2.7 (which they very well might be), I would strongly recommend using Python 3.6 if possible, as Python 2.7 will reach EOL in 2020.</p>\n\n<p>You can do this explicitly by using <code>pip3</code> and <code>python3</code> via the command line. To install numpy for Python 3, use <code>pip3 install numpy</code>. Keep in mind that this will only install it for Python 3, so if you spin up Python 2.7 interpreter, it will not be installed. </p>\n\n<p>In the future, if you want to find the name of a PyPi package for install, you can do <code>pip search {QUERY}</code>, like <code>pip search numpy</code> for example.</p>\n"}], "owner": {"reputation": 31, "user_id": 4509717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c92e2eb53547423e8f6c99f6d179cd14?s=128&d=identicon&r=PG&f=1", "display_name": "Jheni Gonsalves", "link": "https://stackoverflow.com/users/4509717/jheni-gonsalves"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 919, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1610484345, "creation_date": 1573078921, "last_edit_date": 1573080117, "question_id": 58739348, "link": "https://stackoverflow.com/questions/58739348/how-to-fix-python3-instalation-on-linux-mint", "title": "How to fix python3 instalation on linux mint", "body": "<p>So I've been using linux mint mate for a while, and everything was working fine. \nSo as I got a new notebook, I installed the new version of linux mint (19.2 - Tina) alongside the windows 10. Everything went right, I think. </p>\n\n<p>Now, I'm trying to get it ready for use, and it's not working. </p>\n\n<p>It supposedly came with both versions of python:</p>\n\n<ul>\n<li>Python 2.7.15+</li>\n<li>Python 3.6.8</li>\n</ul>\n\n<p>But when I tried to run a simple hello world, but importing the essentials packages for me, something like this</p>\n\n<pre><code>import numpy as np\nimport math #as ma\nimport matplotlib.pyplot as plt; plt.switch_backend('agg')\nimport sys\nimport pandas as pd\nimport seaborn as sns; sns.set()\nimport powerlaw as pl\nfrom itertools import zip_longest\nimport csv\nimport os\n\nprint('hello world')\n</code></pre>\n\n<p>It didn't even recognize the numpy package, and I got the following:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"testes.py\", line 1, in &lt;module&gt;\n    import numpy as np\nModuleNotFoundError: No module named 'numpy'\n</code></pre>\n\n<p>So I went to this website and tried following the tutorial </p>\n\n<p><a href=\"https://packaging.python.org/tutorials/installing-packages/#id18\" rel=\"nofollow noreferrer\">https://packaging.python.org/tutorials/installing-packages/#id18</a></p>\n\n<p>But when I tried to install numpy the result was as bellow:</p>\n\n<pre><code>(tutorial_env) jheniffer@jheniffer-5480:~/Dropbox/teste_cros_bi$ pip install python3-numpy\nCollecting python3-numpy\nException:\nTraceback (most recent call last):\n  File \"/home/jheniffer/Dropbox/teste_cros_bi/tutorial_env/lib/python3.6/site-packages/pip/basecommand.py\", line 215, in main\n    status = self.run(options, args)\n  File \"/home/jheniffer/Dropbox/teste_cros_bi/tutorial_env/lib/python3.6/site-packages/pip/commands/install.py\", line 353, in run\n    wb.build(autobuilding=True)\n  File \"/home/jheniffer/Dropbox/teste_cros_bi/tutorial_env/lib/python3.6/site-packages/pip/wheel.py\", line 749, in build\n    self.requirement_set.prepare_files(self.finder)\n  File \"/home/jheniffer/Dropbox/teste_cros_bi/tutorial_env/lib/python3.6/site-packages/pip/req/req_set.py\", line 380, in prepare_files\n    ignore_dependencies=self.ignore_dependencies))\n  File \"/home/jheniffer/Dropbox/teste_cros_bi/tutorial_env/lib/python3.6/site-packages/pip/req/req_set.py\", line 554, in _prepare_file\n    require_hashes\n  File \"/home/jheniffer/Dropbox/teste_cros_bi/tutorial_env/lib/python3.6/site-packages/pip/req/req_install.py\", line 278, in populate_link\n    self.link = finder.find_requirement(self, upgrade)\n  File \"/home/jheniffer/Dropbox/teste_cros_bi/tutorial_env/lib/python3.6/site-packages/pip/index.py\", line 465, in find_requirement\n    all_candidates = self.find_all_candidates(req.name)\n  File \"/home/jheniffer/Dropbox/teste_cros_bi/tutorial_env/lib/python3.6/site-packages/pip/index.py\", line 423, in find_all_candidates\n    for page in self._get_pages(url_locations, project_name):\n  File \"/home/jheniffer/Dropbox/teste_cros_bi/tutorial_env/lib/python3.6/site-packages/pip/index.py\", line 568, in _get_pages\n    page = self._get_page(location)\n  File \"/home/jheniffer/Dropbox/teste_cros_bi/tutorial_env/lib/python3.6/site-packages/pip/index.py\", line 683, in _get_page\n    return HTMLPage.get_page(link, session=self.session)\n  File \"/home/jheniffer/Dropbox/teste_cros_bi/tutorial_env/lib/python3.6/site-packages/pip/index.py\", line 795, in get_page\n    resp.raise_for_status()\n  File \"/home/jheniffer/Dropbox/teste_cros_bi/tutorial_env/share/python-wheels/requests-2.18.4-py2.py3-none-any.whl/requests/models.py\", line 935, in raise_for_status\n    raise HTTPError(http_error_msg, response=self)\nrequests.exceptions.HTTPError: 404 Client Error: Not Found for url: https://pypi.org/simple/python3-numpy/\n</code></pre>\n\n<p>I don't know what should I do to get this running, \nhow should I proceed to install everything, because I thought that the basic packages, like numpy for example, was already installed, and every other time that I tried installing something by pip (on my previous laptop) it worked with just</p>\n\n<p><code>pip3 install python3-numpy</code></p>\n\n<p>I tried the option without pip, it installed successfully</p>\n\n<pre><code>(tutorial_env) jheniffer@jheniffer-5480:~/Dropbox/teste_cros_bi$ sudo apt install python3-numpy\n[sudo] password for jheniffer:             \nReading package lists... Done\nBuilding dependency tree       \nReading state information... Done\nSuggested packages:\n  gfortran python-numpy-doc python3-dev python3-nose python3-numpy-dbg\nThe following NEW packages will be installed:\n  python3-numpy\n0 upgraded, 1 newly installed, 0 to remove and 287 not upgraded.\nNeed to get 1.943 kB of archives.\nAfter this operation, 10,9 MB of additional disk space will be used.\nGet:1 http://archive.ubuntu.com/ubuntu bionic/main amd64 python3-numpy amd64 1:1.13.3-2ubuntu1 [1.943 kB]\nFetched 1.943 kB in 4s (528 kB/s)          \nSelecting previously unselected package python3-numpy.\n(Reading database ... 308507 files and directories currently installed.)\nPreparing to unpack .../python3-numpy_1%3a1.13.3-2ubuntu1_amd64.deb ...\nUnpacking python3-numpy (1:1.13.3-2ubuntu1) ...\nSetting up python3-numpy (1:1.13.3-2ubuntu1) ...\nProcessing triggers for man-db (2.8.3-2ubuntu0.1) ...\n</code></pre>\n\n<p>But when I tried to run the hello word code, I got this message again</p>\n\n<pre><code>(tutorial_env) jheniffer@jheniffer-5480:~/Dropbox/teste_cros_bi$ python3 testes.py \nTraceback (most recent call last):\n  File \"testes.py\", line 1, in &lt;module&gt;\n    import numpy as np\nModuleNotFoundError: No module named 'numpy'\n\n\n</code></pre>\n"}, {"tags": ["python", "web-scraping", "python-requests-html"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1573079774, "post_id": 58739346, "comment_id": 103768828, "body": "If you want to run JavaScript you need to use an enulator like Selenium."}, {"owner": {"reputation": 447, "user_id": 6537007, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b003e701266c3ad07c903999f31b440?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/6537007/david"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1573079873, "post_id": 58739346, "comment_id": 103768863, "body": "@Barmar: according to the requests_html documentation, this can render JavaScript.  <a href=\"https://pypi.org/project/requests-html/\" rel=\"nofollow noreferrer\">pypi.org/project/requests-html</a>"}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 8061508, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-vDPBOLJZnXA/AAAAAAAAAAI/AAAAAAAAB08/nsV4yjhlEN0/photo.jpg?sz=128", "display_name": "Carlos Oliveira", "link": "https://stackoverflow.com/users/8061508/carlos-oliveira"}, "is_accepted": false, "score": 0, "last_activity_date": 1612668815, "creation_date": 1612668815, "answer_id": 66084301, "question_id": 58739346, "link": "https://stackoverflow.com/questions/58739346/requests-html-not-running-java-script/66084301#66084301", "title": "requests_html Not running java script", "body": "<p>Add a sleep cycle so that the browser get some time to fetch resources and render the page. Tune the parameters if you still get errors:</p>\n<p>r.html.render(timeout=15, sleep=10)</p>\n<p>If you set the timeout to 0 it will just wait forever until the page loads.</p>\n"}], "owner": {"reputation": 447, "user_id": 6537007, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9b003e701266c3ad07c903999f31b440?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/6537007/david"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 176, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1612668815, "creation_date": 1573078908, "last_edit_date": 1573079919, "question_id": 58739346, "link": "https://stackoverflow.com/questions/58739346/requests-html-not-running-java-script", "title": "requests_html Not running java script", "body": "<p>I am attempting to use the following code to scrap a javascript website. In the browser when the website is open, it loads what I am trying to get inside <code>&lt;div class=results&gt;</code>. my problem is that when running this code in a jupyter notebook this div seems to be empty. </p>\n\n<pre><code>from requests_html import AsyncHTMLSession\nsession = AsyncHTMLSession()\nr = await session.get('https://thumbtack.github.io/abba/demo/abba.html#Baseline=13855%2C91428&amp;Variation+1=13242%2C90703&amp;abba%3AintervalConfidenceLevel=0.95&amp;abba%3AuseMultipleTestCorrection=true')\nawait r.html.arender() \nprint(r.content) \n\n#test of code\n</code></pre>\n\n<p>this resolves in having the empty div:</p>\n\n<pre><code>&lt;div class=\"results\"&gt;&lt;div&gt;\n</code></pre>\n\n<p>For the url provided above, in the browser, using inspect the same url  the same div resolves in a div with content. </p>\n\n<pre><code>&lt;div class=\"results\" style=\"display: block;\"&gt; &lt;table&gt;     &lt;thead&gt;         &lt;tr&gt;             &lt;th&gt;&lt;/th&gt;             &lt;th&gt;Successes&lt;/th&gt;             &lt;th&gt;Total&lt;/th&gt;             &lt;th colspan=\"2\"&gt;Success Rate&lt;/th&gt;             &lt;th&gt;p-value&lt;/th&gt;             &lt;th&gt;Improvement&lt;/th&gt;         &lt;/tr&gt;     &lt;/thead&gt;     &lt;tbody class=\"result-table\"&gt;      &lt;tr class=\"result-row\"&gt;   &lt;th class=\"bucket-name\"&gt;Baseline&lt;/th&gt;   &lt;td class=\"yes\"&gt;15,453&lt;/td&gt;   &lt;td class=\"total\"&gt;101,901&lt;/td&gt;   &lt;td class=\"conversion-numeric\"&gt; &lt;div class=\"interval\"&gt;   &lt;div class=\"error\"&gt;&lt;span class=\"lower-bound\"&gt;15%&lt;/span&gt; \u2013 &lt;span class=\"upper-bound\"&gt;15%&lt;/span&gt;&lt;/div&gt;   &lt;span class=\"base\"&gt;(&lt;span class=\"base-value\"&gt;15%&lt;/span&gt;)&lt;/span&gt; &lt;/div&gt;&lt;/td&gt;   &lt;td class=\"conversion-visual\" style=\"display: inline-block;\"&gt;&lt;svg font-size=\"10px\" font-family=\"sans-serif\" fill=\"none\" stroke=\"none\" stroke-width=\"1.5\" width=\"220\" height=\"15\" data-ol-has-click-handler=\"\"&gt;&lt;g transform=\"translate(10,0)\"&gt;&lt;rect x=\"114.94823723343774\" width=\"85.05176276656226\" height=\"15\" fill=\"rgb(184,184,184)\"&gt;&lt;/rect&gt;&lt;rect x=\"114.94823723343774\" width=\"1e-10\" height=\"15\" fill=\"rgb(180,38,71)\"&gt;&lt;/rect&gt;&lt;rect x=\"200\" width=\"1e-10\" height=\"15\" fill=\"rgb(38,180,60)\"&gt;&lt;/rect&gt;&lt;/g&gt;&lt;g transform=\"translate(10,0)\"&gt;&lt;line shape-rendering=\"crispEdges\" x1=\"-1\" y1=\"4\" x2=\"-1\" y2=\"11\" stroke=\"rgb(68,68,68)\" stroke-width=\"1\"&gt;&lt;/line&gt;&lt;line shape-rendering=\"crispEdges\" x1=\"200\" y1=\"4\" x2=\"200\" y2=\"11\" stroke=\"rgb(68,68,68)\" stroke-width=\"1\"&gt;&lt;/line&gt;&lt;/g&gt;&lt;g transform=\"translate(10,0)\"&gt;&lt;text pointer-events=\"none\" x=\"-3\" dy=\".35em\" transform=\"translate(-1,7.5)\" fill=\"rgb(68,68,68)\" text-anchor=\"end\" style=\"font: 12px Arial;\"&gt;-&lt;/text&gt;&lt;text pointer-events=\"none\" x=\"3\" dy=\".35em\" transform=\"translate(200,7.5)\" fill=\"rgb(68,68,68)\" style=\"font: 12px Arial;\"&gt;+&lt;/text&gt;&lt;/g&gt;&lt;g transform=\"translate(10,0)\"&gt;&lt;line shape-rendering=\"crispEdges\" x1=\"0\" y1=\"7.5\" x2=\"200\" y2=\"7.5\" stroke=\"rgb(68,68,68)\" stroke-width=\"1\"&gt;&lt;/line&gt;&lt;/g&gt;&lt;/svg&gt;&lt;/td&gt;   &lt;td class=\"p-value\"&gt;\u2014&lt;/td&gt;   &lt;td class=\"improvement\"&gt;\u2014&lt;/td&gt; &lt;/tr&gt; &lt;tr class=\"result-row\"&gt;   &lt;th class=\"bucket-name\"&gt;Variation 1&lt;/th&gt;   &lt;td class=\"yes\"&gt;14,690&lt;/td&gt;   &lt;td class=\"total\"&gt;100,845&lt;/td&gt;   &lt;td class=\"conversion-numeric\"&gt; &lt;div class=\"interval\"&gt;   &lt;div class=\"error\"&gt;&lt;span class=\"lower-bound\"&gt;14%&lt;/span&gt; \u2013 &lt;span class=\"upper-bound\"&gt;15%&lt;/span&gt;&lt;/div&gt;   &lt;span class=\"base\"&gt;(&lt;span class=\"base-value\"&gt;15%&lt;/span&gt;)&lt;/span&gt; &lt;/div&gt;&lt;/td&gt;   &lt;td class=\"conversion-visual\" style=\"display: inline-block;\"&gt;&lt;svg font-size=\"10px\" font-family=\"sans-serif\" fill=\"none\" stroke=\"none\" stroke-width=\"1.5\" width=\"220\" height=\"15\" data-ol-has-click-handler=\"\"&gt;&lt;g transform=\"translate(10,0)\"&gt;&lt;rect width=\"84.08874241310063\" height=\"15\" fill=\"rgb(184,184,184)\"&gt;&lt;/rect&gt;&lt;rect width=\"84.08874241310063\" height=\"15\" fill=\"rgb(180,38,71)\"&gt;&lt;/rect&gt;&lt;rect x=\"200\" width=\"1e-10\" height=\"15\" fill=\"rgb(38,180,60)\"&gt;&lt;/rect&gt;&lt;/g&gt;&lt;g transform=\"translate(10,0)\"&gt;&lt;line shape-rendering=\"crispEdges\" x1=\"-1\" y1=\"4\" x2=\"-1\" y2=\"11\" stroke=\"rgb(68,68,68)\" stroke-width=\"1\"&gt;&lt;/line&gt;&lt;line shape-rendering=\"crispEdges\" x1=\"200\" y1=\"4\" x2=\"200\" y2=\"11\" stroke=\"rgb(68,68,68)\" stroke-width=\"1\"&gt;&lt;/line&gt;&lt;/g&gt;&lt;g transform=\"translate(10,0)\"&gt;&lt;text pointer-events=\"none\" x=\"-3\" dy=\".35em\" transform=\"translate(-1,7.5)\" fill=\"rgb(68,68,68)\" text-anchor=\"end\" style=\"font: 12px Arial;\"&gt;-&lt;/text&gt;&lt;text pointer-events=\"none\" x=\"3\" dy=\".35em\" transform=\"translate(200,7.5)\" fill=\"rgb(68,68,68)\" style=\"font: 12px Arial;\"&gt;+&lt;/text&gt;&lt;/g&gt;&lt;g transform=\"translate(10,0)\"&gt;&lt;line shape-rendering=\"crispEdges\" x1=\"0\" y1=\"7.5\" x2=\"200\" y2=\"7.5\" stroke=\"rgb(68,68,68)\" stroke-width=\"1\"&gt;&lt;/line&gt;&lt;/g&gt;&lt;/svg&gt;&lt;/td&gt;   &lt;td class=\"p-value\"&gt;0.0002&lt;/td&gt;   &lt;td class=\"improvement\"&gt; &lt;div class=\"interval\"&gt;   &lt;div class=\"error\"&gt;&lt;span class=\"lower-bound\"&gt;-6%&lt;/span&gt; \u2013 &lt;span class=\"upper-bound\"&gt;-1.9%&lt;/span&gt;&lt;/div&gt;   &lt;span class=\"base\"&gt;(&lt;span class=\"base-value\"&gt;-3.9%&lt;/span&gt;)&lt;/span&gt; &lt;/div&gt;&lt;/td&gt; &lt;/tr&gt;&lt;/tbody&gt; &lt;/table&gt;&lt;/div&gt;\n</code></pre>\n\n<p>Edit: According the the requests_html library documentation, this can render JavaScript.\n<a href=\"https://pypi.org/project/requests-html/\" rel=\"nofollow noreferrer\">https://pypi.org/project/requests-html/</a></p>\n"}, {"tags": ["python", "web-scraping", "beautifulsoup"], "comments": [{"owner": {"reputation": 416, "user_id": 2390269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d80641e2edac30d5c84e24e94bd1a22?s=128&d=identicon&r=PG", "display_name": "jayg_code", "link": "https://stackoverflow.com/users/2390269/jayg-code"}, "edited": false, "score": 0, "creation_date": 1573081949, "post_id": 58739329, "comment_id": 103769432, "body": "You&#39;ll need to provide some more context on it please. Are you using BeautifulSoup on this one? Also see <a href=\"https://stackoverflow.com/questions/2612548/extracting-an-attribute-value-with-beautifulsoup\" title=\"extracting an attribute value with beautifulsoup\">stackoverflow.com/questions/2612548/&hellip;</a> for a potential solution."}, {"owner": {"reputation": 371, "user_id": 12128167, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCN3MhG-whFgltUfEE4rQY3RbOTe4kdS6enVa0x1g=k-s128", "display_name": "Han", "link": "https://stackoverflow.com/users/12128167/han"}, "edited": false, "score": 0, "creation_date": 1573082028, "post_id": 58739329, "comment_id": 103769447, "body": "Please provide the html/link."}, {"owner": {"reputation": 13, "user_id": 12328235, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51811477ed54a26e786d28f7be0f123e?s=128&d=identicon&r=PG&f=1", "display_name": "Ferby", "link": "https://stackoverflow.com/users/12328235/ferby"}, "edited": false, "score": 0, "creation_date": 1573245258, "post_id": 58739329, "comment_id": 103832787, "body": "Here is the link: <a href=\"https://www.zapimoveis.com.br/aluguel/casas-de-condominio/agr+rj++barra-e-recreio/\" rel=\"nofollow noreferrer\">zapimoveis.com.br/aluguel/casas-de-condominio/&hellip;</a>  But this link changes the HTML aleatory!!"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 12328235, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51811477ed54a26e786d28f7be0f123e?s=128&d=identicon&r=PG&f=1", "display_name": "Ferby", "link": "https://stackoverflow.com/users/12328235/ferby"}, "edited": false, "score": 0, "creation_date": 1573248589, "post_id": 58739869, "comment_id": 103834006, "body": "thanks for helping! I tried but did not work out.. ! How can I spot the difference between Json and Html ?"}, {"owner": {"reputation": 4256, "user_id": 5386938, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-H3KU09vCXj4/AAAAAAAAAAI/AAAAAAAAAQI/P8vlqd0SX5s/photo.jpg?sz=128", "display_name": "Justin Ezequiel", "link": "https://stackoverflow.com/users/5386938/justin-ezequiel"}, "reply_to_user": {"reputation": 13, "user_id": 12328235, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51811477ed54a26e786d28f7be0f123e?s=128&d=identicon&r=PG&f=1", "display_name": "Ferby", "link": "https://stackoverflow.com/users/12328235/ferby"}, "edited": false, "score": 0, "creation_date": 1573343877, "post_id": 58739869, "comment_id": 103852513, "body": "Edited my answer to read the data from the URL given. Here&#39;s a <a href=\"https://repl.it/repls/OilyMealyArgument\" rel=\"nofollow noreferrer\">working demo</a>"}], "tags": [], "owner": {"reputation": 4256, "user_id": 5386938, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-H3KU09vCXj4/AAAAAAAAAAI/AAAAAAAAAQI/P8vlqd0SX5s/photo.jpg?sz=128", "display_name": "Justin Ezequiel", "link": "https://stackoverflow.com/users/5386938/justin-ezequiel"}, "is_accepted": false, "score": 1, "last_activity_date": 1573343814, "last_edit_date": 1573343814, "creation_date": 1573082909, "answer_id": 58739869, "question_id": 58739329, "link": "https://stackoverflow.com/questions/58739329/can%c2%b4t-reach-to-this-specific-css-html-tag-python-web-scraping/58739869#58739869", "title": "Can&#180;t reach to this specific CSS / HTML tag Python web scraping", "body": "<p>From your image, it looks like the data you want is in a JSON string in an attribute of the article tag. If so, then perhaps something like this can get you started.</p>\n\n<pre><code>from bs4 import BeautifulSoup\nimport json\nimport requests\n\nurl = 'https://www.zapimoveis.com.br/aluguel/casas-de-condominio/agr+rj++barra-e-recreio/'\n\nuser_agent = {'User-agent': 'Mozilla/5.0'}\nresp = requests.get(url, headers=user_agent)\n\nsoup = BeautifulSoup(resp.text, features=\"html.parser\")\n\nprices = []\nfor i, a in enumerate(soup.find_all('article')):\n    b = a.get('data-clickstream')\n    if not b: continue\n    o = json.loads(b)\n    prices.append(sum(map(float, o['iptuPrices'])))\n\nprint(prices)\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 12328235, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51811477ed54a26e786d28f7be0f123e?s=128&d=identicon&r=PG&f=1", "display_name": "Ferby", "link": "https://stackoverflow.com/users/12328235/ferby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1573343814, "creation_date": 1573078835, "last_edit_date": 1573245094, "question_id": 58739329, "link": "https://stackoverflow.com/questions/58739329/can%c2%b4t-reach-to-this-specific-css-html-tag-python-web-scraping", "title": "Can&#180;t reach to this specific CSS / HTML tag Python web scraping", "body": "<p>Editing:</p>\n\n<p>So, I am doing a webscraping using beautiful soup. </p>\n\n<p>I\u00b4ve tried a lot of things but can\u00b4t reach this part of the code:</p>\n\n<p><img src=\"https://i.stack.imgur.com/8EheG.png\" alt=\"enter image description here\"></p>\n\n<p>I tried this (and other derivations) but it returns an empty list:</p>\n\n<pre><code>iptu = [iptu.get_text() for iptu in soup.find_all(\"article\", {\"data-clickstream\":\"iptuPrices\"})]\n</code></pre>\n\n<p>How can I send the HTML as its very big to copy and paste?!</p>\n"}, {"tags": ["java", "python", "ssh"], "comments": [{"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1573079313, "post_id": 58739322, "comment_id": 103768661, "body": "Which line throws the exception?"}, {"owner": {"reputation": 755, "user_id": 4910495, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/7YdVS.jpg?s=128&g=1", "display_name": "Shane Smiskol", "link": "https://stackoverflow.com/users/4910495/shane-smiskol"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1573079436, "post_id": 58739322, "comment_id": 103768698, "body": "@user207421 Right, the closing connection code is in a separate method in the same class as the above code, so that it can access the global class variables os, session and connection. The first block is in a method called getSession() and the second closeConnection(), so the second can be called whenever the connection must be closed. The error occurs whenever session.close() is called, or connection.close() is called but not os.close()"}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1573081195, "post_id": 58739322, "comment_id": 103769218, "body": "Well I suggest that <code>os.close()</code> closes the session."}, {"owner": {"reputation": 755, "user_id": 4910495, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/7YdVS.jpg?s=128&g=1", "display_name": "Shane Smiskol", "link": "https://stackoverflow.com/users/4910495/shane-smiskol"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1573081658, "post_id": 58739322, "comment_id": 103769357, "body": "I need it to terminate the connection to the server, however it will remain open if I just run <code>os.close()</code>. The final command executes perfectly with or without closing the OutputStream, however it leaves the connection open. Closing the connection throws the error and the last command is not executed, but it does close the connection successfully. It&#39;s almost like it&#39;s running before my <code>close_socket</code> line. Is writing to the OutputStream done in the background?"}, {"owner": {"reputation": 755, "user_id": 4910495, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/7YdVS.jpg?s=128&g=1", "display_name": "Shane Smiskol", "link": "https://stackoverflow.com/users/4910495/shane-smiskol"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1573088308, "post_id": 58739322, "comment_id": 103770868, "body": "Ahh, I get it now. The OutputStream just writes the commands into the interactive shell without waiting, and the remote server takes these commands in order, immediately executing each one in succession. However without checking the output on the app&#39;s side, it cannot know when it is finished. I totally assumed it waited until each command is written with <code>os.write</code>, however now I am checking whether a response code is returned from the server and wait for that! Works perfectly now."}], "answers": [{"comments": [{"owner": {"reputation": 755, "user_id": 4910495, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/7YdVS.jpg?s=128&g=1", "display_name": "Shane Smiskol", "link": "https://stackoverflow.com/users/4910495/shane-smiskol"}, "edited": false, "score": 0, "creation_date": 1573780123, "post_id": 58739849, "comment_id": 104006793, "body": "Following up on this: The actual issue is that I wasn&#39;t waiting for the last command to run before I closed the SSH connection. I set it up so the Python server replied by printing a string of text and waited until the Android app received that specific output, then I closed the connection. Works perfectly now!"}], "tags": [], "owner": {"reputation": 755, "user_id": 4910495, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/7YdVS.jpg?s=128&g=1", "display_name": "Shane Smiskol", "link": "https://stackoverflow.com/users/4910495/shane-smiskol"}, "is_accepted": true, "score": 0, "last_activity_date": 1573082748, "creation_date": 1573082748, "answer_id": 58739849, "question_id": 58739322, "link": "https://stackoverflow.com/questions/58739322/socket-closed-error-when-i-close-ganymed-session-and-connection-after-issuing-co/58739849#58739849", "title": "Socket closed error when I close Ganymed Session and Connection after issuing command", "body": "<p>I think I figured out a solution to this specific problem: For whatever reason, if I remove the line to exit the shell, and keep just the line that closes the connection, the final command is still executed and the connection successfully closes as well. The error I got before still occurs when I have <code>connection.close()</code>, but everything seems to be working as expected.</p>\n\n<p>I removed:</p>\n\n<pre><code>os.write(\"exit\\n\".getBytes());\n</code></pre>\n\n<p>And I kept:</p>\n\n<pre><code>connection.close();\n</code></pre>\n"}], "owner": {"reputation": 755, "user_id": 4910495, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/7YdVS.jpg?s=128&g=1", "display_name": "Shane Smiskol", "link": "https://stackoverflow.com/users/4910495/shane-smiskol"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 58739849, "answer_count": 1, "score": -1, "last_activity_date": 1573082748, "creation_date": 1573078797, "last_edit_date": 1573079232, "question_id": 58739322, "link": "https://stackoverflow.com/questions/58739322/socket-closed-error-when-i-close-ganymed-session-and-connection-after-issuing-co", "title": "Socket closed error when I close Ganymed Session and Connection after issuing command", "body": "<p>I have an Android app built with Java where I send SSH commands to a Python package on-demand to a server whenever an action warrants it. To explain the context, I open a Ganymed connection to a server, then open a session and from that session start an interactive shell so that I can import my custom Python class and call a function from it feeding in data whenever an update occurs on the app. I can't issue individual commands as it would take to long too open a Python instance, import, open a ZMQ socket on the server, etc, every time.</p>\n\n<p>Here's the code to open the shell:</p>\n\n<pre><code>session = connection.openSession();\nsession.requestDumbPTY();\nsession.startShell();\nos = session.getStdin();\nos.write(\"python\\n\".getBytes());\nos.write(\"from package.data_receiver import DataReceiver\\n\".getBytes());\nos.write(\"DR=DataReceiver()\\n\".getBytes());\nos.write(\"DR.open_socket()\\n\".getBytes()); //opens the zmq socket on server\n</code></pre>\n\n<p><code>os</code> being an <code>OutputStream</code> global variable in the Java class that my other method can call <code>write()</code> on to run commands on the Python class <code>DR</code>.</p>\n\n<p>However the issue arrises when I want to close the connection/session/outputstream.</p>\n\n<pre><code>os.write(\"DR.close_socket()\\n\".getBytes()); //closes the zmq socket on server\nos.write(\"exit()\\n\".getBytes()); //exits python\nos.write(\"exit\\n\".getBytes()); //exits the shell\n\nos.close();\nsession.close();\nconnection.close();\n</code></pre>\n\n<p>When this code is run, I get <code>W/TransportManager: Receive thread: error in receiveLoop: Socket closed</code> and the last line: <code>DR.close_socket()</code> does not get ran. I'm not totally sure if I even need to close any or all of these, as I can close the OutputStream and the last command will still execute on the remote server. Any tips would be appreciated. Thanks!</p>\n\n<p>Edit: Yeah, just checked and if I don't call <code>connection.close()</code>, then the previous connections still remain active to the server, but if I call even just that, I get that error and the last command doesn't run.</p>\n"}, {"tags": ["python", "python-3.x", "numpy", "conditional-statements"], "comments": [{"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 4, "creation_date": 1573079714, "post_id": 58739312, "comment_id": 103768808, "body": "No, that logical an is the correct way.  Note the use of () to control operator prescedence. You can&#39;t do that with the <code>a&lt;b&lt;c</code> syntax.  Embrace the difference, don&#39;t fight it."}, {"owner": {"reputation": 17643, "user_id": 5087436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZyXHE.jpg?s=128&g=1", "display_name": "alkasm", "link": "https://stackoverflow.com/users/5087436/alkasm"}, "edited": false, "score": 0, "creation_date": 1573084858, "post_id": 58739312, "comment_id": 103770118, "body": "Python comparator chaining requires that the comparator strictly return a boolean---with numpy, this behavior is overridden so that a comparator returns a numpy array instead, so comparator chaining will not work. Relevant python docs here: <a href=\"https://docs.python.org/3/reference/expressions.html#comparisons\" rel=\"nofollow noreferrer\">docs.python.org/3/reference/expressions.html#comparisons</a>"}, {"owner": {"reputation": 17643, "user_id": 5087436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZyXHE.jpg?s=128&g=1", "display_name": "alkasm", "link": "https://stackoverflow.com/users/5087436/alkasm"}, "edited": false, "score": 0, "creation_date": 1573085051, "post_id": 58739312, "comment_id": 103770176, "body": "Does this answer your question? <a href=\"https://stackoverflow.com/questions/10062954/valueerror-the-truth-value-of-an-array-with-more-than-one-element-is-ambiguous\">ValueError: The truth value of an array with more than one element is ambiguous. Use a.any() or a.all()</a> --- in particular <a href=\"https://stackoverflow.com/a/44345755/5087436\">this answer</a> gives a nice explanation."}, {"owner": {"reputation": 4746, "user_id": 8474894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3480af9d214a7d6f6a8cb9ef821b1f24?s=128&d=identicon&r=PG&f=1", "display_name": "CypherX", "link": "https://stackoverflow.com/users/8474894/cypherx"}, "reply_to_user": {"reputation": 17643, "user_id": 5087436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZyXHE.jpg?s=128&g=1", "display_name": "alkasm", "link": "https://stackoverflow.com/users/5087436/alkasm"}, "edited": false, "score": 0, "creation_date": 1573088352, "post_id": 58739312, "comment_id": 103770879, "body": "@alkasm The link you shared was helpful to look at and understand the content shared in the question there. However, it does not let me produce the output I showed above. I understand that this probably is not how <code>numpy</code> is designed to work. And so will keep using <code>np.logical_and</code> or <code>&amp;</code>. This did not stop me from my work. However, I thought it&#39;s an interesting thought and may be someone could shed some light on it."}, {"owner": {"reputation": 4746, "user_id": 8474894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3480af9d214a7d6f6a8cb9ef821b1f24?s=128&d=identicon&r=PG&f=1", "display_name": "CypherX", "link": "https://stackoverflow.com/users/8474894/cypherx"}, "reply_to_user": {"reputation": 17643, "user_id": 5087436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZyXHE.jpg?s=128&g=1", "display_name": "alkasm", "link": "https://stackoverflow.com/users/5087436/alkasm"}, "edited": false, "score": 0, "creation_date": 1573089576, "post_id": 58739312, "comment_id": 103771105, "body": "@alkasm Thank you for sharing the links. The <a href=\"https://stackoverflow.com/a/44345755/5087436\">answer</a> somewhat sheds some light in this area. But it only makes me wonder: <i>could this (<code>2 &lt; a &lt; 5</code>) be a possible feature in <code>numpy</code> in future?</i>"}, {"owner": {"reputation": 4746, "user_id": 8474894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3480af9d214a7d6f6a8cb9ef821b1f24?s=128&d=identicon&r=PG&f=1", "display_name": "CypherX", "link": "https://stackoverflow.com/users/8474894/cypherx"}, "reply_to_user": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1573089695, "post_id": 58739312, "comment_id": 103771127, "body": "@hpaulj Thank you for your comment. Yes, it makes sense to not fight it and adapt to the design of <code>numpy</code> to do what we need to. However, what do you think about the possibility of this being a <i>feature in <code>numpy</code></i>?"}, {"owner": {"reputation": 635, "user_id": 8876606, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1394bb6594806df68253926a197dbb36?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Eding", "link": "https://stackoverflow.com/users/8876606/matt-eding"}, "edited": false, "score": 0, "creation_date": 1573107694, "post_id": 58739312, "comment_id": 103775056, "body": "There is no specialized vectorized shortcut in NumPy. You need to create two boolean masks and find their intersection: <code>(2 &lt; a) &amp; (a &lt; 5)</code>"}, {"owner": {"reputation": 4746, "user_id": 8474894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3480af9d214a7d6f6a8cb9ef821b1f24?s=128&d=identicon&r=PG&f=1", "display_name": "CypherX", "link": "https://stackoverflow.com/users/8474894/cypherx"}, "reply_to_user": {"reputation": 635, "user_id": 8876606, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1394bb6594806df68253926a197dbb36?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Eding", "link": "https://stackoverflow.com/users/8876606/matt-eding"}, "edited": false, "score": 0, "creation_date": 1573109378, "post_id": 58739312, "comment_id": 103775673, "body": "@MattEding Thank you. I know; I have already mentioned it in the question."}], "answers": [{"comments": [{"owner": {"reputation": 4746, "user_id": 8474894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3480af9d214a7d6f6a8cb9ef821b1f24?s=128&d=identicon&r=PG&f=1", "display_name": "CypherX", "link": "https://stackoverflow.com/users/8474894/cypherx"}, "edited": false, "score": 0, "creation_date": 1573090330, "post_id": 58740657, "comment_id": 103771280, "body": "Thank you for your answer. It shows one way of approaching the problem. And so I would upvote it. However, I was looking for a single line vectorized numpy equivalent of <code>2 &lt; a &lt; 5</code>."}, {"owner": {"reputation": 635, "user_id": 8876606, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1394bb6594806df68253926a197dbb36?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Eding", "link": "https://stackoverflow.com/users/8876606/matt-eding"}, "edited": false, "score": 2, "creation_date": 1573107921, "post_id": 58740657, "comment_id": 103775131, "body": "The <code>fromiter</code> is much, much slower than using <code>&amp;</code>. I really advise <b>not</b> doing the above approach."}], "tags": [], "owner": {"reputation": 1020, "user_id": 12119282, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BvAPB.jpg?s=128&g=1", "display_name": "Samuel Muldoon", "link": "https://stackoverflow.com/users/12119282/samuel-muldoon"}, "is_accepted": false, "score": 2, "last_activity_date": 1573089770, "creation_date": 1573089770, "answer_id": 58740657, "question_id": 58739312, "link": "https://stackoverflow.com/questions/58739312/what-is-the-numpy-equivalent-of-2-a-5-where-a-is-a-numpy-array/58740657#58740657", "title": "What is the numpy equivalent of &quot;2 &lt; a &lt; 5&quot; where &quot;a&quot; is a numpy array?", "body": "<p>What about this?</p>\n\n<pre><code>import numpy as np\na = np.arange(10)\n\nbools = map(lambda x: 2 &lt; x &lt; 5, a)\nbools = np.fromiter(bools, bool)\n\nsuba = a[bools]\n</code></pre>\n"}], "owner": {"reputation": 4746, "user_id": 8474894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3480af9d214a7d6f6a8cb9ef821b1f24?s=128&d=identicon&r=PG&f=1", "display_name": "CypherX", "link": "https://stackoverflow.com/users/8474894/cypherx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1573089770, "creation_date": 1573078707, "last_edit_date": 1592644375, "question_id": 58739312, "link": "https://stackoverflow.com/questions/58739312/what-is-the-numpy-equivalent-of-2-a-5-where-a-is-a-numpy-array", "title": "What is the numpy equivalent of &quot;2 &lt; a &lt; 5&quot; where &quot;a&quot; is a numpy array?", "body": "<blockquote>\n<p><strong>This is question is not a duplicate</strong> of <a href=\"https://stackoverflow.com/questions/10062954\">another question</a>. The other question asks about a single boolean output (<code>True/False</code>) when a conditional statement is applied on a numpy array. That's why it is important to use <code>np.any()</code> or <code>np.all()</code> to determine the output unambiguously.</p>\n<p>My question here talks about creating an element-wise array-output of boolean <code>True/False</code> values, when we evaluate if an array <code>a</code> is between <code>2</code> and <code>5</code> using an expression <code>2 &lt; a &lt; 5</code>. This question delves into the viability of such a convenience expression while using <code>numpy</code> arrays.</p>\n</blockquote>\n<p>Python allows the following for a scalar.</p>\n<pre class=\"lang-py prettyprint-override\"><code>a = 7\nprint(2 &lt; a &lt; 5) # False\na = 4\nprint(2 &lt; a &lt; 5) # True\n</code></pre>\n<p>However, if I try the same with a numpy array it does not work.</p>\n<pre class=\"lang-py prettyprint-override\"><code>import numpy as np\n\na = np.arange(10)\n2 &lt; a &lt; 5\n</code></pre>\n<p>This gives an <strong>error</strong>. But, any of the following two methods works (as expected):</p>\n<pre class=\"lang-py prettyprint-override\"><code>np.logical_and(2 &lt; a, a &lt; 5) # method-1\n\n(2 &lt; a) &amp; (a &lt; 5) # method-2\n</code></pre>\n<p><strong>Output</strong>:</p>\n<pre><code>array([False, False, False,  True,  True, False, False, False, False,\n       False])\n</code></pre>\n<p>So, my question is: is there any numpy equivalent such that you could just write <code>2 &lt; a &lt; 5</code> and get the above output?</p>\n"}, {"tags": ["python", "helper", "equation"], "comments": [{"owner": {"reputation": 2237, "user_id": 8347081, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-C2gg5Z3zU2w/AAAAAAAAAAI/AAAAAAAABXE/M2GK2Eixhms/photo.jpg?sz=128", "display_name": "mypetlion", "link": "https://stackoverflow.com/users/8347081/mypetlion"}, "edited": false, "score": 0, "creation_date": 1573079037, "post_id": 58739297, "comment_id": 103768581, "body": "What error message do you get?"}, {"owner": {"reputation": 1, "user_id": 12334674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5524b954b87eea5c7771e84a5f2cb86e?s=128&d=identicon&r=PG&f=1", "display_name": "mhe", "link": "https://stackoverflow.com/users/12334674/mhe"}, "reply_to_user": {"reputation": 2237, "user_id": 8347081, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-C2gg5Z3zU2w/AAAAAAAAAAI/AAAAAAAABXE/M2GK2Eixhms/photo.jpg?sz=128", "display_name": "mypetlion", "link": "https://stackoverflow.com/users/8347081/mypetlion"}, "edited": false, "score": 0, "creation_date": 1573079182, "post_id": 58739297, "comment_id": 103768622, "body": "Application closes"}, {"owner": {"reputation": 2237, "user_id": 8347081, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-C2gg5Z3zU2w/AAAAAAAAAAI/AAAAAAAABXE/M2GK2Eixhms/photo.jpg?sz=128", "display_name": "mypetlion", "link": "https://stackoverflow.com/users/8347081/mypetlion"}, "edited": false, "score": 0, "creation_date": 1573079939, "post_id": 58739297, "comment_id": 103768885, "body": "There&#39;s no output at all? No error message? None of your calls to <code>print</code> run? Nothing happens at all?"}, {"owner": {"reputation": 728, "user_id": 11647025, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8f78049f82e583722b25c6a8edd7417?s=128&d=identicon&r=PG&f=1", "display_name": "crissal", "link": "https://stackoverflow.com/users/11647025/crissal"}, "edited": false, "score": 0, "creation_date": 1573099938, "post_id": 58739297, "comment_id": 103773177, "body": "If you put 0 as num1 aka x aka a, you will get a RuntimeError because you divide by zero"}], "answers": [{"tags": [], "owner": {"reputation": 1437, "user_id": 3633891, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/stGNM.png?s=128&g=1", "display_name": "Bill Chen", "link": "https://stackoverflow.com/users/3633891/bill-chen"}, "is_accepted": false, "score": 0, "last_activity_date": 1573100145, "creation_date": 1573100145, "answer_id": 58741918, "question_id": 58739297, "link": "https://stackoverflow.com/questions/58739297/crash-python-when-i-use-0-in-my-codes-as-num1-for-equation/58741918#58741918", "title": "Crash python when i use (0) in my codes as num1 for equation", "body": "<p>Of course, you have a division by zero error: num1 -> x</p>\n\n<pre><code>def two_sol(x,y) :\n    x_f= (-y + v)/(4*x)\n    x_s =(-y - v)/(4*x)\n</code></pre>\n\n<p>and </p>\n\n<pre><code>def one_sol(x):\n    x_f = (-y + v) / (4 * x)\n</code></pre>\n\n<p>You need to check whether x is zero. If x is zero, there should be only one solution.</p>\n\n<p>Hope it helps.</p>\n"}, {"tags": [], "owner": {"reputation": 452, "user_id": 11435171, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/G4WhL.jpg?s=128&g=1", "display_name": "Nj Nafir", "link": "https://stackoverflow.com/users/11435171/nj-nafir"}, "is_accepted": false, "score": 0, "last_activity_date": 1573105182, "creation_date": 1573105182, "answer_id": 58742579, "question_id": 58739297, "link": "https://stackoverflow.com/questions/58739297/crash-python-when-i-use-0-in-my-codes-as-num1-for-equation/58742579#58742579", "title": "Crash python when i use (0) in my codes as num1 for equation", "body": "<p>This is happening because we can't divide any number by 0, so what you wan't to do?\nif you want, when x input is take 0 it replaced by 1 that means number is divided by 1, the code will be,</p>\n\n<pre><code>def two_sol(x,y) :\n    if int(x) == 0: x = 1 \n    x_f= (-y + v)/(4*x)\n    x_s =(-y - v)/(4*x)\n\n    return x_f , x_s\n\ndef one_sol(x):\n     if int(x) == 0: x = 1 \n     x_f = (-y + v) / (4 * x)\n</code></pre>\n\n<p>else if you want, when x input is take 0 it return and don't calculate any more! the code will be,</p>\n\n<pre><code>    def two_sol(x,y) :\n    if int(x) == 0: return \n    x_f= (-y + v)/(4*x)\n    x_s =(-y - v)/(4*x)\n\n    return x_f , x_s\n\ndef one_sol(x):\n     if int(x) == 0: return \n     x_f = (-y + v) / (4 * x)\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 12334674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5524b954b87eea5c7771e84a5f2cb86e?s=128&d=identicon&r=PG&f=1", "display_name": "mhe", "link": "https://stackoverflow.com/users/12334674/mhe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1573105182, "creation_date": 1573078609, "last_edit_date": 1573099725, "question_id": 58739297, "link": "https://stackoverflow.com/questions/58739297/crash-python-when-i-use-0-in-my-codes-as-num1-for-equation", "title": "Crash python when i use (0) in my codes as num1 for equation", "body": "<pre><code>import cmath\nimport math\n\n\nprint(\" we are going to programming second grade equation in python\")\nprint(\" a^2 x + b x + c =0\")\n\nnum1 = int(input(\" enter A please : \"))\nnum2 = int(input(\" enter B please : \"))\nnum3 = int(input(\" enter c please : \"))\n\nv = num2*num2 - 4 *num1 * num3\n\nif v &lt; 0:\n    print(\"wrong values\")\n\nelse:\n    print(\"root of delta =\", v)\n    k= math.sqrt(v)\n\ndef two_sol(x,y) :\n    x_f= (-y + v)/(4*x)\n    x_s =(-y - v)/(4*x)\n\n    return x_f , x_s\n\ndef one_sol(x):\n    x_f = (-y + v) / (4 * x)\n\nif v &gt;0 :\n    print(\"we have two solution :\" ,two_sol(num1,num2)) \n\nelif v == 0:\n   print( \"we have one solution :\" , one_sol(y))\n\nelse:\n    print(\" there is no solution !!\")\n</code></pre>\n"}, {"tags": ["python", "r", "time-series", "forecasting"], "comments": [{"owner": {"reputation": 75, "user_id": 7417473, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EL9mC.jpg?s=128&g=1", "display_name": "aaron ward", "link": "https://stackoverflow.com/users/7417473/aaron-ward"}, "edited": false, "score": 0, "creation_date": 1586858418, "post_id": 58739296, "comment_id": 108275931, "body": "Hey, i know it&#39;s some time since the post was made but did you find any implementation of this in the end?"}, {"owner": {"reputation": 4641, "user_id": 3446051, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/eb1zv.jpg?s=128&g=1", "display_name": "Code Pope", "link": "https://stackoverflow.com/users/3446051/code-pope"}, "reply_to_user": {"reputation": 75, "user_id": 7417473, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EL9mC.jpg?s=128&g=1", "display_name": "aaron ward", "link": "https://stackoverflow.com/users/7417473/aaron-ward"}, "edited": false, "score": 1, "creation_date": 1586859257, "post_id": 58739296, "comment_id": 108276314, "body": "@aaronward no, unfortunately, there isn&#39;t still any implementation for that."}, {"owner": {"reputation": 75, "user_id": 7417473, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EL9mC.jpg?s=128&g=1", "display_name": "aaron ward", "link": "https://stackoverflow.com/users/7417473/aaron-ward"}, "edited": false, "score": 0, "creation_date": 1586865188, "post_id": 58739296, "comment_id": 108279319, "body": "Only thing i could find was <a href=\"https://github.com/MinhDg00/theta\" rel=\"nofollow noreferrer\">this</a> .. it doesn&#39;t work very well but it could be something to take inspiration from if you want to make your own implementation"}], "answers": [{"comments": [{"owner": {"reputation": 598, "user_id": 9334962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f980b3c26cda22704f9396a7c6cf553b?s=128&d=identicon&r=PG&f=1", "display_name": "mloning", "link": "https://stackoverflow.com/users/9334962/mloning"}, "edited": false, "score": 3, "creation_date": 1601656803, "post_id": 63610017, "comment_id": 113483379, "body": "It&#39;s now also in statsmodels"}, {"owner": {"reputation": 364, "user_id": 1842332, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/1fej8.png?s=128&g=1", "display_name": "J&#233;r&#233;my", "link": "https://stackoverflow.com/users/1842332/j%c3%a9r%c3%a9my"}, "edited": false, "score": 0, "creation_date": 1602585976, "post_id": 63610017, "comment_id": 113761122, "body": "You will need <code>statsmodels &gt;= 12.0.0</code>. <a href=\"https://www.statsmodels.org/devel/examples/notebooks/generated/theta-model.html\" rel=\"nofollow noreferrer\">Example implementation</a> and <a href=\"https://www.statsmodels.org/devel/generated/statsmodels.tsa.forecasting.theta.ThetaModel.html\" rel=\"nofollow noreferrer\">Documentation</a>."}], "tags": [], "owner": {"reputation": 46, "user_id": 13858529, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a91d41854f9f7d2d1470e4ab7c2f8bb6?s=128&d=identicon&r=PG&f=1", "display_name": "Izzet Tunc", "link": "https://stackoverflow.com/users/13858529/izzet-tunc"}, "is_accepted": true, "score": 3, "last_activity_date": 1598508023, "creation_date": 1598508023, "answer_id": 63610017, "question_id": 58739296, "link": "https://stackoverflow.com/questions/58739296/python-implementation-of-theta-model-theta-method/63610017#63610017", "title": "Python implementation of theta model (theta method)", "body": "<p>I don't know if you still need it but I found theta forecasting in these two packages:</p>\n<ul>\n<li><a href=\"https://sktime.org/modules/auto_generated/sktime.forecasting.theta.ThetaForecaster.html#sktime.forecasting.theta.ThetaForecaster\" rel=\"nofollow noreferrer\">sktime</a></li>\n<li><a href=\"https://unit8co.github.io/darts/generated_api/darts.models.theta.html\" rel=\"nofollow noreferrer\">darts</a></li>\n</ul>\n"}], "owner": {"reputation": 4641, "user_id": 3446051, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/eb1zv.jpg?s=128&g=1", "display_name": "Code Pope", "link": "https://stackoverflow.com/users/3446051/code-pope"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1141, "favorite_count": 0, "accepted_answer_id": 63610017, "answer_count": 1, "score": 5, "last_activity_date": 1598508023, "creation_date": 1573078606, "question_id": 58739296, "link": "https://stackoverflow.com/questions/58739296/python-implementation-of-theta-model-theta-method", "title": "Python implementation of theta model (theta method)", "body": "<p>The theta model from this <a href=\"https://www.sciencedirect.com/science/article/pii/S0169207000000662\" rel=\"noreferrer\">paper</a> which achieved excellent results in the M3 compition is implemented in R: <code>thetaf</code> (<a href=\"https://github.com/robjhyndman/forecast/blob/master/R/theta.R\" rel=\"noreferrer\">source</a>).<br>\nI was looking for an implementation in python. Is there any implementation of it in python i.e. in sklearn or any other library?</p>\n"}, {"tags": ["python", "pandas", "dataframe"], "comments": [{"owner": {"reputation": 26154, "user_id": 11884237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7d7q4.png?s=128&g=1", "display_name": "ansev", "link": "https://stackoverflow.com/users/11884237/ansev"}, "edited": false, "score": 0, "creation_date": 1573080374, "post_id": 58739258, "comment_id": 103768991, "body": "<code>y1 = now3.loc[(now3[&quot;size&quot;] == 11111) &amp; (now3[&quot;type&quot;] == &#39;ASK&#39;),&#39;size&#39;]</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 12313333, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Po3mRoLt7HY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcyf6lIoD3hBsuEdM1ZLdHcq_LoAg/photo.jpg?sz=128", "display_name": "Monica W", "link": "https://stackoverflow.com/users/12313333/monica-w"}, "edited": false, "score": 0, "creation_date": 1573083443, "post_id": 58739607, "comment_id": 103769801, "body": "I get it to work, but how can I set it up so I can graph those points?"}, {"owner": {"reputation": 25, "user_id": 12313333, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Po3mRoLt7HY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcyf6lIoD3hBsuEdM1ZLdHcq_LoAg/photo.jpg?sz=128", "display_name": "Monica W", "link": "https://stackoverflow.com/users/12313333/monica-w"}, "edited": false, "score": 0, "creation_date": 1573083967, "post_id": 58739607, "comment_id": 103769927, "body": "Because the code I had above:x1 = now3.loc[now3[&quot;size&quot;] == 24022, &quot;date&quot;]; y1 = now3.loc[now3[&quot;size&quot;] == 24022, &quot;size&quot;], allowed me to graph the size 24022 on the graph."}], "tags": [], "owner": {"reputation": 777, "user_id": 6656130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/X42hX.jpg?s=128&g=1", "display_name": "Max Kaha", "link": "https://stackoverflow.com/users/6656130/max-kaha"}, "is_accepted": true, "score": 0, "last_activity_date": 1573080777, "creation_date": 1573080777, "answer_id": 58739607, "question_id": 58739258, "link": "https://stackoverflow.com/questions/58739258/how-to-get-specific-data-points-in-python-pandas/58739607#58739607", "title": "How to get specific data points in python, pandas", "body": "<p>You can filter your dataframe, for example I have created a sample .csv that has similar data to what you have so with columns type and size we are looking for.</p>\n\n<pre><code>df = pandas.read_csv(r\"&lt;PATH&gt;\") # Load full dataset\n</code></pre>\n\n<p>Then we can filter it by type and size as such:</p>\n\n<pre><code>filtered_df = df[(df['type'] == \"BID\") &amp; (df['size'] == 24022)]\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 12313333, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Po3mRoLt7HY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcyf6lIoD3hBsuEdM1ZLdHcq_LoAg/photo.jpg?sz=128", "display_name": "Monica W", "link": "https://stackoverflow.com/users/12313333/monica-w"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 401, "favorite_count": 0, "accepted_answer_id": 58739607, "answer_count": 1, "score": 0, "last_activity_date": 1573080777, "creation_date": 1573078357, "last_edit_date": 1573080250, "question_id": 58739258, "link": "https://stackoverflow.com/questions/58739258/how-to-get-specific-data-points-in-python-pandas", "title": "How to get specific data points in python, pandas", "body": "<p>I currently was able to get data to capture size at 24022 (which is x1), but I want to separate the data further into 'bid' or 'ask.' So I want to get the data for when its size is 24022, and ask. Another one for when size is 24022 and bid. T</p>\n\n<pre><code>headers = ['ticker', 'size', 'price', 'unix','type','date']\ndtypes = {'ticker': 'str', 'size': 'float', 'price': 'float', 'unix': 'float','type': 'str','date': 'str'}\nparse_dates = ['date']\nbtcnow = pd.read_csv('new 113-115.csv', header=None, names=headers, dtype=dtypes, parse_dates=parse_dates)\n#btc105=pd.read_excel('11-3-11-5 data.xlsx',sheet_name=\"Sheet1\",header=None)\n#btc103=btc103.append(btc105,ignore_index = True)\nnow3 = pd.DataFrame(btcnow, columns=['size','date','type','price'])\nnow4 = pd.DataFrame(btcnow, columns=['date','price','size'])\nx1 = now3.loc[now3[\"size\"] == 24022, \"date\"]\ny1 = now3.loc[now3[\"size\"] == 24022, \"size\"]\n</code></pre>\n\n<p>I tried the following code, but it's saying can't compare the two data types:</p>\n\n<pre><code>y1 = now3.loc[now3[\"size\"] == 11111 &amp; now3[\"type\"] == 'ASK','size']\n</code></pre>\n\n<p>The data looks like the following:\n<a href=\"https://i.stack.imgur.com/7z3SO.jpg\" rel=\"nofollow noreferrer\">data here</a></p>\n"}, {"tags": ["python", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 1195, "user_id": 8229534, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/410518d04b48d521af11885f01c9ab13?s=128&d=identicon&r=PG", "display_name": "Regressor", "link": "https://stackoverflow.com/users/8229534/regressor"}, "edited": false, "score": 0, "creation_date": 1573078787, "post_id": 58739306, "comment_id": 103768506, "body": "When i use this, the column names appear in 2 rows. Then when i change ur code to <code>sample_df.groupby(&#39;visitor_id&#39;).agg(page_paths=(&#39;pagename&#39;,l&zwnj;&#8203;ambda x: &#39;,&#39;.join(x)),max_order_status=(&#39;order_status&#39;,&#39;max&#39;)).reset_&zwnj;&#8203;index()</code> it works with all the column names in 1 row"}, {"owner": {"reputation": 26154, "user_id": 11884237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7d7q4.png?s=128&g=1", "display_name": "ansev", "link": "https://stackoverflow.com/users/11884237/ansev"}, "reply_to_user": {"reputation": 1195, "user_id": 8229534, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/410518d04b48d521af11885f01c9ab13?s=128&d=identicon&r=PG", "display_name": "Regressor", "link": "https://stackoverflow.com/users/8229534/regressor"}, "edited": false, "score": 0, "creation_date": 1573078969, "post_id": 58739306, "comment_id": 103768558, "body": "Is this your expected departure. Can you show what you get with my code? :)"}, {"owner": {"reputation": 1195, "user_id": 8229534, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/410518d04b48d521af11885f01c9ab13?s=128&d=identicon&r=PG", "display_name": "Regressor", "link": "https://stackoverflow.com/users/8229534/regressor"}, "edited": false, "score": 0, "creation_date": 1573079115, "post_id": 58739306, "comment_id": 103768601, "body": "never mind, i did not see that ur code has <code>reset_index()</code>. Thanks for the answer, it works like a charm. What does reset_index() do ?"}, {"owner": {"reputation": 26154, "user_id": 11884237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7d7q4.png?s=128&g=1", "display_name": "ansev", "link": "https://stackoverflow.com/users/11884237/ansev"}, "reply_to_user": {"reputation": 1195, "user_id": 8229534, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/410518d04b48d521af11885f01c9ab13?s=128&d=identicon&r=PG", "display_name": "Regressor", "link": "https://stackoverflow.com/users/8229534/regressor"}, "edited": false, "score": 1, "creation_date": 1573079243, "post_id": 58739306, "comment_id": 103768639, "body": "I added <code>reset_index</code> later. <code>reset_index</code> resets the index. The current index becomes a column And the new index is 0,1,2 ... You can see it here: <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.reset_index.html\" rel=\"nofollow noreferrer\">pandas.pydata.org/pandas-docs/stable/reference/api/&hellip;</a>"}], "tags": [], "owner": {"reputation": 26154, "user_id": 11884237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7d7q4.png?s=128&g=1", "display_name": "ansev", "link": "https://stackoverflow.com/users/11884237/ansev"}, "is_accepted": true, "score": 1, "last_activity_date": 1573078918, "last_edit_date": 1573078918, "creation_date": 1573078677, "answer_id": 58739306, "question_id": 58739253, "link": "https://stackoverflow.com/questions/58739253/group-by-and-use-apply-and-max-operations-on-pandas-dataframe/58739306#58739306", "title": "Group by and use APPLY and MAX operations on Pandas Dataframe", "body": "<p>Use:</p>\n\n<pre><code>new_df=( sample_df.groupby('visitor_id',sort=False)\n                  .agg(page_paths=('pagename',lambda x: ','.join(x)),\n                       max_order_status=('order_status','max')) \n                  .reset_index() )\nprint(new_df)\n</code></pre>\n\n<hr>\n\n<p><strong>Output</strong></p>\n\n<pre><code>  visitor_id page_paths max_order_status\n0        MM1   S1,S1,S3           accept\n1        MM2   S3,S4,S4           reject\n2        MM4   S2,S2,S2           reject\n</code></pre>\n"}], "owner": {"reputation": 1195, "user_id": 8229534, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/410518d04b48d521af11885f01c9ab13?s=128&d=identicon&r=PG", "display_name": "Regressor", "link": "https://stackoverflow.com/users/8229534/regressor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 20, "favorite_count": 0, "closed_date": 1573079166, "accepted_answer_id": 58739306, "answer_count": 1, "score": 0, "last_activity_date": 1573078918, "creation_date": 1573078341, "question_id": 58739253, "link": "https://stackoverflow.com/questions/58739253/group-by-and-use-apply-and-max-operations-on-pandas-dataframe", "closed_reason": "Duplicate", "title": "Group by and use APPLY and MAX operations on Pandas Dataframe", "body": "<p>I have sample pandas dataframe as </p>\n\n<pre><code>sample_df = pd.DataFrame({\n'visitor_id' : ['MM1', 'MM1', 'MM1', 'MM2', 'MM2', 'MM2', 'MM4', 'MM4','MM4'],\n'pagename' : ['S1', 'S1', 'S3', 'S3', 'S4', 'S4', 'S2', 'S2', 'S2'],\n'order_status' : ['accept', 'accept', 'accept', 'reject', 'reject', 'reject', 'reject', 'reject', 'reject'],\n})\n\nvisitor_id  pagename    order_status\nMM1       S1    accept\nMM1       S1    accept\nMM1       S3    accept\nMM2       S3    reject\nMM2       S4    reject\nMM2       S4    reject\nMM4       S2    reject\nMM4       S2    reject\nMM4       S2    reject\n</code></pre>\n\n<p>I am trying to aggregate journeys based on pagenames for each visitor_id. I have this code to  build the journeys - </p>\n\n<pre><code>sample_journeys = sample_df.groupby(['visitor_id']) \\\n.apply(lambda x: ','.join(x.pagename)) \\\n.reset_index() \nsample_journeys.columns = ['visitor_id', 'page_paths']\n</code></pre>\n\n<p>It gives the output as </p>\n\n<pre><code>    visitor_id  page_paths\n0   MM1       S1,S1,S3\n1   MM2       S3,S4,S4\n2   MM4       S2,S2,S2\n</code></pre>\n\n<p>I also want to take a <code>max</code> of <code>order_status</code> column for every visitor_id in my aggregation operation. So the output should have 3 columns - </p>\n\n<pre><code>visitor_id  page_paths  max_order_status\nMM1       S1,S1,S3      accept\nMM2       S3,S4,S4      reject\nMM4       S2,S2,S2      reject\n</code></pre>\n\n<p>How do I perform both the aggregations in 1 go in Pandas ?</p>\n\n<p>I tried something like </p>\n\n<pre><code>sample_journeys = sample_df.groupby(['visitor_id']) \\\n.apply(lambda x: ','.join(x.pagename)) \\\n.agg({'order_status': ['max']}) \\ \n.reset_index() \n</code></pre>\n\n<p>but it fails with some error - <code>unexpected character after line continuation character</code></p>\n\n<p>I also want to rename my final dataframe with column names as <code>[visitor_id, page_paths, max_order_status]</code> after aggregation, which I find it difficult.</p>\n"}, {"tags": ["python", "tcp", "network-programming"], "comments": [{"owner": {"reputation": 26796, "user_id": 4834, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/6a04e124482c3750617f8dacde3388ce?s=128&d=identicon&r=PG", "display_name": "quamrana", "link": "https://stackoverflow.com/users/4834/quamrana"}, "edited": false, "score": 0, "creation_date": 1573078440, "post_id": 58739206, "comment_id": 103768373, "body": "Do you close the client socket too early? Perhaps the server should send a response and the client wait for it."}, {"owner": {"reputation": 1, "user_id": 10497015, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-erUGzZaD2lU/AAAAAAAAAAI/AAAAAAAAABI/63n7UToQ9u4/photo.jpg?sz=128", "display_name": "Apoorv Joshi", "link": "https://stackoverflow.com/users/10497015/apoorv-joshi"}, "reply_to_user": {"reputation": 26796, "user_id": 4834, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/6a04e124482c3750617f8dacde3388ce?s=128&d=identicon&r=PG", "display_name": "quamrana", "link": "https://stackoverflow.com/users/4834/quamrana"}, "edited": false, "score": 0, "creation_date": 1573078656, "post_id": 58739206, "comment_id": 103768463, "body": "I doubt that&#39;s the case. The Client side isn&#39;t printing anything after clientSocket.connect((&quot;131.100.39.41&quot;, serverPort)). Everything before it works"}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1573078966, "post_id": 58739206, "comment_id": 103768557, "body": "&#39;Connection refused&#39; means the server wasn&#39;t running when you started your client. You forgot to close the accepted socket in the server."}, {"owner": {"reputation": 1, "user_id": 10497015, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-erUGzZaD2lU/AAAAAAAAAAI/AAAAAAAAABI/63n7UToQ9u4/photo.jpg?sz=128", "display_name": "Apoorv Joshi", "link": "https://stackoverflow.com/users/10497015/apoorv-joshi"}, "edited": false, "score": 0, "creation_date": 1573079504, "post_id": 58739206, "comment_id": 103768725, "body": "This is the real code copied and pasted from IDLE. Everything on the Client side runs until: clientSocket.connect((&quot;131.100.39.41&quot;, serverPort)). i don&#39;t get any errors when I run the Server and Client."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1573081414, "post_id": 58739206, "comment_id": 103769274, "body": "But you need to run them <i>in that order</i>, and you also need to be sure that the client is connecting to the server&#39;s IP address. NB &#39;Client does nothing&#39; is not the same thing as &#39;client got connection refused&#39;."}], "answers": [{"comments": [{"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1573079025, "post_id": 58739331, "comment_id": 103768575, "body": "&#39;Connection refused&#39; means nothing was listening at that IP:port. It does not mean the port wasn&#39;t open, and &#39;2 channels opened for the port&#39; is meaningless."}, {"owner": {"reputation": 1, "user_id": 10497015, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-erUGzZaD2lU/AAAAAAAAAAI/AAAAAAAAABI/63n7UToQ9u4/photo.jpg?sz=128", "display_name": "Apoorv Joshi", "link": "https://stackoverflow.com/users/10497015/apoorv-joshi"}, "edited": false, "score": 0, "creation_date": 1573080099, "post_id": 58739331, "comment_id": 103768922, "body": "Thanks @roshan ok. I changed my socket to 127.0.0.1 and it&#39;s working now. What difference did that make though?"}, {"owner": {"reputation": 343, "user_id": 12299183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1a75dde01aa7cbec63a69f05d366de3?s=128&d=identicon&r=PG&f=1", "display_name": "roshan ok", "link": "https://stackoverflow.com/users/12299183/roshan-ok"}, "edited": false, "score": 0, "creation_date": 1573080233, "post_id": 58739331, "comment_id": 103768958, "body": "Please refer : <a href=\"https://stackoverflow.com/questions/7382602/what-is-the-difference-between-127-0-0-1-and-localhost\" title=\"what is the difference between 127 0 0 1 and localhost\">stackoverflow.com/questions/7382602/&hellip;</a>"}, {"owner": {"reputation": 343, "user_id": 12299183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1a75dde01aa7cbec63a69f05d366de3?s=128&d=identicon&r=PG&f=1", "display_name": "roshan ok", "link": "https://stackoverflow.com/users/12299183/roshan-ok"}, "edited": false, "score": 0, "creation_date": 1573080303, "post_id": 58739331, "comment_id": 103768977, "body": "But , there was no issue in your code. I believe it was only the sequence of your execution.[ Server first and then client ]."}, {"owner": {"reputation": 343, "user_id": 12299183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1a75dde01aa7cbec63a69f05d366de3?s=128&d=identicon&r=PG&f=1", "display_name": "roshan ok", "link": "https://stackoverflow.com/users/12299183/roshan-ok"}, "edited": false, "score": 0, "creation_date": 1573080378, "post_id": 58739331, "comment_id": 103768993, "body": "from your comment , it looked like you had ConnectionRefusedError . In my experience i had recieved this when there was 2 channels listening under same port. This normally appears when you use REUSE ADRESS and previous connection is not closed properly"}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1573081491, "post_id": 58739331, "comment_id": 103769301, "body": "&#39;2 channels listening under same port&#39; is still meaningless."}, {"owner": {"reputation": 343, "user_id": 12299183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1a75dde01aa7cbec63a69f05d366de3?s=128&d=identicon&r=PG&f=1", "display_name": "roshan ok", "link": "https://stackoverflow.com/users/12299183/roshan-ok"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1573082723, "post_id": 58739331, "comment_id": 103769642, "body": "@user207421 i appreciate your feedback. have attached a screenshot in the answer. Please let me know if that helps . same port 8081 , listening in different channels"}, {"owner": {"reputation": 343, "user_id": 12299183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1a75dde01aa7cbec63a69f05d366de3?s=128&d=identicon&r=PG&f=1", "display_name": "roshan ok", "link": "https://stackoverflow.com/users/12299183/roshan-ok"}, "reply_to_user": {"reputation": 1, "user_id": 10497015, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-erUGzZaD2lU/AAAAAAAAAAI/AAAAAAAAABI/63n7UToQ9u4/photo.jpg?sz=128", "display_name": "Apoorv Joshi", "link": "https://stackoverflow.com/users/10497015/apoorv-joshi"}, "edited": false, "score": 0, "creation_date": 1573094084, "post_id": 58739331, "comment_id": 103772057, "body": "@ApoorvJoshi  please close the ticket if your query has been answered"}], "tags": [], "owner": {"reputation": 343, "user_id": 12299183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1a75dde01aa7cbec63a69f05d366de3?s=128&d=identicon&r=PG&f=1", "display_name": "roshan ok", "link": "https://stackoverflow.com/users/12299183/roshan-ok"}, "is_accepted": false, "score": -1, "last_activity_date": 1573164295, "last_edit_date": 1573164295, "creation_date": 1573078839, "answer_id": 58739331, "question_id": 58739206, "link": "https://stackoverflow.com/questions/58739206/i-am-testing-to-see-if-the-tcp-client-and-server-are-communicating-but-upon-runn/58739331#58739331", "title": "I am testing to see if the TCP Client and Server are communicating but upon running, the client side does nothing", "body": "<p>This code looks good. It is working.</p>\n\n<p>You get connectionRefused error in client , because the PORT is not opened , or there is 2 channels opened for the port. The port is opened for listening only when the server is started.</p>\n\n<p>check with 'netstat -anp | findstr \":9001\"\nIf there is port already opened , then choose another port or kill the port.</p>\n\n<p>Remember:</p>\n\n<ol>\n<li>Change your socket back to localhost or 127.0.0.1</li>\n<li>First Start the server and then start the client</li>\n</ol>\n\n<p>below is output i recieved , when i ran your code</p>\n\n<p>Server </p>\n\n<pre><code>    Server is up and running.\n    received from client b'test'\n</code></pre>\n\n<p>client:</p>\n\n<pre><code>Enter the voter name: test\nName sent to server. test\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10497015, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-erUGzZaD2lU/AAAAAAAAAAI/AAAAAAAAABI/63n7UToQ9u4/photo.jpg?sz=128", "display_name": "Apoorv Joshi", "link": "https://stackoverflow.com/users/10497015/apoorv-joshi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1573164295, "creation_date": 1573078048, "question_id": 58739206, "link": "https://stackoverflow.com/questions/58739206/i-am-testing-to-see-if-the-tcp-client-and-server-are-communicating-but-upon-runn", "title": "I am testing to see if the TCP Client and Server are communicating but upon running, the client side does nothing", "body": "<p>I have an assignment where I have to write TCP client server python programs to implement a basic voting application. There are only two candidates: JohnD and JaneD. I was testing the communication between the client and server. So when I run the client side, nothing happens. Could someone tell me why. </p>\n\n<p>At first I was using \"localhost\" for serverName but I kept getting this error: clientSocket.connect((\"localhost\", serverPort))\nConnectionRefusedError: [WinError 10061] No connection could be made because the target machine actively refused it</p>\n\n<p>So I set the serverName to my local IP. The client runs but nothing happens.</p>\n\n<pre><code>#TCP CLIENT#\n\nfrom socket import*\n\n#serverName = \"localhost\"\n\nserverName = \"131.100.39.41\"\n\nserverPort = 9001\n\nclientSocket = socket(AF_INET, SOCK_STREAM)\n\nclientSocket.connect((\"131.100.39.41\", serverPort))\n\noption = input(\"Enter the voter name: \")\n\nclientSocket.send(bytes(option, \"utf-8\"))\n\nprint(\"Name sent to server.\", option)\n\nclientSocket.close()\n\n</code></pre>\n\n<p>This is the server side.</p>\n\n<pre><code>#TCP SERVER#\n\nfrom socket import*\n\nserverPort = 9001\n\nserverSocket = socket(AF_INET, SOCK_STREAM)\n\nserverSocket.bind((\"\", serverPort))\n\nserverSocket.listen(1)\n\nprint(\"Server is up and running.\")\n\nwhile(1):\n\n    connectionSocket, addr = serverSocket.accept()\n\n    option = connectionSocket.recv(1024)\n\n    print(\"received from client\", option)\n\n\nserverSocket.close()\n\n</code></pre>\n"}, {"tags": ["python", "image", "opencv", "image-processing", "filtering"], "comments": [{"owner": {"reputation": 2929, "user_id": 3566606, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/B36KF.jpg?s=128&g=1", "display_name": "jonathan.scholbach", "link": "https://stackoverflow.com/users/3566606/jonathan-scholbach"}, "edited": false, "score": 0, "creation_date": 1573078131, "post_id": 58739151, "comment_id": 103768268, "body": "Easy. The text reads: <code>Birthplace LONDON, UNITED KINGDOM</code> and <code>Residence MILL BAY, BRITISH COLUMBIA</code> :D"}, {"owner": {"reputation": 23, "user_id": 10860270, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3Y9iyoWOL4E/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcZ5fooLkQZPPgznMW8SKV3FykwDqw/mo/photo.jpg?sz=128", "display_name": "wulalala", "link": "https://stackoverflow.com/users/10860270/wulalala"}, "reply_to_user": {"reputation": 2929, "user_id": 3566606, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/B36KF.jpg?s=128&g=1", "display_name": "jonathan.scholbach", "link": "https://stackoverflow.com/users/3566606/jonathan-scholbach"}, "edited": false, "score": 0, "creation_date": 1573080243, "post_id": 58739151, "comment_id": 103768963, "body": "@jonathan.scholbach Yes, I converted it to a binary image using threshold methods, the result is not good. The background noise turns black."}, {"owner": {"reputation": 27168, "user_id": 7355741, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6CMNt.jpg?s=128&g=1", "display_name": "fmw42", "link": "https://stackoverflow.com/users/7355741/fmw42"}, "edited": false, "score": 0, "creation_date": 1573080480, "post_id": 58739151, "comment_id": 103769032, "body": "Please always show your code. What threshold method did you use. There are several. Perhaps you also need to use some morphology and/or noise filtering."}], "answers": [{"tags": [], "owner": {"reputation": 25800, "user_id": 11162165, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t5kgh.png?s=128&g=1", "display_name": "nathancy", "link": "https://stackoverflow.com/users/11162165/nathancy"}, "is_accepted": true, "score": 2, "last_activity_date": 1573093803, "creation_date": 1573093803, "answer_id": 58741134, "question_id": 58739151, "link": "https://stackoverflow.com/questions/58739151/how-to-separate-foreground-text-from-noisy-background-in-python/58741134#58741134", "title": "How to separate foreground text from noisy background in Python?", "body": "<p>You could try a combination of Gaussian blurring, thresholding, and morphological operations to isolate the text. Here's a pipeline</p>\n\n<p>Blur <code>-&gt;</code> Threshold <code>-&gt;</code> Opening <code>-&gt;</code> Dilation <code>-&gt;</code> Bitwise-and</p>\n\n<p><a href=\"https://i.stack.imgur.com/Ylmv6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Ylmv6.png\" alt=\"enter image description here\"></a>\n<a href=\"https://i.stack.imgur.com/LeBh4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LeBh4.png\" alt=\"enter image description here\"></a>\n<a href=\"https://i.stack.imgur.com/lZXxU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lZXxU.png\" alt=\"enter image description here\"></a>\n<a href=\"https://i.stack.imgur.com/lx6mF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lx6mF.png\" alt=\"enter image description here\"></a>\n<a href=\"https://i.stack.imgur.com/0wFsM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0wFsM.png\" alt=\"enter image description here\"></a></p>\n\n<pre><code>import cv2\n\nimage = cv2.imread('1.png')\ngray = cv2.cvtColor(image, cv2.COLOR_BGR2GRAY)\nblur = cv2.GaussianBlur(gray, (7,7), 0)\nthresh = cv2.threshold(blur, 0, 255, cv2.THRESH_BINARY_INV + cv2.THRESH_OTSU)[1]\nkernel = cv2.getStructuringElement(cv2.MORPH_RECT, (5,2))\nopening = cv2.morphologyEx(thresh, cv2.MORPH_OPEN, kernel, iterations=3)\n\n# Repair text\nkernel = cv2.getStructuringElement(cv2.MORPH_RECT, (7,7))\ndilate = cv2.dilate(opening, kernel, iterations=2)\n\n# Bitwise-and with input image\nresult = cv2.bitwise_and(image,image,mask=dilate)\nresult[dilate==0] = (255,255,255)\n\ncv2.imshow('thresh', thresh)\ncv2.imshow('opening', opening)\ncv2.imshow('dilate', dilate)\ncv2.imshow('result', result)\ncv2.waitKey()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 684, "user_id": 3089908, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/38aa15c5195dc2554686659a5adcb8c8?s=128&d=identicon&r=PG&f=1", "display_name": "Roy2511", "link": "https://stackoverflow.com/users/3089908/roy2511"}, "is_accepted": false, "score": 0, "last_activity_date": 1573113715, "last_edit_date": 1573113715, "creation_date": 1573112894, "answer_id": 58744134, "question_id": 58739151, "link": "https://stackoverflow.com/questions/58739151/how-to-separate-foreground-text-from-noisy-background-in-python/58744134#58744134", "title": "How to separate foreground text from noisy background in Python?", "body": "<p>If a more general solution is required, read on. Otherwise, you can refer to nathancy's answer, or plenty of other answers in this site.</p>\n\n<hr>\n\n<p>I assume that </p>\n\n<blockquote>\n  <p>extract the text from this image</p>\n</blockquote>\n\n<p>means you want the text from this image as a string or the ROI of the text.</p>\n\n<p>This is something called OCR (Optical Character Recognition) and is a pretty complicated deep learning problem specifically for the type of image you posted (noisy, low sharpness, low dynamic range etc.). If you are looking for a vanilla OpenCV library that can do this out of the box then, as far as I know, there isn't any. </p>\n\n<p>Check these links for source code and explanation - </p>\n\n<ol>\n<li><a href=\"https://www.pyimagesearch.com/2018/09/17/opencv-ocr-and-text-recognition-with-tesseract/\" rel=\"nofollow noreferrer\">OCR with pytesseract</a></li>\n<li><a href=\"https://www.pyimagesearch.com/2018/08/20/opencv-text-detection-east-text-detector/\" rel=\"nofollow noreferrer\">Text ROI detection using EAST</a></li>\n</ol>\n"}], "owner": {"reputation": 23, "user_id": 10860270, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3Y9iyoWOL4E/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcZ5fooLkQZPPgznMW8SKV3FykwDqw/mo/photo.jpg?sz=128", "display_name": "wulalala", "link": "https://stackoverflow.com/users/10860270/wulalala"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 455, "favorite_count": 0, "accepted_answer_id": 58741134, "answer_count": 2, "score": 2, "last_activity_date": 1573113715, "creation_date": 1573077728, "last_edit_date": 1573093849, "question_id": 58739151, "link": "https://stackoverflow.com/questions/58739151/how-to-separate-foreground-text-from-noisy-background-in-python", "title": "How to separate foreground text from noisy background in Python?", "body": "<p>I am trying to extract the text from this image</p>\n\n<p><img src=\"https://i.stack.imgur.com/HNE31.png\" alt=\"this image\">.</p>\n\n<p>I tried adjusting contrast and brightness, smoothing (e.g. GaussianBlur, medianblur) and threshold techniques(e.g. Otsu) with OpenCV, there is still lots of remaining noise.</p>\n\n<p>Is there anything else I can try?</p>\n"}, {"tags": ["python", "data-visualization", "data-analysis", "weighted-average"], "comments": [{"owner": {"reputation": 6232, "user_id": 509977, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/DxOt0.jpg?s=128&g=1", "display_name": "Pitto", "link": "https://stackoverflow.com/users/509977/pitto"}, "edited": false, "score": 0, "creation_date": 1573077680, "post_id": 58739099, "comment_id": 103768124, "body": "Does this answer your question? <a href=\"https://stackoverflow.com/questions/29330792/python-weighted-averaging-a-list\">Python - Weighted averaging a list</a>"}], "answers": [{"tags": [], "owner": {"reputation": 36473, "user_id": 12046409, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZRRhI.jpg?s=128&g=1", "display_name": "JohanC", "link": "https://stackoverflow.com/users/12046409/johanc"}, "is_accepted": true, "score": -1, "last_activity_date": 1573082595, "last_edit_date": 1573082595, "creation_date": 1573079086, "answer_id": 58739373, "question_id": 58739099, "link": "https://stackoverflow.com/questions/58739099/weighted-average-from-an-array-in-python/58739373#58739373", "title": "weighted average from an array in python", "body": "<p>This code should do the trick:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>avg = [(sum(y) + sum(y[1:-1]) + sum(y[2:-2])) // 15 \n       for y in zip(data[:-6], data[1:-5], data[2:-4], data[3:-3], data[4:-2], data[5:-1], data[6:])] \n</code></pre>\n\n<p>Here <code>zip(data[:-6], data[1:-5], ...)</code> creates the successive 7-tuples. </p>\n\n<p>And <code>sum(y)</code> takes the 7 numbers each once. <code>sum(y[1:-1])</code> takes the 5 inner numbers once again. <code>sum(y[2:-2])</code> takes the 3 inner numbers a third time.</p>\n\n<p>By the way, adding 7 before dividing by 15 would be closer to averaging. In the original formulation the average always gets rounded downwards.</p>\n\n<p>So, I would suggest <code>(sum(y) + sum(y[1:-1]) + sum(y[2:-2]) + 7) // 15</code></p>\n\n<p>Here is a test based on your code and random-walk data.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from matplotlib import pyplot as plt\nimport random\n\ndef do_averaging_7(data):\n    return [(sum(y) + sum(y[1:-1]) + sum(y[2:-2]) + 7) // 15\n            for y in zip(data[:-6], data[1:-5], data[2:-4], data[3:-3], data[4:-2], data[5:-1], data[6:])]\n\ndata = [random.randrange(-100,101) for _ in range(100)]\nfor i in range(1,len(data)):\n    data[i] += data[i-1]\navg = do_averaging_7(data)\n\nfig, ax = plt.subplots()\nax.plot(range(len(data)), data, \"blue\")\nax.plot(range(3, 3+len(avg)), avg, color=\"red\")\nax.set_ylabel('Raw')\nplt.tight_layout()\nplt.show()\n</code></pre>\n\n<p>Resulting plot: <a href=\"https://i.stack.imgur.com/Tf6du.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Tf6du.png\" alt=\"resulting plot\"></a></p>\n"}], "owner": {"reputation": 11, "user_id": 12334528, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAPbJFMa442oDfOkz4ihgZ8tI45L9oB7mnFvi9hMA=k-s128", "display_name": "Colton Stoddard", "link": "https://stackoverflow.com/users/12334528/colton-stoddard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 58739373, "answer_count": 1, "score": 0, "last_activity_date": 1573082595, "creation_date": 1573077464, "last_edit_date": 1573078559, "question_id": 58739099, "link": "https://stackoverflow.com/questions/58739099/weighted-average-from-an-array-in-python", "title": "weighted average from an array in python", "body": "<p>I need to form a new sequence of numbers by replacing every data value, starting with the 4th entry and ending with the 4th from the last entry, with a weighted average of the seven points around it, using the following formula:</p>\n\n<pre><code>(y[i-3] + 2y[i-2] + 3y[i-1] + 3y[i] + 3y[i+1] + 2y[i+2] + y[i+3]) // 15 \n</code></pre>\n\n<p>(NOTE. The i- or i+ some number is a subscript in case that wasn't apparent.)</p>\n\n<p>Here is the code I have which produces a raw graph, but I need to smooth a new graph with the above formula. The data file produces an array of integers set up as <code>[-24, 4, -4, -12, -52...]</code>. I am not even sure where to begin with the formula any help would be appreciated. </p>\n\n<pre><code>from matplotlib import pyplot as plt\n\nwith open('2_Record2308.dat', 'r') as f:\n\n    data = [int(x) for x in f]\n\ngraph = data\n\nfig, ax = plt.subplots()\n\nax.plot(graph)\n\nax.legend()\n\nax.set_ylabel('Raw')\n\nplt.tight_layout()\n\nplt.show()\n</code></pre>\n"}, {"tags": ["python", "matplotlib"], "answers": [{"comments": [{"owner": {"reputation": 747, "user_id": 1850007, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4700ed4e1a96fb7c67922d47dd5a0c04?s=128&d=identicon&r=PG", "display_name": "Lost1", "link": "https://stackoverflow.com/users/1850007/lost1"}, "edited": false, "score": 0, "creation_date": 1573077731, "post_id": 58739093, "comment_id": 103768138, "body": "can you elaborate a bit more. i don&#39;t quite follow this. What does ax[i] do?"}, {"owner": {"reputation": 747, "user_id": 1850007, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4700ed4e1a96fb7c67922d47dd5a0c04?s=128&d=identicon&r=PG", "display_name": "Lost1", "link": "https://stackoverflow.com/users/1850007/lost1"}, "edited": false, "score": 0, "creation_date": 1573077828, "post_id": 58739093, "comment_id": 103768166, "body": "note the function generate_data() is just a dummy function for illustrative purposes only. In practice, i want to plot each of the subplots in a for loop."}], "tags": [], "owner": {"reputation": 2389, "user_id": 7348030, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-7PmbNFJwfPc/AAAAAAAAAAI/AAAAAAAAAJE/5lDuTFQtNpQ/photo.jpg?sz=128", "display_name": "Florian Bernard", "link": "https://stackoverflow.com/users/7348030/florian-bernard"}, "is_accepted": false, "score": 0, "last_activity_date": 1573079917, "last_edit_date": 1573079917, "creation_date": 1573077434, "answer_id": 58739093, "question_id": 58738992, "link": "https://stackoverflow.com/questions/58738992/save-multiple-figures-with-subplots-into-a-pdf-with-multiple-pages/58739093#58739093", "title": "save multiple figures with subplots into a pdf with multiple pages", "body": "<p>Like this.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>fig, ax = plt.subplots(2, 2) \nfor i in range(5):\n    ax[i].plot(generate_data())\nfig.savefig(\"C:\\\\test.pdf\")\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 747, "user_id": 1850007, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4700ed4e1a96fb7c67922d47dd5a0c04?s=128&d=identicon&r=PG", "display_name": "Lost1", "link": "https://stackoverflow.com/users/1850007/lost1"}, "edited": false, "score": 0, "creation_date": 1573078175, "post_id": 58739211, "comment_id": 103768289, "body": "those last 3 lines are exactly what i needed. thanks a lot. I have another question. namely, when there there are too many figures open, pycharm complains about memory usage. Is there a way of getting around this? Can we note save the figure once create it and somehow clears it from the cache?"}, {"owner": {"reputation": 354, "user_id": 4382701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c19faf55f4f8b5de641d798839034fb2?s=128&d=identicon&r=PG&f=1", "display_name": "presenter", "link": "https://stackoverflow.com/users/4382701/presenter"}, "reply_to_user": {"reputation": 747, "user_id": 1850007, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4700ed4e1a96fb7c67922d47dd5a0c04?s=128&d=identicon&r=PG", "display_name": "Lost1", "link": "https://stackoverflow.com/users/1850007/lost1"}, "edited": false, "score": 0, "creation_date": 1573078840, "post_id": 58739211, "comment_id": 103768527, "body": "I added a second version. Let me know if this works."}, {"owner": {"reputation": 747, "user_id": 1850007, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4700ed4e1a96fb7c67922d47dd5a0c04?s=128&d=identicon&r=PG", "display_name": "Lost1", "link": "https://stackoverflow.com/users/1850007/lost1"}, "edited": false, "score": 1, "creation_date": 1573079467, "post_id": 58739211, "comment_id": 103768714, "body": "nice, nice... i think i finally got the hang of this."}, {"owner": {"reputation": 747, "user_id": 1850007, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4700ed4e1a96fb7c67922d47dd5a0c04?s=128&d=identicon&r=PG", "display_name": "Lost1", "link": "https://stackoverflow.com/users/1850007/lost1"}, "edited": false, "score": 0, "creation_date": 1573138451, "post_id": 58739211, "comment_id": 103790809, "body": "<a href=\"https://stackoverflow.com/questions/58751355/matplotlib-writing-graphs-to-two-different-pdfs\" title=\"matplotlib writing graphs to two different pdfs\">stackoverflow.com/questions/58751355/&hellip;</a> I asked another question related to this. :)"}, {"owner": {"reputation": 354, "user_id": 4382701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c19faf55f4f8b5de641d798839034fb2?s=128&d=identicon&r=PG&f=1", "display_name": "presenter", "link": "https://stackoverflow.com/users/4382701/presenter"}, "reply_to_user": {"reputation": 747, "user_id": 1850007, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4700ed4e1a96fb7c67922d47dd5a0c04?s=128&d=identicon&r=PG", "display_name": "Lost1", "link": "https://stackoverflow.com/users/1850007/lost1"}, "edited": false, "score": 0, "creation_date": 1573141538, "post_id": 58739211, "comment_id": 103792620, "body": "The link is dead now. Is your question somewhere else?"}, {"owner": {"reputation": 747, "user_id": 1850007, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4700ed4e1a96fb7c67922d47dd5a0c04?s=128&d=identicon&r=PG", "display_name": "Lost1", "link": "https://stackoverflow.com/users/1850007/lost1"}, "edited": false, "score": 0, "creation_date": 1573142751, "post_id": 58739211, "comment_id": 103793348, "body": "i solved it, it was not working because of something completely unrelated."}], "tags": [], "owner": {"reputation": 354, "user_id": 4382701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c19faf55f4f8b5de641d798839034fb2?s=128&d=identicon&r=PG&f=1", "display_name": "presenter", "link": "https://stackoverflow.com/users/4382701/presenter"}, "is_accepted": true, "score": 2, "last_activity_date": 1573079309, "last_edit_date": 1573079309, "creation_date": 1573078094, "answer_id": 58739211, "question_id": 58738992, "link": "https://stackoverflow.com/questions/58738992/save-multiple-figures-with-subplots-into-a-pdf-with-multiple-pages/58739211#58739211", "title": "save multiple figures with subplots into a pdf with multiple pages", "body": "<p>Combining your code and the link you gave, this saves one pdf (output.pdf) with 5 pages, and on each page there is one figure:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import matplotlib.backends.backend_pdf\npdf = matplotlib.backends.backend_pdf.PdfPages(\"output.pdf\")\nimport numpy as np\nimport matplotlib.pyplot as plt\n\ndef generate_data():\n    return np.random.randint(10, size=10)\n\nfigs = []\nn_figs = 5\n\nfor j in range(n_figs): # create all figures\n\n    plt.figure(j)\n    plt.suptitle(\"figure {}\" .format(j+1))\n    for i in range(4):\n        plt.subplot(2, 2, i + 1)\n        plt.plot(generate_data())\n\nfor fig in range(0, plt.gcf().number + 1): # loop over all figures\n    pdf.savefig( fig ) # save each figure in the pdf\npdf.close()\n</code></pre>\n\n<p><strong>EDIT:</strong> after the comment, here is version attempting to use less memory when lots of figures are produced. The idea is to save each figure once it is created, and then to close it.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>for j in range(n_figs): # create all figures\n\n    plt.figure(j)\n    plt.suptitle(\"figure {}\" .format(j+1))\n    for i in range(4):\n        plt.subplot(2, 2, i + 1)\n        plt.plot(generate_data())\n    pdf.savefig(j) # save on the fly\n    plt.close() # close figure once saved\n\npdf.close()\n\n</code></pre>\n\n<p><strong>EDIT2:</strong> here is a third version, I am unsure which of saves more memory. The idea now is, instead of creating and closing many figures, to create only one, save it, clear it, and reuse it. </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>plt.figure(1) # create figure outside loop\n\nfor j in range(n_figs): # create all figures\n\n    plt.suptitle(\"figure {}\" .format(j+1))\n    for i in range(4):\n        plt.subplot(2, 2, i + 1)\n        plt.plot(generate_data())\n    pdf.savefig(1) # save on the fly\n    plt.clf() # clear figure once saved\n\npdf.close()\n\n</code></pre>\n"}], "owner": {"reputation": 747, "user_id": 1850007, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4700ed4e1a96fb7c67922d47dd5a0c04?s=128&d=identicon&r=PG", "display_name": "Lost1", "link": "https://stackoverflow.com/users/1850007/lost1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 796, "favorite_count": 0, "accepted_answer_id": 58739211, "answer_count": 2, "score": 0, "last_activity_date": 1573079917, "creation_date": 1573076894, "question_id": 58738992, "link": "https://stackoverflow.com/questions/58738992/save-multiple-figures-with-subplots-into-a-pdf-with-multiple-pages", "title": "save multiple figures with subplots into a pdf with multiple pages", "body": "<p>I currently have some code like this:</p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\n\ndef generate_data():\n    return np.random.randint(10, size=10)\n\nplt.figure(1)\nfor i in range(4):\n    plt.subplot(2, 2, i + 1)\n    plt.plot(generate_data())\n\nplt.savefig(\"C:\\\\test.pdf\")\n</code></pre>\n\n<p>Suppose if want to generate 5 of these graph each with 4 pictures. How do I save them onto a pdf with the same page.</p>\n\n<p>I have read a few answers on here talking about how to save figures.  For example, this one </p>\n\n<p><a href=\"https://stackoverflow.com/questions/17788685/python-saving-multiple-figures-into-one-pdf-file\">Python saving multiple figures into one PDF file</a></p>\n\n<p>However, I don't understand how to create the figures needed.</p>\n"}, {"tags": ["python", "python-3.x", "module", "pip", "shapely"], "comments": [{"owner": {"reputation": 9376, "user_id": 11138259, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2faec9f4f30093c8b0f5d47a69e551f?s=128&d=identicon&r=PG&f=1", "display_name": "sinoroc", "link": "https://stackoverflow.com/users/11138259/sinoroc"}, "edited": false, "score": 0, "creation_date": 1573077368, "post_id": 58738974, "comment_id": 103768018, "body": "Have you thouroughly read the instructions on the <a href=\"https://pypi.org/project/Shapely/\" rel=\"nofollow noreferrer\"><i>Shapely</i> project page</a>? Which one of the installation scenario presented in these instructions are you trying to follow?"}, {"owner": {"reputation": 6107, "user_id": 7851470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d10f0dc1bc1f340708d6f6b4c8ec3866?s=128&d=identicon&r=PG&f=1", "display_name": "Georgy", "link": "https://stackoverflow.com/users/7851470/georgy"}, "edited": false, "score": 0, "creation_date": 1573116621, "post_id": 58738974, "comment_id": 103778952, "body": "Duplicate of <a href=\"https://stackoverflow.com/questions/44398265/install-shapely-oserror-winerror-126-the-specified-module-could-not-be-found\">Install Shapely: OSError: &#91;WinError 126&#93; The specified module could not be found</a>"}], "owner": {"reputation": 1, "user_id": 12334540, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCgwlkqECskFEBBdTJ1TgQsxfYWbISXO-IHQSThRC0=k-s128", "display_name": "adam nugroho", "link": "https://stackoverflow.com/users/12334540/adam-nugroho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 206, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1573083037, "creation_date": 1573076805, "last_edit_date": 1573083037, "question_id": 58738974, "link": "https://stackoverflow.com/questions/58738974/error-python-setup-py-egg-info-when-trying-to-install-shapely", "title": "error python setup.py egg_info when trying to install shapely", "body": "<p>This happens when I try to install Shapely from pip. </p>\n\n<pre><code>ERROR: Command errored out with exit status 1:\n     command: 'c:\\program files (x86)\\python37-32\\python.exe' -c 'import sys, setuptools, tokenize; sys.argv[0] = '\"'\"'C:\\\\Users\\\\adami\\\\AppData\\\\Local\\\\Temp\\\\pip-install-hws7cr7o\\\\Shapely\\\\setup.py'\"'\"'; __file__='\"'\"'C:\\\\Users\\\\adami\\\\AppData\\\\Local\\\\Temp\\\\pip-install-hws7cr7o\\\\Shapely\\\\setup.py'\"'\"';f=getattr(tokenize, '\"'\"'open'\"'\"', open)(__file__);code=f.read().replace('\"'\"'\\r\\n'\"'\"', '\"'\"'\\n'\"'\"');f.close();exec(compile(code, __file__, '\"'\"'exec'\"'\"'))' egg_info --egg-base 'C:\\Users\\adami\\AppData\\Local\\Temp\\pip-install-hws7cr7o\\Shapely\\pip-egg-info'\n         cwd: C:\\Users\\adami\\AppData\\Local\\Temp\\pip-install-hws7cr7o\\Shapely\\\n    Complete output (9 lines):\n    Traceback (most recent call last):\n      File \"&lt;string&gt;\", line 1, in &lt;module&gt;\n      File \"C:\\Users\\adami\\AppData\\Local\\Temp\\pip-install-hws7cr7o\\Shapely\\setup.py\", line 80, in &lt;module&gt;\n        from shapely._buildcfg import geos_version_string, geos_version, \\\n      File \"C:\\Users\\adami\\AppData\\Local\\Temp\\pip-install-hws7cr7o\\Shapely\\shapely\\_buildcfg.py\", line 200, in &lt;module&gt;\n        lgeos = CDLL(\"geos_c.dll\")\n      File \"c:\\program files (x86)\\python37-32\\lib\\ctypes\\__init__.py\", line 364, in __init__\n        self._handle = _dlopen(self._name, mode)\n    OSError: [WinError 126] The specified module could not be found\n    ----------------------------------------\nERROR: Command errored out with exit status 1: python setup.py egg_info Check the logs for full command output.\n\n</code></pre>\n"}, {"tags": ["python", "regex", "python-2.7"], "comments": [{"owner": {"reputation": 481672, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1573076949, "post_id": 58738970, "comment_id": 103767837, "body": "Maybe <code>re.search(r&#39;(?sm)\\A(.*?)\\n_+$&#39;, text).group(1)</code>? I would not use a regex if this regex &quot;works&quot;. You may just read all lines till a line containing only underscores."}, {"owner": {"reputation": 3, "user_id": 2788103, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b87001be76d773b1e20ffb0302b1b9ef?s=128&d=identicon&r=PG&f=1", "display_name": "user2788103", "link": "https://stackoverflow.com/users/2788103/user2788103"}, "reply_to_user": {"reputation": 481672, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1573077654, "post_id": 58738970, "comment_id": 103768112, "body": "Thank you for your answer. Due to the way this process is built out, I can&#39;t access the python group(1) without changing a lot of the guts of our program, which I&#39;m not keen on messing around with."}, {"owner": {"user_type": "does_not_exist", "display_name": "user12097764"}, "edited": false, "score": 0, "creation_date": 1573077694, "post_id": 58738970, "comment_id": 103768128, "body": "Its all about delimiters. If it&#39;s a double quote then <code>&quot;.*?&quot;</code> But it&#39;s not good to go with the number of LF&#39;s etc.. which is a very poor delimiter."}, {"owner": {"reputation": 3, "user_id": 2788103, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b87001be76d773b1e20ffb0302b1b9ef?s=128&d=identicon&r=PG&f=1", "display_name": "user2788103", "link": "https://stackoverflow.com/users/2788103/user2788103"}, "edited": false, "score": 0, "creation_date": 1573077820, "post_id": 58738970, "comment_id": 103768163, "body": "Thanks to your helpful hint, though, I was able to try this: <code>(?sm)\\A(.*?)\\n(?=_)</code> and it seems to be grabbing what I need."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6882757"}, "edited": false, "score": 0, "creation_date": 1573082522, "post_id": 58738970, "comment_id": 103769588, "body": "what is the role of _ here"}, {"owner": {"reputation": 3, "user_id": 2788103, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b87001be76d773b1e20ffb0302b1b9ef?s=128&d=identicon&r=PG&f=1", "display_name": "user2788103", "link": "https://stackoverflow.com/users/2788103/user2788103"}, "edited": false, "score": 0, "creation_date": 1573136370, "post_id": 58738970, "comment_id": 103789628, "body": "It is just a style separator for the signature line."}], "answers": [{"tags": [], "owner": {"reputation": 481672, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 0, "last_activity_date": 1573078150, "creation_date": 1573078150, "answer_id": 58739217, "question_id": 58738970, "link": "https://stackoverflow.com/questions/58738970/grabbing-a-body-of-text-using-regex-excluding-specific-conditions/58739217#58739217", "title": "Grabbing a body of text using regex excluding specific conditions", "body": "<p>You may use</p>\n\n<pre><code>(?s)\\A.*?(?=\\n_)\n</code></pre>\n\n<p>It matches</p>\n\n<ul>\n<li><code>(?s)</code> - <code>re.DOTALL</code> inline flag</li>\n<li><code>\\A</code> - start of string</li>\n<li><code>.*?</code> - any 0+ chars, as few as possible till the first occurrence of</li>\n<li><code>(?=\\n_)</code> - a newline followed with <code>_</code> char.</li>\n</ul>\n"}], "owner": {"reputation": 3, "user_id": 2788103, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b87001be76d773b1e20ffb0302b1b9ef?s=128&d=identicon&r=PG&f=1", "display_name": "user2788103", "link": "https://stackoverflow.com/users/2788103/user2788103"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 58739217, "answer_count": 1, "score": 0, "last_activity_date": 1573080762, "creation_date": 1573076778, "last_edit_date": 1573080762, "question_id": 58738970, "link": "https://stackoverflow.com/questions/58738970/grabbing-a-body-of-text-using-regex-excluding-specific-conditions", "title": "Grabbing a body of text using regex excluding specific conditions", "body": "<p>I'm using Python regex to grab the body of a parsed email which may contain nothing or may look something like this:</p>\n\n<blockquote>\n  <p>Some coherent sentence.</p>\n  \n  <p>lalskjfa;ljkd</p>\n  \n  <p>the other stuff</p>\n  \n  <hr>\n  \n  <p>A couple of lines of email signature blah blah</p>\n  \n  <p>blah blah blah</p>\n  \n  <hr>\n</blockquote>\n\n<p>I want everything in that body of the email EXCLUDING the signature line opener and its contents.</p>\n\n<p>I'm basically tearing out everything but that signature email in order to reformat it for reporting.</p>\n\n<p>I've tried:</p>\n\n<ul>\n<li><p>negative lookahead: <code>\\G(\\A\\z|.*\\n*(?!_))</code></p></li>\n<li><p>positive lookahead: <code>\\G(\\A\\z|.*\\n*(?=_))</code></p></li>\n</ul>\n\n<p>Neither seems to be doing the trick.</p>\n\n<p>With a negative lookahead, it seems to be grabbing everything. With a positive lookahead, it seems to be grabbing nothing.</p>\n\n<p>The output I'm hoping to achieve is this text:</p>\n\n<blockquote>\n  <p>Some coherent sentence.</p>\n  \n  <p>lalskjfa;ljkd</p>\n  \n  <p>the other stuff</p>\n</blockquote>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 1353, "user_id": 11914067, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kxxVU.png?s=128&g=1", "display_name": "Rithin Chalumuri", "link": "https://stackoverflow.com/users/11914067/rithin-chalumuri"}, "edited": false, "score": 0, "creation_date": 1573077063, "post_id": 58738957, "comment_id": 103767885, "body": "How do you tell when to multiply or divide the value in df1 with d2? i.e. how to differentiate between multiplying with AUD and dividing with CAD? just if it&#39;s less than 1 divide?"}, {"owner": {"reputation": 137, "user_id": 10893993, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d618005d19386dee2220f1fc2f581481?s=128&d=identicon&r=PG&f=1", "display_name": "Maddy6", "link": "https://stackoverflow.com/users/10893993/maddy6"}, "reply_to_user": {"reputation": 1353, "user_id": 11914067, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kxxVU.png?s=128&g=1", "display_name": "Rithin Chalumuri", "link": "https://stackoverflow.com/users/11914067/rithin-chalumuri"}, "edited": false, "score": 0, "creation_date": 1573077127, "post_id": 58738957, "comment_id": 103767914, "body": "No It could be any values not necessary less than 1."}, {"owner": {"reputation": 137, "user_id": 10893993, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d618005d19386dee2220f1fc2f581481?s=128&d=identicon&r=PG&f=1", "display_name": "Maddy6", "link": "https://stackoverflow.com/users/10893993/maddy6"}, "reply_to_user": {"reputation": 1353, "user_id": 11914067, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kxxVU.png?s=128&g=1", "display_name": "Rithin Chalumuri", "link": "https://stackoverflow.com/users/11914067/rithin-chalumuri"}, "edited": false, "score": 0, "creation_date": 1573077190, "post_id": 58738957, "comment_id": 103767941, "body": "If currency is AUD or BWP then Multiply by the currency value otherwise divide"}], "answers": [{"comments": [{"owner": {"reputation": 137, "user_id": 10893993, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d618005d19386dee2220f1fc2f581481?s=128&d=identicon&r=PG&f=1", "display_name": "Maddy6", "link": "https://stackoverflow.com/users/10893993/maddy6"}, "edited": false, "score": 0, "creation_date": 1573452857, "post_id": 58739059, "comment_id": 103873643, "body": "What if any currency is missing in df1 and I want to take the same &quot;Amount_Dollar&quot; in &quot;New_Amount_Dollar&quot;."}], "tags": [], "owner": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "is_accepted": true, "score": 3, "last_activity_date": 1573077306, "creation_date": 1573077306, "answer_id": 58739059, "question_id": 58738957, "link": "https://stackoverflow.com/questions/58738957/columnwise-operation-on-multiple-mapped-columns-using-pandas/58739059#58739059", "title": "Columnwise operation on multiple mapped columns using pandas", "body": "<p>You want <code>lookup</code> and <code>isin()</code>:</p>\n\n<pre><code># this is to know where to multiply\n# where to divide\ns = df2['Currency'].isin(['AUD', 'BWP'])\n\n# the values to multiply/divide\nm = df1.set_index('Date').lookup(df2['Date'],df2['Currency'])\n\ndf2['New_Amount_Dollar'] = df2['Amount_Dollar'] * np.where(s, m, 1/m)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>         Date Currency  Amount_Dollar  New_Amount_Dollar\n0  01-01-2019      AUD          19298         1891204.00\n1  02-01-2019      AUD          19210         1892185.00\n2  03-01-2019      COP           5000          116279.07\n3  04-01-2019      CAD            200           10204.08\n4  05-01-2019      BND           2300            2371.13\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "is_accepted": false, "score": 1, "last_activity_date": 1573078817, "last_edit_date": 1573078817, "creation_date": 1573077977, "answer_id": 58739196, "question_id": 58738957, "link": "https://stackoverflow.com/questions/58738957/columnwise-operation-on-multiple-mapped-columns-using-pandas/58739196#58739196", "title": "Columnwise operation on multiple mapped columns using pandas", "body": "<p>Try using <code>melt</code> and <code>merge</code>:</p>\n\n<pre><code>df_out = df2.merge(df1.melt('Date', var_name='Currency'), on= ['Date','Currency'])\n\ndf_out['New_Amount_Dollar'] = (df_out['Amount_Dollar'] * \n                               np.where(df_out['Currency'].isin(['AUD', 'BWP']),\n                                        df_out['value'], \n                                        1/df_out['value']))\nprint(df_out)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>         Date Currency  Amount_Dollar  New_Amount_Dollar  value\n0  01-01-2019      AUD          19298        1891204.000 98.000\n1  02-01-2019      AUD          19210        1892185.000 98.500\n2  03-01-2019      COP           5000         116279.070  0.043\n3  04-01-2019      CAD            200          10204.082  0.020\n4  05-01-2019      BND           2300           2371.134  0.970\n</code></pre>\n"}], "owner": {"reputation": 137, "user_id": 10893993, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d618005d19386dee2220f1fc2f581481?s=128&d=identicon&r=PG&f=1", "display_name": "Maddy6", "link": "https://stackoverflow.com/users/10893993/maddy6"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 58739059, "answer_count": 2, "score": 1, "last_activity_date": 1573078817, "creation_date": 1573076698, "last_edit_date": 1573076912, "question_id": 58738957, "link": "https://stackoverflow.com/questions/58738957/columnwise-operation-on-multiple-mapped-columns-using-pandas", "title": "Columnwise operation on multiple mapped columns using pandas", "body": "<p>I have two dataframes namely df1 and df2. I want to perform operation on column \"New_Amount_Dollar\" from df2. Basically in df1 I have historical currency data and I want to perform datewise operation given Currency and Amount_Dollar from df2 to calculate the values for New_Amount_Dollar column in df2.</p>\n\n<p>For 'Currency' == [AUD, BWP] We need to multiply the Amount_Dollar by respective currency value for respective date.</p>\n\n<p>For other currencies We need to divide the Amount_Dollar by respective currency value for respective date.</p>\n\n<p>e.g In df2 I have first currency as AUD for Date = '01-01-2019', so I want to calculate New_Amount_Dollar value such that</p>\n\n<p>New_Amount_Dollar = Amount_Dollar*AUD value from df1 i.e New_Amount_Dollar = 19298*98 = 1891204</p>\n\n<p>another example where in df2 I have third currency as COP for Date = '03-01-2019, so I want to calculate New_Amount_Dollar value such that</p>\n\n<p>New_Amount_Dollar = Amount_Dollar/COP value from df1 i.e New_Amount_Dollar = 5000/0.043 = 116279.06</p>\n\n<pre><code>import pandas as pd\ndata1 = {'Date':['01-01-2019', '02-01-2019', '03-01-2019', \n                 '04-01-2019','05-01-2019'],\n        'AUD':[98, 98.5, 99, 99.5, 97],\n        'BWP':[30,31,33,32,31],\n        'CAD':[0.02,0.0192,0.0196,0.0196,0.0192],\n        'BND':[0.99,0.952,0.970,0.980,0.970],\n        'COP':[0.05,0.047,0.043,0.047,0.045]}\ndf1 = pd.DataFrame(data1)\n\ndata2 = {'Date':['01-01-2019', '02-01-2019', '03-01-2019', '04-01-2019','05-01-2019'],\n        'Currency':['AUD','AUD','COP','CAD','BND'],\n        'Amount_Dollar':[19298, 19210, 5000, 200, 2300],\n        'New_Amount_Dollar':[0,0,0,0,0]\n        }\ndf2 = pd.DataFrame(data2) \nprint (df2)\n</code></pre>\n\n<p>df1</p>\n\n<pre><code>         Date   AUD  BWP     CAD    BND    COP\n0  01-01-2019  98.0   30  0.0200  0.990  0.050\n1  02-01-2019  98.5   31  0.0192  0.952  0.047\n2  03-01-2019  99.0   33  0.0196  0.970  0.043\n3  04-01-2019  99.5   32  0.0196  0.980  0.047\n4  05-01-2019  97.0   31  0.0192  0.970  0.045\n</code></pre>\n\n<p>df2</p>\n\n<pre><code>         Date Currency  Amount_Dollar  New_Amount_Dollar\n0  01-01-2019      AUD          19298                  0\n1  02-01-2019      AUD          19210                  0\n2  03-01-2019      COP           5000                  0\n3  04-01-2019      CAD            200                  0\n4  05-01-2019      BND           2300                  0\n</code></pre>\n\n<p>Expected result</p>\n\n<pre><code>         Date Currency  Amount_Dollar  New_Amount_Dollar\n0  01-01-2019      AUD          19298            1891204\n1  02-01-2019      AUD          19210          1892185.0\n2  03-01-2019      COP           5000          116279.06\n3  04-01-2019      CAD            200           10204.08\n4  05-01-2019      BND           2300            2371.13\n</code></pre>\n"}, {"tags": ["python", "blender", "mesh"], "answers": [{"tags": [], "owner": {"reputation": 141, "user_id": 10350396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09da2d15d68b9914e6207eceac3eb3d5?s=128&d=identicon&r=PG&f=1", "display_name": "Forrest", "link": "https://stackoverflow.com/users/10350396/forrest"}, "is_accepted": true, "score": 0, "last_activity_date": 1573153699, "creation_date": 1573153699, "answer_id": 58755453, "question_id": 58738934, "link": "https://stackoverflow.com/questions/58738934/how-to-delete-smaller-multiple-objects-in-my-scene-using-blender-script/58755453#58755453", "title": "How to delete smaller multiple objects in my scene using Blender script?", "body": "<p>I was able to write a code that works for this, however, it is very long and chaotic. I would appreciate it if anyone could give me some advice on cleaning it up.</p>\n\n<pre><code>import bpy\nimport os\nimport bmesh\n\n\ncontext = bpy.context\n\nfile = (r'path\\to\\file.stl')\n\nbpy.ops.import_mesh.stl(filepath= file)\nfileName = os.path.basename(file)[:-4].capitalize()\nbpy.ops.mesh.separate(type='LOOSE')\nbpy.ops.object.select_all(action='SELECT')\npiece = len(context.selected_objects)\nbpy.ops.object.select_all(action='DESELECT')\n\nhigh = 0\nif piece &gt; 1:\n    bpy.data.objects[fileName].select_set(True)\n    obj = bpy.context.active_object\n    bm = bmesh.new()\n    bm.from_mesh(obj.data)\n    area = sum(f.calc_area() for f in bm.faces)\n    high = area\n    bm.free()\n    bpy.ops.object.select_all(action='DESELECT')\n\n    for x in range (1, piece):\n        name = fileName + '.00' + str(x)\n        object = bpy.data.objects[name]\n        context.view_layer.objects.active = object\n        bpy.data.objects[name].select_set(True)\n        obj = bpy.context.active_object\n        bm = bmesh.new()\n        bm.from_mesh(obj.data)\n        newArea = sum(f.calc_area() for f in bm.faces)\n        bm.free()\n        if newArea &gt; high:\n            high = newArea\n            bpy.ops.object.select_all(action='DESELECT')\n        else:\n            bpy.ops.object.delete()\n        bpy.ops.object.select_all(action='DESELECT')\n\n    if area != high:\n        bpy.data.objects[fileName].select_set(True)\n        bpy.ops.object.delete()\n\n\nbpy.ops.export_mesh.stl(filepath= 'path/to/export/file.stl')\nbpy.ops.object.select_all(action='SELECT')\nbpy.ops.object.delete(use_global=False, confirm=False)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6139, "user_id": 2684771, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f2f487264833152bb7890a4b6292d65?s=128&d=identicon&r=PG&f=1", "display_name": "sambler", "link": "https://stackoverflow.com/users/2684771/sambler"}, "is_accepted": false, "score": 1, "last_activity_date": 1574229536, "creation_date": 1574229536, "answer_id": 58947663, "question_id": 58738934, "link": "https://stackoverflow.com/questions/58738934/how-to-delete-smaller-multiple-objects-in-my-scene-using-blender-script/58947663#58947663", "title": "How to delete smaller multiple objects in my scene using Blender script?", "body": "<p>The steps would be :-</p>\n\n<ul>\n<li>import file</li>\n<li>break into multiple objects</li>\n<li>for safety, get a list of mesh objects</li>\n<li>list the surface area of each object</li>\n<li>get the max from the list of areas</li>\n<li>delete the not biggest objects</li>\n<li>export the largest</li>\n<li>cleanup</li>\n</ul>\n\n<p>We don't need to use <a href=\"https://docs.blender.org/api/current/bmesh.html\" rel=\"nofollow noreferrer\">bmesh</a> to get the surface area, the normal mesh data includes <a href=\"https://docs.blender.org/api/current/bpy.types.MeshPolygon.html#bpy.types.MeshPolygon.area\" rel=\"nofollow noreferrer\">polygon.area</a>.</p>\n\n<p>Using <a href=\"https://docs.python.org/3/tutorial/datastructures.html#list-comprehensions\" rel=\"nofollow noreferrer\">list comprehension</a>, we can get most steps into one line each.</p>\n\n<pre><code>import bpy\n\n# import and separate\nfile = (r'path/of/file.stl')\nbpy.ops.import_mesh.stl(filepath= file)\nbpy.ops.mesh.separate(type='LOOSE')\n\n# list of mesh objects\nmesh_objs = [o for o in bpy.context.scene.objects\n                if o.type == 'MESH']\n\n# dict with surface area of each object\nobj_areas = {o:sum([f.area for f in o.data.polygons])\n                for o in mesh_objs}\n\n# which is biggest\nbig_obj = max(obj_areas, key=obj_areas.get)\n\n# select and delete not biggest\n[o.select_set(o is not big_obj) for o in mesh_objs]\nbpy.ops.object.delete(use_global=False, confirm=False)\n\n#export\nbpy.ops.export_mesh.stl(filepath= 'path/of/new/file.stl')\n\n# cleanup\nbpy.ops.object.select_all(action='SELECT')\nbpy.ops.object.delete(use_global=False, confirm=False)\n</code></pre>\n"}], "owner": {"reputation": 141, "user_id": 10350396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09da2d15d68b9914e6207eceac3eb3d5?s=128&d=identicon&r=PG&f=1", "display_name": "Forrest", "link": "https://stackoverflow.com/users/10350396/forrest"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1293, "favorite_count": 0, "accepted_answer_id": 58755453, "answer_count": 2, "score": 0, "last_activity_date": 1574229536, "creation_date": 1573076592, "question_id": 58738934, "link": "https://stackoverflow.com/questions/58738934/how-to-delete-smaller-multiple-objects-in-my-scene-using-blender-script", "title": "How to delete smaller multiple objects in my scene using Blender script?", "body": "<p>I am using Blender 2.8. I want to import an object into blender that is made up of a few pieces that aren't connected. So I want to split the object up and only export the largest of the pieces.</p>\n\n<p>So lets say there are 3 pieces in one object, one big and two small. I'm able to turn this object into three objects, each containing one of the pieces. I would like to delete the two smaller objects and only keep the largest one. I'm thinking maybe to somehow find the surface area of the three different objects and only keep the largest while deleting all others? I'm pretty new at Blender.</p>\n\n<pre><code>bpy.ops.import_mesh.stl(filepath='path/of/file.stl')\nbpy.ops.mesh.separate(type='LOOSE')\namount_of_pieces = len(context.selected_objects)\n\nif amount_of_pieces &gt; 1:\n    highest_surface_area = 0\n\n    #the rest is pseudocode\n    for object in scene:\n        if object.area &gt; highest_surface_area:\n            highest_surface_area = object.area\n        else:\n            bpy.ops.object.delete()\n\nbpy.ops.export_mesh.stl(filepath='path/of/new/file.stl')\n</code></pre>\n"}, {"tags": ["python", "dataframe", "matplotlib"], "comments": [{"owner": {"reputation": 1375, "user_id": 9307263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/defcaa944843f58d4f4befbed4a9c77c?s=128&d=identicon&r=PG&f=1", "display_name": "Brian Joseph", "link": "https://stackoverflow.com/users/9307263/brian-joseph"}, "edited": false, "score": 1, "creation_date": 1573076619, "post_id": 58738928, "comment_id": 103767726, "body": "This is way too broad. What does your input data look like? Where is the code?"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1573077094, "post_id": 58738928, "comment_id": 103767900, "body": "Welcome to StackOverflow. Please follow the posting guidelines in the help documentation, as suggested when you created this account. <a href=\"https://stackoverflow.com/help/on-topic\">On topic</a>, <a href=\"https://stackoverflow.com/help/how-to-ask\">how to ask</a>, and ... <a href=\"https://codeblog.jonskeet.uk/2010/08/29/writing-the-perfect-question/\" rel=\"nofollow noreferrer\">the perfect question</a> apply here.  StackOverflow is a knowledge base for <i>specific</i> programming problems -- not a design, coding, research, or tutorial resource."}, {"owner": {"reputation": 1416, "user_id": 11922765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed69b624cdb86e52caf0010e274df7b0?s=128&d=identicon&r=PG&f=1", "display_name": "Mainland", "link": "https://stackoverflow.com/users/11922765/mainland"}, "reply_to_user": {"reputation": 1375, "user_id": 9307263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/defcaa944843f58d4f4befbed4a9c77c?s=128&d=identicon&r=PG&f=1", "display_name": "Brian Joseph", "link": "https://stackoverflow.com/users/9307263/brian-joseph"}, "edited": false, "score": 0, "creation_date": 1573077342, "post_id": 58738928, "comment_id": 103768005, "body": "@BrianJoseph I have updated my question with data. Sorry about that."}, {"owner": {"reputation": 1416, "user_id": 11922765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed69b624cdb86e52caf0010e274df7b0?s=128&d=identicon&r=PG&f=1", "display_name": "Mainland", "link": "https://stackoverflow.com/users/11922765/mainland"}, "reply_to_user": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1573077383, "post_id": 58738928, "comment_id": 103768021, "body": "@Prune I have updated my question with data. Sorry about that."}, {"owner": {"reputation": 485, "user_id": 10094021, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-yCsekZ7uoOk/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7qSc4HNFSkBZmB4PgNj7yxF73f8EA/mo/photo.jpg?sz=128", "display_name": "Msquare ", "link": "https://stackoverflow.com/users/10094021/msquare"}, "edited": false, "score": 0, "creation_date": 1573077590, "post_id": 58738928, "comment_id": 103768087, "body": "@Mainland how about using QGIS"}, {"owner": {"reputation": 150, "user_id": 12016883, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_sxq0_IZPjc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re8EV_hgAMubCW6_p5jMd21wTgjww/photo.jpg?sz=128", "display_name": "verandaguy", "link": "https://stackoverflow.com/users/12016883/verandaguy"}, "edited": false, "score": 1, "creation_date": 1573077651, "post_id": 58738928, "comment_id": 103768111, "body": "@Mainland any reason you wouldn&#39;t use a sum of lengths computed using the Pythagorean theorem?&#175;_(\u30c4)_/&#175;"}, {"owner": {"reputation": 1416, "user_id": 11922765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed69b624cdb86e52caf0010e274df7b0?s=128&d=identicon&r=PG&f=1", "display_name": "Mainland", "link": "https://stackoverflow.com/users/11922765/mainland"}, "reply_to_user": {"reputation": 150, "user_id": 12016883, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_sxq0_IZPjc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re8EV_hgAMubCW6_p5jMd21wTgjww/photo.jpg?sz=128", "display_name": "verandaguy", "link": "https://stackoverflow.com/users/12016883/verandaguy"}, "edited": false, "score": 0, "creation_date": 1573078783, "post_id": 58738928, "comment_id": 103768505, "body": "@verandaguy how would you do that?"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1573079597, "post_id": 58738928, "comment_id": 103768759, "body": "Thanks for the data.  We also expect you to make an honest attempt to solve the problem.  &quot;How would you do that&quot;? is something you need to look up: computing distances, and summing a list of values."}, {"owner": {"reputation": 150, "user_id": 12016883, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_sxq0_IZPjc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re8EV_hgAMubCW6_p5jMd21wTgjww/photo.jpg?sz=128", "display_name": "verandaguy", "link": "https://stackoverflow.com/users/12016883/verandaguy"}, "edited": false, "score": 0, "creation_date": 1573140660, "post_id": 58738928, "comment_id": 103792077, "body": "@Mainland take the horizontal run between each pair of points, the vertical rise between those two same points, compute the hypotenuse, and continue to the next pair of points. Sum the lengths of the hypotenuses. That said, seeing some of the other answers here, that&#39;s a fairly inelegant solution in terms of how it&#39;d be implemented."}, {"owner": {"reputation": 1416, "user_id": 11922765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed69b624cdb86e52caf0010e274df7b0?s=128&d=identicon&r=PG&f=1", "display_name": "Mainland", "link": "https://stackoverflow.com/users/11922765/mainland"}, "reply_to_user": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1573163298, "post_id": 58738928, "comment_id": 103802435, "body": "@Prune I am blank when I got the problem. After posting here I got the idea of calculating the geometric distance between two points."}], "answers": [{"comments": [{"owner": {"reputation": 1416, "user_id": 11922765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed69b624cdb86e52caf0010e274df7b0?s=128&d=identicon&r=PG&f=1", "display_name": "Mainland", "link": "https://stackoverflow.com/users/11922765/mainland"}, "edited": false, "score": 0, "creation_date": 1573077751, "post_id": 58739139, "comment_id": 103768143, "body": "This sounds good. What are the units of this output?"}, {"owner": {"reputation": 1375, "user_id": 9307263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/defcaa944843f58d4f4befbed4a9c77c?s=128&d=identicon&r=PG&f=1", "display_name": "Brian Joseph", "link": "https://stackoverflow.com/users/9307263/brian-joseph"}, "reply_to_user": {"reputation": 1416, "user_id": 11922765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed69b624cdb86e52caf0010e274df7b0?s=128&d=identicon&r=PG&f=1", "display_name": "Mainland", "link": "https://stackoverflow.com/users/11922765/mainland"}, "edited": false, "score": 0, "creation_date": 1573077824, "post_id": 58739139, "comment_id": 103768164, "body": "@Mainland lol you never gave me units to begin with. How about <code>5.13 bananas</code>? The units should be of the same order of <code>xdata</code> and <code>ydata</code> (assuming they share units)"}, {"owner": {"reputation": 1416, "user_id": 11922765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed69b624cdb86e52caf0010e274df7b0?s=128&d=identicon&r=PG&f=1", "display_name": "Mainland", "link": "https://stackoverflow.com/users/11922765/mainland"}, "edited": false, "score": 0, "creation_date": 1573078039, "post_id": 58739139, "comment_id": 103768242, "body": "Sorry about that. I updated my question with units. However, your response made me laugh at the I way provided you data. Thanks for that."}, {"owner": {"reputation": 1375, "user_id": 9307263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/defcaa944843f58d4f4befbed4a9c77c?s=128&d=identicon&r=PG&f=1", "display_name": "Brian Joseph", "link": "https://stackoverflow.com/users/9307263/brian-joseph"}, "reply_to_user": {"reputation": 1416, "user_id": 11922765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed69b624cdb86e52caf0010e274df7b0?s=128&d=identicon&r=PG&f=1", "display_name": "Mainland", "link": "https://stackoverflow.com/users/11922765/mainland"}, "edited": false, "score": 0, "creation_date": 1573136982, "post_id": 58739139, "comment_id": 103789999, "body": "@Mainland I always hated physics so I&#39;m not sure. But if this is a volt/amp curve then the units should be volt-amps?"}, {"owner": {"reputation": 1416, "user_id": 11922765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed69b624cdb86e52caf0010e274df7b0?s=128&d=identicon&r=PG&f=1", "display_name": "Mainland", "link": "https://stackoverflow.com/users/11922765/mainland"}, "edited": false, "score": 0, "creation_date": 1573163206, "post_id": 58739139, "comment_id": 103802406, "body": "I guess it is not a volt-amp unit. Anyhow thanks for the inputs."}], "tags": [], "owner": {"reputation": 1375, "user_id": 9307263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/defcaa944843f58d4f4befbed4a9c77c?s=128&d=identicon&r=PG&f=1", "display_name": "Brian Joseph", "link": "https://stackoverflow.com/users/9307263/brian-joseph"}, "is_accepted": true, "score": 1, "last_activity_date": 1573077779, "last_edit_date": 1573077779, "creation_date": 1573077640, "answer_id": 58739139, "question_id": 58738928, "link": "https://stackoverflow.com/questions/58738928/python-plot-find-the-geometric-length-of-a-curved-line/58739139#58739139", "title": "Python plot find the geometric length of a curved line", "body": "<p>Break down the problem into calculating the distance between ever consecutive pair of points. The entire curve length will be the sum of these values.</p>\n\n<p>The python <code>reduce</code> function will essentially do this for you as long as you can tell it how to compute the distance between 2 points and provide the data (assuming it is in a pandas <code>df</code> format).</p>\n\n<pre><code>from functools import reduce\n\nreduce(lambda p1, p2: np.linalg.norm(p1 - p2), df[['xdata', 'ydata']].values)\n\n&gt;&gt;&gt; output\n5.136345594110207\n</code></pre>\n\n<p>P.S.: More info on the euclidian distance meteric I used <a href=\"https://stackoverflow.com/questions/1401712/how-can-the-euclidean-distance-be-calculated-with-numpy\">here</a>.</p>\n"}], "owner": {"reputation": 1416, "user_id": 11922765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed69b624cdb86e52caf0010e274df7b0?s=128&d=identicon&r=PG&f=1", "display_name": "Mainland", "link": "https://stackoverflow.com/users/11922765/mainland"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 179, "favorite_count": 1, "closed_date": 1573085221, "accepted_answer_id": 58739139, "answer_count": 1, "score": -1, "last_activity_date": 1573077982, "creation_date": 1573076562, "last_edit_date": 1573077982, "question_id": 58738928, "link": "https://stackoverflow.com/questions/58738928/python-plot-find-the-geometric-length-of-a-curved-line", "closed_reason": "Needs more focus", "title": "Python plot find the geometric length of a curved line", "body": "<p>How to find the length of a curved line in Python. An example to illustrate the problem is given below. Any inputs?</p>\n\n<p>My data is given below:</p>\n\n<pre><code>        xdata    ydata ### xdata units = voltage, ydata units = amperes\n0       2.130  10.432500\n1       2.213  10.434000\n2       2.279  10.437000\n3       2.379  10.440000\n4       2.496  10.441000\n5       2.579  10.439000\n6       2.612  10.441000\n7       2.745  10.442000\n8       2.812  10.439000\n9       2.845  10.445000\n10      2.912  10.445000\n11      2.928  10.441000\n12      2.945  10.444000\n13      2.961  10.438000\n14      2.995  10.443000\n15      3.011  10.446000\n16      3.028  10.442000\n17      3.045  10.447000\n18      3.061  10.440000\n19      3.877  10.362000\n20      4.509  10.414000\n21      5.191  10.414000\n22      5.790  10.419000\n23      6.405  10.409000\n24      6.971  10.415000\n25      7.553  10.414000\n26      8.136  10.411000\n27      8.751  10.414000\n28      9.250  10.410000\n29      9.883  10.405000\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/6szha.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6szha.png\" alt=\"enter image description here\"></a></p>\n\n<p>I have no idea where and how to start to find the length? </p>\n"}, {"tags": ["python", "selenium", "google-chrome", "webdriver"], "comments": [{"owner": {"reputation": 356, "user_id": 4911426, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1087083604639482/picture?type=large", "display_name": "Shahboz", "link": "https://stackoverflow.com/users/4911426/shahboz"}, "edited": false, "score": 0, "creation_date": 1573076853, "post_id": 58738911, "comment_id": 103767805, "body": "Try updating your chromedriver to the latest."}, {"owner": {"reputation": 31, "user_id": 12334408, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-n1eXP9BKnI0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rds0JYfT9m-1fTUlf9dZkL-gqjjpw/photo.jpg?sz=128", "display_name": "artur_bryt", "link": "https://stackoverflow.com/users/12334408/artur-bryt"}, "reply_to_user": {"reputation": 356, "user_id": 4911426, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1087083604639482/picture?type=large", "display_name": "Shahboz", "link": "https://stackoverflow.com/users/4911426/shahboz"}, "edited": false, "score": 0, "creation_date": 1573076983, "post_id": 58738911, "comment_id": 103767850, "body": "updated chrome and chromedriver and still same :/"}], "owner": {"reputation": 31, "user_id": 12334408, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-n1eXP9BKnI0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rds0JYfT9m-1fTUlf9dZkL-gqjjpw/photo.jpg?sz=128", "display_name": "artur_bryt", "link": "https://stackoverflow.com/users/12334408/artur-bryt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 76, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1573078070, "creation_date": 1573076483, "question_id": 58738911, "link": "https://stackoverflow.com/questions/58738911/how-to-go-to-webpage-without-delay-at-data-page-with-selenium-chromedriver-in", "title": "How to go to webpage without delay at &quot;data;&quot; page with Selenium Chromedriver in Python?", "body": "<p>I am using Selenium and Chrome webdriver in Python, when I'm running script it opens chrome normally, but it waits in \"data;\" page around 10 seconds and than go to page normally. Can i skip that waiting time and go to page instantly?\nThere is my code:</p>\n\n<pre><code>class Instance():\n    driver=None\n    url=None\n\n    def __init__(self, url):\n\n        self.url=url\n\n    def runInstance(self):\n        self.driver = webdriver.Chrome(executable_path = \"C:\\chromedriver.exe\")\n        self.driver.get(self.url)\n\ninstance = Instance(\"https://www.youtube.com/\")\ninstance.runInstance()\n\n</code></pre>\n"}, {"tags": ["python", "tensorflow", "keras"], "comments": [{"owner": {"reputation": 2237, "user_id": 8347081, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-C2gg5Z3zU2w/AAAAAAAAAAI/AAAAAAAABXE/M2GK2Eixhms/photo.jpg?sz=128", "display_name": "mypetlion", "link": "https://stackoverflow.com/users/8347081/mypetlion"}, "edited": false, "score": 0, "creation_date": 1573078271, "post_id": 58738909, "comment_id": 103768328, "body": "Did you try following the instructions from the warning message? If so, what happened?"}, {"owner": {"reputation": 29, "user_id": 11318809, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-nnXSvAmHono/AAAAAAAAAAI/AAAAAAAAAAg/48YHbywhkUU/photo.jpg?sz=128", "display_name": "Sachin Rathi", "link": "https://stackoverflow.com/users/11318809/sachin-rathi"}, "reply_to_user": {"reputation": 2237, "user_id": 8347081, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-C2gg5Z3zU2w/AAAAAAAAAAI/AAAAAAAABXE/M2GK2Eixhms/photo.jpg?sz=128", "display_name": "mypetlion", "link": "https://stackoverflow.com/users/8347081/mypetlion"}, "edited": false, "score": 0, "creation_date": 1573591076, "post_id": 58738909, "comment_id": 103929243, "body": "I am using Keras as a wrapper around TF. I am somewhat unfamiliar with TF so I haven&#39;t tried to tinker with it. But the point is I am getting this warning in a lot of Keras functions."}], "owner": {"reputation": 29, "user_id": 11318809, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-nnXSvAmHono/AAAAAAAAAAI/AAAAAAAAAAg/48YHbywhkUU/photo.jpg?sz=128", "display_name": "Sachin Rathi", "link": "https://stackoverflow.com/users/11318809/sachin-rathi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1573076478, "creation_date": 1573076478, "question_id": 58738909, "link": "https://stackoverflow.com/questions/58738909/why-am-i-getting-too-many-deprecated-warnings-while-using-keras-with-tf-backend", "title": "Why am I getting too many deprecated warnings while using Keras with TF backend?", "body": "<p>I am using TF 1.14 but every now and then I keep getting a lot of warnings. Is there some implication of these. If so is there any way to fix it or should I just ignore and carry on?\nExample - \"The name tf.nn.max_pool is deprecated. Please use tf.nn.max_pool2d instead.\"</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 33492, "user_id": 7212686, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Ey8ll.png?s=128&g=1", "display_name": "azro", "link": "https://stackoverflow.com/users/7212686/azro"}, "edited": false, "score": 0, "creation_date": 1573076609, "post_id": 58738900, "comment_id": 103767723, "body": "Share the first version, without the loop, indentation is strange here"}, {"owner": {"reputation": 1129, "user_id": 6822886, "user_type": "registered", "accept_rate": 79, "profile_image": "https://lh6.googleusercontent.com/-PW9V0rm6uOw/AAAAAAAAAAI/AAAAAAAAAD4/Jxv9HFVgbcQ/photo.jpg?sz=128", "display_name": "Capn Jack", "link": "https://stackoverflow.com/users/6822886/capn-jack"}, "edited": false, "score": 0, "creation_date": 1573076699, "post_id": 58738900, "comment_id": 103767753, "body": "Also, you&#39;re getting this error because you&#39;re trying to find the length (<code>len()</code>) of an integer, and integer is not a list."}, {"owner": {"reputation": 125, "user_id": 12329076, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fTnAZMWBwYw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf-AzlCEJaj76cRxF9aRFZrbqU_Fw/photo.jpg?sz=128", "display_name": "Artur Podlesniy", "link": "https://stackoverflow.com/users/12329076/artur-podlesniy"}, "edited": false, "score": 0, "creation_date": 1573077274, "post_id": 58738900, "comment_id": 103767975, "body": "That&#39;st from my mistake from editing it too much, earlier when I had it link_list = [&#39;test&#39;] it would keep running until I shut it down."}, {"owner": {"reputation": 125, "user_id": 12329076, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fTnAZMWBwYw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf-AzlCEJaj76cRxF9aRFZrbqU_Fw/photo.jpg?sz=128", "display_name": "Artur Podlesniy", "link": "https://stackoverflow.com/users/12329076/artur-podlesniy"}, "edited": false, "score": 0, "creation_date": 1573077476, "post_id": 58738900, "comment_id": 103768052, "body": "Added code before the while loop."}], "answers": [{"comments": [{"owner": {"reputation": 125, "user_id": 12329076, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fTnAZMWBwYw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf-AzlCEJaj76cRxF9aRFZrbqU_Fw/photo.jpg?sz=128", "display_name": "Artur Podlesniy", "link": "https://stackoverflow.com/users/12329076/artur-podlesniy"}, "edited": false, "score": 0, "creation_date": 1573077256, "post_id": 58738966, "comment_id": 103767968, "body": "That&#39;st from my mistake from editing it  too much,  earlier when I had it link_list = [&#39;test&#39;] it would keep running until I shut it down."}], "tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 0, "last_activity_date": 1573076757, "creation_date": 1573076757, "answer_id": 58738966, "question_id": 58738900, "link": "https://stackoverflow.com/questions/58738900/python-having-trouble-converting-my-code-into-a-while-loop/58738966#58738966", "title": "Python, having trouble converting my code into a while loop", "body": "<p>You fail immediately because <code>link_list</code> is an integer when you try to enter the <code>while</code> loop.  It has no length; it's a scalar.  It's not a list until after you exit the loop.  Nowhere in the loop do you accumulate those links; you need to sort out your logic: what is done anew each time through the loop, what is filtered, and what gets accumulated, one iteration at a time.</p>\n"}, {"comments": [{"owner": {"reputation": 125, "user_id": 12329076, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fTnAZMWBwYw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf-AzlCEJaj76cRxF9aRFZrbqU_Fw/photo.jpg?sz=128", "display_name": "Artur Podlesniy", "link": "https://stackoverflow.com/users/12329076/artur-podlesniy"}, "edited": false, "score": 0, "creation_date": 1573077974, "post_id": 58739094, "comment_id": 103768224, "body": "I really appreciate your help and I understand what you were trying to do but I do not need it to repeat my function forty times arbitrarily. I need it to repeat until the length of link_list has 40 values within it which could take as quick as two pages. With your function, it goes through 40 pages regardless of the length of link_list."}, {"owner": {"reputation": 777, "user_id": 6656130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/X42hX.jpg?s=128&g=1", "display_name": "Max Kaha", "link": "https://stackoverflow.com/users/6656130/max-kaha"}, "reply_to_user": {"reputation": 125, "user_id": 12329076, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fTnAZMWBwYw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf-AzlCEJaj76cRxF9aRFZrbqU_Fw/photo.jpg?sz=128", "display_name": "Artur Podlesniy", "link": "https://stackoverflow.com/users/12329076/artur-podlesniy"}, "edited": false, "score": 0, "creation_date": 1573078328, "post_id": 58739094, "comment_id": 103768341, "body": "@ArturPodlesniy I edited my answer to stop at 40 items in link_sex_candidates. I am unsure which information you want to be in link_list because you just initialize it with a 0 and dont use it in your example code. Is this more like what you want to do ? This loops until link_sex_candidates has found 40 appearances."}, {"owner": {"reputation": 125, "user_id": 12329076, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fTnAZMWBwYw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf-AzlCEJaj76cRxF9aRFZrbqU_Fw/photo.jpg?sz=128", "display_name": "Artur Podlesniy", "link": "https://stackoverflow.com/users/12329076/artur-podlesniy"}, "edited": false, "score": 0, "creation_date": 1573079396, "post_id": 58739094, "comment_id": 103768686, "body": "link_sex_candidates is all returns of the search function labelled age_sex.                                                                                                                    Age_sex values is what the script is parsing to see if the profile is male or female, if female, it deletes the profile from both link_list and sex_list."}, {"owner": {"reputation": 125, "user_id": 12329076, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fTnAZMWBwYw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf-AzlCEJaj76cRxF9aRFZrbqU_Fw/photo.jpg?sz=128", "display_name": "Artur Podlesniy", "link": "https://stackoverflow.com/users/12329076/artur-podlesniy"}, "edited": false, "score": 0, "creation_date": 1573079633, "post_id": 58739094, "comment_id": 103768772, "body": "link_list contains the values after Age_sex has already been adjusted.   Where as link_sex_candidates returns every instance that is found without removing the profiles that need to be deleted. So for example, with your updated code, it runs through multiple pages but stops after it has found forty instances of age_sex, does that make sense?"}, {"owner": {"reputation": 777, "user_id": 6656130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/X42hX.jpg?s=128&g=1", "display_name": "Max Kaha", "link": "https://stackoverflow.com/users/6656130/max-kaha"}, "reply_to_user": {"reputation": 125, "user_id": 12329076, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fTnAZMWBwYw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf-AzlCEJaj76cRxF9aRFZrbqU_Fw/photo.jpg?sz=128", "display_name": "Artur Podlesniy", "link": "https://stackoverflow.com/users/12329076/artur-podlesniy"}, "edited": false, "score": 0, "creation_date": 1573079922, "post_id": 58739094, "comment_id": 103768876, "body": "@ArturPodlesniy In that case I would add the filter directly to the loop instead of filtering afterwards and only append to the list if it is a match. I edited my answer again, this should be what you were looking for."}, {"owner": {"reputation": 125, "user_id": 12329076, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fTnAZMWBwYw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf-AzlCEJaj76cRxF9aRFZrbqU_Fw/photo.jpg?sz=128", "display_name": "Artur Podlesniy", "link": "https://stackoverflow.com/users/12329076/artur-podlesniy"}, "edited": false, "score": 0, "creation_date": 1573080429, "post_id": 58739094, "comment_id": 103769014, "body": "Perfect! Thank you so much, I really appreciate all your help."}], "tags": [], "owner": {"reputation": 777, "user_id": 6656130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/X42hX.jpg?s=128&g=1", "display_name": "Max Kaha", "link": "https://stackoverflow.com/users/6656130/max-kaha"}, "is_accepted": true, "score": 0, "last_activity_date": 1573079871, "last_edit_date": 1573079871, "creation_date": 1573077434, "answer_id": 58739094, "question_id": 58738900, "link": "https://stackoverflow.com/questions/58738900/python-having-trouble-converting-my-code-into-a-while-loop/58739094#58739094", "title": "Python, having trouble converting my code into a while loop", "body": "<p>Do you want something like this ? Here I am using range() instead of your while where you are counting up. The way you wrote it I didnt see a point in having both page_num and link_list as you didnt really use link_list. Hope this helps point you in the right direction.</p>\n\n<pre><code>link_list = []\nsex_list = []\npage = 1\n\nwhile len(link_list) &lt; 40:\n    page_link = ('https://google.com/page=' + str(page))\n    browser.get(page_link)\n    age_sex = browser.find_elements_by_xpath(\n        '//*[@class=\"lh-copy truncate silver\"]')\n    for item in age_sex:\n        link = item.find_element_by_xpath('.//a').get_attribute('href')\n        sex = item.find_element_by_xpath('.//span').text\n        if sex[2:3] != 'F':\n            link_list.append(link)\n            sex_list.append(sex)\n    page += 1\n\nprint(link_list)\n</code></pre>\n\n<p>Edit: Edited my answer to use while instead of for as it should stop at 40 occurances not go through 40 pages individually.</p>\n\n<p>Edit2: Only adding matching results to link_list</p>\n"}], "owner": {"reputation": 125, "user_id": 12329076, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fTnAZMWBwYw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf-AzlCEJaj76cRxF9aRFZrbqU_Fw/photo.jpg?sz=128", "display_name": "Artur Podlesniy", "link": "https://stackoverflow.com/users/12329076/artur-podlesniy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 58739094, "answer_count": 2, "score": 1, "last_activity_date": 1573079871, "creation_date": 1573076438, "last_edit_date": 1573077534, "question_id": 58738900, "link": "https://stackoverflow.com/questions/58738900/python-having-trouble-converting-my-code-into-a-while-loop", "title": "Python, having trouble converting my code into a while loop", "body": "<p>Took on a personal web scraping project to teach myself python but after parsing my data (age/sex of a profile), I am having trouble turning it into a while loop, no matter how I reformat my code it gives me different errors, without the for loop the code works on only one page, I need it to loop through pages until the length of my list reaches 40. </p>\n\n<pre><code>link_list = 0\npage_num = 1\nwhile (len(link_list)) &lt; 40:\n    page_link = ('https://google.com/page=' + str(page))\n    browser.get(page_link)\n    age_sex = browser.find_elements_by_xpath('//*[@class=\"lh-copy truncate silver\"]')\n    page = page + 1\n    link_sex_candidates = (\n        (ii.find_element_by_xpath('.//a').get_attribute('href'),\n         ii.find_element_by_xpath('.//span').text)\n        for ii in age_sex\n    )\nlink_sex_filtered = [\n    (link, sex) \n    for link, sex in link_sex_candidates \n    if sex[2:3] != 'F'\n]\nlink_list = [link for link, sex in link_sex_filtered]\nsex_list = [sex for link, sex in link_sex_filtered]\n</code></pre>\n\n<hr>\n\n<pre><code> Error Message:\n Traceback (most recent call last):\n File \"C:\\Users\\artur\\Desktop\\do not delete final.py\", line 31, in &lt;module&gt;\n while (len(link_list)) &lt; 40:\n TypeError: object of type 'int' has no len()\n</code></pre>\n\n<p>I know what this error message means and I thought it would be corrected if I defined link_list outside of the while loop. I am grateful and thankfully for any help that you can give.</p>\n\n<p>Edit: Someone asked me for the code before the while loop was introduced:</p>\n\n<pre><code>age_sex = browser.find_elements_by_xpath('//*[@class=\"lh-copy truncate silver\"]')\n\nlink_sex_candidates = (\n    (ii.find_element_by_xpath('.//a').get_attribute('href'),\n     ii.find_element_by_xpath('.//span').text)\n    for ii in age_sex\n)\nlink_sex_filtered = [\n    (link, sex)\n    for link, sex in link_sex_candidates\n    if sex[2:3] != 'F'\n]\nlink_list = [link for link, sex in link_sex_filtered]\nsex_list = [sex for link, sex in link_sex_filtered]\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 611, "user_id": 7747988, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EHOW3.jpg?s=128&g=1", "display_name": "Bob White", "link": "https://stackoverflow.com/users/7747988/bob-white"}, "edited": false, "score": 0, "creation_date": 1573076684, "post_id": 58738871, "comment_id": 103767748, "body": "you should show a snippet code. I recommend you to load first all you lib then pass as a reference to your function or process. show me your code"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1573077034, "post_id": 58738871, "comment_id": 103767870, "body": "Are you running a script per request? Don&#39;t do that, create a little server, where you load the library once then it will handle requests without having to re-load the library (and the entire script) to handle each request."}, {"owner": {"reputation": 123, "user_id": 6172961, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3446006cb2b37e5d42d9325b68b66c1?s=128&d=identicon&r=PG&f=1", "display_name": "Proper", "link": "https://stackoverflow.com/users/6172961/proper"}, "edited": false, "score": 0, "creation_date": 1573080578, "post_id": 58738871, "comment_id": 103769061, "body": "Example? <code>import module_name</code>"}, {"owner": {"reputation": 123, "user_id": 6172961, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3446006cb2b37e5d42d9325b68b66c1?s=128&d=identicon&r=PG&f=1", "display_name": "Proper", "link": "https://stackoverflow.com/users/6172961/proper"}, "edited": false, "score": 0, "creation_date": 1573086761, "post_id": 58738871, "comment_id": 103770537, "body": "What would implementation of such code look like?"}], "owner": {"reputation": 123, "user_id": 6172961, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3446006cb2b37e5d42d9325b68b66c1?s=128&d=identicon&r=PG&f=1", "display_name": "Proper", "link": "https://stackoverflow.com/users/6172961/proper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1573076695, "creation_date": 1573076269, "question_id": 58738871, "link": "https://stackoverflow.com/questions/58738871/python-importing-library-is-slow", "title": "python importing library is slow", "body": "<p>I have python scrip that imports library and then runs some code on data sent to it and reruns the result.</p>\n\n<p>This script was designed to take large number of separate requests from many servers in quick succession.\nActual code runs in mere 2ms but importing one library at the start of the file takes 95ms\nThis mean 10 individual requests take one second to process instead of 120ms they should take because every request loads library from scratch.</p>\n\n<p>Are there ways to preload libraries on the server?\nHow is this problem solved?</p>\n"}, {"tags": ["python", "image", "pygame", "alpha"], "comments": [{"owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "edited": false, "score": 0, "creation_date": 1573077289, "post_id": 58738861, "comment_id": 103767980, "body": "You can use <a href=\"https://www.pygame.org/docs/ref/surface.html#pygame.Surface.set_colorkey\" rel=\"nofollow noreferrer\"><code>.set_colorkey()</code></a> to set the transparent colorkey."}, {"owner": {"reputation": 91141, "user_id": 142637, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9SiZh.png?s=128&g=1", "display_name": "sloth", "link": "https://stackoverflow.com/users/142637/sloth"}, "edited": false, "score": 0, "creation_date": 1573110662, "post_id": 58738861, "comment_id": 103776159, "body": "You should add the image to your question. Otherwise, nobody can reproduce your problem."}, {"owner": {"reputation": 39, "user_id": 12334467, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-pPl0FiSH7cU/AAAAAAAAAAI/AAAAAAAABjw/dejBhtHpet4/photo.jpg?sz=128", "display_name": "simon lav", "link": "https://stackoverflow.com/users/12334467/simon-lav"}, "edited": false, "score": 0, "creation_date": 1573123882, "post_id": 58738861, "comment_id": 103782816, "body": ".set_colorkey() doesent seem to work, and the current image is: <a href=\"https://i.imgur.com/uhFAz16.png\" rel=\"nofollow noreferrer\">i.imgur.com/uhFAz16.png</a> where I need the white part to be transparent"}], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 12334467, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-pPl0FiSH7cU/AAAAAAAAAAI/AAAAAAAABjw/dejBhtHpet4/photo.jpg?sz=128", "display_name": "simon lav", "link": "https://stackoverflow.com/users/12334467/simon-lav"}, "edited": false, "score": 0, "creation_date": 1573557856, "post_id": 58754682, "comment_id": 103912753, "body": "Thats make the following error: &quot;special flags&quot; is an invalid keyword argument for this function"}, {"owner": {"reputation": 39, "user_id": 12334467, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-pPl0FiSH7cU/AAAAAAAAAAI/AAAAAAAABjw/dejBhtHpet4/photo.jpg?sz=128", "display_name": "simon lav", "link": "https://stackoverflow.com/users/12334467/simon-lav"}, "edited": false, "score": 0, "creation_date": 1573558079, "post_id": 58754682, "comment_id": 103912862, "body": "Correction: that do work but it makes the whole image a little bit transparent"}], "tags": [], "owner": {"reputation": 7055, "user_id": 113608, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/faa489ba79c8b40dca31a708407740b4?s=128&d=identicon&r=PG", "display_name": "fixmycode", "link": "https://stackoverflow.com/users/113608/fixmycode"}, "is_accepted": true, "score": 0, "last_activity_date": 1573150037, "creation_date": 1573150037, "answer_id": 58754682, "question_id": 58738861, "link": "https://stackoverflow.com/questions/58738861/pygame-blit-the-transparent-part-of-an-image-to-white/58754682#58754682", "title": "pygame blit the transparent part of an image to white", "body": "<p>As this <a href=\"https://stackoverflow.com/questions/53137497/pygame-surface-with-alpha-not-blitting-transparency\">this answer</a>, you're doing it alright but it need an additional step, where you copy the entire image over a white background and then multiply to get the white out:</p>\n\n<pre><code>sprite_hand_0 = pygame.image.load(\"_0006_Layer-1.png\").convert_alpha()\ntransparent_hand = sprite_hand_0.copy()\ntransparent_hand.fill((255, 255, 255, 100), special_flags=pygame.BLEND_RGBA_MULT)\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 12334467, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-pPl0FiSH7cU/AAAAAAAAAAI/AAAAAAAABjw/dejBhtHpet4/photo.jpg?sz=128", "display_name": "simon lav", "link": "https://stackoverflow.com/users/12334467/simon-lav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 0, "accepted_answer_id": 58754682, "answer_count": 1, "score": 1, "last_activity_date": 1581635316, "creation_date": 1573076237, "last_edit_date": 1581635316, "question_id": 58738861, "link": "https://stackoverflow.com/questions/58738861/pygame-blit-the-transparent-part-of-an-image-to-white", "title": "pygame blit the transparent part of an image to white", "body": "<p>I'm creating a game in pygame and I'm trying to load a png image with part of the image transparent (not 100%), but pygame is blitting that image with a white color instead.</p>\n\n<p>What's happening is that there's a white color when the alpha is not 100%, and fully transparent when the alpha is 100%.</p>\n\n<p><a href=\"https://i.stack.imgur.com/pjzRR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pjzRR.png\" alt=\"enter image description here\"></a></p>\n\n<p>This is the code:</p>\n\n<pre><code>import pygame\nfrom pygame.locals import Color\n\npygame.init()\nwin = pygame.display.set_mode((width,height))\n\nsprite_background = pygame.image.load(\"_0008_back.png\").convert_alpha()\nsprite_arm = pygame.image.load(\"_0007_arm.png\").convert_alpha()\nsprite_hand_0 = pygame.image.load(\"_0006_Layer-1.png\").convert_alpha()\n\nwhile True:\n    win.blit(background, (0,0))\n    win.blit(sprite_hand_0, (50,50))\n</code></pre>\n\n<p>I also see the printing \"libpng warning: iccp: known incorrect sRGB profile\" if its relevant</p>\n"}, {"tags": ["python", "dictionary", "while-loop"], "answers": [{"tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 0, "last_activity_date": 1573076456, "creation_date": 1573076456, "answer_id": 58738903, "question_id": 58738858, "link": "https://stackoverflow.com/questions/58738858/how-to-append-a-dictionary-after-entering-an-empty-string/58738903#58738903", "title": "How to append a dictionary after entering an empty string", "body": "<p>Look at your logic: you insist on reading both values and converting <code>age</code> to int before you check whether it's time to stop.  Fix the logic order.</p>\n\n<pre><code>name = input(\"Name or an empty string to stop: \")\n\nwhile name:\n\n    age = int(input (\"Age: \"))\n    dictionary[name] = age\n    print(dictionary)\n    name = input(\"Name or an empty string to stop: \")\n\nprint(dictionary)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "is_accepted": true, "score": 1, "last_activity_date": 1573076813, "last_edit_date": 1573076813, "creation_date": 1573076458, "answer_id": 58738904, "question_id": 58738858, "link": "https://stackoverflow.com/questions/58738858/how-to-append-a-dictionary-after-entering-an-empty-string/58738904#58738904", "title": "How to append a dictionary after entering an empty string", "body": "<p>You need to think carefully about the order that you want to do things here:</p>\n\n<ol>\n<li>Ask for a name</li>\n<li>If the user entered a name ask for an age</li>\n<li>Insert the name and age into the dictionary</li>\n<li>Repeat steps 1 through 3 until the user doesn't enter a name</li>\n</ol>\n\n<p>This is my first rough draft of how to do this. However, this isn't clear enough to directly translate it into code, so we need to refine our verbal description. The important part is that we need to check the name before even trying to ask for the age. So let's try to do it like this:</p>\n\n<ol>\n<li>Ask for a name</li>\n<li><p>While the name is not blank</p>\n\n<p>a. Ask for an age</p>\n\n<p>b. Insert the name and age into the dictionary</p>\n\n<p>c. Ask for a name</p></li>\n<li><p>Print the dictionary</p></li>\n</ol>\n\n<p>While writing this, I kept in mind how a while loop works and that I need to check the condition in the while loop immediately after asking the user for a name. Also, we print the dictionary after the loop finishes instead of each time the loop iterates.</p>\n"}], "owner": {"reputation": 183, "user_id": 12158629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c35428cb41e9485b523c2b582924787?s=128&d=identicon&r=PG&f=1", "display_name": "Liviosah", "link": "https://stackoverflow.com/users/12158629/liviosah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 58738904, "answer_count": 2, "score": 0, "last_activity_date": 1573076813, "creation_date": 1573076222, "question_id": 58738858, "link": "https://stackoverflow.com/questions/58738858/how-to-append-a-dictionary-after-entering-an-empty-string", "title": "How to append a dictionary after entering an empty string", "body": "<p>My code has to ask for a name and age everytime, and when an empty sting is entered the entered name and age is put into a dictionary.</p>\n\n<p>All I have is this:</p>\n\n<pre><code>askMore = True\ndictionary = {}\nwhile askMore:\n    name = input(\"Name or an empty string to stop: \")\n    age = int(input (\"Age: \"))\n    if not name:\n        print(dictionary)\n        askMore = False\n    else:\n        dictionary[name] = age\n        print(dictionary)\n</code></pre>\n\n<p>Like it works but not the way it suppose to. It prints the answer after I enter the age like so:</p>\n\n<pre><code>Name or an empty string to stop: asdg\nAge: 1\n{'asdg': 1}\nName or an empty string to stop: blaah\nAge: 12\n{'asdg': 1, 'blaah': 12}\n</code></pre>\n\n<p>And then continues to ask</p>\n\n<pre><code>Enter a name or an empty string to stop:\n</code></pre>\n\n<p>But when I enter an empty string it prints out the \"Enter a name or an empty string to stop:\" and then \"Age:\" and then an error.</p>\n\n<p>I want it to print out the whole dictionary of entered names and ages after I enter an empty string, like so:</p>\n\n<pre><code>{'asdg': 1, 'blaah': 12}\n</code></pre>\n\n<p>Not everytime I add a name or age.</p>\n"}, {"tags": ["python", "pandas", "group-by"], "comments": [{"owner": {"reputation": 26154, "user_id": 11884237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7d7q4.png?s=128&g=1", "display_name": "ansev", "link": "https://stackoverflow.com/users/11884237/ansev"}, "edited": false, "score": 0, "creation_date": 1573076143, "post_id": 58738778, "comment_id": 103767572, "body": "<code>df.groupby(level=0)</code>?"}, {"owner": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "edited": false, "score": 0, "creation_date": 1573076416, "post_id": 58738778, "comment_id": 103767657, "body": "Please take a look at <a href=\"https://stackoverflow.com/questions/20109391/how-to-make-good-reproducible-pandas-examples\">How to make good pandas examples</a> and provide sample input and preferred output as text, not as an image, and code for what you&#39;ve tried so far, to make a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "edited": false, "score": 0, "creation_date": 1573076477, "post_id": 58738778, "comment_id": 103767682, "body": "<code>df.groupby(&#39;borough&#39;)</code> would work on higher pandas as well."}], "owner": {"reputation": 1, "user_id": 12334469, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDNz_X1y350NHHRLGYFlGSr-qBiF6kUoO1TjTH_Eig=k-s128", "display_name": "Damon Hong", "link": "https://stackoverflow.com/users/12334469/damon-hong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 22, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1573076452, "creation_date": 1573075830, "last_edit_date": 1573076452, "question_id": 58738778, "link": "https://stackoverflow.com/questions/58738778/how-to-groupby-columns-based-on-respective-index-of-each-row", "title": "How to groupby columns based on respective index of each row?", "body": "<p><img src=\"https://i.stack.imgur.com/yszU1.png\" alt=\"enter image description here\"></p>\n\n<p>I am not sure how to group by my dataframe. I would like to groupby all the neighbourhoods based on each borough. Can anyone help me figure this out?</p>\n\n<p>the column is like this: borough,  neighbourhood_1,    neighbourhood_2 </p>\n"}, {"tags": ["python", "sql-server", "pyodbc"], "comments": [{"owner": {"reputation": 1533, "user_id": 10569027, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dPPb9.jpg?s=128&g=1", "display_name": "GiovaniSalazar", "link": "https://stackoverflow.com/users/10569027/giovanisalazar"}, "edited": false, "score": 0, "creation_date": 1573077595, "post_id": 58738758, "comment_id": 103768091, "body": "is more easy if you use procedures"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 12334425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04a1810454b1f729f0c8c2437ee47bbe?s=128&d=identicon&r=PG&f=1", "display_name": "JWatt", "link": "https://stackoverflow.com/users/12334425/jwatt"}, "edited": false, "score": 0, "creation_date": 1573089975, "post_id": 58739350, "comment_id": 103771200, "body": "Ah, I see. Thank you so much. This is annoyingly close to one of the variations I tried too"}], "tags": [], "owner": {"reputation": 97598, "user_id": 2144390, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6QjmY.jpg?s=128&g=1", "display_name": "Gord Thompson", "link": "https://stackoverflow.com/users/2144390/gord-thompson"}, "is_accepted": true, "score": 0, "last_activity_date": 1573078927, "creation_date": 1573078927, "answer_id": 58739350, "question_id": 58738758, "link": "https://stackoverflow.com/questions/58738758/formatting-for-pyodbc-insert-into-query-sql-server/58739350#58739350", "title": "Formatting for pyodbc INSERT INTO query SQL server", "body": "<p>You're right in thinking that you should be using a parameterized query, but query parameters can only be used to insert column <em>values</em>, not column/table names. So you need to use a mix of dynamic SQL and query parameterization:</p>\n\n<pre class=\"lang-python prettyprint-override\"><code>sql = \"INSERT INTO [%s] (column1, column2, column3) VALUES (?, ?, ?)\" % tablename\ncursor.execute(sql, rowData[0], rowData[1], rowData[2])\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 12334425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04a1810454b1f729f0c8c2437ee47bbe?s=128&d=identicon&r=PG&f=1", "display_name": "JWatt", "link": "https://stackoverflow.com/users/12334425/jwatt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 409, "favorite_count": 0, "accepted_answer_id": 58739350, "answer_count": 1, "score": 0, "last_activity_date": 1573078927, "creation_date": 1573075748, "last_edit_date": 1573076071, "question_id": 58738758, "link": "https://stackoverflow.com/questions/58738758/formatting-for-pyodbc-insert-into-query-sql-server", "title": "Formatting for pyodbc INSERT INTO query SQL server", "body": "<p>I've been having trouble with 1 particular query for the past week. I can't find anything online for this specific situation (or atleast I'm not searching the right thing) but surely this is something somebody has done before. I'm generating a new table on each cycle (with an incrementing ID/key column, and 3 columns for my data) so the table name changes, then putting in some data (all integers). The line causing the error is:</p>\n\n<pre><code>cursor.execute(''' INSERT INTO ? (column1, column2, column3) VALUES (?, ?, ?) ''' , tablename, rowData[0], rowData[1], rowData[2])\n</code></pre>\n\n<p>The error I'm getting is: </p>\n\n<blockquote>\n  <p>('42000', '[42000] [Microsoft][ODBC SQL Server Driver][SQL Server]<strong>Must declare the table variable \"@P1\".</strong> (1087) (SQLExecDirectW); [42000] [Microsoft][ODBC SQL Server Driver][SQL Server]Statement(s) could not be prepared. (8180)')</p>\n</blockquote>\n\n<p>I previously tried using the usual python string formatting, with a dictionary \n<code>'''INSERT INTO %(table)s VALUES %(list0)i, %(list1)i, %(list2)i ''' % {\"table\":tablename, \"list0\":list[0], \"list1\":list[1], \"list2\":list[2]})</code>\n and some variations of the 2 formats but those have resulted in errors too.</p>\n\n<p>Any help would be appreciated.</p>\n"}, {"tags": ["python", "python-3.6", "glade", "pyperclip"], "comments": [{"owner": {"reputation": 7725, "user_id": 4889267, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b86b65464f4070d38bbf2abdbd4f1610?s=128&d=identicon&r=PG&f=1", "display_name": "AK47", "link": "https://stackoverflow.com/users/4889267/ak47"}, "edited": false, "score": 0, "creation_date": 1573075895, "post_id": 58738751, "comment_id": 103767491, "body": "What gets printed if you do <code>pyperclip.paste()</code> ?"}, {"owner": {"reputation": 13209, "user_id": 7414759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b272ce66c7c245c6cbe9a830691daddc?s=128&d=identicon&r=PG&f=1", "display_name": "stovfl", "link": "https://stackoverflow.com/users/7414759/stovfl"}, "edited": false, "score": 0, "creation_date": 1573080723, "post_id": 58738751, "comment_id": 103769097, "body": "Have you verified that <code>text_Field</code> holds what you expected?"}, {"owner": {"reputation": 13, "user_id": 8589289, "user_type": "registered", "profile_image": "https://graph.facebook.com/1733162400045789/picture?type=large", "display_name": "Vittorio Basile", "link": "https://stackoverflow.com/users/8589289/vittorio-basile"}, "edited": false, "score": 0, "creation_date": 1573172346, "post_id": 58738751, "comment_id": 103804966, "body": "Ok so I managed to sort this out by following this guide &#39;<a href=\"https://python-gtk-3-tutorial.readthedocs.io/en/latest/clipboard.html\" rel=\"nofollow noreferrer\">python-gtk-3-tutorial.readthedocs.io/en/latest/clipboard.ht&zwnj;&#8203;ml</a>&#39; only thing now is I&#39;m trying to apply the same thing instead of using a GtkEntry, using a GtkTextView.."}], "owner": {"reputation": 13, "user_id": 8589289, "user_type": "registered", "profile_image": "https://graph.facebook.com/1733162400045789/picture?type=large", "display_name": "Vittorio Basile", "link": "https://stackoverflow.com/users/8589289/vittorio-basile"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 154, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1573123665, "creation_date": 1573075707, "last_edit_date": 1573123665, "question_id": 58738751, "link": "https://stackoverflow.com/questions/58738751/how-do-i-copy-text-to-system-clipboard-in-python-3", "title": "How do I copy text to system clipboard in Python 3", "body": "<p>I'm trying to understand how I can get a program to copy a given text to the system clipboard and then be able to paste that text to any other application systemwide.</p>\n\n<p>I have designed a GUI with Glade and have a GtkEntry and a Button to copy the text, everything works well GUI-wise except I can't get the text in GtkEntry to be copied to the system clipboard when I click the copy button and therefore I am not able to paste it anywhere else.</p>\n\n<p>Here is a bit of the code that I wrote in Python 3.6</p>\n\n<pre><code>def on_copy_Button_clicked(self, button, data=None):\n    text_Field = builder.get_object(\"text_Field\")\n    text_Field = str(text_Field.get_text())\n    pyperclip.copy(text_Field)\n</code></pre>\n\n<blockquote>\n  <p><strong>Copy comment</strong>:  </p>\n\n<pre><code>Traceback (most recent call last): \nFile \"/home/vittorio/Self-made_programs/Python/Simple Copy-Paste/simple copy-paste.py\", line 17, \n    in on_copy_Button_clicked pyperclip.copy(text_Field) \nFile \"/usr/local/lib/python3.6/dist-packages/pyperclip/__init__.py\", line 616, \n    in lazy_load_stub_copy return copy(text) \nFile \"/usr/local/lib/python3.6/dist-packages/pyperclip/__init__.py\", line 150,\n    in copy_gtk cb = gtk.Clipboard() \nFile \"/usr/lib/python3/dist-packages/gi/__init__.py\", line 69, \n    in getattr raise AttributeError(_static_binding_error)\n</code></pre>\n</blockquote>\n"}, {"tags": ["python", "testing", "setup.py"], "answers": [{"comments": [{"owner": {"reputation": 2624, "user_id": 2072516, "user_type": "registered", "accept_rate": 32, "profile_image": "https://i.stack.imgur.com/ld3Nn.jpg?s=128&g=1", "display_name": "Rohit", "link": "https://stackoverflow.com/users/2072516/rohit"}, "edited": false, "score": 1, "creation_date": 1573087779, "post_id": 58739791, "comment_id": 103770756, "body": "That&#39;s exactly what I was hoping to find out (<code>package_dir</code>)! Thanks!"}], "tags": [], "owner": {"reputation": 9376, "user_id": 11138259, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2faec9f4f30093c8b0f5d47a69e551f?s=128&d=identicon&r=PG&f=1", "display_name": "sinoroc", "link": "https://stackoverflow.com/users/11138259/sinoroc"}, "is_accepted": true, "score": 1, "last_activity_date": 1573082161, "creation_date": 1573082161, "answer_id": 58739791, "question_id": 58738742, "link": "https://stackoverflow.com/questions/58738742/running-tests-in-a-directory-thats-a-sibling-to-source/58739791#58739791", "title": "Running tests in a directory that&#39;s a sibling to source", "body": "<p>There seems to be some confusion regarding the <a href=\"https://setuptools.readthedocs.io/en/latest/setuptools.html#using-a-src-layout\" rel=\"nofollow noreferrer\"><code>src</code> layout of your Python project</a>. The setup script should look like this:</p>\n\n<pre><code># ...\nsetuptools.setup(\n    # ...\n    package_dir={'': 'src'},\n    packages=setuptools.find_packages(where='src'),\n    # ...\n)\n# ...\n</code></pre>\n"}], "owner": {"reputation": 2624, "user_id": 2072516, "user_type": "registered", "accept_rate": 32, "profile_image": "https://i.stack.imgur.com/ld3Nn.jpg?s=128&g=1", "display_name": "Rohit", "link": "https://stackoverflow.com/users/2072516/rohit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 58739791, "answer_count": 1, "score": 0, "last_activity_date": 1573082453, "creation_date": 1573075679, "last_edit_date": 1573082453, "question_id": 58738742, "link": "https://stackoverflow.com/questions/58738742/running-tests-in-a-directory-thats-a-sibling-to-source", "title": "Running tests in a directory that&#39;s a sibling to source", "body": "<p>In a shared root, I have a <code>src</code> and a <code>tests</code> folder. When from that root I run <code>pipenv run pytest .</code>, I get the error that my auth module can't be found for this test:</p>\n\n<pre><code>from auth.models.user import User\n\nclass TestUser:\n    def test_valid_pass():\n        assert User.validate_pass(\"abcdefgh\")\n</code></pre>\n\n<p>Someone suggested I create a setup.py, which I did, but when I do, I have to turn my import into from <code>src.auth.models.user import User</code>, but then all my modules require being redone to <code>src.whatever</code>. I can't figure out how to properly path my tests.</p>\n\n<p>This is my setup.py <a href=\"https://gist.github.com/rohitsodhia/7496c8351006c6218ae1dcd2cc90bc49\" rel=\"nofollow noreferrer\">https://gist.github.com/rohitsodhia/7496c8351006c6218ae1dcd2cc90bc49</a></p>\n\n<p>EDIT: Updated my setup.py to set</p>\n\n<pre><code>packges=find_packages(where=\"src/*\"),\n</code></pre>\n\n<p>It seems to now pick up all the files directly under <code>src</code>, but not any of the directories, like <code>src/auth</code>.</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 505, "user_id": 12131815, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vPQ8e.jpg?s=128&g=1", "display_name": "Gorlomi", "link": "https://stackoverflow.com/users/12131815/gorlomi"}, "is_accepted": false, "score": 1, "last_activity_date": 1573075825, "creation_date": 1573075825, "answer_id": 58738777, "question_id": 58738734, "link": "https://stackoverflow.com/questions/58738734/pandas-remove-everything-after-last/58738777#58738777", "title": "Pandas, remove everything after last &#39;_&#39;", "body": "<p>you could try applying lambda as such:</p>\n\n<pre><code>d6['SOURCE_NAME'] = df['SOURCE_NAME'].apply(lambda x: x.split('_')[0])\n</code></pre>\n\n<p>Hope that helps!</p>\n"}, {"tags": [], "owner": {"reputation": 777, "user_id": 6656130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/X42hX.jpg?s=128&g=1", "display_name": "Max Kaha", "link": "https://stackoverflow.com/users/6656130/max-kaha"}, "is_accepted": false, "score": 1, "last_activity_date": 1573075955, "creation_date": 1573075955, "answer_id": 58738807, "question_id": 58738734, "link": "https://stackoverflow.com/questions/58738734/pandas-remove-everything-after-last/58738807#58738807", "title": "Pandas, remove everything after last &#39;_&#39;", "body": "<p>Using rsplit() returns what you want to achieve, you can tell it how many times to split your string.</p>\n\n<pre><code>s = \"Stack_Over_Flow_1234\"\ns.rsplit('_', 1)[0] # Split my string one time and get the first part of it\n</code></pre>\n\n<p>This then returns <code>'Stack_Over_Flow'</code></p>\n"}, {"comments": [{"owner": {"reputation": 506, "user_id": 8998223, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-7vTC9BYRg1g/AAAAAAAAAAI/AAAAAAAAAAs/UW8HZU3oTc4/photo.jpg?sz=128", "display_name": "Manuel Martinez", "link": "https://stackoverflow.com/users/8998223/manuel-martinez"}, "reply_to_user": {"reputation": 1245, "user_id": 8462962, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/78712f98200d7713ac696675bbb57d59?s=128&d=identicon&r=PG&f=1", "display_name": "excelguy", "link": "https://stackoverflow.com/users/8462962/excelguy"}, "edited": false, "score": 0, "creation_date": 1573189940, "post_id": 58738829, "comment_id": 103808493, "body": "Hi @excelguy. <code>n=1</code> is an argument on the <code>pd.Series.str.rsplit</code> method, which has its counterpart on vanilla Python as <code>str.rsplit</code>, with the vanilla argument being <code>maxsplit=1</code>.  These arguments simply limit the number of splits, <b>from the right</b>. Notice that the default value for these arguments is <code>-1</code>, which means <i>do not</i> limit the number of splits. If I say <code>pd.Series.str.rsplit(sep=&#39;_&#39;, n=1)</code> I am saying, split on &#39;<i>&#39; and split on the first &#39;</i>&#39; it finds from the right.  Open a terminal and try <code>&#39;x_k_c_d&#39;.rsplit(sep=&#39;_&#39;, maxsplits=1)</code>. Try different values for <code>maxplits</code>"}], "tags": [], "owner": {"reputation": 506, "user_id": 8998223, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-7vTC9BYRg1g/AAAAAAAAAAI/AAAAAAAAAAs/UW8HZU3oTc4/photo.jpg?sz=128", "display_name": "Manuel Martinez", "link": "https://stackoverflow.com/users/8998223/manuel-martinez"}, "is_accepted": true, "score": 4, "last_activity_date": 1573078627, "last_edit_date": 1573078627, "creation_date": 1573076107, "answer_id": 58738829, "question_id": 58738734, "link": "https://stackoverflow.com/questions/58738734/pandas-remove-everything-after-last/58738829#58738829", "title": "Pandas, remove everything after last &#39;_&#39;", "body": "<p>Use a combination of <code>str.rsplit</code> and <code>str.get</code> for your desired outcome. <code>str.rsplit</code> simply splits a string from the end, while <code>str.get</code> gets the nth element of an iterator within a pd.Series object.</p>\n\n<hr>\n\n<h3>Answer</h3>\n\n<p><code>d6['SOURCE_NAME'] = df['SOURCE_NAME'].str.rsplit('_', n=1).str.get(0)</code></p>\n\n<p>the <code>n</code> argument in <code>rsplit</code> limits number of splits in output so that you only keep everything before the last '_'.</p>\n\n<p>Even though a solution using <code>pd.Series.apply</code> is almost half as fast, I like this one because is more expressive in it's syntax. If you want to use the <code>pd.Series.apply</code> solution (faster) check the timing part!</p>\n\n<p><a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.str.rsplit.html\" rel=\"nofollow noreferrer\">pandas documentation</a>.</p>\n\n<hr>\n\n<h3>Example</h3>\n\n<pre class=\"lang-py prettyprint-override\"><code>strs = ['Stackoverflow_1234',\n        'Stack_Over_Flow_1234',\n        'Stackoverflow',\n        'Stack_Overflow_1234']\ndf = pd.DataFrame(data={'SOURCE_NAME': strs})\n</code></pre>\n\n<p>This results in </p>\n\n<pre><code>print(df)\n            SOURCE_NAME\n0    Stackoverflow_1234\n1  Stack_Over_Flow_1234\n2         Stackoverflow\n3   Stack_Overflow_1234\n</code></pre>\n\n<p>Using the proposed solution:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>df['SOURCE_NAME'].str.rsplit('_', 1).str.get(0)\n\n0      Stackoverflow\n1    Stack_Over_Flow\n2      Stackoverflow\n3     Stack_Overflow\nName: SOURCE_NAME, dtype: object\n</code></pre>\n\n<h3>Time</h3>\n\n<p>Interestingly, using <code>pd.Series.str</code> is not necessarily faster than using <code>pd.Series.apply</code>:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import pandas as pd\n\ndf = pd.DataFrame(data={'SOURCE_NAME': ['stackoverflow_1234_abcd'] * 1000})\n\n%timeit df['SOURCE_NAME'].apply(lambda x: x.rsplit('_', 1)[0])\n497 \u00b5s \u00b1 30.2 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 1000 loops each)\n\n%timeit df['SOURCE_NAME'].str.rsplit('_', n=1).str.get(0)\n1.04 ms \u00b1 4.27 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 1000 loops each)\n\n# increasing the number of rows x 100\ndf = pd.concat([df] * 100)\n\n%timeit df['SOURCE_NAME'].apply(lambda x: x.rsplit('_', 1)[0])\n31.7 ms \u00b1 1.5 ms per loop (mean \u00b1 std. dev. of 7 runs, 10 loops each)\n\n%timeit df['SOURCE_NAME'].str.rsplit('_', n=1).str.get(0)\n84.1 ms \u00b1 6.88 ms per loop (mean \u00b1 std. dev. of 7 runs, 10 loops each)\n\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 33, "user_id": 3013381, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbeb001fab8be995fffc700a6a8e7c4c?s=128&d=identicon&r=PG&f=1", "display_name": "ByrnesW", "link": "https://stackoverflow.com/users/3013381/byrnesw"}, "is_accepted": false, "score": 1, "last_activity_date": 1573076137, "creation_date": 1573076137, "answer_id": 58738837, "question_id": 58738734, "link": "https://stackoverflow.com/questions/58738734/pandas-remove-everything-after-last/58738837#58738837", "title": "Pandas, remove everything after last &#39;_&#39;", "body": "<p>You can use the string.split('_') function to split the string into a list of substrings around every underscore, then recombine them without the last element. Here is a snippet using your examples:</p>\n\n<pre><code>a = [\"Stackoverflow_1234\", \"Stack_Over_Flow_1234\", \"Stackoverflow\", \"Stack_Overflow_1234\"]\n\nfor e in a:\n\n    # Split the string into a list, separated at '_'\n    splitStr = e.split(\"_\")\n\n    # If there is only 1 element, we can use it directly\n    if len(splitStr) == 1:\n        print(splitStr[0])\n\n    # Slice off the final substring and join the remaining \n    # substrings back together with underscores\n    else:\n        print(\"_\".join(splitStr[:-1]))\n</code></pre>\n"}], "owner": {"reputation": 1245, "user_id": 8462962, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/78712f98200d7713ac696675bbb57d59?s=128&d=identicon&r=PG&f=1", "display_name": "excelguy", "link": "https://stackoverflow.com/users/8462962/excelguy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1083, "favorite_count": 0, "accepted_answer_id": 58738829, "answer_count": 4, "score": 1, "last_activity_date": 1573078627, "creation_date": 1573075604, "question_id": 58738734, "link": "https://stackoverflow.com/questions/58738734/pandas-remove-everything-after-last", "title": "Pandas, remove everything after last &#39;_&#39;", "body": "<p>I have the following kind of strings in my column seen below. I would like to parse out everything after the last <code>_</code> of each string, and if there is no <code>_</code> then leave the string as-is. (as my below try will just exclude strings with no <code>_</code>)</p>\n\n<p>so far I have tried below, seen here: <a href=\"https://stackoverflow.com/questions/40705480/python-pandas-remove-everything-after-a-delimiter-in-a-string\">Python pandas: remove everything after a delimiter in a string</a> . But it is just parsing out everything after first <code>_</code></p>\n\n<p><code>d6['SOURCE_NAME'] = d6['SOURCE_NAME'].str.split('_').str[0]</code></p>\n\n<p>Here are some example strings in my SOURCE_NAME column.</p>\n\n<pre><code>Stackoverflow_1234\nStack_Over_Flow_1234\nStackoverflow\nStack_Overflow_1234\n</code></pre>\n\n<p>Expected:</p>\n\n<pre><code>Stackoverflow\nStack_Over_Flow\nStackoverflow\nStack_Overflow\n</code></pre>\n\n<p>any help would be appreciated.</p>\n"}, {"tags": ["python"], "answers": [{"tags": [], "owner": {"reputation": 103812, "user_id": 320726, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/02041b18199678d1f02e6d5040dbb907?s=128&d=identicon&r=PG", "display_name": "6502", "link": "https://stackoverflow.com/users/320726/6502"}, "is_accepted": false, "score": 0, "last_activity_date": 1573680814, "creation_date": 1573680814, "answer_id": 58845949, "question_id": 58738725, "link": "https://stackoverflow.com/questions/58738725/is-there-a-way-to-adjust-excel-csv-cells-from-a-yyyy-format-to-a-dd-mm-yyy-forma/58845949#58845949", "title": "Is there a way to adjust Excel csv cells from a yyyy format to a dd.mm.yyy format?", "body": "<p><code>data.insert</code> insert the elements but returns <code>None</code>. You should change</p>\n\n<pre><code> data = data.insert(0, anfang)\n</code></pre>\n\n<p>to</p>\n\n<pre><code> data.insert(0, anfang)\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 12334416, "user_type": "registered", "profile_image": "https://graph.facebook.com/2646485968741784/picture?type=large", "display_name": "Phani Kr&#252;ger", "link": "https://stackoverflow.com/users/12334416/phani-kr%c3%bcger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 24, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1573680814, "creation_date": 1573075571, "last_edit_date": 1573680498, "question_id": 58738725, "link": "https://stackoverflow.com/questions/58738725/is-there-a-way-to-adjust-excel-csv-cells-from-a-yyyy-format-to-a-dd-mm-yyy-forma", "title": "Is there a way to adjust Excel csv cells from a yyyy format to a dd.mm.yyy format?", "body": "<p>I have a Excel csv file with different columns with the German format <code>dd.mm.yyy</code>. I would like to transfer them to the Format yyyy and write those adjusted columns in a new file. </p>\n\n<p>My problem is the handling of cells with the format yyyy. </p>\n\n<pre><code>anfang = str('01.01')\n\nwith open(\"../data/Lauritz1.csv\", \"r\") as file:\n    for line in file:            \n        data = line.strip().split(\";\")\n        for i in data:\n            if len(i) == 4:\n                data = data.insert(0,anfang)\n                daten = data[0] + \" \" + str(data[3][6:10]) + \" \" + str(data[6]                                                                                 [6:10]) + \" \" + str(data[7][6:10]) + \" \" + str(data[8][6:10]) + \" \" + str(data[10][6:10]) + \" \" + str(data[11][6:10])\n\nprint(daten)\n</code></pre>\n\n<p>I thought I could insert 4 additional Digits to those cells with a yyyy Format to handle them as those with the dd.mm.yyyy Format. </p>\n\n<p>I get after all the </p>\n\n<blockquote>\n  <p>TypeError: 'NoneType' object is not subscribable </p>\n</blockquote>\n\n<p>and I have no idea why.</p>\n"}, {"tags": ["python", "python-3.x", "performance", "parallel-processing", "multiprocessing"], "comments": [{"owner": {"reputation": 5045, "user_id": 7688996, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HKydk.png?s=128&g=1", "display_name": "Mohd", "link": "https://stackoverflow.com/users/7688996/mohd"}, "edited": false, "score": 3, "creation_date": 1573076135, "post_id": 58738716, "comment_id": 103767569, "body": "Your code gives expected output, are you sure your <code>cpu_count()</code> is 4?"}, {"owner": {"reputation": 290, "user_id": 9690045, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oA7vH.jpg?s=128&g=1", "display_name": "SMMousaviSP", "link": "https://stackoverflow.com/users/9690045/smmousavisp"}, "reply_to_user": {"reputation": 5045, "user_id": 7688996, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HKydk.png?s=128&g=1", "display_name": "Mohd", "link": "https://stackoverflow.com/users/7688996/mohd"}, "edited": false, "score": 0, "creation_date": 1573077114, "post_id": 58738716, "comment_id": 103767905, "body": "@Mohd My <code>cpu_count()</code> is 8 ! and why do you think the output is normal?"}, {"owner": {"reputation": 5045, "user_id": 7688996, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HKydk.png?s=128&g=1", "display_name": "Mohd", "link": "https://stackoverflow.com/users/7688996/mohd"}, "edited": false, "score": 2, "creation_date": 1573077176, "post_id": 58738716, "comment_id": 103767933, "body": "I meant it runs fine on my pc"}, {"owner": {"reputation": 290, "user_id": 9690045, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oA7vH.jpg?s=128&g=1", "display_name": "SMMousaviSP", "link": "https://stackoverflow.com/users/9690045/smmousavisp"}, "reply_to_user": {"reputation": 5045, "user_id": 7688996, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HKydk.png?s=128&g=1", "display_name": "Mohd", "link": "https://stackoverflow.com/users/7688996/mohd"}, "edited": false, "score": 0, "creation_date": 1573077425, "post_id": 58738716, "comment_id": 103768040, "body": "@Mohd May I ask what is your OS and which version of python do you use? I&#39;m in windows 10 and using python 3.6.4"}, {"owner": {"reputation": 5045, "user_id": 7688996, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HKydk.png?s=128&g=1", "display_name": "Mohd", "link": "https://stackoverflow.com/users/7688996/mohd"}, "edited": false, "score": 1, "creation_date": 1573077594, "post_id": 58738716, "comment_id": 103768090, "body": "Ubuntu 18.04, python 3.6.8"}, {"owner": {"reputation": 290, "user_id": 9690045, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oA7vH.jpg?s=128&g=1", "display_name": "SMMousaviSP", "link": "https://stackoverflow.com/users/9690045/smmousavisp"}, "reply_to_user": {"reputation": 5045, "user_id": 7688996, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HKydk.png?s=128&g=1", "display_name": "Mohd", "link": "https://stackoverflow.com/users/7688996/mohd"}, "edited": false, "score": 0, "creation_date": 1573078399, "post_id": 58738716, "comment_id": 103768363, "body": "@Mohd You&#39;re right, I&#39;ve tested it on my MacBook and it worked as I expected. Actually this is not my real problem, I have a much more complex code that I&#39;m trying to parallelize and it didn&#39;t work well and I thought it was the code!"}, {"owner": {"reputation": 3830, "user_id": 1176061, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a9fdf3c78b23503dd8529db28e08e84?s=128&d=identicon&r=PG", "display_name": "DeadChex", "link": "https://stackoverflow.com/users/1176061/deadchex"}, "edited": false, "score": 1, "creation_date": 1573080911, "post_id": 58738716, "comment_id": 103769143, "body": "You may be running to an issue where the output isn&#39;t deterministic and is based on the whim of the thread scheduler, you have to be very careful about not assuming any part of one thread will finish before another part unless you explicitly enforce it"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 3666197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79fc6c23061326c7e6a6f82a1663634b?s=128&d=identicon&r=PG", "display_name": "user3666197", "link": "https://stackoverflow.com/users/3666197/user3666197"}, "edited": false, "score": 0, "creation_date": 1573129960, "post_id": 58741602, "comment_id": 103786100, "body": "Are you sure? If there were a Thread-based backend used ( <b>not</b> seen in the source-code ) Python <b>will never permit <code>[PARALLEL]</code> code-execution</b> due to central GIL-lock re-introducing a pure-<code>[SERIAL]</code> one-step-after-another for any amount of <code>mp.Pool</code>&#39;s thread-based workers ( re-sequenced by GIL-lock policing for principally avoiding any concurrency-related collision - this was the Guido Rossum&#39;s design decision and will remain such ) In process-based backend, Windows spawn full copies of python interpreter state, while Linux/MacOS use fork, forkserver, other means, depending on version."}, {"owner": {"reputation": 506, "user_id": 2784303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2ab1d8d0530485d1027cc9f5bce2664?s=128&d=identicon&r=PG", "display_name": "Bill Huneke", "link": "https://stackoverflow.com/users/2784303/bill-huneke"}, "reply_to_user": {"reputation": 1, "user_id": 3666197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79fc6c23061326c7e6a6f82a1663634b?s=128&d=identicon&r=PG", "display_name": "user3666197", "link": "https://stackoverflow.com/users/3666197/user3666197"}, "edited": false, "score": 0, "creation_date": 1573148830, "post_id": 58741602, "comment_id": 103796529, "body": "I&#39;m never really sure of anything.... :)  But from your comment, I&#39;m not sure which part you are questioning. Based on the documentation of the multiprocessing module, I do believe that mp provides parallel execution, unencumbered by the GIL.  Or, are you wondering whether Windows&#39; implementation (with &quot;full copies&quot; of interpreter) would really constitute parallel access of a shared resource? If I had a Windows box, maybe I would write up a toy script to test this, but even that would not be conclusive...   docs: <a href=\"https://docs.python.org/3.8/library/multiprocessing.html\" rel=\"nofollow noreferrer\">docs.python.org/3.8/library/multiprocessing.html</a>"}, {"owner": {"reputation": 506, "user_id": 2784303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2ab1d8d0530485d1027cc9f5bce2664?s=128&d=identicon&r=PG", "display_name": "Bill Huneke", "link": "https://stackoverflow.com/users/2784303/bill-huneke"}, "reply_to_user": {"reputation": 1, "user_id": 3666197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79fc6c23061326c7e6a6f82a1663634b?s=128&d=identicon&r=PG", "display_name": "user3666197", "link": "https://stackoverflow.com/users/3666197/user3666197"}, "edited": false, "score": 0, "creation_date": 1573444604, "post_id": 58741602, "comment_id": 103871964, "body": "Ouch. I guess I&#39;ve learned my lesson on SO - never say you are not sure.  LOL, my answer was unaccepted and down voted.  Your call o/c, but what I said was fully accurate and is the correct answer.  The details mentioned in the new answer (how many cores/cpus do you have, does Python on your OS use fork or spawn, etc) are all irrelevant. &quot;Affinity&quot; is especially irrelevant. Lastly, the comment about blocking completely misunderstands. Yes the map call blocks. Of course it does.  It joins all the subs. But the subs run in parallel, not in series. If in series, you would see 4 second run time"}], "tags": [], "owner": {"reputation": 506, "user_id": 2784303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2ab1d8d0530485d1027cc9f5bce2664?s=128&d=identicon&r=PG", "display_name": "Bill Huneke", "link": "https://stackoverflow.com/users/2784303/bill-huneke"}, "is_accepted": false, "score": 0, "last_activity_date": 1573148993, "last_edit_date": 1573148993, "creation_date": 1573097600, "answer_id": 58741602, "question_id": 58738716, "link": "https://stackoverflow.com/questions/58738716/python-multiprocessing-pool-map-doesnt-work-parallel/58741602#58741602", "title": "Python multiprocessing pool.map doesn&#39;t work parallel", "body": "<p>I suspect you may be experiencing a common gotcha in multiprocessing: </p>\n\n<p><strong>Printing to shared logs/screen from multiple threads (or processes) of execution (simultaneously) can produce confusing results!</strong></p>\n\n<p>This also explains why you see different behavior depending on the OS. Different OS's will have resolved this in slightly different ways. The underlying buffering scheme, access control , etc. will make a difference.</p>\n\n<p>You probably <em>are</em> getting the multiprocessing you expect, but your printout may be misleading.</p>\n\n<p>I know you provided this code as an example in order to demonstrate a real world problem. So, just return to your original code and consider the above oft-overlooked fact again: printing (or logging to file) is accessing a shared resource. You may need locking or queueing or other techniques. Without knowing the details of your real problem, nothing more can be suggested.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 3666197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79fc6c23061326c7e6a6f82a1663634b?s=128&d=identicon&r=PG", "display_name": "user3666197", "link": "https://stackoverflow.com/users/3666197/user3666197"}, "is_accepted": true, "score": 1, "last_activity_date": 1573225126, "last_edit_date": 1573225126, "creation_date": 1573154740, "answer_id": 58755642, "question_id": 58738716, "link": "https://stackoverflow.com/questions/58738716/python-multiprocessing-pool-map-doesnt-work-parallel/58755642#58755642", "title": "Python multiprocessing pool.map doesn&#39;t work parallel", "body": "<p>The <strong><code>multiprocessing.Pool()</code></strong> documentation <sub> ( since ever, <a href=\"https://docs.python.org/2.7/library/multiprocessing.html#module-multiprocessing.pool\" rel=\"nofollow noreferrer\">Py27 incl.</a> )</sub> is clear in <strong>intentionally blocking</strong> in processing the queue-of-calls as created by the iterator-generated set of the just -4- calls, produced sequentially from the above posted example.</p>\n\n<p>The <strong><code>multiprocessing</code></strong>-module documentation says this about its <strong><code>Pool.map()</code></strong> method:</p>\n\n<blockquote>\n  <p><code>map(func, iterable[, chunksize])</code><br>\n  <br>\n      A parallel equivalent of the <code>map()</code> built-in function (it supports only one iterable argument though). <strong>It blocks until the result is ready.</strong></p>\n</blockquote>\n\n<p>This should be the observed behaviour, whereas different instantiation methods would accrue different add-on ( process copying-related ) overhead costs.</p>\n\n<p>Anyway, the <code>mp.cpu_count()</code> need <strong>not</strong> be the number of CPU-cores any such dispatched <code>.Pool()</code>-instance workers' tasks  will get on to get executed, because of the O/S ( user/process-related restriction policies ) settings of affinity:</p>\n\n<p>Your code will have to \"obey\" the sub-set of those CPU-cores, that are permitted to be harnessed by any such <code>multiprocessing</code>-requested sub-process, <br>the number of which is not higher than: <strong><code>len( os.sched_getaffinity( 0 ) )</code></strong></p>\n\n<hr>\n\n<h2>The Best Next Step : re-evaluate your whole code-execution eco-system</h2>\n\n<pre><code>import multiprocessing as mp                                            # file: ~/p/StackOverflow_multiprocessing.py\nimport time, os, platform, inspect                                      # https://stackoverflow.com/questions/58738716/python-multiprocessing-pool-map-doesnt-work-parallel/58755642\n\ndef test_function( i = -1 ):\n    pass;                                                                                                  thisframerecord = inspect.stack()[0] # 0 represents this line\n    pass;                                                                                                callerframerecord = inspect.stack()[1] # 1 represents line at caller\n    pass;                                                                 _INFO_ = inspect.getframeinfo(   thisframerecord[0] )\n    pass;                                                               _CALLER_ = inspect.getframeinfo( callerframerecord[0] )\n    print( \"{0:_&gt;30.10f} ::\".format(              time.monotonic() ),\n           \"PID:{0:} with PPID:{1:} runs\".format( os.getpid(), os.getppid() ),\n           \"{0:}( i = {2:} )-LINE[{1:_&gt;4d}],\".format(                     _INFO_.function,   _INFO_.lineno, i ),\n           \"invoked from {0:}()-LINE[{1:_&gt;4d}]\".format(                 _CALLER_.function, _CALLER_.lineno )\n            )\n    time.sleep( 10 )\n    pass;                                                                                                  thisframerecord = inspect.stack()[0] # 0 represents this line\n    pass;                                                                 _INFO_ = inspect.getframeinfo(   thisframerecord[0] )                 # 1 represents line at caller\n    print( \"{0:_&gt;30.10f} ::\".format(              time.monotonic() ),\n           \"PID:{0:} with PPID:{1:} ends\".format( os.getpid(), os.getppid() ),\n           \"{0:}( i = {2:} )-LINE[{1:_&gt;4d}],\".format(                     _INFO_.function,   _INFO_.lineno, i )\n            )\n\nif __name__ == '__main__':\n    print( \"{0:} cores reported by {1:}\".format( mp.cpu_count(), \"mp.cpu_count()\" ) )\n    print( \"{0:} cores permit'd by {1:}\".format( os.sched_getaffinity(0), \"os.sched_getaffinity(0)\" ) )\n    print( \"O/S sub-process instantiation methods {0:} available\".format( mp.get_all_start_methods() ) )\n    print( \"O/S will use this instantiation method {0:}\".format( mp.get_start_method() ) )\n    print( \"{0:_&gt;30.10f} :: will call .Pool()\".format( time.monotonic() ) )\n    #------mp.Pool()-----------------------------------------------------\n    pool = mp.Pool( mp.cpu_count() )\n    print( \"{0:_&gt;30.10f} :: pool.map() to be called\".format( time.monotonic() ) )\n    #---.map()--------------------------------------?\n    #---.map(                                       ?\n    pool.map( test_function, [i for i in range(4) ] )\n    #---.map(                                       ?\n    #---.map()--------------------------------------?\n    print( \"{0:_&gt;30.10f} :: pool.map() call RETd\".format( time.monotonic() ) )\n    pool.close()\n    #---.close()\n    print( \"{0:_&gt;30.10f} :: pool.close()-d\".format( time.monotonic() ) )\n    pool.join()\n    #---.join()\n    print( \"{0:_&gt;30.10f} :: pool.join()-d\".format( time.monotonic()          ) )\n    print( \"EXECUTED on {0:}\".format(              platform.version()        ) )\n    print( \"USING: python-{0:}:\".format(           platform.python_version() ) )\n</code></pre>\n\n<hr>\n\n<p>might look about something like this on linux-class O/S:</p>\n\n<pre><code>(py3) Fri Nov 08 14:26:40 :~$ python ~/p/StackOverflow_multiprocessing.py\n8 cores reported by mp.cpu_count()\n{0, 1, 2, 3} cores permit'd by os.sched_getaffinity(0)\nO/S sub-process instantiation methods ['fork', 'spawn', 'forkserver'] available\nO/S will use this instantiation method fork\n____________1284931.1678911699 :: will call .Pool()\n____________1284931.2063829789 :: pool.map() to be called\n____________1284931.2383207241 :: PID:15848 with PPID:15847 runs test_function( i = 0 )-LINE[___7], invoked from mapstar()-LINE[__44]\n____________1284931.2506985001 :: PID:15849 with PPID:15847 runs test_function( i = 1 )-LINE[___7], invoked from mapstar()-LINE[__44]\n____________1284931.2614207701 :: PID:15851 with PPID:15847 runs test_function( i = 2 )-LINE[___7], invoked from mapstar()-LINE[__44]\n____________1284931.2671745829 :: PID:15850 with PPID:15847 runs test_function( i = 3 )-LINE[___7], invoked from mapstar()-LINE[__44]\n____________1284941.2504994699 :: PID:15848 with PPID:15847 ends test_function( i = 0 )-LINE[__16],\n____________1284941.2550825749 :: PID:15849 with PPID:15847 ends test_function( i = 1 )-LINE[__16],\n____________1284941.2698363690 :: PID:15851 with PPID:15847 ends test_function( i = 2 )-LINE[__16],\n____________1284941.2776791099 :: PID:15850 with PPID:15847 ends test_function( i = 3 )-LINE[__16],\n____________1284941.2780045229 :: pool.map() call RETd\n____________1284941.2780527000 :: pool.close()-d\n____________1284941.3343055181 :: pool.join()-d\n\nEXECUTED on #1 SMP oSname M.m.n-o.p (YYYY-MM-DD)\nUSING: python-3.5.6:\n</code></pre>\n\n<hr>\n\n<p>Check the hidden detail - <strong>what your O/S uses</strong> for invoking the <code>test_function()</code> - the <strong><code>mapstar()</code></strong> <em>( not being a sure choice universally )</em> was the local SMP-linux-class O/S's choice for its default sub-process instantiation method, performed via '<strong><em><code>fork</code></em></strong>'.</p>\n"}], "owner": {"reputation": 290, "user_id": 9690045, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oA7vH.jpg?s=128&g=1", "display_name": "SMMousaviSP", "link": "https://stackoverflow.com/users/9690045/smmousavisp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1176, "favorite_count": 2, "accepted_answer_id": 58755642, "answer_count": 2, "score": -1, "last_activity_date": 1573225126, "creation_date": 1573075526, "last_edit_date": 1573217775, "question_id": 58738716, "link": "https://stackoverflow.com/questions/58738716/python-multiprocessing-pool-map-doesnt-work-parallel", "title": "Python multiprocessing pool.map doesn&#39;t work parallel", "body": "<p>I wrote a simple parallel python program</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import multiprocessing as mp\nimport time\n\ndef test_function(i):\n    print(\"function starts\" + str(i))\n    time.sleep(1)\n    print(\"function ends\" + str(i))\n\nif __name__ == '__main__':\n    pool = mp.Pool(mp.cpu_count())\n    pool.map(test_function, [i for i in range(4)])\n    pool.close()\n    pool.join()\n</code></pre>\n\n<p>What I expect to see in the output:</p>\n\n<pre><code>function starts0\nfunction starts2\nfunction starts1\nfunction starts3\nfunction ends1\nfunction ends3\nfunction ends2\nfunction ends0\n</code></pre>\n\n<p>What I actually see:</p>\n\n<pre><code>function starts1\nfunction ends1\nfunction starts3\nfunction ends3\nfunction starts2\nfunction ends2\nfunction starts0\nfunction ends0\n</code></pre>\n\n<p>When I'm looking in the output It's look like <code>pool.map</code> running a function and waits till it's done and then run another, but when I calculate the duration of whole program its about 2 seconds and it's impossible unless the <code>test_function</code> is running parallel</p>\n\n<hr>\n\n<h2>Edit:</h2>\n\n<p>This code is working well in MacOS and Linux but It's not showing the expected output on <strong>windows 10</strong>. python version is 3.6.4</p>\n"}, {"tags": ["python", "numpy", "machine-learning", "scikit-learn", "nlp"], "comments": [{"owner": {"reputation": 741, "user_id": 3706723, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w17DE.jpg?s=128&g=1", "display_name": "prhmma", "link": "https://stackoverflow.com/users/3706723/prhmma"}, "edited": false, "score": 0, "creation_date": 1573075703, "post_id": 58738708, "comment_id": 103767426, "body": "try this <code>xeval=[[&quot;I like it okay&quot;]]</code>"}, {"owner": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "edited": false, "score": 2, "creation_date": 1573076056, "post_id": 58738708, "comment_id": 103767537, "body": "Your classifier is trained on numeric data, and it needs the input to be numeric to predict. Use your trained vectorizer to <code>.transform()</code> the input before you try to predict on it"}], "answers": [{"tags": [], "owner": {"reputation": 4480, "user_id": 10232932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec8ac182af86808de7f193677348c87d?s=128&d=identicon&r=PG&f=1", "display_name": "PV8", "link": "https://stackoverflow.com/users/10232932/pv8"}, "is_accepted": false, "score": 0, "last_activity_date": 1573115436, "creation_date": 1573115436, "answer_id": 58744700, "question_id": 58738708, "link": "https://stackoverflow.com/questions/58738708/how-to-predict-the-label-after-training-the-dataset-in-nlp/58744700#58744700", "title": "How to predict the label after training the dataset in NLP", "body": "<p>As G.Anderson has already mentioned your classfier is trained with numerical data, as you used:</p>\n\n<pre><code>X=cv.fit_transform(corpus).toarray()\n</code></pre>\n\n<p>and CountVectorizer is made for this.</p>\n\n<p>To use it, you also have to use the trained CountVectorizer, you have to implement:</p>\n\n<pre><code># Predicting the Test set results\nxeval=[\"I like it okay\"]\nxeval_numeric = cv.transform(xeval).toarray() \nprediction=classifier.predict(xeval_numeric)\n</code></pre>\n"}], "owner": {"reputation": 881, "user_id": 10291435, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa925201987d21a2dd54f7609930773b?s=128&d=identicon&r=PG&f=1", "display_name": "Mee", "link": "https://stackoverflow.com/users/10291435/mee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 125, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1573115436, "creation_date": 1573075481, "question_id": 58738708, "link": "https://stackoverflow.com/questions/58738708/how-to-predict-the-label-after-training-the-dataset-in-nlp", "title": "How to predict the label after training the dataset in NLP", "body": "<p>I am trying to do sentiment analysis on comments; the data set contains two main colums: the first one is \"review\" which has the reviews of the users, and the second colum is whether it is positive or negative; I got a template from a source to prepocessing the data, the training and testing is okay. However, I want to input a text and want the model to predict whether it is positive or negative. I tried so many forms of the input: string only, list of strings, numpy to array etc. However, I always got erros; any ideas how to input the data to be predicted?\nhere's my code:</p>\n\n<pre><code>import matplotlib.pyplot as plt\nimport pandas as pd\n\n# Importing the dataset\ndataset = pd.read_csv('Restaurant_Reviews.tsv', delimiter='\\t',quoting=3)\n\nimport re \nimport nltk\nnltk.download('stopwords')\nfrom nltk.corpus import stopwords\nfrom nltk.stem.porter import PorterStemmer\ncorpus=[]\nfor i in range(0,1000):\n    review=re.sub('[^a-zA-Z]',' ',dataset['Review'][i])\n    review.lower()\n    review=review.split()\n    ps=PorterStemmer()\n    review=[ps.stem(word) for word in review if not word in set(stopwords.words('english'))]\n    review=' '.join(review)\n    corpus.append(review)\n\n#the bag of word\nfrom sklearn.feature_extraction.text import CountVectorizer\ncv=CountVectorizer(max_features=1500)\nX=cv.fit_transform(corpus).toarray()\ny=dataset.iloc[:,1].values\n\nfrom sklearn.model_selection import train_test_split\nX_train, X_test, y_train, y_test = train_test_split(X, y, test_size = 0.2, random_state = 0)\n\n\n\n# Fitting Naive Bayes to the Training set\nfrom sklearn.naive_bayes import GaussianNB\nclassifier = GaussianNB()\nclassifier.fit(X_train, y_train)\n\n# Predicting the Test set results\nxeval=[\"I like it okay\"]\nprediction=classifier.predict(xeval)```\n\nthe error in this case is:\nExpected 2D array, got 1D array instead:\narray=['I like it okay'].\nReshape your data either using array.reshape(-1, 1) if your data has a single feature or array.reshape(1, -1) if it contains a single sample.\n</code></pre>\n"}, {"tags": ["python", "kivy"], "comments": [{"owner": {"reputation": 20381, "user_id": 7254633, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XCPaMN6qzA0/AAAAAAAAAAI/AAAAAAAAADs/o9igiVGFyK0/photo.jpg?sz=128", "display_name": "John Anderson", "link": "https://stackoverflow.com/users/7254633/john-anderson"}, "edited": false, "score": 1, "creation_date": 1573075943, "post_id": 58738675, "comment_id": 103767501, "body": "You need to use the assigned <code>name</code> of the <code>Screen</code> in your <code>screen_manager.current =</code>. The names you have assigned are &quot;1&quot; and &quot;2&quot;. So the line should look like <code>screen_manager.current = &quot;1&quot;</code>"}, {"owner": {"reputation": 20381, "user_id": 7254633, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XCPaMN6qzA0/AAAAAAAAAAI/AAAAAAAAADs/o9igiVGFyK0/photo.jpg?sz=128", "display_name": "John Anderson", "link": "https://stackoverflow.com/users/7254633/john-anderson"}, "edited": false, "score": 0, "creation_date": 1573076094, "post_id": 58738675, "comment_id": 103767556, "body": "You cannot directly change `current_screen&#39;."}, {"owner": {"reputation": 15, "user_id": 5723035, "user_type": "registered", "profile_image": "https://graph.facebook.com/1005036556230520/picture?type=large", "display_name": "cemicel", "link": "https://stackoverflow.com/users/5723035/cemicel"}, "reply_to_user": {"reputation": 20381, "user_id": 7254633, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XCPaMN6qzA0/AAAAAAAAAAI/AAAAAAAAADs/o9igiVGFyK0/photo.jpg?sz=128", "display_name": "John Anderson", "link": "https://stackoverflow.com/users/7254633/john-anderson"}, "edited": false, "score": 0, "creation_date": 1573076433, "post_id": 58738675, "comment_id": 103767664, "body": "@JohnAnderson  Yep, You are right, but I just corrected the name to be just &quot;1&quot;, nothing changed. <i>You cannot directly change `current_screen&#39;</i> - but what I can do ? Actually, I would use the kv language for this purpose, but I found nothing about kv lang and keyboard events."}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 5723035, "user_type": "registered", "profile_image": "https://graph.facebook.com/1005036556230520/picture?type=large", "display_name": "cemicel", "link": "https://stackoverflow.com/users/5723035/cemicel"}, "edited": false, "score": 0, "creation_date": 1573077778, "post_id": 58739112, "comment_id": 103768151, "body": "Thanks you very much!"}], "tags": [], "owner": {"reputation": 1887, "user_id": 5985925, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/22mM6.png?s=128&g=1", "display_name": "noEmbryo", "link": "https://stackoverflow.com/users/5985925/noembryo"}, "is_accepted": true, "score": 1, "last_activity_date": 1573077527, "creation_date": 1573077527, "answer_id": 58739112, "question_id": 58738675, "link": "https://stackoverflow.com/questions/58738675/kivy-screenmanager-does-not-switch-screens-pure-python/58739112#58739112", "title": "Kivy ScreenManager does not switch screens (pure python)", "body": "<p>What you must manipulate is <code>screen_manager.current</code> and not <code>screen_manager.current_screen</code>.<br>\nYou must also refer to the <code>screen</code> by its name.</p>\n\n<p>Here is your code, working:</p>\n\n<pre><code>IMAGE_SIZE = (640, 480)\n\n\nclass MainScreen(Screen):\n\n    def __init__(self, path, **kwargs):\n        super(MainScreen, self).__init__(**kwargs)\n        Window.size = (IMAGE_SIZE[0], IMAGE_SIZE[1])\n\n        with self.canvas:\n            self.bg = Image(source=path)\n            self.bind(pos=self.update_bg)\n            self.bind(size=self.update_bg)\n\n        self._keyboard = Window.request_keyboard(self._keyboard_closed, self, 'text')\n\n        self._keyboard.bind(on_key_down=self._on_keyboard_down)\n\n    def update_bg(self, *args):\n        self.bg.pos = self.pos\n        self.bg.size = self.size\n\n    def _keyboard_closed(self):\n        print('My keyboard have been closed!')\n        self._keyboard.unbind(on_key_down=self._on_keyboard_down)\n        self._keyboard = None\n\n    def _on_keyboard_down(self, keyboard, keycode, text, modifiers):\n        if keycode[1] == 'escape':\n            keyboard.release()\n        if keycode[1] == 'enter':\n            print('before enter', screen_manager.current)\n            screen_manager.transition.direction = 'left'\n            screen_manager.current = \"1\"\n            print('after enter', screen_manager.current)\n\n        return True\n\n\nscreen_manager = None\n\nscree_1 = MainScreen(path_1, name=\"1\")\nscree_2 = MainScreen(path_2, name=\"2\")\n\n\nclass MyApp(App):\n\n    def build(self):\n        global screen_manager\n        screen_manager = ScreenManager()\n\n        screen_manager.add_widget(scree_2)\n        screen_manager.add_widget(scree_1)\n\n        return screen_manager\n\n\nif __name__ == '__main__':\n    MyApp().run()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 15, "user_id": 5723035, "user_type": "registered", "profile_image": "https://graph.facebook.com/1005036556230520/picture?type=large", "display_name": "cemicel", "link": "https://stackoverflow.com/users/5723035/cemicel"}, "is_accepted": false, "score": 0, "last_activity_date": 1573077850, "creation_date": 1573077850, "answer_id": 58739172, "question_id": 58738675, "link": "https://stackoverflow.com/questions/58738675/kivy-screenmanager-does-not-switch-screens-pure-python/58739172#58739172", "title": "Kivy ScreenManager does not switch screens (pure python)", "body": "<p>After some digging, I found another answer.\nI can also use: </p>\n\n<pre><code>            screen_manager.switch_to(screen_1, direction='left')\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 5723035, "user_type": "registered", "profile_image": "https://graph.facebook.com/1005036556230520/picture?type=large", "display_name": "cemicel", "link": "https://stackoverflow.com/users/5723035/cemicel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 58739112, "answer_count": 2, "score": 0, "last_activity_date": 1573077850, "creation_date": 1573075330, "last_edit_date": 1573076841, "question_id": 58738675, "link": "https://stackoverflow.com/questions/58738675/kivy-screenmanager-does-not-switch-screens-pure-python", "title": "Kivy ScreenManager does not switch screens (pure python)", "body": "<p>I'm quite new to the Kivy and I have a problem which I couldn't resolve by myself.\nI have a simple app where i want to switch between images (MainScreen).</p>\n\n<p>This is the code:</p>\n\n<pre><code>IMAGE_SIZE = (640, 480)\n\nclass MainScreen(Screen):\n\n    def __init__(self, path, **kwargs):\n        super(MainScreen, self).__init__(**kwargs)\n        Window.size = (IMAGE_SIZE[0], IMAGE_SIZE[1])\n\n\n        with self.canvas:\n            self.bg = Image(path)\n            self.bind(pos=self.update_bg)\n            self.bind(size=self.update_bg)\n\n        self._keyboard = Window.request_keyboard(\n            self._keyboard_closed, self, 'text')\n\n        self._keyboard.bind(on_key_down=self._on_keyboard_down)\n\n    def update_bg(self, *args):\n        self.bg.pos = self.pos\n        self.bg.size = self.size\n\n    def _keyboard_closed(self):\n        print('My keyboard have been closed!')\n        self._keyboard.unbind(on_key_down=self._on_keyboard_down)\n        self._keyboard = None\n\n    def _on_keyboard_down(self, keyboard, keycode, text, modifiers):\n        if keycode[1] == 'escape':\n            keyboard.release()\n        if keycode[1] == 'enter':\n\n\n            print('before enter', screen_manager.current_screen)\n            screen_manager.transition.direction = 'left'\n            screen_manager.current_screen = scree_1\n            print('after enter',screen_manager.current_screen)\n\n\n        return True\n\n\nscreen_manager = None\n\nscree_1 = MainScreen(path_1, name=\"1\")\nscree_2 = MainScreen(path_2, name=\"2\")\n\n\nclass MyApp(App):\n\n    def build(self):\n        global screen_manager\n        screen_manager = ScreenManager()\n\n        screen_manager.add_widget(scree_2)\n        screen_manager.add_widget(scree_1)\n\n        return screen_manager\n\n\nif __name__ == '__main__':\n    MyApp().run()\n\n</code></pre>\n\n<p>I did a print to see if something changes in screen manager:</p>\n\n<p><a href=\"https://i.stack.imgur.com/0jAbX.png\" rel=\"nofollow noreferrer\">result of the print's</a></p>\n\n<p>It seems to me that the manager indeed changes the screen, but I still the same picture.</p>\n\n<p>I've already looked at this question and I found nothing helpful.</p>\n\n<p>If anyone has an idea what I'm doing wrong, I would appreciate any help/advice.</p>\n\n<p>Update:</p>\n\n<p>@JohnAnderson noticed in the comments, I should have swap the name of the screen, not the screen itself, however nothing changes ether.</p>\n"}, {"tags": ["python", "pandas", "list"], "answers": [{"comments": [{"owner": {"reputation": 46860, "user_id": 4333359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/231e42e97a07b2937c1bf8a313dfa3f7?s=128&d=identicon&r=PG&f=1", "display_name": "ALollz", "link": "https://stackoverflow.com/users/4333359/alollz"}, "edited": false, "score": 1, "creation_date": 1573075607, "post_id": 58738728, "comment_id": 103767392, "body": "drop duplicates :D"}, {"owner": {"reputation": 1278, "user_id": 5269850, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ba47a45cb900337650d9adb725b3b14c?s=128&d=identicon&r=PG&f=1", "display_name": "EB2127", "link": "https://stackoverflow.com/users/5269850/eb2127"}, "edited": false, "score": 1, "creation_date": 1573154013, "post_id": 58738728, "comment_id": 103798699, "body": "I appreciate the performance test! This is quite useful for users, and I often wish this information existed more on SO posts :)"}], "tags": [], "owner": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "is_accepted": true, "score": 3, "last_activity_date": 1573075756, "last_edit_date": 1573075756, "creation_date": 1573075573, "answer_id": 58738728, "question_id": 58738670, "link": "https://stackoverflow.com/questions/58738670/how-to-compress-pandas-dataframe-into-a-dictionary-with-unique-keys-and-listed-v/58738728#58738728", "title": "How to compress pandas DataFrame into a dictionary with unique keys and listed values?", "body": "<p><strong>Option 1</strong>: <code>groupby().apply(list)</code>:</p>\n\n<pre><code>df.groupby('Name')['Age'].apply(list).to_dict()\n# 4.06 ms \u00b1 966 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 100 loops each)\n</code></pre>\n\n<p><strong>Option 2</strong>: list/dict comprehension</p>\n\n<pre><code>{a:list(x) for a,x in df.groupby('Name')['Age']}\n# 2.68 ms \u00b1 177 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 100 loops each)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>{'Alex': [10.0],\n 'Barbara': [25.0],\n 'Bob': [12.0, 72.0],\n 'Clarke': [13.0, 13.0],\n 'Destiny': [45.0]}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 46860, "user_id": 4333359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/231e42e97a07b2937c1bf8a313dfa3f7?s=128&d=identicon&r=PG&f=1", "display_name": "ALollz", "link": "https://stackoverflow.com/users/4333359/alollz"}, "is_accepted": false, "score": 1, "last_activity_date": 1573077134, "last_edit_date": 1573077134, "creation_date": 1573076423, "answer_id": 58738899, "question_id": 58738670, "link": "https://stackoverflow.com/questions/58738670/how-to-compress-pandas-dataframe-into-a-dictionary-with-unique-keys-and-listed-v/58738899#58738899", "title": "How to compress pandas DataFrame into a dictionary with unique keys and listed values?", "body": "<p>A <code>defaultdict</code> can work here. <code>drop_duplicates</code> first to ensure only unique values get added to the list.</p>\n\n<pre><code>from collections import defaultdict\n\ndf = df.drop_duplicates()\n\nd = defaultdict(list)\nfor k,v in zip(df.Name, df.Age):\n    d[k].append(v)\n#defaultdict(list,\n#            {'Alex': [10.0],\n#             'Barbara': [25.0],\n#             'Bob': [12.0, 72.0],\n#             'Clarke': [13.0],\n#             'Destiny': [45.0]})\n</code></pre>\n\n<hr>\n\n<p>It's also pretty fast. It will perform much better than the <code>groupby</code> in cases where there are many groups with a few unique values per group. </p>\n\n<pre><code>import numpy as np\nimport pandas as pd\n\nN=10000\ndf = pd.DataFrame({'Name': np.arange(0,N,1)//10,\n                   'Age': np.arange(0,N,1)%100})\ndf = df.drop_duplicates()\n\ndef Alollz(df):\n    d = defaultdict(list)\n    for k,v in zip(df.Name, df.Age):\n        d[k].append(v)\n    return d\n\n%timeit Alollz(df)\n#3.34 ms \u00b1 7.63 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 100 loops each)\n\n%timeit {a:list(x) for a,x in df.groupby('Name')['Age']}\n#113 ms \u00b1 1.25 ms per loop (mean \u00b1 std. dev. of 7 runs, 10 loops each)\n</code></pre>\n"}], "owner": {"reputation": 1278, "user_id": 5269850, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ba47a45cb900337650d9adb725b3b14c?s=128&d=identicon&r=PG&f=1", "display_name": "EB2127", "link": "https://stackoverflow.com/users/5269850/eb2127"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 156, "favorite_count": 0, "accepted_answer_id": 58738728, "answer_count": 2, "score": 2, "last_activity_date": 1573077353, "creation_date": 1573075300, "question_id": 58738670, "link": "https://stackoverflow.com/questions/58738670/how-to-compress-pandas-dataframe-into-a-dictionary-with-unique-keys-and-listed-v", "title": "How to compress pandas DataFrame into a dictionary with unique keys and listed values?", "body": "<p>I have the following example pandas DataFrame, whereby there are two columns, <code>Name</code> and <code>Age</code>:</p>\n\n<pre><code>import pandas as pd\n\ndata = [['Alex',10],['Bob',12],['Barbara',25], ['Bob',72], \n    ['Clarke',13], ['Clarke',13], ['Destiny', 45]]\n\ndf = pd.DataFrame(data,columns=['Name','Age'], dtype=float)\n\nprint(df)\n      Name   Age\n0     Alex  10.0\n1      Bob  12.0\n2  Barbara  25.0\n3      Bob  72.0\n4   Clarke  13.0\n5   Clarke  13.0\n6  Destiny  45.0\n</code></pre>\n\n<p>My end goal is to create a dictionary, whereby each key is the Name and each value is a list of <code>Ages</code> associated with that <code>Name</code>.</p>\n\n<p>So, the ending dictionary would be</p>\n\n<pre><code>final_result = {\"Alex\":[10], \"Bob\":[12, 72], \"Barbara\":[25], \"Clarke\":[13], \"Destiny\":[45]} \n</code></pre>\n\n<p>My approach: </p>\n\n<p>I could try iterating through the dataframe to create the lists, and rename the column:</p>\n\n<pre><code>for name in df.Name.unique():\n    list_attributes = []\n    for i in df.loc[df.Age == name].Age.unique()\n        list_attributes.append(i)\n    df['List_Column'] = list_attributes\n</code></pre>\n\n<p>But that's very convoluted. What would be the most efficient way to do this?</p>\n"}, {"tags": ["python", "pip", "virtualenv"], "comments": [{"owner": {"reputation": 9376, "user_id": 11138259, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2faec9f4f30093c8b0f5d47a69e551f?s=128&d=identicon&r=PG&f=1", "display_name": "sinoroc", "link": "https://stackoverflow.com/users/11138259/sinoroc"}, "edited": false, "score": 1, "creation_date": 1573075327, "post_id": 58738632, "comment_id": 103767304, "body": "Not directly an answer to your question, but have you considered using <a href=\"https://docs.python.org/3/library/venv.html\" rel=\"nofollow noreferrer\"><code>venv</code> from Python&#39;s standard library</a> instead?"}, {"owner": {"reputation": 2929, "user_id": 3566606, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/B36KF.jpg?s=128&g=1", "display_name": "jonathan.scholbach", "link": "https://stackoverflow.com/users/3566606/jonathan-scholbach"}, "edited": false, "score": 0, "creation_date": 1573075346, "post_id": 58738632, "comment_id": 103767312, "body": "I am unable to reproduce the bug with virtualenv and Python <code>3.8.0</code>. This might be a stupid question, but: Did you activate the <code>venv</code>?"}], "owner": {"reputation": 2081, "user_id": 9724750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ab06fab3d1d9317889437631ef0ccce?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/9724750/neil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 461, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1573075045, "creation_date": 1573075045, "question_id": 58738632, "link": "https://stackoverflow.com/questions/58738632/virtualenv-failing-on-python3-8-distutils-import", "title": "Virtualenv failing on python3.8 distutils import", "body": "<p>I upgraded to python 3.8 today but I'm having some trouble with virtualenv:</p>\n\n<pre><code>$ virtualenv --python=python3.8 venv\nRunning virtualenv with interpreter /usr/bin/python3.8\nTraceback (most recent call last):\n  File \"/usr/local/lib/python3.5/dist-packages/virtualenv.py\", line 25, in &lt;module&gt;\n    import distutils.spawn\nModuleNotFoundError: No module named 'distutils.spawn'\n</code></pre>\n\n<p>I've tested with --python=python3.7 and it works fine.\nI've run </p>\n\n<pre><code>pip install --upgrade virtualenv\n</code></pre>\n\n<p>But the error remains.</p>\n\n<p>Can anyone help me debug this issue? I am struggling since I don't really understand how virtualenv works. When I call it, is virtualenv itself being run on the os's python interpreter (I'm on Ubuntu), or is it trying to use the 3.8 interpreter? Thanks.</p>\n\n<p>I've seen a few similar github issues but they're all older. I can't see anyone else who's had this question with python3.8</p>\n"}, {"tags": ["python", "date", "datetime", "python-datetime"], "comments": [{"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1573075629, "post_id": 58738629, "comment_id": 103767401, "body": "What is the <code>arrow</code> module and why are you referring to the Python 2 versions of the <code>strftime()</code> and <code>strptime()</code> functions?"}, {"owner": {"reputation": 955, "user_id": 4193208, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/fdc4951e636f003e09dcef12ca5a483c?s=128&d=identicon&r=PG&f=1", "display_name": "liorko", "link": "https://stackoverflow.com/users/4193208/liorko"}, "reply_to_user": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1573075720, "post_id": 58738629, "comment_id": 103767438, "body": "@martineau a <a href=\"https://arrow.readthedocs.io/en/latest/\" rel=\"nofollow noreferrer\">module</a> for dates. I edited the question using <code>datetime</code> also."}, {"owner": {"reputation": 975, "user_id": 1951802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7daf2cd42f114db6a7bc068e7ad3ebe4?s=128&d=identicon&r=PG", "display_name": "Hamza Rashid", "link": "https://stackoverflow.com/users/1951802/hamza-rashid"}, "edited": false, "score": 0, "creation_date": 1573076709, "post_id": 58738629, "comment_id": 103767755, "body": "hardcoding timezone here like <code>datetime.datetime.strptime(&#39;Wednesday 06 November 2019 03:05:42 PM CDT&#39;, &#39;%A %d %B %Y %I:%M:%S %p CDT&#39;)</code> works"}], "answers": [{"tags": [], "owner": {"reputation": 975, "user_id": 1951802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7daf2cd42f114db6a7bc068e7ad3ebe4?s=128&d=identicon&r=PG", "display_name": "Hamza Rashid", "link": "https://stackoverflow.com/users/1951802/hamza-rashid"}, "is_accepted": true, "score": 0, "last_activity_date": 1573076970, "creation_date": 1573076970, "answer_id": 58739006, "question_id": 58738629, "link": "https://stackoverflow.com/questions/58738629/convert-string-to-date-using-arrow-python/58739006#58739006", "title": "Convert string to date using arrow python", "body": "<p>Issue is with timezone, hard-coding timezone here works</p>\n\n<pre><code>import datetime\ndatetime.datetime.strptime('Wednesday 06 November 2019 03:05:42 PM CDT', '%A %d %B %Y %I:%M:%S %p CDT')\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "is_accepted": false, "score": 0, "last_activity_date": 1573085723, "creation_date": 1573085723, "answer_id": 58740219, "question_id": 58738629, "link": "https://stackoverflow.com/questions/58738629/convert-string-to-date-using-arrow-python/58740219#58740219", "title": "Convert string to date using arrow python", "body": "<p>Although you could just hardcode <code>'CDT'</code> into your code, as @Hamza Rashid auggests in <a href=\"https://stackoverflow.com/a/58739006/355230\">his answer</a>, that will break if the timezone information ever changes to something else, such as <code>'CST'</code> or perhaps <code>'-0600'</code>. </p>\n\n<p>To avoid that potential issue, I'd instead use something like the following, which just ignores everything in the string from the last space character in it onwards:</p>\n\n<pre><code>import datetime\n\ndate = 'Wednesday 06 November 2019 03:05:42 PM CDT'\ndate = datetime.datetime.strptime(date[:date.rindex(' ')], '%A %d %B %Y %I:%M:%S %p')\nprint(date)  # -&gt; 2019-11-06 15:05:42\n</code></pre>\n"}], "owner": {"reputation": 955, "user_id": 4193208, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/fdc4951e636f003e09dcef12ca5a483c?s=128&d=identicon&r=PG&f=1", "display_name": "liorko", "link": "https://stackoverflow.com/users/4193208/liorko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 413, "favorite_count": 0, "accepted_answer_id": 58739006, "answer_count": 2, "score": 0, "last_activity_date": 1573085723, "creation_date": 1573075032, "last_edit_date": 1573075899, "question_id": 58738629, "link": "https://stackoverflow.com/questions/58738629/convert-string-to-date-using-arrow-python", "title": "Convert string to date using arrow python", "body": "<p>I'm trying to convert string to date using <code>arrow</code> module.\nDuring the conversion, I received this error:\n<code>arrow.parser.ParserMatchError: Failed to match '%A %d %B %Y %I:%M:%S %p %Z' when parsing 'Wednesday 06 November 2019 03:05:42 PM CDT'</code></p>\n\n<p>The conversion is done using one simple line according to this <a href=\"https://docs.python.org/2/library/datetime.html#strftime-and-strptime-behavior\" rel=\"nofollow noreferrer\">documentation</a>:</p>\n\n<p><code>date = arrow.get(date, '%A %d %B %Y %I:%M:%S %p %Z')</code></p>\n\n<p>I also try to do this with <code>datetime</code> and got another error:</p>\n\n<p><code>ValueError: time data 'Wednesday 06 November 2019 03:27:33 PM CDT' does not match format '%A %d %B %Y %I:%M:%S %p %Z'</code></p>\n\n<p>What am I missing?</p>\n"}, {"tags": ["python", "tensorflow", "bluedata"], "answers": [{"tags": [], "owner": {"reputation": 20588, "user_id": 1033422, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/I6uGA.png?s=128&g=1", "display_name": "Chris Snow", "link": "https://stackoverflow.com/users/1033422/chris-snow"}, "is_accepted": true, "score": 0, "last_activity_date": 1574330030, "last_edit_date": 1574330030, "creation_date": 1573074673, "answer_id": 58738545, "question_id": 58738544, "link": "https://stackoverflow.com/questions/58738544/how-to-read-and-write-from-datatap-using-tensorflow-on-bluedata/58738545#58738545", "title": "How to read and write from datatap using Tensorflow on BlueData?", "body": "<p>As per the docs: <a href=\"http://docs.bluedata.com/40_datatap-tensorflow-support\" rel=\"nofollow noreferrer\">http://docs.bluedata.com/40_datatap-tensorflow-support</a></p>\n\n<pre><code>import tensorflow as tf\nimport os\nfrom tensorflow.python.framework.versions import CXX11_ABI_FLAG\n\nCXX11_ABI_FLAG\n\nbdfs_file_system_library = os.path.join(\"/opt/bluedata\",\"libbdfs_file_system_shared_r1_9.so\")\ntf.load_file_system_library(bdfs_file_system_library)\n\nwith tf.gfile.Open(\"dtap://TenantStorage/tmp/tensorflow/dtap.txt\", 'w') as f:\n    f.write(\"This is the dtap test file\")\n\nwith tf.gfile.Open(\"dtap://TenantStorage/tmp/tensorflow/dtap.txt\", 'r') as f:\n    content = f.read() \n</code></pre>\n"}], "owner": {"reputation": 20588, "user_id": 1033422, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/I6uGA.png?s=128&g=1", "display_name": "Chris Snow", "link": "https://stackoverflow.com/users/1033422/chris-snow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 58738545, "answer_count": 1, "score": 0, "last_activity_date": 1574330030, "creation_date": 1573074673, "last_edit_date": 1573114649, "question_id": 58738544, "link": "https://stackoverflow.com/questions/58738544/how-to-read-and-write-from-datatap-using-tensorflow-on-bluedata", "title": "How to read and write from datatap using Tensorflow on BlueData?", "body": "<p>I want to be able to use BlueData's <a href=\"https://bluedata.zendesk.com/hc/en-us/articles/220223188-DataTap-Overview\" rel=\"nofollow noreferrer\">datatap</a> directly from TensorFlow.</p>\n\n<p>With pyspark, I can do something like this:</p>\n\n<pre><code>df.write.parquet('dtap://OtherDataTap/airline-safety_zero_incidents.parquet')\n</code></pre>\n\n<p>Note that I don't need to set up any libraries - it's ready to go out of the box.</p>\n\n<p>What do I need to do for reading/writing data over DataTap from Tensorflow?</p>\n"}, {"tags": ["python", "enumerate"], "comments": [{"owner": {"reputation": 2324, "user_id": 6144626, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/w5zgz.jpg?s=128&g=1", "display_name": "Ari Cooper-Davis", "link": "https://stackoverflow.com/users/6144626/ari-cooper-davis"}, "edited": false, "score": 1, "creation_date": 1573074545, "post_id": 58738491, "comment_id": 103767010, "body": "I hate to state the obvious but <code>for choice, action in enumerate(availableActions, 1): action.show(choice)</code> is just one line...?"}, {"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 5, "creation_date": 1573074556, "post_id": 58738491, "comment_id": 103767013, "body": "I&#39;d just stick with this. Anything else clever you do will just convolute the simple logic. If you&#39;re finding you&#39;re doing this pattern a lot, you could just wrap it in a function and pass the collection in."}, {"owner": {"reputation": 30153, "user_id": 12299000, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0pja9.png?s=128&g=1", "display_name": "kaya3", "link": "https://stackoverflow.com/users/12299000/kaya3"}, "edited": false, "score": 2, "creation_date": 1573074570, "post_id": 58738491, "comment_id": 103767020, "body": "Yes, this code is as clean and readable as it could be."}, {"owner": {"reputation": 197, "user_id": 9414465, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-wFUMldMNPYQ/AAAAAAAAAAI/AAAAAAAAABE/tdGpx4qtr4U/photo.jpg?sz=128", "display_name": "Drew Aschenbrener", "link": "https://stackoverflow.com/users/9414465/drew-aschenbrener"}, "reply_to_user": {"reputation": 2324, "user_id": 6144626, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/w5zgz.jpg?s=128&g=1", "display_name": "Ari Cooper-Davis", "link": "https://stackoverflow.com/users/6144626/ari-cooper-davis"}, "edited": false, "score": 1, "creation_date": 1573074682, "post_id": 58738491, "comment_id": 103767063, "body": "@AriCooper-Davis Wow. I actually didn&#39;t now, that you didn&#39;t have to indent the for loop. You learn something new every day."}, {"owner": {"reputation": 4345, "user_id": 12067560, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1YrPJ.jpg?s=128&g=1", "display_name": "Corentin Pane", "link": "https://stackoverflow.com/users/12067560/corentin-pane"}, "reply_to_user": {"reputation": 30153, "user_id": 12299000, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0pja9.png?s=128&g=1", "display_name": "kaya3", "link": "https://stackoverflow.com/users/12299000/kaya3"}, "edited": false, "score": 0, "creation_date": 1573074717, "post_id": 58738491, "comment_id": 103767082, "body": "@kaya3 yeah indeed. I was more dubious about the fact that the enumeration skipped the first item, because it doesn&#39;t relate to the question asked."}, {"owner": {"reputation": 2324, "user_id": 6144626, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/w5zgz.jpg?s=128&g=1", "display_name": "Ari Cooper-Davis", "link": "https://stackoverflow.com/users/6144626/ari-cooper-davis"}, "edited": false, "score": 1, "creation_date": 1573074773, "post_id": 58738491, "comment_id": 103767100, "body": "@DrewAschenbrener I think it&#39;s frowned upon in the PEP style guides for reducing readability, but it works! :-)"}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 1, "creation_date": 1573074964, "post_id": 58738491, "comment_id": 103767158, "body": "The enumeration does not skip the first item; it simply numbers them from 1 instead of 0."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 2, "creation_date": 1573075151, "post_id": 58738491, "comment_id": 103767241, "body": "To be clear, <code>[action.show(choice) for choice, action in enumerate(availableActions, 1)]</code> would call each method as intended, but also create (then immediately discard) a list full of values for no reason. Don&#39;t use a list comprehension when you don&#39;t care about the list it creates, just to save a line of code."}, {"owner": {"reputation": 26796, "user_id": 4834, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/6a04e124482c3750617f8dacde3388ce?s=128&d=identicon&r=PG", "display_name": "quamrana", "link": "https://stackoverflow.com/users/4834/quamrana"}, "edited": false, "score": 0, "creation_date": 1573075816, "post_id": 58738491, "comment_id": 103767470, "body": "Can you create a function which takes <code>availableActions</code> as the parameter, or does calling the <code>.show()</code> method vary also?"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1573076530, "post_id": 58738491, "comment_id": 103767698, "body": "Your for-loop is perfectly Pythonic. Don&#39;t try to write everything on a single line."}], "owner": {"reputation": 197, "user_id": 9414465, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-wFUMldMNPYQ/AAAAAAAAAAI/AAAAAAAAABE/tdGpx4qtr4U/photo.jpg?sz=128", "display_name": "Drew Aschenbrener", "link": "https://stackoverflow.com/users/9414465/drew-aschenbrener"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 139, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1573075697, "creation_date": 1573074453, "question_id": 58738491, "link": "https://stackoverflow.com/questions/58738491/python-can-you-use-a-single-line-to-pass-enumerate-into-a-function", "title": "Python: Can you use a single line to pass enumerate into a function?", "body": "<p>As a thought experiment I had to ask myself (and obviously you), because of the frequency with which I have to type these two lines. Can it be condensed into one line?</p>\n\n<p>I have various classes that have functions. Objects of these classes inevitably end-up in lists. I frequently have to call a function for each item of the list using an enumerated value. Is there a clean one line solution? Or just stick with the tried and true? </p>\n\n<pre><code>for choice, action in enumerate(availableActions, 1):\n     action.show(choice)\n</code></pre>\n\n<p>I tried some list comprehension to no avail.</p>\n"}, {"tags": ["python", "django", "django-models"], "comments": [{"owner": {"reputation": 5045, "user_id": 7688996, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HKydk.png?s=128&g=1", "display_name": "Mohd", "link": "https://stackoverflow.com/users/7688996/mohd"}, "edited": false, "score": 0, "creation_date": 1573074652, "post_id": 58738442, "comment_id": 103767049, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/16196603/images-from-imagefield-in-django-dont-load-in-template\">Images from ImageField in Django don&#39;t load in template</a>"}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 11282217, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Nl7o5eBLvIY/AAAAAAAAAAI/AAAAAAAAB2Q/PnV5r7yaork/photo.jpg?sz=128", "display_name": "Aditya Akash", "link": "https://stackoverflow.com/users/11282217/aditya-akash"}, "edited": false, "score": 0, "creation_date": 1573094034, "post_id": 58739029, "comment_id": 103772044, "body": "in that case none of the images show up..even when i&#39;ve uploaded one from the admin site"}], "tags": [], "owner": {"reputation": 17725, "user_id": 2628879, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/763e4726ca8e0ffbacc058380483a016?s=128&d=identicon&r=PG", "display_name": "aris", "link": "https://stackoverflow.com/users/2628879/aris"}, "is_accepted": false, "score": 0, "last_activity_date": 1573077135, "creation_date": 1573077135, "answer_id": 58739029, "question_id": 58738442, "link": "https://stackoverflow.com/questions/58738442/unable-to-display-image-in-a-django-template-using-imagefield/58739029#58739029", "title": "unable to display Image in a Django Template (using ImageField)", "body": "<p>Your user model has an optional image field on it. Surely you will have some records now or later that don't have an image associated with a user. Therefore the template as it is now will throw an error. All you have to do is put a conditional into the template to see if the user record actually has an image associated with it.</p>\n\n<pre><code>{% if user.image %}\n    &lt;img src=\"{{ user.image.url }}\"&gt;\n{% endif %}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 12162791, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-OfKFADBqHC8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rco8ceOsterVS_gBr0I11uKThSgdg/photo.jpg?sz=128", "display_name": "Py_Programadora", "link": "https://stackoverflow.com/users/12162791/py-programadora"}, "is_accepted": true, "score": 0, "last_activity_date": 1573126673, "creation_date": 1573126673, "answer_id": 58747985, "question_id": 58738442, "link": "https://stackoverflow.com/questions/58738442/unable-to-display-image-in-a-django-template-using-imagefield/58747985#58747985", "title": "unable to display Image in a Django Template (using ImageField)", "body": "<pre><code>upload_to='pictures/'\n</code></pre>\n\n<p>Use this in image field\nAnd please check file is storing at pictures directory</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 11734717, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-NdQtsc-gA54/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfW4-I_ZgB3-_czc3HcLO4zXcuTWw/photo.jpg?sz=128", "display_name": "Saurabh Gahlot", "link": "https://stackoverflow.com/users/11734717/saurabh-gahlot"}, "is_accepted": false, "score": 0, "last_activity_date": 1610711461, "last_edit_date": 1610711461, "creation_date": 1573129990, "answer_id": 58748870, "question_id": 58738442, "link": "https://stackoverflow.com/questions/58738442/unable-to-display-image-in-a-django-template-using-imagefield/58748870#58748870", "title": "unable to display Image in a Django Template (using ImageField)", "body": "<p>Change your model like this:</p>\n<pre><code>image = models.ImageField(upload_to='pictures/', null=True, blank=True)\n</code></pre>\n<p>And check that the images are uploading correctly.</p>\n"}], "owner": {"reputation": 15, "user_id": 11282217, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Nl7o5eBLvIY/AAAAAAAAAAI/AAAAAAAAB2Q/PnV5r7yaork/photo.jpg?sz=128", "display_name": "Aditya Akash", "link": "https://stackoverflow.com/users/11282217/aditya-akash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1133, "favorite_count": 0, "accepted_answer_id": 58747985, "answer_count": 3, "score": 0, "last_activity_date": 1610711461, "creation_date": 1573074222, "question_id": 58738442, "link": "https://stackoverflow.com/questions/58738442/unable-to-display-image-in-a-django-template-using-imagefield", "title": "unable to display Image in a Django Template (using ImageField)", "body": "<p>i'm uploading an image from the admin site into the imagefield of the model.i've made the necessary changes in the settings.py and urls.py file and added the media directory in my project. Although the image shows up in the admin site, i get \"The 'image' attribute has no file associated with it\" error while rendering the template.</p>\n\n<p>here are my files:</p>\n\n<p>template(users.html)</p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n{% load static %}\n    &lt;head&gt;\n        &lt;meta charset=\"utf-8\"&gt;\n        &lt;title&gt;&lt;/title&gt;\n        &lt;link rel=\"stylesheet\" href=\"\"&gt;\n    &lt;/head&gt;\n    &lt;body&gt;\n        &lt;h1&gt;Here are your users&lt;/h1&gt;\n        {% if user_list %}\n            &lt;ol&gt;\n                    {% for user in user_list %}\n                &lt;li&gt; User Info&lt;/li&gt;   \n                    &lt;ul&gt;\n                       &lt;li&gt;First Name:{{user.f_name}}&lt;/li&gt; \n                        &lt;li&gt;Last Name:{{user.l_name}}&lt;/li&gt;\n                        &lt;li&gt;Email:{{user.email}}&lt;/li&gt;\n                        &lt;li&gt;Image:&lt;img src=\"{{ user.image.url }}\"&gt;&lt;/li&gt;\n\n                    &lt;/ul&gt;\n                    {% endfor %}\n            &lt;/ol&gt; \n        {% endif %}    \n\n\n\n\n    &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>models.py</p>\n\n<pre><code>from django.db import models\n\n# Create your models here.\n\nclass User(models.Model):\n    f_name=models.CharField(max_length=20)\n    l_name=models.CharField(max_length=20)\n    email=models.EmailField()\n    image=models.ImageField(upload_to='pictures',null=True,blank=True)\n\n    def __str__(self):\n        return (self.f_name+\" \"+self.l_name)\n</code></pre>\n\n<p>views.py</p>\n\n<pre><code>from django.shortcuts import render\nfrom django.http import HttpResponse\nfrom .models import User\n\n# Create your views here.\ndef index(request):\n    return HttpResponse(\"&lt;em&gt;My Second Project&lt;/em&gt;\")\n\ndef help(request):\n    helpdict = {'help_insert':'HELP PAGE'}\n    return render(request,'appTwo/help.html',context=helpdict)\n\ndef dispUsers(request):\n    user=User.objects.order_by('f_name')\n    user_dict={\"user_list\":user}\n    return render(request,'appTwo/users.html',context=user_dict)\n</code></pre>\n\n<p>settings.py</p>\n\n<pre><code>\"\"\"\nDjango settings for ProTwo project.\n\nGenerated by 'django-admin startproject' using Django 2.0.5.\n\nFor more information on this file, see\nhttps://docs.djangoproject.com/en/2.0/topics/settings/\n\nFor the full list of settings and their values, see\nhttps://docs.djangoproject.com/en/2.0/ref/settings/\n\"\"\"\n\nimport os\n\n# Build paths inside the project like this: os.path.join(BASE_DIR, ...)\nBASE_DIR = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))\n\nprint(os.path.dirname(os.path.dirname(os.path.abspath(__file__))))\n# Quick-start development settings - unsuitable for production\n# See https://docs.djangoproject.com/en/2.0/howto/deployment/checklist/\n\n# SECURITY WARNING: keep the secret key used in production secret!\nSECRET_KEY = '5$=@s-e_#2yzh+-nn^r!$0%l0%_n-)n(g-9w7f9b+x#@lrc_%%'\n\n# SECURITY WARNING: don't run with debug turned on in production!\nDEBUG = True\n\nALLOWED_HOSTS = []\n\n\n# Application definition\n\nINSTALLED_APPS = [\n    'django.contrib.admin',\n    'django.contrib.auth',\n    'django.contrib.contenttypes',\n    'django.contrib.sessions',\n    'django.contrib.messages',\n    'django.contrib.staticfiles',\n    'appTwo.apps.ApptwoConfig',\n]\n\nMIDDLEWARE = [\n    'django.middleware.security.SecurityMiddleware',\n    'django.contrib.sessions.middleware.SessionMiddleware',\n    'django.middleware.common.CommonMiddleware',\n    'django.middleware.csrf.CsrfViewMiddleware',\n    'django.contrib.auth.middleware.AuthenticationMiddleware',\n    'django.contrib.messages.middleware.MessageMiddleware',\n    'django.middleware.clickjacking.XFrameOptionsMiddleware',\n]\n\nROOT_URLCONF = 'ProTwo.urls'\n\nTEMPLATES = [\n    {\n        'BACKEND': 'django.template.backends.django.DjangoTemplates',\n        'DIRS': [],\n        'APP_DIRS': True,\n        'OPTIONS': {\n            'context_processors': [\n                'django.template.context_processors.debug',\n                'django.template.context_processors.request',\n                'django.contrib.auth.context_processors.auth',\n                'django.contrib.messages.context_processors.messages',\n            ],\n        },\n    },\n]\n\nWSGI_APPLICATION = 'ProTwo.wsgi.application'\n\n\n# Database\n# https://docs.djangoproject.com/en/2.0/ref/settings/#databases\n\nDATABASES = {\n    'default': {\n        'ENGINE': 'django.db.backends.sqlite3',\n        'NAME': os.path.join(BASE_DIR, 'db.sqlite3'),\n    }\n}\n\n\n# Password validation\n# https://docs.djangoproject.com/en/2.0/ref/settings/#auth-password-validators\n\nAUTH_PASSWORD_VALIDATORS = [\n    {\n        'NAME': 'django.contrib.auth.password_validation.UserAttributeSimilarityValidator',\n    },\n    {\n        'NAME': 'django.contrib.auth.password_validation.MinimumLengthValidator',\n    },\n    {\n        'NAME': 'django.contrib.auth.password_validation.CommonPasswordValidator',\n    },\n    {\n        'NAME': 'django.contrib.auth.password_validation.NumericPasswordValidator',\n    },\n]\n\n\n# Internationalization\n# https://docs.djangoproject.com/en/2.0/topics/i18n/\n\nLANGUAGE_CODE = 'en-us'\n\nTIME_ZONE = 'UTC'\n\nUSE_I18N = True\n\nUSE_L10N = True\n\nUSE_TZ = True\n\n\n# Static files (CSS, JavaScript, Images)\n# https://docs.djangoproject.com/en/2.0/howto/static-files/\n\nSTATIC_URL = '/static/'\n\nMEDIA_ROOT = os.path.join(BASE_DIR, 'media')\nMEDIA_URL = '/media/'\n\n</code></pre>\n\n<p>urls.py</p>\n\n<pre><code>\"\"\"ProTwo URL Configuration\n\nThe `urlpatterns` list routes URLs to views. For more information please see:\n    https://docs.djangoproject.com/en/2.0/topics/http/urls/\nExamples:\nFunction views\n    1. Add an import:  from my_app import views\n    2. Add a URL to urlpatterns:  path('', views.home, name='home')\nClass-based views\n    1. Add an import:  from other_app.views import Home\n    2. Add a URL to urlpatterns:  path('', Home.as_view(), name='home')\nIncluding another URLconf\n    1. Import the include() function: from django.urls import include, path\n    2. Add a URL to urlpatterns:  path('blog/', include('blog.urls'))\n\"\"\"\nfrom django.contrib import admin\nfrom django.urls import path, include\nfrom appTwo import views\nfrom django.conf import settings\nfrom django.conf.urls.static import static\n\n\nurlpatterns = [\n    path('', views.index, name=\"index\"),\n    path('help/', include('appTwo.urls')),\n    path('admin/', admin.site.urls),\n    path('users/',views.dispUsers,name=\"users\")\n]+static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/s2Khi.png\" rel=\"nofollow noreferrer\">Here's an image showing my diresctory structure</a></p>\n"}, {"tags": ["python", "regex"], "comments": [{"owner": {"reputation": 49533, "user_id": 1057429, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XG8at.jpg?s=128&g=1", "display_name": "Nir Alfasi", "link": "https://stackoverflow.com/users/1057429/nir-alfasi"}, "edited": false, "score": 1, "creation_date": 1573074328, "post_id": 58738435, "comment_id": 103766925, "body": "Does this answer your question? <a href=\"https://stackoverflow.com/questions/491148/best-fuzzy-matching-algorithm\">Best Fuzzy Matching Algorithm?</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user12097764"}, "edited": false, "score": 0, "creation_date": 1573075863, "post_id": 58738435, "comment_id": 103767484, "body": "Could write a new regex engine that does this with special backtracking, etc.. Where set special options <code>Pickl?e?s?</code>"}, {"owner": {"reputation": 19159, "user_id": 3600709, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/731c8c4c0029d3414563333de16b8977?s=128&d=identicon&r=PG&f=1", "display_name": "ctwheels", "link": "https://stackoverflow.com/users/3600709/ctwheels"}, "edited": false, "score": 0, "creation_date": 1573078253, "post_id": 58738435, "comment_id": 103768315, "body": "Why does <code>abc_Pickled_efg</code> present the closest match and not <code>abcd_something_Picklesefgh</code>? You&#39;re matching more in the second string than you are in the first."}, {"owner": {"reputation": 649, "user_id": 10485253, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-y-NASj2ILKQ/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNsiR7_PTN4AkMdeNQPwzC7XRt3Ng/mo/photo.jpg?sz=128", "display_name": "TreeWater", "link": "https://stackoverflow.com/users/10485253/treewater"}, "reply_to_user": {"reputation": 49533, "user_id": 1057429, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XG8at.jpg?s=128&g=1", "display_name": "Nir Alfasi", "link": "https://stackoverflow.com/users/1057429/nir-alfasi"}, "edited": false, "score": 0, "creation_date": 1573087718, "post_id": 58738435, "comment_id": 103770737, "body": "@alfasin yes that looks like what I&#39;m trying here"}, {"owner": {"reputation": 649, "user_id": 10485253, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-y-NASj2ILKQ/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNsiR7_PTN4AkMdeNQPwzC7XRt3Ng/mo/photo.jpg?sz=128", "display_name": "TreeWater", "link": "https://stackoverflow.com/users/10485253/treewater"}, "reply_to_user": {"reputation": 19159, "user_id": 3600709, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/731c8c4c0029d3414563333de16b8977?s=128&d=identicon&r=PG&f=1", "display_name": "ctwheels", "link": "https://stackoverflow.com/users/3600709/ctwheels"}, "edited": false, "score": 0, "creation_date": 1573087772, "post_id": 58738435, "comment_id": 103770754, "body": "@ctwheels you are right. This is just an example I threw together, didn&#39;t really look all to closely but figured that I got my point across. Thanks"}], "answers": [{"comments": [{"owner": {"reputation": 649, "user_id": 10485253, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-y-NASj2ILKQ/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNsiR7_PTN4AkMdeNQPwzC7XRt3Ng/mo/photo.jpg?sz=128", "display_name": "TreeWater", "link": "https://stackoverflow.com/users/10485253/treewater"}, "edited": false, "score": 0, "creation_date": 1573087820, "post_id": 58739665, "comment_id": 103770762, "body": "Exactly what I was looking for. Thanks!"}], "tags": [], "owner": {"reputation": 19159, "user_id": 3600709, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/731c8c4c0029d3414563333de16b8977?s=128&d=identicon&r=PG&f=1", "display_name": "ctwheels", "link": "https://stackoverflow.com/users/3600709/ctwheels"}, "is_accepted": true, "score": 0, "last_activity_date": 1573081186, "creation_date": 1573081186, "answer_id": 58739665, "question_id": 58738435, "link": "https://stackoverflow.com/questions/58738435/how-to-determine-the-closest-match-to-a-regex-pattern/58739665#58739665", "title": "How to determine the closest match to a regex pattern?", "body": "<h2>How can this be accomplished in regex?</h2>\n\n<p>You can use the PyPi regex module that has a built-in fuzzy matching technique. This fuzziness technique allows you to specify what is and isn't allowed to happen on a string in terms of regex errors, how many are allowed, as well as a <em>score</em> for each type of fuzzy matching error. This information can be found <a href=\"https://pypi.org/project/regex/2014.10.09/\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>In terms of the regex, you would use the following (obviously if the regex you specified in your question is pre-determined, you can concatenate it; prepend <code>(?:</code> and append <code>){e}</code>):</p>\n\n<pre><code>(?:abc.*Pickles.*efg){e}\n</code></pre>\n\n<p>In the regex above, <code>{e}</code> permits any type of error (deletion, insertion, substitution) when matching the string. You can modify this to your liking, some examples listed below (many copied from the link I provided in the first paragraph):</p>\n\n<ul>\n<li><code>{d}</code> deletion only</li>\n<li><code>{d,i}</code> deletion and insertion only</li>\n<li><code>{d,s,i}</code> deletion, substitution, or insertion (same as <code>{e}</code>) - order does not matter</li>\n<li><code>{e&lt;=3}</code> permit at most 3 errors</li>\n<li><code>{i&lt;3}</code> permit fewer than 3 insertions</li>\n<li><code>{1&lt;=e&lt;3}</code> permit at least 1, but fewer than 3 errors</li>\n<li><code>{1&lt;=2,d&gt;2}</code> permit at most 2 insertions, permit at least 2 deletions</li>\n<li><code>{2i+d2+1s&lt;=4}</code> each insertion costs 2, each deletion costs 2, each substitution costs 1, the total cost must not exceed 4</li>\n<li><code>{i&lt;=1,d&lt;=1,s&lt;=1,2i+2d+1s&lt;=4}</code> at most 1 insertion, at most 1 deletion, at most 1 substitution; each insertion costs 2, each deletion costs 2, each substitution costs 1, the total cost must not exceed 4</li>\n</ul>\n\n<hr>\n\n<h2>What does its implementation look like?</h2>\n\n<p>Now that you have an understanding of what this is and how it works, we can move on to the actual implementation. The code below makes use of the regex module's <code>fuzzy_counts</code> in the calculation to determine the best string based on its score. My calculation converts to percentage and works as follows (you can change it to your liking and, combined with the information above, change the scores for each type of error that the regex encounters):</p>\n\n<pre><code># 100 * (1 - (fuzziness/length of original string))\n100*(1 - (n/len(s)))\n</code></pre>\n\n<p><a href=\"https://tio.run/##TZFfa8MgFMWf46eQ9qFaXNayPRXC2MZgL4PC@lZKSM1tIzVG1IykY589u/lTqC/KOb9z71VtG4rKPHWdKm3lAnVwhkZQa50ygRAfcD97mtA9iWbZUaZbJS8a8hRO55m41zS4ezFPfVVCKDA@ZTy6xWDj4aaliM7IgRCHPdyCvWxQiJeTGy8R5b/wtyBlFmQBwyRInypHlfBUGQqmLsFlAdg0LN@QqOmr9VeJT7XWQ5Y54cUkvn18775ed@@fnEZzOtjo@FoHEhmM@rpkffR6bVNZ1SZ4HuGa015SBrwnkURuvVot2Zo@UGYeNRjmOecDJ3XlYeSmwePMWjA5kxzvOrTq@@CTQ86uyt6GF3TiubhAm@isPOYZbTa02a8PwsEPOA/JztWAdazFGuNXxVsHIbTb/gyOKZODCckzRyYeCTZ25V33Dw\" rel=\"nofollow noreferrer\">See this code working here</a></p>\n\n<p><sub>Note: I used <code>pprint</code> to nicely display the output; not necessary to use it, just makes the results easier to read.</sub></p>\n\n<pre><code>import regex, pprint\n\nstrings = [\n    \"abc_Pickled_efg\",\n    \"abc_Pickller_efg\",\n    \"abcd_something_Picklesefgh\",\n    \"efg_Pickles_abc\"\n]\n\nr = r'(?:abc.*Pickles.*efg){e}'\nmatches = []\n\nfor i,s in enumerate(strings):\n    x = regex.fullmatch(r,s, regex.BESTMATCH)   # match result\n    n = sum(x.fuzzy_counts)             # fuzziness\n    c = 100*(1 - (n/len(s)))            # closeness\n    matches.append(c)\n\nresult = sorted(zip(strings, matches),key=lambda x: x[1],reverse=True)\n\npp = pprint.PrettyPrinter(indent=4)\npp.pprint(result)\n</code></pre>\n\n<p>And the result:</p>\n\n<pre><code>[   ('abcd_something_Picklesefgh', 96.15384615384616),\n    ('abc_Pickled_efg', 93.33333333333333),\n    ('abc_Pickller_efg', 87.5),\n    ('efg_Pickles_abc', 60.0)]\n</code></pre>\n"}], "owner": {"reputation": 649, "user_id": 10485253, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-y-NASj2ILKQ/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNsiR7_PTN4AkMdeNQPwzC7XRt3Ng/mo/photo.jpg?sz=128", "display_name": "TreeWater", "link": "https://stackoverflow.com/users/10485253/treewater"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "accepted_answer_id": 58739665, "answer_count": 1, "score": 1, "last_activity_date": 1618043100, "creation_date": 1573074191, "last_edit_date": 1618043100, "question_id": 58738435, "link": "https://stackoverflow.com/questions/58738435/how-to-determine-the-closest-match-to-a-regex-pattern", "title": "How to determine the closest match to a regex pattern?", "body": "<p>Let's say I have the following list:</p>\n<pre><code>abc_Pickled_efg\nabc_Pickller_efg\nabcd_something_Picklesefgh\nefg_Pickles_abc\n</code></pre>\n<p>And the regex pattern:</p>\n<pre><code>abc.*Pickles.*efg\n</code></pre>\n<p>None of these in the list match the pattern. But how would I go about finding what the closest match is (in this case <code>abc_Pickled_efg</code>). Is there some Python module or something that can say if something is a 92% match or 0% match or something?</p>\n<p>My thinking was that I can go across the pattern and see if each symbol matches i.e.:</p>\n<pre><code>a  =&gt; a = 1 point\nb  =&gt; b = 1 point\nc  =&gt; c = 1 point\n.* =&gt; _ = 1 point\nP  =&gt; P = 1 point\ni  =&gt; i = 1 point\nc  =&gt; c = 1 point\nk  =&gt; k = 1 point\nl  =&gt; l = 1 point\ne  =&gt; e = 1 point\nr  =&gt; d = 0 point\n.* =&gt; _ = 1 point\ne  =&gt; e = 1 point\nf  =&gt; f = 1 point\ng  =&gt; g = 1 point\n-----------------\n         14 points out of 15 possible ~= 93% match\n</code></pre>\n<p>Does this make sense or is there something that does something like this?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 1119, "user_id": 12014856, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0JcYO.jpg?s=128&g=1", "display_name": "Enthus3d", "link": "https://stackoverflow.com/users/12014856/enthus3d"}, "edited": false, "score": 0, "creation_date": 1573074274, "post_id": 58738390, "comment_id": 103766905, "body": "Could you provide an example of how the code is not working? Eg. Error codes, expected output, etc. This would help us figure out what is going on with the code."}, {"owner": {"reputation": 135, "user_id": 12252458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/681d7ab4261eca6e0b1b7ea82182ab7e?s=128&d=identicon&r=PG&f=1", "display_name": "wolf7687", "link": "https://stackoverflow.com/users/12252458/wolf7687"}, "reply_to_user": {"reputation": 1119, "user_id": 12014856, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0JcYO.jpg?s=128&g=1", "display_name": "Enthus3d", "link": "https://stackoverflow.com/users/12014856/enthus3d"}, "edited": false, "score": 0, "creation_date": 1573074518, "post_id": 58738390, "comment_id": 103767000, "body": "There are no errors. The code works it&#39;s just not doing what I want. It&#39;s not separating the contracts into their own pdf. The first contract in a is in its own pdf. But the second output includes contract 1 details again along with the contents of contract 2. I need to loop to cleanse itself and start over after looking at a contract folder."}, {"owner": {"reputation": 1119, "user_id": 12014856, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0JcYO.jpg?s=128&g=1", "display_name": "Enthus3d", "link": "https://stackoverflow.com/users/12014856/enthus3d"}, "edited": false, "score": 0, "creation_date": 1573074690, "post_id": 58738390, "comment_id": 103767065, "body": "I suspect in this case it&#39;s hitting each file more than once, I will test your code and see what I can do to help, thanks for clarifying."}], "answers": [{"comments": [{"owner": {"reputation": 1119, "user_id": 12014856, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0JcYO.jpg?s=128&g=1", "display_name": "Enthus3d", "link": "https://stackoverflow.com/users/12014856/enthus3d"}, "reply_to_user": {"reputation": 135, "user_id": 12252458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/681d7ab4261eca6e0b1b7ea82182ab7e?s=128&d=identicon&r=PG&f=1", "display_name": "wolf7687", "link": "https://stackoverflow.com/users/12252458/wolf7687"}, "edited": false, "score": 0, "creation_date": 1573075701, "post_id": 58738678, "comment_id": 103767425, "body": "@wolf7687 no problem! Glad that I could help :)"}], "tags": [], "owner": {"reputation": 1119, "user_id": 12014856, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0JcYO.jpg?s=128&g=1", "display_name": "Enthus3d", "link": "https://stackoverflow.com/users/12014856/enthus3d"}, "is_accepted": true, "score": 0, "last_activity_date": 1573075336, "last_edit_date": 1592644375, "creation_date": 1573075336, "answer_id": 58738678, "question_id": 58738390, "link": "https://stackoverflow.com/questions/58738390/merging-pdfs-by-directory-folder/58738678#58738678", "title": "Merging pdfs by directory/folder", "body": "<p>After running your code using .txt to test, it seems like the issue might be with your <code>merger</code> object. It seems that in your loop, you do <code>merger.append(open(pdf, 'rb'))</code> for every file in the loop, but at the beginning of each loop, you do not clear the <code>merger</code>.</p>\n<p>Eg. if I had a folder structure like so:</p>\n<p><a href=\"https://i.stack.imgur.com/Gy5jN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Gy5jN.png\" alt=\"enter image description here\" /></a></p>\n<p>My merger, if it were like a list, would end up like this with the 3 merges:</p>\n<blockquote>\n<p>['./randomtextfolder/1/1_1.txt', './randomtextfolder/1/1_2.txt']</p>\n<p>['./randomtextfolder/1/1_1.txt', './randomtextfolder/1/1_2.txt', './randomtextfolder/2/2_1.txt', './randomtextfolder/2/2_2.txt']</p>\n<p>['./randomtextfolder/1/1_1.txt', './randomtextfolder/1/1_2.txt', './randomtextfolder/2/2_1.txt', './randomtextfolder/2/2_2.txt', './randomtextfolder/3/3_1.txt']</p>\n</blockquote>\n<hr />\n<p>I am unsure how you would clear the merger variable, but I suspect the line <code>merger = PdfFileMerger()</code> placed after your first for loop would be good.</p>\n<p>Your code would look like so:</p>\n<pre><code>root_folder = r&quot;./RawContracts&quot;\n\nx = [a for a in os.listdir(root_folder) if not a.endswith(&quot;.pdf&quot;)]\n\n\nfor folder in x:\n    merger = PdfFileMerger()\n    house = root_folder + &quot;/&quot; + folder\n    # note that we removed x2 = [], because the following line re-sets x2 anyway\n    x2 = [root_folder+&quot;/&quot;+folder+&quot;/&quot;+a for a in os.listdir(house) if a.endswith(&quot;.pdf&quot;)]\n    for pdf in x2:\n        merger.append(open(pdf, 'rb'))\n    with open(&quot;%s.pdf&quot; % folder, &quot;wb&quot;) as fout:\n        merger.write(fout)\n\n</code></pre>\n<p>If this does not work as intended, you can try <code>merger.close()</code> to see if that wipes the merger memory, as indicated in <a href=\"https://pythonhosted.org/PyPDF2/PdfFileMerger.html\" rel=\"nofollow noreferrer\">this</a> documentation.</p>\n<p>Hope that helps!</p>\n"}], "owner": {"reputation": 135, "user_id": 12252458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/681d7ab4261eca6e0b1b7ea82182ab7e?s=128&d=identicon&r=PG&f=1", "display_name": "wolf7687", "link": "https://stackoverflow.com/users/12252458/wolf7687"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 58738678, "answer_count": 1, "score": 1, "last_activity_date": 1573075352, "creation_date": 1573073951, "last_edit_date": 1573075352, "question_id": 58738390, "link": "https://stackoverflow.com/questions/58738390/merging-pdfs-by-directory-folder", "title": "Merging pdfs by directory/folder", "body": "<p>I have a folder('a') of folders('b'). Each folder in 'b' is named after the contract it covers. Within each folder in b are the main contract document and modifications for that contract. All the docs are pdfs. I wrote code to merge pdfs by contract.</p>\n\n<p>The problem is the code is not breaking up the pdfs correctly. The first output has only info for contract 1; the second output has info for contract 1 and 2; the third contract has info for contracts 1, 2, and 3. I tried strategically placing a line of code to clear the storage device but the code is still not acting right.</p>\n\n<pre><code>root_folder = r\"./RawContracts\"\n\nx = [a for a in os.listdir(root_folder) if not a.endswith(\".pdf\")]\nmerger = PdfFileMerger()\n\nfor folder in x:\n    house = root_folder + \"/\" + folder\n    x2 = [root_folder+\"/\"+folder+\"/\"+a for a in os.listdir(house) if a.endswith(\".pdf\")]\n    for pdf in x2:\n        merger.append(open(pdf, 'rb'))\n    with open(\"%s.pdf\" % folder, \"wb\") as fout:\n        merger.write(fout)\n    x2 = []\n</code></pre>\n\n<p>I cobbled this solution together after referencing many different sites. The \"x2 = []\" at the end of the second for loop is my attempt at solving the problem. It does not work. Thanks in advance for your help.</p>\n\n<p>A little more detail on the problem.</p>\n\n<p>Let's say contract1 folder contains 2 seperate pdfs(each with 1 page) pertaining to contract1:\npdf1 = \"4 computers for $1000\"\npdf2 = \"Mod1: 3 computers @ $825; 4 @ $1000 canceled\"</p>\n\n<p>contract2 folder contains 2 separate pdfs(each with 1 page) pertaining to contract2:\npdf1 = \"5 widgets for $45\"\npdf2 = \"exercise option 3 not option 2\"</p>\n\n<p>Desired output:</p>\n\n<p>1 merged pdf named contract1.pdf containing contract1_pdf1 and contract1_pdf2\n1 merged pdf named contract2.pdf containing contract2_pdf1 and contract2_pdf2</p>\n\n<p>current output:</p>\n\n<p>1 pdf with contents of contract1 folder correctly merged\n1 pdf with contents of contract1 folder merged with contents of contract2 folder. This folder should only have contract 2 stuff. </p>\n\n<p>I need python to discard from its memory everything dealing with contract1 once it has completed that part of the loop.</p>\n"}, {"tags": ["python", "scrapy"], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 12308170, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-CO5OlArBtw8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcWbLOAvl8P7zNt-GnQsSLXEDBDBA/photo.jpg?sz=128", "display_name": "txn", "link": "https://stackoverflow.com/users/12308170/txn"}, "edited": false, "score": 0, "creation_date": 1573138066, "post_id": 58748334, "comment_id": 103790585, "body": "Oh okay, is that free to use? I mean i have my own 1000 proxies"}, {"owner": {"reputation": 43, "user_id": 12308170, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-CO5OlArBtw8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcWbLOAvl8P7zNt-GnQsSLXEDBDBA/photo.jpg?sz=128", "display_name": "txn", "link": "https://stackoverflow.com/users/12308170/txn"}, "edited": false, "score": 0, "creation_date": 1573138521, "post_id": 58748334, "comment_id": 103790854, "body": "What is alternative proxy to crawlera? I mean 150k requests a month is not much for amazon... its done within few hours :/ and other pakets, over 50$ is really high priced"}], "tags": [], "owner": {"reputation": 2916, "user_id": 939364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cceb4bd730bda5e8464b76de4d1d6dc5?s=128&d=identicon&r=PG", "display_name": "Gallaecio", "link": "https://stackoverflow.com/users/939364/gallaecio"}, "is_accepted": false, "score": 0, "last_activity_date": 1573127976, "creation_date": 1573127976, "answer_id": 58748334, "question_id": 58738388, "link": "https://stackoverflow.com/questions/58738388/python-scrapy-proxies-dead-after-few-rounds/58748334#58748334", "title": "Python Scrapy Proxies Dead after few rounds?", "body": "<p>Amazon employs advanced antibot measures.</p>\n\n<p>Use a smart proxy like <a href=\"https://scrapinghub.com/crawlera\" rel=\"nofollow noreferrer\">Crawlera</a> or some alternative proxy service that provides good IP rotation and other web crawling features.</p>\n"}], "owner": {"reputation": 43, "user_id": 12308170, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-CO5OlArBtw8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcWbLOAvl8P7zNt-GnQsSLXEDBDBA/photo.jpg?sz=128", "display_name": "txn", "link": "https://stackoverflow.com/users/12308170/txn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 397, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1588842707, "creation_date": 1573073945, "question_id": 58738388, "link": "https://stackoverflow.com/questions/58738388/python-scrapy-proxies-dead-after-few-rounds", "title": "Python Scrapy Proxies Dead after few rounds?", "body": "<p>I want to build an Amazon Crawler with scrapy. </p>\n\n<p>It worked, but after around 10 Good Proxies every next Proxy get <code>Proxy &lt;IP:PORT&gt; is DEAD</code></p>\n\n<p>I dont understand why...</p>\n\n<p>Thats my Middlewares </p>\n\n<pre><code>DOWNLOADER_MIDDLEWARES = {\n    'scrapy.downloadermiddlewares.useragent.UserAgentMiddleware': None,\n    'scrapy_user_agents.middlewares.RandomUserAgentMiddleware': 400,\n\n    'rotating_proxies.middlewares.RotatingProxyMiddleware': 610,\n    'rotating_proxies.middlewares.BanDetectionMiddleware': 620,\n}\n</code></pre>\n\n<p>I have 1000 Proxies, the most are not dead, there nearly all working on another crawler, but not on amazon after few rounds...</p>\n\n<p>Anyone have an idea?\nThe User Agent works and the Proxy Rotating also, he show on every next \"Dead\" Proxy different IP and something</p>\n\n<p>Here is one Log</p>\n\n<pre><code>2019-11-06 21:52:40 [rotating_proxies.expire] DEBUG: Proxy &lt;http://XXX:XXX@XXXX:8080&gt; is DEAD\n2019-11-06 21:52:40 [rotating_proxies.middlewares] DEBUG: Retrying &lt;GET https://www.amazon.de/gp/offer-listing/B00VB2ISDM/ref=olp_f_used?f_primeEligible=true&amp;f_usedAcceptable=true&amp;f_usedGood=true&amp;f_used=true&amp;f_usedLikeNew=true&amp;f_usedVeryGood=true&gt; with another proxy (failed 9 times, max retries: 300)\n2019-11-06 21:52:40 [scrapy_user_agents.middlewares] DEBUG: Proxy is detected http://xxxx:8080\n</code></pre>\n\n<p>as i said, there mostly working for another site so there not that much dead proxies like it showed on the amazon crawler</p>\n\n<p>I also tried to add that</p>\n\n<pre><code>DOWNLOAD_DELAY = 5\nAUTOTHROTTLE_ENABLED = True\nAUTOTHROTTLE_START_DELAY = 20\nAUTOTHROTTLE_MAX_DELAY = 60\n</code></pre>\n\n<p>doesnt help</p>\n"}, {"tags": ["python", "jupyter-notebook", "pdf-generation", "jupyter"], "answers": [{"comments": [{"owner": {"reputation": 419, "user_id": 10459366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca4eef9653d98961cb50fae0c69438ac?s=128&d=identicon&r=PG&f=1", "display_name": "Andrea", "link": "https://stackoverflow.com/users/10459366/andrea"}, "edited": false, "score": 0, "creation_date": 1573088079, "post_id": 58738540, "comment_id": 103770822, "body": "Hi Max, this seems to only affect whether there is a horizontal scrollbar, not a vertical scroll bar. Thank you for your help."}], "tags": [], "owner": {"reputation": 777, "user_id": 6656130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/X42hX.jpg?s=128&g=1", "display_name": "Max Kaha", "link": "https://stackoverflow.com/users/6656130/max-kaha"}, "is_accepted": false, "score": 3, "last_activity_date": 1573074652, "creation_date": 1573074652, "answer_id": 58738540, "question_id": 58738380, "link": "https://stackoverflow.com/questions/58738380/how-to-prevent-vertical-scroll-bars-when-outputting-pandas-dataframe-in-jupyter/58738540#58738540", "title": "How to prevent vertical scroll bars when outputting Pandas dataframe in Jupyter Notebook?", "body": "<p>Have you tried to toggle the scrolling in the Cell options ? Like such:</p>\n\n<p><a href=\"https://i.stack.imgur.com/NVazX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NVazX.png\" alt=\"enter image description here\"></a></p>\n\n<p>Can be done for individual cells and all cells as you see in my screenshot.</p>\n"}, {"comments": [{"owner": {"reputation": 419, "user_id": 10459366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca4eef9653d98961cb50fae0c69438ac?s=128&d=identicon&r=PG&f=1", "display_name": "Andrea", "link": "https://stackoverflow.com/users/10459366/andrea"}, "edited": false, "score": 0, "creation_date": 1573088019, "post_id": 58738804, "comment_id": 103770806, "body": "yes sorry for not clarifying and thank you. Yes, I am using the pd.set_option() and I am using the print to pdf. your code worked, but I also discovered that print(df.head()) formats it without the scrollbar for some reason. thanks again"}, {"owner": {"reputation": 68, "user_id": 12115844, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kFb9Y.jpg?s=128&g=1", "display_name": "Cooper", "link": "https://stackoverflow.com/users/12115844/cooper"}, "reply_to_user": {"reputation": 419, "user_id": 10459366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca4eef9653d98961cb50fae0c69438ac?s=128&d=identicon&r=PG&f=1", "display_name": "Andrea", "link": "https://stackoverflow.com/users/10459366/andrea"}, "edited": false, "score": 0, "creation_date": 1573105706, "post_id": 58738804, "comment_id": 103774425, "body": "No worries, yes print(df) will automatically wrap the dataframe after every 15 columns, but you don&#39;t get the nice formatting, or the scroll bar! if you just want the first five rows from your dataframe (but all of the columns), your probably better off with print(df[0:5])  or print(df.iloc[0:5])."}], "tags": [], "owner": {"reputation": 68, "user_id": 12115844, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kFb9Y.jpg?s=128&g=1", "display_name": "Cooper", "link": "https://stackoverflow.com/users/12115844/cooper"}, "is_accepted": true, "score": 1, "last_activity_date": 1573106123, "last_edit_date": 1573106123, "creation_date": 1573075947, "answer_id": 58738804, "question_id": 58738380, "link": "https://stackoverflow.com/questions/58738380/how-to-prevent-vertical-scroll-bars-when-outputting-pandas-dataframe-in-jupyter/58738804#58738804", "title": "How to prevent vertical scroll bars when outputting Pandas dataframe in Jupyter Notebook?", "body": "<p>Please clarify:</p>\n\n<ul>\n<li>Lots of columns shouldn't give you a vertical scroll bar... lots of rows will, but df.head() will only show the first 5 rows by default. for lots of columns df.head() shows the first 10 and last 10 columns, no scroll bar (for me at least).</li>\n</ul>\n\n<p>edit sorry, just realised you must be using:</p>\n\n<pre><code>pd.set_option('display.max_columns', 100)\n</code></pre>\n\n<p>'I need to download it as a static pdf.'</p>\n\n<ul>\n<li>Are you using your browser's print to pdf to get a kind of screengrab of your jupyter notebook? If so, there are better ways of getting a static picture of a dataframe table out of python. df.head() \"... is useful for quickly testing if your object has the right type of data in it.\" - from the documentation.</li>\n</ul>\n\n<p>edit: As you discovered, and stated in the comments, the easiest thing to do will be to just print the df.</p>\n\n<p>if you want to stay in the notebook and control the number of columns that get printed (max of 15 before it automatically wraps)</p>\n\n<pre><code># make up a wide empty datframe\ncol_names = ['a_' + str(x) for x in range(37)]\ndf = pd.DataFrame(columns=col_names, index=range(10))\n\nsection_width = 10 # set the number of columns you want to print - not that more than 15 \n\nfor section_no in range(int(df.shape[1] / section_width + 1)) :\n    print(df.iloc[0:5, section_no * section_width : (section_no + 1) * section_width])\n# if you want more or less than 5 rows then adust the numbers in .iloc[0:5]\n</code></pre>\n\n<p>Anyway, if you can give us some more detail on what you are trying to achieve we might be better able to help - Goodluck</p>\n"}], "owner": {"reputation": 419, "user_id": 10459366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca4eef9653d98961cb50fae0c69438ac?s=128&d=identicon&r=PG&f=1", "display_name": "Andrea", "link": "https://stackoverflow.com/users/10459366/andrea"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2051, "favorite_count": 0, "accepted_answer_id": 58738804, "answer_count": 2, "score": 0, "last_activity_date": 1573106123, "creation_date": 1573073928, "question_id": 58738380, "link": "https://stackoverflow.com/questions/58738380/how-to-prevent-vertical-scroll-bars-when-outputting-pandas-dataframe-in-jupyter", "title": "How to prevent vertical scroll bars when outputting Pandas dataframe in Jupyter Notebook?", "body": "<p>I have a Jupyter Notebook where when I run:</p>\n\n<pre><code>df.head()\n</code></pre>\n\n<p>The resulting output is a dataframe with many, many columns therefore resulting in a vertical scrollbar. </p>\n\n<p>This would be fine if I were able to privately share the data as a .html or an .ipynb file, but I need to download it as a static pdf. As a pdf, these data frames are simply getting cut off.</p>\n\n<p>This is a very long notebook with several instances where this happens. What can I do to remedy this?</p>\n\n<p>Thank you</p>\n"}, {"tags": ["python", "python-3.x", "for-loop"], "comments": [{"owner": {"reputation": 677, "user_id": 3421659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfc4a95d1dfffbdd39f6daf3433757aa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/3421659/andrew"}, "edited": false, "score": 0, "creation_date": 1573074525, "post_id": 58738370, "comment_id": 103767004, "body": "Look into using a regular expression. If the string <code>i[0]</code> is always going to be in this pattern, the RegEx <code>computer-(\\d)-(\\d)-(\\d)\\.localdomain</code> will work for you. The appropriate package to look into is <a href=\"https://docs.python.org/3/library/re.html\" rel=\"nofollow noreferrer\"><code>re</code></a>. Hopefully that gives you a pointer but if you still can&#39;t figure it out I&#39;ll post a proper and better answer for you :)"}, {"owner": {"reputation": 309, "user_id": 8723329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb48604cc29c70e53189e174b4e28959?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathon K", "link": "https://stackoverflow.com/users/8723329/jonathon-k"}, "edited": false, "score": 0, "creation_date": 1573074657, "post_id": 58738370, "comment_id": 103767050, "body": "Is linesAtTime in a consistent order?"}, {"owner": {"reputation": 2324, "user_id": 6144626, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/w5zgz.jpg?s=128&g=1", "display_name": "Ari Cooper-Davis", "link": "https://stackoverflow.com/users/6144626/ari-cooper-davis"}, "edited": false, "score": 0, "creation_date": 1573074707, "post_id": 58738370, "comment_id": 103767073, "body": "Or event <code>string.split()</code> if you don&#39;t want to get into RegEx!"}, {"owner": {"reputation": 25, "user_id": 12216724, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mArtE4rIa4zNIQ0MTCs1XFTkFe7z5nouptT2Cb-=k-s128", "display_name": "John Smith", "link": "https://stackoverflow.com/users/12216724/john-smith"}, "edited": false, "score": 0, "creation_date": 1573074839, "post_id": 58738370, "comment_id": 103767117, "body": "The problem is I can&#39;t wrap my head around the logic on how to scan through each compute node and getting it to the right spot in the array"}, {"owner": {"reputation": 25, "user_id": 12216724, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mArtE4rIa4zNIQ0MTCs1XFTkFe7z5nouptT2Cb-=k-s128", "display_name": "John Smith", "link": "https://stackoverflow.com/users/12216724/john-smith"}, "reply_to_user": {"reputation": 309, "user_id": 8723329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb48604cc29c70e53189e174b4e28959?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathon K", "link": "https://stackoverflow.com/users/8723329/jonathon-k"}, "edited": false, "score": 0, "creation_date": 1573075007, "post_id": 58738370, "comment_id": 103767176, "body": "@JonathonK no it is not"}, {"owner": {"reputation": 677, "user_id": 3421659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfc4a95d1dfffbdd39f6daf3433757aa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/3421659/andrew"}, "reply_to_user": {"reputation": 2324, "user_id": 6144626, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/w5zgz.jpg?s=128&g=1", "display_name": "Ari Cooper-Davis", "link": "https://stackoverflow.com/users/6144626/ari-cooper-davis"}, "edited": false, "score": 1, "creation_date": 1573075088, "post_id": 58738370, "comment_id": 103767209, "body": "To be candid, it&#39;s <i>really</i> hard to understand your explanation, and I skipped your whole explanation at first, honestly. Assuming that all you&#39;ll need to determine a position in the array is to know what the three numbers are, you simply need to extract those numbers from the string. You can do that with regex or string.split as @AriCooper-Davis said above."}, {"owner": {"reputation": 677, "user_id": 3421659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfc4a95d1dfffbdd39f6daf3433757aa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/3421659/andrew"}, "edited": false, "score": 0, "creation_date": 1573075158, "post_id": 58738370, "comment_id": 103767245, "body": "Is there some kind of simple function you could write that will take, for example, &quot;1, 12, 3&quot; (the three numbers) and return &quot;1, 48&quot; (the position in the array) back to you?"}, {"owner": {"reputation": 309, "user_id": 8723329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb48604cc29c70e53189e174b4e28959?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathon K", "link": "https://stackoverflow.com/users/8723329/jonathon-k"}, "edited": false, "score": 0, "creation_date": 1573075446, "post_id": 58738370, "comment_id": 103769822, "body": "I would recommend sorting your data first and then populating your array. You would have to write your own sort method, because a straight string compare will not give you a good order."}, {"owner": {"reputation": 25, "user_id": 12216724, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mArtE4rIa4zNIQ0MTCs1XFTkFe7z5nouptT2Cb-=k-s128", "display_name": "John Smith", "link": "https://stackoverflow.com/users/12216724/john-smith"}, "reply_to_user": {"reputation": 677, "user_id": 3421659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfc4a95d1dfffbdd39f6daf3433757aa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/3421659/andrew"}, "edited": false, "score": 0, "creation_date": 1573075517, "post_id": 58738370, "comment_id": 103767367, "body": "@Andrew well that&#39;s what I&#39;m trying to figure out. Previously I was just to use a bunch of if statements as shown in the code but now I want to use nested for loops and possibly the modulus operator to look through the compute node. Because finding the position is as simple as incrementing column by column then switching to the next row.  I just need to find the data associated with the spot tha&#39;s supposed to go with it."}, {"owner": {"reputation": 25770, "user_id": 5349916, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/QovYv.jpg?s=128&g=1", "display_name": "MisterMiyagi", "link": "https://stackoverflow.com/users/5349916/mistermiyagi"}, "edited": false, "score": 0, "creation_date": 1573080834, "post_id": 58738370, "comment_id": 103769123, "body": "Can you clarify your logic for converting the triplets into doublets? It appears the leading doublet index is <code>triplet[2] &#47;&#47; 4</code>, and the other is <code>triplet[1] * 4 + triplet[2] % 4</code>, is this correct? Is <code>triplet[0]</code> used for anything?"}, {"owner": {"reputation": 25, "user_id": 12216724, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mArtE4rIa4zNIQ0MTCs1XFTkFe7z5nouptT2Cb-=k-s128", "display_name": "John Smith", "link": "https://stackoverflow.com/users/12216724/john-smith"}, "reply_to_user": {"reputation": 25770, "user_id": 5349916, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/QovYv.jpg?s=128&g=1", "display_name": "MisterMiyagi", "link": "https://stackoverflow.com/users/5349916/mistermiyagi"}, "edited": false, "score": 0, "creation_date": 1573157657, "post_id": 58738370, "comment_id": 103800226, "body": "@MisterMiyagi yes that is correct"}], "answers": [{"tags": [], "owner": {"reputation": 7055, "user_id": 10987432, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wt3JW.png?s=128&g=1", "display_name": "Paul M.", "link": "https://stackoverflow.com/users/10987432/paul-m"}, "is_accepted": true, "score": 0, "last_activity_date": 1573079566, "last_edit_date": 1573079566, "creation_date": 1573078917, "answer_id": 58739347, "question_id": 58738370, "link": "https://stackoverflow.com/questions/58738370/how-do-i-turn-the-following-if-statements-into-a-more-efficient-nested-for-loops/58739347#58739347", "title": "How do I turn the following if statements into a more efficient nested for loops", "body": "<p>This is super sloppy because I wasn't able to run or test this at all, but you can try something like this.</p>\n\n<pre><code>def main():\n\n    # ...\n\n    number_of_rows = 12\n    number_of_columns = 48\n\n    temp = [[0] * number_of_columns for _ in range(number_of_rows)]\n\n    lookup = {}\n\n    for row in range(number_of_rows):\n        for column in range(number_of_columns):\n            key = \"compute-{}-{}-{}.localdomain\".format(1, (column // 4) + 1, (column % 4) + (row * 4))\n            value = row, column\n            lookup.update(key, value)\n\n    for i in lines_at_time:\n        row, column = lookup[i[0]]\n        temp[row][column] = float(i[4])\n\n    return 0\n\n\nif __name__ == \"__main__\":\n    import sys\n    sys.exit(main())\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 12216724, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mArtE4rIa4zNIQ0MTCs1XFTkFe7z5nouptT2Cb-=k-s128", "display_name": "John Smith", "link": "https://stackoverflow.com/users/12216724/john-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 58739347, "answer_count": 1, "score": 1, "last_activity_date": 1573157703, "creation_date": 1573073892, "last_edit_date": 1573157703, "question_id": 58738370, "link": "https://stackoverflow.com/questions/58738370/how-do-i-turn-the-following-if-statements-into-a-more-efficient-nested-for-loops", "title": "How do I turn the following if statements into a more efficient nested for loops", "body": "<p>I have the following code and my goal is to populate a 10x48 array in python. The data however depends on a dataset which deserves a particular spot in the array. So I've been using if statements for each compute node to plot it but I want to know how to make it faster both in code and memory using nested for loops.</p>\n\n<p>There are 48 columns and 10 rows.</p>\n\n<ul>\n<li>The 1st row each compute node will need to be in the range compute 1-1-0 compute 1-1-1 compute  1-1-2 compute  1-1-3 compute 1-2-0 all the way till 1-12-3</li>\n<li>the next row will have the same middle values but the last digits will now be using the numbers 4 5 6 and 7, so for example it will become \ncompute 1-1-4 compute 1-1-5 compute  1-1-6 compute  1-1-7 compute 1-2-4 all the way till 1-12-7</li>\n</ul>\n\n<p>this will continue until the final row where the last numbers will rotate between 36 37 38 and 39</p>\n\n<p>so compute 1-1-36 compute 1-1-37 compute  1-1-38 compute  1-1-39 compute 1-2-36 all the way till 1-12-39</p>\n\n<p>The following code represents the if statements I started but need a more efficient way so I can save memory and get rid of any mistakes I might make in copying and pasting.</p>\n\n<pre><code>temp = [[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]]\nfor i in linesAtTime:\n    if i[0] == \"compute-1-1-0.localdomain\":\n        temp[0][0]=float(i[4])\n    elif i[0] == \"compute-1-1-1.localdomain\":\n        temp[0][1] = float(i[4])\n    elif i[0] == \"compute-1-1-2.localdomain\":\n        temp[0][2] = float(i[4])\n    elif i[0] == \"compute-1-1-3.localdomain\":\n        temp[0][3] = float(i[4])\n    elif i[0] == \"compute-1-2-0.localdomain\":\n        temp[0][4] = float(i[4])\n    elif i[0] == \"compute-1-2-1.localdomain\":\n        temp[0][5] = float(i[4])\n    elif i[0] == \"compute-1-2-2.localdomain\":\n        temp[0][6] = float(i[4])\n    elif i[0] == \"compute-1-2-3.localdomain\":\n        temp[0][7] = float(i[4])\n    elif i[0] == \"compute-1-3-0.localdomain\":\n        temp[0][8] = float(i[4])\n    elif i[0] == \"compute-1-3-1.localdomain\":\n        temp[0][9] = float(i[4])\n    elif i[0] == \"compute-1-3-2.localdomain\":\n        temp[0][10] = float(i[4])\n    elif i[0] == \"compute-1-3-3.localdomain\":\n        temp[0][11] = float(i[4])\n    elif i[0] == \"compute-1-4-0.localdomain\":\n        temp[0][12] = float(i[4])\n    elif i[0] == \"compute-1-4-1.localdomain\":\n        temp[0][13] = float(i[4])\n    elif i[0] == \"compute-1-4-2.localdomain\":\n        temp[0][14] = float(i[4])\n    elif i[0] == \"compute-1-4-3.localdomain\":\n        temp[0][15] = float(i[4])\n    elif i[0] == \"compute-1-5-0.localdomain\":\n        temp[0][16] = float(i[4])\n    elif i[0] == \"compute-1-5-1.localdomain\":\n        temp[0][17] = float(i[4])\n    elif i[0] == \"compute-1-5-2.localdomain\":\n        temp[0][18] = float(i[4])\n    elif i[0] == \"compute-1-5-3.localdomain\":\n        temp[0][19] = float(i[4])\n    elif i[0] == \"compute-1-6-0.localdomain\":\n        temp[0][20] = float(i[4])\n    elif i[0] == \"compute-1-6-1.localdomain\":\n        temp[0][21] = float(i[4])\n    elif i[0] == \"compute-1-6-2.localdomain\":\n        temp[0][22] = float(i[4])\n    elif i[0] == \"compute-1-6-3.localdomain\":\n        temp[0][23] = float(i[4])\n    elif i[0] == \"compute-1-7-0.localdomain\":\n        temp[0][24] = float(i[4])\n    elif i[0] == \"compute-1-7-1.localdomain\":\n        temp[0][25] = float(i[4])\n    elif i[0] == \"compute-1-7-2.localdomain\":\n        temp[0][26] = float(i[4])\n    elif i[0] == \"compute-1-7-3.localdomain\":\n        temp[0][27] = float(i[4])\n    elif i[0] == \"compute-1-8-0.localdomain\":\n        temp[0][28] = float(i[4])\n    elif i[0] == \"compute-1-8-1.localdomain\":\n        temp[0][29] = float(i[4])\n    elif i[0] == \"compute-1-8-2.localdomain\":\n        temp[0][30] = float(i[4])\n    elif i[0] == \"compute-1-8-3.localdomain\":\n        temp[0][31] = float(i[4])\n    elif i[0] == \"compute-1-9-0.localdomain\":\n        temp[0][32] = float(i[4])\n    elif i[0] == \"compute-1-9-1.localdomain\":\n        temp[0][33] = float(i[4])\n    elif i[0] == \"compute-1-9-2.localdomain\":\n        temp[0][34] = float(i[4])\n    elif i[0] == \"compute-1-9-3.localdomain\":\n        temp[0][35] = float(i[4])\n    elif i[0] == \"compute-1-10-0.localdomain\":\n        temp[0][36] = float(i[4])\n    elif i[0] == \"compute-1-10-1.localdomain\":\n        temp[0][37] = float(i[4])\n    elif i[0] == \"compute-1-10-2.localdomain\":\n        temp[0][38] = float(i[4])\n    elif i[0] == \"compute-1-10-3.localdomain\":\n        temp[0][39] = float(i[4])\n    elif i[0] == \"compute-1-11-0.localdomain\":\n        temp[0][40] = float(i[4])\n    elif i[0] == \"compute-1-11-0.localdomain\":\n        temp[0][41] = float(i[4])\n    elif i[0] == \"compute-1-11-1.localdomain\":\n        temp[0][42] = float(i[4])\n    elif i[0] == \"compute-1-11-2.localdomain\":\n        temp[0][43] = float(i[4])\n    elif i[0] == \"compute-1-11-3.localdomain\":\n        temp[0][44] = float(i[4])\n    elif i[0] == \"compute-1-12-0.localdomain\":\n        temp[0][45] = float(i[4])\n    elif i[0] == \"compute-1-12-1.localdomain\":\n        temp[0][46] = float(i[4])\n    elif i[0] == \"compute-1-12-2.localdomain\":\n        temp[0][47] = float(i[4])\n    elif i[0] == \"compute-1-12-3.localdomain\":\n        temp[0][48] = float(i[4])\n\n\n    elif i[0] == \"compute-1-1-4.localdomain\":\n        temp[1][0]=float(i[4])\n    elif i[0] == \"compute-1-1-5.localdomain\":\n        temp[1][1] = float(i[4])\n    elif i[0] == \"compute-1-1-6.localdomain\":\n        temp[1][2] = float(i[4])\n    elif i[0] == \"compute-1-1-7.localdomain\":\n        temp[1][3] = float(i[4])\n    elif i[0] == \"compute-1-2-4.localdomain\":\n        temp[1][4] = float(i[4])\n    elif i[0] == \"compute-1-2-5.localdomain\":\n        temp[1][5] = float(i[4])\n    elif i[0] == \"compute-1-2-6.localdomain\":\n        temp[1][6] = float(i[4])\n    elif i[0] == \"compute-1-2-7.localdomain\":\n        temp[1][7] = float(i[4])\n    elif i[0] == \"compute-1-3-4.localdomain\":\n        temp[1][8] = float(i[4])\n    elif i[0] == \"compute-1-3-5.localdomain\":\n        temp[1][9] = float(i[4])\n    elif i[0] == \"compute-1-3-6.localdomain\":\n        temp[1][10] = float(i[4])\n    elif i[0] == \"compute-1-3-7.localdomain\":\n        temp[1][11] = float(i[4])\n    elif i[0] == \"compute-1-4-4.localdomain\":\n        temp[1][12] = float(i[4])\n    elif i[0] == \"compute-1-4-5.localdomain\":\n        temp[1][13] = float(i[4])\n    elif i[0] == \"compute-1-4-6.localdomain\":\n        temp[1][14] = float(i[4])\n    elif i[0] == \"compute-1-4-7.localdomain\":\n        temp[1][15] = float(i[4])\n    elif i[0] == \"compute-1-5-4.localdomain\":\n        temp[1][16] = float(i[4])\n    elif i[0] == \"compute-1-5-5.localdomain\":\n        temp[1][17] = float(i[4])\n    elif i[0] == \"compute-1-5-6.localdomain\":\n        temp[1][18] = float(i[4])\n    elif i[0] == \"compute-1-5-7.localdomain\":\n        temp[1][19] = float(i[4])\n    elif i[0] == \"compute-1-6-4.localdomain\":\n        temp[1][20] = float(i[4])\n    elif i[0] == \"compute-1-6-5.localdomain\":\n        temp[1][21] = float(i[4])\n    elif i[0] == \"compute-1-6-6.localdomain\":\n        temp[1][22] = float(i[4])\n    elif i[0] == \"compute-1-6-7.localdomain\":\n        temp[1][23] = float(i[4])\n    elif i[0] == \"compute-1-7-4.localdomain\":\n        temp[1][24] = float(i[4])\n    elif i[0] == \"compute-1-7-5.localdomain\":\n        temp[1][25] = float(i[4])\n    elif i[0] == \"compute-1-7-6.localdomain\":\n        temp[1][26] = float(i[4])\n    elif i[0] == \"compute-1-7-7.localdomain\":\n        temp[1][27] = float(i[4])\n    elif i[0] == \"compute-1-8-4.localdomain\":\n        temp[1][28] = float(i[4])\n    elif i[0] == \"compute-1-8-5.localdomain\":\n        temp[1][29] = float(i[4])\n    elif i[0] == \"compute-1-8-6.localdomain\":\n        temp[1][30] = float(i[4])\n    elif i[0] == \"compute-1-8-7.localdomain\":\n        temp[1][31] = float(i[4])\n    elif i[0] == \"compute-1-9-4.localdomain\":\n        temp[1][32] = float(i[4])\n    elif i[0] == \"compute-1-9-5.localdomain\":\n        temp[1][33] = float(i[4])\n    elif i[0] == \"compute-1-9-6.localdomain\":\n        temp[1][34] = float(i[4])\n    elif i[0] == \"compute-1-9-7.localdomain\":\n        temp[1][35] = float(i[4])\n    elif i[0] == \"compute-1-10-4.localdomain\":\n        temp[1][36] = float(i[4])\n    elif i[0] == \"compute-1-10-5.localdomain\":\n        temp[1][37] = float(i[4])\n    elif i[0] == \"compute-1-10-6.localdomain\":\n        temp[1][38] = float(i[4])\n    elif i[0] == \"compute-1-10-7.localdomain\":\n        temp[1][39] = float(i[4])\n    elif i[0] == \"compute-1-11-4.localdomain\":\n        temp[1][40] = float(i[4])\n    elif i[0] == \"compute-1-11-5.localdomain\":\n        temp[1][41] = float(i[4])\n    elif i[0] == \"compute-1-11-6.localdomain\":\n        temp[1][42] = float(i[4])\n    elif i[0] == \"compute-1-11-7.localdomain\":\n        temp[1][43] = float(i[4])\n    elif i[0] == \"compute-1-11-4.localdomain\":\n        temp[1][44] = float(i[4])\n    elif i[0] == \"compute-1-12-5.localdomain\":\n        temp[1][45] = float(i[4])\n    elif i[0] == \"compute-1-12-6.localdomain\":\n        temp[1][46] = float(i[4])\n    elif i[0] == \"compute-1-12-7.localdomain\":\n        temp[1][47] = float(i[4])\n    elif i[0] == \"compute-1-12-3.localdomain\":\n        temp[1][48] = float(i[4])\n</code></pre>\n\n<p>I have attached a psuedoillustration of my <a href=\"https://i.stack.imgur.com/IyTUc.jpg\" rel=\"nofollow noreferrer\">plan</a></p>\n"}, {"tags": ["python", "python-3.x", "pandas", "dataframe", "text"], "answers": [{"comments": [{"owner": {"reputation": 179, "user_id": 9458342, "user_type": "registered", "profile_image": "https://graph.facebook.com/10215461256107914/picture?type=large", "display_name": "Sam Dean", "link": "https://stackoverflow.com/users/9458342/sam-dean"}, "edited": false, "score": 0, "creation_date": 1573145677, "post_id": 58738727, "comment_id": 103794967, "body": "I am sure most rows work as it takes a while before it spits back an error. I have not been able to get to the &#39;first&#39; row that does not work yet."}, {"owner": {"reputation": 56, "user_id": 4625618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb434b49da1d94dfcf00f014ec2cf553?s=128&d=identicon&r=PG&f=1", "display_name": "Conner", "link": "https://stackoverflow.com/users/4625618/conner"}, "reply_to_user": {"reputation": 179, "user_id": 9458342, "user_type": "registered", "profile_image": "https://graph.facebook.com/10215461256107914/picture?type=large", "display_name": "Sam Dean", "link": "https://stackoverflow.com/users/9458342/sam-dean"}, "edited": false, "score": 0, "creation_date": 1573151138, "post_id": 58738727, "comment_id": 103797502, "body": "That does seem to further support my theory that you have an unsupported character in your data. I&#39;ll update my answer to provide an example of how you can identify the first row with an issue."}, {"owner": {"reputation": 179, "user_id": 9458342, "user_type": "registered", "profile_image": "https://graph.facebook.com/10215461256107914/picture?type=large", "display_name": "Sam Dean", "link": "https://stackoverflow.com/users/9458342/sam-dean"}, "edited": false, "score": 0, "creation_date": 1573219890, "post_id": 58738727, "comment_id": 103820752, "body": "Hmmm, I got <code>ValueError: too many values to unpack (expected 2)</code>, I added <code>data.iterrows()</code> to the loop."}, {"owner": {"reputation": 179, "user_id": 9458342, "user_type": "registered", "profile_image": "https://graph.facebook.com/10215461256107914/picture?type=large", "display_name": "Sam Dean", "link": "https://stackoverflow.com/users/9458342/sam-dean"}, "edited": false, "score": 0, "creation_date": 1573220220, "post_id": 58738727, "comment_id": 103820947, "body": "Hmmm, I got <code>ValueError: too many values to unpack (expected 2)</code>, I added <code>data.items()</code> to the loop. Now from the row[&#39;LDTEXT&quot;] I am getting a key error"}, {"owner": {"reputation": 179, "user_id": 9458342, "user_type": "registered", "profile_image": "https://graph.facebook.com/10215461256107914/picture?type=large", "display_name": "Sam Dean", "link": "https://stackoverflow.com/users/9458342/sam-dean"}, "edited": false, "score": 0, "creation_date": 1573230526, "post_id": 58738727, "comment_id": 103826694, "body": "See the edit - test works. Seems it stops on row 163243 of 213000ish. I should be able to eliminate manually"}], "tags": [], "owner": {"reputation": 56, "user_id": 4625618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb434b49da1d94dfcf00f014ec2cf553?s=128&d=identicon&r=PG&f=1", "display_name": "Conner", "link": "https://stackoverflow.com/users/4625618/conner"}, "is_accepted": false, "score": 2, "last_activity_date": 1573230197, "last_edit_date": 1573230197, "creation_date": 1573075573, "answer_id": 58738727, "question_id": 58738364, "link": "https://stackoverflow.com/questions/58738364/converting-dataframe-objects-to-strings-or-aligning-dataframe-encoding/58738727#58738727", "title": "Converting DataFrame Objects to strings or Aligning DataFrame Encoding", "body": "<p>I went through something similar, where I couldn't decode my data because I had an invalid character in my data set. After finding the row where the invalid character existed, I was able to remove it before interacting with the data.</p>\n\n<p>Have you tried splitting the sentences into words on a subset of your data? </p>\n\n<p>For example:</p>\n\n<pre><code>data.iloc[0]['LDTEXT'].str.strip().str.split('[\\W_]+')\n</code></pre>\n\n<p>Can you find any rows that do work? If so, can you find any rows the specifically do not work? What does the data in the column 'LDTEXT' look like for a row that didn't work?</p>\n\n<p>You can use something like the following to identify the first problematic row in your data:</p>\n\n<pre><code>for (i, row) in data.iterrows():\n    try:\n       row['LDTEXT'].str.strip().str.split('[\\W_]+') \n    except UnicodeDecodeError:\n        print(i)\n        print(row['LDTEXT'])\n        break\n</code></pre>\n"}], "owner": {"reputation": 179, "user_id": 9458342, "user_type": "registered", "profile_image": "https://graph.facebook.com/10215461256107914/picture?type=large", "display_name": "Sam Dean", "link": "https://stackoverflow.com/users/9458342/sam-dean"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1573230453, "creation_date": 1573073870, "last_edit_date": 1573230453, "question_id": 58738364, "link": "https://stackoverflow.com/questions/58738364/converting-dataframe-objects-to-strings-or-aligning-dataframe-encoding", "title": "Converting DataFrame Objects to strings or Aligning DataFrame Encoding", "body": "<p>I am attempting to split a dataframe column of text into each separate word for analysis. For starters, I am able to do this with a small dataset from a CSV file. The working code is as follows: </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>data = pd.read_csv('PLUSCA.csv', encoding='utf8')\n#print(data)\n\nprint(data['DESCRIPTION'])\n# Data type is object \n\ndata['words'] = data['DESCRIPTION'].str.strip().str.split('[\\W_]+')\n\n# Clean Data \ndataClean = data[['SITEID', 'DESCRIPTION', 'words']].copy()\nprint(dataClean['words'])\n</code></pre>\n\n<p>Now the problem arises when I try to pull a MUCH larger dataset via a SQL query (which does not have the options for an <code>encoding='utf-8'</code>. I have the following:</p>\n\n<pre><code>SQLquery = pd.read_sql_query(\"\"\"long working query\"\"\", conn) \ndata = pd.DataFrame(SQLquery)\n\nprint(data.head())\nprint(data['LDTEXT'])\n\n# Create word array \nprint(data['LDTEXT'])\n#returns correct text \nprint(data['LDTEXT'].dtype)\n#returns object - same as working code \ndata['words'] = data['LDTEXT'].str.strip().str.split('[\\W_]+')\n</code></pre>\n\n<p>I have tried several different things, including but not limited to: </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>data['LDTEXT'] = data['LDTEXT'].astype(str)\ndata['words'] = data['LDTEXT'].apply(str).str.strip().str.split('[\\W_]+')\ndata['words'] = data[u'LDTEXT'].series.str.strip().str.split('[\\W_]+')\n\n#doesnt exist but tried\ndata = pd.DataFrame(SQLquery, encodeing'utf-8')\n</code></pre>\n\n<p>I keep getting one of the following errors:</p>\n\n<pre><code>UnicodeDecodeError: 'charmap' codec can't decode byte 0x81 in position 172: character maps to &lt;undefined&gt;\n\nSystemError: decoding with 'WINDOWS-1252' codec failed (SystemError: &lt;built-in function charmap_decode&gt; returned a result with an error set)\n\nAttributeError: Can only use .str accessor with string values!\n</code></pre>\n\n<p>Along with some obvious ones like:</p>\n\n<pre><code>TypeError: __init__() got an unexpected keyword argument 'encoding'\n</code></pre>\n\n<p>The only differences between the 2 datasets is the one that does not work is much text is much larger and imported from SQL instead of a CSV. Also, I tried some <code>astype('|S')</code> to handle large strings. Still no luck. I feel like this is an encoding problem. How can I check the encoding of the data and change it for SQL Imports? Does the size of the data matter? Are larger byte strings handled differently? The working dataset text is probably 1-2 sentences each, where the large set can be up to a couple paragraphs PER ROW. </p>\n\n<p>OR How can I convert this properly to a string (which I'd like to avoid because I know I have a working script with <code>dtype object</code>)?</p>\n\n<p>What am I missing here?</p>\n\n<p>Let me know if you need more info too </p>\n\n<p><strong>EDIT</strong></p>\n\n<p>I added the following test </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>for i, row in enumerate(data['LDTEXT']):\n    #print(\"#################### NEW ROW ######################\")\n    #print(row)\n    print(i)\n    text = row.read()\n    #print(text)\n    try:\n        print(\"TESTING %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%\")\n        text.strip().split('[\\W_]+') \n        print(text)\n    except UnicodeDecodeError:\n        print(text)\n        break\n</code></pre>\n\n<p>Seems Oracle creates cx_Oracle.LOB objects instead of regular python objects. </p>\n"}, {"tags": ["c#", "python", "bluetooth", "bluetooth-lowenergy", "windows-10-universal"], "comments": [{"owner": {"reputation": 741, "user_id": 5429584, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vvb2K.jpg?s=128&g=1", "display_name": "Mike Petrichenko", "link": "https://stackoverflow.com/users/5429584/mike-petrichenko"}, "edited": false, "score": 0, "creation_date": 1573078600, "post_id": 58738362, "comment_id": 103768446, "body": "You do not need to implement GAP because it is implemented on system level. Start right from the profile you need. You can use Bluetooth Framework for such things (<a href=\"https://www.btframework.com/bluetoothframework.htm\" rel=\"nofollow noreferrer\">btframework.com/bluetoothframework.htm</a>)."}, {"owner": {"reputation": 1, "user_id": 12319029, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Fl2wNDFc31k/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re_3BAHUeku3Hc_0gJ5xZuQNavcBA/photo.jpg?sz=128", "display_name": "Faweks1", "link": "https://stackoverflow.com/users/12319029/faweks1"}, "reply_to_user": {"reputation": 741, "user_id": 5429584, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vvb2K.jpg?s=128&g=1", "display_name": "Mike Petrichenko", "link": "https://stackoverflow.com/users/5429584/mike-petrichenko"}, "edited": false, "score": 0, "creation_date": 1573078814, "post_id": 58738362, "comment_id": 103768517, "body": "Is there any free equivalent?"}, {"owner": {"reputation": 741, "user_id": 5429584, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vvb2K.jpg?s=128&g=1", "display_name": "Mike Petrichenko", "link": "https://stackoverflow.com/users/5429584/mike-petrichenko"}, "edited": false, "score": 0, "creation_date": 1573078839, "post_id": 58738362, "comment_id": 103768526, "body": "32feet probably."}, {"owner": {"reputation": 1, "user_id": 12319029, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Fl2wNDFc31k/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re_3BAHUeku3Hc_0gJ5xZuQNavcBA/photo.jpg?sz=128", "display_name": "Faweks1", "link": "https://stackoverflow.com/users/12319029/faweks1"}, "reply_to_user": {"reputation": 741, "user_id": 5429584, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vvb2K.jpg?s=128&g=1", "display_name": "Mike Petrichenko", "link": "https://stackoverflow.com/users/5429584/mike-petrichenko"}, "edited": false, "score": 0, "creation_date": 1573079279, "post_id": 58738362, "comment_id": 103768650, "body": "Thanks, will test it."}, {"owner": {"reputation": 1, "user_id": 12319029, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Fl2wNDFc31k/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re_3BAHUeku3Hc_0gJ5xZuQNavcBA/photo.jpg?sz=128", "display_name": "Faweks1", "link": "https://stackoverflow.com/users/12319029/faweks1"}, "reply_to_user": {"reputation": 741, "user_id": 5429584, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vvb2K.jpg?s=128&g=1", "display_name": "Mike Petrichenko", "link": "https://stackoverflow.com/users/5429584/mike-petrichenko"}, "edited": false, "score": 0, "creation_date": 1573079923, "post_id": 58738362, "comment_id": 103768877, "body": "32feet does not support BLE for Windows at this moment: <a href=\"https://github.com/inthehand/32feet/wiki/Bluetooth-Low-Energy\" rel=\"nofollow noreferrer\">github.com/inthehand/32feet/wiki/Bluetooth-Low-Energy</a>"}, {"owner": {"reputation": 741, "user_id": 5429584, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vvb2K.jpg?s=128&g=1", "display_name": "Mike Petrichenko", "link": "https://stackoverflow.com/users/5429584/mike-petrichenko"}, "edited": false, "score": 0, "creation_date": 1573080576, "post_id": 58738362, "comment_id": 103769059, "body": "Then there is no free lib for BLE except WinRT API: Start from this: <a href=\"https://docs.microsoft.com/en-us/uwp/api/windows.devices.bluetooth.bluetoothledevice\" rel=\"nofollow noreferrer\">docs.microsoft.com/en-us/uwp/api/&hellip;</a>"}], "owner": {"reputation": 1, "user_id": 12319029, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Fl2wNDFc31k/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re_3BAHUeku3Hc_0gJ5xZuQNavcBA/photo.jpg?sz=128", "display_name": "Faweks1", "link": "https://stackoverflow.com/users/12319029/faweks1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 217, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1573073869, "creation_date": 1573073869, "question_id": 58738362, "link": "https://stackoverflow.com/questions/58738362/how-can-i-implement-generic-access-profile-gap-in-windows-10", "title": "How can i implement Generic Access Profile (GAP) in Windows 10?", "body": "<p>I'm trying to implement 3D Synchronization Profile (3DSP) v.1.0.3 for Windows 10 (spec: <a href=\"https://www.bluetooth.org/DocMan/handlers/DownloadDoc.ashx?doc_id=308939\" rel=\"nofollow noreferrer\">https://www.bluetooth.org/DocMan/handlers/DownloadDoc.ashx?doc_id=308939</a>) to \"fake\" 3D display. I own 120Hz monitor and i want to create active shutter glass synchronizer with bluetooth app.</p>\n\n<p>I need to implement GAP profile as described in spec.\nIs this possible in Windows 10 using C# or Python?</p>\n\n<p>I already tried some Python libraries (bleak, pybluez) but non of them have functionality to create GAP.</p>\n\n<p>In C# i see that Windows 10 provided new API for that as described here:\n<a href=\"https://docs.microsoft.com/pl-pl/windows/uwp/devices-sensors/gatt-server?redirectedfrom=MSDN\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/pl-pl/windows/uwp/devices-sensors/gatt-server?redirectedfrom=MSDN</a></p>\n\n<p>But still i think i cannot use this for creating GAP:</p>\n\n<pre><code>The following Services are reserved by the system and cannot be published at this time:\nDevice Information Service (DIS)\nGeneric Attribute Profile Service (GATT)\nGeneric Access Profile Service (GAP)\nHuman Interface Device Service (HOGP)\nScan Parameters Service (SCP)\nAttempting to create a blocked service will result in BluetoothError.DisabledByPolicy being returned from the call to CreateAsync.\n</code></pre>\n\n<p>Is there any software or even programmable hardware (usb bluetooth dongle?) to achieve this?\nMaybe if there is solution for Linux it can be used in Windows with HyperV and Docker?</p>\n"}, {"tags": ["python", "class", "this", "target", "self"], "comments": [{"owner": {"reputation": 596, "user_id": 838614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/981adf8bdbd81093699d63e02f63b42b?s=128&d=identicon&r=PG", "display_name": "Acecool", "link": "https://stackoverflow.com/users/838614/acecool"}, "edited": false, "score": 0, "creation_date": 1573073873, "post_id": 58738303, "comment_id": 103766755, "body": "Also, if there is a way to target the current class while a class is being loaded into memory, but not being initialized, etc.. then I could make the parent vararg optional making the system easier to call.."}, {"owner": {"reputation": 596, "user_id": 838614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/981adf8bdbd81093699d63e02f63b42b?s=128&d=identicon&r=PG", "display_name": "Acecool", "link": "https://stackoverflow.com/users/838614/acecool"}, "edited": false, "score": 0, "creation_date": 1573074034, "post_id": 58738303, "comment_id": 103766803, "body": "Also, even though the AccessorFunc system can save me from having t write hundreds of lines in a file, and add additional functionality to getters / setters, create documentation, and so much more... This one problem is an annoying one. In all of my education I have never had this covered.. Hell, they never even covered properties and I had to learn them for myself. Also, the fact that no default AccessorFunc system exists by default ( ie: 1 line to create multiple ) is annoying... Many other languages have it. The property system is nice, but takes up many lines when only 1 should be needed"}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 1, "creation_date": 1573074559, "post_id": 58738303, "comment_id": 103767014, "body": "<code>AccessorFunc</code> looks like it is defining some kind of custom descriptor (or several of them); what does its definition look like? It seems more likely that you don&#39;t need to pass a reference to the parent at all, as <code>__get__</code> et al. already receive the class of its invoking object as an argument."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1573076322, "post_id": 58738303, "comment_id": 103767630, "body": "Why are you even using an <code>AccessorFunc</code>? Don&#39;t write getters and setters in Python. They are not necessary, certainly not boilerplate getters and setters."}, {"owner": {"reputation": 596, "user_id": 838614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/981adf8bdbd81093699d63e02f63b42b?s=128&d=identicon&r=PG", "display_name": "Acecool", "link": "https://stackoverflow.com/users/838614/acecool"}, "edited": false, "score": 0, "creation_date": 1577041672, "post_id": 58738303, "comment_id": 105077131, "body": "Well, I like them because I can add a ton of functionality to them. Yes, getters and setters may not be &#39;necessary&#39;, however they are quite useful to easily ensure data-type lockouts, callback functionality, and much much more. Also, I wouldn&#39;t want a <b>get</b> function packed with thousands of lines."}, {"owner": {"reputation": 596, "user_id": 838614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/981adf8bdbd81093699d63e02f63b42b?s=128&d=identicon&r=PG", "display_name": "Acecool", "link": "https://stackoverflow.com/users/838614/acecool"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1577041755, "post_id": 58738303, "comment_id": 105077143, "body": "@juanpa.arrivillaga - Yeah, normal / simple getters and setters aren&#39;t necessary unless you prefer calling a function... But, if the functions add additional features such as data-type protection, callback support, dynamic function overrides / hierarchy support, and more... then they can be quite worth it."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1577047007, "post_id": 58738303, "comment_id": 105078296, "body": "As an aside, your code has some strange things, e.g. <code>TYPE_LIST\t\t\t\t= type( [ ] );</code> That can simply be <code>TYPE_LIST = list</code>. Don&#39;t add semicolons either"}, {"owner": {"reputation": 596, "user_id": 838614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/981adf8bdbd81093699d63e02f63b42b?s=128&d=identicon&r=PG", "display_name": "Acecool", "link": "https://stackoverflow.com/users/838614/acecool"}, "edited": false, "score": 0, "creation_date": 1580103603, "post_id": 58738303, "comment_id": 105973695, "body": "Python allows the use of semi-colons, but doesn&#39;t require them. I use them because they are part of my coding standard. Additionally, they allow you to delimit multiple statements on a single line if necessary, and they even make processing the code via outside source easier. I also use tabs because a 1MB file with spaces usually ends up being 100kb with tabs. Big difference."}, {"owner": {"reputation": 596, "user_id": 838614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/981adf8bdbd81093699d63e02f63b42b?s=128&d=identicon&r=PG", "display_name": "Acecool", "link": "https://stackoverflow.com/users/838614/acecool"}, "edited": false, "score": 0, "creation_date": 1580103679, "post_id": 58738303, "comment_id": 105973712, "body": "Also, I do agree, in some regards, for the type( [ ] ) thing - I didn&#39;t know off the top of my head the data-type reference used for list so I used this to ensure it works. That method would also be future-proof if the reference ever changed. It does look cleaner to just use list, though."}], "answers": [{"comments": [{"owner": {"reputation": 596, "user_id": 838614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/981adf8bdbd81093699d63e02f63b42b?s=128&d=identicon&r=PG", "display_name": "Acecool", "link": "https://stackoverflow.com/users/838614/acecool"}, "edited": false, "score": 0, "creation_date": 1573128222, "post_id": 58738417, "comment_id": 103785150, "body": "The __ won&#39;t be added, though, as __ designates &#39;internal&#39; variables which can&#39;t be accessed from the exterior.. from my testing, doing it that way never provided me with the same results, either.. __ didn&#39;t get added or it became external and either acted as a static value, or not at all.. Even if it was able to function - which it didn&#39;t for my system, it still doesn&#39;t look nice doing it that way."}, {"owner": {"reputation": 596, "user_id": 838614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/981adf8bdbd81093699d63e02f63b42b?s=128&d=identicon&r=PG", "display_name": "Acecool", "link": "https://stackoverflow.com/users/838614/acecool"}, "edited": false, "score": 0, "creation_date": 1573129204, "post_id": 58738417, "comment_id": 103785702, "body": "But, I will double-check it to verify. I use so many different languages it is quite possible I tried it in another language - but I am confident that python does have the _ local type and __ internal type structure. It could also be that it didn&#39;t let me do it dynamically, ie: if I did AccessorFunc( parent = Example, ... ); without Example.__money = ...; .. It could&#39;ve also been another issue where if you don&#39;t add it in the Base, then if you add a function within Example, and try to call GetMoney( ) or .money, then it will not exist or you&#39;ll get a halting error."}, {"owner": {"reputation": 596, "user_id": 838614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/981adf8bdbd81093699d63e02f63b42b?s=128&d=identicon&r=PG", "display_name": "Acecool", "link": "https://stackoverflow.com/users/838614/acecool"}, "edited": false, "score": 0, "creation_date": 1573129328, "post_id": 58738417, "comment_id": 103785769, "body": "It was one, or all of those reasons why I didn&#39;t use that method. Internal, function undefined error, couldn&#39;t define __ externally, even though I could define __ internally to parent because extension, doesn&#39;t look nice ( personally, if I were to do it that way I&#39;d prefer to pre-declare, ie: above the object, which isn&#39;t something you can do ), etc..."}, {"owner": {"reputation": 69906, "user_id": 6890912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d291e4dfbf14dcc8874bd4fa620fac23?s=128&d=identicon&r=PG&f=1", "display_name": "blhsing", "link": "https://stackoverflow.com/users/6890912/blhsing"}, "reply_to_user": {"reputation": 596, "user_id": 838614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/981adf8bdbd81093699d63e02f63b42b?s=128&d=identicon&r=PG", "display_name": "Acecool", "link": "https://stackoverflow.com/users/838614/acecool"}, "edited": false, "score": 0, "creation_date": 1573156150, "post_id": 58738417, "comment_id": 103799622, "body": "Can you update your question with the definition of <code>AccessorFunc</code>? It&#39;s hard to understand from your description what <code>AccessorFunc</code> actually does, which is vital to the understanding of the actual problem you&#39;re trying to solve."}, {"owner": {"reputation": 596, "user_id": 838614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/981adf8bdbd81093699d63e02f63b42b?s=128&d=identicon&r=PG", "display_name": "Acecool", "link": "https://stackoverflow.com/users/838614/acecool"}, "edited": false, "score": 0, "creation_date": 1577026233, "post_id": 58738417, "comment_id": 105073144, "body": "AccessorFunc adds getters and setters. These are quite common, and useful for reducing repetitive coding. I can write a single line, to save me hundreds of lines for simple functions. The other thing, is it creates properties which use those getters and setters."}, {"owner": {"reputation": 596, "user_id": 838614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/981adf8bdbd81093699d63e02f63b42b?s=128&d=identicon&r=PG", "display_name": "Acecool", "link": "https://stackoverflow.com/users/838614/acecool"}, "edited": false, "score": 0, "creation_date": 1577026516, "post_id": 58738417, "comment_id": 105073218, "body": "Say I was creating a currency system - the most mundane task of this system is keeping track of how much money someone has, seeing if they can afford something, etc... It is just using simple getters and setters... So, I can use an AccessorFunc to make this final object much shorter, and complete the same task ( or better, actually, because there is no repetition, I have 1 area to fix anything if there is an issue, etc.. ). In short, AccessorFuncs in my context add these getters / setters, but also allow type verification and other features so a setter never sets an incorrect data-type, etc.."}, {"owner": {"reputation": 596, "user_id": 838614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/981adf8bdbd81093699d63e02f63b42b?s=128&d=identicon&r=PG", "display_name": "Acecool", "link": "https://stackoverflow.com/users/838614/acecool"}, "edited": false, "score": 0, "creation_date": 1577026982, "post_id": 58738417, "comment_id": 105073325, "body": "ie: if I do Example.__money = AccessorFunc( parent = Example, name = &#39;Money&#39;, key = &#39;money&#39; ); then it will create self.money, self._money, and self.__money ( via the initialization of using Example.__money = ...; -- It will also create self.GetMoney( ), self.SetMoney( value ), and more. So I could do self.money = 100; and it would be identical to calling self.SetMoney( 100 ); I could also use self.AddMoney( 100 ) and it&#39;d be the same as self.money += 100; I could easily create a CanAfford function in the declaration."}, {"owner": {"reputation": 596, "user_id": 838614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/981adf8bdbd81093699d63e02f63b42b?s=128&d=identicon&r=PG", "display_name": "Acecool", "link": "https://stackoverflow.com/users/838614/acecool"}, "edited": false, "score": 0, "creation_date": 1577027199, "post_id": 58738417, "comment_id": 105073396, "body": "Basically, I create something like 16 object functions once per object, and I create 26 functions per name. -- The functions  .&lt;Get&gt;&lt;N&gt; .Get&lt;N&gt;Raw .Is&lt;Name&gt;Set .Get&lt;N&gt;ToString .Get&lt;N&gt;Len .Get&lt;N&gt;LenToString .Get&lt;N&gt;DefaultValue .Get&lt;N&gt;Property .Get&lt;N&gt;Accessor .Get&lt;N&gt;AllowedTypes .Get&lt;N&gt;AllowedValues .Get&lt;N&gt;BaseAllowedTypes .Get&lt;N&gt;BaseAllowedValues .&lt;N&gt;HasGetterPrefix .Get&lt;N&gt;GetterPrefix .Get&lt;N&gt;GetName .Get&lt;N&gt;GetKey .Get&lt;N&gt;AccessorKey .Get&lt;N&gt;DataKey .Set&lt;N&gt; .Add&lt;N&gt; .Pop&lt;N&gt; .Reset&lt;N&gt; .Get&lt;N&gt;Helpers .Get&lt;N&gt;Output .Get&lt;N&gt;GetterOutput -- for the named functions ( Money )"}, {"owner": {"reputation": 596, "user_id": 838614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/981adf8bdbd81093699d63e02f63b42b?s=128&d=identicon&r=PG", "display_name": "Acecool", "link": "https://stackoverflow.com/users/838614/acecool"}, "edited": false, "score": 0, "creation_date": 1577027496, "post_id": 58738417, "comment_id": 105073450, "body": "Dynamic functions are nothing new, AccessorFuncs are the grouping of these dynamic functions. Simple examples are just saying AccessorFunc( O = Object, name = &quot;Something&quot;, data_key = &quot;somewhere&quot; ); and the GetSomething, SetSomething functions get added to Object, and the data is stored in the somewhere reference. In Python, you can use properties but you don&#39;t get &#39;functions&#39;, which I do prefer but I also like how Python handles properties. Letting you do self.x = 123; and it going through a function. or self.x for the getter. etc.. so with my system, it does both and they&#39;re extensive."}, {"owner": {"reputation": 596, "user_id": 838614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/981adf8bdbd81093699d63e02f63b42b?s=128&d=identicon&r=PG", "display_name": "Acecool", "link": "https://stackoverflow.com/users/838614/acecool"}, "edited": false, "score": 0, "creation_date": 1577028388, "post_id": 58738417, "comment_id": 105073672, "body": "I have a way for you to view it: <a href=\"https://bitbucket.org/Acecool/acecoolcodemappingsystem/src/master/Acecool.py\" rel=\"nofollow noreferrer\">bitbucket.org/Acecool/acecoolcodemappingsystem/src/master/&hellip;</a> -- Right now everything is in 1 file, and it is ugly. Part of my recode has me making a proper package. AcecoolLib.util.accessor = the new location for it in my local example. A simpler example is this: <a href=\"https://www.dropbox.com/s/km8igw1oaj5fftc/accessorfunc_create_get_set_name_functions.py?dl=0\" rel=\"nofollow noreferrer\">dropbox.com/s/km8igw1oaj5fftc/&hellip;</a> -- but it doesn&#39;t have the property system at the time of posting. I&#39;ll add it, the link should remain the same. With this, you get GetMoney, GetMoneyToString, SetMoney functions."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "reply_to_user": {"reputation": 596, "user_id": 838614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/981adf8bdbd81093699d63e02f63b42b?s=128&d=identicon&r=PG", "display_name": "Acecool", "link": "https://stackoverflow.com/users/838614/acecool"}, "edited": false, "score": 0, "creation_date": 1577046925, "post_id": 58738417, "comment_id": 105078280, "body": "@Acecool note, double-underscore name-mangling is not for &quot;internal&quot; attributes, its to prevent name collisions in subclasses. Don&#39;t use it as a cheap substitute for access modifiers. That isn&#39;t what it is meant for, and that isn&#39;t what it gives you. In python, non-public members are conventionally denoted by the <i>single</i> underscore"}], "tags": [], "owner": {"reputation": 69906, "user_id": 6890912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d291e4dfbf14dcc8874bd4fa620fac23?s=128&d=identicon&r=PG&f=1", "display_name": "blhsing", "link": "https://stackoverflow.com/users/6890912/blhsing"}, "is_accepted": false, "score": 0, "last_activity_date": 1573074099, "creation_date": 1573074099, "answer_id": 58738417, "question_id": 58738303, "link": "https://stackoverflow.com/questions/58738303/python-how-do-you-reference-the-current-class-in-declaration-phase/58738417#58738417", "title": "Python: How do you reference the current class in declaration phase?", "body": "<p>You can always initialize such an attribute after the class is defined:</p>\n\n<pre><code>class Example:\n    pass\n\nExample.__money = AccessorFunc(parent=Example, key='money', name='Money', allowed_types=(int, float), default=0.0)\n</code></pre>\n"}], "owner": {"reputation": 596, "user_id": 838614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/981adf8bdbd81093699d63e02f63b42b?s=128&d=identicon&r=PG", "display_name": "Acecool", "link": "https://stackoverflow.com/users/838614/acecool"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1577042195, "creation_date": 1573073531, "last_edit_date": 1577042195, "question_id": 58738303, "link": "https://stackoverflow.com/questions/58738303/python-how-do-you-reference-the-current-class-in-declaration-phase", "title": "Python: How do you reference the current class in declaration phase?", "body": "<p>I'm trying to avoid having to create 2 classes for my AccessorFunc system by being able to target a class that is being 'declared', not initialized.</p>\n\n<p>Right now, I have to create 2 classes, and in the second, extend from the first and target the first. ie:</p>\n\n<pre><code>class ExampleBase( object ):\n    pass\nclass Example( ExampleBase ):\n    ## This creates self.__a, self._a, self.a, and also self.GetA( ), self.SetA( _value ), and more...\n    __a = AccessorFunc( parent = ExampleBase, key = 'a', name = 'A' );\n</code></pre>\n\n<p>This then adds the Accessor functions, etc.. to ExampleBase instead of Example. The problem with this, is the __ is created in Example, so if someone creates from ExampleBase they'd lose access to the reference to the accessor object which contains many helpers...</p>\n\n<p>I would like to be able to just do something like this:</p>\n\n<pre><code>class Example( object ):\n    ## Creates self.money ( Points to getter and setter / ie: property ), self._money ( data storage, raw - same as calling self.GetMoneyRaw( ) which could return None ) and self.__money ( Accessor object reference ) -- Note: setting Default doesn't mean it will initialize this default value. The raw data can be set to None, at which point the default is used. If the value is set, then it uses that value. Values are not set if an incorrect data-type is used.\n    __money = AccessorFunc( parent = this, key = 'money', name = 'Money', allowed_types = ( int, float ), default = 0.0 );\n</code></pre>\n\n<p>And, while the AccessorFunc system works beautifully and lets you avoid having to create hundreds of lines of repetitions for simple classes, and also generate other unique helpers such as Has*, or CanAfford( _x ) attached to the money accessor, and so much more... </p>\n\n<p>I am still limited that I have to create 2 objects... The reason I have to do __ = ...; is because __ is internal and I can't seem to generate it externally... So it makes a useful declaration point as the rest have no issues.</p>\n\n<p>Is it possible to target the current class in this way? You'd think yes - some way - but using the class-name doesn't work because the class doesn't 'exist' yet, but, while it is being built there must be some reference to the object being built... Does anyone know the reference? </p>\n\n<p>Thanks!</p>\n\n<p>Edit: A few have asked for examples of what my AccessorFunc system looks like...\nHere is a basic example: <a href=\"https://www.dropbox.com/s/km8igw1oaj5fftc/accessorfunc_create_get_set_name_functions.py?dl=0\" rel=\"nofollow noreferrer\">https://www.dropbox.com/s/km8igw1oaj5fftc/accessorfunc_create_get_set_name_functions.py?dl=0</a></p>\n\n<p>The other version is <a href=\"https://bitbucket.org/Acecool/acecoolcodemappingsystem/src/master/Acecool.py\" rel=\"nofollow noreferrer\">https://bitbucket.org/Acecool/acecoolcodemappingsystem/src/master/Acecool.py</a> -- but the newest version is properly packaged in AcecoolLib.util.accessor and when I complete the version 1.0.0 of Acecool Code Mapping System, will be included with it - or added as a new repo and linked....</p>\n\n<p>Right now it is a mess - but, I create something like 26 named functions and several object functions for helpers... So with a single line I can reset a ton of commands. One instance is with mapping code - I can quickly and easily reset the stored data with a single line, instead of 10+ lines as a single helper function.</p>\n\n<p>With the properties also being created, it allows you to use the keyed names, or you can use the named functions. It just depends on your taste, but some of the helper functions are so incredibly useful. It also makes it so that instead of writing thousands of mundane lines, I can write a few and have all of the features I need built in. If there is an issue - I update one area instead of hundreds of functions. etc... etc.. etc..</p>\n\n<p>But, I'm still interested in getting access to the object while being loaded into memory... There must be somewhere since it goes line by line - and class X is called prior, so there must be some debugging function to allow me to get that automatically...</p>\n\n<p>That way I don't need the ExampleBase pass Example ... __x = AccessorFunc( parent = ExampleBase, ... ) system... I could just do __x = AccessorFunc( ... ) and ignore parent, etc... One less arg and automatically grab the Example object, instead of Example base...</p>\n"}, {"tags": ["python", "django", "pagination", "django-pagination"], "answers": [{"comments": [{"owner": {"reputation": 5397, "user_id": 1361802, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/nsW0g.jpg?s=128&g=1", "display_name": "wonton", "link": "https://stackoverflow.com/users/1361802/wonton"}, "edited": false, "score": 0, "creation_date": 1573148881, "post_id": 58738969, "comment_id": 103796553, "body": "If it&#39;s an ordering problem, running this bit of code 100 times would eventually give me <code>True</code> but that&#39;s not the case. The problem here is that the sum of the slices deterministically lacks some rows."}, {"owner": {"reputation": 1147, "user_id": 2810842, "user_type": "registered", "profile_image": "https://graph.facebook.com/1485696508/picture?type=large", "display_name": "tstoev", "link": "https://stackoverflow.com/users/2810842/tstoev"}, "reply_to_user": {"reputation": 5397, "user_id": 1361802, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/nsW0g.jpg?s=128&g=1", "display_name": "wonton", "link": "https://stackoverflow.com/users/1361802/wonton"}, "edited": false, "score": 0, "creation_date": 1573155965, "post_id": 58738969, "comment_id": 103799546, "body": "can you pull the missing records only? is there a pattern"}], "tags": [], "owner": {"reputation": 1147, "user_id": 2810842, "user_type": "registered", "profile_image": "https://graph.facebook.com/1485696508/picture?type=large", "display_name": "tstoev", "link": "https://stackoverflow.com/users/2810842/tstoev"}, "is_accepted": false, "score": 0, "last_activity_date": 1573118591, "last_edit_date": 1573118591, "creation_date": 1573076763, "answer_id": 58738969, "question_id": 58738298, "link": "https://stackoverflow.com/questions/58738298/django-pagination-does-not-match-input-query/58738969#58738969", "title": "Django pagination does not match input Query", "body": "<p>the paginator simply slices the output of the query. That combined with the lazy queries returns the data in an order that is not necessary the same as the entire query. In short there is nothing wrong with the paginator or the query set, you are simply comparing two lists that are ordered in a different way(as you noticed by adding the id).  </p>\n"}], "owner": {"reputation": 5397, "user_id": 1361802, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/nsW0g.jpg?s=128&g=1", "display_name": "wonton", "link": "https://stackoverflow.com/users/1361802/wonton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 22, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1573118591, "creation_date": 1573073509, "question_id": 58738298, "link": "https://stackoverflow.com/questions/58738298/django-pagination-does-not-match-input-query", "title": "Django pagination does not match input Query", "body": "<p>I have a bit of code that looks something like this.</p>\n\n<pre><code>page_objects = Page.objects.exclude(lorem).filter(blah).annotate(key=bar).order_by(foo)\npaginator = Paginator(page_objects, 50)\n</code></pre>\n\n<p>On my UI, I notice that with certain values of <code>bar</code>, I am missing rows in the output. I ran\nan experiment to compare the output of paginator against that of the query.</p>\n\n<pre><code>page_results = []\nfor page_number in paginator.page_range:\n    result = paginator.page(page_number)\n    page_results += result.object_list\npaginator_ids = sorted([x.id for x in page_results])\npage_object_ids = sorted(x.id for x in list(page_objects))\nprint(paginator_ids == page_object_ids) =&gt; FALSE\nprint(len(paginator_ids) == len(page_object_ids)) =&gt; TRUE\n</code></pre>\n\n<p>As you can see, the list of objects in the query and the list of all objects in the paginator did not match. I visually inspected the lists to confirm that this is correct (the ids in the two lists are clearly different).</p>\n\n<p>I am on <code>Django==1.11.3</code></p>\n\n<p>What is going on and why is my paginator not behaving like the docs?</p>\n\n<p>Interestingly, if I change the <code>order_by</code> to <code>order_by(foo, 'id')</code>, the paginator behaves as expected. </p>\n"}, {"tags": ["python", "regex"], "comments": [{"owner": {"reputation": 7801, "user_id": 1212401, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ed478436fcb05fd3ae15da650d2a8cd6?s=128&d=identicon&r=PG", "display_name": "Chris Doyle", "link": "https://stackoverflow.com/users/1212401/chris-doyle"}, "edited": false, "score": 1, "creation_date": 1573073954, "post_id": 58738281, "comment_id": 103766784, "body": "your are using two capture groups in the first regex and only one in the second. so why would you expect them to return the same result? have a look in <code>text.groups()</code> you should see the difference. remember when the first capture groups expression doesnt match that capture group will be empty....."}, {"owner": {"reputation": 2813, "user_id": 694162, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/JA3Co.jpg?s=128&g=1", "display_name": "sauerburger", "link": "https://stackoverflow.com/users/694162/sauerburger"}, "edited": false, "score": 0, "creation_date": 1573074236, "post_id": 58738281, "comment_id": 103766886, "body": "In short, you can get <code>More </code> in the first case with <code>text.group(2)</code>. It looks like you are parsing xml using regular expressions yourself. There are more suiltable packages in python."}, {"owner": {"user_type": "does_not_exist", "display_name": "user12097764"}, "edited": false, "score": 0, "creation_date": 1573077291, "post_id": 58738281, "comment_id": 103767983, "body": "Consolidating the first regex to this <code>&lt;w:p(?:[ ].*?)?&gt;|&lt;w:t(?:[ ].*?)?&gt;(.*?)&lt;&#47;w:t&gt;</code> will solve the problem."}], "answers": [{"tags": [], "owner": {"reputation": 7801, "user_id": 1212401, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ed478436fcb05fd3ae15da650d2a8cd6?s=128&d=identicon&r=PG", "display_name": "Chris Doyle", "link": "https://stackoverflow.com/users/1212401/chris-doyle"}, "is_accepted": true, "score": 2, "last_activity_date": 1573075005, "last_edit_date": 1573075005, "creation_date": 1573074219, "answer_id": 58738440, "question_id": 58738281, "link": "https://stackoverflow.com/questions/58738281/python-regular-expression-doesnt-match-group-when-ored-with-other-expressions/58738440#58738440", "title": "Python regular expression doesn&#39;t match group when ORed with other expressions", "body": "<p>Your first regex has two capture groups in it and your second regex only has one. In your first regex your using or's so when it reches the expression with the first capture group, it doesnt match so this capture group is empty, your second capture group matches so the value is stored in your 2nd capture group. </p>\n\n<p>So after the first regex runs the first capture group is empty and the second is populated. </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import re\n\ndata = '&lt;w:t xml:space=\"preserve\"&gt;More &lt;/w:t&gt;'\ntext = re.search(\"&lt;w:p&gt;|&lt;w:p .*?&gt;|&lt;w:t&gt;(.*?)&lt;/w:t&gt;|&lt;w:t .*?&gt;(.*?)&lt;/w:t&gt;\", data)\nprint(\"First RE\")\nprint(text.groups())\nprint(\"Second RE\")\ntext = re.search(\"&lt;w:t .*?&gt;(.*?)&lt;/w:t&gt;\", data)\nprint(text.groups())\n</code></pre>\n\n<p><strong>OUTPUT</strong></p>\n\n<pre><code>First RE\n(None, 'More ')\nSecond RE\n('More ',)\n</code></pre>\n\n<p>So your issue is your only looking at the first capture group but in your first regex that capture group is empty. So when your inside the try block, your trying to concatenate <code>\"group(1)</code> with the value from the first capture group. However you can only concat two strings and the type of your value in the first capture groups is <code>None</code> so this would trigger an exception <code>TypeError: can only concatenate str (not \"NoneType\") to str</code> which you then catch and ignore. </p>\n\n<p>thats why you dont see the print.</p>\n"}], "owner": {"reputation": 1340, "user_id": 7218062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0e0d5a2d3c49c93f1aafd67adaaca59?s=128&d=identicon&r=PG&f=1", "display_name": "jmq", "link": "https://stackoverflow.com/users/7218062/jmq"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 58738440, "answer_count": 1, "score": 0, "last_activity_date": 1573075005, "creation_date": 1573073429, "last_edit_date": 1573073768, "question_id": 58738281, "link": "https://stackoverflow.com/questions/58738281/python-regular-expression-doesnt-match-group-when-ored-with-other-expressions", "title": "Python regular expression doesn&#39;t match group when ORed with other expressions", "body": "<p>I've been trying to debug a strange problem with regular expressions.  I've reduced it down to a simple case here.  I'm checking a string for any of four regular expressions.  My string matches the regular expression but the grouping value in parenthesis that I'm trying to extract doesn't work with what I have coded up.  What I can't figure out is that if I just search for one expression both the entire string that i'm trying to match on and the value I want to extract are calculated correctly.  However, when I search using all four expressions the string still matches [group(0)] but I don't get the field that I need [group(1)].</p>\n\n<pre><code>#!/usr/bin/python3\n\nimport re\n\ndata = '&lt;w:t xml:space=\"preserve\"&gt;More &lt;/w:t&gt;'\n\ntext = re.search(\"&lt;w:p&gt;|&lt;w:p .*?&gt;|&lt;w:t&gt;(.*?)&lt;/w:t&gt;|&lt;w:t .*?&gt;(.*?)&lt;/w:t&gt;\", data)\nprint(\"First RE\")\nprint(\"group(0) \" + text.group(0))\ntry:\n    print(\"group(1) \" + text.group(1))\nexcept:\n    pass\n\nprint(\"Second RE\")\ntext = re.search(\"&lt;w:t .*?&gt;(.*?)&lt;/w:t&gt;\", data)\nprint(\"group(0) \" + text.group(0))\ntry:\n    print(\"group(1) \" + text.group(1))\nexcept:\n    pass\n</code></pre>\n\n<p>When I run it I get this result:</p>\n\n<pre><code>First RE\ngroup(0) &lt;w:t xml:space=\"preserve\"&gt;More &lt;/w:t&gt;\nSecond RE\ngroup(0) &lt;w:t xml:space=\"preserve\"&gt;More &lt;/w:t&gt;\ngroup(1) More \n</code></pre>\n\n<p>I would expect both regular expressions to return the same results.  Could someone explain why they don't?  According to the documentation the OR \"|\" has a low precedence so i'm not why/if the other regular expressions are impacting it.  Thanks!</p>\n"}, {"tags": ["python", "python-3.x"], "answers": [{"tags": [], "owner": {"reputation": 149, "user_id": 7881192, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-amtuvNfklW4/AAAAAAAAAAI/AAAAAAAAAhQ/-8aWnFV04XQ/photo.jpg?sz=128", "display_name": "James Gabriel", "link": "https://stackoverflow.com/users/7881192/james-gabriel"}, "is_accepted": false, "score": 0, "last_activity_date": 1573074151, "creation_date": 1573074151, "answer_id": 58738427, "question_id": 58738272, "link": "https://stackoverflow.com/questions/58738272/how-can-you-generate-a-list-containing-a-mix-of-consecutive-numbers-and-letters/58738427#58738427", "title": "How can you generate a list containing a mix of consecutive numbers and letters?", "body": "<p>You should check out the package <code>itertools</code>! It is awesome for generating combinations/permutations of anything.</p>\n\n<pre><code>import itertools\na = list(itertools.permutations([1,2,\"A\",\"B\"])))\nprint(a)\n</code></pre>\n\n<p>The example mixes all of the numbers and letters together (I'm not totally clear on your problem statement). It should be pretty easy to make permutations/combinations of your letters, permutations/combinations of numbers, and mix them together in to the final result if you want them ordered together.</p>\n\n<p>File types? That is a personal preference. <code>.json</code> would work well because you can save lists of lists of things.</p>\n\n<pre><code>import json\n\nmy_list = [['a', 'b','c'], ['b', 'a','c']]\nwith open(\"my_numbers.json\", \"w\") as fp:\n    json.dump(my_list, fp)\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 12334273, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36668f4aa229e79609ffdacc5e3c7012?s=128&d=identicon&r=PG&f=1", "display_name": "HughVO", "link": "https://stackoverflow.com/users/12334273/hughvo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 19, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1573074151, "creation_date": 1573073387, "last_edit_date": 1573073601, "question_id": 58738272, "link": "https://stackoverflow.com/questions/58738272/how-can-you-generate-a-list-containing-a-mix-of-consecutive-numbers-and-letters", "title": "How can you generate a list containing a mix of consecutive numbers and letters?", "body": "<p>How would I go about generating the full list of possible iterations from at A1 AAA to Y999YYY? Would such as list be a struggle for my computer processor to generate?\nWhat type of file would be the best to save such a list in order to be searched later?</p>\n"}, {"tags": ["python", "list", "operands"], "comments": [{"owner": {"reputation": 37822, "user_id": 1231450, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b9c98b4ce12bf9fd925d8c35c8861bb2?s=128&d=identicon&r=PG", "display_name": "Jan", "link": "https://stackoverflow.com/users/1231450/jan"}, "edited": false, "score": 4, "creation_date": 1573073283, "post_id": 58738240, "comment_id": 103766520, "body": "It would be of great help if you provided some real values."}, {"owner": {"reputation": 1146, "user_id": 2809411, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/iIma1.jpg?s=128&g=1", "display_name": "Lewis Menelaws", "link": "https://stackoverflow.com/users/2809411/lewis-menelaws"}, "edited": false, "score": 5, "creation_date": 1573073330, "post_id": 58738240, "comment_id": 103766529, "body": "Your <code>list_of_less</code> list is being cleared out every loop from your first loop. Try moving outside of the for loop."}, {"owner": {"reputation": 875, "user_id": 6698273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/29c77a7034e4def459c75c7fa1ee5e7d?s=128&d=identicon&r=PG&f=1", "display_name": "BlooB", "link": "https://stackoverflow.com/users/6698273/bloob"}, "edited": false, "score": 1, "creation_date": 1573073348, "post_id": 58738240, "comment_id": 103766538, "body": "why do you have list_of_less = [] inside the for loop?"}, {"owner": {"reputation": 11919, "user_id": 9183344, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U7r5r.png?s=128&g=1", "display_name": "r.ook", "link": "https://stackoverflow.com/users/9183344/r-ook"}, "edited": false, "score": 0, "creation_date": 1573073362, "post_id": 58738240, "comment_id": 103766542, "body": "You are comparing each of your value to all other values.  The only one that can possibly fail the &quot;less than&quot; test is the maximum value(s) of the list.  Everything else will always be less than the maximum value, thus returned.  If you fixed the <code>list_of_less</code> being reassigned each loop, the list would be exponentially large from your base list."}, {"owner": {"reputation": 875, "user_id": 6698273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/29c77a7034e4def459c75c7fa1ee5e7d?s=128&d=identicon&r=PG&f=1", "display_name": "BlooB", "link": "https://stackoverflow.com/users/6698273/bloob"}, "edited": false, "score": 0, "creation_date": 1573073449, "post_id": 58738240, "comment_id": 103766582, "body": "also is list_of_attribute a list of lists?"}, {"owner": {"reputation": 11919, "user_id": 9183344, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U7r5r.png?s=128&g=1", "display_name": "r.ook", "link": "https://stackoverflow.com/users/9183344/r-ook"}, "edited": false, "score": 0, "creation_date": 1573073791, "post_id": 58738240, "comment_id": 103766721, "body": "Did you mean to <code>print(list_of_less)</code> for each <code>key</code>? Then simply indent your <code>print</code> statement inside the <code>for key...</code> loop."}, {"owner": {"reputation": 4108, "user_id": 977593, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/afRtt.jpg?s=128&g=1", "display_name": "slackmart", "link": "https://stackoverflow.com/users/977593/slackmart"}, "edited": false, "score": 0, "creation_date": 1573074528, "post_id": 58738240, "comment_id": 103767005, "body": "What&#39;s value_pos?  Assuming value_pos is 11.67, I get a TypeError: indices must be integers or slices, not float.. please fix your example"}, {"owner": {"reputation": 362, "user_id": 10325786, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ti4GGbQxrp0/AAAAAAAAAAI/AAAAAAAAAPU/IjwbItV764U/photo.jpg?sz=128", "display_name": "Romain F", "link": "https://stackoverflow.com/users/10325786/romain-f"}, "edited": false, "score": 0, "creation_date": 1573075257, "post_id": 58738240, "comment_id": 103767285, "body": "It is not clear for me if you want your values to appear only once in the output list or multiple times. So far, as I understand, you eliminate the greatest value, the second greatest will appear once, the third greatest will appear twice, etc..."}, {"owner": {"reputation": 71, "user_id": 9597736, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-y4wuMHc-KNA/AAAAAAAAAAI/AAAAAAAAAF4/4a7KgRRZdFQ/photo.jpg?sz=128", "display_name": "Brian ", "link": "https://stackoverflow.com/users/9597736/brian"}, "edited": false, "score": 0, "creation_date": 1573075589, "post_id": 58738240, "comment_id": 103767386, "body": "Thanks for the comments. I moved <code>list_of_lists</code> outside the loop. I want to loop through each value of <code>attribute</code>, check which values are less than the tested value and add them to <code>list_of_less</code>."}, {"owner": {"reputation": 4108, "user_id": 977593, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/afRtt.jpg?s=128&g=1", "display_name": "slackmart", "link": "https://stackoverflow.com/users/977593/slackmart"}, "edited": false, "score": 0, "creation_date": 1573077257, "post_id": 58738240, "comment_id": 103767969, "body": "<code>attribute = [(11.67, &#39;width&#39;), (13.86, &#39;width&#39;), (8.02, &#39;height&#39;)]; value = 11.67; print filter(lambda item: item[0] &lt; value, attribute)</code> will print (8.02, &#39;height&#39;)"}], "owner": {"reputation": 71, "user_id": 9597736, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-y4wuMHc-KNA/AAAAAAAAAAI/AAAAAAAAAF4/4a7KgRRZdFQ/photo.jpg?sz=128", "display_name": "Brian ", "link": "https://stackoverflow.com/users/9597736/brian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 129, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1573073737, "creation_date": 1573073199, "last_edit_date": 1573073737, "question_id": 58738240, "link": "https://stackoverflow.com/questions/58738240/less-than-operator-is-not-working-in-python", "title": "&quot;Less than&quot; operator is not working in Python", "body": "<p>I am trying to check if one value is less than the other, and then placing the lesser value in a new list but instead every value being tested is going into the new list, instead of just the lesser values.</p>\n\n<p><em>attribute</em> is a list of data containing a tuple, with a float value in index 0 and an attribute name in index 1. </p>\n\n<p>I have two loops in order to compare each value with the rest.</p>\n\n<p>If the value is less than the one being compared it should append it to the list <em>list_of_less</em></p>\n\n<p>Instead, when printing out the final list, every value from attribute is being printed, not just the lesser values</p>\n\n<p>Any help is appreciated, thanks.</p>\n\n<pre><code>attribute = list_of_attribute[0]\nfor key in attribute:\n    list_of_less = []\n    for x in attribute:\n        if x[value_pos] &lt; key[value_pos]:\n            list_of_less.append(x[value_pos])\nprint(list_of_less)\n</code></pre>\n\n<p>Here is a sample of <em>attribute</em></p>\n\n<pre><code>[(11.67, 'width'), (13.86, 'width'), (8.02, 'height'), ...\n</code></pre>\n\n<p>Here is the output for such code</p>\n\n<pre><code>[11.67, 13.86, 8.02, ...\n</code></pre>\n\n<p>As you can see it prints everything, when in fact it should only print anything less that <strong>11.67</strong></p>\n"}, {"tags": ["python", "django", "django-models"], "answers": [{"comments": [{"owner": {"reputation": 319, "user_id": 11419848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4428c8e99c5afac796cb10dbfa165a3?s=128&d=identicon&r=PG&f=1", "display_name": "alcoder", "link": "https://stackoverflow.com/users/11419848/alcoder"}, "edited": false, "score": 0, "creation_date": 1573074020, "post_id": 58738276, "comment_id": 103766801, "body": "Thank you, but I have error 1. I remove migrations  0001_initial.py and <b>pycache</b> 2. python manage.py makemigrations 3.  python manage.py migrate --fake vacancy_list  zero 4. python manage.py migrate  After the last command I have <b>django.db.utils.OperationalError: table &quot;vacancy_list_company&quot; already exists</b>"}, {"owner": {"reputation": 319, "user_id": 11419848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4428c8e99c5afac796cb10dbfa165a3?s=128&d=identicon&r=PG&f=1", "display_name": "alcoder", "link": "https://stackoverflow.com/users/11419848/alcoder"}, "edited": false, "score": 0, "creation_date": 1573074402, "post_id": 58738276, "comment_id": 103766958, "body": "&quot;Company&quot; -- is my class in models.py"}], "tags": [], "owner": {"reputation": 861, "user_id": 11388428, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/57zro.png?s=128&g=1", "display_name": "dtar", "link": "https://stackoverflow.com/users/11388428/dtar"}, "is_accepted": true, "score": 1, "last_activity_date": 1573073403, "creation_date": 1573073403, "answer_id": 58738276, "question_id": 58738196, "link": "https://stackoverflow.com/questions/58738196/exception-value-no-such-table-vacancy-list-advuser/58738276#58738276", "title": "Exception Value: no such table: vacancy_list_advuser", "body": "<pre><code>python manage.py migrate --fake APPNAME zero\n</code></pre>\n\n<p>And then run the migrate script</p>\n\n<pre><code>python manage.py migrate \n</code></pre>\n\n<p>Hope this helps!</p>\n"}, {"tags": [], "owner": {"reputation": 1146, "user_id": 2809411, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/iIma1.jpg?s=128&g=1", "display_name": "Lewis Menelaws", "link": "https://stackoverflow.com/users/2809411/lewis-menelaws"}, "is_accepted": false, "score": 1, "last_activity_date": 1573073487, "creation_date": 1573073487, "answer_id": 58738293, "question_id": 58738196, "link": "https://stackoverflow.com/questions/58738196/exception-value-no-such-table-vacancy-list-advuser/58738293#58738293", "title": "Exception Value: no such table: vacancy_list_advuser", "body": "<p><a href=\"https://stackoverflow.com/a/53637669/2809411\">According to this answer.</a> You might need to downgrade your version of SQLite. A common issue I've run into.</p>\n"}], "owner": {"reputation": 319, "user_id": 11419848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4428c8e99c5afac796cb10dbfa165a3?s=128&d=identicon&r=PG&f=1", "display_name": "alcoder", "link": "https://stackoverflow.com/users/11419848/alcoder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 907, "favorite_count": 0, "accepted_answer_id": 58738276, "answer_count": 2, "score": 1, "last_activity_date": 1573074716, "creation_date": 1573072957, "last_edit_date": 1573073266, "question_id": 58738196, "link": "https://stackoverflow.com/questions/58738196/exception-value-no-such-table-vacancy-list-advuser", "title": "Exception Value: no such table: vacancy_list_advuser", "body": "<p>I added user class for registration <strong>AdvUser</strong>\nWhen I want to login or register, or createsuperuser I receive error:</p>\n\n<blockquote>\n  <p>Exception Value:  no such table: vacancy_list_advuser</p>\n  \n  <p>File \"/home/alex/dev/python/django/junjob/myvenv/lib/python3.5/site-packages/django/db/backends/sqlite3/base.py\", line 305, in execute\n      return Database.Cursor.execute(self, query, params)\n  django.db.utils.OperationalError: no such table: vacancy_list_advuser</p>\n</blockquote>\n\n<p>What I did</p>\n\n<ol>\n<li>Checked <code>AUTH_USER_MODEL = 'vacancy_list.AdvUser' # &lt;app_name.model_name&gt;</code></li>\n<li>Removed all migrations in <strong>vacancy_list/migrations</strong> then did makemigrations and migrate</li>\n<li>python manage.py migrate --run-syncdb</li>\n</ol>\n\n<p><strong>What should I do to solve problem?</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/eKowI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/eKowI.png\" alt=\"enter image description here\"></a></p>\n\n<p>My code:</p>\n\n<p><strong>models.py</strong></p>\n\n<pre><code>from django.conf import settings\nfrom django.db import models\nfrom django.utils import timezone\nfrom django.contrib.auth.models import AbstractUser\nfrom django.db import models\nfrom django.dispatch import Signal\n\nfrom .utilities import send_activation_notification\n\n\nclass Company(models.Model):\n    name = models.CharField(max_length=200)\n    about = models.TextField()\n\n    def __str__(self):\n        return self.name\n\n\nclass Vacancy(models.Model):\n    company_key = models.ForeignKey(Company, on_delete=models.CASCADE)\n    title = models.CharField(max_length=200)\n    salary = models.CharField(max_length=200, default='40.000')\n    text = models.TextField(default=\"The text about vacancy\")\n    city = models.CharField(max_length=200, default='\u041c\u043e\u0441\u043a\u0432\u0430')\n    date_str = models.CharField(max_length=50, default='12 \u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044f')\n\n    created_date = models.DateTimeField(default=timezone.now)\n    published_date = models.DateTimeField(blank=True, null=True)\n\n    def publish(self):\n        self.published_date = timezone.now()\n        self.save()\n\n    def __str__(self):\n        return self.title\n\n\nclass AdvUser(AbstractUser):\n    \"\"\" Model of user for registration \"\"\"\n    is_activated = models.BooleanField(default=True, db_index=True, verbose_name='\u041f\u0440\u043e\u0448\u0451\u043b \u0430\u043a\u0442\u0438\u0432\u0430\u0446\u0438\u044e?')\n    send_messages = models.BooleanField(default=True, verbose_name='\u0421\u043b\u0430\u0442\u044c \u043e\u043f\u043e\u0432\u0435\u0449\u0451\u043d\u0438\u044f \u043e \u043d\u043e\u0432\u044b\u0445 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u044f\u0445?')\n\n    class Meta(AbstractUser.Meta):\n        pass\n\n\nuser_registrated = Signal(providing_args=['instance'])\n\n\ndef user_registrated_dispatcher(sender, **kwargs):\n    send_activation_notification(kwargs['instance'])\n\n\nuser_registrated.connect(user_registrated_dispatcher)\n</code></pre>\n\n<p><strong>urls.py</strong></p>\n\n<pre><code>urlpatterns = [\n    path('', HomePageView.as_view(), name='vacancy_list'),\n    path('search/', SearchResultsView.as_view(), name='search_results'),\n    path('vacancy/&lt;int:pk&gt;/', views.vacancy_detail, name='vacancy_detail'),\n\n    path('accounts/login/', BBLoginView.as_view(), name='login'),\n    path('accounts/profile/', profile, name='profile'),\n    path('accounts/logout/', BBLogoutView.as_view(), name='logout'),\n\n    path('accounts/register/done', RegisterDoneView.as_view(), name='register_done'),\n    path('accounts/register/', RegisterUserView.as_view(), name='register'),\n    path('accounts/register/activate/&lt;str:sign&gt;/', user_activate, name='register_activate'),\n    # path('', views.post_list, name='post_list'),\n]\n</code></pre>\n\n<p><strong>views.py</strong></p>\n\n<pre><code>''' Registration views '''\n\nclass BBLoginView(LoginView):\n    template_name = 'vacancy_list/login.html'\n\nclass BBLogoutView(LoginRequiredMixin, LogoutView):\n    template_name = 'vacancy_list/logout.html'\n\n@login_required\ndef profile(request):\n    return render(request, 'vacancy_list/profile.html')\n\nclass RegisterUserView(CreateView):\n    model = AdvUser\n    template_name = 'vacancy_list/register_user.html'\n    form_class = RegisterUserForm\n    success_url = reverse_lazy('register_done')\n\nclass RegisterDoneView(TemplateView):\n    template_name = \"vacancy_list/register_done.html\"\n\n\ndef user_activate(request, sign):\n    try:\n        username = signer.unsign(sign)\n    except:\n        return render(request, 'vacancy_list/bad_signature.html')\n    user = get_object_or_404(AdvUser, username=username)\n    if user.is_activated:\n        template = 'vacancy_list/user_is_activated.html'\n    else:\n        template = 'vacancy_list/activation_done.html'\n        user.is_active = True\n        user.is_activated = True\n        user.save()\n    return render(request, template)\n</code></pre>\n\n<p><strong>base.html</strong> --> links to registration</p>\n\n<pre><code>{% load static %}\n&lt;html&gt;\n    &lt;head&gt;\n        &lt;title&gt;My blog&lt;/title&gt;\n        &lt;!-- Add Bootstrap4 --&gt;\n        &lt;link href=\"{% static 'vendor/bootstrap/css/bootstrap.min.css' %}\" rel=\"stylesheet\"&gt;\n\n\n        &lt;style&gt;\n            html,\n            body {\n              height: 100%;\n            }\n\n            #page-content {\n              flex: 1 0 auto;\n            }\n\n            #sticky-footer {\n              flex-shrink: none;\n            }\n        &lt;/style&gt;\n    &lt;/head&gt;\n\n    &lt;body class=\"d-flex flex-column\"&gt;\n        &lt;div id=\"page-content\"&gt;\n                &lt;!-- Navigation --&gt;\n          &lt;nav class=\"navbar navbar-expand-lg navbar-dark bg-dark static-top\"&gt;\n            &lt;div class=\"container\"&gt;\n              &lt;a class=\"navbar-brand\" href=\"/\"&gt;JunJob&lt;/a&gt;\n              &lt;button class=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarResponsive\" aria-controls=\"navbarResponsive\" aria-expanded=\"false\" aria-label=\"Toggle navigation\"&gt;\n                &lt;span class=\"navbar-toggler-icon\"&gt;&lt;/span&gt;\n              &lt;/button&gt;\n              &lt;div class=\"collapse navbar-collapse\" id=\"navbarResponsive\"&gt;\n                &lt;ul class=\"navbar-nav ml-auto\"&gt;\n                  &lt;li class=\"nav-item active\"&gt;\n                    &lt;a class=\"nav-link\" href=\"#\"&gt;Home\n                      &lt;span class=\"sr-only\"&gt;(current)&lt;/span&gt;\n                    &lt;/a&gt;\n                  &lt;/li&gt;\n                  {% if user.is_authenticated %}\n                    &lt;li class=\"nav-item active\"&gt;\n                      &lt;a class=\"nav-link\" href=\"\"&gt;&lt;font color=\"red\"&gt;{{ user }}&lt;/font&gt;\n                        &lt;span class=\"sr-only\"&gt;(current)&lt;/span&gt;\n                      &lt;/a&gt;\n                    &lt;/li&gt;\n\n                    &lt;li class=\"nav-item active\"&gt;\n                    &lt;a class=\"nav-link\" href=\"{% url 'logout' %}\"&gt;Logout\n                      &lt;span class=\"sr-only\"&gt;(current)&lt;/span&gt;\n                    &lt;/a&gt;\n                  &lt;/li&gt;\n                  {% else %}\n                  &lt;li class=\"nav-item active\"&gt;\n                    &lt;a class=\"nav-link\" href=\"{% url 'login' %}\"&gt;Login\n                      &lt;span class=\"sr-only\"&gt;(current)&lt;/span&gt;\n                    &lt;/a&gt;\n                  &lt;/li&gt;\n                  &lt;li class=\"nav-item active\"&gt;\n                    &lt;a class=\"nav-link\" href=\"{% url 'register' %}\"&gt;Register\n                      &lt;span class=\"sr-only\"&gt;(current)&lt;/span&gt;\n                    &lt;/a&gt;\n                  &lt;/li&gt;\n                  {% endif %}\n                &lt;/ul&gt;\n              &lt;/div&gt;\n            &lt;/div&gt;\n          &lt;/nav&gt;\n            {% block content %}\n            {% endblock %}\n        &lt;/div&gt;\n\n  &lt;footer class=\"py-5 bg-dark\"&gt;\n    &lt;div class=\"container\"&gt;\n      &lt;p class=\"m-0 text-center text-white\"&gt;Copyright &amp;copy; Your Website 2019&lt;/p&gt;\n    &lt;/div&gt;\n\n  &lt;/footer&gt;\n\n  &lt;!-- Bootstrap core JavaScript --&gt;\n  &lt;script src=\"{% static 'vendor/jquery/jquery.slim.min.js' %}\"&gt;&lt;/script&gt;\n  &lt;script src=\"{% static 'vendor/bootstrap/js/bootstrap.bundle.min.js' %}\"&gt;&lt;/script&gt;\n\n    &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "logging"], "comments": [{"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1573146511, "post_id": 58738195, "comment_id": 103795447, "body": "There is nothing special about the console logger. Are you certain that you haven&#39;t already called <code>basicConfig</code> before?"}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1573146679, "post_id": 58738195, "comment_id": 103795514, "body": "What is <code>_logger</code> here? Could you please add a small test script that reproduces the issue? Perhaps use <code>&quot;-d&quot; in sys.argv</code> as a test to switch between log levels, and that uses <code>requests</code> to make a request to something."}, {"owner": {"reputation": 2666, "user_id": 1090360, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/VRQdK.jpg?s=128&g=1", "display_name": "JackTheKnife", "link": "https://stackoverflow.com/users/1090360/jacktheknife"}, "reply_to_user": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1573150209, "post_id": 58738195, "comment_id": 103797079, "body": "@MartijnPieters I have updated OP. Regarding adding arguments I have added in my initial issue described here <a href=\"https://stackoverflow.com/q/58735405/1090360\">stackoverflow.com/q/58735405/1090360</a> which the outcome is current problem. <code>basicConfig</code> is called only in case of the verbose request. Log files should be created all the time."}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1573185294, "post_id": 58738195, "comment_id": 103807609, "body": "Your code only sets the current logger to level debug; basicConfig sets the root logger level. Urllib3 is not logging through your local logger object, it goes to the root and handlers there."}, {"owner": {"reputation": 2666, "user_id": 1090360, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/VRQdK.jpg?s=128&g=1", "display_name": "JackTheKnife", "link": "https://stackoverflow.com/users/1090360/jacktheknife"}, "reply_to_user": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1573225035, "post_id": 58738195, "comment_id": 103823601, "body": "@MartijnPieters so do I need to have two loggers then - one for the stdout and one for the log files?"}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1573225753, "post_id": 58738195, "comment_id": 103824028, "body": "No, but you are currently configuring two different things here."}, {"owner": {"reputation": 2666, "user_id": 1090360, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/VRQdK.jpg?s=128&g=1", "display_name": "JackTheKnife", "link": "https://stackoverflow.com/users/1090360/jacktheknife"}, "reply_to_user": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1573226837, "post_id": 58738195, "comment_id": 103824639, "body": "@MartijnPieters OK, so how can I set logger which will log to the file as <code>logging.DEBUG</code> and will log same data as stdout does when run as verbose?"}], "answers": [{"comments": [{"owner": {"reputation": 2666, "user_id": 1090360, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/VRQdK.jpg?s=128&g=1", "display_name": "JackTheKnife", "link": "https://stackoverflow.com/users/1090360/jacktheknife"}, "edited": false, "score": 0, "creation_date": 1573228718, "post_id": 58769712, "comment_id": 103825709, "body": "And what happened to the <code>_logger = logging.getLogger()</code> in the case above? How should I call <code>_logger</code> in that case?"}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "reply_to_user": {"reputation": 2666, "user_id": 1090360, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/VRQdK.jpg?s=128&g=1", "display_name": "JackTheKnife", "link": "https://stackoverflow.com/users/1090360/jacktheknife"}, "edited": false, "score": 0, "creation_date": 1573228799, "post_id": 58769712, "comment_id": 103825757, "body": "@JackTheKnife: you are free to use your own logger still, just don&#39;t put handlers on it. If you have other code that calls <code>_logger.log()</code> or any of the level-specific methods, then that&#39;s fine. You just wouldn&#39;t use it in <code>setup_logging()</code>."}, {"owner": {"reputation": 2666, "user_id": 1090360, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/VRQdK.jpg?s=128&g=1", "display_name": "JackTheKnife", "link": "https://stackoverflow.com/users/1090360/jacktheknife"}, "edited": false, "score": 0, "creation_date": 1573229108, "post_id": 58769712, "comment_id": 103825912, "body": "That is the case to use <code>setup_logging()</code> to have verbose to the console based on passed there level when log to file will keep it going on the DEBUG level. I have tried to use your solution but no logs were produced from it to the console or file."}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "reply_to_user": {"reputation": 2666, "user_id": 1090360, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/VRQdK.jpg?s=128&g=1", "display_name": "JackTheKnife", "link": "https://stackoverflow.com/users/1090360/jacktheknife"}, "edited": false, "score": 0, "creation_date": 1573229352, "post_id": 58769712, "comment_id": 103826054, "body": "@JackTheKnife: yes, the file handler is specifically configured to use level DEBUG. I tried this out just now, it works as exactly as expected."}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "reply_to_user": {"reputation": 2666, "user_id": 1090360, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/VRQdK.jpg?s=128&g=1", "display_name": "JackTheKnife", "link": "https://stackoverflow.com/users/1090360/jacktheknife"}, "edited": false, "score": 0, "creation_date": 1573229537, "post_id": 58769712, "comment_id": 103826151, "body": "@JackTheKnife: are you certain <code>basicConfig()</code> wasn&#39;t already called? You can add <code>force=True</code> to the <code>basicConfig()</code> call to have it remove all previous handlers and force setting your own."}, {"owner": {"reputation": 2666, "user_id": 1090360, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/VRQdK.jpg?s=128&g=1", "display_name": "JackTheKnife", "link": "https://stackoverflow.com/users/1090360/jacktheknife"}, "edited": false, "score": 0, "creation_date": 1573229767, "post_id": 58769712, "comment_id": 103826265, "body": "I have only one <code>basicConfig</code> in the <code>setup_logging()</code> then for testing purposes I have added      <code>setup_logging(logging.DEBUG)  logger = logging.getLogger()  logger.info(&quot;INFO test&quot;)  logger.debug(&quot;DEBUG test&quot;)</code> in the <code>main()</code>"}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "reply_to_user": {"reputation": 2666, "user_id": 1090360, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/VRQdK.jpg?s=128&g=1", "display_name": "JackTheKnife", "link": "https://stackoverflow.com/users/1090360/jacktheknife"}, "edited": false, "score": 0, "creation_date": 1573230086, "post_id": 58769712, "comment_id": 103826435, "body": "@JackTheKnife: without seeing how you call this (as a proper mcve that reproduces the issue) I can&#39;t help you, I&#39;m sorry. The code in my answer, when adding to a file and then with <code>setup_logging(logging.DEBUG)</code> and <code>requests.get(&quot;....&quot;)</code> produces the output I show in my answer, both on the console and in the log file."}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "reply_to_user": {"reputation": 2666, "user_id": 1090360, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/VRQdK.jpg?s=128&g=1", "display_name": "JackTheKnife", "link": "https://stackoverflow.com/users/1090360/jacktheknife"}, "edited": false, "score": 0, "creation_date": 1573230630, "post_id": 58769712, "comment_id": 103826754, "body": "@JackTheKnife: ahA! Sorry, I have my root logger default altered. It defaults to WARNING. I&#39;ll update, have <code>basicConfig</code> use <code>level=logging.DEBUG</code>."}, {"owner": {"reputation": 2666, "user_id": 1090360, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/VRQdK.jpg?s=128&g=1", "display_name": "JackTheKnife", "link": "https://stackoverflow.com/users/1090360/jacktheknife"}, "reply_to_user": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1573230850, "post_id": 58769712, "comment_id": 103826869, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/202065/discussion-between-jacktheknife-and-martijn-pieters\">continue this discussion in chat</a>."}, {"owner": {"reputation": 3248, "user_id": 2107632, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/WqJTE.png?s=128&g=1", "display_name": "Simon Righley", "link": "https://stackoverflow.com/users/2107632/simon-righley"}, "edited": false, "score": 0, "creation_date": 1574686070, "post_id": 58769712, "comment_id": 104307949, "body": "For those using python3.4, the correct signature for the <code>print_to_log</code> function above is <code>print_to_log(*args, **kwargs)</code>."}], "tags": [], "owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "is_accepted": true, "score": 6, "last_activity_date": 1573230725, "last_edit_date": 1573230725, "creation_date": 1573227811, "answer_id": 58769712, "question_id": 58738195, "link": "https://stackoverflow.com/questions/58738195/python-http-request-and-debug-level-logging-to-the-log-file/58769712#58769712", "title": "Python HTTP request and debug level logging to the log file", "body": "<p>You are adding your handlers and level changes in the wrong place.</p>\n\n<p>The Python logging module treats logger objects as existing in a hierarchy, based on their name and the presence of <code>.</code> delimiters in those names. The name <code>\"foo.bar.baz\"</code> for a logger is logically placed as child of <code>foo.bar</code> and of <code>foo</code>, should they exist. At the base of the hierarchy is the root logger, which has no name. You access it with <code>logging.getLogger()</code> (no arguments, although <code>''</code> and <code>None</code> also would work).</p>\n\n<p>Now, when logging messages, first the message has to pass the <em>effective level</em> of the logger. If they passed that the messages are passed to the handlers on every logger from the current logger down to the root, provided they clear the level of each handler found. </p>\n\n<p>To find the effective level, the hierarchy is traversed to find the nearest logger object with a level set; if there are none then messages always pass. When traversing the hierarchy to find handlers, a log object can block propagation (<code>propagate</code> is set to <code>False</code>), at which point traversing stops.</p>\n\n<p>When you are trying to handle messages for <code>urllib3.connectionpool()</code>, you need to put a handler on one of three locations: the logger for <code>urllib3.connectionpool</code>, for <code>urllib3</code> or the root logger. Your code <em>doesn't do that</em>.</p>\n\n<p>You instead set up your handlers on your own logger with a different name:</p>\n\n<pre><code>_logger = logging.getLogger(__name__)\n</code></pre>\n\n<p>That is guaranteed to not match the root logger (<code>__name__</code> would need to be empty, that's never the case) nor the <code>urllib3</code> or <code>urllib3.connectionpool</code> loggers (which would mean your module is also called <code>urllib3</code> or <code>urllib3.connectionpool)</code>.</p>\n\n<p>Because it is not in the path that <code>urllib3.connectionpool</code> log messages would follow, your handlers are never going to be given those messages.</p>\n\n<p>Instead, you want to configure the <em>root logger</em>:</p>\n\n<pre><code>fileHandler = logging.handlers.TimedRotatingFileHandler(\"{0}/{1}.log\".format(logPath, logFileName), when=\"midnight\")\nfileHandler.setFormatter(logFormatter)\nroot = logging.getLogger()\nroot.setLevel(logging.DEBUG)\nroot.addHandler(fileHandler)\n</code></pre>\n\n<p>You could just set the log level of each <em>handler</em> to a log level you want to see on that handler, rather than on the root logger (or in addition to the root logger). Remember that the level set on the root logger is used to determine the effective level of other loggers in the hierarchy that don't have a level set directly and that the effective level works as a 'high water mark' for all messages. If the root logger is set to <code>INFO</code>, and no other handlers are configured, then your handlers will never see <code>DEBUG</code> messages. The default level for the root logger is <code>WARNING</code>.</p>\n\n<p>You usually only ever want to use named loggers in your modules to <em>produce log messages</em>, and put all your handlers on the root. Anything else is specialised, 'advanced' use of the logger module (e.g. a dedicated, separate handler just for the <code>urllib3</code> log messages, or silencing a whole package by setting their lowest-level logger object to <code>propagate = False</code>).</p>\n\n<p>Finally, <code>logging.basicConfig()</code> configures the root logger too, but <em>only</em> if there are no handlers on the root logger already. If you use <code>force=True</code> then <code>basicConfig()</code> will remove all existing handlers, then configure the handlers on the root. It'll always create a <code>Formatter()</code> instance and set it on all handlers.</p>\n\n<p>You could use <code>basicConfig()</code> for <em>all</em> your root logger needs:</p>\n\n<pre><code>import http.client\nimport logging\nimport os.path\nimport sys\nfrom logging.handlers import TimedRotatingFileHandler\n\ndef setup_logging(loglevel):\n    # the file handler receives all messages from level DEBUG on up, regardless\n    fileHandler = TimedRotatingFileHandler(\n        os.path.join(logPath, logFileName + \".log\"),\n        when=\"midnight\"\n    )\n    fileHandler.setLevel(logging.DEBUG)\n    handlers = [fileHandler]\n\n    if loglevel is not None:\n        # if a log level is configured, use that for logging to the console\n        stream_handler = logging.StreamHandler(sys.stdout)\n        stream_handler.setLevel(loglevel)\n        handlers.append(stream_handler)\n\n    if loglevel == logging.DEBUG:\n        # when logging at debug level, make http.client extra chatty too\n        # http.client *uses `print()` calls*, not logging.\n        http.client.HTTPConnection.debuglevel = 1\n\n    # finally, configure the root logger with our choice of handlers\n    # the logging level of the root set to DEBUG (defaults to WARNING otherwise).\n    logformat = \"%(asctime)s [%(threadName)-12.12s] [%(levelname)-5.5s]  %(message)s\"\n    logging.basicConfig(\n        format=logformat, datefmt=\"%Y-%m-%d %H:%M:%S\",\n        handlers=handlers, level=logging.DEBUG\n    )\n</code></pre>\n\n<p>Side note: the <code>http.client</code> library <strong>does not use <code>logging</code></strong> to output debug messages; it will always use <code>print()</code> to output those. If you want to see those messages appear in your logs, you'll need to monkey-patch the library, adding in an alternative <code>print()</code> global:</p>\n\n<pre><code>import http.client\nimport logging\n\nhttp_client_logger = logging.getLogger(\"http.client\")\n\ndef print_to_log(*args):\n    http_client_logger.debug(\" \".join(args)) \n\n# monkey-patch a `print` global into the http.client module; all calls to\n# print() in that module will then use our print_to_log implementation\nhttp.client.print = print_to_log\n</code></pre>\n\n<p>With the above <code>http.client</code> trick applied and <code>setup_logging(logging.DEBUG)</code>, I see the following logs appear both on <code>stdout</code> and in the file when I use <code>requests.get(\"https://stackoverflow.com/a/58769712/100297\")</code>:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>2019-11-08 16:17:26 [MainThread  ] [DEBUG]  Starting new HTTPS connection (1): stackoverflow.com:443\n2019-11-08 16:17:27 [MainThread  ] [DEBUG]  send: b'GET /a/58769712/100297 HTTP/1.1\\r\\nHost: stackoverflow.com\\r\\nUser-Agent: python-requests/2.22.0\\r\\nAccept-Encoding: gzip, deflate\\r\\nAccept: */*\\r\\nConnection: keep-alive\\r\\n\\r\\n'\n2019-11-08 16:17:27 [MainThread  ] [DEBUG]  reply: 'HTTP/1.1 302 Found\\r\\n'\n2019-11-08 16:17:27 [MainThread  ] [DEBUG]  header: Cache-Control: private\n2019-11-08 16:17:27 [MainThread  ] [DEBUG]  header: Content-Type: text/html; charset=utf-8\n2019-11-08 16:17:27 [MainThread  ] [DEBUG]  header: Location: /questions/58738195/python-http-request-and-debug-level-logging-to-the-log-file/58769712#58769712\n2019-11-08 16:17:27 [MainThread  ] [DEBUG]  header: X-Frame-Options: SAMEORIGIN\n2019-11-08 16:17:27 [MainThread  ] [DEBUG]  header: X-Request-Guid: 761bd2f8-3e5c-453a-ab46-d01284940541\n2019-11-08 16:17:27 [MainThread  ] [DEBUG]  header: Strict-Transport-Security: max-age=15552000\n2019-11-08 16:17:27 [MainThread  ] [DEBUG]  header: Feature-Policy: microphone 'none'; speaker 'none'\n2019-11-08 16:17:27 [MainThread  ] [DEBUG]  header: Content-Security-Policy: upgrade-insecure-requests; frame-ancestors 'self' https://stackexchange.com\n2019-11-08 16:17:27 [MainThread  ] [DEBUG]  header: Accept-Ranges: bytes\n2019-11-08 16:17:27 [MainThread  ] [DEBUG]  header: Age: 0\n2019-11-08 16:17:27 [MainThread  ] [DEBUG]  header: Content-Length: 214\n2019-11-08 16:17:27 [MainThread  ] [DEBUG]  header: Accept-Ranges: bytes\n2019-11-08 16:17:27 [MainThread  ] [DEBUG]  header: Date: Fri, 08 Nov 2019 16:17:27 GMT\n2019-11-08 16:17:27 [MainThread  ] [DEBUG]  header: Via: 1.1 varnish\n2019-11-08 16:17:27 [MainThread  ] [DEBUG]  header: Age: 0\n2019-11-08 16:17:27 [MainThread  ] [DEBUG]  header: Connection: keep-alive\n2019-11-08 16:17:27 [MainThread  ] [DEBUG]  header: X-Served-By: cache-lhr7324-LHR\n2019-11-08 16:17:27 [MainThread  ] [DEBUG]  header: X-Cache: MISS\n2019-11-08 16:17:27 [MainThread  ] [DEBUG]  header: X-Cache-Hits: 0\n2019-11-08 16:17:27 [MainThread  ] [DEBUG]  header: X-Timer: S1573229847.069848,VS0,VE80\n2019-11-08 16:17:27 [MainThread  ] [DEBUG]  header: Vary: Fastly-SSL\n2019-11-08 16:17:27 [MainThread  ] [DEBUG]  header: X-DNS-Prefetch-Control: off\n2019-11-08 16:17:27 [MainThread  ] [DEBUG]  header: Set-Cookie: prov=0e92634f-abce-9f8e-1865-0d35ebecc595; domain=.stackoverflow.com; expires=Fri, 01-Jan-2055 00:00:00 GMT; path=/; HttpOnly\n2019-11-08 16:17:27 [MainThread  ] [DEBUG]  https://stackoverflow.com:443 \"GET /a/58769712/100297 HTTP/1.1\" 302 214\n2019-11-08 16:17:27 [MainThread  ] [DEBUG]  send: b'GET /questions/58738195/python-http-request-and-debug-level-logging-to-the-log-file/58769712 HTTP/1.1\\r\\nHost: stackoverflow.com\\r\\nUser-Agent: python-requests/2.22.0\\r\\nAccept-Encoding: gzip, deflate\\r\\nAccept: */*\\r\\nConnection: keep-alive\\r\\nCookie: prov=0e92634f-abce-9f8e-1865-0d35ebecc595\\r\\n\\r\\n'\n2019-11-08 16:17:27 [MainThread  ] [DEBUG]  reply: 'HTTP/1.1 200 OK\\r\\n'\n2019-11-08 16:17:27 [MainThread  ] [DEBUG]  header: Cache-Control: private\n2019-11-08 16:17:27 [MainThread  ] [DEBUG]  header: Content-Type: text/html; charset=utf-8\n2019-11-08 16:17:27 [MainThread  ] [DEBUG]  header: Content-Encoding: gzip\n2019-11-08 16:17:27 [MainThread  ] [DEBUG]  header: Last-Modified: Fri, 08 Nov 2019 16:16:07 GMT\n2019-11-08 16:17:27 [MainThread  ] [DEBUG]  header: X-Frame-Options: SAMEORIGIN\n2019-11-08 16:17:27 [MainThread  ] [DEBUG]  header: X-Request-Guid: 5e48399e-a91c-44aa-aad6-00a96014131f\n2019-11-08 16:17:27 [MainThread  ] [DEBUG]  header: Strict-Transport-Security: max-age=15552000\n2019-11-08 16:17:27 [MainThread  ] [DEBUG]  header: Feature-Policy: microphone 'none'; speaker 'none'\n2019-11-08 16:17:27 [MainThread  ] [DEBUG]  header: Content-Security-Policy: upgrade-insecure-requests; frame-ancestors 'self' https://stackexchange.com\n2019-11-08 16:17:27 [MainThread  ] [DEBUG]  header: Accept-Ranges: bytes\n2019-11-08 16:17:27 [MainThread  ] [DEBUG]  header: Age: 0\n2019-11-08 16:17:27 [MainThread  ] [DEBUG]  header: Content-Length: 42625\n2019-11-08 16:17:27 [MainThread  ] [DEBUG]  header: Accept-Ranges: bytes\n2019-11-08 16:17:27 [MainThread  ] [DEBUG]  header: Date: Fri, 08 Nov 2019 16:17:27 GMT\n2019-11-08 16:17:27 [MainThread  ] [DEBUG]  header: Via: 1.1 varnish\n2019-11-08 16:17:27 [MainThread  ] [DEBUG]  header: Age: 0\n2019-11-08 16:17:27 [MainThread  ] [DEBUG]  header: Connection: keep-alive\n2019-11-08 16:17:27 [MainThread  ] [DEBUG]  header: X-Served-By: cache-lhr7324-LHR\n2019-11-08 16:17:27 [MainThread  ] [DEBUG]  header: X-Cache: MISS\n2019-11-08 16:17:27 [MainThread  ] [DEBUG]  header: X-Cache-Hits: 0\n2019-11-08 16:17:27 [MainThread  ] [DEBUG]  header: X-Timer: S1573229847.189349,VS0,VE95\n2019-11-08 16:17:27 [MainThread  ] [DEBUG]  header: Vary: Accept-Encoding,Fastly-SSL\n2019-11-08 16:17:27 [MainThread  ] [DEBUG]  header: X-DNS-Prefetch-Control: off\n2019-11-08 16:17:27 [MainThread  ] [DEBUG]  https://stackoverflow.com:443 \"GET /questions/58738195/python-http-request-and-debug-level-logging-to-the-log-file/58769712 HTTP/1.1\" 200 42625\n</code></pre>\n\n<p>You can reproduce this with a file with:</p>\n\n<pre><code>import requests\nimport sys\n\nlogPath, logFileName = \"/tmp\", \"demo\"\nlevel = logging.DEBUG if \"-v\" in sys.argv else None\nsetup_logging(level)\n\nrequests.get(\"https://stackoverflow.com/a/58769712/100297\")\n</code></pre>\n\n<p>added in addition to the code above. You can then use <code>python &lt;script.py&gt; -v</code> to set the level to verbose and compare that to <code>python &lt;script.py&gt;</code> with the level not set at all.</p>\n"}], "owner": {"reputation": 2666, "user_id": 1090360, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/VRQdK.jpg?s=128&g=1", "display_name": "JackTheKnife", "link": "https://stackoverflow.com/users/1090360/jacktheknife"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2708, "favorite_count": 1, "accepted_answer_id": 58769712, "answer_count": 1, "score": 1, "last_activity_date": 1573230806, "creation_date": 1573072936, "last_edit_date": 1573230806, "question_id": 58738195, "link": "https://stackoverflow.com/questions/58738195/python-http-request-and-debug-level-logging-to-the-log-file", "title": "Python HTTP request and debug level logging to the log file", "body": "<p>I have a hard time to get DEBUG level logs in a log file for HTTP request like those from console like:</p>\n\n<pre><code>DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): URI:443\nDEBUG:urllib3.connectionpool:URL:443 \"POST /endpoint HTTP/1.1\" 200 None\n</code></pre>\n\n<p>for the code below:</p>\n\n<pre><code>import logging\nfrom logging.handlers import TimedRotatingFileHandler\n_logger = logging.getLogger(__name__)\n\n    def setup_logging(loglevel):\n        logFormatter = logging.Formatter(\"%(asctime)s [%(threadName)-12.12s] [%(levelname)-5.5s]  %(message)s\")\n\n        if loglevel is not None:\n            if loglevel == 10:\n                  http.client.HTTPConnection.debuglevel = 1\n            logformat = \"%(asctime)s [%(threadName)-12.12s] [%(levelname)-5.5s]  %(message)s\"\n            logging.basicConfig(level=loglevel, stream=sys.stdout, format=logformat, datefmt=\"%Y-%m-%d %H:%M:%S\")\n\n        fileHandler = logging.handlers.TimedRotatingFileHandler(\"{0}/{1}.log\".format(logPath, logFileName), when=\"midnight\")\n        fileHandler.setFormatter(logFormatter)\n        _logger.setLevel(logging.DEBUG)\n        _logger.addHandler(fileHandler)\n</code></pre>\n\n<p>When I will call it with <code>logging.DEBUG</code> log file will only contains whatever I will specify in the code as <code>_logger.info</code> or <code>_logger.debug</code> nothing similar like for the console log output.</p>\n\n<p>PS.\nExample code how do I call it:</p>\n\n<pre><code>def main(args):\n    args = parse_args(args)\n    cfg = config(args.env)\n    setup_logging(logging.DEBUG, cfg)\n    requests.get(\"https://stackoverflow.com/a/58769712/100297\")\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "parameterized"], "comments": [{"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1573073109, "post_id": 58738140, "comment_id": 103766450, "body": "That decorator doesn&#39;t return the function it decorates; it generates new methods with different names. You aren&#39;t supposed to use it for regular code, but for generating test methods that you are typically called for you by the test runner; you don&#39;t really work <i>with</i> the code it generates."}, {"owner": {"reputation": 1506, "user_id": 4996042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0910aacb4500f3f0177b4e489e6d4f7?s=128&d=identicon&r=PG&f=1", "display_name": "Ramesh K", "link": "https://stackoverflow.com/users/4996042/ramesh-k"}, "reply_to_user": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1573073165, "post_id": 58738140, "comment_id": 103766472, "body": "@chepner , so how to get that parameterized function ?"}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1573073198, "post_id": 58738140, "comment_id": 103766488, "body": "Why do you think you <i>need</i> to get it?"}, {"owner": {"reputation": 1506, "user_id": 4996042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0910aacb4500f3f0177b4e489e6d4f7?s=128&d=identicon&r=PG&f=1", "display_name": "Ramesh K", "link": "https://stackoverflow.com/users/4996042/ramesh-k"}, "reply_to_user": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1573073259, "post_id": 58738140, "comment_id": 103766510, "body": "I want to call A, B and C from a different module. A, B are bound methods , but the moment i make C as parameterized it becomes None . I want to call C and use the parameters passed to it ."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1573073293, "post_id": 58738140, "comment_id": 103766521, "body": "Why do you need to call <code>C</code> from a different module? Again, <code>parameterized</code> is meant to generate <i>test</i> code, not write production code."}], "owner": {"reputation": 1506, "user_id": 4996042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0910aacb4500f3f0177b4e489e6d4f7?s=128&d=identicon&r=PG&f=1", "display_name": "Ramesh K", "link": "https://stackoverflow.com/users/4996042/ramesh-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 20, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1573073040, "creation_date": 1573072693, "last_edit_date": 1573073040, "question_id": 58738140, "link": "https://stackoverflow.com/questions/58738140/parameterized-function-is-none-in-a-list-of-bounded-methods", "title": "parameterized function is None in a list of Bounded Methods", "body": "<p>I have the following code.</p>\n\n<pre><code>from parameterized import parameterized\n\nclass XYZ():\n    @property\n    def my_funcs(self):\n        return [self.A, self.B, self.C]\n\n    def A(self):\n        do something\n    def B(self):\n        do something\n    @parameterized.expand(parameters)\n    def C(self, var1_parameter, var2_parameter):\n        do something with the parameters\n</code></pre>\n\n<p>Now in a different place i do:</p>\n\n<pre><code>for func in self.my_funcs:\n    print(func.__name__)\n    &lt;call func&gt;\n</code></pre>\n\n<p>I get A,B (bound methods) here but C is None. </p>\n\n<p>How to make C as Not None ? What am i doing wrong here ?</p>\n"}, {"tags": ["python", "algorithm", "sorting", "linked-list", "quicksort"], "comments": [{"owner": {"reputation": 25770, "user_id": 5349916, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/QovYv.jpg?s=128&g=1", "display_name": "MisterMiyagi", "link": "https://stackoverflow.com/users/5349916/mistermiyagi"}, "edited": false, "score": 0, "creation_date": 1573072949, "post_id": 58738127, "comment_id": 103766379, "body": "You do not check whether any elements end up in smaller or other. Each may be empty if the head is larger/smaller than all other elements."}, {"owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "edited": false, "score": 0, "creation_date": 1573092298, "post_id": 58738127, "comment_id": 103771683, "body": "The questions code is similar in concept to quicksort, but it&#39;s not quicksort, which would involve swapping of nodes. Make sure that this approach is acceptable to the professor."}], "answers": [{"tags": [], "owner": {"reputation": 113, "user_id": 11886141, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd4fe562a1006fe0cd0fb7fc9e8d4595?s=128&d=identicon&r=PG&f=1", "display_name": "binjamin", "link": "https://stackoverflow.com/users/11886141/binjamin"}, "is_accepted": false, "score": 0, "last_activity_date": 1573073825, "creation_date": 1573073825, "answer_id": 58738350, "question_id": 58738127, "link": "https://stackoverflow.com/questions/58738127/trying-to-quicksort-a-linked-list-in-python/58738350#58738350", "title": "Trying to Quicksort a linked list in python", "body": "<p>Read your error codes carefully. It says </p>\n\n<pre><code>File \"main.py\", line 51, in sort\nwhile ptr.next!=None:\nAttributeError: 'NoneType' object has no attribute 'next'\n</code></pre>\n\n<p>Thats a pretty good indicator of what and where the issue is. You are accessing a null node from line 51. Change <code>While ptr.next !=None</code> to <code>While ptr != None</code> and the error goes away. You need to figure out why through testing though. </p>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 12334283, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-7j-jkogivHg/AAAAAAAAAAI/AAAAAAAACnE/J_Jn-4gFRis/photo.jpg?sz=128", "display_name": "Hamza", "link": "https://stackoverflow.com/users/12334283/hamza"}, "edited": false, "score": 0, "creation_date": 1573081473, "post_id": 58738590, "comment_id": 103769294, "body": "Thank you very much for your clear and detailed answer."}], "tags": [], "owner": {"reputation": 311, "user_id": 4741735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf5743715a1342ce13d780d0a457f5cb?s=128&d=identicon&r=PG&f=1", "display_name": "Florian Braun", "link": "https://stackoverflow.com/users/4741735/florian-braun"}, "is_accepted": true, "score": 1, "last_activity_date": 1573075431, "last_edit_date": 1573075431, "creation_date": 1573074863, "answer_id": 58738590, "question_id": 58738127, "link": "https://stackoverflow.com/questions/58738127/trying-to-quicksort-a-linked-list-in-python/58738590#58738590", "title": "Trying to Quicksort a linked list in python", "body": "<p>You sort() function fails because <code>ptr</code> can be None when you get to your while loop.\nThis isn't obvious at first because of your check at the beginning</p>\n\n<pre><code>if self.head != None\n</code></pre>\n\n<p>But the call to <code>self.removeVal(pivot)</code> will set your head pointer to None if the list has only 1 entry. \nNote that this will ALWAYS happen during your quicksort eventually, because you're breaking down your list recursively. Eventually it MUST be a 1-element list and therefore fail.</p>\n\n<p>When this happens you get the stacktrace you posted where it says:</p>\n\n<pre><code>AttributeError: 'NoneType' object has no attribute 'next'\n</code></pre>\n\n<p>To fix this you can rewrite your while loop to look at the <code>ptr</code> directly and not at <code>ptr.next</code></p>\n\n<pre><code>         while ptr is not None:\n                if ptr.data&lt;pivot:\n                    smaller.append(ptr.data)\n                else:\n                    other.append(ptr.data)\n                ptr=ptr.next\n</code></pre>\n\n<p>Another issue I found was with your assignment:</p>\n\n<pre><code>self=smaller\n</code></pre>\n\n<p>It may be legal python code but I find it very dangerous. I changed it to</p>\n\n<pre><code>self.head = smaller.head\n</code></pre>\n\n<p>Otherwise your example dropped one element from the list (though I didn't track down why exactly)\nNote this doesn't really update your length attribute, but I didn't see why it is needed, it's not used anywhere.</p>\n\n<p>One more note on efficiency: you are doing a lot of appends in your algorithm and they are VERY expensive with lists, i.e. the way you have implemented them. That's probably not the point of your exercise here. But when you are appending by iterating over all existing elements you are killing the efficiency of quicksort. Adding an element costs you O(n) and therefore splitting the list into your smaller and other list costs you already O(n^2).</p>\n\n<p>For (linked) lists merge sort is a much better sorting algorithm that also runs O(n*log(n)) just like quicksort.</p>\n"}, {"tags": [], "owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "is_accepted": false, "score": 0, "last_activity_date": 1573235301, "last_edit_date": 1573235301, "creation_date": 1573219539, "answer_id": 58767472, "question_id": 58738127, "link": "https://stackoverflow.com/questions/58738127/trying-to-quicksort-a-linked-list-in-python/58767472#58767472", "title": "Trying to Quicksort a linked list in python", "body": "<p>As commented above, make sure that the approach shown in the question will be acceptable as as a quicksort. You might consider creating 3 lists, nodes &lt; pivot, nodes == pivot, nodes > pivot, and only using recursion on the 2 list of nodes != pivot. Adding a tail reference to list will speed up append operations. Example code where the quicksort relinks nodes to rearrange them instead of constantly allocating nodes. </p>\n\n<pre><code>class Node(object):\n\n    def __init__(self, data):\n        self.data = data\n        self.next=None\n\nclass Linkedlist(object):\n\n    def __init__(self):\n        self.head = None\n        self.tail = None\n        self.length = 0\n\n    def push_back(self, data):\n        self.length += 1\n        new = Node(data)\n        if(self.tail is None):\n            self.head = self.tail = new\n        else:\n            self.tail.next = new\n            self.tail = new\n\n    def pop_front(self):\n        if(self.head is None):\n            return self.head\n        self.length -= 1\n        data = self.head.data\n        self.head = self.head.next\n        return data\n\n    def show(self, head, tail):\n        arr = []\n        if(head is None):\n            print(arr)\n            return\n        while(True):\n            if(head.data is not None):\n                arr.append(head.data)\n            if(head is tail):\n                break\n            head = head.next\n        print(arr)\n\n    def quicksort(self,head,tail):\n        if(head is tail):               # if single node return\n            return head,tail\n                                        # using 3 dummy nodes for 3 lists\n        hlt = Node(None)                # head, tail &lt; pivot list\n        tlt = hlt\n        heq = Node(None)                # head, tail = pivot list\n        teq = heq\n        hgt = Node(None)                # head, tail &gt; pivot list\n        tgt = hgt\n        pivot = head\n        curr  = head\n        end   = tail.next\n        while(curr is not end):\n            if(curr.data &lt; pivot.data):\n                tlt.next = curr\n                tlt = curr\n            elif(curr.data == pivot.data):\n                teq.next = curr\n                teq = curr\n            else:\n                tgt.next = curr\n                tgt = curr\n            curr = curr.next\n        heq = heq.next                  # at least 1 node (should release node)\n        if(hlt is tlt):                 # if none &lt; pivot\n            hlt = heq                   #  (should release dummy node)\n            tlt = heq\n        else:                           # else recurse on list &lt; pivot\n            hlt = hlt.next              #  (should release dummy node)\n            hlt,tlt = self.quicksort(hlt,tlt)\n            tlt.next = heq\n        if(hgt is tgt):                 # if none &gt; pivot\n            hgt = teq                   #  (should release dummy node)\n            tgt = teq\n        else:                           # else recurse on list &gt; pivot\n            hgt = hgt.next              #  (should release dummy node)\n            hgt,tgt = self.quicksort(hgt,tgt)\n            teq.next = hgt\n        return(hlt,tgt)\n\n    def sort(self):\n        if (self.head == None):         # if empty list return\n            return\n        self.head,self.tail = self.quicksort(self.head,self.tail)\n        self.tail.next = None\n        return\n\nlists=Linkedlist()\nlists.push_back(27)\nlists.push_back(35)\nlists.push_back(23)\nlists.push_back(22)\nlists.push_back(38)\nlists.push_back(26)\nlists.push_back(31)\nlists.push_back(24)\nlists.push_back(37)\nlists.push_back(25)\nlists.push_back(33)\nlists.push_back(32)\nlists.push_back(28)\nlists.push_back(36)\nlists.push_back(21)\nlists.push_back(34)\nlists.sort()\narr = []\nwhile(True):\n    data = lists.pop_front()\n    if(data is None):\n        break\n    arr.append(data)\nprint(arr)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 13263430, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AOh14Gh1jQE3-1UVOJKzUCOlnGKkipWjHX1BEjJcL1DJnUg=k-s128", "display_name": "Prem prakash", "link": "https://stackoverflow.com/users/13263430/prem-prakash"}, "is_accepted": false, "score": 1, "last_activity_date": 1610476419, "last_edit_date": 1610476419, "creation_date": 1610475828, "answer_id": 65689799, "question_id": 58738127, "link": "https://stackoverflow.com/questions/58738127/trying-to-quicksort-a-linked-list-in-python/65689799#65689799", "title": "Trying to Quicksort a linked list in python", "body": "<p>Here is the complete code</p>\n<pre><code>#finding the pivot elemet\ndef partition(itemlist,low,high):\npivot=itemlist[high]\ni=low-1\nfor j in range(low,high):\n    if itemlist[j]&lt;pivot:\n        i=i+1;\n        itemlist[i],itemlist[j]=itemlist[j],itemlist[i]\nitemlist[i+1],itemlist[high]=itemlist[high],itemlist[i+1]\nreturn i+1\n# generating the partition\ndef sort(itemlist,low,high):\n    if low &lt; high:\n        partitonIndex=partition(itemlist,low,high)\n        sort(itemlist,low,partitonIndex-1)\n        sort(itemlist,partitonIndex+1,high)\n# array to be sort\nitemlist=[5,3,6,2,7,1,2,9]\nprint(itemlist);\nsort(itemlist,0,len(itemlist)-1)\nprint(itemlist);\n</code></pre>\n<p>Output</p>\n<pre><code>[5, 3, 6, 2, 7, 1, 2, 9]\n[1, 2, 2, 3, 5, 6, 7, 9]\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 12334283, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-7j-jkogivHg/AAAAAAAAAAI/AAAAAAAACnE/J_Jn-4gFRis/photo.jpg?sz=128", "display_name": "Hamza", "link": "https://stackoverflow.com/users/12334283/hamza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1556, "favorite_count": 0, "accepted_answer_id": 58738590, "answer_count": 4, "score": 0, "last_activity_date": 1610476419, "creation_date": 1573072642, "question_id": 58738127, "link": "https://stackoverflow.com/questions/58738127/trying-to-quicksort-a-linked-list-in-python", "title": "Trying to Quicksort a linked list in python", "body": "<p>my professor has asked me to perform a Quicksort for a linked list. It is getting quite confusing as all the recursion and links are still very new to me. The issue seems to be with something unintentionally being assigned as None\nThis is my code so far:</p>\n\n<pre><code>class Node:\n    def __init__(self, d, n):\n        self.data = d\n        self.next = n\n\n\nclass LinkedList:\n\n    def __init__(self):\n        self.head = None\n        self.length = 0\n\n    def append(self, d):\n        if self.head == None:      \n            self.head = Node(d,None) \n        else:\n            ptr = self.head\n            while ptr.next != None:\n                ptr = ptr.next\n            ptr.next = Node(d,None)\n        self.length += 1\n\n    def merge(self,other):\n        ptr = self.head\n        while ptr.next != None:\n            ptr = ptr.next\n        ptr.next = other.head\n\n    def removeVal(self, d):\n        if self.head == None:\n            return\n        if self.head.data == d:\n            self.head = self.head.next\n            self.length -= 1\n        else:\n            ptr = self.head \n            while ptr.next != None:\n                if ptr.next.data == d:\n                    ptr.next = ptr.next.next\n                    self.length -= 1\n                    break\n                ptr = ptr.next  \n\n    def sort(self):\n        if self.head!=None:\n            pivot=self.head.data\n            self.removeVal(pivot)\n            smaller=LinkedList()\n            other=LinkedList()\n            ptr=self.head\n            while ptr.next!=None:\n                ptr=ptr.next\n                if ptr.data&lt;pivot:\n                    smaller.append(ptr.data)\n                else:\n                    other.append(ptr.data)\n            smaller.sort()\n            other.sort()\n            self=smaller\n            self.append(pivot)\n            self.merge(other)\n\n\nls = LinkedList()\nls.append(0)\nls.append(1)\nls.append(3)\nls.sort()\n\n</code></pre>\n\n<p>Running this gives the following error</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"main.py\", line 71, in &lt;module&gt;\n    ls.sort()\n  File \"main.py\", line 58, in sort\n    other.sort()\n  File \"main.py\", line 51, in sort\n    while ptr.next!=None:\nAttributeError: 'NoneType' object has no attribute 'next'\n</code></pre>\n\n<p>Any help would be very much appreciated</p>\n"}, {"tags": ["python", "for-loop", "zip", "syntax-error"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1573072816, "post_id": 58738100, "comment_id": 103766318, "body": "Once you fix the syntax error, this still makes no sense. The generator creates a tuple of tuples of the form <code>((prob, im), (prob, im), (prob, im), ...)</code> and then you&#39;re assigning this to two variables."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1573072878, "post_id": 58738100, "comment_id": 103766345, "body": "FYI, the first loop can be simplified to just <code>best = max(probabiliites)</code>"}, {"owner": {"reputation": 466, "user_id": 11627201, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fsHTHFWusvk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf7-u-fDjEJTil4kWLmT0eJA7NgVw/mo/photo.jpg?sz=128", "display_name": "qwerty_99", "link": "https://stackoverflow.com/users/11627201/qwerty-99"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1573073397, "post_id": 58738100, "comment_id": 103766565, "body": "@Barmar I wanted to put the values of the tuple inside the variables prob and im if the value of <code>prob</code> is equal to <code>best</code>."}, {"owner": {"reputation": 466, "user_id": 11627201, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fsHTHFWusvk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf7-u-fDjEJTil4kWLmT0eJA7NgVw/mo/photo.jpg?sz=128", "display_name": "qwerty_99", "link": "https://stackoverflow.com/users/11627201/qwerty-99"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1573073417, "post_id": 58738100, "comment_id": 103766572, "body": "Also I didn&#39;t know that there was a max function, so thanks for the information"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1573073466, "post_id": 58738100, "comment_id": 103766587, "body": "You want to get separate tuples of all the <code>prob</code> and <code>im</code> values that are selected in the generator?"}, {"owner": {"reputation": 466, "user_id": 11627201, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fsHTHFWusvk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf7-u-fDjEJTil4kWLmT0eJA7NgVw/mo/photo.jpg?sz=128", "display_name": "qwerty_99", "link": "https://stackoverflow.com/users/11627201/qwerty-99"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1573073619, "post_id": 58738100, "comment_id": 103766653, "body": "no, just the tuple with the maximum probability"}], "answers": [{"comments": [{"owner": {"reputation": 466, "user_id": 11627201, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fsHTHFWusvk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf7-u-fDjEJTil4kWLmT0eJA7NgVw/mo/photo.jpg?sz=128", "display_name": "qwerty_99", "link": "https://stackoverflow.com/users/11627201/qwerty-99"}, "edited": false, "score": 0, "creation_date": 1573073545, "post_id": 58738138, "comment_id": 103766618, "body": "Do you mean <code>prob, im = ((prob, im) for prob, im in zip(probabilities, image_names) if prob == best)</code>? I tried it but I got <code>ValueError: not enough values to unpack (expected 2, got 1)</code>"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 466, "user_id": 11627201, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fsHTHFWusvk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf7-u-fDjEJTil4kWLmT0eJA7NgVw/mo/photo.jpg?sz=128", "display_name": "qwerty_99", "link": "https://stackoverflow.com/users/11627201/qwerty-99"}, "edited": false, "score": 0, "creation_date": 1573073607, "post_id": 58738138, "comment_id": 103766647, "body": "@RJ9 That&#39;s the point I was making in my comment above. You&#39;re trying to assign two variables, but the generator produces a different number of tuples. You seem to be expecting it to pivot the data for you."}, {"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "reply_to_user": {"reputation": 466, "user_id": 11627201, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fsHTHFWusvk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf7-u-fDjEJTil4kWLmT0eJA7NgVw/mo/photo.jpg?sz=128", "display_name": "qwerty_99", "link": "https://stackoverflow.com/users/11627201/qwerty-99"}, "edited": false, "score": 0, "creation_date": 1573073633, "post_id": 58738138, "comment_id": 103766663, "body": "@RJ9 That&#39;s an unrelated error that&#39;s showing now that the syntax error is fixed."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1573073688, "post_id": 58738138, "comment_id": 103766680, "body": "Add <code>[0]</code> to the end of the generator to get the first element of the tuple."}], "tags": [], "owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "is_accepted": true, "score": 2, "last_activity_date": 1573072687, "creation_date": 1573072687, "answer_id": 58738138, "question_id": 58738100, "link": "https://stackoverflow.com/questions/58738100/invalid-syntax-error-when-using-for-loop-on-a-zip-object/58738138#58738138", "title": "invalid syntax error when using for loop on a zip object", "body": "<p>Tuples need to be explicitly wrapped in <code>()</code> when being produced by a comprehension/generator expression:</p>\n\n<pre><code>((prob, im) for prob, im in zip(probabilities, image_names) if prob == best) \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 466, "user_id": 11627201, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fsHTHFWusvk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf7-u-fDjEJTil4kWLmT0eJA7NgVw/mo/photo.jpg?sz=128", "display_name": "qwerty_99", "link": "https://stackoverflow.com/users/11627201/qwerty-99"}, "edited": false, "score": 0, "creation_date": 1573074315, "post_id": 58738357, "comment_id": 103766919, "body": "Thanks. That&#39;s what I would normally do but the goal is to get the code to be as fast as possible"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 466, "user_id": 11627201, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fsHTHFWusvk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf7-u-fDjEJTil4kWLmT0eJA7NgVw/mo/photo.jpg?sz=128", "display_name": "qwerty_99", "link": "https://stackoverflow.com/users/11627201/qwerty-99"}, "edited": false, "score": 0, "creation_date": 1573074365, "post_id": 58738357, "comment_id": 103766945, "body": "I believe this is as fast as possible."}, {"owner": {"reputation": 466, "user_id": 11627201, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fsHTHFWusvk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf7-u-fDjEJTil4kWLmT0eJA7NgVw/mo/photo.jpg?sz=128", "display_name": "qwerty_99", "link": "https://stackoverflow.com/users/11627201/qwerty-99"}, "edited": false, "score": 0, "creation_date": 1573074579, "post_id": 58738357, "comment_id": 103767025, "body": "it&#39;s definitively a lot faster than the one I wrote after reading the answers <code>return (tuple( (prob, im) for prob, im in zip(probabilities, image_names) if prob == best)[0])</code>, but it&#39;s still ~30% slower than the code that I&#39;m supposed to optimize."}, {"owner": {"reputation": 466, "user_id": 11627201, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fsHTHFWusvk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf7-u-fDjEJTil4kWLmT0eJA7NgVw/mo/photo.jpg?sz=128", "display_name": "qwerty_99", "link": "https://stackoverflow.com/users/11627201/qwerty-99"}, "edited": false, "score": 0, "creation_date": 1573074891, "post_id": 58738357, "comment_id": 103767140, "body": "<code>best_name, best_proba = image_names[0], probabilities[0]      for i in range(1, n):          if best_proba &lt; probabilities[i]:              best_proba, best_name = probabilities[i], image_names[i]       return best_proba, best_name</code>"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 466, "user_id": 11627201, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fsHTHFWusvk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf7-u-fDjEJTil4kWLmT0eJA7NgVw/mo/photo.jpg?sz=128", "display_name": "qwerty_99", "link": "https://stackoverflow.com/users/11627201/qwerty-99"}, "edited": false, "score": 0, "creation_date": 1573075133, "post_id": 58738357, "comment_id": 103767232, "body": "That&#39;s almost identical to my code, the only difference is the use of <code>best_name</code> instead of <code>best_index</code>. I find it difficult to believe there&#39;s a 30% difference."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 466, "user_id": 11627201, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fsHTHFWusvk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf7-u-fDjEJTil4kWLmT0eJA7NgVw/mo/photo.jpg?sz=128", "display_name": "qwerty_99", "link": "https://stackoverflow.com/users/11627201/qwerty-99"}, "edited": false, "score": 0, "creation_date": 1573075177, "post_id": 58738357, "comment_id": 103767255, "body": "How big are the lists?"}, {"owner": {"reputation": 466, "user_id": 11627201, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fsHTHFWusvk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf7-u-fDjEJTil4kWLmT0eJA7NgVw/mo/photo.jpg?sz=128", "display_name": "qwerty_99", "link": "https://stackoverflow.com/users/11627201/qwerty-99"}, "edited": false, "score": 0, "creation_date": 1573075523, "post_id": 58738357, "comment_id": 103767369, "body": "from what I understood, it&#39;s a list of 10 000 elements and the function is executed 1000 times"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 466, "user_id": 11627201, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fsHTHFWusvk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf7-u-fDjEJTil4kWLmT0eJA7NgVw/mo/photo.jpg?sz=128", "display_name": "qwerty_99", "link": "https://stackoverflow.com/users/11627201/qwerty-99"}, "edited": false, "score": 0, "creation_date": 1573075625, "post_id": 58738357, "comment_id": 103767399, "body": "I thought I was optimizing by not assigning the image whenever <code>best</code> was updated, but I was fooling myself. Assigning <code>best_index</code> is no cheaper than assigning <code>best_name</code>."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 466, "user_id": 11627201, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fsHTHFWusvk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf7-u-fDjEJTil4kWLmT0eJA7NgVw/mo/photo.jpg?sz=128", "display_name": "qwerty_99", "link": "https://stackoverflow.com/users/11627201/qwerty-99"}, "edited": false, "score": 0, "creation_date": 1573075661, "post_id": 58738357, "comment_id": 103767413, "body": "Maybe the difference is that <code>range()</code> is faster than <code>enumerate()</code>."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 466, "user_id": 11627201, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fsHTHFWusvk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf7-u-fDjEJTil4kWLmT0eJA7NgVw/mo/photo.jpg?sz=128", "display_name": "qwerty_99", "link": "https://stackoverflow.com/users/11627201/qwerty-99"}, "edited": false, "score": 0, "creation_date": 1573075843, "post_id": 58738357, "comment_id": 103767479, "body": "I found some questions about the performance differences. Most of them are old and some use Python 2.x, so I&#39;m not sure how applicable they are now. 30% difference still seems surprising."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 466, "user_id": 11627201, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fsHTHFWusvk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf7-u-fDjEJTil4kWLmT0eJA7NgVw/mo/photo.jpg?sz=128", "display_name": "qwerty_99", "link": "https://stackoverflow.com/users/11627201/qwerty-99"}, "edited": false, "score": 0, "creation_date": 1573075982, "post_id": 58738357, "comment_id": 103767515, "body": "I&#39;ve removed the extra <code>best_index</code> variable, but I&#39;m sticking with <code>enumerate()</code>."}, {"owner": {"reputation": 466, "user_id": 11627201, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fsHTHFWusvk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf7-u-fDjEJTil4kWLmT0eJA7NgVw/mo/photo.jpg?sz=128", "display_name": "qwerty_99", "link": "https://stackoverflow.com/users/11627201/qwerty-99"}, "edited": false, "score": 0, "creation_date": 1573076234, "post_id": 58738357, "comment_id": 103767602, "body": "I ran the code a couple more times and the difference seems to be about 25-30%. I&#39;ll ask the person who made this for the answer and see if he would mind me posting it here."}], "tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": false, "score": 1, "last_activity_date": 1573075955, "last_edit_date": 1573075955, "creation_date": 1573073848, "answer_id": 58738357, "question_id": 58738100, "link": "https://stackoverflow.com/questions/58738100/invalid-syntax-error-when-using-for-loop-on-a-zip-object/58738357#58738357", "title": "invalid syntax error when using for loop on a zip object", "body": "<p>You're making this much more complicated than necessary.</p>\n\n<p>Just set both variables during the same loop</p>\n\n<pre><code>best = probabilities[0]\nbest_image = image_names[0]\nfor index, prob in enumerate(probabilities):\n    if prob &gt; best:\n        best = prob\n        best_image = image_names[index];\n</code></pre>\n"}], "owner": {"reputation": 466, "user_id": 11627201, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fsHTHFWusvk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf7-u-fDjEJTil4kWLmT0eJA7NgVw/mo/photo.jpg?sz=128", "display_name": "qwerty_99", "link": "https://stackoverflow.com/users/11627201/qwerty-99"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 442, "favorite_count": 0, "accepted_answer_id": 58738138, "answer_count": 2, "score": 0, "last_activity_date": 1573075955, "creation_date": 1573072526, "last_edit_date": 1573072877, "question_id": 58738100, "link": "https://stackoverflow.com/questions/58738100/invalid-syntax-error-when-using-for-loop-on-a-zip-object", "title": "invalid syntax error when using for loop on a zip object", "body": "<p>I'm learning how to optimize for loops in python 3.7, and I keep getting an \"invalid syntax error\". I've already checked for missing parenthesis. Here's the code:</p>\n\n<pre><code>    best = probabilities[0]\n    best = (probabilities[i] for i in range(1, len(probabilities)) if probabilities[i] &gt; best)\n    print(best)\n    prob, im = (prob, im for prob, im in zip(probabilities, image_names) if prob == best)\n\n    return (prob, im)\n</code></pre>\n\n<p>gives me the error </p>\n\n<pre><code>  File \"path\", line 27\n    prob, im = (prob, im for prob, im in zip(probabilities, image_names) if prob == best)\n                           ^\nSyntaxError: invalid syntax\n</code></pre>\n\n<p>I'm not sure what went wrong, as the following code I used in another exercise uses pretty much the same syntax:</p>\n\n<pre><code>im = [im for im, prob in zip(image_names, probabilities) if prob &gt;= threshold]\n    return (im)\n</code></pre>\n\n<p>Edit:\nI've also tried </p>\n\n<pre><code>return (prob, im for prob, im in zip(probabilities, image_names) if prob == best)\n</code></pre>\n\n<p>and it says that the variable type is a Generator[tuple[float, str], Any, None] but I'm not sure what it means.</p>\n\n<p>Any help would be very appreciated</p>\n"}, {"tags": ["python", "python-3.x", "logging"], "answers": [{"tags": [], "owner": {"reputation": 1353, "user_id": 11914067, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kxxVU.png?s=128&g=1", "display_name": "Rithin Chalumuri", "link": "https://stackoverflow.com/users/11914067/rithin-chalumuri"}, "is_accepted": false, "score": 0, "last_activity_date": 1573076235, "last_edit_date": 1573076235, "creation_date": 1573074775, "answer_id": 58738571, "question_id": 58738097, "link": "https://stackoverflow.com/questions/58738097/convert-string-from-config-file-to-import-path/58738571#58738571", "title": "Convert string from config file to import path", "body": "<p><strong>Quick and hacky way:</strong></p>\n\n<p>You can use <code>eval()</code>. It executes python code in strings. (<a href=\"https://docs.python.org/3/library/functions.html#eval\" rel=\"nofollow noreferrer\">Docs</a>)</p>\n\n<p>Example:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import logging\n\nlogging.basicConfig(\n    level=eval('logging.INFO')\n)\n\nlogging.info('Works!')\n</code></pre>\n\n<p>Outputs:</p>\n\n<pre><code>INFO:root:Works!\n</code></pre>\n\n<p>Although this works, using <code>eval</code> is considered bad practice because you can execute any Python code so it's not secure i.e. can pass anything in config and it will be executed in your application. More info <a href=\"https://stackoverflow.com/questions/1832940/why-is-using-eval-a-bad-practice\">here</a>.</p>\n\n<hr>\n\n<p><strong>Safer approach:</strong></p>\n\n<p>In your config file you can pass 'your' defined level keywords such as <code>info</code> or <code>warning</code> etc. (<a href=\"https://docs.python.org/3/library/logging.html#logging-levels\" rel=\"nofollow noreferrer\">All levels</a>)</p>\n\n<p>Example config:</p>\n\n<pre><code>log:\n  filename: 'log'\n  format: '%(levelname)s:%(message)s'\n  level: 'info'\n</code></pre>\n\n<p>In code, you can create a mapping between those words and actual logging level and then instantiate the logger with that.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import logging\n\n#Create mappings\nlevel_mapping = {'info': logging.INFO, 'warning': logging.WARNING}\n\n#Read your config file\nconfig = {} \n\n#When passed logging level doesn't exist in mappings, raise an exception\nif config['log']['level'] not in level_mapping:\n    raise ValueError('Invalid logging level passed in config!!!')\n\n#Instantiate\nlogging.basicConfig(\n    level=level_mapping[config['log']['level']]\n)\n</code></pre>\n\n<p>This way you have a whitelist of accepted levels in your application. </p>\n"}, {"tags": [], "owner": {"reputation": 1403, "user_id": 2981639, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/d45a19d42e0043b4ee22e480f1847699?s=128&d=identicon&r=PG&f=1", "display_name": "David Waterworth", "link": "https://stackoverflow.com/users/2981639/david-waterworth"}, "is_accepted": false, "score": 1, "last_activity_date": 1573075787, "creation_date": 1573075787, "answer_id": 58738765, "question_id": 58738097, "link": "https://stackoverflow.com/questions/58738097/convert-string-from-config-file-to-import-path/58738765#58738765", "title": "Convert string from config file to import path", "body": "<p>You can use <code>logging.getLevelName('INFO')</code> to convert from a string to a log level (which is an integer code). So as long as you can change your config file to:</p>\n\n<pre><code>log:\n  filename: 'log'\n  format: '%(levelname)s:%(message)s'\n  level: 'INFO'\n</code></pre>\n\n<p>This should work</p>\n\n<pre><code>logging.basicConfig(\n    filename=str(config['log']['filename']),\n    format=str(config['log']['format']),\n    level=logging.getLevelName(config['log']['level'])\n)\n</code></pre>\n\n<p>PS Do you need the str() casts?</p>\n"}], "owner": {"reputation": 1197, "user_id": 6327846, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/n0yWJ.jpg?s=128&g=1", "display_name": "Garrett", "link": "https://stackoverflow.com/users/6327846/garrett"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1573076235, "creation_date": 1573072515, "question_id": 58738097, "link": "https://stackoverflow.com/questions/58738097/convert-string-from-config-file-to-import-path", "title": "Convert string from config file to import path", "body": "<p>I have a config file here:</p>\n\n<pre><code>log:\n  filename: 'log'\n  format: '%(levelname)s:%(message)s'\n  level: 'logging.INFO'\n</code></pre>\n\n<p>Which I am trying to use in my logging configuration here:</p>\n\n<pre><code>logging.basicConfig(\n    filename=str(config['log']['filename']),\n    format=str(config['log']['format']),\n    level=str(config['log']['level'])\n)\n</code></pre>\n\n<p>However, I get this error presumably because I am passing in a string, but the logging level needs a path within the logging module.</p>\n\n<pre><code>ValueError: Unknown level: 'logging.INFO'\n</code></pre>\n\n<p>How can I convert this to a module path or is there a different approach I should use?</p>\n"}, {"tags": ["python", "numpy", "sympy", "lambdify"], "answers": [{"tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": false, "score": 0, "last_activity_date": 1573075460, "creation_date": 1573075460, "answer_id": 58738706, "question_id": 58738051, "link": "https://stackoverflow.com/questions/58738051/add-object-has-no-attribute-sinh-error-in-numerical-and-symbolic-expression/58738706#58738706", "title": "&quot;Add&quot; object has no attribute &quot;sinh&quot; error in numerical and symbolic expression?", "body": "<p><code>u</code> is <code>sympy</code> expression.  <code>U</code> in python/numpy.  The <code>sp.sinh</code> etc are translated to <code>np.sinh</code> etc.  </p>\n\n<p><code>U(Y)</code> evaluates this with the <code>numpy</code> array, but <code>t</code> is still a symbol.  That produces a <code>numpy</code> object dtype array, with some sort of mix of numbers and symbols.  <code>np.sinh(x)</code> is evaluated as <code>[z.sinh() for z in x]</code>.  Since most objects, including symbols don't have a <code>sinh</code> method, this raises your error.</p>\n\n<p>I'm not sure about this, but I suspect you need to <code>lambdify</code> both <code>X</code> and <code>t</code> at once, and evaluate with <code>(Y,T)</code> together, rather than in two steps.</p>\n\n<p>(Later I may try to demonstrate this with a <code>isympy</code> session.)</p>\n"}, {"tags": [], "owner": {"reputation": 36473, "user_id": 12046409, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZRRhI.jpg?s=128&g=1", "display_name": "JohanC", "link": "https://stackoverflow.com/users/12046409/johanc"}, "is_accepted": false, "score": 0, "last_activity_date": 1573125266, "last_edit_date": 1573125266, "creation_date": 1573115864, "answer_id": 58744816, "question_id": 58738051, "link": "https://stackoverflow.com/questions/58738051/add-object-has-no-attribute-sinh-error-in-numerical-and-symbolic-expression/58744816#58744816", "title": "&quot;Add&quot; object has no attribute &quot;sinh&quot; error in numerical and symbolic expression?", "body": "<p>SymPy and NumPy are completely separate libraries. SymPy flourishes in the world of symbolic math and works with its own symbols for every part of mathematical expressions.</p>\n\n<p>The only place where SymPy and NumPy touch, is <code>lambdify</code> where everything is converted to NumPy symbols, ready to go number crunching.</p>\n\n<p>The function <code>u</code> doesn't need a symbol: it gets its SymPy representation via its definition based on <code>t</code> and <code>X</code>.</p>\n\n<p>The differentiation happens completely inside SymPy, e.g. <code>diff(u, X, 3)</code> calculates the third derivative of <code>u</code> with respect to <code>X</code>. <code>simplify</code> helps to reduce the size of the expression. However, the expression for <code>du_dddX</code> seems so long that simplification takes a huge amount of time. If you don't need to call the function millions of times, you can leave it without simplification.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import numpy as np\nimport sympy as sp\nc_1 = 1.35\nc_2 = 0.7\nX = sp.Symbol('X', real=True)\nt = sp.Symbol('t', real=True)\nu = 2*(c_1-c_2)*(c_1*(sp.cosh(sp.sqrt(c_2)*(X-c_2*t)/2))**2 + c_2*(sp.sinh(sp.sqrt(c_1)*(-X-c_1*t)/2))**2)/((sp.sqrt(c_1)-sp.sqrt(c_2))*sp.cosh((sp.sqrt(c_1)*(-X-c_1*t) + sp.sqrt(c_2)*(X-c_2*t))/2)+ (sp.sqrt(c_1)+sp.sqrt(c_2))*sp.cosh((sp.sqrt(c_1)*(-X-c_1*t)-sp.sqrt(c_2)*(X-c_2*t))/2))**2\ndu_dt = sp.simplify(sp.diff(u, t))\ndu_dX = sp.simplify(sp.diff(u, X))\ndu_dddX = sp.diff(u, X, 3)\n#du_dddX = sp.simplify(du_dddX)\n\nU = sp.lambdify((X,t), u, \"numpy\")\nU1 = sp.lambdify((X,t), du_dt, \"numpy\")\nU2 = sp.lambdify((X,t), du_dX, \"numpy\")\nU3 = sp.lambdify((X,t), du_dddX, \"numpy\")\n\n# before this line, everything happened in SymPy\n# now the NumPy part starts\n\nY = np.linspace(-20, 20, 20)\nT = np.linspace(-35, 35, 20)\n\nprint(U(Y, T))\nprint(U1(Y, T))\nprint(U2(Y, T))\nprint(U3(Y, T))\n</code></pre>\n\n<p>Note that the linspace for Y and for T need to have the same size if you want to call the lambdified functions directly on them. You probably want to extend the 1D linspaces to a 2D mesh using <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.meshgrid.html\" rel=\"nofollow noreferrer\"><code>np.meshgrid()</code></a>. The mesh can have a different number of divisions in the two directions. An example with your function:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import matplotlib.pyplot as plt\nY = np.linspace(-20, 20, 100)\nT = np.linspace(-35, 35, 300)\nYY, TT = np.meshgrid(Y, T)\nz = U1(YY, TT)\nh = plt.contourf(Y,T,z)\nplt.show()\n</code></pre>\n\n<p>PS: To convert the expressions to LaTeX, although the are quite long:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>print(sp.latex(du_dt))\nprint(sp.latex(du_dX))\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 9410545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/679cfe7d55dd0f1b896930b7b8272b11?s=128&d=identicon&r=PG", "display_name": "Linde", "link": "https://stackoverflow.com/users/9410545/linde"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 348, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1573125266, "creation_date": 1573072270, "question_id": 58738051, "link": "https://stackoverflow.com/questions/58738051/add-object-has-no-attribute-sinh-error-in-numerical-and-symbolic-expression", "title": "&quot;Add&quot; object has no attribute &quot;sinh&quot; error in numerical and symbolic expression?", "body": "<p>Ultimately, my goal is to numerically differentiate the expression 'u' (see code) with respect to t, with respect to X and three times with respect to X.</p>\n\n<p>First idea was to just write the expression down numerically, providing arrays (linspaces) for X and t. This resulted in the error \"'Add' object has no attribute 'cosh'\". The only thing I know about this error is that it indicates I should use sympy-functions instead of numpy-functions or the other way around. But, using a symbpolic expression (sympy-functions) and then trying to lambdify gave the same error, this time with no attribute 'sinh'.</p>\n\n<p>I don't know where I'm going wrong with this. The symbolic expression is defined just fine, the error only occurs when I add the first lambdify into the code.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import numpy as np\nimport sympy as sp\nc_1=1.35\nc_2=0.7\nX = sp.Symbol('X')\nt = sp.Symbol('t')\nu = sp.Function('u')(X,t)\nu = 2*(c_1-c_2)*(c_1*(sp.cosh(sp.sqrt(c_2)*(X-c_2*t)/2))**2 + c_2*(sp.sinh(sp.sqrt(c_1)*(-X-c_1*t)/2))**2)/((sp.sqrt(c_1)-sp.sqrt(c_2))*sp.cosh((sp.sqrt(c_1)*(-X-c_1*t) + sp.sqrt(c_2)*(X-c_2*t))/2)+ (sp.sqrt(c_1)+sp.sqrt(c_2))*sp.cosh((sp.sqrt(c_1)*(-X-c_1*t)-sp.sqrt(c_2)*(X-c_2*t))/2))**2\nY= np.linspace(-20,20,100)\nT = np.linspace(-35,35,300)\nU = sp.lambdify(X,u,\"numpy\")\nU2 = sp.lambdify(t,U(Y),\"numpy\")(T)\n</code></pre>\n\n<p>Does anybody know how to fix my code to prevent this error, or know another method to numerically differentiate u as I described above?</p>\n"}, {"tags": ["python", "json", "python-3.x", "encoding", "base64"], "comments": [{"owner": {"reputation": 990, "user_id": 4764353, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-48IuUHI0z7w/AAAAAAAAAAI/AAAAAAAAAYw/hqtraJsvmR4/photo.jpg?sz=128", "display_name": "Nikolay Shindarov", "link": "https://stackoverflow.com/users/4764353/nikolay-shindarov"}, "edited": false, "score": 0, "creation_date": 1573073128, "post_id": 58738012, "comment_id": 103766454, "body": "Seems to be related to the fact you are using bytes when opening your file for reading and writing. Please try <code>&quot;wb+&quot;</code> instead of &quot;w+&quot; and <code>r</code> instead of <code>rb</code>."}, {"owner": {"reputation": 21, "user_id": 12329309, "user_type": "registered", "profile_image": "https://graph.facebook.com/3390796874294032/picture?type=large", "display_name": "cmp_2204", "link": "https://stackoverflow.com/users/12329309/cmp-2204"}, "reply_to_user": {"reputation": 990, "user_id": 4764353, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-48IuUHI0z7w/AAAAAAAAAAI/AAAAAAAAAYw/hqtraJsvmR4/photo.jpg?sz=128", "display_name": "Nikolay Shindarov", "link": "https://stackoverflow.com/users/4764353/nikolay-shindarov"}, "edited": false, "score": 0, "creation_date": 1573076067, "post_id": 58738012, "comment_id": 103767544, "body": "wb+ is already written. I tried using &#39;r&#39; instead of &#39;rb&#39; and still got the following error: raise JSONDecodeError(&quot;Expecting value&quot;, s, err.value) from None json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)"}, {"owner": {"reputation": 990, "user_id": 4764353, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-48IuUHI0z7w/AAAAAAAAAAI/AAAAAAAAAYw/hqtraJsvmR4/photo.jpg?sz=128", "display_name": "Nikolay Shindarov", "link": "https://stackoverflow.com/users/4764353/nikolay-shindarov"}, "edited": false, "score": 0, "creation_date": 1573079793, "post_id": 58738012, "comment_id": 103768835, "body": "Sorry obliviously I meant  <code>&quot;w+&quot;</code> instead of <code>&quot;wb+&quot;</code> and <code>r</code> instead of <code>rb</code>. <code>b</code> stands for bytes, the problem seems to be related to them. If it doesn&#39;t work I would debug what json tries to decode by putting it into <code>type()</code>. You need JSON serializable string in order to parse it successfully."}, {"owner": {"reputation": 21, "user_id": 12329309, "user_type": "registered", "profile_image": "https://graph.facebook.com/3390796874294032/picture?type=large", "display_name": "cmp_2204", "link": "https://stackoverflow.com/users/12329309/cmp-2204"}, "edited": false, "score": 0, "creation_date": 1573154814, "post_id": 58738012, "comment_id": 103799041, "body": "Could you please put that into an example for me?"}, {"owner": {"reputation": 21, "user_id": 12329309, "user_type": "registered", "profile_image": "https://graph.facebook.com/3390796874294032/picture?type=large", "display_name": "cmp_2204", "link": "https://stackoverflow.com/users/12329309/cmp-2204"}, "edited": false, "score": 0, "creation_date": 1573155065, "post_id": 58738012, "comment_id": 103799158, "body": "&#39;&#39;&#39;      details = str({                                   &quot;Data Bytes 1: &quot;: username,                  &quot;Data Bytes 3: &quot;: user_password              })                                                                                       details = json.loads(str(base64.b64decode(open(&quot;customerDetails.json&quot;, &quot;r&quot;).read())))           if username == details[&quot;Data Bytes 1: &quot;] and user_password == details[&quot;Data Bytes 3: &quot;]:              print(&quot;\\nLogin in Successful! &quot;)      else:           print(&quot;\\nThere is trouble logging in, please try again.\\n &quot;)           cancel_order()  &#39;&#39;&#39;"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 12329309, "user_type": "registered", "profile_image": "https://graph.facebook.com/3390796874294032/picture?type=large", "display_name": "cmp_2204", "link": "https://stackoverflow.com/users/12329309/cmp-2204"}, "reply_to_user": {"reputation": 27241, "user_id": 5320906, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NOdNo.jpg?s=128&g=1", "display_name": "snakecharmerb", "link": "https://stackoverflow.com/users/5320906/snakecharmerb"}, "edited": false, "score": 0, "creation_date": 1573986398, "post_id": 58895018, "comment_id": 104062843, "body": "The error: json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0) means that there is no data in the JSON file that you are reading from.  That was my mistake.  Next, it fix the key error, you need to firstly open the JSON file as &#39;read bytes&#39; then decode it using json.loads and b64.decode and then it should work."}], "tags": [], "owner": {"reputation": 21, "user_id": 12329309, "user_type": "registered", "profile_image": "https://graph.facebook.com/3390796874294032/picture?type=large", "display_name": "cmp_2204", "link": "https://stackoverflow.com/users/12329309/cmp-2204"}, "is_accepted": true, "score": 0, "last_activity_date": 1610651024, "last_edit_date": 1610651024, "creation_date": 1573936901, "answer_id": 58895018, "question_id": 58738012, "link": "https://stackoverflow.com/questions/58738012/json-decoder-jsondecodeerror-expecting-value-line-1-column-1-char-0-keyerror/58895018#58895018", "title": "json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0) KeyError: [&quot;Data Bytes 1: &quot;]", "body": "<pre><code>  with open(&quot;customerDetails.json&quot;, &quot;rb&quot;) as customer_details:\n       details = json.loads(base64.b64decode(customer_details.read()).decode())                                                 \n  if username == details[&quot;Data Bytes 1: &quot;] and user_password == details[&quot;Data Bytes 3: &quot;]:\n      print(&quot;\\nLogin Successful! &quot;) \n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 12329309, "user_type": "registered", "profile_image": "https://graph.facebook.com/3390796874294032/picture?type=large", "display_name": "cmp_2204", "link": "https://stackoverflow.com/users/12329309/cmp-2204"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 404, "favorite_count": 1, "accepted_answer_id": 58895018, "answer_count": 1, "score": 2, "last_activity_date": 1610651024, "creation_date": 1573072121, "last_edit_date": 1573072772, "question_id": 58738012, "link": "https://stackoverflow.com/questions/58738012/json-decoder-jsondecodeerror-expecting-value-line-1-column-1-char-0-keyerror", "title": "json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0) KeyError: [&quot;Data Bytes 1: &quot;]", "body": "<p>I have two errors which I cannot figure out how to fix. </p>\n\n<p>First is: </p>\n\n<blockquote>\n  <p>json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0). </p>\n</blockquote>\n\n<p>Second is: </p>\n\n<blockquote>\n  <p>KeyError[\"Data Bytes 1: \"]</p>\n</blockquote>\n\n<pre><code>def save_details():\n\nglobal details\n\nwith open(\"customerDetails.json\", \"wb+\") as customer_details: #open customerDetails.json \n\n        details = { \n            \"Data Bytes 1: \": username, \n            \"Data Bytes 2: \": user_phone_number, \n            \"Data Bytes 3: \": user_password \n        }\n\n        customer_details.write(base64.b64encode(json.dumps(details).encode()))\n\nwith open(\"customerDetails.json\", \"rb\") as customer_details: \n        details = json.loads(base64.b64decode(customer_details.read()).decode()) \n</code></pre>\n\n<hr>\n\n<pre><code>customers = json.loads(base64.b64decode(open(\"customerDetails.json\", \"rb\").read()))\n\n\nif username == customers[\"Data Bytes 1: \"] and user_password == customers[\"Data Bytes 3: \"]:\n         print(\"\\nLogin in Successful! \")\n\nelse:\n      print(\"\\nThere is trouble logging in, please try again.\\n \")\n      cancel_order() '''\n</code></pre>\n\n<p>Here is the part of my code which is <strong>associated with this problem</strong>. </p>\n\n<p>Has anyone got any ideas on how to fix this?</p>\n"}, {"tags": ["python", "python-3.x", "dictionary", "return-value"], "comments": [{"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 1, "creation_date": 1573072597, "post_id": 58737998, "comment_id": 103766237, "body": "Welcome to SO. This isn&#39;t a discussion forum or tutorial. Please take the <a href=\"https://stackoverflow.com/tour\">tour</a> and take the time to read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> and the other links found on that page.  Invest some time with <a href=\"https://docs.python.org/3/tutorial/index.html\" rel=\"nofollow noreferrer\">the Tutorial</a> practicing the examples. It will give you an idea of the tools Python offers to help you solve your problem."}], "answers": [{"comments": [{"owner": {"reputation": 5879, "user_id": 8150685, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WV7OV.jpg?s=128&g=1", "display_name": "Error - Syntactical Remorse", "link": "https://stackoverflow.com/users/8150685/error-syntactical-remorse"}, "edited": false, "score": 0, "creation_date": 1573072890, "post_id": 58738089, "comment_id": 103766350, "body": "Don&#39;t just add spaces to the code to make it a code block without indenting the rest of your code. Indenting actually matters in python. Alternatively just create a code block via 3 back ticks which is often easier (see my edit)."}, {"owner": {"reputation": 570, "user_id": 9393525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4931f6f76220bad06a5821116792154a?s=128&d=identicon&r=PG&f=1", "display_name": "Lakshya Srivastava", "link": "https://stackoverflow.com/users/9393525/lakshya-srivastava"}, "reply_to_user": {"reputation": 5879, "user_id": 8150685, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WV7OV.jpg?s=128&g=1", "display_name": "Error - Syntactical Remorse", "link": "https://stackoverflow.com/users/8150685/error-syntactical-remorse"}, "edited": false, "score": 0, "creation_date": 1573073142, "post_id": 58738089, "comment_id": 103766462, "body": "@Error-SyntacticalRemorse thanks for 3 backticks, it will save my time indenting with spaces :)."}, {"owner": {"reputation": 7801, "user_id": 1212401, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ed478436fcb05fd3ae15da650d2a8cd6?s=128&d=identicon&r=PG", "display_name": "Chris Doyle", "link": "https://stackoverflow.com/users/1212401/chris-doyle"}, "edited": false, "score": 0, "creation_date": 1573073257, "post_id": 58738089, "comment_id": 103766507, "body": "shouldnt <code>if value[&#39;name&#39;] in [&#39;Azura&#39;]:</code> be <code>if value[&#39;name&#39;] == name:</code> ?"}, {"owner": {"reputation": 570, "user_id": 9393525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4931f6f76220bad06a5821116792154a?s=128&d=identicon&r=PG&f=1", "display_name": "Lakshya Srivastava", "link": "https://stackoverflow.com/users/9393525/lakshya-srivastava"}, "reply_to_user": {"reputation": 7801, "user_id": 1212401, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ed478436fcb05fd3ae15da650d2a8cd6?s=128&d=identicon&r=PG", "display_name": "Chris Doyle", "link": "https://stackoverflow.com/users/1212401/chris-doyle"}, "edited": false, "score": 0, "creation_date": 1573073389, "post_id": 58738089, "comment_id": 103766562, "body": "@ChrisDoyle Thanks. Edited."}, {"owner": {"reputation": 7801, "user_id": 1212401, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ed478436fcb05fd3ae15da650d2a8cd6?s=128&d=identicon&r=PG", "display_name": "Chris Doyle", "link": "https://stackoverflow.com/users/1212401/chris-doyle"}, "edited": false, "score": 0, "creation_date": 1573073467, "post_id": 58738089, "comment_id": 103766588, "body": "dont do <code>in names</code>, <code>names</code>, is just going to be a singe name the user gave not a list. So <code>names</code> is just going to be a string and you can just compare with <code>==</code>"}], "tags": [], "owner": {"reputation": 570, "user_id": 9393525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4931f6f76220bad06a5821116792154a?s=128&d=identicon&r=PG&f=1", "display_name": "Lakshya Srivastava", "link": "https://stackoverflow.com/users/9393525/lakshya-srivastava"}, "is_accepted": false, "score": 0, "last_activity_date": 1573073680, "last_edit_date": 1573073680, "creation_date": 1573072475, "answer_id": 58738089, "question_id": 58737998, "link": "https://stackoverflow.com/questions/58737998/how-to-create-a-dictionary-that-returns-the-valuekey-in-question/58738089#58738089", "title": "How to create a dictionary that returns the value(key) in question?", "body": "<p>Try this:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>people = [\n    {'name': \"Azura\", 'group': \"cute_python\"},\n    {'name': \"Mate\", 'group': \"cute_python\"},\n    {'name': \"Anna\", 'group': \"fatal_error\"}, \n    {'name': \"John\", 'group': \"fatal_error\"}\n]\n\ndef op(names):\n    for value in people:\n        if value['name'].lower() in names.lower():\n            print(value['group'])\n\nx = op(input(\"Welcome to the py-group-information,I can tell you where \n    those users belong to : Azura Mate  Anna   John Which user do you want \n    to ask for ?\"))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5879, "user_id": 8150685, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WV7OV.jpg?s=128&g=1", "display_name": "Error - Syntactical Remorse", "link": "https://stackoverflow.com/users/8150685/error-syntactical-remorse"}, "is_accepted": true, "score": 1, "last_activity_date": 1573134134, "last_edit_date": 1573134134, "creation_date": 1573073347, "answer_id": 58738261, "question_id": 58737998, "link": "https://stackoverflow.com/questions/58737998/how-to-create-a-dictionary-that-returns-the-valuekey-in-question/58738261#58738261", "title": "How to create a dictionary that returns the value(key) in question?", "body": "<p>Similar to the other answer but I would write it a tad different:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>people = [\n    {'name': \"Azura\", 'group': \"cute_python\"},\n    {'name': \"Mate\", 'group': \"cute_python\"},\n    {'name': \"Anna\", 'group': \"fatal_error\"}, \n    {'name': \"John\", 'group': \"fatal_error\"}\n]\nname_to_group = {d['name']: d['group'] for d in people}\n\nprint(\"Group Information\")\nnames = ', '.join(name_to_group)\nname = input(f\"Enter one of {names} or 0 to exit: \")\nwhile name != '0':\n    if name not in name_to_group:\n        continue\n    print(f\"{name} is in group {name_to_group[name]}\")\n    name = input(f\"Enter one of {names} or 0 to exit: \")\nprint('Good Bye')\n</code></pre>\n\n<p>Example Output:</p>\n\n<pre><code>Group Information\nEnter one of Azura, Mate, Anna, John or 0 to exit: Mate\nMate is in group cute_python\nEnter one of Azura, Mate, Anna, John or 0 to exit: John\nJohn is in group fatal_error\nEnter one of Azura, Mate, Anna, John or 0 to exit: 0\nGood Bye\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4425, "user_id": 2346961, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/lZJot.jpg?s=128&g=1", "display_name": "Sreejith Nair", "link": "https://stackoverflow.com/users/2346961/sreejith-nair"}, "is_accepted": false, "score": 0, "last_activity_date": 1573074978, "creation_date": 1573074978, "answer_id": 58738613, "question_id": 58737998, "link": "https://stackoverflow.com/questions/58737998/how-to-create-a-dictionary-that-returns-the-valuekey-in-question/58738613#58738613", "title": "How to create a dictionary that returns the value(key) in question?", "body": "<p>Following is the core logic to extract from you data structure (purposefully omitting your list and welcome screen text). Assuming you have those, first capture the user input as below and continue to search for group that they belong to.</p>\n\n<pre><code>user_name = input(\"Which user do you want to ask for ?\")\n    for item in people:\n        for key in item:\n            if item[key] == user_name:\n                    print(item['group'])\n                    break\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 8307272, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-X8l12maHAS8/AAAAAAAAAAI/AAAAAAAAAAA/2-5JZVSPvAc/photo.jpg?sz=128", "display_name": "Agnieszka Gierczak", "link": "https://stackoverflow.com/users/8307272/agnieszka-gierczak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 58738261, "answer_count": 3, "score": 0, "last_activity_date": 1573134134, "creation_date": 1573072058, "last_edit_date": 1573073160, "question_id": 58737998, "link": "https://stackoverflow.com/questions/58737998/how-to-create-a-dictionary-that-returns-the-valuekey-in-question", "title": "How to create a dictionary that returns the value(key) in question?", "body": "<p>I have to create a dictionary (in your file) of four-person from my course and the name of the group they belong to. \nWhen I run my program it should ask the user to enter a name and return the name of the group of that person back to them. It should look something like this:</p>\n\n<pre><code>Welcome to the py-group-infromator, I can tell you where those users belong to:\n{name_user}\n{name_user}\n{name_user}\n{name_user}\nWhich user do you want to ask for?\n{name_user}\n{name_group}\n</code></pre>\n\n<p>in the beginning</p>\n\n<pre><code>notes = ''' \"Welcome to the py-group-informator,\n    I can tell you where those users belong to\" :\n    Azura\n    Mate\n    Anna \n    John \n    \" Which user do you want to ask for ?\" '''\nprint(notes)\n</code></pre>\n\n<p>My dictionary</p>\n\n<pre><code>people = [{'name': \"Azura\", 'group': \"cute_python\"},{'name': \"Mate\", 'group': \"cute_python\"},{'name': \"Anna\", 'group': \"fatal_error\"},{'name': \"John\", 'group': \"fatal_error\"}]\n</code></pre>\n\n<p>Could any help me? Big sorry for my style, this is my first ask ;) </p>\n"}, {"tags": ["python", "random"], "comments": [{"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 1, "creation_date": 1573072150, "post_id": 58737994, "comment_id": 103766052, "body": "You don&#39;t call <code>random.sample</code> within your <code>while</code> loop, so of course the value is the same every time"}, {"owner": {"reputation": 1592, "user_id": 9211949, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Pny8Y.png?s=128&g=1", "display_name": "CoderCharmander", "link": "https://stackoverflow.com/users/9211949/codercharmander"}, "edited": false, "score": 2, "creation_date": 1573072175, "post_id": 58737994, "comment_id": 103766060, "body": "Insert the 2 lines beginning with <code>random_key</code> after the last <code>print</code>, but still in the while loop"}, {"owner": {"reputation": 2643, "user_id": 4647152, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce4ce205ac75f5349adab6741868624d?s=128&d=identicon&r=PG&f=1", "display_name": "Francis Colas", "link": "https://stackoverflow.com/users/4647152/francis-colas"}, "edited": false, "score": 0, "creation_date": 1573072181, "post_id": 58737994, "comment_id": 103766061, "body": "You choose the <code>random_key</code> once then you loop and print it repeatedly. You should try to move that part in the loop."}, {"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1573072680, "post_id": 58737994, "comment_id": 103766273, "body": "Please don&#39;t post images of code or data. Copy and paste it as text then format it as code (select it and type <code>ctrl-k</code>)"}, {"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1573074326, "post_id": 58737994, "comment_id": 103766923, "body": "An alternative for getting a random item: <code>k,v = random.sample(command_dict.items(),1)[0]</code>"}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 2, "creation_date": 1573075507, "post_id": 58737994, "comment_id": 103767358, "body": "Don&#39;t use <code>random.sample</code> where <code>random.choice</code> will do."}, {"owner": {"reputation": 6783, "user_id": 3064538, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/b644a108ae9ae0ec2f7402dd235d155c?s=128&d=identicon&r=PG&f=1", "display_name": "Boris", "link": "https://stackoverflow.com/users/3064538/boris"}, "edited": false, "score": 0, "creation_date": 1573075782, "post_id": 58737994, "comment_id": 103767460, "body": "Off topic, but you might want to use Ankidroid for flashcards instead. This way you&#39;ll just be reviewing the same commands that you already know, whereas using a flashcards app lets you mark certain cards as &quot;I already memorized this&quot;, so you don&#39;t have to waste time looking at them. There&#39;s probably a deck for command line tools already"}], "answers": [{"tags": [], "owner": {"reputation": 36473, "user_id": 12046409, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZRRhI.jpg?s=128&g=1", "display_name": "JohanC", "link": "https://stackoverflow.com/users/12046409/johanc"}, "is_accepted": true, "score": 0, "last_activity_date": 1573075446, "last_edit_date": 1573075446, "creation_date": 1573073428, "answer_id": 58738280, "question_id": 58737994, "link": "https://stackoverflow.com/questions/58737994/is-there-a-way-to-continue-printing-a-random-element-from-a-python-3-dictionary/58738280#58738280", "title": "Is there a way to continue printing a random element from a Python 3 dictionary without repeating?", "body": "<p>To get a different key each time, just keep a list of still available keys and remove the one just chosen. When the list of available keys gets empty, fill it again. <code>random.choice()</code> chooses just one key (similar to <code>random.sample(..., 1)[0]</code>).</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>available_keys = []\nwhile True:\n    if not available_keys:  # refill the list of available keys every time it gets empty\n        available_keys = list(command_dict)\n    random_key = random.choice(available_keys)\n    available_keys.remove(random_key)  # remove the chosen key to prevent it gets chosen again\n    print (random_key)\n    input (\"&gt; \")\n    print (\"ANSWER: \", command_dict.get(random_key))\n    time.sleep (2)\n    print (\"\\n------------\")\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 12334191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d78ad5c74cdfb70fd48684ec24ee57b5?s=128&d=identicon&r=PG&f=1", "display_name": "rjwinter", "link": "https://stackoverflow.com/users/12334191/rjwinter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 58738280, "answer_count": 1, "score": 3, "last_activity_date": 1573075446, "creation_date": 1573072016, "question_id": 58737994, "link": "https://stackoverflow.com/questions/58737994/is-there-a-way-to-continue-printing-a-random-element-from-a-python-3-dictionary", "title": "Is there a way to continue printing a random element from a Python 3 dictionary without repeating?", "body": "<p>I am currently learning Python 3, as well as trying to pickup on command line along the way.\nI figured I could practice both by writing a Python program to aid in memorizing commands for the command line.</p>\n\n<p>The code I wrote <em>almost</em> did what I wanted it to (shown below).</p>\n\n<p>Essentially, when I run the file in my command line, I want it to print a random key from the dictionary, then allow me to type in what I think it means, then show me the correct answer upon hitting enter.</p>\n\n<p>The problem is that it just keeps printing the same key every time unless I close the program and run it again.\nI've tried functions, nesting functions, for loops, while loops, nesting loops, etc and I just can't seem to get it to print a different key.</p>\n\n<p>I would love some feedback on this!</p>\n\n<pre><code>import random\nimport time\n\ncommand_dict = {\n    'pwd' : 'print working directory',\n    'hostname': 'my computer\\'s network name',\n    'mkdir' : 'make directory',\n    'cd' : 'change directory',\n    'ls' : 'list directory',\n    'rmdir' : 'remove directory',\n    'pushd' : 'push directory',\n    'popd' : 'pop directory',\n    'cp' : 'copy a file or directory',\n    'mv' : 'move file or directory',\n    'less' : 'page through a file',\n    'cat' : 'print the whole file',\n    'xargs' : 'execute arguments',\n    'find' : 'find files',\n    'grep' : 'find things inside files',\n    'man' : 'read a manual page',\n    'apropos' : 'find which man page is appropriate',\n    'env' : 'look at your environment',\n    'echo' : 'print some arguments',\n    'export' : 'export/set a new environment variable',\n    'exit' : 'exit the shell',\n    'sudo' : 'become super user root - !Danger!'\n}\n\nrandom_key = random.sample(list(command_dict), 1)[0]\nanswer_value = command_dict.get(random_key)\n\nwhile True:\n\n    print(random_key)\n    input(\"&gt; \")\n    print(\"ANSWER: \", answer_value)\n    time.sleep(2)\n    print(\"\\n------------\")\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/8LLLE.png\" rel=\"nofollow noreferrer\">here is my command line</a></p>\n"}]