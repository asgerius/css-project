[{"tags": ["python", "regex"], "answers": [{"comments": [{"owner": {"reputation": 8438, "user_id": 3511819, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/7fac02ad0909ae0411a642e72a1b41d8?s=128&d=identicon&r=PG", "display_name": "AlexG", "link": "https://stackoverflow.com/users/3511819/alexg"}, "edited": false, "score": 0, "creation_date": 1484785954, "post_id": 41731731, "comment_id": 70657991, "body": "Thank you, your use of ? swaps the lookup in the capture group from greedy to lazy, which seems to be key here. I selected another answer because it was simper"}, {"owner": {"reputation": 5300, "user_id": 6765312, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EGsHU.jpg?s=128&g=1", "display_name": "Ibrahim", "link": "https://stackoverflow.com/users/6765312/ibrahim"}, "reply_to_user": {"reputation": 8438, "user_id": 3511819, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/7fac02ad0909ae0411a642e72a1b41d8?s=128&d=identicon&r=PG", "display_name": "AlexG", "link": "https://stackoverflow.com/users/3511819/alexg"}, "edited": false, "score": 0, "creation_date": 1484786106, "post_id": 41731731, "comment_id": 70658027, "body": "@AlexG No worries, I&#39;m glad you found a working solution."}], "tags": [], "owner": {"reputation": 5300, "user_id": 6765312, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EGsHU.jpg?s=128&g=1", "display_name": "Ibrahim", "link": "https://stackoverflow.com/users/6765312/ibrahim"}, "is_accepted": false, "score": 1, "last_activity_date": 1484785193, "creation_date": 1484785193, "answer_id": 41731731, "question_id": 41731561, "link": "https://stackoverflow.com/questions/41731561/regular-expression-stop-capture-group-at-symbol/41731731#41731731", "title": "Regular expression stop capture group at ? symbol", "body": "<p>Try this:</p>\n\n<pre><code>import re\nre.findall('^.*(?:stuff\\d\\/)(.*?)(?=\\?|$).*$', url)\n</code></pre>\n\n<p>In this regex, I used Positive Lookahead <code>(?= )</code> to exclude <code>?</code></p>\n"}, {"tags": [], "owner": {"reputation": 362892, "user_id": 256196, "user_type": "moderator", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/d84b558fd67be10d5a718fb94231909d?s=128&d=identicon&r=PG", "display_name": "Bohemian", "link": "https://stackoverflow.com/users/256196/bohemian"}, "is_accepted": true, "score": 1, "last_activity_date": 1484785416, "creation_date": 1484785416, "answer_id": 41731765, "question_id": 41731561, "link": "https://stackoverflow.com/questions/41731561/regular-expression-stop-capture-group-at-symbol/41731765#41731765", "title": "Regular expression stop capture group at ? symbol", "body": "<p>Just capture \"non <code>?</code>\" chars:</p>\n\n<pre><code>re.findall('^.*(?:stuff1/|stuff2/)([^?]*).*$', url)\n</code></pre>\n"}], "owner": {"reputation": 8438, "user_id": 3511819, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/7fac02ad0909ae0411a642e72a1b41d8?s=128&d=identicon&r=PG", "display_name": "AlexG", "link": "https://stackoverflow.com/users/3511819/alexg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 932, "favorite_count": 0, "accepted_answer_id": 41731765, "answer_count": 2, "score": 0, "last_activity_date": 1484785631, "creation_date": 1484783916, "last_edit_date": 1484785631, "question_id": 41731561, "link": "https://stackoverflow.com/questions/41731561/regular-expression-stop-capture-group-at-symbol", "title": "Regular expression stop capture group at ? symbol", "body": "<p>I am trying to capture <code>\"thing1\"</code> and <code>\"thing2\"</code> in these strings:</p>\n\n<pre><code>http://www.example.com/stuff1/thing1   \nhttp://www.example.com/stuff2/thing2?id=9999\n</code></pre>\n\n<p>In python, I tried this:</p>\n\n<pre><code>re.findall('^.*(?:stuff1/|stuff2/)(.*)\\??.*$', url)\n</code></pre>\n\n<p>The first example URL works with my code, but the second gives:</p>\n\n<pre><code>['thing2?id=9999']\n</code></pre>\n\n<p>I was intending for the capture group to not include the <code>\"?\"</code>.</p>\n"}, {"tags": ["python", "applescript"], "comments": [{"owner": {"reputation": 587, "user_id": 2076832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e447d4a9702e89d41baf62602525c9?s=128&d=identicon&r=PG", "display_name": "GRAYgoose124", "link": "https://stackoverflow.com/users/2076832/graygoose124"}, "edited": false, "score": 0, "creation_date": 1484786145, "post_id": 41731460, "comment_id": 70658034, "body": "I don&#39;t know if python is built-in to Mac OS, but I doubt it is. When you use things like py2app they bundle the whole python interpreter with your program. This means that your 5KiB script is now a 35MiB application. On an OS with Python built-in, that&#39;s just a waste. Which doesn&#39;t really matter, except for maybe download time. So, something to be aware of, but not really something you have a choice in probably."}, {"owner": {"reputation": 1810, "user_id": 7416363, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/mm0ih.jpg?s=128&g=1", "display_name": "Jerie Wang", "link": "https://stackoverflow.com/users/7416363/jerie-wang"}, "reply_to_user": {"reputation": 587, "user_id": 2076832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e447d4a9702e89d41baf62602525c9?s=128&d=identicon&r=PG", "display_name": "GRAYgoose124", "link": "https://stackoverflow.com/users/2076832/graygoose124"}, "edited": false, "score": 0, "creation_date": 1484786844, "post_id": 41731460, "comment_id": 70658202, "body": "@GRAYgoose124 Python 2.7 is built-in, you can simply type &quot;python&quot; into terminal to use it. BTW, tkinter 8.5.9 is also built-in in macOS."}, {"owner": {"reputation": 587, "user_id": 2076832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e447d4a9702e89d41baf62602525c9?s=128&d=identicon&r=PG", "display_name": "GRAYgoose124", "link": "https://stackoverflow.com/users/2076832/graygoose124"}, "edited": false, "score": 0, "creation_date": 1484787093, "post_id": 41731460, "comment_id": 70658260, "body": "In that case, what you can do is rename it to a *.pyw file so that the terminal won&#39;t show and then put <code>#!&#47;usr&#47;bin&#47;env python</code> at the top of it. (Assuming this is a single file, if not it&#39;d still work but I&#39;d see why you want to bundle it then) then it&#39;s runnable just by clicking, I assume you could copy it to the Applications menu too. The shebang line tells the OS which program to use to run the current file."}], "answers": [{"comments": [{"owner": {"reputation": 1810, "user_id": 7416363, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/mm0ih.jpg?s=128&g=1", "display_name": "Jerie Wang", "link": "https://stackoverflow.com/users/7416363/jerie-wang"}, "edited": false, "score": 0, "creation_date": 1484786738, "post_id": 41731624, "comment_id": 70658181, "body": "Thank you very much! So I changed my script into <code>tell application &quot;Finder&quot; \tset current_path to container of (path to me) as alias end tell  do shell script POSIX path of current_path &amp; &quot;myscript.py&quot;</code>but it said &quot;sh:permission denied.&quot; I have no idea why because the software is on my desktop. And asking the user for sudo permission will sometimes scare them."}, {"owner": {"reputation": 1810, "user_id": 7416363, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/mm0ih.jpg?s=128&g=1", "display_name": "Jerie Wang", "link": "https://stackoverflow.com/users/7416363/jerie-wang"}, "edited": false, "score": 0, "creation_date": 1484787929, "post_id": 41731624, "comment_id": 70658488, "body": "Ok I solved it. I just found online how to convert a script into executable. I don&#39;t use terminal a lot so I did not understand what you were referring to by &quot;chmod.&quot;  Thank you!"}, {"owner": {"reputation": 3069, "user_id": 2092796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ibxN1.jpg?s=128&g=1", "display_name": "CRGreen", "link": "https://stackoverflow.com/users/2092796/crgreen"}, "reply_to_user": {"reputation": 1810, "user_id": 7416363, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/mm0ih.jpg?s=128&g=1", "display_name": "Jerie Wang", "link": "https://stackoverflow.com/users/7416363/jerie-wang"}, "edited": false, "score": 0, "creation_date": 1484810135, "post_id": 41731624, "comment_id": 70665279, "body": "No problem. It&#39;s totally worth teaching yourself (or otherwise learning) the shell (terminal)."}], "tags": [], "owner": {"reputation": 3069, "user_id": 2092796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ibxN1.jpg?s=128&g=1", "display_name": "CRGreen", "link": "https://stackoverflow.com/users/2092796/crgreen"}, "is_accepted": true, "score": 2, "last_activity_date": 1484784381, "creation_date": 1484784381, "answer_id": 41731624, "question_id": 41731460, "link": "https://stackoverflow.com/questions/41731460/convert-a-script-into-macos-application/41731624#41731624", "title": "Convert a script into macOS application?", "body": "<p>There are two things I would advise.</p>\n\n<ul>\n<li>Use <code>path to current application</code> so that you have the path no matter\nwhere the app is.</li>\n<li><p>What may be \"cleaner\" is, instead of using the Terminal, use <code>do shell script</code> like:</p>\n\n<p><code>do shell script \"/path/to/my/script/script.py\"</code></p></li>\n</ul>\n\n<p>as long as the script is \"chmod\"-ed to be executable (I also like using a utility called \"Kilometre\" for this)</p>\n\n<p>Apart from that, there's nothing dangerous or wrong about what you're trying to do.</p>\n"}], "owner": {"reputation": 1810, "user_id": 7416363, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/mm0ih.jpg?s=128&g=1", "display_name": "Jerie Wang", "link": "https://stackoverflow.com/users/7416363/jerie-wang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 282, "favorite_count": 0, "accepted_answer_id": 41731624, "answer_count": 1, "score": 0, "last_activity_date": 1484792608, "creation_date": 1484783253, "last_edit_date": 1484792608, "question_id": 41731460, "link": "https://stackoverflow.com/questions/41731460/convert-a-script-into-macos-application", "title": "Convert a script into macOS application?", "body": "<p>I have been looking up how to convert a .py script into an .app application so the users know how to run it. So far I have only found using py2app or pyinstaller. Is there a significant disadvantage using an application generated by exporting the following script into application and putting my python script into the application's resource folder? (My python script has a GUI and only uses a built-in library in python 2.7.)</p>\n\n<pre class=\"lang-applescript prettyprint-override\"><code>tell application \"Finder\"\n    if exists POSIX file \"/Applications/app.app/Contents/Resources/appname.py\" then\n        tell application \"Terminal\"\n            do script \"python /Applications/app.app/Contents/Resources/appname.py\"\n        end tell\n    else if exists POSIX file \"/Volumes/appname/appname.py\" then\n        tell application \"Terminal\"\n            do script \"python /Volumes/appname/appname.py\"\n        end tell\n    else\n        display dialog \"Please copy the file to the Application folder, or mount the installation diskimage\"\n    end if\nend tell\ntell application \"Terminal\"\n    close\nend tell\n</code></pre>\n\n<p>It works fine on my computer, so I am just curious why I couldn't find it on the Internet.</p>\n"}, {"tags": ["python", "pdf", "flask", "flask-uploads"], "answers": [{"tags": [], "owner": {"reputation": 435, "user_id": 4031292, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/17eafc2141bcd54d1113c0842f6bfb66?s=128&d=identicon&r=PG&f=1", "display_name": "Jan", "link": "https://stackoverflow.com/users/4031292/jan"}, "is_accepted": true, "score": 4, "last_activity_date": 1484822048, "creation_date": 1484822048, "answer_id": 41739577, "question_id": 41731457, "link": "https://stackoverflow.com/questions/41731457/flask-force-download-pdf-files-to-open-in-browser/41739577#41739577", "title": "Flask: force download pdf files to open in browser", "body": "<p>You can try to add the <code>mimetype</code> parameter to <code>send_from_directory</code>:</p>\n\n<pre><code>return send_from_directory(directory=some_directory,\n                           filename=filename,\n                           mimetype='application/pdf')\n</code></pre>\n\n<p>That works for me, at least with Firefox.</p>\n\n<p>If you need more control over headers, you can use a custom response, but you will lose the advantages of send_file() (I think it does something clever to serve the file directly from the webserver.)</p>\n\n<pre><code>with open(filepath) as f:\n    file_content = f.read()\n\nresponse = make_response(file_content, 200)\nresponse.headers['Content-type'] = 'application/pdf'\nresponse.headers['Content-disposition'] = ...\n\nreturn response\n</code></pre>\n"}], "owner": {"reputation": 3072, "user_id": 6611672, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/fa3f99cc3070ae57d877e08f9564ed22?s=128&d=identicon&r=PG&f=1", "display_name": "Johnny Metz", "link": "https://stackoverflow.com/users/6611672/johnny-metz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4593, "favorite_count": 1, "accepted_answer_id": 41739577, "answer_count": 1, "score": 2, "last_activity_date": 1484822048, "creation_date": 1484783247, "last_edit_date": 1495540947, "question_id": 41731457, "link": "https://stackoverflow.com/questions/41731457/flask-force-download-pdf-files-to-open-in-browser", "title": "Flask: force download pdf files to open in browser", "body": "<p>I'm trying to download a PDF file using flask but I don't want the file to download as an attachment. I simply want it to appear in the user's browser as a separate webpage. I've tried passing the <code>as_attachment=False</code> option to the <code>send_from_directory</code> method but no luck.</p>\n\n<p>Here is my function so far:</p>\n\n<pre><code>@app.route('/download_to_browser')\ndef download_to_browser(filename):\n    return send_from_directory(directory=some_directory,\n                               filename=filename,\n                               as_attachment=False)\n</code></pre>\n\n<p>The function works in the sense that the file is downloading to my computer but I'd much rather just display it in the browser (and let the user download the file if they want to).</p>\n\n<p>I read <a href=\"https://stackoverflow.com/questions/6293893/how-to-force-files-to-open-in-browser-instead-of-download-pdf\">here</a> I need to change the<code>content-disposition</code> parameter but I'm not sure how that can be done efficiently (perhaps using a custom response?). Any help?</p>\n\n<p>Note: I'm not using Flask-Uploads at the moment but I probably will down the line.</p>\n"}, {"tags": ["python", "regex"], "comments": [{"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1484783323, "post_id": 41731407, "comment_id": 70657229, "body": "Can you be more specific about the problem with these solutions than &quot;they don&#39;t work&quot;?"}, {"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1484783726, "post_id": 41731407, "comment_id": 70657364, "body": "Can you be more specific than &quot;be retained somewhere&quot;?"}], "answers": [{"tags": [], "owner": {"reputation": 4831, "user_id": 3144928, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6e2a01c799169f3de4c57c0f0366840f?s=128&d=identicon&r=PG", "display_name": "Ben Aubin", "link": "https://stackoverflow.com/users/3144928/ben-aubin"}, "is_accepted": false, "score": 0, "last_activity_date": 1484784777, "last_edit_date": 1484784777, "creation_date": 1484784132, "answer_id": 41731584, "question_id": 41731407, "link": "https://stackoverflow.com/questions/41731407/concatenating-split-quotes/41731584#41731584", "title": "Concatenating split quotes", "body": "<p>How about something like this?</p>\n\n<pre><code>/(\".+?)\"(.+?),\\s+?\"(.+?[.?!]+\")/g\n</code></pre>\n\n<p>Then replace the capture groups in this order:</p>\n\n<pre><code>$1 $3$2.\n</code></pre>\n\n<p>like so:</p>\n\n<pre><code>m.group(1) + \" \" + m.group(3) + m.group(2) + \".\"\n</code></pre>\n\n<h2>Example:</h2>\n\n<blockquote>\n  <p>\"Hello,\" Josh said enthusiastically, \"I have a question!\"</p>\n</blockquote>\n\n<p>to</p>\n\n<blockquote>\n  <p>\"Hello, I have a question!\" Josh said enthusiastically.</p>\n</blockquote>\n\n<h2>Explanation:</h2>\n\n<p><a href=\"https://regexper.com/#%2F(%22.%2B%3F)%22(.%2B%3F)%2C%5Cs%2B%3F%22(.%2B%3F%5B.%3F!%5D%2B%22)%2Fg\" rel=\"nofollow noreferrer\">http://bsite.cc/inoD/Screen%20Shot%202017-01-18%20at%206.01.22%20PM.png</a></p>\n\n<ol>\n<li>First part matches a <code>\"</code>, and then any characters until it sees another quote.\n\n<ul>\n<li><code>\"Hello,</code>\"<strong>|</strong> Josh said enthusiastically, \"I have a question!\"</li>\n</ul></li>\n<li>Second part matches text in the middle of the quotes, until it reaches a comma (also matches whitespace after comma and the first quote)\n\n<ul>\n<li>\"Hello,\" <code>Josh said enthusiastically</code>, <strong>|</strong> \"I have a question!\"</li>\n</ul></li>\n<li>Third group matches until the next quote\n\n<ul>\n<li>\"Hello,\" Josh said enthusiastically, \"<code>I have a question!\"</code></li>\n</ul></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 5300, "user_id": 6765312, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EGsHU.jpg?s=128&g=1", "display_name": "Ibrahim", "link": "https://stackoverflow.com/users/6765312/ibrahim"}, "is_accepted": false, "score": 0, "last_activity_date": 1484790573, "creation_date": 1484790573, "answer_id": 41732456, "question_id": 41731407, "link": "https://stackoverflow.com/questions/41731407/concatenating-split-quotes/41732456#41732456", "title": "Concatenating split quotes", "body": "<p>Try this regex:</p>\n\n<pre><code>(?&lt;=\\\")([^\\s].*?[^\\s])(?=\\\")|(?&lt;=\\\")\\s(.*?)\\s(?=\\\")\n</code></pre>\n\n<p>The regex above will match these two strings: <code>Hello,</code> and <code>I have a question!</code> in group 1, which will make you able to print them together. The same regex will distinguish this portion <code>Josh said enthusiastically,</code> and match it in group 2 which will be handy in case you've decided to use it later.</p>\n\n<p>Check out demo: <a href=\"https://regex101.com/r/m7nqnu/1\" rel=\"nofollow noreferrer\">https://regex101.com/r/m7nqnu/1</a></p>\n\n<p>This is a working Python code:</p>\n\n<pre><code>import re\ntext = '''\"Hello,\" Josh said enthusiastically, \"I have a question!\"'''\nprint ('Group 1: ')\nfor m in re.finditer(r\"(?&lt;=\\\")([^\\s].*?[^\\s])(?=\\\")|(?&lt;=\\\")\\s(.*?)\\s(?=\\\")\", text):\n    if m.group(1) is not None:\n        print('%s ' % (m.group(1)))\nprint ('&lt;br /&gt;Group 2: ')\nfor m in re.finditer(r\"(?&lt;=\\\")([^\\s].*?[^\\s])(?=\\\")|(?&lt;=\\\")\\s(.*?)\\s(?=\\\")\", text):\n    if m.group(2) is not None:\n        print('%s ' % (m.group(2)))\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Group 1: Hello, I have a question! \nGroup 2: Josh said enthusiastically,\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "is_accepted": false, "score": 0, "last_activity_date": 1484792381, "creation_date": 1484792381, "answer_id": 41732683, "question_id": 41731407, "link": "https://stackoverflow.com/questions/41731407/concatenating-split-quotes/41732683#41732683", "title": "Concatenating split quotes", "body": "<p>As long as there are no quotes within quotes, and all quotes properly match, and the phrase always consists of two quoted parts with an unquoted part in the middle:</p>\n\n<pre><code>parts = [x.strip() for x in re.findall(r'\"([^\"]+)', text)]\nprint(parts[0] + \" \" + parts[2])\n# Hello, I have a question!\nprint(parts[1])\n# Josh said enthusiastically,\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 6901277, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/83358e5b2afdb710145b32f1e2d65051?s=128&d=identicon&r=PG&f=1", "display_name": "BigBlue", "link": "https://stackoverflow.com/users/6901277/bigblue"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1484792381, "creation_date": 1484782910, "question_id": 41731407, "link": "https://stackoverflow.com/questions/41731407/concatenating-split-quotes", "title": "Concatenating split quotes", "body": "<p>I have a large file (f) with a lot of dialogue. I need a regex that will concatenate the split quotes (i.e. \"Hello,\" Josh said enthusiastically, \"I have a question!\"), but not delete the middle portion. So, for this example, the output would be, \"Hello, I have a question!\" and then \"Josh said enthusiastically\" would be retained somewhere. I think I am on the right track, but haven't found something that works for these specifications. Here is the code I have already tried out:</p>\n\n<pre><code>for line in f:\n  re.findall(r'\"(.*?)\"', line)\n  output_file.write(line)\n</code></pre>\n\n<p>and </p>\n\n<pre><code>split = re.compile(r'''\n                (,\\\")                \n                (.*?)                \n                (,)                  \n                ( )                  \n                (\")''', re.VERBOSE)  \n\nfor line in f:\n  m = split_quote.match(split)\n  if m:\n    output_file.write(m.group(1) + m.group(5))\n</code></pre>\n\n<p>Thank you for any help!</p>\n"}, {"tags": ["python", "django", "heroku"], "comments": [{"owner": {"reputation": 12105, "user_id": 6043170, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-iFy-IHfVniw/AAAAAAAAAAI/AAAAAAAAAFM/f_Xao2r127I/photo.jpg?sz=128", "display_name": "2ps", "link": "https://stackoverflow.com/users/6043170/2ps"}, "edited": false, "score": 1, "creation_date": 1484783370, "post_id": 41731330, "comment_id": 70657251, "body": "If the files from your <code>django-app</code> aren&#39;t available on the same VM/container as the script, then you can\u2019t.  You can only access your django app, well, if you have access to the files that make up your django app."}, {"owner": {"reputation": 1399, "user_id": 3950550, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/192785af5f63e68a4fbe09562625c1f8?s=128&d=identicon&r=PG&f=1", "display_name": "chris", "link": "https://stackoverflow.com/users/3950550/chris"}, "reply_to_user": {"reputation": 12105, "user_id": 6043170, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-iFy-IHfVniw/AAAAAAAAAAI/AAAAAAAAAFM/f_Xao2r127I/photo.jpg?sz=128", "display_name": "2ps", "link": "https://stackoverflow.com/users/6043170/2ps"}, "edited": false, "score": 0, "creation_date": 1484783452, "post_id": 41731330, "comment_id": 70657276, "body": "ok, that makes sense. thanks!"}], "owner": {"reputation": 1399, "user_id": 3950550, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/192785af5f63e68a4fbe09562625c1f8?s=128&d=identicon&r=PG&f=1", "display_name": "chris", "link": "https://stackoverflow.com/users/3950550/chris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 213, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1484782461, "creation_date": 1484782461, "question_id": 41731330, "link": "https://stackoverflow.com/questions/41731330/accessing-django-models-and-functions-from-within-python-script-hosted-on-separa", "title": "Accessing django models and functions from within python script hosted on separate heroku app", "body": "<p>I'm looking for a way to access the models and functions in my django app hosted on heroku from a python script on a different heroku app.</p>\n\n<p>I understand that the following works if the script that you have is located in the same folder as your django app:</p>\n\n<pre><code>import os \nimport django \nos.environ.setdefault(\"DJANGO_SETTINGS_MODULE\", \"app.settings\")\ndjango.setup()\nfrom manual_tasks.tasks import * \n</code></pre>\n\n<p>but I'm looking to run the script on a different heroku app entirely. Is this possible? In this case, I wouldn't have the path/to/django-app because my script would be hosted on a separate heroku app. </p>\n\n<p>Any help is appreciated! </p>\n"}, {"tags": ["python", "python-2.7", "unicode", "emoji", "python-unicode"], "comments": [{"owner": {"reputation": 852, "user_id": 1690719, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/vqwMX.png?s=128&g=1", "display_name": "lindsay", "link": "https://stackoverflow.com/users/1690719/lindsay"}, "reply_to_user": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 0, "creation_date": 1484782770, "post_id": 41731327, "comment_id": 70657062, "body": "Sorry, I&#39;ll add that in. It&#39;s Python 2.7. :)"}, {"owner": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1484783073, "post_id": 41731327, "comment_id": 70657142, "body": "<code>u&#39;\\u200D&#39; == u&#39;\\U0000200D&#39;</code>"}, {"owner": {"reputation": 852, "user_id": 1690719, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/vqwMX.png?s=128&g=1", "display_name": "lindsay", "link": "https://stackoverflow.com/users/1690719/lindsay"}, "reply_to_user": {"reputation": 21782, "user_id": 176646, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HsQyV.png?s=128&g=1", "display_name": "ThisSuitIsBlackNot", "link": "https://stackoverflow.com/users/176646/thissuitisblacknot"}, "edited": false, "score": 0, "creation_date": 1484783289, "post_id": 41731327, "comment_id": 70657217, "body": "Thanks for that! I wonder if the example I added will accept an extra zero. If that was the case maybe that could solve the non-uniform error. - Turns out that it does, as <code>\\U00001F600</code> is a different character. Thanks anyway!"}], "answers": [{"comments": [{"owner": {"reputation": 852, "user_id": 1690719, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/vqwMX.png?s=128&g=1", "display_name": "lindsay", "link": "https://stackoverflow.com/users/1690719/lindsay"}, "edited": false, "score": 0, "creation_date": 1484783201, "post_id": 41731387, "comment_id": 70657190, "body": "Thanks for these answers. It might be me, but I just tried the Python 2.7 example and it throws this error:  <code>unichr() arg not in range(0x10000)  (narrow Python build).</code> Any ideas?"}, {"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "reply_to_user": {"reputation": 852, "user_id": 1690719, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/vqwMX.png?s=128&g=1", "display_name": "lindsay", "link": "https://stackoverflow.com/users/1690719/lindsay"}, "edited": false, "score": 0, "creation_date": 1484783296, "post_id": 41731387, "comment_id": 70657219, "body": "What do you get for <code>import unicodedata; unicodedata.unidata_version</code> ?"}, {"owner": {"reputation": 852, "user_id": 1690719, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/vqwMX.png?s=128&g=1", "display_name": "lindsay", "link": "https://stackoverflow.com/users/1690719/lindsay"}, "edited": false, "score": 0, "creation_date": 1484783370, "post_id": 41731387, "comment_id": 70657250, "body": "Terminal says that I&#39;m using <code>5.2.0</code>. Perhaps that&#39;s dated?"}, {"owner": {"reputation": 269348, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "reply_to_user": {"reputation": 852, "user_id": 1690719, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/vqwMX.png?s=128&g=1", "display_name": "lindsay", "link": "https://stackoverflow.com/users/1690719/lindsay"}, "edited": false, "score": 0, "creation_date": 1484783449, "post_id": 41731387, "comment_id": 70657274, "body": "@lindsay that&#39;s a limitation of Python 2.7 in its narrow build form (which I believe is the default) - it&#39;s incapable of representing those higher number characters as a single Unicode codepoint, and needs to resort to a surrogate pair. In some version of Python 3 they fixed that problem, can&#39;t remember exactly which at the moment."}, {"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 3, "creation_date": 1484783579, "post_id": 41731387, "comment_id": 70657315, "body": "No, that&#39;s fine, it&#39;s just a crappy build of python.  Could you try <code>struct.pack(&#39;i&#39;, 0x1f600).decode(&#39;utf-32&#39;)</code> and see the result?"}, {"owner": {"reputation": 852, "user_id": 1690719, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/vqwMX.png?s=128&g=1", "display_name": "lindsay", "link": "https://stackoverflow.com/users/1690719/lindsay"}, "edited": false, "score": 0, "creation_date": 1484783656, "post_id": 41731387, "comment_id": 70657339, "body": "I just tried the <code>struct.pack</code> method. It seemed to work on that string. I&#39;m baffled. What is going on behind the scenes there which isn&#39;t the case for <code>unichr</code>? This was my output. <code>u&#39;\\0001f600&#39;</code>."}, {"owner": {"reputation": 269348, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "reply_to_user": {"reputation": 852, "user_id": 1690719, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/vqwMX.png?s=128&g=1", "display_name": "lindsay", "link": "https://stackoverflow.com/users/1690719/lindsay"}, "edited": false, "score": 1, "creation_date": 1484783917, "post_id": 41731387, "comment_id": 70657420, "body": "Using <code>struct.pack</code> is brilliant and disgusting at the same time. You should edit it into your answer. @lindsay there&#39;s no reason <code>unichr</code> couldn&#39;t do the same, it&#39;s just not good enough."}, {"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 0, "creation_date": 1484784041, "post_id": 41731387, "comment_id": 70657455, "body": "I&#39;ll leave the &quot;disgusting&quot; hack in the comments.  IOW, get a better build of Python :)"}, {"owner": {"reputation": 852, "user_id": 1690719, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/vqwMX.png?s=128&g=1", "display_name": "lindsay", "link": "https://stackoverflow.com/users/1690719/lindsay"}, "edited": false, "score": 0, "creation_date": 1484784433, "post_id": 41731387, "comment_id": 70657570, "body": "Thanks for these solutions. Really helps a lot. :)"}], "tags": [], "owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "is_accepted": true, "score": 3, "last_activity_date": 1484782970, "last_edit_date": 1484782970, "creation_date": 1484782823, "answer_id": 41731387, "question_id": 41731327, "link": "https://stackoverflow.com/questions/41731327/unicode-representation-to-formatted-unicode/41731387#41731387", "title": "Unicode representation to formatted Unicode?", "body": "<p>I think your most reliable method will be to parse the number to an integer and then use <code>unichr</code> to lookup that codepoint:</p>\n\n<pre><code>unichr(0x1f600)  # or: unichr(int('1f600', 16))\n</code></pre>\n\n<p><em>Note:</em> on Python 3, it's just <code>chr</code>.  </p>\n"}, {"comments": [{"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 0, "creation_date": 1484783204, "post_id": 41731446, "comment_id": 70657192, "body": "If it&#39;s json, sure.  But who said anything about json?"}, {"owner": {"reputation": 10078, "user_id": 2709018, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/p98Vl.png?s=128&g=1", "display_name": "myaut", "link": "https://stackoverflow.com/users/2709018/myaut"}, "reply_to_user": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 0, "creation_date": 1484783250, "post_id": 41731446, "comment_id": 70657208, "body": "@wim, you can create strings from unicode sequences and feed them to json parser"}], "tags": [], "owner": {"reputation": 10078, "user_id": 2709018, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/p98Vl.png?s=128&g=1", "display_name": "myaut", "link": "https://stackoverflow.com/users/2709018/myaut"}, "is_accepted": false, "score": 0, "last_activity_date": 1484783158, "creation_date": 1484783158, "answer_id": 41731446, "question_id": 41731327, "link": "https://stackoverflow.com/questions/41731327/unicode-representation-to-formatted-unicode/41731446#41731446", "title": "Unicode representation to formatted Unicode?", "body": "<p>You can look into <code>json</code> module implementation. It seem that it is not that simple:</p>\n\n<pre><code># Unicode escape sequence\nuni = _decode_uXXXX(s, end)\nend += 5\n# Check for surrogate pair on UCS-4 systems\nif sys.maxunicode &gt; 65535 and \\\n0xd800 &lt;= uni &lt;= 0xdbff and s[end:end + 2] == '\\\\u':\n    uni2 = _decode_uXXXX(s, end + 1)\n    if 0xdc00 &lt;= uni2 &lt;= 0xdfff:\n        uni = 0x10000 + (((uni - 0xd800) &lt;&lt; 10) | (uni2 - 0xdc00))\n        end += 6\nchar = unichr(uni)\n</code></pre>\n\n<p>(from cpython-2.7.9/Lib/json/decoder.py lines 129-138)</p>\n\n<p>I think that it would be easier to use <code>json.loads</code> directly:</p>\n\n<pre><code>&gt;&gt;&gt; print json.loads('\"\\\\u0123\"')\n\u0123\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 0, "creation_date": 1484783703, "post_id": 41731484, "comment_id": 70657358, "body": "O.P. is dealing with <i>text</i> like <code>&quot;U+1F600&quot;</code>.  Since it&#39;s not the Python syntax, there is a need for some parsing or conversion, no?"}, {"owner": {"reputation": 852, "user_id": 1690719, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/vqwMX.png?s=128&g=1", "display_name": "lindsay", "link": "https://stackoverflow.com/users/1690719/lindsay"}, "edited": false, "score": 0, "creation_date": 1484783770, "post_id": 41731484, "comment_id": 70657374, "body": "Thanks for those answers. Python 3.3 is sound really good right about now. I probably should be using it in all honesty. I tried using the <code>unichr</code> method beforehand but it didn&#39;t work due to the narrow build issue. I assume the Python 3 <code>chr</code> method can handle this issue."}, {"owner": {"reputation": 852, "user_id": 1690719, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/vqwMX.png?s=128&g=1", "display_name": "lindsay", "link": "https://stackoverflow.com/users/1690719/lindsay"}, "reply_to_user": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 0, "creation_date": 1484783878, "post_id": 41731484, "comment_id": 70657411, "body": "Yeah, as @wim said i&#39;m editing the text expression of the unicode character. Thanks for the detailed answer non-the-less! :)"}, {"owner": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "reply_to_user": {"reputation": 852, "user_id": 1690719, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/vqwMX.png?s=128&g=1", "display_name": "lindsay", "link": "https://stackoverflow.com/users/1690719/lindsay"}, "edited": false, "score": 1, "creation_date": 1484784093, "post_id": 41731484, "comment_id": 70657468, "body": "@lindsay Added a regular expression to parse that syntax, but note that Python 2 has issues with U+10000 - U+10FFFF if you are using a narrow build."}, {"owner": {"reputation": 852, "user_id": 1690719, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/vqwMX.png?s=128&g=1", "display_name": "lindsay", "link": "https://stackoverflow.com/users/1690719/lindsay"}, "edited": false, "score": 0, "creation_date": 1484784508, "post_id": 41731484, "comment_id": 70657598, "body": "@MarkTolonen thanks for adding in that answer. I&#39;d never heard of this narrow issue until now."}, {"owner": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "reply_to_user": {"reputation": 852, "user_id": 1690719, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/vqwMX.png?s=128&g=1", "display_name": "lindsay", "link": "https://stackoverflow.com/users/1690719/lindsay"}, "edited": false, "score": 2, "creation_date": 1484784917, "post_id": 41731484, "comment_id": 70657721, "body": "@lindsay Before Python 3.3 Unicode characters were stored internally using <a href=\"https://en.wikipedia.org/wiki/UTF-16\" rel=\"nofollow noreferrer\">UTF-16LE</a> encoding in a narrow build, and UTF-32LE in a wide build.  UTF-16 encoding uses one 16-bit word for Unicode codepoints below U+10000, and two 16-bit words for everything else.  So there were oddities like <code>len(u&#39;\\U0001F600&#39;) == 2</code> but <code>len(u&#39;\\U0000FFFF&#39;) == 1</code>.  <code>unichr()</code> only supported returning codepoints below U+10000 in a narrow build.  @wim&#39;s <code>struct.pack</code> trick works around that."}, {"owner": {"reputation": 852, "user_id": 1690719, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/vqwMX.png?s=128&g=1", "display_name": "lindsay", "link": "https://stackoverflow.com/users/1690719/lindsay"}, "edited": false, "score": 0, "creation_date": 1484785589, "post_id": 41731484, "comment_id": 70657905, "body": "@MarkTolonen thank you for that in depth response! This unicode stuff is tricky, but that helps me get a better grasp of it all. :) Explains why I had gotten myself stuck trying to encode and decode these strings."}], "tags": [], "owner": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "is_accepted": false, "score": 3, "last_activity_date": 1484784375, "last_edit_date": 1484784375, "creation_date": 1484783404, "answer_id": 41731484, "question_id": 41731327, "link": "https://stackoverflow.com/questions/41731327/unicode-representation-to-formatted-unicode/41731484#41731484", "title": "Unicode representation to formatted Unicode?", "body": "<p><code>U+NNNN</code> is just common notation used to talk about Unicode.  Python's syntax for a single Unicode character is one of:</p>\n\n<ul>\n<li><code>u'\\xNN'</code> for Unicode characters through U+00FF</li>\n<li><code>u'\\uNNNN'</code> for Unicode characters through U+FFFF</li>\n<li><code>u'\\U00NNNNNN'</code> for Unicode characters through U+10FFFF (max)</li>\n</ul>\n\n<p>Note: <code>N</code> is a hexadecimal digit.</p>\n\n<p>Use the correct notation when entering a character.  You can use the longer notations even for low characters:</p>\n\n<pre><code>u'A' == u'\\x41' == u'\\u0041' == u'\\U00000041'\n</code></pre>\n\n<p>Programmatically, you can also generate the correct character with <code>unichr(n)</code> (Python 2) or <code>chr(n)</code> (Python 3).</p>\n\n<p>Note that before Python 3.3, there were <em>narrow</em> and <em>wide</em> Unicode builds of Python.  <code>unichr/chr</code> can only support <code>sys.maxunicode</code>, which is 65535 (0xFFFF) in narrow builds and 1114111 (0x10FFFF) on wide builds.  Python 3.3 unified the builds and solved many issues with Unicode.</p>\n\n<p>If you are dealing with text string in the format <code>U+NNNN</code>, here's a regular expression (Python 3).  It looks for <code>U+</code> and 4-6 hexadecimal digits, and replaces them with the <code>chr()</code> version.  Note that ASCII characters (Python 2) or printable characters (Python 3) will display the actual character and not the escaped version.</p>\n\n<pre><code>&gt;&gt;&gt; re.sub(r'U\\+([0-9A-Fa-f]{4,6})',lambda m: chr(int(m.group(1),16)),'testing U+1F600')\n'testing \\U0001f600'\n&gt;&gt;&gt; re.sub(r'U\\+([0-9A-Fa-f]{4,6})',lambda m: chr(int(m.group(1),16)),'testing U+5000')\n'testing \\u5000'\n&gt;&gt;&gt; re.sub(r'U\\+([0-9A-Fa-f]{4,6})',lambda m: chr(int(m.group(1),16)),'testing U+0041')\n'testing A'\n&gt;&gt;&gt; re.sub(r'U\\+([0-9A-Fa-f]{4,6})',lambda m: chr(int(m.group(1),16)),'testing U+0081')\n'testing \\x81'\n</code></pre>\n"}], "owner": {"reputation": 852, "user_id": 1690719, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/vqwMX.png?s=128&g=1", "display_name": "lindsay", "link": "https://stackoverflow.com/users/1690719/lindsay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 670, "favorite_count": 0, "accepted_answer_id": 41731387, "answer_count": 3, "score": 3, "last_activity_date": 1484792811, "creation_date": 1484782436, "last_edit_date": 1484792811, "question_id": 41731327, "link": "https://stackoverflow.com/questions/41731327/unicode-representation-to-formatted-unicode", "title": "Unicode representation to formatted Unicode?", "body": "<p>I am having some difficulty understanding the translation of unicode expressions into their respective characters. I have been looking at the unicode specification, and I have come across various strings that are formatted as follows <code>U+1F600</code>. As far as I have seen, there doesn't appear to be a built in function that knows how to translate these strings into the correct formatting for Python, such as <code>\\U0001F600</code>. </p>\n\n<p>In my program I have made a small regular expression that will find these <code>U\\+.{5}</code> patterns and substitute the <code>U+</code> with <code>\\U000</code>. However, what I have found is that this syntax isn't the same for all unicode characters, such as the zero width join that actually is supposed to be translated from <code>U+200D</code> to <code>\\u200D</code>. </p>\n\n<p>Because I don't know every variation of the correct unicode escape sequence, what is the best method to handle this case? Is it that there are only a finite amount of these special characters that I can just check for or am I going about this the wrong way entirely?</p>\n\n<p>Python version is <strong>2.7.</strong></p>\n"}, {"tags": ["python", "r", "premailer"], "comments": [{"owner": {"reputation": 971, "user_id": 5645311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b201ef31bb6369582ecf0ba8c58f037?s=128&d=identicon&r=PG&f=1", "display_name": "Sixiang.Hu", "link": "https://stackoverflow.com/users/5645311/sixiang-hu"}, "edited": false, "score": 0, "creation_date": 1484782931, "post_id": 41731325, "comment_id": 70657110, "body": "python module <code>premailer</code> doesn&#39;t installed? If this is the case, then <code>pip install premailer</code> before trying again."}, {"owner": {"reputation": 686, "user_id": 7438293, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VI9Ak.png?s=128&g=1", "display_name": "leonardofed", "link": "https://stackoverflow.com/users/7438293/leonardofed"}, "reply_to_user": {"reputation": 971, "user_id": 5645311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b201ef31bb6369582ecf0ba8c58f037?s=128&d=identicon&r=PG&f=1", "display_name": "Sixiang.Hu", "link": "https://stackoverflow.com/users/5645311/sixiang-hu"}, "edited": false, "score": 0, "creation_date": 1484783086, "post_id": 41731325, "comment_id": 70657146, "body": "<code>premailer</code> it&#39;s actually installed and it perfectly works from the terminal. It doesn&#39;t work when you invoke it from the R script."}, {"owner": {"reputation": 971, "user_id": 5645311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b201ef31bb6369582ecf0ba8c58f037?s=128&d=identicon&r=PG&f=1", "display_name": "Sixiang.Hu", "link": "https://stackoverflow.com/users/5645311/sixiang-hu"}, "edited": false, "score": 0, "creation_date": 1484783355, "post_id": 41731325, "comment_id": 70657245, "body": "I tried the <code>system</code> command provided on win 10 (64bit) R 3.3.2 with Python 3.5.2, it works except cannot find the html files. Guess you are using *nix os?"}, {"owner": {"reputation": 686, "user_id": 7438293, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VI9Ak.png?s=128&g=1", "display_name": "leonardofed", "link": "https://stackoverflow.com/users/7438293/leonardofed"}, "reply_to_user": {"reputation": 971, "user_id": 5645311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b201ef31bb6369582ecf0ba8c58f037?s=128&d=identicon&r=PG&f=1", "display_name": "Sixiang.Hu", "link": "https://stackoverflow.com/users/5645311/sixiang-hu"}, "edited": false, "score": 0, "creation_date": 1484783470, "post_id": 41731325, "comment_id": 70657282, "body": "Interesting. But yes, I&#39;m on Unix OS."}, {"owner": {"reputation": 686, "user_id": 7438293, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VI9Ak.png?s=128&g=1", "display_name": "leonardofed", "link": "https://stackoverflow.com/users/7438293/leonardofed"}, "reply_to_user": {"reputation": 971, "user_id": 5645311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b201ef31bb6369582ecf0ba8c58f037?s=128&d=identicon&r=PG&f=1", "display_name": "Sixiang.Hu", "link": "https://stackoverflow.com/users/5645311/sixiang-hu"}, "edited": false, "score": 0, "creation_date": 1484783960, "post_id": 41731325, "comment_id": 70657436, "body": "@Sixiang.Hu Here&#39;s a screenshot. <a href=\"https://i.stack.imgur.com/bw5HB.png\" rel=\"nofollow noreferrer\">i.stack.imgur.com/bw5HB.png</a>"}, {"owner": {"reputation": 971, "user_id": 5645311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b201ef31bb6369582ecf0ba8c58f037?s=128&d=identicon&r=PG&f=1", "display_name": "Sixiang.Hu", "link": "https://stackoverflow.com/users/5645311/sixiang-hu"}, "edited": false, "score": 0, "creation_date": 1484784201, "post_id": 41731325, "comment_id": 70657497, "body": "em.. not familiar with *nix os. Can only guess is it something to do with environment variable, which tells os where to search for modules? <a href=\"https://scipher.wordpress.com/2010/05/10/setting-your-pythonpath-environment-variable-linuxunixosx/\" rel=\"nofollow noreferrer\">scipher.wordpress.com/2010/05/10/&hellip;</a>"}, {"owner": {"reputation": 11940, "user_id": 6455166, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wzKlP.png?s=128&g=1", "display_name": "Weihuang Wong", "link": "https://stackoverflow.com/users/6455166/weihuang-wong"}, "edited": false, "score": 0, "creation_date": 1484785214, "post_id": 41731325, "comment_id": 70657807, "body": "Following up from the previous comment, does <code>python -c &#39;import sys; print sys.path&#39;</code> return identical outputs when run from the command line and when invoked through <code>system(...)</code> in R?"}, {"owner": {"reputation": 686, "user_id": 7438293, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VI9Ak.png?s=128&g=1", "display_name": "leonardofed", "link": "https://stackoverflow.com/users/7438293/leonardofed"}, "reply_to_user": {"reputation": 11940, "user_id": 6455166, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wzKlP.png?s=128&g=1", "display_name": "Weihuang Wong", "link": "https://stackoverflow.com/users/6455166/weihuang-wong"}, "edited": false, "score": 0, "creation_date": 1484785352, "post_id": 41731325, "comment_id": 70657840, "body": "@WeihuangWong Nope. from System()<code>[&#39;&#39;, &#39;&#47;System&#47;Library&#47;Frameworks&#47;Python.framework&#47;Versions&#47;2.7&#47;li&zwnj;&#8203;b&#47;python27.zip&#39;, ...]</code> &amp; from cmd line <code>[&#39;&#39;, &#39;&#47;usr&#47;local&#47;Cellar&#47;python&#47;2.7.12_2&#47;Frameworks&#47;Python.framewo&zwnj;&#8203;rk&#47;Versions&#47;2.7&#47;lib&#47;&zwnj;&#8203;python27.zip&#39;, ...]</code>"}, {"owner": {"reputation": 239591, "user_id": 1855677, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/5ufQP.png?s=128&g=1", "display_name": "IRTFM", "link": "https://stackoverflow.com/users/1855677/irtfm"}, "edited": false, "score": 0, "creation_date": 1484801964, "post_id": 41731325, "comment_id": 70662198, "body": "Run a Unix command from an R <code>system()</code>-call to see if the premailer package is located in a directory that your $PATH environment can &quot;see&quot;. The $PATH may be different in R than it is in your bask console. You may need to extend your path in your .Rprofile file"}, {"owner": {"reputation": 11940, "user_id": 6455166, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wzKlP.png?s=128&g=1", "display_name": "Weihuang Wong", "link": "https://stackoverflow.com/users/6455166/weihuang-wong"}, "edited": false, "score": 0, "creation_date": 1484808631, "post_id": 41731325, "comment_id": 70664623, "body": "Perhaps some of the suggestions here may help: <a href=\"http://stackoverflow.com/questions/25383030/rpython-using-wrong-python-installation-on-mac-osx\" title=\"rpython using wrong python installation on mac osx\">stackoverflow.com/questions/25383030/&hellip;</a>, e.g. <a href=\"http://stackoverflow.com/a/37134510/6455166\">stackoverflow.com/a/37134510/6455166</a>.  You probably want the <code>usr&#47;local&#47;Cellar</code> version of Python to run when it&#39;s called from R, so modify the linked answer accordingly."}], "answers": [{"tags": [], "owner": {"reputation": 686, "user_id": 7438293, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VI9Ak.png?s=128&g=1", "display_name": "leonardofed", "link": "https://stackoverflow.com/users/7438293/leonardofed"}, "is_accepted": true, "score": 0, "last_activity_date": 1484831451, "creation_date": 1484831451, "answer_id": 41742637, "question_id": 41731325, "link": "https://stackoverflow.com/questions/41731325/invoke-python-command-from-r-script-with-system/41742637#41742637", "title": "Invoke Python command from R script with System()", "body": "<p>This is how I fixed this. </p>\n\n<blockquote>\n  <p>Adding the following line to the end of that file, showed me the correct path in Rstudio after restarting my R kernel:    </p>\n</blockquote>\n\n<pre><code>.Internal(Sys.setenv(\"PATH\", paste(\"/usr/local/bin\", Sys.getenv(\"PATH\"), sep=\":\")))\n</code></pre>\n"}], "owner": {"reputation": 686, "user_id": 7438293, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VI9Ak.png?s=128&g=1", "display_name": "leonardofed", "link": "https://stackoverflow.com/users/7438293/leonardofed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 504, "favorite_count": 0, "accepted_answer_id": 41742637, "answer_count": 1, "score": 1, "last_activity_date": 1484831451, "creation_date": 1484782423, "last_edit_date": 1484784330, "question_id": 41731325, "link": "https://stackoverflow.com/questions/41731325/invoke-python-command-from-r-script-with-system", "title": "Invoke Python command from R script with System()", "body": "<p>In my R script I have to execute an external Python script and I'd use the <a href=\"https://i.stack.imgur.com/bw5HB.png\" rel=\"nofollow noreferrer\"><code>System()</code> function</a>.</p>\n\n<pre><code>system(\"python -m premailer -f daily-report.html -o\nready-weekly-report.html\")\n</code></pre>\n\n<p>But after running this in the R console this is what I get</p>\n\n<p><a href=\"https://i.stack.imgur.com/bw5HB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bw5HB.png\" alt=\"enter image description here\"></a></p>\n\n<pre><code>/usr/bin/python: No module named premailer\n</code></pre>\n\n<p>If I run the python command from the terminal everything works.</p>\n\n<p><strong>EDIT</strong></p>\n\n<ul>\n<li>The command I'm try to run in this R script is <code>premailer</code>\n(<a href=\"https://github.com/peterbe/premailer\" rel=\"nofollow noreferrer\">https://github.com/peterbe/premailer</a>)</li>\n<li>I have installed <code>premailer</code> on my machine.</li>\n<li>I'm on Unix OS</li>\n</ul>\n"}, {"tags": ["python", "chess"], "comments": [{"owner": {"reputation": 2048, "user_id": 6782589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ozoj9.jpg?s=128&g=1", "display_name": "Luca Angioloni", "link": "https://stackoverflow.com/users/6782589/luca-angioloni"}, "edited": false, "score": 0, "creation_date": 1484782523, "post_id": 41731321, "comment_id": 70656996, "body": "Not clear what you are asking. Can you elaborate a bit?"}, {"owner": {"reputation": 6424, "user_id": 3579910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoMjv.jpg?s=128&g=1", "display_name": "TemporalWolf", "link": "https://stackoverflow.com/users/3579910/temporalwolf"}, "edited": false, "score": 0, "creation_date": 1484782649, "post_id": 41731321, "comment_id": 70657034, "body": "Is this python2.7 or python 3?"}, {"owner": {"reputation": 23, "user_id": 7386194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4ac0bd6a0a5c6e58dbacc6908986a61?s=128&d=identicon&r=PG&f=1", "display_name": "Censored", "link": "https://stackoverflow.com/users/7386194/censored"}, "edited": false, "score": 0, "creation_date": 1484782838, "post_id": 41731321, "comment_id": 70657082, "body": "python 3 and also there is nothing else that i can elaborate on. This is exactly what i need"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1484783083, "post_id": 41731321, "comment_id": 70657145, "body": "I disagree. This is not what you need, although it may be what you want. Tom&#39;s answer sounds like what you need."}, {"owner": {"reputation": 6424, "user_id": 3579910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoMjv.jpg?s=128&g=1", "display_name": "TemporalWolf", "link": "https://stackoverflow.com/users/3579910/temporalwolf"}, "edited": false, "score": 0, "creation_date": 1484783234, "post_id": 41731321, "comment_id": 70657201, "body": "This is an <a href=\"http://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">XY Problem</a>. Show us what you are trying to accomplish, not how you are trying to accomplish it."}, {"owner": {"reputation": 23, "user_id": 7386194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4ac0bd6a0a5c6e58dbacc6908986a61?s=128&d=identicon&r=PG&f=1", "display_name": "Censored", "link": "https://stackoverflow.com/users/7386194/censored"}, "edited": false, "score": 0, "creation_date": 1484783384, "post_id": 41731321, "comment_id": 70657255, "body": "cant put 1155 characters in here. ill post in the answers"}, {"owner": {"reputation": 6424, "user_id": 3579910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoMjv.jpg?s=128&g=1", "display_name": "TemporalWolf", "link": "https://stackoverflow.com/users/3579910/temporalwolf"}, "edited": false, "score": 1, "creation_date": 1484784272, "post_id": 41731321, "comment_id": 70657512, "body": "@Censored edit your original post to add/remove information"}, {"owner": {"reputation": 23, "user_id": 7386194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4ac0bd6a0a5c6e58dbacc6908986a61?s=128&d=identicon&r=PG&f=1", "display_name": "Censored", "link": "https://stackoverflow.com/users/7386194/censored"}, "edited": false, "score": 0, "creation_date": 1484785461, "post_id": 41731321, "comment_id": 70657874, "body": "Are you still here?"}, {"owner": {"reputation": 6424, "user_id": 3579910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoMjv.jpg?s=128&g=1", "display_name": "TemporalWolf", "link": "https://stackoverflow.com/users/3579910/temporalwolf"}, "edited": false, "score": 1, "creation_date": 1484785526, "post_id": 41731321, "comment_id": 70657892, "body": "You may want to look into <a href=\"https://www.tutorialspoint.com/python/python_functions.htm\" rel=\"nofollow noreferrer\">functions</a> and <a href=\"http://stackoverflow.com/questions/4954395/create-board-game-like-grid-in-python\">building a chessboard</a> You&#39;re pretty far down a very difficult path -&gt; there are much easier ways to do it."}, {"owner": {"reputation": 23, "user_id": 7386194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4ac0bd6a0a5c6e58dbacc6908986a61?s=128&d=identicon&r=PG&f=1", "display_name": "Censored", "link": "https://stackoverflow.com/users/7386194/censored"}, "edited": false, "score": 0, "creation_date": 1484785756, "post_id": 41731321, "comment_id": 70657940, "body": "Yeah, i practice programming as a side project and i mostly do this at school so i only have a chrome book so i can only use an online compiler. So GUIs are 10000% out of the question"}, {"owner": {"reputation": 23, "user_id": 7386194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4ac0bd6a0a5c6e58dbacc6908986a61?s=128&d=identicon&r=PG&f=1", "display_name": "Censored", "link": "https://stackoverflow.com/users/7386194/censored"}, "edited": false, "score": 0, "creation_date": 1484785923, "post_id": 41731321, "comment_id": 70657983, "body": "Im super glad i just spent a couple of hours to be told to do something else :)"}, {"owner": {"reputation": 6424, "user_id": 3579910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoMjv.jpg?s=128&g=1", "display_name": "TemporalWolf", "link": "https://stackoverflow.com/users/3579910/temporalwolf"}, "edited": false, "score": 0, "creation_date": 1484850958, "post_id": 41731321, "comment_id": 70690837, "body": "@Censored Part of learning programming is learning what not to do... everyone here has made the same mistake at one point during their learning."}], "answers": [{"tags": [], "owner": {"reputation": 201, "user_id": 7314735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61f73bab60db8cf255c36ef138cd68f8?s=128&d=identicon&r=PG&f=1", "display_name": "Tom McDermott", "link": "https://stackoverflow.com/users/7314735/tom-mcdermott"}, "is_accepted": false, "score": 1, "last_activity_date": 1484782917, "creation_date": 1484782917, "answer_id": 41731410, "question_id": 41731321, "link": "https://stackoverflow.com/questions/41731321/python-chess-project/41731410#41731410", "title": "Python Chess Project", "body": "<p>I think a reasonable solution here is to change from variables x,y and z to a dictionary with keys \"x\", \"y\" and \"z\"; wherever your code uses <code>x</code>, replace that with <code>vars['x']</code>.</p>\n\n<pre><code>vars = {}\nvars['x'] = 1\nvars['y'] = 2\nvars['z'] = 3\n\nvariable_name = input(\"select variable to change: \")\n\nvars[variable_name] = 99\n\nprint(vars)\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 7386194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4ac0bd6a0a5c6e58dbacc6908986a61?s=128&d=identicon&r=PG&f=1", "display_name": "Censored", "link": "https://stackoverflow.com/users/7386194/censored"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 158, "favorite_count": 0, "closed_date": 1484790574, "answer_count": 1, "score": -4, "last_activity_date": 1484784806, "creation_date": 1484782395, "last_edit_date": 1484784806, "question_id": 41731321, "link": "https://stackoverflow.com/questions/41731321/python-chess-project", "closed_reason": "Duplicate", "title": "Python Chess Project", "body": "<p>So im trying to make a chess game and im super close but i cant figure out how to select a variable to change using:\n    ___ = input()</p>\n\n<p>so heres an example</p>\n\n<pre><code>x = 1\ny = 2\nz = 3\n\nvariable = input()\n#I would select x\n</code></pre>\n\n<p>and i want to be able to select what variable to change then chose the variable i want it to be equal to which even i selected.</p>\n\n<pre><code>variable1 = input()\n#I would select y\nvariable = variable1\n</code></pre>\n\n<p>so i would want 2.</p>\n\n<p>Edit:</p>\n\n<pre><code>a1 = \"\u2656\"\na2 = \"\u2659\"\na3 = \" \"\na4 = \" \"\na5 = \" \"\na6 = \" \"\na7 = \"\u265f\"\na8 = \"\u265c\"\n\nb1 = \"\u2658\"\nb2 = \"\u2659\"\nb3 = \" \"\nb4 = \" \"\nb5 = \" \"\nb6 = \" \"\nb7 = \"\u265f\"\nb8 = \"\u265e\"\n\nc1 = \"\u2657\"\nc2 = \"\u2659\"\nc3 = \" \"\nc4 = \" \"\nc5 = \" \"\nc6 = \" \"\nc7 = \"\u265f\"\nc8 = \"\u265d\"\n\nd1 = \"\u2654\"\nd2 = \"\u2659\"\nd3 = \" \"\nd4 = \" \"\nd5 = \" \"\nd6 = \" \"\nd7 = \"\u265f\"\nd8 = \"\u265a\"\n\ne1 = \"\u2655\"\ne2 = \"\u2659\"\ne3 = \" \"\ne4 = \" \"\ne5 = \" \"\ne6 = \" \"\ne7 = \"\u265f\"\ne8 = \"\u265b\"\n\nf1 = \"\u2657\"\nf2 = \"\u2659\"\nf3 = \" \"\nf4 = \" \"\nf5 = \" \"\nf6 = \" \"\nf7 = \"\u265f\"\nf8 = \"\u265d\"\n\ng1 = \"\u2658\"\ng2 = \"\u2659\"\ng3 = \" \"\ng4 = \" \"\ng5 = \" \"\ng6 = \" \"\ng7 = \"\u265f\"\ng8 = \"\u265e\"\n\nh1 = \"\u2656\"\nh2 = \"\u2659\"\nh3 = \" \"\nh4 = \" \"\nh5 = \" \"\nh6 = \" \"\nh7 = \"\u265f\"\nh8 = \"\u265c\"\nspace = \" \"\n\nwhile True:\n  print(\"h \u253c\" + h1 + \"\u253c\" + h2 + \"\u253c\" + h3 + \"\u253c\" + h4 + \"\u253c\" + h5 + \"\u253c\" + h6 + \"\u253c\" + h7 + \"\u253c\" + h8 + \"\u253c\")\n  print(\"g \u253c\" + g1 + \"\u253c\" + g2 + \"\u253c\" + g3 + \"\u253c\" + g4 + \"\u253c\" + g5 + \"\u253c\" + g6 + \"\u253c\" + g7 + \"\u253c\" + g8 + \"\u253c\")\n  print(\"f \u253c\" + f1 + \"\u253c\" + f2 + \"\u253c\" + f3 + \"\u253c\" + f4 + \"\u253c\" + f5 + \"\u253c\" + f6 + \"\u253c\" + f7 + \"\u253c\" + f8 + \"\u253c\")\n  print(\"e \u253c\" + e1 + \"\u253c\" + e2 + \"\u253c\" + e3 + \"\u253c\" + e4 + \"\u253c\" + e5 + \"\u253c\" + e6 + \"\u253c\" + e7 + \"\u253c\" + e8 + \"\u253c\")\n  print(\"d \u253c\" + d1 + \"\u253c\" + d2 + \"\u253c\" + d3 + \"\u253c\" + d4 + \"\u253c\" + d5 + \"\u253c\" + d6 + \"\u253c\" + d7 + \"\u253c\" + d8 + \"\u253c\")\n  print(\"c \u253c\" + c1 + \"\u253c\" + c2 + \"\u253c\" + c3 + \"\u253c\" + c4 + \"\u253c\" + c5 + \"\u253c\" + c6 + \"\u253c\" + c7 + \"\u253c\" + c8 + \"\u253c\")\n  print(\"b \u253c\" + b1 + \"\u253c\" + b2 + \"\u253c\" + b3 + \"\u253c\" + b4 + \"\u253c\" + b5 + \"\u253c\" + b6 + \"\u253c\" + b7 + \"\u253c\" + b8 + \"\u253c\")\n  print(\"a \u253c\" + a1 + \"\u253c\" + a2 + \"\u253c\" + a3 + \"\u253c\" + a4 + \"\u253c\" + a5 + \"\u253c\" + a6 + \"\u253c\" + a7 + \"\u253c\" + a8 + \"\u253c\")\n  print(\"   1  2 3 4 5 6 7 8\")\n\n\n  print(\"What piece?\")\n  pieceplace = input()\n  print(pieceplace)\n  print(\"Where to?\")\n  pieceplaceloc = input()\n  print(pieceplaceloc)\n  pieceplaceloc = pieceplace\n  continue\n</code></pre>\n"}, {"tags": ["python"], "answers": [{"tags": [], "owner": {"reputation": 3891, "user_id": 2326911, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/173ece6e1a474bf45d2dee00f651b543?s=128&d=identicon&r=PG&f=1", "display_name": "\u1d00\u0280\u1d0d\u1d00\u0274", "link": "https://stackoverflow.com/users/2326911/%e1%b4%80%ca%80%e1%b4%8d%e1%b4%80%c9%b4"}, "is_accepted": false, "score": 1, "last_activity_date": 1484783198, "last_edit_date": 1484783198, "creation_date": 1484782497, "answer_id": 41731334, "question_id": 41731308, "link": "https://stackoverflow.com/questions/41731308/trouble-with-a-range-of-numbers-python/41731334#41731334", "title": "trouble with a range of numbers python", "body": "<p>You should use <code>in</code> operator , here is your fault:</p>\n\n<pre><code>num = 4\nnum == range(3, 6) # false\n# it will be true if num = [3, 4, 5]\nnum in range(3, 6) # true\n# it means num is 3 or 4 or 5\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 6790544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56bfa9a7a73b8ec600bed79d1cdcb156?s=128&d=identicon&r=PG&f=1", "display_name": "Phygon", "link": "https://stackoverflow.com/users/6790544/phygon"}, "is_accepted": false, "score": 1, "last_activity_date": 1484782533, "creation_date": 1484782533, "answer_id": 41731344, "question_id": 41731308, "link": "https://stackoverflow.com/questions/41731308/trouble-with-a-range-of-numbers-python/41731344#41731344", "title": "trouble with a range of numbers python", "body": "<p>What you're doing with that code isn't checking if the number is within a certain <strong>range</strong>, you're checking if your number is equal to a range of numbers between the two that you offered. Range isn't for the usage you are describing, it is for generating ranges to iterate over. Instead, use <code>if number &gt;= 3 and number &gt;= 6:\n    print (\"Within range\")</code></p>\n\n<p>You would not want to use \"in\" as this checks every single number in the set if it is equal to the one that you gave it, this is very inefficient and operates in <strong>(O)n</strong> time.</p>\n"}, {"tags": [], "owner": {"reputation": 58, "user_id": 7438203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c555622e79101dc62a2e506673bbd3d?s=128&d=identicon&r=PG&f=1", "display_name": "Jacek_Kozmic", "link": "https://stackoverflow.com/users/7438203/jacek-kozmic"}, "is_accepted": true, "score": 1, "last_activity_date": 1484792761, "last_edit_date": 1484792761, "creation_date": 1484782850, "answer_id": 41731392, "question_id": 41731308, "link": "https://stackoverflow.com/questions/41731308/trouble-with-a-range-of-numbers-python/41731392#41731392", "title": "trouble with a range of numbers python", "body": "<p><code>range</code> does not include last value. For example, <code>range(0,3)</code> will produce only 0,1 and 2, but NOT 3. </p>\n\n<p>Also you should check whether your <code>len(word)</code> is in range and not if it's equal to range, for <code>len(word)</code> is a string and range is... range so it will always produce <code>False</code>.</p>\n\n<p>Your code should look like:   </p>\n\n<pre><code>if len(word) &lt; 3:\n    return 0\nelif len(word) in range(3, 7) :\n    return len(word)\nelif len(word) in range(7, 10):\n    return len(word)* 2\nelif len(word) &gt;= 10:\n    return len(word) * 3\n</code></pre>\n\n<p>if you want to use range.</p>\n"}], "owner": {"reputation": 171, "user_id": 7436981, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/405e76e1dab51d56ec94cfb9d011ea13?s=128&d=identicon&r=PG&f=1", "display_name": "Fence", "link": "https://stackoverflow.com/users/7436981/fence"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 41731392, "answer_count": 3, "score": 0, "last_activity_date": 1484792761, "creation_date": 1484782244, "last_edit_date": 1484782425, "question_id": 41731308, "link": "https://stackoverflow.com/questions/41731308/trouble-with-a-range-of-numbers-python", "title": "trouble with a range of numbers python", "body": "<p>I need help with a function which can't decide how to include a range of numbers.\nThis is my function and I don't know why doesn't work correctly with the numbers in a range. </p>\n\n<pre><code>def word_score(word):\n    \"\"\" (str) -&gt; int\nReturn the point value the word earns.\n\nWord length: &lt; 3: 0 points\n             3-6: 1 point per character for all characters in word\n             7-9: 2 points per character for all characters in word\n             10+: 3 points per character for all characters in word\n\n&gt;&gt;&gt; word_score('DRUDGERY')\n16\n\"\"\"\nif len(word) &lt; 3:\n    return 0\nelif len(word) == range(3, 6) :\n    return len(word)\nelif len(word) == range(7, 9):\n    return len(word)* 2\nelif len(word) &gt;= 10:\n    return len(word) * 3\n\n\n\nreturn word_score\n</code></pre>\n"}, {"tags": ["python", "pandas", "numpy"], "answers": [{"tags": [], "owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "is_accepted": true, "score": 4, "last_activity_date": 1484782603, "creation_date": 1484782603, "answer_id": 41731361, "question_id": 41731306, "link": "https://stackoverflow.com/questions/41731306/looping-through-multiple-values-in-a-column/41731361#41731361", "title": "looping through multiple values in a column", "body": "<p>Try this:</p>\n\n<pre><code>In [136]: df\nOut[136]:\n          col1                                  col2\n0  High street  qwe.723,qwe.2,qwe.17,qwe.1000,qwe.23\n1  Must street         qwe.34,qwe.17,qwe.1000,qwe.23\n\nIn [137]: df.set_index('col1').col2.str.split(',', expand=True).stack().reset_index(level=1, drop=1).to_frame('col2').reset_index().stack()\n     ...:\nOut[137]:\n0  col1    High street\n   col2        qwe.723\n1  col1    High street\n   col2          qwe.2\n2  col1    High street\n   col2         qwe.17\n3  col1    High street\n   col2       qwe.1000\n4  col1    High street\n   col2         qwe.23\n5  col1    Must street\n   col2         qwe.34\n6  col1    Must street\n   col2         qwe.17\n7  col1    Must street\n   col2       qwe.1000\n8  col1    Must street\n   col2         qwe.23\ndtype: object\n</code></pre>\n\n<p>I'm sure there must be a better way to do this...</p>\n"}, {"tags": [], "owner": {"reputation": 26457, "user_id": 624829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95e50fdfbe4cb4f3715d82a2e7e46cb8?s=128&d=identicon&r=PG", "display_name": "Boud", "link": "https://stackoverflow.com/users/624829/boud"}, "is_accepted": false, "score": 4, "last_activity_date": 1484782780, "creation_date": 1484782780, "answer_id": 41731378, "question_id": 41731306, "link": "https://stackoverflow.com/questions/41731306/looping-through-multiple-values-in-a-column/41731378#41731378", "title": "looping through multiple values in a column", "body": "<p>Another one:</p>\n\n<pre><code>(df.set_index('col1')\n   .col2.str.split(',', expand=True)\n   .stack()\n   .reset_index(level=-1, drop=True)\n   .to_csv('output.txt',sep='\\n')\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 863, "user_id": 2597415, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/194404f63e15ade6976ded4573640cb0?s=128&d=identicon&r=PG", "display_name": "user27976", "link": "https://stackoverflow.com/users/2597415/user27976"}, "edited": false, "score": 0, "creation_date": 1485295636, "post_id": 41732081, "comment_id": 70864893, "body": "Thanks so much guys for nice solutions!. Problem solved."}], "tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": false, "score": 3, "last_activity_date": 1484787646, "creation_date": 1484787646, "answer_id": 41732081, "question_id": 41731306, "link": "https://stackoverflow.com/questions/41731306/looping-through-multiple-values-in-a-column/41732081#41732081", "title": "looping through multiple values in a column", "body": "<p>Because I was playing around having fun with <code>cytoolz</code> and <code>numpy</code><br>\nSuper Fast!</p>\n\n<pre><code>import cytoolz\n\nc2 = np.core.defchararray.split(df.col2.values.astype('str'), ',')\ncol1 = df.col1.values.repeat([len(c) for c in c2.tolist()])\ncol2 = list(cytoolz.concat(c2))\nnp.stack([col1, col2]).ravel('F')\n\narray(['High street', 'qwe.723', 'High street', 'qwe.2', 'High street',\n       'qwe.17', 'High street', 'qwe.1000', 'High street', 'qwe.23',\n       'Must street', 'qwe.34', 'Must street', 'qwe.17', 'Must street',\n       'qwe.1000', 'Must street', 'qwe.23'], dtype=object)\n</code></pre>\n\n<hr>\n\n<p><strong><em>time testing</em></strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/JlRs8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JlRs8.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 863, "user_id": 2597415, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/194404f63e15ade6976ded4573640cb0?s=128&d=identicon&r=PG", "display_name": "user27976", "link": "https://stackoverflow.com/users/2597415/user27976"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 41731361, "answer_count": 3, "score": 3, "last_activity_date": 1484852300, "creation_date": 1484782236, "last_edit_date": 1484852300, "question_id": 41731306, "link": "https://stackoverflow.com/questions/41731306/looping-through-multiple-values-in-a-column", "title": "looping through multiple values in a column", "body": "<p>Can someone please advise me on how to loop through multiple values in a data frame column.</p>\n\n<p>Example:</p>\n\n<pre><code>col1    col2\nHigh street qwe.723,qwe.2,qwe.17,qwe.1000,qwe.23\nMust street qwe.34,qwe.17,qwe.1000,qwe.23\n</code></pre>\n\n<p>I want to have the following output:</p>\n\n<pre><code>High street\nqwe.723\nHigh street\nqwe.2\nHigh street\nqwe.17\nHigh street\nqwe.1000\nHigh street\nqwe.23\n\nMust street\nqwe.34\nMust street\nqwe.17\nMust street\nqwe.1000\nMust street\nqwe.23\n</code></pre>\n\n<p>My attempt:</p>\n\n<pre><code>lines = open('file.txt','r')\nfor line in lines:\n    line=line.strip().split('\\t')\n    vals=line[1].split(',')\n    for val in vals:\n        print(line[0],'\\n',val)\n</code></pre>\n"}, {"tags": ["python", "plot", "plotly"], "owner": {"reputation": 3305, "user_id": 2382344, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/5e2b48f403101d0f592d6aa99d9d61da?s=128&d=identicon&r=PG", "display_name": "Afloz", "link": "https://stackoverflow.com/users/2382344/afloz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1484781940, "creation_date": 1484781940, "question_id": 41731267, "link": "https://stackoverflow.com/questions/41731267/why-does-plotly-cufflinks-display-404-error-on-sharing-secret", "title": "Why does Plotly Cufflinks display &quot;404 Error&quot; on sharing=&quot;Secret&quot;?", "body": "<p>I'm using Python3 and configured Cufflinks to use <code>cf.set_config_file(sharing=\"secret\", offline=False)</code>.</p>\n\n<p>However, when the iframe is embedded in an HTML document, I receive the error:</p>\n\n<blockquote>\n  <p>404 Plot twist! There's nothing here...</p>\n</blockquote>\n\n<p>But the same plot directly implemented with Python without Cufflinks displays fine in HTML. The plot only displays if I'm logged in to Plotly in the same browser I'm using to view the HTML. I'm thinking this is the behavior for <code>sharing=\"private\"</code></p>\n\n<p>Is my <code>cf.set_config_file()</code> code incomplete?</p>\n\n<p><img src=\"https://cloud.githubusercontent.com/assets/5315694/22087246/bbd8bc2a-dd91-11e6-9966-7c8a07d349db.png\" alt=\"image\"></p>\n"}, {"tags": ["python", "csv"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1484781709, "post_id": 41731214, "comment_id": 70656738, "body": "Why are you splitting on <code>\\r\\n</code>? iterating over a file iterates over the <i>lines</i>. You just want <code>line.split()</code> which splits on <i>whitespace</i>. Indeed, the following will probably work: <code>[list(map(float, line.split())) for line in f]</code>"}, {"owner": {"reputation": 6424, "user_id": 3579910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoMjv.jpg?s=128&g=1", "display_name": "TemporalWolf", "link": "https://stackoverflow.com/users/3579910/temporalwolf"}, "edited": false, "score": 0, "creation_date": 1484782324, "post_id": 41731214, "comment_id": 70656929, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/8113782/split-string-on-whitespace-in-python\">Split string on whitespace in Python</a>"}], "answers": [{"comments": [{"owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "reply_to_user": {"reputation": 123, "user_id": 7438144, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6a4cff8e9f9c06d4754dd3cc01457e4b?s=128&d=identicon&r=PG&f=1", "display_name": "rob", "link": "https://stackoverflow.com/users/7438144/rob"}, "edited": false, "score": 0, "creation_date": 1484782542, "post_id": 41731242, "comment_id": 70657000, "body": "You&#39;re welcome. I added some code to &quot;automatically&quot; parse the data into the correct types. Welcome to Stack Overflow, and remember to up-vote all helpful answers and &quot;accept&quot; the one that best solves your problem."}, {"owner": {"reputation": 123, "user_id": 7438144, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6a4cff8e9f9c06d4754dd3cc01457e4b?s=128&d=identicon&r=PG&f=1", "display_name": "rob", "link": "https://stackoverflow.com/users/7438144/rob"}, "edited": false, "score": 0, "creation_date": 1484782579, "post_id": 41731242, "comment_id": 70657009, "body": "you mean to convert every columns separately? can you give an example. I am also accepting your answer because your answer works fine and also josh one , but it seems I can accept one only"}, {"owner": {"reputation": 123, "user_id": 7438144, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6a4cff8e9f9c06d4754dd3cc01457e4b?s=128&d=identicon&r=PG&f=1", "display_name": "rob", "link": "https://stackoverflow.com/users/7438144/rob"}, "edited": false, "score": 0, "creation_date": 1484782681, "post_id": 41731242, "comment_id": 70657040, "body": "thanx a lot for the example and help. ."}], "tags": [], "owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "is_accepted": true, "score": 1, "last_activity_date": 1484782225, "last_edit_date": 1484782225, "creation_date": 1484781810, "answer_id": 41731242, "question_id": 41731214, "link": "https://stackoverflow.com/questions/41731214/how-to-deal-with-valueerror-invalid-literal-for-float-in-python/41731242#41731242", "title": "How to deal with ValueError: invalid literal for float() in python", "body": "<p>If you iterate over a file with a <code>for</code> loop, you will get one line each iteration. Then you can call <code>split()</code> on that line to split it by whitespace into a list.</p>\n\n<pre><code>with open('filename.txt', 'r') as f:\n    for line in f:\n        data = line.split()\n        print data\n\n        z = float(data[3])\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>['512220', '0', '20', '34.4', '2.4', '0', '10010', '913', '52', '0.00']\n['512221', '1', '30', '34.6', '2.3', '0', '10230', '910.3', '54', '0.00']\n['512222', '2', '50', '34.8', '2.1', '0', '10020', '932', '56', '0.00']\n['512223', '3', '60', '35.4', '2.5', '0', '10340', '945.5', '58', '0.00']\n</code></pre>\n\n<p>A lot of your elements look like integers so I wouldn't suggest converting <em>every</em> field to <code>float</code>.  Instead, I would pick out the individual columns and convert them.</p>\n\n<p>I don't know the name of your fields, so I made some up. Here's some code that will load this file into a list of dictionaries where the fields have been converted to the appropriate type:</p>\n\n<pre><code>from pprint import pprint\n\nfields = [ \n    ('id', int),\n    ('n', int),\n    ('s', int),\n    ('a', float),\n    ('b', float),\n    ('z', int),\n    ('n2', int),\n    ('top', float),\n    ('x', int),\n    ('bottom', float),\n]\n\ndef read_data(path):\n    with open(path, 'r') as f:\n        for line in f:\n            data = line.split()\n\n            res = {}\n            for n, field in enumerate(fields):\n                name, _type = field\n                res[name] = _type(data[n])\n            yield res \n\npprint(list(read_data('data.txt')))\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>[{'a': 34.4,\n  'b': 2.4,\n  'bottom': 0.0,\n  'id': 512220,\n  'n': 0,\n  'n2': 10010,\n  's': 20,\n  'top': 913.0,\n  'x': 52,\n  'z': 0},\n {'a': 34.6,\n  'b': 2.3,\n  'bottom': 0.0,\n  'id': 512221,\n  'n': 1,\n  'n2': 10230,\n  's': 30,\n  'top': 910.3,\n  'x': 54,\n  'z': 0},\n {'a': 34.8,\n  'b': 2.1,\n  'bottom': 0.0,\n  'id': 512222,\n  'n': 2,\n  'n2': 10020,\n  's': 50,\n  'top': 932.0,\n  'x': 56,\n  'z': 0},\n {'a': 35.4,\n  'b': 2.5,\n  'bottom': 0.0,\n  'id': 512223,\n  'n': 3,\n  'n2': 10340,\n  's': 60,\n  'top': 945.5,\n  'x': 58,\n  'z': 0}]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 123, "user_id": 7438144, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6a4cff8e9f9c06d4754dd3cc01457e4b?s=128&d=identicon&r=PG&f=1", "display_name": "rob", "link": "https://stackoverflow.com/users/7438144/rob"}, "edited": false, "score": 0, "creation_date": 1484782246, "post_id": 41731255, "comment_id": 70656902, "body": "thanx a lot for the reply. your solution also works perfectly fine."}], "tags": [], "owner": {"reputation": 448, "user_id": 2658278, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d77307a16c094c28024557f7a840a1f7?s=128&d=identicon&r=PG", "display_name": "Josh English", "link": "https://stackoverflow.com/users/2658278/josh-english"}, "is_accepted": false, "score": 0, "last_activity_date": 1484781855, "creation_date": 1484781855, "answer_id": 41731255, "question_id": 41731214, "link": "https://stackoverflow.com/questions/41731214/how-to-deal-with-valueerror-invalid-literal-for-float-in-python/41731255#41731255", "title": "How to deal with ValueError: invalid literal for float() in python", "body": "<p><code>''</code> is not a valid value for float. </p>\n\n<p>Try <code>data_temporary = line.split()</code> and see if that works.</p>\n\n<p>Or, using a list comprehension:</p>\n\n<p><code>values = [float(item) for item in line.split() if item]</code></p>\n"}], "owner": {"reputation": 123, "user_id": 7438144, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6a4cff8e9f9c06d4754dd3cc01457e4b?s=128&d=identicon&r=PG&f=1", "display_name": "rob", "link": "https://stackoverflow.com/users/7438144/rob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7564, "favorite_count": 0, "accepted_answer_id": 41731242, "answer_count": 2, "score": 0, "last_activity_date": 1484782793, "creation_date": 1484781615, "last_edit_date": 1484782793, "question_id": 41731214, "link": "https://stackoverflow.com/questions/41731214/how-to-deal-with-valueerror-invalid-literal-for-float-in-python", "title": "How to deal with ValueError: invalid literal for float() in python", "body": "<p>My problem is different because it does not deal with regular expressions. so I think its a slightly different. I got this error. </p>\n\n<pre><code>ValueError: invalid literal for float(): 512220      0      20      34.4     \n 2.4      0     10010      913        52      0.00\n</code></pre>\n\n<p>my csv file looks like </p>\n\n<pre><code>512220     0      20       34.4      2.4      0     10010      913        52      0.00\n512221     1      30       34.6      2.3      0     10230      910.3      54      0.00\n512222     2      50       34.8      2.1      0     10020      932        56      0.00\n512223     3      60       35.4      2.5      0     10340      945.5      58      0.00\n</code></pre>\n\n<p>my code is </p>\n\n<pre><code>with open(item[1]) as f:\n    lines = f.readlines()\n    print 'lines', lines\nfor k, line in enumerate(lines):\n    data_temporary = line.strip().split(\"\\r\\n\")\n</code></pre>\n\n<p>when i print \"lines\"  i got follwing </p>\n\n<pre><code>['512220     0      20       34.4      2.4      0     10010      913        52   \n 0.00\\n', '512221     1      30       34.6      2.3      0     10230      910.3   \n 54      0.00\\n', '512222     2      50       34.8      2.1      0     10020     \n 932        56      0.00\\n', '512223     3      60       35.4      2.5  \n 0     10340      945.5      58      0.00'\\n]\n</code></pre>\n\n<p>when I print data_temporary i got the following one line only. </p>\n\n<pre><code>['160129    29  0000     0      0.04       5.3      2.04  \n  0.00     11758      9.13        52      0.00']\n</code></pre>\n\n<p>I tried these commands and results are as follows. .\ndata_temporary = line.strip().split(\" \")</p>\n\n<pre><code>['512220', '', '', '', '', '', '', '0', '', '', '', '', '', '20', '', '', '', \n '', '', '', '34.4', '', '', '', '', '', '2.4', '', '', '', '', '', '0', '', '',\n '', '10010', '', '', '', '', '', '913', '', '','', '', '', '52', '', '',\n '', '', '', '0.00']\n</code></pre>\n\n<p>I tried to apply different solutions found on SO but couldn't work. like I try to use</p>\n\n<pre><code>  lines = map(lambda l: l.strip().split('\\t'), lines) and some others.\n</code></pre>\n\n<p>I think I had to break list into string and then perform operation on it. \ncould someone help me to solve this problem so that I understand better. thanks</p>\n"}, {"tags": ["python", "ubuntu", "tensorflow"], "comments": [{"owner": {"reputation": 19411, "user_id": 6640099, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/tf1sO.jpg?s=128&g=1", "display_name": "Christian Dean", "link": "https://stackoverflow.com/users/6640099/christian-dean"}, "edited": false, "score": 0, "creation_date": 1484781547, "post_id": 41731171, "comment_id": 70656674, "body": "Which directory are you executing your program in?"}, {"owner": {"reputation": 1, "user_id": 7437971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e9fef78f20fd39281451deec08f6058?s=128&d=identicon&r=PG&f=1", "display_name": "Gilmore48", "link": "https://stackoverflow.com/users/7437971/gilmore48"}, "reply_to_user": {"reputation": 19411, "user_id": 6640099, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/tf1sO.jpg?s=128&g=1", "display_name": "Christian Dean", "link": "https://stackoverflow.com/users/6640099/christian-dean"}, "edited": false, "score": 0, "creation_date": 1484781734, "post_id": 41731171, "comment_id": 70656747, "body": "I have my Python code and pertinent data files located on my Windows 10 desktop."}, {"owner": {"reputation": 19411, "user_id": 6640099, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/tf1sO.jpg?s=128&g=1", "display_name": "Christian Dean", "link": "https://stackoverflow.com/users/6640099/christian-dean"}, "edited": false, "score": 0, "creation_date": 1484781871, "post_id": 41731171, "comment_id": 70656790, "body": "No. I meant which directory you typed in the <code>python</code> command in your command prompt."}, {"owner": {"reputation": 1, "user_id": 7437971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e9fef78f20fd39281451deec08f6058?s=128&d=identicon&r=PG&f=1", "display_name": "Gilmore48", "link": "https://stackoverflow.com/users/7437971/gilmore48"}, "reply_to_user": {"reputation": 19411, "user_id": 6640099, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/tf1sO.jpg?s=128&g=1", "display_name": "Christian Dean", "link": "https://stackoverflow.com/users/6640099/christian-dean"}, "edited": false, "score": 0, "creation_date": 1484782108, "post_id": 41731171, "comment_id": 70656860, "body": "I am executing it in my Desktop directory."}, {"owner": {"reputation": 19411, "user_id": 6640099, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/tf1sO.jpg?s=128&g=1", "display_name": "Christian Dean", "link": "https://stackoverflow.com/users/6640099/christian-dean"}, "edited": false, "score": 0, "creation_date": 1484782686, "post_id": 41731171, "comment_id": 70657043, "body": "Then see the answer down below. I belive he is right."}], "answers": [{"tags": [], "owner": {"reputation": 40934, "user_id": 121687, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/359b919642638c5b67555a1bc89dfd3e?s=128&d=identicon&r=PG", "display_name": "fabrizioM", "link": "https://stackoverflow.com/users/121687/fabriziom"}, "is_accepted": false, "score": 0, "last_activity_date": 1484781707, "creation_date": 1484781707, "answer_id": 41731229, "question_id": 41731171, "link": "https://stackoverflow.com/questions/41731171/cannot-import-tensorflow-correctly-when-running-a-python-code/41731229#41731229", "title": "Cannot import Tensorflow correctly when running a python code", "body": "<p>Your Numpy is older than expected. You can try to update numpy.</p>\n\n<p>I suggest to use the anaconda distribution and install the official tensorflow package and should work seamlessly. </p>\n"}], "owner": {"reputation": 1, "user_id": 7437971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e9fef78f20fd39281451deec08f6058?s=128&d=identicon&r=PG&f=1", "display_name": "Gilmore48", "link": "https://stackoverflow.com/users/7437971/gilmore48"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1484781707, "creation_date": 1484781388, "question_id": 41731171, "link": "https://stackoverflow.com/questions/41731171/cannot-import-tensorflow-correctly-when-running-a-python-code", "title": "Cannot import Tensorflow correctly when running a python code", "body": "<p>Help!!! I have been working on this for several days and am at wit's end!  I have been trying to run a python code that keeps giving me this error no matter what I do....</p>\n\n<p><a href=\"https://i.stack.imgur.com/rmVus.jpg\" rel=\"nofollow noreferrer\">Tensorflow problem</a></p>\n"}, {"tags": ["python", "matplotlib", "graph"], "comments": [{"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1484782807, "post_id": 41731102, "comment_id": 70657074, "body": "<code>matplot</code> has <code>FuncAnimation</code> ie. <a href=\"http://matplotlib.org/examples/animation/simple_anim.html\" rel=\"nofollow noreferrer\">matplotlib.org/examples/animation/simple_anim.html</a>"}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 6218998, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oiN_Tyg4WJY/AAAAAAAAAAI/AAAAAAAAAE8/wYgtpaXZVI0/photo.jpg?sz=128", "display_name": "Andreas Weise", "link": "https://stackoverflow.com/users/6218998/andreas-weise"}, "edited": false, "score": 0, "creation_date": 1484787212, "post_id": 41731455, "comment_id": 70658287, "body": "Thank you for your fast reply. I will have a deeper look tomorrow. I want to teach our young students how a spectrum analyzer works. If you play the xy-data continously, it looks better than a static picture. the next days I will programm a switchbox, where I can adjust a few things. For example if you set down the RBW by 10 dB the spektrum (x-y) also goes down by 10 dB."}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "reply_to_user": {"reputation": 43, "user_id": 6218998, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oiN_Tyg4WJY/AAAAAAAAAAI/AAAAAAAAAE8/wYgtpaXZVI0/photo.jpg?sz=128", "display_name": "Andreas Weise", "link": "https://stackoverflow.com/users/6218998/andreas-weise"}, "edited": false, "score": 0, "creation_date": 1484815202, "post_id": 41731455, "comment_id": 70667763, "body": "I&#39;m sorry, as I was thinking about why someone would animate measurement data, I came up with this slider solution. But knowing that this is rather for simulation of a measurement device, it makes sense to use an automatic animation. I added a piece of code to my answer which does that."}], "tags": [], "owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "is_accepted": false, "score": 3, "last_activity_date": 1484815241, "last_edit_date": 1495541789, "creation_date": 1484783231, "answer_id": 41731455, "question_id": 41731102, "link": "https://stackoverflow.com/questions/41731102/matplotlib-display-only-one-graph-of-a-set-of-10-like-a-slideshow/41731455#41731455", "title": "matplotlib display only one graph of a set of 10 like a slideshow", "body": "<p>Showing the data one after the other seems a bit unergonomic to me. Also using an animation might not be the best solution. What if after inspection of the second dataset you want to go back to the first?</p>\n\n<p>I would therefore implement a solution which allows to go back and forth between the spectra.</p>\n\n<p>The following sandbox example is based on <a href=\"https://stackoverflow.com/questions/41143782/paging-scrolling-through-set-of-2d-heat-maps-in-matplotlib/41152160#41152160\">a solution I have provided to a similar problem with images</a>. It uses a discrete Slider to walk through the pages. Although it may seem a bit complicated on first sight, you do not really have to understand the <code>PageSlider</code> class in order to use it. Just look at the code down in the <code>__main__</code> part.</p>\n\n<pre><code>import matplotlib.widgets\nimport matplotlib.patches\nimport mpl_toolkits.axes_grid1\n\nclass PageSlider(matplotlib.widgets.Slider):\n\n    def __init__(self, ax, label, numpages = 10, valinit=0, valfmt='%1d', \n                 closedmin=True, closedmax=True,  \n                 dragging=True, **kwargs):\n\n        self.facecolor=kwargs.get('facecolor',\"w\")\n        self.activecolor = kwargs.pop('activecolor',\"b\")\n        self.fontsize = kwargs.pop('fontsize', 10)\n        self.numpages = numpages\n\n        super(PageSlider, self).__init__(ax, label, 0, numpages, \n                            valinit=valinit, valfmt=valfmt, **kwargs)\n\n        self.poly.set_visible(False)\n        self.vline.set_visible(False)\n        self.pageRects = []\n        for i in range(numpages):\n            facecolor = self.activecolor if i==valinit else self.facecolor\n            r  = matplotlib.patches.Rectangle((float(i)/numpages, 0), 1./numpages, 1, \n                                transform=ax.transAxes, facecolor=facecolor)\n            ax.add_artist(r)\n            self.pageRects.append(r)\n            ax.text(float(i)/numpages+0.5/numpages, 0.5, str(i+1),  \n                    ha=\"center\", va=\"center\", transform=ax.transAxes,\n                    fontsize=self.fontsize)\n        self.valtext.set_visible(False)\n\n        divider = mpl_toolkits.axes_grid1.make_axes_locatable(ax)\n        bax = divider.append_axes(\"right\", size=\"5%\", pad=0.05)\n        fax = divider.append_axes(\"right\", size=\"5%\", pad=0.05)\n        self.button_back = matplotlib.widgets.Button(bax, label=ur'$\\u25C0$', \n                        color=self.facecolor, hovercolor=self.activecolor)\n        self.button_forward = matplotlib.widgets.Button(fax, label=ur'$\\u25B6$', \n                        color=self.facecolor, hovercolor=self.activecolor)\n        self.button_back.label.set_fontsize(self.fontsize)\n        self.button_forward.label.set_fontsize(self.fontsize)\n        self.button_back.on_clicked(self.backward)\n        self.button_forward.on_clicked(self.forward)\n\n    def _update(self, event):\n        super(PageSlider, self)._update(event)\n        i = int(self.val)\n        if i &gt;=self.valmax:\n            return\n        self._colorize(i)\n\n    def _colorize(self, i):\n        for j in range(self.numpages):\n            self.pageRects[j].set_facecolor(self.facecolor)\n        self.pageRects[i].set_facecolor(self.activecolor)\n\n    def forward(self, event):\n        current_i = int(self.val)\n        i = current_i+1\n        if (i &lt; self.valmin) or (i &gt;= self.valmax):\n            return\n        self.set_val(i)\n        self._colorize(i)\n\n    def backward(self, event):\n        current_i = int(self.val)\n        i = current_i-1\n        if (i &lt; self.valmin) or (i &gt;= self.valmax):\n            return\n        self.set_val(i)\n        self._colorize(i)\n\n\nif __name__ == \"__main__\":\n    import numpy as np\n    from matplotlib import pyplot as plt\n\n\n    num_pages = 10\n    data = np.random.rand(700, num_pages)\n    spec = np.linspace(-10,10, 700)\n\n    fig, ax = plt.subplots()\n    fig.subplots_adjust(bottom=0.18)\n    ax.set_ylim([0.,1.6])\n    line, = ax.plot(spec,data[:,0], color=\"b\")\n\n    ax_slider = fig.add_axes([0.1, 0.05, 0.8, 0.04])\n    slider = PageSlider(ax_slider, 'Page', num_pages, activecolor=\"orange\")\n\n    def update(val):\n        i = int(slider.val)\n        line.set_ydata(data[:,i])\n\n    slider.on_changed(update)\n\n    plt.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/J1Fbv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/J1Fbv.png\" alt=\"enter image description here\"></a></p>\n\n<p>The code above is working and shows how this would look like. In your specific case, you would need to change it a bit. \nI tried to adapt your code accordingly, but of course I cannot guarantee that it works. This code has to be put below the <code>__main__</code> part, the PageSlider must stay unchanged.</p>\n\n<pre><code>import numpy as np\nfrom matplotlib import pyplot as plt\n\n\ndateien = ['./2450ATT0.csv','./2450ATT0-1.csv','./2450ATT0-2.csv']\ndata_x = []\ndata_y = []\nfor datei in dateien: #do not call a variable \"file\" in python as this is protected\n    x = np.genfromtxt(datei, usecols =(0), delimiter=';', unpack=True)\n    x = x/1000000.\n    y = np.genfromtxt(datei, usecols =(1), delimiter=';', unpack=True, dtype=float)\n    data_x.append(x)\n    data_y.append(y)\n\n\nfig, ax = plt.subplots()\nfig.subplots_adjust(bottom=0.18)\nax.set_xlim([2435,2465])\nax.set_xlim([-120,20])\nax.set_xlabel('Frequenz')\nax.set_ylabel('Leistung')\n\ntext = ax.text(0.98,0.98, dateien[0], ha=\"right\", va=\"top\")\nline, = ax.plot(data_x[0],data_y[0], color=\"b\")\n\nax_slider = fig.add_axes([0.1, 0.05, 0.8, 0.04])\nslider = PageSlider(ax_slider, 'Page', len(dateien), activecolor=\"orange\")\n\ndef update(val):\n    i = int(slider.val)\n    line.set_data(data_x[i],data_y[i])\n    text.set_text(dateien[i])\n\nslider.on_changed(update)\n\nplt.show()\n</code></pre>\n\n<p><hr> </p>\n\n<h3>Edit:</h3>\n\n<p>For a simple animation, you would rather use <a href=\"http://matplotlib.org/api/animation_api.html\" rel=\"nofollow noreferrer\"><code>matplotlib.animation.FuncAnimation</code></a> and the code would look something along those lines</p>\n\n<pre><code>import numpy as np\nfrom matplotlib import pyplot as plt\n\ndateien = ['./2450ATT0.csv','./2450ATT0-1.csv','./2450ATT0-2.csv']\ndata_x = []\ndata_y = []\nfor datei in dateien: # do not call a variable \"file\" in python, this is a protected word\n    x = np.genfromtxt(datei, usecols =(0), delimiter=';', unpack=True)\n    x = x/1000000.\n    y = np.genfromtxt(datei, usecols =(1), delimiter=';', unpack=True, dtype=float)\n    data_x.append(x)\n    data_y.append(y)\n\n\nfig, ax = plt.subplots()\nfig.subplots_adjust(bottom=0.18)\nax.set_xlim([2435,2465])\nax.set_xlim([-120,20])\nax.set_xlabel('Frequenz')\nax.set_ylabel('Leistung')\n\nline, = ax.plot(data_x[0],data_y[0], color=\"b\")\n\ndef update(i):\n    line.set_data(data_x[i],data_y[i])\n\nani = matplotlib.animation.FuncAnimation(fig, update, \n            frames= len(dateien), interval = 200, blit = False, repeat= True)\n\nplt.show()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5017, "user_id": 5722359, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/08669b0a001a73041f9c0afc3f19408e?s=128&d=identicon&r=PG&f=1", "display_name": "Sun Bear", "link": "https://stackoverflow.com/users/5722359/sun-bear"}, "is_accepted": false, "score": 0, "last_activity_date": 1484806496, "last_edit_date": 1484806496, "creation_date": 1484806190, "answer_id": 41734920, "question_id": 41731102, "link": "https://stackoverflow.com/questions/41731102/matplotlib-display-only-one-graph-of-a-set-of-10-like-a-slideshow/41734920#41734920", "title": "matplotlib display only one graph of a set of 10 like a slideshow", "body": "<p>I like to suggest using multiple subplots in a 2D matrix layout and animating them. Examples (w/o animation) can be seen from  <a href=\"http://matplotlib.org/examples/pylab_examples/subplots_demo.html\" rel=\"nofollow noreferrer\">http://matplotlib.org/examples/pylab_examples/subplots_demo.html</a> and  <a href=\"https://www.dataquest.io/blog/images/python_r/python_pairs.png\" rel=\"nofollow noreferrer\">https://www.dataquest.io/blog/images/python_r/python_pairs.png</a>.</p>\n\n<p>In this way your students get to see changes in all the data simultaneously. The implementation details for the subplots are given in the 1st example. Furas has directed you to the plot animation example. </p>\n"}], "owner": {"reputation": 43, "user_id": 6218998, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oiN_Tyg4WJY/AAAAAAAAAAI/AAAAAAAAAE8/wYgtpaXZVI0/photo.jpg?sz=128", "display_name": "Andreas Weise", "link": "https://stackoverflow.com/users/6218998/andreas-weise"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 900, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1484815241, "creation_date": 1484781044, "question_id": 41731102, "link": "https://stackoverflow.com/questions/41731102/matplotlib-display-only-one-graph-of-a-set-of-10-like-a-slideshow", "title": "matplotlib display only one graph of a set of 10 like a slideshow", "body": "<p>I have a set of 10 graphs. (based on X/Y-pairs) (In this example only 3)<a href=\"https://i.stack.imgur.com/Kmjh6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Kmjh6.png\" alt=\"all 10 graphs together\"></a>\nDisplaying one graph is easy, same to all graphs in the same window.(See picture)</p>\n\n<p>But I haven't found a solution for what I want :\nThe 10 graphs are Data from a spectrum analyzer and are showing a signal.</p>\n\n<p>I want to display the first graph, delete or remove it and display the 2nd graph in the same window.</p>\n\n<p>Then next, the second graph will be removed and the 3rd shall be seen (and so on)</p>\n\n<p>Thats my Code :</p>\n\n<pre><code>from matplotlib import pyplot as plt\nimport numpy as np\n\ndatei = ['./2450ATT0.csv','./2450ATT0-1.csv','./2450ATT0-2.csv']\n\nfor file in datei:\n    x = np.genfromtxt(file, usecols =(0), delimiter=';', unpack=True)\n    y = np.genfromtxt(file, usecols =(1), delimiter=';', unpack=True, dtype=float)\n\n    plt.xlim(2435,2465)\n    plt.ylim(-120,-20)\n    plt.xlabel('Frequenz')\n    plt.ylabel('Leistung')\n    plt.plot(x/1000000,y, label=file)  \nplt.show()\n</code></pre>\n\n<p>Do you have any idea ?\nI also have had a look at plt.animate. but I haven't found a solution with that suggestions.</p>\n\n<p>Thank you.\nAndi</p>\n"}, {"tags": ["python", "sqlite", "sqlalchemy"], "answers": [{"comments": [{"owner": {"reputation": 81, "user_id": 5399159, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6deed71d8e5ef1457147f78ed154f4?s=128&d=identicon&r=PG", "display_name": "the2nd", "link": "https://stackoverflow.com/users/5399159/the2nd"}, "edited": false, "score": 0, "creation_date": 1484959746, "post_id": 41743155, "comment_id": 70740556, "body": "your example works but i learned about intersect today and found another solution i&#39;ve posted below. Dont know whats the fastest solution. But the intersect version is more readable IMHO. thanks anyway."}], "tags": [], "owner": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "is_accepted": false, "score": 1, "last_activity_date": 1484838252, "last_edit_date": 1484838252, "creation_date": 1484833076, "answer_id": 41743155, "question_id": 41731096, "link": "https://stackoverflow.com/questions/41731096/sqlalchemy-query-one-to-many-relationship-with-sqlite/41743155#41743155", "title": "sqlalchemy query one-to-many relationship with sqlite", "body": "<p>I think this could be an opportunity to use <a href=\"https://en.wikipedia.org/wiki/Relational_algebra#Division_.28.C3.B7.29\" rel=\"nofollow noreferrer\">division</a> \u2013 in a way. <em>IndexObjectACL</em> divided by <em>SearchAcls</em> should yield <em>IndexObject</em>s that have all the <em>SearchAcls</em>. In other words query for <em>IndexObject</em>s for which no such <em>SearchAcls</em> exist that are not in its <em>IndexObjectACL</em>s:</p>\n\n<pre><code>from sqlalchemy import union, select, literal\n\n# Create an aliased UNION of all the search_acls to query against\nsearch_acls_union = union(*(select([literal(acl).label('acl')])\n                            for acl in search_acls)).alias()\n\n# Query for those IndexObjects where...\n# No SearchAcl exists where...\n# No IndexObjectACL exists where value == acl AND oid == id\nq = session.query(IndexObject).\\\n    filter(~session.query().select_from(search_acls_union).\n           filter(~IndexObject.acls.any(value=search_acls_union.c.acl)).\n           exists())\n</code></pre>\n\n<p>The result of this query is</p>\n\n<pre><code>[&lt;IndexObject (name='object1')&gt;, &lt;IndexObject (name='object3')&gt;]\n</code></pre>\n\n<p>and if you add</p>\n\n<pre><code>    \"object4\" : [\n                \"enable\",\n                ],\n    \"object5\" : [\n                \"delete\",\n                ],\n</code></pre>\n\n<p>to your <code>acl_list</code> (and the object names to <code>object_list</code>) for proving that partial matches are not returned, it still returns only objects 1 and 3.</p>\n\n<p>Your original \"have any\" query could also be rewritten to use a <a href=\"https://en.wikipedia.org/wiki/Relational_algebra#Semijoin_.28.E2.8B.89.29.28.E2.8B.8A.29\" rel=\"nofollow noreferrer\">semijoin</a>, or <code>EXISTS</code> in SQL speak:</p>\n\n<pre><code>q = session.query(IndexObject).\\\n    filter(IndexObject.acls.any(\n        IndexObjectACL.value.in_(search_acls)))\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 12289, "user_id": 675568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1cfe53579fb7b2afd58949be94cf97e?s=128&d=identicon&r=PG", "display_name": "Tom Zych", "link": "https://stackoverflow.com/users/675568/tom-zych"}, "edited": false, "score": 0, "creation_date": 1485000600, "post_id": 41774567, "comment_id": 70748775, "body": "This may be useful, but it would be much more useful with some commentary and explanation."}, {"owner": {"reputation": 81, "user_id": 5399159, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6deed71d8e5ef1457147f78ed154f4?s=128&d=identicon&r=PG", "display_name": "the2nd", "link": "https://stackoverflow.com/users/5399159/the2nd"}, "reply_to_user": {"reputation": 12289, "user_id": 675568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1cfe53579fb7b2afd58949be94cf97e?s=128&d=identicon&r=PG", "display_name": "Tom Zych", "link": "https://stackoverflow.com/users/675568/tom-zych"}, "edited": false, "score": 1, "creation_date": 1485009583, "post_id": 41774567, "comment_id": 70751453, "body": "I added an explanation. Feel free to correct me if anything is wrong."}], "tags": [], "owner": {"reputation": 81, "user_id": 5399159, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6deed71d8e5ef1457147f78ed154f4?s=128&d=identicon&r=PG", "display_name": "the2nd", "link": "https://stackoverflow.com/users/5399159/the2nd"}, "is_accepted": false, "score": 0, "last_activity_date": 1485009531, "last_edit_date": 1485009531, "creation_date": 1484959335, "answer_id": 41774567, "question_id": 41731096, "link": "https://stackoverflow.com/questions/41731096/sqlalchemy-query-one-to-many-relationship-with-sqlite/41774567#41774567", "title": "sqlalchemy query one-to-many relationship with sqlite", "body": "<pre><code>queries = []\nacl_q = q.join(IndexObject.acls)\nfor acl in search_acls:\n    x = acl_q.filter(IndexObjectACL.value == acl)\n    queries.append(x)\nq = q.intersect(*queries)\n</code></pre>\n\n<p>I can try to explain it but i am new to sqlalchemy and SQL in general. So i might explain it the wrong way... The <a href=\"http://docs.sqlalchemy.org/en/latest/orm/query.html#sqlalchemy.orm.query.Query.join\" rel=\"nofollow noreferrer\">join()</a> joins IndexObject and IndexObjectACL tables based on their relationship which results in a new query. This query is used to create a new query for each ACL we want to match using <a href=\"http://docs.sqlalchemy.org/en/latest/orm/query.html#sqlalchemy.orm.query.Query.filter\" rel=\"nofollow noreferrer\">filter()</a>. Finally we use <a href=\"http://docs.sqlalchemy.org/en/latest/orm/query.html?highlight=intersect#sqlalchemy.orm.query.Query.intersect\" rel=\"nofollow noreferrer\">intersect()</a> (<a href=\"https://en.wikipedia.org/wiki/Set_operations_(SQL)#INTERSECT_operator\" rel=\"nofollow noreferrer\">SQL INTERSECT</a>) to get all IndexObject that appear in all queries. After some testing it seems like this is a fast way to search objects that have all given ACLs assigned. Its also very pythonic IMHO.</p>\n"}], "owner": {"reputation": 81, "user_id": 5399159, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6deed71d8e5ef1457147f78ed154f4?s=128&d=identicon&r=PG", "display_name": "the2nd", "link": "https://stackoverflow.com/users/5399159/the2nd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 592, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1485009531, "creation_date": 1484781020, "question_id": 41731096, "link": "https://stackoverflow.com/questions/41731096/sqlalchemy-query-one-to-many-relationship-with-sqlite", "title": "sqlalchemy query one-to-many relationship with sqlite", "body": "<p>i've written the following example code to build a search index for the ACL system i am writing. The query in this example resturns all objects that have any of the given ACLs assigned. But i need a query/filter that returns objects that have all ACLs assigned.</p>\n\n<p>Any help is appreciated.</p>\n\n<pre><code>#!/usr/bin/env python\n# -*- coding: utf-8 -*-\nfrom sqlalchemy.ext.declarative import declarative_base\nfrom sqlalchemy.orm import relationship\nfrom sqlalchemy.orm import sessionmaker\nfrom sqlalchemy.orm import backref\nfrom sqlalchemy import create_engine\nfrom sqlalchemy import ForeignKey\nfrom sqlalchemy import Integer\nfrom sqlalchemy import String\nfrom sqlalchemy import Column\n\n_db_uri = \"sqlite:////tmp/test.sql\"\nBase = declarative_base()\nengine = create_engine(_db_uri, echo=False)\nSession = sessionmaker(bind=engine)\n\nclass IndexObject(Base):\n    \"\"\" Index object. \"\"\"\n    __tablename__ = 'objects'\n    id = Column(Integer, primary_key=True)\n    name = Column(String(128), unique=True, nullable=True)\n    acls = relationship('IndexObjectACL',\n                                cascade = \"all,delete\",\n                                backref='objects',\n                                lazy='dynamic')\n\n    def __repr__(self):\n        _repr_ =(\"&lt;IndexObject (name='%s')&gt;\" % (self.name))\n        return _repr_\n\n\nclass IndexObjectACL(Base):\n    \"\"\" Index object ACL. \"\"\"\n    __tablename__ = 'acls'\n    id = Column(Integer, primary_key=True)\n    value = Column(String(128), nullable=False)\n    oid = Column(Integer, ForeignKey('objects.id'))\n\n    def __repr__(self):\n        __repr__ = (\"&lt;IndexObjectACL (value='%s')&gt;\" % (self.value))\n        return __repr__\n\n\nobject_list = [\n        \"object1\",\n        \"object2\",\n        \"object3\",\n    ]\n\nacl_list = {\n        \"object1\" : [\n                    \"view\",\n                    \"edit\",\n                    \"enable\",\n                    \"delete\",\n                    ],\n        \"object2\" : [\n                    \"view\",\n                    \"edit\",\n                    ],\n        \"object3\" : [\n                    \"enable\",\n                    \"delete\",\n                    ],\n    }\n\n\nBase.metadata.create_all(engine)\n\nsession = Session()\n\nfor o in object_list:\n    acls = []\n    for acl in acl_list[o]:\n        a = IndexObjectACL(value=acl)\n        acls.append(a)\n\n    index_object = IndexObject(name=o, acls=acls)\n    session.add(index_object)\n\nsession.commit()\n\n\nsearch_acls = [ \"enable\", \"delete\" ]\nq = session.query(IndexObject)\nq = q.join(IndexObject.acls).filter(IndexObjectACL.value.in_(search_acls))\n\nprint(q.all())\n\nsession.close()\n</code></pre>\n"}, {"tags": ["python", "list", "tuples"], "comments": [{"owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "edited": false, "score": 0, "creation_date": 1484781338, "post_id": 41731085, "comment_id": 70656608, "body": "You can apply any of the solutions proposed <a href=\"http://stackoverflow.com/questions/2158395/flatten-an-irregular-list-of-lists-in-python\">here</a> to every sublist. Duplicate?"}], "owner": {"reputation": 1439, "user_id": 6344954, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/dfe73b34173e78c09be7cdd8454bcf88?s=128&d=identicon&r=PG&f=1", "display_name": "sshussain270", "link": "https://stackoverflow.com/users/6344954/sshussain270"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "closed_date": 1484781059, "answer_count": 0, "score": 1, "last_activity_date": 1484781538, "creation_date": 1484780974, "last_edit_date": 1484781538, "question_id": 41731085, "link": "https://stackoverflow.com/questions/41731085/how-to-simplify-tuples-within-tuples-in-a-python-list", "closed_reason": "Duplicate", "title": "How to simplify tuples within tuples in a python list?", "body": "<p>I have a list containing tuples like this:</p>\n\n<pre><code>list = [(('1', '6'), ('3', '4')), (((5, 6), (8, 6)), ((3, 6), (8, 1))), (('1', '6'), ('2', '5'))]\n</code></pre>\n\n<p>As you can see in the item: <code>(((5, 6), (8, 6)), ((3, 6), (8, 1)))</code> , tuples can contain tuples within them upto any level of depth.</p>\n\n<p>I want to make a function called simplify_list such that each item in a list is simplified to a tuple containing only one layer. For example:</p>\n\n<pre><code>(('1', '6'), ('3', '4')) becomes ('1', '6', '3', '4')\n(((5, 6), (8, 6)), ((3, 6), (8, 1))) becomes (5, 6, 8, 6, 3, 6, 8, 1)\n(('1', '6'), ('2', '5')) becomes ('1', '6', '2', '5')\n</code></pre>\n\n<p>So end up with the following list as a result:</p>\n\n<pre><code>resulting_list = [('1', '6', '3', '4'), (5, 6, 8, 6, 3, 6, 8, 1), ('1', '6', '2', '5')]\n</code></pre>\n\n<p>I have made the following function but it doesnt seem to be working correctly, can anyone help me with that?</p>\n\n<pre><code>def simplify_list(list):\n    simplified_list = []\n    for item in list:\n        simplified_list.extend(item)\n    return simplified_list\n</code></pre>\n\n<p>Thanks in advance!</p>\n\n<p><strong>NOTE</strong></p>\n\n<p>My question is different from all of the other because it deals with tuples, not lists and no where on stackoverflow has been answered. </p>\n"}, {"tags": ["python", "qt", "pyqt", "pyuic"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 1, "creation_date": 1484781573, "post_id": 41731046, "comment_id": 70656692, "body": "try changing python3.6 to python3 or only  python"}, {"owner": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "edited": false, "score": 0, "creation_date": 1484791306, "post_id": 41731046, "comment_id": 70659367, "body": "<code>which python3.6</code>"}, {"owner": {"reputation": 161, "user_id": 6706695, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/73aeb89221bf7d9f6af442e68df34d2e?s=128&d=identicon&r=PG&f=1", "display_name": "green.mango", "link": "https://stackoverflow.com/users/6706695/green-mango"}, "edited": false, "score": 0, "creation_date": 1484792192, "post_id": 41731046, "comment_id": 70659590, "body": "Changing to python3 worked. Thank you!"}], "owner": {"reputation": 161, "user_id": 6706695, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/73aeb89221bf7d9f6af442e68df34d2e?s=128&d=identicon&r=PG&f=1", "display_name": "green.mango", "link": "https://stackoverflow.com/users/6706695/green-mango"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1025, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1484780748, "creation_date": 1484780748, "question_id": 41731046, "link": "https://stackoverflow.com/questions/41731046/pyuic5-with-python3-6-error", "title": "pyuic5 with python3.6 error", "body": "<p>I'm trying to use the pyuic5 command in the terminal to convert a QT designer .ui file to a .py file. Here is the command:</p>\n\n<pre><code>pyuic5 cone.ui -o cone.py\n</code></pre>\n\n<p>The error I get is:</p>\n\n<pre><code>/usr/local/bin/pyuic5: line 2: exec: python3.6: not found\n</code></pre>\n\n<p>Here is the contents of the pyuic5 file:</p>\n\n<pre><code>#!/bin/sh \nexec python3.6 -m PyQt5.uic.pyuic ${1+\"$@\"}\n</code></pre>\n\n<p>Anyone else getting this error?</p>\n"}, {"tags": ["python", "operating-system", "os.walk"], "answers": [{"comments": [{"owner": {"reputation": 2651, "user_id": 2246024, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/OpzyW.jpg?s=128&g=1", "display_name": "Simon Fromme", "link": "https://stackoverflow.com/users/2246024/simon-fromme"}, "edited": false, "score": 1, "creation_date": 1484781553, "post_id": 41731157, "comment_id": 70656680, "body": "Thos gives him the absolute paths, still a little bit more work to do, to get the relative paths, as requested by the OP."}, {"owner": {"reputation": 3072, "user_id": 6611672, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/fa3f99cc3070ae57d877e08f9564ed22?s=128&d=identicon&r=PG&f=1", "display_name": "Johnny Metz", "link": "https://stackoverflow.com/users/6611672/johnny-metz"}, "edited": false, "score": 0, "creation_date": 1484781670, "post_id": 41731157, "comment_id": 70656726, "body": "Got it now. Much appreciated"}], "tags": [], "owner": {"reputation": 9060, "user_id": 1669475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e32c9e417e96b6371c06d97133bd77f7?s=128&d=identicon&r=PG", "display_name": "gandaliter", "link": "https://stackoverflow.com/users/1669475/gandaliter"}, "is_accepted": true, "score": 3, "last_activity_date": 1484782212, "last_edit_date": 1495542275, "creation_date": 1484781306, "answer_id": 41731157, "question_id": 41731043, "link": "https://stackoverflow.com/questions/41731043/python-os-get-all-absolute-file-paths-under-a-certain-directory/41731157#41731157", "title": "python os: get all absolute file paths under a certain directory", "body": "<p><code>filenames</code> is just a list of the names of the files, and doesn't store any directory information. That comes from <code>dirpath</code>, which you're ignoring at the moment.</p>\n\n<pre><code>import os\nfor dirpath, dirnames, filenames in os.walk('/Users/Me/Desktop'):\n    for file in filenames:\n        print os.path.join(os.path.relpath(dirpath, '/Users/Me/Desktop'), file)\n</code></pre>\n\n<p>Edit: added <code>os.path.relpath</code> to give relative rather than absolute paths. See <a href=\"https://stackoverflow.com/a/13617120/1669475\">this answer</a>.</p>\n"}], "owner": {"reputation": 3072, "user_id": 6611672, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/fa3f99cc3070ae57d877e08f9564ed22?s=128&d=identicon&r=PG&f=1", "display_name": "Johnny Metz", "link": "https://stackoverflow.com/users/6611672/johnny-metz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2545, "favorite_count": 1, "accepted_answer_id": 41731157, "answer_count": 1, "score": 0, "last_activity_date": 1484782212, "creation_date": 1484780729, "last_edit_date": 1484781510, "question_id": 41731043, "link": "https://stackoverflow.com/questions/41731043/python-os-get-all-absolute-file-paths-under-a-certain-directory", "title": "python os: get all absolute file paths under a certain directory", "body": "<p>I have the following folder structure:</p>\n\n<pre><code>Desktop\n\u251c\u2500\u2500 dir1\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 dir2\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 file4.pdf\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 file2.pdf\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 file3.pdf\n\u2514\u2500\u2500 file1.pdf\n</code></pre>\n\n<p>I'm trying to return all of the files with their paths relative to the current working directory (Desktop). Based on my example above, I want:</p>\n\n<pre><code>Desktop/file1.pdf\nDesktop/dir1/file2.pdf\nDesktop/dir1/file3.pdf\nDesktop/dir1/dir2/file4.pdf\n</code></pre>\n\n<p>This is what I have so far but it's not recognizing the nested directories:</p>\n\n<pre><code>import os\nfor dirpath, dirnames, filenames in os.walk('/Users/Me/Desktop'):\n    for file in filenames:\n        print os.path.abspath(file)\n\n# /Users/Me/Desktop/file1.pdf\n# /Users/Me/Desktop/file2.pdf\n# /Users/Me/Desktop/file3.pdf\n# /Users/Me/Desktop/file4.pdf\n</code></pre>\n"}, {"tags": ["python", "string", "list"], "comments": [{"owner": {"reputation": 23, "user_id": 7438198, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b329613debde419e561e5cb477023e8e?s=128&d=identicon&r=PG&f=1", "display_name": "Bear99", "link": "https://stackoverflow.com/users/7438198/bear99"}, "reply_to_user": {"reputation": 2755, "user_id": 5326679, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh5.googleusercontent.com/-UAJcCqeI85w/AAAAAAAAAAI/AAAAAAAAAEw/hAEYnJlKTt8/photo.jpg?sz=128", "display_name": "xandermonkey", "link": "https://stackoverflow.com/users/5326679/xandermonkey"}, "edited": false, "score": 0, "creation_date": 1484781194, "post_id": 41731040, "comment_id": 70656562, "body": "Wow the community is great on here, what a fast response. I don&#39;t think it is a duplicate actually. The .find usage is explained as an answer to that one, and it can be used within one single string, or a list of strings (if its looking for one of the whole strings in that list). But I am looking for multiple iterations of a substring within a list full of strings."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 7438198, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b329613debde419e561e5cb477023e8e?s=128&d=identicon&r=PG&f=1", "display_name": "Bear99", "link": "https://stackoverflow.com/users/7438198/bear99"}, "edited": false, "score": 0, "creation_date": 1484782556, "post_id": 41731087, "comment_id": 70657005, "body": "This does answer my question, but Prune&#39;s answer below is also a completely valid answer. Thanks so much."}], "tags": [], "owner": {"reputation": 71233, "user_id": 837534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f3782b004830f622e19029e5f7fc146?s=128&d=identicon&r=PG", "display_name": "Mike M&#252;ller", "link": "https://stackoverflow.com/users/837534/mike-m%c3%bcller"}, "is_accepted": true, "score": 4, "last_activity_date": 1484780979, "creation_date": 1484780979, "answer_id": 41731087, "question_id": 41731040, "link": "https://stackoverflow.com/questions/41731040/how-do-i-check-whether-or-not-a-substring-appears-multiple-times-within-a-list-i/41731087#41731087", "title": "How do I check whether or not a substring appears multiple times within a list in Python?", "body": "<p>You can use <code>in</code> for each string in the list:</p>\n\n<pre><code>&gt;&gt;&gt; player_hand = ['Ace of Spades', 'Nine of Diamonds', 'Ace of Diamonds']\n&gt;&gt;&gt; sum(1 for x in player_hand if 'Ace' in x)\n2\n</code></pre>\n\n<p>This uses a generator expression to go through the list that gives you a <code>1</code> if  <code>Ace</code> is in a string of the list. Summing up the ones gives you the total count of strings that contain <code>Ace</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 23, "user_id": 7438198, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b329613debde419e561e5cb477023e8e?s=128&d=identicon&r=PG&f=1", "display_name": "Bear99", "link": "https://stackoverflow.com/users/7438198/bear99"}, "edited": false, "score": 0, "creation_date": 1484781913, "post_id": 41731164, "comment_id": 70656805, "body": "Well I think I need the suits. Both to display to the player when he looks at his hand (user-friendliness) and to differentiate the different cards. there can&#39;t be just four strings named &#39;Ace&#39; in the list can there? So I used suits. I&#39;m also not sure what your answer entails; would you mind showing the output for rank_count? Not sure how I could make use of that either without maybe a dictionary. Maybe I don&#39;t know what i&#39;m talking about though."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "reply_to_user": {"reputation": 23, "user_id": 7438198, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b329613debde419e561e5cb477023e8e?s=128&d=identicon&r=PG&f=1", "display_name": "Bear99", "link": "https://stackoverflow.com/users/7438198/bear99"}, "edited": false, "score": 0, "creation_date": 1484782191, "post_id": 41731164, "comment_id": 70656887, "body": "You <i>do</i> know what you&#39;re doing.  A dictionary is a great translation device between your internal notation and the external display.  Even if you don&#39;t strip it down to my two-letter form, I recommend that you split the cards into rank-suit pairs; re-insert &quot;of&quot; when you print."}, {"owner": {"reputation": 23, "user_id": 7438198, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b329613debde419e561e5cb477023e8e?s=128&d=identicon&r=PG&f=1", "display_name": "Bear99", "link": "https://stackoverflow.com/users/7438198/bear99"}, "edited": false, "score": 0, "creation_date": 1484783011, "post_id": 41731164, "comment_id": 70657126, "body": "That&#39;s amazing, thank you so much. Is there any way to have it check for words like that? I really want to keep the Player_hand with the format rank of suit in order to avoid having another variable, and in doing so could you pull from a list similar to your rank_hand but something that would output a 2 in that first spot if the full word &#39;Ace&#39; appeared twice? Thanks for the vote of confidence as well :)"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "reply_to_user": {"reputation": 23, "user_id": 7438198, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b329613debde419e561e5cb477023e8e?s=128&d=identicon&r=PG&f=1", "display_name": "Bear99", "link": "https://stackoverflow.com/users/7438198/bear99"}, "edited": false, "score": 0, "creation_date": 1484785241, "post_id": 41731164, "comment_id": 70657814, "body": "Yes, it works just as well for words.  In Python, those individual letters are simple words of length 1.  Go ahead -- try it out with words instead.  You can convert with <b>&quot; of &quot;.split(player_hand[i])</b> on your original version of <b>player_hand</b> -- that&#39;s using &quot; of &quot; as the separator."}], "tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 2, "last_activity_date": 1484782192, "last_edit_date": 1484782192, "creation_date": 1484781352, "answer_id": 41731164, "question_id": 41731040, "link": "https://stackoverflow.com/questions/41731040/how-do-i-check-whether-or-not-a-substring-appears-multiple-times-within-a-list-i/41731164#41731164", "title": "How do I check whether or not a substring appears multiple times within a list in Python?", "body": "<p>This seems to be an \"X-Y\" problem -- you have a higher-level problem, but asking about the details.</p>\n\n<p>I recommend that you pre-process your input to get rid of unused details.  Is there any particular reason that you care about the suits?  If not, dump them.  If so, keep them ... but code the cards for your internal convenience.  For instance, represent the above hand as a list of rank-suit pairs:</p>\n\n<pre><code>player_hand = [\"AS\", \"9D\", \"AD\"]\n</code></pre>\n\n<p>If needed, you can gather like cards by sorting the list.  If not, simply use the <strong>count</strong> function on the first element to see how many of each item you have.  You can do something like</p>\n\n<pre><code>card_rank = \"A23456789TJQK\"\nrank_count = [player_hand.count(char) for char in card_rank]\n</code></pre>\n\n<p>Also, this generalizes nicely if your next assignment is to program a more complex card game.</p>\n\n<p>Does that get you moving?</p>\n\n<p>UPDATE PER OP COMMENT</p>\n\n<pre><code>player_hand = [\"AS\", \"9D\", \"AD\"]\nrank_hand = [card[0] for card in player_hand]\ncard_rank = \"A23456789TJQK\"\nrank_count = [rank_hand.count(char) for char in card_rank]\nprint rank_count\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>[2, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0]\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 7438198, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b329613debde419e561e5cb477023e8e?s=128&d=identicon&r=PG&f=1", "display_name": "Bear99", "link": "https://stackoverflow.com/users/7438198/bear99"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 176, "favorite_count": 1, "closed_date": 1484783567, "accepted_answer_id": 41731087, "answer_count": 2, "score": 2, "last_activity_date": 1484783108, "creation_date": 1484780710, "last_edit_date": 1495542837, "question_id": 41731040, "link": "https://stackoverflow.com/questions/41731040/how-do-i-check-whether-or-not-a-substring-appears-multiple-times-within-a-list-i", "closed_reason": "Duplicate", "title": "How do I check whether or not a substring appears multiple times within a list in Python?", "body": "<p>So lets say I'm playing Go Fish (that's totally what I'm coding btw), and I want to check for pairs with a function. There are a lot of brute force ways it could be done but the way that I think is possible that I'm not sure how to execute is to test for multiple occurrences of the same substring.</p>\n\n<p>Example: <code>Player_hand = ['Ace of Spades', 'Nine of Diamonds', 'Ace of Diamonds']</code></p>\n\n<p>Now I was trying to use <code>if Player_hand.find('Ace')==2</code> and that only tests for strings that are in their entirety <code>'Ace'</code>.</p>\n\n<p>TLDR: I want to check if a substring appears multiple times in a list full of strings. Thanks for any help in advance!</p>\n\n<p>EDIT: This question is not a duplicate of this question</p>\n\n<p><a href=\"https://stackoverflow.com/questions/3873361/finding-multiple-occurrences-of-a-string-within-a-string-in-python\">Finding multiple occurrences of a string within a string in Python</a></p>\n\n<p>This question shows how to find multiple occurrences within a single string, as well as how to find multiple occurrences of whole strings within a list. I am looking to find multiple occurrences of a substring within a list full of strings.</p>\n"}, {"tags": ["python", "arrays", "algorithmic-trading"], "comments": [{"owner": {"reputation": 1, "user_id": 3666197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79fc6c23061326c7e6a6f82a1663634b?s=128&d=identicon&r=PG", "display_name": "user3666197", "link": "https://stackoverflow.com/users/3666197/user3666197"}, "edited": false, "score": 0, "creation_date": 1484842406, "post_id": 41731035, "comment_id": 70685810, "body": "Ian, given your indicated interest goes into both ML &amp; algo-trading, you may enjoy rather the <b><code>numpy</code> strided-tricks &gt;&gt;&gt; <a href=\"http://www.scipy-lectures.org/advanced/advanced_numpy/#indexing-scheme-strides\" rel=\"nofollow noreferrer\">scipy-lectures.org/advanced/advanced_numpy/&hellip;</a></b> for series, which in both quant &amp; ML models soon grow to shapes not feasible for InRAM processing. Given that, re-packing the huge amounts of data into a pandas abstraction does not yield to a surviveable implementation. If in doubts, benchmark the code on 1M, 10M, 100M rows of data to see the relaxation of performance ( which may obviously seem forgiving on tiny and small matrix sizes ... )."}, {"owner": {"reputation": 760, "user_id": 7438212, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/yMAvn.jpg?s=128&g=1", "display_name": "Ian Ash", "link": "https://stackoverflow.com/users/7438212/ian-ash"}, "reply_to_user": {"reputation": 1, "user_id": 3666197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79fc6c23061326c7e6a6f82a1663634b?s=128&d=identicon&r=PG", "display_name": "user3666197", "link": "https://stackoverflow.com/users/3666197/user3666197"}, "edited": false, "score": 0, "creation_date": 1484936800, "post_id": 41731035, "comment_id": 70731623, "body": "Thank you - I will take a look, though to be honest I&#39;m so new to this whole space that I&#39;ve not yet reached a point where I have anything useful to apply to a large dataset!"}], "answers": [{"comments": [{"owner": {"reputation": 760, "user_id": 7438212, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/yMAvn.jpg?s=128&g=1", "display_name": "Ian Ash", "link": "https://stackoverflow.com/users/7438212/ian-ash"}, "edited": false, "score": 0, "creation_date": 1484816881, "post_id": 41731663, "comment_id": 70668733, "body": "Thank you - this is incredibly helpful and really advanced my understanding. Not least because for the life of me I could not figure out what the invert operator is in Python! In your final example code given, &#39;m=window.median()&#39; does not work as only Series has a median() method, so I replaced that with &#39;m = np.median(window)&#39;"}], "tags": [], "owner": {"reputation": 226, "user_id": 7410738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e12117690bcdd896472c9f83443794da?s=128&d=identicon&r=PG&f=1", "display_name": "p-j-e", "link": "https://stackoverflow.com/users/7410738/p-j-e"}, "is_accepted": true, "score": 4, "last_activity_date": 1484817381, "last_edit_date": 1484817381, "creation_date": 1484784652, "answer_id": 41731663, "question_id": 41731035, "link": "https://stackoverflow.com/questions/41731035/pythonic-code-for-conditional-loop-over-array-market-meaness-index/41731663#41731663", "title": "Pythonic code for conditional loop over array (Market Meaness Index)", "body": "<p>Python is implicit, unlike C++ where you almost have to declare everything. Python, and numpy/pandas or other modules, have a ton of optimized functionality built-in - in order for you to work without a lot of loops or value by value comparison (what the modules do in the background, often is a for loop though - so don't think that it's necessarily faster, it's often just a pretty cover). </p>\n\n<p>Now, let's look at your code</p>\n\n<pre><code>import numpy as np # no need for pandas here\n\n\ndef MMI( buffer, mmi_length ):\n    # we will need to define two arrays here,\n    # shift(n) does not do what you want\n    window = np.asarray(buffer[1:mmi_length])\n    window_shifted = np.asarray(buffer[:mmi_length-1])\n    m = np.median(window)\n\n    # instead using all these explicit functions simply do:\n    nh = (window &gt; m) &amp; (window &gt; window_shifted) \n    nl = (window &lt; m) &amp; (window &lt; window_shifted) \n    nl = ~nh &amp; nl                                # ~ inverts a lot of things,\n                                                 # one of them are boolean arrays\n\n    # this does the right thing\n    return 100*(nh.sum()+nl.sum())/mmi_length\n</code></pre>\n\n<p>Now let's explain: </p>\n\n<p>A Series is basically an array, in this context a series seems like an overkill. If you compare such an object with a scalar, you will get an array of booleans, expressing which value met the condition and which didn't (the same goes for comparing two arrays, it will result in boolean array expressing the value by value comparison).</p>\n\n<p>In the first step, you compare an array to a scalar (remember, this will be a boolean array) and another array to a another array (we'll get to the shift part) and then want to logically and combine the result of the comparisons. Good thing is, that you want to combine two boolean arrays, this will work implicitly by the <code>&amp;</code> operation.\nThe second step is analogous and will work implicitly the same.</p>\n\n<p>In the third step, you want to invert a boolean array and combine it with another boolean array. Inversion is done by the <code>~</code> operator and can be used in lot's of other places to (e.g. for inverting subset selections, etc). You cannot use the <code>not</code> operator here, since its purpose is to convert its argument into a truth value (True/False) and return the opposite  - but what is the truth value of an array? The logical and combination of all components? It's not defined, therefore you get the <code>ambiguous</code> error.</p>\n\n<p>The <code>sum()</code> of a boolean array is always the count of <code>True</code> values in the array, thus it will yield the right results.</p>\n\n<p>The only problem with your code, is that if you apply <code>shift(1)</code> to this Series, it will prepend a <code>NaN</code> and truncate the last element of the Series, so that you end up with an equal length object. Now your comparisons are not yielding what you want anymore, because anything compared to a <code>numpy.NaN</code> will return <code>False</code>.\nIn order to overcome that, you can simply define a second array in the beginning (which then makes pandas obsolete), using the same syntax you already used for <code>window</code> before.</p>\n\n<hr>\n\n<p>PS: a numpy array is not a python list (all of the above are numpy arrays!) A numpy array is a complex object that allows for all these operations, with standard python lists, you have to work your own for loops</p>\n"}], "owner": {"reputation": 760, "user_id": 7438212, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/yMAvn.jpg?s=128&g=1", "display_name": "Ian Ash", "link": "https://stackoverflow.com/users/7438212/ian-ash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 159, "favorite_count": 1, "accepted_answer_id": 41731663, "answer_count": 1, "score": 3, "last_activity_date": 1484841555, "creation_date": 1484780694, "last_edit_date": 1484841555, "question_id": 41731035, "link": "https://stackoverflow.com/questions/41731035/pythonic-code-for-conditional-loop-over-array-market-meaness-index", "title": "Pythonic code for conditional loop over array (Market Meaness Index)", "body": "<p>I'm just starting out with Python, all my previous experience being C++ type languages.</p>\n\n<p>In the attempt to learn \"good\" Python I've been trying to convert this C-like function into Python.</p>\n\n<pre><code>var MMI(var *Data,int Length)\n{\n  var m = Median(Data,Length);\n  int i, nh=0, nl=0;\n  for(i=1; i&lt;Length; i++) {\n    if(Data[i] &gt; m &amp;&amp; Data[i] &gt; Data[i-1])\n      nl++;\n    else if(Data[i] &lt; m &amp;&amp; Data[i] &lt; Data[i-1])\n      nh++;\n  }\n  return 100.*(nl+nh)/(Length-1);\n}\n</code></pre>\n\n<p>I'm pretty sure I can do it easily with a for loop, but I've been trying to do it using a series of array operations, rather than an explicit loop. I came up with:</p>\n\n<pre><code>import numpy as np\nimport pandas as pd\nfrom pandas import Series \n\ndef MMI( buffer, mmi_length ):\n    window = Series( buffer[:mmi_length] )\n    m      = window.median()\n\n    nh = np.logical_and( [window &gt; m], [window &gt; window.shift(1)] ) \n    nl = np.logical_and( [window &lt; m], [window &lt; window.shift(1)] ) \n    nl = np.logical_and( [not nh], [nl] )\n\n    return 100 * ( nh.sum() + nl.sum() ) / mmi_length\n</code></pre>\n\n<p>The final <code>np.logical_and( [not nh], [n] )</code> gives a \"truth value ambiguous\" error, which I don't understand, but more importantly I'm not sure whether this approach will actually yield a valid result in Python.</p>\n\n<p>Could someone provide a pointer in how I should code this elegantly, or slap me on the head and tell me to just use a loop?</p>\n\n<p>Ian</p>\n"}, {"tags": ["python", "oop"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1484780786, "post_id": 41731023, "comment_id": 70656427, "body": "This is probably off-topic because it is based too much on opinion, but for what it&#39;s worth, it is my opinion that the first one is better. Class bloat is baaaad."}, {"owner": {"reputation": 1106, "user_id": 2272798, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2b8caf712e1fd1d7964a5260ef007818?s=128&d=identicon&r=PG", "display_name": "jstaker7", "link": "https://stackoverflow.com/users/2272798/jstaker7"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1484780981, "post_id": 41731023, "comment_id": 70656501, "body": "Thanks for the thoughts. Any suggestions on a better place for the question? I was hoping there was a best-practice that was less opinion based, but good point."}, {"owner": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 2, "creation_date": 1484782195, "post_id": 41731023, "comment_id": 70656888, "body": "Why does this bother you? \u2014 I used to think the same, but the reason was just irrational conditioning that \u201cgood\u201d OOP meant always writing <code>obj.method()</code>. And that\u2019s simply not true. There\u2019s no objective reason it\u2019s bad, other than habit (and, to be honest, the fact that it creates a non-uniform syntax for calling functions on things; but that is true in Python anyway, so it doesn\u2019t apply here)."}, {"owner": {"reputation": 34033, "user_id": 178060, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/e61aa9f3d632781569b0115b9f3154fd?s=128&d=identicon&r=PG", "display_name": "wheaties", "link": "https://stackoverflow.com/users/178060/wheaties"}, "edited": false, "score": 0, "creation_date": 1484860193, "post_id": 41731023, "comment_id": 70695961, "body": "@jstaker7 Can you change the question so that&#39;s it&#39;s not &quot;which is better?&quot; You provide a specific example but as another commenter said, this is totally opinion based."}, {"owner": {"reputation": 1106, "user_id": 2272798, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2b8caf712e1fd1d7964a5260ef007818?s=128&d=identicon&r=PG", "display_name": "jstaker7", "link": "https://stackoverflow.com/users/2272798/jstaker7"}, "edited": false, "score": 0, "creation_date": 1484864043, "post_id": 41731023, "comment_id": 70697889, "body": "Sure thing. Just made changes to make it more specific and less opinion based."}], "answers": [{"comments": [{"owner": {"reputation": 7691, "user_id": 1636276, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b9b89d2ebb4ad79a3f0d622c96432b35?s=128&d=identicon&r=PG", "display_name": "Tagc", "link": "https://stackoverflow.com/users/1636276/tagc"}, "edited": false, "score": 0, "creation_date": 1484859547, "post_id": 41731189, "comment_id": 70695583, "body": "You&#39;re right, OP&#39;s example is contrived and <code>inspect_colour</code> would make sense as a function defined elsewhere, so as to avoid violation of the Single Responsibility Principle (<b>S</b>OLID). I use static methods in Python just like I&#39;d use them in Java or C# - to implement functionality specific to a class that does not need to reference the instance (i.e. <code>self</code>)."}], "tags": [], "owner": {"reputation": 912, "user_id": 6792709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5e86a4cf40fa66135705468f335a88e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarak", "link": "https://stackoverflow.com/users/6792709/jarak"}, "is_accepted": false, "score": 0, "last_activity_date": 1484781485, "last_edit_date": 1495539946, "creation_date": 1484781485, "answer_id": 41731189, "question_id": 41731023, "link": "https://stackoverflow.com/questions/41731023/placing-a-function-outside-of-a-class-that-doesnt-depend-on-state/41731189#41731189", "title": "Placing a function outside of a class that doesn&#39;t depend on state", "body": "<p>This isn't really a full answer, but I don't quite have a high enough rep to just make a comment.  I'm no expert on OOP best practices, but my gut feeling is that the colour analysis function would be best implemented as an interface, because that way the specifics of the implementation can be left up to the given class, but there can be some degree of standardisation across classes.</p>\n\n<p>Turns out Python doesn't really do interfaces though apparently (<a href=\"https://stackoverflow.com/questions/2124190/how-do-i-implement-interfaces-in-python\">according to this</a>).  Others who know better about the <a href=\"https://en.wikipedia.org/wiki/SOLID_(object-oriented_design)\" rel=\"nofollow noreferrer\">SOLID principles</a> could advise better than I.</p>\n"}, {"comments": [{"owner": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 5, "creation_date": 1484782336, "post_id": 41731250, "comment_id": 70656931, "body": "I don\u2019t think (or rather, I don\u2019t agree) that this is a good use for a static method. The method has nothing to do with <code>Dog</code>; only with <code>color</code>. It simply doesn\u2019t belong in <code>Dog</code>. It <i>may</i> belong in the same module but certainly not in the class."}, {"owner": {"reputation": 71233, "user_id": 837534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f3782b004830f622e19029e5f7fc146?s=128&d=identicon&r=PG", "display_name": "Mike M&#252;ller", "link": "https://stackoverflow.com/users/837534/mike-m%c3%bcller"}, "reply_to_user": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 0, "creation_date": 1484782628, "post_id": 41731250, "comment_id": 70657028, "body": "Maybe this due to the example but the alternative the OP has are either an external function or an instance method with <code>self</code> as first argument. Putting both together would make a static method, I think."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 2, "creation_date": 1484783302, "post_id": 41731250, "comment_id": 70657221, "body": "...or just use an external function."}], "tags": [], "owner": {"reputation": 71233, "user_id": 837534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f3782b004830f622e19029e5f7fc146?s=128&d=identicon&r=PG", "display_name": "Mike M&#252;ller", "link": "https://stackoverflow.com/users/837534/mike-m%c3%bcller"}, "is_accepted": false, "score": 1, "last_activity_date": 1484783158, "last_edit_date": 1484783158, "creation_date": 1484781843, "answer_id": 41731250, "question_id": 41731023, "link": "https://stackoverflow.com/questions/41731023/placing-a-function-outside-of-a-class-that-doesnt-depend-on-state/41731250#41731250", "title": "Placing a function outside of a class that doesn&#39;t depend on state", "body": "<p>That is what a <a href=\"https://docs.python.org/3/library/functions.html#staticmethod\" rel=\"nofollow noreferrer\">staticmethod</a> is good for.</p>\n\n<blockquote>\n  <p>A static method does not receive an implicit first argument.</p>\n</blockquote>\n\n<pre><code>class Dog(object):\n\n    def __init__(self, color):\n        self.color = color\n\n    def play_in_mud(self):\n        self.color = 'brown'\n        results = self.inspect_color(self.color)\n        return results\n\n    @staticmethod\n    def inspect_color(color):\n        if color == 'brown':\n            return 'Similar to chocolate'\n</code></pre>\n\n<p>You can use it just like a function:</p>\n\n<pre><code>&gt;&gt;&gt; Dog.inspect_color('brown')\n'Similar to chocolate'\n</code></pre>\n\n<p>and in your method:</p>\n\n<pre><code>&gt;&gt;&gt; dog = Dog('red')\n&gt;&gt;&gt; dog.play_in_mud()\n'Similar to chocolate'\n</code></pre>\n"}], "owner": {"reputation": 1106, "user_id": 2272798, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2b8caf712e1fd1d7964a5260ef007818?s=128&d=identicon&r=PG", "display_name": "jstaker7", "link": "https://stackoverflow.com/users/2272798/jstaker7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 235, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1484863998, "creation_date": 1484780635, "last_edit_date": 1484863998, "question_id": 41731023, "link": "https://stackoverflow.com/questions/41731023/placing-a-function-outside-of-a-class-that-doesnt-depend-on-state", "title": "Placing a function outside of a class that doesn&#39;t depend on state", "body": "<p>One of the things that has confused me when studying best software engineering practices is how to handle methods in classes that don't alter or otherwise interact with the state.</p>\n\n<p>In <a href=\"http://loup-vaillant.fr/articles/deaths-of-oop\" rel=\"nofollow noreferrer\">this article</a> I like how the author discusses the separation of data and logic. But in trying to apply this in practice, I have cases where I have an odd-out function outside the class that doesn't change the state of the object but isn't really relevant outside the object.</p>\n\n<p>For example:</p>\n\n<pre><code>def inspect_color(color):\n    if color == 'brown':\n        return 'Similar to chocolate'\n\nclass Dog(object):\n\n   def __init__(self, color):\n       self.color = color\n\n   def play_in_mud(self):\n       self.color = 'brown'\n       results = inspect_color(self.color)\n</code></pre>\n\n<p>vs.</p>\n\n<pre><code>class Dog(object):\n\n   def __init__(self, color):\n       self.color = color\n\n   def play_in_mud(self):\n       self.color = 'brown'\n       results = self.inspect_color()\n\n    def inspect_color(self):\n        if self.color == 'brown':\n            return 'Similar to chocolate'\n</code></pre>\n\n<p>Is there a general software engineering principle or best practice (from any reasonable paradigm) that suggests which of these approaches should be followed? For multiple reasons my intuition tells me that the top one is better, except doing this: <code>inspect_color(self.color)</code> bothers me, so I am unsure. I did some reading but didn't find a clear answer on best practices for cases like these.</p>\n"}, {"tags": ["python", "date", "datetime", "matplotlib", "plot"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1484780422, "post_id": 41730958, "comment_id": 70656323, "body": "Don&#39;t use vanilla Python <code>datetime</code> objects... they will alway be <i>objects</i>. Try <code>x_points = pd.to_datetime(x_points)</code> which should give you a <code>datetime64</code> dtype <code>Series</code>."}, {"owner": {"reputation": 2633, "user_id": 7372165, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/PCyvJ.png?s=128&g=1", "display_name": "JAG2024", "link": "https://stackoverflow.com/users/7372165/jag2024"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1484781962, "post_id": 41730958, "comment_id": 70656815, "body": "Yup! That worked. I guess I should delete this question now."}, {"owner": {"reputation": 2633, "user_id": 7372165, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/PCyvJ.png?s=128&g=1", "display_name": "JAG2024", "link": "https://stackoverflow.com/users/7372165/jag2024"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1488001702, "post_id": 41730958, "comment_id": 72048437, "body": "Thanks! Please check out my other question: <a href=\"http://stackoverflow.com/questions/42444020/change-frequency-of-x-axis-tick-label-of-datetime-data-in-python-bar-chart-using\" title=\"change frequency of x axis tick label of datetime data in python bar chart using\">stackoverflow.com/questions/42444020/&hellip;</a>"}], "owner": {"reputation": 2633, "user_id": 7372165, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/PCyvJ.png?s=128&g=1", "display_name": "JAG2024", "link": "https://stackoverflow.com/users/7372165/jag2024"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 567, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1484780250, "creation_date": 1484780250, "question_id": 41730958, "link": "https://stackoverflow.com/questions/41730958/date-data-in-python-is-object-and-cant-plot-along-x-axis-using-matplotlib", "title": "Date data in python is &#39;object&#39; and can&#39;t plot along x-axis using matplotlib", "body": "<p>I am using matplotlib and have a data frame <code>df</code> with two columns <code>Date</code> (the dependent variable) and <code>Value</code> (the independent variable). I want to plot <code>Date</code> along the x-axis but currently the dataset are objects, even after converting to numeric. What's the best way to plot these dates? I could either:</p>\n\n<ul>\n<li>convert the dates to Day of Year or</li>\n<li>convert the objects to be some other datatype that matplotlib can plot</li>\n</ul>\n\n<p>Either of these options would be fine.</p>\n\n<p>I looked at the documentation for the <code>datetime</code> package but I really don't understand what's going on. Here's my code:</p>\n\n<pre><code>import matplotlib.pyplot as plt\nfrom datetime import datetime, date,time\n\nfig = plt.figure()\nax = fig.add_subplot(111)\nx_points = df['Date']\nx_points = x_points.convert_objects(convert_numeric=True) \n\n&gt;&gt;&gt; x_points\n189     11/14/15\n191     11/14/15\n192     11/14/15\n193     11/14/15\n194     11/15/15\n       ...\n2910     2/20/16\n2912     2/20/16\n2914     2/20/16\n2915     2/20/16\n2917     2/20/16\n</code></pre>\n\n<p>and this is what I have for plotting but nothing shows up in my plot</p>\n\n<pre><code>y_points = df['Value']\np = ax.plot(x_points, y_points, 'b')\nax.set_xlabel('x-points')\nax.set_ylabel('y-points')\nax.set_title('Simple XY point plot')\nfig.show()\n</code></pre>\n\n<p>Hoping to get a solution and an explanation to help me learn!</p>\n"}, {"tags": ["python", "multiprocessing"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1484780484, "post_id": 41730953, "comment_id": 70656340, "body": "That&#39;s not multithreading. You&#39;re using the <i>multiprocessing</i> module, which works completely differently, in ways that the documentation doesn&#39;t do enough to explain."}, {"owner": {"reputation": 1, "user_id": 7437945, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154519690339215/picture?type=large", "display_name": "Austin Mei", "link": "https://stackoverflow.com/users/7437945/austin-mei"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1484780573, "post_id": 41730953, "comment_id": 70656367, "body": "My bad, meant to say multiprocessing -- have been trying to find a solution and mixed the terminology up."}, {"owner": {"reputation": 1, "user_id": 7437945, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154519690339215/picture?type=large", "display_name": "Austin Mei", "link": "https://stackoverflow.com/users/7437945/austin-mei"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1484780606, "post_id": 41730953, "comment_id": 70656381, "body": "Do you have any idea for a workaround or as to why the variable was not being updated?"}], "owner": {"reputation": 1, "user_id": 7437945, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154519690339215/picture?type=large", "display_name": "Austin Mei", "link": "https://stackoverflow.com/users/7437945/austin-mei"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 27, "favorite_count": 0, "closed_date": 1484780688, "answer_count": 0, "score": 0, "last_activity_date": 1484780517, "creation_date": 1484780224, "last_edit_date": 1484780517, "question_id": 41730953, "link": "https://stackoverflow.com/questions/41730953/python-multiprocessing-variable-not-being-updated", "closed_reason": "Duplicate", "title": "Python Multiprocessing-- Variable not being updated", "body": "<p>Hey I have a question regarding the use of the python module for multiprocessing and its interaction with variables</p>\n\n<p>In essence, my code is having an issue updating a certain variable -- even though I can see it has been updated (?)</p>\n\n<p>The code itself is relatively straight forward -- I want to look at any new lines added to a file (will be a log) and then write each line into a data struct.</p>\n\n<p>My problem is that for some reason my log_array list is still empty at the end of this, even though I have printed it in the generate_new_log function and I can see it being populated. </p>\n\n<pre><code>temp_log = open(\"temp_log.txt\", 'w')\nlog_array = []\n\ndef follow(thefile):\n    thefile.seek(0,2)\n    while True:\n        line = thefile.readline()\n        if not line:\n            time.sleep(0.1)\n            continue\n        yield line\n\ndef generate_new_log():\n    logfile = open(\"test2.txt\",\"r\")\n    loglines = follow(logfile)\n    for line in loglines:\n        #global log_array\n        global log_array \n        log_array.append(line)\n        print log_array\n\ndef main():\n\n    p = multiprocessing.Process(target=generate_new_log, name='NewLog', args = ())\n    p.start()\n    time.sleep(10)\n    print log_array\n    p.terminate()\n    print(\"hi\")\n    p.join()\n    print log_array\n\n\nif __name__ == '__main__':\n    main()\n</code></pre>\n\n<p>The console output looks something like this:</p>\n\n<pre><code>['duck\\n']\n['duck\\n', 's\\n']\n['duck\\n', 's\\n', '\\n']\n['duck\\n', 's\\n', '\\n', 'bbbb\\n']\n['duck\\n', 's\\n', '\\n', 'bbbb\\n', 'cccc\\n']\n['duck\\n', 's\\n', '\\n', 'bbbb\\n', 'cccc\\n', 'cerap\\n']\n['duck\\n', 's\\n', '\\n', 'bbbb\\n', 'cccc\\n', 'cerap\\n', 'nerds\\n']\n['duck\\n', 's\\n', '\\n', 'bbbb\\n', 'cccc\\n', 'cerap\\n', 'nerds\\n', 'duck\\n']\n['duck\\n', 's\\n', '\\n', 'bbbb\\n', 'cccc\\n', 'cerap\\n', 'nerds\\n', 'duck\\n',\n'pony\\n']\n[]\nhi\n[]\n</code></pre>\n\n<p>The question is mostly that those two empty lists at the bottom of the console refer to the log_array that is like global variable. I can see as we go through the generate_new_log function, I can see log_array being updated. My primary question is -- how/where can I extract the information from the log_array that was populated after that 10 second interval?</p>\n"}, {"tags": ["python", "python-2.7", "python-3.x", "lxml"], "comments": [{"owner": {"reputation": 686, "user_id": 2442384, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/29646d94c0942cda6345f4eaa061c531?s=128&d=identicon&r=PG&f=1", "display_name": "boson", "link": "https://stackoverflow.com/users/2442384/boson"}, "edited": false, "score": 0, "creation_date": 1485304125, "post_id": 41730945, "comment_id": 70867914, "body": "See also: <a href=\"http://stackoverflow.com/questions/38845273/can-you-permanently-change-python-code-by-input?noredirect=1&amp;lq=1\" title=\"can you permanently change python code by input\">stackoverflow.com/questions/38845273/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 340, "user_id": 6828137, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/SERVd.jpg?s=128&g=1", "display_name": "p_sutherland", "link": "https://stackoverflow.com/users/6828137/p-sutherland"}, "edited": false, "score": 0, "creation_date": 1484781377, "post_id": 41730990, "comment_id": 70656626, "body": "Appreciate the answer, explanation, and advice on how <code>_</code> variable name is used!"}], "tags": [], "owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "is_accepted": true, "score": 2, "last_activity_date": 1484780780, "last_edit_date": 1484780780, "creation_date": 1484780437, "answer_id": 41730990, "question_id": 41730945, "link": "https://stackoverflow.com/questions/41730945/how-to-extract-text-from-lxml-etree-tags-based-on-value-of-sibling-tags/41730990#41730990", "title": "How to extract text from lxml.etree tags based on value of sibling tags", "body": "<p>You need an <a href=\"http://lxml.de/xpathxslt.html\" rel=\"nofollow noreferrer\">XPath expression and the <code>xpath()</code> method</a> :</p>\n\n<pre><code>[url.text for url in et.xpath('//filing[formType = \"10-K\"]/instanceUrl')]\n</code></pre>\n\n<p>Here we are filtering the <code>filing</code> nodes that contain <code>formType</code> child nodes with <code>10-K</code> text, then getting the <code>instanceUrl</code> child.</p>\n\n<p>Note that the <code>_</code> variable name is used for <em>throw-away variables</em> - variables that have to be defined but not actually used (e.g. during unpacking). In your case, you've actually used it. </p>\n"}], "owner": {"reputation": 340, "user_id": 6828137, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/SERVd.jpg?s=128&g=1", "display_name": "p_sutherland", "link": "https://stackoverflow.com/users/6828137/p-sutherland"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 41730990, "answer_count": 1, "score": 1, "last_activity_date": 1484780780, "creation_date": 1484780176, "question_id": 41730945, "link": "https://stackoverflow.com/questions/41730945/how-to-extract-text-from-lxml-etree-tags-based-on-value-of-sibling-tags", "title": "How to extract text from lxml.etree tags based on value of sibling tags", "body": "<p>My objective is to pull urls from an xml document (linked) and put them in a list:\n<a href=\"https://www.valuespreadsheet.com/iedgar/results.php?stock=NFLX&amp;output=xml\" rel=\"nofollow noreferrer\">https://www.valuespreadsheet.com/iedgar/results.php?stock=NFLX&amp;output=xml</a></p>\n\n<p>I imported <code>etree</code> from <code>lxml</code> and created a list comprehension that pulls the text from all <code>&lt;instanceUrl&gt;</code> tags.</p>\n\n<pre><code>url = 'https://valuespreadsheet.com/iedgar/results.php?stock=NFLX&amp;output=xml' \net = etree.fromstring(urlopen(url).read())\nreturn [_.find('instanceUrl').text for _ in et.find('filings')]\n</code></pre>\n\n<p>Now, I want to restrict the list so that it only pulls the text from <code>&lt;instanceUrl&gt;</code> tags where <code>&lt;formType&gt;</code>=10K. </p>\n\n<p>How can I achieve this?</p>\n"}, {"tags": ["python", "opencv", "image-processing", "gaussian", "canny-operator"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user6613600"}, "edited": false, "score": 0, "creation_date": 1484813270, "post_id": 41731271, "comment_id": 70666758, "body": "Similar situation, but in a different discipline - I also use a median filter to remove &#39;hot pixel&#39;distortions."}], "tags": [], "owner": {"reputation": 968, "user_id": 3760875, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/UJd1O.jpg?s=128&g=1", "display_name": "aretor", "link": "https://stackoverflow.com/users/3760875/aretor"}, "is_accepted": true, "score": 2, "last_activity_date": 1484781964, "creation_date": 1484781964, "answer_id": 41731271, "question_id": 41730938, "link": "https://stackoverflow.com/questions/41730938/finding-waters-edge-using-opencv-and-python-accurately/41731271#41731271", "title": "Finding waters edge using OpenCV and Python accurately", "body": "<p>I have worked on a similar problem and I hope these advices can help you in some way:</p>\n\n<ul>\n<li><strong>Try to restrict your search area</strong>: can you make assumptions on where the water level should be? Consider also to have correctly detected the water level. Is it safe to assume that in the next frames the water level will decrease/increase constantly? Will it change slowly? Crop your image in order to take into consideration only the area where it is safe to assume that the water level is present.</li>\n<li><strong>Change color space</strong>: you can try to work in other color spaces like HSV in order to have the brightness separated from the chromaticity</li>\n<li><strong>Hough Transform line detection</strong>: try to use this algorithm to search for specific horizontal lines in the image, or other shapes.</li>\n<li><strong>Image undistortion</strong>: if necessary try to correct the image in order to rectify the curved lines, or cancel the perspective with an Inverse Perspective Mapping (IPM).</li>\n</ul>\n\n<p>You can also consider to change edge detection algorithm.</p>\n"}], "owner": {"reputation": 483, "user_id": 7427817, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/b0fBh.png?s=128&g=1", "display_name": "Barkles", "link": "https://stackoverflow.com/users/7427817/barkles"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1307, "favorite_count": 1, "accepted_answer_id": 41731271, "answer_count": 1, "score": 1, "last_activity_date": 1484781964, "creation_date": 1484780122, "question_id": 41730938, "link": "https://stackoverflow.com/questions/41730938/finding-waters-edge-using-opencv-and-python-accurately", "title": "Finding waters edge using OpenCV and Python accurately", "body": "<p>I have been working on trying to detect the edge of the water using OpenCV/Python, and the results I am getting are fairly inaccurate and there is no robustness. \nThis is what I have achieved so far:\n<a href=\"https://i.stack.imgur.com/HAFOd.jpg\" rel=\"nofollow noreferrer\">Original Image, output image</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/lCJBB.png\" rel=\"nofollow noreferrer\">Canny Edge detection</a></p>\n\n<p>What I am currently doing is setting some variables (the level of Gaussian blur, the sigma used for the Canny edge detection, and the maximum deviation which the level measured can change between each point), performing an 'automatic' Canny edge detection (where the median pixel intensity is measured and used to form the lower and upper boundaries), then moving from the bottom left hand corner upwards to find the first 'white' pixel. This is done in x intervals of five the entire length of the frame. </p>\n\n<p>The average y value of the points is the calculated. Each point is then tested to see if it deviates too far from the average pixel, with the deviation limit being set earlier. The remaining points are then drawn on the image as the blue line. The average value of the drawn pixels is recorded at each frame. </p>\n\n<p>After 30 frames, the average of the averages is calculated and drawn as the red line, which is then assumed to be the 'real' water height. </p>\n\n<p>Has anyone have any ideas on a better way to do this? What would make the edge of the water stand out more? This method works on most footage I have recorded, but with poor results. </p>\n\n<p>Thanks in advance. </p>\n"}, {"tags": ["python", "sql", "django", "generic-relations"], "answers": [{"comments": [{"owner": {"reputation": 361, "user_id": 4205778, "user_type": "registered", "accept_rate": 14, "profile_image": "https://lh3.googleusercontent.com/-67ocuJiNWxI/AAAAAAAAAAI/AAAAAAAAAFQ/fbNxuIQOe1M/photo.jpg?sz=128", "display_name": "Rakin Alam", "link": "https://stackoverflow.com/users/4205778/rakin-alam"}, "edited": false, "score": 0, "creation_date": 1484843435, "post_id": 41732038, "comment_id": 70686531, "body": "won&#39;t this only give me all events with content_type of note, but I also want to include other content types. But if the content type is note then I want to check if active is false."}, {"owner": {"reputation": 361, "user_id": 4205778, "user_type": "registered", "accept_rate": 14, "profile_image": "https://lh3.googleusercontent.com/-67ocuJiNWxI/AAAAAAAAAAI/AAAAAAAAAFQ/fbNxuIQOe1M/photo.jpg?sz=128", "display_name": "Rakin Alam", "link": "https://stackoverflow.com/users/4205778/rakin-alam"}, "edited": false, "score": 0, "creation_date": 1484843743, "post_id": 41732038, "comment_id": 70686734, "body": "Thanks this worked, i justed used exclude instead of filter."}, {"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "reply_to_user": {"reputation": 361, "user_id": 4205778, "user_type": "registered", "accept_rate": 14, "profile_image": "https://lh3.googleusercontent.com/-67ocuJiNWxI/AAAAAAAAAAI/AAAAAAAAAFQ/fbNxuIQOe1M/photo.jpg?sz=128", "display_name": "Rakin Alam", "link": "https://stackoverflow.com/users/4205778/rakin-alam"}, "edited": false, "score": 0, "creation_date": 1484847660, "post_id": 41732038, "comment_id": 70689071, "body": "Oh, yeah it should have been exclude instead of filter.  Updated."}], "tags": [], "owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "is_accepted": true, "score": 3, "last_activity_date": 1484847635, "last_edit_date": 1484847635, "creation_date": 1484787397, "answer_id": 41732038, "question_id": 41730894, "link": "https://stackoverflow.com/questions/41730894/django-genericrelated-field-conditional-query-raising-genericrelation-object-h/41732038#41732038", "title": "Django GenericRelated field conditional Query raising &#39;GenericRelation&#39; object has no attribute &#39;field&#39;", "body": "<p>The usual way to do that using the Django ORM is with a subquery:</p>\n\n<pre><code>Event.objects.exclude(\n    content_type=note_content_type,\n    object_id__in=Notes.objects.filter(active=False),\n)\n</code></pre>\n\n<p>The sad thing is that this <em>can</em> be expressed in SQL with a join instead of a subquery, but the ORM doesn't make that easy.  </p>\n\n<p>In some cases PostgreSQL's query planner can optimize the subquery into a <a href=\"https://en.wikipedia.org/wiki/Hash_join#Hash_semi-join\" rel=\"nofollow noreferrer\">hash semi join</a>, so don't dismiss the subquery in preference to raw SQL without benchmarking on the data.  </p>\n"}, {"tags": [], "owner": {"reputation": 12189, "user_id": 2062318, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/78a27bedd2d3c0cded7b342858475dab?s=128&d=identicon&r=PG", "display_name": "Todor", "link": "https://stackoverflow.com/users/2062318/todor"}, "is_accepted": false, "score": 1, "last_activity_date": 1533742529, "creation_date": 1533742529, "answer_id": 51750571, "question_id": 41730894, "link": "https://stackoverflow.com/questions/41730894/django-genericrelated-field-conditional-query-raising-genericrelation-object-h/51750571#51750571", "title": "Django GenericRelated field conditional Query raising &#39;GenericRelation&#39; object has no attribute &#39;field&#39;", "body": "<p>Another approach is to use <a href=\"https://docs.djangoproject.com/en/2.1/ref/models/conditional-expressions/#conditional-expressions\" rel=\"nofollow noreferrer\">Conditional Expression</a>, e.g.</p>\n\n<pre><code>from django.db import models\nqueryset = Event.objects.all()\nqueryset = queryset.annotate(\n    is_inactive_note=models.Case(\n        models.When(\n            content_type__model='notes',\n            note__active=False,\n            then=models.Value(True),\n        ),\n        default=models.Value(False),\n        output_field=models.BooleanField(),\n    )\n).filter(is_inactive_note=False)\n</code></pre>\n"}], "owner": {"reputation": 361, "user_id": 4205778, "user_type": "registered", "accept_rate": 14, "profile_image": "https://lh3.googleusercontent.com/-67ocuJiNWxI/AAAAAAAAAAI/AAAAAAAAAFQ/fbNxuIQOe1M/photo.jpg?sz=128", "display_name": "Rakin Alam", "link": "https://stackoverflow.com/users/4205778/rakin-alam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1209, "favorite_count": 1, "accepted_answer_id": 41732038, "answer_count": 2, "score": 3, "last_activity_date": 1533742529, "creation_date": 1484779862, "last_edit_date": 1513182635, "question_id": 41730894, "link": "https://stackoverflow.com/questions/41730894/django-genericrelated-field-conditional-query-raising-genericrelation-object-h", "title": "Django GenericRelated field conditional Query raising &#39;GenericRelation&#39; object has no attribute &#39;field&#39;", "body": "<p>I have an event object, there are other objects besides <code>Notes</code> that have a generic relation to <code>Event</code>, and which don't have an active field. Now I want to be able to write a query which excludes all <code>Events</code> where the active field of the <code>Notes</code> is False. So I tried doing the following.</p>\n\n<pre><code>queryset = Event.objects.all()\nfilters = (\n        Q(content_type__model='notes') &amp;\n        Q(note__active=False)\n    )\nqueryset = queryset.exclude(filters)\n</code></pre>\n\n<p>This didn't work because it's running the query separately, and when it tries to execute for items for which there are no content_object or which are not of type <code>Notes</code>, it fails and gives the following error:</p>\n\n<pre><code>AttributeError 'GenericRelation' object has no attribute 'field'.\n</code></pre>\n\n<hr>\n\n<pre><code>class Event(models.Model):\n    content_type = models.ForeignKey(ContentType, null=True, blank=True)\n    object_id = models.PositiveIntegerField(null=True, blank=True)\n    content_object = GenericForeignKey('content_type', 'object_id')\n\nclass Notes(models.Model):\n    active = models.BooleanField(default=True)\n    event_log = GenericRelation(\n        'Event',\n        related_query_name='note'\n    )\n</code></pre>\n"}, {"tags": ["python", "http", "web", "urllib"], "answers": [{"tags": [], "owner": {"reputation": 48100, "user_id": 645551, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/3231cd5016283f6ea5963ab1dfa6e27a?s=128&d=identicon&r=PG", "display_name": "freakish", "link": "https://stackoverflow.com/users/645551/freakish"}, "is_accepted": false, "score": 0, "last_activity_date": 1484780105, "creation_date": 1484780105, "answer_id": 41730932, "question_id": 41730815, "link": "https://stackoverflow.com/questions/41730815/python-request-has-headerheader-always-returns-false/41730932#41730932", "title": "Python: request.has_header(header) always returns false", "body": "<p>Check this out:</p>\n\n<p><strong>urllib2.py</strong></p>\n\n<pre><code>def add_header(self, key, val):\n    # useful for something like authentication\n    self.headers[key.capitalize()] = val\n</code></pre>\n\n<p>Now since setting headers is the same as calling <code>add_header</code> on each one of them you can see that what is happening is that urllib capitalizes each key. So your header is available under exactly this key: <code>Content-type</code>.</p>\n\n<p>Don't ask me why this is done like that. I have no idea.</p>\n"}, {"tags": [], "owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "is_accepted": false, "score": 2, "last_activity_date": 1484780121, "creation_date": 1484780121, "answer_id": 41730937, "question_id": 41730815, "link": "https://stackoverflow.com/questions/41730815/python-request-has-headerheader-always-returns-false/41730937#41730937", "title": "Python: request.has_header(header) always returns false", "body": "<p>Headers are <em>not</em> matched case-insensitive. The headers are added normalised as capitalised strings (initial letter uppercase, rest lowercase), so testing for <code>Content-type</code> works:</p>\n\n<pre><code>&gt;&gt;&gt; list(req.headers)\n['Content-type', 'Connection', 'User-agent']\n&gt;&gt;&gt; req.has_header('Content-type')\nTrue\n</code></pre>\n\n<p>Yes, this is overly simplistic, but suffices for the internal uses of headers in the module.</p>\n"}, {"comments": [{"owner": {"reputation": 894, "user_id": 6167697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-GBr58sersRg/AAAAAAAAAAI/AAAAAAAAC1M/jDqUc3eKvWw/photo.jpg?sz=128", "display_name": "Nathan Blair", "link": "https://stackoverflow.com/users/6167697/nathan-blair"}, "edited": false, "score": 0, "creation_date": 1484780866, "post_id": 41730951, "comment_id": 70656454, "body": "This worked. I did not anticipate that the second hyphenated word would not be capitalized like the first. Looking at some example headers with Firebug suggested that both of the words would be capitalized but it seems that it not the case for this application. Do you know if the case-sensitivity applies for when the headers are declared too? e.g. when I declare    head = {&#39;Content-type&#39;: ....}?  Appreciate the help!"}, {"owner": {"reputation": 321, "user_id": 1792694, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/weS5j.jpg?s=128&g=1", "display_name": "Adeola Bannis", "link": "https://stackoverflow.com/users/1792694/adeola-bannis"}, "reply_to_user": {"reputation": 894, "user_id": 6167697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-GBr58sersRg/AAAAAAAAAAI/AAAAAAAAC1M/jDqUc3eKvWw/photo.jpg?sz=128", "display_name": "Nathan Blair", "link": "https://stackoverflow.com/users/6167697/nathan-blair"}, "edited": false, "score": 0, "creation_date": 1484874847, "post_id": 41730951, "comment_id": 70701422, "body": "It seems the headers you declare are transformed to title case by the urllib Request object (not Python). I&#39;m not sure whether it happens before the request is sent out on the network, but I don&#39;t think it matters to the server."}], "tags": [], "owner": {"reputation": 321, "user_id": 1792694, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/weS5j.jpg?s=128&g=1", "display_name": "Adeola Bannis", "link": "https://stackoverflow.com/users/1792694/adeola-bannis"}, "is_accepted": true, "score": 3, "last_activity_date": 1484780208, "creation_date": 1484780208, "answer_id": 41730951, "question_id": 41730815, "link": "https://stackoverflow.com/questions/41730815/python-request-has-headerheader-always-returns-false/41730951#41730951", "title": "Python: request.has_header(header) always returns false", "body": "<p>Did you try (note that 'type' is lowercase):</p>\n\n<pre><code>req.has_header('Content-type')\n</code></pre>\n\n<p>If you use req.header_items(), you can see that the header keys have the first letter (and only the first letter) capitalized.</p>\n"}], "owner": {"reputation": 894, "user_id": 6167697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-GBr58sersRg/AAAAAAAAAAI/AAAAAAAAC1M/jDqUc3eKvWw/photo.jpg?sz=128", "display_name": "Nathan Blair", "link": "https://stackoverflow.com/users/6167697/nathan-blair"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 551, "favorite_count": 0, "accepted_answer_id": 41730951, "answer_count": 3, "score": 0, "last_activity_date": 1484780208, "creation_date": 1484779481, "question_id": 41730815, "link": "https://stackoverflow.com/questions/41730815/python-request-has-headerheader-always-returns-false", "title": "Python: request.has_header(header) always returns false", "body": "<p>Using the urllib in python 3.6, I have created a request and applied headers to it. However, Python appears to completely ignore that directive and when I run </p>\n\n<pre><code>req.has_header('Content-Type')\n</code></pre>\n\n<p>the result is false. This goes for other headers as well, except for 'Connection'. Interestingly, 'connection' returns false as well. I have not been able to find a good resource for how precisely to declare headers in Python that consistently work (and Python is apparently being extremely case-sensitive about header names), so if anyone has any recommendations I'd be interested to hear them!</p>\n\n<p>My relevant source is:</p>\n\n<pre><code>head = {\n    'content-type': 'application/x-www-form-urlencoded',\n    'connection': 'keep-alive',\n    'user-agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_9_3) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/35.0.1916.47 Safari/537.36'\n}\n\nreq = Request(url, post_bytes, head)\nprint(req.has_header('content-type')\n</code></pre>\n\n<p>Substitute 'content-type' for any of the other given headers and the result is still false. Its almost like the default python request includes no headers but...surely that wouldn't be the case? </p>\n\n<p>Thanks for any insight!</p>\n"}, {"tags": ["python", "python-3.x", "sockets", "chat"], "comments": [{"owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 0, "creation_date": 1484780054, "post_id": 41730814, "comment_id": 70656207, "body": "You&#39;re doing it wrong. Each client should only communicate with the server, not with peers."}, {"owner": {"reputation": 81, "user_id": 6584923, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/93d8dd4e134299c4b1bfe27f17fe737a?s=128&d=identicon&r=PG&f=1", "display_name": "Tarrell13", "link": "https://stackoverflow.com/users/6584923/tarrell13"}, "reply_to_user": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 0, "creation_date": 1484780673, "post_id": 41730814, "comment_id": 70656398, "body": "Ohhhhhhhhhhh see I thought that too. I thought since its the server shouldn&#39;t only clients send data to it and then the server prints out what it is receiving from them."}], "owner": {"reputation": 81, "user_id": 6584923, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/93d8dd4e134299c4b1bfe27f17fe737a?s=128&d=identicon&r=PG&f=1", "display_name": "Tarrell13", "link": "https://stackoverflow.com/users/6584923/tarrell13"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 93, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1484779481, "creation_date": 1484779481, "question_id": 41730814, "link": "https://stackoverflow.com/questions/41730814/socket-python-exchange", "title": "Socket Python Exchange", "body": "<p>I am trying to build a TCP Chat Program that is multithreaded. So far I think most of the functions are setup fine. When starting the server and connecting with a client only responses sent from the server are broadcasted to all clients connected. I think I figured out why that is and it comes from the CONNECTION_LIST array I have. The server appends all clients to this list and I thought I had the same thing going for the clients but the client instance never sees this list so when sending messages they messages aren't sent anywhere. I basically need a way to copy the CONNECTION_list from the server instance over to the connected clients. I been trying figure out how to possibly do this all day and its driving me crazy. </p>\n\n<pre><code>import socket\nimport platform\nimport threading\nimport sys\nimport time\nimport os\n\n'''Define Globals'''\nHOST = \"\"\nPORT = 25000\nADDR = (HOST, PORT)\nCONNECTION_LIST = []\nserver = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\n\n'''Connect Client to the Server'''\ndef client_connect():\n\n    server_ip = input(\"[+] Server's IP to connect to: \")\n    client = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\n\n    try:\n        client.connect((server_ip, PORT))\n        print(\"[+] Connected to Server at address: %s\" %client.getpeername()[0])\n    except ConnectionRefusedError:\n        print(\"[*] No Server Listening at Specified Address\")\n        sys.exit()\n\n    communicate(client)\n\n\n'''Threaded loop to continue listening for new connections'''\ndef server_loop():\n\n    server.bind(ADDR)\n    server.listen(10)\n\n    print(\"[*] Server started on %s\" %platform.node())\n\n    while True:\n        client_socket, client_addr = server.accept()\n        CONNECTION_LIST.append(client_socket)\n        print(\"\\r[+] New Connection from: %s\" %client_addr[0])\n\n\n'''Broadcast data to all clients except sender'''\ndef broadcast_data(sock, message):\n\n    for socket in CONNECTION_LIST:\n        if socket != server and socket != sock:\n            try:\n                socket.send(str.encode(\"[%s] =&gt; %s\" %(os.getlogin(),message)))\n            except:\n                socket.close()\n                CONNECTION_LIST.remove(socket)\n\n\n'''Server Host Connect Back'''\ndef self_connect():\n\n    sc = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\n    sc.connect((\"localhost\", 25000))\n    CONNECTION_LIST.append(sc)\n    communicate(sc)\n\n\ndef communicate(client):\n\n    dump_thread = threading.Thread(target=dump, args=(client,))\n    dump_thread.start()\n\n    while True:\n        try:\n            time.sleep(0.5)\n            data = input(\"&gt; \")\n            broadcast_data(client, data)\n        except:\n            print(\"[*] Error - Program Terminating\")\n            client.close()\n            sys.exit()\n\ndef dump(client):\n    while True:\n        print(client.recv(1024).decode(\"utf-8\"))\n\n\ndef main():\n\n   server_thread = threading.Thread(target=server_loop)\n\n   while True:\n\n       try:\n            print(\"Select Operating Mode\")\n            print(\"---------------------\")\n            print(\"1. Server Mode\")\n            print(\"2. Client Mode\")\n            mode = int(input(\"Enter mode of operation: \"))\n            print(\"\\n\\n\")\n            if mode in [1,2]:\n                break\n            else:\n                raise ValueError\n       except ValueError:\n           print(\"Enter either (1) for Server or (2) for Client\")\n\n\n   if mode == 1:\n        server_thread.start()\n        time.sleep(1)\n        self_connect()\n   elif mode == 2:\n       client_connect()\n\n\nmain()\n</code></pre>\n"}, {"tags": ["python", "python-2.7", "pygame"], "comments": [{"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 1, "creation_date": 1484780585, "post_id": 41730748, "comment_id": 70656375, "body": "BTW: yoy should  create flipped image at start and not waste time to flip it during game."}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1484781129, "post_id": 41730748, "comment_id": 70656545, "body": "put many <code>print()</code> in code to see which part of code is executed and what values you have in variables. I probably see that some <code>if&#47;else</code> does thing which you didn&#39;t expect. ie. you never check if you doesn&#39;t flip already flipped image in previous frame. better create all flipped images at start anf keep all in dictionary so you can easily get <code>images[&#39;left&#39;][&#39;jump&#39;]</code> or <code>images[&#39;rigth&#39;][&#39;jump&#39;]</code> or <code>images[self.facing][&#39;jump&#39;]</code>"}], "owner": {"reputation": 1, "user_id": 7438160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/232f3a1fc75495a46e0c33484544636b?s=128&d=identicon&r=PG&f=1", "display_name": "zool", "link": "https://stackoverflow.com/users/7438160/zool"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 272, "favorite_count": 0, "closed_date": 1611325206, "answer_count": 0, "score": 0, "last_activity_date": 1484779193, "creation_date": 1484779193, "question_id": 41730748, "link": "https://stackoverflow.com/questions/41730748/pygame-transform-flip-method-flipping-image-twice", "closed_reason": "Duplicate", "title": "Pygame.transform.flip method flipping image twice?", "body": "<p>Here's a fragment of my code of a simple platformer game in python using pygame library:</p>\n\n<pre><code>    def animate(self):\n    if self.jumping and not self.onplatform:\n        if self.small:\n            self.image = self.jumpingimage_small\n        else:\n            self.image = self.jumpingimage\n    elif (self.left or self.right) and not self.small:\n        self.counter +=1\n        if self.counter == 1:\n            self.image = self.walkingimage[1]\n        elif self.counter == 5:\n            self.image = self.walkingimage[2]\n        elif self.counter == 9:\n            self.image = self.walkingimage[3]\n        elif self.counter == 13:\n            self.counter = 0\n    elif not (self.left or self.right):\n        if not self.small:\n            self.image = self.normalimage\n        else:\n            self.image = self.smallimage\n    if self.facing == \"left\":\n            self.image = pygame.transform.flip(self.image,True,False)\n            self.flipped = True\n</code></pre>\n\n<p>What it is supposed to do is to animate my sprite of a player object. It has one sprite for jumping, one for standing still, and 3 walking frames named self.walkingimage[1] , [2] and [3] respectively.</p>\n\n<p>At the end i call the pygame method pygame.transform.flip() that is supposed to flip all the sprites when the player is facing left ( they are originally all facing right)</p>\n\n<p>So i assign an image ( Pygame Surface ? ) to a self.image attribute out of the list of unchanged base sprites ( all facing to the right).</p>\n\n<p>It all works fine for sprites with only one animation frame as jumping and normal ( standing still), but when i try it on moving, it rapidly changes back and forth between standard image and the flipped one. It is not the case of bliting because i do that after i assign and optionally flip my image. </p>\n\n<p>Im posting it here because i can't for the life of me find the error. Am i using the flip() method in a wrong way?</p>\n"}, {"tags": ["python", "python-2.7", "twisted", "autobahn"], "owner": {"reputation": 1114, "user_id": 1706058, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c06364ef45875fe2cdead3c8cf0432ca?s=128&d=identicon&r=PG", "display_name": "Devester", "link": "https://stackoverflow.com/users/1706058/devester"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 313, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1484778676, "creation_date": 1484778676, "question_id": 41730644, "link": "https://stackoverflow.com/questions/41730644/slow-response-time-from-twisted-web-server", "title": "Slow response time from Twisted Web Server", "body": "<p>I've created a web server using Twisted to handle requests for a \"real time\" game.\nThe server loops at 60hz on a separated Thread and updates all the clients. </p>\n\n<p>Setup:</p>\n\n<ul>\n<li>Twisted 16.6.0</li>\n<li>Debian 64 bits </li>\n<li>Python 2.7.12</li>\n</ul>\n\n<p>The problem is <strong>when no messages are sent from the clients</strong>, the sever starts to respond <strong>every 1 second</strong> instead of 60 times per second affecting all clients. As soon as at least one client starts to send messages (such as mouse position at 60hz) everything works fine. That happens even with only one client is connected.</p>\n\n<p>I've tested both <a href=\"http://twistedmatrix.com/documents/11.0.0/core/howto/choosing-reactor.html#poll\" rel=\"nofollow noreferrer\">reactors</a> <code>select()</code> and <code>poll</code> but no luck.</p>\n\n<p>That's how the reactor gets started:</p>\n\n<pre><code>        if __name__ == \"__main__\":\n            log.startLogging(sys.stdout)\n\n            factory = AppGameFactory(u\"ws://127.0.0.1:8080\")\n            factory.protocol = AppGameServerProtocol\n            resource = WebSocketResource(factory)\n\n            # websockets resource on \"/ws\" path\n            root.putChild(u\"ws\", resource)\n\n            site = Site(root)\n            reactor.listenTCP(8080, site)\n            reactor.run()\n</code></pre>\n\n<p>Any ideias? Am I missing anything?</p>\n"}, {"tags": ["python", "pandas", "dataframe"], "answers": [{"comments": [{"owner": {"reputation": 123, "user_id": 6845969, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8c5fbe000283edf30190a7db636fbef9?s=128&d=identicon&r=PG&f=1", "display_name": "Kai", "link": "https://stackoverflow.com/users/6845969/kai"}, "edited": false, "score": 0, "creation_date": 1484783958, "post_id": 41730676, "comment_id": 70657434, "body": "Thanks for your help!"}], "tags": [], "owner": {"reputation": 619481, "user_id": 2901002, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/hMDvl.jpg?s=128&g=1", "display_name": "jezrael", "link": "https://stackoverflow.com/users/2901002/jezrael"}, "is_accepted": false, "score": 3, "last_activity_date": 1484778822, "creation_date": 1484778822, "answer_id": 41730676, "question_id": 41730613, "link": "https://stackoverflow.com/questions/41730613/how-to-edit-several-elements-in-df-columns/41730676#41730676", "title": "How to edit several elements in df.columns", "body": "<p>I think you can use <code>list comprehension</code>:</p>\n\n<pre><code>print (df.columns.tolist())\n['a', 'b', 2006.0, 2005.0, 1995.0]\n\nprint ([int(col) if type(col) == float else col for col in df.columns])\n['a', 'b', 2006, 2005, 1995]\n\ndf.columns =  [int(col) if type(col) == float else col for col in df.columns]\n['a', 'b', 2006, 2005, 1995]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 123, "user_id": 6845969, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8c5fbe000283edf30190a7db636fbef9?s=128&d=identicon&r=PG&f=1", "display_name": "Kai", "link": "https://stackoverflow.com/users/6845969/kai"}, "edited": false, "score": 0, "creation_date": 1484783948, "post_id": 41730686, "comment_id": 70657431, "body": "Thanks for your help!"}], "tags": [], "owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "is_accepted": true, "score": 7, "last_activity_date": 1484778870, "creation_date": 1484778870, "answer_id": 41730686, "question_id": 41730613, "link": "https://stackoverflow.com/questions/41730613/how-to-edit-several-elements-in-df-columns/41730686#41730686", "title": "How to edit several elements in df.columns", "body": "<p>You can do this:</p>\n\n<pre><code>In [49]: df\nOut[49]:\n   a  b  2006.0  2005.0\n0  1  1       1       1\n1  2  2       2       2\n\nIn [50]: df.columns.tolist()\nOut[50]: ['a', 'b', 2006.0, 2005.0]\n\nIn [51]: df.rename(columns=lambda x: int(x) if type(x) == float else x)\nOut[51]:\n   a  b  2006  2005\n0  1  1     1     1\n1  2  2     2     2\n</code></pre>\n"}], "owner": {"reputation": 123, "user_id": 6845969, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8c5fbe000283edf30190a7db636fbef9?s=128&d=identicon&r=PG&f=1", "display_name": "Kai", "link": "https://stackoverflow.com/users/6845969/kai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "accepted_answer_id": 41730686, "answer_count": 2, "score": 3, "last_activity_date": 1484778904, "creation_date": 1484778567, "last_edit_date": 1484778904, "question_id": 41730613, "link": "https://stackoverflow.com/questions/41730613/how-to-edit-several-elements-in-df-columns", "title": "How to edit several elements in df.columns", "body": "<p>For example, the elements of the columns is <code>['a', 'b', 2006.0, 2005.0, ... ,1995.0]</code></p>\n\n<p>Now, I hope to change the float to int, so the correct elements of the columns should be <code>['a', 'b', 2006, 2005, ... , 1995]</code></p>\n\n<p>Since there are many numbers here, I don't think <code>rename(columns={'old name': 'new name'})</code> is a good idea. Can anyone tell me how to edit it?</p>\n"}, {"tags": ["python", "openerp", "qweb"], "comments": [{"owner": {"reputation": 692, "user_id": 4832607, "user_type": "registered", "profile_image": "https://graph.facebook.com/1624987127720142/picture?type=large", "display_name": "Majikat", "link": "https://stackoverflow.com/users/4832607/majikat"}, "edited": false, "score": 1, "creation_date": 1484808801, "post_id": 41730593, "comment_id": 70664707, "body": "I don&#39;t really understand your question. Do you ask for a way so that when you create a new record of <code>fleet.vehicle.log.services</code> those two new fields will then have a default value on them ? Or that you already have tons of <code>fleet.vehicle.log.services</code> records and want those to have these default values ?"}, {"owner": {"reputation": 3765, "user_id": 2089267, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/44215d587ff1f8bc581d4098bfec2154?s=128&d=identicon&r=PG&f=1", "display_name": "NeoVe", "link": "https://stackoverflow.com/users/2089267/neove"}, "reply_to_user": {"reputation": 692, "user_id": 4832607, "user_type": "registered", "profile_image": "https://graph.facebook.com/1624987127720142/picture?type=large", "display_name": "Majikat", "link": "https://stackoverflow.com/users/4832607/majikat"}, "edited": false, "score": 0, "creation_date": 1484819447, "post_id": 41730593, "comment_id": 70670392, "body": "Hi, to create a new record of the model, and those two new fields will have a default value on them :)"}], "answers": [{"comments": [{"owner": {"reputation": 3765, "user_id": 2089267, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/44215d587ff1f8bc581d4098bfec2154?s=128&d=identicon&r=PG&f=1", "display_name": "NeoVe", "link": "https://stackoverflow.com/users/2089267/neove"}, "edited": false, "score": 0, "creation_date": 1484828681, "post_id": 41733218, "comment_id": 70676129, "body": "Hi, Thank You very much, awesome explanation, I still don&#39;t have results, but I&#39;ll open a new question for that!"}, {"owner": {"reputation": 11032, "user_id": 3146213, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IbhfG.jpg?s=128&g=1", "display_name": "CZoellner", "link": "https://stackoverflow.com/users/3146213/czoellner"}, "edited": false, "score": 0, "creation_date": 1484914678, "post_id": 41733218, "comment_id": 70718388, "body": "A really awesome answer!"}], "tags": [], "owner": {"reputation": 3190, "user_id": 4313055, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xmPwf.jpg?s=128&g=1", "display_name": "Phillip Stack", "link": "https://stackoverflow.com/users/4313055/phillip-stack"}, "is_accepted": true, "score": 3, "last_activity_date": 1484796898, "last_edit_date": 1484796898, "creation_date": 1484796587, "answer_id": 41733218, "question_id": 41730593, "link": "https://stackoverflow.com/questions/41730593/programmatically-add-default-data-to-custom-module-odoo-v9-community/41733218#41733218", "title": "Programmatically add default data to custom module - Odoo v9 community", "body": "<p>In the new api you can override the field from the inherited model and assign a default value either using a static value or a function. Here is an example</p>\n\n<pre><code>class Partner(models.Model):\n    _inherit = 'res.partner'\n</code></pre>\n\n<p>ASSIGNING A STATIC DEFAULT VALUE</p>\n\n<pre><code>    email = fields.Char(default='static@value.com')\n</code></pre>\n\n<p>ASSIGNING A PROGRAMMATIC DEFAULT VALUE</p>\n\n<pre><code>    def _email_default(self):\n        return 'programmatic@value.com'\n\n    email = fields.Char(default=_email_default)\n</code></pre>\n\n<p>Using the old api you can do something similar, using a different syntax.</p>\n\n<pre><code>class Partner(osv.osv):\n    _inherit = 'res.partner'\n\n    _columns = {\n        'email': fields.char('Email')  \n    }\n</code></pre>\n\n<p>PROGRAMMATIC MEANS OF ASSIGNING DEFAULT VALUE</p>\n\n<pre><code>    def _email_default(self, cr, uid, ctx={}):\n        return 'programmatic@value.com'\n\n    _defaults = {\n        'email': _email_default,\n    }\n</code></pre>\n\n<p>STATIC METHOD OF ASSIGNING A DEFAULT VALUE</p>\n\n<pre><code>    _defaults = {\n        'email': 'static@value.com',\n    }\n</code></pre>\n"}], "owner": {"reputation": 3765, "user_id": 2089267, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/44215d587ff1f8bc581d4098bfec2154?s=128&d=identicon&r=PG&f=1", "display_name": "NeoVe", "link": "https://stackoverflow.com/users/2089267/neove"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 342, "favorite_count": 0, "accepted_answer_id": 41733218, "answer_count": 1, "score": 0, "last_activity_date": 1484796898, "creation_date": 1484778511, "question_id": 41730593, "link": "https://stackoverflow.com/questions/41730593/programmatically-add-default-data-to-custom-module-odoo-v9-community", "title": "Programmatically add default data to custom module - Odoo v9 community", "body": "<p>I have a custom module, which inherits <code>fleet.vehicle.log.services</code> model</p>\n\n<p>This is a custom module.</p>\n\n<p>What I'm trying to do, is to add default data to just two fields of it, let me explain myself.</p>\n\n<p>The model has these mandatory fields:</p>\n\n<pre><code>vehicle_id\ncost_id\ncost_type\n</code></pre>\n\n<p>And I've inherited/added these ones:</p>\n\n<pre><code>x_location_src_id\nx_location_dest_id\n</code></pre>\n\n<p>These are <code>stock</code> locations, what I want is to add default stock locations to this model, but just the locations, not the mandatory fields.</p>\n\n<p>So far, I've tried like this, in my <code>data/location_data.xml</code> file:</p>\n\n<pre><code>&lt;record id=\"location_default\" model=\"fleet.vehicle.log.services\"&gt;\n    &lt;field name=\"vehicle_id\"&gt;1&lt;/field&gt;\n    &lt;field name=\"cost_id\"&gt;2&lt;/field&gt;\n    &lt;field name=\"cost_type\"&gt;fuel&lt;/field&gt;\n    &lt;field name=\"x_location_src_id\"&gt;ReparacionUnidades&lt;/field&gt;\n    &lt;field name=\"x_location_dest_id\"&gt;ReparacionUnidades&lt;/field&gt;\n&lt;/record&gt;\n</code></pre>\n\n<p>But it doesn't work for me, because, as I've said, I don't need the first three fields, just the last two ones.</p>\n\n<p>So, as this is the only way to add default data by QWeb/XMl, I think there is a way to overcome this, by some <code>attributes</code> or maybe programmatically with python.</p>\n\n<p>Do You have a clue on how to do it in some other way?</p>\n\n<p>As I said, I want to bypass the fact that I have to add these other fields, because it makes no sense to me.</p>\n\n<p>Any ideas?</p>\n\n<p>Maybe some logic or attributes into <code>stock.locations</code> and not directly into this <code>fleet.vehicle.log.services</code> model?</p>\n"}, {"tags": ["python", "numpy", "dictionary", "slice"], "comments": [{"owner": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "edited": false, "score": 2, "creation_date": 1484778419, "post_id": 41730519, "comment_id": 70655591, "body": "You could create slices: <a href=\"https://docs.python.org/3/library/functions.html#slice\" rel=\"nofollow noreferrer\">docs.python.org/3/library/functions.html#slice</a>"}, {"owner": {"reputation": 2386, "user_id": 5550203, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2588a3f1b1a7705f3d3a4312823c22a?s=128&d=identicon&r=PG&f=1", "display_name": "Arnold Klein", "link": "https://stackoverflow.com/users/5550203/arnold-klein"}, "reply_to_user": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "edited": false, "score": 0, "creation_date": 1484778770, "post_id": 41730519, "comment_id": 70655726, "body": "@IljaEveril&#228;, thanks! While I was reading how to implement it, Uriel Eli did an amazing job. thank you guys!"}, {"owner": {"reputation": 130643, "user_id": 3923281, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CNpoa.jpg?s=128&g=1", "display_name": "Alex Riley", "link": "https://stackoverflow.com/users/3923281/alex-riley"}, "edited": false, "score": 1, "creation_date": 1484820417, "post_id": 41730519, "comment_id": 70671037, "body": "See also <a href=\"http://stackoverflow.com/questions/30244731/numpy-slice-notation-in-a-dictionary/30244830\" title=\"numpy slice notation in a dictionary\">stackoverflow.com/questions/30244731/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 2386, "user_id": 5550203, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2588a3f1b1a7705f3d3a4312823c22a?s=128&d=identicon&r=PG&f=1", "display_name": "Arnold Klein", "link": "https://stackoverflow.com/users/5550203/arnold-klein"}, "edited": false, "score": 0, "creation_date": 1484778708, "post_id": 41730602, "comment_id": 70655707, "body": "I felt I was close :) Many thanks for your solution!!"}], "tags": [], "owner": {"reputation": 13815, "user_id": 6575931, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-CumJFhlEBdA/AAAAAAAAAAI/AAAAAAAAi5U/sqexnazvXek/photo.jpg?sz=128", "display_name": "Uriel", "link": "https://stackoverflow.com/users/6575931/uriel"}, "is_accepted": true, "score": 3, "last_activity_date": 1484778542, "creation_date": 1484778542, "answer_id": 41730602, "question_id": 41730519, "link": "https://stackoverflow.com/questions/41730519/slicing-numpy-array-with-dictionary/41730602#41730602", "title": "Slicing NumPy array with dictionary", "body": "<p>Create <a href=\"https://docs.python.org/3/library/functions.html#slice\" rel=\"nofollow noreferrer\"><code>slice</code></a>s:</p>\n\n<pre><code>&gt;&gt;&gt; index_dict = {'all_except_first': slice(1, None), 'all_except_last': slice(None, -1)}\n&gt;&gt;&gt;\n&gt;&gt;&gt; a[index_dict['all_except_first']]\narray([9, 1, 5, 5])\n&gt;&gt;&gt; a[index_dict['all_except_last']]\narray([3, 9, 1, 5])\n</code></pre>\n"}], "owner": {"reputation": 2386, "user_id": 5550203, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2588a3f1b1a7705f3d3a4312823c22a?s=128&d=identicon&r=PG&f=1", "display_name": "Arnold Klein", "link": "https://stackoverflow.com/users/5550203/arnold-klein"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 144, "favorite_count": 0, "accepted_answer_id": 41730602, "answer_count": 1, "score": 1, "last_activity_date": 1484778542, "creation_date": 1484778141, "question_id": 41730519, "link": "https://stackoverflow.com/questions/41730519/slicing-numpy-array-with-dictionary", "title": "Slicing NumPy array with dictionary", "body": "<p>Is there a simple option to slice a NumPy array with the predefined dictionary of indices?</p>\n\n<p>For example:</p>\n\n<pre><code>&gt;&gt; a = array([3, 9, 1, 5, 5])\n</code></pre>\n\n<p>and (fictitious) dictionary:</p>\n\n<pre><code>&gt;&gt; index_dict = {'all_except_first': (1:None), 'all_except_last': (None:-1)}\n</code></pre>\n\n<p>and then:</p>\n\n<pre><code>&gt;&gt; a[index_dict['all_except_first']]\n&gt;&gt; array([9, 1, 5, 5])\n&gt;&gt; a[index_dict['all_except_first']]\n&gt;&gt; array([3, 9, 1, 5])\n</code></pre>\n\n<p>Sort of slicing with names and not with numbers.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1484778506, "post_id": 41730516, "comment_id": 70655629, "body": "Yeah your text is just text. Reading it in will result in a <code>str</code>, not whatever data structure is represented by the string. Also, why the <code>try ... except</code> for appending to lines? Anyway, that whole thing could replaced by <code>lines = f.readlines()</code>"}, {"owner": {"reputation": 1986, "user_id": 4180276, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f34129a97d735e6e19247c911626cb9a?s=128&d=identicon&r=PG&f=1", "display_name": "nadermx", "link": "https://stackoverflow.com/users/4180276/nadermx"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1484778719, "post_id": 41730516, "comment_id": 70655712, "body": "@juanpa.arrivillaga so is there anyway to convert it to what it is instead of a string?"}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1484778855, "post_id": 41730516, "comment_id": 70655761, "body": "You&#39;re solving the problem at the wrong end; why is it serialised like that to start with?"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "reply_to_user": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 1, "creation_date": 1484778903, "post_id": 41730516, "comment_id": 70655779, "body": "@jonrsharpe exactly. someone should have used <code>pickle</code>. Nevertheless, you could just use <code>eval</code>, if you trust the source. It is a hack and inherently unsafe if you don&#39;t trust the source."}, {"owner": {"reputation": 824, "user_id": 4545530, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b31967fe4702f501fc7ef3df61d408e?s=128&d=identicon&r=PG&f=1", "display_name": "mkiever", "link": "https://stackoverflow.com/users/4545530/mkiever"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1484779156, "post_id": 41730516, "comment_id": 70655883, "body": "@juanpa.arrivillaga I was about to also give the hint to use <code>eval</code> (with the necessary caution) but this need not work. The constructor of <code>ImmutableOrderedMultiDict</code> must be able to work on such a list. That&#39;s probable but not automatic."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "reply_to_user": {"reputation": 824, "user_id": 4545530, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b31967fe4702f501fc7ef3df61d408e?s=128&d=identicon&r=PG&f=1", "display_name": "mkiever", "link": "https://stackoverflow.com/users/4545530/mkiever"}, "edited": false, "score": 0, "creation_date": 1484779204, "post_id": 41730516, "comment_id": 70655901, "body": "@mkiever we can only speculate."}, {"owner": {"reputation": 1986, "user_id": 4180276, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f34129a97d735e6e19247c911626cb9a?s=128&d=identicon&r=PG&f=1", "display_name": "nadermx", "link": "https://stackoverflow.com/users/4180276/nadermx"}, "edited": false, "score": 0, "creation_date": 1484779223, "post_id": 41730516, "comment_id": 70655907, "body": "<code>eval</code> seems to do the trick"}, {"owner": {"reputation": 7342, "user_id": 217723, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f452e7450ed34475e73fd66f8186d1b5?s=128&d=identicon&r=PG", "display_name": "yedpodtrzitko", "link": "https://stackoverflow.com/users/217723/yedpodtrzitko"}, "edited": false, "score": 0, "creation_date": 1484779366, "post_id": 41730516, "comment_id": 70655968, "body": "please dont use <code>eval</code>, it&#39;s totally unsafe thing to do."}, {"owner": {"reputation": 7342, "user_id": 217723, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f452e7450ed34475e73fd66f8186d1b5?s=128&d=identicon&r=PG", "display_name": "yedpodtrzitko", "link": "https://stackoverflow.com/users/217723/yedpodtrzitko"}, "edited": false, "score": 0, "creation_date": 1484779425, "post_id": 41730516, "comment_id": 70655991, "body": "a generic advice - store the data in the file as something else, for example <code>json</code>. Then load the data via <code>json.loads()</code>"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "reply_to_user": {"reputation": 7342, "user_id": 217723, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f452e7450ed34475e73fd66f8186d1b5?s=128&d=identicon&r=PG", "display_name": "yedpodtrzitko", "link": "https://stackoverflow.com/users/217723/yedpodtrzitko"}, "edited": false, "score": 0, "creation_date": 1484779617, "post_id": 41730516, "comment_id": 70656052, "body": "@yedpodtrzitko You could parse out the list inside the constructor and then do something like <code>ImmutableOrderedMultiDict(ast.literal_eval(parsed))</code> to try to be safer about it. Regardless, as you&#39;ve implied, and as jonrsharpe explicitly stated, this is a problem being solved at the wrong end. The data should be serialized some other way (<code>JSON</code>, <code>pickle</code> etc). However, sometimes people don&#39;t have the luxury to change something like that and are being left to clean up someone else mess."}, {"owner": {"reputation": 1986, "user_id": 4180276, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f34129a97d735e6e19247c911626cb9a?s=128&d=identicon&r=PG&f=1", "display_name": "nadermx", "link": "https://stackoverflow.com/users/4180276/nadermx"}, "edited": false, "score": 0, "creation_date": 1484780091, "post_id": 41730516, "comment_id": 70656224, "body": "Yeah, I understand, its my mess I&#39;m trying to clean up given that this was code I wrote a couple years ago when I first got started."}], "answers": [{"tags": [], "owner": {"reputation": 1986, "user_id": 4180276, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f34129a97d735e6e19247c911626cb9a?s=128&d=identicon&r=PG&f=1", "display_name": "nadermx", "link": "https://stackoverflow.com/users/4180276/nadermx"}, "is_accepted": false, "score": 0, "last_activity_date": 1484781502, "creation_date": 1484781502, "answer_id": 41731191, "question_id": 41730516, "link": "https://stackoverflow.com/questions/41730516/read-text-file-with-immutableorderedmultidict-and-parse-in-python-as-dict/41731191#41731191", "title": "Read text file with ImmutableOrderedMultiDict and parse in python as dict", "body": "<p>As posted in the comments by @juanpa.arrivillaga suggested the <code>eval</code> did the trick</p>\n"}], "owner": {"reputation": 1986, "user_id": 4180276, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f34129a97d735e6e19247c911626cb9a?s=128&d=identicon&r=PG&f=1", "display_name": "nadermx", "link": "https://stackoverflow.com/users/4180276/nadermx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 116, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1484781502, "creation_date": 1484778137, "question_id": 41730516, "link": "https://stackoverflow.com/questions/41730516/read-text-file-with-immutableorderedmultidict-and-parse-in-python-as-dict", "title": "Read text file with ImmutableOrderedMultiDict and parse in python as dict", "body": "<p>I currently have a text file full of lines with the following data</p>\n\n<pre><code>ImmutableOrderedMultiDict([('txn_type', u'subscr_signu'), ('subscr_id', u'123123'), ('last_name', u'nar'), ('residence_country', u'US'), ('mc_currency', u'USD'), ('item_name', u'Upgrade'), ('business', u'example@example.com'), ('amount3', u'5.00'), ('recurring', u'1'), ('verify_sign', u'asdfasdddd'), ('payer_status', u'verified'), ('test_ipn', u'1'), ('payer_email', u'john@example.com'), ('first_name', u'John'), ('receiver_email', u'email@example.com'), ('payer_id', u'1N1nn'), ('reattempt', u'1'), ('charset', u'windows-1252'), ('notify_version', u'3.8'), ('period3', u'1 M'), ('mc_amount3', u'5.00'), ('ipn_track_id', u'123111111111')])\n</code></pre>\n\n<p>This is in <code>out.txt</code> I'm trying to have my python program print the <code>txn_type</code> but keep getting \n<code>TypeError: string indices must be integers, not str</code></p>\n\n<pre><code>from werkzeug.datastructures import ImmutableOrderedMultiDict\nlines = []\n\nwith open(\"out.txt\") as f:\n    for line in f:\n        try:\n            lines.append(line)\n        except:\n            pass\n\nfor i in lines:\n    print(i['txn_type'])\n    break\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "csv", "pandas", "spyder"], "comments": [{"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1484778334, "post_id": 41730514, "comment_id": 70655560, "body": "Please tell us what <code>type(GDP)</code> reports."}, {"owner": {"reputation": 23, "user_id": 7298348, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a3049816fa029a8f7544a487a4c99d7?s=128&d=identicon&r=PG&f=1", "display_name": "Haunchmeat", "link": "https://stackoverflow.com/users/7298348/haunchmeat"}, "reply_to_user": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1484778528, "post_id": 41730514, "comment_id": 70655634, "body": "Thank you for editing @DYZ! Clearly I&#39;m still learning. The type(GDP) returns pandas.core.frame.DataFrame, which I assume means it has been loaded as a DataFrame?"}], "answers": [{"tags": [], "owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "is_accepted": true, "score": 3, "last_activity_date": 1484779664, "last_edit_date": 1484779664, "creation_date": 1484778727, "answer_id": 41730654, "question_id": 41730514, "link": "https://stackoverflow.com/questions/41730514/load-a-csv-file-into-pandas-dataframe/41730654#41730654", "title": "Load a csv file into pandas dataframe", "body": "<p>The problem is not with the variable, but with the way Variable Explorer filters what it shows. Go to \"Tools/Preferences\", select \"Variable explorer\", and uncheck option \"Exclude all-uppercase references\".</p>\n"}], "owner": {"reputation": 23, "user_id": 7298348, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a3049816fa029a8f7544a487a4c99d7?s=128&d=identicon&r=PG&f=1", "display_name": "Haunchmeat", "link": "https://stackoverflow.com/users/7298348/haunchmeat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7844, "favorite_count": 1, "accepted_answer_id": 41730654, "answer_count": 1, "score": 2, "last_activity_date": 1484779664, "creation_date": 1484778134, "last_edit_date": 1484778256, "question_id": 41730514, "link": "https://stackoverflow.com/questions/41730514/load-a-csv-file-into-pandas-dataframe", "title": "Load a csv file into pandas dataframe", "body": "<p>First question: please be kind. </p>\n\n<p>I am having trouble loading a CSV file into a DataFrame on Spyder, using iPython. When I load an XLS file, it seems to have no problem and populates the new DataFrame variable into the variable explorer.</p>\n\n<p>For example: </p>\n\n<pre><code>import pandas as pd\nenergy = pd.read_excel('file.xls', skiprows=17)\n</code></pre>\n\n<p>The above returns a DataFrame, named energy, populated in the variable explorer (i.e. I can actually see the DataFrame). </p>\n\n<p>However, when I try to load in a CSV file using the same method, it seems to read in the file, however it does not populate the variable explorer. </p>\n\n<p>For example:</p>\n\n<pre><code>import pandas as pd\nGDP = pd.read_csv('file.csv')\n</code></pre>\n\n<p>When I run the above line, I don't get an error message, but the new DataFrame, <code>GDP</code>, does not populate the variable explorer. If I print <code>GDP</code> I get the values (268 rows x 60 columns). Am I not saving the new DataFrame correctly as a variable?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "facebook", "facebook-graph-api", "facebook-ads-api"], "comments": [{"owner": {"reputation": 4270, "user_id": 993169, "user_type": "registered", "profile_image": "https://graph.facebook.com/61405622/picture?type=large", "display_name": "Paul Bain", "link": "https://stackoverflow.com/users/993169/paul-bain"}, "edited": false, "score": 1, "creation_date": 1485432180, "post_id": 41730490, "comment_id": 70927611, "body": "just for clarification, you don&#39;t upgrade an access token, you upgrade the app to a higher tier."}, {"owner": {"reputation": 43277, "user_id": 21062, "user_type": "registered", "profile_image": "https://graph.facebook.com/533875325/picture?type=large", "display_name": "Igy", "link": "https://stackoverflow.com/users/21062/igy"}, "edited": false, "score": 0, "creation_date": 1485940555, "post_id": 41730490, "comment_id": 71129523, "body": "I&#39;m voting to close this question as off-topic because it is about Facebook&#39;s review process and not a programming question"}, {"owner": {"reputation": 3149, "user_id": 212292, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/SdpIO.png?s=128&g=1", "display_name": "Felipe Ferri", "link": "https://stackoverflow.com/users/212292/felipe-ferri"}, "edited": false, "score": 0, "creation_date": 1486036300, "post_id": 41730490, "comment_id": 71179216, "body": "Hey Paul, you are right. Thanks for the clarification."}, {"owner": {"reputation": 3149, "user_id": 212292, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/SdpIO.png?s=128&g=1", "display_name": "Felipe Ferri", "link": "https://stackoverflow.com/users/212292/felipe-ferri"}, "edited": false, "score": 0, "creation_date": 1486036321, "post_id": 41730490, "comment_id": 71179229, "body": "Igy, don&#39;t be mean, somebody may have the same doubts that I had when doing a programming job which is integrating to Facebook API."}], "answers": [{"comments": [{"owner": {"reputation": 3380, "user_id": 5893585, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7ecb7114fc5f0c8898995a22d4814a5b?s=128&d=identicon&r=PG&f=1", "display_name": "nak5120", "link": "https://stackoverflow.com/users/5893585/nak5120"}, "edited": false, "score": 0, "creation_date": 1518020264, "post_id": 41785371, "comment_id": 84334743, "body": "How were you able to move forward without filling in the privacy policy url? I am doing the same thing but in R and not sure how to move forward to upgrade."}, {"owner": {"reputation": 3149, "user_id": 212292, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/SdpIO.png?s=128&g=1", "display_name": "Felipe Ferri", "link": "https://stackoverflow.com/users/212292/felipe-ferri"}, "reply_to_user": {"reputation": 3380, "user_id": 5893585, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7ecb7114fc5f0c8898995a22d4814a5b?s=128&d=identicon&r=PG&f=1", "display_name": "nak5120", "link": "https://stackoverflow.com/users/5893585/nak5120"}, "edited": false, "score": 0, "creation_date": 1518120917, "post_id": 41785371, "comment_id": 84386536, "body": "Did you try setting any url? You could for example create a blog on blogspot and set that url. I&#39;ve just set the main home-page for the company I was creating the app for"}], "tags": [], "owner": {"reputation": 3149, "user_id": 212292, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/SdpIO.png?s=128&g=1", "display_name": "Felipe Ferri", "link": "https://stackoverflow.com/users/212292/felipe-ferri"}, "is_accepted": true, "score": 0, "last_activity_date": 1486036387, "last_edit_date": 1486036387, "creation_date": 1485038859, "answer_id": 41785371, "question_id": 41730490, "link": "https://stackoverflow.com/questions/41730490/upgrading-facebook-ads-token-to-basic/41785371#41785371", "title": "Upgrading Facebook Ads token to &quot;Basic&quot;", "body": "<p>Okay, so I just ended up filling the form and when asked for instructions of how to run the demo I explained that the app wasn't \"demonstrable\".</p>\n\n<p>And the app tier was upgraded automatically.</p>\n"}], "owner": {"reputation": 3149, "user_id": 212292, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/SdpIO.png?s=128&g=1", "display_name": "Felipe Ferri", "link": "https://stackoverflow.com/users/212292/felipe-ferri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 41785371, "answer_count": 1, "score": 1, "last_activity_date": 1486036387, "creation_date": 1484778031, "question_id": 41730490, "link": "https://stackoverflow.com/questions/41730490/upgrading-facebook-ads-token-to-basic", "title": "Upgrading Facebook Ads token to &quot;Basic&quot;", "body": "<p>I am developing an app using the Facebook Ads api. Initially it is just a Python script which downloads ads performance information from my client and stores it in a database, where it is combined with information from other sources in order to provide better reporting for them.</p>\n\n<p>It is not a web app (yet). It is just a Python script, working for a single business user account (yet!).</p>\n\n<p>The developer token clearly isn't enough because it limits access to 5 Ads Accounts. I would like to upgrade to basic account however the approval form requires things such as providing a video demo, website of the app, privacy policy, etc. The app doesn't have those because it is not intended for general use (yet!!).</p>\n\n<p>It seems that only an app focused on other Facebook users can apply to a Basic access token.</p>\n\n<p>Is this so?</p>\n\n<p>How can I upgrade my access token if my app is just a Python script running on a server?</p>\n\n<p>Thank you! :-)</p>\n"}, {"tags": ["python", "bash", "svn", "subprocess"], "comments": [{"owner": {"reputation": 26602, "user_id": 761095, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/6qOuP.png?s=128&g=1", "display_name": "bahrep", "link": "https://stackoverflow.com/users/761095/bahrep"}, "edited": false, "score": 0, "creation_date": 1485177984, "post_id": 41730393, "comment_id": 70802641, "body": "Do not use <code>pysvn</code>. Use SWIG Python bindings: <a href=\"http://svnbook.red-bean.com/en/1.8/svn.developer.usingapi.html#svn.developer.usingapi.otherlangs\" rel=\"nofollow noreferrer\">svnbook.red-bean.com/en/1.8/&hellip;</a>"}, {"owner": {"reputation": 13, "user_id": 7438046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e3b90edc952d3d78b3c120a1b5a7018?s=128&d=identicon&r=PG&f=1", "display_name": "the_great_alexander", "link": "https://stackoverflow.com/users/7438046/the-great-alexander"}, "reply_to_user": {"reputation": 26602, "user_id": 761095, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/6qOuP.png?s=128&g=1", "display_name": "bahrep", "link": "https://stackoverflow.com/users/761095/bahrep"}, "edited": false, "score": 0, "creation_date": 1485372106, "post_id": 41730393, "comment_id": 70903628, "body": "I am trying to avoid downloading any libraries, which is why I am using a subprocess, but it is still helpful to make a note of SWIG."}], "answers": [{"tags": [], "owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "is_accepted": true, "score": 0, "last_activity_date": 1484789782, "last_edit_date": 1484789782, "creation_date": 1484789344, "answer_id": 41732283, "question_id": 41730393, "link": "https://stackoverflow.com/questions/41730393/attempting-to-circumvent-pysvn-can-i-use-the-subprocess-function-to-write-svn-c/41732283#41732283", "title": "Attempting to circumvent pysvn, can I use the subprocess function to write svn calls in shell script?", "body": "<p><code>subprocess.call</code> is just a thin wrapper around <code>subprocess.Popen</code> that waits for the process to complete:</p>\n\n<pre><code>def call(*args, **kwargs):\n    return Popen(*args, **kwargs).wait()\n</code></pre>\n\n<p>The only reason to use the shell to run your command is if you want to run some more or less complicated shell command. With a single simple command and its arguments, it is better to pass a single list of strings consisting of the command name and its arguments.</p>\n\n<pre><code>subprocess.call([\"svn\", \"export\", \"-r\", \"5\"])\n</code></pre>\n\n<p>If you were writing a function that could, for example, take a revision number as an argument, you can pass that to <code>svn export</code> as long as you ensure that it is a string:</p>\n\n<pre><code>def svn_export(r):\n    subprocess.call([\"svn\", \"export\", \"-r\", str(r)])\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 7438046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e3b90edc952d3d78b3c120a1b5a7018?s=128&d=identicon&r=PG&f=1", "display_name": "the_great_alexander", "link": "https://stackoverflow.com/users/7438046/the-great-alexander"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 41732283, "answer_count": 1, "score": 0, "last_activity_date": 1484789782, "creation_date": 1484777660, "last_edit_date": 1484787167, "question_id": 41730393, "link": "https://stackoverflow.com/questions/41730393/attempting-to-circumvent-pysvn-can-i-use-the-subprocess-function-to-write-svn-c", "title": "Attempting to circumvent pysvn, can I use the subprocess function to write svn calls in shell script?", "body": "<p>I'm having some trouble understanding the subprocess function in Python 2.7.  I have some commands in shell script that I'm trying to convert into Python, <code>svn export -r 5 ...</code> for example, but I don't want to depend on a library such as <code>pysvn</code> to do this.  The solution to that (to my understanding) is to use a subprocess and just run each individual command that would be in a shell script.  Should this be achieved by <code>subprocess.call(\"svn export -r 5\", shell=True)</code>?  Or is <code>Popen</code> what I should be looking at?  I know that it's been said you should avoid <code>shell=True</code>, but there is no security concern or possible user error in my case.  Any advice would be appreciated.</p>\n"}, {"tags": ["python", "matrix", "replace"], "comments": [{"owner": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "edited": false, "score": 0, "creation_date": 1484777862, "post_id": 41730341, "comment_id": 70655362, "body": "It&#39;s a little bit difficult to understand your problem from description alone. Could you give some example input and acceptable output data?"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1484777994, "post_id": 41730341, "comment_id": 70655419, "body": "Are you trying to solve the same problem as <a href=\"http://stackoverflow.com/questions/41729990/how-to-generate-a-crossword-grid-that-enables-words-using-the-same-letter\">here</a>?"}, {"owner": {"reputation": 176, "user_id": 7277993, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SNtxH.jpg?s=128&g=1", "display_name": "ANVGJSENGRDG", "link": "https://stackoverflow.com/users/7277993/anvgjsengrdg"}, "edited": false, "score": 0, "creation_date": 1484778112, "post_id": 41730341, "comment_id": 70655465, "body": "what exactly are you trying to do? replace letters in the string with other random letters? or are you trying to create some type of encryption that is reversible?"}, {"owner": {"reputation": 307, "user_id": 7350092, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4c2f7ee4daaf1056c9dfbc2855973d0f?s=128&d=identicon&r=PG", "display_name": "ElMassas", "link": "https://stackoverflow.com/users/7350092/elmassas"}, "edited": false, "score": 0, "creation_date": 1484778302, "post_id": 41730341, "comment_id": 70655547, "body": "I&#39;m trying to put words in the grid randomly...I&#39;ve edited the question"}, {"owner": {"reputation": 176, "user_id": 7277993, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SNtxH.jpg?s=128&g=1", "display_name": "ANVGJSENGRDG", "link": "https://stackoverflow.com/users/7277993/anvgjsengrdg"}, "edited": false, "score": 0, "creation_date": 1484778686, "post_id": 41730341, "comment_id": 70655700, "body": "@MiguelLu&#237;s and can we assume that the words to be put into the grid will be in a list such as [&quot;red&quot;, &quot;green&quot;, &quot;brown&quot;] ?"}, {"owner": {"reputation": 307, "user_id": 7350092, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4c2f7ee4daaf1056c9dfbc2855973d0f?s=128&d=identicon&r=PG", "display_name": "ElMassas", "link": "https://stackoverflow.com/users/7350092/elmassas"}, "reply_to_user": {"reputation": 176, "user_id": 7277993, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SNtxH.jpg?s=128&g=1", "display_name": "ANVGJSENGRDG", "link": "https://stackoverflow.com/users/7277993/anvgjsengrdg"}, "edited": false, "score": 0, "creation_date": 1484778982, "post_id": 41730341, "comment_id": 70655806, "body": "@Gaelephor yes!"}, {"owner": {"reputation": 176, "user_id": 7277993, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SNtxH.jpg?s=128&g=1", "display_name": "ANVGJSENGRDG", "link": "https://stackoverflow.com/users/7277993/anvgjsengrdg"}, "edited": false, "score": 0, "creation_date": 1484782252, "post_id": 41730341, "comment_id": 70656904, "body": "@MiguelLu&#237;s I will answer this question, ive got part of the code working, ill get the answer up tonight, but ive got to go grab dinner. sorry for the delay."}], "owner": {"reputation": 307, "user_id": 7350092, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4c2f7ee4daaf1056c9dfbc2855973d0f?s=128&d=identicon&r=PG", "display_name": "ElMassas", "link": "https://stackoverflow.com/users/7350092/elmassas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 93, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1484801811, "creation_date": 1484777358, "last_edit_date": 1484778211, "question_id": 41730341, "link": "https://stackoverflow.com/questions/41730341/replacing-a-string-in-a-list-of-lists", "title": "replacing a string in a list of lists", "body": "<p>I'm trying to generate an alphabet soup. I've created the grid(list of lists) and am now trying to replace letters in the grid, but i'm having some trouble with replacing it.</p>\n\n<p>The code to generate the grid:</p>\n\n<pre><code>file = open('gerarsopa.txt')\nx = file.readline().split()\nl = []\nalphabet = \"abcdefghijklmnopqrstuvwxyz\"\nfor linha in range(0,int(x[0])):\n    temp = []\n    for coluna in range(0,int(x[1])):\n        temp.append(random.choice(alphabet.upper()))\n    l.append(temp)\nfor row in l:\n    print(\" \".join(row))\nfile.close()\n</code></pre>\n\n<p>The program takes in a file in which the dimensions, and letters that I am going to have replace later on, are on.</p>\n\n<p>I don't know how to replace letter by letter the words in the grid, I only came up with a way to replace words with in a single point in the grid:</p>\n\n<pre><code>def substituir():\n    file = open('gerarsopa.txt')\n    string = file.read().split()\n    palavras = string[2:]\n    l[random.randint(0,int(x[1]))] = palavras[2]\n</code></pre>\n\n<p>Obviously the words can't go out of the grid, have to be complete, and can't overlap with another word with a letter that isn't used in both words.</p>\n\n<p>The output should be something like this:</p>\n\n<pre><code>e n k j d q d y p\nb R E D k c d q f\nz p o h k t y r t\na c h G n m e f x\np f k b R g f j l\nb g j y v E n i c\ns e p f o r E v w\nE U L B k w t N n\nm p q k y f a h i\n</code></pre>\n\n<p>The upper case letters are an example of how the words should stay in the grid. The are randomly put in the grid\nCan anyone help me out?</p>\n"}, {"tags": ["python", "python-2.7"], "comments": [{"owner": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "edited": false, "score": 0, "creation_date": 1484777558, "post_id": 41730333, "comment_id": 70655230, "body": "You should post the traceback so we can see the details of the error. Also, the <code>BridgeClient</code> import is not likely related but makes it so we can&#39;t test your code. Post something smaller that demonstrates the issue. You could copy this file and delete half of it including the socket calls."}, {"owner": {"reputation": 38371, "user_id": 3555845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e06f616d9a53b1ca18287d1049a28ee?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/3555845/daniel"}, "edited": false, "score": 0, "creation_date": 1484777566, "post_id": 41730333, "comment_id": 70655235, "body": "don&#39;t use <code>global</code> and don&#39;t use nested functions."}, {"owner": {"reputation": 937, "user_id": 2363069, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/ZibB7.jpg?s=128&g=1", "display_name": "Jonathan Anctil", "link": "https://stackoverflow.com/users/2363069/jonathan-anctil"}, "reply_to_user": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "edited": false, "score": 0, "creation_date": 1484777711, "post_id": 41730333, "comment_id": 70655295, "body": "@tdelaney I&#39;ve updated my post"}, {"owner": {"reputation": 937, "user_id": 2363069, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/ZibB7.jpg?s=128&g=1", "display_name": "Jonathan Anctil", "link": "https://stackoverflow.com/users/2363069/jonathan-anctil"}, "reply_to_user": {"reputation": 38371, "user_id": 3555845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e06f616d9a53b1ca18287d1049a28ee?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/3555845/daniel"}, "edited": false, "score": 0, "creation_date": 1484777966, "post_id": 41730333, "comment_id": 70655406, "body": "@Daniel I use nested function to be able to control the Timer. Maybe I&#39;m wrong but I read somewhere that this technique is better than a sleep() function. I&#39;m not much aware of good practice in Python (I&#39;m new!) but if you say that nested function is a bad practice, I will try avoid this!"}, {"owner": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "reply_to_user": {"reputation": 38371, "user_id": 3555845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e06f616d9a53b1ca18287d1049a28ee?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/3555845/daniel"}, "edited": false, "score": 0, "creation_date": 1484778462, "post_id": 41730333, "comment_id": 70655612, "body": "@Daniel that&#39;s a rather broad statement. There is nothing wrong with nested functions - its more properly called a &quot;closure&quot; - especially when scheduling future work like a timer. This particular implementation needs some fixes but its not a bad strategy in general."}, {"owner": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "edited": false, "score": 0, "creation_date": 1484778551, "post_id": 41730333, "comment_id": 70655643, "body": "I&#39;m not completely sure what the intent of this code is, but perhaps passing previous as a parameter makes the most sense. <code>def send(previous): ... </code>."}, {"owner": {"reputation": 937, "user_id": 2363069, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/ZibB7.jpg?s=128&g=1", "display_name": "Jonathan Anctil", "link": "https://stackoverflow.com/users/2363069/jonathan-anctil"}, "reply_to_user": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "edited": false, "score": 0, "creation_date": 1484778844, "post_id": 41730333, "comment_id": 70655759, "body": "@tdelaney the main purpose of the code is to read data from an Arduino (Bridge) and send data to socket."}], "answers": [{"tags": [], "owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "is_accepted": true, "score": 2, "last_activity_date": 1484777549, "creation_date": 1484777549, "answer_id": 41730374, "question_id": 41730333, "link": "https://stackoverflow.com/questions/41730333/local-variable-referenced-before-assignment/41730374#41730374", "title": "Local variable &#39;...&#39; referenced before assignment", "body": "<p>You have nested scopes here:</p>\n\n<pre><code>def main(argv):\n    ...\n    global previous\n    ...\n    def send():\n        ...\n        if data != previous:\n</code></pre>\n\n<p>Declaring global in <code>main</code> function does not apply to the local in <code>send</code> function.  </p>\n\n<p>You could move the global declaration for the <code>previous</code> into the start of the <code>send</code> method.  You can remove the global declaration for <code>bridge</code> completely.  </p>\n\n<p>Better yet, refactor your code not to use nested scopes and global variables!</p>\n"}], "owner": {"reputation": 937, "user_id": 2363069, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/ZibB7.jpg?s=128&g=1", "display_name": "Jonathan Anctil", "link": "https://stackoverflow.com/users/2363069/jonathan-anctil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2008, "favorite_count": 0, "accepted_answer_id": 41730374, "answer_count": 1, "score": 0, "last_activity_date": 1484777672, "creation_date": 1484777324, "last_edit_date": 1484777672, "question_id": 41730333, "link": "https://stackoverflow.com/questions/41730333/local-variable-referenced-before-assignment", "title": "Local variable &#39;...&#39; referenced before assignment", "body": "<p>I'm new with Python and I've encountered this error this afternoon. I tried to fix this by adding <code>global</code> before the <code>previous</code> variable but I continue to get this error:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"send.py\", line 76, in &lt;module&gt;\nmain(sys.argv[1:])\n  File \"send.py\", line 34, in main\nsend()\n  File \"send.py\", line 29, in send\n    if data != previous:\n</code></pre>\n\n<p>A sample of the code I did:</p>\n\n<pre><code>import socket\nimport sys\nimport getopt\nimport time\nimport threading\n\nsys.path.insert(0, '/usr/lib/python2.7/bridge/') \n\nfrom bridgeclient import BridgeClient as bridgeclient\n\ndef main(argv):\n    global bridge\n    global previous\n\n    try:                    \n        # Create a UDP socket.\n        sock = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)\n        server_address = ('192.168.1.100', 9050)\n\n        bridge = bridgeclient()\n        previous = \"\"\n\n        # Send data  \n        def send():         \n            data = bridge.get(\"data\")   \n\n            if data != previous:                    \n                sent = sock.sendto(data, server_address)                                \n                previous = data\n                threading.Timer(0.2, send).start()\n\n        send()\n\n    finally:\n        sock.close()\n\nif __name__ == \"__main__\":\n    main(sys.argv[1:])\n</code></pre>\n"}, {"tags": ["python", "django", "django-rest-framework"], "answers": [{"comments": [{"owner": {"reputation": 1668, "user_id": 4050960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2433d3125076f5789fe82a2eae87fdd1?s=128&d=identicon&r=PG&f=1", "display_name": "Chuck Aguilar", "link": "https://stackoverflow.com/users/4050960/chuck-aguilar"}, "edited": false, "score": 1, "creation_date": 1484778280, "post_id": 41730390, "comment_id": 70655538, "body": "nice. but I have to let this <code>queryset = Message.objects.all()</code>  though. Isn&#39;t it?  I mean, I let it and it works. And when I take it away I get an error.  (Do you know why it happens?) Thanks!!"}, {"owner": {"reputation": 38630, "user_id": 1324033, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/PaonW.png?s=128&g=1", "display_name": "Sayse", "link": "https://stackoverflow.com/users/1324033/sayse"}, "reply_to_user": {"reputation": 1668, "user_id": 4050960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2433d3125076f5789fe82a2eae87fdd1?s=128&d=identicon&r=PG&f=1", "display_name": "Chuck Aguilar", "link": "https://stackoverflow.com/users/4050960/chuck-aguilar"}, "edited": false, "score": 0, "creation_date": 1484778357, "post_id": 41730390, "comment_id": 70655571, "body": "@ChuckAguilar - I can&#39;t remember at the minute, I don&#39;t have any source in front of me so can&#39;t remember what error you receive"}, {"owner": {"reputation": 1668, "user_id": 4050960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2433d3125076f5789fe82a2eae87fdd1?s=128&d=identicon&r=PG&f=1", "display_name": "Chuck Aguilar", "link": "https://stackoverflow.com/users/4050960/chuck-aguilar"}, "edited": false, "score": 0, "creation_date": 1484778632, "post_id": 41730390, "comment_id": 70655680, "body": "<code>assert queryset is not None, &#39;`base_name` argument not specified, and could &#39; \\ AssertionError: `base_name` argument not specified, and could not automatically determine the name from the viewset, as it does not have a `.queryset` attribute. </code> But it&#39;s ok, I mean, when I let the queryset so, as I had it, with the get_query function, it works nicely."}, {"owner": {"reputation": 38630, "user_id": 1324033, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/PaonW.png?s=128&g=1", "display_name": "Sayse", "link": "https://stackoverflow.com/users/1324033/sayse"}, "reply_to_user": {"reputation": 1668, "user_id": 4050960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2433d3125076f5789fe82a2eae87fdd1?s=128&d=identicon&r=PG&f=1", "display_name": "Chuck Aguilar", "link": "https://stackoverflow.com/users/4050960/chuck-aguilar"}, "edited": false, "score": 1, "creation_date": 1484778823, "post_id": 41730390, "comment_id": 70655753, "body": "@ChuckAguilar - Ah I see, if you go to the example I link to under my question there is a paragraph about it - &quot;Note however that upon removal of the queryset property from your ViewSet....&quot;"}], "tags": [], "owner": {"reputation": 38630, "user_id": 1324033, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/PaonW.png?s=128&g=1", "display_name": "Sayse", "link": "https://stackoverflow.com/users/1324033/sayse"}, "is_accepted": true, "score": 1, "last_activity_date": 1484777642, "creation_date": 1484777642, "answer_id": 41730390, "question_id": 41730303, "link": "https://stackoverflow.com/questions/41730303/filter-queryset-with-one-of-two-criteria-that-match-with-the-user-django-rest-f/41730390#41730390", "title": "Filter queryset with one of two criteria that match with the user. Django Rest Framework", "body": "<p>You need to define a <code>get_queryset</code> method on the viewset rather than the <code>queryset</code> field.</p>\n\n<p>You can then access the request object to access the current user.</p>\n\n<pre><code>def get_queryset(self):\n    return Message.objects.filter(Q(recipient=self.request.user) | Q(sender=self.request.user))\n</code></pre>\n\n<p>You can find another <a href=\"http://www.django-rest-framework.org/api-guide/viewsets/#example_1\" rel=\"nofollow noreferrer\">example in the docs for <code>ModelViewSet</code></a></p>\n"}], "owner": {"reputation": 1668, "user_id": 4050960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2433d3125076f5789fe82a2eae87fdd1?s=128&d=identicon&r=PG&f=1", "display_name": "Chuck Aguilar", "link": "https://stackoverflow.com/users/4050960/chuck-aguilar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 184, "favorite_count": 0, "accepted_answer_id": 41730390, "answer_count": 1, "score": 0, "last_activity_date": 1484777642, "creation_date": 1484777205, "question_id": 41730303, "link": "https://stackoverflow.com/questions/41730303/filter-queryset-with-one-of-two-criteria-that-match-with-the-user-django-rest-f", "title": "Filter queryset with one of two criteria that match with the user. Django Rest Framework", "body": "<p>I have this model:</p>\n\n<pre><code>class MessageViewSet(viewsets.ModelViewSet):\n    queryset = Message.objects.all()\n    serializer_class = MessageSerializer\n</code></pre>\n\n<p>and of course, it returns every message. </p>\n\n<p>A Message is so in the model:</p>\n\n<pre><code>class Message(models.Model):\n    created = models.DateTimeField(auto_now_add=True)\n\n    type = models.CharField(_('type'), choices=MESSAGE_TYPE, default='Invitation', max_length=100)\n    content = models.TextField(_('content'), blank=False)\n    sender = models.ForeignKey(User, related_name='sender_message', verbose_name=_(\"Sender\"), )\n    recipient = models.ForeignKey(User, related_name='receiver_message', null=True, blank=True,\n                                  verbose_name=_(\"Recipient\"))\n    url_profile_image = models.URLField(_('url_profile_image'), max_length=500, blank=True, default='')\n\n    class Meta:\n        ordering = ('created',)\n</code></pre>\n\n<p>and the serializer is so:</p>\n\n<pre><code>class MessageSerializer(serializers.ModelSerializer):\n    sender = serializers.ReadOnlyField(source='sender.uuid')\n    recipient = serializers.ReadOnlyField(source='recipient.uuid')\n\n    class Meta:\n        model = Message\n        fields = ('url', 'id', 'type', 'content', 'sender', 'recipient', 'url_profile_image')\n</code></pre>\n\n<p>I just want that the queryset returns a message if the user is the sender or the recipient. </p>\n\n<p>I was trying with this:</p>\n\n<pre><code>filter_backends = filters.DjangoFilterBackend\nfilter_fields = ('recipient', 'sender')\n</code></pre>\n\n<p>But it doesn't work, perhaps, because I don't know where to compare. </p>\n"}, {"tags": ["python", "apache-spark", "scheduling", "reload", "airflow"], "answers": [{"comments": [{"owner": {"reputation": 757, "user_id": 7196609, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/YpyVA.jpg?s=128&g=1", "display_name": "Abhishek Pansotra", "link": "https://stackoverflow.com/users/7196609/abhishek-pansotra"}, "edited": false, "score": 0, "creation_date": 1484825886, "post_id": 41730510, "comment_id": 70674405, "body": "Hi @postrational, Thanks for the suggestion. Please guide where to write this script in airflow which you have mentioned in your comment ? sorry I am very new to airflow.."}, {"owner": {"reputation": 5900, "user_id": 194905, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/18a711170d420a2819cd580668257636?s=128&d=identicon&r=PG", "display_name": "postrational", "link": "https://stackoverflow.com/users/194905/postrational"}, "reply_to_user": {"reputation": 757, "user_id": 7196609, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/YpyVA.jpg?s=128&g=1", "display_name": "Abhishek Pansotra", "link": "https://stackoverflow.com/users/7196609/abhishek-pansotra"}, "edited": false, "score": 0, "creation_date": 1484863574, "post_id": 41730510, "comment_id": 70697680, "body": "Well, the file with the DAG definition would go in your <code>AIRFLOW_HOME&#47;dags</code> directory. The file with your Python function could go into any directory, as long as it&#39;s on the PYTHONPATH. I added some information to my answer."}, {"owner": {"reputation": 757, "user_id": 7196609, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/YpyVA.jpg?s=128&g=1", "display_name": "Abhishek Pansotra", "link": "https://stackoverflow.com/users/7196609/abhishek-pansotra"}, "edited": false, "score": 0, "creation_date": 1484910045, "post_id": 41730510, "comment_id": 70715421, "body": "Hi @postrational, what would be the <b>file extension</b> of file containing the DAG definition? . In my airflow configuration <b>dags_folder</b> is specified as <b>/home/amit/airflow/dags</b> so I have placed the DAG definition there only.. is that right ?"}, {"owner": {"reputation": 5900, "user_id": 194905, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/18a711170d420a2819cd580668257636?s=128&d=identicon&r=PG", "display_name": "postrational", "link": "https://stackoverflow.com/users/194905/postrational"}, "reply_to_user": {"reputation": 757, "user_id": 7196609, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/YpyVA.jpg?s=128&g=1", "display_name": "Abhishek Pansotra", "link": "https://stackoverflow.com/users/7196609/abhishek-pansotra"}, "edited": false, "score": 0, "creation_date": 1484913079, "post_id": 41730510, "comment_id": 70717368, "body": "That&#39;s right. The DAG definition code is Python, so the file should have the .py extension."}, {"owner": {"reputation": 757, "user_id": 7196609, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/YpyVA.jpg?s=128&g=1", "display_name": "Abhishek Pansotra", "link": "https://stackoverflow.com/users/7196609/abhishek-pansotra"}, "edited": false, "score": 0, "creation_date": 1484918191, "post_id": 41730510, "comment_id": 70720479, "body": "I have added the same.. now how to import the same into airflow UI ?? I have created the DAG runs and provided the DAG Id as &quot;tutorial&quot; but nothing is showing DAG entries sheet."}, {"owner": {"reputation": 5900, "user_id": 194905, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/18a711170d420a2819cd580668257636?s=128&d=identicon&r=PG", "display_name": "postrational", "link": "https://stackoverflow.com/users/194905/postrational"}, "reply_to_user": {"reputation": 757, "user_id": 7196609, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/YpyVA.jpg?s=128&g=1", "display_name": "Abhishek Pansotra", "link": "https://stackoverflow.com/users/7196609/abhishek-pansotra"}, "edited": false, "score": 0, "creation_date": 1484918408, "post_id": 41730510, "comment_id": 70720605, "body": "Have you properly set your <code>AIRFLOW_HOME</code> environment variable? You should <code>export AIRFLOW_HOME &#47;path&#47;to&#47;your&#47;airflow_home</code> and then in the <code>airflow_home</code> you should have your <code>airflow.cfg</code> file with all airflow settings including the path to your <code>dags_folder</code> etc."}, {"owner": {"reputation": 757, "user_id": 7196609, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/YpyVA.jpg?s=128&g=1", "display_name": "Abhishek Pansotra", "link": "https://stackoverflow.com/users/7196609/abhishek-pansotra"}, "edited": false, "score": 0, "creation_date": 1484924660, "post_id": 41730510, "comment_id": 70724571, "body": "Yes.. I did... when i do echo $AIRFLOW_HOME it is showing me the exact path. I have successfully created the DAG in DAG runs with Dag Id as &quot;&quot;tutorial&quot;. after which it show it as running but when i click on the tutorial it says DAG &quot;tutorial&quot; seems missing. Please find the changes in question as I have added the screenshots also."}, {"owner": {"reputation": 583, "user_id": 4113031, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-teEepVvzrsk/AAAAAAAAAAI/AAAAAAAAgdE/VeSy9eLuKc4/photo.jpg?sz=128", "display_name": "Niv Cohen", "link": "https://stackoverflow.com/users/4113031/niv-cohen"}, "edited": false, "score": 0, "creation_date": 1572350187, "post_id": 41730510, "comment_id": 103524791, "body": "A little bit late, but for those of you who are not sure where to put this code I highly recommend to follow those tutorials at <a href=\"https://www.applydatascience.com/airflow/writing-your-first-pipeline/\" rel=\"nofollow noreferrer\">applydatascience.com/airflow/writing-your-first-pipeline</a>"}], "tags": [], "owner": {"reputation": 5900, "user_id": 194905, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/18a711170d420a2819cd580668257636?s=128&d=identicon&r=PG", "display_name": "postrational", "link": "https://stackoverflow.com/users/194905/postrational"}, "is_accepted": false, "score": 24, "last_activity_date": 1484863725, "last_edit_date": 1484863725, "creation_date": 1484778108, "answer_id": 41730510, "question_id": 41730297, "link": "https://stackoverflow.com/questions/41730297/python-script-scheduling-in-airflow/41730510#41730510", "title": "Python script scheduling in airflow", "body": "<p>You should probably use the <code>PythonOperator</code> to call your function. If you want to define the function somewhere else, you can simply import it from a module as long as it's accessible in your <code>PYTHONPATH</code>.</p>\n\n<pre><code>from airflow import DAG\nfrom airflow.operators.python_operator import PythonOperator\n\nfrom my_script import my_python_function\n\ndag = DAG('tutorial', default_args=default_args)\n\nPythonOperator(dag=dag,\n               task_id='my_task_powered_by_python',\n               provide_context=False,\n               python_callable=my_python_function,\n               op_args=['arguments_passed_to_callable'],\n               op_kwargs={'keyword_argument':'which will be passed to function'})\n</code></pre>\n\n<p>If your function <code>my_python_function</code> was in a script file <code>/path/to/my/scripts/dir/my_script.py</code></p>\n\n<p>Then before starting Airflow, you could add the path to your scripts to the <code>PYTHONPATH</code> like so:</p>\n\n<pre><code>export PYTHONPATH=/path/to/my/scripts/dir/:$PYTHONPATH\n</code></pre>\n\n<p>More information here:\n<a href=\"https://airflow.incubator.apache.org/code.html#airflow.operators.PythonOperator\" rel=\"noreferrer\">https://airflow.incubator.apache.org/code.html#airflow.operators.PythonOperator</a></p>\n\n<p>Default args and other considerations as in the tutorial: <a href=\"https://airflow.incubator.apache.org/tutorial.html\" rel=\"noreferrer\">https://airflow.incubator.apache.org/tutorial.html</a></p>\n"}, {"comments": [{"owner": {"reputation": 757, "user_id": 7196609, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/YpyVA.jpg?s=128&g=1", "display_name": "Abhishek Pansotra", "link": "https://stackoverflow.com/users/7196609/abhishek-pansotra"}, "edited": false, "score": 0, "creation_date": 1484811271, "post_id": 41731397, "comment_id": 70665792, "body": "Hi Navjot, Thanks for the suggestion. Please guide where to write this script in airflow which you have mentioned in your comment ? sorry I am very new to airflow.."}, {"owner": {"reputation": 506, "user_id": 10190191, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-NDP4DbhR_w4/AAAAAAAAAAI/AAAAAAAAAAw/D8QG7G8Qyow/photo.jpg?sz=128", "display_name": "saadi", "link": "https://stackoverflow.com/users/10190191/saadi"}, "edited": false, "score": 1, "creation_date": 1578998930, "post_id": 41731397, "comment_id": 105613464, "body": "Hope you&#39;ve figured that out, but still for others, in the <code>dags</code> folder. <code>dags</code> folder location is specified in <code>airflow.cfg</code> which resides in <code>AIRFLOW_HOME</code> dir."}], "tags": [], "owner": {"reputation": 2095, "user_id": 5128976, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/0ba32662d9858c8ee42244f5e500fe4a?s=128&d=identicon&r=PG", "display_name": "liferacer", "link": "https://stackoverflow.com/users/5128976/liferacer"}, "is_accepted": false, "score": 20, "last_activity_date": 1596946678, "last_edit_date": 1596946678, "creation_date": 1484782857, "answer_id": 41731397, "question_id": 41730297, "link": "https://stackoverflow.com/questions/41730297/python-script-scheduling-in-airflow/41731397#41731397", "title": "Python script scheduling in airflow", "body": "<p>You can also use bashoperator to execute python scripts in Airflow. You can put your scripts in a folder in DAG folder. If your scripts are somewhere else, just give a path to those scripts.</p>\n<pre><code>    from airflow import DAG\n    from airflow.operators import BashOperator,PythonOperator\n    from datetime import datetime, timedelta\n\n    seven_days_ago = datetime.combine(datetime.today() - timedelta(7),\n                                      datetime.min.time())\n\n    default_args = {\n        'owner': 'airflow',\n        'depends_on_past': False,\n        'start_date': seven_days_ago,\n        'email': ['airflow@airflow.com'],\n        'email_on_failure': False,\n        'email_on_retry': False,\n        'retries': 1,\n        'retry_delay': timedelta(minutes=5),\n      }\n\n    dag = DAG('simple', default_args=default_args)\nt1 = BashOperator(\n    task_id='testairflow',\n    bash_command='python /home/airflow/airflow/dags/scripts/file1.py',\n    dag=dag)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 757, "user_id": 7196609, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/YpyVA.jpg?s=128&g=1", "display_name": "Abhishek Pansotra", "link": "https://stackoverflow.com/users/7196609/abhishek-pansotra"}, "edited": false, "score": 0, "creation_date": 1487275226, "post_id": 42274614, "comment_id": 71723617, "body": "Thanks.... there was an issue with the python script.. resolved the same."}], "tags": [], "owner": {"reputation": 169, "user_id": 7126545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d57c7f5ca2ef392292135c215b4c0b3d?s=128&d=identicon&r=PG&f=1", "display_name": "user7126545", "link": "https://stackoverflow.com/users/7126545/user7126545"}, "is_accepted": false, "score": 0, "last_activity_date": 1487249744, "creation_date": 1487249744, "answer_id": 42274614, "question_id": 41730297, "link": "https://stackoverflow.com/questions/41730297/python-script-scheduling-in-airflow/42274614#42274614", "title": "Python script scheduling in airflow", "body": "<p>Airflow parses all Python files in $AIRFLOW_HOME/dags (in your case /home/amit/airflow/dags). And that python script should retrun a DAG object back as shown in answer from \"postrational\". \nNow when it is being reported as missing that means there is some issue in Python code and Airflow could not load it. Check airflow webserver or scheduler logs for more details, as stderr or stdout goes there.</p>\n"}, {"tags": [], "owner": {"reputation": 2398, "user_id": 4332110, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/2ajC6.jpg?s=128&g=1", "display_name": "Siddharth Kumar", "link": "https://stackoverflow.com/users/4332110/siddharth-kumar"}, "is_accepted": false, "score": 0, "last_activity_date": 1499423645, "last_edit_date": 1499423645, "creation_date": 1499423218, "answer_id": 44968496, "question_id": 41730297, "link": "https://stackoverflow.com/questions/41730297/python-script-scheduling-in-airflow/44968496#44968496", "title": "Python script scheduling in airflow", "body": "<ol>\n<li>Install airflow using Airflow official documentation. Its good idea to install in python virtual environment.\n<a href=\"http://python-guide-pt-br.readthedocs.io/en/latest/dev/virtualenvs/\" rel=\"nofollow noreferrer\">http://python-guide-pt-br.readthedocs.io/en/latest/dev/virtualenvs/</a></li>\n<li>When we start airflow first time using </li>\n</ol>\n\n<p><code>airflow webserver -p &lt;port&gt;</code></p>\n\n<p>It loads examples dags automatically, It can be disable in \n$HOME/airflow/airflow.cfg</p>\n\n<pre><code>`load_examples = False`\n</code></pre>\n\n<ol start=\"3\">\n<li>Create <strong>dags</strong> folder in $HOME/airflow/, put tutorial.py file in <strong>dags</strong> folder from <a href=\"https://airflow.incubator.apache.org/tutorial.html\" rel=\"nofollow noreferrer\">https://airflow.incubator.apache.org/tutorial.html</a></li>\n<li><p>Do some experiments, make changes in tutorial.py. If you are giving schedule_interval as cron syntax, then <code>'start_date' : datetime(2017, 7, 7)</code></p>\n\n<pre><code>'start_date': datetime.now()\n</code></pre>\n\n<p><code>dag = DAG('tutorial', default_args=default_args,schedule_interval=\"@once\")</code>\n     or \n<code>dag = DAG('tutorial', default_args=default_args,schedule_interval=\"* * * * *\") # schedule each minute</code> </p></li>\n<li><p>start airflow: <code>$ airflow webserver -p &lt;port&gt;</code> </p></li>\n<li>start scheduler: <code>$ airflow scheduler</code></li>\n</ol>\n"}], "owner": {"reputation": 757, "user_id": 7196609, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/YpyVA.jpg?s=128&g=1", "display_name": "Abhishek Pansotra", "link": "https://stackoverflow.com/users/7196609/abhishek-pansotra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39078, "favorite_count": 5, "answer_count": 4, "score": 20, "last_activity_date": 1596946678, "creation_date": 1484777178, "last_edit_date": 1592644375, "question_id": 41730297, "link": "https://stackoverflow.com/questions/41730297/python-script-scheduling-in-airflow", "title": "Python script scheduling in airflow", "body": "<p><em>Hi everyone,</em></p>\n<p>I need to schedule my python <strong>files(which contains data extraction from sql and some joins)</strong> using airflow. I have successfully installed airflow into my linux server and webserver of airflow is available with me. But even after going through documentation I am not clear <em><strong>where exactly I need to write script for scheduling and how will that script be available into airflow webserver so I could see the status</strong></em></p>\n<p>As far as the configuration is concerned I know where the dag folder is located in my home directory and also where example dags are located.</p>\n<p><strong>Note:</strong> Please dont mark this as duplicate with How to run bash script file in Airflow as I need to run python files lying in some different location.</p>\n<h2>Please find the configuration in Airflow webserver as :</h2>\n<p><a href=\"https://i.stack.imgur.com/tExH0.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/tExH0.png\" alt=\"enter image description here\" /></a></p>\n<h2>Below is the screenshot of dag folder in AIRFLOW_HOME dir</h2>\n<p><a href=\"https://i.stack.imgur.com/FqLDH.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/FqLDH.png\" alt=\"enter image description here\" /></a></p>\n<h2>Also find the below screenshot for DAG creation screenshot and Missing DAG error</h2>\n<p><a href=\"https://i.stack.imgur.com/aYbd5.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/aYbd5.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/HLMGd.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/HLMGd.png\" alt=\"enter image description here\" /></a></p>\n<h2>After i select the <strong>simple</strong> DAG following error of missing DAG is populated</h2>\n<p><a href=\"https://i.stack.imgur.com/gKQGW.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/gKQGW.png\" alt=\"enter image description here\" /></a></p>\n"}, {"tags": ["python", "json", "pandas", "dataframe", "mapping"], "answers": [{"comments": [{"owner": {"reputation": 141, "user_id": 7112566, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f128c23ffdedaf3e80be51d93372f317?s=128&d=identicon&r=PG&f=1", "display_name": "Heather", "link": "https://stackoverflow.com/users/7112566/heather"}, "edited": false, "score": 0, "creation_date": 1484778299, "post_id": 41730476, "comment_id": 70655545, "body": "I tried this: <code>for i in len(data[&#39;features&#39;]):     data[&#39;features&#39;][i][&#39;properties&#39;][&#39;BDYSET_ID&#39;] = df[&#39;Winner&#39;][i]</code> but got an error that integer objects are not iterable."}, {"owner": {"reputation": 141, "user_id": 7112566, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f128c23ffdedaf3e80be51d93372f317?s=128&d=identicon&r=PG&f=1", "display_name": "Heather", "link": "https://stackoverflow.com/users/7112566/heather"}, "edited": false, "score": 0, "creation_date": 1484778454, "post_id": 41730476, "comment_id": 70655609, "body": "I just tried what you said and it worked, thank you for your help!"}, {"owner": {"reputation": 8438, "user_id": 3511819, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/7fac02ad0909ae0411a642e72a1b41d8?s=128&d=identicon&r=PG", "display_name": "AlexG", "link": "https://stackoverflow.com/users/3511819/alexg"}, "reply_to_user": {"reputation": 141, "user_id": 7112566, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f128c23ffdedaf3e80be51d93372f317?s=128&d=identicon&r=PG&f=1", "display_name": "Heather", "link": "https://stackoverflow.com/users/7112566/heather"}, "edited": false, "score": 0, "creation_date": 1484782224, "post_id": 41730476, "comment_id": 70656894, "body": "Cheers. Your for loop would need a <code>range( )</code> wrapped around the <code>len()</code> integer. Python is cool because objects are ofter iterable, allowing us to avoid the use of <code>range</code> in many cases"}], "tags": [], "owner": {"reputation": 8438, "user_id": 3511819, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/7fac02ad0909ae0411a642e72a1b41d8?s=128&d=identicon&r=PG", "display_name": "AlexG", "link": "https://stackoverflow.com/users/3511819/alexg"}, "is_accepted": true, "score": 1, "last_activity_date": 1484777994, "creation_date": 1484777994, "answer_id": 41730476, "question_id": 41730291, "link": "https://stackoverflow.com/questions/41730291/how-to-map-a-pandas-series-to-objects-in-json-using-python/41730476#41730476", "title": "How to map a Pandas series to objects in JSON using Python", "body": "<p>Can't this be done with a for loop?</p>\n\n<pre><code>for i, value in zip(df.index, df.Winner):\n    data['features'][i]['properties']['BDYSET_ID'] = value\n</code></pre>\n"}], "owner": {"reputation": 141, "user_id": 7112566, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f128c23ffdedaf3e80be51d93372f317?s=128&d=identicon&r=PG&f=1", "display_name": "Heather", "link": "https://stackoverflow.com/users/7112566/heather"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 542, "favorite_count": 0, "accepted_answer_id": 41730476, "answer_count": 1, "score": 0, "last_activity_date": 1484777994, "creation_date": 1484777149, "question_id": 41730291, "link": "https://stackoverflow.com/questions/41730291/how-to-map-a-pandas-series-to-objects-in-json-using-python", "title": "How to map a Pandas series to objects in JSON using Python", "body": "<p>I have a JSON file that looks like this:</p>\n\n<pre><code>{type: \"FeatureCollection\",\n\"crs\": {\"type\": \"name\", \"properties\": {\"name\": \"urn:ogc:def:crs:OCG:1.3:CRS84\" }},\n\"features\": [\n    {\"type\": \"Feature\",\n    \"properties\": {\n    'BDYSET_ID': 9,'ED_ABBREV': 'ABW','ED_ID': 85,'ED_NAME': 'Abbotsford West','FEAT_AREA': 104653208.2437,'FEAT_PERIM': 47130.005,'GAZETTE_DT': None,'OBJECTID': 86},\n    \"geometry\": {\"type\": \"Polygon\", \"coordinates\": [[[ 1.11111, -1.11111]]]\n    }\n    }\n]}\n</code></pre>\n\n<p>And I have a pandas series from a dataframe that looks like this:</p>\n\n<pre><code>df['Winner'] = 0 A\n               1 B\n               2 A\n               3 C\n               4 B\n               5 A\n</code></pre>\n\n<p>How do I change the values of all 'BDYSET_ID' objects in the JSON to match the letters in the  <code>df['Winner']</code> by index?</p>\n\n<p>For example, I did\n<code>data['features'][0]['properties']['BDYSET_ID'] = \"A\"</code>, which works but only replaces the value of one 'BDYSET_ID' object. How do I do this for all of them based on the index?</p>\n\n<p>Any help would be greatly appreciated, thank you.</p>\n"}, {"tags": ["python", "pandas", "crosstab"], "comments": [{"owner": {"reputation": 44261, "user_id": 3707607, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/6Jqb2.png?s=128&g=1", "display_name": "Ted Petrou", "link": "https://stackoverflow.com/users/3707607/ted-petrou"}, "edited": false, "score": 1, "creation_date": 1484777269, "post_id": 41730267, "comment_id": 70655122, "body": "You added a 0 for Hazel and Green."}, {"owner": {"reputation": 10595, "user_id": 758446, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/d08a0b2d56c559112b5f18ee2e975c97?s=128&d=identicon&r=PG", "display_name": "BlackVegetable", "link": "https://stackoverflow.com/users/758446/blackvegetable"}, "reply_to_user": {"reputation": 44261, "user_id": 3707607, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/6Jqb2.png?s=128&g=1", "display_name": "Ted Petrou", "link": "https://stackoverflow.com/users/3707607/ted-petrou"}, "edited": false, "score": 0, "creation_date": 1484777783, "post_id": 41730267, "comment_id": 70655328, "body": "@TedPetrou Urgh, my brain is hurting. Could you edit my question on my behalf with what actually adds up?"}], "answers": [{"comments": [{"owner": {"reputation": 10595, "user_id": 758446, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/d08a0b2d56c559112b5f18ee2e975c97?s=128&d=identicon&r=PG", "display_name": "BlackVegetable", "link": "https://stackoverflow.com/users/758446/blackvegetable"}, "edited": false, "score": 0, "creation_date": 1484778011, "post_id": 41730425, "comment_id": 70655425, "body": "This appears to work quite well. Could you explain how each magic number is being used here?  I will need to understand that to extend this to more complicated situations."}, {"owner": {"reputation": 44261, "user_id": 3707607, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/6Jqb2.png?s=128&g=1", "display_name": "Ted Petrou", "link": "https://stackoverflow.com/users/3707607/ted-petrou"}, "reply_to_user": {"reputation": 10595, "user_id": 758446, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/d08a0b2d56c559112b5f18ee2e975c97?s=128&d=identicon&r=PG", "display_name": "BlackVegetable", "link": "https://stackoverflow.com/users/758446/blackvegetable"}, "edited": false, "score": 0, "creation_date": 1484778322, "post_id": 41730425, "comment_id": 70655555, "body": "Explanation added. Let me know if you have more questions."}, {"owner": {"reputation": 10595, "user_id": 758446, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/d08a0b2d56c559112b5f18ee2e975c97?s=128&d=identicon&r=PG", "display_name": "BlackVegetable", "link": "https://stackoverflow.com/users/758446/blackvegetable"}, "edited": false, "score": 0, "creation_date": 1484778357, "post_id": 41730425, "comment_id": 70655572, "body": "That makes perfect sense! Thank you."}], "tags": [], "owner": {"reputation": 44261, "user_id": 3707607, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/6Jqb2.png?s=128&g=1", "display_name": "Ted Petrou", "link": "https://stackoverflow.com/users/3707607/ted-petrou"}, "is_accepted": true, "score": 2, "last_activity_date": 1484778275, "last_edit_date": 1484778275, "creation_date": 1484777741, "answer_id": 41730425, "question_id": 41730267, "link": "https://stackoverflow.com/questions/41730267/cross-tab-using-conditional-sub-populations/41730425#41730425", "title": "Cross Tab using conditional sub-populations", "body": "<p>Assuming your DataFrame looks like the image below you pivot it by unstacking and then dividing each row by its row total.</p>\n\n<p><a href=\"https://i.stack.imgur.com/QsDtd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QsDtd.png\" alt=\"enter image description here\"></a></p>\n\n<pre><code>df1 = df.unstack(0)\ndf1.div(df1.sum(1), axis=0)\n\n      eye_color          \n             No       Yes\nBlue   0.655172  0.344828\nBrown  0.538462  0.461538\nGreen  0.166667  0.833333\nHazel  0.000000  1.000000\n</code></pre>\n\n<p>More explanation. <code>unstack(0)</code> pivots the outer most level (the levels are zero indexed starting from the left) of the index to a column so you get the following frame.</p>\n\n<p><a href=\"https://i.stack.imgur.com/WgwSC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/WgwSC.png\" alt=\"enter image description here\"></a></p>\n\n<p><code>.sum(1)</code> sums each row. The default is so sum down the columns (axis=0). Then we have to be tricky and use <code>.div</code> with axis=0 to to divide by aligning only the index values.</p>\n"}], "owner": {"reputation": 10595, "user_id": 758446, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/d08a0b2d56c559112b5f18ee2e975c97?s=128&d=identicon&r=PG", "display_name": "BlackVegetable", "link": "https://stackoverflow.com/users/758446/blackvegetable"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 748, "favorite_count": 0, "accepted_answer_id": 41730425, "answer_count": 1, "score": 0, "last_activity_date": 1484778296, "creation_date": 1484777002, "last_edit_date": 1484778296, "question_id": 41730267, "link": "https://stackoverflow.com/questions/41730267/cross-tab-using-conditional-sub-populations", "title": "Cross Tab using conditional sub-populations", "body": "<p>I am learning how to use the <code>pandas</code> python library. I am attempting a problem that is probably not the easiest thing given no prior experience with <code>pandas</code> nor any statistical language such as <code>Stata</code>.</p>\n\n<p>Suppose I have a data set from a query about people's feelings toward pies and cakes. Most of the questions I have asked are of the form: </p>\n\n<blockquote>\n  <p>\"Do you prefer pies over cakes?\" or \"Would you vote for a cherry pie for President of the United states in 2020?\"</p>\n</blockquote>\n\n<p>These lead to \"Yes\" or \"No\" answers.</p>\n\n<p>Suppose I have <code>1000</code> people that have responded but they have some distinctions that matter to my upcoming analysis such as <code>Gender</code>, <code>Eye-Color</code>, and <code>primary-hand-use</code> (right/left/ambidextrous). Also suppose I have hundreds of these distinctions and that eventually I want to compare them all against the same question.</p>\n\n<p>Now, from my <code>cake-pie.DTA</code> file I can run:</p>\n\n<pre><code>frame = pandas.read_stata(\"cake-pie.DTA\")\nanswers = [\"Yes\", \"No\"]\npandas.crosstab(frame[\"Question_1\", frame[\"Eye_Color\"]], answers, normalize=\"columns\")\n</code></pre>\n\n<p>And this will give me the following:</p>\n\n<pre><code>col_0          yes\ncol_1           no\nQuestion_1 eye_color\nYes  Blue  0.1500\n     Hazel 0.050\n     Brown 0.2100\n     Green 0.050\nNo   Blue  0.2850\n     Hazel 0.0000\n     Brown 0.2450\n     Green 0.010\n</code></pre>\n\n<p>However, my 1000 people that have responded are not made of equal proportions of each eye color. Perhaps my population looks like:</p>\n\n<pre><code>Blue  435 (43.5%)\nHazel  50 (5.0%)\nBrown 455 (45.5%)\nGreen  60 (6.0%)\n</code></pre>\n\n<p>The information I'd like to have output is not an estimation of Probability of GREEN &amp; YES but rather, probability of Yes | GREEN (probability of Yes given Green eyes.)</p>\n\n<p>I realize I can manually divide by the subpopulation total to get that answer but I'm not sure how to divide by the pandas <code>Series</code> data that is my eye-color table above to do that in a single cross-tab. </p>\n"}, {"tags": ["python", "numpy", "statsmodels"], "comments": [{"owner": {"reputation": 18838, "user_id": 333700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad13088a623822caf74e635a68a55eae?s=128&d=identicon&r=PG", "display_name": "Josef", "link": "https://stackoverflow.com/users/333700/josef"}, "edited": false, "score": 0, "creation_date": 1484795207, "post_id": 41730036, "comment_id": 70660331, "body": "which versions of statsmodels and numpy are you using? This might be a incompatibility between an old statmodels and a new numpy. (Or maybe a bug in numpy 0.19.0 that has been fixed in 0.19.1.)"}, {"owner": {"reputation": 67, "user_id": 4554533, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/306619bd770ff8d05d4fe8993e7a28c7?s=128&d=identicon&r=PG&f=1", "display_name": "&#193;lvaro Lemos", "link": "https://stackoverflow.com/users/4554533/%c3%81lvaro-lemos"}, "reply_to_user": {"reputation": 18838, "user_id": 333700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad13088a623822caf74e635a68a55eae?s=128&d=identicon&r=PG", "display_name": "Josef", "link": "https://stackoverflow.com/users/333700/josef"}, "edited": false, "score": 0, "creation_date": 1484820842, "post_id": 41730036, "comment_id": 70671280, "body": "Just added the versions I&#39;m using"}, {"owner": {"reputation": 6712, "user_id": 1870832, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/4zazd.png?s=128&g=1", "display_name": "Max Power", "link": "https://stackoverflow.com/users/1870832/max-power"}, "edited": false, "score": 0, "creation_date": 1487714596, "post_id": 41730036, "comment_id": 71906961, "body": "upgrade statsmodels and it should now work, 0.8 was just released on pip. Just solved the same issue for me."}], "answers": [{"comments": [{"owner": {"reputation": 6712, "user_id": 1870832, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/4zazd.png?s=128&g=1", "display_name": "Max Power", "link": "https://stackoverflow.com/users/1870832/max-power"}, "edited": false, "score": 0, "creation_date": 1487714532, "post_id": 41747712, "comment_id": 71906924, "body": "StatsModels 0.8 is now on pip, so I just ran into this error and have now fixed it by updating StatsModels with &#39;conda install statsmodels&#39;. &#39;pip install --upgrade statsmodels&#39; should also do the trick for anyone without conda."}], "tags": [], "owner": {"reputation": 21, "user_id": 7442106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152816ba435cae468594c9cb2c37d3b?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamin Carls", "link": "https://stackoverflow.com/users/7442106/benjamin-carls"}, "is_accepted": false, "score": 2, "last_activity_date": 1484856925, "last_edit_date": 1484856925, "creation_date": 1484845750, "answer_id": 41747712, "question_id": 41730036, "link": "https://stackoverflow.com/questions/41730036/typeerror-on-convolution-filter-call-from-statsmodels/41747712#41747712", "title": "TypeError on convolution_filter call from statsmodels", "body": "<p>I ran into this exact same error this morning. The issue is due to an incompatibility between <code>Numpy 1.12.0</code> and <code>StatsModels 0.6.1</code>. It originally showed up as the warning documented <a href=\"https://github.com/statsmodels/statsmodels/issues/2958\" rel=\"nofollow noreferrer\">here</a>. </p>\n\n<p>The good news is that it's been fixed in the release candidate for <code>StatsModels 0.8</code>. Unfortunately though 0.8 hasn't been released yet and doesn't show up in the usual repositories yet. I got it working by checking out the source from github and building it myself using the instructions <a href=\"http://statsmodels.sourceforge.net/stable/install.html\" rel=\"nofollow noreferrer\">here</a>.  </p>\n"}, {"tags": [], "owner": {"reputation": 733, "user_id": 4765902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e96fbc6c6ae95f20b8eea70c91e67de?s=128&d=identicon&r=PG&f=1", "display_name": "Blakey", "link": "https://stackoverflow.com/users/4765902/blakey"}, "is_accepted": false, "score": 0, "last_activity_date": 1487338910, "creation_date": 1487338910, "answer_id": 42299481, "question_id": 41730036, "link": "https://stackoverflow.com/questions/41730036/typeerror-on-convolution-filter-call-from-statsmodels/42299481#42299481", "title": "TypeError on convolution_filter call from statsmodels", "body": "<p>Just ran into the same problem, temporarily rolled back to numpy 1.11 which worked fine <code>pip install -U numpy==1.11.0</code> (if you want to save installing StatsModels from source).</p>\n"}], "owner": {"reputation": 67, "user_id": 4554533, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/306619bd770ff8d05d4fe8993e7a28c7?s=128&d=identicon&r=PG&f=1", "display_name": "&#193;lvaro Lemos", "link": "https://stackoverflow.com/users/4554533/%c3%81lvaro-lemos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 912, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1487338910, "creation_date": 1484775957, "last_edit_date": 1484820661, "question_id": 41730036, "link": "https://stackoverflow.com/questions/41730036/typeerror-on-convolution-filter-call-from-statsmodels", "title": "TypeError on convolution_filter call from statsmodels", "body": "<p>I'm struggling to do time series decomposition with the <code>statsmodels</code>'s <code>tsa.seasonal_decompose</code> function, which calls the <code>convolution_filter</code> function and raises the following TypeError:</p>\n\n<blockquote>\n  <p>TypeError: 'numpy.float64' object cannot be interpreted as an index</p>\n</blockquote>\n\n<p>For instance, when I run the code below (provided by the <a href=\"http://statsmodels.sourceforge.net/stable/release/version0.6.html#seasonal-decomposition\" rel=\"nofollow noreferrer\">StatsModels website</a>):</p>\n\n<pre><code>import statsmodels.api as sm\n\ndta = sm.datasets.co2.load_pandas().data\n# deal with missing values. see issue\ndta.co2.interpolate(inplace=True)\n\nres = sm.tsa.seasonal_decompose(dta.co2)\nres.plot()\n</code></pre>\n\n<p>I get the following stack trace:</p>\n\n<pre><code>--------------------------------------------------------------------------- TypeError                                 Traceback (most recent call last) &lt;ipython-input-11-b43f2eda010e&gt; in &lt;module&gt;()\n      5 dta.co2.interpolate(inplace=True)\n      6 \n----&gt; 7 res = sm.tsa.seasonal_decompose(dta.co2)\n      8 res.plot()\n\n.../statsmodels/tsa/seasonal.pyc in seasonal_decompose(x, model, filt, freq)\n     86             filt = np.repeat(1./freq, freq)\n     87 \n---&gt; 88     trend = convolution_filter(x, filt)\n     89 \n     90     # nan pad for conformability - convolve doesn't do it\n\n.../statsmodels/tsa/filters/filtertools.pyc in convolution_filter(x, filt, nsides)\n    301                 result[:, i] = signal.convolve(x[:, i], np.r_[0, filt[:, i]],\n    302                                                mode='valid')\n--&gt; 303     result = _pad_nans(result, trim_head, trim_tail)\n    304     if _pandas_wrapper:\n    305         return _pandas_wrapper(result)\n\n.../statsmodels/tsa/filters/filtertools.pyc in _pad_nans(x, head, tail)\n     26             return x\n     27         elif head and tail:\n---&gt; 28             return np.r_[[np.nan] * head, x, [np.nan] * tail]\n     29         elif tail is None:\n     30             return np.r_[[np.nan] * head, x]\n\nTypeError: 'numpy.float64' object cannot be interpreted as an index\n</code></pre>\n\n<p>I've tried with a few other examples and faced the same problem on the Numpy's <code>_pad_nans</code> function. I'm using Numpy 1.12.0 and StatsModels 0.6.1.</p>\n\n<p>Does anyone know what's happening?</p>\n"}, {"tags": ["python", "grid", "crossword"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1484775912, "post_id": 41729990, "comment_id": 70654491, "body": "This sounds like the question of a programming contest I once solved. This sounds like the ideal task for a <i>constraint (logic) programming</i> solver."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7437907"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1484776250, "post_id": 41729990, "comment_id": 70654654, "body": "Willem Van Onsem can you help me?"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1484776346, "post_id": 41729990, "comment_id": 70654698, "body": "Welcome to StackOverflow.  Please read and follow the posting guidelines in the help documentation.  <a href=\"http://stackoverflow.com/help/mcve\">Minimal, complete, verifiable example</a> applies here.  We cannot effectively help you until you post your MCVE code and accurately describe the problem. &quot;some of them are getting mixed up&quot; is not a problem description."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1484776372, "post_id": 41729990, "comment_id": 70654712, "body": "<a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">ericlippert.com/2014/03/05/how-to-debug-small-programs</a>"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1484777731, "post_id": 41729990, "comment_id": 70655305, "body": "By the way, this is a &quot;word search&quot; puzzle, not a crossword."}], "answers": [{"tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": true, "score": 0, "last_activity_date": 1484777710, "creation_date": 1484777710, "answer_id": 41730414, "question_id": 41729990, "link": "https://stackoverflow.com/questions/41729990/how-to-generate-a-word-search-grid-that-enables-words-using-the-same-letter/41730414#41730414", "title": "How to generate a word search grid that enables words using the same letter", "body": "<p>I see two basic problems: you overwrite existing words with new ones, and you write beyond the end of the actual word.</p>\n\n<p>The first problem is that you haven't bothered to look for prior words before you add new ones.\nThe second problem is because you fail to strip white-space out of the input.</p>\n\n<p>I added some simple debugging instrumentation to track this.  First, I initialised the grid to dots instead of letters, so I could see what's going on:</p>\n\n<pre><code>for j in range(p):\n    matrix[i].append(\".\")\n</code></pre>\n\n<p>Then, I printed the matrix after adding each word:</p>\n\n<pre><code>for i in range(0,len(word)):\n    grid[y+d[1]*i][x+d[0]*i]=word[i]\n\nprint \"\\nUpdated grid with\\t\", word, \"\\n\",\nfor row in range(n):\n    print \" \".join(matrix[row])\n\nreturn grid\n</code></pre>\n\n<p>Then I ran it and got this output:</p>\n\n<pre><code>Updated grid with   white   \n. . . . . . . . .\n. . . . . . . . .\n. w h i t e     .\n. . . . . . . . .\n. . . . . . . . .\n. . . . . . . . .\n. . . . . . . . .\n. . . . . . . . .\n. . . . . . . . .\n\nUpdated grid with     kcalb \n.   . . . . . . .\n. .   . . . . . .\n. w h k t e     .\n. . . . c . . . .\n. . . . . a . . .\n. . . . . . l . .\n. . . . . . . b .\n. . . . . . . . .\n. . . . . . . . .\n\nUpdated grid with   blue   \n.   . . . . . . .\n. . b . . . . . .\n. w h l t e     .\n. . . . u . . . .\n. . . . . e . . .\n. . . . . .   . .\n. . . . . . .   .\n. . . . . . . . .\n. . . . . . . . .\n\nUpdated grid with     neerg \n    . . . . . . .\n.   b . . . . . .\n. w n l t e     .\n. . . e u . . . .\n. . . . e e . . .\n. . . . . r   . .\n. . . . . . g   .\n. . . . . . . . .\n. . . . . . . . .\n</code></pre>\n\n<p>You see what's happening: you write too far, and you crash over existing entries.</p>\n\n<p><strong>SOLUTION</strong></p>\n\n<p>I recommend that you follow what I've done so far: initialize to some non-letter that you find easy to read.  Now, before you enter a word into the grid check that the path is clear.  Even better, allow for writing across previous words if the intersecting letters match.</p>\n\n<p><em>After</em> you've placed all the words from the list, <em>then</em> fill in the rest of the grid.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7437907"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2349, "favorite_count": 0, "accepted_answer_id": 41730414, "answer_count": 1, "score": 1, "last_activity_date": 1484843831, "creation_date": 1484775748, "last_edit_date": 1484843831, "question_id": 41729990, "link": "https://stackoverflow.com/questions/41729990/how-to-generate-a-word-search-grid-that-enables-words-using-the-same-letter", "title": "How to generate a word search grid that enables words using the same letter", "body": "<p>I'm trying to make a word-search grid with a list of given words.\nMy problem is that some of the words don't appear properly.</p>\n\n<p><strong>I have updated the code, see below</strong></p>\n\n<p>I have tried to fix the previous error and now I am getting an out of range error that i cant fix, if anyone can help I would appreciate</p>\n\n<p>Note 1: I didnt include all the program functions, if required I will include them later</p>\n\n<p>The program takes in a text file like this:</p>\n\n<blockquote>\n<pre><code>9 9  \nwhite  \nblack  \nblue  \ngreen  \npink  \nyellow  \nred  \ngrey  \npurple  \n</code></pre>\n</blockquote>\n\n<p>where the first 2 numbers in the file are the dimensions of the grid, and the rest is the words to place in the grid.</p>\n\n<pre><code>import random\nimport string\nfi=input('Insert the entry file name(entry.txt): ')\nfo=input('Insert the exit file name(.txt): ')\ngrid_size=[]\nwords=[]\nmatrix=[]\n\ndef read_file(storage):\n    file=open(storage)\n\n    n=file.readline()\n    lista=n.split()\n    lista=list(map(int,lista))  #sets the size of the grid\n    for i in lista:\n        grid_size.append(i)\n\n    for line in file:\n        line=line.replace(\"\\n\",\"\")\n        words.append(line)\n    file.close()\n\ndef grid_generator(grid_size):\n    n, p = grid_size\n    for i in range(n):\n        matriz.append([])\n        for j in range(p):\n            matriz[i].append(\".\")   \n\ndef sets_word_inside(grid_size, word, grid):\n      n, p = grid_size\n      word = random.choice([word,word[::-1]])  \n                #horizontal,vertical,diagonal\n      d = random.choice([[1,0],[0,1],[1,1]]) \n\n      xsize = n  if d[0] == 0 else n  - len(word)\n      ysize = p if d[1] == 0 else p - len(word)\n\n      x= random.randrange(0,xsize)\n      y= random.randrange(0,ytsize)  #position\n\n      for i, letter in enumerate(word):\n           char = grid[y+d[1]*i][x+d[0]*i]   \n           if char != \" \" and char != letter:\n               # If it reaches an already filled space - restart the            process.\n               # The second condition allow the words that cross with repeated words are created.\n\n               return False\n           grid[y+d[1]*i][x+d[0]*i] = letter[i]\n      return True\n</code></pre>\n\n<p>For now the output of the code is something like this:</p>\n\n<pre><code>9  \nwhite  \nblack  \nblue  \ngreen  \npink  \nyellow  \nred  \ngrey  \npurple  \np w b i t y l d i  \np v w o l e e y t  \nx g a x j r i m g  \nq i c j b g j e x  \ns s k g q l g r r  \np i n k i o u t r  \ne l p r u p g e o  \nl a b l s r p g y  \nc o r y e u f r x  \n</code></pre>\n"}, {"tags": ["python", "function", "python-3.x", "tkinter", "radio-button"], "comments": [{"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1484776861, "post_id": 41729965, "comment_id": 70654955, "body": "<code>&quot;Is &quot; + str(and)</code> or <code>&quot;Is {}&quot;.format(ans)</code> or <code>&quot;Is %d&quot; % ans</code> but first <code>ans = int(a) + int(b)</code> or <code>ans = float(a) + float(b)</code> because <code>a</code> and <code>b</code> are strings."}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1484777054, "post_id": 41729965, "comment_id": 70655046, "body": "some <code>tkinter</code> doc: <a href=\"http://effbot.org/tkinterbook/tkinter-index.htm\" rel=\"nofollow noreferrer\">effbot.org/tkinterbook/tkinter-index.htm</a> - It describe <code>tk</code>, not <code>ttk</code> but most widgets has the same options/methods"}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1484777321, "post_id": 41729965, "comment_id": 70655139, "body": "you can use single <code>StrinVar</code> with  both <code>Radiobutton(variables=...)</code> to get and set selection."}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1484777711, "post_id": 41729965, "comment_id": 70655294, "body": "remove old text <code>self.results.delete(0, &#39;end&#39;)</code> and put new text <code>self.results.insert( 0, &quot;Hello World&quot;)</code>. Or use <code>StringVar</code> with <code>Entry(textvariable=...)</code>. See link in previous comment"}], "answers": [{"tags": [], "owner": {"reputation": 12061, "user_id": 6415268, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hHWNQ.png?s=128&g=1", "display_name": "j_4321", "link": "https://stackoverflow.com/users/6415268/j-4321"}, "is_accepted": true, "score": 0, "last_activity_date": 1484815707, "creation_date": 1484815707, "answer_id": 41737400, "question_id": 41729965, "link": "https://stackoverflow.com/questions/41729965/how-to-output-the-results-in-an-entry-widget-in-tkinter/41737400#41737400", "title": "How to output the results in an entry widget in tkinter", "body": "<p>1) To put text in an Entry widget, use the <code>insert</code> method:</p>\n\n<pre><code>entry.delete(0, \"end\") # clear entry\nentry.insert(0, \"my text\") # insert new text\n</code></pre>\n\n<p>2) Associate a StringVar with your radiobuttons and use its <code>get</code> method to know which button is selected</p>\n\n<pre><code>import tkinter as tk\nfrom tkinter import ttk\n\ndef callback():\n    if var.get() == \"r1\":\n        print(\"r1 is selected\")\n    elif var.get() == \"r2\":\n        print(\"r2 is selected\")\n    else:\n        print(\"None\")\n\nroot = tk.Tk()\nvar = tk.StringVar(root, value=\"\")\nttk.Radiobutton(root, variable=var, value=\"r1\", text=\"r1\").pack()\nttk.Radiobutton(root, variable=var, value=\"r2\", text=\"r2\").pack()\nttk.Button(root, text=\"print\", command=callback).pack()\nroot.mainloop()\n</code></pre>\n\n<p>To clear the radiobutton selection, you can do <code>var.set(\"\")</code>.</p>\n\n<p>3) It's a rather subjective question. First, class name are usually capitalized. Personally, I make my <code>Main</code> class inherit from <code>tk.Tk</code>:</p>\n\n<pre><code>class Main(tk.Tk):\n    def __init__(self):\n        tk.Tk.__init__(self)\n        # window configuration\n        self.title('Calculation program')\n        #... \n        # widgets\n        ttk.Label(self, text=\"example\").grid()\n        #... \n\n        self.mainloop()\n\nif __name__ == \"__main__\":\n    Main()   \n</code></pre>\n\n<p>And, as it was said in the comments, <code>a</code> and <code>b</code> should be converted to float or int before making calculations and then do <code>\"Is %d\" % ans</code> or any of the other proposition of furas in the comments. </p>\n\n<p>I recommend you this website: <a href=\"http://infohost.nmt.edu/tcc/help/pubs/tkinter/web/index.html\" rel=\"nofollow noreferrer\">http://infohost.nmt.edu/tcc/help/pubs/tkinter/web/index.html</a> to get the list of all options and methods of each tkinter/ttk widget.</p>\n"}], "owner": {"reputation": 177, "user_id": 4191602, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/S5jDQ.jpg?s=128&g=1", "display_name": "flavinsky", "link": "https://stackoverflow.com/users/4191602/flavinsky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2312, "favorite_count": 0, "accepted_answer_id": 41737400, "answer_count": 1, "score": -1, "last_activity_date": 1484817329, "creation_date": 1484775618, "last_edit_date": 1484817329, "question_id": 41729965, "link": "https://stackoverflow.com/questions/41729965/how-to-output-the-results-in-an-entry-widget-in-tkinter", "title": "How to output the results in an entry widget in tkinter", "body": "<p>I am struggling with this small application. I fallowed many forum and answer but I couldn't find the right answer.</p>\n\n<p>I marked in the code the problems I am having:</p>\n\n<ul>\n<li><p>The first problem is I could not find a way for output the results in a ttk entry widget.</p></li>\n<li><p>The second problem is how to execute different code depending on the radiobutton checked.</p></li>\n<li><p>The third problem is how can I make the program with better syntax?</p></li>\n</ul>\n\n<p>Code:</p>\n\n<pre><code>from tkinter import ttk\nfrom tkinter import *\nfrom tkinter import messagebox\n\nclass main_window:\n    def __init__(self, master = None):\n\n        self.frame1 = ttk.Frame(master)\n        self.frame1.pack()\n\n        master.title('Calculation program')\n        master.resizable(False, False)\n        master.configure(background='blue')\n\n        self.radiob1 = ttk.Radiobutton(self.frame1, value=\"M\", text=\"Molar (M)\")\n        self.radiob1.grid(column=0, row=1, sticky=\"nw\", padx=25)\n        self.radiob2 = ttk.Radiobutton(self.frame1, value=\"mM\", text=\"milliMolar (mM)\")\n        self.radiob2.grid(column=0, row=2, sticky=\"nw\", padx=25)\n\n        self.mol_weight = ttk.Entry(self.frame1, width=24, font=('Arial', 10))\n        self.mol_weight.grid(row=0, column=3, padx=3, pady=5)\n        self.amount = ttk.Entry(self.frame1, width=24, font=('Arial', 10))\n        self.amount.grid(row=1, column=3, padx=3, pady=5)\n        self.results = ttk.Entry(self.frame1, width=15, font=('Cambria', 10))\n        self.results.grid(row=6, column=3, padx=5, pady=5)\n\n        ttk.Label(self.frame1, text='Molecular Weight:').grid(row=0, column=1, padx=0, pady=3, sticky='w')\n        ttk.Label(self.frame1, text='Amount:').grid(row=1, column=1, padx=0, pady=3, sticky='w')\n        ttk.Label(self.frame1, text='Results').grid(row=5, column=3, padx=0, pady=6, sticky='s')\n\n        ttk.Button(self.frame1, text='Calculate',\n                   command=self.calculate).grid(row=4, column=0, padx=5, pady=5, sticky='e')\n        ttk.Button(self.frame1, text='Clear',\n                   command=self.clear).grid(row=4, column=1, padx=5, pady=5, sticky='w')\n\n    def calculate(self):\n        if self.radiob1.SELECTED??:\n            return self.molare()\n        elif self.radiob2.SELECTED??:\n            return self.millimolar\n        else:\n            messagebox.showinfo(title=\"No good, you have to select one!\")\n        messagebox.showinfo(title='Calculations', message='Calculations Completed!')\n\n    def molare(self):\n        a = self.mol_weight.get()\n        b = self.amount.get()\n        ans = a + b\n        self.results[\"Results\"] = \"Is: \" + ans [???]\n\n    def millimolar(self):\n        a = self.mol_weight.get()\n        b = self.amount.get()\n        ans = a - b\n        self.results[\"Results\"] = \"Is: \" + ans  [???]\n\n    def clear(self):\n        self.mol_weight.delete(0, 'end')\n        self.amount.delete(0, 'end')\n        self.radiob1.DESELECT() ??\n        self.radiob2.DESELECT()??\n\ndef main():\n    root = Tk()\n    Main_window = main_window(root)\n    root.mainloop()\nif __name__ == \"__main__\": \n    main()\n</code></pre>\n"}, {"tags": ["python", "cassandra", "nodetool"], "comments": [{"owner": {"reputation": 15382, "user_id": 266337, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WKfHO.jpg?s=128&g=1", "display_name": "Chris Lohfink", "link": "https://stackoverflow.com/users/266337/chris-lohfink"}, "edited": false, "score": 0, "creation_date": 1484776792, "post_id": 41729957, "comment_id": 70654920, "body": "what load balancer?"}, {"owner": {"reputation": 143, "user_id": 5422887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/36b5989aefca5ffd937a2b80f068c580?s=128&d=identicon&r=PG&f=1", "display_name": "akram1rekik", "link": "https://stackoverflow.com/users/5422887/akram1rekik"}, "reply_to_user": {"reputation": 15382, "user_id": 266337, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WKfHO.jpg?s=128&g=1", "display_name": "Chris Lohfink", "link": "https://stackoverflow.com/users/266337/chris-lohfink"}, "edited": false, "score": 0, "creation_date": 1484777477, "post_id": 41729957, "comment_id": 70655207, "body": "for example for OVH The IP Load balancing is an IP address carried by the OVH network that distributes the load between the IP addresses of your various services in the data centers. It gives you better performance when faced with high traffic, fault tolerance and optimized response times, as close to users as possible with Anycast technology."}, {"owner": {"reputation": 15382, "user_id": 266337, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WKfHO.jpg?s=128&g=1", "display_name": "Chris Lohfink", "link": "https://stackoverflow.com/users/266337/chris-lohfink"}, "edited": false, "score": 1, "creation_date": 1484777776, "post_id": 41729957, "comment_id": 70655326, "body": "You shouldn&#39;t use load balancers in between your application and Cassandra, its an anti pattern. Let the driver and coordinator pick."}, {"owner": {"reputation": 143, "user_id": 5422887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/36b5989aefca5ffd937a2b80f068c580?s=128&d=identicon&r=PG&f=1", "display_name": "akram1rekik", "link": "https://stackoverflow.com/users/5422887/akram1rekik"}, "reply_to_user": {"reputation": 15382, "user_id": 266337, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WKfHO.jpg?s=128&g=1", "display_name": "Chris Lohfink", "link": "https://stackoverflow.com/users/266337/chris-lohfink"}, "edited": false, "score": 0, "creation_date": 1484779481, "post_id": 41729957, "comment_id": 70656009, "body": "so what should I remove in the code then"}], "owner": {"reputation": 143, "user_id": 5422887, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/36b5989aefca5ffd937a2b80f068c580?s=128&d=identicon&r=PG&f=1", "display_name": "akram1rekik", "link": "https://stackoverflow.com/users/5422887/akram1rekik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1762, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1484775588, "creation_date": 1484775588, "question_id": 41729957, "link": "https://stackoverflow.com/questions/41729957/script-python-using-nodetool-for-health-check", "title": "script python using nodetool for health check", "body": "<p>I am looking for a  nodes health check python script  and I found the following script</p>\n\n<pre><code>from bottle import route, run\nimport glob\nimport json\nimport os\nimport subprocess\nimport time\nimport socket\n\n # This method is used to check the status of health of the node\n # on which this script is running. It makes used of nodetool and figures out the\n #  status of node.\n@route('/check')\ndef getNodeStatus():\n        list = []\n        result = 1\n        p = os.popen(\"nodetool status\")\n        while 1:\n            line = p.readline()\n            print \"Line\", line\n            if not line ==\"\":\n                        ipData = line.split(\" \")\n                        if len(ipData) &gt; 3:\n                                localPort = socket.gethostbyname(socket.gethostname())\n                                if ipData[2] == localPort:\n                                                if ipData[0] == \"UN\":\n                                                        return  \"cassandra is running\"\n            if not line: break\n        return \"cassandra is Not running\"\n\n\n# This method will tell overall health on the cluster by returning 0 for healthy cluster and 1\n# as a response if more than onw third of nodes are unhealthy.\n@route('/health')\ndef getclusterStatus():\n        p = os.popen(\"nodetool status\")\n        count = 0\n        healthynodes =0\n        while 1:\n            line = p.readline()\n            if not line ==\"\":\n                        ipData = line.split(\" \")\n                        if len(ipData) &gt; 3:\n                                #Check for ipNodes\n                                ipNode = ipData[2].split(\".\")\n                                if len(ipNode) == 4:\n                                        count = count +1\n                                        localPort = socket.gethostbyname(socket.gethostname())\n                                        if ipData[0] == \"UN\":\n                                               healthynodes = healthynodes + 1\n            if not line: break\n       # return \"cassandra is Not running\"\n        health = healthynodes/count *100\n        if(health &gt; 66):\n               return \"cassandra is running\"\n        return \"cassandra is Not running\"\n\ndef main():\n    run(host='localhost', port=8080)\n\nif __name__ == '__main__':\n    main()\n</code></pre>\n\n<p>it seems like if you have less than 2/3rds of the nodes running, that you will take ALL of them out of the load balancer. That seems wrong or not ?\nany help please</p>\n"}, {"tags": ["python", "jenkins", "automated-tests", "jenkins-plugins", "pytest"], "comments": [{"owner": {"reputation": 2627, "user_id": 3866610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a86160be9ee19d4597efee7395f0f12a?s=128&d=identicon&r=PG", "display_name": "Piotr Dawidiuk", "link": "https://stackoverflow.com/users/3866610/piotr-dawidiuk"}, "edited": false, "score": 0, "creation_date": 1484863511, "post_id": 41729928, "comment_id": 70697656, "body": "Try to run it with <code>PYTHONUNBUFFERED</code> environment variable - <code>PYTHONUNBUFFERED=1 pytest ...</code>"}, {"owner": {"reputation": 3433, "user_id": 534337, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/r1WIq.jpg?s=128&g=1", "display_name": "sridhar249", "link": "https://stackoverflow.com/users/534337/sridhar249"}, "reply_to_user": {"reputation": 2627, "user_id": 3866610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a86160be9ee19d4597efee7395f0f12a?s=128&d=identicon&r=PG", "display_name": "Piotr Dawidiuk", "link": "https://stackoverflow.com/users/3866610/piotr-dawidiuk"}, "edited": false, "score": 0, "creation_date": 1485460768, "post_id": 41729928, "comment_id": 70946026, "body": "@PiotrDawidiuk that did not help. Actually, when i run the tests locally on my machine from command line, with or with out PYTHONUNBUFFERED=1, i see the test results as and when the tests pass/fail, without having to wait for all tests to finish. I see the problem only when run on jenkins."}, {"owner": {"reputation": 2627, "user_id": 3866610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a86160be9ee19d4597efee7395f0f12a?s=128&d=identicon&r=PG", "display_name": "Piotr Dawidiuk", "link": "https://stackoverflow.com/users/3866610/piotr-dawidiuk"}, "edited": false, "score": 0, "creation_date": 1485462929, "post_id": 41729928, "comment_id": 70947116, "body": "@sridhar247 check this out <a href=\"http://stackoverflow.com/questions/11631951/jenkins-console-output-not-in-realtime\" title=\"jenkins console output not in realtime\">stackoverflow.com/questions/11631951/&hellip;</a>"}, {"owner": {"reputation": 2627, "user_id": 3866610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a86160be9ee19d4597efee7395f0f12a?s=128&d=identicon&r=PG", "display_name": "Piotr Dawidiuk", "link": "https://stackoverflow.com/users/3866610/piotr-dawidiuk"}, "edited": false, "score": 0, "creation_date": 1485463134, "post_id": 41729928, "comment_id": 70947233, "body": "it looks promising: <a href=\"http://stackoverflow.com/a/26310484/3866610\">stackoverflow.com/a/26310484/3866610</a>"}], "owner": {"reputation": 3433, "user_id": 534337, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/r1WIq.jpg?s=128&g=1", "display_name": "sridhar249", "link": "https://stackoverflow.com/users/534337/sridhar249"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 499, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1485461632, "creation_date": 1484775478, "last_edit_date": 1485461632, "question_id": 41729928, "link": "https://stackoverflow.com/questions/41729928/pytest-xdist-plugin-jenkins-test-results-are-not-displayed-on-the-jenkins-con", "title": "pytest xdist plugin + jenkins: test results are not displayed on the jenkins console until all the tests complete", "body": "<p>I see that when pytest xdist plugin is used to run tests on jenkins, the test results are printed on the jenkins console only after all the tests finish executing.\nUntil all the tests finish, all i see is a spinner.\n<a href=\"https://i.stack.imgur.com/CVqHf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CVqHf.png\" alt=\"enter image description here\"></a></p>\n\n<p>Where as when run the tests on jenkins without using the xdist plugin, the results are printed in real time, as and when a test is passed/failed.</p>\n\n<p>Is there a way to get the test results in real time when xdist plugin is used?</p>\n"}, {"tags": ["python", "django", "django-templates"], "answers": [{"comments": [{"owner": {"reputation": 5521, "user_id": 6733153, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/64695679246992dbd668a2b4cd46f01e?s=128&d=identicon&r=PG&f=1", "display_name": "Zorgan", "link": "https://stackoverflow.com/users/6733153/zorgan"}, "edited": false, "score": 0, "creation_date": 1484776775, "post_id": 41730032, "comment_id": 70654912, "body": "<code>{% for j in i.commentscore_set.all %}</code> still isn&#39;t working"}, {"owner": {"reputation": 38630, "user_id": 1324033, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/PaonW.png?s=128&g=1", "display_name": "Sayse", "link": "https://stackoverflow.com/users/1324033/sayse"}, "reply_to_user": {"reputation": 5521, "user_id": 6733153, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/64695679246992dbd668a2b4cd46f01e?s=128&d=identicon&r=PG&f=1", "display_name": "Zorgan", "link": "https://stackoverflow.com/users/6733153/zorgan"}, "edited": false, "score": 0, "creation_date": 1484777044, "post_id": 41730032, "comment_id": 70655041, "body": "@Zorgan - Are you sure you have scores for the given comments? You can check this by setting <code>score</code> in your view to <code>CommentScore.objects.filter(comment__destination=id)</code>"}, {"owner": {"reputation": 5521, "user_id": 6733153, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/64695679246992dbd668a2b4cd46f01e?s=128&d=identicon&r=PG&f=1", "display_name": "Zorgan", "link": "https://stackoverflow.com/users/6733153/zorgan"}, "edited": false, "score": 0, "creation_date": 1484777587, "post_id": 41730032, "comment_id": 70655244, "body": "What do you mean? They don&#39;t have scores yet as i&#39;ve only just created the model, but it should default to 0 if there is no score. And the field in my original question, <code>user</code>, isnt showing up either."}, {"owner": {"reputation": 38630, "user_id": 1324033, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/PaonW.png?s=128&g=1", "display_name": "Sayse", "link": "https://stackoverflow.com/users/1324033/sayse"}, "reply_to_user": {"reputation": 5521, "user_id": 6733153, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/64695679246992dbd668a2b4cd46f01e?s=128&d=identicon&r=PG&f=1", "display_name": "Zorgan", "link": "https://stackoverflow.com/users/6733153/zorgan"}, "edited": false, "score": 0, "creation_date": 1484777842, "post_id": 41730032, "comment_id": 70655358, "body": "@Zorgan - I don&#39;t understand, if there isn&#39;t anything to iterate over then of course theres nothing it will be able to show, I presume you&#39;re looking for <code>{% empty %}</code> also."}, {"owner": {"reputation": 5521, "user_id": 6733153, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/64695679246992dbd668a2b4cd46f01e?s=128&d=identicon&r=PG&f=1", "display_name": "Zorgan", "link": "https://stackoverflow.com/users/6733153/zorgan"}, "edited": false, "score": 0, "creation_date": 1484778097, "post_id": 41730032, "comment_id": 70655455, "body": "The <code>default=0</code> so <code>0</code> should show up instead of nothing. And <code>user</code> isn&#39;t showing up which is unrelated to scoring so there must be another problem."}, {"owner": {"reputation": 38630, "user_id": 1324033, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/PaonW.png?s=128&g=1", "display_name": "Sayse", "link": "https://stackoverflow.com/users/1324033/sayse"}, "reply_to_user": {"reputation": 5521, "user_id": 6733153, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/64695679246992dbd668a2b4cd46f01e?s=128&d=identicon&r=PG&f=1", "display_name": "Zorgan", "link": "https://stackoverflow.com/users/6733153/zorgan"}, "edited": false, "score": 0, "creation_date": 1484778157, "post_id": 41730032, "comment_id": 70655487, "body": "@Zorgan - Try adding the <code>{% empty %}</code> as per my edit and hopefully that will make it clearer.."}, {"owner": {"reputation": 5521, "user_id": 6733153, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/64695679246992dbd668a2b4cd46f01e?s=128&d=identicon&r=PG&f=1", "display_name": "Zorgan", "link": "https://stackoverflow.com/users/6733153/zorgan"}, "edited": false, "score": 0, "creation_date": 1484778287, "post_id": 41730032, "comment_id": 70655540, "body": "Ok so I tried that and it rendered <code>No Scores Found</code>. What does this mean?"}, {"owner": {"reputation": 38630, "user_id": 1324033, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/PaonW.png?s=128&g=1", "display_name": "Sayse", "link": "https://stackoverflow.com/users/1324033/sayse"}, "reply_to_user": {"reputation": 5521, "user_id": 6733153, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/64695679246992dbd668a2b4cd46f01e?s=128&d=identicon&r=PG&f=1", "display_name": "Zorgan", "link": "https://stackoverflow.com/users/6733153/zorgan"}, "edited": false, "score": 0, "creation_date": 1484778420, "post_id": 41730032, "comment_id": 70655594, "body": "@Zorgan - The default you speak of is the default value for a <i>field</i> on an <i>instance</i> of a <code>CommentScore</code>, you have no instances, therefore there is nothing to loop over."}, {"owner": {"reputation": 5521, "user_id": 6733153, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/64695679246992dbd668a2b4cd46f01e?s=128&d=identicon&r=PG&f=1", "display_name": "Zorgan", "link": "https://stackoverflow.com/users/6733153/zorgan"}, "edited": false, "score": 0, "creation_date": 1484778596, "post_id": 41730032, "comment_id": 70655663, "body": "It&#39;s getting abit clearer now, so can you just suggest how I can create an instance of CommentScore to see if it works?"}], "tags": [], "owner": {"reputation": 38630, "user_id": 1324033, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/PaonW.png?s=128&g=1", "display_name": "Sayse", "link": "https://stackoverflow.com/users/1324033/sayse"}, "is_accepted": false, "score": 0, "last_activity_date": 1484777865, "last_edit_date": 1484777865, "creation_date": 1484775937, "answer_id": 41730032, "question_id": 41729923, "link": "https://stackoverflow.com/questions/41729923/foreign-key-not-rendering-in-template/41730032#41730032", "title": "Foreign key not rendering in template", "body": "<p>when using <code>_set</code>, the reverse relationship lookup, you must provide the full model name, you must also specify which instance this list of related models this \"set\" is for so it should be </p>\n\n<pre><code>{% for j in i.commentscore_set.all %}\n{% empty %}\n     No scores found\n{% endfor %}\n</code></pre>\n\n<p>You may also wish to set a <code>related_name</code> for the foreign key </p>\n\n<pre><code>comment = models.ForeignKey(Comment, related_name='scores')\n...\n{% for j in i.scores.all %}\n</code></pre>\n"}], "owner": {"reputation": 5521, "user_id": 6733153, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/64695679246992dbd668a2b4cd46f01e?s=128&d=identicon&r=PG&f=1", "display_name": "Zorgan", "link": "https://stackoverflow.com/users/6733153/zorgan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1484777865, "creation_date": 1484775467, "question_id": 41729923, "link": "https://stackoverflow.com/questions/41729923/foreign-key-not-rendering-in-template", "title": "Foreign key not rendering in template", "body": "<p>I'm building a commenting system, which is working fine but i'm now trying to integrate voting. So I made another model to handle that and I tried to pair it using <code>ForeignKey</code>. Not too familiar with <code>ForeignKey</code> but i've looked at some other answers here to see how to render it in the template. I tried that using the nested for loop in my template below but <code>{{ j.user }}</code> doesn't render anything. Can anyone tell me what I'm doing wrong?</p>\n\n<p><strong>models.py</strong></p>\n\n<pre><code>class Comment(models.Model):\n    destination = models.CharField(default='1', max_length=12, blank=True)\n    author = models.CharField(max_length=120, blank=True)\n    comment_id = models.IntegerField(default=1)\n    parent_id = models.IntegerField(default=0)\n    comment_text = models.TextField(max_length=350, blank=True)\n    timestamp = models.DateTimeField(default=timezone.now, blank=True)\n\n    def __str__(self):\n        return self.comment_text\n\nclass CommentScore(models.Model):\n    user = models.ForeignKey(User)\n    comment = models.ForeignKey(Comment)\n    upvotes = models.IntegerField(default=0)\n    downvotes = models.IntegerField(default=0)\n</code></pre>\n\n<p><strong>views.py</strong></p>\n\n<pre><code>    ...\n\n    comment_list = Comment.objects.filter(destination=id)\n    score = CommentScore.objects.all()\n\n    context = {\n        'score': score,\n        'comment_list': comment_list,\n    }\n\n    return render(request, 'article.html', context)\n</code></pre>\n\n<p><strong>template</strong></p>\n\n<pre><code>{% for i in comment_list %}\n    &lt;div class='comment_div'&gt;\n        &lt;h3&gt;{{ i.author }}&lt;/h3&gt;\n        {% for j in comment_list.score_set.all %}\n            {{ j.user }} #nothing comes up\n        {% endfor %}\n        &lt;p&gt;{{ i.comment_text }}&lt;/p&gt;\n    &lt;/div&gt;\n{% endfor %}\n</code></pre>\n"}, {"tags": ["python", "mysql", "mqtt", "mosquitto"], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 7247991, "user_type": "registered", "profile_image": "https://graph.facebook.com/655876827927751/picture?type=large", "display_name": "Istabraq Mahmood", "link": "https://stackoverflow.com/users/7247991/istabraq-mahmood"}, "edited": false, "score": 0, "creation_date": 1484776087, "post_id": 41729936, "comment_id": 70654586, "body": "<code>File &quot;sub3.py&quot;, line 29, in &lt;module&gt;     client.loop_forever()</code>"}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "reply_to_user": {"reputation": 21, "user_id": 7247991, "user_type": "registered", "profile_image": "https://graph.facebook.com/655876827927751/picture?type=large", "display_name": "Istabraq Mahmood", "link": "https://stackoverflow.com/users/7247991/istabraq-mahmood"}, "edited": false, "score": 0, "creation_date": 1484776320, "post_id": 41729936, "comment_id": 70654686, "body": "@IstabraqMahmood: did the exception <i>change</i>, or is it still otherwise exactly the same? Does <code>print(save_to_db)</code> just before the <code>client.loop_forever()</code> line produce output?"}, {"owner": {"reputation": 21, "user_id": 7247991, "user_type": "registered", "profile_image": "https://graph.facebook.com/655876827927751/picture?type=large", "display_name": "Istabraq Mahmood", "link": "https://stackoverflow.com/users/7247991/istabraq-mahmood"}, "edited": false, "score": 0, "creation_date": 1484776793, "post_id": 41729936, "comment_id": 70654923, "body": "i have updated my code with new error i put <code>client.loop_forever()</code> at the end of the code"}, {"owner": {"reputation": 21, "user_id": 7247991, "user_type": "registered", "profile_image": "https://graph.facebook.com/655876827927751/picture?type=large", "display_name": "Istabraq Mahmood", "link": "https://stackoverflow.com/users/7247991/istabraq-mahmood"}, "edited": false, "score": 0, "creation_date": 1484777943, "post_id": 41729936, "comment_id": 70655397, "body": "Is there any tutorial using python to Mysql using MQTT ?"}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "reply_to_user": {"reputation": 21, "user_id": 7247991, "user_type": "registered", "profile_image": "https://graph.facebook.com/655876827927751/picture?type=large", "display_name": "Istabraq Mahmood", "link": "https://stackoverflow.com/users/7247991/istabraq-mahmood"}, "edited": false, "score": 0, "creation_date": 1484778581, "post_id": 41729936, "comment_id": 70655655, "body": "@IstabraqMahmood: that&#39;s a <b>new</b> error, one that you could either ask a new question about, or find ready solutions to on Stack Overflow (I rolled back the edit). But you are missing a comma after <code>msg.payload</code>: <code>cursor.execute(&quot;INSERT INTO pulses (pulse) VALUES (%s)&quot;, (msg.payload,))</code>; without the comma, there is no tuple there."}], "tags": [], "owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "is_accepted": true, "score": 2, "last_activity_date": 1484775500, "creation_date": 1484775500, "answer_id": 41729936, "question_id": 41729894, "link": "https://stackoverflow.com/questions/41729894/python-mysql-nameerror-global-name-save-to-db-is-not-defined/41729936#41729936", "title": "Python-Mysql NameError: global name &#39;save_to_db&#39; is not defined", "body": "<p>You start the loop too early:</p>\n\n<pre><code>client.loop_forever()\n</code></pre>\n\n<p>Any code defined <em>after</em> this line has not yet executed, so any function objects are not defined yet.</p>\n\n<p>Move that line down to <em>below</em> any functions you need to exist when the loop runs.</p>\n"}], "owner": {"reputation": 21, "user_id": 7247991, "user_type": "registered", "profile_image": "https://graph.facebook.com/655876827927751/picture?type=large", "display_name": "Istabraq Mahmood", "link": "https://stackoverflow.com/users/7247991/istabraq-mahmood"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 599, "favorite_count": 0, "accepted_answer_id": 41729936, "answer_count": 1, "score": 1, "last_activity_date": 1485417634, "creation_date": 1484775346, "last_edit_date": 1485417634, "question_id": 41729894, "link": "https://stackoverflow.com/questions/41729894/python-mysql-nameerror-global-name-save-to-db-is-not-defined", "title": "Python-Mysql NameError: global name &#39;save_to_db&#39; is not defined", "body": "<p>i tried to write python script mqtt that is subscribing data from Mosquitto broker to get all messages from sensors that are publishing data in a specific topic and send data to mysqlDB in order save data</p>\n\n<p>the code:</p>\n\n<pre><code>import paho.mqtt.client as mqtt\nimport MySQLdb\n\ndef on_connect(client, userdata, flags, rc):\n  print(\"Connected with result code \"+str(rc))\n  client.subscribe(\"#\")\n\ndef on_message(client, userdata, msg):\n    print(msg.topic+\" \"+str(msg.payload))\n        save_to_db(msg)\nclient = mqtt.Client()\nclient.on_connect = on_connect\nclient.on_message = on_message\nclient.connect(\"192.168.0.132\", 1883, 60)\n\nclient.loop_forever()\n\ntestdb = MySQLdb.connect(\"localhost\",\"root\",\"\",\"testdb\" )\n\ndef save_to_db(msg):\n    with testdb:\n        cursor = testdb.cursor()\n        try:\n            cursor.execute(\"INSERT INTO pulses (pulse) VALUES (%s)\", (msg.payload))\n        except (MySQLdb.Error, MySQLdb.Warning) as e:\n            print('excepttion BD ' + e)\n            return None\n</code></pre>\n\n<p>but error will show:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"sub3.py\", line 16, in &lt;module&gt;\n    client.loop_forever()\n  File \"/usr/local/lib/python2.7/dist-packages/paho/mqtt/client.py\", line 1378, in loop_forever\n    rc = self.loop(timeout, max_packets)\n  File \"/usr/local/lib/python2.7/dist-packages/paho/mqtt/client.py\", line 897, in loop\n    rc = self.loop_read(max_packets)\n  File \"/usr/local/lib/python2.7/dist-packages/paho/mqtt/client.py\", line 1177, in loop_read\n    rc = self._packet_read()\n  File \"/usr/local/lib/python2.7/dist-packages/paho/mqtt/client.py\", line 1766, in _packet_read\n    rc = self._packet_handle()\n  File \"/usr/local/lib/python2.7/dist-packages/paho/mqtt/client.py\", line 2239, in _packet_handle\n    return self._handle_publish()\n  File \"/usr/local/lib/python2.7/dist-packages/paho/mqtt/client.py\", line 2414, in _handle_publish\n    self._handle_on_message(message)\n  File \"/usr/local/lib/python2.7/dist-packages/paho/mqtt/client.py\", line 2574, in _handle_on_message\n    self.on_message(self, self._userdata, message)\n  File \"sub3.py\", line 10, in on_message\n    save_to_db(msg)\nNameError: global name 'save_to_db' is not defined\n</code></pre>\n"}, {"tags": ["python", "python-2.7"], "comments": [{"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 2, "creation_date": 1484775467, "post_id": 41729886, "comment_id": 70654269, "body": "<code>str.split</code> splits on whitespace by default, so does <code>&quot; &quot;.join(s.split())</code> work for you?"}, {"owner": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "edited": false, "score": 0, "creation_date": 1484775617, "post_id": 41729886, "comment_id": 70654352, "body": "Use regular expressions: <code>import re; re.sub(r&#39;\\s+&#39;, &#39; &#39;, &#39;Hello my name is Robert and I am trying to figure     \\n\\n   out this code.\\nThanks&#39;)</code>"}, {"owner": {"reputation": 39529, "user_id": 2063361, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/jB77z.jpg?s=128&g=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/2063361/anonymous"}, "edited": false, "score": 0, "creation_date": 1484775618, "post_id": 41729886, "comment_id": 70654353, "body": "You may also do <code>str.replace(&#39;\\n\\n&#39;, &#39;&#39;)</code> which remove empty lines from the string"}, {"owner": {"reputation": 13815, "user_id": 6575931, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-CumJFhlEBdA/AAAAAAAAAAI/AAAAAAAAi5U/sqexnazvXek/photo.jpg?sz=128", "display_name": "Uriel", "link": "https://stackoverflow.com/users/6575931/uriel"}, "reply_to_user": {"reputation": 39529, "user_id": 2063361, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/jB77z.jpg?s=128&g=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/2063361/anonymous"}, "edited": false, "score": 0, "creation_date": 1484776004, "post_id": 41729886, "comment_id": 70654539, "body": "@MoinuddinQuadri better using regex <code>re.sub(r&#39;\\n{2,}&#39;, &#39; &#39;, str)</code>"}, {"owner": {"reputation": 11, "user_id": 6476119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a67de22ca7e8db701a999f09a707d40f?s=128&d=identicon&r=PG&f=1", "display_name": "Rblur01", "link": "https://stackoverflow.com/users/6476119/rblur01"}, "edited": false, "score": 0, "creation_date": 1484776128, "post_id": 41729886, "comment_id": 70654603, "body": "Sorry everyone I had to edit the post because it wasn&#39;t formatting for me correctly. I will try all of these real quick and see how they work out."}, {"owner": {"reputation": 11, "user_id": 6476119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a67de22ca7e8db701a999f09a707d40f?s=128&d=identicon&r=PG&f=1", "display_name": "Rblur01", "link": "https://stackoverflow.com/users/6476119/rblur01"}, "reply_to_user": {"reputation": 13815, "user_id": 6575931, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-CumJFhlEBdA/AAAAAAAAAAI/AAAAAAAAi5U/sqexnazvXek/photo.jpg?sz=128", "display_name": "Uriel", "link": "https://stackoverflow.com/users/6575931/uriel"}, "edited": false, "score": 0, "creation_date": 1484776559, "post_id": 41729886, "comment_id": 70654814, "body": "@UrielEli Your method has worked for me thank you! It gets rid of the unwanted newlines but keeps everything else formatted the way it was before which is what I wanted. Thank you again!"}], "answers": [{"tags": [], "owner": {"reputation": 4834, "user_id": 3258333, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/098143299cdb9f29251020ccb6706816?s=128&d=identicon&r=PG&f=1", "display_name": "furkle", "link": "https://stackoverflow.com/users/3258333/furkle"}, "is_accepted": false, "score": 2, "last_activity_date": 1484778415, "creation_date": 1484778415, "answer_id": 41730577, "question_id": 41729886, "link": "https://stackoverflow.com/questions/41729886/how-can-i-replace-a-block-of-whitespace-with-nothing-in-python-2-7/41730577#41730577", "title": "How can I replace a block of whitespace with nothing in python 2.7", "body": "<p>One way to accomplish this would be with regular expressions, which will simply allow us to find <em>runs</em> of spaces and newlines. The following code should work for your purposes:</p>\n\n<pre><code>import re\nstring = 'lorem ipsum dolor\\n\\n sic\\n\\n\\n lorem'\nstring = re.sub(r' +', ' ', string)\nstring = re.sub(r'\\n+', '\\n', string)\n</code></pre>\n\n<p>This will replace all runs of spaces with a single space, and all runs of newlines with a single newline.</p>\n"}], "owner": {"reputation": 11, "user_id": 6476119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a67de22ca7e8db701a999f09a707d40f?s=128&d=identicon&r=PG&f=1", "display_name": "Rblur01", "link": "https://stackoverflow.com/users/6476119/rblur01"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1484778415, "creation_date": 1484775316, "last_edit_date": 1484776848, "question_id": 41729886, "link": "https://stackoverflow.com/questions/41729886/how-can-i-replace-a-block-of-whitespace-with-nothing-in-python-2-7", "title": "How can I replace a block of whitespace with nothing in python 2.7", "body": "<p>I have a string that looks like this where the \"-\" are representing blocks of whitespace or just a newline (it is random on whether it is a number of spaces then a newline or just a newline): </p>\n\n<blockquote>\n  <p>\"Hello my name is<br>\n     Robert and I am trying to figure<br>\n     -<br>\n     -<br>\n     -  </p>\n  \n  <p>out this code<br>\n     Thanks\"</p>\n</blockquote>\n\n<p>All I really want to do is get rid of all the spaces/newlines between \"figure\" and \"out\" the other spaces I would want to keep them the same way if I could. The end string I would want would look like this:</p>\n\n<blockquote>\n  <p>\"Hello my name is<br>\n     Robert and I am trying to figure<br>\n     out this code<br>\n     Thanks\"</p>\n</blockquote>\n\n<p>Is there an easy way to do this? Any help is greatly appreciated!</p>\n"}, {"tags": ["python", "tensorflow", "eval", "binaryfiles"], "comments": [{"owner": {"reputation": 53055, "user_id": 419116, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/RmTuo.jpg?s=128&g=1", "display_name": "Yaroslav Bulatov", "link": "https://stackoverflow.com/users/419116/yaroslav-bulatov"}, "edited": false, "score": 2, "creation_date": 1484781742, "post_id": 41729878, "comment_id": 70656753, "body": "you need to start queue runners"}], "owner": {"reputation": 117, "user_id": 4040030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PX5ck.jpg?s=128&g=1", "display_name": "The_Chicken_Lord", "link": "https://stackoverflow.com/users/4040030/the-chicken-lord"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 395, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1485533935, "creation_date": 1484775280, "last_edit_date": 1485533935, "question_id": 41729878, "link": "https://stackoverflow.com/questions/41729878/infinite-loop-when-reading-tfrecord-file", "title": "Infinite Loop When Reading TFRecord file", "body": "<p>I'm currently trying to read a TFRecord file but my terminal crashes whenever I try to evaluate the tensors I have just generated from the file data. I'm working with RNNs (recurrent neural networks) and so I am trying to do my work using sequence data. I've copied most of the code from <a href=\"http://www.wildml.com/2016/08/rnns-in-tensorflow-a-practical-guide-and-undocumented-features/\" rel=\"nofollow noreferrer\">here</a> but I have made my own additions to try and include a TFRecordReader.</p>\n\n<pre><code>import tensorflow as tf\nimport tempfile\nimport os\n\nsequences = [[1, 2, 3], [4, 5, 1], [1, 2]]\nlabel_sequences = [[0, 1, 0], [1, 0, 0], [1, 1]]\n\ndef make_example(sequence, labels):\n    # The object we return\n    ex = tf.train.SequenceExample()\n    # A non-sequential feature of our example\n    sequence_length = len(sequence)\n    ex.context.feature[\"length\"].int64_list.value.append(sequence_length)\n    # Feature lists for the two sequential features of our example\n    fl_tokens = ex.feature_lists.feature_list[\"tokens\"]\n    fl_labels = ex.feature_lists.feature_list[\"labels\"]\n    for token, label in zip(sequence, labels):\n        fl_tokens.feature.add().int64_list.value.append(token)\n        fl_labels.feature.add().int64_list.value.append(label)\n    return ex\n\ndef parse_example(filename_queue):\n\n    reader = tf.TFRecordReader()\n    _, example = reader.read(filename_queue)\n    print(example)\n\n    #example = filename_queue\n\n    context_features = {\n    \"length\": tf.FixedLenFeature([], dtype=tf.int64)\n    }\n    sequence_features = {\n        \"tokens\": tf.FixedLenSequenceFeature([], dtype=tf.int64),\n        \"labels\": tf.FixedLenSequenceFeature([], dtype=tf.int64)\n    }\n\n    # Parse the example\n    context_parsed, sequence_parsed = tf.parse_single_sequence_example(\n        serialized=example,\n        context_features=context_features,\n        sequence_features=sequence_features\n    )\n\n    return context_parsed, sequence_parsed\n\nif __name__ == '__main__':\n    generated_file = \"\"\n    #################################\n    # Write all examples into a TFRecords file\n    #################################\n    with tempfile.NamedTemporaryFile(dir=\".\", delete=False) as fp:\n        writer = tf.python_io.TFRecordWriter(fp.name)\n        generated_file = fp.name\n        for sequence, label_sequence in zip(sequences, label_sequences):\n            ex = make_example(sequence, label_sequence)\n            writer.write(ex.SerializeToString())\n        writer.close()\n\n    #################################\n    # Read contents of TFRecord file\n    #################################\n\n\n    filename = os.path.join(os.getcwd(), generated_file)\n    print(filename)\n\n    with tf.Session() as sess:\n        sess.run(tf.initialize_all_variables())\n        filename_queue = tf.train.string_input_producer([filename])\n        context_parsed, sequence_parsed = parse_example(filename_queue)\n        print(context_parsed)\n        print(sequence_parsed)\n\n        # THIS IS WHERE I NEED HELP\n        # terminal freezes if the following lines are uncommented\n\n        #print(context_parsed[\"length\"].eval()) \n        #print(sequence_parsed[\"tokens\"].eval()) \n        #print(sequence_parsed[\"labels\"].eval()) \n</code></pre>\n\n<p>I'm still getting familiar with tensorflow so I'd appreciate an explanation for what I'm doing wrong (not just code fixes) so I don't make a similar mistake in future. Thank You!</p>\n\n<p>--</p>\n\n<p>EDIT: Ok I've altered the above with the following:</p>\n\n<pre><code>with tf.Session() as sess:\n    tf.train.start_queue_runners(sess=sess) # I included this line\n    sess.run(tf.initialize_all_variables()) \n</code></pre>\n\n<p>But this is giving me the following error: </p>\n\n<p><strong>ERROR:tensorflow:Exception in QueueRunner: Attempted to use a closed Session.</strong>  </p>\n\n<p>I'm not sure what is wrong with this. Yaroslav's comments are correct according to the <a href=\"https://www.tensorflow.org/how_tos/reading_data/\" rel=\"nofollow noreferrer\">directions on tensorflow</a> but I'm not sure what I've done wrong. I've tried several different formats of my code but I'm not sure what it is I'm missing.</p>\n\n<p>--</p>\n\n<p>EDIT2: Ok, I figured it out. Apparently I needed to generate a coordinator and pass that to the queue runners to get it to work. Here is my finalized code:</p>\n\n<pre><code>    with tf.Session() as sess:\n        coord = tf.train.Coordinator()\n        tf.train.start_queue_runners(coord=coord)\n        context_parsed, sequence_parsed = parse_example(filename_queue)\n        for i in range(3):\n            v1,v2,v3 = sess.run([context_parsed[\"length\"], sequence_parsed[\"tokens\"], sequence_parsed[\"labels\"]])\n            print(v1,v2,v3)\n</code></pre>\n"}, {"tags": ["python", "pandas", "dataframe", "merge"], "comments": [{"owner": {"reputation": 44261, "user_id": 3707607, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/6Jqb2.png?s=128&g=1", "display_name": "Ted Petrou", "link": "https://stackoverflow.com/users/3707607/ted-petrou"}, "edited": false, "score": 1, "creation_date": 1484775481, "post_id": 41729848, "comment_id": 70654275, "body": "First, you need to post the head of each DataFrame. Next, alias pandas as <code>pd</code>. Finally, do not use pandas.DataFrame.merge. Use <code>pd.merge</code>."}, {"owner": {"reputation": 867, "user_id": 3285817, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7948014e3240c21b3c2be629c268fd20?s=128&d=identicon&r=PG&f=1", "display_name": "OnlyDean", "link": "https://stackoverflow.com/users/3285817/onlydean"}, "reply_to_user": {"reputation": 44261, "user_id": 3707607, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/6Jqb2.png?s=128&g=1", "display_name": "Ted Petrou", "link": "https://stackoverflow.com/users/3707607/ted-petrou"}, "edited": false, "score": 0, "creation_date": 1484776377, "post_id": 41729848, "comment_id": 70654714, "body": "I tried pd.merge just now and got the same results as pd.DataFrame.merge."}, {"owner": {"reputation": 44261, "user_id": 3707607, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/6Jqb2.png?s=128&g=1", "display_name": "Ted Petrou", "link": "https://stackoverflow.com/users/3707607/ted-petrou"}, "edited": false, "score": 2, "creation_date": 1484776525, "post_id": 41729848, "comment_id": 70654796, "body": "please edit your question and paste the results of <code>print(Data.head())</code> and <code>print(Inventory_Info.head())</code>"}, {"owner": {"reputation": 86789, "user_id": 1422451, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/sFFvX.jpg?s=128&g=1", "display_name": "Parfait", "link": "https://stackoverflow.com/users/1422451/parfait"}, "edited": false, "score": 0, "creation_date": 1484789473, "post_id": 41729848, "comment_id": 70658858, "body": "<i>All 20 values of Inventory_Info.HardwareAddress appearin Data.HardwareAddress</i>...without data we can&#39;t reproduce and can only take your word for it. Also <i>I get column names from both DataFrames, but only the contents of Data are included.</i>...do you mean NaNs return? Do note you are using <code>left</code> join so non-matches do return NaNs."}], "answers": [{"tags": [], "owner": {"reputation": 867, "user_id": 3285817, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7948014e3240c21b3c2be629c268fd20?s=128&d=identicon&r=PG&f=1", "display_name": "OnlyDean", "link": "https://stackoverflow.com/users/3285817/onlydean"}, "is_accepted": false, "score": 2, "last_activity_date": 1484842185, "creation_date": 1484842185, "answer_id": 41746484, "question_id": 41729848, "link": "https://stackoverflow.com/questions/41729848/python-pandas-merge-wont-work/41746484#41746484", "title": "Python Pandas Merge Won&#39;t Work", "body": "<p>I finally solved this one.</p>\n\n<p><code>Inventory_Info.dtypes</code> and <code>Data.dtypes</code> each revealed that <code>HardwareAddress</code> was type <code>object</code>. I used <code>Data['HardwareAddress'].astype(int)</code> and <code>Inventory_Info['HardwareAddress'].astype(int)</code>, and then the DataFrames merged exactly as expected.</p>\n"}], "owner": {"reputation": 867, "user_id": 3285817, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7948014e3240c21b3c2be629c268fd20?s=128&d=identicon&r=PG&f=1", "display_name": "OnlyDean", "link": "https://stackoverflow.com/users/3285817/onlydean"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5156, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1484842185, "creation_date": 1484775206, "last_edit_date": 1484776118, "question_id": 41729848, "link": "https://stackoverflow.com/questions/41729848/python-pandas-merge-wont-work", "title": "Python Pandas Merge Won&#39;t Work", "body": "<p>I have two Python Pandas DataFrames:</p>\n\n<p><code>Inventory_Info</code> (20 rows):</p>\n\n<pre><code>Group, Facility, Unit, Room, HardwareAddress\n'Generic Hospital Group', 'Generic Hospital', 'Generic Hospital Ward', 'Generic Hospital Room', 5715\n</code></pre>\n\n<p><code>Data</code> (47 rows):</p>\n\n<pre><code>Serial_Number, Last_Server_Check, Num_Check_Ins, HardwareAddress\n00BA0F42, 23, 1/18/17 20:38, 3906\n</code></pre>\n\n<p>All 20 values of <code>Inventory_Info.HardwareAddress</code> appear in <code>Data.HardwareAddress</code>.</p>\n\n<p>I've tried this, but it doesn't merge the data. I get column names from both DataFrames, but only the contents of <code>Data</code> are included.</p>\n\n<pre><code>finalDataSet = pandas.DataFrame.merge(Data, Inventory_Info, how='left', on='HardwareAddress')\n</code></pre>\n\n<p>Similarly, I've tried flipping the DataFrame order:</p>\n\n<pre><code>finalDataSet = pandas.DataFrame.merge(Inventory_Info, Data, how='left', on='HardwareAddress')\n</code></pre>\n\n<p>I get the merged column names, but now only the <code>Inventory_Info</code> data is displayed.</p>\n\n<p>I've tried using this merge syntax:</p>\n\n<pre><code>finalDataSet = webData.merge(rawData, left_index='HardwareAddress', right_on='HardwareAddress')\n</code></pre>\n\n<p>While this syntax gets the data into the correct format and populates all columns, the data is not matched on the <code>HardwareAddress</code> index and its arrangement is wrong.</p>\n"}, {"tags": ["python", "csv", "encoding", "utf-8", "scrapy"], "comments": [{"owner": {"reputation": 17034, "user_id": 858913, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/b5015a60c08feee1d8116be3dd70878d?s=128&d=identicon&r=PG", "display_name": "eLRuLL", "link": "https://stackoverflow.com/users/858913/elrull"}, "edited": false, "score": 0, "creation_date": 1484775311, "post_id": 41729822, "comment_id": 70654181, "body": "is it working without <code>-o test.csv -t csv</code>? also, are you writing something to a file? maybe in your pipeline?"}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 1, "creation_date": 1484775435, "post_id": 41729822, "comment_id": 70654246, "body": "You&#39;ll need to include the <i>full traceback</i>. It depends on the context as to what the solution should be. Adding the <code>coding</code> comment only applies to <b>decoding</b> string literals in source code, so that won&#39;t apply here.Setting your console to codepage 65001 only applies to <i>printing</i> (writing to <code>sys.stdout</code>), but I see no print statements."}, {"owner": {"reputation": 393, "user_id": 7437919, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1023a4d4ce953dc7be49ecfd35be81f8?s=128&d=identicon&r=PG&f=1", "display_name": "Svarto", "link": "https://stackoverflow.com/users/7437919/svarto"}, "reply_to_user": {"reputation": 17034, "user_id": 858913, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/b5015a60c08feee1d8116be3dd70878d?s=128&d=identicon&r=PG", "display_name": "eLRuLL", "link": "https://stackoverflow.com/users/858913/elrull"}, "edited": false, "score": 0, "creation_date": 1484816063, "post_id": 41729822, "comment_id": 70668275, "body": "@eLRuLL, yes it works without the output to CSV, it is somehow only when I try to output it to the CSV file that I hit the UnicodeEncodeError. Interesting fact is that when I use the scrapy shell I get the perfect text, i.e. incl. slavic characters. When I see the output from the spider in the shell (i.e. without the CSV export), then it is in unicode..."}, {"owner": {"reputation": 393, "user_id": 7437919, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1023a4d4ce953dc7be49ecfd35be81f8?s=128&d=identicon&r=PG&f=1", "display_name": "Svarto", "link": "https://stackoverflow.com/users/7437919/svarto"}, "reply_to_user": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1484816151, "post_id": 41729822, "comment_id": 70668325, "body": "@MartijnPieters very sorry, I updated the question and I hope it is clearer now when I run into for problems. Please let me know if something needs further clarification!"}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1484816727, "post_id": 41729822, "comment_id": 70668648, "body": "You are writing Unicode values to a CSV file, but in Python 2, the <code>csv</code> module can&#39;t handle Unicode. You can&#39;t use <code>codecs.open()</code> with the <code>csv</code> module, and you <i>have</i> to encode before passing in values. Use <code>self.file = open(&quot;booksdata.csv&quot;, &#39;wb&#39;)</code> at the very least. I&#39;m not familiar enough with Scrapy to give advice on where to encode your scraped data."}], "answers": [{"comments": [{"owner": {"reputation": 393, "user_id": 7437919, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1023a4d4ce953dc7be49ecfd35be81f8?s=128&d=identicon&r=PG&f=1", "display_name": "Svarto", "link": "https://stackoverflow.com/users/7437919/svarto"}, "edited": false, "score": 0, "creation_date": 1484994911, "post_id": 41750622, "comment_id": 70747193, "body": "Thanks for this! It works with the Slavic character error, now I have a Item Loader problem instead though so will post another question on that (to avoid derailing this thread). Thanks a lot!!"}], "tags": [], "owner": {"reputation": 71, "user_id": 5749233, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88d4294c50358f5e04af6823808fb134?s=128&d=identicon&r=PG&f=1", "display_name": "Fran", "link": "https://stackoverflow.com/users/5749233/fran"}, "is_accepted": true, "score": 0, "last_activity_date": 1487256988, "last_edit_date": 1487256988, "creation_date": 1484855952, "answer_id": 41750622, "question_id": 41729822, "link": "https://stackoverflow.com/questions/41729822/problems-writing-scraped-data-to-csv-with-slavic-characters-unicodeencodeerror/41750622#41750622", "title": "Problems writing Scraped data to csv with Slavic characters (UnicodeEncodeError &amp; TypeError)", "body": "<p>What I use in order to scrape Czech websites and avoid this errors is <a href=\"https://pypi.python.org/pypi/Unidecode\" rel=\"nofollow noreferrer\">unidecode</a> module. What this module does is an ASCII transliterations of Unicode text.</p>\n\n<pre><code># -*- coding: utf-8 -*-\nfrom unidecode import unidecode\n\nclass BezrealitkySpider(scrapy.Spider):\n    name = 'bezrealitky'\n    start_urls = [\n        'https://www.bezrealitky.cz/vypis/nabidka-prodej/byt/praha'\n    ]\n    def parse(self, response):\n        item = BezrealitkyItem()\n        items = []\n        for records in response.xpath('//*[starts-with(@class,\"record\")]'):\n            item['title'] = unidecode(response.xpath('.//div[@class=\"details\"]/h2/a[@href]/text()').extract()[1].encode('utf-8'))\n            items.append(item)\n        return(items)\n</code></pre>\n\n<p>Since I use an <a href=\"https://doc.scrapy.org/en/latest/topics/loaders.html#declaring-item-loaders\" rel=\"nofollow noreferrer\">ItemLoader</a> my code look kind of like this:</p>\n\n<pre><code># -*- coding: utf-8 -*-\nfrom scrapy.loader import ItemLoader\n\nclass BaseItemLoader(ItemLoader):\n    title_in = MapCompose(unidecode)\n</code></pre>\n"}], "owner": {"reputation": 393, "user_id": 7437919, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1023a4d4ce953dc7be49ecfd35be81f8?s=128&d=identicon&r=PG&f=1", "display_name": "Svarto", "link": "https://stackoverflow.com/users/7437919/svarto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 311, "favorite_count": 0, "accepted_answer_id": 41750622, "answer_count": 1, "score": 0, "last_activity_date": 1487256988, "creation_date": 1484775098, "last_edit_date": 1484811437, "question_id": 41729822, "link": "https://stackoverflow.com/questions/41729822/problems-writing-scraped-data-to-csv-with-slavic-characters-unicodeencodeerror", "title": "Problems writing Scraped data to csv with Slavic characters (UnicodeEncodeError &amp; TypeError)", "body": "<p><strong>Intention / Wanted result:</strong></p>\n\n<p>To scrape the link titles (i.e. the text of the links with each item) from a Czech website: </p>\n\n<p><a href=\"https://www.bezrealitky.cz/vypis/nabidka-prodej/byt/praha\" rel=\"nofollow noreferrer\">https://www.bezrealitky.cz/vypis/nabidka-prodej/byt/praha</a></p>\n\n<p>And print out the result in a CSV file. Preferably in a list so that I can later manipulate the data in another Python Data analytics model.</p>\n\n<p><strong>Result / Problem:</strong></p>\n\n<p>I am getting an UnicodeEncodeError and a TypeError. I suspect this has to do with the non-normal characters that exist in the Czech Language. Please see below for traceback.</p>\n\n<p><strong>Traceback:</strong> </p>\n\n<p>TypeError Traceback:</p>\n\n<pre><code>2017-01-19 08:00:18 [scrapy] ERROR: Error processing {'title': b'\\n                                Ob\\xc4\\x9bt\\xc3\\xad 6. kv\\xc4\\x9b'\n          b'tna, Praha - Kr\\xc4\\x8d                            '}\nTraceback (most recent call last):\n  File \"C:\\Users\\phili\\Anaconda3\\envs\\py35\\lib\\site-packages\\twisted\\internet\\defer.py\", line 651, in _runCallbacks\n    current.result = callback(current.result, *args, **kw)\n  File \"C:\\Users\\phili\\Documents\\Python Scripts\\Scrapy Spiders\\bezrealitky\\bezrealitky\\pipelines.py\", line 24, in process_item\n    self.exporter.export_item(item)\n  File \"C:\\Users\\phili\\Anaconda3\\envs\\py35\\lib\\site-packages\\scrapy\\exporters.py\", line 193, in export_item\n    self._write_headers_and_set_fields_to_export(item)\n  File \"C:\\Users\\phili\\Anaconda3\\envs\\py35\\lib\\site-packages\\scrapy\\exporters.py\", line 217, in _write_headers_and_set_fields_to_export\n    self.csv_writer.writerow(row)\n  File \"C:\\Users\\phili\\Anaconda3\\envs\\py35\\lib\\codecs.py\", line 718, in write\n    return self.writer.write(data)\n  File \"C:\\Users\\phili\\Anaconda3\\envs\\py35\\lib\\codecs.py\", line 376, in write\n    data, consumed = self.encode(object, self.errors)\nTypeError: Can't convert 'bytes' object to str implicitly\n</code></pre>\n\n<p>UnicodeEncodeError Traceback:</p>\n\n<pre><code>2017-01-19 08:00:18 [scrapy] ERROR: Error processing {'title': b'\\n                                Ob\\xc4\\x9bt\\xc3\\xad 6. kv\\xc4\\x9b'\n          b'tna, Praha - Kr\\xc4\\x8d                            '}\nTraceback (most recent call last):\n  File \"C:\\Users\\phili\\Anaconda3\\envs\\py35\\lib\\site-packages\\twisted\\internet\\defer.py\", line 651, in _runCallbacks\n    current.result = callback(current.result, *args, **kw)\n  File \"C:\\Users\\phili\\Documents\\Python Scripts\\Scrapy Spiders\\bezrealitky\\bezrealitky\\pipelines.py\", line 24, in process_item\n    self.exporter.export_item(item)\n  File \"C:\\Users\\phili\\Anaconda3\\envs\\py35\\lib\\site-packages\\scrapy\\exporters.py\", line 198, in export_item\n    self.csv_writer.writerow(values)\n  File \"C:\\Users\\phili\\Anaconda3\\envs\\py35\\lib\\encodings\\cp1252.py\", line 19, in encode\n    return codecs.charmap_encode(input,self.errors,encoding_table)[0]\nUnicodeEncodeError: 'charmap' codec can't encode character '\\u011b' in position 37: character maps to &lt;undefined&gt;\n</code></pre>\n\n<p><strong>Situation / Process:</strong></p>\n\n<p>I am running the scrapy crawl bezrealitky (i.e. name of spider). I have configured the pipeline with a CSVItemExporter I found on the internet, and tried to adapt it to UTF-8 encode when opening the file (I also tried in the beginning without adding UTF-8, but same error).</p>\n\n<p><strong>My pipeline code:</strong></p>\n\n<pre><code>from scrapy.conf import settings\nfrom scrapy.exporters import CsvItemExporter\nimport codecs\n\n\nclass CsvPipeline(object):\n    def __init__(self):\n        self.file = codecs.open(\"booksdata.csv\", 'wb', encoding='UTF-8')\n        self.exporter = CsvItemExporter(self.file)\n        self.exporter.start_exporting()\n\n    def close_spider(self, spider):\n        self.exporter.finish_exporting()\n        self.file.close()\n\n    def process_item(self, item, spider):\n        self.exporter.export_item(item)\n        return item\n</code></pre>\n\n<p><strong>My settings file:</strong></p>\n\n<pre><code>BOT_NAME = 'bezrealitky'\n\nSPIDER_MODULES = ['bezrealitky.spiders']\nNEWSPIDER_MODULE = 'bezrealitky.spiders'\n\n# Configure item pipelines\n# See http://scrapy.readthedocs.org/en/latest/topics/item-pipeline.html\nITEM_PIPELINES = {\n    'bezrealitky.pipelines.CsvPipeline': 300,\n</code></pre>\n\n<p><strong>My spider code:</strong></p>\n\n<pre><code>class BezrealitkySpider(scrapy.Spider):\n    name = 'bezrealitky'\n    start_urls = [\n        'https://www.bezrealitky.cz/vypis/nabidka-prodej/byt/praha'\n    ]\n    def parse(self, response):\n        item = BezrealitkyItem()\n        items = []\n        for records in response.xpath('//*[starts-with(@class,\"record\")]'):\n            item['title'] = response.xpath('.//div[@class=\"details\"]/h2/a[@href]/text()').extract()[1].encode('utf-8')\n            items.append(item)\n        return(items)\n</code></pre>\n\n<p><strong>Solutions tried so far:</strong></p>\n\n<ul>\n<li>To add and remove .encode('utf-8) to the extract() command, and also in the pipeline.py but it didn't work. </li>\n<li>Also tried adding # -<em>- coding: utf-8 -</em>- to the beginning, didn't work either</li>\n<li><p>I tried to change the python code to utf-8 in the console with this:</p>\n\n<p>chcp 65001</p>\n\n<p>set PYTHONIOENCODING=utf-8</p></li>\n</ul>\n\n<p><strong>Conclusion:</strong></p>\n\n<p>I am cannot get the scraped data to write to the CSV file, the CSV is created but there is nothing in it. Even though in the shell I can see that data is scraped but it isn't decoded / encoded properly and throws an error before it is writte to file. </p>\n\n<p>I am complete beginner with this, just trying to pick up Scrapy. Would really appreciate any help I can get!</p>\n"}, {"tags": ["python", "python-3.x", "parameters", "curve-fitting", "lmfit"], "answers": [{"tags": [], "owner": {"reputation": 5396, "user_id": 5179748, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-N6Pn6ac0-tQ/AAAAAAAAAAI/AAAAAAAAB2o/LLcs2JK0DcU/photo.jpg?sz=128", "display_name": "M Newville", "link": "https://stackoverflow.com/users/5179748/m-newville"}, "is_accepted": true, "score": 1, "last_activity_date": 1485012890, "creation_date": 1485012890, "answer_id": 41781162, "question_id": 41729783, "link": "https://stackoverflow.com/questions/41729783/set-parameter-expression-that-contains-the-independent-variable-in-python-lmfit/41781162#41781162", "title": "Set parameter expression that contains the independent variable in python lmfit", "body": "<p>First, <code>dict</code> is a builtin and using it for a variable name can cause havoc.</p>\n\n<p>To use your <code>x</code> in an expression, you would have to add your <code>x</code> to the symbol table used to evaluate the expression, as with</p>\n\n<pre><code>fit_params = Parameters()\nfit_params._asteval.symtable['x'] = x\n</code></pre>\n\n<p><strong>But:</strong> You should be careful doing this with ndarrays.  It can work, but Parameters in lmfit are generally meant to be floats.</p>\n"}], "owner": {"reputation": 45, "user_id": 4434914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/408223eabc3715edaba1ff74f4a8a18c?s=128&d=identicon&r=PG&f=1", "display_name": "Hzine", "link": "https://stackoverflow.com/users/4434914/hzine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 379, "favorite_count": 1, "accepted_answer_id": 41781162, "answer_count": 1, "score": 0, "last_activity_date": 1485012890, "creation_date": 1484774945, "last_edit_date": 1484775014, "question_id": 41729783, "link": "https://stackoverflow.com/questions/41729783/set-parameter-expression-that-contains-the-independent-variable-in-python-lmfit", "title": "Set parameter expression that contains the independent variable in python lmfit", "body": "<p>I have dictionary of parameters with unknown number of those parameters (comes from other function), I looped through the dictionary to add its components to an lmfit models as follows:</p>\n\n<pre><code>from lmfit import Parameters\nfit_params = Parameters()\nfor params_name in dict.keys():\n    current_param = dict[param_name]\n    fit_params.add(param_name)\n</code></pre>\n\n<p>I wanted to add expression to each parameter with</p>\n\n<pre><code>fit_params[param_name].set(expr = 'some_expression_in_function_of_x')\n</code></pre>\n\n<p>where x is my independent variable, when running the program I have this error:</p>\n\n<pre><code>NameError\nTraceback (most recent call last):\nFile \"D:\\Python\\ThinPhy_File_By_File\\test_code.py\", line 52, in &lt;module&gt;\n&lt;_ast.Module object at 0x00000145F661C4E0&gt;\n              ^^^\nname 'x' is not defined\nFile \"C:\\Python36\\lib\\site-packages\\lmfit\\parameter.py\", line 548, in __repr__\nsval = repr(self._getval())\nFile \"C:\\Python36\\lib\\site-packages\\lmfit\\parameter.py\", line 639, in _getval\ncheck_ast_errors(self._expr_eval)\nFile \"C:\\Python36\\lib\\site-packages\\lmfit\\parameter.py\", line 21, in check_ast_errors\nexpr_eval.raise_exception(None)\nFile \"C:\\Python36\\lib\\site-packages\\lmfit\\asteval.py\", line 167, in raise_exception\nraise exc(self.error_msg)\nNameError: name 'x' is not defined in expr='&lt;_ast.Module object at 0x00000145F661C4E0&gt;'\n</code></pre>\n\n<p>is there any way to define an expression that contains the model independent variable? or how to define it. </p>\n"}, {"tags": ["python", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 4810, "user_id": 1625098, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/2ae7ca5b1de8c1c84f39df6770544ad0?s=128&d=identicon&r=PG", "display_name": "Rohit", "link": "https://stackoverflow.com/users/1625098/rohit"}, "is_accepted": true, "score": 0, "last_activity_date": 1484783716, "creation_date": 1484783716, "answer_id": 41731532, "question_id": 41729781, "link": "https://stackoverflow.com/questions/41729781/resampling-and-interpolating-time-series-in-pandas-0-14-1/41731532#41731532", "title": "Resampling and Interpolating Time Series in Pandas 0.14.1", "body": "<p>Using outer join makes it work</p>\n\n<pre><code>this_idx = pd.concat([df_template, this_df], axis = 1, join = 'outer').index\ndf_new = this_df.reindex(this_idx).interpolate('index').reindex(df_template.index)\n</code></pre>\n"}], "owner": {"reputation": 4810, "user_id": 1625098, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/2ae7ca5b1de8c1c84f39df6770544ad0?s=128&d=identicon&r=PG", "display_name": "Rohit", "link": "https://stackoverflow.com/users/1625098/rohit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 167, "favorite_count": 1, "accepted_answer_id": 41731532, "answer_count": 1, "score": 0, "last_activity_date": 1484783716, "creation_date": 1484774935, "last_edit_date": 1495541338, "question_id": 41729781, "link": "https://stackoverflow.com/questions/41729781/resampling-and-interpolating-time-series-in-pandas-0-14-1", "title": "Resampling and Interpolating Time Series in Pandas 0.14.1", "body": "<p><strong>Objective</strong> I have two time-series data frames, <code>df_template</code> and <code>this_df</code>. Both are at different sampling rates. I would like to resample <code>this_df</code> to <code>df_template</code> using interpolating. </p>\n\n<p><strong>Problem</strong>: I have the following <a href=\"https://stackoverflow.com/questions/40593424/interpolate-one-time-series-onto-custom-time-series\">code</a> that works in <strong>pandas 0.19</strong> but does not work in <strong>pandas 0.14.1</strong>. How do I get it to work? </p>\n\n<pre><code>df_template = pd.DataFrame()\nthis_df = pd.DataFrame()\n\nt1 = np.arange(1484664735415, 1484664735710, 30)\nt2 = np.arange(1484664735400, 1484664735700, 100)\n\ndf_template['Time'] = t1\nthis_df['Time'] = t2\n\nthis_df['S2'] = random.sample(xrange(50), this_df.shape[0])\n\nthis_df.set_index('Time', inplace=True)\nthis_idx = this_df.index.union(df_template.Time)\ndf_new = this_df.reindex(this_idx).interpolate('index').reindex(df_template.Time)\ndf_new.reset_index(inplace=True)\n</code></pre>\n\n<p>The error occurs in <code>this_df.index.union()</code>. </p>\n\n<p><code>AttributeError: 'Series' object has no attribute 'is_monotonic'</code></p>\n\n<p>I think there is no such function in pandas 0.14.1. So, how do I get the final result such as:</p>\n\n<pre><code>            Time     S2\n0  1484664735415  22.25\n1  1484664735445  26.75\n2  1484664735475  31.25\n3  1484664735505  33.95\n4  1484664735535  27.65\n5  1484664735565  21.35\n6  1484664735595  15.05\n7  1484664735625  14.00\n8  1484664735655  14.00\n9  1484664735685  14.00\n</code></pre>\n\n<p>Any ideas for this to work in pandas 0.14.1? </p>\n"}, {"tags": ["python", "matplotlib"], "answers": [{"tags": [], "owner": {"reputation": 209114, "user_id": 1427416, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/QWHKg.png?s=128&g=1", "display_name": "BrenBarn", "link": "https://stackoverflow.com/users/1427416/brenbarn"}, "is_accepted": true, "score": 2, "last_activity_date": 1484775173, "creation_date": 1484775173, "answer_id": 41729843, "question_id": 41729669, "link": "https://stackoverflow.com/questions/41729669/why-is-matplotlib-plotting-the-transpose-of-a-matrix-in-3d-plots/41729843#41729843", "title": "why is matplotlib plotting the transpose of a matrix in 3D plots?", "body": "<p>Look at the result of your <code>meshgrid</code>:</p>\n\n<pre><code>&gt;&gt;&gt; np.meshgrid(range(5), range(5))\n[array([[0, 1, 2, 3, 4],\n       [0, 1, 2, 3, 4],\n       [0, 1, 2, 3, 4],\n       [0, 1, 2, 3, 4],\n       [0, 1, 2, 3, 4]]),\n array([[0, 0, 0, 0, 0],\n       [1, 1, 1, 1, 1],\n       [2, 2, 2, 2, 2],\n       [3, 3, 3, 3, 3],\n       [4, 4, 4, 4, 4]])]\n</code></pre>\n\n<p>The first array is what you assigned to X, the second is what you assigned to Y.  You can see that X increases across the columns, whereas Y increases down the rows.</p>\n\n<p>So the answer to your question is that meshgrid by default returns XY coordinates, not row-column coordinates.  Usually XY coordinates is what you want if you're doing math on the coordinates.  But you can make meshgrid return matrix-style coordinates by passing the <code>indexing='ij'</code> argument if that's what you want.</p>\n"}, {"comments": [{"owner": {"reputation": 209114, "user_id": 1427416, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/QWHKg.png?s=128&g=1", "display_name": "BrenBarn", "link": "https://stackoverflow.com/users/1427416/brenbarn"}, "edited": false, "score": 0, "creation_date": 1485070364, "post_id": 41729971, "comment_id": 70766245, "body": "Your image doesn&#39;t correspond to the data in his plot.  In his plot, the red row is at Y=4, but in your image the red row is at Y=0."}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "reply_to_user": {"reputation": 209114, "user_id": 1427416, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/QWHKg.png?s=128&g=1", "display_name": "BrenBarn", "link": "https://stackoverflow.com/users/1427416/brenbarn"}, "edited": false, "score": 0, "creation_date": 1485078883, "post_id": 41729971, "comment_id": 70767980, "body": "@BrenBarn My picture uses the <code>RdBu</code> colormap while the question uses <code>coolwarm</code> (<code>RdBu</code> starts at red, <code>coolwarm</code> at blue). The whole point of this however is not to reproduce the question&#39;s image, but to show how an image and the underlying array are related in general, i.e. <code>y</code> are rows and <code>x</code> are columns. For this to be seen, the colormap is irrelevant."}], "tags": [], "owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "is_accepted": false, "score": 1, "last_activity_date": 1484779101, "last_edit_date": 1484779101, "creation_date": 1484775640, "answer_id": 41729971, "question_id": 41729669, "link": "https://stackoverflow.com/questions/41729669/why-is-matplotlib-plotting-the-transpose-of-a-matrix-in-3d-plots/41729971#41729971", "title": "why is matplotlib plotting the transpose of a matrix in 3D plots?", "body": "<p>Matplotlib uses numpy and is very closely related to numpy's conventions.  </p>\n\n<p>Indexing a numpy array is such that <code>a[j,i]</code> gives you the entry in the <code>j</code>th row and the <code>i</code>th column. Therefore <code>j</code> is the vertical coordinate, <code>i</code> is the horizontal one. Identifying </p>\n\n<pre><code>horizontal &lt;-&gt; x &lt;-&gt; i  \nvertical   &lt;-&gt; y &lt;-&gt; j \n</code></pre>\n\n<p>ensures that any image is acutally exactly looking like the printed version of the array on paper; which makes it quite comfortable to work with those 2D arrays.</p>\n\n<p>This is exactly what you see in the picture.</p>\n\n<p><a href=\"https://i.stack.imgur.com/P3nNM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/P3nNM.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 1602, "user_id": 849665, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2ede59e9e765309578394cac6d2269ab?s=128&d=identicon&r=PG", "display_name": "Laura", "link": "https://stackoverflow.com/users/849665/laura"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1236, "favorite_count": 0, "accepted_answer_id": 41729843, "answer_count": 2, "score": 0, "last_activity_date": 1484779101, "creation_date": 1484774524, "question_id": 41729669, "link": "https://stackoverflow.com/questions/41729669/why-is-matplotlib-plotting-the-transpose-of-a-matrix-in-3d-plots", "title": "why is matplotlib plotting the transpose of a matrix in 3D plots?", "body": "<p>I am trying to plot a 3D surface using matplotlib's mpl_toolkits.mplot3d plot_surface function.\nMy Z variable (a function f(x,y)) is pretty complicated and I cannot write it as a function of X and Y once I meshed them, so I computed it as a 2D array using a loop that goes through the x and y variables and stores everything in a matrix, Z.   I am passing this array Z to the call of the plot_surface function, but I keep getting the wrong plot, basically because I expect the figure of Z but get the figure corresponding to Z.transpose.</p>\n\n<p>I was able to do a much simpler example that reproduces my problem below:</p>\n\n<pre><code>X = range(5)\nY = range(5)\nX,Y = np.meshgrid(X,Y)\nmysol = np.array([[1,1,1,1,1],[2,2,2,2,2],[3,3,3,3,3],[4,4,4,4,4],[5,5,5,5,5]])\nfig1 = plt.figure(1)\nax = fig1.add_subplot(111, projection='3d')\nsurf = ax.plot_surface(X, Y, mysol, rstride=1, cstride=1, cmap=cm.coolwarm)\nax.set_xlabel('X')\nax.set_ylabel('Y')\nax.set_zlabel('Z')\nplt.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/ZZ0pW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZZ0pW.png\" alt=\"enter image description here\"></a>So, I expect that this produces a plane so that when x=0, I get mysol[0,:] = [1,1,1,1,1] (the first row of my matrix mysol). Instead, if I look at the graph produced by this code, when x=0, I get the first column of the matrix (mysol[:,0] = [1,2,3,4,5].</p>\n\n<p>I understand that the problem is fixed if I plot mysol.transpose() as opposed to mysol, but I am trying to understand the logic here. So, why is matplotlib doing this? I would expect it to plot the array row-wise, not column-wise. Where is my mistake?</p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["python", "matplotlib"], "answers": [{"comments": [{"owner": {"reputation": 10425, "user_id": 2142055, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Stop harming Monica", "link": "https://stackoverflow.com/users/2142055/stop-harming-monica"}, "edited": false, "score": 1, "creation_date": 1484777607, "post_id": 41730312, "comment_id": 70655249, "body": "Actually <code>ax</code> is not an axes at all."}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1484786286, "post_id": 41730312, "comment_id": 70658066, "body": "The problem in the question has nothing to do with axes scope. If no further argument is given, <code>DataFrame.plot()</code> would simply plot to the last axes it finds or create a new one. As detailed in the other answers, the problem is rather that <code>ax</code> is <code>None</code>, because no argument has been given to <code>add_subplot()</code>."}], "tags": [], "owner": {"reputation": 3028, "user_id": 558619, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/1618a853824f6ed866aa0fe4385b8687?s=128&d=identicon&r=PG", "display_name": "keynesiancross", "link": "https://stackoverflow.com/users/558619/keynesiancross"}, "is_accepted": false, "score": 0, "last_activity_date": 1484777229, "creation_date": 1484777229, "answer_id": 41730312, "question_id": 41729623, "link": "https://stackoverflow.com/questions/41729623/python-matplotlib-nonetype-error-with-twinx/41730312#41730312", "title": "Python + Matplotlib -&gt; NoneType error with twinx", "body": "<p>simple issue.  the ax variable isn't the axes in scope.  myplot is.  myplot.twinx() works. </p>\n"}, {"tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": true, "score": 1, "last_activity_date": 1484777271, "creation_date": 1484777271, "answer_id": 41730320, "question_id": 41729623, "link": "https://stackoverflow.com/questions/41729623/python-matplotlib-nonetype-error-with-twinx/41730320#41730320", "title": "Python + Matplotlib -&gt; NoneType error with twinx", "body": "<p>The function <code>fig.add_subplot()</code> returns <code>nothing</code> (<strong>None</strong>), so you will not have a new Axes. You must use the <code>plt.subplots()</code> function, it returns a Figure object and an Axes object</p>\n\n<pre><code>import matplotlib.pyplot as plt\nimport pandas as pd\nimport numpy as np\n\nplt.cla()\nplt.clf()\nplt.close()\nr = pd.DataFrame(np.random.randn(6,1),columns=['TOTAL DATA'])\n\nfig, ax= plt.subplots(figsize=(14, 6))\n\nmyplot = r[r.index&lt;=100][\"TOTAL DATA\"].apply(lambda x:x/1000).plot(kind='bar')\nax2 = ax.twinx()\nplt.show()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "is_accepted": false, "score": 0, "last_activity_date": 1484785851, "creation_date": 1484785851, "answer_id": 41731838, "question_id": 41729623, "link": "https://stackoverflow.com/questions/41729623/python-matplotlib-nonetype-error-with-twinx/41731838#41731838", "title": "Python + Matplotlib -&gt; NoneType error with twinx", "body": "<p>Looking more in the direction of the attempt in the question, the only problem in the code is that <code>ax = fig.add_subplot()</code> returns <code>None</code> <strong>because it has no argument given</strong>. </p>\n\n<p>The usual way is to call <code>ax = fig.add_subplot(111)</code> or any other (set of) argument(s) that actually creates a subplot. <a href=\"http://matplotlib.org/api/figure_api.html#matplotlib.figure.Figure.add_subplot\" rel=\"nofollow noreferrer\">See documentation</a>.</p>\n\n<p>Therefore the code from the question works fine, if that argument is given.</p>\n\n<pre><code>import matplotlib.pyplot as plt\nimport pandas as pd\nr = pd.DataFrame({\"TOTAL DATA\" : [1000,2000,3000]})\n\nfig = plt.figure(figsize=(14,6))\nax = fig.add_subplot(111)\n\nmyplot = r[r.index&lt;=100][\"TOTAL DATA\"].apply(lambda x:x/1000).plot(kind='bar')\nax2 = ax.twinx()\nplt.show()\n</code></pre>\n"}], "owner": {"reputation": 3028, "user_id": 558619, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/1618a853824f6ed866aa0fe4385b8687?s=128&d=identicon&r=PG", "display_name": "keynesiancross", "link": "https://stackoverflow.com/users/558619/keynesiancross"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1091, "favorite_count": 0, "accepted_answer_id": 41730320, "answer_count": 3, "score": -2, "last_activity_date": 1484785851, "creation_date": 1484774372, "question_id": 41729623, "link": "https://stackoverflow.com/questions/41729623/python-matplotlib-nonetype-error-with-twinx", "title": "Python + Matplotlib -&gt; NoneType error with twinx", "body": "<p>I think I'm missing something in the workflow of matplotlib...  I'm trying to create a figure of custom size, add some stuff, then add a second axis:</p>\n\n<pre><code>#temp graph\nimport matplotlib.pyplot as plt\nplt.cla()\nplt.clf()\nplt.close()\ndf = r\n\nfig = plt.figure(figsize=(14,6))\nax = fig.add_subplot()\n\n#r is a dataframe filled with a bunch of data\n\nmyplot = r[r.index&lt;=100][\"TOTAL DATA\"].apply(lambda x:x/1000).plot(kind='bar')\nax2 = ax.twinx()\nplt.show()\n</code></pre>\n\n<p>This gives me the following error:</p>\n\n<blockquote>\n  <p>AttributeError                            Traceback (most recent call\n  last)  in ()\n       13 \n       14 \n  ---> 15 ax2 = ax.twinx()\n       16 \n       17 plt.show()</p>\n  \n  <p>AttributeError: 'NoneType' object has no attribute 'twinx'</p>\n</blockquote>\n\n<p>Any thoughts?   Thanks!</p>\n"}, {"tags": ["python", "facebook", "python-2.7", "facebook-ads-api", "facebook-marketing-api"], "answers": [{"tags": [], "owner": {"reputation": 4270, "user_id": 993169, "user_type": "registered", "profile_image": "https://graph.facebook.com/61405622/picture?type=large", "display_name": "Paul Bain", "link": "https://stackoverflow.com/users/993169/paul-bain"}, "is_accepted": true, "score": 1, "last_activity_date": 1485432450, "creation_date": 1485432450, "answer_id": 41873124, "question_id": 41729593, "link": "https://stackoverflow.com/questions/41729593/python-facebookads-sdk-can-not-find-publisher-platform-breakdowns/41873124#41873124", "title": "Python facebookads sdk - can not find publisher_platform breakdowns", "body": "<p>Looks like it's actually missing from the SDK. You can just check in the file to see if it's there when you see this kind of issue. </p>\n\n<p>Until it's available in the SDK, you can just use a string:</p>\n\n<pre><code>insights = account.get_insights(fields=[\n    AdsInsights.Field.ad_id,\n    AdsInsights.Field.impressions,\n    AdsInsights.Field.reach,\n    AdsInsights.Field.spend,\n], params={\n    'level': AdsInsights.Level.ad,\n    'breakdowns': 'publisher_platform',\n    'time_range': {'since': str(datetime.date(2016,12,1)), 'until': str(datetime.date(2016,12,31))}\n})\n</code></pre>\n"}], "owner": {"reputation": 159, "user_id": 5834765, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/578432a051bbbb95fda4f9a9fb1fe2c0?s=128&d=identicon&r=PG&f=1", "display_name": "gogolaygo", "link": "https://stackoverflow.com/users/5834765/gogolaygo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 357, "favorite_count": 0, "accepted_answer_id": 41873124, "answer_count": 1, "score": 1, "last_activity_date": 1485432450, "creation_date": 1484774243, "last_edit_date": 1484775462, "question_id": 41729593, "link": "https://stackoverflow.com/questions/41729593/python-facebookads-sdk-can-not-find-publisher-platform-breakdowns", "title": "Python facebookads sdk - can not find publisher_platform breakdowns", "body": "<p>I am trying to get the 'platform' (or sometimes 'publisher_platform') breakdown using the facebookads Python SDK, because we serve ads on Facebook and Instagram. Here's my code:</p>\n\n<pre><code>insights = account.get_insights(fields=[\n    AdsInsights.Field.ad_id,\n    AdsInsights.Field.impressions,\n    AdsInsights.Field.reach,\n    AdsInsights.Field.spend,\n], params={\n    'level': AdsInsights.Level.ad,\n    'breakdowns': AdsInsights.Breakdowns.publisher_platform,\n    'time_range': {'since': str(datetime.date(2016,12,1)), 'until': str(datetime.date(2016,12,31))}\n})\n</code></pre>\n\n<p>The code raised the following error message:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 8, in &lt;module&gt;\nAttributeError: class Breakdowns has no attribute 'publisher_platform'\n</code></pre>\n\n<p>Everything except line 8 is working. How to work around this issue?</p>\n"}, {"tags": ["python", "google-cloud-storage"], "comments": [{"owner": {"reputation": 2380, "user_id": 5927496, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/a888e2216c350c2f12ee4b3b05e90759?s=128&d=identicon&r=PG&f=1", "display_name": "Alexis Clarembeau", "link": "https://stackoverflow.com/users/5927496/alexis-clarembeau"}, "edited": false, "score": 0, "creation_date": 1484775291, "post_id": 41729548, "comment_id": 70654165, "body": "Hello, could you just add a better indentation for your code and also specify which are the libraries you are using to upload on google storage?"}], "answers": [{"tags": [], "owner": {"reputation": 32859, "user_id": 81491, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fa2d855b58c41269f0876b99eac9607d?s=128&d=identicon&r=PG", "display_name": "Brandon Yarbrough", "link": "https://stackoverflow.com/users/81491/brandon-yarbrough"}, "is_accepted": true, "score": 1, "last_activity_date": 1484777200, "creation_date": 1484777200, "answer_id": 41730300, "question_id": 41729548, "link": "https://stackoverflow.com/questions/41729548/upload-raw-files-to-google-cloud-storage/41730300#41730300", "title": "Upload .raw files to Google Cloud Storage", "body": "<p>I believe that, because your file ends in \".raw\", the \"mimetypes\" library is having trouble guessing the content type you want for the object. Try explicitly specifying the \"media_mime_type\" keyword argument with the MIME type you want GCS to use.</p>\n\n<p>This is where I think the error is likely being generated: <a href=\"https://github.com/google/google-api-python-client/blob/master/googleapiclient/discovery.py#L789\" rel=\"nofollow noreferrer\">https://github.com/google/google-api-python-client/blob/master/googleapiclient/discovery.py#L789</a></p>\n\n<p>Also, may I suggest that you take a look at the <a href=\"https://googlecloudplatform.github.io/google-cloud-python/\" rel=\"nofollow noreferrer\">Google Cloud Client Library for Python</a>. I found it nicer to use.</p>\n"}], "owner": {"reputation": 3, "user_id": 7437901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e689fc43477b65c8b994591c9672486b?s=128&d=identicon&r=PG&f=1", "display_name": "Carlos Aguirre Cort&#233;s", "link": "https://stackoverflow.com/users/7437901/carlos-aguirre-cort%c3%a9s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 291, "favorite_count": 0, "accepted_answer_id": 41730300, "answer_count": 1, "score": 0, "last_activity_date": 1487013737, "creation_date": 1484774105, "last_edit_date": 1487013737, "question_id": 41729548, "link": "https://stackoverflow.com/questions/41729548/upload-raw-files-to-google-cloud-storage", "title": "Upload .raw files to Google Cloud Storage", "body": "<p>I have a Python script that try to upload files on google storage but keeps appearing this error:</p>\n\n<blockquote>\n  <p>googleapiclient.errors.UnknownFileType:</p>\n</blockquote>\n\n<p>Here is my code:</p>\n\n<pre><code>def create_service():\n\n    credentials = GoogleCredentials.get_application_default()\n\n    return build('storage', 'v1', credentials=credentials)\n\nservice=create_service()\n\nrequest=service.objects().insert(bucket='testBucket',name='test.raw',media_body=path_files+file_raw)\n\nresponse=request.execute()\n\nexit()\n</code></pre>\n\n<p><code>file_raw</code> is an audio .raw file.</p>\n\n<p>The libraries I am using are:</p>\n\n<pre><code>from oauth2client.client import GoogleCredentials\n\nfrom googleapiclient.discovery import build\n\nfrom google.cloud import storage\n</code></pre>\n"}, {"tags": ["python", "python-2.7", "list", "reverse"], "comments": [{"owner": {"reputation": 4819, "user_id": 4980617, "user_type": "registered", "profile_image": "https://graph.facebook.com/511544972342428/picture?type=large", "display_name": "Anirban Bhui", "link": "https://stackoverflow.com/users/4980617/anirban-bhui"}, "edited": false, "score": 0, "creation_date": 1484774801, "post_id": 41729501, "comment_id": 70653914, "body": "got a lot of downvote ! why ?"}, {"owner": {"reputation": 118519, "user_id": 244297, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0e726125e86b084ffec695e845b360b7?s=128&d=identicon&r=PG", "display_name": "Eugene Yarmash", "link": "https://stackoverflow.com/users/244297/eugene-yarmash"}, "edited": false, "score": 3, "creation_date": 1484775332, "post_id": 41729501, "comment_id": 70654190, "body": "Don&#39;t use <code>list</code> as a variable name, you shadow a built-in <a href=\"https://docs.python.org/2/library/functions.html#list\" rel=\"nofollow noreferrer\">function</a>."}], "answers": [{"comments": [{"owner": {"reputation": 8761, "user_id": 1192111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/578c0836635d7d63abf64daaafb3ffa6?s=128&d=identicon&r=PG", "display_name": "Francisco C", "link": "https://stackoverflow.com/users/1192111/francisco-c"}, "edited": false, "score": 1, "creation_date": 1484774534, "post_id": 41729567, "comment_id": 70653787, "body": "Whoever downvoted this answer, could you explain why?"}, {"owner": {"reputation": 824, "user_id": 4545530, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b31967fe4702f501fc7ef3df61d408e?s=128&d=identicon&r=PG&f=1", "display_name": "mkiever", "link": "https://stackoverflow.com/users/4545530/mkiever"}, "edited": false, "score": 1, "creation_date": 1484774624, "post_id": 41729567, "comment_id": 70653836, "body": "Didn&#39;t downvote, but probably because it only works for lists with unique elements. Not a general solution like the other proposed answers."}, {"owner": {"reputation": 4819, "user_id": 4980617, "user_type": "registered", "profile_image": "https://graph.facebook.com/511544972342428/picture?type=large", "display_name": "Anirban Bhui", "link": "https://stackoverflow.com/users/4980617/anirban-bhui"}, "edited": false, "score": 0, "creation_date": 1484774678, "post_id": 41729567, "comment_id": 70653859, "body": "i&#39;m shocked really :("}], "tags": [], "owner": {"reputation": 8761, "user_id": 1192111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/578c0836635d7d63abf64daaafb3ffa6?s=128&d=identicon&r=PG", "display_name": "Francisco C", "link": "https://stackoverflow.com/users/1192111/francisco-c"}, "is_accepted": false, "score": 0, "last_activity_date": 1484774167, "creation_date": 1484774167, "answer_id": 41729567, "question_id": 41729501, "link": "https://stackoverflow.com/questions/41729501/reverse-a-set-of-list-elements-and-store-it-to-the-list/41729567#41729567", "title": "Reverse a set of list elements and store it to the list?", "body": "<p>You could do something like this:</p>\n\n<pre><code>l = [1,5,4,3,2,6]\nindex5 = l.index(5)\nindex2 = l.index(2)\nl[index5:index2+1] = l[index2:index5-1:-1]\n</code></pre>\n\n<p>If you want it to be more explicit, you could use <code>reversed</code>:</p>\n\n<pre><code>l[index5:index2+1] = reversed(l[index5:index2+1])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 118519, "user_id": 244297, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0e726125e86b084ffec695e845b360b7?s=128&d=identicon&r=PG", "display_name": "Eugene Yarmash", "link": "https://stackoverflow.com/users/244297/eugene-yarmash"}, "is_accepted": false, "score": 3, "last_activity_date": 1484774188, "creation_date": 1484774188, "answer_id": 41729574, "question_id": 41729501, "link": "https://stackoverflow.com/questions/41729501/reverse-a-set-of-list-elements-and-store-it-to-the-list/41729574#41729574", "title": "Reverse a set of list elements and store it to the list?", "body": "<p>You could use list slice assignment, which modifies the list in-place:</p>\n\n<pre><code>&gt;&gt;&gt; L = [1, 5, 4, 3, 2, 6]\n&gt;&gt;&gt; L[1:5] = L[4:0:-1]  \n&gt;&gt;&gt; L\n[1, 2, 3, 4, 5, 6]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4426, "user_id": 4099813, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d53c6c37d906b105371aeff8bbe0603?s=128&d=identicon&r=PG&f=1", "display_name": "MooingRawr", "link": "https://stackoverflow.com/users/4099813/mooingrawr"}, "edited": false, "score": 2, "creation_date": 1484774308, "post_id": 41729589, "comment_id": 70653678, "body": "Is not what OP wants."}], "tags": [], "owner": {"reputation": 1188, "user_id": 7244759, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/336538946712354/picture?type=large", "display_name": "spicypumpkin", "link": "https://stackoverflow.com/users/7244759/spicypumpkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1484774699, "last_edit_date": 1484774699, "creation_date": 1484774231, "answer_id": 41729589, "question_id": 41729501, "link": "https://stackoverflow.com/questions/41729501/reverse-a-set-of-list-elements-and-store-it-to-the-list/41729589#41729589", "title": "Reverse a set of list elements and store it to the list?", "body": "<p>Edit: Sorry, I misunderstood your question.</p>\n\n<pre><code>&gt;&gt;&gt; l = [1, 5, 4, 3, 2, 6]\n&gt;&gt;&gt; temp = l[1:5]\n&gt;&gt;&gt; temp.reverse()\n&gt;&gt;&gt; l[1:5] = temp\n&gt;&gt;&gt; l\n&gt;&gt;&gt; [1, 2, 3, 4, 5, 6]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 824, "user_id": 4545530, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b31967fe4702f501fc7ef3df61d408e?s=128&d=identicon&r=PG&f=1", "display_name": "mkiever", "link": "https://stackoverflow.com/users/4545530/mkiever"}, "edited": false, "score": 2, "creation_date": 1484774498, "post_id": 41729596, "comment_id": 70653767, "body": "I find <code>l[1:5] = reversed(l[1:5])</code> nicer to read, but in principle the same thing."}, {"owner": {"reputation": 118519, "user_id": 244297, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0e726125e86b084ffec695e845b360b7?s=128&d=identicon&r=PG", "display_name": "Eugene Yarmash", "link": "https://stackoverflow.com/users/244297/eugene-yarmash"}, "edited": false, "score": 2, "creation_date": 1484774916, "post_id": 41729596, "comment_id": 70653976, "body": "<code>l[4:0:-1]</code> would be more efficient than <code>l[1:5][::-1]</code>, as it would create a new list just once."}, {"owner": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "reply_to_user": {"reputation": 118519, "user_id": 244297, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0e726125e86b084ffec695e845b360b7?s=128&d=identicon&r=PG", "display_name": "Eugene Yarmash", "link": "https://stackoverflow.com/users/244297/eugene-yarmash"}, "edited": false, "score": 0, "creation_date": 1484779564, "post_id": 41729596, "comment_id": 70656036, "body": "@eugeney I considered doing it that way, but I thought that having the indices be the same was nicer."}], "tags": [], "owner": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "is_accepted": false, "score": 3, "last_activity_date": 1484774271, "creation_date": 1484774271, "answer_id": 41729596, "question_id": 41729501, "link": "https://stackoverflow.com/questions/41729501/reverse-a-set-of-list-elements-and-store-it-to-the-list/41729596#41729596", "title": "Reverse a set of list elements and store it to the list?", "body": "<p>You can reassign the slice of the list to that same slice in reverse</p>\n\n<pre><code>l = [1,5,4,3,2,6]\nl[1:5] = l[1:5][::-1]\nprint(l)\n#[1, 2, 3, 4, 5, 6]\n</code></pre>\n"}], "owner": {"reputation": 4819, "user_id": 4980617, "user_type": "registered", "profile_image": "https://graph.facebook.com/511544972342428/picture?type=large", "display_name": "Anirban Bhui", "link": "https://stackoverflow.com/users/4980617/anirban-bhui"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4106, "favorite_count": 0, "answer_count": 4, "score": -6, "last_activity_date": 1484775576, "creation_date": 1484773915, "last_edit_date": 1484775576, "question_id": 41729501, "link": "https://stackoverflow.com/questions/41729501/reverse-a-set-of-list-elements-and-store-it-to-the-list", "title": "Reverse a set of list elements and store it to the list?", "body": "<p>What will be the logic or code of this problem? The <code>reverse()</code> function does not take any argument and <code>list[::-1]</code> is also the same. How to do it in easy way?</p>\n\n<p>Example, given:</p>\n\n<pre><code>list = [1,5,4,3,2,6]\n</code></pre>\n\n<p>Reversing 5...2, the output will be:</p>\n\n<pre><code>list = [1,2,3,4,5,6]\n</code></pre>\n"}, {"tags": ["python", "function", "import"], "comments": [{"owner": {"reputation": 12895, "user_id": 1881610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d33c1dcf29d614b9366ccc3e08ac793f?s=128&d=identicon&r=PG", "display_name": "Phillip", "link": "https://stackoverflow.com/users/1881610/phillip"}, "edited": false, "score": 0, "creation_date": 1484774254, "post_id": 41729483, "comment_id": 70653658, "body": "That&#39;s not possible in Python. You can influence what is imported on <code>from .. import *</code> though, using <code>__all__</code> (and leading underscores). <a href=\"http://stackoverflow.com/questions/1301346/the-meaning-of-a-single-and-a-double-underscore-before-an-object-name-in-python\">Name mangling</a> is related as well."}, {"owner": {"reputation": 6805, "user_id": 405303, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/OQiiL.png?s=128&g=1", "display_name": "Jon Kiparsky", "link": "https://stackoverflow.com/users/405303/jon-kiparsky"}, "edited": false, "score": 0, "creation_date": 1484774463, "post_id": 41729483, "comment_id": 70653749, "body": "You also don&#39;t want to think about it as &quot;importing a file&quot;. You&#39;re importing a function from a module."}, {"owner": {"reputation": 826, "user_id": 2288038, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2897616dd89f71f62958efd80107d93b?s=128&d=identicon&r=PG&f=1", "display_name": "clyde", "link": "https://stackoverflow.com/users/2288038/clyde"}, "edited": false, "score": 0, "creation_date": 1484775006, "post_id": 41729483, "comment_id": 70654015, "body": "I don&#39;t know that this question needs to be voted down - the question is valid.  The best answers should include some explanation of Python conventions to help others who may have this question in the future.  Perhaps explaining a bit more about what you mean by &quot;isn&#39;t working&quot; and why you want to do this would help?"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5526811"}, "edited": false, "score": 0, "creation_date": 1484774844, "post_id": 41729603, "comment_id": 70653941, "body": "Thanks @DietrichEpp. Could you give me your opinion on this question: <a href=\"http://stackoverflow.com/questions/41727874/proper-way-of-implementing-one-function-per-file-in-python/41727967#41727967\" title=\"proper way of implementing one function per file in python\">stackoverflow.com/questions/41727874/&hellip;</a> ? I would love to read your opinion."}], "tags": [], "owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "is_accepted": true, "score": 3, "last_activity_date": 1484774298, "creation_date": 1484774298, "answer_id": 41729603, "question_id": 41729483, "link": "https://stackoverflow.com/questions/41729483/private-functions-in-python/41729603#41729603", "title": "Private functions in python", "body": "<p>There are ways you can prevent the import, but they're generally hacks and you want to avoid them.  The normal method is to just use the underscore:</p>\n\n<pre><code>def _function():\n    pass\n</code></pre>\n\n<p>Then, when you import,</p>\n\n<pre><code>from my_module import *\n</code></pre>\n\n<p>You'll notice that <code>_function</code> is <em>not</em> imported because it begins with an underscore.  However, you can always do this:</p>\n\n<pre><code># In Python culture, this is considered rude\nfrom my_module import _function\n</code></pre>\n\n<p>But you're not supposed to do that.  Just don't do that, and you'll be fine.  Python's attitude is that we're all adults.  There are a lot of other things you're not supposed to do which are far worse, like</p>\n\n<pre><code>import my_module\n# Remove the definition for _function!\ndel my_module._function\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "is_accepted": false, "score": 2, "last_activity_date": 1484774937, "creation_date": 1484774937, "answer_id": 41729782, "question_id": 41729483, "link": "https://stackoverflow.com/questions/41729483/private-functions-in-python/41729782#41729782", "title": "Private functions in python", "body": "<p>There is <em>no privacy</em> in Python. There are only <em>conventions</em> governing what external code should consider publicly accessible and usable.</p>\n\n<p>Importing a module for the first time, triggers the creation of a module object and the execution of <em>all</em> top-level code in the module. The module object contains the global namespace with the result of that code having run.</p>\n\n<p>Because Python is dynamic you can always introspect the module namespace; you can see all names defined, all objects those names reference, and you can access and alter everything. It doesn't matter here if those names start with underscores or not.</p>\n\n<p>So the only reason you use a leading <code>_</code> underscore for a name, is to <em>document</em> that the name is internal to the implementation of the module, and that external code should not rely on that name existing in a future version. The <code>from module import *</code> syntax will ignore such names for that reason alone. But you can't prevent a determined programmer from accessing such a name anyway. They simply do so at their own risk, it is not your responsibility to keep them from that access.</p>\n\n<p>If you have functions or other objects that are only needed to initialise the module, you are of course free to delete those names at the end.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5526811"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 41729603, "answer_count": 2, "score": -2, "last_activity_date": 1484774937, "creation_date": 1484773819, "question_id": 41729483, "link": "https://stackoverflow.com/questions/41729483/private-functions-in-python", "title": "Private functions in python", "body": "<p>Is it possible to avoid importing a file with <code>from file import function</code>?\nSomeone told me i would need to put an underscore as prefix, like: <code>_function</code>, but isn't working.</p>\n\n<p>I'm using Python 2.6 because of a legacy code.</p>\n"}, {"tags": ["python"], "answers": [{"tags": [], "owner": {"reputation": 13815, "user_id": 6575931, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-CumJFhlEBdA/AAAAAAAAAAI/AAAAAAAAi5U/sqexnazvXek/photo.jpg?sz=128", "display_name": "Uriel", "link": "https://stackoverflow.com/users/6575931/uriel"}, "is_accepted": false, "score": 1, "last_activity_date": 1484778332, "creation_date": 1484778332, "answer_id": 41730561, "question_id": 41730340, "link": "https://stackoverflow.com/questions/41730340/how-to-print-numpy-matrix-nicely-with-text-headers-python/41730561#41730561", "title": "How to print numpy matrix nicely with text headers? python", "body": "<p>You can use the <code>pandas</code> library for that:</p>\n\n<pre><code>&gt;&gt;&gt; from pandas import DataFrame\n&gt;&gt;&gt; matrix = [(' ', [  0, -2, -4, -6, -8, -10]),\n...  ('T', [ -2,  1, -1, -3, -5, -7]),\n...  ('G', [ -4, -1,  2,  0, -2, -4]),\n...  ('C', [ -6, -3,  0,  1,  1, -1]),\n...  ('A', [ -8, -5, -2, -1,  0,  2])]\n...\n&gt;&gt;&gt; DataFrame.from_items(matrix, orient = 'index', columns = [' ', 'T', 'G', 'C', 'A'])\n      T  G  C  A\n   0 -2 -4 -6 -8\nT -2  1 -1 -3 -5\nG -4 -1  2  0 -2\nC -6 -3  0  1  1\nA -8 -5 -2 -1  0\n</code></pre>\n"}], "migrated_from": {"other_site": {"aliases": ["http://threedprinting.stackexchange.com"], "markdown_extensions": ["MathJax"], "open_beta_date": 1454365714, "closed_beta_date": 1452625200, "site_state": "open_beta", "high_resolution_icon_url": "https://cdn.sstatic.net/Sites/3dprinting/Img/apple-touch-icon@2.png", "favicon_url": "https://cdn.sstatic.net/Sites/3dprinting/Img/favicon.ico", "icon_url": "https://cdn.sstatic.net/Sites/3dprinting/Img/apple-touch-icon.png", "audience": "3D printing enthusiasts", "site_url": "https://3dprinting.stackexchange.com", "api_site_parameter": "3dprinting", "logo_url": "https://cdn.sstatic.net/Sites/3dprinting/Img/logo.png", "name": "3D Printing", "site_type": "main_site"}, "on_date": 1484777351, "question_id": 3426}, "owner": {"user_type": "does_not_exist", "display_name": "Ely"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1484826280, "creation_date": 1484773760, "last_edit_date": 1484826280, "question_id": 41730340, "link": "https://stackoverflow.com/questions/41730340/how-to-print-numpy-matrix-nicely-with-text-headers-python", "title": "How to print numpy matrix nicely with text headers? python", "body": "<p>How can I print matrix nicely with headers like this:</p>\n\n<pre><code>      T  C  G  C  A\n  [0 -2 -4 -6 -8 -10]\nT [-2  1 -1 -3 -5 -7]\nC [-4 -1  2  0 -2 -4]\nC [-6 -3  0  1  1 -1]\nA [-8 -5 -2 -1  0  2]\n</code></pre>\n\n<p>I have tried to print with <code>numpy.matrix(mat)</code>, But all I have got was:</p>\n\n<pre><code>[[  0  -2  -4  -6  -8 -10]\n [ -2   1  -1  -3  -5  -7]\n [ -4  -1   2   0  -2  -4]\n [ -6  -3   0   1   1  -1]\n [ -8  -5  -2  -1   0   2]]\n</code></pre>\n\n<p>And I also didn't succeed to add the headers.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "api", "collective-intelligence"], "comments": [{"owner": {"reputation": 5556, "user_id": 1549950, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4e1d79b0859761cf6de8f560784226cc?s=128&d=identicon&r=PG", "display_name": "Michael Lihs", "link": "https://stackoverflow.com/users/1549950/michael-lihs"}, "edited": false, "score": 0, "creation_date": 1484774243, "post_id": 41729474, "comment_id": 70653653, "body": "Welcome to SO! It might be helpful to add the code snippet that causes the error. Most readers won&#39;t be able to look into the book so they don&#39;t know what code your are talking about..."}, {"owner": {"reputation": 81, "user_id": 3437753, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7dfdfc2c6e2edb19f53c29edb648b095?s=128&d=identicon&r=PG&f=1", "display_name": "Onzalo", "link": "https://stackoverflow.com/users/3437753/onzalo"}, "edited": false, "score": 0, "creation_date": 1484776933, "post_id": 41729474, "comment_id": 70654988, "body": "This error is because that code was written for python 2 and the raise syntax changes for python3.  <a href=\"http://python-future.org/compatible_idioms.html#raising-exceptions\" rel=\"nofollow noreferrer\">python-future.org/compatible_idioms.html#raising-exceptions</a>  I recommend you use python 2.7 for this code."}], "owner": {"reputation": 125, "user_id": 7437681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48a9240470c3af282d606e995a906ddc?s=128&d=identicon&r=PG&f=1", "display_name": "Guilherme", "link": "https://stackoverflow.com/users/7437681/guilherme"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 206, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1484778585, "creation_date": 1484773734, "last_edit_date": 1484778585, "question_id": 41729474, "link": "https://stackoverflow.com/questions/41729474/using-api-of-pydelicious-in-python", "title": "Using API of pydelicious in Python", "body": "<p>I'm reading, and trying the exercises in Programming Collective Intelligence, from O'reilly. And in chapter two it's to work with pydelicicous API, and I follow the instruction to get it, but when I run the <code>setup.py</code> file, the following error appears:</p>\n\n<pre><code>File \".../pydelicious-0.7/setup.py\", line 6, in &lt;module&gt; import pydelicious\nFile \".../pydelicious-0.7/pydelicious/__init__.py\", line 228\n\nraise PyDeliciousUnauthorized, \"Check credentials.\"\n                             ^\nSyntaxError: invalid syntax\n</code></pre>\n\n<p>I wonder if this is because the book is quite old, and this API is out of use, or I'm doing something wrong... If someone could help me I would be very grateful, since it's not very useful to follow the book without trying the code.</p>\n\n<p>I'm using python 3.6 and the link for the API is:\n<a href=\"https://code.google.com/archive/p/pydelicious/source\" rel=\"nofollow noreferrer\">https://code.google.com/archive/p/pydelicious/source</a></p>\n"}, {"tags": ["python", "django", "forms"], "comments": [{"owner": {"reputation": 38630, "user_id": 1324033, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/PaonW.png?s=128&g=1", "display_name": "Sayse", "link": "https://stackoverflow.com/users/1324033/sayse"}, "edited": false, "score": 0, "creation_date": 1484773501, "post_id": 41729391, "comment_id": 70653280, "body": "Please post the urls.py for the registration and login view"}, {"owner": {"reputation": 23, "user_id": 7091772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a8932e0e0367b4a38728c2ffebf43f8?s=128&d=identicon&r=PG&f=1", "display_name": "jonas vl", "link": "https://stackoverflow.com/users/7091772/jonas-vl"}, "reply_to_user": {"reputation": 38630, "user_id": 1324033, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/PaonW.png?s=128&g=1", "display_name": "Sayse", "link": "https://stackoverflow.com/users/1324033/sayse"}, "edited": false, "score": 0, "creation_date": 1484773913, "post_id": 41729391, "comment_id": 70653478, "body": "Here you go, I added it to the question"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 7091772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a8932e0e0367b4a38728c2ffebf43f8?s=128&d=identicon&r=PG&f=1", "display_name": "jonas vl", "link": "https://stackoverflow.com/users/7091772/jonas-vl"}, "edited": false, "score": 0, "creation_date": 1484774815, "post_id": 41729549, "comment_id": 70653922, "body": "Thanks a lot this was just what I needed."}], "tags": [], "owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "is_accepted": false, "score": 1, "last_activity_date": 1484774105, "creation_date": 1484774105, "answer_id": 41729549, "question_id": 41729391, "link": "https://stackoverflow.com/questions/41729391/login-form-keeps-telling-my-username-already-exists-django/41729549#41729549", "title": "login form keeps telling my username already exists django", "body": "<p>You shouldn't use a ModelForm for this. That will always call the model validation, which in this case checks for username uniqueness. </p>\n\n<p>Use a standard Form class instead. </p>\n"}], "owner": {"reputation": 23, "user_id": 7091772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a8932e0e0367b4a38728c2ffebf43f8?s=128&d=identicon&r=PG&f=1", "display_name": "jonas vl", "link": "https://stackoverflow.com/users/7091772/jonas-vl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 254, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1484774105, "creation_date": 1484773397, "last_edit_date": 1484773835, "question_id": 41729391, "link": "https://stackoverflow.com/questions/41729391/login-form-keeps-telling-my-username-already-exists-django", "title": "login form keeps telling my username already exists django", "body": "<p>So I am trying to make a login form for a django website using a forms.py file to generate a form in my html. I have already made a registration form using the same methods and that works fine but for some reason my login form keeps working like a registration form and saying that my username already exists. i assume it is just a litle mistake but I can't figure out what it is exactly.</p>\n\n<h3>forms.py</h3>\n\n<pre><code>from django.contrib.auth.models import User\nfrom django import forms\n\nclass LoginForm(forms.ModelForm):\npassword = forms.CharField(widget=forms.PasswordInput)\n\nclass Meta:\n    model = User\n    fields = ['username', 'password']\n</code></pre>\n\n<h3>models.py</h3>\n\n<pre><code>class LoginFormView(View):\nform_class = LoginForm\ntemplate_name = 'intranet/login_form.html'\n\ndef get(self, request):\n    form = self.form_class(None)\n    return render(request,self.template_name,{'form': form})\n\ndef post(self,request):\n    form = self.form_class(request.POST)\n\n    if form.is_valid():\n\n        username = request.POST.get['username']\n        password = request.POST.get['password']\n        user = authenticate(username=username,password=password)\n\n        if user is not None:\n            if user.is_active:\n                login(request,user)\n                return redirect('werknemers_list')\n\n    return render(request, self.template_name, {'form': form})\n</code></pre>\n\n<h3>login_form.html</h3>\n\n<pre><code>&lt;h1&gt;Log in&lt;/h1&gt;\n&lt;form method=\"post\"&gt;\n    {% csrf_token %}\n    {{ form.as_p }}\n    &lt;input type=\"submit\" value=\"log in\" /&gt;\n&lt;/form&gt;\n</code></pre>\n\n<h3>urls.py</h3>\n\n<pre><code> from django.conf.urls import  url\n\n    from intranet import views\n\n    urlpatterns = [\n      url(r'^$', views.LoginFormView.as_view(), name='login'),\n      url(r'^registreer$', views.UserFormView.as_view(), name='registreer')]\n</code></pre>\n"}, {"tags": ["python", "while-loop", "try-catch", "email-validation"], "answers": [{"tags": [], "owner": {"reputation": 1199, "user_id": 1964325, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/fcbe6081d328a42db28146168881f891?s=128&d=identicon&r=PG", "display_name": "Clandestine", "link": "https://stackoverflow.com/users/1964325/clandestine"}, "is_accepted": false, "score": 0, "last_activity_date": 1485823833, "creation_date": 1485823833, "answer_id": 41948001, "question_id": 41729369, "link": "https://stackoverflow.com/questions/41729369/email-ping-hangs-on-email/41948001#41948001", "title": "Email Ping hangs on email", "body": "<p>Your <code>while</code> loop is set to continue forever if it encounters any kind of persistent error. You have a lot of code in the <code>try</code> block, so there are plenty of cases where this might happen (e.g. failure to connect to your email server, failure to open your csv file, etc.). Without more information I can\u2019t say for sure this is happening, but it certainly wouldn\u2019t hurt to address that.</p>\n\n<p>Since the only error you are concerned with is <code>TimeoutError</code>, you should catch that error explicitly and <code>continue</code> only in that case. For all other errors, either print the error and break the loop or let the error bubble up. You should also set the timeout to a sane value when creating your server instance. And finally, you\u2019d be better off with a <code>for</code> loop that ends if the timeout is not resolved after a certain amount of time; even in the case of a persistent <code>TimeoutError</code> you don\u2019t want to try forever:</p>\n\n<pre><code>### Set a sane timeout\nserver = smtplib.SMTP('smtp-mail.outlook.com', 587, timeout=1)\n\n### Try a maximum of 10 times\nfor i in range(10):\n    try:\n        ### Connect to the email server and write to your file\n\n    except TimeoutError, e:\n        print e\n\n    ### All other errors will bubble up\n</code></pre>\n\n<p>If you are curious what the default timeout is, you can do this:</p>\n\n<pre><code>import socket\n\nprint(socket.getdefaulttimeout())\n</code></pre>\n\n<p>The response is the default timeout, in seconds. A value of <code>None</code> indicates that you will never timeout, which doesn\u2019t seem to be the case for you.</p>\n"}], "owner": {"reputation": 107, "user_id": 6610176, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/55c1cee956c90f42c02975f969fe7990?s=128&d=identicon&r=PG&f=1", "display_name": "SVill", "link": "https://stackoverflow.com/users/6610176/svill"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 97, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1485823833, "creation_date": 1484773320, "question_id": 41729369, "link": "https://stackoverflow.com/questions/41729369/email-ping-hangs-on-email", "title": "Email Ping hangs on email", "body": "<p>I am trying to use a script I found to ping emails to ensure that they exist.</p>\n\n<pre><code>with open(input_list, 'r') as f:\n    reader = csv.reader(f)\n    for row in reader:\n        address = row[0]\n        person_name = row[1]+' '+row[2]\n        company = row[4]\n        match = re.match('^[_A-Za-z0-9-\\\\+]+(\\\\.[_A-Za-z0-9-]+)*@[A-Za-z0-9-]+(\\\\.[A-Za-z0-9]+)*(\\\\.[A-Za-z]{2,})$', address)\n        print(\"Email for \", person_name)\n        print(address)\n        if match == None:\n            synt = 'Bad Syntax'\n            warnings.warn(address + \" has bad syntax.\")\n        else:\n            synt = 'Good syntax'\n        dom = re.search(\"@(.*)$\", address).group(1)\n        print(dom)\n        try:\n            records = dns.resolver.query(dom, 'MX')\n            mxRecord = records[0].exchange\n            mxRecord = str(mxRecord)\n        except:\n            warnings.warn(\"Issue contacting domain\")\n            pass\n        # Get local server hostname\n        host = socket.gethostname()\n        # SMTP lib setup (use debug level for full output)\n        server = smtplib.SMTP('smtp-mail.outlook.com',587)#will need this for mail sending\n        while True:\n            try:\n                server.set_debuglevel(0)\n                # SMTP Conversation\n                server.connect(mxRecord)\n                server.helo(host)\n                server.mail('me@domain.com')\n                code, message = server.rcpt(str(address))\n                server.quit()\n                if code == 250:\n                    print('Success')\n                    new_row = [address, person_name, company, synt, 'Ping Successful']\n                    email_data.append(new_row)\n                    with open('cseresult2.csv', 'a+', newline='') as mess:\n                        writ = csv.writer(mess, dialect='excel')\n                        writ.writerow(email_data[-1])\n                else:\n                    print('Bad')\n                    new_row = [address, person_name, company, synt, 'Ping Bounced']\n                    email_data.append(new_row)\n                    with open('cseresult2.csv', 'a+', newline='') as mess:\n                        writ = csv.writer(mess, dialect='excel')\n                        writ.writerow(email_data[-1])\n            except:\n                continue\n            break\n        print()\n        print('================')\n        print()\n        time.sleep(3)\n</code></pre>\n\n<p>The code works mostly fine. However, with out the while loop, I get a lot of timeout errors:</p>\n\n<pre><code>TimeoutError: [WinError 10060] A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond\n</code></pre>\n\n<p>The while loop has taken care of that, but now it will hang on an email on not iterate through the rest of the list.  This is for a project, so any help to get it to move would be appreciated.</p>\n"}, {"tags": ["python", "pandas", "numpy"], "answers": [{"comments": [{"owner": {"reputation": 26457, "user_id": 624829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95e50fdfbe4cb4f3715d82a2e7e46cb8?s=128&d=identicon&r=PG", "display_name": "Boud", "link": "https://stackoverflow.com/users/624829/boud"}, "edited": false, "score": 1, "creation_date": 1484773956, "post_id": 41729490, "comment_id": 70653506, "body": "You becoming <code>query</code> function sponsor :-)"}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "reply_to_user": {"reputation": 26457, "user_id": 624829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95e50fdfbe4cb4f3715d82a2e7e46cb8?s=128&d=identicon&r=PG", "display_name": "Boud", "link": "https://stackoverflow.com/users/624829/boud"}, "edited": false, "score": 1, "creation_date": 1484773990, "post_id": 41729490, "comment_id": 70653519, "body": "@Boud I tend to focus on a particular feature and answer many questions with it."}], "tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": true, "score": 12, "last_activity_date": 1484775532, "last_edit_date": 1484775532, "creation_date": 1484773883, "answer_id": 41729490, "question_id": 41729368, "link": "https://stackoverflow.com/questions/41729368/pandas-randomly-replace-k-percent/41729490#41729490", "title": "pandas randomly replace k percent", "body": "<p><strong><em><code>pandas</code> answer</em></strong>  </p>\n\n<ul>\n<li>use <code>query</code> to get filtered <code>df</code> with only <code>value == 1</code></li>\n<li>use <code>sample(frac=.1)</code> to take 10% of those</li>\n<li>use the index of the result to assign zero</li>\n</ul>\n\n<hr>\n\n<pre><code>df.loc[\n    df.query('value == 1').sample(frac=.1).index,\n    'value'\n] = 0\n</code></pre>\n\n<hr>\n\n<p><strong><em>alternative <code>numpy</code> answer</em></strong>  </p>\n\n<ul>\n<li>get boolean array of where <code>df['value']</code> is <code>1</code></li>\n<li>assign random array of 10% zeros and 90% ones</li>\n</ul>\n\n<hr>\n\n<pre><code>v = df.value.values == 1\ndf.loc[v, 'value'] = np.random.choice((0, 1), v.sum(), p=(.1, .9))\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "edited": false, "score": 0, "creation_date": 1484774072, "post_id": 41729496, "comment_id": 70653558, "body": "the OP wants to randomly replace only the rows that are <code>1</code>, not a random sample of the entire df"}, {"owner": {"reputation": 91645, "user_id": 1744834, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/ofloC.png?s=128&g=1", "display_name": "Roman Pekar", "link": "https://stackoverflow.com/users/1744834/roman-pekar"}, "reply_to_user": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "edited": false, "score": 0, "creation_date": 1484774109, "post_id": 41729496, "comment_id": 70653577, "body": "yep I missed that, going to change the answer"}], "tags": [], "owner": {"reputation": 91645, "user_id": 1744834, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/ofloC.png?s=128&g=1", "display_name": "Roman Pekar", "link": "https://stackoverflow.com/users/1744834/roman-pekar"}, "is_accepted": false, "score": 2, "last_activity_date": 1484774656, "last_edit_date": 1484774656, "creation_date": 1484773902, "answer_id": 41729496, "question_id": 41729368, "link": "https://stackoverflow.com/questions/41729368/pandas-randomly-replace-k-percent/41729496#41729496", "title": "pandas randomly replace k percent", "body": "<p>you can probably use <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.random.choice.html\" rel=\"nofollow noreferrer\"><code>numpy.random.choice</code></a>:</p>\n\n<pre><code>&gt;&gt;&gt; idx = df.index[df.value==1]\n&gt;&gt;&gt; df.loc[np.random.choice(idx, size=idx.size/10, replace=False)].value = 0\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "is_accepted": false, "score": 3, "last_activity_date": 1484775917, "last_edit_date": 1484775917, "creation_date": 1484774082, "answer_id": 41729541, "question_id": 41729368, "link": "https://stackoverflow.com/questions/41729368/pandas-randomly-replace-k-percent/41729541#41729541", "title": "pandas randomly replace k percent", "body": "<p>Here's a NumPy approach with <a href=\"https://docs.scipy.org/doc/numpy-dev/reference/generated/numpy.random.choice.html\" rel=\"nofollow noreferrer\"><code>np.random.choice</code></a> -</p>\n\n<pre><code>a = df.value.values  # get a view into value col\nidx = np.flatnonzero(a) # get the nonzero indices\n\n# Finally select unique 10% from those indices and set 0s there\na[np.random.choice(idx,size=int(0.1*len(idx)),replace=0)] = 0\n</code></pre>\n\n<p>Sample run -</p>\n\n<pre><code>In [237]: df = pd.DataFrame(np.random.randint(0,2,(100,2)),columns=['id','value'])\n\nIn [238]: (df.value==1).sum() # Original Count of 1s in df.value column\nOut[238]: 53\n\nIn [239]: a = df.value.values\n\nIn [240]: idx = np.flatnonzero(a)\n\nIn [241]: a[np.random.choice(idx,size=int(0.1*len(idx)),replace=0)] = 0\n\nIn [242]: (df.value==1).sum() # New count of 1s in df.value column\nOut[242]: 48\n</code></pre>\n\n<hr>\n\n<p>Alternatively, a bit more pandas approach -</p>\n\n<pre><code>idx = np.flatnonzero(df['value'])\ndf.ix[np.random.choice(idx,size=int(0.1*len(idx)),replace=0),'value'] = 0\n</code></pre>\n\n<hr>\n\n<p><strong>Runtime test</strong></p>\n\n<p>All approaches posted thus far -</p>\n\n<pre><code>def f1(df):  #@piRSquared's soln1\n    df.loc[df.query('value == 1').sample(frac=.1).index,'value'] = 0\n\ndef f2(df):  #@piRSquared's soln2\n    v = df.value.values == 1\n    df.loc[v, 'value'] = np.random.choice((0, 1), v.sum(), p=(.1, .9))\n\ndef f3(df): #@Roman Pekar's soln\n    idx = df.index[df.value==1]\n    df.loc[np.random.choice(idx, size=idx.size/10, replace=False)].value = 0\n\ndef f4(df): #@Mine soln1\n    a = df.value.values\n    idx = np.flatnonzero(a)\n    a[np.random.choice(idx,size=int(0.1*len(idx)),replace=0)] = 0\n\ndef f5(df): #@Mine soln2\n    idx = np.flatnonzero(df['value'])\n    df.ix[np.random.choice(idx,size=int(0.1*len(idx)),replace=0),'value'] = 0\n</code></pre>\n\n<p>Timings -</p>\n\n<pre><code>In [2]: # Setup inputs\n   ...: df = pd.DataFrame(np.random.randint(0,2,(10000,2)),columns=['id','value'])\n   ...: df1 = df.copy()\n   ...: df2 = df.copy()\n   ...: df3 = df.copy()\n   ...: df4 = df.copy()\n   ...: df5 = df.copy()\n   ...: \n\nIn [3]: # Timings\n   ...: %timeit f1(df1)\n   ...: %timeit f2(df2)\n   ...: %timeit f3(df3)\n   ...: %timeit f4(df4)\n   ...: %timeit f5(df5)\n   ...: \n100 loops, best of 3: 3.96 ms per loop\n1000 loops, best of 3: 844 \u00b5s per loop\n1000 loops, best of 3: 1.62 ms per loop\n10000 loops, best of 3: 163 \u00b5s per loop\n1000 loops, best of 3: 663 \u00b5s per loop\n</code></pre>\n"}], "owner": {"reputation": 13608, "user_id": 2587904, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/31ZTY.jpg?s=128&g=1", "display_name": "Georg Heiler", "link": "https://stackoverflow.com/users/2587904/georg-heiler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2863, "favorite_count": 2, "accepted_answer_id": 41729490, "answer_count": 3, "score": 8, "last_activity_date": 1484775917, "creation_date": 1484773318, "last_edit_date": 1484775791, "question_id": 41729368, "link": "https://stackoverflow.com/questions/41729368/pandas-randomly-replace-k-percent", "title": "pandas randomly replace k percent", "body": "<p>having a simple pandas data frame with 2 columns e.g. <code>id</code> and <code>value</code> where <code>value</code> is either <code>0</code> or <code>1</code> I would like to randomly replace <code>10%</code> of all <code>value==1</code> with <code>0</code>.</p>\n\n<p>How can I achieve this behaviour with pandas?</p>\n"}, {"tags": ["python", "nlp", "gensim", "topic-modeling"], "answers": [{"comments": [{"owner": {"reputation": 1882, "user_id": 969289, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d412482e10f582b8bcf60bd40abe3a85?s=128&d=identicon&r=PG", "display_name": "ginge", "link": "https://stackoverflow.com/users/969289/ginge"}, "reply_to_user": {"reputation": 145, "user_id": 1801125, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/1c546e2f7d5038b77a0885726e5119c6?s=128&d=identicon&r=PG", "display_name": "tom", "link": "https://stackoverflow.com/users/1801125/tom"}, "edited": false, "score": 0, "creation_date": 1484916519, "post_id": 41740066, "comment_id": 70719464, "body": "If you found the answer helpful I would appreciate it if you could accept it."}], "tags": [], "owner": {"reputation": 1882, "user_id": 969289, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d412482e10f582b8bcf60bd40abe3a85?s=128&d=identicon&r=PG", "display_name": "ginge", "link": "https://stackoverflow.com/users/969289/ginge"}, "is_accepted": true, "score": 0, "last_activity_date": 1484823362, "creation_date": 1484823362, "answer_id": 41740066, "question_id": 41729287, "link": "https://stackoverflow.com/questions/41729287/how-to-filter-out-words-in-a-corpus-from-a-constrained-vocabulary-with-gensim/41740066#41740066", "title": "How to filter out words in a corpus from a constrained vocabulary with gensim?", "body": "<p>Assuming your restricted vocabulary list is in a variable named <code>restrictedVocabularyList</code> you could do:</p>\n\n<pre><code>wordDict = corpora.Dictionary(trimmedTextTokens)\n\ngsCorpus = [wordDict.doc2bow(text) for text in trimmedTextTokens if text in restrictedVocabularyList]\n</code></pre>\n"}], "owner": {"reputation": 145, "user_id": 1801125, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/1c546e2f7d5038b77a0885726e5119c6?s=128&d=identicon&r=PG", "display_name": "tom", "link": "https://stackoverflow.com/users/1801125/tom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 573, "favorite_count": 0, "accepted_answer_id": 41740066, "answer_count": 1, "score": 0, "last_activity_date": 1484823362, "creation_date": 1484773010, "question_id": 41729287, "link": "https://stackoverflow.com/questions/41729287/how-to-filter-out-words-in-a-corpus-from-a-constrained-vocabulary-with-gensim", "title": "How to filter out words in a corpus from a constrained vocabulary with gensim?", "body": "<p>I am using gensim for topic modeling. I've created a corpus using </p>\n\n<pre><code>wordDict = corpora.Dictionary(trimmedTextTokens)\n\ngsCorpus = [wordDict.doc2bow(text) for text in trimmedTextTokens]\n</code></pre>\n\n<p>where trimmedTextTokens are the result of removing stop words. Now I want to filter out the terms from the corpus that are not in a list of a restricted or constructed vocabulary. Any ideas? Thank you!!</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 4735, "user_id": 5270744, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/kPNwH.jpg?s=128&g=1", "display_name": "m_callens", "link": "https://stackoverflow.com/users/5270744/m-callens"}, "edited": false, "score": 1, "creation_date": 1484773114, "post_id": 41729280, "comment_id": 70653042, "body": "What is in the <code>draw</code> function?"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1484774125, "post_id": 41729280, "comment_id": 70653587, "body": "Use the <b>map</b> function to apply <b>draw</b> to each element of <b>c</b>."}], "owner": {"reputation": 11, "user_id": 7376745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99523983dfded3c48c762c40e5c6e258?s=128&d=identicon&r=PG&f=1", "display_name": "Monik6463383", "link": "https://stackoverflow.com/users/7376745/monik6463383"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "closed_date": 1484775985, "answer_count": 0, "score": 0, "last_activity_date": 1484775945, "creation_date": 1484772976, "last_edit_date": 1484775945, "question_id": 41729280, "link": "https://stackoverflow.com/questions/41729280/function-print-in-one-line", "closed_reason": "Duplicate", "title": "Function print in one line", "body": "<p>I need something to print the function <code>draw()</code> in one line for all <code>i</code> in the loop. I've searched here, but couldn't find anything.</p>\n\n<pre><code>def many(n):\n   b = str(n)\n   c=[]\n   x=[]\n   for digit in b:\n    c.append (int(digit))\n   for i in range(len(c)):\n      draw(c[i])\n</code></pre>\n"}, {"tags": ["python", "numpy"], "comments": [{"owner": {"reputation": 2094, "user_id": 5508728, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P3gtR.jpg?s=128&g=1", "display_name": "jeff carey", "link": "https://stackoverflow.com/users/5508728/jeff-carey"}, "edited": false, "score": 0, "creation_date": 1484773099, "post_id": 41729279, "comment_id": 70653036, "body": "math.pow(base, 1/root). Example: math.pow(64, 1/3.0)"}], "answers": [{"tags": [], "owner": {"reputation": 209114, "user_id": 1427416, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/QWHKg.png?s=128&g=1", "display_name": "BrenBarn", "link": "https://stackoverflow.com/users/1427416/brenbarn"}, "is_accepted": false, "score": 2, "last_activity_date": 1484773060, "creation_date": 1484773060, "answer_id": 41729294, "question_id": 41729279, "link": "https://stackoverflow.com/questions/41729279/python-y%e2%88%9ax-how-to-do-this/41729294#41729294", "title": "Python y\u221ax how to do this?", "body": "<p>The n-th root is the same as the (1/n)-th power.  So to find the n-th root of x, do <code>x**(1/n)</code>.  (Make sure to do <code>from __future__ import division</code> if using Python 2.)</p>\n"}, {"tags": [], "owner": {"reputation": 1853, "user_id": 3029274, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/678505a60d20e850fb26b7bc12a440a0?s=128&d=identicon&r=PG&f=1", "display_name": "Maddy", "link": "https://stackoverflow.com/users/3029274/maddy"}, "is_accepted": false, "score": 1, "last_activity_date": 1484858104, "last_edit_date": 1484858104, "creation_date": 1484773126, "answer_id": 41729312, "question_id": 41729279, "link": "https://stackoverflow.com/questions/41729279/python-y%e2%88%9ax-how-to-do-this/41729312#41729312", "title": "Python y\u221ax how to do this?", "body": "<p>Using simple math</p>\n\n<pre><code>&gt;&gt;&gt; a = 8\n&gt;&gt;&gt; a**(1./3.)\n2.0\n</code></pre>\n\n<p><code>3.</code> can be replaced with <code>nth</code> element.</p>\n"}], "owner": {"reputation": 323, "user_id": 5628691, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d17be792e4a2496c7258906fb27e2dcb?s=128&d=identicon&r=PG&f=1", "display_name": "Lefty", "link": "https://stackoverflow.com/users/5628691/lefty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1484858104, "creation_date": 1484772971, "question_id": 41729279, "link": "https://stackoverflow.com/questions/41729279/python-y%e2%88%9ax-how-to-do-this", "title": "Python y\u221ax how to do this?", "body": "<p>I'm not looking for the squared root. That is <code>numpy.sqrt()</code>. I'd like to figure out how to calculate y\u221ax, where y is the nth root of x (I'm sorry I can't show it better). For example, say y is 3 and x is 64: 3\u221a64 = 4. I'm not looking solely for the cube of x. I'm looking for nth, where n can be anything. </p>\n\n<p>Thank you!</p>\n"}, {"tags": ["python", "python-2.7"], "comments": [{"owner": {"reputation": 4373, "user_id": 1810460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5daef67cac318d3e35f84bc3f315bcfc?s=128&d=identicon&r=PG", "display_name": "Hamms", "link": "https://stackoverflow.com/users/1810460/hamms"}, "edited": false, "score": 0, "creation_date": 1484774004, "post_id": 41729272, "comment_id": 70653526, "body": "<code>[].append(message[x])</code> doesn&#39;t return anything, so assigning its result to your <code>column_dict</code> wont do anything"}, {"owner": {"reputation": 4373, "user_id": 1810460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5daef67cac318d3e35f84bc3f315bcfc?s=128&d=identicon&r=PG", "display_name": "Hamms", "link": "https://stackoverflow.com/users/1810460/hamms"}, "edited": false, "score": 0, "creation_date": 1484774022, "post_id": 41729272, "comment_id": 70653535, "body": "you probably want to do something like <code>column_dict[&#39;column_{0}&#39;.format(i)] = [message[x]]</code>"}, {"owner": {"reputation": 9070, "user_id": 6817835, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/8GBAa.jpg?s=128&g=1", "display_name": "gold_cy", "link": "https://stackoverflow.com/users/6817835/gold-cy"}, "reply_to_user": {"reputation": 4373, "user_id": 1810460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5daef67cac318d3e35f84bc3f315bcfc?s=128&d=identicon&r=PG", "display_name": "Hamms", "link": "https://stackoverflow.com/users/1810460/hamms"}, "edited": false, "score": 0, "creation_date": 1484774645, "post_id": 41729272, "comment_id": 70653841, "body": "That doesn&#39;t work because each subsequent letter overwrites the previous one for that key."}, {"owner": {"reputation": 4373, "user_id": 1810460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5daef67cac318d3e35f84bc3f315bcfc?s=128&d=identicon&r=PG", "display_name": "Hamms", "link": "https://stackoverflow.com/users/1810460/hamms"}, "edited": false, "score": 0, "creation_date": 1484775007, "post_id": 41729272, "comment_id": 70654016, "body": "then you&#39;ll want to append to the list if it exists and create a new one if it doesn&#39;t"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1484777883, "post_id": 41729272, "comment_id": 70655371, "body": "When you get to a resolution, please remember to up-vote useful things and accept your favourite answer (even if you have to write it yourself), so Stack Overflow can properly archive the question."}, {"owner": {"reputation": 9070, "user_id": 6817835, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/8GBAa.jpg?s=128&g=1", "display_name": "gold_cy", "link": "https://stackoverflow.com/users/6817835/gold-cy"}, "reply_to_user": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1484779335, "post_id": 41729272, "comment_id": 70655957, "body": "I should accept my own answer @Prune?"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1484780407, "post_id": 41729272, "comment_id": 70656318, "body": "Sure, if that&#39;s the one you like the best.  You won&#39;t get 15 points for it, but it will help others find the best response.  If that feels weird, we <i>could</i> edit your solution as an update to mine, but that&#39;s a bit awkward in maintenance.  I&#39;m happy with upvotes -- the long-term purpose is for future reference."}], "answers": [{"comments": [{"owner": {"reputation": 9070, "user_id": 6817835, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/8GBAa.jpg?s=128&g=1", "display_name": "gold_cy", "link": "https://stackoverflow.com/users/6817835/gold-cy"}, "edited": false, "score": 0, "creation_date": 1484774726, "post_id": 41729529, "comment_id": 70653877, "body": "I didn&#39;t even think of list comprehension here. But yes this helped. I changed it to this <code>columns = [message[i::row_length] for i in range(row_length)]</code> and it worked."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "reply_to_user": {"reputation": 9070, "user_id": 6817835, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/8GBAa.jpg?s=128&g=1", "display_name": "gold_cy", "link": "https://stackoverflow.com/users/6817835/gold-cy"}, "edited": false, "score": 0, "creation_date": 1484777863, "post_id": 41729529, "comment_id": 70655363, "body": "Glad to hear it.  I was trying not to give away code -- you learn so much more if you develop it yourself.  When you have to invent new keys, you probably shouldn&#39;t use a dictionary.  When you naturally for the data into an array, use a list."}], "tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 1, "last_activity_date": 1484774037, "creation_date": 1484774037, "answer_id": 41729529, "question_id": 41729272, "link": "https://stackoverflow.com/questions/41729272/function-for-column-cypher/41729529#41729529", "title": "Function for Column Cypher", "body": "<p><strong>append</strong> adds the argument to the given list, but the modification is <em>in place</em>.  The return value is <strong>None</strong>, which goes into your dictionary.  Change the statement to have a better expression on the right side, such as <strong>[message[x]]</strong> ... modified to accumulate the letters.</p>\n\n<p>Even better, note that your dictionary is more of a list (i.e. array).  You'll likely do better by turning your basic structure into a list of strings:</p>\n\n<pre><code>[\"THISI\", \"SATES\", \"TCYPH\", \"ERXXX\"]\n</code></pre>\n\n<p>Your indexing here will be much neater than constructing \"column_{0}\".\nThen use simple list comprehensions to build your column-major string.</p>\n\n<p>Is that enough of a hint to get you moving?</p>\n"}, {"tags": [], "owner": {"reputation": 9070, "user_id": 6817835, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/8GBAa.jpg?s=128&g=1", "display_name": "gold_cy", "link": "https://stackoverflow.com/users/6817835/gold-cy"}, "is_accepted": true, "score": 1, "last_activity_date": 1484774893, "creation_date": 1484774893, "answer_id": 41729768, "question_id": 41729272, "link": "https://stackoverflow.com/questions/41729272/function-for-column-cypher/41729768#41729768", "title": "Function for Column Cypher", "body": "<p>So I ended up changing the structuring of my function thanks to @Prune. Here is the way it ended up working for anyone who is interested in the future and stumbles upon this question.</p>\n\n<pre><code>def prep_msg(message, row_length):\n    message = message.upper().replace(' ', '')\n    num_xs = len(message) % row_length\n    message += 'X' * (row_length - num_xs)\n    return message\n\ndef encode_column(message, rows):\n    prep_msg(message, row_length)\n    col_list = [message[i::row_length] for i in range(row_length)]\n    encoded_message = ''.join(col_list)\n</code></pre>\n"}], "owner": {"reputation": 9070, "user_id": 6817835, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/8GBAa.jpg?s=128&g=1", "display_name": "gold_cy", "link": "https://stackoverflow.com/users/6817835/gold-cy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 41729768, "answer_count": 2, "score": 0, "last_activity_date": 1484774893, "creation_date": 1484772945, "question_id": 41729272, "link": "https://stackoverflow.com/questions/41729272/function-for-column-cypher", "title": "Function for Column Cypher", "body": "<p>I am working on an exercise which asks to write a function that creates a column cypher for a given message. I wanted to extend this a little further and have this column cypher apply to messages of all lengths. For those who don't know a column cypher would work like this. </p>\n\n<p>Say my message is \"THIS IS A TEST CYPHER\". We specify that each row has a length of 5. Now, every string might not have the length needed to be exactly divisible by our specific row length so we pad the message with \"X\". The message would then look as such:</p>\n\n<pre><code>THISI\nSATES\nTCYPH\nERXXX\n</code></pre>\n\n<p>The message that would be sent would look like this then \"TSTEHACRITYXSEPXISHX\"</p>\n\n<p>Here is what I have so far, first a function that preps the message for use:</p>\n\n<pre><code>def prep_msg(message, row_length):\n    message = message.upper().replace(' ', '')\n    num_xs = len(message) % row_length\n    message += 'X' * (row_length - num_xs)\n    return message\n</code></pre>\n\n<p>Next I wanted to create a dictionary where each column is the key, and the values are the letters associated with that column. After this step I could go about processing my message. However, I am stuck on this step as it seems the output I am getting is completely empty. My second function looks like this:</p>\n\n<pre><code>def column_dict(message, row_length):\n    message = prep_msg(message, 3)\n    num_cols = range(row_length)\n    column_dict = {}\n    for x in range(len(message)):\n        for i in num_cols:\n            if x % row_length == i:\n                column_dict['column_{0}'.format(i)] = [].append(message[x])\n    return column_dict\n</code></pre>\n\n<p>The message I am using is this <code>message = \"This message is very secret\"</code></p>\n\n<p>Here is the outputs from my function:</p>\n\n<pre><code>prep_msg(message, 3)\n&gt;&gt; 'THISMESSAGEISVERYSECRETX'\n\ncolumn_cypher(message, 3)\n&gt;&gt; {'column_0': None, 'column_1': None, 'column_2': None}\n</code></pre>\n\n<p>Can someone point me in the right direction as to why my 2nd function is not working? Thanks!</p>\n"}, {"tags": ["python", "python-3.x", "if-statement"], "comments": [{"owner": {"reputation": 11, "user_id": 7422292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cc03b388e12094961db1608a0db5858?s=128&d=identicon&r=PG&f=1", "display_name": "Kejsi summer", "link": "https://stackoverflow.com/users/7422292/kejsi-summer"}, "reply_to_user": {"reputation": 304245, "user_id": 216074, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/609c93bafd659500f83fde04802a9be5?s=128&d=identicon&r=PG", "display_name": "poke", "link": "https://stackoverflow.com/users/216074/poke"}, "edited": false, "score": 0, "creation_date": 1484773230, "post_id": 41729236, "comment_id": 70653115, "body": "I&#39;ll check that question now, thank you, hopefully it works"}, {"owner": {"reputation": 11, "user_id": 7422292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cc03b388e12094961db1608a0db5858?s=128&d=identicon&r=PG&f=1", "display_name": "Kejsi summer", "link": "https://stackoverflow.com/users/7422292/kejsi-summer"}, "reply_to_user": {"reputation": 304245, "user_id": 216074, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/609c93bafd659500f83fde04802a9be5?s=128&d=identicon&r=PG", "display_name": "poke", "link": "https://stackoverflow.com/users/216074/poke"}, "edited": false, "score": 0, "creation_date": 1484773462, "post_id": 41729236, "comment_id": 70653253, "body": "Thank you so much I found exactly how to do it and managed to adapt it for my code. Thank you I shall delete my question after."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 7422292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cc03b388e12094961db1608a0db5858?s=128&d=identicon&r=PG&f=1", "display_name": "Kejsi summer", "link": "https://stackoverflow.com/users/7422292/kejsi-summer"}, "edited": false, "score": 0, "creation_date": 1484773852, "post_id": 41729461, "comment_id": 70653450, "body": "Thank you I will also learn how to use this, Thank you so much."}], "tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 0, "last_activity_date": 1484773680, "creation_date": 1484773680, "answer_id": 41729461, "question_id": 41729236, "link": "https://stackoverflow.com/questions/41729236/how-do-you-repeat-a-loop-until-the-user-enters-a-specific-character-as-a-part-of/41729461#41729461", "title": "How do you repeat a loop until the user enters a specific character as a part of their input?", "body": "<p>The canonical low-tech way is to set a flag that changes only when you get valid input.</p>\n\n<pre><code>bad_input = True\nwhile bad_input:\n    email_address = input(\"Please enter your email address:\")\n    if email_address:  # if the input is valid\n        bad_input = False\n    else:\n        print \"Bad input\"    # Make a better message, please\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 7422292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cc03b388e12094961db1608a0db5858?s=128&d=identicon&r=PG&f=1", "display_name": "Kejsi summer", "link": "https://stackoverflow.com/users/7422292/kejsi-summer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 1, "closed_date": 1484783766, "answer_count": 1, "score": -1, "last_activity_date": 1484773680, "creation_date": 1484772790, "last_edit_date": 1484773201, "question_id": 41729236, "link": "https://stackoverflow.com/questions/41729236/how-do-you-repeat-a-loop-until-the-user-enters-a-specific-character-as-a-part-of", "closed_reason": "Duplicate", "title": "How do you repeat a loop until the user enters a specific character as a part of their input?", "body": "<p>If you ask a user to input a value, which will be a string, how do I validate it in such a way that only accepts their input once they have entered a specific character within their input.</p>\n\n<p>Sorry if this is a duplicate question but I have looked through so many questions and answers but they were only for one specific character to be entered, meanwhile I am trying to make the user enter the @ sign into their email in order to validate it.</p>\n\n<p>for example:</p>\n\n<pre><code>email_address = input(\"Please enter your email address:\")\nif email_address\n\nelse:\n    break\n</code></pre>\n\n<p>I understand how to end the loop once they have entered the right character in their email, but I don't understand how I can get them to include the @ symbol in their response. Hopefully what I am saying makes sense, thank you for any help in advance. </p>\n"}, {"tags": ["python", "tkinter"], "comments": [{"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1484773126, "post_id": 41729224, "comment_id": 70653052, "body": "What are you trying to accomplish with creating a second root window and calling <code>mainloop</code> a second time? You cannot write tkinter programs this way. If you need another window then you need to create an instance of <code>Toplevel</code>, not <code>Tk</code>, and you must only call <code>mainloop</code> once."}, {"owner": {"reputation": 49, "user_id": 7197696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cf7d953975cf9de18d43e260246fcca1?s=128&d=identicon&r=PG&f=1", "display_name": "ernest", "link": "https://stackoverflow.com/users/7197696/ernest"}, "reply_to_user": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1484773410, "post_id": 41729224, "comment_id": 70653218, "body": "I don&#39;t necessarily need the window. Is there a way to hide it on Tk without the window?"}, {"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 1, "creation_date": 1484774057, "post_id": 41729224, "comment_id": 70653549, "body": "If you don&#39;t need it, why are you creating it?"}], "answers": [{"tags": [], "owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "is_accepted": true, "score": 1, "last_activity_date": 1484774141, "last_edit_date": 1484774141, "creation_date": 1484772964, "answer_id": 41729276, "question_id": 41729224, "link": "https://stackoverflow.com/questions/41729224/how-to-hide-scroll-bar-on-certain-pages-except-for-page-1/41729276#41729276", "title": "How to hide scroll bar on certain pages except for page 1?", "body": "<p>The code you copied was designed for each page to be a standalone object. All widgets within a page are managed by the page. </p>\n\n<p>If you want a page to have scrollbars and a text widget, those widgets need to have the page as the parent:</p>\n\n<pre><code>scrollbar = tk.Scrollbar(self)\nscrollbar.pack(side=\"right\", fill=\"y\")\ntext = tk.Text(self, yscrollcommand=scrollbar.set)\n</code></pre>\n\n<p>You also need to remove the following statements, since in the comments you implied you don't actually want or need another window (plus there's the fact that creating a second instance of <code>Tk</code> and calling <code>mainloop</code> a second time is not something you should do in general)</p>\n\n<pre><code>master = tk.Tk()\nmaster.geometry(\"200x200\")\nmaster.mainloop()\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 7197696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cf7d953975cf9de18d43e260246fcca1?s=128&d=identicon&r=PG&f=1", "display_name": "ernest", "link": "https://stackoverflow.com/users/7197696/ernest"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 533, "favorite_count": 0, "accepted_answer_id": 41729276, "answer_count": 1, "score": 0, "last_activity_date": 1484776215, "creation_date": 1484772736, "last_edit_date": 1484776215, "question_id": 41729224, "link": "https://stackoverflow.com/questions/41729224/how-to-hide-scroll-bar-on-certain-pages-except-for-page-1", "title": "How to hide scroll bar on certain pages except for page 1?", "body": "<p>So I have code for a scroll bar here:</p>\n\n<pre><code>master = tk.Tk()\nmaster.geometry(\"200x200\")\n\nscrollbar = tk.Scrollbar(master)\nscrollbar.pack(side=\"right\", fill=\"y\")\ntext = tk.Text(master, yscrollcommand=scrollbar.set)\ntext.insert(\"1.0\", \"Hello\")\n\ntext.pack()\n\ntext.configure(state=\"disabled\", highlightthickness=0)\nscrollbar.config(command=text.yview)\nmaster.mainloop()\n</code></pre>\n\n<p>And the scrollbar works, however it pops up on every single page in my program. I have a program with several pages and classes, and I would like the scrollbar to pop up when clicking a button that leads to that specific page with the scrollbar. The scrollbar keeps poping up on all pages, including the homepage, and I can't find a way to hide it.</p>\n\n<p>This is the page I would like to put the <code>scrollbar</code> on:</p>\n\n<pre><code>class CookiesBiscuits(tk.Frame):\n\n    def __init__(self, parent, controller):\n        tk.Frame.__init__(self, parent)\n        label = tk.Label(self, text=\"Ingredients\", font=LARGE_FONT)\n        label.pack(pady=10,padx=10)\n\n        backButton = tk.Button(self, text=\"Back\",\n                            command=lambda: controller.show_frame(PageTwo))\n        backButton.pack()\n\n        #scrollbar\n\n        master = tk.Tk()\n        master.geometry(\"200x200\")\n\n        scrollbar = tk.Scrollbar(master)\n        scrollbar.pack(side=\"right\", fill=\"y\")\n        text = tk.Text(master, yscrollcommand=scrollbar.set)\n        text.insert(\"1.0\", \"Hello\")\n        text.pack()\n\n        text.configure(state=\"disabled\", highlightthickness=0)\n        scrollbar.config(command=text.yview)\n        master.mainloop()\n</code></pre>\n\n<p>If anyone has a way that will let me hide the scrollbar, I would really appreciate it.</p>\n"}, {"tags": ["python", "django", "django-templates", "django-tagging"], "comments": [{"owner": {"reputation": 1617, "user_id": 246028, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/649cbd99654e27d22c5939d2caea7165?s=128&d=identicon&r=PG", "display_name": "Jann", "link": "https://stackoverflow.com/users/246028/jann"}, "edited": false, "score": 0, "creation_date": 1484773070, "post_id": 41729213, "comment_id": 70653021, "body": "Are you ever closing your content block with <code>{% endblock content %}</code>?"}, {"owner": {"reputation": 313, "user_id": 2008684, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/4b6148a2d750318c8bb5ac5576274982?s=128&d=identicon&r=PG", "display_name": "jayuu", "link": "https://stackoverflow.com/users/2008684/jayuu"}, "reply_to_user": {"reputation": 1617, "user_id": 246028, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/649cbd99654e27d22c5939d2caea7165?s=128&d=identicon&r=PG", "display_name": "Jann", "link": "https://stackoverflow.com/users/246028/jann"}, "edited": false, "score": 0, "creation_date": 1484773237, "post_id": 41729213, "comment_id": 70653119, "body": "Yes, the template was quite long so I didn&#39;t include everything. I&#39;ve edited though to make clearer."}], "owner": {"reputation": 313, "user_id": 2008684, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/4b6148a2d750318c8bb5ac5576274982?s=128&d=identicon&r=PG", "display_name": "jayuu", "link": "https://stackoverflow.com/users/2008684/jayuu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 92, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1484773495, "creation_date": 1484772705, "last_edit_date": 1484773495, "question_id": 41729213, "link": "https://stackoverflow.com/questions/41729213/error-loading-templatetags-from-a-django-application", "title": "Error loading templatetags from a Django application", "body": "<p>I'm trying to load the templatetags included with the <a href=\"https://pypi.python.org/pypi/django-tagging/\" rel=\"nofollow noreferrer\">django-tagging</a> application (django-tagging templatetags <a href=\"http://django-tagging.readthedocs.io/en/develop/#template-tags\" rel=\"nofollow noreferrer\">docs</a> don't specify what the load statement should be) but I'm getting a TemplateSyntax error reminding me to load or register the tag - which I'm pretty sure I've done.</p>\n\n<p>Here's the relevant section of my template</p>\n\n<pre><code>1   {% extends \"base_tags.html\" %}\n2   \n3   {% load staticfiles %}\n4   {% load coltrane_tags %}\n5   {% load tagging_tags %)\n6   \n7   &lt;div class=\"row\"&gt;\n8   \n9     {% block content %}\n10    &lt;div class=\"col-md-9\"&gt;\n11      {% tags_for_model coltrane.Entry as entry_tags %}\n12      {% for obj in entry_tags %}\n13        {{ obj }}\n14      {% endfor %}\n..    &lt;/div&gt;\n..    {% endblock %}\n..  &lt;/div&gt;            \n</code></pre>\n\n<p>The error message is:</p>\n\n<blockquote>\n  <p>Invalid block tag on line 11: 'tags_for_model', expected 'endblock'.\n  Did you forget to register or load this tag?</p>\n</blockquote>\n\n<p>Looking at the django-tagging module I can see the templatetags code:</p>\n\n<pre><code>&lt;PythonVirtualEnv&gt;/site-packages/tagging/templatetags/tagging_tags.py\n</code></pre>\n\n<p>The tag I'd like to use is registered in this file:</p>\n\n<pre><code>register.tag('tags_for_model', do_tags_for_model)\n</code></pre>\n\n<p>So from my perspective it's both registered and loaded - is there anything obvious that I'm missing? </p>\n"}, {"tags": ["python", "regex", "parsing", "dictionary", "split"], "comments": [{"owner": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "edited": false, "score": 0, "creation_date": 1484772803, "post_id": 41729120, "comment_id": 70652883, "body": "Before trying a regex solution, could you just split on <code>):</code>?"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "edited": false, "score": 1, "creation_date": 1484772844, "post_id": 41729120, "comment_id": 70652911, "body": "@PatrickHaugh you&#39;re killing the regex fun :)"}, {"owner": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "edited": false, "score": 1, "creation_date": 1484773156, "post_id": 41729120, "comment_id": 70653072, "body": "Maybe something like <code>([\\w\\s]*?)(\\(\\d\\d:\\d\\d:\\d\\d\\)):(.*)(?:\\n\\n|$)</code> <a href=\"https://regex101.com/r/UZAnmW/2\" rel=\"nofollow noreferrer\">DEMO HERE</a>"}, {"owner": {"reputation": 2179, "user_id": 2653384, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1dd72e30eaef778f5d7ca2e573b8f9ca?s=128&d=identicon&r=PG", "display_name": "Busturdust", "link": "https://stackoverflow.com/users/2653384/busturdust"}, "edited": false, "score": 0, "creation_date": 1484773165, "post_id": 41729120, "comment_id": 70653075, "body": "I could, yes, but without being 100% sure that that ): does not exist in all txt files that may or may not include that in the content"}, {"owner": {"reputation": 2179, "user_id": 2653384, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1dd72e30eaef778f5d7ca2e573b8f9ca?s=128&d=identicon&r=PG", "display_name": "Busturdust", "link": "https://stackoverflow.com/users/2653384/busturdust"}, "reply_to_user": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "edited": false, "score": 0, "creation_date": 1484773388, "post_id": 41729120, "comment_id": 70653201, "body": "@PatrickHaugh I see what you are saying, I just need to expand the regex further to surround the tiemstamp as well. Thank you"}, {"owner": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "edited": false, "score": 1, "creation_date": 1484773468, "post_id": 41729120, "comment_id": 70653259, "body": "@Busturdust if you&#39;re not familiar with them already, I suggest looking up &quot;capturing groups&quot;, which is a way of extracting text from text that matches the regex."}, {"owner": {"reputation": 2179, "user_id": 2653384, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1dd72e30eaef778f5d7ca2e573b8f9ca?s=128&d=identicon&r=PG", "display_name": "Busturdust", "link": "https://stackoverflow.com/users/2653384/busturdust"}, "edited": false, "score": 0, "creation_date": 1484773501, "post_id": 41729120, "comment_id": 70653279, "body": "Thank you, I will do so. It seems I was stuck in my old &quot;string split&quot; mechanisms -_-"}], "answers": [{"comments": [{"owner": {"reputation": 2179, "user_id": 2653384, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1dd72e30eaef778f5d7ca2e573b8f9ca?s=128&d=identicon&r=PG", "display_name": "Busturdust", "link": "https://stackoverflow.com/users/2653384/busturdust"}, "edited": false, "score": 0, "creation_date": 1484773439, "post_id": 41729328, "comment_id": 70653236, "body": "Thank you for your answer, as I am new to regex, I am going to review the expression and test it out. However on a first run, it looks like it worked pretty cleanly. Thank you for your quick effort"}, {"owner": {"reputation": 2179, "user_id": 2653384, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1dd72e30eaef778f5d7ca2e573b8f9ca?s=128&d=identicon&r=PG", "display_name": "Busturdust", "link": "https://stackoverflow.com/users/2653384/busturdust"}, "edited": false, "score": 0, "creation_date": 1484773476, "post_id": 41729328, "comment_id": 70653264, "body": "and then he updates it with the explanations, wonderful thank you!"}, {"owner": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "edited": false, "score": 1, "creation_date": 1484773555, "post_id": 41729328, "comment_id": 70653313, "body": "Is there some tool you&#39;re using to generate the explanation?"}], "tags": [], "owner": {"reputation": 7081, "user_id": 789671, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/feaaeb3d021966d84450cbfb24b1824a?s=128&d=identicon&r=PG", "display_name": "glibdud", "link": "https://stackoverflow.com/users/789671/glibdud"}, "is_accepted": true, "score": 2, "last_activity_date": 1484773706, "last_edit_date": 1484773706, "creation_date": 1484773176, "answer_id": 41729328, "question_id": 41729120, "link": "https://stackoverflow.com/questions/41729120/using-regex-to-split-text-content-into-dictionary/41729328#41729328", "title": "Using regex to split text content into dictionary", "body": "<p>Don't bother with <code>split</code>. You're trying to get 2-3 pieces of information out of each line, so try the following:</p>\n\n<pre><code>for line in msg.get_payload().split('\\n'):\n    match = re.search(r'^\\s*([^(]*?)\\s*\\((\\d{2}:\\d{2}:\\d{2})\\):\\s*(.*)$', line)\n    if match:\n        (speaker, time, message) = match.groups()\n</code></pre>\n\n<p>Speaker will be an empty string if none was present on that line.</p>\n\n<p>Regex explanation:</p>\n\n<pre><code>^                    # Start of line\n\\s*                  # Drop leading whitespace\n([^(]*?)             # Capture the speaker if present (non-paren characters)\n\\s*                  # Drop whitespace between name and time\n\\(                   # Drop literal open paren\n(\\d{2}:\\d{2}:\\d{2})  # Capture time\n\\):\\s*               # Drop literal close paren, colon and whitespace\n(.*)                 # Capture the rest of the line\n$                    # End of line\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2179, "user_id": 2653384, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1dd72e30eaef778f5d7ca2e573b8f9ca?s=128&d=identicon&r=PG", "display_name": "Busturdust", "link": "https://stackoverflow.com/users/2653384/busturdust"}, "edited": false, "score": 0, "creation_date": 1484773770, "post_id": 41729431, "comment_id": 70653412, "body": "This is pretty neat, allow me some time to review"}], "tags": [], "owner": {"reputation": 1137, "user_id": 3395374, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/285a4a5200f609969d811d471ae2c846?s=128&d=identicon&r=PG&f=1", "display_name": "Muposat", "link": "https://stackoverflow.com/users/3395374/muposat"}, "is_accepted": false, "score": 2, "last_activity_date": 1484773534, "creation_date": 1484773534, "answer_id": 41729431, "question_id": 41729120, "link": "https://stackoverflow.com/questions/41729120/using-regex-to-split-text-content-into-dictionary/41729431#41729431", "title": "Using regex to split text content into dictionary", "body": "<p>Splitting message in lines when you need to split it in time-stamped paragraphs is a waste. <code>re.split</code> can easily save the tokens that it split on, if you only look at <a href=\"https://docs.python.org/3/library/re.html\" rel=\"nofollow noreferrer\">the documentation</a>. Here's my solution:</p>\n\n<pre><code>toks = re.split(r\"\\((\\d\\d:\\d\\d:\\d\\d)\\):\", msg.get_payload())[1:]\nanswer = dict(zip(toks[::2], toks[1::2]))\n</code></pre>\n\n<p>This creates a dictionary of timestamps and paragraphs. Feel free to use the same approach to split by speaker as well.</p>\n\n<p>Result:\n    {\n        '00:00:01': ' Breaking News Tonight: A .....',\n        '00:00:25': ' Also breaking tonight ......', ....\n    }</p>\n"}], "owner": {"reputation": 2179, "user_id": 2653384, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1dd72e30eaef778f5d7ca2e573b8f9ca?s=128&d=identicon&r=PG", "display_name": "Busturdust", "link": "https://stackoverflow.com/users/2653384/busturdust"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1411, "favorite_count": 0, "accepted_answer_id": 41729328, "answer_count": 2, "score": 0, "last_activity_date": 1484773706, "creation_date": 1484772331, "question_id": 41729120, "link": "https://stackoverflow.com/questions/41729120/using-regex-to-split-text-content-into-dictionary", "title": "Using regex to split text content into dictionary", "body": "<p>I have a text file that follows this format. </p>\n\n<blockquote>\n  <p>LESTER HOLT (00:00:01): Breaking News Tonight: A deadly mass shooting\n  at the airport. A gunman opens fire at baggage claim in Fort\n  Lauderdale, witnesses describing scenes of sheer horror. A silent\n  killer shooting people in the head as they tried to run and hide.\n  Tonight, a storm of questions. Why did he do it? The suspect, a\n  passenger with a firearm in his checked bag. New concerns about\n  airport security before the checkpoint.</p>\n  \n  <p>(00:00:25): Also breaking tonight the new report from U.S.\n  intelligence: Vladimir Putin himself ordered the effort to influence\n  the election, aimed at hurting Clinton and helping Trump win. What the\n  President-elect is saying after his top-secret briefing.</p>\n  \n  <p>(00:00:39): And States of Emergency: Millions from coast to coast\n  paralyzed by a massive winter storm.</p>\n  \n  <p>(00:00:45): NIGHTLY NEWS begins right now.</p>\n</blockquote>\n\n<p>I am trying to parse this information into a Python Dictionary, where the speaker is a dictionary, of dictionaries, which has timecode keys, and the content is the value, I can't consistently split because of potential information before the timecode, (IE the first quote), as well as the fact that the split character <code>:</code> is also a character involved with the timecode itself <code>00:00:00</code>.</p>\n\n<p>Trying to split according to the regex.</p>\n\n<pre><code>for line in msg.get_payload().split('\\n'):\n    regex = r'\\d{2}:\\d{2}:\\d{2}'\n    test = re.split(regex, line)\n    print(test)\n    sleep(1)\n</code></pre>\n\n<p>Appears to work in splitting it properly, but it causes me to lose the value I am splitting on (timecode), which I intend to use as a key. How can I properly split the above content, get the speaker, and then get the timecode as a key, and the content as a value.It is possible he may be present later in the text as well, and it should append to the list of timecodes./ </p>\n\n<p>The output format I am targeting is something along the lines of</p>\n\n<pre><code>{speakers:{'Lester Holt': {'00:00:01':content..., '00:00:0025': content...},\n'speaker2':{etc,etc,etc} }}\n</code></pre>\n\n<p>Ive tried using the split as mentioned above, but it removes my timecode variable. </p>\n\n<p>Any thoughts and guidance is appreciated. </p>\n"}, {"tags": ["python", "django", "python-3.x"], "comments": [{"owner": {"reputation": 1389, "user_id": 1327002, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/veOTP.jpg?s=128&g=1", "display_name": "Wilfried", "link": "https://stackoverflow.com/users/1327002/wilfried"}, "edited": false, "score": 0, "creation_date": 1484778299, "post_id": 41729104, "comment_id": 70655546, "body": "Why are you trying first(), or [0]. The error OwnerCustom matching query does not exist means, there is no record in your OwnerCustom database table where carcustom=ncset and owner=sset. Are you sure about data present in your DB ?"}, {"owner": {"reputation": 1389, "user_id": 1327002, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/veOTP.jpg?s=128&g=1", "display_name": "Wilfried", "link": "https://stackoverflow.com/users/1327002/wilfried"}, "edited": false, "score": 0, "creation_date": 1484778769, "post_id": 41729104, "comment_id": 70655725, "body": "And are you sure about the result return by each of your request ?  You can make all your request in one : OwnerCustom.objects.get(carcustom__car__car_name==&quot;fancy car&quot;), owner__car__car_name==&quot;fancy car&quot;)"}, {"owner": {"reputation": 47, "user_id": 6935294, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1TJ8i.jpg?s=128&g=1", "display_name": "GenerationTech", "link": "https://stackoverflow.com/users/6935294/generationtech"}, "reply_to_user": {"reputation": 1389, "user_id": 1327002, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/veOTP.jpg?s=128&g=1", "display_name": "Wilfried", "link": "https://stackoverflow.com/users/1327002/wilfried"}, "edited": false, "score": 0, "creation_date": 1484794782, "post_id": 41729104, "comment_id": 70660214, "body": "Yes, there is data in these tables that should qualify. I&#39;ll include code that does work to the end of my original question, but I don&#39;t think that code is the best way to handle the task."}, {"owner": {"reputation": 1389, "user_id": 1327002, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/veOTP.jpg?s=128&g=1", "display_name": "Wilfried", "link": "https://stackoverflow.com/users/1327002/wilfried"}, "edited": false, "score": 0, "creation_date": 1484816403, "post_id": 41729104, "comment_id": 70668475, "body": "Do you try my custom request ? <a href=\"https://docs.djangoproject.com/en/1.10/topics/db/queries/#related-objects\" rel=\"nofollow noreferrer\">doc about related field in filter</a>"}], "owner": {"reputation": 47, "user_id": 6935294, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1TJ8i.jpg?s=128&g=1", "display_name": "GenerationTech", "link": "https://stackoverflow.com/users/6935294/generationtech"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1484795303, "creation_date": 1484772283, "last_edit_date": 1484795303, "question_id": 41729104, "link": "https://stackoverflow.com/questions/41729104/django-cannot-retrieve-just-one-record-in-multi-part-filter-on-model-with-mult", "title": "Django - cannot retrieve just one record in multi-part filter on model with multiple relations", "body": "<p>I can't seem to isolate a single record from this query:</p>\n\n<pre><code>subcust = OwnerCustom.objects.get(carcustom=ncset, owner=sset)\n</code></pre>\n\n<p>This is the error:</p>\n\n<pre><code>OwnerCustom matching query does not exist\n</code></pre>\n\n<p>In the actual data, there is only actually one matching record in OwnerCustom for each record in CarCustom. It's supposed to be a kind of many-to-many where there are standard differences listed in CarCustom for each Car, and each owner may maintain their own customizations (overrides) or those default OwnerCustom entries.</p>\n\n<p>Note, there are many different Owner of the same Car. And of course, I'm not actually doing cars, this is a renaming from the original purpose.</p>\n\n<p>Here's the relevant models:</p>\n\n<pre><code>class Car(models.Model):\n    car_name    = models.CharField(max_length=50)\n\nclass CarCustom(models.Model):    \n    car         = models.ForeignKey(Car, models.PROTECT)\n\nclass Owner(models.Model):\n    car         = models.ForeignKey(Car, models.PROTECT)\n\nclass OwnerCustom(models.Model):\n    owner       = models.ForeignKey(Owner, models.PROTECT)\n    carcustom   = models.ForeignKey(CarCustom, models.PROTECT)\n    name        = models.CharField(max_length=50)\n</code></pre>\n\n<p>And the code:</p>\n\n<pre><code>car_queryset = Car.objects.filter(car_name=\"fancy car\")\nfor nset in car_queryset:\n\n    owner_queryset = Owner.objects.filter(car=nset)\n    for sset in owner_queryset :\n\n        carcustom_queryset = CarCustom.objects.filter(car=nset)\n        for ncset in carcustom_queryset:\n            subcust = OwnerCustom.objects.get(carcustom=ncset, owner=sset)\n</code></pre>\n\n<p>I've tried stuff like:</p>\n\n<pre><code>subcust = OwnerCustom.objects.filter(carcustom=ncset, owner=sset).first()\n</code></pre>\n\n<p>Which gives me a NoneType, and then tried:</p>\n\n<pre><code>subcust = OwnerCustom.objects.filter(carcustom=ncset, owner=sset)[:1].get()\n</code></pre>\n\n<p>Which gives \"matching query does not exist\" and this:</p>\n\n<pre><code>subcust = OwnerCustom.objects.filter(carcustom=ncset, owner=sset)[0]\n</code></pre>\n\n<p>Gives \"list index out of range\"</p>\n\n<p>UPDATE: I CAN get a working function by using code like this, but I would think since there is only one (guaranteed by application) matching record possible for OwnerCustom.objects.filter(carcustom=ncset, owner=sset) that I could find a better way to fetch it:</p>\n\n<pre><code>car_queryset = Car.objects.filter(car_name=\"fancy car\")\nfor nset in car_queryset:\n\n    owner_queryset = Owner.objects.filter(car=nset)\n    for sset in owner_queryset :\n\n        carcustom_queryset = CarCustom.objects.filter(car=nset)\n        for ncset in carcustom_queryset:\n            subcust_queryset = OwnerCustom.objects.filter(carcustom=ncset, owner=sset)\n            for subcust in subcust_queryset :\n                logger.info(subcust.name)\n</code></pre>\n"}, {"tags": ["python", "function", "variables"], "comments": [{"owner": {"reputation": 1, "user_id": 7437448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bb159bb8c1d65d2d6cf7e674c94c624?s=128&d=identicon&r=PG&f=1", "display_name": "Brawlful", "link": "https://stackoverflow.com/users/7437448/brawlful"}, "edited": false, "score": 0, "creation_date": 1484772308, "post_id": 41729087, "comment_id": 70652562, "body": "Realised I put &#39;strength&#39; twice, meant to put vitality for one of them."}, {"owner": {"reputation": 802, "user_id": 6839881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a27bebff537eeceb6ab0e310caa91b65?s=128&d=identicon&r=PG&f=1", "display_name": "Navidad20", "link": "https://stackoverflow.com/users/6839881/navidad20"}, "edited": false, "score": 1, "creation_date": 1484772318, "post_id": 41729087, "comment_id": 70652565, "body": "I would make classes if i were you, make a character into a class"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1484772527, "post_id": 41729087, "comment_id": 70652709, "body": "The problem is that global variables in Python aren&#39;t actually &#39;global&#39;, they are &quot;global to the module&quot;. So, in <code>game.py</code> I&#39;m assuming you&#39;ve imported as such:  <code>import character</code> To access the &quot;global&quot; <code>damage</code> from <code>character</code>, use <code>character.damage</code>. Honestly, this <i>screams</i> poor design. As someone has suggested, you should likely use classes, or at least <code>dicts</code> or something to contain the data you need to access. Using global variables like this is not how you would go about this, and this is why RPGs as a beginning programing project are usually a bad idea. Start smaller."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1484772677, "post_id": 41729087, "comment_id": 70652804, "body": "So, in short, this is a textbook example of global variables leading to hard to reason about and maintain code."}], "answers": [{"comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1484772638, "post_id": 41729154, "comment_id": 70652778, "body": "I would <i>not</i> use this. This obliterates namespaces. Just <code>import character</code> and use <code>character.health</code> etc"}, {"owner": {"reputation": 1188, "user_id": 7244759, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/336538946712354/picture?type=large", "display_name": "spicypumpkin", "link": "https://stackoverflow.com/users/7244759/spicypumpkin"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1484773190, "post_id": 41729154, "comment_id": 70653092, "body": "@juanpa.arrivillaga you&#39;re right, I probably shouldn&#39;t import stats like health and strength like that."}], "tags": [], "owner": {"reputation": 1188, "user_id": 7244759, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/336538946712354/picture?type=large", "display_name": "spicypumpkin", "link": "https://stackoverflow.com/users/7244759/spicypumpkin"}, "is_accepted": false, "score": 2, "last_activity_date": 1484773263, "last_edit_date": 1484773263, "creation_date": 1484772477, "answer_id": 41729154, "question_id": 41729087, "link": "https://stackoverflow.com/questions/41729087/how-to-call-variable-from-one-function-in-another-file-inside-a-function-in-anot/41729154#41729154", "title": "How to call variable from one function in another file inside a function in another file?", "body": "<p>I guess you could try importing character.py to game.py.</p>\n\n<p>game.py: (edited)</p>\n\n<pre><code>import character\ncharacter_health = character.health\ncharacter_strength = character.strength\n\ndef fight():\n...\n</code></pre>\n\n<p>But yeah, use classes.</p>\n\n<p>Edit: example class</p>\n\n<p>game.py:</p>\n\n<pre><code>class Character(object):\n    def __init__(self, health, strength):\n        self.health = health\n        self.strength = strength\n        self.alive = True\n\n    def check_dead(self):\n        self.alive = not(self.health)\n\n    def fight(self, enemy):\n        self.health -= enemy.strength\n        enemy.health -= self.strength\n\n        self.check_dead()\n        enemy.check_dead()\n\n\nif __name__ == \"__main__\":\n    player = Character(300, 10) # health = 300, strength = 10\n    enemy = Character(50, 5) # health = 50, strength = 5\n\n    player.fight(enemy)\n    print(\"Player's health: {}\\nIs he alive? {}\\nEnemy's health: {}\\nIs he alive? {}\".format(player.health, player.alive, enemy.health, enemy.alive))\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7437448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bb159bb8c1d65d2d6cf7e674c94c624?s=128&d=identicon&r=PG&f=1", "display_name": "Brawlful", "link": "https://stackoverflow.com/users/7437448/brawlful"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 250, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1484773263, "creation_date": 1484772210, "question_id": 41729087, "link": "https://stackoverflow.com/questions/41729087/how-to-call-variable-from-one-function-in-another-file-inside-a-function-in-anot", "title": "How to call variable from one function in another file inside a function in another file?", "body": "<p>I can't really copy over all of the code in both of these files since it is over 1000 lines, but essentially I am making a program that has the variables 'strength', 'endurance', 'strength', 'dexterity', 'intelligence', 'wisdom', and 'luck' (it's an rpg game) and I am trying to get the variable 'damage', which is an equation of 'strength' * 'dexterity' / 100, into another file. All of these variables are within the function character() in a file specifically for creating your character, and I'm trying to call over these variables again in another file for the main game, inside a variable called fight(). I've tried a multitude of things such as global variables, and using return, but nothing has worked for me. I'm sorry if I explained that poorly, comment if you have any questions.</p>\n\n<p>The code in question.</p>\n\n<p>character.py</p>\n\n<pre><code>def character():\n    #tons of stuff go here\n    global damage\n    damage = strength * dexterity / 100\n</code></pre>\n\n<p>game.py</p>\n\n<pre><code>def fight():\n    choice = input('(Type in the corresponding number to choose.) ')\n    global enemy_health\n    global damage\n    if choice == 1:\n        print ' '\n        print enemy_health,\n        enemy_health += -damage\n        print '--&gt;', enemy_health\n</code></pre>\n\n<p>Thank you for your time.</p>\n"}, {"tags": ["python", "command-line", "exe"], "comments": [{"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "edited": false, "score": 1, "creation_date": 1484772379, "post_id": 41729062, "comment_id": 70652608, "body": "well, you do realize every .exe only has 1 entry point, and hence, your question doesn&#39;t make very much sense?"}, {"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1484772413, "post_id": 41729062, "comment_id": 70652625, "body": "In other words: Can you give us an example of a set of files you want to include?"}, {"owner": {"reputation": 151, "user_id": 4449969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b05955b856343f9a83648509a7fe7c6a?s=128&d=identicon&r=PG&f=1", "display_name": "Max", "link": "https://stackoverflow.com/users/4449969/max"}, "reply_to_user": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1484772787, "post_id": 41729062, "comment_id": 70652870, "body": "Well, I have a main python file that is referenced to a very brief config.py. The main file also accesses a few text files. Could I just combine the config and the main into one py file, and make that an executable, and will that executable still have access to the text files?"}, {"owner": {"reputation": 151, "user_id": 4449969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b05955b856343f9a83648509a7fe7c6a?s=128&d=identicon&r=PG&f=1", "display_name": "Max", "link": "https://stackoverflow.com/users/4449969/max"}, "reply_to_user": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1484773416, "post_id": 41729062, "comment_id": 70653224, "body": "Thanks for replying marcus"}], "answers": [{"tags": [], "owner": {"reputation": 255, "user_id": 7388106, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YKeIo.jpg?s=128&g=1", "display_name": "Matho", "link": "https://stackoverflow.com/users/7388106/matho"}, "is_accepted": false, "score": 0, "last_activity_date": 1484773012, "creation_date": 1484773012, "answer_id": 41729288, "question_id": 41729062, "link": "https://stackoverflow.com/questions/41729062/how-to-convert-multiple-python-files-to-exe/41729288#41729288", "title": "How to convert multiple python files to EXE?", "body": "<p>For example in <a href=\"https://pythonhosted.org/PyInstaller/usage.html#what-to-bundle-where-to-search\" rel=\"nofollow noreferrer\">PyInstaller</a>, you can specify additional folders which should be involved in your executable file.</p>\n"}, {"tags": [], "owner": {"reputation": 610, "user_id": 4191696, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53c7b73cd6d9c9a964b2c3b01e33d4f1?s=128&d=identicon&r=PG&f=1", "display_name": "tabbek", "link": "https://stackoverflow.com/users/4191696/tabbek"}, "is_accepted": false, "score": 0, "last_activity_date": 1484774143, "last_edit_date": 1495539947, "creation_date": 1484773465, "answer_id": 41729407, "question_id": 41729062, "link": "https://stackoverflow.com/questions/41729062/how-to-convert-multiple-python-files-to-exe/41729407#41729407", "title": "How to convert multiple python files to EXE?", "body": "<p>I currently use <a href=\"http://www.pyinstaller.org/\" rel=\"nofollow noreferrer\" title=\"pyinstaller\">pyinstaller</a> for building projects into single-executable files.  These projects all contain multiple python (and some non-python) files that are all \"built into\" the exes.  </p>\n\n<p>That being said, even with multiple python files included, <a href=\"https://stackoverflow.com/users/4433386/marcus-m%C3%BCller\">Marcus M\u00fcller</a> is correct.  There is one entry point for a given executable.</p>\n\n<p>In summary, if you have multiple files as part of a single project, pyinstaller along with the other python bundlers will handle this scenario.\nIf you have multiple files and want them each to be their own executable file, you will need to treat each as its own 'project' and package each individually.</p>\n\n<p>What platform(s) are you targeting?  Can you describe the intended purpose of the files?  Can you describe the intended usage of the files?  </p>\n\n<p>Posting an example of what you currently have, what behavior you are observing, and clarification on what is different between what you are expecting and what you are observing would definitely help others in guiding you towards the answer you desire.</p>\n\n<p>Edit:</p>\n\n<blockquote>\n  <p>Well, I have a main python file that is referenced to a very brief config.py. The main file also accesses a few text files. Could I just combine the config and the main into one py file, and make that an executable, and will that executable still have access to the text files?</p>\n</blockquote>\n\n<p>Your main python file would be your exe's entry point.  If you import your config file into your main, pyinstaller should see the import and include it.  On this line, verify your PATH environment variable, and insure your system knows where to find the bits it needs.  If the text files are to be included as part of the built executable file, pyinstaller has the ability to include files into the build as well (example, include a database, a config, or a static data set).  An example question describing including an icon file for a build: <a href=\"https://stackoverflow.com/questions/35974748/pyinstaller-exe-not-working-when-i-change-the-icon/37423184#37423184\">include-pyinstaller-icon</a></p>\n"}], "owner": {"reputation": 151, "user_id": 4449969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b05955b856343f9a83648509a7fe7c6a?s=128&d=identicon&r=PG&f=1", "display_name": "Max", "link": "https://stackoverflow.com/users/4449969/max"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 14114, "favorite_count": 1, "answer_count": 2, "score": 6, "last_activity_date": 1616058090, "creation_date": 1484772109, "question_id": 41729062, "link": "https://stackoverflow.com/questions/41729062/how-to-convert-multiple-python-files-to-exe", "title": "How to convert multiple python files to EXE?", "body": "<p>I am trying to convert my python application to an exe. I have seen things like py2exe and cx freeze, but they only compile one single py file. Can anyone help me? Thank you</p>\n"}, {"tags": ["python", "expression"], "comments": [{"owner": {"reputation": 10425, "user_id": 2142055, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Stop harming Monica", "link": "https://stackoverflow.com/users/2142055/stop-harming-monica"}, "edited": false, "score": 0, "creation_date": 1484773886, "post_id": 41729042, "comment_id": 70653466, "body": "You&#39;re having some issues?"}, {"owner": {"reputation": 1, "user_id": 7437754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db33613b7c9a807bd336a92f2df2f76c?s=128&d=identicon&r=PG&f=1", "display_name": "wmunsell", "link": "https://stackoverflow.com/users/7437754/wmunsell"}, "reply_to_user": {"reputation": 10425, "user_id": 2142055, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Stop harming Monica", "link": "https://stackoverflow.com/users/2142055/stop-harming-monica"}, "edited": false, "score": 0, "creation_date": 1484848121, "post_id": 41729042, "comment_id": 70689352, "body": "would love to know why the down vote and the seemingly sarcastic question/answer."}, {"owner": {"reputation": 10425, "user_id": 2142055, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Stop harming Monica", "link": "https://stackoverflow.com/users/2142055/stop-harming-monica"}, "edited": false, "score": 0, "creation_date": 1484848386, "post_id": 41729042, "comment_id": 70689485, "body": "I can&#39;t see how I could help you without knowing what your issues are."}, {"owner": {"reputation": 22993, "user_id": 1394393, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mSjIL.jpg?s=128&g=1", "display_name": "jpmc26", "link": "https://stackoverflow.com/users/1394393/jpmc26"}, "edited": false, "score": 0, "creation_date": 1484864296, "post_id": 41729042, "comment_id": 70698015, "body": "Goyo is saying that in order for anyone to help you, you <i>must</i> explain what behavior you expect and what different behavior you are actually seeing. &quot;It&#39;s not working&quot; is never a sufficient explanation for anyone to actually provide an answer."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 7437754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db33613b7c9a807bd336a92f2df2f76c?s=128&d=identicon&r=PG&f=1", "display_name": "wmunsell", "link": "https://stackoverflow.com/users/7437754/wmunsell"}, "is_accepted": false, "score": 0, "last_activity_date": 1484858046, "creation_date": 1484858046, "answer_id": 41751178, "question_id": 41729042, "link": "https://stackoverflow.com/questions/41729042/python-automation-of-arcgis-field-calculation/41751178#41751178", "title": "python automation of ArcGIS field calculation", "body": "<p>the issue that i was having was that i did not know how to format the expression correctly. so my question was how do i properly format the expression so that it combines a variable plus a string plus a field? however, i have since figured it out. </p>\n\n<p>abv = \"sometext\" (this is being pulled from a txt file)</p>\n\n<p>prefix = abv+\"-\"</p>\n\n<p>expression = \"'{0}' + str(!OBJECTID!)\".format(prefix)</p>\n\n<p>arcpy.CalculateField_management(FC, \"FACILITYID\", expression, \"PYTHON\")</p>\n\n<p>this solved the format issue i was having. </p>\n"}], "owner": {"reputation": 1, "user_id": 7437754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db33613b7c9a807bd336a92f2df2f76c?s=128&d=identicon&r=PG&f=1", "display_name": "wmunsell", "link": "https://stackoverflow.com/users/7437754/wmunsell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 114, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1484858046, "creation_date": 1484772022, "last_edit_date": 1484773473, "question_id": 41729042, "link": "https://stackoverflow.com/questions/41729042/python-automation-of-arcgis-field-calculation", "title": "python automation of ArcGIS field calculation", "body": "<p>I'm having some issues properly formatting the expression needed to calculate ArcGIS fields using python. </p>\n\n<p>Essentially what I am trying to use is a variable plus a string plus a field.</p>\n\n<p>After trying many different ways, where I'm at now looks like this:</p>\n\n<pre><code>abv = \"sometext\"\n\nexpression = \"{0}+{1}+!OBJECTID!\".format(abv, \"-\")\n\narcpy.CalculateField_management(FC, \"FIELDNAME\", expression) \n</code></pre>\n\n<p>Any thoughts or direction would be awesome. </p>\n"}, {"tags": ["python", "python-2.7", "nested-lists"], "comments": [{"owner": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "edited": false, "score": 3, "creation_date": 1484772090, "post_id": 41729025, "comment_id": 70652452, "body": "I would pass the lists to a <a href=\"https://docs.python.org/3/library/collections.html#collections.Counter\" rel=\"nofollow noreferrer\"><code>Counter</code></a> and look for all keys with value &gt;= 2"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1484772115, "post_id": 41729025, "comment_id": 70652461, "body": "your append statement is off;.."}, {"owner": {"reputation": 72748, "user_id": 3185459, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PBjxg.jpg?s=128&g=1", "display_name": "RomanPerekhrest", "link": "https://stackoverflow.com/users/3185459/romanperekhrest"}, "edited": false, "score": 0, "creation_date": 1484772191, "post_id": 41729025, "comment_id": 70652501, "body": "<i>to return duplicates from any lists</i> - can you elaborate?"}, {"owner": {"reputation": 802, "user_id": 6839881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a27bebff537eeceb6ab0e310caa91b65?s=128&d=identicon&r=PG&f=1", "display_name": "Navidad20", "link": "https://stackoverflow.com/users/6839881/navidad20"}, "edited": false, "score": 0, "creation_date": 1484772442, "post_id": 41729025, "comment_id": 70652646, "body": "given <code>[&#39;a&#39;,&#39;b&#39;,&#39;a&#39;],[&#39;x&#39;,&#39;y&#39;]</code> would you return <code>&#39;a&#39;</code>?"}, {"owner": {"reputation": 12150, "user_id": 1143724, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/47fa5f1bc077c8158fe5ad1287105381?s=128&d=identicon&r=PG", "display_name": "MrDuk", "link": "https://stackoverflow.com/users/1143724/mrduk"}, "edited": false, "score": 0, "creation_date": 1484772452, "post_id": 41729025, "comment_id": 70652653, "body": "Put another way, I want to return all elements which aren&#39;t unique when compared with the elements of every other list."}], "answers": [{"comments": [{"owner": {"reputation": 12150, "user_id": 1143724, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/47fa5f1bc077c8158fe5ad1287105381?s=128&d=identicon&r=PG", "display_name": "MrDuk", "link": "https://stackoverflow.com/users/1143724/mrduk"}, "edited": false, "score": 0, "creation_date": 1484772709, "post_id": 41729143, "comment_id": 70652829, "body": "This does precisely what I was looking for."}], "tags": [], "owner": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "is_accepted": true, "score": 3, "last_activity_date": 1484772444, "creation_date": 1484772444, "answer_id": 41729143, "question_id": 41729025, "link": "https://stackoverflow.com/questions/41729025/how-to-get-duplicate-values-across-any-potentially-not-all-lists/41729143#41729143", "title": "How to get duplicate values across any, potentially not all, lists", "body": "<p>Use a <a href=\"https://docs.python.org/3/library/collections.html#collections.Counter\" rel=\"nofollow noreferrer\"><code>Counter</code></a> to determine the number of each item and <a href=\"https://docs.python.org/3/library/itertools.html#itertools.chain.from_iterable\" rel=\"nofollow noreferrer\"><code>chain.from_iterable</code></a> to pass the items from the sublists to the <code>Counter</code>.</p>\n\n<pre><code>from itertools import chain\nfrom collections import Counter\n\ndata=[['a', 'b', 'c'], ['a', 'x', 'y', 'z'], ['a', 'x', 'e', 'f'], ['a']]\nc = Counter(chain.from_iterable(data))\nretVal = [k for k, count in c.items() if count &gt;= 2]\nprint(retVal)\n#['x', 'a']\n</code></pre>\n"}], "owner": {"reputation": 12150, "user_id": 1143724, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/47fa5f1bc077c8158fe5ad1287105381?s=128&d=identicon&r=PG", "display_name": "MrDuk", "link": "https://stackoverflow.com/users/1143724/mrduk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "accepted_answer_id": 41729143, "answer_count": 1, "score": 0, "last_activity_date": 1484772444, "creation_date": 1484771980, "question_id": 41729025, "link": "https://stackoverflow.com/questions/41729025/how-to-get-duplicate-values-across-any-potentially-not-all-lists", "title": "How to get duplicate values across any, potentially not all, lists", "body": "<p>I have a dataset along the lines of:</p>\n\n<pre><code>data.append(['a', 'b', 'c'], ['a', 'x', 'y', z'], ['a', 'x', 'e', 'f'], ['a'])\n</code></pre>\n\n<p>I've searched SO and found ways to return duplicates across all lists using <code>intersection_update()</code> (so, in this example, <code>'a'</code>), but I actually want to return duplicates from <em>any</em> lists, i.e.,:</p>\n\n<p><code>retVal = ['a', 'x']</code></p>\n\n<p>Since <code>'a'</code> and <code>'x'</code> are duplicated at least once among all lists. Is there a built-in for Python 2.7 that can do this?</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 4089, "user_id": 2457483, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/b32cc314ac87932457e71c98ff8d140e?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/2457483/daniel"}, "edited": false, "score": 0, "creation_date": 1484772271, "post_id": 41729058, "comment_id": 70652538, "body": "I need to align the normal row index with the column value which goes from 1 to 919. Also, why does the index type changes when <code>.loc</code> method is used?"}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "reply_to_user": {"reputation": 4089, "user_id": 2457483, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/b32cc314ac87932457e71c98ff8d140e?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/2457483/daniel"}, "edited": false, "score": 0, "creation_date": 1484773117, "post_id": 41729058, "comment_id": 70653045, "body": "@DanielJimenez I have updated my post.  Hopefully this helps"}, {"owner": {"reputation": 4089, "user_id": 2457483, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/b32cc314ac87932457e71c98ff8d140e?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/2457483/daniel"}, "edited": false, "score": 0, "creation_date": 1484773170, "post_id": 41729058, "comment_id": 70653077, "body": "Yeah it think this was the issue. I guess im still learning how pandas work"}], "tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": true, "score": 1, "last_activity_date": 1484772926, "last_edit_date": 1484772926, "creation_date": 1484772088, "answer_id": 41729058, "question_id": 41729016, "link": "https://stackoverflow.com/questions/41729016/pandas-changes-index-datatype/41729058#41729058", "title": "Pandas changes index datatype", "body": "<p><code>resultp.loc[14].index</code>  are strings.  When you call <code>loc[14]</code> that returns the row with the index value of <code>14</code>.  This ends up being a series object whose index is equal to the columns of <code>resultp</code></p>\n\n<pre><code>Index([u'1', u'2', u'3', u'4', u'5', u'6', u'7', u'8', u'9', u'10',\n       ...\n       u'910', u'911', u'912', u'913', u'914', u'915', u'916', u'917', u'918',\n       u'919'],\n      dtype='object', length=919)\n</code></pre>\n\n<p>This indicates that the columns are strings.</p>\n\n<hr>\n\n<p>Consider the following objects</p>\n\n<pre><code>idx = pd.RangeIndex(0, 5)\ncol = idx.astype(str)\nresultp = pd.DataFrame(np.random.rand(5, 5), idx, col)\nnormal_row = pd.Series(np.random.rand(5), resultp.index)\n</code></pre>\n\n<p>Note that <code>col</code> looks the same as <code>idx</code> but is type <code>str</code></p>\n\n<pre><code>print(resultp)\n\n          0         1         2         3         4\n0  0.242878  0.995860  0.486782  0.601954  0.500455\n1  0.015091  0.173417  0.508923  0.152233  0.673011\n2  0.022210  0.842158  0.302539  0.408297  0.983856\n3  0.978881  0.760028  0.254995  0.610134  0.247800\n4  0.233714  0.401079  0.984682  0.354219  0.816966\n</code></pre>\n\n<hr>\n\n<pre><code>print(normal_row)\n\n0    0.778379\n1    0.019352\n2    0.583937\n3    0.227633\n4    0.646096\ndtype: float64\n</code></pre>\n\n<hr>\n\n<p>Because <code>resultp.columns</code> are strings, this multiplication comes back as <code>NaN</code>s</p>\n\n<pre><code>resultp.mul(normal_row, axis=1)\n\n    0   1   2   3   4   0   1   2   3   4\n0 NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN\n1 NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN\n2 NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN\n3 NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN\n4 NaN NaN NaN NaN NaN NaN NaN NaN NaN NaN\n</code></pre>\n\n<hr>\n\n<p>You need to cast the <code>resultp.columns</code> as <code>int</code></p>\n\n<pre><code>resultp.columns = resultp.columns.astype(int)\n</code></pre>\n\n<p>Then multiply</p>\n\n<pre><code>resultp.mul(normal_row, axis=1)\n\n          0         1         2         3         4\n0  0.305954  0.079327  0.351183  0.588635  0.209578\n1  0.136023  0.152232  0.443796  0.493444  0.678651\n2  0.411359  0.267142  0.202791  0.327760  0.307422\n3  0.399191  0.225889  0.130076  0.147862  0.038032\n4  0.039647  0.058929  0.358210  0.684927  0.180250\n</code></pre>\n"}], "owner": {"reputation": 4089, "user_id": 2457483, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/b32cc314ac87932457e71c98ff8d140e?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/2457483/daniel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 0, "accepted_answer_id": 41729058, "answer_count": 1, "score": 2, "last_activity_date": 1484772926, "creation_date": 1484771933, "last_edit_date": 1484772872, "question_id": 41729016, "link": "https://stackoverflow.com/questions/41729016/pandas-changes-index-datatype", "title": "Pandas changes index datatype", "body": "<p>I have a series <code>normal_row</code> which index values are:</p>\n\n<pre><code>Int64Index([  1,   2,   3,   4,   5,   6,   7,   8,   9,  10,\n            ...\n            910, 911, 912, 913, 914, 915, 916, 917, 918, 919],\n           dtype='int64', length=919)\n</code></pre>\n\n<p>I have a dataframe <code>resultp</code></p>\n\n<pre><code>resultp.index \n</code></pre>\n\n<p>which returns </p>\n\n<pre><code>Int64Index([  1,   2,   3,   4,   5,   6,   7,   8,   9,  10,\n            ...\n            910, 911, 912, 913, 914, 915, 916, 917, 918, 919],\n           dtype='int64', length=919)\n</code></pre>\n\n<p>however </p>\n\n<pre><code>resultp.loc[14].index\n</code></pre>\n\n<p>returns </p>\n\n<pre><code>Index([u'1', u'2', u'3', u'4', u'5', u'6', u'7', u'8', u'9', u'10',\n       ...\n       u'910', u'911', u'912', u'913', u'914', u'915', u'916', u'917', u'918',\n       u'919'],\n      dtype='object', length=919)\n</code></pre>\n\n<p>This is creating issues becasue when </p>\n\n<pre><code>resultp.mul(normal_row, axis = 1)\n</code></pre>\n\n<p>returns a dataframe full of 'NaN' values. Also the shape of the dataframe changes from <code>(919,919)</code> to <code>(919,1838)</code></p>\n\n<p>which seems to appear is because the index types changes during the operation. How can this be fixed? and why does pandas keeps changing the index types, shouldn't the index types remain the same as the original index?</p>\n"}, {"tags": ["python", "amazon-web-services", "amazon-elastic-beanstalk"], "comments": [{"owner": {"reputation": 299, "user_id": 5863896, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh5.googleusercontent.com/-ex9-xKhP240/AAAAAAAAAAI/AAAAAAAACsk/KI9nWa9ZwBY/photo.jpg?sz=128", "display_name": "Juan Salvador", "link": "https://stackoverflow.com/users/5863896/juan-salvador"}, "edited": false, "score": 3, "creation_date": 1496326933, "post_id": 41729006, "comment_id": 75625591, "body": "In my windows 10 laptop I just added <code>%USERPROFILE%\\AppData\\Roaming\\Python\\Scripts` the the </code>Path` environment variable and it worked. That is because the <code>scripts</code> directory is in <code>%USERPROFILE%\\AppData\\Roaming\\Python</code>. Maybe some other installation is inside the `%USERPROFILE%\\AppData\\Roaming\\Python\\PythonXX`"}], "answers": [{"tags": [], "owner": {"reputation": 2089, "user_id": 168309, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/7d5V3.jpg?s=128&g=1", "display_name": "Amir", "link": "https://stackoverflow.com/users/168309/amir"}, "is_accepted": true, "score": 3, "last_activity_date": 1547641204, "last_edit_date": 1547641204, "creation_date": 1484881936, "answer_id": 41755453, "question_id": 41729006, "link": "https://stackoverflow.com/questions/41729006/unable-to-install-aws-elastic-beanstalk-cli-win10-python-3-6-pip-9-0-1/41755453#41755453", "title": "Unable to install AWS Elastic Beanstalk CLI (Win10, Python 3.6, Pip 9.0.1)", "body": "<p>I figured out the issue. It looks like I needed to add this to my environment variables:</p>\n\n<pre><code>%USERPROFILE%\\AppData\\Local\\Programs\\Python\\Python36\\Scripts\n</code></pre>\n\n<p>Even though it had the other <code>C:\\Users\\amirs\\</code>... path as well.</p>\n"}, {"tags": [], "owner": {"reputation": 511, "user_id": 4384723, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/26ab25846d5b04bc2826d5b168e6686a?s=128&d=identicon&r=PG&f=1", "display_name": "Jerusalem Programmer", "link": "https://stackoverflow.com/users/4384723/jerusalem-programmer"}, "is_accepted": false, "score": 3, "last_activity_date": 1495345637, "last_edit_date": 1495345637, "creation_date": 1495334795, "answer_id": 44092675, "question_id": 41729006, "link": "https://stackoverflow.com/questions/41729006/unable-to-install-aws-elastic-beanstalk-cli-win10-python-3-6-pip-9-0-1/44092675#44092675", "title": "Unable to install AWS Elastic Beanstalk CLI (Win10, Python 3.6, Pip 9.0.1)", "body": "<p>I had the same problem these last few days.</p>\n\n<p>Though the Amazon documentation does not even mention it (i.e. only the following AWS Command-Line Interface home page mentions it, but does not explain that it is required), in addition to the 'awsebcli' package (that also requires the 'boto3' package), you also need to download and install the 'aws-shell' package in order to get the command 'aws configure' to work:</p>\n\n<p><a href=\"https://aws.amazon.com/cli/\" rel=\"nofollow noreferrer\">https://aws.amazon.com/cli/</a></p>\n\n<p>Click through the link for 'aws-shell' to the following GITHUB page and follow the install instructions:\n<a href=\"https://github.com/awslabs/aws-shell\" rel=\"nofollow noreferrer\">https://github.com/awslabs/aws-shell</a></p>\n\n<p>Then after installation type 'aws configure' in your COMMAND WINDOW as per instructions at the following link, and it will work fine prompting you to enter the necessary AWS ACCESS KEY and SECRET ACCESS KEY:</p>\n\n<p><a href=\"http://boto3.readthedocs.io/en/latest/guide/quickstart.html\" rel=\"nofollow noreferrer\">http://boto3.readthedocs.io/en/latest/guide/quickstart.html</a></p>\n\n<p>FYI - I tried changing the environment variable path as per your solution as well as in another link, but neither worked for me:</p>\n\n<p><a href=\"https://forums.aws.amazon.com/thread.jspa?threadID=228638\" rel=\"nofollow noreferrer\">https://forums.aws.amazon.com/thread.jspa?threadID=228638</a></p>\n\n<p>Thus I had to solve the issue with the true solution to the issue as detailed here.</p>\n"}, {"comments": [{"owner": {"reputation": 650, "user_id": 1669091, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4e20a2929eeab71678aa65019b040ef?s=128&d=identicon&r=PG", "display_name": "chad steele", "link": "https://stackoverflow.com/users/1669091/chad-steele"}, "edited": false, "score": 1, "creation_date": 1495485754, "post_id": 44114181, "comment_id": 75262911, "body": "Thanks for this... it put me on the &quot;right&quot; path to the right path.  lol  This PATH worked for me...  %USERPROFILE%\\AppData\\Roaming\\Python\\Scripts; %USERPROFILE%\\AppData\\Local\\Programs\\Python\\Python36\\Scripts&zwnj;&#8203;; %USERPROFILE%\\AppData\\Roaming\\Python\\Python36\\Scripts; C:\\Program Files\\Amazon\\AWSCLI"}], "tags": [], "owner": {"reputation": 1882, "user_id": 786145, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/5BtJH.png?s=128&g=1", "display_name": "Adrian Seeley", "link": "https://stackoverflow.com/users/786145/adrian-seeley"}, "is_accepted": false, "score": 29, "last_activity_date": 1547704305, "last_edit_date": 1547704305, "creation_date": 1495459709, "answer_id": 44114181, "question_id": 41729006, "link": "https://stackoverflow.com/questions/41729006/unable-to-install-aws-elastic-beanstalk-cli-win10-python-3-6-pip-9-0-1/44114181#44114181", "title": "Unable to install AWS Elastic Beanstalk CLI (Win10, Python 3.6, Pip 9.0.1)", "body": "<p>After a great deal of running around I managed to figure out that I was missing an additional PATH entry, both of these were required to get <code>eb</code> to run on windows:</p>\n\n<pre><code>%USERPROFILE%\\AppData\\Local\\Programs\\Python\\Python36\\Scripts\n%USERPROFILE%\\AppData\\Roaming\\Python\\Python36\\Scripts\n</code></pre>\n\n<p>NOTE: If you have Python 3.7 installed, change \"Python36\" to \"Python37\" in both of the path entries.</p>\n"}, {"comments": [{"owner": {"reputation": 6359, "user_id": 6143656, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ee15a9ee7eb1213ec2702d1b30ee3c6f?s=128&d=identicon&r=PG", "display_name": "Roel", "link": "https://stackoverflow.com/users/6143656/roel"}, "edited": false, "score": 0, "creation_date": 1513084455, "post_id": 44121772, "comment_id": 82507900, "body": "the <code>%USERPROFILE%\\AppData\\Roaming\\Python\\Scripts;</code> on EB documentation works for me"}, {"owner": {"reputation": 763, "user_id": 1936023, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/533d9dad8c0706ec604c6dead404978e?s=128&d=identicon&r=PG", "display_name": "satish marathe", "link": "https://stackoverflow.com/users/1936023/satish-marathe"}, "edited": false, "score": 0, "creation_date": 1535942631, "post_id": 44121772, "comment_id": 91235033, "body": "Thanks - was facing the same problem - this worked for me too . Added the following to path variable under &#39;user&#39; variables:C:\\Users\\user\\AppData\\Roaming\\Python\\Python37\\Scri&zwnj;&#8203;pts; C:\\Users\\user\\AppData\\Local\\Programs\\Python\\Python37-32\\Scri&zwnj;&#8203;pts;"}], "tags": [], "owner": {"reputation": 650, "user_id": 1669091, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4e20a2929eeab71678aa65019b040ef?s=128&d=identicon&r=PG", "display_name": "chad steele", "link": "https://stackoverflow.com/users/1669091/chad-steele"}, "is_accepted": false, "score": 7, "last_activity_date": 1495485545, "creation_date": 1495485545, "answer_id": 44121772, "question_id": 41729006, "link": "https://stackoverflow.com/questions/41729006/unable-to-install-aws-elastic-beanstalk-cli-win10-python-3-6-pip-9-0-1/44121772#44121772", "title": "Unable to install AWS Elastic Beanstalk CLI (Win10, Python 3.6, Pip 9.0.1)", "body": "<p>This PATH worked for me...</p>\n\n<pre><code>%USERPROFILE%\\AppData\\Roaming\\Python\\Scripts;\n%USERPROFILE%\\AppData\\Local\\Programs\\Python\\Python36\\Scripts;\n%USERPROFILE%\\AppData\\Roaming\\Python\\Python36\\Scripts;\nC:\\Program Files\\Amazon\\AWSCLI\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1829, "user_id": 628762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/564621a257d4613a93b04d7d98f86b03?s=128&d=identicon&r=PG", "display_name": "Nasaralla", "link": "https://stackoverflow.com/users/628762/nasaralla"}, "is_accepted": false, "score": 0, "last_activity_date": 1518436864, "creation_date": 1518436864, "answer_id": 48746038, "question_id": 41729006, "link": "https://stackoverflow.com/questions/41729006/unable-to-install-aws-elastic-beanstalk-cli-win10-python-3-6-pip-9-0-1/48746038#48746038", "title": "Unable to install AWS Elastic Beanstalk CLI (Win10, Python 3.6, Pip 9.0.1)", "body": "<p>If you are here and it is still not working you need (this possibly is since the new update)... you need to add the following in your Windows Environment variable path:</p>\n\n<pre><code>%USERPROFILE%\\AppData\\Local\\Programs\\Python\\Python37-32\\Scripts\\\n</code></pre>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user379888"}, "edited": false, "score": 0, "creation_date": 1575400758, "post_id": 50050941, "comment_id": 104551936, "body": "How are you using <code>&#39;sudo&#39;</code> in Windows?"}, {"owner": {"reputation": 481, "user_id": 7584952, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pTyKd.jpg?s=128&g=1", "display_name": "Mirza Leka", "link": "https://stackoverflow.com/users/7584952/mirza-leka"}, "edited": false, "score": 4, "creation_date": 1579913256, "post_id": 50050941, "comment_id": 105937499, "body": "It worked for me too. Just leave out the sudo -H. Run Powershell as admin and type: <code>pip install awsebcli --upgrade --ignore-installed six</code>"}, {"owner": {"reputation": 73, "user_id": 12895286, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14e81ee40bdaed812586ca8f3f63ca2e?s=128&d=identicon&r=PG&f=1", "display_name": "noobCoder", "link": "https://stackoverflow.com/users/12895286/noobcoder"}, "edited": false, "score": 0, "creation_date": 1615900923, "post_id": 50050941, "comment_id": 117830705, "body": "This also works for me"}], "tags": [], "owner": {"reputation": 2576, "user_id": 9009196, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-TQuKsnXMAjI/AAAAAAAAAAI/AAAAAAAAAhc/7UzRfnGJCmQ/photo.jpg?sz=128", "display_name": "Jordan Daniels", "link": "https://stackoverflow.com/users/9009196/jordan-daniels"}, "is_accepted": false, "score": 9, "last_activity_date": 1524772603, "creation_date": 1524772603, "answer_id": 50050941, "question_id": 41729006, "link": "https://stackoverflow.com/questions/41729006/unable-to-install-aws-elastic-beanstalk-cli-win10-python-3-6-pip-9-0-1/50050941#50050941", "title": "Unable to install AWS Elastic Beanstalk CLI (Win10, Python 3.6, Pip 9.0.1)", "body": "<p>This worked for me:</p>\n\n<pre><code>sudo -H pip3 install awsebcli --upgrade --ignore-installed six\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 858, "user_id": 2873388, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/d36860f302f620baa4bb5e78bf0c67ee?s=128&d=identicon&r=PG", "display_name": "Yamona", "link": "https://stackoverflow.com/users/2873388/yamona"}, "is_accepted": false, "score": 0, "last_activity_date": 1578431754, "creation_date": 1578431754, "answer_id": 59636175, "question_id": 41729006, "link": "https://stackoverflow.com/questions/41729006/unable-to-install-aws-elastic-beanstalk-cli-win10-python-3-6-pip-9-0-1/59636175#59636175", "title": "Unable to install AWS Elastic Beanstalk CLI (Win10, Python 3.6, Pip 9.0.1)", "body": "<p>The issue is not with <code>%USERPROFILE%\\</code> or <code>C:\\Users\\amirs\\</code>, the issue is that <code>eb</code> is installed in <code>\\AppData\\Roaming\\</code> not <code>\\AppData\\Local\\</code></p>\n\n<p>just use <code>C:\\Users\\amirs\\AppData\\Roaming\\Python\\Python38\\Scripts</code>. The missing part was <code>\\Roaming\\</code></p>\n"}, {"comments": [{"owner": {"reputation": 1202, "user_id": 6619250, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9f47e2aa5bd9841c653a46090c23692b?s=128&d=identicon&r=PG&f=1", "display_name": "hongsy", "link": "https://stackoverflow.com/users/6619250/hongsy"}, "edited": false, "score": 0, "creation_date": 1580143734, "post_id": 59935199, "comment_id": 105992776, "body": "Note that there is already an accepted answer to this question. Please <a href=\"https://stackoverflow.com/posts/59935199/edit\">edit</a> your answer to ensure that it improves upon other answers already present in this question."}], "tags": [], "owner": {"reputation": 25, "user_id": 7705518, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ti5BL.png?s=128&g=1", "display_name": "vanDeurs", "link": "https://stackoverflow.com/users/7705518/vandeurs"}, "is_accepted": false, "score": 0, "last_activity_date": 1580142590, "creation_date": 1580142590, "answer_id": 59935199, "question_id": 41729006, "link": "https://stackoverflow.com/questions/41729006/unable-to-install-aws-elastic-beanstalk-cli-win10-python-3-6-pip-9-0-1/59935199#59935199", "title": "Unable to install AWS Elastic Beanstalk CLI (Win10, Python 3.6, Pip 9.0.1)", "body": "<p>I had the exact same issue. It worked for me when I added:</p>\n\n<pre><code>%USERPROFILE%\\AppData\\Roaming\\Python\\Python36\\Scripts;\n</code></pre>\n\n<p>However, if it is still not working, you should check the specific name of the maps since it is not the same in \\Roaming as in <code>\\Local</code> In \\Local it was named Python38-32, and in <code>\\Roaming</code> it was named Python38.</p>\n"}, {"comments": [{"owner": {"reputation": 529, "user_id": 4771032, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2cc603dd9d046e7df32824813dd673bd?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/4771032/nick"}, "edited": false, "score": 0, "creation_date": 1587371945, "post_id": 61310532, "comment_id": 108475218, "body": "Hi, Yao. Welcome to StackOverflow! This answer only works if OP used Anaconda, which we don&#39;t know, so it&#39;s a broad assumption and might not be helpful."}], "tags": [], "owner": {"reputation": 21, "user_id": 13356761, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/83c58ccb5a0fb56557fa69a68efce62d?s=128&d=identicon&r=PG", "display_name": "Yao", "link": "https://stackoverflow.com/users/13356761/yao"}, "is_accepted": false, "score": 1, "last_activity_date": 1587341680, "last_edit_date": 1587341680, "creation_date": 1587325137, "answer_id": 61310532, "question_id": 41729006, "link": "https://stackoverflow.com/questions/41729006/unable-to-install-aws-elastic-beanstalk-cli-win10-python-3-6-pip-9-0-1/61310532#61310532", "title": "Unable to install AWS Elastic Beanstalk CLI (Win10, Python 3.6, Pip 9.0.1)", "body": "<p>If you happened to be using Conda for your Python installation, then you might have to add the following path for Elastic Beanstalk to work:</p>\n\n<pre><code>C:\\Users\\%USERPROFILE%\\Anaconda3\\Scripts\n</code></pre>\n"}], "owner": {"reputation": 2089, "user_id": 168309, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/7d5V3.jpg?s=128&g=1", "display_name": "Amir", "link": "https://stackoverflow.com/users/168309/amir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10957, "favorite_count": 3, "accepted_answer_id": 41755453, "answer_count": 9, "score": 23, "last_activity_date": 1587341680, "creation_date": 1484771893, "question_id": 41729006, "link": "https://stackoverflow.com/questions/41729006/unable-to-install-aws-elastic-beanstalk-cli-win10-python-3-6-pip-9-0-1", "title": "Unable to install AWS Elastic Beanstalk CLI (Win10, Python 3.6, Pip 9.0.1)", "body": "<p>I am trying to install awsebcli on my machine and I am unable to run the command</p>\n\n<p><code>eb --version</code></p>\n\n<p>It shows this error:</p>\n\n<pre><code>'eb' is not recognized as an internal or external command,\n</code></pre>\n\n<p>operable program or batch file.</p>\n\n<p>This is my Python version:</p>\n\n<pre><code>C:\\&gt;python --version\nPython 3.6.0\n</code></pre>\n\n<p>This is my pip version:</p>\n\n<pre><code>C:\\&gt;pip --version\npip 9.0.1 from c:\\users\\amirs\\appdata\\local\\programs\\python\\python36\\lib\\site-packages (python 3.6)\n</code></pre>\n\n<p>When I ran this command <code>pip install --upgrade --user awsebcli</code> to install awsebcli it successfully installed it.</p>\n\n<p>Here are my environment variables for PATH:\n<a href=\"https://i.stack.imgur.com/odNet.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/odNet.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "http", "flask"], "comments": [{"owner": {"reputation": 106, "user_id": 2376209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gvdvN.jpg?s=128&g=1", "display_name": "david cako", "link": "https://stackoverflow.com/users/2376209/david-cako"}, "edited": false, "score": 0, "creation_date": 1484772188, "post_id": 41729005, "comment_id": 70652497, "body": "Is the onclick post actually firing?   Check your network log in developer tools for what is happening to the post request."}, {"owner": {"reputation": 125, "user_id": 7411699, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lwKZ46KUARE/AAAAAAAAAAI/AAAAAAAAF_A/DIxGLrGsVT8/photo.jpg?sz=128", "display_name": "Kirill Losev", "link": "https://stackoverflow.com/users/7411699/kirill-losev"}, "reply_to_user": {"reputation": 106, "user_id": 2376209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gvdvN.jpg?s=128&g=1", "display_name": "david cako", "link": "https://stackoverflow.com/users/2376209/david-cako"}, "edited": false, "score": 0, "creation_date": 1484772691, "post_id": 41729005, "comment_id": 70652815, "body": "@davidcako yeah, if I add print(&quot;POST&quot;) in app.py, it works"}, {"owner": {"reputation": 125, "user_id": 7411699, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lwKZ46KUARE/AAAAAAAAAAI/AAAAAAAAF_A/DIxGLrGsVT8/photo.jpg?sz=128", "display_name": "Kirill Losev", "link": "https://stackoverflow.com/users/7411699/kirill-losev"}, "reply_to_user": {"reputation": 106, "user_id": 2376209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gvdvN.jpg?s=128&g=1", "display_name": "david cako", "link": "https://stackoverflow.com/users/2376209/david-cako"}, "edited": false, "score": 0, "creation_date": 1484772873, "post_id": 41729005, "comment_id": 70652926, "body": "Maybe it happens because of POST? I don&#39;t know how to fix it"}, {"owner": {"reputation": 125, "user_id": 7411699, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lwKZ46KUARE/AAAAAAAAAAI/AAAAAAAAF_A/DIxGLrGsVT8/photo.jpg?sz=128", "display_name": "Kirill Losev", "link": "https://stackoverflow.com/users/7411699/kirill-losev"}, "reply_to_user": {"reputation": 106, "user_id": 2376209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gvdvN.jpg?s=128&g=1", "display_name": "david cako", "link": "https://stackoverflow.com/users/2376209/david-cako"}, "edited": false, "score": 0, "creation_date": 1484773088, "post_id": 41729005, "comment_id": 70653027, "body": "GET method works nice. It redirects. But i need to post data from login form."}], "answers": [{"comments": [{"owner": {"reputation": 125, "user_id": 7411699, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lwKZ46KUARE/AAAAAAAAAAI/AAAAAAAAF_A/DIxGLrGsVT8/photo.jpg?sz=128", "display_name": "Kirill Losev", "link": "https://stackoverflow.com/users/7411699/kirill-losev"}, "edited": false, "score": 0, "creation_date": 1484800294, "post_id": 41731076, "comment_id": 70661683, "body": "Thanks, I&#39;ll try it. Sure this will work. I have another question. When I do redirection to login page again in case of incorrect login/pass, there is a get after post request with redirection. What if I want to show some info about error. I can&#39;t do this in callback function, because it will show up in a second, until get request. And then I have clear login page."}, {"owner": {"reputation": 106, "user_id": 2376209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gvdvN.jpg?s=128&g=1", "display_name": "david cako", "link": "https://stackoverflow.com/users/2376209/david-cako"}, "reply_to_user": {"reputation": 125, "user_id": 7411699, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lwKZ46KUARE/AAAAAAAAAAI/AAAAAAAAF_A/DIxGLrGsVT8/photo.jpg?sz=128", "display_name": "Kirill Losev", "link": "https://stackoverflow.com/users/7411699/kirill-losev"}, "edited": false, "score": 0, "creation_date": 1484800720, "post_id": 41731076, "comment_id": 70661811, "body": "You would generally have a login page use an HTML form-based POST.  If there is ever an imperative for something like this to be AJAX, however, you could always have a callback on it that takes the response data it receives (that&#39;s the &quot;data&quot; argument in <code>function(data)</code>) and decides whether to yell at you, or to redirect you to the actual <i>logged in</i> state.  The response WILL still contain the <code>data.redirect</code> field (despite the browser not following it), so if you need to keep the redirect server-side, you can still dynamically use that value, i.e. <code>window.location = data.redirect</code>."}], "tags": [], "owner": {"reputation": 106, "user_id": 2376209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gvdvN.jpg?s=128&g=1", "display_name": "david cako", "link": "https://stackoverflow.com/users/2376209/david-cako"}, "is_accepted": true, "score": 0, "last_activity_date": 1529276311, "last_edit_date": 1529276311, "creation_date": 1484780887, "answer_id": 41731076, "question_id": 41729005, "link": "https://stackoverflow.com/questions/41729005/flask-doesnt-redirect-on-post-method/41731076#41731076", "title": "Flask doesn&#39;t redirect on POST method", "body": "<p>It's because you're making the request using AJAX/jquery.  A server-side redirect will never work.  </p>\n\n<p>The best solution is to just set a client-side callback function:</p>\n\n<pre><code>$.post('/test', {'test':'test'}, function(data){\n    window.location = data.redirect;\n});\n</code></pre>\n\n<p><a href=\"https://api.jquery.com/jquery.post/\" rel=\"nofollow noreferrer\">https://api.jquery.com/jquery.post/</a></p>\n\n<p>Using an HTML-based POST would also do what you want, but I'm sure you want to learn how to do it with jquery for a reason.</p>\n"}], "owner": {"reputation": 125, "user_id": 7411699, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lwKZ46KUARE/AAAAAAAAAAI/AAAAAAAAF_A/DIxGLrGsVT8/photo.jpg?sz=128", "display_name": "Kirill Losev", "link": "https://stackoverflow.com/users/7411699/kirill-losev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1030, "favorite_count": 0, "accepted_answer_id": 41731076, "answer_count": 1, "score": 3, "last_activity_date": 1529276311, "creation_date": 1484771891, "question_id": 41729005, "link": "https://stackoverflow.com/questions/41729005/flask-doesnt-redirect-on-post-method", "title": "Flask doesn&#39;t redirect on POST method", "body": "<p>Well, \nI have a button with post method on click</p>\n\n<pre><code>&lt;button class=\"btn btn-lg btn-primary btn-block\" onclick=\"$.post('/test',{'test':'tset'})\"&gt;Home&lt;/button&gt;\n</code></pre>\n\n<p>And flask app, which contains this code</p>\n\n<pre><code>@app.route('/')\ndef index():\n    return render_template(\"index.html\")\n\n@app.route('/test', methods=['POST'])\ndef test():\n    return redirect(url_for('index'))\n</code></pre>\n\n<p>Nothing happend on button press.I need your help.</p>\n"}, {"tags": ["python", "tkinter", "pyqt", "stdout", "stderr"], "comments": [{"owner": {"reputation": 1188, "user_id": 7244759, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/336538946712354/picture?type=large", "display_name": "spicypumpkin", "link": "https://stackoverflow.com/users/7244759/spicypumpkin"}, "edited": false, "score": 0, "creation_date": 1484771857, "post_id": 41728959, "comment_id": 70652333, "body": "You should look into <code>tkinter</code> module"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1484772026, "post_id": 41728959, "comment_id": 70652419, "body": "PyCrust (wxWidgets) is an excellent interactive shell that you can include in your applications."}, {"owner": {"reputation": 93, "user_id": 6861254, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7ffc6193544f8973053ef8b00851ab1e?s=128&d=identicon&r=PG&f=1", "display_name": "F Casian", "link": "https://stackoverflow.com/users/6861254/f-casian"}, "edited": false, "score": 0, "creation_date": 1484772030, "post_id": 41728959, "comment_id": 70652423, "body": "I did and is not a real solution to add this window into a GUI, all the &quot;solutions&quot; are related to use a &quot;subprocess&quot; then read the subprocess output and this is not what I need."}, {"owner": {"reputation": 93, "user_id": 6861254, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7ffc6193544f8973053ef8b00851ab1e?s=128&d=identicon&r=PG&f=1", "display_name": "F Casian", "link": "https://stackoverflow.com/users/6861254/f-casian"}, "edited": false, "score": 0, "creation_date": 1484772359, "post_id": 41728959, "comment_id": 70652600, "body": "Thank you Jean-Fran&#231;ois Fabre but I ended with the same question ... how to embedded into my GUI."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 1, "creation_date": 1484774634, "post_id": 41728959, "comment_id": 70653838, "body": "You might find the Tkinter-based <code>errorwindow.py</code> module in <a href=\"http://stackoverflow.com/a/18091356/355230\">this answer</a> useful (it works for <code>stderr</code> as well as <code>stderr</code>). On the other hand, the <a href=\"http://easygui.sourceforge.net/\" rel=\"nofollow noreferrer\"><code>easygui</code></a> module may be all that you need."}, {"owner": {"reputation": 3757, "user_id": 794539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b694f0dd066ad600b16e4440cf0e9a91?s=128&d=identicon&r=PG", "display_name": "blubberdiblub", "link": "https://stackoverflow.com/users/794539/blubberdiblub"}, "edited": false, "score": 0, "creation_date": 1484776426, "post_id": 41728959, "comment_id": 70654743, "body": "@FCasian Maybe you should point out <i>why</i> <code>subprocess</code> is not a good solution for your case. <code>subprocess</code> can very well be used to capture the output of an executable. Or maybe you just want to get rid of the executable? But we don&#39;t know that."}, {"owner": {"reputation": 93, "user_id": 6861254, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7ffc6193544f8973053ef8b00851ab1e?s=128&d=identicon&r=PG&f=1", "display_name": "F Casian", "link": "https://stackoverflow.com/users/6861254/f-casian"}, "reply_to_user": {"reputation": 3757, "user_id": 794539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b694f0dd066ad600b16e4440cf0e9a91?s=128&d=identicon&r=PG", "display_name": "blubberdiblub", "link": "https://stackoverflow.com/users/794539/blubberdiblub"}, "edited": false, "score": 0, "creation_date": 1484776657, "post_id": 41728959, "comment_id": 70654861, "body": "Hi @blubberdiblub thanks for your comment,  I did the subprocess and the problem is that I can only read the output once the process is completed. Please see as following:                                 from tkinter import *     import subprocess as sub      p = sub.Popen([&#39;python.exe&#39;, &#39;C:\\\\N\\\\test_py&#39;],stdout=sub.PIPE,  stderr=sub.PIPE)     output, errors = p.communicate()      root = Tk()     text = Text(root)     text.pack()     text.insert(END, output)     root.mainloop()"}, {"owner": {"reputation": 3757, "user_id": 794539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b694f0dd066ad600b16e4440cf0e9a91?s=128&d=identicon&r=PG", "display_name": "blubberdiblub", "link": "https://stackoverflow.com/users/794539/blubberdiblub"}, "edited": false, "score": 0, "creation_date": 1484777182, "post_id": 41728959, "comment_id": 70655091, "body": "@FCasian ah, I see, so your problem is how to use <code>subprocess</code> correctly. The <code>communicate()</code> is the culprit, as that can&#39;t read the output line by line. You need to use a different technique in that case."}, {"owner": {"reputation": 93, "user_id": 6861254, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7ffc6193544f8973053ef8b00851ab1e?s=128&d=identicon&r=PG&f=1", "display_name": "F Casian", "link": "https://stackoverflow.com/users/6861254/f-casian"}, "reply_to_user": {"reputation": 3757, "user_id": 794539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b694f0dd066ad600b16e4440cf0e9a91?s=128&d=identicon&r=PG", "display_name": "blubberdiblub", "link": "https://stackoverflow.com/users/794539/blubberdiblub"}, "edited": false, "score": 0, "creation_date": 1484781294, "post_id": 41728959, "comment_id": 70656602, "body": "Hi @blubberdiblub that is correct, that is the reason that I try to find the way to embedded the console into the GUI, I mean, why do we want to find the way using subprocess and other techniques if I already have available the &quot;console&quot;, right? is just matter to include/embedded into a GUI, that&#39;s it."}, {"owner": {"reputation": 3757, "user_id": 794539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b694f0dd066ad600b16e4440cf0e9a91?s=128&d=identicon&r=PG", "display_name": "blubberdiblub", "link": "https://stackoverflow.com/users/794539/blubberdiblub"}, "edited": false, "score": 0, "creation_date": 1484829950, "post_id": 41728959, "comment_id": 70676946, "body": "@FCasian you should clearly point out in your question that your actual problem is to read the output from the program piece by piece (or line by line) as it comes in (as opposed to all at once) and that the program producing the output doesn&#39;t produce it all at once.  Having it hidden in the comments here won&#39;t help attract contributors ;)"}, {"owner": {"reputation": 93, "user_id": 6861254, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7ffc6193544f8973053ef8b00851ab1e?s=128&d=identicon&r=PG&f=1", "display_name": "F Casian", "link": "https://stackoverflow.com/users/6861254/f-casian"}, "reply_to_user": {"reputation": 3757, "user_id": 794539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b694f0dd066ad600b16e4440cf0e9a91?s=128&d=identicon&r=PG", "display_name": "blubberdiblub", "link": "https://stackoverflow.com/users/794539/blubberdiblub"}, "edited": false, "score": 0, "creation_date": 1484849647, "post_id": 41728959, "comment_id": 70690161, "body": "Hi @blubberdiblub Thank you for your feedback, I really doubt some one has a solution for this &quot;simple&quot; request. (Simple that I haven&#39;t been able to find the solution lol)"}, {"owner": {"reputation": 3757, "user_id": 794539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b694f0dd066ad600b16e4440cf0e9a91?s=128&d=identicon&r=PG", "display_name": "blubberdiblub", "link": "https://stackoverflow.com/users/794539/blubberdiblub"}, "edited": false, "score": 0, "creation_date": 1484859056, "post_id": 41728959, "comment_id": 70695316, "body": "No, really, it&#39;s important to improve the question, as that will considerably raise the likelihood of getting it answered. Also read <a href=\"http://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a> if you like to know more. Users are unlikely to answer a question they don&#39;t like, as the answer stands and falls with the question here on SO. Let me try my hand at an answer, maybe it encourages you to improve the question afterwards ;)"}], "answers": [{"comments": [{"owner": {"reputation": 93, "user_id": 6861254, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7ffc6193544f8973053ef8b00851ab1e?s=128&d=identicon&r=PG&f=1", "display_name": "F Casian", "link": "https://stackoverflow.com/users/6861254/f-casian"}, "edited": false, "score": 0, "creation_date": 1484879260, "post_id": 41751956, "comment_id": 70702467, "body": "Hi @blubberdiblub thank you so much for your help. I have installed PyQt GPL v5.6 For Python 3.5. I tried to run the script you posted in PythonWin however it popup an error &quot;This application failed to start because it could not find or load the Qt platform plugin &quot;windows&quot; in &quot;&quot;.  Any idea why? Also, is the first time I use PyQt, so far, I have created a GUI (.ui) using Qt Designer, is very simple to use...  and translate into py.  Also, I was able to link one of the buttons into my test_script. however, the same question raise up, how to redirect the data from the console into my GUI"}, {"owner": {"reputation": 3757, "user_id": 794539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b694f0dd066ad600b16e4440cf0e9a91?s=128&d=identicon&r=PG", "display_name": "blubberdiblub", "link": "https://stackoverflow.com/users/794539/blubberdiblub"}, "reply_to_user": {"reputation": 93, "user_id": 6861254, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7ffc6193544f8973053ef8b00851ab1e?s=128&d=identicon&r=PG&f=1", "display_name": "F Casian", "link": "https://stackoverflow.com/users/6861254/f-casian"}, "edited": false, "score": 0, "creation_date": 1484894882, "post_id": 41751956, "comment_id": 70707045, "body": "I&#39;m not familiar with installing PyQt under Windows, sorry. Do you get the same error when you run it from the command line, making sure you CD into the script directory? Anyway, maybe those have some hints: <a href=\"http://stackoverflow.com/questions/17695027/\">stackoverflow.com/questions/17695027</a> - <a href=\"https://github.com/pyqt/python-qt5/issues/2\" rel=\"nofollow noreferrer\">github.com/pyqt/python-qt5/issues/2</a> - <a href=\"http://stackoverflow.com/questions/20495620/\">stackoverflow.com/questions/20495620</a>"}, {"owner": {"reputation": 3757, "user_id": 794539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b694f0dd066ad600b16e4440cf0e9a91?s=128&d=identicon&r=PG", "display_name": "blubberdiblub", "link": "https://stackoverflow.com/users/794539/blubberdiblub"}, "reply_to_user": {"reputation": 93, "user_id": 6861254, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7ffc6193544f8973053ef8b00851ab1e?s=128&d=identicon&r=PG&f=1", "display_name": "F Casian", "link": "https://stackoverflow.com/users/6861254/f-casian"}, "edited": false, "score": 0, "creation_date": 1484898516, "post_id": 41751956, "comment_id": 70708635, "body": "I installed Python 3.5.3 x86-64 from <a href=\"https://www.python.org/downloads/windows/\" rel=\"nofollow noreferrer\">python.org/downloads/windows</a>, doing a Custom Install for All Users into C:\\Python35\\, and having it added to the PATH Environment Variable. Then I went with the recommendation of <a href=\"https://www.riverbankcomputing.com/software/pyqt/download5\" rel=\"nofollow noreferrer\">riverbankcomputing.com/software/pyqt/download5</a> and installed PyQt using <code>pip3 install PyQt5</code> on the command line. I don&#39;t know if any of this made any difference, but both my example programs work out of the box here."}, {"owner": {"reputation": 93, "user_id": 6861254, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7ffc6193544f8973053ef8b00851ab1e?s=128&d=identicon&r=PG&f=1", "display_name": "F Casian", "link": "https://stackoverflow.com/users/6861254/f-casian"}, "edited": false, "score": 0, "creation_date": 1484955343, "post_id": 41751956, "comment_id": 70739549, "body": "Hi @blubberdiblub, thank you so much, I re-install the SW into system and is working, I followed your instructions and I can open now your script. Let me dig in to, now, the only thing I need to do is to Link my test script in to your window and embedded into PyQt5."}, {"owner": {"reputation": 93, "user_id": 6861254, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7ffc6193544f8973053ef8b00851ab1e?s=128&d=identicon&r=PG&f=1", "display_name": "F Casian", "link": "https://stackoverflow.com/users/6861254/f-casian"}, "edited": false, "score": 0, "creation_date": 1485223140, "post_id": 41751956, "comment_id": 70825748, "body": "Hi @blubberdiblub, I make it work, now is working... Finally the console output is now into a Tk. I&#39;ll try to import now into my GUI"}, {"owner": {"reputation": 93, "user_id": 6861254, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7ffc6193544f8973053ef8b00851ab1e?s=128&d=identicon&r=PG&f=1", "display_name": "F Casian", "link": "https://stackoverflow.com/users/6861254/f-casian"}, "edited": false, "score": 0, "creation_date": 1485293226, "post_id": 41751956, "comment_id": 70863810, "body": "Hi @blubberdiblub, Just to let you know ..... My Test Software Script is now WORKING as I want.... thank you so much for your help, so far I solve the problem I had and my project keep moving it...   Thank you again for all your HELP ....!!!!!!"}, {"owner": {"reputation": 3757, "user_id": 794539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b694f0dd066ad600b16e4440cf0e9a91?s=128&d=identicon&r=PG", "display_name": "blubberdiblub", "link": "https://stackoverflow.com/users/794539/blubberdiblub"}, "reply_to_user": {"reputation": 93, "user_id": 6861254, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7ffc6193544f8973053ef8b00851ab1e?s=128&d=identicon&r=PG&f=1", "display_name": "F Casian", "link": "https://stackoverflow.com/users/6861254/f-casian"}, "edited": false, "score": 0, "creation_date": 1485295310, "post_id": 41751956, "comment_id": 70864746, "body": "@FCasian you&#39;re welcome :) Maybe you could edit your question a bit, as mentioned in the comments up there, for the benefit of other users who may have the same or a similar problem?"}, {"owner": {"reputation": 93, "user_id": 6861254, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7ffc6193544f8973053ef8b00851ab1e?s=128&d=identicon&r=PG&f=1", "display_name": "F Casian", "link": "https://stackoverflow.com/users/6861254/f-casian"}, "edited": false, "score": 0, "creation_date": 1485295395, "post_id": 41751956, "comment_id": 70864780, "body": "Hi @blubberdiblub, I just edit... Please let me know what you think....  Thanks again ...!!!"}], "tags": [], "owner": {"reputation": 3757, "user_id": 794539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b694f0dd066ad600b16e4440cf0e9a91?s=128&d=identicon&r=PG", "display_name": "blubberdiblub", "link": "https://stackoverflow.com/users/794539/blubberdiblub"}, "is_accepted": false, "score": 2, "last_activity_date": 1484861842, "last_edit_date": 1484861842, "creation_date": 1484861080, "answer_id": 41751956, "question_id": 41728959, "link": "https://stackoverflow.com/questions/41728959/how-to-capture-the-output-of-a-long-running-program-and-present-it-in-a-gui-in-p/41751956#41751956", "title": "How to capture the output of a long-running program and present it in a GUI in Python?", "body": "<p>Under the assumption that the process you're calling is long-running and doesn't produce all its output in one go, it means you cannot use <code>subprocess.Popen.communicate()</code>, as that is designed to read all output up to an end of file.</p>\n\n<p>You will have to use other standard techniques to read from the pipe.</p>\n\n<p>As you want to integrate it with a GUI and the process is long-running, you will need to coordinate reading its output with the GUI's main loop. This complicates things somewhat.</p>\n\n<h1>TkInter</h1>\n\n<p>Let's first assume you want to use <strong>TkInter</strong>, as in one of your examples. That confronts us with a couple of Problems:</p>\n\n<ul>\n<li>There's no integration of TkInter with the <strong>select</strong> module.</li>\n<li>There's even no canonical integration of TkInter with <strong>asyncio</strong> as of now (also see <a href=\"https://bugs.python.org/issue27546\" rel=\"nofollow noreferrer\">https://bugs.python.org/issue27546</a>).</li>\n<li>Hacking together a custom main loop using <code>root.update()</code> is usually recommended against, leaving us solving with threading what should have been an event based approach.</li>\n<li>TkInter's <code>event_generate()</code> is missing Tk's ability to send user data along with the event, so we can't use TkInter events to pass the received output from one thread to another.</li>\n</ul>\n\n<p>Thus, we will tackle it with <strong>threading</strong> (even if I'd prefer not to), where the main thread controls the Tk GUI and a helper thread reads the output from the process, and lacking a native way in TkInter to pass data around, we utilize a thread-safe <strong>Queue</strong>.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>#!/usr/bin/env python3\n\nfrom subprocess import Popen, PIPE, STDOUT, TimeoutExpired\nfrom threading import Thread, Event\nfrom queue import Queue, Empty\nfrom tkinter import Tk, Text, END\n\n\nclass ProcessOutputReader(Thread):\n\n    def __init__(self, queue, cmd, params=(),\n                 group=None, name=None, daemon=True):\n        super().__init__(group=group, name=name, daemon=daemon)\n        self._stop_request = Event()\n        self.queue = queue\n        self.process = Popen((cmd,) + tuple(params),\n                             stdout=PIPE,\n                             stderr=STDOUT,\n                             universal_newlines=True)\n\n    def run(self):\n        for line in self.process.stdout:\n            if self._stop_request.is_set():\n                # if stopping was requested, terminate the process and bail out\n                self.process.terminate()\n                break\n\n            self.queue.put(line)  # enqueue the line for further processing\n\n        try:\n            # give process a chance to exit gracefully\n            self.process.wait(timeout=3)\n        except TimeoutExpired:\n            # otherwise try to terminate it forcefully\n            self.process.kill()\n\n    def stop(self):\n        # request the thread to exit gracefully during its next loop iteration\n        self._stop_request.set()\n\n        # empty the queue, so the thread will be woken up\n        # if it is blocking on a full queue\n        while True:\n            try:\n                self.queue.get(block=False)\n            except Empty:\n                break\n\n            self.queue.task_done()  # acknowledge line has been processed\n\n\nclass MyConsole(Text):\n\n    def __init__(self, parent, queue, update_interval=50, process_lines=500):\n        super().__init__(parent)\n        self.queue = queue\n        self.update_interval = update_interval\n        self.process_lines = process_lines\n\n        self.after(self.update_interval, self.fetch_lines)\n\n    def fetch_lines(self):\n        something_inserted = False\n\n        for _ in range(self.process_lines):\n            try:\n                line = self.queue.get(block=False)\n            except Empty:\n                break\n\n            self.insert(END, line)\n            self.queue.task_done()  # acknowledge line has been processed\n\n            # ensure scrolling the view is at most done once per interval\n            something_inserted = True\n\n        if something_inserted:\n            self.see(END)\n\n        self.after(self.update_interval, self.fetch_lines)\n\n\n# create the root widget\nroot = Tk()\n\n# create a queue for sending the lines from the process output reader thread\n# to the TkInter main thread\nline_queue = Queue(maxsize=1000)\n\n# create a process output reader\nreader = ProcessOutputReader(line_queue, 'python3', params=['-u', 'test.py'])\n\n# create a console\nconsole = MyConsole(root, line_queue)\n\nreader.start()   # start the process\nconsole.pack()   # make the console visible\nroot.mainloop()  # run the TkInter main loop\n\nreader.stop()\nreader.join(timeout=5)  # give thread a chance to exit gracefully\n\nif reader.is_alive():\n    raise RuntimeError(\"process output reader failed to stop\")\n</code></pre>\n\n<p>Due to the aforementioned caveats, the TkInter code ends up a bit on the larger side.</p>\n\n<h1>PyQt</h1>\n\n<p>Using <strong>PyQt</strong> instead, we can considerably improve our situation, as that framework already comes with a native way to integrate with a subprocess, in the shape of its <strong>QProcess</strong> class.</p>\n\n<p>That means we can do away with threads and use Qt's native <strong>Signal</strong> and <strong>Slot</strong> mechanism instead.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>#!/usr/bin/env python3\n\nimport sys\n\nfrom PyQt5.QtCore import pyqtSignal, pyqtSlot, QProcess, QTextCodec\nfrom PyQt5.QtGui import QTextCursor\nfrom PyQt5.QtWidgets import QApplication, QPlainTextEdit\n\n\nclass ProcessOutputReader(QProcess):\n    produce_output = pyqtSignal(str)\n\n    def __init__(self, parent=None):\n        super().__init__(parent=parent)\n\n        # merge stderr channel into stdout channel\n        self.setProcessChannelMode(QProcess.MergedChannels)\n\n        # prepare decoding process' output to Unicode\n        codec = QTextCodec.codecForLocale()\n        self._decoder_stdout = codec.makeDecoder()\n        # only necessary when stderr channel isn't merged into stdout:\n        # self._decoder_stderr = codec.makeDecoder()\n\n        self.readyReadStandardOutput.connect(self._ready_read_standard_output)\n        # only necessary when stderr channel isn't merged into stdout:\n        # self.readyReadStandardError.connect(self._ready_read_standard_error)\n\n    @pyqtSlot()\n    def _ready_read_standard_output(self):\n        raw_bytes = self.readAllStandardOutput()\n        text = self._decoder_stdout.toUnicode(raw_bytes)\n        self.produce_output.emit(text)\n\n    # only necessary when stderr channel isn't merged into stdout:\n    # @pyqtSlot()\n    # def _ready_read_standard_error(self):\n    #     raw_bytes = self.readAllStandardError()\n    #     text = self._decoder_stderr.toUnicode(raw_bytes)\n    #     self.produce_output.emit(text)\n\n\nclass MyConsole(QPlainTextEdit):\n\n    def __init__(self, parent=None):\n        super().__init__(parent=parent)\n\n        self.setReadOnly(True)\n        self.setMaximumBlockCount(10000)  # limit console to 10000 lines\n\n        self._cursor_output = self.textCursor()\n\n    @pyqtSlot(str)\n    def append_output(self, text):\n        self._cursor_output.insertText(text)\n        self.scroll_to_last_line()\n\n    def scroll_to_last_line(self):\n        cursor = self.textCursor()\n        cursor.movePosition(QTextCursor.End)\n        cursor.movePosition(QTextCursor.Up if cursor.atBlockStart() else\n                            QTextCursor.StartOfLine)\n        self.setTextCursor(cursor)\n\n\n# create the application instance\napp = QApplication(sys.argv)\n\n# create a process output reader\nreader = ProcessOutputReader()\n\n# create a console and connect the process output reader to it\nconsole = MyConsole()\nreader.produce_output.connect(console.append_output)\n\nreader.start('python3', ['-u', 'test.py'])  # start the process\nconsole.show()                              # make the console visible\napp.exec_()                                 # run the PyQt main loop\n</code></pre>\n\n<p>We end up with a little boilerplate deriving from the Qt classes, but with an overall cleaner approach.</p>\n\n<h1>General considerations</h1>\n\n<p>Also make sure that the process you're calling is not buffering multiple output lines, as otherwise it will still look as if the console got stuck.</p>\n\n<p>In particular if the callee is a python program, you can either ensure that it's using <code>print(..., flush=True)</code> or call it with <code>python -u callee.py</code> to enforce unbuffered output.</p>\n"}], "owner": {"reputation": 93, "user_id": 6861254, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7ffc6193544f8973053ef8b00851ab1e?s=128&d=identicon&r=PG&f=1", "display_name": "F Casian", "link": "https://stackoverflow.com/users/6861254/f-casian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2405, "favorite_count": 2, "answer_count": 1, "score": 1, "last_activity_date": 1485330823, "creation_date": 1484771713, "last_edit_date": 1485330823, "question_id": 41728959, "link": "https://stackoverflow.com/questions/41728959/how-to-capture-the-output-of-a-long-running-program-and-present-it-in-a-gui-in-p", "title": "How to capture the output of a long-running program and present it in a GUI in Python?", "body": "<p><img src=\"https://i.stack.imgur.com/wAgM7.png\" alt=\"This is what I need to embedded into my GUI \"></p>\n\n<p>I'll try to be much clear as possible.</p>\n\n<p>I have a very simple test script that control a Power Supply, the script measure some current from the Agilent Power Supply + Unit Under Test, then, the script print these readings as simple as: </p>\n\n<pre><code>PS.write(b\"MEAS:CURR? \\n\")\ntime.sleep(2)\nresponse = PS.read(1000)\ntime.sleep(3)\nprint(response)\n(float(response)*1)\nE3632A=(float(response)*1)\nprint (E3632A)\n</code></pre>\n\n<p>When the script excecute the \"print command\" (print (E3632A), all the information is displayed into the \"py.exe\" DOS Window (C:\\Windows\\py.exe). Here is my question</p>\n\n<p>How I can embedded this into a simple GUI? I want my GUI display the Data that py.exe is showing. that simple... I have read all post over the internet and none has a real solution to this.</p>\n"}, {"tags": ["python", "automatic-ref-counting", "python-imaging-library", "geometry"], "comments": [{"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 1, "creation_date": 1484774825, "post_id": 41728915, "comment_id": 70653927, "body": "Use the <a href=\"http://pillow.readthedocs.io/en/4.0.x/reference/ImageDraw.html#PIL.ImageDraw.PIL.ImageDraw.Draw.arc\" rel=\"nofollow noreferrer\"><code>PIL.ImageDraw.Draw.arc()</code></a> function."}, {"owner": {"reputation": 16330, "user_id": 6464947, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh6.googleusercontent.com/-STVPXBxpfbk/AAAAAAAAAAI/AAAAAAAAAMM/7wmzAdslc70/photo.jpg?sz=128", "display_name": "Giovanni G. PY", "link": "https://stackoverflow.com/users/6464947/giovanni-g-py"}, "reply_to_user": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 1, "creation_date": 1484932577, "post_id": 41728915, "comment_id": 70729519, "body": "Thank you, I get it now."}], "answers": [{"comments": [{"owner": {"reputation": 16330, "user_id": 6464947, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh6.googleusercontent.com/-STVPXBxpfbk/AAAAAAAAAAI/AAAAAAAAAMM/7wmzAdslc70/photo.jpg?sz=128", "display_name": "Giovanni G. PY", "link": "https://stackoverflow.com/users/6464947/giovanni-g-py"}, "edited": false, "score": 0, "creation_date": 1485276820, "post_id": 41771155, "comment_id": 70854395, "body": "Thanks, you&#39;re advice is great!"}], "tags": [], "owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "is_accepted": true, "score": 2, "last_activity_date": 1494942022, "last_edit_date": 1494942022, "creation_date": 1484941130, "answer_id": 41771155, "question_id": 41728915, "link": "https://stackoverflow.com/questions/41728915/how-can-i-draw-an-arc-using-pil/41771155#41771155", "title": "How can I draw an arc using PIL?", "body": "<p>Glad to hear you're making progress after my comment. However I'm not completely sure that you've \"got it\"...since there's no need for that <code>box=(1, 1, 90, 90)</code> statement before the <code>draw.arc()</code> call\u2014<code>box</code> being an unused variable that has no effect on the image or anything else, so might as well be removed because it's a distraction and its creation only slows things down ever so slightly.</p>\n\n<p>Although it may be inconsequential, but you should probably also make the outermost (first) ellipse drawn slightly smaller, so it will lay completely <em>within</em> the 90x90 pixel image (pixels in an image that size will have x and y coordinates values from 0 to 89). The way you're doing it, the bottom-most and rightmost pixels of this ellipse are getting cut-off.</p>\n\n<p>To illustrate what I mean, here's an (enlarged) version of the image the code now at the end of your question produces:</p>\n\n<p><a href=\"https://i.stack.imgur.com/tgYaD.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/tgYaD.png\" alt=\"OP&#39;s image enlarged\"></a></p>\n\n<hr>\n\n<p>Below is the same code with these minor corrections applied, and under that the slightly different image that it produces:</p>\n\n<pre><code>from PIL import Image\nfrom PIL import ImageDraw\n\nimage = Image.new('RGB', (90, 90), 'white')\ndraw = ImageDraw.Draw(image)\ndraw.ellipse((0, 0, 89, 89), 'yellow', 'blue')  # made this a little smaller..\ndraw.ellipse((25, 20, 35, 30), 'yellow', 'blue')\ndraw.ellipse((50, 20, 60, 30), 'yellow', 'blue')\ndraw.arc((20, 40, 70, 70), 0, 180, 'black')  # draw an arc in black\nimage.show()\n</code></pre>\n\n<p>Improved result:</p>\n\n<p><a href=\"https://i.stack.imgur.com/3VWX4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3VWX4.png\" alt=\"Image resulting from my changes (enlarged)\"></a></p>\n"}, {"comments": [{"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 1, "creation_date": 1485137610, "post_id": 41787854, "comment_id": 70784954, "body": "Looks like you&#39;ve got the hang of it (learned the proper way of doing it). Please consider accepting my answer, since it and my original comment under your question were what got you to the point you&#39;re at."}, {"owner": {"reputation": 16330, "user_id": 6464947, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh6.googleusercontent.com/-STVPXBxpfbk/AAAAAAAAAAI/AAAAAAAAAMM/7wmzAdslc70/photo.jpg?sz=128", "display_name": "Giovanni G. PY", "link": "https://stackoverflow.com/users/6464947/giovanni-g-py"}, "reply_to_user": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 1, "creation_date": 1485277008, "post_id": 41787854, "comment_id": 70854526, "body": "thank you Martineau, I also added some text to the picture, I will add it here, maybe, as I have them posted also here: <a href=\"https://pythonprogs.blogspot.com/2017/01/watermarking-images-pil.html\" rel=\"nofollow noreferrer\">my python blog</a>"}], "tags": [], "owner": {"reputation": 16330, "user_id": 6464947, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh6.googleusercontent.com/-STVPXBxpfbk/AAAAAAAAAAI/AAAAAAAAAMM/7wmzAdslc70/photo.jpg?sz=128", "display_name": "Giovanni G. PY", "link": "https://stackoverflow.com/users/6464947/giovanni-g-py"}, "is_accepted": false, "score": 1, "last_activity_date": 1485064995, "creation_date": 1485064995, "answer_id": 41787854, "question_id": 41728915, "link": "https://stackoverflow.com/questions/41728915/how-can-i-draw-an-arc-using-pil/41787854#41787854", "title": "How can I draw an arc using PIL?", "body": "<p>Thanks a lot, so I made some changes following your perfect advices:</p>\n\n<pre><code>from PIL import Image\nfrom PIL import ImageDraw\n\nimage = Image.new('RGB',(91,91),'white') # background image\ndraw = ImageDraw.Draw(image) # this makes you draw on image\ndraw.ellipse((0,0,90,90),'yellow','blue') # face\ndraw.ellipse((25,20,35,30),'yellow','blue') # left eye\ndraw.ellipse((50,20,60,30),'yellow','blue') # right eye\ndraw.arc((20,40,70,70), 0, 180, 0) # smile\nimage.show()\n</code></pre>\n\n<p>Now the image is perfectly fit in the middle of the background:</p>\n\n<p><a href=\"https://i.stack.imgur.com/pSDqz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pSDqz.png\" alt=\"enter image description here\"></a></p>\n\n<p>And here there are a couple of detail on the image that have been added:</p>\n\n<pre><code>from PIL import Image\nfrom PIL import ImageDraw\n\nimage = Image.new('RGB',(91,91),'blue')\ndraw = ImageDraw.Draw(image)\ndraw.ellipse((0,0,90,90),'yellow','blue') # face\ndraw.ellipse((25,20,35,30),'yellow','blue') # left eye\ndraw.ellipse((28,25,32,30),'blue','blue') # left ...\ndraw.ellipse((50,20,60,30),'yellow','blue') # right eye\ndraw.ellipse((53,25,58,30),'blue','blue') # right ...\ndraw.arc((40,50,50,55), 0, 360, 0) # nose\ndraw.arc((20,40,70,70), 0, 180, 0) # smile\nimage.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/GTnh4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GTnh4.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 16330, "user_id": 6464947, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh6.googleusercontent.com/-STVPXBxpfbk/AAAAAAAAAAI/AAAAAAAAAMM/7wmzAdslc70/photo.jpg?sz=128", "display_name": "Giovanni G. PY", "link": "https://stackoverflow.com/users/6464947/giovanni-g-py"}, "is_accepted": false, "score": 0, "last_activity_date": 1557829380, "last_edit_date": 1557829380, "creation_date": 1485277396, "answer_id": 41834110, "question_id": 41728915, "link": "https://stackoverflow.com/questions/41728915/how-can-i-draw-an-arc-using-pil/41834110#41834110", "title": "How can I draw an arc using PIL?", "body": "<p>As I was saying in a comment, I added some code to the previous one, also checking some other answers in stackoverflow:</p>\n\n<pre><code>from PIL import Image,ImageDraw,ImageFont\n\n# sample text and font\nunicode_text = u\"SMILE WORLD!\" # This is used to shape the image around the text size\nfont = ImageFont.truetype(\"consola.ttf\", 28, encoding=\"unic\")\nfont2 = ImageFont.truetype(\"consola.ttf\", 10, encoding=\"unic\")\n# get the line size\ntext_width, text_height = font.getsize(unicode_text)\n\n# create a blank canvas with extra space between lines\n# I added 100 to host the image and 30 for the watermark length\ncanvas = Image.new('RGB', (text_width + 30, text_height + 100), \"orange\")\n\n# draw the text onto the text canvas, and use black as the text color\ndraw = ImageDraw.Draw(canvas)\ndraw.text((5,5), unicode_text, 'blue', font) # This paste the unicode_text=u\"SMILE WORLD\"\n\ndef smile(x=30,y=30):\n    draw = ImageDraw.Draw(canvas)\n    draw.ellipse((0+x,0+y,90+x,90+y),'yellow','blue') # face\n    draw.ellipse((25+x,20+y,35+x,30+y),'yellow','blue') # left eye\n    draw.ellipse((28+x,25+y,32+x,30+y),'blue','blue') # left ...\n    draw.ellipse((50+x,20+y,60+x,30+y),'yellow','blue') # right eye\n    draw.ellipse((53+x,25+y,58+x,30+y),'blue','blue') # right ...\n    draw.arc((40+x,50+y,50+x,55+y), 0, 360, 0) # nose\n    draw.arc((20+x,40+y,70+x,70+y), 0, 180, 0) # smile\n\nsmile(60,28)    \ndraw.text((5,100), u'This image is covered by copyright', 'blue', font2)\ndraw.text((5,110), u'pythonprogramming.altervista.org', 'blue', font2)\ncanvas.show()\ncanvas.save(\"smile.png\")\n</code></pre>\n\n<p>And I get this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/C6gID.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/C6gID.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 16330, "user_id": 6464947, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh6.googleusercontent.com/-STVPXBxpfbk/AAAAAAAAAAI/AAAAAAAAAMM/7wmzAdslc70/photo.jpg?sz=128", "display_name": "Giovanni G. PY", "link": "https://stackoverflow.com/users/6464947/giovanni-g-py"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4615, "favorite_count": 0, "accepted_answer_id": 41771155, "answer_count": 3, "score": 1, "last_activity_date": 1557829380, "creation_date": 1484771547, "last_edit_date": 1517469477, "question_id": 41728915, "link": "https://stackoverflow.com/questions/41728915/how-can-i-draw-an-arc-using-pil", "title": "How can I draw an arc using PIL?", "body": "<p>I get how to draw a circle, but not an arc</p>\n\n<pre><code>from PIL import Image, ImageDraw\n\nimg = Image.new(\"RGB\",(60,60),'white')\ndr = ImageDraw.Draw(img)\ndr.ellipse((0,0,60,60),'yellow','black')\n</code></pre>\n\n<p>Now I get it, thanks for the help..</p>\n\n<pre><code>from PIL import Image\nfrom PIL import ImageDraw\n\nimage = Image.new('RGB',(90,90),'white')\ndraw = ImageDraw.Draw(image)\ndraw.ellipse((0,0,90,90),'yellow','blue')\ndraw.ellipse((25,20,35,30),'yellow','blue')\ndraw.ellipse((50,20,60,30),'yellow','blue')\ndraw.arc((20,40,70,70), 0, 180, 0) #draw circle in black\nimage.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/9wgy0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9wgy0.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "django", "postgresql", "django-rest-framework"], "answers": [{"tags": [], "owner": {"reputation": 314, "user_id": 7165725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2261fb43c813179d5510ca55117821a?s=128&d=identicon&r=PG&f=1", "display_name": "Ashish", "link": "https://stackoverflow.com/users/7165725/ashish"}, "is_accepted": true, "score": 2, "last_activity_date": 1484772650, "creation_date": 1484772650, "answer_id": 41729202, "question_id": 41728905, "link": "https://stackoverflow.com/questions/41728905/use-uuid-as-foreign-key-in-a-model-in-django-with-django-rest-framework/41729202#41729202", "title": "Use uuid as foreign Key in a model in Django with Django Rest Framework", "body": "<p>You can try </p>\n\n<pre><code>class MessageSerializer(serializers.ModelSerializer): \n    sender = serializers.ReadOnlyField(source='sender.uid')\n    recipient = serializers.ReadOnlyField(source='recipient.uid')\n\n    class Meta: \n        model = Message \n        fields = ('url', 'id', 'type', 'content', 'sender', 'recipient', 'url_profile_image')\n</code></pre>\n"}], "owner": {"reputation": 1668, "user_id": 4050960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2433d3125076f5789fe82a2eae87fdd1?s=128&d=identicon&r=PG&f=1", "display_name": "Chuck Aguilar", "link": "https://stackoverflow.com/users/4050960/chuck-aguilar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1200, "favorite_count": 1, "accepted_answer_id": 41729202, "answer_count": 1, "score": 2, "last_activity_date": 1484772650, "creation_date": 1484771506, "question_id": 41728905, "link": "https://stackoverflow.com/questions/41728905/use-uuid-as-foreign-key-in-a-model-in-django-with-django-rest-framework", "title": "Use uuid as foreign Key in a model in Django with Django Rest Framework", "body": "<p>I don't know if the title of the post is right. I'll explain what I want to do and you could tell me what's the best way. </p>\n\n<p>I want to have an \"id\" (Int) as Primary Key and a \"uuid\" (uuid) as field in my User model. So, I want to link the tables with the \"id\", because it's faster, but I want that the front end just see the \"uuid\" and never the \"id\", because is a bit safer. </p>\n\n<p>My problem is that I've a \"message\" model. It looks so:</p>\n\n<pre><code>class Message(models.Model):\n    created = models.DateTimeField(auto_now_add=True)\n\n    type = models.CharField(_('type'), choices=MESSAGE_TYPE, default='Invitation', max_length=100)\n    content = models.TextField(_('content'), blank=False)\n    sender = models.ForeignKey(User, related_name='sender_message', verbose_name=_(\"Sender\"), )\n    recipient = models.ForeignKey(User, related_name='receiver_message', null=True, blank=True,\n                                  verbose_name=_(\"Recipient\"))\n    url_profile_image = models.URLField(_('url_profile_image'), max_length=500, blank=True, default='')\n\n    class Meta:\n        ordering = ('created',)\n</code></pre>\n\n<p>And as you can see, \"sender\" and \"recipient\" are linked to my User with a <em>ForeignKey</em>. But that <em>ForeignKey</em> returns as the user Id. </p>\n\n<pre><code>  {\n    \"url\": \"http://127.0.0.1:8000/users/messages/4/\",\n    \"id\": 4,\n    \"type\": \"invitation_accepted\",\n    \"content\": \"Sure\",\n    \"sender\": 4,\n    \"recipient\": 1,\n    \"url_profile_image\": \"\"\n  }\n</code></pre>\n\n<p>4 is the id of the \"sender\" and 1 is the id of the \"recipient\". But I would like that the front end just see the \"uuid\" of the sender and the \"uuid\" of the recipient. </p>\n\n<p>My serializer looks so:</p>\n\n<pre><code>class MessageSerializer(serializers.ModelSerializer):\n\n    class Meta:\n        model = Message\n        fields = ('url', 'id', 'type', 'content', 'sender', 'recipient', 'url_profile_image')\n</code></pre>\n\n<p>So, I thought that maybe there're two ways to do what I want. </p>\n\n<p>Either use the uuid as Foreign Key or do something in the serializer and get the uuid of the user and return it in \"sender\" and \"recipient\".</p>\n\n<p>My view is quite simple:</p>\n\n<pre><code>class MessageViewSet(viewsets.ModelViewSet):\n    queryset = Message.objects.all()\n    serializer_class = MessageSerializer\n</code></pre>\n\n<p>(don't worry about the queryset, it looks crazy, but it's so :) that kind of message is not private :D )</p>\n\n<p>Maybe someone can help me. </p>\n"}, {"tags": ["python", "django", "python-2.7", "request", "pickle"], "answers": [{"tags": [], "owner": {"reputation": 616, "user_id": 6520247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a04750b63da8174ae73063d76597225?s=128&d=identicon&r=PG", "display_name": "yummies", "link": "https://stackoverflow.com/users/6520247/yummies"}, "is_accepted": false, "score": 0, "last_activity_date": 1484777945, "creation_date": 1484777945, "answer_id": 41730466, "question_id": 41728882, "link": "https://stackoverflow.com/questions/41728882/django-pickle-object-saved-for-calculations-on-request/41730466#41730466", "title": "Django pickle object saved for calculations on request", "body": "<p>Consider utilizing a <a href=\"https://docs.djangoproject.com/en/dev/topics/cache/\" rel=\"nofollow noreferrer\">caching backend</a>. It's intended for this exact purpose, and offers the desired persistence you're looking for. A tempting alternative might be a global variable established in some python file, however its value will not necessarily be consistent between requests when changes are made to it.</p>\n\n<p>The ideal production caching solution would utilize a caching server like <a href=\"https://memcached.org/\" rel=\"nofollow noreferrer\">Memcached</a> or <a href=\"https://redis.io/\" rel=\"nofollow noreferrer\">Redis</a>, providing the best performance. However these solutions will require installation and (the level of which depending on your needs) maintenance since they are server software, similar to your database or web server.</p>\n\n<p>For a demo application the database caching backend might be the best, since it has no significant additional requirements, beyond whatever database you're already using for the application.</p>\n"}], "owner": {"reputation": 1293, "user_id": 812042, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/ec3054d168ac699a9de2de7477ecc0bf?s=128&d=identicon&r=PG&f=1", "display_name": "Waheed Khan", "link": "https://stackoverflow.com/users/812042/waheed-khan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 153, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1484777945, "creation_date": 1484771433, "question_id": 41728882, "link": "https://stackoverflow.com/questions/41728882/django-pickle-object-saved-for-calculations-on-request", "title": "Django pickle object saved for calculations on request", "body": "<p>I am making a small demo django application where there are some calculations for which I need to retrieve a complex object. I have saved the object to a file using Pickle. Now I want to keep the object in memory so that it is not retrieved for every request. Where can I load the object so that it remains there and is available for any request. There are some parameters passed with requests that are needed for calculation. The object is not related to Models.</p>\n"}, {"tags": ["python", "python-3.x", "text-files"], "comments": [{"owner": {"reputation": 22847, "user_id": 1290438, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b689dcfa3833cb016dfbc4cc82bb0eae?s=128&d=identicon&r=PG", "display_name": "zmo", "link": "https://stackoverflow.com/users/1290438/zmo"}, "edited": false, "score": 1, "creation_date": 1484771567, "post_id": 41728856, "comment_id": 70652193, "body": "ok, your question is unclear here. <code>if line[10] == 4:</code> will never be true\u2026 neither <code>line[10] == &#39;4&#39;</code> (i.e. the character <code>4</code>) or is it equal to the integer 4."}], "answers": [{"comments": [{"owner": {"reputation": 22847, "user_id": 1290438, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b689dcfa3833cb016dfbc4cc82bb0eae?s=128&d=identicon&r=PG", "display_name": "zmo", "link": "https://stackoverflow.com/users/1290438/zmo"}, "edited": false, "score": 0, "creation_date": 1484771658, "post_id": 41728919, "comment_id": 70652238, "body": "I don&#39;t think this is what the OP is asking. He&#39;s not asking how to iterate over values 4 at each iteration. And even if he is, your solution is not best, as you can do <code>for i in line[0::4]</code>."}], "tags": [], "owner": {"reputation": 4834, "user_id": 3258333, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/098143299cdb9f29251020ccb6706816?s=128&d=identicon&r=PG&f=1", "display_name": "furkle", "link": "https://stackoverflow.com/users/3258333/furkle"}, "is_accepted": false, "score": -1, "last_activity_date": 1484771765, "last_edit_date": 1484771765, "creation_date": 1484771560, "answer_id": 41728919, "question_id": 41728856, "link": "https://stackoverflow.com/questions/41728856/skip-over-lines-in-python/41728919#41728919", "title": "Skip over lines in python", "body": "<p>One way you could do this is with a while loop. Here's an example:</p>\n\n<pre><code>i = 0\nwhile i &lt; 20:\n  print(i)\n  i += 4`\n</code></pre>\n\n<p>This prints</p>\n\n<pre><code>0\n4\n8\n12\n16`\n</code></pre>\n\n<p>I'm not entirely sure that I understand <em>where</em> and <em>why</em> you're trying to skip lines, so if you can provide that information, I can change the code to be more what you need.</p>\n"}, {"tags": [], "owner": {"reputation": 39529, "user_id": 2063361, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/jB77z.jpg?s=128&g=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/2063361/anonymous"}, "is_accepted": false, "score": 1, "last_activity_date": 1484771989, "last_edit_date": 1484771989, "creation_date": 1484771650, "answer_id": 41728942, "question_id": 41728856, "link": "https://stackoverflow.com/questions/41728856/skip-over-lines-in-python/41728942#41728942", "title": "Skip over lines in python", "body": "<p>In order to achieve this, you may iterate over the <em>index</em> of the file using <code>while</code> as:</p>\n\n<pre><code>i = 0   # initialize counter\nfile_lines = f.readlines()  # It contains the list of all the lines\n\nwhile i &lt; len(file_lines):\n    line = file_lines[i].strip()  # stripped content of `i`th line\n    if line[10].isdigit():  # check if 10th character is digit\n        match = line[10]\n        # Do something\n\n        i += int(match)    # increment the counter by 10\n    else:\n        i += 1\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 22847, "user_id": 1290438, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b689dcfa3833cb016dfbc4cc82bb0eae?s=128&d=identicon&r=PG", "display_name": "zmo", "link": "https://stackoverflow.com/users/1290438/zmo"}, "edited": false, "score": 1, "creation_date": 1484771713, "post_id": 41728947, "comment_id": 70652261, "body": "I think this is the closest answer we can come up with, BUT <code>line[10] == 4</code> still does not makes sense!"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1484771735, "post_id": 41728947, "comment_id": 70652276, "body": "in which case, why create the listcomp in the first place? why not <code>for line in f</code>, simply."}, {"owner": {"reputation": 73988, "user_id": 1639625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4224d1458a149d37b56a53115656f4df?s=128&d=identicon&r=PG", "display_name": "tobias_k", "link": "https://stackoverflow.com/users/1639625/tobias-k"}, "edited": false, "score": 0, "creation_date": 1484771742, "post_id": 41728947, "comment_id": 70652279, "body": "Nice, just two points: No need for <code>_ = ...</code>, and <code>f</code> (the file) is already an iterator, so you could just use that."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1484771793, "post_id": 41728947, "comment_id": 70652298, "body": "<code>if line[10] == &#39;4&#39;:</code> would make better sense (or something similar)"}, {"owner": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "reply_to_user": {"reputation": 73988, "user_id": 1639625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4224d1458a149d37b56a53115656f4df?s=128&d=identicon&r=PG", "display_name": "tobias_k", "link": "https://stackoverflow.com/users/1639625/tobias-k"}, "edited": false, "score": 0, "creation_date": 1484771994, "post_id": 41728947, "comment_id": 70652406, "body": "@tobias_k I&#39;m using <code>_ = ...</code> because if python is being used in interactive mode, then the return value is printed to the console if it isn&#39;t caught, which kind of ruins the point of the demonstration.  You&#39;re right that files are iterators, but lists aren&#39;t which is what the Op is using at the moment.  I agree that his conditional doesn&#39;t make any sense"}], "tags": [], "owner": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "is_accepted": false, "score": 2, "last_activity_date": 1484771662, "creation_date": 1484771662, "answer_id": 41728947, "question_id": 41728856, "link": "https://stackoverflow.com/questions/41728856/skip-over-lines-in-python/41728947#41728947", "title": "Skip over lines in python", "body": "<p>Try turning <code>alist</code> into an iterable, then you can discard the values you don't want by calling <code>next</code></p>\n\n<pre><code>alist = [line.rstrip() for line in f]\nit = iter(alist)\nfor line in it:\n    print(line)\n    if line[10] == 4:\n        for i in range(4):\n            try: \n                _ = next(it)\n            except StopIteration:\n                break\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7437687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb43450ee381e15af7828f3f2ed1290b?s=128&d=identicon&r=PG&f=1", "display_name": "JCole", "link": "https://stackoverflow.com/users/7437687/jcole"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3293, "favorite_count": 0, "closed_date": 1484771864, "answer_count": 3, "score": 0, "last_activity_date": 1484771989, "creation_date": 1484771316, "question_id": 41728856, "link": "https://stackoverflow.com/questions/41728856/skip-over-lines-in-python", "closed_reason": "Duplicate", "title": "Skip over lines in python", "body": "<p>I am reading in a file in python:</p>\n\n<pre><code>alist = [line.rstrip() for line in f]\n  for line in alist:\n    if line[10] == 4:\n       hop over 4 lines\n</code></pre>\n\n<p>Example of the text file:</p>\n\n<ul>\n<li>line1</li>\n<li>line2</li>\n<li>line3</li>\n<li>line4</li>\n<li>line has 4 blabla</li>\n<li>line want to skip over</li>\n<li>line want to skip over</li>\n<li>line want to skip over</li>\n<li>line want to skip over</li>\n</ul>\n\n<p>When the 10 element in a line is x (some number 1,2,3,4,..) I want to hop over the equal amount of lines. I have searched for an answer for a long time but I can't find anything, help please!</p>\n"}, {"tags": ["python", "pandas", "matplotlib", "plot"], "answers": [{"tags": [], "owner": {"reputation": 536, "user_id": 3727951, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/givuT.jpg?s=128&g=1", "display_name": "PrestonH", "link": "https://stackoverflow.com/users/3727951/prestonh"}, "is_accepted": true, "score": 2, "last_activity_date": 1484773151, "creation_date": 1484773151, "answer_id": 41729320, "question_id": 41728843, "link": "https://stackoverflow.com/questions/41728843/adding-utc-time-axis-to-plot-with-local-time-in-time-format/41729320#41729320", "title": "Adding UTC time axis to plot with local time in time format", "body": "<p>I got it to work by explicitly setting the x-axis tick labels rather than letting matplotlib decide. This can be done with:</p>\n\n<p><code>ax.set_xticks([2*60*60*i for i in range(0,13)])</code></p>\n\n<p>This has the added benefit that the listed times aren't random; you can set the increments to be one hour, 2 hours, ... In the above snippet, the <code>2*</code> part indicates 2 hour increments.</p>\n\n<p>Then, in the rest of the code you need to copy the axis over to ax2, and manually set the labels. Here's how I did that:</p>\n\n<pre><code># Begin solution\n\nax.set_xticks([2*60*60*i for i in range(0,13)])\n\nlocal_ticks = ax.get_xticks().tolist()\nlabels = [str(datetime.timedelta(seconds=(second+6*60*60))) for second in local_ticks]\n\nax2 = ax.twiny()\nplt.sca(ax2)\nax2.set_xlabel('UTC time')\nplt.xticks(local_ticks, labels)\n</code></pre>\n\n<p>Here's the final image: </p>\n\n<p><a href=\"https://i.stack.imgur.com/TW66r.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/TW66r.png\" alt=\"enter image description here\"></a></p>\n\n<p>Changing the '1 day' part in the above axis can be done manually with string parsing.</p>\n\n<p>Actually, the easiest fix is to simply add <code>ax2.set_xticks(ax.get_xticks())</code>. I think that the problem is that you don't explicity state the xticks for axis 1, but you do for axis 2; by the time the plot is created, the xticks have been recalculated while the xticks for axis 2 remain the same.</p>\n"}], "owner": {"reputation": 1599, "user_id": 5636510, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/09b361064433b5c7272b92f4a0c6a8ee?s=128&d=identicon&r=PG&f=1", "display_name": "Eric Hansen", "link": "https://stackoverflow.com/users/5636510/eric-hansen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 740, "favorite_count": 0, "accepted_answer_id": 41729320, "answer_count": 1, "score": 2, "last_activity_date": 1484773151, "creation_date": 1484771245, "last_edit_date": 1484771908, "question_id": 41728843, "link": "https://stackoverflow.com/questions/41728843/adding-utc-time-axis-to-plot-with-local-time-in-time-format", "title": "Adding UTC time axis to plot with local time in time format", "body": "<p>I have a DataFrame plot which looks something like this </p>\n\n<p><a href=\"https://i.stack.imgur.com/gl6cP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gl6cP.png\" alt=\"enter image description here\"></a></p>\n\n<p>The index on the plotted DataFrame is as follows </p>\n\n<pre><code>In[102]: res.index\nOut[102]: \nIndex([00:00:00, 00:05:00, 00:10:00, 00:15:00, 00:20:00, 00:25:00, 00:30:00,\n       00:35:00, 00:40:00, 00:45:00,\n       ...\n       23:10:00, 23:15:00, 23:20:00, 23:25:00, 23:30:00, 23:35:00, 23:40:00,\n       23:45:00, 23:50:00, 23:55:00],\n      dtype='object', name='time', length=288)\n</code></pre>\n\n<p>The times depicted on the x-axis are in Central Standard Time, and I would like to add a secondary x-axis to the top of the plot with the corresponding UTC times. I'm aware that this will make the numbers go <code>6:00 ... 22:00 ... 4:00</code> but that is fine. <strong>How can I do so</strong>?</p>\n\n<hr>\n\n<h3>My attempts</h3>\n\n<p>I know that a second x-axis can be created with the following, and I managed to procure what seems like the <code>xticks</code> from the first x-axis with the following - my next step was going to be to try to determine how to shift these times to UTC - which I am still unsure on ideas for. </p>\n\n<pre><code>ax2 = ax.twiny()\nax2.set_xlabel('UTC time')\nlocal_ticks = ax.get_xticks().tolist()\n</code></pre>\n\n<p>However upon plotting this rudimentary step, I found that <code>get_xticks()</code> has yielded one extra tick than the original x-axis, and so they are not aligned. </p>\n\n<p><a href=\"https://i.stack.imgur.com/x0X1L.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/x0X1L.png\" alt=\"enter image description here\"></a></p>\n\n<p>Correspondingly, treating these as seconds and attempting to perform some further manipulations to go seconds->CST->UTC is still going to leave me with the ugly scaling \"double white-line\" at each tick. Ideally, I want the <em>exact same</em> ticks along the secondary x-axis, except with appropriately labelled UTC times. </p>\n\n<hr>\n\n<h3>Sample generation</h3>\n\n<p>If you want to generate a plot like the first one I provided, I threw this together. </p>\n\n<pre><code>import datetime\n\nimport numpy as np\nimport random\nimport pandas as pd\nimport matplotlib.pyplot as plt\nplt.style.use('ggplot')\nstart_date = datetime.datetime(2016, 9, 5)\nend_date = datetime.datetime.now()\n\ndts = []\ncur_date = start_date \nwhile cur_date &lt; end_date:\n    dts.append((cur_date, np.random.uniform(low=0.0, high=12.0)))\n    cur_date += datetime.timedelta(minutes=np.random.uniform(10, 20))\ndts = pd.DataFrame(dts, columns=['timestamp', 'lag'])\ndts.index = dts.timestamp\ndts.drop('timestamp', axis=1, inplace=True)\n\ncur_time = datetime.datetime(1, 1, 1, 0, 0)\naggs = []\nwhile cur_time &lt; datetime.datetime(1, 1, 1, 23, 59, 0):\n    aggs.append((cur_time.time(), \n                dts.between_time(cur_time.time(),\n                (cur_time + datetime.timedelta(minutes=5)).time(), \n                include_end=False)['lag'].mean()))\n    cur_time += datetime.timedelta(minutes=5)\n\nres = pd.DataFrame(aggs, columns = ['time', 'lag'])\nres.index = res.time\nres.drop('time', axis=1, inplace=True)\n\nax = res.plot(figsize=(15, 10))\n</code></pre>\n"}, {"tags": ["python", "python-2.7", "pandas"], "comments": [{"owner": {"reputation": 26457, "user_id": 624829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95e50fdfbe4cb4f3715d82a2e7e46cb8?s=128&d=identicon&r=PG", "display_name": "Boud", "link": "https://stackoverflow.com/users/624829/boud"}, "edited": false, "score": 0, "creation_date": 1484771309, "post_id": 41728798, "comment_id": 70652074, "body": "what does <code>df[df.channel != df.channel.fillna(&#39;Unknown&#39;)]</code> returns?"}, {"owner": {"reputation": 26457, "user_id": 624829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95e50fdfbe4cb4f3715d82a2e7e46cb8?s=128&d=identicon&r=PG", "display_name": "Boud", "link": "https://stackoverflow.com/users/624829/boud"}, "edited": false, "score": 1, "creation_date": 1484771420, "post_id": 41728798, "comment_id": 70652125, "body": "I suspect it replaces nothing, as the inplace code you write is supposed to work if you df is not already a view"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1484771445, "post_id": 41728798, "comment_id": 70652138, "body": "&quot;inplace : boolean, default False      If True, fill in place. Note: this will modify any other views on this object, (e.g. a no-copy slice for a column in a DataFrame).&quot;. Would that be the core of the problem?"}, {"owner": {"reputation": 56440, "user_id": 2285236, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5ac8c2e0f71dbd8cf4543039bebf2ab3?s=128&d=identicon&r=PG&f=1", "display_name": "ayhan", "link": "https://stackoverflow.com/users/2285236/ayhan"}, "edited": false, "score": 1, "creation_date": 1484771447, "post_id": 41728798, "comment_id": 70652140, "body": "Can you check <code>df.is_copy</code> and <code>df._is_view</code>?"}, {"owner": {"reputation": 52286, "user_id": 850781, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/pwfBo.jpg?s=128&g=1", "display_name": "sds", "link": "https://stackoverflow.com/users/850781/sds"}, "reply_to_user": {"reputation": 26457, "user_id": 624829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95e50fdfbe4cb4f3715d82a2e7e46cb8?s=128&d=identicon&r=PG", "display_name": "Boud", "link": "https://stackoverflow.com/users/624829/boud"}, "edited": false, "score": 0, "creation_date": 1484771453, "post_id": 41728798, "comment_id": 70652142, "body": "@Boud : it returns a <code>[24740 rows x 70 columns]</code> dataframe."}, {"owner": {"reputation": 52286, "user_id": 850781, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/pwfBo.jpg?s=128&g=1", "display_name": "sds", "link": "https://stackoverflow.com/users/850781/sds"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1484771568, "post_id": 41728798, "comment_id": 70652195, "body": "@Jean-Fran&#231;oisFabre: this means that <code>inplace=True</code> might modify <i>MORE</i> that I expect. It modifies <i>LESS</i>."}, {"owner": {"reputation": 52286, "user_id": 850781, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/pwfBo.jpg?s=128&g=1", "display_name": "sds", "link": "https://stackoverflow.com/users/850781/sds"}, "reply_to_user": {"reputation": 56440, "user_id": 2285236, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5ac8c2e0f71dbd8cf4543039bebf2ab3?s=128&d=identicon&r=PG&f=1", "display_name": "ayhan", "link": "https://stackoverflow.com/users/2285236/ayhan"}, "edited": false, "score": 0, "creation_date": 1484771692, "post_id": 41728798, "comment_id": 70652254, "body": "@ayhan: <code>is_copy=None, is_view=False</code>"}, {"owner": {"reputation": 56440, "user_id": 2285236, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5ac8c2e0f71dbd8cf4543039bebf2ab3?s=128&d=identicon&r=PG&f=1", "display_name": "ayhan", "link": "https://stackoverflow.com/users/2285236/ayhan"}, "edited": false, "score": 1, "creation_date": 1484772303, "post_id": 41728798, "comment_id": 70652560, "body": "I could only reproduce by first assigning a column using dot notation (then with brackets). Does <code>df[&#39;channel&#39;].fillna(&quot;Unknown&quot;,inplace=True)</code>  do the same?"}, {"owner": {"reputation": 52286, "user_id": 850781, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/pwfBo.jpg?s=128&g=1", "display_name": "sds", "link": "https://stackoverflow.com/users/850781/sds"}, "reply_to_user": {"reputation": 56440, "user_id": 2285236, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5ac8c2e0f71dbd8cf4543039bebf2ab3?s=128&d=identicon&r=PG&f=1", "display_name": "ayhan", "link": "https://stackoverflow.com/users/2285236/ayhan"}, "edited": false, "score": 0, "creation_date": 1484772437, "post_id": 41728798, "comment_id": 70652643, "body": "@ayhan: same behavior as before. how is <code>df[&#39;channel&#39;]</code> different from <code>df.channel</code> here?"}, {"owner": {"reputation": 52286, "user_id": 850781, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/pwfBo.jpg?s=128&g=1", "display_name": "sds", "link": "https://stackoverflow.com/users/850781/sds"}, "reply_to_user": {"reputation": 56440, "user_id": 2285236, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5ac8c2e0f71dbd8cf4543039bebf2ab3?s=128&d=identicon&r=PG&f=1", "display_name": "ayhan", "link": "https://stackoverflow.com/users/2285236/ayhan"}, "edited": false, "score": 0, "creation_date": 1484772577, "post_id": 41728798, "comment_id": 70652747, "body": "@ayhan: how did you reproduce it?!!!"}, {"owner": {"reputation": 56440, "user_id": 2285236, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5ac8c2e0f71dbd8cf4543039bebf2ab3?s=128&d=identicon&r=PG&f=1", "display_name": "ayhan", "link": "https://stackoverflow.com/users/2285236/ayhan"}, "edited": false, "score": 0, "creation_date": 1484772741, "post_id": 41728798, "comment_id": 70652849, "body": "<code>df.channel</code>  may refer to an attribute (created by mistake) instead of a column. It&#39;s a long shot but happens to me sometimes <a href=\"http://imgur.com/a/C3o07\" rel=\"nofollow noreferrer\">imgur.com/a/C3o07</a>"}, {"owner": {"reputation": 52286, "user_id": 850781, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/pwfBo.jpg?s=128&g=1", "display_name": "sds", "link": "https://stackoverflow.com/users/850781/sds"}, "reply_to_user": {"reputation": 56440, "user_id": 2285236, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5ac8c2e0f71dbd8cf4543039bebf2ab3?s=128&d=identicon&r=PG&f=1", "display_name": "ayhan", "link": "https://stackoverflow.com/users/2285236/ayhan"}, "edited": false, "score": 0, "creation_date": 1484773691, "post_id": 41728798, "comment_id": 70653377, "body": "@ayhan: if <code>channel</code> were an attribute, it would not have been listed by <code>df.info</code> as a column."}, {"owner": {"reputation": 26457, "user_id": 624829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95e50fdfbe4cb4f3715d82a2e7e46cb8?s=128&d=identicon&r=PG", "display_name": "Boud", "link": "https://stackoverflow.com/users/624829/boud"}, "reply_to_user": {"reputation": 56440, "user_id": 2285236, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5ac8c2e0f71dbd8cf4543039bebf2ab3?s=128&d=identicon&r=PG&f=1", "display_name": "ayhan", "link": "https://stackoverflow.com/users/2285236/ayhan"}, "edited": false, "score": 1, "creation_date": 1484774178, "post_id": 41728798, "comment_id": 70653623, "body": "@ayhan you&#39;re right. <code>df.channel = pd.Series(...)</code>, followed by <code>df[&#39;channel&#39;] = pd.Series(...)</code> leads to that weird behavior for me too"}, {"owner": {"reputation": 52286, "user_id": 850781, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/pwfBo.jpg?s=128&g=1", "display_name": "sds", "link": "https://stackoverflow.com/users/850781/sds"}, "reply_to_user": {"reputation": 56440, "user_id": 2285236, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5ac8c2e0f71dbd8cf4543039bebf2ab3?s=128&d=identicon&r=PG&f=1", "display_name": "ayhan", "link": "https://stackoverflow.com/users/2285236/ayhan"}, "edited": false, "score": 0, "creation_date": 1484780068, "post_id": 41728798, "comment_id": 70656212, "body": "@ayhan: duplicate column names are the culprit, please see my answer"}], "answers": [{"comments": [{"owner": {"reputation": 52286, "user_id": 850781, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/pwfBo.jpg?s=128&g=1", "display_name": "sds", "link": "https://stackoverflow.com/users/850781/sds"}, "edited": false, "score": 0, "creation_date": 1484774842, "post_id": 41729618, "comment_id": 70653938, "body": "if <code>channel</code> were an attribute, it would not have been listed by <code>df.info</code> as a column."}, {"owner": {"reputation": 26457, "user_id": 624829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95e50fdfbe4cb4f3715d82a2e7e46cb8?s=128&d=identicon&r=PG", "display_name": "Boud", "link": "https://stackoverflow.com/users/624829/boud"}, "reply_to_user": {"reputation": 52286, "user_id": 850781, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/pwfBo.jpg?s=128&g=1", "display_name": "sds", "link": "https://stackoverflow.com/users/850781/sds"}, "edited": false, "score": 0, "creation_date": 1484774871, "post_id": 41729618, "comment_id": 70653951, "body": "I&#39;m saying you did both"}, {"owner": {"reputation": 26457, "user_id": 624829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95e50fdfbe4cb4f3715d82a2e7e46cb8?s=128&d=identicon&r=PG", "display_name": "Boud", "link": "https://stackoverflow.com/users/624829/boud"}, "reply_to_user": {"reputation": 52286, "user_id": 850781, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/pwfBo.jpg?s=128&g=1", "display_name": "sds", "link": "https://stackoverflow.com/users/850781/sds"}, "edited": false, "score": 0, "creation_date": 1484775949, "post_id": 41729618, "comment_id": 70654511, "body": "Search in your code if it is the case. What I guarantee you is ayhan mentioning this in the comment thread above, thus I tried and I reproduce the issue too."}, {"owner": {"reputation": 26457, "user_id": 624829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95e50fdfbe4cb4f3715d82a2e7e46cb8?s=128&d=identicon&r=PG", "display_name": "Boud", "link": "https://stackoverflow.com/users/624829/boud"}, "reply_to_user": {"reputation": 52286, "user_id": 850781, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/pwfBo.jpg?s=128&g=1", "display_name": "sds", "link": "https://stackoverflow.com/users/850781/sds"}, "edited": false, "score": 0, "creation_date": 1484777031, "post_id": 41729618, "comment_id": 70655033, "body": "Can I suggest a test where you replace all instances in your code from <code>df.channel</code> to <code>df[&#39;channel&#39;]</code> and see what&#39;s going on?"}, {"owner": {"reputation": 52286, "user_id": 850781, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/pwfBo.jpg?s=128&g=1", "display_name": "sds", "link": "https://stackoverflow.com/users/850781/sds"}, "edited": false, "score": 0, "creation_date": 1484777181, "post_id": 41729618, "comment_id": 70655090, "body": "the first and only access to the column is <code>df.channel.fillna</code>. The <code>df</code> is returned by <code>sqlalchemy</code>"}, {"owner": {"reputation": 52286, "user_id": 850781, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/pwfBo.jpg?s=128&g=1", "display_name": "sds", "link": "https://stackoverflow.com/users/850781/sds"}, "edited": false, "score": 0, "creation_date": 1484780003, "post_id": 41729618, "comment_id": 70656198, "body": "upvoted because it creates the described behavior, but it was <i>not</i> the cause of my specific problem."}], "tags": [], "owner": {"reputation": 26457, "user_id": 624829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95e50fdfbe4cb4f3715d82a2e7e46cb8?s=128&d=identicon&r=PG", "display_name": "Boud", "link": "https://stackoverflow.com/users/624829/boud"}, "is_accepted": true, "score": 1, "last_activity_date": 1484774362, "creation_date": 1484774362, "answer_id": 41729618, "question_id": 41728798, "link": "https://stackoverflow.com/questions/41728798/pandas-fillna-ignores-the-inplace-true-keyword/41729618#41729618", "title": "Pandas &quot;fillna&quot; ignores the &quot;inplace=True&quot; keyword", "body": "<p>From the <a href=\"http://pandas.pydata.org/pandas-docs/stable/indexing.html#attribute-access\" rel=\"nofollow noreferrer\">documentation</a>:</p>\n\n<blockquote>\n  <p>You can use attribute access to modify an existing element of a Series\n  or column of a DataFrame, but be careful; if you try to use attribute\n  access to create a new column, it fails silently, creating a new\n  attribute rather than a new column.</p>\n</blockquote>\n\n<p>We suspect you assigned <code>df.channel</code> first, then <code>df['channel']</code> and this creates the unexpected behavior.</p>\n"}, {"tags": [], "owner": {"reputation": 52286, "user_id": 850781, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/pwfBo.jpg?s=128&g=1", "display_name": "sds", "link": "https://stackoverflow.com/users/850781/sds"}, "is_accepted": false, "score": 1, "last_activity_date": 1484779897, "creation_date": 1484779897, "answer_id": 41730900, "question_id": 41728798, "link": "https://stackoverflow.com/questions/41728798/pandas-fillna-ignores-the-inplace-true-keyword/41730900#41730900", "title": "Pandas &quot;fillna&quot; ignores the &quot;inplace=True&quot; keyword", "body": "<p>The reason turned out to be the following <code>sqlalchemy</code> query:</p>\n\n<pre><code>select *\nfrom table1 \njoin table2 \non table1.id = table2.id\n</code></pre>\n\n<p>The resulting DF has two columns named <code>id</code> and a total havoc ensues.</p>\n\n<p>Solution:</p>\n\n<pre><code>select *\nfrom table1 \njoin (select id as id2, ... from table2) t2 \non table1.id = t2.id2\n</code></pre>\n"}], "owner": {"reputation": 52286, "user_id": 850781, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/pwfBo.jpg?s=128&g=1", "display_name": "sds", "link": "https://stackoverflow.com/users/850781/sds"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 692, "favorite_count": 0, "accepted_answer_id": 41729618, "answer_count": 2, "score": 1, "last_activity_date": 1484779897, "creation_date": 1484771050, "last_edit_date": 1484773853, "question_id": 41728798, "link": "https://stackoverflow.com/questions/41728798/pandas-fillna-ignores-the-inplace-true-keyword", "title": "Pandas &quot;fillna&quot; ignores the &quot;inplace=True&quot; keyword", "body": "<p>I have a <code>DataFrame</code> (fairly large, hard to reproduce &amp;c), for which I observe this behavior:</p>\n\n<pre><code>&gt;&gt;&gt; df.info(verbose=True,memory_usage=True,null_counts=True)\n&lt;class 'pandas.core.frame.DataFrame'&gt;\nInt64Index: 49841 entries, 0 to 49878\nData columns (total 70 columns):\n...\nchannel                                25101 non-null object\n...\ndtypes: bool(10), datetime64[ns](6), float64(2), int64(32), object(20)\nmemory usage: 23.7+ MB\n&gt;&gt;&gt; df.channel.fillna(\"Unknown\",inplace=True)\n&gt;&gt;&gt; df.info(verbose=True,memory_usage=True,null_counts=True)\n&lt;class 'pandas.core.frame.DataFrame'&gt;\nInt64Index: 49841 entries, 0 to 49878\nData columns (total 70 columns):\n...\nchannel                                25101 non-null object\n...\ndtypes: bool(10), datetime64[ns](6), float64(2), int64(32), object(20)\nmemory usage: 23.7+ MB\n</code></pre>\n\n<p>IOW, it appears that <code>df.channel.fillna(\"Unknown\",inplace=True)</code> has no effect.</p>\n\n<p>How can that be? \nIs this a bug?\nWhat am I doing wrong?!</p>\n\n<p>PS. Summary from the comments:</p>\n\n<ul>\n<li><code>df.is_copy</code> is <code>None</code></li>\n<li><code>df._is_view</code> is <code>False</code></li>\n<li><code>channel</code> is a column, not an attribute, because it is listed by <code>info</code></li>\n</ul>\n"}, {"tags": ["python", "networking", "server"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1484771032, "post_id": 41728771, "comment_id": 70651946, "body": "I would try to change the port number. if it works, well, that&#39;s because the previous port was already allocated."}, {"owner": {"reputation": 53, "user_id": 7118493, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/af95baede8e75608320fb039b0391549?s=128&d=identicon&r=PG&f=1", "display_name": "Dylan Haigh", "link": "https://stackoverflow.com/users/7118493/dylan-haigh"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1484771101, "post_id": 41728771, "comment_id": 70651981, "body": "@Jean-Fran&#231;oisFabre, that was I thought the solution might be, but I&#39;ve tried that numerous times to no avail"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1484771212, "post_id": 41728771, "comment_id": 70652036, "body": "okay, let the network experts answer. I don&#39;t qualify :) can you be more specific: is the client not sending, or the server not recieving?"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1484771359, "post_id": 41728771, "comment_id": 70652088, "body": "BTW there&#39;s a problem in your reception: you&#39;re opening <code>test12.txt</code> in <code>read</code> mode (overwriting yor <code>f</code> from <code>Received_File</code>) and write to it. That&#39;s bogus."}, {"owner": {"reputation": 53, "user_id": 7118493, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/af95baede8e75608320fb039b0391549?s=128&d=identicon&r=PG&f=1", "display_name": "Dylan Haigh", "link": "https://stackoverflow.com/users/7118493/dylan-haigh"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1484771570, "post_id": 41728771, "comment_id": 70652197, "body": "OK, so I&#39;ve just noticed its not the networking. A file is created on my Desktop like its meant to but with none of the data that its meant to have."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1484771937, "post_id": 41728771, "comment_id": 70652371, "body": "so, problem fixed with the file stuff fixed?"}, {"owner": {"reputation": 53, "user_id": 7118493, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/af95baede8e75608320fb039b0391549?s=128&d=identicon&r=PG&f=1", "display_name": "Dylan Haigh", "link": "https://stackoverflow.com/users/7118493/dylan-haigh"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1484772508, "post_id": 41728771, "comment_id": 70652692, "body": "Not yet. The file is being sent to my Desktop as planned but the data isnt being wrote to it."}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 7118493, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/af95baede8e75608320fb039b0391549?s=128&d=identicon&r=PG&f=1", "display_name": "Dylan Haigh", "link": "https://stackoverflow.com/users/7118493/dylan-haigh"}, "edited": false, "score": 0, "creation_date": 1484772401, "post_id": 41728971, "comment_id": 70652618, "body": "I&#39;ve tried your code and still the data isn&#39;t being written to the designated file. Is there a problem with the server code?"}, {"owner": {"reputation": 2380, "user_id": 5927496, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/a888e2216c350c2f12ee4b3b05e90759?s=128&d=identicon&r=PG&f=1", "display_name": "Alexis Clarembeau", "link": "https://stackoverflow.com/users/5927496/alexis-clarembeau"}, "edited": false, "score": 0, "creation_date": 1484772580, "post_id": 41728971, "comment_id": 70652751, "body": "Yes, in fact, your server only gives the content of the file when it has received some data ;)"}, {"owner": {"reputation": 2380, "user_id": 5927496, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/a888e2216c350c2f12ee4b3b05e90759?s=128&d=identicon&r=PG&f=1", "display_name": "Alexis Clarembeau", "link": "https://stackoverflow.com/users/5927496/alexis-clarembeau"}, "edited": false, "score": 0, "creation_date": 1484772836, "post_id": 41728971, "comment_id": 70652906, "body": "Just add: s.send(bytes(&#39;Hello&#39;, &#39;utf-8&#39;)) Before the connect on the client side ;)"}, {"owner": {"reputation": 2380, "user_id": 5927496, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/a888e2216c350c2f12ee4b3b05e90759?s=128&d=identicon&r=PG&f=1", "display_name": "Alexis Clarembeau", "link": "https://stackoverflow.com/users/5927496/alexis-clarembeau"}, "edited": false, "score": 0, "creation_date": 1484773325, "post_id": 41728971, "comment_id": 70653169, "body": "Or try to remove the <code>data = conn.recv(1024)</code> line from the server. It waits for some data from the client. However, your client was never sending any data, so, this line was blocking everything."}], "tags": [], "owner": {"reputation": 3600, "user_id": 5247911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IpGVs.png?s=128&g=1", "display_name": "Dinesh Pundkar", "link": "https://stackoverflow.com/users/5247911/dinesh-pundkar"}, "is_accepted": false, "score": 1, "last_activity_date": 1484771755, "creation_date": 1484771755, "answer_id": 41728971, "question_id": 41728771, "link": "https://stackoverflow.com/questions/41728771/why-isnt-my-client-receiving-my-file-from-the-server/41728971#41728971", "title": "Why isn&#39;t my client receiving my file from the server?", "body": "<ol>\n<li>Multiple file handles opened and all has same variable <code>f</code></li>\n<li><code>with open(\"Recieved_File\", 'wb') as f:</code> -- I think this is not required.</li>\n<li><code>f = open(\"/Users/dylanrichards/Desktop/test12.txt\")</code>should be outside <code>while</code> loop.</li>\n<li>While opening above file, add mode as 'wb'</li>\n</ol>\n\n<p><strong>Client Code</strong> :</p>\n\n<pre><code>import socket\n\nport = 8081\nhost = \"192.168.0.20\"\ns = socket.socket()\ns.connect((host, port))\n\nf = open(\"/Users/dylanrichards/Desktop/test12.txt\",'wb')\nwhile True:\n    print(\"Receiving data...\")\n    data = s.recv(1024)\n\n    if not data:\n        break\n    print(\"Data=%s\",  (data))\n    f.write(data)\n\nf.close()\nprint(\"Successfully got file\")\nprint(\"Connection closed\")\ns.close()\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 7118493, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/af95baede8e75608320fb039b0391549?s=128&d=identicon&r=PG&f=1", "display_name": "Dylan Haigh", "link": "https://stackoverflow.com/users/7118493/dylan-haigh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1484772928, "creation_date": 1484770931, "question_id": 41728771, "link": "https://stackoverflow.com/questions/41728771/why-isnt-my-client-receiving-my-file-from-the-server", "title": "Why isn&#39;t my client receiving my file from the server?", "body": "<p>I've created a fairly simple server with the aim of sending a simple .txt file but it won't send for some reason.</p>\n\n<p>Server code:</p>\n\n<pre><code>import socket\n\nport = 8081\nhost = \"192.168.0.20\"\ns = socket.socket()\ns.bind((host, port))\n\ns.listen(5)\n\nprint(\"Server Listening.....\")\n\nwhile True:\n    conn, addr = s.accept()\n    print(\"Got connection from\", addr)\n    data = conn.recv(1024)\n    print(\"Data recieved\", repr(data))\n\n    filename = \"/Users/dylanrichards/Desktop/keysyms.txt\"\n    f = open(filename, 'rb')\n    l = f.read(1024)\n    while (l):\n        conn.send(l)\n        print(\"Sent\", repr(l))\n        l = f.read(1024)\n    f.close()\n\n    print(\"Done sending\")\n    conn.send(\"Thank you for connecting\")\n    conn.close()\n</code></pre>\n\n<p>Here is the code for the client:</p>\n\n<pre><code>import socket\n\nport = 8081\nhost = \"192.168.0.20\"\ns = socket.socket()\ns.connect((host, port))\n\nwith open(\"Recieved_File\", 'wb') as f:\n    print(\"File opened\")\n    while True:\n        print(\"Receiving data...\")\n        data = s.recv(1024)\n        print(\"Data=%s\",  (data))\n        if not data:\n            break\n        f = open(\"/Users/dylanrichards/Desktop/test12.txt\")\n        f.write(data)\n\nf.close()\nprint(\"Successfully got file\")\nprint(\"Connection closed\")\ns.close()\n</code></pre>\n\n<p>Im testing this over my Local Network on a Macbook Air if thats any help. Thanks in advance... </p>\n"}, {"tags": ["python", "processing"], "answers": [{"tags": [], "owner": {"reputation": 2380, "user_id": 5927496, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/a888e2216c350c2f12ee4b3b05e90759?s=128&d=identicon&r=PG&f=1", "display_name": "Alexis Clarembeau", "link": "https://stackoverflow.com/users/5927496/alexis-clarembeau"}, "is_accepted": true, "score": 1, "last_activity_date": 1484774187, "creation_date": 1484774187, "answer_id": 41729573, "question_id": 41728734, "link": "https://stackoverflow.com/questions/41728734/arc-not-drawn-in-processing-3/41729573#41729573", "title": "arc() not drawn in Processing 3", "body": "<p>I think this is because you must ensure that starth &lt; endh, which isn't the case in your example. </p>\n\n<p>Instead, you can draw one of those two arcs: </p>\n\n<pre><code> arc(centre[0],centre[1],self.r*2,self.r*2,radians(endh),radians(starth))    \n arc(centre[0],centre[1],self.r*2,self.r*2,radians(starth),2*PI+radians(endh))\n</code></pre>\n\n<p>I hope it will solve your problem :)</p>\n"}], "owner": {"reputation": 638, "user_id": 7411345, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-VY1eJIW4ycA/AAAAAAAAAAI/AAAAAAAAACo/FOnMN9NPTTA/photo.jpg?sz=128", "display_name": "Benedict Randall Shaw", "link": "https://stackoverflow.com/users/7411345/benedict-randall-shaw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 0, "accepted_answer_id": 41729573, "answer_count": 1, "score": 0, "last_activity_date": 1484774187, "creation_date": 1484770785, "question_id": 41728734, "link": "https://stackoverflow.com/questions/41728734/arc-not-drawn-in-processing-3", "title": "arc() not drawn in Processing 3", "body": "<p>I'm using Processing for Python to make a program to draw fractal wiggly lines, and the arc function doesn't appear to draw anything;</p>\n\n<pre><code>size(400,400)\nnoFill()\nstrokeCap(SQUARE)\nimport copy\nroadcolour=(255,255,255)\nedgecolour=(0,0,0)\nroadwidth=10\nedgewidth=1\ncoords=(100,100)\nh=0\n\nclass Straight:\n\n    def __init__(self,l):\n        self.l=l\n\n    def sketch(self):\n        newcoords=(coords[0]+(cos(radians(h))*self.l),coords[1]+(sin(radians(h))*self.l))\n        strokeWeight(roadwidth+edgewidth)\n        stroke(*edgecolour)\n        line(coords[0],coords[1],newcoords[0],newcoords[1])\n        strokeWeight(roadwidth)\n        stroke(*roadcolour)\n        line(coords[0],coords[1],newcoords[0],newcoords[1])\n        return newcoords,h\n\nclass Arc:\n\n    def __init__(self,direction,degs,r):\n        self.r=r\n        self.dir=direction\n        self.degs=degs\n\n    def sketch(self):\n        if self.dir==\"R\":\n            centre=(coords[0]+(cos(radians(h+90))*self.r),coords[1]+(sin(radians(h+90))*self.r))\n            starth=(h-90)%360\n            endh=(starth+self.degs)%360\n            newcoords=(centre[0]+(cos(radians(endh))*self.r),centre[1]+(sin(radians(endh))*self.r))\n        else:\n            centre=(coords[0]+(cos(radians(h-90))*self.r),coords[1]+(sin(radians(h-90))*self.r))\n            endh=(h+90)%360\n            starth=(endh-self.degs)%360\n            newcoords=(centre[0]+(cos(radians(starth))*self.r),centre[1]+(sin(radians(starth))*self.r))\n        centre=roundcoords(centre)\n        newcoords=roundcoords(newcoords)\n        print(centre,starth,endh,newcoords)\n        strokeWeight(roadwidth+edgewidth)\n        stroke(*edgecolour)\n        arc(centre[0],centre[1],self.r*2,self.r*2,radians(starth),radians(endh))\n        strokeWeight(roadwidth)\n        stroke(*roadcolour)\n        arc(centre[0],centre[1],self.r*2,self.r*2,radians(starth),radians(endh))\n        return newcoords,h\n\ndef roundcoords(coords):\n    return (int(coords[0]+0.5),int(coords[1]+0.5))\n\na=Arc('R',90,100)\na.sketch()\ns=Straight(100)\ns.sketch()\n</code></pre>\n\n<p>When I run this code, the straight line draws perfectly, with a black edge as desired, thus: </p>\n\n<p><a href=\"https://i.stack.imgur.com/gpaHi.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gpaHi.png\" alt=\"the output\"></a></p>\n\n<p>and the program outputs <code>((100, 200), 270, 0, (200, 200))</code> as expected.</p>\n\n<p>However, it doesn't draw any arc, as you can see; the program does not interrupt; the arcs are simply not drawn. Why is this, and how do I fix it?</p>\n"}, {"tags": ["python", "ssh", "vagrant"], "answers": [{"tags": [], "owner": {"reputation": 22847, "user_id": 1290438, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b689dcfa3833cb016dfbc4cc82bb0eae?s=128&d=identicon&r=PG", "display_name": "zmo", "link": "https://stackoverflow.com/users/1290438/zmo"}, "is_accepted": true, "score": 2, "last_activity_date": 1484771319, "creation_date": 1484771319, "answer_id": 41728857, "question_id": 41728722, "link": "https://stackoverflow.com/questions/41728722/vagrant-ssh-with-multiple-arguments/41728857#41728857", "title": "Vagrant ssh with multiple arguments", "body": "<p>you can do it all in a single command:</p>\n\n<pre><code>vagrant ssh app -- -t 'sudo -u deploy /some/dir/for/test/env/bin/python /some/dir/for/test/env/manage.py test'\n</code></pre>\n\n<p>here you can avoid the useless <code>su</code> call by giving an argument to <code>sudo</code> so it runs a command as the given user, using the <code>-u</code> argument. Then the <code>bin/activate</code> command  is only changing the environment, so the python you're calling thereafter is the one from <code>env/bin/python</code>, so you can directly call it using its full path.</p>\n\n<p>And for your knowledge, if you want to chain two commands separated by <code>;</code> in a single sudo call, you shall spawn a shell in your sudo command, i.e.: <code>sudo sh -c \"run this; run that\"</code>.</p>\n"}], "owner": {"reputation": 573, "user_id": 2978172, "user_type": "registered", "accept_rate": 14, "profile_image": "https://i.stack.imgur.com/N4a2S.jpg?s=128&g=1", "display_name": "Waqas Javed", "link": "https://stackoverflow.com/users/2978172/waqas-javed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 179, "favorite_count": 0, "accepted_answer_id": 41728857, "answer_count": 1, "score": 0, "last_activity_date": 1484771319, "creation_date": 1484770741, "last_edit_date": 1484770782, "question_id": 41728722, "link": "https://stackoverflow.com/questions/41728722/vagrant-ssh-with-multiple-arguments", "title": "Vagrant ssh with multiple arguments", "body": "<p>I am having problems executing multiple commands with vagrant ssh.</p>\n\n<p>In order to run some tests in vagrant environment I execute following commands:</p>\n\n<ol>\n<li><code>vagrant ssh app</code></li>\n<li><code>sudo su deploy</code></li>\n<li><code>cd /some/dir/for/test</code></li>\n<li><code>source env/bin/activate</code></li>\n<li><code>python manage.py test</code></li>\n</ol>\n\n<p>I managed to get to point 3 but could not execute the 4th point. My attempt is as follows: </p>\n\n<pre><code>vagrant ssh app -- -t 'cd /some/dir/for/test; sudo su deploy'\n</code></pre>\n\n<p>But after the sudo command if I write some more commands they are not executed.</p>\n\n<p>I will also need to redirect the tests output to original shell, outside the vagrant environment.</p>\n"}, {"tags": ["python", "anaconda", "spyder"], "comments": [{"owner": {"reputation": 150, "user_id": 6570464, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/Iw7y6.png?s=128&g=1", "display_name": "J. Craig Williams", "link": "https://stackoverflow.com/users/6570464/j-craig-williams"}, "edited": false, "score": 0, "creation_date": 1484772067, "post_id": 41728718, "comment_id": 70652442, "body": "I&#39;m focusing on conda list being empty, but so far have come up empty."}], "answers": [{"tags": [], "owner": {"reputation": 150, "user_id": 6570464, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/Iw7y6.png?s=128&g=1", "display_name": "J. Craig Williams", "link": "https://stackoverflow.com/users/6570464/j-craig-williams"}, "is_accepted": false, "score": 0, "last_activity_date": 1484827369, "creation_date": 1484827369, "answer_id": 41741341, "question_id": 41728718, "link": "https://stackoverflow.com/questions/41728718/anaconda-update-for-spyder-has-failed/41741341#41741341", "title": "Anaconda update for Spyder has failed", "body": "<p>I had posted this on Github too, as I ran into a larger problem while trying to get my system back.</p>\n\n<p>The last comment from that thread (<a href=\"https://github.com/conda/conda/issues/4369\" rel=\"nofollow noreferrer\">https://github.com/conda/conda/issues/4369</a>) is repeated here:</p>\n\n<p>I have, I believe, successfully installed Anaconda 4.2 64bit Python 3.5 version</p>\n\n<p>I uninstalled the software again using the Windows 10 uninstall from Programs and Features.\nI manually removed the Anaconda paths from the user PATH variable.\nI manually removed the Anaconda folder from the Startup menu.\nI manually removed selected references to Anaconda in the registry.</p>\n\n<p>(I did not see the Anaconda clean program until later - <a href=\"https://docs.continuum.io/anaconda/install\" rel=\"nofollow noreferrer\">https://docs.continuum.io/anaconda/install</a>)</p>\n\n<p>I rebooted.\nI installed from the exe I had downloaded last year (4.2)\nThis time, I installed for all users, not just me.</p>\n\n<p>Testing </p>\n\n<p>`conda list</p>\n\n<p>returns many packages. Yeah!</p>\n\n<p>Calling python from a command prompt works too.\nSpyder starts and remember my previous project, so that is nice too.</p>\n\n<p>I think I can work again. \nI may need to upgrade some packages, so hopefully that will go well too.</p>\n\n<p>Craig</p>\n"}], "owner": {"reputation": 150, "user_id": 6570464, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/Iw7y6.png?s=128&g=1", "display_name": "J. Craig Williams", "link": "https://stackoverflow.com/users/6570464/j-craig-williams"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1050, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1484827369, "creation_date": 1484770731, "question_id": 41728718, "link": "https://stackoverflow.com/questions/41728718/anaconda-update-for-spyder-has-failed", "title": "Anaconda update for Spyder has failed", "body": "<p>Windows 10, 64 bit Anaconda 4.2, Python 3.5</p>\n\n<p>I opened Spyder today to do some work. (so much for that idea, several hours later)\nSpyder gave notice that there was new (3.1) version. I was on 3.0.2\nSo, I tried updating </p>\n\n<p>conda update spyder</p>\n\n<p>but it told me that it needed to DOWNGRADE it because of dependencies (I think, I wasn't taking notes at the time - so much for optimism)\nThen I tried to update conda but that made things worse at this point, Spyder wouldn't start at all.</p>\n\n<p>So, I uninstalled everything. At least, I think I did. \nI went through Windows Programs and looked for anything that looked like it might be part of Anaconda, python, or Spyder.</p>\n\n<p>I tried reinstalling Anaconda.\nI got the 3 error messages about menus, path, and directories (there's a bunch of tickets on those). My path is short (800 characters or so) and my user name is in English.</p>\n\n<p>I uninstalled and tried again.\nSame results.\nI created and ran the Fix.bat </p>\n\n<pre><code>\"C:\\My_Stuff\\Program_Files\\Anaconda3\\pythonw.exe\" -E -s \"C:\\My_Stuff\\Program_Files\\Anaconda3\\Lib\\_nsis.py\" addpath\n\"C:\\My_Stuff\\Program_Files\\Anaconda3\\pythonw.exe\" -E -s \"C:\\My_Stuff\\Program_Files\\Anaconda3\\Lib\\_nsis.py\" mkdirs\n\"C:\\My_Stuff\\Program_Files\\Anaconda3\\pythonw.exe\" -E -s \"C:\\My_Stuff\\Program_Files\\Anaconda3\\Lib\\_nsis.py\" mkmenus\n</code></pre>\n\n<p>and that at least gave me my menus.</p>\n\n<p>From a command prompt (either Anaconda or Windows), </p>\n\n<p>conda list</p>\n\n<p>shows no packages.</p>\n\n<p>Spyder and Anaconda Navigator do not start (\"This application failed to start because it could not find or load the Qt platform plugin \"windows\"\nin \"\".)</p>\n\n<p>Typing python from a command prompt (either one) appears to work and references Anaconda 4.2.0</p>\n\n<p>I'm going around in circles.</p>\n\n<p>Any help appreciated.</p>\n\n<p>Craig</p>\n"}, {"tags": ["python", "arrays", "python-3.x", "indexing"], "comments": [{"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1484770790, "post_id": 41728706, "comment_id": 70651823, "body": "Hi Juhi, what did you try? What was your problem?"}, {"owner": {"reputation": 123, "user_id": 5412270, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/801f987f0686379c3425f2e5cdf40623?s=128&d=identicon&r=PG&f=1", "display_name": "ash25", "link": "https://stackoverflow.com/users/5412270/ash25"}, "reply_to_user": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1484771411, "post_id": 41728706, "comment_id": 70652119, "body": "@MarcusM&#252;ller My problem is to get the row,column index from an array wherever it&#39;s value is &quot;nan&quot;/null, I have been following what others are doing. I cam across the list comprehension:  indices = [i for i, x in enumerate(my_list) if x == &quot;nan&quot;]  but as it&#39;s for list it is giving just the column index, I wanted to do it on an array, so I need both the row and column index number."}, {"owner": {"reputation": 46776, "user_id": 1014938, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FqCGF.png?s=128&g=1", "display_name": "Zero Piraeus", "link": "https://stackoverflow.com/users/1014938/zero-piraeus"}, "edited": false, "score": 0, "creation_date": 1484771635, "post_id": 41728706, "comment_id": 70652227, "body": "<code>from math import isnan; [(r, c) for r, row in enumerate(data) for c, item in enumerate(row) if isnan(item)]</code>"}], "answers": [{"tags": [], "owner": {"reputation": 72748, "user_id": 3185459, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PBjxg.jpg?s=128&g=1", "display_name": "RomanPerekhrest", "link": "https://stackoverflow.com/users/3185459/romanperekhrest"}, "is_accepted": true, "score": 1, "last_activity_date": 1484771673, "creation_date": 1484771673, "answer_id": 41728950, "question_id": 41728706, "link": "https://stackoverflow.com/questions/41728706/how-to-get-the-index-of-all-elements-which-are-nan-in-an-array-in-python/41728950#41728950", "title": "How to get the index of all elements which are NaN in an array in python?", "body": "<p>The solution using <code>np.isnan</code> and <code>np.argwhere</code> functions combination from <code>numpy</code> module:</p>\n\n<pre><code>import numpy as np\n\narr = np.array([[     np.NaN,      np.NaN,      np.NaN,  1633.32,  1661.24,     0.  ],\n   [     np.NaN,      np.NaN,      np.NaN,  2885.94,  3264.09,     0.  ],\n   [  605.48,      np.NaN,   599.27,   664.47,   670.68,     0.  ],\n   [     np.NaN,      np.NaN,      np.NaN,   874.59,   783.86,     0.  ],\n   [ 1596.01,      np.NaN,  1469.77,  1731.26,  1514.86,     0.  ]])\n\nprint(np.argwhere(np.isnan(arr)))\n</code></pre>\n\n<p>The output:</p>\n\n<pre><code>[[0 0]\n [0 1]\n [0 2]\n [1 0]\n [1 1]\n [1 2]\n [2 1]\n [3 0]\n [3 1]\n [3 2]\n [4 1]]\n</code></pre>\n"}], "owner": {"reputation": 123, "user_id": 5412270, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/801f987f0686379c3425f2e5cdf40623?s=128&d=identicon&r=PG&f=1", "display_name": "ash25", "link": "https://stackoverflow.com/users/5412270/ash25"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1466, "favorite_count": 0, "accepted_answer_id": 41728950, "answer_count": 1, "score": 1, "last_activity_date": 1484778864, "creation_date": 1484770692, "last_edit_date": 1484778864, "question_id": 41728706, "link": "https://stackoverflow.com/questions/41728706/how-to-get-the-index-of-all-elements-which-are-nan-in-an-array-in-python", "title": "How to get the index of all elements which are NaN in an array in python?", "body": "<p>I have an array </p>\n\n<pre><code>   [     nan,      nan,      nan,  1633.32,  1661.24,     0.  ],\n   [     nan,      nan,      nan,  2885.94,  3264.09,     0.  ],\n   [  605.48,      nan,   599.27,   664.47,   670.68,     0.  ],\n   [     nan,      nan,      nan,   874.59,   783.86,     0.  ],\n   [ 1596.01,      nan,  1469.77,  1731.26,  1514.86,     0.  ]]\n</code></pre>\n\n<p>Is there any way to know the index (row,column) of the elements which are \"nan\"</p>\n"}, {"tags": ["python", "datetime", "calendar"], "comments": [{"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1484770656, "post_id": 41728678, "comment_id": 70651760, "body": "This is why I&#39;m terrified to ever touch timestamps.... I&#39;ll throw character encoding in that list too"}, {"owner": {"reputation": 269348, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1484771039, "post_id": 41728678, "comment_id": 70651947, "body": "It&#39;s quite rare to find date handling in <i>any</i> language that works properly before the introduction of the Gregorian calendar, it just isn&#39;t needed often enough to be worth the complication. And according to <a href=\"https://en.wikipedia.org/wiki/Gregorian_calendar\" rel=\"nofollow noreferrer\">wikipedia</a> the skip happened in 1582. Edit: I see it wasn&#39;t adopted by Britain and the U.S. until 1752."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 1, "creation_date": 1484775148, "post_id": 41728678, "comment_id": 70654098, "body": "The Gregorian calendar wasn&#39;t adopted everywhere at the same time. Since <code>datetime</code> doesn&#39;t have any location information or settings, it seems very unlikely. Why don&#39;t you just try it and see?"}], "answers": [{"tags": [], "owner": {"reputation": 1789, "user_id": 5626104, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d9bff58c22f757507d69a779603d3eac?s=128&d=identicon&r=PG&f=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/5626104/brian"}, "is_accepted": true, "score": 3, "last_activity_date": 1484771442, "creation_date": 1484771442, "answer_id": 41728884, "question_id": 41728678, "link": "https://stackoverflow.com/questions/41728678/does-datetime-account-for-the-calendar-new-style-act-of-1750/41728884#41728884", "title": "Does datetime account for the Calendar (New Style) Act of 1750?", "body": "<p>The python calendar is described <a href=\"https://docs.python.org/2/library/calendar.html\" rel=\"nofollow noreferrer\">here</a>, which says:</p>\n\n<blockquote>\n  <p>Most of these functions and classes rely on the datetime module which\n  uses an idealized calendar, the current Gregorian calendar\n  indefinitely extended in both directions. This matches the definition\n  of the \u201cproleptic Gregorian\u201d calendar in Dershowitz and Reingold\u2019s\n  book \u201cCalendrical Calculations\u201d, where it\u2019s the base calendar for all\n  computations.</p>\n</blockquote>\n\n<p>So no, England's decision in 1752 to use the Gregorian calendar (like much of the rest of western Europe) instead of the Julian calendar is not reflected in calendar that Python uses. It's quite interesting to me that the Unix <code>cal</code> command does include the switch. </p>\n"}], "owner": {"reputation": 1160, "user_id": 3826115, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/64deaa69ef71ef12623f3ced55f16d2d?s=128&d=identicon&r=PG&f=1", "display_name": "hm8", "link": "https://stackoverflow.com/users/3826115/hm8"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 150, "favorite_count": 0, "accepted_answer_id": 41728884, "answer_count": 1, "score": 4, "last_activity_date": 1484774991, "creation_date": 1484770583, "last_edit_date": 1484774991, "question_id": 41728678, "link": "https://stackoverflow.com/questions/41728678/does-datetime-account-for-the-calendar-new-style-act-of-1750", "title": "Does datetime account for the Calendar (New Style) Act of 1750?", "body": "<p>In September of 1752, in accordance with the Calendar (New Style) Act of 1750, 11 days were skipped in September 1752. This can be seen with the Unix cal command.</p>\n\n<pre><code>$ cal 9 1752\nSeptember 1752\nSu Mo Tu We Th Fr Sa\n1 2 14 15 16\n17 18 19 20 21 22 23\n24 25 26 27 28 29 30\n</code></pre>\n\n<p>After learning this factoid, I wondered if Python's datetime class accounted for this at all. After some quick toying around, it appears as if it does not...</p>\n\n<pre><code>&gt;&gt;&gt; datetime.datetime.now() - datetime.datetime(1752, 9, 14)\ndatetime.timedelta(96550, 47314, 535334)\n&gt;&gt;&gt; datetime.datetime.now() - datetime.datetime(1752, 9, 2)\ndatetime.timedelta(96562, 47318, 183610)\n</code></pre>\n\n<p>By my understanding, if Sept. 14, 1752 was 96550 days ago, than Sept. 2, 1752 should be 96551 days ago (because the 3-13 were skipped).</p>\n\n<p>I also appears as if the calendar class also does not account for the skip</p>\n\n<pre><code>&gt;&gt;&gt; calendar.prmonth(1752, 9)\n   September 1752\nMo Tu We Th Fr Sa Su\n             1  2  3\n 4  5  6  7  8  9 10\n11 12 13 14 15 16 17\n18 19 20 21 22 23 24\n25 26 27 28 29 30\n</code></pre>\n\n<p>It is likely inconsequential in the vast majority of applications, however it still seems like a bug to me that this is not accounted for. Of course, it is also entirely possible that I am missing something obvious.</p>\n\n<p>Am I missing something obvious?</p>\n"}, {"tags": ["python", "user-interface", "pyqt4", "qtoolbar", "qtoolbutton"], "owner": {"reputation": 11, "user_id": 7437083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46d0833d35f940fbcc1d3c6004c83390?s=128&d=identicon&r=PG&f=1", "display_name": "GretaVan", "link": "https://stackoverflow.com/users/7437083/gretavan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 79, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1484770504, "creation_date": 1484770504, "question_id": 41728658, "link": "https://stackoverflow.com/questions/41728658/qtoolbutton-not-appearing-overlapping", "title": "QToolButton Not Appearing/Overlapping", "body": "<p>I am dynamically adding QToolButtons to my toolbar that inherits from QToolBar. I have a list of tuples (widget, callback) that contain what should be added to the toolbar. In theory, I want to group them by the requesting object and separate the groups with addSeparator().</p>\n\n<p>My dictionary of widgets are comprised of three widget tuples, two owned by the same key. Currently, all of my widgets are QToolButtons.</p>\n\n<p>I have tried the following two 'adding' functions with descriptions of results to follow:</p>\n\n<pre><code># self.registered_widgets is an OrderedDict:\n#    key: requesting object string, value: ((widget, callback), ...)\n\ndef add_registered_widgets_to_toolbar(self):\n    print \"add_registered_widgets_to_toolbar\"\n\n    #import pdb;pdb.set_trace()\n\n    #self.reg... is an OrderedDict\n    for key in self.registered_widgets.keys():\n        widgetList = self.registered_widgets[key]\n        print key\n        for widgetTuple in widgetList:\n            print widgetTuple[0]\n            print widgetTuple[0].parent()\n\n\n            self.addWidget(widgetTuple[0])\n\n        self.addSeparator() \n</code></pre>\n\n<p>This set up results in the first widget never being shown. Ever. I have printed their addresses, parents, and associated keys to confirm that they are as I expect:</p>\n\n<ul>\n<li>three separate widgets </li>\n<li>associated with correct key</li>\n<li>have my QToolBar class object as parent widget</li>\n<li>and are all being processed in the order I expect</li>\n</ul>\n\n<p>All of those conditions are true to no effect.</p>\n\n<p>The second attempt:</p>\n\n<pre><code>def add_registered_widgets_to_toolbar(self):\n    print \"add_registered_widgets_to_toolbar\"\n\n    #import pdb;pdb.set_trace()\n    l = self.layout()\n\n    for key in self.registered_widgets.keys():\n        widgetList = self.registered_widgets[key]\n        print key\n        for widgetTuple in widgetList:\n            print widgetTuple[0]\n            print widgetTuple[0].parent()\n\n            l.addWidget(widgetTuple[0]\n\n        l.addSeperator()        \n\n    self.setLayout(l)\n</code></pre>\n\n<p>This results in <strong>all</strong> the QToolButton icons <strong>overlapping</strong>, with the last being the full width of a modal dialog's button. (All of the buttons are created with a set QSize of (24,24).)</p>\n\n<p>Additionally, unlike with the first version of the function, the toolbar never shows properly. Just maybe (I'm guessing) the top four to five pixels are shown between the widget above my toolbar and the widget below. Just enough to make out the tops of my three, very different icons and the width of the last when I hover over it.</p>\n\n<p>I've consulted with those more knowledgeable in the ways of Python than myself and nobody has any ideas, even after running and debugging the program while it runs. I'm at a complete loss. </p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 4426, "user_id": 4099813, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d53c6c37d906b105371aeff8bbe0603?s=128&d=identicon&r=PG&f=1", "display_name": "MooingRawr", "link": "https://stackoverflow.com/users/4099813/mooingrawr"}, "edited": false, "score": 0, "creation_date": 1484770336, "post_id": 41728582, "comment_id": 70651592, "body": "Can you show us the script that is calling it ?"}, {"owner": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "edited": false, "score": 1, "creation_date": 1484770454, "post_id": 41728582, "comment_id": 70651652, "body": "When you start the python terminal, it doesn&#39;t automatically find every python file on your computer (What if you wrote two functions with the same name in different files?)  Instead, you must use <code>import</code> statements to tell the interpreter where to look.  If your code is saved in a file name <code>digitcount.py</code>, then you would use the statement <code>import digitcount</code> to import your code.  You would then access it like <code>digitcount.DigitCount(100)</code>"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1484770454, "post_id": 41728582, "comment_id": 70651651, "body": "you&#39;re running from the console. You have to import the file containing your function first!"}, {"owner": {"reputation": 1, "user_id": 7437663, "user_type": "registered", "profile_image": "https://graph.facebook.com/1451849541526405/picture?type=large", "display_name": "Aidan Cronin", "link": "https://stackoverflow.com/users/7437663/aidan-cronin"}, "edited": false, "score": 0, "creation_date": 1484770498, "post_id": 41728582, "comment_id": 70651673, "body": "sorry what would you like to see? Both the programme and the error message are displayed above :)"}, {"owner": {"reputation": 1, "user_id": 7437663, "user_type": "registered", "profile_image": "https://graph.facebook.com/1451849541526405/picture?type=large", "display_name": "Aidan Cronin", "link": "https://stackoverflow.com/users/7437663/aidan-cronin"}, "reply_to_user": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "edited": false, "score": 0, "creation_date": 1484770683, "post_id": 41728582, "comment_id": 70651773, "body": "@PatrickHaugh thanks for your help! where exactly do i place the import statements, im a complete newbie to programming"}, {"owner": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "edited": false, "score": 0, "creation_date": 1484770881, "post_id": 41728582, "comment_id": 70651865, "body": "@AidanCronin As a rule, before anything else at the top of the file/interactive session.  There might be exceptions, but I&#39;ve honestly never seen any."}, {"owner": {"reputation": 1, "user_id": 7437663, "user_type": "registered", "profile_image": "https://graph.facebook.com/1451849541526405/picture?type=large", "display_name": "Aidan Cronin", "link": "https://stackoverflow.com/users/7437663/aidan-cronin"}, "reply_to_user": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "edited": false, "score": 0, "creation_date": 1484770958, "post_id": 41728582, "comment_id": 70651910, "body": "@PatrickHaugh Thanks very much , i found a second digit count saved in a different folder , but the import did the job, much appreciated!"}, {"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 0, "creation_date": 1484771631, "post_id": 41728582, "comment_id": 70652224, "body": "@AidanCronin: definitely."}, {"owner": {"reputation": 1, "user_id": 7437663, "user_type": "registered", "profile_image": "https://graph.facebook.com/1451849541526405/picture?type=large", "display_name": "Aidan Cronin", "link": "https://stackoverflow.com/users/7437663/aidan-cronin"}, "reply_to_user": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "edited": false, "score": 0, "creation_date": 1484772815, "post_id": 41728582, "comment_id": 70652891, "body": "@PatrickHaugh Would there be any other reason as to why the function isnt being recognised because I got rid of the duplicate that i had also saved for digitcount, see we arent supposed to have to import the function in class"}, {"owner": {"reputation": 1, "user_id": 7437663, "user_type": "registered", "profile_image": "https://graph.facebook.com/1451849541526405/picture?type=large", "display_name": "Aidan Cronin", "link": "https://stackoverflow.com/users/7437663/aidan-cronin"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1484772861, "post_id": 41728582, "comment_id": 70652918, "body": "@Jean-Fran&#231;oisFabre Would there be any other reason as to why the function isnt being recognised because I got rid of the duplicate that i had also saved for digitcount, see we arent supposed to have to import the function in class"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7437663, "user_type": "registered", "profile_image": "https://graph.facebook.com/1451849541526405/picture?type=large", "display_name": "Aidan Cronin", "link": "https://stackoverflow.com/users/7437663/aidan-cronin"}, "edited": false, "score": 0, "creation_date": 1484772523, "post_id": 41728647, "comment_id": 70652705, "body": "Yes that did work for me , but we arent supposed to have to import the function in class, i deleted my replicate digitcount and now only have one but python still doesnt recognise the function? I still get the error that it isnt defined?"}, {"owner": {"reputation": 38746, "user_id": 238884, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/febf321631229c7408834722691c06e9?s=128&d=identicon&r=PG", "display_name": "Malvolio", "link": "https://stackoverflow.com/users/238884/malvolio"}, "reply_to_user": {"reputation": 1, "user_id": 7437663, "user_type": "registered", "profile_image": "https://graph.facebook.com/1451849541526405/picture?type=large", "display_name": "Aidan Cronin", "link": "https://stackoverflow.com/users/7437663/aidan-cronin"}, "edited": false, "score": 0, "creation_date": 1484780916, "post_id": 41728647, "comment_id": 70656476, "body": "@AidanCronin -- I don&#39;t know what &quot;aren&#39;t supposed&quot; means here. Functions are local to the file they are defined in, unless they are explicitly imported to another."}], "tags": [], "owner": {"reputation": 38746, "user_id": 238884, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/febf321631229c7408834722691c06e9?s=128&d=identicon&r=PG", "display_name": "Malvolio", "link": "https://stackoverflow.com/users/238884/malvolio"}, "is_accepted": true, "score": 2, "last_activity_date": 1484770469, "creation_date": 1484770469, "answer_id": 41728647, "question_id": 41728582, "link": "https://stackoverflow.com/questions/41728582/function-not-being-defined-even-though-ive-saved-it/41728647#41728647", "title": "Function not being defined even though ive saved it", "body": "<p>Wait, are you saying you do the following from the command line?</p>\n\n<pre><code>$ python DigitCount.py\n$ python\n&gt;&gt;&gt; DigitCount(100)\n</code></pre>\n\n<p>That won't work.  You have to do this:</p>\n\n<pre><code>$ python\n&gt;&gt;&gt; import DigitCount\n&gt;&gt;&gt; DigitCount.DigitCount(100)\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7437663, "user_type": "registered", "profile_image": "https://graph.facebook.com/1451849541526405/picture?type=large", "display_name": "Aidan Cronin", "link": "https://stackoverflow.com/users/7437663/aidan-cronin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 41728647, "answer_count": 1, "score": -2, "last_activity_date": 1500755193, "creation_date": 1484770239, "last_edit_date": 1500755193, "question_id": 41728582, "link": "https://stackoverflow.com/questions/41728582/function-not-being-defined-even-though-ive-saved-it", "title": "Function not being defined even though ive saved it", "body": "<p>I have a fully working programme that I wish to run. It executes on my friend's laptop, but not mine, (I've saved it to my documents folder) the following is the program:</p>\n\n<pre><code>def DigitCount(n):\n    #how many decimal digits in integer 'n'\n    if n&lt;0:\n        n=-n\n    digitCount=1\n    powerOfTen=10\n    while powerOfTen&lt;=n:\n        digitCount+=1\n        powerOfTen*=10\n    return digitCount\n</code></pre>\n\n<p>But I keep getting the following error:</p>\n\n<pre><code>&gt;&gt;&gt; DigitCount(100)\nTraceback (most recent call last):\n  File \"&lt;pyshell#9&gt;\", line 1, in &lt;module&gt;\n    DigitCount(100)\nNameError: name 'DigitCount' is not defined\n</code></pre>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 2609, "user_id": 5802606, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c92729ab38527e926223267fac5ec6e?s=128&d=identicon&r=PG&f=1", "display_name": "void", "link": "https://stackoverflow.com/users/5802606/void"}, "edited": false, "score": 1, "creation_date": 1484770619, "post_id": 41728581, "comment_id": 70651741, "body": "Check for removing the same value twice. And <code>list.remove()</code> always returns <code>None</code>, so <code>temp_list</code> will not contain result of removal."}, {"owner": {"reputation": 855, "user_id": 5020881, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/ENeyF.jpg?s=128&g=1", "display_name": "beepretty", "link": "https://stackoverflow.com/users/5020881/beepretty"}, "reply_to_user": {"reputation": 2609, "user_id": 5802606, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c92729ab38527e926223267fac5ec6e?s=128&d=identicon&r=PG&f=1", "display_name": "void", "link": "https://stackoverflow.com/users/5802606/void"}, "edited": false, "score": 0, "creation_date": 1484843044, "post_id": 41728581, "comment_id": 70686264, "body": "Yes, you are right. I remove the same value twice. Then I tried to use the remove result directly like random.choice(temp_list.remove(act)), then it we still wrongs.  Cause the return value is None. I fixed it already, thanks a lot!"}], "owner": {"reputation": 855, "user_id": 5020881, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/ENeyF.jpg?s=128&g=1", "display_name": "beepretty", "link": "https://stackoverflow.com/users/5020881/beepretty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1484777661, "creation_date": 1484770237, "last_edit_date": 1484777661, "question_id": 41728581, "link": "https://stackoverflow.com/questions/41728581/cannot-use-the-list-remove-function-within-a-class-list-removex-x-not-in-lis", "title": "cannot use the list.remove function within a class: list.remove(x): x not in list", "body": "<p>I have a class named \"mdp\" and a \"self.actions=[]\" list has been initialized in the initialization function:</p>\n\n<pre><code>def __init__(self):\n\n    self.actions = [(1,0),(-1,0),(0,1),(0, -1)]\n</code></pre>\n\n<p>Then I use the self.action in another function within the class mdp:</p>\n\n<pre><code>def Exploration(self, s):\n    exploit_act = self.pick_best(s)\n    temp_list = self.actions.remove(exploit_act)\n    ...\n</code></pre>\n\n<p>For sure, the \"exploit_act\" here is (0, 1), but there is an error is :</p>\n\n<pre><code>   list.remove(x): x not in list \n</code></pre>\n\n<p>I used the remove() function outside the class, and it works normally. But within the class, it has error. I doubt because the variable type of self.actions or whatever else. Thanks for this help! </p>\n"}, {"tags": ["python", "django", "rest", "relationship", "serialization"], "comments": [{"owner": {"reputation": 655, "user_id": 4613730, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Jnk92.jpg?s=128&g=1", "display_name": "DA--", "link": "https://stackoverflow.com/users/4613730/da"}, "edited": false, "score": 1, "creation_date": 1484813156, "post_id": 41728533, "comment_id": 70666696, "body": "If it&#39;s a validation error in the serializer, you&#39;ll find what&#39;s wrong in serializer.errors.  Also, check out how to create the related objects, if have the feeling that you are not creating the nested objects correctly, read here: <a href=\"http://www.django-rest-framework.org/api-guide/relations/#writable-nested-serializers\" rel=\"nofollow noreferrer\">documentation</a>"}, {"owner": {"reputation": 934, "user_id": 4541597, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/wAQDO.jpg?s=128&g=1", "display_name": "Developus", "link": "https://stackoverflow.com/users/4541597/developus"}, "reply_to_user": {"reputation": 655, "user_id": 4613730, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Jnk92.jpg?s=128&g=1", "display_name": "DA--", "link": "https://stackoverflow.com/users/4613730/da"}, "edited": false, "score": 0, "creation_date": 1484855143, "post_id": 41728533, "comment_id": 70693115, "body": "@DA-- - I get an error in serializers.errors: <code>Expected a list of items but got type &quot;dict&quot;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 934, "user_id": 4541597, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/wAQDO.jpg?s=128&g=1", "display_name": "Developus", "link": "https://stackoverflow.com/users/4541597/developus"}, "edited": false, "score": 0, "creation_date": 1484915564, "post_id": 41759146, "comment_id": 70718926, "body": "<code>create</code> method is in the views.py"}, {"owner": {"reputation": 655, "user_id": 4613730, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Jnk92.jpg?s=128&g=1", "display_name": "DA--", "link": "https://stackoverflow.com/users/4613730/da"}, "reply_to_user": {"reputation": 934, "user_id": 4541597, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/wAQDO.jpg?s=128&g=1", "display_name": "Developus", "link": "https://stackoverflow.com/users/4541597/developus"}, "edited": false, "score": 0, "creation_date": 1484923000, "post_id": 41759146, "comment_id": 70723498, "body": "Well, than add a create method to the serializer :)"}, {"owner": {"reputation": 934, "user_id": 4541597, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/wAQDO.jpg?s=128&g=1", "display_name": "Developus", "link": "https://stackoverflow.com/users/4541597/developus"}, "edited": false, "score": 0, "creation_date": 1484957674, "post_id": 41759146, "comment_id": 70740136, "body": "I edited my post. I added method you said, but I think it didn&#39;t help."}, {"owner": {"reputation": 934, "user_id": 4541597, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/wAQDO.jpg?s=128&g=1", "display_name": "Developus", "link": "https://stackoverflow.com/users/4541597/developus"}, "edited": false, "score": 0, "creation_date": 1484958398, "post_id": 41759146, "comment_id": 70740307, "body": "Finally, I have solved this problem. I needed to change some code in <code>create</code> method in serializer. Thanks for help."}, {"owner": {"reputation": 1845, "user_id": 4204176, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7d2919f023447cbe3492e8d5f8ae4ad6?s=128&d=identicon&r=PG", "display_name": "Jesus Almaral - Hackaprende", "link": "https://stackoverflow.com/users/4204176/jesus-almaral-hackaprende"}, "edited": false, "score": 0, "creation_date": 1508389300, "post_id": 41759146, "comment_id": 80593482, "body": "This is not working for me, no matter what I send in &#39;tracks&#39; I am getting []"}], "tags": [], "owner": {"reputation": 655, "user_id": 4613730, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Jnk92.jpg?s=128&g=1", "display_name": "DA--", "link": "https://stackoverflow.com/users/4613730/da"}, "is_accepted": true, "score": 1, "last_activity_date": 1484900959, "creation_date": 1484900959, "answer_id": 41759146, "question_id": 41728533, "link": "https://stackoverflow.com/questions/41728533/django-rest-cannot-create-model-with-relationships/41759146#41759146", "title": "Django REST - cannot create model with relationships", "body": "<p>I assume your <code>create</code> method is in the <code>PlayerDetailSerializer</code>? Note that it takes the validated data as an argument, you're passing the request. </p>\n\n<p>Also, you have to pop the <code>PlayerDetail</code> \"manually\", and create the model instance. Because you don't do this, the dict is in the validated data as the Player is validated. Then pass the object key to the <code>Player.objects.create</code> method . I cannot explain it better than the <a href=\"http://www.django-rest-framework.org/api-guide/relations/#writable-nested-serializers\" rel=\"nofollow noreferrer\">documentation</a>, but I'll paste the <code>create</code> method from the documentation as I think that's what you have to change. </p>\n\n<pre><code>def create(self, validated_data):\n    tracks_data = validated_data.pop('tracks')\n    album = Album.objects.create(**validated_data)\n    for track_data in tracks_data:\n        Track.objects.create(album=album, **track_data)\n    return album\n</code></pre>\n\n<p>Please let me know if I misunderstood your problem, so i can edit this answer. </p>\n"}], "owner": {"reputation": 934, "user_id": 4541597, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/wAQDO.jpg?s=128&g=1", "display_name": "Developus", "link": "https://stackoverflow.com/users/4541597/developus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 623, "favorite_count": 0, "accepted_answer_id": 41759146, "answer_count": 1, "score": 0, "last_activity_date": 1484958090, "creation_date": 1484770059, "last_edit_date": 1484958090, "question_id": 41728533, "link": "https://stackoverflow.com/questions/41728533/django-rest-cannot-create-model-with-relationships", "title": "Django REST - cannot create model with relationships", "body": "<p>I created a code for my related models:</p>\n\n<pre><code>class Player(models.Model):\n    # Basic\n    first_name = models.CharField(max_length=50)\n    last_name = models.CharField(max_length=50)\n\n    # Enums\n    GOALKEEPER = 'GOALKEEPER'\n    DEFENDER = 'DEFENDER'\n    MIDFIELDER = 'MIDFIELDER'\n    FORWARD = 'FORWARD'\n    POSITION = (\n        (GOALKEEPER, 'Goalkeeper'),\n        (DEFENDER, 'Defender'),\n        (MIDFIELDER, 'Midfielder'),\n        (FORWARD, 'Forward')\n    )\n    position = models.CharField(max_length=50, choices=POSITION, default=GOALKEEPER)\n\nclass PlayerDetail(models.Model):\n    # Basic\n    height = models.FloatField(default=0.0)\n    weight = models.IntegerField(default=0)\n\n    # Relationships\n    player = models.ForeignKey(Player, related_name='player_detail')\n</code></pre>\n\n<p>Then, I have done a serializers for every model:</p>\n\n<pre><code>class PlayerDetailSerializer(serializers.HyperlinkedModelSerializer):\n    class Meta:\n        model = PlayerDetail\n        fields = ('weight', 'height')\n\n\nclass PlayerSerializer(serializers.HyperlinkedModelSerializer):\n    player_detail = PlayerDetailSerializer(many=True)\n\n    class Meta:\n        model = Player\n        fields = ('id', 'first_name', 'last_name', 'position', 'player_detail')\n</code></pre>\n\n<p>My <code>create</code> method in <code>views.py</code> looks like this:</p>\n\n<pre><code>   def create(self, request):\n        serializer = PlayerSerializer(data=request.data, many=True)\n        if serializer.is_valid():\n            serializer.save()\n            return Response(serializer.data, status=status.HTTP_201_CREATED)\n\n        return Response('Player cannot be created', status=status.HTTP_400_BAD_REQUEST)\n</code></pre>\n\n<p>Well, I send a JSON request to this simple API. The object I send is:</p>\n\n<pre><code> {\n        \"first_name\": \"Player1\",\n        \"last_name\": \"Player1\",\n        \"position\": \"DEFENDER\",\n        \"player_detail\": {\n             \"weight\": 80,\n              \"height\": 180\n        }\n}\n</code></pre>\n\n<p>In result I only see 400 bad request and <code>Player cannot be created</code>. I don't know why it is wrong. I think my relationship is define good.\nWhat is a good way to create connected objects via JSON?</p>\n\n<p><strong>EDIT:</strong>\nNow my serializer looks like:</p>\n\n<pre><code>class PlayerDetailSerializer(serializers.ModelSerializer):\n    class Meta:\n        model = PlayerDetail\n        fields = ('weight', 'height')\n\n\nclass PlayerSerializer(serializers.ModelSerializer):\n    player_detail = PlayerDetailSerializer(many=True)\n\n    class Meta:\n        model = Player\n        fields = ('id', 'first_name', 'last_name', 'position', 'player_detail')\n\n    def create(self, validated_data):\n        player_detail = validated_data.pop('player_detail')\n        player = Player.objects.create(**validated_data)\n        PlayerDetail.objects.create(player=player, **player_detail)\n        return player\n</code></pre>\n\n<p>but still I get this error:\n<code>{'player_detail': {'non_field_errors': ['Expected a list of items but got type \"dict\".']}}</code></p>\n\n<p>I also try to do it without <code>many=True</code> in <code>PlayerDetailSerializer</code> then <code>serializer.save()</code> is called but I get an <code>return self.cursor.execute(sql, params) django.db.utils.IntegrityError</code> with empty column value in <code>player_detail_id</code>.</p>\n\n<p><strong>EDIT 2:</strong>\nI've solved this. I have changed a <code>create</code> method in serializer to this:</p>\n\n<pre><code>  def create(self, validated_data):\n        player_detail = PlayerDetail.objects.create(**validated_data.pop('player_detail'))\n        player = Player.objects.create(player_detail=player_detail, **validated_data)\n        return player\n</code></pre>\n\n<p>and now object with nested reliationship has been created.</p>\n"}]