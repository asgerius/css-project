[{"tags": ["python", "regex"], "comments": [{"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 2, "creation_date": 1516838533, "post_id": 48433605, "comment_id": 83858645, "body": "How about <code>&quot;Jump|J\\*\\*p|J\\*m\\*|...|J\\*\\*\\*ed&quot;</code>."}, {"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 0, "creation_date": 1516838720, "post_id": 48433605, "comment_id": 83858705, "body": "Try going here: <a href=\"http://regexstorm.net/tester\" rel=\"nofollow noreferrer\">regexstorm.net/tester</a> or to another testing website, put all the strings that should match and some that shouldn&#39;t, and then test your regex.  When you write <code>*</code>, I think you might mean <code>.</code> (any single character).   You might even mean <code>\\w</code> (any word character).  Maybe start with <code>(J\\w\\wp|J\\wm\\w)</code>"}, {"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1516838788, "post_id": 48433605, "comment_id": 83858730, "body": "Does your &quot;*&quot; represent <i>any single character</i>? If so, then it must be a &quot;.&quot;."}, {"owner": {"reputation": 2124, "user_id": 788153, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/7b88bcd00bc46fe845bd9a8b89d2a3bd?s=128&d=identicon&r=PG&f=1", "display_name": "learner", "link": "https://stackoverflow.com/users/788153/learner"}, "edited": false, "score": 0, "creation_date": 1516838811, "post_id": 48433605, "comment_id": 83858734, "body": "sorry, <code>*</code> is exact charcter"}], "answers": [{"comments": [{"owner": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 0, "creation_date": 1516841634, "post_id": 48433673, "comment_id": 83859527, "body": "Nice!  And <code>*</code> doesn&#39;t require escaping because of the enclosing <code>[]</code>, I assume?"}, {"owner": {"reputation": 4244, "user_id": 3348112, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ab4cd9458f5debd780353a5554b718d8?s=128&d=identicon&r=PG&f=1", "display_name": "CAustin", "link": "https://stackoverflow.com/users/3348112/caustin"}, "edited": false, "score": 0, "creation_date": 1516843336, "post_id": 48433673, "comment_id": 83859965, "body": "Should <code>****</code>, <code>******</code>, and <code>*******</code> be considered valid matches?"}, {"owner": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "reply_to_user": {"reputation": 2784, "user_id": 8413636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d8c46d1ea221e93d32a1b3d2ee354cae?s=128&d=identicon&r=PG&f=1", "display_name": "zzxyz", "link": "https://stackoverflow.com/users/8413636/zzxyz"}, "edited": false, "score": 1, "creation_date": 1516870373, "post_id": 48433673, "comment_id": 83868820, "body": "@zzxyz Correct. Most characters lose their special meaning inside a character class."}], "tags": [], "owner": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "is_accepted": true, "score": 6, "last_activity_date": 1516838843, "creation_date": 1516838843, "answer_id": 48433673, "question_id": 48433605, "link": "https://stackoverflow.com/questions/48433605/generate-regex-for-exact-words-from-a-list/48433673#48433673", "title": "Generate regex for exact words from a list", "body": "<p>This is a fairly straightforward regex. We want to match a word, but allow each character to be an asterisk. The regex is therefore a sequence of character groups of the form <code>[x*]</code>:</p>\n\n<pre><code>[Jj*][u*][m*][p*](?:[i*][n*][g*]|[e*][d*])?\n</code></pre>\n\n<p><a href=\"https://regex101.com/r/bOoGpW/2\" rel=\"noreferrer\">See it in action at regex101.</a></p>\n\n<p>If you only want to match these exact words, make sure to use the pattern with <a href=\"https://docs.python.org/3/library/re.html#re.fullmatch\" rel=\"noreferrer\"><code>re.fullmatch</code></a>.</p>\n"}], "owner": {"reputation": 2124, "user_id": 788153, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/7b88bcd00bc46fe845bd9a8b89d2a3bd?s=128&d=identicon&r=PG&f=1", "display_name": "learner", "link": "https://stackoverflow.com/users/788153/learner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 320, "favorite_count": 0, "accepted_answer_id": 48433673, "answer_count": 1, "score": 0, "last_activity_date": 1516838844, "creation_date": 1516838285, "last_edit_date": 1516838844, "question_id": 48433605, "link": "https://stackoverflow.com/questions/48433605/generate-regex-for-exact-words-from-a-list", "title": "Generate regex for exact words from a list", "body": "<p>I am trying to write a regex that can match any word in the following or similar words. <code>*</code> in these strings are exact <code>*</code> and not any character.</p>\n\n<pre><code>Jump\nJ**p\nJ*m*\nJ***\n***p\nJ***ing\nJ***ed\n****ed\n</code></pre>\n\n<p>I want to keeo the length fixed.  </p>\n\n<pre><code>1. Any string of lenght 4 that matches the string 'jump' \n2. Any string of length 6 that matches 'jumped' \n3. Any string of length 7 that matches 'jumping' \n</code></pre>\n\n<p>I was using the following statements but for some reason, i am not able to to the correct translation. It accepts other strings as well. </p>\n\n<pre><code>p = re.compile('j|\\*)(u|\\*)(m|\\*)...)\nbool(p.match('******g'))\n</code></pre>\n"}, {"tags": ["python", "numpy"], "answers": [{"tags": [], "owner": {"reputation": 3528, "user_id": 3373942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lU4jQ.jpg?s=128&g=1", "display_name": "Robbie", "link": "https://stackoverflow.com/users/3373942/robbie"}, "is_accepted": false, "score": 0, "last_activity_date": 1516838522, "creation_date": 1516838522, "answer_id": 48433631, "question_id": 48433601, "link": "https://stackoverflow.com/questions/48433601/how-do-i-find-the-coordinates-of-nan-values-in-a-numpy-array/48433631#48433631", "title": "How do I find the coordinates of nan values in a numpy array?", "body": "<pre><code>import numpy as np\n\nx = np.array([0,0,-1,1,np.nan, 0, 1, np.nan])\nprint np.where(np.isnan(x))\n</code></pre>\n\n<p>Returns:</p>\n\n<pre><code>(array([4, 7]),)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 174, "user_id": 9236996, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7nwsj.jpg?s=128&g=1", "display_name": "Caleb", "link": "https://stackoverflow.com/users/9236996/caleb"}, "is_accepted": true, "score": 2, "last_activity_date": 1516838557, "creation_date": 1516838557, "answer_id": 48433636, "question_id": 48433601, "link": "https://stackoverflow.com/questions/48433601/how-do-i-find-the-coordinates-of-nan-values-in-a-numpy-array/48433636#48433636", "title": "How do I find the coordinates of nan values in a numpy array?", "body": "<p>You need to change</p>\n\n<pre><code>np.where(a == np.nan)\n</code></pre>\n\n<p>to</p>\n\n<pre><code>np.where(np.isnan(a))\n</code></pre>\n\n<p>NaN values always return false in equality checks, even with another NaN value. So you need to use special functions to check for NaN like np.isnan.</p>\n"}], "owner": {"reputation": 1390, "user_id": 1273987, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/b3f583352439f5fd7d2787f7c7402c4d?s=128&d=identicon&r=PG", "display_name": "Ziofil", "link": "https://stackoverflow.com/users/1273987/ziofil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1191, "favorite_count": 1, "closed_date": 1516838654, "accepted_answer_id": 48433636, "answer_count": 2, "score": 2, "last_activity_date": 1516838588, "creation_date": 1516838212, "question_id": 48433601, "link": "https://stackoverflow.com/questions/48433601/how-do-i-find-the-coordinates-of-nan-values-in-a-numpy-array", "closed_reason": "Duplicate", "title": "How do I find the coordinates of nan values in a numpy array?", "body": "<p>I tried <code>np.where</code> but without success:</p>\n\n<pre><code>&gt;&gt;&gt;a = np.array([np.nan, 1])\n&gt;&gt;&gt;np.where(a == np.nan)\n(array([], dtype=int64),)\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "reactjs", "flask"], "answers": [{"tags": [], "owner": {"reputation": 1083, "user_id": 5819113, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8ECON.jpg?s=128&g=1", "display_name": "bluesmonk", "link": "https://stackoverflow.com/users/5819113/bluesmonk"}, "is_accepted": true, "score": 2, "last_activity_date": 1526060147, "creation_date": 1526060147, "answer_id": 50297495, "question_id": 48433578, "link": "https://stackoverflow.com/questions/48433578/proper-way-to-include-builds-from-react-apps-into-flask/50297495#50297495", "title": "Proper way to include builds from react apps into Flask", "body": "<p>I've solved it tweaking the blueprint</p>\n\n<pre><code>bp = Blueprint(name='myblueprint', \n                    import_name=__name__,\n                    static_folder='static/myblueprint',\n                    template_folder='templates',\n                    static_url_path='/static', # this is what myblueprint.static will point to\n                    url_prefix='/myblueprint', \n                    subdomain=None,\n                    url_defaults=None, \n                    root_path=None)\n</code></pre>\n\n<p>With this, my static paths inside the blueprint will point to <code>/myblueprint/static</code>, and I will need to modify my <code>create-react-app</code> build folder.</p>\n\n<ul>\n<li>replace calls to <code>static</code> in every *.css, *.js and .html in <code>/build</code> to <code>/myblueprint/static</code></li>\n<li>rearrange folders inside <code>/build</code> to match my blueprint <code>static</code> folder. \n\n<ul>\n<li>Move <code>/build/static</code> to <code>/blueprint/static</code></li>\n<li>Set my own jinja template in <code>/blueprint/templates/index.html</code> that calls these files. Make sure this file points to the static assets in <code>/myblueprint/static</code> and not to <code>/build/static</code>. </li>\n</ul></li>\n</ul>\n\n<p>I've created a <code>gulpfile</code> that will automate this process, </p>\n\n<pre><code>var gulp = require('gulp');\nvar replace = require('gulp-replace');\nvar rename = require('gulp-rename');\n\n// script to deploy react build into flask blueprint directory\n// it replaces values and folder names\n\n// README\n// how to use this:\n// in the react app, run npm run build\n// copy the resulting /build folder in /myblueprint\n// create a template of a template in /templates/base as index.default.html\n\n// install gulp, gulp-replace, gulp-rename\n// run gulp from /myblueprint\n\n\n// replace routes inside css files\n\ngulp.task('othertemplates', function(){\n  gulp.src(['./build/static/css/main.*.css'])\n    .pipe(replace('url(/static/media/', 'url(/myblueprint/static/media/'))\n    .pipe(gulp.dest('static/myblueprint/css/'));\n});\n\n// replace routes inside js files\n\ngulp.task('jsthingtemplates', function(){\n  gulp.src(['./build/static/js/main.*.js'])\n    .pipe(replace('static/media/', 'myblueprint/static/media/'))\n    .pipe(gulp.dest('static/myblueprint/js/'));\n});\n\n// move other files\n\ngulp.task('mediastuff', function(){\n  gulp.src(['./build/static/media/*'])\n    .pipe(gulp.dest('static/myblueprint/media/'));\n\n  gulp.src(['./build/asset-manifest.json'])\n    .pipe(gulp.dest('static/myblueprint/'));\n});\n\n// replace hashes in assets in the jinja template\n\ngulp.task('jinjareplace', function(){\n\n  var fs = require('fs');\n  var assets = JSON.parse(fs.readFileSync('./build/asset-manifest.json'));\n\n  // extract hashes\n\n  let jsHashNew = assets['main.js'].match('[a-z0-9]{8}')\n  let cssHashNew = assets['main.css'].match('[a-z0-9]{8}')\n\n  gulp.src(['./templates/myblueprint/base/index.default.html'])\n    .pipe(replace('css/main.cssHash.css', `css/main.${cssHashNew}.css`))\n    .pipe(replace('js/main.jsHash.js', `js/main.${jsHashNew}.js`))\n    .pipe(rename('index.html'))\n    .pipe(gulp.dest('templates/myblueprint/'));\n});\n\n\ngulp.task('default', ['othertemplates', 'jsthingtemplates', 'mediastuff', 'jinjareplace'])\n</code></pre>\n\n<p>with this, you can run <code>gulp</code> from the same path as <code>gulpfile.js</code> and should have everything covered.</p>\n"}], "owner": {"reputation": 1083, "user_id": 5819113, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8ECON.jpg?s=128&g=1", "display_name": "bluesmonk", "link": "https://stackoverflow.com/users/5819113/bluesmonk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1212, "favorite_count": 0, "accepted_answer_id": 50297495, "answer_count": 1, "score": 3, "last_activity_date": 1526060147, "creation_date": 1516838032, "last_edit_date": 1518202297, "question_id": 48433578, "link": "https://stackoverflow.com/questions/48433578/proper-way-to-include-builds-from-react-apps-into-flask", "title": "Proper way to include builds from react apps into Flask", "body": "<p>I have a site developed entirely using flask. It uses a Blueprint called <code>dashboards</code>, which hosts some views to access different visualizations, i.e   <code>dashboards/&lt;string: dashboard_name&gt;</code></p>\n\n<p>I store my dashboards with an <code>id</code>, a <code>name</code> and the <code>group</code> it belongs to, so users can only access the visualizations from the group they also belong to.</p>\n\n<p>(This is my unexperienced approach to solve this problem, so I'm also open to suggestions of a better design pattern to achieve this.)</p>\n\n<p>My project kinda looks like this</p>\n\n<pre><code>app\n\u251c\u2500\u2500 dashboards\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 __init__.py\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 views.py\n\u251c\u2500\u2500 __init__.py\n\u251c\u2500\u2500 models\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 dashboard.py\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 __init__.p\n\u251c\u2500\u2500 static\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 css\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 styles.css\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 js\n\u2502\u00a0\u00a0     \u2514\u2500\u2500 scripts.js\n\u2514\u2500\u2500 templates\n    \u251c\u2500\u2500 base.html\n    \u2514\u2500\u2500 dashboards\n     \u00a0\u00a0 \u251c\u2500\u2500 cat.html\n     \u00a0\u00a0 \u251c\u2500\u2500 clock.html\n     \u00a0\u00a0 \u251c\u2500\u2500 index.html\n     \u00a0\u00a0 \u251c\u2500\u2500 private.html\n     \u00a0\u00a0 \u2514\u2500\u2500 public.html\n</code></pre>\n\n<p>my views for the Dashboard blueprint</p>\n\n<pre><code># app/dashboards/views.py\n\nfrom ..models.dashboard import Dashboard\n\n@dashboards.route('/&lt;string:name&gt;')\ndef view_dashboard(name):\n    # a dictionary with dashboards available to current_user\n    dashboards = get_dashboards() \n\n    for dashboard in dashboards.values():\n        for d in dashboard:\n            if name == d.name:\n                route = 'dashboards/{dashboard}.html'.format(dashboard = d.name)\n                return render_template(route, dashboard=d)\n    else:\n        return render_template('404.html'), 404\n</code></pre>\n\n<p>and for the Dashboard blueprint</p>\n\n<pre><code># app/dashboards/__init__.py\n\nfrom flask import Blueprint\n\ndashboards = Blueprint('dashboards', __name__)\n\nfrom . import views\n</code></pre>\n\n<p>finally, I use the create_app pattern</p>\n\n<pre><code># app/__init__.py\n\n# some imports happening here\n\ndef create_app(config_name):\n    app = Flask(__name__)\n\n    from .dashboards import dashboards as dashboards_blueprint\n    app.register_blueprint(dashboards_blueprint, url_prefix='/dashboards')\n\n    return app\n</code></pre>\n\n<p>One level above the <code>app</code>, there is a <code>manage.py</code> that calls the <code>create_app</code> method, passing some configuration attributes. I believe this is a common pattern in Flask. I also believe this is not relevant to my question.</p>\n\n<p>Particularly, if one deploys a react app using the create-react-app package, i.e.  using <code>npm run build</code>, the output is a folder <code>/build</code> that contains the static files necessary to run the app. This folder has, for instance the following structure</p>\n\n<pre><code>\u251c\u2500\u2500 build\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 asset-manifest.json\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 favicon.ico\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 index.html\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 manifest.json\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 service-worker.js\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 static\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 css\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u251c\u2500\u2500 main.&lt;some-hash-1&gt;.css\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2514\u2500\u2500 main.&lt;some-hash-1&gt;.css.map\n\u2502\u00a0\u00a0     \u2514\u2500\u2500 js\n\u2502\u00a0\u00a0         \u251c\u2500\u2500 main.&lt;some-hash-2&gt;.js\n\u2502\u00a0\u00a0         \u2514\u2500\u2500 main.&lt;some-hash-2&gt;.js.map\nother files here\n</code></pre>\n\n<p>Now if want to plug this react-app using Flask, what I do now is to move the files in <code>/css</code> and <code>/js</code> of <code>/build</code> to the <code>/static</code> folder inside <code>/app</code>, and rename <code>index.html</code> from <code>/build</code> into let's say 'react-dashboard.html' and move it to <code>templates/dashboards</code>.</p>\n\n<p>This is a very dumb approach to make basic apps working, but I don't know where to place the other files from <code>/build</code>, and lest about a better design pattern.</p>\n\n<p>From this <a href=\"http://flask.pocoo.org/docs/0.12/blueprints/#static-files\" rel=\"nofollow noreferrer\">README</a> I get that I can tweak the blueprint definition and move my template and static folder inside <code>app/dashboards</code>, but I still don't know where other files as <code>service-worker.js</code>, and manifests and so on.</p>\n\n<p>What is the proper  way to \"mount\" my deployed react app on my Flask application? I understand that reorganizing files from <code>/build</code> is something not desired.</p>\n"}, {"tags": ["python", "html", "sockets", "httprequest"], "comments": [{"owner": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "edited": false, "score": 0, "creation_date": 1516838172, "post_id": 48433543, "comment_id": 83858514, "body": "The website you&#39;re trying to load is rejecting your request with a 403 Forbidden error. This code works fine for other websites."}, {"owner": {"reputation": 15, "user_id": 7093299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e076e7aebe3ed34a45b7889a72dcd7a?s=128&d=identicon&r=PG&f=1", "display_name": "Xlqt", "link": "https://stackoverflow.com/users/7093299/xlqt"}, "reply_to_user": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "edited": false, "score": 0, "creation_date": 1516838679, "post_id": 48433543, "comment_id": 83858694, "body": "@Rawing When I try it with arguments like &quot;www.google.ca&quot; or &quot;www.google.com&quot; for example, I get 301 error codes, where those same passed arguments with a urlib2 approach work perfectly"}], "owner": {"reputation": 15, "user_id": 7093299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e076e7aebe3ed34a45b7889a72dcd7a?s=128&d=identicon&r=PG&f=1", "display_name": "Xlqt", "link": "https://stackoverflow.com/users/7093299/xlqt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 25, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1516837768, "creation_date": 1516837768, "question_id": 48433543, "link": "https://stackoverflow.com/questions/48433543/getting-only-partial-html-when-using-sockets-in-python", "title": "Getting only partial HTML when using sockets in python", "body": "<p>i've been tasked with using sockets in python to grab the HTML from a site.\nSo far, this is what i've come up with.</p>\n\n<pre><code>s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\nhostName = socket.gethostbyname('www.usask.ca')\nprint(hostName)\ns.connect((hostName, 80))\ns.send(\"GET / HTTP/1.0\\r\\nHost: \" + hostName + \"\\r\\n\\r\\n\")\nprint (s.recv(500000000))\ns.close\n</code></pre>\n\n<p>It doesn't work very well. I'm less concerned with the robustness of it (I think it's a problem of the request formatting) and more concerned with it only printing a small fraction of the html when it does work.  </p>\n\n<p>When using something like urlib2 to get the html it seems by comparison, that i'm only getting at most 10% of what I want.  </p>\n"}, {"tags": ["python", "qt", "pyqt", "pyqt5"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1516840780, "post_id": 48433529, "comment_id": 83859325, "body": "charFormat() is passed by value, so a new instance is created, so you are saving the value of 100 in another new variable so you do not see that value in the loop. Also change HextEditor() to TestEditor()"}, {"owner": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "edited": false, "score": 0, "creation_date": 1516841291, "post_id": 48433529, "comment_id": 83859460, "body": "If change a char-format object in any way, you must reapply it for the changes to be made permanent."}, {"owner": {"reputation": 1595, "user_id": 1539179, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/e6c6e52feb1bdb3b5fe4599c7c6539e6?s=128&d=identicon&r=PG", "display_name": "user1539179", "link": "https://stackoverflow.com/users/1539179/user1539179"}, "edited": false, "score": 0, "creation_date": 1516848519, "post_id": 48433529, "comment_id": 83861160, "body": "What function/method should I call to apply the change?"}], "answers": [{"tags": [], "owner": {"reputation": 1595, "user_id": 1539179, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/e6c6e52feb1bdb3b5fe4599c7c6539e6?s=128&d=identicon&r=PG", "display_name": "user1539179", "link": "https://stackoverflow.com/users/1539179/user1539179"}, "is_accepted": true, "score": 2, "last_activity_date": 1516896400, "creation_date": 1516896400, "answer_id": 48447220, "question_id": 48433529, "link": "https://stackoverflow.com/questions/48433529/how-to-set-property-of-qtextcharformat-in-pyqt/48447220#48447220", "title": "How to set property of QTextCharFormat in PyQt?", "body": "<p>I solved this by saving the range of the inserted image, selecting it, and using <a href=\"http://doc.qt.io/qt-5/qtextcursor.html#setCharFormat\" rel=\"nofollow noreferrer\">QTextCursor.setCharFormat()</a> to save the changes:</p>\n\n<pre><code>import sys\nfrom PyQt5.QtWidgets import *\nfrom PyQt5.QtGui import *\n\nclass TestEditor(QWidget):\n\n    def __init__(self):\n        QWidget.__init__(self)\n\n        layout = QVBoxLayout()\n        self.setLayout(layout)\n        self.layout().setSpacing(0)\n        self.layout().setContentsMargins(0, 0, 0, 0)\n        self.textEdit = QTextEdit()\n        self.layout().addWidget(self.textEdit)\n\n        document = self.textEdit.document()\n        cursor = QTextCursor(document)\n\n        # Save the position of the beginning and end of the inserted image\n        p1 = cursor.position()\n        cursor.insertImage(\"./testimage.png\")\n        p2 = cursor.position()\n\n        f = cursor.charFormat()\n        print(f)\n\n        prop_id = 0x100000 + 1\n        f.setProperty(prop_id, 100)\n\n        # Select the inserted fragment and apply format\n        cursor.setPosition(p1)\n        cursor.setPosition(p2, QTextCursor.KeepAnchor)\n        cursor.setCharFormat(f)\n\n        print(f.intProperty(prop_id))\n        print('------')\n\n        block = document.firstBlock()\n        while block.length() &gt; 0:\n            print(block)\n            it = block.begin()\n            while not it.atEnd():\n                f = it.fragment()\n                fmt = f.charFormat()\n                print(fmt)\n                print(fmt.intProperty(prop_id))\n                it += 1\n            block = block.next()\n\nclass TestWindow(QWidget):\n    def __init__(self):\n        QWidget.__init__(self)\n        self.initUi()\n\n    def initUi(self):\n        layout = QVBoxLayout()\n        layout.addWidget(TestEditor())\n\n        self.setLayout(layout)\n        self.layout().setSpacing(0)\n        self.layout().setContentsMargins(0, 0, 0, 0)\n        self.setWindowTitle('button tooltip')\n        self.show()\n\ndef main():\n    app = QApplication(sys.argv)\n    window = TestWindow()\n    sys.exit(app.exec_())\n\nif __name__ == '__main__':\n    main()\n</code></pre>\n"}], "owner": {"reputation": 1595, "user_id": 1539179, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/e6c6e52feb1bdb3b5fe4599c7c6539e6?s=128&d=identicon&r=PG", "display_name": "user1539179", "link": "https://stackoverflow.com/users/1539179/user1539179"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 891, "favorite_count": 0, "accepted_answer_id": 48447220, "answer_count": 1, "score": 0, "last_activity_date": 1516896400, "creation_date": 1516837670, "last_edit_date": 1516838056, "question_id": 48433529, "link": "https://stackoverflow.com/questions/48433529/how-to-set-property-of-qtextcharformat-in-pyqt", "title": "How to set property of QTextCharFormat in PyQt?", "body": "<p>I am trying to set a custom property of an image inserted into a <code>QTextEdit</code>. I have the following example code which sets then outputs the value of the property to the terminal:</p>\n\n<pre><code>import sys\nfrom PyQt5.QtWidgets import *\nfrom PyQt5.QtGui import *\n\nclass TestEditor(QWidget):\n\n    def __init__(self):\n        QWidget.__init__(self)\n\n        layout = QVBoxLayout()\n        self.setLayout(layout)\n        self.layout().setSpacing(0)\n        self.layout().setContentsMargins(0, 0, 0, 0)\n        self.textEdit = QTextEdit()\n        self.layout().addWidget(self.textEdit)\n\n        document = self.textEdit.document()\n        cursor = QTextCursor(document)\n        cursor.insertImage(\"./testimage.png\")\n        f = cursor.charFormat()\n        print(f)\n\n        prop_id = 0x100000 + 1\n        f.setProperty(prop_id, 100)\n        print(f.intProperty(prop_id))\n        print('------')\n\n        block = document.firstBlock()\n        while block.length() &gt; 0:\n            print(block)\n            it = block.begin()\n            while not it.atEnd():\n                f = it.fragment()\n                fmt = f.charFormat()\n                print(fmt)\n                print(fmt.intProperty(prop_id))\n                it += 1\n            block = block.next()\n\nclass TestWindow(QWidget):\n    def __init__(self):\n        QWidget.__init__(self)\n        self.initUi()\n\n    def initUi(self):\n        layout = QVBoxLayout()\n        layout.addWidget(HextEditor())\n\n        self.setLayout(layout)\n        self.layout().setSpacing(0)\n        self.layout().setContentsMargins(0, 0, 0, 0)\n        self.setWindowTitle('button tooltip')\n        self.show()\n\ndef main():\n    app = QApplication(sys.argv)\n    window = TestWindow()\n    sys.exit(app.exec_())\n\nif __name__ == '__main__':\n    main()\n</code></pre>\n\n<p>The program results in an output of:</p>\n\n<pre><code>&lt;PyQt5.QtGui.QTextCharFormat object at 0x107109ba8&gt;\n100\n------\n&lt;PyQt5.QtGui.QTextBlock object at 0x105448318&gt;\n&lt;PyQt5.QtGui.QTextCharFormat object at 0x107109ba8&gt;\n0\n</code></pre>\n\n<p>Note that the second time the value is gotten it has a value of 0 rather than 100. It even appears to be the same instance of a <code>QTextCharFormat</code>. How would I accomplish something like this? Am I missing something simple here?</p>\n"}, {"tags": ["python", "django", "authentication", "django-models", "django-forms"], "comments": [{"owner": {"reputation": 823, "user_id": 5949840, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NR4A7.jpg?s=128&g=1", "display_name": "Sumeet Kumar", "link": "https://stackoverflow.com/users/5949840/sumeet-kumar"}, "edited": false, "score": 0, "creation_date": 1516860729, "post_id": 48433519, "comment_id": 83864572, "body": "why are you adding <code>instance=request.user</code> and <code>instance=request.user.student</code>, you need to understand when signing up as a new user there is no logged in user."}, {"owner": {"reputation": 151, "user_id": 1542175, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1282077737/picture?type=large", "display_name": "Amr Ezzat", "link": "https://stackoverflow.com/users/1542175/amr-ezzat"}, "reply_to_user": {"reputation": 823, "user_id": 5949840, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NR4A7.jpg?s=128&g=1", "display_name": "Sumeet Kumar", "link": "https://stackoverflow.com/users/5949840/sumeet-kumar"}, "edited": false, "score": 0, "creation_date": 1516885337, "post_id": 48433519, "comment_id": 83878362, "body": "I tried to remove them , the user created successfully but student didn&#39;t get the input data I get  integrityError at /add_stu/ NOT NULL constraint failed: helwan_student.user_id"}, {"owner": {"reputation": 823, "user_id": 5949840, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NR4A7.jpg?s=128&g=1", "display_name": "Sumeet Kumar", "link": "https://stackoverflow.com/users/5949840/sumeet-kumar"}, "edited": false, "score": 0, "creation_date": 1516885945, "post_id": 48433519, "comment_id": 83878746, "body": "yeah that is because you are also trying to save student that has a foreign key relation to user. you need to student&#39;s user field also in order to save student form"}, {"owner": {"reputation": 151, "user_id": 1542175, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1282077737/picture?type=large", "display_name": "Amr Ezzat", "link": "https://stackoverflow.com/users/1542175/amr-ezzat"}, "reply_to_user": {"reputation": 823, "user_id": 5949840, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NR4A7.jpg?s=128&g=1", "display_name": "Sumeet Kumar", "link": "https://stackoverflow.com/users/5949840/sumeet-kumar"}, "edited": false, "score": 0, "creation_date": 1516901658, "post_id": 48433519, "comment_id": 83890098, "body": "Yeah that was the problem , Thanks for you :)"}], "answers": [{"comments": [{"owner": {"reputation": 823, "user_id": 5949840, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NR4A7.jpg?s=128&g=1", "display_name": "Sumeet Kumar", "link": "https://stackoverflow.com/users/5949840/sumeet-kumar"}, "reply_to_user": {"reputation": 151, "user_id": 1542175, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1282077737/picture?type=large", "display_name": "Amr Ezzat", "link": "https://stackoverflow.com/users/1542175/amr-ezzat"}, "edited": false, "score": 0, "creation_date": 1516901583, "post_id": 48443960, "comment_id": 83890060, "body": "Glad to help. :)"}], "tags": [], "owner": {"reputation": 823, "user_id": 5949840, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NR4A7.jpg?s=128&g=1", "display_name": "Sumeet Kumar", "link": "https://stackoverflow.com/users/5949840/sumeet-kumar"}, "is_accepted": false, "score": 1, "last_activity_date": 1516886758, "creation_date": 1516886758, "answer_id": 48443960, "question_id": 48433519, "link": "https://stackoverflow.com/questions/48433519/disable-logout-after-adding-user-django/48443960#48443960", "title": "disable logout after adding user django", "body": "<p>you can't save profile_form directly as it has a foreign key relation to user and is required. so before you can save profile_form you need to save user and then add the user to profile.</p>\n\n<pre><code>def add_stu(request):\n    if request.method == 'GET':\n        return render(request, \"add_student.html\")\n    else:\n        user_form = UserForm(request.POST)\n        profile_form = studentForm(request.POST)\n        new_user = user_form.save()\n        profile = profile_form.save(commit=False)\n        profile.user = new_user\n        profile.save()\n</code></pre>\n"}], "owner": {"reputation": 151, "user_id": 1542175, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1282077737/picture?type=large", "display_name": "Amr Ezzat", "link": "https://stackoverflow.com/users/1542175/amr-ezzat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1516886758, "creation_date": 1516837602, "question_id": 48433519, "link": "https://stackoverflow.com/questions/48433519/disable-logout-after-adding-user-django", "title": "disable logout after adding user django", "body": "<p>I need to create admin panel in django , admin will be able to add students\"which extended from users \" , I finally be able to add them , but after that I get \"'AnonymousUser' object has no attribute '_meta'\nUser is added to the database correctly , But django logged me out !\nHow Can I keep my current user session !</p>\n\n<pre><code> class student(models.Model):\n\n    Computers = 1\n    Communications = 2\n    Dep_CHOICES = (\n        (Computers, 'Computers'),\n        (Communications, 'Communications'),\n    )\n\n    user = models.OneToOneField(User, on_delete=models.CASCADE)\n    dep = models.PositiveSmallIntegerField(choices=Dep_CHOICES, null=True, blank=True)\n    deg = models.FloatField(null=True, blank=True)\n\n    def __str__(self):  # __unicode__ for Python 2\n        return self.user.username\n\n\ndef create_user_profile(sender, instance, created):\n    if created:\n        student.objects.create(user=instance)\n\n\ndef save_user_profile(sender, instance , **kwargs):\n    instance.student.save()\n\n\n\nclass UserForm(ModelForm):\n    class Meta:\n        model = User\n        fields = ('username', 'email', 'password')\n\n\nclass studentForm(ModelForm):\n    class Meta:\n        model = student\n        fields = ('dep', 'deg')\n</code></pre>\n\n<p>The view </p>\n\n<pre><code>def add_stu(request):\n    if request.method == 'GET':\n        return render(request, \"add_student.html\")\n    else:\n        user_form = UserForm(request.POST, instance=request.user)\n        profile_form = studentForm(request.POST, instance=request.user.student)\n\n        user_form.save()\n        profile_form.save()\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "pyqt", "pyqt5", "pyinstaller"], "owner": {"reputation": 73, "user_id": 8529132, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/471a0a867ebc5a3044ef504ffa9b6cf0?s=128&d=identicon&r=PG&f=1", "display_name": "Sleepy-Z", "link": "https://stackoverflow.com/users/8529132/sleepy-z"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 704, "favorite_count": 1, "answer_count": 0, "score": 3, "last_activity_date": 1516837286, "creation_date": 1516837286, "question_id": 48433481, "link": "https://stackoverflow.com/questions/48433481/pyqt5-with-pyinstaller-error-no-module", "title": "PyQt5 with PyInstaller error, no module", "body": "<p>I am trying to bundle a python program into an application using PyInstaller on Mac OS X. I am running into an issue where when I go to run the application directly from the executable I get an error:</p>\n\n<pre><code>ImportError: No module named PyQt5.QtWidgets\n</code></pre>\n\n<p>I have tried to import the module as a hidden import in the .spec file.. This idea didn't worked. When I run the pyinstaller command with no hooks and no imports this prints in terminal</p>\n\n<pre><code>22530 INFO: Excluding import 'PyQt5'\n22533 WARNING:   Removing import PIL.ImageQt from module PyQt5\n</code></pre>\n\n<p>These are my import statements</p>\n\n<pre><code>from PyQt5.QtWidgets import *\nfrom PyQt5.QtGui import *\nfrom PyQt5.QtCore import *\n</code></pre>\n\n<p>Why is pyinstaller excluding PyQt5 from the build? How can I prevent it from doing it?</p>\n"}, {"tags": ["python", "python-3.x", "subprocess", "popen", "os.system"], "comments": [{"owner": {"reputation": 8699, "user_id": 1726083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/757452f7cd7ba2347c667ef9298ceadb?s=128&d=identicon&r=PG", "display_name": "Daniel Farrell", "link": "https://stackoverflow.com/users/1726083/daniel-farrell"}, "edited": false, "score": 0, "creation_date": 1516838594, "post_id": 48433478, "comment_id": 83858662, "body": "Actually, I think <code>source</code> itself is not found.  See my answer."}, {"owner": {"reputation": 135, "user_id": 7798970, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/PiMoa.png?s=128&g=1", "display_name": "EliC", "link": "https://stackoverflow.com/users/7798970/elic"}, "reply_to_user": {"reputation": 8699, "user_id": 1726083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/757452f7cd7ba2347c667ef9298ceadb?s=128&d=identicon&r=PG", "display_name": "Daniel Farrell", "link": "https://stackoverflow.com/users/1726083/daniel-farrell"}, "edited": false, "score": 0, "creation_date": 1516840415, "post_id": 48433478, "comment_id": 83859223, "body": "@DanFarrell Ahhhh! That is true, I forgot that it would be in a shell and not a bash! I will try this out when I get a chance later this evening."}, {"owner": {"reputation": 1166, "user_id": 102720, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/70b8aa00b275a567e49bad69b52e43af?s=128&d=identicon&r=PG", "display_name": "Tominator", "link": "https://stackoverflow.com/users/102720/tominator"}, "edited": false, "score": 0, "creation_date": 1603921064, "post_id": 48433478, "comment_id": 114192831, "body": "I know it&#39;s old, but the answer is indeed that it&#39;s using &#39;/bin/sh&#39; instead of bash, where you need just a <code>.</code> instead of <code>source</code>"}], "answers": [{"comments": [{"owner": {"reputation": 135, "user_id": 7798970, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/PiMoa.png?s=128&g=1", "display_name": "EliC", "link": "https://stackoverflow.com/users/7798970/elic"}, "edited": false, "score": 1, "creation_date": 1516904996, "post_id": 48433624, "comment_id": 83891941, "body": "This did the trick! Had to make a few minor changes, but got it working perfectly. Thanks for all your help!"}], "tags": [], "owner": {"reputation": 8699, "user_id": 1726083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/757452f7cd7ba2347c667ef9298ceadb?s=128&d=identicon&r=PG", "display_name": "Daniel Farrell", "link": "https://stackoverflow.com/users/1726083/daniel-farrell"}, "is_accepted": true, "score": 3, "last_activity_date": 1516838480, "creation_date": 1516838480, "answer_id": 48433624, "question_id": 48433478, "link": "https://stackoverflow.com/questions/48433478/how-to-activate-an-anaconda-environment-within-a-python-script-on-a-remote-machi/48433624#48433624", "title": "How to activate an anaconda environment within a Python script on a remote machine?", "body": "<p>Your default shell doesn't support <code>source</code>, but it's likely your system also provides bash.  Try something like this:</p>\n\n<pre><code>subprocess.run(\"bash -c 'source /root/conda3/envs/punc2/bin/activate /root/conda3/envs/punc2 &amp;&amp; ... &amp;&amp; source deactivate', shell=True)\n</code></pre>\n\n<p>You don't need a shell to invoke a shell, so you could probably get away with something more like</p>\n\n<pre><code>subprocess.run(\"/use/bin/env\", \"bash\", \"-c\", \"source /root/conda3/envs/punc2/bin/activate /root/conda3/envs/punc2 &amp;&amp; ... &amp;&amp; source deactivate\")\n</code></pre>\n"}], "owner": {"reputation": 135, "user_id": 7798970, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/PiMoa.png?s=128&g=1", "display_name": "EliC", "link": "https://stackoverflow.com/users/7798970/elic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3709, "favorite_count": 2, "accepted_answer_id": 48433624, "answer_count": 1, "score": 3, "last_activity_date": 1516838480, "creation_date": 1516837270, "question_id": 48433478, "link": "https://stackoverflow.com/questions/48433478/how-to-activate-an-anaconda-environment-within-a-python-script-on-a-remote-machi", "title": "How to activate an anaconda environment within a Python script on a remote machine?", "body": "<p>I am currently trying to find a way to activate an anaconda environment within a Python script that is running on a remote server. I have found the following similar questions on Stack Overflow <a href=\"https://stackoverflow.com/questions/36275308/how-do-you-activate-an-anaconda-environment-within-a-python-script\">here</a>, and <a href=\"https://stackoverflow.com/questions/35982273/use-anaconda-environment-without-activate-e-g-in-crontab\">here</a>, but have had no success with what they suggest. I just keep getting this simple error <code>sh: 1: source: not found</code>.From my understanding this is because the conda environment it not being found After much research, I have found no other way to do this when using a python script, but if anyone has an suggestions I would love to pass some ideas around! Thanks, in advance! </p>\n\n<p>Here is the code:</p>\n\n<pre><code>import os \nimport subprocess\nfrom subprocess import Popen\n\nvalue = 'activate punc2'\n#os.system(\"cd /Users/elicobler/tiny_dancer/Testing/thrive/API_text_results\")\n#os.system('source root/conda3/envs/punc2/bin/activate /root/conda3/envs/punc2')\n#os.system('source activate punc2')\n#Popen('source activate punc2')\n#subprocess.call('source', value)\nsubprocess.run('source root/conda3/envs/punc2/bin/activate /root/conda3/envs/punc2 &amp;&amp; cat /var/www/html/1.22.18 - Monday - Hr 1 - Seg 1-5a65e2698c1dd07f02c25679.txt | python punctuator.py models/endquote.pcl /var/www/html/1.22.18 - Monday - Hr 1 - Seg 1-5a65e2698c1dd07f02c25679.txt &amp;&amp; source deactivate', shell=True)\n</code></pre>\n"}, {"tags": ["python", "postgresql", "pandas", "sqlalchemy"], "comments": [{"owner": {"reputation": 898, "user_id": 1786967, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/bdb37f71889f136513c7b42f9805666f?s=128&d=identicon&r=PG", "display_name": "timmur", "link": "https://stackoverflow.com/users/1786967/timmur"}, "edited": false, "score": 0, "creation_date": 1516838555, "post_id": 48433463, "comment_id": 83858651, "body": "have you considered uploading pandas dataframe to database and doing a table join?"}, {"owner": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "reply_to_user": {"reputation": 898, "user_id": 1786967, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/bdb37f71889f136513c7b42f9805666f?s=128&d=identicon&r=PG", "display_name": "timmur", "link": "https://stackoverflow.com/users/1786967/timmur"}, "edited": false, "score": 0, "creation_date": 1516861626, "post_id": 48433463, "comment_id": 83864904, "body": "Use <code>zip(tickername, timestamp)</code> to generate an iterable of <code>(ticker, timestamp)</code> tuples and follow the answer from the linked Q/A (<code>tuple_(T.ticker, T.timestamp).in_(pairs)</code>), if you don&#39;t have a really large amount of pairs. If you do, follow @Krishna&#39;s advice."}, {"owner": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "edited": false, "score": 0, "creation_date": 1516862038, "post_id": 48433463, "comment_id": 83865064, "body": "Will those pairs select most of the table&#39;s data, and if not, do you have a suitable index? If you&#39;re asking SQL performance questions, include the related table schema."}], "owner": {"reputation": 790, "user_id": 996427, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/d53a1867421026c940c78946d669b03d?s=128&d=identicon&r=PG", "display_name": "Slackware", "link": "https://stackoverflow.com/users/996427/slackware"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "closed_date": 1516879263, "answer_count": 0, "score": 0, "last_activity_date": 1516861553, "creation_date": 1516837178, "last_edit_date": 1516861553, "question_id": 48433463, "link": "https://stackoverflow.com/questions/48433463/how-to-select-a-lot-of-specific-rows-from-postgres", "closed_reason": "Duplicate", "title": "How to select a lot of specific rows from postgres", "body": "<p>I am running a program which needs to query a lot of single rows from a database. I have a list of (ticker,timestamp) pairs (in a pandas DataFrame) and I need to retrieve their corresponding price from a database. Right now, I am using pandas' .apply() to run a query against the database for every row in the pandas DataFrame. That is sequential. I find that that is too slow when I have too much data and was wondering how to improve the performance.</p>\n\n<p>I see two methods, one that I think I prefer but I do not understand well.</p>\n\n<p>In one case, I can make one <code>session.query(T).filter(...)</code> where I use</p>\n\n<pre><code>or_( \n    and_(\n        T.ticker == tickername[0],\n        T.timestamp == timestamp[0]\n    ),\n    and_(\n        T.ticker == tickername[1],\n        T.timestamp == timestamp[1]\n    ),\n .... \n)\n</code></pre>\n\n<p>In the other case (that is the one I might prefer if there is an existing method of doing it), I would design one</p>\n\n<pre><code>q = session.query(T).filter(\n    and_(\n        T.ticker= tickername,\n        T.timestamp == timestamp\n    )\n) \n</code></pre>\n\n<p>for each (ticker,timestamp) pair, and I run all the q's in parallel against the database (postgres).</p>\n\n<p>I've tried the first method and it seems like there is a bottleneck somewhere that causes things to hang.</p>\n\n<ul>\n<li>htop shows that the process takes up 6.7% of the memory on the machine.</li>\n<li>sqlalchemy might be bottlenecking, but I don't know how to check that.</li>\n<li>postgres is using a lot of CPU% (htop shows 100% or under 100%), so maybe it is the one bottlenecking</li>\n</ul>\n\n<p>I don't know of a better way to make a bulk query like this. </p>\n"}, {"tags": ["python", "numpy", "pyqt", "pyqt5", "qimage"], "answers": [{"comments": [{"owner": {"reputation": 453, "user_id": 1002098, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ykb51.jpg?s=128&g=1", "display_name": "delrocco", "link": "https://stackoverflow.com/users/1002098/delrocco"}, "edited": false, "score": 0, "creation_date": 1516838177, "post_id": 48433480, "comment_id": 83858517, "body": "Re: PyQT - This effectively gives me what I want, but I have to duplicate the object right? Because I can&#39;t lose my original RGB image."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "reply_to_user": {"reputation": 453, "user_id": 1002098, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ykb51.jpg?s=128&g=1", "display_name": "delrocco", "link": "https://stackoverflow.com/users/1002098/delrocco"}, "edited": false, "score": 0, "creation_date": 1516838232, "post_id": 48433480, "comment_id": 83858542, "body": "@delrocco Then copy it to another image, I will update my answer. :D"}, {"owner": {"reputation": 453, "user_id": 1002098, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ykb51.jpg?s=128&g=1", "display_name": "delrocco", "link": "https://stackoverflow.com/users/1002098/delrocco"}, "edited": false, "score": 0, "creation_date": 1516838445, "post_id": 48433480, "comment_id": 83858615, "body": "lol no I understand that. I mean that is the weakness of that solution is that I have to duplicate the memory for it. That&#39;s all I meant. But I am looking at your new solution."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "reply_to_user": {"reputation": 453, "user_id": 1002098, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ykb51.jpg?s=128&g=1", "display_name": "delrocco", "link": "https://stackoverflow.com/users/1002098/delrocco"}, "edited": false, "score": 0, "creation_date": 1516838657, "post_id": 48433480, "comment_id": 83858683, "body": "@delrocco No, in my initial solution the memory was not duplicated since it replaced the previous memory space. On the other hand I understood you with your initial comment that you did not want to lose the initial image."}, {"owner": {"reputation": 453, "user_id": 1002098, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ykb51.jpg?s=128&g=1", "display_name": "delrocco", "link": "https://stackoverflow.com/users/1002098/delrocco"}, "edited": false, "score": 0, "creation_date": 1516839562, "post_id": 48433480, "comment_id": 83858965, "body": "Your second solution opened my eyes to something else! I thought numpy was making a copy of the pixels from the pointer to the QImage bits. But when I manipulate that pixels numpy array, it directly affects my original QImage. So... I am going to have to duplicate the memory anyway because I need both sets :/"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "reply_to_user": {"reputation": 453, "user_id": 1002098, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ykb51.jpg?s=128&g=1", "display_name": "delrocco", "link": "https://stackoverflow.com/users/1002098/delrocco"}, "edited": false, "score": 0, "creation_date": 1516839776, "post_id": 48433480, "comment_id": 83859026, "body": "@delrocco Exactly, if you want to handle speed, the most common thing that libraries do is not exchange values, but memory positions, it is less expensive to move a variable than hundreds or thousands of them."}, {"owner": {"reputation": 453, "user_id": 1002098, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ykb51.jpg?s=128&g=1", "display_name": "delrocco", "link": "https://stackoverflow.com/users/1002098/delrocco"}, "edited": false, "score": 0, "creation_date": 1516840222, "post_id": 48433480, "comment_id": 83859165, "body": "yes of course. just misunderstanding on my part of numpy array since I am new to it. but thank you for both solutions. I just duplicated the numpy array instead of the QImage, which turned out to be much faster, then did the list slicing."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "reply_to_user": {"reputation": 453, "user_id": 1002098, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ykb51.jpg?s=128&g=1", "display_name": "delrocco", "link": "https://stackoverflow.com/users/1002098/delrocco"}, "edited": false, "score": 0, "creation_date": 1516840301, "post_id": 48433480, "comment_id": 83859191, "body": "@delrocco Many times you will have to decide: memory consumption or speed, so for the following questions say clearly what you want."}], "tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": true, "score": 2, "last_activity_date": 1516838842, "last_edit_date": 1516838842, "creation_date": 1516837282, "answer_id": 48433480, "question_id": 48433383, "link": "https://stackoverflow.com/questions/48433383/numpy-array-reorder-values-in-single-dimension/48433480#48433480", "title": "numpy array reorder values in single dimension", "body": "<ul>\n<li>PyQt:</li>\n</ul>\n\n<p>One possible solution is to use <a href=\"http://doc.qt.io/qt-5/qimage.html#rgbSwapped\" rel=\"nofollow noreferrer\">rgbSwapped()</a>, this method converts RGB to BGR:</p>\n\n<pre><code>self.myPhoto = self.myPhoto.rgbSwapped()\nptr = self.myPhoto.bits()\nptr.setsize(self.myPhoto.byteCount())\npixels = np.asarray(ptr).reshape(self.myPhoto.height(), self.myPhoto.width(), 4)\n</code></pre>\n\n<ul>\n<li>Using Numpy:</li>\n</ul>\n\n<p>using <a href=\"https://docs.scipy.org/doc/numpy/reference/arrays.indexing.html#basic-slicing\" rel=\"nofollow noreferrer\">slicing</a></p>\n\n<pre><code>ptr = self.myPhoto.bits()\nptr.setsize(self.myPhoto.byteCount())\npixels = np.asarray(ptr).reshape(self.myPhoto.height(), self.myPhoto.width(), 4)\n\nr = np.copy(pixels[:,:,0])\npixels[:, :, 0] = pixels[:,:,2]\npixels[:, :, 2] = r\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 453, "user_id": 1002098, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ykb51.jpg?s=128&g=1", "display_name": "delrocco", "link": "https://stackoverflow.com/users/1002098/delrocco"}, "edited": false, "score": 0, "creation_date": 1516838086, "post_id": 48433550, "comment_id": 83858483, "body": "I started doing this, but figured it was a &quot;naive&quot; solution. Would a lambda be better/faster? Or would this work just as fast?"}, {"owner": {"reputation": 732, "user_id": 4854766, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/da0d92a989793b4a9f7fa9fd56b2cbb7?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler Cowan", "link": "https://stackoverflow.com/users/4854766/tyler-cowan"}, "reply_to_user": {"reputation": 453, "user_id": 1002098, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ykb51.jpg?s=128&g=1", "display_name": "delrocco", "link": "https://stackoverflow.com/users/1002098/delrocco"}, "edited": false, "score": 0, "creation_date": 1516838159, "post_id": 48433550, "comment_id": 83858510, "body": "I believe a lambda is faster but unless your processing large arrays in the millions I wouldnt imagine so slow you cant use it. I would try it and see if your happy with the speed and then figure out the lambda later. By faster I think were talking milliseconds I am sure someone who is willing to test will chime in."}, {"owner": {"reputation": 453, "user_id": 1002098, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ykb51.jpg?s=128&g=1", "display_name": "delrocco", "link": "https://stackoverflow.com/users/1002098/delrocco"}, "edited": false, "score": 0, "creation_date": 1516838369, "post_id": 48433550, "comment_id": 83858593, "body": "Ok, I&#39;ll fall back on this. I am working with 4368x2912 HDR images, and the user can flip through them as fast as a mouse wheel, so I&#39;d like it as fast as possible. But I will try it."}, {"owner": {"reputation": 732, "user_id": 4854766, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/da0d92a989793b4a9f7fa9fd56b2cbb7?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler Cowan", "link": "https://stackoverflow.com/users/4854766/tyler-cowan"}, "reply_to_user": {"reputation": 453, "user_id": 1002098, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ykb51.jpg?s=128&g=1", "display_name": "delrocco", "link": "https://stackoverflow.com/users/1002098/delrocco"}, "edited": false, "score": 1, "creation_date": 1516838661, "post_id": 48433550, "comment_id": 83858686, "body": "This might help you figure out performance <a href=\"http://www.benjaminmgross.com/matching-performance-using-python-listss-ndarrays-and-pandas/\" rel=\"nofollow noreferrer\">benjaminmgross.com/&hellip;</a>"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 1, "creation_date": 1516839626, "post_id": 48433550, "comment_id": 83858981, "body": "define <code>order</code> before the loop, you are creating that variable without need in each iteration."}], "tags": [], "owner": {"reputation": 732, "user_id": 4854766, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/da0d92a989793b4a9f7fa9fd56b2cbb7?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler Cowan", "link": "https://stackoverflow.com/users/4854766/tyler-cowan"}, "is_accepted": false, "score": 1, "last_activity_date": 1516893133, "last_edit_date": 1516893133, "creation_date": 1516837816, "answer_id": 48433550, "question_id": 48433383, "link": "https://stackoverflow.com/questions/48433383/numpy-array-reorder-values-in-single-dimension/48433550#48433550", "title": "numpy array reorder values in single dimension", "body": "<p>How about this solution? you can use <a href=\"https://docs.scipy.org/doc/numpy-1.12.0/reference/generated/numpy.ndarray.tolist.html\" rel=\"nofollow noreferrer\">tolist()</a> before sending it through this</p>\n\n<pre><code>order = [1,0,2,3]\ntest = [[[100,0,2,255],\n  [100,0,2,255],\n  [100,1,1,255]]]\n\nprint(test)\n\nfor i in range(0,len(test)):\n    for j in range(0,len(test[i])):\n        temp = test[i][j]\n        temp = [temp[k] for k in order]\n        test[i][j] = temp\n\nprint(test)\n</code></pre>\n"}], "owner": {"reputation": 453, "user_id": 1002098, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ykb51.jpg?s=128&g=1", "display_name": "delrocco", "link": "https://stackoverflow.com/users/1002098/delrocco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 48433480, "answer_count": 2, "score": 0, "last_activity_date": 1516893133, "creation_date": 1516836621, "last_edit_date": 1516840848, "question_id": 48433383, "link": "https://stackoverflow.com/questions/48433383/numpy-array-reorder-values-in-single-dimension", "title": "numpy array reorder values in single dimension", "body": "<p>I'm still new to <code>numpy</code> and having trouble writing a lambda to do what I want in this case. It could be that the lambda is not working because of the data in the array?</p>\n\n<p>I've got some pixel values from a <code>QImage</code> in Qt5 using <code>PyQT</code> in Python:</p>\n\n<pre><code>ptr = self.myPhoto.bits()\nptr.setsize(self.myPhoto.byteCount())\npixels = np.asarray(ptr).reshape(self.myPhoto.height(), self.myPhoto.width(), 4)\n</code></pre>\n\n<p>The pixel data looks like this [[[B G R A]]]:</p>\n\n<pre><code>[[[  100   0   2 255]\n  [  100   0   2 255]\n  [  100   1   1 255]\n  ..., \n  [  2   3   0 255]\n  [  1   2   0 255]\n  [  1   2   0 255]]]\n</code></pre>\n\n<p>I want it to look like this [[[R G B A]]]:</p>\n\n<pre><code>[[[  2   0 100 255]\n  [  2   0 100 255]\n  [  1   1 100 255]\n  ..., \n  [  0   3   2 255]\n  [  0   2   1 255]\n  [  0   2   1 255]]]\n</code></pre>\n\n<p><em>EDIT: removed commas from array</em></p>\n\n<p>Also, is it possible to do this right from reshape call instead of using a lambda post process?</p>\n\n<p>These questions are interesting, but I'm still having trouble glueing them together to get what I want:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/q/43037582/1002098\">How to optimize changing the value of 3d numpy.array if meet a condition</a></li>\n<li><a href=\"https://stackoverflow.com/q/42802181/1002098\">Numpy 3d array indexing</a></li>\n<li><a href=\"https://stackoverflow.com/q/42920602/1002098\">Calling a lambda with a numpy array</a></li>\n</ul>\n"}, {"tags": ["python", "django", "web", "django-forms"], "comments": [{"owner": {"reputation": 1549, "user_id": 6084948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2e5d032c08808069ed37e38ff8e81e4?s=128&d=identicon&r=PG", "display_name": "briancaffey", "link": "https://stackoverflow.com/users/6084948/briancaffey"}, "edited": false, "score": 0, "creation_date": 1516837645, "post_id": 48433378, "comment_id": 83858368, "body": "what happens if you replace <code>action=&quot;{% url &#39;post_new&#39; %}&quot;</code> with <code>action=&quot;.&quot;</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 1549, "user_id": 6084948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2e5d032c08808069ed37e38ff8e81e4?s=128&d=identicon&r=PG", "display_name": "briancaffey", "link": "https://stackoverflow.com/users/6084948/briancaffey"}, "is_accepted": true, "score": 1, "last_activity_date": 1516838066, "creation_date": 1516838066, "answer_id": 48433583, "question_id": 48433378, "link": "https://stackoverflow.com/questions/48433378/django-form-noreversematch/48433583#48433583", "title": "Django Form: NoReverseMatch", "body": "<p>It seems that you might have an app in your Django project called <code>blog</code>. Assuming this is the case, you need to use namespaces. In your main <code>urls.py</code> file, you should have something like this: </p>\n\n<pre><code>urlpatterns = [\n    url(r'^blog/', include('blog.urls', namespace=\"blog\")),\n]\n</code></pre>\n\n<p>You can keep the <code>urlpatterns</code> the same in the <code>urls.py</code> under your <code>blog</code> app. With this namespace set you can reference the <code>post_new</code> view in your templates by doing the following:</p>\n\n<pre><code>&lt;form action=\"{% url 'blog:post_new' %}\" method=\"post\"&gt;\n</code></pre>\n\n<p>This looks for the view called <code>post_new</code> in the <code>blog</code> app. </p>\n"}], "owner": {"reputation": 117, "user_id": 8524157, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1518365891544426/picture?type=large", "display_name": "Stanislav Dobryakov", "link": "https://stackoverflow.com/users/8524157/stanislav-dobryakov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "accepted_answer_id": 48433583, "answer_count": 1, "score": 0, "last_activity_date": 1516838066, "creation_date": 1516836573, "question_id": 48433378, "link": "https://stackoverflow.com/questions/48433378/django-form-noreversematch", "title": "Django Form: NoReverseMatch", "body": "<p>Getting an error: NoReverseMatch: Reverse for 'post_new' not found. 'post_new' is not a valid view function or pattern name.</p>\n\n<p>my form in base.html:</p>\n\n<pre><code>&gt; &lt;form action=\"{% url 'post_new' %}\" method=\"post\"&gt;\n&gt;     {% csrf_token %}\n&gt;     Name:&lt;br&gt;\n&gt;     &lt;input type=\"text\" name=\"name\"&gt;&lt;br&gt;\n&gt;     Text:&lt;br&gt;\n&gt;     &lt;input type=\"text\" name=\"text\"&gt;\n&gt;     &lt;input type=\"submit\" value=\"Submit\"&gt; \n  &lt;/form&gt;\n</code></pre>\n\n<p>views.py:</p>\n\n<pre><code>def post_new(request):\n    posts = Post.objects.all()\n    name = request.POST['name']\n    print(name)\n    return render(request, 'blog/base.html', {'posts': posts})\n</code></pre>\n\n<p>urls.py:</p>\n\n<pre><code>urlpatterns = [\n    url(r'^$', views.base),\n    url(r'^post_new/$', views.post_new, name='post_new'),\n]\n</code></pre>\n"}, {"tags": ["python", "oauth", "oauth-2.0", "google-oauth", "gdata-api"], "answers": [{"tags": [], "owner": {"reputation": 662, "user_id": 962856, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c74bde5974bd62447d68cb3b924ec17e?s=128&d=identicon&r=PG", "display_name": "Pa_", "link": "https://stackoverflow.com/users/962856/pa"}, "is_accepted": true, "score": 0, "last_activity_date": 1516987706, "creation_date": 1516987706, "answer_id": 48466514, "question_id": 48433331, "link": "https://stackoverflow.com/questions/48433331/oauth2-with-python-gdata-api-400-bad-request/48466514#48466514", "title": "OAuth2 with python gdata_api : 400 Bad request", "body": "<p>Turns out that both adding access_type=offline and include_granted_scopes=true to requesting the authorization code AND creating a new clientId/secret (but then also switching back was OK) helped fixing the problem.</p>\n\n<p>I suppose that this parameter wasn't there back in 2012/2013..</p>\n"}], "owner": {"reputation": 662, "user_id": 962856, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c74bde5974bd62447d68cb3b924ec17e?s=128&d=identicon&r=PG", "display_name": "Pa_", "link": "https://stackoverflow.com/users/962856/pa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 367, "favorite_count": 0, "accepted_answer_id": 48466514, "answer_count": 1, "score": 0, "last_activity_date": 1516987706, "creation_date": 1516836301, "last_edit_date": 1516982464, "question_id": 48433331, "link": "https://stackoverflow.com/questions/48433331/oauth2-with-python-gdata-api-400-bad-request", "title": "OAuth2 with python gdata_api : 400 Bad request", "body": "<p>Some time ago I wrote an app in python that uses Google's python gdata api.\nI started following the gdata_api example, and it worked alright.\nAt some point google turned off uid/pwd authentication, and enforced OAuth2.\nSo i modified the app to run with OAuth2.</p>\n\n<p>It has worked fine for a few years, until some day it stopped, and began to return error 400 (= bad request) when trying to request the access token (the one that comes from <a href=\"https://www.googleapis.com/oauth2/v3/token\" rel=\"nofollow noreferrer\">https://www.googleapis.com/oauth2/v3/token</a> , to be clear).\nThis doesn't happen the first time (meaning right after one requests a new authorization token, and uses it for the first time), but every time after that.</p>\n\n<p>I have seen posts saying that they fixed the redirect uri, and then they got it working, but they didn't write what to use.\nI also don't know whether it would be the proper fix.\nThe stripped down version of my OAuth2 implementation is the following (and, i repeat, it has worked alright for years):</p>\n\n<pre><code>import sys\nimport os\n\n# WARNING!! you need also TLSLITE inside gdata/oauth subdir.\n# This is how supported google shits are nowadays.\n# See: https://github.com/google/gdata-python-client/issues/44\n\nsys.path.append(\"~/gdatalib/gdata-python-client-master/src\") #Quick and dirty way to get the latest version in. It doesnt make much of a difference anyway\n\nimport gdata\nimport gdata.contacts.data\nimport gdata.contacts.client\nimport urllib\nimport urllib2\nimport json\nimport subprocess\n\nclientId = \"\"  # your app's client ID  , get one at https://console.developers.google.com/projectselector/apis/credentials?supportedpurview=project\nclientSecret = \"\" # your app's client secret\noauthPath = \"\"\nuserAgent = \"fuBar\"\n\nclass OAuth2Auth(object):\n    def __init__(self, sUserName, sAccountPassword):\n        #gather all data\n        self.username           = sUserName.split(\"@\")[0] # remove @whatever, if any\n        self.password           = sAccountPassword\n        self.clientid           = clientId\n        self.clientsecret       = clientSecret\n        self.rediruri           = '''urn:ietf:wg:oauth:2.0:oob'''\n\n        self.authrequesturl     = (\"https://accounts.google.com/o/oauth2/auth?scope=https://www.google.com/m8/feeds/\"\n                                  \"&amp;redirect_uri=%s\"\n                                  \"&amp;response_type=code\"\n                                  \"&amp;client_id=%s\"\n                                  \"&amp;login_hint=%s\") # % (redir_uri,client_id,sAccountName+\"@gmail.com\")\n        self.oauth2_endpoint    = \"https://www.googleapis.com/oauth2/v3/token\"\n\n\n\n        self.tokensPath         = os.path.join(oauthPath, self.username)\n        #print self.tokensPathata should be a b\n        self.accessToken        = None\n        self.refreshToken       = None\n\n        self._getTokens()\n        #create an OAuth2Token\n        print \"Creating Oauth2Token...\",\n        self.oauth2token = gdata.gauth.OAuth2Token(client_id = self.clientid,\n                                          client_secret = self.clientsecret,\n                                          scope = 'https://www.google.com/m8/feeds/',\n                                          user_agent = userAgent,\n                                          access_token = self.accessToken,\n                                          refresh_token = self.refreshToken)\n        print \" done.\"\n        pass\n\n    def __del__(self):\n        #check that the access token in the OAuth2Token is the same as the read one.\n        if (self.accessToken != self.oauth2token.access_token):\n            #if not, update the file\n            print \"Access token has been updated by gdata_api. Updating the storage.\"\n            self.accessToken = self.oauth2token.access_token\n            self._storeTokens()\n        pass\n\n    def _storeTokens(self):\n        if self.accessToken and self.refreshToken:\n            f= open(self.tokensPath,'w+');\n            f.seek(0);\n            f.truncate();\n            data = [ self.accessToken + '\\n', self.refreshToken+'\\n' ]\n            f.writelines(data)\n            f.close()\n\n    def _readTokens(self):\n        if not os.path.isfile(self.tokensPath):\n            raise Exception('Expecting to find token file, but the file is not present!')\n\n        f= open(self.tokensPath,'r')\n        tokenlist = [ l.rstrip('\\n') for l in f.readlines() ]\n        f.close()\n\n        if ( len(tokenlist) &lt; 2 ):\n            raise Exception('Not enough data in token file!')\n\n        self.accessToken        = tokenlist[0]\n        self.refreshToken       = tokenlist[1]\n\n\n    def _getTokens(self):\n        if not os.path.isfile(self.tokensPath):\n            print \"TokenPath doesn't exist. requesting new tokens\"\n            self._requestNewTokens()\n            self._storeTokens()\n        else:\n            print \"TokenPath exists\"\n        self._readTokens()\n\n\n    def _requestNewTokens(self):\n        #print '\\nSTEP 1: Create OAuth2 request token URL.'\n        request_url = self.authrequesturl % (self.rediruri,self.clientid,self.username+\"@gmail.com\")\n\n        #print '\\nSTEP 2: Spawn grob with adequate URL.'\n\n        CHROME = os.path.join('C:\\\\', 'Program Files (x86)', 'Google', 'Chrome', 'Application', 'chrome.exe')\n        CHROME = \"/usr/bin/google-chrome\" # for linux\n        #CHROME = \"\" # or use whatever browser\n        #subprocess.call([CHROME, '--incognito', request_url])   #use this the first time, after, you can also hardcode the token below\n        request_token = \"\"\"&lt;your request token here to avoid storing and retrieving it&gt;\"\"\" # You can hardcode the token here, if you got, and comment the line above spawning a chrome\n\n        #print 'Request Token fetched: %s' % request_token\n        #print '\\nSTEP 3: Exchange auth token for access and refresh OAuth2 tokens.'\n\n\n        request_args = { 'code':request_token, \n                         'client_id': self.clientid , \n                         'client_secret': self.clientsecret,\n                         'redirect_uri':self.rediruri,\n                         'grant_type':'authorization_code' }\n\n        data = urllib.urlencode(request_args)\n        fullUrl = self.oauth2_endpoint + \"/\" + data\n        request = urllib2.Request(self.oauth2_endpoint, data)\n\n        try:\n            response = urllib2.urlopen(request)  # ===== FAILS HERE =====\n            json_data = response.read()\n            parsed_json = json.loads(json_data)\n            self.accessToken = parsed_json['access_token']\n            self.refreshToken =parsed_json['refresh_token']\n            print parsed_json\n        except Exception, e:\n            print fullUrl\n            print request.get_full_url()\n            print request.get_selector()\n            print e\n\n\ndef main():\n    testuser=\"someuser@gmail.com\"\n    testpass=\"somepass\"\n    manager = OAuth2Auth(testuser,testpass)\n\n\nif __name__ == '__main__':\n    main()\n</code></pre>\n\n<p>According to <a href=\"https://developers.google.com/identity/protocols/OAuth2WebServer#offline\" rel=\"nofollow noreferrer\">https://developers.google.com/identity/protocols/OAuth2WebServer#offline</a>, one should add access_type = \"offline\" in requesting the access token, to also get a refresh token. However, i tried this and it doesn't work.</p>\n"}, {"tags": ["python", "amazon-web-services", "apache-spark", "pyspark", "emr"], "comments": [{"owner": {"reputation": 493, "user_id": 8817420, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Jc1Rz.png?s=128&g=1", "display_name": "abiydv", "link": "https://stackoverflow.com/users/8817420/abiydv"}, "edited": false, "score": 1, "creation_date": 1516859926, "post_id": 48433297, "comment_id": 83864306, "body": "I would go with the bootstrap method - script saved on s3. It will be easy to make changes if you need to do so in the future."}, {"owner": {"reputation": 318, "user_id": 7331784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f9b80c01aaa2e7059d3940ebf7d0de7?s=128&d=identicon&r=PG&f=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/7331784/justin"}, "reply_to_user": {"reputation": 493, "user_id": 8817420, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Jc1Rz.png?s=128&g=1", "display_name": "abiydv", "link": "https://stackoverflow.com/users/8817420/abiydv"}, "edited": false, "score": 0, "creation_date": 1516860180, "post_id": 48433297, "comment_id": 83864391, "body": "@Abi do you know if the bootstrap is run every time I submit a job? Or how does it work? I was under the impression that it&#39;s only run in the beginning when I create a cluster but that seems wrong as well."}, {"owner": {"reputation": 493, "user_id": 8817420, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Jc1Rz.png?s=128&g=1", "display_name": "abiydv", "link": "https://stackoverflow.com/users/8817420/abiydv"}, "edited": false, "score": 0, "creation_date": 1516862271, "post_id": 48433297, "comment_id": 83865166, "body": "You are right! It is executed only when starting up the cluster. Do you manually submit the jobs after creating a cluster? What is your workflow?"}], "answers": [{"comments": [{"owner": {"reputation": 318, "user_id": 7331784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f9b80c01aaa2e7059d3940ebf7d0de7?s=128&d=identicon&r=PG&f=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/7331784/justin"}, "edited": false, "score": 0, "creation_date": 1524775076, "post_id": 50046220, "comment_id": 87119246, "body": "To my knowledge, the bootstrap script runs once only when the cluster is created so it doesn&#39;t play well with scaling clusters up and down. We are opting for Mesos to manage containers with appropriate dependencies that way."}], "tags": [], "owner": {"reputation": 414, "user_id": 6211603, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6747b10c321c8aae5eb7184c88b8bd1b?s=128&d=identicon&r=PG", "display_name": "jerrytim", "link": "https://stackoverflow.com/users/6211603/jerrytim"}, "is_accepted": false, "score": 0, "last_activity_date": 1524754689, "creation_date": 1524754689, "answer_id": 50046220, "question_id": 48433297, "link": "https://stackoverflow.com/questions/48433297/module-not-found-in-aws-emr-slave-nodes/50046220#50046220", "title": "Module not found in AWS EMR slave nodes", "body": "<p>bootstrap is the solution. write a shell script, pip install all your required packages and put it in the bootstrap option. It will be executed on all nodes when you create a cluster. just keep in mind that if the bootstrap takes too long time (1 hour or so?), it will fail. </p>\n"}], "owner": {"reputation": 318, "user_id": 7331784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f9b80c01aaa2e7059d3940ebf7d0de7?s=128&d=identicon&r=PG&f=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/7331784/justin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 570, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1524754689, "creation_date": 1516836076, "question_id": 48433297, "link": "https://stackoverflow.com/questions/48433297/module-not-found-in-aws-emr-slave-nodes", "title": "Module not found in AWS EMR slave nodes", "body": "<p>I am currently running <code>spark-submit</code> jobs on an AWS EMR cluster. I started running into python package issues where a module is not found in during imports.</p>\n\n<p>One obvious solution would be to go into each individual node and install my dependencies. I would like to avoid this if possible. Another solution I can do is write a bootstrap script and create a new cluster.</p>\n\n<p>Last solution that seems to work is I can also <code>pip install</code> my dependencies and zip them and pass them through the <code>spark-submit</code> job through <code>--py-files</code>. Though that may start becoming cumbersome as my requirements increase.</p>\n\n<p>Any other suggestions or easy fixes I may be overlooking?</p>\n"}, {"tags": ["python", "pandas", "matplotlib", "plot", "seaborn"], "answers": [{"comments": [{"owner": {"reputation": 71, "user_id": 3067612, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3d25a5f8f83d00268290c71045bc1d2a?s=128&d=identicon&r=PG&f=1", "display_name": "b_kaufman", "link": "https://stackoverflow.com/users/3067612/b-kaufman"}, "edited": false, "score": 1, "creation_date": 1516894638, "post_id": 48433895, "comment_id": 83885164, "body": "This does generate the curves properly, but I don&#39;t think looping should be necessary here.  This feels like a workaround to me."}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "reply_to_user": {"reputation": 71, "user_id": 3067612, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3d25a5f8f83d00268290c71045bc1d2a?s=128&d=identicon&r=PG&f=1", "display_name": "b_kaufman", "link": "https://stackoverflow.com/users/3067612/b-kaufman"}, "edited": false, "score": 0, "creation_date": 1516894923, "post_id": 48433895, "comment_id": 83885398, "body": "A workaround for a feature that is not implement by pandas, yes. You may ask why pandas did not implement the option to supply several colors to the <code>color</code> argument. And the answer is probably that this would make it necessary to rewrite the plotting function completely, because as it is now, <code>color</code> is simply passed on the matplotlib line plot and a <code>Line2D</code> object in matplotlib has exactly one single color associated to it. Hence it is necessary to plot several curves individually and looping is a convenient way to do so."}], "tags": [], "owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "is_accepted": true, "score": 5, "last_activity_date": 1516840576, "creation_date": 1516840576, "answer_id": 48433895, "question_id": 48433292, "link": "https://stackoverflow.com/questions/48433292/seaborn-color-palette-with-pandas-groupby-and-plot-function/48433895#48433895", "title": "Seaborn color palette with Pandas groupby and .plot function", "body": "<p>Possibly you want to iterate over the groupby object to chose the color for each individual line.</p>\n\n<pre><code>import pandas as pd\nimport matplotlib.pyplot as plt\nimport numpy as np\nimport seaborn as sns\n\na = np.tile(np.arange(0,10),5)\nb = np.linspace(0,1,len(a))\nc = np.repeat(list(\"ABCDE\"), 10)\ndf = pd.DataFrame({\"x\":a, \"y\":b, \"c\":c})\n\nfig, ax = plt.subplots()\ncmap = sns.color_palette(\"Blues\", n_colors=5)\n\ninner = df.groupby([\"c\"])\n\nfor i, (n, gr) in enumerate(inner):\n    gr.plot(x=\"x\", y=\"y\", ax=ax, color=cmap[i])\n\nplt.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/O07lH.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/O07lH.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 71, "user_id": 3067612, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3d25a5f8f83d00268290c71045bc1d2a?s=128&d=identicon&r=PG&f=1", "display_name": "b_kaufman", "link": "https://stackoverflow.com/users/3067612/b-kaufman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2184, "favorite_count": 0, "accepted_answer_id": 48433895, "answer_count": 1, "score": 1, "last_activity_date": 1516840576, "creation_date": 1516836020, "question_id": 48433292, "link": "https://stackoverflow.com/questions/48433292/seaborn-color-palette-with-pandas-groupby-and-plot-function", "title": "Seaborn color palette with Pandas groupby and .plot function", "body": "<p>I am having a very frustrating problem when trying to plot some data with a seaborn color palette.  My workflow is to perform a groupby operation on my dataframe, and plot each group as its own curve using code like this:</p>\n\n<pre><code>import seaborn as sns; sns.set_style('whitegrid')\nf, (ax1, ax2) = plt.subplots(1, 2, sharey=True, figsize=(16, 6))\n\ninner = d.groupby(['dr_min', 'dr_max'])\nn = len(inner)\ncmap = sns.color_palette(\"Blues\", n_colors=n)\ninner.plot(x='limit_l', y='lccdf', ax=ax1, color=cmap, legend=False)\ninner.plot(x='limit_r', y='rcdf', ax=ax2, color=cmap, legend=False)\n</code></pre>\n\n<p>I expect to see a curve for each one of my groupby parameters with clear shades from the color map, as seen here:\n<a href=\"https://i.stack.imgur.com/Pg5KW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Pg5KW.png\" alt=\"enter image description here\"></a></p>\n\n<p>Instead, my curves look below, with no color grade at all.  Can anyone help me understanding why this is happening?</p>\n\n<p><a href=\"https://i.stack.imgur.com/nTtU5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nTtU5.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "pandas", "dataframe", "apply", "stop-words"], "answers": [{"comments": [{"owner": {"reputation": 597, "user_id": 8309998, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/9jWLJ.png?s=128&g=1", "display_name": "profhoff", "link": "https://stackoverflow.com/users/8309998/profhoff"}, "edited": false, "score": 0, "creation_date": 1516836599, "post_id": 48433338, "comment_id": 83858092, "body": "That makes sense. I showed the code above to a colleague and he said that if I tokenize first it would work. True? I do tokenize, but later. So is that the problem? The apply method has no way of knowing what a word is?  Your method above takes care of that, right? So that&#39;s another way to go."}, {"owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "reply_to_user": {"reputation": 597, "user_id": 8309998, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/9jWLJ.png?s=128&g=1", "display_name": "profhoff", "link": "https://stackoverflow.com/users/8309998/profhoff"}, "edited": false, "score": 1, "creation_date": 1516836846, "post_id": 48433338, "comment_id": 83858155, "body": "Your attempt is cycling through strings one letter at a time: <code>[item for item in x if item not in stoplist]</code>. When you iterate a string, you are looking at each element individually. Instead you need to be looking for stopwords within your string and replace them with an empty string &#39;&#39;. <code>re.sub</code> does this functionally."}, {"owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "reply_to_user": {"reputation": 597, "user_id": 8309998, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/9jWLJ.png?s=128&g=1", "display_name": "profhoff", "link": "https://stackoverflow.com/users/8309998/profhoff"}, "edited": false, "score": 1, "creation_date": 1516837481, "post_id": 48433338, "comment_id": 83858324, "body": "@profhoff Indeed, apply method has no concept of words, it just applies some logic to each string in the column. The downside with this method is you may end up with double spaces, but that&#39;s easily correctable (if it is an issue)."}, {"owner": {"reputation": 597, "user_id": 8309998, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/9jWLJ.png?s=128&g=1", "display_name": "profhoff", "link": "https://stackoverflow.com/users/8309998/profhoff"}, "edited": false, "score": 0, "creation_date": 1516837632, "post_id": 48433338, "comment_id": 83858364, "body": "Ah! Thanks for the quick help."}, {"owner": {"reputation": 597, "user_id": 8309998, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/9jWLJ.png?s=128&g=1", "display_name": "profhoff", "link": "https://stackoverflow.com/users/8309998/profhoff"}, "edited": false, "score": 0, "creation_date": 1516845664, "post_id": 48433338, "comment_id": 83860548, "body": "Still doesn&#39;t work. :(   It looks like apply function doesn&#39;t understand that each of my tokens is a word - so it&#39;s pulling out the stopwords from each word. Not sure how to fix that:    e.g. weather weather sunrise create a status message facebook social networks becomes  --&gt;\t[&#39;wer&#39;, &#39;wer&#39;, &#39;unre&#39;, &#39;ce&#39;, &#39;&#39;, &#39;u&#39;, &#39;ege&#39;, &#39;fcebk&#39;, &#39;cl&#39;, &#39;newrk&#39;]"}, {"owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "reply_to_user": {"reputation": 597, "user_id": 8309998, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/9jWLJ.png?s=128&g=1", "display_name": "profhoff", "link": "https://stackoverflow.com/users/8309998/profhoff"}, "edited": false, "score": 0, "creation_date": 1516846472, "post_id": 48433338, "comment_id": 83860717, "body": "@profhoff, this version splits by &#39; &#39; to check for word matches."}, {"owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "reply_to_user": {"reputation": 597, "user_id": 8309998, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/9jWLJ.png?s=128&g=1", "display_name": "profhoff", "link": "https://stackoverflow.com/users/8309998/profhoff"}, "edited": false, "score": 0, "creation_date": 1516846795, "post_id": 48433338, "comment_id": 83860787, "body": "There may still be issues with punctation, e.g. &quot;somestring,&quot; would not match stopword &quot;somestring&quot;, but given your data sample this may not be an issue."}, {"owner": {"reputation": 597, "user_id": 8309998, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/9jWLJ.png?s=128&g=1", "display_name": "profhoff", "link": "https://stackoverflow.com/users/8309998/profhoff"}, "edited": false, "score": 0, "creation_date": 1520638500, "post_id": 48433338, "comment_id": 85412861, "body": "jpp - works but why? all the examples of stopword removal look very similar but don&#39;t work on my pandas df. is that because they are meant for a numpy array or a list or some other data structure?"}, {"owner": {"reputation": 597, "user_id": 8309998, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/9jWLJ.png?s=128&g=1", "display_name": "profhoff", "link": "https://stackoverflow.com/users/8309998/profhoff"}, "edited": false, "score": 0, "creation_date": 1520639809, "post_id": 48433338, "comment_id": 85413200, "body": "excellent! now the advanced datacamp tutorials are starting to click..."}], "tags": [], "owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "is_accepted": true, "score": 1, "last_activity_date": 1520639024, "last_edit_date": 1520639024, "creation_date": 1516836341, "answer_id": 48433338, "question_id": 48433275, "link": "https://stackoverflow.com/questions/48433275/remove-stopwords-from-pandas-df-with-user-supplied-list/48433338#48433338", "title": "remove stopwords from pandas df with user-supplied list", "body": "<p><a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.apply.html\" rel=\"nofollow noreferrer\">pd.Series.apply</a> with a generator expression should work:</p>\n\n<pre><code>import pandas as pd\nimport re\n\ndf = pd.DataFrame([['this is the first test string'],\n                   ['this is yet another test'],\n                   ['this is a third test item'],\n                   ['this is the final test string']],\n                  columns=['String'])\n\nreplace_set = {'this', 'is'}\n\ndf['String'] = df['String'].str.split(' ').apply(lambda x: ' '.join(k for k in x if k not in replace_set))\n\n# df\n#                     String\n# 0    the first test string\n# 1         yet another test\n# 2        a third test item\n# 3    the final test string\n</code></pre>\n\n<p><strong>Explanation</strong></p>\n\n<ul>\n<li><code>pd.Series.str.split</code> splits words by whitespace, returning a series of lists, with each list item a word.</li>\n<li><code>pd.Series.apply</code> accepts a <code>lambda</code> (anonymous) function as an input, effectively applying a function to each item in the series in a loop.</li>\n<li>The generator expression <code>(k for k in x if k not in replace_set)</code> returns each value of <code>k</code> as an iterable subject to the <code>if</code> condition.</li>\n<li><code>' '.join</code> is used on the generator expression to form a string from the generated words.</li>\n</ul>\n"}], "owner": {"reputation": 597, "user_id": 8309998, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/9jWLJ.png?s=128&g=1", "display_name": "profhoff", "link": "https://stackoverflow.com/users/8309998/profhoff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2185, "favorite_count": 1, "accepted_answer_id": 48433338, "answer_count": 1, "score": 0, "last_activity_date": 1520639024, "creation_date": 1516835868, "last_edit_date": 1519963009, "question_id": 48433275, "link": "https://stackoverflow.com/questions/48433275/remove-stopwords-from-pandas-df-with-user-supplied-list", "title": "remove stopwords from pandas df with user-supplied list", "body": "<p>I have a raw_corpus and am trying to delete stopwords with a user-defined stoplist (I edited the nltk english stopwords file). Something must be wrong with my stopwords file?</p>\n\n<p>Here's the input pandas df raw_corpus:</p>\n\n<p><a href=\"https://i.stack.imgur.com/FpPoo.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/FpPoo.png\" alt=\"raw_corpus\"></a></p>\n\n<p>Here's my code:</p>\n\n<pre><code>#my own custom stopwords list\nstoplist=\"/User/dlhoffman/nltk_data/corpora/stopwords/english\"\n#filter out stopwords\nraw_corpus['constructed_recipe'] = raw_corpus['constructed_recipe'].apply(lambda x: [item for item in x if \nitem not in stoplist])\n#running the code below verifies empty dataframe\n#raw_corpus['constructed_recipe'] = raw_corpus['constructed_recipe'].apply(lambda x: [])\n</code></pre>\n\n<p>Here's the result - obviously not what I'm looking for! what's wrong?:</p>\n\n<p><a href=\"https://i.stack.imgur.com/nR9oG.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nR9oG.jpg\" alt=\"output\"></a></p>\n"}, {"tags": ["python", "python-3.x", "function", "class", "dictionary"], "comments": [{"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1516835537, "post_id": 48433207, "comment_id": 83857761, "body": "Welcome to StackOverflow.  Please read and follow the posting guidelines in the help documentation.  <a href=\"http://stackoverflow.com/help/mcve\">Minimal, complete, verifiable example</a> applies here.  We cannot effectively help you until you post your MCVE code and accurately describe the problem. We should be able to paste your posted code into a text file and reproduce the problem you described."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1516835638, "post_id": 48433207, "comment_id": 83857797, "body": "You&#39;re missing an import, and your indentation kills the program in syntax check before we get to the error you half-cited."}], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 9264679, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-gbMnuv4gyk4/AAAAAAAAAAI/AAAAAAAAABU/PnY-zEc2vBM/photo.jpg?sz=128", "display_name": "Jake Shropshire", "link": "https://stackoverflow.com/users/9264679/jake-shropshire"}, "edited": false, "score": 0, "creation_date": 1516838685, "post_id": 48433229, "comment_id": 83858696, "body": "Changed those things and got a new error: TypeError: unhashable type: &#39;list&#39;"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 17, "user_id": 9264679, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-gbMnuv4gyk4/AAAAAAAAAAI/AAAAAAAAABU/PnY-zEc2vBM/photo.jpg?sz=128", "display_name": "Jake Shropshire", "link": "https://stackoverflow.com/users/9264679/jake-shropshire"}, "edited": false, "score": 0, "creation_date": 1516838857, "post_id": 48433229, "comment_id": 83858746, "body": "In <code>pictures.picture[animal_pics]</code> , <code>animal_pics</code> is a list. I think you meant <code>str_animal</code>"}], "tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": false, "score": 3, "last_activity_date": 1516838961, "last_edit_date": 1516838961, "creation_date": 1516835537, "answer_id": 48433229, "question_id": 48433207, "link": "https://stackoverflow.com/questions/48433207/cannot-find-error-calling-items-from-libraries/48433229#48433229", "title": "Cannot find error: calling items from libraries", "body": "<p>When you do:</p>\n\n<pre><code>def pictures():\n</code></pre>\n\n<p>you're redefining the variable <code>pictures</code>. It now names the function, not the class that was defined earlier.</p>\n\n<p>Give the function a name that doesn't conflict with the class, e.g.</p>\n\n<pre><code>def show_pictures():\n</code></pre>\n\n<p>Also, in the last function you use <code>pictures.pictures</code>. That should be <code>pictures.picture</code>.</p>\n\n<p>After you fix those, this line is wrong:</p>\n\n<pre><code>pictures.picture[animal_pics] = pictures.picture[animal_pics] + 1\n</code></pre>\n\n<p><code>animal_pics</code> is a list, you can't use it as a dictionary key. I think you meant:</p>\n\n<pre><code>pictures.picture[str_animal] += 1\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 9264679, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-gbMnuv4gyk4/AAAAAAAAAAI/AAAAAAAAABU/PnY-zEc2vBM/photo.jpg?sz=128", "display_name": "Jake Shropshire", "link": "https://stackoverflow.com/users/9264679/jake-shropshire"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1516838961, "creation_date": 1516835343, "last_edit_date": 1516835501, "question_id": 48433207, "link": "https://stackoverflow.com/questions/48433207/cannot-find-error-calling-items-from-libraries", "title": "Cannot find error: calling items from libraries", "body": "<p>I am having an issue with calling variables to add while within a definition which is in the class 'mountain'. It runs the error:</p>\n\n<p>AttributeError: 'function' object has no attribute 'picture'</p>\n\n<p>Here is the code for it: </p>\n\n<pre><code>import random\nclass currencies:\n    film = 5\nclass pictures:\n    picture = {\"m_goat\": 0, \"b_eagle\": 0, \"marmot\": 0, \"r_snake\": 0, \"m_lion\": 0, \"b_dragon\": 0, \"vulture\": 0}\nclass location:\n    city = True\n    shop = False\n    mountains = False\n    desert = False\nclass mountain:\n    #Travel to mountains\n    def travel_m():\n        print(\"You climb to the top of a tall mountain\")\n        location.mountains = True\n        animals = [\"mountain goat\", \"bald eagle\", \"marmot\", \"rattlesnake\", \"mountain lion\"]\n    animal_pics = [\"m_goat\", \"b_eagle\", \"marmot\", \"r_snake\", \"m_lion\"]\n    if 1 == 1: #for simplicity I changed this to a non random number\n        animal = random.randint(0, 4)\n        str_animal = animals[animal]\n        ans = input(\"You see a wild \" + str_animal + \". Would you like to take a photo? (y/n) \\n\")\n        if ans == \"y\" and currencies.film == 0:\n            print(\"You cannot take a picture of this animal because you are out of film\")\n        elif ans == \"y\":\n            currencies.film -= 1\n            pictures.picture[animal_pics] = pictures.picture[animal_pics] + 1 #this is the line with the error\n            print(\"You took a picture of the animal\")\n        elif ans == \"n\":\n            print(\"The animal was left unbothered\")\n        else:\n            print(\"I do not recognize that command\")  \ndef pictures():\n    print(\"You have \" + str(pictures.pictures['m_goat']) + \" picture(s) of mountain goats\")\n    print(\"You have \" + str(pictures.pictures['b_eagle']) + \" picture(s) of bald eagles\")\n    print(\"You have \" + str(pictures.pictures['marmot']) + \" picture(s) of marmots\")\n    print(\"You have \" + str(pictures.pictures['r_snake']) + \" picture(s) of rattlesnakes\")\n    print(\"You have \" + str(pictures.pictures['m_lion']) + \" picture(s) of mountain lions\")\n    mountain.travel_m()\n</code></pre>\n\n<p>Thank you for any help at all. I'm just learning the language but neither me nor my teacher could find an answer for it online. If it's something stupid, please do say</p>\n"}, {"tags": ["python", "apache-spark", "pyspark", "apache-spark-ml"], "comments": [{"owner": {"reputation": 313, "user_id": 9195369, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/01a9bb2a0352532a3f712b28bd0465a6?s=128&d=identicon&r=PG&f=1", "display_name": "qwertz", "link": "https://stackoverflow.com/users/9195369/qwertz"}, "edited": false, "score": 0, "creation_date": 1516899601, "post_id": 48433197, "comment_id": 83888837, "body": "Has nobody an idea and can help me?"}], "answers": [{"tags": [], "owner": {"reputation": 307, "user_id": 3064566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3391532dc09898877cdef4448c8b5f5b?s=128&d=identicon&r=PG&f=1", "display_name": "Kal-ko", "link": "https://stackoverflow.com/users/3064566/kal-ko"}, "is_accepted": false, "score": 0, "last_activity_date": 1516923643, "creation_date": 1516923643, "answer_id": 48453699, "question_id": 48433197, "link": "https://stackoverflow.com/questions/48433197/spark-pyspark-svm-how-to-get-area-under-curve/48453699#48453699", "title": "Spark/Pyspark: SVM - How to get Area-under-curve?", "body": "<p>SVM algorithm doesn't provide probability estimates, but only some scores.</p>\n\n<p>There is an algorithm proposed by Platt to compute probabilities given SVM scores, but it's criticized but some and apparently not implemented in Spark.</p>\n\n<p>Btw, there was a similar question <a href=\"https://stackoverflow.com/questions/30029863/what-does-the-score-of-the-spark-mllib-svm-output-mean\">What does the score of the Spark MLLib SVM output mean?</a></p>\n"}, {"tags": [], "owner": {"reputation": 27354, "user_id": 948550, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/YWVjs.jpg?s=128&g=1", "display_name": "Reut Sharabani", "link": "https://stackoverflow.com/users/948550/reut-sharabani"}, "is_accepted": true, "score": 1, "last_activity_date": 1525001380, "creation_date": 1525001380, "answer_id": 50086085, "question_id": 48433197, "link": "https://stackoverflow.com/questions/48433197/spark-pyspark-svm-how-to-get-area-under-curve/50086085#50086085", "title": "Spark/Pyspark: SVM - How to get Area-under-curve?", "body": "<p>Using the most recent <code>spark/pyspark</code> to the time of this answer:</p>\n\n<p>If you use the <code>pyspark.ml</code> module (unlike <code>mllib</code>), you can work with Dataframe as the interface:</p>\n\n<pre><code>svm = LinearSVC(maxIter=5, regParam=0.01)\nmodel = svm.fit(train)\ntest_prediction = model.transform(test)\n</code></pre>\n\n<p>Create the evaluator (see it's source code for settings):</p>\n\n<pre><code># don't forget: from pyspark.ml.evaluation import BinaryClassificationEvaluator\nevaluator = BinaryClassificationEvaluator()\n</code></pre>\n\n<p>Apply evaluator to data (again, source code shows more options):</p>\n\n<pre><code>evaluation = evaluator.evaluate(test_prediction)\n</code></pre>\n\n<p>The result of <code>evaluate</code> is, by default, the \"Area Under Curve\":</p>\n\n<pre><code>print(\"evaluation (area under ROC): %f\" % evaluation)\n</code></pre>\n"}], "owner": {"reputation": 313, "user_id": 9195369, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/01a9bb2a0352532a3f712b28bd0465a6?s=128&d=identicon&r=PG&f=1", "display_name": "qwertz", "link": "https://stackoverflow.com/users/9195369/qwertz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2130, "favorite_count": 0, "accepted_answer_id": 50086085, "answer_count": 2, "score": 1, "last_activity_date": 1525001380, "creation_date": 1516835306, "question_id": 48433197, "link": "https://stackoverflow.com/questions/48433197/spark-pyspark-svm-how-to-get-area-under-curve", "title": "Spark/Pyspark: SVM - How to get Area-under-curve?", "body": "<p>Good evening all,</p>\n\n<p>I have been dealing with random forest and naive bayes lately. Now i want to use a Support vector machine. </p>\n\n<p>After fitting the model i wanted to use the output columns \"probability\" and \"label\" to compute the AUC value. But now I have seen that there is no column \"probability\" for SVM?!</p>\n\n<p>Here you can see how I have done so far:</p>\n\n<pre><code>from pyspark.ml.classification import LinearSVC\n\nsvm = LinearSVC(maxIter=5, regParam=0.01)\nmodel = svm.fit(train)\n\nscores = model.transform(train)\nresults = scores.select('probability', 'label')\n\n# Create Score-Label Set for 'BinaryClassificationMetrics'\nresults_collect = results.collect()\nresults_list = [(float(i[0][0]), 1.0-float(i[1])) for i in results_collect]\nscoreAndLabels = sc.parallelize(results_list)\n\nmetrics = BinaryClassificationMetrics(scoreAndLabels)\nprint(\"AUC-value: \" + str(round(metrics.areaUnderROC,4)))\n</code></pre>\n\n<p>That was my approach how I have done this in the past for random forest and naive bayes. I thought I could do it with svm too... But that does not work because there is no output column \"probability\".</p>\n\n<p>Does anyone know why the column \"probability\" does not exist? And how i can compute the AUC-value now?</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["python", "windows", "anaconda"], "comments": [{"owner": {"reputation": 19199, "user_id": 131187, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/27eJi.jpg?s=128&g=1", "display_name": "Bill Bell", "link": "https://stackoverflow.com/users/131187/bill-bell"}, "edited": false, "score": 0, "creation_date": 1516837204, "post_id": 48433172, "comment_id": 83858252, "body": "The diagnostic messages seem to suggest that you should try to do <code>conda update conda</code> once again. Did you do that?"}, {"owner": {"reputation": 19199, "user_id": 131187, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/27eJi.jpg?s=128&g=1", "display_name": "Bill Bell", "link": "https://stackoverflow.com/users/131187/bill-bell"}, "edited": false, "score": 0, "creation_date": 1516837334, "post_id": 48433172, "comment_id": 83858289, "body": "Since you are new to SO you may not know that to reply to an individual here you should enter the &#39;at&#39; symbol for a menu of recipients."}, {"owner": {"reputation": 23, "user_id": 8540386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/557ae0fc1b123f1379a394d469b09d04?s=128&d=identicon&r=PG&f=1", "display_name": "Jishnu Dantu", "link": "https://stackoverflow.com/users/8540386/jishnu-dantu"}, "reply_to_user": {"reputation": 19199, "user_id": 131187, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/27eJi.jpg?s=128&g=1", "display_name": "Bill Bell", "link": "https://stackoverflow.com/users/131187/bill-bell"}, "edited": false, "score": 0, "creation_date": 1516842336, "post_id": 48433172, "comment_id": 83859708, "body": "@BillBell yes I have tried doing a conda update conda again. I am getting CondaHTTPError: HTTP None None for url &lt;<a href=\"https://repo.continuum.io/pkgs/free/win-64/repodata.json.bz2\" rel=\"nofollow noreferrer\">repo.continuum.io/pkgs/free/win-64/repodata.json.bz2</a>&gt; as an error"}, {"owner": {"reputation": 304, "user_id": 4948705, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-W3ABB85iE4E/AAAAAAAAAAI/AAAAAAAAADA/Djco136Ausk/photo.jpg?sz=128", "display_name": "Diego F Medina", "link": "https://stackoverflow.com/users/4948705/diego-f-medina"}, "edited": false, "score": 0, "creation_date": 1549900077, "post_id": 48433172, "comment_id": 96060607, "body": "@JishnuDantu did you get it solved? I am having the same issue!"}, {"owner": {"reputation": 23, "user_id": 8540386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/557ae0fc1b123f1379a394d469b09d04?s=128&d=identicon&r=PG&f=1", "display_name": "Jishnu Dantu", "link": "https://stackoverflow.com/users/8540386/jishnu-dantu"}, "reply_to_user": {"reputation": 304, "user_id": 4948705, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-W3ABB85iE4E/AAAAAAAAAAI/AAAAAAAAADA/Djco136Ausk/photo.jpg?sz=128", "display_name": "Diego F Medina", "link": "https://stackoverflow.com/users/4948705/diego-f-medina"}, "edited": false, "score": 1, "creation_date": 1557793711, "post_id": 48433172, "comment_id": 98875485, "body": "Hi @DiegoFMedina, Sorry for the late reply. My company&#39;s IT dept had to put the url in the acceptable url list for the command to work for me."}], "owner": {"reputation": 23, "user_id": 8540386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/557ae0fc1b123f1379a394d469b09d04?s=128&d=identicon&r=PG&f=1", "display_name": "Jishnu Dantu", "link": "https://stackoverflow.com/users/8540386/jishnu-dantu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1894, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1516835144, "creation_date": 1516835144, "question_id": 48433172, "link": "https://stackoverflow.com/questions/48433172/http-none-none-for-url-https-repo-continuum-io-pkgs-free-win-64-repodata-json", "title": "HTTP None None for url &lt;https://repo.continuum.io/pkgs/free/win-64/repodata.json.bz2&gt;", "body": "<p>I am trying to do a </p>\n\n<blockquote>\n  <p>conda update conda</p>\n</blockquote>\n\n<p>C:\\Users****>conda update conda\nFetching package metadata ...\nCondaHTTPError: HTTP None None for url <a href=\"https://repo.continuum.io/pkgs/free/win-64/repodata.json.bz2\" rel=\"nofollow noreferrer\">https://repo.continuum.io/pkgs/free/win-64/repodata.json.bz2</a>\nElapsed: None</p>\n\n<p>An HTTP error occurred when trying to retrieve this URL.\nHTTP errors are often intermittent, and a simple retry will get you on your way.\nConnectTimeout(MaxRetryError(\"HTTPSConnectionPool(host='repo.continuum.io', port=443): Max retries exceeded with url: /pkgs/free/win-64/repodata.json.bz2 (Caused by ConnectTimeoutError(, 'Connection to repo.continuum.io timed out. (connect timeout=9.15)'))\",),)</p>\n\n<p>my conda info is:</p>\n\n<p>Current conda install:</p>\n\n<pre><code>           platform : win-64\n      conda version : 4.3.21\n   conda is private : False\n  conda-env version : 4.3.21\nconda-build version : not installed\n     python version : 3.6.1.final.0\n   requests version : 2.14.2\n   root environment : C:\\Users\\****\\AppData\\Local\\Continuum\\Anaconda3  (writable)\ndefault environment : C:\\Users\\****\\AppData\\Local\\Continuum\\Anaconda3\n   envs directories : C:\\Users\\****\\AppData\\Local\\Continuum\\Anaconda3\\envs\n                      C:\\Users\\****\\AppData\\Local\\conda\\conda\\envs\n                      C:\\Users\\****\\.conda\\envs\n      package cache : C:\\Users\\****\\AppData\\Local\\Continuum\\Anaconda3\\pkgs\n                      C:\\Users\\****\\AppData\\Local\\conda\\conda\\pkgs\n       channel URLs : https://repo.continuum.io/pkgs/free/win-64\n                      https://repo.continuum.io/pkgs/free/noarch\n                      https://repo.continuum.io/pkgs/r/win-64\n                      https://repo.continuum.io/pkgs/r/noarch\n                      https://repo.continuum.io/pkgs/pro/win-64\n                      https://repo.continuum.io/pkgs/pro/noarch\n                      https://repo.continuum.io/pkgs/msys2/win-64\n                      https://repo.continuum.io/pkgs/msys2/noarch\n        config file : C:\\Users\\DantuJ\\.condarc\n         netrc file : None\n       offline mode : False\n         user-agent : conda/4.3.21 requests/2.14.2 CPython/3.6.1 Windows/10 Windows/10.0.15063\n      administrator : False\n</code></pre>\n\n<p>my .condarc file is:</p>\n\n<p><strong>channels:\n  - defaults<br>\nssl_verify: false</strong></p>\n\n<p>How can I fix this issue so that I can use conda to download other packages or even update conda? </p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["python", "classification"], "comments": [{"owner": {"reputation": 16137, "user_id": 2026508, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d76e464967fe7ab0b42754ae5401d3ba?s=128&d=identicon&r=PG&f=1", "display_name": "jmunsch", "link": "https://stackoverflow.com/users/2026508/jmunsch"}, "edited": false, "score": 0, "creation_date": 1516835144, "post_id": 48433105, "comment_id": 83857638, "body": "where is <code>naiveBayesClassifier</code> from? and how is <code>Trainer(tokenizer)</code> being called? what is <code>tokenizer</code>? like what sort of object is <code>tokenizer</code>?"}, {"owner": {"reputation": 23, "user_id": 9119192, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34cf8e558633648b267fb1ac742d6f24?s=128&d=identicon&r=PG&f=1", "display_name": "MichaelB", "link": "https://stackoverflow.com/users/9119192/michaelb"}, "reply_to_user": {"reputation": 16137, "user_id": 2026508, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d76e464967fe7ab0b42754ae5401d3ba?s=128&d=identicon&r=PG&f=1", "display_name": "jmunsch", "link": "https://stackoverflow.com/users/2026508/jmunsch"}, "edited": false, "score": 0, "creation_date": 1516835309, "post_id": 48433105, "comment_id": 83857692, "body": "naiveBayesClassifier is the folder that contains all the files. I done some updates."}, {"owner": {"reputation": 16137, "user_id": 2026508, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d76e464967fe7ab0b42754ae5401d3ba?s=128&d=identicon&r=PG&f=1", "display_name": "jmunsch", "link": "https://stackoverflow.com/users/2026508/jmunsch"}, "edited": false, "score": 0, "creation_date": 1516835517, "post_id": 48433105, "comment_id": 83857754, "body": "inside <code>tokenizer.py</code> is there a method named <code>tokenize</code>?"}, {"owner": {"reputation": 23, "user_id": 9119192, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34cf8e558633648b267fb1ac742d6f24?s=128&d=identicon&r=PG&f=1", "display_name": "MichaelB", "link": "https://stackoverflow.com/users/9119192/michaelb"}, "reply_to_user": {"reputation": 16137, "user_id": 2026508, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d76e464967fe7ab0b42754ae5401d3ba?s=128&d=identicon&r=PG&f=1", "display_name": "jmunsch", "link": "https://stackoverflow.com/users/2026508/jmunsch"}, "edited": false, "score": 0, "creation_date": 1516835613, "post_id": 48433105, "comment_id": 83857788, "body": "yes, def tokenize(self,text):         return text.lower().split(&#39; &#39;)"}, {"owner": {"reputation": 16137, "user_id": 2026508, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d76e464967fe7ab0b42754ae5401d3ba?s=128&d=identicon&r=PG&f=1", "display_name": "jmunsch", "link": "https://stackoverflow.com/users/2026508/jmunsch"}, "edited": false, "score": 0, "creation_date": 1516836980, "post_id": 48433105, "comment_id": 83858191, "body": "what&#39;s with <code>self</code> in <code>tokenize</code>? is it part of a class that isn&#39;t being imported? i&#39;m guessing something like <code>from naiveBayesClassifer.tokenizer import TokenizerClass</code> and then <code>TokenizerClass().tokenize(stuff)</code>?"}, {"owner": {"reputation": 23, "user_id": 9119192, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34cf8e558633648b267fb1ac742d6f24?s=128&d=identicon&r=PG&f=1", "display_name": "MichaelB", "link": "https://stackoverflow.com/users/9119192/michaelb"}, "reply_to_user": {"reputation": 16137, "user_id": 2026508, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d76e464967fe7ab0b42754ae5401d3ba?s=128&d=identicon&r=PG&f=1", "display_name": "jmunsch", "link": "https://stackoverflow.com/users/2026508/jmunsch"}, "edited": false, "score": 0, "creation_date": 1516837406, "post_id": 48433105, "comment_id": 83858307, "body": "I used self to call the tokenize method. I done your changes and it is the same AttributeError: module &#39;naiveBayesClassifier.tokenizer&#39; has no attribute &#39;tokenize&#39;."}, {"owner": {"reputation": 16137, "user_id": 2026508, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d76e464967fe7ab0b42754ae5401d3ba?s=128&d=identicon&r=PG&f=1", "display_name": "jmunsch", "link": "https://stackoverflow.com/users/2026508/jmunsch"}, "edited": false, "score": 0, "creation_date": 1516837503, "post_id": 48433105, "comment_id": 83858333, "body": "i dunno, can you include the contents of <code>tokenizer.py</code>, i&#39;m having difficulty understanding what is going on."}, {"owner": {"reputation": 23, "user_id": 9119192, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34cf8e558633648b267fb1ac742d6f24?s=128&d=identicon&r=PG&f=1", "display_name": "MichaelB", "link": "https://stackoverflow.com/users/9119192/michaelb"}, "reply_to_user": {"reputation": 16137, "user_id": 2026508, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d76e464967fe7ab0b42754ae5401d3ba?s=128&d=identicon&r=PG&f=1", "display_name": "jmunsch", "link": "https://stackoverflow.com/users/2026508/jmunsch"}, "edited": false, "score": 0, "creation_date": 1516837522, "post_id": 48433105, "comment_id": 83858335, "body": "@jmunsch I fixed it. Thanks is working now."}, {"owner": {"reputation": 16137, "user_id": 2026508, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d76e464967fe7ab0b42754ae5401d3ba?s=128&d=identicon&r=PG&f=1", "display_name": "jmunsch", "link": "https://stackoverflow.com/users/2026508/jmunsch"}, "edited": false, "score": 0, "creation_date": 1516837546, "post_id": 48433105, "comment_id": 83858342, "body": "oh what was it?"}, {"owner": {"reputation": 23, "user_id": 9119192, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34cf8e558633648b267fb1ac742d6f24?s=128&d=identicon&r=PG&f=1", "display_name": "MichaelB", "link": "https://stackoverflow.com/users/9119192/michaelb"}, "reply_to_user": {"reputation": 16137, "user_id": 2026508, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d76e464967fe7ab0b42754ae5401d3ba?s=128&d=identicon&r=PG&f=1", "display_name": "jmunsch", "link": "https://stackoverflow.com/users/2026508/jmunsch"}, "edited": false, "score": 0, "creation_date": 1516837673, "post_id": 48433105, "comment_id": 83858377, "body": "I just imported the Tokenizer without declaring the path and I just installed the nltk."}], "owner": {"reputation": 23, "user_id": 9119192, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34cf8e558633648b267fb1ac742d6f24?s=128&d=identicon&r=PG&f=1", "display_name": "MichaelB", "link": "https://stackoverflow.com/users/9119192/michaelb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 214, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1516836977, "creation_date": 1516834719, "last_edit_date": 1516836977, "question_id": 48433105, "link": "https://stackoverflow.com/questions/48433105/naivebayes-classifier", "title": "NaiveBayes Classifier", "body": "<p>I am having a problem with naive bayes classifier, I am trying to analyse some sentences but I have some errors in python.</p>\n\n<pre><code>from naiveBayesClassifier.trainedData import TrainedData\n\nclass Trainer(object):\n\"\"\"docstring for Trainer\"\"\"\ndef __init__(self, tokenizer):\n    super(Trainer, self).__init__()\n    self.tokenizer = tokenizer\n    self.data = TrainedData()\n\ndef train(self, text, className):\n    \"\"\"\n    enhances trained data using the given text and class\n    \"\"\"\n    self.data.increaseClass(className)\n\n    tokens = self.tokenizer.tokenize(text)\n    for token in tokens:\n        token = self.tokenizer.remove_stop_words(token)\n        token = self.tokenizer.remove_punctuation(token)\n        self.data.increaseToken(token, className)\n</code></pre>\n\n<p>That's the error in the console: Does anyone knows how to fix the problem? Thanks</p>\n\n<pre><code> tokens = self.tokenizer.tokenize(text)\nAttributeError: module 'naiveBayesClassifier.tokenizer' has no attribute 'tokenize'\n</code></pre>\n\n<p>Thats the main class:</p>\n\n<pre><code>   from naiveBayesClassifier import tokenizer\nfrom naiveBayesClassifier.trainer import Trainer\nfrom naiveBayesClassifier.classifier import Classifier\n\n\npostTrainer = Trainer(tokenizer)\n\npostsSet = [\n    {'text': 'not to eat too much is not enough to lose weight', 'category': 'health'},\n    {'text': 'Russia try to invade Ukraine', 'category': 'politics'},\n    {'text': 'do not neglect exercise', 'category': 'health'},\n    {'text': 'Syria is the main issue, Obama says', 'category': 'politics'}\n]\n\nfor post in postsSet:\n    postTrainer.train(post['text'], post['category'])\n\npostClassifier = Classifier(postTrainer.data, tokenizer)\n\nclassification = postClassifier.classify(\"Obama is\")\nprint(classification)\n</code></pre>\n"}, {"tags": ["python", "arrays", "scipy", "statistics", "anova"], "comments": [{"owner": {"reputation": 732, "user_id": 4854766, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/da0d92a989793b4a9f7fa9fd56b2cbb7?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler Cowan", "link": "https://stackoverflow.com/users/4854766/tyler-cowan"}, "edited": false, "score": 0, "creation_date": 1516834741, "post_id": 48433076, "comment_id": 83857483, "body": "can you post your data as well as the error and a minimal working example?"}, {"owner": {"reputation": 55, "user_id": 8652079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cfa2ee0bd01689be7269b0730454da1?s=128&d=identicon&r=PG&f=1", "display_name": "user8652079", "link": "https://stackoverflow.com/users/8652079/user8652079"}, "reply_to_user": {"reputation": 732, "user_id": 4854766, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/da0d92a989793b4a9f7fa9fd56b2cbb7?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler Cowan", "link": "https://stackoverflow.com/users/4854766/tyler-cowan"}, "edited": false, "score": 0, "creation_date": 1516834892, "post_id": 48433076, "comment_id": 83857548, "body": "I just edited the question to add the data"}, {"owner": {"reputation": 732, "user_id": 4854766, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/da0d92a989793b4a9f7fa9fd56b2cbb7?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler Cowan", "link": "https://stackoverflow.com/users/4854766/tyler-cowan"}, "edited": false, "score": 0, "creation_date": 1516835289, "post_id": 48433076, "comment_id": 83857684, "body": "Ok now that you have a working example can you add the section that makes it error? it seems that the question is how to go from csv to rec array properly?"}, {"owner": {"reputation": 55, "user_id": 8652079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cfa2ee0bd01689be7269b0730454da1?s=128&d=identicon&r=PG&f=1", "display_name": "user8652079", "link": "https://stackoverflow.com/users/8652079/user8652079"}, "reply_to_user": {"reputation": 732, "user_id": 4854766, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/da0d92a989793b4a9f7fa9fd56b2cbb7?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler Cowan", "link": "https://stackoverflow.com/users/4854766/tyler-cowan"}, "edited": false, "score": 0, "creation_date": 1516835798, "post_id": 48433076, "comment_id": 83857844, "body": "no my error is trying to run this for multiple segments without typing segment names manually"}, {"owner": {"reputation": 732, "user_id": 4854766, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/da0d92a989793b4a9f7fa9fd56b2cbb7?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler Cowan", "link": "https://stackoverflow.com/users/4854766/tyler-cowan"}, "edited": false, "score": 0, "creation_date": 1516836191, "post_id": 48433076, "comment_id": 83857966, "body": "can you post that code so I can test it?"}], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 8652079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cfa2ee0bd01689be7269b0730454da1?s=128&d=identicon&r=PG&f=1", "display_name": "user8652079", "link": "https://stackoverflow.com/users/8652079/user8652079"}, "edited": false, "score": 0, "creation_date": 1516840138, "post_id": 48433600, "comment_id": 83859136, "body": "This works great!! Thanks a ton! Is there any way I can avoid typing the names pat Jack etc and pass them thru a list?"}, {"owner": {"reputation": 55, "user_id": 8652079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cfa2ee0bd01689be7269b0730454da1?s=128&d=identicon&r=PG&f=1", "display_name": "user8652079", "link": "https://stackoverflow.com/users/8652079/user8652079"}, "edited": false, "score": 0, "creation_date": 1516902948, "post_id": 48433600, "comment_id": 83890828, "body": "Thank you so much!! This is exactly what i was looking for !"}], "tags": [], "owner": {"reputation": 19199, "user_id": 131187, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/27eJi.jpg?s=128&g=1", "display_name": "Bill Bell", "link": "https://stackoverflow.com/users/131187/bill-bell"}, "is_accepted": true, "score": 1, "last_activity_date": 1516855230, "last_edit_date": 1516855230, "creation_date": 1516838210, "answer_id": 48433600, "question_id": 48433076, "link": "https://stackoverflow.com/questions/48433076/f-oneway-when-data-in-the-form-of-list/48433600#48433600", "title": "f_oneway when data in the form of list", "body": "<p>I think this is it. Apparently <code>f_oneway</code> cannot cope with things of type <code>array([5, 4, 4, 3, 9, 4], dtype=int64)</code>; it can process lists.</p>\n\n<pre><code>import numpy as np\nfrom scipy import stats\n\ndata = np.rec.array([ ('Pat', 5), ('Pat', 4), ('Pat', 4),('Pat', 3), ('Pat', 9), ('Pat', 4),('Jack', 4), ('Jack', 8), ('Jack', 7),('Jack', 5), ('Jack', 1), ('Jack', 5), ('Alex', 9),('Alex', 8), ('Alex', 8), ('Alex', 10), ('Alex', 5), ('Alex', 10)], dtype = [('Archer','|U5'), ('Score', '&lt;i8')])\nf, p = stats.f_oneway(*[list(data[data['Archer']==name].Score) for name in ['Pat', 'Jack', 'Alex']])\nf, p = stats.f_oneway(*[list(data[data['Archer']==name].Score) for name in set(data['Archer'])])\nprint ('P value:', p, '\\n')\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>P value: 0.0216837493201 \n</code></pre>\n\n<p><strong>Edit</strong> in response to comment: The second invocation of <code>f_oneway</code> gives the same result as the first, without the need to list the names of the archers.</p>\n"}], "owner": {"reputation": 55, "user_id": 8652079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cfa2ee0bd01689be7269b0730454da1?s=128&d=identicon&r=PG&f=1", "display_name": "user8652079", "link": "https://stackoverflow.com/users/8652079/user8652079"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1572, "favorite_count": 0, "accepted_answer_id": 48433600, "answer_count": 1, "score": 1, "last_activity_date": 1576429756, "creation_date": 1516834609, "last_edit_date": 1516836822, "question_id": 48433076, "link": "https://stackoverflow.com/questions/48433076/f-oneway-when-data-in-the-form-of-list", "title": "f_oneway when data in the form of list", "body": "<p>if this is the source code.. how will you edit the f_oneway function line such that you dont have to manually specify the archer name each time</p>\n\n<pre><code>import numpy as np\nfrom scipy import stats\n\ndata = np.rec.array([\n('Pat', 5),\n('Pat', 4),\n('Pat', 4),\n('Pat', 3),\n('Pat', 9),\n('Pat', 4),\n('Jack', 4),\n('Jack', 8),\n('Jack', 7),\n('Jack', 5),\n('Jack', 1),\n('Jack', 5),\n('Alex', 9),\n('Alex', 8),\n('Alex', 8),\n('Alex', 10),\n('Alex', 5),\n('Alex', 10)], dtype = [('Archer','|U5'),('Score', '&lt;i8')])\n\nf, p = stats.f_oneway(data[data['Archer'] == 'Pat'].Score,\n                      data[data['Archer'] == 'Jack'].Score,\n                      data[data['Archer'] == 'Alex'].Score)\n\nprint ('P value:', p, '\\n')\n</code></pre>\n\n<p>I tried the following but it errors out saying 'no field of name Pat' </p>\n\n<pre><code>f, p = stats.f_oneway(data[data['Archer']].Score)\n</code></pre>\n\n<p>help!</p>\n"}, {"tags": ["python", "python-2.7", "argparse"], "comments": [{"owner": {"reputation": 732, "user_id": 4854766, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/da0d92a989793b4a9f7fa9fd56b2cbb7?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler Cowan", "link": "https://stackoverflow.com/users/4854766/tyler-cowan"}, "edited": false, "score": 0, "creation_date": 1516834587, "post_id": 48433047, "comment_id": 83857429, "body": "can you make this more clear? and more code?"}, {"owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 1, "creation_date": 1516834654, "post_id": 48433047, "comment_id": 83857452, "body": "im not sure what your trying to do... but whatever it is this does not seem like the right way to do it ..."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6512120"}, "reply_to_user": {"reputation": 732, "user_id": 4854766, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/da0d92a989793b4a9f7fa9fd56b2cbb7?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler Cowan", "link": "https://stackoverflow.com/users/4854766/tyler-cowan"}, "edited": false, "score": 0, "creation_date": 1516835422, "post_id": 48433047, "comment_id": 83857731, "body": "@TylerCowan Which part do you not understand? I&#39;m new to asking questions here, and I don&#39;t do a lot of programming with other people, so I&#39;m not sure what else to provide."}], "answers": [{"comments": [{"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1516840286, "post_id": 48433544, "comment_id": 83859187, "body": "It&#39;s a good idea to <code>print args</code> during development so you have a clear(er) idea of what that is.  It will contain attributes created by the arguments as well as the <code>set_defaults</code>.  Anything that you choose to do with those attributes after parsing is outside of <code>argparse</code> (regular Python code)."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1516846625, "post_id": 48433544, "comment_id": 83860760, "body": "A key thing to remember is a function is a object, and can be assigned to any variable or even stored in a list. <code>foo=test_function</code>; <code>foo(arg1, arg2, ...)</code>.  All <code>set_defaults</code> is doing is storing a pointer to that function object in the <code>args</code> namespace.  Your own code can do anything it wants with that object."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user6512120"}, "is_accepted": false, "score": 1, "last_activity_date": 1516837776, "creation_date": 1516837776, "answer_id": 48433544, "question_id": 48433047, "link": "https://stackoverflow.com/questions/48433047/when-using-argparse-in-python-2-7-how-can-i-pass-more-than-args-into-my-defau/48433544#48433544", "title": "When using argparse in Python 2.7, how can I pass more than &#39;args&#39; into my default function?", "body": "<p>I ended up finding the way myself, I was over looking something pretty simple.\nFor some reason I didn't join these two together in my head.</p>\n\n<pre><code>   Parser.set_defaults(func=test_function)\nargs.func(args)\n</code></pre>\n\n<p>I figured this was inbuilt functionality in the argparse module, but it's a lot more simple than that it seems. I found a way to achieve adding the new value to args by following the correct syntax (who would've thought)</p>\n\n<p>so this:</p>\n\n<pre><code>parser = argparse.ArgumentParser()\ndef test_function(args):\n    print args\n\nParser.set_defaults(func=test_function, realValue=lookup_function)\nargs = parser.parse_args()\nargs.func(args)\n</code></pre>\n\n<p>becomes this:</p>\n\n<pre><code>parser = argparse.ArgumentParser()\ndef test_function(args):\n    print args\n\nParser.set_defaults(realValue=lookup_function)\nParser.set_defaults(func=test_function)\nargs = parser.parse_args()\nargs.realValue(args)\nargs.func(args)\n</code></pre>\n\n<p>Sorry for the dumb question I guess, hopefully this helps someone who makes a similar mistake in the future</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user6512120"}, "edited": false, "score": 0, "creation_date": 1516908278, "post_id": 48433652, "comment_id": 83893730, "body": "Whilst my own way works better for me, this answer most accurately answers the question I believe, so I&#39;ve chosen it as the choosen answer. Thank you @user2357112"}], "tags": [], "owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "is_accepted": true, "score": 0, "last_activity_date": 1516838680, "creation_date": 1516838680, "answer_id": 48433652, "question_id": 48433047, "link": "https://stackoverflow.com/questions/48433047/when-using-argparse-in-python-2-7-how-can-i-pass-more-than-args-into-my-defau/48433652#48433652", "title": "When using argparse in Python 2.7, how can I pass more than &#39;args&#39; into my default function?", "body": "<p>Here is the part where you only pass <code>args</code> to <code>args.func</code>:</p>\n\n<pre><code>args.func(args)\n#         ^^^^ this bit!\n</code></pre>\n\n<p>If you want to pass other things to <code>args.func</code>, just pass them!</p>\n\n<pre><code>args.func(whatever, the, heck, you, want)\n</code></pre>\n\n<p>If you want <code>args.func</code> to receive <code>3</code>, <code>\"fish\"</code>, and <code>\"sweaters\"</code> as arguments, you can do that:</p>\n\n<pre><code>args.func(3, \"fish\", \"sweaters\")\n</code></pre>\n\n<p><code>args.func</code> will immediately choke on those arguments, of course, since you wrote it to only expect the namespace object as an argument. You can define it to take different arguments:</p>\n\n<pre><code>def test_function(number, animal, garments):\n    print(\"I stuffed\", number, garments, \"into a big rubber\", animal, \"as an art project.\")\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6512120"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 275, "favorite_count": 0, "accepted_answer_id": 48433652, "answer_count": 2, "score": 0, "last_activity_date": 1516838680, "creation_date": 1516834464, "last_edit_date": 1516835304, "question_id": 48433047, "link": "https://stackoverflow.com/questions/48433047/when-using-argparse-in-python-2-7-how-can-i-pass-more-than-args-into-my-defau", "title": "When using argparse in Python 2.7, how can I pass more than &#39;args&#39; into my default function?", "body": "<p>I'm trying to pass in some arguments to the default function of my parser, which doesn't come straight from an argument in the command line. The argument the user provides on the cli is meant to act for a lookup for the real value needed, as it real value isn't user freindly to repeatedly type in. </p>\n\n<p>With argparse you can perform something like this:</p>\n\n<pre><code>parser = argparse.ArgumentParser()\ndef test_function(args):\n    print args\n\nParser.set_defaults(func=test_function)\nargs = parser.parse_args()\nargs.func(args)\n</code></pre>\n\n<p>test_function will successfully print out the args here. Notice how </p>\n\n<pre><code>(func=test_function)\n</code></pre>\n\n<p>doesn't pass in any parameters, it seems to just pass in args, Adding brackets here prevents passing in args, since it doesn't get pushed automatically if you do, and typing it in won't work as args hasn't been defined yet as far as Python is concerned.</p>\n\n<p>I've tried also doing</p>\n\n<pre><code>Parser.set_defaults(func=test_function, realValue=lookup_function)\n</code></pre>\n\n<p>However realValue seems to evaluate at a reference to the function itself, rather than what the function returns (I don't think the function is even executed, so I'm not sure if this even would pass args into the lookup_function).</p>\n\n<p>I <em>could</em> probably call the lookup function from the test_function, however I want to avoid this as in my program these two functions are in seperate modules, and it seems a bit... messy to import them into each other rather than simply importing them both into my main.py file.</p>\n\n<p>Is anyone aware of any way to do what I'm trying to do? Will I need to suck it up and import cross submodule?</p>\n\n<p><strong>EDIT</strong>\nTo try and be a bit more clear I want to pass args <strong>and</strong> another dynamic value into test_function, through argparse's functionality of;</p>\n\n<pre><code>    Parser.set_defaults(func=test_function)\n</code></pre>\n\n<p>the dynamic value is found by using one of the values of args. I wish to know a way to pass into test_function, or args itself, a new value which is returned by another function.</p>\n"}, {"tags": ["python", "matplotlib", "seaborn"], "comments": [{"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1516834271, "post_id": 48432978, "comment_id": 83857307, "body": "&quot;anchor&quot; has nothing to do with the colors or labels, it is the position of the colorbar. Unless you want to change the position, there is no reason trying to use that argument. Concerning the actual problem, what exactly do you want your plot to look like?"}, {"owner": {"reputation": 127, "user_id": 5425221, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/321f16ef6a2a8cbe9305977ab204e028?s=128&d=identicon&r=PG&f=1", "display_name": "Eric O", "link": "https://stackoverflow.com/users/5425221/eric-o"}, "reply_to_user": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1516834521, "post_id": 48432978, "comment_id": 83857402, "body": "Hmm. The numbers on the side of the colorbar (0-6 in this case) are aligned for continuous data (i.e. 0 at the very bottom, and 6 at the very top). I want the numbers to be centered directly next to the colors they represent in the map."}], "answers": [{"comments": [{"owner": {"reputation": 127, "user_id": 5425221, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/321f16ef6a2a8cbe9305977ab204e028?s=128&d=identicon&r=PG&f=1", "display_name": "Eric O", "link": "https://stackoverflow.com/users/5425221/eric-o"}, "edited": false, "score": 0, "creation_date": 1516836354, "post_id": 48433250, "comment_id": 83858025, "body": "Perfect! Thank you so much!"}, {"owner": {"reputation": 127, "user_id": 5425221, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/321f16ef6a2a8cbe9305977ab204e028?s=128&d=identicon&r=PG&f=1", "display_name": "Eric O", "link": "https://stackoverflow.com/users/5425221/eric-o"}, "edited": false, "score": 0, "creation_date": 1516839208, "post_id": 48433250, "comment_id": 83858850, "body": "for the &#39;format&#39;: &#39;Group-%g&#39; section, what if the groups numbering doesn&#39;t start at 0. e.g. np.random.randint(1, 7, size=(52, 7))?"}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "reply_to_user": {"reputation": 127, "user_id": 5425221, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/321f16ef6a2a8cbe9305977ab204e028?s=128&d=identicon&r=PG&f=1", "display_name": "Eric O", "link": "https://stackoverflow.com/users/5425221/eric-o"}, "edited": false, "score": 0, "creation_date": 1516839797, "post_id": 48433250, "comment_id": 83859029, "body": "I added the solution for this case to the answer. You would need to change your dictionary and the lists, but the format stays the same."}], "tags": [], "owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "is_accepted": true, "score": 1, "last_activity_date": 1516839739, "last_edit_date": 1516839739, "creation_date": 1516835695, "answer_id": 48433250, "question_id": 48432978, "link": "https://stackoverflow.com/questions/48432978/center-seaborn-colorbar-labels/48433250#48433250", "title": "Center Seaborn Colorbar Labels", "body": "<p>You probably want to use a boundary norm. The problem is that matplotlib would not know which value you want to have corresponding to which color. To give this information, a <code>BoundaryNorm</code> can be used, specifying the bin edges of the colors. As in this example you have the integers <code>0,1,2,3,4,5</code> as the values, your bin edges are best chosen to be <code>-0.5, 0.5, 1.5, 2.5, 3.5, 4.5, 5.5</code>, such that the values lie in the center of the bins.  </p>\n\n<pre><code>import pandas as pd\nimport numpy as np\nimport matplotlib as mpl\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n#%matplotlib inline\n\ndf = pd.DataFrame(np.random.randint(0,6,size=(52, 7)))\ncolors = {0:'#05926f', 1:'#99cc33', 2:'#F26419', 3:'#F6AE2D', 4:'#06AED5', 5:'#3baa5d'}\n\ncolorrange = range(len(list(colors.keys())))\ncolorlist = [colors[i] for i in colorrange]\ncmap = mpl.colors.ListedColormap(colorlist)\nbounds = np.array(range(len(list(colors.keys()))+1))-0.5\nnorm = mpl.colors.BoundaryNorm(bounds, len(colorrange))\n\nfig, ax = plt.subplots(figsize=(4.2,8))\nfig.subplots_adjust(right=0.8)\nax = sns.heatmap(df, annot=True, cmap=cmap, norm=norm, \n                 cbar_kws={'format': 'Group-%g'}, linewidths=.05)\nplt.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/kK7Bv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kK7Bv.png\" alt=\"enter image description here\"></a></p>\n\n<p>Code for when the data range does not start at 0, but is still N successive integers:\n<div class=\"snippet\" data-lang=\"js\" data-hide=\"true\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code snippet-currently-hidden\">\r\n<pre class=\"snippet-code-css lang-css prettyprint-override\"><code>import pandas as pd\r\nimport numpy as np\r\nimport matplotlib as mpl\r\nimport matplotlib.pyplot as plt\r\nimport seaborn as sns\r\n#%matplotlib inline\r\n\r\ndf = pd.DataFrame(np.random.randint(1,7,size=(52, 7)))\r\ncolors = {6:'#05926f', 1:'#99cc33', 2:'#F26419', 3:'#F6AE2D', 4:'#06AED5', 5:'#3baa5d'}\r\n\r\ncolorrange = sorted(list(colors.keys()))\r\ncolorlist = [colors[i] for i in colorrange]\r\ncmap = mpl.colors.ListedColormap(colorlist)\r\nbounds = np.array(colorrange+[max(colorrange)+1])-0.5\r\nnorm = mpl.colors.BoundaryNorm(bounds, len(colorrange))\r\n\r\nfig, ax = plt.subplots(figsize=(4.2,8))\r\nfig.subplots_adjust(right=0.8)\r\nax = sns.heatmap(df, annot=True, cmap=cmap, norm=norm, \r\n                 cbar_kws={'format': 'Group-%g'}, linewidths=.05)\r\nplt.show()</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 127, "user_id": 5425221, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/321f16ef6a2a8cbe9305977ab204e028?s=128&d=identicon&r=PG&f=1", "display_name": "Eric O", "link": "https://stackoverflow.com/users/5425221/eric-o"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 633, "favorite_count": 0, "accepted_answer_id": 48433250, "answer_count": 1, "score": 1, "last_activity_date": 1516839739, "creation_date": 1516834094, "last_edit_date": 1516834595, "question_id": 48432978, "link": "https://stackoverflow.com/questions/48432978/center-seaborn-colorbar-labels", "title": "Center Seaborn Colorbar Labels", "body": "<p>I'm looking at discrete data, but the colorbars in seaborn look like they're only set up for continuous variables. </p>\n\n<p>My code produces the chart I want, but the labels on the colorbar don't line up with their respective colors.</p>\n\n<pre><code>import pandas as pd\nimport numpy as np\nimport matplotlib as mpl\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n%matplotlib inline\n\ndf = pd.DataFrame(np.random.randint(0,6,size=(52, 7)))\ncolors = {0:'#05926f', 1:'#99cc33', 2:'#F26419', 3:'#F6AE2D', 4:'#06AED5', 5:'#3baa5d'}\ncmap = mpl.colors.ListedColormap(list(colors.values()))\nfig, ax = plt.subplots(figsize=(3,8))\nax = sns.heatmap(df, annot=True, cmap=cmap, linewidths=.05)\nplt.plot()\n</code></pre>\n\n<p><s>I've tried adding <code>cbar_kws={\"anchor\": (0.5, 0.5)}</code> as a argument to the sns.heatmap call, but it throws an error saying it doesn't like the anchor keyword. But the <a href=\"https://seaborn.pydata.org/generated/seaborn.heatmap.html\" rel=\"nofollow noreferrer\">seaborn documentation</a> says I should be able to use arguments from <a href=\"https://matplotlib.org/devdocs/api/_as_gen/matplotlib.pyplot.colorbar.html\" rel=\"nofollow noreferrer\">pyplot.colorbar</a>, but no luck.</s>Nevermind, see comment below.</p>\n\n<p>I'm not sure how to center that label. Am I missing something obvious?</p>\n\n<p>I'd also like to change the labels from <code>#</code> to <code>Group-#</code> if there's an easy solution to that.</p>\n\n<p>Thank you!</p>\n"}, {"tags": ["python", "optimization", "scipy", "differential-evolution"], "comments": [{"owner": {"reputation": 1840, "user_id": 1917721, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/TgopK.png?s=128&g=1", "display_name": "HFBrowning", "link": "https://stackoverflow.com/users/1917721/hfbrowning"}, "edited": false, "score": 1, "creation_date": 1516834234, "post_id": 48432925, "comment_id": 83857285, "body": "Did you mean to write the &quot;snippet&quot; the way you did? Right now it adds zero information"}, {"owner": {"reputation": 1, "user_id": 9264610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fd0851edada4569f6e4cf4214fe2325?s=128&d=identicon&r=PG&f=1", "display_name": "rhythm0flife", "link": "https://stackoverflow.com/users/9264610/rhythm0flife"}, "reply_to_user": {"reputation": 1840, "user_id": 1917721, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/TgopK.png?s=128&g=1", "display_name": "HFBrowning", "link": "https://stackoverflow.com/users/1917721/hfbrowning"}, "edited": false, "score": 0, "creation_date": 1516841474, "post_id": 48432925, "comment_id": 83859498, "body": "I have just added a bit more to the code. Hope it might help. Unfortunately, I&#39;m not allowed to share the whole function here."}, {"owner": {"reputation": 19105, "user_id": 3005167, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/t0bMQ.png?s=128&g=1", "display_name": "kazemakase", "link": "https://stackoverflow.com/users/3005167/kazemakase"}, "edited": false, "score": 2, "creation_date": 1516898207, "post_id": 48432925, "comment_id": 83887927, "body": "There are examples at the end of the documentation page you linked, which clearly illustrate how to use the function. I don&#39;t see any value in repeating that information here at SO. However, if there is anything specific you do not understand feel free to ask."}, {"owner": {"reputation": 1, "user_id": 9264610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fd0851edada4569f6e4cf4214fe2325?s=128&d=identicon&r=PG&f=1", "display_name": "rhythm0flife", "link": "https://stackoverflow.com/users/9264610/rhythm0flife"}, "edited": false, "score": 0, "creation_date": 1516924871, "post_id": 48432925, "comment_id": 83900748, "body": "I saw the examples at the end of the documentation where it also mentions the arguments to the function should be in the form of a 1-D array. Does that mean that I have to supply my 3 parameters x,y,z as a 1-D array? Could you please demonstrate this using my custom function shown above?"}, {"owner": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "edited": false, "score": 0, "creation_date": 1516929052, "post_id": 48432925, "comment_id": 83901910, "body": "Yes. You can unpack them if you need to in your function like: <code>x_, y_, z_ = x</code>. Warning: the original vec is assumed to be called x. Please do some basic python-research first. The examples should be enough to get going. On the optimization-side, things are more complex and your function might behave weird as if&#39;s (like in your example) are often non-smooth. Optimization-tools are no silver-bullets. One has to take care!"}, {"owner": {"reputation": 1, "user_id": 9264610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fd0851edada4569f6e4cf4214fe2325?s=128&d=identicon&r=PG&f=1", "display_name": "rhythm0flife", "link": "https://stackoverflow.com/users/9264610/rhythm0flife"}, "reply_to_user": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "edited": false, "score": 0, "creation_date": 1517266216, "post_id": 48432925, "comment_id": 84017442, "body": "Thank you @sascha. That was most helpful, I will give it a try."}], "owner": {"reputation": 1, "user_id": 9264610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fd0851edada4569f6e4cf4214fe2325?s=128&d=identicon&r=PG&f=1", "display_name": "rhythm0flife", "link": "https://stackoverflow.com/users/9264610/rhythm0flife"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 413, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1516841412, "creation_date": 1516833782, "last_edit_date": 1516841412, "question_id": 48432925, "link": "https://stackoverflow.com/questions/48432925/optimizing-using-scipy-optimize-differential-evolution", "title": "Optimizing using scipy.optimize.differential_evolution", "body": "<p>I have a custom function which takes 3 parameters with values between 0 and 1. I want to optimize these parameters using <a href=\"https://docs.scipy.org/doc/scipy-0.15.1/reference/generated/scipy.optimize.differential_evolution.html\" rel=\"nofollow noreferrer\">differential evolution in Scipy</a>. How do I pass the parameters of the function that needs to be optimized to the <code>differential_evolution</code> function? Please see the code snippet below of my custom function.</p>\n\n<pre><code>def per_Model(x,y,z):\n...\n   newLimit = x ** initialLimit\n...\n   if simValue &lt; y:\n      maxSim=np.argmin(simMatrix)\n      ...\n   else:\n      ...\n\n   newLoad = z ** rankOfLoad\n   ...\n   bestAccuracy = accuracy_score(actualData,predictedData)\n\n   return -bestAccuracy\n</code></pre>\n\n<p>I want to initialize the parameters x, y and z with some random initial values and find out which combination of these parameters produce the best result. How would I do this?</p>\n"}, {"tags": ["python", "pandas", "dataframe", "merge"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5451396"}, "edited": false, "score": 0, "creation_date": 1516834258, "post_id": 48432889, "comment_id": 83857298, "body": "have you tried using a join?"}], "answers": [{"comments": [{"owner": {"reputation": 75, "user_id": 6838523, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DLCGw.jpg?s=128&g=1", "display_name": "Binks", "link": "https://stackoverflow.com/users/6838523/binks"}, "edited": false, "score": 0, "creation_date": 1517091195, "post_id": 48432912, "comment_id": 83955118, "body": "Thanks! That would be my ideal answer: <code>df.B = df.groupby(&#39;A&#39;).B.apply(lambda x: x.ffill().bfill())</code>"}], "tags": [], "owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "is_accepted": true, "score": 2, "last_activity_date": 1516833695, "creation_date": 1516833695, "answer_id": 48432912, "question_id": 48432889, "link": "https://stackoverflow.com/questions/48432889/how-to-merge-a-specific-dataframe/48432912#48432912", "title": "How to merge a specific dataframe?", "body": "<p>IIUC you can do it this way:</p>\n\n<pre><code>In [91]: df.groupby('A').apply(lambda x: x.ffill().bfill())\nOut[91]:\n    A     B\n0   1  10.0\n1   1  10.0\n2   2  20.0\n3   2  20.0\n4   2  20.0\n5   3   NaN\n6   3   NaN\n7   3   NaN\n8   3   NaN\n9   4  40.0\n10  4  40.0\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": false, "score": 0, "last_activity_date": 1516834210, "creation_date": 1516834210, "answer_id": 48432998, "question_id": 48432889, "link": "https://stackoverflow.com/questions/48432889/how-to-merge-a-specific-dataframe/48432998#48432998", "title": "How to merge a specific dataframe?", "body": "<p>If  only have one value per sub group </p>\n\n<pre><code>df.B=df.A.map(df.set_index('A').dropna().B.to_dict())\ndf\nOut[717]: \n    A     B\n0   1  10.0\n1   1  10.0\n2   2  20.0\n3   2  20.0\n4   2  20.0\n5   3   NaN\n6   3   NaN\n7   3   NaN\n8   3   NaN\n9   4  40.0\n10  4  40.0\n</code></pre>\n"}], "owner": {"reputation": 75, "user_id": 6838523, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DLCGw.jpg?s=128&g=1", "display_name": "Binks", "link": "https://stackoverflow.com/users/6838523/binks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 48432912, "answer_count": 2, "score": 1, "last_activity_date": 1516834210, "creation_date": 1516833583, "last_edit_date": 1516833745, "question_id": 48432889, "link": "https://stackoverflow.com/questions/48432889/how-to-merge-a-specific-dataframe", "title": "How to merge a specific dataframe?", "body": "<p>I'm wrestling with a big dataframe merge, but here is the problem at a very minimal level...The loop works, but it's so slow...</p>\n\n<pre><code>import pandas as pd  \nimport numpy as np\n\n\ndf = pd.DataFrame({\"A\": [1,1,2,2,2,3,3,3,3,4,4], \n               \"B\": [ np.nan , 10, np.nan, 20, np.nan, np.nan,np.nan,np.nan,np.nan,40, np.nan]})\n\nIn[1]: df\nOut[1]: \n    A     B\n0   1   NaN\n1   1  10.0\n2   2   NaN\n3   2  20.0\n4   2   NaN\n5   3   NaN\n6   3   NaN\n7   3   NaN\n8   3   NaN\n9   4  40.0\n10  4   NaN\n</code></pre>\n\n<h1>How to obtain df2, without a loop - ?</h1>\n\n<pre><code>df2 = pd.DataFrame({\"A\": [1,1,2,2,2,3,3,3,3,4,4], \n               \"B\": [ 10 , 10, 20, 20, 20, np.nan,np.nan,np.nan,np.nan,40, 40]})\n\nIn[1]: df2\nOut[18]: \nA     B\n0   1  10.0\n1   1  10.0\n2   2  20.0\n3   2  20.0\n4   2  20.0\n5   3   NaN\n6   3   NaN\n7   3   NaN\n8   3   NaN\n9   4  40.0\n10  4  40.0\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "ethereum", "parity-io"], "comments": [{"owner": {"reputation": 1536, "user_id": 8412986, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xI5SM.jpg?s=128&g=1", "display_name": "carver", "link": "https://stackoverflow.com/users/8412986/carver"}, "edited": false, "score": 0, "creation_date": 1516838650, "post_id": 48432880, "comment_id": 83858680, "body": "I&#39;d recommend checking out <a href=\"http://web3py.readthedocs.io/\" rel=\"nofollow noreferrer\">web3py.readthedocs.io</a> to abstract away the json-rpc protocol."}, {"owner": {"reputation": 21839, "user_id": 6521116, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U2zHq.jpg?s=128&g=1", "display_name": "LF00", "link": "https://stackoverflow.com/users/6521116/lf00"}, "edited": false, "score": 0, "creation_date": 1524661031, "post_id": 48432880, "comment_id": 87061946, "body": "You can refer the node version. Refer to this <a href=\"https://stackoverflow.com/a/50019666/6521116\">answer</a> of <a href=\"https://stackoverflow.com/q/48180941/6521116\">Send ERC20 token with web3</a>."}], "answers": [{"tags": [], "owner": {"reputation": 16137, "user_id": 2026508, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d76e464967fe7ab0b42754ae5401d3ba?s=128&d=identicon&r=PG&f=1", "display_name": "jmunsch", "link": "https://stackoverflow.com/users/2026508/jmunsch"}, "is_accepted": false, "score": -1, "last_activity_date": 1516836000, "creation_date": 1516836000, "answer_id": 48433288, "question_id": 48432880, "link": "https://stackoverflow.com/questions/48432880/python-3-ethereum-how-to-send-erc20-tokens/48433288#48433288", "title": "Python 3, Ethereum - how to send ERC20 Tokens?", "body": "<p>Start a <code>geth</code> node and send a post request to the JSON-RPC interface like : </p>\n\n<pre><code>data = {\"method\": \"personal_sendTransaction\",\n        \"params\":[{\n                   \"from\": \"0xb60e8dd61c5d32be8058bb8eb970870f07233155\",\n                   \"to\": \"0xd46e8dd67c5d32be8058bb8eb970870f07244567\",\n                   \"gas\": \"0x76c0\", // 30400\n                   \"gasPrice\": \"0x9184e72a000\", // 10000000000000\n                   \"value\": \"0x9184e72a\", // 2441406250\n                   \"data\": \"0xd46e8dd67c5d32be8d46e8dd67c5d32be8058bb8eb970870f072445675058bb8eb970870f072445675\"}],\n        \"id\":1,\n        \"jsonrpc\":\"2.0\"\n        }\nheaders = {'Content-type': 'application/json'}\nr = requests.post('127.0.0.1:8545', data=json.dumps(data), headers=headers)\n</code></pre>\n\n<p>As far as the token contract, you'll need to find the address of where the contract is deployed, look at the ABI, and determine what information you'll need in order to call the <code>transfer</code> method of the token deployment.</p>\n"}, {"comments": [{"owner": {"reputation": 446, "user_id": 8206980, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/33b085c86c2b5a60f09a0c87db5f9e65?s=128&d=identicon&r=PG&f=1", "display_name": "Kamil", "link": "https://stackoverflow.com/users/8206980/kamil"}, "edited": false, "score": 0, "creation_date": 1516904753, "post_id": 48435490, "comment_id": 83891825, "body": "hmm &quot;standard token abi&quot; you mean that every contract has a unique abi, or maybe i have generate abi from transaction?"}, {"owner": {"reputation": 54533, "user_id": 94559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab13b7f135315a91b9ef13e073354d90?s=128&d=identicon&r=PG&f=1", "display_name": "user94559", "link": "https://stackoverflow.com/users/94559/user94559"}, "reply_to_user": {"reputation": 446, "user_id": 8206980, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/33b085c86c2b5a60f09a0c87db5f9e65?s=128&d=identicon&r=PG&f=1", "display_name": "Kamil", "link": "https://stackoverflow.com/users/8206980/kamil"}, "edited": false, "score": 0, "creation_date": 1516905203, "post_id": 48435490, "comment_id": 83892048, "body": "The ABI essentially describes the interface exposed by a contract. ERC20 is a standard for tokens, so all token contracts implement the same basic ABI. You can use that."}], "tags": [], "owner": {"reputation": 54533, "user_id": 94559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab13b7f135315a91b9ef13e073354d90?s=128&d=identicon&r=PG&f=1", "display_name": "user94559", "link": "https://stackoverflow.com/users/94559/user94559"}, "is_accepted": false, "score": 2, "last_activity_date": 1516853069, "creation_date": 1516853069, "answer_id": 48435490, "question_id": 48432880, "link": "https://stackoverflow.com/questions/48432880/python-3-ethereum-how-to-send-erc20-tokens/48435490#48435490", "title": "Python 3, Ethereum - how to send ERC20 Tokens?", "body": "<p><code>web3.py</code> is definitely the way to go. If you want to do it by hand and you just want to call the standard ERC-20 <code>transfer</code> method, the <code>from</code> address should stay the same, the <code>to</code> address should be the token contract, and then the <code>data</code> should be the following concatenated together and formatted as hexadecimal:</p>\n\n<ol>\n<li>The first 4 bytes of the keccak256 hash of \"transfer(address,uint256)\", which is the function's signature.</li>\n<li>The address of the recipient, left-zero-padded to be 32 bytes.</li>\n<li>The amount to be transferred. (Be sure to take into account the token's decimals... 1 token is often 10**18, but the number of decimal places varies from token to token and can be retrieved by calling the <code>decimals()</code> function.) This should also be formatted as a 32-byte number (so left-zero-padded).</li>\n</ol>\n\n<p><code>web3.py</code> would be much easier. :-) Something like: </p>\n\n<pre><code>web3.eth.contract(address, abi=standard_token_abi).sendTransaction({\n    'from': from_address\n}).transfer(to_address, amount)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 446, "user_id": 8206980, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/33b085c86c2b5a60f09a0c87db5f9e65?s=128&d=identicon&r=PG&f=1", "display_name": "Kamil", "link": "https://stackoverflow.com/users/8206980/kamil"}, "is_accepted": true, "score": 4, "last_activity_date": 1561472619, "last_edit_date": 1561472619, "creation_date": 1541405689, "answer_id": 53150565, "question_id": 48432880, "link": "https://stackoverflow.com/questions/48432880/python-3-ethereum-how-to-send-erc20-tokens/53150565#53150565", "title": "Python 3, Ethereum - how to send ERC20 Tokens?", "body": "<p>Guys it was simpler than it looks like. \nYou just have to put: </p>\n\n<blockquote>\n  <p>contract address</p>\n</blockquote>\n\n<p>as receiver and make a long \"data\" field, it represents string as:</p>\n\n<pre><code>// method name, its constans in erc20\n\n0xa9059cbb\n\n//receiver address (you have to do it without \"0x\" because its needed only when\n//you have to tell \"im using hexadecimal\". You did it above, in method field.\n//so, receiver address:\n\n5b7b3b499fb69c40c365343cb0dc842fe8c23887\n\n// and fill it with zeros, it have to be lenght 64. So fill rest of address \n\n0000000000000000000000005b7b3b499fb69c40c365343cb0dc842fe8c23887\n\n// then you need amount, please convert it to hexadecimal, delete \"0x\" and \n// remember, you need to integer first, so if token has 18 \"decimals\" it need\n// to be amount / 10**18 first!!\n//1e27786570c272000 and fill that with zeros, like above:\n\n000000000000000000000000000000000000000000000001e27786570c272000\n\n//just add string, to string, to string, and you have data field: \n\n0xa9059cbb0000000000000000000000005b7b3b499fb69c40c365343cb0dc842fe8c23887000000000000000000000000000000000000000000000001e27786570c272000\n</code></pre>\n\n<p>Sample transaction: <a href=\"https://etherscan.io/tx/0x9c27df8af24e06edb819a8d7a380f548fad637de5edddd6155d15087d1619964\" rel=\"nofollow noreferrer\">https://etherscan.io/tx/0x9c27df8af24e06edb819a8d7a380f548fad637de5edddd6155d15087d1619964</a></p>\n"}], "owner": {"reputation": 446, "user_id": 8206980, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/33b085c86c2b5a60f09a0c87db5f9e65?s=128&d=identicon&r=PG&f=1", "display_name": "Kamil", "link": "https://stackoverflow.com/users/8206980/kamil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2832, "favorite_count": 2, "accepted_answer_id": 53150565, "answer_count": 3, "score": 4, "last_activity_date": 1561472619, "creation_date": 1516833531, "last_edit_date": 1518082846, "question_id": 48432880, "link": "https://stackoverflow.com/questions/48432880/python-3-ethereum-how-to-send-erc20-tokens", "title": "Python 3, Ethereum - how to send ERC20 Tokens?", "body": "<p>i have some script using to sending Ethers from address to addres. Im using Parity, and Python 3.6. It is using Flask looks like:</p>\n\n<pre><code>from flask import Flask, render_template, json, request\nimport urllib\nimport requests\nimport binascii\nfrom decimal import *\napp = Flask(__name__)\n\ndef Eth(method,params=[]):\n    data = {\"method\":method,\"params\":params,\"id\":1,\"jsonrpc\":\"2.0\"}\n    headers = {'Content-type': 'application/json'}\n    r = requests.post(ethrpc, data=json.dumps(data), headers=headers)\n    r = r.text\n    response = json.loads(r)\n    return(response)\nhot = str(\"XXXXXXX\")\n@app.route('/')\ndef index():\n    ethnumbers = int(10)**int(18)\n    hot = str(\"XXXXX\")\n    balance = Eth(\"eth_getBalance\",[hot,'latest'])\n    balance = balance[\"result\"]\n    balance = int(balance, 16)\n    balance = float(balance)\n    balance = balance / ethnumbers\n    balance = str(balance)\n    return render_template('index.html',hot = hot,balance=balance)\n\n\n@app.route('/send/',methods=['POST','GET'])\ndef send():\n    getcontext().prec = 28\n    ethnumbers = Decimal(10)**Decimal(18)\n    print(ethnumbers)\n    if request.method == \"POST\":    \n        _myaddress = request.form['_myaddress']\n        _youraddress = request.form['_youraddress']\n        _amount = request.form['_amount']\n        _gas = request.form['_gas']\n        _gas = hex(int(_gas))\n        passy = str(\"XXXXXXXXX\")\n        getcontext().prec = 28\n        _amount = Decimal(_amount)\n        getcontext().prec = 28\n        _amount = _amount * ethnumbers\n        getcontext().prec = 28\n        _amount = int(_amount)\n        _amount = hex(_amount)\n        r = [{'from':_myaddress,\"to\":_youraddress,\"value\":_amount,\"gas\":_gas,},str(\"XXXXXXXXXX!\")]\n        print(r)\n        json.dumps(r)\n        resultio = Eth(\"personal_sendTransaction\",r)\n        try: \n            resultio[\"result\"]\n            return render_template('sent.html',resultio=resultio[\"result\"])\n        except: KeyError\n        return render_template('sent.html',resultio=resultio[\"error\"][\"message\"])\n\n    else:\n        return render_template('index.html')\n\n\n\n\n\n\n\nif __name__ == \"__main__\":\n    app.run()\n</code></pre>\n\n<p>Im pretty sure, that i have to use \"data\" to do this, but i have no idea how to send via this script ERC20 tokens. Structure of tokens transaction looks like \"my address -> token address -> token receiver\". </p>\n\n<p>Any ideas? </p>\n"}, {"tags": ["python", "matplotlib"], "comments": [{"owner": {"reputation": 732, "user_id": 4854766, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/da0d92a989793b4a9f7fa9fd56b2cbb7?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler Cowan", "link": "https://stackoverflow.com/users/4854766/tyler-cowan"}, "edited": false, "score": 0, "creation_date": 1516833103, "post_id": 48432738, "comment_id": 83856803, "body": "Have you tried changing the view? I get a different result when run on my machine using 3.6.2 some darker spots but not as much"}, {"owner": {"reputation": 656, "user_id": 3385432, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1f75236292280eef8be92065b7f575e2?s=128&d=identicon&r=PG&f=1", "display_name": "jmlarson", "link": "https://stackoverflow.com/users/3385432/jmlarson"}, "reply_to_user": {"reputation": 732, "user_id": 4854766, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/da0d92a989793b4a9f7fa9fd56b2cbb7?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler Cowan", "link": "https://stackoverflow.com/users/4854766/tyler-cowan"}, "edited": false, "score": 0, "creation_date": 1516884933, "post_id": 48432738, "comment_id": 83878110, "body": "Yes, I have tried changing the view. That does not fix the issue."}], "answers": [{"tags": [], "owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "is_accepted": true, "score": 5, "last_activity_date": 1516833821, "last_edit_date": 1516833821, "creation_date": 1516833177, "answer_id": 48432799, "question_id": 48432738, "link": "https://stackoverflow.com/questions/48432738/matplotlib-surface-color-not-solid/48432799#48432799", "title": "Matplotlib surface color not solid", "body": "<p>If you do not want any shading the solution is to set <code>shade=False</code>:</p>\n\n<pre><code>ax.plot_surface(X,Y,Z,color='r', shade=False)\n</code></pre>\n\n<p>Source: <a href=\"https://matplotlib.org/mpl_toolkits/mplot3d/tutorial.html\" rel=\"nofollow noreferrer\">Matplotlib Documentation</a></p>\n"}], "owner": {"reputation": 656, "user_id": 3385432, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1f75236292280eef8be92065b7f575e2?s=128&d=identicon&r=PG&f=1", "display_name": "jmlarson", "link": "https://stackoverflow.com/users/3385432/jmlarson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 844, "favorite_count": 0, "accepted_answer_id": 48432799, "answer_count": 1, "score": 2, "last_activity_date": 1516833821, "creation_date": 1516832809, "question_id": 48432738, "link": "https://stackoverflow.com/questions/48432738/matplotlib-surface-color-not-solid", "title": "Matplotlib surface color not solid", "body": "<p>When plotting a plane in Matplotlib, I do not get a solid color. I get the following with many shades of red:</p>\n\n<p><a href=\"https://i.stack.imgur.com/cdf2X.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/cdf2X.png\" alt=\"Not red plane\"></a></p>\n\n<p>I am using Matplotlib version 1.5.1 in Python 3.5.2. The code that I'm running is below:</p>\n\n<pre><code>import numpy as np\nfrom mpl_toolkits.mplot3d import axes3d\nimport matplotlib.pyplot as plt\n\nfig = plt.figure()\nax = fig.add_subplot(111, projection='3d')\n\nxaxis = np.linspace(-3, 3, 201)\nyaxis = np.linspace(-3, 3, 201)\nX, Y = np.meshgrid(xaxis, yaxis)\n\nZ = 8 - 3*X - 3*Y\nax.plot_surface(X,Y,Z,color='r')\n\nplt.savefig('not_red.png')\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "python-2.7"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1516832891, "post_id": 48432737, "comment_id": 83856697, "body": "You are almost always better off simply creating a new list. Even if you simply create an intermediate list to assign to the old-list in place, e.g. <code>my_list[:] = [x for x in my_list if x in some_other_list]</code>. Also, you should consider making <code>some_other_list</code> a <code>set</code> object, for performance reasons, especially if it is large."}, {"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1516833315, "post_id": 48432737, "comment_id": 83856894, "body": "Where do you use <code>list1</code>?"}, {"owner": {"reputation": 33, "user_id": 8700815, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xZA9F.png?s=128&g=1", "display_name": "medow", "link": "https://stackoverflow.com/users/8700815/medow"}, "edited": false, "score": 0, "creation_date": 1516833414, "post_id": 48432737, "comment_id": 83856930, "body": "thanks but i realy need to remove ittems That&#39;s what my teacher wants. If there is a way to remove, that will help me a lot"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1516833471, "post_id": 48432737, "comment_id": 83856959, "body": "That <i>does</i> do that."}, {"owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "edited": false, "score": 0, "creation_date": 1516834151, "post_id": 48432737, "comment_id": 83857253, "body": "There is a long discussion here about what &quot;in place&quot; means: <a href=\"https://stackoverflow.com/questions/8037455/how-to-modify-python-collections-by-filtering-in-place\" title=\"how to modify python collections by filtering in place\">stackoverflow.com/questions/8037455/&hellip;</a>. However, we shouldn&#39;t get bogged down in detail unless it really matters. &quot;That&#39;s what my teacher wants&quot; doesn&#39;t necessarily help with this."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "reply_to_user": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "edited": false, "score": 0, "creation_date": 1516834472, "post_id": 48432737, "comment_id": 83857385, "body": "@jp_data_analysis I think there is a very unambiguous test for <i>in-place</i> in Python, <code>x = []; in_place(x); print(x)</code> will modify <code>x</code>."}, {"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 0, "creation_date": 1516835133, "post_id": 48432737, "comment_id": 83857631, "body": "Nothing should get deleted since none of the list2 items contain any list1 item."}], "answers": [{"comments": [{"owner": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "edited": false, "score": 1, "creation_date": 1516833445, "post_id": 48432761, "comment_id": 83856944, "body": "You should probably move the <code>set(list1)</code> out of the list comprehension"}, {"owner": {"reputation": 33, "user_id": 8700815, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xZA9F.png?s=128&g=1", "display_name": "medow", "link": "https://stackoverflow.com/users/8700815/medow"}, "edited": false, "score": 0, "creation_date": 1516833716, "post_id": 48432761, "comment_id": 83857068, "body": "my challenge is to delete items from the list,"}, {"owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "edited": false, "score": 0, "creation_date": 1516834200, "post_id": 48432761, "comment_id": 83857271, "body": "Edited to (a) create set outside of the comprehension, (b) assign elements in-place via [:] notation."}], "tags": [], "owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "is_accepted": false, "score": 1, "last_activity_date": 1516833922, "last_edit_date": 1516833922, "creation_date": 1516832929, "answer_id": 48432761, "question_id": 48432737, "link": "https://stackoverflow.com/questions/48432737/how-to-remove-all-list-items-that-match-ttems-in-another-list-i/48432761#48432761", "title": "how to remove all list items that match ttems in another list i?", "body": "<p>Try a list comprehension:</p>\n\n<pre><code>list1_set = set(list1)\nlist2[:] = [x for x in list2 if int(x) not in list1_set]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 0, "creation_date": 1516834812, "post_id": 48432886, "comment_id": 83857512, "body": "Yours is polynomial time complexity as well."}], "tags": [], "owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "is_accepted": true, "score": 3, "last_activity_date": 1516833575, "creation_date": 1516833575, "answer_id": 48432886, "question_id": 48432737, "link": "https://stackoverflow.com/questions/48432737/how-to-remove-all-list-items-that-match-ttems-in-another-list-i/48432886#48432886", "title": "how to remove all list items that match ttems in another list i?", "body": "<p>You should avoid removing from a list in the middle. It will give you polynomial time complexity, and is a little tricky to get correct anyway. Removing items from a list while iterating over it will commonly cause you to skip items, as your list changes in size. However, it is possible to do it safely by iterating backwards over the sequence:</p>\n\n<pre><code>&gt;&gt;&gt; list1 = [6, 7, 8, 9]\n&gt;&gt;&gt; list2=['0009', '0001', '0008', '0003', '0004', '0005', '0006', '0007']\n</code></pre>\n\n<p>Then simply:</p>\n\n<pre><code>&gt;&gt;&gt; for i in reversed(range(len(list2))):\n...     item = list2[i]\n...     if any(int(c) in list1 for c in item):\n...         del list2[i]\n...\n&gt;&gt;&gt; list2\n['0001', '0003', '0004', '0005']\n</code></pre>\n\n<p>However, it is almost always faster and more efficient and straight-forward to create a new list as an intermediate and use it to change the original list in-place:</p>\n\n<pre><code>&gt;&gt;&gt; list2[:] = [x for x in list2 if any(int(c) in list1 for c in x)]\n&gt;&gt;&gt; list2\n['0009', '0008', '0006', '0007']\n</code></pre>\n\n<p>Finally, if you are going to be checking membership in a list, consider using a <code>set</code> object instead. Checking if an item is in a list is a linear operation, versus constant time with a <code>set</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1516833775, "post_id": 48432904, "comment_id": 83857090, "body": "@juanpa.arrivillaga Correct. That&#39;s why I said <i>if all <code>list2</code> items are unique</i>."}, {"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1516833856, "post_id": 48432904, "comment_id": 83857134, "body": "@juanpa.arrivillaga Your solution is more robust and general, but possibly less efficient. (Which is such a common case!)"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1516834026, "post_id": 48432904, "comment_id": 83857208, "body": "The best solution in python is almost always <code>x[:] = &lt;some comprehension filtering x&gt;</code>. It will be linear time, I&#39;m pretty sure, but I don&#39;t feel like digging through the source code (the slicing code being particularly daunting, the last time I tried)."}, {"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1516834109, "post_id": 48432904, "comment_id": 83857238, "body": "@juanpa.arrivillaga This still creates a <i>copy</i> of the list before storing it in the same object. If the list is huge, making a copy may be a problem."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1516834158, "post_id": 48432904, "comment_id": 83857257, "body": "Definitely, although, if your list truly is that huge, you are going to hurt pretty bad from the quadratic time complexity of the more memory efficient version, unless maybe the number of items removed is expected to be relatively small."}, {"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1516834231, "post_id": 48432904, "comment_id": 83857284, "body": "@juanpa.arrivillaga Agree, but often &quot;time that we have is space that we have not.&quot;"}], "tags": [], "owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "is_accepted": false, "score": 1, "last_activity_date": 1516833781, "last_edit_date": 1516833781, "creation_date": 1516833669, "answer_id": 48432904, "question_id": 48432737, "link": "https://stackoverflow.com/questions/48432737/how-to-remove-all-list-items-that-match-ttems-in-another-list-i/48432904#48432904", "title": "how to remove all list items that match ttems in another list i?", "body": "<p>If all <code>list2</code> items are unique, you can remove them in a reversed iteration:</p>\n\n<pre><code>for item in reversed(list2):\n    for number in list1:\n        if str(number) in item:\n            list2.remove(item)\n            break\nprint(list2)\n#['0001', '0003', '0004', '0005']\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 56804, "user_id": 7326738, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VgOrW.jpg?s=128&g=1", "display_name": "Ajax1234", "link": "https://stackoverflow.com/users/7326738/ajax1234"}, "is_accepted": false, "score": 1, "last_activity_date": 1516834331, "creation_date": 1516834331, "answer_id": 48433017, "question_id": 48432737, "link": "https://stackoverflow.com/questions/48432737/how-to-remove-all-list-items-that-match-ttems-in-another-list-i/48433017#48433017", "title": "how to remove all list items that match ttems in another list i?", "body": "<p>You can use <code>re.findall</code>:</p>\n\n<pre><code>import re\nlist1 = [6, 7, 8, 9]\nlist2=['0009', '0001', '0008', '0003', '0004', '0005', '0006', '0007']\nnew_list2 = filter(lambda x:int(re.findall('\\d+(?=$)', x)[0]) not in list1, list2)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>['0001', '0003', '0004', '0005']\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 22954, "user_id": 5238915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fncqh.jpg?s=128&g=1", "display_name": "RoadRunner", "link": "https://stackoverflow.com/users/5238915/roadrunner"}, "is_accepted": false, "score": 0, "last_activity_date": 1516864148, "last_edit_date": 1516864148, "creation_date": 1516863824, "answer_id": 48437319, "question_id": 48432737, "link": "https://stackoverflow.com/questions/48432737/how-to-remove-all-list-items-that-match-ttems-in-another-list-i/48437319#48437319", "title": "how to remove all list items that match ttems in another list i?", "body": "<p>You can always use set intersection:</p>\n\n<pre><code>list1 = [6, 7, 8, 9]\nlist2=['0009', '0001', '0008', '0003', '0004', '0005', '0006', '0007']\n\nlist1 = set(map(str, list1))\n# {'6', '8', '9', '7'}\n\nlist2[:] = [x for x in list2 if not list1.intersection(x)]\n\nprint(list2)\n</code></pre>\n\n<p>Which Outputs:</p>\n\n<pre><code>['0001', '0003', '0004', '0005']\n</code></pre>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user9158931"}, "is_accepted": false, "score": 0, "last_activity_date": 1516882329, "creation_date": 1516882329, "answer_id": 48442590, "question_id": 48432737, "link": "https://stackoverflow.com/questions/48432737/how-to-remove-all-list-items-that-match-ttems-in-another-list-i/48442590#48442590", "title": "how to remove all list items that match ttems in another list i?", "body": "<p>You can try something like this</p>\n\n<pre><code>list1 = [6, 7, 8, 9]\nlist2=['0009', '0001', '0008', '0003', '0004', '0005', '0006', '0007']\n\nfor i in list2:\n    if int(list(i)[-1:][0]) not in list1:\n        print(i)\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>0001\n0003\n0004\n0005\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 8700815, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xZA9F.png?s=128&g=1", "display_name": "medow", "link": "https://stackoverflow.com/users/8700815/medow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 48432886, "answer_count": 6, "score": 0, "last_activity_date": 1516882329, "creation_date": 1516832772, "last_edit_date": 1516833028, "question_id": 48432737, "link": "https://stackoverflow.com/questions/48432737/how-to-remove-all-list-items-that-match-ttems-in-another-list-i", "title": "how to remove all list items that match ttems in another list i?", "body": "<p>I wonder how can i iterate over a list2 and remove all ittems that contains one of the list1 ittems ?<br></p>\n\n<pre><code>list1 = [6, 7, 8, 9]\nlist2=['0009', '0001', '0008', '0003', '0004', '0005', '0006', '0007']\n</code></pre>\n\n<p>and result will be :<br></p>\n\n<pre><code>list2=[ '0001',  '0003', '0004', '0005']\n</code></pre>\n\n<p>i try somthing like :</p>\n\n<pre><code>list1 = [6, 7, 8, 9]\nlist2=['0009', '0001', '0008', '0003', '0004', '0005', '0006', '0007']\n\n\nfor ittem in list2:\n    for digit in ittem:\n        if digit in ittem:\n            list2.remove(ittem)\n\nprint(list2)\n</code></pre>\n\n<p>for ittem in list2:\n    for digit in ittem:\n        if digit in ittem:\n            list2</p>\n\n<blockquote>\n  <p>result :ValueError: list.remove(x): x not in list</p>\n</blockquote>\n\n<p>ps : i dont want to creat a new list , i want to remove ittems .. Any ideas ?</p>\n"}, {"tags": ["python", "dictionary", "scripting", "maya"], "comments": [{"owner": {"reputation": 953, "user_id": 372962, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/qWFSX.png?s=128&g=1", "display_name": "JohnnyBizzle", "link": "https://stackoverflow.com/users/372962/johnnybizzle"}, "edited": false, "score": 0, "creation_date": 1516833895, "post_id": 48432692, "comment_id": 83857151, "body": "I got an error with the last print statement. Should it be <code>print(selectionDict[k])</code> ?"}, {"owner": {"reputation": 2302, "user_id": 2742418, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zbieZ.png?s=128&g=1", "display_name": "DrWeeny", "link": "https://stackoverflow.com/users/2742418/drweeny"}, "edited": false, "score": 0, "creation_date": 1516839315, "post_id": 48432692, "comment_id": 83858879, "body": "is it on purpose that you are nesting dictionaries ? selectionDict should be used like this in your example : for k in selectionDict.keys() : ///// print( selectionDict[k][&#39;pos&#39;] ) #### where k will be the mesh name"}, {"owner": {"reputation": 1, "user_id": 9159470, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ojxqXWfTP7g/AAAAAAAAAAI/AAAAAAAAACY/JdOW8X6AwOU/photo.jpg?sz=128", "display_name": "Ben", "link": "https://stackoverflow.com/users/9159470/ben"}, "edited": false, "score": 0, "creation_date": 1516848898, "post_id": 48432692, "comment_id": 83861255, "body": "Oof, thanks for the save! Any chance you might also know how to get the translate, rotation, and scale values to return as a dictionary?"}], "answers": [{"tags": [], "owner": {"reputation": 1262, "user_id": 1116545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c22583100d96c0443dd4536ca1899300?s=128&d=identicon&r=PG", "display_name": "ababak", "link": "https://stackoverflow.com/users/1116545/ababak"}, "is_accepted": false, "score": 0, "last_activity_date": 1516891409, "creation_date": 1516891409, "answer_id": 48445531, "question_id": 48432692, "link": "https://stackoverflow.com/questions/48432692/two-questions-about-python-dictionaries-in-maya/48445531#48445531", "title": "Two Questions about Python Dictionaries in Maya", "body": "<p>First of all, to list all the objects with transforms you can use this command:</p>\n\n<pre><code>cmds.ls(selection=True, transforms=True, dagObjects=True)\n</code></pre>\n\n<p>If you want to read/write the transforms, you don't need to get the translation, then rotation and scale separately. You can read the composite transformation matrix like this:</p>\n\n<pre><code>xform_matrix = cmds.xform(source_object, query=True, matrix=True)\n</code></pre>\n\n<p>You'll get a list of 16 float numbers that are ready to be applied to other objects:</p>\n\n<pre><code>cmds.xform(destination_object, matrix=xform_matrix)\n</code></pre>\n\n<p>I am not sure how do you want to map the transforms from one set of selected objects to another set. If you describe, I'll be able to post the complete code.</p>\n\n<p>The following script will collect the composite transformation matrix of all selected objects in the dictionary with long object names as the keys:</p>\n\n<pre><code>selected_objects_matrix = {}\nfor current_object in cmds.ls(selection=True, transforms=True, dagObjects=True):\n    selected_objects_matrix[cmds.ls(current_object, long=True)] = cmds.xform(\n        current_object,\n        query=True,\n        matrix=True)\n</code></pre>\n\n<p>Then if you move/rotate/scale the objects in Maya, you can revert like that:</p>\n\n<pre><code>for current_object in selected_objects_matrix:\n    cmds.xform(\n        current_object,\n        matrix=selected_objects_matrix[current_object])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 437, "user_id": 2690843, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8e19b13d426b1496f8a20a645185281b?s=128&d=identicon&r=PG&f=1", "display_name": "cronicryo", "link": "https://stackoverflow.com/users/2690843/cronicryo"}, "is_accepted": false, "score": 0, "last_activity_date": 1517246578, "creation_date": 1517246578, "answer_id": 48506713, "question_id": 48432692, "link": "https://stackoverflow.com/questions/48432692/two-questions-about-python-dictionaries-in-maya/48506713#48506713", "title": "Two Questions about Python Dictionaries in Maya", "body": "<p>you really just want to do what you have in reverse\nsetting the <code>q=1</code> sets the command into <code>query mode</code>.\nremoving this flag defaults the command to <code>edit mode</code></p>\n\n<p><code>getAttr</code> and <code>setAttr</code> are their respective commands, however you need to be aware of the data that youre setting. even though youre grabbing the <code>s</code> attribute above youre making that only grab the <code>x</code> value so when you set it you need to specify <code>sx</code></p>\n\n<pre><code>cmds.xform ( m , ws = 1 , t = posValues)\ncmds.xform( m , ws = 1 , rotation = rotValues )\ncmds.setAttr ( m  + '.sx', scaleValue) # sx because you are only grabbing the X Value\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9159470, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ojxqXWfTP7g/AAAAAAAAAAI/AAAAAAAAACY/JdOW8X6AwOU/photo.jpg?sz=128", "display_name": "Ben", "link": "https://stackoverflow.com/users/9159470/ben"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 253, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1517246578, "creation_date": 1516832582, "question_id": 48432692, "link": "https://stackoverflow.com/questions/48432692/two-questions-about-python-dictionaries-in-maya", "title": "Two Questions about Python Dictionaries in Maya", "body": "<p>Thanks for taking a moment to read this! So, my first issue is that I'm trying to create a function, \"selectionData()\", to get an object's translate, rotate, and scale values and then return them as a dictionary, but find myself struggling a bit. Using the code listed below, all I keep getting is the object's name. How can I modify it to get its translate, rotate, and scale values to return as a dictionary?</p>\n\n<p>My second issue is that I'm trying to create a function, \"setData(data)\", that takes as input the aforementioned dictionary built with selectionData() and restores the data in the dictionary to the selected objects. How do I do that?</p>\n\n<p>My apologies if either of these questions are foolish, but thank you for your time, regardless! Cheers!</p>\n\n<p>Current code is listed below:</p>\n\n<pre><code>from maya import cmds\n\nsel = cmds.ls(sl = 1)\nmeshes =[]\nfor s in sel :\n    shape = cmds.listRelatives(s , shapes = 1 ) \n    if shape :\n        if cmds.nodeType(shape[0]) == \"mesh\" :\n            meshes.append(s )\n\nmeshData = {}            \nfor m in meshes :\n    pos = cmds.xform ( m , q =1 , ws = 1 , t = 1)\n    rot = cmds.xform( m , q =1  , ws = 1 , rotation =  1 )\n    scl = cmds.getAttr ( m  + '.s' )[0]\n\n    currentDict = {\n                    \"pos\" : pos ,\n                    \"rot\" : rot ,\n                    \"scl\" : scl ,\n\n                    }\n\n    meshData[m] = currentDict\n\ndef selectionData( selectionDict):\n\n\n    for k in selectionDict :\n        print k\n\nselectionData(meshData)\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 4414, "user_id": 5241032, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/056c678e99e8253ad280b230ba30a7fb?s=128&d=identicon&r=PG&f=1", "display_name": "cmaher", "link": "https://stackoverflow.com/users/5241032/cmaher"}, "edited": false, "score": 1, "creation_date": 1516833232, "post_id": 48432671, "comment_id": 83856863, "body": "<code>pd.read_csv</code> generally doesn&#39;t infer date types unless explicitly told to do so (i.e. with the <code>parse_dates</code> argument; see <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.read_csv.html\" rel=\"nofollow noreferrer\">here</a>). &quot;object&quot; is the dtype given to strings, so that is how your date variables are stored unless you convert them. You can either convert them on import (with <code>parse_dates</code>), or using the <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.to_datetime.html\" rel=\"nofollow noreferrer\">pd.to_datetime</a> method."}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 1, "creation_date": 1516834158, "post_id": 48432671, "comment_id": 83857258, "body": "From the <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.read_csv.html\" rel=\"nofollow noreferrer\">docs</a> you could try <code>parse_dates</code>. As a side note: <code>from datetime import datetime</code> does <i>nothing</i> by itself to parse dates, it just gives you access to the <code>datetime</code> class should you wish to try create a <code>datetime</code> object."}], "owner": {"user_type": "does_not_exist", "display_name": "user9264558"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1516832754, "creation_date": 1516832511, "question_id": 48432671, "link": "https://stackoverflow.com/questions/48432671/identify-datetime64-columns-in-a-dataframe-using-python", "title": "Identify Datetime64 columns in a dataframe using python", "body": "<p>I need to identify which of the columns in a dataframe (having many columns) are \"datetime64[ns]\".</p>\n\n<p>I imported the csv file and used df.dtype() syntax to display the datatypes.However, the output shows  dtype as \"object\" instead of \"datetime64\" for the columns that have dates. Please help, I am a beginner (I have imported \"from datetime import datetime\"). </p>\n"}, {"tags": ["python", "django", "apache"], "comments": [{"owner": {"reputation": 2454, "user_id": 8784938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/753bb55c80a644f950a41ae11cfbe48c?s=128&d=identicon&r=PG&f=1", "display_name": "SuperStew", "link": "https://stackoverflow.com/users/8784938/superstew"}, "edited": false, "score": 1, "creation_date": 1516832624, "post_id": 48432664, "comment_id": 83856555, "body": "Did you do this stuff? <a href=\"https://www.digitalocean.com/community/tutorials/how-to-serve-django-applications-with-apache-and-mod_wsgi-on-ubuntu-14-04\" rel=\"nofollow noreferrer\">digitalocean.com/community/tutorials/&hellip;</a>"}, {"owner": {"reputation": 17233, "user_id": 1252711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08b41a1b3d93fd1233a518e340de31b9?s=128&d=identicon&r=PG", "display_name": "dirkgroten", "link": "https://stackoverflow.com/users/1252711/dirkgroten"}, "edited": false, "score": 3, "creation_date": 1516833162, "post_id": 48432664, "comment_id": 83856827, "body": "The <a href=\"https://docs.djangoproject.com/en/1.11/howto/deployment/wsgi/modwsgi/\" rel=\"nofollow noreferrer\">official Django documentation</a> shows you the configuration. If you don&#39;t get it to work, show us your <i>.conf</i> files"}, {"owner": {"reputation": 11, "user_id": 9264568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/271a291693c6543dbf3b7a0844d566a7?s=128&d=identicon&r=PG&f=1", "display_name": "Thomasc", "link": "https://stackoverflow.com/users/9264568/thomasc"}, "edited": false, "score": 0, "creation_date": 1516835248, "post_id": 48432664, "comment_id": 83857665, "body": "When I created my project using &quot;python-admin.py startproject myproject&quot;, it didnt create a &quot;static&quot; file. I noticed most of the tutorials are mentioning that. I have static in my paths for the .conf files. Do I need to create this on my own?"}, {"owner": {"reputation": 11, "user_id": 9264568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/271a291693c6543dbf3b7a0844d566a7?s=128&d=identicon&r=PG&f=1", "display_name": "Thomasc", "link": "https://stackoverflow.com/users/9264568/thomasc"}, "edited": false, "score": 0, "creation_date": 1516838659, "post_id": 48432664, "comment_id": 83858684, "body": "Ok, I purged apache and followed the example here: <a href=\"https://www.digitalocean.com/community/tutorials/how-to-serve-django-applications-with-apache-and-mod_wsgi-on-ubuntu-14-04\" rel=\"nofollow noreferrer\">digitalocean.com/community/tutorials/&hellip;</a>      Now I am getting a &quot;Forbidden&quot; when I go to the IP Address."}, {"owner": {"reputation": 816, "user_id": 4008203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d4519da6bf6475c2f7d71ddc6749fe5?s=128&d=identicon&r=PG&f=1", "display_name": "saviour123", "link": "https://stackoverflow.com/users/4008203/saviour123"}, "edited": false, "score": 0, "creation_date": 1516870491, "post_id": 48432664, "comment_id": 83868896, "body": "reinstall it after purging. <code>tail &#47;var&#47;log&#47;apache2&#47;error.log</code> to see what is the error!"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 9264568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/271a291693c6543dbf3b7a0844d566a7?s=128&d=identicon&r=PG&f=1", "display_name": "Thomasc", "link": "https://stackoverflow.com/users/9264568/thomasc"}, "edited": false, "score": 0, "creation_date": 1516833793, "post_id": 48432862, "comment_id": 83857103, "body": "Thank you for the quick response! I have actually followed the steps at both of those links. When I was done with the tutorials, I went to the ip address and then the 500 internal error popped up. If I purge Apache, will this mess with anything I have setup for SSH, FTP, and MySql?"}], "tags": [], "owner": {"reputation": 816, "user_id": 4008203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d4519da6bf6475c2f7d71ddc6749fe5?s=128&d=identicon&r=PG&f=1", "display_name": "saviour123", "link": "https://stackoverflow.com/users/4008203/saviour123"}, "is_accepted": false, "score": 0, "last_activity_date": 1516833459, "creation_date": 1516833459, "answer_id": 48432862, "question_id": 48432664, "link": "https://stackoverflow.com/questions/48432664/setting-up-ubuntu-server-16-04-with-apache-to-run-django/48432862#48432862", "title": "Setting up Ubuntu Server 16.04 with Apache to run Django", "body": "<p>There are several ways of deploying a django app on linux. But since you have not mention your specific error. I would give this recommendations. You would have to purge Apache and reinstall, that is if you have not corrupted the <code>.conf</code> </p>\n\n<ol>\n<li>I usually prefer the docker approach that is if you know docker[a little google] then reverse proxy to Apache</li>\n<li>Deploy with wsgi which can be run with Apache</li>\n</ol>\n\n<p>NB. Django deployment docs <a href=\"https://docs.djangoproject.com/en/2.0/howto/deployment/wsgi/\" rel=\"nofollow noreferrer\">https://docs.djangoproject.com/en/2.0/howto/deployment/wsgi/</a></p>\n\n<p>To Do your deployment.\nfollow this Tutorial <a href=\"https://www.digitalocean.com/community/tutorials/how-to-serve-django-applications-with-apache-and-mod_wsgi-on-debian-8\" rel=\"nofollow noreferrer\">https://www.digitalocean.com/community/tutorials/how-to-serve-django-applications-with-apache-and-mod_wsgi-on-debian-8</a></p>\n\n<p>There is a video tutorial here as well => <a href=\"https://www.youtube.com/watch?v=VNBpdT0N8hw\" rel=\"nofollow noreferrer\">enter link description here</a></p>\n\n<p>If you want to sail easily. You can deploy with <a href=\"http://pythonanywhere.com/\" rel=\"nofollow noreferrer\">pythonanywhere</a></p>\n"}], "owner": {"reputation": 11, "user_id": 9264568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/271a291693c6543dbf3b7a0844d566a7?s=128&d=identicon&r=PG&f=1", "display_name": "Thomasc", "link": "https://stackoverflow.com/users/9264568/thomasc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 701, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1516835663, "creation_date": 1516832470, "last_edit_date": 1516835663, "question_id": 48432664, "link": "https://stackoverflow.com/questions/48432664/setting-up-ubuntu-server-16-04-with-apache-to-run-django", "title": "Setting up Ubuntu Server 16.04 with Apache to run Django", "body": "<p>I have Ubuntu Server 16.04 running Apache. I am trying to get Apache to run Django. So far I have created a project in Django and can get it to run on port 80 by using the command <code>sudo python3 manage.py runserver 192.168.1.230:80</code>. </p>\n\n<p>I would like to have Apache setup to run Django so I do not have to do this command. </p>\n\n<p>I have looked for 6 hours now and tried 10+ different ways to do this and can't get it to work. I usually end up getting a 500 Internal Error. I have changed the apache2.conf file, and 000-default.conf file.</p>\n\n<p>What should I do? </p>\n\n<p>Here is my apache2.conf</p>\n\n<pre><code># This is the main Apache server configuration file.  It contains the\n# configuration directives that give the server its instructions.\n# See http://httpd.apache.org/docs/2.4/ for detailed information about\n# the directives and /usr/share/doc/apache2/README.Debian about Debian specific\n# hints.\n#\n#\n# Summary of how the Apache 2 configuration works in Debian:\n# The Apache 2 web server configuration in Debian is quite different to\n# upstream's suggested way to configure the web server. This is because Debian's\n# default Apache2 installation attempts to make adding and removing modules,\n# virtual hosts, and extra configuration directives as flexible as possible, in\n# order to make automating the changes and administering the server as easy as\n# possible.\n\n# It is split into several files forming the configuration hierarchy outlined\n# below, all located in the /etc/apache2/ directory:\n#\n#   /etc/apache2/\n#   |-- apache2.conf\n#   |   `--  ports.conf\n#   |-- mods-enabled\n#   |   |-- *.load\n#   |   `-- *.conf\n#   |-- conf-enabled\n#   |   `-- *.conf\n#   `-- sites-enabled\n#       `-- *.conf\n#\n#\n# * apache2.conf is the main configuration file (this file). It puts the pieces\n#   together by including all remaining configuration files when starting up the\n#   web server.\n#\n# * ports.conf is always included from the main configuration file. It is\n#   supposed to determine listening ports for incoming connections which can be\n#   customized anytime.\n#\n# * Configuration files in the mods-enabled/, conf-enabled/ and sites-enabled/\n#   directories contain particular configuration snippets which manage modules,\n#   global configuration fragments, or virtual host configurations,\n#   respectively.\n#\n#   They are activated by symlinking available configuration files from their\n#   respective *-available/ counterparts. These should be managed by using our\n#   helpers a2enmod/a2dismod, a2ensite/a2dissite and a2enconf/a2disconf. See\n#   their respective man pages for detailed information.\n#\n# * The binary is called apache2. Due to the use of environment variables, in\n#   the default configuration, apache2 needs to be started/stopped with\n#   /etc/init.d/apache2 or apache2ctl. Calling /usr/bin/apache2 directly will not\n#   work with the default configuration.\n\n\n# Global configuration\n#\n\n#\n# ServerRoot: The top of the directory tree under which the server's\n# configuration, error, and log files are kept.\n#\n# NOTE!  If you intend to place this on an NFS (or otherwise network)\n# mounted filesystem then please read the Mutex documentation (available\n# at &lt;URL:http://httpd.apache.org/docs/2.4/mod/core.html#mutex&gt;);\n# you will save yourself a lot of trouble.\n#\n# Do NOT add a slash at the end of the directory path.\n#\n#ServerRoot \"/etc/apache2\"\n\n#\n# The accept serialization lock file MUST BE STORED ON A LOCAL DISK.\n#\nMutex file:${APACHE_LOCK_DIR} default\n\n#\n# PidFile: The file in which the server should record its process\n# identification number when it starts.\n# This needs to be set in /etc/apache2/envvars\n#\nPidFile ${APACHE_PID_FILE}\n\n#\n# Timeout: The number of seconds before receives and sends time out.\n#\nTimeout 300\n\n#\n# KeepAlive: Whether or not to allow persistent connections (more than\n# one request per connection). Set to \"Off\" to deactivate.\n#\nKeepAlive On\n\n#\n# MaxKeepAliveRequests: The maximum number of requests to allow\n# during a persistent connection. Set to 0 to allow an unlimited amount.\n# We recommend you leave this number high, for maximum performance.\n#\nMaxKeepAliveRequests 100\n\n#\n# KeepAliveTimeout: Number of seconds to wait for the next request from the\n# same client on the same connection.\n#\nKeepAliveTimeout 5\n\n\n# These need to be set in /etc/apache2/envvars\nUser ${APACHE_RUN_USER}\nGroup ${APACHE_RUN_GROUP}\n\n#\n# HostnameLookups: Log the names of clients or just their IP addresses\n# e.g., www.apache.org (on) or 204.62.129.132 (off).\n# The default is off because it'd be overall better for the net if people\n# had to knowingly turn this feature on, since enabling it means that\n# each client request will result in AT LEAST one lookup request to the\n# nameserver.\n#\nHostnameLookups Off\n\n# ErrorLog: The location of the error log file.\n# If you do not specify an ErrorLog directive within a &lt;VirtualHost&gt;\n# container, error messages relating to that virtual host will be\n# logged here.  If you *do* define an error logfile for a &lt;VirtualHost&gt;\n# container, that host's errors will be logged there and not here.\n#\nErrorLog ${APACHE_LOG_DIR}/error.log\n\n#\n# LogLevel: Control the severity of messages logged to the error_log.\n# Available values: trace8, ..., trace1, debug, info, notice, warn,\n# error, crit, alert, emerg.\n# It is also possible to configure the log level for particular modules, e.g.\n# \"LogLevel info ssl:warn\"\n#\nLogLevel warn\n\n# Include module configuration:\nIncludeOptional mods-enabled/*.load\nIncludeOptional mods-enabled/*.conf\n\n# Include list of ports to listen on\nInclude ports.conf\n\n\n# Sets the default security model of the Apache2 HTTPD server. It does\n# not allow access to the root filesystem outside of /usr/share and /var/www.\n# The former is used by web applications packaged in Debian,\n# the latter may be used for local directories served by the web server. If\n# your system is serving content from a sub-directory in /srv you must allow\n# access here, or in any related virtual host.\n&lt;Directory /&gt;\n    Options FollowSymLinks\n    AllowOverride None\n    Require all denied\n&lt;/Directory&gt;\n\n&lt;Directory /usr/share&gt;\n    AllowOverride None\n    Require all granted\n&lt;/Directory&gt;\n\n&lt;Directory /var/www/&gt;\n    Options Indexes FollowSymLinks\n    AllowOverride None\n    Require all granted\n&lt;/Directory&gt;\n\n#&lt;Directory /srv/&gt;\n#   Options Indexes FollowSymLinks\n#   AllowOverride None\n#   Require all granted\n#&lt;/Directory&gt;\n\n\n\n\n# AccessFileName: The name of the file to look for in each directory\n# for additional configuration directives.  See also the AllowOverride\n# directive.\n#\nAccessFileName .htaccess\n\n#\n# The following lines prevent .htaccess and .htpasswd files from being\n# viewed by Web clients.\n#\n&lt;FilesMatch \"^\\.ht\"&gt;\n    Require all denied\n&lt;/FilesMatch&gt;\n\n\n#\n# The following directives define some format nicknames for use with\n# a CustomLog directive.\n#\n# These deviate from the Common Log Format definitions in that they use %O\n# (the actual bytes sent including headers) instead of %b (the size of the\n# requested file), because the latter makes it impossible to detect partial\n# requests.\n#\n# Note that the use of %{X-Forwarded-For}i instead of %h is not recommended.\n# Use mod_remoteip instead.\n#\nLogFormat \"%v:%p %h %l %u %t \\\"%r\\\" %&gt;s %O \\\"%{Referer}i\\\" \\\"%{User-Agent}i\\\"\" vhost_combined\nLogFormat \"%h %l %u %t \\\"%r\\\" %&gt;s %O \\\"%{Referer}i\\\" \\\"%{User-Agent}i\\\"\" combined\nLogFormat \"%h %l %u %t \\\"%r\\\" %&gt;s %O\" common\nLogFormat \"%{Referer}i -&gt; %U\" referer\nLogFormat \"%{User-agent}i\" agent\n\n# Include of directories ignores editors' and dpkg's backup files,\n# see README.Debian for details.\n\n# Include generic snippets of statements\nIncludeOptional conf-enabled/*.conf\n\n# Include the virtual host configurations:\nIncludeOptional sites-enabled/*.conf\n\n# vim: syntax=apache ts=4 sw=4 sts=4 sr noet\n</code></pre>\n\n<p>Here is my 000-default.conf</p>\n\n<pre><code>&lt;VirtualHost *:80&gt;\n    # The ServerName directive sets the request scheme, hostname and port that\n    # the server uses to identify itself. This is used when creating\n    # redirection URLs. In the context of virtual hosts, the ServerName\n    # specifies what hostname must appear in the request's Host: header to\n    # match this virtual host. For the default virtual host (this file) this\n    # value is not decisive as it is used as a last resort host regardless.\n    # However, you must set it for any further virtual host explicitly.\n    #ServerName www.example.com\n\n    ServerAdmin webmaster@localhost\n    #DocumentRoot /var/www/\n    DocumentRoot /var/www/ticketportal/ticketportal\n    WSGIScriptAlias / /var/www/ticketportal/ticketportal/ticketportal/wsgi.py\n\n    WSGIDaemonProcess ticketportal.com python-home=/var/www/ticketportal/ticketportalenv/lib/python3.5\n    WSGIProcessGroup ticketportal.com\n\n    &lt;Directory /var/www/ticketportal/ticketportal&gt;\n        Require all granted\n    &lt;/Directory&gt;\n\n    # Available loglevels: trace8, ..., trace1, debug, info, notice, warn,\n    # error, crit, alert, emerg.\n    # It is also possible to configure the loglevel for particular\n    # modules, e.g.\n    #LogLevel info ssl:warn\n\n    ErrorLog ${APACHE_LOG_DIR}/error.log\n    CustomLog ${APACHE_LOG_DIR}/access.log combined\n\n    # For most configuration files from conf-available/, which are\n    # enabled or disabled at a global level, it is possible to\n    # include a line for only one particular virtual host. For example the\n    # following line enables the CGI configuration for this host only\n    # after it has been globally disabled with \"a2disconf\".\n    #Include conf-available/serve-cgi-bin.conf\n\n    Alias /static /var/www/ticketportal/ticketportal/static/\n    &lt;Directory /var/www/ticketportal/ticketportal/static&gt;   \n        Require all granted\n    &lt;/Directory&gt;\n\n    &lt;Directory /var/www/ticketportal&gt;\n        Require all granted\n    &lt;/Directory&gt;\n\n    &lt;Directory /var/www/ticketportal/ticketportal&gt;\n        &lt;Files wsgi.py&gt;\n            Require all granted\n        &lt;/Files&gt;\n    &lt;/Directory&gt;\n\n&lt;/VirtualHost&gt;\n\n# vim: syntax=apache ts=4 sw=4 sts=4 sr noet\n</code></pre>\n"}, {"tags": ["python", "pandas", "signal-processing"], "answers": [{"tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": true, "score": 3, "last_activity_date": 1516832700, "creation_date": 1516832700, "answer_id": 48432722, "question_id": 48432627, "link": "https://stackoverflow.com/questions/48432627/pandas-split-dataframe-on-signal-threshold/48432722#48432722", "title": "Pandas: split dataframe on signal threshold", "body": "<p>You can create groups with</p>\n\n<pre><code>mask = df[\"average\"].gt(.7)\nrgns = mask.diff().iloc[::-1].cumsum().iloc[::-1]\ngb = df.assign(Region=rgns)[mask].groupby('Region')\n</code></pre>\n\n<p>I could show you more, but you didn't provide data to play with.</p>\n"}], "owner": {"reputation": 69932, "user_id": 249341, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZFHpl.jpg?s=128&g=1", "display_name": "Hooked", "link": "https://stackoverflow.com/users/249341/hooked"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 346, "favorite_count": 0, "accepted_answer_id": 48432722, "answer_count": 1, "score": 0, "last_activity_date": 1516832700, "creation_date": 1516832307, "question_id": 48432627, "link": "https://stackoverflow.com/questions/48432627/pandas-split-dataframe-on-signal-threshold", "title": "Pandas: split dataframe on signal threshold", "body": "<p>I have a pandas dataframe where I've identified some regions that I'd like to split and analyze independently. For example here are five distinct regions:</p>\n\n<p><a href=\"https://i.stack.imgur.com/aYKrS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/aYKrS.png\" alt=\"enter image description here\"></a></p>\n\n<p>generated from</p>\n\n<pre><code>df[\"signal\"] = df[\"average\"] &gt; 0.70\ndf[\"blocked_signal\"] = convolve1d(df.signal, [1,1,0,1,1])\n</code></pre>\n\n<p>How do I create five separate regions from the <code>blocked_signal</code> column?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 76, "user_id": 7569728, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/956483cce9f3bd8229742a18bca5e3f0?s=128&d=identicon&r=PG&f=1", "display_name": "William Laroche", "link": "https://stackoverflow.com/users/7569728/william-laroche"}, "edited": false, "score": 0, "creation_date": 1573222279, "post_id": 48432624, "comment_id": 103822039, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/34189223/test-framework-for-testing-embedded-systems-in-python\">Test framework for testing embedded systems in Python</a>"}], "answers": [{"tags": [], "owner": {"reputation": 393, "user_id": 8287997, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KZT31.jpg?s=128&g=1", "display_name": "nikhilesh_koshti", "link": "https://stackoverflow.com/users/8287997/nikhilesh-koshti"}, "is_accepted": false, "score": 0, "last_activity_date": 1516877798, "creation_date": 1516877798, "answer_id": 48441187, "question_id": 48432624, "link": "https://stackoverflow.com/questions/48432624/test-an-embedded-system-with-python/48441187#48441187", "title": "Test an embedded system with python", "body": "<p>You can use pytest for writing tests.You just need to change the both method name with suffix 'test_' as it is test discovery of pytest.</p>\n"}], "owner": {"reputation": 563, "user_id": 7864336, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/8a2d64bf3ba8d5d7bc5d961075241343?s=128&d=identicon&r=PG&f=1", "display_name": "schanti schul", "link": "https://stackoverflow.com/users/7864336/schanti-schul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 579, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1516877798, "creation_date": 1516832293, "question_id": 48432624, "link": "https://stackoverflow.com/questions/48432624/test-an-embedded-system-with-python", "title": "Test an embedded system with python", "body": "<p>I am writing some python tests for an embedded system.<br>\nI send the device a command to run some feature, while reading result(logs) via serial port. </p>\n\n<p>I would like to compare <strong>my expected results</strong> to the device output, and check for incorrect behavior of device according to the logs and display the results. </p>\n\n<p>I am looking for a <strong>pythonic</strong> way to do tests and summarize results.\n all tests must run even if one failed.</p>\n\n<p>Currently, my code looks something like this : </p>\n\n<pre><code>class TestSpecificDeviceFeature() :\n    def __init__(self):\n        self.expectedResults = AllExpectedResultsForRun()\n        sendCommandtoDevicetoRunFeature()\n        self.deviceResult = RunDeviceAndCollectOuput()\n\n   def test1():\n        print self.expectedResults.result1 ==  self.deviceResult.output1\n\n   def test2():\n        print self.expectedResults.result2 ==  self.deviceResult.output2\n   ...\n   ...\n</code></pre>\n\n<p>I want to use one of the frameworks(unittest, pytest). \nWhich one will fit better so i don't have to rewrite my code too much?</p>\n"}, {"tags": ["python", "tensorflow", "tensor", "tensorflow-datasets"], "owner": {"reputation": 81, "user_id": 2202478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f764ccced2fbf315d933d25573facc26?s=128&d=identicon&r=PG", "display_name": "Ian Hummel", "link": "https://stackoverflow.com/users/2202478/ian-hummel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 367, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1516858203, "creation_date": 1516832281, "last_edit_date": 1516858203, "question_id": 48432622, "link": "https://stackoverflow.com/questions/48432622/how-to-use-sessionrunhook-to-print-tensor-with-tf-data-dataset-api", "title": "How to use SessionRunHook to print tensor with tf.data.Dataset API?", "body": "<p>I am using the tf.data.Dataset API and assigning names to operations within the closure that is passed to <code>Dataset.map</code> as in the below</p>\n\n<pre><code>import tensorflow as tf\n\n\ndef model_fn(features, mode):\n    loss = tf.constant(1)\n    train_op = tf.no_op()\n    return tf.estimator.EstimatorSpec(mode=mode, loss=loss, train_op=train_op)\n\n\ndef input_fn():\n    dataset = tf.data.Dataset \\\n        .from_generator(lambda: (x*x for x in range(10)), tf.int32) \\\n        .map(lambda x: tf.identity(x, name='tokens_inside'))\n\n    ret = dataset.make_one_shot_iterator().get_next()\n    tf.identity(ret, 'tokens_outside')\n\n    return ret\n\n\ntf.logging.set_verbosity(tf.logging.INFO)\n\nhooks = [\n    tf.train.LoggingTensorHook(['tokens_outside'], every_n_iter=1),\n    tf.train.LoggingTensorHook(['tokens_inside'], every_n_iter=1),\n]\n\nest = tf.estimator.Estimator(model_fn=model_fn, model_dir='mout')\nest.train(input_fn=input_fn, hooks=hooks, max_steps=1)\n</code></pre>\n\n<p>When using <code>tf.train.LoggingTensorHook</code> to dump some of the values the second hook throws an exception:</p>\n\n<p>I am getting errors like this:</p>\n\n<pre><code>KeyError: \"The name 'tokens_inside:0' refers to a Tensor which does not exist. The operation, 'tokens_inside', does not exist in the graph.\"\n</code></pre>\n\n<p>I guess the <code>Dataset</code> operations create a new graph for each function?  Is there a way to customize <code>tf.train.LoggingTensorHook</code> so it knows which graph to search for the named tensor?</p>\n"}, {"tags": ["python", "python-3.6", "implicit"], "comments": [{"owner": {"reputation": 10593, "user_id": 4621513, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/uCfJK.png?s=128&g=1", "display_name": "mkrieger1", "link": "https://stackoverflow.com/users/4621513/mkrieger1"}, "edited": false, "score": 1, "creation_date": 1516832289, "post_id": 48432611, "comment_id": 83856388, "body": "Can you show some code to make it more clear what you mean?"}, {"owner": {"reputation": 10593, "user_id": 4621513, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/uCfJK.png?s=128&g=1", "display_name": "mkrieger1", "link": "https://stackoverflow.com/users/4621513/mkrieger1"}, "edited": false, "score": 0, "creation_date": 1516832517, "post_id": 48432611, "comment_id": 83856506, "body": "Sure. Maybe show something you have now and would like to know how to replace it."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1516832537, "post_id": 48432611, "comment_id": 83856514, "body": "It sounds like you want something like dynamic scoping, which Python doesn&#39;t support. You can maybe hack something together, but I suspect, you should rather redesign this approach to make use of a class that takes this configuration objects as a parameter and encapsulates that state there, rather than rely on global variables."}, {"owner": {"reputation": 59017, "user_id": 274627, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f84eb4d8ec7ec9a694d18ca9e54db3f0?s=128&d=identicon&r=PG", "display_name": "Ivan", "link": "https://stackoverflow.com/users/274627/ivan"}, "reply_to_user": {"reputation": 10593, "user_id": 4621513, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/uCfJK.png?s=128&g=1", "display_name": "mkrieger1", "link": "https://stackoverflow.com/users/4621513/mkrieger1"}, "edited": false, "score": 0, "creation_date": 1516833265, "post_id": 48432611, "comment_id": 83856876, "body": "@mkrieger1 I&#39;ve added the code example"}], "answers": [{"comments": [{"owner": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "edited": false, "score": 2, "creation_date": 1516838089, "post_id": 48432699, "comment_id": 83858484, "body": "You could even provide a function in the module that, given the context option, returns partials of all the functions in one fell swoop. The caller then sets up their own names for the functions, like <code>function1, function2, ... = module1.partials(cx)</code>"}, {"owner": {"reputation": 59017, "user_id": 274627, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f84eb4d8ec7ec9a694d18ca9e54db3f0?s=128&d=identicon&r=PG", "display_name": "Ivan", "link": "https://stackoverflow.com/users/274627/ivan"}, "edited": false, "score": 0, "creation_date": 1516841128, "post_id": 48432699, "comment_id": 83859409, "body": "Great answer (though too verbose for my case as I have a lot of the functions). I wish I could approve both."}, {"owner": {"reputation": 59017, "user_id": 274627, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f84eb4d8ec7ec9a694d18ca9e54db3f0?s=128&d=identicon&r=PG", "display_name": "Ivan", "link": "https://stackoverflow.com/users/274627/ivan"}, "reply_to_user": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "edited": false, "score": 0, "creation_date": 1516841428, "post_id": 48432699, "comment_id": 83859491, "body": "@kindall sounds curious. How can this possibly be done (I am just beginning Python, sorry if a stupid question)?"}, {"owner": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "edited": false, "score": 0, "creation_date": 1518201769, "post_id": 48432699, "comment_id": 84423431, "body": "Something like <code>def givecontext(cx): return partial(function1, cx=cx), partial(function2, cx=cx), partial(function3, cx=cx)</code>. Then the caller would just do <code>func1, func2, func3 = givecontext(Context(&quot;foo&quot;))</code>"}], "tags": [], "owner": {"reputation": 5170, "user_id": 9200529, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LgIT2.jpg?s=128&g=1", "display_name": "Nathan V\u0113rzemnieks", "link": "https://stackoverflow.com/users/9200529/nathan-v%c4%93rzemnieks"}, "is_accepted": false, "score": 2, "last_activity_date": 1516837529, "last_edit_date": 1516837529, "creation_date": 1516832614, "answer_id": 48432699, "question_id": 48432611, "link": "https://stackoverflow.com/questions/48432611/how-to-pass-a-variable-to-an-imported-function-implicitly-in-python/48432699#48432699", "title": "How to pass a variable to an imported function implicitly in Python?", "body": "<p>(Edited to match the sample code from the question) This may be a nice place for a partial, if you modify your function to make <code>cx</code> a keyword argument (or, alternatively, the last positional argument) like so:</p>\n\n<pre><code>def function1(s1: str, cx: Context = None):\n    print(f'{cx.s} {s1}!')\n</code></pre>\n\n<p>Then you can do:</p>\n\n<pre><code>from module1 import Context\nfrom module1 import function1\nfrom functools import partial\ncx = Context('hello')\nfunction1 = partial(function1, cx = cx)\n</code></pre>\n\n<p>And when you call <code>function1</code>, you'll be calling the partial, which already has the <code>cx</code> argument set.</p>\n"}, {"comments": [{"owner": {"reputation": 59017, "user_id": 274627, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f84eb4d8ec7ec9a694d18ca9e54db3f0?s=128&d=identicon&r=PG", "display_name": "Ivan", "link": "https://stackoverflow.com/users/274627/ivan"}, "edited": false, "score": 0, "creation_date": 1516836503, "post_id": 48432800, "comment_id": 83858067, "body": "Using a class is an obvious solution but there will be many functions and they are going to be long and mutually-independent, sharing nothing but one variable (in fact I would be glad to put every function in a separate file, perhaps I will make a package), the class is not going to represent a logically real entity, and... a major reason why I choose Python is that I can define a function without a class :-)"}, {"owner": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "reply_to_user": {"reputation": 59017, "user_id": 274627, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f84eb4d8ec7ec9a694d18ca9e54db3f0?s=128&d=identicon&r=PG", "display_name": "Ivan", "link": "https://stackoverflow.com/users/274627/ivan"}, "edited": false, "score": 1, "creation_date": 1516837958, "post_id": 48432800, "comment_id": 83858448, "body": "They share state (that one variable) and if you don&#39;t want to pass it to each function, it&#39;s perfectly reasonable to put them in a class."}, {"owner": {"reputation": 59017, "user_id": 274627, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f84eb4d8ec7ec9a694d18ca9e54db3f0?s=128&d=identicon&r=PG", "display_name": "Ivan", "link": "https://stackoverflow.com/users/274627/ivan"}, "edited": false, "score": 0, "creation_date": 1516840933, "post_id": 48432800, "comment_id": 83859367, "body": "The answer I was looking for is <code>module1.context = whatever</code>. What I&#39;ve tried before was <code>from module1 import *</code> and then <code>context = whatever</code> and it didn&#39;t work. Now I <code>import module1</code> then set <code>module1.context = whatever</code> and then <code>from module1 import *</code> and everything seems working fine. Tanks!"}], "tags": [], "owner": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "is_accepted": true, "score": 1, "last_activity_date": 1516833182, "creation_date": 1516833182, "answer_id": 48432800, "question_id": 48432611, "link": "https://stackoverflow.com/questions/48432611/how-to-pass-a-variable-to-an-imported-function-implicitly-in-python/48432800#48432800", "title": "How to pass a variable to an imported function implicitly in Python?", "body": "<p>You <em>could</em> do this with a module-level global variable.</p>\n\n<pre><code>context = None\n\ndef function1(arg1, arg2, arg3):\n    # do something involving context and args\n</code></pre>\n\n<p>Then you just do <code>module1.context = whatever</code> from where you've imported <code>module1</code>.</p>\n\n<p>But a better approach is a class that holds a reference to the context, passed in when the object is instantiated:</p>\n\n<pre><code>class MyFunctions(object):\n    def __init__(self, context):\n        self.context = context\n    def function1(self, arg1, arg2. arg3):\n        # do something with self.context and args\n</code></pre>\n\n<p>Then you use it like this:</p>\n\n<pre><code> myfunctions = MyFunctions(configuration_object)\n myfunctions.function1(1, 2, 3)\n</code></pre>\n\n<p>This way, you can have as many contexts as you need.</p>\n"}, {"comments": [{"owner": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "edited": false, "score": 0, "creation_date": 1516840508, "post_id": 48433640, "comment_id": 83859256, "body": "Ahhhhh, that is a nice (evil) hack."}, {"owner": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "edited": false, "score": 0, "creation_date": 1516845366, "post_id": 48433640, "comment_id": 83860473, "body": "You could also just have a function <code>getcontext()</code> that you call from each function to get the caller&#39;s <code>cx</code> variable."}], "tags": [], "owner": {"reputation": 5170, "user_id": 9200529, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LgIT2.jpg?s=128&g=1", "display_name": "Nathan V\u0113rzemnieks", "link": "https://stackoverflow.com/users/9200529/nathan-v%c4%93rzemnieks"}, "is_accepted": false, "score": 2, "last_activity_date": 1516838894, "last_edit_date": 1516838894, "creation_date": 1516838570, "answer_id": 48433640, "question_id": 48432611, "link": "https://stackoverflow.com/questions/48432611/how-to-pass-a-variable-to-an-imported-function-implicitly-in-python/48433640#48433640", "title": "How to pass a variable to an imported function implicitly in Python?", "body": "<p>A completely different approach, and probably a <em>terrible, terrible</em> idea, but fun (and avoids most of the legwork in <code>module2</code>): you could make a decorator that finds <code>cx</code> in the caller's context and supplies it to the function automatically. Like so:</p>\n\n<pre><code>import sys\nfrom functools import wraps\n\ndef withCallerContext(fn):\n    @wraps(fn)\n    def wrapped(*a, **k):\n        frame = sys._getframe(0)\n        while 'cx' not in frame.f_globals:\n            frame = frame.f_back\n            if frame is None:\n                raise ValueError(\"must set cx in calling context\")\n\n        cx = frame.f_globals['cx']\n        return fn(*a, cx = cx, **k)\n    return wrapped\n\n\n@withCallerContext\ndef function1(s1: str, cx: Context = None):\n    print(f'{cx.s} {s1}!')\n</code></pre>\n"}], "owner": {"reputation": 59017, "user_id": 274627, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f84eb4d8ec7ec9a694d18ca9e54db3f0?s=128&d=identicon&r=PG", "display_name": "Ivan", "link": "https://stackoverflow.com/users/274627/ivan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 48432800, "answer_count": 3, "score": 0, "last_activity_date": 1516838894, "creation_date": 1516832226, "last_edit_date": 1516833234, "question_id": 48432611, "link": "https://stackoverflow.com/questions/48432611/how-to-pass-a-variable-to-an-imported-function-implicitly-in-python", "title": "How to pass a variable to an imported function implicitly in Python?", "body": "<p><code>module1</code> defines <code>function1</code> and <code>function2</code>. <code>module2</code> makes use of the 2 functions defined in <code>module1</code> and needs to pass what can be described as a context configuration parameter (an instance of a mutable custom class actually, not something humble like a string) to them, the same every single time any of these functions get called within <code>module2</code>. I would appreciate if I could avoid using the ordinary function argument way to pass it repeatedly and could just specify it once so all the functions called within the module (<code>module2</code>) would be able to access it. Is this possible in Python? I use the latest Python 3.6. <code>module1</code> is not a 3-rd party library nor an established codebase module, I can modify the definitions whatever way necessary at this stage.</p>\n\n<pre><code># --- module1.py ---\n\nclass Context:\n    def __init__(self, s: str):\n        self.s = s\n\n\ndef function1(cx: Context, s1: str):\n    print(f'{cx.s} {s1}!')\n\n\n# --- module2.py ---\n\nfrom module1 import Context\nfrom module1 import function1\n\ncx = Context('Hello')\n\n# this works and prints 'Hello World!'\nfunction1(cx, 'World')\n\n\n# this doesn't work but I want it to work and do exactly the same\n# (function1 definition can be changed whatever way necessary)\nfunction1('World')\n</code></pre>\n"}, {"tags": ["python", "c++", "python-embedding"], "comments": [{"owner": {"reputation": 710, "user_id": 3788270, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83e3fed9f9ac097afe784d86ab44692d?s=128&d=identicon&r=PG&f=1", "display_name": "Ove", "link": "https://stackoverflow.com/users/3788270/ove"}, "edited": false, "score": 0, "creation_date": 1517040359, "post_id": 48432577, "comment_id": 83941302, "body": "Just to help your debugging, recall that a NULL return typically means that a Python exception was raised. You can call PyErr_Print() or similar to show which exception occurred."}], "answers": [{"tags": [], "owner": {"reputation": 2474, "user_id": 6664305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b8bd5952ac4906f4a632e9f6d0129890?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitry Torba", "link": "https://stackoverflow.com/users/6664305/dmitry-torba"}, "is_accepted": true, "score": 1, "last_activity_date": 1516836412, "creation_date": 1516836412, "answer_id": 48433353, "question_id": 48432577, "link": "https://stackoverflow.com/questions/48432577/extracting-value-from-python-after-its-embedded-in-c/48433353#48433353", "title": "Extracting value from Python after it&#39;s embedded in C++", "body": "<p>I have actually figured out how to do that myself. There is no need to use <code>eval()</code> in order to extract the result of the execution of the function. Instead, you can do the following:</p>\n\n<pre><code>#include &lt;Python.h&gt;\n#include &lt;iostream&gt;\n\nint main() {\n  // Initialize Python\n  Py_Initialize();\n\n  // Create a function\n  PyRun_SimpleString(\"f = lambda x: x * 2 - 3\");\n\n  // Import __main__ where the f is stored\n  PyObject *main = PyImport_ImportModule(\"__main__\");\n  PyObject *function = PyObject_GetAttrString(main, \"__function\");\n\n  // Create an argument tuple for the function\n  PyObject * args = PyTuple_New(1);\n  PyObject * first_argument = PyInt_FromLong(10);\n  PyTuple_SetItem(args, 0, first_argument);\n\n  // Call the function and get its result\n  PyObject * result = PyObject_CallObject(function, args);\n\n  // Output the result\n  cout &lt;&lt; PyInt_AsLong(result) &lt;&lt; endl;\n\n  // Destroy Python frame\n  Py_Finalize();\n}\n</code></pre>\n\n<p>However, I am still curious why <code>eval</code> did not work as shown in my original question</p>\n"}], "owner": {"reputation": 2474, "user_id": 6664305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b8bd5952ac4906f4a632e9f6d0129890?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitry Torba", "link": "https://stackoverflow.com/users/6664305/dmitry-torba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 466, "favorite_count": 1, "accepted_answer_id": 48433353, "answer_count": 1, "score": 3, "last_activity_date": 1516836412, "creation_date": 1516832025, "question_id": 48432577, "link": "https://stackoverflow.com/questions/48432577/extracting-value-from-python-after-its-embedded-in-c", "title": "Extracting value from Python after it&#39;s embedded in C++", "body": "<p>I have the following shortened program that embeds Python (it's stripped of all error handling, etc for shortness). It creates Python function as a string (which is required for my problem at hand) and then tries to call it and get whatever it returned using <code>__builtin__.eval</code>.</p>\n\n<pre><code>#include &lt;Python.h&gt;\n#include &lt;iostream&gt;\n\nint main() {\n  // Initialize Python\n  Py_Initialize();\n\n  // Import builtin to get an access to eval\n  PyObject *builtins = PyImport_ImportModule(\"__builtin__\");\n  PyObject *eval = PyObject_GetAttrString(builtins, \"eval\");\n\n  // Create an argument tuple for the eval\n  PyObject * args = PyTuple_New(1);\n  PyObject * name = PyString_FromString(\"f(10)\");\n  PyTuple_SetItem(args, 0, name);\n\n  // Create a function\n  PyRun_SimpleString(\"f = lambda x: x * 2 - 3\");\n\n  // Try to get the result of the function execution by calling eval on it\n  PyObject * result = PyObject_CallObject(eval, args);\n\n  // Fail if the result is null pointer\n  assert(result != NULL);\n\n  // Destroy Python frame\n  Py_Finalize();\n}\n</code></pre>\n\n<p>In other words, this program is analogous to the following Python program:</p>\n\n<pre><code>f = lambda x: x * 2 - 3\nimport __builtin__\nprint __builtin__.eval(\"f(10)\")\n</code></pre>\n\n<p>The problem is: it works flawlessly in Python (returning 17). But in C++, <code>PyObject_CallObject</code> returns NULL pointer and the program fails at assert, even though eval should clearly have returned the result of f(10). My question is why?</p>\n\n<p>Thank you for your answer!</p>\n\n<p>P.S. If you want to try to compile that yourself, use the following command on Unix systems (I am using it on Ubuntu):</p>\n\n<pre><code>g++ -I/usr/include/python2.7 progname.cpp -lpython2.7 -g\n</code></pre>\n"}, {"tags": ["python", "list"], "comments": [{"owner": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "edited": false, "score": 1, "creation_date": 1516832114, "post_id": 48432564, "comment_id": 83856300, "body": "Is <code>wavg</code> a numpy array?"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1516832265, "post_id": 48432564, "comment_id": 83856370, "body": "You switch variable names, leaving an undefined <code>v</code>.  Your question doesn&#39;t make sense, since Python lists do not have the inherent direction you show.  In fact, changing <code>v1</code> to <code>val</code> gives you code that computes the desired differences."}, {"owner": {"reputation": 1, "user_id": 9264557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03b939b6c8ddc5ce1e5db186a8b779a6?s=128&d=identicon&r=PG&f=1", "display_name": "maries", "link": "https://stackoverflow.com/users/9264557/maries"}, "edited": false, "score": 0, "creation_date": 1516832496, "post_id": 48432564, "comment_id": 83856500, "body": "By v I mean val. The answer currently is wrong. Instead of subtracting like this 1-1.77,2 -2.52,3-2.52,8-6.095,5-6.095 currently just the first value 1 is subtracted from each of the values in wavg."}, {"owner": {"reputation": 8191, "user_id": 8881141, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/C3ydX.jpg?s=128&g=1", "display_name": "Mr. T", "link": "https://stackoverflow.com/users/8881141/mr-t"}, "edited": false, "score": 0, "creation_date": 1516832703, "post_id": 48432564, "comment_id": 83856600, "body": "Well, if they are not numpy arrays, I can&#39;t reproduce your problem in Python 3.5."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1516832895, "post_id": 48432564, "comment_id": 83856700, "body": "Welcome to StackOverflow.  Please read and follow the posting guidelines in the help documentation.  <a href=\"http://stackoverflow.com/help/mcve\">Minimal, complete, verifiable example</a> applies here.  We cannot effectively help you until you post your MCVE code and accurately describe the problem. We should be able to paste your posted code into a text file and reproduce the problem you described. Your given code doesn&#39;t run (undefined variable); when repaired, it doesn&#39;t exhibit the problem you describe."}, {"owner": {"reputation": 8191, "user_id": 8881141, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/C3ydX.jpg?s=128&g=1", "display_name": "Mr. T", "link": "https://stackoverflow.com/users/8881141/mr-t"}, "edited": false, "score": 0, "creation_date": 1516833051, "post_id": 48432564, "comment_id": 83856777, "body": "Btw, why would <code>1</code> be subtracted from each value in wavg? You subtract <code>val-wavg</code>."}, {"owner": {"reputation": 15007, "user_id": 389289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33eab2fa999a20910a29e4a2299bc174?s=128&d=identicon&r=PG&f=1", "display_name": "zvone", "link": "https://stackoverflow.com/users/389289/zvone"}, "edited": false, "score": 0, "creation_date": 1516835297, "post_id": 48432564, "comment_id": 83857687, "body": "<code>wavg</code> already is <code>[1.77,2.52,2.52,6.095,6.095]</code>. Try <code>wavg == [1.77,2.52,2.52,6.095,6.095]</code>"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 9264557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03b939b6c8ddc5ce1e5db186a8b779a6?s=128&d=identicon&r=PG&f=1", "display_name": "maries", "link": "https://stackoverflow.com/users/9264557/maries"}, "edited": false, "score": 0, "creation_date": 1516832580, "post_id": 48432601, "comment_id": 83856534, "body": "These are not numpy arrays. Just lists."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "reply_to_user": {"reputation": 1, "user_id": 9264557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03b939b6c8ddc5ce1e5db186a8b779a6?s=128&d=identicon&r=PG&f=1", "display_name": "maries", "link": "https://stackoverflow.com/users/9264557/maries"}, "edited": false, "score": 1, "creation_date": 1516832844, "post_id": 48432601, "comment_id": 83856672, "body": "See my comment on the question: your formatting worry makes no sense, because there is no &quot;direction&quot; on a list.  There&#39;s no such thing as changing a 1-D list between horizontal and vertical format."}], "tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 1, "last_activity_date": 1516832176, "creation_date": 1516832176, "answer_id": 48432601, "question_id": 48432564, "link": "https://stackoverflow.com/questions/48432564/convert-columns-of-a-list-to-rows-in-python/48432601#48432601", "title": "Convert columns of a list to rows in python", "body": "<p>If these are numpy arrays (rather than lists, as you show), then simply use <code>wavg.T</code>, the transpose.</p>\n"}, {"comments": [{"owner": {"reputation": 8191, "user_id": 8881141, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/C3ydX.jpg?s=128&g=1", "display_name": "Mr. T", "link": "https://stackoverflow.com/users/8881141/mr-t"}, "edited": false, "score": 0, "creation_date": 1516832860, "post_id": 48432649, "comment_id": 83856686, "body": "How do you know, that the OP wants to replace <code>val</code>?"}, {"owner": {"reputation": 11, "user_id": 4448952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f7eec008757bf8635502ed7a9ddb3bf?s=128&d=identicon&r=PG&f=1", "display_name": "Sharon Tourjeman", "link": "https://stackoverflow.com/users/4448952/sharon-tourjeman"}, "reply_to_user": {"reputation": 8191, "user_id": 8881141, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/C3ydX.jpg?s=128&g=1", "display_name": "Mr. T", "link": "https://stackoverflow.com/users/8881141/mr-t"}, "edited": false, "score": 0, "creation_date": 1516881117, "post_id": 48432649, "comment_id": 83875565, "body": "Does it matter? he can use a new list if he doesn&#39;t want to replace"}], "tags": [], "owner": {"reputation": 11, "user_id": 4448952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f7eec008757bf8635502ed7a9ddb3bf?s=128&d=identicon&r=PG&f=1", "display_name": "Sharon Tourjeman", "link": "https://stackoverflow.com/users/4448952/sharon-tourjeman"}, "is_accepted": false, "score": 0, "last_activity_date": 1516832393, "creation_date": 1516832393, "answer_id": 48432649, "question_id": 48432564, "link": "https://stackoverflow.com/questions/48432564/convert-columns-of-a-list-to-rows-in-python/48432649#48432649", "title": "Convert columns of a list to rows in python", "body": "<pre><code>for i in range(len(val)):\n    val[i] = val[i] - wavg[i]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 9264557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03b939b6c8ddc5ce1e5db186a8b779a6?s=128&d=identicon&r=PG&f=1", "display_name": "maries", "link": "https://stackoverflow.com/users/9264557/maries"}, "edited": false, "score": 0, "creation_date": 1516834778, "post_id": 48432727, "comment_id": 83857499, "body": "I tried this. (v is a list in my function with [1, 2, 3, 8, 5])                        wavg_trans = np.array([wavg])   val= np.array([v])   diff1 = val - wavg_trans.T. But I am getting the error                         wavg_trans = np.array([wavg]) ValueError: cannot copy sequence with size 5 to array axis with dimension 1"}], "tags": [], "owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "is_accepted": true, "score": 0, "last_activity_date": 1516832723, "creation_date": 1516832723, "answer_id": 48432727, "question_id": 48432564, "link": "https://stackoverflow.com/questions/48432564/convert-columns-of-a-list-to-rows-in-python/48432727#48432727", "title": "Convert columns of a list to rows in python", "body": "<p>Possibly, one of the below solutions are what you are looking for:</p>\n\n<pre><code>import numpy as np\n\nval = np.array([1, 2, 3, 8, 5])\nwavg = np.array([[1.77],\n                [2.52],\n                [2.52],\n                [6.095],\n                [6.095]])\n\ndiff1 = val - wavg.T\ndiff2 = val - wavg.ravel()\ndiff3 = np.array([i-j for i, j in zip(val, wavg)]).T\n\nassert (diff1 == diff2).all()\nassert (diff1 == diff3).all()\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9264557, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03b939b6c8ddc5ce1e5db186a8b779a6?s=128&d=identicon&r=PG&f=1", "display_name": "maries", "link": "https://stackoverflow.com/users/9264557/maries"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1120, "favorite_count": 0, "accepted_answer_id": 48432727, "answer_count": 3, "score": -4, "last_activity_date": 1516960391, "creation_date": 1516831949, "last_edit_date": 1516960391, "question_id": 48432564, "link": "https://stackoverflow.com/questions/48432564/convert-columns-of-a-list-to-rows-in-python", "title": "Convert columns of a list to rows in python", "body": "<p>I have a list </p>\n\n<pre><code>val = [1, 2, 3, 8, 5]\nwavg = [1.77,\n        2.52,\n        2.52,\n        6.095,\n        6.095 ]\n</code></pre>\n\n<p>I have to subtract  <code>1 - 1.77, 2 - 2.52, 3 - 2.52, 8 - 6.095, 5 - 6.095</code></p>\n\n<p>When I use <code>demeaned=[i - j for i,j in zip(val,wavg)]</code> I am getting wrong results because the dimensions are not equal. Can you please suggest how to convert wavg list to <code>[1.77, 2.52, 2.52, 6.095, 6.095]</code>.</p>\n"}, {"tags": ["python", "anaconda", "xgboost", "pipenv"], "comments": [{"owner": {"reputation": 732, "user_id": 4854766, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/da0d92a989793b4a9f7fa9fd56b2cbb7?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler Cowan", "link": "https://stackoverflow.com/users/4854766/tyler-cowan"}, "edited": false, "score": 1, "creation_date": 1516834030, "post_id": 48432558, "comment_id": 83857209, "body": "Whats your OS Windows?"}, {"owner": {"reputation": 6972, "user_id": 3731467, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/ba1b20a3d2de4a97b893058a4673510a?s=128&d=identicon&r=PG&f=1", "display_name": "emehex", "link": "https://stackoverflow.com/users/3731467/emehex"}, "reply_to_user": {"reputation": 732, "user_id": 4854766, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/da0d92a989793b4a9f7fa9fd56b2cbb7?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler Cowan", "link": "https://stackoverflow.com/users/4854766/tyler-cowan"}, "edited": false, "score": 0, "creation_date": 1516894548, "post_id": 48432558, "comment_id": 83885081, "body": "I&#39;m on macOS..."}, {"owner": {"reputation": 732, "user_id": 4854766, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/da0d92a989793b4a9f7fa9fd56b2cbb7?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler Cowan", "link": "https://stackoverflow.com/users/4854766/tyler-cowan"}, "edited": false, "score": 0, "creation_date": 1516900221, "post_id": 48432558, "comment_id": 83889221, "body": "have you tried installing from the source? <a href=\"https://pypi.python.org/pypi/xgboost/\" rel=\"nofollow noreferrer\">pypi.python.org/pypi/xgboost</a>"}, {"owner": {"reputation": 847, "user_id": 2641416, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/NG6kf.jpg?s=128&g=1", "display_name": "general03", "link": "https://stackoverflow.com/users/2641416/general03"}, "edited": false, "score": 0, "creation_date": 1547636025, "post_id": 48432558, "comment_id": 95256546, "body": "Do you try <code>pipenv install -e git+https:&#47;&#47;github.com&#47;dmlc&#47;xgboost.git#egg=release_0.81</code> ?"}, {"owner": {"reputation": 111, "user_id": 2426130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3f8c285aa1bec25e8ad163a329aefa3?s=128&d=identicon&r=PG", "display_name": "CrossValidatedTrading", "link": "https://stackoverflow.com/users/2426130/crossvalidatedtrading"}, "edited": false, "score": 0, "creation_date": 1556040864, "post_id": 48432558, "comment_id": 98299845, "body": "I ran into this issue after upgrading from python 3.6 to 3.7 on Windows. I (stupidly) downloaded 32bit python. So when I tried to install xgboost via pipenv I was getting the above error (or something similar). I was finally able to install xgboost via pipenv after downloading xgboost 0.82 cp37 cp37m win32.whl. That\u2019s when the lightbulb went off. After installing 64bit Python, <code>pipenv install xgboost</code> worked just fine. Long story short, check your python version\u2026"}], "answers": [{"comments": [{"owner": {"reputation": 757, "user_id": 5924820, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f74e02cf9e59e1ae1a8f793fa0c61d4?s=128&d=identicon&r=PG", "display_name": "Ricardo M S", "link": "https://stackoverflow.com/users/5924820/ricardo-m-s"}, "edited": false, "score": 0, "creation_date": 1590156347, "post_id": 61508627, "comment_id": 109581648, "body": "this worked for me also, in a <code>nvidia&#47;cuda:10.2-cudnn7-devel-ubuntu18.04</code> docker image"}], "tags": [], "owner": {"reputation": 11, "user_id": 13021228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d27c758719664f6890d717e1503c8f05?s=128&d=identicon&r=PG&f=1", "display_name": "user13021228", "link": "https://stackoverflow.com/users/13021228/user13021228"}, "is_accepted": false, "score": 1, "last_activity_date": 1588183510, "creation_date": 1588183510, "answer_id": 61508627, "question_id": 48432558, "link": "https://stackoverflow.com/questions/48432558/xgboost-pipenv-3/61508627#61508627", "title": "xgboost + pipenv = &lt;/3", "body": "<p>on macos (10.13.6) i fixed this by installing cmake with brew. I had the same(-ish) error message, but the full error output included references to not finding the cmake command.</p>\n\n<pre><code>brew install cmake\n</code></pre>\n\n<p>my error message:</p>\n\n<blockquote>\n  <p>'ERROR: Command errored out with exit status 1: python setup.py egg_info Check the logs for full command output.'</p>\n</blockquote>\n"}], "owner": {"reputation": 6972, "user_id": 3731467, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/ba1b20a3d2de4a97b893058a4673510a?s=128&d=identicon&r=PG&f=1", "display_name": "emehex", "link": "https://stackoverflow.com/users/3731467/emehex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 667, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1588183510, "creation_date": 1516831922, "question_id": 48432558, "link": "https://stackoverflow.com/questions/48432558/xgboost-pipenv-3", "title": "xgboost + pipenv = &lt;/3", "body": "<p>I love xgboost. And I love pipenv. But they don't love each other :(</p>\n\n<p><code>pipenv install xgboost</code></p>\n\n<blockquote>\n  <p>Error:  An error occurred while installing xgboost!\n  Command \"python setup.py egg_info\" failed with error code 1 in /tmp/pip-build-9cab91je/xgboost/</p>\n</blockquote>\n\n<p>I've installed a <a href=\"https://anaconda.org/conda-forge/xgboost\" rel=\"nofollow noreferrer\">compiled version of xgboost with anaconda</a> but I just can't get it to play nicely with pipenv...</p>\n\n<p>Any ideas?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "iteration", "combinatorics"], "comments": [{"owner": {"reputation": 92827, "user_id": 369, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/DHcF2.png?s=128&g=1", "display_name": "Blorgbeard", "link": "https://stackoverflow.com/users/369/blorgbeard"}, "edited": false, "score": 2, "creation_date": 1516832079, "post_id": 48432557, "comment_id": 83856284, "body": "If there are 9,509,900,499 combinations, there is no way around the fact that you need to add 9,509,900,499 items to the list."}, {"owner": {"reputation": 2984, "user_id": 4380945, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh6.googleusercontent.com/-W290VH7AJAM/AAAAAAAAAAI/AAAAAAAAALw/J3K7uL_HNWo/photo.jpg?sz=128", "display_name": "Alejandro Simkievich", "link": "https://stackoverflow.com/users/4380945/alejandro-simkievich"}, "reply_to_user": {"reputation": 92827, "user_id": 369, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/DHcF2.png?s=128&g=1", "display_name": "Blorgbeard", "link": "https://stackoverflow.com/users/369/blorgbeard"}, "edited": false, "score": 0, "creation_date": 1516832176, "post_id": 48432557, "comment_id": 83856329, "body": "you are right. but is there a faster way to generate all combinations than 5 nested loops? maybe I should correct the question"}, {"owner": {"reputation": 92827, "user_id": 369, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/DHcF2.png?s=128&g=1", "display_name": "Blorgbeard", "link": "https://stackoverflow.com/users/369/blorgbeard"}, "edited": false, "score": 2, "creation_date": 1516832319, "post_id": 48432557, "comment_id": 83856404, "body": "Nesting a loop doesn&#39;t make it slower.  Nested loops are considered &quot;slow&quot; because the total number of iterations gets large quickly. But you have a specific number of iterations that need to execute. You could write out 9,509,900,499 separate <code>append</code> statements and it would not be measurably faster (ignoring problems caused by loading such a large program!)."}, {"owner": {"reputation": 23605, "user_id": 1016216, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/xF5Ew.png?s=128&g=1", "display_name": "L3viathan", "link": "https://stackoverflow.com/users/1016216/l3viathan"}, "edited": false, "score": 1, "creation_date": 1516832424, "post_id": 48432557, "comment_id": 83856467, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/13885234/python-nested-looping-idiom\">Python nested looping Idiom</a>"}, {"owner": {"reputation": 92827, "user_id": 369, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/DHcF2.png?s=128&g=1", "display_name": "Blorgbeard", "link": "https://stackoverflow.com/users/369/blorgbeard"}, "edited": false, "score": 1, "creation_date": 1516832445, "post_id": 48432557, "comment_id": 83856484, "body": "Although note that there are simpler ways to write the program: see <a href=\"https://docs.python.org/3/library/itertools.html\" rel=\"nofollow noreferrer\">docs.python.org/3/library/itertools.html</a>"}, {"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 0, "creation_date": 1516832471, "post_id": 48432557, "comment_id": 83856492, "body": "Why do you think you need them all in a list?"}, {"owner": {"reputation": 2984, "user_id": 4380945, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh6.googleusercontent.com/-W290VH7AJAM/AAAAAAAAAAI/AAAAAAAAALw/J3K7uL_HNWo/photo.jpg?sz=128", "display_name": "Alejandro Simkievich", "link": "https://stackoverflow.com/users/4380945/alejandro-simkievich"}, "edited": false, "score": 0, "creation_date": 1516832627, "post_id": 48432557, "comment_id": 83856558, "body": "not necessarily in a list - but I need them all to perform a follow on function"}, {"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 0, "creation_date": 1516832688, "post_id": 48432557, "comment_id": 83856591, "body": "Ok that makes more sense, but I don&#39;t believe that either."}, {"owner": {"reputation": 2984, "user_id": 4380945, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh6.googleusercontent.com/-W290VH7AJAM/AAAAAAAAAAI/AAAAAAAAALw/J3K7uL_HNWo/photo.jpg?sz=128", "display_name": "Alejandro Simkievich", "link": "https://stackoverflow.com/users/4380945/alejandro-simkievich"}, "edited": false, "score": 0, "creation_date": 1516832689, "post_id": 48432557, "comment_id": 83856592, "body": "in terms of possible duplicate, I believe the other question is asking if there is a more elegant way to write something like this. I am asking if there is a more computationally efficient way of coming up with all combinations"}, {"owner": {"reputation": 4373, "user_id": 1810460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5daef67cac318d3e35f84bc3f315bcfc?s=128&d=identicon&r=PG", "display_name": "Hamms", "link": "https://stackoverflow.com/users/1810460/hamms"}, "edited": false, "score": 0, "creation_date": 1516832733, "post_id": 48432557, "comment_id": 83856617, "body": "there is not, no"}, {"owner": {"reputation": 2984, "user_id": 4380945, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh6.googleusercontent.com/-W290VH7AJAM/AAAAAAAAAAI/AAAAAAAAALw/J3K7uL_HNWo/photo.jpg?sz=128", "display_name": "Alejandro Simkievich", "link": "https://stackoverflow.com/users/4380945/alejandro-simkievich"}, "edited": false, "score": 0, "creation_date": 1516833196, "post_id": 48432557, "comment_id": 83856845, "body": "yep, i do not need to hold the list in memory, actually I can do something with each combination and move on"}, {"owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "edited": false, "score": 0, "creation_date": 1516833647, "post_id": 48432557, "comment_id": 83857034, "body": "Possible duplicate: <a href=\"https://stackoverflow.com/questions/3099987/generating-permutations-with-repetitions-in-python\" title=\"generating permutations with repetitions in python\">stackoverflow.com/questions/3099987/&hellip;</a>"}, {"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "reply_to_user": {"reputation": 56440, "user_id": 2285236, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5ac8c2e0f71dbd8cf4543039bebf2ab3?s=128&d=identicon&r=PG&f=1", "display_name": "ayhan", "link": "https://stackoverflow.com/users/2285236/ayhan"}, "edited": false, "score": 0, "creation_date": 1516833684, "post_id": 48432557, "comment_id": 83857054, "body": "@ayhan Depends on the type of the list..."}, {"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 1, "creation_date": 1516833796, "post_id": 48432557, "comment_id": 83857105, "body": "99% of the time, questions like this are an XY problem. I suggest you try to convince us that you&#39;re in the remaining 1%."}, {"owner": {"reputation": 2984, "user_id": 4380945, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh6.googleusercontent.com/-W290VH7AJAM/AAAAAAAAAAI/AAAAAAAAALw/J3K7uL_HNWo/photo.jpg?sz=128", "display_name": "Alejandro Simkievich", "link": "https://stackoverflow.com/users/4380945/alejandro-simkievich"}, "edited": false, "score": 0, "creation_date": 1516833811, "post_id": 48432557, "comment_id": 83857116, "body": "it is not a duplicate, I am asking about efficiency gains - and I actually found one. not sure why I was voted down."}, {"owner": {"reputation": 2984, "user_id": 4380945, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh6.googleusercontent.com/-W290VH7AJAM/AAAAAAAAAAI/AAAAAAAAALw/J3K7uL_HNWo/photo.jpg?sz=128", "display_name": "Alejandro Simkievich", "link": "https://stackoverflow.com/users/4380945/alejandro-simkievich"}, "edited": false, "score": 0, "creation_date": 1516833910, "post_id": 48432557, "comment_id": 83857157, "body": "well, I just wrote a response I had to come up with it myself :). but that is the type of efficiency gain I am looking for."}, {"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 0, "creation_date": 1516834248, "post_id": 48432557, "comment_id": 83857292, "body": "If you&#39;re not even interested in better solutions then that makes me suspect even more that they exist."}, {"owner": {"reputation": 15007, "user_id": 389289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33eab2fa999a20910a29e4a2299bc174?s=128&d=identicon&r=PG&f=1", "display_name": "zvone", "link": "https://stackoverflow.com/users/389289/zvone"}, "edited": false, "score": 1, "creation_date": 1516836873, "post_id": 48432557, "comment_id": 83858167, "body": "Just for simplicity, let&#39;s assume that you are not going to change the list after filling it. There is a limited number of actions you can do with that list: check whether some tuple of 5 integers is in the list, iterate through all tuples in the list... You can do all that without actually ever creating a list of 99^5 integers!"}, {"owner": {"reputation": 92827, "user_id": 369, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/DHcF2.png?s=128&g=1", "display_name": "Blorgbeard", "link": "https://stackoverflow.com/users/369/blorgbeard"}, "edited": false, "score": 0, "creation_date": 1516902298, "post_id": 48432557, "comment_id": 83890467, "body": "Don&#39;t edit your question after other people have answered to tailor it to your own answer."}, {"owner": {"reputation": 2984, "user_id": 4380945, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh6.googleusercontent.com/-W290VH7AJAM/AAAAAAAAAAI/AAAAAAAAALw/J3K7uL_HNWo/photo.jpg?sz=128", "display_name": "Alejandro Simkievich", "link": "https://stackoverflow.com/users/4380945/alejandro-simkievich"}, "edited": false, "score": 0, "creation_date": 1516993026, "post_id": 48432557, "comment_id": 83929143, "body": "Blorgbeard live and let live pal. chill out. I did not edit anything. go drink a beer."}], "answers": [{"comments": [{"owner": {"reputation": 345, "user_id": 2249155, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/4jbea.png?s=128&g=1", "display_name": "neophlegm", "link": "https://stackoverflow.com/users/2249155/neophlegm"}, "edited": false, "score": 0, "creation_date": 1516834349, "post_id": 48432907, "comment_id": 83857341, "body": "Sure; the same way you could use a machine with 11 cores to calculate groups of 9 starting digits in parallel for eg. I don&#39;t think that&#39;s particularly insightful though? In any case it still sounds like a duplicate of <a href=\"https://stackoverflow.com/questions/10262138/how-do-i-multi-process-the-itertools-product-module\">this</a>"}, {"owner": {"reputation": 2984, "user_id": 4380945, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh6.googleusercontent.com/-W290VH7AJAM/AAAAAAAAAAI/AAAAAAAAALw/J3K7uL_HNWo/photo.jpg?sz=128", "display_name": "Alejandro Simkievich", "link": "https://stackoverflow.com/users/4380945/alejandro-simkievich"}, "reply_to_user": {"reputation": 345, "user_id": 2249155, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/4jbea.png?s=128&g=1", "display_name": "neophlegm", "link": "https://stackoverflow.com/users/2249155/neophlegm"}, "edited": false, "score": 0, "creation_date": 1516834656, "post_id": 48432907, "comment_id": 83857454, "body": "I do not know if it is insightful, but it helps me solve the problem. none of the folks who bashed my question thought of it anyway. it could be a duplicate, I give you that."}, {"owner": {"reputation": 15007, "user_id": 389289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33eab2fa999a20910a29e4a2299bc174?s=128&d=identicon&r=PG&f=1", "display_name": "zvone", "link": "https://stackoverflow.com/users/389289/zvone"}, "edited": false, "score": 1, "creation_date": 1516836615, "post_id": 48432907, "comment_id": 83858096, "body": "@AlejandroSimkievich Running on 99 cores, you could create 99 partial lists, yes. In the end, you would have to merge them, if you want to have one large list. Note also that (assuming any overhead), 99^5 integers require 70 GB of RAM on a 64 bit machine. Note also that there is absolutely no information stored in those 70 GB of memory. List of all combinations is not information. So, what is the purpose?"}, {"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "reply_to_user": {"reputation": 15007, "user_id": 389289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33eab2fa999a20910a29e4a2299bc174?s=128&d=identicon&r=PG&f=1", "display_name": "zvone", "link": "https://stackoverflow.com/users/389289/zvone"}, "edited": false, "score": 0, "creation_date": 1516837071, "post_id": 48432907, "comment_id": 83858219, "body": "@zvone Good luck trying to get the actual purpose out of him. I tried but got the impression that he really doesn&#39;t want to tell. For some reason it apparently needs to remain secret."}], "tags": [], "owner": {"reputation": 2984, "user_id": 4380945, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh6.googleusercontent.com/-W290VH7AJAM/AAAAAAAAAAI/AAAAAAAAALw/J3K7uL_HNWo/photo.jpg?sz=128", "display_name": "Alejandro Simkievich", "link": "https://stackoverflow.com/users/4380945/alejandro-simkievich"}, "is_accepted": false, "score": 0, "last_activity_date": 1516833685, "creation_date": 1516833685, "answer_id": 48432907, "question_id": 48432557, "link": "https://stackoverflow.com/questions/48432557/optimize-all-possible-combinations-of-integers/48432907#48432907", "title": "optimize all possible combinations of integers", "body": "<p>I just realized there may be a way to expedite this running things in parallel.</p>\n\n<p>Let's say you have a machine with 99 cores, you could run four nested loops on 99 cores in parallel. in each one of the 99 cores, the first integer is a constant. you would have an efficiency gain of 100x (a bit less in practice I guess).</p>\n\n<p>I actually have access to a machine with 128 cores, so this may be an option.</p>\n"}, {"comments": [{"owner": {"reputation": 92827, "user_id": 369, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/DHcF2.png?s=128&g=1", "display_name": "Blorgbeard", "link": "https://stackoverflow.com/users/369/blorgbeard"}, "edited": false, "score": 1, "creation_date": 1516841641, "post_id": 48433487, "comment_id": 83859531, "body": "This is nicer code than OP&#39;s; but I note that it&#39;s functionally identical to his 5 nested loops, as long as the inner code is processing the set of ints without storing them."}, {"owner": {"reputation": 15007, "user_id": 389289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33eab2fa999a20910a29e4a2299bc174?s=128&d=identicon&r=PG&f=1", "display_name": "zvone", "link": "https://stackoverflow.com/users/389289/zvone"}, "reply_to_user": {"reputation": 92827, "user_id": 369, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/DHcF2.png?s=128&g=1", "display_name": "Blorgbeard", "link": "https://stackoverflow.com/users/369/blorgbeard"}, "edited": false, "score": 0, "creation_date": 1516901569, "post_id": 48433487, "comment_id": 83890049, "body": "@Blorgbeard Unlike the OP&#39;s code, this (first code in my answer) does not spend hours to fill 70 GB of data into a list. Other than that, it is no better, but there is no way to optimize the core functionality which OP is hiding from us... The second code is a loop which shows that this can be used just like the list. I&#39;ve updated my answer to explain that better (hopefully)"}, {"owner": {"reputation": 92827, "user_id": 369, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/DHcF2.png?s=128&g=1", "display_name": "Blorgbeard", "link": "https://stackoverflow.com/users/369/blorgbeard"}, "edited": false, "score": 0, "creation_date": 1516902130, "post_id": 48433487, "comment_id": 83890366, "body": "I know - my point was that the main improvement in your answer can be applied to the 5 nested loops - <code>print</code> instead of <code>append</code>. itertools or 5 nested loops doesn&#39;t matter, &quot;as long as the inner code is processing the set of ints without storing them&quot;."}], "tags": [], "owner": {"reputation": 15007, "user_id": 389289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33eab2fa999a20910a29e4a2299bc174?s=128&d=identicon&r=PG&f=1", "display_name": "zvone", "link": "https://stackoverflow.com/users/389289/zvone"}, "is_accepted": false, "score": 2, "last_activity_date": 1516901547, "last_edit_date": 1516901547, "creation_date": 1516837349, "answer_id": 48433487, "question_id": 48432557, "link": "https://stackoverflow.com/questions/48432557/optimize-all-possible-combinations-of-integers/48433487#48433487", "title": "optimize all possible combinations of integers", "body": "<p>Taking this important comment into account, there is a simple solution:</p>\n\n<blockquote>\n  <p>yep, i do not need to hold the list in memory, actually I can do\n  something with each combination and move on \u2013 <em>Alejandro Simkievich</em></p>\n</blockquote>\n\n<p>All you have to do is:</p>\n\n<pre><code>import itertools\nmy_list = itertools.product(xrange(1,99+1), repeat=5)\n</code></pre>\n\n<p>This executes in a fraction of a second and takes almost no memory. It does not actually create a list of 99^5 integers. Actually, it does not even create list of 99 integers. It fakes all of it.</p>\n\n<p>Even though there is no list in the memory, <code>my_list</code> can be iterated through as if it was such a list:</p>\n\n<pre><code>for int1, int2, int3, int4, int5 in my_list:\n    # do_whatever, but this will be executed 9509900499 times, of course\n    # try e.g.\n    print int1, int2, int3, int4, int5\n</code></pre>\n"}], "owner": {"reputation": 2984, "user_id": 4380945, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh6.googleusercontent.com/-W290VH7AJAM/AAAAAAAAAAI/AAAAAAAAALw/J3K7uL_HNWo/photo.jpg?sz=128", "display_name": "Alejandro Simkievich", "link": "https://stackoverflow.com/users/4380945/alejandro-simkievich"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 192, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1516902227, "creation_date": 1516831922, "last_edit_date": 1516902227, "question_id": 48432557, "link": "https://stackoverflow.com/questions/48432557/optimize-all-possible-combinations-of-integers", "title": "optimize all possible combinations of integers", "body": "<p>Let's say I have a row vector composed of 5 integers, where the first integer is int1 and the second is int2</p>\n\n<pre><code>int1   int2   int3   int4   int5\n</code></pre>\n\n<p>and i want to create a list of all possible combinations assuming each one of the integers can be between 1 and 99.</p>\n\n<p>One possibility would be to write 5 nested loops:</p>\n\n<pre><code>my list = []\n\nfor i in range(1,99):\n    for j in range(1,99):\n        for k in range(1,99):\n            for l in range(1,99):\n                for m in range(1,99):\n                    my_list.append([[m,l,k,j,i]])\n</code></pre>\n\n<p>This would be pretty inefficient, and we would need 9,509,900,499 iterations.</p>\n\n<p><strong>is there a more efficient way of adding all possible combinations to a list (i.e. an alternative to 5 nested loops)?</strong></p>\n\n<p>i will write the code in python but the response needs not be python specific.</p>\n"}, {"tags": ["python"], "answers": [{"tags": [], "owner": {"reputation": 375, "user_id": 3036834, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_WCL5SDyt_Y/AAAAAAAAAAI/AAAAAAAABf4/5AEuizCuG7w/photo.jpg?sz=128", "display_name": "sarnthil", "link": "https://stackoverflow.com/users/3036834/sarnthil"}, "is_accepted": true, "score": 2, "last_activity_date": 1516832568, "last_edit_date": 1516832568, "creation_date": 1516832007, "answer_id": 48432574, "question_id": 48432530, "link": "https://stackoverflow.com/questions/48432530/nx-graph-adding-edges-from-a-tuple-in-python/48432574#48432574", "title": "nx.Graph adding edges from a tuple in python", "body": "<p>You should iterate over <code>edges</code> and then add them one by one:</p>\n\n<pre><code>for source, target in edges:\n    g.add_edge(source, target)\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 9216753, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-wyUG6kk3ow8/AAAAAAAAAAI/AAAAAAAAHMQ/1pja-kgPxHk/photo.jpg?sz=128", "display_name": "Magdalena Petrova", "link": "https://stackoverflow.com/users/9216753/magdalena-petrova"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 1, "accepted_answer_id": 48432574, "answer_count": 1, "score": 2, "last_activity_date": 1516832568, "creation_date": 1516831822, "question_id": 48432530, "link": "https://stackoverflow.com/questions/48432530/nx-graph-adding-edges-from-a-tuple-in-python", "title": "nx.Graph adding edges from a tuple in python", "body": "<p>I am fairly new to Python and need some help please.</p>\n\n<p>I have a the edges for a network graph as a tuple in python:</p>\n\n<pre><code>edges = [(198704060004, 198704060010), (201501250041, 201501250045), (198608190006, 198608190007)]\n</code></pre>\n\n<p>and I am trying to plot a network graph. The code below only plots the first tuple pair.</p>\n\n<pre><code>import networkx as nx\ng= nx.Graph()\ng.add_edge(edges[0][0], edges[0][1])\n\nnx.draw(g)\nplt.show()\n</code></pre>\n\n<p>Can you please help me to make it automatically add all the edges. I tried writing a for loop but it seems I am writhing something wrong.</p>\n\n<p>Many thanks!</p>\n"}, {"tags": ["python", "tkinter", "treeview", "hidpi"], "comments": [{"owner": {"reputation": 11466, "user_id": 2229945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfbf044eccb8835deec653dae32d56e7?s=128&d=identicon&r=PG", "display_name": "Novel", "link": "https://stackoverflow.com/users/2229945/novel"}, "edited": false, "score": 2, "creation_date": 1516832907, "post_id": 48432506, "comment_id": 83856707, "body": "In the future, be sure to include a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. We can&#39;t test a screenshot."}], "answers": [{"comments": [{"owner": {"reputation": 10223, "user_id": 7032856, "user_type": "registered", "accept_rate": 81, "profile_image": "https://lh6.googleusercontent.com/-v2P-pqI1pww/AAAAAAAAAAI/AAAAAAAAABg/BHOFSOpQ0BM/photo.jpg?sz=128", "display_name": "Nae", "link": "https://stackoverflow.com/users/7032856/nae"}, "edited": false, "score": 1, "creation_date": 1516833750, "post_id": 48432749, "comment_id": 83857080, "body": "I like answers simple but If you don&#39;t could please add working example as well?"}, {"owner": {"reputation": 12178, "user_id": 1388292, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/mfJ7p.jpg?s=128&g=1", "display_name": "Jacques Gaudin", "link": "https://stackoverflow.com/users/1388292/jacques-gaudin"}, "edited": false, "score": 0, "creation_date": 1516834787, "post_id": 48432749, "comment_id": 83857500, "body": "Thanks a lot, sorry for not including a MCVE, I thought the picture would speak for itself."}, {"owner": {"reputation": 11466, "user_id": 2229945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfbf044eccb8835deec653dae32d56e7?s=128&d=identicon&r=PG", "display_name": "Novel", "link": "https://stackoverflow.com/users/2229945/novel"}, "reply_to_user": {"reputation": 12178, "user_id": 1388292, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/mfJ7p.jpg?s=128&g=1", "display_name": "Jacques Gaudin", "link": "https://stackoverflow.com/users/1388292/jacques-gaudin"}, "edited": false, "score": 1, "creation_date": 1516835519, "post_id": 48432749, "comment_id": 83857755, "body": "@JacquesGaudin in coding a single character mistake can be the difference between working and not, so we like to be able to test our solutions before we post them. By not including a MCVE, you are putting the burden on us to write some boilerplate code to do the testing. In this case I had an answer already since it&#39;s not the first time I&#39;ve been asked this question. If I hadn&#39;t had a ready answer I would not have bothered researching your problem without a way to test solutions."}, {"owner": {"reputation": 151, "user_id": 9344032, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/152470108740850/picture?type=large", "display_name": "Aleksandar Beat", "link": "https://stackoverflow.com/users/9344032/aleksandar-beat"}, "edited": false, "score": 0, "creation_date": 1530654544, "post_id": 48432749, "comment_id": 89309728, "body": "@Novel I have a project with 3 different treeviews, and I have tried to use : <code>s= ttk.Style()</code> <code>s.configure(&#39;Treeview&#39;, rowheight=40)</code>  But then it changes the row height for all treeviews , not for the treeview that I wanted. I have tried to change the <code>root</code> but it didnt work, can you please help me with this?"}, {"owner": {"reputation": 11466, "user_id": 2229945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfbf044eccb8835deec653dae32d56e7?s=128&d=identicon&r=PG", "display_name": "Novel", "link": "https://stackoverflow.com/users/2229945/novel"}, "reply_to_user": {"reputation": 151, "user_id": 9344032, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/152470108740850/picture?type=large", "display_name": "Aleksandar Beat", "link": "https://stackoverflow.com/users/9344032/aleksandar-beat"}, "edited": false, "score": 0, "creation_date": 1530661263, "post_id": 48432749, "comment_id": 89311423, "body": "@AleksandarBeat Read up on styles. I modified the global style. To do what you want you need to make a style with a new name like <code>s.configure(&#39;Aleksandar.Treeview&#39;, rowheight=40)</code> which you can then use by passing the style argument like <code>t = ttk.Treeview(self, style=&#39;Aleksandar.Treeview&#39;)</code>."}, {"owner": {"reputation": 151, "user_id": 9344032, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/152470108740850/picture?type=large", "display_name": "Aleksandar Beat", "link": "https://stackoverflow.com/users/9344032/aleksandar-beat"}, "edited": false, "score": 0, "creation_date": 1530696690, "post_id": 48432749, "comment_id": 89323365, "body": "@Novel i have tryed to do what you told me but I didnt succeed. Please check out this question, tell me if you can help me with it:  <a href=\"https://stackoverflow.com/questions/51169603/changing-row-height-for-different-treeviews-tkitner\">link</a>"}], "tags": [], "owner": {"reputation": 11466, "user_id": 2229945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfbf044eccb8835deec653dae32d56e7?s=128&d=identicon&r=PG", "display_name": "Novel", "link": "https://stackoverflow.com/users/2229945/novel"}, "is_accepted": true, "score": 5, "last_activity_date": 1516832881, "creation_date": 1516832881, "answer_id": 48432749, "question_id": 48432506, "link": "https://stackoverflow.com/questions/48432506/how-can-i-set-the-row-height-in-tkinter-treeview/48432749#48432749", "title": "How can I set the row height in Tkinter TreeView?", "body": "<pre><code>s = ttk.Style()\ns.configure('Treeview', rowheight=40) # repace 40 with whatever you need\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1037, "user_id": 6929343, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2SXNl.jpg?s=128&g=1", "display_name": "WinEunuuchs2Unix", "link": "https://stackoverflow.com/users/6929343/wineunuuchs2unix"}, "is_accepted": false, "score": 1, "last_activity_date": 1577708391, "last_edit_date": 1577708391, "creation_date": 1577707190, "answer_id": 59530481, "question_id": 48432506, "link": "https://stackoverflow.com/questions/48432506/how-can-i-set-the-row-height-in-tkinter-treeview/59530481#59530481", "title": "How can I set the row height in Tkinter TreeView?", "body": "<p>I already have a variable setup for font size and would like to avoid setting up a variable for row height. So my code looks like this:</p>\n\n<pre><code>style = ttk.Style()\nstyle.configure(\"Treeview.Heading\", font=(None, LARGE_FONT), \\\n                rowheight=int(LARGE_FONT*2.5))\nstyle.configure(\"Treeview\", font=(None, MON_FONTSIZE), \\\n                rowheight=int(MON_FONTSIZE*2.5))\n</code></pre>\n\n<p>When <code>LARGE_FONT</code> is set to <code>14</code>, the row height is set to <code>35</code>. When <code>MON_FONTSIZE</code> is set to <code>12</code>, the row height is calculated as <code>30</code>.</p>\n\n<p>The end result has the correct spacing (IMO) for the system font. YMMV for other font families though:</p>\n\n<p><a href=\"https://i.stack.imgur.com/cBaDQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/cBaDQ.png\" alt=\"wman gnome gsettings.png\"></a></p>\n"}], "owner": {"reputation": 12178, "user_id": 1388292, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/mfJ7p.jpg?s=128&g=1", "display_name": "Jacques Gaudin", "link": "https://stackoverflow.com/users/1388292/jacques-gaudin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5232, "favorite_count": 0, "accepted_answer_id": 48432749, "answer_count": 2, "score": 3, "last_activity_date": 1577708391, "creation_date": 1516831717, "question_id": 48432506, "link": "https://stackoverflow.com/questions/48432506/how-can-i-set-the-row-height-in-tkinter-treeview", "title": "How can I set the row height in Tkinter TreeView?", "body": "<p>I wrote a small app recently that needs to be cross-platform. I used Python and Tkinter for the GUI.</p>\n\n<p>It works great but recently I got a new laptop with a hiDPI screen and it seems to mess up the TreeView (see image below). The text height is too big compared to the height of the rows.</p>\n\n<p>The picture is taken from a virtual machine running Windows 7 as a guest. I had to set the text to a larger size (125%) to be able to read on the screen (every other program I've tried work fine with this setting).</p>\n\n<p>Is there any way to set the height of a row in Tkinter TreeView? I haven't seen anything like that in the docs.</p>\n\n<p><a href=\"https://i.stack.imgur.com/cKWy7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/cKWy7.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "python-3.x", "pygame"], "answers": [{"tags": [], "owner": {"reputation": 18103, "user_id": 6220679, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LK4H1.png?s=128&g=1", "display_name": "skrx", "link": "https://stackoverflow.com/users/6220679/skrx"}, "is_accepted": true, "score": 1, "last_activity_date": 1518644164, "last_edit_date": 1518644164, "creation_date": 1516842100, "answer_id": 48434066, "question_id": 48432505, "link": "https://stackoverflow.com/questions/48432505/pygame-mouse-get-pos-doesnt-work-python-idle-3/48434066#48434066", "title": "pygame.mouse.get_pos() doesn&#39;t work (Python IDLE 3)", "body": "<p>I don't know why it shows the wrong coordinates, but it seems to happen only if there's another window (in this case the IDLE window) in front of the pygame window. If the pygame window is selected/focussed and you set the mouse pos, <code>pygame.mouse.get_pos()</code> will return the correct coordinates. Try to set the mouse pos in an event loop (press the <kbd>s</kbd> key):</p>\n\n<pre><code>import pygame\n\npygame.init()\n\nsize = (800, 500)\nscreen = pygame.display.set_mode(size)\npygame.mouse.set_pos([100,100])\nWHITE = (255,255,255)\nclock = pygame.time.Clock()\n\ndone = False\nwhile not done:\n    for event in pygame.event.get():\n        if event.type == pygame.QUIT:\n            done = True\n        elif event.type == pygame.KEYDOWN:\n            if event.key == pygame.K_s:\n                pygame.mouse.set_pos([100,100])\n\n    print(pygame.mouse.get_pos())\n    screen.fill(WHITE)\n    pygame.display.flip()\n    clock.tick(30)\n\npygame.quit()\n</code></pre>\n\n<p>Or run the program in the command-line/terminal.</p>\n"}], "owner": {"reputation": 54, "user_id": 9096095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95d3d33be06a4814b5b8ef99f379f720?s=128&d=identicon&r=PG&f=1", "display_name": "CU12", "link": "https://stackoverflow.com/users/9096095/cu12"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 162, "favorite_count": 0, "accepted_answer_id": 48434066, "answer_count": 1, "score": 3, "last_activity_date": 1518644164, "creation_date": 1516831709, "last_edit_date": 1518643883, "question_id": 48432505, "link": "https://stackoverflow.com/questions/48432505/pygame-mouse-get-pos-doesnt-work-python-idle-3", "title": "pygame.mouse.get_pos() doesn&#39;t work (Python IDLE 3)", "body": "<p>I'm trying to make python detect the position of the mouse. My code:</p>\n\n<pre><code>import pygames\npygame.init()\nsize = (700, 500)\nscreen = pygame.display.set_mode(size)\nWHITE = (255,255,255)\nscreen.fill(WHITE)\npygame.mouse.set_pos([100,100]) #I didn't move my mouse so [0,100] should be the output\nx_y = pygame.mouse.get_pos()\n#I then run this program. Here is the output:\n(0, 0)\n</code></pre>\n\n<p>I don't know what's wrong. Why are the coordinates wrong?</p>\n"}, {"tags": ["python", "pygame", "pip"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 1, "creation_date": 1516831898, "post_id": 48432478, "comment_id": 83856210, "body": "When you installed pygame did you have a problem? Do you only have one python installed?"}, {"owner": {"reputation": 573, "user_id": 902414, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/UHrPm.jpg?s=128&g=1", "display_name": "fabiomaia", "link": "https://stackoverflow.com/users/902414/fabiomaia"}, "edited": false, "score": 2, "creation_date": 1516831942, "post_id": 48432478, "comment_id": 83856229, "body": "Perhaps you installed pygame with Python 3&#39;s pip? Happens to me all the time."}, {"owner": {"reputation": 1194, "user_id": 8390068, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sbzKf.jpg?s=128&g=1", "display_name": "Micheal O&#39;Dwyer", "link": "https://stackoverflow.com/users/8390068/micheal-odwyer"}, "edited": false, "score": 0, "creation_date": 1516839848, "post_id": 48432478, "comment_id": 83859044, "body": "Please provide more details about your Python setup in your computer."}, {"owner": {"reputation": 21, "user_id": 8805932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d00f507515b4fc7847938b1edbc939bb?s=128&d=identicon&r=PG&f=1", "display_name": "T-J King", "link": "https://stackoverflow.com/users/8805932/t-j-king"}, "edited": false, "score": 0, "creation_date": 1516864479, "post_id": 48432478, "comment_id": 83865998, "body": "I had IDLE 2.4.17 installed and thats what I was using, I also have IDLE 3.5 and 3.6 installed. I tried running the code through IDLE 3.5 and it seems to work."}], "owner": {"reputation": 21, "user_id": 8805932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d00f507515b4fc7847938b1edbc939bb?s=128&d=identicon&r=PG&f=1", "display_name": "T-J King", "link": "https://stackoverflow.com/users/8805932/t-j-king"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "closed_date": 1610659698, "answer_count": 0, "score": 0, "last_activity_date": 1516831848, "creation_date": 1516831620, "last_edit_date": 1516831848, "question_id": 48432478, "link": "https://stackoverflow.com/questions/48432478/pygame-causes-an-error", "closed_reason": "Duplicate", "title": "Pygame causes an error", "body": "<p>I have Python 2.7.14 installed and I am using windows 10, I have installed pip and installed pygame through the cmd prompt as instructed, however, when I try to run the code it tells me that there is no module named pygame. Can anyone help me with this?</p>\n\n<p>Here is the code:</p>\n\n<pre><code>import pygame, sys\nfrom pygame.locals import *\npygame.init()\nscreen = pygame.display.set_mode((640,480))\nwhile 1:\n    for event in pygame.event.get():\n        if event. type == pygame.QUIT:\n            sys.exit()\n    screen.fill((255,255,255))\n    pygame.draw.circle(screen,(0,255,0),(100,150),20)\n    pygame.display.update()\n</code></pre>\n"}, {"tags": ["python", "pip", "nexus", "pypi"], "answers": [{"comments": [{"owner": {"reputation": 939, "user_id": 2791336, "user_type": "registered", "accept_rate": 28, "profile_image": "https://graph.facebook.com/100004952465784/picture?type=large", "display_name": "Vadim  Kovrizhkin", "link": "https://stackoverflow.com/users/2791336/vadim-kovrizhkin"}, "edited": false, "score": 0, "creation_date": 1516882378, "post_id": 48432481, "comment_id": 83876400, "body": "Now I get an error: ValueError: invalid literal for int() with base 10: &#39;Ba633l99&#39; if my password is Ba633l99#!"}], "tags": [], "owner": {"reputation": 5214, "user_id": 439494, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/7aa99d0eed60260a2937e56cf9560138?s=128&d=identicon&r=PG", "display_name": "Havok", "link": "https://stackoverflow.com/users/439494/havok"}, "is_accepted": false, "score": 1, "last_activity_date": 1516836237, "last_edit_date": 1516836237, "creation_date": 1516831632, "answer_id": 48432481, "question_id": 48432403, "link": "https://stackoverflow.com/questions/48432403/installing-packages-from-private-pypi-fails-if-password-contains-character/48432481#48432481", "title": "Installing packages from private pypi fails if password contains &#39;@&#39; character", "body": "<p>Maybe you need to percent scape it, as it is a URL.</p>\n\n<pre><code>&gt;&gt;&gt; from urllib.parse import quote_plus\n&gt;&gt;&gt; quote_plus('Password@')\n'Password%40'\n</code></pre>\n\n<p>For example in Mongo, to connect you can use:</p>\n\n<p><a href=\"http://api.mongodb.com/python/current/examples/authentication.html#percent-escaping-username-and-password\" rel=\"nofollow noreferrer\">http://api.mongodb.com/python/current/examples/authentication.html#percent-escaping-username-and-password</a></p>\n\n<pre><code>&gt;&gt;&gt; from pymongo import MongoClient\n&gt;&gt;&gt; import urllib.parse\n&gt;&gt;&gt; username = urllib.parse.quote_plus('user')\n&gt;&gt;&gt; username\n'user'\n&gt;&gt;&gt; password = urllib.parse.quote_plus('pass/word')\n&gt;&gt;&gt; password\n'pass%2Fword'\n&gt;&gt;&gt; MongoClient('mongodb://%s:%s@127.0.0.1' % (username, password))\n</code></pre>\n\n<p>--- EDIT ---</p>\n\n<p>I followed the code in pip to here:</p>\n\n<p><a href=\"https://github.com/pypa/pip/blob/1ea3f89ff9f005c78413907b36e55b3e76092612/src/pip/_internal/download.py#L140\" rel=\"nofollow noreferrer\">https://github.com/pypa/pip/blob/1ea3f89ff9f005c78413907b36e55b3e76092612/src/pip/_internal/download.py#L140</a></p>\n\n<p>And run the code manually, with both quoting and unquoting the password:</p>\n\n<p>Unquoted:</p>\n\n<pre><code>&gt;&gt;&gt; from urllib import parse as urllib_parse\n&gt;&gt;&gt; url = 'https://someLogin:Password@@nexus.privatepypy.com/repository/pypi/xxx'\n\n&gt;&gt;&gt; parsed = urllib_parse.urlparse(url)\n&gt;&gt;&gt; parsed\nParseResult(scheme='https', netloc='someLogin:Password@@nexus.privatepypy.com', path='/repository/pypi/xxx', params='', query='', fragment='')\n\n&gt;&gt;&gt; netloc = parsed.netloc.rsplit(\"@\", 1)[-1]\n&gt;&gt;&gt; netloc\n'nexus.privatepypy.com'\n\n&gt;&gt;&gt; url = urllib_parse.urlunparse(parsed[:1] + (netloc,) + parsed[2:])\n&gt;&gt;&gt; url\n'https://nexus.privatepypy.com/repository/pypi/xxx'\n\n&gt;&gt;&gt; def parse_credentials(netloc):\n...    if \"@\" in netloc:\n...        userinfo = netloc.rsplit(\"@\", 1)[0]\n...        if \":\" in userinfo:\n...            user, pwd = userinfo.split(\":\", 1)\n...            return (urllib_parse.unquote(user), urllib_parse.unquote(pwd))\n...        return urllib_parse.unquote(userinfo), None\n...    return None, None\n\n&gt;&gt;&gt; username, password = parse_credentials(parsed.netloc)\n&gt;&gt;&gt; username, password\n('someLogin', 'Password@')\n</code></pre>\n\n<p>Quoted:</p>\n\n<pre><code>&gt;&gt;&gt; url = 'https://{}:{}@nexus.privatepypy.com/repository/pypi/xxx'.format(\n...     urllib_parse.quote_plus('someLogin'), \n...     urllib_parse.quote_plus('Password@'), \n... )\n&gt;&gt;&gt; url\n'https://someLogin:Password%40@nexus.privatepypy.com/repository/pypi/xxx'\n\n&gt;&gt;&gt; parsed = urllib_parse.urlparse(url)\n&gt;&gt;&gt; parsed\nParseResult(scheme='https', netloc='someLogin:Password%40@nexus.privatepypy.com', path='/repository/pypi/xxx', params='', query='', fragment='')\n\n&gt;&gt;&gt; username, password = parse_credentials(parsed.netloc)\n&gt;&gt;&gt; username, password\n('someLogin', 'Password@')\n</code></pre>\n\n<p>As you can see it <em>should</em> work in both cases. As I could confirm pip unquotes the username and password, so it is better to quote them.</p>\n\n<p>If it still doens't work I would check the pip version or file a bug.</p>\n"}], "owner": {"reputation": 939, "user_id": 2791336, "user_type": "registered", "accept_rate": 28, "profile_image": "https://graph.facebook.com/100004952465784/picture?type=large", "display_name": "Vadim  Kovrizhkin", "link": "https://stackoverflow.com/users/2791336/vadim-kovrizhkin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 622, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1516882148, "creation_date": 1516831324, "last_edit_date": 1516882148, "question_id": 48432403, "link": "https://stackoverflow.com/questions/48432403/installing-packages-from-private-pypi-fails-if-password-contains-character", "title": "Installing packages from private pypi fails if password contains &#39;@&#39; character", "body": "<p>Installing packages from private pypi fails if password contains '@' character</p>\n\n<p>So if I have\nlogin: someLogin\npassword: Password@</p>\n\n<p>then my pip.conf looks like:</p>\n\n<pre><code>[global]\nextra-index-url = https://someLogin:Password@@nexus.privatepypy.com/repository/pypi/xxx\n</code></pre>\n\n<p>And this actually does not work. I have to type my password all the time.</p>\n\n<p>Is there any workaround for this? </p>\n\n<p>PS: Changing password is not a solution :-)</p>\n"}, {"tags": ["python", "heroku", "gunicorn"], "comments": [{"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1516831821, "post_id": 48432386, "comment_id": 83856177, "body": "<code>myproject.app</code>. You&#39;ll need an <code>__init__.py</code> in the my project directory."}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user9232447"}, "is_accepted": true, "score": 2, "last_activity_date": 1516831826, "creation_date": 1516831826, "answer_id": 48432531, "question_id": 48432386, "link": "https://stackoverflow.com/questions/48432386/flask-gunicorn-cant-find-application/48432531#48432531", "title": "Flask Gunicorn can&#39;t find application", "body": "<p>Try adding to <code>__init__.py</code> the wsgi instance that you want to export.</p>\n\n<p><code>from .app import app\n</code></p>\n\n<p>This way the wsgi <code>app</code> is available when importing <code>myproject</code> and you should be able to run your app with <code>gunicorn myproject:app</code></p>\n"}], "owner": {"reputation": 678, "user_id": 4255859, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/7ae1a5dab6747cb57ce9990a48170abe?s=128&d=identicon&r=PG&f=1", "display_name": "vwos", "link": "https://stackoverflow.com/users/4255859/vwos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 454, "favorite_count": 0, "accepted_answer_id": 48432531, "answer_count": 1, "score": 0, "last_activity_date": 1516831826, "creation_date": 1516831250, "question_id": 48432386, "link": "https://stackoverflow.com/questions/48432386/flask-gunicorn-cant-find-application", "title": "Flask Gunicorn can&#39;t find application", "body": "<p>I'm creating an application using Flask. Everything works fine when running it with directly with Python, but I want to host it on Heroku, so I need to figure out how to use Gunicorn. The problem I'm having is that since <code>app.py</code> isn't in my root folder, it can't be run by simply typing <code>gunicorn app</code> or something like that. My folder structure is the following:</p>\n\n<pre><code>.\n\u251c\u2500\u2500 LICENSE\n\u251c\u2500\u2500 myproject\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 app.py\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 static\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 templates\n\u251c\u2500\u2500 Procfile\n\u251c\u2500\u2500 README.md\n\u251c\u2500\u2500 requirements.txt\n</code></pre>\n\n<p>where <code>app.py</code> looks something like this:</p>\n\n<pre><code>app = Flask(__name__)\n\n@app.route(\"/\")\ndef index():\n    return render_template(\"index.html\")\n\nif __name__ == '__main__':\n    app.run(debug=True)\n</code></pre>\n\n<p>I have tried using Gunicorn to run it in the following ways...</p>\n\n<p><code>gunicorn myproject app.py</code></p>\n\n<p><code>gunicorn myproject app:app</code></p>\n\n<p><code>gunicorn myproject/app.py</code></p>\n\n<p>I have also tried creating an <code>__init__.py</code> in <code>myproject/</code>, but I have no idea what to put in there to make this work.</p>\n"}, {"tags": ["python", "apache-spark", "tensorflow", "pyspark", "azure-hdinsight"], "comments": [{"owner": {"reputation": 8437, "user_id": 3314107, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9bdb9cc374e313876de99a99d191ecd6?s=128&d=identicon&r=PG", "display_name": "stefanobaghino", "link": "https://stackoverflow.com/users/3314107/stefanobaghino"}, "edited": false, "score": 0, "creation_date": 1516833184, "post_id": 48432348, "comment_id": 83856840, "body": "I&#39;m not very familiar with HDInsight in particular, but it looks like your pyspark is running on top of Anaconda. Perhaps you should <code>conda install tensorflow</code> in the appropriate location of your system."}], "answers": [{"comments": [{"owner": {"reputation": 451, "user_id": 4789626, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/ko4mx.jpg?s=128&g=1", "display_name": "ankush reddy", "link": "https://stackoverflow.com/users/4789626/ankush-reddy"}, "edited": false, "score": 0, "creation_date": 1516898773, "post_id": 48433321, "comment_id": 83888297, "body": "Thanks I will give it a try."}], "tags": [], "owner": {"reputation": 41, "user_id": 9165215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff1396f2b4de04fbcc23f5d94c882cd6?s=128&d=identicon&r=PG&f=1", "display_name": "kkampf", "link": "https://stackoverflow.com/users/9165215/kkampf"}, "is_accepted": true, "score": 1, "last_activity_date": 1516836237, "creation_date": 1516836237, "answer_id": 48433321, "question_id": 48432348, "link": "https://stackoverflow.com/questions/48432348/how-to-install-tensorflow-on-a-spark-hdinsight-cluster/48433321#48433321", "title": "how to install tensorflow on a spark HDInsight cluster?", "body": "<p>You can use a script action to install TensorFlow on the head nodes and worker nodes with the instructions found <a href=\"https://docs.microsoft.com/en-us/azure/hdinsight/spark/apache-spark-python-package-installation\" rel=\"nofollow noreferrer\">here</a> under the \"Use external packages with Jupyter notebooks\" section, a TensorFlow bash script is provided</p>\n"}], "owner": {"reputation": 451, "user_id": 4789626, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/ko4mx.jpg?s=128&g=1", "display_name": "ankush reddy", "link": "https://stackoverflow.com/users/4789626/ankush-reddy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 834, "favorite_count": 0, "accepted_answer_id": 48433321, "answer_count": 1, "score": 0, "last_activity_date": 1516836237, "creation_date": 1516831108, "last_edit_date": 1516831983, "question_id": 48432348, "link": "https://stackoverflow.com/questions/48432348/how-to-install-tensorflow-on-a-spark-hdinsight-cluster", "title": "how to install tensorflow on a spark HDInsight cluster?", "body": "<p>I am trying to install tensorflow on a spark HDInsight cluster. but facing issues.</p>\n\n<p>I used pip install tensorflow from the headnode.</p>\n\n<p>I am able to import tensorflow from the python.</p>\n\n<pre><code>Python 2.7.12 (default, Dec  4 2017, 14:50:18)\n[GCC 5.4.0 20160609] on linux2\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; import tensorflow\n&gt;&gt;&gt; exit()\n</code></pre>\n\n<p>But when I try to import tensorflow from head node or pyspark console it is throwing an error </p>\n\n<pre><code>SPARK_MAJOR_VERSION is set to 2, using Spark2\nPython 2.7.12 |Anaconda custom (64-bit)| (default, Jul  2 2016, 17:42:40)\n[GCC 4.4.7 20120313 (Red Hat 4.4.7-1)] on linux2\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\nAnaconda is brought to you by Continuum Analytics.\nPlease check out: http://continuum.io/thanks and https://anaconda.org\nSetting default log level to \"WARN\".\nTo adjust logging level use sc.setLogLevel(newLevel).\nWelcome to\n      ____              __\n     / __/__  ___ _____/ /__\n    _\\ \\/ _ \\/ _ `/ __/  '_/\n   /__ / .__/\\_,_/_/ /_/\\_\\   version 2.0.2.2.5.6.2-9\n      /_/\n\nUsing Python version 2.7.12 (default, Jul  2 2016 17:42:40)\nSparkSession available as 'spark'.\n&gt;&gt;&gt; import tensorflow\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nImportError: No module named tensorflow\n</code></pre>\n\n<p>Can anyone please help me with installing tensorflow on spark HDinsight cluster.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 3670, "user_id": 7857466, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7OW0s.png?s=128&g=1", "display_name": "progmatico", "link": "https://stackoverflow.com/users/7857466/progmatico"}, "edited": false, "score": 2, "creation_date": 1516831481, "post_id": 48432325, "comment_id": 83856026, "body": "can&#39;t see the problem in the code shown"}, {"owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "edited": false, "score": 3, "creation_date": 1516831647, "post_id": 48432325, "comment_id": 83856098, "body": "Welcome to <a href=\"https://stackoverflow.com\">Stack Overflow</a>! I notice that your error message does not seem to correlate with your source code. In particular, <code>main()</code> is never invoked in your sample program. Please reduce your program to the shortest possible <b>complete</b> program that demonstrates the problem. Please copy-paste that program along with the actual and expected output. See <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> for more info."}, {"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1516831761, "post_id": 48432325, "comment_id": 83856150, "body": "Your program behaves correctly. The purpose of <code>sys.exit</code> is to raise a <code>SystemExit</code> exception."}, {"owner": {"reputation": 732, "user_id": 4854766, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/da0d92a989793b4a9f7fa9fd56b2cbb7?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler Cowan", "link": "https://stackoverflow.com/users/4854766/tyler-cowan"}, "edited": false, "score": 0, "creation_date": 1516832887, "post_id": 48432325, "comment_id": 83856695, "body": "I get no errors running your code on python 3.6.2"}, {"owner": {"reputation": 11, "user_id": 8781930, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-o3v1aiB-3a8/AAAAAAAAAAI/AAAAAAAAAC4/xx1xLe_C-q8/photo.jpg?sz=128", "display_name": "Zhuohao Gong", "link": "https://stackoverflow.com/users/8781930/zhuohao-gong"}, "edited": false, "score": 0, "creation_date": 1516840446, "post_id": 48432325, "comment_id": 83859238, "body": "I&#39;m runing it on wing idle 101 6.0. It has no problem on running terminal."}, {"owner": {"reputation": 11, "user_id": 8781930, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-o3v1aiB-3a8/AAAAAAAAAAI/AAAAAAAAAC4/xx1xLe_C-q8/photo.jpg?sz=128", "display_name": "Zhuohao Gong", "link": "https://stackoverflow.com/users/8781930/zhuohao-gong"}, "edited": false, "score": 0, "creation_date": 1516840505, "post_id": 48432325, "comment_id": 83859255, "body": "So it is the problem of running it on wing idle?"}], "owner": {"reputation": 11, "user_id": 8781930, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-o3v1aiB-3a8/AAAAAAAAAAI/AAAAAAAAAC4/xx1xLe_C-q8/photo.jpg?sz=128", "display_name": "Zhuohao Gong", "link": "https://stackoverflow.com/users/8781930/zhuohao-gong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 593, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1516840560, "creation_date": 1516831029, "last_edit_date": 1516840560, "question_id": 48432325, "link": "https://stackoverflow.com/questions/48432325/python-sys-exit-error-builtins-systemexit", "title": "python sys.exit() error builtins.SystemExit:", "body": "<pre><code>import sys\ndef main():\n    keystr = input(\"Enter the Key: \")\n    key = int(keystr)\n    if (key &lt;=0) or (key&gt;=25):\n        print(\"The key is out of range\")\n        sys.exit()\n</code></pre>\n\n<p>When I want to terminate with input of key (&lt;= 0 or >= 25), there is an error messgae.</p>\n\n<pre><code>The key is out of rangeTraceback (most recent call last):\n  File \"C:/Users/USER/Desktop/caesarRefactored.py\", line 38, in &lt;module&gt;\n    main()\n  File \"C:/Users/USER/Desktop/caesarRefactored.py\", line 11, in &lt;module&gt;\n    sys.exit()\nbuiltins.SystemExit:\n</code></pre>\n\n<p>How can I fix it?\nI'm running this on wing idle, the error shows. If on the terminal, it works just fine.</p>\n"}, {"tags": ["python", "python-3.x", "oop"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1516831265, "post_id": 48432316, "comment_id": 83855912, "body": "There are no private attributes in Python. double-underscore name-mangling does <i>name-mangling</i>, it doesn&#39;t restrict access."}, {"owner": {"reputation": 1492, "user_id": 8435726, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Hc56D.png?s=128&g=1", "display_name": "jxie0755", "link": "https://stackoverflow.com/users/8435726/jxie0755"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1516833772, "post_id": 48432316, "comment_id": 83857089, "body": "@juanpa.arrivillaga I do know that for a fact as <code>__private</code> is disguised under <code>_Class__private</code>, so it is not truly read-only . That makes me even more wondering how they set it up to make <code>timedelta.max</code> read-only"}, {"owner": {"reputation": 1492, "user_id": 8435726, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Hc56D.png?s=128&g=1", "display_name": "jxie0755", "link": "https://stackoverflow.com/users/8435726/jxie0755"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1516835231, "post_id": 48432316, "comment_id": 83857658, "body": "@juanpa.arrivillaga Got it, thanks!"}], "answers": [{"tags": [], "owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "is_accepted": false, "score": 2, "last_activity_date": 1516831898, "creation_date": 1516831898, "answer_id": 48432549, "question_id": 48432316, "link": "https://stackoverflow.com/questions/48432316/python-class-read-only-attributes-in-datetime/48432549#48432549", "title": "python class read-only attributes (in datetime)", "body": "<p>That is not the source code of the date-time module used by the CPython interpreter. The CPython source implements a lot of the standard library in C for performance reasons. They do provide Python-only implementations (which I believe are relied upon by PyPy in many instances, for example). </p>\n\n<p>The source code for <code>datetime</code> is actually here:</p>\n\n<p><a href=\"https://github.com/python/cpython/blob/3.6/Modules/_datetimemodule.c\" rel=\"nofollow noreferrer\">https://github.com/python/cpython/blob/3.6/Modules/_datetimemodule.c</a></p>\n\n<p>Access is restricted at the C-level.</p>\n\n<p>Note, double-underscore name-mangling does <em>name-mangling</em>, it doesn't restrict access.</p>\n"}, {"comments": [{"owner": {"reputation": 1492, "user_id": 8435726, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Hc56D.png?s=128&g=1", "display_name": "jxie0755", "link": "https://stackoverflow.com/users/8435726/jxie0755"}, "edited": false, "score": 0, "creation_date": 1516842904, "post_id": 48432602, "comment_id": 83859856, "body": "Thank you so much for the clear explanation! As a beginner who just started to learn python not too long ago (and only python), I may have gone too far asking this question at this early stage."}, {"owner": {"reputation": 1492, "user_id": 8435726, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Hc56D.png?s=128&g=1", "display_name": "jxie0755", "link": "https://stackoverflow.com/users/8435726/jxie0755"}, "edited": false, "score": 0, "creation_date": 1516843121, "post_id": 48432602, "comment_id": 83859899, "body": "If I can ask a further question based on your answer. How can one tell if a .py file is trying to use a module written in C? From the datetime.py file, I can only see CPython in comments, but no else where"}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "reply_to_user": {"reputation": 1492, "user_id": 8435726, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Hc56D.png?s=128&g=1", "display_name": "jxie0755", "link": "https://stackoverflow.com/users/8435726/jxie0755"}, "edited": false, "score": 2, "creation_date": 1516843873, "post_id": 48432602, "comment_id": 83860089, "body": "@Code_Control_jxie0755: If you look at the very bottom of <code>datetime.py</code>, it has code that <code>try</code>s to do <code>from _datetime import *</code>. Using an underscore prefixed module name is the Python 3 standard for the C extension module backing a module implemented in pure Python, and the pattern of &quot;define all the Python stuff, but then see if we can&#39;t replace most/all of it with equivalents from the accelerator module&quot; is fairly common."}], "tags": [], "owner": {"reputation": 255971, "user_id": 464744, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/3dfd6067f4c69986a652444f44bb6d7c?s=128&d=identicon&r=PG", "display_name": "Blender", "link": "https://stackoverflow.com/users/464744/blender"}, "is_accepted": true, "score": 4, "last_activity_date": 1516832676, "last_edit_date": 1516832676, "creation_date": 1516832180, "answer_id": 48432602, "question_id": 48432316, "link": "https://stackoverflow.com/questions/48432316/python-class-read-only-attributes-in-datetime/48432602#48432602", "title": "python class read-only attributes (in datetime)", "body": "<blockquote>\n  <p>The class attributes was set outside of the class? why?</p>\n</blockquote>\n\n<p><code>timedelta</code> doesn't exist when the body of the <code>timedelta</code> class is being executed. You have to execute all of the code in the <code>class timedelta:</code> block before the class object is created and can be used on its own.</p>\n\n<blockquote>\n  <p>I wonder where does this AttributeError coming from? I can not find in anywhere in the source code that this error message will be raised?</p>\n</blockquote>\n\n<p>The <code>datetime</code> module is written in pure Python but <a href=\"https://github.com/python/cpython/blob/09dc2f508c8513e0466a759cc27a09108c1e55c2/Lib/datetime.py#L2412\" rel=\"nofollow noreferrer\">tries to use</a> a faster module <a href=\"https://github.com/python/cpython/blob/9f1b7b93f5f0ef589e7b272e127cacf4ce5d23f1/Modules/_datetimemodule.c\" rel=\"nofollow noreferrer\">written in C</a> if it can. The pure Python code works as you'd expect:</p>\n\n<pre><code>&gt;&gt;&gt; import sys\n&gt;&gt;&gt; sys.modules['_datetime'] = None  # prevent the C module from loading\n&gt;&gt;&gt; from datetime import timedelta\n&gt;&gt;&gt; timedelta.min = 5\n&gt;&gt;&gt; timedelta.min\n5\n</code></pre>\n\n<p>The <code>timedelta</code> class has <a href=\"https://docs.python.org/3/c-api/typeobj.html#c.PyTypeObject.tp_flags\" rel=\"nofollow noreferrer\"><code>tp_flags</code></a> set to <a href=\"https://github.com/python/cpython/blob/9f1b7b93f5f0ef589e7b272e127cacf4ce5d23f1/Modules/_datetimemodule.c#L2698\" rel=\"nofollow noreferrer\"><code>Py_TPFLAGS_DEFAULT | Py_TPFLAGS_BASETYPE</code></a>. You can only set the attributes of objects which include the <a href=\"https://github.com/python/cpython/blob/ce5b0e9db1b9698e6ffc43ae41cf3a22ca5a6ba6/Objects/typeobject.c#L3224-L3228\" rel=\"nofollow noreferrer\"><code>Py_TPFLAGS_HEAPTYPE</code> flag</a>.</p>\n"}], "owner": {"reputation": 1492, "user_id": 8435726, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Hc56D.png?s=128&g=1", "display_name": "jxie0755", "link": "https://stackoverflow.com/users/8435726/jxie0755"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 548, "favorite_count": 0, "accepted_answer_id": 48432602, "answer_count": 2, "score": 4, "last_activity_date": 1516843334, "creation_date": 1516830976, "last_edit_date": 1516843334, "question_id": 48432316, "link": "https://stackoverflow.com/questions/48432316/python-class-read-only-attributes-in-datetime", "title": "python class read-only attributes (in datetime)", "body": "<p>I know that a quick way of setting an attribute to be private is to use <code>__</code> before an attribute (<strong>corrected later as this is actually for name mangling, not for restriction of access</strong>), or use @property</p>\n\n<p>But, I found that for a python standard library module, for example, <a href=\"https://docs.python.org/3/library/datetime.html#module-datetime\" rel=\"nofollow noreferrer\">datetime</a>, this was set a different way?</p>\n\n<p>To explain my question, please go to <a href=\"https://github.com/python/cpython/tree/3.6/Lib/datetime.py\" rel=\"nofollow noreferrer\">the source code of datetime</a></p>\n\n<p>Let's take class <code>timedelta</code> as an example:</p>\n\n<pre><code>class timedelta:\n    ...\n    ...\n    ... \n\ntimedelta.min = timedelta(-999999999)\ntimedelta.max = timedelta(days=999999999, hours=23, minutes=59, seconds=59,\n                          microseconds=999999)\ntimedelta.resolution = timedelta(microseconds=1)\n</code></pre>\n\n<p><strong>The class attributes was set outside of the class? why?</strong></p>\n\n<p>and if I:</p>\n\n<pre><code>import datetime\nd= datetime.timedelta(days=1, hours=12)\nprint(d)\nprint(d.max)  # &gt;&gt;&gt; 999999999 days, 23:59:59.999999\nprint(type(d.max))  # &gt;&gt;&gt; &lt;class 'datetime.timedelta'&gt;\n\nd.max = 1000  # regardless of the reason, if I just want to do this\n# &gt;&gt;&gt; AttributeError: 'datetime.timedelta' object attribute 'max' is read-only\n</code></pre>\n\n<p><strong>I wonder where does this <code>AttributeError</code> coming from? I can not find in anywhere in the source code that this error message will be raised?</strong></p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "machine-learning", "nlp", "deep-learning", "keras"], "comments": [{"owner": {"reputation": 922, "user_id": 5541673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e52518ec3aeff56819a1c264792904f?s=128&d=identicon&r=PG&f=1", "display_name": "JARS", "link": "https://stackoverflow.com/users/5541673/jars"}, "edited": false, "score": 11, "creation_date": 1520516081, "post_id": 48432300, "comment_id": 85353691, "body": "That is a common problem of word-based tokenization. One approach is to ignore those words, as it&#39;s currently happening. A slightly preferable alternative sometimes is to have a token which means &quot;unseen word&quot;. Also, there are a few methods on how to compose embeddings of unseen words from those of seen words (check out &quot;out of vocabulary embeddings&quot;). Finally, some people use embedding of character n-grams instead of word embeddings to actually address that problem (especially in scenarios with large and changing vocabularies such as Twitter)."}, {"owner": {"reputation": 1352, "user_id": 3687439, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/4e7687090278d32912ea8126691dac9f?s=128&d=identicon&r=PG", "display_name": "Quetzalcoatl", "link": "https://stackoverflow.com/users/3687439/quetzalcoatl"}, "edited": false, "score": 0, "creation_date": 1530858889, "post_id": 48432300, "comment_id": 89389591, "body": "related: <a href=\"https://stackoverflow.com/questions/45735070/keras-text-preprocessing-saving-tokenizer-object-to-file-for-scoring/51203923#51203923\" title=\"keras text preprocessing saving tokenizer object to file for scoring\">stackoverflow.com/questions/45735070/&hellip;</a>"}, {"owner": {"reputation": 1287, "user_id": 2135819, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/73b98b32d181627f9a8297931c318c47?s=128&d=identicon&r=PG", "display_name": "Kleyson Rios", "link": "https://stackoverflow.com/users/2135819/kleyson-rios"}, "reply_to_user": {"reputation": 922, "user_id": 5541673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e52518ec3aeff56819a1c264792904f?s=128&d=identicon&r=PG&f=1", "display_name": "JARS", "link": "https://stackoverflow.com/users/5541673/jars"}, "edited": false, "score": 0, "creation_date": 1550144426, "post_id": 48432300, "comment_id": 96166736, "body": "hi @JARS, may you provide some link or an example regarding what you said about &quot;Finally, some people use embedding of character n-grams...&quot; ? I didn&#180;t find anything more clear that could help."}, {"owner": {"reputation": 896, "user_id": 2796084, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11f3759f4c54dbc10c0aa4a2b7111b02?s=128&d=identicon&r=PG", "display_name": "Separius", "link": "https://stackoverflow.com/users/2796084/separius"}, "reply_to_user": {"reputation": 1287, "user_id": 2135819, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/73b98b32d181627f9a8297931c318c47?s=128&d=identicon&r=PG", "display_name": "Kleyson Rios", "link": "https://stackoverflow.com/users/2135819/kleyson-rios"}, "edited": false, "score": 0, "creation_date": 1552370100, "post_id": 48432300, "comment_id": 96971654, "body": "@KleysonRios you can use subword models, like <a href=\"https://arxiv.org/abs/1607.04606\" rel=\"nofollow noreferrer\">fastText</a>, <a href=\"https://arxiv.org/abs/1710.02187\" rel=\"nofollow noreferrer\">BPE</a>, and <a href=\"http://www.aclweb.org/anthology/D17-1023\" rel=\"nofollow noreferrer\">ngram2vec</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1444, "user_id": 2060205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7956be17c8a5f0be1dca0dbe1c0624de?s=128&d=identicon&r=PG", "display_name": "spadarian", "link": "https://stackoverflow.com/users/2060205/spadarian"}, "is_accepted": false, "score": 5, "last_activity_date": 1556292024, "creation_date": 1556292024, "answer_id": 55870600, "question_id": 48432300, "link": "https://stackoverflow.com/questions/48432300/using-keras-tokenizer-for-new-words-not-in-training-set/55870600#55870600", "title": "Using keras tokenizer for new words not in training set", "body": "<p>I would try a different approach. The main problem is that your <code>word_index</code> is based on your training data. Try this:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>#load glove embedding into a dict\nembeddings_index = {}\ndims = 100\nglove_data = 'glove.6B.'+str(dims)+'d.txt'\nf = open(glove_data)\nfor line in f:\n    values = line.split()\n    word = values[0]\n    value = np.asarray(values[1:], dtype='float32')\n    embeddings_index[word] = value\nf.close()\n\nword_index = {w: i for i, w in enumerate(embeddings_index.keys(), 1)}\n\n#create embedding matrix\nembedding_matrix = np.zeros((len(word_index) + 1, dims))\nfor word, i in word_index.items():\n    embedding_vector = embeddings_index.get(word)\n    if embedding_vector is not None:\n        # words not found in embedding index will be all-zeros.\n        embedding_matrix[i] = embedding_vector[:dims]\n</code></pre>\n\n<p>Now your <code>embedding_matrix</code> contains all the GloVe works.</p>\n\n<p>To tokenize your texts you can use something like this:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from keras.preprocessing.text import text_to_word_sequence\n\ndef texts_to_sequences(texts, word_index):\n    for text in texts:\n        tokens = text_to_word_sequence(text)\n        yield [word_index.get(w) for w in tokens if w in word_index]\n\nsequence = texts_to_sequences(['Test sentence'], word_index)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4525, "user_id": 38483, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1c15318427dd61dfbe1327d54bb807ce?s=128&d=identicon&r=PG", "display_name": "tonicebrian", "link": "https://stackoverflow.com/users/38483/tonicebrian"}, "is_accepted": false, "score": 10, "last_activity_date": 1566638523, "creation_date": 1566638523, "answer_id": 57636651, "question_id": 48432300, "link": "https://stackoverflow.com/questions/48432300/using-keras-tokenizer-for-new-words-not-in-training-set/57636651#57636651", "title": "Using keras tokenizer for new words not in training set", "body": "<p>In Keras Tokenizer you have the <strong>oov_token</strong> parameter. Just select your token and unknown words will have that one.</p>\n\n<pre><code>tokenizer_a = Tokenizer(oov_token=1)\ntokenizer_b = Tokenizer()\ntokenizer_a.fit_on_texts([\"Hello world\"])\ntokenizer_b.fit_on_texts([\"Hello world\"])\n</code></pre>\n\n<p>Outputs</p>\n\n<pre><code>In [26]: tokenizer_a.texts_to_sequences([\"Hello cruel world\"])\nOut[26]: [[2, 1, 3]]\n\nIn [27]: tokenizer_b.texts_to_sequences([\"Hello cruel world\"])\nOut[27]: [[1, 2]]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 89, "user_id": 11810876, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-XpVhgu6ujA0/AAAAAAAAAAI/AAAAAAAAAJ4/Ljc21IpcII8/photo.jpg?sz=128", "display_name": "mitra mirshafiee", "link": "https://stackoverflow.com/users/11810876/mitra-mirshafiee"}, "is_accepted": false, "score": 0, "last_activity_date": 1592552699, "last_edit_date": 1592552699, "creation_date": 1592546368, "answer_id": 62464182, "question_id": 48432300, "link": "https://stackoverflow.com/questions/48432300/using-keras-tokenizer-for-new-words-not-in-training-set/62464182#62464182", "title": "Using keras tokenizer for new words not in training set", "body": "<p>I had the same problem. In fact, Gloved covered about <strong><em>90 percent</em></strong> of my data before it was tokenized.</p>\n\n<p>what I did was that I created a list of the words from my text column in pandas dataframe and then created a dictionary of them with <code>enumerate</code>.</p>\n\n<p>(just like what tokenizer in Keras does but without changing the words and listing them by their frequency).</p>\n\n<p>Then I checked for words in Glove and added the vector in Glove to my initial weights matrix, whenever my word was in the Glove dictionary.</p>\n\n<p>I hope the explanation was clear. This is the code for further explanation:</p>\n\n<pre><code># creating a vocab of my data\nvocab_of_text = set(\" \".join(df_concat.text).lower().split())\n\n# creating a dictionary of vocab with index\nvocab_of_text = list(enumerate(vocab_of_text, 1))\n\n# putting the index first\nindexed_vocab = {k:v for v,k in dict(vocab_of_text).items()}\n</code></pre>\n\n<p>Then we use Glove for our weights matrix:</p>\n\n<pre><code># creating a matrix for initial weights\nvocab_matrix = np.zeros((len(indexed_vocab)+1,100))\n\n\n\n# searching for vactors in Glove\nfor i, word in indexed_vocab.items():\n    vector = embedding_index.get(word)\n    # embedding index is a dictionary of Glove\n    # with the shape of 'word': vecor\n\n    if vector is not None:\n        vocab_matrix[i] = vector\n</code></pre>\n\n<p>and then for making it ready for embedding:</p>\n\n<pre><code>def text_to_sequence(text, word_index):\n    tokens = text.lower().split()\n    return [word_index.get(token) for token in tokens if word_index.get(token) is not None]\n\n# giving ids\ndf_concat['sequences'] = df_concat.text.apply(lambda x : text_to_sequence(x, indexed_vocab))\n\nmax_len_seq = 34\n\n# padding\npadded = pad_sequences(df_concat['sequences'] ,\n              maxlen = max_len_seq, padding = 'post', \n              truncating = 'post')\n</code></pre>\n\n<p>also thanks to <a href=\"https://stackoverflow.com/users/2060205/spadarian\">@spadarian</a> for his answer. I could come up with this after reading and implementing his idea.part.</p>\n"}], "owner": {"reputation": 191, "user_id": 9264339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/179ce3edcb36131445e81e5d75f17811?s=128&d=identicon&r=PG&f=1", "display_name": "Nick Caussade", "link": "https://stackoverflow.com/users/9264339/nick-caussade"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7393, "favorite_count": 8, "answer_count": 3, "score": 19, "last_activity_date": 1592552699, "creation_date": 1516830923, "last_edit_date": 1516839706, "question_id": 48432300, "link": "https://stackoverflow.com/questions/48432300/using-keras-tokenizer-for-new-words-not-in-training-set", "title": "Using keras tokenizer for new words not in training set", "body": "<p>I'm currently using the Keras Tokenizer to create a word index and then matching that word index to the the imported GloVe dictionary to create an embedding matrix.  However, the problem I have is that this seems to defeat one of the advantages of using a word vector embedding since when using the trained model for predictions if it runs into a new word that's not in the tokenizer's word index it removes it from the sequence.  </p>\n\n<pre><code>#fit the tokenizer\ntokenizer = Tokenizer()\ntokenizer.fit_on_texts(texts)\nword_index = tokenizer.word_index\n\n#load glove embedding into a dict\nembeddings_index = {}\ndims = 100\nglove_data = 'glove.6B.'+str(dims)+'d.txt'\nf = open(glove_data)\nfor line in f:\n    values = line.split()\n    word = values[0]\n    value = np.asarray(values[1:], dtype='float32')\n    embeddings_index[word] = value\nf.close()\n\n#create embedding matrix\nembedding_matrix = np.zeros((len(word_index) + 1, dims))\nfor word, i in word_index.items():\n    embedding_vector = embeddings_index.get(word)\n    if embedding_vector is not None:\n        # words not found in embedding index will be all-zeros.\n        embedding_matrix[i] = embedding_vector[:dims]\n\n#Embedding layer:\nembedding_layer = Embedding(embedding_matrix.shape[0],\n                        embedding_matrix.shape[1],\n                        weights=[embedding_matrix],\n                        input_length=12)\n\n#then to make a prediction\nsequence = tokenizer.texts_to_sequences([\"Test sentence\"])\nmodel.predict(sequence)\n</code></pre>\n\n<p>So is there a way I can still use the tokenizer to transform sentences into an array and still use as much of the words GloVe dictionary as I can instead of only the ones that show up in my training text?  </p>\n\n<p>Edit: Upon further contemplation, I guess one option would be to add a text or texts to the texts that the tokenizer is fit on that includes a list of the keys in the glove dictionary. Though that might mess with some of the statistics if I want to use tf-idf. Is there either a preferable way to doing this or a different better approach?</p>\n"}, {"tags": ["python", "api", "python-requests"], "comments": [{"owner": {"reputation": 1341, "user_id": 6388994, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00d56f9550cf209ae3c4620eb1a31109?s=128&d=identicon&r=PG&f=1", "display_name": "Usernamenotfound", "link": "https://stackoverflow.com/users/6388994/usernamenotfound"}, "edited": false, "score": 0, "creation_date": 1516831310, "post_id": 48432275, "comment_id": 83855930, "body": "Is it possible that the second link doesn&#39;t have <code>something</code> in content?. <code>KeyError</code>s are usually when the key isn&#39;t present in a dict"}, {"owner": {"reputation": 1732, "user_id": 2719598, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/l9oGS.jpg?s=128&g=1", "display_name": "Kenny", "link": "https://stackoverflow.com/users/2719598/kenny"}, "reply_to_user": {"reputation": 1341, "user_id": 6388994, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00d56f9550cf209ae3c4620eb1a31109?s=128&d=identicon&r=PG&f=1", "display_name": "Usernamenotfound", "link": "https://stackoverflow.com/users/6388994/usernamenotfound"}, "edited": false, "score": 0, "creation_date": 1516831719, "post_id": 48432275, "comment_id": 83856126, "body": "I&#39;ve checked the response JSON and the second response and others after do, in fact, have the &#39;something&#39; key."}, {"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1516832670, "post_id": 48432275, "comment_id": 83856581, "body": "<i>The weird thing is that if I comment out the regex stuff, all the code works just fine</i> I don&#39;t see how this is possible.  That code comes after the error location so it can&#39;t possibly have any effect."}, {"owner": {"reputation": 1732, "user_id": 2719598, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/l9oGS.jpg?s=128&g=1", "display_name": "Kenny", "link": "https://stackoverflow.com/users/2719598/kenny"}, "edited": false, "score": 0, "creation_date": 1516836145, "post_id": 48432275, "comment_id": 83857953, "body": "I know, right? It&#39;s madness! I&#39;m thinking about maybe copying each json dict object to an array, then in a separate loop, running the regex stuff."}], "owner": {"reputation": 1732, "user_id": 2719598, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/l9oGS.jpg?s=128&g=1", "display_name": "Kenny", "link": "https://stackoverflow.com/users/2719598/kenny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 79, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1516830824, "creation_date": 1516830824, "question_id": 48432275, "link": "https://stackoverflow.com/questions/48432275/python3-requests-iteration-keyerror-on-second-iteration", "title": "Python3 - Requests - Iteration - KeyError on second iteration", "body": "<p><strong>Context / What I'm doing</strong></p>\n\n<p>Hello, I'm using the <a href=\"http://docs.python-requests.org/en/master/\" rel=\"nofollow noreferrer\">Requests</a> library to retrieve information from an API. I'm iterating over data in a <code>.csv</code> file then sending a request with a constructed url. </p>\n\n<p>I then want to take the <code>r.json()</code> and extract a specific piece of information. </p>\n\n<p>I then take that information and run some regex on it to break it up, which I'll then use to construct a new string. </p>\n\n<pre><code>with requests.Session() as s:\nfor i, (event) in enumerate(csv_data, start=1):\n    url = 'https://api.someurl.com/datapoint1' + datapoint1+ '/datapoint2/' + str(datapoint2)\n    headers = {'key': key, 'secret': secret}\n\n    r = s.get(url, headers = headers)\n\n    content = r.json()\n    print(content)\n    something = content[u'something']\n    print(something)\n\n    data1 = re.findall(r'pattern', something)[0]\n    data2 = re.findall(r'pattern', something)[0]\n\n    data_constructed = 'string' + data1+ 'string' + data2 + 'string'\n    print(data_constructed)\n</code></pre>\n\n<p><strong>Problem</strong></p>\n\n<p>The first iteration runs fine, and I see printed data on the screen, however on the second iteration of the loop, I get a <code>KeyError</code>. </p>\n\n<pre><code>something = content[u'something']\nKeyError: 'something'\n</code></pre>\n\n<p>The weird thing is that if I comment out the regex stuff, all the code works just fine: </p>\n\n<pre><code>with requests.Session() as s:\nfor i, (event) in enumerate(csv_data, start=1):\n    url = 'https://api.someurl.com/datapoint1' + datapoint1+ '/datapoint2/' + str(datapoint2)\n    headers = {'key': key, 'secret': secret}\n\n    r = s.get(url, headers = headers)\n\n    content = r.json()\n    print(content)\n    something = content[u'something']\n    print(something)\n\n    # data1 = re.findall(r'pattern', something)[0]\n    # data2 = re.findall(r'pattern', something)[0]\n\n    # data_constructed = 'string' + data1+ 'string' + data2 + 'string'\n    # print(data_constructed)\n</code></pre>\n\n<p>This is driving me nuts, I can't figure out why. I've tried doing <code>r = None</code> and <code>content = None</code> but that doesn't help. I can't determine why it's doing this? Thanks for any help. </p>\n"}, {"tags": ["python", "django", "macos", "operating-system", "pycharm"], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 5605586, "user_type": "registered", "profile_image": "https://graph.facebook.com/987472051309612/picture?type=large", "display_name": "F&#225;bio Marques", "link": "https://stackoverflow.com/users/5605586/f%c3%a1bio-marques"}, "edited": false, "score": 0, "creation_date": 1516832445, "post_id": 48432396, "comment_id": 83856485, "body": "I tryed and got it, but, now this erro:  line 11, in &lt;module&gt;     from PIL import Image ModuleNotFoundError: No module named &#39;PIL&#39;. Itryed install this dependence, but, other error: Could not find a version that satisfies the requirement PIL (from versions: ) No matching distribution found for PIL"}, {"owner": {"reputation": 387, "user_id": 7153979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66f4031e14c9e2432394d472bc83b3c7?s=128&d=identicon&r=PG&f=1", "display_name": "duddits", "link": "https://stackoverflow.com/users/7153979/duddits"}, "reply_to_user": {"reputation": 21, "user_id": 5605586, "user_type": "registered", "profile_image": "https://graph.facebook.com/987472051309612/picture?type=large", "display_name": "F&#225;bio Marques", "link": "https://stackoverflow.com/users/5605586/f%c3%a1bio-marques"}, "edited": false, "score": 0, "creation_date": 1516832740, "post_id": 48432396, "comment_id": 83856622, "body": "<code>pip install image</code>   then"}, {"owner": {"reputation": 387, "user_id": 7153979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66f4031e14c9e2432394d472bc83b3c7?s=128&d=identicon&r=PG&f=1", "display_name": "duddits", "link": "https://stackoverflow.com/users/7153979/duddits"}, "reply_to_user": {"reputation": 21, "user_id": 5605586, "user_type": "registered", "profile_image": "https://graph.facebook.com/987472051309612/picture?type=large", "display_name": "F&#225;bio Marques", "link": "https://stackoverflow.com/users/5605586/f%c3%a1bio-marques"}, "edited": false, "score": 0, "creation_date": 1516833260, "post_id": 48432396, "comment_id": 83856873, "body": "and <code>pip install Pillow</code>"}, {"owner": {"reputation": 37796, "user_id": 2650249, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/RBWDR.jpg?s=128&g=1", "display_name": "hoefling", "link": "https://stackoverflow.com/users/2650249/hoefling"}, "reply_to_user": {"reputation": 21, "user_id": 5605586, "user_type": "registered", "profile_image": "https://graph.facebook.com/987472051309612/picture?type=large", "display_name": "F&#225;bio Marques", "link": "https://stackoverflow.com/users/5605586/f%c3%a1bio-marques"}, "edited": false, "score": 0, "creation_date": 1516875803, "post_id": 48432396, "comment_id": 83872215, "body": "@F&#225;bioMarques: consider accepting the answer if your question was resolved."}], "tags": [], "owner": {"reputation": 387, "user_id": 7153979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66f4031e14c9e2432394d472bc83b3c7?s=128&d=identicon&r=PG&f=1", "display_name": "duddits", "link": "https://stackoverflow.com/users/7153979/duddits"}, "is_accepted": true, "score": 0, "last_activity_date": 1516831306, "creation_date": 1516831306, "answer_id": 48432396, "question_id": 48432241, "link": "https://stackoverflow.com/questions/48432241/troubles-modules-django-mas-os-pycharm/48432396#48432396", "title": "troubles modules Django mas os - pycharm", "body": "<p><code>brew install libmagic</code> should help.</p>\n"}], "owner": {"reputation": 21, "user_id": 5605586, "user_type": "registered", "profile_image": "https://graph.facebook.com/987472051309612/picture?type=large", "display_name": "F&#225;bio Marques", "link": "https://stackoverflow.com/users/5605586/f%c3%a1bio-marques"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 213, "favorite_count": 0, "accepted_answer_id": 48432396, "answer_count": 1, "score": 0, "last_activity_date": 1516831306, "creation_date": 1516830695, "question_id": 48432241, "link": "https://stackoverflow.com/questions/48432241/troubles-modules-django-mas-os-pycharm", "title": "troubles modules Django mas os - pycharm", "body": "<p>dears.</p>\n\n<p>I'm new in python/django. I just try Install and configure an enviroment from my ubuntu to my mac os. I've installed Python 3.6 , Django 2.0 and i'm using pycharm. When I tried run with \"runserver\", I got this error:</p>\n\n<pre><code>/Users/fabio/Documents/projects/lib/python3.6/site-packages/magic/__pycache__/_cffi__xa0d5132dx54cebdac.c:208:10: fatal error: 'magic.h' file not found\n#include &lt;magic.h&gt;\n         ^~~~~~~~~\n1 error generated.\n/Users/fabio/Documents/projects/lib/python3.6/site-packages/magic/__pycache__/_cffi__xa0d5132dx54cebdac.c:208:10: fatal error: 'magic.h' file not found\n#include &lt;magic.h&gt;\n         ^~~~~~~~~\n1 error generated.\nUnhandled exception in thread started by &lt;function check_errors.&lt;locals&gt;.wrapper at 0x10ea68268&gt;\nTraceback (most recent call last):\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/distutils/unixccompiler.py\", line 118, in _compile\n    extra_postargs)\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/distutils/ccompiler.py\", line 909, in spawn\n    spawn(cmd, dry_run=self.dry_run)\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/distutils/spawn.py\", line 36, in spawn\n    _spawn_posix(cmd, search_path, dry_run=dry_run)\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/distutils/spawn.py\", line 159, in _spawn_posix\n    % (cmd, exit_status))\ndistutils.errors.DistutilsExecError: command '/usr/bin/clang' failed with exit status 1\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/Users/fabio/Documents/projects/lib/python3.6/site-packages/cffi/ffiplatform.py\", line 55, in _build\n    dist.run_command('build_ext')\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/distutils/dist.py\", line 974, in run_command\n    cmd_obj.run()\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/distutils/command/build_ext.py\", line 339, in run\n    self.build_extensions()\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/distutils/command/build_ext.py\", line 448, in build_extensions\n    self._build_extensions_serial()\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/distutils/command/build_ext.py\", line 473, in _build_extensions_serial\n    self.build_extension(ext)\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/distutils/command/build_ext.py\", line 533, in build_extension\n    depends=ext.depends)\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/distutils/ccompiler.py\", line 574, in compile\n    self._compile(obj, src, ext, cc_args, extra_postargs, pp_opts)\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/distutils/unixccompiler.py\", line 120, in _compile\n    raise CompileError(msg)\ndistutils.errors.CompileError: command '/usr/bin/clang' failed with exit status 1\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/Users/fabio/Documents/projects/lib/python3.6/site-packages/django/utils/autoreload.py\", line 226, in wrapper\n    fn(*args, **kwargs)\n  File \"/Users/fabio/Documents/projects/lib/python3.6/site-packages/django/core/management/commands/runserver.py\", line 113, in inner_run\n    autoreload.raise_last_exception()\n  File \"/Users/fabio/Documents/projects/lib/python3.6/site-packages/django/utils/autoreload.py\", line 249, in raise_last_exception\n    six.reraise(*_exception)\n  File \"/Users/fabio/Documents/projects/lib/python3.6/site-packages/django/utils/six.py\", line 685, in reraise\n    raise value.with_traceback(tb)\n  File \"/Users/fabio/Documents/projects/lib/python3.6/site-packages/django/utils/autoreload.py\", line 226, in wrapper\n    fn(*args, **kwargs)\n  File \"/Users/fabio/Documents/projects/lib/python3.6/site-packages/django/__init__.py\", line 27, in setup\n    apps.populate(settings.INSTALLED_APPS)\n  File \"/Users/fabio/Documents/projects/lib/python3.6/site-packages/django/apps/registry.py\", line 108, in populate\n    app_config.import_models(all_models)\n  File \"/Users/fabio/Documents/projects/lib/python3.6/site-packages/django/apps/config.py\", line 199, in import_models\n    self.models_module = import_module(models_module_name)\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/importlib/__init__.py\", line 126, in import_module\n    return _bootstrap._gcd_import(name[level:], package, level)\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 994, in _gcd_import\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 971, in _find_and_load\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 955, in _find_and_load_unlocked\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 665, in _load_unlocked\n  File \"&lt;frozen importlib._bootstrap_external&gt;\", line 678, in exec_module\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 219, in _call_with_frames_removed\n  File \"/Users/fabio/Documents/projects/voiservices/source/sambalife/myauth/models.py\", line 12, in &lt;module&gt;\n    from utils.helper import send_email\n  File \"/Users/fabio/Documents/projects/voiservices/source/sambalife/utils/helper.py\", line 23, in &lt;module&gt;\n    from shipment.views import shipment_paypal_notification, shipment_paypal_notification_success\n  File \"/Users/fabio/Documents/projects/voiservices/source/sambalife/shipment/views.py\", line 35, in &lt;module&gt;\n    import magic\n  File \"/Users/fabio/Documents/projects/lib/python3.6/site-packages/magic/__init__.py\", line 1, in &lt;module&gt;\n    from . import ffi\n  File \"/Users/fabio/Documents/projects/lib/python3.6/site-packages/magic/ffi.py\", line 27, in &lt;module&gt;\n    ext_package=\"magic\")\n  File \"/Users/fabio/Documents/projects/lib/python3.6/site-packages/cffi/api.py\", line 437, in verify\n    lib = self.verifier.load_library()\n  File \"/Users/fabio/Documents/projects/lib/python3.6/site-packages/cffi/verifier.py\", line 113, in load_library\n    self._compile_module()\n  File \"/Users/fabio/Documents/projects/lib/python3.6/site-packages/cffi/verifier.py\", line 210, in _compile_module\n    outputfilename = ffiplatform.compile(tmpdir, self.get_extension())\n  File \"/Users/fabio/Documents/projects/lib/python3.6/site-packages/cffi/ffiplatform.py\", line 29, in compile\n    outputfilename = _build(tmpdir, ext, compiler_verbose)\n  File \"/Users/fabio/Documents/projects/lib/python3.6/site-packages/cffi/ffiplatform.py\", line 62, in _build\n    raise VerificationError('%s: %s' % (e.__class__.__name__, e))\ncffi.ffiplatform.VerificationError: CompileError: command '/usr/bin/clang' failed with exit status 1\n</code></pre>\n\n<p>I tried install that peckage, but i got this error interminal:</p>\n\n<pre><code>sh-3.2# python3.6 -m pip install magic\nCollecting magic\n  Could not find a version that satisfies the requirement magic (from versions: )\nNo matching distribution found for magic\n</code></pre>\n\n<p>Somebody help me please?</p>\n\n<p>Thank you!!!   </p>\n"}, {"tags": ["python", "statsmodels", "glm"], "answers": [{"comments": [{"owner": {"reputation": 81, "user_id": 8465696, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/WBeb4.jpg?s=128&g=1", "display_name": "kakashi10192020", "link": "https://stackoverflow.com/users/8465696/kakashi10192020"}, "edited": false, "score": 0, "creation_date": 1516894482, "post_id": 48433048, "comment_id": 83885021, "body": "&quot;use a splitter that guaranties that all variables&quot; -- where does this exist?"}, {"owner": {"reputation": 18838, "user_id": 333700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad13088a623822caf74e635a68a55eae?s=128&d=identicon&r=PG", "display_name": "Josef", "link": "https://stackoverflow.com/users/333700/josef"}, "reply_to_user": {"reputation": 81, "user_id": 8465696, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/WBeb4.jpg?s=128&g=1", "display_name": "kakashi10192020", "link": "https://stackoverflow.com/users/8465696/kakashi10192020"}, "edited": false, "score": 0, "creation_date": 1516912108, "post_id": 48433048, "comment_id": 83895637, "body": "It exists for some methods/models in R. There are essentially no splitters in statsmodels, scikit-learns has several but I don&#39;t know if they cover that case."}], "tags": [], "owner": {"reputation": 18838, "user_id": 333700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad13088a623822caf74e635a68a55eae?s=128&d=identicon&r=PG", "display_name": "Josef", "link": "https://stackoverflow.com/users/333700/josef"}, "is_accepted": true, "score": 2, "last_activity_date": 1516834472, "creation_date": 1516834472, "answer_id": 48433048, "question_id": 48432237, "link": "https://stackoverflow.com/questions/48432237/python-statsmodels-glm-formula-and-categorical-variables/48433048#48433048", "title": "Python statsmodels, glm formula and categorical variables", "body": "<p>One common way is to throw away those test-train splits that don't have every variable in each set. The more elaborate way of this is to use a splitter that guaranties that all variables are in each set.</p>\n\n<p>The main problem is that the parameters for the explanatory variables that do not have any observations in the training dataset are not identified, and so we cannot estimate them. If we leave them out, then they would be assumed to be zero, and will also not be included in the prediction with the test dataset.</p>\n\n<p>To get a split with the full list of variables even if there are no observation for a variable in a subset is to use patsy.dmatrices directly to create the design matrix for the <strong>full</strong> dataset, and split the design matrix and not the original data. This will provide a consistent parameterization and consistent columns for any subsets or partition of the dataset.</p>\n\n<p>patsy also allows the specification of the levels when creating the design matrix for categorical variables, but I never tried to include \"missing\" levels.</p>\n"}], "owner": {"reputation": 81, "user_id": 8465696, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/WBeb4.jpg?s=128&g=1", "display_name": "kakashi10192020", "link": "https://stackoverflow.com/users/8465696/kakashi10192020"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1613, "favorite_count": 0, "accepted_answer_id": 48433048, "answer_count": 1, "score": 0, "last_activity_date": 1516834472, "creation_date": 1516830690, "question_id": 48432237, "link": "https://stackoverflow.com/questions/48432237/python-statsmodels-glm-formula-and-categorical-variables", "title": "Python statsmodels, glm formula and categorical variables", "body": "<p>So let's suppose that I have a dataframe <code>df</code> and in this dataframe I have the columns <code>O, A, B, D, X, Y, Z</code>. <code>Exo</code> is a list of the name of the predictor variables, which are <code>A, B, D, X, Y, Z</code>. Now the first four columns are real variables and the last three are categorical variables such that</p>\n\n<ul>\n<li><p>For any x in X, x is equal to exactly one of the following elements in the list [\"RED\", \"ORANGE\", \"YELLOW\", \"GREEN\", \"BLUE\", \"INDIGO\", \"VIOLET\"].</p></li>\n<li><p>For any y in Y, y is equal to exactly one of the following elements in the list [\"DO\", \"RE\", \"MI\", \"FA\", \"SO\", \"LA\", \"TI\"].</p></li>\n<li><p>For any z in Z, z is equal to exactly one of the following elements in the list [\"LUST\", \"GLUTTONY\", \"GREED\", \"SLOTH\", \"WRATH\", \"ENVY\", \"PRIDE\"]</p></li>\n</ul>\n\n<p>So I sample one hundred elements of <code>df</code> and split the sampled set into train and test sets. Then I decide to write</p>\n\n<pre><code>mod = smf.glm(formula=\"O ~ A + B + D + C(X) + C(Y) + C(Z)\",\n              data=train,\n              family=sm.families.Tweedie(var_power=1.5))\nmod = mod.fit()\nresult = mod.predict(exog=test[exo])\n</code></pre>\n\n<p>But wait! It turns out that the possible value \"yellow\" doesn't occur in the training set but does occur in the test set, so <code>smf.glm</code> can't use induction. How do I prevent this kind of error from occurring?</p>\n"}, {"tags": ["python", "list-comprehension"], "comments": [{"owner": {"reputation": 4426, "user_id": 4099813, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d53c6c37d906b105371aeff8bbe0603?s=128&d=identicon&r=PG&f=1", "display_name": "MooingRawr", "link": "https://stackoverflow.com/users/4099813/mooingrawr"}, "edited": false, "score": 0, "creation_date": 1516830790, "post_id": 48432224, "comment_id": 83855641, "body": "You have a tuple not a list, second can you give a clear example of what you have as input and what you want as output ?"}, {"owner": {"reputation": 7081, "user_id": 789671, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/feaaeb3d021966d84450cbfb24b1824a?s=128&d=identicon&r=PG", "display_name": "glibdud", "link": "https://stackoverflow.com/users/789671/glibdud"}, "edited": false, "score": 0, "creation_date": 1516830904, "post_id": 48432224, "comment_id": 83855703, "body": "Are you sure the downstream won&#39;t parse it properly if you enclose the field in double quotes?"}, {"owner": {"reputation": 879, "user_id": 1873403, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/665435b01862e900d658687a0b516ab2?s=128&d=identicon&r=PG", "display_name": "Brad Davis", "link": "https://stackoverflow.com/users/1873403/brad-davis"}, "edited": false, "score": 0, "creation_date": 1516830953, "post_id": 48432224, "comment_id": 83855730, "body": "I just checked and I&#39;m sure it won&#39;t parse properly if I enclose the field in double quotes."}, {"owner": {"reputation": 32227, "user_id": 2337736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77aacbcecad375ad6d8c45cfe43afbc5?s=128&d=identicon&r=PG", "display_name": "Peter DeGlopper", "link": "https://stackoverflow.com/users/2337736/peter-deglopper"}, "edited": false, "score": 3, "creation_date": 1516830980, "post_id": 48432224, "comment_id": 83855742, "body": "If you&#39;re outputting to a <code>.csv</code>, are you using Python&#39;s csv module? If you set its <code>quoting</code> attribute appropriately it should take care of this for you - by default it&#39;s set to a quoting behavior that will quote strings containing the delimiter, but if you set it to <code>QUOTE_NONE</code> and have an escape character set it&#39;ll use that."}, {"owner": {"reputation": 879, "user_id": 1873403, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/665435b01862e900d658687a0b516ab2?s=128&d=identicon&r=PG", "display_name": "Brad Davis", "link": "https://stackoverflow.com/users/1873403/brad-davis"}, "edited": false, "score": 0, "creation_date": 1516831145, "post_id": 48432224, "comment_id": 83855842, "body": "No, I&#39;ll try that."}, {"owner": {"reputation": 879, "user_id": 1873403, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/665435b01862e900d658687a0b516ab2?s=128&d=identicon&r=PG", "display_name": "Brad Davis", "link": "https://stackoverflow.com/users/1873403/brad-davis"}, "edited": false, "score": 0, "creation_date": 1516831231, "post_id": 48432224, "comment_id": 83855901, "body": "Actually, I misidentified the problem - it&#39;s not that field, it&#39;s another one.  I&#39;ll update the question."}, {"owner": {"reputation": 37256, "user_id": 736308, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/o5EqQ.jpg?s=128&g=1", "display_name": "cdarke", "link": "https://stackoverflow.com/users/736308/cdarke"}, "edited": false, "score": 0, "creation_date": 1516831276, "post_id": 48432224, "comment_id": 83855920, "body": "Is it only one specific field then?  Can it be identified by position or content?"}, {"owner": {"reputation": 32007, "user_id": 5858851, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yXFCX.jpg?s=128&g=1", "display_name": "pault", "link": "https://stackoverflow.com/users/5858851/pault"}, "edited": false, "score": 0, "creation_date": 1516831348, "post_id": 48432224, "comment_id": 83855952, "body": "You could also do: <code>line = map(lambda x: str.replace(x, &#39;&quot;&#39;, &#39;\\&quot;&#39;) if isinstance(x, str) else x, line)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 4426, "user_id": 4099813, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d53c6c37d906b105371aeff8bbe0603?s=128&d=identicon&r=PG&f=1", "display_name": "MooingRawr", "link": "https://stackoverflow.com/users/4099813/mooingrawr"}, "edited": false, "score": 0, "creation_date": 1516831816, "post_id": 48432452, "comment_id": 83856172, "body": "please format your code next time with 4 spaces in front of your code lines. If you wish to you can just highlight your code and hit <code>ctrl</code>+<code>k</code>"}], "tags": [], "owner": {"reputation": 146, "user_id": 6531051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98f2a4f097bba47916d5c68c040f2347?s=128&d=identicon&r=PG&f=1", "display_name": "Yikang Luo", "link": "https://stackoverflow.com/users/6531051/yikang-luo"}, "is_accepted": true, "score": 3, "last_activity_date": 1516831795, "last_edit_date": 1516831795, "creation_date": 1516831498, "answer_id": 48432452, "question_id": 48432224, "link": "https://stackoverflow.com/questions/48432224/how-can-i-use-list-comprehension-to-replace-a-comma-with-an-escaped-comma-in-a-l/48432452#48432452", "title": "How can I use list comprehension to replace a comma with an escaped comma in a list that contains strings and numbers", "body": "<p>I think list comprehension works the best for apply a rule for every element; if you know which single string you would like to change, why can't you just change that single one?</p>\n\n<p>If you want to change all comma into escaped comma, probably try this out:</p>\n\n<pre><code>strtuple = ('', 'i_like_cats', 'I like, cookies', 10319708, \"* / Item ID='10319708'\", 'i_wish_was_an_oscar_meyer_weiner',\n0.101021321)\nconverted_strlist = [i.replace(',', '\\\\,') if isinstance(i, str) else i for i in strtuple]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1840, "user_id": 1917721, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/TgopK.png?s=128&g=1", "display_name": "HFBrowning", "link": "https://stackoverflow.com/users/1917721/hfbrowning"}, "edited": false, "score": 1, "creation_date": 1516832226, "post_id": 48432583, "comment_id": 83856356, "body": "That verification is already present verbatim in the accepted answer (see the last line of their code)."}], "tags": [], "owner": {"reputation": 66, "user_id": 1371420, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08a2966717aa06b044814682c48725b8?s=128&d=identicon&r=PG", "display_name": "fraczles", "link": "https://stackoverflow.com/users/1371420/fraczles"}, "is_accepted": false, "score": 0, "last_activity_date": 1516832046, "creation_date": 1516832046, "answer_id": 48432583, "question_id": 48432224, "link": "https://stackoverflow.com/questions/48432224/how-can-i-use-list-comprehension-to-replace-a-comma-with-an-escaped-comma-in-a-l/48432583#48432583", "title": "How can I use list comprehension to replace a comma with an escaped comma in a list that contains strings and numbers", "body": "<p>You might want to verify an element is a <code>str</code> instance before calling replace on it.</p>\n\n<p>Something like:</p>\n\n<pre><code>    data = (\n        '',\n        'i_like_cats',\n        'I like, cookies',\n        10319708L,\n        \"* / Item ID='10319708'\",\n        'i_wish_was_an_oscar_meyer_weiner',\n        0.101021321,\n    )\n\n    line = [\n        x.replace(\",\", \"\\,\") if isinstance(x, str) else x for x in data\n    ]\n</code></pre>\n"}], "owner": {"reputation": 879, "user_id": 1873403, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/665435b01862e900d658687a0b516ab2?s=128&d=identicon&r=PG", "display_name": "Brad Davis", "link": "https://stackoverflow.com/users/1873403/brad-davis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 495, "favorite_count": 0, "accepted_answer_id": 48432452, "answer_count": 2, "score": 3, "last_activity_date": 1516832046, "creation_date": 1516830662, "last_edit_date": 1516830911, "question_id": 48432224, "link": "https://stackoverflow.com/questions/48432224/how-can-i-use-list-comprehension-to-replace-a-comma-with-an-escaped-comma-in-a-l", "title": "How can I use list comprehension to replace a comma with an escaped comma in a list that contains strings and numbers", "body": "<p>I have a tuple that contains elements that are both strings and numbers, and I am trying to replace a comma that exists in one of the elements of the tuple with an escaped comma, e.g. the input looks like the following</p>\n\n<pre><code>('', 'i_like_cats', 'I like, cookies', 10319708L, \"* / Item ID='10319708'\", 'i_wish_was_an_oscar_meyer_weiner',\n0.101021321)\n</code></pre>\n\n<p>and what I want as output is </p>\n\n<pre><code>('', 'i_like_cats', 'I like\\, cookies', 10319708L, \"* / Item ID='10319708'\", 'i_wish_was_an_oscar_meyer_weiner',\n0.101021321)\n</code></pre>\n\n<p>What I want to do is replace the , after like with /, because I'm outputting the content to a csv file, so when the next step of the pipeline reads the file it splits the file at the comma between 'like' and 'cookies' even though I don't want it to.  I am unable to modify the code of the downstream part of the pipeline so I can't switch to something like a semicolon or tab delimited file, and I can't change.</p>\n\n<p>What I've tried to do is use list comprehension to solve this as follows</p>\n\n<pre><code>line = map(lambda x: str.replace(x, '\"', '\\\"'), line)\n</code></pre>\n\n<p>but that generates a type error indicating that replace requires a string object but it received a long. </p>\n\n<p>The only solution I can think of is to break the tuple down into it's individual elements, modify the element that contains the comma, and then build a new tuple and append each of the elements back on, but it seems like there has to be a more pythonic way to do that.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 4426, "user_id": 4099813, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d53c6c37d906b105371aeff8bbe0603?s=128&d=identicon&r=PG&f=1", "display_name": "MooingRawr", "link": "https://stackoverflow.com/users/4099813/mooingrawr"}, "edited": false, "score": 0, "creation_date": 1516830719, "post_id": 48432211, "comment_id": 83855608, "body": "Can you fix your code? Don&#39;t use <code>&gt;&gt;&gt;</code> for code blocks, instead use 4 spaces in front of your lines of code. An easy way to format your code is to highlight your code and hit <code>ctrl</code>+<code>k</code>"}, {"owner": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "edited": false, "score": 0, "creation_date": 1516830812, "post_id": 48432211, "comment_id": 83855655, "body": "Which one is line 3? <code>print b,</code> or <code>a, b = a + 1, b * (a+1)</code>?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9264468"}, "edited": false, "score": 0, "creation_date": 1516830936, "post_id": 48432211, "comment_id": 83855718, "body": "Line 3 is the &quot;print b,&quot; I just don&#39;t know how to change it so it only prints out 1 once in the sequence of numbers below. And thanks fro the tip!!!!!!!!!!!!!!!!"}], "answers": [{"comments": [{"owner": {"reputation": 4426, "user_id": 4099813, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d53c6c37d906b105371aeff8bbe0603?s=128&d=identicon&r=PG&f=1", "display_name": "MooingRawr", "link": "https://stackoverflow.com/users/4099813/mooingrawr"}, "edited": false, "score": 0, "creation_date": 1516831883, "post_id": 48432310, "comment_id": 83856200, "body": "If your question is answered please consider accepting an answer to close the question."}], "tags": [], "owner": {"reputation": 4426, "user_id": 4099813, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d53c6c37d906b105371aeff8bbe0603?s=128&d=identicon&r=PG&f=1", "display_name": "MooingRawr", "link": "https://stackoverflow.com/users/4099813/mooingrawr"}, "is_accepted": true, "score": 1, "last_activity_date": 1516830956, "creation_date": 1516830956, "answer_id": 48432310, "question_id": 48432211, "link": "https://stackoverflow.com/questions/48432211/factorial-number-printing/48432310#48432310", "title": "Factorial number printing", "body": "<pre><code>a, b = 0, 1\nwhile a &lt; 19:\n    if a: print b,\n    a, b = a + 1, b * (a+1)\n</code></pre>\n\n<p>Use a in-line if statement to check if a is <code>1</code>. If it's <code>1</code> then you know that you already went through the loop at least once.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9264468"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 222, "favorite_count": 0, "accepted_answer_id": 48432310, "answer_count": 1, "score": 0, "last_activity_date": 1516831609, "creation_date": 1516830620, "last_edit_date": 1516831006, "question_id": 48432211, "link": "https://stackoverflow.com/questions/48432211/factorial-number-printing", "title": "Factorial number printing", "body": "<p>I'm a newbie at python. I started it not long a ago as a hobby after uni lecture hours. </p>\n\n<p>I found this exercise ( forgot where I got it from now) to do which is to print out the factorial numbers. </p>\n\n<p>Which I did. But, problem is that I'm tasked to manipulate line 3 so it only prints out the number 1 once at the start of the sequence and I'm having trouble with that. </p>\n\n<p>Please can any help? :) </p>\n\n<p>In advance sorry if the question wasn't worded as good as it could have been.</p>\n\n<pre><code>a, b = 0, 1\nwhile a &lt; 19:\n    print b,\n    a, b = a + 1, b * (a+1)\n</code></pre>\n\n<p>Result:</p>\n\n<blockquote>\n  <p>1 1 2 6 24 120 720 5040 40320 362880 3628800 39916800 479001600 6227020800 87178291200 1307674368000 20922789888000 355687428096000 6402373705728000</p>\n</blockquote>\n"}, {"tags": ["javascript", "python"], "comments": [{"owner": {"reputation": 146, "user_id": 6531051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98f2a4f097bba47916d5c68c040f2347?s=128&d=identicon&r=PG&f=1", "display_name": "Yikang Luo", "link": "https://stackoverflow.com/users/6531051/yikang-luo"}, "edited": false, "score": 0, "creation_date": 1516830760, "post_id": 48432203, "comment_id": 83855626, "body": "try <code>subprocess</code> maybe? related: <a href=\"https://stackoverflow.com/questions/31464354/running-java-main-class-using-subprocess-popen-in-python\" title=\"running java main class using subprocess popen in python\">stackoverflow.com/questions/31464354/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 9127914, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EJNkS.jpg?s=128&g=1", "display_name": "fusemoth", "link": "https://stackoverflow.com/users/9127914/fusemoth"}, "edited": false, "score": 0, "creation_date": 1516836825, "post_id": 48432332, "comment_id": 83858148, "body": "Alright I figured it out. The arguments are stored in process.argv. Thanks"}], "tags": [], "owner": {"reputation": 279, "user_id": 2591551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d05e9c453e82590beb1484edd10ac0ab?s=128&d=identicon&r=PG", "display_name": "Stefan Seibert", "link": "https://stackoverflow.com/users/2591551/stefan-seibert"}, "is_accepted": true, "score": 2, "last_activity_date": 1516832892, "last_edit_date": 1516832892, "creation_date": 1516831056, "answer_id": 48432332, "question_id": 48432203, "link": "https://stackoverflow.com/questions/48432203/how-to-execute-javascript-code-from-python-with-arguments/48432332#48432332", "title": "How to execute javascript code from python with arguments", "body": "<p>As the documentation reveals, yes it is possible:</p>\n\n<blockquote>\n  <p>The execute_js() function runs the execute() function on a Node.js script file. Instead of passing the command to be executed as the first parameter, pass a Node.js script filepath as the first parameter and any additional command arguments as the second parameter (optional). The executed command is concatenated from these strings with the following code:</p>\n</blockquote>\n\n<pre><code>if len(arguments) &gt; 0:\n    js_command = 'node ' + file_path + \" \" + arguments\nelse:\n    js_command = 'node ' + file_path\n</code></pre>\n\n<blockquote>\n  <p>Parameters:<br>\n  file_path (string) - the filepath to the Node.js script that is to be executed by the shell</p>\n  \n  <p>arguments (string) - optional, any additional arguments to be used with your command</p>\n</blockquote>\n\n<p>Documentation:\n<a href=\"http://naked.readthedocs.io/toolshed_shell.html#Naked.toolshed.shell.execute_js\" rel=\"nofollow noreferrer\">http://naked.readthedocs.io/toolshed_shell.html#Naked.toolshed.shell.execute_js</a></p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 13317381, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6516cf29d0660c6ec6434479a0afdb67?s=128&d=identicon&r=PG&f=1", "display_name": "Dhiraj Goyal", "link": "https://stackoverflow.com/users/13317381/dhiraj-goyal"}, "is_accepted": false, "score": 0, "last_activity_date": 1586923570, "creation_date": 1586923570, "answer_id": 61221149, "question_id": 48432203, "link": "https://stackoverflow.com/questions/48432203/how-to-execute-javascript-code-from-python-with-arguments/61221149#61221149", "title": "How to execute javascript code from python with arguments", "body": "<p>if you want to pass an argument(variable) in execute_js('file.js', arg1) it create a problem like value I received in node js command argument is  \"NaN\"\nso to overcome this problem I tried below thing which works fine for me:</p>\n\n<p>First make a string need to pass in execute_js like:</p>\n\n<p>node_cmd = \"file.js\" + \" \" + str(variable)\nnow we can pass node_cmd in execute_js as below:</p>\n\n<p>execute_js(\"node_cmd\")</p>\n"}], "owner": {"reputation": 13, "user_id": 9127914, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EJNkS.jpg?s=128&g=1", "display_name": "fusemoth", "link": "https://stackoverflow.com/users/9127914/fusemoth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3480, "favorite_count": 0, "accepted_answer_id": 48432332, "answer_count": 2, "score": 1, "last_activity_date": 1586923570, "creation_date": 1516830598, "question_id": 48432203, "link": "https://stackoverflow.com/questions/48432203/how-to-execute-javascript-code-from-python-with-arguments", "title": "How to execute javascript code from python with arguments", "body": "<p>Executing javascript from python using Naked.toolshed.shell:\n<a href=\"https://stackoverflow.com/questions/38622385/how-can-i-execute-javascript-code-from-python\">How can I execute JavaScript code from Python?</a>\nAnswered my question fine, But is there any way to do this AND pass an argument through to be executed? like</p>\n\n<pre><code>from Naked.toolshed.shell import execute_js\n\nresponse = execute_js('file.js', arg1) # arguments to pass\nif response.exitcode == 0:\n  print(response.stdout)\nelse:\n  sys.stderr.write(response.stderr)\n</code></pre>\n\n<p>while file.js may look something like</p>\n\n<pre><code>var x = 10;\nx = 10 - arg1; // to pass argument here\nconsole.log(x);\nfunction greet() {\n      console.log(\"Hello World!\");\n}\ngreet()\n</code></pre>\n\n<p>Is there a way to accomplish this?</p>\n"}, {"tags": ["python", "django", "django-simple-history"], "answers": [{"comments": [{"owner": {"reputation": 76, "user_id": 7892175, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6756f98085779ff3b5b6570e03081a76?s=128&d=identicon&r=PG&f=1", "display_name": "Wakun", "link": "https://stackoverflow.com/users/7892175/wakun"}, "edited": false, "score": 0, "creation_date": 1516832452, "post_id": 48432543, "comment_id": 83856489, "body": "Ok, but I want to get balance value as it existed on date and time and debt on date. Assume balance value is changing every hour, and debt is changing once a day. It all must be done with the same instance of model, because I have plenty of them, and then represent it in template"}, {"owner": {"reputation": 2759, "user_id": 2217516, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/a535610ddfa849990fc141d4ac5600fe?s=128&d=identicon&r=PG", "display_name": "Robert Townley", "link": "https://stackoverflow.com/users/2217516/robert-townley"}, "reply_to_user": {"reputation": 76, "user_id": 7892175, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6756f98085779ff3b5b6570e03081a76?s=128&d=identicon&r=PG&f=1", "display_name": "Wakun", "link": "https://stackoverflow.com/users/7892175/wakun"}, "edited": false, "score": 0, "creation_date": 1516832831, "post_id": 48432543, "comment_id": 83856667, "body": "You should be able to grab any value you want from the HistoricalAccount object. You can do inst.debt and save that to a variable, you can do inst.balance and save that to a variable, or you could pass the whole inst object into a template and then do &quot;Your balance at {{ date }} was {{ inst.balance}} and your debt was {{ inst.debt}}"}, {"owner": {"reputation": 76, "user_id": 7892175, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6756f98085779ff3b5b6570e03081a76?s=128&d=identicon&r=PG&f=1", "display_name": "Wakun", "link": "https://stackoverflow.com/users/7892175/wakun"}, "edited": false, "score": 0, "creation_date": 1516833286, "post_id": 48432543, "comment_id": 83856883, "body": "This works as I want only for debt, but I get balance as it existed on that date and time, it must be the most recent of that day. I can call Account.history.most_recent(), then I get correct value, but it must be done in one instance only for that field, rest will be history.as_of(&#39;&#39;&#39;some date and time for example&quot;)"}], "tags": [], "owner": {"reputation": 2759, "user_id": 2217516, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/a535610ddfa849990fc141d4ac5600fe?s=128&d=identicon&r=PG", "display_name": "Robert Townley", "link": "https://stackoverflow.com/users/2217516/robert-townley"}, "is_accepted": true, "score": 1, "last_activity_date": 1516831871, "creation_date": 1516831871, "answer_id": 48432543, "question_id": 48432195, "link": "https://stackoverflow.com/questions/48432195/django-model-history-by-date-and-datetime/48432543#48432543", "title": "Django model history by date and datetime", "body": "<p>The history ORM will return back a model based off of the one you submitted, as it existed at that point in time.</p>\n\n<pre><code>account = Account.objects.create(balance=1, debt=1)\naccount.save()\nhistory_obj = account.history.last()\nprint(history_obj.debt)  # returns 1\n\naccount.debt = 222\naccount.save()\nnew_history_obj = account.history.last()\nprint(new_history_obj.debt)  # returns 222\n</code></pre>\n\n<p>Assuming you're using the Account.history.as_of() method to return the history object that you intend to be reading from, you could do this:</p>\n\n<pre><code>yesterday = datetime.datetime.now() - datetime.timedelta(days=1)\nhistory_obj = Account.history.as_of(yesterday)\nprint(history_obj.debt)  # returns not the current debt, but the debt as-of yesterday\n</code></pre>\n\n<p>Unless I'm misunderstanding what you're hoping to accomplish, you could just do this with what you have in your question:</p>\n\n<pre><code>inst = Account.history.as_of(datetime.datetime.now().date)\nprint(inst.debt)\n</code></pre>\n"}], "owner": {"reputation": 76, "user_id": 7892175, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6756f98085779ff3b5b6570e03081a76?s=128&d=identicon&r=PG&f=1", "display_name": "Wakun", "link": "https://stackoverflow.com/users/7892175/wakun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 837, "favorite_count": 0, "accepted_answer_id": 48432543, "answer_count": 1, "score": 0, "last_activity_date": 1516832106, "creation_date": 1516830573, "last_edit_date": 1516832106, "question_id": 48432195, "link": "https://stackoverflow.com/questions/48432195/django-model-history-by-date-and-datetime", "title": "Django model history by date and datetime", "body": "<p>Assume I have model like this:</p>\n\n<pre><code>class Account(models.Model):\n    balance = models.IntegerField()\n    debt = models.IntegerField()\n    history = HistoricalRecords()\n</code></pre>\n\n<p>I'm using django-simple-history to get instance of the model as it would have existed at the provided date and time:</p>\n\n<pre><code>inst = Account.history.as_of(datetime.datetime.now().date)\n</code></pre>\n\n<p>It's working fine, but I want to get instance where balance field is represented as it would have existed at the provided date and time, and then debt field will be most recent of that date. I don't know if this is possible, didn't find anything about that.</p>\n"}, {"tags": ["python", "pandas", "numpy", "rank", "percentile"], "answers": [{"comments": [{"owner": {"reputation": 52286, "user_id": 850781, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/pwfBo.jpg?s=128&g=1", "display_name": "sds", "link": "https://stackoverflow.com/users/850781/sds"}, "edited": false, "score": 0, "creation_date": 1516832182, "post_id": 48432352, "comment_id": 83856334, "body": "this seems to rely on the test scores being sorted. I would rather avoid that if possible."}], "tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": false, "score": 2, "last_activity_date": 1516831141, "creation_date": 1516831141, "answer_id": 48432352, "question_id": 48432153, "link": "https://stackoverflow.com/questions/48432153/compute-percentile-rank-relative-to-a-given-population/48432352#48432352", "title": "Compute percentile rank relative to a given population", "body": "<p>I think <code>pd.cut</code> can do that </p>\n\n<pre><code>s=pd.Series([-np.inf,0.3, 0.5, 0.7])\npd.cut(v,s,right=False).value_counts().cumsum()/len(v)\nOut[702]: \n[-inf, 0.3)    0.37\n[0.3, 0.5)     0.54\n[0.5, 0.7)     0.71\ndtype: float64\n</code></pre>\n\n<p>Result from your function </p>\n\n<pre><code>np.vectorize(percentile_rank)(np.array([0.3, 0.5, 0.7]))\nOut[696]: array([0.37, 0.54, 0.71])\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 52286, "user_id": 850781, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/pwfBo.jpg?s=128&g=1", "display_name": "sds", "link": "https://stackoverflow.com/users/850781/sds"}, "edited": false, "score": 0, "creation_date": 1516831836, "post_id": 48432367, "comment_id": 83856181, "body": "I think this is the <i>inverse</i> of the function I am looking for."}], "tags": [], "owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "is_accepted": false, "score": 2, "last_activity_date": 1516831189, "creation_date": 1516831189, "answer_id": 48432367, "question_id": 48432153, "link": "https://stackoverflow.com/questions/48432153/compute-percentile-rank-relative-to-a-given-population/48432367#48432367", "title": "Compute percentile rank relative to a given population", "body": "<p>You can use <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.quantile.html#pandas-series-quantile\" rel=\"nofollow noreferrer\"><code>quantile</code></a>:</p>\n\n<pre><code>np.random.seed(123)\nv=np.random.rand(100)\n\ns = pd.Series(v)\narr = np.array([0.3,0.5,0.7])\n\ns.quantile(arr)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>0.3    0.352177\n0.5    0.506130\n0.7    0.644875\ndtype: float64\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 52286, "user_id": 850781, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/pwfBo.jpg?s=128&g=1", "display_name": "sds", "link": "https://stackoverflow.com/users/850781/sds"}, "edited": false, "score": 0, "creation_date": 1516832121, "post_id": 48432402, "comment_id": 83856302, "body": "when both <code>v</code> and <code>x</code> are <code>Series</code> (columns in a <code>DataFrame</code>), I get <code>ValueError: Lengths must match to compare</code>."}, {"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "reply_to_user": {"reputation": 52286, "user_id": 850781, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/pwfBo.jpg?s=128&g=1", "display_name": "sds", "link": "https://stackoverflow.com/users/850781/sds"}, "edited": false, "score": 1, "creation_date": 1516832189, "post_id": 48432402, "comment_id": 83856338, "body": "@sds, in this case you can do it this way: <code>(v.values&lt;x.values[:,None]).mean(axis=1)</code>"}], "tags": [], "owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "is_accepted": true, "score": 4, "last_activity_date": 1516831705, "last_edit_date": 1516831705, "creation_date": 1516831321, "answer_id": 48432402, "question_id": 48432153, "link": "https://stackoverflow.com/questions/48432153/compute-percentile-rank-relative-to-a-given-population/48432402#48432402", "title": "Compute percentile rank relative to a given population", "body": "<p>Setup:</p>\n\n<pre><code>In [62]: v=np.random.rand(100)\n\nIn [63]: x=np.array([0.3, 0.4, 0.7])\n</code></pre>\n\n<p>Using Numpy broadcasting:</p>\n\n<pre><code>In [64]: (v&lt;x[:,None]).mean(axis=1)\nOut[64]: array([ 0.18,  0.28,  0.6 ])\n</code></pre>\n\n<p>Check:</p>\n\n<pre><code>In [67]: percentile_rank(0.3)\nOut[67]: 0.17999999999999999\n\nIn [68]: percentile_rank(0.4)\nOut[68]: 0.28000000000000003\n\nIn [69]: percentile_rank(0.7)\nOut[69]: 0.59999999999999998\n</code></pre>\n"}], "owner": {"reputation": 52286, "user_id": 850781, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/pwfBo.jpg?s=128&g=1", "display_name": "sds", "link": "https://stackoverflow.com/users/850781/sds"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3677, "favorite_count": 2, "accepted_answer_id": 48432402, "answer_count": 3, "score": 7, "last_activity_date": 1516831705, "creation_date": 1516830372, "last_edit_date": 1516830711, "question_id": 48432153, "link": "https://stackoverflow.com/questions/48432153/compute-percentile-rank-relative-to-a-given-population", "title": "Compute percentile rank relative to a given population", "body": "<p>I have \"reference population\" (say, <code>v=np.random.rand(100)</code>) and I want to compute percentile ranks for a given set (say, <code>np.array([0.3, 0.5, 0.7])</code>).</p>\n\n<p>It is easy to compute one by one:</p>\n\n<pre><code>def percentile_rank(x):\n    return (v&lt;x).sum() / len(v)\npercentile_rank(0.4)\n=&gt; 0.4\n</code></pre>\n\n<p>(actually, there is an ootb <a href=\"https://docs.scipy.org/doc/scipy-0.10.0/reference/generated/scipy.stats.percentileofscore.html\" rel=\"noreferrer\"><code>scipy.stats.percentileofscore</code></a> - but it does <em>not</em> work on vectors).</p>\n\n<pre><code>np.vectorize(percentile_rank)(np.array([0.3, 0.5, 0.7]))\n=&gt; [ 0.33  0.48  0.71]\n</code></pre>\n\n<p>This produces the expected results, but I have a feeling that there should be a built-in for this.</p>\n\n<p>I can also cheat:</p>\n\n<pre><code>pd.concat([pd.Series([0.3, 0.5, 0.7]),pd.Series(v)],ignore_index=True).rank(pct=True).loc[0:2]\n\n0    0.330097\n1    0.485437\n2    0.718447\n</code></pre>\n\n<p>This is bad on two counts:</p>\n\n<ol>\n<li>I don't want the test data <code>[0.3, 0.5, 0.7]</code> to be a part of the ranking.</li>\n<li>I don't want to waste time computing ranks for the reference population.</li>\n</ol>\n\n<p>So, what is the <em>idiomatic</em> way to accomplish this?</p>\n"}, {"tags": ["python", "computer-science"], "comments": [{"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1516830253, "post_id": 48432090, "comment_id": 83855375, "body": "Python <i>always</i> passes by reference."}, {"owner": {"reputation": 15007, "user_id": 389289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33eab2fa999a20910a29e4a2299bc174?s=128&d=identicon&r=PG&f=1", "display_name": "zvone", "link": "https://stackoverflow.com/users/389289/zvone"}, "edited": false, "score": 1, "creation_date": 1516830397, "post_id": 48432090, "comment_id": 83855437, "body": "The difference between passing by reference and passing by value is that passing by value copies the whole object. So, copy the object."}, {"owner": {"reputation": 37256, "user_id": 736308, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/o5EqQ.jpg?s=128&g=1", "display_name": "cdarke", "link": "https://stackoverflow.com/users/736308/cdarke"}, "edited": false, "score": 0, "creation_date": 1516830673, "post_id": 48432090, "comment_id": 83855585, "body": "You could do the copy on the call:  <code>L, U = LU(copy.deepcopy(a))</code>"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "reply_to_user": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1516831037, "post_id": 48432090, "comment_id": 83855772, "body": "@DanielRoseman I disagree, I think python <i>never</i> passes by reference. But I admit, my understanding of these things may be incorrect. To my understanding, passing a reference isn&#39;t the same thing as passing by reference, which is generally characterized by having assignments to the variable being seen by the caller. I.E. <code>def special(&amp;x): x = 4</code> then <code>y = 3; special(y); print(y)</code> would print <code>4</code>"}], "answers": [{"tags": [], "owner": {"reputation": 375, "user_id": 3036834, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_WCL5SDyt_Y/AAAAAAAAAAI/AAAAAAAABf4/5AEuizCuG7w/photo.jpg?sz=128", "display_name": "sarnthil", "link": "https://stackoverflow.com/users/3036834/sarnthil"}, "is_accepted": false, "score": 1, "last_activity_date": 1516830721, "last_edit_date": 1516830721, "creation_date": 1516830368, "answer_id": 48432149, "question_id": 48432090, "link": "https://stackoverflow.com/questions/48432090/unwanted-list-pass-by-reference-in-function/48432149#48432149", "title": "Unwanted List pass by Reference in Function", "body": "<p>You can prevent modifications to <code>A</code> by making a copy immediately:</p>\n\n<pre><code>import copy\n\ndef LU(A):\n    n = scipy.shape(A)[0]\n    U = copy.deepcopy(A)\n    L = scipy.identity(n)\n    # ...\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 9264445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e3a5d98867d7d7b8c7a0ac63c6f2df5?s=128&d=identicon&r=PG&f=1", "display_name": "Dee", "link": "https://stackoverflow.com/users/9264445/dee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1516830721, "creation_date": 1516830167, "question_id": 48432090, "link": "https://stackoverflow.com/questions/48432090/unwanted-list-pass-by-reference-in-function", "title": "Unwanted List pass by Reference in Function", "body": "<p>I have this code:</p>\n\n<pre><code>import scipy\nimport scipy.linalg\n\ndef LU(A):\n    n = scipy.shape(A)[0]\n    U = A\n    L = scipy.identity(n)\n\n    for j in range(1,n):\n        for i in range(j+1,n+1):\n            L[i-1,j-1] = U[i-1,j-1]/U[j-1,j-1]\n            for k in range(j,n+1):\n                U[i-1,k-1] = U[i-1,k-1] - L[i-1,j-1] * U[j-1,k-1]\n    return L,U\n\n\na = scipy.matrix([[1.0,1.0],[2.0,1.0]])\nL,U = LU(a)\nprint L\nprint U\nprint a\nprint scipy.dot(L,U)\n</code></pre>\n\n<p>How would I fix the unwanted pass by reference in LU() where U points to where A is and changes to U also change A.</p>\n"}, {"tags": ["python", "dictionary", "numbers", "comparison"], "comments": [{"owner": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "edited": false, "score": 1, "creation_date": 1516830152, "post_id": 48432069, "comment_id": 83855331, "body": "Upgrade to python 3."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1516830211, "post_id": 48432069, "comment_id": 83855357, "body": "Yes, this is Python 2 specific behavior, where all objects are comparable. This behavior was later removed"}], "owner": {"reputation": 5193, "user_id": 1019129, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/357b7f0f0ca6e2c0f0ebccbec9b1a87b?s=128&d=identicon&r=PG", "display_name": "sten", "link": "https://stackoverflow.com/users/1019129/sten"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 18, "favorite_count": 0, "closed_date": 1516830159, "answer_count": 0, "score": 0, "last_activity_date": 1516830104, "creation_date": 1516830104, "question_id": 48432069, "link": "https://stackoverflow.com/questions/48432069/why-comparing-dict-and-number-is-not-always-false", "closed_reason": "Duplicate", "title": "Why comparing dict and number is not always FALSE?", "body": "<p>Why is dict bigger then any number !!!!</p>\n\n<pre><code>In [41]: {} &gt; 11\nOut[41]: True\n\nIn [42]: {} == 11\nOut[42]: False\n\nIn [43]: {} &lt; 11\nOut[43]: False\n</code></pre>\n\n<p>What can I do to make it work ?</p>\n"}, {"tags": ["python", "pandas", "ram", "conda"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1516830075, "post_id": 48432038, "comment_id": 83855294, "body": "No, I&#39;ve never noticed this."}, {"owner": {"reputation": 1, "user_id": 9264410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77b358d0c0399e128dd37bef77e760f5?s=128&d=identicon&r=PG&f=1", "display_name": "newriverhead", "link": "https://stackoverflow.com/users/9264410/newriverhead"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1516830594, "post_id": 48432038, "comment_id": 83855539, "body": "Thanks for your feedback...I&#39;m embarking on a rebuild of my conda environment...hope it will solve it!"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1516830732, "post_id": 48432038, "comment_id": 83855615, "body": "well, just make a new conda environment, with only pandas, and try and see if you can replicate the behavior. Maybe use a different interpreter: <code>conda create -n test_pandas python=3.6 pandas</code>"}, {"owner": {"reputation": 1, "user_id": 9264410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77b358d0c0399e128dd37bef77e760f5?s=128&d=identicon&r=PG&f=1", "display_name": "newriverhead", "link": "https://stackoverflow.com/users/9264410/newriverhead"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1516831478, "post_id": 48432038, "comment_id": 83856024, "body": "A brand new environment works just fine! Don&#39;t know what happened...but anyway that&#39;s the solution so let&#39;s go! Cheers buddy."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1516831627, "post_id": 48432038, "comment_id": 83856090, "body": "That is weird, though. Maybe keep the old environment around and file a bug report?"}, {"owner": {"reputation": 1, "user_id": 9264410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77b358d0c0399e128dd37bef77e760f5?s=128&d=identicon&r=PG&f=1", "display_name": "newriverhead", "link": "https://stackoverflow.com/users/9264410/newriverhead"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1517315116, "post_id": 48432038, "comment_id": 84037305, "body": "Found out this was due to a package called Bottleneck which is a dependency when installing Quantopian&#39;s Empyrical package. Will raise a ticket to them when I get a minute!"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 9264410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77b358d0c0399e128dd37bef77e760f5?s=128&d=identicon&r=PG&f=1", "display_name": "newriverhead", "link": "https://stackoverflow.com/users/9264410/newriverhead"}, "is_accepted": false, "score": 0, "last_activity_date": 1516831648, "creation_date": 1516831648, "answer_id": 48432486, "question_id": 48432038, "link": "https://stackoverflow.com/questions/48432038/why-would-importing-pandas-use-up-almost-all-my-ram/48432486#48432486", "title": "Why would importing pandas use up almost all my ram?", "body": "<p>Ok, so starting from a brand new environment with latest python 3.5.4 and latest panda seems to cut it....so I think I'll close this wonderful thread for now and re-open if after reinstalling all other needed libs I end up with the same problem.</p>\n"}], "owner": {"reputation": 1, "user_id": 9264410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77b358d0c0399e128dd37bef77e760f5?s=128&d=identicon&r=PG&f=1", "display_name": "newriverhead", "link": "https://stackoverflow.com/users/9264410/newriverhead"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1516831648, "creation_date": 1516829965, "last_edit_date": 1516830113, "question_id": 48432038, "link": "https://stackoverflow.com/questions/48432038/why-would-importing-pandas-use-up-almost-all-my-ram", "title": "Why would importing pandas use up almost all my ram?", "body": "<p>I'm fairly new to python but I'm pretty sure I didn't get this behaviour before.</p>\n\n<p>A couple of days back I've noticed that if I open a new python console and simply do:</p>\n\n<p>import pandas as pd</p>\n\n<p>Then python.exe ram usage grows steadily in about 5 seconds to reach about 96% utilisation (ie about 15.5G of my 16G total ram).</p>\n\n<p>That's not normal, right?</p>\n\n<p>I'm using anaconda3 python 3.5 on windows 10....I've updated my conda and pandas but to no avail...</p>\n\n<p>Cheers</p>\n"}, {"tags": ["python", "unit-testing", "python-requests"], "comments": [{"owner": {"reputation": 2230, "user_id": 5574689, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/2883b3fdb7276b30d733cfc0241bc689?s=128&d=identicon&r=PG&f=1", "display_name": "Gang", "link": "https://stackoverflow.com/users/5574689/gang"}, "edited": false, "score": 0, "creation_date": 1516843122, "post_id": 48432029, "comment_id": 83859901, "body": "there is no need to mock func <code>_internal_fxn_to_change_nested_value</code>, I did not see any args for this function in your test, the answer given seems to be correct."}], "answers": [{"tags": [], "owner": {"reputation": 5381, "user_id": 9203110, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-PQESrk-PCHA/AAAAAAAAAAI/AAAAAAAAAJk/6bqvsnrh4Dg/photo.jpg?sz=128", "display_name": "match", "link": "https://stackoverflow.com/users/9203110/match"}, "is_accepted": true, "score": 11, "last_activity_date": 1516834427, "last_edit_date": 1516834427, "creation_date": 1516834096, "answer_id": 48432979, "question_id": 48432029, "link": "https://stackoverflow.com/questions/48432029/mocking-requests-post-and-requests-json-decoder-python/48432979#48432979", "title": "Mocking requests.post and requests.json decoder python", "body": "<p>When you <code>mock</code> a class each child method is set up as a new <code>MagicMock</code> that in turn needs to be configured. So in this case you need to set the <code>return_value</code> for <code>mock_post</code> to bring the child attribute into being, <em>and</em> one to actually return something, i.e:</p>\n\n<pre><code>mock_post.return_value.status_code.return_value = 200\nmock_post.return_value.json.return_value = nested_dictionary\n</code></pre>\n\n<p>You can see this by looking at the type of everything:</p>\n\n<pre><code>print(type(mock_post))\nprint(type(mock_post.json))\n</code></pre>\n\n<p>In both cases the type is <code>&lt;class 'unittest.mock.MagicMock'&gt;</code></p>\n"}, {"tags": [], "owner": {"reputation": 865, "user_id": 892369, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21701303a36caabf99d08866eb7356d5?s=128&d=identicon&r=PG", "display_name": "Alex Pertsev", "link": "https://stackoverflow.com/users/892369/alex-pertsev"}, "is_accepted": false, "score": 2, "last_activity_date": 1516872862, "creation_date": 1516872862, "answer_id": 48439628, "question_id": 48432029, "link": "https://stackoverflow.com/questions/48432029/mocking-requests-post-and-requests-json-decoder-python/48439628#48439628", "title": "Mocking requests.post and requests.json decoder python", "body": "<p>Probably it is better for you to look at some specialized libraries for requests testing:</p>\n\n<p><a href=\"https://github.com/getsentry/responses\" rel=\"nofollow noreferrer\">responses</a></p>\n\n<p><a href=\"https://github.com/openstack/requests-mock\" rel=\"nofollow noreferrer\">requests-mock</a></p>\n\n<p><a href=\"https://github.com/a-pertsev/requests-testing\" rel=\"nofollow noreferrer\">requests-testing</a></p>\n\n<p>They provide clean way to mock responses in unittests.</p>\n"}, {"comments": [{"owner": {"reputation": 429, "user_id": 8748450, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab9b3923c1e791c87daf2f83163aa712?s=128&d=identicon&r=PG&f=1", "display_name": "Abdul Basit", "link": "https://stackoverflow.com/users/8748450/abdul-basit"}, "edited": false, "score": 1, "creation_date": 1615295932, "post_id": 52971142, "comment_id": 117642272, "body": "This is exactly what I want, simply and easy."}], "tags": [], "owner": {"reputation": 1571, "user_id": 1587118, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/cBN8s.jpg?s=128&g=1", "display_name": "SRC", "link": "https://stackoverflow.com/users/1587118/src"}, "is_accepted": false, "score": 19, "last_activity_date": 1540390197, "creation_date": 1540390197, "answer_id": 52971142, "question_id": 48432029, "link": "https://stackoverflow.com/questions/48432029/mocking-requests-post-and-requests-json-decoder-python/52971142#52971142", "title": "Mocking requests.post and requests.json decoder python", "body": "<p>I bumped here and although I agree that possibly using special purpose libraries is a better solution, I ended up doing the following</p>\n\n<pre><code>from mock import patch, Mock\n\n@patch('requests.post')\ndef test_something_awesome(mocked_post):\n    mocked_post.return_value = Mock(status_code=201, json=lambda : {\"data\": {\"id\": \"test\"}})\n</code></pre>\n\n<p>This worked for me for both getting the <code>status_code</code> and the <code>json()</code> at the receiver end while doing the unit-test. </p>\n\n<p>Wrote it here thinking that someone may find it helpful.</p>\n"}], "owner": {"reputation": 93, "user_id": 3798666, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55cb3d46503a50f6f4f4888d78ef1229?s=128&d=identicon&r=PG&f=1", "display_name": "the_deuce", "link": "https://stackoverflow.com/users/3798666/the-deuce"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 14354, "favorite_count": 1, "accepted_answer_id": 48432979, "answer_count": 3, "score": 8, "last_activity_date": 1540390197, "creation_date": 1516829912, "last_edit_date": 1516833161, "question_id": 48432029, "link": "https://stackoverflow.com/questions/48432029/mocking-requests-post-and-requests-json-decoder-python", "title": "Mocking requests.post and requests.json decoder python", "body": "<p>I'm creating a test suite for my module that uses the requests library quite a bit. However, I'm trying to mock several different return values for a specific request, and I'm having trouble doing so. Here is my code snippet that doesn't work:</p>\n\n<pre><code>class MyTests(unittest.TestCase):\n\n    @patch('mypackage.mymodule.requests.post') \n    def test_change_nested_dict_function(self, mock_post):\n        mock_post.return_value.status_code = 200\n        mock_post.return_value.json = nested_dictionary\n        modified_dict = mymodule.change_nested_dict()\n        self.assertEqual(modified_dict['key1']['key2'][0]['key3'], 'replaced_value')\n</code></pre>\n\n<p>The function I am attempting to mock:</p>\n\n<pre><code>import requests\n\ndef change_nested_dict():\n    uri = 'http://this_is_the_endpoint/I/am/hitting'\n    payload = {'param1': 'foo', 'param2': 'bar'}\n    r = requests.post(uri, params=payload)\n\n    # This function checks to make sure the response is giving the \n    # correct status code, hence why I need to mock the status code above\n    raise_error_if_bad_status_code(r)\n\n    dict_to_be_changed = r.json()\n\n    def _internal_fxn_to_change_nested_value(dict):\n        ''' This goes through the dict and finds the correct key to change the value. \n            This is the actual function I am trying to test above'''\n        return changed_dict\n\n\n    modified_dict = _internal_fxn_to_change_nested_value(dict_to_be_changed)\n\n    return modified_dict\n</code></pre>\n\n<p>I know a simple way of doing this would be to not have a nested function, but I am only showing you part of the entire function's code. Trust me, the nested function is necessary and I really do not want to change that part of it.</p>\n\n<p>My issue is, I don't understand how to mock requests.post and then set the return value for both the status code and the internal json decoder. I also can't seem to find a way around this issue since I can't seem to patch the internal function either, which also would solve this problem. Does anyone have any suggestions/ideas? Thanks a bunch.</p>\n"}, {"tags": ["python", "pandas", "concatenation"], "answers": [{"tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": true, "score": 1, "last_activity_date": 1516830344, "creation_date": 1516830344, "answer_id": 48432140, "question_id": 48432026, "link": "https://stackoverflow.com/questions/48432026/conditional-pandas-concat/48432140#48432140", "title": "Conditional Pandas Concat", "body": "<p>You can using <code>merge_asof</code></p>\n\n<pre><code>pd.merge_asof(df1.sort_values('Time1'),df2.sort_values('Time2'),left_on='Time1',right_on='Time2',by='ID',direction='forward')\nOut[677]: \n    ID  val1  val2  Time1   val3  val4  Time2\n0  235  1.02     1    305  500.0   9.0  305.0\n1  234  0.32     1    306   12.0   0.0  308.0\n2  234  0.93     0    309    NaN   NaN    NaN\n</code></pre>\n"}], "owner": {"reputation": 935, "user_id": 1302551, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/1a424f12a746bc7afd940cadad187370?s=128&d=identicon&r=PG", "display_name": "WolVes", "link": "https://stackoverflow.com/users/1302551/wolves"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "accepted_answer_id": 48432140, "answer_count": 1, "score": 0, "last_activity_date": 1516830344, "creation_date": 1516829904, "question_id": 48432026, "link": "https://stackoverflow.com/questions/48432026/conditional-pandas-concat", "title": "Conditional Pandas Concat", "body": "<p>I have two dataframes, one which is large (+million rows with several hundred columns) and one which is small(10s of columns and several hundred rows). They have data similar to this:</p>\n\n<p>Dataframe 1:</p>\n\n<pre><code>ID    val1    val2    Time1\n234   0.32       1      306\n234   0.93       0      309\n235   1.02       1      305\n</code></pre>\n\n<p>Dataframe 2:</p>\n\n<pre><code>ID    val3    val4    Time2\n234   9621     234      302\n234     12       0      308\n235    500       9      305\n</code></pre>\n\n<p>I need to concatenate the values by ID constrained to the condition that the value of <code>Time2</code> must be greater than <code>Time1</code> and that the row chosen is the <code>Min(Time2 - Time1)</code> of all possible options. </p>\n\n<p>Such that the final output look something like:</p>\n\n<pre><code>ID    val1    val2    Time1    val3    val4    Time2 \n234   0.32       1      306     12       0      308\n234   0.93       0      309    Nan     Nan      Nan\n235   1.02       1      305    500       9      305\n</code></pre>\n\n<p>What is the fastest method to perform this operation? To my knowledge the base concatenate options cannot perform this and row iteration is just painfully slow. </p>\n"}, {"tags": ["javascript", "jquery", "python", "ajax", "flask"], "comments": [{"owner": {"reputation": 412, "user_id": 6131536, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-QqM_gwrj4A0/AAAAAAAAAAI/AAAAAAAAMPk/bJHf7jzUZg8/photo.jpg?sz=128", "display_name": "Coleman", "link": "https://stackoverflow.com/users/6131536/coleman"}, "edited": false, "score": 0, "creation_date": 1516830183, "post_id": 48432016, "comment_id": 83855345, "body": "You might need a leading <code>&#47;</code> in your ajax <code>url</code> parameter if you&#39;re getting a 500 error. So <code>&#39;&#47;api&#47;regions&#39;</code> instead of <code>&#39;api&#47;regions&#39;</code>"}, {"owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "edited": false, "score": 0, "creation_date": 1516830520, "post_id": 48432016, "comment_id": 83855500, "body": "Are you seeing anything on stdout of your python process? Or in your log file?"}], "answers": [{"tags": [], "owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "is_accepted": false, "score": 1, "last_activity_date": 1516830806, "last_edit_date": 1516830806, "creation_date": 1516830398, "answer_id": 48432158, "question_id": 48432016, "link": "https://stackoverflow.com/questions/48432016/ajax-post-request-to-python-flask/48432158#48432158", "title": "AJAX Post Request to Python Flask", "body": "<p>From the <a href=\"http://flask.pocoo.org/docs/0.12/api/#flask.Request.json\" rel=\"nofollow noreferrer\">flask documentation</a>,</p>\n\n<blockquote>\n  <p>If the mimetype is <em>application/json</em> this will contain the parsed JSON data. Otherwise this will be <code>None</code>.</p>\n</blockquote>\n\n<p>The key there is that <code>.json</code> is the <strong>parsed</strong> JSON data, not the original string. If you want to write it to a file, you'll need to convert it back to a string it first, perhaps by using <code>json.dumps()</code>:</p>\n\n<pre><code>with open(\"C:\\\\test.txt\", 'w') as f:\n    f.write(json.dumps(regions))\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 7752937, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ba6d59fd1ae93e7c2b0539ee8ee62b3?s=128&d=identicon&r=PG&f=1", "display_name": "Gwith", "link": "https://stackoverflow.com/users/7752937/gwith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2341, "favorite_count": 0, "closed_date": 1516834704, "answer_count": 1, "score": 1, "last_activity_date": 1516830806, "creation_date": 1516829870, "question_id": 48432016, "link": "https://stackoverflow.com/questions/48432016/ajax-post-request-to-python-flask", "closed_reason": "Duplicate", "title": "AJAX Post Request to Python Flask", "body": "<p>Trying to understand how to send post requests to my backend (flask).</p>\n\n<p>In my HTML I have 3 checkboxes and a submit button. My submit button returns a javascript array and I'm trying to send that javascript array to an api endpoint 'api/regions' which you can see below.</p>\n\n<pre><code>$(document).ready(function() {\n    $(\"#loadData\").click(getChecked);\n});\nfunction getChecked() {\n    event.preventDefault();\n    var checkboxes = $(\".form-check input[type=checkbox]:checked\");\n    //toArray: convert checkboxes object to javascript array\n    var labels = checkboxes.toArray().map(checkbox =&gt; checkbox.value);\n\n    $.ajax({\n        url: 'api/regions',\n        type: \"POST\",\n        data: JSON.stringify(labels),\n        processData: false,\n        contentType: \"application/json; charset=UTF-8\",\n        success: function(response) {\n            console.log(response);\n        },\n        error: function(error) {\n            console.log(error);\n        }\n    });\n}\n</code></pre>\n\n<p>In my app.py I have a route for my endpoint api:</p>\n\n<pre><code>@app.route('/api/regions', methods=['POST'])\ndef regions():\n    regions = request.json\n    with open(\"C:\\\\test.txt\", 'w') as f:\n        f.write(regions)\n\nif __name__ == \"__main__\":\n    app.run(debug=True)\n</code></pre>\n\n<p>I understand there is no return statement, I'm just trying to write the data I get from</p>\n\n<pre><code>regions = request.json \n</code></pre>\n\n<p>to a file. \"C:\\test.txt\"</p>\n\n<p>The error I'm getting when trying to do this is 500 which doesn't give me a lot to work with. I'm not sure if what I'm missing is on the front end or back end so hopefully someone could shed some light on where I'm going wrong.</p>\n"}, {"tags": ["python", "django", "wagtail"], "comments": [{"owner": {"reputation": 18043, "user_id": 1853523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b28a2b9c38cb684fb7983d4d3c55db90?s=128&d=identicon&r=PG&f=1", "display_name": "gasman", "link": "https://stackoverflow.com/users/1853523/gasman"}, "edited": false, "score": 0, "creation_date": 1516834465, "post_id": 48432006, "comment_id": 83857383, "body": "Which hook are you attaching this function to?"}, {"owner": {"reputation": 121, "user_id": 9078722, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hDvFa.jpg?s=128&g=1", "display_name": "JeremyG", "link": "https://stackoverflow.com/users/9078722/jeremyg"}, "reply_to_user": {"reputation": 18043, "user_id": 1853523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b28a2b9c38cb684fb7983d4d3c55db90?s=128&d=identicon&r=PG&f=1", "display_name": "gasman", "link": "https://stackoverflow.com/users/1853523/gasman"}, "edited": false, "score": 0, "creation_date": 1516834522, "post_id": 48432006, "comment_id": 83857403, "body": "hooks.register(&#39;after_edit_page&#39;, sync_knowledge_base_page_with_zendesk2)     hooks.register(&#39;after_create_page&#39;, sync_knowledge_base_page_with_zendesk2)"}, {"owner": {"reputation": 18043, "user_id": 1853523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b28a2b9c38cb684fb7983d4d3c55db90?s=128&d=identicon&r=PG&f=1", "display_name": "gasman", "link": "https://stackoverflow.com/users/1853523/gasman"}, "edited": false, "score": 0, "creation_date": 1516881268, "post_id": 48432006, "comment_id": 83875677, "body": "Afraid I&#39;m having trouble extracting the Wagtail-specific details from this code snippet - it looks like there&#39;s a lot happening in this code (testing <code>kb_active_revision</code>, mentions of API calls...) that isn&#39;t directly related to your question. Could you distil this down to a minimal, complete and verifiable example (<a href=\"https://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a>), please?"}, {"owner": {"reputation": 121, "user_id": 9078722, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hDvFa.jpg?s=128&g=1", "display_name": "JeremyG", "link": "https://stackoverflow.com/users/9078722/jeremyg"}, "reply_to_user": {"reputation": 18043, "user_id": 1853523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b28a2b9c38cb684fb7983d4d3c55db90?s=128&d=identicon&r=PG&f=1", "display_name": "gasman", "link": "https://stackoverflow.com/users/1853523/gasman"}, "edited": false, "score": 0, "creation_date": 1516893943, "post_id": 48432006, "comment_id": 83884578, "body": "I want to get a JSON object containing the info from the latest Page revision. Fortunately this part is done. Based on the results of the conditional statement, I want to change one of the value of one of the keys. This part is also done. I now have a JSON object with all the correct values.  So @gasman, how do I save this updated JSON object as the latest revision, so after the page refresh the values show in the browser? I tried passing the JSON to the save_revisions() method and ran into issues. Using save_revisions.publish() saves the key values to the model and not to the last revision."}], "answers": [{"tags": [], "owner": {"reputation": 121, "user_id": 9078722, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hDvFa.jpg?s=128&g=1", "display_name": "JeremyG", "link": "https://stackoverflow.com/users/9078722/jeremyg"}, "is_accepted": false, "score": 0, "last_activity_date": 1516900100, "creation_date": 1516900100, "answer_id": 48448403, "question_id": 48432006, "link": "https://stackoverflow.com/questions/48432006/how-to-update-a-wagtail-page/48448403#48448403", "title": "How to update a Wagtail Page", "body": "<p>So I figured out the problem.  Instead of trying to use the Page method save_revisions(), I opted to use revisions.create().  Inside revisions.create(), you pass it a JSON object with your updated values.  In addition to that you pass an instance of the user, and values for submitted_for_moderation and approved_go_live_at.  Listed below is my updated code sample, with comments.  Please let me know if you have any questions for me.  I hope this post helps others avoid frustrations with updating revisions.  Thanks for reading.  Take care and have a good day.  </p>\n\n<pre><code>from wagtail.wagtailcore import hooks\nfrom .models import ContentPage\nimport json\n\n\n# Allows the latest page revision JSON to be updated based on conditionals\ndef sync_kb_page_with_zendesk(request, page):\n\n    # Sanity check to ensure page is an instance of ContentPage\n    if isinstance(page, ContentPage):\n\n        # this sets the user variable\n        user_var = request.user \n\n        # sets the Content Page\n        page_instance = ContentPage.objects.get(pk=page.pk) \n\n        # this retrieves JSON str w/ latest revisions\n        pageJsonHolder = page_instance.get_latest_revision().content_json \n\n        # this takes the json string and converts it into a json object\n        content = json.loads(pageJsonHolder) \n\n        # this sets the kb id variable for use in the code\n        kb_id_revision = content['knowledge_base_id'] \n\n        # this sets the kb active variable for use in the code\n        kb_active_revision = content['kb_active'] \n\n        # this is the conditional logic \n        if kb_active_revision == \"T\":\n            if kb_id_revision == 0:\n                print(\"create the article\")\n                # updates the kb id value in the JSON object\n                content['knowledge_base_id'] = 456 \n            else:\n                print(\"update the article\")\n        elif kb_id_revision != 0:\n            print(\"delete the article\")\n            # updates the kb id value in the JSON object\n            content['knowledge_base_id'] = 0 \n\n        # this takes the JSON object and coverts it back to a JSON str\n        revisionPageJsonHolder = json.dumps(content) \n\n        # this takes your JSON str and creates the latest revision of Page \n        revision = page_instance.revisions.create(\n            content_json=revisionPageJsonHolder,\n            user=user_var,\n            submitted_for_moderation=False,\n            approved_go_live_at=None,\n        ) \n\n\n# registers the function to fire after page edit\nhooks.register('after_edit_page', sync_kb_page_with_zendesk) \n\n# registers the function to fire after page creation\nhooks.register('after_create_page', sync_kb_page_with_zendesk)\n</code></pre>\n"}], "owner": {"reputation": 121, "user_id": 9078722, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hDvFa.jpg?s=128&g=1", "display_name": "JeremyG", "link": "https://stackoverflow.com/users/9078722/jeremyg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 652, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1516900100, "creation_date": 1516829827, "question_id": 48432006, "link": "https://stackoverflow.com/questions/48432006/how-to-update-a-wagtail-page", "title": "How to update a Wagtail Page", "body": "<p>I am using a wagtail_hook to update a Page object and am running into trouble.  More specifically, when an end-user hits the \"Save draft\" button from the browser I want the following code to fire.  The purpose of this code is to change the knowledge_base_id dynamically, based on the results of the conditional statements listed below.  </p>\n\n<pre><code>def sync_knowledge_base_page_with_zendesk2(request, page):\n    if isinstance(page, ContentPage):\n        page_instance = ContentPage.objects.get(pk=page.pk)\n        pageJsonHolder = page_instance.get_latest_revision().content_json\n        content = json.loads(pageJsonHolder)\n        print(\"content at the start = \")\n        print(content['knowledge_base_id'])\n        kb_id_revision = content['knowledge_base_id']\n        kb_active_revision = content['kb_active']\n        if kb_active_revision == \"T\":\n            if kb_id_revision == 0:\n                print(\"create the article\")\n                content['knowledge_base_id'] = 456\n                #page_instance.knowledge_base_id = 456 # change this API call\n            else:\n                print(\"update the article\")\n        elif kb_id_revision != 0:\n            print(\"delete the article\")\n            content['knowledge_base_id'] = 0\n            #page_instance.knowledge_base_id = 0\n        print(\"content at the end = \")\n        print(content['knowledge_base_id'])\n        #page_instance.save_revision().publish\n</code></pre>\n\n<p>So when the hook code fires, it updates the draft with all the info EXCEPT the knowledge_base_id.  </p>\n\n<hr>\n\n<p>However when I change the knowledge_base_id like this (seen commented out above)</p>\n\n<pre><code>page_instance.knowledge_base_id = 0\n</code></pre>\n\n<p>And save it like this (also seen commented out above)</p>\n\n<pre><code>page_instance.save_revision().publish()\n</code></pre>\n\n<p>It saves the updated knowledge_base_id BUT skips over the other revisions.  In short, what the heck am I doing wrong.  Thanks in advance for the assist.  Take care and have a good day.</p>\n"}, {"tags": ["python", "argparse"], "comments": [{"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1516829722, "post_id": 48431920, "comment_id": 83855098, "body": "This is the problem of handling an argument that looks like a flag: <a href=\"https://stackoverflow.com/questions/48322986/python-argparse-passing-argument-to-argument\" title=\"python argparse passing argument to argument\">stackoverflow.com/questions/48322986/&hellip;</a>; <a href=\"https://stackoverflow.com/questions/16174992/cant-get-argparse-to-read-quoted-string-with-dashes-in-it\" title=\"cant get argparse to read quoted string with dashes in it\">stackoverflow.com/questions/16174992/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1893, "user_id": 1787434, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/85f5a5c15e84e4a9aec84dc8be822010?s=128&d=identicon&r=PG", "display_name": "the_storyteller", "link": "https://stackoverflow.com/users/1787434/the-storyteller"}, "is_accepted": false, "score": 1, "last_activity_date": 1516830265, "last_edit_date": 1516830265, "creation_date": 1516829870, "answer_id": 48432015, "question_id": 48431920, "link": "https://stackoverflow.com/questions/48431920/how-to-allow-non-number-as-arguments-in-python-argparse/48432015#48432015", "title": "how to allow -non_number as arguments in python argparse", "body": "<p>I think you're looking for the <code>nargs</code> parameter to argparser.</p>\n\n<pre><code>parser.add_argument('--arg', nargs='?')\n</code></pre>\n\n<p>At the moment, <code>--arg</code> is interpreting the value <code>'-8'</code> as the input, whereas it thinks <code>'-f'</code> (with parameters <code>'oo'</code>) is a new argument.</p>\n\n<p>Alternatively, you could use <code>action='store_true'</code>, which will represent the presence or absence of the argument with a boolean.</p>\n\n<pre><code>parser.add_argument('--arg', action='store_true')\n</code></pre>\n\n<p><a href=\"https://docs.python.org/3/library/argparse.html#nargs\" rel=\"nofollow noreferrer\">https://docs.python.org/3/library/argparse.html#nargs</a></p>\n"}, {"comments": [{"owner": {"reputation": 754, "user_id": 2813198, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/0D773.jpg?s=128&g=1", "display_name": "Hec", "link": "https://stackoverflow.com/users/2813198/hec"}, "edited": false, "score": 0, "creation_date": 1516904583, "post_id": 48432192, "comment_id": 83891732, "body": "doesn&#39;t work for more than 1 arguments though. Edited question to reflect"}], "tags": [], "owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "is_accepted": true, "score": 3, "last_activity_date": 1516904914, "last_edit_date": 1516904914, "creation_date": 1516830562, "answer_id": 48432192, "question_id": 48431920, "link": "https://stackoverflow.com/questions/48431920/how-to-allow-non-number-as-arguments-in-python-argparse/48432192#48432192", "title": "how to allow -non_number as arguments in python argparse", "body": "<p>Call it like this:</p>\n\n<pre><code>python test.py --arg='-foo'\n</code></pre>\n\n<p>To allow specifying multiple:</p>\n\n<pre><code>parser.add_argument('--arg', action='append')\n# call like python test.py --arg=-foo --arg=-bar\n</code></pre>\n"}], "owner": {"reputation": 754, "user_id": 2813198, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/0D773.jpg?s=128&g=1", "display_name": "Hec", "link": "https://stackoverflow.com/users/2813198/hec"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "accepted_answer_id": 48432192, "answer_count": 2, "score": 1, "last_activity_date": 1516904914, "creation_date": 1516829451, "last_edit_date": 1516904630, "question_id": 48431920, "link": "https://stackoverflow.com/questions/48431920/how-to-allow-non-number-as-arguments-in-python-argparse", "title": "how to allow -non_number as arguments in python argparse", "body": "<pre><code>python test.py --arg -foo -bar\ntest.py: error: argument --arg: expected at least one argument\n\npython test.py --arg -8\n['-8']\n</code></pre>\n\n<p>How do I allow -non_number to work with argparse?</p>\n\n<p>Is there a way to disable short arguments?</p>\n"}, {"tags": ["python", "django", "django-models", "django-queryset", "django-orm"], "comments": [{"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1516829399, "post_id": 48431871, "comment_id": 83854950, "body": "This doesn&#39;t really have anything to do with backwards relations. <code>values_list</code> takes a <code>flat=True</code> parameter."}, {"owner": {"reputation": 613, "user_id": 1703849, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e0f523d83d3d5ce7619cba6105e36e29?s=128&d=identicon&r=PG", "display_name": "G.M", "link": "https://stackoverflow.com/users/1703849/g-m"}, "reply_to_user": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1516829481, "post_id": 48431871, "comment_id": 83854993, "body": "Thank you for your input, I thought I&#39;d give as much details as possible in the Title"}, {"owner": {"reputation": 413, "user_id": 4396011, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-zGtsNwkuKSc/AAAAAAAAAAI/AAAAAAAAABY/tQ-0juQCeIM/photo.jpg?sz=128", "display_name": "Angel F", "link": "https://stackoverflow.com/users/4396011/angel-f"}, "edited": false, "score": 1, "creation_date": 1516843528, "post_id": 48431871, "comment_id": 83860011, "body": "Only to clarify, if <code>v</code> is an instance of <code>FOO class</code>,  to access to its related objects should be <code>v.data_set.values_list(&#39;Volume&#39;)</code> instead of <code>v.foo_set.values_list(&#39;Volume&#39;)</code>, it&#39;s right?"}, {"owner": {"reputation": 613, "user_id": 1703849, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e0f523d83d3d5ce7619cba6105e36e29?s=128&d=identicon&r=PG", "display_name": "G.M", "link": "https://stackoverflow.com/users/1703849/g-m"}, "reply_to_user": {"reputation": 413, "user_id": 4396011, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-zGtsNwkuKSc/AAAAAAAAAAI/AAAAAAAAABY/tQ-0juQCeIM/photo.jpg?sz=128", "display_name": "Angel F", "link": "https://stackoverflow.com/users/4396011/angel-f"}, "edited": false, "score": 0, "creation_date": 1516866815, "post_id": 48431871, "comment_id": 83867032, "body": "@AngelF Yes, thanks for pointing out! Silly typo"}], "answers": [{"tags": [], "owner": {"reputation": 708, "user_id": 2660006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6651198a3429631dae3236a10ee1d42?s=128&d=identicon&r=PG", "display_name": "Stuart Dines", "link": "https://stackoverflow.com/users/2660006/stuart-dines"}, "is_accepted": true, "score": 4, "last_activity_date": 1516829361, "creation_date": 1516829361, "answer_id": 48431900, "question_id": 48431871, "link": "https://stackoverflow.com/questions/48431871/retrieving-values-from-backwards-relationship-as-a-list-of-integers-instead-of-l/48431900#48431900", "title": "Retrieving values from backwards relationship as a list of integers instead of list of tuples?", "body": "<p>You can use the parameter <code>flat=True</code> e.g.:</p>\n\n<pre><code>vol = v.foo_set.values_list('Volume', flat=True)\n</code></pre>\n\n<p>For reference docs are at <a href=\"https://docs.djangoproject.com/en/2.0/ref/models/querysets/#values-list\" rel=\"nofollow noreferrer\">https://docs.djangoproject.com/en/2.0/ref/models/querysets/#values-list</a></p>\n"}], "owner": {"reputation": 613, "user_id": 1703849, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e0f523d83d3d5ce7619cba6105e36e29?s=128&d=identicon&r=PG", "display_name": "G.M", "link": "https://stackoverflow.com/users/1703849/g-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "accepted_answer_id": 48431900, "answer_count": 1, "score": 0, "last_activity_date": 1516866834, "creation_date": 1516829239, "last_edit_date": 1516866834, "question_id": 48431871, "link": "https://stackoverflow.com/questions/48431871/retrieving-values-from-backwards-relationship-as-a-list-of-integers-instead-of-l", "title": "Retrieving values from backwards relationship as a list of integers instead of list of tuples?", "body": "<p>Right now I have a column named 'Value' in my 'Data' model, which has a ForeignKey from 'FOO' model:</p>\n\n<pre><code>class FOO(models.Model):\n    label = models.CharField(max_length=10, primary_key=True)\n     ...\n\nclass Data(models.Model):\n    label  = models.ForeignKey(Tickers, on_delete=models.CASCADE)\n    Volume = models.FloatField(default=0)\n    ...\n</code></pre>\n\n<p>I'm fetching related objects as follows:</p>\n\n<pre><code>v = FOO.objects.get(pk='something')\nvol = v.data_set.values_list('Volume')\n</code></pre>\n\n<p>and a get a list of tuples, which, afterwards, I have to convert to list integers with list comprehension.</p>\n\n<p>Is there a more elegant way to get a list of integers directly?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "pandas", "datetime"], "answers": [{"comments": [{"owner": {"reputation": 336, "user_id": 5079617, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/763c8711a4e058c7a3378a889066db03?s=128&d=identicon&r=PG&f=1", "display_name": "user217285", "link": "https://stackoverflow.com/users/5079617/user217285"}, "edited": false, "score": 0, "creation_date": 1516829477, "post_id": 48431906, "comment_id": 83854992, "body": "I was looking at your solution to a similar problem just a few minutes ago ... thank you!"}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "reply_to_user": {"reputation": 336, "user_id": 5079617, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/763c8711a4e058c7a3378a889066db03?s=128&d=identicon&r=PG&f=1", "display_name": "user217285", "link": "https://stackoverflow.com/users/5079617/user217285"}, "edited": false, "score": 0, "creation_date": 1516829498, "post_id": 48431906, "comment_id": 83855003, "body": "np, glad I could help (-:"}], "tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": true, "score": 5, "last_activity_date": 1516829379, "creation_date": 1516829379, "answer_id": 48431906, "question_id": 48431868, "link": "https://stackoverflow.com/questions/48431868/collapse-pandas-multiindex-to-a-single-index/48431906#48431906", "title": "Collapse pandas multiindex to a single index", "body": "<p>Simplest solution with <code>pd.Index.map</code>  </p>\n\n<pre><code>df.set_index(df.index.map(lambda t: pd.datetime(*t)))\n\n            3 months\n1987-01-02         1\n1987-01-05         2\n1987-01-06         3\n1987-01-07         4\n1987-01-08         5\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": false, "score": 3, "last_activity_date": 1516829780, "creation_date": 1516829780, "answer_id": 48431992, "question_id": 48431868, "link": "https://stackoverflow.com/questions/48431868/collapse-pandas-multiindex-to-a-single-index/48431992#48431992", "title": "Collapse pandas multiindex to a single index", "body": "<p>pass to a dataframe</p>\n\n<pre><code>df.index=pd.to_datetime(pd.DataFrame(df.index.values.tolist(), columns=['year','month','day']))\ndf\nOut[669]: \n            3 months\n1987-01-02         1\n1987-01-05         2\n1987-01-06         3\n1987-01-07         4\n1987-01-08         5\n</code></pre>\n"}], "owner": {"reputation": 336, "user_id": 5079617, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/763c8711a4e058c7a3378a889066db03?s=128&d=identicon&r=PG&f=1", "display_name": "user217285", "link": "https://stackoverflow.com/users/5079617/user217285"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3763, "favorite_count": 1, "accepted_answer_id": 48431906, "answer_count": 2, "score": 5, "last_activity_date": 1516829839, "creation_date": 1516829231, "last_edit_date": 1516829839, "question_id": 48431868, "link": "https://stackoverflow.com/questions/48431868/collapse-pandas-multiindex-to-a-single-index", "title": "Collapse pandas multiindex to a single index", "body": "<p>I have a multi-indexed Pandas dataframe that looks like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/4SYE0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4SYE0.png\" alt=\"enter image description here\"></a></p>\n\n<p>How can I merge the three-tiered index into one index? Namely, I want to turn (1987, 1, 2) into pd.datetime(1987, 1, 2). I'd prefer a vectorized approach using df.index.map. Here's code that can create the top part of the dataframe:</p>\n\n<pre><code>df = pd.DataFrame(\n    {'3 months': [1, 2, 3, 4, 5]},\n    index=[\n        [1987, 1987, 1987, 1987,1987],\n        [1,1,1,1,1],\n        [2,5,6,7,8]\n    ]\n)\n</code></pre>\n"}, {"tags": ["python", "apache", "flask", "mod-wsgi"], "answers": [{"comments": [{"owner": {"reputation": 571, "user_id": 6490241, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/67de4a6a7b60a676610e8a2beec3b50a?s=128&d=identicon&r=PG&f=1", "display_name": "Teja", "link": "https://stackoverflow.com/users/6490241/teja"}, "edited": false, "score": 0, "creation_date": 1516853795, "post_id": 48435076, "comment_id": 83862457, "body": "I have change <b>python-home</b> to <b>python-path</b>.....and changed that <b>WSGIScriptAlias</b> tooo...But same error.Do i need to change any other?"}, {"owner": {"reputation": 54548, "user_id": 128141, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70dfb4afd84b106d0855184bf0ae4675?s=128&d=identicon&r=PG", "display_name": "Graham Dumpleton", "link": "https://stackoverflow.com/users/128141/graham-dumpleton"}, "reply_to_user": {"reputation": 571, "user_id": 6490241, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/67de4a6a7b60a676610e8a2beec3b50a?s=128&d=identicon&r=PG&f=1", "display_name": "Teja", "link": "https://stackoverflow.com/users/6490241/teja"}, "edited": false, "score": 1, "creation_date": 1516885528, "post_id": 48435076, "comment_id": 83878483, "body": "The other problem is that the directory <code>&#47;home&#47;teja</code> is likely not accessible to the user that Apache runs as. You are better of creating a Python virtual environment under <code>&#47;var&#47;www&#47;FDap</code> and install packages into that. Then use <code>python-home</code> to refer to the root of the Python virtual environment. See <a href=\"http://modwsgi.readthedocs.io/en/develop/user-guides/virtual-environments.html\" rel=\"nofollow noreferrer\">modwsgi.readthedocs.io/en/develop/user-guides/&hellip;</a>"}], "tags": [], "owner": {"reputation": 54548, "user_id": 128141, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70dfb4afd84b106d0855184bf0ae4675?s=128&d=identicon&r=PG", "display_name": "Graham Dumpleton", "link": "https://stackoverflow.com/users/128141/graham-dumpleton"}, "is_accepted": true, "score": 1, "last_activity_date": 1516850411, "creation_date": 1516850411, "answer_id": 48435076, "question_id": 48431806, "link": "https://stackoverflow.com/questions/48431806/mod-wsgi-cannot-load-my-flask-app/48435076#48435076", "title": "mod_wsgi cannot load my Flask app", "body": "<p>Change:</p>\n\n<pre><code>WSGIScriptAlias /fdapp /var/www/FDApp/fdapp.wsgi\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>WSGIScriptAlias /fdapp /var/www/FDApp/fdapp.wsgi \\\n    process-group=fdapp application-group=%{GLOBAL}\n</code></pre>\n\n<p>You aren't telling mod_wsgi to run your application in the daemon process group.</p>\n\n<p>Also, using:</p>\n\n<pre><code>python-home=/home/teja/.local/lib/python3.5/site-packages\n</code></pre>\n\n<p>is wrong.</p>\n\n<p>For per user <code>site-packages</code> use:</p>\n\n<pre><code>python-path=/home/teja/.local/lib/python3.5/site-packages\n</code></pre>\n"}], "owner": {"reputation": 571, "user_id": 6490241, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/67de4a6a7b60a676610e8a2beec3b50a?s=128&d=identicon&r=PG&f=1", "display_name": "Teja", "link": "https://stackoverflow.com/users/6490241/teja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 817, "favorite_count": 0, "accepted_answer_id": 48435076, "answer_count": 1, "score": 0, "last_activity_date": 1516855072, "creation_date": 1516828935, "last_edit_date": 1516855072, "question_id": 48431806, "link": "https://stackoverflow.com/questions/48431806/mod-wsgi-cannot-load-my-flask-app", "title": "mod_wsgi cannot load my Flask app", "body": "<p>I am trying to run my Flask application with mod_wsgi, but mod_wsgi gives the error <code>Target WSGI script '/var/www/FDApp/fdapp.wsgi' cannot be loaded as Python module.</code></p>\n\n<pre><code>mod_wsgi: Compiled for Python/3.5.1+.\nmod_wsgi: Runtime using Python/3.5.2.\nmod_wsgi (pid=4142): Target WSGI script '/var/www/FDApp/fdapp.wsgi' cannot be loaded as Python module.\nmod_wsgi (pid=4142): Exception occurred processing WSGI script '/var/www/FDApp/fdapp.wsgi'.\nTraceback (most recent call last):\n  File \"/var/www/FDApp/fdapp.wsgi\", line 6, in &lt;module&gt;\n    from main import app as application\n  File \"/var/www/FDApp/main.py\", line 15, in &lt;module&gt;\n    import label_faces\n  File \"/var/www/FDApp/label_faces.py\", line 2, in &lt;module&gt;\n    import mxnet as mx\nImportError: No module named 'mxnet'\n</code></pre>\n\n<p>The mxnet package is installed in python3.5. All the packages are installed in this folder.</p>\n\n<pre><code>        &lt;VirtualHost *:80&gt;\n                        ServerName 127.0.0.1\n                        WSGIDaemonProcess fdapp user=www-data group=www-data threads=5  python-path=/home/teja/.local/lib/python3.5/site-packages\n                        WSGIScriptAlias /fdapp /var/www/FDApp/fdapp.wsgi process-group=fdapp application-group=%{GLOBAL}\n                        &lt;Directory /var/www/FDApp/&gt;\n                                WSGIProcessGroup fdapp\n                                WSGIApplicationGroup %{GLOBAL}\n                                WSGIScriptReloading On\n                                Order allow,deny\n                                Allow from all\n                        &lt;/Directory&gt;\n\n                        Alias /static1 /var/www/FDApp/static\n                        &lt;Directory /var/www/FDApp/static/&gt;\n                                Order allow,deny\n                                Allow from all\n                        &lt;/Directory&gt;\n                        ErrorLog ${APACHE_LOG_DIR}/error.log\n                        LogLevel warn\n                        CustomLog ${APACHE_LOG_DIR}/access.log combined\n        &lt;/VirtualHost&gt;\n</code></pre>\n"}, {"tags": ["python", "dataframe", "boxplot"], "comments": [{"owner": {"reputation": 1341, "user_id": 6388994, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00d56f9550cf209ae3c4620eb1a31109?s=128&d=identicon&r=PG&f=1", "display_name": "Usernamenotfound", "link": "https://stackoverflow.com/users/6388994/usernamenotfound"}, "edited": false, "score": 0, "creation_date": 1516832695, "post_id": 48431774, "comment_id": 83856594, "body": "The <code>0.691315</code> value is an outlier. Do you consider that part of your distribution?"}, {"owner": {"reputation": 81, "user_id": 8395936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d7b1b8c575e264a888a2162e9390465?s=128&d=identicon&r=PG&f=1", "display_name": "Chase Calkins", "link": "https://stackoverflow.com/users/8395936/chase-calkins"}, "reply_to_user": {"reputation": 1341, "user_id": 6388994, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00d56f9550cf209ae3c4620eb1a31109?s=128&d=identicon&r=PG&f=1", "display_name": "Usernamenotfound", "link": "https://stackoverflow.com/users/6388994/usernamenotfound"}, "edited": false, "score": 0, "creation_date": 1516833308, "post_id": 48431774, "comment_id": 83856889, "body": "I guess I was assuming it was kept since it is an actual point. So are you saying it disregards the outliers when it calculates the whiskers?"}, {"owner": {"reputation": 1341, "user_id": 6388994, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00d56f9550cf209ae3c4620eb1a31109?s=128&d=identicon&r=PG&f=1", "display_name": "Usernamenotfound", "link": "https://stackoverflow.com/users/6388994/usernamenotfound"}, "edited": false, "score": 0, "creation_date": 1516833402, "post_id": 48431774, "comment_id": 83856927, "body": "yep. That&#39;s what it does"}, {"owner": {"reputation": 81, "user_id": 8395936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d7b1b8c575e264a888a2162e9390465?s=128&d=identicon&r=PG&f=1", "display_name": "Chase Calkins", "link": "https://stackoverflow.com/users/8395936/chase-calkins"}, "reply_to_user": {"reputation": 1341, "user_id": 6388994, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00d56f9550cf209ae3c4620eb1a31109?s=128&d=identicon&r=PG&f=1", "display_name": "Usernamenotfound", "link": "https://stackoverflow.com/users/6388994/usernamenotfound"}, "edited": false, "score": 0, "creation_date": 1516834091, "post_id": 48431774, "comment_id": 83857229, "body": "Is there a way to force it to stay in there, or would I have to do everything manually then?"}], "answers": [{"tags": [], "owner": {"reputation": 450, "user_id": 7008379, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3vP-UgnAucI/AAAAAAAAAAI/AAAAAAAAAE8/kq4eFV_BUQA/photo.jpg?sz=128", "display_name": "MattB", "link": "https://stackoverflow.com/users/7008379/mattb"}, "is_accepted": false, "score": 0, "last_activity_date": 1533288763, "creation_date": 1533288763, "answer_id": 51669575, "question_id": 48431774, "link": "https://stackoverflow.com/questions/48431774/python-dataframe-boxplot-wisker-caluclation-with-outliers/51669575#51669575", "title": "Python Dataframe boxplot, wisker caluclation with outliers", "body": "<p>The whiskers calculated for the plot fall on values within your data. As your data only has 8 values it can be easily visualised where the position of the whiskers is coming from.</p>\n\n<p>The following code produces your boxplot and also overlies the data points on this.</p>\n\n<pre><code>df.boxplot()\nplt.plot([1]*len(df),df[0],'x')\nplt.show()\n</code></pre>\n\n<p>The plot produced:</p>\n\n<p><a href=\"https://i.stack.imgur.com/vMwp9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vMwp9.png\" alt=\"boxplot\"></a></p>\n\n<p>Hopefully it is clear enough to see that the upper whisker falls on a datapoint.</p>\n\n<p>From the documentation: <a href=\"https://matplotlib.org/api/_as_gen/matplotlib.pyplot.boxplot.html\" rel=\"nofollow noreferrer\">https://matplotlib.org/api/_as_gen/matplotlib.pyplot.boxplot.html</a>:\n\"the upper whisker will <strong>extend to last datum</strong> less than Q3 + whis*IQR\"</p>\n"}], "owner": {"reputation": 81, "user_id": 8395936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d7b1b8c575e264a888a2162e9390465?s=128&d=identicon&r=PG&f=1", "display_name": "Chase Calkins", "link": "https://stackoverflow.com/users/8395936/chase-calkins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 726, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1533288763, "creation_date": 1516828825, "question_id": 48431774, "link": "https://stackoverflow.com/questions/48431774/python-dataframe-boxplot-wisker-caluclation-with-outliers", "title": "Python Dataframe boxplot, wisker caluclation with outliers", "body": "<p>I was curious at how pandas dataframe handles calculating the upper and lower whiskers, with outliers. Normally it's <code>1.5IQR-Q1, 1.5IQR+Q3</code>. However, the problem I can't understand, or maybe I'm wrong on how the whiskers are calculated. It shows the same problems in the boxplot section of <a href=\"https://pandas.pydata.org/pandas-docs/stable/visualization.html\" rel=\"nofollow noreferrer\">https://pandas.pydata.org/pandas-docs/stable/visualization.html</a>\nHere's a sample of code I've randomly selected:</p>\n\n<pre><code>ray1=[0.217766,0.691315,0.289239,0.239135,0.161341,0.364297,0.373284,0.323216]\ndf = pd.DataFrame(ray1, dtype = float)\n</code></pre>\n\n<p>If I used the <code>df.describe()</code> it gives me the stats of that array. </p>\n\n<pre><code>count  8.000000\nmean   0.332449\nstd    0.162374\nmin    0.161341\n25%    0.233793\n50%    0.306227\n75%    0.366544\nmax    0.691315\n</code></pre>\n\n<p>But according to the upper whisker, lower whisker from the normal <code>1.5IQR-Q1, 1.5IQR+Q3</code>, it should be around <code>.565</code> and <code>.035</code>. If I plot this with <code>df.boxplot()</code> it shows the upper whisker as <code>0.373</code> and the lower whisker as <code>.161</code>. I've tried other variations (<code>2.698\u03c3</code>) and the medcouple and those don't equal either. </p>\n\n<p>So how is it getting those values, when outliers are present?</p>\n"}, {"tags": ["python", "css", "gtk", "gtk3"], "comments": [{"owner": {"reputation": 609, "user_id": 1874373, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/2b5e19800ac8954500ecdcc5a46971f9?s=128&d=identicon&r=PG&f=1", "display_name": "GTK 1.2.6 fanboy", "link": "https://stackoverflow.com/users/1874373/gtk-1-2-6-fanboy"}, "edited": false, "score": 0, "creation_date": 1517373421, "post_id": 48431689, "comment_id": 84064457, "body": "It might have to do with the current theme. Today I saw that my user-defined CSS border of an entry field is displayed in Linux Mint, but not when using another theme in Mageia (I use the standard themes on both installations)."}, {"owner": {"reputation": 609, "user_id": 1874373, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/2b5e19800ac8954500ecdcc5a46971f9?s=128&d=identicon&r=PG&f=1", "display_name": "GTK 1.2.6 fanboy", "link": "https://stackoverflow.com/users/1874373/gtk-1-2-6-fanboy"}, "edited": false, "score": 0, "creation_date": 1517373942, "post_id": 48431689, "comment_id": 84064598, "body": "I wasn&#39;t able to set a border for a text view, either. I&#39;ll try later today if I can manage in one of my virtual machines. Maybe you could give some info about your system?"}], "answers": [{"tags": [], "owner": {"reputation": 700, "user_id": 1208630, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/QBADm.jpg?s=128&g=1", "display_name": "bunny1985", "link": "https://stackoverflow.com/users/1208630/bunny1985"}, "is_accepted": false, "score": 0, "last_activity_date": 1517374402, "creation_date": 1517374402, "answer_id": 48534709, "question_id": 48431689, "link": "https://stackoverflow.com/questions/48431689/python-gtk-textview-border-not-working-from-css/48534709#48534709", "title": "Python gtk TextView border not working from css", "body": "<p>My system is Mint with cinnamon . I don't remember theme name by heart, but I think that I've tried two or three. In the end I have added a frame not a perfect solution but it works.</p>\n"}, {"comments": [{"owner": {"reputation": 790, "user_id": 722915, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/a14d1bca90d7ebeda50dca99aab381b9?s=128&d=identicon&r=PG", "display_name": "shevy", "link": "https://stackoverflow.com/users/722915/shevy"}, "edited": false, "score": 0, "creation_date": 1611437178, "post_id": 61443021, "comment_id": 116452650, "body": "What is the .Cr part here?"}], "tags": [], "owner": {"reputation": 415, "user_id": 4141167, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3341f4b301a7bf9fdce00aeda5c45dc?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/4141167/rob"}, "is_accepted": false, "score": 1, "last_activity_date": 1587913574, "creation_date": 1587913574, "answer_id": 61443021, "question_id": 48431689, "link": "https://stackoverflow.com/questions/48431689/python-gtk-textview-border-not-working-from-css/61443021#61443021", "title": "Python gtk TextView border not working from css", "body": "<p>Also banged my head on this one for too many hours - much longer and might have broken google.  BTW: CSS borders don't work at all for this.</p>\n\n<p>But it can be done by the Drawn signal.\nBelow code is C# (I'm not into python) but its short and 'll show the gist of it.</p>\n\n<pre><code>// add callback to Drawn signal handler\nMyTextView.Drawn += widgetDrawn;  // where you build your form / set up your widget\n\n....\n\n// this works on any widget, labels and containers included\nprivate void widgetDrawn(object sender, DrawnArgs e)\n{\n    e.Cr.SetSourceRGB(1, 0, 0);  // red - so ya won't miss it.\n    e.Cr.Rectangle(0, 0, ((Widget)sender).Allocation.Width, ((Widget)sender).Allocation.Height);\n    // thicker line --&gt; e.Cr.LineWidth = 1;  // ... default is 1\n    e.Cr.Stroke();\n}\n</code></pre>\n\n<ul>\n<li>It works on any widget including labels and containers</li>\n<li>the RGB is Cairo style (double prec.) 0.0000..1.0), i.e. light grey: (0.828, 0.828, 0.828)</li>\n<li>the line is drawn <strong>inside</strong> the allocated widget area (i.e. the wider you make <code>LineWidth</code> the less area left inside for your widget's contents.</li>\n<li>clipping is all taken care of (i.e. overlapping / beyond window borders)<br><br></li>\n</ul>\n\n<p><strong>NOTE:</strong> if instead you're overriding (inherited class or similar) with:  <code>protected override bool OnDrawn(Cairo.Context cr) { ... }</code><br>\n-- call <code>base.OnDrawn(cr)</code> before you add the border,<br>\n-- and be sure to return the bool result.</p>\n"}], "owner": {"reputation": 700, "user_id": 1208630, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/QBADm.jpg?s=128&g=1", "display_name": "bunny1985", "link": "https://stackoverflow.com/users/1208630/bunny1985"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 339, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1587913574, "creation_date": 1516828425, "last_edit_date": 1516895349, "question_id": 48431689, "link": "https://stackoverflow.com/questions/48431689/python-gtk-textview-border-not-working-from-css", "title": "Python gtk TextView border not working from css", "body": "<p>I have really strange situation. \nFrom the gtk css style I can apply for example background color, order radius, but i cant make the border to be visible. \nThe file is ultra simple:</p>\n\n<pre><code>GtkTextView  {\n\n    border-radius: 3px;\n    border-width: 1px 1px 2px 1px;\n    border-style: solid;\n    border-color: #000;\n    /*background-color: #0000ff;*/\n    }\n</code></pre>\n\n<p>What am I doing wrong ?</p>\n"}, {"tags": ["python", "python-3.x", "sqlite"], "answers": [{"comments": [{"owner": {"reputation": 3670, "user_id": 7857466, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7OW0s.png?s=128&g=1", "display_name": "progmatico", "link": "https://stackoverflow.com/users/7857466/progmatico"}, "edited": false, "score": 0, "creation_date": 1516830331, "post_id": 48431976, "comment_id": 83855405, "body": "The top of our answer might suggest OP that he really needs two cursors, but storing the query rows result for use in the loop enables him to use just one, if he likes to do so, like suggested in the other answer."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 3670, "user_id": 7857466, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7OW0s.png?s=128&g=1", "display_name": "progmatico", "link": "https://stackoverflow.com/users/7857466/progmatico"}, "edited": false, "score": 0, "creation_date": 1516830461, "post_id": 48431976, "comment_id": 83855467, "body": "@progmatico That&#39;s another way to do it, but it means all the results have to be stored in memory. Not a big deal for a small query like this, but could be an issue for larger queries."}, {"owner": {"reputation": 3670, "user_id": 7857466, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7OW0s.png?s=128&g=1", "display_name": "progmatico", "link": "https://stackoverflow.com/users/7857466/progmatico"}, "edited": false, "score": 0, "creation_date": 1516830587, "post_id": 48431976, "comment_id": 83855534, "body": "I agree with you. Cursors exist for a reason :)"}, {"owner": {"reputation": 43, "user_id": 9264242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a7abd810084c3cce66d1959d71f49f6?s=128&d=identicon&r=PG&f=1", "display_name": "John G", "link": "https://stackoverflow.com/users/9264242/john-g"}, "edited": false, "score": 0, "creation_date": 1516831407, "post_id": 48431976, "comment_id": 83855984, "body": "Thanks for the answers guys!!! I will have to agree with CL its not working. Allow me to clarify that I am working with two tables one is the airports from which I take lat_decimal, lon_decimal and I calculate delta distance which I want to store in the newly created table under the name Ports. any ideas?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1516831574, "post_id": 48431976, "comment_id": 83856060, "body": "Sorry, I copied that formula from a MySQL answer, I didn&#39;t realize that SQLite doesn&#39;t have similar functions."}], "tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": false, "score": 1, "last_activity_date": 1516831603, "last_edit_date": 1516831603, "creation_date": 1516829675, "answer_id": 48431976, "question_id": 48431679, "link": "https://stackoverflow.com/questions/48431679/using-a-for-loop-in-python3-to-create-a-3-columns-x-10-rows-table-in-sqlite3/48431976#48431976", "title": "using a For loop in python3 to create a 3 columns x 10 rows table in sqlite3", "body": "<p>You need to use two different cursors, one for the <code>SELECT</code> query and another for the <code>INSERT</code>. When you do the first <code>INSERT</code> query, the cursor no longer holds the remaining results of the <code>SELECT</code> query, so the loop ends.</p>\n\n<pre><code>from math import sin, cos, sqrt, atan2, radians\nimport sqlite3\n\nR = 6373.0\n\nconn = sqlite3.connect('global_airports_sqlite.db')\ncur = conn.cursor()\ncur2 = conn.cursor()\ncur.execute('DROP TABLE IF EXISTS Ports')\ncur.execute('''\nCREATE TABLE Ports ( Delta INTEGER, City TEXT, Country TEXT )''')\ncoords= 'SELECT lat_decimal, lon_decimal, city, country FROM airports ORDER   \nBY id ASC LIMIT 10'\nfor cord in cur.execute(coords):\n     lat2 = radians(cord[0])\n     lon2 = radians(cord[1])\n     cty = cord[2]\n     ctry = cord[3]\n     dlon = lon2 - lon1\n     dlat = lat2 - lat1\n     a = sin(dlat / 2)**2 + cos(lat1) * cos(lat2) * sin(dlon / 2)**2\n     c = 2 * atan2(sqrt(a), sqrt(1 - a))\n     distance = int(R * c)\n     cur2.execute('INSERT INTO Ports (Delta, City, Country) VALUES (?,?,?)',\n     (distance, cty, ctry))\n     conn.commit()\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 43, "user_id": 9264242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a7abd810084c3cce66d1959d71f49f6?s=128&d=identicon&r=PG&f=1", "display_name": "John G", "link": "https://stackoverflow.com/users/9264242/john-g"}, "edited": false, "score": 1, "creation_date": 1516904712, "post_id": 48432017, "comment_id": 83891801, "body": "I worked it a bit more and you are right! it is better to fetchall() from the table do my calculations with a loop and then use cur.executemany to store the new values into a new table Ports. thanks!"}], "tags": [], "owner": {"reputation": 146, "user_id": 6531051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98f2a4f097bba47916d5c68c040f2347?s=128&d=identicon&r=PG&f=1", "display_name": "Yikang Luo", "link": "https://stackoverflow.com/users/6531051/yikang-luo"}, "is_accepted": false, "score": 2, "last_activity_date": 1516830405, "last_edit_date": 1516830405, "creation_date": 1516829874, "answer_id": 48432017, "question_id": 48431679, "link": "https://stackoverflow.com/questions/48431679/using-a-for-loop-in-python3-to-create-a-3-columns-x-10-rows-table-in-sqlite3/48432017#48432017", "title": "using a For loop in python3 to create a 3 columns x 10 rows table in sqlite3", "body": "<p>i am not sure about <code>sqlite3</code> package, I am using <code>pymysql</code> personally; however, I think the flow should be the same;</p>\n\n<p>Thus, I think before you start your for loop, probably you need to fetch your data first?</p>\n\n<pre><code>...\ncur.execute('DROP TABLE IF EXISTS Ports')\ncur.execute('''\nCREATE TABLE Ports ( Delta INTEGER, City TEXT, Country TEXT )''')\ncoords= 'SELECT lat_decimal, lon_decimal, city, country FROM airports ORDER BY id ASC LIMIT 10')\ncur.execute(coords)\ndata = cur.fetchall()\nfor records in data:\n  ...\n</code></pre>\n\n<p>Give it a try</p>\n"}], "owner": {"reputation": 43, "user_id": 9264242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a7abd810084c3cce66d1959d71f49f6?s=128&d=identicon&r=PG&f=1", "display_name": "John G", "link": "https://stackoverflow.com/users/9264242/john-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 272, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1516831603, "creation_date": 1516828382, "last_edit_date": 1516829056, "question_id": 48431679, "link": "https://stackoverflow.com/questions/48431679/using-a-for-loop-in-python3-to-create-a-3-columns-x-10-rows-table-in-sqlite3", "title": "using a For loop in python3 to create a 3 columns x 10 rows table in sqlite3", "body": "<p>I am using a For loop to give values to three variables distance, cty, ctry. Then I want to store the values in a table in sqlite3. Unfortunately the program stores only the first row of values of the For loop in the sqlite3 database: </p>\n\n<pre><code>14004   GOROKA  PAPUA NEW GUINEA\n</code></pre>\n\n<p>Code:</p>\n\n<pre><code>from math import sin, cos, sqrt, atan2, radians\nimport sqlite3\n\nR = 6373.0\n\nconn = sqlite3.connect('global_airports_sqlite.db')\ncur = conn.cursor()\ncur.execute('DROP TABLE IF EXISTS Ports')\ncur.execute('''\nCREATE TABLE Ports ( Delta INTEGER, City TEXT, Country TEXT )''')\ncoords= 'SELECT lat_decimal, lon_decimal, city, country FROM airports ORDER   \nBY id ASC LIMIT 10'\nfor cord in cur.execute(coords):\n lat2 = radians(cord[0])\n lon2 = radians(cord[1])\n cty = cord[2]\n ctry = cord[3]\n dlon = lon2 - lon1\n dlat = lat2 - lat1\n a = sin(dlat / 2)**2 + cos(lat1) * cos(lat2) * sin(dlon / 2)**2\n c = 2 * atan2(sqrt(a), sqrt(1 - a))\n distance = int(R * c)\n cur.execute('INSERT INTO Ports (Delta, City, Country) VALUES (?,?,?)',\n (distance, cty, ctry))\n conn.commit()\n</code></pre>\n\n<p>How can I make it store all 10 values in my three columns: Delta, City, Country?</p>\n"}, {"tags": ["python", "csv"], "comments": [{"owner": {"reputation": 1798, "user_id": 2280890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e409f9d13ce2d82edcb84b3f9cfb879?s=128&d=identicon&r=PG", "display_name": "import random", "link": "https://stackoverflow.com/users/2280890/import-random"}, "edited": false, "score": 0, "creation_date": 1516844532, "post_id": 48431644, "comment_id": 83860256, "body": "Look at a <a href=\"https://matplotlib.org/gallery.html\" rel=\"nofollow noreferrer\">examples in the matlplotlib gallery</a> and choose one that looks like what you want as a starting point to creating your own."}, {"owner": {"reputation": 11, "user_id": 9238596, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77cbe3b8fb38219f0e913b303f813dcd?s=128&d=identicon&r=PG&f=1", "display_name": "Shani", "link": "https://stackoverflow.com/users/9238596/shani"}, "reply_to_user": {"reputation": 1341, "user_id": 6388994, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00d56f9550cf209ae3c4620eb1a31109?s=128&d=identicon&r=PG&f=1", "display_name": "Usernamenotfound", "link": "https://stackoverflow.com/users/6388994/usernamenotfound"}, "edited": false, "score": 0, "creation_date": 1516854150, "post_id": 48431644, "comment_id": 83862566, "body": "@Usernamenotfound I added my tried code.Actually i do not know how to add selected row column.I am newer to language.Please give a help"}, {"owner": {"reputation": 1470, "user_id": 4374531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ecc0fcbd63c8e0a55d0c4048c7fb426?s=128&d=identicon&r=PG&f=1", "display_name": "v.coder", "link": "https://stackoverflow.com/users/4374531/v-coder"}, "edited": false, "score": 0, "creation_date": 1516855162, "post_id": 48431644, "comment_id": 83862850, "body": "Also int(column[1]) doesn&#39;t convert to date. You need to use <code>date</code> object instead."}], "answers": [{"tags": [], "owner": {"reputation": 1470, "user_id": 4374531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ecc0fcbd63c8e0a55d0c4048c7fb426?s=128&d=identicon&r=PG&f=1", "display_name": "v.coder", "link": "https://stackoverflow.com/users/4374531/v-coder"}, "is_accepted": false, "score": 0, "last_activity_date": 1516855115, "creation_date": 1516855115, "answer_id": 48435790, "question_id": 48431644, "link": "https://stackoverflow.com/questions/48431644/how-to-draw-a-graph-by-using-csv-file-in-python/48435790#48435790", "title": "How to draw a graph by using CSV file in Python", "body": "<p>In python the index of an array start from <code>0</code>, hence the code was reading the values wrongly. Please try the below code:</p>\n\n<pre><code>for column in plots:\n    dateOfx.append(datetime.datetime.strptime(column[1], '%d %b %Y'))\n    open_price_y1.append(int(column[2]))\n    close_price_y2.append(int(column[4]))\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 9238596, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77cbe3b8fb38219f0e913b303f813dcd?s=128&d=identicon&r=PG&f=1", "display_name": "Shani", "link": "https://stackoverflow.com/users/9238596/shani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 3419, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1516855115, "creation_date": 1516828209, "last_edit_date": 1516854043, "question_id": 48431644, "link": "https://stackoverflow.com/questions/48431644/how-to-draw-a-graph-by-using-csv-file-in-python", "title": "How to draw a graph by using CSV file in Python", "body": "<p>I have to draw a graph  by using stock prices in APPLE or SAMSUNG data in CVS file by using Python language.SAMSUNG and APPLE data saved in separate files in same folder.</p>\n\n<p>Desired interface like this <a href=\"https://i.stack.imgur.com/y8eng.png\" rel=\"nofollow noreferrer\">Desired Interface</a> If user select Samsung or APPLE in check box.(Only one can select at a time and draw,If I select Apple then Samsung is disabled)Then draw a graph between Date vs Open and Close by selected types from getting suitable CVS file in that folder.In here I give sample data set of apple.csv,it look likes as follows and Samsung data set also like this;</p>\n\n<pre><code>Name,Date,Open,High,Low,Close,Volume\nAAPL,02 Jan 2017,115.82,115.82,115.82,115.82,0\nAAPL,03 Jan 2017,115.8,116.33,114.76,116.15,28781800\nAAPL,04 Jan 2017,115.85,116.51,115.75,116.02,21118100\nAAPL,05 Jan 2017,115.92,116.86,115.81,116.61,22193500\n</code></pre>\n\n<p>I am newer to this language So anyone,please give any guidance to do this task.So please If anyone can give to correct guidance path to do this,it will great help for me.</p>\n\n<p>Code is I have tried:(But this is not correct because I want to selected column to draw Date vs. Open and Close)</p>\n\n<pre><code>import  matplotlib.pyplot as plt\nimport  csv\ndateOfx=[]\nopen_price_y1=[]\nclose_price_y2=[]\n\nwith open('E:\\\\Project\\Data set\\\\apple.csv','r') as csvfile:\n    plots =csv.reader(csvfile,delimiter=',')\n    for column in plots:\n        dateOfx.append(int(column[2]))\n        open_price_y1.append(int(column[3]))\n        close_price_y2.append(int(column[5]))\n\nplt.plot(dateOfx,open_price_y1,close_price_y2 ,label='Loaded from file!')\nplt.xlabel('Date')\nplt.ylabel('Open')\nplt.ylabel('Close')\n\nplt.title('Share Market Price')\nplt.legend()\nplt.show()\n</code></pre>\n"}, {"tags": ["python", "argparse", "raw-input"], "comments": [{"owner": {"reputation": 2688, "user_id": 2718295, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/7a0108422b842227a6b9cc92a5c114a5?s=128&d=identicon&r=PG", "display_name": "cowbert", "link": "https://stackoverflow.com/users/2718295/cowbert"}, "edited": false, "score": 2, "creation_date": 1516828541, "post_id": 48431642, "comment_id": 83854501, "body": "it should work if you quote the string after &#39;-m&#39;: <code>-t hi -m &quot;hello blah blah&quot;</code>"}, {"owner": {"reputation": 14460, "user_id": 1404311, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j4CQ5.jpg?s=128&g=1", "display_name": "Scott Mermelstein", "link": "https://stackoverflow.com/users/1404311/scott-mermelstein"}, "reply_to_user": {"reputation": 2688, "user_id": 2718295, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/7a0108422b842227a6b9cc92a5c114a5?s=128&d=identicon&r=PG", "display_name": "cowbert", "link": "https://stackoverflow.com/users/2718295/cowbert"}, "edited": false, "score": 0, "creation_date": 1516828720, "post_id": 48431642, "comment_id": 83854575, "body": "@cowbert That sounds like an answer to me."}, {"owner": {"reputation": 22993, "user_id": 1394393, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mSjIL.jpg?s=128&g=1", "display_name": "jpmc26", "link": "https://stackoverflow.com/users/1394393/jpmc26"}, "edited": false, "score": 0, "creation_date": 1516835885, "post_id": 48431642, "comment_id": 83857875, "body": "Do yourself a favor and use <a href=\"http://click.pocoo.org/\" rel=\"nofollow noreferrer\">click</a>"}], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 9259138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf2293851b1745888ea38747be4ec4ad?s=128&d=identicon&r=PG&f=1", "display_name": "louay_075", "link": "https://stackoverflow.com/users/9259138/louay-075"}, "edited": false, "score": 0, "creation_date": 1516828980, "post_id": 48431773, "comment_id": 83854708, "body": "hi  @davinellulinvega can you please explane more or fix my code above? and thanks"}, {"owner": {"reputation": 443, "user_id": 3897027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0be7b3bb3739cfa418020c9477a04bbc?s=128&d=identicon&r=PG&f=1", "display_name": "domochevski", "link": "https://stackoverflow.com/users/3897027/domochevski"}, "reply_to_user": {"reputation": 37, "user_id": 9259138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf2293851b1745888ea38747be4ec4ad?s=128&d=identicon&r=PG&f=1", "display_name": "louay_075", "link": "https://stackoverflow.com/users/9259138/louay-075"}, "edited": false, "score": 0, "creation_date": 1516829770, "post_id": 48431773, "comment_id": 83855131, "body": "Edited my answer with both explanation and code correction. Hope it helps."}, {"owner": {"reputation": 22993, "user_id": 1394393, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mSjIL.jpg?s=128&g=1", "display_name": "jpmc26", "link": "https://stackoverflow.com/users/1394393/jpmc26"}, "edited": false, "score": 0, "creation_date": 1516836031, "post_id": 48431773, "comment_id": 83857917, "body": "The normal way of handling this is for the caller to quote the input. I have to downvote, I&#39;m afraid."}, {"owner": {"reputation": 443, "user_id": 3897027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0be7b3bb3739cfa418020c9477a04bbc?s=128&d=identicon&r=PG&f=1", "display_name": "domochevski", "link": "https://stackoverflow.com/users/3897027/domochevski"}, "reply_to_user": {"reputation": 22993, "user_id": 1394393, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mSjIL.jpg?s=128&g=1", "display_name": "jpmc26", "link": "https://stackoverflow.com/users/1394393/jpmc26"}, "edited": false, "score": 0, "creation_date": 1516879943, "post_id": 48431773, "comment_id": 83874811, "body": "@jpmc26: I am not complaining for your downvote here, but I wish to know on what (docs, standard practise, ...) you based your judgement of this not being the &quot;normal way&quot;? Thanks in advance for clarifying this point."}], "tags": [], "owner": {"reputation": 443, "user_id": 3897027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0be7b3bb3739cfa418020c9477a04bbc?s=128&d=identicon&r=PG&f=1", "display_name": "domochevski", "link": "https://stackoverflow.com/users/3897027/domochevski"}, "is_accepted": true, "score": 1, "last_activity_date": 1516832328, "last_edit_date": 1516832328, "creation_date": 1516828821, "answer_id": 48431773, "question_id": 48431642, "link": "https://stackoverflow.com/questions/48431642/python-argparse-get-argument-from-input-raw-input/48431773#48431773", "title": "python, argparse get argument from input- raw_input", "body": "<p>Usually, when you declare a command line switch via the <strong>add_argument</strong> method, python considers that only the next world/value should be stored inside the resulting variable. That is why the following works fine:</p>\n\n<pre><code>-t hello -m world\n</code></pre>\n\n<p>While the following:</p>\n\n<pre><code>-t greetings -m hello world\n</code></pre>\n\n<p>returns something like: </p>\n\n<pre><code>greetings hello\n</code></pre>\n\n<p>Using <a href=\"https://docs.python.org/3.6/library/argparse.html?highlight=argparse#nargs\" rel=\"nofollow noreferrer\"><strong>nargs</strong></a>, you can tell python how many values should be stored in the final variable.\nFor example, in your code if you declare your command line switches as:</p>\n\n<pre><code>parser.add_argument('-t', action='store', dest='title', nargs='*', type=str, required=True)\nparser.add_argument('-m', action='store', dest='msg', nargs='*', type=str, required=True)\n</code></pre>\n\n<p>Python knows that all values following the <strong>-t</strong> switch should be stored in a list called <strong>title</strong>. The same goes for the <strong>-m</strong> switch and the <strong>msg</strong> variable.\nHere I also added the <strong>type</strong> and <strong>required</strong> arguments to indicate what type of value is expected and that both switches have to be present in the command line.</p>\n\n<hr>\n\n<p>Fixing your entire script so far:</p>\n\n<pre><code>import argparse\n\nparser = argparse.ArgumentParser() \nparser.add_argument('-t', action='store', dest='title', nargs='*', type=str, required=True)\nparser.add_argument('-m', action='store', dest='msg', nargs='*', type=str, required=True)\n\nargs = parser.parse_args()\nprint(\" \".join(args.title), \" \".join(args.msg))\n</code></pre>\n\n<p>All you have to do is call your script as follow:</p>\n\n<pre><code>python3 your_script.py -t greetings -m hello world\n</code></pre>\n\n<p>This should print:</p>\n\n<pre><code>greetings hello world\n</code></pre>\n\n<p>as a result.</p>\n"}, {"comments": [{"owner": {"reputation": 37, "user_id": 9259138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf2293851b1745888ea38747be4ec4ad?s=128&d=identicon&r=PG&f=1", "display_name": "louay_075", "link": "https://stackoverflow.com/users/9259138/louay-075"}, "edited": false, "score": 0, "creation_date": 1516829496, "post_id": 48431849, "comment_id": 83855002, "body": "Thank you guys you really help me@davinellulinvega @cowbert"}, {"owner": {"reputation": 14460, "user_id": 1404311, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j4CQ5.jpg?s=128&g=1", "display_name": "Scott Mermelstein", "link": "https://stackoverflow.com/users/1404311/scott-mermelstein"}, "edited": false, "score": 1, "creation_date": 1516831793, "post_id": 48431849, "comment_id": 83856162, "body": "While the positional argument note is important, these arguments aren&#39;t positional, they&#39;re &quot;optional arguments&quot;."}, {"owner": {"reputation": 22993, "user_id": 1394393, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mSjIL.jpg?s=128&g=1", "display_name": "jpmc26", "link": "https://stackoverflow.com/users/1394393/jpmc26"}, "edited": false, "score": 0, "creation_date": 1516835995, "post_id": 48431849, "comment_id": 83857908, "body": "Quoting is absolutely the standard solution here; users of command lines tools will <i>expect</i> to need to do so. I wouldn&#39;t even mention the <code>nargs</code> bit."}], "tags": [], "owner": {"reputation": 2688, "user_id": 2718295, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/7a0108422b842227a6b9cc92a5c114a5?s=128&d=identicon&r=PG", "display_name": "cowbert", "link": "https://stackoverflow.com/users/2718295/cowbert"}, "is_accepted": false, "score": 2, "last_activity_date": 1516833975, "last_edit_date": 1516833975, "creation_date": 1516829125, "answer_id": 48431849, "question_id": 48431642, "link": "https://stackoverflow.com/questions/48431642/python-argparse-get-argument-from-input-raw-input/48431849#48431849", "title": "python, argparse get argument from input- raw_input", "body": "<p>You have 2 options here. Either quote the argument with spaces like so:</p>\n\n<p><code>-t Hi -m \"Hello word1 word2\"</code></p>\n\n<p>or</p>\n\n<p>use <a href=\"https://stackoverflow.com/a/48431773/2718295\">davinellulinvega's answer</a>. To get back the entire string with <code>nargs='*'</code>, you'd have to:</p>\n\n<pre><code>parser.add_argument('-t', action='store', dest='title', nargs='*')\nparser.add_argument('-m', action='store', dest='msg', nargs='*')\n\n....\n\ntitle = ' '.join(args.title)\nmsg = ' '.join(args.msg)\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 9259138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf2293851b1745888ea38747be4ec4ad?s=128&d=identicon&r=PG&f=1", "display_name": "louay_075", "link": "https://stackoverflow.com/users/9259138/louay-075"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2072, "favorite_count": 0, "accepted_answer_id": 48431773, "answer_count": 2, "score": 0, "last_activity_date": 1516833975, "creation_date": 1516828207, "last_edit_date": 1516828581, "question_id": 48431642, "link": "https://stackoverflow.com/questions/48431642/python-argparse-get-argument-from-input-raw-input", "title": "python, argparse get argument from input- raw_input", "body": "<p>I need help with this issue, I want to take an argument from user input using <code>argparse</code> save it to a variable and print out the result</p>\n\n<p>Example: \n<strong>Message to send</strong>:</p>\n\n<blockquote>\n  <p>-t Greeting -m hello guys how are you</p>\n</blockquote>\n\n<p><strong>prints out</strong>:</p>\n\n<blockquote>\n  <p>greeting hello guys how are you</p>\n</blockquote>\n\n<p>this is my code:</p>\n\n<pre><code>import argparse, shlex\nparser = argparse.ArgumentParser() \nparser.add_argument('-t', action='store', dest='title')\nparser.add_argument('-m', action='store', dest='msg')\ncommand = raw_input('message to send')\n\nargs = parser.parse_args(shlex.split(command)) \ntitle = args.title\nmsg = args.msg\nprint title, msg\n</code></pre>\n\n<p>when you enter, <code>-t hi -m hello</code>, it works fine but when you enter more then one word, it doesn't work.  Why?</p>\n"}, {"tags": ["python", "asynchronous", "tornado"], "comments": [{"owner": {"reputation": 2688, "user_id": 2718295, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/7a0108422b842227a6b9cc92a5c114a5?s=128&d=identicon&r=PG", "display_name": "cowbert", "link": "https://stackoverflow.com/users/2718295/cowbert"}, "edited": false, "score": 1, "creation_date": 1516829773, "post_id": 48431626, "comment_id": 83855133, "body": "Issue #1: You didn&#39;t yield the fetch."}, {"owner": {"reputation": 1749, "user_id": 4870273, "user_type": "registered", "accept_rate": 51, "profile_image": "https://lh5.googleusercontent.com/-XhPnCG93Opw/AAAAAAAAAAI/AAAAAAAAAco/1mGQN4mJIQk/photo.jpg?sz=128", "display_name": "luky", "link": "https://stackoverflow.com/users/4870273/luky"}, "reply_to_user": {"reputation": 2688, "user_id": 2718295, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/7a0108422b842227a6b9cc92a5c114a5?s=128&d=identicon&r=PG", "display_name": "cowbert", "link": "https://stackoverflow.com/users/2718295/cowbert"}, "edited": false, "score": 0, "creation_date": 1516829918, "post_id": 48431626, "comment_id": 83855215, "body": "aha so put sleep before fetch and yield the fetch? good idea :D i think i saw somewhere yield the sleep so i did that and didn&#39;t think about your solution"}, {"owner": {"reputation": 2688, "user_id": 2718295, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/7a0108422b842227a6b9cc92a5c114a5?s=128&d=identicon&r=PG", "display_name": "cowbert", "link": "https://stackoverflow.com/users/2718295/cowbert"}, "edited": false, "score": 1, "creation_date": 1516830095, "post_id": 48431626, "comment_id": 83855304, "body": "I thought you had to yield everything that returned a Future inside a coroutine, and fetch returns a Future..."}, {"owner": {"reputation": 1749, "user_id": 4870273, "user_type": "registered", "accept_rate": 51, "profile_image": "https://lh5.googleusercontent.com/-XhPnCG93Opw/AAAAAAAAAAI/AAAAAAAAAco/1mGQN4mJIQk/photo.jpg?sz=128", "display_name": "luky", "link": "https://stackoverflow.com/users/4870273/luky"}, "reply_to_user": {"reputation": 2688, "user_id": 2718295, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/7a0108422b842227a6b9cc92a5c114a5?s=128&d=identicon&r=PG", "display_name": "cowbert", "link": "https://stackoverflow.com/users/2718295/cowbert"}, "edited": false, "score": 0, "creation_date": 1516830466, "post_id": 48431626, "comment_id": 83855471, "body": "you are right. correct solution seems to be yield both sleep and fetch. thanks"}, {"owner": {"reputation": 2688, "user_id": 2718295, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/7a0108422b842227a6b9cc92a5c114a5?s=128&d=identicon&r=PG", "display_name": "cowbert", "link": "https://stackoverflow.com/users/2718295/cowbert"}, "edited": false, "score": 1, "creation_date": 1516830709, "post_id": 48431626, "comment_id": 83855601, "body": "if you require sleep to be executed serially after the fetch, you may need to use <code>add_done_callback</code>? Like <code>yield self.httpClient.fetch().add_done_callback(lambda: yield gen.sleep...)</code> ...?"}, {"owner": {"reputation": 1749, "user_id": 4870273, "user_type": "registered", "accept_rate": 51, "profile_image": "https://lh5.googleusercontent.com/-XhPnCG93Opw/AAAAAAAAAAI/AAAAAAAAAco/1mGQN4mJIQk/photo.jpg?sz=128", "display_name": "luky", "link": "https://stackoverflow.com/users/4870273/luky"}, "reply_to_user": {"reputation": 2688, "user_id": 2718295, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/7a0108422b842227a6b9cc92a5c114a5?s=128&d=identicon&r=PG", "display_name": "cowbert", "link": "https://stackoverflow.com/users/2718295/cowbert"}, "edited": false, "score": 0, "creation_date": 1516830900, "post_id": 48431626, "comment_id": 83855700, "body": "aha thanks. well i don&#39;t insist if it should be before the fetch or after the callback, but if i just put yield sleep and yield fetch after each other it worked just as i needed, that means requests seems to be delayed and not triggered at once. another issue is that if the handling method takes too long some requests may fail on connection timeout but maybe i will fix it by extending the timeout value. i do actually bulk db inserts after the fetch calling inserts one by one. maybe i will try some bulk inserts like using pypyodbc instead of pyodbc and saving the csv i will see."}, {"owner": {"reputation": 2688, "user_id": 2718295, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/7a0108422b842227a6b9cc92a5c114a5?s=128&d=identicon&r=PG", "display_name": "cowbert", "link": "https://stackoverflow.com/users/2718295/cowbert"}, "edited": false, "score": 1, "creation_date": 1516831472, "post_id": 48431626, "comment_id": 83856017, "body": "Related: <a href=\"https://stackoverflow.com/questions/37565024/use-tornado-future-to-fetch-url-two-different-ways-get-different-results\">Use tornado future to fetch url, two different ways get different results</a>"}], "owner": {"reputation": 1749, "user_id": 4870273, "user_type": "registered", "accept_rate": 51, "profile_image": "https://lh5.googleusercontent.com/-XhPnCG93Opw/AAAAAAAAAAI/AAAAAAAAAco/1mGQN4mJIQk/photo.jpg?sz=128", "display_name": "luky", "link": "https://stackoverflow.com/users/4870273/luky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 264, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1516828135, "creation_date": 1516828135, "question_id": 48431626, "link": "https://stackoverflow.com/questions/48431626/python-tornado-async-client", "title": "python tornado async client", "body": "<p>I created batch delayed http (async) client which allows to trigger multiple async http requests and most importantly it allows to delay the start of requests so for example 100 requests are not triggered at a time.</p>\n\n<p>But it has an issue. The http .fetch() method has a handleMethod parameter which handles the response, but I found out that if the delay (sleep) after the fetch isn't long enough the handle method is not even triggered. (maybe the request is killed or what meanwhile).</p>\n\n<p>It is probably related to .run_sync method. How to fix that? I want to put delays but dont want this issue happen.</p>\n\n<p>I need to parse the response regardless how long the request takes, regardless the following sleep call (that call has another reason as i said, and should not be related to response handling at all)</p>\n\n<pre><code>class BatchDelayedHttpClient:\n\n  def __init__(self, requestList):\n    # class members\n    self.httpClient = httpclient.AsyncHTTPClient()\n    self.requestList = requestList\n    ioloop.IOLoop.current().run_sync(self.execute)\n\n  @gen.coroutine\n  def execute(self):\n    print(\"exec start\")\n    for request in  self.requestList:\n        print(\"requesting \" + request[\"url\"])\n        self.httpClient.fetch(request[\"url\"], request[\"handleMethod\"], method=request[\"method\"], headers=request[\"headers\"], body=request[\"body\"])\n        yield gen.sleep(request[\"sleep\"])\n    print(\"exec end\")\n</code></pre>\n"}, {"tags": ["python", "flask", "celery"], "answers": [{"comments": [{"owner": {"reputation": 52, "user_id": 8197487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b64cf6115b2e9aa478b16979d780339?s=128&d=identicon&r=PG", "display_name": "Sudhanshu Prajapati", "link": "https://stackoverflow.com/users/8197487/sudhanshu-prajapati"}, "edited": false, "score": 0, "creation_date": 1598115703, "post_id": 53399244, "comment_id": 112355424, "body": "Can you help me with the code ? I tried to implement your method but i got many  error. Help needed"}], "tags": [], "owner": {"reputation": 301, "user_id": 9900323, "user_type": "registered", "profile_image": "https://graph.facebook.com/10212132357287766/picture?type=large", "display_name": "Paul Jacobs", "link": "https://stackoverflow.com/users/9900323/paul-jacobs"}, "is_accepted": false, "score": 3, "last_activity_date": 1542738281, "creation_date": 1542738281, "answer_id": 53399244, "question_id": 48431599, "link": "https://stackoverflow.com/questions/48431599/pause-celery-task/53399244#53399244", "title": "Pause celery task", "body": "<p>Faced with the same question and no good answers I came up with solution you might like and it is not dependent on the message queue you are using (aka Redis or RabbitMQ). The key for me was that the update_state method in the celery.app.task.Task class takes task_id as an optional parameter. In my case I am running long running file copy and checksum tasks through multiple worker nodes and sometimes the user wants to pause one running task to reduce performance requirements on the storage to allow other tasks to finish first. I am also running a stateless Flask REST API to initiate the backend tasks and retrieve status of running tasks so I needed a way to have an API call come in to pause and resume the tasks.</p>\n\n<p>Here is my test function which can receive a \"message\" to pause itself by monitoring it's own state:</p>\n\n<pre><code>celery.task(bind=True)\ndef long_test(self, i):\n    print('long test starting with delay of ' + str(i) + 'seconds on each loop')\n    print('task_id =' + str(self.request.id))\n    self.update_state(state='PROCESSING')\n    count = 0\n    while True:\n        task = celery.AsyncResult(self.request.id)\n        while task.state == 'PAUSING' or task.state == 'PAUSED':\n            if task.state == 'PAUSING':\n                self.update_state(state='PAUSED')\n            time.sleep(i)\n        if task.state == 'RESUME':\n            self.update_state(state='PROCESSING')\n        print('long test loop ' + str(count) + ' ' + str(task.state))\n        count += 1\n        time.sleep(i)\n</code></pre>\n\n<p>Then, in order to pause or resume I can do the following:</p>\n\n<pre><code>&gt;&gt;&gt; from project.celeryworker.tasks import long_test\n&gt;&gt;&gt; from project import create_app, make_celery\n&gt;&gt;&gt; flaskapp = create_app()\n&gt;&gt;&gt; celery = make_celery(flaskapp)\n&gt;&gt;&gt; from celery.app.task import Task\n&gt;&gt;&gt; long_test.apply_async(kwargs={'i': 5})\n&lt;AsyncResult: bf19d50f-cf04-47f0-a069-6545fb253887&gt;\n&gt;&gt;&gt; Task.update_state(self=celery, task_id='bf19d50f-cf04-47f0-a069-6545fb253887', state='PAUSING')\n&gt;&gt;&gt; celery.AsyncResult('bf19d50f-cf04-47f0-a069-6545fb253887').state\n'PAUSED'\n&gt;&gt;&gt; Task.update_state(self=celery, task_id='bf19d50f-cf04-47f0-a069-6545fb253887', state='RESUME')\n&gt;&gt;&gt; celery.AsyncResult('bf19d50f-cf04-47f0-a069-6545fb253887').state\n'PROCESSING'\n&gt;&gt;&gt; Task.update_state(self=celery, task_id='bf19d50f-cf04-47f0-a069-6545fb253887', state='PAUSING')\n&gt;&gt;&gt; celery.AsyncResult('bf19d50f-cf04-47f0-a069-6545fb253887').state\n'PAUSED'\n</code></pre>\n"}], "owner": {"reputation": 986, "user_id": 6930377, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/72345ae8dcbde9beac98f975d909e84a?s=128&d=identicon&r=PG&f=1", "display_name": "Biplov", "link": "https://stackoverflow.com/users/6930377/biplov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2800, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1542738281, "creation_date": 1516828036, "question_id": 48431599, "link": "https://stackoverflow.com/questions/48431599/pause-celery-task", "title": "Pause celery task", "body": "<p>I'm trying to pause a celery task temporary based on user button click.</p>\n\n<p>What I've done is:</p>\n\n<p>When a user clicks a button; I release an AJAX request that updates my celery task state to \"PAUSE\"</p>\n\n<p>Then; my tactic was to; when I initate a task into celery; it runs a for loop.\nEvery for loop; I read my database 'state' and see if it's set to PAUSE: if it is set to pause; I want to sleep it for 60 seconds or sleep it until user hits resume button; same idea.</p>\n\n<p>This is my code:</p>\n\n<pre><code>r  = redis.StrictRedis(host='localhost', port=6379, db=0)\n\n@celery.task(bind=True)\ndef runTask(self, arr)\n\n   for items in arr:\n      current_task_id = self.request.id\n      item = r.get('celery-task-meta-'+current_task_id)\n      load_as_json = json.loads(item)\n      if \"PAUSE\" in load_as_json['status']:\n        sleep(50) \n\n\n\n\n@app.route('/start')\ndef start_task()\n   runTask.apply_async(args=[arr])\n   return 'task started running\n</code></pre>\n\n<p>Here is how my pause API endpoint looks like:</p>\n\n<pre><code>@app.route('/stop/&lt;task_id&gt;')\ndef updateTaskState():\n  task_id = request.cookie.get('task_id')\n  loadAsJson = json.loads(r.get('celery-task-meta-'+str(task_id)))\n  loadAsJson['status'] = 'PAUSE'\n  loadAsJson.update(loadAsJson)\n  dump_as_json = json.dumps(loadAsJson)\n  updated_state = r.set('celery-task-meta-'+last_key, dump_as_json)\n  return 'updated state';\n</code></pre>\n\n<p>From what I conceptually understand; is that the reason why I'm not seeing an updated state is because; the task is already executed and isnt able to retrieve updated values from database.\nFYI: The task update state is set to PAUSE immediately; I checked this by creating a seperate script that checks state within while loop; everytime I click the button that release AJAX request to update the state; my db gets updated and it reads \"PAUSE\" on the seperate script; however within the @celery.task decorator I can't seem to get the updated state.</p>\n\n<p>Below is my seperate script I used to test; and it seems to be updatign state as expected; I just can't get the updated state within task decorator... weirdly.</p>\n\n<pre><code>r  = redis.StrictRedis(host='localhost', port=6379, db=0)\nlast_key = r.keys()\nwhile True:\n    response = r.get('celery-task-meta-b1534a87-e18b-4f0a-89e2-08348d833056')\n    loadAsJson = json.loads(response)\n    print loadAsJson['status']\n</code></pre>\n"}, {"tags": ["python", "selenium"], "comments": [{"owner": {"reputation": 2400, "user_id": 4794459, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ke4f2.jpg?s=128&g=1", "display_name": "Omar Einea", "link": "https://stackoverflow.com/users/4794459/omar-einea"}, "edited": false, "score": 0, "creation_date": 1516828429, "post_id": 48431579, "comment_id": 83854449, "body": "(Aside from the question) In Python <code>&amp;</code> is the Bitwise AND operator. You should use <code>and</code> instead."}, {"owner": {"reputation": 1, "user_id": 9264202, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78792453d751669edd5804e7e4771ee4?s=128&d=identicon&r=PG&f=1", "display_name": "SofianeHsn", "link": "https://stackoverflow.com/users/9264202/sofianehsn"}, "reply_to_user": {"reputation": 2400, "user_id": 4794459, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ke4f2.jpg?s=128&g=1", "display_name": "Omar Einea", "link": "https://stackoverflow.com/users/4794459/omar-einea"}, "edited": false, "score": 0, "creation_date": 1516828593, "post_id": 48431579, "comment_id": 83854519, "body": "thanks but its same :("}, {"owner": {"reputation": 116545, "user_id": 7429447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5a25589e600c8ae89717c14e51a6754b?s=128&d=identicon&r=PG&f=1", "display_name": "DebanjanB", "link": "https://stackoverflow.com/users/7429447/debanjanb"}, "edited": false, "score": 0, "creation_date": 1516829729, "post_id": 48431579, "comment_id": 83855101, "body": "Which locale is <code>Se d&#233;sabonner de cette cha&#238;ne</code>? How would it read in English? Can you update the exact <code>Manual Steps</code> which you are trying to <code>Automate</code>?"}, {"owner": {"reputation": 2183, "user_id": 1869007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5485a7313b368471cfe092e95fd7bea?s=128&d=identicon&r=PG", "display_name": "Lucas Tierney", "link": "https://stackoverflow.com/users/1869007/lucas-tierney"}, "edited": false, "score": 0, "creation_date": 1516846558, "post_id": 48431579, "comment_id": 83860741, "body": "I can&#39;t think of any reason you would want to create such a bot that would be in line with Youtube&#39;s TOS"}], "answers": [{"tags": [], "owner": {"reputation": 1071, "user_id": 3358202, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/HgtiE.jpg?s=128&g=1", "display_name": "RKelley", "link": "https://stackoverflow.com/users/3358202/rkelley"}, "is_accepted": false, "score": 0, "last_activity_date": 1516830495, "creation_date": 1516830495, "answer_id": 48432179, "question_id": 48431579, "link": "https://stackoverflow.com/questions/48431579/subscribe-button-youtube-with-selenium-python/48432179#48432179", "title": "subscribe button youtube with selenium python", "body": "<p>When I want to check for elements that only sometimes will show up, I do a find_elements... first and if the length of the list is greater than 0 then I know it is there.</p>\n\n<pre><code>my_list = driver.find_elements_by_class_name('some class name')\n\nif len(my_list) &gt; 0:\n\n    Element exists so now do something\n</code></pre>\n\n<p>Your code will generate an error because Selenium will search for the element first before executing is_displayed() if that element does not exist.</p>\n"}], "owner": {"reputation": 1, "user_id": 9264202, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78792453d751669edd5804e7e4771ee4?s=128&d=identicon&r=PG&f=1", "display_name": "SofianeHsn", "link": "https://stackoverflow.com/users/9264202/sofianehsn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 332, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1608919303, "creation_date": 1516827956, "last_edit_date": 1516828329, "question_id": 48431579, "link": "https://stackoverflow.com/questions/48431579/subscribe-button-youtube-with-selenium-python", "title": "subscribe button youtube with selenium python", "body": "<p>I'm creating a bot with python &amp; selenium to subscribe to a list of channels. The problem I'm having is that sometimes its already subscribed and errors. I'm therefore trying to make a function to check if its already subscribed with <code>is_displayed()</code> but it what i've tried isn't working.</p>\n\n<p>The error message I receive is</p>\n\n<blockquote>\n  <p>:Message: no such element: unable to locate element ( <a href=\"https://prnt.sc/i54an3\" rel=\"nofollow noreferrer\">https://prnt.sc/i54an3</a> )</p>\n</blockquote>\n\n<p>And my code is:</p>\n\n<pre><code>if driver.find_element_by_xpath('//paper-button[@subscribed=\"\"]').is_displayed() &amp; driver.find_element_by_xpath('//paper-button[@aria-label=\"Se d\u00e9sabonner de cette cha\u00eene\"]').is_displayed():\ndo what i want\nelse:\ndo what i want\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "https", "urllib", "proxies"], "owner": {"reputation": 43, "user_id": 8827047, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b2dcfa0cb8412add1b15467be072dc2?s=128&d=identicon&r=PG&f=1", "display_name": "Mruusi", "link": "https://stackoverflow.com/users/8827047/mruusi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 243, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1516828154, "creation_date": 1516827833, "last_edit_date": 1516828154, "question_id": 48431554, "link": "https://stackoverflow.com/questions/48431554/how-to-make-requests-to-a-https-page-using-urllib-and-proxies-on-python3", "title": "How to make requests to a HTTPS page using urllib and proxies on python3", "body": "<p>I am making something where I need to be sending requests with post data to a https page. While trying to make this I got the following error.</p>\n\n<pre><code>urllib.error.HTTPError: HTTP Error 500: Domain Not Found\n</code></pre>\n\n<p>So I made something else really quick just for testing.</p>\n\n<pre><code>from urllib.request import Request, urlopen\n\n\nproxy = [\"5.62.154.103:8085\",\"141.101.132.43:8085\"]\nindeks = 0\nfor x in range(0,2):\n\nprint(proxy[indeks])\nq = Request(\"https://stackoverflow.com/questions/2146383/https-connection-python\")\nq.set_proxy(proxy[indeks],\"http\")\n\na = urlopen(q).read()\nprint(a)\nindeks += 1\nprint(indeks)\n</code></pre>\n\n<p>And I found out this gave me the same same error.\nSo I thought this was because the page was using https? Since I had no problems requesting http pages such as \"<a href=\"http://httpbin.org/ip\" rel=\"nofollow noreferrer\">http://httpbin.org/ip</a>\".</p>\n\n<p>And https is not the problem here could someone explain me what I did wrong? </p>\n\n<p>Thank you all in advance!</p>\n"}, {"tags": ["python", "image"], "comments": [{"owner": {"reputation": 1798, "user_id": 2280890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e409f9d13ce2d82edcb84b3f9cfb879?s=128&d=identicon&r=PG", "display_name": "import random", "link": "https://stackoverflow.com/users/2280890/import-random"}, "edited": false, "score": 0, "creation_date": 1516844302, "post_id": 48431510, "comment_id": 83860200, "body": "You need to help us help you by providing more information in your <a href=\"https://stackoverflow.com/help/mcve\">question</a>. What have you tried? What frameworks are you planning on using?"}, {"owner": {"reputation": 33, "user_id": 8035330, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-0_qrhiwRL5s/AAAAAAAAAAI/AAAAAAAABzA/JsA9BplwDvM/photo.jpg?sz=128", "display_name": "Lior shem", "link": "https://stackoverflow.com/users/8035330/lior-shem"}, "reply_to_user": {"reputation": 1798, "user_id": 2280890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e409f9d13ce2d82edcb84b3f9cfb879?s=128&d=identicon&r=PG", "display_name": "import random", "link": "https://stackoverflow.com/users/2280890/import-random"}, "edited": false, "score": 0, "creation_date": 1517057181, "post_id": 48431510, "comment_id": 83945066, "body": "Well, the best thing I&#39;ve gotten is printing the picture as html page and resizing it from small to big, but someone with good eyes can already reveal the animal in the second resize. I would like to print it in parts such as from the top of the picture to the bottom in &quot;cuts&quot;"}], "owner": {"reputation": 33, "user_id": 8035330, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-0_qrhiwRL5s/AAAAAAAAAAI/AAAAAAAABzA/JsA9BplwDvM/photo.jpg?sz=128", "display_name": "Lior shem", "link": "https://stackoverflow.com/users/8035330/lior-shem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 21, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1516828832, "creation_date": 1516827673, "last_edit_date": 1516828832, "question_id": 48431510, "link": "https://stackoverflow.com/questions/48431510/make-image-html-file-but-in-parts", "title": "Make image html file but in parts", "body": "<p>I'm trying to make a game where the players see the first line of the image and they try to guess which animal is it, if no one guesses correct it adds the next line and so on until the image is clear (if someone guessed correctly they win).</p>\n\n<p>I'm having a problem where obviously I can't \"img src\" the image because I want to update the html file in parts every time the users get raw input.\nI've tried doing it with normal jpg image that opens but it says it's undisplayable unless I send the full image.</p>\n\n<p>If anyone knows how to help I'll be thankful!</p>\n\n<p>Leo.</p>\n"}, {"tags": ["python", "tensorflow", "neural-network"], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 1104724, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7522568fe4d996bc38ee8b52fb63abc2?s=128&d=identicon&r=PG", "display_name": "maxest", "link": "https://stackoverflow.com/users/1104724/maxest"}, "edited": false, "score": 0, "creation_date": 1516902167, "post_id": 48433081, "comment_id": 83890383, "body": "That indeed helped. Actually, I realized that barely one weight and one bias are not enough to model my function. With one weight and one bias I could at most achieve some linear function, not the general shape I was hoping for. So I crated a few more layers and nodes with the help of this link: <a href=\"https://www.analyticsvidhya.com/blog/2016/10/an-introduction-to-implementing-neural-networks-using-tensorflow/\" rel=\"nofollow noreferrer\">analyticsvidhya.com/blog/2016/10/&hellip;</a> See EDIT in my original question."}, {"owner": {"reputation": 61, "user_id": 1104724, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7522568fe4d996bc38ee8b52fb63abc2?s=128&d=identicon&r=PG", "display_name": "maxest", "link": "https://stackoverflow.com/users/1104724/maxest"}, "edited": false, "score": 0, "creation_date": 1516902638, "post_id": 48433081, "comment_id": 83890677, "body": "Changing initial values to random instead of zeros was also very important."}], "tags": [], "owner": {"reputation": 49730, "user_id": 349130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e4efeebbf6994bb904738c4fb8922bf?s=128&d=identicon&r=PG", "display_name": "Dr. Snoopy", "link": "https://stackoverflow.com/users/349130/dr-snoopy"}, "is_accepted": true, "score": 2, "last_activity_date": 1516834646, "creation_date": 1516834646, "answer_id": 48433081, "question_id": 48431507, "link": "https://stackoverflow.com/questions/48431507/tensorflow-approximating-a-function/48433081#48433081", "title": "TensorFlow: approximating a function", "body": "<p>The weights don't change because the output never changes, it is always 1.0, this happens because you apply softmax to a single output, instead of a vector. You should use sigmoid activation for this case.</p>\n\n<p>Just replace <code>softmax_cross_entropy_with_logits</code> with <code>sigmoid_cross_entropy_with_logits</code>. You should also initialize weights with a non-zero value, ideally a random value in a small range.</p>\n"}], "owner": {"reputation": 61, "user_id": 1104724, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7522568fe4d996bc38ee8b52fb63abc2?s=128&d=identicon&r=PG", "display_name": "maxest", "link": "https://stackoverflow.com/users/1104724/maxest"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 233, "favorite_count": 0, "accepted_answer_id": 48433081, "answer_count": 1, "score": 0, "last_activity_date": 1526375903, "creation_date": 1516827663, "last_edit_date": 1526375903, "question_id": 48431507, "link": "https://stackoverflow.com/questions/48431507/tensorflow-approximating-a-function", "title": "TensorFlow: approximating a function", "body": "<p>I wrote a simple TensorFlow program which doesn't work. Here's the problem I'm trying to solve. Given x as input, I would like to roughly evaluate a function that returns a value of 0.0 if x is in &lt;0, 0.33> or &lt;0.66, 1.0> interval, and 1.0 if x is in (0.33, 0.66) interval.</p>\n\n<p>Here is the code:</p>\n\n<pre><code>import tensorflow as tf\nimport numpy\nimport scipy\n\n\n# input and output\nx = tf.placeholder(tf.float32, shape=[None, 1])\ny_true = tf.placeholder(tf.float32, shape=[None, 1])\n\n\n# vars\nweights = tf.Variable(tf.zeros([1, 1]))\nbiases = tf.Variable(tf.zeros([1]))\n\n\nlogits = tf.matmul(x, weights) + biases\ny_pred = tf.nn.softmax(logits)\ncross_entropy = tf.nn.softmax_cross_entropy_with_logits(logits=logits, labels=y_true)\ncost = tf.reduce_mean(cross_entropy)\noptimizer = tf.train.GradientDescentOptimizer(learning_rate=0.01).minimize(cost)\n\n\nx_train = [ [0.1], [0.2], [0.3], [0.4], [0.5], [0.6], [0.7], [0.8], [0.9] ]\ny_train = [ [0.0], [0.0], [0.0], [1.0], [1.0], [1.0], [0.0], [0.0], [0.0] ]\n\n\nsess = tf.Session()\nsess.run(tf.global_variables_initializer())\nfor i in range(100):\n  sess.run(optimizer, {x: x_train, y_true: y_train})\n\n\nwe, bi = sess.run([weights, biases])\nprint(\"we: %s bi: %s\"%(we, bi))\n\nanswer = sess.run(y_pred, feed_dict={x: x_train})\nprint(answer)\n</code></pre>\n\n<p>The values in weights and biases are just plain wrong after the training. They are all 1s even after the first iteration and don't change after.</p>\n\n<p>The code I wrote is based on some code that was used for digit recognition and I thought I would \"minimize\" the problem to one number/\"pixel\".</p>\n\n<p>Any ideas what to try other than changing iterations count or learning rate?</p>\n\n<p>EDIT:\nSo I managed to solve my problem with using sigmoid, as suggested below, and using more layers. Here is the working code:</p>\n\n<pre><code>import tensorflow as tf\nimport numpy\n\n\n# consts\ninput_num_units = 1\nhidden1_num_units = 8\nhidden2_num_units = 16\noutput_num_units = 1\n\n\n# input and output\nx = tf.placeholder(tf.float32, shape=[None, 1])\ny_true = tf.placeholder(tf.float32, shape=[None, 1])\n\n\n# vars\nweights = {\n    'hidden1': tf.Variable(tf.random_normal([input_num_units, hidden1_num_units])),\n    'hidden2': tf.Variable(tf.random_normal([hidden1_num_units, hidden2_num_units])),\n    'output': tf.Variable(tf.random_normal([hidden2_num_units, output_num_units]))\n}\n\nbiases = {\n    'hidden1': tf.Variable(tf.random_normal([hidden1_num_units])),\n    'hidden2': tf.Variable(tf.random_normal([hidden2_num_units])),\n    'output': tf.Variable(tf.random_normal([output_num_units]))\n}\n\n\nhidden_layer_1 = tf.add(tf.matmul(x, weights['hidden1']), biases['hidden1'])\nhidden_layer_1 = tf.nn.sigmoid(hidden_layer_1)\n\nhidden_layer_2 = tf.add(tf.matmul(hidden_layer_1, weights['hidden2']), biases['hidden2'])\nhidden_layer_2 = tf.nn.sigmoid(hidden_layer_2)\n\noutput_layer = tf.matmul(hidden_layer_2, weights['output']) + biases['output']\noutput_value = tf.nn.sigmoid(output_layer)\n\ncost = tf.reduce_mean(tf.nn.sigmoid_cross_entropy_with_logits(logits=output_layer, labels=y_true))\noptimizer = tf.train.AdamOptimizer(learning_rate=0.01).minimize(cost)\n\n\nx_train = [ [0.1], [0.2], [0.3], [0.4], [0.5], [0.6], [0.7], [0.8], [0.9] ]\ny_train = [ [0.75], [0.0], [0.0], [1.0], [0.5], [1.0], [0.0], [0.0], [0.0] ]\n\n\nsess = tf.Session()\nsess.run(tf.global_variables_initializer())\nfor i in range(10000):\n  sess.run(optimizer, {x: x_train, y_true: y_train})\n\n\nanswer = sess.run(output_value, feed_dict={x: x_train})\nprint(answer)\n</code></pre>\n\n<p>To see whether my model works well I actually plotted a whole set of values in &lt;0, 1> interval and turned out, after going through the network, they produced pretty much what I was expecting. This can be fiddled with. I noticed for instance that the more iterations I perform the more \"steep\" the function becomes and more smooth if a few iterations and performed.</p>\n"}, {"tags": ["python", "json", "django", "serialization", "django-rest-framework"], "answers": [{"tags": [], "owner": {"reputation": 387, "user_id": 7153979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66f4031e14c9e2432394d472bc83b3c7?s=128&d=identicon&r=PG&f=1", "display_name": "duddits", "link": "https://stackoverflow.com/users/7153979/duddits"}, "is_accepted": true, "score": 2, "last_activity_date": 1516828295, "creation_date": 1516828295, "answer_id": 48431660, "question_id": 48431498, "link": "https://stackoverflow.com/questions/48431498/how-to-deserialize-nested-serializers-with-django-rest-framework/48431660#48431660", "title": "How to deserialize nested serializers with Django Rest Framework", "body": "<p>Try to change</p>\n\n<p><code>variant = models.ForeignKey(Variants, on_delete=models.CASCADE, null=False, blank=False)</code></p>\n\n<p>with</p>\n\n<p><code>variant = models.ForeignKey(Variants, related_name='options', on_delete=models.CASCADE, null=False, blank=False)</code></p>\n"}], "owner": {"reputation": 3916, "user_id": 4807542, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bd3e69bd7014594ed350ddbdefc7a4b2?s=128&d=identicon&r=PG&f=1", "display_name": "Goba", "link": "https://stackoverflow.com/users/4807542/goba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 486, "favorite_count": 0, "accepted_answer_id": 48431660, "answer_count": 1, "score": 1, "last_activity_date": 1516828295, "creation_date": 1516827613, "question_id": 48431498, "link": "https://stackoverflow.com/questions/48431498/how-to-deserialize-nested-serializers-with-django-rest-framework", "title": "How to deserialize nested serializers with Django Rest Framework", "body": "<p>i have in models.py</p>\n\n<pre><code>class Variants(Model):\n    class Meta:\n        db_table = 'variants'\n\n        id = models.AutoField(primary_key=True)\n        name = models.CharField(max_length=255, blank=False, null=False)\n        client = models.ForeignKey(Client, on_delete=models.CASCADE, null=False, blank=False)\n        created_at = models.DateField(auto_created=True, default=now, blank=True)\n        updated_at = models.DateField(auto_now=True, null=True, blank=True)\n</code></pre>\n\n<p>and</p>\n\n<pre><code>class VariantOptions(Model):\n    class Meta:\n        db_table = 'variant_options'\n\n    id = models.AutoField(primary_key=True)\n    name = models.CharField(max_length=255, blank=False, null=False)\n    variant = models.ForeignKey(Variants, on_delete=models.CASCADE, null=False, blank=False)\n    created_at = models.DateField(auto_created=True, default=now, blank=True)\n    updated_at = models.DateField(auto_now=True, null=True, blank=True)\n</code></pre>\n\n<p>and in serializers.py</p>\n\n<pre><code>class VariantOptionsSerializer(serializers.ModelSerializer):\nclass Meta:\n    model = models.VariantOptions\n    fields = ['name']\n\nclass VariantsSerializer(serializers.ModelSerializer):\n    options = VariantOptionsSerializer(many=True)\n\nclass Meta:\n    model = models.Variants\n    fields = ['name','client','options']\n\ndef create(self, validated_data):\n    options_data = validated_data.pop('options')\n    variant = models.Variants.objects.create(**validated_data)\n    for option_data in options_data:\n        models.VariantOptions.objects.create(variant=variant, **option_data)\n    return variant\n</code></pre>\n\n<p>and my view </p>\n\n<pre><code>class VariantsCreate(APIView):\n    permission_classes = (permissions.IsAuthenticated,)\n    serializer_class = serializers.VariantsSerializer\n    def post(self, request, format=None):\n        serializer = serializers.VariantsSerializer(data=request.data)\n        if serializer.is_valid():\n            saved = serializer.save()\n            return Response(serializer.data) ==&gt; serializer.data gives error\n        return Response(serializer.errors, status=status.HTTP_400_BAD_REQUEST)\n</code></pre>\n\n<p>i have this error</p>\n\n<blockquote>\n  <p>Got AttributeError when attempting to get a value for field <code>options</code> on serializer <code>VariantsSerializer</code>.\n  The serializer field might be named incorrectly and not match any attribute or key on the <code>Variants</code> instance.\n  Original exception text was: 'Variants' object has no attribute 'options'.</p>\n</blockquote>\n\n<p>but the data has already been validated by the call to is_valid()</p>\n\n<p>why <code>return Response(serializer.data)</code>  gives error ?</p>\n"}, {"tags": ["python", "pandas", "dataframe", "missing-data"], "answers": [{"comments": [{"owner": {"reputation": 365, "user_id": 9264149, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/45aa4b927dc8efa2ee413b1fc7abf3b7?s=128&d=identicon&r=PG&f=1", "display_name": "Behinoo", "link": "https://stackoverflow.com/users/9264149/behinoo"}, "edited": false, "score": 0, "creation_date": 1516828987, "post_id": 48431687, "comment_id": 83854713, "body": "Thank you for your reply. The data is really messy. I simplified it for sake of question . for ex.                                                          &lt;20100101_00:01:33.436-92.451 BLACKBOX ABCD ref 2183 value 24&gt; some times the real value is  &lt;20100101_00:01:33.436-92.451 BLACKBOX ABCDGG   32  &gt;  and sometimes &lt;20100101_00:01:33.436-92.451 BLACKBOX ABCD   54 (fjfjdjjsjjajaja)&gt;."}], "tags": [], "owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "is_accepted": false, "score": 1, "last_activity_date": 1516828416, "creation_date": 1516828416, "answer_id": 48431687, "question_id": 48431483, "link": "https://stackoverflow.com/questions/48431483/filling-data-to-pandas-dataframe-using-loop-with-text-file-that-have-missing-dat/48431687#48431687", "title": "Filling Data to pandas dataframe using loop with text file that have missing data", "body": "<p>When you work with pandas, there is no need to read the file by hand in a loop:</p>\n\n<pre><code>data = pd.read_csv('CleanLog.txt', sep='\\s+', header=None)\n</code></pre>\n\n<p>Use time (#0) and variable name (#2) as index, keep the column with variable values (#6). </p>\n\n<pre><code>columns_of_interest = ['ABCD','GFHTI']\ndata.set_index([0,2])[6].unstack()[columns_of_interest].dropna(how='all')\n#2                             ABCD  GFHTI\n#0                                        \n#20100101_00:01:33.436-92.451  24.0    NaN\n#20100101_00:01:33.638-92.651   NaN   25.0\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 365, "user_id": 9264149, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/45aa4b927dc8efa2ee413b1fc7abf3b7?s=128&d=identicon&r=PG&f=1", "display_name": "Behinoo", "link": "https://stackoverflow.com/users/9264149/behinoo"}, "edited": false, "score": 0, "creation_date": 1516836156, "post_id": 48432392, "comment_id": 83857956, "body": "Thank you so much for your help."}, {"owner": {"reputation": 365, "user_id": 9264149, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/45aa4b927dc8efa2ee413b1fc7abf3b7?s=128&d=identicon&r=PG&f=1", "display_name": "Behinoo", "link": "https://stackoverflow.com/users/9264149/behinoo"}, "edited": false, "score": 0, "creation_date": 1516838587, "post_id": 48432392, "comment_id": 83858659, "body": "just one question, I apologize if it is basic, based on this approach my column names are Time, Code and Value. how I can change them to Time,ABCD, GFHTI"}], "tags": [], "owner": {"reputation": 20427, "user_id": 2570261, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e71068b09fc539447a0cee3e99fc419d?s=128&d=identicon&r=PG&f=1", "display_name": "Haleemur Ali", "link": "https://stackoverflow.com/users/2570261/haleemur-ali"}, "is_accepted": true, "score": 1, "last_activity_date": 1516831282, "creation_date": 1516831282, "answer_id": 48432392, "question_id": 48431483, "link": "https://stackoverflow.com/questions/48431483/filling-data-to-pandas-dataframe-using-loop-with-text-file-that-have-missing-dat/48432392#48432392", "title": "Filling Data to pandas dataframe using loop with text file that have missing data", "body": "<p>you can parse the log file and only return information of interest to the DataFrame constructor</p>\n\n<p>to parse the log lines, I'm using regex here, but the actual parsing function should depend on your log format, also I assume the log file is in the path <code>log.txt</code> relative to where this script is run.</p>\n\n<pre><code>import pandas as pd\nimport re\n\ndef parse_line(line):\n    code_pattern = r'(?&lt;=BLACKBOX )\\w+'\n    value_pattern = r'(?&lt;=value )\\d+'\n    code = re.findall(code_pattern, line)[0]\n    value = re.findall(value_pattern, line)[0]\n    ts = line.split()[0]\n    return ts, code, value\n\ndef parse_filter_logfile(fname):\n    with open(fname) as f:\n       for line in f:\n           data = parse_line(line)\n           if data[1] in ['ABCD', 'GFHTI']:\n               # only yield rows that match the filter\n               yield data\n</code></pre>\n\n<p>Then feed that generator to construct a data frame</p>\n\n<pre><code>logparser = parse_filter_logfile('log.txt')\ndf = pd.DataFrame(logparser, columns = ['Time', 'Code', 'Value'])\n</code></pre>\n\n<p>finally, pivot the data frame using either of the two statements below</p>\n\n<pre><code>df.pivot(index='Time', columns='Code')\ndf.set_index(['Time', 'Code']).unstack(-1)\n</code></pre>\n\n<p>outputs the following:</p>\n\n<pre><code>                             Value      \nCode                          ABCD GFHTI\nTime                                    \n20100101_00:01:33.436-92.451    24  None\n20100101_00:01:33.638-92.651  None    25\n</code></pre>\n\n<p>Hopefully you have enough information to tackle your log file. The tricky part here is dealing with the log line parsing, and you'd have to adapt my example function to get it right.</p>\n"}], "owner": {"reputation": 365, "user_id": 9264149, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/45aa4b927dc8efa2ee413b1fc7abf3b7?s=128&d=identicon&r=PG&f=1", "display_name": "Behinoo", "link": "https://stackoverflow.com/users/9264149/behinoo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 645, "favorite_count": 0, "accepted_answer_id": 48432392, "answer_count": 2, "score": 0, "last_activity_date": 1516831282, "creation_date": 1516827542, "last_edit_date": 1516828669, "question_id": 48431483, "link": "https://stackoverflow.com/questions/48431483/filling-data-to-pandas-dataframe-using-loop-with-text-file-that-have-missing-dat", "title": "Filling Data to pandas dataframe using loop with text file that have missing data", "body": "<p>I am working on large log files (4 Gig) with 1000 of variables (ABCD,GFHTI,AAAA,BBBB,...)but I am only interested in 50 of these variables (ABCD,GFHTI,..). The structure of the log file is as follow:</p>\n\n<pre>20100101_00:01:33.436-92.451 BLACKBOX ABCD ref 2183 value 24 \n20100101_00:01:33.638-92.651 BLACKBOX GFHTI  ref 2183 value 25 \n20100101_00:01:33.817-92.851 BLACKBOX AAAA ref 2183 value 26   (Not interested in this one)\n20100101_00:01:34.017-93.051 BLACKBOX BBBB ref 2183 value 27  (Not interested\n in this one) </pre>\n\n<p>I am trying to make a pandas data frame out of the this log file which look like this.</p>\n\n<pre><code>Time                               ABCD                GFHTI \n20100101_00:01:33.436-92.451        24                 NaN \n20100101_00:01:33.638-92.651        NaN                25  \n</code></pre>\n\n<p>I could do this by using loop and appending to pandas data frame but that is not very efficient.  I can find the value and dates of the value of the interest in the log files but I don't know how to put NaN for the rest of variables for that specific date and time and at the end convert it to a data frame. \nI really appreciate if anyone can help.</p>\n\n<p>Here is part of my code</p>\n\n<pre><code>ListOfData={}\nfruit={ABCD, GFHTI}\nfor file in FileList:\n   i=i+1\n    thefile = open('CleanLog'+str(i)+'.txt', 'w')\n    with open(file,'rt') as in_file:\n        i=0\n        for linenum, line in enumerate(in_file):        # Keep track of line numbers.\n            if fruit.search(line) != None:# If substring search finds a match,\n                i=i+1\n                Loc=(fruit.search(line))\n                d = [{'Time': line[0:17], Loc.group(0): line[Loc.span()[1]:-1]}]\n                for word in Key:\n                    if word == Loc.group(0):\n                        ListOfData.append(d)\n</code></pre>\n"}, {"tags": ["python", "if-statement", "while-loop"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 2, "creation_date": 1516827610, "post_id": 48431481, "comment_id": 83854056, "body": "Do you have a <i>question</i>? Please take the <a href=\"https://stackoverflow.com/tour\">tour</a> and review <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>."}], "answers": [{"tags": [], "owner": {"reputation": 6961, "user_id": 1248974, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ClqC2.jpg?s=128&g=1", "display_name": "davedwards", "link": "https://stackoverflow.com/users/1248974/davedwards"}, "is_accepted": true, "score": 0, "last_activity_date": 1516831334, "last_edit_date": 1516831334, "creation_date": 1516830641, "answer_id": 48432220, "question_id": 48431481, "link": "https://stackoverflow.com/questions/48431481/python-score-counter-and-lives-in-game-with-while-if-elif-anf-else/48432220#48432220", "title": "Python score counter and lives in game with while, if, elif anf else", "body": "<p>A few suggestions to get your expected behavior of managing the <code>score</code> counter, <code>lives</code> and how to break the while loop.</p>\n\n<ol>\n<li>Move <code>score</code> and <code>lives</code> above the <code>while</code>-loop.<br>\nEven though you are calculating their new values within the loop, their values will reset each loop if they are defined within the loop.</li>\n<li>Use increment and decrement operators for calculations.<br>\nWhen doing calculations to assign new values, you'll want to save the <em>result</em> of the calculation back to the variable. Statements like <code>score + 1</code> and <code>lives - 1</code> have no effect on those variables until the result gets saved. You could change all <code>score + 1</code> to <code>score = score + 1</code> (or <code>score +=1</code>), and similarly change all <code>lives - 1</code> to <code>lives = lives - 1</code> (or <code>lives -=1</code>). See <a href=\"https://stackoverflow.com/questions/1485841/behaviour-of-increment-and-decrement-operators-in-python\">Behaviour of increment and decrement operators in Python</a> for more detail.</li>\n<li>Remove <em>all</em> <code>break</code> statements.<br>\n<code>break</code> is useful if and when you want to break out of the <code>while</code> loop, but since the game keeps playing (I <em>assume</em>, since you keep track of <code>lives</code>) until all lives are lost, then the loop will \"break\" when the condition <code>lives &gt; 0</code> <em>is</em> <code>False</code>.  </li>\n</ol>\n\n<p>After making these changes, your game should behave as expected.</p>\n\n<p>Hope this helps. </p>\n\n<p>BTW, good job on the game, I enjoyed playing and debugging it!</p>\n"}], "owner": {"reputation": 1, "user_id": 9264259, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VwCJa.jpg?s=128&g=1", "display_name": "Hana", "link": "https://stackoverflow.com/users/9264259/hana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 747, "favorite_count": 0, "accepted_answer_id": 48432220, "answer_count": 1, "score": -1, "last_activity_date": 1516831334, "creation_date": 1516827534, "last_edit_date": 1516827589, "question_id": 48431481, "link": "https://stackoverflow.com/questions/48431481/python-score-counter-and-lives-in-game-with-while-if-elif-anf-else", "title": "Python score counter and lives in game with while, if, elif anf else", "body": "<p>I'm trying to create this game but I'm stuck with this whole score counter lives and how to break the while loop.</p>\n\n<pre><code>player = input(\"Welcome! Let's play Rock, Paper, Scissors, Lizard, Spock. You have five lives. Press enter to start.\")\n\nfrom random import randint\n\nt = [\"rock\", \"paper\", \"scissors\", \"lizard\", \"spock\"]\n\ncomputer = t[randint(0,4)]\n\nplayer = False\n\nwhile player == False:\n\n    lives = 5\n    score = 0\n    player = input(\"rock, paper, scissors, lizard, spock?\")\n    print(\"Computer plays\",computer)\n    if player == computer:\n        print(\"Tie!\")\n        score + 1\n    elif player == \"rock\":\n        if computer == \"paper\":\n            print(\"You lose!\", computer, \"covers\", player)\n            lives - 1\n            if lives == 0:\n                print(\"Your socre is\", score)\n                break\n        elif computer == \"lizard\":\n            print(\"You win!\", player, \"crushes\", computer)\n            score + 2\n        elif computer == \"spock\":\n            print(\"You lose!\", computer, \"vaporises\", player)\n            lives - 1\n            if lives == 0:\n                print(\"Your socre is\", score)\n                break\n        else:\n            print(\"You win!\", player, \"smashes\", computer)\n            score + 2\n    elif player == \"paper\":\n        if computer == \"scissors\":\n            print(\"You lose!\", computer, \"cuts\", player)\n            lives - 1\n            if lives == 0:\n                print(\"Your socre is\", score)\n                break\n        elif computer == \"lizard\":\n            print(\"You lose!\", computer, \"eats\", player)\n            lives - 1\n            if lives == 0:\n                print(\"Your socre is\", score)\n                break\n        elif computer == \"spock\":\n            print(\"You win!\", player, \"disproves\", computer)\n            score + 2\n        else:\n            print(\"You win!\", player, \"covers\", computer)\n            score + 2\n    elif player == \"scissors\":\n        if computer == \"rock\":\n            print(\"You lose...\", computer, \"smashes\", player)\n            lives - 1\n            if lives == 0:\n                print(\"Your socre is\", score)\n                break\n        elif computer == \"spock\":\n            print(\"You lose!\", computer, \"smashes\", player)\n            lives - 1\n            if lives == 0:\n                print(\"Your socre is\", score)\n                break\n        elif computer == \"lizard\":\n            print(\"You win!\", player, \"decapitates\", computer)\n            score + 2\n        else:\n            print(\"You win!\", player, \"cuts\", computer)\n            score + 2\n    elif player == \"spock\":\n        if computer == \"lizard\":\n            print(\"You lose!\", computer, \"poisons\", player)\n            lives - 1\n            if lives == 0:\n                print(\"Your socre is\", score)\n                break\n        elif computer == \"scissors\":\n            print(\"You win!\", player, \"smashes\", computer)\n            score + 2\n        elif computer == \"rock\":\n            print(\"You win!\", player, \"vaporises\", computer)\n            score + 2\n        else:\n            print(\"You lose!\", computer, \"disproves\", player)\n            lives - 1\n            if lives == 0:\n                print(\"Your socre is\", score)\n                break\n    elif player == \"lizard\":\n        if computer == \"spock\":\n            print(\"You win!\", player, \"poisons\", computer)\n            score + 2\n        elif computer == \"rock\":\n            print(\"You lose!\", computer, \"crushes\", player)\n            lives - 1\n            if lives == 0:\n                print(\"Your socre is\", score)\n                break\n        elif computer == \"paper\":\n            print(\"You win!\", player, \"eats\", computer)\n            score + 2\n        else:\n            print(\"You lose!\", computer, \"decapitates\", player)\n            lives - 1\n            if lives == 0:\n                print(\"Your socre is\", score)\n                break\n    else:\n        print(\"That's not a valid play!\")\n    player = False\n    computer = t[randint(0,4)]\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 1711, "user_id": 2734259, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/KGX0h.jpg?s=128&g=1", "display_name": "trebleCode", "link": "https://stackoverflow.com/users/2734259/treblecode"}, "edited": false, "score": 0, "creation_date": 1516827515, "post_id": 48431456, "comment_id": 83853994, "body": "you need a <b>main</b> call in your script, see <a href=\"https://stackoverflow.com/questions/419163/what-does-if-name-main-do\" title=\"what does if name main do\">stackoverflow.com/questions/419163/what-does-if-name-main-do</a>"}, {"owner": {"reputation": 5170, "user_id": 9200529, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LgIT2.jpg?s=128&g=1", "display_name": "Nathan V\u0113rzemnieks", "link": "https://stackoverflow.com/users/9200529/nathan-v%c4%93rzemnieks"}, "edited": false, "score": 1, "creation_date": 1516827625, "post_id": 48431456, "comment_id": 83854060, "body": "Likely duplicate of [How to configure Sublime text 2 to use my installed python libraries] (<a href=\"https://stackoverflow.com/q/16945908/9200529\">stackoverflow.com/q/16945908/9200529</a>). The answer there - that you must save your buffer before trying to run it - may help you."}, {"owner": {"reputation": 2306, "user_id": 3437608, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Wif9E.jpg?s=128&g=1", "display_name": "Cullub", "link": "https://stackoverflow.com/users/3437608/cullub"}, "edited": false, "score": 0, "creation_date": 1516827885, "post_id": 48431456, "comment_id": 83854188, "body": "@inbox please use the answer section below if you&#39;ve found an answer."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "reply_to_user": {"reputation": 1711, "user_id": 2734259, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/KGX0h.jpg?s=128&g=1", "display_name": "trebleCode", "link": "https://stackoverflow.com/users/2734259/treblecode"}, "edited": false, "score": 2, "creation_date": 1516829652, "post_id": 48431456, "comment_id": 83855071, "body": "@trebleCode in general, you <i>do not</i>. I&#39;m not sure if this is something sublime-text specific, though."}, {"owner": {"reputation": 1711, "user_id": 2734259, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/KGX0h.jpg?s=128&g=1", "display_name": "trebleCode", "link": "https://stackoverflow.com/users/2734259/treblecode"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1516829691, "post_id": 48431456, "comment_id": 83855084, "body": "Fair point @juanpa.arrivillaga"}, {"owner": {"reputation": 9, "user_id": 9264277, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66124eb8fcbf81ca70f758b4f05de81c?s=128&d=identicon&r=PG&f=1", "display_name": "inbox outbox", "link": "https://stackoverflow.com/users/9264277/inbox-outbox"}, "edited": false, "score": 0, "creation_date": 1516841002, "post_id": 48431456, "comment_id": 83859379, "body": "I couldn&#39;t execute python script from command line"}, {"owner": {"reputation": 6961, "user_id": 1248974, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ClqC2.jpg?s=128&g=1", "display_name": "davedwards", "link": "https://stackoverflow.com/users/1248974/davedwards"}, "edited": false, "score": 0, "creation_date": 1516991138, "post_id": 48431456, "comment_id": 83928182, "body": "@inboxoutbox can you open python&#39;s interactive interpreter, does <code>python</code> on the command line give you the <code>&gt;&gt;&gt; </code> prompt?"}, {"owner": {"reputation": 9, "user_id": 9264277, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66124eb8fcbf81ca70f758b4f05de81c?s=128&d=identicon&r=PG&f=1", "display_name": "inbox outbox", "link": "https://stackoverflow.com/users/9264277/inbox-outbox"}, "reply_to_user": {"reputation": 6961, "user_id": 1248974, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ClqC2.jpg?s=128&g=1", "display_name": "davedwards", "link": "https://stackoverflow.com/users/1248974/davedwards"}, "edited": false, "score": 0, "creation_date": 1517016327, "post_id": 48431456, "comment_id": 83937421, "body": "@davedwards, I downloaded pycharm and I am learning python there, the problem was &quot;siri.py&quot; is saved on desktop, however in command prompt the path was different. Thank you so much for the input everyone!"}, {"owner": {"reputation": 6961, "user_id": 1248974, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ClqC2.jpg?s=128&g=1", "display_name": "davedwards", "link": "https://stackoverflow.com/users/1248974/davedwards"}, "edited": false, "score": 0, "creation_date": 1517016653, "post_id": 48431456, "comment_id": 83937476, "body": "@inboxoutbox, so you got it working? hey, that&#39;s great news! cool, I just wanted to make sure so this question can get closed. thanks for replying, and cheers!"}, {"owner": {"reputation": 9, "user_id": 9264277, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66124eb8fcbf81ca70f758b4f05de81c?s=128&d=identicon&r=PG&f=1", "display_name": "inbox outbox", "link": "https://stackoverflow.com/users/9264277/inbox-outbox"}, "reply_to_user": {"reputation": 6961, "user_id": 1248974, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ClqC2.jpg?s=128&g=1", "display_name": "davedwards", "link": "https://stackoverflow.com/users/1248974/davedwards"}, "edited": false, "score": 1, "creation_date": 1517017070, "post_id": 48431456, "comment_id": 83937535, "body": "@davedwards, You are right,  It is working, thank you!"}], "owner": {"reputation": 9, "user_id": 9264277, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66124eb8fcbf81ca70f758b4f05de81c?s=128&d=identicon&r=PG&f=1", "display_name": "inbox outbox", "link": "https://stackoverflow.com/users/9264277/inbox-outbox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 99, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1516830993, "creation_date": 1516827403, "last_edit_date": 1516830993, "question_id": 48431456, "link": "https://stackoverflow.com/questions/48431456/unable-to-execute-python-script-from-command-line", "title": "Unable to execute python script from command-line", "body": "<p>I have sublime text 3 and python 3.6 on my windows 10 os.</p>\n\n<p>I written the basic \"Hello World!\" program in sublime text 3 and saved it as \"siri.py\" on desktop. </p>\n\n<p>I am trying to execute this on command line and it says, <code>python: can't open file 'siri.py': [Error 2] no such file or directory</code></p>\n\n<p>What am I doing wrong here?</p>\n"}, {"tags": ["python", "python-2.7", "odoo-10"], "answers": [{"tags": [], "owner": {"reputation": 131, "user_id": 8774776, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-SVusS87skNc/AAAAAAAAAAI/AAAAAAAAARA/kFhR-e0aAu8/photo.jpg?sz=128", "display_name": "Devangi Shinde", "link": "https://stackoverflow.com/users/8774776/devangi-shinde"}, "is_accepted": false, "score": 1, "last_activity_date": 1517559474, "creation_date": 1517559474, "answer_id": 48578467, "question_id": 48431421, "link": "https://stackoverflow.com/questions/48431421/api-depends-doesnt-work-with-widget-mail-thread/48578467#48578467", "title": "api depends doesnt work with widget=&#39;mail_thread&#39;", "body": "<p>odoo 10 : Inherit mail.thread object in your class  and also you can add message_ids in view.you can use in any module or class.</p>\n\n<p>1) models/custom.py</p>\n\n<pre><code> class CustomDetails(models.Model):\n     _name = 'custom.details'\n     _inherit = ['mail.thread', 'ir.needaction_mixin']\n</code></pre>\n\n<p>2) views/custom_view.xml</p>\n\n<pre><code>&lt;field name=\"message_ids\" widget=\"mail_thread\"/&gt;\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 8273019, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e126fd7bf40bd2e07b6d08b1556bc3a?s=128&d=identicon&r=PG&f=1", "display_name": "limfit", "link": "https://stackoverflow.com/users/8273019/limfit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1517559474, "creation_date": 1516827286, "last_edit_date": 1517257995, "question_id": 48431421, "link": "https://stackoverflow.com/questions/48431421/api-depends-doesnt-work-with-widget-mail-thread", "title": "api depends doesnt work with widget=&#39;mail_thread&#39;", "body": "<p>I have this problem,I have a field that filter the messages when you click on Send message on the social network, but my problem is that i have to refresh the page to get the data. I wanna get it at the same time I send the message.</p>\n\n<pre><code> @api.multi\n @api.depends('message_ids')\n def _compute_defect_summary_attachment_ids(self):\n    body = ' '\n    attachments = []\n    cont = 1\n    for rec in self:\n        for msj in rec.message_ids:\n            if msj.message_type == 'comment' and msj.subtype_id.name == 'Debates':\n                soup = BeautifulSoup(msj.body)\n                body += u'- Observaci\u00f3n ' + str(cont) + ': ' + soup.text + '\\n' \\\n                        + '- Reportante: ' + msj.create_uid.name + '\\n' \\\n                        + '- Fecha: ' + msj.date + '\\n\\n'\n                cont += 1\n        rec.update({\n            'defect_summary': body})\n</code></pre>\n\n<p>Trying fixing it, I saw when I add the widget doesn't work. Any idea? I need to use the also the widget.     </p>\n"}, {"tags": ["python", "linux", "python-3.x"], "comments": [{"owner": {"reputation": 15126, "user_id": 1953800, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4173076e5187c82e74379de9aeb00aa4?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/1953800/alex"}, "edited": false, "score": 0, "creation_date": 1516827624, "post_id": 48431413, "comment_id": 83854059, "body": "Have you considered <a href=\"https://pexpect.readthedocs.io/en/stable/overview.html\" rel=\"nofollow noreferrer\"><code>pexpect</code></a>?"}, {"owner": {"reputation": 19267, "user_id": 801894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67f2ccd17aa6fd622152ad88fc2ae784?s=128&d=identicon&r=PG", "display_name": "Solomon Slow", "link": "https://stackoverflow.com/users/801894/solomon-slow"}, "reply_to_user": {"reputation": 15126, "user_id": 1953800, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4173076e5187c82e74379de9aeb00aa4?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/1953800/alex"}, "edited": false, "score": 0, "creation_date": 1516830863, "post_id": 48431413, "comment_id": 83855675, "body": "@Alex, Thank you.  It looks like maybe I could use the <code>pexpect.fdpexpect.fdspawn</code> class.  I&#39;ll have to look deeper.  Maybe your comment should be an answer."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1516840213, "post_id": 48431413, "comment_id": 83859161, "body": "Shouldn&#39;t you use <i>two</i> named pipes for this? A named pipe only has one read end and one write end. Trying to send messages bidirectionally on a named pipe seems like a bad idea."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1516840563, "post_id": 48431413, "comment_id": 83859265, "body": "Apparently they&#39;re bidirectional on some systems, but not on Linux."}], "answers": [{"tags": [], "owner": {"reputation": 5170, "user_id": 9200529, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LgIT2.jpg?s=128&g=1", "display_name": "Nathan V\u0113rzemnieks", "link": "https://stackoverflow.com/users/9200529/nathan-v%c4%93rzemnieks"}, "is_accepted": false, "score": 0, "last_activity_date": 1516831314, "creation_date": 1516831314, "answer_id": 48432398, "question_id": 48431413, "link": "https://stackoverflow.com/questions/48431413/how-to-open-delnamed-pipe-delcharacter-device-special-file-for-reading-and-w/48432398#48432398", "title": "How to open &lt;del&gt;named pipe&lt;/del&gt;character device special file for reading and writing in Python", "body": "<p>It looks like you need to create separate handles for reading and for writing: to open read/write just requires a seek method. I couldn't figure out how to timeout reading, so it's nice to add an opener (see the docstring for <code>io.open</code>) that opens the reader in non-blocking mode. I set up a simple echo service on a named pipe called <code>/tmp/test_pipe</code>:</p>\n\n<pre><code>In [1]: import io\nIn [2]: import os\nIn [3]: nonblockingOpener = lambda name, flags:os.open(name, flags|os.O_NONBLOCK)\nIn [4]: reader = io.open('/tmp/test_pipe', 'r', opener = nonblockingOpener)\nIn [5]: writer = io.open('/tmp/test_pipe', 'w')\nIn [6]: writer.write('Hi have a line\\n')\nIn [7]: writer.flush()\nIn [8]: reader.readline()\nOut[8]: 'You said: Hi have a line\\n'\nIn [9]: reader.readline()\n''\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 15126, "user_id": 1953800, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4173076e5187c82e74379de9aeb00aa4?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/1953800/alex"}, "is_accepted": false, "score": 1, "last_activity_date": 1516838081, "last_edit_date": 1592644375, "creation_date": 1516838081, "answer_id": 48433587, "question_id": 48431413, "link": "https://stackoverflow.com/questions/48431413/how-to-open-delnamed-pipe-delcharacter-device-special-file-for-reading-and-w/48433587#48433587", "title": "How to open &lt;del&gt;named pipe&lt;/del&gt;character device special file for reading and writing in Python", "body": "<h3>Solution</h3>\n<p>You can use <a href=\"https://pexpect.readthedocs.io/en/stable/overview.html#\" rel=\"nofollow noreferrer\"><code>pexpect</code></a>. Here is an example using two python modules:</p>\n<p><strong>caller.py</strong></p>\n<pre><code>import pexpect\n\nproc = pexpect.spawn('python3 backwards.py')\nproc.expect(' &gt; ')\n\nwhile True:\n\n    n = proc.sendline(input('Feed me - '))\n    proc.expect(' &gt; ')\n    print(proc.before[n+1:].decode())\n</code></pre>\n<p><strong>backwards.py</strong></p>\n<pre><code>x = ''\n\nwhile True:\n    x = input(x[::-1] + ' &gt; ')\n</code></pre>\n<h3>Explanation</h3>\n<p><code>caller.py</code> is using a &quot;Pseudo-TTY device&quot; to talk to <code>backwards.py</code>. We are providing input with <code>sendline</code> and capturing input with <code>expect</code> (and the <code>before</code> attribute).</p>\n"}, {"comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1516839851, "post_id": 48433768, "comment_id": 83859046, "body": "There&#39;s a <a href=\"https://docs.python.org/3/library/io.html#io.BufferedRWPair\" rel=\"nofollow noreferrer\">big warning</a> against doing this in the docs: &quot;Warning: BufferedRWPair does not attempt to synchronize accesses to its underlying raw streams. You should not pass it the same object as reader and writer; use BufferedRandom instead.&quot; BufferedRandom is unsuitable, though, as you explain. If the warning in the docs does not apply for this use case, can you explain why in your answer?"}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1516842738, "post_id": 48433768, "comment_id": 83859809, "body": "@user2357112: I can&#39;t find any guarantees; fundamentally what it&#39;s saying is that it doesn&#39;t do anything to keep the file pointers in sync, so if you had an actual random access stateful file object and wrapped it in <code>BufferedRWPair</code>, the operations in one direction would interfere with operations in the other direction, and more importantly, thanks to the buffering, the ordering of operations might not make sense. When the underlying object is a named pipe, there&#39;s no possibility of ambiguously ordered reads changing the &quot;position&quot; of a write, or vice versa, so I <i>think</i> it&#39;s safe."}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1516843084, "post_id": 48433768, "comment_id": 83859891, "body": "Example where a regular file would be weird would be <code>write</code>ing <code>b&#39;abc&#39;</code>, then <code>read</code>ing 3 bytes, then <code>write</code>ing <code>&#39;def&#39;</code> to a small file. If you&#39;d opened it with <code>BufferedRWPair</code>, and didn&#39;t <code>flush</code> explicitly before closing, there&#39;s a decent chance the <code>write</code>s would all get buffered, the <code>read</code> would buffer the whole contents of the file, and the <code>write</code>s would end up at the end of the file (making it longer). <code>BufferedRandom</code> would synchronize the <code>read</code>s with the <code>write</code>s, so you&#39;d actually <code>write</code> to bytes 0-2 and 6-8, reading the original bytes 3-5 as expected."}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1516843252, "post_id": 48433768, "comment_id": 83859941, "body": "By contrast, modulo deadlock concerns, a named pipe doesn&#39;t have that problem; the read and write sides are effectively independent (it always passes through the OS from write side to read side, and there is no file pointer on either side). So ignoring the possibility of deadlock (which has to be handled by <code>select</code> or <code>threading</code> related nonsense with explicit <code>flush</code>ing), the behavior for the named pipe is well defined, even when using the same handle; <code>b&#39;abcdef&#39;</code> is written in order, and <code>b&#39;abc&#39;</code> is read, assuming no other readers and writers are involved."}], "tags": [], "owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "is_accepted": true, "score": 1, "last_activity_date": 1516839879, "last_edit_date": 1516839879, "creation_date": 1516839617, "answer_id": 48433768, "question_id": 48431413, "link": "https://stackoverflow.com/questions/48431413/how-to-open-delnamed-pipe-delcharacter-device-special-file-for-reading-and-w/48433768#48433768", "title": "How to open &lt;del&gt;named pipe&lt;/del&gt;character device special file for reading and writing in Python", "body": "<p>The problem occurs because attempting to use <code>io.open</code> in read-write mode implicitly tries to wrap the underlying file in <code>io.BufferedRandom</code> (which is then wrapped in <code>io.TextIOWrapper</code> if in text mode), which assumes the underlying file is not only read/write, but random access, and it takes liberties (seeking implicitly) based on this. There is a separate class, <code>io.BufferedRWPair</code>, intended for use with read/write pipes (the docstring specifically mentions it being used for sockets and two way pipes). </p>\n\n<p>You can mimic the effects of <code>io.open</code> by manually wrapping layer by layer to produce the same end result. Specifically, for a text mode wrapper, you'd do something like:</p>\n\n<pre><code>rawf = io.FileIO(named_pipe_pathname, mode=\"rb+\")\nwith io.TextIOWrapper(io.BufferedRWPair(rawf, rawf), encoding='utf-8', write_through=True) as txtf:\n    del rawf   # Remove separate reference to rawf; txtf manages lifetime now\n    # Example use that works (but is terrible form, since communicating with\n    # oneself without threading, select module, etc., is highly likely to deadlock)\n    # It works for this super-simple case; presumably you have some parallel real code\n    txtf.write(\"abc\u00e9\\n\")\n    txtf.flush()\n    print(txtf.readline(), flush=True)\n</code></pre>\n\n<p>I believe this will close <code>rawf</code> twice when <code>txtf</code> is closed, but luckily, double-close is harmless here (the second <code>close</code> does nothing, realizing it's already closed).</p>\n"}], "owner": {"reputation": 19267, "user_id": 801894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67f2ccd17aa6fd622152ad88fc2ae784?s=128&d=identicon&r=PG", "display_name": "Solomon Slow", "link": "https://stackoverflow.com/users/801894/solomon-slow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 279, "favorite_count": 0, "accepted_answer_id": 48433768, "answer_count": 3, "score": 6, "last_activity_date": 1516891217, "creation_date": 1516827255, "last_edit_date": 1516891217, "question_id": 48431413, "link": "https://stackoverflow.com/questions/48431413/how-to-open-delnamed-pipe-delcharacter-device-special-file-for-reading-and-w", "title": "How to open &lt;del&gt;named pipe&lt;/del&gt;character device special file for reading and writing in Python", "body": "<p>I have a service running on a Linux box that creates a <del>named pipe</del> character device-special file, and I want to write a Python3 program that communicates with the service by writing text commands and reading text replies from the <del>pipe</del> device.  I don't have source code for the service.</p>\n\n<p>I can use <code>os.open(named_pipe_pathname, os.O_RDWR)</code>, and I can use <code>os.read(...)</code> and <code>os.write(...)</code> to read and write it, but that's a pain because I have to write my own code to convert between bytes and strings, I have to write my own <code>readline(...)</code> function, etc.</p>\n\n<p>I would much rather use a Python3 <code>io</code> object to read and write the <del>pipe</del> device, but every way I can think to create one returns the same error:</p>\n\n<pre><code>io.UnsupportedOperation: File or stream is not seekable.\n</code></pre>\n\n<p>For example, I get that message if I try <code>open(pathname, \"r+\")</code>, and I get that same message if I try <code>fd=os.open(...)</code> followed by <code>os.fdopen(fd, \"r+\", ...)</code>.</p>\n\n<p>Q: What is the preferred way for a Python3 program to write and read text to and from a <del>named pipe</del> character device?</p>\n\n<hr>\n\n<p>Edit:</p>\n\n<p>Oops! I assumed that I was dealing with a named pipe because documentation for the service describes it as a \"pipe\" and, because it doesn't appear in the file system until the user-mode service runs.  But, the Linux <code>file</code> utility says it is in fact, a character device special file.</p>\n"}, {"tags": ["python", "django"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user9264253"}, "edited": false, "score": 0, "creation_date": 1516827552, "post_id": 48431448, "comment_id": 83854018, "body": "Sir, now it&#39;s raising an error, <code>The &#39;profile&#39; attribute has no file associated with it.</code>"}, {"owner": {"reputation": 823, "user_id": 5949840, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NR4A7.jpg?s=128&g=1", "display_name": "Sumeet Kumar", "link": "https://stackoverflow.com/users/5949840/sumeet-kumar"}, "edited": false, "score": 0, "creation_date": 1516827828, "post_id": 48431448, "comment_id": 83854155, "body": "while uploading picture ?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9264253"}, "edited": false, "score": 0, "creation_date": 1516828021, "post_id": 48431448, "comment_id": 83854256, "body": "No Sir, while signing up!"}, {"owner": {"reputation": 823, "user_id": 5949840, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NR4A7.jpg?s=128&g=1", "display_name": "Sumeet Kumar", "link": "https://stackoverflow.com/users/5949840/sumeet-kumar"}, "edited": false, "score": 0, "creation_date": 1516828086, "post_id": 48431448, "comment_id": 83854295, "body": "are you attaching any picture during signup?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9264253"}, "edited": false, "score": 0, "creation_date": 1516828126, "post_id": 48431448, "comment_id": 83854320, "body": "I added, <code>if self.profile:</code> condition just after the super() &amp; was able to sign up, but now it&#39;s not resizing the images."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9264253"}, "edited": false, "score": 0, "creation_date": 1516828146, "post_id": 48431448, "comment_id": 83854333, "body": "No, sir. I&#39;m adding picture after user is created"}, {"owner": {"reputation": 823, "user_id": 5949840, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NR4A7.jpg?s=128&g=1", "display_name": "Sumeet Kumar", "link": "https://stackoverflow.com/users/5949840/sumeet-kumar"}, "edited": false, "score": 0, "creation_date": 1516828332, "post_id": 48431448, "comment_id": 83854417, "body": "updated my answer accordingly, need to put the code after super() inside if condition. that will only run when there is profile pic is uploaded. try now"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9264253"}, "edited": false, "score": 0, "creation_date": 1516828593, "post_id": 48431448, "comment_id": 83854520, "body": "Sir, now I can sign up properly, but now it&#39;s not resizing the images whenever I upload them, it&#39;s ignoring the resizing code &amp; uploading them just as they are. Why so?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9264253"}, "edited": false, "score": 0, "creation_date": 1516828927, "post_id": 48431448, "comment_id": 83854678, "body": "Problem solved, I added the super() after <code>if</code> condition. Now it&#39;s working fine. Thank You sir it helped me a lot :)"}, {"owner": {"reputation": 823, "user_id": 5949840, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NR4A7.jpg?s=128&g=1", "display_name": "Sumeet Kumar", "link": "https://stackoverflow.com/users/5949840/sumeet-kumar"}, "edited": false, "score": 0, "creation_date": 1516829032, "post_id": 48431448, "comment_id": 83854737, "body": "if so, then try signing up again, Super() should be called before you override save() with any code"}, {"owner": {"reputation": 823, "user_id": 5949840, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NR4A7.jpg?s=128&g=1", "display_name": "Sumeet Kumar", "link": "https://stackoverflow.com/users/5949840/sumeet-kumar"}, "edited": false, "score": 0, "creation_date": 1516829101, "post_id": 48431448, "comment_id": 83854774, "body": "glad, that helped. :)"}], "tags": [], "owner": {"reputation": 823, "user_id": 5949840, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NR4A7.jpg?s=128&g=1", "display_name": "Sumeet Kumar", "link": "https://stackoverflow.com/users/5949840/sumeet-kumar"}, "is_accepted": true, "score": 0, "last_activity_date": 1516828264, "last_edit_date": 1516828264, "creation_date": 1516827378, "answer_id": 48431448, "question_id": 48431409, "link": "https://stackoverflow.com/questions/48431409/error-no-userdetails-model-is-created/48431448#48431448", "title": "Error: No UserDetails model is Created", "body": "<p>Super must be first line after you override save()</p>\n\n<pre><code>def save(self, *args, **kwargs):\n    super(UserDetails, self).save(*args, **kwargs)\n    if self.profile:\n        img = Image.open(self.profile)\n        resize = img.resize((240, 240), Image.ANTIALIAS)\n        new_image = BytesIO()\n        resize.save(new_image, format=img.format)\n        temp_name = self.profile.name\n        self.profile.save(temp_name, content=ContentFile(new_image.getvalue()), save=False)\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9264253"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 19, "favorite_count": 0, "accepted_answer_id": 48431448, "answer_count": 1, "score": 0, "last_activity_date": 1516828264, "creation_date": 1516827227, "question_id": 48431409, "link": "https://stackoverflow.com/questions/48431409/error-no-userdetails-model-is-created", "title": "Error: No UserDetails model is Created", "body": "<p>I'm trying to reduce the image size before upload. I'm using default <code>User</code> model given by django &amp; linking it to another model just to add few more things to the user profile.</p>\n\n<p>This is how models.py looks like,</p>\n\n<pre><code>class UserDetails(models.Model):\n    user = models.OneToOneField(User)\n    profile = models.ImageField(upload_to='profile_image', blank=True)\n    ... \n\ndef save(self, *args, **kwargs):\n    img = Image.open(self.profile)\n    resize = img.resize((240, 240), Image.ANTIALIAS)\n    new_image = BytesIO()\n    resize.save(new_image, format=img.format)\n    temp_name = self.profile.name\n    self.profile.save(temp_name, content=ContentFile(new_image.getvalue()), save=False)\n    super(UserDetails, self).save(*args, **kwargs)\n</code></pre>\n\n<p>Problem is that when I'm signing up with fields <code>username</code>, <code>first_name</code> &amp; <code>password</code>, it's not creating a <code>UserDetails</code> model along with that user. So, if I try to visit any user's profile it gives an error, <code>no UserDetails model is present</code>.</p>\n\n<p>If I remove the image compression code from the model &amp; sign up again everything starts working perfectly fine.</p>\n\n<p>How can we fix that? Thank You . . . </p>\n"}, {"tags": ["python", "beautifulsoup"], "comments": [{"owner": {"reputation": 19398, "user_id": 775345, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/c6jtG.jpg?s=128&g=1", "display_name": "Robert Moskal", "link": "https://stackoverflow.com/users/775345/robert-moskal"}, "edited": false, "score": 0, "creation_date": 1516827336, "post_id": 48431401, "comment_id": 83853893, "body": "Do a wget or a curl request against &#39;<a href=\"https://eu.lolesports.com/en/schedule#slug=na-lcs\" rel=\"nofollow noreferrer\">eu.lolesports.com/en/schedule#slug=na-lcs</a>&#39;.  See whether the content is being generated via javascript."}], "answers": [{"tags": [], "owner": {"reputation": 1341, "user_id": 6388994, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00d56f9550cf209ae3c4620eb1a31109?s=128&d=identicon&r=PG&f=1", "display_name": "Usernamenotfound", "link": "https://stackoverflow.com/users/6388994/usernamenotfound"}, "is_accepted": true, "score": 0, "last_activity_date": 1516833869, "creation_date": 1516833869, "answer_id": 48432940, "question_id": 48431401, "link": "https://stackoverflow.com/questions/48431401/python-beautiful-soup-not-finding-all-links/48432940#48432940", "title": "Python Beautiful Soup: Not finding all links", "body": "<p>It looks like a javascript rendered page. You need to use a webkit library to render the page -> get the html -> scrape the html for links. </p>\n\n<p>This link should be useful: <a href=\"https://impythonist.wordpress.com/2015/01/06/ultimate-guide-for-scraping-javascript-rendered-web-pages/\" rel=\"nofollow noreferrer\">https://impythonist.wordpress.com/2015/01/06/ultimate-guide-for-scraping-javascript-rendered-web-pages/</a></p>\n"}], "owner": {"reputation": 693, "user_id": 8383850, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/08d164ea04180377780d9d255f57810b?s=128&d=identicon&r=PG&f=1", "display_name": "MathiasRa", "link": "https://stackoverflow.com/users/8383850/mathiasra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 421, "favorite_count": 0, "accepted_answer_id": 48432940, "answer_count": 1, "score": -1, "last_activity_date": 1516833869, "creation_date": 1516827208, "question_id": 48431401, "link": "https://stackoverflow.com/questions/48431401/python-beautiful-soup-not-finding-all-links", "title": "Python Beautiful Soup: Not finding all links", "body": "<p>I am trying to scrap match data for League of Legends. However, when using this link (<a href=\"https://eu.lolesports.com/en/schedule#slug=all\" rel=\"nofollow noreferrer\">https://eu.lolesports.com/en/schedule#slug=all</a>), the match links (with the button: \"Show Match\") do not show up. </p>\n\n<p>I am using the following code:</p>\n\n<pre><code>url = 'https://eu.lolesports.com/en/schedule#slug=na-lcs'\nreq = Request(url, headers={'User-Agent': 'Mozilla/5.0'})\nhtml_page = urlopen(req).read()\nsoup = BeautifulSoup(html_page, \"lxml\")\nfor a in soup.find_all('a', href=True):\n    link = (a['href'])\n    print(link)\n</code></pre>\n\n<p>I would like to find the matchlinks that have this format \"/en/lck/lck_2018_spring/match/2018-01-23/bbq-olivers-vs-rox-tigers\". But instead I only get links like these: </p>\n\n<blockquote>\n  <p><a href=\"http://euw.leagueoflegends.com/en/legal/privacy\" rel=\"nofollow noreferrer\">http://euw.leagueoflegends.com/en/legal/privacy</a>\n  <a href=\"https://euw.leagueoflegends.com/en/legal/cookie-policy\" rel=\"nofollow noreferrer\">https://euw.leagueoflegends.com/en/legal/cookie-policy</a> /en/about\n  <a href=\"http://twitch.tv/riotgames\" rel=\"nofollow noreferrer\">http://twitch.tv/riotgames</a> <a href=\"http://facebook.com/lolesports\" rel=\"nofollow noreferrer\">http://facebook.com/lolesports</a>\n  <a href=\"http://twitter.com/lolesports\" rel=\"nofollow noreferrer\">http://twitter.com/lolesports</a> <a href=\"http://youtube.com/lolesports\" rel=\"nofollow noreferrer\">http://youtube.com/lolesports</a>\n  <a href=\"http://www.azubu.tv/lolesports\" rel=\"nofollow noreferrer\">http://www.azubu.tv/lolesports</a> <a href=\"http://instagram.com/lolesports\" rel=\"nofollow noreferrer\">http://instagram.com/lolesports</a>\n  <a href=\"http://leagueoflegends.com\" rel=\"nofollow noreferrer\">http://leagueoflegends.com</a></p>\n</blockquote>\n\n<p>Is there something that can be done to change my code so I can get the matchlinks? Thanks in advance</p>\n"}, {"tags": ["python", "matplotlib"], "comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1516827102, "post_id": 48431366, "comment_id": 83853776, "body": "Are you looking for <code>[len(list(g)) for _, g in itertools.groupby(tosses)]</code>?"}, {"owner": {"reputation": 19, "user_id": 9264257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9e8e54d8b765b2b14f728b54b7fa39c?s=128&d=identicon&r=PG&f=1", "display_name": "averagej63", "link": "https://stackoverflow.com/users/9264257/averagej63"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1516827340, "post_id": 48431366, "comment_id": 83853895, "body": "I&#39;m sorry, I don&#39;t know what you&#39;re referring to"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 1, "creation_date": 1516827395, "post_id": 48431366, "comment_id": 83853919, "body": "Try <code>import itertools</code>; and then running that code and seeing if it gives you what you&#39;re looking for."}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1516827423, "post_id": 48431366, "comment_id": 83853933, "body": "Also, why do you even need separate counters, if you&#39;re just counting consecutive values of &lt;whatever&gt;?"}], "answers": [{"tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": false, "score": 1, "last_activity_date": 1516833522, "creation_date": 1516833522, "answer_id": 48432878, "question_id": 48431366, "link": "https://stackoverflow.com/questions/48431366/run-lengths-python/48432878#48432878", "title": "Run Lengths (python )", "body": "<p>You don't need separate heads and tail counters. Just use a variable to hold the previous element of the list, and compare the current element to it. If it's the same, increment the counter. If it's different, append the counter to the result list and reset the counter. After the loop, append the final counter.</p>\n\n<p>Also, <code>if True: ... elif False:</code> is nonsense. The <code>True</code> branch will always be taken. I guess you meant <code>if i == True:</code>. Or maybe <code>if i == heads:</code> (you never actually use the <code>heads</code> and <code>tails</code> variables).</p>\n\n<pre><code>import numpy as np\ndef run_lengths(n,p):\n    tosses= np.random.choice(([True, False ]),p=[p,1-p], size=n)\n    last_toss = tosses[0]\n    counter = 1\n    runlist = []\n    for toss in tosses[1:]:\n        if toss == last_toss:\n           counter += 1\n        else:\n           runlist.append(counter)\n           counter = 1\n           last_toss = toss\n    runlist.append(counter)     \n    print(runlist)\n    print(tosses)\n\nrun_lengths(15, .5)\n</code></pre>\n\n<p><a href=\"https://ideone.com/thpB64\" rel=\"nofollow noreferrer\">DEMO</a></p>\n"}], "owner": {"reputation": 19, "user_id": 9264257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9e8e54d8b765b2b14f728b54b7fa39c?s=128&d=identicon&r=PG&f=1", "display_name": "averagej63", "link": "https://stackoverflow.com/users/9264257/averagej63"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1516833522, "creation_date": 1516827029, "question_id": 48431366, "link": "https://stackoverflow.com/questions/48431366/run-lengths-python", "title": "Run Lengths (python )", "body": "<p>I'm supposed to create a list where it takes account if heads or tails is consecutive... ie. [H,H,H,T,T,H,H,T,T,H,T] = [ 3,2,2,2,1,1] \nwhy isn't this working?</p>\n\n<pre><code>from __future__ import print_function\nimport numpy as np\nimport matplotlib.pyplot as plt\ndef run_lengths(n,p):\n    tosses= np.random.choice(([True, False ]),p=[p,1-p], size=n)\n    heads= True\n    tails= False\n    heads_counter = 0\n    tails_counter=0\n    runlist=[]\n    rl=runlist\n    for i in tosses:\n        if True:\n            heads_counter+=1\n            if tosses[i+1]== False:\n                rl.append(heads_counter)\n                heads_counter=0\n        elif False:\n            tails_counter +=1\n            if tosses[i+1]== True:\n                rl.append(tails_counter)\n                tails_counter=0\n    print(runlist)\n    print(tosses)\n##print(run_lengths(10,.5))\n</code></pre>\n"}, {"tags": ["python", "python-2.7", "optimization", "import"], "answers": [{"tags": [], "owner": {"reputation": 340, "user_id": 4788717, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-2_1zzuK_Q6k/AAAAAAAAAAI/AAAAAAAAAKY/5bsGq912uPs/photo.jpg?sz=128", "display_name": "ryati", "link": "https://stackoverflow.com/users/4788717/ryati"}, "is_accepted": false, "score": 3, "last_activity_date": 1516827395, "creation_date": 1516827395, "answer_id": 48431453, "question_id": 48431345, "link": "https://stackoverflow.com/questions/48431345/organizing-imports-with-init-py/48431453#48431453", "title": "Organizing imports with __init__.py", "body": "<p>the <code>__init__.py</code> file doesn't work that way. You need to import all requirements in the file where they are needed. So in your case, you will need to <code>import requests</code> in example.py and any other file that uses requests.</p>\n\n<p>You can use <code>__init__.py</code> to have a cleaner import for your packages.</p>\n\n<p>So in your libs library, you can setup <code>__init__.py</code> to look like this:</p>\n\n<pre><code>from .scraper import MyScraper\nfrom .vulnlookup import MyFunction\n</code></pre>\n\n<p>Then if you use need to use your libs somewhere else, you can simplify the imports like this:</p>\n\n<pre><code>from .libs import MyScrapper\n#instead of: \n#from .libs.scraper import MyScraper\n</code></pre>\n"}], "owner": {"reputation": 879, "user_id": 2891052, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a1f8c59e87f64136351065dce4b53ce8?s=128&d=identicon&r=PG", "display_name": "dobbs", "link": "https://stackoverflow.com/users/2891052/dobbs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 159, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1516827395, "creation_date": 1516826920, "last_edit_date": 1516827005, "question_id": 48431345, "link": "https://stackoverflow.com/questions/48431345/organizing-imports-with-init-py", "title": "Organizing imports with __init__.py", "body": "<p>I'm writing some py 2.7 code and would like to optimize my imports. My project file structure looks like this: </p>\n\n<pre><code>.\n\u251c\u2500\u2500 example.py\n\u251c\u2500\u2500 __init__.py\n\u251c\u2500\u2500 libs\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 __init__.py\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 scraper.py\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 vulnlookup.py\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 vulnlookup.pyc\n\u2514\u2500\u2500 py-wordstress.py\n</code></pre>\n\n<p>contents of both <code>__init__.py</code> files.</p>\n\n<pre><code>import requests\n</code></pre>\n\n<p>When I try to create an object from the <code>requests</code> module in another file like <code>example.py</code>, I cannot access the methods like the module hasn't been imported. Maybe I'm totally wrong on this, but isn't there a way to only import your common libraries once inside of <code>__init__.py</code> and use them across your project? </p>\n\n<p>Essentially my main goal is to optimize imports so that I'm not doing an <code>import requests</code> in every single python file I create.</p>\n"}, {"tags": ["python", "django", "django-models"], "answers": [{"tags": [], "owner": {"reputation": 148, "user_id": 8942412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6998507b57b6801ee5b9a96e947bea34?s=128&d=identicon&r=PG&f=1", "display_name": "Palomita Ya&#241;ez Quiroz", "link": "https://stackoverflow.com/users/8942412/palomita-ya%c3%b1ez-quiroz"}, "is_accepted": false, "score": 1, "last_activity_date": 1516830824, "creation_date": 1516830824, "answer_id": 48432276, "question_id": 48431331, "link": "https://stackoverflow.com/questions/48431331/django-multiple-databases-correct-router-class/48432276#48432276", "title": "Django multiple databases - correct router class", "body": "<p>I use two db and I do it in the following way \nand I do the normal migration .  python manage.py migrate</p>\n\n<pre><code> DATABASES = {\n\n\n'default': {\n   'ENGINE': 'django.db.backends.mysql',\n   'NAME': 'xxxx',\n   'USER': 'root',\n   'PASSWORD': '',\n   'HOST': '',\n   'PORT': '',\n\n },\n 'base2': {\n       'ENGINE': 'django.db.backends.oracle',\n       'NAME': 'xxxxxx',\n       'USER': '',\n       'PASSWORD': '',\n   },\n\n}\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 9108666, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/27d43989ddfc876d4a7e63a743f164ca?s=128&d=identicon&r=PG&f=1", "display_name": "pyt ho9", "link": "https://stackoverflow.com/users/9108666/pyt-ho9"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1516830824, "creation_date": 1516826865, "question_id": 48431331, "link": "https://stackoverflow.com/questions/48431331/django-multiple-databases-correct-router-class", "title": "Django multiple databases - correct router class", "body": "<p>I would like to use two databases in my application:</p>\n\n<ul>\n<li>local database</li>\n<li>external database</li>\n</ul>\n\n<p>in the first one I want to save all django tables , e.g auth_group</p>\n\n<p>To do this I tried to use router class, but unsuccessfully - it doesn't work. Below you can find my code</p>\n\n<p>Django 1.11</p>\n\n<p>setings file:</p>\n\n<pre><code>DATABASE_ROUTERS = ['mainApp.models.DefaultDBRouter','subfolder.newApp.models.testDBRouter',]\n</code></pre>\n\n<p>models.py - main app - I want to use default DB for this model</p>\n\n<pre><code>from __future__ import unicode_literals\n\nfrom django.db import models\n\nclass list_a( models.Model ):\n    region = models.CharField(max_length=50, verbose_name=\"Region\")\n    country = models.CharField(max_length=50, verbose_name=\"Country\")\n\n    def __unicode__(self):\n        return str( self.country )\n\nclass DefaultDBRouter(object):\n    \"\"\"\n    A router to control all database operations on models in the\n    auth application.\n    \"\"\"\n\n    def db_for_read(self, model, **hints):\n        \"\"\"\n        Reads go to a default.\n        \"\"\"\n        return \"default\"\n\n    def db_for_write(self, model, **hints):\n        \"\"\"\n        Writes always go to default.\n        \"\"\"\n        return 'default'\n\n    def allow_relation(self, obj1, obj2, **hints):\n        \"\"\"\n        Relations between objects are allowed if both objects are\n        in the default.\n        \"\"\"\n        db_list = ('default')\n        if obj1._state.db in db_list and obj2._state.db in db_list:\n            return True\n        return None\n\n    def allow_migrate(self, db, app_label, model=None, **hints):\n        \"\"\"\n        All non-micro-management models end up in this pool.\n        \"\"\"\n        return True\n</code></pre>\n\n<p>models.py - test app - I want to use second db for this model</p>\n\n<pre><code>class testTable( models.Model ):\n\n    date = models.DateField(verbose_name=\"Date\")\n    number_name = models.CharField(max_length=50, verbose_name=\"Number name\")\n\n    def __unicode__(self):\n        return str( self.number_name )\n\n\nELIGIBLE_APPS = [\n   'subfolder.newApp',\n]\n\n\nclass testDBRouter(object):\n    def db_for_read(self, model, **hints):\n        print model._meta.app_label\n        if model._meta.app_label in ELIGIBLE_APPS:\n            return 'secondDB'\n        return None\n\n    def db_for_write(self, model, **hints):\n        if model._meta.app_label in ELIGIBLE_APPS:\n            return 'secondDB'\n        return None\n\n    def allow_relation(self, obj1, obj2, **hints):\n        if obj1._meta.app_label in ELIGIBLE_APPS or \\\n                obj2._meta.app_label in ELIGIBLE_APPS:\n            return True\n        return None\n\n    def allow_migrate(self, db, app_label, model_name=None, **hints):\n        if app_label in ELIGIBLE_APPS:\n            return db == 'secondDB'\n        return None\n</code></pre>\n\n<p>And if I execute the following command: </p>\n\n<pre><code>python2.7 manage.py migrate --database=secondDB\n</code></pre>\n\n<p>Then django creates all tables from both models files and standard django tables inside that database ( should create only one )</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 22377, "user_id": 2288659, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/bBg8v.png?s=128&g=1", "display_name": "Silvio Mayolo", "link": "https://stackoverflow.com/users/2288659/silvio-mayolo"}, "edited": false, "score": 1, "creation_date": 1516826783, "post_id": 48431291, "comment_id": 83853626, "body": "Python does not support overloading by design."}, {"owner": {"reputation": 2932, "user_id": 5770658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23e3e0c78a33e4620eb8436e182535e2?s=128&d=identicon&r=PG&f=1", "display_name": "internet_user", "link": "https://stackoverflow.com/users/5770658/internet-user"}, "edited": false, "score": 4, "creation_date": 1516826792, "post_id": 48431291, "comment_id": 83853629, "body": "That&#39;s not how functions work in python. They are objects, like anything else, so only one at a time can be called <code>my_function</code>."}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 2, "creation_date": 1516826812, "post_id": 48431291, "comment_id": 83853633, "body": "Because that&#39;s the only version that exists after defining all three, because it was defined last. It&#39;s not clear why you thought you <i>could</i> do this."}], "answers": [{"tags": [], "owner": {"reputation": 3325, "user_id": 4941166, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/c2c1101a15e12b67c110510ec6641128?s=128&d=identicon&r=PG&f=1", "display_name": "WNG", "link": "https://stackoverflow.com/users/4941166/wng"}, "is_accepted": false, "score": 4, "last_activity_date": 1516826839, "creation_date": 1516826839, "answer_id": 48431323, "question_id": 48431291, "link": "https://stackoverflow.com/questions/48431291/how-to-overload-a-function-in-python/48431323#48431323", "title": "How to overload a function in python?", "body": "<p>Because overloading of function does not work in python as it does in other languages.</p>\n\n<p>What I would do :</p>\n\n<pre><code>def my_function (a, b=None, c=None, d=None) :\n    if b is None:\n        subprocess.call(['proc', a])\n    elif c is None:\n        subprocess.call(['proc','-i',a,b])\n    else:\n        subprocess.call(['proc','-i',a,b,'-u',c,d])\n    return; \n</code></pre>\n\n<p>It will automatically detect the variables that you enter, and fill the ones you don't enter with None by default. Of course for it to work, your variables must never take the value of None</p>\n"}], "owner": {"reputation": 12885, "user_id": 363603, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/a17548ea579a54c180a7d37a7818501a?s=128&d=identicon&r=PG", "display_name": "u123", "link": "https://stackoverflow.com/users/363603/u123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3295, "favorite_count": 0, "closed_date": 1516826914, "answer_count": 1, "score": -1, "last_activity_date": 1516827082, "creation_date": 1516826686, "question_id": 48431291, "link": "https://stackoverflow.com/questions/48431291/how-to-overload-a-function-in-python", "closed_reason": "Duplicate", "title": "How to overload a function in python?", "body": "<p>In python I cannot seem to overload the below functions:</p>\n\n<pre><code>#!/usr/bin/env python\n\nimport subprocess\ndef my_function (a) :\n    subprocess.call(['proc', a])\n    return;\n\ndef my_function (a, b) :\n    subprocess.call(['proc','-i',a,b])\n    return;\n\ndef my_function (a, b, c, d) :\n    subprocess.call(['proc','-i',a,b,'-u',c,d])\n    return; \n</code></pre>\n\n<p>E.g. when I call with:</p>\n\n<pre><code>mymodules.my_function(\"a\", \"b\")\n</code></pre>\n\n<p>I get:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"sample.py\", line 11, in &lt;module&gt;\n    mymodules.my_function(\"a\", \"b\") \nTypeError: my_function() takes exactly 4 arguments (2 given)\n</code></pre>\n\n<p>Why does it try to call the function taking 4 arguments?</p>\n"}, {"tags": ["python", "pypi", "pypiserver"], "answers": [{"comments": [{"owner": {"reputation": 17770, "user_id": 243031, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/CDbHI.jpg?s=128&g=1", "display_name": "Nilesh", "link": "https://stackoverflow.com/users/243031/nilesh"}, "edited": false, "score": 0, "creation_date": 1516827278, "post_id": 48431365, "comment_id": 83853858, "body": "Still its same error, I think, <code>distutils</code> will be used, when you try to do <code>dist upload</code>."}, {"owner": {"reputation": 17770, "user_id": 243031, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/CDbHI.jpg?s=128&g=1", "display_name": "Nilesh", "link": "https://stackoverflow.com/users/243031/nilesh"}, "edited": false, "score": 0, "creation_date": 1516828305, "post_id": 48431365, "comment_id": 83854409, "body": "Thanks @jmunsch, but I dont want to upload. I want to download package. For <code>dist upload</code> it works, but <code>flask-mongoengine</code> is not my package, my project is depend on that."}, {"owner": {"reputation": 16137, "user_id": 2026508, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d76e464967fe7ab0b42754ae5401d3ba?s=128&d=identicon&r=PG&f=1", "display_name": "jmunsch", "link": "https://stackoverflow.com/users/2026508/jmunsch"}, "reply_to_user": {"reputation": 17770, "user_id": 243031, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/CDbHI.jpg?s=128&g=1", "display_name": "Nilesh", "link": "https://stackoverflow.com/users/243031/nilesh"}, "edited": false, "score": 0, "creation_date": 1516828626, "post_id": 48431365, "comment_id": 83854531, "body": "@Nilesh so maybe <code>--extra-index-url</code> sory thought it was a completely local pypi server?"}, {"owner": {"reputation": 16137, "user_id": 2026508, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d76e464967fe7ab0b42754ae5401d3ba?s=128&d=identicon&r=PG&f=1", "display_name": "jmunsch", "link": "https://stackoverflow.com/users/2026508/jmunsch"}, "reply_to_user": {"reputation": 17770, "user_id": 243031, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/CDbHI.jpg?s=128&g=1", "display_name": "Nilesh", "link": "https://stackoverflow.com/users/243031/nilesh"}, "edited": false, "score": 0, "creation_date": 1516832385, "post_id": 48431365, "comment_id": 83856447, "body": "@Nilesh update, so thought about it a bit, maybe try the <code>[global]</code> pip.conf stuff, I forgot that requirements.txt and pip.conf use different formats. hope it helps."}], "tags": [], "owner": {"reputation": 16137, "user_id": 2026508, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d76e464967fe7ab0b42754ae5401d3ba?s=128&d=identicon&r=PG&f=1", "display_name": "jmunsch", "link": "https://stackoverflow.com/users/2026508/jmunsch"}, "is_accepted": true, "score": 1, "last_activity_date": 1516832168, "last_edit_date": 1516832168, "creation_date": 1516827029, "answer_id": 48431365, "question_id": 48431288, "link": "https://stackoverflow.com/questions/48431288/local-pypi-package-depends-on-python-pypi-server/48431365#48431365", "title": "local pypi package depends on python pypi server", "body": "<p>specify the default to point at localhost? in <code>$HOME/.pypirc</code> :</p>\n\n<pre><code>[distutils]\nindex-servers =\n    localpypi\n\n[localpypi]\nrepository: http://localhost:8080/simple\nusername:&lt;your_localpypi_username&gt;\npassword:&lt;your_localpypi_passwd&gt;\n</code></pre>\n\n<p>A bit further up in <code>requirements.txt</code> something like this might instead work instead of <code>.pypirc</code>, or maybe it might be needed in addtion to:</p>\n\n<pre><code># requirements.txt\n--index-url http://localhost:8080/simple\n--trusted-host localhost:8080\nflask-mongoengine\n</code></pre>\n\n<p>And for <code>$HOME/.config/pip/pip.conf</code> :</p>\n\n<pre><code>[global]\ntimeout = 1\nindex-url = http://localhost:8080/simple\ntrusted-host = localhost:8080\n</code></pre>\n\n<p>ah yeah this too perhaps :</p>\n\n<ul>\n<li><a href=\"https://pypi.python.org/pypi/pypiserver#uploading-packages-remotely\" rel=\"nofollow noreferrer\">https://pypi.python.org/pypi/pypiserver#uploading-packages-remotely</a></li>\n</ul>\n\n<p>also maybe :</p>\n\n<pre><code>python setup.py dist upload -r http://localhost:8080/simple\n</code></pre>\n\n<p>If any dependencies are required from pypi then :</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/14417515/pypi-local-cache-for-jenkins-local-builds\">PyPI local cache for Jenkins/local builds</a></li>\n<li><a href=\"https://stackoverflow.com/questions/18052217/how-to-create-local-own-pypi-repository-index-without-mirror\">how to create local own pypi repository index without mirror?</a></li>\n</ul>\n\n<p>I get confused with all the places <code>--index-url</code> and <code>--extra-index-url</code> can get set, but the thought was to set the index-url for pypi, and for pip too?</p>\n"}], "owner": {"reputation": 17770, "user_id": 243031, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/CDbHI.jpg?s=128&g=1", "display_name": "Nilesh", "link": "https://stackoverflow.com/users/243031/nilesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 924, "favorite_count": 0, "accepted_answer_id": 48431365, "answer_count": 1, "score": 1, "last_activity_date": 1516832168, "creation_date": 1516826675, "last_edit_date": 1516828268, "question_id": 48431288, "link": "https://stackoverflow.com/questions/48431288/local-pypi-package-depends-on-python-pypi-server", "title": "local pypi package depends on python pypi server", "body": "<p>I created my local pypi server <code>http://localhost:8080/simple</code>. I uploaded packages <code>flask-mongoengine</code> I need for my project, but when <code>tox</code> try to do <code>pip install</code> that packages dependency for <code>nose</code>, it try to download from <code>pypi.python.org</code></p>\n\n<pre><code>Collecting flask-mongoengine==0.9.2 (from -r requirements.txt (line 14))\n  Downloading https://localhost:8080/packages/flask-mongoengine-0.9.2.tar.gz (112kB)\n    100% |\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 112kB 26.8MB/s\n    Complete output from command python setup.py egg_info:\n    Download error on https://pypi.python.org/simple/nose/: [Errno 101] Network is unreachable -- Some packages may not be found!\n    Couldn't find index page for 'nose' (maybe misspelled?)\n    Download error on https://pypi.python.org/simple/: [Errno 101] Network is unreachable -- Some packages may not be found!\n    No local packages or working download links found for nose\n    Traceback (most recent call last):\n      File \"&lt;string&gt;\", line 1, in &lt;module&gt;\n      File \"/tmp/pip-build-n57wg0y0/flask-mongoengine/setup.py\", line 74, in &lt;module&gt;\n        'Topic :: Software Development :: Libraries :: Python Modules'\n      File \"/var/lib/jenkins/.pyenv/versions/3.5.2/lib/python3.5/distutils/core.py\", line 108, in setup\n        _setup_distribution = dist = klass(attrs)\n      File \"/var/lib/jenkins/workspace/myproject/.tox/py35/lib/python3.5/site-packages/setuptools/dist.py\", line 315, in __init__\n        self.fetch_build_eggs(attrs['setup_requires'])\n      File \"/var/lib/jenkins/workspace/myproject/.tox/py35/lib/python3.5/site-packages/setuptools/dist.py\", line 361, in fetch_build_eggs\n        replace_conflicting=True,\n      File \"/var/lib/jenkins/workspace/myproject/.tox/py35/lib/python3.5/site-packages/pkg_resources/__init__.py\", line 850, in resolve\n        dist = best[req.key] = env.best_match(req, ws, installer)\n      File \"/var/lib/jenkins/workspace/myproject/.tox/py35/lib/python3.5/site-packages/pkg_resources/__init__.py\", line 1122, in best_match\n        return self.obtain(req, installer)\n      File \"/var/lib/jenkins/workspace/myproject/.tox/py35/lib/python3.5/site-packages/pkg_resources/__init__.py\", line 1134, in obtain\n        return installer(requirement)\n      File \"/var/lib/jenkins/workspace/myproject/.tox/py35/lib/python3.5/site-packages/setuptools/dist.py\", line 429, in fetch_build_egg\n        return cmd.easy_install(req)\n      File \"/var/lib/jenkins/workspace/myproject/.tox/py35/lib/python3.5/site-packages/setuptools/command/easy_install.py\", line 659, in easy_install\n        raise DistutilsError(msg)\n    distutils.errors.DistutilsError: Could not find suitable distribution for Requirement.parse('nose')\n</code></pre>\n\n<p>My <code>pypi</code> server has <code>nose</code> package, but some how, its not redirected to that.</p>\n\n<p>Tried the first answer, it gives error </p>\n\n<pre><code>Traceback (most recent call last):\n  File \"/var/lib/jenkins/workspace/myproject/.tox/py35/lib/python3.5/site-packages/pip/req/req_install.py\", line 82, in __init__\n    req = Requirement(req)\n  File \"/var/lib/jenkins/workspace/myproject/.tox/py35/lib/python3.5/site-packages/pip/_vendor/packaging/requirements.py\", line 96, in __init__\n    requirement_string[e.loc:e.loc + 8]))\npip._vendor.packaging.requirements.InvalidRequirement: Invalid requirement, parse error at \"'[global]'\"\n\nERROR: InvocationError: '/var/lib/jenkins/workspace/myproject/.tox/py35/bin/pip install -i http://localhost:8080 --trusted-host localhost:8080 -r requirements.txt'\n</code></pre>\n"}, {"tags": ["python", "tensorflow", "machine-learning", "keras", "deep-learning"], "comments": [{"owner": {"reputation": 17680, "user_id": 386738, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/VfaLu.jpg?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/386738/daniel"}, "edited": false, "score": 0, "creation_date": 1607190170, "post_id": 48431282, "comment_id": 115196680, "body": "If I&#39;m not mistaken, <code>y_true = y_true * (y_true != 0) </code> multiplies the values by 0 if they are 0, otherwise by 1, or in other words, it does nothing and therefore can be removed"}, {"owner": {"reputation": 17680, "user_id": 386738, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/VfaLu.jpg?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/386738/daniel"}, "edited": false, "score": 0, "creation_date": 1607190518, "post_id": 48431282, "comment_id": 115196790, "body": "Also, I&#39;m getting <code>TypeError: Input &#39;y&#39; of &#39;Mul&#39; Op has type bool that does not match type float32 of argument &#39;x&#39;.</code> when using <code>y_pred = y_pred * (y_true != 0)</code> in a custom loss function."}, {"owner": {"reputation": 17680, "user_id": 386738, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/VfaLu.jpg?s=128&g=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/386738/daniel"}, "edited": false, "score": 0, "creation_date": 1607190837, "post_id": 48431282, "comment_id": 115196897, "body": "I used <code>y_pred = y_pred * tf.cast((y_true != 0), &#39;float32&#39;)</code> instead"}], "answers": [{"comments": [{"owner": {"reputation": 613, "user_id": 4509378, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e0975a780764a13dc74919628a08f906?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Lawrence", "link": "https://stackoverflow.com/users/4509378/peter-lawrence"}, "edited": false, "score": 0, "creation_date": 1516875267, "post_id": 48432269, "comment_id": 83871888, "body": "Your fix worked when I also adapted the RMSE error measure in the following way, so Keras can work with it: I replaced  <code>sqrt(mean_squared_error(y_true, y_pred))</code>  with <code>def root_mean_squared_error(y_true, y_pred):     return K.sqrt(K.mean(K.square(y_pred - y_true), axis=-1))</code>"}, {"owner": {"reputation": 3947, "user_id": 7443104, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/599eeedbaf5a966b46ef5b5784741b8c?s=128&d=identicon&r=PG", "display_name": "Patwie", "link": "https://stackoverflow.com/users/7443104/patwie"}, "edited": false, "score": 0, "creation_date": 1516876284, "post_id": 48432269, "comment_id": 83872521, "body": "Consider (5,1) as pred (1,2) as true and (0,1) as the mask. The correct result would be rmse=1. But this solution would give you rmse=sqrt(0.5)!"}, {"owner": {"reputation": 34711, "user_id": 5974433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ojtxg.jpg?s=128&g=1", "display_name": "Marcin Mo\u017cejko", "link": "https://stackoverflow.com/users/5974433/marcin-mo%c5%bcejko"}, "edited": false, "score": 0, "creation_date": 1516877457, "post_id": 48432269, "comment_id": 83873255, "body": "This actually a good property of this loss - each data point has exactly the same influence - and the number of <code>na</code>s in data point is not affecting actual training process."}], "tags": [], "owner": {"reputation": 34711, "user_id": 5974433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ojtxg.jpg?s=128&g=1", "display_name": "Marcin Mo\u017cejko", "link": "https://stackoverflow.com/users/5974433/marcin-mo%c5%bcejko"}, "is_accepted": true, "score": 2, "last_activity_date": 1516830810, "creation_date": 1516830810, "answer_id": 48432269, "question_id": 48431282, "link": "https://stackoverflow.com/questions/48431282/only-evaluate-non-zero-values-of-tf-tensor/48432269#48432269", "title": "Only evaluate non-zero values of tf.Tensor", "body": "<p>Yes, indeed the problem lies in using <code>numpy</code> function. Here is a quick fix:</p>\n\n<pre><code>def evaluation_metric(y_true, y_pred):\n\n    y_true = y_true * (y_true != 0) \n    y_pred = y_pred * (y_true != 0)\n\n    error = sqrt(mean_squared_error(y_true, y_pred))\n    return error\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 613, "user_id": 4509378, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e0975a780764a13dc74919628a08f906?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Lawrence", "link": "https://stackoverflow.com/users/4509378/peter-lawrence"}, "edited": false, "score": 0, "creation_date": 1516875166, "post_id": 48437314, "comment_id": 83871830, "body": "Actually it does! I got my metric working by replacing the  <code>sqrt(mean_squared_error(y_true, y_pred))</code>  with <code>def root_mean_squared_error(y_true, y_pred):     return K.sqrt(K.mean(K.square(y_pred - y_true), axis=-1))</code>  Thanks for your suggestion, however!"}, {"owner": {"reputation": 3947, "user_id": 7443104, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/599eeedbaf5a966b46ef5b5784741b8c?s=128&d=identicon&r=PG", "display_name": "Patwie", "link": "https://stackoverflow.com/users/7443104/patwie"}, "reply_to_user": {"reputation": 613, "user_id": 4509378, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e0975a780764a13dc74919628a08f906?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Lawrence", "link": "https://stackoverflow.com/users/4509378/peter-lawrence"}, "edited": false, "score": 0, "creation_date": 1516875829, "post_id": 48437314, "comment_id": 83872229, "body": "Then it is Keras magic. But mathematically it is wrong. You do <i>not</i> get the mean of the quantity you are interested in. You get something smaller than the mean (depending on how much zeros are there). Compare what you get to my reference implementation in numpy."}, {"owner": {"reputation": 613, "user_id": 4509378, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e0975a780764a13dc74919628a08f906?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Lawrence", "link": "https://stackoverflow.com/users/4509378/peter-lawrence"}, "edited": false, "score": 0, "creation_date": 1516876651, "post_id": 48437314, "comment_id": 83872742, "body": "What is gt_op in your implementation? In my implementation I have <code>y_true</code> which is the actual output values with the zeros (<code>data</code> in your implementation?) and I have <code>y_pred</code> which is the predicted output by Keras (<code>pred_op</code> or <code>gt_op</code>?)"}], "tags": [], "owner": {"reputation": 3947, "user_id": 7443104, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/599eeedbaf5a966b46ef5b5784741b8c?s=128&d=identicon&r=PG", "display_name": "Patwie", "link": "https://stackoverflow.com/users/7443104/patwie"}, "is_accepted": false, "score": -1, "last_activity_date": 1516863805, "creation_date": 1516863805, "answer_id": 48437314, "question_id": 48431282, "link": "https://stackoverflow.com/questions/48431282/only-evaluate-non-zero-values-of-tf-tensor/48437314#48437314", "title": "Only evaluate non-zero values of tf.Tensor", "body": "<p>I would write the metric in tensorflow on my own like:</p>\n\n<pre><code>import tensorflow as tf\nimport numpy as np\n\n\ndata = np.array([0, 1, 2, 0, 0, 3, 7, 0]).astype(np.float32)\npred = np.random.randn(8).astype(np.float32)\ngt = np.random.randn(8).astype(np.float32)\n\ndata_op = tf.convert_to_tensor(data)\npred_op = tf.convert_to_tensor(pred)\ngt_op = tf.convert_to_tensor(gt)\n\nexpected = np.sqrt(((gt[data != 0] - pred[data != 0]) ** 2).mean())\n\n\ndef nonzero_mean(gt_op, pred_op, data_op):\n    mask_op = 1 - tf.cast(tf.equal(data_op, 0), tf.float32)\n\n    actual_op = ((gt_op - pred_op) * mask_op)**2\n    actual_op = tf.reduce_sum(actual_op) / tf.cast(tf.count_nonzero(mask_op), tf.float32)\n    actual_op = tf.sqrt(actual_op)\n    return actual_op\n\nwith tf.Session() as sess:\n\n    actual = sess.run(nonzero_mean(gt_op, pred_op, data_op))\n\nprint actual, expected\n</code></pre>\n\n<p>The <code>y_true != 0</code> is not possible in plain Tensorflow. Not sure, if keras does some magic here.</p>\n"}], "owner": {"reputation": 613, "user_id": 4509378, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e0975a780764a13dc74919628a08f906?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Lawrence", "link": "https://stackoverflow.com/users/4509378/peter-lawrence"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2349, "favorite_count": 0, "accepted_answer_id": 48432269, "answer_count": 2, "score": 3, "last_activity_date": 1571226911, "creation_date": 1516826661, "last_edit_date": 1571226911, "question_id": 48431282, "link": "https://stackoverflow.com/questions/48431282/only-evaluate-non-zero-values-of-tf-tensor", "title": "Only evaluate non-zero values of tf.Tensor", "body": "<p>I am training to train a Neural Network using Keras and I am using my own metric function as the loss function. The reason for this is that the actual values in the test set have a lot of NaN values. Let me give an example of the actual values in the test set:</p>\n\n<pre><code>12\nNaN\nNaN\nNaN\n8\nNaN\nNaN\n3\n</code></pre>\n\n<p>In the preprocessing of my data, I replaced all the NaN values with zeros, so the above example contains zeros on each NaN row.</p>\n\n<p>The Neural Network produces an output like this:</p>\n\n<pre><code>14\n12\n9\n9\n8\n7\n6\n3\n</code></pre>\n\n<p>I only want to calculate the root mean squared error between the non-zero values. So for the example above, it should only calculate the RMSE for rows 1, 5 and 8. To do this, I created the following function:</p>\n\n<pre><code>from sklearn.metrics import mean_squared_error\nfrom math import sqrt\n\n[...]\n\ndef evaluation_metric(y_true, y_pred):\n\ny_true = y_true[np.nonzero(y_true)]\ny_pred = y_pred[np.nonzero(y_true)]\n\nerror = sqrt(mean_squared_error(y_true, y_pred))\nreturn error\n</code></pre>\n\n<p>When you test the  function by hand, by feeding the actual values from the test set and an output from the neural network that is initialized with random weights, it works well an produces an error value. I am able to optimize the weights using an Evolutionary approach, and I am able to optimize this error measure by adjusting the weights of the network.</p>\n\n<p>Now, I want to train the network with <code>evaluation_metric</code> as the loss function using the <code>model.compile</code> function from Keras. When I run:</p>\n\n<pre><code>model.compile(loss=evaluation_metric, optimizer='rmsprop', metrics=[evaluation_metric])\n</code></pre>\n\n<p>I get the following error:</p>\n\n<blockquote>\n  <p>TypeError: Using a <code>tf.Tensor</code> as a Python <code>bool</code> is not allowed. Use <code>if t is not None:</code> instead of <code>if t:</code> to test if a tensor is defined, and use TensorFlow ops such as tf.cond to execute subgraphs conditioned on the value of a tensor.</p>\n</blockquote>\n\n<p>I think this has to do with the usage of <code>np.nonzero</code>. Since I am working with Keras, I should probably use a function of the Keras Backend, or using something like tf.cond to check for the non zero values of y_true.</p>\n\n<p>Can someone help me with this?</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>The code works after applying the following fix:</p>\n\n<pre><code>def evaluation_metric(y_true, y_pred):\n\n    y_true = y_true * (y_true != 0) \n    y_pred = y_pred * (y_true != 0)\n\n    error = root_mean_squared_error(y_true, y_pred)\n    return error\n</code></pre>\n\n<p>Along with the following function for calculating the RMSE of a tf object:</p>\n\n<pre><code>def root_mean_squared_error(y_true, y_pred):\n    return K.sqrt(K.mean(K.square(y_pred - y_true), axis=-1)) \n</code></pre>\n"}, {"tags": ["python", "oop"], "comments": [{"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 1, "creation_date": 1516826487, "post_id": 48431230, "comment_id": 83853494, "body": "Please show a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 15007, "user_id": 389289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33eab2fa999a20910a29e4a2299bc174?s=128&d=identicon&r=PG&f=1", "display_name": "zvone", "link": "https://stackoverflow.com/users/389289/zvone"}, "edited": false, "score": 2, "creation_date": 1516826527, "post_id": 48431230, "comment_id": 83853515, "body": "Short answer: no. Some attributes are in dir, but not accessible. Some are not in dir, but are accessible"}, {"owner": {"reputation": 2932, "user_id": 5770658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23e3e0c78a33e4620eb8436e182535e2?s=128&d=identicon&r=PG&f=1", "display_name": "internet_user", "link": "https://stackoverflow.com/users/5770658/internet-user"}, "edited": false, "score": 1, "creation_date": 1516826650, "post_id": 48431230, "comment_id": 83853568, "body": "All of them are accessible, but some are descriptors that don&#39;t do anything normally."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1516826730, "post_id": 48431230, "comment_id": 83853603, "body": "<code>dir</code> is designed to help you debug. Human readable if you prefer."}, {"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 1, "creation_date": 1516826934, "post_id": 48431230, "comment_id": 83853699, "body": "There&#39;s also some relevant info in Martijn&#39;s comments <a href=\"https://stackoverflow.com/questions/45426018/object-class-in-python-3/45426113#comment77825217_45426113\">here</a>."}], "owner": {"reputation": 16942, "user_id": 452102, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/6Rcyo.jpg?s=128&g=1", "display_name": "Nishant", "link": "https://stackoverflow.com/users/452102/nishant"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "closed_date": 1516826725, "answer_count": 0, "score": 0, "last_activity_date": 1516827034, "creation_date": 1516826456, "last_edit_date": 1516827034, "question_id": 48431230, "link": "https://stackoverflow.com/questions/48431230/are-all-attributes-in-dirobject-accessible-in-python", "closed_reason": "Duplicate", "title": "Are all attributes in dir(object) accessible in Python?", "body": "<p>I just did <code>dir(type)</code> and it listed a lot of things:</p>\n\n<pre><code>['__abstractmethods__', '__base__', '__bases__', '__basicsize__', '__call__', '__class__', '__delattr__', '__dict__', '__dictoffset__', '__dir__', '__doc__', '__eq__', '__flags__', '__format__', '__ge__', '__getattribute__', '__gt__', '__hash__', '__init__', '__init_subclass__', '__instancecheck__', '__itemsize__', '__le__', '__lt__', '__module__', '__mro__', '__name__', '__ne__', '__new__', '__prepare__', '__qualname__', '__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__sizeof__', '__str__', '__subclasscheck__', '__subclasses__', '__subclasshook__', '__text_signature__', '__weakrefoffset__', 'mro']\n\n&gt;&gt;&gt; type.__base__\n&lt;class 'object'&gt;\n\n&gt;&gt;&gt; type.__abstractmethods__\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nAttributeError: __abstractmethods__\n</code></pre>\n\n<p>Can some help me understand why this behavior? I was just trying to understand Python's attribute lookup and why it doesn't always check with its <code>Parent</code>. It seems like it doesn't do that always, but I need to understand why doesn't a <code>Child</code> not have a <code>Parent's</code> \"behaviour\" :-). I thought that is how it works, it looks like I need to explore more.</p>\n"}, {"tags": ["python", "api", "python-requests", "python-3.6"], "comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 1, "creation_date": 1516826458, "post_id": 48431187, "comment_id": 83853475, "body": "Should you have instead used <code>data=dict</code>? Also, don&#39;t use &quot;dict&quot; to name variables."}, {"owner": {"reputation": 17922, "user_id": 1977847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2zWQh.png?s=128&g=1", "display_name": "H&#229;ken Lid", "link": "https://stackoverflow.com/users/1977847/h%c3%a5ken-lid"}, "edited": false, "score": 0, "creation_date": 1516826529, "post_id": 48431187, "comment_id": 83853517, "body": "What is the value of the <code>dict</code> variable?"}, {"owner": {"reputation": 1, "user_id": 9264178, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-3qfHztcvB4M/AAAAAAAAAAI/AAAAAAAAAbI/Ig-YIz7JrGk/photo.jpg?sz=128", "display_name": "Clement Julia", "link": "https://stackoverflow.com/users/9264178/clement-julia"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1516837190, "post_id": 48431187, "comment_id": 83858246, "body": "Value of the dict variable is at the top of the answer. @c\u1d0f\u029f\u1d05s\u1d18\u1d07\u1d07\u1d05 When I use data=dict, it tells me that I need to supply attributes such as logo, name and summary, which I have already done"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 9264178, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-3qfHztcvB4M/AAAAAAAAAAI/AAAAAAAAAbI/Ig-YIz7JrGk/photo.jpg?sz=128", "display_name": "Clement Julia", "link": "https://stackoverflow.com/users/9264178/clement-julia"}, "edited": false, "score": 0, "creation_date": 1516837729, "post_id": 48431377, "comment_id": 83858389, "body": "I am indeed trying to upload a file, and at the same time sending some data along with it. <code>dict</code> is just a temporary variable for use on stack overflow I thought it was more explicit than the actual variable name <code>newmod.__dict__</code>"}], "tags": [], "owner": {"reputation": 17922, "user_id": 1977847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2zWQh.png?s=128&g=1", "display_name": "H&#229;ken Lid", "link": "https://stackoverflow.com/users/1977847/h%c3%a5ken-lid"}, "is_accepted": false, "score": 0, "last_activity_date": 1516827091, "creation_date": 1516827091, "answer_id": 48431377, "question_id": 48431187, "link": "https://stackoverflow.com/questions/48431187/python-requests-nonetype-has-no-attribute-read/48431377#48431377", "title": "python-requests: &quot;NoneType&quot; has no attribute read", "body": "<p>The <code>files</code> argument is meant for file uploads. You probably want to use <code>data</code> instead here.</p>\n\n<pre><code>r = requests.post(\n    BASE_PATH + '/games/181/mods'.format(self.id), \n    data = dict, \n    headers = headers\n)\n</code></pre>\n\n<p>You get this error because requests expects the value of <code>name_id</code> to be a file pointer with a <code>read()</code> method. But in your payload it's <code>None</code>.</p>\n\n<p>And don't use <code>dict</code> as a variable name.</p>\n"}], "owner": {"reputation": 1, "user_id": 9264178, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-3qfHztcvB4M/AAAAAAAAAAI/AAAAAAAAAbI/Ig-YIz7JrGk/photo.jpg?sz=128", "display_name": "Clement Julia", "link": "https://stackoverflow.com/users/9264178/clement-julia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1047, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1516827179, "creation_date": 1516826261, "last_edit_date": 1516827179, "question_id": 48431187, "link": "https://stackoverflow.com/questions/48431187/python-requests-nonetype-has-no-attribute-read", "title": "python-requests: &quot;NoneType&quot; has no attribute read", "body": "<p>I'm trying to create a Python Wrapper for an upcoming API, so far I've been getting along well, but I keep bumping my head into the same problem. When making a POST request to add a mod to a game through the API, I feed the following dict  item into the POST request</p>\n\n<pre><code>{'name': \"Necro's Test Mod\", 'name_id': None, 'summary': \"This is a test mod submitted through the API using python's request library.\", 'description': \"I'm only about 43% sure this will actually work, whats more likely is that it will fail and return some messed up error with some even weirder error message before i am contacted by the mod.io developper saying they have personally revoked my api key (This isn't actually true i just need words\", 'homepage': 'www.edain.wikia.com', 'metadata_blob': 'None', 'stock': 1, 'tags': ['cool', 'python', 'api'], 'logo': &lt;_io.BufferedReader name='C:\\\\Users\\\\Clement\\\\Pictures\\\\Background\\\\7z6cSaI-lord-of-the-rings-wallpaper-hd.jpg'&gt;}\n</code></pre>\n\n<p>And that dictionnary is added as follows</p>\n\n<pre><code>BASE_PATH = \"https://api.test.mod.io/v1\"\nheaders = {\n  'Authorization': 'Bearer ' + client.access_token,\n  'Content-Type': 'multipart/form-data',\n  'Accept': 'application/json'\n}\n\nr = requests.post(BASE_PATH + '/games/181/mods'.format(self.id), files = dict, headers = headers)\n</code></pre>\n\n<p>However it returns the following traceback, leading me to believe that the API returns a blank response</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Traceback (most recent call last):\n  File \"C:\\Users\\Clement\\Desktop\\mod.io\\test.py\", line 40, in &lt;module&gt;\n    new_mod = game.add_mod(newmod)\n  File \"C:\\Users\\Clement\\Desktop\\mod.io\\modio\\game.py\", line 83, in add_mod\n    r = requests.post(BASE_PATH + '/games/{}/mods'.format(self.id), files = mod.__dict__, headers = headers)\n  File \"C:\\Users\\Clement\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\requests\\api.py\", line 112, in post\n    return request('post', url, data=data, json=json, **kwargs)\n  File \"C:\\Users\\Clement\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\requests\\api.py\", line 58, in request\n    return session.request(method=method, url=url, **kwargs)\n  File \"C:\\Users\\Clement\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\requests\\sessions.py\", line 494, in request\n    prep = self.prepare_request(req)\n  File \"C:\\Users\\Clement\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\requests\\sessions.py\", line 437, in prepare_request\n    hooks=merge_hooks(request.hooks, self.hooks),\n  File \"C:\\Users\\Clement\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\requests\\models.py\", line 308, in prepare\n    self.prepare_body(data, files, json)\n  File \"C:\\Users\\Clement\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\requests\\models.py\", line 496, in prepare_body\n    (body, content_type) = self._encode_files(files, data)\n  File \"C:\\Users\\Clement\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\requests\\models.py\", line 159, in _encode_files\n    fdata = fp.read()\nAttributeError: 'NoneType' object has no attribute 'read'\n</code></pre>\n\n<p>Here's the <a href=\"https://docs.mod.io/#add-mod\" rel=\"nofollow noreferrer\">documentation</a> for the particular POST request I am attempting.</p>\n"}, {"tags": ["python", "scikit-learn", "nlp", "tf-idf", "tfidfvectorizer"], "comments": [{"owner": {"reputation": 1341, "user_id": 6388994, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00d56f9550cf209ae3c4620eb1a31109?s=128&d=identicon&r=PG&f=1", "display_name": "Usernamenotfound", "link": "https://stackoverflow.com/users/6388994/usernamenotfound"}, "edited": false, "score": 1, "creation_date": 1516834412, "post_id": 48431173, "comment_id": 83857366, "body": "why not just calculate it yourself. It&#39;s a simple calculation"}, {"owner": {"reputation": 28829, "user_id": 3374996, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ijirj.png?s=128&g=1", "display_name": "Vivek Kumar", "link": "https://stackoverflow.com/users/3374996/vivek-kumar"}, "edited": false, "score": 2, "creation_date": 1516846540, "post_id": 48431173, "comment_id": 83860734, "body": "TfidfVectorizer has a <code>idf_</code> which you can use after fitting."}, {"owner": {"reputation": 73, "user_id": 857698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f14294e84ff5ca11aed06a6923d984d?s=128&d=identicon&r=PG", "display_name": "Apoorv", "link": "https://stackoverflow.com/users/857698/apoorv"}, "reply_to_user": {"reputation": 1341, "user_id": 6388994, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00d56f9550cf209ae3c4620eb1a31109?s=128&d=identicon&r=PG&f=1", "display_name": "Usernamenotfound", "link": "https://stackoverflow.com/users/6388994/usernamenotfound"}, "edited": false, "score": 1, "creation_date": 1517884680, "post_id": 48431173, "comment_id": 84266157, "body": "@Usernamenotfound I have been way to addicted to writing my own code to do things for which I know the logic. This has led to me being less efficient than others who know direct functions of libraries. So, I am trying to intentionally not write code unless necessary."}], "answers": [{"comments": [{"owner": {"reputation": 291, "user_id": 6290211, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/JNqE9.jpg?s=128&g=1", "display_name": "Andrea Ciufo", "link": "https://stackoverflow.com/users/6290211/andrea-ciufo"}, "edited": false, "score": 0, "creation_date": 1613739660, "post_id": 48459406, "comment_id": 117175716, "body": "How would you get the IDF value, for example for the term &quot;not&quot;. IDF (&quot;not&quot;)= something?"}, {"owner": {"reputation": 591, "user_id": 5074448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dd267d7a5cf0b51d449b7459e65f7e3?s=128&d=identicon&r=PG&f=1", "display_name": "thibaultbl", "link": "https://stackoverflow.com/users/5074448/thibaultbl"}, "reply_to_user": {"reputation": 291, "user_id": 6290211, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/JNqE9.jpg?s=128&g=1", "display_name": "Andrea Ciufo", "link": "https://stackoverflow.com/users/6290211/andrea-ciufo"}, "edited": false, "score": 1, "creation_date": 1613765232, "post_id": 48459406, "comment_id": 117187042, "body": "The attributes &quot;vocabulary_&quot; give you the mapping between the word and the feature indice. You should get the feature indice using vocabulary_ and then get the corresponding value in idf_ using this value."}], "tags": [], "owner": {"reputation": 591, "user_id": 5074448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dd267d7a5cf0b51d449b7459e65f7e3?s=128&d=identicon&r=PG&f=1", "display_name": "thibaultbl", "link": "https://stackoverflow.com/users/5074448/thibaultbl"}, "is_accepted": true, "score": 8, "last_activity_date": 1613765427, "last_edit_date": 1613765427, "creation_date": 1516961912, "answer_id": 48459406, "question_id": 48431173, "link": "https://stackoverflow.com/questions/48431173/is-there-a-way-to-get-only-the-idf-values-of-words-using-scikit-or-any-other-pyt/48459406#48459406", "title": "Is there a way to get only the IDF values of words using scikit or any other python package?", "body": "<p>You can just use TfidfVectorizer with use_idf=True (default value) and then extract with idf_.</p>\n<pre><code>from sklearn.feature_extraction.text import TfidfVectorizer\n\nmy_data = [&quot;hello how are you&quot;, &quot;hello who are you&quot;, &quot;i am not you&quot;]\n\ntf = TfidfVectorizer(use_idf=True)\ntf.fit_transform(my_data)\n\nidf = tf.idf_ \n</code></pre>\n<p>[BONUS] if you want to get the idf value for a particular word:</p>\n<pre><code># If you want to get the idf value for a particular word, here &quot;hello&quot;    \ntf.idf_[tf.vocabulary_[&quot;hello&quot;]]\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 857698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f14294e84ff5ca11aed06a6923d984d?s=128&d=identicon&r=PG", "display_name": "Apoorv", "link": "https://stackoverflow.com/users/857698/apoorv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2543, "favorite_count": 0, "accepted_answer_id": 48459406, "answer_count": 1, "score": 3, "last_activity_date": 1613765427, "creation_date": 1516826187, "last_edit_date": 1516961183, "question_id": 48431173, "link": "https://stackoverflow.com/questions/48431173/is-there-a-way-to-get-only-the-idf-values-of-words-using-scikit-or-any-other-pyt", "title": "Is there a way to get only the IDF values of words using scikit or any other python package?", "body": "<p>I have a text column in my dataset and using that column I want to have a IDF calculated for all the words that are present. TFID implementations in scikit, like <em><code>tfidf</code> vectorize</em>, are giving me TFIDF values directly as against just word IDFs. Is there a way to get word IDFs give a set of documents?</p>\n"}, {"tags": ["python", "list", "time", "compare"], "comments": [{"owner": {"reputation": 11973, "user_id": 2748311, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7578b7380f9af68b327f0ab26961cb83?s=128&d=identicon&r=PG", "display_name": "excaza", "link": "https://stackoverflow.com/users/2748311/excaza"}, "edited": false, "score": 1, "creation_date": 1516826005, "post_id": 48431125, "comment_id": 83853218, "body": "Please see <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. How are these being logged? How are you reading them?"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 1, "creation_date": 1516826092, "post_id": 48431125, "comment_id": 83853254, "body": "You have not asked any question; this is just a series of statements. In addition to the MCVE, please show what you&#39;ve tried and also see <a href=\"https://stackoverflow.com/help/how-to-ask\">how to ask</a>"}, {"owner": {"reputation": 13, "user_id": 6258776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef5c1705fbf48733ca53681a7012ee7f?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Smith", "link": "https://stackoverflow.com/users/6258776/michael-smith"}, "edited": false, "score": 0, "creation_date": 1516826457, "post_id": 48431125, "comment_id": 83853474, "body": "The log is a simple bat file that echos %date% %time% out to network location. I&#39;m investigating a boot hang issue in Citrix pvs. Is it possible I python to compare two times and repeat the process through the list?"}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 1, "creation_date": 1516826507, "post_id": 48431125, "comment_id": 83853507, "body": "SO isn&#39;t a code-writing or tutorial service; if you have a problem with your implementation then please ask about that, otherwise you will need to do some research and write some code."}], "answers": [{"tags": [], "owner": {"reputation": 793, "user_id": 8705066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9a5488df1050ec372db6e17aabf3f48?s=128&d=identicon&r=PG&f=1", "display_name": "smallwat3r", "link": "https://stackoverflow.com/users/8705066/smallwat3r"}, "is_accepted": true, "score": 0, "last_activity_date": 1548960575, "last_edit_date": 1548960575, "creation_date": 1516827573, "answer_id": 48431491, "question_id": 48431125, "link": "https://stackoverflow.com/questions/48431125/comparing-times-in-a-list-and-to-give-the-time-between-instances/48431491#48431491", "title": "Comparing times in a list and to give the time between instances", "body": "<p>You use the below which returns <code>0 hours 2 minutes 14.38 seconds</code></p>\n\n<pre><code>time1 = '16:18:17.10'\ntime2 = '16:20:31.48'\n\ndef split_format(var1, var2):\n    hour = int(var1.split(':')[0]) - int(var2.split(':')[0])\n    minute = int(var1.split(':')[1]) - int(var2.split(':')[1])    \n    seconds = float(var1.split (':')[2]) - float(var2.split(':')[2])\n    time = '{} hours {} minutes {} seconds'.format(\n        hour, minute, round(seconds, 2)\n    )\n    return time\n\nprint(split_format(time2, time1))\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 6258776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef5c1705fbf48733ca53681a7012ee7f?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Smith", "link": "https://stackoverflow.com/users/6258776/michael-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 48431491, "answer_count": 1, "score": 0, "last_activity_date": 1548960575, "creation_date": 1516825969, "last_edit_date": 1517606736, "question_id": 48431125, "link": "https://stackoverflow.com/questions/48431125/comparing-times-in-a-list-and-to-give-the-time-between-instances", "title": "Comparing times in a list and to give the time between instances", "body": "<p>I have a log that outputs the time stamps for time of boot. I want to compare the time between each boot in to mins and seconds. </p>\n\n<p>Here is the format of the list below.</p>\n\n<ul>\n<li>16:18:17.10  </li>\n<li>16:20:31.48 = 2 mins 14.38 seconds &lt;-- This what i want\nthe output to show.</li>\n<li>16:27:52.06 = 3 mins 20.18 seconds &lt;-- This what i want\nthe output to show.</li>\n<li>16:33:33.06</li>\n<li>16:35:50.94</li>\n</ul>\n\n<p>Any help would be greatly appreciated.</p>\n\n<p>Edit:</p>\n\n<p>Thanks @smallwat3r</p>\n\n<p>the finished code is </p>\n\n<pre><code>def split_format(var1, var2):\n     hour = int(var1.split(':')[0]) - int(var2.split(':')[0])\n     minute = int(var1.split(':')[1]) - int(var2.split(':')[1])\n     seconds = float(var1.split (':')[2]) - float(var2.split(':')[2])\n\ntime = '{} hours {} minutes {} seconds'.format(\n    hour, minute, round(seconds, 2)\n)\n\nreturn time\n\n\n\ndef getFile(): \nprose = str(input('Please enter the file path for your text file: '))\n\ndictionary = {}\n\ninfile = open(prose, 'r')\nline_num = 1\nline_num2 = 2\nfor line in infile:\n    dictionary[line_num]=line\n    line_num += 1\n    line_num2 += 1\n\nbase = 1\nbase2 = 2\nfor x in dictionary:\n    print(dictionary[base2],(split_format(dictionary[base2],dictionary[base])))\n    base += 1\n    base2 += 1\n\n\ninfile.close()\n\ngetFile()\n</code></pre>\n"}, {"tags": ["python", "multithreading"], "answers": [{"comments": [{"owner": {"reputation": 115, "user_id": 4382611, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4c63fe333971b30afdbf31f8e17c4c2?s=128&d=identicon&r=PG&f=1", "display_name": "mystic09", "link": "https://stackoverflow.com/users/4382611/mystic09"}, "edited": false, "score": 0, "creation_date": 1516826856, "post_id": 48431152, "comment_id": 83853663, "body": "then, which method should i use?"}, {"owner": {"reputation": 51, "user_id": 2993049, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e85a8967f5e8641585aa2bedd5a5f982?s=128&d=identicon&r=PG&f=1", "display_name": "mrjaso", "link": "https://stackoverflow.com/users/2993049/mrjaso"}, "edited": false, "score": 0, "creation_date": 1516826954, "post_id": 48431152, "comment_id": 83853708, "body": "I think you want to initialize stopped = False in your class definition."}], "tags": [], "owner": {"reputation": 18468, "user_id": 5249307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c640cd731ca8e455d79860519b6b208?s=128&d=identicon&r=PG", "display_name": "donkopotamus", "link": "https://stackoverflow.com/users/5249307/donkopotamus"}, "is_accepted": false, "score": 3, "last_activity_date": 1516826498, "last_edit_date": 1516826498, "creation_date": 1516826091, "answer_id": 48431152, "question_id": 48431096, "link": "https://stackoverflow.com/questions/48431096/stopping-a-thread-in-multithreaded-python-code/48431152#48431152", "title": "Stopping a Thread in Multithreaded Python code", "body": "<p>Clearly you expect that thread <code>a</code> should not stop as you have not called <code>a.stop()</code>.  However, you have a class scoped attribute <code>stopped</code> as well:</p>\n\n<pre><code>class MyThread(threading.Thread):\n    def stop(self):\n        self.stopped = True\n        print (\"working\")\n\n    # !! this is a class level attribute !!\n    stopped=True\n</code></pre>\n\n<p>Thus, <code>MyThread.stopped</code> is <code>True</code>.  When you ask an instance of <code>MyThread</code> for the <code>stopped</code> attribute using <code>self.stopped</code> it will:</p>\n\n<ul>\n<li>first check if the attribute <code>stopped</code> exists on the <em>instance</em>;</li>\n<li>else check if the attribute exists on the type <code>MyThread</code></li>\n</ul>\n\n<p>Thus in your case, <code>MyThread().stopped</code> is <strong>always</strong> <code>True</code></p>\n"}, {"tags": [], "owner": {"reputation": 115, "user_id": 4382611, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4c63fe333971b30afdbf31f8e17c4c2?s=128&d=identicon&r=PG&f=1", "display_name": "mystic09", "link": "https://stackoverflow.com/users/4382611/mystic09"}, "is_accepted": false, "score": 0, "last_activity_date": 1516827368, "creation_date": 1516827368, "answer_id": 48431444, "question_id": 48431096, "link": "https://stackoverflow.com/questions/48431096/stopping-a-thread-in-multithreaded-python-code/48431444#48431444", "title": "Stopping a Thread in Multithreaded Python code", "body": "<p>I figure it out the solution and wanted to share.</p>\n\n<pre><code>from threading import Thread\nimport threading\nimport time\n\n\nclass MyThread(threading.Thread):\n    stop = False\n\n\ndef func(argument):\n    t = threading.current_thread()\n    while True:\n        if not t.stop:\n            print(argument)\n            time.sleep(0.5)\n\n\na = MyThread(target=func,args=(\"1\",))\nb = MyThread(target=func,args=(\"2\",))\nc = MyThread(target=func,args=(\"3\",))\nd = MyThread(target=func,args=(\"4\",))\na.start()\nb.start()\nc.start()\nd.start()\ntime.sleep(3)\nb.stop = True\nc.stop = True\nd.stop = True\ntime.sleep(3)\nb.stop = False\n</code></pre>\n"}], "owner": {"reputation": 115, "user_id": 4382611, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4c63fe333971b30afdbf31f8e17c4c2?s=128&d=identicon&r=PG&f=1", "display_name": "mystic09", "link": "https://stackoverflow.com/users/4382611/mystic09"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1516827368, "creation_date": 1516825840, "question_id": 48431096, "link": "https://stackoverflow.com/questions/48431096/stopping-a-thread-in-multithreaded-python-code", "title": "Stopping a Thread in Multithreaded Python code", "body": "<p>I am working on multithreading in python i could not achieve to stop individual threads. The code is below. How can i achieve this? Thanks...</p>\n\n<pre><code>from threading import Thread\nimport threading\nimport time\n\n\nclass MyThread(threading.Thread):\n    def stop(self):\n        self.stopped = True\n        print (\"working\")\n    stopped=True\n\n\ndef func(argument):\n    t = threading.current_thread()\n    while not t.stopped:\n        print(argument)\n        time.sleep(0.5)\n\n\na = MyThread(target=func,args=(\"1\",))\nb = MyThread(target=func,args=(\"2\",))\nc = MyThread(target=func,args=(\"3\",))\nd = MyThread(target=func,args=(\"4\",))\na.daemon = True\nb.daemon = True\nc.daemon = True\nd.daemon = True\na.start()\nb.start()\nc.start()\nd.start()\n\ntime.sleep(3)\nb.stop()\nc.stop()\nd.stop()\n</code></pre>\n\n<p>After execution of this code, a thread must be alive and still running the function but all of the threads stop.</p>\n"}, {"tags": ["python", "events", "tkinter", "event-handling", "tk"], "comments": [{"owner": {"reputation": 11466, "user_id": 2229945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfbf044eccb8835deec653dae32d56e7?s=128&d=identicon&r=PG", "display_name": "Novel", "link": "https://stackoverflow.com/users/2229945/novel"}, "edited": false, "score": 2, "creation_date": 1516827040, "post_id": 48431070, "comment_id": 83853744, "body": "Yes, it&#39;s possible to send anything anywhere. If you show use a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> then I can show you how."}, {"owner": {"reputation": 10223, "user_id": 7032856, "user_type": "registered", "accept_rate": 81, "profile_image": "https://lh6.googleusercontent.com/-v2P-pqI1pww/AAAAAAAAAAI/AAAAAAAAABg/BHOFSOpQ0BM/photo.jpg?sz=128", "display_name": "Nae", "link": "https://stackoverflow.com/users/7032856/nae"}, "edited": false, "score": 1, "creation_date": 1516827319, "post_id": 48431070, "comment_id": 83853883, "body": "I think this is a simple question asked in an overcomplicated manner."}, {"owner": {"reputation": 172, "user_id": 7385015, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FDOad.png?s=128&g=1", "display_name": "Alec White", "link": "https://stackoverflow.com/users/7385015/alec-white"}, "reply_to_user": {"reputation": 10223, "user_id": 7032856, "user_type": "registered", "accept_rate": 81, "profile_image": "https://lh6.googleusercontent.com/-v2P-pqI1pww/AAAAAAAAAAI/AAAAAAAAABg/BHOFSOpQ0BM/photo.jpg?sz=128", "display_name": "Nae", "link": "https://stackoverflow.com/users/7032856/nae"}, "edited": false, "score": 1, "creation_date": 1516827541, "post_id": 48431070, "comment_id": 83854014, "body": "@Nae I have to agree, I&#39;m going back to the drawing board to rework it and will have either the solution or ask it better tomorrow."}], "answers": [{"comments": [{"owner": {"reputation": 10223, "user_id": 7032856, "user_type": "registered", "accept_rate": 81, "profile_image": "https://lh6.googleusercontent.com/-v2P-pqI1pww/AAAAAAAAAAI/AAAAAAAAABg/BHOFSOpQ0BM/photo.jpg?sz=128", "display_name": "Nae", "link": "https://stackoverflow.com/users/7032856/nae"}, "edited": false, "score": 0, "creation_date": 1516833661, "post_id": 48432267, "comment_id": 83857045, "body": "Could you please add an explanation on what the example code does independent of the question? I&#39;m having a hard time understanding it."}, {"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "reply_to_user": {"reputation": 10223, "user_id": 7032856, "user_type": "registered", "accept_rate": 81, "profile_image": "https://lh6.googleusercontent.com/-v2P-pqI1pww/AAAAAAAAAAI/AAAAAAAAABg/BHOFSOpQ0BM/photo.jpg?sz=128", "display_name": "Nae", "link": "https://stackoverflow.com/users/7032856/nae"}, "edited": false, "score": 0, "creation_date": 1516833740, "post_id": 48432267, "comment_id": 83857078, "body": "@Nae: I don&#39;t know what you mean. It doesn&#39;t do anything but present a treeview that has a right-click menu. I&#39;ve added a very short description to the answer."}, {"owner": {"reputation": 10223, "user_id": 7032856, "user_type": "registered", "accept_rate": 81, "profile_image": "https://lh6.googleusercontent.com/-v2P-pqI1pww/AAAAAAAAAAI/AAAAAAAAABg/BHOFSOpQ0BM/photo.jpg?sz=128", "display_name": "Nae", "link": "https://stackoverflow.com/users/7032856/nae"}, "edited": false, "score": 0, "creation_date": 1516833960, "post_id": 48432267, "comment_id": 83857181, "body": "Where the initial click, right click, occurred right?"}, {"owner": {"reputation": 172, "user_id": 7385015, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FDOad.png?s=128&g=1", "display_name": "Alec White", "link": "https://stackoverflow.com/users/7385015/alec-white"}, "edited": false, "score": 0, "creation_date": 1516891305, "post_id": 48432267, "comment_id": 83882640, "body": "One thing I must add: for entryconfig you must (at least in the python 3.6 build of tkinter) speficy the index of the menu item as the first argument, which in your example would be 0 because you only have one item and it is the first menu on the item. Thanks Bryan!"}, {"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "reply_to_user": {"reputation": 172, "user_id": 7385015, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FDOad.png?s=128&g=1", "display_name": "Alec White", "link": "https://stackoverflow.com/users/7385015/alec-white"}, "edited": false, "score": 2, "creation_date": 1516892848, "post_id": 48432267, "comment_id": 83883776, "body": "@AlecKeyserWhite: in my example, &quot;Do something&quot; is the index. You can supply a numerical index, but you can also supply the item text."}, {"owner": {"reputation": 172, "user_id": 7385015, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FDOad.png?s=128&g=1", "display_name": "Alec White", "link": "https://stackoverflow.com/users/7385015/alec-white"}, "edited": false, "score": 0, "creation_date": 1516892958, "post_id": 48432267, "comment_id": 83883859, "body": "Ahh I see! My mistake Bryan."}], "tags": [], "owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "is_accepted": true, "score": 4, "last_activity_date": 1516835301, "last_edit_date": 1516835301, "creation_date": 1516830799, "answer_id": 48432267, "question_id": 48431070, "link": "https://stackoverflow.com/questions/48431070/can-tkinter-menus-send-the-event-in-which-they-were-called/48432267#48432267", "title": "Can tkinter menus send the event in which they were called?", "body": "<p>A common way to do what you want is to modify the menu command immediately before displaying the menu. You can either define <code>postcommand</code> which defines a function that is run before the menu is displayed, or you can do the modification in the code that causes the menu to pop up. </p>\n\n<p>Since you want to pass the event to the function, the best solution is to modify the menu right before popping it up since that function already has the event object. </p>\n\n<p>Another other option would be to have your function set some instance variables, rather than modifying the menu. You can then reference those instance variables in the function called from the menu.</p>\n\n<p>Since you said you don't want to use instance variables, here's an example showing how to modify the menu:</p>\n\n<pre><code>def show_popup(self, event):\n    self.popup.entryconfig(\"Do Something\", command=lambda: self.something(event))\n    self.popup.tk_popup(event.x_root, event.y_root)\n</code></pre>\n\n<h2>Example</h2>\n\n<p>Here's a complete working example. The code displays a window with a treeview widget which has some dummy data. If you right-click over the treeview you will see a menu with one item. When you click that item it will display information in a label about where the click occurred. </p>\n\n<pre><code>import tkinter as tk\nfrom tkinter import ttk\n\nclass Example(object):\n    def __init__(self):\n        self.root = tk.Tk()\n\n        self.treeview = ttk.Treeview(self.root, columns=(\"one\", \"two\", \"three\"))\n        self.label = tk.Label(self.root, width=40)\n\n        self.label.pack(side=\"bottom\", fill=\"x\")\n        self.treeview.pack(fill=\"both\", expand=True)\n\n        self.popup = tk.Menu(self.root, tearoff=False)\n        self.popup.add_command(label=\"Do something\")\n\n        self.treeview.bind('&lt;Button-3&gt;', self.show_popup)\n\n        for column in self.treeview.cget(\"columns\"):\n            self.treeview.column(column, width=50)\n\n        for i in range(10):\n            values = (\"a%s\" % i, \"b%s\" %i, \"c%s\" %i)\n            self.treeview.insert('', 'end', text=\"Item %s\" % i, values=values)\n\n    def start(self):\n        self.root.mainloop()\n\n    def show_popup(self, event):\n        self.popup.entryconfig(\"Do something\", command=lambda: self.do_something(event))\n        self.popup.tk_popup(event.x_root, event.y_root)\n\n    def do_something(self, event):\n        region = self.treeview.identify(\"region\", event.x, event.y)\n        col = self.treeview.identify_column(event.x)\n\n        message = \"you clicked %s,%s region=%s column=%s\" % (event.x, event.y, region, col)\n        self.label.configure(text=message)\n\nif __name__ == \"__main__\":\n    Example().start()\n</code></pre>\n"}], "owner": {"reputation": 172, "user_id": 7385015, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FDOad.png?s=128&g=1", "display_name": "Alec White", "link": "https://stackoverflow.com/users/7385015/alec-white"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1615, "favorite_count": 0, "accepted_answer_id": 48432267, "answer_count": 1, "score": 0, "last_activity_date": 1516835301, "creation_date": 1516825729, "last_edit_date": 1516826188, "question_id": 48431070, "link": "https://stackoverflow.com/questions/48431070/can-tkinter-menus-send-the-event-in-which-they-were-called", "title": "Can tkinter menus send the event in which they were called?", "body": "<p>Below is a popup menu command I would like to send event data through. I want the event for its x and y data so I know what cell of the ttk styled treeview (being used as a table) to operate on. Currently it calls the \"self.toggle_sort_bool\" method but I want it to call the function at the end \"self.sort_children(event, cur_tree_children),\" but do not because I need to figure out passing/receiving the event here. Note: I know that sending is automatic but receiving is not. Am I overlooking something?      </p>\n\n<pre><code>self.heading_popup_menu = tk.Menu(self.treeview, tearoff=0)\nself.heading_popup_menu.add_command(label=\"Reverse Sort\", command=self.toggle_sort_bool)\n</code></pre>\n\n<p>Here is where the journey of the event begins with a right click on the ttk styled treeview.</p>\n\n<pre><code>self.treeview.bind('&lt;Button-3&gt;', self.pop_up_right_click_detail)\n</code></pre>\n\n<p>The event's x_root and y_root are sent to the tk_popup. Should/can I overload this to send the whole event? It seems the x and y of the event in the root are sent to tell the popup where to...pop up.</p>\n\n<pre><code>def pop_up_right_click(self, event):\n        try:\n            self.heading_popup_menu.tk_popup(event.x_root, event.y_root, 0)\n        finally:\n            self.heading_popup_menu.grab_release()\n</code></pre>\n\n<p>Here is the function I want to call from the menu command.</p>\n\n<pre><code>def sort_children(self, event, cur_tree_children):\n    region = self.treeview.identify(\"region\", event.x, event.y)\n\n    if region == \"heading\":\n        #get column number\n        col = self.treeview.identify_column(event.x)\n        col = int(re.sub('\\D', '', col))\n\n        col_names = cur_tree_children.pop(0)\n        cur_tree_children.sort(reverse=self.reverse_sort_bool.get(), key=lambda tup: self.sort_disparate_types(tup[col-1])) #toggle reverse somehow\n        cur_tree_children.insert(0, col_names)\n        self.depopulate_tree()\n        self.populate_tree()\n</code></pre>\n\n<p>Is it possible to send an event through a menu? I am confused because of how disjointed the--for lack of better terminology--events are in calling a function through a right click pop up menu. While this is all part of one big GUI class, I do not want to use class instance variables to communicate the target cell data because I believe that is messy and bad practice and thus should be avoided wherever possible. </p>\n\n<p>P.S. If I had enough reputation I would make the tag BryanOakley and post this under it.</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 2, "creation_date": 1516825780, "post_id": 48431036, "comment_id": 83853109, "body": "<a href=\"https://docs.python.org/3/library/abc.html#abc.ABCMeta.__subclasshook__\" rel=\"nofollow noreferrer\">docs.python.org/3/library/abc.html#abc.ABCMeta.__subclasshoo&zwnj;&#8203;k__</a>"}, {"owner": {"reputation": 17922, "user_id": 1977847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2zWQh.png?s=128&g=1", "display_name": "H&#229;ken Lid", "link": "https://stackoverflow.com/users/1977847/h%c3%a5ken-lid"}, "edited": false, "score": 0, "creation_date": 1516826114, "post_id": 48431036, "comment_id": 83853265, "body": "The implementation is written in python, if you want to take a look. <a href=\"https://github.com/python/cpython/blob/master/Lib/_collections_abc.py\" rel=\"nofollow noreferrer\">github.com/python/cpython/blob/master/Lib/_collections_abc.p&zwnj;&#8203;y</a>"}, {"owner": {"reputation": 435, "user_id": 5967025, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/L8xlW.jpg?s=128&g=1", "display_name": "vildhjarta", "link": "https://stackoverflow.com/users/5967025/vildhjarta"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1516826211, "post_id": 48431036, "comment_id": 83853327, "body": "@user2357112 thanks for your effort but the line you wrote neither an explanation nor a comment."}], "answers": [{"comments": [{"owner": {"reputation": 435, "user_id": 5967025, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/L8xlW.jpg?s=128&g=1", "display_name": "vildhjarta", "link": "https://stackoverflow.com/users/5967025/vildhjarta"}, "edited": false, "score": 0, "creation_date": 1517147902, "post_id": 48431082, "comment_id": 83967037, "body": "at that case, what is the difference between subclassing and registration?"}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "reply_to_user": {"reputation": 435, "user_id": 5967025, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/L8xlW.jpg?s=128&g=1", "display_name": "vildhjarta", "link": "https://stackoverflow.com/users/5967025/vildhjarta"}, "edited": false, "score": 0, "creation_date": 1517148011, "post_id": 48431082, "comment_id": 83967070, "body": "@vildhjarta: A subclass inherits the <i>implementation</i>. Registration only makes a statement that the right methods are present and implemented correctly."}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "reply_to_user": {"reputation": 435, "user_id": 5967025, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/L8xlW.jpg?s=128&g=1", "display_name": "vildhjarta", "link": "https://stackoverflow.com/users/5967025/vildhjarta"}, "edited": false, "score": 0, "creation_date": 1517148092, "post_id": 48431082, "comment_id": 83967096, "body": "@vildhjarta: the ABCs are implemented in Python and have base implementations for the methods. <code>list</code> and <code>tuple</code> are implemented in C code, their implementations are materially different and would be way too slow if they actually inherited from the base ABC implementations."}], "tags": [], "owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "is_accepted": true, "score": 10, "last_activity_date": 1516826188, "last_edit_date": 1516826188, "creation_date": 1516825777, "answer_id": 48431082, "question_id": 48431036, "link": "https://stackoverflow.com/questions/48431036/how-are-the-abstract-classes-implemented-which-in-collection-abc-module/48431082#48431082", "title": "How are the abstract classes implemented which in collection.abc.* module?", "body": "<p>No, <code>tuple</code> and <code>list</code> do not inherit from any collections abstract base class. Instead, the collections classes customize <a href=\"https://docs.python.org/3/reference/datamodel.html#customizing-instance-and-subclass-checks\" rel=\"noreferrer\">instance and subclass checks</a>, with the <code>class.__instancecheck__()</code> and <code>class.__subclasscheck__()</code> hooks.</p>\n\n<p>These hooks are called whenever you use <code>isinstance()</code> or <code>issubclass()</code> with a class that implements them, and their result is returned:</p>\n\n<pre><code>&gt;&gt;&gt; import collections.abc\n&gt;&gt;&gt; collections.abc.MutableSequence.__subclasscheck__(tuple)\nFalse\n&gt;&gt;&gt; collections.abc.MutableSequence.__subclasscheck__(list)\nTrue\n</code></pre>\n\n<p>Specifically, the hooks are implemented by the <a href=\"https://docs.python.org/3/library/abc.html#abc.ABCMeta\" rel=\"noreferrer\"><code>abc.ABCMeta</code> Abstract Base Class metaclass</a>, which abstracts the process. Your Abstract Base Class only needs to implement the <a href=\"https://docs.python.org/3/library/abc.html#abc.ABCMeta.__subclasshook__\" rel=\"noreferrer\"><code>__subclasshook__()</code> class method</a>; this is easier to implement, as the <code>__subclasscheck__</code> and <code>__instancecheck__</code> special methods must be implemented on a metaclass.</p>\n\n<p>The <code>ABCMeta</code> implementation also includes a registry to add types to an ABC, with the <a href=\"https://docs.python.org/3/library/abc.html#abc.ABCMeta.register\" rel=\"noreferrer\"><code>ABCMeta.register()</code> method</a>. The <code>tuple</code> and <code>list</code> classes are registered explicitly with the <code>Sequence</code> type, for example:</p>\n\n<pre><code>Sequence.register(tuple)\nSequence.register(str)\nSequence.register(range)\nSequence.register(memoryview)\n</code></pre>\n"}], "owner": {"reputation": 435, "user_id": 5967025, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/L8xlW.jpg?s=128&g=1", "display_name": "vildhjarta", "link": "https://stackoverflow.com/users/5967025/vildhjarta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 335, "favorite_count": 0, "accepted_answer_id": 48431082, "answer_count": 1, "score": 2, "last_activity_date": 1516826188, "creation_date": 1516825615, "question_id": 48431036, "link": "https://stackoverflow.com/questions/48431036/how-are-the-abstract-classes-implemented-which-in-collection-abc-module", "title": "How are the abstract classes implemented which in collection.abc.* module?", "body": "<p>I was wondering that how the implementation mechanism work for tuple, list, or set data types. When I have checked the tuple data type with <strong>help()</strong> function, I can't see any inherited class from collection.abc module.</p>\n\n<pre><code>help(tuple)\n\nHelp on class tuple in module builtins:\n\nclass tuple(object)\n# omitting the other details\n</code></pre>\n\n<p>When I was checking:</p>\n\n<pre><code>import collections\n\nissubclass(tuple, collections.abc.MutableSequence) # False\nissubclass(tuple, collections.abc.Sequence) # True\n\nissubclass(list, collections.abc.MutableSequence) # True\nissubclass(list, collections.abc.Sequence) # True\n</code></pre>\n\n<p>Both of two lines for list are correct because I know that MutableSequence is also subclass of Sequence abstract class.</p>\n\n<p>I'm getting confused because as I mentioned above I couldn't see any inherited class from the collection.abc module within concrete tuple or list implementation. Long story short I try to find an explanation about implementation of abstract base classes for Python data types.</p>\n"}, {"tags": ["python", "pandas", "datetime", "apply", "series"], "comments": [{"owner": {"reputation": 11973, "user_id": 2748311, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7578b7380f9af68b327f0ab26961cb83?s=128&d=identicon&r=PG", "display_name": "excaza", "link": "https://stackoverflow.com/users/2748311/excaza"}, "edited": false, "score": 0, "creation_date": 1516825645, "post_id": 48430972, "comment_id": 83853016, "body": "Please see: <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. The error message would be useful as well."}, {"owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "edited": false, "score": 0, "creation_date": 1516827057, "post_id": 48430972, "comment_id": 83853756, "body": "@CambrianCatalyst, much of your code is repetitive and not connected with your question. However, for 2 <code>datetime</code> objects <code>a</code> and <code>b</code> the number of days between them would be <code>(a-b).days</code>. See <a href=\"https://stackoverflow.com/a/151211/9209546\">stackoverflow.com/a/151211/9209546</a>"}, {"owner": {"reputation": 43, "user_id": 4123882, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8d57c24861c084edef1bcf4a27b7d100?s=128&d=identicon&r=PG&f=1", "display_name": "CambrianCatalyst", "link": "https://stackoverflow.com/users/4123882/cambriancatalyst"}, "edited": false, "score": 0, "creation_date": 1516827241, "post_id": 48430972, "comment_id": 83853843, "body": "Hey thanks for your response. I noticed that the reason I seem to be hitting an error is because my new column was getting the difference generated as &quot;x&quot; days instead of just &quot;x&quot;. I&#39;m guessing the value type is still that of datetime when I would like it as an int. I will read over your linked reference. Thanks again!"}], "answers": [{"tags": [], "owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "is_accepted": true, "score": 1, "last_activity_date": 1516827638, "creation_date": 1516827638, "answer_id": 48431503, "question_id": 48430972, "link": "https://stackoverflow.com/questions/48430972/apply-based-on-dataframe-datetime-columns-returning-comparison-error/48431503#48431503", "title": "Apply based on dataframe datetime columns returning comparison error", "body": "<p>This may not be a full response, but it should give you an idea of how to get from 2 <code>datetime</code> objects to an integer day difference:</p>\n\n<pre><code>import datetime\n\nmdate = '2018-10-05'\nrdate = '2010-10-15'\nmdate1 = datetime.datetime.strptime(mdate, '%Y-%m-%d').date()\nrdate1 = datetime.datetime.strptime(rdate, '%Y-%m-%d').date()\ndelta =  (mdate1 - rdate1).days\n\nprint(delta, type(delta))\n\n# output\n# 2912 &lt;class 'int'&gt;\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 4123882, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8d57c24861c084edef1bcf4a27b7d100?s=128&d=identicon&r=PG&f=1", "display_name": "CambrianCatalyst", "link": "https://stackoverflow.com/users/4123882/cambriancatalyst"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 487, "favorite_count": 0, "accepted_answer_id": 48431503, "answer_count": 1, "score": 0, "last_activity_date": 1516827638, "creation_date": 1516825335, "question_id": 48430972, "link": "https://stackoverflow.com/questions/48430972/apply-based-on-dataframe-datetime-columns-returning-comparison-error", "title": "Apply based on dataframe datetime columns returning comparison error", "body": "<p>Here is my code.</p>\n\n<pre><code>df['Date_Resf_Comp'] = pd.to_datetime(df['Date_Compl'], format=\"%m/%d/%Y\")\ndf['Curr_Rate_Date'] = pd.to_datetime(df['Curr_Date'], format=\"%Y-%m-%d\")\ndf['Prev_Rate_Date'] = pd.to_datetime(df['Prev_Date'], format=\"%Y-%m-%d\")\n\n\n\n\n\ndf['Yrs_Sinc_Rsf'] = df.apply(lambda row: (row['Curr_Rate_Date'].year - row['Date_Resf_Comp'].year), axis=1)\ndf.loc[df['Yrs_Sinc_Rsf'] &lt; 0 , 'Yrs_Sinc_Rsf'] = None\ndf['Yrs_Since_Rsf_2'] = df.apply(lambda row: row['Yrs_Sinc_Rsf']**2 if row['Yrs_Sinc_Rsf']&gt;=0 else None, axis=1)\ndf['Yrs_Since_Rsf_3'] = df.apply(lambda row: row['Yrs_Sinc_Rsf']**3 if row['Yrs_Sinc_Rsf']&gt;=0 else None, axis=1)\ndf = df[[\"SegID\", \"Curr_Date\", \"Prev_Date\", \"Curr_Rate_Date\", \"Date_Resf_Comp\", \"Curr_Distress\", \"Curr_Rating\",\n     \"Prev_Distress\", \"Prev_Rating\", \"OFT\", \"Yrs_Sinc_Rsf\",\"Yrs_Since_Rsf_2\", \"Yrs_Since_Rsf_3\"]]\ndf\n</code></pre>\n\n<p>So, I have a dataframe with two columns which I convert to datetime columns. I then try to apply the difference between these two moments in time onto a third, new column. When I use the code above everything functions fine. </p>\n\n<p>The problem is that I do not want just the difference between the years. I'd prefer to get the difference between the dates as a float. In the current case when I take the difference of say datetime.date(2015-1-1) and datetime.date(2015-5-5) use .year my resultant column would display 0 instead of the month difference as a decimal.</p>\n\n<p>I have tried replacing .year with .date() and when I do so I am met with an error on the subsequent line (df.loc...) stating an improper type comparison.</p>\n\n<p>Any help that anyone may be able to provide would be greatly appreciated!</p>\n"}]