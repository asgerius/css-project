[{"tags": ["python", "django", "conditional", "annotate"], "answers": [{"comments": [{"owner": {"reputation": 127, "user_id": 5171395, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-0AO8VGVwhEM/AAAAAAAAAAI/AAAAAAAAADg/c5-M_n0ER5A/photo.jpg?sz=128", "display_name": "Travis Hoki", "link": "https://stackoverflow.com/users/5171395/travis-hoki"}, "edited": false, "score": 0, "creation_date": 1438237409, "post_id": 31714636, "comment_id": 51370307, "body": "That worked perfectly! Thank you so much! I was completely stuck on that query."}], "tags": [], "owner": {"reputation": 247, "user_id": 3106733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i7xnO.jpg?s=128&g=1", "display_name": "Lyudmil Nenov", "link": "https://stackoverflow.com/users/3106733/lyudmil-nenov"}, "is_accepted": true, "score": 1, "last_activity_date": 1438226072, "creation_date": 1438226072, "answer_id": 31714636, "question_id": 31713152, "link": "https://stackoverflow.com/questions/31713152/django-annotate-conditional/31714636#31714636", "title": "Django Annotate Conditional", "body": "<p>Try</p>\n\n<pre><code>user_array = User.objects.filter(charge__due_date__lte=date).annotate(amount_due=Sum('charge__amount'))\n</code></pre>\n\n<p>motivated by <a href=\"https://docs.djangoproject.com/en/1.8/topics/db/aggregation/#order-of-annotate-and-filter-clauses\" rel=\"nofollow\">https://docs.djangoproject.com/en/1.8/topics/db/aggregation/#order-of-annotate-and-filter-clauses</a>. The docs claim only the filtered relation values would be annotated.</p>\n"}], "owner": {"reputation": 127, "user_id": 5171395, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-0AO8VGVwhEM/AAAAAAAAAAI/AAAAAAAAADg/c5-M_n0ER5A/photo.jpg?sz=128", "display_name": "Travis Hoki", "link": "https://stackoverflow.com/users/5171395/travis-hoki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 681, "favorite_count": 1, "accepted_answer_id": 31714636, "answer_count": 1, "score": 3, "last_activity_date": 1438239697, "creation_date": 1438214359, "last_edit_date": 1438239697, "question_id": 31713152, "link": "https://stackoverflow.com/questions/31713152/django-annotate-conditional", "title": "Django Annotate Conditional", "body": "<p>I want a list of users with a total sum of the charges that they each have. I only want to include charges in the sum that are due. This is returning a sum of all charges, it's not filtering out the charges that are not due yet.</p>\n\n<pre><code>user_array = User.objects.all().annotate(\n   total_sum=Sum('charge__amount', only=Q(charge__due_date__lte=date))\n)\n</code></pre>\n"}, {"tags": ["python", "arrays", "numpy", "matrix", "shape"], "answers": [{"tags": [], "owner": {"reputation": 6531, "user_id": 1084875, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/pig1l.jpg?s=128&g=1", "display_name": "wigging", "link": "https://stackoverflow.com/users/1084875/wigging"}, "is_accepted": false, "score": 1, "last_activity_date": 1438216791, "last_edit_date": 1438216791, "creation_date": 1438216258, "answer_id": 31713392, "question_id": 31713146, "link": "https://stackoverflow.com/questions/31713146/how-can-i-always-have-numpy-ndarray-shape-return-a-two-valued-tuple/31713392#31713392", "title": "How can I always have numpy.ndarray.shape return a two valued tuple?", "body": "<p>You could create a function that returns a tuple of rows and columns like this:</p>\n\n<pre><code>def rowsCols(a):\n    if len(a.shape) &gt; 1:\n        rows = a.shape[0]\n        cols = a.shape[1]\n    else:\n        rows = a.shape[0]\n        cols = 0\n    return (rows, cols)\n</code></pre>\n\n<p>where <code>a</code> is the array you input to the function. Here's an example of using the function:</p>\n\n<pre><code>import numpy as np\n\nx = np.array([1,2,3])\n\ny = np.array([[1,2,3],[4,5,6],[7,8,9],[10,11,12]])\n\ndef rowsCols(a):\n    if len(a.shape) &gt; 1:\n        rows = a.shape[0]\n        cols = a.shape[1]\n    else:\n        rows = a.shape[0]\n        cols = 0\n    return (rows, cols)\n\n(nRows, nCols) = rowsCols(x)\n\nprint('rows {} and columns {}'.format(nRows, nCols))\n\n(nRows, nCols) = rowsCols(y)\n\nprint('rows {} and columns {}'.format(nRows, nCols))\n</code></pre>\n\n<p>This prints <code>rows 3 and columns 0</code> then <code>rows 4 and columns 3</code>. Alternatively, you can use the <code>atleast_2d</code> function for a more concise approach:</p>\n\n<pre><code>(r, c) = np.atleast_2d(x).shape\n\nprint('rows {}, cols {}'.format(r, c))\n\n(r, c) = np.atleast_2d(y).shape\n\nprint('rows {}, cols {}'.format(r, c))\n</code></pre>\n\n<p>Which prints <code>rows 1, cols 3</code> and <code>rows 4, cols 3</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": false, "score": 1, "last_activity_date": 1438225881, "last_edit_date": 1495539832, "creation_date": 1438225881, "answer_id": 31714604, "question_id": 31713146, "link": "https://stackoverflow.com/questions/31713146/how-can-i-always-have-numpy-ndarray-shape-return-a-two-valued-tuple/31714604#31714604", "title": "How can I always have numpy.ndarray.shape return a two valued tuple?", "body": "<p>If your function uses</p>\n\n<pre><code> (nRows, nCols) = x.shape \n</code></pre>\n\n<p>it probably also indexes or iterates on <code>x</code> with the assumption that it has <code>nRows</code> rows, e.g.</p>\n\n<pre><code> x[0,:]\n for row in x:\n    # do something with the row\n</code></pre>\n\n<p>Common practice is to reshape <code>x</code> (as needed) so it has at least 1 row.  In other words, change the shape from <code>(n,)</code> to <code>(1,n)</code>.</p>\n\n<pre><code> x = np.atleast_2d(x)\n</code></pre>\n\n<p>does this nicely.  Inside a function, such a change to <code>x</code> won't affect <code>x</code> outside it.  This way you can treat <code>x</code> as 2d through out your function, rather than constantly looking to see whether it is 1d v 2d.  </p>\n\n<p><a href=\"https://stackoverflow.com/questions/31698242/python-how-can-i-force-1-element-numpy-arrays-to-be-two-dimensional#comment51350833_31698242\">Python: How can I force 1-element NumPy arrays to be two-dimensional?</a></p>\n\n<p>is one of many previous SO questions that asks about treating 1d arrays as 2d.</p>\n"}], "owner": {"reputation": 21, "user_id": 5171397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75520ed65586c763a341ed8b43ea0494?s=128&d=identicon&r=PG&f=1", "display_name": "D_Ramos", "link": "https://stackoverflow.com/users/5171397/d-ramos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4378, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1438225881, "creation_date": 1438214301, "question_id": 31713146, "link": "https://stackoverflow.com/questions/31713146/how-can-i-always-have-numpy-ndarray-shape-return-a-two-valued-tuple", "title": "How can I always have numpy.ndarray.shape return a two valued tuple?", "body": "<p>I'm trying to get the values of (nRows, nCols) from a 2D Matrix but when it's a single row (i.e. x = np.array([1, 2, 3, 4])), x.shape will return (4,) and so my statement of (nRows, nCols) = x.shape returns \"ValueError: need more than 1 value to unpack\"</p>\n\n<p>Any suggestions on how I can make this statement more adaptable? It's for a function that is used in many programs and should work with both single row and multi-row matices. Thanks!</p>\n"}, {"tags": ["python", "python-3.x", "encoding", "byte"], "answers": [{"tags": [], "owner": {"reputation": 269348, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "is_accepted": true, "score": 5, "last_activity_date": 1438215460, "last_edit_date": 1592644375, "creation_date": 1438215018, "answer_id": 31713229, "question_id": 31713117, "link": "https://stackoverflow.com/questions/31713117/python-3-set-default-bytes-encoding/31713229#31713229", "title": "Python 3 set default bytes encoding", "body": "<p>The <a href=\"https://docs.python.org/3/library/functions.html#func-bytes\" rel=\"nofollow noreferrer\">documentation for <code>bytes</code></a> redirects you to the <a href=\"https://docs.python.org/3/library/functions.html#bytearray\" rel=\"nofollow noreferrer\">documentation for <code>bytearray</code></a>, which says in part:</p>\n<blockquote>\n<p>The optional source parameter can be used to initialize the array in a few different ways:</p>\n<ul>\n<li>If it is a string, you must also give the encoding (and optionally, errors) parameters; bytearray() then converts the string to bytes using str.encode().</li>\n</ul>\n</blockquote>\n<p>It looks like there's no way to provide a default.</p>\n<p>You can use the <code>encode</code> method, which <em>does</em> have a default, given by <code>sys.getdefaultencoding()</code>. If you need to change the default, check out <a href=\"https://stackoverflow.com/questions/2276200/changing-default-encoding-of-python\">this question</a> but be aware that the capability to do it easily was removed for good reason.</p>\n<pre><code>import sys\nprint(sys.getdefaultencoding())\ns.encode()\n</code></pre>\n"}], "owner": {"reputation": 6641, "user_id": 3163618, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/bfab3078ba21206c78750d088cae76cf?s=128&d=identicon&r=PG&f=1", "display_name": "qwr", "link": "https://stackoverflow.com/users/3163618/qwr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2710, "favorite_count": 1, "accepted_answer_id": 31713229, "answer_count": 1, "score": 4, "last_activity_date": 1438340234, "creation_date": 1438214106, "last_edit_date": 1438340234, "question_id": 31713117, "link": "https://stackoverflow.com/questions/31713117/python-3-set-default-bytes-encoding", "title": "Python 3 set default bytes encoding", "body": "<p>In Python 3, <code>bytes</code> requires an encoding:</p>\n\n<pre><code>bytes(s, encoding=\"utf-8\")\n</code></pre>\n\n<p>Is there a way to set a default encoding, so <code>bytes</code> always encodes in UTF-8?</p>\n\n<p>The simplest way I imagine is </p>\n\n<pre><code>def bytes_utf8(s):\n    return bytes(s, encoding=\"utf-8\") \n</code></pre>\n"}, {"tags": ["python", "exception-handling", "python-requests", "python-3.3", "python-mock"], "comments": [{"owner": {"reputation": 2256, "user_id": 3076272, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/48919202ec2e5a16d47356c6db33a5e9?s=128&d=identicon&r=PG", "display_name": "Dan Oberlam", "link": "https://stackoverflow.com/users/3076272/dan-oberlam"}, "edited": false, "score": 0, "creation_date": 1438264481, "post_id": 31713054, "comment_id": 51387574, "body": "FWIW I was able to work around this by using <a href=\"http://stackoverflow.com/a/28507806/3076272\">stackoverflow.com/a/28507806/3076272</a>, but I&#39;d rather find out why this was happening."}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 0, "creation_date": 1438927782, "post_id": 31713054, "comment_id": 51659886, "body": "Is <code>requests</code> here your own module or is it the  <code>requests</code> module from <a href=\"http://www.python-requests.org/\" rel=\"nofollow noreferrer\">python-requests.org</a> ?"}, {"owner": {"reputation": 2256, "user_id": 3076272, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/48919202ec2e5a16d47356c6db33a5e9?s=128&d=identicon&r=PG", "display_name": "Dan Oberlam", "link": "https://stackoverflow.com/users/3076272/dan-oberlam"}, "reply_to_user": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 0, "creation_date": 1438955909, "post_id": 31713054, "comment_id": 51676793, "body": "The one from python-requests.org"}], "answers": [{"comments": [{"owner": {"reputation": 15119, "user_id": 186202, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/48e87ebebf7bee2a0ca10aa2362795a6?s=128&d=identicon&r=PG", "display_name": "Natim", "link": "https://stackoverflow.com/users/186202/natim"}, "edited": false, "score": 1, "creation_date": 1546443848, "post_id": 31873937, "comment_id": 94854960, "body": "You can also set the right exception to your mock: <code>from requests.exceptions import COnnectionError; mocked_requests.exceptions.ConnectionError = ConnectionError</code>"}], "tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": true, "score": 31, "last_activity_date": 1438938808, "creation_date": 1438938808, "answer_id": 31873937, "question_id": 31713054, "link": "https://stackoverflow.com/questions/31713054/cant-catch-mocked-exception-because-it-doesnt-inherit-baseexception/31873937#31873937", "title": "Can&#39;t catch mocked exception because it doesn&#39;t inherit BaseException", "body": "<p>I could reproduce the error with a minimal example:</p>\n\n<p>foo.py:</p>\n\n<pre><code>class MyError(Exception):\n    pass\n\nclass A:\n    def inner(self):\n        err = MyError(\"FOO\")\n        print(type(err))\n        raise err\n    def outer(self):\n        try:\n            self.inner()\n        except MyError as err:\n            print (\"catched \", err)\n        return \"OK\"\n</code></pre>\n\n<p>Test without mocking :</p>\n\n<pre><code>class FooTest(unittest.TestCase):\n    def test_inner(self):\n        a = foo.A()\n        self.assertRaises(foo.MyError, a.inner)\n    def test_outer(self):\n        a = foo.A()\n        self.assertEquals(\"OK\", a.outer())\n</code></pre>\n\n<p>Ok, all is fine, both test pass</p>\n\n<p>The problem comes with the mocks. As soon as the class MyError is mocked, the <code>expect</code> clause cannot catch anything and I get same error as the example from the question :</p>\n\n<pre><code>class FooTest(unittest.TestCase):\n    def test_inner(self):\n        a = foo.A()\n        self.assertRaises(foo.MyError, a.inner)\n    def test_outer(self):\n        with unittest.mock.patch('foo.MyError'):\n            a = exc2.A()\n            self.assertEquals(\"OK\", a.outer())\n</code></pre>\n\n<p>Immediately gives :</p>\n\n<pre><code>ERROR: test_outer (__main__.FooTest)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"...\\foo.py\", line 11, in outer\n    self.inner()\n  File \"...\\foo.py\", line 8, in inner\n    raise err\nTypeError: exceptions must derive from BaseException\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"&lt;pyshell#78&gt;\", line 8, in test_outer\n  File \"...\\foo.py\", line 12, in outer\n    except MyError as err:\nTypeError: catching classes that do not inherit from BaseException is not allowed\n</code></pre>\n\n<p>Here I get a first <code>TypeError</code>that you did not have, because I am raising a mock while you forced a true exception with <code>'requests.exceptions.ConnectionError': requests.exceptions.ConnectionError</code> in config. But the problem remains that <strong>the <code>except</code> clause tries to catch a mock</strong>.</p>\n\n<p>TL/DR: as you mock the full <code>requests</code> package, the <code>except requests.exceptions.ConnectionError</code> clause tries to catch a mock. As the mock is not really a <code>BaseException</code>, it causes the error.</p>\n\n<p>The only solution I can imagine is not to mock the full <code>requests</code> but only the parts that are not exceptions. I must admit I could not find how to say to mock <em>mock everything except this</em> but in your example, you only need to patch <code>requests.head</code>. So I think that this should work :</p>\n\n<pre><code>def test_bad_connection(self):\n    with mock.patch('path.to.my.package.requests.head',\n                    side_effect=requests.exceptions.ConnectionError):\n        self.assertEqual(\n            mypackage.myMethod('some_address',\n            mypackage.successfulConnection.FAILURE\n        )\n</code></pre>\n\n<p>That is : only patch the <code>head</code> method with the exception as side effect.</p>\n"}, {"tags": [], "owner": {"reputation": 1250, "user_id": 27088, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/beddfbcdcb04ed93edce889283f24646?s=128&d=identicon&r=PG", "display_name": "Bill B", "link": "https://stackoverflow.com/users/27088/bill-b"}, "is_accepted": false, "score": 6, "last_activity_date": 1458936941, "last_edit_date": 1592644375, "creation_date": 1458936941, "answer_id": 36227350, "question_id": 31713054, "link": "https://stackoverflow.com/questions/31713054/cant-catch-mocked-exception-because-it-doesnt-inherit-baseexception/36227350#36227350", "title": "Can&#39;t catch mocked exception because it doesn&#39;t inherit BaseException", "body": "<p>I just ran into the same issue while trying to mock <code>sqlite3</code> (and found this post while looking for solutions).</p>\n<p>What <a href=\"https://stackoverflow.com/a/31873937/27088\" title=\"Serge\">Serge</a> said is correct:</p>\n<blockquote>\n<p>TL/DR: as you mock the full requests package, the except requests.exceptions.ConnectionError clause tries to catch a mock. As the mock is not really a BaseException, it causes the error.</p>\n<p>The only solution I can imagine is not to mock the full requests but only the parts that are not exceptions. I must admit I could not find how to say to mock <em>mock everything except this</em></p>\n</blockquote>\n<p>My solution was to mock the entire module, then set the mock attribute for the exception to be equal to the exception in the real class, effectively &quot;un-mocking&quot; the exception.  For example, in my case:</p>\n<pre><code>@mock.patch(MyClass.sqlite3)\ndef test_connect_fail(self, mock_sqlite3):\n    mock_sqlite3.connect.side_effect = sqlite3.OperationalError()\n    mock_sqlite3.OperationalError = sqlite3.OperationalError\n    self.assertRaises(sqlite3.OperationalError, MyClass, self.db_filename)\n</code></pre>\n<p>For <code>requests</code>, you could assign exceptions individually like this:</p>\n<pre><code>    mock_requests.exceptions.ConnectionError = requests.exceptions.ConnectionError\n</code></pre>\n<p>or do it for all of the <code>requests</code> exceptions like this:</p>\n<pre><code>    mock_requests.exceptions = requests.exceptions\n</code></pre>\n<p>I don't know if this is the &quot;right&quot; way to do it, but so far it seems to work for me without any issue.</p>\n"}, {"comments": [{"owner": {"reputation": 2256, "user_id": 3076272, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/48919202ec2e5a16d47356c6db33a5e9?s=128&d=identicon&r=PG", "display_name": "Dan Oberlam", "link": "https://stackoverflow.com/users/3076272/dan-oberlam"}, "edited": false, "score": 0, "creation_date": 1472873567, "post_id": 39302126, "comment_id": 65939869, "body": "Out of curiosity, why would you ever need to mock an exception?"}, {"owner": {"reputation": 1555, "user_id": 2859458, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fc778faba894aa4ded4c99e2811b0194?s=128&d=identicon&r=PG&f=1", "display_name": "user2859458", "link": "https://stackoverflow.com/users/2859458/user2859458"}, "reply_to_user": {"reputation": 2256, "user_id": 3076272, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/48919202ec2e5a16d47356c6db33a5e9?s=128&d=identicon&r=PG", "display_name": "Dan Oberlam", "link": "https://stackoverflow.com/users/3076272/dan-oberlam"}, "edited": false, "score": 0, "creation_date": 1473174358, "post_id": 39302126, "comment_id": 66034346, "body": "@Dannnno: Good question. We&#39;d mock an exception for the same reason we mock anything -- to prevent its logic from running in our unit test. Normally, exceptions just inherit the base exception class and don&#39;t do anything else. In this case mocking them is pointless because the exception we pull out and the exception we replace it with are logically identical, but every now and then someone builds an exception that does have some logic and, in that rare case, it&#39;s nice to be able to mock it out."}, {"owner": {"reputation": 2256, "user_id": 3076272, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/48919202ec2e5a16d47356c6db33a5e9?s=128&d=identicon&r=PG", "display_name": "Dan Oberlam", "link": "https://stackoverflow.com/users/3076272/dan-oberlam"}, "edited": false, "score": 0, "creation_date": 1473178954, "post_id": 39302126, "comment_id": 66037157, "body": "I&#39;m just having a really hard time imagining a situation where an exception should he doing any logic that is worth mocking. If possible could you expand on what&#39;s happening? I&#39;m actually working on a patch for this issue and if I were able to give a justifying reason for it that would help a lot."}, {"owner": {"reputation": 1555, "user_id": 2859458, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fc778faba894aa4ded4c99e2811b0194?s=128&d=identicon&r=PG&f=1", "display_name": "user2859458", "link": "https://stackoverflow.com/users/2859458/user2859458"}, "reply_to_user": {"reputation": 2256, "user_id": 3076272, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/48919202ec2e5a16d47356c6db33a5e9?s=128&d=identicon&r=PG", "display_name": "Dan Oberlam", "link": "https://stackoverflow.com/users/3076272/dan-oberlam"}, "edited": false, "score": 1, "creation_date": 1473183275, "post_id": 39302126, "comment_id": 66039477, "body": "Ultimately, your imagination is right. There really isn&#39;t a good reason an error based exception should have logic worth stubbing -- that should be handled in the try block imo. But sometimes you get to work with other folk&#39;s code who don&#39;t understand the principle of separation of concerns.   If the exception is not worth mocking/stubbing, then I would import the exception into my test file, raise it with mock&#39;s <code>side_effect</code> and either let the unit catch the exception or assert it was uncaught with <code>self.assertRaises</code>."}, {"owner": {"reputation": 1555, "user_id": 2859458, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fc778faba894aa4ded4c99e2811b0194?s=128&d=identicon&r=PG&f=1", "display_name": "user2859458", "link": "https://stackoverflow.com/users/2859458/user2859458"}, "reply_to_user": {"reputation": 2256, "user_id": 3076272, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/48919202ec2e5a16d47356c6db33a5e9?s=128&d=identicon&r=PG", "display_name": "Dan Oberlam", "link": "https://stackoverflow.com/users/3076272/dan-oberlam"}, "edited": false, "score": 0, "creation_date": 1473184430, "post_id": 39302126, "comment_id": 66040098, "body": "I think it is worth mentioning, though, that <code>raise</code>&#39;s main function is to work with an <code>Exception</code> class to exit the call stack -- which doesn&#39;t necessarily mean an error occurred. Some libraries (usually web frameworks) take advantage of this behavior to control the flow of the program on a higher level than just <code>if</code> and <code>while</code>. In these cases, there is often logic worth avoiding in a unit test"}], "tags": [], "owner": {"reputation": 1555, "user_id": 2859458, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fc778faba894aa4ded4c99e2811b0194?s=128&d=identicon&r=PG&f=1", "display_name": "user2859458", "link": "https://stackoverflow.com/users/2859458/user2859458"}, "is_accepted": false, "score": 2, "last_activity_date": 1472861828, "creation_date": 1472861828, "answer_id": 39302126, "question_id": 31713054, "link": "https://stackoverflow.com/questions/31713054/cant-catch-mocked-exception-because-it-doesnt-inherit-baseexception/39302126#39302126", "title": "Can&#39;t catch mocked exception because it doesn&#39;t inherit BaseException", "body": "<p>For those of us who need to mock an exception and can't do that by simply patching <code>head</code>, here is an easy solution that replaces the target exception with an empty one:</p>\n\n<p>Say we have a generic unit to test with an exception we have to have mocked:</p>\n\n<pre><code># app/foo_file.py\ndef test_me():\n    try:\n       foo()\n       return \"No foo error happened\"\n    except CustomError:  # &lt;-- Mock me!\n        return \"The foo error was caught\"\n</code></pre>\n\n<p>We want to mock <code>CustomError</code> but because it is an exception we run into trouble if we try to patch it like everything else. Normally, a call to <code>patch</code> replaces the target with a <code>MagicMock</code> but that won't work here. Mocks are nifty, but they do not behave like exceptions do. Rather than patching with a mock, let's give it a stub exception instead. We'll do that in our test file.</p>\n\n<pre><code># app/test_foo_file.py\nfrom mock import patch\n\n\n# A do-nothing exception we are going to replace CustomError with\nclass StubException(Exception):\n    pass\n\n\n# Now apply it to our test\n@patch('app.foo_file.foo')\n@patch('app.foo_file.CustomError', new_callable=lambda: StubException)\ndef test_foo(stub_exception, mock_foo):\n    mock_foo.side_effect = stub_exception(\"Stub\")  # Raise our stub to be caught by CustomError\n    assert test_me() == \"The error was caught\"\n\n# Success!\n</code></pre>\n\n<p>So what's with the <code>lambda</code>? The <code>new_callable</code> param calls whatever we give it and replaces the target with the return of that call. If we pass our <code>StubException</code> class straight, it will call the class's constructor and patch our target object with an exception <em>instance</em> rather than a <em>class</em> which isn't what we want. By wrapping it with <code>lambda</code>, it returns our class as we intend.</p>\n\n<p>Once our patching is done, the <code>stub_exception</code> object (which is literally our <code>StubException</code> class) can be raised and caught as if it were the <code>CustomError</code>. Neat!</p>\n"}, {"tags": [], "owner": {"reputation": 15264, "user_id": 940098, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jGtwG.jpg?s=128&g=1", "display_name": "Wtower", "link": "https://stackoverflow.com/users/940098/wtower"}, "is_accepted": false, "score": 1, "last_activity_date": 1486199999, "creation_date": 1486199999, "answer_id": 42038610, "question_id": 31713054, "link": "https://stackoverflow.com/questions/31713054/cant-catch-mocked-exception-because-it-doesnt-inherit-baseexception/42038610#42038610", "title": "Can&#39;t catch mocked exception because it doesn&#39;t inherit BaseException", "body": "<p>I faced a similar issue while trying to mock the <a href=\"https://github.com/amoffat/sh\" rel=\"nofollow noreferrer\">sh</a> package. While sh is very useful, the fact that all methods and exceptions are defined dynamically make it more difficult to mock them. So following the recommendation of the <a href=\"https://docs.python.org/3/library/unittest.mock.html#autospeccing\" rel=\"nofollow noreferrer\">documentation</a>:</p>\n\n<pre><code>import unittest\nfrom unittest.mock import Mock, patch\n\n\nclass MockSh(Mock):\n    # error codes are defined dynamically in sh\n    class ErrorReturnCode_32(BaseException):\n        pass\n\n    # could be any sh command    \n    def mount(self, *args):\n        raise self.ErrorReturnCode_32\n\n\nclass MyTestCase(unittest.TestCase):\n    mock_sh = MockSh()\n\n    @patch('core.mount.sh', new=mock_sh)\n    def test_mount(self):\n        ...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 12973, "user_id": 5061557, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/7df554b2e75e1a1581ed3757ca4d0c82?s=128&d=identicon&r=PG&f=1", "display_name": "Grr", "link": "https://stackoverflow.com/users/5061557/grr"}, "is_accepted": false, "score": 0, "last_activity_date": 1513091862, "creation_date": 1513091862, "answer_id": 47775928, "question_id": 31713054, "link": "https://stackoverflow.com/questions/31713054/cant-catch-mocked-exception-because-it-doesnt-inherit-baseexception/47775928#47775928", "title": "Can&#39;t catch mocked exception because it doesn&#39;t inherit BaseException", "body": "<p>I just ran into the same problem when mocking <a href=\"https://docs.python.org/3/library/struct.html\" rel=\"nofollow noreferrer\"><code>struct</code></a>.</p>\n\n<p>I get the error:</p>\n\n<blockquote>\n  <p>TypeError: catching classes that do not inherit from BaseException is not allowed</p>\n</blockquote>\n\n<p>When trying to catch a <code>struct.error</code> raised from <code>struct.unpack</code>.</p>\n\n<p>I found that the simplest way to get around this in my tests was to simply set the value of the error attribute in my mock to be <code>Exception</code>. For example</p>\n\n<p>The method I want to test has this basic pattern:</p>\n\n<pre><code>def some_meth(self):\n    try:\n        struct.unpack(fmt, data)\n    except struct.error:\n        return False\n    return True\n</code></pre>\n\n<p>The test has this basic pattern.</p>\n\n<pre><code>@mock.patch('my_module.struct')\ndef test_some_meth(self, struct_mock):\n    '''Explain how some_func should work.'''\n    struct_mock.error = Exception\n    self.my_object.some_meth()\n    struct_mock.unpack.assert_called()\n    struct_mock.unpack.side_effect = struct_mock.error\n    self.assertFalse(self.my_object.some_meth()\n</code></pre>\n\n<p>This is similar to the approach taken by @BillB, but it is certainly simpler as I don't need to add imports to my tests and still get the same behavior. To me it would seem this is the logical conclusion to the general thread of reasoning in the answers here.</p>\n"}, {"tags": [], "owner": {"reputation": 893, "user_id": 2048802, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bRI0E.jpg?s=128&g=1", "display_name": "idontevenseethecode", "link": "https://stackoverflow.com/users/2048802/idontevenseethecode"}, "is_accepted": false, "score": 0, "last_activity_date": 1591127727, "creation_date": 1591127727, "answer_id": 62160355, "question_id": 31713054, "link": "https://stackoverflow.com/questions/31713054/cant-catch-mocked-exception-because-it-doesnt-inherit-baseexception/62160355#62160355", "title": "Can&#39;t catch mocked exception because it doesn&#39;t inherit BaseException", "body": "<p>Use <code>patch.object</code> to partially mock a class.</p>\n\n<p>My use case:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import unittest\nfrom unittest import mock\nimport requests\n\ndef test_my_function(self):\n    response = mock.MagicMock()\n    response.raise_for_status.side_effect = requests.HTTPError\n\n    with mock.patch.object(requests, 'get', return_value=response):\n        my_function()\n</code></pre>\n"}], "owner": {"reputation": 2256, "user_id": 3076272, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/48919202ec2e5a16d47356c6db33a5e9?s=128&d=identicon&r=PG", "display_name": "Dan Oberlam", "link": "https://stackoverflow.com/users/3076272/dan-oberlam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 19696, "favorite_count": 7, "accepted_answer_id": 31873937, "answer_count": 6, "score": 31, "last_activity_date": 1591127727, "creation_date": 1438213772, "last_edit_date": 1495540962, "question_id": 31713054, "link": "https://stackoverflow.com/questions/31713054/cant-catch-mocked-exception-because-it-doesnt-inherit-baseexception", "title": "Can&#39;t catch mocked exception because it doesn&#39;t inherit BaseException", "body": "<p>I'm working on a project that involves connecting to a remote server, waiting for a response, and then performing actions based on that response.  We catch a couple of different exceptions, and behave differently depending on which exception is caught.  For example:</p>\n\n<pre><code>def myMethod(address, timeout=20):\n    try:\n        response = requests.head(address, timeout=timeout)\n    except requests.exceptions.Timeout:\n        # do something special\n    except requests.exceptions.ConnectionError:\n        # do something special\n    except requests.exceptions.HTTPError:\n        # do something special\n    else:\n        if response.status_code != requests.codes.ok:\n            # do something special\n        return successfulConnection.SUCCESS\n</code></pre>\n\n<p>To test this, we've written a test like the following</p>\n\n<pre><code>class TestMyMethod(unittest.TestCase):\n\n    def test_good_connection(self):\n        config = {\n            'head.return_value': type('MockResponse', (), {'status_code': requests.codes.ok}),\n            'codes.ok': requests.codes.ok\n        }\n        with mock.patch('path.to.my.package.requests', **config):\n            self.assertEqual(\n                mypackage.myMethod('some_address',\n                mypackage.successfulConnection.SUCCESS\n            )\n\n    def test_bad_connection(self):\n        config = {\n            'head.side_effect': requests.exceptions.ConnectionError,\n            'requests.exceptions.ConnectionError': requests.exceptions.ConnectionError\n        }\n        with mock.patch('path.to.my.package.requests', **config):\n            self.assertEqual(\n                mypackage.myMethod('some_address',\n                mypackage.successfulConnection.FAILURE\n            )\n</code></pre>\n\n<p>If I run the function directly, everything happens as expected.  I even tested by adding <code>raise requests.exceptions.ConnectionError</code> to the <code>try</code> clause of the function.  But when I run my unit tests, I get </p>\n\n<pre class=\"lang-none prettyprint-override\"><code>ERROR: test_bad_connection (test.test_file.TestMyMethod)\n----------------------------------------------------------------\nTraceback (most recent call last):\n  File \"path/to/sourcefile\", line ###, in myMethod\n    respone = requests.head(address, timeout=timeout)\n  File \"path/to/unittest/mock\", line 846, in __call__\n    return _mock_self.mock_call(*args, **kwargs)\n  File \"path/to/unittest/mock\", line 901, in _mock_call\n    raise effect\nmy.package.requests.exceptions.ConnectionError\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"Path/to/my/test\", line ##, in test_bad_connection\n    mypackage.myMethod('some_address',\n  File \"Path/to/package\", line ##, in myMethod\n    except requests.exceptions.ConnectionError:\nTypeError: catching classes that do not inherit from BaseException is not allowed\n</code></pre>\n\n<p>I tried to change the exception I was patching in to <code>BaseException</code> and I got a more or less identical error.</p>\n\n<p>I've read <a href=\"https://stackoverflow.com/a/18163759/3076272\">https://stackoverflow.com/a/18163759/3076272</a> already, so I think it must be a bad <code>__del__</code> hook somewhere, but I'm not sure where to look for it or what I can even do in the mean time.  I'm also relatively new to <code>unittest.mock.patch()</code> so it's very possible that I'm doing something wrong there as well.</p>\n\n<p>This is a Fusion360 add-in so it is using Fusion 360's packaged version of Python 3.3 - as far as I know it's a vanilla version (i.e. they don't roll their own) but I'm not positive of that.</p>\n"}, {"tags": ["python", "api", "go"], "answers": [{"comments": [{"owner": {"reputation": 76, "user_id": 5171318, "user_type": "registered", "profile_image": "https://graph.facebook.com/1641592652753191/picture?type=large", "display_name": "Miguel P.", "link": "https://stackoverflow.com/users/5171318/miguel-p"}, "edited": false, "score": 0, "creation_date": 1438265132, "post_id": 31713458, "comment_id": 51388041, "body": "Im really sorry! first time posting on stackoverflow. edited the code and now is copy paste able and executes. I think i might be missing some kind of encode for the response when i pass it to the ComputeHmac512Hex method."}, {"owner": {"reputation": 76, "user_id": 5171318, "user_type": "registered", "profile_image": "https://graph.facebook.com/1641592652753191/picture?type=large", "display_name": "Miguel P.", "link": "https://stackoverflow.com/users/5171318/miguel-p"}, "edited": false, "score": 0, "creation_date": 1438267081, "post_id": 31713458, "comment_id": 51389529, "body": "I&#39;ll try in a sec! Yeah i only made it without params because i think the info url doesnt need anymore parameters, but the nonce. Still not sure on that, but yes the correct implementation would be with the full parameters. But i think the query data (parameters) is to be added to the header not to the rawurl, at least thats what i get from their description on the variables to send to them. <b>Update</b> just tryed and still doesnt work, i might be missing an encode on the result :x python code: queryStr = urllib.urlencode(query)"}, {"owner": {"reputation": 11891, "user_id": 1930219, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/5ae618e4950c81bf0d83d17c2c2ddaab?s=128&d=identicon&r=PG", "display_name": "Alex Netkachov", "link": "https://stackoverflow.com/users/1930219/alex-netkachov"}, "reply_to_user": {"reputation": 76, "user_id": 5171318, "user_type": "registered", "profile_image": "https://graph.facebook.com/1641592652753191/picture?type=large", "display_name": "Miguel P.", "link": "https://stackoverflow.com/users/5171318/miguel-p"}, "edited": false, "score": 0, "creation_date": 1438267362, "post_id": 31713458, "comment_id": 51389739, "body": "Most likely you need to send the parameters as well: <a href=\"http://docs.python-requests.org/en/latest/user/quickstart/#passing-parameters-in-urls\" rel=\"nofollow noreferrer\">docs.python-requests.org/en/latest/user/quickstart/&hellip;</a>"}, {"owner": {"reputation": 11891, "user_id": 1930219, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/5ae618e4950c81bf0d83d17c2c2ddaab?s=128&d=identicon&r=PG", "display_name": "Alex Netkachov", "link": "https://stackoverflow.com/users/1930219/alex-netkachov"}, "reply_to_user": {"reputation": 76, "user_id": 5171318, "user_type": "registered", "profile_image": "https://graph.facebook.com/1641592652753191/picture?type=large", "display_name": "Miguel P.", "link": "https://stackoverflow.com/users/5171318/miguel-p"}, "edited": false, "score": 0, "creation_date": 1438267404, "post_id": 31713458, "comment_id": 51389769, "body": "They are definitely added to the query string so please try with full URL."}, {"owner": {"reputation": 76, "user_id": 5171318, "user_type": "registered", "profile_image": "https://graph.facebook.com/1641592652753191/picture?type=large", "display_name": "Miguel P.", "link": "https://stackoverflow.com/users/5171318/miguel-p"}, "edited": false, "score": 0, "creation_date": 1438270634, "post_id": 31713458, "comment_id": 51392147, "body": "added this code: nonce := time.Now().UnixNano()         result :=  fmt.Sprintf(&quot;nonce=%d&quot;, nonce)         rawurl = fmt.Sprintf(&quot;%s%s/%s?%s&quot;, API_BASE_CRY ,API_VERSION_CRY , ressource, result ) ... like this? still cant do it"}, {"owner": {"reputation": 76, "user_id": 5171318, "user_type": "registered", "profile_image": "https://graph.facebook.com/1641592652753191/picture?type=large", "display_name": "Miguel P.", "link": "https://stackoverflow.com/users/5171318/miguel-p"}, "edited": false, "score": 0, "creation_date": 1438335323, "post_id": 31713458, "comment_id": 51419371, "body": "I updated the question :) but still cant seem to make this run properly"}, {"owner": {"reputation": 11891, "user_id": 1930219, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/5ae618e4950c81bf0d83d17c2c2ddaab?s=128&d=identicon&r=PG", "display_name": "Alex Netkachov", "link": "https://stackoverflow.com/users/1930219/alex-netkachov"}, "reply_to_user": {"reputation": 76, "user_id": 5171318, "user_type": "registered", "profile_image": "https://graph.facebook.com/1641592652753191/picture?type=large", "display_name": "Miguel P.", "link": "https://stackoverflow.com/users/5171318/miguel-p"}, "edited": false, "score": 0, "creation_date": 1438336141, "post_id": 31713458, "comment_id": 51419875, "body": "I&#39;ve just tested the code with Cryptsy and it works well. <code>reponse {&quot;success&quot;:true,&quot;data&quot;:{&quot;id&quot;:&quot;336571&quot;,&quot;username&quot;:&quot;AlexAtNet&quot;&zwnj;&#8203;,&quot;accounttype&quot;:&quot;Pers&zwnj;&#8203;onal&quot;,&quot;email&quot;:...</code>. Make sure that your key/secret in the right order. The secret is longer. I mean that it literally works as it is now."}, {"owner": {"reputation": 11891, "user_id": 1930219, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/5ae618e4950c81bf0d83d17c2c2ddaab?s=128&d=identicon&r=PG", "display_name": "Alex Netkachov", "link": "https://stackoverflow.com/users/1930219/alex-netkachov"}, "reply_to_user": {"reputation": 76, "user_id": 5171318, "user_type": "registered", "profile_image": "https://graph.facebook.com/1641592652753191/picture?type=large", "display_name": "Miguel P.", "link": "https://stackoverflow.com/users/5171318/miguel-p"}, "edited": false, "score": 0, "creation_date": 1438336234, "post_id": 31713458, "comment_id": 51419926, "body": "Make sure that you have got your keys from Cryptsy account page, API Keys section."}, {"owner": {"reputation": 76, "user_id": 5171318, "user_type": "registered", "profile_image": "https://graph.facebook.com/1641592652753191/picture?type=large", "display_name": "Miguel P.", "link": "https://stackoverflow.com/users/5171318/miguel-p"}, "edited": false, "score": 0, "creation_date": 1438353487, "post_id": 31713458, "comment_id": 51431416, "body": "reponse {&quot;success&quot;:true,&quot;data&quot;:{&quot;id&quot;:&quot;332744&quot;,&quot;username&quot;:&quot;MikePal&quot;,.&zwnj;&#8203;....   :D Thank you Alex :D"}], "tags": [], "owner": {"reputation": 11891, "user_id": 1930219, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/5ae618e4950c81bf0d83d17c2c2ddaab?s=128&d=identicon&r=PG", "display_name": "Alex Netkachov", "link": "https://stackoverflow.com/users/1930219/alex-netkachov"}, "is_accepted": true, "score": 1, "last_activity_date": 1438266169, "last_edit_date": 1438266169, "creation_date": 1438216804, "answer_id": 31713458, "question_id": 31713050, "link": "https://stackoverflow.com/questions/31713050/need-some-help-on-how-to-implement-an-restfull-api-app-based-on-golang/31713458#31713458", "title": "Need some help on how to implement an restfull api app based on golang", "body": "<p>I see the issue with <code>result :=  fmt.Sprintf(\"%d\", nonce)</code>. The code that corresponds to the Python code should be something like</p>\n\n<pre><code>result :=  fmt.Sprintf(\"nonce=%d\", nonce)\n</code></pre>\n\n<p>Could you please check it with this fix?</p>\n\n<p>I also can observe a major difference in how the request is sending. The Python version is (<a href=\"https://github.com/ScriptProdigy/CryptsyPythonV2/blob/master/Cryptsy.py\" rel=\"nofollow\">link</a>):</p>\n\n<pre><code>        ret = requests.get(link,\n                           params=query,\n                           headers=headers,\n                           verify=False)\n</code></pre>\n\n<p>but your code is does not send <code>params</code> with added nonce, etc. I think it should be something like</p>\n\n<pre><code>rawurl = fmt.Sprintf(\"%s%s/%s?%s\", API_BASE_CRY ,API_VERSION_CRY , ressource, queryStr)\n</code></pre>\n\n<p>where queryStr should contain nonce, etc.</p>\n"}], "owner": {"reputation": 76, "user_id": 5171318, "user_type": "registered", "profile_image": "https://graph.facebook.com/1641592652753191/picture?type=large", "display_name": "Miguel P.", "link": "https://stackoverflow.com/users/5171318/miguel-p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 178, "favorite_count": 0, "accepted_answer_id": 31713458, "answer_count": 1, "score": 0, "last_activity_date": 1438273117, "creation_date": 1438213752, "last_edit_date": 1438273117, "question_id": 31713050, "link": "https://stackoverflow.com/questions/31713050/need-some-help-on-how-to-implement-an-restfull-api-app-based-on-golang", "title": "Need some help on how to implement an restfull api app based on golang", "body": "<p>My coding skills are a bit low :)\nRecently i started learning golang and how to handle an Api communication app. Have been having a great time learning it by myself, golang is revealing itself as a challenging language with great rewards in the end (code sense ^^).</p>\n\n<p>Have been trying to create a cryptsy api lib for golang based on their API V2 (BETA) which is a restfull api. They have a python lib on their api website <a href=\"https://github.com/ScriptProdigy/CryptsyPythonV2/blob/master/Cryptsy.py\" rel=\"nofollow\">https://github.com/ScriptProdigy/CryptsyPythonV2/blob/master/Cryptsy.py</a>.</p>\n\n<p>So far have been able to get the public access working but am having a really hard time at the private access because of the authentication part.. I find that the info they give on their website on how to implement it is a bit confusing :(</p>\n\n<blockquote>\n  <p>Authorization is performed by sending the following variables into the request header Key</p>\n  \n  <ul>\n  <li>Public API key.</li>\n  <li>All query data (nonce=blahblah&amp;limit=blahblah) signed by a secret key according to HMAC-SHA512 method. Your secret key and public keys can be generated from your account settings page. Every request requires a unique nonce. (Suggested to use unix timestamp with microseconds)</li>\n  </ul>\n</blockquote>\n\n<p>For this authentication part the python code goes as:</p>\n\n<pre><code>def _query(self, method, id=None, action=None, query=[], get_method=\"GET\"):\n    query.append(('nonce', time.time()))\n    queryStr = urllib.urlencode(query)\n\n    link = 'https://' + self.domain + route\n\n    sign = hmac.new(self.PrivateKey.encode('utf-8'), queryStr, hashlib.sha512).hexdigest()\n\n    headers = {'Sign': sign, 'Key': self.PublicKey.encode('utf-8')}\n</code></pre>\n\n<p>Got this far in golang:</p>\n\n<pre><code>package main\n\nimport(\n\n    \"crypto/hmac\"\n    \"crypto/sha512\"\n    \"encoding/hex\"\n    \"encoding/json\"\n    \"errors\"\n    \"fmt\"\n    \"io/ioutil\"\n    \"net/http\"\n    \"strings\"\n    \"time\"\n\n)\n\nconst (\n\n    API_BASE_CRY    = \"https://api.cryptsy.com/api/\"\n    API_VERSION_CRY = \"v2\"\n    API_KEY_CRY     = \"xxxxx\"\n    API_SECRET_CRY  = \"xxxxxxxxxxxx\"\n    DEFAULT_HTTPCLIENT_TIMEOUT = 30 // HTTP client timeout\n)\n\ntype clientCry struct {\n    apiKey     string\n    apiSecret  string\n    httpClient *http.Client\n}\n\ntype Cryptsy struct {\n    clientCry *clientCry\n}\n\ntype CryptsyApiRsp struct {\n    Success bool            `json:\"success\"`\n    Data    json.RawMessage `json:\"data\"`\n}\n\nfunc NewCry(apiKey, apiSecret string) *Cryptsy {\n    clientCry := NewClientCry(apiKey, apiSecret)\n    return &amp;Cryptsy{clientCry}\n}\n\nfunc NewClientCry(apiKey, apiSecret string) (c *clientCry) {\n    return &amp;clientCry{apiKey, apiSecret, &amp;http.Client{}}\n}\n\nfunc ComputeHmac512Hex(secret, payload string) string {\n    h := hmac.New(sha512.New, []byte(secret))\n    h.Write([]byte(payload))\n    return hex.EncodeToString(h.Sum(nil))\n}\n\nfunc (c *clientCry) doTimeoutRequestCry(timer *time.Timer, req *http.Request) (*http.Response, error) {\n\n    type data struct {\n       resp *http.Response\n       err  error\n    }\n\n    done := make(chan data, 1)\n    go func() {\n       resp, err := c.httpClient.Do(req)\n       done &lt;- data{resp, err}\n    }()\n\n    select {\n       case r := &lt;-done:\n       return r.resp, r.err\n       case &lt;-timer.C:\n          return nil, errors.New(\"timeout on reading data from Bittrex API\")\n    }\n}\n\nfunc (c *clientCry) doCry(method string, ressource string, payload string, authNeeded bool) (response []byte, err error) {\n    connectTimer := time.NewTimer(DEFAULT_HTTPCLIENT_TIMEOUT * time.Second)\n\n    var rawurl string        \n\n    nonce := time.Now().UnixNano()\n    result :=  fmt.Sprintf(\"nonce=%d\", nonce)\n    rawurl = fmt.Sprintf(\"%s%s/%s?%s\", API_BASE_CRY ,API_VERSION_CRY , ressource, result )\n    req, err := http.NewRequest(method, rawurl, strings.NewReader(payload))\n\n    sig := ComputeHmac512Hex(API_SECRET_CRY, result)\n\n    req.Header.Add(\"Sign\", sig)\n    req.Header.Add(\"Key\", API_KEY_CRY )\n\n    resp, err := c.doTimeoutRequestCry(connectTimer, req)\n    defer resp.Body.Close()\n\n    response, err = ioutil.ReadAll(resp.Body)\n    fmt.Println(fmt.Sprintf(\"reponse %s\", response), err)\n    return response, err\n}\n\nfunc main() {\n\n    crypsy := NewCry(API_KEY_CRY, API_SECRET_CRY)\n    r, _ := crypsy.clientCry.doCry(\"GET\", \"info\", \"\", true) \n    fmt.Println(r)\n}\n</code></pre>\n\n<p>and my output is :</p>\n\n<p><code>response {\"success\":false,\"error\":[\"Must be authenticated\"]} &lt;nil&gt;</code></p>\n\n<p>not getting why :( im passing the public key and the signature in the header, the signature.. i think im doing it right in the hmac-sha512.\nI'm quering the user info url <a href=\"https://www.cryptsy.com/pages/apiv2/user\" rel=\"nofollow\">https://www.cryptsy.com/pages/apiv2/user</a>, which as stated in the api site  doesn't have any extra query variables so the nonce is the only one needed..</p>\n\n<p>Have googled about restfull api's but haven't been able to find any answer :( starting to not let me sleep at night since i think that what im doing is kinda right.. really cant spot the error.. </p>\n\n<p>Anyone out there that could try and help me with this? </p>\n\n<p>Thxs a lot :)</p>\n"}, {"tags": ["python", "django", "version"], "comments": [{"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1438213940, "post_id": 31713044, "comment_id": 51363813, "body": "The rule of thumb is that you should go with 2 if and only if you plan to use modules that are only available for 2 and cannot be easily built for or ported to 3. That said, yes, this is an opinion."}], "answers": [{"comments": [{"owner": {"reputation": 30464, "user_id": 203568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/914a7c50b970346e442b3e4b0a7e73f8?s=128&d=identicon&r=PG", "display_name": "bgporter", "link": "https://stackoverflow.com/users/203568/bgporter"}, "edited": false, "score": 0, "creation_date": 1438214311, "post_id": 31713120, "comment_id": 51363914, "body": "In the last sentence, don&#39;t you mean &#39;can&#39;t think of any reason <i>not</i> to use Python 3&#39;?"}, {"owner": {"reputation": 55, "user_id": 2626818, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c91847fe91b1bc6a65db864fb21fdd9?s=128&d=identicon&r=PG", "display_name": "baryon5", "link": "https://stackoverflow.com/users/2626818/baryon5"}, "reply_to_user": {"reputation": 30464, "user_id": 203568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/914a7c50b970346e442b3e4b0a7e73f8?s=128&d=identicon&r=PG", "display_name": "bgporter", "link": "https://stackoverflow.com/users/203568/bgporter"}, "edited": false, "score": 0, "creation_date": 1438214416, "post_id": 31713120, "comment_id": 51363940, "body": "Good catch, I did mean that. Fixed."}], "tags": [], "owner": {"reputation": 55, "user_id": 2626818, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c91847fe91b1bc6a65db864fb21fdd9?s=128&d=identicon&r=PG", "display_name": "baryon5", "link": "https://stackoverflow.com/users/2626818/baryon5"}, "is_accepted": false, "score": 3, "last_activity_date": 1438214396, "last_edit_date": 1438214396, "creation_date": 1438214125, "answer_id": 31713120, "question_id": 31713044, "link": "https://stackoverflow.com/questions/31713044/django-use-python3-or-2-7-longevity-and-performance-of-project/31713120#31713120", "title": "Django - Use Python3 or 2.7? Longevity and performance of project", "body": "<p><a href=\"https://docs.djangoproject.com/en/1.8/faq/install/#what-python-version-should-i-use-with-django\" rel=\"nofollow\">Django's official stance</a> is, as long as your dependencies support Python 3, to use Python 3. Python 3 has and will continue to receive new features and improvements, including better performance.</p>\n\n<p>Unless you need modules that would be hard to port to Python 3 (simple ones can often be fixed just by running the builtin 2to3 tool), there isn't any reason not to use Python 3.</p>\n"}, {"tags": [], "owner": {"reputation": 68, "user_id": 5171378, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9jwbo.jpg?s=128&g=1", "display_name": "Slass33", "link": "https://stackoverflow.com/users/5171378/slass33"}, "is_accepted": false, "score": -1, "last_activity_date": 1438214186, "creation_date": 1438214186, "answer_id": 31713124, "question_id": 31713044, "link": "https://stackoverflow.com/questions/31713044/django-use-python3-or-2-7-longevity-and-performance-of-project/31713124#31713124", "title": "Django - Use Python3 or 2.7? Longevity and performance of project", "body": "<p>I would stick to python 2.7. It is more commonly used, and has lots of support.</p>\n"}, {"tags": [], "owner": {"reputation": 8090, "user_id": 2116607, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/aab0dbe50765deff6222bcaeaee8f17b?s=128&d=identicon&r=PG&f=1", "display_name": "cdonts", "link": "https://stackoverflow.com/users/2116607/cdonts"}, "is_accepted": false, "score": 0, "last_activity_date": 1438214285, "creation_date": 1438214285, "answer_id": 31713141, "question_id": 31713044, "link": "https://stackoverflow.com/questions/31713044/django-use-python3-or-2-7-longevity-and-performance-of-project/31713141#31713141", "title": "Django - Use Python3 or 2.7? Longevity and performance of project", "body": "<p>If the Python modules required are available for Python 3.x, then I would go ahead with the latest stable release. If not, don't be afraid to use Python 2.7 since performance is great and many 3.x improvements have been backported.</p>\n\n<p>However, take into account that sooner or later you'll have to migrate to Python 3.</p>\n"}], "owner": {"reputation": 21, "user_id": 4201186, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d204e76c392a5dafdbdfb0cca07657b?s=128&d=identicon&r=PG&f=1", "display_name": "user5266", "link": "https://stackoverflow.com/users/4201186/user5266"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "closed_date": 1438226838, "answer_count": 3, "score": -1, "last_activity_date": 1450191861, "creation_date": 1438213701, "last_edit_date": 1450191861, "question_id": 31713044, "link": "https://stackoverflow.com/questions/31713044/django-use-python3-or-2-7-longevity-and-performance-of-project", "closed_reason": "Opinion-based", "title": "Django - Use Python3 or 2.7? Longevity and performance of project", "body": "<p>Although this could be downvoted as an opinion based issue, I suspect there is a concrete answer to this:</p>\n\n<ul>\n<li>I want to create a future-proof django project. </li>\n<li>I want to maintain the best coding standards</li>\n<li>I do in fact require a diversity of other python modules for the apps I am creating</li>\n<li>I am shooting for best performance</li>\n</ul>\n\n<p>With that in mind, should I stick to python2.7 because of it's great support and use? Or would it be better to use python3 because it is the way of the future? </p>\n"}, {"tags": ["python", "regex"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 5171386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77fcbd61a7e201016c64faaee6a6b42e?s=128&d=identicon&r=PG&f=1", "display_name": "Raphi", "link": "https://stackoverflow.com/users/5171386/raphi"}, "edited": false, "score": 0, "creation_date": 1438216318, "post_id": 31713097, "comment_id": 51364418, "body": "Thanks! Now I&#39;m trying to generalize it to substrings of any amount of characters. I tried <code>(r&#39;(?=(a{*}))&#39;)</code> but that gets me an array of <code>[]</code>"}, {"owner": {"reputation": 13, "user_id": 5171386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77fcbd61a7e201016c64faaee6a6b42e?s=128&d=identicon&r=PG&f=1", "display_name": "Raphi", "link": "https://stackoverflow.com/users/5171386/raphi"}, "edited": false, "score": 0, "creation_date": 1438216596, "post_id": 31713097, "comment_id": 51364481, "body": "Hmmm... so I played more and figured out to use <code>a*</code> (without the curly brackets) but now it gives me: <code>[&#39;aaa&#39;, &#39;aa&#39;, &#39;a&#39;, &#39;&#39;, &#39;&#39;]</code>. I&#39;m expecting <code>[&#39;aaa&#39;, &#39;aa&#39;, &#39;aa&#39;, &#39;a&#39;, &#39;a&#39;, &#39;a&#39;, &#39;&#39;, &#39;&#39;]</code>"}], "tags": [], "owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": false, "score": 1, "last_activity_date": 1438214024, "creation_date": 1438214024, "answer_id": 31713097, "question_id": 31713043, "link": "https://stackoverflow.com/questions/31713043/matching-both-possible-solutions-in-regex/31713097#31713097", "title": "Matching both possible solutions in Regex", "body": "<p>You can achieve it with a look-ahead and a capturing group inside it:</p>\n\n<pre><code>(?=(a{2}))\n</code></pre>\n\n<p>Since a look-ahead does not move on to the next position in string, we can scan the same text many times thus enabling overlapping matches. </p>\n\n<p>See <a href=\"https://regex101.com/r/qM8rR7/1\" rel=\"nofollow\">demo</a></p>\n\n<p><a href=\"http://ideone.com/46XBk2\" rel=\"nofollow\">Python code</a>:</p>\n\n<pre><code>import re\np = re.compile(r'(?=(a{2}))')\ntest_str = \"aaab\"\nprint(re.findall(p, test_str))\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 5171386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77fcbd61a7e201016c64faaee6a6b42e?s=128&d=identicon&r=PG&f=1", "display_name": "Raphi", "link": "https://stackoverflow.com/users/5171386/raphi"}, "edited": false, "score": 0, "creation_date": 1438224455, "post_id": 31713596, "comment_id": 51366283, "body": "dang I can&#39;t upvote because I don&#39;t have enough rep. But I would if I could"}], "tags": [], "owner": {"reputation": 869, "user_id": 5146268, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IKNvl.jpg?s=128&g=1", "display_name": "Carsten Hagemann", "link": "https://stackoverflow.com/users/5146268/carsten-hagemann"}, "is_accepted": false, "score": 0, "last_activity_date": 1438220945, "last_edit_date": 1438220945, "creation_date": 1438218016, "answer_id": 31713596, "question_id": 31713043, "link": "https://stackoverflow.com/questions/31713043/matching-both-possible-solutions-in-regex/31713596#31713596", "title": "Matching both possible solutions in Regex", "body": "<p>To generalize @stribizhev solution to match one or more of character <code>a</code>: <code>(?=(a{1,}))</code></p>\n\n<p>For three or more: <code>(?=(a{3,}))</code> etc.</p>\n"}], "owner": {"reputation": 13, "user_id": 5171386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77fcbd61a7e201016c64faaee6a6b42e?s=128&d=identicon&r=PG&f=1", "display_name": "Raphi", "link": "https://stackoverflow.com/users/5171386/raphi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1438220945, "creation_date": 1438213701, "question_id": 31713043, "link": "https://stackoverflow.com/questions/31713043/matching-both-possible-solutions-in-regex", "title": "Matching both possible solutions in Regex", "body": "<p>I have a string <code>aaab</code>. I want a Python expression to match <code>aa</code>, so I expect the regular expression to return <code>aa</code> and <code>aa</code> since there are two ways to find substrings of <code>aa</code>.</p>\n\n<p>However, this is not what's happening. </p>\n\n<p>THis is what I've done</p>\n\n<pre><code>a = \"aaab\"\nb = re.match('aa', a)\n</code></pre>\n"}, {"tags": ["python", "pygame"], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 5137517, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a6fcc38f1da3b6bd2b44375bdf8c1b6?s=128&d=identicon&r=PG&f=1", "display_name": "larascit", "link": "https://stackoverflow.com/users/5137517/larascit"}, "edited": false, "score": 0, "creation_date": 1438379646, "post_id": 31740827, "comment_id": 51445161, "body": "Thanks, Eric. I am running PyCharm 1.9.2 on a Mac with Python 3.4 interpreter. If I cut out the deal part of the program and just display a hard-coded png file from the card folder, it works. Therefore I agree that it is something in the environment but to do with looping or the passing of variables which I cannot see."}], "tags": [], "owner": {"reputation": 667, "user_id": 5168325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d0179668bcefbbd0e35d4d786ef7c8c?s=128&d=identicon&r=PG&f=1", "display_name": "Eric Bulloch", "link": "https://stackoverflow.com/users/5168325/eric-bulloch"}, "is_accepted": false, "score": 0, "last_activity_date": 1438328876, "creation_date": 1438328876, "answer_id": 31740827, "question_id": 31713042, "link": "https://stackoverflow.com/questions/31713042/pygame-not-displaying-the-window/31740827#31740827", "title": "Pygame not displaying the window", "body": "<blockquote>\n  <p>BlockquoteThe card dealer code below works on a Raspberry Pi under Raspbian, but when run in Pycharm (Python 3.4) it executes everything but no window displays.</p>\n</blockquote>\n\n<p>I am guessing that the PyCharm (Python 3.4) comment means that it isn't running on a Raspberry Pi. If that is the case then it seems like you have something wrong with your environment on PyCharm (Python 3.4).</p>\n\n<p>My guess is that your Python 3.4 is not compatible with the Pygame version that was installed. For example, you downloaded and installed the <em>pygame-1.9.2a0.win32-py3.2.msi</em> when you really needed the 3.4 msi (if you are running windows).</p>\n\n<p>The other possibility is that you are running a 64-bit version of Python and you have the 32-bit version of Pygame installed.</p>\n\n<p>I hope that helps. I can't give a more clear answer without knowing what versions of Python and Pygame the other environment is running.</p>\n"}], "owner": {"reputation": 9, "user_id": 5137517, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a6fcc38f1da3b6bd2b44375bdf8c1b6?s=128&d=identicon&r=PG&f=1", "display_name": "larascit", "link": "https://stackoverflow.com/users/5137517/larascit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 700, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1438328876, "creation_date": 1438213697, "question_id": 31713042, "link": "https://stackoverflow.com/questions/31713042/pygame-not-displaying-the-window", "title": "Pygame not displaying the window", "body": "<p>I have a folder called cards which has png playing card images H, D, C and S 01-13.\nThe card dealer code below works on a Raspberry Pi under Raspbian, but when run in Pycharm (Python 3.4) it executes everything but no window displays. I have put debug print statements (now removed) in each part to check that it did everything, which it did. Any clues please?</p>\n\n<pre><code># prompts to play/quit and for hand size and no of players\n#\nimport random\nimport pygame\npygame.init()\n\ndef main():\n    myvar = input(\"Press P to Play or Q to Quit \")\n    if myvar ==\"p\" or myvar==\"P\":\n        getimage()\n    else:\n        quit()\n\ndef getimage():\n    n_players = int(input(\"How many players? \"))\n    hand_size = int(input(\"How many cards in a hand? \"))\n    if n_players * hand_size &gt; 52:\n        print(\"There are only 52 cards, cannot do.\")\n        main()\n    #card suit and rank lists\n    suits = 'S H D C'.split()\n    ranks = '01 02 03 04 05 06 07 08 09 10 11 12 13'.split()\n\n    #generate deck of pngs by list comprehension\n    pathw = \"cards/\"\n    deck  = [pathw + s + r + \".png\" for r in ranks for s in suits]\n\n    #create Surface as \"screen\"\n    cardw = 77  #actual width = 71\n    cardh = 120 #actual width = 96\n    screen=pygame.display.set_mode([cardw * hand_size, cardh * n_players])\n\n    #set background colour\n    GREEN = (0,102,0)\n    screen.fill(GREEN)\n\n    random.shuffle(deck)\n    hands = deal(deck, n_players, hand_size, cardw)\n\n    #remove quotes and brackets from string\n    c=0\n    while c &lt; n_players:\n        player1 = str(hands[c])\n        player1 = player1.strip(\"['\")\n        player1 = player1.strip(\"']\")\n        slicep1 (player1, cardw, cardh, c)\n        c +=1\n\n    pygame.display.update()\n    main()\n\ndef slicep1 (player1, cardw, cardh, c):\n    pics = player1.split(\"', '\")\n    count = 0\n    for pic in pics:\n        showcards(pic, cardw, cardh, c, count)\n        count += 1\n\ndef deal(deck, n_players, hand_size, cardw):\n    return [deck[i * hand_size:(i+1) * hand_size] for i in range(n_players)]\n\ndef showcards(pic, cardw, cardh, c, count):\n    pic1 = pygame.image.load(pic)\n    main_surface = pygame.display.get_surface()\n    main_surface.blit(pic1, (count*cardw+1, c*cardh+1))\n\nmain()\n</code></pre>\n"}, {"tags": ["python", "macos", "pdf", "matplotlib"], "comments": [{"owner": {"reputation": 2998, "user_id": 2354344, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/laaX5.jpg?s=128&g=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/2354344/rob"}, "edited": false, "score": 0, "creation_date": 1438258086, "post_id": 31712939, "comment_id": 51383006, "body": "Yea, clean your printer head."}], "answers": [{"tags": [], "owner": {"reputation": 10336, "user_id": 4177384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f603f5ee2e318d192aefb46694222c9d?s=128&d=identicon&r=PG&f=1", "display_name": "hitzg", "link": "https://stackoverflow.com/users/4177384/hitzg"}, "is_accepted": true, "score": 2, "last_activity_date": 1438257056, "creation_date": 1438257056, "answer_id": 31723020, "question_id": 31712939, "link": "https://stackoverflow.com/questions/31712939/pylab-scatter-creates-colorbar-with-weird-white-lines/31723020#31723020", "title": "pylab.scatter creates colorbar with weird white lines", "body": "<p>This is a known issue (not of matplotlib, but many pdf viewers) which is also described in the documentation of the <a href=\"http://matplotlib.org/api/figure_api.html#matplotlib.figure.Figure.colorbar\" rel=\"nofollow\">colorbar function</a> (along with a work-around):</p>\n\n<pre><code># create the colorbar\ncbar = pylab.colorbar(s)\n\n# set the color of the lines\ncbar.solids.set_edgecolor(\"face\")\n</code></pre>\n\n<p>This should fix it.</p>\n\n<p>For further reading: <a href=\"https://github.com/matplotlib/matplotlib/issues/1188\" rel=\"nofollow\">the relevant issue on github</a></p>\n"}], "owner": {"reputation": 7430, "user_id": 3474956, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/RWbuy.jpg?s=128&g=1", "display_name": "kilojoules", "link": "https://stackoverflow.com/users/3474956/kilojoules"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 186, "favorite_count": 0, "accepted_answer_id": 31723020, "answer_count": 1, "score": 1, "last_activity_date": 1438257599, "creation_date": 1438213020, "last_edit_date": 1438257599, "question_id": 31712939, "link": "https://stackoverflow.com/questions/31712939/pylab-scatter-creates-colorbar-with-weird-white-lines", "title": "pylab.scatter creates colorbar with weird white lines", "body": "<p>When I run this on OSX Yosemite the colorbar generted has weird white lines (see image below). Is there any way I can generate a colorbar without these ugly lines?</p>\n\n<pre><code>import pylab\nimport numpy\nx = numpy.random.random(50)\ny = numpy.random.random(50)\ns = pylab.scatter(x,y,c=y)\npylab.colorbar(s)\npylab.savefig('/Users/kilojoules/plot.pdf')\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/GXzVI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GXzVI.png\" alt=\"full graph\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/5Bhkc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5Bhkc.png\" alt=\"see the lines?\"></a></p>\n"}, {"tags": ["python", "numpy"], "comments": [{"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1438226360, "post_id": 31712866, "comment_id": 51366767, "body": "There isn&#39;t much mention of <code>__array_priority__</code> in the documentation or numpy code.  Mostly it is used in <code>ufunc</code> to let <code>ndarray</code> subclasses determine what kind of array is returned.  <code>ndarray</code> has priority 0, <code>matrix</code> has priority 10.  <code>dtypes</code> presumably have a negative priority so they don&#39;t trump <code>ndarray</code> in situations like this."}, {"owner": {"reputation": 2897, "user_id": 2665591, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/17ire.png?s=128&g=1", "display_name": "DanielSank", "link": "https://stackoverflow.com/users/2665591/danielsank"}, "reply_to_user": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1438231396, "post_id": 31712866, "comment_id": 51368051, "body": "@hpaulj I agree with everything you say. Unfortunately this doesn&#39;t shed light on the problem at hand."}], "answers": [{"comments": [{"owner": {"reputation": 2897, "user_id": 2665591, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/17ire.png?s=128&g=1", "display_name": "DanielSank", "link": "https://stackoverflow.com/users/2665591/danielsank"}, "edited": false, "score": 0, "creation_date": 1438214468, "post_id": 31713063, "comment_id": 51363947, "body": "Do you realize that in the line <code>Bar = Bar().bar</code> you are assigning a bound method to <code>Bar</code>? Then you&#39;re setting <code>y</code> to the float 2.0 because that bound method just returns whatever you pass into it."}, {"owner": {"reputation": 2897, "user_id": 2665591, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/17ire.png?s=128&g=1", "display_name": "DanielSank", "link": "https://stackoverflow.com/users/2665591/danielsank"}, "edited": false, "score": 0, "creation_date": 1438214557, "post_id": 31713063, "comment_id": 51363973, "body": "In my case <code>Bar()</code> returns <code>0.0</code> because it&#39;s calling the constructor of <code>float</code> with no arguments. It&#39;s exactly the same thing as if you do <code>float()</code>."}, {"owner": {"reputation": 2897, "user_id": 2665591, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/17ire.png?s=128&g=1", "display_name": "DanielSank", "link": "https://stackoverflow.com/users/2665591/danielsank"}, "edited": false, "score": 0, "creation_date": 1438216050, "post_id": 31713063, "comment_id": 51364350, "body": "Yes, it works that way, but that doesn&#39;t answer my question. The problem is that it doesn&#39;t work with <code>x &lt; y</code>."}, {"owner": {"reputation": 4969, "user_id": 4592059, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/96a9cbb1200973090eb787c8ccbe4829?s=128&d=identicon&r=PG&f=1", "display_name": "Geeocode", "link": "https://stackoverflow.com/users/4592059/geeocode"}, "reply_to_user": {"reputation": 2897, "user_id": 2665591, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/17ire.png?s=128&g=1", "display_name": "DanielSank", "link": "https://stackoverflow.com/users/2665591/danielsank"}, "edited": false, "score": 0, "creation_date": 1438216102, "post_id": 31713063, "comment_id": 51364361, "body": "This is a known bug,  when you click on the link in my answer. <b>NumPy ignores <i>_array_priority_</i> when the right-hand-side operand is a subclass of ndarray</b>"}, {"owner": {"reputation": 2897, "user_id": 2665591, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/17ire.png?s=128&g=1", "display_name": "DanielSank", "link": "https://stackoverflow.com/users/2665591/danielsank"}, "edited": false, "score": 0, "creation_date": 1438216194, "post_id": 31713063, "comment_id": 51364390, "body": "I missed the link since most of the answer is a copy-paste from the question. It would be more clear to just indicate that the <code>y &gt; x</code> case works and make the link more obvious :)"}, {"owner": {"reputation": 4969, "user_id": 4592059, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/96a9cbb1200973090eb787c8ccbe4829?s=128&d=identicon&r=PG&f=1", "display_name": "Geeocode", "link": "https://stackoverflow.com/users/4592059/geeocode"}, "reply_to_user": {"reputation": 2897, "user_id": 2665591, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/17ire.png?s=128&g=1", "display_name": "DanielSank", "link": "https://stackoverflow.com/users/2665591/danielsank"}, "edited": false, "score": 0, "creation_date": 1438216269, "post_id": 31713063, "comment_id": 51364408, "body": "I haven&#39;t yet time, but I do. :)"}, {"owner": {"reputation": 2897, "user_id": 2665591, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/17ire.png?s=128&g=1", "display_name": "DanielSank", "link": "https://stackoverflow.com/users/2665591/danielsank"}, "edited": false, "score": 0, "creation_date": 1438216465, "post_id": 31713063, "comment_id": 51364447, "body": "I&#39;m also confused because the issue in your link refers to the case where the right hand operand is an <code>ndarray</code> subclass. In my example the right hand operand is not an <code>ndarray</code> subclass; it&#39;s a <code>float</code> subclass."}, {"owner": {"reputation": 4969, "user_id": 4592059, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/96a9cbb1200973090eb787c8ccbe4829?s=128&d=identicon&r=PG&f=1", "display_name": "Geeocode", "link": "https://stackoverflow.com/users/4592059/geeocode"}, "reply_to_user": {"reputation": 2897, "user_id": 2665591, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/17ire.png?s=128&g=1", "display_name": "DanielSank", "link": "https://stackoverflow.com/users/2665591/danielsank"}, "edited": false, "score": 0, "creation_date": 1438216542, "post_id": 31713063, "comment_id": 51364463, "body": "Yes, yes it seems it is a more general bug, then they thought."}, {"owner": {"reputation": 4969, "user_id": 4592059, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/96a9cbb1200973090eb787c8ccbe4829?s=128&d=identicon&r=PG&f=1", "display_name": "Geeocode", "link": "https://stackoverflow.com/users/4592059/geeocode"}, "reply_to_user": {"reputation": 2897, "user_id": 2665591, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/17ire.png?s=128&g=1", "display_name": "DanielSank", "link": "https://stackoverflow.com/users/2665591/danielsank"}, "edited": false, "score": 0, "creation_date": 1438216863, "post_id": 31713063, "comment_id": 51364551, "body": "@DanielSank Anyway I would be happy, if you would be so kind and for my research - and for my upvote, you would at least pull back your downvote even if you cannot accept my answer. :)"}, {"owner": {"reputation": 2897, "user_id": 2665591, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/17ire.png?s=128&g=1", "display_name": "DanielSank", "link": "https://stackoverflow.com/users/2665591/danielsank"}, "edited": false, "score": 0, "creation_date": 1438217319, "post_id": 31713063, "comment_id": 51364666, "body": "I submitted an edit to the answer. Let&#39;s see if it gets accepted."}, {"owner": {"reputation": 4969, "user_id": 4592059, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/96a9cbb1200973090eb787c8ccbe4829?s=128&d=identicon&r=PG&f=1", "display_name": "Geeocode", "link": "https://stackoverflow.com/users/4592059/geeocode"}, "reply_to_user": {"reputation": 2897, "user_id": 2665591, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/17ire.png?s=128&g=1", "display_name": "DanielSank", "link": "https://stackoverflow.com/users/2665591/danielsank"}, "edited": false, "score": 0, "creation_date": 1438217851, "post_id": 31713063, "comment_id": 51364769, "body": "@DanielSank Accepted, though the example output made the answer more clear, I think,  for others ."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1438228913, "post_id": 31713063, "comment_id": 51367428, "body": "What&#39;s the point to setting the <code>__array_priority__</code> of a <code>float</code> subclass?  Do the base <code>dtypes</code> use anything other than -1000000?  And why set it higher than the priority for <code>ndarry</code>?"}, {"owner": {"reputation": 2897, "user_id": 2665591, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/17ire.png?s=128&g=1", "display_name": "DanielSank", "link": "https://stackoverflow.com/users/2665591/danielsank"}, "reply_to_user": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1438231462, "post_id": 31713063, "comment_id": 51368063, "body": "@hpaulj That&#39;s a good question and I don&#39;t know the answer. Unfortunately I didn&#39;t write the code in question. I already contacted the author and will find out soon."}], "tags": [], "owner": {"reputation": 4969, "user_id": 4592059, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/96a9cbb1200973090eb787c8ccbe4829?s=128&d=identicon&r=PG&f=1", "display_name": "Geeocode", "link": "https://stackoverflow.com/users/4592059/geeocode"}, "is_accepted": false, "score": 1, "last_activity_date": 1438217505, "last_edit_date": 1438217505, "creation_date": 1438213812, "answer_id": 31713063, "question_id": 31712866, "link": "https://stackoverflow.com/questions/31712866/why-does-setting-a-custom-classs-array-priority-above-zero-make-comparison/31713063#31713063", "title": "Why does setting a custom class&#39;s __array_priority__ above zero make comparison with numpy.float64 work incorrectly?", "body": "<p>Reversing the comparison from <code>x &lt; y</code> to <code>y &gt; x</code> makes it work.</p>\n\n<p>This may be related to a <a href=\"https://github.com/numpy/numpy/issues/4766\" rel=\"nofollow\">known issue</a>.</p>\n"}], "owner": {"reputation": 2897, "user_id": 2665591, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/17ire.png?s=128&g=1", "display_name": "DanielSank", "link": "https://stackoverflow.com/users/2665591/danielsank"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 328, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1438218953, "creation_date": 1438212627, "last_edit_date": 1438218953, "question_id": 31712866, "link": "https://stackoverflow.com/questions/31712866/why-does-setting-a-custom-classs-array-priority-above-zero-make-comparison", "title": "Why does setting a custom class&#39;s __array_priority__ above zero make comparison with numpy.float64 work incorrectly?", "body": "<p>Consider a silly subclass of <code>float</code>:</p>\n\n<pre><code>class Bar(float):\n    __array_priority__ = 2\n</code></pre>\n\n<p>Now we try to compare an instance of <code>Bar</code> with a numpy float64:</p>\n\n<pre><code>import numpy as np\nx = np.float64(1)\ny = Bar(2.0)\nx &lt; y\nFalse\n</code></pre>\n\n<p>Puzzled, we try the following</p>\n\n<pre><code>import numpy as np\n\ndef make_class(x):\n    \"\"\"Get a float subclass with adjustable __array_priority\"\"\"\n    class Bar(float):\n        __array_priority__ = x\n\n    return Bar\n\n\ndef test(priorities):\n    \"\"\"Check float comparison for various __array_priority__ values\"\"\"\n    results = []\n    for priority in priorities:\n        x = np.float64(1)\n        Bar = make_class(priority)\n        y = Bar(2.0)\n        results.append(x &lt; y)\n    for p, v in zip(priorities, results):\n        print(\"{} {}\".format(p, v))\n</code></pre>\n\n<p>Running <code>test</code> over a few choice values we find (note that the <code>__array_priority__</code> of <code>np.float64</code> is <code>-1000000.0</code>)</p>\n\n<pre><code>__array_priority__   |     x &lt; y\n--------------------------------------------------\n-10000000            |     True\n-1000001.0           |     True\n-1000000.0           |     True (same __array_priority__ as float64)\n-999999.0            |     True\n-1                   |     True\n0                    |     True\n0.3                  |     False\n1                    |     False\n2                    |     False\n</code></pre>\n\n<p>As you can see, if <code>__array_priority__</code> is greater than <code>0</code>, the comparison fails.\nWhether our custom <code>__array_priority__</code> is greater or less than <code>np.float64</code>'s <code>__array_priority__</code> doesn't matter.</p>\n\n<p>Some of my colleagues tried this on their machines and we found that this problem only happens with python <code>2.7.6</code> (64 bit) and numpy <code>1.9.2</code>.\nUsing <em>either</em> that python version <em>or</em> that numpy version alone does not reproduce the bug.\nIt only happens when both of those versions are used together.</p>\n\n<p>Why does setting the custom <code>__array_priority__</code> above or below <code>0</code> change the behavior of the comparison, making it work unexpectedly in the <code>&gt;0</code> cases on this combination of python and numpy versions?</p>\n\n<p>Note that replacing the <code>x &lt; y</code> comparison with <code>y &gt; x</code> results in expected behavior as @Gy\u00f6rgy Solymosi mentioned below. </p>\n"}, {"tags": ["python", "algorithm", "3d", "surface"], "comments": [{"owner": {"reputation": 6223, "user_id": 2726892, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/DE8Dn.png?s=128&g=1", "display_name": "MooseBoys", "link": "https://stackoverflow.com/users/2726892/mooseboys"}, "edited": false, "score": 1, "creation_date": 1438228774, "post_id": 31712855, "comment_id": 51367395, "body": "This sounds an awful lot like the <a href=\"http://www.gamasutra.com/view/feature/3217/octree_partitioning_techniques.php\" rel=\"nofollow noreferrer\">bounding boxes and octrees</a> often used in 3D games for various purposes."}, {"owner": {"reputation": 1455, "user_id": 5050863, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10205087533363171/picture?type=large", "display_name": "sschilli", "link": "https://stackoverflow.com/users/5050863/sschilli"}, "reply_to_user": {"reputation": 6223, "user_id": 2726892, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/DE8Dn.png?s=128&g=1", "display_name": "MooseBoys", "link": "https://stackoverflow.com/users/2726892/mooseboys"}, "edited": false, "score": 0, "creation_date": 1438271395, "post_id": 31712855, "comment_id": 51392688, "body": "@MooseBoys Unfortunately that&#39;s not what I am going for. I am trying to group surfaces based on the smallest 3D volumes they enclose as a whole, while the link you shared seems to be about finding the smallest volume that contains each surface. This does not really apply to what I am trying to do."}, {"owner": {"reputation": 667, "user_id": 955885, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0bd04cb5d81cd38d0d0157565a2f8775?s=128&d=identicon&r=PG&f=1", "display_name": "Nicko Po", "link": "https://stackoverflow.com/users/955885/nicko-po"}, "edited": false, "score": 0, "creation_date": 1438714898, "post_id": 31712855, "comment_id": 51559790, "body": "I agree with MooseBoys, per your description, either Octree, kd-tree, bounding-box tree, or BSP is exactly what you are building. If not so, you would need to reword your question. Define zone. Define what you mean by encloses: i.e. a single triangle, encloses what in your scheme? Also, provide your end goal, i.e. given you have what you want, are you going to perform special queries, calculate volume, etc?"}, {"owner": {"reputation": 1455, "user_id": 5050863, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10205087533363171/picture?type=large", "display_name": "sschilli", "link": "https://stackoverflow.com/users/5050863/sschilli"}, "reply_to_user": {"reputation": 667, "user_id": 955885, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0bd04cb5d81cd38d0d0157565a2f8775?s=128&d=identicon&r=PG&f=1", "display_name": "Nicko Po", "link": "https://stackoverflow.com/users/955885/nicko-po"}, "edited": false, "score": 0, "creation_date": 1438717276, "post_id": 31712855, "comment_id": 51560994, "body": "@NickoPo I have added some more details to my original post. Hopefully this helps clarify what I am looking for."}, {"owner": {"reputation": 2746, "user_id": 3595907, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/oQQOc.png?s=128&g=1", "display_name": "DrBwts", "link": "https://stackoverflow.com/users/3595907/drbwts"}, "edited": false, "score": 0, "creation_date": 1439224577, "post_id": 31712855, "comment_id": 51762046, "body": "Are you assuming that each set of surfaces exactly encloses a volume? By that I mean that surfaces dont extend beyond the polyhedra that they enclose (no hanging surfaces). How are you representing the surfaces? I think you maybe able to adapt <a href=\"http://docs.scipy.org/doc/scipy-dev/reference/generated/scipy.spatial.ConvexHull.html\" rel=\"nofollow noreferrer\">QHull</a> to do this but I would need more information before attempting a complete answer."}, {"owner": {"reputation": 1455, "user_id": 5050863, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10205087533363171/picture?type=large", "display_name": "sschilli", "link": "https://stackoverflow.com/users/5050863/sschilli"}, "reply_to_user": {"reputation": 2746, "user_id": 3595907, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/oQQOc.png?s=128&g=1", "display_name": "DrBwts", "link": "https://stackoverflow.com/users/3595907/drbwts"}, "edited": false, "score": 0, "creation_date": 1439226916, "post_id": 31712855, "comment_id": 51763282, "body": "@DrBwts No, I am not assuming that each set of surfaces exactly encloses a volume. In fact, it is likely that in the models I am testing there will be hanging surfaces (ones that do not connect to another surface on all sides). The surfaces are represented as an ordered list of vertices (so basically a polygon in 3D space)."}, {"owner": {"reputation": 2746, "user_id": 3595907, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/oQQOc.png?s=128&g=1", "display_name": "DrBwts", "link": "https://stackoverflow.com/users/3595907/drbwts"}, "edited": false, "score": 0, "creation_date": 1439228722, "post_id": 31712855, "comment_id": 51764189, "body": "Just so I am clear, are the vertices in these lists also the vertices of the of the enclosed volume (the minimum polyhedra enclosed by these surfaces)? Are the surfaces flat? How many vertices define a surface or are the surfaces arbitrary polygons? A simple example piece of code would be very helpful at this point."}, {"owner": {"reputation": 1455, "user_id": 5050863, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10205087533363171/picture?type=large", "display_name": "sschilli", "link": "https://stackoverflow.com/users/5050863/sschilli"}, "reply_to_user": {"reputation": 2746, "user_id": 3595907, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/oQQOc.png?s=128&g=1", "display_name": "DrBwts", "link": "https://stackoverflow.com/users/3595907/drbwts"}, "edited": false, "score": 0, "creation_date": 1439231807, "post_id": 31712855, "comment_id": 51765777, "body": "@DrBwts I have added in a paragraph (the second one) that has images to help explain what I want. I think these will be useful. As for your questions: 1. The enclosed volume is defined by the surfaces so the vertices are identical. 2. Yes, all surfaces are flat. 3. All surfaces are arbitrary polygons."}, {"owner": {"reputation": 667, "user_id": 955885, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0bd04cb5d81cd38d0d0157565a2f8775?s=128&d=identicon&r=PG&f=1", "display_name": "Nicko Po", "link": "https://stackoverflow.com/users/955885/nicko-po"}, "edited": false, "score": 0, "creation_date": 1439234461, "post_id": 31712855, "comment_id": 51767181, "body": "Not to get picky but the first sentence in the linked wiki ends with &quot;the plane and polytopes in 3D&quot;. Which is the part you need ;)"}, {"owner": {"reputation": 2746, "user_id": 3595907, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/oQQOc.png?s=128&g=1", "display_name": "DrBwts", "link": "https://stackoverflow.com/users/3595907/drbwts"}, "reply_to_user": {"reputation": 667, "user_id": 955885, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0bd04cb5d81cd38d0d0157565a2f8775?s=128&d=identicon&r=PG&f=1", "display_name": "Nicko Po", "link": "https://stackoverflow.com/users/955885/nicko-po"}, "edited": false, "score": 0, "creation_date": 1439235079, "post_id": 31712855, "comment_id": 51767506, "body": "@NickoPo Can DCEL objects deal with non manifold meshes?"}], "answers": [{"comments": [{"owner": {"reputation": 1455, "user_id": 5050863, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10205087533363171/picture?type=large", "display_name": "sschilli", "link": "https://stackoverflow.com/users/5050863/sschilli"}, "edited": false, "score": 0, "creation_date": 1439221006, "post_id": 31818277, "comment_id": 51759833, "body": "The link you shared seems to apply to 2D objects, but I&#39;d imagine it wouldn&#39;t be too difficult to apply this to a 3D solid. Still, I do not see how you could use this information to determine zones like I am trying to do. I not only want to see if there are holes, I want <i>each surface to be mapped to the smallest region it encloses</i>. Any ideas on how to do that?"}, {"owner": {"reputation": 2746, "user_id": 3595907, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/oQQOc.png?s=128&g=1", "display_name": "DrBwts", "link": "https://stackoverflow.com/users/3595907/drbwts"}, "edited": false, "score": 0, "creation_date": 1439296472, "post_id": 31818277, "comment_id": 51793761, "body": "I think Nicko Po has nailed it."}, {"owner": {"reputation": 1455, "user_id": 5050863, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10205087533363171/picture?type=large", "display_name": "sschilli", "link": "https://stackoverflow.com/users/5050863/sschilli"}, "edited": false, "score": 0, "creation_date": 1439306159, "post_id": 31818277, "comment_id": 51801209, "body": "I awarded the bounty because I believe you are onto something and it was about to expire. However I am still a bit confused. When creating a graph, which way do you connect the points? If you have ABCD, do you draw arrows from B-&gt;A, C-&gt;B, D-&gt;C, A-&gt;D? I tried tracing through this myself and didn&#39;t get the same edges you were missing, and wasn&#39;t quite sure how you ensure that the four top edges are each only linked to one other vertex on the top (with the missing side of the prism). I&#39;d appreciate it if you could help me with this."}], "tags": [], "owner": {"reputation": 667, "user_id": 955885, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0bd04cb5d81cd38d0d0157565a2f8775?s=128&d=identicon&r=PG&f=1", "display_name": "Nicko Po", "link": "https://stackoverflow.com/users/955885/nicko-po"}, "is_accepted": false, "score": 2, "last_activity_date": 1439234400, "last_edit_date": 1439234400, "creation_date": 1438718572, "answer_id": 31818277, "question_id": 31712855, "link": "https://stackoverflow.com/questions/31712855/assigning-surfaces-to-zones-based-on-the-3d-regions-they-enclose/31818277#31818277", "title": "Assigning surfaces to zones based on the 3D regions they enclose", "body": "<p>What you are interested in, then, would be discovering closed surface (volume) mesh topology from a set of input polygons; in other words - polytopes. This is common to pretty much every 3d modeling package. I would guess that Blender has code that does that. There are different ways of doing this, commonly however, some version of half-edge graph is used. See wiki link here: <a href=\"https://en.wikipedia.org/wiki/Doubly_connected_edge_list\" rel=\"nofollow noreferrer\">Doubly Linked half edge graph</a>. The idea is to walk your input polies, and build these graphs. Once done, you can easily query each graph to see if there are holes (edges missing, etc). </p>\n\n<p><a href=\"https://i.stack.imgur.com/Y82pf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Y82pf.png\" alt=\"enter image description here\"></a></p>\n\n<p>I attached a picture explaining how to use a half-edge structure to get what you want: Say you are given a soup of five rectangles (they make up a cube with out a top. U process your first rectangle say ABCD, this creates your first graph, say G1. Now you process second polygon, say FEHG, none of these vertices you have seen yet, so you create second graph, G2. Now say you process polygon CDGH. You have seen these vertices before, so instead of creating a new graph, you merge(connect) existing graphs that share these nodes. Proceed until you process all polygons. You get graph in picture.</p>\n\n<p>Now, to query the graph to get your information. Once you walk the graph, you will see that there are exactly four vertices (nodes) that are missing edges. Those verts correspond to the missing top of the box (the edges are red in the illustration). Hence you know that this graph is not a closed manifold. If you had another box, that did not share nodes with this one, you would have another graph. So each graph, once you done processing your polygons, is a \"zone\" for you.</p>\n\n<p>Note, if you have two say intersecting shapes, you can track those too using these graphs, but its much more complicated. Basically when processing a new polygon, you would not only have to see if any of its verts belong to already processed graphs, but also see if this polygon intersects any of the previously processed polygons, if so, split this polygon and add all this to the intersected graph.</p>\n"}], "owner": {"reputation": 1455, "user_id": 5050863, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10205087533363171/picture?type=large", "display_name": "sschilli", "link": "https://stackoverflow.com/users/5050863/sschilli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 318, "favorite_count": 1, "answer_count": 1, "score": 4, "last_activity_date": 1439234400, "creation_date": 1438212545, "last_edit_date": 1439231648, "question_id": 31712855, "link": "https://stackoverflow.com/questions/31712855/assigning-surfaces-to-zones-based-on-the-3d-regions-they-enclose", "title": "Assigning surfaces to zones based on the 3D regions they enclose", "body": "<p>Given a set of surfaces in three-dimensional space, I am attempting to assign each surface to a zone referring to the smallest 3D region the set encloses, or no zone if this is not applicable. I also want to determine if a surface is an interface between two zones. So, for example, if we had 11 surfaces representing two cubes stacked on top of each other, the surfaces in the top cube would be in the same zone and the surfaces in the bottom would be in a different zone (with the interface surface being in both zones).</p>\n\n<p>As an example, I want to take in a set of surfaces such as <a href=\"http://imgur.com/I6OsCax\" rel=\"nofollow\">this</a> and turn it in to <a href=\"http://imgur.com/2ubdxUq\" rel=\"nofollow\">this</a>. Each color here represents a zone, with gray being no zone associated (as in the flap at the bottom).</p>\n\n<p>I have done some searching around trying to find if someone has already come up with an algorithm to do this, but I have not found anything (most seem to identify regions rather than link surfaces to the region they enclose). As such I am trying to come up with my own algorithm and am wondering if there are any other alternatives or if my method would work.</p>\n\n<p>I am assuming all surfaces are connected.</p>\n\n<p>My idea is the following:</p>\n\n<ol>\n<li>Select a random surface whose sides each touch exactly one other surface, and add this to zone 1.</li>\n<li>Add each connected surface to zone 1 provided each of its sides touch exactly one other surface.</li>\n<li>For those connected surfaces that touch more than one surface on at least one of its sides, add it to the \"maybe\" list.</li>\n<li>For each new surface in zone 1, repeat steps 2-3. </li>\n<li>Once a surface has been added to the \"maybe\" list twice, add it to zone 1 and remove from the \"maybe\" list. Mark this surface as a zone interface.</li>\n<li>Add the zone interface to zone 2.</li>\n<li>Select one random surface from the \"maybe\" list and assign it to zone 2 and clear the \"maybe\" list.</li>\n<li>Repeat steps 2-7 (updating the zone number of course) until there are no surfaces that are unassigned.</li>\n</ol>\n\n<p>This seems to work for simple scenarios (e.g., two cubes stacked on top of one another), but I am not sure if there are any tricky conditions I need to watch out for, or if it falls apart once there are more than two zones that share a side.</p>\n\n<p>Any improvement on my rough algorithm/alternate ideas for implementation would be appreciated. Thanks!</p>\n\n<p>EDIT: Here are some more details in response to some comments.\nA zone by my definition is simply a group of surfaces that completely bound a 3D region with no gaps. So if I had two cubes, A and B, that do not touch, I would have two zones: one consisting of all the surfaces of cube A and the other of all the surfaces for cube B. If I had a cube that was missing one side, there would be no zone associated with those surfaces.</p>\n\n<p>My end goal is to make an automated process for grouping surfaces in a modeling tool I am creating. The specifics are classified, but essentially I am dealing with models where certain properties are common only between surfaces in the same \"zone\" as described above. I want to make an automated process that creates these zones so that the user can apply these properties to all surfaces in the zone at once instead of doing it manually.</p>\n\n<p>Essentially the problem boils down to finding the smallest 3D regions that are completely enclosed by an arbitrary set of surfaces, and keeping track of which surfaces belong to which regions. I hope this makes my question more clear.</p>\n"}, {"tags": ["python", "python-2.7"], "answers": [{"comments": [{"owner": {"reputation": 9194, "user_id": 2038257, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/d7c4839a46ca7fc6d9a950aa362166ba?s=128&d=identicon&r=PG", "display_name": "Marco Dinatsoli", "link": "https://stackoverflow.com/users/2038257/marco-dinatsoli"}, "edited": false, "score": 0, "creation_date": 1438214374, "post_id": 31713116, "comment_id": 51363925, "body": "i can&#39;t use a third party libraries"}, {"owner": {"reputation": 2829, "user_id": 2364901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/270b4fb6af77939368f91cd310490fa1?s=128&d=identicon&r=PG", "display_name": "csiu", "link": "https://stackoverflow.com/users/2364901/csiu"}, "reply_to_user": {"reputation": 9194, "user_id": 2038257, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/d7c4839a46ca7fc6d9a950aa362166ba?s=128&d=identicon&r=PG", "display_name": "Marco Dinatsoli", "link": "https://stackoverflow.com/users/2038257/marco-dinatsoli"}, "edited": false, "score": 0, "creation_date": 1438215589, "post_id": 31713116, "comment_id": 51364239, "body": "@MarcoDinatsoli bummer ... <code>pandas</code> is excellent when working with/manipulating data frame like data :("}, {"owner": {"reputation": 9194, "user_id": 2038257, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/d7c4839a46ca7fc6d9a950aa362166ba?s=128&d=identicon&r=PG", "display_name": "Marco Dinatsoli", "link": "https://stackoverflow.com/users/2038257/marco-dinatsoli"}, "edited": false, "score": 0, "creation_date": 1438216597, "post_id": 31713116, "comment_id": 51364483, "body": "thank you , the library is great but the policy of the company prevents me from using it. thanks for your unerstanding and appreciate your help +1 for u"}], "tags": [], "owner": {"reputation": 2829, "user_id": 2364901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/270b4fb6af77939368f91cd310490fa1?s=128&d=identicon&r=PG", "display_name": "csiu", "link": "https://stackoverflow.com/users/2364901/csiu"}, "is_accepted": false, "score": 1, "last_activity_date": 1438214097, "creation_date": 1438214097, "answer_id": 31713116, "question_id": 31712833, "link": "https://stackoverflow.com/questions/31712833/how-to-read-text-file-with-columns/31713116#31713116", "title": "How to read text file with columns", "body": "<p>Try <a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.read_csv.html\" rel=\"nofollow\"><code>pandas</code></a></p>\n\n<pre><code>&gt;&gt;&gt; import pandas as pd\n&gt;&gt;&gt; myFile = 'test.txt'\n&gt;&gt;&gt; df = pd.read_csv(myFile, sep=\",\", header=0)\n&gt;&gt;&gt; df\n    Model  A  B  C\n0  Model1  a  b  c\n1  Model2  a  b  c\n2  Model3  a  b  c\n</code></pre>\n\n<p>Getting the \"Model\" column</p>\n\n<pre><code>&gt;&gt;&gt; df['Model']\n0    Model1\n1    Model2\n2    Model3\nName: Model, dtype: object\n</code></pre>\n\n<p>Reformatting to JSON</p>\n\n<pre><code>&gt;&gt;&gt; df['Model'].to_json()\n'{\"0\":\"Model1\",\"1\":\"Model2\",\"2\":\"Model3\"}'\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9194, "user_id": 2038257, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/d7c4839a46ca7fc6d9a950aa362166ba?s=128&d=identicon&r=PG", "display_name": "Marco Dinatsoli", "link": "https://stackoverflow.com/users/2038257/marco-dinatsoli"}, "edited": false, "score": 0, "creation_date": 1438216562, "post_id": 31713261, "comment_id": 51364474, "body": "i update my question depending on your answer , could you check please"}, {"owner": {"reputation": 9194, "user_id": 2038257, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/d7c4839a46ca7fc6d9a950aa362166ba?s=128&d=identicon&r=PG", "display_name": "Marco Dinatsoli", "link": "https://stackoverflow.com/users/2038257/marco-dinatsoli"}, "edited": false, "score": 0, "creation_date": 1438216649, "post_id": 31713261, "comment_id": 51364499, "body": "note the delimeter is this <code>reader = csv.reader(csvFile, delimiter= &#39;;&#39;)</code>"}, {"owner": {"reputation": 643, "user_id": 501294, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0581be4e17d12b4a81978d92f33e4524?s=128&d=identicon&r=PG", "display_name": "fishsticks", "link": "https://stackoverflow.com/users/501294/fishsticks"}, "edited": false, "score": 0, "creation_date": 1438219923, "post_id": 31713261, "comment_id": 51365295, "body": "The delimiter in a CSV file is the character that separates fields in a row. (Technically, if it&#39;s not a comma, it&#39;s not actually CSV, but that&#39;s not the point.) The delimiter in your input file can&#39;t be a <code>;</code>, because that character doesn&#39;t exist in your input at all. It looks like your data is tab delimited (which is <code>\\t</code>, the delimiter matrineau used), although the tabs got converted to spaces by stackoverflow."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1438221477, "post_id": 31713261, "comment_id": 51365622, "body": "Marco: I used <code>delimiter= &#39;\\t&#39;</code> because that was the separator you actually had in the sample <i>data</i> posted in your question (which also doesn&#39;t have a bunch of empty values in each row). Change it to <code>delimiter= &#39;;&#39;</code> and see if that helps. If not, I can easily modify my answer to remove all the empty values encountered in each row."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1438268269, "post_id": 31713261, "comment_id": 51390454, "body": "Marco: If my answer solved your problem please consider <a href=\"http://stackoverflow.com/help/someone-answers\">accepting it</a>."}], "tags": [], "owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "is_accepted": false, "score": 4, "last_activity_date": 1438221836, "last_edit_date": 1438221836, "creation_date": 1438215253, "answer_id": 31713261, "question_id": 31712833, "link": "https://stackoverflow.com/questions/31712833/how-to-read-text-file-with-columns/31713261#31713261", "title": "How to read text file with columns", "body": "<p>You don't need a class to do this, just a function:</p>\n\n<pre><code>import csv\nimport json\n\ndef CsvToJson(csvFilePath):\n    with open(csvFilePath, 'rU', newline='') as csvFile:\n        final = {}\n        reader = csv.reader(csvFile, delimiter='\\t') # change delimiter if needed\n        next(reader)  # skip header\n        for row in reader:  # now removes \"empty\" row values\n            final[row[0]] = [value for value in row[1:] if value]\n\n    return json.dumps(final, indent=4)\n\nk = CsvToJson('carsModelsMakes.csv')\nprint(k)\n</code></pre>\n\n<p>Output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>{\n    \"Acura\": [\n        \"CSX/EL\",\n        \"MDX\",\n        \"NSX\",\n        \"RDX\",\n        \"RSX/Integra\",\n        \"Other\"\n    ],\n    \"Aston Martin\": [\n        \"DB7/DB9\",\n        \"DBS\",\n        \"One-77\",\n        \"Rapide\",\n        \"Vanquish\",\n        \"Vantage\",\n        \"Virage\",\n        \"Zagato\",\n        \"Other\"\n    ],\n    \"Audi\": [\n        \"A1\",\n        \"A3\",\n        \"A4\",\n        \"A5\",\n        \"A6\",\n        \"A7\",\n        \"A8\",\n        \"Q3\",\n        \"Q5\",\n        \"Q7\",\n        \"R8\",\n        \"S3/RS3\",\n        \"S4/RS4\",\n        \"S5/RS5\",\n        \"S6/RS6\",\n        \"S7/RS7\",\n        \"S8\"\n    ],\n    \"Alfa Romeo\": [\n        \"145/146/147\",\n        \"156/159\",\n        \"166\",\n        \"4C\",\n        \"Brera\",\n        \"GIULIETTA\",\n        \"GTV/GT\",\n        \"Mito\",\n        \"Spider\",\n        \"Other\"\n    ]\n}\n</code></pre>\n"}], "owner": {"reputation": 9194, "user_id": 2038257, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/d7c4839a46ca7fc6d9a950aa362166ba?s=128&d=identicon&r=PG", "display_name": "Marco Dinatsoli", "link": "https://stackoverflow.com/users/2038257/marco-dinatsoli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1438221836, "creation_date": 1438212426, "last_edit_date": 1438216541, "question_id": 31712833, "link": "https://stackoverflow.com/questions/31712833/how-to-read-text-file-with-columns", "title": "How to read text file with columns", "body": "<p>I have a csv file like this:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Model   1   2   3   4   5   6   7   8   9   10  11  12  13  14  15  16  17\nAcura   CSX/EL  MDX NSX RDX RSX/Integra Other\nAlfa Romeo  145/146/147 156/159 166 4C  Brera   GIULIETTA   GTV/GT  Mito    Spider  Other\nAston Martin    DB7/DB9 DBS One-77  Rapide  Vanquish    Vantage Virage  Zagato  Other\nAudi    A1  A3  A4  A5  A6  A7  A8  Q3  Q5  Q7  R8  S3/RS3  S4/RS4  S5/RS5  S6/RS6  S7/RS7  S8\n</code></pre>\n\n<p>Where the first column is the model of a car, and the other columns are makes of that car.</p>\n\n<p>The number of makes is dynamic. I want to save the makes for each car and tried to do it like this:</p>\n\n<pre><code># -*- coding: utf-8 -*-\nimport csv\nclass CsvToJson:\n    def __init__(self, csvFilePath):\n        with open(csvFilePath, 'rU') as csvFile:\n            spamreader = csv.reader(csvFile, delimiter= ';',\n                                    quotechar = '|', dialect='excel')\n            final = dict()\n            for row in spamreader:\n                makes = list()\n                print ', '.join(row)\n\nk = CsvToJson(csvFilePath = 'carsModelsMakes.csv')\n</code></pre>\n\n<p>But I am stuck about how to get the column.</p>\n\n<p>after the great answer, i got this results</p>\n\n<p><a href=\"https://i.stack.imgur.com/HOeRT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HOeRT.png\" alt=\"enter image description here\"></a></p>\n\n<p>how can i remove these empty values please</p>\n"}, {"tags": ["python"], "answers": [{"tags": [], "owner": {"reputation": 3725, "user_id": 2209008, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/MceJL.jpg?s=128&g=1", "display_name": "Colin Basnett", "link": "https://stackoverflow.com/users/2209008/colin-basnett"}, "is_accepted": false, "score": -1, "last_activity_date": 1438212411, "creation_date": 1438212411, "answer_id": 31712828, "question_id": 31712789, "link": "https://stackoverflow.com/questions/31712789/python-read-text-file-and-keep-it-open/31712828#31712828", "title": "Python read text file and keep it open", "body": "<p>The problem is that you've effectively read the entire file once already, so when you go to <code>enumerate</code> the lines, there's nothing left to fetch.</p>\n\n<p>You should read the lines all at once, and evaluate <em>that</em> instead.</p>\n\n<pre><code>f = open(MyFile, 'r')\nlines = list(f)\n\n# operate on lines instead of f!\n# ...\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1438215600, "post_id": 31712875, "comment_id": 51364242, "body": "No need to reassign <code>lastline</code> every time through the loop."}], "tags": [], "owner": {"reputation": 1290, "user_id": 5171225, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-JLyW6FlkhFY/AAAAAAAAAAI/AAAAAAAAAFE/IMzgcmhwOYQ/photo.jpg?sz=128", "display_name": "Leonid Usov", "link": "https://stackoverflow.com/users/5171225/leonid-usov"}, "is_accepted": false, "score": 3, "last_activity_date": 1438216526, "last_edit_date": 1438216526, "creation_date": 1438212669, "answer_id": 31712875, "question_id": 31712789, "link": "https://stackoverflow.com/questions/31712789/python-read-text-file-and-keep-it-open/31712875#31712875", "title": "Python read text file and keep it open", "body": "<p>If you want to work with the same file you need to rewind the file pointer. Just do <code>f.seek(0)</code> before your second enumeration</p>\n\n<p>However, getting into what your code is actually doing, it can be optimized to do all in the same loop</p>\n\n<pre><code>with open(MyFile,'r') as f:\n    lastline = 0\n    ResultLine = None\n\n    for num, line in enumerate(f): \n        if not ResultLine and 'Results' in line:\n            ResultLine=num\n\n    lastline = num # + 1 if you want a count; this is what you actually get \n                   # in your sample, the count, not the last line index\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2829, "user_id": 2364901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/270b4fb6af77939368f91cd310490fa1?s=128&d=identicon&r=PG", "display_name": "csiu", "link": "https://stackoverflow.com/users/2364901/csiu"}, "is_accepted": false, "score": 2, "last_activity_date": 1438212783, "creation_date": 1438212783, "answer_id": 31712895, "question_id": 31712789, "link": "https://stackoverflow.com/questions/31712789/python-read-text-file-and-keep-it-open/31712895#31712895", "title": "Python read text file and keep it open", "body": "<pre><code>with open(MyFile,'r') as f:\n    lastline = sum(1 for line in f)\n\n    ## The pointer f has reached the end of the file here\n    ## Need to reset pointer back to beginning\n    f.seek(0)\n\n    for num, line in enumerate(f): \n        if 'Results' in line:\n            ResultLine=num   \n            break\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "is_accepted": true, "score": 2, "last_activity_date": 1438212789, "creation_date": 1438212789, "answer_id": 31712899, "question_id": 31712789, "link": "https://stackoverflow.com/questions/31712789/python-read-text-file-and-keep-it-open/31712899#31712899", "title": "Python read text file and keep it open", "body": "<p>Try doing both tasks together in a single pass over the file:</p>\n\n<pre><code>with open(MyFile,'r') as f:\n    searching = True\n    for num, line in enumerate(f): \n        if searching and 'Results' in line:\n            ResultLine=num\n            searching = False\n    lastline = num\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "is_accepted": false, "score": 1, "last_activity_date": 1438213514, "creation_date": 1438213514, "answer_id": 31713013, "question_id": 31712789, "link": "https://stackoverflow.com/questions/31712789/python-read-text-file-and-keep-it-open/31713013#31713013", "title": "Python read text file and keep it open", "body": "<p><code>with</code> creates a <code>contextmanager</code></p>\n\n<p>contextmanagers will automatically clean up after them selves when you exit their scope ... (ie close the filehandle)</p>\n\n<p><strong>this answer only addresses why your filehandle is closed when you exit the with statement</strong></p>\n\n<p>see <a href=\"http://preshing.com/20110920/the-python-with-statement-by-example/\" rel=\"nofollow\">http://preshing.com/20110920/the-python-with-statement-by-example/</a> for some more info about the <code>with</code> statement and contextmanagers (first link that came up on googling for \"file contextmanager\")</p>\n"}], "owner": {"reputation": 2589, "user_id": 3776938, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d1b19e04e44001cc1ddba3afc2212365?s=128&d=identicon&r=PG&f=1", "display_name": "AJG519", "link": "https://stackoverflow.com/users/3776938/ajg519"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "accepted_answer_id": 31712899, "answer_count": 5, "score": 2, "last_activity_date": 1438216526, "creation_date": 1438212159, "question_id": 31712789, "link": "https://stackoverflow.com/questions/31712789/python-read-text-file-and-keep-it-open", "title": "Python read text file and keep it open", "body": "<p>I have a text file that I read in with Python and I then determine the line numbers of lines that contain particular keywords. For some reason, I find that I have to open the file each time I search for a different keyword. I've tried using a with statement to keep the file open, but this does not seem to work. </p>\n\n<p>In the example below, I find the line number of the last line in the file as well as the first line that contains the string 'Results'</p>\n\n<pre><code>with open(MyFile,'r') as f:\n    lastline = sum(1 for line in f)\n\n    for num, line in enumerate(f): \n        if 'Results' in line:\n            ResultLine=num   \n            break\n</code></pre>\n\n<p>This successfully does the first operation (determining the last line), but not the latter. If I instead just open the file twice it works:</p>\n\n<pre><code>f=open(MyFile, 'r')\nlastline = sum(1 for line in f)\n\nf=open(MyFile, 'r')      \nfor num, line in enumerate(f): \n    if 'Results' in line:\n        ResultLine=num   \n        break\n</code></pre>\n\n<p>Any suggestions as to why I can't keep the file open with my with statement?</p>\n\n<p>Thanks for the help.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 4933, "user_id": 2987253, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/aa772cdc439443e5243e9d7aa41a9c6a?s=128&d=identicon&r=PG", "display_name": "Loocid", "link": "https://stackoverflow.com/users/2987253/loocid"}, "edited": false, "score": 1, "creation_date": 1438212189, "post_id": 31712778, "comment_id": 51363400, "body": "What python version are you using?"}, {"owner": {"reputation": 22852, "user_id": 103081, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b1a6594470fc5cf65f7cc14c21d29c86?s=128&d=identicon&r=PG", "display_name": "Paul", "link": "https://stackoverflow.com/users/103081/paul"}, "edited": false, "score": 2, "creation_date": 1438212247, "post_id": 31712778, "comment_id": 51363416, "body": "<code>range</code> allocates memory to hold the list in python 2.x, which is why people use the iterator <code>xrange</code> instead.  python 3 changed this."}, {"owner": {"reputation": 916, "user_id": 3885347, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/10fddbb46a8e1cc8b36d26d90e30fe53?s=128&d=identicon&r=PG&f=1", "display_name": "Jose Magana", "link": "https://stackoverflow.com/users/3885347/jose-magana"}, "reply_to_user": {"reputation": 4933, "user_id": 2987253, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/aa772cdc439443e5243e9d7aa41a9c6a?s=128&d=identicon&r=PG", "display_name": "Loocid", "link": "https://stackoverflow.com/users/2987253/loocid"}, "edited": false, "score": 0, "creation_date": 1438212259, "post_id": 31712778, "comment_id": 51363423, "body": "@Loocid 2.7.6.  I just ran it in 3.4.1 and it worked.. Why?"}, {"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1438212408, "post_id": 31712778, "comment_id": 51363456, "body": "Python 2 is bad at ranges and falls on its face when they grow large. Use Python 3."}, {"owner": {"reputation": 916, "user_id": 3885347, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/10fddbb46a8e1cc8b36d26d90e30fe53?s=128&d=identicon&r=PG&f=1", "display_name": "Jose Magana", "link": "https://stackoverflow.com/users/3885347/jose-magana"}, "reply_to_user": {"reputation": 22852, "user_id": 103081, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b1a6594470fc5cf65f7cc14c21d29c86?s=128&d=identicon&r=PG", "display_name": "Paul", "link": "https://stackoverflow.com/users/103081/paul"}, "edited": false, "score": 0, "creation_date": 1438212516, "post_id": 31712778, "comment_id": 51363485, "body": "Thanks @Paul. Does python 3 use a generator for range instead to avoid the gigantic malloc?"}, {"owner": {"reputation": 2569, "user_id": 514040, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/98bb1ee1a1f3d1297acf493776066086?s=128&d=identicon&r=PG", "display_name": "neuronaut", "link": "https://stackoverflow.com/users/514040/neuronaut"}, "edited": false, "score": 0, "creation_date": 1438212571, "post_id": 31712778, "comment_id": 51363503, "body": "In python 2 you can use <code>xrange</code> to avoid the memory allocation."}, {"owner": {"reputation": 22852, "user_id": 103081, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b1a6594470fc5cf65f7cc14c21d29c86?s=128&d=identicon&r=PG", "display_name": "Paul", "link": "https://stackoverflow.com/users/103081/paul"}, "edited": false, "score": 1, "creation_date": 1438212788, "post_id": 31712778, "comment_id": 51363539, "body": "@Jose In 3 a Range is a class with instances of immutable ranges, so yeah its like a generator.  <a href=\"https://docs.python.org/3/library/stdtypes.html#typesseq-range\" rel=\"nofollow noreferrer\">docs.python.org/3/library/stdtypes.html#typesseq-range</a>"}, {"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 1, "creation_date": 1438213019, "post_id": 31712778, "comment_id": 51363601, "body": "It&#39;s sort of like a generator in that it&#39;s lazy, but it doesn&#39;t have to actually generate values it doesn&#39;t need, and it doesn&#39;t get exhausted."}, {"owner": {"reputation": 10256, "user_id": 892383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbdbac684b02d5267ed66a8996ab53d?s=128&d=identicon&r=PG", "display_name": "Cyphase", "link": "https://stackoverflow.com/users/892383/cyphase"}, "edited": false, "score": 1, "creation_date": 1438217960, "post_id": 31712778, "comment_id": 51364801, "body": "Is this from Project Euler? Problem 41? :)"}, {"owner": {"reputation": 916, "user_id": 3885347, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/10fddbb46a8e1cc8b36d26d90e30fe53?s=128&d=identicon&r=PG&f=1", "display_name": "Jose Magana", "link": "https://stackoverflow.com/users/3885347/jose-magana"}, "reply_to_user": {"reputation": 10256, "user_id": 892383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbdbac684b02d5267ed66a8996ab53d?s=128&d=identicon&r=PG", "display_name": "Cyphase", "link": "https://stackoverflow.com/users/892383/cyphase"}, "edited": false, "score": 0, "creation_date": 1438219086, "post_id": 31712778, "comment_id": 51365102, "body": "@Cyphase Please not there are quite a few bugs in there and many more optimizable points. This was a snapshot early on in the problem haha"}], "answers": [{"comments": [{"owner": {"reputation": 916, "user_id": 3885347, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/10fddbb46a8e1cc8b36d26d90e30fe53?s=128&d=identicon&r=PG&f=1", "display_name": "Jose Magana", "link": "https://stackoverflow.com/users/3885347/jose-magana"}, "edited": false, "score": 0, "creation_date": 1438212461, "post_id": 31712794, "comment_id": 51363472, "body": "I was actually running in 2.7.6, but running in 3.4.1 actually solved my problem. Does 3.4.1 automatically use a generator instead of malloc for the range? Is that why running in 3 would work?"}, {"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 1, "creation_date": 1438212927, "post_id": 31712794, "comment_id": 51363572, "body": "Python 3 uses a <a href=\"http://stackoverflow.com/questions/30081275/why-is-1000000000000000-in-range1000000000000001-so-fast-in-python-3\">different <code>range</code> entirely</a>. Python 2&#39;s <code>range</code> (and even <code>xrange</code> to an extent) are basically na&#239;ve implementations."}], "tags": [], "owner": {"reputation": 58, "user_id": 3740993, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F9QJA.png?s=128&g=1", "display_name": "physcheng", "link": "https://stackoverflow.com/users/3740993/physcheng"}, "is_accepted": true, "score": 2, "last_activity_date": 1438212216, "creation_date": 1438212216, "answer_id": 31712794, "question_id": 31712778, "link": "https://stackoverflow.com/questions/31712778/python-appears-to-never-start-loop/31712794#31712794", "title": "Python appears to never start loop", "body": "<p>Try using the generator (xrange) instead of a list (range), i.e, </p>\n\n<pre><code>for i in xrange(1234567890, 9876543210 + 1): \n</code></pre>\n"}], "owner": {"reputation": 916, "user_id": 3885347, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/10fddbb46a8e1cc8b36d26d90e30fe53?s=128&d=identicon&r=PG&f=1", "display_name": "Jose Magana", "link": "https://stackoverflow.com/users/3885347/jose-magana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 31712794, "answer_count": 1, "score": 1, "last_activity_date": 1438212216, "creation_date": 1438212068, "question_id": 31712778, "link": "https://stackoverflow.com/questions/31712778/python-appears-to-never-start-loop", "title": "Python appears to never start loop", "body": "<p>When I run this in terminal, I never see anything until 30 seconds after starting when it prints:</p>\n\n<pre><code>killed 9\n</code></pre>\n\n<p>After the first time, I added the <code>print(i)</code> to <strong>line 23</strong> to see what's going on, but it never even prints the first number. There is something going on here that I don't understand. After changing the for loop to very small numbers, it works fine. I can't change the range of the loop because these are the exact numbers I need to look at. What should I do?</p>\n\n<pre><code>  6 def isPandigital(digits):                                                       \n  7     sortedDigits = sorted(digits)                                               \n  8     numDigits = len(sortedDigits)                                               \n  9                                                                                 \n 10     if len(set(sortedDigits)) != numDigits:                                     \n 11         return False                                                            \n 12                                                                                 \n 13     for i in range(1, numDigits + 1):                                           \n 14         if i != sortedDigits[i - 1]:                                            \n 15             return False                                                        \n 16                                                                                 \n 17     return True                                                                 \n 18                                                                                 \n 19 primes = [2, 3, 5, 7, 11, 13, 17]                                               \n 20 total = 0                                                                       \n 21                                                                                 \n 22 for i in range(1234567890, 9876543210 + 1):                                     \n 23     print(i)                                                                    \n 24     digits = [int(dig) for dig in str(i)]                                       \n 25     numDigits = 10                                                              \n 26                                                                                 \n 27     if isPandigital(digits):                                                    \n 28         for i in range(numDigits - 3):                                          \n 29             newNum = int(''.join(map(str, digits[i:i + 3])))                    \n 30             if not (newNum % primes[i] == 0):                                   \n 31                 break                                                           \n 32         else:                                                                   \n 33             total += i\n</code></pre>\n"}, {"tags": ["python", "authentication", "python-asyncio", "aiohttp"], "answers": [{"comments": [{"owner": {"reputation": 17930, "user_id": 1575066, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/hGOuL.png?s=128&g=1", "display_name": "PascalVKooten", "link": "https://stackoverflow.com/users/1575066/pascalvkooten"}, "edited": false, "score": 0, "creation_date": 1438295633, "post_id": 31723202, "comment_id": 51405655, "body": "Hey thanks a lot for your reply! I&#39;m still unable to do it; where do I actually give a url to login first? I updated my question to include the code before in Python 2."}, {"owner": {"reputation": 14527, "user_id": 3454879, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uSMGz.jpg?s=128&g=1", "display_name": "Andrew Svetlov", "link": "https://stackoverflow.com/users/3454879/andrew-svetlov"}, "reply_to_user": {"reputation": 17930, "user_id": 1575066, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/hGOuL.png?s=128&g=1", "display_name": "PascalVKooten", "link": "https://stackoverflow.com/users/1575066/pascalvkooten"}, "edited": false, "score": 0, "creation_date": 1438335347, "post_id": 31723202, "comment_id": 51419387, "body": "Ok. Take a look on the snippet: <a href=\"https://gist.github.com/asvetlov/218a1d7d05a540d70a21\" rel=\"nofollow noreferrer\">gist.github.com/asvetlov/218a1d7d05a540d70a21</a>"}, {"owner": {"reputation": 17930, "user_id": 1575066, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/hGOuL.png?s=128&g=1", "display_name": "PascalVKooten", "link": "https://stackoverflow.com/users/1575066/pascalvkooten"}, "edited": false, "score": 0, "creation_date": 1438353604, "post_id": 31723202, "comment_id": 51431508, "body": "I cannot use print, for example, in my snippet mc.call returns the text. Your  <code>mc.call(&#39;http:&#47;&#47;example.com&#47;other_url&#39;)</code> leaves a generator . When I try to print I get a <code>TypeError: A Future or coroutine is required</code>. It also complains about an unclosed response. Any idea?"}, {"owner": {"reputation": 17930, "user_id": 1575066, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/hGOuL.png?s=128&g=1", "display_name": "PascalVKooten", "link": "https://stackoverflow.com/users/1575066/pascalvkooten"}, "edited": false, "score": 0, "creation_date": 1438353961, "post_id": 31723202, "comment_id": 51431766, "body": "Just to clarify: &lt;generator object text&gt;"}, {"owner": {"reputation": 14527, "user_id": 3454879, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uSMGz.jpg?s=128&g=1", "display_name": "Andrew Svetlov", "link": "https://stackoverflow.com/users/3454879/andrew-svetlov"}, "reply_to_user": {"reputation": 17930, "user_id": 1575066, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/hGOuL.png?s=128&g=1", "display_name": "PascalVKooten", "link": "https://stackoverflow.com/users/1575066/pascalvkooten"}, "edited": false, "score": 0, "creation_date": 1438416246, "post_id": 31723202, "comment_id": 51452173, "body": "Yes, both <code>call</code> and <code>login</code> are coroutines. You should apply <code>yield from</code> to them."}, {"owner": {"reputation": 17930, "user_id": 1575066, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/hGOuL.png?s=128&g=1", "display_name": "PascalVKooten", "link": "https://stackoverflow.com/users/1575066/pascalvkooten"}, "edited": false, "score": 0, "creation_date": 1438616754, "post_id": 31723202, "comment_id": 51511035, "body": "I think I got it working, but that the difference is that somehow mechanize is not bothered by the javascript on the page? I&#39;m sure mechanize is not able to execute javascript, but still it &quot;allows&quot; it or something? Does <code>aiohttp</code> also have that option that you know?"}, {"owner": {"reputation": 17930, "user_id": 1575066, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/hGOuL.png?s=128&g=1", "display_name": "PascalVKooten", "link": "https://stackoverflow.com/users/1575066/pascalvkooten"}, "edited": false, "score": 0, "creation_date": 1438621337, "post_id": 31723202, "comment_id": 51513764, "body": "I&#39;ve used 3 websites to run the latest gist, and it doesn&#39;t work. It always tells me I&#39;m not logged in (using your exact code, with the only difference username/password fields and values). In my defense, I&#39;ve used urllib, requests, scrapy, mechanize and selenium, and this is the first time it&#39;s not working."}, {"owner": {"reputation": 17930, "user_id": 1575066, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/hGOuL.png?s=128&g=1", "display_name": "PascalVKooten", "link": "https://stackoverflow.com/users/1575066/pascalvkooten"}, "edited": false, "score": 0, "creation_date": 1438622130, "post_id": 31723202, "comment_id": 51514189, "body": "Perhaps you can find some kind of mistake with the code, I would really be grateful."}, {"owner": {"reputation": 17930, "user_id": 1575066, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/hGOuL.png?s=128&g=1", "display_name": "PascalVKooten", "link": "https://stackoverflow.com/users/1575066/pascalvkooten"}, "edited": false, "score": 0, "creation_date": 1438695412, "post_id": 31723202, "comment_id": 51546971, "body": "Well, that was embarrassing. It all had to do with the fact that I had to do a post for the login, very silly. Thanks anyway, it works great! We will use <code>aiohttp</code> for a customer!"}, {"owner": {"reputation": 6779, "user_id": 1691223, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/c2AsP.jpg?s=128&g=1", "display_name": "Shravan40", "link": "https://stackoverflow.com/users/1691223/shravan40"}, "edited": false, "score": 0, "creation_date": 1598594812, "post_id": 31723202, "comment_id": 112515145, "body": "@AndrewSvetlov: Is it possible to create <code>ClientSession</code> with <code>DigestAuth</code> ?"}], "tags": [], "owner": {"reputation": 14527, "user_id": 3454879, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uSMGz.jpg?s=128&g=1", "display_name": "Andrew Svetlov", "link": "https://stackoverflow.com/users/3454879/andrew-svetlov"}, "is_accepted": true, "score": 3, "last_activity_date": 1438257870, "last_edit_date": 1438257870, "creation_date": 1438257557, "answer_id": 31723202, "question_id": 31712777, "link": "https://stackoverflow.com/questions/31712777/aiohttp-form-based-authentication/31723202#31723202", "title": "aiohttp-form-based authentication", "body": "<p>I've just added example for basic auth on client side: <a href=\"https://github.com/KeepSafe/aiohttp/blob/master/examples/client_auth.py\" rel=\"nofollow\">client_auth.py</a></p>\n\n<p>Is it enough for you?</p>\n\n<p>P.S. Actually <code>ClientSession</code> is replacement for old-style <code>request</code>+<code>connector</code> concept. Session is more natural way to save session-related info. But old way is still working.</p>\n"}], "owner": {"reputation": 17930, "user_id": 1575066, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/hGOuL.png?s=128&g=1", "display_name": "PascalVKooten", "link": "https://stackoverflow.com/users/1575066/pascalvkooten"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3370, "favorite_count": 0, "accepted_answer_id": 31723202, "answer_count": 1, "score": 7, "last_activity_date": 1439426194, "creation_date": 1438212051, "last_edit_date": 1439426194, "question_id": 31712777, "link": "https://stackoverflow.com/questions/31712777/aiohttp-form-based-authentication", "title": "aiohttp-form-based authentication", "body": "<p>I cannot find working code of <code>aiohttp</code> in combination with a login page. The goal is simple: form-based authentication with a username and password, which cookie I would like to use in subsequent aiohttp async fetch calls.</p>\n\n<p>It seems that the whole Session concept changed in aiohttp between versions, so I'm curious how can I implement it in the most recent version. I'm not sure how to get the cookie once and then use it in the asynchronous matter.</p>\n\n<p>I'd really like to see a <strong>fully working example</strong>, since unfortunately I wasn't able to get it working with the snippets I found everywhere.</p>\n\n<p>I guess this might be the start, but I'm not sure and I certainly do not see how I can connect everything to it (do I also still need a <code>aiohttp.TCPConnector</code>?)\n<a href=\"http://aiohttp.readthedocs.org/en/latest/client_reference.html#aiohttp.client.ClientSession\" rel=\"noreferrer\">http://aiohttp.readthedocs.org/en/latest/client_reference.html#aiohttp.client.ClientSession</a></p>\n\n<p>Example of my non-async version in Python 2 using mechanize (though I naturally use Python 3 for asyncio etc):</p>\n\n<pre><code>import mechanize\nimport urllib\n\nclass MyClass()\n    def __init__(self):\n        self.data = {'username' : 'me', 'password' : 'pw'}\n        self.login_url = 'http://example.com/login'\n        self.login()\n\n    def call(self, url):\n        request2 = mechanize.Request(url)\n        self.cookie_jar.add_cookie_header(request2)\n        response2 = mechanize.urlopen(request2).read()\n        return response2    \n\n    def login(self):\n        request = mechanize.Request(self.login_url)\n        # 'username' and 'password' keys are actually the name of the &lt;input&gt;\n        logInfo = urllib.urlencode({'username' : self.data['username'], \n                                    'password' : self.data['password']})\n        response = mechanize.urlopen(request, data = logInfo)\n        cookie_jar = mechanize.CookieJar()\n        cookie_jar.extract_cookies(response, request)\n        self.cookie_jar = cookie_jar\n\nmc = MyClass()\nmc.call('http://example.com/other_url')\n</code></pre>\n"}, {"tags": ["python", "hyperlink"], "comments": [{"owner": {"reputation": 4369, "user_id": 3102935, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/22985d9fffff3b76a11b1f2bccbf2f42?s=128&d=identicon&r=PG&f=1", "display_name": "WorldSEnder", "link": "https://stackoverflow.com/users/3102935/worldsender"}, "edited": false, "score": 0, "creation_date": 1438212864, "post_id": 31712721, "comment_id": 51363555, "body": "Possible design flaw: Not only 200 OK means success. There is also codes like 202 accepted, etc... <a href=\"http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html\" rel=\"nofollow noreferrer\">the list</a> is long and after all, the browser already adds the utility to check if the page can be displayed. Why reinvent the wheel?"}, {"owner": {"reputation": 15161, "user_id": 4338920, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/AHhiC.png?s=128&g=1", "display_name": "Malik Brahimi", "link": "https://stackoverflow.com/users/4338920/malik-brahimi"}, "edited": false, "score": 0, "creation_date": 1438269789, "post_id": 31712721, "comment_id": 51391520, "body": "Won&#39;t everything be 200 status because of failed URI search assist?"}], "answers": [{"comments": [{"owner": {"reputation": 4369, "user_id": 3102935, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/22985d9fffff3b76a11b1f2bccbf2f42?s=128&d=identicon&r=PG&f=1", "display_name": "WorldSEnder", "link": "https://stackoverflow.com/users/3102935/worldsender"}, "edited": false, "score": 0, "creation_date": 1438213201, "post_id": 31712810, "comment_id": 51363648, "body": "you should propably use <code>HEAD</code> instead of <code>GET</code> to request the page since you don&#39;t use the body, anyway. See <a href=\"http://docs.python-requests.org/en/v1.0.0/api/#requests.head\" rel=\"nofollow noreferrer\">requests.head</a>"}], "tags": [], "owner": {"reputation": 15161, "user_id": 4338920, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/AHhiC.png?s=128&g=1", "display_name": "Malik Brahimi", "link": "https://stackoverflow.com/users/4338920/malik-brahimi"}, "is_accepted": true, "score": 3, "last_activity_date": 1438213700, "last_edit_date": 1438213700, "creation_date": 1438212321, "answer_id": 31712810, "question_id": 31712721, "link": "https://stackoverflow.com/questions/31712721/python-how-to-go-to-a-link-and-open-it-if-it-exists/31712810#31712810", "title": "Python: How to go to a link and open it if it exists", "body": "<p>Use the <code>requests</code> package to send a <code>HEAD</code> request to the desired location and then create an <code>if</code></p>\n\n<pre><code>if requests.head(url).status_code == 200: webbrowser.open(url) # open url if status is 200\n</code></pre>\n"}], "owner": {"reputation": 137, "user_id": 5082467, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VTOZW.jpg?s=128&g=1", "display_name": "Mark Read", "link": "https://stackoverflow.com/users/5082467/mark-read"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 399, "favorite_count": 0, "accepted_answer_id": 31712810, "answer_count": 1, "score": 1, "last_activity_date": 1438213700, "creation_date": 1438211666, "question_id": 31712721, "link": "https://stackoverflow.com/questions/31712721/python-how-to-go-to-a-link-and-open-it-if-it-exists", "title": "Python: How to go to a link and open it if it exists", "body": "<p>I found this code:</p>\n\n<pre><code>import webbrowser\n\nwebbrowser.open('http://eample.com')\n</code></pre>\n\n<p>How do I modify it so that it will only open the link if the return code is 200?</p>\n"}, {"tags": ["python", "hadoop", "hadoopy"], "answers": [{"tags": [], "owner": {"reputation": 423, "user_id": 1440186, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2f0805d983b8c0d1026be6adef819905?s=128&d=identicon&r=PG", "display_name": "antonio", "link": "https://stackoverflow.com/users/1440186/antonio"}, "is_accepted": true, "score": 0, "last_activity_date": 1441381403, "creation_date": 1441381403, "answer_id": 32401921, "question_id": 31712693, "link": "https://stackoverflow.com/questions/31712693/hadoopy-launch-frozen-cannot-execute-script/32401921#32401921", "title": "hadoopy.launch_frozen Cannot execute script", "body": "<p>I have reinstalled all with my user as administrator and the error dissapeared.</p>\n"}], "owner": {"reputation": 423, "user_id": 1440186, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2f0805d983b8c0d1026be6adef819905?s=128&d=identicon&r=PG", "display_name": "antonio", "link": "https://stackoverflow.com/users/1440186/antonio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 1, "accepted_answer_id": 32401921, "answer_count": 1, "score": 0, "last_activity_date": 1441381403, "creation_date": 1438211509, "last_edit_date": 1438213723, "question_id": 31712693, "link": "https://stackoverflow.com/questions/31712693/hadoopy-launch-frozen-cannot-execute-script", "title": "hadoopy.launch_frozen Cannot execute script", "body": "<p>I'm running the command hadoopy.launch_frozen.</p>\n\n<p>When I run my script, this error appears:</p>\n\n<pre><code>File \"Task.py\", line 22, in &lt;module&gt;\n    hadoopy.launch_frozen(data_path, output_path, 'Main.py', temp_path=tmp_path)\n  File \"/home/aflores/code/pemex/src/src/hadoopy/hadoopy/_runner.py\", line 407, in launch_frozen\n    make_executable=False, **kw)\n  File \"/home/aflores/code/pemex/src/src/hadoopy/hadoopy/_runner.py\", line 179, in launch\n    script_info = _parse_info(script_path, python_cmd)\n  File \"/home/aflores/code/pemex/src/src/hadoopy/hadoopy/_runner.py\", line 81, in _parse_info\n    raise ValueError('Cannot execute script [%s]!  Script output below...\\nstdout\\n%s\\nstderr\\n%s' % (script_path, stdout, stderr))\nValueError: Cannot execute script [Main.py]!  Script output below...\n</code></pre>\n"}, {"tags": ["python", "opencv", "numpy", "ocr"], "answers": [{"tags": [], "owner": {"reputation": 97, "user_id": 5162475, "user_type": "registered", "profile_image": "https://graph.facebook.com/412005099007934/picture?type=large", "display_name": "Zikofs", "link": "https://stackoverflow.com/users/5162475/zikofs"}, "is_accepted": true, "score": 3, "last_activity_date": 1438459676, "creation_date": 1438459676, "answer_id": 31765745, "question_id": 31712675, "link": "https://stackoverflow.com/questions/31712675/digit-recognition-ocr-in-opencv-python/31765745#31765745", "title": "Digit Recognition OCR in OpenCV-Python", "body": "<p>I found the right way, it needed just more customised code.</p>\n\n<p>The same process before detecting countours :</p>\n\n<pre><code>gray = cv2.cvtColor(im,cv2.COLOR_BGR2GRAY)\nblur = cv2.GaussianBlur(gray,(5,5),0)\nthresh = cv2.adaptiveThreshold(blur,255,1,1,11,2)\n</code></pre>\n\n<p>Not</p>\n\n<pre><code>gray = cv2.cvtColor(im,cv2.COLOR_BGR2GRAY)\nthresh = cv2.adaptiveThreshold(gray,255,1,1,11,2)\n</code></pre>\n\n<p>And</p>\n\n<pre><code>cv2.rectangle(im,(x,y),(x+w,y+h),(0,0,255),2)\n</code></pre>\n\n<p>Not</p>\n\n<pre><code>cv2.rectangle(im,(x,y),(x+w,y+h),(0,255,0),2)\n</code></pre>\n\n<p>I get 99% accuracy, good beggining percentage </p>\n\n<p>Thanks for you anyway</p>\n"}], "owner": {"reputation": 97, "user_id": 5162475, "user_type": "registered", "profile_image": "https://graph.facebook.com/412005099007934/picture?type=large", "display_name": "Zikofs", "link": "https://stackoverflow.com/users/5162475/zikofs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2302, "favorite_count": 2, "accepted_answer_id": 31765745, "answer_count": 1, "score": 2, "last_activity_date": 1438459676, "creation_date": 1438211370, "last_edit_date": 1495540890, "question_id": 31712675, "link": "https://stackoverflow.com/questions/31712675/digit-recognition-ocr-in-opencv-python", "title": "Digit Recognition OCR in OpenCV-Python", "body": "<p>My question is about building a simple program that detect digits inside images, i did some researches and found this topic <a href=\"https://stackoverflow.com/questions/9413216/simple-digit-recognition-ocr-in-opencv-python\">Simple OCR digits</a> on stack and i found it very educational, so i wanted to us it for my own need.</p>\n\n<p>My training data image is like:</p>\n\n<p><a href=\"https://i.stack.imgur.com/qyaaW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qyaaW.png\" alt=\"\"></a></p>\n\n<p>The code i used to build the dataset is: (i did some modifications to Abid Rahman's code so it can hundle my case)</p>\n\n<pre><code>import sys\n\nimport numpy as np\nimport cv2\n\nim = cv2.imread('data_set_trans.png')\nim3 = im.copy()\n\ngray = cv2.cvtColor(im,cv2.COLOR_BGR2GRAY)\nblur = cv2.GaussianBlur(gray,(5,5),0)\nthresh = cv2.adaptiveThreshold(blur,255,1,1,11,2)\n\n#################      Now finding Contours         ###################\n\ncontours,hierarchy = cv2.findContours(thresh,cv2.RETR_LIST,cv2.CHAIN_APPROX_SIMPLE)\n\nsamples =  np.empty((0,100))\nresponses = []\nkeys = [i for i in range(48,58)]\n\n\nfor cnt in contours:\n    if cv2.contourArea(cnt)&gt;20:\n        [x,y,w,h] = cv2.boundingRect(cnt)\n\n\n        if  h&gt;=10:\n            cv2.rectangle(im,(x,y),(x+w,y+h),(0,0,255),2)\n            roi = thresh[y:y+h,x:x+w]\n            roismall = cv2.resize(roi,(10,10))\n            cv2.imshow('norm',im)\n            print \"Begin wait\"\n            key = cv2.waitKey(1)\n            key = raw_input('What is the number ?') #cv2.waitKey didnt work for me so i add this line\n\n\n            if key == -1:  # (-1 to quit)\n                sys.exit()\n            else:\n                responses.append(int(key))\n                sample = roismall.reshape((1,100))\n                samples = np.append(samples,sample,0)\n\nresponses = np.array(responses,np.float32)\nresponses = responses.reshape((responses.size,1))\nprint \"training complete\"\n\nnp.savetxt('generalsamples.data',samples)\nnp.savetxt('generalresponses.data',responses)\n</code></pre>\n\n<p>I used the same training data image as testing part, in order to get the best results accuracy and see if i am on the right way:</p>\n\n<pre><code>import cv2\nimport numpy as np\nimport collections\n\n#######   training part    ############### \nsamples = np.loadtxt('generalsamples.data',np.float32)\nresponses = np.loadtxt('generalresponses.data',np.float32)\nresponses = responses.reshape((responses.size,1))\n\nmodel = cv2.KNearest()\nmodel.train(samples,responses)\n\n############################# testing part  #########################\n\nim = cv2.imread('one_white_1.png')\nout = np.zeros(im.shape,np.uint8)\ngray = cv2.cvtColor(im,cv2.COLOR_BGR2GRAY)\nthresh = cv2.adaptiveThreshold(gray,255,1,1,11,2)\n\ncontours,hierarchy = cv2.findContours(thresh,cv2.RETR_LIST,cv2.CHAIN_APPROX_SIMPLE)\nfor cnt in contours:\n    if cv2.contourArea(cnt)&gt;20:\n        [x,y,w,h] = cv2.boundingRect(cnt)\n        if  h&gt;=10:\n            cv2.rectangle(im,(x,y),(x+w,y+h),(0,255,0),2)\n            roi = thresh[y:y+h,x:x+w]\n            roismall = cv2.resize(roi,(10,10))\n            roismall = roismall.reshape((1,100))\n            roismall = np.float32(roismall)\n            retval, results, neigh_resp, dists = model.find_nearest(roismall, k = 1)\n            string = str(int((results[0][0])))\n            cv2.putText(out,string,(x,y+h),1,1,(0,255,0))\n\n\ncv2.imshow('im',im)\ncv2.imshow('out',out)\n#cv2.waitKey(0)\nraw_input('Tape to exit')\n</code></pre>\n\n<p>The result was as like that:</p>\n\n<p><a href=\"https://i.stack.imgur.com/kcPGF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kcPGF.png\" alt=\"\"></a></p>\n\n<p>As you can see it's completely wrong.</p>\n\n<p>I don't know what i'm missing or if it my case is more particular and can't be handled by this digit OCR system ????</p>\n\n<p>If someone could help me by any idea</p>\n\n<p>I notice that i am using python 2.7 open-cv 2.4.11 numpy 1.9 and mac os 10.10.4</p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "mocking", "python-unittest"], "answers": [{"comments": [{"owner": {"reputation": 2194, "user_id": 1546600, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/nMKz6.png?s=128&g=1", "display_name": "Ethereal", "link": "https://stackoverflow.com/users/1546600/ethereal"}, "edited": false, "score": 0, "creation_date": 1438901522, "post_id": 31756618, "comment_id": 51653282, "body": "Thanks, this worked but I had to slightly modify -- in my case I needed something like <code>mock(filename).__enter__().__iter__.return_value = [1,2,3,4,5]</code> -- could you update your answer to reflect that?"}, {"owner": {"reputation": 6454, "user_id": 248065, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/95fb14ef95ad722e78e25f065c9d8ec6?s=128&d=identicon&r=PG", "display_name": "Thom Wiggers", "link": "https://stackoverflow.com/users/248065/thom-wiggers"}, "reply_to_user": {"reputation": 2194, "user_id": 1546600, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/nMKz6.png?s=128&g=1", "display_name": "Ethereal", "link": "https://stackoverflow.com/users/1546600/ethereal"}, "edited": false, "score": 1, "creation_date": 1438981331, "post_id": 31756618, "comment_id": 51690782, "body": "right, that&#39;s what you get for editing from your phone before you had breakfast."}], "tags": [], "owner": {"reputation": 6454, "user_id": 248065, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/95fb14ef95ad722e78e25f065c9d8ec6?s=128&d=identicon&r=PG", "display_name": "Thom Wiggers", "link": "https://stackoverflow.com/users/248065/thom-wiggers"}, "is_accepted": true, "score": 2, "last_activity_date": 1438981310, "last_edit_date": 1438981310, "creation_date": 1438385115, "answer_id": 31756618, "question_id": 31712654, "link": "https://stackoverflow.com/questions/31712654/mocking-a-class-used-within-a-context-manager/31756618#31756618", "title": "Mocking a Class used within a Context Manager", "body": "<p>You need to set <code>return_value</code> on the functions you want to mock, before you call the function you're testing. Note that on anything where you haven't set this, it'll return a new <code>MagicMock</code>. You can intercept this by setting a <code>return_value</code> on this new <code>MagicMock</code>.</p>\n\n<p>So for example:</p>\n\n<pre><code>file = 'foo' \nmock = MagicMock()  # could be gotten through patch\nmock(file).__enter__().__iter__.return_value = [1,2,3,4,5]\n\nwith mock(file) as reader:\n    for x in reader:\n        print(x)\n</code></pre>\n\n<p>See the <a href=\"https://docs.python.org/3.5/reference/datamodel.html\" rel=\"nofollow\">Python data model</a> for how the magic functions work.</p>\n"}], "owner": {"reputation": 2194, "user_id": 1546600, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/nMKz6.png?s=128&g=1", "display_name": "Ethereal", "link": "https://stackoverflow.com/users/1546600/ethereal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2501, "favorite_count": 0, "accepted_answer_id": 31756618, "answer_count": 1, "score": 0, "last_activity_date": 1438981310, "creation_date": 1438211201, "question_id": 31712654, "link": "https://stackoverflow.com/questions/31712654/mocking-a-class-used-within-a-context-manager", "title": "Mocking a Class used within a Context Manager", "body": "<p>I have a module method that uses a context manager with a Class that offers iteration:</p>\n\n<pre><code>import module\n\ndef ReadLog(log_file):\n  with module.LogReader(log_file) as reader:\n    combined_list = []\n    for record in reader:\n      combined_list.append(record)\n    return combined_list\n</code></pre>\n\n<p>In my unittest, I'm trying to mock module.LogReader such that it produces records defined by myself.  This is where I'm at so far:</p>\n\n<pre><code>import mock\nimport my_mod\n\n@mock.patch.object(my_mod.module, 'LogReader')\ndef testReadLog(self, mock_logreader):\n  filename = '/fake/file/name.log'\n  my_mod.ReadLog(filename)\n\n  # Verify that module.LogReader was called\n  mock_logreader.assert_called_once_with(filename)\n</code></pre>\n\n<p>But I haven't been able to make the iteration produce records so far.  The LogReader class has <code>__enter__, __exit__, __iter__, next</code> methods, and I've tried doing <code>mock_logreader.return_value = '123'</code> for example but this results in the error message <code>AttributeError: __exit__</code>.</p>\n\n<p>What sauce am I missing here?</p>\n"}, {"tags": ["python", "pandas", "dataframe", "pivot-table"], "answers": [{"comments": [{"owner": {"reputation": 1695, "user_id": 4945793, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/b2850e14438ec7cc64635c0c017d8e1d?s=128&d=identicon&r=PG&f=1", "display_name": "jenryb", "link": "https://stackoverflow.com/users/4945793/jenryb"}, "edited": false, "score": 0, "creation_date": 1438266626, "post_id": 31712743, "comment_id": 51389196, "body": "I like this since it&#39;s a one-liner, but it won&#39;t update once we move into August, then it will have to be pd.concat([df.iloc[:,7:], df.iloc[:,:7]], axis=1)"}], "tags": [], "owner": {"reputation": 20276, "user_id": 5014134, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hSokd.jpg?s=128&g=1", "display_name": "Jianxun Li", "link": "https://stackoverflow.com/users/5014134/jianxun-li"}, "is_accepted": false, "score": 1, "last_activity_date": 1438211812, "creation_date": 1438211812, "answer_id": 31712743, "question_id": 31712652, "link": "https://stackoverflow.com/questions/31712652/reorganizing-dataframe-by-date/31712743#31712743", "title": "Reorganizing Dataframe by Date", "body": "<p>Suppose <code>df</code> is your pivot table.</p>\n\n<pre><code>df\n\n              1   2   3   4   5 ...   8   9  10  11  12\nCompanyName                     ...                    \nCustomer1    17  30  29  39  15 ...  10  36  21  18  15\nCustomer2     4  11  13  22  34 ...  17  29  31  17  14\nCustomer3    10   7  23  21   7 ...   0  21   9  12  17\nCustomer4     6  10  11   8   3 ...   8  11  11  18  14\nCustomer5    13   7   6  12   6 ...  10  11   7  10  11\n</code></pre>\n\n<p>You can use <code>pd.concat</code> to do the trick.</p>\n\n<pre><code>pd.concat([df.iloc[:,6:], df.iloc[:,:6]], axis=1)\n\n              7   8   9  10  11 ...   2   3   4   5   6\nCompanyName                     ...                    \nCustomer1    15  10  36  21  18 ...  30  29  39  15  27\nCustomer2    32  17  29  31  17 ...  11  13  22  34  27\nCustomer3    25   0  21   9  12 ...   7  23  21   7  15\nCustomer4     3   8  11  11  18 ...  10  11   8   3   4\nCustomer5     2  10  11   7  10 ...   7   6  12   6   8\n\n[5 rows x 12 columns]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1695, "user_id": 4945793, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/b2850e14438ec7cc64635c0c017d8e1d?s=128&d=identicon&r=PG&f=1", "display_name": "jenryb", "link": "https://stackoverflow.com/users/4945793/jenryb"}, "edited": false, "score": 0, "creation_date": 1438266731, "post_id": 31712898, "comment_id": 51389273, "body": "Same problem with this answer, once you get the month using month = months[date_list[0][:3]], it is stagnant. I want it to change on a monthly basis depending on what month it is."}, {"owner": {"reputation": 86481, "user_id": 2411802, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/RA92x.jpg?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/2411802/alexander"}, "reply_to_user": {"reputation": 1695, "user_id": 4945793, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/b2850e14438ec7cc64635c0c017d8e1d?s=128&d=identicon&r=PG&f=1", "display_name": "jenryb", "link": "https://stackoverflow.com/users/4945793/jenryb"}, "edited": false, "score": 0, "creation_date": 1438268227, "post_id": 31712898, "comment_id": 51390425, "body": "The line <code>month = months[date_list[0][:3]]</code> uses the dictionary to get the index value of the first month in your list of dates.  If the list changes, your index value will change, and hence your table columns will shift."}, {"owner": {"reputation": 1695, "user_id": 4945793, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/b2850e14438ec7cc64635c0c017d8e1d?s=128&d=identicon&r=PG&f=1", "display_name": "jenryb", "link": "https://stackoverflow.com/users/4945793/jenryb"}, "edited": false, "score": 0, "creation_date": 1438268328, "post_id": 31712898, "comment_id": 51390503, "body": "Ah, I see it now. Thank you!"}], "tags": [], "owner": {"reputation": 86481, "user_id": 2411802, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/RA92x.jpg?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/2411802/alexander"}, "is_accepted": true, "score": 1, "last_activity_date": 1438268405, "last_edit_date": 1438268405, "creation_date": 1438212788, "answer_id": 31712898, "question_id": 31712652, "link": "https://stackoverflow.com/questions/31712652/reorganizing-dataframe-by-date/31712898#31712898", "title": "Reorganizing Dataframe by Date", "body": "<p>Let's say your pivot table is named <code>pt</code>.</p>\n\n<pre><code># Months are off by one because of Python's zero based indexing.\nmonths = {'Jan': 0,\n          'Feb': 1,\n          'Mar': 2,\n          'Apr': 3,\n          'May': 4,\n          'Jun': 5,\n          'Jul': 6,\n          'Aug': 7,\n          'Sep': 8,\n          'Oct': 9,\n          'Nov': 10,\n          'Dec': 11}\n\n# Get the index value of the first month from your list.\nmonth = months[date_list[0][:3]]\n\n# Now concatenate the results and create you column names.\npt_new = pd.concat([pt.iloc[:, month:], pt.iloc[:, :month]], axis=1)\npt_new.columns = date_list\n\n&gt;&gt;&gt; pt_new\n            Aug 2014  Sep 2014  Oct 2014  Nov 2014  Dec 2014  Jan 2015   \nCustomer 1        10        36        21        18        15        17   \nCustomer 2        17        29        31        17        14         4   \nCustomer 3         0        21         9        12        17        10   \nCustomer 4         8        11        11        18        14         6   \nCustomer 5        10        11         7        10        11        13   \n\n            Feb 2015  Mar 2015  Apr 2015  May 2015  Jun 2015  Jul 2015  \nCustomer 1        30        29        39        15        27        15  \nCustomer 2        11        13        22        34        27        32  \nCustomer 3         7        23        21         7        15        25  \nCustomer 4        10        11         8         3         4         3  \nCustomer 5         7         6        12         6         8         2 \n</code></pre>\n"}], "owner": {"reputation": 1695, "user_id": 4945793, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/b2850e14438ec7cc64635c0c017d8e1d?s=128&d=identicon&r=PG&f=1", "display_name": "jenryb", "link": "https://stackoverflow.com/users/4945793/jenryb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 31712898, "answer_count": 2, "score": 0, "last_activity_date": 1438268405, "creation_date": 1438211193, "question_id": 31712652, "link": "https://stackoverflow.com/questions/31712652/reorganizing-dataframe-by-date", "title": "Reorganizing Dataframe by Date", "body": "<p>I have a pivot table that shows customer calls by month. It looks like this</p>\n\n<pre><code>CompanyName 1   2   3   4   5   6   7   8   9   10  11  12\nCustomer 1  17  30  29  39  15  27  15  10  36  21  18  15\nCustomer 2  4   11  13  22  34  27  32  17  29  31  17  14\nCustomer 3  10  7   23  21  7   15  25  0   21  9   12  17\nCustomer 4  6   10  11  8   3   4   3   8   11  11  18  14\nCustomer 5  13  7   6   12  6   8   2   10  11  7   10  11\n</code></pre>\n\n<p>I make a date list so that I can display them nicely on a graph. </p>\n\n<pre><code>date_list[::-1]\nOut[63]: \n['Jul 2015',\n 'Jun 2015',\n 'May 2015',\n 'Apr 2015',\n 'Mar 2015',\n 'Feb 2015',\n 'Jan 2015',\n 'Dec 2014',\n 'Nov 2014',\n 'Oct 2014',\n 'Sep 2014',\n 'Aug 2014']\n</code></pre>\n\n<p>I would like to reorder the pivot table so that it matches the date_list like so:</p>\n\n<pre><code>CompanyName 7   8   9   10  11  12  1   2   3   4   5   6\nCustomer 1  15  10  36  21  18  15  17  30  29  39  15  27\nCustomer 2  32  17  29  31  17  14  4   11  13  22  34  27\nCustomer 3  25  0   21  9   12  17  10  7   23  21  7   15\nCustomer 4  3   8   11  11  18  14  6   10  11  8   3   4\nCustomer 5  2   10  11  7   10  11  13  7   6   12  6   8\n</code></pre>\n\n<p>I was looking at how to reorder columns but since this will be dynamically changing by month I got a bit baffled. </p>\n"}, {"tags": ["python", "django", "unicode"], "comments": [{"owner": {"reputation": 492, "user_id": 763410, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/d134fc73057a9dc0901ce8d8d2c7ca88?s=128&d=identicon&r=PG", "display_name": "user763410", "link": "https://stackoverflow.com/users/763410/user763410"}, "edited": false, "score": 0, "creation_date": 1438211466, "post_id": 31712611, "comment_id": 51363222, "body": "As soon as I submitted, I realized that model has <b>unicode</b> function. so that explains why the error comes. But I do not know how to fix the issue. Any help is appreciated."}], "answers": [{"comments": [{"owner": {"reputation": 492, "user_id": 763410, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/d134fc73057a9dc0901ce8d8d2c7ca88?s=128&d=identicon&r=PG", "display_name": "user763410", "link": "https://stackoverflow.com/users/763410/user763410"}, "edited": false, "score": 0, "creation_date": 1438283766, "post_id": 31715829, "comment_id": 51399949, "body": "I am using Python2.7. As I mentioned in my comment, I am using <b>unicode</b>, so thats not the issue. The way admin panel is interpreting it is the issue."}], "tags": [], "owner": {"reputation": 1277, "user_id": 4284628, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/919092c72b8746174842018060731f38?s=128&d=identicon&r=PG&f=1", "display_name": "Wannabe Coder", "link": "https://stackoverflow.com/users/4284628/wannabe-coder"}, "is_accepted": true, "score": 2, "last_activity_date": 1438321837, "last_edit_date": 1438321837, "creation_date": 1438234438, "answer_id": 31715829, "question_id": 31712611, "link": "https://stackoverflow.com/questions/31712611/django-python-single-quotes-causing-django-admin-interface-to-throw-error/31715829#31715829", "title": "Django/Python: Single quotes causing Django admin interface to throw error", "body": "<p>Are you using Python2.7 or Python3? If you are using Python2.7, use <code>__unicode__()</code>, otherwise, use <code>__str__()</code>.</p>\n\n<p>Please take a look at the \"<code>__str__ or __unicode__?</code>\" section of this <a href=\"https://docs.djangoproject.com/en/1.8/intro/tutorial01/#playing-with-the-api\" rel=\"nofollow noreferrer\">link</a>. For proper usage, please take a look at the docs for <a href=\"https://docs.djangoproject.com/en/1.8/ref/models/instances/#unicode\" rel=\"nofollow noreferrer\"><code>__unicode__()</code></a> and <a href=\"https://docs.djangoproject.com/en/1.8/ref/models/instances/#str\" rel=\"nofollow noreferrer\"><code>__str__()</code></a>.</p>\n\n<p><strong>EDIT:</strong><br>\nI cannot replicate your error. I can access the admin just fine. By any chance, are you using an older version of Django (older than 1.8)?\n<a href=\"https://i.stack.imgur.com/yPwMD.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yPwMD.png\" alt=\"Test\"></a>  </p>\n\n<p>Try using this instead since this is supposedly the proper way to handle unicode strings as endorsed by the Django docs.</p>\n\n<pre><code>def __unicode__(self):\n    return u'%s_%s_%s___%s' % (self.id, self.text, self.date_n_time, self.parent_2)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 492, "user_id": 763410, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/d134fc73057a9dc0901ce8d8d2c7ca88?s=128&d=identicon&r=PG", "display_name": "user763410", "link": "https://stackoverflow.com/users/763410/user763410"}, "edited": false, "score": 0, "creation_date": 1438365579, "post_id": 31745792, "comment_id": 51438351, "body": "This works along with the answer @Wannabe Coder. Thanks!"}], "tags": [], "owner": {"reputation": 2591, "user_id": 4848774, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/DKYSZ.png?s=128&g=1", "display_name": "jape", "link": "https://stackoverflow.com/users/4848774/jape"}, "is_accepted": false, "score": 3, "last_activity_date": 1438344355, "creation_date": 1438344355, "answer_id": 31745792, "question_id": 31712611, "link": "https://stackoverflow.com/questions/31712611/django-python-single-quotes-causing-django-admin-interface-to-throw-error/31745792#31745792", "title": "Django/Python: Single quotes causing Django admin interface to throw error", "body": "<p>I would try changing your unicode to the following:</p>\n\n<pre><code>def __unicode__(self):\n    return u'{}\"_\"{}\"_\"{}\"_\"\"__\"{}'.format(self.id, self.text, self.date_n_time, self.parent_2)\n</code></pre>\n\n<p>That should return what you initially wanted, including the quotes. I would also consider combining the portion that has <code>\"_\"\"__\"</code> to just <code>\"___\"</code>. There's no real reason to separate the underscores if they're going to be following each other.</p>\n\n<p>If you don't want the quotes, simply delete them. Keep the <code>{}</code>. It's a more reliable format compared to <code>\"%s\" % (context)</code></p>\n\n<p>Good luck with your clone!</p>\n"}], "owner": {"reputation": 492, "user_id": 763410, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/d134fc73057a9dc0901ce8d8d2c7ca88?s=128&d=identicon&r=PG", "display_name": "user763410", "link": "https://stackoverflow.com/users/763410/user763410"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 401, "favorite_count": 0, "accepted_answer_id": 31715829, "answer_count": 2, "score": 0, "last_activity_date": 1438344355, "creation_date": 1438210920, "last_edit_date": 1438211410, "question_id": 31712611, "link": "https://stackoverflow.com/questions/31712611/django-python-single-quotes-causing-django-admin-interface-to-throw-error", "title": "Django/Python: Single quotes causing Django admin interface to throw error", "body": "<p>I am new to django and am writing a twitter clone to learn it.</p>\n\n<p>I have a model like the following</p>\n\n<pre><code>class message(models.Model):\n    text = models.TextField()\n    date_n_time = models.DateTimeField(default=datetime.now, null=True,blank=True)\n    parent_2 = models.ForeignKey('self',null=True,blank=True)    \n    def __unicode__(self):\n        return str(self.id)+\"_\"+self.text+\"_\"+str(self.date_n_time)+\"_\"+\"___\"+str(self.parent_2)\n</code></pre>\n\n<p>Now, I added a message with text equal to following (quotes are part of what I entered through Django create form.</p>\n\n<blockquote>\n  <p>'prod'</p>\n</blockquote>\n\n<p>I am trying to access the message object through admin interface: 127.0.0.1:8000/admin/core/message/</p>\n\n<p>I get the following error message in </p>\n\n<blockquote>\n  <p>'ascii' codec can't decode byte 0xe2 in position 9: ordinal not in\n  range(128). You passed in message: [Bad Unicode data] (class\n  'core.models.message')</p>\n</blockquote>\n\n<p>Other stack overflow answers seem to suggest this is unicode issue, but if I change test to </p>\n\n<blockquote>\n  <p>\"prod\"</p>\n</blockquote>\n\n<p>I do not get any errors. </p>\n\n<p>Why am I getting the error only with single quotes? How do I catch this problem through django forms/model code, preferably at the time of saving the input form?</p>\n"}, {"tags": ["python", "python-2.7"], "answers": [{"comments": [{"owner": {"reputation": 9194, "user_id": 2038257, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/d7c4839a46ca7fc6d9a950aa362166ba?s=128&d=identicon&r=PG", "display_name": "Marco Dinatsoli", "link": "https://stackoverflow.com/users/2038257/marco-dinatsoli"}, "edited": false, "score": 0, "creation_date": 1438210953, "post_id": 31712549, "comment_id": 51363097, "body": "now i am getting this error   File &quot;CsvToJson.py&quot;, line 10, in &lt;module&gt;     k = CsvToJson(csvFilePath = &#39;carsModelsMakes.csv&#39;)   File &quot;CsvToJson.py&quot;, line 7, in <b>init</b>     for row in spamreader: _csv.Error: new-line character seen in unquoted field - do you need to open the file in universal-newline mode?"}, {"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "reply_to_user": {"reputation": 9194, "user_id": 2038257, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/d7c4839a46ca7fc6d9a950aa362166ba?s=128&d=identicon&r=PG", "display_name": "Marco Dinatsoli", "link": "https://stackoverflow.com/users/2038257/marco-dinatsoli"}, "edited": false, "score": 0, "creation_date": 1438211081, "post_id": 31712549, "comment_id": 51363122, "body": "<a href=\"http://stackoverflow.com/questions/17315635/csv-new-line-character-seen-in-unquoted-field-error\" title=\"csv new line character seen in unquoted field error\">stackoverflow.com/questions/17315635/&hellip;</a>"}, {"owner": {"reputation": 9194, "user_id": 2038257, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/d7c4839a46ca7fc6d9a950aa362166ba?s=128&d=identicon&r=PG", "display_name": "Marco Dinatsoli", "link": "https://stackoverflow.com/users/2038257/marco-dinatsoli"}, "edited": false, "score": 0, "creation_date": 1438211254, "post_id": 31712549, "comment_id": 51363159, "body": "i tried to check the solution there, they say to change my rb to rU, but then i got a new error which is  File &quot;CsvToJson.py&quot;, line 5     with open(csvFilePath, &#39;r\u2019) as csvFile:                                             ^ SyntaxError: EOL while scanning string literal"}, {"owner": {"reputation": 9194, "user_id": 2038257, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/d7c4839a46ca7fc6d9a950aa362166ba?s=128&d=identicon&r=PG", "display_name": "Marco Dinatsoli", "link": "https://stackoverflow.com/users/2038257/marco-dinatsoli"}, "edited": false, "score": 0, "creation_date": 1438211326, "post_id": 31712549, "comment_id": 51363183, "body": "SyntaxError: EOL while scanning string literal Williams-MacBook-Pro:ExcelToJson williamkinaan$ python CsvToJson.py    File &quot;CsvToJson.py&quot;, line 5     with open(csvFilePath, &#39;rU\u2019) as csvFile:                                              ^ SyntaxError: EOL while scanning string literal"}, {"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "reply_to_user": {"reputation": 9194, "user_id": 2038257, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/d7c4839a46ca7fc6d9a950aa362166ba?s=128&d=identicon&r=PG", "display_name": "Marco Dinatsoli", "link": "https://stackoverflow.com/users/2038257/marco-dinatsoli"}, "edited": false, "score": 0, "creation_date": 1438211481, "post_id": 31712549, "comment_id": 51363227, "body": "You&#39;ll have to indicate the correct dialect that was used to create your CSV file. If it was created manually, without a specific dialect, you&#39;ll have to fix it manually, adhering to a specific dialect. A program like Excel may be able to help you there."}, {"owner": {"reputation": 9194, "user_id": 2038257, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/d7c4839a46ca7fc6d9a950aa362166ba?s=128&d=identicon&r=PG", "display_name": "Marco Dinatsoli", "link": "https://stackoverflow.com/users/2038257/marco-dinatsoli"}, "edited": false, "score": 0, "creation_date": 1438211641, "post_id": 31712549, "comment_id": 51363269, "body": "what is that <code>dialect</code> ? please . i tried to re save it using microsoft office on my mac os and still the same problem"}, {"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "reply_to_user": {"reputation": 9194, "user_id": 2038257, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/d7c4839a46ca7fc6d9a950aa362166ba?s=128&d=identicon&r=PG", "display_name": "Marco Dinatsoli", "link": "https://stackoverflow.com/users/2038257/marco-dinatsoli"}, "edited": false, "score": 0, "creation_date": 1438212052, "post_id": 31712549, "comment_id": 51363373, "body": "As an argument to the <code>csv.reader()</code> call, as seen in the linked answer."}], "tags": [], "owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "is_accepted": true, "score": 5, "last_activity_date": 1438210582, "creation_date": 1438210582, "answer_id": 31712549, "question_id": 31712534, "link": "https://stackoverflow.com/questions/31712534/python-syntax-error-after-adding-coding-utf-8/31712549#31712549", "title": "python syntax error after adding # -*- coding: utf-8 -*-", "body": "<p>Here is the culprit:</p>\n\n<pre><code>delimiter= \u2018;\u2019,\n</code></pre>\n\n<p>You need straight quotes, not smart quotes:</p>\n\n<pre><code>delimiter= ';',\n</code></pre>\n"}], "owner": {"reputation": 9194, "user_id": 2038257, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/d7c4839a46ca7fc6d9a950aa362166ba?s=128&d=identicon&r=PG", "display_name": "Marco Dinatsoli", "link": "https://stackoverflow.com/users/2038257/marco-dinatsoli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2198, "favorite_count": 0, "accepted_answer_id": 31712549, "answer_count": 1, "score": 2, "last_activity_date": 1438210582, "creation_date": 1438210531, "question_id": 31712534, "link": "https://stackoverflow.com/questions/31712534/python-syntax-error-after-adding-coding-utf-8", "title": "python syntax error after adding # -*- coding: utf-8 -*-", "body": "<p>I am readying a cvs file,</p>\n\n<p>this is my code:</p>\n\n<pre><code>import csv\nclass CsvToJson:\n    def __init__(self, csvFilePath):\n        with open(csvFilePath, 'rb') as csvFile:\n            spamreader = csv.reader(csvFile, delimiter= \u2018;\u2019, quotechar = '|')\n            for row in spamreader:\n                print ', '.join(row)\n\nk = CsvToJson(csvFilePath = 'carsModelsMakes.csv')\n</code></pre>\n\n<p>I got this error</p>\n\n<pre><code>SyntaxError: Non-ASCII character '\\xe2' in file CsvToJson.py on line 7, but no encoding declared; see http://python.org/dev/peps/pep-0263/ for details\n</code></pre>\n\n<p>on the fifth line.</p>\n\n<p>I read on internet and it seems the solution is to use </p>\n\n<pre><code># -*- coding: utf-8 -*- \n</code></pre>\n\n<p>in the beginning of the file.</p>\n\n<p>I did that but then i got this error:</p>\n\n<pre><code>File \"CsvToJson.py\", line 6\n    spamreader = csv.reader(csvFile, delimiter= \u2018;\u2019, quotechar = '|')\nSyntaxError: invalid syntax\n</code></pre>\n\n<p>could you help please </p>\n"}, {"tags": ["python", "algorithm", "python-3.x"], "comments": [{"owner": {"reputation": 105769, "user_id": 1267329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f943c14b945cadc0ee0afa6ef70d2103?s=128&d=identicon&r=PG", "display_name": "Simeon Visser", "link": "https://stackoverflow.com/users/1267329/simeon-visser"}, "edited": false, "score": 0, "creation_date": 1438210595, "post_id": 31712528, "comment_id": 51362987, "body": "Could you include sample code that would create the tree?"}, {"owner": {"reputation": 581, "user_id": 1801864, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8f94be3717c4134dfd9040131714e4e2?s=128&d=identicon&r=PG", "display_name": "JonS", "link": "https://stackoverflow.com/users/1801864/jons"}, "reply_to_user": {"reputation": 105769, "user_id": 1267329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f943c14b945cadc0ee0afa6ef70d2103?s=128&d=identicon&r=PG", "display_name": "Simeon Visser", "link": "https://stackoverflow.com/users/1267329/simeon-visser"}, "edited": false, "score": 0, "creation_date": 1438210720, "post_id": 31712528, "comment_id": 51363028, "body": "The dataset I&#39;m showing is the tree data parsed into the structures I&#39;m using.  The code to generate that dataset isn&#39;t relevant to the problem, and is pretty long and involved and wouldn&#39;t help the issue.."}, {"owner": {"reputation": 1331, "user_id": 2946845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9e046d4607e289fcb6989d7a563723f?s=128&d=identicon&r=PG&f=1", "display_name": "SteJ", "link": "https://stackoverflow.com/users/2946845/stej"}, "edited": false, "score": 0, "creation_date": 1438210907, "post_id": 31712528, "comment_id": 51363081, "body": "I&#39;ve posted an answer but I&#39;m not sure I&#39;m fully understanding what you need - please could you explain why the two result sets are showing different results? Or are you just asking how to return tuples instead of lists?"}, {"owner": {"reputation": 105769, "user_id": 1267329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f943c14b945cadc0ee0afa6ef70d2103?s=128&d=identicon&r=PG", "display_name": "Simeon Visser", "link": "https://stackoverflow.com/users/1267329/simeon-visser"}, "edited": false, "score": 0, "creation_date": 1438211074, "post_id": 31712528, "comment_id": 51363120, "body": "@JonS: yes it would because then someone could write a few lines of code to produce that outcome. Now we can only wave hands."}, {"owner": {"reputation": 581, "user_id": 1801864, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8f94be3717c4134dfd9040131714e4e2?s=128&d=identicon&r=PG", "display_name": "JonS", "link": "https://stackoverflow.com/users/1801864/jons"}, "edited": false, "score": 0, "creation_date": 1438211152, "post_id": 31712528, "comment_id": 51363133, "body": "The second results has done further processing to go all the way back up the tree so it&#39;s showing everything above it that is using it, rather than just the one level above it.  For example, 2 is used by 5, but 5 is used by 1, so 2 is being used by 5 directly, and 1 indirectly."}, {"owner": {"reputation": 581, "user_id": 1801864, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8f94be3717c4134dfd9040131714e4e2?s=128&d=identicon&r=PG", "display_name": "JonS", "link": "https://stackoverflow.com/users/1801864/jons"}, "reply_to_user": {"reputation": 105769, "user_id": 1267329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f943c14b945cadc0ee0afa6ef70d2103?s=128&d=identicon&r=PG", "display_name": "Simeon Visser", "link": "https://stackoverflow.com/users/1267329/simeon-visser"}, "edited": false, "score": 0, "creation_date": 1438211278, "post_id": 31712528, "comment_id": 51363167, "body": "@SimeonVisser Yes, I want those few lines of code.  The input dataset I&#39;m showing has already been processed a lot to get it to be that simple.  I&#39;m looking for the next step in the process to get me to the final output I need.  That hand-waving can&#39;t be done earlier in the process."}, {"owner": {"reputation": 105769, "user_id": 1267329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f943c14b945cadc0ee0afa6ef70d2103?s=128&d=identicon&r=PG", "display_name": "Simeon Visser", "link": "https://stackoverflow.com/users/1267329/simeon-visser"}, "edited": false, "score": 0, "creation_date": 1438211494, "post_id": 31712528, "comment_id": 51363230, "body": "@JonS: you do see that this question is much easier to answer when someone has a (simplified) tree object, as constructed by you, in their Python shell to write the lines that generate your desired outcome?"}, {"owner": {"reputation": 581, "user_id": 1801864, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8f94be3717c4134dfd9040131714e4e2?s=128&d=identicon&r=PG", "display_name": "JonS", "link": "https://stackoverflow.com/users/1801864/jons"}, "reply_to_user": {"reputation": 105769, "user_id": 1267329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f943c14b945cadc0ee0afa6ef70d2103?s=128&d=identicon&r=PG", "display_name": "Simeon Visser", "link": "https://stackoverflow.com/users/1267329/simeon-visser"}, "edited": false, "score": 0, "creation_date": 1438211948, "post_id": 31712528, "comment_id": 51363342, "body": "@SimeonVisser If you answered &quot;how do I create the tree object?&quot; then you would have answered the question I&#39;m asking.  I&#39;m not asking how to print the data."}, {"owner": {"reputation": 1331, "user_id": 2946845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9e046d4607e289fcb6989d7a563723f?s=128&d=identicon&r=PG&f=1", "display_name": "SteJ", "link": "https://stackoverflow.com/users/2946845/stej"}, "edited": false, "score": 0, "creation_date": 1438212350, "post_id": 31712528, "comment_id": 51363440, "body": "Sorry - I understand now -- you need the &quot;linked items&quot; AND any that are linked by association - I have deleted my erroneous answer."}], "answers": [{"comments": [{"owner": {"reputation": 581, "user_id": 1801864, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8f94be3717c4134dfd9040131714e4e2?s=128&d=identicon&r=PG", "display_name": "JonS", "link": "https://stackoverflow.com/users/1801864/jons"}, "edited": false, "score": 0, "creation_date": 1438211656, "post_id": 31712683, "comment_id": 51363273, "body": "If there isn&#39;t a single root, can I just iterate through the set?"}, {"owner": {"reputation": 4093, "user_id": 4582273, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b94fcc64a380a38b013479fbbcfffa9b?s=128&d=identicon&r=PG", "display_name": "lemonhead", "link": "https://stackoverflow.com/users/4582273/lemonhead"}, "reply_to_user": {"reputation": 581, "user_id": 1801864, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8f94be3717c4134dfd9040131714e4e2?s=128&d=identicon&r=PG", "display_name": "JonS", "link": "https://stackoverflow.com/users/1801864/jons"}, "edited": false, "score": 0, "creation_date": 1438211776, "post_id": 31712683, "comment_id": 51363297, "body": "Hmm.. I don&#39;t think that will work to get the full list of upstream dependencies as it would short-circuit when it hits a node where <code>upstream</code> is already populated, and then would miss upstream dependencies.  Is your data a tree or a graph?  Or is it a forest?"}, {"owner": {"reputation": 581, "user_id": 1801864, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8f94be3717c4134dfd9040131714e4e2?s=128&d=identicon&r=PG", "display_name": "JonS", "link": "https://stackoverflow.com/users/1801864/jons"}, "edited": false, "score": 0, "creation_date": 1438212098, "post_id": 31712683, "comment_id": 51363380, "body": "It&#39;s a group of subversion repos and I&#39;m parsing the externals.  I suppose I can do one repo at a time and that will give me a single root.  I had just been hoping to do all the repos together."}, {"owner": {"reputation": 581, "user_id": 1801864, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8f94be3717c4134dfd9040131714e4e2?s=128&d=identicon&r=PG", "display_name": "JonS", "link": "https://stackoverflow.com/users/1801864/jons"}, "edited": false, "score": 0, "creation_date": 1438212720, "post_id": 31712683, "comment_id": 51363526, "body": "The other problem is that there aren&#39;t any actual links in the data, it&#39;s &quot;linked&quot; only because they are the same id (numbers in my example here, strings in my real data)."}, {"owner": {"reputation": 4093, "user_id": 4582273, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b94fcc64a380a38b013479fbbcfffa9b?s=128&d=identicon&r=PG", "display_name": "lemonhead", "link": "https://stackoverflow.com/users/4582273/lemonhead"}, "reply_to_user": {"reputation": 581, "user_id": 1801864, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8f94be3717c4134dfd9040131714e4e2?s=128&d=identicon&r=PG", "display_name": "JonS", "link": "https://stackoverflow.com/users/1801864/jons"}, "edited": false, "score": 0, "creation_date": 1438214189, "post_id": 31712683, "comment_id": 51363881, "body": "when you parse it, you could make it a link of actual objects though right? Or you could always create a <code>dict</code> mapping id to the actual object or hash your objs based on id"}], "tags": [], "owner": {"reputation": 4093, "user_id": 4582273, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b94fcc64a380a38b013479fbbcfffa9b?s=128&d=identicon&r=PG", "display_name": "lemonhead", "link": "https://stackoverflow.com/users/4582273/lemonhead"}, "is_accepted": false, "score": 1, "last_activity_date": 1438211409, "creation_date": 1438211409, "answer_id": 31712683, "question_id": 31712528, "link": "https://stackoverflow.com/questions/31712528/how-to-reverse-tree-like-linkages-in-a-set/31712683#31712683", "title": "How to reverse tree-like linkages in a set?", "body": "<p>One way to do this is add a new instance variable to your custom object type called something like <code>upstream</code>, which is initialized to <code>None</code>.</p>\n\n<p>Then start at the root of the tree and recursively follow the links down, in a depth-first traversal, appending each new link as you go to a running list and populating the upstream for each to a copy of the running list.  When you hit nodes that already have <code>upstream</code> set to <code>not None</code> you can avoid recursing.</p>\n"}, {"comments": [{"owner": {"reputation": 581, "user_id": 1801864, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8f94be3717c4134dfd9040131714e4e2?s=128&d=identicon&r=PG", "display_name": "JonS", "link": "https://stackoverflow.com/users/1801864/jons"}, "edited": false, "score": 0, "creation_date": 1438281841, "post_id": 31713220, "comment_id": 51398870, "body": "My objects are a little more complicated, so I should be able to create my_objs as a dictionary of arbitrary numbers mapped to the Obj1, Obj2, etc., right?  And just modify your code to go a level into the dictionary?"}], "tags": [], "owner": {"reputation": 11357, "user_id": 584846, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/uD1uQ.jpg?s=128&g=1", "display_name": "Brent Washburne", "link": "https://stackoverflow.com/users/584846/brent-washburne"}, "is_accepted": true, "score": 1, "last_activity_date": 1438214943, "creation_date": 1438214943, "answer_id": 31713220, "question_id": 31712528, "link": "https://stackoverflow.com/questions/31712528/how-to-reverse-tree-like-linkages-in-a-set/31713220#31713220", "title": "How to reverse tree-like linkages in a set?", "body": "<p>If you code the objects like this:</p>\n\n<pre><code>Obj1 = {1: [3,5,7,9]}\nObj2 = {2: [4,9]}\n...\n</code></pre>\n\n<p>then you can combine them all into a single dictionary:</p>\n\n<pre><code>my_objs = {1: [3,5,7,9], 2: [4,9], ...}\n</code></pre>\n\n<p>Now you can create the reverse tree like this:</p>\n\n<pre><code>tree = {}\nfor id, lnks in my_objs.items():\n    for lnk in lnks:\n        uplnks = tree.get(lnk, [])\n        uplnks.append(id)\n        tree[lnk] = uplnks\n</code></pre>\n\n<p>Finally, you can print the tree:</p>\n\n<pre><code>def used_by(tree, id, all_lnks=None):\n    if all_lnks is None:\n        all_lnks = set()\n    lnks = tree.get(id)\n    if not lnks:\n        return all_lnks\n    all_lnks.update(lnks)\n    for lnk in lnks:\n        all_lnks = used_by(tree, lnk, all_lnks)\n    return all_lnks\n\nfor id in tree.keys():\n    print id, 'is used by', list(used_by(tree, id))\n</code></pre>\n"}], "owner": {"reputation": 581, "user_id": 1801864, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8f94be3717c4134dfd9040131714e4e2?s=128&d=identicon&r=PG", "display_name": "JonS", "link": "https://stackoverflow.com/users/1801864/jons"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 31713220, "answer_count": 2, "score": 2, "last_activity_date": 1438214943, "creation_date": 1438210486, "last_edit_date": 1438211232, "question_id": 31712528, "link": "https://stackoverflow.com/questions/31712528/how-to-reverse-tree-like-linkages-in-a-set", "title": "How to reverse tree-like linkages in a set?", "body": "<p>I have a python script that is parsing a block of data and creating a set of objects.  These objects are instances of a class that has an identifier and a list of other identifiers.  The identifiers are strings, if it matters.  The data is similar to a directory tree, but one that has many symbolic links.  The problem is that the symbolic links only go one way, down the tree.  I need to be able to look at the bottom id and say what links to it.  I can't find a good explanation of the algorithm to do this that would easily translate into my python script (mainly because I'm not a python programmer, I normally use C).</p>\n\n<p>Here's a sample dataset:</p>\n\n<pre><code>Obj1: id=1, lnk=[3,5,7,9]\nObj2: id=2, lnk=[4,9]\nObj3: id=3, lnk=[4,8,9]\nObj4: id=4, lnk=[6,7]\nObj5: id=5, lnk=[2]\n...\nmy_set = set(Obj1, Obj2, Obj3, Obj4, Obj5, ...)\n</code></pre>\n\n<p>Read these as \"1 is using 3, 5, 7, and 9\", \"2 is using 4 and 9\", etc.</p>\n\n<p>I need to be able to output either:</p>\n\n<pre><code>9 is used by [1,2,3]\n8 is used by [3]\n7 is used by [1,4]\n6 is used by [4]\n5 is used by [1]\n4 is used by [2,3]\n3 is used by [1]\n2 is used by [5]\n</code></pre>\n\n<p>or (these are sets, not tuples):</p>\n\n<pre><code>9 is used by (1,2,3,5)\n8 is used by (1,3)\n7 is used by (1,2,3,4,5)\n6 is used by (1,2,3,4,5)\n5 is used by (1)\n4 is used by (1,2,3,5)\n3 is used by (1)\n2 is used by (1,5)\n</code></pre>\n\n<p>The first seems simpler to get, but the second is what I really want.</p>\n"}, {"tags": ["python", "arrays", "json"], "comments": [{"owner": {"reputation": 7261, "user_id": 3577601, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u0SS2.jpg?s=128&g=1", "display_name": "Patrick Maupin", "link": "https://stackoverflow.com/users/3577601/patrick-maupin"}, "edited": false, "score": 0, "creation_date": 1438210013, "post_id": 31712387, "comment_id": 51362813, "body": "In Python, <code>()</code> defines a tuple.  JSON might require a list, e.g. <code>[]</code>  Hmmm, that doesn&#39;t seem to be the problem.  You&#39;re getting an API error, not a Python error, right?"}], "answers": [{"tags": [], "owner": {"reputation": 564, "user_id": 2258475, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/15d8349c5774d9702b147a72c3b9fdf9?s=128&d=identicon&r=PG", "display_name": "aruizga", "link": "https://stackoverflow.com/users/2258475/aruizga"}, "is_accepted": false, "score": 0, "last_activity_date": 1438268235, "creation_date": 1438268235, "answer_id": 31727238, "question_id": 31712387, "link": "https://stackoverflow.com/questions/31712387/array-of-tags-in-json/31727238#31727238", "title": "Array of tags in JSON", "body": "<p>This is another example:</p>\n\n<pre><code>    from urllib2 import Request, urlopen\nfrom json import dumps\nvalues = dumps({\n    \"title\": \"How to make a Great Dish?\",\n    \"body\": \"To please my family&amp;friends...\",\n    \"topics\": \"cooking\",\n    \"attachments\":[{\"fileName\":\"example.png\",\"mimeType\":\"image/png\",\"content\":\"/9j/4AAQS....A21C=\"}]\n})\nheaders = {\"Accept\": \"application/json\", \"Content-type\": \"application/json\"}\nrequest = Request(\"http://private-4f9cf-answerhubapiv2.apiary-mock.com/services/v2/question[.json|.xml]\", data=values, headers=headers)\nresponse_body = urlopen(request).read()\nprint response_body\n</code></pre>\n\n<p>How can I put multiple topics?</p>\n"}], "owner": {"reputation": 564, "user_id": 2258475, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/15d8349c5774d9702b147a72c3b9fdf9?s=128&d=identicon&r=PG", "display_name": "aruizga", "link": "https://stackoverflow.com/users/2258475/aruizga"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1438268235, "creation_date": 1438209726, "last_edit_date": 1438210915, "question_id": 31712387, "link": "https://stackoverflow.com/questions/31712387/array-of-tags-in-json", "title": "Array of tags in JSON", "body": "<p>How can I put this <code>[IT,trends]</code> in Python in a form of JSON dumps?</p>\n\n<p>That is what I have in the documentation:</p>\n\n<blockquote>\n  <p>topics    String[]    example: [IT,trends]    array of Topic names (tags) for the Node</p>\n</blockquote>\n\n<p>I am trying the following but it doesn't work (I am doing a request to an API):</p>\n\n<pre><code>values = dumps({\n        \"title\": \"question title\",\n        \"body\": \"body title\",\n        \"username\": \"3100002UNY\",\n        \"topics\": (\"SPSS\",\"TEST\")\n        })\n</code></pre>\n\n<p>When I put only one topic...it works good! But I need to put more than one. Any idea?</p>\n"}, {"tags": ["python", "matplotlib", "reportlab"], "answers": [{"tags": [], "owner": {"reputation": 7721, "user_id": 1896222, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/d9cd9f8374134b1a04199a235baca452?s=128&d=identicon&r=PG", "display_name": "max", "link": "https://stackoverflow.com/users/1896222/max"}, "is_accepted": false, "score": 1, "last_activity_date": 1439168183, "last_edit_date": 1495542861, "creation_date": 1439168183, "answer_id": 31910275, "question_id": 31712386, "link": "https://stackoverflow.com/questions/31712386/loading-matplotlib-object-into-reportlab/31910275#31910275", "title": "loading matplotlib object into reportlab", "body": "<p>I found 2 solutions:</p>\n\n<p>1: using a package called pdfrw:\n<a href=\"https://stackoverflow.com/questions/4690585/is-there-a-matplotlib-flowable-for-reportlab\">Is there a matplotlib flowable for ReportLab?</a></p>\n\n<p>2: a simpler cleaner way:</p>\n\n<pre><code>class PdfImage(Flowable):\n    def __init__(self, img_data, width=200, height=200):\n        self.img_width = width\n        self.img_height = height\n        self.img_data = img_data\n\n    def wrap(self, width, height):\n        return self.img_width, self.img_height\n\n    def drawOn(self, canv, x, y, _sW=0):\n        if _sW &gt; 0 and hasattr(self, 'hAlign'):\n            a = self.hAlign\n            if a in ('CENTER', 'CENTRE', TA_CENTER):\n                x += 0.5*_sW\n            elif a in ('RIGHT', TA_RIGHT):\n                x += _sW\n            elif a not in ('LEFT', TA_LEFT):\n                raise ValueError(\"Bad hAlign value \" + str(a))\n        canv.saveState()\n        canv.drawImage(self.img_data, x, y, self.img_width, self.img_height)\n        canv.restoreState()\n\n\ndef make_report():\n    fig = plt.figure(figsize=(4, 3))\n    plt.plot([1,2,3,4],[1,4,9,26])\n    plt.ylabel('some numbers')\n    imgdata = cStringIO.StringIO()\n    fig.savefig(imgdata, format='png')\n    imgdata.seek(0)\n    image = ImageReader(imgdata)\n\n    doc = SimpleDocTemplate(\"hello.pdf\")\n    style = styles[\"Normal\"]\n    story = [Spacer(0, inch)]\n    img = PdfImage(image, width=200, height=200)\n\n    for i in range(10):\n        bogustext = (\"Paragraph number %s. \" % i)\n        p = Paragraph(bogustext, style)\n        story.append(p)\n        story.append(Spacer(1,0.2*inch))\n\n    story.append(img)\n\n    for i in range(10):\n        bogustext = (\"Paragraph number %s. \" % i)\n        p = Paragraph(bogustext, style)\n        story.append(p)\n        story.append(Spacer(1,0.2*inch))\n\n    doc.build(story, onFirstPage=myFirstPage, onLaterPages=myLaterPages, canvasmaker=PageNumCanvas)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7721, "user_id": 1896222, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/d9cd9f8374134b1a04199a235baca452?s=128&d=identicon&r=PG", "display_name": "max", "link": "https://stackoverflow.com/users/1896222/max"}, "edited": false, "score": 0, "creation_date": 1439840632, "post_id": 32021013, "comment_id": 52015713, "body": "That&#39;s a pretty good point. The plot axis labels are rendered as text proving that you&#39;re right - pdfrw does keep the actual information in the pdf. I was not sure about this. Thanks"}, {"owner": {"reputation": 23077, "user_id": 492620, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/23e8d9c545b0a9d603765abaadc3f499?s=128&d=identicon&r=PG", "display_name": "oz123", "link": "https://stackoverflow.com/users/492620/oz123"}, "edited": false, "score": 0, "creation_date": 1471076932, "post_id": 32021013, "comment_id": 65217794, "body": "yep, pdfew docs suck. Creating PDF in Python is in a sorry state ..."}, {"owner": {"reputation": 1258, "user_id": 5823517, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/177eb27f5cdf6cab6a2d66535a420311?s=128&d=identicon&r=PG&f=1", "display_name": "Tunn", "link": "https://stackoverflow.com/users/5823517/tunn"}, "edited": false, "score": 1, "creation_date": 1515513964, "post_id": 32021013, "comment_id": 83323927, "body": "This is nice, what a difference in quality.  Thanks for sharing."}, {"owner": {"reputation": 331, "user_id": 1902611, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a169d0523b576f1a558a1dcd00b1789?s=128&d=identicon&r=PG", "display_name": "Larry Meyn", "link": "https://stackoverflow.com/users/1902611/larry-meyn"}, "edited": false, "score": 0, "creation_date": 1528489351, "post_id": 32021013, "comment_id": 88543216, "body": "Many thanks to Patrick for his pdfrw code, his examples (here and for pdfrw) and his kind words about my somewhat complicated code. I noticed that his comment about possibly using matplotlib PdfPages to reduce PDF size when inserting multiple plots, so I added a new answer using this idea base on the example given here. See: <a href=\"https://stackoverflow.com/a/50765404/1902611\">stackoverflow.com/a/50765404/1902611</a>"}, {"owner": {"reputation": 160, "user_id": 10941410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3accaafba04dc7cf237306af5f1ce852?s=128&d=identicon&r=PG&f=1", "display_name": "Murilo Sitonio", "link": "https://stackoverflow.com/users/10941410/murilo-sitonio"}, "edited": false, "score": 0, "creation_date": 1558643266, "post_id": 32021013, "comment_id": 99178900, "body": "Thanks for the code! I&#39;m having some trouble while trying to set the position of an image with the method drawOn. What should I pass to its first argument?"}, {"owner": {"reputation": 7261, "user_id": 3577601, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u0SS2.jpg?s=128&g=1", "display_name": "Patrick Maupin", "link": "https://stackoverflow.com/users/3577601/patrick-maupin"}, "edited": false, "score": 0, "creation_date": 1558645740, "post_id": 32021013, "comment_id": 99179899, "body": "drawOn parameters are in points (1/72 inch), and the origin is normally the lower left corner of the document. x values increase from left to right, and y values increase from bottom to top."}, {"owner": {"reputation": 160, "user_id": 10941410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3accaafba04dc7cf237306af5f1ce852?s=128&d=identicon&r=PG&f=1", "display_name": "Murilo Sitonio", "link": "https://stackoverflow.com/users/10941410/murilo-sitonio"}, "edited": false, "score": 0, "creation_date": 1558702579, "post_id": 32021013, "comment_id": 99198664, "body": "@PatrickMaupin thanks for your answer! But I&#39;m having problems with the canv argument. I made a more complet answer here: <a href=\"https://stackoverflow.com/questions/56293130/how-to-set-the-position-of-an-image-in-reportlab-using-pdfrw\" title=\"how to set the position of an image in reportlab using pdfrw\">stackoverflow.com/questions/56293130/&hellip;</a>  If you could help I will be immensely grateful!"}, {"owner": {"reputation": 240, "user_id": 4398475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47aeee30dee1a2dc251be4ccbf4161eb?s=128&d=identicon&r=PG&f=1", "display_name": "Rriskit", "link": "https://stackoverflow.com/users/4398475/rriskit"}, "edited": false, "score": 0, "creation_date": 1611073864, "post_id": 32021013, "comment_id": 116330562, "body": "Tiny note for users of a recent python: import StringIO needs to be replaced with import io, the call to the Image is then via imgdata = io.BytesIO()"}], "tags": [], "owner": {"reputation": 7261, "user_id": 3577601, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u0SS2.jpg?s=128&g=1", "display_name": "Patrick Maupin", "link": "https://stackoverflow.com/users/3577601/patrick-maupin"}, "is_accepted": true, "score": 13, "last_activity_date": 1439607925, "last_edit_date": 1495540030, "creation_date": 1439606829, "answer_id": 32021013, "question_id": 31712386, "link": "https://stackoverflow.com/questions/31712386/loading-matplotlib-object-into-reportlab/32021013#32021013", "title": "loading matplotlib object into reportlab", "body": "<h1>pdfrw documentation sucks</h1>\n\n<p>The sole reason the <a href=\"https://stackoverflow.com/a/13870512/3577601\">pdfrw example</a> discussed in <a href=\"https://stackoverflow.com/a/31910275/3577601\">the first answer to this question</a> is a bit klunky is because the <a href=\"https://github.com/pmaupin/pdfrw/\" rel=\"noreferrer\">pdfrw</a> documentation sucks badly.  Due to the sucky doc, that example's author @Larry-Meyn used the vectorpdf extension for rst2pdf as as starting point, and <em>that</em> extension is not really documented either, <em>and</em> has to deal with the quirks of rst2pdf as well as pdfrw (and is more general than you need, in that it can let rst2pdf display an arbitrary rectangle from an arbitray page of a preexisting PDF).  It's amazing that Larry managed to make it work at all, and my hat's off to him.</p>\n\n<p>I am perfectly qualified to say this, because I am the author of pdfrw and made a few contributions to rst2pdf, including that vectorpdf extension.</p>\n\n<h1>But you probably want to use pdfrw anyway</h1>\n\n<p>I wasn't really paying attention to stackoverflow until a month ago, and pdfrw itself languished for a few years, but I'm here now, and I think it would behoove you to take another look at pdfrw, even though the documentation still sucks.</p>\n\n<p>Why?  <strong>Because if you output to a png file, your image will be <em>rasterized</em>, and if you use pdfrw, it will remain in <em>vector format</em>, which means that it will look nice at any scale.</strong></p>\n\n<h1>So I modified your answer's png example</h1>\n\n<p>Your png example wasn't quite a complete program -- the parameters to doc.build weren't defined, styles wasn't defined, it was missing a few imports, etc.  But it was close enough to garner some intent and get it working.</p>\n\n<p><strong>Edit</strong> -- <em>I just noticed that this example was actually a modified version of Larry's example, so <a href=\"https://stackoverflow.com/a/13870512/3577601\">that example</a> is still very valuable because it's a bit more full-featured than this in some ways.</em></p>\n\n<p>After I fixed those issues and got some output, I added an option to be able to use png or pdf, so you can see the difference.  The program below will create two different PDF files, and you can compare the results for yourself.</p>\n\n<pre><code>import cStringIO\nfrom matplotlib import pyplot as plt\nfrom reportlab.pdfgen import canvas\nfrom reportlab.lib.utils import ImageReader\nfrom reportlab.platypus import Paragraph, SimpleDocTemplate, Spacer, Image, Flowable\nfrom reportlab.lib.units import inch\nfrom reportlab.lib.styles import getSampleStyleSheet\n\nfrom pdfrw import PdfReader, PdfDict\nfrom pdfrw.buildxobj import pagexobj\nfrom pdfrw.toreportlab import makerl\n\nstyles = getSampleStyleSheet()\nstyle = styles['Normal']\n\ndef form_xo_reader(imgdata):\n    page, = PdfReader(imgdata).pages\n    return pagexobj(page)\n\n\nclass PdfImage(Flowable):\n    def __init__(self, img_data, width=200, height=200):\n        self.img_width = width\n        self.img_height = height\n        self.img_data = img_data\n\n    def wrap(self, width, height):\n        return self.img_width, self.img_height\n\n    def drawOn(self, canv, x, y, _sW=0):\n        if _sW &gt; 0 and hasattr(self, 'hAlign'):\n            a = self.hAlign\n            if a in ('CENTER', 'CENTRE', TA_CENTER):\n                x += 0.5*_sW\n            elif a in ('RIGHT', TA_RIGHT):\n                x += _sW\n            elif a not in ('LEFT', TA_LEFT):\n                raise ValueError(\"Bad hAlign value \" + str(a))\n        canv.saveState()\n        img = self.img_data\n        if isinstance(img, PdfDict):\n            xscale = self.img_width / img.BBox[2]\n            yscale = self.img_height / img.BBox[3]\n            canv.translate(x, y)\n            canv.scale(xscale, yscale)\n            canv.doForm(makerl(canv, img))\n        else:\n            canv.drawImage(img, x, y, self.img_width, self.img_height)\n        canv.restoreState()\n\ndef make_report(outfn, use_pdfrw):\n    fig = plt.figure(figsize=(4, 3))\n    plt.plot([1,2,3,4],[1,4,9,26])\n    plt.ylabel('some numbers')\n    imgdata = cStringIO.StringIO()\n    fig.savefig(imgdata, format='pdf' if use_pdfrw else 'png')\n    imgdata.seek(0)\n    reader = form_xo_reader if use_pdfrw else ImageReader\n    image = reader(imgdata)\n\n    doc = SimpleDocTemplate(outfn)\n    style = styles[\"Normal\"]\n    story = [Spacer(0, inch)]\n    img = PdfImage(image, width=200, height=200)\n\n    for i in range(10):\n        bogustext = (\"Paragraph number %s. \" % i)\n        p = Paragraph(bogustext, style)\n        story.append(p)\n        story.append(Spacer(1,0.2*inch))\n\n    story.append(img)\n\n    for i in range(10):\n        bogustext = (\"Paragraph number %s. \" % i)\n        p = Paragraph(bogustext, style)\n        story.append(p)\n        story.append(Spacer(1,0.2*inch))\n\n    doc.build(story)\n\nmake_report(\"hello_png.pdf\", False)\nmake_report(\"hello_pdf.pdf\", True)\n</code></pre>\n\n<h1>What are the downsides to this approach?</h1>\n\n<p>The first obvious downside is that there is now a requirement for pdfrw, but that's available from PyPI.</p>\n\n<p>The next downside is that if you are putting a lot of matplotlib plots into a document, I think this technique will replicate resources such as fonts, because I don't believe that reportlab is smart enough to notice the duplicates.</p>\n\n<p>I believe this problem can be solved by outputting all your plots to <a href=\"http://matplotlib.org/examples/pylab_examples/multipage_pdf.html\" rel=\"noreferrer\">different pages of a single PDF</a>.  I haven't actually tried that with matplotlib, but pdfrw is perfectly capable of converting <a href=\"https://github.com/pmaupin/pdfrw/blob/master/examples/rl1/subset.py\" rel=\"noreferrer\">each page of an existing pdf to a separate flowable</a>.</p>\n\n<p>So if you have a lot of plots and it's making your final PDF too big, you could look into that, or just try one of the PDF optimizers out there and see if it helps.  In any case, that's a different problem for a different day.</p>\n"}], "owner": {"reputation": 7721, "user_id": 1896222, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/d9cd9f8374134b1a04199a235baca452?s=128&d=identicon&r=PG", "display_name": "max", "link": "https://stackoverflow.com/users/1896222/max"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5353, "favorite_count": 0, "closed_date": 1439643294, "accepted_answer_id": 32021013, "answer_count": 2, "score": 3, "last_activity_date": 1509569193, "creation_date": 1438209724, "last_edit_date": 1509569193, "question_id": 31712386, "link": "https://stackoverflow.com/questions/31712386/loading-matplotlib-object-into-reportlab", "closed_reason": "Duplicate", "title": "loading matplotlib object into reportlab", "body": "<p>I'm trying to load a matplotlib object into reportlab.\nHere is my code:</p>\n\n<pre><code>from reportlab.pdfgen import canvas\nfrom reportlab.lib.utils import ImageReader\nfrom reportlab.platypus import Paragraph, SimpleDocTemplate, Spacer, Image\nfrom matplotlib import pyplot as plt\n\ndef __get_img_data():\n    \"\"\"\n    returns the binary image data of the plot\n    \"\"\"\n    img_file = NamedTemporaryFile(delete=False)\n    plt.savefig(img_file.name)\n    img_data = open(img_file.name + '.png', 'rb').read()\n    os.remove(img_file.name)\n    os.remove(img_file.name + '.png')\n    return img_data\n\ndef get_plot():\n    # HERE I PLOT SOME STUFF\n    img_data = __get_img_data()\n    plt.close()\n    return img_data\n\nclass NumberedCanvas(canvas.Canvas):\n    def __init__(self):\n        pass\n\nclass ReportTemplate:\n    def __init__(self):\n        pass\n    def _header_footer(self, canvas, doc):\n        pass\n\n    def get_data(self):\n        elements = []\n        elements.append('hello')\n        ## HERE I WANT TO ADD THE IMAGE\n        imgdata = get_plot()\n        with open('/tmp/x.png', 'wb') as fh:\n            fh.write(imgdata)\n        im = Image('/tmp/x.png', width=usable_width, height=usable_width)\n        elements.append(im)\n        os.remove('/tmp/x.png')\n        ######\n        doc.build(elements, onFirstPage=self._header_footer,\\\n                  onLaterPages=self._header_footer,\\\n                  canvasmaker=NumberedCanvas)\n        # blah blah\n        return obj\n</code></pre>\n\n<p>My goal is to insert the plot image into the report.\nThis works fine but I do not want to write to a temporary file.\nI tried installing PIL because I've read some people doing it with PIL's image library but as soon as I install PIL, I another part of my code breaks due to incompatible Pillow versions.</p>\n"}, {"tags": ["python", "r", "data-analysis", "data-cleaning"], "comments": [{"owner": {"reputation": 925, "user_id": 995879, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/fe109052aa41349a9ab832c4a6e51f68?s=128&d=identicon&r=PG", "display_name": "crock1255", "link": "https://stackoverflow.com/users/995879/crock1255"}, "edited": false, "score": 0, "creation_date": 1438211570, "post_id": 31712335, "comment_id": 51363250, "body": "I think I might have just been being so freaking dense. I don&#39;t know if this makes me happy or sad, but I think I got something to work. I&#39;d still be interested in a more elegant solution if anyone has one.  Thanks again! I think just writing the problem out, helped me. <code>mdf[, c(&quot;Aa&quot;, &quot;Ab&quot;, &quot;Ac&quot;)][is.na(mdf[, c(&quot;Aa&quot;, &quot;Ab&quot;, &quot;Ac&quot;)])] &lt;- mdf[, c(&quot;Ba&quot;, &quot;Bb&quot;, &quot;Bc&quot;)][is.na(mdf[, c(&quot;Aa&quot;, &quot;Ab&quot;, &quot;Ac&quot;)])]</code>"}], "answers": [{"comments": [{"owner": {"reputation": 925, "user_id": 995879, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/fe109052aa41349a9ab832c4a6e51f68?s=128&d=identicon&r=PG", "display_name": "crock1255", "link": "https://stackoverflow.com/users/995879/crock1255"}, "edited": false, "score": 0, "creation_date": 1438256394, "post_id": 31712710, "comment_id": 51381851, "body": "Thanks for this answer and even more for the explanation.  Could I ask how I would change the function to insert the row sums of cols2 into the Nas of cols1? Thanks again!"}], "tags": [], "owner": {"reputation": 108174, "user_id": 559784, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/bWX4d.png?s=128&g=1", "display_name": "Arun", "link": "https://stackoverflow.com/users/559784/arun"}, "is_accepted": true, "score": 1, "last_activity_date": 1438211602, "creation_date": 1438211602, "answer_id": 31712710, "question_id": 31712335, "link": "https://stackoverflow.com/questions/31712335/replace-values-from-one-list-of-columns-from-another-list-of-columns-based-on-co/31712710#31712710", "title": "Replace values from one list of columns from another list of columns based on conditions in R or python", "body": "<p>Here's one using <code>data.table v1.9.5</code> - installation instructions <a href=\"https://github.com/Rdatatable/data.table/wiki/Installation\" rel=\"nofollow\">here</a>: </p>\n\n<pre><code>require(data.table) # v1.9.5+\ncols1 = names(df1)[2:4]\ncols2 = names(df2)[2:4]\n\nfoo &lt;- function(x, y) {\n    nas = is.na(x)\n    x[nas] = y[nas]\n    x\n}\nsetDT(df1)[df2, c(cols1, cols2) := c(Map(foo, mget(cols1), \n                   mget(cols2)), mget(cols2)), on = \"ID\"]\n\n&gt; df1\n#          ID Aa Ab Ac no.match Ba Bb Bc\n# 1: Person.A  0  0  0        0  0 NA  0\n# 2: Person.B  1  1  1        1 NA  1  1\n# 3: Person.C  2  2  2        2  2  2  2\n# 4: Person.D  1  1  2        2  1  2  2\n# 5: Person.E  1  1  1        1  1  1  1\n# 6: Person.F  1  1  1        2 NA NA NA\n</code></pre>\n\n<ul>\n<li><p><code>setDT()</code> converts <code>df1</code> to a <em>data.table</em> by reference.</p></li>\n<li><p><code>setDT(df1)[df2, on = \"ID\"]</code> performs a join. For each row of <code>df2</code>, we find the matching rows in <code>df1</code> and extract the columns corresponding to matching rows..</p></li>\n<li><p>On the matching rows, we <em>update</em> columns in <code>cols1</code> and <em>add</em> new columns in <code>cols2</code> <em>by reference</em> using the <code>:=</code> operator. For updating columns, we extract the columns specified in <code>cols1</code> and <code>cols2</code> and replace <code>NA</code>s with the function <code>foo()</code>. For adding columns, we simply pull the columns <code>cols2</code>, using <code>mget()</code>. We concatenate the two lists using <code>c()</code>.</p></li>\n</ul>\n\n<p>If you're interested, have a look at the <a href=\"https://github.com/Rdatatable/data.table/wiki/Getting-started\" rel=\"nofollow\">HTML vignettes</a> to learn more.</p>\n"}], "owner": {"reputation": 925, "user_id": 995879, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/fe109052aa41349a9ab832c4a6e51f68?s=128&d=identicon&r=PG", "display_name": "crock1255", "link": "https://stackoverflow.com/users/995879/crock1255"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 165, "favorite_count": 0, "accepted_answer_id": 31712710, "answer_count": 1, "score": 1, "last_activity_date": 1438211602, "creation_date": 1438209383, "last_edit_date": 1438210750, "question_id": 31712335, "link": "https://stackoverflow.com/questions/31712335/replace-values-from-one-list-of-columns-from-another-list-of-columns-based-on-co", "title": "Replace values from one list of columns from another list of columns based on conditions in R or python", "body": "<p>(for pythonistas, the below code is in R's format before I get some #hatehard)</p>\n\n<p>This one has been frustrating me for a way too long.</p>\n\n<p>I have 2 datasets</p>\n\n<pre><code>df1 &lt;- data.frame(ID = c(\"Person.A\", \"Person.B\", \"Person.C\", \"Person.D\", \"Person.E\", \"Person.F\"),\n                  Aa = c(0,1,2,NA,1,1),\n                  Ab = c(0,NA,2,1,1,1),\n                  Ac = c(NA,NA,2,2,1,1),\n                  no.match = c(0,1,2,2,1,2))\n\ndf2 &lt;- data.frame(ID = c(\"Person.A\", \"Person.B\", \"Person.C\", \"Person.D\", \"Person.E\"),\n                  Ba = c(0,NA,2,1,1),\n                  Bb = c(NA,1,2,2,1),\n                  Bc = c(0,1,2,2,1))\n</code></pre>\n\n<p>I then merge these 2 datasets using <code>merge(df1, df2, all.x = T, by = \"ID\"</code> to get:</p>\n\n<pre><code>         ID Aa Ab Ac no.match Ba Bb Bc\n1 Person.A  0  0 NA        0  0 NA  0\n2 Person.B  1 NA NA        1 NA  1  1\n3 Person.C  2  2  2        2  2  2  2\n4 Person.D NA  1  2        2  1  2  2\n5 Person.E  1  1  1        1  1  1  1\n6 Person.F  1  1  1        2 NA NA NA\n</code></pre>\n\n<p>The actual datasets are much more complicated with lots of columns that have no matches in other columns. So I don't think I could do something that depends on the arrangement of the columns.</p>\n\n<p>Columns <code>Aa</code> and <code>Ba</code> contain the same information; and columns <code>Ab</code> and <code>Bb</code> do as well, and so on, but column <code>no.match</code> does not contain a matching column. </p>\n\n<p>I want to \"map\" the values from from the same row of <code>Ba</code> to <code>Aa</code> <em>if</em> <code>Aa</code> is NA and do the same for <code>Ab</code> and <code>Bb</code>, <code>Ac</code> and <code>Bc</code>, etc.</p>\n\n<p>The result DF in this case would look like:</p>\n\n<pre><code>        ID Aa Ab Ac no.match Ba Bb Bc\n1 Person.A  0  0  0      0    0 NA  0\n2 Person.B  1  1  1      1    NA  1  1\n3 Person.C  2  2  2      2    2  2  2\n4 Person.D  1  1  2      2    1  2 NA\n5 Person.E  1  1  1      1    1  1  1\n6 Person.F  1  1  1      2    NA NA NA\n</code></pre>\n\n<p>Where element <code>[4,2]</code> was replaced by element <code>[4,6]</code>\nThe rows and the columns need to match up.</p>\n\n<p>I've tried an embarrassingly large number of things: <code>apply</code>, <code>ifelse</code>, iterating through a list of columns <code>l1 = c('Aa','Ab','Ac'), l2 = c('Ba', 'Bb', 'Bc')</code></p>\n\n<p>I can do the one-off: <code>which(is.na(mdf$Aa)) &lt;- mdf[which(is.na(mdf$Aa)), c(\"Ba\")]</code></p>\n\n<p>But how can I do this iteratively?</p>\n\n<p>Thank you! (sorry for the long-windedness)</p>\n"}, {"tags": ["python", "django", "search", "dictionary"], "comments": [{"owner": {"reputation": 8989, "user_id": 1684058, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/lhdm7.jpg?s=128&g=1", "display_name": "Lim H.", "link": "https://stackoverflow.com/users/1684058/lim-h"}, "edited": false, "score": 0, "creation_date": 1438209416, "post_id": 31712322, "comment_id": 51362624, "body": "Share some code please."}, {"owner": {"reputation": 15, "user_id": 5171268, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c194951fa81fc8ccba7c92e6fb91e15e?s=128&d=identicon&r=PG&f=1", "display_name": "nithin h r", "link": "https://stackoverflow.com/users/5171268/nithin-h-r"}, "reply_to_user": {"reputation": 8989, "user_id": 1684058, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/lhdm7.jpg?s=128&g=1", "display_name": "Lim H.", "link": "https://stackoverflow.com/users/1684058/lim-h"}, "edited": false, "score": 0, "creation_date": 1438210932, "post_id": 31712322, "comment_id": 51363090, "body": "I got the solution, Thank you,"}], "owner": {"reputation": 15, "user_id": 5171268, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c194951fa81fc8ccba7c92e6fb91e15e?s=128&d=identicon&r=PG&f=1", "display_name": "nithin h r", "link": "https://stackoverflow.com/users/5171268/nithin-h-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1438210897, "creation_date": 1438209292, "last_edit_date": 1438210897, "question_id": 31712322, "link": "https://stackoverflow.com/questions/31712322/do-we-need-to-read-index-file-every-time-we-do-query", "title": "Do we need to read index file every time we do query?", "body": "<p>Im implementing search in python for <strong>django</strong>.</p>\n\n<p>In my Query class i alter the position value of the index, which in turn alters the instance data, If i use the same instance of the query object every time, it alters the temporary dictionary and if i do the same query the second time it results to something else.\nBut, by having a new instance of the query index, i.e getting the index from the file every time, it works fine, i want to know whether i can make a read only Dictionary or make the instance not alter the Dictionary data.</p>\n\n<pre><code>def getPosIntersection(self, docID, terms):\n    for ID in docID:\n        for term in terms:\n            for actualTerm in term:\n                if ID == actualTerm[0]:\n                    self.posIntersectionSet.append(actualTerm[1])\n\n        print \"DOCID -&gt; %s\" % (docID)        \n        print \"posIntersectionSet -&gt; %s\" % (self.posIntersectionSet)\n\n        intersection = self.posIntersectionSet[0]\n        for index, pos in enumerate(self.posIntersectionSet):\n            if index &gt; 0:\n                for secondIndex, val in enumerate(pos):\n                    pos[secondIndex] = pos[secondIndex] - index\n\n            intersection = set(intersection).intersection(pos)\n\n        if intersection:\n            if ID not in self.presentDocs:\n                print \"Pos intersection -&gt; %s\" % intersection\n                self.presentDocs.append(ID)  \n</code></pre>\n\n<p>Here on line 15 im altering the data which is in turn altering the Dictionary instance of the other class variable which i'm passing, How do i make the Dictionary read only and change only its instance.</p>\n\n<p>Answer Found:\nI implemented a read only Dictionary and the values were intact, Thank you</p>\n"}, {"tags": ["python", "flask", "wtforms"], "answers": [{"comments": [{"owner": {"reputation": 137, "user_id": 4883227, "user_type": "registered", "accept_rate": 91, "profile_image": "https://lh6.googleusercontent.com/--uwG_ruBDAo/AAAAAAAAAAI/AAAAAAAAABE/Z4rwQbyvack/photo.jpg?sz=128", "display_name": "Ian Ling", "link": "https://stackoverflow.com/users/4883227/ian-ling"}, "edited": false, "score": 0, "creation_date": 1438210015, "post_id": 31712422, "comment_id": 51362815, "body": "How would I add an extra &#39;email&#39; field to the page via Javascript? edit: I guess what I&#39;m asking is whether or not WTForms will know that I&#39;ve added another field."}, {"owner": {"reputation": 2900, "user_id": 2566965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/300de803639f26b633cbf259a95af052?s=128&d=identicon&r=PG", "display_name": "junnytony", "link": "https://stackoverflow.com/users/2566965/junnytony"}, "reply_to_user": {"reputation": 137, "user_id": 4883227, "user_type": "registered", "accept_rate": 91, "profile_image": "https://lh6.googleusercontent.com/--uwG_ruBDAo/AAAAAAAAAAI/AAAAAAAAABE/Z4rwQbyvack/photo.jpg?sz=128", "display_name": "Ian Ling", "link": "https://stackoverflow.com/users/4883227/ian-ling"}, "edited": false, "score": 1, "creation_date": 1438210429, "post_id": 31712422, "comment_id": 51362939, "body": "If you want to do it via javascript, you&#39;ll have to look at the code that&#39;s generated by wtforms and mimic that for each additional entry you want to add. WTForms will not know the difference if your new field matches what it expects. It should be able to process fields added this way."}, {"owner": {"reputation": 137, "user_id": 4883227, "user_type": "registered", "accept_rate": 91, "profile_image": "https://lh6.googleusercontent.com/--uwG_ruBDAo/AAAAAAAAAAI/AAAAAAAAABE/Z4rwQbyvack/photo.jpg?sz=128", "display_name": "Ian Ling", "link": "https://stackoverflow.com/users/4883227/ian-ling"}, "edited": false, "score": 4, "creation_date": 1438211349, "post_id": 31712422, "comment_id": 51363187, "body": "Got it working, thanks! For future reference, when you do it this way, WTForms generates an input field with the name &quot;email-0&quot;. When you add another one with Javascript, you need to increment that number on the end, so your next field will be named &quot;email-1&quot; and so on."}], "tags": [], "owner": {"reputation": 2900, "user_id": 2566965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/300de803639f26b633cbf259a95af052?s=128&d=identicon&r=PG", "display_name": "junnytony", "link": "https://stackoverflow.com/users/2566965/junnytony"}, "is_accepted": true, "score": 8, "last_activity_date": 1438209892, "creation_date": 1438209892, "answer_id": 31712422, "question_id": 31712220, "link": "https://stackoverflow.com/questions/31712220/wtforms-posting-text-fields-to-an-array/31712422#31712422", "title": "WTForms - POSTing text fields to an array", "body": "<p>You're looking for WTForm <a href=\"https://wtforms.readthedocs.org/en/latest/fields.html#wtforms.fields.FieldList\" rel=\"noreferrer\">FieldList</a>. It allows you to create an arbitrary list of the same field.</p>\n\n<p>Ex. </p>\n\n<pre><code>emails = FieldList(StringField('email'), min_entries=1, max_entries=5)\n</code></pre>\n"}], "owner": {"reputation": 137, "user_id": 4883227, "user_type": "registered", "accept_rate": 91, "profile_image": "https://lh6.googleusercontent.com/--uwG_ruBDAo/AAAAAAAAAAI/AAAAAAAAABE/Z4rwQbyvack/photo.jpg?sz=128", "display_name": "Ian Ling", "link": "https://stackoverflow.com/users/4883227/ian-ling"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3475, "favorite_count": 0, "accepted_answer_id": 31712422, "answer_count": 1, "score": 4, "last_activity_date": 1438209892, "creation_date": 1438208676, "question_id": 31712220, "link": "https://stackoverflow.com/questions/31712220/wtforms-posting-text-fields-to-an-array", "title": "WTForms - POSTing text fields to an array", "body": "<p>In regular HTML, you can have multiple fields POST to an array:</p>\n\n<pre><code>&lt;input type=\"text\" name=\"arr[]\"&gt;\n&lt;input type=\"text\" name=\"arr[]\"&gt;\n&lt;input type=\"text\" name=\"arr[]\"&gt;\n&lt;input type=\"text\" name=\"arr[]\"&gt;\n</code></pre>\n\n<p>How can I get this functionality from WTForms? Basically, I have a form where users and click on little plus and minus buttons to add or remove fields from the form.</p>\n"}, {"tags": ["python", "python-2.7"], "comments": [{"owner": {"reputation": 2289, "user_id": 1664675, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/e9526be62369d44940cded06d9b1f7f8?s=128&d=identicon&r=PG", "display_name": "letsc", "link": "https://stackoverflow.com/users/1664675/letsc"}, "edited": false, "score": 1, "creation_date": 1438208806, "post_id": 31712194, "comment_id": 51362404, "body": "paste your sample dictionary. And please avoid terms like <i>Title is pretty self-explanatory, it&#39;s late in the day and I know I&#39;ll fell dumb from how easy it is;)</i> . You should rather give more details on what you did and where you&#39;re stuck"}], "answers": [{"tags": [], "owner": {"reputation": 8989, "user_id": 1684058, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/lhdm7.jpg?s=128&g=1", "display_name": "Lim H.", "link": "https://stackoverflow.com/users/1684058/lim-h"}, "is_accepted": false, "score": 1, "last_activity_date": 1438208751, "creation_date": 1438208751, "answer_id": 31712237, "question_id": 31712194, "link": "https://stackoverflow.com/questions/31712194/how-to-print-entries-from-a-dictionary-without-quotes-and-with-a-newline-in-betw/31712237#31712237", "title": "How to print entries from a dictionary without quotes and with a newline in between?", "body": "<p>There are several ways to do this:</p>\n\n<p>Wrap each line inside a print</p>\n\n<pre><code>print('Property Code: %s' % line['Property Code'])\nprint('Pivot ID: %s' % line['Pivot ID']')\n</code></pre>\n\n<p>Or you can use pprint</p>\n\n<pre><code>from pprint import pprint\npprint(line)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2289, "user_id": 1664675, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/e9526be62369d44940cded06d9b1f7f8?s=128&d=identicon&r=PG", "display_name": "letsc", "link": "https://stackoverflow.com/users/1664675/letsc"}, "is_accepted": true, "score": 1, "last_activity_date": 1438209310, "creation_date": 1438209310, "answer_id": 31712327, "question_id": 31712194, "link": "https://stackoverflow.com/questions/31712194/how-to-print-entries-from-a-dictionary-without-quotes-and-with-a-newline-in-betw/31712327#31712327", "title": "How to print entries from a dictionary without quotes and with a newline in between?", "body": "<p>Is this what you want?</p>\n\n<pre><code>sample = {'city': 'San Francisco', 2: 'Neato', 'name': 'Zed', 1: 'Wow', 'age': 39, 'height': 74}\n\nfor i in sample.keys():\n    print '{} : {}\\n'.format(i,sample.get(i))\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>city : San Francisco\n\n2 : Neato\n\nname : Zed\n\n1 : Wow\n\nage : 39\n\nheight : 74\n</code></pre>\n"}], "owner": {"reputation": 3135, "user_id": 4372759, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/6zzjk.jpg?s=128&g=1", "display_name": "flybonzai", "link": "https://stackoverflow.com/users/4372759/flybonzai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 407, "favorite_count": 0, "accepted_answer_id": 31712327, "answer_count": 2, "score": -1, "last_activity_date": 1438209310, "creation_date": 1438208513, "question_id": 31712194, "link": "https://stackoverflow.com/questions/31712194/how-to-print-entries-from-a-dictionary-without-quotes-and-with-a-newline-in-betw", "title": "How to print entries from a dictionary without quotes and with a newline in between?", "body": "<p>Title is pretty self-explanatory, it's late in the day and I know I'll fell dumb from how easy it is;)  Here is my code, I'm using <code>DictReader</code>.</p>\n\n<pre><code>for line in myreader:\n    if prop_code == line['Property Code']:\n        print('Property Code: %s\\n' % line['Property Code'],\n              'Pivot ID: %s\\n' % line['Pivot ID'],\n              'Inwork File: %s\\n' % line['Inwork File'],\n              'Billing Manager E-mail: %s\\n' % line['Billing Manager E-mail'],\n              'Total Records: %s\\n' % line['Total Records'],\n              'Number of E-Bills: %s\\n' % line['Number of E-Bills'],\n              'Printed Records: %s\\n' % line['Printed Records'],\n              'File Date: %s\\n' % line['File Date']) \n</code></pre>\n"}, {"tags": ["python", "twisted"], "answers": [{"comments": [{"owner": {"reputation": 2163, "user_id": 1781548, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/cae6c8f9ef172f395b2b183320804fe5?s=128&d=identicon&r=PG", "display_name": "Pippi", "link": "https://stackoverflow.com/users/1781548/pippi"}, "edited": false, "score": 0, "creation_date": 1438211359, "post_id": 31712431, "comment_id": 51363190, "body": "I see, I thought an interface instance must implement all the functions of that interface, but it is not the case. I didn&#39;t see this in the online documentations. Do you know where I can find more information?"}, {"owner": {"reputation": 643, "user_id": 501294, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0581be4e17d12b4a81978d92f33e4524?s=128&d=identicon&r=PG", "display_name": "fishsticks", "link": "https://stackoverflow.com/users/501294/fishsticks"}, "reply_to_user": {"reputation": 2163, "user_id": 1781548, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/cae6c8f9ef172f395b2b183320804fe5?s=128&d=identicon&r=PG", "display_name": "Pippi", "link": "https://stackoverflow.com/users/1781548/pippi"}, "edited": false, "score": 1, "creation_date": 1438219168, "post_id": 31712431, "comment_id": 51365120, "body": "I guess that depends on the kind of interface. In this instance, the interface essentially exists as a way for you to define a bunch of callbacks to occur when certain things happen. If you don&#39;t want to deal with a certain event, that&#39;s ok, so you don&#39;t have to define it. The super class already has either an empty or predefined function for it. For other kinds of interfaces, that may not ok and those default implementations may not exist."}], "tags": [], "owner": {"reputation": 643, "user_id": 501294, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0581be4e17d12b4a81978d92f33e4524?s=128&d=identicon&r=PG", "display_name": "fishsticks", "link": "https://stackoverflow.com/users/501294/fishsticks"}, "is_accepted": true, "score": 2, "last_activity_date": 1438209939, "creation_date": 1438209939, "answer_id": 31712431, "question_id": 31712187, "link": "https://stackoverflow.com/questions/31712187/can-twisted-python-interface-instance-not-implementing-all-functions-of-that-int/31712431#31712431", "title": "Can Twisted Python interface instance not implementing all functions of that interface?", "body": "<p>I don't think I'm quite sure what you're asking, but essentially if you don't need to act on a certain event (such as when a client starts connecting or a connection is lost), you don't need to implement that function. It's just an interface mostly. If you don't implement those functions, an empty function that does nothing is called, from <code>ClientFactory</code> or <code>Protocol</code>, or whichever class you inherit from..</p>\n"}, {"tags": [], "owner": {"reputation": 208, "user_id": 3056562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc137a5994f4c680470b62df6a4a4ed9?s=128&d=identicon&r=PG", "display_name": "mission.liao", "link": "https://stackoverflow.com/users/3056562/mission-liao"}, "is_accepted": false, "score": 0, "last_activity_date": 1438217416, "creation_date": 1438217416, "answer_id": 31713521, "question_id": 31712187, "link": "https://stackoverflow.com/questions/31712187/can-twisted-python-interface-instance-not-implementing-all-functions-of-that-int/31713521#31713521", "title": "Can Twisted Python interface instance not implementing all functions of that interface?", "body": "<p>I'm not quite sure what you're asking, too.</p>\n\n<p>IMO, reaching github for their <a href=\"https://github.com/twisted/twisted/blob/trunk/twisted/internet/protocol.py\" rel=\"nofollow\">source code</a> is the fastest way to learn. As you can see, there are default implementation for <strong>startedConnecting</strong> and <strong>clientConnectionLost</strong> (empty code, though).</p>\n\n<p>Therefore, you just need to implement callbacks you need but not all methods defined in that interface.</p>\n"}, {"tags": [], "owner": {"reputation": 29455, "user_id": 13564, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/e1554622707bedd9202884900430b838?s=128&d=identicon&r=PG", "display_name": "Glyph", "link": "https://stackoverflow.com/users/13564/glyph"}, "is_accepted": false, "score": 2, "last_activity_date": 1438217559, "creation_date": 1438217559, "answer_id": 31713537, "question_id": 31712187, "link": "https://stackoverflow.com/questions/31712187/can-twisted-python-interface-instance-not-implementing-all-functions-of-that-int/31713537#31713537", "title": "Can Twisted Python interface instance not implementing all functions of that interface?", "body": "<p>If you are implementing an interface yourself, it looks like this:</p>\n\n<pre><code>from zope.interface import implementer\nfrom twisted.internet.interfaces import IProtocol\n@implementer(IProtocol)\nclass MyProtocol(object):\n    \" ... \"\n</code></pre>\n\n<p>In this case, you <em>do</em> need to implement all methods, because this <code>@implementer</code> declaration is just saying that you intend to provide all the relevant methods.</p>\n\n<p>However, the more common thing to do in Twisted is to subclass, like this:</p>\n\n<pre><code>from twisted.internet.protocol import Protocol\nclass MyProtocol(Protocol, object):\n    \" ... \"\n</code></pre>\n\n<p>In <em>this</em> case, you do <em>not</em> need to implement all methods, because the <code>Protocol</code> super-class already provides implementations of all the methods on <code>IProtocol</code>.  In general, Twisted provides a superclass that has default or empty versions of all the methods for many of the more frequently-used interfaces that Twisted application developers must implement.</p>\n"}], "owner": {"reputation": 2163, "user_id": 1781548, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/cae6c8f9ef172f395b2b183320804fe5?s=128&d=identicon&r=PG", "display_name": "Pippi", "link": "https://stackoverflow.com/users/1781548/pippi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 31712431, "answer_count": 3, "score": 1, "last_activity_date": 1438217559, "creation_date": 1438208494, "question_id": 31712187, "link": "https://stackoverflow.com/questions/31712187/can-twisted-python-interface-instance-not-implementing-all-functions-of-that-int", "title": "Can Twisted Python interface instance not implementing all functions of that interface?", "body": "<p>As I am going through the example in this <a href=\"http://krondo.com/?p=1522\" rel=\"nofollow\">blog</a>, I found that when ClientFactory instance, which is an argument to PoetryClientFactory, or Protocol instance, which is an argument to PoetryProtocol, is not implementing all the functions defined for ClientFactory or Protocol interface. <a href=\"http://twistedmatrix.com/trac/browser/tags/releases/twisted-8.2.0/twisted/internet/protocol.py\" rel=\"nofollow\">ClientFactory</a> interface implements startedConnecting, clientConnectionFailed, and clientConnectionLost, but PoetryClientFactory does not implement startedConnecting and clientConnectionLost. What is happening? </p>\n\n<pre><code># This is the Twisted Get Poetry Now! client, version 2.0.\n\n# NOTE: This should not be used as the basis for production code.\n\nimport datetime, optparse\n\nfrom twisted.internet.protocol import Protocol, ClientFactory\n\n\ndef parse_args():\n    usage = \"\"\"usage: %prog [options] [hostname]:port ...\n\nThis is the Get Poetry Now! client, Twisted version 2.0.\nRun it like this:\n\n  python get-poetry.py port1 port2 port3 ...\n\nIf you are in the base directory of the twisted-intro package,\nyou could run it like this:\n\n  python twisted-client-2/get-poetry.py 10001 10002 10003\n\nto grab poetry from servers on ports 10001, 10002, and 10003.\n\nOf course, there need to be servers listening on those ports\nfor that to work.\n\"\"\"\n\n    parser = optparse.OptionParser(usage)\n\n    _, addresses = parser.parse_args()\n\n    if not addresses:\n        print parser.format_help()\n        parser.exit()\n\n    def parse_address(addr):\n        if ':' not in addr:\n            host = '127.0.0.1'\n            port = addr\n        else:\n            host, port = addr.split(':', 1)\n\n        if not port.isdigit():\n            parser.error('Ports must be integers.')\n\n        return host, int(port)\n\n    return map(parse_address, addresses)\n\n\nclass PoetryProtocol(Protocol):\n\n    poem = ''\n    task_num = 0\n\n    def dataReceived(self, data):\n        self.poem += data\n        msg = 'Task %d: got %d bytes of poetry from %s'\n        print  msg % (self.task_num, len(data), self.transport.getPeer())\n\n    def connectionLost(self, reason):\n        self.poemReceived(self.poem)\n\n    def poemReceived(self, poem):\n        self.factory.poem_finished(self.task_num, poem)\n\n\nclass PoetryClientFactory(ClientFactory):\n\n    task_num = 1\n\n    protocol = PoetryProtocol # tell base class what proto to build\n\n    def __init__(self, poetry_count):\n        self.poetry_count = poetry_count\n        self.poems = {} # task num -&gt; poem\n\n    def buildProtocol(self, address):\n        proto = ClientFactory.buildProtocol(self, address)\n        proto.task_num = self.task_num\n        self.task_num += 1\n        return proto\n\n    def poem_finished(self, task_num=None, poem=None):\n        if task_num is not None:\n            self.poems[task_num] = poem\n\n        self.poetry_count -= 1\n\n        if self.poetry_count == 0:\n            self.report()\n            from twisted.internet import reactor\n            reactor.stop()\n\n    def report(self):\n        for i in self.poems:\n            print 'Task %d: %d bytes of poetry' % (i, len(self.poems[i]))\n\n    def clientConnectionFailed(self, connector, reason):\n        print 'Failed to connect to:', connector.getDestination()\n        self.poem_finished()\n\n\ndef poetry_main():\n    addresses = parse_args()\n\n    start = datetime.datetime.now()\n\n    factory = PoetryClientFactory(len(addresses))\n\n    from twisted.internet import reactor\n\n    for address in addresses:\n        host, port = address\n        reactor.connectTCP(host, port, factory)\n\n    reactor.run()\n\n    elapsed = datetime.datetime.now() - start\n\n    print 'Got %d poems in %s' % (len(addresses), elapsed)\n\n\nif __name__ == '__main__':\n    poetry_main()\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 18603, "user_id": 4526187, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YP5so.jpg?s=128&g=1", "display_name": "JuniorCompressor", "link": "https://stackoverflow.com/users/4526187/juniorcompressor"}, "edited": false, "score": 1, "creation_date": 1438208469, "post_id": 31712145, "comment_id": 51362268, "body": "<code>[1]</code>, <code>[2]</code> ... are not numerical values, they are arrays. Secondly, you didn&#39;t show any effort. Thirdly, when you print a dictionary it&#39;s random in which order the keys are presented."}, {"owner": {"reputation": 2289, "user_id": 1664675, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/e9526be62369d44940cded06d9b1f7f8?s=128&d=identicon&r=PG", "display_name": "letsc", "link": "https://stackoverflow.com/users/1664675/letsc"}, "edited": false, "score": 0, "creation_date": 1438209017, "post_id": 31712145, "comment_id": 51362485, "body": "Like Clodion said, its not possible to &quot;sort&quot; a dict in python. You can however create a sorted dictionary using <code>OrderedDict</code> instead of the dictionary you currently have"}], "answers": [{"comments": [{"owner": {"reputation": 2289, "user_id": 1664675, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/e9526be62369d44940cded06d9b1f7f8?s=128&d=identicon&r=PG", "display_name": "letsc", "link": "https://stackoverflow.com/users/1664675/letsc"}, "edited": false, "score": 0, "creation_date": 1438208891, "post_id": 31712173, "comment_id": 51362435, "body": "This a comment. Please refrain from pasting comments as answers"}, {"owner": {"reputation": 989, "user_id": 5039959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f68a4651473d073cb1647405bfcc8bc?s=128&d=identicon&r=PG&f=1", "display_name": "Clodion", "link": "https://stackoverflow.com/users/5039959/clodion"}, "reply_to_user": {"reputation": 5, "user_id": 5171244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0b376dc4cb9a3939a0e8b5531731063?s=128&d=identicon&r=PG&f=1", "display_name": "Nick Collins", "link": "https://stackoverflow.com/users/5171244/nick-collins"}, "edited": false, "score": 0, "creation_date": 1438210974, "post_id": 31712173, "comment_id": 51363101, "body": "@NickCollins: so, is it a response to your question?"}, {"owner": {"reputation": 1268, "user_id": 2033511, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e69eda79982fba9ee1abe56995a33b5a?s=128&d=identicon&r=PG&f=1", "display_name": "enpenax", "link": "https://stackoverflow.com/users/2033511/enpenax"}, "edited": false, "score": 0, "creation_date": 1438219103, "post_id": 31712173, "comment_id": 51365106, "body": "If the goal is to just print them out in order you don&#39;t even need an ordered dict. Plus I doubt that it is intentional, that the value is a list. Your answer is sorting by the first item of the list. OP seems to be a beginner, so maybe you want to elaborate on the data structures in use, to make this somewhat worthwhile :/"}, {"owner": {"reputation": 989, "user_id": 5039959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f68a4651473d073cb1647405bfcc8bc?s=128&d=identicon&r=PG&f=1", "display_name": "Clodion", "link": "https://stackoverflow.com/users/5039959/clodion"}, "reply_to_user": {"reputation": 1268, "user_id": 2033511, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e69eda79982fba9ee1abe56995a33b5a?s=128&d=identicon&r=PG&f=1", "display_name": "enpenax", "link": "https://stackoverflow.com/users/2033511/enpenax"}, "edited": false, "score": 0, "creation_date": 1438220419, "post_id": 31712173, "comment_id": 51365410, "body": "@enpenax: Well, sure, don&#39;t need ordered dictionary, but it&#39;s really easier! Trying sorting output based on values isn&#39;t so simple without converting the dictionary, no? And I don&#39;t use lists. But yes OP seems to be a beginner. However, I really that&#39;ll be worth explaining other method, no? But I&#39;ll try."}, {"owner": {"reputation": 1268, "user_id": 2033511, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e69eda79982fba9ee1abe56995a33b5a?s=128&d=identicon&r=PG&f=1", "display_name": "enpenax", "link": "https://stackoverflow.com/users/2033511/enpenax"}, "edited": false, "score": 0, "creation_date": 1438224321, "post_id": 31712173, "comment_id": 51366233, "body": "Well I would have directed the explanation towards the fact that the value being a list is kinda useless. Also OP asks for printing so adding how you can read the dict and sort that to print it is worth adding imho :) Good edit, thanks for considering."}], "tags": [], "owner": {"reputation": 989, "user_id": 5039959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f68a4651473d073cb1647405bfcc8bc?s=128&d=identicon&r=PG&f=1", "display_name": "Clodion", "link": "https://stackoverflow.com/users/5039959/clodion"}, "is_accepted": true, "score": 2, "last_activity_date": 1438221253, "last_edit_date": 1438221253, "creation_date": 1438208436, "answer_id": 31712173, "question_id": 31712145, "link": "https://stackoverflow.com/questions/31712145/how-to-sort-a-dictionary-by-descending-order-numerically/31712173#31712173", "title": "How to sort a dictionary by descending order numerically", "body": "<p>Dictionary can't have order. For that you have to use <code>collections.OrderedDic</code> That's the only way!</p>\n\n<pre><code>from collections import OrderedDict\ndct = OrderedDict({'name1':[3],'name2':[1],'name3':[2]})\ndct = OrderedDict(sorted(dct.items(), key=lambda t: t[1][0], reverse = True))\nprint(dct)\n</code></pre>\n\n<p>Result</p>\n\n<pre><code>OrderedDict([('name1', [3]), ('name3', [2]), ('name2', [1])])\n</code></pre>\n\n<p>Well, as suggested, a solution without OrderedDict (but using list comprehension) if it's only for printing the list:</p>\n\n<pre><code>dct = {'name1':[3],'name2':[1],'name3':[2]}\nlst = sorted([[k, v] for k, v in dct.items()], key=lambda ls : ls[1][0], reverse = True)\nprint(lst)\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>&gt;&gt;&gt; \n['name1', [3]]\n['name3', [2]]\n['name2', [1]]\n&gt;&gt;&gt; \n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 5171244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0b376dc4cb9a3939a0e8b5531731063?s=128&d=identicon&r=PG&f=1", "display_name": "Nick Collins", "link": "https://stackoverflow.com/users/5171244/nick-collins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 31712173, "answer_count": 1, "score": 0, "last_activity_date": 1438221253, "creation_date": 1438208276, "last_edit_date": 1438208808, "question_id": 31712145, "link": "https://stackoverflow.com/questions/31712145/how-to-sort-a-dictionary-by-descending-order-numerically", "title": "How to sort a dictionary by descending order numerically", "body": "<p>If i've got a dictionary like:</p>\n\n<pre><code>{'name1':[3],'name2':[1],'name3':[2]}\n</code></pre>\n\n<p>How can I order it so that it prints out those names in order of numerical value - eg highest number to lowest, so that it looks like ?:</p>\n\n<pre><code>{'name1':[3],'name3':[2],'name2':[1]}\n</code></pre>\n\n<p>(python 3.3.3)</p>\n"}, {"tags": ["python", "django", "django-rest-framework"], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 5171214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43a7eb644ca0e19d964bced9b31e7f01?s=128&d=identicon&r=PG&f=1", "display_name": "docblue", "link": "https://stackoverflow.com/users/5171214/docblue"}, "edited": false, "score": 0, "creation_date": 1438242415, "post_id": 31713281, "comment_id": 51373013, "body": "Thank you Mark, that was a great help. I ended up changing the code a bit because it raising an error saying &quot;author&quot; had not been referenced before. final code also uses get_or_create(), <code>Author.objects.get_or_create(**author_data)[0] </code>"}, {"owner": {"reputation": 3400, "user_id": 4661800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43f1c8afb6f59a0b12734ffa9dcac57d?s=128&d=identicon&r=PG&f=1", "display_name": "Mark Galloway", "link": "https://stackoverflow.com/users/4661800/mark-galloway"}, "reply_to_user": {"reputation": 53, "user_id": 5171214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43a7eb644ca0e19d964bced9b31e7f01?s=128&d=identicon&r=PG&f=1", "display_name": "docblue", "link": "https://stackoverflow.com/users/5171214/docblue"}, "edited": false, "score": 0, "creation_date": 1438242882, "post_id": 31713281, "comment_id": 51373311, "body": "updated to reflect. Oh I see my error with author, sorry. Fixed :)"}, {"owner": {"reputation": 630, "user_id": 4772633, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/9RaQB.jpg?s=128&g=1", "display_name": "rohanagarwal", "link": "https://stackoverflow.com/users/4772633/rohanagarwal"}, "edited": false, "score": 0, "creation_date": 1493628045, "post_id": 31713281, "comment_id": 74476280, "body": "take care of the cases where you have an author object created but no message object created, in case message object creation fails for some reason."}], "tags": [], "owner": {"reputation": 3400, "user_id": 4661800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43f1c8afb6f59a0b12734ffa9dcac57d?s=128&d=identicon&r=PG&f=1", "display_name": "Mark Galloway", "link": "https://stackoverflow.com/users/4661800/mark-galloway"}, "is_accepted": true, "score": 13, "last_activity_date": 1438242873, "last_edit_date": 1438242873, "creation_date": 1438215484, "answer_id": 31713281, "question_id": 31712065, "link": "https://stackoverflow.com/questions/31712065/saving-related-nested-object-in-django-rest-framework/31713281#31713281", "title": "saving related nested object in Django Rest Framework", "body": "<p>According to the <a href=\"http://www.django-rest-framework.org/api-guide/serializers/#writable-nested-representations\" rel=\"noreferrer\">docs</a>, you have to create the nested object in your custom create method:</p>\n\n<pre><code>class MessageSerializer(serializers.Serializer):\n    pk = serializers.IntegerField(read_only=True)\n    thread = serializers.PrimaryKeyRelatedField(queryset=Thread.objects.all())\n    created_at = serializers.DateTimeField(required=False)\n    content = serializers.CharField(style={'base_template': 'textarea.html'})\n    author = AuthorSerializer(required=False, read_only=False)\n\n    def create(self, validated_data):\n        \"\"\"\n        Create and return a new `Message` instance, given the validated data.\n        \"\"\"\n        author_data = validated_data.pop('author', None)\n        if author_data:\n            author = Author.objects.get_or_create(**author_data)[0]\n            validated_data['author'] = author\n        return Message.objects.create(**validated_data)\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 5171214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43a7eb644ca0e19d964bced9b31e7f01?s=128&d=identicon&r=PG&f=1", "display_name": "docblue", "link": "https://stackoverflow.com/users/5171214/docblue"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5377, "favorite_count": 1, "accepted_answer_id": 31713281, "answer_count": 1, "score": 2, "last_activity_date": 1438242873, "creation_date": 1438207854, "question_id": 31712065, "link": "https://stackoverflow.com/questions/31712065/saving-related-nested-object-in-django-rest-framework", "title": "saving related nested object in Django Rest Framework", "body": "<p>I am trying to post a message to the database using the following content on the request:</p>\n\n<pre><code>{\n    \"thread\": 1,\n    \"content\": \"lorem ipsum\",\n    \"author\": \n    {\n        \"name\":\"doc\",\n        \"email\":\"\"\n    }\n\n}\n</code></pre>\n\n<p>Instead I get the error message of \"Cannot assign \"OrderedDict([(u'name', doc'), (u'email', u'')])\": \"Message.author\" must be a \"Author\" instance.\"</p>\n\n<p>Each Message has a related author record, that may or may not exist already in the database. At this point I don't mind having repeat entries on that table.</p>\n\n<p>My serializers.py file has the following:</p>\n\n<pre><code>class AuthorSerializer(serializers.Serializer):\n    pk = serializers.IntegerField(read_only=False, required=False)\n    name = serializers.CharField(required=True, max_length=50)\n    email = serializers.CharField(allow_blank=True, allow_null=True, required=False)\n\n    def create(self, validated_data):\n        \"\"\"\n        Create and return a new `Author` instance, given the validated data.\n        \"\"\"\n        return Author.objects.create(**validated_data)\n\n    def update(self, instance, validated_data):\n        \"\"\"\n        Update and return an existing `Author` instance, given the validated data.\n        \"\"\"\n        instance.name = validated_data.get('name', instance.name)\n        instance.email = validated_data.get('email', instance.email)\n        instance.save()\n        return instance\n\nclass Meta:\n    model = Author\n    fields = ('name', 'email')\n\nclass MessageSerializer(serializers.Serializer):\n    pk = serializers.IntegerField(read_only=True)\n    thread = serializers.PrimaryKeyRelatedField(queryset=Thread.objects.all())\n    created_at = serializers.DateTimeField(required=False)\n    content = serializers.CharField(style={'base_template': 'textarea.html'})\n    author = AuthorSerializer(required=False, read_only=False)\n\n    def create(self, validated_data):\n        \"\"\"\n        Create and return a new `Message` instance, given the validated data.\n        \"\"\"\n        return Message.objects.create(**validated_data)\n\n    def update(self, instance, validated_data):\n        \"\"\"\n        Update and return an existing `Message` instance, given the validated data.\n        \"\"\"\n        instance.thread = validated_data.get('thread', instance.thread)\n        instance.content = validated_data.get('content', instance.content)\n        instance.author = validated_data.get('author', instance.author)\n        instance.save()\n        return instance\n\n    class Meta:\n        model = Message\n        fields = ('thread', 'created_at', 'content', 'author')\n</code></pre>\n\n<p>I'm quite lost on how I should proceed, has I expected that AuthorSerializer would be able to parse a list or ordered dictionary into a new or existing object.</p>\n"}, {"tags": ["python", "c", "int", "type-conversion", "wiringpi"], "comments": [{"owner": {"reputation": 11413, "user_id": 263589, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/C1Xw0.jpg?s=128&g=1", "display_name": "speendo", "link": "https://stackoverflow.com/users/263589/speendo"}, "reply_to_user": {"reputation": 4369, "user_id": 3102935, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/22985d9fffff3b76a11b1f2bccbf2f42?s=128&d=identicon&r=PG&f=1", "display_name": "WorldSEnder", "link": "https://stackoverflow.com/users/3102935/worldsender"}, "edited": false, "score": 0, "creation_date": 1438208786, "post_id": 31711978, "comment_id": 51362393, "body": "you mean something like <code>wiringpi.lcdCharDef(self.lcd_handle, 0, array.array(&#39;B&#39;,cap_umlaut_a))</code>? Sorry, that gives me the same error..."}, {"owner": {"reputation": 7261, "user_id": 3577601, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u0SS2.jpg?s=128&g=1", "display_name": "Patrick Maupin", "link": "https://stackoverflow.com/users/3577601/patrick-maupin"}, "edited": false, "score": 0, "creation_date": 1438208790, "post_id": 31711978, "comment_id": 51362395, "body": "Have you tried using chr() or byte() instead of int()?  Also, you will need to join them together into a string (python 2) or byte string (python 3) and then decode() them into the Unicode you want.  But why not just use the Unicode \\Uxxxxx definition?"}, {"owner": {"reputation": 11413, "user_id": 263589, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/C1Xw0.jpg?s=128&g=1", "display_name": "speendo", "link": "https://stackoverflow.com/users/263589/speendo"}, "reply_to_user": {"reputation": 7261, "user_id": 3577601, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u0SS2.jpg?s=128&g=1", "display_name": "Patrick Maupin", "link": "https://stackoverflow.com/users/3577601/patrick-maupin"}, "edited": false, "score": 0, "creation_date": 1438209244, "post_id": 31711978, "comment_id": 51362560, "body": "@PatrickMaupin I think the Unicode would not work, as I have to define the pixels of the new character myself (the Hitachi HD44780U LCDs are not very smart - they don&#39;t know capital umlauts themselves). Or did I get you wrong? However, <code>chr()</code> did not work and <code>byte()</code> is not a built-in type in python"}, {"owner": {"reputation": 7261, "user_id": 3577601, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u0SS2.jpg?s=128&g=1", "display_name": "Patrick Maupin", "link": "https://stackoverflow.com/users/3577601/patrick-maupin"}, "edited": false, "score": 0, "creation_date": 1438209317, "post_id": 31711978, "comment_id": 51362593, "body": "chr() doesn&#39;t take a string, but it would take your actual number..."}, {"owner": {"reputation": 4369, "user_id": 3102935, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/22985d9fffff3b76a11b1f2bccbf2f42?s=128&d=identicon&r=PG&f=1", "display_name": "WorldSEnder", "link": "https://stackoverflow.com/users/3102935/worldsender"}, "edited": false, "score": 0, "creation_date": 1438209631, "post_id": 31711978, "comment_id": 51362693, "body": "Maybe it takes a bytestring. can you try <code>wiringpi.lcdCharDef(self.lcd_handle, 0, struct.pack(&#39;8B&#39;, *cap_umlaut_a))</code>"}, {"owner": {"reputation": 11413, "user_id": 263589, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/C1Xw0.jpg?s=128&g=1", "display_name": "speendo", "link": "https://stackoverflow.com/users/263589/speendo"}, "reply_to_user": {"reputation": 7261, "user_id": 3577601, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u0SS2.jpg?s=128&g=1", "display_name": "Patrick Maupin", "link": "https://stackoverflow.com/users/3577601/patrick-maupin"}, "edited": false, "score": 0, "creation_date": 1438209660, "post_id": 31711978, "comment_id": 51362705, "body": "Thank you, @PatrickMaupin! I tried <code>chr(int(&#39;0b01010&#39;, 2))</code> (also with the other <code>ints</code>. However, I got the same error message :("}, {"owner": {"reputation": 11413, "user_id": 263589, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/C1Xw0.jpg?s=128&g=1", "display_name": "speendo", "link": "https://stackoverflow.com/users/263589/speendo"}, "reply_to_user": {"reputation": 4369, "user_id": 3102935, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/22985d9fffff3b76a11b1f2bccbf2f42?s=128&d=identicon&r=PG&f=1", "display_name": "WorldSEnder", "link": "https://stackoverflow.com/users/3102935/worldsender"}, "edited": false, "score": 0, "creation_date": 1438209854, "post_id": 31711978, "comment_id": 51362761, "body": "Thank you @WorldSEnder. Same error, regretfully... In a different part of the program I use <code>ord(char)</code> - for only one character. Does this maybe help?"}, {"owner": {"reputation": 7261, "user_id": 3577601, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u0SS2.jpg?s=128&g=1", "display_name": "Patrick Maupin", "link": "https://stackoverflow.com/users/3577601/patrick-maupin"}, "edited": false, "score": 0, "creation_date": 1438209913, "post_id": 31711978, "comment_id": 51362779, "body": "Did you join() them into a string?  <code>&quot;&quot;.join(cap_umlaut_a)</code>"}, {"owner": {"reputation": 11413, "user_id": 263589, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/C1Xw0.jpg?s=128&g=1", "display_name": "speendo", "link": "https://stackoverflow.com/users/263589/speendo"}, "reply_to_user": {"reputation": 7261, "user_id": 3577601, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u0SS2.jpg?s=128&g=1", "display_name": "Patrick Maupin", "link": "https://stackoverflow.com/users/3577601/patrick-maupin"}, "edited": false, "score": 0, "creation_date": 1438210126, "post_id": 31711978, "comment_id": 51362849, "body": "@PatrickMaupin yes. this gives a different error: TypeError: sequence item 0: expected str instance, int found"}, {"owner": {"reputation": 7261, "user_id": 3577601, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u0SS2.jpg?s=128&g=1", "display_name": "Patrick Maupin", "link": "https://stackoverflow.com/users/3577601/patrick-maupin"}, "edited": false, "score": 0, "creation_date": 1438210201, "post_id": 31711978, "comment_id": 51362877, "body": "Is it Python 2 or 3?"}, {"owner": {"reputation": 11413, "user_id": 263589, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/C1Xw0.jpg?s=128&g=1", "display_name": "speendo", "link": "https://stackoverflow.com/users/263589/speendo"}, "reply_to_user": {"reputation": 7261, "user_id": 3577601, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u0SS2.jpg?s=128&g=1", "display_name": "Patrick Maupin", "link": "https://stackoverflow.com/users/3577601/patrick-maupin"}, "edited": false, "score": 0, "creation_date": 1438210308, "post_id": 31711978, "comment_id": 51362910, "body": "@PatrickMaupin Python 3 - sorry I didn&#39;t mention that earlier..."}, {"owner": {"reputation": 4369, "user_id": 3102935, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/22985d9fffff3b76a11b1f2bccbf2f42?s=128&d=identicon&r=PG&f=1", "display_name": "WorldSEnder", "link": "https://stackoverflow.com/users/3102935/worldsender"}, "edited": false, "score": 0, "creation_date": 1438210603, "post_id": 31711978, "comment_id": 51362991, "body": "according to <a href=\"http://www.gossamer-threads.com/lists/python/dev/644529\" rel=\"nofollow noreferrer\">the source</a> and <a href=\"http://www.gossamer-threads.com/lists/python/dev/644529\" rel=\"nofollow noreferrer\">this</a> it should work with a byte-string."}, {"owner": {"reputation": 7261, "user_id": 3577601, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u0SS2.jpg?s=128&g=1", "display_name": "Patrick Maupin", "link": "https://stackoverflow.com/users/3577601/patrick-maupin"}, "edited": false, "score": 0, "creation_date": 1438210710, "post_id": 31711978, "comment_id": 51363022, "body": "I think that error occurs when you do the conversion -- you have to join() chr().  In other words, if you define a list of integers like you did above, you should then be able to do <code>cap_umlaut_a = &#39;&#39;.join(chr(x) for x in cap_umlaut_a)</code> as a separate step.  See if that works."}, {"owner": {"reputation": 7261, "user_id": 3577601, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u0SS2.jpg?s=128&g=1", "display_name": "Patrick Maupin", "link": "https://stackoverflow.com/users/3577601/patrick-maupin"}, "edited": false, "score": 0, "creation_date": 1438210930, "post_id": 31711978, "comment_id": 51363089, "body": "My mistake previously -- it&#39;s bytes, not byte.  Try getting your list of bytes like you do above ([int(),...]) and then try this <code>cap_umlaut_a = b&#39;&#39;.join(bytes(x) for x in cap_umlaut_a)</code>"}, {"owner": {"reputation": 4369, "user_id": 3102935, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/22985d9fffff3b76a11b1f2bccbf2f42?s=128&d=identicon&r=PG&f=1", "display_name": "WorldSEnder", "link": "https://stackoverflow.com/users/3102935/worldsender"}, "edited": false, "score": 0, "creation_date": 1438211029, "post_id": 31711978, "comment_id": 51363111, "body": "Oops, the source is here: <a href=\"https://github.com/Gadgetoid/WiringPi2-Python/blob/7e1c18325ba7d56fe4a0a77a280e444c5e8a3c10/wiringpi_wrap.c#L5393\" rel=\"nofollow noreferrer\">github.com/Gadgetoid/WiringPi2-Python/blob/&hellip;</a>"}, {"owner": {"reputation": 11413, "user_id": 263589, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/C1Xw0.jpg?s=128&g=1", "display_name": "speendo", "link": "https://stackoverflow.com/users/263589/speendo"}, "reply_to_user": {"reputation": 7261, "user_id": 3577601, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u0SS2.jpg?s=128&g=1", "display_name": "Patrick Maupin", "link": "https://stackoverflow.com/users/3577601/patrick-maupin"}, "edited": false, "score": 0, "creation_date": 1438211651, "post_id": 31711978, "comment_id": 51363271, "body": "so you both think I need a byte string... hmmm I tried what you suggested, @PatrickMaupin. <code>print(cap_umlaut_a)</code> now gives b&#39;\\x00\\x00\\x00...\\x00\\x00\\x0&#39; however, I still get the same TypeError... :("}], "answers": [{"comments": [{"owner": {"reputation": 11413, "user_id": 263589, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/C1Xw0.jpg?s=128&g=1", "display_name": "speendo", "link": "https://stackoverflow.com/users/263589/speendo"}, "edited": false, "score": 0, "creation_date": 1438213370, "post_id": 31712747, "comment_id": 51363690, "body": "Thank you for the answer. I really appreciate that! I just tried it. <code>wiringpi.lcdCharDef(self.lcd_handle, 0, b&#39;\\x0A\\x04\\x0A\\x11\\x1F\\x11\\x11\\x0&#39;)</code> gives an error &quot;ValueError: invalid \\x escape&quot; and <code>wiringpi.lcdCharDef(lcd_handle, 0, struct.pack(&#39;8B&#39;, *cap_umlaut_a))</code> gives &quot;struct.error: pack requires exactly 8 arguments&quot;"}, {"owner": {"reputation": 4369, "user_id": 3102935, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/22985d9fffff3b76a11b1f2bccbf2f42?s=128&d=identicon&r=PG&f=1", "display_name": "WorldSEnder", "link": "https://stackoverflow.com/users/3102935/worldsender"}, "reply_to_user": {"reputation": 11413, "user_id": 263589, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/C1Xw0.jpg?s=128&g=1", "display_name": "speendo", "link": "https://stackoverflow.com/users/263589/speendo"}, "edited": false, "score": 1, "creation_date": 1438213532, "post_id": 31712747, "comment_id": 51363722, "body": "I fixed the first error, but I <i>can&#39;t</i> reproduce the second one (with the definitions from your question)"}, {"owner": {"reputation": 11413, "user_id": 263589, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/C1Xw0.jpg?s=128&g=1", "display_name": "speendo", "link": "https://stackoverflow.com/users/263589/speendo"}, "edited": false, "score": 0, "creation_date": 1438213837, "post_id": 31712747, "comment_id": 51363792, "body": "hm. thanks for fixing the first one - I&#39;ve seen it myself now :) now I also get the TypeError here... Maybe there is something else wrong in my code. I will try to make a running minimal example tomorrow and either post it or accept your answer, if I can locate the mistake."}, {"owner": {"reputation": 11413, "user_id": 263589, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/C1Xw0.jpg?s=128&g=1", "display_name": "speendo", "link": "https://stackoverflow.com/users/263589/speendo"}, "edited": false, "score": 0, "creation_date": 1438214301, "post_id": 31712747, "comment_id": 51363912, "body": "... well, who needs sleep anyway. I just created the minimal example. Still get the same error. You can find it here: <a href=\"https://gist.github.com/anonymous/0fd82d376cd22763faf1\" rel=\"nofollow noreferrer\">gist.github.com/anonymous/0fd82d376cd22763faf1</a>"}, {"owner": {"reputation": 4369, "user_id": 3102935, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/22985d9fffff3b76a11b1f2bccbf2f42?s=128&d=identicon&r=PG&f=1", "display_name": "WorldSEnder", "link": "https://stackoverflow.com/users/3102935/worldsender"}, "reply_to_user": {"reputation": 11413, "user_id": 263589, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/C1Xw0.jpg?s=128&g=1", "display_name": "speendo", "link": "https://stackoverflow.com/users/263589/speendo"}, "edited": false, "score": 0, "creation_date": 1438215892, "post_id": 31712747, "comment_id": 51364311, "body": "@speendo, can you try with a normal string instead of a byte string? :&lt;"}, {"owner": {"reputation": 11413, "user_id": 263589, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/C1Xw0.jpg?s=128&g=1", "display_name": "speendo", "link": "https://stackoverflow.com/users/263589/speendo"}, "edited": false, "score": 0, "creation_date": 1438237286, "post_id": 31712747, "comment_id": 51370244, "body": "I just tried <code>wiringpi.lcdCharDef(lcd_handle, 0, &#39;AAAAAAAA&#39;)</code>. Same result. I think I&#39;ll ask the maintainer on github..."}, {"owner": {"reputation": 11413, "user_id": 263589, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/C1Xw0.jpg?s=128&g=1", "display_name": "speendo", "link": "https://stackoverflow.com/users/263589/speendo"}, "edited": false, "score": 0, "creation_date": 1438248471, "post_id": 31712747, "comment_id": 51376666, "body": "I opened an issue on github: <a href=\"https://github.com/WiringPi/WiringPi2-Python/issues/20\" rel=\"nofollow noreferrer\">github.com/WiringPi/WiringPi2-Python/issues/20</a>"}], "tags": [], "owner": {"reputation": 4369, "user_id": 3102935, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/22985d9fffff3b76a11b1f2bccbf2f42?s=128&d=identicon&r=PG&f=1", "display_name": "WorldSEnder", "link": "https://stackoverflow.com/users/3102935/worldsender"}, "is_accepted": false, "score": 1, "last_activity_date": 1438213439, "last_edit_date": 1438213439, "creation_date": 1438211832, "answer_id": 31712747, "question_id": 31711978, "link": "https://stackoverflow.com/questions/31711978/unsigned-char-array-from-int-array-in-python/31712747#31712747", "title": "unsigned char array from int array in python", "body": "<p>I did a bit of research and found the source of the relevant python binding <a href=\"https://github.com/Gadgetoid/WiringPi2-Python/blob/7e1c18325ba7d56fe4a0a77a280e444c5e8a3c10/wiringpi_wrap.c#L5393\" rel=\"nofollow\">at this github repo</a>.</p>\n\n<p>The line in question is</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>res3 = SWIG_ConvertPtr(obj2, &amp;argp3,SWIGTYPE_p_unsigned_char, 0 | 0 );\n</code></pre>\n\n<p>as you can see, you have to pass in the python equivalent of a pointer to unsigned char.  According to <a href=\"http://www.gossamer-threads.com/lists/python/dev/644529\" rel=\"nofollow\">this thread</a>, the equivalent is a byte-string. This means that the correct call would be</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import struct\nwiringpi.lcdCharDef(lcd_handle, 0, struct.pack('8B', *cap_umlaut_a))\n</code></pre>\n\n<p>which should be equivalent to</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>wiringpi.lcdCharDef(lcd_handle, 0, b'\\x0A\\x04\\x0A\\x11\\x1F\\x11\\x11\\x00')\n</code></pre>\n"}], "owner": {"reputation": 11413, "user_id": 263589, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/C1Xw0.jpg?s=128&g=1", "display_name": "speendo", "link": "https://stackoverflow.com/users/263589/speendo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1804, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1438248451, "creation_date": 1438207377, "last_edit_date": 1438248451, "question_id": 31711978, "link": "https://stackoverflow.com/questions/31711978/unsigned-char-array-from-int-array-in-python", "title": "unsigned char array from int array in python", "body": "<p>I try to define a new character (a capital german umlaut \"\u00c4\") on my 2004 lcd on a raspberry pi using <a href=\"http://wiringpi.com/dev-lib/lcd-library/\" rel=\"nofollow\">wiringPi's <code>lcdCharDef()</code></a></p>\n\n<p>This is my code</p>\n\n<pre><code>import wiringpi2 as wiringpi\n\n# \u00c4\ncap_umlaut_a = [\n    int('0b01010', 2),\n    int('0b00100', 2),\n    int('0b01010', 2),\n    int('0b10001', 2),\n    int('0b11111', 2),\n    int('0b10001', 2),\n    int('0b10001', 2),\n    int('0b00000', 2)\n]\n\nprint(cap_umlaut_a) # [10, 4, 10, 17, 31, 17, 17, 0]\n\nwiringpi.lcdCharDef(lcd_handle, 0, cap_umlaut_a)\n</code></pre>\n\n<p>When I run this code I get the following error:</p>\n\n<blockquote>\n  <p>TypeError: in method 'lcdCharDef', argument 3 of type 'unsigned char [8]'</p>\n</blockquote>\n\n<p>I expected these <code>ints</code> to be the same as <code>unsigned chars</code></p>\n\n<p><strong>[edit]</strong><br>\nIn a different part of the code I use <code>ord(char)</code> to convert only one character to an unsigned int. Can this lead to the correct anser?</p>\n\n<p>How can I cast/convert the array to a type that can be accepted?</p>\n\n<p>P.S. (Note that (as far as I understand it) the python wiringPi library simply wraps the C functions of wiringPi)</p>\n\n<p><strong>[edit]</strong><br>\nI opened an issue on github: <a href=\"https://github.com/WiringPi/WiringPi2-Python/issues/20\" rel=\"nofollow\">https://github.com/WiringPi/WiringPi2-Python/issues/20</a></p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 5139, "user_id": 1735262, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Reinstate Monica -- notmaynard", "link": "https://stackoverflow.com/users/1735262/reinstate-monica-notmaynard"}, "edited": false, "score": 0, "creation_date": 1438207161, "post_id": 31711915, "comment_id": 51361735, "body": "What error do you get?"}, {"owner": {"reputation": 37256, "user_id": 736308, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/o5EqQ.jpg?s=128&g=1", "display_name": "cdarke", "link": "https://stackoverflow.com/users/736308/cdarke"}, "edited": false, "score": 0, "creation_date": 1438207546, "post_id": 31711915, "comment_id": 51361910, "body": "But <code>raw_input</code> always returns a string.  Even if the user entered &quot;1234&quot; that would still be a string.  Sure you don&#39;t mean <code>x.isalpha()</code> ?"}], "answers": [{"comments": [{"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1438207315, "post_id": 31711948, "comment_id": 51361804, "body": "That&#39;s better. I was wondering where you were getting <code>is_string()</code>. :P"}, {"owner": {"reputation": 242, "user_id": 3841901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f72986a963d1d0a8c77a1fb929e11cfe?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Lear", "link": "https://stackoverflow.com/users/3841901/martin-lear"}, "reply_to_user": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1438207380, "post_id": 31711948, "comment_id": 51361846, "body": "sorry!  that&#39;s what I had called it in my program... ::blush::"}], "tags": [], "owner": {"reputation": 242, "user_id": 3841901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f72986a963d1d0a8c77a1fb929e11cfe?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Lear", "link": "https://stackoverflow.com/users/3841901/martin-lear"}, "is_accepted": false, "score": 0, "last_activity_date": 1438207231, "creation_date": 1438207231, "answer_id": 31711948, "question_id": 31711915, "link": "https://stackoverflow.com/questions/31711915/how-do-i-to-make-an-answer-only-in-the-data-type-that-i-want-in-python/31711948#31711948", "title": "How do I to make an answer only in the data type that I want in Python?", "body": "<p>you want isinstance()</p>\n\n<pre><code>def check(x)\n    return isinstance(x, str)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 5171185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6af2a98a058263a900d86dd71d65a641?s=128&d=identicon&r=PG&f=1", "display_name": "Beast2life", "link": "https://stackoverflow.com/users/5171185/beast2life"}, "edited": false, "score": 0, "creation_date": 1438209168, "post_id": 31711954, "comment_id": 51362538, "body": "what is those  &quot; + x + &quot;.&quot;, can i just use print &quot;Hello&quot; + x. and can you use while loop please so it keeps repeating if answer is not letters"}, {"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "reply_to_user": {"reputation": 1, "user_id": 5171185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6af2a98a058263a900d86dd71d65a641?s=128&d=identicon&r=PG&f=1", "display_name": "Beast2life", "link": "https://stackoverflow.com/users/5171185/beast2life"}, "edited": false, "score": 0, "creation_date": 1438209413, "post_id": 31711954, "comment_id": 51362623, "body": "You can read about <a href=\"https://docs.python.org/2.7/tutorial/introduction.html#strings\" rel=\"nofollow noreferrer\">string concatenation here</a> and the <a href=\"https://docs.python.org/2.7/reference/compound_stmts.html?highlight=while#while\" rel=\"nofollow noreferrer\"><code>while</code> keyword here</a>. They are very versatile tools."}], "tags": [], "owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "is_accepted": false, "score": 6, "last_activity_date": 1438208828, "last_edit_date": 1438208828, "creation_date": 1438207267, "answer_id": 31711954, "question_id": 31711915, "link": "https://stackoverflow.com/questions/31711915/how-do-i-to-make-an-answer-only-in-the-data-type-that-i-want-in-python/31711954#31711954", "title": "How do I to make an answer only in the data type that I want in Python?", "body": "<p>You're looking for this:</p>\n\n<pre><code>if type(x) == str:\n</code></pre>\n\n<p>or, better yet:</p>\n\n<pre><code>if isinstance(x, str):\n</code></pre>\n\n<p>That said, <code>raw_input()</code> will only return a string. It doesn't return anything else.</p>\n\n<p>Since you're trying to check whether the string only contains letters, you should call <code>isalpha()</code>:</p>\n\n<pre><code>if x.isalpha():\n</code></pre>\n\n<p>To integrate that:</p>\n\n<pre><code>def name_hi(x):\n    if x.isalpha():\n        print \"Hello, \" + x + \".\"\n    else:\n        print \"Invalid answer; try again.\"\n\nname_hi(raw_input(\"What's your name?\"))\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "reply_to_user": {"reputation": 1, "user_id": 5171185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6af2a98a058263a900d86dd71d65a641?s=128&d=identicon&r=PG&f=1", "display_name": "Beast2life", "link": "https://stackoverflow.com/users/5171185/beast2life"}, "edited": false, "score": 0, "creation_date": 1438208127, "post_id": 31712029, "comment_id": 51362145, "body": "@Beast2life - then you want <code>x.isalpha()</code>, as @cdarke commented above (added to my answer)."}], "tags": [], "owner": {"reputation": 16669, "user_id": 1231929, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/hLiYk.jpg?s=128&g=1", "display_name": "jme", "link": "https://stackoverflow.com/users/1231929/jme"}, "is_accepted": false, "score": 0, "last_activity_date": 1438207581, "creation_date": 1438207581, "answer_id": 31712029, "question_id": 31711915, "link": "https://stackoverflow.com/questions/31711915/how-do-i-to-make-an-answer-only-in-the-data-type-that-i-want-in-python/31712029#31712029", "title": "How do I to make an answer only in the data type that I want in Python?", "body": "<p>Checking for type is brittle. It's arguably better to just try doing what you want to do and see if it works:</p>\n\n<pre><code>def name_hi(x):\n    try:\n        print \"Hello\"+ x\n    except TypeError:\n        print \"Invaild answer,Try again\"\n</code></pre>\n\n<p>So that:</p>\n\n<pre><code>&gt;&gt;&gt; name_hi('steve')\nHellosteve\n&gt;&gt;&gt; name_hi(42)\nInvaild answer,Try again\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5171185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6af2a98a058263a900d86dd71d65a641?s=128&d=identicon&r=PG&f=1", "display_name": "Beast2life", "link": "https://stackoverflow.com/users/5171185/beast2life"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1438209757, "creation_date": 1438207066, "last_edit_date": 1438209757, "question_id": 31711915, "link": "https://stackoverflow.com/questions/31711915/how-do-i-to-make-an-answer-only-in-the-data-type-that-i-want-in-python", "title": "How do I to make an answer only in the data type that I want in Python?", "body": "<pre><code>def name_hi(x):\n    if type(x)!= &lt;type 'str'&gt; :\n        print \"Invaild answer,Try again\"\n    else:\n        print \"Hello\"+ x\nname_hi(raw_input(\"what's your name?\"))\n</code></pre>\n\n<p>How do I make sure that the answer I get is a string?</p>\n"}, {"tags": ["python", "compiler-errors", "pyqt", "pip", "pycharm"], "answers": [{"comments": [{"owner": {"reputation": 455, "user_id": 4714773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfc5dea9cac35762ef5b6ceb68a51d63?s=128&d=identicon&r=PG&f=1", "display_name": "Digvijayad", "link": "https://stackoverflow.com/users/4714773/digvijayad"}, "reply_to_user": {"reputation": 347, "user_id": 3817992, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/07ea5dd150de27430ceb0919a827a949?s=128&d=identicon&r=PG&f=1", "display_name": "NGXII", "link": "https://stackoverflow.com/users/3817992/ngxii"}, "edited": false, "score": 0, "creation_date": 1438214133, "post_id": 31712544, "comment_id": 51363859, "body": "I feel you there, try <a href=\"http://www.noktec.be/python/how-to-install-pyqt4-on-osx\" rel=\"nofollow noreferrer\">this</a>, they have shown the way to install pyqt  on mac by downloading the files directly from official website"}], "tags": [], "owner": {"reputation": 455, "user_id": 4714773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfc5dea9cac35762ef5b6ceb68a51d63?s=128&d=identicon&r=PG&f=1", "display_name": "Digvijayad", "link": "https://stackoverflow.com/users/4714773/digvijayad"}, "is_accepted": false, "score": 1, "last_activity_date": 1438210572, "creation_date": 1438210572, "answer_id": 31712544, "question_id": 31711812, "link": "https://stackoverflow.com/questions/31711812/how-to-get-pyqt4-working-with-pycharm/31712544#31712544", "title": "How to get PyQt4 working with PyCharm", "body": "<p>You can try to install PyQt4 by downloading it from the <a href=\"http://www.riverbankcomputing.co.uk/software/pyqt/download\" rel=\"nofollow\">official Website</a>. Remember to download PyQt version same as your python version. If you have python 2.7 32bit then download PyQt4 32bit even if your computer is 64 bit.<br>\nSimilarly, if you have Python 3.x 64bit then you need to download PyQt4 64bit.<br>\nYou can check your Python version from the default Python 'IDLE'. It should be similar to this.<br>\n<code>Python 3.4.3 (v3.4.3:9b73f1c3e601, Feb 24 2015, 22:43:06) [MSC v.1600 32 bit (Intel)] on win32</code></p>\n"}, {"tags": [], "owner": {"reputation": 658, "user_id": 3866312, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/dfea2f37d76cfb9421be5a418870a60c?s=128&d=identicon&r=PG&f=1", "display_name": "sonovice", "link": "https://stackoverflow.com/users/3866312/sonovice"}, "is_accepted": false, "score": 1, "last_activity_date": 1438250256, "creation_date": 1438250256, "answer_id": 31720626, "question_id": 31711812, "link": "https://stackoverflow.com/questions/31711812/how-to-get-pyqt4-working-with-pycharm/31720626#31720626", "title": "How to get PyQt4 working with PyCharm", "body": "<p>You could try <a href=\"http://sourceforge.net/projects/pyqtx/\" rel=\"nofollow\">PyQtX</a>. It's not perfectly up-to-date, but maybe a quick solutions in your case.</p>\n"}], "owner": {"reputation": 347, "user_id": 3817992, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/07ea5dd150de27430ceb0919a827a949?s=128&d=identicon&r=PG&f=1", "display_name": "NGXII", "link": "https://stackoverflow.com/users/3817992/ngxii"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 15883, "favorite_count": 0, "answer_count": 2, "score": 6, "last_activity_date": 1505931262, "creation_date": 1438206590, "last_edit_date": 1438213572, "question_id": 31711812, "link": "https://stackoverflow.com/questions/31711812/how-to-get-pyqt4-working-with-pycharm", "title": "How to get PyQt4 working with PyCharm", "body": "<p>So I'm trying to get a program that uses PyQt4 to work in PyCharm on my Mac, but whenever it tries to run, it says</p>\n\n<blockquote>\n  <p>INFO: Could not import backend \"PyQt4\":</p>\n  \n  <p>No module named PyQt4</p>\n</blockquote>\n\n<p>Trying to import PyQt4 using PyCharm's Package Manager generates this error:</p>\n\n<blockquote>\n  <p>Executed Command:</p>\n  \n  <blockquote>\n    <p>pip install PyQt4</p>\n  </blockquote>\n  \n  <p>Error Occurred:</p>\n  \n  <blockquote>\n    <p>0:428: execution error: The directory '/Users/pkillam/Library/Caches/pip/http' or its parent directory is not owned by the current user and the cache has been disabled. Please check the permissions and owner of that directory. If executing pip with sudo, you may want sudo's -H flag.</p>\n  </blockquote>\n  \n  <p>Proposed Solution:</p>\n  \n  <blockquote>\n    <p>Try to run this command from the system terminal. Make sure that you use the correct version of 'pip' installed for your Python interpreter located at '/System/Library/Frameworks/Python.framework/Versions/2.7/bin/python2.7'.</p>\n  </blockquote>\n</blockquote>\n\n<p>This only happens to certain packages which pip doesn't like, particularly those which use <code>configure.py</code> instead of <code>setup.py</code> as explained <a href=\"http://movingthelamppost.com/blog/html/2013/07/12/installing_pyqt____because_it_s_too_good_for_pip_or_easy_install_.html\" rel=\"noreferrer\">here</a>.  </p>\n\n<p>Attempting to run the command from the console generates this error:</p>\n\n<blockquote>\n  <p>$ pip install PyQt4</p>\n  \n  <p>Collecting PyQt4\n    Could not find a version that satisfies the requirement PyQt4 (from versions: )\n  No matching distribution found for PyQt4</p>\n  \n  <p>$</p>\n</blockquote>\n\n<p>Now, installing the package using homebrew claims to be successful, but I still get the initial error that PyQt could not be imported after homebrew installs it.. somewhere.</p>\n\n<p>I've been running around in circles with this for the past day, any ideas?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 15387, "user_id": 2588818, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/0PpNx.jpg?s=128&g=1", "display_name": "Two-Bit Alchemist", "link": "https://stackoverflow.com/users/2588818/two-bit-alchemist"}, "edited": false, "score": 1, "creation_date": 1438206575, "post_id": 31711781, "comment_id": 51361473, "body": "Why the restriction on using libraries, and why is the <code>datetime</code> module exempt from it?"}, {"owner": {"reputation": 269348, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "reply_to_user": {"reputation": 15387, "user_id": 2588818, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/0PpNx.jpg?s=128&g=1", "display_name": "Two-Bit Alchemist", "link": "https://stackoverflow.com/users/2588818/two-bit-alchemist"}, "edited": false, "score": 2, "creation_date": 1438206732, "post_id": 31711781, "comment_id": 51361559, "body": "@Two-BitAlchemist it&#39;s not uncommon to make an exception for libraries that are included with the language, i.e. don&#39;t need to be installed."}, {"owner": {"reputation": 15387, "user_id": 2588818, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/0PpNx.jpg?s=128&g=1", "display_name": "Two-Bit Alchemist", "link": "https://stackoverflow.com/users/2588818/two-bit-alchemist"}, "reply_to_user": {"reputation": 269348, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1438206894, "post_id": 31711781, "comment_id": 51361620, "body": "@MarkRansom That&#39;s a great guess. I would like for the OP to update their question with <i>their</i> reason."}], "answers": [{"comments": [{"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 3, "creation_date": 1438206859, "post_id": 31711820, "comment_id": 51361609, "body": "You can one-line it with <code>previous_month = datetime.now().month - 1 or 12</code>."}, {"owner": {"reputation": 849, "user_id": 2674572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ac98e0d627ba6399371ceea60fa7225?s=128&d=identicon&r=PG", "display_name": "or1426", "link": "https://stackoverflow.com/users/2674572/or1426"}, "edited": false, "score": 6, "creation_date": 1438207006, "post_id": 31711820, "comment_id": 51361663, "body": "I think using <code>(datetime.now().month - 1) % 12</code> is possibly a bit neater as it works if you subtract (or add) different numbers instead of 1. It also expresses the intent more clearly as years cycling is a textbook case of modular arithmetic. This is all pretty subjective though...."}, {"owner": {"reputation": 146743, "user_id": 126214, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9ff70f96fa67c2a3c80ecf0486138bc2?s=128&d=identicon&r=PG", "display_name": "Lennart Regebro", "link": "https://stackoverflow.com/users/126214/lennart-regebro"}, "edited": false, "score": 0, "creation_date": 1438233283, "post_id": 31711820, "comment_id": 51368650, "body": "One-lining is code golf. Code golf is unpythonic. Code should have a clear and easily understandable intent, especially when written for newbies. ;-)"}, {"owner": {"reputation": 813, "user_id": 3386440, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/39f3f642c33091cf98aed14cd3d65aba?s=128&d=identicon&r=PG&f=1", "display_name": "dyao", "link": "https://stackoverflow.com/users/3386440/dyao"}, "edited": false, "score": 0, "creation_date": 1438266015, "post_id": 31711820, "comment_id": 51388738, "body": "Its ok, I understood both answers pretty well. :)"}], "tags": [], "owner": {"reputation": 146743, "user_id": 126214, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9ff70f96fa67c2a3c80ecf0486138bc2?s=128&d=identicon&r=PG", "display_name": "Lennart Regebro", "link": "https://stackoverflow.com/users/126214/lennart-regebro"}, "is_accepted": true, "score": 12, "last_activity_date": 1438206625, "creation_date": 1438206625, "answer_id": 31711820, "question_id": 31711781, "link": "https://stackoverflow.com/questions/31711781/finding-the-previous-month/31711820#31711820", "title": "Finding the previous month", "body": "<p>It's very easy:</p>\n\n<pre><code>&gt;&gt;&gt; previous_month = datetime.now().month - 1\n&gt;&gt;&gt; if previous_month == 0:\n...     previous_month = 12\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 472, "user_id": 1536219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42fba274366594c2024ae2623f6561af?s=128&d=identicon&r=PG", "display_name": "JoshRomRock", "link": "https://stackoverflow.com/users/1536219/joshromrock"}, "reply_to_user": {"reputation": 269348, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1438207440, "post_id": 31711900, "comment_id": 51361863, "body": "@MarkRansom  You&#39;re right, it needs some adaptation. By the way, the duration <i>month</i> can have different meanings ;-)"}, {"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1438207667, "post_id": 31711900, "comment_id": 51361956, "body": "The question asks for the previous month, though, rather than for the date a month ago."}, {"owner": {"reputation": 146743, "user_id": 126214, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9ff70f96fa67c2a3c80ecf0486138bc2?s=128&d=identicon&r=PG", "display_name": "Lennart Regebro", "link": "https://stackoverflow.com/users/126214/lennart-regebro"}, "edited": false, "score": 3, "creation_date": 1438233436, "post_id": 31711900, "comment_id": 51368694, "body": "It doesn&#39;t need adaptation, it&#39;s fundamentally wrong. Welcome to the world of calendaring, where nothing is as easy as you think. ;-) And that&#39;s even before we get to time zones."}], "tags": [], "owner": {"reputation": 472, "user_id": 1536219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42fba274366594c2024ae2623f6561af?s=128&d=identicon&r=PG", "display_name": "JoshRomRock", "link": "https://stackoverflow.com/users/1536219/joshromrock"}, "is_accepted": false, "score": -4, "last_activity_date": 1438206993, "creation_date": 1438206993, "answer_id": 31711900, "question_id": 31711781, "link": "https://stackoverflow.com/questions/31711781/finding-the-previous-month/31711900#31711900", "title": "Finding the previous month", "body": "<p>If you want a date object:</p>\n\n<pre><code>import datetime\nd = datetime.date.today() - datetime.timedelta(days=30)\n&gt;&gt;&gt; datetime.date(2015, 6, 29)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 49301, "user_id": 3100115, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/46d2b7e69a0a4a82fefdd01a8cf476bd?s=128&d=identicon&r=PG&f=1", "display_name": "styvane", "link": "https://stackoverflow.com/users/3100115/styvane"}, "is_accepted": false, "score": 1, "last_activity_date": 1438240752, "last_edit_date": 1438240752, "creation_date": 1438207064, "answer_id": 31711914, "question_id": 31711781, "link": "https://stackoverflow.com/questions/31711781/finding-the-previous-month/31711914#31711914", "title": "Finding the previous month", "body": "<p>You can use the <a href=\"https://docs.python.org/2/library/calendar.html\" rel=\"nofollow\"><code>calendar</code></a> module</p>\n\n<pre><code>&gt;&gt;&gt; from calendar import  month_name, month_abbr\n&gt;&gt;&gt; d = datetime.now()\n&gt;&gt;&gt; month_name[d.month - 1] or month_name[-1]\n'June'\n&gt;&gt;&gt; month_abbr[d.month - 1] or month_abbr[-1]\n'Jun'\n&gt;&gt;&gt; \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 53, "user_id": 408056, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2e98fa8555057090556354c6764bca4a?s=128&d=identicon&r=PG", "display_name": "Buteman", "link": "https://stackoverflow.com/users/408056/buteman"}, "is_accepted": false, "score": 0, "last_activity_date": 1531249186, "last_edit_date": 1531249186, "creation_date": 1531246729, "answer_id": 51271803, "question_id": 31711781, "link": "https://stackoverflow.com/questions/31711781/finding-the-previous-month/51271803#51271803", "title": "Finding the previous month", "body": "<p>If you just want it as a string then do below process.</p>\n\n<pre><code>import datetime\nmonths =(\" Blank\", \"December\", \"January\", \"February\", \"March\", \"April\", \n \"May\",\"June\", \"July\",\"August\",\"September\",\"October\",\"November\")\nd = datetime.date.today()\nprint(months[d.month])\n</code></pre>\n"}], "owner": {"reputation": 813, "user_id": 3386440, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/39f3f642c33091cf98aed14cd3d65aba?s=128&d=identicon&r=PG&f=1", "display_name": "dyao", "link": "https://stackoverflow.com/users/3386440/dyao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6989, "favorite_count": 1, "accepted_answer_id": 31711820, "answer_count": 4, "score": 4, "last_activity_date": 1531249186, "creation_date": 1438206490, "question_id": 31711781, "link": "https://stackoverflow.com/questions/31711781/finding-the-previous-month", "title": "Finding the previous month", "body": "<p>I've seen some methods using <code>dateutil</code> module to do this, but is there a way to do this without just using the built in libs?</p>\n\n<p>For example, the current month right now is July. I can do this using the <code>datetime.now()</code> function. </p>\n\n<p>What would be the easiest way for python to return the previous month?</p>\n"}, {"tags": ["python", "plot", "contour"], "answers": [{"comments": [{"owner": {"reputation": 21022, "user_id": 348081, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fc6e3adc850c07248a46aaadc05fa59b?s=128&d=identicon&r=PG", "display_name": "JuanPablo", "link": "https://stackoverflow.com/users/348081/juanpablo"}, "edited": false, "score": 0, "creation_date": 1438207332, "post_id": 31711857, "comment_id": 51361815, "body": "but if the list  only have three values, this code works ?"}, {"owner": {"reputation": 41878, "user_id": 257465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/882a999c825707d8bfa799ee20bda1f2?s=128&d=identicon&r=PG", "display_name": "tzaman", "link": "https://stackoverflow.com/users/257465/tzaman"}, "reply_to_user": {"reputation": 21022, "user_id": 348081, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fc6e3adc850c07248a46aaadc05fa59b?s=128&d=identicon&r=PG", "display_name": "JuanPablo", "link": "https://stackoverflow.com/users/348081/juanpablo"}, "edited": false, "score": 0, "creation_date": 1438208733, "post_id": 31711857, "comment_id": 51362365, "body": "If the list has a single tuple with three values in it, then yes."}], "tags": [], "owner": {"reputation": 41878, "user_id": 257465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/882a999c825707d8bfa799ee20bda1f2?s=128&d=identicon&r=PG", "display_name": "tzaman", "link": "https://stackoverflow.com/users/257465/tzaman"}, "is_accepted": false, "score": 1, "last_activity_date": 1438206820, "creation_date": 1438206820, "answer_id": 31711857, "question_id": 31711762, "link": "https://stackoverflow.com/questions/31711762/contour-of-x-y-z-list-values/31711857#31711857", "title": "Contour of (x, y, z) list values", "body": "<p>Assuming you're just trying to figure out how to feed <code>contour()</code> with your <code>values</code> list:</p>\n\n<pre><code>p.contour(*zip(*values))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21022, "user_id": 348081, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fc6e3adc850c07248a46aaadc05fa59b?s=128&d=identicon&r=PG", "display_name": "JuanPablo", "link": "https://stackoverflow.com/users/348081/juanpablo"}, "is_accepted": false, "score": 0, "last_activity_date": 1569771091, "last_edit_date": 1592644375, "creation_date": 1438268083, "answer_id": 31727165, "question_id": 31711762, "link": "https://stackoverflow.com/questions/31711762/contour-of-x-y-z-list-values/31727165#31727165", "title": "Contour of (x, y, z) list values", "body": "<p>I find this solution</p>\n<pre><code>import numpy as np\nimport pylab as p\nfrom matplotlib.mlab import griddata\n\n\ndef main():\n\n    p.figure()\n\n    x = [1, 1, 2, 2]\n    y = [1, 2, 1, 2]\n    z = [0.1, 0.2, 0.5, 0.2]\n\n    p.scatter(x, y, color='k')\n\n    # define grid.\n    xi = np.linspace(0, 3, 1000)\n    yi = np.linspace(0, 3, 1000)\n    zi = griddata(x, y, z, xi, yi, interp='nn')\n    cs = p.contour(xi, yi, zi, 10)\n    p.clabel(cs, inline=1, fontsize=12)\n    p.colorbar()\n\n    p.show()\n\n\nif __name__ == '__main__':\n    main()\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/3fAgD.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3fAgD.jpg\" alt=\"ss\" /></a></p>\n\n"}], "owner": {"reputation": 21022, "user_id": 348081, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fc6e3adc850c07248a46aaadc05fa59b?s=128&d=identicon&r=PG", "display_name": "JuanPablo", "link": "https://stackoverflow.com/users/348081/juanpablo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 544, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1569771091, "creation_date": 1438206377, "last_edit_date": 1592644375, "question_id": 31711762, "link": "https://stackoverflow.com/questions/31711762/contour-of-x-y-z-list-values", "title": "Contour of (x, y, z) list values", "body": "<p>In python I can get a contour with:</p>\n<pre><code>import numpy as np\nimport pylab as p\n\n\ndef main():\n\n    delta = 1\n    x = np.arange(-4.0, 4.0, delta)\n    y = np.arange(-4.0, 4.0, delta)\n\n    len_x, len_y = len(x), len(y)\n    z = np.random.rand(len_x, len_y)\n\n    cs = p.contour(x, y, z)\n    p.clabel(cs, inline=1, fontsize=10)\n\n    p.show()\n\n\nif __name__ == '__main__':\n    main()\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/tv2oS.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/tv2oS.jpg\" alt=\"ss\" /></a></p>\n\n<p>how I can get the contour of a list of <code>(x, y, z)</code> values?</p>\n<pre><code>    delta = 1\n    x = np.arange(-4.0, 4.0, delta)\n    y = np.arange(-4.0, 4.0, delta)\n\n    values = [(x0, y0, z0), (x1, y1, z1), (x3, y3, z3)]\n\n    cs = p.contour(x, y, values)\n</code></pre>\n<h2>EDIT</h2>\n<p>the list have few values, less of len_x * len_y</p>\n"}, {"tags": ["python", "matplotlib", "ipython"], "comments": [{"owner": {"reputation": 51822, "user_id": 1552748, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7840b7a3579d2a7065d5c0aa804b5b92?s=128&d=identicon&r=PG", "display_name": "Paul H", "link": "https://stackoverflow.com/users/1552748/paul-h"}, "edited": false, "score": 0, "creation_date": 1438206648, "post_id": 31711729, "comment_id": 51361509, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/19410042/how-to-make-ipython-notebook-inline-matplotlib-graphics\">How to make ipython notebook inline matplotlib graphics</a>"}], "answers": [{"tags": [], "owner": {"reputation": 3120, "user_id": 4768939, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ce32086ddcf416c2218348c3756352b?s=128&d=identicon&r=PG&f=1", "display_name": "valentin", "link": "https://stackoverflow.com/users/4768939/valentin"}, "is_accepted": false, "score": 2, "last_activity_date": 1438206760, "creation_date": 1438206760, "answer_id": 31711843, "question_id": 31711729, "link": "https://stackoverflow.com/questions/31711729/get-matplotlib-to-show-figures/31711843#31711843", "title": "Get Matplotlib to show figures", "body": "<p>it is <code>plt.show()</code> and not <code>fig.show()</code></p>\n"}], "owner": {"reputation": 4144, "user_id": 3594588, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/3bdbd93bbb9a84d9635d498d9a50e08b?s=128&d=identicon&r=PG&f=1", "display_name": "bugsyb", "link": "https://stackoverflow.com/users/3594588/bugsyb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1438206760, "creation_date": 1438206266, "last_edit_date": 1438206400, "question_id": 31711729, "link": "https://stackoverflow.com/questions/31711729/get-matplotlib-to-show-figures", "title": "Get Matplotlib to show figures", "body": "<p>I have the following code in my IPython Notebook:</p>\n\n<pre><code>%matplotlib inline\nfig = plt.figure()\nfig.show()\n</code></pre>\n\n<p>After typing this, I see the following:</p>\n\n<p><code>&lt;matplotlib.figure.Figure at 0x192e4ef0&gt;</code></p>\n\n<p>How can I get matplotlib to show the empty figure?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 2896, "user_id": 5031339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82ce3852cc31d052ce2568e3a777875a?s=128&d=identicon&r=PG", "display_name": "NightShadeQueen", "link": "https://stackoverflow.com/users/5031339/nightshadequeen"}, "edited": false, "score": 0, "creation_date": 1438206326, "post_id": 31711716, "comment_id": 51361361, "body": "which version of python are you using?"}, {"owner": {"reputation": 223, "user_id": 3456127, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RcI5z.jpg?s=128&g=1", "display_name": "Ray", "link": "https://stackoverflow.com/users/3456127/ray"}, "edited": false, "score": 0, "creation_date": 1438206512, "post_id": 31711716, "comment_id": 51361446, "body": "What error message are you getting?"}], "answers": [{"comments": [{"owner": {"reputation": 223, "user_id": 3456127, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RcI5z.jpg?s=128&g=1", "display_name": "Ray", "link": "https://stackoverflow.com/users/3456127/ray"}, "edited": false, "score": 1, "creation_date": 1438206648, "post_id": 31711765, "comment_id": 51361510, "body": "Converting to floats may be more appropriate in case the user types a decimal number."}, {"owner": {"reputation": 318, "user_id": 2948051, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/612732401/picture?type=large", "display_name": "Jerry Murphy", "link": "https://stackoverflow.com/users/2948051/jerry-murphy"}, "edited": false, "score": 0, "creation_date": 1438206683, "post_id": 31711765, "comment_id": 51361534, "body": "thanks..would making them floats be better and then leaving out the float in the calc line be better?"}, {"owner": {"reputation": 40344, "user_id": 108130, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17a81b603f4a5f6d4eaa55b9fd6c06c5?s=128&d=identicon&r=PG", "display_name": "Nick Dandoulakis", "link": "https://stackoverflow.com/users/108130/nick-dandoulakis"}, "reply_to_user": {"reputation": 318, "user_id": 2948051, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/612732401/picture?type=large", "display_name": "Jerry Murphy", "link": "https://stackoverflow.com/users/2948051/jerry-murphy"}, "edited": false, "score": 0, "creation_date": 1438206977, "post_id": 31711765, "comment_id": 51361655, "body": "@JerryMurphy in python3x you get a float anyway. You&#39;d get an integer result with the <code>&#47;&#47;</code> operator."}, {"owner": {"reputation": 989, "user_id": 5039959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f68a4651473d073cb1647405bfcc8bc?s=128&d=identicon&r=PG&f=1", "display_name": "Clodion", "link": "https://stackoverflow.com/users/5039959/clodion"}, "reply_to_user": {"reputation": 223, "user_id": 3456127, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RcI5z.jpg?s=128&g=1", "display_name": "Ray", "link": "https://stackoverflow.com/users/3456127/ray"}, "edited": false, "score": 0, "creation_date": 1438207167, "post_id": 31711765, "comment_id": 51361737, "body": "@Ray and JerryMurphy: I&#39;ve just edited my answer. Thanks"}], "tags": [], "owner": {"reputation": 989, "user_id": 5039959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f68a4651473d073cb1647405bfcc8bc?s=128&d=identicon&r=PG&f=1", "display_name": "Clodion", "link": "https://stackoverflow.com/users/5039959/clodion"}, "is_accepted": true, "score": 6, "last_activity_date": 1438207102, "last_edit_date": 1438207102, "creation_date": 1438206389, "answer_id": 31711765, "question_id": 31711716, "link": "https://stackoverflow.com/questions/31711716/what-mistake-am-i-making-while-casting/31711765#31711765", "title": "What mistake am I making while casting?", "body": "<p>Input return strings! So, convert the three numbers by <code>int</code>! And as comment said, better converting directly in float.</p>\n\n<pre><code>num1 = float(input(\"Enter first number:\"))\nnum2 = float(input(\"Enter second number:\"))\nnum3 = float(input(\"Enter third number:\"))\n\nprint(\"Output:\")\ncalc = (num1 + num2 + num3)/ 2\nprint(\"{0}+{1}+{2})/2 is:{3}\".format(num1,num2,num3,calc))\n\n&gt;&gt;&gt; \nResult:\nEnter first number:12\nEnter second number:2\nEnter third number:5\nOutput:\n12+2+5)/2 is:9.5\n&gt;&gt;&gt; \n</code></pre>\n"}], "owner": {"reputation": 318, "user_id": 2948051, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/612732401/picture?type=large", "display_name": "Jerry Murphy", "link": "https://stackoverflow.com/users/2948051/jerry-murphy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 1, "accepted_answer_id": 31711765, "answer_count": 1, "score": 1, "last_activity_date": 1438207102, "creation_date": 1438206222, "last_edit_date": 1438206982, "question_id": 31711716, "link": "https://stackoverflow.com/questions/31711716/what-mistake-am-i-making-while-casting", "title": "What mistake am I making while casting?", "body": "<p>I am getting an error in the line thats trying to calculate the value of calc</p>\n\n<pre><code>num1 = input(\"Enter first number:\")\nnum2 = input(\"Enter second number:\")\nnum3 = input(\"Enter third number:\")\n\nprint(\"Output:\")\ncalc = float((num1 + num2 + num3)/ 2)\nprint(\"{0}+{1}+{2})/2 is:{3}\".format(num1,num2,num3,calc))\n</code></pre>\n\n<p>This is what I went with thanks for the help...</p>\n\n<pre><code>num1 = float(input(\"Enter first number:\"))\nnum2 = float(input(\"Enter second number:\"))\nnum3 = float(input(\"Enter third number:\"))\n\nprint(\"Output:\")\ncalc = ((num1 + num2 + num3)/ 2)\nprint(\"{0}+{1}+{2})/2 is:{3}\".format(num1,num2,num3,calc))\n</code></pre>\n"}, {"tags": ["python", "python-2.7", "pandas", "scipy", "probability-density"], "comments": [{"owner": {"reputation": 38434, "user_id": 3657742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/027d13e2b9077479fa7857166c272c16?s=128&d=identicon&r=PG&f=1", "display_name": "chrisb", "link": "https://stackoverflow.com/users/3657742/chrisb"}, "edited": false, "score": 0, "creation_date": 1438216151, "post_id": 31711686, "comment_id": 51364375, "body": "Can you post your data (<code>X</code>)?"}, {"owner": {"reputation": 871, "user_id": 1941253, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/7cb5d3ad2e6c287fe92201889c6e7b57?s=128&d=identicon&r=PG", "display_name": "Yasmin", "link": "https://stackoverflow.com/users/1941253/yasmin"}, "reply_to_user": {"reputation": 38434, "user_id": 3657742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/027d13e2b9077479fa7857166c272c16?s=128&d=identicon&r=PG&f=1", "display_name": "chrisb", "link": "https://stackoverflow.com/users/3657742/chrisb"}, "edited": false, "score": 0, "creation_date": 1438249346, "post_id": 31711686, "comment_id": 51377298, "body": "I updated the post with X value"}, {"owner": {"reputation": 4969, "user_id": 4592059, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/96a9cbb1200973090eb787c8ccbe4829?s=128&d=identicon&r=PG&f=1", "display_name": "Geeocode", "link": "https://stackoverflow.com/users/4592059/geeocode"}, "edited": false, "score": 0, "creation_date": 1438250952, "post_id": 31711686, "comment_id": 51378405, "body": "Could you in brief explain what your purpose of comparing?"}, {"owner": {"reputation": 871, "user_id": 1941253, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/7cb5d3ad2e6c287fe92201889c6e7b57?s=128&d=identicon&r=PG", "display_name": "Yasmin", "link": "https://stackoverflow.com/users/1941253/yasmin"}, "edited": false, "score": 0, "creation_date": 1438251549, "post_id": 31711686, "comment_id": 51378728, "body": "Initially I want to get the number of Zero crossings and I have 3D data, so I got estimated pdf using gaussian_kde and then I got first derivative, and I noticed that whatever the data I have, I got number of peaks =9. So I did the above example as proof of concepts to the same idea since I know exactly the number of peaks in my data, but in 3D data I don&#39;t. When I got first derivative of  the output of stats.norm.pdf the result is similar to the number of peaks data and the shape of the pdf. However, making derivative to the gaussian_kde gives constant result regardless the data input"}, {"owner": {"reputation": 4969, "user_id": 4592059, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/96a9cbb1200973090eb787c8ccbe4829?s=128&d=identicon&r=PG&f=1", "display_name": "Geeocode", "link": "https://stackoverflow.com/users/4592059/geeocode"}, "edited": false, "score": 0, "creation_date": 1438268138, "post_id": 31711686, "comment_id": 51390350, "body": "The raws: <code>grid = 100j #X= np.mgrid[min_x:max_x:grid] #Z = np.reshape(kernel(X), X.shape)</code>  Has no effect at all in this situation. I double checked it.  I just wrote it, because perhaps this is a reason of unexpected results you got. As I could figure out you calculate the gaussian base of a pritty linear data, so it is straightforward that will get a standard U-shape. The pdf stats however are calculated sequentially base of the separated element of the peek set successively. Why do you even expect similar result, please explain."}, {"owner": {"reputation": 871, "user_id": 1941253, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/7cb5d3ad2e6c287fe92201889c6e7b57?s=128&d=identicon&r=PG", "display_name": "Yasmin", "link": "https://stackoverflow.com/users/1941253/yasmin"}, "edited": false, "score": 0, "creation_date": 1438268287, "post_id": 31711686, "comment_id": 51390476, "body": "So how can I plot KDE of the original data without testing it on another data populated based on range of the original data ?"}, {"owner": {"reputation": 4969, "user_id": 4592059, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/96a9cbb1200973090eb787c8ccbe4829?s=128&d=identicon&r=PG&f=1", "display_name": "Geeocode", "link": "https://stackoverflow.com/users/4592059/geeocode"}, "edited": false, "score": 0, "creation_date": 1438269590, "post_id": 31711686, "comment_id": 51391385, "body": "OK maybe I found: Just tried to find an error in your code:   <code>kernel = stats.gaussian_kde(X)</code> pass <code>X</code> as argument initializing the class.   Then <code>plt.plot(X, kernel(X)) </code> pass <code>X</code> as argument. This is usually doesn&#39;t a proper thing in Python. As I wrote in the source code as example: <code>kernel = stats.gaussian_kde(values)   Z = np.reshape(kernel(positions).T, X.shape)</code> So as you can see, you have to first initialize KDE with <b>DATA, i.e.values</b> then to call with <b>positions</b>. But you initialized and called both with data."}, {"owner": {"reputation": 871, "user_id": 1941253, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/7cb5d3ad2e6c287fe92201889c6e7b57?s=128&d=identicon&r=PG", "display_name": "Yasmin", "link": "https://stackoverflow.com/users/1941253/yasmin"}, "edited": false, "score": 0, "creation_date": 1438270076, "post_id": 31711686, "comment_id": 51391734, "body": "But, again I want the output of KDE of original X not positions, so I can make first derivative on the output of KDE. That&#39;s why I did kernel(X). I&#39;d prefer if you could write an answer with your supported code to plot pdf output vs KDE of original data and save the output of KDE to apply first derivative on it"}, {"owner": {"reputation": 4969, "user_id": 4592059, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/96a9cbb1200973090eb787c8ccbe4829?s=128&d=identicon&r=PG&f=1", "display_name": "Geeocode", "link": "https://stackoverflow.com/users/4592059/geeocode"}, "edited": false, "score": 0, "creation_date": 1438271695, "post_id": 31711686, "comment_id": 51392895, "body": "I got you now, then it is not a mistake that the values of <code>df</code> are exactly the same as the generated values of <code>support</code>?"}, {"owner": {"reputation": 871, "user_id": 1941253, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/7cb5d3ad2e6c287fe92201889c6e7b57?s=128&d=identicon&r=PG", "display_name": "Yasmin", "link": "https://stackoverflow.com/users/1941253/yasmin"}, "edited": false, "score": 0, "creation_date": 1438272199, "post_id": 31711686, "comment_id": 51393229, "body": "They are the same, check line df = pd.DataFrame(support)"}, {"owner": {"reputation": 4969, "user_id": 4592059, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/96a9cbb1200973090eb787c8ccbe4829?s=128&d=identicon&r=PG&f=1", "display_name": "Geeocode", "link": "https://stackoverflow.com/users/4592059/geeocode"}, "reply_to_user": {"reputation": 871, "user_id": 1941253, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/7cb5d3ad2e6c287fe92201889c6e7b57?s=128&d=identicon&r=PG", "display_name": "Yasmin", "link": "https://stackoverflow.com/users/1941253/yasmin"}, "edited": false, "score": 0, "creation_date": 1438282804, "post_id": 31711686, "comment_id": 51399454, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/84734/discussion-between-george-solymosi-and-carmen\">continue this discussion in chat</a>."}], "answers": [{"tags": [], "owner": {"reputation": 4969, "user_id": 4592059, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/96a9cbb1200973090eb787c8ccbe4829?s=128&d=identicon&r=PG&f=1", "display_name": "Geeocode", "link": "https://stackoverflow.com/users/4592059/geeocode"}, "is_accepted": false, "score": 0, "last_activity_date": 1438346905, "creation_date": 1438346905, "answer_id": 31746608, "question_id": 31711686, "link": "https://stackoverflow.com/questions/31711686/should-stats-norm-pdf-gives-same-result-as-stats-gaussian-kde-in-python/31746608#31746608", "title": "Should stats.norm.pdf gives same result as stats.gaussian_kde in Python?", "body": "<p>In the row below you make pdf calculations in every peak-point along 100 datapoints with the <code>std = 0,03</code>. So you get a matrix with array with <strong>100 elements per row</strong> then you <strong>summerize</strong> it <strong>elementwise</strong>, <strong>result:</strong>\n<a href=\"https://i.stack.imgur.com/PeEFt.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PeEFt.png\" alt=\"enter image description here\"></a></p>\n\n<p>Thus you get a graph with 9 narrow -because of <code>std = 0,03</code>- U-shape.\nAre you sure, that this was your purpose with this row?</p>\n\n<p>This will never get the similar graph as the kernel estimate base of the original data, <strong>result:</strong>\n<a href=\"https://i.stack.imgur.com/Pwu3g.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Pwu3g.png\" alt=\"enter image description here\"></a></p>\n\n<blockquote>\n  <p>pkfun = sum(stats.norm.pdf(support, loc=mean[i], scale=std) for i in\n  range(0,npeaks))</p>\n</blockquote>\n"}], "owner": {"reputation": 871, "user_id": 1941253, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/7cb5d3ad2e6c287fe92201889c6e7b57?s=128&d=identicon&r=PG", "display_name": "Yasmin", "link": "https://stackoverflow.com/users/1941253/yasmin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 221, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1438346905, "creation_date": 1438206126, "last_edit_date": 1438272151, "question_id": 31711686, "link": "https://stackoverflow.com/questions/31711686/should-stats-norm-pdf-gives-same-result-as-stats-gaussian-kde-in-python", "title": "Should stats.norm.pdf gives same result as stats.gaussian_kde in Python?", "body": "<p>I was trying to estimate PDF of 1-D using <code>gaussian_kde</code>. However, when I plot pdf using <code>stats.norm.pdf</code>, it gives me different result. Please correct me if I am wrong, I think they should give quite similar result. Here's my code. </p>\n\n<pre><code>        npeaks = 9\n        mean = np.array([0.2, 0.3, 0.38, 0.55, 0.65,0.7,0.75,0.8,0.82]) #peak locations\n        support = np.arange(0,1.01,0.01)\n        std = 0.03\n        pkfun = sum(stats.norm.pdf(support, loc=mean[i], scale=std) for i in range(0,npeaks))\n\n        df = pd.DataFrame(support)\n        X = df.iloc[:,0]\n\n        min_x, max_x = X.min(), X.max()\n\n        plt.figure(1)\n        plt.plot(support,pkfun)\n\n        kernel = stats.gaussian_kde(X)\n\n        grid = 100j\n        X= np.mgrid[min_x:max_x:grid]\n\n        Z = np.reshape(kernel(X), X.shape)\n        # plot KDE\n        plt.figure(2)\n        plt.plot(X, Z) \n        plt.show()\n</code></pre>\n\n<p>Also, when I get the first derivative of <code>stats.gaussian_kde</code> was far from the original signal. However, the result of first derivative of <code>stats.norm.pdf</code> does make sense. So, I am assuming I might have error in my code above.   </p>\n\n<p>Value of  X= np.mgrid[min_x:max_x:grid]:</p>\n\n<pre><code>[\n\n 0.          0.01010101  0.02020202  0.03030303  0.04040404  0.05050505\n  0.06060606  0.07070707  0.08080808  0.09090909  0.1010101   0.11111111\n  0.12121212  0.13131313  0.14141414  0.15151515  0.16161616  0.17171717\n  0.18181818  0.19191919  0.2020202   0.21212121  0.22222222  0.23232323\n  0.24242424  0.25252525  0.26262626  0.27272727  0.28282828  0.29292929\n  0.3030303   0.31313131  0.32323232  0.33333333  0.34343434  0.35353535\n  0.36363636  0.37373737  0.38383838  0.39393939  0.4040404   0.41414141\n  0.42424242  0.43434343  0.44444444  0.45454545  0.46464646  0.47474747\n  0.48484848  0.49494949  0.50505051  0.51515152  0.52525253  0.53535354\n  0.54545455  0.55555556  0.56565657  0.57575758  0.58585859  0.5959596\n  0.60606061  0.61616162  0.62626263  0.63636364  0.64646465  0.65656566\n  0.66666667  0.67676768  0.68686869  0.6969697   0.70707071  0.71717172\n  0.72727273  0.73737374  0.74747475  0.75757576  0.76767677  0.77777778\n  0.78787879  0.7979798   0.80808081  0.81818182  0.82828283  0.83838384\n  0.84848485  0.85858586  0.86868687  0.87878788  0.88888889  0.8989899\n  0.90909091  0.91919192  0.92929293  0.93939394  0.94949495  0.95959596\n  0.96969697  0.97979798  0.98989899  1.        ]\n</code></pre>\n\n<p>Value of X = df.iloc[:,0]:</p>\n\n<pre><code>[ 0.    0.01  0.02  0.03  0.04  0.05  0.06  0.07  0.08  0.09  0.1   0.11\n  0.12  0.13  0.14  0.15  0.16  0.17  0.18  0.19  0.2   0.21  0.22  0.23\n  0.24  0.25  0.26  0.27  0.28  0.29  0.3   0.31  0.32  0.33  0.34  0.35\n  0.36  0.37  0.38  0.39  0.4   0.41  0.42  0.43  0.44  0.45  0.46  0.47\n  0.48  0.49  0.5   0.51  0.52  0.53  0.54  0.55  0.56  0.57  0.58  0.59\n  0.6   0.61  0.62  0.63  0.64  0.65  0.66  0.67  0.68  0.69  0.7   0.71\n  0.72  0.73  0.74  0.75  0.76  0.77  0.78  0.79  0.8   0.81  0.82  0.83\n  0.84  0.85  0.86  0.87  0.88  0.89  0.9   0.91  0.92  0.93  0.94  0.95\n  0.96  0.97  0.98  0.99  1.  ] \n</code></pre>\n"}, {"tags": ["python", "numpy", "statistics", "scipy", "weather"], "answers": [{"comments": [{"owner": {"reputation": 149, "user_id": 1088639, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/650e35544e8935f32d8cc97c2bbc69cb?s=128&d=identicon&r=PG", "display_name": "gamemusicmaker", "link": "https://stackoverflow.com/users/1088639/gamemusicmaker"}, "edited": false, "score": 1, "creation_date": 1438368062, "post_id": 31712852, "comment_id": 51439640, "body": "Worked wonderfully, thanks again. I&#39;ve created an <a href=\"https://gist.github.com/mike-charles/0ea03b5634da95a3d296\" rel=\"nofollow noreferrer\">iPython notebook</a> to document the methodology."}, {"owner": {"reputation": 149, "user_id": 1088639, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/650e35544e8935f32d8cc97c2bbc69cb?s=128&d=identicon&r=PG", "display_name": "gamemusicmaker", "link": "https://stackoverflow.com/users/1088639/gamemusicmaker"}, "edited": false, "score": 0, "creation_date": 1446148876, "post_id": 31712852, "comment_id": 54636333, "body": "<a href=\"https://gist.github.com/mikecharles/0ea03b5634da95a3d296\" rel=\"nofollow noreferrer\">Here&#39;s</a> the correct link to the iPython notebook"}], "tags": [], "owner": {"reputation": 62045, "user_id": 1461210, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fa93b9461ed24899945403cae69e02ee?s=128&d=identicon&r=PG", "display_name": "ali_m", "link": "https://stackoverflow.com/users/1461210/ali-m"}, "is_accepted": true, "score": 2, "last_activity_date": 1438269239, "last_edit_date": 1438269239, "creation_date": 1438212542, "answer_id": 31712852, "question_id": 31711683, "link": "https://stackoverflow.com/questions/31711683/how-can-i-manipulate-the-cdf-of-a-sample-such-that-it-matches-that-of-a-differen/31712852#31712852", "title": "How can I manipulate the CDF of a sample such that it matches that of a different sample?", "body": "<p>All you need is a function that approximates the CDF of A, and one that approximates the inverse CDF (or PPF) of B. You would then simply compute <em>q<sub>corrected</sub> = PPF<sub>B</sub>(CDF<sub>A</sub>(q))</em>.</p>\n\n<p>For your example data we can simply use the <code>.cdf</code> and <code>.ppf</code> methods for <code>scipy.stats.gamma</code> <a href=\"http://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.rv_continuous.html#scipy.stats.rv_continuous\" rel=\"nofollow noreferrer\">frozen distributions</a> with the appropriate parameters:</p>\n\n<pre><code>from scipy import stats\n\ndistA = stats.gamma(0.7, scale=50)\ndistB = stats.gamma(0.5, scale=70)\n\ncorrected_quantiles = distB.ppf(distA.cdf(quantiles[1:]))\n</code></pre>\n\n<p>Of course, for real data you are unlikely to know the parameters of the true underlying distributions. If you have a good idea of their functional form, you could try performing a maximum likelihood fit to your data in order to estimate them:</p>\n\n<pre><code>distA = stats.gamma(*stats.gamma.fit(A))\ndistB = stats.gamma(*stats.gamma.fit(B))\n</code></pre>\n\n<p>Failing that, you could try to interpolate/extrapolate from your empirical CDFs, for example using <a href=\"http://docs.scipy.org/doc/scipy/reference/generated/scipy.interpolate.InterpolatedUnivariateSpline.html\" rel=\"nofollow noreferrer\"><code>scipy.interpolate.InterpolatedUnivariateSpline</code></a>:</p>\n\n<pre><code>from scipy.interpolate import InterpolatedUnivariateSpline\n\n# cubic spline interpolation\nitp_A_cdf = InterpolatedUnivariateSpline(quantiles[1:], A_cdf, k=3)\n# the PPF is the inverse of the CDF, so we simply reverse the order of the\n# x &amp; y arguments to InterpolatedUnivariateSpline\nitp_B_ppf = InterpolatedUnivariateSpline(B_cdf, quantiles[1:], k=3)\n\nitp_corrected_quantiles = itp_B_ppf(itp_A_cdf(quantiles[1:]))\n\nfig, ax = plt.subplots(1, 1)\nax.hold(True)\nax.plot(quantiles[1:], A_cdf, '-r', lw=3, label='A')\nax.plot(quantiles[1:], B_cdf, '-k', lw=3, label='B')\nax.plot(corrected_quantiles, A_cdf, '--xr', lw=3, ms=10, mew=2, label='exact')\nax.plot(itp_corrected_quantiles, A_cdf, '--+b', lw=3, ms=10, mew=2,\n        label='interpolated')\nax.legend(loc=5)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/DbZzm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DbZzm.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 149, "user_id": 1088639, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/650e35544e8935f32d8cc97c2bbc69cb?s=128&d=identicon&r=PG", "display_name": "gamemusicmaker", "link": "https://stackoverflow.com/users/1088639/gamemusicmaker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 836, "favorite_count": 1, "accepted_answer_id": 31712852, "answer_count": 1, "score": 2, "last_activity_date": 1438369720, "creation_date": 1438206118, "last_edit_date": 1438369720, "question_id": 31711683, "link": "https://stackoverflow.com/questions/31711683/how-can-i-manipulate-the-cdf-of-a-sample-such-that-it-matches-that-of-a-differen", "title": "How can I manipulate the CDF of a sample such that it matches that of a different sample?", "body": "<p>I want to use CDF matching to correct raw model forecasts of precipitation (but the application is fairly generic).</p>\n\n<p>Assuming CDF B below is the observed CDF (the CDF that I trust), I want to calculate the difference between CDF A and B so that on a given day I can take the precipitation forecast and shift it by the difference between A and B so that it is more representative of B instead of A.</p>\n\n<p>So for each x-value, I need to get the y-value of A, then where B is that same value I need to get the x-value, giving me 2 x-values from which to calculate a difference.</p>\n\n<p>Of course, this only gives me discrete x-values where I know the correction, so I guess I'll need to do additional work to correct an x-value that falls between 2 others.</p>\n\n<p>Here is the Python code I used to generate the samples:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import numpy.random\nimport numpy as np\nfrom scipy.interpolate import interp1d\nimport matplotlib.pyplot as plt\n\nquantiles = [0, 1, 2, 3, 4, 5, 7, 10, 15, 20, 30, 40, 50, 60, 75, 100]\n\n# Generate fake precip data\nsample_size = 100000\nA = numpy.random.gamma(0.7, scale=50, size=sample_size)\nB = numpy.random.gamma(0.5, scale=70, size=sample_size)\nens = (40 - 20) * np.random.random_sample((21)) + 20\n\n# Calculate histograms\nA_pdf, edges = np.histogram(A, bins=quantiles)\nA_pdf = A_pdf / sample_size\nA_cdf = np.cumsum(A_pdf)\nB_pdf, edges = np.histogram(B, bins=quantiles)\nB_pdf = B_pdf / sample_size\nB_cdf = np.cumsum(B_pdf)\n\n# Plot CDFs\nplt.figure()\nplt.plot(quantiles[1:], A_cdf, 'x-', c='r', lw=3, ms=10, mew=2, label='A')\nplt.plot(quantiles[1:], B_cdf, '+-', c='k', lw=3, ms=15, mew=2, label='B')\nplt.xticks(quantiles[1:])\nplt.legend(loc='upper left')\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/aCtH8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/aCtH8.png\" alt=\"enter image description here\"></a></p>\n\n<p>Thanks everyone!</p>\n"}, {"tags": ["python", "python-2.7", "gmail-api"], "comments": [{"owner": {"reputation": 81718, "user_id": 3617886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/y26OT.jpg?s=128&g=1", "display_name": "Tholle", "link": "https://stackoverflow.com/users/3617886/tholle"}, "edited": false, "score": 0, "creation_date": 1438209866, "post_id": 31711588, "comment_id": 51362765, "body": "So if you write <code>label_ids=[&#39;SENT&#39;]</code>, it also works? Does your <code>query</code> or <code>maxResults</code> have any effect?"}, {"owner": {"reputation": 540, "user_id": 1004253, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/PTMrt.png?s=128&g=1", "display_name": "mishap_n", "link": "https://stackoverflow.com/users/1004253/mishap-n"}, "reply_to_user": {"reputation": 81718, "user_id": 3617886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/y26OT.jpg?s=128&g=1", "display_name": "Tholle", "link": "https://stackoverflow.com/users/3617886/tholle"}, "edited": false, "score": 0, "creation_date": 1438266065, "post_id": 31711588, "comment_id": 51388785, "body": "Yes, it does also work with SENT, and a query. ie: If I say lebel_ids[&#39;SENT&#39;], query=&#39;someone@somewhere.com&#39; it will only return messages sent to that address. It just ignores maxResults."}, {"owner": {"reputation": 977, "user_id": 4204155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b97cac237052e03909c015c998f96e1?s=128&d=identicon&r=PG&f=1", "display_name": "SGC", "link": "https://stackoverflow.com/users/4204155/sgc"}, "edited": false, "score": 0, "creation_date": 1438279143, "post_id": 31711588, "comment_id": 51397337, "body": "If you want to retreive messages.list from particular labels, then change request like: maxResults=10, query=&quot;in:personal to:XXXX@gmail.com&quot;. I am able to retrieve from personal label too with results just 10. Let me know if your question is different."}, {"owner": {"reputation": 540, "user_id": 1004253, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/PTMrt.png?s=128&g=1", "display_name": "mishap_n", "link": "https://stackoverflow.com/users/1004253/mishap-n"}, "edited": false, "score": 0, "creation_date": 1438283105, "post_id": 31711588, "comment_id": 51399612, "body": "Interesting: if I remove label_ids and use just a query like: <code>maxResults=10, query=&quot;in:personal is:unread&quot;</code> and there are 6 unread, I get back the 6.   But if I do:  <code>maxResults=3, query=&quot;in:personal is:unread&quot;</code> I get a key error, if I bump that up to over the number of unread, I do not.    Alternately if I leave the label in, and do something like this on just the inbox:  <code>maxResults=10, label_ids=[&#39;INBOX&#39;], query=&#39;is:unread&#39;</code>  I don&#39;t get a key error, but it just ignores maxResults totally.   Weird."}, {"owner": {"reputation": 690, "user_id": 3377170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ed1f46ee137f59695a3340aac0f89a0?s=128&d=identicon&r=PG&f=1", "display_name": "Brandon Jewett-Hall", "link": "https://stackoverflow.com/users/3377170/brandon-jewett-hall"}, "edited": false, "score": 0, "creation_date": 1438294969, "post_id": 31711588, "comment_id": 51405435, "body": "Re: key error, are you certain that the subsequent page responses have a &#39;messages&#39; field?  Note that the code above checks for it only on the first page; I recommend checking on subsequent pages as well."}], "owner": {"reputation": 540, "user_id": 1004253, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/PTMrt.png?s=128&g=1", "display_name": "mishap_n", "link": "https://stackoverflow.com/users/1004253/mishap-n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 759, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1438205740, "creation_date": 1438205740, "question_id": 31711588, "link": "https://stackoverflow.com/questions/31711588/how-to-properly-set-max-results-and-get-messages-from-other-labels-w-google-api", "title": "How to properly set max results and get messages from other labels w/ google api?", "body": "<p>I have two questions. I'm just trying to learn how to use the gmail API to read email from an IMAP server. I'm using Python 2.7.10. But hit a snag, and I can't find this in the docs, so here to find out what I'm doing wrong.</p>\n\n<p>My two questions are: </p>\n\n<ul>\n<li>How do I write this properly to set my maxresults to 3? 2) </li>\n<li>Why can I not get messages from any other label except INBOX and SENT?</li>\n</ul>\n\n<p>Thanks! </p>\n\n<pre><code>import httplib2\nimport os\nimport imaplib as imaplib\n\nfrom apiclient import discovery\nimport oauth2client\nfrom oauth2client import client\nfrom oauth2client import tools\n\nfrom apiclient import errors\n\ntry:\n    import argparse\n    flags = argparse.ArgumentParser(parents=[tools.argparser]).parse_args()\nexcept ImportError:\n    flags = None\n\nSCOPES = 'https://www.googleapis.com/auth/gmail.modify'\nCLIENT_SECRET_FILE = 'client_secret.json'\nAPPLICATION_NAME = 'Gmail API Quickstart'\n\n\ndef get_credentials():\n    home_dir = os.path.expanduser('~')\n    credential_dir = os.path.join(home_dir, '.credentials')\n    if not os.path.exists(credential_dir):\n        os.makedirs(credential_dir)\n    credential_path = os.path.join(credential_dir,\n                                   'gmail-quickstart.json')\n\n    store = oauth2client.file.Storage(credential_path)\n    credentials = store.get()\n    if not credentials or credentials.invalid:\n        flow = client.flow_from_clientsecrets(CLIENT_SECRET_FILE, SCOPES)\n        flow.user_agent = APPLICATION_NAME\n        if flags:\n            credentials = tools.run_flow(flow, store, flags)\n        else: # Needed only for compatability with Python 2.6\n            credentials = tools.run(flow, store)\n        print 'Storing credentials to ' + credential_path\n    return credentials\n\n\n\ndef getStuff(service, user_id, maxResults, label_ids=[], query=''):\n\n    ## seeing what is passed \n\n    print service\n    print user_id\n    print maxResults\n    print label_ids\n    print query\n\n    try:\n        response = service.users().messages().list(userId=user_id, maxResults=maxResults, labelIds=label_ids, q=query).execute()\n        messages = []\n        if 'messages' in response:\n            messages.extend(response['messages'])\n\n        while 'nextPageToken' in response:\n            page_token = response['nextPageToken']\n            response = service.users().messages().list(userId=user_id, maxResults=maxResults, labelIds=label_ids, q=query, pageToken=page_token).execute()\n            messages.extend(response['messages'])\n\n        return messages\n    except errors.HttpError, error:\n        print 'An error occurred: %s' % error\n\n\n\ndef main():\n    credentials = get_credentials()\n    http = credentials.authorize(httplib2.Http())\n    service = discovery.build('gmail', 'v1', http=http)\n    msgs = getStuff(service, 'me', 3, label_ids=['INBOX'], query='is:unread') #omg why did this take so long to figure out??\n    print msgs #just see what it returns in the list\n\n\nif __name__ == '__main__':\n    main()\n</code></pre>\n"}, {"tags": ["python", "r", "machine-learning", "random-forest"], "answers": [{"tags": [], "owner": {"reputation": 472, "user_id": 2612496, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001964360246/picture?type=large", "display_name": "Ping Jin", "link": "https://stackoverflow.com/users/2612496/ping-jin"}, "is_accepted": false, "score": 0, "last_activity_date": 1438230882, "last_edit_date": 1438230882, "creation_date": 1438225553, "answer_id": 31714561, "question_id": 31711555, "link": "https://stackoverflow.com/questions/31711555/random-forest-with-specified-false-positive-and-sensitivity/31714561#31714561", "title": "random forest with specified false positive and sensitivity", "body": "<p>This is a workaround that may be worth trying. (Sorry that I do not have enough reputation to put it as a comment.)</p>\n\n<p>As</p>\n\n<ul>\n<li>sensitivity = TP/(TP + FN)</li>\n<li>specificity = TN/(TN + FP)</li>\n<li>ER = (TP + TN)/(TP + FN + TN + FP)</li>\n</ul>\n\n<p>(Notations from <a href=\"https://en.wikipedia.org/wiki/Sensitivity_and_specificity\" rel=\"nofollow\">Sensitivity_and_specificity</a>)</p>\n\n<p>If you duplicate some positive/negative samples (or increase the weights), the ER will approximate sensitivity/specificity. </p>\n\n<p>So if you want to maximize sensitivity, then you can sample/duplicate some positive samples into the dataset then train your RF on it. For maximizing specificity, you can do the same thing on negative samples.</p>\n"}, {"tags": [], "owner": {"reputation": 1335, "user_id": 3166238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/206d0e22e653f44f245ac47bd6bad29b?s=128&d=identicon&r=PG&f=1", "display_name": "fatih", "link": "https://stackoverflow.com/users/3166238/fatih"}, "is_accepted": false, "score": 0, "last_activity_date": 1438335540, "creation_date": 1438335540, "answer_id": 31742947, "question_id": 31711555, "link": "https://stackoverflow.com/questions/31711555/random-forest-with-specified-false-positive-and-sensitivity/31742947#31742947", "title": "random forest with specified false positive and sensitivity", "body": "<p>You can do a grid serarch over the 'regularazation' parameters to best match your target behavior.</p>\n\n<p>Parameters of interest:</p>\n\n<ul>\n<li>max depth</li>\n<li>number of features</li>\n</ul>\n"}], "owner": {"reputation": 2005, "user_id": 3689314, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/de01a0264b9b4e2b932cd084fa53a9f7?s=128&d=identicon&r=PG&f=1", "display_name": "mt88", "link": "https://stackoverflow.com/users/3689314/mt88"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1185, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1438335540, "creation_date": 1438205647, "question_id": 31711555, "link": "https://stackoverflow.com/questions/31711555/random-forest-with-specified-false-positive-and-sensitivity", "title": "random forest with specified false positive and sensitivity", "body": "<p>Using the randomForest package in R, I was able to train a random forest that minimized overall error rate. However, what I want to do is train two random forests, one that first minimizes false positive rate (~ 0) and then overall error rate, and one that first maximizes sensitivity (~1), and then overall error. Another construction of the problem would be: given a false positive rate and sensitivity rate, train two different random forests that satisfy one of the rates respectively, and then minimize overall error rate. Does anyone know if theres an r package or python package, or any other software out there that does this and or how to do this? Thanks for the help.</p>\n"}, {"tags": ["python", "json"], "comments": [{"owner": {"reputation": 59346, "user_id": 444036, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/My2AZ.jpg?s=128&g=1", "display_name": "Paulo Scardine", "link": "https://stackoverflow.com/users/444036/paulo-scardine"}, "edited": false, "score": 5, "creation_date": 1438205573, "post_id": 31711484, "comment_id": 51361057, "body": "Check for a BOM marker. The BOM marker is a Unicode character with code point U+FEFF that specifies the endianness of an Unicode text stream. It makes no sense for UTF-8 but some text editors put this in the beginning of the file (and it is invisible)."}, {"owner": {"reputation": 59346, "user_id": 444036, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/My2AZ.jpg?s=128&g=1", "display_name": "Paulo Scardine", "link": "https://stackoverflow.com/users/444036/paulo-scardine"}, "edited": false, "score": 1, "creation_date": 1438205650, "post_id": 31711484, "comment_id": 51361082, "body": "Looks like a dupe of <a href=\"http://stackoverflow.com/questions/13156395/python-load-json-file-with-utf-8-bom-header\" title=\"python load json file with utf 8 bom header\">stackoverflow.com/questions/13156395/&hellip;</a>"}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1438206093, "post_id": 31711484, "comment_id": 51361262, "body": "If you print the <code>repr</code> output of each line the file you will see exactly what is there"}, {"owner": {"reputation": 4871, "user_id": 2398354, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EG7iJ.jpg?s=128&g=1", "display_name": "TomDotTom", "link": "https://stackoverflow.com/users/2398354/tomdottom"}, "edited": false, "score": 1, "creation_date": 1438206109, "post_id": 31711484, "comment_id": 51361268, "body": "I think Paulo is correct, the above example should works without a problem."}], "owner": {"reputation": 6606, "user_id": 2352319, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/7a342a28c8d2252d1b8022a6fc4d7f95?s=128&d=identicon&r=PG&f=1", "display_name": "mar tin", "link": "https://stackoverflow.com/users/2352319/mar-tin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 118, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1438206183, "creation_date": 1438205359, "last_edit_date": 1438206183, "question_id": 31711484, "link": "https://stackoverflow.com/questions/31711484/python-json-raises-valueerror-exception-on-valid-json", "title": "Python json raises ValueError exception on valid JSON", "body": "<p>I have this JSON file, called <code>my_file.json</code>:</p>\n\n<pre><code>{\n\"t shirt\": [\n    \"tee\"\n],\n\"neck\": [\n    \"neckline\"\n],\n\"grey\": [\n    \"gray\"\n]\n}\n</code></pre>\n\n<p>I am reading it with:</p>\n\n<pre><code>f = open('my_file.json', 'r')\njson.load(f)\n</code></pre>\n\n<p>I get the exception <code>ValueError(\"No JSON object could be decoded\")</code>, as if the file wasn't valid JSON, which it actually is (even checked it with a validator).</p>\n\n<p>What's wrong?</p>\n"}, {"tags": ["python", "matrix", "vector", "row"], "answers": [{"tags": [], "owner": {"reputation": 3192, "user_id": 4667484, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b4971faccfbc4ecb4ccdc276b292f59?s=128&d=identicon&r=PG&f=1", "display_name": "Charlie Haley", "link": "https://stackoverflow.com/users/4667484/charlie-haley"}, "is_accepted": false, "score": 0, "last_activity_date": 1438205793, "creation_date": 1438205793, "answer_id": 31711602, "question_id": 31711470, "link": "https://stackoverflow.com/questions/31711470/python-transfering-from-matrix-to-vector-odd-result/31711602#31711602", "title": "Python transfering from matrix to vector, odd result", "body": "<p>What you are doing is resetting <code>l</code> every time you jump from row to row within an image, so you are creating a matrix sized 100x512, and every time you iterate over another row, you write over what you wrote previously.  Simply move <code>l=0</code> to outside of the for loop that iterates over rows.</p>\n\n<pre><code>dimensions=(100,393216)\nB=np.zeros(dimensions)\nfor i in range(1,101):\n    A=color.rgb2gray(io.imread('/home/oria/Desktop/DB/%s.ppm' %(i)))\n    l=0\n    for j in range(0,768):\n        for k in range(0,512):\n            B[i-1][l]=A[j][k]\n            l=l+1\n</code></pre>\n"}], "owner": {"reputation": 1413, "user_id": 1920178, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/kSUAH.jpg?s=128&g=1", "display_name": "Oria Gruber", "link": "https://stackoverflow.com/users/1920178/oria-gruber"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1438205793, "creation_date": 1438205294, "question_id": 31711470, "link": "https://stackoverflow.com/questions/31711470/python-transfering-from-matrix-to-vector-odd-result", "title": "Python transfering from matrix to vector, odd result", "body": "<p>I have a 100 images named 1 to 100, I want to read each image into a matrix A, and then fit the matrix A into a row vector of another matrix B. Pretty simple.</p>\n\n<p>Each one of those images is 768x512=393216 and i have a 100 images, so my matrix B should be 100x393216 (each image is one row)</p>\n\n<p>Here is my code:</p>\n\n<pre><code>dimensions=(100,393216)\nB=np.zeros(dimensions)\nfor i in range(1,101):\n    A=color.rgb2gray(io.imread('/home/oria/Desktop/DB/%s.ppm' %(i)))\n    for j in range(0,768):\n        l=0\n        for k in range(0,512):\n            B[i-1][l]=A[j][k]\n            l=l+1\n</code></pre>\n\n<p>I can't figure out why this doesn't work. But it doesn't. in the end of this process, the matrix A is not the last row of the matrix B.</p>\n"}, {"tags": ["python", "mysql", "sqlalchemy"], "answers": [{"tags": [], "owner": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "is_accepted": false, "score": 0, "last_activity_date": 1550127976, "creation_date": 1550127976, "answer_id": 54684859, "question_id": 31711449, "link": "https://stackoverflow.com/questions/31711449/remove-quotes-in-query-generated-by-sqlalchemy/54684859#54684859", "title": "Remove quotes in query generated by SQLAlchemy", "body": "<p>In order to pass the unit argument keyword as is use a <a href=\"https://docs.sqlalchemy.org/en/latest/core/sqlelement.html#sqlalchemy.sql.expression.text\" rel=\"nofollow noreferrer\"><code>text()</code></a> construct:</p>\n\n<pre><code>Item.query.filter(\n    Item.created &lt;= sqlalchemy.func.timestampadd(text('MINUTE'), 1, datetime_now))\n</code></pre>\n"}], "owner": {"reputation": 1326, "user_id": 1005909, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d90997d0eb87121af6b24407d90d9a55?s=128&d=identicon&r=PG", "display_name": "user1005909", "link": "https://stackoverflow.com/users/1005909/user1005909"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 806, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1550127976, "creation_date": 1438205200, "last_edit_date": 1495541770, "question_id": 31711449, "link": "https://stackoverflow.com/questions/31711449/remove-quotes-in-query-generated-by-sqlalchemy", "title": "Remove quotes in query generated by SQLAlchemy", "body": "<p>This is different from <a href=\"https://stackoverflow.com/questions/31362484/using-a-sqlalchemy-integer-field-to-create-a-timedelta-object-for-comparison\">Using a SQLAlchemy Integer field to create a timedelta object for comparison</a> because that thread is asking which function to use when adding time. The function was found for their version of MySQL, however, the followup edits of the user digress from their original question and do not answer this question.</p>\n\n<p>I'm using MySQL. I want to use a function called timestampadd. <a href=\"https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_timestampadd\" rel=\"nofollow noreferrer\">https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_timestampadd</a> Its first parameter is the unit of time that I'm adding, EG: MINUTE, HOUR, DAY.</p>\n\n<p>When writing the SQLAlchemy query, I can't do something like</p>\n\n<pre><code>datetime_now = datetime.datetime.utcnow()\nItem.query.filter(Item.created &lt;= sqlalchemy.func.timestampadd(MINUTE, 1, datetime_now))\n</code></pre>\n\n<p>If I do this, I'll get an undefined error for <code>MINUTE</code>. I also tried:</p>\n\n<pre><code>Item.query.filter(Item.created &lt;= sqlalchemy.func.timestampadd('MINUTE', 1, datetime_now))\n</code></pre>\n\n<p>But this will generate the timestampadd call with quotes around the unit, which causes a MySQL error. How would I remove the quotes around <code>MINUTE</code> in the generated query?</p>\n"}, {"tags": ["python", "machine-learning", "png", "scikit-learn"], "comments": [{"owner": {"reputation": 23147, "user_id": 676634, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/84f619d24e0f165f2ee36db34a911c4a?s=128&d=identicon&r=PG", "display_name": "Andreas Mueller", "link": "https://stackoverflow.com/users/676634/andreas-mueller"}, "edited": false, "score": 0, "creation_date": 1438352902, "post_id": 31711391, "comment_id": 51430954, "body": "Depending on your images, feeding raw pixels into a classifier will likely not work. You can try it, but you will probably be more successful using feature extraction using scikit-image or a trained convolutional neural network as from sklearn-theano for example."}], "answers": [{"comments": [{"owner": {"reputation": 23147, "user_id": 676634, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/84f619d24e0f165f2ee36db34a911c4a?s=128&d=identicon&r=PG", "display_name": "Andreas Mueller", "link": "https://stackoverflow.com/users/676634/andreas-mueller"}, "edited": false, "score": 0, "creation_date": 1438352850, "post_id": 31712378, "comment_id": 51430911, "body": "Pixels. All images need to have the same number of pixels."}, {"owner": {"reputation": 4969, "user_id": 4592059, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/96a9cbb1200973090eb787c8ccbe4829?s=128&d=identicon&r=PG&f=1", "display_name": "Geeocode", "link": "https://stackoverflow.com/users/4592059/geeocode"}, "reply_to_user": {"reputation": 365, "user_id": 4905989, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/305de7f210e1aa951377c6692b23cb79?s=128&d=identicon&r=PG&f=1", "display_name": "Troll_Hunter", "link": "https://stackoverflow.com/users/4905989/troll-hunter"}, "edited": false, "score": 0, "creation_date": 1438360819, "post_id": 31712378, "comment_id": 51435863, "body": "@Troll_Hunter You have to resize all of your images to a constant, same size like say 256x256 or 128x128, or 96x96 or any size which is suitable to extract relevant information from it. To each images belong (mostly) one (grayscale)  or three (RGB) value representing the given color."}], "tags": [], "owner": {"reputation": 4969, "user_id": 4592059, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/96a9cbb1200973090eb787c8ccbe4829?s=128&d=identicon&r=PG&f=1", "display_name": "Geeocode", "link": "https://stackoverflow.com/users/4592059/geeocode"}, "is_accepted": false, "score": 0, "last_activity_date": 1438360725, "last_edit_date": 1438360725, "creation_date": 1438209668, "answer_id": 31712378, "question_id": 31711391, "link": "https://stackoverflow.com/questions/31711391/how-to-put-personal-png-dataset-into-sci-kit-learn-for-image-identification/31712378#31712378", "title": "How to put personal PNG dataset into Sci-Kit Learn for Image Identification?", "body": "<p><code>n_samples</code> is the number of images.</p>\n\n<p><code>n_features</code> is the image data itself.</p>\n\n<p>You have to create a matrix with the shape <code>(number of images x number of image points)</code>, then pass to the classifier. </p>\n\n<p>You have to resize all of your images to a constant, same size like say 256x256 or 128x128, or 96x96 or any size which is suitable to extract relevant information from it. To each images belong (mostly) one (grayscale)  or three (RGB) value representing the given color.</p>\n\n<p>If you really intend to classify images with the highest performance you should use <strong>convolutional network</strong> and you should get a <strong>GPU</strong> with reasonable performance, however the process works with <strong>CPU</strong> too, but much more slower.</p>\n"}, {"comments": [{"owner": {"reputation": 365, "user_id": 4905989, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/305de7f210e1aa951377c6692b23cb79?s=128&d=identicon&r=PG&f=1", "display_name": "Troll_Hunter", "link": "https://stackoverflow.com/users/4905989/troll-hunter"}, "edited": false, "score": 0, "creation_date": 1438358032, "post_id": 31748657, "comment_id": 51434319, "body": "I did this, and it worked to some extent however my images are more complicated than the digits dataset so I have memory errors. Is there a better way to analyze more complicated images?"}, {"owner": {"reputation": 4969, "user_id": 4592059, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/96a9cbb1200973090eb787c8ccbe4829?s=128&d=identicon&r=PG&f=1", "display_name": "Geeocode", "link": "https://stackoverflow.com/users/4592059/geeocode"}, "reply_to_user": {"reputation": 365, "user_id": 4905989, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/305de7f210e1aa951377c6692b23cb79?s=128&d=identicon&r=PG&f=1", "display_name": "Troll_Hunter", "link": "https://stackoverflow.com/users/4905989/troll-hunter"}, "edited": false, "score": 0, "creation_date": 1438360098, "post_id": 31748657, "comment_id": 51435458, "body": "@Troll_Hunter If you use CNN-s you have no need to flatten images to a single row, simply you can use 2D convolutional layer."}], "tags": [], "owner": {"reputation": 23147, "user_id": 676634, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/84f619d24e0f165f2ee36db34a911c4a?s=128&d=identicon&r=PG", "display_name": "Andreas Mueller", "link": "https://stackoverflow.com/users/676634/andreas-mueller"}, "is_accepted": true, "score": 1, "last_activity_date": 1438352977, "creation_date": 1438352977, "answer_id": 31748657, "question_id": 31711391, "link": "https://stackoverflow.com/questions/31711391/how-to-put-personal-png-dataset-into-sci-kit-learn-for-image-identification/31748657#31748657", "title": "How to put personal PNG dataset into Sci-Kit Learn for Image Identification?", "body": "<p>If you want to use raw pixels as features (as in the digits example) you need to resize / reshape / pad the images to have the same number of pixels for each image. Then you need to flatten each image to a single row, and stack them into an array.\nThis will only work for very simple, aligned and normalized images.</p>\n"}], "owner": {"reputation": 365, "user_id": 4905989, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/305de7f210e1aa951377c6692b23cb79?s=128&d=identicon&r=PG&f=1", "display_name": "Troll_Hunter", "link": "https://stackoverflow.com/users/4905989/troll-hunter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2502, "favorite_count": 0, "accepted_answer_id": 31748657, "answer_count": 2, "score": 0, "last_activity_date": 1438360725, "creation_date": 1438204945, "last_edit_date": 1438274109, "question_id": 31711391, "link": "https://stackoverflow.com/questions/31711391/how-to-put-personal-png-dataset-into-sci-kit-learn-for-image-identification", "title": "How to put personal PNG dataset into Sci-Kit Learn for Image Identification?", "body": "<p>I am attempting to create a Python program that will identify images and I am using the Sci-Kit Learn machine learning package. I have already done a tutorial they provide for identifying digits (this is the link to the tutorial: <a href=\"http://scikit-learn.org/stable/tutorial/basic/tutorial.html#introduction\" rel=\"nofollow\">http://scikit-learn.org/stable/tutorial/basic/tutorial.html#introduction</a>). Now, I would like to use Sci-Kit Learn's <code>svm.SVC</code> classifier to identify images from my own dataset of PNG images, but I do not know how to do so. I read that the <code>fit(X, y)</code> method needs to take in <code>[n_samples, n_features]</code> array and a <code>[n_samples]</code> array; however, I do not quite understand what they mean by <code>n_samples</code> and <code>n_features</code>. Here is relevant code from my program:</p>\n\n<pre><code>from PIL import Image\nimport numpy as np\nimport glob\nevent_png_pair = []\nfor file in glob.glob('../../Pictures/Trial/*.png'):\n    img = Image.open(file, 'r')\n    ''' Some image resizing code '''\n    img_conv = img.convert(\"L\")\n    datum = np.array(img_conv)\n    ''' Some name parsing below '''\n    name = file\n    name = name.replace('.png', '')[::-1]\n    name_list = list(name)\n    number_char_list = name_list[:name_list.index('_')]\n    number_list = number_char_list[::-1]\n    event_number = int(''.join(number_list))\n    ''' Create tuple with event number and corresponding np array from image '''\n    event_png_pair.append((event_number, datum))\n</code></pre>\n\n<p>Clearly the above isn't really that helpful, it just shows how I went about interpreting data from the PNG image. Could anybody provide any guidance on how to create a dataset that could be interpreted by Sci-Kit Learn?</p>\n\n<p>UPDATE: I am now gonna try to create a dataset like the digits dataset except with my own images. I will make <code>n_samples</code> the number of images and <code>n_features</code> the image data. My <code>target</code> will be an array <code>[1, 2]</code> because I am only trying to distinguish between two types images. If there is any relevant information on how to put an image dataset into Sci-Kit Learn could somebody please provide that information.</p>\n"}, {"tags": ["python", "multiprocessing", "threadpool"], "comments": [{"owner": {"reputation": 696, "user_id": 5170753, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-x_fAeerAfNA/AAAAAAAAAAI/AAAAAAAAAGI/MMwVGA12oKI/photo.jpg?sz=128", "display_name": "Martin Alderete", "link": "https://stackoverflow.com/users/5170753/martin-alderete"}, "edited": false, "score": 0, "creation_date": 1438205698, "post_id": 31711378, "comment_id": 51361103, "body": "This seems similar to <a href=\"http://stackoverflow.com/questions/18176178/python-multiprocessing-process-or-pool-for-what-i-am-doing\" title=\"python multiprocessing process or pool for what i am doing\">stackoverflow.com/questions/18176178/&hellip;</a>  Thanks"}, {"owner": {"reputation": 2249, "user_id": 5162426, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/87ad09f80bf6b32bbbbdbc4930475607?s=128&d=identicon&r=PG&f=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/5162426/anonymous"}, "reply_to_user": {"reputation": 696, "user_id": 5170753, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-x_fAeerAfNA/AAAAAAAAAAI/AAAAAAAAAGI/MMwVGA12oKI/photo.jpg?sz=128", "display_name": "Martin Alderete", "link": "https://stackoverflow.com/users/5170753/martin-alderete"}, "edited": false, "score": 0, "creation_date": 1438206067, "post_id": 31711378, "comment_id": 51361247, "body": "@MartinAlderete I have read that post. However, I ask some different questions here that need answering. He is using two target functions while I am using one, he passes no arguments while I pass multiple, and he does not have to be concerned with his target being an instance method, as mine is. I have done a lot of research on this so far, and both <code>Pool</code> and <code>Process</code> seem to behave differently under different contexts, and it certainly seems that one would be better in certain situations, while in others it wouldn&#39;t. I thought it appropriate to start a new question."}], "answers": [{"comments": [{"owner": {"reputation": 2249, "user_id": 5162426, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/87ad09f80bf6b32bbbbdbc4930475607?s=128&d=identicon&r=PG&f=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/5162426/anonymous"}, "edited": false, "score": 0, "creation_date": 1438207043, "post_id": 31711778, "comment_id": 51361680, "body": "Thank you for the answer. My main concern in choosing one over the other is the consideration of the machines number of processors. In Pool, you can set it so that there are the same number of processes as cpus. But by using <code>Process</code>, the number of cpus comes in nowhere. Will this be handled on its own? Will it result in slightly more time to go through by using <code>Process</code>? I would like to use <code>Process</code>, and <code>Pool</code> is giving me a very hard time with all of its pickle errors, but <code>Process</code> just doesn&#39;t feel concrete enough like <code>Pool</code> does."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2489252"}, "reply_to_user": {"reputation": 2249, "user_id": 5162426, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/87ad09f80bf6b32bbbbdbc4930475607?s=128&d=identicon&r=PG&f=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/5162426/anonymous"}, "edited": false, "score": 1, "creation_date": 1438274433, "post_id": 31711778, "comment_id": 51394561, "body": "I think &quot;Process&quot; is more of a &quot;bare bones&quot; approach, as far as I know, you&#39;d have to manage it manually. When you spawn a process but all CPUs are busy, it will be queued until a CPU becomes free again. This could potentially be a problem if you are dispatching too many processes at once which are waiting (it could easily eat up your system&#39;s available memory if the number is &quot;relatively&quot; large)"}, {"owner": {"reputation": 2249, "user_id": 5162426, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/87ad09f80bf6b32bbbbdbc4930475607?s=128&d=identicon&r=PG&f=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/5162426/anonymous"}, "edited": false, "score": 0, "creation_date": 1438284387, "post_id": 31711778, "comment_id": 51400309, "body": "Yes, the memory was a problem when trying to use <code>Process</code>. I have gotten it to work with <code>Pool</code>, thank you for your advice, I&#39;ll mark this as answered."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2489252"}, "is_accepted": true, "score": 22, "last_activity_date": 1438206479, "creation_date": 1438206479, "answer_id": 31711778, "question_id": 31711378, "link": "https://stackoverflow.com/questions/31711378/python-multiprocessing-how-to-know-to-use-pool-or-process/31711778#31711778", "title": "Python multiprocessing: How to know to use Pool or Process?", "body": "<p>I think the <code>Pool</code> class is typically more convenient, but it depends whether you want your results ordered or unordered.</p>\n\n<p>Say you want to create 4 random strings (e.g,. could be a random user ID generator or so):</p>\n\n<pre><code>import multiprocessing as mp\nimport random\nimport string\n\n# Define an output queue\noutput = mp.Queue()\n\n# define a example function\ndef rand_string(length, output):\n    \"\"\" Generates a random string of numbers, lower- and uppercase chars. \"\"\"\n    rand_str = ''.join(random.choice(\n                    string.ascii_lowercase\n                    + string.ascii_uppercase\n                    + string.digits)\n               for i in range(length))\n    output.put(rand_str)\n\n# Setup a list of processes that we want to run\nprocesses = [mp.Process(target=rand_string, args=(5, output)) for x in range(4)]\n\n# Run processes\nfor p in processes:\n    p.start()\n\n# Exit the completed processes\nfor p in processes:\n    p.join()\n\n# Get process results from the output queue\nresults = [output.get() for p in processes]\n\nprint(results)\n\n# Output\n# ['yzQfA', 'PQpqM', 'SHZYV', 'PSNkD']\n</code></pre>\n\n<p>Here, the order probably doesn't matter. I am not sure if there is a better way to do it, but if I want to keep track of results in the order in which the functions are called, I typically return tuples with an ID as first item, e.g., </p>\n\n<pre><code># define a example function\ndef rand_string(length, pos, output):\n    \"\"\" Generates a random string of numbers, lower- and uppercase chars. \"\"\"\n    rand_str = ''.join(random.choice(\n                    string.ascii_lowercase\n                    + string.ascii_uppercase\n                    + string.digits)\n                for i in range(length))\n    output.put((pos, rand_str))\n\n# Setup a list of processes that we want to run\nprocesses = [mp.Process(target=rand_string, args=(5, x, output)) for x in range(4)]\n\nprint(processes)\n\n# Output\n# [(1, '5lUya'), (3, 'QQvLr'), (0, 'KAQo6'), (2, 'nj6Q0')]\n</code></pre>\n\n<p>This let's me sort the results then:</p>\n\n<pre><code>results.sort()\nresults = [r[1] for r in results]\nprint(results)\n\n# Output:\n# ['KAQo6', '5lUya', 'nj6Q0', 'QQvLr']\n</code></pre>\n\n<h2>The Pool class</h2>\n\n<p>Now to your question: How is this different from the <code>Pool</code> class?\nYou'd typically prefer <code>Pool.map</code> to return ordered list of results without going through the hoop of creating tuples and sorting them by ID. Thus, I would say it is typically more efficient.</p>\n\n<pre><code>def cube(x):\n    return x**3\n\npool = mp.Pool(processes=4)\nresults = pool.map(cube, range(1,7))\nprint(results)\n\n# output:\n# [1, 8, 27, 64, 125, 216]\n</code></pre>\n\n<p>Equivalently, there is also an \"apply\" method:</p>\n\n<pre><code>pool = mp.Pool(processes=4)\nresults = [pool.apply(cube, args=(x,)) for x in range(1,7)]\nprint(results)\n\n# output:\n# [1, 8, 27, 64, 125, 216]\n</code></pre>\n\n<p>Both <code>Pool.apply</code> and <code>Pool.map</code> will lock the main program until a process has finished.</p>\n\n<p>Now, you also have <code>Pool.apply_async</code> and <code>Pool.map_async</code>, which return the result as soon as the process has finished, which is essentially similar to the <code>Process</code> class above. The advantage may be that they provide you with the convenient <code>apply</code> and <code>map</code> functionality that you know from Python's in-built <code>apply</code> and <code>map</code></p>\n"}, {"tags": [], "owner": {"reputation": 8692, "user_id": 2118130, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/4c625ee20608ac0826ae23d70886b0d6?s=128&d=identicon&r=PG", "display_name": "Cristian Garcia", "link": "https://stackoverflow.com/users/2118130/cristian-garcia"}, "is_accepted": false, "score": 2, "last_activity_date": 1582132848, "creation_date": 1582132848, "answer_id": 60305937, "question_id": 31711378, "link": "https://stackoverflow.com/questions/31711378/python-multiprocessing-how-to-know-to-use-pool-or-process/60305937#60305937", "title": "Python multiprocessing: How to know to use Pool or Process?", "body": "<p>You can easily do this with <a href=\"https://github.com/cgarciae/pypeln/\" rel=\"nofollow noreferrer\">pypeln</a>:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import pypeln as pl\n\nstage = pl.process.map(\n    CreateMatrixMp, \n    range(self.numPixels), \n    workers=poolCount, \n    maxsize=2,\n)\n\n# iterate over it in the main process\nfor x in stage:\n   # code\n\n# or convert it to a list\ndata = list(stage)\n</code></pre>\n"}], "owner": {"reputation": 2249, "user_id": 5162426, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/87ad09f80bf6b32bbbbdbc4930475607?s=128&d=identicon&r=PG&f=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/5162426/anonymous"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 22555, "favorite_count": 13, "accepted_answer_id": 31711778, "answer_count": 2, "score": 17, "last_activity_date": 1582132848, "creation_date": 1438204903, "question_id": 31711378, "link": "https://stackoverflow.com/questions/31711378/python-multiprocessing-how-to-know-to-use-pool-or-process", "title": "Python multiprocessing: How to know to use Pool or Process?", "body": "<p>So I have an algorithm I am writing, and the function <code>multiprocess</code> is supposed to call another function, <code>CreateMatrixMp()</code>, on as many processes as there are cpus, in parallel. I have never done multiprocessing before, and cannot be certain which one of the below methods is more efficient. The word \"efficient\" being used in the context of the function <code>CreateMatrixMp()</code> needing to potentially be called thousands of times.I have read all of the documentation on the python <code>multiprocessing</code> module, and have come to these two possibilities:</p>\n\n<p>First is using the <code>Pool</code> class:</p>\n\n<pre><code>def MatrixHelper(self, args):\n    return self.CreateMatrix(*args)\n\ndef Multiprocess(self, sigmaI, sigmaX):\n\n    cpus = mp.cpu_count()\n    print('Number of cpu\\'s to process WM: %d' % cpus)\n    poolCount = cpus*2\n    args = [(sigmaI, sigmaX, i) for i in range(self.numPixels)]\n\n    pool = mp.Pool(processes = poolCount, maxtasksperchild= 2)\n    tempData = pool.map(self.MatrixHelper, args)\n    pool.close()\n    pool.join()\n</code></pre>\n\n<p>And next is using the <code>Process</code> class:</p>\n\n<pre><code>def Multiprocess(self, sigmaI, sigmaX):\n\n    cpus = mp.cpu_count()\n    print('Number of cpu\\'s to process WM: %d' % cpus)\n\n    processes = [mp.Process(target = self.CreateMatrixMp, args = (sigmaI, sigmaX, i,)) for i in range(self.numPixels)]\n    for p in processes:\n        p.start()\n    for p in processes:\n        p.join()\n</code></pre>\n\n<p><code>Pool</code> seems to be the better choice. I have read that it causes less overhead. And <code>Process</code> does not consider the number of cpus on the machine. The only problem is that using <code>Pool</code> in this manner gives me error after error, and whenever I fix one, there is a new one underneath it. <code>Process</code> seems easier to implement, and for all I know it may be the better choice. What does your experience tell you?</p>\n\n<p>If <code>Pool</code> should be used, then am I right in choosing <code>map()</code>? It would be preferred that order is maintained. I have <code>tempData = pool.map(...)</code> because the <code>map</code> function is supposed to return a list of the results of every process. I am not sure how <code>Process</code> handles its returned data. </p>\n"}, {"tags": ["c#", "python", "python-2.7", "enums"], "comments": [{"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1438205282, "post_id": 31711366, "comment_id": 51360930, "body": "Did you try if/elifs?"}, {"owner": {"reputation": 2896, "user_id": 5031339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82ce3852cc31d052ce2568e3a777875a?s=128&d=identicon&r=PG", "display_name": "NightShadeQueen", "link": "https://stackoverflow.com/users/5031339/nightshadequeen"}, "edited": false, "score": 2, "creation_date": 1438205628, "post_id": 31711366, "comment_id": 51361077, "body": "<a href=\"http://stackoverflow.com/questions/36932/how-can-i-represent-an-enum-in-python\">Related</a>"}, {"owner": {"reputation": 527, "user_id": 2434214, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/8d218cbfa366924395c8eaa3de8db55a?s=128&d=identicon&r=PG", "display_name": "user2345", "link": "https://stackoverflow.com/users/2434214/user2345"}, "reply_to_user": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1438208953, "post_id": 31711366, "comment_id": 51362459, "body": "i am using if/elifs in other part of my code where i need to check differnt conditions @PadraicCunningham"}], "answers": [{"comments": [{"owner": {"reputation": 527, "user_id": 2434214, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/8d218cbfa366924395c8eaa3de8db55a?s=128&d=identicon&r=PG", "display_name": "user2345", "link": "https://stackoverflow.com/users/2434214/user2345"}, "edited": false, "score": 0, "creation_date": 1438218484, "post_id": 31711678, "comment_id": 51364945, "body": "just curious is there any other way to implement, without importing other modules and make it minimalistic"}, {"owner": {"reputation": 51632, "user_id": 208880, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/de311342220232e618cb27c9936ab9bf?s=128&d=identicon&r=PG", "display_name": "Ethan Furman", "link": "https://stackoverflow.com/users/208880/ethan-furman"}, "reply_to_user": {"reputation": 527, "user_id": 2434214, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/8d218cbfa366924395c8eaa3de8db55a?s=128&d=identicon&r=PG", "display_name": "user2345", "link": "https://stackoverflow.com/users/2434214/user2345"}, "edited": false, "score": 0, "creation_date": 1438223394, "post_id": 31711678, "comment_id": 51365990, "body": "@SaiGanesh: Many other ways -- See the &#39;related&#39; link above.  However, modules are a good thing, don&#39;t be afraid of them.  :)"}, {"owner": {"reputation": 527, "user_id": 2434214, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/8d218cbfa366924395c8eaa3de8db55a?s=128&d=identicon&r=PG", "display_name": "user2345", "link": "https://stackoverflow.com/users/2434214/user2345"}, "edited": false, "score": 0, "creation_date": 1438780993, "post_id": 31711678, "comment_id": 51589462, "body": "how does c# verify and compare the values inside the enum  <code>if ((SerialProcessValue)serialData == SerialProcessValue.SERIAL_PACKET_START)</code>  Where <code>SerialProcessValue</code> is enum and <code>serialData</code> is a varible which contains the serail buffer data, It has to check whether the <code>serialData</code> contains any start byte / stop byte in it"}], "tags": [], "owner": {"reputation": 51632, "user_id": 208880, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/de311342220232e618cb27c9936ab9bf?s=128&d=identicon&r=PG", "display_name": "Ethan Furman", "link": "https://stackoverflow.com/users/208880/ethan-furman"}, "is_accepted": true, "score": 0, "last_activity_date": 1438208108, "last_edit_date": 1438208108, "creation_date": 1438206101, "answer_id": 31711678, "question_id": 31711366, "link": "https://stackoverflow.com/questions/31711366/enums-from-c-to-python-2-7/31711678#31711678", "title": "enums from c# to python (2.7)", "body": "<p>Using the <a href=\"https://pypi.python.org/pypi/enum34\" rel=\"nofollow\">backported Enum</a>*:</p>\n\n<pre><code>from enum import Enum, IntEnum\n\nclass SerialProcessState(Enum):\n    search_start = 1\n    verify_elements = 2\n    data = 3\n    search_end = 4\n\nclass SerialProcessValue(IntEnum):\n    packet_start = 0xF0\n    packet_end = 0xF1\n    ...\n</code></pre>\n\n<p>You can then access them as <code>SerialProcessValue.packet_start</code> or <code>SerialProcessState.search_end</code>.</p>\n\n<p>* The package name for the backport is <code>enum34</code>.</p>\n"}], "owner": {"reputation": 527, "user_id": 2434214, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/8d218cbfa366924395c8eaa3de8db55a?s=128&d=identicon&r=PG", "display_name": "user2345", "link": "https://stackoverflow.com/users/2434214/user2345"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 215, "favorite_count": 0, "accepted_answer_id": 31711678, "answer_count": 1, "score": 0, "last_activity_date": 1438208108, "creation_date": 1438204861, "question_id": 31711366, "link": "https://stackoverflow.com/questions/31711366/enums-from-c-to-python-2-7", "title": "enums from c# to python (2.7)", "body": "<p>I have code which was written in C# now i need to port it to PYTHON. \nThe C#  code has enums which cannot be implemented directly in python </p>\n\n<p>Is there any work around to implement enum in python and creating instance of it, as shown in the c# code below <code>SerialProcessState serialProcessState = SerialProcessState.SERIAL_PROCESS_SEARCH_START;</code></p>\n\n<p>Can anyone help me in implementing this stuff in python ?</p>\n\n<pre><code>enum SerialProcessState\n    {\n        SERIAL_PROCESS_SEARCH_START,\n        SERIAL_PROCESS_VERIFY_ELEMENTS,\n        SERIAL_PROCESS_DATA,\n        SERIAL_PROCESS_SEARCH_END}\n\n    ;\nSerialProcessState serialProcessState = SerialProcessState.SERIAL_PROCESS_SEARCH_START;\n\nenum SerialProcessValue\n    {\n        SERIAL_PACKET_START = 0xF0,\n        SERIAL_PACKET_END = 0xF1,\n        SERIAL_PACKET_ESCAPE = 0xF2,\n        SERIAL_PACKET_ESCAPE_START = 0x00,\n        SERIAL_PACKET_ESCAPE_END = 0x01,\n        SERIAL_PACKET_ESCAPE_ESCAPE = 0x02,\n        SERIAL_PACKET_ELEMENTS = 0x06}\n\n    ;\n\nprivate void SerialProcess(byte serialData)\n    {\n        UInt16 Dummy;\n\n        for (Dummy = 0; Dummy &lt; 63; Dummy++) {\n            serialhistory[Dummy] = serialhistory[Dummy + 1];\n        }\n        serialhistory[63] = serialData;\n\n        if ((SerialProcessValue)serialData == SerialProcessValue.SERIAL_PACKET_START) {\n            serialProcessState = SerialProcessState.SERIAL_PROCESS_SEARCH_START;\n            serialEscaped = false;\n        }\n\n        switch (serialProcessState) {\n            case SerialProcessState.SERIAL_PROCESS_SEARCH_START:\n                if ((SerialProcessValue)serialData == SerialProcessValue.SERIAL_PACKET_START) {\n                    checksum = 0;\n                    serialProcessState = SerialProcessState.SERIAL_PROCESS_VERIFY_ELEMENTS;\n                }\n                break;\n  .\n  .\n\n}\n</code></pre>\n"}, {"tags": ["python", "pandas", "statistics"], "comments": [{"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1438205687, "post_id": 31711336, "comment_id": 51361098, "body": "why is <code>[4,4]</code> the best choice?"}, {"owner": {"reputation": 3900, "user_id": 439693, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/KTedz.png?s=128&g=1", "display_name": "trbck", "link": "https://stackoverflow.com/users/439693/trbck"}, "reply_to_user": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1438206579, "post_id": 31711336, "comment_id": 51361476, "body": "because for both columns combined it has the max values. Last row for example has 10 in col A but 0 in col B. And for col B there are other, higher values. You could say I am seeking for the combined mean max of both columns. Hope this clarifies"}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1438208331, "post_id": 31711336, "comment_id": 51362220, "body": "What is the correct total order?"}, {"owner": {"reputation": 3900, "user_id": 439693, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/KTedz.png?s=128&g=1", "display_name": "trbck", "link": "https://stackoverflow.com/users/439693/trbck"}, "reply_to_user": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1438209379, "post_id": 31711336, "comment_id": 51362616, "body": "The values are random numbers and since I am not sure how to calculate it I do not have the correct total order. Thank you for the pandas rank hint. I left my rank approach as a comment below @dermen&#39;s answer which in fact does not reproduce the same sequence order."}], "answers": [{"comments": [{"owner": {"reputation": 3900, "user_id": 439693, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/KTedz.png?s=128&g=1", "display_name": "trbck", "link": "https://stackoverflow.com/users/439693/trbck"}, "edited": false, "score": 1, "creation_date": 1438208619, "post_id": 31712082, "comment_id": 51362329, "body": "Looks good to me. After receiving the &quot;rank&quot; hint by @padraic-cunningham    I came up with <code>df[&quot;best_choice&quot;] = df[[&quot;A&quot;, &quot;B&quot;]].rank().sum(axis=1)</code> and <code>df.sort(&quot;best_choice&quot;, ascending=False)</code> but it yields in a different sequence order while [4,4] still seems to be the best choice."}, {"owner": {"reputation": 4079, "user_id": 2077270, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/6z5gq.jpg?s=128&g=1", "display_name": "dermen", "link": "https://stackoverflow.com/users/2077270/dermen"}, "reply_to_user": {"reputation": 3900, "user_id": 439693, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/KTedz.png?s=128&g=1", "display_name": "trbck", "link": "https://stackoverflow.com/users/439693/trbck"}, "edited": false, "score": 0, "creation_date": 1438211277, "post_id": 31712082, "comment_id": 51363166, "body": "I am not sure exactly how <code>DataFrame.rank</code> works on multiple columns, and I cannot reproduce that result using any alternative method...  the way I see it, there are 11 values for &#39;A&#39; and 5 values for &#39;B&#39;. Therefore (A=4,B=4) corresponds to rank 5/11 for A and rank 5/5 for B,  adding the two yields a total rank of 1.45 (the max total rank). Next we consider (A=10, B=0), corresponding to rank 11/11 for A and 1/5 for B. Adding the two yields 1.2, the net highest value etc. Am I correct to add the individual  rankings, or is total rank more complex ?"}], "tags": [], "owner": {"reputation": 4079, "user_id": 2077270, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/6z5gq.jpg?s=128&g=1", "display_name": "dermen", "link": "https://stackoverflow.com/users/2077270/dermen"}, "is_accepted": false, "score": 1, "last_activity_date": 1438211425, "last_edit_date": 1438211425, "creation_date": 1438207979, "answer_id": 31712082, "question_id": 31711336, "link": "https://stackoverflow.com/questions/31711336/pandas-dataframe-get-column-combined-max-values/31712082#31712082", "title": "Pandas DataFrame get column combined max values", "body": "<p>How about this</p>\n\n<pre><code>df['pos'] = df.A/df.A.mean() + df.B/df.B.mean()\ndf.sort( columns='pos', ascending=False)\n\n#    A  B       pos\n#3   4  4  3.909091\n#7  10  0  2.500000\n#1   1  3  2.431818\n#2   2  2  1.954545\n#6   4  1  1.727273\n#0   3  1  1.477273\n#4   5  0  1.250000\n#5   3  0  0.750000\n</code></pre>\n\n<p>If you have more columns you want to rank <code>['A','B','C', ...]</code></p>\n\n<pre><code>cols = ['A','B'] # ,'C', 'D', ... ]\ndf['pos'] = pandas.np.sum([ df[col]/df[col].mean() for col in cols ],axis=0)\n</code></pre>\n\n<h1>Update</h1>\n\n<p>Because 0 is considered a quality value (lowest), I would amend my answer as follows (not sure it makes a huge difference)</p>\n\n<pre><code>df['pos'] = (df.A+1)/(df.A.max()+1) + (df.B+1)/(df.B.max()+1)\ndf.sort( columns='pos', ascending=False)\n#    A  B       pos\n#3   4  4  1.454545\n#7  10  0  1.200000\n#1   1  3  0.981818\n#2   2  2  0.872727\n#6   4  1  0.854545\n#0   3  1  0.763636\n#4   5  0  0.745455\n#5   3  0  0.563636\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3900, "user_id": 439693, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/KTedz.png?s=128&g=1", "display_name": "trbck", "link": "https://stackoverflow.com/users/439693/trbck"}, "edited": false, "score": 0, "creation_date": 1438291175, "post_id": 31716372, "comment_id": 51403892, "body": "Thank you! The sequence order seems to be correct from my perspective. I liked the approach from @dermen though. How would I modify this in case category A has more weight compared to category B? Just A*2 (e.g. A has two times higher weight than B)?"}, {"owner": {"reputation": 4194, "user_id": 3026131, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/h5dWI.png?s=128&g=1", "display_name": "Nader Hisham", "link": "https://stackoverflow.com/users/3026131/nader-hisham"}, "reply_to_user": {"reputation": 3900, "user_id": 439693, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/KTedz.png?s=128&g=1", "display_name": "trbck", "link": "https://stackoverflow.com/users/439693/trbck"}, "edited": false, "score": 0, "creation_date": 1438291564, "post_id": 31716372, "comment_id": 51404071, "body": "You can calculate the rank normally for group A and then multiply by the weight"}], "tags": [], "owner": {"reputation": 4194, "user_id": 3026131, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/h5dWI.png?s=128&g=1", "display_name": "Nader Hisham", "link": "https://stackoverflow.com/users/3026131/nader-hisham"}, "is_accepted": true, "score": 2, "last_activity_date": 1438236948, "creation_date": 1438236948, "answer_id": 31716372, "question_id": 31711336, "link": "https://stackoverflow.com/questions/31711336/pandas-dataframe-get-column-combined-max-values/31716372#31716372", "title": "Pandas DataFrame get column combined max values", "body": "<pre><code>df = pd.DataFrame({\"A\": [3,1,2,4,5,3,4,10], \"B\": [1,3,2,4,0,0,1,0]})\n</code></pre>\n\n<p>then calculate the rank for each column in the data frame</p>\n\n<pre><code>rank = df.rank(method = \"dense\")\nrank\n\nOut[44]:\n    A   B\n0   3   2\n1   1   4\n2   2   3\n3   4   5\n4   5   1\n5   3   1\n6   4   2\n7   6   1\n</code></pre>\n\n<p>add a new column to the data frame which is the the total rank based on all categories</p>\n\n<pre><code>df['total_rank'] = rank.sum(axis = 1)\ndf\n\n\nOut[46]:\n    A   B   total_rank\n0   3   1   5\n1   1   3   5\n2   2   2   5\n3   4   4   9\n4   5   0   6\n5   3   0   4\n6   4   1   6\n7   10  0   7\n</code></pre>\n\n<p>and finally sort your data frame by total rank </p>\n\n<pre><code>df.sort(columns='total_rank' , ascending = False)\n\n\nOut[49]:\n    A   B   total_rank\n3   4   4   9\n7   10  0   7\n4   5   0   6\n6   4   1   6\n0   3   1   5\n1   1   3   5\n2   2   2   5\n5   3   0   4\n</code></pre>\n"}], "owner": {"reputation": 3900, "user_id": 439693, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/KTedz.png?s=128&g=1", "display_name": "trbck", "link": "https://stackoverflow.com/users/439693/trbck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1201, "favorite_count": 0, "accepted_answer_id": 31716372, "answer_count": 2, "score": 1, "last_activity_date": 1438236948, "creation_date": 1438204746, "last_edit_date": 1438206638, "question_id": 31711336, "link": "https://stackoverflow.com/questions/31711336/pandas-dataframe-get-column-combined-max-values", "title": "Pandas DataFrame get column combined max values", "body": "<p>I have a pandas DataFrame like following.</p>\n\n<p><code>df = pd.DataFrame({\"A\": [3,1,2,4,5,3,4,10], \"B\": [1,3,2,4,0,0,1,0]})</code></p>\n\n<p>The row values 0 to 10 are recommendations (10 is best). One DataFrame column is a category (A, B, etc.) the 0 to 10 recommendation is related to. All categories have the <strong>same weight</strong> but each row is related to one item.</p>\n\n<p>I want the DataFrame to be sorted for items with the max values combined to <strong>both</strong> (or more) categories. So if a row related to an item has a value of 10 in category A but value 0 in category B, that would not be the expected solution for the highest rated item. In example given above the row with values [4,4] would be the best choice.</p>\n\n<p>My groupby solution does not give the expected result.</p>\n\n<pre><code>grouped = df.groupby(['A', 'B'])\ngrouped[[\"A\", \"B\"]].max().sort(ascending=False)\n</code></pre>\n\n<p>result:</p>\n\n<pre><code>        A   B\nA   B       \n10  2   10  0\n5   0   5   0\n4   4   4   4\n    1   4   1\n3   1   3   1\n    0   3   0\n2   2   2   2\n1   3   1   3\n</code></pre>\n\n<p>A row based total sum would also not yield the expected result since it does not differentiate between categories.</p>\n"}, {"tags": ["python", "django", "templates"], "comments": [{"owner": {"reputation": 40575, "user_id": 793428, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/999b32fdf6b04835061fffd1c5c6cf76?s=128&d=identicon&r=PG&f=1", "display_name": "ozgur", "link": "https://stackoverflow.com/users/793428/ozgur"}, "edited": false, "score": 0, "creation_date": 1438208323, "post_id": 31711327, "comment_id": 51362217, "body": "<code>&lt;img src=&quot;{{ request.user.consumer.cimage.url }}&quot; &#47;&gt;</code> will display the consumer&#39;s image in the template."}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 4097141, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/c0a9cb63968c6d4c2f1f756ebffc4ff3?s=128&d=identicon&r=PG&f=1", "display_name": "krishan", "link": "https://stackoverflow.com/users/4097141/krishan"}, "edited": false, "score": 0, "creation_date": 1438208453, "post_id": 31711592, "comment_id": 51362260, "body": "I had tried this but it did not work earlier as I was making a mistake. But after your confirmation I tried again and it works. Thanks a ton."}], "tags": [], "owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "is_accepted": true, "score": 0, "last_activity_date": 1438205752, "creation_date": 1438205752, "answer_id": 31711592, "question_id": 31711327, "link": "https://stackoverflow.com/questions/31711327/how-to-run-a-database-search-inside-template-in-django/31711592#31711592", "title": "How to run a database search inside template in django", "body": "<p>If you're getting the username via <code>{{ user.username }}</code> you can just do the same thing to get to the consumer: <code>{{ user.consumer.cimage }}</code>.</p>\n"}], "owner": {"reputation": 25, "user_id": 4097141, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/c0a9cb63968c6d4c2f1f756ebffc4ff3?s=128&d=identicon&r=PG&f=1", "display_name": "krishan", "link": "https://stackoverflow.com/users/4097141/krishan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 31711592, "answer_count": 1, "score": 0, "last_activity_date": 1438208243, "creation_date": 1438204730, "last_edit_date": 1438208243, "question_id": 31711327, "link": "https://stackoverflow.com/questions/31711327/how-to-run-a-database-search-inside-template-in-django", "title": "How to run a database search inside template in django", "body": "<p>I am new and trying to display the image of user after he logs in. I am using the django user model which is a Foreign key to my extended user model which is called Consumer. I am using auth.views to authenticate the user and generate view. I able to get the username but not able to retrieve the image URL as I am not able get the Consumer instance. Where and how can I extract the Consumer detail for the logged in user without writing my own authentication code.</p>\n\n<p>Please help. Please see my code below</p>\n\n<p>Models.py</p>\n\n<pre><code>class Consumer(models.Model):\n    user = models.OneToOneField(User)\n    cimage = models.ImageField(blank=True)\n    company = models.CharField(max_length=32)\n</code></pre>\n\n<p>urls.py</p>\n\n<pre><code>(r'^login/$', 'django.contrib.auth.views.login'),\n</code></pre>\n\n<p>screen.html\n    </p>\n"}, {"tags": ["python", "sql", "flask", "relational-database", "flask-sqlalchemy"], "answers": [{"comments": [{"owner": {"reputation": 3252, "user_id": 5121448, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/d03ec9caa5409449cb47f21db2c7c2aa?s=128&d=identicon&r=PG&f=1", "display_name": "carl", "link": "https://stackoverflow.com/users/5121448/carl"}, "edited": false, "score": 0, "creation_date": 1438212162, "post_id": 31712527, "comment_id": 51363394, "body": "Hi fish, thanks for your reply. Indeed I originally assigned None, but correcting this did not solve the issue. I updated the post above to show what I mean"}], "tags": [], "owner": {"reputation": 643, "user_id": 501294, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0581be4e17d12b4a81978d92f33e4524?s=128&d=identicon&r=PG", "display_name": "fishsticks", "link": "https://stackoverflow.com/users/501294/fishsticks"}, "is_accepted": false, "score": 0, "last_activity_date": 1438210486, "creation_date": 1438210486, "answer_id": 31712527, "question_id": 31711300, "link": "https://stackoverflow.com/questions/31711300/many-to-many-relationship-in-sqlalchemy/31712527#31712527", "title": "many-to-many relationship in sqlalchemy", "body": "<p>The <code>.first()</code> method either returns the first result or <code>None</code> if there isn't one, are you sure you're not assigning <code>a.read_query</code> to <code>None</code>?</p>\n"}, {"tags": [], "owner": {"reputation": 1678, "user_id": 4618272, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-230ilEnjOxo/AAAAAAAAAAI/AAAAAAAAAEM/HeA-IvhuA1I/photo.jpg?sz=128", "display_name": "Chandan Purohit", "link": "https://stackoverflow.com/users/4618272/chandan-purohit"}, "is_accepted": false, "score": 0, "last_activity_date": 1483349337, "creation_date": 1483349337, "answer_id": 41424178, "question_id": 31711300, "link": "https://stackoverflow.com/questions/31711300/many-to-many-relationship-in-sqlalchemy/41424178#41424178", "title": "many-to-many relationship in sqlalchemy", "body": "<p>You are getting this error because the user_id and query_id fields of the ReadIndex table are None. So, when you commit, ReadIndex object is trying to get created without having values in its primary key fields. So, do this,</p>\n\n<pre><code>user = models.User.query.filter_by(id=user_id).first()\nquery = models.Queries.query.filter_by(id=query_id).first()\na=models.ReadIndex(user_id=user.id,query_id=query.id,read_datetime=dt.utcnow())\ndb.session.add(a)\ndb.session.commit()\n</code></pre>\n\n<p>You dont need to manually append anything to the relationship. SQLAlchemy does that for you automatically. You can crosscheck if you want,</p>\n\n<pre><code>for ud in user.read_dates:\n    print(ud)\n</code></pre>\n\n<p>Hope this helps!</p>\n"}], "owner": {"reputation": 3252, "user_id": 5121448, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/d03ec9caa5409449cb47f21db2c7c2aa?s=128&d=identicon&r=PG&f=1", "display_name": "carl", "link": "https://stackoverflow.com/users/5121448/carl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2451, "favorite_count": 0, "closed_date": 1515622178, "answer_count": 2, "score": 3, "last_activity_date": 1483349337, "creation_date": 1438204636, "last_edit_date": 1465828913, "question_id": 31711300, "link": "https://stackoverflow.com/questions/31711300/many-to-many-relationship-in-sqlalchemy", "closed_reason": "Duplicate", "title": "many-to-many relationship in sqlalchemy", "body": "<p>I just switched from MySQL to SQLalchemy and I have to say that it is more difficult to get my head around sqlalchemy than I thought. Currently I have some trouble with a many-to-many relationship. I have users and queries in my model. A user can have many queries and a query offers a new article to read every day. I want to store which user read which query on what date. My models.py looks like this</p>\n\n<pre><code>class User(db.Model):\n\n    id = db.Column(db.Integer, primary_key=True)\n    read_dates = db.relationship(\"ReadIndex\", backref=\"user\")\n\n    def __repr__(self):\n        return '&lt;User %r&gt;' % (self.id)\n\nclass Queries(db.Model):\n\n    id = db.Column(db.Integer, primary_key=True)\n    user_id = db.Column(db.Integer, db.ForeignKey('user.id'))\n\n    def __repr__(self):\n        return '&lt;Queries %r&gt;' % (self.id)\n\n\nclass ReadIndex(db.Model):\n\n    user_id = db.Column(db.Integer, db.ForeignKey('user.id'), primary_key=True)\n    query_id = db.Column(db.Integer, db.ForeignKey('queries.id'), primary_key=True)\n    read_datetime = db.Column(db.DateTime)\n    read_query = db.relationship(\"Queries\", backref=\"user_assocs\")\n\n    def __repr__(self):\n        return '&lt;ReadIndex&gt;'\n</code></pre>\n\n<p>so I have users and queries. To store which user read which query on what date I have the class ReadIndex, which has an extra field called read_datetime, where I store the date of a user-query association. I than want to add such an association like </p>\n\n<pre><code>user = models.User.query.filter_by(id=user_id).first()\nquery = models.Queries.query.filter_by(id=query_id).first()\na = models.ReadIndex(read_datetime=dt.utcnow())\na.read_query = query\nuser.read_dates.append(a)\ndb.session.commit()\n</code></pre>\n\n<p>where query_id and user_id are the corresponding ids to select my objects. If I run this I get an error </p>\n\n<pre><code>sqlalchemy.exc.IntegrityError\nIntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed:\nread_index.query_id [SQL: u'INSERT INTO read_index (user_id, read_datetime) \nVALUES (?, ?)'] [parameters: (1, '2015-07-29 20:55:50.898366')]\n</code></pre>\n\n<p>I am not sure what the problem is? I don't seem to violate any NOT NULL </p>\n\n<p>edit: I noticed that I assigned query=None to a.read_query. Correcting this slightly changed the error</p>\n\n<pre><code>IntegrityError: (raised as a result of Query-invoked autoflush;  \nconsider using a session.no_autoflush block if this flush is occurring prematurely) \n(sqlite3.IntegrityError) NOT NULL constraint failed: read_index.user_id \n[SQL: u'INSERT INTO read_index (query_id, read_datetime) VALUES (?, ?)'] \n[parameters: (1, '2015-07-29 23:11:11.934038')]\n</code></pre>\n\n<p>here is exactly what happens:</p>\n\n<pre><code>&gt;&gt;&gt; from app import app, db, models\n&gt;&gt;&gt; user = models.User.query.filter_by(id=1).first()\n&gt;&gt;&gt; user\n&lt;User u'Florian Beutler'&gt;\n&gt;&gt;&gt; query = models.Queries.query.filter_by(id=1).first()\n&gt;&gt;&gt; query\n&lt;Queries 1&gt;\n&gt;&gt;&gt; import datetime\n&gt;&gt;&gt; a = models.ReadIndex(read_datetime=datetime.datetime.utcnow())\n&gt;&gt;&gt; a.read_query = query\n&gt;&gt;&gt; user.read_dates.append(a)\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\n  File \"/usr/local/lib/python2.7/site-    packages/sqlalchemy/orm/attributes.py\", line 237, in __get__\n    return self.impl.get(instance_state(instance), dict_)\n  File \"/usr/local/lib/python2.7/site-packages/sqlalchemy/orm/attributes.py\", line 578, in get\n    value = self.callable_(state, passive)\n  File \"/usr/local/lib/python2.7/site-packages/sqlalchemy/orm/strategies.py\", line 529, in _load_for_state\n    return self._emit_lazyload(session, state, ident_key, passive)\n  File \"&lt;string&gt;\", line 1, in &lt;lambda&gt;\n  File \"/usr/local/lib/python2.7/site-packages/sqlalchemy/orm/strategies.py\", line 599, in _emit_lazyload\n    result = q.all()\n  File \"/usr/local/lib/python2.7/site-packages/sqlalchemy/orm/query.py\", line 2399, in all\n    return list(self)\n  File \"/usr/local/lib/python2.7/site-packages/sqlalchemy/orm/query.py\", line 2515, in __iter__\n    self.session._autoflush()\n  File \"/usr/local/lib/python2.7/site-packages/sqlalchemy/orm/session.py\", line 1292, in _autoflush\n    util.raise_from_cause(e)\n  File \"/usr/local/lib/python2.7/site-packages/sqlalchemy/util/compat.py\", line 199, in raise_from_cause\n    reraise(type(exception), exception, tb=exc_tb)\n  File \"/usr/local/lib/python2.7/site-packages/sqlalchemy/orm/session.py\", line 1282, in _autoflush\n    self.flush()\n  File \"/usr/local/lib/python2.7/site-packages/sqlalchemy/orm/session.py\", line 2004, in flush\n    self._flush(objects)\n  File \"/usr/local/lib/python2.7/site-packages/sqlalchemy/orm/session.py\", line 2122, in _flush\n    transaction.rollback(_capture_exception=True)\n  File \"/usr/local/lib/python2.7/site-packages/sqlalchemy/util/langhelpers.py\", line 60, in __exit__\n    compat.reraise(exc_type, exc_value, exc_tb)\n  File \"/usr/local/lib/python2.7/site-packages/sqlalchemy/orm/session.py\", line 2086, in _flush\n    flush_context.execute()\n  File \"/usr/local/lib/python2.7/site-packages/sqlalchemy/orm/unitofwork.py\", line 373, in execute\n    rec.execute(self)\n  File \"/usr/local/lib/python2.7/site-packages/sqlalchemy/orm/unitofwork.py\", line 532, in execute\n    uow\n  File \"/usr/local/lib/python2.7/site-packages/sqlalchemy/orm/persistence.py\", line 174, in save_obj\nmapper, table, insert)\n  File \"/usr/local/lib/python2.7/site-packages/sqlalchemy/orm/persistence.py\", line 781, in _emit_insert_statements\n    execute(statement, params)\n  File \"/usr/local/lib/python2.7/site-packages/sqlalchemy/engine/base.py\", line 914, in execute\n    return meth(self, multiparams, params)\n  File \"/usr/local/lib/python2.7/site-packages/sqlalchemy/sql/elements.py\", line 323, in _execute_on_connection\n    return connection._execute_clauseelement(self, multiparams, params)\n  File \"/usr/local/lib/python2.7/site-packages/sqlalchemy/engine/base.py\", line 1010, in _execute_clauseelement\n    compiled_sql, distilled_params\n  File \"/usr/local/lib/python2.7/site-packages/sqlalchemy/engine/base.py\", line 1146, in _execute_context\n    context)\n  File \"/usr/local/lib/python2.7/site-packages/sqlalchemy/engine/base.py\", line 1341, in _handle_dbapi_exception\n    exc_info\n  File \"/usr/local/lib/python2.7/site-packages/sqlalchemy/util/compat.py\", line 199, in raise_from_cause\n    reraise(type(exception), exception, tb=exc_tb)\n  File \"/usr/local/lib/python2.7/site-packages/sqlalchemy/engine/base.py\", line 1139, in _execute_context\n    context)\n  File \"/usr/local/lib/python2.7/site-packages/sqlalchemy/engine/default.py\", line 450, in do_execute\n    cursor.execute(statement, parameters)\nsqlalchemy.exc.IntegrityError: (raised as a result of Query-invoked autoflush; consider using a session.no_autoflush block if this flush is occurring prematurely) (sqlite3.IntegrityError) NOT NULL constraint failed: read_index.user_id [SQL: u'INSERT INTO read_index (query_id, read_datetime) VALUES (?, ?)'] [parameters: (1, '2015-07-29 23:17:06.013485')]\n</code></pre>\n\n<p>constraint?\nthanks\ncarl</p>\n"}, {"tags": ["python", "list", "append"], "comments": [{"owner": {"reputation": 5521, "user_id": 755851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1bb0ef4d5aebec860f85f7c76b894fd?s=128&d=identicon&r=PG", "display_name": "Foon", "link": "https://stackoverflow.com/users/755851/foon"}, "edited": false, "score": 0, "creation_date": 1438204895, "post_id": 31711192, "comment_id": 51360764, "body": "Welcome to SO.  Please shorten your example unless there is some reason we need to do long lines of DNA-looking stuff ... and try to be clearer what you&#39;re looking for; as rendered, output and desired output are identical as far as I can see.  I don&#39;t know this is a cut/paste issue or a formatting problem."}, {"owner": {"reputation": 3725, "user_id": 2209008, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/MceJL.jpg?s=128&g=1", "display_name": "Colin Basnett", "link": "https://stackoverflow.com/users/2209008/colin-basnett"}, "edited": false, "score": 0, "creation_date": 1438204991, "post_id": 31711192, "comment_id": 51360813, "body": "Please clean up the input material you posted into an easily copy-paste-able text blob; you shouldn&#39;t make others do this for you."}, {"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "reply_to_user": {"reputation": 5521, "user_id": 755851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1bb0ef4d5aebec860f85f7c76b894fd?s=128&d=identicon&r=PG", "display_name": "Foon", "link": "https://stackoverflow.com/users/755851/foon"}, "edited": false, "score": 0, "creation_date": 1438205005, "post_id": 31711192, "comment_id": 51360822, "body": "@Foon - The desired <code>list</code> has some elements combined into longer strings (agreed that it&#39;s not easy to spot, though)."}, {"owner": {"reputation": 13, "user_id": 5171060, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-uwp6ILlpB0o/AAAAAAAAAAI/AAAAAAAAAHE/1bl6KaVvFWc/photo.jpg?sz=128", "display_name": "larosamatt", "link": "https://stackoverflow.com/users/5171060/larosamatt"}, "edited": false, "score": 0, "creation_date": 1438206650, "post_id": 31711192, "comment_id": 51361512, "body": "I should have shortened the example text, but, regarding the input, the use of &gt; to do block quotes interferes with keeping the input as close to the original as possible. Also, I didn&#39;t want to add any extra newline or return chars."}], "answers": [{"tags": [], "owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "is_accepted": false, "score": 1, "last_activity_date": 1438204906, "creation_date": 1438204906, "answer_id": 31711381, "question_id": 31711192, "link": "https://stackoverflow.com/questions/31711192/python-list-not-correct-after-appending-lines/31711381#31711381", "title": "Python: List not correct after appending lines", "body": "<p>Within each iteration of the loop, you're only looking at a certain line from the file. This means that, although you certainly are appending lines that don't contain a linefeed at the end, you're still appending one of the file's lines at a time. You'll have to let the interpreter know that you want to combine certain lines, by doing something like setting a flag when you first start to read in a DNASEQ and clearing it when the next DNAID starts.</p>\n\n<pre><code>for line in DNA:\n    line = line.strip() # gets both sides\n    if line.startswith('&gt;'):\n        starting = True\n        DNAID.append(line)\n    elif starting:\n        starting = False\n        DNASEQ.append(line)\n    else:\n        DNASEQ[-1] += line\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 5171060, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-uwp6ILlpB0o/AAAAAAAAAAI/AAAAAAAAAHE/1bl6KaVvFWc/photo.jpg?sz=128", "display_name": "larosamatt", "link": "https://stackoverflow.com/users/5171060/larosamatt"}, "edited": false, "score": 0, "creation_date": 1438207092, "post_id": 31711413, "comment_id": 51361712, "body": "Your implementation works, but I&#39;m relatively inexperienced. Could you explain the functionality of: DNASEQ[-1] += line ?"}, {"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1438207533, "post_id": 31711413, "comment_id": 51361899, "body": "That accesses the last element of <code>DNASEQ</code> - which is a string - and concatenates the current content of <code>line</code> onto it."}], "tags": [], "owner": {"reputation": 11357, "user_id": 584846, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/uD1uQ.jpg?s=128&g=1", "display_name": "Brent Washburne", "link": "https://stackoverflow.com/users/584846/brent-washburne"}, "is_accepted": true, "score": 1, "last_activity_date": 1438205037, "creation_date": 1438205037, "answer_id": 31711413, "question_id": 31711192, "link": "https://stackoverflow.com/questions/31711192/python-list-not-correct-after-appending-lines/31711413#31711413", "title": "Python: List not correct after appending lines", "body": "<p>You can combine the <code>.lstrip()</code> and <code>.rstrip()</code> into a single <code>.strip()</code> call.</p>\n\n<p>Then, you were thinking that <code>.append()</code> both added lines to a list and joined lines into a single line.  Here, we start <code>DNASEQ</code> with an empty string and use <code>+=</code> to join the lines into a long string:</p>\n\n<pre><code>DNA = open('DNAGCex.txt')\nDNAID = []\nDNASEQ = []\nfor line in DNA:\n    line = line.strip()\n    if line.startswith('&gt;'):\n        DNAID.append(line)\n        DNASEQ.append('')\n    else:\n        DNASEQ[-1] += line\nprint DNAID\nprint DNASEQ\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 5171060, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-uwp6ILlpB0o/AAAAAAAAAAI/AAAAAAAAAHE/1bl6KaVvFWc/photo.jpg?sz=128", "display_name": "larosamatt", "link": "https://stackoverflow.com/users/5171060/larosamatt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "accepted_answer_id": 31711413, "answer_count": 2, "score": 1, "last_activity_date": 1438207017, "creation_date": 1438204267, "last_edit_date": 1438207017, "question_id": 31711192, "link": "https://stackoverflow.com/questions/31711192/python-list-not-correct-after-appending-lines", "title": "Python: List not correct after appending lines", "body": "<p>I'm trying to append lines to an empty list reading from a file, and I've already stripped the lines of returns and newlines, but what should be one line is being entered as two separate items into the list.</p>\n\n<pre><code>DNA = open('DNAGCex.txt')\nDNAID = []\nDNASEQ = []\nfor line in DNA:\n    line = line.rstrip()\n    line = line.lstrip()\n    if line.startswith('&gt;')==True:\n        DNAID.append(line)\n    if line.startswith('&gt;')==False:\n        DNASEQ.append(line)\nprint DNAID\nprint DNASEQ\n</code></pre>\n\n<p>And here's the output</p>\n\n<blockquote>\n  <p>['>Rosalind_6404', '>Rosalind_5959', '>Rosalind_0808']\n  ['CCTGCGGAAGATCGGCACTAGA', 'TCCCACTAATAATTCTGAGG', 'CCATCGGTAGCGCATCCTTAGTCCA', 'ATATCCATTTGTCAGCAGACACGC', 'CCACCCTCGTGGTATGGCTAGGCATTCAG', 'TGGGAACCTGCGGGCAGTAGGTGGAAT']</p>\n</blockquote>\n\n<p>I want it to look like this:</p>\n\n<blockquote>\n  <p>['>Rosalind_6404', '>Rosalind_5959', '>Rosalind_0808']\n  ['CCTGCGGAAGATCGGCACTAGATCCCACTAATAATTCTGAGG', 'CCATCGGTAGCGCATCCTTAGTCCAATATCCATTTGTCAGCAGACACGC', 'CCACCCTCGTGGTATGGCTAGGCATTCAGTGGGAACCTGCGGGCAGTAGGTGGAAT']</p>\n</blockquote>\n\n<p>Here is the source material, just remove the ''s:</p>\n\n<blockquote>\n  <p>['>Rosalind_6404'\n  CCTGCGGAAGATCGGCACTAGA\n  TCCCACTAATAATTCTGAGG\n  '>Rosalind_5959'\n  CCATCGGTAGCGCATCCTTAGTCCA\n  ATATCCATTTGTCAGCAGACACGC\n  '>Rosalind_0808'\n  CCACCCTCGTGGTATGGCTAGGCATTCAG\n  TGGGAACCTGCGGGCAGTAGGTGGAAT]</p>\n</blockquote>\n"}, {"tags": ["python", "string"], "answers": [{"comments": [{"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 1, "creation_date": 1438204339, "post_id": 31711209, "comment_id": 51360474, "body": "And the empty strings at the beginning and end of the string."}], "tags": [], "owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "is_accepted": false, "score": 3, "last_activity_date": 1438204297, "creation_date": 1438204297, "answer_id": 31711209, "question_id": 31711172, "link": "https://stackoverflow.com/questions/31711172/python-string-replace-behaves-differently/31711209#31711209", "title": "Python String replace behaves differently", "body": "<p>It's replacing the empty string between each pair of characters with XX.</p>\n"}, {"comments": [{"owner": {"reputation": 71, "user_id": 4344140, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-lU9gbDUfD-M/AAAAAAAAAAI/AAAAAAAAACw/L46jIkkKAHk/photo.jpg?sz=128", "display_name": "Shasti", "link": "https://stackoverflow.com/users/4344140/shasti"}, "edited": false, "score": 0, "creation_date": 1438204754, "post_id": 31711218, "comment_id": 51360700, "body": "&#39;It&#39;s just that&#39;. Exactly the confirmation I wanted to hear. Thanks!"}], "tags": [], "owner": {"reputation": 989, "user_id": 5039959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f68a4651473d073cb1647405bfcc8bc?s=128&d=identicon&r=PG&f=1", "display_name": "Clodion", "link": "https://stackoverflow.com/users/5039959/clodion"}, "is_accepted": false, "score": 2, "last_activity_date": 1438204748, "last_edit_date": 1438204748, "creation_date": 1438204331, "answer_id": 31711218, "question_id": 31711172, "link": "https://stackoverflow.com/questions/31711172/python-string-replace-behaves-differently/31711218#31711218", "title": "Python String replace behaves differently", "body": "<p>You replace every \"\" (empty string) by \"XX\". Python consider that between two character there is a empty string!!! And before the first character and after the last.<br>\nIt's just that!</p>\n"}], "owner": {"reputation": 71, "user_id": 4344140, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-lU9gbDUfD-M/AAAAAAAAAAI/AAAAAAAAACw/L46jIkkKAHk/photo.jpg?sz=128", "display_name": "Shasti", "link": "https://stackoverflow.com/users/4344140/shasti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 184, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1438204748, "creation_date": 1438204208, "question_id": 31711172, "link": "https://stackoverflow.com/questions/31711172/python-string-replace-behaves-differently", "title": "Python String replace behaves differently", "body": "<p>The below string replace code prints \"XXaXXbXXcXX1XX2XX3XX\". I know there is a reason behind it but having hard time finding it. Can someone please explain why?</p>\n\n<pre><code>if __name__ == '__main__':\n    match = \"\"\n    replace = \"XX\"\n    strr = \"abc123\"\n    print strr.replace(match, replace)\n</code></pre>\n"}, {"tags": ["python", "google-app-engine", "google-cloud-datastore"], "comments": [{"owner": {"reputation": 2571, "user_id": 2149974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffb21c41d027acd90bb86547189a7da7?s=128&d=identicon&r=PG", "display_name": "marcadian", "link": "https://stackoverflow.com/users/2149974/marcadian"}, "edited": false, "score": 1, "creation_date": 1438219032, "post_id": 31711157, "comment_id": 51365089, "body": "You need to post how you insert the data. FYI your code won&#39;t work if the request passed in NUM_ENTRIES, since it&#39;s a string, and you never cast it to int."}, {"owner": {"reputation": 12908, "user_id": 1201324, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hkRLn.jpg?s=128&g=1", "display_name": "Tim Hoffman", "link": "https://stackoverflow.com/users/1201324/tim-hoffman"}, "edited": false, "score": 0, "creation_date": 1438243519, "post_id": 31711157, "comment_id": 51373695, "body": "Are you testing on the dev server or in production.  You do need to take into account eventual consistency.  How much time are you leaving between creating the entities and running the query."}, {"owner": {"reputation": 2076, "user_id": 2416097, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/saeab.png?s=128&g=1", "display_name": "bgenchel", "link": "https://stackoverflow.com/users/2416097/bgenchel"}, "reply_to_user": {"reputation": 12908, "user_id": 1201324, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hkRLn.jpg?s=128&g=1", "display_name": "Tim Hoffman", "link": "https://stackoverflow.com/users/1201324/tim-hoffman"}, "edited": false, "score": 0, "creation_date": 1438278067, "post_id": 31711157, "comment_id": 51396722, "body": "the data insertion is constructing an object with four fields and calling .put(). I think @TimHoffman is/was correct; seems like an eventual consistency problem. Just a very extreme one since I&#39;m inserting so many elements."}, {"owner": {"reputation": 2076, "user_id": 2416097, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/saeab.png?s=128&g=1", "display_name": "bgenchel", "link": "https://stackoverflow.com/users/2416097/bgenchel"}, "reply_to_user": {"reputation": 2571, "user_id": 2149974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffb21c41d027acd90bb86547189a7da7?s=128&d=identicon&r=PG", "display_name": "marcadian", "link": "https://stackoverflow.com/users/2149974/marcadian"}, "edited": false, "score": 0, "creation_date": 1438278253, "post_id": 31711157, "comment_id": 51396831, "body": "@marcadian I now cast num_entries to an int in a helper function. thanks"}], "owner": {"reputation": 2076, "user_id": 2416097, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/saeab.png?s=128&g=1", "display_name": "bgenchel", "link": "https://stackoverflow.com/users/2416097/bgenchel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1471628260, "creation_date": 1438204152, "last_edit_date": 1592644375, "question_id": 31711157, "link": "https://stackoverflow.com/questions/31711157/fetch-page-returns-no-cursor-and-more-false-prematurely", "title": "fetch_page returns no cursor and more = false prematurely", "body": "<p>I'm trying to chunk the results of a big db request by using gae cursors.\nThe test involves inserting a random number between 75 and 300 of an entity, and then attempting to pull it out in chunks of 50 using fetch page.</p>\n<pre><code>def get(self):\n    num_entries = self.request.get(NUM_ENTRIES)\n    if not num_entries:\n        num_entries = CHUNK_SIZE\n\n    req_cursor = self.request.get(CURSOR)\n    cursor = Cursor(urlsafe=req_cursor)\n    query_tuple = Animal.query().fetch_page(num_entries, start_cursor=cursor)\n\n    (animals, next_cursor, more) = query_tuple\n    if next_cursor:\n        next_cursor = next_cursor.urlsafe()\n\n    self.response.write(json.dumps({\n        ANIMALS: [animal.to_dict() for animal in animals],\n        CURSOR: next_cursor,\n        MORE: more\n    }))\n</code></pre>\n<p>where CHUNK_SIZE is 50. However, the test continually fails because fetch_page returns 'more' as false wayyy before there are no entries left in the query, and returns 'cursor' as None if ever there are less than 50 entries left in the query. I don't understand. Based on the method description, neither of these things should happen.</p>\n<p>Fetch_page is said to return 'at most' as many entries as specified, which means to me it should try to get as many as are left. More is supposed to never return a false negative, since it is based on probably_has_next, described here:</p>\n<blockquote>\n<p>Like has_next(), but uses a faster (and sometimes inaccurate) shortcut.</p>\n<p>May return a false positive (True when next() would actually raise StopIteration), but never a\nfalse negative (False when next() would actually return a result).</p>\n</blockquote>\n<p>If this is how they actually behave, it doesn't appear to me that these methods can be relied on. Please help. Thanks!</p>\n<p>EDIT: Thought it might be a consistency issue, so I slept (on my local machine) for 30 seconds after the post. Despite that, I'm still having the same issue, even when only posting 40 entities.</p>\n"}, {"tags": ["python", "regex", "string"], "answers": [{"comments": [{"owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1438206018, "post_id": 31711164, "comment_id": 51361233, "body": "Please let me know if you need more help with this."}, {"owner": {"reputation": 701, "user_id": 2141709, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/cd3243c310cf623006eea727d17dcad6?s=128&d=identicon&r=PG", "display_name": "Sid5427", "link": "https://stackoverflow.com/users/2141709/sid5427"}, "edited": false, "score": 1, "creation_date": 1438611944, "post_id": 31711164, "comment_id": 51507891, "body": "I actually found this easier to understand and implement !"}], "tags": [], "owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 2, "last_activity_date": 1438206202, "last_edit_date": 1438206202, "creation_date": 1438204169, "answer_id": 31711164, "question_id": 31711122, "link": "https://stackoverflow.com/questions/31711122/extract-substring-from-a-line-in-python-if-another-keyword-is-found/31711164#31711164", "title": "Extract substring from a line in python, if another keyword is found", "body": "<p>You can use a regex to grab that value:</p>\n\n<pre><code>(?&lt;=\\bYEAR=)[^;]+\n</code></pre>\n\n<p>The regex matches:</p>\n\n<ul>\n<li><code>(?&lt;=\\bYEAR=)</code>  If the string we are looking for is preceded with a whole word <code>YEAR=</code>...</li>\n<li><code>[^;]+</code> - match 1 or more characters other than <code>;</code>.</li>\n</ul>\n\n<p>Here is <a href=\"https://regex101.com/r/wP0lK9/1\" rel=\"nofollow\">a regex demo</a></p>\n\n<p>Here is <a href=\"http://ideone.com/ZXqBjR\" rel=\"nofollow\">sample Python code</a>:</p>\n\n<pre><code>import re\np = re.compile(r'(?&lt;=\\bYEAR=)[^;]+')\ntest_str = \"1  0001    1   UG  science,ee;YEAR=onefour;standard-&gt;2;district-&gt;9\"\nrobj = re.search(p, test_str)\nif robj:\n    print(robj.group(0))\n</code></pre>\n\n<p>If everyone is so fond of capturing groups, here is the same expression with the lookbehind replaced with a capturing group:</p>\n\n<pre><code>\\bYEAR=([^;]+)\n</code></pre>\n\n<p>And in Python:</p>\n\n<pre><code>p = re.compile(r'\\bYEAR=([^;]+)')\ntest_str = \"1  0001    1   UG  science,ee;YEAR=onefour;standard-&gt;2;district-&gt;9\"\nrobj = re.search(p, test_str)\nif robj:\n    print(robj.group(1))\n</code></pre>\n\n<p>Note that in case your <code>YEAR</code> value has hyphens or other non-word characters in it, <code>\\w</code> will not help you. The negated character class is your best friend here.</p>\n"}, {"comments": [{"owner": {"reputation": 65435, "user_id": 2206004, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HCB1e.png?s=128&g=1", "display_name": "hwnd", "link": "https://stackoverflow.com/users/2206004/hwnd"}, "edited": false, "score": 0, "creation_date": 1438204507, "post_id": 31711190, "comment_id": 51360556, "body": "This seems the easiest to understand <code>+1</code>"}, {"owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1438206346, "post_id": 31711190, "comment_id": 51361371, "body": "Easiest to understand does not mean the safest."}], "tags": [], "owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "is_accepted": false, "score": 4, "last_activity_date": 1438204259, "creation_date": 1438204259, "answer_id": 31711190, "question_id": 31711122, "link": "https://stackoverflow.com/questions/31711122/extract-substring-from-a-line-in-python-if-another-keyword-is-found/31711190#31711190", "title": "Extract substring from a line in python, if another keyword is found", "body": "<p>You can also have a <a href=\"https://docs.python.org/2/howto/regex.html#grouping\" rel=\"nofollow\"><em>saving group</em></a> capture the <code>year</code> value:</p>\n\n<pre><code>&gt;&gt;&gt; import re\n&gt;&gt;&gt; \n&gt;&gt;&gt; pattern = re.compile(r\"YEAR=(\\w+);\")\n&gt;&gt;&gt; s = \"1  0001    1   UG  science,ee;YEAR=onefour;standard-&gt;2;district-&gt;9\"\n&gt;&gt;&gt; pattern.search(s).group(1)\n'onefour'\n</code></pre>\n\n<p>You may also need to handle cases when there is no match. For example, return <code>None</code>:</p>\n\n<pre><code>import re\n\ndef get_year_value(s):\n    pattern = re.compile(r\"YEAR=(\\w+);\")\n    match = pattern.search(s)\n\n    return match.group(1) if match else None\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 643, "user_id": 501294, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0581be4e17d12b4a81978d92f33e4524?s=128&d=identicon&r=PG", "display_name": "fishsticks", "link": "https://stackoverflow.com/users/501294/fishsticks"}, "is_accepted": false, "score": 0, "last_activity_date": 1438204352, "creation_date": 1438204352, "answer_id": 31711221, "question_id": 31711122, "link": "https://stackoverflow.com/questions/31711122/extract-substring-from-a-line-in-python-if-another-keyword-is-found/31711221#31711221", "title": "Extract substring from a line in python, if another keyword is found", "body": "<pre><code>YEAR=(?P&lt;year&gt;\\w+);\n</code></pre>\n\n<p>This should work.</p>\n"}, {"tags": [], "owner": {"reputation": 15122, "user_id": 4519059, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/MBHID.png?s=128&g=1", "display_name": "shA.t", "link": "https://stackoverflow.com/users/4519059/sha-t"}, "is_accepted": false, "score": 0, "last_activity_date": 1438204397, "creation_date": 1438204397, "answer_id": 31711235, "question_id": 31711122, "link": "https://stackoverflow.com/questions/31711122/extract-substring-from-a-line-in-python-if-another-keyword-is-found/31711235#31711235", "title": "Extract substring from a line in python, if another keyword is found", "body": "<p>Try this regex:</p>\n\n<pre><code>\".*(?=YEAR).*YEAR=(.*?);.*\"g\n</code></pre>\n\n<p>with substitution <code>/1</code></p>\n\n<p><a href=\"https://regex101.com/r/rR3gH5/1\" rel=\"nofollow\">[Regex Demo]</a></p>\n"}, {"tags": [], "owner": {"reputation": 455, "user_id": 4714773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfc5dea9cac35762ef5b6ceb68a51d63?s=128&d=identicon&r=PG&f=1", "display_name": "Digvijayad", "link": "https://stackoverflow.com/users/4714773/digvijayad"}, "is_accepted": false, "score": 1, "last_activity_date": 1438206910, "last_edit_date": 1438206910, "creation_date": 1438206499, "answer_id": 31711786, "question_id": 31711122, "link": "https://stackoverflow.com/questions/31711122/extract-substring-from-a-line-in-python-if-another-keyword-is-found/31711786#31711786", "title": "Extract substring from a line in python, if another keyword is found", "body": "<p>This is what I use, </p>\n\n<pre><code>if \"YEAR\" in s:\n    year= s.split('YEAR=')[1].split(';')[0]\n    print (\"The year is = \" +year)\n#this is the output\n&gt; The year is = onefour \n</code></pre>\n\n<p>Basically what it is doing is splitting the line after <code>YEAR=</code> and before <code>;</code>.  The <code>[1]</code> splits the right of the sub string <code>YEAR=</code> and the <code>[0]</code> splits the left of the sub string <code>;</code> </p>\n"}], "owner": {"reputation": 701, "user_id": 2141709, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/cd3243c310cf623006eea727d17dcad6?s=128&d=identicon&r=PG", "display_name": "Sid5427", "link": "https://stackoverflow.com/users/2141709/sid5427"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "accepted_answer_id": 31711164, "answer_count": 5, "score": 2, "last_activity_date": 1438206910, "creation_date": 1438203969, "question_id": 31711122, "link": "https://stackoverflow.com/questions/31711122/extract-substring-from-a-line-in-python-if-another-keyword-is-found", "title": "Extract substring from a line in python, if another keyword is found", "body": "<p>I am trying to work with regex in python to extract a small substring from a large string, if another keyword is found in the string.</p>\n\n<p>e.g. -</p>\n\n<pre><code>s = \"1  0001    1   UG  science,ee;YEAR=onefour;standard-&gt;2;district-&gt;9\"\n\nif \"year\" in s:\n    print (\"The year is = \",VALUE_OF_YEAR)&lt;--- here I hope to somehow get the year substring from the above string and print it.\n</code></pre>\n\n<p>i.e. the answer will look like</p>\n\n<pre><code>The year is = onefour  \n</code></pre>\n\n<p>Please note - the value will change if its denoting a different number like onethree, oneseven, etc</p>\n\n<p>I basically want to copy whatever starts from after</p>\n\n<pre><code>= \n</code></pre>\n\n<p>till the </p>\n\n<pre><code>;\n</code></pre>\n\n<p>if I find </p>\n\n<pre><code>YEAR\n</code></pre>\n\n<p>in the string and print it out</p>\n\n<p>I am not too sure how to do this.  </p>\n\n<p>I tried using string manipulation methods in python, but so far I haven't found any way to precisely copy off all the words till the ';' in the string.</p>\n\n<p>Any help will be appreciated. Any other method is also welcome. </p>\n"}, {"tags": ["python", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 4154263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7bd582c94d74302095a63dd8303a131?s=128&d=identicon&r=PG&f=1", "display_name": "DeepM", "link": "https://stackoverflow.com/users/4154263/deepm"}, "edited": false, "score": 0, "creation_date": 1438279200, "post_id": 31713441, "comment_id": 51397363, "body": "Thanks. That&#39;s better, didn&#39;t know about the nth function."}], "tags": [], "owner": {"reputation": 23416, "user_id": 3877338, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/300539394aa55b738b51e6769cca9b3e?s=128&d=identicon&r=PG&f=1", "display_name": "JohnE", "link": "https://stackoverflow.com/users/3877338/johne"}, "is_accepted": false, "score": 1, "last_activity_date": 1438216641, "creation_date": 1438216641, "answer_id": 31713441, "question_id": 31711059, "link": "https://stackoverflow.com/questions/31711059/how-to-convert-monthly-return-to-yearly-return-after-checking-if-all-12-months-a/31713441#31713441", "title": "How to convert monthly return to yearly return after checking if all 12 months are present in pandas?", "body": "<p>Your approach looks pretty good to me.  Here's an alternative approach FWIW that is a little more concise and use <code>nth</code> as a bit of a shortcut.</p>\n\n<p>Here's some sample data that is 46 months for 2 firms (just missing the very first month and very last month).</p>\n\n<pre><code>stocks = pd.DataFrame({ \n    'cusip6':np.repeat( [1234,5678], 24 ),\n    'date':np.tile( pd.date_range('1/1/2011', periods=24, freq='M'), 2 ),\n    'return':(np.random.choice([1.005,1.010,1.015],48)) })\nstocks = stocks.iloc[1:-1]\n</code></pre>\n\n<p>Then with some groupby stuff including <code>nth</code> you can do this fairly compactly.</p>\n\n<pre><code>stocks['year']=stocks.date.dt.year\nstocks['cum_return'] = stocks.groupby(['cusip6','year']).cumprod()\nstocks.groupby(['cusip6','year']).nth(11)\n\n             cum_return       date  return\ncusip6 year                               \n1234   2012    1.115614 2012-12-31   1.010\n5678   2011    1.149248 2011-12-31   1.015\n</code></pre>\n\n<p>And for comparison, if we had used <code>tail(1)</code> instead of <code>nth(11)</code> we would just be getting the last month whether it is the 11th or 12th month.</p>\n\n<pre><code>stocks.groupby(['cusip6','year']).tail(1)\n\n    cusip6       date  return  year  cum_return\n11    1234 2011-12-31   1.010  2011    1.110064\n23    1234 2012-12-31   1.010  2012    1.115614\n35    5678 2011-12-31   1.015  2011    1.149248\n46    5678 2012-11-30   1.015  2012    1.126687\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 4154263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7bd582c94d74302095a63dd8303a131?s=128&d=identicon&r=PG&f=1", "display_name": "DeepM", "link": "https://stackoverflow.com/users/4154263/deepm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1824, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1438216641, "creation_date": 1438203751, "last_edit_date": 1438204678, "question_id": 31711059, "link": "https://stackoverflow.com/questions/31711059/how-to-convert-monthly-return-to-yearly-return-after-checking-if-all-12-months-a", "title": "How to convert monthly return to yearly return after checking if all 12 months are present in pandas?", "body": "<p>I have monthly returns and i want to convert them into yearly returns for each company (using cusip6, i am using CRSP data). I also want to keep only those years which have all the 12 months. I am currently using the following code, but i would like to know if there is inbuilt functions in pandas that can do this?`</p>\n\n<pre><code>def monthly_to_ann_ret(data):\n    \"\"\" funtion to check if all 12 months are present and\n        calculate yearly returns from monthly returns\n    \"\"\"\n    data['year'] = data['date'].dt.year \n    data.sort(['cusip6','year'],inplace = True)\n    data_grouped = data.groupby(['cusip6','year'])\n    annual_df = pd.DataFrame()\n    for name,group in data_grouped:\n        if group.shape[0] == 12:\n            group.loc['RET'] = 1 + group['RET']\n            group['yearly_RET'] = group['RET'].cumprod() - 1\n            annual_df = annual_df.append(group.iloc[-1])\n        else:\n            continue\n    return annual_df`\n</code></pre>\n"}, {"tags": ["python", "refactoring", "psycopg2"], "answers": [{"comments": [{"owner": {"reputation": 64597, "user_id": 1453822, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2c8db97d2ecdfe5e044cee4c470abb60?s=128&d=identicon&r=PG", "display_name": "DeepSpace", "link": "https://stackoverflow.com/users/1453822/deepspace"}, "edited": false, "score": 0, "creation_date": 1438204435, "post_id": 31711125, "comment_id": 51360524, "body": "It&#39;s not that straightforward in <code>Python</code>: <a href=\"http://stackoverflow.com/questions/6760685/creating-a-singleton-in-python\" title=\"creating a singleton in python\">stackoverflow.com/questions/6760685/&hellip;</a>"}], "tags": [], "owner": {"reputation": 41, "user_id": 5148639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1577723b8e5ee7a7f59c109f0fee69ef?s=128&d=identicon&r=PG&f=1", "display_name": "Derek Snider", "link": "https://stackoverflow.com/users/5148639/derek-snider"}, "is_accepted": false, "score": 0, "last_activity_date": 1438204006, "creation_date": 1438204006, "answer_id": 31711125, "question_id": 31711052, "link": "https://stackoverflow.com/questions/31711052/how-to-save-connections-and-reduce-argument-passing-when-always-connecting-to-th/31711125#31711125", "title": "How to save connections and reduce argument passing when always connecting to the same db in different functions?", "body": "<p>Try creating a singleton db class that takes the arguments once, and then you only ever call getInstance() to get the object and open() to get the connection.</p>\n"}, {"tags": [], "owner": {"reputation": 455, "user_id": 4714773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfc5dea9cac35762ef5b6ceb68a51d63?s=128&d=identicon&r=PG&f=1", "display_name": "Digvijayad", "link": "https://stackoverflow.com/users/4714773/digvijayad"}, "is_accepted": false, "score": 0, "last_activity_date": 1438208156, "creation_date": 1438208156, "answer_id": 31712117, "question_id": 31711052, "link": "https://stackoverflow.com/questions/31711052/how-to-save-connections-and-reduce-argument-passing-when-always-connecting-to-th/31712117#31712117", "title": "How to save connections and reduce argument passing when always connecting to the same db in different functions?", "body": "<p>Here's what I do</p>\n\n<pre><code>class Database():\n    def __init__(self):\n        db = ....\n        host = \u2026\n        username = \u2026\n        password = \u2026\n        self.con = psycopg2.connect(\"dbname='{}' user='{}' password='{}' host='{}'\".format(db, username, password, host))\n        self.cur = con.cursor()\n\n    def function1(self):\n        try:\n            self.cur.execute(\"SELECT * FROM {}.{};\".format(schema, \u2018myTable\u2019))\n            msg = self.cursor.fetchall()\n        except:\n            ...\n</code></pre>\n\n<p>With this you only have to <code>connect</code> once and you can access <code>cursor</code> and <code>database</code> using <code>self.cur</code> and <code>self.con</code> respectively from within your class.<br>\nYou can make any number of functions now, similar to <code>function1</code> through which you can access the database . </p>\n"}], "owner": {"reputation": 12893, "user_id": 1279820, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/CJFmh.png?s=128&g=1", "display_name": "Celeritas", "link": "https://stackoverflow.com/users/1279820/celeritas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 241, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1438208156, "creation_date": 1438203724, "last_edit_date": 1438204246, "question_id": 31711052, "link": "https://stackoverflow.com/questions/31711052/how-to-save-connections-and-reduce-argument-passing-when-always-connecting-to-th", "title": "How to save connections and reduce argument passing when always connecting to the same db in different functions?", "body": "<p>If you have a lot of functions connecting to the database, how do you do it so you don\u2019t 1) pass a lot of arguments to each function 2) don\u2019t establish (and close) a new connection each time.\nIn pythonic pseudocode</p>\n\n<pre><code>main():\n    db = \u2026\n    host = \u2026\n    username = \u2026\n    password = \u2026\n    some_function(db, host, username, password)\n\nsome_function(db, host, username, password):\n   try:\n   con = psycopg2.connect(\"dbname='{}' user='{}' password='{}' host='{}'\".format(db, username, password, host))\n   cur = con.cursor()\n   cur.execute(\"SELECT * FROM {}.{};\".format(schema, \u2018myTable\u2019))\n   function2(cur.fetchall(),db, host, username, password)\n\u2026\n    except:\n        \u2026\n\nFunction2(db, host, username, password):\n   try:\n     con = psycopg2.connect(\"dbname='{}' user='{}' password='{}' host='{}'\".format(db, username, password, host))\n     cur = con.cursor()\n     cur.execute(\"SELECT * FROM {}.{};\".format(schema, \u2018otherTable\u2019))\n     function3(cur.fetchall(),db, host, username, password)\n     \u2026\n    except:\n        \u2026\n</code></pre>\n\n<p>It\u2019s unfortunate that <code>some_function()</code> and <code>function2()</code> are almost exactly the same (though the <code>\u2026</code> inside would be different). I\u2019m wondering how can I extract this code to reduce redundancy? At the very least how do I reduce the function signatures with <code>db, host, username, password</code>?</p>\n\n<p>I thought of putting these as global variables so at least I wouldn't have to pass the variables to each function that needs the database. </p>\n"}, {"tags": ["python", "python-3.x", "python-3.4"], "comments": [{"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1438203425, "post_id": 31710955, "comment_id": 51359956, "body": "Start with a console that can actually handle a wider range of Unicode characters. Your console is configured for GBK only."}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 1, "creation_date": 1438203466, "post_id": 31710955, "comment_id": 51359977, "body": "To write to a file, specify a codec that can handle the specific Unicode codepoints. <code>open(&#39;test.txt&#39;, &#39;w&#39;, encoding=&#39;utf8&#39;)</code> for example."}, {"owner": {"reputation": 501, "user_id": 4310769, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/304cfed7c6287b2235f4c583c6e9b5af?s=128&d=identicon&r=PG&f=1", "display_name": "liyuanhe211", "link": "https://stackoverflow.com/users/4310769/liyuanhe211"}, "reply_to_user": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1438205977, "post_id": 31710955, "comment_id": 51361216, "body": "@MartijnPieters I did use <code>-m idlelib -r</code> in the interpreter option to pop up a  IDLE shell, which temporarily fix this problem, but is it possible to print it in pycharm console?"}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1438240228, "post_id": 31710955, "comment_id": 51371720, "body": "See <a href=\"https://www.jetbrains.com/pycharm/help/configuring-output-encoding.html\" rel=\"nofollow noreferrer\">jetbrains.com/pycharm/help/configuring-output-encoding.html</a> for the PyCharm console configuration."}], "owner": {"reputation": 501, "user_id": 4310769, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/304cfed7c6287b2235f4c583c6e9b5af?s=128&d=identicon&r=PG&f=1", "display_name": "liyuanhe211", "link": "https://stackoverflow.com/users/4310769/liyuanhe211"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 239, "favorite_count": 0, "closed_date": 1438203517, "answer_count": 0, "score": 0, "last_activity_date": 1438203399, "creation_date": 1438203350, "last_edit_date": 1438203399, "question_id": 31710955, "link": "https://stackoverflow.com/questions/31710955/in-python-3-how-do-i-print-the-character-u2212-a-minus-sign-%e2%88%92-without-un", "closed_reason": "Duplicate", "title": "In python 3, how do I print the character &#39;\\u2212&#39; (a minus sign &quot;\u2212&quot;) without UnicodeEncodeError?", "body": "<p>I need to process some Excel files which contains lots of \"\u2212\" ('\\u2212'), as well as other characters. After lots of trying, I can't even print it on screen, or save it to a file:</p>\n\n<pre><code>a='\u2212'\nprint(a.encode('utf-8')) # print b'\\xe2\\x88\\x92'\nprint(a)     # raise UnicodeEncodeError: 'gbk' codec can't encode character '\\u2212' in position 0: illegal multibyte sequence\nwith open('test.txt','w') as file:\n    file.write(a)      # raise UnicodeEncodeError: 'gbk' codec can't encode character '\\u2212' in position 0: illegal multibyte sequence\n</code></pre>\n\n<p>In this page: <a href=\"https://docs.python.org/3.4/howto/unicode.html\" rel=\"nofollow\">https://docs.python.org/3.4/howto/unicode.html</a>, it replace it with some other characters, but I have to print it, or at least write it to a file properly:</p>\n\n<pre><code>&gt;&gt;&gt; u = chr(40960) + 'abcd' + chr(1972)\n&gt;&gt;&gt; u.encode('utf-8')\nb'\\xea\\x80\\x80abcd\\xde\\xb4'\n&gt;&gt;&gt; u.encode('ascii')  \nTraceback (most recent call last):\n    ...\nUnicodeEncodeError: 'ascii' codec can't encode character '\\ua000' in\n  position 0: ordinal not in range(128)\n&gt;&gt;&gt; u.encode('ascii', 'ignore')\nb'abcd'\n&gt;&gt;&gt; u.encode('ascii', 'replace')\nb'?abcd?'\n&gt;&gt;&gt; u.encode('ascii', 'xmlcharrefreplace')\nb'&amp;#40960;abcd&amp;#1972;'\n&gt;&gt;&gt; u.encode('ascii', 'backslashreplace')\nb'\\\\ua000abcd\\\\u07b4'\n</code></pre>\n\n<p>How can I do it?</p>\n"}, {"tags": ["python", "json"], "comments": [{"owner": {"reputation": 45741, "user_id": 744178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3193139ea494c45e63752504f5ff1f2?s=128&d=identicon&r=PG", "display_name": "jwodder", "link": "https://stackoverflow.com/users/744178/jwodder"}, "edited": false, "score": 0, "creation_date": 1438203421, "post_id": 31710922, "comment_id": 51359953, "body": "Single quotes are not valid JSON.  You have to use double-quotes."}, {"owner": {"reputation": 9040, "user_id": 166836, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/7dc9b173972bd369209e43dd2c997bab?s=128&d=identicon&r=PG", "display_name": "sdot257", "link": "https://stackoverflow.com/users/166836/sdot257"}, "reply_to_user": {"reputation": 45741, "user_id": 744178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3193139ea494c45e63752504f5ff1f2?s=128&d=identicon&r=PG", "display_name": "jwodder", "link": "https://stackoverflow.com/users/744178/jwodder"}, "edited": false, "score": 0, "creation_date": 1438203428, "post_id": 31710922, "comment_id": 51359957, "body": "Fixed thx for catching that. It was correct in my codebase."}, {"owner": {"reputation": 9040, "user_id": 166836, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/7dc9b173972bd369209e43dd2c997bab?s=128&d=identicon&r=PG", "display_name": "sdot257", "link": "https://stackoverflow.com/users/166836/sdot257"}, "reply_to_user": {"reputation": 45741, "user_id": 744178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3193139ea494c45e63752504f5ff1f2?s=128&d=identicon&r=PG", "display_name": "jwodder", "link": "https://stackoverflow.com/users/744178/jwodder"}, "edited": false, "score": 0, "creation_date": 1438203556, "post_id": 31710922, "comment_id": 51360041, "body": "well the interesting thing is that Ansible is returning it w/ single quotes. My JSON in the source file has double quotes but when I return the variable it converts everything to single quotes."}, {"owner": {"reputation": 9040, "user_id": 166836, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/7dc9b173972bd369209e43dd2c997bab?s=128&d=identicon&r=PG", "display_name": "sdot257", "link": "https://stackoverflow.com/users/166836/sdot257"}, "reply_to_user": {"reputation": 45741, "user_id": 744178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3193139ea494c45e63752504f5ff1f2?s=128&d=identicon&r=PG", "display_name": "jwodder", "link": "https://stackoverflow.com/users/744178/jwodder"}, "edited": false, "score": 0, "creation_date": 1438203715, "post_id": 31710922, "comment_id": 51360131, "body": "I take it back it is double quotes, the output is just in single quote."}], "answers": [{"comments": [{"owner": {"reputation": 9040, "user_id": 166836, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/7dc9b173972bd369209e43dd2c997bab?s=128&d=identicon&r=PG", "display_name": "sdot257", "link": "https://stackoverflow.com/users/166836/sdot257"}, "edited": false, "score": 0, "creation_date": 1438207501, "post_id": 31711104, "comment_id": 51361887, "body": "grrrr so it&#39;s telling me there&#39;s a Keyerror for module and svn_tag. <code>return &#39;, &#39;.join(item[&#39;svn_tag&#39;] for item in data) KeyError: &#39;svn_tag</code>"}, {"owner": {"reputation": 18603, "user_id": 4526187, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YP5so.jpg?s=128&g=1", "display_name": "JuniorCompressor", "link": "https://stackoverflow.com/users/4526187/juniorcompressor"}, "reply_to_user": {"reputation": 9040, "user_id": 166836, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/7dc9b173972bd369209e43dd2c997bab?s=128&d=identicon&r=PG", "display_name": "sdot257", "link": "https://stackoverflow.com/users/166836/sdot257"}, "edited": false, "score": 0, "creation_date": 1438207801, "post_id": 31711104, "comment_id": 51362012, "body": "Do you use the same string? Otherwise check if svn_tag is defined for each array entry."}, {"owner": {"reputation": 9040, "user_id": 166836, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/7dc9b173972bd369209e43dd2c997bab?s=128&d=identicon&r=PG", "display_name": "sdot257", "link": "https://stackoverflow.com/users/166836/sdot257"}, "edited": false, "score": 0, "creation_date": 1438208469, "post_id": 31711104, "comment_id": 51362266, "body": "i think it&#39;s an Ansible thing so ignore the Keyerror. So I&#39;m pretty sure the string/variable that I&#39;m passing in is this <code>[{&#39;svn_tag&#39;: &#39;20150624r1_6.36_gameofthrones&#39;, &#39;module&#39;: &#39;ariaapi&#39;}]</code> because if I return the variable that i passed to the function that&#39;s what gets displayed. However, running it through the function you have, it&#39;s throwing a <code>ValueError: malformed string</code>"}, {"owner": {"reputation": 18603, "user_id": 4526187, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YP5so.jpg?s=128&g=1", "display_name": "JuniorCompressor", "link": "https://stackoverflow.com/users/4526187/juniorcompressor"}, "reply_to_user": {"reputation": 9040, "user_id": 166836, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/7dc9b173972bd369209e43dd2c997bab?s=128&d=identicon&r=PG", "display_name": "sdot257", "link": "https://stackoverflow.com/users/166836/sdot257"}, "edited": false, "score": 0, "creation_date": 1438208660, "post_id": 31711104, "comment_id": 51362346, "body": "This is because the variable isn&#39;t a string but an already python array. So skip the whole parsing thing and use <code>&#39;, &#39;.join(item[&#39;module&#39;] + &#39; - &#39; + item[&#39;svn_tag&#39;] for item in variable_name)</code>"}, {"owner": {"reputation": 9040, "user_id": 166836, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/7dc9b173972bd369209e43dd2c997bab?s=128&d=identicon&r=PG", "display_name": "sdot257", "link": "https://stackoverflow.com/users/166836/sdot257"}, "edited": false, "score": 0, "creation_date": 1438208785, "post_id": 31711104, "comment_id": 51362392, "body": "Ughhh ... so w/o the <code>data = ast.literal_eval(myjson)</code> line and with only <code>return &#39;, &#39;.join(item[&#39;module&#39;] + &#39; - &#39; + item[&#39;svn_tag&#39;] for item in myjson)</code> yields <code>KeyError: &#39;module&#39;</code>"}, {"owner": {"reputation": 9040, "user_id": 166836, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/7dc9b173972bd369209e43dd2c997bab?s=128&d=identicon&r=PG", "display_name": "sdot257", "link": "https://stackoverflow.com/users/166836/sdot257"}, "edited": false, "score": 0, "creation_date": 1438208872, "post_id": 31711104, "comment_id": 51362427, "body": "I notice you wrap the sample JSON array within three single quotes. Is that something I need to consider?"}, {"owner": {"reputation": 18603, "user_id": 4526187, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YP5so.jpg?s=128&g=1", "display_name": "JuniorCompressor", "link": "https://stackoverflow.com/users/4526187/juniorcompressor"}, "reply_to_user": {"reputation": 9040, "user_id": 166836, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/7dc9b173972bd369209e43dd2c997bab?s=128&d=identicon&r=PG", "display_name": "sdot257", "link": "https://stackoverflow.com/users/166836/sdot257"}, "edited": false, "score": 0, "creation_date": 1438208916, "post_id": 31711104, "comment_id": 51362444, "body": "<code>print type(myjson)</code> and <code>print(myjson)</code> and tell me the output"}, {"owner": {"reputation": 18603, "user_id": 4526187, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YP5so.jpg?s=128&g=1", "display_name": "JuniorCompressor", "link": "https://stackoverflow.com/users/4526187/juniorcompressor"}, "reply_to_user": {"reputation": 9040, "user_id": 166836, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/7dc9b173972bd369209e43dd2c997bab?s=128&d=identicon&r=PG", "display_name": "sdot257", "link": "https://stackoverflow.com/users/166836/sdot257"}, "edited": false, "score": 0, "creation_date": 1438208948, "post_id": 31711104, "comment_id": 51362454, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/84624/discussion-between-juniorcompressor-and-luckytaxi\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 18603, "user_id": 4526187, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YP5so.jpg?s=128&g=1", "display_name": "JuniorCompressor", "link": "https://stackoverflow.com/users/4526187/juniorcompressor"}, "is_accepted": false, "score": 1, "last_activity_date": 1438204370, "last_edit_date": 1438204370, "creation_date": 1438203900, "answer_id": 31711104, "question_id": 31710922, "link": "https://stackoverflow.com/questions/31710922/how-to-parse-a-json-array-in-python/31711104#31711104", "title": "How to parse a JSON array in Python", "body": "<p>The problem is that <code>json</code> wants the strings and field names encoded in double quotes and not single quotes. So either replace manually the single quotes or use <a href=\"https://docs.python.org/2/library/ast.html#ast.literal_eval\" rel=\"nofollow\">ast.literal_eval</a> since the string is also a python valid literal:</p>\n\n<pre><code>import ast\n\ndef blah(myjson):\n    data = ast.literal_eval(myjson)\n    return ', '.join(item['module'] + ' - ' + item['svn_tag'] for item in data)\n\ns = '''[{'svn_tag': '20150623r3', 'module': 'api'}, {'svn_tag': '20150624r1', 'module': 'ui'}]'''\nprint blah(s)\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>api - 20150623r3, ui - 20150624r1\n</code></pre>\n"}], "owner": {"reputation": 9040, "user_id": 166836, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/7dc9b173972bd369209e43dd2c997bab?s=128&d=identicon&r=PG", "display_name": "sdot257", "link": "https://stackoverflow.com/users/166836/sdot257"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1438204370, "creation_date": 1438203254, "question_id": 31710922, "link": "https://stackoverflow.com/questions/31710922/how-to-parse-a-json-array-in-python", "title": "How to parse a JSON array in Python", "body": "<p>My JSON array is as follows and I would like to build a new string that would output accordingly.</p>\n\n<p>I have a simple function just to see if I can return a value but it's failing with <code>Error was expected string or buffer</code></p>\n\n<pre><code>def blah(myjson):\n    data = json.loads(myjson)\n    for item in data:\n        result = item['svn_tag']\n\n    return result\n</code></pre>\n\n<p>JSON:</p>\n\n<pre><code>[{'svn_tag': '20150623r3', 'module': 'api'}, {'svn_tag': '20150624r1', 'module': 'ui'}]\n</code></pre>\n\n<p>Proposed Output:</p>\n\n<pre><code>api - 20150623r3, ui - 20150623r3\n</code></pre>\n"}, {"tags": ["python", "ruby", "automation", "psql"], "answers": [{"tags": [], "owner": {"reputation": 643, "user_id": 501294, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0581be4e17d12b4a81978d92f33e4524?s=128&d=identicon&r=PG", "display_name": "fishsticks", "link": "https://stackoverflow.com/users/501294/fishsticks"}, "is_accepted": true, "score": 3, "last_activity_date": 1438203703, "creation_date": 1438203703, "answer_id": 31711048, "question_id": 31710837, "link": "https://stackoverflow.com/questions/31710837/pythonic-way-to-print-out-column-conditions-in-database-psql/31711048#31711048", "title": "pythonic way to print out column conditions in database (psql)", "body": "<p>For a Postgres query, I think this does what you're looking for.</p>\n\n<pre><code>SELECT column_name FROM information_schema.columns WHERE table_name='some_table' AND data_type='varchar(2)';\n</code></pre>\n\n<p>This just selects all the <code>varchar(2)</code> columns in a specific table, but you can drop that part to get them throughout the entire database. You can also add in <code>table_schema='some_schema'</code> for just a certain schema in the database.</p>\n\n<p>As far as a pythonic or ruby way to do it, I don't know of one, other than running that query in psycopg or some other Postgres adapter.</p>\n\n<p>More info on <a href=\"http://www.postgresql.org/docs/current/static/infoschema-columns.html\" rel=\"nofollow\">information_schema.columns</a></p>\n"}], "owner": {"reputation": 6798, "user_id": 3282434, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/bd87b9229901acfa4c6f754da6bf3655?s=128&d=identicon&r=PG&f=1", "display_name": "codyc4321", "link": "https://stackoverflow.com/users/3282434/codyc4321"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 1, "accepted_answer_id": 31711048, "answer_count": 1, "score": 2, "last_activity_date": 1438203703, "creation_date": 1438202989, "question_id": 31710837, "link": "https://stackoverflow.com/questions/31710837/pythonic-way-to-print-out-column-conditions-in-database-psql", "title": "pythonic way to print out column conditions in database (psql)", "body": "<p>I have a nasty error with no direction when using factory boy to make fake models:</p>\n\n<p><code>DataError: value too long for type character varying(2)</code></p>\n\n<p>Is there a pythonic (or ruby) way to print out only the names of columns that are varchar(2) type in the database?  I'd assume it's in some pgadmin3 metadata? Thank you</p>\n"}, {"tags": ["python", "encoding", "utf-8"], "comments": [{"owner": {"reputation": 1253984, "user_id": 22656, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/6d8ebb117e8d83d74ea95fbdd0f87e13?s=128&d=identicon&r=PG", "display_name": "Jon Skeet", "link": "https://stackoverflow.com/users/22656/jon-skeet"}, "edited": false, "score": 1, "creation_date": 1438203122, "post_id": 31710810, "comment_id": 51359749, "body": "ASCII is a 7-bit encoding. There&#39;s no such value as ASCII E9."}, {"owner": {"reputation": 2914, "user_id": 3630528, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/b30def66e0863b24eb11d91b34b52740?s=128&d=identicon&r=PG&f=1", "display_name": "spen123", "link": "https://stackoverflow.com/users/3630528/spen123"}, "reply_to_user": {"reputation": 1253984, "user_id": 22656, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/6d8ebb117e8d83d74ea95fbdd0f87e13?s=128&d=identicon&r=PG", "display_name": "Jon Skeet", "link": "https://stackoverflow.com/users/22656/jon-skeet"}, "edited": false, "score": 0, "creation_date": 1438203309, "post_id": 31710810, "comment_id": 51359870, "body": "@JonSkeet what do you mean? this is what I am getting as errors <code>UnicodeEncodeError: &#39;ascii&#39; codec can&#39;t encode character u&#39;\\x96&#39; in position 62393: ordinal not in range(128)</code> and <code>UnicodeEncodeError: &#39;ascii&#39; codec can&#39;t encode character u&#39;\\xe9&#39; in position 343071: ordinal not in range(128)</code> when I write my string to file"}, {"owner": {"reputation": 18759, "user_id": 2226988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c6fbec3a71b2e95e4a6e41478deb379?s=128&d=identicon&r=PG", "display_name": "Tom Blodget", "link": "https://stackoverflow.com/users/2226988/tom-blodget"}, "edited": false, "score": 0, "creation_date": 1438206339, "post_id": 31710810, "comment_id": 51361366, "body": "&quot;Why I am encoding data I want to be able to read&quot;\u2014there is no text but encoded text."}, {"owner": {"reputation": 1253984, "user_id": 22656, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/6d8ebb117e8d83d74ea95fbdd0f87e13?s=128&d=identicon&r=PG", "display_name": "Jon Skeet", "link": "https://stackoverflow.com/users/22656/jon-skeet"}, "edited": false, "score": 0, "creation_date": 1438207622, "post_id": 31710810, "comment_id": 51361940, "body": "@spenf10: Well yes, because that character isn&#39;t in ASCII. That&#39;s what I mean. The unicode character you&#39;re referring to is U+00E9. That isn&#39;t in ASCII, so trying to encode it in ASCII doesn&#39;t work. Use a different encoding. Note that to write text to a file, you <i>always</i> encode it - an encoding is just a mapping from text to binary data."}], "answers": [{"tags": [], "owner": {"reputation": 8090, "user_id": 2116607, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/aab0dbe50765deff6222bcaeaee8f17b?s=128&d=identicon&r=PG&f=1", "display_name": "cdonts", "link": "https://stackoverflow.com/users/2116607/cdonts"}, "is_accepted": false, "score": 0, "last_activity_date": 1438213371, "creation_date": 1438213371, "answer_id": 31712993, "question_id": 31710810, "link": "https://stackoverflow.com/questions/31710810/cant-encode-ascii-character-u-xe9/31712993#31712993", "title": "Cant encode ascii character u&#39;\\xe9&#39;", "body": "<p>As mentioned, you're trying to write non-ASCII characters with the ASCII encoding. Since the built-in <code>open</code> function doesn't support the <code>encoding</code> parameter, then consider always using <code>io.open</code> in Python 2.7 (which is the default since Python 3.x).</p>\n"}], "owner": {"reputation": 2914, "user_id": 3630528, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/b30def66e0863b24eb11d91b34b52740?s=128&d=identicon&r=PG&f=1", "display_name": "spen123", "link": "https://stackoverflow.com/users/3630528/spen123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1259, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1438213371, "creation_date": 1438202932, "last_edit_date": 1495542102, "question_id": 31710810, "link": "https://stackoverflow.com/questions/31710810/cant-encode-ascii-character-u-xe9", "title": "Cant encode ascii character u&#39;\\xe9&#39;", "body": "<p>I am getting a message <code>'ascii' codec can't encode character u'\\xe9'</code> when I am writing a string to my file, heres how I am writing my file</p>\n\n<pre><code>my_file = open(output_path, \"w\")\nmy_file.write(output_string)\nmy_file.close()\n</code></pre>\n\n<p>I have been searching and found answers like this <a href=\"https://stackoverflow.com/questions/19833440/unicodeencodeerror-ascii-codec-cant-encode-character-u-xe9-in-position-7\">UnicodeEncodeError: &#39;ascii&#39; codec can&#39;t encode character u&#39;\\xe9&#39; in position 7: ordinal not in range(128)</a> and the first one didn't work and then this one I'm confused why I am encoding data I want to be able to read</p>\n\n<pre><code>import io\n\nf = io.open(filename, 'w', encoding='utf8')\n</code></pre>\n\n<p>Thanks for the help</p>\n"}, {"tags": ["python", "oracle", "cx-oracle"], "answers": [{"tags": [], "owner": {"reputation": 31310, "user_id": 68105, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/1bC0L.png?s=128&g=1", "display_name": "MK.", "link": "https://stackoverflow.com/users/68105/mk"}, "is_accepted": true, "score": 3, "last_activity_date": 1438869565, "last_edit_date": 1438869565, "creation_date": 1438205740, "answer_id": 31711587, "question_id": 31710769, "link": "https://stackoverflow.com/questions/31710769/cx-oracle-insert-large-xmltype-value/31711587#31711587", "title": "cx_Oracle insert large XMLType value", "body": "<p>Oh, wait, here it is:</p>\n\n<pre><code>import cx_Oracle\nconn_to = cx_Oracle.connect('user', '...', 'dbserver:1521/ENGR') \n\ncur_to = conn_to.cursor()\n\ninsert_sql = 'insert into tc values (:val, xmltype(:xmlval))' # need to wrap with xmltype() !\n\ncur_to.setinputsizes(val=cx_Oracle.CLOB, xmlval=cx_Oracle.CLOB) # need to set to cx_Oracle.CLOB!\ns =  ('&lt;xml&gt;' + '&lt;inner/&gt;' * 550 + '&lt;/xml&gt;')\ncur_to.execute(insert_sql, val = s, xmlval = s)\n\nconn_to.commit()\n</code></pre>\n"}], "owner": {"reputation": 31310, "user_id": 68105, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/1bC0L.png?s=128&g=1", "display_name": "MK.", "link": "https://stackoverflow.com/users/68105/mk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 910, "favorite_count": 0, "accepted_answer_id": 31711587, "answer_count": 1, "score": 2, "last_activity_date": 1438869592, "creation_date": 1438202790, "last_edit_date": 1438869592, "question_id": 31710769, "link": "https://stackoverflow.com/questions/31710769/cx-oracle-insert-large-xmltype-value", "title": "cx_Oracle insert large XMLType value", "body": "<p>I have the following schema:</p>\n\n<pre><code>create table tc (c1 clob, c2 SYS.XMLTYPE)\n</code></pre>\n\n<p>to which I try to insert using this code:</p>\n\n<pre><code>import cx_Oracle\nconn_to = cx_Oracle.connect('user', '...', 'dbserver:1521/ENGR')\n\ncur_to = conn_to.cursor()\n\ninsert_sql = 'insert into tc values (:val, :xmlval)'\n\ncur_to.prepare(insert_sql)\n\ncur_to.setinputsizes(val=cx_Oracle.CLOB, xmlval=8196)\ncur_to.execute(insert_sql, {'val':('a' * 98196), 'xmlval':('&lt;xml&gt;' + '&lt;inner/&gt;' * 450 + '&lt;/xml&gt;')})\nconn_to.commit()\n</code></pre>\n\n<p>producing an XML object of about 4963 characters.\nHowever if I change that 450 to 500, things no longer work, I get back an error</p>\n\n<p>cx_Oracle.DatabaseError: ORA-01461: can bind a LONG value only for insert into a LONG column</p>\n\n<p>The limit seems to be around 5000, but why?</p>\n"}, {"tags": ["python", "django", "python-2.7", "dictionary"], "comments": [{"owner": {"reputation": 2830, "user_id": 856070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa3aeef5f536776e6a56b1581a2a0fee?s=128&d=identicon&r=PG", "display_name": "jcfollower", "link": "https://stackoverflow.com/users/856070/jcfollower"}, "edited": false, "score": 0, "creation_date": 1438202554, "post_id": 31710650, "comment_id": 51359462, "body": "your line would only work if the result of <code>courseProgress[individualCourse.child.id]</code> were a dictionary itself"}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1438202602, "post_id": 31710650, "comment_id": 51359486, "body": "<code>courseProgress[child.id] = str(child.child_firstname)</code> sets your values to <i>strings</i>. Strings indeed don&#39;t have an <code>update</code> method. What did want to happen here?"}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1438202662, "post_id": 31710650, "comment_id": 51359517, "body": "If you expected the values to be dictionaries instead, you&#39;d have to actually create a dictionary there, instead of strings."}, {"owner": {"reputation": 965, "user_id": 763880, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/2ae9dee2ccb979a1ca4b73be70817e17?s=128&d=identicon&r=PG", "display_name": "AndrewO", "link": "https://stackoverflow.com/users/763880/andrewo"}, "edited": false, "score": 0, "creation_date": 1438202809, "post_id": 31710650, "comment_id": 51359593, "body": "many thanks guys. looks like the root cause of this is to simply change the value from a str() to a dict(). i&#39;ll give that a shot"}], "answers": [{"comments": [{"owner": {"reputation": 965, "user_id": 763880, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/2ae9dee2ccb979a1ca4b73be70817e17?s=128&d=identicon&r=PG", "display_name": "AndrewO", "link": "https://stackoverflow.com/users/763880/andrewo"}, "edited": false, "score": 0, "creation_date": 1438203264, "post_id": 31710844, "comment_id": 51359846, "body": "what worked for me was the following:      for child in children:         courseProgress[child.id] = dict()"}, {"owner": {"reputation": 965, "user_id": 763880, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/2ae9dee2ccb979a1ca4b73be70817e17?s=128&d=identicon&r=PG", "display_name": "AndrewO", "link": "https://stackoverflow.com/users/763880/andrewo"}, "edited": false, "score": 0, "creation_date": 1438203397, "post_id": 31710844, "comment_id": 51359935, "body": "i&#39;ll mark your answer as correct since, whilst not exactly the same as my end code it still works... the end effect of declaring an empty dictionary is what fixed it.... thanks to Martijn Pieters as well!"}], "tags": [], "owner": {"reputation": 2830, "user_id": 856070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa3aeef5f536776e6a56b1581a2a0fee?s=128&d=identicon&r=PG", "display_name": "jcfollower", "link": "https://stackoverflow.com/users/856070/jcfollower"}, "is_accepted": true, "score": 0, "last_activity_date": 1438203002, "creation_date": 1438203002, "answer_id": 31710844, "question_id": 31710650, "link": "https://stackoverflow.com/questions/31710650/error-str-object-has-no-attribute-update-when-adding-key-to-dict/31710844#31710844", "title": "error: &#39;str&#39; object has no attribute &#39;update&#39; when adding key to dict", "body": "<p>How about this ...</p>\n\n<pre><code>for child in children:\n    courseProgress[child.id] = {\n                   name: str(child.child_firstname),\n                   courses: {}\n                 }\n</code></pre>\n\n<p>and then</p>\n\n<pre><code>courseProgress[individualCourse.child.id]['courses'].update({currentCourseID : thisCourse})\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 696, "user_id": 5170753, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-x_fAeerAfNA/AAAAAAAAAAI/AAAAAAAAAGI/MMwVGA12oKI/photo.jpg?sz=128", "display_name": "Martin Alderete", "link": "https://stackoverflow.com/users/5170753/martin-alderete"}, "is_accepted": false, "score": 0, "last_activity_date": 1438203188, "creation_date": 1438203188, "answer_id": 31710900, "question_id": 31710650, "link": "https://stackoverflow.com/questions/31710650/error-str-object-has-no-attribute-update-when-adding-key-to-dict/31710900#31710900", "title": "error: &#39;str&#39; object has no attribute &#39;update&#39; when adding key to dict", "body": "<p>You are trying to update() a string not a dict.\nI think you should have a different data structure, now you have a dict where the keys are integer and the values are string.\nYou need a dict of dict.</p>\n\n<p><code>{key1: {}, key2: {}}</code></p>\n\n<p>You could simple change the str() for {}.</p>\n\n<p>Another approach to dont mix \"the name\" and the \"couses\" is to do something like</p>\n\n<pre><code>for child in children:\n    courseProgress[child.id] = {\n        'name': child.child_firstname,  #child_name\n        'courses': {}  #map of courses course_id: course\n    }\n</code></pre>\n\n<p>then you could do:</p>\n\n<pre><code>courses = courseProgress[individualCourse.child.id]['courses']\ncourses.update({currentCourseID:thisCourse})\n</code></pre>\n\n<p>if you want the info of a given child.id and course you could do\ncouseProgress[childId]['courses'][someCourseId]</p>\n\n<p>Instead of having that kind of complex datastructure sometimes its better to createa class :).</p>\n"}], "owner": {"reputation": 965, "user_id": 763880, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/2ae9dee2ccb979a1ca4b73be70817e17?s=128&d=identicon&r=PG", "display_name": "AndrewO", "link": "https://stackoverflow.com/users/763880/andrewo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6570, "favorite_count": 0, "accepted_answer_id": 31710844, "answer_count": 2, "score": 0, "last_activity_date": 1438203188, "creation_date": 1438202386, "question_id": 31710650, "link": "https://stackoverflow.com/questions/31710650/error-str-object-has-no-attribute-update-when-adding-key-to-dict", "title": "error: &#39;str&#39; object has no attribute &#39;update&#39; when adding key to dict", "body": "<p>quite a newbie question, so please bear with me....</p>\n\n<p>i'm using python 2.7.8 with Django 1.7.1.</p>\n\n<p>i'm trying to add a key to a dict within a for loop.</p>\n\n<pre><code>courseProgress =  dict()\nfor child in children:\n    courseProgress[child.id] = str(child.child_firstname)\nfor individualCourse in allCourses:\n    #get the total number of items within a course\n    totalContentsCount = len(courseContents[individualCourse.course_id])\n    #get the total number of completed steps for this course from the rewardHistory that we obtained earlier\n    thisCourseProgress = len(allCourses.filter(course = individualCourse.course_id))\n    #divide to get a percentage\n    thisProgress = float(thisCourseProgress) / float(totalContentsCount)\n    currentCourseID = int(individualCourse.course_id)\n    thisCourse = {\n        'progress' : thisProgress,\n        'courseInfo' : courseContents[currentCourseID]\n        }\n    courseProgress[individualCourse.child.id].update({currentCourseID : thisCourse})\n</code></pre>\n\n<p>the last line generates the error: <strong>error: 'str' object has no attribute 'update'</strong></p>\n\n<p>obviously(?) it's seeing courseProgress[individualCourse.child.id] as a string and not as a key within a dictionary to which i'm trying to add a child key. I think this is because i'm getting the value returned (which is a string). Within an interactive prompt i get the following:</p>\n\n<pre><code>&gt;&gt;&gt;courseProgress[individualCourse.child.id]\n'Sophie'\n</code></pre>\n\n<p>I'm not sure why this is...</p>\n\n<p><strong>The result i'm after</strong> is to add a child key to <code>courseProgress[individualCourse.child.id]</code> (e.g. <code>courseProgress[1]</code> ), and that child key would be in the eventual format of <code>{1 : thisCourse}</code></p>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["python", "lazy-evaluation", "symbolic-math", "theano"], "answers": [{"comments": [{"owner": {"reputation": 875, "user_id": 1815451, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/edf69fca2b5a6af10634b38e28dd3505?s=128&d=identicon&r=PG", "display_name": "Snurka Bill", "link": "https://stackoverflow.com/users/1815451/snurka-bill"}, "edited": false, "score": 0, "creation_date": 1438204273, "post_id": 31711156, "comment_id": 51360441, "body": "Thank you for answer. Just one thing. If X and Y have some values, Z has still nothing until f is triggered?"}, {"owner": {"reputation": 31975, "user_id": 127480, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e30eaf17e40708aa4ef81be518564572?s=128&d=identicon&r=PG", "display_name": "Daniel Renshaw", "link": "https://stackoverflow.com/users/127480/daniel-renshaw"}, "reply_to_user": {"reputation": 875, "user_id": 1815451, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/edf69fca2b5a6af10634b38e28dd3505?s=128&d=identicon&r=PG", "display_name": "Snurka Bill", "link": "https://stackoverflow.com/users/1815451/snurka-bill"}, "edited": false, "score": 0, "creation_date": 1438204372, "post_id": 31711156, "comment_id": 51360491, "body": "None of <code>x</code>, <code>y</code>, or <code>z</code> have a value until <code>f</code> is executed."}], "tags": [], "owner": {"reputation": 31975, "user_id": 127480, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e30eaf17e40708aa4ef81be518564572?s=128&d=identicon&r=PG", "display_name": "Daniel Renshaw", "link": "https://stackoverflow.com/users/127480/daniel-renshaw"}, "is_accepted": true, "score": 1, "last_activity_date": 1438204151, "creation_date": 1438204151, "answer_id": 31711156, "question_id": 31710586, "link": "https://stackoverflow.com/questions/31710586/lazy-evaluation-of-dot-or-other-theano-function/31711156#31711156", "title": "Lazy evaluation of .dot or other theano function", "body": "<p>It isn't really possible to get a value from a symbolic variable because they don't have a value; instead they stand in for a value that is provided later.</p>\n\n<p>Consider the following example:</p>\n\n<pre><code>x = theano.tensor.matrix()\ny = theano.tensor.matrix()\nz = theano.dot(x, y)\nf = theano.function(inputs=[x, y], outputs=z)\na = numpy.array([[1,2,3],[4,5,6]])\nb = numpy.array([[1,2],[3,4],[5,6]])\nc = f(a, b)\n</code></pre>\n\n<p>Here, <code>x</code> and <code>y</code> are symbolic matrices. They don't have a value but they stand-in for some value that will be provided after the computation is compiled and executed. <code>a</code>, <code>b</code>, and <code>c</code> are concrete matrices with values. The <code>f = theano.function(...)</code> line compiles the computation and the <code>c = f(...)</code> executes that function, providing the value called <code>a</code> for <code>x</code> and providing the value called <code>b</code> for <code>y</code>; the return value, <code>c</code>, takes on the value computed by the symbolic expression <code>z</code>.</p>\n"}], "owner": {"reputation": 875, "user_id": 1815451, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/edf69fca2b5a6af10634b38e28dd3505?s=128&d=identicon&r=PG", "display_name": "Snurka Bill", "link": "https://stackoverflow.com/users/1815451/snurka-bill"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "accepted_answer_id": 31711156, "answer_count": 1, "score": 0, "last_activity_date": 1438204151, "creation_date": 1438202153, "last_edit_date": 1438202724, "question_id": 31710586, "link": "https://stackoverflow.com/questions/31710586/lazy-evaluation-of-dot-or-other-theano-function", "title": "Lazy evaluation of .dot or other theano function", "body": "<p>I am very new at python and theano so this question may be silly. </p>\n\n<p>I've read in documentation that .dot produces symbolic tensor. I am debugging some program right now and I can't see TensorVariable without any container or anything and I don't know how to get the values from it. </p>\n"}, {"tags": ["python", "python-2.7", "python-3.x", "newline"], "comments": [{"owner": {"reputation": 21161, "user_id": 293594, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/236ff5ec4ac5714b8f28542d5299ec90?s=128&d=identicon&r=PG", "display_name": "xnx", "link": "https://stackoverflow.com/users/293594/xnx"}, "edited": false, "score": 1, "creation_date": 1438202104, "post_id": 31710553, "comment_id": 51359188, "body": "You can use <code>end=&#39;&#39;</code> in your call to <code>print</code>."}, {"owner": {"reputation": 452, "user_id": 4201204, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100003178300876/picture?type=large", "display_name": "Mastan", "link": "https://stackoverflow.com/users/4201204/mastan"}, "reply_to_user": {"reputation": 21161, "user_id": 293594, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/236ff5ec4ac5714b8f28542d5299ec90?s=128&d=identicon&r=PG", "display_name": "xnx", "link": "https://stackoverflow.com/users/293594/xnx"}, "edited": false, "score": 0, "creation_date": 1438202183, "post_id": 31710553, "comment_id": 51359231, "body": "@xnx yap,it work. Thanks."}, {"owner": {"reputation": 452, "user_id": 4201204, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100003178300876/picture?type=large", "display_name": "Mastan", "link": "https://stackoverflow.com/users/4201204/mastan"}, "reply_to_user": {"reputation": 23058, "user_id": 1599111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e3147a010e5a5d4796739e9a3a47ad2?s=128&d=identicon&r=PG", "display_name": "Lukas Graf", "link": "https://stackoverflow.com/users/1599111/lukas-graf"}, "edited": false, "score": 0, "creation_date": 1438202319, "post_id": 31710553, "comment_id": 51359311, "body": "@LukasGraf, Many of the question for python 2x. I think that is for python 2x."}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1438202467, "post_id": 31710553, "comment_id": 51359410, "body": "<code>readline.rstrip()</code> will cover both 2 and 3"}, {"owner": {"reputation": 452, "user_id": 4201204, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100003178300876/picture?type=large", "display_name": "Mastan", "link": "https://stackoverflow.com/users/4201204/mastan"}, "reply_to_user": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1438202791, "post_id": 31710553, "comment_id": 51359583, "body": "@PadraicCunningham Can you write the code how i use readline.rstrip() ?  I try to use but it says     AttributeError: &#39;builtin_function_or_method&#39; object has no attribute &#39;rstrip&#39;"}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1438202848, "post_id": 31710553, "comment_id": 51359610, "body": "sorry, that was a typo <code>readline().rstrip()</code>"}], "answers": [{"tags": [], "owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "is_accepted": false, "score": 5, "last_activity_date": 1438202164, "creation_date": 1438202164, "answer_id": 31710588, "question_id": 31710553, "link": "https://stackoverflow.com/questions/31710553/how-to-avoid-new-line-in-readline-function-in-python-3x/31710588#31710588", "title": "How to avoid new line in readline() function in python 3x?", "body": "<p>Since your content already contains the newlines you want, tell the <code>print()</code> function not to add any by using the optional <code>end</code> argument:</p>\n\n<pre><code>def print_one_line(line_number,f):\n    print(line_number,f.readline(), end='')\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 269348, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "is_accepted": false, "score": 1, "last_activity_date": 1438202218, "creation_date": 1438202218, "answer_id": 31710603, "question_id": 31710553, "link": "https://stackoverflow.com/questions/31710553/how-to-avoid-new-line-in-readline-function-in-python-3x/31710603#31710603", "title": "How to avoid new line in readline() function in python 3x?", "body": "<p>Rather than skipping the newline on output, you can strip it from the input:</p>\n\n<pre><code>print(line_number, f.readline().rstrip('\\n'))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2647, "user_id": 248390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0defac4e8b7c8e21418a95762bc747d0?s=128&d=identicon&r=PG", "display_name": "bufh", "link": "https://stackoverflow.com/users/248390/bufh"}, "is_accepted": false, "score": 1, "last_activity_date": 1438202947, "creation_date": 1438202947, "answer_id": 31710822, "question_id": 31710553, "link": "https://stackoverflow.com/questions/31710553/how-to-avoid-new-line-in-readline-function-in-python-3x/31710822#31710822", "title": "How to avoid new line in readline() function in python 3x?", "body": "<p>Beside the other ways, you could also use:</p>\n\n<pre><code>import sys\nsys.stdout.write(f.readline())\n</code></pre>\n\n<p>Works with every Python version to date.</p>\n"}], "owner": {"reputation": 452, "user_id": 4201204, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100003178300876/picture?type=large", "display_name": "Mastan", "link": "https://stackoverflow.com/users/4201204/mastan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1158, "favorite_count": 0, "closed_date": 1438855547, "answer_count": 3, "score": 5, "last_activity_date": 1443621211, "creation_date": 1438201986, "last_edit_date": 1443621211, "question_id": 31710553, "link": "https://stackoverflow.com/questions/31710553/how-to-avoid-new-line-in-readline-function-in-python-3x", "closed_reason": "Duplicate", "title": "How to avoid new line in readline() function in python 3x?", "body": "<p>I am a new to python programming. I've followed the \"Learn python the hard way\" book but that is based on python 2x. </p>\n\n<pre><code>def print_one_line(line_number,f):\n    print(line_number,f.readline())\n</code></pre>\n\n<p>In this function every time it prints <strong>A line</strong> and a <strong>new line</strong>.</p>\n\n<pre><code>1 gdfgty\n\n2 yrty\n\n3 l\n</code></pre>\n\n<p>I read the documentary that if i put a <strong>, (comma)</strong> after <strong>readline()</strong>\nthen it won't print a new <strong>\\n</strong>. \nHere is the documentary: </p>\n\n<blockquote>\n  <p>Why are there empty lines between the lines in the file? The\n  readline() function returns the \\n that's in the file at the end of\n  that line. This means that print's \\n is being added to the one\n  already returned by readline() fuction. To change this behavior simply add a ,\n  (comma) at the end of print so that it doesn't print its own .</p>\n</blockquote>\n\n<p>When I run the file with <strong>python 2x</strong> then it is OK, but when I do it in <strong>python 3x</strong> then the newline is printed. How to avoid that newline in <strong>python 3x</strong>?</p>\n"}, {"tags": ["python", "format", "subprocess"], "comments": [{"owner": {"reputation": 2647, "user_id": 248390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0defac4e8b7c8e21418a95762bc747d0?s=128&d=identicon&r=PG", "display_name": "bufh", "link": "https://stackoverflow.com/users/248390/bufh"}, "edited": false, "score": 1, "creation_date": 1438202056, "post_id": 31710529, "comment_id": 51359154, "body": "Isn&#39;t the answer in <a href=\"https://docs.python.org/2/library/subprocess.html#replacing-shell-pipeline\" rel=\"nofollow noreferrer\">the documentation</a>?"}, {"owner": {"reputation": 343905, "user_id": 4279, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d92ce60d3a4cbe03598e27c2e8dee69d?s=128&d=identicon&r=PG", "display_name": "jfs", "link": "https://stackoverflow.com/users/4279/jfs"}, "edited": false, "score": 0, "creation_date": 1438277420, "post_id": 31710529, "comment_id": 51396344, "body": "related: <a href=\"http://stackoverflow.com/q/295459\">How do I use subprocess.Popen to connect multiple processes by pipes?</a>"}, {"owner": {"reputation": 343905, "user_id": 4279, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d92ce60d3a4cbe03598e27c2e8dee69d?s=128&d=identicon&r=PG", "display_name": "jfs", "link": "https://stackoverflow.com/users/4279/jfs"}, "edited": false, "score": 1, "creation_date": 1438277474, "post_id": 31710529, "comment_id": 51396383, "body": "you could use <a href=\"https://pypi.python.org/pypi/psutil\" rel=\"nofollow noreferrer\"><code>psutil</code> module</a> instead of running the <code>ps</code> external process."}], "answers": [{"comments": [{"owner": {"reputation": 343905, "user_id": 4279, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d92ce60d3a4cbe03598e27c2e8dee69d?s=128&d=identicon&r=PG", "display_name": "jfs", "link": "https://stackoverflow.com/users/4279/jfs"}, "edited": false, "score": 0, "creation_date": 1438277727, "post_id": 31710577, "comment_id": 51396517, "body": "<code>stderr=STDOUT</code> does not correspond to the shell command. It might be simpler to start <code>head</code> process first with <code>stdin=PIPE</code> and pass this pipe to <code>sort</code> process stdout (<code>stdout=head.stdin</code>). It avoids <code>.close()</code> calls. See <a href=\"http://stackoverflow.com/a/9164238/4279\">this answer</a>"}], "tags": [], "owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "is_accepted": true, "score": 3, "last_activity_date": 1438202772, "last_edit_date": 1438202772, "creation_date": 1438202101, "answer_id": 31710577, "question_id": 31710529, "link": "https://stackoverflow.com/questions/31710529/error-is-being-raised-when-executing-a-sub-process-using/31710577#31710577", "title": "Error is being raised when executing a sub-process using &quot; | &quot;", "body": "<p>You would need to use <code>shell=True</code> to use the pipe character, if you are going to go down that route then using check_output would be the simplest approach to get the output:</p>\n\n<pre><code>from subprocess import check_output\n\nout = check_output(\"ps -eo pcpu,pid,user,args | sort -k 1 -r | head -10\",shell=True,stderr=STDOUT)\n</code></pre>\n\n<p>You can also simulate a pipe with Popen and shell=False, something like:</p>\n\n<pre><code>from subprocess import Popen, PIPE, STDOUT\nsshcmd = Popen(['ps', '-eo', \"pcpu,pid,user,args\"],\n               stdout=PIPE,\n               stderr=STDOUT)\np2 = Popen([\"sort\", \"-k\", \"1\", \"-r\"], stdin=sshcmd.stdout, stdout=PIPE)\nsshcmd.stdout.close()\np3 = Popen([\"head\", \"-10\"], stdin=p2.stdout, stdout=PIPE,stderr=STDOUT)\np2.stdout.close()\nout, err = p3.communicate()\n</code></pre>\n"}], "owner": {"reputation": 499, "user_id": 2339714, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/qgBgU.jpg?s=128&g=1", "display_name": "Bawn", "link": "https://stackoverflow.com/users/2339714/bawn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 31710577, "answer_count": 1, "score": 0, "last_activity_date": 1438202772, "creation_date": 1438201897, "last_edit_date": 1438202238, "question_id": 31710529, "link": "https://stackoverflow.com/questions/31710529/error-is-being-raised-when-executing-a-sub-process-using", "title": "Error is being raised when executing a sub-process using &quot; | &quot;", "body": "<p>I am trying to automate the process of executing a command. When I this command:</p>\n\n<pre><code>ps -eo pcpu,pid,user,args | sort -k 1 -r | head -10\n</code></pre>\n\n<p>Into a termianl I get the response:</p>\n\n<pre><code>%CPU   PID USER     COMMAND\n 5.7 25378 stackusr whttp\n 4.8 25656 stackusr tcpproxy\n</code></pre>\n\n<p>But when I execute this section of code I get an error regarding the format specifier:</p>\n\n<pre><code>  if __name__ == '__main__':\n        fullcmd = ['ps','-eo','pcpu,pid,user,args | sort -k 1 -r | head -10']\n        print fullcmd\n        sshcmd = subprocess.Popen(fullcmd,\n                    shell= False,\n                    stdout= subprocess.PIPE,\n                    stderr= subprocess.STDOUT)\n        out = sshcmd.communicate()[0].split('\\n')\n        #print 'here'\n        for lin in out:\n            print lin\n</code></pre>\n\n<p>This is the error showen:</p>\n\n<pre><code>ERROR: Unknown user-defined format specifier \"|\".\n********* simple selection *********  ********* selection by list *********\n-A all processes                      -C by command name\n-N negate selection                   -G by real group ID (supports names)\n-a all w/ tty except session leaders  -U by real user ID (supports names)\n-d all except session leaders         -g by session OR by effective group name\n-e all processes                      -p by process ID\nT  all processes on this terminal     -s processes in the sessions given\na  all w/ tty, including other users  -t by tty\ng  OBSOLETE -- DO NOT USE             -u by effective user ID (supports names)\nr  only running processes             U  processes for specified users\nx  processes w/o controlling ttys     t  by tty\n</code></pre>\n\n<p>I have tryed placing a \\ before the | but this has not effect.</p>\n"}, {"tags": ["python", "function", "object"], "comments": [{"owner": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "edited": false, "score": 1, "creation_date": 1438202046, "post_id": 31710501, "comment_id": 51359146, "body": "Vector2 is cls. Use one or the other, not both to construct from points"}, {"owner": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "edited": false, "score": 1, "creation_date": 1438202131, "post_id": 31710501, "comment_id": 51359199, "body": "Also you need double underscores for __init__ and __str__"}, {"owner": {"reputation": 8538, "user_id": 3059812, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/UaU9b.jpg?s=128&g=1", "display_name": "Morgan Thrapp", "link": "https://stackoverflow.com/users/3059812/morgan-thrapp"}, "edited": false, "score": 1, "creation_date": 1438202427, "post_id": 31710501, "comment_id": 51359380, "body": "Please consider revising the code sample you posted in this question. As it currently stands, its formatting and scope make it hard for us to help you; here is a <a href=\"http://stackoverflow.com/help/mcve\">great resource</a> to get you started on that. -1, don&#39;t take it the wrong way. A down vote is how we indicate a content problem around here; improve your formatting and code sample and I&#39;ll gladly revert it. Good luck with your code! Personally I think it&#39;d be good to work on your indentation."}], "answers": [{"tags": [], "owner": {"reputation": 35644, "user_id": 4954037, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/YOM4r.jpg?s=128&g=1", "display_name": "hiro protagonist", "link": "https://stackoverflow.com/users/4954037/hiro-protagonist"}, "is_accepted": false, "score": 0, "last_activity_date": 1438237571, "creation_date": 1438237571, "answer_id": 31716543, "question_id": 31710501, "link": "https://stackoverflow.com/questions/31710501/tuple-class-object-takes-no-values/31716543#31716543", "title": "Tuple Class object takes no values", "body": "<p>that's (probably) what you mean.</p>\n\n<pre><code>#Vector Test\nimport math\n\nclass Vector2(object):\n\n    def __init__(self, x=0.0,y=0.0):\n        self.x = x\n        self.y = y\n\n    def __str__(self):\n        return\"(%s,%s)\"%(self.x,self.y)\n\n    @classmethod\n    def from_points(cls, P1, P2):\n        return Vector2(P2.x-P1.x,P2.y-P1.y)\n\n    def get_magnitude(self):\n        return math.sqrt(self.x**2 + self.y**2)\n\nA = Vector2(15.0, 20.0)\nB = Vector2(20.0, 30.0)\nAB = Vector2.from_points(A, B)\nprint( AB )\nprint( AB.get_magnitude() )\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5154094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4472fb3972d59a422b6ad47a7538fe4?s=128&d=identicon&r=PG&f=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/5154094/steve"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1438237571, "creation_date": 1438201799, "last_edit_date": 1438204200, "question_id": 31710501, "link": "https://stackoverflow.com/questions/31710501/tuple-class-object-takes-no-values", "title": "Tuple Class object takes no values", "body": "<p>I create an instance of class Vector2 with line <code>AB = Vector2.from_points(A, B)</code></p>\n\n<p>But python errors out with <code>TypeError: object() takes no parameters</code></p>\n\n<p>on line <code>AB = Vector2.from_points(A,B)</code></p>\n\n<p>and on line <code>return Vector2(cls, P2[0]-P1[0], P2[1]-P1[1])</code></p>\n\n<p>so I figured maybe the book is wrong (I'm looking at examples in a book). I subtract the Vector2 and cls from the def from_points statement so that...</p>\n\n<p>this is how the new line reads: <code>return (P2[0]-P1[0], P2[1]-P1[1])</code></p>\n\n<p>When I do this a receive the vector value from def from_points equal too (5, 10)</p>\n\n<p>But then python errors out on:</p>\n\n<p><code>print AB.get_magnitude()</code></p>\n\n<p>with <code>AttributeError: 'tuple' object has no attribute 'get_magnitude'</code></p>\n\n<p>so without the code related to Vector2 and cls the program won't read AB as a class object but it seems that I'm not formatting it right so it won't go through.</p>\n\n<p>I have been stuck on this for days.</p>\n\n<pre><code>#Vector Test\nimport math\n\nclass Vector2(object):\n\ndef _init_(self, x=0.0,y=0.0):\n    self.x = x\n    self.y = y\n\ndef _str_(self):\n    return\"(%s,%s)\"%(self.x,self.y)\n\n@classmethod\ndef from_points(cls, P1, P2):\n    return Vector2(cls, P2[0]-P1[0],P2[1]-P1[1])\n\ndef get_magnitude(self):\n    return math.sqrt(self.x**2 + self.y**2)\n\nA = (15.0, 20.0)\nB = (20.0, 30.0)\nAB = Vector2.from_points(A, B)\nprint AB\nprint AB.get_magnitude()\n</code></pre>\n\n<p>CHANGED CODE:</p>\n\n<pre><code>#Vector Test\nimport math\n\nclass Vector2(object):\n\ndef _init_(self, x=0.0,y=0.0):\n    self.x = x\n    self.y = y\n\ndef _str_(self):\n    return\"(%s,%s)\"%(self.x,self.y)\n\n@classmethod\ndef from_points(cls, P1, P2):\n    return (P2[0]-P1[0],P2[1]-P1[1])\n\ndef get_magnitude(self):\n    return math.sqrt(self.x**2 + self.y**2)\n\nA = (15.0, 20.0)\nB = (20.0, 30.0)\nAB = Vector2.from_points(A, B)\nprint AB\nprint AB.get_magnitude()\n</code></pre>\n"}, {"tags": ["python", "list", "loops", "haskell"], "comments": [{"owner": {"reputation": 84731, "user_id": 510937, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/70b13a9ae1aae1ca1aa6ac8dab4643f2?s=128&d=identicon&r=PG", "display_name": "Bakuriu", "link": "https://stackoverflow.com/users/510937/bakuriu"}, "edited": false, "score": 2, "creation_date": 1438234084, "post_id": 31710499, "comment_id": 51368932, "body": "BTW: you probably want: <code>enumerate(s, start=1)</code> for a direct equivalent. Moreover in the <code>itertools</code> module there is a <code>[n..]</code> perfect equivalent which is <code>itertools.count(n)</code> so you could translate the code to <code>zip(count(n), s)</code>."}, {"owner": {"reputation": 1492, "user_id": 985366, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa038012681730786baa170451a1447f?s=128&d=identicon&r=PG", "display_name": "user985366", "link": "https://stackoverflow.com/users/985366/user985366"}, "reply_to_user": {"reputation": 84731, "user_id": 510937, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/70b13a9ae1aae1ca1aa6ac8dab4643f2?s=128&d=identicon&r=PG", "display_name": "Bakuriu", "link": "https://stackoverflow.com/users/510937/bakuriu"}, "edited": false, "score": 0, "creation_date": 1438261548, "post_id": 31710499, "comment_id": 51385303, "body": "For your n, wouldn&#39;t you actually put len(s) when you don&#39;t know n?"}, {"owner": {"reputation": 84731, "user_id": 510937, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/70b13a9ae1aae1ca1aa6ac8dab4643f2?s=128&d=identicon&r=PG", "display_name": "Bakuriu", "link": "https://stackoverflow.com/users/510937/bakuriu"}, "edited": false, "score": 0, "creation_date": 1438284017, "post_id": 31710499, "comment_id": 51400094, "body": "No. <code>count(n)</code> is &quot;the same&quot; as <code>[n..]</code> i.e. the infinite sequence of naturals greater or equal to <code>n</code>."}, {"owner": {"reputation": 1492, "user_id": 985366, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa038012681730786baa170451a1447f?s=128&d=identicon&r=PG", "display_name": "user985366", "link": "https://stackoverflow.com/users/985366/user985366"}, "reply_to_user": {"reputation": 84731, "user_id": 510937, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/70b13a9ae1aae1ca1aa6ac8dab4643f2?s=128&d=identicon&r=PG", "display_name": "Bakuriu", "link": "https://stackoverflow.com/users/510937/bakuriu"}, "edited": false, "score": 0, "creation_date": 1438285628, "post_id": 31710499, "comment_id": 51400971, "body": "Oh, so n in this case would be  0 or 1 depending on how I want to index   (1 according to the given Haskell code)"}], "answers": [{"comments": [{"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1438201983, "post_id": 31710520, "comment_id": 51359112, "body": "NB: This only works in Python 2, where <code>zip()</code> returns a <code>list</code>."}, {"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1438202267, "post_id": 31710520, "comment_id": 51359275, "body": "Since (in Python 3) <code>zip(range(len(s)) , s</code> is functionally identical to <code>enumerate(s)</code>, it looks like you&#39;ve arrived at <code>list(enumerate(s))</code>. :P"}], "tags": [], "owner": {"reputation": 5935, "user_id": 893324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b24d4de5ae7afebfee98aa85e8a960e?s=128&d=identicon&r=PG", "display_name": "Brien", "link": "https://stackoverflow.com/users/893324/brien"}, "is_accepted": false, "score": 1, "last_activity_date": 1438202107, "last_edit_date": 1438202107, "creation_date": 1438201870, "answer_id": 31710520, "question_id": 31710499, "link": "https://stackoverflow.com/questions/31710499/python-equivalent-of-haskells-1-to-index-a-list/31710520#31710520", "title": "Python equivalent of Haskell&#39;s [1..] (to index a list)", "body": "<p>You can use the <code>range</code> function with <code>zip</code>.</p>\n\n<p>For Python 2:</p>\n\n<pre><code>&gt;&gt;&gt; s = \"abcdefghijklmnop\"\n&gt;&gt;&gt; zip(range(16),s)\n[(0, 'a'), (1, 'b'), (2, 'c'), (3, 'd'), (4, 'e'), (5, 'f'), (6, 'g'), (7, 'h'), (8, 'i'), (9, 'j'), (10, 'k'), (11, 'l'), (12, 'm'), (13, 'n'), (14, 'o'), (15, 'p')]\n</code></pre>\n\n<p>For Python 3:</p>\n\n<pre><code>&gt;&gt;&gt; s = \"abcdefghijklmnop\"\n&gt;&gt;&gt; list(zip(range(16),s))\n[(0, 'a'), (1, 'b'), (2, 'c'), (3, 'd'), (4, 'e'), (5, 'f'), (6, 'g'), (7, 'h'), (8, 'i'), (9, 'j'), (10, 'k'), (11, 'l'), (12, 'm'), (13, 'n'), (14, 'o'), (15, 'p')]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1492, "user_id": 985366, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa038012681730786baa170451a1447f?s=128&d=identicon&r=PG", "display_name": "user985366", "link": "https://stackoverflow.com/users/985366/user985366"}, "edited": false, "score": 0, "creation_date": 1438202493, "post_id": 31710528, "comment_id": 51359427, "body": "I feel this is the far cleanest one so far, even if they all work. It also works for me on Python 2.7"}], "tags": [], "owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "is_accepted": true, "score": 23, "last_activity_date": 1438201890, "creation_date": 1438201890, "answer_id": 31710528, "question_id": 31710499, "link": "https://stackoverflow.com/questions/31710499/python-equivalent-of-haskells-1-to-index-a-list/31710528#31710528", "title": "Python equivalent of Haskell&#39;s [1..] (to index a list)", "body": "<p>Just do <code>list(enumerate(s))</code>. This iterates over the <code>enumerate</code> object and converts it to a <code>list</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "is_accepted": false, "score": 5, "last_activity_date": 1438203390, "last_edit_date": 1438203390, "creation_date": 1438201908, "answer_id": 31710532, "question_id": 31710499, "link": "https://stackoverflow.com/questions/31710499/python-equivalent-of-haskells-1-to-index-a-list/31710532#31710532", "title": "Python equivalent of Haskell&#39;s [1..] (to index a list)", "body": "<p>You can simplify it with a list comprehension:</p>\n\n<pre><code>&gt;&gt;&gt; [i for i in enumerate(s)]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 280325, "user_id": 1560062, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7c5027e3046fed86e8e34b4fa0e6246c?s=128&d=identicon&r=PG", "display_name": "zero323", "link": "https://stackoverflow.com/users/1560062/zero323"}, "is_accepted": false, "score": 2, "last_activity_date": 1438202344, "creation_date": 1438202344, "answer_id": 31710639, "question_id": 31710499, "link": "https://stackoverflow.com/questions/31710499/python-equivalent-of-haskells-1-to-index-a-list/31710639#31710639", "title": "Python equivalent of Haskell&#39;s [1..] (to index a list)", "body": "<p>Using <code>enumerate</code> is definitely the way to go, but here is a little bit more functional solution with <a href=\"https://github.com/pytoolz/toolz\" rel=\"nofollow\">toolz</a>:</p>\n\n<pre><code>from toolz.itertoolz import iterate, zip\nzip(iterate(lambda x: x + 1, 0), \"abcdefghijklmnop\")\n</code></pre>\n"}], "owner": {"reputation": 1492, "user_id": 985366, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa038012681730786baa170451a1447f?s=128&d=identicon&r=PG", "display_name": "user985366", "link": "https://stackoverflow.com/users/985366/user985366"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1001, "favorite_count": 1, "accepted_answer_id": 31710528, "answer_count": 4, "score": 8, "last_activity_date": 1438203390, "creation_date": 1438201789, "question_id": 31710499, "link": "https://stackoverflow.com/questions/31710499/python-equivalent-of-haskells-1-to-index-a-list", "title": "Python equivalent of Haskell&#39;s [1..] (to index a list)", "body": "<p>I have a list of elements in python. I don't know the number of elements in the list. I would like to add indexes to the list.</p>\n\n<p>In Haskell, I could do the following</p>\n\n<pre><code>zip [1..] \"abcdefghijklmnop\"\n[(1,'a'),(2,'b'),(3,'c'),(4,'d'),(5,'e'),(6,'f'),(7,'g'),(8,'h'),(9,'i'),(10,'j'),(11,'k'),(12,'l'),(13,'m'),(14,'n'),(15,'o'),(16,'p')]\n</code></pre>\n\n<p>Now imagine that the string was of unknown size. This would still work in Haskell, and the integer list gives as many integers as necessary until the string runs out. </p>\n\n<p>How would one do the equivalent in Python?</p>\n\n<p>I have tried this:</p>\n\n<pre><code>s = \"abcdefghijklmnop\"\nindexedlist = []\nfor i,c in enumerate(s):\n    indexedlist.append((i,c))\n\n&gt;&gt;&gt; indexedlist\n[(0, 'a'), (1, 'b'), (2, 'c'), (3, 'd'), (4, 'e'), (5, 'f'), (6, 'g'), (7, 'h'), (8, 'i'), (9, 'j'), (10, 'k'), (11, 'l'), (12, 'm'), (13, 'n'), (14, 'o'), (15, 'p')]\n</code></pre>\n\n<p>And it works, but I'm wondering if there is a shorter/cleaner way, since it is 4 lines of code and feels much.</p>\n"}, {"tags": ["python", "rest", "python-3.x", "tornado"], "answers": [{"comments": [{"owner": {"reputation": 18850, "user_id": 999530, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/YGip7.png?s=128&g=1", "display_name": "Travis Griggs", "link": "https://stackoverflow.com/users/999530/travis-griggs"}, "edited": false, "score": 0, "creation_date": 1438217376, "post_id": 31710910, "comment_id": 51364678, "body": "Worked like a charm! Only thing I had to tweak, was adding a <code>body</code> parameter. That&#39;s apparently required when <code>method = &#39;POST&#39;</code>. Maybe update example?"}], "tags": [], "owner": {"reputation": 77965, "user_id": 2073595, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ugcXJ.jpg?s=128&g=1", "display_name": "dano", "link": "https://stackoverflow.com/users/2073595/dano"}, "is_accepted": true, "score": 2, "last_activity_date": 1438203224, "last_edit_date": 1495541641, "creation_date": 1438203224, "answer_id": 31710910, "question_id": 31710498, "link": "https://stackoverflow.com/questions/31710498/tornado-handler-that-forks-additional-work-in-python/31710910#31710910", "title": "Tornado handler that forks additional work in python", "body": "<p><code>tornado</code> has a built-in HTTP client that you can use in place of <code>requests</code>: <a href=\"http://www.tornadoweb.org/en/stable/httpclient.html\" rel=\"nofollow noreferrer\"><code>tornado.httpclient</code></a></p>\n\n<pre><code>from tornado.httpclient import AsyncHTTPClient\n\ndef handle_request(response):\n    if response.error:\n        print \"Error:\", response.error\n    else:\n        print response.body\n\nhttp_client = AsyncHTTPClient()\nhttp_client.fetch(\"http://other.service/foo/bar\", method='POST', callback=handle_request)\n</code></pre>\n\n<p>It can also be used as a coroutine, if you want:</p>\n\n<pre><code>@coroutine\ndef some_method(self):\n    http_client = AsyncHTTPClient()\n    repsonse = yield http_client.fetch(\"http://other.service/foo/bar\", method='POST')\n   if response.error:\n       print \"Error:\", response.error\n   else:\n       print response.body\n</code></pre>\n\n<p>If you're running arbitrary blocking Python code (meaning something that you can't easily find a non-blocking, tornado-compatible replacement for), you should probably consult <a href=\"https://stackoverflow.com/q/15375336/2073595\">this question</a>, about using multiprocessing with <code>tornado</code>. The short answer is that on Python 3.x you'd probably want to use <code>concurrent.futures.ProcessPoolExecutor</code> to run the blocking code, since <code>concurrent.futures.Future</code> will integrate properly with the <code>tornado</code> event loop when you <code>yield</code> from one.</p>\n"}], "owner": {"reputation": 18850, "user_id": 999530, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/YGip7.png?s=128&g=1", "display_name": "Travis Griggs", "link": "https://stackoverflow.com/users/999530/travis-griggs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 161, "favorite_count": 0, "accepted_answer_id": 31710910, "answer_count": 1, "score": 1, "last_activity_date": 1438203224, "creation_date": 1438201788, "question_id": 31710498, "link": "https://stackoverflow.com/questions/31710498/tornado-handler-that-forks-additional-work-in-python", "title": "Tornado handler that forks additional work in python", "body": "<p>I have a simple API exposed via tornado. Previously, one of the queries caused an <code>rsync</code> to run. Through trial, error, exploration, I found that I could fork that off so that it didn't block a timely response:</p>\n\n<pre><code>tornado.process.Subprocess(['rsync', '-vazh', ... ])\n</code></pre>\n\n<p>I'm evolving this code now so that it no longer runs an external <code>rsync</code>, but instead pokes another service. I'm using Requests to do so:</p>\n\n<pre><code>requests.post('http://other.service/foo/bar)\n</code></pre>\n\n<p>The network behind this service has really high latencies (same for the rysnc process), so I'd still like that to be forked off so that I don't put off a timely response. The <code>tornado.process.Subprocess</code> seems well suited for calling non python shell programs to get work done. Is there an equivalent for doing so for python code like above?</p>\n"}, {"tags": ["python", "sqlite"], "comments": [{"owner": {"reputation": 17954, "user_id": 1248008, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Z3JaL.png?s=128&g=1", "display_name": "Jonas Sch&#228;fer", "link": "https://stackoverflow.com/users/1248008/jonas-sch%c3%a4fer"}, "edited": false, "score": 2, "creation_date": 1438201798, "post_id": 31710470, "comment_id": 51359025, "body": "Welcome on SO! You might first want to check out the formatting of your question and fix it, by hitting the <code>edit</code> button right below your question text. While you are at it, you might want to add a bit of text which explains the issue you are having :) [and what you have tried to solve it]"}, {"owner": {"reputation": 142796, "user_id": 42346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZikEw.jpg?s=128&g=1", "display_name": "mechanical_meat", "link": "https://stackoverflow.com/users/42346/mechanical-meat"}, "edited": false, "score": 0, "creation_date": 1438202064, "post_id": 31710470, "comment_id": 51359160, "body": "Well, you do not want to create the table each time you&#39;re doing an <code>INSERT</code>. So you can specify to only create the table if it&#39;s not already there using: <code>CREATE TABLE IF NOT EXISTS ...</code>"}, {"owner": {"reputation": 19, "user_id": 5170996, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/059f6fc67d6d62c44962199fb3dc3a7b?s=128&d=identicon&r=PG&f=1", "display_name": "Blackreaper", "link": "https://stackoverflow.com/users/5170996/blackreaper"}, "edited": false, "score": 0, "creation_date": 1438205146, "post_id": 31710470, "comment_id": 51360883, "body": "^I think this would work ive seen it around ill give it a shot thanks"}], "answers": [{"tags": [], "owner": {"reputation": 19, "user_id": 5170996, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/059f6fc67d6d62c44962199fb3dc3a7b?s=128&d=identicon&r=PG&f=1", "display_name": "Blackreaper", "link": "https://stackoverflow.com/users/5170996/blackreaper"}, "is_accepted": false, "score": 0, "last_activity_date": 1438545436, "creation_date": 1438545436, "answer_id": 31776000, "question_id": 31710470, "link": "https://stackoverflow.com/questions/31710470/python-getting-sqlite3-operationalerror-table-percipitation-already-exists-my/31776000#31776000", "title": "Python getting &#39;sqlite3.OperationalError: table percipitation already exists&#39; my code so far", "body": "<p>def create_precipitation(db, data_file):</p>\n\n<pre><code>conn = sqlite3.connect(db)\ncur = conn.cursor()\ncur.execute('drop table if exists precipitation')\ncur.execute('create table precipitation' +\n            '(city text, snow real, ' +\n            'Total integer, Days integer)')\nfor line in data_file:\n    values = line.strip().split(',')\n    city = values[0]\n    snow = float(values[1])\n    total = int(values[2])\n    days = int(values[3])\ncur.execute(\"insert into precipitation values (?,?,?,?)\",\n            (city, snow, total, days))\nconn.commit()\ncur.close\nconn.close()\n</code></pre>\n\n<p>I've done this so far and its getting closer to working I still am not done yet tho and don't know what to do next</p>\n"}], "owner": {"reputation": 19, "user_id": 5170996, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/059f6fc67d6d62c44962199fb3dc3a7b?s=128&d=identicon&r=PG&f=1", "display_name": "Blackreaper", "link": "https://stackoverflow.com/users/5170996/blackreaper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 4016, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1438545436, "creation_date": 1438201672, "last_edit_date": 1438202429, "question_id": 31710470, "link": "https://stackoverflow.com/questions/31710470/python-getting-sqlite3-operationalerror-table-percipitation-already-exists-my", "title": "Python getting &#39;sqlite3.OperationalError: table percipitation already exists&#39; my code so far", "body": "<pre><code>def create_precipitation(db, data_file):\n    \"\"\"(str, reader) -&gt; NoneType\n    Populate the database db with the contents of data_file.\n    Create a table called Precipitation, with four columns: City\n    (text), Snow (real), Total (integer), Days (integer).\n\n    Parameters:\n\n    db: name/path to a database\n\n    data_file: contains one city, snowfall amount, total\n    precipitation amount, and number of days per line, separated by\n    comma.\n    \"\"\"  \n    conn = sqlite3.connect(db)\n    cur = conn.cursor()\n    cur.execute('create table precipitation' +\n                '(city text, snow real, ' +\n                'Total integer, Days integer)')\n    for line in data_file:\n        values = line.strip().split(',')\n        city = values[0]\n        snow = float(values [1])\n        total = int(values[2])\n        days = int(values[3])\n        cur.exectue(\"insert into percipitation values (?,?,?,?)\",\n                    (city, snow, total, days))\n    conn.commit()\n    cur.close\n    conn.close()\n</code></pre>\n\n<p>\"dont understand how the table already exists\"\n\"code error is just confusing\"\n\"when i run the code it looks like this 'create_precipitation(\"weather.db\", open(\"precipitation.txt\"))'</p>\n"}, {"tags": ["python", "ftp", "runtime-error", "download"], "comments": [{"owner": {"reputation": 7117, "user_id": 235310, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/3fa28a7956df536d6c50cfd803ac17a0?s=128&d=identicon&r=PG", "display_name": "ThinkCode", "link": "https://stackoverflow.com/users/235310/thinkcode"}, "edited": false, "score": 0, "creation_date": 1438201961, "post_id": 31710459, "comment_id": 51359099, "body": "You want to download all the zip files available or specific zip files? I see multiple directories in the root."}, {"owner": {"reputation": 5873, "user_id": 1493192, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/32662661bf4aa1d1db842f95d6b84729?s=128&d=identicon&r=PG&f=1", "display_name": "Gianni Spear", "link": "https://stackoverflow.com/users/1493192/gianni-spear"}, "reply_to_user": {"reputation": 7117, "user_id": 235310, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/3fa28a7956df536d6c50cfd803ac17a0?s=128&d=identicon&r=PG", "display_name": "ThinkCode", "link": "https://stackoverflow.com/users/235310/thinkcode"}, "edited": false, "score": 0, "creation_date": 1438202172, "post_id": 31710459, "comment_id": 51359221, "body": "i need to download all zip files available"}, {"owner": {"reputation": 7117, "user_id": 235310, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/3fa28a7956df536d6c50cfd803ac17a0?s=128&d=identicon&r=PG", "display_name": "ThinkCode", "link": "https://stackoverflow.com/users/235310/thinkcode"}, "edited": false, "score": 0, "creation_date": 1438202346, "post_id": 31710459, "comment_id": 51359328, "body": "All zip files in each directory 001, 002, 003,...?"}, {"owner": {"reputation": 5873, "user_id": 1493192, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/32662661bf4aa1d1db842f95d6b84729?s=128&d=identicon&r=PG&f=1", "display_name": "Gianni Spear", "link": "https://stackoverflow.com/users/1493192/gianni-spear"}, "reply_to_user": {"reputation": 7117, "user_id": 235310, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/3fa28a7956df536d6c50cfd803ac17a0?s=128&d=identicon&r=PG", "display_name": "ThinkCode", "link": "https://stackoverflow.com/users/235310/thinkcode"}, "edited": false, "score": 0, "creation_date": 1438202412, "post_id": 31710459, "comment_id": 51359369, "body": "yes. I know they are a lot of files (e.g. all DEM models for all Canada. The second largest country after Russia)"}, {"owner": {"reputation": 7117, "user_id": 235310, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/3fa28a7956df536d6c50cfd803ac17a0?s=128&d=identicon&r=PG", "display_name": "ThinkCode", "link": "https://stackoverflow.com/users/235310/thinkcode"}, "edited": false, "score": 0, "creation_date": 1438202459, "post_id": 31710459, "comment_id": 51359405, "body": "Ok, I am getting the same error. Did you read this : <a href=\"http://stackoverflow.com/questions/5230966/python-ftp-download-all-files-in-directory\" title=\"python ftp download all files in directory\">stackoverflow.com/questions/5230966/&hellip;</a> I would try to make it work for your case. Once it works, you can traverse through each directory."}, {"owner": {"reputation": 5873, "user_id": 1493192, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/32662661bf4aa1d1db842f95d6b84729?s=128&d=identicon&r=PG&f=1", "display_name": "Gianni Spear", "link": "https://stackoverflow.com/users/1493192/gianni-spear"}, "reply_to_user": {"reputation": 7117, "user_id": 235310, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/3fa28a7956df536d6c50cfd803ac17a0?s=128&d=identicon&r=PG", "display_name": "ThinkCode", "link": "https://stackoverflow.com/users/235310/thinkcode"}, "edited": false, "score": 0, "creation_date": 1438202745, "post_id": 31710459, "comment_id": 51359564, "body": "using filenames = ftp.nlst() i get always an error message"}, {"owner": {"reputation": 7117, "user_id": 235310, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/3fa28a7956df536d6c50cfd803ac17a0?s=128&d=identicon&r=PG", "display_name": "ThinkCode", "link": "https://stackoverflow.com/users/235310/thinkcode"}, "reply_to_user": {"reputation": 5873, "user_id": 1493192, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/32662661bf4aa1d1db842f95d6b84729?s=128&d=identicon&r=PG&f=1", "display_name": "Gianni Spear", "link": "https://stackoverflow.com/users/1493192/gianni-spear"}, "edited": false, "score": 0, "creation_date": 1438203380, "post_id": 31710459, "comment_id": 51359920, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/84619/discussion-between-thinkcode-and-gianni-spear\">continue this discussion in chat</a>."}], "answers": [{"tags": [], "owner": {"reputation": 4093, "user_id": 4582273, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b94fcc64a380a38b013479fbbcfffa9b?s=128&d=identicon&r=PG", "display_name": "lemonhead", "link": "https://stackoverflow.com/users/4582273/lemonhead"}, "is_accepted": false, "score": 3, "last_activity_date": 1438210538, "last_edit_date": 1438210538, "creation_date": 1438210043, "answer_id": 31712454, "question_id": 31710459, "link": "https://stackoverflow.com/questions/31710459/python-download-zip-files-from-a-public-ftp-server/31712454#31712454", "title": "Python download zip files from a public FTP server", "body": "<p>I was able to successfully download the zip files with your given url with this:</p>\n\n<pre><code># connect to ftp\nurl = urlparse.urlparse(\"http://ftp2.cits.rncan.gc.ca/pub/geobase/official/cded/50k_dem/\")\nftp = ftplib.FTP(url.netloc)\nftp.login()\nftp.cwd(ftp_dirname)\n\nwith open(filename, 'w') as fobj:\n    ftp.retrbinary('RETR %s' % basename, fobj.write)\n</code></pre>\n\n<p>You can avoid the hardcoded dir/filenames by walking through the ftp directories similar to how you might walk through a local directory with some creative usage of <a href=\"https://docs.python.org/2/library/ftplib.html#ftplib.FTP.dir\" rel=\"nofollow\"><code>ftplib.FTP.dir()</code></a></p>\n\n<p>Full code below:</p>\n\n<pre><code>url = 'http://ftp2.cits.rncan.gc.ca/pub/geobase/official/cded/50k_dem/'\nurl = urlparse.urlparse(url)\n\nlocal_root = os.path.expanduser(\"~/ftp_download\") # change this to wherever you want to download to\n\ndef download(ftp, ftp_path, filename, check_cwd=True):\n    \"\"\"\n    Using the given ftp connection, download from ftp_path to \n    filename. \n\n    If check_cwd is False, assume the ftp connection is already \n    in the correct current working directory (cwd)\n    \"\"\"\n    basename = posixpath.basename(ftp_path)\n    dirname = os.path.dirname(filename)\n    if not os.path.exists(dirname):\n        os.makedirs(dirname)\n    if check_cwd:\n        ftp_dirname = posixpath.dirname(ftp_path)\n        if ftp_dirname != ftp.pwd():\n            ftp.cwd(ftp_dirname)\n\n    with open(filename, 'w') as fobj:\n        ftp.retrbinary('RETR %s' % basename, fobj.write)\n\ndef ftp_dir(ftp):\n    \"\"\"\n    Given a valid ftp connection, get a list of 2-tuples of the\n    files in the ftp current working directory, where the first\n    element is whether the file is a directory and the second \n    element is the filename.\n    \"\"\"\n    # use a callback to grab the ftp.dir() output in a list\n    dir_listing = []\n    ftp.dir(lambda x: dir_listing.append(x))\n    return [(line[0].upper() == 'D', line.rsplit()[-1]) for line in dir_listing]\n\n# connect to ftp\nftp = ftplib.FTP(url.netloc)\nftp.login()\n\n# recursively walk through the directory and download each file, depth first\nstack = [url.path]\nwhile stack:\n    path = stack.pop()\n    ftp.cwd(path)\n\n    # add all directories to the queue\n    children = ftp_dir(ftp)\n    dirs = [posixpath.join(path, child[1]) for child in children if child[0]]\n    files = [posixpath.join(path, child[1]) for child in children if not child[0]] \n    stack.extend(dirs[::-1]) # add dirs reversed so they are popped out in order\n\n    # download all files in the directory\n    for filepath in files:\n        download(ftp, filepath, os.path.join(local_root, filepath.split(url.path,1)[-1]), \n                                             check_cwd=False)\n\n# logout\nftp.quit()\n</code></pre>\n\n<p>You can condense this further through usage of one of the python ftp wrapper libraries such as <a href=\"https://pypi.python.org/pypi/ftptool\" rel=\"nofollow\">ftptool</a> or <a href=\"http://ftputil.sschwarzer.net/trac\" rel=\"nofollow\">ftputil</a></p>\n"}], "owner": {"reputation": 5873, "user_id": 1493192, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/32662661bf4aa1d1db842f95d6b84729?s=128&d=identicon&r=PG&f=1", "display_name": "Gianni Spear", "link": "https://stackoverflow.com/users/1493192/gianni-spear"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5585, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1438210538, "creation_date": 1438201642, "question_id": 31710459, "link": "https://stackoverflow.com/questions/31710459/python-download-zip-files-from-a-public-ftp-server", "title": "Python download zip files from a public FTP server", "body": "<p>I need to download several (Digital Earth Model) zip files in a folder \"C:\\DEMDownload\" on my PC (windows OS) from the public geodata base of <a href=\"http://ftp2.cits.rncan.gc.ca/pub/geobase/official/cded/50k_dem/\" rel=\"nofollow\">Canada Government</a>.  </p>\n\n<p>when i run my code at the line <code>ftp.retrbinary('RETR %s' %file, open(local_file, 'wb').write)</code> i get the following error message</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"&lt;input&gt;\", line 1, in &lt;module&gt;\n  File \"C:\\Python27\\lib\\ftplib.py\", line 414, in retrbinary\n    conn = self.transfercmd(cmd, rest)\n  File \"C:\\Python27\\lib\\ftplib.py\", line 376, in transfercmd\n    return self.ntransfercmd(cmd, rest)[0]\n  File \"C:\\Python27\\lib\\ftplib.py\", line 339, in ntransfercmd\n    resp = self.sendcmd(cmd)\n  File \"C:\\Python27\\lib\\ftplib.py\", line 249, in sendcmd\n    return self.getresp()\n  File \"C:\\Python27\\lib\\ftplib.py\", line 224, in getresp\n    raise error_perm, resp\nerror_perm: 550 Failed to open file.\n</code></pre>\n\n<p>Second. Is It possible to avoid to write available_days list and create a list of all zip files to download</p>\n\n<pre><code>import os, ftplib\ndestdir='C:\\DEMDownload'\nftp = ftplib.FTP('ftp2.cits.rncan.gc.ca')\nftp.login('anonymous', '')\navailable_days= ['001k11.zip',\n    '001k12.zip',\n    '001k13.zip',\n    '001k14.zip',\n    '001k15.zip',\n    '001l13.zip',\n    '001l14.zip',\n    '001l16.zip',\n    '001m01.zip',\n    '001m02.zip',\n    '001m03.zip',\n    '001m04.zip',\n    '001m05.zip',\n    '001m06.zip',\n    '001m07.zip',\n    '001m08.zip',\n    '001m09.zip',\n    '001m10.zip',\n    '001m11.zip',\n    '001m12.zip',\n    '001m13.zip',\n    '001m14.zip',\n    '001m15.zip',\n    '001m16.zip',\n    '001n02.zip',\n    '001n03.zip',\n    '001n04.zip',\n    '001n05.zip',\n    '001n06.zip',\n    '001n07.zip',\n    '001n10.zip',\n    '001n11.zip',\n    '001n12.zip',\n    '001n13.zip',\n    '001n14.zip',\n    '001n15.zip']\n\n  hdfs = list()\n  for day in available_days :\n      file = available_days[available_days.index(day)]\n      print 'file=', file\n      local_file = os.path.join(destdir, file)\n      ftp.retrbinary('RETR %s' %file, open(local_file, 'wb').write)\n      hdfs.append(os.path.abspath(local_file))\n      ftp.cwd('..')\n  ftp.quit()\n</code></pre>\n"}, {"tags": ["python", "list", "pandas", "dataframe", "strftime"], "comments": [{"owner": {"reputation": 25595, "user_id": 202229, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6cc1d82c11563b440c57280ad587ee47?s=128&d=identicon&r=PG", "display_name": "smci", "link": "https://stackoverflow.com/users/202229/smci"}, "edited": false, "score": 0, "creation_date": 1593381593, "post_id": 31710454, "comment_id": 110753952, "body": "But do you really want a <i>list</i> of datetimes? I suspect you want a pandas DatetimeIndex, or Series, esp. if it&#39;s for slicing your index with <code>.loc[]</code> When you say <i>&quot;in order to use them to plot&quot;</i>, I suspect you want the actual datetimes to make the slice with <code>.loc[]</code>, not just the string labels for the plot&#39;s time-axis."}], "answers": [{"tags": [], "owner": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "is_accepted": false, "score": 13, "last_activity_date": 1544882088, "last_edit_date": 1544882088, "creation_date": 1438202481, "answer_id": 31710680, "question_id": 31710454, "link": "https://stackoverflow.com/questions/31710454/making-a-list-of-months-and-years-from-datetimeindex-in-pandas/31710680#31710680", "title": "Making a list of months and years from DatetimeIndex in Pandas", "body": "<h3>Original answer</h3>\n\n<p>The following should work: convert your datetimeindex to a <a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DatetimeIndex.to_series.html#pandas.DatetimeIndex.to_series\" rel=\"noreferrer\">series</a>, so you can call <code>apply</code> and use <a href=\"https://docs.python.org/2/library/datetime.html#strftime-and-strptime-behavior\" rel=\"noreferrer\"><code>strftime</code></a> to return an array of strings:</p>\n\n<pre><code>In [27]:\nimport datetime as dt\nimport pandas as pd\ndf = pd.DataFrame(index=pd.date_range(start = dt.datetime(2014,1,1), end = dt.datetime.now(), freq='M'))\ndf.index.to_series().apply(lambda x: dt.datetime.strftime(x, '%b %Y'))\n\nOut[27]:\n2014-01-31    Jan 2014\n2014-02-28    Feb 2014\n2014-03-31    Mar 2014\n2014-04-30    Apr 2014\n2014-05-31    May 2014\n2014-06-30    Jun 2014\n2014-07-31    Jul 2014\n2014-08-31    Aug 2014\n2014-09-30    Sep 2014\n2014-10-31    Oct 2014\n2014-11-30    Nov 2014\n2014-12-31    Dec 2014\n2015-01-31    Jan 2015\n2015-02-28    Feb 2015\n2015-03-31    Mar 2015\n2015-04-30    Apr 2015\n2015-05-31    May 2015\n2015-06-30    Jun 2015\nFreq: M, dtype: object\n</code></pre>\n\n<p>If you want a list then just call <code>tolist()</code>:</p>\n\n<pre><code>df.index.to_series().apply(lambda x: dt.datetime.strftime(x, '%b %Y')).tolist()\n</code></pre>\n\n<hr>\n\n<h3>Updated answer</h3>\n\n<p>Actually, looking at this question 2 years later, I realise the above is completely unnecessary. You can just do:</p>\n\n<pre><code>In [10]:\ndf.index.strftime('%Y-%b')\n\nOut[10]:\narray(['2014-Jan', '2014-Feb', '2014-Mar', '2014-Apr', '2014-May',\n       '2014-Jun', '2014-Jul', '2014-Aug', '2014-Sep', '2014-Oct',\n       '2014-Nov', '2014-Dec', '2015-Jan', '2015-Feb', '2015-Mar',\n       '2015-Apr', '2015-May', '2015-Jun', '2015-Jul', '2015-Aug',\n       '2015-Sep', '2015-Oct', '2015-Nov', '2015-Dec', '2016-Jan',\n       '2016-Feb', '2016-Mar', '2016-Apr', '2016-May', '2016-Jun',\n       '2016-Jul', '2016-Aug', '2016-Sep', '2016-Oct', '2016-Nov',\n       '2016-Dec', '2017-Jan', '2017-Feb', '2017-Mar', '2017-Apr',\n       '2017-May', '2017-Jun', '2017-Jul'], \n      dtype='&lt;U8')\n</code></pre>\n\n<p><code>datetimeindex</code> support <code>.dt</code> accessors directly without converting to a <code>Series</code></p>\n"}, {"tags": [], "owner": {"reputation": 25595, "user_id": 202229, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6cc1d82c11563b440c57280ad587ee47?s=128&d=identicon&r=PG", "display_name": "smci", "link": "https://stackoverflow.com/users/202229/smci"}, "is_accepted": false, "score": 0, "last_activity_date": 1593381692, "last_edit_date": 1593381692, "creation_date": 1593380580, "answer_id": 62628529, "question_id": 31710454, "link": "https://stackoverflow.com/questions/31710454/making-a-list-of-months-and-years-from-datetimeindex-in-pandas/62628529#62628529", "title": "Making a list of months and years from DatetimeIndex in Pandas", "body": "<p>You can directly do this as of pandas 1.0.x (2020). You can generate arbitrary <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.date_range.html\" rel=\"nofollow noreferrer\"><code>pd.date_range</code></a> with arbitrary frequency, then <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DatetimeIndex.strftime.html\" rel=\"nofollow noreferrer\"><code>strftime()</code></a> it into arbitrary format. All in one line:</p>\n<pre><code>&gt;&gt;&gt; pd.date_range(start='7/2019', end='6/2020', freq='M').strftime('%Y-%b')\nIndex(['2019-Jul', '2019-Aug', '2019-Sep', '2019-Oct', '2019-Nov', '2019-Dec',\n       '2020-Jan', '2020-Feb', '2020-Mar', '2020-Apr', '2020-May'],\n      dtype='object')\n</code></pre>\n"}], "owner": {"reputation": 1695, "user_id": 4945793, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/b2850e14438ec7cc64635c0c017d8e1d?s=128&d=identicon&r=PG&f=1", "display_name": "jenryb", "link": "https://stackoverflow.com/users/4945793/jenryb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 14207, "favorite_count": 5, "answer_count": 2, "score": 8, "last_activity_date": 1593381692, "creation_date": 1438201629, "last_edit_date": 1544882019, "question_id": 31710454, "link": "https://stackoverflow.com/questions/31710454/making-a-list-of-months-and-years-from-datetimeindex-in-pandas", "title": "Making a list of months and years from DatetimeIndex in Pandas", "body": "<p>I have a dataframe of information. I set the index to be the received date and time. Now I want a list </p>\n\n<p>I set the df index doing this: </p>\n\n<pre><code>df.index = pd.to_datetime(df.index, format='%m/%d/%Y %H:%M')\n</code></pre>\n\n<p>which gives me this:</p>\n\n<pre><code>print df.index\n&lt;class 'pandas.tseries.index.DatetimeIndex'&gt;\n[2014-07-28 09:42:08, ..., 2015-07-28 09:06:12]\nLength: 15177, Freq: None, Timezone: None\n</code></pre>\n\n<p>I want a list of the month and years in order to use them to plot, like so: <code>[\"Jan 2015\", \"Feb 2015\", \"Mar 2015\", \"Apr 2015\", \"May 2015\", \"June 2015\", \"Jul 2015\", \"Aug 2014\", \"Sep 2014\", \"Oct 2014\", \"Nov 2014\", \"Dec 2014\"]</code></p>\n\n<p>How can I do this? I've looked into something like this: </p>\n\n<pre><code>df = [datetime.datetime.strftime(n,'%b-%Y') for n in pd.DataFrame(df).resample('M').index] \n</code></pre>\n\n<p>But this gives me the error <code>DataError: No numeric types to aggregate</code>.</p>\n"}, {"tags": ["python", "postgresql", "casting", "tuples", "psycopg2"], "comments": [{"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 2, "creation_date": 1438202039, "post_id": 31710419, "comment_id": 51359141, "body": "you mean <code>measurement_id</code> is <i>not</i> an int? Why not?"}, {"owner": {"reputation": 434877, "user_id": 330315, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4b152262d9ba55197f609625358ff7e0?s=128&d=identicon&r=PG", "display_name": "a_horse_with_no_name", "link": "https://stackoverflow.com/users/330315/a-horse-with-no-name"}, "edited": false, "score": 1, "creation_date": 1438205606, "post_id": 31710419, "comment_id": 51361066, "body": "Edit your question and add the <code>create table</code> statement for <code>measurements</code> and ideally some sample data ( as <code>insert</code> statements)  that reproduce this behaviour. <code>cast(.. as signed)</code> is not valid for Postgres, because <code>signed</code> is not a valid data type in Postgres"}, {"owner": {"reputation": 257374, "user_id": 398670, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/85f50c23bb5e9dfb061af5032bfe8e65?s=128&d=identicon&r=PG", "display_name": "Craig Ringer", "link": "https://stackoverflow.com/users/398670/craig-ringer"}, "edited": false, "score": 1, "creation_date": 1438220509, "post_id": 31710419, "comment_id": 51365425, "body": "It would help if you showed us what <code>measurement</code> actually is."}, {"owner": {"reputation": 17562, "user_id": 568635, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/25f0758867b3f251cfdf101b9611b9b5?s=128&d=identicon&r=PG", "display_name": "Eelke", "link": "https://stackoverflow.com/users/568635/eelke"}, "edited": false, "score": 0, "creation_date": 1438233739, "post_id": 31710419, "comment_id": 51368806, "body": "Both the insert and select won&#39;t execute. The insert tries to put data in a non existing column and the select uses the type SIGNED which does not exists in postgresql. Also I do not see the reason for the cast. measurement_id is declared as a serial which is an integer with a default value from a sequence and integers are signed."}, {"owner": {"reputation": 17562, "user_id": 568635, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/25f0758867b3f251cfdf101b9611b9b5?s=128&d=identicon&r=PG", "display_name": "Eelke", "link": "https://stackoverflow.com/users/568635/eelke"}, "edited": false, "score": 1, "creation_date": 1438234081, "post_id": 31710419, "comment_id": 51368931, "body": "Ok, can you also fix the SELECT so it will execute and show the problem?"}, {"owner": {"reputation": 17562, "user_id": 568635, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/25f0758867b3f251cfdf101b9611b9b5?s=128&d=identicon&r=PG", "display_name": "Eelke", "link": "https://stackoverflow.com/users/568635/eelke"}, "edited": false, "score": 0, "creation_date": 1438242138, "post_id": 31710419, "comment_id": 51372843, "body": "Seems a python problem to me, postgres will give normal result for this query. I do not know python but my guess is that fetchone returns one row so you are printing a row not a single value. I suspect you need to retieve the measurement_id  field from the row and print that."}, {"owner": {"reputation": 118707, "user_id": 54964, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/0VZ1V.png?s=128&g=1", "display_name": "L&#233;o L&#233;opold Hertz \uc900\uc601", "link": "https://stackoverflow.com/users/54964/l%c3%a9o-l%c3%a9opold-hertz-%ec%a4%80%ec%98%81"}, "reply_to_user": {"reputation": 17562, "user_id": 568635, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/25f0758867b3f251cfdf101b9611b9b5?s=128&d=identicon&r=PG", "display_name": "Eelke", "link": "https://stackoverflow.com/users/568635/eelke"}, "edited": false, "score": 0, "creation_date": 1438242703, "post_id": 31710419, "comment_id": 51373213, "body": "@Eelke If it could be done with one fetch, that would save resources, since no postprocessing needed then by Python."}], "answers": [{"tags": [], "owner": {"reputation": 97819, "user_id": 131874, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/b3600796ab1d9e78c7545c91468c2e51?s=128&d=identicon&r=PG", "display_name": "Clodoaldo Neto", "link": "https://stackoverflow.com/users/131874/clodoaldo-neto"}, "is_accepted": true, "score": 3, "last_activity_date": 1474710897, "creation_date": 1474710897, "answer_id": 39675018, "question_id": 31710419, "link": "https://stackoverflow.com/questions/31710419/select-fetch-signed-integer-in-postgresql-python/39675018#39675018", "title": "Select/Fetch signed integer in PostgreSQL/Python", "body": "<p><code>fetchone</code> returns a tuple. Just get its first element:</p>\n\n<pre><code>_measurement_id = cursor.fetchone()[0];\n</code></pre>\n"}], "owner": {"reputation": 118707, "user_id": 54964, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/0VZ1V.png?s=128&g=1", "display_name": "L&#233;o L&#233;opold Hertz \uc900\uc601", "link": "https://stackoverflow.com/users/54964/l%c3%a9o-l%c3%a9opold-hertz-%ec%a4%80%ec%98%81"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 962, "favorite_count": 0, "accepted_answer_id": 39675018, "answer_count": 1, "score": 1, "last_activity_date": 1474711129, "creation_date": 1438201510, "last_edit_date": 1495535652, "question_id": 31710419, "link": "https://stackoverflow.com/questions/31710419/select-fetch-signed-integer-in-postgresql-python", "title": "Select/Fetch signed integer in PostgreSQL/Python", "body": "<p>I would like to Select and Fetch integer from the column <em>measurement_id</em> of the table <em>measurements</em>, since otherwise, I have somehow convert one-item-size tuple to signed integer by some postprocess of Python.\nI know this <a href=\"https://stackoverflow.com/questions/8895927/selecting-casting-output-as-integer-in-sql\">Selecting/casting output as integer in SQL</a> in MySQL where my pseudocode for PostgreSQL 9.4</p>\n\n<pre><code>CREATE TABLE measurements (\n        measurement_id SERIAL PRIMARY KEY NOT NULL,\n        measurement_size_in_bytes INTEGER NOT NULL,\n        time TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT CURRENT_TIMESTAMP\n);  \n\n-- sample data\nINSERT INTO measurements (measurement_size_in_bytes) VALUES (77777), (5065), (888);\n\nSELECT CAST(measurement_id AS SIGNED) FROM measurements ORDER BY time desc limit 1;\n</code></pre>\n\n<p>where casting is not working, not even by <code>measurement_id::int</code>. \nProbably, <code>format</code> is the right tool here.\nDoing <code>print \"measurement_id \", _measurement_id;</code> gives tuple (<code>(21,)</code>), while it should just give <code>21</code>. </p>\n\n<h2>Initiating and Running in Python</h2>\n\n<pre><code>sudo -u postgres psql detector -f 12.7.2015_creates.sql;\nDROP TABLE\nCREATE TABLE\n$ sudo -u postgres psql detector -c \"INSERT INTO measurements (measurement_size_in_bytes) VALUES (77777), (5065), (888);\"\nINSERT 0 3\n$ sudo -u postgres psql detector -c \"INSERT INTO measurements (measurement_size_in_bytes) VALUES (77777), (5065), (888);\"\nINSERT 0 3\n$ sudo -u postgres psql detector -c \"SELECT measurement_id FROM measurements ORDER BY time desc limit 1\";\n measurement_id \n----------------\n              7\n(1 row)\n</code></pre>\n\n<p>but doing the same in Python where I need to use the data</p>\n\n<pre><code>import sys\nimport os\nimport struct\nimport psycopg2\nconn_string = \"dbname=detector user=postgres password=1234 host=localhost port=5432\"\nprint \"Connecting to database\\n    -&gt;%s\" % (conn_string)     \nconn = psycopg2.connect(conn_string)\ncursor = connection.cursor()\ncursor.execute(\n    'SELECT measurement_id FROM measurements ORDER BY time desc limit 1;'\n);\n_measurement_id = cursor.fetchone();\nprint \"measurement_id \", _measurement_id, \" javist!\";\n</code></pre>\n\n<p>returning</p>\n\n<pre><code>Connecting to database\n    -&gt;dbname=detector user=postgres password=1234 host=localhost port=5432\nmeasurement_id  (11,)  javist!\n</code></pre>\n\n<p>I would like to have from print <code>measurement_id  11  javist!</code>.</p>\n\n<p>How can you select/fetch signed int from tuple in PostgreSQL/Python?</p>\n\n<p>OS: Debian 8.5<br>\nHardware: Lenovo    </p>\n"}, {"tags": ["python", "mod-wsgi", "wsgi"], "comments": [{"owner": {"reputation": 3141, "user_id": 4561047, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/637eff3f3244f3658d31a25ea7636d82?s=128&d=identicon&r=PG", "display_name": "intcreator", "link": "https://stackoverflow.com/users/4561047/intcreator"}, "edited": false, "score": 0, "creation_date": 1438203421, "post_id": 31710401, "comment_id": 51359952, "body": "Welcome to Stack Overflow! If you add more description in your title it&#39;s likely this question will get more attention."}, {"owner": {"reputation": 11652, "user_id": 1377864, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2d77111560fa85ed47ad983a911647a3?s=128&d=identicon&r=PG", "display_name": "Yaroslav Admin", "link": "https://stackoverflow.com/users/1377864/yaroslav-admin"}, "edited": false, "score": 0, "creation_date": 1438203886, "post_id": 31710401, "comment_id": 51360217, "body": "Take a look at this <a href=\"http://stackoverflow.com/questions/10955880/when-configuring-mod-wsgi-for-django-1-4-apache-fails-to-start-on-mac-osx-after\">question</a>. It has solution for exactly your problem."}, {"owner": {"reputation": 53, "user_id": 5170944, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-hcTnVbbkl7E/AAAAAAAAAAI/AAAAAAAAC7w/P0t1n0th1Ms/photo.jpg?sz=128", "display_name": "Mike Rinos", "link": "https://stackoverflow.com/users/5170944/mike-rinos"}, "edited": false, "score": 0, "creation_date": 1438204524, "post_id": 31710401, "comment_id": 51360560, "body": "so i basically move the WSGIPythonPath to the apache2.conf file? Edit: ok i figured it out."}], "answers": [{"comments": [{"owner": {"reputation": 54548, "user_id": 128141, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70dfb4afd84b106d0855184bf0ae4675?s=128&d=identicon&r=PG", "display_name": "Graham Dumpleton", "link": "https://stackoverflow.com/users/128141/graham-dumpleton"}, "edited": false, "score": 0, "creation_date": 1438310275, "post_id": 31711369, "comment_id": 51409291, "body": "Better still use mod_wsgi daemon mode. See <a href=\"http://blog.dscpl.com.au/2012/10/why-are-you-using-embedded-mode-of.html\" rel=\"nofollow noreferrer\">blog.dscpl.com.au/2012/10/&hellip;</a> and <a href=\"http://blog.dscpl.com.au/2014/09/using-python-virtual-environments-with.html\" rel=\"nofollow noreferrer\">blog.dscpl.com.au/2014/09/&hellip;</a> Using a daemon process you can then set the Python path and virtual environment location just for that daemon process."}], "tags": [], "owner": {"reputation": 53, "user_id": 5170944, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-hcTnVbbkl7E/AAAAAAAAAAI/AAAAAAAAC7w/P0t1n0th1Ms/photo.jpg?sz=128", "display_name": "Mike Rinos", "link": "https://stackoverflow.com/users/5170944/mike-rinos"}, "is_accepted": false, "score": 0, "last_activity_date": 1438204871, "creation_date": 1438204871, "answer_id": 31711369, "question_id": 31710401, "link": "https://stackoverflow.com/questions/31710401/apache-conf-file-issue-wsgipythonpath-error/31711369#31711369", "title": "Apache Conf file issue -WSGIPythonPath error", "body": "<p>move the line with WSGIPythonPath to the httpd.conf location </p>\n"}], "owner": {"reputation": 53, "user_id": 5170944, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-hcTnVbbkl7E/AAAAAAAAAAI/AAAAAAAAC7w/P0t1n0th1Ms/photo.jpg?sz=128", "display_name": "Mike Rinos", "link": "https://stackoverflow.com/users/5170944/mike-rinos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2082, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1438204871, "creation_date": 1438201431, "last_edit_date": 1495540272, "question_id": 31710401, "link": "https://stackoverflow.com/questions/31710401/apache-conf-file-issue-wsgipythonpath-error", "title": "Apache Conf file issue -WSGIPythonPath error", "body": "<p>So i'm trying to deploy a simple website using django, Apache, and wsgi. I wrote my conf file using the django guide (<a href=\"https://docs.djangoproject.com/en/1.8/howto/deployment/wsgi/modwsgi/\" rel=\"nofollow noreferrer\">https://docs.djangoproject.com/en/1.8/howto/deployment/wsgi/modwsgi/</a>) and this previous answer (<a href=\"https://stackoverflow.com/questions/28331641/deploying-django-on-apache-and-wsgi?newreg=f4e7765683624f9691def37724ada805\">Deploying Django on Apache and WSGI</a>) but when I restart Apache I get an syntax error  on line 3 stating WSGIPythonPath cannot occur within the VirtualHost section, once removed Apache restarted successfully but still does not redirect to the appropriate django website I created even after changing the hosts files so that it redirects back to my server.</p>\n\n<p>Apache Version: 2.4.7<br>\nPython Version: 2.7.6<br>\nDjango Version: 1.8.3</p>\n\n<pre><code>&lt;VirtualHost *:80&gt;\n    WSGIScriptAlias / /var/www/mywebsite/mywebsite/wsgi.py\n    WSGIPythonPath /var/www/mywebsite   \n\n    ServerAdmin my_email@gmail.com\n    ServerName mywebsite.com\n    ServerAlias www.mywebsite.com\n\n    &lt;Directory /var/www/mywebsite/mywebsite&gt;\n    &lt;Files wsgi.py&gt;\n    Require all granted\n    &lt;/Files&gt;\n    &lt;/Directory&gt;\n\n    ErrorLog ${APACHE_LOG_DIR}/error.log\n    CustomLog ${APACHE_LOG_DIR}/access.log combined\n&lt;/VirtualHost&gt;\n</code></pre>\n"}, {"tags": ["python", "python-2.7", "ms-word", "win32com"], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 3845074, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c26792f80fdb6a2f18e45f3279d470d?s=128&d=identicon&r=PG", "display_name": "Mehz", "link": "https://stackoverflow.com/users/3845074/mehz"}, "is_accepted": false, "score": 0, "last_activity_date": 1469708051, "last_edit_date": 1469708051, "creation_date": 1469704094, "answer_id": 38634615, "question_id": 31710390, "link": "https://stackoverflow.com/questions/31710390/pass-variable-to-macro-when-opening-word-2010-document-via-python-script/38634615#38634615", "title": "Pass variable to macro when opening Word 2010 document via python script", "body": "<p>You must pass the <code>myVar</code> variable as an argument in the <code>Run</code> method:</p>\n\n<pre><code>expression.Run(MacroName, varg1, varg2, varg3, ..., varg30)\nword.Run(\"executeMacros\",myVar)\n</code></pre>\n"}], "owner": {"reputation": 653, "user_id": 2100945, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/a354361f94c7becb5a2c220ab1cf91d0?s=128&d=identicon&r=PG", "display_name": "user12059", "link": "https://stackoverflow.com/users/2100945/user12059"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 926, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1469708051, "creation_date": 1438201391, "question_id": 31710390, "link": "https://stackoverflow.com/questions/31710390/pass-variable-to-macro-when-opening-word-2010-document-via-python-script", "title": "Pass variable to macro when opening Word 2010 document via python script", "body": "<p>Using Python 2.7.8; Word 2010</p>\n\n<p>I am running a Python script and executing a MS Word macro from within it. Below is the code that I use to do this.</p>\n\n<p>I need to pass a variable (myVar) from the Python script to the Word macro but cannot figure out how to do it. The macro does different things depending on the value of the passed variable.</p>\n\n<p>Suggestions anyone? </p>\n\n<pre><code>word = win32com.client.Dispatch('Word.Application')\ndoc = word.Documents.Open(myDir + \"\\\\MyFile.docx\") # pass myVar on open?\nword.Run(\"executeMacros\")\ndoc.Save()\ndoc.Close()\n</code></pre>\n"}, {"tags": ["javascript", "python", "svg", "graph", "beautifulsoup"], "answers": [{"comments": [{"owner": {"reputation": 605, "user_id": 4579980, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/41eea43cded4dd1751ba5be586f817e4?s=128&d=identicon&r=PG&f=1", "display_name": "Diego", "link": "https://stackoverflow.com/users/4579980/diego"}, "edited": false, "score": 0, "creation_date": 1438204323, "post_id": 31710571, "comment_id": 51360465, "body": "Thank you for the code! I am after getting the data (values) depicted on the sentiment value chart."}, {"owner": {"reputation": 605, "user_id": 4579980, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/41eea43cded4dd1751ba5be586f817e4?s=128&d=identicon&r=PG&f=1", "display_name": "Diego", "link": "https://stackoverflow.com/users/4579980/diego"}, "edited": false, "score": 0, "creation_date": 1438253971, "post_id": 31710571, "comment_id": 51380256, "body": "The variable is an array with several objetcs (if I understand it correctly). How do I get the third &#39;data&#39; objetct starting with <code>{&#39;data&#39;: [[1437694834500.0, 2.6394052044609664],</code>? Thanks!"}, {"owner": {"reputation": 605, "user_id": 4579980, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/41eea43cded4dd1751ba5be586f817e4?s=128&d=identicon&r=PG&f=1", "display_name": "Diego", "link": "https://stackoverflow.com/users/4579980/diego"}, "edited": false, "score": 0, "creation_date": 1438254606, "post_id": 31710571, "comment_id": 51380655, "body": "Thank you so much for the answer! I can see the variable now."}], "tags": [], "owner": {"reputation": 2309, "user_id": 1341437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eHSyS.jpg?s=128&g=1", "display_name": "craigts", "link": "https://stackoverflow.com/users/1341437/craigts"}, "is_accepted": true, "score": 1, "last_activity_date": 1438227044, "last_edit_date": 1438227044, "creation_date": 1438202070, "answer_id": 31710571, "question_id": 31710343, "link": "https://stackoverflow.com/questions/31710343/extracting-data-from-interactive-line-chart-svg-path-python-2-7/31710571#31710571", "title": "Extracting data from interactive line chart - svg path - python 2.7", "body": "<p>It's hard to know exactly what you're after overall, but the ValueError you are getting is because your data is not exactly the same as the other question you referenced. You have spaces in your data where the other question had commas.</p>\n\n<p>To alleviate the ValueError change:</p>\n\n<pre><code>data = [map(float, xy.split(',')) for xy in re.split('[ML]', svg_string)[1:]]\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>data = [map(float, xy.split()) for xy in re.split('[ML]', svg_string)[1:]]\n</code></pre>\n\n<p>Hopefully this gets you onto the next step.</p>\n\n<p><strong>Edit:</strong></p>\n\n<p>Ok so I looked at the page again, and the data is literally just in a js variable that you can grab from the response. The variable name is 'series' so you either need to do some parsing yourself to grab the data or find a library to work with (e.g. BeautifulSoup, etc.).</p>\n"}], "owner": {"reputation": 605, "user_id": 4579980, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/41eea43cded4dd1751ba5be586f817e4?s=128&d=identicon&r=PG&f=1", "display_name": "Diego", "link": "https://stackoverflow.com/users/4579980/diego"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1999, "favorite_count": 0, "accepted_answer_id": 31710571, "answer_count": 1, "score": 2, "last_activity_date": 1438227044, "creation_date": 1438201206, "last_edit_date": 1495541639, "question_id": 31710343, "link": "https://stackoverflow.com/questions/31710343/extracting-data-from-interactive-line-chart-svg-path-python-2-7", "title": "Extracting data from interactive line chart - svg path - python 2.7", "body": "<p>I would like to get the data depicted on the sentiment value line chart:\n  <a href=\"http://sentdex.com/financial-analysis/?i=TWTR&amp;tf=7d\" rel=\"nofollow noreferrer\">http://sentdex.com/financial-analysis/?i=TWTR&amp;tf=7d</a></p>\n\n<p>Looking for answers I went through \n    <a href=\"https://stackoverflow.com/questions/23249177/web-scraping-data-from-an-interactive-chart\">Web scraping data from an interactive chart</a> that seems to be very similar to my case.</p>\n\n<p>Also went through:\n    <a href=\"https://stackoverflow.com/questions/30497537/scraping-graph-data-from-a-website-using-python\">Scraping graph data from a website using Python</a></p>\n\n<p>This is my last attempt:</p>\n\n<pre><code>import re\n\nsvg_string = \"M 364.5 53 L 364.5 171.35000000000002 M 364.5 184.5 L 364.5 302.85 M 364.5 184.5 L 364.5 302.85\"\n\nprint repr(svg_string)\n\ndata = [map(float, xy.split(',')) for xy in re.split('[ML]', svg_string)[1:]]\nprint data\n</code></pre>\n\n<p>I am facing at least 3 issues:\nThe first one is that the data for svg_string represents coordinates vs. real values so I am not sure how to access the interesting data.</p>\n\n<p>The second is that even when I play with this code I am getting </p>\n\n<pre><code> ValueError: invalid literal for float(): 364.5 53\n</code></pre>\n\n<p>And last, the string for svg_string does not even represent the graph properly (I cannot find the right code).</p>\n\n<p>How do I extract the values?\nThank you in advance.</p>\n"}, {"tags": ["python", "dictionary", "filter", "dictionary-comprehension"], "comments": [{"owner": {"reputation": 15387, "user_id": 2588818, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/0PpNx.jpg?s=128&g=1", "display_name": "Two-Bit Alchemist", "link": "https://stackoverflow.com/users/2588818/two-bit-alchemist"}, "edited": false, "score": 0, "creation_date": 1438201110, "post_id": 31710271, "comment_id": 51358669, "body": "Can you amend your question with a specification of what <code>_dict_key_filter</code> is supposed to do and what parameters it takes? For instance, I would have guessed <code>obj_filter</code> was a callable but apparently it is a sequence of keys that are acceptable?"}, {"owner": {"reputation": 503, "user_id": 1539348, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/c2dceabd34e081e05c0fea37c69e05b3?s=128&d=identicon&r=PG", "display_name": "user1539348", "link": "https://stackoverflow.com/users/1539348/user1539348"}, "reply_to_user": {"reputation": 15387, "user_id": 2588818, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/0PpNx.jpg?s=128&g=1", "display_name": "Two-Bit Alchemist", "link": "https://stackoverflow.com/users/2588818/two-bit-alchemist"}, "edited": false, "score": 0, "creation_date": 1438201483, "post_id": 31710271, "comment_id": 51358872, "body": "Done, hope I clarified, if not let me know."}, {"owner": {"reputation": 15387, "user_id": 2588818, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/0PpNx.jpg?s=128&g=1", "display_name": "Two-Bit Alchemist", "link": "https://stackoverflow.com/users/2588818/two-bit-alchemist"}, "edited": false, "score": 0, "creation_date": 1438203245, "post_id": 31710271, "comment_id": 51359835, "body": "It&#39;s not really clear because you&#39;re still using just the word &quot;filter&quot; without defining it. By what mechanism is the filter meant to work? Filter anything not appearing in <code>obj_filter</code>? At any level?"}, {"owner": {"reputation": 503, "user_id": 1539348, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/c2dceabd34e081e05c0fea37c69e05b3?s=128&d=identicon&r=PG", "display_name": "user1539348", "link": "https://stackoverflow.com/users/1539348/user1539348"}, "reply_to_user": {"reputation": 15387, "user_id": 2588818, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/0PpNx.jpg?s=128&g=1", "display_name": "Two-Bit Alchemist", "link": "https://stackoverflow.com/users/2588818/two-bit-alchemist"}, "edited": false, "score": 0, "creation_date": 1438204122, "post_id": 31710271, "comment_id": 51360357, "body": "I have updated the post. obj_filter is used to compare against the nested dictionary, any key from the lowest level node that is not in the obj_filter will be removed. Please see the example on the bottom."}], "answers": [{"tags": [], "owner": {"reputation": 6367, "user_id": 6914441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbc12c764b93fa915b8e5384f521fe12?s=128&d=identicon&r=PG&f=1", "display_name": "jferard", "link": "https://stackoverflow.com/users/6914441/jferard"}, "is_accepted": true, "score": 1, "last_activity_date": 1547062156, "creation_date": 1547062156, "answer_id": 54117052, "question_id": 31710271, "link": "https://stackoverflow.com/questions/31710271/how-to-filter-by-keys-through-a-nested-dictionary-in-a-pythonic-way/54117052#54117052", "title": "How to filter by keys through a nested dictionary in a pythonic way", "body": "<p>It's a really old question. I came across a similar problem recently.</p>\n\n<p>It maybe obvious, but you are dealing with a tree in which each node has an arbitray number of children. You want to cut the subtrees that do not contain some items as nodes (not leaves). To achieve this, you are using a custom DFS: the main function returns either a subtree or <code>None</code>. If the value is <code>None</code> then you \"cut\" the branch.</p>\n\n<p>First of all, the function <code>dict_key_filter</code> returns a (non empty) <code>dict</code>, a (non empty) <code>list</code> or <code>None</code> if no filter key was not found in the branch. \nTo reduce complexity, you could return a <a href=\"https://docs.python.org/3.7/library/stdtypes.html#sequence-types-list-tuple-range\" rel=\"nofollow noreferrer\">sequence</a> in every case: an empty sequence if no filter key was found, and a non empty sequence if you are still searching or you found the leaf of the tree. Your code would look like:</p>\n\n<pre><code>def dict_key_filter(obj, obj_filter):\n    if isinstance(obj, dict):\n        retdict = {}\n        ...\n        return retdict # empty or not\n    elif isinstance(obj, list):\n        retlist = []\n        ...\n        return retlist # empty or not\n    else:\n        return [] # obvioulsy empty\n</code></pre>\n\n<p>This was the easy part. Now we have to fill the dots.</p>\n\n<h1>The <code>list</code> case</h1>\n\n<p>Let's begin with the <code>list</code> case, since it is the easier to refactor:</p>\n\n<pre><code>retlist = []\nfor value in obj:\n    child = dict_key_filter0(value, obj_filter)\n    if child:\n        retlist.append(child)\n</code></pre>\n\n<p>We can translate this into a simple list comprehension:</p>\n\n<pre><code>retlist = [dict_key_filter(value, obj_filter) for value in obj if dict_key_filter(value, obj_filter)]\n</code></pre>\n\n<p>The drawback is that <code>dict_key_filter</code> is evaluated twice. We can avoid this with a little trick (see <a href=\"https://stackoverflow.com/a/15812866\">https://stackoverflow.com/a/15812866</a>):</p>\n\n<pre><code>retlist = [subtree for subtree in (dict_key_filter(value, obj_filter) for value in obj) if subtree]\n</code></pre>\n\n<p>The inner expression <code>(dict_key_filter(value, obj_filter) for value in obj)</code> is a generator that calls <code>dict_key_filter</code> once per value. But we can even do better if we build a closure of <code>dict_key_filter</code>:</p>\n\n<pre><code>def dict_key_filter(obj, obj_filter):\n    def inner_dict_key_filter(obj): return dict_key_filter(obj, obj_filter)\n\n    ...\n\n    retlist = list(filter(len, map(inner_dict_key_filter, obj)))\n</code></pre>\n\n<p>Now we are in the functional world: <code>map</code> applies <code>inner_dict_key_filter</code> to every element of the list and then the subtrees are filtered to exclude empty subtrees (<code>len(subtree)</code> is true iff <code>subtree</code> is not empty). Now, the code looks like:</p>\n\n<pre><code>def dict_key_filter(obj, obj_filter):\n    def inner_dict_key_filter(obj): return dict_key_filter(obj, obj_filter)\n\n    if isinstance(obj, dict):\n        retdict = {}\n        ...\n        return retdict\n    elif isinstance(obj, list):\n        return list(filter(len, map(inner_dict_key_filter, obj)))\n    else:\n        return []\n</code></pre>\n\n<p>If you are familiar with functional programming, the <code>list</code> case is readable (not quite as readable as it would be in Haskell, but still readable).</p>\n\n<h1>The <code>dict</code> case</h1>\n\n<p>I do not forget the <code>dictionary-comprehension</code> tag in your question. The first idea is to create a function to return either a whole copy of the branch or the result of the rest of the DFS. </p>\n\n<pre><code>def build_subtree(key, value):\n    if key in obj_filter:\n        return copy.deepcopy(value) # keep the branch\n    elif isinstance(value, (dict, list)):\n        return inner_dict_key_filter(value) # continue to search\n    return [] # just an orphan value here\n</code></pre>\n\n<p>As in the <code>list</code> case, we do not refuse empty <code>subtree</code>s for now:</p>\n\n<pre><code>retdict = {}\nfor key, value in obj.items():\n    retdict[key] = build_subtree(key, value)\n</code></pre>\n\n<p>We have now a perfect case for dict comprehension:</p>\n\n<pre><code>retdict = {key: build_subtree(key, value) for key, value in obj.items() if build_subtree(key, value)}\n</code></pre>\n\n<p>Again, we use the little trick to avoid to compute a value twice:</p>\n\n<pre><code>retdict = {key:subtree for key, subtree in ((key, build_subtree(key, value)) for key, value in obj.items()) if subtree}\n</code></pre>\n\n<p>But we have a little problem here: the code above is not exaclty equivalent to the original code. What if the value is <code>0</code>? In the original version, we have <code>retdict[key] = copy.deepcopy(0)</code> but in the new version we have nothing. The <code>0</code> value is evaluated as false and filtered. And then the dict may become empty and we cut the branch wrongfully. We need another test to be sure we want to remove a value: if it's an empty list or dict, then remove it, else keep it:</p>\n\n<pre><code>def to_keep(subtree): return not (isinstance(subtree, (dict, list)) or len(subtree) == 0)\n</code></pre>\n\n<p>That is:</p>\n\n<pre><code> def to_keep(subtree): return not isinstance(subtree, (dict, list)) or subtree\n</code></pre>\n\n<p>If you remember a bit of logic (<a href=\"https://en.wikipedia.org/wiki/Truth_table#Logical_implication\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Truth_table#Logical_implication</a>) you can interpret this as: if <code>subtree</code> is a dict or a list, then it must not be empty.</p>\n\n<p>Let's put the pieces together:</p>\n\n<pre><code>def dict_key_filter(obj, obj_filter):\n    def inner_dict_key_filter(obj): return dict_key_filter(obj, obj_filter)\n    def to_keep(subtree): return not isinstance(subtree, (dict, list)) or subtree\n\n    def build_subtree(key, value):\n        if key in obj_filter:\n            return copy.deepcopy(value) # keep the branch\n        elif isinstance(value, (dict, list)):\n            return inner_dict_key_filter(value) # continue to search\n        return [] # just an orphan value here\n\n    if isinstance(obj, dict):\n        key_subtree_pairs = ((key, build_subtree(key, value)) for key, value in obj.items())\n        return {key:subtree for key, subtree in key_subtree_pairs if to_keep(subtree)}\n    elif isinstance(obj, list):\n        return list(filter(to_keep, map(inner_dict_key_filter, obj)))\n    return []\n</code></pre>\n\n<p>I don't know if this is more pythonic, but it seems clearer to me.</p>\n\n<pre><code>dict1 = {\n    'test1': { 'test2':[1,2] }, \n    'test3': [\n        {'test6': 2}, \n        {\n            'test8': { 'test9': 23 }\n        }\n    ],\n    'test4':{'test5': 0}\n}\n\nobj_filter = ['test5' , 'test9']\n\nprint (dict_key_filter(dict1, obj_filter))\n# {'test3': [{'test8': {'test9': 23}}], 'test4': {'test5': 0}}\n</code></pre>\n"}], "owner": {"reputation": 503, "user_id": 1539348, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/c2dceabd34e081e05c0fea37c69e05b3?s=128&d=identicon&r=PG", "display_name": "user1539348", "link": "https://stackoverflow.com/users/1539348/user1539348"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1640, "favorite_count": 0, "accepted_answer_id": 54117052, "answer_count": 1, "score": 0, "last_activity_date": 1547062156, "creation_date": 1438200933, "last_edit_date": 1438203918, "question_id": 31710271, "link": "https://stackoverflow.com/questions/31710271/how-to-filter-by-keys-through-a-nested-dictionary-in-a-pythonic-way", "title": "How to filter by keys through a nested dictionary in a pythonic way", "body": "<p>Try to filter a nested dictionary. My solution is clunky, was hoping to see if there is a better method something using comprehensions. Only interested in the dictionary and lists for this example.</p>\n\n<p>_dict_key_filter() will filter the keys of a nested dictionary or a list of nested dictionaries. Anything not in the obj_filter will be ignored on all nested levels.</p>\n\n<p>obj : can be a dictionary or a list of dictionaries.</p>\n\n<p>obj_filter: has to be a list of filter values</p>\n\n<pre><code>def _dict_key_filter(self, obj, obj_filter):\n    if isinstance(obj, dict):\n        retdict = {}\n        for key, value in obj.iteritems():\n            if key in obj_filter:\n                retdict[key] = copy.deepcopy(value)\n            elif isinstance(value, (dict, list)):\n                child = self._dict_key_filter(value, obj_filter)\n                if child:\n                    retdict[key] = child\n        return retdict if retdict else None\n    elif isinstance(obj, list):\n        retlist = []\n        for value in list:\n            child = self._dict_key_filter(value, obj_filter)\n            if child:\n                retlist.append(child)\n        return retlist if retlist else None\n    else:\n        return None\n\nExample#\ndict1 = {'test1': {'test2':[1,2]}, 'test3': [{'test6': 2}, \n         {'test8': {'test9': 23}}], 'test4':{'test5': 5}}\n\nfilter = ['test5' , 'test9']\n\nreturn = _dict_key_filter(dict1, filter)\n\nreturn value would be {'test3': [{'test8': {'test9': 23}}], 'test4': {'test5': 5}}\n</code></pre>\n"}, {"tags": ["python", "sorting", "csv"], "comments": [{"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1438201289, "post_id": 31710265, "comment_id": 51358776, "body": "add some input and expected output"}], "answers": [{"tags": [], "owner": {"reputation": 61, "user_id": 4505429, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa3d70c8eec73105d868e657780dd0db?s=128&d=identicon&r=PG&f=1", "display_name": "hhauer", "link": "https://stackoverflow.com/users/4505429/hhauer"}, "is_accepted": true, "score": 2, "last_activity_date": 1438201406, "last_edit_date": 1495542611, "creation_date": 1438201406, "answer_id": 31710394, "question_id": 31710265, "link": "https://stackoverflow.com/questions/31710265/sorting-csv-file-by-multiple-columns-by-magnitude-in-python/31710394#31710394", "title": "Sorting csv file by multiple columns by magnitude in python", "body": "<p>It sounds like what you want is ordinal / numeric sorting, but what you're getting is alphabetic sorting. Alphabetic would be 1, 10, 100, 2, etc while ordinal sorting would get you 1, 2, 10, 100.</p>\n\n<p>The data you're trying to sort is probably in string format when it's read in from the CSV, and you need to convert it to an int before calling Python's sort function.</p>\n\n<p>You can do this by passing key=int as a parameter to the sort function, which will cause it to call int() on the members being sorted.</p>\n\n<p>More information can be found here: <a href=\"https://stackoverflow.com/questions/3426108/numeric-sort-in-python\">How to sort a list numerically?</a></p>\n"}, {"tags": [], "owner": {"reputation": 4780, "user_id": 2151286, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/c85a35dc1de171cbb72a4046e2debe91?s=128&d=identicon&r=PG&f=1", "display_name": "Anoop", "link": "https://stackoverflow.com/users/2151286/anoop"}, "is_accepted": false, "score": 1, "last_activity_date": 1438201562, "creation_date": 1438201562, "answer_id": 31710437, "question_id": 31710265, "link": "https://stackoverflow.com/questions/31710265/sorting-csv-file-by-multiple-columns-by-magnitude-in-python/31710437#31710437", "title": "Sorting csv file by multiple columns by magnitude in python", "body": "<p>I think this should work,</p>\n\n<pre><code>import csv\n\nreader = csv.reader(open(\"file.csv\"))\nsortedlist = sorted(reader, key=int(operator.itemgetter(3))) \n# 3 or 'n' depending upon which column you want to sort the data\n\nwith open(\"sorted_file.csv\", 'wb') as f:\n    csv.writer(f).writerows(sortedlist)\n</code></pre>\n\n<p>You just have to convert the key to int type when sorting.</p>\n\n<p>Python is impressive !!</p>\n"}, {"tags": [], "owner": {"reputation": 327, "user_id": 1523152, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/03255e8838dea774589e1d234b32c1c7?s=128&d=identicon&r=PG&f=1", "display_name": "yogesh kumar", "link": "https://stackoverflow.com/users/1523152/yogesh-kumar"}, "is_accepted": false, "score": 0, "last_activity_date": 1571508424, "creation_date": 1571508424, "answer_id": 58466612, "question_id": 31710265, "link": "https://stackoverflow.com/questions/31710265/sorting-csv-file-by-multiple-columns-by-magnitude-in-python/58466612#58466612", "title": "Sorting csv file by multiple columns by magnitude in python", "body": "<p>If you are using pandas library version > 0.25 then you can use <strong>sort_values</strong> </p>\n\n<pre><code>import pandas as pd\ndf = pd.read_csv('biostats.csv')\ndf\n\nName    Sex Age Height (in) Weight (lbs)\n0   Alex    M   41  74  170\n1   Page    F   31  67  135\n2   Quin    M   29  71  176\n3   Ruth    F   28  65  131\n4   Ruth    F   59  75  131\n5   Quin    M   19  55  46\n</code></pre>\n\n<p><strong>df.sort_values(['Name', 'Sex'], ascending=[True, True])</strong></p>\n\n<pre><code>Name    Sex Age Height (in) Weight (lbs)\n0   Alex    M   41  74  170\n1   Page    F   31  67  135\n2   Quin    M   29  71  176\n5   Quin    M   19  55  46\n3   Ruth    F   28  65  131\n4   Ruth    F   59  75  131\n</code></pre>\n"}], "owner": {"reputation": 109, "user_id": 3063381, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/jRZaz.jpg?s=128&g=1", "display_name": "manuelschipper", "link": "https://stackoverflow.com/users/3063381/manuelschipper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 931, "favorite_count": 0, "accepted_answer_id": 31710394, "answer_count": 3, "score": 2, "last_activity_date": 1571508424, "creation_date": 1438200917, "last_edit_date": 1438203737, "question_id": 31710265, "link": "https://stackoverflow.com/questions/31710265/sorting-csv-file-by-multiple-columns-by-magnitude-in-python", "title": "Sorting csv file by multiple columns by magnitude in python", "body": "<p>I want to sort a csv file first by one column and then by another one.</p>\n\n<p>I have tried some of the few approaches online to sort a csv file with multiple columns. The problem is that the sorting happens from left to right, so I get something like this 1, 10, 100, 101, 102.... when I want something like this 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11...</p>\n\n<p>I've used this discussion:\n<a href=\"https://stackoverflow.com/questions/2089036/sorting-csv-in-python\">Sorting CSV in Python</a>\nand this module:\n<a href=\"https://pypi.python.org/pypi/csvsort/1.3\" rel=\"nofollow\">csvsort</a></p>\n\n<p>I'd appreciate any reference or code.</p>\n"}, {"tags": ["python", "python-2.7", "csv"], "comments": [{"owner": {"reputation": 1075, "user_id": 1489146, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80ec5559bf7754c7d119b6ddd33f1bff?s=128&d=identicon&r=PG", "display_name": "Ram", "link": "https://stackoverflow.com/users/1489146/ram"}, "edited": false, "score": 2, "creation_date": 1438200724, "post_id": 31710132, "comment_id": 51358448, "body": "It would be better to understand the problem if you could provide sample input and sample output"}, {"owner": {"reputation": 7117, "user_id": 235310, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/3fa28a7956df536d6c50cfd803ac17a0?s=128&d=identicon&r=PG", "display_name": "ThinkCode", "link": "https://stackoverflow.com/users/235310/thinkcode"}, "edited": false, "score": 0, "creation_date": 1438200823, "post_id": 31710132, "comment_id": 51358520, "body": "When we deal with CSV files, a sample is always helpful in providing a better solution."}, {"owner": {"reputation": 3135, "user_id": 4372759, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/6zzjk.jpg?s=128&g=1", "display_name": "flybonzai", "link": "https://stackoverflow.com/users/4372759/flybonzai"}, "edited": false, "score": 0, "creation_date": 1438201223, "post_id": 31710132, "comment_id": 51358740, "body": "Added to the OP, my current solution adds a number based off floor division to the key, so for example 11576999:10/28/13:1 to create the new line."}, {"owner": {"reputation": 5452, "user_id": 3714940, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bwcdU.jpg?s=128&g=1", "display_name": "SiHa", "link": "https://stackoverflow.com/users/3714940/siha"}, "edited": false, "score": 0, "creation_date": 1438202285, "post_id": 31710132, "comment_id": 51359290, "body": "The first thing I would suggest is using <b>csv.DictReader</b>. That would enable you to eliminate the first two blocks in your main loop."}, {"owner": {"reputation": 3135, "user_id": 4372759, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/6zzjk.jpg?s=128&g=1", "display_name": "flybonzai", "link": "https://stackoverflow.com/users/4372759/flybonzai"}, "reply_to_user": {"reputation": 5452, "user_id": 3714940, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bwcdU.jpg?s=128&g=1", "display_name": "SiHa", "link": "https://stackoverflow.com/users/3714940/siha"}, "edited": false, "score": 0, "creation_date": 1438203229, "post_id": 31710132, "comment_id": 51359824, "body": "@SiHa I looked into it, but it seemed like I wouldn&#39;t be able to use a custom key for my dictionary entries.  Is that not true?"}, {"owner": {"reputation": 5452, "user_id": 3714940, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bwcdU.jpg?s=128&g=1", "display_name": "SiHa", "link": "https://stackoverflow.com/users/3714940/siha"}, "edited": false, "score": 0, "creation_date": 1438239872, "post_id": 31710132, "comment_id": 51371518, "body": "No, because you are constructing a new dict. I&#39;m suggesting you use a <code>DictReader</code> to get your values out of your CSV. e.g.: (assuming your header row contains the same field names) instead of <code>ND_AMT = 14</code> + <code>nd_amt = row[ND_AMT]</code> + <code>dict_[key][14] += nd_amt</code>, you could have <code>dict_[key][14] += row[&#39;nd_amt&#39;]</code>. You&#39;d obviously have to have to make other changes (e.g. this line: <code>dict_[key] = row</code>) but it would simplify things at the start."}], "owner": {"reputation": 3135, "user_id": 4372759, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/6zzjk.jpg?s=128&g=1", "display_name": "flybonzai", "link": "https://stackoverflow.com/users/4372759/flybonzai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 152, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1438201212, "creation_date": 1438200427, "last_edit_date": 1438201212, "question_id": 31710132, "link": "https://stackoverflow.com/questions/31710132/how-to-roll-up-lines-from-a-csv-file-in-groups-of-6-using-dictionaries", "title": "How to roll up lines from a .csv file in groups of 6 using dictionaries?", "body": "<p>I am reading a <code>.csv</code> file, creating a composite key from two values, and then rolling up the values into one line of text.  If there are more than six entries with the same composite key I need to create a new line in the file.  I have a rather convoluted way of doing this currently, and am looking for suggestion on how to streamline and improve this process.  Here is my code, and I am always open to other suggestions on how to improve, or modules to use due to the fact I'm rather new to programming.</p>\n\n<pre><code>import csv\nimport sys\n\ndef main():\n    with open(sys.argv[1], 'rbU') as csvinfile:\n        myreader = csv.reader(csvinfile, \n                              delimiter=',', \n                              quotechar='\"')\n\n    # initialize variables and dictionaries\n    line_cntr = 0\n    dict_ = {}\n    cntr = {}\n    # capture header row\n    header_row = myreader.next()\n\n    for row in myreader:\n        # constant values\n        ND_AMT = 14\n        DEDUCT_AMT = 15\n        NONDEDUCT_YTD = 16\n        DEDUCT_YTD = 17\n        PID = 18\n        DON_DATE = 19\n        AMOUNT = 23\n        ANON = 25\n        INT_0003 = 38\n        INT_0006 = 39\n        INT_0028 = 40\n\n        # variables\n        nd_amt = row[ND_AMT]\n        deduct_amt = row[DEDUCT_AMT]\n        nondeduct_ytd = row[NONDEDUCT_YTD]\n        deduct_ytd = row[DEDUCT_YTD]\n        pid = row[PID]\n        don_date = row[DON_DATE]\n        amount = row[AMOUNT]\n        anon = row[ANON]\n        int_0003 = row[INT_0003]\n        int_0006 = row[INT_0006]\n        int_0028 = row[INT_0028]\n\n        # create a composite key for dict_\n        key = ':'.join((pid, don_date))\n        # check to see if key exists in dictionary, if not then add\n        # as per BR-0010 every group of up to 6 entries with same P_ID and Don_Date should print on their own line (i.e. different entry in Dict).  \n        if key in dict_:\n            if cntr[key] % 6:\n                # add use of constants to simplify the dict_[keys]\n                dict_[key][14] += nd_amt\n                dict_[key][15] += deduct_amt\n                dict_[key][16] += nondeduct_ytd\n                dict_[key][17] += deduct_ytd\n                dict_[key][23] += amount\n                cntr[key] += 1\n            else:\n                key = ':'.join((pid, don_date, str(cntr[key]//6)))\n                dict_[key] = row\n                # print(\"Doing some concatenating funkiness here!\")\n        else:\n            dict_[key] = row\n            cntr[key] = 1\n\n        # debugging\n        for key, value in cntr.iteritems():\n            if value &gt; 6:\n                print(key, value)\n                print(\"Warning, list entry greater than 6 found.\")\n\n        # keep track of lines processed for recon\n        line_cntr += 1\n\n\nwith open(sys.argv[2], 'wb') as csvoutfile:\n    mywriter = csv.writer(csvoutfile, \n                          delimiter=',',\n                          quotechar='\"')\n\n    mywriter.writerow(header_row)\n    for key, value in dict_.iteritems():\n        out_line = (key, value)\n        mywriter.writerow(out_line)\n\n    # print recon totals at bottom\n    csvoutfile.write(\"Total lines processed: %d\" % (line_cntr))\n\nif __name__ == '__main__':\n    main()\n</code></pre>\n\n<p>Here is a line of scrubbed input:</p>\n\n<pre><code>100029-00001,,100,100,400,100,175,100,700,200,200,500,0,0,0,300,0,2575,105999,10/27/14,197999,23764962,\"Frank, David\",300,1004,N,N,N,D,Jim and Sharon,Jim and Sharon Grossman,712 81st St NE,,,Logan,ID,54002-0000,UNITED STATES,,,,,Y,jimpagel@gmail.com,,(999) 999-9999,\"Frank, David\",2289B,BASIC,,\n</code></pre>\n\n<p>and a line of output (not from the same record):</p>\n\n<pre><code>11576999:10/28/13,\"['100029-00001', '', '750', '750', '750', '750', '0', '950', '1700', '750', '750', '750', '0', '0', '0000', '750750750750', '0000', '7900790079007900', '11576999', '10/28/14', '197999', '137307', 'WHERE NEEDED MOST', '256255050', '1009', 'N', 'N', 'N', 'D', 'Dirk and Bonnie', 'Dirk and Bonnie Johnson', '9999 Woodlawn Dr', '', '', 'Douglasville', 'VA', '30000-1999', 'UNITED STATES', '', '', '', '', 'Y', 'dirk.johnson@yahoo.com', '', '(229) 336-4442', 'WHERE NEEDED MOST', '2289B', 'BASIC', '', '']\"\n</code></pre>\n"}, {"tags": ["python", "for-loop", "dictionary", "optimization"], "comments": [{"owner": {"reputation": 216457, "user_id": 846892, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/E9dZn.png?s=128&g=1", "display_name": "Ashwini Chaudhary", "link": "https://stackoverflow.com/users/846892/ashwini-chaudhary"}, "edited": false, "score": 2, "creation_date": 1438200636, "post_id": 31710124, "comment_id": 51358397, "body": "Simply use <code>c[i] = V[i]</code> inside the loop."}, {"owner": {"reputation": 15387, "user_id": 2588818, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/0PpNx.jpg?s=128&g=1", "display_name": "Two-Bit Alchemist", "link": "https://stackoverflow.com/users/2588818/two-bit-alchemist"}, "edited": false, "score": 2, "creation_date": 1438200650, "post_id": 31710124, "comment_id": 51358405, "body": "I don&#39;t understand: it sounds like you&#39;re asking, &quot;Is there any way to update every item in a sequence without visiting every item in the sequence?&quot; It should be obvious the answer is no. What am I missing?"}, {"owner": {"reputation": 78907, "user_id": 107660, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0167bade38130f13a5fc468c10388d9d?s=128&d=identicon&r=PG", "display_name": "Duncan", "link": "https://stackoverflow.com/users/107660/duncan"}, "edited": false, "score": 2, "creation_date": 1438200682, "post_id": 31710124, "comment_id": 51358424, "body": "No way to do it without some kind of loop, but your code would appear to be identical to <code>c = { i: V[i] for i in ID }</code>"}], "answers": [{"comments": [{"owner": {"reputation": 15387, "user_id": 2588818, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/0PpNx.jpg?s=128&g=1", "display_name": "Two-Bit Alchemist", "link": "https://stackoverflow.com/users/2588818/two-bit-alchemist"}, "edited": false, "score": 0, "creation_date": 1438200781, "post_id": 31710209, "comment_id": 51358492, "body": "&quot;The use of loop processes take a lot of iteration impacted on run time.&quot; While I would prefer at least one of these to OP&#39;s sample code, I don&#39;t think this answers the question. All of these are basically O(n), which I think is that OP wants to avoid (impossible)."}, {"owner": {"reputation": 11357, "user_id": 584846, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/uD1uQ.jpg?s=128&g=1", "display_name": "Brent Washburne", "link": "https://stackoverflow.com/users/584846/brent-washburne"}, "reply_to_user": {"reputation": 15387, "user_id": 2588818, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/0PpNx.jpg?s=128&g=1", "display_name": "Two-Bit Alchemist", "link": "https://stackoverflow.com/users/2588818/two-bit-alchemist"}, "edited": false, "score": 0, "creation_date": 1438200887, "post_id": 31710209, "comment_id": 51358547, "body": "@Two-BitAlchemist, true, but using a dictionary comprehension may be faster than building the dictionary one entry at a time."}, {"owner": {"reputation": 15387, "user_id": 2588818, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/0PpNx.jpg?s=128&g=1", "display_name": "Two-Bit Alchemist", "link": "https://stackoverflow.com/users/2588818/two-bit-alchemist"}, "edited": false, "score": 0, "creation_date": 1438201007, "post_id": 31710209, "comment_id": 51358616, "body": "Yes, certainly the provided sample can be optimized."}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1438203075, "post_id": 31710209, "comment_id": 51359723, "body": "You can also <code>c = dict((i, V[i]) for i in ID)</code>,  you don&#39;t need to build the list first"}], "tags": [], "owner": {"reputation": 11357, "user_id": 584846, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/uD1uQ.jpg?s=128&g=1", "display_name": "Brent Washburne", "link": "https://stackoverflow.com/users/584846/brent-washburne"}, "is_accepted": false, "score": 3, "last_activity_date": 1438200710, "creation_date": 1438200710, "answer_id": 31710209, "question_id": 31710124, "link": "https://stackoverflow.com/questions/31710124/is-there-any-alternative-ways-other-than-loop-to-update-the-dictionary-from-any/31710209#31710209", "title": "Is there any alternative ways other than loop to update the dictionary from any sequence data (Python)?", "body": "<p>No, you can't avoid a loop but you can try these alternatives:</p>\n\n<pre><code>c = { }\nfor i in ID :\n    c[i] = V[i]\n</code></pre>\n\n<p>or</p>\n\n<pre><code>c = dict([(i, V[i]) for i in ID])\n</code></pre>\n\n<p>or</p>\n\n<pre><code>c = {i: V[i] for i in ID}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 499, "user_id": 3758685, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/8c625e71f72e1e12c504ff0499241127?s=128&d=identicon&r=PG&f=1", "display_name": "Faizalprbw", "link": "https://stackoverflow.com/users/3758685/faizalprbw"}, "edited": false, "score": 0, "creation_date": 1438203207, "post_id": 31710462, "comment_id": 51359810, "body": "Thanks for your answer, it&#39;s faster 5 second"}], "tags": [], "owner": {"reputation": 1427, "user_id": 875667, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/6fad833ca0573689b3ff4a6bf7868268?s=128&d=identicon&r=PG", "display_name": "wtayyeb", "link": "https://stackoverflow.com/users/875667/wtayyeb"}, "is_accepted": true, "score": 0, "last_activity_date": 1438202461, "last_edit_date": 1438202461, "creation_date": 1438201650, "answer_id": 31710462, "question_id": 31710124, "link": "https://stackoverflow.com/questions/31710124/is-there-any-alternative-ways-other-than-loop-to-update-the-dictionary-from-any/31710462#31710462", "title": "Is there any alternative ways other than loop to update the dictionary from any sequence data (Python)?", "body": "<p>the short way of your code is:</p>\n\n<pre><code>c.update({i:V[i] for i in ID})\n</code></pre>\n\n<p>also you could use <code>map</code>, but it will iterate over </p>\n\n<pre><code>c.update(dict(map(lambda i:(i,V[i]),ID)))\n</code></pre>\n\n<p>Its all O(n) and you could just move it into <code>C</code> part rather than Python by using above notations!</p>\n"}], "owner": {"reputation": 499, "user_id": 3758685, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/8c625e71f72e1e12c504ff0499241127?s=128&d=identicon&r=PG&f=1", "display_name": "Faizalprbw", "link": "https://stackoverflow.com/users/3758685/faizalprbw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 31710462, "answer_count": 2, "score": 1, "last_activity_date": 1438202461, "creation_date": 1438200388, "question_id": 31710124, "link": "https://stackoverflow.com/questions/31710124/is-there-any-alternative-ways-other-than-loop-to-update-the-dictionary-from-any", "title": "Is there any alternative ways other than loop to update the dictionary from any sequence data (Python)?", "body": "<p>I have a code to update a dictionary like this :</p>\n\n<pre><code>c = { }\nfor i in ID :\n    d = {i : V[i]}\n    c.update(d)\n</code></pre>\n\n<p>Both ID and V are sequence data with a complex and huge items, where ID is a list and V is a dictionary.</p>\n\n<p>Is there any ways in python to do that logic without using loop processes like \"for\"? </p>\n\n<p>The use of loop processes take a lot of iteration impacted on run time.</p>\n"}, {"tags": ["python", "function", "if-statement"], "comments": [{"owner": {"reputation": 7673, "user_id": 3004881, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lFgVw.jpg?s=128&g=1", "display_name": "Dan Getz", "link": "https://stackoverflow.com/users/3004881/dan-getz"}, "edited": false, "score": 2, "creation_date": 1438200312, "post_id": 31710075, "comment_id": 51358187, "body": "No, that&#39;s not the case. See <a href=\"https://docs.python.org/3/tutorial/controlflow.html#if-statements\" rel=\"nofollow noreferrer\">what the official tutorial says about the <code>if</code> statement</a>."}, {"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 4, "creation_date": 1438200317, "post_id": 31710075, "comment_id": 51358190, "body": "It looks like you have a fundamental misunderstanding about <a href=\"https://docs.python.org/3.4/tutorial/controlflow.html#defining-functions\" rel=\"nofollow noreferrer\">functions</a> and <a href=\"https://docs.python.org/3.4/tutorial/controlflow.html#if-statements\" rel=\"nofollow noreferrer\"><code>if</code> statements</a>."}, {"owner": {"reputation": 2896, "user_id": 5031339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82ce3852cc31d052ce2568e3a777875a?s=128&d=identicon&r=PG", "display_name": "NightShadeQueen", "link": "https://stackoverflow.com/users/5031339/nightshadequeen"}, "edited": false, "score": 1, "creation_date": 1438200368, "post_id": 31710075, "comment_id": 51358221, "body": "Happy and sad are probably <a href=\"http://stackoverflow.com/a/19131217/5031339\">functions</a>"}, {"owner": {"reputation": 2441, "user_id": 1539142, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/LX6Ke.png?s=128&g=1", "display_name": "StephenTG", "link": "https://stackoverflow.com/users/1539142/stephentg"}, "reply_to_user": {"reputation": 31962, "user_id": 478288, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a838e5ef0f378f35f9c7875ec37f647?s=128&d=identicon&r=PG", "display_name": "chrisaycock", "link": "https://stackoverflow.com/users/478288/chrisaycock"}, "edited": false, "score": 1, "creation_date": 1438200458, "post_id": 31710075, "comment_id": 51358279, "body": "@chrisaycock I think you&#39;re thinking of a different kind of assignment than the OP"}], "answers": [{"tags": [], "owner": {"reputation": 2441, "user_id": 1539142, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/LX6Ke.png?s=128&g=1", "display_name": "StephenTG", "link": "https://stackoverflow.com/users/1539142/stephentg"}, "is_accepted": false, "score": 5, "last_activity_date": 1438200370, "creation_date": 1438200370, "answer_id": 31710119, "question_id": 31710075, "link": "https://stackoverflow.com/questions/31710075/python-if-vs-if/31710119#31710119", "title": "Python if( ): vs if:", "body": "<p>In the example given, <code>happy()</code> and <code>sad()</code> are functions, and as such require parentheses. The <code>if</code> itself does not need parentheses at the end (and it shouldn't have them)</p>\n"}, {"tags": [], "owner": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "is_accepted": false, "score": 4, "last_activity_date": 1438258793, "last_edit_date": 1438258793, "creation_date": 1438200464, "answer_id": 31710144, "question_id": 31710075, "link": "https://stackoverflow.com/questions/31710075/python-if-vs-if/31710144#31710144", "title": "Python if( ): vs if:", "body": "<p>No, <code>if</code> has nothing to do with <code>()</code></p>\n\n<p><code>happy</code> is a function. <code>happy()</code> is a call to that function. So, <code>if happy():</code> tests if the <code>happy</code> function returns true when called.</p>\n\n<p>In other words, <code>if happy(): speak(\"I'm happy!\")</code> is equivalent to</p>\n\n<pre><code>result_of_happy = happy()\nif result_of_happy:\n    speak(\"I'm happy!\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1435, "user_id": 2266535, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/12d6908d0a13ab552066af3a863adf79?s=128&d=identicon&r=PG", "display_name": "user204088", "link": "https://stackoverflow.com/users/2266535/user204088"}, "is_accepted": false, "score": 2, "last_activity_date": 1438201616, "creation_date": 1438201616, "answer_id": 31710448, "question_id": 31710075, "link": "https://stackoverflow.com/questions/31710075/python-if-vs-if/31710448#31710448", "title": "Python if( ): vs if:", "body": "<p>As has been mentioned <code>happy() / sad()</code> are functions so they require <code>()</code>. In example two of your question you are comparing your value to the string <code>\"yes\"</code> because it is a string it does not require <code>()</code>.</p>\n\n<p>Within an <code>if</code> statement you can use parentheses to make the code more readable and ensure certain operations are evaluated before others.</p>\n\n<pre><code>if (1+1)*2 == 4:\n    print 'here'\nelse:\n    print 'there'\n</code></pre>\n\n<p>Differs from:</p>\n\n<pre><code>if 1+1*2 == 4:\n    print 'here'\nelse:\n    print 'there'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 41564, "user_id": 8708364, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nMdFT.jpg?s=128&g=1", "display_name": "U11-Forward", "link": "https://stackoverflow.com/users/8708364/u11-forward"}, "is_accepted": false, "score": 0, "last_activity_date": 1537684056, "creation_date": 1537684056, "answer_id": 52463589, "question_id": 31710075, "link": "https://stackoverflow.com/questions/31710075/python-if-vs-if/52463589#52463589", "title": "Python if( ): vs if:", "body": "<p>Because string objects are not callable so what are you expecting then:</p>\n\n<p>Then use <code>lambda</code> not that efficient tho:</p>\n\n<pre><code>def shut_down(s):\n    if (lambda: s == \"yes\")():\n        return \"Shutting down\"\n    elif (lambda: s == \"no\")():\n        return \"Shutdown aborted\"\n    else:\n        return \"Sorry\"\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 5133902, "user_type": "registered", "profile_image": "https://graph.facebook.com/693753124091361/picture?type=large", "display_name": "Koda James", "link": "https://stackoverflow.com/users/5133902/koda-james"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 463, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1537684056, "creation_date": 1438200225, "question_id": 31710075, "link": "https://stackoverflow.com/questions/31710075/python-if-vs-if", "title": "Python if( ): vs if:", "body": "<p>On Code Academy there is this course where in the example they show</p>\n\n<pre><code>def speak(message):\n    return message\n\nif happy():\n    speak(\"I'm happy!\")\nelif sad():\n    speak(\"I'm sad.\")\nelse:\n    speak(\"I don't know what I'm feeling.\")\n</code></pre>\n\n<p>The above example will <strong>NOT</strong> be related to the rest of the code I show. That was just an example for the <code>if</code> statement. Now I was under the impression that when ever writing an <code>if</code> statement it had to end in an <code>():</code>like the above example.</p>\n\n<p>However when doing the assignments this does not work:</p>\n\n<pre><code>def shut_down(s):\n    if s == \"yes\"():\n        return \"Shutting down\"\n    elif s == \"no\"():\n        return \"Shutdown aborted\"\n    else:\n        return \"Sorry\"\n</code></pre>\n\n<p>However this works:</p>\n\n<pre><code>def shut_down(s):\n    if s == \"yes\":\n        return \"Shutting down\"\n    elif s == \"no\":\n        return \"Shutdown aborted\"\n    else:\n        return \"Sorry\"\n</code></pre>\n\n<p>My question is how come the <code>()</code> is not needed next to the <code>\"yes\"</code> and <code>\"no</code>\" but <code>:</code>is still needed. I thought whenever writing an <code>if</code> statement it will automatically have to end with <code>():</code>. In that very first example, that's how it is shown. Do you understand my confusion.</p>\n"}, {"tags": ["python", "python-2.7", "loops", "nested-lists"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 1, "creation_date": 1438200247, "post_id": 31710073, "comment_id": 51358151, "body": "Where&#39;s your code, and what precisely is the problem with it? Please see <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>."}, {"owner": {"reputation": 568, "user_id": 3650779, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2da05e812974bc6debedbe4f9e824680?s=128&d=identicon&r=PG&f=1", "display_name": "preezzzy", "link": "https://stackoverflow.com/users/3650779/preezzzy"}, "reply_to_user": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1438201659, "post_id": 31710073, "comment_id": 51358956, "body": "My code will not help in this situation. The question is clear. I want to combine the lists as shown. Nothing from the list can be assumed except each sublist will have only 2 elements. The first element being an identifier of sorts."}], "answers": [{"tags": [], "owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "is_accepted": true, "score": 0, "last_activity_date": 1438202414, "last_edit_date": 1438202414, "creation_date": 1438201902, "answer_id": 31710530, "question_id": 31710073, "link": "https://stackoverflow.com/questions/31710073/combining-2-lists-in-strange-way/31710530#31710530", "title": "Combining 2 lists in strange way", "body": "<p>If you want unique values and to combine any length lists:</p>\n\n<pre><code>from itertools import chain, izip_longest,ifilter\nobj = object()\nfrom collections import OrderedDict\n\nprint([list(ifilter(lambda x: x is not obj, OrderedDict.fromkeys(chain.from_iterable(tup))))\n       for tup in (tup for tup in izip_longest(l1,l2,fillvalue=[obj]))])\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>[[1.0, 100.0, 20.0], [2.0, 100.0, 20.0], [3.0, 100.0, 0.0], [4.0, 100.0], [5.0, 100.0]]\n</code></pre>\n\n<p>If order is irrelevant you can call <code>set</code> on the tup instead of OrderedDict.</p>\n"}], "owner": {"reputation": 568, "user_id": 3650779, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2da05e812974bc6debedbe4f9e824680?s=128&d=identicon&r=PG&f=1", "display_name": "preezzzy", "link": "https://stackoverflow.com/users/3650779/preezzzy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "closed_date": 1438255091, "accepted_answer_id": 31710530, "answer_count": 1, "score": 0, "last_activity_date": 1438202414, "creation_date": 1438200215, "question_id": 31710073, "link": "https://stackoverflow.com/questions/31710073/combining-2-lists-in-strange-way", "closed_reason": "Needs details or clarity", "title": "Combining 2 lists in strange way", "body": "<p>Say I have these two lists of lists.</p>\n\n<pre><code>[[1.0, 100.0], [2.0, 100.0], [3.0, 100.0], [4.0, 100.0], [5.0, 100.0]]\n[[1.0, 20.0], [2.0, 20.0], [3.0, 0.0]]\n</code></pre>\n\n<p>Note the different sizes, I want to combine them to create the list below</p>\n\n<pre><code>[[1.0, 100.0, 20.0], [2.0, 100.0, 20.0], [3.0, 100.0, 0.0], [4.0, 100.0], [5.0, 100.0]]\n</code></pre>\n\n<p>Their can be any number of lists and they can be of any length.</p>\n"}, {"tags": ["python", "unit-testing", "testing", "flask"], "comments": [{"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1438200782, "post_id": 31710064, "comment_id": 51358495, "body": "Did you read the <a href=\"http://flask.pocoo.org/docs/0.10/testing/\" rel=\"nofollow noreferrer\">testing chapter</a> of the Flask documentation? Just use a <code>app.test_client()</code> object to run URL paths against your app."}], "answers": [{"tags": [], "owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "is_accepted": true, "score": 20, "last_activity_date": 1558396131, "last_edit_date": 1558396131, "creation_date": 1438201387, "answer_id": 31710385, "question_id": 31710064, "link": "https://stackoverflow.com/questions/31710064/testing-flask-routes-do-and-dont-exist/31710385#31710385", "title": "Testing Flask routes do and don&#39;t exist", "body": "<p>Use the <a href=\"http://flask.pocoo.org/docs/latest/api/#flask.Flask.test_client\" rel=\"noreferrer\"><code>Flask.test_client()</code> object</a> in your unittests. The method returns a <a href=\"http://flask.pocoo.org/docs/latest/api/#flask.testing.FlaskClient\" rel=\"noreferrer\"><code>FlaskClient</code> instance</a> (a <a href=\"http://werkzeug.palletsprojects.com/en/0.15.x/test/#werkzeug.test.Client\" rel=\"noreferrer\"><code>werkzeug.test.TestClient</code> subclass</a>), making it trivial to test routes.</p>\n\n<p>The result of a call to the <code>TestClient</code> is a <a href=\"http://flask.pocoo.org/docs/latest/api/#flask.Response\" rel=\"noreferrer\"><code>Response</code> object</a>, to see if it as 200 or 404 response test the <a href=\"http://flask.pocoo.org/docs/latest/api/#flask.Response.status_code\" rel=\"noreferrer\"><code>Response.status_code</code> attribute</a>:</p>\n\n<pre><code>with app.test_client() as c:\n    response = c.get('/some/path/that/exists')\n    self.assertEquals(response.status_code, 200)\n</code></pre>\n\n<p>or</p>\n\n<pre><code>with app.test_client() as c:\n    response = c.get('/some/path/that/doesnt/exist')\n    self.assertEquals(response.status_code, 404)\n</code></pre>\n\n<p>See the <a href=\"http://flask.pocoo.org/docs/latest/testing/#testing\" rel=\"noreferrer\"><em>Testing Flask Applications</em> chapter</a> of the Flask documentation.</p>\n"}, {"tags": [], "owner": {"reputation": 12459, "user_id": 2890724, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/or6PX.jpg?s=128&g=1", "display_name": "Raydel Miranda", "link": "https://stackoverflow.com/users/2890724/raydel-miranda"}, "is_accepted": false, "score": 3, "last_activity_date": 1519671288, "creation_date": 1519671288, "answer_id": 48995204, "question_id": 31710064, "link": "https://stackoverflow.com/questions/31710064/testing-flask-routes-do-and-dont-exist/48995204#48995204", "title": "Testing Flask routes do and don&#39;t exist", "body": "<p>Martjin's answer surely solve your issue, but some times you don't have the time (or will) to mock all the components you call in a route you want to test for existence.</p>\n\n<p><strong>And why would you need to mock?</strong>  Well, the call <code>get('some_route')</code>  will first check for this route to exists and then ...  it will be executed!</p>\n\n<p>If the view is a complex one and you need to have fixtures, envs variables and any other preparation just for test if the route exists, then you need to think again about your test design.</p>\n\n<h2>How to avoid this:</h2>\n\n<p>You can list all the routes in your app. An check the one you're testing is in the list.</p>\n\n<p>In the following example, you can see this in practice with the implementation of a site-map.</p>\n\n<pre><code>from flask import Flask, url_for\n\napp = Flask(__name__)\n\ndef has_no_empty_params(rule):\n    defaults = rule.defaults if rule.defaults is not None else ()\n    arguments = rule.arguments if rule.arguments is not None else ()\n    return len(defaults) &gt;= len(arguments)\n\n\n@app.route(\"/site-map\")\ndef site_map():\n    links = []\n    for rule in app.url_map.iter_rules():\n        # Filter out rules we can't navigate to in a browser\n        # and rules that require parameters\n        if \"GET\" in rule.methods and has_no_empty_params(rule):\n            url = url_for(rule.endpoint, **(rule.defaults or {}))\n            links.append((url, rule.endpoint))\n    # links is now a list of url, endpoint tuples\n</code></pre>\n\n<p>references: </p>\n\n<p><a href=\"https://stackoverflow.com/questions/13317536/get-a-list-of-all-routes-defined-in-the-app\">get a list of all routes defined in the app</a></p>\n\n<p><a href=\"http://flask.pocoo.org/snippets/117/\" rel=\"nofollow noreferrer\">Helper to list routes (like Rail's rake routes)</a></p>\n"}, {"tags": [], "owner": {"reputation": 719, "user_id": 3076610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/YIvpb.jpg?s=128&g=1", "display_name": "miso", "link": "https://stackoverflow.com/users/3076610/miso"}, "is_accepted": false, "score": 2, "last_activity_date": 1535649643, "creation_date": 1535649643, "answer_id": 52102424, "question_id": 31710064, "link": "https://stackoverflow.com/questions/31710064/testing-flask-routes-do-and-dont-exist/52102424#52102424", "title": "Testing Flask routes do and don&#39;t exist", "body": "<p>Another way of testing a URL without executing the attached view function is using the method <a href=\"http://werkzeug.pocoo.org/docs/0.14/routing/#werkzeug.routing.MapAdapter.match\" rel=\"nofollow noreferrer\"><strong><code>match</code></strong></a> of <a href=\"http://werkzeug.pocoo.org/docs/0.14/routing/#werkzeug.routing.MapAdapter\" rel=\"nofollow noreferrer\"><strong><code>MapAdapter</code></strong></a>.</p>\n\n<pre><code>from flask import Flask\n\napp = Flask(__name__)\n\n@app.route('/users')\ndef list_users():\n    return ''\n\n@app.route('/users/&lt;int:id&gt;')\ndef get_user(id):\n    return ''\n</code></pre>\n\n<h1>Testing</h1>\n\n<pre><code># Get a new MapAdapter instance. For testing purpose, an empty string is fine\n# for the server name.\nadapter = app.url_map.bind('')\n\n# This raise werkzeug.exceptions.NotFound.\nadapter.match('/unknown')\n\n# This raises werkzeug.exceptions.MethodNotAllowed,\n# Although the route exists, the POST method was not defined.\nadapter.match('/users', method='POST')\n\n# No exception occurs when there is a match..\nadapter.match('/users')\nadapter.match('/users/1')\n</code></pre>\n\n<p>From Werkzeug documentation:</p>\n\n<blockquote>\n  <p>you get a tuple in the form (endpoint, arguments) if there is a match.</p>\n</blockquote>\n\n<p>Which may be useful in certain testing scenarios.</p>\n"}], "owner": {"reputation": 745, "user_id": 982745, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/bc5ef5691c6a62f116d2c5c02de94d9b?s=128&d=identicon&r=PG", "display_name": "Tim Hopper", "link": "https://stackoverflow.com/users/982745/tim-hopper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10670, "favorite_count": 3, "accepted_answer_id": 31710385, "answer_count": 3, "score": 11, "last_activity_date": 1558396131, "creation_date": 1438200180, "last_edit_date": 1528373069, "question_id": 31710064, "link": "https://stackoverflow.com/questions/31710064/testing-flask-routes-do-and-dont-exist", "title": "Testing Flask routes do and don&#39;t exist", "body": "<p>I'm creating a large number of Flask routes <a href=\"https://stackoverflow.com/questions/5870188/does-flask-support-regular-expressions-in-its-url-routing\">using regular expressions</a>. I'd like to have a unit test that checks that the correct routes exist and that incorrect routes 404. </p>\n\n<p>One way of doing this would be to spin up a local server and use <code>urllib2.urlopen</code> or the like. However, I'd like to be able to run this test on Travis, and I'm assuming that's not an option. </p>\n\n<p>Is there another way for me to test routes on my application?</p>\n"}, {"tags": ["python", "for-loop"], "comments": [{"owner": {"reputation": 3348, "user_id": 2388906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b6935981743ccf71ff0b66d19c4d747?s=128&d=identicon&r=PG", "display_name": "Gnarlywhale", "link": "https://stackoverflow.com/users/2388906/gnarlywhale"}, "edited": false, "score": 0, "creation_date": 1438200151, "post_id": 31710035, "comment_id": 51358101, "body": "<a href=\"http://stackoverflow.com/help/how-to-ask\">Please check out the faq on how to ask a proper question before posting</a>"}, {"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 2, "creation_date": 1438200219, "post_id": 31710035, "comment_id": 51358127, "body": "Move your <code>return count</code> back out a tab."}, {"owner": {"reputation": 3141, "user_id": 4561047, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/637eff3f3244f3658d31a25ea7636d82?s=128&d=identicon&r=PG", "display_name": "intcreator", "link": "https://stackoverflow.com/users/4561047/intcreator"}, "edited": false, "score": 0, "creation_date": 1438200355, "post_id": 31710035, "comment_id": 51358215, "body": "There are forums on Codecademy which usually address common issues with the exercises.  In the bottom left corner, click &quot;Q&amp;A Forum&quot;"}, {"owner": {"reputation": 5151, "user_id": 2535242, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/a10b5101fc63f6d6d62de5784b75142e?s=128&d=identicon&r=PG", "display_name": "La-comadreja", "link": "https://stackoverflow.com/users/2535242/la-comadreja"}, "edited": false, "score": 0, "creation_date": 1438200623, "post_id": 31710035, "comment_id": 51358390, "body": "this question is legit.  It&#39;s easy to get caught on Python indentation syntax if you&#39;re new.  And the level of meaning ascribed to indentation makes Python different from many other languages."}, {"owner": {"reputation": 15, "user_id": 4182086, "user_type": "registered", "profile_image": "https://graph.facebook.com/100005368749460/picture?type=large", "display_name": "Kisal Randula Senadeera", "link": "https://stackoverflow.com/users/4182086/kisal-randula-senadeera"}, "edited": false, "score": 0, "creation_date": 1438484491, "post_id": 31710035, "comment_id": 51467893, "body": "thanx a lot for helping me to improve, seriously I&#39;m new to stackoverflow as well as python"}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 4182086, "user_type": "registered", "profile_image": "https://graph.facebook.com/100005368749460/picture?type=large", "display_name": "Kisal Randula Senadeera", "link": "https://stackoverflow.com/users/4182086/kisal-randula-senadeera"}, "edited": false, "score": 0, "creation_date": 1438484339, "post_id": 31710090, "comment_id": 51467877, "body": "thanx a lot, I only knew some java before started learning python ,so I couldn&#39;t recognize the whitespace problem"}], "tags": [], "owner": {"reputation": 5778, "user_id": 4790988, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/fvtDA.jpg?s=128&g=1", "display_name": "Dima  Kudosh", "link": "https://stackoverflow.com/users/4790988/dima-kudosh"}, "is_accepted": false, "score": 2, "last_activity_date": 1438200266, "creation_date": 1438200266, "answer_id": 31710090, "question_id": 31710035, "link": "https://stackoverflow.com/questions/31710035/counting-using-for-loops-in-python/31710090#31710090", "title": "Counting using for loops in Python", "body": "<pre><code>def fizz_count(x):\n    count=0\n    for item in x:\n        if item=='fizz':\n             count +=1\n    return count\n</code></pre>\n\n<p>In your code function return result in first for iteration where count = 0</p>\n"}, {"comments": [{"owner": {"reputation": 15, "user_id": 4182086, "user_type": "registered", "profile_image": "https://graph.facebook.com/100005368749460/picture?type=large", "display_name": "Kisal Randula Senadeera", "link": "https://stackoverflow.com/users/4182086/kisal-randula-senadeera"}, "edited": false, "score": 0, "creation_date": 1438484369, "post_id": 31710106, "comment_id": 51467880, "body": "thanx a lot, I only knew some java before started learning python ,so I couldn&#39;t recognize the whitespace problem"}], "tags": [], "owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "is_accepted": false, "score": 4, "last_activity_date": 1438200723, "last_edit_date": 1438200723, "creation_date": 1438200314, "answer_id": 31710106, "question_id": 31710035, "link": "https://stackoverflow.com/questions/31710035/counting-using-for-loops-in-python/31710106#31710106", "title": "Counting using for loops in Python", "body": "<p>You are returning after the first iteration, you need to loop over all the elements, then return outside the loop:</p>\n\n<pre><code>def fizz_count(x):\n    count=0\n    for item in x:\n        if item=='fizz':\n             count +=1\n    return count # outside the loop\n</code></pre>\n\n<p>The first element in x is <code>\"buzz\"</code>, you are returning inside the loop so you only check that first element and return count which is <code>0</code>, moving  the return outside the loop means you check every element in <code>x</code>.</p>\n\n<p>Your code can be simplified to a returning a generator expression using <a href=\"https://docs.python.org/2/library/functions.html#sum\" rel=\"nofollow\">sum</a>:</p>\n\n<pre><code>def fizz_count(x):\n   return sum(s == \"fizz\" for s in x)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 15, "user_id": 4182086, "user_type": "registered", "profile_image": "https://graph.facebook.com/100005368749460/picture?type=large", "display_name": "Kisal Randula Senadeera", "link": "https://stackoverflow.com/users/4182086/kisal-randula-senadeera"}, "edited": false, "score": 0, "creation_date": 1438484359, "post_id": 31710135, "comment_id": 51467879, "body": "thanx a lot, I only knew some java before started learning python ,so I couldn&#39;t recognize the whitespace problem"}], "tags": [], "owner": {"reputation": 5151, "user_id": 2535242, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/a10b5101fc63f6d6d62de5784b75142e?s=128&d=identicon&r=PG", "display_name": "La-comadreja", "link": "https://stackoverflow.com/users/2535242/la-comadreja"}, "is_accepted": false, "score": 0, "last_activity_date": 1438200756, "last_edit_date": 1438200756, "creation_date": 1438200437, "answer_id": 31710135, "question_id": 31710035, "link": "https://stackoverflow.com/questions/31710035/counting-using-for-loops-in-python/31710135#31710135", "title": "Counting using for loops in Python", "body": "<p>Your problem is that</p>\n\n<pre><code>return count\n</code></pre>\n\n<p>is breaking out of fizzCount after the first iteration of the loop, when only the first \"buzz\" was value-checked.  Thus, count did not have a chance to increment.</p>\n\n<p>Python is a bit different from other languages - it uses indentation level where other languages might use brackets, do/end or other non-whitespace characters to represent the scope of methods and blocks.  This can be a bit confusing for newcomers, and it looks like this is where you were caught.</p>\n\n<p>Unindent <code>return count</code> by 1 tab so it is called after the loop ends.</p>\n"}], "owner": {"reputation": 15, "user_id": 4182086, "user_type": "registered", "profile_image": "https://graph.facebook.com/100005368749460/picture?type=large", "display_name": "Kisal Randula Senadeera", "link": "https://stackoverflow.com/users/4182086/kisal-randula-senadeera"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "answer_count": 3, "score": -6, "last_activity_date": 1438202199, "creation_date": 1438200075, "last_edit_date": 1438202199, "question_id": 31710035, "link": "https://stackoverflow.com/questions/31710035/counting-using-for-loops-in-python", "title": "Counting using for loops in Python", "body": "<p>I am trying to count the number of times <code>'fizz'</code> appears in a list.</p>\n\n<pre><code>def fizz_count(x):\n    count=0\n    for item in x:\n        if item=='fizz':\n             count +=1\n        return count\n</code></pre>\n\n<p>This python program returns:</p>\n\n<p><code>\"Oops, try again. fizz_count(['buzz', 'buzz', 'fizz', 'buzz']) returned 0 instead of the correct answer: 1\"</code></p>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["python", "unit-testing", "attributes", "mocking", "python-unittest"], "comments": [{"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 1, "creation_date": 1438199847, "post_id": 31709792, "comment_id": 51357927, "body": "That would require the mock to create an instance of the class. That&#39;s never a good idea, because that would require it to execute the code you were trying to replace with a mock in the first place."}], "answers": [{"comments": [{"owner": {"reputation": 1199, "user_id": 1964325, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/fcbe6081d328a42db28146168881f891?s=128&d=identicon&r=PG", "display_name": "Clandestine", "link": "https://stackoverflow.com/users/1964325/clandestine"}, "edited": false, "score": 1, "creation_date": 1438205352, "post_id": 31710001, "comment_id": 51360952, "body": "Yeah, not sure how I missed that. It was pretty explicit. I guess that&#39;s what I will have to do. I was hoping to avoid that so that the test would verify the proper use of the Consul class. I suppose I&#39;ll have to rely on heavier-handed integration tests for that."}, {"owner": {"reputation": 2123, "user_id": 3285138, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ac2d07bd184ab149c3352880f147627c?s=128&d=identicon&r=PG&f=1", "display_name": "goelakash", "link": "https://stackoverflow.com/users/3285138/goelakash"}, "edited": false, "score": 0, "creation_date": 1618348113, "post_id": 31710001, "comment_id": 118574174, "body": "I think in the first code snippet, you meant <code>autospec=Foo</code> and not <code>autospec=TestFoo</code>"}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "reply_to_user": {"reputation": 2123, "user_id": 3285138, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ac2d07bd184ab149c3352880f147627c?s=128&d=identicon&r=PG&f=1", "display_name": "goelakash", "link": "https://stackoverflow.com/users/3285138/goelakash"}, "edited": false, "score": 0, "creation_date": 1618380823, "post_id": 31710001, "comment_id": 118580661, "body": "@goelakash: yup, good catch!"}], "tags": [], "owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "is_accepted": true, "score": 55, "last_activity_date": 1618380808, "last_edit_date": 1618380808, "creation_date": 1438199981, "answer_id": 31710001, "question_id": 31709792, "link": "https://stackoverflow.com/questions/31709792/patching-a-class-yields-attributeerror-mock-object-has-no-attribute-when-acce/31710001#31710001", "title": "patching a class yields &quot;AttributeError: Mock object has no attribute&quot; when accessing instance attributes", "body": "<p>No, autospeccing cannot mock out attributes set in the <code>__init__</code> method of the original class (or in any other method). It can only mock out <em>static attributes</em>, everything that can be found on the class.</p>\n<p>Otherwise, the mock would have to create an instance of the class you tried to replace with a mock in the first place, which is not a good idea (think classes that create a lot of real resources when instantiated).</p>\n<p>The recursive nature of an auto-specced mock is then limited to those static attributes; if <code>foo</code> is a class attribute, accessing <code>Foo().foo</code> will return an auto-specced mock for that attribute. If you have a class <code>Spam</code> whose <code>eggs</code> attribute is an object of type <code>Ham</code>, then the mock of <code>Spam.eggs</code> will be an auto-specced mock of the <code>Ham</code> class.</p>\n<p>The <a href=\"https://docs.python.org/3/library/unittest.mock.html#autospeccing\" rel=\"nofollow noreferrer\">documentation you read</a> <em>explicitly</em> covers this:</p>\n<blockquote>\n<p>A more serious problem is that it is common for instance attributes to be created in the <code>__init__</code> method and not to exist on the class at all. <code>autospec</code> can\u2019t know about any dynamically created attributes and restricts the api to visible attributes.</p>\n</blockquote>\n<p>You should just <em>set</em> the missing attributes yourself:</p>\n<pre><code>@patch('foo.Foo', autospec=Foo)\ndef test_patched(self, mock_Foo):\n    mock_Foo.return_value.foo = 'foo'\n    Bar().bar()\n</code></pre>\n<p>or create a subclass of your <code>Foo</code> class for testing purposes that adds the attribute as a class attribute:</p>\n<pre><code>class TestFoo(foo.Foo):\n    foo = 'foo'  # class attribute\n\n@patch('foo.Foo', autospec=TestFoo)\ndef test_patched(self, mock_Foo):\n    Bar().bar()\n</code></pre>\n"}], "owner": {"reputation": 1199, "user_id": 1964325, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/fcbe6081d328a42db28146168881f891?s=128&d=identicon&r=PG", "display_name": "Clandestine", "link": "https://stackoverflow.com/users/1964325/clandestine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48867, "favorite_count": 10, "accepted_answer_id": 31710001, "answer_count": 1, "score": 51, "last_activity_date": 1618380808, "creation_date": 1438199241, "last_edit_date": 1512081537, "question_id": 31709792, "link": "https://stackoverflow.com/questions/31709792/patching-a-class-yields-attributeerror-mock-object-has-no-attribute-when-acce", "title": "patching a class yields &quot;AttributeError: Mock object has no attribute&quot; when accessing instance attributes", "body": "<p><strong>The Problem</strong><br>\nUsing <code>mock.patch</code> with <code>autospec=True</code> to patch a class is not preserving attributes of instances of that class.</p>\n\n<p><strong>The Details</strong><br>\nI am trying to test a class <code>Bar</code> that instantiates an instance of class <code>Foo</code> as a <code>Bar</code> object attribute called <code>foo</code>. The <code>Bar</code> method under test is called <code>bar</code>; it calls method <code>foo</code> of the <code>Foo</code> instance belonging to <code>Bar</code>. In testing this, I am mocking <code>Foo</code>, as I only want to test that <code>Bar</code> is accessing the correct <code>Foo</code> member:</p>\n\n<pre><code>import unittest\nfrom mock import patch\n\nclass Foo(object):\n    def __init__(self):\n        self.foo = 'foo'\n\nclass Bar(object):\n    def __init__(self):\n        self.foo = Foo()\n\n    def bar(self):\n        return self.foo.foo\n\nclass TestBar(unittest.TestCase):\n    @patch('foo.Foo', autospec=True)\n    def test_patched(self, mock_Foo):\n        Bar().bar()\n\n    def test_unpatched(self):\n        assert Bar().bar() == 'foo'\n</code></pre>\n\n<p>The classes and methods work just fine (<code>test_unpatched</code> passes), but when I try to Foo in a test case (tested using both nosetests and pytest) using <code>autospec=True</code>, I encounter \"AttributeError: Mock object has no attribute 'foo'\"</p>\n\n<pre><code>19:39 $ nosetests -sv foo.py\ntest_patched (foo.TestBar) ... ERROR\ntest_unpatched (foo.TestBar) ... ok\n\n======================================================================\nERROR: test_patched (foo.TestBar)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/usr/local/lib/python2.7/dist-packages/mock.py\", line 1201, in patched\n    return func(*args, **keywargs)\n  File \"/home/vagrant/dev/constellation/test/foo.py\", line 19, in test_patched\n    Bar().bar()\n  File \"/home/vagrant/dev/constellation/test/foo.py\", line 14, in bar\n    return self.foo.foo\n  File \"/usr/local/lib/python2.7/dist-packages/mock.py\", line 658, in __getattr__\n    raise AttributeError(\"Mock object has no attribute %r\" % name)\nAttributeError: Mock object has no attribute 'foo'\n</code></pre>\n\n<p>Indeed, when I print out <code>mock_Foo.return_value.__dict__</code>, I can see that <code>foo</code> is not in the list of children or methods:</p>\n\n<pre><code>{'_mock_call_args': None,\n '_mock_call_args_list': [],\n '_mock_call_count': 0,\n '_mock_called': False,\n '_mock_children': {},\n '_mock_delegate': None,\n '_mock_methods': ['__class__',\n                   '__delattr__',\n                   '__dict__',\n                   '__doc__',\n                   '__format__',\n                   '__getattribute__',\n                   '__hash__',\n                   '__init__',\n                   '__module__',\n                   '__new__',\n                   '__reduce__',\n                   '__reduce_ex__',\n                   '__repr__',\n                   '__setattr__',\n                   '__sizeof__',\n                   '__str__',\n                   '__subclasshook__',\n                   '__weakref__'],\n '_mock_mock_calls': [],\n '_mock_name': '()',\n '_mock_new_name': '()',\n '_mock_new_parent': &lt;MagicMock name='Foo' spec='Foo' id='38485392'&gt;,\n '_mock_parent': &lt;MagicMock name='Foo' spec='Foo' id='38485392'&gt;,\n '_mock_wraps': None,\n '_spec_class': &lt;class 'foo.Foo'&gt;,\n '_spec_set': None,\n 'method_calls': []}\n</code></pre>\n\n<p>My understanding of autospec is that, if True, the patch specs should apply recursively. Since foo is indeed an attribute of Foo instances, should it not be patched? If not, how do I get the Foo mock to preserve the attributes of Foo instances?</p>\n\n<p><strong>NOTE:</strong><br>\nThis is a trivial example that shows the basic problem. In reality, I am mocking a third party module.Class -- <code>consul.Consul</code> -- whose client I instantiate in a Consul wrapper class that I have. As I don't maintain the consul module, I can't modify the source to suit my tests (I wouldn't really want to do that anyway). For what it's worth, <code>consul.Consul()</code> returns a consul client, which has an attribute <code>kv</code> -- an instance of <code>consul.Consul.KV</code>. <code>kv</code> has a method <code>get</code>, which I am wrapping in an instance method <code>get_key</code> in my Consul class. After patching <code>consul.Consul</code>, the call to get fails because of AttributeError: Mock object has no attribute kv.</p>\n\n<p><strong>Resources Already Checked:</strong>  </p>\n\n<p><a href=\"http://mock.readthedocs.org/en/latest/helpers.html#autospeccing\">http://mock.readthedocs.org/en/latest/helpers.html#autospeccing</a>\n<a href=\"http://mock.readthedocs.org/en/latest/patch.html\">http://mock.readthedocs.org/en/latest/patch.html</a></p>\n"}, {"tags": ["python", "postgresql", "function"], "answers": [{"tags": [], "owner": {"reputation": 5778, "user_id": 4790988, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/fvtDA.jpg?s=128&g=1", "display_name": "Dima  Kudosh", "link": "https://stackoverflow.com/users/4790988/dima-kudosh"}, "is_accepted": false, "score": 0, "last_activity_date": 1438199452, "creation_date": 1438199452, "answer_id": 31709850, "question_id": 31709748, "link": "https://stackoverflow.com/questions/31709748/execute-returning-none-with-postgresql-in-python/31709850#31709850", "title": "Execute Returning None with PostgreSQL in Python", "body": "<p>try do this </p>\n\n<pre><code>try:\n    cursor.execute(\n    'SELECT measurement_id FROM measurements ORDER BY time desc limit 1;')\n    _measurement_id = cursor.fetchone()\nexcept psycopg2.Error as e:\n    pass\nfinally:\n    cursor.close()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 18146, "user_id": 646619, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bd61a0f309ebc135d2661710c2faf379?s=128&d=identicon&r=PG", "display_name": "Colonel Thirty Two", "link": "https://stackoverflow.com/users/646619/colonel-thirty-two"}, "is_accepted": true, "score": 3, "last_activity_date": 1438199662, "creation_date": 1438199662, "answer_id": 31709905, "question_id": 31709748, "link": "https://stackoverflow.com/questions/31709748/execute-returning-none-with-postgresql-in-python/31709905#31709905", "title": "Execute Returning None with PostgreSQL in Python", "body": "<p><code>cursor.execute</code> doesn't return anything. You need to use <code>cursor.fetchone</code>, <code>cursor.fetchall</code>, or <code>for row in cursor:</code> after executing the query to retrieve the results.</p>\n\n<pre><code>cursor.execute(\"...\")\n_measurement_id = cursor.fetchone()\n</code></pre>\n\n<p>It has nothing to do with exception handling.</p>\n"}], "owner": {"reputation": 118707, "user_id": 54964, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/0VZ1V.png?s=128&g=1", "display_name": "L&#233;o L&#233;opold Hertz \uc900\uc601", "link": "https://stackoverflow.com/users/54964/l%c3%a9o-l%c3%a9opold-hertz-%ec%a4%80%ec%98%81"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1689, "favorite_count": 0, "accepted_answer_id": 31709905, "answer_count": 2, "score": 1, "last_activity_date": 1438200495, "creation_date": 1438199102, "last_edit_date": 1438200495, "question_id": 31709748, "link": "https://stackoverflow.com/questions/31709748/execute-returning-none-with-postgresql-in-python", "title": "Execute Returning None with PostgreSQL in Python", "body": "<p>Here is my code</p>\n\n<pre><code>conn_string = \"dbname=detector user=postgres password=1234 host=localhost port=5432\"\nprint \"Connecting to database\\n    -&gt;%s\" % (conn_string)     \n# get a connection, if a connect cannot be made an exception will be raised here\nconn = psycopg2.connect(conn_string)\n</code></pre>\n\n<p>which it is outputting this, which seems to be ok.</p>\n\n<pre><code>Connecting to database\n    -&gt;dbname=detector user=postgres password=1234 host=localhost port=5432\n</code></pre>\n\n<p>I use this connection as <code>function(data, conn)</code>. \nNow, I noticed strange outputs with the test command:</p>\n\n<pre><code>_measurement_id = cursor.execute(\n    'SELECT measurement_id FROM measurements ORDER BY time desc limit 1;'\n);\n</code></pre>\n\n<p>which returns <code>None</code> through Python but inside <code>psql</code>, I get an integer. \nI think the mistake is in not using try-catch-except in creating the connection.</p>\n\n<p>And if that is the problem, how can I pass a PostgreSQL connection to functions in Python?</p>\n"}, {"tags": ["python", "html", "forms", "flask"], "comments": [{"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1438199146, "post_id": 31709743, "comment_id": 51357528, "body": "You can&#39;t. The <code>id</code> is not part of the form model, it is part of the HTML only. Why do you need it?"}, {"owner": {"reputation": 33, "user_id": 3242656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db67ea91464cced4d95269d28a3f0c20?s=128&d=identicon&r=PG&f=1", "display_name": "Jamil", "link": "https://stackoverflow.com/users/3242656/jamil"}, "reply_to_user": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1438199281, "post_id": 31709743, "comment_id": 51357606, "body": "Dang. Ok thanks. I am hoping to come up with a workaround to my other question... <a href=\"http://stackoverflow.com/questions/31666605/how-can-i-reorder-if-statements-based-on-randomized-form-inputs\" title=\"how can i reorder if statements based on randomized form inputs\">stackoverflow.com/questions/31666605/&hellip;</a>"}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1438199332, "post_id": 31709743, "comment_id": 51357640, "body": "Why not just store the order in a hidden field then? Or rename the fields to indicate their order."}, {"owner": {"reputation": 33, "user_id": 3242656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db67ea91464cced4d95269d28a3f0c20?s=128&d=identicon&r=PG&f=1", "display_name": "Jamil", "link": "https://stackoverflow.com/users/3242656/jamil"}, "reply_to_user": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1438199512, "post_id": 31709743, "comment_id": 51357730, "body": "I&#39;m not sure I completely understand what that would look like. Could you post an example?"}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1438199708, "post_id": 31709743, "comment_id": 51357843, "body": "Nor am I sure I understand what you are trying to do. If you are randomising the order of a form in JavaScript, you&#39;ll have the option to list the field names in the order they appear in the form, and add that information to the form in a <code>&lt;input type=&quot;hidden&quot; &#47;&gt;</code> field."}], "answers": [{"tags": [], "owner": {"reputation": 2639, "user_id": 3072566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jaZNV.png?s=128&g=1", "display_name": "litelite", "link": "https://stackoverflow.com/users/3072566/litelite"}, "is_accepted": false, "score": 0, "last_activity_date": 1438199403, "creation_date": 1438199403, "answer_id": 31709837, "question_id": 31709743, "link": "https://stackoverflow.com/questions/31709743/how-can-i-get-form-input-metadata-using-request-form/31709837#31709837", "title": "How can I get form input metadata using request.form", "body": "<p>Short answer you can't. browsers only send the name and value of fields no matter the method.</p>\n"}, {"comments": [{"owner": {"reputation": 33, "user_id": 3242656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db67ea91464cced4d95269d28a3f0c20?s=128&d=identicon&r=PG&f=1", "display_name": "Jamil", "link": "https://stackoverflow.com/users/3242656/jamil"}, "edited": false, "score": 0, "creation_date": 1438200261, "post_id": 31709965, "comment_id": 51358156, "body": "Thanks. I think this is the workaround I was looking for."}, {"owner": {"reputation": 1331, "user_id": 2946845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9e046d4607e289fcb6989d7a563723f?s=128&d=identicon&r=PG&f=1", "display_name": "SteJ", "link": "https://stackoverflow.com/users/2946845/stej"}, "reply_to_user": {"reputation": 33, "user_id": 3242656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db67ea91464cced4d95269d28a3f0c20?s=128&d=identicon&r=PG&f=1", "display_name": "Jamil", "link": "https://stackoverflow.com/users/3242656/jamil"}, "edited": false, "score": 0, "creation_date": 1438200631, "post_id": 31709965, "comment_id": 51358395, "body": "I forgot to mention: This is Python 3 -- I think the <code>for item in dict</code> syntax is different for python 2.7"}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1438203053, "post_id": 31709965, "comment_id": 51359714, "body": "@SteJ: no, <code>for item in tdict</code> works the same way in Python 2 and Python 3. There is never a need to call <code>dict.keys()</code> when iterating over a dictionary."}, {"owner": {"reputation": 1331, "user_id": 2946845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9e046d4607e289fcb6989d7a563723f?s=128&d=identicon&r=PG&f=1", "display_name": "SteJ", "link": "https://stackoverflow.com/users/2946845/stej"}, "edited": false, "score": 0, "creation_date": 1438203446, "post_id": 31709965, "comment_id": 51359966, "body": "You do not get a list if you do for item in dict without using dict.keys() in Python3, you get a &quot;dictionary keys&quot; object instead - this doesn&#39;t always cause a problem, but it has caused me headaches in the past so I always now use dict.keys() when I want a list of dictionary keys."}], "tags": [], "owner": {"reputation": 1331, "user_id": 2946845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9e046d4607e289fcb6989d7a563723f?s=128&d=identicon&r=PG&f=1", "display_name": "SteJ", "link": "https://stackoverflow.com/users/2946845/stej"}, "is_accepted": true, "score": 1, "last_activity_date": 1438199852, "creation_date": 1438199852, "answer_id": 31709965, "question_id": 31709743, "link": "https://stackoverflow.com/questions/31709743/how-can-i-get-form-input-metadata-using-request-form/31709965#31709965", "title": "How can I get form input metadata using request.form", "body": "<p>Only the name and value pairs of each element in your form will be passed to your script.</p>\n\n<p>The way I usually achieve this is to pack (serialise) it into the name before sending and then disassemble it at the other end, so:</p>\n\n<pre><code>&lt;input type=\"text\" placeholder=\"Top bugs\" name=\"top_bugs~input_1\" id=\"input_1\"&gt;\n</code></pre>\n\n<p>And then:</p>\n\n<pre><code>tdict=dict(request.form)\nfdict={}\nidict={}\nfor item in tdict.keys():\n    (name,id)=item.split(\"~\",1)\n    fdict[name]=tdict[item]\n    idict[name]=id\n</code></pre>\n\n<p>This should give you the dictionary fdict (which is name=>value) and idict (which is name=>id).</p>\n\n<p>This is a bit hackey, i realise; you may also want to use javascript to append the id to the name when the form is submitted rather than at form creation time.</p>\n\n<p>Hope this helps</p>\n"}, {"tags": [], "owner": {"reputation": 320, "user_id": 2530211, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/282bfed4639285ff4645c7398622277d?s=128&d=identicon&r=PG", "display_name": "jorlugaqui", "link": "https://stackoverflow.com/users/2530211/jorlugaqui"}, "is_accepted": false, "score": 0, "last_activity_date": 1438219086, "creation_date": 1438219086, "answer_id": 31713746, "question_id": 31709743, "link": "https://stackoverflow.com/questions/31709743/how-can-i-get-form-input-metadata-using-request-form/31713746#31713746", "title": "How can I get form input metadata using request.form", "body": "<p>You can also try to define a hidden element:</p>\n\n<pre><code>&lt;input type=\"text\" placeholder=\"Top bugs\" name=\"top_bugs\" id=\"input_1\"/&gt;\n&lt;input type=\"hidden\" name=\"top_bugs_id\" value=\"input_1\"/&gt;\n</code></pre>\n\n<p>Then you can extract the id value finding the element which has the name + '_id' pattern as name.</p>\n"}], "owner": {"reputation": 33, "user_id": 3242656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db67ea91464cced4d95269d28a3f0c20?s=128&d=identicon&r=PG&f=1", "display_name": "Jamil", "link": "https://stackoverflow.com/users/3242656/jamil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 568, "favorite_count": 0, "accepted_answer_id": 31709965, "answer_count": 3, "score": 0, "last_activity_date": 1438219086, "creation_date": 1438199077, "last_edit_date": 1438199231, "question_id": 31709743, "link": "https://stackoverflow.com/questions/31709743/how-can-i-get-form-input-metadata-using-request-form", "title": "How can I get form input metadata using request.form", "body": "<p>I have a series of HTML form inputs to the effect of</p>\n\n<pre><code>&lt;input type=\"text\" placeholder=\"Top bugs\" name=\"top_bugs\" id=\"input_1\"&gt;\n</code></pre>\n\n<p>I retrieve this data and load directly into a dict using</p>\n\n<pre><code>dict(request.form)\n</code></pre>\n\n<p>Doing so gives me the key/value as <code>{top_bugs : value}</code>. However I would like to some how retrieve the <code>id</code>. I do not expect the id to load into the dict, but would like to retrieve it in some way, ideally into a different dict.</p>\n\n<p>Is there a way I can retrieve more than simply name and value from a form input using request.form (or via a different method)?</p>\n"}, {"tags": ["python", "python-3.x", "hex", "type-conversion"], "comments": [{"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 3, "creation_date": 1438199092, "post_id": 31709731, "comment_id": 51357501, "body": "<code>finalHex</code> is not a hexadecimal string. It is an integer <i>already</i>. Are you asking how to format that integer as a hexadecimal string again?"}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1438199390, "post_id": 31709731, "comment_id": 51357665, "body": "In which case, <code>hex(finalHex)</code>"}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "reply_to_user": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 2, "creation_date": 1438199475, "post_id": 31709731, "comment_id": 51357714, "body": "@jonrsharpe: or <code>print(&quot;About to add {:02x} with {:02x}&quot;.format(a, finalHex))</code> perhaps."}, {"owner": {"reputation": 5, "user_id": 5170751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1199b5a212bac519845a6bcc59d9e9e5?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Achs", "link": "https://stackoverflow.com/users/5170751/alex-achs"}, "reply_to_user": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1438207592, "post_id": 31709731, "comment_id": 51361925, "body": "@MartijnPieters - That worked, but the number there is a DWORD and it has to only be 16 bits, is there a way to just keep everything base 16 for the entire process?  I.e if I add 0x2 to 0xFF instead of becoming 0x101 it would be 0x1."}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1438207757, "post_id": 31709731, "comment_id": 51361994, "body": "Mask the number with biwise AND then; <code>finalHex &amp; 0xff</code> removes all but the last byte. Note that that&#39;s <i>8</i> bits, not 16. 16 bits is 0 to FFFF"}, {"owner": {"reputation": 5, "user_id": 5170751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1199b5a212bac519845a6bcc59d9e9e5?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Achs", "link": "https://stackoverflow.com/users/5170751/alex-achs"}, "reply_to_user": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1438208602, "post_id": 31709731, "comment_id": 51362320, "body": "@MartijnPieters - Sorry ya, 8 bits.  So, what do you mean mask the number with biwise and then the finalhex &amp; 0xff, could you give me an example?  Id really appreciate it.  Also, would it work in the case and say like you were at 0xF3 after xoring and then added 0x62 to it?"}, {"owner": {"reputation": 35644, "user_id": 4954037, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/YOM4r.jpg?s=128&g=1", "display_name": "hiro protagonist", "link": "https://stackoverflow.com/users/4954037/hiro-protagonist"}, "edited": false, "score": 0, "creation_date": 1438236742, "post_id": 31709731, "comment_id": 51370004, "body": "<a href=\"https://wiki.python.org/moin/BitwiseOperators\" rel=\"nofollow noreferrer\">wiki.python.org/moin/BitwiseOperators</a> : <code>&#39;{:02x} {:02x} {:02x}&#39;.format(0x100 &amp; 0xff, 0x64a &amp; 0xff, 0x398fe &amp; 0xff)</code> -&gt; <code>&#39;00 4a fe&#39;</code>.  so <code>&amp; 0xff</code> keeps the last 8 bits and sets the higher bits to zero."}], "owner": {"reputation": 5, "user_id": 5170751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1199b5a212bac519845a6bcc59d9e9e5?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Achs", "link": "https://stackoverflow.com/users/5170751/alex-achs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 92, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1438199395, "creation_date": 1438199027, "last_edit_date": 1438199395, "question_id": 31709731, "link": "https://stackoverflow.com/questions/31709731/hex-inside-python", "title": "Hex inside python", "body": "<p>So this is the program im writing for bruteforcing simple xor encryption, but I cant seem to get my finalHex to stay in base 16, as when I add, I want it to roll over.  I tried many things like (int(finalHex,16)) but i get an error like:\ncan't convert non-string with explicit base.  Is there anyway to convert it, or to keep it base 16 through the entire program? ('B' is going to be supplied via sys.argv in the future)</p>\n\n<pre><code>def bruteforce():  \n    s=int('B',16)  \n    startingHex = s  \n    for i in range (1,250):  \n        print(\"About to XOR\",i,\"with\",startingHex)  \n        finalHex = startingHex ^ s  \n        for a in range(1,250):  \n            print(\"About to add\",a,\"with\",finalHex)  \n            finalHex = a + finalHex  \n            if finalHex == 0:  \n                print(\"Decoded!\")  \n        continue  \ndef main():  \n    bruteforce()  \n\nif __name__ == '__main__':  \n    main()  \n</code></pre>\n"}, {"tags": ["python", "pandas", "dataframe", "nan"], "answers": [{"comments": [{"owner": {"reputation": 808, "user_id": 2754854, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/C2fiT.jpg?s=128&g=1", "display_name": "interpolack", "link": "https://stackoverflow.com/users/2754854/interpolack"}, "edited": false, "score": 0, "creation_date": 1438199554, "post_id": 31709765, "comment_id": 51357753, "body": "I had to use something like <code>isinstance(x, list)</code> instead of <code>numpy.isnan(x)</code> to prevent from getting a <code>TypeError</code> but using lambda functions does solve the problem."}], "tags": [], "owner": {"reputation": 64597, "user_id": 1453822, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2c8db97d2ecdfe5e044cee4c470abb60?s=128&d=identicon&r=PG", "display_name": "DeepSpace", "link": "https://stackoverflow.com/users/1453822/deepspace"}, "is_accepted": false, "score": 2, "last_activity_date": 1438199150, "creation_date": 1438199150, "answer_id": 31709765, "question_id": 31709651, "link": "https://stackoverflow.com/questions/31709651/pandas-opposite-of-fillna0/31709765#31709765", "title": "Pandas opposite of fillna(0)", "body": "<p>I don't know of a built-in function, but this works:</p>\n\n<pre><code>import pandas as pd\nimport numpy as np\n\ndf = pd.DataFrame(data={'a':[np.nan, 13, 32]})\n\n &gt;&gt;    a\n   0  NaN\n   1   13\n   2   32\n\ndf = df.applymap(lambda x: 1 if not np.isnan(x) else x)\n\n &gt;&gt;     a\n    0 NaN\n    1   1\n    2   1\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 130643, "user_id": 3923281, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CNpoa.jpg?s=128&g=1", "display_name": "Alex Riley", "link": "https://stackoverflow.com/users/3923281/alex-riley"}, "is_accepted": true, "score": 4, "last_activity_date": 1438199293, "creation_date": 1438199293, "answer_id": 31709811, "question_id": 31709651, "link": "https://stackoverflow.com/questions/31709651/pandas-opposite-of-fillna0/31709811#31709811", "title": "Pandas opposite of fillna(0)", "body": "<p>You could use indexing/assignment with <code>df[df.notnull()] = 1</code>. For instance:</p>\n\n<pre><code>&gt;&gt;&gt; df = pd.DataFrame([[np.nan, 2, 5], [2, 5, np.nan], [2, 5, np.nan]])\n&gt;&gt;&gt; df # example frame\n    0  1   2\n0 NaN  2   5\n1   2  5 NaN\n2   2  5 NaN\n\n&gt;&gt;&gt; df[df.notnull()] = 1\n&gt;&gt;&gt; df\n    0  1   2\n0 NaN  1   1\n1   1  1 NaN\n2   1  1 NaN\n</code></pre>\n"}], "owner": {"reputation": 808, "user_id": 2754854, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/C2fiT.jpg?s=128&g=1", "display_name": "interpolack", "link": "https://stackoverflow.com/users/2754854/interpolack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2069, "favorite_count": 0, "accepted_answer_id": 31709811, "answer_count": 2, "score": 6, "last_activity_date": 1483111944, "creation_date": 1438198764, "last_edit_date": 1483111944, "question_id": 31709651, "link": "https://stackoverflow.com/questions/31709651/pandas-opposite-of-fillna0", "title": "Pandas opposite of fillna(0)", "body": "<p>Whereas <code>df.fillna(0)</code> fills all NA/NaN values with 0, is there a function to replace all <strong>non</strong>-NA/NaN values with another value, such as 1?</p>\n\n<p>If the values in my DataFrame are variable-length lists then:</p>\n\n<ul>\n<li><code>df.replace()</code> requires that the lists are the same length</li>\n<li>boolean index like <code>df[len(df) &gt; 0] = 1</code> throws <code>ValueError: cannot insert True, already exists</code></li>\n<li><code>pandas.get_dummies()</code> throws <code>TypeError: unhashable type: 'list'</code></li>\n</ul>\n\n<p>Is there a more straightforward solution?</p>\n"}, {"tags": ["python", "arrays", "python-3.x"], "comments": [{"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 1, "creation_date": 1438198716, "post_id": 31709620, "comment_id": 51357273, "body": "Split into evenly sized chunks (see the duplicate) and make each chunk a set. Using the function from the top answer that&#39;d be <code>[set(c) for c in chunks(my_list, 4)]</code>."}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 1, "creation_date": 1438198789, "post_id": 31709620, "comment_id": 51357326, "body": "<code>it = iter(my_list)print([set(zip(it,it,it,it))])</code>, resuming all values are unique"}, {"owner": {"reputation": 255, "user_id": 4293516, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QIMT3.png?s=128&g=1", "display_name": "Gautam", "link": "https://stackoverflow.com/users/4293516/gautam"}, "edited": false, "score": 1, "creation_date": 1438199445, "post_id": 31709620, "comment_id": 51357693, "body": "thank you. Your answer is helpful"}], "owner": {"reputation": 255, "user_id": 4293516, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QIMT3.png?s=128&g=1", "display_name": "Gautam", "link": "https://stackoverflow.com/users/4293516/gautam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "closed_date": 1438198704, "answer_count": 0, "score": 0, "last_activity_date": 1438198665, "creation_date": 1438198665, "question_id": 31709620, "link": "https://stackoverflow.com/questions/31709620/how-to-groupusing-set-for-every-n-elements-in-an-array-python", "closed_reason": "Duplicate", "title": "How to group(using set()) for every n elements in an array: python", "body": "<p>I apologize if this question is already asked but i am not able to find the answer. \nI have a list of elements. I wanted to group elements for every 4 elements in the array.\nExample:</p>\n\n<pre><code>my_list = [\"A\",\"B\",\"C\",\"D\",\"E\",\"F\",\"G\",\"H\",....]\n\nresult = [{\"A\",\"B\",\"C\",\"D\"},{\"E\",\"F\",\"G\",\"H\"},....]\n</code></pre>\n"}, {"tags": ["python", "linux", "bash", "shell", "operating-system"], "comments": [{"owner": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 1, "creation_date": 1438198657, "post_id": 31709537, "comment_id": 51357236, "body": "<code>init=&#47;usr&#47;bin&#47;python wahtever.py</code>?"}, {"owner": {"reputation": 100768, "user_id": 1899640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47374ccb28e4b0d2454b64f7b975bc66?s=128&d=identicon&r=PG", "display_name": "that other guy", "link": "https://stackoverflow.com/users/1899640/that-other-guy"}, "edited": false, "score": 0, "creation_date": 1438201158, "post_id": 31709537, "comment_id": 51358705, "body": "Set your <a href=\"https://wiki.archlinux.org/index.php/Automatic_login_to_virtual_console\" rel=\"nofollow noreferrer\"><code>tty1</code> to autologin</a> and specify <code>-l &#47;path&#47;to&#47;console.py</code> to <code>agetty</code> to make it run automatically. Also make sure to disable X."}], "owner": {"reputation": 1330, "user_id": 1199740, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/0a27abee01d9c4545755b03e3b6428b9?s=128&d=identicon&r=PG", "display_name": "Onza", "link": "https://stackoverflow.com/users/1199740/onza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 113, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1438200578, "creation_date": 1438198391, "last_edit_date": 1438200578, "question_id": 31709537, "link": "https://stackoverflow.com/questions/31709537/execute-python-shell-program-at-live-cd-startup", "title": "Execute python shell program at live cd startup?", "body": "<p>I was thinking to use Arch linux, but am open to other options.\nSo what I want is that when Arch Linux boots from a usb, instead showing me the default bash console, it executes a python3 program that I've written.</p>\n\n<p>I need it to execute immediately, I don't want to just have the console.py file stored there (live usb) and have to type python3 console.py, just select boot arch linux, and see my fancy console.</p>\n\n<ul>\n<li>Boot Screen</li>\n<li>Arch Linux Loading Live USB Screen</li>\n<li>My Console Program</li>\n</ul>\n"}, {"tags": ["python", "methods", "operator-keyword"], "comments": [{"owner": {"reputation": 69452, "user_id": 953482, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/T3HH6.png?s=128&g=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/953482/kevin"}, "edited": false, "score": 2, "creation_date": 1438198414, "post_id": 31709526, "comment_id": 51357106, "body": "Check out <a href=\"https://docs.python.org/2/reference/compound_stmts.html#the-with-statement\" rel=\"nofollow noreferrer\">The <code>with</code> Statement</a>."}, {"owner": {"reputation": 3557, "user_id": 161644, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/a6cb5398163ae8d986a39d6b59e6ef18?s=128&d=identicon&r=PG", "display_name": "John Lockwood", "link": "https://stackoverflow.com/users/161644/john-lockwood"}, "edited": false, "score": 1, "creation_date": 1438198724, "post_id": 31709526, "comment_id": 51357280, "body": "Not sure why this was downvoted -- looks reasonable to me.  Upvoting to compensate."}, {"owner": {"reputation": 1026, "user_id": 4255477, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f2479decdc82a5135f9b1fc128e0930?s=128&d=identicon&r=PG&f=1", "display_name": "Litwos", "link": "https://stackoverflow.com/users/4255477/litwos"}, "edited": false, "score": 0, "creation_date": 1438198852, "post_id": 31709526, "comment_id": 51357360, "body": "Well, the &#39;with&#39; statement seems like another use of &#39;as&#39;, so I don&#39;t understand the downvote..."}, {"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1438198880, "post_id": 31709526, "comment_id": 51357373, "body": "If you&#39;re learning from an online course or text, shouldn&#39;t the review be based on the material? Isn&#39;t the <code>as</code> keyword covered somewhere in there?"}, {"owner": {"reputation": 1026, "user_id": 4255477, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f2479decdc82a5135f9b1fc128e0930?s=128&d=identicon&r=PG&f=1", "display_name": "Litwos", "link": "https://stackoverflow.com/users/4255477/litwos"}, "edited": false, "score": 0, "creation_date": 1438198951, "post_id": 31709526, "comment_id": 51357412, "body": "No, it says that I should search for it. I have and entire list of operators and functions I need to search and make a program."}, {"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1438199051, "post_id": 31709526, "comment_id": 51357472, "body": "You&#39;re learning from material that tells you to look up other material? That seems a little odd."}, {"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "reply_to_user": {"reputation": 3557, "user_id": 161644, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/a6cb5398163ae8d986a39d6b59e6ef18?s=128&d=identicon&r=PG", "display_name": "John Lockwood", "link": "https://stackoverflow.com/users/161644/john-lockwood"}, "edited": false, "score": 0, "creation_date": 1438199157, "post_id": 31709526, "comment_id": 51357536, "body": "@JohnLockwood - please don&#39;t <a href=\"http://meta.stackoverflow.com/questions/253383/upvotes-that-cancel-out-downvotes\">use your vote just to cancel out someone else&#39;s vote</a>."}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1438199521, "post_id": 31709526, "comment_id": 51357735, "body": "It&#39;s used in various <a href=\"https://docs.python.org/2/reference/simple_stmts.html\" rel=\"nofollow noreferrer\">simple</a> and <a href=\"https://docs.python.org/2/reference/compound_stmts.html\" rel=\"nofollow noreferrer\">compound</a> statements."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 2, "creation_date": 1438200022, "post_id": 31709526, "comment_id": 51358024, "body": "To be clear, it&#39;s not an operator at all. It&#39;s just a keyword that can be used in two distinct statements, an <code>import</code> statement and a <code>with</code> statement."}, {"owner": {"reputation": 25103, "user_id": 1340389, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5d0e5b16679b92b24c8262e1e6aa2aa7?s=128&d=identicon&r=PG", "display_name": "Kevin", "link": "https://stackoverflow.com/users/1340389/kevin"}, "reply_to_user": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1438200834, "post_id": 31709526, "comment_id": 51358524, "body": "@TigerhawkT3: You can vote <a href=\"http://meta.stackexchange.com/questions/209849/to-what-extent-i-am-free-with-my-voting\">however you like</a>."}, {"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "reply_to_user": {"reputation": 25103, "user_id": 1340389, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5d0e5b16679b92b24c8262e1e6aa2aa7?s=128&d=identicon&r=PG", "display_name": "Kevin", "link": "https://stackoverflow.com/users/1340389/kevin"}, "edited": false, "score": 0, "creation_date": 1438200971, "post_id": 31709526, "comment_id": 51358595, "body": "@Kevin - absolutely, but I can also encourage people to follow whatever commonly-accepted voting practices I like. :)"}, {"owner": {"reputation": 3557, "user_id": 161644, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/a6cb5398163ae8d986a39d6b59e6ef18?s=128&d=identicon&r=PG", "display_name": "John Lockwood", "link": "https://stackoverflow.com/users/161644/john-lockwood"}, "reply_to_user": {"reputation": 25103, "user_id": 1340389, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5d0e5b16679b92b24c8262e1e6aa2aa7?s=128&d=identicon&r=PG", "display_name": "Kevin", "link": "https://stackoverflow.com/users/1340389/kevin"}, "edited": false, "score": 0, "creation_date": 1438211824, "post_id": 31709526, "comment_id": 51363308, "body": "@Kevin, thanks for that.  That was pretty much always the plan. :)"}], "answers": [{"tags": [], "owner": {"reputation": 1038, "user_id": 2839862, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d874f8fa5e6480461f368400b9089a2f?s=128&d=identicon&r=PG", "display_name": "Teyras", "link": "https://stackoverflow.com/users/2839862/teyras"}, "is_accepted": false, "score": 2, "last_activity_date": 1438198436, "creation_date": 1438198436, "answer_id": 31709552, "question_id": 31709526, "link": "https://stackoverflow.com/questions/31709526/what-does-the-as-operator-do/31709552#31709552", "title": "What does the &#39;as&#39; operator do?", "body": "<p>Its used with the <code>with</code> keyword:</p>\n\n<pre><code>with open(\"file.foo\") as f:\n    # Do something with f\n    pass\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 64597, "user_id": 1453822, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2c8db97d2ecdfe5e044cee4c470abb60?s=128&d=identicon&r=PG", "display_name": "DeepSpace", "link": "https://stackoverflow.com/users/1453822/deepspace"}, "is_accepted": true, "score": 8, "last_activity_date": 1438199799, "last_edit_date": 1438199799, "creation_date": 1438198449, "answer_id": 31709556, "question_id": 31709526, "link": "https://stackoverflow.com/questions/31709526/what-does-the-as-operator-do/31709556#31709556", "title": "What does the &#39;as&#39; operator do?", "body": "<p>It is used to create an alias when importing modules or when using the <code>with</code> clause:</p>\n\n<pre><code>import pandas as pd\n\ndf = pd.DataFrame()\n\n#####\n\nwith open(file_name, 'r') as my_file:\n    my_file.readlines()\n</code></pre>\n"}], "owner": {"reputation": 1026, "user_id": 4255477, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f2479decdc82a5135f9b1fc128e0930?s=128&d=identicon&r=PG&f=1", "display_name": "Litwos", "link": "https://stackoverflow.com/users/4255477/litwos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 851, "favorite_count": 0, "closed_date": 1438248332, "accepted_answer_id": 31709556, "answer_count": 2, "score": 4, "last_activity_date": 1438199799, "creation_date": 1438198338, "question_id": 31709526, "link": "https://stackoverflow.com/questions/31709526/what-does-the-as-operator-do", "closed_reason": "Duplicate", "title": "What does the &#39;as&#39; operator do?", "body": "<p>I am learning the basics of Python from Zed Shaw's Learn Python the Hard Way. I am currently at chapter 36 (Symbol review), and came across the 'as' operator. I need to search for it's uses in Python. I know this question is broad, but I didn't found anything as far on python.docs, or SO.\nWhat does this operator do?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 0, "creation_date": 1438198852, "post_id": 31709497, "comment_id": 51357359, "body": "I feel like <code>itertools.groupby</code> will be a big help here, but I don&#39;t have the time to put anything together at the moment. Construct a set of groups like <code>{&#39;person1&#39;: [(&#39;person1&#39;, &#39;a&#39;), &#39;person2&#39;, &#39;b&#39;), ...] }</code> then only add the row if there are more than 10 items and mark each <code>df[groupname][item.split(&#39;,&#39;)[1]] = 1</code>"}], "answers": [{"tags": [], "owner": {"reputation": 288763, "user_id": 487339, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wbe4o.png?s=128&g=1", "display_name": "DSM", "link": "https://stackoverflow.com/users/487339/dsm"}, "is_accepted": true, "score": 0, "last_activity_date": 1438200392, "creation_date": 1438200392, "answer_id": 31710126, "question_id": 31709497, "link": "https://stackoverflow.com/questions/31709497/converting-paired-table-to-binary-table/31710126#31710126", "title": "Converting paired table to binary table", "body": "<p>I would probably add a dummy column and then call <code>pivot_table</code>:</p>\n\n<pre><code>&gt;&gt;&gt; df = pd.DataFrame({\"PERSON\": [\"p1\", \"p2\", \"p3\"] * 10, \"ATTRIBUTE\": np.random.choice([\"a\",\"b\",\"c\",\"d\",\"e\",\"f\",\"x\"], 30)})\n&gt;&gt;&gt; df.head()\n  ATTRIBUTE PERSON\n0         d     p1\n1         b     p2\n2         x     p3\n3         b     p1\n4         f     p2\n&gt;&gt;&gt; df[\"count\"] = 1\n&gt;&gt;&gt; p = df.pivot_table(index=\"PERSON\", columns=\"ATTRIBUTE\", values=\"count\", \n                       aggfunc=sum, fill_value=0)\n&gt;&gt;&gt; p\nATTRIBUTE  a  b  c  d  e  f  x\nPERSON                        \np1         1  3  1  1  1  0  3\np2         2  1  1  2  1  2  1\np3         0  4  1  1  2  0  2\n</code></pre>\n\n<p>And then we can select only the attributes with more than 10 occurrences (here 5, from my example):</p>\n\n<pre><code>&gt;&gt;&gt; p.loc[:,p.sum() &gt;= 5]\nATTRIBUTE  b  x\nPERSON         \np1         3  3\np2         1  1\np3         4  2\n</code></pre>\n"}], "owner": {"reputation": 1301, "user_id": 5112032, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/783e405a36a8ee5012167acffe82f578?s=128&d=identicon&r=PG&f=1", "display_name": "eljusticiero67", "link": "https://stackoverflow.com/users/5112032/eljusticiero67"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 31710126, "answer_count": 1, "score": 0, "last_activity_date": 1438200392, "creation_date": 1438198249, "question_id": 31709497, "link": "https://stackoverflow.com/questions/31709497/converting-paired-table-to-binary-table", "title": "Converting paired table to binary table", "body": "<p>i wouldn't be posting this if i didn't do extensive research in attempt to find the answer. Alas, I have not been able to find any such answer. I have a paired dataset that looks something like this:</p>\n\n<pre><code>PERSON, ATTRIBUTE\nperson1, a\nperson1, b\nperson1, c\nperson1, d\nperson2, c\nperson2, d\nperson2, x\nperson3, a\nperson3, b\nperson3, e\nperson3, f\n</code></pre>\n\n<p>What I want to do is: 1) drop attributes that don't appear more than 10 times, 2) turn it into a binary table that would look something like this:</p>\n\n<pre><code>          a     b     c\nperson1   1     1     1  \nperson2   0     0     1  \nperson3   1     1     0\n</code></pre>\n\n<p>So far, I have put together a script to drop the attributes that only appear 10 times; however, it is painfully slow as it has to go through each attribute, determine its frequency and find the corresponding x and y values to append to new variables.</p>\n\n<pre><code>import pandas as pd\nimport numpy as np\nimport csv\nfrom collections import Counter\nimport time\n\ndf = pd.read_csv(\n    filepath_or_buffer='sample.csv',\n    sep=',') \n\nx = df.ix[:, 1].values\ny = df.ix[:, 0].values\n\nx_vals = []\ny_vals = []\n\ncounter = Counter(x)\n\nstart_time = time.time()\n\nfor each in counter:\n    if counter[each]&gt;=10:\n        for i, j in enumerate(x):\n            if j==each:\n                print \"Adding position:\" + str(i)\n                x_vals.append(each)\n                y_vals.append(y[i])\n\n\nprint \"Time took: %s\" %(time.time()-start_time)\n</code></pre>\n\n<p>I would love some help in 1) finding a faster way to match attributes that appear more than 10 times and appending the values to new variables.</p>\n\n<p>OR</p>\n\n<p>2) An alternative method entirely to get the final binary table. I feel like converting a paired table to a binary table is probably a common occurrence in the data world, yet i couldnt find any code, module etc that could help with doing that.</p>\n\n<p>Thanks a million!</p>\n"}, {"tags": ["python", "matlab", "scipy", "statistical-test"], "comments": [{"owner": {"reputation": 96306, "user_id": 3250829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e2e07c34e170453eeea9e937a98f19b?s=128&d=identicon&r=PG", "display_name": "rayryeng", "link": "https://stackoverflow.com/users/3250829/rayryeng"}, "edited": false, "score": 3, "creation_date": 1438198926, "post_id": 31709475, "comment_id": 51357399, "body": "Some code to illustrate your point on where they&#39;re different would be nice.  Specifically, please attach a <a href=\"http://stackoverflow.com/help/mcve\">MVCE</a> to your post."}], "answers": [{"comments": [{"owner": {"reputation": 29117, "user_id": 1587329, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/UWmiP.png?s=128&g=1", "display_name": "serv-inc", "link": "https://stackoverflow.com/users/1587329/serv-inc"}, "edited": false, "score": 0, "creation_date": 1453908281, "post_id": 31711383, "comment_id": 57806957, "body": "How come <code>0.1267 != 0.12514839875...</code>? Different number formats?"}, {"owner": {"reputation": 6226, "user_id": 1926629, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/xzgKX.jpg?s=128&g=1", "display_name": "NKN", "link": "https://stackoverflow.com/users/1926629/nkn"}, "reply_to_user": {"reputation": 29117, "user_id": 1587329, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/UWmiP.png?s=128&g=1", "display_name": "serv-inc", "link": "https://stackoverflow.com/users/1587329/serv-inc"}, "edited": false, "score": 0, "creation_date": 1453937159, "post_id": 31711383, "comment_id": 57824546, "body": "here we have not set all the same options in both MATLAB and Python. I guess the reason for the difference can be discovered by going more into the details."}, {"owner": {"reputation": 1756, "user_id": 5023889, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/75b7c8676cc60099ecc2b63a25504ec7?s=128&d=identicon&r=PG&f=1", "display_name": "Darren Christopher", "link": "https://stackoverflow.com/users/5023889/darren-christopher"}, "edited": false, "score": 0, "creation_date": 1610066637, "post_id": 31711383, "comment_id": 116022406, "body": "@NKN To me, the first one is similar, so when you mentioned MATLAB&#39;s tests the median, I assume Python&#39;s too?"}], "tags": [], "owner": {"reputation": 6226, "user_id": 1926629, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/xzgKX.jpg?s=128&g=1", "display_name": "NKN", "link": "https://stackoverflow.com/users/1926629/nkn"}, "is_accepted": true, "score": 3, "last_activity_date": 1438204918, "creation_date": 1438204918, "answer_id": 31711383, "question_id": 31709475, "link": "https://stackoverflow.com/questions/31709475/what-is-pythons-equivalent-of-matlabs-ranksum/31711383#31711383", "title": "What is python&#39;s equivalent of Matlab&#39;s ranksum?", "body": "<p>It depends which options you are using. Check the following example:</p>\n\n<p>1- MATLAB</p>\n\n<pre><code>rng('default') % for reproducibility\nx = unifrnd(0,1,20,1);\ny = unifrnd(0.25,1.25,20,1);\np = ranksum(x,y);\np =\n   0.2503\n</code></pre>\n\n<p>2- Python\n(to be consistent, I did not generate numbers again, but I have moved the generated numbers in MATLAB to Python script)</p>\n\n<pre><code>from scipy.stats import *\nimport numpy as np\n\ny=np.array([0.905740699156587, 0.285711678574190, 1.09912930586878, 1.18399324775755, 0.928735154857774, 1.00774013057833, 0.993132468124916, 0.642227019534168, 0.905477890177557, 0.421186687811562, 0.956046088019609, 0.28183284637742, 0.526922984960890, 0.296171390631154, 0.347131781235848, 1.07345782832729, 0.944828622975817, 0.567099480060861, 1.20022204883835, 0.284446080502909])\nx=np.array([0.814723686393179,  0.905791937075619,  0.126986816293506,  0.913375856139019,  0.632359246225410,  0.0975404049994095, 0.278498218867048,  0.546881519204984,  0.957506835434298,  0.964888535199277,  0.157613081677548,  0.970592781760616,  0.957166948242946,  0.485375648722841,  0.800280468888800,  0.141886338627215,  0.421761282626275,  0.915735525189067,  0.792207329559554,  0.959492426392903])\n\np = ranksums(x,y)\nprint p\n\nRanksumsResult(statistic=-1.1631538287209875, pvalue=0.24476709560795806)\n</code></pre>\n\n<p>This result is with the following options:</p>\n\n<p>1- for <strong>MATLAB</strong>: </p>\n\n<blockquote>\n  <p>p = ranksum(x,y) returns the p-value of a <strong>two-sided Wilcoxon rank sum</strong>\n  test. ranksum tests the null hypothesis that data in x and y are\n  samples from <strong>continuous distributions</strong> with <strong>equal medians</strong>, against the\n  alternative that they are not. The test assumes that the two samples\n  are independent. x and y <strong>can</strong> have <strong>different lengths</strong>. This test is\n  equivalent to a <strong>Mann-Whitney U-test</strong>.</p>\n</blockquote>\n\n<p>2- for <strong>Python</strong>:</p>\n\n<blockquote>\n  <p>Compute the <strong>Wilcoxon rank-sum</strong> statistic for two samples. The\n  Wilcoxon rank-sum test tests the null hypothesis that two sets of\n  measurements are drawn from the <strong>same distribution</strong>. The alternative\n  hypothesis is that values in one sample are more likely to be larger\n  than the values in the other sample. This test should be used to\n  compare two samples from <strong>continuous distributions</strong>. It does not\n  handle ties between measurements in x and y.</p>\n</blockquote>\n\n<hr>\n\n<p><strong>Another Example</strong> </p>\n\n<p>Here I am using the same data, with the same function of MATLAB but different options. Now you can see that the result is equal to the result from <code>mannwhitneyu</code> function in Scipy.</p>\n\n<p><strong>MATLAB</strong></p>\n\n<pre><code>[p,h,stats] = ranksum(x,y,'alpha',0.01,'tail','left','method','exact');\np = \n    0.1267\n</code></pre>\n\n<p><strong>Python</strong></p>\n\n<pre><code>m = mannwhitneyu(xx, yy, use_continuity=True)\nprint m\n\nMannwhitneyuResult(statistic=157.0, pvalue=0.12514839875175593)\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 3010058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/878d3cd212558308389b59b814084eb0?s=128&d=identicon&r=PG&f=1", "display_name": "Yati", "link": "https://stackoverflow.com/users/3010058/yati"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2228, "favorite_count": 0, "accepted_answer_id": 31711383, "answer_count": 1, "score": 2, "last_activity_date": 1438204918, "creation_date": 1438198171, "last_edit_date": 1438199548, "question_id": 31709475, "link": "https://stackoverflow.com/questions/31709475/what-is-pythons-equivalent-of-matlabs-ranksum", "title": "What is python&#39;s equivalent of Matlab&#39;s ranksum?", "body": "<p>The <code>scipy.stats.ranksums</code>, <code>wilcoxon</code>, <code>mannwhitneyu</code> all give different results from Matlab's <code>ranksum</code>.</p>\n"}, {"tags": ["python", "django", "django-models"], "comments": [{"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 2, "creation_date": 1438199462, "post_id": 31709457, "comment_id": 51357706, "body": "The problem is not in accessing related data, but in trying to access instance attribute data in the class definition."}, {"owner": {"reputation": 9227, "user_id": 1830895, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I8Hvh.jpg?s=128&g=1", "display_name": "Pynchia", "link": "https://stackoverflow.com/users/1830895/pynchia"}, "edited": false, "score": 1, "creation_date": 1438199667, "post_id": 31709457, "comment_id": 51357806, "body": "1st: class names should be CamelCase. 2nd: @DMunoz there would be no attribute called user in class <code>AppJob</code>. 3rd: <code>upload_to</code> can be a callable, but the one you have is an expression, not a callable. 4th point: make sure an <code>app_user</code> instance is created when its User is created. It can be achieved <a href=\"https://docs.djangoproject.com/en/1.8/topics/signals/#connecting-to-signals-sent-by-specific-senders\" rel=\"nofollow noreferrer\">using signals</a> (e.g. <code>post_save</code> on User)"}], "answers": [{"tags": [], "owner": {"reputation": 367, "user_id": 1664290, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac1e995e11f21101f83762587f4aeea6?s=128&d=identicon&r=PG", "display_name": "DMunoz", "link": "https://stackoverflow.com/users/1664290/dmunoz"}, "is_accepted": false, "score": 1, "last_activity_date": 1438199235, "last_edit_date": 1495535209, "creation_date": 1438199235, "answer_id": 31709788, "question_id": 31709457, "link": "https://stackoverflow.com/questions/31709457/django-accessing-attributes-through-a-onetoonefield/31709788#31709788", "title": "Django - Accessing attributes through a OneToOneField", "body": "<p>Based on <a href=\"https://stackoverflow.com/a/1190866/1664290\">this answer to a similar question</a> something like this should work:</p>\n\n<pre><code># models.py\n\nfrom django.db import models\nfrom django.contrib.auth.models import User\n\nclass app_user(models.Model):\n    user = models.OneToOneField(User)\n    num_jobs = models.IntegerField(default = 0)\n\n    def __unicode__(self):\n        return self.user.get_username()\n\ndef content_file_name(instance, filename):\n    return '/'.join([instance.app_user.user.get_username(), str(instance.app_user.num_jobs), filename])\n\nclass app_job(models.Model):\n    app_user = models.ForeignKey(app_user)\n    upload1 = models.FileField(upload_to = content_file_name , blank = True, null = True)\n    upload2 = models.FileField(upload_to = content_file_name)\n    upload3 = models.FileField(upload_to = content_file_name)    \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7724, "user_id": 601245, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/f160186784a94ba905e3a25d319d5846?s=128&d=identicon&r=PG", "display_name": "Matt Seymour", "link": "https://stackoverflow.com/users/601245/matt-seymour"}, "is_accepted": true, "score": 4, "last_activity_date": 1438199935, "last_edit_date": 1438199935, "creation_date": 1438199270, "answer_id": 31709804, "question_id": 31709457, "link": "https://stackoverflow.com/questions/31709457/django-accessing-attributes-through-a-onetoonefield/31709804#31709804", "title": "Django - Accessing attributes through a OneToOneField", "body": "<p>Okay there are a couple of issues here. But nothing a little education cannot fix.</p>\n\n<ul>\n<li>models should be CamelCased this makes it easier to read and is generally good practise.</li>\n<li>You do not need to prefix models with <code>app_</code> its much cleaner and easier to read without this.</li>\n</ul>\n\n<hr>\n\n<p>Anyway,</p>\n\n<p>You <code>app_job</code> model ForeignKey should be to <code>User</code> not to the <code>app_user</code> model. By doing this you can still gain access to the <code>app_user</code> data.</p>\n\n<p>You also need to modify the <code>upload_to</code> attributes also. Whilst <code>uploads_to</code> can be a string value it cannot be evaluated the way you are currently doing this. Check out the <a href=\"https://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.FileField.upload_to\" rel=\"nofollow\">django filefield documentation</a> for details (shameless plug, I recently re-wrote this part of the documentation).</p>\n\n<p>Instead you need to do the following:</p>\n\n<pre><code>def user_directory_path(instance, filename):\n    # file will be uploaded to MEDIA_ROOT/user_&lt;id&gt;/&lt;filename&gt;\n    return 'user_{0}/{1}'.format(instance.user.id, filename)\n\nclass app_job(models.Model):\n    app_user = models.ForeignKey(User)\n    upload1 = models.FileField(upload_to=user_directory_path , blank = True, null = True)\n    upload2 = models.FileField(upload_to=user_directory_path\n    upload3 = models.FileField(upload_to=user_directory_path, blank=True, null=True)\n</code></pre>\n\n<p>What this is doing is <code>upload_to</code> calls the function <code>user_directory_path</code> to generate the file path.</p>\n\n<hr>\n\n<p>By following the above you should have something like:</p>\n\n<pre><code># models.py\n\nfrom django.db import models\nfrom django.contrib.auth.models import User\n\nfrom django.forms import ModelForm\n\nclass UserProfile(models.Model):\n    \"\"\"\n    In settings.py you will want to add a link to AUTH_USER_PROFILE \n    See https://docs.djangoproject.com/en/1.8/topics/auth/customizing/#extending-the-existing-user-model\n    \"\"\"\n    user = models.OneToOneField(User)\n    num_jobs = models.IntegerField(default=0)\n\n    def __unicode__(self):\n        return self.user.get_username()\n\ndef upload_dir(instance, filename):\n    return instance.user.get_username() + \"/\" + str(instance.user.num_jobs)\n\nclass Job(models.Model):\n    user = models.ForeignKey(User)\n    upload1 = models.FileField(upload_to=upload_dir, blank = True, null = True)\n    upload2 = models.FileField(upload_to=upload_dir, blank=True, null=True)\n    upload3 = models.FileField(upload_to=upload_dir, blank=True, null=True)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 696, "user_id": 5170753, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-x_fAeerAfNA/AAAAAAAAAAI/AAAAAAAAAGI/MMwVGA12oKI/photo.jpg?sz=128", "display_name": "Martin Alderete", "link": "https://stackoverflow.com/users/5170753/martin-alderete"}, "is_accepted": false, "score": 0, "last_activity_date": 1438200056, "last_edit_date": 1592644375, "creation_date": 1438200056, "answer_id": 31710031, "question_id": 31709457, "link": "https://stackoverflow.com/questions/31709457/django-accessing-attributes-through-a-onetoonefield/31710031#31710031", "title": "Django - Accessing attributes through a OneToOneField", "body": "<p>As you have been told there are several issues. But its good to learn :).</p>\n<p>First the class name should start with an upper letter and use &quot;camelCase&quot;,\nin your case, &quot;AppUser&quot; and &quot;AppJob&quot;. Personally I would not use &quot;App&quot; as suffix instead I would just use &quot;MyUser&quot; and &quot;Job&quot;.</p>\n<p>The error you are getting &quot;'ForeignKey' object has no attribute 'user&quot; is because in your &quot;app_job&quot; model you have a ForeignKey to app_user, which is OK, that creates the relationship between the both models, but then in the FileField's you are using that &quot;foreignkey&quot; object which have the same name as your model &quot;app_user&quot; and that ForeignKey instance does not have an attribute called &quot;user&quot;, Do you get this?</p>\n<p>The information the guys gave you related to the &quot;upload_to&quot; is correct :).\nyou can get more info in the <a href=\"https://docs.djangoproject.com/en/1.8/ref/models/fields/#django.db.models.FileField.storage\" rel=\"nofollow noreferrer\">Django docs</a></p>\n<p>Thanks</p>\n"}], "owner": {"reputation": 23, "user_id": 5170760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0b2599311c39d15b5e455c1a49fe4e3?s=128&d=identicon&r=PG&f=1", "display_name": "django_help", "link": "https://stackoverflow.com/users/5170760/django-help"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1357, "favorite_count": 0, "accepted_answer_id": 31709804, "answer_count": 3, "score": 2, "last_activity_date": 1438200056, "creation_date": 1438198113, "last_edit_date": 1438198498, "question_id": 31709457, "link": "https://stackoverflow.com/questions/31709457/django-accessing-attributes-through-a-onetoonefield", "title": "Django - Accessing attributes through a OneToOneField", "body": "<p>I am very new to Django and I was wondering if I could request some help with an issue I am facing. I'm trying to build a set of models in Django that is structured as follows:</p>\n\n<p>An <code>app_user</code> describes a user of the application I am building.\nAn <code>app_job</code> describes a job that the user wants to run on the app, with several associated inputs (<code>upload1</code>, <code>upload2</code>, <code>upload3</code>). A user can run many jobs; hence, I use the many-to-one (<code>ForeignKey</code>) relationship between job and user. When an <code>app_job</code> is created, I want its associated files to be uploaded to a directory determined by the associated user's <code>username</code> and <code>num_jobs</code> attribute, as shown.</p>\n\n<p>When I run <code>python manage.py makemigrations</code>, I receive the following error: <code>AttributeError: 'ForeignKey' object has no attribute 'user'</code>. Which begs the question, how can I access the underlying <code>app_user</code>'s information from the <code>app_job</code> class?</p>\n\n<p>Thanks for the help.</p>\n\n<pre><code># models.py\n\nfrom django.db import models\nfrom django.contrib.auth.models import User\n\nfrom django.forms import ModelForm\n\nclass app_user(models.Model):\n    user = models.OneToOneField(User)\n    num_jobs = models.IntegerField(default = 0)\n\n    def __unicode__(self):\n        return self.user.get_username()\n\n\nclass app_job(models.Model):\n    app_user = models.ForeignKey(app_user)\n    upload1 = models.FileField(upload_to = app_user.user.get_username() + \"/\" + str(app_user.num_jobs) , blank = True, null = True)\n    upload2 = models.FileField(upload_to = app_user.user.get_username() + \"/\" + str(app_user.num_jobs))\n    upload3 = models.FileField(upload_to = app_user.user.get_username() + \"/\" + str(app_user.num_jobs) )\n</code></pre>\n"}, {"tags": ["python", "matplotlib", "kml"], "answers": [{"tags": [], "owner": {"reputation": 605, "user_id": 814719, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/1a3393c5b156c66d415a26c728d9263e?s=128&d=identicon&r=PG", "display_name": "Glenn N", "link": "https://stackoverflow.com/users/814719/glenn-n"}, "is_accepted": false, "score": 2, "last_activity_date": 1467911561, "creation_date": 1467911561, "answer_id": 38251493, "question_id": 31709437, "link": "https://stackoverflow.com/questions/31709437/export-python-plot-to-kml/38251493#38251493", "title": "Export Python Plot to KML", "body": "<p>I have a solution, but I'm not familiar enough with Figure and Artist classes to give a clear explanation of why it is correct.</p>\n\n<p>You need to do these two things:</p>\n\n<ol>\n<li>Use <code>fig = ppl.figure()</code> instead of <code>matplotlib.figure.Figure()</code>.</li>\n<li>Save with <code>fig.savefig()</code> instead of <code>ppl.savefig()</code>.</li>\n</ol>\n\n<p>Also use of tight_layout and padding is not needed. I also set facecolor for the figure so that I can see the true boundaries. View the output image, <em>temp.png</em>, with an image viewer and you should see that the rectangle borderlines are at the figure edges; when I ran your original code and viewed the image, there was always some small amount of space between rectangle and figure bounds.</p>\n\n<p>Here is the fixed code:</p>\n\n<pre><code>import matplotlib\nfrom mpl_toolkits.basemap import Basemap\nimport matplotlib.pyplot as ppl\nfrom pylab import rcParams\nimport simplekml\nrcParams['figure.figsize'] = (8,8)\n# create rectangle over 0 to 10 degrees longitude and 0 to 10 degrees latitude\nx = [0, 10, 10, 0, 0]\ny = [10, 10, 0, 0, 10]\nx1=range(0,11)    # to draw a diagonal line\n\nfig = ppl.figure(1)\nax = fig.add_axes([0,0,1,1])\nax.axis('off')\nfig.patch.set_facecolor('blue')  # so we can see the true extent\n\nppl.plot(x, y, 'r', linewidth=3)\nppl.plot(x, y, '.b', linewidth=3)\nppl.plot(x1, x1, 'g', linewidth=3)\n\nppl.axis('off')\nborder1 = ppl.axis()\nprint 'Border = %s' %(str(border1))\nif False:\n    ppl.show()\nelse:\n    pngName = 'Overlay.png'\n    fig.savefig(pngName, facecolor=fig.get_facecolor(), transparent=False)\n\nbottomleft  = (border1[0],border1[2])\nbottomright = (border1[1],border1[2])\ntopright    = (border1[1],border1[3])\ntopleft     = (border1[0],border1[3])\n\nkml = simplekml.Kml()\nground = kml.newgroundoverlay(name='GroundOverlay')\nground.icon.href = pngName\nground.gxlatlonquad.coords =[bottomleft, bottomright, topright, topleft]\nkml.save(\"GroundOverlay.kml\")\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 5170794, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99083e8fb611c2e48f1083b08e3efea2?s=128&d=identicon&r=PG&f=1", "display_name": "jolson", "link": "https://stackoverflow.com/users/5170794/jolson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1012, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1467911561, "creation_date": 1438198044, "last_edit_date": 1438200576, "question_id": 31709437, "link": "https://stackoverflow.com/questions/31709437/export-python-plot-to-kml", "title": "Export Python Plot to KML", "body": "<p>How to create a lon/lat plot with Matplotlib that can be exported to Google Earth with points appearing on G.E. correctly.  Image can be seen here: <a href=\"https://imgur.com/4szLzNF\" rel=\"nofollow noreferrer\">http://imgur.com/4szLzNF</a>\n<a href=\"https://i.stack.imgur.com/MYw4a.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MYw4a.png\" alt=\"Google Earth view\"></a>\n  Seems like there is always a slight border around my exported figure such that the points I define in plot are off in G.E.</p>\n\n<pre><code>x = [0, 10, 10, 0, 0]\ny = [10, 10, 0, 0, 10]\nx1=[0,1,2,3,4,5,6,7,8,9,10]\n\nfig = Figure(facecolor=None, frameon=False)\nax = fig.add_axes([0,0,1,1])\nax.axis('off')\n\nppl.plot(x, y, 'r',  axes=ax)\nppl.plot(x, y, '.b', axes=ax)\nppl.plot(x1, x1, 'g', axes=ax)\n\nppl.axis('off')\nppl.tight_layout(0,h_pad=0, w_pad=0)\nborder1 = ppl.axis(bbox_inches='tight')\nppl.show()\n\npngName = 'temp.png'\npy.savefig(pngName, bbox_inches='tight', pad_inches=0, transparent=True)\n\nbottomleft  = (border1[0],border1[2])\nbottomright = (border1[1],border1[2])\ntopright    = (border1[1],border1[3])\ntopleft     = (border1[0],border1[3])\n\nkml = simplekml.Kml()\nground = kml.newgroundoverlay(name='GroundOverlay')\nground.icon.href = pngName\nground.gxlatlonquad.coords =[bottomleft, bottomright, topright, topleft]\nkml.save(\"GroundOverlay_temp.kml\")\n</code></pre>\n"}, {"tags": ["python", "datetime", "salesforce", "apex", "soql"], "comments": [{"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1438197813, "post_id": 31709344, "comment_id": 51356784, "body": "Read the <a href=\"https://docs.python.org/3.4/library/datetime.html\" rel=\"nofollow noreferrer\"><code>datetime</code> documentation here</a>."}, {"owner": {"reputation": 76298, "user_id": 795990, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UxQhT.jpg?s=128&g=1", "display_name": "Anand S Kumar", "link": "https://stackoverflow.com/users/795990/anand-s-kumar"}, "edited": false, "score": 0, "creation_date": 1438198126, "post_id": 31709344, "comment_id": 51356964, "body": "Are you using Python 2.x ?"}, {"owner": {"reputation": 113, "user_id": 4374663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/908822edaf2e2384b9565edf47694334?s=128&d=identicon&r=PG", "display_name": "Christian", "link": "https://stackoverflow.com/users/4374663/christian"}, "edited": false, "score": 0, "creation_date": 1438198527, "post_id": 31709344, "comment_id": 51357168, "body": "Try moment. Nice py lib."}], "answers": [{"tags": [], "owner": {"reputation": 76298, "user_id": 795990, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UxQhT.jpg?s=128&g=1", "display_name": "Anand S Kumar", "link": "https://stackoverflow.com/users/795990/anand-s-kumar"}, "is_accepted": true, "score": 3, "last_activity_date": 1438198480, "creation_date": 1438198480, "answer_id": 31709565, "question_id": 31709344, "link": "https://stackoverflow.com/questions/31709344/datetime-conversions-to-timestamp/31709565#31709565", "title": "Datetime conversions to timestamp", "body": "<p><strong>For Python 3.x</strong> , you can use the following format -</p>\n\n<pre><code>%Y-%m-%dT%H:%M:%S.%f%z\n</code></pre>\n\n<p>Example/Demo -</p>\n\n<pre><code>&gt;&gt;&gt; import datetime\n&gt;&gt;&gt; datetime.datetime.strptime(u'2015-06-24T12:00:00.000+0000','%Y-%m-%dT%H:%M:%S.%f%z')\ndatetime.datetime(2015, 6, 24, 12, 0, tzinfo=datetime.timezone.utc)\n</code></pre>\n\n<p>You can also use the <code>dateutil.parser</code> method given below. </p>\n\n<hr>\n\n<p><strong>For Python 2.x</strong> , the <code>'%z'</code> directive is not implemented in Python 2.x (Atleast not in my Python 2.6) , but you can use <a href=\"https://dateutil.readthedocs.org/en/latest/parser.html#dateutil.parser.parse\" rel=\"nofollow\"><code>dateutil.parser.parse()</code></a> for parsing the date -</p>\n\n<pre><code>&gt;&gt;&gt; import dateutil.parser\n&gt;&gt;&gt; dateutil.parser.parse(u'2015-06-24T12:00:00.000+0000')\ndatetime.datetime(2015, 6, 24, 12, 0, tzinfo=tzutc())\n</code></pre>\n\n<p>Note - You can use <code>dateutil</code> in Python 3 as well.</p>\n\n<hr>\n\n<p>So for Python 2.x , your code would look like -</p>\n\n<pre><code>import dateutil.parser\nnow = datetime.now(pytz.UTC)\ndisables = self.sssvc.query(\"select Name, Project__c, Ownerid, Id, DisableOn__c, User__c from PIXDisableUserTask__c WHERE Status__c = 'Pending'\")\nfor disable in disables[u'records']:\n    disable_on = dateutil.parser.parse(disable[u'DisableOn__c'])\n    if disable_on &lt; now:\n        continue\n    else:\n        disables.pop(disable)\n    print\nreturn disables\n</code></pre>\n"}], "owner": {"reputation": 397, "user_id": 1442916, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/74248bdf5b02584e72315e7be2e745b1?s=128&d=identicon&r=PG", "display_name": "Daniel Dow", "link": "https://stackoverflow.com/users/1442916/daniel-dow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 904, "favorite_count": 0, "accepted_answer_id": 31709565, "answer_count": 1, "score": -1, "last_activity_date": 1438198480, "creation_date": 1438197733, "last_edit_date": 1438197875, "question_id": 31709344, "link": "https://stackoverflow.com/questions/31709344/datetime-conversions-to-timestamp", "title": "Datetime conversions to timestamp", "body": "<p>I'm trying to write some code that will filter records from SalesForce that have a value in a field that is not before now.  I have given up on trying to format a query that filters the results from SalesForce because not I have tried works and nothing anyone has suggested works (they all return \"malformed request\").  Although, I'm obviously open to suggestions on that front, too.</p>\n\n<p>So, I have settled on something like this:</p>\n\n<pre><code>        now = datetime.now(pytz.UTC)\n        disables = self.sssvc.query(\"select Name, Project__c, Ownerid, Id, DisableOn__c, User__c from PIXDisableUserTask__c WHERE Status__c = 'Pending'\")\n        for disable in disables[u'records']:\n            disable_on = disable[u'DisableOn__c']\n            if disable_on &lt; now:\n                continue\n            else:\n                disables.pop(disable)\n            print\n        return disables\n</code></pre>\n\n<p>But when I'm done I end up with two incompatible date formats for comparison.  The problem is, I don't know how to convert the value of \"now\" from datetime and \"disable_on\" from SalesForce into time stamps that can be compared.  What I get is something like:</p>\n\n<pre><code>now = 2015-07-29 19:19:07.322224+00:00\ndisable_on = u'2015-06-24T12:00:00.000+0000'\n</code></pre>\n\n<p>I know I need to change disable from a string to an actual datetime object in UTC, but I don't know what formula to use. </p>\n"}, {"tags": ["python", "oracle", "sqlalchemy"], "answers": [{"comments": [{"owner": {"reputation": 1269, "user_id": 2605251, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/yE7ux.jpg?s=128&g=1", "display_name": "Leandro Poblet", "link": "https://stackoverflow.com/users/2605251/leandro-poblet"}, "edited": false, "score": 0, "creation_date": 1438198033, "post_id": 31709363, "comment_id": 51356912, "body": "I&#39;ve tried this, but I get <code>*** DatabaseError: (DatabaseError) ORA-01008: not all variables bound</code>"}, {"owner": {"reputation": 1269, "user_id": 2605251, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/yE7ux.jpg?s=128&g=1", "display_name": "Leandro Poblet", "link": "https://stackoverflow.com/users/2605251/leandro-poblet"}, "edited": false, "score": 0, "creation_date": 1438198864, "post_id": 31709363, "comment_id": 51357364, "body": "Yes, but I need to declare the variable where it returns the value to which is why I think it throws that error."}, {"owner": {"reputation": 7517, "user_id": 1622937, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7d52797cb00243775296ee11758f38b0?s=128&d=identicon&r=PG", "display_name": "jojo", "link": "https://stackoverflow.com/users/1622937/jojo"}, "reply_to_user": {"reputation": 1269, "user_id": 2605251, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/yE7ux.jpg?s=128&g=1", "display_name": "Leandro Poblet", "link": "https://stackoverflow.com/users/2605251/leandro-poblet"}, "edited": false, "score": 0, "creation_date": 1438200194, "post_id": 31709363, "comment_id": 51358120, "body": "Hm, to be honest I&#39;m not quite sure how this is best done if you <i>have</i> to pass the raw SQL command. Would it be an option to create the trigger in sqlalchemy and hook it to a <code>DDL</code> event? <a href=\"http://docs.sqlalchemy.org/en/rel_1_0/core/schema.html#customizing-ddl\" rel=\"nofollow noreferrer\">For more on DDL</a>  Sorry for not being more of a help on this."}], "tags": [], "owner": {"reputation": 7517, "user_id": 1622937, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7d52797cb00243775296ee11758f38b0?s=128&d=identicon&r=PG", "display_name": "jojo", "link": "https://stackoverflow.com/users/1622937/jojo"}, "is_accepted": false, "score": 1, "last_activity_date": 1438197813, "creation_date": 1438197813, "answer_id": 31709363, "question_id": 31709252, "link": "https://stackoverflow.com/questions/31709252/how-to-execute-a-raw-query-with-returning-in-sqlalchemy/31709363#31709363", "title": "How to execute a raw query with returning in sqlalchemy", "body": "<p>You should be able to use the <a href=\"http://docs.sqlalchemy.org/en/rel_1_0/core/connections.html#sqlalchemy.engine.Engine.execute\" rel=\"nofollow\">execute</a> command.\nSomething like this:</p>\n\n<pre><code>raw_SQL = \"INSERT INTO TICKET (value, date) values (100, TO_DATE('07-29-2015', 'mm-dd-yyyy')) returning ticket_number into :ticket_number;\"\nconnection = engine.connect()\nresult = connection.execute(raw_SQL)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1269, "user_id": 2605251, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/yE7ux.jpg?s=128&g=1", "display_name": "Leandro Poblet", "link": "https://stackoverflow.com/users/2605251/leandro-poblet"}, "edited": false, "score": 0, "creation_date": 1438354614, "post_id": 31742805, "comment_id": 51432222, "body": "The difference in oracle <a href=\"http://docs.oracle.com/cd/B19306_01/appdev.102/b14261/returninginto_clause.htm\" rel=\"nofollow noreferrer\">returning into</a> clause is that it forces you to declare a variable to make the return to, and applying this would only return <code>*** DatabaseError: (DatabaseError) ORA-01008: not all variables bound</code>."}, {"owner": {"reputation": 3364, "user_id": 3519000, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/8UkXR.jpg?s=128&g=1", "display_name": "lrnzcig", "link": "https://stackoverflow.com/users/3519000/lrnzcig"}, "reply_to_user": {"reputation": 1269, "user_id": 2605251, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/yE7ux.jpg?s=128&g=1", "display_name": "Leandro Poblet", "link": "https://stackoverflow.com/users/2605251/leandro-poblet"}, "edited": false, "score": 0, "creation_date": 1438355601, "post_id": 31742805, "comment_id": 51432896, "body": "Ok. The point Postgres does not accept <code>returning into</code> (not even when you try to run it in <code>pgadmin</code>. I would try something like <code>session.connection().execute(&quot;insert into usertable values(&#39;m6&#39;, &#39;kk2&#39;, &#39;Chile&#39;) returning username into ?&quot;, result)</code>, but I can&#39;t test it in oracle right now I think"}, {"owner": {"reputation": 3364, "user_id": 3519000, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/8UkXR.jpg?s=128&g=1", "display_name": "lrnzcig", "link": "https://stackoverflow.com/users/3519000/lrnzcig"}, "reply_to_user": {"reputation": 1269, "user_id": 2605251, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/yE7ux.jpg?s=128&g=1", "display_name": "Leandro Poblet", "link": "https://stackoverflow.com/users/2605251/leandro-poblet"}, "edited": false, "score": 0, "creation_date": 1438358616, "post_id": 31742805, "comment_id": 51434624, "body": "I&#39;ve finally was able to try in oracle and indeed it does not work. In case it helps, <code>session.connection().execute(&quot;insert into usertable values(&#39;m6&#39;, &#39;kk2&#39;, &#39;Chile&#39;) returning username into :u&quot;, result)</code> inserts the register with no error, but afterwards I did not find the way to get back the result."}, {"owner": {"reputation": 1269, "user_id": 2605251, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/yE7ux.jpg?s=128&g=1", "display_name": "Leandro Poblet", "link": "https://stackoverflow.com/users/2605251/leandro-poblet"}, "edited": false, "score": 0, "creation_date": 1438375915, "post_id": 31742805, "comment_id": 51443550, "body": "I&#39;ve had the same issue. Based on checking the <a href=\"https://github.com/zzzeek/sqlalchemy/blob/0766c80b9c02fdbad3203835ab850ad690f4c03b/lib/sqlalchemy/dialects/oracle/zxjdbc.py#L69\" rel=\"nofollow noreferrer\">source code</a> I think that I have to declare the variable as a type, but I haven&#39;t give it a shot yet."}, {"owner": {"reputation": 3364, "user_id": 3519000, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/8UkXR.jpg?s=128&g=1", "display_name": "lrnzcig", "link": "https://stackoverflow.com/users/3519000/lrnzcig"}, "reply_to_user": {"reputation": 1269, "user_id": 2605251, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/yE7ux.jpg?s=128&g=1", "display_name": "Leandro Poblet", "link": "https://stackoverflow.com/users/2605251/leandro-poblet"}, "edited": false, "score": 0, "creation_date": 1438422228, "post_id": 31742805, "comment_id": 51453529, "body": "Did some trials but could not make it work. I think the key problem is, when you build the statement using the <code>returning</code> method, you get as an output an object of type <code>ReturningResultProxy</code>, and from there you can get the result. However, in a raw statement like yours, and in oracle, the result is just <code>ResultProxy</code>, which has no info about the parameters, even if you use <code>bindparam()</code>. Well, at least in the trials I did...."}, {"owner": {"reputation": 3364, "user_id": 3519000, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/8UkXR.jpg?s=128&g=1", "display_name": "lrnzcig", "link": "https://stackoverflow.com/users/3519000/lrnzcig"}, "reply_to_user": {"reputation": 1269, "user_id": 2605251, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/yE7ux.jpg?s=128&g=1", "display_name": "Leandro Poblet", "link": "https://stackoverflow.com/users/2605251/leandro-poblet"}, "edited": false, "score": 0, "creation_date": 1438429336, "post_id": 31742805, "comment_id": 51455373, "body": "Updated the response. If you find a better solution, please post it!"}, {"owner": {"reputation": 1269, "user_id": 2605251, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/yE7ux.jpg?s=128&g=1", "display_name": "Leandro Poblet", "link": "https://stackoverflow.com/users/2605251/leandro-poblet"}, "edited": false, "score": 1, "creation_date": 1438614222, "post_id": 31742805, "comment_id": 51509413, "body": "The answer hits right on the spot. The only thing I would add is that to get the value you need to do <code>out.getvalue()</code>. Thanks!"}], "tags": [], "owner": {"reputation": 3364, "user_id": 3519000, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/8UkXR.jpg?s=128&g=1", "display_name": "lrnzcig", "link": "https://stackoverflow.com/users/3519000/lrnzcig"}, "is_accepted": true, "score": 4, "last_activity_date": 1438623010, "last_edit_date": 1438623010, "creation_date": 1438335128, "answer_id": 31742805, "question_id": 31709252, "link": "https://stackoverflow.com/questions/31709252/how-to-execute-a-raw-query-with-returning-in-sqlalchemy/31742805#31742805", "title": "How to execute a raw query with returning in sqlalchemy", "body": "<p>I've tried this with a toy table in Postgres and it works, I think should be equivalent in Oracle, please let me know.</p>\n\n<pre><code>In [15]:\n\nresult = session.connection().execute(\"insert into usertable values('m6', 'kk2', 'Chile') returning username\")\nfor r in result:\n    print r\n(u'm6',)\n</code></pre>\n\n<p>Hope it helps.</p>\n\n<p><strong>EDIT for Oracle</strong>: the one way to do it that I've found is not very elegant. It would be using the raw connection underneath <code>SQLAlchemy</code> connection, something like:</p>\n\n<pre><code>In [15]:\n\nfrom sqlalchemy.sql import text\nimport cx_Oracle\n\u200b\ncur = session.connection().connection.cursor()\nout = cur.var(cx_Oracle.STRING)\npar = { \"u\" : out }   \u200b\ncur.prepare(\"insert into usertable values('m34', 'kk2', 'Chile') returning username into :u\")\ncur.execute(None, par)\n\u200b\nprint(out)\nprint(type(out))\nprint(out.getvalue())\n\u200b\n\u200b\n&lt;cx_Oracle.STRING with value 'm34'&gt;\n&lt;type 'cx_Oracle.STRING'&gt;\nm34\n</code></pre>\n\n<p>Unfortunately, I don't think there is a way to create a <code>cx_oracle variable</code> instance, it is just not available in the api, see <a href=\"http://cx-oracle.readthedocs.org/en/latest/variable.html#varobj\" rel=\"nofollow\">docs</a>.</p>\n\n<p>Then, there is no way to avoid creating the cursor, even if it works when you delegate more to <code>SQLAlchemy</code>:</p>\n\n<pre><code>In [28]:\n\nfrom sqlalchemy.sql import text\nimport cx_Oracle\n\u200b\ncur = session.connection().connection.cursor()\nout = cur.var(cx_Oracle.STRING)\npar = { \"u\" : out }\n\u200b\nq = text(\"insert into usertable values('m43', 'kk2', 'Chile') returning username into :u\")\nresult = session.connection().execute(q, par)\nprint(par[\"u\"])\nprint(out)\ntype(out)\n\n\u200b&lt;cx_Oracle.STRING with value 'm43'&gt;\n&lt;cx_Oracle.STRING with value 'm43'&gt;\nOut[28]:\ncx_Oracle.STRING\n</code></pre>\n\n<p>Of course, you should close the cursor in this second case (in the first one, oracle closes it). The point that there is no way to create an instance like <code>out = cx_Oracle.STRING()</code></p>\n\n<p>As I say, it is not very elegant, but I don't think there is a way to create an equivalent variable in <code>SQLAlchemy</code>. It is something that the code handles internally. I would just go for the raw connection-cursor.</p>\n\n<p>Hope it helps.</p>\n\n<p><strong>EDIT2</strong>: In the code above, added <code>out.getvalue()</code> as suggested. Thanks!</p>\n"}], "owner": {"reputation": 1269, "user_id": 2605251, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/yE7ux.jpg?s=128&g=1", "display_name": "Leandro Poblet", "link": "https://stackoverflow.com/users/2605251/leandro-poblet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2997, "favorite_count": 0, "accepted_answer_id": 31742805, "answer_count": 2, "score": 3, "last_activity_date": 1438623010, "creation_date": 1438197427, "question_id": 31709252, "link": "https://stackoverflow.com/questions/31709252/how-to-execute-a-raw-query-with-returning-in-sqlalchemy", "title": "How to execute a raw query with returning in sqlalchemy", "body": "<p>I have a table <strong>Ticket</strong> that has the <strong>id</strong> (autoincremental), <strong>ticket_number</strong> (trigger that reads a sequence), <strong>value</strong> and <strong>date</strong> in Oracle. And I want to do the following:</p>\n\n<pre><code>INSERT INTO TICKET (value, date) values (100, TO_DATE('07-29-2015', 'mm-dd-yyyy')) returning ticket_number into :ticket_number;\n</code></pre>\n\n<p>I need to do this in raw SQL, but I don't know how to get the value in sqlalchemy. is it possible?</p>\n"}, {"tags": ["python", "google-sheets", "gspread"], "answers": [{"tags": [], "owner": {"reputation": 783, "user_id": 3407798, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100004540026193/picture?type=large", "display_name": "nguaman", "link": "https://stackoverflow.com/users/3407798/nguaman"}, "is_accepted": true, "score": 1, "last_activity_date": 1438200653, "creation_date": 1438200653, "answer_id": 31710194, "question_id": 31709229, "link": "https://stackoverflow.com/questions/31709229/gspread-spreadsheet-not-loading-no-errors/31710194#31710194", "title": "gspread spreadsheet not loading, no errors", "body": "<p>gdata spreadsheets API is hanging </p>\n\n<p><a href=\"https://code.google.com/a/google.com/p/apps-api-issues/issues/detail?id=3939\" rel=\"nofollow\">https://code.google.com/a/google.com/p/apps-api-issues/issues/detail?id=3939</a></p>\n\n<p><a href=\"https://github.com/burnash/gspread/issues/278\" rel=\"nofollow\">https://github.com/burnash/gspread/issues/278</a></p>\n\n<p>The api is down right now.</p>\n"}], "owner": {"reputation": 371, "user_id": 5092350, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/c421049dee5a57a8c7bc89ebd13e95a8?s=128&d=identicon&r=PG&f=1", "display_name": "rishubk", "link": "https://stackoverflow.com/users/5092350/rishubk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 283, "favorite_count": 0, "accepted_answer_id": 31710194, "answer_count": 1, "score": 0, "last_activity_date": 1438200653, "creation_date": 1438197348, "question_id": 31709229, "link": "https://stackoverflow.com/questions/31709229/gspread-spreadsheet-not-loading-no-errors", "title": "gspread spreadsheet not loading, no errors", "body": "<p>I am writing a python script using gspread. Here is the code:</p>\n\n<pre><code>json_key = json.load(open('&lt;path to json&gt;'))\nscope = ['https://spreadsheets.google.com/feeds']\ncredentials = SignedJwtAssertionCredentials(json_key['client_email'], json_key['private_key'], scope)\ngc = gspread.authorize(credentials)\n\nprint \"0\"\nworksheet = gc.open(\"&lt;name of sheet&gt;\").get_worksheet(2)\nprint \"1\"\n</code></pre>\n\n<p>The 0 is printed so that means the credentials and everything are loading. But, when I try to load the actual sheet, with the actual name where it says \"name of sheet\", it doesn't actually work. Nothing happens, and there are no errors, and it never prints 1. Am I doing something wrong? I don't think I am cause I have used this exact code for weeks, and I am suddenly having a problem.</p>\n"}]