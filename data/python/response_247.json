[{"tags": ["python", "bokeh"], "comments": [{"owner": {"reputation": 29976, "user_id": 3406693, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gwfWQ.png?s=128&g=1", "display_name": "bigreddot", "link": "https://stackoverflow.com/users/3406693/bigreddot"}, "edited": false, "score": 0, "creation_date": 1570062031, "post_id": 58210752, "comment_id": 102799043, "body": "In a <code>CustomJS</code> clallback in standalone HTML output? In a real Python callback in a Bokeh server application? You need to describe your situation in more detail, and also describe (with code snippets) what you have tried already or think you might try,"}, {"owner": {"reputation": 29, "user_id": 10621280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bec3c0436132456fedb031d93debbbbe?s=128&d=identicon&r=PG&f=1", "display_name": "c3y", "link": "https://stackoverflow.com/users/10621280/c3y"}, "reply_to_user": {"reputation": 29976, "user_id": 3406693, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gwfWQ.png?s=128&g=1", "display_name": "bigreddot", "link": "https://stackoverflow.com/users/3406693/bigreddot"}, "edited": false, "score": 0, "creation_date": 1570062968, "post_id": 58210752, "comment_id": 102799219, "body": "@bigreddot Sorry, updated with more description. Let me know if you need anything else"}], "answers": [{"tags": [], "owner": {"reputation": 29976, "user_id": 3406693, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gwfWQ.png?s=128&g=1", "display_name": "bigreddot", "link": "https://stackoverflow.com/users/3406693/bigreddot"}, "is_accepted": true, "score": 0, "last_activity_date": 1570067980, "creation_date": 1570067980, "answer_id": 58211395, "question_id": 58210752, "link": "https://stackoverflow.com/questions/58210752/how-to-get-currently-active-tool-in-bokeh-figure/58211395#58211395", "title": "How To Get Currently Active Tool in Bokeh Figure", "body": "<p>As of Bokeh 1.3.4 this information is not exposed to the Python public API. You can inspect an internal property <code>.active</code> on the JavaScript side (e.g. from a <code>CustomJS</code> callback). a kludgy workaround to get the information to a Python callback might be to have a <code>CustomJS</code> look at all the tools to see which are active, and set some value on, say, an invisible glyph, that the Python side can monitor for changes. I don't think that's a good solution, but probably the best one available. You could propose making the active state available publicly as a new feature request by <a href=\"https://github.com/bokeh/bokeh/issues\" rel=\"nofollow noreferrer\">making an issue on GitHub</a>. Now that <em>read-only</em> properties exist, it might be simple and safe to allow this internal property to join the public API. </p>\n"}], "owner": {"reputation": 29, "user_id": 10621280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bec3c0436132456fedb031d93debbbbe?s=128&d=identicon&r=PG&f=1", "display_name": "c3y", "link": "https://stackoverflow.com/users/10621280/c3y"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 202, "favorite_count": 0, "accepted_answer_id": 58211395, "answer_count": 1, "score": 0, "last_activity_date": 1570067980, "creation_date": 1570060773, "last_edit_date": 1570062781, "question_id": 58210752, "link": "https://stackoverflow.com/questions/58210752/how-to-get-currently-active-tool-in-bokeh-figure", "title": "How To Get Currently Active Tool in Bokeh Figure", "body": "<p>I'm interested in finding the currently selected tool out of the toolbar on a figure. Right now I have a customized toolbar, and I want to be able to get the active tool in a Python callback for a bokeh app.</p>\n\n<pre><code>def scrollCallback():\n    # check if PanTool() is currently selected/active\n\nfig = figure(...)\nfig.toolbar.active_drag = None\nfig.toolbar.active_scroll = None\nfig.tools = [PanTool(), BoxZoomTool(), ResetTool()]\nfig.on_event(events.Pan, scrollCallback)\n\n</code></pre>\n"}, {"tags": ["python", "django"], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 9970453, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1vD28.png?s=128&g=1", "display_name": "typenil", "link": "https://stackoverflow.com/users/9970453/typenil"}, "edited": false, "score": 1, "creation_date": 1570115354, "post_id": 58211640, "comment_id": 102819622, "body": "You&#39;re right; I was misunderstanding how prefetch related operated."}], "tags": [], "owner": {"reputation": 8696, "user_id": 10746224, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/znUL5.jpg?s=128&g=1", "display_name": "Lord Elrond", "link": "https://stackoverflow.com/users/10746224/lord-elrond"}, "is_accepted": true, "score": 0, "last_activity_date": 1570070383, "creation_date": 1570070383, "answer_id": 58211640, "question_id": 58210744, "link": "https://stackoverflow.com/questions/58210744/filtering-a-django-querysets-related-manytomany-field-when-using-values/58211640#58211640", "title": "Filtering a Django queryset&#39;s related ManyToMany field when using values()", "body": "<p>I think you misunderstand what <a href=\"https://docs.djangoproject.com/en/2.2/ref/models/querysets/#prefetch-related\" rel=\"nofollow noreferrer\"><code>prefetch_related</code></a> does:</p>\n\n<blockquote>\n  <p>prefetch_related, on the other hand, does a separate lookup for each relationship, and does the \u2018joining\u2019 in Python. This allows it to prefetch many-to-many and many-to-one objects, which cannot be done using select_related, in addition to the foreign key and one-to-one relationships that are supported by select_related. </p>\n</blockquote>\n\n<p>Your best bet is to use a subquery like in your example. </p>\n"}, {"tags": [], "owner": {"reputation": 23, "user_id": 9970453, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1vD28.png?s=128&g=1", "display_name": "typenil", "link": "https://stackoverflow.com/users/9970453/typenil"}, "is_accepted": false, "score": 0, "last_activity_date": 1570127278, "creation_date": 1570127278, "answer_id": 58224952, "question_id": 58210744, "link": "https://stackoverflow.com/questions/58210744/filtering-a-django-querysets-related-manytomany-field-when-using-values/58224952#58224952", "title": "Filtering a Django queryset&#39;s related ManyToMany field when using values()", "body": "<p>Ultimately, I ended up not doing any filtering before using <code>values</code> and using an <code>Exists</code> filter after <code>values</code> was called.</p>\n\n<pre><code>qs = Fact.objects.filter(...)\nqs = qs.values(\"brand_groups__name\", \"brand_groups__id\")\n\nqs = qs.annotate(\n    brand_group_accessible=Exists(\n        BrandGroup.objects.filter(\n            organization_id=self.request.META[\"ORG_ID_HEADER\"],\n            Q(id=OuterRef(\"brand_groups__id\")))))\n\nqs = qs.filter(Q(brand_group_accessible=True) | Q(brand_groups__id__isnull=True))\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 9970453, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1vD28.png?s=128&g=1", "display_name": "typenil", "link": "https://stackoverflow.com/users/9970453/typenil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "accepted_answer_id": 58211640, "answer_count": 2, "score": 1, "last_activity_date": 1570127278, "creation_date": 1570060686, "question_id": 58210744, "link": "https://stackoverflow.com/questions/58210744/filtering-a-django-querysets-related-manytomany-field-when-using-values", "title": "Filtering a Django queryset&#39;s related ManyToMany field when using values()", "body": "<p>I'm working with a queryset which includes a <code>ManyToMany</code> field <code>brand_groups</code>. Users only have access to a subset of <code>BrandGroups</code> based on their organization. I'm trying to keep that <code>ManyToMany</code> field filtered down while still using <a href=\"https://docs.djangoproject.com/en/2.2/ref/models/querysets/#values\" rel=\"nofollow noreferrer\"><code>values()</code></a>, which is heavily integrated with the view.</p>\n\n<p>The simplified tables I'm working with:</p>\n\n<pre><code>class BrandGroup(models.Model):\n    id = models.BigAutoField(primary_key=True)\n    name = models.CharField(max_length=256)\n    organization = models.ForeignKey(\n        Organization, related_name=\"brand_groups\", null=False\n    )\n\nclass Fact(models.Model):\n    id = models.CharField(max_length=256, primary_key=True)\n    brand_groups = models.ManyToManyField(BrandGroup, blank=True)\n</code></pre>\n\n<p>What's worked for me in the past is using <code>Prefetch</code> objects to handle this kind of limiting:</p>\n\n<pre><code>qs = Fact.objects.prefetch_related(\n    Prefetch(\"brand_groups\",\n        queryset=BrandGroup.objects.filter(\n            organization_id=self.request.META[\"ORG_ID_HEADER\"]\n)))\n</code></pre>\n\n<p>But I find that <code>values()</code> seems to ignore prefetches entirely.</p>\n\n<pre><code>qs.values(\"brand_groups__name\")\n</code></pre>\n\n<p>The above always includes the full set of associated <code>BrandGroup</code> objects without the filter.</p>\n\n<p>I've tried adding <code>to_attr='org_brand_groups'</code> to the <code>Prefetch</code>, but then <code>qs.values(\"org_brand_groups__name\")</code> complains that the field doesn't exist.</p>\n\n<p>I've also tried using an annotation to rename the prefetched field in a similar way. I don't get a complaint about the field not existing, but again <code>values()</code> returns the unfiltered queryset.</p>\n\n<p>The only way I've managed to accomplish this kind of filtering is by using a subquery:</p>\n\n<pre><code>qs = Fact.objects.annotate(\n    brand_group_name=Subquery(\n        BrandGroup.objects.filter(\n            organization_id=self.request.META[\"ORG_ID_HEADER\"],\n            Q(id=OuterRef(\"brand_groups__id\"))).values(\n                \"name\"[:1],output_field=CharField(),))\n\n# Now it gives me the desired results\nqs.values(\"brand_group_name\")\n</code></pre>\n\n<p>But this approach negates what I'm trying to accomplish. The goal is to pull the <code>BrandGroup</code> data in using a join, not a subquery.</p>\n\n<p>Is there any method of filtering a <code>ManyToMany</code> related field without subqueries that will work with <code>values()</code>? My only remaining idea is to filter the queryset with Python after <code>values()</code> is already applied.</p>\n"}, {"tags": ["python", "python-3.x", "raspberry-pi", "sensors"], "answers": [{"tags": [], "owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "is_accepted": true, "score": 1, "last_activity_date": 1570061067, "creation_date": 1570061067, "answer_id": 58210785, "question_id": 58210710, "link": "https://stackoverflow.com/questions/58210710/how-to-run-various-temperature-readings-based-on-user-input-in-python/58210785#58210785", "title": "How to run various temperature readings based on user input in Python?", "body": "<p>You don't need the while loop anymore </p>\n\n<p>The for loop itself will repeat for the requested number of times</p>\n\n<pre><code>for x in range (n):\n    input()\n    humidity, temperature = Adafruit_DHT.read(DHT_SENSOR, DHT_PIN)\n    if humidity is not None and temperature is not None:\n        print(\"Temperature={0:0.1f}C Humidity={1:0.1f}%\".format(temperature, humidity))\n    else:\n        print(\"Sensor failed. Check wiring.\")\n    input()\n</code></pre>\n"}], "owner": {"reputation": 79, "user_id": 6226536, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh3.googleusercontent.com/-6RtPoYXDYIM/AAAAAAAAAAI/AAAAAAAAAJs/kbheZ5kRf9s/photo.jpg?sz=128", "display_name": "Leon Horka", "link": "https://stackoverflow.com/users/6226536/leon-horka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 158, "favorite_count": 0, "accepted_answer_id": 58210785, "answer_count": 1, "score": 1, "last_activity_date": 1570061067, "creation_date": 1570060403, "last_edit_date": 1570060832, "question_id": 58210710, "link": "https://stackoverflow.com/questions/58210710/how-to-run-various-temperature-readings-based-on-user-input-in-python", "title": "How to run various temperature readings based on user input in Python?", "body": "<p>I'm a complete amateur when it comes to Python (for Raspberry Pi) programming, what I'm trying to achieve is to ask the user the number of samples that he wants and then read and print out such number of samples, each reading separated by a simple key stroke.</p>\n\n<p>What I have is a simple set-up with a DHT11 Temperature &amp; Humidity sensor, one 10 K\u03a9 resistor, a couple of jumper cables, and of course a breadboard. The circuit works perfectly when tested along the following code:</p>\n\n<pre><code>import Adafruit_DHT\nimport time\n\nDHT_SENSOR = Adafruit_DHT.DHT11\nDHT_PIN = 4\n\nwhile True:\n    humidity, temperature = Adafruit_DHT.read(DHT_SENSOR, DHT_PIN)\n    if humidity is not None and temperature is not None:\n        print(\"Temperature={0:0.1f}C Humidity={1:0.1f}%\".format(temperature, humidity))\n    else:\n        print(\"Sensor failed. Check wiring.\");\n    time.sleep(3)\n</code></pre>\n\n<p>What this code does is essentially reading/printing out both temperature and humidity every three seconds, <em>indefinitely</em>. </p>\n\n<p>However, like I said, what I'm trying to achieve is to ask the user the number of samples that he wants and then read and print out such number of samples, each reading separated by a simple key stroke. Here's the code I've been working on:</p>\n\n<pre><code>import Adafruit_DHT\n\nDHT_SENSOR = Adafruit_DHT.DHT11\nDHT_PIN = 4\n\nn = int (input(\"Number of samples?\\n\"))\nprint()\n\n\nfor x in range (n):\n    input()\n    while True:\n        humidity, temperature = Adafruit_DHT.read(DHT_SENSOR, DHT_PIN)\n    if humidity is not None and temperature is not None:\n        print(\"Temperature={0:0.1f}C Humidity={1:0.1f}%\".format(temperature, humidity))\n    else:\n        print(\"Sensor failed. Check wiring.\")\n    input()\n</code></pre>\n\n<p>Example of the desired operation:</p>\n\n<ol>\n<li>\"Number of samples?\"</li>\n<li>2</li>\n<li><em>User presses any key</em></li>\n<li>\"Temperature=23.0C Humidity=63.0%\"</li>\n<li><em>User presses any key</em></li>\n<li>\"Temperature=24.0C Humidity=64.0%\"</li>\n</ol>\n\n<p>Any idea how to fix the code so it does what I want?</p>\n"}, {"tags": ["python", "tensorflow", "keras", "neural-network"], "comments": [{"owner": {"reputation": 161, "user_id": 8834490, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e2b579cc7ce5aaef47ffcd5cfa363183?s=128&d=identicon&r=PG&f=1", "display_name": "entropy", "link": "https://stackoverflow.com/users/8834490/entropy"}, "edited": false, "score": 1, "creation_date": 1570062781, "post_id": 58210700, "comment_id": 102799173, "body": "I had experienced similar problem 2 years ago, although I had set the three level seeds, and in the end, I abandoned Keras for that reason and switched to pure TF. There was also a similar complain somewhere else.  Not sure if the problem is solved by now."}, {"owner": {"reputation": 368, "user_id": 11861082, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-5ZYmOzBAAWc/AAAAAAAAAAI/AAAAAAAAAbc/7N4KXGbzNzQ/photo.jpg?sz=128", "display_name": "Albert", "link": "https://stackoverflow.com/users/11861082/albert"}, "reply_to_user": {"reputation": 161, "user_id": 8834490, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e2b579cc7ce5aaef47ffcd5cfa363183?s=128&d=identicon&r=PG&f=1", "display_name": "entropy", "link": "https://stackoverflow.com/users/8834490/entropy"}, "edited": false, "score": 0, "creation_date": 1570120151, "post_id": 58210700, "comment_id": 102822004, "body": "@entropy Thanks for the comment. Can you answer my first question as well? Why at every time the two identical models defined in two different ways yield different answers?"}], "answers": [{"comments": [{"owner": {"reputation": 368, "user_id": 11861082, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-5ZYmOzBAAWc/AAAAAAAAAAI/AAAAAAAAAbc/7N4KXGbzNzQ/photo.jpg?sz=128", "display_name": "Albert", "link": "https://stackoverflow.com/users/11861082/albert"}, "edited": false, "score": 0, "creation_date": 1570063275, "post_id": 58210853, "comment_id": 102799275, "body": "Thanks. I tried it but still, answers are different at different runs (they give similar results after a few runs). Also, my main question is about why the models give answers at each run?"}, {"owner": {"reputation": 14244, "user_id": 10133797, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DLiLn.png?s=128&g=1", "display_name": "OverLordGoldDragon", "link": "https://stackoverflow.com/users/10133797/overlordgolddragon"}, "reply_to_user": {"reputation": 368, "user_id": 11861082, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-5ZYmOzBAAWc/AAAAAAAAAAI/AAAAAAAAAbc/7N4KXGbzNzQ/photo.jpg?sz=128", "display_name": "Albert", "link": "https://stackoverflow.com/users/11861082/albert"}, "edited": false, "score": 0, "creation_date": 1570064898, "post_id": 58210853, "comment_id": 102799580, "body": "@Albert See updated answer; for your particular case, you should get near-perfectly reproducible results if you set all three seeds - so if you really run the same code twice and get results that differ by more than 0.1-0.05%, something is off (unsure what)"}, {"owner": {"reputation": 368, "user_id": 11861082, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-5ZYmOzBAAWc/AAAAAAAAAAI/AAAAAAAAAbc/7N4KXGbzNzQ/photo.jpg?sz=128", "display_name": "Albert", "link": "https://stackoverflow.com/users/11861082/albert"}, "edited": false, "score": 0, "creation_date": 1570119756, "post_id": 58210853, "comment_id": 102821808, "body": "@Thanks. Can you answer the other part of my question as well? Why at each time, two models yield different answers?"}, {"owner": {"reputation": 14244, "user_id": 10133797, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DLiLn.png?s=128&g=1", "display_name": "OverLordGoldDragon", "link": "https://stackoverflow.com/users/10133797/overlordgolddragon"}, "reply_to_user": {"reputation": 368, "user_id": 11861082, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-5ZYmOzBAAWc/AAAAAAAAAAI/AAAAAAAAAbc/7N4KXGbzNzQ/photo.jpg?sz=128", "display_name": "Albert", "link": "https://stackoverflow.com/users/11861082/albert"}, "edited": false, "score": 0, "creation_date": 1570144781, "post_id": 58210853, "comment_id": 102830846, "body": "@Albert I have, in my previous comment and in my answer under &quot;Sources of randomness&quot;; the question now is, <i>how different</i> are your results if you use all three seeds? For example, what&#39;s the average % difference in losses that you&#39;re seeing? -- (Also, use &quot;@&quot;username (without quotations) to notify users of your reply)"}, {"owner": {"reputation": 368, "user_id": 11861082, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-5ZYmOzBAAWc/AAAAAAAAAAI/AAAAAAAAAbc/7N4KXGbzNzQ/photo.jpg?sz=128", "display_name": "Albert", "link": "https://stackoverflow.com/users/11861082/albert"}, "edited": false, "score": 0, "creation_date": 1570146429, "post_id": 58210853, "comment_id": 102831164, "body": "First of all, I read online and it seems that the numpy seed has to be set before tensorflow is imported. So, I have done this at the beginning of my code:   import numpy as np np.random.seed(1) import random random.seed(2) import tensorflow as tf tf.set_random_seed(3)"}, {"owner": {"reputation": 368, "user_id": 11861082, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-5ZYmOzBAAWc/AAAAAAAAAAI/AAAAAAAAAbc/7N4KXGbzNzQ/photo.jpg?sz=128", "display_name": "Albert", "link": "https://stackoverflow.com/users/11861082/albert"}, "edited": false, "score": 0, "creation_date": 1570146459, "post_id": 58210853, "comment_id": 102831170, "body": "Now, it is stable. Can you update your answer? I have suggested an edit."}, {"owner": {"reputation": 368, "user_id": 11861082, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-5ZYmOzBAAWc/AAAAAAAAAAI/AAAAAAAAAbc/7N4KXGbzNzQ/photo.jpg?sz=128", "display_name": "Albert", "link": "https://stackoverflow.com/users/11861082/albert"}, "edited": false, "score": 0, "creation_date": 1570146727, "post_id": 58210853, "comment_id": 102831233, "body": "Please see my updated question. I have given the numbers."}, {"owner": {"reputation": 14244, "user_id": 10133797, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DLiLn.png?s=128&g=1", "display_name": "OverLordGoldDragon", "link": "https://stackoverflow.com/users/10133797/overlordgolddragon"}, "reply_to_user": {"reputation": 368, "user_id": 11861082, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-5ZYmOzBAAWc/AAAAAAAAAAI/AAAAAAAAAbc/7N4KXGbzNzQ/photo.jpg?sz=128", "display_name": "Albert", "link": "https://stackoverflow.com/users/11861082/albert"}, "edited": false, "score": 0, "creation_date": 1570147443, "post_id": 58210853, "comment_id": 102831364, "body": "@Albert Unsure I understand - you say &quot;now it is stable&quot;, and &quot;here is the result I get <i>every time</i>&quot; - in other words, the two models&#39; results are no longer different?"}, {"owner": {"reputation": 368, "user_id": 11861082, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-5ZYmOzBAAWc/AAAAAAAAAAI/AAAAAAAAAbc/7N4KXGbzNzQ/photo.jpg?sz=128", "display_name": "Albert", "link": "https://stackoverflow.com/users/11861082/albert"}, "edited": false, "score": 0, "creation_date": 1570147584, "post_id": 58210853, "comment_id": 102831389, "body": "Sorry for the confusion. I get result1 for my first model, and I get result2 for my second model. result1 is not equal to result2 (see above). But, result1 does not change if I rerun the code. Also, result2 does not change if I rerun the code."}, {"owner": {"reputation": 14244, "user_id": 10133797, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DLiLn.png?s=128&g=1", "display_name": "OverLordGoldDragon", "link": "https://stackoverflow.com/users/10133797/overlordgolddragon"}, "reply_to_user": {"reputation": 368, "user_id": 11861082, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-5ZYmOzBAAWc/AAAAAAAAAAI/AAAAAAAAAbc/7N4KXGbzNzQ/photo.jpg?sz=128", "display_name": "Albert", "link": "https://stackoverflow.com/users/11861082/albert"}, "edited": false, "score": 0, "creation_date": 1570148685, "post_id": 58210853, "comment_id": 102831594, "body": "@Albert It&#39;d help if you explicitly labeled &quot;Result1&quot; and &quot;Result2&quot; in your question, as there are now 3-4 separate loss windows, and I cannot discern which is which. Also, I just noticed you have two different model codes - in the future, it&#39;d help labeling them <code>model1</code> and <code>model2</code>, as latter also came first"}, {"owner": {"reputation": 14244, "user_id": 10133797, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DLiLn.png?s=128&g=1", "display_name": "OverLordGoldDragon", "link": "https://stackoverflow.com/users/10133797/overlordgolddragon"}, "reply_to_user": {"reputation": 368, "user_id": 11861082, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-5ZYmOzBAAWc/AAAAAAAAAAI/AAAAAAAAAbc/7N4KXGbzNzQ/photo.jpg?sz=128", "display_name": "Albert", "link": "https://stackoverflow.com/users/11861082/albert"}, "edited": false, "score": 0, "creation_date": 1570148916, "post_id": 58210853, "comment_id": 102831647, "body": "@Albert Try removing <code>Activation(&#39;linear&#39;)</code> from your <code>Sequential</code> model - see if the models begin to agree"}, {"owner": {"reputation": 368, "user_id": 11861082, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-5ZYmOzBAAWc/AAAAAAAAAAI/AAAAAAAAAbc/7N4KXGbzNzQ/photo.jpg?sz=128", "display_name": "Albert", "link": "https://stackoverflow.com/users/11861082/albert"}, "edited": false, "score": 0, "creation_date": 1570348226, "post_id": 58210853, "comment_id": 102879867, "body": "Thanks. I have marked what I mean by result1 and result 2."}, {"owner": {"reputation": 368, "user_id": 11861082, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-5ZYmOzBAAWc/AAAAAAAAAAI/AAAAAAAAAbc/7N4KXGbzNzQ/photo.jpg?sz=128", "display_name": "Albert", "link": "https://stackoverflow.com/users/11861082/albert"}, "edited": false, "score": 0, "creation_date": 1570348408, "post_id": 58210853, "comment_id": 102879895, "body": "After I removed the Activation(&#39;linear&#39;) from your Sequential model, they did not agree. The same as before. I wouldn&#39;t expect a change with removing that since linear is just bypassing the activation. BTW, if you copy and paste the code you can see how different they are on your machine."}, {"owner": {"reputation": 14244, "user_id": 10133797, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DLiLn.png?s=128&g=1", "display_name": "OverLordGoldDragon", "link": "https://stackoverflow.com/users/10133797/overlordgolddragon"}, "reply_to_user": {"reputation": 368, "user_id": 11861082, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-5ZYmOzBAAWc/AAAAAAAAAAI/AAAAAAAAAbc/7N4KXGbzNzQ/photo.jpg?sz=128", "display_name": "Albert", "link": "https://stackoverflow.com/users/11861082/albert"}, "edited": false, "score": 0, "creation_date": 1570415812, "post_id": 58210853, "comment_id": 102894011, "body": "@Albert A very interesting case, originally went over my head per question formatting -- answer updated."}, {"owner": {"reputation": 368, "user_id": 11861082, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-5ZYmOzBAAWc/AAAAAAAAAAI/AAAAAAAAAbc/7N4KXGbzNzQ/photo.jpg?sz=128", "display_name": "Albert", "link": "https://stackoverflow.com/users/11861082/albert"}, "edited": false, "score": 0, "creation_date": 1570472742, "post_id": 58210853, "comment_id": 102916857, "body": "Thanks a lot. You mean the seed changes after each use?"}, {"owner": {"reputation": 368, "user_id": 11861082, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-5ZYmOzBAAWc/AAAAAAAAAAI/AAAAAAAAAbc/7N4KXGbzNzQ/photo.jpg?sz=128", "display_name": "Albert", "link": "https://stackoverflow.com/users/11861082/albert"}, "edited": false, "score": 0, "creation_date": 1570473337, "post_id": 58210853, "comment_id": 102917136, "body": "When I make two separate *.py files and set three random seeds as suggested by your answer, I get very similar results. especially, if I run the codes multiple times, I can see although the answers change, I get just a few different possible results. Still, I am not sure what happens in a single py code that the results are not similar. Even when I set the numpy seed before each line, the same thing happens."}, {"owner": {"reputation": 14244, "user_id": 10133797, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DLiLn.png?s=128&g=1", "display_name": "OverLordGoldDragon", "link": "https://stackoverflow.com/users/10133797/overlordgolddragon"}, "reply_to_user": {"reputation": 368, "user_id": 11861082, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-5ZYmOzBAAWc/AAAAAAAAAAI/AAAAAAAAAbc/7N4KXGbzNzQ/photo.jpg?sz=128", "display_name": "Albert", "link": "https://stackoverflow.com/users/11861082/albert"}, "edited": false, "score": 0, "creation_date": 1570474784, "post_id": 58210853, "comment_id": 102917759, "body": "@Albert Numpy seeds alone won&#39;t be enough - set <i>every</i> seed before building the model. Here, try <a href=\"https://pastebin.com/8HGwxZVC\" rel=\"nofollow noreferrer\">this</a>"}, {"owner": {"reputation": 14244, "user_id": 10133797, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DLiLn.png?s=128&g=1", "display_name": "OverLordGoldDragon", "link": "https://stackoverflow.com/users/10133797/overlordgolddragon"}, "reply_to_user": {"reputation": 368, "user_id": 11861082, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-5ZYmOzBAAWc/AAAAAAAAAAI/AAAAAAAAAbc/7N4KXGbzNzQ/photo.jpg?sz=128", "display_name": "Albert", "link": "https://stackoverflow.com/users/11861082/albert"}, "edited": false, "score": 0, "creation_date": 1570476029, "post_id": 58210853, "comment_id": 102918322, "body": "@Albert And the seeds don&#39;t change (but something else does) - see updated answer"}], "tags": [], "owner": {"reputation": 14244, "user_id": 10133797, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DLiLn.png?s=128&g=1", "display_name": "OverLordGoldDragon", "link": "https://stackoverflow.com/users/10133797/overlordgolddragon"}, "is_accepted": true, "score": 3, "last_activity_date": 1570478870, "last_edit_date": 1570478870, "creation_date": 1570061865, "answer_id": 58210853, "question_id": 58210700, "link": "https://stackoverflow.com/questions/58210700/are-these-models-equivalent/58210853#58210853", "title": "Are these models equivalent?", "body": "<p>The problem's rooted in the <em>expected vs. actual</em> behavior of model definition and randomness. To see what's going on, we must understand how \"RNG\" works:</p>\n\n<ul>\n<li>A \"random number generator\" (RNG) is actually a function that produces numbers such that they map onto a probability distribution 'in the long run'</li>\n<li>When the RNG function, e.g. <code>RNG()</code> is called, it returns a \"random\" value and <em>increments its internal counter by 1</em>. Call this counter <code>n</code> - then: <code>random_value = RNG(n)</code></li>\n<li>When you set a SEED, you set <code>n</code> according to the value of that seed (but not <em>to</em> that seed); we can represent this difference via <code>+ c</code> in the counter</li>\n<li><code>c</code> will be a constant produced by a non-linear, but deterministic, function of the seed: <code>f(seed)</code></li>\n</ul>\n\n<pre class=\"lang-py prettyprint-override\"><code>import numpy as np\n\nnp.random.seed(4)         # internal counter = 0 + c\nprint(np.random.random()) # internal counter = 1 + c\nprint(np.random.random()) # internal counter = 2 + c\nprint(np.random.random()) # internal counter = 3 + c\n\nnp.random.seed(4)         # internal counter = 0 + c\nprint(np.random.random()) # internal counter = 1 + c\nprint(np.random.random()) # internal counter = 2 + c\nprint(np.random.random()) # internal counter = 3 + c\n</code></pre>\n\n<pre class=\"lang-py prettyprint-override\"><code>0.9670298390136767\n0.5472322491757223\n0.9726843599648843\n\n0.9670298390136767\n0.5472322491757223\n0.9726843599648843\n</code></pre>\n\n<p>Suppose <code>model1</code> has 100 weights, and you set a seed (<code>n = 0 + c</code>). After <code>model1</code> is built, your counter is at <code>100 + c</code>. If you <em>don't</em> reset the seed, even if you  build <code>model2</code> with the <em>exact same code</em>, the models will differ - as <code>model2</code>'s weights are initialized per <code>n</code> from <code>100 + c</code> to <code>200 + c</code>.</p>\n\n<p><hr>\n<strong>Additional info:</strong></p>\n\n<p>There are <em>three</em> seeds to ensure better randomness:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import numpy as np\nnp.random.seed(1)         # for Numpy ops\nimport random \nrandom.seed(2)            # for Python ops\nimport tensorflow as tf\ntf.set_random_seed(3)     # for tensorfow ops - e.g. Dropout masks\n</code></pre>\n\n<p>This'll give pretty good reproducibility, but not perfect if you're using a GPU - due to parallelism of operations; <a href=\"https://www.youtube.com/watch?v=Ys8ofBeR2kA\" rel=\"nofollow noreferrer\">this video</a> explains it well. For even better reproducibility, set your <code>PYHTONHASHSEED</code> - that and other info in the official <a href=\"https://keras.io/getting-started/faq/#how-can-i-obtain-reproducible-results-using-keras-during-development\" rel=\"nofollow noreferrer\">Keras FAQ</a>. </p>\n\n<p>\"Perfect\" reproducibility is rather redundant, as your results should agree within .1% majority of the time - but if you really need it, likely the only way currently is to switch to CPU and stop using CUDA - but that'll slow down training tremendously (by x10+).</p>\n\n<hr>\n\n<p><strong>Sources of randomness</strong>:</p>\n\n<ul>\n<li>Weight initializations (every default Keras initializer uses randomness)</li>\n<li>Noise layers (Dropout, GaussianNoise, etc)</li>\n<li><a href=\"https://github.com/keras-team/keras/issues/2280#issuecomment-306959926\" rel=\"nofollow noreferrer\">Hashing</a> for hash-based operations, e.g. item order in a set or dict</li>\n<li>GPU parallelism (see linked video)</li>\n</ul>\n\n<hr>\n\n<p><strong>Model randomness demo</strong>:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import numpy as np\nnp.random.seed(4)\n\nmodel1_init_weights = [np.random.random(), np.random.random(), np.random.random()]\nmodel2_init_weights = [np.random.random(), np.random.random(), np.random.random()]\nprint(\"model1_init_weights:\", model1_init_weights)\nprint(\"model2_init_weights:\", model2_init_weights)\n</code></pre>\n\n<pre class=\"lang-py prettyprint-override\"><code>model1_init_weights: [0.9670298390136767, 0.5472322491757223, 0.9726843599648843]\nmodel2_init_weights: [0.7148159936743647, 0.6977288245972708, 0.21608949558037638]\n</code></pre>\n\n<p>Restart kernel. Now run this:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import numpy as np\nnp.random.seed(4)\n\nmodel2_init_weights = [np.random.random(), np.random.random(), np.random.random()]\nmodel1_init_weights = [np.random.random(), np.random.random(), np.random.random()]\nprint(\"model1_init_weights:\", model1_init_weights)\nprint(\"model2_init_weights:\", model2_init_weights)\n</code></pre>\n\n<pre class=\"lang-py prettyprint-override\"><code>model1_init_weights: [0.7148159936743647, 0.6977288245972708, 0.21608949558037638]\nmodel2_init_weights: [0.9670298390136767, 0.5472322491757223, 0.9726843599648843]\n</code></pre>\n\n<p>Thus, flipping the order of <code>model1</code> and <code>model2</code> in your code also flips the losses. This is because the seed does not reset itself between the two models' definitions, so your weight initializations are totally different. </p>\n\n<p>If you wish them to be the same, reset the seed before defining EACH MODEL, and before FITTING each model - and use a handy function like below. But your best bet is to restart the kernel and work in separate <code>.py</code> files.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def reset_seeds():\n    np.random.seed(1)\n    random.seed(2)\n    tf.set_random_seed(3)\n    print(\"RANDOM SEEDS RESET\")\n</code></pre>\n"}], "owner": {"reputation": 368, "user_id": 11861082, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-5ZYmOzBAAWc/AAAAAAAAAAI/AAAAAAAAAbc/7N4KXGbzNzQ/photo.jpg?sz=128", "display_name": "Albert", "link": "https://stackoverflow.com/users/11861082/albert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 309, "favorite_count": 4, "accepted_answer_id": 58210853, "answer_count": 1, "score": 4, "last_activity_date": 1570478870, "creation_date": 1570060307, "last_edit_date": 1570430208, "question_id": 58210700, "link": "https://stackoverflow.com/questions/58210700/are-these-models-equivalent", "title": "Are these models equivalent?", "body": "<blockquote>\n  <p><strong>Main question:</strong> I define the same model in two different ways. Why do I get different results? They seem to be the same model. </p>\n</blockquote>\n\n<p>Secondary question (answered below) If I run the code again, I get different results again. I have set the seed at the beginning to fix the randomness. Why is that happening?</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import numpy as np\nnp.random.seed(1)\nfrom keras.models import Model, Sequential\nfrom keras.layers import Input, Dense\n\nmodel1= Sequential([\n     Dense(20, activation='sigmoid',kernel_initializer='glorot_normal', \n               input_shape=(2,)),\n     Dense(2,  activation='linear', kernel_initializer='glorot_normal'),\n])\n\nmodel1.compile(optimizer='adam', loss='mean_squared_error')\n\nipt    = Input(shape=(2,))\nx      = Dense(20, activation='sigmoid', kernel_initializer='glorot_normal')(ipt)\nout    = Dense(2,  activation='linear',  kernel_initializer='glorot_normal')(x)\nmodel2 = Model(ipt, out)\n\nmodel2.compile(optimizer='adam', loss='mean_squared_error')\n\nx_train=np.array([[1,2],[3,4],[3,4]])\n\nmodel1.fit(x_train, x_train,epochs=2, validation_split=0.1, shuffle=False)\nmodel2.fit(x_train, x_train,epochs=2, validation_split=0.1, shuffle=False)\n</code></pre>\n\n<p>The first time, the output is:</p>\n\n<pre><code>2/2 [==============================] - 0s 68ms/step - loss: 14.4394 - val_loss: 21.5747\nEpoch 2/2\n\n2/2 [==============================] - 0s 502us/step - loss: 14.3199 - val_loss: 21.4163\nTrain on 2 samples, validate on 1 samples\nEpoch 1/2\n\n2/2 [==============================] - 0s 72ms/step - loss: 11.0523 - val_loss: 17.7059\nEpoch 2/2\n\n2/2 [==============================] - 0s 491us/step - loss: 10.9833 - val_loss: 17.5785\n</code></pre>\n\n<p>The second time, the output is:</p>\n\n<pre><code>2/2 [==============================] - 0s 80ms/step - loss: 14.4394 - val_loss: 21.5747\nEpoch 2/2\n\n2/2 [==============================] - 0s 501us/step - loss: 14.3199 - val_loss: 21.4163\nTrain on 2 samples, validate on 1 samples\nEpoch 1/2\n\n2/2 [==============================] - 0s 72ms/step - loss: 11.0523 - val_loss: 17.6733\nEpoch 2/2\n\n2/2 [==============================] - 0s 485us/step - loss: 10.9597 - val_loss: 17.5459\n</code></pre>\n\n<hr>\n\n<p><strong>Update after reading the answer:</strong> By the answer below, one of my questions has been answered. I changed the beginning of my code to:</p>\n\n<pre><code>import numpy as np\nnp.random.seed(1)\nimport random\nrandom.seed(2)\nimport tensorflow as tf\ntf.set_random_seed(3)\n</code></pre>\n\n<p>And, now I am getting the same numbers as before. So, it is stable. But, my main question has remained unanswered. Why at each time, the two equivalent models give different results?</p>\n\n<p>Here is the result I get every time:</p>\n\n<p><strong>results 1:</strong></p>\n\n<pre><code>Epoch 1/2\n\n2/2 [==============================] - 0s 66ms/sample - loss: 11.9794 - val_loss: 18.9925\nEpoch 2/2\n\n2/2 [==============================] - 0s 268us/sample - loss: 11.8813 - val_loss: 18.8572\n</code></pre>\n\n<p><strong>results 2:</strong></p>\n\n<pre><code>Epoch 1/2\n\n2/2 [==============================] - 0s 67ms/sample - loss: 5.4743 - val_loss: 9.3471\nEpoch 2/2\n\n2/2 [==============================] - 0s 3ms/sample - loss: 5.4108 - val_loss: 9.2497\n</code></pre>\n"}, {"tags": ["python", "tkinter"], "comments": [{"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1570060838, "post_id": 58210695, "comment_id": 102798813, "body": "Where are you calling avsupp function? And what database are you referring to? Please edit your question to include a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 11, "user_id": 12110024, "user_type": "registered", "profile_image": "https://graph.facebook.com/3118882678182944/picture?type=large", "display_name": "Rayen Labdouni", "link": "https://stackoverflow.com/users/12110024/rayen-labdouni"}, "reply_to_user": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1570061059, "post_id": 58210695, "comment_id": 102798850, "body": "the database is in another file , you can see that i call it by ded.supp()"}, {"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1570061195, "post_id": 58210695, "comment_id": 102798873, "body": "I don&#39;t know what <code>ded</code> is. Where do you define it?"}, {"owner": {"reputation": 11, "user_id": 12110024, "user_type": "registered", "profile_image": "https://graph.facebook.com/3118882678182944/picture?type=large", "display_name": "Rayen Labdouni", "link": "https://stackoverflow.com/users/12110024/rayen-labdouni"}, "reply_to_user": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1570061269, "post_id": 58210695, "comment_id": 102798890, "body": "ded is the file of database (database functions) like add display and delete (supp).. sql code ,, i define it in the same folder of my file"}, {"owner": {"reputation": 11, "user_id": 12110024, "user_type": "registered", "profile_image": "https://graph.facebook.com/3118882678182944/picture?type=large", "display_name": "Rayen Labdouni", "link": "https://stackoverflow.com/users/12110024/rayen-labdouni"}, "reply_to_user": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1570061447, "post_id": 58210695, "comment_id": 102798925, "body": "and that is my sql code (in ded file) :**def supp(): \tconnection = sqlite3.connect(&quot;immat2.db&quot;) \tcursor = connection.cursor() \tcursor.execute(&quot;DELETE FROM ta WHERE id=?&quot;, (id,)) \tconnection.commit() \tconnection.close()**"}, {"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1570061526, "post_id": 58210695, "comment_id": 102798942, "body": "Okay, based on the code in the question, though, those details would be useful... Please <a href=\"https://stackoverflow.com/posts/58210695/edit\">edit</a> your post to include more details"}, {"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1570061618, "post_id": 58210695, "comment_id": 102798963, "body": "You could also attempt to debug your code by adding print statements where you think actions should be occurring since we&#39;re not able to run what you&#39;ve posted without a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}], "owner": {"reputation": 11, "user_id": 12110024, "user_type": "registered", "profile_image": "https://graph.facebook.com/3118882678182944/picture?type=large", "display_name": "Rayen Labdouni", "link": "https://stackoverflow.com/users/12110024/rayen-labdouni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 24, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1570085400, "creation_date": 1570060251, "last_edit_date": 1570085400, "question_id": 58210695, "link": "https://stackoverflow.com/questions/58210695/issues-deleting-selected-treeview-item-from-db", "title": "Issues deleting Selected Treeview Item from DB", "body": "<p>i have my code and there is no error in cmd , i dont know why the selected treeview items dont be deleted from the database , that is my code :</p>\n\n<pre><code>    def avsupp():\n        global xs\n        select = tree.selection()[0]\n        xs = tree.get_children(select)\n\n        self.txtdate.delete(0,END)\n        self.txtdate.insert(END,xs[1])\n        self.txtprix.delete(0,END)\n        self.txtprix.insert(END,xs[2])\n        self.txtmodele.delete(0,END)\n        self.txtmodele.insert(END,xs[3])\n        self.txtnoumat.delete(0,END)\n        self.txtnoumat.insert(END,xs[4])\n        self.txtancmat.delete(0,END)\n        self.txtancmat.insert(END,xs[5])\n        self.txtNcargr.delete(0,END)\n        self.txtNcargr.insert(END,xs[6])\n        self.txtnep.delete(0,END)\n        self.txtnep.insert(END,xs[7])\n\n    def Supprimer():    \n        if (len(prix.get())!=0):\n            ded.supp(xs[0])\n</code></pre>\n"}, {"tags": ["python", "django", "django-models"], "answers": [{"tags": [], "owner": {"reputation": 8696, "user_id": 10746224, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/znUL5.jpg?s=128&g=1", "display_name": "Lord Elrond", "link": "https://stackoverflow.com/users/10746224/lord-elrond"}, "is_accepted": true, "score": 0, "last_activity_date": 1570063355, "creation_date": 1570063355, "answer_id": 58210992, "question_id": 58210689, "link": "https://stackoverflow.com/questions/58210689/how-to-add-custom-attributes-to-querysets-in-django/58210992#58210992", "title": "How to add Custom Attributes to QuerySets in Django?", "body": "<p>Instead of <code>models.Manager</code>, you should be sub-classing <a href=\"https://docs.djangoproject.com/en/2.2/topics/db/managers/#creating-a-manager-with-queryset-methods\" rel=\"nofollow noreferrer\"><code>models.QuerySet</code></a>:</p>\n\n<pre><code>class MessageQuerySet(models.QuerySet):\n    @property\n    def unread_count(self):\n        return self.filter(read=False).count()\n</code></pre>\n\n<p>Then use the <a href=\"https://docs.djangoproject.com/en/2.2/ref/models/querysets/#django.db.models.query.QuerySet.as_manager\" rel=\"nofollow noreferrer\"><code>as_manager</code></a> method in your model:</p>\n\n<pre><code>class Message(models.Model):\n    ...\n\n    objects = MessageQuerySet.as_manager()\n</code></pre>\n\n<p>If you need to add methods to both the <code>QuerySet</code> returned from the manager, and the manager itself, you will need to use <a href=\"https://docs.djangoproject.com/en/2.2/topics/db/managers/#from-queryset\" rel=\"nofollow noreferrer\"><code>from_queryset</code></a>:</p>\n\n<pre><code>class MessageManager(models.Manager):\n    def some_manager_only_method(self):\n        print('do stuff')\n\nclass MessageQuerySet(models.QuerySet):\n    @property\n    def unread_count(self):\n        return self.filter(read=False).count()\n\nclass Message(models.Model):\n    ...\n\n    objects = MessageManager.from_queryset(MessageQuerySet)()\n</code></pre>\n"}], "owner": {"reputation": 8696, "user_id": 10746224, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/znUL5.jpg?s=128&g=1", "display_name": "Lord Elrond", "link": "https://stackoverflow.com/users/10746224/lord-elrond"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 291, "favorite_count": 0, "accepted_answer_id": 58210992, "answer_count": 1, "score": 1, "last_activity_date": 1570063615, "creation_date": 1570060138, "last_edit_date": 1570063562, "question_id": 58210689, "link": "https://stackoverflow.com/questions/58210689/how-to-add-custom-attributes-to-querysets-in-django", "title": "How to add Custom Attributes to QuerySets in Django?", "body": "<p>consider the following models:</p>\n\n<pre><code>class User(AbstractUser):\n    def messages(self):\n        return Message.objects.filter(user=self).order_by('-created_on')\n\nclass Message(models.Model):\n    user = models.ForeignKey('account.User', related_name='message', on_delete=models.CASCADE)\n    created_on = models.DateTimeField(auto_now=True)\n    data = models.TextField()\n    read = models.BooleanField(default=False)\n\n    objects = MessageManager()\n</code></pre>\n\n<p>I want to override the QuerySet behavior for the <code>Message</code> model to include a custom method, <code>unread_count</code>:</p>\n\n<pre><code>class MessageManager(models.Manager):\n    def get_queryset(self):\n        queryset = super().get_queryset()\n        unread_count = queryset.filter(read=False).count()\n        print(unread_count) # this works\n\n        # these don't work\n        queryset.unread_count = unread_count\n        setattr(queryset, 'unread_count', unread_count)\n        #\n\n        return queryset\n</code></pre>\n\n<p>The <code>messages</code> method works fine, and the print statement inside the manager executes, but if I try to access the <code>unread_count</code> I get an <code>AttributeError</code>:</p>\n\n<pre><code>&gt;&gt;&gt;user = User.objects.get(id=1)\n&gt;&gt;&gt;messages = user.messages()\n2 # this is from the print statement\n&gt;&gt;&gt;messages.unread_count\nAttributeError: 'QuerySet' object has no attribute 'unread_count'\n</code></pre>\n\n<p>What am I missing here?</p>\n"}, {"tags": ["python", "python-3.x", "windows", "strftime", "os.path"], "comments": [{"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 2, "creation_date": 1570060229, "post_id": 58210652, "comment_id": 102798702, "body": "<code>:</code> colon characters are not allowed in Windows filenames or paths. Use some other character instead."}, {"owner": {"reputation": 22176, "user_id": 461436, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/meRtc.png?s=128&g=1", "display_name": "Nilani Algiriyage", "link": "https://stackoverflow.com/users/461436/nilani-algiriyage"}, "reply_to_user": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1570060534, "post_id": 58210652, "comment_id": 102798764, "body": "@martineau : Thanks very much. It worked well."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 1, "creation_date": 1570060998, "post_id": 58210652, "comment_id": 102798835, "body": "That&#39;s good to hear. BTW, you don&#39;t really need to use <code>r</code>-prefixd and triple-quoted Windows paths if you&#39;re using the <code>&#47;</code> forward slash separator \u2014 and you only the <code>r</code>-prefixif you ever use its native backslash \\ separator character i.e. <code>r&#39;C:\\Users\\me\\foo\\bar&#39;</code> (which isn&#39;t necessary in Python)."}, {"owner": {"reputation": 22176, "user_id": 461436, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/meRtc.png?s=128&g=1", "display_name": "Nilani Algiriyage", "link": "https://stackoverflow.com/users/461436/nilani-algiriyage"}, "reply_to_user": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1570061439, "post_id": 58210652, "comment_id": 102798922, "body": "@martineau : A good advice! Thanks again."}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "reply_to_user": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1570076491, "post_id": 58210652, "comment_id": 102801423, "body": "@martineau, colon is allowed in paths -- particularly in device names (e.g. &quot;C:&quot;; and &quot;CON:&quot; can even occur as the final path component) and stream names (e.g. &quot;filename:streamname:streamtype&quot;). It&#39;s also allowed even in filenames by some file systems such as the VirtualBox shared-folder file system, but it&#39;s better to not depend on the latter because allowing colon in filenames goes against platform standards."}], "owner": {"reputation": 22176, "user_id": 461436, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/meRtc.png?s=128&g=1", "display_name": "Nilani Algiriyage", "link": "https://stackoverflow.com/users/461436/nilani-algiriyage"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 86, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1570060371, "creation_date": 1570059881, "last_edit_date": 1570060371, "question_id": 58210652, "link": "https://stackoverflow.com/questions/58210652/using-strftime-to-create-a-filename-is-issue-in-windows", "title": "Using strftime to create a filename is issue in Windows?", "body": "<p>I have the following script running in Ubuntu to download images from a web page and save them in to a directory with the current time.</p>\n\n<pre><code>import urllib.request\nimport os\nfrom datetime import datetime, date, time\n\nimages = ['https://www.abc.info/a/300.jpg', 'https://www.abc.info/b/301.jpg']\n\nfor image in images:\n    fullfilename = os.path.join('/home/me/foo/bar/', now.strftime('%Y-%m-%d %H:%M:%S ') + image.split('/')[-1])    \n    urllib.request.urlretrieve(image, fullfilename )\n</code></pre>\n\n<p>I want to replicate it in windows. The following code does't wok and this is what it says:</p>\n\n<pre><code>fullfilename = os.path.join(r'''C:\\Users\\me\\foo\\bar''' , now.strftime(\"%Y-%m-%d %H:%M:%S \") + image.split('/')[-1])\n\nOSError: [Errno 22] Invalid argument: 'C:\\\\Users\\\\me\\\\foo\\\\bar\\\\2019-10-03 12:38:48 300.jpg'\n</code></pre>\n\n<p>However the following works well. I prefer the previous format ('%Y-%m-%d %H:%M:%S '). What is the error? </p>\n\n<pre><code>fullfilename = os.path.join(r'''C:\\Users\\me\\foo\\bar''' , now.strftime(\"%Y %m %d %H %M %S \") + image.split('/')[-1])\n</code></pre>\n"}, {"tags": ["python", "tcp", "udp", "python-asyncio"], "comments": [{"owner": {"reputation": 102109, "user_id": 1600898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/01377f8b31f24b0265854666b29d0c03?s=128&d=identicon&r=PG", "display_name": "user4815162342", "link": "https://stackoverflow.com/users/1600898/user4815162342"}, "edited": false, "score": 0, "creation_date": 1570092134, "post_id": 58210641, "comment_id": 102806996, "body": "Does <a href=\"https://stackoverflow.com/a/48625510/1600898\">this answer</a> help?"}, {"owner": {"reputation": 1, "user_id": 12156514, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDuseR52ZQMwFBMYuNav6EZblSWejToLh2w6MLtEQ=k-s128", "display_name": "shakib", "link": "https://stackoverflow.com/users/12156514/shakib"}, "reply_to_user": {"reputation": 102109, "user_id": 1600898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/01377f8b31f24b0265854666b29d0c03?s=128&d=identicon&r=PG", "display_name": "user4815162342", "link": "https://stackoverflow.com/users/1600898/user4815162342"}, "edited": false, "score": 0, "creation_date": 1570101081, "post_id": 58210641, "comment_id": 102811801, "body": "Thanks but I was looking for a way to combine them more and reuse the variables. I can simply write another class for UDP, but that&#39;s not my intention ."}, {"owner": {"reputation": 10928, "user_id": 1358308, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d9448dee25fd2278def77cb7f0353574?s=128&d=identicon&r=PG", "display_name": "Sam Mason", "link": "https://stackoverflow.com/users/1358308/sam-mason"}, "edited": false, "score": 0, "creation_date": 1570103624, "post_id": 58210641, "comment_id": 102812966, "body": "what functionality do you want to share?  UDP and TCP have pretty different semantics.  also, why is <code>receive</code> doing that strange randomised <code>sleep</code> thing rather than just blocking in <code>queue.get</code>?"}, {"owner": {"reputation": 1, "user_id": 12156514, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDuseR52ZQMwFBMYuNav6EZblSWejToLh2w6MLtEQ=k-s128", "display_name": "shakib", "link": "https://stackoverflow.com/users/12156514/shakib"}, "edited": false, "score": 0, "creation_date": 1570107248, "post_id": 58210641, "comment_id": 102814974, "body": "In short I want to have one class that handle both TCP and UDP (maybe this is not a ideal way to do it, but I am not sure) or I should create two seperate class with different thread calling each one of them. Your suggestion is apperciated. for receive part it&#39;s to Return one message dequeued from the listen buffer at a time."}], "owner": {"reputation": 1, "user_id": 12156514, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDuseR52ZQMwFBMYuNav6EZblSWejToLh2w6MLtEQ=k-s128", "display_name": "shakib", "link": "https://stackoverflow.com/users/12156514/shakib"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 255, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1570059802, "creation_date": 1570059802, "question_id": 58210641, "link": "https://stackoverflow.com/questions/58210641/how-to-implement-udp-and-tcp-socket-using-asyncio", "title": "How to implement UDP and TCP socket using AsyncIo", "body": "<p>So technically I have already created a TCP listening socket and everything works fine. </p>\n\n<p>It simply get tcp json message and spit it out. </p>\n\n<pre><code>class TCPListener(Base):\n    def __init__(self,\n                 address,\n                 port,\n                 buffer,\n                 backlog,\n                 **kwargs):\n        self.tcp_address = address\n        self.tcp_port = port\n        self.tcp_buffer = buffer\n        self.tcp_asyncio_backlog = backlog\n        self.queue = queue.Queue()\n\n    def __await__(self):\n        self._server = yield from asyncio.start_server(\n            self.__on_message,\n            host=self.tcp_address,\n            port=self.tcp_port,\n            backlog=self.tcp_asyncio_backlog\n        )\n        return self\n\n    async def __on_message(self, reader, writer):\n        message = await reader.read(self.tcp_buffer)\n        try:\n            json_encoded = json.loads(message.decode('UTF-8').strip())\n            self.queue.put(json_encoded)\n        writer.close()\n\n    def start(self):\n        loop = asyncio.new_event_loop()\n        asyncio.set_event_loop(loop)\n        asyncio.ensure_future(self, loop=loop)\n\n\n    def receive(self):\n        while self.queue.empty():\n            sleep_random = random.randint(0, 1000)\n            time.sleep(sleep_random / 1000.0)\n\n        if not self.queue.empty():\n            return self.queue.get(block=False)\n        return '', ''\n\n</code></pre>\n\n<p>Now I am trying to make this code to work for both TCP and UDP listener. I wonder what function I can keep and how I share them between both Listener, kinda clueless for how to approch this ! If I am not mistaken I should use \"create_datagram_endpoint\" but still have no idea how glue it with this class and functions.</p>\n"}, {"tags": ["python", "python-3.x", "tensorflow", "tflearn"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 12346138, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sN5KA.jpg?s=128&g=1", "display_name": "Arthur", "link": "https://stackoverflow.com/users/12346138/arthur"}, "is_accepted": false, "score": 0, "last_activity_date": 1573269757, "creation_date": 1573269757, "answer_id": 58776118, "question_id": 58210609, "link": "https://stackoverflow.com/questions/58210609/how-to-fix-modulenotfounderror-no-module-named-tensorflow-contrib/58776118#58776118", "title": "How to fix: &quot;ModuleNotFoundError: No module named &#39;tensorflow.contrib&#39;&quot;", "body": "<p>Maybe you can try the TensorFlow version of 1.12.0\nI import them successfully in jupyter notebook.\n<a href=\"https://i.stack.imgur.com/LeU38.png\" rel=\"nofollow noreferrer\">jupyter result</a></p>\n"}, {"tags": [], "owner": {"reputation": 483, "user_id": 10389198, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/D4MFl.jpg?s=128&g=1", "display_name": "Lakshmi - Intel", "link": "https://stackoverflow.com/users/10389198/lakshmi-intel"}, "is_accepted": false, "score": 0, "last_activity_date": 1573272553, "creation_date": 1573272553, "answer_id": 58776326, "question_id": 58210609, "link": "https://stackoverflow.com/questions/58210609/how-to-fix-modulenotfounderror-no-module-named-tensorflow-contrib/58776326#58776326", "title": "How to fix: &quot;ModuleNotFoundError: No module named &#39;tensorflow.contrib&#39;&quot;", "body": "<p>When you install tensorflow, by default the latest version of tensorflow will install that is tensorflow 2.0 (now)  and the code that you are running (imgclassification.py) suited to execute with tensorflow 1.* as it searches for tensorflow.contrib that is absent in 2.0. So downgrade tensorflow using the below command :</p>\n\n<pre><code>pip install tensorflow==1.14\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 12903437, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-zl4_i34D26A/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc8SPouWVAnxYPWmCU1RGNHWVV7IA/photo.jpg?sz=128", "display_name": "Anuraag Velamati", "link": "https://stackoverflow.com/users/12903437/anuraag-velamati"}, "is_accepted": false, "score": 0, "last_activity_date": 1588755033, "last_edit_date": 1588755033, "creation_date": 1588746775, "answer_id": 61628816, "question_id": 58210609, "link": "https://stackoverflow.com/questions/58210609/how-to-fix-modulenotfounderror-no-module-named-tensorflow-contrib/61628816#61628816", "title": "How to fix: &quot;ModuleNotFoundError: No module named &#39;tensorflow.contrib&#39;&quot;", "body": "<p>Please follow the below steps, it may help resolve the issue.</p>\n\n<ol>\n<li><p>Upgrade your python version to 3.6 or above.</p></li>\n<li><p>Downgrade/Upgrade your TensorFlow to version 1.14.0.</p></li>\n</ol>\n\n<p>Hopefully, this should resolve the issue. </p>\n"}, {"tags": [], "owner": {"reputation": 51, "user_id": 2737811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc27e5da06a9b161e0aa08ae4d02f611?s=128&d=identicon&r=PG&f=1", "display_name": "bmabir17", "link": "https://stackoverflow.com/users/2737811/bmabir17"}, "is_accepted": false, "score": 0, "last_activity_date": 1594818917, "creation_date": 1594818917, "answer_id": 62915754, "question_id": 58210609, "link": "https://stackoverflow.com/questions/58210609/how-to-fix-modulenotfounderror-no-module-named-tensorflow-contrib/62915754#62915754", "title": "How to fix: &quot;ModuleNotFoundError: No module named &#39;tensorflow.contrib&#39;&quot;", "body": "<p>I have also faced same error. Solved it by using tensorflow v1.15.3</p>\n<p><code>pip install tensorflow-gpu==1.15.3 </code></p>\n"}], "owner": {"reputation": 30, "user_id": 7964185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MvPRh.jpg?s=128&g=1", "display_name": "SkV", "link": "https://stackoverflow.com/users/7964185/skv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 5756, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1594818917, "creation_date": 1570059462, "last_edit_date": 1570068095, "question_id": 58210609, "link": "https://stackoverflow.com/questions/58210609/how-to-fix-modulenotfounderror-no-module-named-tensorflow-contrib", "title": "How to fix: &quot;ModuleNotFoundError: No module named &#39;tensorflow.contrib&#39;&quot;", "body": "<p>I'm trying to build an image classifier, and want to import tflearn. </p>\n\n<pre><code># Importing the required libraries\nimport tflearn\nfrom tflearn.layers.conv import conv_2d, max_pool_2d\nfrom tflearn.layers.core import input_data, dropout, fully_connected\nfrom tflearn.layers.estimator import regression\nimport tensorflow as tf\n</code></pre>\n\n<p>However, I'm unable to do so, due to the following error message.</p>\n\n<pre><code>File \"imgclassification.py\", line 97, in &lt;module&gt;\n    import tflearn\n  File \"/usr/local/lib/python3.7/site-packages/tflearn/__init__.py\", line 4, in &lt;module&gt;\n    from . import config\n  File \"/usr/local/lib/python3.7/site-packages/tflearn/config.py\", line 5, in &lt;module&gt;\n    from .variables import variable\n  File \"/usr/local/lib/python3.7/site-packages/tflearn/variables.py\", line 7, in &lt;module&gt;\n    from tensorflow.contrib.framework.python.ops import add_arg_scope as contrib_add_arg_scope\nModuleNotFoundError: No module named 'tensorflow.contrib'\n</code></pre>\n\n<p>Apparently, tensorflow.contrib was deprecated in the latest release of TensorFlow.</p>\n\n<p>The number of error messages increased when I uninstalled TensorFlow 2.0 and installed TensorFlow 1.14. Most of them are warnings.</p>\n\n<p>How do I fix this?</p>\n"}, {"tags": ["python", "discord.py", "discord.py-rewrite"], "owner": {"reputation": 427, "user_id": 6152171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc51af7a6c9e06fa96b503a81e9554e2?s=128&d=identicon&r=PG", "display_name": "AlphaMycelium", "link": "https://stackoverflow.com/users/6152171/alphamycelium"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 677, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1570059338, "creation_date": 1570059338, "question_id": 58210596, "link": "https://stackoverflow.com/questions/58210596/how-can-i-find-when-a-user-was-last-active-using-discord-py", "title": "How can I find when a user was last active using discord.py?", "body": "<p>I'm using the discord.py library and want to purge inactive members by kicking them from the server. I am aware of the function <a href=\"https://discordpy.readthedocs.io/en/latest/api.html#discord.Guild.prune_members\" rel=\"nofollow noreferrer\">discord.Guild.prune_members</a>, however it does not provide all the functionality I need as I'd like to send the user a warning a few days before they are removed.</p>\n\n<p>How can I best find when a user was last active so that I can calculate the number of days they have been inactive for? I have been searching the internet for several days and cannot find a solution.</p>\n"}, {"tags": ["python", "mongodb", "pymongo", "nosql-aggregation"], "answers": [{"tags": [], "owner": {"reputation": 582, "user_id": 4332492, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SVx5d.jpg?s=128&g=1", "display_name": "Mohammadreza Mirhajianmoghadam", "link": "https://stackoverflow.com/users/4332492/mohammadreza-mirhajianmoghadam"}, "is_accepted": false, "score": 0, "last_activity_date": 1570377359, "last_edit_date": 1570377359, "creation_date": 1570375818, "answer_id": 58258743, "question_id": 58210591, "link": "https://stackoverflow.com/questions/58210591/how-to-find-the-count-of-the-number-of-documents-in-mongodb-using-pymongo-aggreg/58258743#58258743", "title": "How to find the count of the number of documents in mongodb using pymongo aggregation?", "body": "<p>You can use <code>count</code> method as below:</p>\n\n<pre><code>print(cursor.count())\nprint(list(cursor))\n</code></pre>\n\n<p><strong>or</strong>\n you can add <code>$count</code> pipeline as below:</p>\n\n<pre><code>{\n    \"$count\":\"count\" // the name of count filed\n}\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 10500832, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-e4Yw3OVEoiI/AAAAAAAAAAI/AAAAAAAAAgc/L0-8KnXt8k8/photo.jpg?sz=128", "display_name": "JUAmaned", "link": "https://stackoverflow.com/users/10500832/juamaned"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1570377359, "creation_date": 1570059277, "last_edit_date": 1570060161, "question_id": 58210591, "link": "https://stackoverflow.com/questions/58210591/how-to-find-the-count-of-the-number-of-documents-in-mongodb-using-pymongo-aggreg", "title": "How to find the count of the number of documents in mongodb using pymongo aggregation?", "body": "<p>I'm trying to find the max value of a field from a number of documents and want the output to not only reflect the max value of the field but also the total count of documents that the aggregate query will retrieve.</p>\n\n<p>I'm able to retrieve the \"wait\" field with the max value that I want with the below query, but am stuck with how to get the count of all the documents that are satisfy the below query(Match field).</p>\n\n<pre><code>    db = mongo_client[_MONGO_COLLECTION]\n    cursor = db.aggregate(\n        [\n            {\"$match\": { \"owner\": { \"$exists\": False}}},\n               {\n                \"$project\": {   \n                                \"wait\" : {\n                                                \"$divide\": [{\"$subtract\": [datetime.now(), \"$creationDate\"]}, 1000],\n\n                                            }\n                            }\n            },                        \n               {\n                \"$sort\" : {\n\n                                  \"wait\": -1\n                                                }\n                 }, {\"$limit\" : 1}\n\n    ])\n    for x in cursor:\n        print(x)\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "pandas", "dataframe", "datetime"], "comments": [{"owner": {"reputation": 31306, "user_id": 9081267, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/1knzv.jpg?s=128&g=1", "display_name": "Erfan", "link": "https://stackoverflow.com/users/9081267/erfan"}, "edited": false, "score": 0, "creation_date": 1570059726, "post_id": 58210576, "comment_id": 102798609, "body": "Do you mean 5 seconds? Since the data you show is all withing roughly 11 seconds."}, {"owner": {"reputation": 603, "user_id": 2132478, "user_type": "registered", "accept_rate": 12, "profile_image": "https://i.stack.imgur.com/ypIdH.gif?s=128&g=1", "display_name": "Alfonso_MA", "link": "https://stackoverflow.com/users/2132478/alfonso-ma"}, "reply_to_user": {"reputation": 31306, "user_id": 9081267, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/1knzv.jpg?s=128&g=1", "display_name": "Erfan", "link": "https://stackoverflow.com/users/9081267/erfan"}, "edited": false, "score": 0, "creation_date": 1570087328, "post_id": 58210576, "comment_id": 102804796, "body": "Yes, 5 seconds sorry"}], "answers": [{"comments": [{"owner": {"reputation": 603, "user_id": 2132478, "user_type": "registered", "accept_rate": 12, "profile_image": "https://i.stack.imgur.com/ypIdH.gif?s=128&g=1", "display_name": "Alfonso_MA", "link": "https://stackoverflow.com/users/2132478/alfonso-ma"}, "edited": false, "score": 0, "creation_date": 1570087756, "post_id": 58210649, "comment_id": 102804988, "body": "Yes, I meant seconds. It looks good but the last column is not the minimun. It is the first of the grouped rows. I edited my question to better understanding"}, {"owner": {"reputation": 31306, "user_id": 9081267, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/1knzv.jpg?s=128&g=1", "display_name": "Erfan", "link": "https://stackoverflow.com/users/9081267/erfan"}, "reply_to_user": {"reputation": 603, "user_id": 2132478, "user_type": "registered", "accept_rate": 12, "profile_image": "https://i.stack.imgur.com/ypIdH.gif?s=128&g=1", "display_name": "Alfonso_MA", "link": "https://stackoverflow.com/users/2132478/alfonso-ma"}, "edited": false, "score": 1, "creation_date": 1570098370, "post_id": 58210649, "comment_id": 102810387, "body": "I see, I edited my answer, we are using <code>first</code> as aggregate function now instead of <code>min</code>. This should be correct @Alfonso_MA"}], "tags": [], "owner": {"reputation": 31306, "user_id": 9081267, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/1knzv.jpg?s=128&g=1", "display_name": "Erfan", "link": "https://stackoverflow.com/users/9081267/erfan"}, "is_accepted": true, "score": 3, "last_activity_date": 1570098344, "last_edit_date": 1570098344, "creation_date": 1570059869, "answer_id": 58210649, "question_id": 58210576, "link": "https://stackoverflow.com/questions/58210576/grouping-panda-by-time-interval-aggregate-function/58210649#58210649", "title": "Grouping panda by time interval + aggregate function", "body": "<p>Assuming you mean <code>5 seconds</code>, we can use <code>pd.Grouper</code> with <code>agg</code> and <code>min, first</code>:</p>\n\n<pre><code># use this line if your first column is not datetime type yet.\n# df['col1'] = pd.to_datetime(df['col1'], format='%Y-%m-%d %H:%M:%S:%f')\n\ndf.groupby(pd.Grouper(key='col1', freq='5s'))['col2'].agg(['max', 'first']).reset_index()\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>                 col1   max  first\n0 2010-01-01 04:10:00    69     69\n1 2010-01-01 04:10:05  5000     10\n2 2010-01-01 04:10:10    13     13\n</code></pre>\n\n<hr>\n\n<p>Note: since you didn't provide column names, I called them <code>col1, col2</code></p>\n"}, {"comments": [{"owner": {"reputation": 603, "user_id": 2132478, "user_type": "registered", "accept_rate": 12, "profile_image": "https://i.stack.imgur.com/ypIdH.gif?s=128&g=1", "display_name": "Alfonso_MA", "link": "https://stackoverflow.com/users/2132478/alfonso-ma"}, "edited": false, "score": 0, "creation_date": 1570087803, "post_id": 58210831, "comment_id": 102805016, "body": "Yes, I meant seconds. The last column is not the minimun. It is the first of the grouped rows. I edited my question to better understanding"}, {"owner": {"reputation": 8877, "user_id": 992600, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a07696b9e9f01acc66822c3c4a880b96?s=128&d=identicon&r=PG", "display_name": "adhg", "link": "https://stackoverflow.com/users/992600/adhg"}, "reply_to_user": {"reputation": 603, "user_id": 2132478, "user_type": "registered", "accept_rate": 12, "profile_image": "https://i.stack.imgur.com/ypIdH.gif?s=128&g=1", "display_name": "Alfonso_MA", "link": "https://stackoverflow.com/users/2132478/alfonso-ma"}, "edited": false, "score": 0, "creation_date": 1570147170, "post_id": 58210831, "comment_id": 102831318, "body": "@Alfonso_MA you&#39;re right! it&#39;s not min it&#39;s first. You can simply change it in the code. thanks for pointing out."}], "tags": [], "owner": {"reputation": 8877, "user_id": 992600, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a07696b9e9f01acc66822c3c4a880b96?s=128&d=identicon&r=PG", "display_name": "adhg", "link": "https://stackoverflow.com/users/992600/adhg"}, "is_accepted": false, "score": 1, "last_activity_date": 1570061636, "creation_date": 1570061636, "answer_id": 58210831, "question_id": 58210576, "link": "https://stackoverflow.com/questions/58210576/grouping-panda-by-time-interval-aggregate-function/58210831#58210831", "title": "Grouping panda by time interval + aggregate function", "body": "<p>I'll assume your first column is datetime named: <code>date_time</code> and your 2nd column in '<code>value</code>'. In order to reach your objective you can use the \"<a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.resample.html\" rel=\"nofollow noreferrer\">resample</a>\" such that</p>\n\n<pre><code>   df.set_index('date_time').resample(\"5s\").agg(['max','min'])\n</code></pre>\n\n<p>*note I used 5 seconds because your data didn't show 5 minute </p>\n\n<p>result </p>\n\n<pre><code>                             value\n                             max     min\n      date_time     \n      2010-01-01 04:10:00    69      1\n      2010-01-01 04:10:05    5000    10\n      2010-01-01 04:10:10    13      13\n</code></pre>\n"}], "owner": {"reputation": 603, "user_id": 2132478, "user_type": "registered", "accept_rate": 12, "profile_image": "https://i.stack.imgur.com/ypIdH.gif?s=128&g=1", "display_name": "Alfonso_MA", "link": "https://stackoverflow.com/users/2132478/alfonso-ma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 58210649, "answer_count": 2, "score": 1, "last_activity_date": 1570098344, "creation_date": 1570059159, "last_edit_date": 1570087679, "question_id": 58210576, "link": "https://stackoverflow.com/questions/58210576/grouping-panda-by-time-interval-aggregate-function", "title": "Grouping panda by time interval + aggregate function", "body": "<p>Let's say I have a panda like that:</p>\n\n<pre><code>2010-01-01 04:10:00:025     69\n2010-01-01 04:10:01:669     1\n2010-01-01 04:10:03:027     3\n2010-01-01 04:10:04:003     8\n2010-01-01 04:10:05:987     10\n2010-01-01 04:10:06:330     99\n2010-01-01 04:10:08:369     55\n2010-01-01 04:10:09:987     5000\n2010-01-01 04:10:11:148     13\n</code></pre>\n\n<p>And I need convert it in a format as following:</p>\n\n<pre><code>2010-01-01 04:10:00:000     69      69\n2010-01-01 04:10:05:000     5000    10\n2010-01-01 04:10:10:000     13      13\n</code></pre>\n\n<p>The first column corresponds to each 5 seconds interval starting at 2010-01-01 04:10:00:000.</p>\n\n<p>The second column is the max of all the grouped rows. </p>\n\n<p>The third column is the first of all the grouped rows. </p>\n\n<p>How can I get that?</p>\n"}, {"tags": ["python", "arrays", "numpy", "mesh", "openai-gym"], "comments": [{"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1570073948, "post_id": 58210563, "comment_id": 102801009, "body": "<code>np.meshgrid</code> returns a tuple of arrays.  <code>np.mgrid</code> an array.  <code>itertools.product</code> produces a list of tuples.  It&#39;s also possible to construct combinations with <code>np.tile</code> and <code>np.repeat</code>.  Just from reading your code and description it&#39;s hard to picture your result."}, {"owner": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "edited": false, "score": 0, "creation_date": 1570080289, "post_id": 58210563, "comment_id": 102802231, "body": "<a href=\"https://stackoverflow.com/q/11144513/7207392\">This</a> should have all you need. Note: the question is for two factors, but the answers also cover more."}, {"owner": {"reputation": 122, "user_id": 5889825, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-2PB0r96DPAo/AAAAAAAAAAI/AAAAAAAAAEc/7UzHEHCMtk8/photo.jpg?sz=128", "display_name": "Brizar", "link": "https://stackoverflow.com/users/5889825/brizar"}, "reply_to_user": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "edited": false, "score": 0, "creation_date": 1570108788, "post_id": 58210563, "comment_id": 102815867, "body": "Thanks to both of you. I used <code>np.tile()</code> for the combination of the state and action spaces together. I just overthought it last night. I also used the link by @PaulPanzer . Guess I just diddn&#39;t knew the correct terms for searching."}], "answers": [{"tags": [], "owner": {"reputation": 122, "user_id": 5889825, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-2PB0r96DPAo/AAAAAAAAAAI/AAAAAAAAAEc/7UzHEHCMtk8/photo.jpg?sz=128", "display_name": "Brizar", "link": "https://stackoverflow.com/users/5889825/brizar"}, "is_accepted": true, "score": 0, "last_activity_date": 1570109497, "creation_date": 1570109497, "answer_id": 58220254, "question_id": 58210563, "link": "https://stackoverflow.com/questions/58210563/more-efficient-way-for-multidimensional-state-action-space-tiling-than-with-np-m/58220254#58220254", "title": "More efficient way for multidimensional state-action space tiling than with np.meshgrid?", "body": "<p>Thanks to the both answers above, here my final results.\nI still had to use *() to disassemble the linspace for meshgrid, but it looks more human readable now.\nThe big issue with the state-action code before was that I tried to overcomplicate it. Its just copying the arrays on top of each other. So just copy (or tile in this case) the state-space array as often as you have different actions in your action-space.This is the same as <code>ACTION_SPACE_SIZE^(action-dims)</code>.</p>\n\n<pre><code>    action_space = np.stack(np.meshgrid(*(np.linspace(env.action_space.low, env.action_space.high, ACTION_SPACE_SIZE)).T), -1).reshape(-1, env.action_space.shape[0])\n\n    state_space = np.stack(np.meshgrid(*(np.linspace(env.observation_space.low, env.observation_space.high, STATE_SPACE_SIZE)).T), -1).reshape(-1, env.observation_space.shape[0])\n\n    state_action_space = np.concatenate((\n        np.tile(state_space, (action_space.shape[0])).reshape(-1, state_space.shape[1])\n        np.tile(action_space, (state_space.shape[0], 1))\n        ), axis=1)\n</code></pre>\n"}], "owner": {"reputation": 122, "user_id": 5889825, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-2PB0r96DPAo/AAAAAAAAAAI/AAAAAAAAAEc/7UzHEHCMtk8/photo.jpg?sz=128", "display_name": "Brizar", "link": "https://stackoverflow.com/users/5889825/brizar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 58220254, "answer_count": 1, "score": 1, "last_activity_date": 1570109497, "creation_date": 1570059064, "question_id": 58210563, "link": "https://stackoverflow.com/questions/58210563/more-efficient-way-for-multidimensional-state-action-space-tiling-than-with-np-m", "title": "More efficient way for multidimensional state-action space tiling than with np.meshgrid?", "body": "<p>First of all, this is for practice and comparison, I know there are more efficient ways to tile state space than with an linear grid.</p>\n\n<p>To run some reinforcement learning algorithm, I would like to tile my state and action space lineary. As result I want to have every space-action-pair in array form. The problem is, there are different (gym) environments with different state- and action-space dimensions. Therefore I dontlike to have hard coded variables or dimensions.\nSo I need to calculate every state-action pair given only the min and max for each.</p>\n\n<p>I've mostly solved the easy problems, but none of the solutions are \"pretty\".</p>\n\n<p>First lets compute state and action space. Tile the area with linspace from min to max. I've given the variables for one random test environment.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import numpy as np\nNOF_ACTION_SPACE_TILES = 20\nNOF_STATE_SPACE_TILES = 10\naction_low = np.array([-2])\nstate_low = np.array([-1, -1, -8])\n\naction_space = np.vstack([*[x.flatten() for x in (np.meshgrid(*(np.linspace(action_low, action_high, NOF_ACTION_SPACE_TILES).T)))]]).T\n\nstate_space = np.vstack([*[x.flatten() for x in (np.meshgrid(*(np.linspace(state_low, state_high, NOF_STATE_SPACE_TILES).T)))]]).T\n</code></pre>\n\n<p>That works as intended and gives all the possible combinations for the states and actions on their own. Any way to do this more straight forward? I needed to use the *[] two times, due to np.meshgrid returning multiple matrices and trying to flatten the vectors.</p>\n\n<p>Now to the funny part...</p>\n\n<p>In the end I want to have every possible state-action pair. Every state with every action. This is coded pretty fast with for loops, but well... numpy and for loops are no speedy friends.\nSo heres my workaround, that works for 1D action space:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>s_s, a_s = np.meshgrid(state_space, action_space)\n\nstate_action_space = np.concatenate((\n   s_s.reshape(-1, state_space.shape[1]),\n   a_s.reshape(state_space.shape[1], action_space.shape[1], -1)[0].T), axis=1)\n</code></pre>\n\n<p>With <code>state_space.shape[1]</code> beeing the dim of a single state / action.</p>\n\n<p>One problem beeing, that <code>np.meshgrid</code> returns a_s for each of the 3 state-space dimensions, and reshaping it like above does not work, because we need to reshape the states to 3xn and the action to 1xn. </p>\n\n<p>This is even worse than the code above, but works for now. Does anyone have suggestions how to use meshgrid or sth else properly and fast?</p>\n\n<p>In the end, for the second step, its just a combination of every row of the two matrices. There has to be a better way...</p>\n"}, {"tags": ["python", "apache-spark", "pyspark"], "comments": [{"owner": {"reputation": 11518, "user_id": 9510729, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-HbuuPS6a5d4/AAAAAAAAAAI/AAAAAAAAAvQ/8hLG9Jvhyzc/photo.jpg?sz=128", "display_name": "jxc", "link": "https://stackoverflow.com/users/9510729/jxc"}, "edited": false, "score": 0, "creation_date": 1570102684, "post_id": 58210434, "comment_id": 102812545, "body": "use <code>df.summary(&#39;max&#39;).first().VALUE</code>, then convert the resulting StringType() into to a proper datatype."}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 11225157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/619f1b95822b4242a0aedcd888508a38?s=128&d=identicon&r=PG&f=1", "display_name": "WorkBench", "link": "https://stackoverflow.com/users/11225157/workbench"}, "edited": false, "score": 0, "creation_date": 1570090477, "post_id": 58210509, "comment_id": 102806182, "body": "Thanks. Is it possible to avoid the collect() function? I have a very large table and it is not recommendable to use collect in these cases for performing issues."}, {"owner": {"reputation": 5730, "user_id": 8805315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/391c509601d010c0ae3b15ca9197547b?s=128&d=identicon&r=PG", "display_name": "pissall", "link": "https://stackoverflow.com/users/8805315/pissall"}, "reply_to_user": {"reputation": 53, "user_id": 11225157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/619f1b95822b4242a0aedcd888508a38?s=128&d=identicon&r=PG&f=1", "display_name": "WorkBench", "link": "https://stackoverflow.com/users/11225157/workbench"}, "edited": false, "score": 0, "creation_date": 1570091917, "post_id": 58210509, "comment_id": 102806883, "body": "No, you will have to call the collect function @WorkBench"}, {"owner": {"reputation": 53, "user_id": 11225157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/619f1b95822b4242a0aedcd888508a38?s=128&d=identicon&r=PG&f=1", "display_name": "WorkBench", "link": "https://stackoverflow.com/users/11225157/workbench"}, "edited": false, "score": 0, "creation_date": 1570096784, "post_id": 58210509, "comment_id": 102809508, "body": "OK so unfortunately this solution cannot be the definitve one for me. thanks anyway it&#39;s been inspiring"}], "tags": [], "owner": {"reputation": 3884, "user_id": 3301113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93a8377316d825afcc391cebcb768349?s=128&d=identicon&r=PG&f=1", "display_name": "fmarm", "link": "https://stackoverflow.com/users/3301113/fmarm"}, "is_accepted": false, "score": 2, "last_activity_date": 1570058549, "creation_date": 1570058549, "answer_id": 58210509, "question_id": 58210434, "link": "https://stackoverflow.com/questions/58210434/how-to-add-a-constant-column-with-maximum-value-in-a-pyspark-dataframe-without-g/58210509#58210509", "title": "How to add a constant column with maximum value in a pyspark dataframe without grouping by", "body": "<p>You can do this:</p>\n\n<pre><code>from pyspark.sql.functions import max, lit\n# compute max value from VALUE column\nmax_df = df.select(max(df['VALUE'])).collect()\n# max_df is a 1 row 1 column dataframe, you need to extract the value\nmax_val = max_df[0][0]\n# create new column in df, you need lit as you have a constant value\ndf = df.withColumn('newcol',lit(max_val))\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 976, "user_id": 9155762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a9a2c67e9ca64e34613419197bef7fb?s=128&d=identicon&r=PG", "display_name": "Paul", "link": "https://stackoverflow.com/users/9155762/paul"}, "edited": false, "score": 0, "creation_date": 1570088844, "post_id": 58213049, "comment_id": 102805487, "body": "this doesn&#39;t add the max overall value"}, {"owner": {"reputation": 53, "user_id": 11225157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/619f1b95822b4242a0aedcd888508a38?s=128&d=identicon&r=PG&f=1", "display_name": "WorkBench", "link": "https://stackoverflow.com/users/11225157/workbench"}, "edited": false, "score": 0, "creation_date": 1570099384, "post_id": 58213049, "comment_id": 102810910, "body": "Thanks, I will check if this code works, give me some time please"}], "tags": [], "owner": {"reputation": 738, "user_id": 11549757, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ERtlK.jpg?s=128&g=1", "display_name": "Sri_Karthik", "link": "https://stackoverflow.com/users/11549757/sri-karthik"}, "is_accepted": false, "score": 0, "last_activity_date": 1570089890, "last_edit_date": 1570089890, "creation_date": 1570082131, "answer_id": 58213049, "question_id": 58210434, "link": "https://stackoverflow.com/questions/58210434/how-to-add-a-constant-column-with-maximum-value-in-a-pyspark-dataframe-without-g/58213049#58213049", "title": "How to add a constant column with maximum value in a pyspark dataframe without grouping by", "body": "<p>In your case you can use window functions. And I presume your value column contains list of values.</p>\n\n<pre><code>from pyspark.sql.functions import max,desc\n\nfrom pyspark.sql.window import Window\n\nspec= Window.partitionBy('ID').orderBy(desc('VALUE'))\n\nnewDF = df.withColumn('maxValue',max('VALUE').over(spec))\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 11225157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/619f1b95822b4242a0aedcd888508a38?s=128&d=identicon&r=PG&f=1", "display_name": "WorkBench", "link": "https://stackoverflow.com/users/11225157/workbench"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 367, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1570089890, "creation_date": 1570058031, "last_edit_date": 1570058104, "question_id": 58210434, "link": "https://stackoverflow.com/questions/58210434/how-to-add-a-constant-column-with-maximum-value-in-a-pyspark-dataframe-without-g", "title": "How to add a constant column with maximum value in a pyspark dataframe without grouping by", "body": "<p>Suppose that we have a PySpark dataframe with two columns, ID (it is unique) and VALUE. </p>\n\n<p>I need to add a third column that contains always the same value, i.e. the maximum value of the column VALUE. I observe that in this case it doesn't make any sense to group by the ID because I need a global maximum.</p>\n\n<p>It's sound very simple and probably it is, but I only saw solutions involving grouping by that do not fit my case. I tried a lot of things but nothing worked.</p>\n\n<p>I need a solution only in PySpark/Python Code. Thanks a lot!</p>\n"}, {"tags": ["python", "python-asyncio"], "answers": [{"comments": [{"owner": {"reputation": 95, "user_id": 1722434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4c9e5cae6d74775392e123156129c13?s=128&d=identicon&r=PG", "display_name": "Alejandro Wainzinger", "link": "https://stackoverflow.com/users/1722434/alejandro-wainzinger"}, "edited": false, "score": 0, "creation_date": 1570143912, "post_id": 58222489, "comment_id": 102830667, "body": "Yes, this seems to be what I want, thanks. I noticed that for many cases, the difference between <code>as_completed</code> and <code>gather</code> can be pretty thin and sometimes <code>gather</code> has the upper hand. That was an unexpected result, and worth noting."}, {"owner": {"reputation": 102109, "user_id": 1600898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/01377f8b31f24b0265854666b29d0c03?s=128&d=identicon&r=PG", "display_name": "user4815162342", "link": "https://stackoverflow.com/users/1600898/user4815162342"}, "reply_to_user": {"reputation": 95, "user_id": 1722434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4c9e5cae6d74775392e123156129c13?s=128&d=identicon&r=PG", "display_name": "Alejandro Wainzinger", "link": "https://stackoverflow.com/users/1722434/alejandro-wainzinger"}, "edited": false, "score": 0, "creation_date": 1570352210, "post_id": 58222489, "comment_id": 102880598, "body": "@AlejandroWainzinger <i>the difference between as_completed and gather can be pretty thin</i> That should be the case only if the coroutines take similar times to run. If there is considerable difference among the coroutines&#39; run times, <code>as_completed</code> should produce the results of the faster ones much sooner than <code>gather</code>, which always waits for them all before returning anything."}], "tags": [], "owner": {"reputation": 27029, "user_id": 1113207, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/UWak6.jpg?s=128&g=1", "display_name": "Mikhail Gerasimov", "link": "https://stackoverflow.com/users/1113207/mikhail-gerasimov"}, "is_accepted": true, "score": 6, "last_activity_date": 1570116831, "creation_date": 1570116831, "answer_id": 58222489, "question_id": 58210422, "link": "https://stackoverflow.com/questions/58210422/asyncio-gather-yielding-results-as-they-come-in/58222489#58222489", "title": "asyncio gather yielding results as they come in", "body": "<p><code>gather</code> as you already noted will wait until all coroutines are done, thus you need to find another way.</p>\n\n<p>For example you can use function <a href=\"https://docs.python.org/3/library/asyncio-task.html#asyncio.as_completed\" rel=\"noreferrer\">asyncio.as_completed</a> that seems to do exactly what you want.</p>\n\n<pre><code>import asyncio\n\n\nasync def echo(t):\n    await asyncio.sleep(t)\n    return t\n\n\n\nasync def main():\n    coros = [\n        echo(3),\n        echo(2),\n        echo(1),\n    ]\n\n    for first_completed in asyncio.as_completed(coros):\n        res = await first_completed\n        print(f'Done {res}')\n\n\nasyncio.run(main())\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>Done 1\nDone 2\nDone 3\n[Finished in 3 sec]\n</code></pre>\n"}], "owner": {"reputation": 95, "user_id": 1722434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4c9e5cae6d74775392e123156129c13?s=128&d=identicon&r=PG", "display_name": "Alejandro Wainzinger", "link": "https://stackoverflow.com/users/1722434/alejandro-wainzinger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 474, "favorite_count": 0, "accepted_answer_id": 58222489, "answer_count": 1, "score": 3, "last_activity_date": 1570116831, "creation_date": 1570057883, "question_id": 58210422, "link": "https://stackoverflow.com/questions/58210422/asyncio-gather-yielding-results-as-they-come-in", "title": "asyncio gather yielding results as they come in", "body": "<p>I want to be able to yield results from a set of tasks run by <code>gather</code> as they come in for further processing.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code># Not real code, but an example\n\nasync for response in asyncio.gather(*[aiohttp.get(url) for url in ['https://www.google.com', 'https://www.amazon.com']]):\n    await process_response(response)\n</code></pre>\n\n<p>At present, I can use the <code>gather</code> method to run all <code>get</code> concurrently, but must wait until they're all complete to process them. I'm still new to Python async/await, so maybe there's some obvious way of doing this I'm missing.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code># What I can do now\nresponses = await asyncio.gather(*[aiohttp.get(url) for url in ['https://www.google.com', 'https://www.amazon.com']])\nawait asyncio.gather(*[process_response(response) for response in responses])\n\n</code></pre>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "edited": false, "score": 3, "creation_date": 1570057740, "post_id": 58210407, "comment_id": 102798250, "body": "but <code>df1</code> does not have column <code>c5</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 3884, "user_id": 3301113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93a8377316d825afcc391cebcb768349?s=128&d=identicon&r=PG&f=1", "display_name": "fmarm", "link": "https://stackoverflow.com/users/3301113/fmarm"}, "is_accepted": false, "score": 0, "last_activity_date": 1570058021, "creation_date": 1570058021, "answer_id": 58210432, "question_id": 58210407, "link": "https://stackoverflow.com/questions/58210407/how-to-remove-uncommon-columns-in-two-dataframes-in-pandas/58210432#58210432", "title": "How to remove uncommon columns in two dataframes in Pandas?", "body": "<p>You can create a list to store only common columns and then subset columns from the two dataframes</p>\n\n<pre><code># list with only common columns\ncommon_columns = [col for col in df1.columns if col in df2.columns]\n# keep only common columns from df1 and df2\ndf1 = df1[common_columns]\ndf2 = df2[common_columns]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 31306, "user_id": 9081267, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/1knzv.jpg?s=128&g=1", "display_name": "Erfan", "link": "https://stackoverflow.com/users/9081267/erfan"}, "edited": false, "score": 0, "creation_date": 1570060209, "post_id": 58210625, "comment_id": 102798698, "body": "So you just edited OP&#39;s expected output. How are you so sure? I don&#39;t think you should do that unless you are 100% sure, which you can&#39;t be"}, {"owner": {"reputation": 3707, "user_id": 9302488, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/097c89e042db32a2510ab6bd328d3b02?s=128&d=identicon&r=PG", "display_name": "Massifox", "link": "https://stackoverflow.com/users/9302488/massifox"}, "reply_to_user": {"reputation": 31306, "user_id": 9081267, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/1knzv.jpg?s=128&g=1", "display_name": "Erfan", "link": "https://stackoverflow.com/users/9081267/erfan"}, "edited": false, "score": 0, "creation_date": 1570060748, "post_id": 58210625, "comment_id": 102798797, "body": "The request was not consistent with the expected output. Now the request and expected output are consistent. If @jdoe wants to ask for more, they can change the question"}, {"owner": {"reputation": 55, "user_id": 10943277, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68459418561f5f150092fc4f65fc8529?s=128&d=identicon&r=PG&f=1", "display_name": "j doe", "link": "https://stackoverflow.com/users/10943277/j-doe"}, "edited": false, "score": 0, "creation_date": 1570090040, "post_id": 58210625, "comment_id": 102805995, "body": "Yes sorry I forgot to remove c5."}], "tags": [], "owner": {"reputation": 3707, "user_id": 9302488, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/097c89e042db32a2510ab6bd328d3b02?s=128&d=identicon&r=PG", "display_name": "Massifox", "link": "https://stackoverflow.com/users/9302488/massifox"}, "is_accepted": true, "score": 0, "last_activity_date": 1570059616, "creation_date": 1570059616, "answer_id": 58210625, "question_id": 58210407, "link": "https://stackoverflow.com/questions/58210407/how-to-remove-uncommon-columns-in-two-dataframes-in-pandas/58210625#58210625", "title": "How to remove uncommon columns in two dataframes in Pandas?", "body": "<p>Given the following dataframe:</p>\n\n<pre><code>df1 = pd.DataFrame(columns=['c1','c2','c3','c4'])\ndf2 = pd.DataFrame(columns=['c2','c3','c4','c5'])\n</code></pre>\n\n<p><em>Create</em> <em>intersection</em> of <code>df1</code> and <code>df2</code> columns name:</p>\n\n<pre><code>common_col = (df2.columns) &amp; (df1.columns)  \n</code></pre>\n\n<p><em>Filter</em> <code>df1</code> and <code>df2</code> by <code>common_col</code>:</p>\n\n<pre><code>df1 = df1[common_col]   # df1.columns: c2, c3, c4\ndf2 = df2[common_col]   # df2.columns: c2, c3, c4\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 10943277, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68459418561f5f150092fc4f65fc8529?s=128&d=identicon&r=PG&f=1", "display_name": "j doe", "link": "https://stackoverflow.com/users/10943277/j-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 307, "favorite_count": 0, "accepted_answer_id": 58210625, "answer_count": 2, "score": 0, "last_activity_date": 1570059802, "creation_date": 1570057603, "last_edit_date": 1570059802, "question_id": 58210407, "link": "https://stackoverflow.com/questions/58210407/how-to-remove-uncommon-columns-in-two-dataframes-in-pandas", "title": "How to remove uncommon columns in two dataframes in Pandas?", "body": "<p>I have 2 pandas dataframes: df1 and df2</p>\n\n<p>df1 has these columns:</p>\n\n<pre><code>c1, c2 ,c3 ,c4\n</code></pre>\n\n<p>and df2 has these columns:</p>\n\n<pre><code>c2, c3, c4, c5\n</code></pre>\n\n<p>How can I remove the uncommon columns in these 2 dataframes so both become like this:</p>\n\n<pre><code>df1: c2, c3, c4\ndf2: c2, c3, c4\n</code></pre>\n"}, {"tags": ["javascript", "python", "pyqt", "pyqt5", "qtwebchannel"], "comments": [{"owner": {"reputation": 11899, "user_id": 7216865, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/X90W9.png?s=128&g=1", "display_name": "Maurice Meyer", "link": "https://stackoverflow.com/users/7216865/maurice-meyer"}, "edited": false, "score": 0, "creation_date": 1570057847, "post_id": 58210400, "comment_id": 102798266, "body": "<code>def printRef</code>isnt returning anything."}, {"owner": {"reputation": 455, "user_id": 5881326, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20b7717c3632e6b3170152f0ea0c0b67?s=128&d=identicon&r=PG&f=1", "display_name": "Evan Brittain", "link": "https://stackoverflow.com/users/5881326/evan-brittain"}, "reply_to_user": {"reputation": 11899, "user_id": 7216865, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/X90W9.png?s=128&g=1", "display_name": "Maurice Meyer", "link": "https://stackoverflow.com/users/7216865/maurice-meyer"}, "edited": false, "score": 0, "creation_date": 1570058135, "post_id": 58210400, "comment_id": 102798317, "body": "There isn&#39;t any data that&#39;s supposed to be passes back from printRef. It simply prints the value received from getRef. The problem is getRef is not properly returing the value x+5 to JS so it can then be printed by printRef."}], "answers": [{"comments": [{"owner": {"reputation": 455, "user_id": 5881326, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20b7717c3632e6b3170152f0ea0c0b67?s=128&d=identicon&r=PG&f=1", "display_name": "Evan Brittain", "link": "https://stackoverflow.com/users/5881326/evan-brittain"}, "edited": false, "score": 0, "creation_date": 1570067058, "post_id": 58211044, "comment_id": 102799945, "body": "Is this the case with dict and list structures as well?"}, {"owner": {"reputation": 9987, "user_id": 3809375, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/EA10l.png?s=128&g=1", "display_name": "BPL", "link": "https://stackoverflow.com/users/3809375/bpl"}, "edited": false, "score": 0, "creation_date": 1584098571, "post_id": 58211044, "comment_id": 107338702, "body": "@eyllanesc Not sure if this question is out of scope here but I can still ask it... how would you send a dictionary from python-&gt;js? If I&#39;ve got <code>sendDict = pyqtSignal(dict)</code> and then I do <code>talkie.sendDict.emit({&quot;a&quot;:10})</code> I&#39;ll get null in the js side. On the other hand, when dealing with simple types such as <code>int, float, str, bool, list</code> the values in js-side are received ok... Only having trouble with datatypes such as <code>list, set, tuple, object, ...</code>"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "reply_to_user": {"reputation": 9987, "user_id": 3809375, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/EA10l.png?s=128&g=1", "display_name": "BPL", "link": "https://stackoverflow.com/users/3809375/bpl"}, "edited": false, "score": 0, "creation_date": 1584106471, "post_id": 58211044, "comment_id": 107342206, "body": "@BPL I have added a more generic method which should generally allow sending any object that can be converted to JSON."}, {"owner": {"reputation": 9987, "user_id": 3809375, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/EA10l.png?s=128&g=1", "display_name": "BPL", "link": "https://stackoverflow.com/users/3809375/bpl"}, "edited": false, "score": 0, "creation_date": 1584112354, "post_id": 58211044, "comment_id": 107345164, "body": "@eyllanesc Hehe, cool, when I&#39;d asked you the same question few hours ago I&#39;d reached a similar conclusion than you, at that time I was concerned about the possible overhead of encoding/decoding... I&#39;ve been using it for a while and it seems is good enough. That said, thank you very much to confirm this is an idiomatic way to send these datatypes... I&#39;ve already upvoted you ;)"}], "tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": true, "score": 8, "last_activity_date": 1584106418, "last_edit_date": 1584106418, "creation_date": 1570063861, "answer_id": 58211044, "question_id": 58210400, "link": "https://stackoverflow.com/questions/58210400/how-to-receive-data-from-python-to-js-using-qwebchannel/58211044#58211044", "title": "How to receive data from python to js using QWebChannel?", "body": "<p>In C++ so that a method can return a value it must be declared as <code>Q_INVOKABLE</code> and the equivalent in PyQt is to use <code>result</code> in the <code>@pyqtSlot</code> decorator:</p>\n\n<pre><code>\u251c\u2500\u2500 index.html\n\u2514\u2500\u2500 main.py\n</code></pre>\n\n<p><strong>main.py</strong></p>\n\n<pre><code>from PyQt5 import QtCore, QtWidgets, QtWebEngineWidgets, QtWebChannel\n\n\nclass Backend(QtCore.QObject):\n    @QtCore.pyqtSlot(int, <b>result=int</b>)\n    def getRef(self, x):\n        print(\"inside getRef\", x)\n        return x + 5\n\n    @QtCore.pyqtSlot(int)\n    def printRef(self, ref):\n        print(\"inside printRef\", ref)\n\n\nif __name__ == \"__main__\":\n    import os\n    import sys\n\n    app = QtWidgets.QApplication(sys.argv)\n\n    backend = Backend()\n\n    view = QtWebEngineWidgets.QWebEngineView()\n\n    channel = QtWebChannel.QWebChannel()\n    view.page().setWebChannel(channel)\n    channel.registerObject(\"backend\", backend)\n\n    current_dir = os.path.dirname(os.path.realpath(__file__))\n    filename = os.path.join(current_dir, \"index.html\")\n    url = QtCore.QUrl.fromLocalFile(filename)\n    view.load(url)\n\n    view.resize(640, 480)\n    view.show()\n    sys.exit(app.exec_())</code></pre>\n\n<p><strong>index.html</strong></p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n    &lt;head&gt;\n        &lt;meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\" /&gt;\n        &lt;script type=\"text/javascript\" src=\"qrc:///qtwebchannel/qwebchannel.js\"&gt;&lt;/script&gt;\n        &lt;script type=\"text/javascript\"&gt;\n            var backend = null;\n            var x = 5;\n            window.onload = function()\n            {\n                new QWebChannel(qt.webChannelTransport, function(channel) {\n                    backend = channel.objects.backend;\n                    backend.getRef(x, function(pyval) {\n                        backend.printRef(pyval);\n                    });\n                });\n            }\n        &lt;/script&gt;\n    &lt;/head&gt;\n&lt;/html&gt;\n</code></pre>\n\n<hr>\n\n<h3>Update:</h3>\n\n<p>In general, QtWebChannel can only transport information that can be converted into QJsonObject from the Qt side, and from the javascript side those data that can be converted into JSON.</p>\n\n<p>So there are particular cases:</p>\n\n<ul>\n<li><strong>int</strong></li>\n<li><strong>float</strong></li>\n<li><strong>str</strong></li>\n<li><strong>list</strong>: If it is supported to send and receive lists but of elements such as numbers and strings, and also dictionary and other lists that support the previous basic types.</li>\n</ul>\n\n<pre class=\"lang-py prettyprint-override\"><code>class Backend(QtCore.QObject):\n    @QtCore.pyqtSlot(result=list)\n    def return_list(self):\n        return [0.0, 1.5, 'Hello', ['Stack', 5.0], {'a': {'b': 'c'}}]\n\n    @QtCore.pyqtSlot(list)\n    def print_list(self, l):\n        print(l)\n</code></pre>\n\n<pre class=\"lang-js prettyprint-override\"><code>backend = channel.objects.backend;\nbackend.return_list(function(pyval) {\n    backend.print_list(pyval);\n});\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>[0.0, 1.5, 'Hello', ['Stack', 5.0], {'a': {'b': 'c'}}]\n</code></pre>\n\n<ul>\n<li><strong>dict</strong>:</li>\n</ul>\n\n<pre class=\"lang-py prettyprint-override\"><code>class Backend(QtCore.QObject):\n    @QtCore.pyqtSlot(result=\"QJsonObject\")\n    def return_dict(self):\n        return {\"a\": 1.5, \"b\": {\"c\": 2}, \"d\": [1, \"3\", \"4\"]}\n\n    @QtCore.pyqtSlot(\"QJsonObject\")\n    def print_dict(self, ref):\n        print(ref)\n</code></pre>\n\n<pre class=\"lang-js prettyprint-override\"><code>backend = channel.objects.backend;\nbackend.return_dict(function(pyval) {\n    backend.print_dict(pyval);\n});\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>{'a': &lt;PyQt5.QtCore.QJsonValue object at 0x7f3841d50150&gt;, 'b': &lt;PyQt5.QtCore.QJsonValue object at 0x7f3841d501d0&gt;, 'd': &lt;PyQt5.QtCore.QJsonValue object at 0x7f3841d50250&gt;}\n</code></pre>\n\n<p>As you can see, QJsonValue is returned so it can be tedious to obtain the information, so in this the workaround is to package them in a list:</p>\n\n<pre><code>class Backend(QtCore.QObject):\n    @QtCore.pyqtSlot(result=list)\n    def return_list(self):\n        d = {\"a\": 1.5, \"b\": {\"c\": 2}, \"d\": [1, \"3\", \"4\"]}\n        return [d]\n\n    @QtCore.pyqtSlot(list)\n    def print_list(self, ref):\n        d, *_ = ref\n        print(d)\n</code></pre>\n\n<pre class=\"lang-js prettyprint-override\"><code>backend = channel.objects.backend;\nbackend.return_list(function(pyval) {\n    backend.print_list(pyval);\n});\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>{'a': 1.5, 'b': {'c': 2.0}, 'd': [1.0, '3', '4']}\n</code></pre>\n\n<p><strong>UPDATE2:</strong> </p>\n\n<p>A generic way of transmitting information is to use JSON, that is, convert the python or js object and convert it to string using <code>json.dumps()</code> and <code>JSON.stringify()</code>, respectively, and send it; when received in python or js the string must be converted using <code>json.loads()</code> and <code>JSON.parse()</code>, respectively:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>class Backend(QtCore.QObject):\n    @QtCore.pyqtSlot(str, result=str)\n    def getRef(self, o):\n        print(\"inside getRef\", o)\n        py_obj = json.loads(o)\n        py_obj[\"c\"] = (\"Hello\", \"from\", \"Python\")\n        return json.dumps(py_obj)\n\n    @QtCore.pyqtSlot(str)\n    def printRef(self, o):\n        py_obj = json.loads(o)\n        print(\"inside printRef\", py_obj)\n</code></pre>\n\n<pre class=\"lang-js prettyprint-override\"><code>var backend = null;\nwindow.onload = function()\n{\n    new QWebChannel(qt.webChannelTransport, function(channel) {\n        backend = channel.objects.backend;\n        var x = {a: \"1000\", b: [\"Hello\", \"From\", \"JS\"]}\n        backend.getRef(JSON.stringify(x), function(y) {\n            js_obj = JSON.parse(y);\n            js_obj[\"f\"] = false;\n            backend.printRef(JSON.stringify(js_obj));\n        });\n    });\n}\n</code></pre>\n\n<pre><code>inside getRef {\"a\":\"1000\",\"b\":[\"Hello\",\"From\",\"JS\"]}\ninside printRef {'a': '1000', 'b': ['Hello', 'From', 'JS'], 'c': ['Hello', 'from', 'Python'], 'f': False}\n</code></pre>\n"}], "owner": {"reputation": 455, "user_id": 5881326, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20b7717c3632e6b3170152f0ea0c0b67?s=128&d=identicon&r=PG&f=1", "display_name": "Evan Brittain", "link": "https://stackoverflow.com/users/5881326/evan-brittain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 901, "favorite_count": 2, "accepted_answer_id": 58211044, "answer_count": 1, "score": 1, "last_activity_date": 1584106418, "creation_date": 1570057556, "last_edit_date": 1570064066, "question_id": 58210400, "link": "https://stackoverflow.com/questions/58210400/how-to-receive-data-from-python-to-js-using-qwebchannel", "title": "How to receive data from python to js using QWebChannel?", "body": "<p>I'm trying to get my PyQt application to communicate with the JS but am unable to get values from python. I have two slots on the python side to get and print data. In the example a int is passed from JS to python, python adds 5 to it and passes it back, then JS calls the other slot to print the new value.</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>var backend = null;\nvar x = 15;\nnew QWebChannel(qt.webChannelTransport, function (channel) {\n    backend = channel.objects.backend;\n    backend.getRef(x, function(pyval){\n        backend.printRef(pyval)\n    });\n});\n</code></pre>\n\n<pre class=\"lang-py prettyprint-override\"><code>@pyqtSlot(int)\ndef getRef(self, x):\n    print('inside getRef', x)\n    return x + 5\n\n@pyqtSlot(int)\ndef printRef(self, ref):\n    print('inside printRef', ref)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>inside getRef 15\nCould not convert argument QJsonValue(null) to target type int .\n</code></pre>\n\n<p>Expected:</p>\n\n<pre><code>inside getRef 15\ninside printRef 20\n</code></pre>\n\n<p>I can't figure out why the returned value is null. How would I store that pyval into a variable on the js side to be used later?</p>\n"}, {"tags": ["python", "python-3.x", "pytest"], "answers": [{"tags": [], "owner": {"reputation": 1310, "user_id": 4045754, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/DBrYm.png?s=128&g=1", "display_name": "yeniv", "link": "https://stackoverflow.com/users/4045754/yeniv"}, "is_accepted": true, "score": 2, "last_activity_date": 1570076181, "creation_date": 1570076181, "answer_id": 58212227, "question_id": 58210392, "link": "https://stackoverflow.com/questions/58210392/pytests-doesnt-collect-tests-from-local-directory/58212227#58212227", "title": "Pytests doesn&#39;t collect tests from local directory", "body": "<p><code>pytest</code> follows a test discovery procedure. You can check the details <a href=\"https://docs.pytest.org/en/latest/goodpractices.html#conventions-for-python-test-discovery\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>For your particular case, the file name should start with <code>test_</code> or end with <code>_test.py</code>. So renaming <code>TestCheckout.py</code> to <code>test_Checkout.py</code> would work. In case, you do not wish to change the name, you could provide the filename explicitly as in</p>\n\n<pre><code>user@qt01:~/folder$ pytest TestCheckout.py\n============================================== test session starts ==============================================\nplatform linux -- Python 3.5.2, pytest-5.1.2, py-1.8.0, pluggy-0.12.0\nsensitiveurl: .*\nrootdir: /home/user/folder\nplugins: needle-0.3.11, selenium-1.17.0, html-1.21.1, repeat-0.8.0, metadata-1.8.0, celery-4.3.0, base-url-1.4.1, variables-1.7.1\ncollected 1 item\n\nTestCheckout.py .                                                                                         [100%]\n\n=============================================== 1 passed in 0.03s ===============================================\nuser@qt01:~/folder$\n\n</code></pre>\n"}], "owner": {"reputation": 397, "user_id": 1442916, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/74248bdf5b02584e72315e7be2e745b1?s=128&d=identicon&r=PG", "display_name": "Daniel Dow", "link": "https://stackoverflow.com/users/1442916/daniel-dow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 273, "favorite_count": 0, "accepted_answer_id": 58212227, "answer_count": 1, "score": 0, "last_activity_date": 1570076181, "creation_date": 1570057487, "last_edit_date": 1570057555, "question_id": 58210392, "link": "https://stackoverflow.com/questions/58210392/pytests-doesnt-collect-tests-from-local-directory", "title": "Pytests doesn&#39;t collect tests from local directory", "body": "<p>I've been looking all over the internet for an answer. They all tell me to make sure I do exactly what you can see I did below. I'm actually making this all during an online class in Pytest and it just doesn't work.    </p>\n\n<pre><code>ls\nTestCheckout.py  __init__.py    __pycache__   pytest.ini\n\ncat TestCheckout.py \ndef test_ConInstantiateCheckout():\n    co = CheckOut()\n\npytest\n=================================================== test session starts ====================================================\nplatform darwin -- Python 3.7.4, pytest-5.2.0, py-1.8.0, pluggy-0.13.0\nrootdir: /Users/ddow/dev/supermarket-kata\ncollected 0 items                                                                                                          \n\n================================================== no tests ran in 0.01s\n</code></pre>\n\n<p>Does anyone know what gives? Any help would be greatly appreciated.</p>\n"}, {"tags": ["python", "mysql", "django", "python-3.x"], "comments": [{"owner": {"reputation": 27, "user_id": 12145149, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/348b65fc6fc01b7d22a763f7b23ac188?s=128&d=identicon&r=PG&f=1", "display_name": "reg3x_mr", "link": "https://stackoverflow.com/users/12145149/reg3x-mr"}, "edited": false, "score": 0, "creation_date": 1570088332, "post_id": 58210389, "comment_id": 102805258, "body": "Problem solved :). Enough use in MySql  SET GLOBAL time_zone=&quot;+2&quot; ;"}], "owner": {"reputation": 27, "user_id": 12145149, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/348b65fc6fc01b7d22a763f7b23ac188?s=128&d=identicon&r=PG&f=1", "display_name": "reg3x_mr", "link": "https://stackoverflow.com/users/12145149/reg3x-mr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 272, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1570057474, "creation_date": 1570057474, "question_id": 58210389, "link": "https://stackoverflow.com/questions/58210389/cant-connect-to-mysqldb-in-django-importerror-cannot-import-name-client-fro", "title": "Can&#39;t connect to mysqldb in Django &quot;ImportError: cannot import name &#39;CLIENT&#39; from &#39;MySQLdb.constants&#39; (unknown location)&quot;", "body": "<p>I have been fought all day, but i fail. I have problem with connection to MYSQL database. I using Linux Debian and i try connect to local database, but something went wrong :/.</p>\n\n<p>Bellow attached settings.py</p>\n\n<pre><code># settings.py\n\nDATABASES = {\n    'default': {\n        'ENGINE': 'django.db.backends.mysql',\n        'NAME': 'dbDjango',\n        'USER': 'user',\n        'PASSWORD': '*******',\n        'HOST': '127.0.0.1',\n        'PORT': '3306',\n    }\n\n</code></pre>\n\n<p>But, when i run server using </p>\n\n<p><code>python3.7 manage.py runserver</code> the program call back me error like this:</p>\n\n<pre><code> File \"/usr/local/lib/python3.7/dist-packages/django/contrib/auth/models.py\", line 2, in &lt;module&gt;\n    from django.contrib.auth.base_user import AbstractBaseUser, BaseUserManager\n  File \"/usr/local/lib/python3.7/dist-packages/django/contrib/auth/base_user.py\", line 47, in &lt;module&gt;\n    class AbstractBaseUser(models.Model):\n  File \"/usr/local/lib/python3.7/dist-packages/django/db/models/base.py\", line 117, in __new__\n    new_class.add_to_class('_meta', Options(meta, app_label))\n  File \"/usr/local/lib/python3.7/dist-packages/django/db/models/base.py\", line 321, in add_to_class\n    value.contribute_to_class(cls, name)\n  File \"/usr/local/lib/python3.7/dist-packages/django/db/models/options.py\", line 204, in contribute_to_class\n    self.db_table = truncate_name(self.db_table, connection.ops.max_name_length())\n  File \"/usr/local/lib/python3.7/dist-packages/django/db/__init__.py\", line 28, in __getattr__\n    return getattr(connections[DEFAULT_DB_ALIAS], item)\n  File \"/usr/local/lib/python3.7/dist-packages/django/db/utils.py\", line 201, in __getitem__\n    backend = load_backend(db['ENGINE'])\n  File \"/usr/local/lib/python3.7/dist-packages/django/db/utils.py\", line 110, in load_backend\n    return import_module('%s.base' % backend_name)\n  File \"/usr/lib/python3.7/importlib/__init__.py\", line 127, in import_module\n    return _bootstrap._gcd_import(name[level:], package, level)\n  File \"/usr/local/lib/python3.7/dist-packages/django/db/backends/mysql/base.py\", line 22, in &lt;module&gt;\n    from MySQLdb.constants import CLIENT, FIELD_TYPE                # isort:skip\nImportError: cannot import name 'CLIENT' from 'MySQLdb.constants' (unknown location)\n\n</code></pre>\n\n<p>Mysql as service is runing:</p>\n\n<pre><code>ervice mysql status\n\u25cf mysql.service - MySQL Community Server\n   Loaded: loaded (/lib/systemd/system/mysql.service; disabled; vendor preset: disabled)\n   Active: active (running) since Thu 2019-10-03 00:14:56 CEST; 36min ago\n\n</code></pre>\n\n<p>I don't have any idea , what can make trouble :((\nThank's for an answer   </p>\n"}, {"tags": ["python", "django", "sqlite"], "comments": [{"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1570103338, "post_id": 58210340, "comment_id": 102812843, "body": "Please show the full traceback. Note, <code>to_field_name</code> probably isn&#39;t what you want, it changes where the ID comes from, not the display name."}, {"owner": {"reputation": 3146, "user_id": 327258, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/50d026903563e045ca29cab1ad0b1d66?s=128&d=identicon&r=PG", "display_name": "Codejoy", "link": "https://stackoverflow.com/users/327258/codejoy"}, "reply_to_user": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1570116721, "post_id": 58210340, "comment_id": 102820345, "body": "removed the to_field_name and added full stack trace..."}, {"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1570117766, "post_id": 58210340, "comment_id": 102820856, "body": "But this doesn&#39;t match up. You&#39;re not using your DecimalField in the form."}, {"owner": {"reputation": 3146, "user_id": 327258, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/50d026903563e045ca29cab1ad0b1d66?s=128&d=identicon&r=PG", "display_name": "Codejoy", "link": "https://stackoverflow.com/users/327258/codejoy"}, "reply_to_user": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1570129097, "post_id": 58210340, "comment_id": 102825736, "body": "I agree.  That&#39;s why I&#39;m confused but if I take out the institution = forms.....  then it works fine.  Do I need to maybe run a migration??? I did add the <i>str_</i> method to the model but didnt think I had to run another migration."}, {"owner": {"reputation": 3146, "user_id": 327258, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/50d026903563e045ca29cab1ad0b1d66?s=128&d=identicon&r=PG", "display_name": "Codejoy", "link": "https://stackoverflow.com/users/327258/codejoy"}, "reply_to_user": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1570211189, "post_id": 58210340, "comment_id": 102854419, "body": "heck if I know I rebuilt the database and it is all dandy now."}], "answers": [{"tags": [], "owner": {"reputation": 3709, "user_id": 611677, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd2bab7c8bb83cfb2292f2309156296d?s=128&d=identicon&r=PG", "display_name": "Michel Samia", "link": "https://stackoverflow.com/users/611677/michel-samia"}, "is_accepted": false, "score": 0, "last_activity_date": 1584640098, "creation_date": 1584640098, "answer_id": 60762548, "question_id": 58210340, "link": "https://stackoverflow.com/questions/58210340/modelchoicefield-causing-decimal-invalidoperation-even-with-def-str-on-mode/60762548#60762548", "title": "ModelChoiceField causing decimal.invalidoperation, even with def __str__ on model set to return the name", "body": "<p>I got this error (operating on closed DB) once when I broke foreign key constraint in a badly written test</p>\n"}], "owner": {"reputation": 3146, "user_id": 327258, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/50d026903563e045ca29cab1ad0b1d66?s=128&d=identicon&r=PG", "display_name": "Codejoy", "link": "https://stackoverflow.com/users/327258/codejoy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1584640152, "creation_date": 1570057135, "last_edit_date": 1584640152, "question_id": 58210340, "link": "https://stackoverflow.com/questions/58210340/modelchoicefield-causing-decimal-invalidoperation-even-with-def-str-on-mode", "title": "ModelChoiceField causing decimal.invalidoperation, even with def __str__ on model set to return the name", "body": "<p>I have a forms.py and this little nugget here:</p>\n\n<pre><code> from mainpage.models import Institution\n\n  institution = forms.ModelChoiceField(queryset=Institution.objects.all(), empty_label=\"(Select One)\", \n        to_field_name=\"institution_name\", \n        widget=forms.Select(\n            attrs={\n                'tabindex':'7','class':'form-control'\n            }\n        )\n    )   \n</code></pre>\n\n<p>It causes that decimal.invalidoperation once I have this piece of code in it, even though my InstitutionModel is as such (in another app)</p>\n\n<pre><code>class Institution(models.Model):\n    objects = models.Manager()\n\n    institution_id = models.CharField(max_length=10)\n    institution_name = models.CharField(max_length=100)\n    institution_precentages = models.DecimalField(max_digits = 4, decimal_places=2) #might have to change this\n\n\n\n    def __str__(self):\n        return self.institution_name\n</code></pre>\n\n<p>I even tested in the view trying to render all this a quick little</p>\n\n<pre><code>   p = Institution.objects.first()\n   print(p)\n</code></pre>\n\n<p>Worked fine, not sure what else to try or what I am missing.</p>\n\n<p>EDIT: Full stack trace:</p>\n\n<pre><code>Starting development server at http://127.0.0.1:8000/\nQuit the server with CONTROL-C.\n[03/Oct/2019 15:31:22] \"GET / HTTP/1.1\" 200 44551\n[03/Oct/2019 15:31:22] \"GET /static/img/apo-img/moon.jpg HTTP/1.1\" 304 0\n[03/Oct/2019 15:31:22] \"GET /static/img/apo-img/b4.jpg HTTP/1.1\" 200 492566\n[03/Oct/2019 15:31:22] \"GET /static/img/site-img/saturn.png HTTP/1.1\" 200 223493\n[03/Oct/2019 15:31:22] \"GET /static/js/uza.bundle.js HTTP/1.1\" 200 161266\n[03/Oct/2019 15:31:22] \"GET /static/img/apo-img/b3.jpg HTTP/1.1\" 200 2012230\n[03/Oct/2019 15:31:22] \"GET /static/img/site-img/sloanmilkyway.png HTTP/1.1\" 200 2609664\nInternal Server Error: /accounts/signup/\nTraceback (most recent call last):\n  File \"/usr/local/lib/python3.7/site-packages/django/core/handlers/exception.py\", line 34, in inner\n    response = get_response(request)\n  File \"/usr/local/lib/python3.7/site-packages/django/core/handlers/base.py\", line 115, in _get_response\n    response = self.process_exception_by_middleware(e, request)\n  File \"/usr/local/lib/python3.7/site-packages/django/core/handlers/base.py\", line 113, in _get_response\n    response = wrapped_callback(request, *callback_args, **callback_kwargs)\n  File \"/Users/shathoma/programming/web/django_apo/accounts/views.py\", line 75, in signup\n    return render(request, 'signup.html', {'form': form, 'profile_form': profile_form})\n  File \"/usr/local/lib/python3.7/site-packages/django/shortcuts.py\", line 36, in render\n    content = loader.render_to_string(template_name, context, request, using=using)\n  File \"/usr/local/lib/python3.7/site-packages/django/template/loader.py\", line 62, in render_to_string\n    return template.render(context, request)\n  File \"/usr/local/lib/python3.7/site-packages/django/template/backends/django.py\", line 61, in render\n    return self.template.render(context)\n  File \"/usr/local/lib/python3.7/site-packages/django/template/base.py\", line 171, in render\n    return self._render(context)\n  File \"/usr/local/lib/python3.7/site-packages/django/template/base.py\", line 163, in _render\n    return self.nodelist.render(context)\n  File \"/usr/local/lib/python3.7/site-packages/django/template/base.py\", line 937, in render\n    bit = node.render_annotated(context)\n  File \"/usr/local/lib/python3.7/site-packages/django/template/base.py\", line 904, in render_annotated\n    return self.render(context)\n  File \"/usr/local/lib/python3.7/site-packages/django/template/loader_tags.py\", line 150, in render\n    return compiled_parent._render(context)\n  File \"/usr/local/lib/python3.7/site-packages/django/template/base.py\", line 163, in _render\n    return self.nodelist.render(context)\n  File \"/usr/local/lib/python3.7/site-packages/django/template/base.py\", line 937, in render\n    bit = node.render_annotated(context)\n  File \"/usr/local/lib/python3.7/site-packages/django/template/base.py\", line 904, in render_annotated\n    return self.render(context)\n  File \"/usr/local/lib/python3.7/site-packages/django/template/loader_tags.py\", line 62, in render\n    result = block.nodelist.render(context)\n  File \"/usr/local/lib/python3.7/site-packages/django/template/base.py\", line 937, in render\n    bit = node.render_annotated(context)\n  File \"/usr/local/lib/python3.7/site-packages/django/template/base.py\", line 904, in render_annotated\n    return self.render(context)\n  File \"/usr/local/lib/python3.7/site-packages/django/template/base.py\", line 993, in render\n    return render_value_in_context(output, context)\n  File \"/usr/local/lib/python3.7/site-packages/django/template/base.py\", line 972, in render_value_in_context\n    value = str(value)\n  File \"/usr/local/lib/python3.7/site-packages/django/utils/html.py\", line 388, in &lt;lambda&gt;\n    klass.__str__ = lambda self: mark_safe(klass_str(self))\n  File \"/usr/local/lib/python3.7/site-packages/django/forms/boundfield.py\", line 33, in __str__\n    return self.as_widget()\n  File \"/usr/local/lib/python3.7/site-packages/django/forms/boundfield.py\", line 93, in as_widget\n    renderer=self.form.renderer,\n  File \"/usr/local/lib/python3.7/site-packages/django/forms/widgets.py\", line 241, in render\n    context = self.get_context(name, value, attrs)\n  File \"/usr/local/lib/python3.7/site-packages/django/forms/widgets.py\", line 680, in get_context\n    context = super().get_context(name, value, attrs)\n  File \"/usr/local/lib/python3.7/site-packages/django/forms/widgets.py\", line 641, in get_context\n    context['widget']['optgroups'] = self.optgroups(name, context['widget']['value'], attrs)\n  File \"/usr/local/lib/python3.7/site-packages/django/forms/widgets.py\", line 589, in optgroups\n    for index, (option_value, option_label) in enumerate(self.choices):\n  File \"/usr/local/lib/python3.7/site-packages/django/forms/models.py\", line 1137, in __iter__\n    for obj in queryset:\n  File \"/usr/local/lib/python3.7/site-packages/django/db/models/query.py\", line 341, in _iterator\n    yield from self._iterable_class(self, chunked_fetch=use_chunked_fetch, chunk_size=chunk_size)\n  File \"/usr/local/lib/python3.7/site-packages/django/db/models/query.py\", line 72, in __iter__\n    for row in compiler.results_iter(results):\n  File \"/usr/local/lib/python3.7/site-packages/django/db/models/sql/compiler.py\", line 1044, in apply_converters\n    value = converter(value, expression, connection)\n  File \"/usr/local/lib/python3.7/site-packages/django/db/backends/sqlite3/operations.py\", line 285, in converter\n    return create_decimal(value).quantize(quantize_value, context=expression.output_field.context)\ndecimal.InvalidOperation: [&lt;class 'decimal.InvalidOperation'&gt;]\n[03/Oct/2019 15:31:25] \"GET /accounts/signup/ HTTP/1.1\" 500 219301\nException ignored in: &lt;generator object cursor_iter at 0x10e417228&gt;\nTraceback (most recent call last):\n  File \"/usr/local/lib/python3.7/site-packages/django/db/models/sql/compiler.py\", line 1515, in cursor_iter\n    cursor.close()\nsqlite3.ProgrammingError: Cannot operate on a closed database.\n</code></pre>\n"}, {"tags": ["python", "conda"], "comments": [{"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1570064349, "post_id": 58210335, "comment_id": 102799474, "body": "Try it and let us know. All you need is two open shells"}, {"owner": {"reputation": 91, "user_id": 1278784, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0b017a1b53609dde48dbb82bb3b16f08?s=128&d=identicon&r=PG", "display_name": "RedbackThomson", "link": "https://stackoverflow.com/users/1278784/redbackthomson"}, "reply_to_user": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1570120800, "post_id": 58210335, "comment_id": 102822268, "body": "Although I&#39;m sure it would work for two packages running at the same time, with few overlapping dependencies, I&#39;m more worried about the case of thousands of dependencies all installing at the same time. If anyone has insights into the locking mechanism of <code>conda install</code>, this would be a more concrete analysis of its viability."}, {"owner": {"reputation": 71, "user_id": 4517790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a879eb6c7992e245a5332edd3f9a9712?s=128&d=identicon&r=PG&f=1", "display_name": "zahypeti", "link": "https://stackoverflow.com/users/4517790/zahypeti"}, "edited": false, "score": 0, "creation_date": 1589148295, "post_id": 58210335, "comment_id": 109171715, "body": "The question is more about multiprocessing (or concurrency in general) and process safety, rather than thread safety, isn&#39;t it?"}], "answers": [{"comments": [{"owner": {"reputation": 91, "user_id": 1278784, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0b017a1b53609dde48dbb82bb3b16f08?s=128&d=identicon&r=PG", "display_name": "RedbackThomson", "link": "https://stackoverflow.com/users/1278784/redbackthomson"}, "edited": false, "score": 1, "creation_date": 1570644141, "post_id": 58228286, "comment_id": 102981106, "body": "Thank you for the comprehensive answer. It would seem that doing this on any larger scale would cause the same inefficiencies that I am already seeing and instead just introduce complexities into an otherwise simple process. Appreciate the investigation."}, {"owner": {"reputation": 14016, "user_id": 2148718, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/b458d4a48bebf560c9a90d5ab2db1902?s=128&d=identicon&r=PG", "display_name": "Migwell", "link": "https://stackoverflow.com/users/2148718/migwell"}, "edited": false, "score": 3, "creation_date": 1588298310, "post_id": 58228286, "comment_id": 108851625, "body": "If anyone is interested on the current state of this in conda, it looks like it&#39;s tracked in <a href=\"https://github.com/conda/conda/issues/6742\" rel=\"nofollow noreferrer\">this issue</a>. The cross-referenced issues provide a lot of related discussion also."}], "tags": [], "owner": {"reputation": 41290, "user_id": 570918, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/27ce5101af57acecf9a5fe563b6192b1?s=128&d=identicon&r=PG", "display_name": "merv", "link": "https://stackoverflow.com/users/570918/merv"}, "is_accepted": false, "score": 5, "last_activity_date": 1570147331, "creation_date": 1570147331, "answer_id": 58228286, "question_id": 58210335, "link": "https://stackoverflow.com/questions/58210335/is-conda-install-a-thread-safe-operation/58228286#58228286", "title": "Is conda install a thread-safe operation?", "body": "<p>The short answer: <strong>No, it should not be run concurrently</strong>.</p>\n\n<p>Most of how Conda handles transaction safety was established in version v4.3. <a href=\"https://github.com/conda/conda/blob/b2e428d7c3f8661504c17ed936c3e79fd8b508dc/docs/source/release-notes.rst#430-2016-12-14-safety\" rel=\"noreferrer\">The release notes in v4.3.0</a> regarding changes to locks explicitly comment on running multiple processes:</p>\n\n<blockquote>\n  <p>[U]sers are cautioned that undefined behavior can result when conda is running in multiple process and operating on the same package caches and/or environments.</p>\n</blockquote>\n\n<p>It sounds like you're talking about different environments, so that shouldn't be an issue. However, you need to ensure that the package(s) to be installed is already downloaded into the package cache, otherwise it is not safe.</p>\n\n<h2>Partial Parallel Strategy</h2>\n\n<p>There is a <code>--download-only</code> flag, which will only add the package to the package cache (i.e., the part that cannot be done concurrently). But the issue is that this would still need to be done on a per-env basis, since different envs could have different constraints (e.g., different Python versions) that require different builds of the package.</p>\n\n<p>I think the best you could do at the CLI is</p>\n\n<ol>\n<li>Run <code>conda install --download-only pkg</code> sequentially on each env, then</li>\n<li>Run <code>conda install pkg</code> in parallel for the envs.</li>\n</ol>\n\n<p>This is, however, not in any official recommendation, and changes in how Conda does transactions could lead to this not being safe.  I'll also say that I very much doubt this will save you much time; in fact, it might take longer. This approach will involve every env having to solve and prepare transactions twice, and that is usually the most computationally intensive step. The part you end up parallelizing involves disk transactions, which is going to be I/O bound, so I kind of doubt any time will be saved.</p>\n\n<h2>Some Evidence For This Being Safe</h2>\n\n<p>While this doesn't positively prove its safety, we can explicitly examine the transactions to make sure that when we run Step 2 above, it will only involve LINK transactions.</p>\n\n<p>To test this, I made two envs:</p>\n\n<pre><code>conda create -n foo -y python=3.6\nconda create -n bar -y python=3.6\n</code></pre>\n\n<p>Then I check the output from</p>\n\n<pre><code>conda install -n foo -d --json pandas\n</code></pre>\n\n<p>which shows a list of both FETCH and LINK transactions. The former involve manipulating the package cache, whereas the latter only the env. If I then run </p>\n\n<pre><code>conda install -n foo --download-only pandas\n</code></pre>\n\n<p>and check again,</p>\n\n<pre><code>conda install -n foo -d --json pandas\n</code></pre>\n\n<p>I now see only LINK transactions.  Notably, the same is now true for <code>-n bar</code>, which should reinforce the fact that Step 1 should be done sequentially. The good part is that it won't lead to redownloading the same package; the bad part, that it involves a solve happening in every env. In a more heterogenous environment, we could expect there might be different FETCH operations in each env.</p>\n\n<p>Finally, I can run the parallel final install</p>\n\n<pre><code>conda install -n foo -y pandas &amp; conda install -n bar -y pandas &amp;\n</code></pre>\n\n<p>which is safe if we can assume that that LINK transactions in different envs are safe.</p>\n"}], "owner": {"reputation": 91, "user_id": 1278784, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0b017a1b53609dde48dbb82bb3b16f08?s=128&d=identicon&r=PG", "display_name": "RedbackThomson", "link": "https://stackoverflow.com/users/1278784/redbackthomson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 509, "favorite_count": 0, "answer_count": 1, "score": 5, "last_activity_date": 1570147331, "creation_date": 1570057104, "last_edit_date": 1570064219, "question_id": 58210335, "link": "https://stackoverflow.com/questions/58210335/is-conda-install-a-thread-safe-operation", "title": "Is conda install a thread-safe operation?", "body": "<p>I would like to install packages into multiple conda environments. Doing this one after the other takes quite some time, so it would be nice if I could run all the <code>conda install</code> steps for each environment in parallel. Would this be possible or are there conflicts (relating to hard links and lock files, possibly) when trying to run conda in parallel?</p>\n"}, {"tags": ["python", "pandas", "csv", "dataframe", "nan"], "comments": [{"owner": {"reputation": 182, "user_id": 10470171, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l3eTR.jpg?s=128&g=1", "display_name": "Maximilian Janisch", "link": "https://stackoverflow.com/users/10470171/maximilian-janisch"}, "edited": false, "score": 0, "creation_date": 1570057495, "post_id": 58210311, "comment_id": 102798212, "body": "Have you tried using <code>IDs=dfQ[&quot;Chip ID&quot;]</code>? (This should give you a Pandas Series)"}, {"owner": {"reputation": 133, "user_id": 3216122, "user_type": "registered", "profile_image": "https://graph.facebook.com/1111900851/picture?type=large", "display_name": "Tyler", "link": "https://stackoverflow.com/users/3216122/tyler"}, "reply_to_user": {"reputation": 182, "user_id": 10470171, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l3eTR.jpg?s=128&g=1", "display_name": "Maximilian Janisch", "link": "https://stackoverflow.com/users/10470171/maximilian-janisch"}, "edited": false, "score": 0, "creation_date": 1570057717, "post_id": 58210311, "comment_id": 102798241, "body": "@MaximilianJanisch Great minds think alike. It terminates with a key error: <code>KeyError: &#39;Chip ID&#39;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 133, "user_id": 3216122, "user_type": "registered", "profile_image": "https://graph.facebook.com/1111900851/picture?type=large", "display_name": "Tyler", "link": "https://stackoverflow.com/users/3216122/tyler"}, "edited": false, "score": 0, "creation_date": 1570057846, "post_id": 58210408, "comment_id": 102798264, "body": "Strange. It terminates with a key error: <code>KeyError: &#39;Chip ID&#39;</code>"}, {"owner": {"reputation": 3707, "user_id": 9302488, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/097c89e042db32a2510ab6bd328d3b02?s=128&d=identicon&r=PG", "display_name": "Massifox", "link": "https://stackoverflow.com/users/9302488/massifox"}, "reply_to_user": {"reputation": 133, "user_id": 3216122, "user_type": "registered", "profile_image": "https://graph.facebook.com/1111900851/picture?type=large", "display_name": "Tyler", "link": "https://stackoverflow.com/users/3216122/tyler"}, "edited": false, "score": 1, "creation_date": 1570058016, "post_id": 58210408, "comment_id": 102798293, "body": "do <code>print(dfQ.columns)</code> and put the result here in the comments"}, {"owner": {"reputation": 133, "user_id": 3216122, "user_type": "registered", "profile_image": "https://graph.facebook.com/1111900851/picture?type=large", "display_name": "Tyler", "link": "https://stackoverflow.com/users/3216122/tyler"}, "edited": false, "score": 0, "creation_date": 1570058141, "post_id": 58210408, "comment_id": 102798321, "body": "OH! I did that before but didn&#39;t notice a space at the beginning of the column header for &#39; Chip ID&#39; !  <code>Index([&#39;Date&#39;, &#39; Time&#39;, &#39; Device ID&#39;, &#39; Chip ID&#39;, &#39; Lot&#39;, &#39; Wafer&#39;, &#39; X&#39;, &#39; Y&#39;,        &#39; Q half-width&#39;, &#39; Q fit&#39;, &#39; dQ&#184; %&#39;, &#39; Internal Resonant F&#39;,        &#39; Internal Resonant A&#39;, &#39; Ajusted FG Ampl&#39;, &#39; FG Amplitude (0.10)&#39;,        &#39; Forced A&#39;, &#39; Forced F&#39;, &#39; Drive Gain&#39;, &#39; Frequency sweep&#184;start&#39;,        &#39; Prelim Q  half-width&#39;, &#39; Prelim Q fit&#39;, &#39; Prelim Q Error&#184; %&#39;,        &#39; Execution time&#39;, &#39; Preliminary F&#39;, &#39; residue&#39;, &#39; &#39;],       dtype=&#39;object&#39;)</code>"}, {"owner": {"reputation": 182, "user_id": 10470171, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l3eTR.jpg?s=128&g=1", "display_name": "Maximilian Janisch", "link": "https://stackoverflow.com/users/10470171/maximilian-janisch"}, "reply_to_user": {"reputation": 133, "user_id": 3216122, "user_type": "registered", "profile_image": "https://graph.facebook.com/1111900851/picture?type=large", "display_name": "Tyler", "link": "https://stackoverflow.com/users/3216122/tyler"}, "edited": false, "score": 1, "creation_date": 1570058195, "post_id": 58210408, "comment_id": 102798334, "body": "@Tyler Wait you noticed it just before me (well I had to download the dataset first \ud83d\ude05)"}, {"owner": {"reputation": 133, "user_id": 3216122, "user_type": "registered", "profile_image": "https://graph.facebook.com/1111900851/picture?type=large", "display_name": "Tyler", "link": "https://stackoverflow.com/users/3216122/tyler"}, "reply_to_user": {"reputation": 182, "user_id": 10470171, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l3eTR.jpg?s=128&g=1", "display_name": "Maximilian Janisch", "link": "https://stackoverflow.com/users/10470171/maximilian-janisch"}, "edited": false, "score": 1, "creation_date": 1570058419, "post_id": 58210408, "comment_id": 102798386, "body": "Thanks @MaximilianJanisch went ahead and marked your post as the answer. Many thanks to both you and Massifox for the help. I&#39;m a newbie to Python and little things like this are my weakness right now. Cheers"}, {"owner": {"reputation": 182, "user_id": 10470171, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l3eTR.jpg?s=128&g=1", "display_name": "Maximilian Janisch", "link": "https://stackoverflow.com/users/10470171/maximilian-janisch"}, "reply_to_user": {"reputation": 133, "user_id": 3216122, "user_type": "registered", "profile_image": "https://graph.facebook.com/1111900851/picture?type=large", "display_name": "Tyler", "link": "https://stackoverflow.com/users/3216122/tyler"}, "edited": false, "score": 1, "creation_date": 1570058465, "post_id": 58210408, "comment_id": 102798395, "body": "@Tyler You&#39;re welcome and I&#39;m glad that we could resolve your problem so easily"}], "tags": [], "owner": {"reputation": 3707, "user_id": 9302488, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/097c89e042db32a2510ab6bd328d3b02?s=128&d=identicon&r=PG", "display_name": "Massifox", "link": "https://stackoverflow.com/users/9302488/massifox"}, "is_accepted": false, "score": 2, "last_activity_date": 1570058441, "last_edit_date": 1570058441, "creation_date": 1570057612, "answer_id": 58210408, "question_id": 58210311, "link": "https://stackoverflow.com/questions/58210311/all-nan-values-when-filtering-pandas-dataframe-to-one-column/58210408#58210408", "title": "All NAN values when filtering pandas DataFrame to one column", "body": "<p>All you have to do is:</p>\n\n<pre><code>IDs = dfQ[\"Chip ID\"]\n</code></pre>\n\n<p>and you will get the corresponding pandas.series. If you want the result in pandas.DataFrame to format just do:</p>\n\n<pre><code>IDs = dfQ[\"Chip ID\"].to_frame()\n</code></pre>\n\n<hr>\n\n<p>EDIT:</p>\n\n<p>Your columns name starts with space:</p>\n\n<pre><code>Index(['Date', ' Time', ' Device ID', ' Chip ID', ' Lot', ' Wafer', ' X', ' Y',\n       ' Q half-width', ' Q fit', ' dQ\u00b8 %', ' Internal Resonant F',\n       ' Internal Resonant A', ' Ajusted FG Ampl', ' FG Amplitude (0.10)',\n       ' Forced A', ' Forced F', ' Drive Gain', ' Frequency sweep\u00b8start',\n       ' Prelim Q  half-width', ' Prelim Q fit', ' Prelim Q Error\u00b8 %',\n       ' Execution time', ' Preliminary F', ' residue', ' '],\n      dtype='object')\n</code></pre>\n\n<p>so all you have to do:</p>\n\n<pre><code>IDs = dfQ[\" Chip ID\"]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 182, "user_id": 10470171, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l3eTR.jpg?s=128&g=1", "display_name": "Maximilian Janisch", "link": "https://stackoverflow.com/users/10470171/maximilian-janisch"}, "is_accepted": true, "score": 2, "last_activity_date": 1570058163, "creation_date": 1570058163, "answer_id": 58210458, "question_id": 58210311, "link": "https://stackoverflow.com/questions/58210311/all-nan-values-when-filtering-pandas-dataframe-to-one-column/58210458#58210458", "title": "All NAN values when filtering pandas DataFrame to one column", "body": "<p>The problem is that your column is actually named <code>Chip ID</code> (with a space) and not <code>Chip ID</code>.</p>\n\n<p>So either <code>IDs = dfQ[\" Chip ID\"]</code> for a Series or <code>IDs = dfQ[[\" Chip ID\"]]</code> should both work.</p>\n"}], "owner": {"reputation": 133, "user_id": 3216122, "user_type": "registered", "profile_image": "https://graph.facebook.com/1111900851/picture?type=large", "display_name": "Tyler", "link": "https://stackoverflow.com/users/3216122/tyler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 205, "favorite_count": 0, "accepted_answer_id": 58210458, "answer_count": 2, "score": 0, "last_activity_date": 1570058441, "creation_date": 1570056848, "last_edit_date": 1570056948, "question_id": 58210311, "link": "https://stackoverflow.com/questions/58210311/all-nan-values-when-filtering-pandas-dataframe-to-one-column", "title": "All NAN values when filtering pandas DataFrame to one column", "body": "<p>I'm importing data from a <a href=\"https://drive.google.com/file/d/1pGvUWDJv6Xr4tDhtpaw2EPmxc9N7RcrS/view?usp=sharing\" rel=\"nofollow noreferrer\">.csv file</a>, which is stored in one dataframe. Looks fine there:\n<a href=\"https://i.stack.imgur.com/encf2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/encf2.png\" alt=\"enter image description here\"></a></p>\n\n<p>After which I try to store only one column of the dataframe elsewhere. However, it returns all NaN values:</p>\n\n<p><a href=\"https://i.stack.imgur.com/NuSQF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NuSQF.png\" alt=\"enter image description here\"></a></p>\n\n<p>The exact same code works fine for a .xls file earlier in the same Python script. So I'm unsure of what is happening here. Any clarification would be appreciated. Here is the source code:</p>\n\n<pre><code>    # ------------------------------------------------------------------------------\nprint(\"\\nSELECT Q MEASUREMENT FILE TO FIX: \")\ntime.sleep(1)\n# Allow User to pick file that which needs X-Y data to be FIXED\ntkinter.Tk().withdraw()  # Close the root window\ninput2 = filedialog.askopenfilename()\nprint(\"\\nYou selected file:\")\nprint(input2)\nprint(\"\\n\")\ninput2 = str(input2)\n\n# Check to see if directory/file exists\nassert os.path.exists(input2), \"File does not exist at, \"+str(input2)\n\n# Import data below and store in df\nprint(\"\\nImporting Excel Workbook...\")\ntime.sleep(1)\n# You can check encoding of file with notepad++\ndfQ = pd.read_csv(input2, encoding=\"ansi\")\ndfQ.values\nprint(dfQ)  # This DataFrame (dfQ) contains the entire excel workbook\nprint(\"\\n\\nWorkbook Successfully Imported\")\ntime.sleep(.5)\nprint(\"...\")\n\n# Search Q measurements CSV for \"Chip ID\" and matches it to corresponding\n# \"PartID\" in the master table created from manually fixed file.\nprint(\"Matching PartID's to update proper X-Y values\")\ntime.sleep(.5)\nprint(\"...\")\nIDs = pd.DataFrame(dfQ, columns=['Chip ID'])\ntime.sleep(.5)\nprint(IDs)\ns = IDs.size\nprint(\"\\nSuccessfully extracted\", s, \"Chip ID's!\")\nprint(dfQ.columns)\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "pip", "setuptools"], "comments": [{"owner": {"reputation": 9376, "user_id": 11138259, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2faec9f4f30093c8b0f5d47a69e551f?s=128&d=identicon&r=PG&f=1", "display_name": "sinoroc", "link": "https://stackoverflow.com/users/11138259/sinoroc"}, "edited": false, "score": 0, "creation_date": 1570272443, "post_id": 58210276, "comment_id": 102866106, "body": "Still having issues? I cloned your repository and everything seems to work fine."}, {"owner": {"reputation": 5642, "user_id": 138033, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/181c5c9fba2ba806033789ff2b087fe7?s=128&d=identicon&r=PG", "display_name": "Cylindric", "link": "https://stackoverflow.com/users/138033/cylindric"}, "reply_to_user": {"reputation": 9376, "user_id": 11138259, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2faec9f4f30093c8b0f5d47a69e551f?s=128&d=identicon&r=PG&f=1", "display_name": "sinoroc", "link": "https://stackoverflow.com/users/11138259/sinoroc"}, "edited": false, "score": 1, "creation_date": 1570373919, "post_id": 58210276, "comment_id": 102885605, "body": "@sinoroc it was a silly environmental problem. I had just forgotten to <code>pip install -e .</code>"}], "answers": [{"tags": [], "owner": {"reputation": 9376, "user_id": 11138259, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2faec9f4f30093c8b0f5d47a69e551f?s=128&d=identicon&r=PG&f=1", "display_name": "sinoroc", "link": "https://stackoverflow.com/users/11138259/sinoroc"}, "is_accepted": false, "score": 1, "last_activity_date": 1570273422, "creation_date": 1570273422, "answer_id": 58247712, "question_id": 58210276, "link": "https://stackoverflow.com/questions/58210276/correct-python-project-structure-for-packages/58247712#58247712", "title": "Correct Python project structure for packages", "body": "<p>A couple of points:</p>\n\n<ul>\n<li><p>It's true that a package without <code>__init__.py</code> should work (since Python 3.3 I think). You can leave it out, if you don't need it (i.e.: you have nothing to write in it).</p></li>\n<li><p>I would not call <code>python example_service/example_cli.py</code> directly, ever. You have the <em>setuptools</em> <em>entry point</em> for this purpose, so in your case call <code>example</code> directly instead. (You can remove the shebang and the executable bit from <code>example_service/example_cli.py</code>.)</p></li>\n<li><p>from within your package <code>example_service</code> you can either use <code>from example_service.componenta import ComponentA</code> or <code>from .componenta import ComponentA</code>. This should work the same in both cases.</p></li>\n</ul>\n"}], "owner": {"reputation": 5642, "user_id": 138033, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/181c5c9fba2ba806033789ff2b087fe7?s=128&d=identicon&r=PG", "display_name": "Cylindric", "link": "https://stackoverflow.com/users/138033/cylindric"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 603, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1570273422, "creation_date": 1570056513, "question_id": 58210276, "link": "https://stackoverflow.com/questions/58210276/correct-python-project-structure-for-packages", "title": "Correct Python project structure for packages", "body": "<p>I am creating a Python utility that will need to be shared internally via <code>pip</code> packages, and will be consumed both as a library and as a command-line tool.</p>\n\n<p>I am having difficulty with the correct use of namespaces and where/when/if to put <code>__init__.py</code> files to get a consistent codebase.</p>\n\n<ul>\n<li>I can get \"library\" usage working, so I can <code>from example_service.example import Example</code>.</li>\n<li>I can get CLI usage working, so I can execute <code>python example_service/example_cli.py</code>.</li>\n<li>I can get <code>pytest</code> working.</li>\n<li>I CANNOT get all three working at once.</li>\n</ul>\n\n<p>So</p>\n\n<ul>\n<li>Should my package's use <code>from filename import Class</code> or <code>from .filename</code> or <code>from example_service.filename</code>?</li>\n<li>Should I put a <code>__init__.py</code> in my package directory or not? It seems it should not be necessary for Python3, but I get mixed results.</li>\n</ul>\n\n<hr>\n\n<ul>\n<li>If\n\n<ul>\n<li><code>example.py</code> uses <code>from componenta import ComponentA</code> and</li>\n<li><code>example_cli.py</code> uses <code>from example import Example</code></li>\n<li>then the CLI invokation <strong>works</strong></li>\n<li>the library import <strong>fails</strong> with <code>no component named 'componenta'</code></li>\n</ul></li>\n<li>If\n\n<ul>\n<li><code>example.py</code> uses <code>from example_service.componenta import ComponentA</code> and</li>\n<li><code>example_cli.py</code> uses <code>from example import Example</code></li>\n<li>then the CLI invokation <strong>fails</strong> with <code>no component named 'example_service'</code></li>\n<li>the library import <strong>works</strong></li>\n</ul></li>\n</ul>\n\n<hr>\n\n<p>I currently have a project directory that looks something like this:</p>\n\n<pre><code>project_root/\n    example_service/\n        example.py\n        example_cli.py\n        componenta.py\n        componentb.py\n        tests/\n            __init__.py\n            test_example.py\n    setup.py\n    requirements.txt\n</code></pre>\n\n<p>Inside my main lib code, <code>example.py</code>, I have:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from componenta import ComponentA\n\nclass Example(object):\n    def foo(self):\n        a = ComponentA()\n        print(\"Example.foo()\")\n</code></pre>\n\n<p>My CLI wrapper will handle args and stuff, but for now is just:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>#!/usr/bin/env python\nfrom example import Example\n\nclass ExampleCli(object):\n    def __init__(self):\n        print(\"ExampleCli.init()\")\n        e = Example()\n        e.foo()\n\nif __name__ == '__main__':\n    ExampleCli()\n</code></pre>\n\n<p>And <code>componenta.py</code> is:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>class ComponentA(object):\n    def bar(self):\n      print(\"ComponentA.bar()\")\n</code></pre>\n\n<p>(Full code has been posted to <a href=\"https://github.com/Cylindric/python_package/tree/zz_so1/\" rel=\"nofollow noreferrer\">GitHub</a>)</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1570056592, "post_id": 58210252, "comment_id": 102798016, "body": "Just read this: <a href=\"https://nedbatchelder.com/text/names.html\" rel=\"nofollow noreferrer\">nedbatchelder.com/text/names.html</a>"}, {"owner": {"reputation": 21, "user_id": 7603196, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FvSME.jpg?s=128&g=1", "display_name": "JamesD", "link": "https://stackoverflow.com/users/7603196/jamesd"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1570056842, "post_id": 58210252, "comment_id": 102798072, "body": "A very good and helpful link. Thank you@juanpa.arrivillaga"}], "owner": {"reputation": 21, "user_id": 7603196, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FvSME.jpg?s=128&g=1", "display_name": "JamesD", "link": "https://stackoverflow.com/users/7603196/jamesd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 27, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1570056342, "creation_date": 1570056342, "question_id": 58210252, "link": "https://stackoverflow.com/questions/58210252/python-change-equaled-object", "title": "Python change equaled object?", "body": "<pre><code>class ListNode(object):\n    def __init__(self, x):\n        self.val = x\n        self.next = None\n\n    def __repr__(self):\n        if self:\n            return \"{} -&gt; {}\".format(self.val, self.next)\n\n\nclass Solution(object):\n    def mergeTwoLists(self, l1, l2):\n        curr = dummy = ListNode(0)\n        while l1 and l2:\n            if l1.val &lt; l2.val:\n                curr.next = l1\n                l1 = l1.next\n            else:\n                curr.next = l2\n                l2 = l2.next\n            curr = curr.next\n        curr.next = l1 or l2\n        return dummy.next\n\nln1 = ListNode(1)\nln2 = ListNode(2)\nln3 = ListNode(4)\nln4 = ListNode(1)\nln5 = ListNode(3)\nln6 = ListNode(4)\nln1.next = ln2\nln2.next = ln3\nln4.next = ln5\nln5.next = ln6\n\ns = Solution()\nresult = s.mergeTwoLists(ln1, ln4)\nprint(result)\n</code></pre>\n\n<p>A python code to solve a leetcode problem #21. The question is when the code runs at <code>curr.next = l1</code> or <code>curr.next = l2</code>, the <code>curr</code> changes and the <code>dummy</code> also changes. However, when runs at <code>curr = curr.next</code>, only curr runs but <code>dummy</code> doesn't change. Why it happens like this?</p>\n\n<p>The similar situation in Python is:</p>\n\n<pre><code>a = b = [1, 2, 3]\nb = [1, 2, 3, 4]\nprint(a)\n\na = b = [1, 2, 3]\nb.append(4)\nprint(a)\n</code></pre>\n\n<p>the first <code>a</code> doesn't change but the second <code>a</code> changes</p>\n"}, {"tags": ["python", "python-3.x", "arraylist", "list-comprehension"], "comments": [{"owner": {"reputation": 28698, "user_id": 8380272, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ZL-hcLCA44/AAAAAAAAAAI/AAAAAAAAAag/L1xahsLXycQ/photo.jpg?sz=128", "display_name": "Onyambu", "link": "https://stackoverflow.com/users/8380272/onyambu"}, "edited": false, "score": 2, "creation_date": 1570056820, "post_id": 58210230, "comment_id": 102798064, "body": "do you need the duplicated values or unique values? its kind of confusing"}, {"owner": {"reputation": 11, "user_id": 10703901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/472e7fe4d53190dd8630e5b48d31cfda?s=128&d=identicon&r=PG&f=1", "display_name": "dylanjobson", "link": "https://stackoverflow.com/users/10703901/dylanjobson"}, "reply_to_user": {"reputation": 28698, "user_id": 8380272, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ZL-hcLCA44/AAAAAAAAAAI/AAAAAAAAAag/L1xahsLXycQ/photo.jpg?sz=128", "display_name": "Onyambu", "link": "https://stackoverflow.com/users/8380272/onyambu"}, "edited": false, "score": 0, "creation_date": 1570056907, "post_id": 58210230, "comment_id": 102798087, "body": "I would like to end up with a list of unique values and have the original list contain the remaining duplicate values."}, {"owner": {"reputation": 28698, "user_id": 8380272, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ZL-hcLCA44/AAAAAAAAAAI/AAAAAAAAAag/L1xahsLXycQ/photo.jpg?sz=128", "display_name": "Onyambu", "link": "https://stackoverflow.com/users/8380272/onyambu"}, "edited": false, "score": 1, "creation_date": 1570056972, "post_id": 58210230, "comment_id": 102798099, "body": "can you edit your question to include the results that you want to achieve"}], "answers": [{"tags": [], "owner": {"reputation": 692, "user_id": 8456253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/488d3a9f1863fb3afacbedecd42c25d5?s=128&d=identicon&r=PG&f=1", "display_name": "kuco 23", "link": "https://stackoverflow.com/users/8456253/kuco-23"}, "is_accepted": false, "score": 0, "last_activity_date": 1570057032, "last_edit_date": 1570057032, "creation_date": 1570056539, "answer_id": 58210281, "question_id": 58210230, "link": "https://stackoverflow.com/questions/58210230/python-duplicates-in-list/58210281#58210281", "title": "Python: Duplicates in list", "body": "<p>You are removing values from the list you are iterating through, so your loop is skipping values, try this</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>array = [1,3,4,2,2,3,4]\ndef duplicates(array):\n    mylist = []\n    for i, item in enumerate(array):\n        if item not in mylist:\n            mylist.append(item)\n            array[i] = None\n\n    array[:] = list(filter(\n        lambda x: x is not None,\n        array\n    ))\n\n    return mylist\n</code></pre>\n\n<p>Though you should clarify what you want to do with array variable as it is currently unclear.</p>\n"}, {"tags": [], "owner": {"reputation": 48, "user_id": 11460337, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c17f0e7c922a9198ef121658e6957635?s=128&d=identicon&r=PG&f=1", "display_name": "happysunshinekid", "link": "https://stackoverflow.com/users/11460337/happysunshinekid"}, "is_accepted": false, "score": 0, "last_activity_date": 1570058039, "last_edit_date": 1570058039, "creation_date": 1570057362, "answer_id": 58210373, "question_id": 58210230, "link": "https://stackoverflow.com/questions/58210230/python-duplicates-in-list/58210373#58210373", "title": "Python: Duplicates in list", "body": "<p>You do not need to use a loop, it is much clearer to use a list comprehension</p>\n\n<p><code>dups = list(set([l for l in array if array.count(l) &gt; 1]))</code></p>\n\n<p>However, the answer provided by kuco 23 does this appropriately with a loop. </p>\n"}, {"tags": [], "owner": {"reputation": 16, "user_id": 11487698, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-0mSv_mWMiLM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcIFp8PwgH5-jRE68DGydX-OFqtLg/mo/photo.jpg?sz=128", "display_name": "Pedro Dalcolli", "link": "https://stackoverflow.com/users/11487698/pedro-dalcolli"}, "is_accepted": false, "score": 0, "last_activity_date": 1570057364, "creation_date": 1570057364, "answer_id": 58210374, "question_id": 58210230, "link": "https://stackoverflow.com/questions/58210230/python-duplicates-in-list/58210374#58210374", "title": "Python: Duplicates in list", "body": "<pre><code>array = [1,3,4,2,2,3,4]\ndef duplicates(array):\n    mylist = []\n    for item in array:\n        if item not in mylist:\n            mylist.append(item)\n            array.remove(item)\n        else:\n            array.remove(item)\n    return mylist\n</code></pre>\n\n<p>just remove the item that you don't append</p>\n"}, {"tags": [], "owner": {"reputation": 19440, "user_id": 6275103, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KDDMj.jpg?s=128&g=1", "display_name": "MrGeek", "link": "https://stackoverflow.com/users/6275103/mrgeek"}, "is_accepted": false, "score": 1, "last_activity_date": 1570058217, "creation_date": 1570058217, "answer_id": 58210464, "question_id": 58210230, "link": "https://stackoverflow.com/questions/58210230/python-duplicates-in-list/58210464#58210464", "title": "Python: Duplicates in list", "body": "<p>I think that using <code>collections.Counter</code> is more appropriate for this task:</p>\n\n<pre><code>array = [1, 3, 4, 2, 2, 3, 4]\n\nfrom collections import Counter\n\ndef duplicates(array):\n  return [n for n, c in Counter(array).items() if c &gt; 1]\n\nprint(duplicates(array))\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>[3, 4, 2]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 12152670, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-60I2IQ7W5T0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcU1bFjgVsyRoyN7UuPvnQriy_6qg/photo.jpg?sz=128", "display_name": "Nori Vinay", "link": "https://stackoverflow.com/users/12152670/nori-vinay"}, "is_accepted": false, "score": 1, "last_activity_date": 1570060726, "last_edit_date": 1570060726, "creation_date": 1570058385, "answer_id": 58210487, "question_id": 58210230, "link": "https://stackoverflow.com/questions/58210230/python-duplicates-in-list/58210487#58210487", "title": "Python: Duplicates in list", "body": "<p>The issue is with the <code>array.remove(item)</code>, it is deleting the element at the index position visited. So, index number reduces by one and making the loop to skip reading the next value.</p>\n\n<p><code>[1, 3, 4, 2, 2, 3, 4]</code> -> before 1st iteration index 0 -> value =1</p>\n\n<p><code>[3, 4, 2, 2, 3, 4]</code> -> After 1st iteration 1 is removed, so index 0 -> value =3(loop not reading it as it already read index 0, so loop is reading index 1 -> value 4)</p>\n\n<p>Correct code to display values without duplicates:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>array = [1,3,4,2,2,3,4]\n\ndef duplicates(array):\n    mylist = []\n    for item in array:\n        if item not in mylist:\n            mylist.append(item)\n            #array.remove(item)\n    return mylist\n\nres=duplicates(array)\nprint (res)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 54837, "user_id": 2390182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KKx5r.png?s=128&g=1", "display_name": "schwobaseggl", "link": "https://stackoverflow.com/users/2390182/schwobaseggl"}, "is_accepted": false, "score": 0, "last_activity_date": 1570270833, "creation_date": 1570270833, "answer_id": 58247396, "question_id": 58210230, "link": "https://stackoverflow.com/questions/58210230/python-duplicates-in-list/58247396#58247396", "title": "Python: Duplicates in list", "body": "<p>A bit unclear what result you expect. If you want to get all unique values while maintaining order of occurrence, the canonical way to achieve this would be to use a <code>collections.OrderedDict</code>:</p>\n\n<pre><code>from collections import OrderedDict\n\ndef duplicates(array):\n    return list(OrderedDict.fromkeys(array))\n\n&gt;&gt;&gt; duplicates(array)\n[1, 3, 4, 2]\n</code></pre>\n\n<p>If you want get a list of <em>only</em> duplicates, i.e. values that occur more than once, you could use a <code>collections.Counter</code>:</p>\n\n<pre><code>from collections import Counter\n\ndef duplicates(array):\n    return [k for k, v in Counter(array).items() if v &gt; 1]\n\n&gt;&gt;&gt; duplicates(array)\n[3, 4, 2]\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 10703901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/472e7fe4d53190dd8630e5b48d31cfda?s=128&d=identicon&r=PG&f=1", "display_name": "dylanjobson", "link": "https://stackoverflow.com/users/10703901/dylanjobson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 145, "favorite_count": 0, "answer_count": 6, "score": 0, "last_activity_date": 1570270833, "creation_date": 1570056172, "last_edit_date": 1570072114, "question_id": 58210230, "link": "https://stackoverflow.com/questions/58210230/python-duplicates-in-list", "title": "Python: Duplicates in list", "body": "<p>Im trying to create a new list of unique values and remove said values from the original list so that what's left is duplicates. It appears my for loop is skipping over values. </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>array = [1,3,4,2,2,3,4]\ndef duplicates(array):\n    mylist = []\n    for item in array:\n        if item not in mylist:\n            mylist.append(item)\n            array.remove(item)\n    return mylist\n</code></pre>\n\n<p>results: </p>\n\n<blockquote>\n  <p>duplicates(array)</p>\n</blockquote>\n\n<p>[1, 4, 2]</p>\n"}, {"tags": ["python", "for-loop", "web-scraping", "beautifulsoup"], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 11556627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0c46c06cd1bed98afebc48211149b47?s=128&d=identicon&r=PG&f=1", "display_name": "Pallu08", "link": "https://stackoverflow.com/users/11556627/pallu08"}, "edited": false, "score": 0, "creation_date": 1570057461, "post_id": 58210332, "comment_id": 102798204, "body": "Well clearly I forgot to K.I.S.S. Thanks for the answer. :)"}], "tags": [], "owner": {"reputation": 48, "user_id": 11460337, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c17f0e7c922a9198ef121658e6957635?s=128&d=identicon&r=PG&f=1", "display_name": "happysunshinekid", "link": "https://stackoverflow.com/users/11460337/happysunshinekid"}, "is_accepted": true, "score": 2, "last_activity_date": 1570057070, "creation_date": 1570057070, "answer_id": 58210332, "question_id": 58210223, "link": "https://stackoverflow.com/questions/58210223/how-to-edit-content-within-a-tag-once-its-extracted/58210332#58210332", "title": "How to edit content within a tag once it&#39;s extracted?", "body": "<p>Though this doesn't use beautifulsoup, you can simply</p>\n\n<pre><code>...\nfor prices in price_containers:\n    print(prices.get_text().replace('Free To Play', '$0.00'))\n\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 11556627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0c46c06cd1bed98afebc48211149b47?s=128&d=identicon&r=PG&f=1", "display_name": "Pallu08", "link": "https://stackoverflow.com/users/11556627/pallu08"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 24, "favorite_count": 0, "accepted_answer_id": 58210332, "answer_count": 1, "score": 0, "last_activity_date": 1570057070, "creation_date": 1570056085, "last_edit_date": 1570056239, "question_id": 58210223, "link": "https://stackoverflow.com/questions/58210223/how-to-edit-content-within-a-tag-once-its-extracted", "title": "How to edit content within a tag once it&#39;s extracted?", "body": "<p>I've created a program that extracts game titles and prices of games under the \"New and Trending\" column on <a href=\"https://store.steampowered.com/\" rel=\"nofollow noreferrer\">https://store.steampowered.com/</a>. So far I have it so the titles and prices are printed vertically as separate lists.</p>\n\n<p>The prices print like so:</p>\n\n<pre><code>$11.99\n$9.99\n$23.99\n$34.99\nFree To Play\n$24.99\n$59.99\nFree To Play\n$13.49\n$19.99\n</code></pre>\n\n<p>What I want to do take any price with the string \"Free To Play\" and replace it with the string \"$0.00\" so when  I export to a csv it looks more consistent. I've tried using the <code>replace_with()</code> function through BeautifulSoup, but it didn't work out for me.</p>\n\n<pre><code>from urllib.request import urlopen\nfrom bs4 import BeautifulSoup\n\nmy_url = 'https://store.steampowered.com/'\nuClient = urlopen(my_url)\npage_html = uClient.read()\nuClient.close()\npage_soup = BeautifulSoup(page_html, \"html.parser\")\n\ntitle_containers = page_soup.findAll(\"div\",{\"class\":\"tab_item_name\"}, limit=10)\nprice_containers = page_soup.findAll(\"div\",{\"class\":\"discount_final_price\"}, limit=10)\nfor titles in title_containers:\n    print(titles.get_text())\nfor prices in price_containers:\n    print(prices.get_text())\n</code></pre>\n"}, {"tags": ["python", "pandas", "python-datetime"], "comments": [{"owner": {"reputation": 1435, "user_id": 3866678, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7yZyO.png?s=128&g=1", "display_name": "Michael Gardner", "link": "https://stackoverflow.com/users/3866678/michael-gardner"}, "edited": false, "score": 1, "creation_date": 1570060763, "post_id": 58210182, "comment_id": 102798798, "body": "Try replacing the second line with <code>df_vend[&#39;base_date&#39;]  = pd.to_datetime(datetime.date(2019,1,1))</code>"}, {"owner": {"reputation": 47, "user_id": 12056110, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAZPNRhD-S5P1BjTWca3s24vj8Xd1mvA5gm3c7v=k-s128", "display_name": "Josue Barrantes", "link": "https://stackoverflow.com/users/12056110/josue-barrantes"}, "reply_to_user": {"reputation": 1435, "user_id": 3866678, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7yZyO.png?s=128&g=1", "display_name": "Michael Gardner", "link": "https://stackoverflow.com/users/3866678/michael-gardner"}, "edited": false, "score": 0, "creation_date": 1570105490, "post_id": 58210182, "comment_id": 102813939, "body": "That worked. I had a couple of errors more, the final code is (of course the base date is 1900,1,1 not 2019,1,1:  <code>df_vend[&#39;creation_date&#39;] = np.where(df_vend[&#39;creation_date&#39;] == 0,1,df_vend[&#39;creation_date&#39;]) df_vend[&#39;base_date&#39;] = [pd.to_datetime(datetime.date(1900,1,1))] * len(df_vend.creation_date) df_vend[&#39;creation_date&#39;] = df_vend[&#39;base_date&#39;] + pd.to_timedelta(df_vend[&#39;creation_date&#39;],unit=&#39;days&#39;)</code> Why is it necessary to use datetime.date, when I already used to_datetime?"}, {"owner": {"reputation": 1435, "user_id": 3866678, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7yZyO.png?s=128&g=1", "display_name": "Michael Gardner", "link": "https://stackoverflow.com/users/3866678/michael-gardner"}, "edited": false, "score": 1, "creation_date": 1570111675, "post_id": 58210182, "comment_id": 102817585, "body": "You don&#39;t have to but you also do not need to multiply it by the length of the array as pandas will broadcast it for you. You can remove line 2 completely.  <code>df_vend[&#39;creation_date&#39;] = pd.to_datetime(&#39;1&#47;1&#47;1900&#39;)  + pd.to_timedelta(df_vend[&#39;creation_date&#39;])</code>"}], "owner": {"reputation": 47, "user_id": 12056110, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAZPNRhD-S5P1BjTWca3s24vj8Xd1mvA5gm3c7v=k-s128", "display_name": "Josue Barrantes", "link": "https://stackoverflow.com/users/12056110/josue-barrantes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1570057896, "creation_date": 1570055759, "last_edit_date": 1570057896, "question_id": 58210182, "link": "https://stackoverflow.com/questions/58210182/python-sum-date-days", "title": "python sum date + days", "body": "<p>I have a data frame with a column with number of dates since year 1900. I need to change the format to Y%m%d. For this I created a column datetime.date(1900,1,1) to which try to sum the number of days.</p>\n\n<p>I am receiving this error:</p>\n\n<blockquote>\n  <p>TypeError: unsupported operand type(s) for +: 'numpy.ndarray' and\n  'TimedeltaIndex'</p>\n</blockquote>\n\n<p>This is my code:</p>\n\n<pre><code>df_vend['creation_date'] = np.where(df_vend['creation_date'] == 0,1,df_vend['creation_date'])\ndf_vend['base_date'] = [datetime.date(2019,1,1)] * len(df_vend.creation_date)\ndf_vend['creation_date'] = df_vend['base_date'] + pd.to_timedelta(df_vend['creation_date'])\n</code></pre>\n\n<p>np.where is used to change dates with value 0.</p>\n"}, {"tags": ["python", "sympy", "nan", "exponent", "infinity"], "answers": [{"comments": [{"owner": {"reputation": 5993, "user_id": 1609514, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1e62d27c486199ea834abd203fbb841b?s=128&d=identicon&r=PG", "display_name": "Bill", "link": "https://stackoverflow.com/users/1609514/bill"}, "edited": false, "score": 0, "creation_date": 1570058846, "post_id": 58210345, "comment_id": 102798466, "body": "Excellent, Thanks.  This works for single expressions.  Is there a way to do <code>M.limit(t, oo)</code> where <code>M</code> is a matrix?  (I tried <code>limit(M, t, oo)</code> and got <code>NotImplementedError: Don&#39;t know how to calculate the mrv of &#39;Matrix...</code>)."}, {"owner": {"reputation": 5598, "user_id": 9450991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85d8fa060feb1d11913814710f4ee352?s=128&d=identicon&r=PG&f=1", "display_name": "Oscar Benjamin", "link": "https://stackoverflow.com/users/9450991/oscar-benjamin"}, "reply_to_user": {"reputation": 5993, "user_id": 1609514, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1e62d27c486199ea834abd203fbb841b?s=128&d=identicon&r=PG", "display_name": "Bill", "link": "https://stackoverflow.com/users/1609514/bill"}, "edited": false, "score": 0, "creation_date": 1570100475, "post_id": 58210345, "comment_id": 102811459, "body": "I don&#39;t get that error when using the limit method <code>M.limit(x, oo)</code>"}, {"owner": {"reputation": 5993, "user_id": 1609514, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1e62d27c486199ea834abd203fbb841b?s=128&d=identicon&r=PG", "display_name": "Bill", "link": "https://stackoverflow.com/users/1609514/bill"}, "edited": false, "score": 0, "creation_date": 1570123508, "post_id": 58210345, "comment_id": 102823360, "body": "Strangely, I don&#39;t have the error now myself.  No worries, thanks, this is the correct answer I think."}], "tags": [], "owner": {"reputation": 5598, "user_id": 9450991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85d8fa060feb1d11913814710f4ee352?s=128&d=identicon&r=PG&f=1", "display_name": "Oscar Benjamin", "link": "https://stackoverflow.com/users/9450991/oscar-benjamin"}, "is_accepted": true, "score": 3, "last_activity_date": 1570057162, "creation_date": 1570057162, "answer_id": 58210345, "question_id": 58210158, "link": "https://stackoverflow.com/questions/58210158/sympy-returning-nan-values-when-substituting-infinity-into-expression/58210345#58210345", "title": "Sympy returning NaN values when substituting infinity into expression", "body": "<p>When you have <code>oo*0</code> the result will be NaN. For some expressions like <code>x**2*exp(-x)</code> there can be a well defined limit as x goes to infinity. But if SymPy doesn't know what the expression is then it can't know how to evaluate <code>oo*0</code>. Consider the following (all examples of <code>0*oo</code>):</p>\n\n<pre><code>In [1]: (x*exp(-x)).limit(x, oo)                                                                                                                              \nOut[1]: 0\n\nIn [2]: (x**2*exp(-x)).limit(x, oo)                                                                                                                           \nOut[2]: 0\n\nIn [3]: (factorial(x)*exp(-x)).limit(x, oo)                                                                                                                   \nOut[3]: \u221e\n\nIn [4]: (exp(x)*exp(-x)).limit(x, oo)                                                                                                                         \nOut[4]: 1\n</code></pre>\n\n<p>If you want to calculate a well defined limit then use the <code>limit</code> function/method. Otherwise <code>0*oo</code> is not well defined so it will evaluate to NaN.</p>\n"}], "owner": {"reputation": 5993, "user_id": 1609514, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1e62d27c486199ea834abd203fbb841b?s=128&d=identicon&r=PG", "display_name": "Bill", "link": "https://stackoverflow.com/users/1609514/bill"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 321, "favorite_count": 0, "accepted_answer_id": 58210345, "answer_count": 1, "score": 1, "last_activity_date": 1570058335, "creation_date": 1570055596, "last_edit_date": 1570058335, "question_id": 58210158, "link": "https://stackoverflow.com/questions/58210158/sympy-returning-nan-values-when-substituting-infinity-into-expression", "title": "Sympy returning NaN values when substituting infinity into expression", "body": "<p>I'm trying to use <a href=\"https://docs.sympy.org\" rel=\"nofollow noreferrer\">Sympy</a> to show what happens to terms in a matrix as a variable <code>t</code> tends to infinity.</p>\n\n<p>For example.</p>\n\n<pre><code>from sympy import *\nt = Symbol('t')\nexp(-t).subs({t: oo})\n</code></pre>\n\n<p>returns <code>0</code> which is correct and</p>\n\n<pre><code>exp(t).subs({t: oo})\n</code></pre>\n\n<p>returns <code>oo</code> (infinity) which is also correct.</p>\n\n<p>However, some expressions return <code>nan</code>.  For example:</p>\n\n<pre><code>(t*exp(-t)).subs({t: oo})\n</code></pre>\n\n<p>I'm pretty sure above expression should return <code>0</code>.  (<code>N(100*exp(-100))</code> returns <code>3.72007597602084e-42</code>).</p>\n\n<p>Is this a bug or is it really 'Not a Number'?</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 1598, "user_id": 2970853, "user_type": "registered", "profile_image": "https://graph.facebook.com/507188635/picture?type=large", "display_name": "henrywongkk", "link": "https://stackoverflow.com/users/2970853/henrywongkk"}, "is_accepted": false, "score": 0, "last_activity_date": 1570067669, "creation_date": 1570067669, "answer_id": 58211364, "question_id": 58210149, "link": "https://stackoverflow.com/questions/58210149/interpolate-pandas-frame-using-time-index-from-another-data-frame/58211364#58211364", "title": "interpolate pandas frame using time index from another data frame", "body": "<p>You can <code>append</code> one frame to another and use <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.interpolate.html\" rel=\"nofollow noreferrer\">interpolate()</a>, example:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>df1 = pd.DataFrame(columns=['ds', '1_sensor_id', '1_val_1', '1_val_2'],\n                   data=[[datetime.datetime(2019, 9, 13, 12, 40, 00), 33469, 30, 43],\n                         [datetime.datetime(2019, 9, 13, 12, 45, 00), 33469, 33, 43]])\ndf2 = pd.DataFrame(columns=['ds', '2_sensor_id', '2_val_1', '2_val_2'],\n                   data=[[datetime.datetime(2019, 9, 13, 12, 42, 00), 20006, 6, 50],\n                         [datetime.datetime(2019, 9, 13, 12, 47, 00), 20006, 5, 80]])\ndf = df1.append(df2, sort=False)\ndf.set_index('ds', inplace=True)\ndf.interpolate(method = 'time', limit_direction='backward', inplace=True)\nprint(df)\n                     1_sensor_id  1_val_1  ...  2_val_1  2_val_2\nds                                         ...                  \n2019-09-13 12:40:00      33469.0     30.0  ...      6.0     50.0\n2019-09-13 12:45:00      33469.0     33.0  ...      5.4     68.0\n2019-09-13 12:42:00          NaN      NaN  ...      6.0     50.0\n2019-09-13 12:47:00          NaN      NaN  ...      5.0     80.0\n\n</code></pre>\n"}], "owner": {"reputation": 8130, "user_id": 2713740, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f1f024ede163fdaebe61807ad5c88f1e?s=128&d=identicon&r=PG&f=1", "display_name": "Luca", "link": "https://stackoverflow.com/users/2713740/luca"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 215, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1570067669, "creation_date": 1570055500, "question_id": 58210149, "link": "https://stackoverflow.com/questions/58210149/interpolate-pandas-frame-using-time-index-from-another-data-frame", "title": "interpolate pandas frame using time index from another data frame", "body": "<p>So, I have 2 data frames where the first one has the following structure:</p>\n\n<pre><code>               'ds',             '1_sensor_id',     '1_val_1', '1_val_2'\n0    2019-09-13 12:40:00             33469             30               43   \n1    2019-09-13 12:45:00             33469             43               43\n</code></pre>\n\n<p>The second one has the following structure:</p>\n\n<pre><code>              'ds',                '2_sensor_id', '2_val_1', '2_val_2'\n\n\n0    2019-09-13 12:42:00             20006             6      50\n1    2019-09-13 12:47:00             20006             5      80\n</code></pre>\n\n<p>So what I want to do is merge the two pandas frame through interpolation. So ultimately, the merged frame should have values defined at the time stamps (<code>ds</code>) defined in frame 1 and the <code>2_val_1</code> and <code>2_val_2</code> columns would be interpolated and the merged frame would have a row for each value in <code>ds</code> column in frame 1. What would be the best way to do this in pandas? I tried the <code>merge_asof</code> function but this does nearest neighbourhood interpolation and I did not get all the time stamps back.</p>\n"}, {"tags": ["python", "algorithm", "mesh", "triangulation"], "comments": [{"owner": {"reputation": 5192, "user_id": 2318649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rW1HG.jpg?s=128&g=1", "display_name": "barny", "link": "https://stackoverflow.com/users/2318649/barny"}, "edited": false, "score": 0, "creation_date": 1570055794, "post_id": 58210049, "comment_id": 102797832, "body": "What have you tried to identify the adjacent vertices? Brute force would simply be to search for the nearest six vertices for each vertex (Apart from the pole), wouldn\u2019t it? Have you tried that?"}, {"owner": {"reputation": 280, "user_id": 1937951, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/gMIW3.jpg?s=128&g=1", "display_name": "falidoro", "link": "https://stackoverflow.com/users/1937951/falidoro"}, "reply_to_user": {"reputation": 5192, "user_id": 2318649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rW1HG.jpg?s=128&g=1", "display_name": "barny", "link": "https://stackoverflow.com/users/2318649/barny"}, "edited": false, "score": 0, "creation_date": 1570056502, "post_id": 58210049, "comment_id": 102797994, "body": "Not sure how you would select the vertices that you would calculate the neighbors of in order to avoid overlapping..."}, {"owner": {"reputation": 41485, "user_id": 2521214, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/nd58V.jpg?s=128&g=1", "display_name": "Spektre", "link": "https://stackoverflow.com/users/2521214/spektre"}, "edited": false, "score": 0, "creation_date": 1570087206, "post_id": 58210049, "comment_id": 102804725, "body": "see all answers in here <a href=\"https://stackoverflow.com/a/46787885/2521214\">Mathematically producing sphere-shaped hexagonal grid</a>"}, {"owner": {"reputation": 280, "user_id": 1937951, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/gMIW3.jpg?s=128&g=1", "display_name": "falidoro", "link": "https://stackoverflow.com/users/1937951/falidoro"}, "reply_to_user": {"reputation": 41485, "user_id": 2521214, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/nd58V.jpg?s=128&g=1", "display_name": "Spektre", "link": "https://stackoverflow.com/users/2521214/spektre"}, "edited": false, "score": 0, "creation_date": 1570089093, "post_id": 58210049, "comment_id": 102805593, "body": "@Spektre: I have seen that post, but those are entirely different ways of constructing meshes, while for now I would like to solve the problem using the mesh I have already generated."}, {"owner": {"reputation": 41485, "user_id": 2521214, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/nd58V.jpg?s=128&g=1", "display_name": "Spektre", "link": "https://stackoverflow.com/users/2521214/spektre"}, "edited": false, "score": 0, "creation_date": 1570090296, "post_id": 58210049, "comment_id": 102806101, "body": "@falidoro in such case you should add an MCVE containing your mesh otherwise no one here would be able to help in such way ..."}], "answers": [{"tags": [], "owner": {"reputation": 280, "user_id": 1937951, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/gMIW3.jpg?s=128&g=1", "display_name": "falidoro", "link": "https://stackoverflow.com/users/1937951/falidoro"}, "is_accepted": false, "score": 0, "last_activity_date": 1570056415, "creation_date": 1570056415, "answer_id": 58210261, "question_id": 58210049, "link": "https://stackoverflow.com/questions/58210049/hexagons-from-triangles-on-sphere-constructing-a-hexagonal-geodesic-grid-from-i/58210261#58210261", "title": "Hexagons from triangles on sphere: constructing a hexagonal/geodesic grid from icosahedronal grid (North Pole only)", "body": "<p>I think I may have just thought of an answer, but it would be great if someone could verify whether this would work and to suggest optimal ways of implementation.</p>\n\n<ol>\n<li>Let V0 be a set containing all vertices and E0 be a set containing all edges. Let V1 be an empty set that we will use to store new hexagon-midpoint-vertices for each pass. Let V2 be an empty set that will hold the final collection of hexagon midpoints. Let E1 be a collection of edges that forms the 'front-line' of the identified hexagons and let E2 be an empty set that will hold the final collection of hexagon edges.</li>\n<li>Identify the vertex at the North Pole. Move it from V0 to V1</li>\n<li>Find all edges that are opposite to this vertex. Move these edges to E1. </li>\n<li>From E0, delete edges that are connected to the vertex (later vertices) in V1.</li>\n<li>From V0, delete vertices that are connected by edges in E1.</li>\n<li>Move all vertices in V1 to V2.</li>\n<li>Each of the edges in E1 is part of another triangle, for which it forms the edge opposite to the vertex that is the center of a hexagon. Identify the vertices that are opposite to the edges in E1. Move these to V1. </li>\n<li>Move edges from E1 to E2.</li>\n<li>In E0 all edges opposite to the vertices in V1. Move these to E1.</li>\n<li>From E0, delete edges that are connected to the vertices in V1.</li>\n<li>From V0, delete vertices that are connected by edges in E1.</li>\n<li>Move all vertices in V1 to V2.</li>\n</ol>\n\n<p>etc. etc. etc.</p>\n"}, {"tags": [], "owner": {"reputation": 280, "user_id": 1937951, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/gMIW3.jpg?s=128&g=1", "display_name": "falidoro", "link": "https://stackoverflow.com/users/1937951/falidoro"}, "is_accepted": true, "score": 0, "last_activity_date": 1571997306, "creation_date": 1571997306, "answer_id": 58556222, "question_id": 58210049, "link": "https://stackoverflow.com/questions/58210049/hexagons-from-triangles-on-sphere-constructing-a-hexagonal-geodesic-grid-from-i/58556222#58556222", "title": "Hexagons from triangles on sphere: constructing a hexagonal/geodesic grid from icosahedronal grid (North Pole only)", "body": "<p>Alternatively, it is possible to construct a Voronoi diagram of the triangulation; for example using <code>scipy.spatial.SphericalVoronoi()</code>. The Voronoi diagram of an icosahedral grid yields a geodesic (hexagonal) grid. See for example Wang et al. (2011). </p>\n\n<p>Similarly, instead of using a Voronoi diagram, one could also create a new triangulation using the midpoints of the faces of each triangle, which result in a more regular pattern, but it is less trivial to determine in which hexagon a point resides. </p>\n\n<p>For the Voronoi diagram, this is much easier, as by definition the containing hexagon corresponds to the hexagon generated by the nearest vertex in the original triangulation.</p>\n\n<blockquote>\n  <p>Wang, Ning, and Jin-Luen Lee. \"Geometric properties of the\n  icosahedral-hexagonal grid on the two-sphere.\" SIAM Journal on\n  Scientific Computing 33.5 (2011): 2536-2559.</p>\n</blockquote>\n"}], "owner": {"reputation": 280, "user_id": 1937951, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/gMIW3.jpg?s=128&g=1", "display_name": "falidoro", "link": "https://stackoverflow.com/users/1937951/falidoro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 312, "favorite_count": 0, "accepted_answer_id": 58556222, "answer_count": 2, "score": 0, "last_activity_date": 1571997306, "creation_date": 1570054781, "question_id": 58210049, "link": "https://stackoverflow.com/questions/58210049/hexagons-from-triangles-on-sphere-constructing-a-hexagonal-geodesic-grid-from-i", "title": "Hexagons from triangles on sphere: constructing a hexagonal/geodesic grid from icosahedronal grid (North Pole only)", "body": "<p>I am trying to construct a hexagonal/geodesic grid on a sphere. For my purposes I am only focussing on the North Pole. So far, I have managed to construct a triangular mesh based on the icosahedron, using the <code>stripy</code> package. The <code>stripy</code> package allows me to refine the grid through bisection: each edge is split in half, or equivalently, each triangle is split into 4 smaller triangles.</p>\n\n<p><img src=\"https://i.stack.imgur.com/nSWGJ.jpg\" width=\"310\" />\n<img src=\"https://i.stack.imgur.com/RbEYC.jpg\" width=\"310\" /></p>\n\n<p>I want to create an (almost) hexagonal grid by combining 6 triangles (5 at the pole) as follows:</p>\n\n<p><img src=\"https://i.stack.imgur.com/j1euE.jpg\" width=\"310\"></p>\n\n<p>I have the following information available:</p>\n\n<ul>\n<li>latitude/longitude of all vertices as <code>np.array</code></li>\n<li>triplets of indices of triangle vertices</li>\n</ul>\n\n<p>A constraint is that indices are rather 'random', i.e. they don't increase by going outwards in a spiral or something similar.</p>\n\n<p>An option is to find the midpoints of each hexagon(/pentagon) and to group together all the triangles that have this midpoint as one of their three vertices, but I am not sure how to algorithmically go about this. What would be an efficient way of finding the vertices that mark the midpoints of each hexagon? Could it be related in some way to the coarser version of the mesh (i.e. before bisection)?</p>\n"}, {"tags": ["python", "dataframe"], "answers": [{"tags": [], "owner": {"reputation": 3053, "user_id": 5828160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f1bce66871c9b17ac7d152e59e8f3a7?s=128&d=identicon&r=PG", "display_name": "Rajith Thennakoon", "link": "https://stackoverflow.com/users/5828160/rajith-thennakoon"}, "is_accepted": false, "score": 0, "last_activity_date": 1570065280, "creation_date": 1570065280, "answer_id": 58211175, "question_id": 58210039, "link": "https://stackoverflow.com/questions/58210039/assign-rows-from-one-dataframe-to-another-dataframe-at-a-discretion/58211175#58211175", "title": "Assign rows from one dataframe to another dataframe at a discretion", "body": "<p>This will work,make sure your date columns are converted to datetime before date comparisons</p>\n\n<pre><code>df_Message[\"date init\"] = pd.to_datetime(df_Message[\"date init\"])\ndf_Message['date end'] = pd.to_datetime(df_Message['date end'])\ndf_Sensor[\"TimeStamp\"] = pd.to_datetime(df_Sensor[\"TimeStamp\"])\n\ndf_Sensor_  = df_Sensor.copy()\nfor index, row in df_Message.iterrows():\n    df_Sensor_ = df_Sensor_[~((df_Sensor_[\"TimeStamp\"] &gt; row['date init']) &amp; (df_Sensor_[\"TimeStamp\"] &lt; row['date end'])) ]\n\ndf_Result_Sensor = df_Sensor_\n</code></pre>\n"}], "owner": {"reputation": 340, "user_id": 11788255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a70759c60db20f81d61ef565cd29cd6d?s=128&d=identicon&r=PG&f=1", "display_name": "Jane Borges", "link": "https://stackoverflow.com/users/11788255/jane-borges"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1570065280, "creation_date": 1570054700, "last_edit_date": 1570056575, "question_id": 58210039, "link": "https://stackoverflow.com/questions/58210039/assign-rows-from-one-dataframe-to-another-dataframe-at-a-discretion", "title": "Assign rows from one dataframe to another dataframe at a discretion", "body": "<p>I need to generate df_Result_Sensor automatically.</p>\n\n<p>I would like the dataframe (df_Result_Sensor) to only receive df_Sensor rows where the ['TimeStamp'] Column was not contained in the df_Message ['date init'] and df_Message ['date end'] ranges.</p>\n\n<pre><code>    #In the code example, I wrote a df_Result_Sensor manually, just to illustrate the desired output:\n\n         TimeStamp          Sensor_one   Sensor_two\n    0    2017-05-20 00:00:00    1           1\n    1    2017-04-13 00:00:00    1           1\n    2    2017-09-10 00:00:00    0           1\n\n\n\n    import pandas as pd\n\n    df_Sensor = pd.DataFrame({'TimeStamp' : ['2017-05-25 00:00:00','2017-05-20 00:00:00', '2017-04-13 00:00:00', '2017-08-29 01:15:12', '2017-08-15 02:15:12', '2017-09-10 00:00:00'], 'Sensor_one': [1,1,1,1,1,0], 'Sensor_two': [1,1,1,0,1,1]})\n\n    df_Message = pd.DataFrame({'date init': ['2017-05-22 00:00:00', '2017-08-14 00:00:10'], 'date end': ['2017-05-26 00:00:05', '2017-09-01 02:10:05'],  'Message': ['Cold', 'Cold']})\n</code></pre>\n\n<h1>just to illustrate the desired output:</h1>\n\n<p>df_Result_Sensor = pd.DataFrame({'TimeStamp' : ['2017-05-20 00:00:00', '2017-04-13 00:00:00', '2017-09-10 00:00:00'], 'Sensor_one': [1,1,0], 'Sensor_two': [1,1,1]})</p>\n"}, {"tags": ["python", "regex"], "answers": [{"tags": [], "owner": {"reputation": 5399, "user_id": 3248412, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/3yGCF.jpg?s=128&g=1", "display_name": "vs97", "link": "https://stackoverflow.com/users/3248412/vs97"}, "is_accepted": false, "score": 4, "last_activity_date": 1570060719, "last_edit_date": 1570060719, "creation_date": 1570055595, "answer_id": 58210157, "question_id": 58210030, "link": "https://stackoverflow.com/questions/58210030/getting-phone-numbers-with-periods-using-regex/58210157#58210157", "title": "getting phone numbers with periods using regex", "body": "<p>You were close, just add an optional dot match <code>\\.?</code> when you're looking for <code>-</code> , as well as separate the case when you have <code>( whitespace</code> and a whitespace in front of number:</p>\n\n<pre><code>(?:(?:\\(\\s)|\\(?\\d?)-?\\.?\\d{3}\\s*[)-]?-?\\.?\\s*\\d{3}\\s*-?\\.?\\s*\\d{4}\\)?\n</code></pre>\n\n<p><a href=\"https://regex101.com/r/ejOOWq/4\" rel=\"nofollow noreferrer\">Regex Demo</a></p>\n\n<p>Equivalent, but using OR <code>|</code> and non-matching groups :</p>\n\n<pre><code>(?:(?:\\(\\s)|\\(?\\d?)(?:-|\\.)?\\d{3}\\s*[)-]?(?:-|\\.)?\\s*\\d{3}\\s*(?:-|\\.)?\\s*\\d{4}\\)?\n</code></pre>\n\n<p><a href=\"https://regex101.com/r/ejOOWq/5\" rel=\"nofollow noreferrer\">Regex Demo</a></p>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>['1.210.223.1112',\n '(113)-945-6373',\n '222.212.2333',\n '(111)123-4567',\n '(111)1234567',\n '(111 )123-4567',\n '1-100-533-1710',\n '( 111)123-4567',\n '(111)123-4567',\n '(100) 115-5198',\n '(110)-111-1111',\n '112.222.1112',\n '(222)-222-3337',\n '(120) 305-1314']\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5399, "user_id": 3248412, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/3yGCF.jpg?s=128&g=1", "display_name": "vs97", "link": "https://stackoverflow.com/users/3248412/vs97"}, "edited": false, "score": 2, "creation_date": 1570059454, "post_id": 58210236, "comment_id": 102798570, "body": "@EER Be aware that this answer matches whitespace in front of the number with dots, e.g. &#39; 222.212.2333&#39; and &#39; 112.222.1112&#39;."}], "tags": [], "owner": {"reputation": 28698, "user_id": 8380272, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ZL-hcLCA44/AAAAAAAAAAI/AAAAAAAAAag/L1xahsLXycQ/photo.jpg?sz=128", "display_name": "Onyambu", "link": "https://stackoverflow.com/users/8380272/onyambu"}, "is_accepted": true, "score": 0, "last_activity_date": 1570056512, "last_edit_date": 1570056512, "creation_date": 1570056193, "answer_id": 58210236, "question_id": 58210030, "link": "https://stackoverflow.com/questions/58210030/getting-phone-numbers-with-periods-using-regex/58210236#58210236", "title": "getting phone numbers with periods using regex", "body": "<pre><code>re.findall(r'(?:\\b\\d[.-])?\\(?\\s?\\d{3}[.) -]{0,2}\\d{3}[ .-]?\\d{4}',s)\nOut[31]: \n['1.210.223.1112',\n '(113)-945-6373',\n ' 222.212.2333',\n '(111)123-4567',\n '(111)1234567',\n '(111 )123-4567',\n '1-100-533-1710',\n '( 111)123-4567',\n '(111)123-4567',\n '(100) 115-5198',\n '(110)-111-1111',\n ' 112.222.1112',\n '(222)-222-3337',\n '(120) 305-1314']\n</code></pre>\n"}], "owner": {"reputation": 219, "user_id": 12091186, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9628eeff6baa2688cf61f5405a6787ba?s=128&d=identicon&r=PG&f=1", "display_name": "ChiBay", "link": "https://stackoverflow.com/users/12091186/chibay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 58210236, "answer_count": 2, "score": -1, "last_activity_date": 1570097668, "creation_date": 1570054637, "last_edit_date": 1570097668, "question_id": 58210030, "link": "https://stackoverflow.com/questions/58210030/getting-phone-numbers-with-periods-using-regex", "title": "getting phone numbers with periods using regex", "body": "<pre><code>import re\ns = ' 1.210.223.1112 (113)-945-6373; 222.212.2333 (111)123-4567 (111)1234567 (111 )123-4567 \\n(1-100-533-1710)the  ( 111)123-4567 Z1902022 (111)123-4567 N18-2181 Z1234567 1-22-2001 (100) 115-5198 f: (110)-111-1111 112.222.1112 (222)-222-3337 (120) 305-1314' \n</code></pre>\n\n<p>I have a list of phone numbers and I would like to get all variations present in the string <code>s</code>. From <a href=\"https://stackoverflow.com/questions/58067089/modification-of-selecting-variations-of-phone-numbers-using-regex\">modification of selecting variations of phone numbers using regex</a> I have tried the following</p>\n\n<pre><code>reg = r'\\(?\\s*\\d?\\s*-?\\d{3}\\s*[)-]?-?\\s*\\d{3}\\s*-?\\s*\\d{4}\\)?'\nr1 = re.findall(reg,s)\nr1\n</code></pre>\n\n<p>Which gives me close to what I want </p>\n\n<pre><code>['(113)-945-6373',\n '(111)123-4567',\n '(111)1234567',\n '(111 )123-4567',\n '(1-100-533-1710)',\n '( 111)123-4567',\n '(111)123-4567',\n '(100) 115-5198',\n '(110)-111-1111',\n '(222)-222-3337',\n '(120) 305-1314']\n</code></pre>\n\n<p>However, it is missing <code>1.210.223.1112</code> and <code>222.212.2333</code>. </p>\n\n<p>I have tried modifying <code>reg</code> by adding a <code>.</code> but this doesn't give me what I am looking for </p>\n\n<pre><code>reg = r'\\(?\\s.*\\d?\\s*-?\\d{3}\\s*[)-]?-?\\s*\\d{3}\\s*-?\\s*\\d{4}\\)?'\n</code></pre>\n\n<p>My desired output is as follow which includes <code>1.210.223.1112</code> and <code>222.212.2333</code> </p>\n\n<pre><code>['1.210.223.1112',\n '(113)-945-6373',\n  '222.212.2333',\n '(111)123-4567',\n '(111)1234567',\n '(111 )123-4567',\n '(1-100-533-1710)',\n '( 111)123-4567',\n '(111)123-4567',\n '(100) 115-5198',\n '(110)-111-1111',\n '(222)-222-3337',\n '(120) 305-1314']\n</code></pre>\n\n<p>How do I alter <code>reg</code> to get my desired output?</p>\n"}, {"tags": ["python", "django", "full-text-search"], "answers": [{"tags": [], "owner": {"reputation": 1660, "user_id": 4338498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/54c2cac346df05d7b70cc0a6825c1cba?s=128&d=identicon&r=PG", "display_name": "Greg Kaleka", "link": "https://stackoverflow.com/users/4338498/greg-kaleka"}, "is_accepted": false, "score": 0, "last_activity_date": 1570060745, "last_edit_date": 1570060745, "creation_date": 1570059229, "answer_id": 58210584, "question_id": 58210023, "link": "https://stackoverflow.com/questions/58210023/duplicated-values-after-select-related-field/58210584#58210584", "title": "Duplicated values after select related field", "body": "<p>All you should need to do is add <code>.distinct()</code> to the end of your queryset.</p>\n\n<p>You should review <a href=\"https://docs.djangoproject.com/en/2.2/ref/models/querysets/#distinct\" rel=\"nofollow noreferrer\">the documentation</a>, which has some specific notes on using <code>distinct()</code> in conjunction with <code>order_by()</code>. It shouldn't affect you here, since you're not ordering by a related model field, but something to look out for.</p>\n\n<pre><code>class SearchView(ListView):\n    ...\n\n    def get_queryset(self):\n        search_vector = SearchVector('messages__text')\n        search_query = SearchQuery(self.request.GET.get('query'))\n        topics = Topic.objects.annotate(\n            rank=SearchRank(search_vector, search_query)\n        ).filter(rank__gte=0.0).order_by('-rank')\n\n        return topics.distinct()\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 11786395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O8enD.jpg?s=128&g=1", "display_name": "Codirovshik", "link": "https://stackoverflow.com/users/11786395/codirovshik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1570060808, "creation_date": 1570054585, "last_edit_date": 1570060808, "question_id": 58210023, "link": "https://stackoverflow.com/questions/58210023/duplicated-values-after-select-related-field", "title": "Duplicated values after select related field", "body": "<p>I have a simple forum application:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>\n# models\nclass Topic(models.Model):\n    title = models.CharField(max_length=255)\n\nclass Message(models.Model):\n    text = models.TextField()\n    topic = models.ForeignKey(Topic, related_name='messages')\n\n# views\nclass SearchView(ListView):\n    ...\n\n    def get_queryset(self):\n        search_vector = SearchVector('messages__text')\n        search_query = SearchQuery(self.request.GET.get('query'))\n        topics = Topic.objects.annotate(\n            rank=SearchRank(search_vector, search_query)\n        ).filter(rank__gte=0.0).order_by('-rank')\n        return topics\n\n</code></pre>\n\n<p>I want have full text search in my forum.\nEverything works but in topic query results I got duplicated objects.</p>\n\n<pre><code>&lt;QuerySet [&lt;Topic: 1&gt;, &lt;Topic 1&gt;, &lt;Topic 2&gt;, &lt;Topic 1&gt;, ...]&gt;\n</code></pre>\n\n<p>I think that it happens because of multiple messages in one topic that gives me different rank values.</p>\n\n<p>How can I remove duplicated topics but keep rank ordering?</p>\n"}, {"tags": ["python", "python-3.7"], "answers": [{"tags": [], "owner": {"reputation": 1473, "user_id": 1506086, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MaFbv.png?s=128&g=1", "display_name": "Rob Streeting", "link": "https://stackoverflow.com/users/1506086/rob-streeting"}, "is_accepted": true, "score": 0, "last_activity_date": 1570055309, "creation_date": 1570055309, "answer_id": 58210115, "question_id": 58210000, "link": "https://stackoverflow.com/questions/58210000/attributeerror-in-discord-py/58210115#58210115", "title": "AttributeError in discord.py", "body": "<p>Based on the <a href=\"https://discordpy.readthedocs.io/en/latest/api.html\" rel=\"nofollow noreferrer\">API reference</a>, I would say that your function needs to override <code>on_guild_channel_create()</code> rather than call it as part of another function.</p>\n\n<pre><code>import discord\nimport discord.ext\nclient = discord.Client()\n\n@client.event\nasync def on_guild_channel_create(channel):\n    await print('the channel has been create ')\n    return\n\nclient.run('TOKEN')\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 12044083, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBzjziI3uNWTD0QTszv82ECmdC12UXy2Z30gTGk-w=k-s128", "display_name": "Rakan 3abdullah", "link": "https://stackoverflow.com/users/12044083/rakan-3abdullah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 186, "favorite_count": 0, "accepted_answer_id": 58210115, "answer_count": 1, "score": 1, "last_activity_date": 1570055309, "creation_date": 1570054449, "last_edit_date": 1570054925, "question_id": 58210000, "link": "https://stackoverflow.com/questions/58210000/attributeerror-in-discord-py", "title": "AttributeError in discord.py", "body": "<p>I'm trying to build bot that prints a message when any client creates a channel.\nI'm using discord.py version 1.2.3</p>\n\n<pre><code>import discord\nimport discord.ext\nclient = discord.Client()\n\n@client.event\nasync def channel_create(channel):\n    if discord.on_guild_channel_create():\n       await print('the channel has been create ')\n    return\n\nclient.run('TOKEN')\n</code></pre>\n\n<p>When I run it I get this error :</p>\n\n<blockquote>\n  <p><code>AttributeError: module 'discord' has no attribute 'on_guild_channel_create'</code></p>\n</blockquote>\n\n<p>any suggestion to solve this?</p>\n"}, {"tags": ["python", "selenium", "csrf"], "comments": [{"owner": {"reputation": 1045, "user_id": 1598470, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/q5LGU.jpg?s=128&g=1", "display_name": "sortas", "link": "https://stackoverflow.com/users/1598470/sortas"}, "edited": false, "score": 0, "creation_date": 1570054588, "post_id": 58209990, "comment_id": 102797588, "body": "Provide URL, so we can to look/test. It can be antibot/captcha protected or smth like that."}, {"owner": {"reputation": 855, "user_id": 4744568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/125cdb7d43927756913b920de016f420?s=128&d=identicon&r=PG", "display_name": "pcalkins", "link": "https://stackoverflow.com/users/4744568/pcalkins"}, "edited": false, "score": 0, "creation_date": 1570057348, "post_id": 58209990, "comment_id": 102798180, "body": "it&#39;s possible the cookie isn&#39;t being stored.  What driver and options are you using?  (Show driver initialization...)  The anti-forgery token is tied to a session/cookie."}, {"owner": {"reputation": 83, "user_id": 8075766, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e8175e9249e0c7bd80dd85d5e49964b?s=128&d=identicon&r=PG&f=1", "display_name": "GlennG", "link": "https://stackoverflow.com/users/8075766/glenng"}, "edited": false, "score": 0, "creation_date": 1570060289, "post_id": 58209990, "comment_id": 102798714, "body": "added the url and the additional code"}], "owner": {"reputation": 83, "user_id": 8075766, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e8175e9249e0c7bd80dd85d5e49964b?s=128&d=identicon&r=PG&f=1", "display_name": "GlennG", "link": "https://stackoverflow.com/users/8075766/glenng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 112, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1570060254, "creation_date": 1570054341, "last_edit_date": 1570060254, "question_id": 58209990, "link": "https://stackoverflow.com/questions/58209990/selenium-webdriver-with-python-login-issue-with-requestverificationtoken", "title": "selenium webdriver with python login issue with __RequestVerificationToken", "body": "<p>login form has __RequestVerificationToken and my login python script with selenium doesn't work. I'm not sure what I need to do next. </p>\n\n<p>When I run without the code to click on the Login button, I am able to see that the user and pwd are being filled in. When I run with the click, I see the user and pwd inputs being filled and then cleared, and nothing happens. \nI am also sure that the find_element_by_link_text is locating the \"Login\" text.\nAnd , when I manually type the login and press \"Login\" it works.\nThis script works on other sites</p>\n\n<pre><code>from selenium import webdriver\nimport os\n\noptions = webdriver.ChromeOptions()\n\nchrome_driver_path = \"C:\\webdrivers\\chromedriver.exe\"\nwd = webdriver.Chrome(chrome_driver_path, chrome_options=options)\nmain_page_url = 'https://www.idocmarket.com/Security/Register'\n\ndef login():\n    wd.get(main_page_url)\n    wd.find_element_by_id('Login_Username').send_keys(\"user@someemail.com\")  # login\n    wd.find_element_by_id('Login_Password').send_keys(\"uniquepassword1\")  # password\n    wd.find_element_by_link_text('Login').click()\n\n\nif __name__ == '__main__':\n    # initial login\n    login()\n</code></pre>\n\n<p>I would expect a successful login and be presented with the next page</p>\n"}, {"tags": ["python", "boto3", "amazon-elb"], "answers": [{"comments": [{"owner": {"reputation": 1453, "user_id": 4932791, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/P5G5H.jpg?s=128&g=1", "display_name": "kRazzy R", "link": "https://stackoverflow.com/users/4932791/krazzy-r"}, "edited": false, "score": 0, "creation_date": 1573522884, "post_id": 58246610, "comment_id": 103901035, "body": "<code>pip freeze boto3==1.10.15 botocore==1.13.15 docutils==0.15.2 futures==3.3.0 jmespath==0.9.4 python-dateutil==2.8.0 s3transfer==0.2.1 six==1.13.0 urllib3==1.25.7 </code> I have the latest version of the package installed."}], "tags": [], "owner": {"reputation": 8676, "user_id": 11841571, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-OsVEAhv2qOM/AAAAAAAAAAI/AAAAAAADr5Q/gMKvek1dbZE/photo.jpg?sz=128", "display_name": "Lamanus", "link": "https://stackoverflow.com/users/11841571/lamanus"}, "is_accepted": false, "score": 0, "last_activity_date": 1570263960, "creation_date": 1570263960, "answer_id": 58246610, "question_id": 58209927, "link": "https://stackoverflow.com/questions/58209927/attributeerror-elasticloadbalancingv2-object-has-no-attribute-set-desired-ca/58246610#58246610", "title": "AttributeError: &#39;ElasticLoadBalancingv2&#39; object has no attribute &#39;set_desired_capacity&#39;", "body": "<p>The official document is for the latest version, not your too old version. Upgrade your <code>boto3</code> package to the latest. The most recent version is 1.9.243.</p>\n"}, {"tags": [], "owner": {"reputation": 1453, "user_id": 4932791, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/P5G5H.jpg?s=128&g=1", "display_name": "kRazzy R", "link": "https://stackoverflow.com/users/4932791/krazzy-r"}, "is_accepted": true, "score": 0, "last_activity_date": 1573523893, "creation_date": 1573523893, "answer_id": 58810925, "question_id": 58209927, "link": "https://stackoverflow.com/questions/58209927/attributeerror-elasticloadbalancingv2-object-has-no-attribute-set-desired-ca/58810925#58810925", "title": "AttributeError: &#39;ElasticLoadBalancingv2&#39; object has no attribute &#39;set_desired_capacity&#39;", "body": "<p>The problem turns out to be a silly one.<br>\nboto3 has moved around the various functions.</p>\n\n<p>set_desired_capacity is no longer part of 'elbv2' .<br>\nIt is part of 'autoscaling' <a href=\"https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/autoscaling.html#AutoScaling.Client.set_desired_capacity\" rel=\"nofollow noreferrer\">https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/autoscaling.html#AutoScaling.Client.set_desired_capacity</a></p>\n\n<p>While 'describe_target_health' is still part of the former <a href=\"https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/elbv2.html?highlight=elb#ElasticLoadBalancingv2.Client.describe_target_health\" rel=\"nofollow noreferrer\">https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/elbv2.html?highlight=elb#ElasticLoadBalancingv2.Client.describe_target_health</a>. </p>\n\n<p>Updating </p>\n\n<blockquote>\n  <p>client = boto3.client('elbv2')  </p>\n</blockquote>\n\n<p>to   </p>\n\n<blockquote>\n  <p>client = boto3.client('autoscaling')</p>\n</blockquote>\n\n<p>has solved my problem.</p>\n"}], "owner": {"reputation": 1453, "user_id": 4932791, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/P5G5H.jpg?s=128&g=1", "display_name": "kRazzy R", "link": "https://stackoverflow.com/users/4932791/krazzy-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 1, "accepted_answer_id": 58810925, "answer_count": 2, "score": 1, "last_activity_date": 1573523893, "creation_date": 1570053909, "question_id": 58209927, "link": "https://stackoverflow.com/questions/58209927/attributeerror-elasticloadbalancingv2-object-has-no-attribute-set-desired-ca", "title": "AttributeError: &#39;ElasticLoadBalancingv2&#39; object has no attribute &#39;set_desired_capacity&#39;", "body": "<pre><code>import boto3\nimport json\nimport time\nclient = boto3.client('elbv2')\ndesired_capacity=8\nclient.set_desired_capacity(\n    AutoScalingGroupName='Test-Web',\n    DesiredCapacity=desired_capacity,\n    HonorCooldown=True)\n\n</code></pre>\n\n<p>and \nboto3==1.7.1</p>\n\n<p>When I run this script I get a </p>\n\n<pre><code>  File \"deploy_staging_web.py\", line 6, in &lt;module&gt;\n    client.set_desired_capacity(\n  File \"/usr/local/lib/python2.7/dist-packages/botocore/client.py\", line 601, in __getattr__\n    self.__class__.__name__, item)\nAttributeError: 'ElasticLoadBalancingv2' object has no attribute 'set_desired_capacity'\n\n</code></pre>\n\n<p>I intended to use python to scale aws instances up and down. </p>\n\n<p>I'm not inside any virtual environment at the moment. </p>\n\n<p>why is it being thrown, and how do I get across it?\nIt is even mentioned here  on the official documentation : <a href=\"https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/autoscaling.html#AutoScaling.Client.set_desired_capacity\" rel=\"nofollow noreferrer\">https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/autoscaling.html#AutoScaling.Client.set_desired_capacity</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/bT2LW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bT2LW.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "python-3.x", "performance"], "comments": [{"owner": {"reputation": 1812, "user_id": 11432434, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-lYnbtUu9EOU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf-9ybhwxbzBDHJNyQWMDDx97hP7g/mo/photo.jpg?sz=128", "display_name": "SimonN", "link": "https://stackoverflow.com/users/11432434/simonn"}, "edited": false, "score": 0, "creation_date": 1570054144, "post_id": 58209875, "comment_id": 102797494, "body": "Please can you clarify what the problem is &quot;the time limit is exceeding in the last test case!&quot; doesn&#39;t really make sense."}, {"owner": {"reputation": 17989, "user_id": 365102, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/e3139989e6548e7deac2cd45253d60df?s=128&d=identicon&r=PG", "display_name": "Mateen Ulhaq", "link": "https://stackoverflow.com/users/365102/mateen-ulhaq"}, "reply_to_user": {"reputation": 1812, "user_id": 11432434, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-lYnbtUu9EOU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf-9ybhwxbzBDHJNyQWMDDx97hP7g/mo/photo.jpg?sz=128", "display_name": "SimonN", "link": "https://stackoverflow.com/users/11432434/simonn"}, "edited": false, "score": 0, "creation_date": 1570054303, "post_id": 58209875, "comment_id": 102797530, "body": "@SimonN Probably a codewars / hackerrank problem or similar"}, {"owner": {"reputation": 17989, "user_id": 365102, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/e3139989e6548e7deac2cd45253d60df?s=128&d=identicon&r=PG", "display_name": "Mateen Ulhaq", "link": "https://stackoverflow.com/users/365102/mateen-ulhaq"}, "edited": false, "score": 0, "creation_date": 1570054350, "post_id": 58209875, "comment_id": 102797540, "body": "You can solve this in <code>O(1)</code> time... <b>Hint:</b> the solution is approximately <code>n &#47; ((5-2) &#47; 2)</code>."}, {"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 1, "creation_date": 1570054388, "post_id": 58209875, "comment_id": 102797545, "body": "I&#39;d imagine the proper solution doesn&#39;t involve looping at all."}, {"owner": {"reputation": 17989, "user_id": 365102, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/e3139989e6548e7deac2cd45253d60df?s=128&d=identicon&r=PG", "display_name": "Mateen Ulhaq", "link": "https://stackoverflow.com/users/365102/mateen-ulhaq"}, "edited": false, "score": 1, "creation_date": 1570054396, "post_id": 58209875, "comment_id": 102797548, "body": "This is more of a simple math problem than a programming one. &#175;\\\\_(\u30c4)_/&#175;"}, {"owner": {"reputation": 1, "user_id": 12000711, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAz_D5QHQuNgFyqA7GQcyN83NAsHINP3UFRCqUjIQ=k-s128", "display_name": "Manglu", "link": "https://stackoverflow.com/users/12000711/manglu"}, "reply_to_user": {"reputation": 17989, "user_id": 365102, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/e3139989e6548e7deac2cd45253d60df?s=128&d=identicon&r=PG", "display_name": "Mateen Ulhaq", "link": "https://stackoverflow.com/users/365102/mateen-ulhaq"}, "edited": false, "score": 0, "creation_date": 1570054845, "post_id": 58209875, "comment_id": 102797635, "body": "@MateenUlhaq I tried (((n-5)/2)*2)+1 but it doesn&#39;t work."}, {"owner": {"reputation": 2466, "user_id": 1596750, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AUl9X.jpg?s=128&g=1", "display_name": "Ross Jacobs", "link": "https://stackoverflow.com/users/1596750/ross-jacobs"}, "edited": false, "score": 0, "creation_date": 1570056926, "post_id": 58209875, "comment_id": 102798090, "body": "Can you provide additional explanation as to why you think yours is the correct solution?"}, {"owner": {"reputation": 2466, "user_id": 1596750, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AUl9X.jpg?s=128&g=1", "display_name": "Ross Jacobs", "link": "https://stackoverflow.com/users/1596750/ross-jacobs"}, "edited": false, "score": 0, "creation_date": 1570056956, "post_id": 58209875, "comment_id": 102798096, "body": "With math problems it&#39;s helpful to create a table of the first 5-10 inputs/outputs to try to find a pattern. The algorithm may come easily after you&#39;ve found a pattern as you may be able to remove extraneous information."}], "answers": [{"comments": [{"owner": {"reputation": 23557, "user_id": 12266, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6a2a454191fa75d4114ed05836a0b924?s=128&d=identicon&r=PG", "display_name": "Andrew Jaffe", "link": "https://stackoverflow.com/users/12266/andrew-jaffe"}, "edited": false, "score": 0, "creation_date": 1570055473, "post_id": 58210120, "comment_id": 102797764, "body": "No: if the 5 meter step makes it home, that counts. It&#39;s approximately n/2, but not exactly."}, {"owner": {"reputation": 1, "user_id": 12000711, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAz_D5QHQuNgFyqA7GQcyN83NAsHINP3UFRCqUjIQ=k-s128", "display_name": "Manglu", "link": "https://stackoverflow.com/users/12000711/manglu"}, "edited": false, "score": 0, "creation_date": 1570056349, "post_id": 58210120, "comment_id": 102797963, "body": "No, if that were the case, then for 11 metres, it would take him 11 minutes, and not 7 minutes."}], "tags": [], "owner": {"reputation": 1, "user_id": 12156319, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1823f375b4e76485fcd799e4cee267e7?s=128&d=identicon&r=PG&f=1", "display_name": "Mahaki", "link": "https://stackoverflow.com/users/12156319/mahaki"}, "is_accepted": false, "score": 0, "last_activity_date": 1570055353, "creation_date": 1570055353, "answer_id": 58210120, "question_id": 58209875, "link": "https://stackoverflow.com/questions/58209875/how-do-i-solve-this-step-forward-and-backward-problem/58210120#58210120", "title": "How do I solve this: &quot;Step forward and backward problem&quot;?", "body": "<p>The time taken is simply n/2 * 2\nHe advances 2 meters each \"cycle\" 5 forward 3 back \nSo we see how many \"cycles\" go into n (n / 2m) this will result\nIn the number of \"cycles\" taken to reach his house\nThen we simply multiply by the amount of time taken per cycle (2 minutes)\nto get the total time taken (t = n/2 * 2). </p>\n"}, {"comments": [{"owner": {"reputation": 1812, "user_id": 11432434, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-lYnbtUu9EOU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf-9ybhwxbzBDHJNyQWMDDx97hP7g/mo/photo.jpg?sz=128", "display_name": "SimonN", "link": "https://stackoverflow.com/users/11432434/simonn"}, "edited": false, "score": 0, "creation_date": 1570089862, "post_id": 58210278, "comment_id": 102805911, "body": "Appreciate you&#39;re trying to gently guide the OP to solving the problem themselves but this question has drifted a long way from being on-topic. We&#39;re not doing anything with code, but instead going round the houses to tease out the solution to a very simple maths problem."}], "tags": [], "owner": {"reputation": 17989, "user_id": 365102, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/e3139989e6548e7deac2cd45253d60df?s=128&d=identicon&r=PG", "display_name": "Mateen Ulhaq", "link": "https://stackoverflow.com/users/365102/mateen-ulhaq"}, "is_accepted": false, "score": 0, "last_activity_date": 1570056839, "last_edit_date": 1570056839, "creation_date": 1570056533, "answer_id": 58210278, "question_id": 58209875, "link": "https://stackoverflow.com/questions/58209875/how-do-i-solve-this-step-forward-and-backward-problem/58210278#58210278", "title": "How do I solve this: &quot;Step forward and backward problem&quot;?", "body": "<p>Try reducing the problem. Let <code>time_taken(dist)</code> be the function that tells us how long it takes to get home. Then the following hold:</p>\n\n<pre><code>time_taken(1)  ==  1\ntime_taken(2)  ==  1\ntime_taken(3)  ==  1\ntime_taken(4)  ==  1\ntime_taken(5)  ==  1\n\ntime_taken(6)  ==  1 * 2 + time_taken(4)    (since 5-3 = 2)\n               ==  1 * 2 + 1\n\ntime_taken(7)  ==  1 * 2 + time_taken(5)\n               ==  1 * 2 + 1\n\ntime_taken(11) ==  1 * 2 + time_taken(9)\n               ==  2 * 2 + time_taken(7)\n               ==  3 * 2 + time_taken(5)\n               ==  3 * 2 + 1\n\ntime_taken(26) ==  1 * 2 + time_taken(24)\n               ==  2 * 2 + time_taken(22)\n               ==  ...\n               ==  11 * 2 + time_taken(4)\n               ==  11 * 2 + 1\n\nif n &gt; 5:\ntime_taken(n)  ==  1 * 2 + time_taken(n - 2)\n               ==  2 * 2 + time_taken(n - 4)\n               ==  ...\n               ==  (formula here) * 2 + time_taken(4 or 5)\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 12000711, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAz_D5QHQuNgFyqA7GQcyN83NAsHINP3UFRCqUjIQ=k-s128", "display_name": "Manglu", "link": "https://stackoverflow.com/users/12000711/manglu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 125, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1570056839, "creation_date": 1570053473, "last_edit_date": 1570056109, "question_id": 58209875, "link": "https://stackoverflow.com/questions/58209875/how-do-i-solve-this-step-forward-and-backward-problem", "title": "How do I solve this: &quot;Step forward and backward problem&quot;?", "body": "<h2>The Problem Statement:</h2>\n\n<p>Sanjay is addicted to alcohol. Every night he drinks 4 bottles of vodka. He is going to his home. At first, he takes a step forward (which is 5m) but beacuse he is drunk, after his each step in forward direction, his body gets imbalanced and he takes a step backward (which is 3m).</p>\n\n<p>Each step takes 1 min to complete. The distance from the bar to home is n metres. Calculate the time taken by him to reach his home.</p>\n\n<h2>Input Format:</h2>\n\n<p>single line containing one integer n.</p>\n\n<h2>Constraints:</h2>\n\n<pre><code>0 &lt;= n &lt; 10^18\n</code></pre>\n\n<h2>Output Format</h2>\n\n<p>single integer describing the time taken by him to reach home.</p>\n\n<pre><code>from math import *\nn = int(input())\nx = 0\nm = 0\nn = n % 1000000007\nn = n % 1000000007\nwhile  x &lt; n:\n    x += 5\n    m += 1\n    if x &gt;= n:\n        break\n    x -= 3\n    m += 1\nprint(m)\n</code></pre>\n\n<p>But the time limit is exceeding in the last test case i.e. for n = 10^18 like numbers</p>\n\n<blockquote>\n  <p>Sample Input 0</p>\n  \n  <p>11</p>\n  \n  <p>Sample Output 0</p>\n  \n  <p>7</p>\n</blockquote>\n"}, {"tags": ["python", "matplotlib"], "answers": [{"tags": [], "owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "is_accepted": false, "score": 2, "last_activity_date": 1570056127, "creation_date": 1570056127, "answer_id": 58210227, "question_id": 58209854, "link": "https://stackoverflow.com/questions/58209854/how-to-plot-data-in-background-of-multiple-subplots-in-matplotlib/58210227#58210227", "title": "How to plot data in background of multiple subplots in matplotlib", "body": "<p>I guess the idea would be to first create two subplots one below the other and reduce the spacing in between to 0. Then create a new subplot covering the complete area and make the background transparent. Also put the ticks and labels of the third axes to the right. Then plot to each of the three axes.</p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\n\nx = np.linspace(-1, 1, 100)\ny = x\ny2 = x**2\ny3 = x**3\n\nfig, (ax1, ax2) = plt.subplots(nrows=2, sharex=True)\nfig.subplots_adjust(hspace=0.0)\n\n\nax3 = fig.add_subplot(111, sharex=ax1, label=\"right axes\")\n\nl1, = ax1.plot(x, y, color=\"C0\")\nl2, = ax2.plot(x, y3, color=\"C2\")\nl3, = ax3.plot(x, y2, color=\"C3\")\n\nax1.tick_params(axis=\"y\", colors=l1.get_color())\nax2.tick_params(axis=\"y\", colors=l2.get_color())\nax3.set_facecolor(\"none\")\nax3.tick_params(labelbottom=False, bottom=False, labelleft=False, left=False,\n                right=True, labelright=True, colors=l3.get_color())\n\nplt.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/gaR8u.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gaR8u.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 71, "user_id": 6308448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/379cab24107afc6b90f4316b93c5ea80?s=128&d=identicon&r=PG", "display_name": "lwang94", "link": "https://stackoverflow.com/users/6308448/lwang94"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1570056127, "creation_date": 1570053320, "question_id": 58209854, "link": "https://stackoverflow.com/questions/58209854/how-to-plot-data-in-background-of-multiple-subplots-in-matplotlib", "title": "How to plot data in background of multiple subplots in matplotlib", "body": "<p>I am trying to create a figure consisting of multiple subplots stacked on top of each other. However, I also want a single plot that runs through all the stacked subplots and shows up \"behind\" them. I'm not concerned about the actual y-values so it's fine that the y-axis is unreadable in this case. Below is what I have so far:</p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\n\nx = np.linspace(-1, 1, 100)\ny = x\ny2 = x**2\ny3 = x**3\n\nfig = plt.figure()\nax1 = fig.add_axes([0.1, 0.1, 0.8, 0.4])\nax2 = fig.add_axes([0.1, 0.5, 0.8, 0.4])\nax3 = ax1.twinx()\nax4 = ax2.twinx()\n\n\nax1.plot(x, y)\nax2.plot(x, y3)\nax3.plot(x, y2)\nax4.plot(x, y2)\n</code></pre>\n\n<p>Essentially, I want ax3 and ax4 to combine into one large plot that shows a single quadratic function while having a cubic function stacked on top of a linear function in the same figure. Ideally, I'll have three actually separate axes since I'll want to be customizing and performing actions to one subplot without affecting the other two in the future.<a href=\"https://i.stack.imgur.com/kBYSN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kBYSN.png\" alt=\"enter image description here\"></a></p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "python-3.x", "kivy", "kivy-language"], "answers": [{"comments": [{"owner": {"reputation": 96, "user_id": 11586490, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Rq3aPmSNmgs/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfZaHWe_Gve9bjx4am-ZfjfgTNFHw/mo/photo.jpg?sz=128", "display_name": "Callum", "link": "https://stackoverflow.com/users/11586490/callum"}, "edited": false, "score": 0, "creation_date": 1570084066, "post_id": 58210612, "comment_id": 102803393, "body": "Thanks, this worked perfectly. I&#39;ve got multiple RoundedButtons on the same screen that I&#39;d like exactly the same effect for. Do I need to give the Id:butt to the Button they inherit from (RoundedButton@Button) rather than the indivudal button I&#39;ve done above? I could just test this out but won&#39;t be at my computer for a couple of days now and eager to know"}, {"owner": {"reputation": 131, "user_id": 4067931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5fc70a7b409e453a624b7817535289b?s=128&d=identicon&r=PG&f=1", "display_name": "Andrei Sima", "link": "https://stackoverflow.com/users/4067931/andrei-sima"}, "edited": false, "score": 1, "creation_date": 1570089270, "post_id": 58210612, "comment_id": 102805659, "body": "@John Anderson The comparison is not working because color in Kivy Language is a ListProperty . And in here <code>if self.back_color == (0.2,0.6,1,1)</code> you check if a list == tuple that will always return false. Also on your assignment you should also use a list not a tuple. It is working, but can cause problems latter."}, {"owner": {"reputation": 20381, "user_id": 7254633, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XCPaMN6qzA0/AAAAAAAAAAI/AAAAAAAAADs/o9igiVGFyK0/photo.jpg?sz=128", "display_name": "John Anderson", "link": "https://stackoverflow.com/users/7254633/john-anderson"}, "edited": false, "score": 0, "creation_date": 1570111369, "post_id": 58210612, "comment_id": 102817420, "body": "You cannot put the <code>id</code> in the <code>&lt;RoundedButton@Button&gt;</code>, any <code>id</code> is added to a dictionary in the root of the rule, and in this case the <code>RoundedButton</code> is the root of that rule. Also, you can only have one object with a specific <code>id</code>. If you want this effect for several <code>Buttons</code> (that change color independently), then you should define your own subclass of <code>RoundedButton</code> that has a <code>back_color</code> property, and a <code>change_color()</code> method. Then your <code>on_press</code> would be more like <code>on_press: self.change_color()</code>. And some appropriate changes to <code>change_color()</code>."}, {"owner": {"reputation": 20381, "user_id": 7254633, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XCPaMN6qzA0/AAAAAAAAAAI/AAAAAAAAADs/o9igiVGFyK0/photo.jpg?sz=128", "display_name": "John Anderson", "link": "https://stackoverflow.com/users/7254633/john-anderson"}, "edited": false, "score": 0, "creation_date": 1570118140, "post_id": 58210612, "comment_id": 102821059, "body": "I have added to my original answer to demonstrate my above comment."}, {"owner": {"reputation": 96, "user_id": 11586490, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Rq3aPmSNmgs/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfZaHWe_Gve9bjx4am-ZfjfgTNFHw/mo/photo.jpg?sz=128", "display_name": "Callum", "link": "https://stackoverflow.com/users/11586490/callum"}, "edited": false, "score": 0, "creation_date": 1570129012, "post_id": 58210612, "comment_id": 102825712, "body": "Thanks for the help both of you, I understand it now and can see how I can set an on press event that links to my python logic and apply it to all instances of that button/widget."}], "tags": [], "owner": {"reputation": 20381, "user_id": 7254633, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XCPaMN6qzA0/AAAAAAAAAAI/AAAAAAAAADs/o9igiVGFyK0/photo.jpg?sz=128", "display_name": "John Anderson", "link": "https://stackoverflow.com/users/7254633/john-anderson"}, "is_accepted": true, "score": 0, "last_activity_date": 1570118088, "last_edit_date": 1570118088, "creation_date": 1570059478, "answer_id": 58210612, "question_id": 58209826, "link": "https://stackoverflow.com/questions/58209826/changing-button-colour-everytime-button-is-pressed-kivy/58210612#58210612", "title": "Changing button colour everytime button is pressed kivy", "body": "<p>A couple problems.</p>\n\n<p>First, your <code>change_color()</code> method is trying to change the <code>back_color</code> in your <code>Type</code> instance, but your <code>RoundedButton</code> rule is referencing the <code>back_color</code> in your <code>RoundedButton</code> instance (not the one in the <code>Type</code>). So any changes that the method makes, will not affect the <code>RoundedButton</code>.</p>\n\n<p>Second, the <code>if</code> statement:</p>\n\n<pre><code>if self.back_color == (0.2,0.6,1,1):\n</code></pre>\n\n<p>will never be True. Partly because of the first problem, but also the comparison needs to be:</p>\n\n<pre><code>if self.back_color == [0.2,0.6,1,1]:\n</code></pre>\n\n<p>I'm not sure why that is.</p>\n\n<p>I think the asiest way to fix the first problem is to add an <code>id</code> to the <code>RoundedButton</code>:</p>\n\n<pre><code>&lt;Type&gt;:\n    name: \"type\"\n    RoundedButton:\n        id: butt\n        size_hint: 0.417, 0.15625\n        pos_hint: {\"x\": 0.0556, \"y\": 0.15}\n        on_press: root.change_color()\n</code></pre>\n\n<p>Then modify the <code>change_color()</code> method to:</p>\n\n<pre><code>class Type(Screen):\n    def change_color(self):\n        if self.ids.butt.back_color == [0.2,0.6,1,1]:\n            self.ids.butt.back_color = (0, 1, 0, 1)\n        else:\n            self.ids.butt.back_color = (0.2,0.6,1,1)\n</code></pre>\n\n<p>Note that the <code>back_color</code> <code>ObjectProperty</code> is not needed.</p>\n\n<p>If you want the <code>RoundedButtons</code> to be independently changing color, you can define your <code>RoundedButton</code> as:</p>\n\n<pre><code>class RoundedButton(Button):\n    back_color = ListProperty()\n\n    def change_color(self):\n        if self.back_color == [0.2,0.6,1,1]:\n            self.back_color = [0, 1, 0, 1]\n        else:\n            self.back_color = [0.2,0.6,1,1]\n</code></pre>\n\n<p>And in your <code>kv</code> file:</p>\n\n<pre><code>&lt;Type&gt;:\n    name: \"type\"\n    RoundedButton:\n        size_hint: 0.417, 0.15625\n        pos_hint: {\"x\": 0.0556, \"y\": 0.15}\n        Image:\n            source: 'Job.PNG'\n            size: self.parent.width, .85 * self.parent.height\n            pos: self.parent.x, self.parent.y + 5\n            stretch: True\n            keep_ratio: False\n    RoundedButton:\n        size_hint: 0.417, 0.15625\n        pos_hint: {\"right\": 1, \"top\": 1}\n        Image:\n            source: 'Job.PNG'\n            size: self.parent.width, .85 * self.parent.height\n            pos: self.parent.x, self.parent.y + 5\n            stretch: True\n            keep_ratio: False\n\n&lt;RoundedButton&gt;:\n    background_normal: \"\"\n    background_color: 0, 0, 0, 0\n    back_color: 0.2,0.6,1,1\n    border_radius: 10\n    color: self.back_color\n    bold: True\n    on_press: self.change_color()\n    canvas.before:\n        Color:\n            rgba: self.back_color\n        Line:\n            rounded_rectangle: self.x, self.y, self.width, self.height, self.border_radius\n</code></pre>\n"}], "owner": {"reputation": 96, "user_id": 11586490, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Rq3aPmSNmgs/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfZaHWe_Gve9bjx4am-ZfjfgTNFHw/mo/photo.jpg?sz=128", "display_name": "Callum", "link": "https://stackoverflow.com/users/11586490/callum"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "accepted_answer_id": 58210612, "answer_count": 1, "score": -1, "last_activity_date": 1570118088, "creation_date": 1570053100, "question_id": 58209826, "link": "https://stackoverflow.com/questions/58209826/changing-button-colour-everytime-button-is-pressed-kivy", "title": "Changing button colour everytime button is pressed kivy", "body": "<p>I would like my button to turn from blue to green when it is pressed. I would then like it to turn from green back to blue if it is pressed again. I know how to change the colour of a button when pressed but I don't know how to change that colour back to the original colour if the button is pressed again.</p>\n\n<p>kv file: </p>\n\n<pre><code>&lt;Type&gt;:\n    name: \"type\"\n        RoundedButton:\n            size_hint: 0.417, 0.15625\n            pos_hint: {\"x\": 0.0556, \"y\": 0.15}\n            on_press: root.change_color()\n            Image:\n                source: 'Job.PNG'\n                size: self.parent.width, .85 * self.parent.height\n                pos: self.parent.x, self.parent.y + 5\n                stretch: True\n                keep_ratio: False\n\n&lt;RoundedButton@Button&gt;:\n    background_normal: \"\"\n    background_color: 0, 0, 0, 0\n    back_color: 0.2,0.6,1,1\n    border_radius: 10\n    color: self.back_color\n    bold: True\n    canvas.before:\n        Color:\n            rgba: self.back_color\n        Line:\n            rounded_rectangle: self.x, self.y, self.width, self.height, self.border_radius\n            width: \n\n</code></pre>\n\n<p>python file:</p>\n\n<pre><code>class Type(Screen):\n    back_color = ObjectProperty()\n    def change_color(self):\n        if self.back_color == (0.2,0.6,1,1):\n            self.back_color = (0, 1, 0, 1)\n        else:\n            self.back_color = (0.2,0.6,1,1)\n</code></pre>\n\n<p>I thought the logic I had in the py file would check if the colour is blue (0.2,0.6,1,1), i.e not pressed, it would turn green and if it wasn't blue (so must be green, it would turn blue. However when I press the button nothing happens, there's no error, it just doesn't turn green.</p>\n"}, {"tags": ["python", "numpy", "google-cloud-platform", "google-cloud-dataflow", "apache-beam"], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 12156216, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2720d74540725eb578fa102d18ff4ff?s=128&d=identicon&r=PG&f=1", "display_name": "davidl11223344", "link": "https://stackoverflow.com/users/12156216/davidl11223344"}, "edited": false, "score": 0, "creation_date": 1570114818, "post_id": 58210256, "comment_id": 102819296, "body": "I don&#39;t believe this is the case as my setup.py requires numpy as a required package.   I was able to get the pipeline running in Dataflow, but I am not sure what exactly fixed it as I made 2 changes.  1. I started running the pipeline as a script by using the <code>-m</code> flag. Instead of running <code>python pipeline.py</code>, I now do <code>python -m pipeline.py</code>.  2. I moved all of my transforms to their own files. Instead of having a really long pipeline.py with 5+ transform classes, each one has its own file and I simply import them into pipeline.py now."}, {"owner": {"reputation": 43265, "user_id": 8016720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bXsod.png?s=128&g=1", "display_name": "John Hanley", "link": "https://stackoverflow.com/users/8016720/john-hanley"}, "reply_to_user": {"reputation": 31, "user_id": 12156216, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2720d74540725eb578fa102d18ff4ff?s=128&d=identicon&r=PG&f=1", "display_name": "davidl11223344", "link": "https://stackoverflow.com/users/12156216/davidl11223344"}, "edited": false, "score": 0, "creation_date": 1570115117, "post_id": 58210256, "comment_id": 102819464, "body": "@davidl11223344 You should use <code>requirements.txt</code> or the <code>--setup_file</code> command line option (use one or the other)."}], "tags": [], "owner": {"reputation": 43265, "user_id": 8016720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bXsod.png?s=128&g=1", "display_name": "John Hanley", "link": "https://stackoverflow.com/users/8016720/john-hanley"}, "is_accepted": false, "score": 0, "last_activity_date": 1570056375, "creation_date": 1570056375, "answer_id": 58210256, "question_id": 58209797, "link": "https://stackoverflow.com/questions/58209797/how-do-i-import-numpy-into-an-apache-beam-pipeline-running-on-gcp-dataflow/58210256#58210256", "title": "How do I import numpy into an Apache Beam pipeline, running on GCP Dataflow?", "body": "<p>When you launch an Apache Beam DirectRunner python program from your desktop, the program is running on your desktop. You have already installed the numpy library locally. However, you have not informed Dataflow to download and install numpy. That is why your program runs as DirectRunner but fails as DataflowRunner.</p>\n\n<p>Edit/Create a normal Python requirements.txt file and include all dependencies such as numpy. I prefer to use virtualdev, import required packages, make sure that my program runs under DirectRunner and then run <code>pip freeze</code> to create my package list for requirements.txt. Now Dataflow will know what packages to import so that your program runs on the Dataflow cluster.</p>\n"}], "owner": {"reputation": 31, "user_id": 12156216, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2720d74540725eb578fa102d18ff4ff?s=128&d=identicon&r=PG&f=1", "display_name": "davidl11223344", "link": "https://stackoverflow.com/users/12156216/davidl11223344"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 576, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1570056375, "creation_date": 1570052960, "last_edit_date": 1570053726, "question_id": 58209797, "link": "https://stackoverflow.com/questions/58209797/how-do-i-import-numpy-into-an-apache-beam-pipeline-running-on-gcp-dataflow", "title": "How do I import numpy into an Apache Beam pipeline, running on GCP Dataflow?", "body": "<p>I am attempting to write an Apache Beam pipeline using Python (3.7). I am running into issues importing <a href=\"https://pypi.org/project/numpy/\" rel=\"nofollow noreferrer\">numpy</a>, specifically, attempting to use numpy in a DoFn transformation class I wrote.</p>\n\n<p>When running in GCP DataFlow, I am getting the following error \"NameError: name 'numpy' is not defined\"</p>\n\n<p>To start, everything works how one would expect when using the DirectRunner. The issue is solely when using the DataFlow runner by GCP.</p>\n\n<p>I believe the problem is related to how scope works in GCP DataFlow, and not the import itself. For example, I can successfully get the import to work if I add it to the \"process\" method inside my class, but am unsuccessful when I add the import at the top of the file.</p>\n\n<p>I tried both using a requirements file, and a setup.py file as command options for the pipeline, but nothing changed. Again, I don't believe the problem is bringing in numpy, but more to do with DataFlow having unexpected scoping of class/functions.</p>\n\n<p>setup.py file</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from __future__ import absolute_import\nfrom __future__ import print_function\nimport setuptools\n\nREQUIRED_PACKAGES = [\n    'numpy',\n    'Cython',\n    'scipy',\n    'google-cloud-bigtable'\n]\n\nsetuptools.setup(\n    name='my-pipeline',\n    version='0.0.1',\n    install_requires=REQUIRED_PACKAGES,\n    packages=setuptools.find_packages(),\n)\n</code></pre>\n\n<p>Overall, I am running into many issues with \"scope\" that I am hoping someone can help with as the Apache Beam documentation really doesn't cover this to well.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from __future__ import absolute_import\nfrom __future__ import division\n\nimport apache_beam as beam\nimport numpy\n\nclass Preprocess(beam.DoFn):\n\n    def process(self, element, *args, **kwargs):\n        # Demonstrating how I want to call numpy in the process function\n        if numpy.isnan(numpy.sum(element['signal'])):\n            return [MyOject(element['signal'])]\n\ndef run(argv=None):\n    parser = argparse.ArgumentParser()\n    args, pipeline_args = parser.parse_known_args(argv)\n    options = PipelineOptions(pipeline_args)\n\n    p = beam.Pipeline(options=options)\n    messages = (p | beam.io.ReadFromPubSub(subscription=args.input_subscription).with_output_types(bytes))\n    lines = messages | 'Decode' &gt;&gt; beam.Map(lambda x: x.decode('utf-8'))\n    json_messages = lines | \"Jsonify\" &gt;&gt; beam.Map(lambda x: json.loads(x))\n\n    preprocess_messages = json_messages | \"Preprocess\" &gt;&gt; beam.ParDo(Preprocess())\n    result = p.run()\n    result.wait_until_finish()\n\nif __name__ == '__main__':\n    logging.getLogger().setLevel(logging.INFO)\n    run()\n</code></pre>\n\n<p>I expect the pipeline to work similarly to how it does when running locally with the DirectRunner, but instead the scoping/importing works different and is causing my pipeline to crash.</p>\n"}, {"tags": ["python", "pip", "jupyter-notebook", "anaconda", "rpy2"], "comments": [{"owner": {"reputation": 24570, "user_id": 2272172, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/40d9cf17504d06006a0154ef0b332457?s=128&d=identicon&r=PG&f=1", "display_name": "cel", "link": "https://stackoverflow.com/users/2272172/cel"}, "edited": false, "score": 1, "creation_date": 1570098025, "post_id": 58209765, "comment_id": 102810202, "body": "there is an rpy2 package in conda-forge: <code>conda install -c conda-forge rpy2</code>. But be aware that conda also ships R, so you may have to reinstall R packages."}], "owner": {"reputation": 11, "user_id": 12156119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4a5bcc7e4525ba469a56fffd4a7c4bf?s=128&d=identicon&r=PG&f=1", "display_name": "swapil", "link": "https://stackoverflow.com/users/12156119/swapil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1622, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1570052729, "creation_date": 1570052729, "question_id": 58209765, "link": "https://stackoverflow.com/questions/58209765/how-to-install-rpy2-with-anaconda-installation-of-python-3-to-run-r-and-python-i", "title": "how to install rpy2 with anaconda installation of python 3 to run R and Python in same jupyter notebook?", "body": "<p>I am trying to install rpy2 in anaconda installation of python using the command  </p>\n\n<p><code>pip install rpy2</code></p>\n\n<p>and I am getting an error as below</p>\n\n<p>Collecting rpy2\n  Using cached <a href=\"https://files.pythonhosted.org/packages/7e/e0/7da849bb6cf47466ceb28a75f930e61c311878882c275dfb4bbb4fdcc3cb/rpy2-3.2.0.tar.gz\" rel=\"nofollow noreferrer\">https://files.pythonhosted.org/packages/7e/e0/7da849bb6cf47466ceb28a75f930e61c311878882c275dfb4bbb4fdcc3cb/rpy2-3.2.0.tar.gz</a></p>\n\n<p>ERROR: Complete output from command python setup.py egg_info:\nERROR: Traceback (most recent call last):\n.\n.\n.\nERROR: Command \"python setup.py egg_info\" failed with error code 1 </p>\n\n<p>anaconda version -- anaconda Command line client (version 1.7.2)\njupyter notebook version -- 6.0.0\npython version --3.7.3</p>\n\n<p>Is there another easy way to get rpy2 installed without having to reinstall anaconda or modify other packages ??</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["python", "numpy", "time-series"], "comments": [{"owner": {"reputation": 10593, "user_id": 4621513, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/uCfJK.png?s=128&g=1", "display_name": "mkrieger1", "link": "https://stackoverflow.com/users/4621513/mkrieger1"}, "edited": false, "score": 0, "creation_date": 1570056126, "post_id": 58209754, "comment_id": 102797920, "body": "What exactly did you pass as arguments to <code>numpy.correlate</code>? Did you read and understand <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.correlate.html\" rel=\"nofollow noreferrer\">docs.scipy.org/doc/numpy/reference/generated/&hellip;</a>?"}], "answers": [{"tags": [], "owner": {"reputation": 43, "user_id": 10498848, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-y5qzw2BCX88/AAAAAAAAAAI/AAAAAAAAAC4/8pLMU-COomY/photo.jpg?sz=128", "display_name": "Rafael Lainez", "link": "https://stackoverflow.com/users/10498848/rafael-lainez"}, "is_accepted": false, "score": 1, "last_activity_date": 1570112364, "last_edit_date": 1570112364, "creation_date": 1570060527, "answer_id": 58210725, "question_id": 58209754, "link": "https://stackoverflow.com/questions/58209754/dont-understand-result-of-numpy-correlate-on-time-series/58210725#58210725", "title": "Don&#39;t understand result of numpy.correlate on time-series", "body": "<p>Please read the documentation of <code>np.correlate</code>. From what I can tell, it seems you have passed <code>mode='same'</code>. Maximum correlation will be at  <code>len(data)/2</code>. </p>\n\n<p>Quick example:</p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\n\nstocks = np.abs(np.random.normal(0, 100, size=252))\nstockscor = np.correlate(stocks, stocks, mode='same')\n\nplt.plot(stockscor)\nplt.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/WAqWb.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/WAqWb.png\" alt=\"example output\"></a></p>\n"}], "owner": {"reputation": 539, "user_id": 2417922, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5cee40c36bc502473b0976b339a8b8da?s=128&d=identicon&r=PG", "display_name": "Mark Lavin", "link": "https://stackoverflow.com/users/2417922/mark-lavin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1570112364, "creation_date": 1570052699, "last_edit_date": 1570061979, "question_id": 58209754, "link": "https://stackoverflow.com/questions/58209754/dont-understand-result-of-numpy-correlate-on-time-series", "title": "Don&#39;t understand result of numpy.correlate on time-series", "body": "<p>I'm trying to model a time-series that maps DateTime into stock price.  Here is the time-series (gaps correspond to NaN prices):\n<a href=\"https://i.stack.imgur.com/YIR5M.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/YIR5M.png\" alt=\"enter image description here\"></a></p>\n\n<p>There are 126 DateTime:Price points.  I then tried applying <code>numpy.correlate</code> but the results I get are puzzling:</p>\n\n<p><a href=\"https://i.stack.imgur.com/WLtfH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/WLtfH.png\" alt=\"enter image description here\"></a></p>\n\n<p>Puzzling:</p>\n\n<ol>\n<li>The values are very large (1E17-1E19); I thought they should be in the range [ -1, 1 ].</li>\n<li>I understand the peak at 126 (the length of the data), but shouldn't there be one at 0 and at 252?</li>\n</ol>\n"}, {"tags": ["python", "pandas", "numpy", "binary", "point-clouds"], "comments": [{"owner": {"reputation": 4256, "user_id": 214178, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8213626e4c66700c3e7354a70b3ac5e1?s=128&d=identicon&r=PG", "display_name": "artdanil", "link": "https://stackoverflow.com/users/214178/artdanil"}, "edited": false, "score": 0, "creation_date": 1570053912, "post_id": 58209726, "comment_id": 102797442, "body": "How is it using list as an index? Is <code>pc</code> some custom type that does undercover manipulation with index values?"}, {"owner": {"reputation": 1479, "user_id": 1414831, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/63346ad40db38cf3a54e84403099e91e?s=128&d=identicon&r=PG", "display_name": "kungphil", "link": "https://stackoverflow.com/users/1414831/kungphil"}, "reply_to_user": {"reputation": 4256, "user_id": 214178, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8213626e4c66700c3e7354a70b3ac5e1?s=128&d=identicon&r=PG", "display_name": "artdanil", "link": "https://stackoverflow.com/users/214178/artdanil"}, "edited": false, "score": 0, "creation_date": 1570054789, "post_id": 58209726, "comment_id": 102797626, "body": "I have updated code to a complete example, using the data from the download. <code>pc</code> is a pandas DataFrame, the list indexes columns in <code>pc</code>."}], "answers": [{"tags": [], "owner": {"reputation": 17050, "user_id": 3944322, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1fb31e86bf22c094d34b240544e458ec?s=128&d=identicon&r=PG&f=1", "display_name": "Stef", "link": "https://stackoverflow.com/users/3944322/stef"}, "is_accepted": false, "score": 0, "last_activity_date": 1570098250, "creation_date": 1570098250, "answer_id": 58217143, "question_id": 58209726, "link": "https://stackoverflow.com/questions/58209726/writing-binary-data-with-tobytes-can-not-be-read-with-software-on-windows/58217143#58217143", "title": "writing binary data with tobytes() can not be read with software on Windows", "body": "<p>The difference between <code>made_with_code.ply</code> and <code>made_with_windows.ply</code> is that in the latter, all decimals are rounded to 2 decimals as you can see with:</p>\n\n<pre><code>with open('windows.ply', 'rb') as f:\n    np.core.records.fromfile(f, formats='f4,f4,f4,f4')\n</code></pre>\n\n<p>after extraction of the data part with <code>tail -c +274 made_with_windows.ply &gt; windows.ply</code>.</p>\n\n<p>The following code produces a file identical (in the data part) to <code>made_with_windows.ply</code>:</p>\n\n<pre><code>import pandas as pd\nimport numpy as np\n\npc = pd.read_csv('points.txt')\n\nwith open('made_with_code_new.ply', 'wb') as ply:\n    ply.write(\"ply\\n\")\n    ply.write('format binary_little_endian 1.0\\n')\n    ply.write(\"comment Author: Phil Wilkes\\n\")\n    ply.write(\"obj_info generated with pcd2ply.py\\n\")\n    ply.write(\"element vertex {}\\n\".format(len(pc)))\n    ply.write(\"property float x\\n\")\n    ply.write(\"property float y\\n\")\n    ply.write(\"property float z\\n\")\n    ply.write(\"end_header\\n\")\n\n    pc[['x', 'y', 'z', 'n']] = pc[['x', 'y', 'z', 'n']].round(2).astype('f4')\n\n    ply.write(pc[['x', 'y', 'z', 'n']].to_records(index=False).tobytes())\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1479, "user_id": 1414831, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/63346ad40db38cf3a54e84403099e91e?s=128&d=identicon&r=PG", "display_name": "kungphil", "link": "https://stackoverflow.com/users/1414831/kungphil"}, "is_accepted": true, "score": 0, "last_activity_date": 1582553716, "creation_date": 1582553716, "answer_id": 60377773, "question_id": 58209726, "link": "https://stackoverflow.com/questions/58209726/writing-binary-data-with-tobytes-can-not-be-read-with-software-on-windows/60377773#60377773", "title": "writing binary data with tobytes() can not be read with software on Windows", "body": "<p>Turns out I needed to specify what line ending to use when opening the file:</p>\n\n<pre><code>open(output_name, 'w', newline='\\n')\n</code></pre>\n\n<p>After rewriting for Python 3 the file has to be written to twice - once for the header and once for the binary component so the new function looks like:</p>\n\n<pre><code>import pandas as pd\nimport numpy as np\n\npc = pd.read_csv('points.txt')\n\nwith open(output_name, 'w', newline='\\n') as ply:\n\n    ply.write(\"ply\\n\")\n    ply.write('format binary_little_endian 1.0\\n')\n    ply.write(\"comment Author: Phil Wilkes\\n\")\n    ply.write(\"obj_info generated with pcd2ply.py\\n\")\n    ply.write(\"element vertex {}\\n\".format(len(pc)))\n    ply.write(\"property float x\\n\")\n    ply.write(\"property float y\\n\")\n    ply.write(\"property float z\\n\")\n    ply.write(\"end_header\\n\")\n\nwith open(output_name, 'ab') as ply:\n    pc[['x', 'y', 'z']] = pc[['x', 'y', 'z']].astype('f4')\n    ply.write(pc[cols].to_records(index=False).tobytes()) \n</code></pre>\n"}], "owner": {"reputation": 1479, "user_id": 1414831, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/63346ad40db38cf3a54e84403099e91e?s=128&d=identicon&r=PG", "display_name": "kungphil", "link": "https://stackoverflow.com/users/1414831/kungphil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 60377773, "answer_count": 2, "score": 0, "last_activity_date": 1582553716, "creation_date": 1570052451, "last_edit_date": 1570054705, "question_id": 58209726, "link": "https://stackoverflow.com/questions/58209726/writing-binary-data-with-tobytes-can-not-be-read-with-software-on-windows", "title": "writing binary data with tobytes() can not be read with software on Windows", "body": "<p>I am trying to write some xyz point data to a .ply file using python. </p>\n\n<p>I am using <a href=\"https://github.com/philwilkes/treeseg/blob/master/python/ply_io.py\" rel=\"nofollow noreferrer\">this</a> script here which basically writes a pandas DataFrame to a binary format via a recarry and numpy method <code>tobytes()</code>:</p>\n\n<pre><code>import pandas as pd\nimport numpy as np\n\npc = pd.read_csv('points.txt')\n\nwith open('some_file.ply', 'w') as ply:\n\n    ply.write(\"ply\\n\")\n    ply.write('format binary_little_endian 1.0\\n')\n    ply.write(\"comment Author: Phil Wilkes\\n\")\n    ply.write(\"obj_info generated with pcd2ply.py\\n\")\n    ply.write(\"element vertex {}\\n\".format(len(pc)))\n    ply.write(\"property float x\\n\")\n    ply.write(\"property float y\\n\")\n    ply.write(\"property float z\\n\")\n    ply.write(\"end_header\\n\")\n\n    pc[['x', 'y', 'z']] = pc[['x', 'y', 'z']].astype('f4')\n\n    ply.write(pc[['x', 'y', 'z']].to_records(index=False).tobytes())\n</code></pre>\n\n<p>This script works fine on my Mac and software like CloudCompare can read it; however, when I use the same script on a windows machine CloudCompare can read the header info but garbels the binary content.</p>\n\n<p>When I read the a text file version into CloudCompare and output as a binary file both Linux and Windows versions can read it but the file contents are different.</p>\n\n<p><a href=\"http://www2.geog.ucl.ac.uk/~ucfaptv/made_with_code.ply\" rel=\"nofollow noreferrer\">Here</a> is the version that is produced by the above script, <a href=\"http://www2.geog.ucl.ac.uk/~ucfaptv/made_with_windows.ply\" rel=\"nofollow noreferrer\">here</a> is the version produce by CloudCompare on Windows and <a href=\"http://www2.geog.ucl.ac.uk/~ucfaptv/points.txt\" rel=\"nofollow noreferrer\">here</a> is the raw data.</p>\n"}, {"tags": ["python", "datetime"], "comments": [{"owner": {"reputation": 27334, "user_id": 7758804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UBA7j.jpg?s=128&g=1", "display_name": "Trenton McKinney", "link": "https://stackoverflow.com/users/7758804/trenton-mckinney"}, "edited": false, "score": 1, "creation_date": 1570052554, "post_id": 58209697, "comment_id": 102797119, "body": "Please <a href=\"https://stackoverflow.com/questions/52413246/how-do-i-provide-a-reproducible-copy-of-my-existing-dataframe\">provide a reproducible copy of the existing DataFrame</a>"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 12156206, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mADDNHWiCFSxVDUun2GKPRYw-hNLBlFgseVfVTGDA=k-s128", "display_name": "Alice Xu", "link": "https://stackoverflow.com/users/12156206/alice-xu"}, "edited": false, "score": 0, "creation_date": 1570720150, "post_id": 58209804, "comment_id": 103010508, "body": "the if statement should be: if DDA_compamy[&#39;ProcessingDATE&#39;].weekday() == 0:"}], "tags": [], "owner": {"reputation": 174, "user_id": 11623711, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Snh27ThCViI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reK8a500a7r8nSseCuI6yrDLAoTdw/mo/photo.jpg?sz=128", "display_name": "Sudharsana Rajasekaran", "link": "https://stackoverflow.com/users/11623711/sudharsana-rajasekaran"}, "is_accepted": true, "score": 0, "last_activity_date": 1570053826, "last_edit_date": 1570053826, "creation_date": 1570052994, "answer_id": 58209804, "question_id": 58209697, "link": "https://stackoverflow.com/questions/58209697/subtract-date-from-datetime-columns/58209804#58209804", "title": "Subtract date from datetime columns", "body": "<p>Hope this helps,</p>\n\n<pre><code>from datetime import timedelta\n\nif DDA_compamy['ProcessingDATE'].weekday() == 4:  #Condition to check if it is friday\n    DDA_compamy['Report Date']=DDA_compamy['ProcessingDATE'] - timedelta(days=3) # if friday subtracting 3 days\nelse:\n    DDA_compamy['Report Date']=DDA_compamy['ProcessingDATE'] - timedelta(days=1) #Else one day from the date is subtracted\n</code></pre>\n\n<p>the above can also be written as,</p>\n\n<pre><code>DDA_compamy['Report Date'] = (DDA_compamy['ProcessingDATE'] - timedelta(days=3)) if (DDA_compamy['ProcessingDATE'].weekday() == 4) else (DDA_compamy['Report Date']=DDA_compamy['ProcessingDATE'] - timedelta(days=1))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1893, "user_id": 8927098, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zrj09.png?s=128&g=1", "display_name": "cosmic_inquiry", "link": "https://stackoverflow.com/users/8927098/cosmic-inquiry"}, "is_accepted": false, "score": 0, "last_activity_date": 1570053559, "creation_date": 1570053559, "answer_id": 58209886, "question_id": 58209697, "link": "https://stackoverflow.com/questions/58209697/subtract-date-from-datetime-columns/58209886#58209886", "title": "Subtract date from datetime columns", "body": "<p>Use <a href=\"https://pandas.pydata.org/pandas-docs/version/0.22/generated/pandas.Series.dt.weekday.html\" rel=\"nofollow noreferrer\">pandas.Series.dt.weekday</a> and some logic:</p>\n\n<pre><code>import pandas as pd\ndf = pd.DataFrame({'ProcessingDATE':pd.date_range('2019-04-01', '2019-04-27')})\ndf1 = df.copy()\nmask = df1['ProcessingDATE'].dt.weekday == 0\ndf.loc[mask, 'ProcessingDATE'] = df1['ProcessingDATE'] - pd.to_timedelta('3 days')\ndf.loc[~mask, 'ProcessingDATE'] = df1['ProcessingDATE'] - pd.to_timedelta('1 days')\n</code></pre>\n\n<p>Output: </p>\n\n<pre><code>   ProcessingDATE\n0      2019-03-29\n1      2019-04-01\n2      2019-04-02\n3      2019-04-03\n4      2019-04-04\n5      2019-04-05\n6      2019-04-06\n7      2019-04-05\n8      2019-04-08\n9      2019-04-09\n10     2019-04-10\n11     2019-04-11\n12     2019-04-12\n13     2019-04-13\n14     2019-04-12\n15     2019-04-15\n16     2019-04-16\n17     2019-04-17\n18     2019-04-18\n19     2019-04-19\n20     2019-04-20\n21     2019-04-19\n22     2019-04-22\n23     2019-04-23\n24     2019-04-24\n25     2019-04-25\n26     2019-04-26\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 12156206, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mADDNHWiCFSxVDUun2GKPRYw-hNLBlFgseVfVTGDA=k-s128", "display_name": "Alice Xu", "link": "https://stackoverflow.com/users/12156206/alice-xu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 58209804, "answer_count": 2, "score": 1, "last_activity_date": 1570053826, "creation_date": 1570052217, "last_edit_date": 1570052410, "question_id": 58209697, "link": "https://stackoverflow.com/questions/58209697/subtract-date-from-datetime-columns", "title": "Subtract date from datetime columns", "body": "<p>I have a dataframe where one of the column ('ProcessingDATE') is datetime format. I want to create another column ('Report Date') where if the processing date is a Monday, subtract 3 days from it, which will end to be a Friday; else subtract 1 day from it. </p>\n\n<p>I've been using python for a short amount of time, so doesn't have a lot of idea about how to write it. My thoughts was to write a for loop with if the <code>cell = Monday</code>, <code>then = datetime.datetime.today() \u2013 datetime.timedelta(days=3)</code>; <code>else = datetime.datetime.today() \u2013 datetime.timedelta(days=1)</code></p>\n\n<pre><code>for j in range(len(DDA_compamy['ProcessingDATE'])):\n    if pd.to_datetime(datetime(DDA_company.ProcessingDATE[j])).weekday() == 2\n</code></pre>\n"}, {"tags": ["python", "opencv", "tracking", "yolo"], "owner": {"reputation": 151, "user_id": 8952890, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RTvGB.jpg?s=128&g=1", "display_name": "Angga", "link": "https://stackoverflow.com/users/8952890/angga"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 489, "favorite_count": 2, "answer_count": 0, "score": 1, "last_activity_date": 1570052045, "creation_date": 1570052045, "question_id": 58209674, "link": "https://stackoverflow.com/questions/58209674/creating-trail-from-yolo-v2-deep-sort-object-tracking-with-tensorflow", "title": "Creating trail from YOLO v2 + deep_sort object tracking with tensorflow", "body": "<p>I'm trying to create trails and map of trails of all ID like this video: <a href=\"https://www.youtube.com/watch?v=tq0BgncuMhs\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=tq0BgncuMhs</a></p>\n\n<p>So far I haven't been able to, I'm currently using this repo from bendidi <a href=\"https://github.com/bendidi/Tracking-with-darkflow\" rel=\"nofollow noreferrer\">https://github.com/bendidi/Tracking-with-darkflow</a> which I modifies to also show the trails.\nI did try using <code>cv2.line</code> and extract it from <code>track.to_tlbr()</code> but right now the result look like this:<br>\n<a href=\"https://i.stack.imgur.com/DV9p8.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DV9p8.jpg\" alt=\"result\"></a></p>\n\n<p>Here's the code that I modified to get the current result:<br>\ndarkflow/darkflow/net/yolov2/predict.py</p>\n\n<pre><code>from collections import deque\nimport numpy as np\nimport math\nimport cv2\nimport os\nimport json\n#from scipy.special import expit\n#from utils.box import BoundBox, box_iou, prob_compare\n#from utils.box import prob_compare2, box_intersection\nfrom ...utils.box import BoundBox\nfrom ...cython_utils.cy_yolo2_findboxes import box_constructor\n\n\nds = True\ntry :\n    from deep_sort.application_util import preprocessing as prep\n    from deep_sort.application_util import visualization\n    from deep_sort.deep_sort.detection import Detection\nexcept :\n    ds = False\n\n\ndef expit(x):\n    return 1. / (1. + np.exp(-x))\n\ndef _softmax(x):\n    e_x = np.exp(x - np.max(x))\n    out = e_x / e_x.sum()\n    return out\n\ndef findboxes(self, net_out):\n    # meta\n    meta = self.meta\n    boxes = list()\n    boxes=box_constructor(meta,net_out)\n    return boxes\n\n\ndef extract_boxes(self,new_im):\n    cont = []\n    new_im=new_im.astype(np.uint8)\n    ret, thresh=cv2.threshold(new_im, 127, 255, 0)\n    p, contours, hierarchy=cv2.findContours(\n        thresh, cv2.RETR_TREE, cv2.CHAIN_APPROX_SIMPLE)\n    for i in range(0, len(contours)):\n        cnt=contours[i]\n        x, y, w, h=cv2.boundingRect(cnt)\n        if w*h &gt; 30**2 and ((w &lt; new_im.shape[0] and h &lt;= new_im.shape[1]) or (w &lt;= new_im.shape[0] and h &lt; new_im.shape[1])):\n            if self.FLAGS.tracker == \"sort\":\n                cont.append([x, y, x+w, y+h])\n            else : cont.append([x, y, w, h])\n    return cont\ndef postprocess(self,net_out, im,frame_id = 0,csv_file=None,csv=None,mask = None,encoder=None,tracker=None):\n    \"\"\"\n    Takes net output, draw net_out, save to disk\n    \"\"\"\n    boxes = self.findboxes(net_out)\n\n    # meta\n    meta = self.meta\n    nms_max_overlap = 0.1\n    threshold = meta['thresh']\n    colors = meta['colors']\n    labels = meta['labels']\n    if type(im) is not np.ndarray:\n        imgcv = cv2.imread(im)\n    else: imgcv = im\n    h, w, _ = imgcv.shape\n    thick = int((h + w) // 300)\n    resultsForJSON = []\n\n    if not self.FLAGS.track :\n        for b in boxes:\n            boxResults = self.process_box(b, h, w, threshold)\n            if boxResults is None:\n                continue\n            left, right, top, bot, mess, max_indx, confidence = boxResults\n            if self.FLAGS.json:\n                resultsForJSON.append({\"label\": mess, \"confidence\": float('%.2f' % confidence), \"topleft\": {\"x\": left, \"y\": top}, \"bottomright\": {\"x\": right, \"y\": bot}})\n                continue\n            if self.FLAGS.display or self.FLAGS.saveVideo:\n                cv2.rectangle(imgcv,\n                    (left, top), (right, bot),\n                    colors[max_indx], thick)\n                cv2.putText(imgcv, mess, (left, top - 12),\n                    0, 1e-3 * h, colors[max_indx],thick//3)\n    else :\n        if not ds :\n            print(\"ERROR : deep sort or sort submodules not found for tracking please run :\")\n            print(\"\\tgit submodule update --init --recursive\")\n            print(\"ENDING\")\n            exit(1)\n        detections = []\n        scores = []\n        lines = deque(maxlen=64)\n        for b in boxes:\n            boxResults = self.process_box(b, h, w, threshold)\n            if boxResults is None:\n                continue\n            left, right, top, bot, mess, max_indx, confidence = boxResults\n            if mess not in self.FLAGS.trackObj :\n                continue\n            if self.FLAGS.tracker == \"deep_sort\":\n                detections.append(np.array([left,top,right-left,bot-top]).astype(np.float64))\n                scores.append(confidence)\n            elif self.FLAGS.tracker == \"sort\":\n                detections.append(np.array([left,top,right,bot]).astype(np.float64))\n        if len(detections) &lt; 3  and self.FLAGS.BK_MOG:\n            detections = detections + extract_boxes(self,mask)\n\n        detections = np.array(detections)\n        if detections.shape[0] == 0 :\n            return imgcv\n        if self.FLAGS.tracker == \"deep_sort\":\n            scores = np.array(scores)\n            features = encoder(imgcv, detections.copy())\n            detections = [\n                        Detection(bbox, score, feature) for bbox,score, feature in\n                        zip(detections,scores, features)]\n            # Run non-maxima suppression.\n            boxes = np.array([d.tlwh for d in detections])\n            scores = np.array([d.confidence for d in detections])\n            indices = prep.non_max_suppression(boxes, nms_max_overlap, scores)\n            detections = [detections[i] for i in indices]\n            tracker.predict()\n            tracker.update(detections)\n            trackers = tracker.tracks\n        elif self.FLAGS.tracker == \"sort\":\n            trackers = tracker.update(detections)\n        for track in trackers:\n            if self.FLAGS.tracker == \"deep_sort\":\n                if not track.is_confirmed() or track.time_since_update &gt; 1:\n                    continue\n                bbox = track.to_tlbr()\n                center = (int(bbox[0]) + ((int(bbox[2]) - int(bbox[0])) // 2)), (int(bbox[1]) + ((int(bbox[3]) - int(bbox[1])) // 2)) # X + Width / 2, Y + Height / 2\n                lines.appendleft(center)\n                id_num = str(track.track_id)\n            elif self.FLAGS.tracker == \"sort\":\n                bbox = [int(track[0]),int(track[1]),int(track[2]),int(track[3])]\n                id_num = str(int(track[4]))\n            if self.FLAGS.csv:\n                csv.writerow([frame_id,id_num,int(bbox[0]),int(bbox[1]),int(bbox[2])-int(bbox[0]),int(bbox[3])-int(bbox[1])])\n                csv_file.flush()\n            if self.FLAGS.display or self.FLAGS.saveVideo:\n                cv2.rectangle(imgcv, (int(bbox[0]), int(bbox[1])), (int(bbox[2]), int(bbox[3])),\n                                (255,255,255), thick//3)\n                cv2.putText(imgcv, id_num,(int(bbox[0]), int(bbox[1]) - 12),0, 1e-3 * h, (255,255,255),thick//6)\n        for i in range(1, len(lines)):\n            cv2.line(imgcv, lines[i - 1], lines[i], (255,255,255), thick//3)\n    return imgcv\n</code></pre>\n\n<p>Or just the code that I added:</p>\n\n<pre><code>...\nlines = deque(maxlen=64)\n...\n            center = (int(bbox[0]) + ((int(bbox[2]) - int(bbox[0])) // 2)), (int(bbox[1]) + ((int(bbox[3]) - int(bbox[1])) // 2)) # X + Width / 2, Y + Height / 2\n            lines.appendleft(center)\n...\n    for i in range(1, len(lines)):\n        cv2.line(imgcv, lines[i - 1], lines[i], (255,255,255), thick//3)\n</code></pre>\n\n<p>Could someone help me out on this? Or should I do something with the data first instead of plug in straight into <code>cv2.line</code>? If you also have any suggestion for using external software rather than using Python, that's also welcome (I have frame_id, track_id, x, y, w, h data)</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 8411, "user_id": 2399775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29a2523b23d09e0bfc15d3a77e505271?s=128&d=identicon&r=PG", "display_name": "wpercy", "link": "https://stackoverflow.com/users/2399775/wpercy"}, "edited": false, "score": 3, "creation_date": 1570052400, "post_id": 58209669, "comment_id": 102797070, "body": "sounds like you&#39;re running a python 3 shell and your system is using python 2 to execute the crontab. Can you include you entry in the crontab?"}, {"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 2, "creation_date": 1570052414, "post_id": 58209669, "comment_id": 102797072, "body": "Whenever a program behaves differently when run via <code>cron</code>, it is usually due to environment differences.  In this case, check your <code>PATH</code> and <code>PYTHONPATH</code> settings on the regular command line vs. in a cron environment."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 12156143, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDItyVGP6k_ThNUQUZ9blX1r_KYq7mt6Gs3eUcr=k-s128", "display_name": "Ray Ettinger", "link": "https://stackoverflow.com/users/12156143/ray-ettinger"}, "edited": false, "score": 0, "creation_date": 1570724841, "post_id": 58228104, "comment_id": 103012973, "body": "still a no go Date: Thu, 10 Oct 2019 12:22:01 -0400 Subject: Cron &lt;pi@raspberrypi&gt; python /home/pi/Documents/pyemail/ipemailer.py Traceback (most recent call last):   File &quot;/home/pi/Documents/pyemail/ipemailer.py&quot;, line 3, in &lt;module&gt;     import urllib.request ImportError: No module named request"}, {"owner": {"reputation": 11, "user_id": 12156143, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDItyVGP6k_ThNUQUZ9blX1r_KYq7mt6Gs3eUcr=k-s128", "display_name": "Ray Ettinger", "link": "https://stackoverflow.com/users/12156143/ray-ettinger"}, "edited": false, "score": 0, "creation_date": 1570724954, "post_id": 58228104, "comment_id": 103013028, "body": "i did add the correct shebang for python3 and made it excuteable as you instructed when i run it thonny it still works perfectly"}, {"owner": {"reputation": 12117, "user_id": 2745495, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5bbcd267235bab78ec6710ef6654ba87?s=128&d=identicon&r=PG", "display_name": "Gino Mempin", "link": "https://stackoverflow.com/users/2745495/gino-mempin"}, "reply_to_user": {"reputation": 11, "user_id": 12156143, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDItyVGP6k_ThNUQUZ9blX1r_KYq7mt6Gs3eUcr=k-s128", "display_name": "Ray Ettinger", "link": "https://stackoverflow.com/users/12156143/ray-ettinger"}, "edited": false, "score": 0, "creation_date": 1570750361, "post_id": 58228104, "comment_id": 103022300, "body": "@RayEttinger &quot;<i>python /home/pi/Documents/pyemail/ipemailer.py</i>&quot;: It looks like you are calling your script with <code>python</code>, which normally points to Python2 (check with <code>python -V</code>). Even if you have the shebang for Python 3, it will be ignored if you still call the script explicitly with Python 2. Either call it with <code>python3</code> or simply use <code>&#47;path&#47;to&#47;script.py</code> (as in my example) and rely on the shebang."}, {"owner": {"reputation": 12117, "user_id": 2745495, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5bbcd267235bab78ec6710ef6654ba87?s=128&d=identicon&r=PG", "display_name": "Gino Mempin", "link": "https://stackoverflow.com/users/2745495/gino-mempin"}, "reply_to_user": {"reputation": 11, "user_id": 12156143, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDItyVGP6k_ThNUQUZ9blX1r_KYq7mt6Gs3eUcr=k-s128", "display_name": "Ray Ettinger", "link": "https://stackoverflow.com/users/12156143/ray-ettinger"}, "edited": false, "score": 0, "creation_date": 1570750638, "post_id": 58228104, "comment_id": 103022361, "body": "@RayEttinger If you want to confirm which Python interpreter is being used by your script, check my recent edit to my answer."}], "tags": [], "owner": {"reputation": 12117, "user_id": 2745495, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5bbcd267235bab78ec6710ef6654ba87?s=128&d=identicon&r=PG", "display_name": "Gino Mempin", "link": "https://stackoverflow.com/users/2745495/gino-mempin"}, "is_accepted": false, "score": 0, "last_activity_date": 1570750609, "last_edit_date": 1570750609, "creation_date": 1570145371, "answer_id": 58228104, "question_id": 58209669, "link": "https://stackoverflow.com/questions/58209669/importerror-when-scheduling-python-code-to-run-using-crontab/58228104#58228104", "title": "ImportError when scheduling python code to run using crontab", "body": "<p>The module <a href=\"https://docs.python.org/3.7/library/urllib.html\" rel=\"nofollow noreferrer\"><code>urllib.request</code></a> was only made available starting Python3. </p>\n\n<p>From the old <a href=\"https://docs.python.org/2.7/library/urllib.html\" rel=\"nofollow noreferrer\"><code>urllib</code> docs from Python2.7</a>:</p>\n\n<blockquote>\n  <p>The <strong>urllib</strong> module has been split into parts and renamed in Python 3 to <strong>urllib.request</strong>, <strong>urllib.parse</strong>, and <strong>urllib.error</strong> error.</p>\n</blockquote>\n\n<p>The <code>cron</code> utility is a system tool, which most likely also uses the system Python, which is most likely Python 2.7. You'll have to explicitly tell <code>cron</code> that you want to use Python 3 instead.</p>\n\n<p>You can do this by adding a <a href=\"https://en.wikipedia.org/wiki/Shebang_(Unix)\" rel=\"nofollow noreferrer\">shebang</a> at the top of your Python script that specifies Python 3:</p>\n\n<pre><code>#!/usr/bin/python3\n</code></pre>\n\n<p>To get the correct shebang, do:</p>\n\n<pre><code>$ which python3\n/usr/bin/python3\n</code></pre>\n\n<p>Then in your crontab list:</p>\n\n<pre><code>0 5 * * 1-5 /path/to/my-python-script.py\n</code></pre>\n\n<p>Make sure to make the script executable by doing </p>\n\n<pre><code>$ chmod +x /path/to/my-python-script.py\n$ ls -l /path/to/my-python-script.py \n-rwxr-xr-x 1 root root 3.5K 10\u6708  1 08:52 /path/to/my-python-script.py\n</code></pre>\n\n<hr>\n\n<p><strong>UPDATE</strong>: </p>\n\n<p>If you want to check which Python interpreter is being used by your script, add this at the top:</p>\n\n<pre><code>import sys\nprint(sys.version)\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 12156143, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDItyVGP6k_ThNUQUZ9blX1r_KYq7mt6Gs3eUcr=k-s128", "display_name": "Ray Ettinger", "link": "https://stackoverflow.com/users/12156143/ray-ettinger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 135, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1570750609, "creation_date": 1570051997, "last_edit_date": 1570059282, "question_id": 58209669, "link": "https://stackoverflow.com/questions/58209669/importerror-when-scheduling-python-code-to-run-using-crontab", "title": "ImportError when scheduling python code to run using crontab", "body": "<p>This code runs fine from shell without errors:</p>\n\n<pre><code>import urllib.request\n</code></pre>\n\n<p>When I schedule for it to run using crontab, it throws this error:</p>\n\n<pre><code>Traceback (most recent call last): \n  File \"/home/pi/Documents/pyemail/ipemailer.py\", line 2, in &lt;module&gt; \n    import urllib.request\nImportError: No module named request\n</code></pre>\n"}, {"tags": ["python", "tensorflow", "tensorflow-datasets"], "comments": [{"owner": {"reputation": 2868, "user_id": 7212365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FBxLp.png?s=128&g=1", "display_name": "zihaozhihao", "link": "https://stackoverflow.com/users/7212365/zihaozhihao"}, "edited": false, "score": 0, "creation_date": 1570055871, "post_id": 58209650, "comment_id": 102797851, "body": "Please show us some codes you have tried, and what&#39;s your expected results, etc. It will help to answer your question."}], "answers": [{"tags": [], "owner": {"reputation": 101, "user_id": 12199329, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-GdvlxiiIUkQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc0cLt69ZMLCluFvRPEaCRoRerO-g/photo.jpg?sz=128", "display_name": "BabaYaga", "link": "https://stackoverflow.com/users/12199329/babayaga"}, "is_accepted": false, "score": 0, "last_activity_date": 1571136177, "creation_date": 1571136177, "answer_id": 58392795, "question_id": 58209650, "link": "https://stackoverflow.com/questions/58209650/how-to-replicate-each-element-differently-use-tensorflow-dataset-api/58392795#58392795", "title": "how to replicate each element differently use tensorflow dataset API?", "body": "<p>Use data augmentation by ImageDataGenerator, it will transform the images. The set of transformations includes rotation, zooming, etc which are somehow new data. It depends on how many epochs you run, it will generate as many images depending on steps_per_epoch. These augmented images are not stored in memory, they are generated while run and lost after training.</p>\n\n<pre><code>datagen = keras.preprocessing.image.ImageDataGenerator(\nfeaturewise_center=True,\nfeaturewise_std_normalization=True,\nrotation_range=20,\nwidth_shift_range=0.2,\nheight_shift_range=0.2,\nhorizontal_flip=True)\n</code></pre>\n"}], "owner": {"reputation": 113, "user_id": 4592071, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/WhXYF.jpg?s=128&g=1", "display_name": "venusisle", "link": "https://stackoverflow.com/users/4592071/venusisle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1571136177, "creation_date": 1570051933, "question_id": 58209650, "link": "https://stackoverflow.com/questions/58209650/how-to-replicate-each-element-differently-use-tensorflow-dataset-api", "title": "how to replicate each element differently use tensorflow dataset API?", "body": "<p>I create a tensorflow dataset <code>train_image</code> which has 10 class A image, and 20 class B image. \nnow how can I replicate each class separately?</p>\n\n<p>I want <code>train_image</code> to include 100 class A image (10 repeat on each class A image), and 100 class B image (5 repeat on each class B image). </p>\n"}, {"tags": ["python", "pandas", "multi-index"], "comments": [{"owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "edited": false, "score": 0, "creation_date": 1570052059, "post_id": 58209644, "comment_id": 102796983, "body": "Set &#39;time&#39; in the index, then use droplevel(0) on df.columns."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 12156059, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-v8MnioffMIw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rddg6hWoc5P_V_GNdt3Vt7YH2JAug/photo.jpg?sz=128", "display_name": "Nick", "link": "https://stackoverflow.com/users/12156059/nick"}, "edited": false, "score": 0, "creation_date": 1570053950, "post_id": 58209808, "comment_id": 102797449, "body": "That did it thanks! Turns out I was just missing  df2 = df1.set_index(&#39;time&#39;)"}], "tags": [], "owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "is_accepted": true, "score": 1, "last_activity_date": 1570053027, "creation_date": 1570053027, "answer_id": 58209808, "question_id": 58209644, "link": "https://stackoverflow.com/questions/58209644/how-do-i-remove-a-multiindex-from-my-dataframe/58209808#58209808", "title": "How do I remove a MultiIndex from my DataFrame?", "body": "<p>IIUC you have this:</p>\n\n<pre><code>dd = {('time', ''): {0: '22:45:00',\n  1: '23:00:00',\n  2: '23:15:00',\n  3: '23:30:00',\n  4: '23:45:00',\n  5: '00:00:00'},\n ('numbers', 'a'): {0: 1016.0,\n  1: 1006.0,\n  2: 1084.0,\n  3: 1095.0,\n  4: 1098.0,\n  5: 1044.0},\n ('numbers', 'b'): {0: 1059.0,\n  1: 10507.0,\n  2: 1058.0,\n  3: 1498.0,\n  4: 1002.0,\n  5: 1517.0},\n ('numbers', 'c'): {0: 1042.0,\n  1: 1040.0,\n  2: 1047.0,\n  3: 1480.0,\n  4: 1044.0,\n  5: 1084.0},\n ('numbers', 'd'): {0: 1007.0,\n  1: 1084.0,\n  2: 1495.0,\n  3: 1048.0,\n  4: 1084.0,\n  5: 1051.0}}\n\n df1 = pd.DataFrame(dd).rename_axis([None,'letters'], axis=1)\n df1 \n</code></pre>\n\n<p>Input Dataframe:</p>\n\n<pre><code>             time numbers                         \nletters                 a        b       c       d\n0        22:45:00  1016.0   1059.0  1042.0  1007.0\n1        23:00:00  1006.0  10507.0  1040.0  1084.0\n2        23:15:00  1084.0   1058.0  1047.0  1495.0\n3        23:30:00  1095.0   1498.0  1480.0  1048.0\n4        23:45:00  1098.0   1002.0  1044.0  1084.0\n5        00:00:00  1044.0   1517.0  1084.0  1051.0\n</code></pre>\n\n<p>Then,</p>\n\n<pre><code>df2 = df1.set_index('time')\n\ndf2.columns = df2.columns.droplevel(0)\n\ndf2.reset_index()\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>letters      time       a        b       c       d\n0        22:45:00  1016.0   1059.0  1042.0  1007.0\n1        23:00:00  1006.0  10507.0  1040.0  1084.0\n2        23:15:00  1084.0   1058.0  1047.0  1495.0\n3        23:30:00  1095.0   1498.0  1480.0  1048.0\n4        23:45:00  1098.0   1002.0  1044.0  1084.0\n5        00:00:00  1044.0   1517.0  1084.0  1051.0\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 12156059, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-v8MnioffMIw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rddg6hWoc5P_V_GNdt3Vt7YH2JAug/photo.jpg?sz=128", "display_name": "Nick", "link": "https://stackoverflow.com/users/12156059/nick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 271, "favorite_count": 0, "accepted_answer_id": 58209808, "answer_count": 1, "score": 1, "last_activity_date": 1570053027, "creation_date": 1570051903, "last_edit_date": 1570052525, "question_id": 58209644, "link": "https://stackoverflow.com/questions/58209644/how-do-i-remove-a-multiindex-from-my-dataframe", "title": "How do I remove a MultiIndex from my DataFrame?", "body": "<p>I try pulling the columns from my dataframe using <em>df.columns</em> and I get:</p>\n\n<pre><code>MultiIndex([(     'time', ''),\n        ('numbers', 11),\n        ('numbers', 12),\n        ('numbers', 13),\n        ('numbers', 14)],\n       names=[None, 'letters'])\n</code></pre>\n\n<p>I have never used a MultiIndex before so I am now confused how to get 'Time' as a column now instead of an index so I can go from this DataFrame:</p>\n\n<pre><code>df = \n\n                      time     numbers                           \nletters                                a       b       c       d\n0                     22:45:00      1016.0  1059.0  1042.0  1007.0\n1                     23:00:00      1006.0  10507.0  1040.0  1084.0\n2                     23:15:00      1084.0  1058.0  1047.0  1495.0\n3                     23:30:00      1095.0  1498.0  1480.0  1048.0\n4                     23:45:00      1098.0  1002.0  1044.0  1084.0\n5                     00:00:00      1044.0  1517.0  1084.0  1051.0\n</code></pre>\n\n<p>(By preferably just removing the MultiIndex) \nSo it resembles this:</p>\n\n<pre><code>df = \n\n                      time               a       b       c       d\n0                     22:45:00      1016.0  1059.0  1042.0  1007.0\n1                     23:00:00      1006.0  1007.0  1040.0  1084.0\n2                     23:15:00      1084.0  1058.0  1047.0  1495.0\n3                     23:30:00      1095.0  1498.0  1480.0  1048.0\n4                     23:45:00      1098.0  1002.0  1044.0  1084.0\n5                     00:00:00      1044.0  1517.0  1084.0  1051.0\n</code></pre>\n\n<p>I have tried using droplevel but I get</p>\n\n<blockquote>\n  <p>Cannot remove 1 levels from an index with 1 levels: at least one level must be left.</p>\n</blockquote>\n\n<p>Is this because the index is in the columns and not the rows?</p>\n"}, {"tags": ["python", "parallel-processing", "dask"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1570053165, "post_id": 58209596, "comment_id": 102797261, "body": "As an aside, <code>list(el for el in chain.from_iterable(L))</code> can just be <code>list(chain.from_iterable(L))</code> but that shouldn&#39;t make a significant difference"}], "answers": [{"tags": [], "owner": {"reputation": 47893, "user_id": 616616, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/8749ec52cee260c4c1f67f2dec29d957?s=128&d=identicon&r=PG", "display_name": "MRocklin", "link": "https://stackoverflow.com/users/616616/mrocklin"}, "is_accepted": true, "score": 1, "last_activity_date": 1570157478, "last_edit_date": 1570157478, "creation_date": 1570112543, "answer_id": 58221174, "question_id": 58209596, "link": "https://stackoverflow.com/questions/58209596/dask-parallelizing-across-nested-lists/58221174#58221174", "title": "Dask: Parallelizing across nested lists", "body": "<p>Yes, there are a variety of ways of doing this well.  </p>\n\n<p>There is an example here: <a href=\"https://examples.dask.org/applications/evolving-workflows.html\" rel=\"nofollow noreferrer\">https://examples.dask.org/applications/evolving-workflows.html</a></p>\n"}], "owner": {"reputation": 10485, "user_id": 1274908, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/gv5Fr.jpg?s=128&g=1", "display_name": "ericmjl", "link": "https://stackoverflow.com/users/1274908/ericmjl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 58221174, "answer_count": 1, "score": 2, "last_activity_date": 1570157478, "creation_date": 1570051670, "last_edit_date": 1570062378, "question_id": 58209596, "link": "https://stackoverflow.com/questions/58209596/dask-parallelizing-across-nested-lists", "title": "Dask: Parallelizing across nested lists", "body": "<p>I have a problem with parallelizing across a nested list of lists.</p>\n\n<p>A simplified version of my problem looks like this:</p>\n\n<p>I have a list of lists:</p>\n\n<pre><code>[[a, b], [c, d, e], [f, g, h, i], [j], [k, l], ...]  # let's call this \"L\"\n</code></pre>\n\n<p>In Dask, I use a function to create them, because creating each sub-list takes a long time, and I have roughly a few hundred of them.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def parse(filename):\n    return list_of_lists\n\nL = []\nfor fname in filenames:\n    L.append(client.submit(parse, fname))\n</code></pre>\n\n<p>The key here, though, is that I would like to treat the sublists as a single extended list of elements (i.e. <code>[a, b, c,... l, ...]</code>) and parallelize another long-running function on each of them, but without gathering my elements and flattening the list. This is because doing the following also takes a long time:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from itertools import chain\nL = client.gather(L)  # the gather step takes time\nL = list(chain.from_iterable(L))  # flattening is fast\nL_future = client.scatter(L)  # the scatter step takes time too\n\ndef func2(element):\n    \"\"\"Also takes a long time.\"\"\"\n    ...\n    return result\n\nresults = client.map(func2, L_future)\n</code></pre>\n\n<p>Is there a way to accomplish this in a more optimized way?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 25770, "user_id": 5349916, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/QovYv.jpg?s=128&g=1", "display_name": "MisterMiyagi", "link": "https://stackoverflow.com/users/5349916/mistermiyagi"}, "edited": false, "score": 0, "creation_date": 1570051823, "post_id": 58209584, "comment_id": 102796910, "body": "Do you want to raise SystemExit (and exit the program) <i>or</i> raise CustomException (and handle it). Currently you do the former during preparation of the latter."}, {"owner": {"reputation": 26796, "user_id": 4834, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/6a04e124482c3750617f8dacde3388ce?s=128&d=identicon&r=PG", "display_name": "quamrana", "link": "https://stackoverflow.com/users/4834/quamrana"}, "edited": false, "score": 0, "creation_date": 1570052021, "post_id": 58209584, "comment_id": 102796969, "body": "Do you mean you will have some more code elsewhere which has \u2018except CustomException: sys.exit(0)\u2019 ?"}, {"owner": {"reputation": 373, "user_id": 8887463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dc014308635f1f5b9569b8600f511b7?s=128&d=identicon&r=PG&f=1", "display_name": "Anubhav", "link": "https://stackoverflow.com/users/8887463/anubhav"}, "edited": false, "score": 0, "creation_date": 1570052217, "post_id": 58209584, "comment_id": 102797022, "body": "I realize I now I can&#39;t raise a Custom Exception AND exit the program. I plan on having another code block elsewhere to specifically catch my CustomException as &quot;except CustomException: sys.exit(0)&quot;"}], "owner": {"reputation": 373, "user_id": 8887463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dc014308635f1f5b9569b8600f511b7?s=128&d=identicon&r=PG&f=1", "display_name": "Anubhav", "link": "https://stackoverflow.com/users/8887463/anubhav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1570052293, "creation_date": 1570051611, "question_id": 58209584, "link": "https://stackoverflow.com/questions/58209584/catching-exception-raising-custom-exception-that-ends-with-sys-exit", "title": "Catching exception, raising custom exception that ends with sys.exit", "body": "<p>I want to catch an exception, raise a custom exception, and then sys.exit(0) to exit the program gracefully.</p>\n\n<p>I have tried the following:</p>\n\n<p>In my main execution code, I have this:</p>\n\n<pre><code>try:\n  (some code)\nexcept Exception as ex:\n  raise CustomException\n</code></pre>\n\n<p>and in CustomException class:</p>\n\n<pre><code>class CustomException(Exception):  \n    def __init__(self):\n        sys.exit(0)\n</code></pre>\n\n<p>Unfortunately my custom exception is not getting raised this way and the main Exception is not getting caught.</p>\n\n<p>I understand I could <code>raise SystemExit</code> but I need to generate a custom exception for me to catch in another code block down the road.</p>\n"}, {"tags": ["python", "list", "loops", "dictionary"], "comments": [{"owner": {"reputation": 620, "user_id": 6800111, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ppGib.jpg?s=128&g=1", "display_name": "tjholub", "link": "https://stackoverflow.com/users/6800111/tjholub"}, "edited": false, "score": 0, "creation_date": 1570051705, "post_id": 58209549, "comment_id": 102796884, "body": "<code>grocery_history</code> appears to be a list of dicts. When you iterate over it, <code>i</code> will be a dict. In your loop you&#39;re always looking at the first item in <code>grocery_history</code>. Try using <code>i</code> instead."}, {"owner": {"reputation": 333, "user_id": 3939805, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oJesG.jpg?s=128&g=1", "display_name": "Austin Howard", "link": "https://stackoverflow.com/users/3939805/austin-howard"}, "reply_to_user": {"reputation": 620, "user_id": 6800111, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ppGib.jpg?s=128&g=1", "display_name": "tjholub", "link": "https://stackoverflow.com/users/6800111/tjholub"}, "edited": false, "score": 0, "creation_date": 1570052300, "post_id": 58209549, "comment_id": 102797037, "body": "thanks @afro, I cant believe it was that simple. well, actually I can. because again, I suck at dictionaries and lists."}], "answers": [{"comments": [{"owner": {"reputation": 333, "user_id": 3939805, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oJesG.jpg?s=128&g=1", "display_name": "Austin Howard", "link": "https://stackoverflow.com/users/3939805/austin-howard"}, "edited": false, "score": 0, "creation_date": 1570053460, "post_id": 58209767, "comment_id": 102797333, "body": "I appreciate the assist. to be honest I wasn&#39;t aware that  I had to use the variable I in the for loop. but that does make sense."}, {"owner": {"reputation": 2261, "user_id": 8544123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f32b871be77d8c71efc294359b300367?s=128&d=identicon&r=PG&f=1", "display_name": "Acccumulation", "link": "https://stackoverflow.com/users/8544123/acccumulation"}, "reply_to_user": {"reputation": 333, "user_id": 3939805, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oJesG.jpg?s=128&g=1", "display_name": "Austin Howard", "link": "https://stackoverflow.com/users/3939805/austin-howard"}, "edited": false, "score": 0, "creation_date": 1570053908, "post_id": 58209767, "comment_id": 102797438, "body": "@AustinHoward There are cases where the iterator isn&#39;t used in the for-loop, but if your code only involves things that don&#39;t change, then you&#39;re going to get the same output each time."}], "tags": [], "owner": {"reputation": 2261, "user_id": 8544123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f32b871be77d8c71efc294359b300367?s=128&d=identicon&r=PG&f=1", "display_name": "Acccumulation", "link": "https://stackoverflow.com/users/8544123/acccumulation"}, "is_accepted": true, "score": 0, "last_activity_date": 1570052750, "creation_date": 1570052750, "answer_id": 58209767, "question_id": 58209549, "link": "https://stackoverflow.com/questions/58209549/looping-through-a-dictionary-grocery-lists/58209767#58209767", "title": "Looping through a dictionary (grocery lists)", "body": "<p>You have a for-loop over <code>i</code>, but you don't actually use <code>i</code> anywhere in the loop. All those <code>grocery_history[0]</code> should be <code>i</code>. You should also give it a more descriptive name, such as <code>item</code>. And you don't need to reset <code>item_total</code> to zero.</p>\n\n<pre><code>for item in grocery_history:\n  item_total = item['number']*item['price']\n  print(item['number'], \n        item['name'], ' @', '$',\n        item['price'], ' ea', '$', \n        item_total)\n  grand_total += item_total\n</code></pre>\n"}], "owner": {"reputation": 333, "user_id": 3939805, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oJesG.jpg?s=128&g=1", "display_name": "Austin Howard", "link": "https://stackoverflow.com/users/3939805/austin-howard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 306, "favorite_count": 0, "accepted_answer_id": 58209767, "answer_count": 1, "score": -1, "last_activity_date": 1570053239, "creation_date": 1570051410, "last_edit_date": 1570053239, "question_id": 58209549, "link": "https://stackoverflow.com/questions/58209549/looping-through-a-dictionary-grocery-lists", "title": "Looping through a dictionary (grocery lists)", "body": "<p>In my intro to scripting class the idea is to create a basic grocery list that takes input from the user in the form of (item, quantity, price). You store those in a dictionary, and then ask the user if they want to add more items to the list or quit. If they add more to the list, the script wants you to add it to a \"list\", where the dictionary entry is nested. When the user quits the program, it is supposed to print out something of this nature.</p>\n\n<pre><code>2 milk at $2.99 ea for a total of: x  \n1 eggs at 1.99 ea for a total of: x  \nGrand total: x\n</code></pre>\n\n<p>My problem is: I can get it to print out in this manner, however it will <strong>only</strong> print out the same line over and over again. I have checked that it does add the entries to the <code>grocery_history</code> list. They are there, but when I loop over it to print them out, it will only print out the first entry, for every item in the list.</p>\n\n<pre><code>i.e. \n2 milk at $2.99 ea for a total of: x  \n2 milk at $2.99 ea for a total of: x  \ngrand total: x\n</code></pre>\n\n<p>I am not very good with lists or dictionaries. They are one of the one things in coding that I'm struggling with.</p>\n\n<p>I've tried to increase the index value of the list, and it threw an error.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>#Task: Create the empty data structure\ngrocery_item = {}\n\ngrocery_history = []\n#Variable used to check if the while loop condition is met\nstop = 'go'\nchoice = ''\nwhile choice != 'q':\n    item_name = input('Item name: ')\n    quantity = int(input('Quantity purhcased: '))\n    cost = float(input('Price per item: '))\n    GL={'name':item_name, 'number': int(quantity), 'price':float(cost)}\n    grocery_item.update(GL)\n    print(GL)\n    grocery_history.append(GL)\n    choice = input(\"Would you like to enter another item?\\nType 'c' for continue or 'q' to quit:\\n\")\n    if choice == 'q':\n        #print(grocery_history)\n        break\n    elif choice =='c':\n        continue\nprint(grocery_history)\n\ngrand_total = 0\n\n#Define a 'for' loop.\n\ntotal = 0\nrows = len(grocery_history)\nfor i in grocery_history:\n    #Calculate the total cost for the grocery_item.\n    item_total = grocery_history[0]['number']*grocery_history[0]['price']\n    #Output the information for the grocery item to match this example:\n    print(grocery_history[0]['number'], grocery_history[0]['name'], ' @', '$',grocery_history[0]['price'], ' ea', '$', item_total)\n    #Add the item_total to the grand_total\n    grand_total += item_total\n    item_total = 0\n\n#Print the grand total\nprint(grand_total)\n</code></pre>\n"}, {"tags": ["python", "pip", "anaconda", "apt"], "comments": [{"owner": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "edited": false, "score": 0, "creation_date": 1570055208, "post_id": 58209488, "comment_id": 102797710, "body": "What is the error from tensorflow? Perhaps the nuclear solution is a little hasty."}], "answers": [{"comments": [{"owner": {"reputation": 285, "user_id": 7116820, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37578a478c4bddd95328db3f361a89e6?s=128&d=identicon&r=PG&f=1", "display_name": "lynn", "link": "https://stackoverflow.com/users/7116820/lynn"}, "edited": false, "score": 1, "creation_date": 1572987170, "post_id": 58209958, "comment_id": 103731464, "body": "Sorry for getting back to this so late -- this worked! I had to run it a few times (it didn&#39;t work for certain folders).  I&#39;m using Conda environments responsibly now and everything seems to be working properly. :)"}, {"owner": {"reputation": 1045, "user_id": 1598470, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/q5LGU.jpg?s=128&g=1", "display_name": "sortas", "link": "https://stackoverflow.com/users/1598470/sortas"}, "reply_to_user": {"reputation": 285, "user_id": 7116820, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37578a478c4bddd95328db3f361a89e6?s=128&d=identicon&r=PG&f=1", "display_name": "lynn", "link": "https://stackoverflow.com/users/7116820/lynn"}, "edited": false, "score": 0, "creation_date": 1573052888, "post_id": 58209958, "comment_id": 103756399, "body": "Glad to hear :)"}, {"owner": {"reputation": 81, "user_id": 2892074, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03c9e5a9bb94cfe89baea42a32475a14?s=128&d=identicon&r=PG&f=1", "display_name": "ok123jump", "link": "https://stackoverflow.com/users/2892074/ok123jump"}, "edited": false, "score": 3, "creation_date": 1602664435, "post_id": 58209958, "comment_id": 113789178, "body": "<b>DO NOT PURGE YOUR PYTHON FILES</b> This will wreck your system. I just tested it out on a VM and there is <b>no safe way to purge your python installation</b>."}], "tags": [], "owner": {"reputation": 1045, "user_id": 1598470, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/q5LGU.jpg?s=128&g=1", "display_name": "sortas", "link": "https://stackoverflow.com/users/1598470/sortas"}, "is_accepted": true, "score": 3, "last_activity_date": 1572464284, "last_edit_date": 1572464284, "creation_date": 1570054140, "answer_id": 58209958, "question_id": 58209488, "link": "https://stackoverflow.com/questions/58209488/how-do-i-completely-clean-up-or-reset-a-python-installation-on-ubuntu/58209958#58209958", "title": "How do I completely clean-up or reset a Python installation on Ubuntu", "body": "<p>You can try <code>sudo apt purge python-pip python-dev</code>, or <code>python3</code> and <code>python3-pip</code> if you're using Python 3. This must remove all files/folders created by the installed packages. But I'm not really sure you need to do it. </p>\n\n<p>The better solution is just to uninstall all pip packages, like <code>pip freeze | xargs pip uninstall -y</code>. Just to be sure you can even remove pip folder <code>/usr/lib/python2.7/site-packages</code> manually (or similar folder for Python 3).</p>\n"}, {"comments": [{"owner": {"reputation": 304, "user_id": 5199976, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d1f387524abf1e30b004e5da244792f9?s=128&d=identicon&r=PG&f=1", "display_name": "Bryant", "link": "https://stackoverflow.com/users/5199976/bryant"}, "edited": false, "score": 2, "creation_date": 1603773031, "post_id": 64340720, "comment_id": 114135302, "body": "Ohh man, this gave me a good laugh. Mostly because you called your system &quot;doo-doo&quot;. I&#39;m 32, what is wrong with me, I can&#39;t stop rotfl."}, {"owner": {"reputation": 141, "user_id": 2131621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ndqnx.jpg?s=128&g=1", "display_name": "Jay", "link": "https://stackoverflow.com/users/2131621/jay"}, "reply_to_user": {"reputation": 304, "user_id": 5199976, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d1f387524abf1e30b004e5da244792f9?s=128&d=identicon&r=PG&f=1", "display_name": "Bryant", "link": "https://stackoverflow.com/users/5199976/bryant"}, "edited": false, "score": 0, "creation_date": 1603817138, "post_id": 64340720, "comment_id": 114154534, "body": "Genuinely glad you got a laugh out of it @Bryant"}, {"owner": {"reputation": 9209, "user_id": 455322, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/a08eee5080a1750369fc20fe332bcea0?s=128&d=identicon&r=PG", "display_name": "Les", "link": "https://stackoverflow.com/users/455322/les"}, "edited": false, "score": 1, "creation_date": 1613655530, "post_id": 64340720, "comment_id": 117146122, "body": "Glad you got it back.  Thanks for the warning."}], "tags": [], "owner": {"reputation": 141, "user_id": 2131621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ndqnx.jpg?s=128&g=1", "display_name": "Jay", "link": "https://stackoverflow.com/users/2131621/jay"}, "is_accepted": false, "score": 8, "last_activity_date": 1602750221, "last_edit_date": 1602750221, "creation_date": 1602612217, "answer_id": 64340720, "question_id": 58209488, "link": "https://stackoverflow.com/questions/58209488/how-do-i-completely-clean-up-or-reset-a-python-installation-on-ubuntu/64340720#64340720", "title": "How do I completely clean-up or reset a Python installation on Ubuntu", "body": "<p>Helpful and cautionary tale, be a good idea not to delete it I think... I'll assume it was the profanity that got it deleted so I've edited it out.</p>\n<p>!!!! WARNING !!!!</p>\n<p>If you're like me and you think ah shur I'll do an 'apt list --installed | grep -i python' and then 'apt purge -y' all that crap, well, maybe don't.</p>\n<p>Now my entire system is doo-doo. It all seemed fine until I rebooted and now there is no network connection, netplan and a bunch of other stuff is just gone. No recovery possible.</p>\n<p>Actually it looks like it was an 'apt autoremove' AFTER I'd done the above that actually removed netplan.</p>\n<p>And all because I wanted to remove multiple python versions to get over those gosh darn import issues and messin' around with pip and pip3 and pip3432432 and what gosh flippin' version of python is tied to what oody doody version of pip...</p>\n<p>UPDATE - This video helped me recover me files <a href=\"https://youtu.be/tGIPeWkPkMc\" rel=\"noreferrer\">https://youtu.be/tGIPeWkPkMc</a></p>\n"}, {"tags": [], "owner": {"reputation": 9209, "user_id": 455322, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/a08eee5080a1750369fc20fe332bcea0?s=128&d=identicon&r=PG", "display_name": "Les", "link": "https://stackoverflow.com/users/455322/les"}, "is_accepted": false, "score": 1, "last_activity_date": 1613656785, "creation_date": 1613656785, "answer_id": 66261511, "question_id": 58209488, "link": "https://stackoverflow.com/questions/58209488/how-do-i-completely-clean-up-or-reset-a-python-installation-on-ubuntu/66261511#66261511", "title": "How do I completely clean-up or reset a Python installation on Ubuntu", "body": "<p>(Extending @jay 's warning)</p>\n<p>&quot;Out of the Box&quot;, later Ubuntu versions have a system dependency on Python(3).  For instance, my Ubuntu 20.04 runs &quot;networkd-dispather&quot; and &quot;unattended-upgrade-shutdown&quot;.  I've seen similar on various Cloud instances.  Kali 2020 uses python to run a printer daemon.  Check your system first.  Or even try it on a VM similar to your system.</p>\n<p>Try a quick check before doing something drastic.</p>\n<pre><code>ps aux | grep python\n</code></pre>\n<p>That will give you an idea if services are being run by Python.  Frankly, I like the <code>pip3 freeze</code> to list the installed packages and cleanup from that list, like @sortas suggests in the second half of his answer.</p>\n"}], "owner": {"reputation": 285, "user_id": 7116820, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37578a478c4bddd95328db3f361a89e6?s=128&d=identicon&r=PG&f=1", "display_name": "lynn", "link": "https://stackoverflow.com/users/7116820/lynn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9376, "favorite_count": 1, "accepted_answer_id": 58209958, "answer_count": 3, "score": 5, "last_activity_date": 1613656785, "creation_date": 1570051036, "question_id": 58209488, "link": "https://stackoverflow.com/questions/58209488/how-do-i-completely-clean-up-or-reset-a-python-installation-on-ubuntu", "title": "How do I completely clean-up or reset a Python installation on Ubuntu", "body": "<p>Package management and juggling pip, anaconda, PPAs, and virtual-environments is difficult. Somewhere in my constellation of dependencies, things are broken. I'm on Ubuntu 18.04. As far as I know, I cannot fix these dependencies by hand.</p>\n\n<p>The problem, for what it's worth: I've been unable to use tensorflow for a few months. Every time I try to fix it, even uninstalling and reinstalling everything to the best of my knowledge, things still don't work. After sinking enough hours, I'm looking for a \"nuclear solution\".</p>\n\n<p>What I would like to do is cleanly remove everything except Python and any Python packages my system might require, so that I can start fresh (and hopefully do things <em>properly</em>.)</p>\n\n<p>So, my question: <strong>How can I systematically clean up or remove my Python installation?</strong> I want to wipe everything and start anew. Does there exist a systematic guide, or a smart and reputable script that does this?</p>\n"}, {"tags": ["python", "gimp", "python-fu"], "comments": [{"owner": {"reputation": 10593, "user_id": 4621513, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/uCfJK.png?s=128&g=1", "display_name": "mkrieger1", "link": "https://stackoverflow.com/users/4621513/mkrieger1"}, "edited": false, "score": 0, "creation_date": 1570051965, "post_id": 58209469, "comment_id": 102796951, "body": "Don&#39;t you just overwrite the same file each time, so only the last save will be in effect anyway?"}, {"owner": {"reputation": 10593, "user_id": 4621513, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/uCfJK.png?s=128&g=1", "display_name": "mkrieger1", "link": "https://stackoverflow.com/users/4621513/mkrieger1"}, "edited": false, "score": 0, "creation_date": 1570052035, "post_id": 58209469, "comment_id": 102796973, "body": "Also please fix the indentation of the code in the post. It&#39;s unclear which parts belong to the <code>def dynamic_text_replace_plugin</code> statement."}, {"owner": {"reputation": 3042, "user_id": 107691, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/c8b22400d20cd6f0550596f9906f9c4a?s=128&d=identicon&r=PG", "display_name": "Pete Duncanson", "link": "https://stackoverflow.com/users/107691/pete-duncanson"}, "reply_to_user": {"reputation": 10593, "user_id": 4621513, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/uCfJK.png?s=128&g=1", "display_name": "mkrieger1", "link": "https://stackoverflow.com/users/4621513/mkrieger1"}, "edited": false, "score": 0, "creation_date": 1570053283, "post_id": 58209469, "comment_id": 102797293, "body": "Well yes it does just that but seems a bit wasteful. I mean it works but seemed excessive. In my mind it should be able to keep the layers in memory and then just write them all down when I call gimp_xcf_save but that needs a layer to save so I&#39;ve been doing it for every layer I touch. It works but feels wrong."}], "answers": [{"comments": [{"owner": {"reputation": 3042, "user_id": 107691, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/c8b22400d20cd6f0550596f9906f9c4a?s=128&d=identicon&r=PG", "display_name": "Pete Duncanson", "link": "https://stackoverflow.com/users/107691/pete-duncanson"}, "edited": false, "score": 0, "creation_date": 1587467927, "post_id": 58214159, "comment_id": 108517358, "body": "Finally got around to implementing this to try it and it works! Thank you :)"}], "tags": [], "owner": {"reputation": 5658, "user_id": 6378557, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/GVoNt.png?s=128&g=1", "display_name": "xenoid", "link": "https://stackoverflow.com/users/6378557/xenoid"}, "is_accepted": true, "score": 0, "last_activity_date": 1570094115, "last_edit_date": 1570094115, "creation_date": 1570087210, "answer_id": 58214159, "question_id": 58209469, "link": "https://stackoverflow.com/questions/58209469/how-to-save-multiple-layer-modifications-in-one-save/58214159#58214159", "title": "How to save multiple layer modifications in one save", "body": "<p>AFAIK the \"drawable\" parameter is ignored when you save to multi-layer formats such as XCF. So give it any image layer or <code>None</code> and save just once:</p>\n\n<pre><code>pdb.gimp_xcf_save(0, image, None,'/tmp/foo.xcf','/tmp/foo.xcf')\n</code></pre>\n"}], "owner": {"reputation": 3042, "user_id": 107691, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/c8b22400d20cd6f0550596f9906f9c4a?s=128&d=identicon&r=PG", "display_name": "Pete Duncanson", "link": "https://stackoverflow.com/users/107691/pete-duncanson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 58214159, "answer_count": 1, "score": -1, "last_activity_date": 1570094115, "creation_date": 1570050958, "last_edit_date": 1570067291, "question_id": 58209469, "link": "https://stackoverflow.com/questions/58209469/how-to-save-multiple-layer-modifications-in-one-save", "title": "How to save multiple layer modifications in one save", "body": "<p>I have a python script that finds and updates multiple text layers in an existing GIMP file. I want to save the whole file out as a copy. However the only way I can seem to find that documented using pdb.gimp_xcf_save requires I pass in a drawable (for which I'm using the current text layer) to save the file as a xcf. So I'm repeating this call for each layer as I loop through them. This seems wasteful and surely there must be a way around this to just do it in one method but I've not be able to find it.</p>\n\n<pre><code>def dynamic_text_replace_plugin(timg, tdrawable, pathToXcf, textToReplace, saveAsJpg):\n    texts = textToReplace.split('~')\n    myImage = pdb.gimp_xcf_load(1, pathToXcf, pathToXcf)\n\n    textCount = 0\n    for newText in texts:\n        textCount = textCount + 1\n        textLabel = \"TEXT\" + str(textCount)\n        myLayer = pdb.gimp_image_get_layer_by_name(myImage, textLabel)\n        sourceText = pdb.gimp_text_layer_get_text(myLayer)\n        textToReplace = sourceText.replace(textLabel, newText)\n        pdb.gimp_text_layer_set_text(myLayer, textToReplace)\n        # Not sure if I can do this once or if it has to be for every layer?\n        saveAsPath = pathToXcf.replace(\".xcf\", \"_replaced.xcf\")\n        pdb.gimp_xcf_save(1, myImage, myLayer, saveAsPath, saveAsPath)\n\n    if (saveAsJpg):\n        pathToJpg = pathToXcf.replace(\".xcf\", \".jpg\")\n        myImage.flatten()\n        pdb.gimp_file_save(myImage, myImage.layers[0], pathToJpg, '?')\n\n    # Clean up memory\n    pdb.gimp_image_delete(myImage)\n</code></pre>\n"}, {"tags": ["python", "django"], "answers": [{"tags": [], "owner": {"reputation": 8696, "user_id": 10746224, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/znUL5.jpg?s=128&g=1", "display_name": "Lord Elrond", "link": "https://stackoverflow.com/users/10746224/lord-elrond"}, "is_accepted": false, "score": 1, "last_activity_date": 1570076518, "creation_date": 1570076518, "answer_id": 58212278, "question_id": 58209460, "link": "https://stackoverflow.com/questions/58209460/model-inheritance-benefits-of-explicit-onetoonefield-vs-implicit-multi-table-in/58212278#58212278", "title": "Model inheritance: benefits of explicit OneToOneField vs implicit multi-table inheritance OneToOneField", "body": "<p>I'd be a bit skeptical of the conclusion that <em>multi-table inheritance causes performance issues</em> for a variety reasons: </p>\n\n<ul>\n<li>That question is 5 years old, so the answers might be outdated.  </li>\n<li><a href=\"https://stackoverflow.com/a/37856348/10746224\">this</a> answer contradicts that conclusion</li>\n<li>The only explanations given for <em>why</em> model inheritance is bad are that it <em>requires LEFT JOINs</em> or \n\n<blockquote>\n  <p>The reason using multi-table inheritance is inefficient is because it generates an extra table for the base model, and therefore extra JOINs to access those fields.</p>\n</blockquote></li>\n</ul>\n\n<p>The above statement may be true, but it doesn't explain <em>how</em> explicit <code>OneToOneField</code>s are better, which is the main premise of user193130's <a href=\"https://stackoverflow.com/a/23547494/10746224\">answer</a>.</p>\n\n<p>The real question you should ask yourself is, <em>should I join table x and table y?</em>, which, as turns out, is an extremely complicated question.</p>\n\n<p>Here is a list of resources related to this topic, most of which support my skepticism:</p>\n\n<ul>\n<li><p>a comment on <a href=\"https://stackoverflow.com/a/23549428/10746224\">dani herrera's answer</a>:</p>\n\n<blockquote>\n  <p>\"Q: Why are explicit OneToOneFields better? A: You can access directly to related model without left joins.\" this is somewhat misleading. I think you need joins anyway. The difference is whether you do it explicitly or implicitly. Please correct me if I'm wrong</p>\n</blockquote>\n\n<p>to which dani herrara replies:</p>\n\n<blockquote>\n  <p>@eugene, you are right. Be free to improve answer. Thanks!</p>\n</blockquote></li>\n<li>The last lines of <a href=\"https://stackoverflow.com/a/7760919/10746224\">Chris Pratt's answer</a>:\n\n<blockquote>\n  <p>Using separate models (and tables) only makes sense for the purposes of modularization -- such that you subclass Project to create a specific kind of project that requires additional fields but still needs all the fields of a generic Project.</p>\n</blockquote></li>\n<li>Comment in <a href=\"https://stackoverflow.com/a/7760971/10746224\">Chris Pratt's other answer</a>:\n\n<blockquote>\n  <p>It depends on the situation. If there's a clear is-a relationship going on. Like class Dog(Animal), then you should use MTI (If it's called for. Some other form of inheritance may be more appropriate). But, in the case of something like auth.User, a UserProfile is not really a type of User, so OneToOneField makes more sense. However, the BIG caveat there is that UserProfile is used because User cannot be altered. Otherwise, simply adding additional fields to User would be more appropriate</p>\n</blockquote></li>\n</ul>\n"}], "owner": {"reputation": 2983, "user_id": 8629753, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RYMtk.jpg?s=128&g=1", "display_name": "adder", "link": "https://stackoverflow.com/users/8629753/adder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 196, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1570076518, "creation_date": 1570050924, "question_id": 58209460, "link": "https://stackoverflow.com/questions/58209460/model-inheritance-benefits-of-explicit-onetoonefield-vs-implicit-multi-table-in", "title": "Model inheritance: benefits of explicit OneToOneField vs implicit multi-table inheritance OneToOneField", "body": "<p>I read <a href=\"https://stackoverflow.com/questions/23466577/should-i-avoid-multi-table-concrete-inheritance-in-django-by-any-means\">here</a> that multi-table inheritance can cause performance issues, and instead explicit OneToOneField is recommended. </p>\n\n<p>Here is my situation:</p>\n\n<pre><code>class Product(models.Model):\n    title = models.CharField(max_length=200)\n    description = models.TextField()\n    price = models.DecimalField(decimal_places=2, max_digits=10)\n    category = models.ForeignKey('Category', on_delete=models.CASCADE, blank=False)\n\n\nclass Book(Product):\n    publisher = models.CharField(max_length=50)\n    author = models.CharField(max_length=50)\n    isbn = models.CharField(max_length=50)\n\n\nclass Shoes(Product):\n    size = models.PositiveSmallIntegerField()\n    colour = models.CharField(max_length=20, choices=[('black', 'Black'), ('white', 'White')])    \n</code></pre>\n\n<p>I don't understand why would explicit OneToOneField bring performance gains, when multi-table inheritance is <a href=\"https://docs.djangoproject.com/en/2.2/topics/db/models/#multi-table-inheritance\" rel=\"nofollow noreferrer\">implemented in exactly the same way</a>:</p>\n\n<pre><code>place_ptr = models.OneToOneField(\n    Place, on_delete=models.CASCADE,\n    parent_link=True,\n)\n</code></pre>\n\n<p>If this is true despite everything, I would like to know how could I alter my models so they use explicit OneToOneField. So, if I create a Book instance, <code>Product.objects.all()</code> should retrieve that instance of Book, too.</p>\n"}, {"tags": ["python", "pyqt5"], "answers": [{"tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": false, "score": 0, "last_activity_date": 1570051453, "creation_date": 1570051453, "answer_id": 58209560, "question_id": 58209453, "link": "https://stackoverflow.com/questions/58209453/get-name-of-the-qimage-from-another-function/58209560#58209560", "title": "Get name of the QImage from another function", "body": "<p>It seems that you lack certain basic knowledge of python, for example in a function you can only get the object that returns the function, and in the case of a method any class attribute. But in your case \"filename\" is not, so the solution is that the \"open\" method returns the filename, also assuming that \"constrict\" is also another method of the same class so you must access through \"self\":</p>\n\n<pre><code>def open(self):\n    options = QFileDialog.Options()\n    # fileName = QFileDialog.getOpenFileName(self, \"Open File\", QDir.currentPath())\n    fileName, _ = QFileDialog.getOpenFileName(self, 'QFileDialog.getOpenFileName()', '',\n                                          'Images (*.png *.jpeg *.jpg *.bmp *.gif)', options=options)\n    if fileName:\n        image = QImage(fileName)\n        if image.isNull():\n            QMessageBox.information(self, \"Image Viewer\", \"Cannot load %s.\" % fileName)\n    <b>return filename</b>\n\ndef contraste(self):\n    # Function to adjust gamma\n    i, okPressed = QInputDialog.getDouble(self, \"Get integer\",\"Percentage:\",  0, 0, 3.5, 1)\n    if okPressed:\n        print(i)\n\n    <b>image_name = self.open() #this is what i tried but not working\n    if image_name:\n        img = cv2.imread(image_name)\n        nueva = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)\n        nueva2 = imu.adjust_gamma(nueva,i)\n        cv2.imshow(\"Gray\", nueva)\n        cv2.imshow(\"Gamma correction \", nueva2)</b></code></pre>\n"}], "owner": {"reputation": 1, "user_id": 12156002, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDBQivbvSZKgCyebJYLdAbIPpyPKIcAZn89JnY=k-s128", "display_name": "Andres Guzman", "link": "https://stackoverflow.com/users/12156002/andres-guzman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 27, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1570051453, "creation_date": 1570050899, "question_id": 58209453, "link": "https://stackoverflow.com/questions/58209453/get-name-of-the-qimage-from-another-function", "title": "Get name of the QImage from another function", "body": "<p>i have a question, i'm trying to get the name of a image loaded with QImage from another function to process the image with opencv, how can i do that?</p>\n\n<p>First i tried to get the name like a class variable</p>\n\n<p>Here i loaded the image for set it on imagelabel</p>\n\n<pre><code>    def open(self):\n        options = QFileDialog.Options()\n       #fileName = QFileDialog.getOpenFileName(self, \"Open File\", QDir.currentPath())\n        fileName, _ = QFileDialog.getOpenFileName(self, 'QFileDialog.getOpenFileName()', '',\n                                              'Images (*.png *.jpeg *.jpg *.bmp *.gif)', options=options)\n        if fileName:\n            image = QImage(fileName)\n            if image.isNull():\n                QMessageBox.information(self, \"Image Viewer\", \"Cannot load %s.\" % fileName)\n                return\n</code></pre>\n\n<p>then i need to get fileName to open the image but now with opencv</p>\n\n<pre><code>    def contraste(self):\n        #Function to adjust gamma\n        i, okPressed = QInputDialog.getDouble(self, \"Get integer\",\"Percentage:\",  0, 0, 3.5, 1)\n        if okPressed:\n            print(i)\n\n        image_name = open.fileName #this is what i tried but not working\n        img = cv2.imread(image_name)\n        nueva = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)\n        nueva2 = imu.adjust_gamma(nueva,i)\n        cv2.imshow(\"Gray\", nueva)\n        cv2.imshow(\"Gamma correction \", nueva2)\n</code></pre>\n"}, {"tags": ["python", "multithreading", "ffmpeg", "python-imageio"], "answers": [{"tags": [], "owner": {"reputation": 362, "user_id": 5631947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fd32ad35b8622b4aa1b027379b76edd?s=128&d=identicon&r=PG&f=1", "display_name": "JavNoor", "link": "https://stackoverflow.com/users/5631947/javnoor"}, "is_accepted": false, "score": -1, "last_activity_date": 1570131682, "creation_date": 1570131682, "answer_id": 58225877, "question_id": 58209439, "link": "https://stackoverflow.com/questions/58209439/fatal-python-error-could-not-acquire-lock-for-io-bufferedreader-name-8-at-in/58225877#58225877", "title": "Fatal Python error: could not acquire lock for &lt;_io.BufferedReader name=8&gt; at interpreter shutdown, possibly due to daemon threads", "body": "<p>The following seems to work, although I don't know why:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import imageio\nimport copy\n\nclass vidrdf:\n    def __init__(self, vidfile):\n        vid = imageio.get_reader(vidfile,  'ffmpeg')\n        self.vid = copy.copy(vid)\n\n\nvidfile = 'movie.mov'\nrdfobj = vidrdf(vidfile)\n</code></pre>\n"}], "owner": {"reputation": 362, "user_id": 5631947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fd32ad35b8622b4aa1b027379b76edd?s=128&d=identicon&r=PG&f=1", "display_name": "JavNoor", "link": "https://stackoverflow.com/users/5631947/javnoor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 366, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1570131682, "creation_date": 1570050813, "question_id": 58209439, "link": "https://stackoverflow.com/questions/58209439/fatal-python-error-could-not-acquire-lock-for-io-bufferedreader-name-8-at-in", "title": "Fatal Python error: could not acquire lock for &lt;_io.BufferedReader name=8&gt; at interpreter shutdown, possibly due to daemon threads", "body": "<p>Running the following:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import imageio\n\nclass vidrdf:\n    def __init__(self, vidfile):\n        self.vid = imageio.get_reader(vidfile,  'ffmpeg')\n\nvidfile = 'movie.mov'\nrdfobj = vidrdf(vidfile)\n</code></pre>\n\n<p>I get:</p>\n\n<pre><code>Fatal Python error: could not acquire lock for &lt;_io.BufferedReader name=8&gt; at interpreter shutdown, possibly due to daemon threads\n\nThread 0x00007fd2dc2a8700 (most recent call first):\n  File \u201c/path/miniconda3/envs/flower/lib/python3.7/site-packages/imageio_ffmpeg/_parsing.py\", line 61 in run\n  File \"miniconda3/envs/flower/lib/python3.7/threading.py\", line 926 in _bootstrap_inner\n  File \u201c/path/miniconda3/envs/flower/lib/python3.7/threading.py\", line 890 in _bootstrap\n\nCurrent thread 0x00007fd2f0bb9700 (most recent call first):\n  File \u201c/path/miniconda3/envs/flower/lib/python3.7/subprocess.py\", line 1704 in _communicate\n  File \u201c/path/miniconda3/envs/flower/lib/python3.7/subprocess.py\", line 939 in communicate\n  File \u201c/path/miniconda3/envs/flower/lib/python3.7/site-packages/imageio_ffmpeg/_io.py\", line 193 in read_frames\n  File \u201c/path/miniconda3/envs/flower/lib/python3.7/site-packages/imageio/plugins/ffmpeg.py\", line 342 in _close\n  File \u201c/path/miniconda3/envs/flower/lib/python3.7/site-packages/imageio/core/format.py\", line 252 in close\n  File \u201c/path/miniconda3/envs/flower/lib/python3.7/site-packages/imageio/core/format.py\", line 241 in __del__\nAborted (core dumped)\n</code></pre>\n\n<p>It doesn't happen if I try:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import imageio\n\nclass vidrdf:\n    def __init__(self, vidfile):\n        self.vid = imageio.get_reader(vidfile,  'ffmpeg')\n\nvidfile = 'movie.mov'\nvidrdf(vidfile)\n</code></pre>\n\n<p>or </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import imageio\n\nclass vidrdf:\n    def __init__(self, vidfile):\n        vid = imageio.get_reader(vidfile,  'ffmpeg')\n\nvidfile = 'movie.mov'\nrdfobj = vidrdf(vidfile)\n</code></pre>\n\n<p>So this is clearly an issue with copying the object. I've searched about daemon threads, but since I'm using imageio directly I can't figure out why and how to resolve it. I would appreciate any recommendations.</p>\n"}, {"tags": ["python", "django"], "comments": [{"owner": {"reputation": 3885, "user_id": 652528, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/a580420b66f89e76e1fb9a368f785b3f?s=128&d=identicon&r=PG", "display_name": "geckos", "link": "https://stackoverflow.com/users/652528/geckos"}, "edited": false, "score": 1, "creation_date": 1570050678, "post_id": 58209385, "comment_id": 102796559, "body": "As a middle term I would go for bulk but use pages instead of <code>.all()</code>"}, {"owner": {"reputation": 26832, "user_id": 799163, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/QGcz9.jpg?s=128&g=1", "display_name": "RemcoGerlich", "link": "https://stackoverflow.com/users/799163/remcogerlich"}, "edited": false, "score": 0, "creation_date": 1570053234, "post_id": 58209385, "comment_id": 102797282, "body": "Another option would be to write a SQL query and run it directly, without pulling anything to the Python side."}], "answers": [{"tags": [], "owner": {"reputation": 64, "user_id": 7044970, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-wJXHjr6phBw/AAAAAAAAAAI/AAAAAAAAAdc/qm13FiJaQjs/photo.jpg?sz=128", "display_name": "Marcelo Duarte Fernandes", "link": "https://stackoverflow.com/users/7044970/marcelo-duarte-fernandes"}, "is_accepted": false, "score": 0, "last_activity_date": 1570054195, "creation_date": 1570054195, "answer_id": 58209973, "question_id": 58209385, "link": "https://stackoverflow.com/questions/58209385/django-is-this-data-migration-going-to-blow-the-server-memory/58209973#58209973", "title": "Django: is this data migration going to blow the server memory?", "body": "<p>1) Keep in mind that \"bulk_create\" won't trigger any signals.</p>\n\n<p>2) I'd rather execute your code in batches. You could use <code>iterator</code> for that: <a href=\"https://docs.djangoproject.com/en/2.2/ref/models/querysets/#iterator\" rel=\"nofollow noreferrer\">https://docs.djangoproject.com/en/2.2/ref/models/querysets/#iterator</a></p>\n\n<p>3) If you are worried that this will blow up anything in your server there's nothing wrong on waiting a second or two after you iterated over a big batch.</p>\n\n<p>4) Migrations are atomic by default\n<a href=\"https://docs.djangoproject.com/en/2.2/howto/writing-migrations/\" rel=\"nofollow noreferrer\">https://docs.djangoproject.com/en/2.2/howto/writing-migrations/</a></p>\n"}, {"tags": [], "owner": {"reputation": 76, "user_id": 8065825, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ezEBR.jpg?s=128&g=1", "display_name": "ovimunt", "link": "https://stackoverflow.com/users/8065825/ovimunt"}, "is_accepted": false, "score": 0, "last_activity_date": 1570544476, "creation_date": 1570544476, "answer_id": 58288287, "question_id": 58209385, "link": "https://stackoverflow.com/questions/58209385/django-is-this-data-migration-going-to-blow-the-server-memory/58288287#58288287", "title": "Django: is this data migration going to blow the server memory?", "body": "<p>Following the suggestions from gecko and Marcelo, this is what I did in the end and it works perfectly. </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>PAGE_SIZE_CREATE = 500\n\ndef migrate_data(apps, schema_editor):\n    UserPreferences = apps.get_model(\"authentication\", \"UserPreferences\")\n    UserPreferencesOld = apps.get_model(\"authentication\", \"UserPreferencesOld\")\n\n    paginator = Paginator(UserPreferencesOld.objects.all(), PAGE_SIZE_CREATE)\n\n    for p in paginator.page_range:\n        UserPreferences.objects.bulk_create(\n            [\n                UserPreferences(\n                    date_created=user_prefs_old.date_modified,\n                    date_modified=user_prefs_old.date_modified,\n                    email_notifications=user_prefs_old.email_notifications,\n                    show_message_deadline_summary=(\n                        user_prefs_old.show_message_deadline_summary\n                    ),\n                    user=user_prefs_old.user,\n                )\n                for user_prefs_old in paginator.page(p)\n            ]\n        )\n</code></pre>\n"}], "owner": {"reputation": 76, "user_id": 8065825, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ezEBR.jpg?s=128&g=1", "display_name": "ovimunt", "link": "https://stackoverflow.com/users/8065825/ovimunt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1570544476, "creation_date": 1570050483, "question_id": 58209385, "link": "https://stackoverflow.com/questions/58209385/django-is-this-data-migration-going-to-blow-the-server-memory", "title": "Django: is this data migration going to blow the server memory?", "body": "<p>I'm trying to migrate the data from an old table to a new table and I'm not sure what the best way would be. </p>\n\n<p>There's the simple solution of creating every object:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def migrate_data(apps, schema_editor):\n    UserPreferences = apps.get_model(\"authentication\", \"UserPreferences\")\n    UserPreferencesOld = apps.get_model(\"authentication\", \"UserPreferencesOld\")\n\n    for user_preferences_old in UserPreferencesOld.objects.all():\n        user_preferences = UserPreferences(\n            date_modified=user_preferences_old.date_modified,\n            email_notifications=user_preferences_old.email_notifications,\n            show_message_deadline_summary=(\n                user_preferences_old.show_message_deadline_summary\n            ),\n            user=user_preferences_old.user,\n        )\n        user_preferences.save()\n</code></pre>\n\n<p>And the bulk create solution:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def migrate_data(apps, schema_editor):\n    UserPreferences = apps.get_model(\"authentication\", \"UserPreferences\")\n    UserPreferencesOld = apps.get_model(\"authentication\", \"UserPreferencesOld\")\n\n    UserPreferences.objects.bulk_create(\n        [\n            UserPreferences(\n                date_modified=user_preferences_old.date_modified,\n                email_notifications=user_preferences_old.email_notifications,\n                show_message_deadline_summary=(\n                    user_preferences_old.show_message_deadline_summary\n                ),\n                user=user_preferences_old.user,\n            )\n            for user_preferences_old in UserPreferencesOld.objects.all()\n        ]\n    )\n</code></pre>\n\n<p>The table I need to migrate has tens of thousands of entries and I'm afraid that the first option will take forever, making tens of thousands of requests to the database, while the second option will blow the memory on the server.</p>\n\n<p>Any suggestions on what would be the better option? Thanks!</p>\n"}, {"tags": ["python", "python-3.x", "numpy", "numpy-ndarray"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 3, "creation_date": 1570050581, "post_id": 58209384, "comment_id": 102796522, "body": "Because there is only one list: you did <i>not</i> make five copies of the list, you made a list that contains the <i>same</i> sublist five times."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1570050789, "post_id": 58209384, "comment_id": 102796598, "body": "Note, you are not using <code>numpy-ndarray</code> objects here, but a Python list that contains other lists."}], "owner": {"reputation": 349, "user_id": 3656142, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001515273674/picture?type=large", "display_name": "user3656142", "link": "https://stackoverflow.com/users/3656142/user3656142"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 27, "favorite_count": 0, "closed_date": 1570050591, "answer_count": 0, "score": 0, "last_activity_date": 1570050478, "creation_date": 1570050478, "question_id": 58209384, "link": "https://stackoverflow.com/questions/58209384/why-is-the-assignment-operator-affecting-all-elements", "closed_reason": "Duplicate", "title": "Why is the assignment operator affecting all elements?", "body": "<pre><code>waiting = [[0]]* 5 # we can assume the waiting to contain 5 lists\nprint((np.shape(waiting))) # (5, 1)\nwaiting[0][0] = waiting[0][0] + (0.72) # only the value at the first list should get changed\nprint(waiting) # [[0.72], [0.72], [0.72], [0.72], [0.72]] when I expected only the first list's 0 \n                # to become 0.72\n\n</code></pre>\n\n<p>As explained in the comments, why is all of the array getting affected by the 3rd line <code>waiting[0][0] = waiting[0][0] + (0.72)</code></p>\n"}, {"tags": ["python", "oauth", "oauth-2.0", "azure-active-directory"], "answers": [{"comments": [{"owner": {"reputation": 181, "user_id": 10072838, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-QPYmgCD95UE/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7pgmu5aX5dlvz-wRbvn1cz7XdMxkA/mo/photo.jpg?sz=128", "display_name": "Roshan Joe Vincent", "link": "https://stackoverflow.com/users/10072838/roshan-joe-vincent"}, "edited": false, "score": 0, "creation_date": 1570106597, "post_id": 58211522, "comment_id": 102814607, "body": "I tried this. It does work, however even if I add some random values to the token it still sends me back those headers. Any reason why this is happening?"}, {"owner": {"reputation": 30516, "user_id": 9455659, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Albsq.jpg?s=128&g=1", "display_name": "Joy Wang", "link": "https://stackoverflow.com/users/9455659/joy-wang"}, "reply_to_user": {"reputation": 181, "user_id": 10072838, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-QPYmgCD95UE/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7pgmu5aX5dlvz-wRbvn1cz7XdMxkA/mo/photo.jpg?sz=128", "display_name": "Roshan Joe Vincent", "link": "https://stackoverflow.com/users/10072838/roshan-joe-vincent"}, "edited": false, "score": 0, "creation_date": 1570107741, "post_id": 58211522, "comment_id": 102815218, "body": "@RoshanJoeVincent How did you do? Maybe this issue?<a href=\"https://stackoverflow.com/questions/57869775/access-token-validation-in-azure-ad-authentication/57870035#57870035\" title=\"access token validation in azure ad authentication\">stackoverflow.com/questions/57869775/&hellip;</a>"}], "tags": [], "owner": {"reputation": 30516, "user_id": 9455659, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Albsq.jpg?s=128&g=1", "display_name": "Joy Wang", "link": "https://stackoverflow.com/users/9455659/joy-wang"}, "is_accepted": false, "score": 0, "last_activity_date": 1570069313, "creation_date": 1570069313, "answer_id": 58211522, "question_id": 58209299, "link": "https://stackoverflow.com/questions/58209299/how-can-i-get-an-id-token-while-validating-using-username-and-password/58211522#58211522", "title": "How Can I get an ID Token while validating using Username and Password?", "body": "<p>No need to get the <code>ID_TOKEN</code>, try the code as below.</p>\n\n<pre><code>import adal\nimport jwt\n\nauth_context = adal.AuthenticationContext(\"https://login.microsoftonline.com/{{tenant_id}}\")\ntoken_response = auth_context.acquire_token_with_username_password(\"https://management.core.windows.net/\", username, password, client_id)\n\ntoken_header = jwt.get_unverified_header(token_response['accessToken'])\n</code></pre>\n\n<p>For more details, you could refer to this similar <a href=\"https://stackoverflow.com/questions/51964173/how-to-validate-token-in-azure-ad-with-python\">issue</a> and this <a href=\"https://docs.microsoft.com/en-us/azure/active-directory/develop/access-tokens#validating-tokens\" rel=\"nofollow noreferrer\">doc</a>.</p>\n"}], "owner": {"reputation": 181, "user_id": 10072838, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-QPYmgCD95UE/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7pgmu5aX5dlvz-wRbvn1cz7XdMxkA/mo/photo.jpg?sz=128", "display_name": "Roshan Joe Vincent", "link": "https://stackoverflow.com/users/10072838/roshan-joe-vincent"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 249, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1570069313, "creation_date": 1570050060, "question_id": 58209299, "link": "https://stackoverflow.com/questions/58209299/how-can-i-get-an-id-token-while-validating-using-username-and-password", "title": "How Can I get an ID Token while validating using Username and Password?", "body": "<p>I am using Python ADAL library to Authenticate a user using Azure Active Directory. I successfully receive the access token post authentication. Now, I want to verify the validity of the access token. I need the ID_TOKEN in this case. How do I get it?</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import adal\nauth_context = adal.AuthenticationContext(\"https://login.microsoftonline.com/{{tenant_id}}\")\ntoken_response = auth_context.acquire_token_with_username_password(\"https://management.core.windows.net/\", username, password, client_id)        \n</code></pre>\n\n<p>In the token response, I get the access_token and refresh_token but I do not receive the id_token. Following a similar question, <a href=\"https://stackoverflow.com/questions/43142716/how-to-verify-jwt-id-token-produced-by-ms-azure-ad#\">How to verify JWT id_token produced by MS Azure AD?</a> I used the code to validate the access token but I need the ID_TOKEN.</p>\n\n<p>Any thoughts on getting this would be great.</p>\n"}, {"tags": ["python", "docker", "gitlab-ci", "gitlab-ce"], "comments": [{"owner": {"reputation": 281, "user_id": 1618233, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6db8f8d1ac35072814cd79e645165228?s=128&d=identicon&r=PG", "display_name": "jshwlkr", "link": "https://stackoverflow.com/users/1618233/jshwlkr"}, "edited": false, "score": 0, "creation_date": 1570219611, "post_id": 58209290, "comment_id": 102857384, "body": "The raw output of the trufflehog command looks like this:      [32;1m$ trufflehog --entropy true &quot;file://$PWD&quot;[0;m section_end:1570219434:build_script [0Ksection_start:1570219434:after_script [0Ksection_end:1570219435:after_script [0Ksection_start:1570219435:archive_cache [0Ksection_end:1570219437:archive_cache [0Ksection_start:1570219437:upload_artifacts_on_success [0Ksection_end:1570219438:upload_artifacts_on_success [0K[32;1mJob succeeded [0;m"}], "answers": [{"comments": [{"owner": {"reputation": 281, "user_id": 1618233, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6db8f8d1ac35072814cd79e645165228?s=128&d=identicon&r=PG", "display_name": "jshwlkr", "link": "https://stackoverflow.com/users/1618233/jshwlkr"}, "edited": false, "score": 1, "creation_date": 1570455345, "post_id": 58260625, "comment_id": 102908351, "body": "In the end I just couldn&#39;t get the file option to work, so I gave in and went the git route. Thanks!"}], "tags": [], "owner": {"reputation": 2556, "user_id": 3617531, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xWKNp.jpg?s=128&g=1", "display_name": "Alejandro Teixeira Mu&#241;oz", "link": "https://stackoverflow.com/users/3617531/alejandro-teixeira-mu%c3%b1oz"}, "is_accepted": true, "score": 2, "last_activity_date": 1570390588, "creation_date": 1570390588, "answer_id": 58260625, "question_id": 58209290, "link": "https://stackoverflow.com/questions/58209290/trufflehog-in-gitlab-ci/58260625#58260625", "title": "trufflehog in gitlab ci", "body": "<p>As said in <a href=\"https://github.com/dxa4481/truffleHog\" rel=\"nofollow noreferrer\">TruffleHog docs:</a> </p>\n\n<p>For scanning a <code>repo</code> you should not use the \"file\" option:</p>\n\n<pre><code>truffleHog --regex --entropy=False https://github.com/dxa4481/truffleHog.git\n</code></pre>\n\n<p>Anyway, if you want to scan a local dir with file option, it seems there is not quotation marks on the call:</p>\n\n<pre><code> truffleHog file:///user/dxa4481/codeprojects/truffleHog/\n</code></pre>\n\n<p>May you try it without the quotation if you have not spaces on dirs, or just this?</p>\n\n<pre><code>trufflehog --entropy true file:\"//$PWD\"\n</code></pre>\n"}], "owner": {"reputation": 281, "user_id": 1618233, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6db8f8d1ac35072814cd79e645165228?s=128&d=identicon&r=PG", "display_name": "jshwlkr", "link": "https://stackoverflow.com/users/1618233/jshwlkr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 847, "favorite_count": 0, "accepted_answer_id": 58260625, "answer_count": 1, "score": 2, "last_activity_date": 1605610368, "creation_date": 1570050019, "last_edit_date": 1570455595, "question_id": 58209290, "link": "https://stackoverflow.com/questions/58209290/trufflehog-in-gitlab-ci", "title": "trufflehog in gitlab ci", "body": "<p>I am attempting to manually setup truffleHog in GitLab CI to scan my GitLab repo for secrets. I think I've misconfigured my job. My guess would be the file path I'm passing to trufflehog is wrong, as the job runs quick and ends with a \"job succeeded\" despite the fact I have a dummy text file with \"----BEGIN PGP PRIVATE KEY BLOCK-----\" and \"EAACEdEose0cBA23456gfde4567hgf\" to test whether or not it's working as expected.</p>\n\n<p>My <code>.gitlab-ci.yml</code> looks like:</p>\n\n<pre><code>stages:\n  - secrets\n\ntrufflehog:\n  stage: secrets\n  image: python:3-alpine\n  script:\n    - apk add --no-cache git\n    - pip install trufflehog\n    - adduser -S truffleHog\n    - trufflehog --entropy true \"file://$PWD\"\n</code></pre>\n\n<p>The raw output of the trufflehog command looks like this: </p>\n\n<pre><code>$ trufflehog --entropy true \"file://$PWD\" \n[0Ksection_end:1570219434:build_script \n[0Ksection_start:1570219434:after_script \n[0Ksection_end:1570219435:after_script \n[0Ksection_start:1570219435:archive_cache \n[0Ksection_end:1570219437:archive_cache \n[0Ksection_start:1570219437:upload_artifacts_on_success\n[0Ksection_end:1570219438:upload_artifacts_on_success \n[0KJob succeeded\n</code></pre>\n\n<p>Any suggestions where I might be going wrong?</p>\n"}, {"tags": ["python", "list", "floating-point", "sum"], "answers": [{"tags": [], "owner": {"reputation": 174, "user_id": 11623711, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Snh27ThCViI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reK8a500a7r8nSseCuI6yrDLAoTdw/mo/photo.jpg?sz=128", "display_name": "Sudharsana Rajasekaran", "link": "https://stackoverflow.com/users/11623711/sudharsana-rajasekaran"}, "is_accepted": false, "score": 0, "last_activity_date": 1570050414, "creation_date": 1570050414, "answer_id": 58209373, "question_id": 58209213, "link": "https://stackoverflow.com/questions/58209213/how-to-capture-float-values-from-user-input-to-get-sum-of-float-values/58209373#58209373", "title": "How to capture float values from user input to get sum of float values", "body": "<p>Instead of addcost of being variable it should be list. extend operator works only with list.</p>\n\n<pre><code># Declare variables.\nNUM_ITEMS = 5 # Named constant\n\n# Initialized list of add-ins\naddIns = [\"Cream\", \"Cinnamon\", \"Chocolate\", \"Amaretto\", \"Whiskey\"]\n\n# Initialized list of add-in prices\naddInPrices = [.89, .25, .59, 1.50, 1.75]\n # Flag variable\norderTotal = 2.00  # All orders start with a 2.00 charge\n\n# Get user input\n# \naddIn = \"\"\n\naddIn = input(\"Enter coffee add-in or XXX to quit: \")\n# Write the rest of the program here.\nwhile addIn != \"XXX\":\n    foundIt = False\n\n    for i in range(0, len(addInPrices)):\n        price = addInPrices[i]\n        product = addIns[i]\n        if addIn == product: \n            foundIt = True\n            break\n\n    if foundIt == True:\n\n        print(\"{} Price is ${}\".format(product,price))\n\n    else: \n        print(\"Sorry, we do not carry that.\")\n\n    addIn = input(\"Enter coffee add-in or XXX to quit: \")\n\n# MY COMMENT --- Want to create new list from input above when foundIT == True and sum total to print out total order cost.\n    newList=[]  #Create new list to grab values when foundIt == True\n    while foundIt == True:\n\n        addCost=[price]\n        newList.extend(addCost)\n\n        foundIt == True\n        break\n\n    else:\n        foundIt == False\n\n    print(newList)\n\n\nprint(\"Order Total is ${}\".format(orderTotal+sum(addCost)))\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 31, "user_id": 11756738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e422273bbf3abb1858a06876821141a4?s=128&d=identicon&r=PG&f=1", "display_name": "NinaPy", "link": "https://stackoverflow.com/users/11756738/ninapy"}, "edited": false, "score": 0, "creation_date": 1570053496, "post_id": 58209455, "comment_id": 102797342, "body": "not sure if this is the correct forum to ask clarification question but in my code I was &quot;mentored&quot; to have a test thus the two foundIt==True lines.  Is it necessary to check each time I write code to ensure it passes the first time?  Also not sure how <code>orderTotal += addInPrices[i]</code> a traceback does not occur on your line but it did for me addCost=price Error: float not iterable.  Could it be that I did not enclose price in []?  Thanks for your assistance."}, {"owner": {"reputation": 640, "user_id": 3935050, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6Zq5E.jpg?s=128&g=1", "display_name": "DetectivePikachu", "link": "https://stackoverflow.com/users/3935050/detectivepikachu"}, "reply_to_user": {"reputation": 31, "user_id": 11756738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e422273bbf3abb1858a06876821141a4?s=128&d=identicon&r=PG&f=1", "display_name": "NinaPy", "link": "https://stackoverflow.com/users/11756738/ninapy"}, "edited": false, "score": 0, "creation_date": 1570108809, "post_id": 58209455, "comment_id": 102815875, "body": "I think your error was actually on the line below <code>newList.extend(addCost)</code> . <code>addCost = price</code> should always work no matter what price or addcost is since its just assignment"}], "tags": [], "owner": {"reputation": 640, "user_id": 3935050, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6Zq5E.jpg?s=128&g=1", "display_name": "DetectivePikachu", "link": "https://stackoverflow.com/users/3935050/detectivepikachu"}, "is_accepted": true, "score": 0, "last_activity_date": 1570566651, "last_edit_date": 1570566651, "creation_date": 1570050902, "answer_id": 58209455, "question_id": 58209213, "link": "https://stackoverflow.com/questions/58209213/how-to-capture-float-values-from-user-input-to-get-sum-of-float-values/58209455#58209455", "title": "How to capture float values from user input to get sum of float values", "body": "<p>Instead of <code>extend</code> on your list, you actually want to <code>append</code> the item. <code>extend</code> concatenates another list onto your list, <code>append</code> adds a value to the list. </p>\n\n<p>But in reality, we don't need this list at all for what you want to do. Instead, we can just add the price to the total as we are considering the items. We can print the price here too, and just rely on the <code>foundIt</code> flag to output the error message</p>\n\n<pre><code># Declare variables.\nNUM_ITEMS = 5 # Named constant\n\n# Initialized list of add-ins\naddIns = [\"Cream\", \"Cinnamon\", \"Chocolate\", \"Amaretto\", \"Whiskey\"]\n\n# Initialized list of add-in prices\naddInPrices = [.89, .25, .59, 1.50, 1.75]\n# Flag variable\norderTotal = 2.00  # All orders start with a 2.00 charge\n# Get user input\n# \naddIn = \"\"\naddIn = input(\"Enter coffee add-in or XXX to quit: \")\n# Write the rest of the program here.\nwhile addIn != \"XXX\":\n\n    foundIt = False\n\n    for i in range(len(addIns)):\n        if addIn == addIns[i]:\n            print(\"Found match!\")\n            orderTotal += addInPrices[i]\n            foundIt = True\n            print(\"{} Price is ${}\".format(addIns[i],addInPrices[i]))\n            addIn = input(\"Enter coffee add-in or XXX to quit: \")\n            continue\n\n    print(\"Sorry, we do not carry that.\")\n    addIn = input(\"Enter coffee add-in or XXX to quit: \")\n\nprint(\"Order Total is ${}\".format(orderTotal))\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 11756738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e422273bbf3abb1858a06876821141a4?s=128&d=identicon&r=PG&f=1", "display_name": "NinaPy", "link": "https://stackoverflow.com/users/11756738/ninapy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 58209455, "answer_count": 2, "score": 0, "last_activity_date": 1570566651, "creation_date": 1570049643, "last_edit_date": 1570049747, "question_id": 58209213, "link": "https://stackoverflow.com/questions/58209213/how-to-capture-float-values-from-user-input-to-get-sum-of-float-values", "title": "How to capture float values from user input to get sum of float values", "body": "<p>The assignment is:</p>\n\n<ol>\n<li>Write the code that searches the list for the name of the add-in ordered by the customer.</li>\n<li>Write the code that prints the name and price of the add-in or the error message, and then write the code that prints the cost of the total order.</li>\n<li><p>Execute the program using the following data and verify that the output is correct:</p>\n\n<pre><code>Cream\nCaramel\nWhiskey\nchocolate\nChocolate\nCinnamon\nVanilla\n</code></pre></li>\n</ol>\n\n<p>I have executed the main portion of the assignment but don't understand how to capture the values previously inputted to sum/add them.</p>\n\n<p>My code:</p>\n\n<pre><code># Declare variables.\nNUM_ITEMS = 5 # Named constant\n\n# Initialized list of add-ins\naddIns = [\"Cream\", \"Cinnamon\", \"Chocolate\", \"Amaretto\", \"Whiskey\"]\n\n# Initialized list of add-in prices\naddInPrices = [.89, .25, .59, 1.50, 1.75]\n # Flag variable\norderTotal = 2.00  # All orders start with a 2.00 charge\n\n# Get user input\n# \naddIn = \"\"\n\naddIn = input(\"Enter coffee add-in or XXX to quit: \")\n# Write the rest of the program here.\nwhile addIn != \"XXX\":\n    foundIt = False\n\n    for i in range(0, len(addInPrices)):\n        price = addInPrices[i]\n        product = addIns[i]\n        if addIn == product: \n            foundIt = True\n            break\n\n    if foundIt == True:\n\n        print(\"{} Price is ${}\".format(product,price))\n\n    else: \n        print(\"Sorry, we do not carry that.\")\n\n    addIn = input(\"Enter coffee add-in or XXX to quit: \")\n\n# MY COMMENT --- Want to create new list from input above when foundIT == True and sum total to print out total order cost.\n    newList=[]  #Create new list to grab values when foundIt == True\n    while foundIt == True:\n\n        addCost=price\n        newList.extend(addCost)\n\n        foundIt == True\n        break\n\n    else:\n        foundIt == False\n\n    print(newList)\n\n\nprint(\"Order Total is ${}\".format(orderTotal))\n</code></pre>\n\n<p>I discovered I keep trying to iterate floats(e.g. <code>addCost</code>, <code>price</code>, etc) or iterate the 'bool' which is not allowed.  Should I have captured the user's input in a list earlier in the code so I could sum for the last step of the exercise?</p>\n\n<p>Should I think of something else besides creating a list to solve the exercise?  If so, please share.</p>\n"}, {"tags": ["python", "gremlin", "amazon-neptune"], "answers": [{"comments": [{"owner": {"reputation": 6495, "user_id": 5442034, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154838662437837/picture?type=large", "display_name": "Kelvin Lawrence", "link": "https://stackoverflow.com/users/5442034/kelvin-lawrence"}, "edited": false, "score": 0, "creation_date": 1570197088, "post_id": 58217383, "comment_id": 102848292, "body": "I didn&#39;t think in 3-ary form the second parameter could be anything but a String key value. It fails for me with TinkerGraph also."}, {"owner": {"reputation": 39402, "user_id": 1831717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd9d045ca36173a4db8c870cd8ab7eb6?s=128&d=identicon&r=PG", "display_name": "stephen mallette", "link": "https://stackoverflow.com/users/1831717/stephen-mallette"}, "reply_to_user": {"reputation": 6495, "user_id": 5442034, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154838662437837/picture?type=large", "display_name": "Kelvin Lawrence", "link": "https://stackoverflow.com/users/5442034/kelvin-lawrence"}, "edited": false, "score": 0, "creation_date": 1570199378, "post_id": 58217383, "comment_id": 102849417, "body": "ugh....see, this is why you don&#39;t overload <code>T.id</code> with a property key called &quot;id&quot;. just leads to all kind of misunderstanding. fixed my answer. thanks kelvin"}], "tags": [], "owner": {"reputation": 39402, "user_id": 1831717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd9d045ca36173a4db8c870cd8ab7eb6?s=128&d=identicon&r=PG", "display_name": "stephen mallette", "link": "https://stackoverflow.com/users/1831717/stephen-mallette"}, "is_accepted": true, "score": 1, "last_activity_date": 1570199367, "last_edit_date": 1570199367, "creation_date": 1570099156, "answer_id": 58217383, "question_id": 58209203, "link": "https://stackoverflow.com/questions/58209203/how-to-implement-this-in-python-check-if-a-vertex-exist-if-not-create-a-new/58217383#58217383", "title": "How to implement this in python : Check if a vertex exist, if not, create a new vertex", "body": "<p>Here's the three bits of Gremlin you had a question about:</p>\n\n<pre><code>g.V().has(T.id, \"some-id\")\ng.V().has(id, \"some-id\")\ng.V().has(\"id\", \"some-id\")\n</code></pre>\n\n<p>The first two will return you the same result as <code>id</code> is a member of <code>T</code> (as a point of style, Gremlin users typically statically import <code>id</code> so that it can be referenced that way for brevity). The last traversal is different from the first two because, as a <code>String</code> value it refers to a standard property key named \"id\". Generally speaking, TinkerPop would recommend that you not use a property key name like \"id\" or \"label\" as it can lead to mistakes and confusion with values of <code>T</code>.</p>\n\n<p>As for the second part of your question revolving around:</p>\n\n<pre><code>g.V().has('Event', T.id, event['Id']) \ng.V().hasLabel('Event').has(T.id, event['Id'])\n</code></pre>\n\n<p>You can't pass <code>T.id</code> to the 3-ary form of <code>has()</code> as Kelvin points out as the step signature only allows a <code>String</code> in that second position. It also wouldn't make sense to allow <code>T</code> there because <code>T.label</code> is already accounted for by the first argument and <code>T.id</code> refers to the actual graph element identifier. If you know that value then you wouldn't bother specifying the <code>T.label</code> in the first place, as the <code>T.id</code> already uniquely identifies the element. You would just do <code>g.V(event['Id'])</code>. </p>\n"}], "owner": {"reputation": 323, "user_id": 11650363, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a47b903f3ea8e34e162930b1f55caec?s=128&d=identicon&r=PG&f=1", "display_name": "Hongli Bu", "link": "https://stackoverflow.com/users/11650363/hongli-bu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 204, "favorite_count": 0, "accepted_answer_id": 58217383, "answer_count": 1, "score": 0, "last_activity_date": 1570199367, "creation_date": 1570049566, "question_id": 58209203, "link": "https://stackoverflow.com/questions/58209203/how-to-implement-this-in-python-check-if-a-vertex-exist-if-not-create-a-new", "title": "How to implement this in python : Check if a vertex exist, if not, create a new vertex", "body": "<p>I want to create a neptune db, and dump data to it. I download historical data from DynamoDB to S3, these files in csv format. The header in these csv like:</p>\n\n<pre><code>~id, someproperties:String, ~label\n</code></pre>\n\n<p>Then, I need to implement real-time streaming to this neptune db through lambda, in the lambda function, I will check if one vertex(or edges) exist or not, if exist, I will update the vertex(or edges), otherwise I creat a new one.\nIn python, my implementation like this:</p>\n\n<pre><code>g.V().hasLabel('Event').has(T.id, event['Id']).fold().coalesce(unfold(), addV('Event').property(T.id, event['Id'])).property(Cardinality.single, 'State', event['State']).property('sourceData', event['sourceData']).next()\n</code></pre>\n\n<p>Here I have some questions:</p>\n\n<ol>\n<li>In real-time streaming, I need to query if vertex with a id already\nthere, so I need to query the nodes of historical data, so can\n<code>has(T.id, event['Id'])</code> do this? or should I just use\n<code>has(id, event['Id'])</code> or <code>has(\"id\", event['Id'])</code> ? </li>\n<li>I was using <code>g.V().has('Event', T.id, event['Id'])</code> instead of \n    <code>g.V().hasLabel('Event').has(T.id, event['Id'])</code>, but got error\n    like <code>cannot local NeptuneGraphTraversal.has()</code>. Are these two\n    queries same thing?</li>\n</ol>\n"}, {"tags": ["python", "pandas", "list", "coordinates", "point"], "answers": [{"comments": [{"owner": {"reputation": 379, "user_id": 3579151, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/dacea2b9f6d752a47eb430dd42464ff0?s=128&d=identicon&r=PG", "display_name": "energyMax", "link": "https://stackoverflow.com/users/3579151/energymax"}, "edited": false, "score": 0, "creation_date": 1570050715, "post_id": 58209309, "comment_id": 102796573, "body": "Thanks! Very elegant solution! To go one step further, would be possible to add to final output the name of the TP-point that falls within radius?"}], "tags": [], "owner": {"reputation": 43491, "user_id": 4001592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HWyjo.jpg?s=128&g=1", "display_name": "Dani Mesejo", "link": "https://stackoverflow.com/users/4001592/dani-mesejo"}, "is_accepted": false, "score": 1, "last_activity_date": 1570050099, "creation_date": 1570050099, "answer_id": 58209309, "question_id": 58209193, "link": "https://stackoverflow.com/questions/58209193/checking-if-the-points-fall-within-circles/58209309#58209309", "title": "Checking if the points fall within circleS", "body": "<p>You could use <a href=\"https://docs.scipy.org/doc/scipy/reference/generated/scipy.spatial.distance.cdist.html#scipy.spatial.distance.cdist\" rel=\"nofollow noreferrer\">cdist</a> from scipy to compute the pairwise distances, then create a mask with True where distance is less than radius, and finally filter:</p>\n\n<pre><code>import pandas as pd\nfrom scipy.spatial.distance import cdist\n\ndfPoints = pd.DataFrame({'H-points': ['a', 'b', 'c', 'd', 'e'],\n                         'Xh': [10, 35, 52, 78, 9],\n                         'Yh': [15, 5, 11, 20, 10]})\n\ndfTrafaPostaje = pd.DataFrame({'TP-points': ['a', 'b', 'c'],\n                               'Xt': [15, 25, 35],\n                               'Yt': [15, 25, 35]})\n\nradius = 5\ndistances = cdist(dfPoints[['Xh', 'Yh']].values, dfTrafaPostaje[['Xt', 'Yt']].values, 'sqeuclidean')\nmask = (distances &lt;= radius*radius).sum(axis=1) &gt; 0 # create mask\n\nprint(dfPoints[mask])\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>  H-points  Xh  Yh\n0        a  10  15\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 379, "user_id": 3579151, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/dacea2b9f6d752a47eb430dd42464ff0?s=128&d=identicon&r=PG", "display_name": "energyMax", "link": "https://stackoverflow.com/users/3579151/energymax"}, "edited": false, "score": 0, "creation_date": 1570052527, "post_id": 58209398, "comment_id": 102797110, "body": "Thanks! To go one step further, would be possible to add to final output the name of the TP-point that falls within radius?"}, {"owner": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "reply_to_user": {"reputation": 379, "user_id": 3579151, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/dacea2b9f6d752a47eb430dd42464ff0?s=128&d=identicon&r=PG", "display_name": "energyMax", "link": "https://stackoverflow.com/users/3579151/energymax"}, "edited": false, "score": 0, "creation_date": 1570052635, "post_id": 58209398, "comment_id": 102797137, "body": "Yes, but one point may be within several circles, how do you want them?"}, {"owner": {"reputation": 379, "user_id": 3579151, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/dacea2b9f6d752a47eb430dd42464ff0?s=128&d=identicon&r=PG", "display_name": "energyMax", "link": "https://stackoverflow.com/users/3579151/energymax"}, "edited": false, "score": 0, "creation_date": 1570052815, "post_id": 58209398, "comment_id": 102797171, "body": "I added &#180; M&#180; column in &#180;dfTrafaPostaje &#180; - if it&#39;s possible, if one H point falls within many TP, it goes under TP with the biggest M value"}, {"owner": {"reputation": 379, "user_id": 3579151, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/dacea2b9f6d752a47eb430dd42464ff0?s=128&d=identicon&r=PG", "display_name": "energyMax", "link": "https://stackoverflow.com/users/3579151/energymax"}, "edited": false, "score": 0, "creation_date": 1570082085, "post_id": 58209398, "comment_id": 102802774, "body": "The solution works great for the min distance between points. But as I said, I added a column M in the origin question with some values. How would this be done, if i&#39;d like to connect the TP point with the biggest values of M in the given radius?"}], "tags": [], "owner": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "is_accepted": true, "score": 2, "last_activity_date": 1570106764, "last_edit_date": 1570106764, "creation_date": 1570050592, "answer_id": 58209398, "question_id": 58209193, "link": "https://stackoverflow.com/questions/58209193/checking-if-the-points-fall-within-circles/58209398#58209398", "title": "Checking if the points fall within circleS", "body": "<p>Another option is to use <code>distance_matrix</code> from <code>scipy.spatial</code>:</p>\n\n<pre><code>dist_mat = distance_matrix(dfPoints [['Xh','Yh']], dfTrafaPostaje [['Xt','Yt']])\ndfPoints [np.min(dist_mat,axis=1)&lt;5]\n</code></pre>\n\n<p>Took about 2s for <code>1500 dfPoints</code> and <code>30000 dfTrafaPostje</code>.</p>\n\n<hr>\n\n<p><strong>Update</strong>: to get the index of the reference points with highest score:</p>\n\n<pre><code>dist_mat = distance_matrix(dfPoints [['Xh','Yh']], dfTrafaPostaje [['Xt','Yt']])\n\n# get the M scores of those within range\nM_mat = pd.DataFrame(np.where(dist_mat &lt;= 5, dfTrafaPosaje['M'].values[None, :], np.nan),\n                     index=dfPoints['H-points'] ,\n                     columns=dfTrafaPostaje['TP-points'])\n\n# get the points with largest M values\n# mask with np.nan for those outside range    \ndfPoints['M'] = np.where(M_mat.notnull().any(1), M_mat.idxmax(1), np.nan)\n</code></pre>\n\n<p>For the included sample data:</p>\n\n<pre><code>  H-points  Xh  Yh   TP\n0        a  10  15    a\n1        b  35   5  NaN\n2        c  52  11  NaN\n3        d  78  20  NaN\n4        e   9  10  NaN\n</code></pre>\n"}], "owner": {"reputation": 379, "user_id": 3579151, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/dacea2b9f6d752a47eb430dd42464ff0?s=128&d=identicon&r=PG", "display_name": "energyMax", "link": "https://stackoverflow.com/users/3579151/energymax"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "accepted_answer_id": 58209398, "answer_count": 2, "score": 0, "last_activity_date": 1570106764, "creation_date": 1570049521, "last_edit_date": 1570052704, "question_id": 58209193, "link": "https://stackoverflow.com/questions/58209193/checking-if-the-points-fall-within-circles", "title": "Checking if the points fall within circleS", "body": "<p>I have a long list of <code>H-points</code> with known coordinates. I have also a list of <code>TP-points</code>. I'd like to know if the <code>H-points</code> fall within any(!) <code>TP-point</code> with certain radius (e.g. <code>r=5</code>).</p>\n\n<pre><code>dfPoints = pd.DataFrame({'H-points' : ['a','b','c','d','e'],\n               'Xh' :[10, 35, 52, 78, 9],\n               'Yh' : [15,5,11,20,10]})\n\ndfTrafaPostaje = pd.DataFrame({'TP-points' : ['a','b','c','d','e'],\n               'Xt' :[15,25,35],\n               'Yt' : [15,25,35],\n               'M' : [5,2,3]})\n\ndef inside_circle(x, y, a, b, r):\n    return (x - a)*(x - a) + (y - b)*(y - b) &lt; r*r\n</code></pre>\n\n<p>I've started but.. it would be much easier to check this for only one TP point. But if I have e.g. 1500 of them and 30.000 H-points, then i need more general solution.\nCan anyone help?</p>\n"}, {"tags": ["python", "python-2.7"], "comments": [{"owner": {"reputation": 23557, "user_id": 12266, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6a2a454191fa75d4114ed05836a0b924?s=128&d=identicon&r=PG", "display_name": "Andrew Jaffe", "link": "https://stackoverflow.com/users/12266/andrew-jaffe"}, "edited": false, "score": 1, "creation_date": 1570051072, "post_id": 58209181, "comment_id": 102796688, "body": "The answers below both give the right idea, although I don&#39;t think they <a href=\"https://www.google.com/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=2&amp;cad=rja&amp;uact=8&amp;ved=2ahUKEwjEruWLwP7kAhVFsKQKHXT8ANoQFjABegQICxAF&amp;url=https%3A%2F%2Fwww.python.org%2Fdev%2Fpeps%2Fpep-0020%2F&amp;usg=AOvVaw0VpC2iB3EOvwvauPa37DN_\" rel=\"nofollow noreferrer\">explicitly</a> make the main point which should be that <code>zip(*my_list)</code> transposes your lists of lists into new versions which are then easy to manipulate into the detailed strings you want."}], "answers": [{"comments": [{"owner": {"reputation": 25637, "user_id": 6243352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/715f60f9edc65642a6805752cfeebb27?s=128&d=identicon&r=PG&f=1", "display_name": "ggorlen", "link": "https://stackoverflow.com/users/6243352/ggorlen"}, "edited": false, "score": 0, "creation_date": 1570049967, "post_id": 58209262, "comment_id": 102796341, "body": "Works fine in Python 2.7 for me."}, {"owner": {"reputation": 624, "user_id": 1558425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f36a711ac1cc8c7989949f564dac178a?s=128&d=identicon&r=PG", "display_name": "whydoubt", "link": "https://stackoverflow.com/users/1558425/whydoubt"}, "edited": false, "score": 1, "creation_date": 1570051890, "post_id": 58209262, "comment_id": 102796927, "body": "There are three pair being zipped for color_list, so you actually need <code>[&quot;{} and {} and {}&quot;.format(*t) for t in zip(*color_list)]</code>"}], "tags": [], "owner": {"reputation": 96714, "user_id": 198633, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5b9c04999233026354268c2ee4237e04?s=128&d=identicon&r=PG", "display_name": "inspectorG4dget", "link": "https://stackoverflow.com/users/198633/inspectorg4dget"}, "is_accepted": false, "score": 1, "last_activity_date": 1570049876, "creation_date": 1570049876, "answer_id": 58209262, "question_id": 58209181, "link": "https://stackoverflow.com/questions/58209181/nested-string-list-with-for-loop/58209262#58209262", "title": "Nested string list with for loop", "body": "<pre><code>names_list = [\"{} and {}\".format(*t) for t in zip(*name_list)]\ncolors_list = [\"{} and {}\".format(*t) for t in zip(*color_list)]\n</code></pre>\n\n<p>This probably won't work on python2.7 and you're better off upgrading to python3 anyways, since python2 is reaching end of life</p>\n"}, {"tags": [], "owner": {"reputation": 624, "user_id": 1558425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f36a711ac1cc8c7989949f564dac178a?s=128&d=identicon&r=PG", "display_name": "whydoubt", "link": "https://stackoverflow.com/users/1558425/whydoubt"}, "is_accepted": false, "score": 0, "last_activity_date": 1570051915, "last_edit_date": 1570051915, "creation_date": 1570050402, "answer_id": 58209370, "question_id": 58209181, "link": "https://stackoverflow.com/questions/58209181/nested-string-list-with-for-loop/58209370#58209370", "title": "Nested string list with for loop", "body": "<pre><code>[' and '.join(x) for x in zip(*name_list)]\n[' and '.join(x) for x in zip(*color_list)]\n</code></pre>\n\n<p><code>str.join()</code> will work on a list of any size, placing the string between each item.</p>\n"}], "owner": {"reputation": 21, "user_id": 12156007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/114d3cbc67002d0a39941d0e5e88f292?s=128&d=identicon&r=PG&f=1", "display_name": "spableuwwater", "link": "https://stackoverflow.com/users/12156007/spableuwwater"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1570051915, "creation_date": 1570049462, "last_edit_date": 1570050794, "question_id": 58209181, "link": "https://stackoverflow.com/questions/58209181/nested-string-list-with-for-loop", "title": "Nested string list with for loop", "body": "<p>I have the two following nested lists</p>\n\n<pre><code>List 1: [[\"Bob\", \"Davon\", \"Alex\"],[\"Dylan\",\"Rose\", \"Hard\"]] \n\nList 2: [[\"Red\", \"Black\"] , [\"Blue\", \"Green\"], [\"Yellow\", \"Pink\"]]\n</code></pre>\n\n<p>And want to show the first word of each list within the nest together, the second etc. So that the outcome would be:</p>\n\n<pre><code>['Bob and Dylan', 'Davon and Rose', 'Alex and Hard'] --&gt; for the first list\n\n['Red and Blue and Yellow, 'Black and Green and Pink'] --&gt; for the second list\n</code></pre>\n\n<p>So the first outcome I can get with the following code</p>\n\n<pre><code>name_list = [[\"Bob\", \"Davon\", \"Alex\"],[\"Dylan\",\"Rose\", \"Hard\"]] \n\ndef addition(name_list):    \n    new_list = []\n    for i in range(len(name_list)):\n        for j in range(len(name_list[i])):\n            new_list.append(name_list[i][j] + \" and \" + name_list[i+1][j])\n        return new_list       \n\naddition (name_list)\n</code></pre>\n\n<p>But the second list: <code>[[\"Red\", \"Black\"] , [\"Blue\", \"Green\"], [\"Yellow\", \"Pink\"]]</code> does not provide the right outcome.</p>\n"}, {"tags": ["python", "django"], "comments": [{"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1570049610, "post_id": 58209176, "comment_id": 102796213, "body": "And what&#39;s wrong with this code?"}, {"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 1, "creation_date": 1570049783, "post_id": 58209176, "comment_id": 102796272, "body": "Although the more normal thing to do would be to override <code>save</code> and put this logic there."}, {"owner": {"reputation": 13, "user_id": 11914698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f24f0d50c98a4b28cde07c1cb8cc08f8?s=128&d=identicon&r=PG&f=1", "display_name": "Luisffx", "link": "https://stackoverflow.com/users/11914698/luisffx"}, "reply_to_user": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1570129837, "post_id": 58209176, "comment_id": 102826026, "body": "This code isn&#39;t listing anything, so I&#39;m not even sure it&#39;s creating anything at all. could you specify what you mean by that?"}, {"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1570130472, "post_id": 58209176, "comment_id": 102826275, "body": "I&#39;m not sure what &quot;isn&#39;t listing anything&quot; means. How are you calling this code, what are you expecting to happen and how is it different from what you are actually seeing? As I said, you would normally do this when you save the model instance, not when you create it, which you would achieve by defining the save method."}, {"owner": {"reputation": 13, "user_id": 11914698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f24f0d50c98a4b28cde07c1cb8cc08f8?s=128&d=identicon&r=PG&f=1", "display_name": "Luisffx", "link": "https://stackoverflow.com/users/11914698/luisffx"}, "reply_to_user": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1570134632, "post_id": 58209176, "comment_id": 102827993, "body": "It&#39;s a model in a django project. The model is called in a function based view and the form works as intended, but my list view doesn&#39;t bring anything back. I&#39;m sure it&#39;s not a problem with listing itself, but creating the object the way I intend to. Could you write a reply to this showing what you mean by using the save method?"}, {"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1570134840, "post_id": 58209176, "comment_id": 102828066, "body": "First you need to show your full code. <b>How are you calling the create method</b>? You suddenly mention a form here; where is it? If there&#39;s a form, then this logic probably belongs there anyway. Show the code of the form and the view that uses it."}, {"owner": {"reputation": 13, "user_id": 11914698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f24f0d50c98a4b28cde07c1cb8cc08f8?s=128&d=identicon&r=PG&f=1", "display_name": "Luisffx", "link": "https://stackoverflow.com/users/11914698/luisffx"}, "reply_to_user": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1570717656, "post_id": 58209176, "comment_id": 103009007, "body": "My bad for the long time I took to get back to this, but now I understand what you meant by the save method. I&#39;ll ask a new question since I think the problem changed significantly by now."}], "owner": {"reputation": 13, "user_id": 11914698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f24f0d50c98a4b28cde07c1cb8cc08f8?s=128&d=identicon&r=PG&f=1", "display_name": "Luisffx", "link": "https://stackoverflow.com/users/11914698/luisffx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1570049452, "creation_date": 1570049452, "question_id": 58209176, "link": "https://stackoverflow.com/questions/58209176/how-can-you-customize-object-creation-in-django", "title": "How can you customize object creation in django?", "body": "<p>In django rest framework, it's possible to make a function to customize the process of creating an object inside the serializer of that respective model, but I can't figure out how to do that in \"vanilla\" django, so to speak. What I need to do is take one field and do a bunch of stuff with it. encode it into a 256 character hash is all I have to worry about now. How can I go about doing what I need? I've been basing myself off of an online course and Django's documentation, but I either couldn't interpret it well enough or I just straight up haven't found it there. Here is the code I have so far, at least what I judge is relevant to the question. It's all in models.py:</p>\n\n<pre><code>class SpedFile(models.Model):\njson_file = models.FileField(max_length=100)\nsped_file = models.FileField(max_length=100)\nintegrity_hash = models.CharField(max_length=256)\nline_counter = models.CharField(max_length=150000)\ncreated_at = models.DateField(auto_now_add=True)\n\n@classmethod\ndef create(cls, json_file):\n    file_bearer = json_file\n    m = hashlib.sha256()\n    m.update(file_bearer.encode('utf-8'))\n    integrity_hash = m.hexdigest()\n    new_object = cls(json_file=file_bearer, integrity_hash=integrity_hash)\n    return new_object\n</code></pre>\n"}, {"tags": ["python", "esapi", "veracode"], "answers": [{"tags": [], "owner": {"reputation": 5526, "user_id": 557153, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/h2fWz.png?s=128&g=1", "display_name": "avgvstvs", "link": "https://stackoverflow.com/users/557153/avgvstvs"}, "is_accepted": false, "score": 0, "last_activity_date": 1570147139, "creation_date": 1570147139, "answer_id": 58228260, "question_id": 58209129, "link": "https://stackoverflow.com/questions/58209129/python-how-to-fix-cwe-117-improper-output-neutralization-for-logs/58228260#58228260", "title": "Python - How to fix CWE-117: Improper Output Neutralization for Logs", "body": "<p>ESAPI Python unfortunately is an extremely long dead project.  I don't have any Python alternatives, but the library hasn't had a commit since <a href=\"https://code.google.com/archive/p/owasp-esapi-python/source/default/commits\" rel=\"nofollow noreferrer\">August 9, 2010.</a>  </p>\n\n<p>I'm not familiar with Python web frameworks, but I <em>do</em> teach regularly about secure programming.  </p>\n\n<p>Every time you make a function call, you need to ask yourself the question:  </p>\n\n<p>\"Am I passing this off of to an interpreter?\"</p>\n\n<p>If the answer is \"yes,\" then you need to encode to ensure that THAT function is going to treat the input purely as data and not executable code.  </p>\n\n<p>In this particular case, if your logging has the potential to be interpreted by a browser (which is common) you'd also want to encode for HTML.  However if your environment <em>never</em> uses html-based logging and is always raw text, this could be considered \"mitigated\" or a \"false positive\" depending on how your company has agreed to those terms.  </p>\n\n<p>Also, I like the practice of wrapping any user input with a unique delimiter. You can use square brackets, but I like strong visual cues in my logs.  </p>\n\n<p>Picture: [USERACTION] + userId + ' \u25ba' + encode(userInput) + '\u25c0'  </p>\n\n<p>Or even:</p>\n\n<p>[USERACTION] + userId + ' ( \u0361\u0298 \u035c\u0296 \u0361\u0298)' + encode(userInput) + '&lt;:::::[]=\u00a4 (\u2580\u033f\u033f\u0139\u032f\u033f\u033f\u2580\u033f \u033f)'</p>\n\n<p>Anything that helps make it obvious that someone has tampered with your logs is good.  The louder the better!</p>\n"}], "owner": {"reputation": 179, "user_id": 3168473, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/63399da3f0e6188eb8bc10d12da28d2b?s=128&d=identicon&r=PG&f=1", "display_name": "Batman Rises", "link": "https://stackoverflow.com/users/3168473/batman-rises"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 239, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1570147139, "creation_date": 1570049186, "question_id": 58209129, "link": "https://stackoverflow.com/questions/58209129/python-how-to-fix-cwe-117-improper-output-neutralization-for-logs", "title": "Python - How to fix CWE-117: Improper Output Neutralization for Logs", "body": "<p>I have tried using  clean = message.replace('\\n', '<em>').replace('\\r', '</em>').\nBut it still fails the veracode scan.\nIs there any better way to do it?\nAlso I read about ESAPI Python but not getting any good documentation to fix this issue.</p>\n"}, {"tags": ["python", "django", "postgresql"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 11831901, "user_type": "registered", "profile_image": "https://graph.facebook.com/2304349636348806/picture?type=large", "display_name": "Rafael Shirakyan", "link": "https://stackoverflow.com/users/11831901/rafael-shirakyan"}, "is_accepted": false, "score": 0, "last_activity_date": 1570049509, "creation_date": 1570049509, "answer_id": 58209191, "question_id": 58209119, "link": "https://stackoverflow.com/questions/58209119/how-to-write-subquery-in-django/58209191#58209191", "title": "How to write subquery in django", "body": "<p>i would use a python connector to postgreSQL - <code>http://www.postgresqltutorial.com/postgresql-python/query/</code>, that is what i do for the mysql, thought did not try for the postgresql</p>\n"}, {"comments": [{"owner": {"reputation": 811, "user_id": 3453422, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/A9N1S.jpg?s=128&g=1", "display_name": "theWanderer4865", "link": "https://stackoverflow.com/users/3453422/thewanderer4865"}, "reply_to_user": {"reputation": 11, "user_id": 11786395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O8enD.jpg?s=128&g=1", "display_name": "Codirovshik", "link": "https://stackoverflow.com/users/11786395/codirovshik"}, "edited": false, "score": 0, "creation_date": 1570050643, "post_id": 58209194, "comment_id": 102796548, "body": "So you can&#39;t use the ORM to modify the FROM clause - if you need to do that you can just drop into writing raw SQL. I can&#39;t exactly give you a better answer without something more concrete."}], "tags": [], "owner": {"reputation": 811, "user_id": 3453422, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/A9N1S.jpg?s=128&g=1", "display_name": "theWanderer4865", "link": "https://stackoverflow.com/users/3453422/thewanderer4865"}, "is_accepted": false, "score": 0, "last_activity_date": 1570049526, "creation_date": 1570049526, "answer_id": 58209194, "question_id": 58209119, "link": "https://stackoverflow.com/questions/58209119/how-to-write-subquery-in-django/58209194#58209194", "title": "How to write subquery in django", "body": "<p>Making a subquery is essentially setting up two queries and using one query to \"feed\" another:</p>\n\n<pre><code>from django.db.models import Subquery\nall_users = User.objects.all()\nUser.objects.annotate(the_user=Subquery(all_users.values('email')[:1]))\n</code></pre>\n\n<p>This is more or less the same as what you provided. You can get about as complicated as you'd like here but the best source to get going with subqueries is the <a href=\"https://docs.djangoproject.com/en/2.2/ref/models/expressions/#subquery-expressions\" rel=\"nofollow noreferrer\">docs</a></p>\n"}], "owner": {"reputation": 11, "user_id": 11786395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O8enD.jpg?s=128&g=1", "display_name": "Codirovshik", "link": "https://stackoverflow.com/users/11786395/codirovshik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1570050004, "creation_date": 1570049112, "last_edit_date": 1570050004, "question_id": 58209119, "link": "https://stackoverflow.com/questions/58209119/how-to-write-subquery-in-django", "title": "How to write subquery in django", "body": "<p>Is it possible to make following sql query in django</p>\n\n<pre><code>select * from (\n    select * from users\n) order by id\n</code></pre>\n\n<p>It is just minimal example. I have a long subquery instead of <code>select * from users</code>. But I can't  understand how insert it into subquery.</p>\n\n<p>UPDATED:\nSubquery from <a href=\"https://docs.djangoproject.com/en/2.2/ref/models/expressions/#subquery-expressions\" rel=\"nofollow noreferrer\">doc</a> doesn't suits because it build following request</p>\n\n<pre><code>SELECT \"post\".\"id\", (\n    SELECT U0.\"email\"\n    FROM \"comment\" U0\n    WHERE U0.\"post_id\" = (\"post\".\"id\")\n    ORDER BY U0.\"created_at\" DESC LIMIT 1\n) AS \"newest_commenter_email\" FROM \"post\"\n</code></pre>\n\n<p>and this subquery can return only one value (<code>.values('email')</code>).\nConstruction <code>select (subquery) as value from table</code> instead of <code>select value from (subquery)</code></p>\n"}, {"tags": ["python", "python-3.x", "module", "load", "python-module"], "comments": [{"owner": {"reputation": 6690, "user_id": 4225229, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/2YfJM.jpg?s=128&g=1", "display_name": "JacobIRR", "link": "https://stackoverflow.com/users/4225229/jacobirr"}, "edited": false, "score": 0, "creation_date": 1570049337, "post_id": 58209073, "comment_id": 102796124, "body": "Can you <code>sys.path.append(path_to_missing_module)</code> ?"}, {"owner": {"reputation": 7471, "user_id": 1035897, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/3eccb41827ff628fa4143045e40c1b8c?s=128&d=identicon&r=PG", "display_name": "Lennart Rolland", "link": "https://stackoverflow.com/users/1035897/lennart-rolland"}, "reply_to_user": {"reputation": 6690, "user_id": 4225229, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/2YfJM.jpg?s=128&g=1", "display_name": "JacobIRR", "link": "https://stackoverflow.com/users/4225229/jacobirr"}, "edited": false, "score": 0, "creation_date": 1570049635, "post_id": 58209073, "comment_id": 102796220, "body": "You mean from inside the loaded module? Although I can control what is in the loaded module I would really not want it to care how it was loaded, so let&#39;s say for curiosity&#39;s sake that I could not change it!"}], "owner": {"reputation": 7471, "user_id": 1035897, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/3eccb41827ff628fa4143045e40c1b8c?s=128&d=identicon&r=PG", "display_name": "Lennart Rolland", "link": "https://stackoverflow.com/users/1035897/lennart-rolland"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1570048884, "creation_date": 1570048884, "question_id": 58209073, "link": "https://stackoverflow.com/questions/58209073/set-path-of-dynamically-loaded-module-in-python-3-7", "title": "Set path of dynamically loaded module in Python 3.7", "body": "<p>OK, so this will be a little tricky to explan well. I will try my best.</p>\n\n<p>So consider my naive implementation of \"load python module by filename\" as follows:</p>\n\n<pre><code>def load_module_by_filepath(module_name, module_filepath):\n    module=None\n    failure=None\n    try:\n        spec = importlib.util.spec_from_file_location(module_name, module_filepath)\n        module = importlib.util.module_from_spec(spec)\n        spec.loader.exec_module(module)\n    except Exception as e:\n        failure=f\"Import of module '{module_name}'from file '{module_filepath}' had errors ({e})\"\n        module=None\n    return module, failure\n</code></pre>\n\n<p>Let's say I have the following code in a file <strong>my_mod.py</strong>:</p>\n\n<pre><code>from my_other_mod import something\n\ndef somefunc():\n    something()\n</code></pre>\n\n<p>Then I load it using my loader like this:</p>\n\n<pre><code>module, failure = load_module_by_filepath('my_mod', 'my_mod.py')\n</code></pre>\n\n<p>At this point I will be able to call <strong>somefunc</strong> from my loaded module like so:</p>\n\n<pre><code>my_callable = getattr(module, 'somefunc')\n\nmy_callable()\n</code></pre>\n\n<p>All good, except, if you look carefully there is an import statement in <strong>my_mod.py</strong> for <strong>something</strong> from <strong>my_other_mod</strong>.</p>\n\n<p>So what happens when I run this code is that I get a failure to load the module saying \"No module 'my_other_mod'\".</p>\n\n<p>I am guessing this is because <strong>my_other_mod</strong> was installed in a location that is not available to my newly loaded module. They don't belong to the same environment or context if you will.</p>\n\n<p><em>So my question is, how can I change my loader to add <strong>my_other_mod</strong> to the path of <strong>my_mod</strong> so that it will load and run?</em></p>\n"}, {"tags": ["python", "excel", "loops", "variables", "openpyxl"], "comments": [{"owner": {"reputation": 4256, "user_id": 214178, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8213626e4c66700c3e7354a70b3ac5e1?s=128&d=identicon&r=PG", "display_name": "artdanil", "link": "https://stackoverflow.com/users/214178/artdanil"}, "edited": false, "score": 0, "creation_date": 1570049538, "post_id": 58208982, "comment_id": 102796182, "body": "Usually, it would help to present the error message and the place the code fails."}, {"owner": {"reputation": 1219, "user_id": 11547576, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8YD74.jpg?s=128&g=1", "display_name": "neutrino_logic", "link": "https://stackoverflow.com/users/11547576/neutrino-logic"}, "edited": false, "score": 0, "creation_date": 1570049791, "post_id": 58208982, "comment_id": 102796278, "body": "See this question for lots of options, such as dictionary, namedtuple, etc: <a href=\"https://stackoverflow.com/questions/1373164/how-do-i-create-a-variable-number-of-variables\" title=\"how do i create a variable number of variables\">stackoverflow.com/questions/1373164/&hellip;</a>"}, {"owner": {"reputation": 27334, "user_id": 7758804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UBA7j.jpg?s=128&g=1", "display_name": "Trenton McKinney", "link": "https://stackoverflow.com/users/7758804/trenton-mckinney"}, "edited": false, "score": 0, "creation_date": 1570052047, "post_id": 58208982, "comment_id": 102796978, "body": "1. There is only one Excel file with <code>Sheet 1</code>.  2. You want to create multiple files, based on the date in a column of <code>Sheet 1</code>.  Please confirm.  Also, post the header and top 5 rows of data."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 4275175, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fe9bbeddb00f6036a8af21cd28da9a0?s=128&d=identicon&r=PG&f=1", "display_name": "Bill", "link": "https://stackoverflow.com/users/4275175/bill"}, "edited": false, "score": 0, "creation_date": 1570134550, "post_id": 58209080, "comment_id": 102827963, "body": "Thank you, this did exactly what I needed!"}], "tags": [], "owner": {"reputation": 511, "user_id": 2379240, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61af3f729fb21971b5de6cff4619397b?s=128&d=identicon&r=PG", "display_name": "Braaedy", "link": "https://stackoverflow.com/users/2379240/braaedy"}, "is_accepted": true, "score": 1, "last_activity_date": 1570048920, "creation_date": 1570048920, "answer_id": 58209080, "question_id": 58208982, "link": "https://stackoverflow.com/questions/58208982/python-create-variables-in-loop-then-assign/58209080#58209080", "title": "python - Create variables in loop then assign", "body": "<p>I don't know your interface at all, but this is what I've gathered:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import openpyxl\n\nmonths = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December']\n\nsheets = {}\n\nfor month in months:\n    filepath = 'C:\\\\codes\\\\Furnace_time_log\\\\2019\\\\' + month + '_2019.xlsx'\n    workbook =  openpyxl.load_workbook(filepath)\n    sheet_name = month + '_sheet'\n    sheet = workbook_name.get_sheet_by_name(sheet_name)\n    sheets[month] = sheet\n</code></pre>\n\n<p>This is assuming that your sheets are named <code>xxxx_month</code>(e.g. <code>January_month</code>, case-sensitive) and not <code>Sheet1</code> as you were originally using. When this is done you'll have a dictionary mapping month name to sheet object.</p>\n\n<p>Let me know if something I've done doesn't make sense and I'll edit.</p>\n"}, {"tags": [], "owner": {"reputation": 4256, "user_id": 214178, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8213626e4c66700c3e7354a70b3ac5e1?s=128&d=identicon&r=PG", "display_name": "artdanil", "link": "https://stackoverflow.com/users/214178/artdanil"}, "is_accepted": false, "score": 0, "last_activity_date": 1570052141, "last_edit_date": 1570052141, "creation_date": 1570049775, "answer_id": 58209235, "question_id": 58208982, "link": "https://stackoverflow.com/questions/58208982/python-create-variables-in-loop-then-assign/58209235#58209235", "title": "python - Create variables in loop then assign", "body": "<p>I can see several problems with your code:</p>\n\n<ol>\n<li>Improper escape sequence in the file name.</li>\n<li>Reassigning variables.</li>\n<li>You are trying to create two different sets of dynamic variables: workbooks and sheets, without establishing relation between them.</li>\n</ol>\n\n<p>In the code below, the first line stores value to variable 'sheet_name'. The second stores new value into same variable changing its value:</p>\n\n<pre><code>sheet_name = month+'_sheet'\nsheet_name = workbook_name.get_sheet_by_name('Sheet1') \n</code></pre>\n\n<p>What you are trying to do is to dynamically create a variable name and value. Unless there is an overwhelming need to create such set of variables, I would recommend using either list or dictionary for this:</p>\n\n<pre><code>months = ['January', 'February', 'March','April', 'May', 'June', 'July', \n          'August', 'September', 'October', 'November', 'December']\nwb_format = r'C:\\codes\\Furnace_time_log\\2019\\{}_2019.xlsx'\nworkbooks = dict((month, wb_format.format(month)) for month in months)\n</code></pre>\n\n<p>If you really want to create those variables, look up <a href=\"https://docs.python.org/3/library/functions.html#locals\" rel=\"nofollow noreferrer\"><code>locals()</code></a> and <a href=\"https://docs.python.org/3/library/functions.html#globals\" rel=\"nofollow noreferrer\"><code>globals()</code></a>, but do use caution.</p>\n"}], "owner": {"reputation": 23, "user_id": 4275175, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fe9bbeddb00f6036a8af21cd28da9a0?s=128&d=identicon&r=PG&f=1", "display_name": "Bill", "link": "https://stackoverflow.com/users/4275175/bill"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 187, "favorite_count": 0, "accepted_answer_id": 58209080, "answer_count": 2, "score": 2, "last_activity_date": 1570052141, "creation_date": 1570048352, "question_id": 58208982, "link": "https://stackoverflow.com/questions/58208982/python-create-variables-in-loop-then-assign", "title": "python - Create variables in loop then assign", "body": "<p>I'm trying to create variables inside a loop, then assign a value to them in the same loop iteration.  My code is failing, I can see why, but cannot figure out how to fix it.  I'm using Python 3.6 with current versions of all imported packages.  Here's my code:</p>\n\n<pre><code>import openpyxl\n\nmonths = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December']\n\nfor month in months:\n    filepath = 'C:\\codes\\Furnace_time_log\\\\2019\\\\' + month + '_2019.xlsx'\n    workbook_name = month+'_wb'\n    workbook_name =  openpyxl.load_workbook(filepath)\n    sheet_name = month+'_sheet'\n    sheet_name = workbook_name.get_sheet_by_name('Sheet1')\n</code></pre>\n\n<p>What I want out of this is 12 openpyxl sheet objects named \"January_sheet\", \"February_sheet\", ...</p>\n\n<p>Earlier in my code I have the following sample which does exactly what it's supposed to.  This is what I'm basing the logic of my erroneous code on:</p>\n\n<pre><code>head_wb = openpyxl.load_workbook('C:\\codes\\Furnace_time_log\\head.xlsx')\nhead_sheet = head_wb.get_sheet_by_name('Sheet 1')\n</code></pre>\n\n<p>I'm working with an Excel file where every row contains a date and a lot of other useful information.  If row x's date is in January, I need to place the adjacent data in a separate XLSX document (\"January_2019.xlsx\"), which I can edit via the January_sheet object.</p>\n\n<p>Any advice on how accomplish this?  Also, I am not concerned with performance.  This code only has to run once on the full data set.  I realize there's probably a more efficient way of doing this than concurrently opening 12 openpyxl workbooks and sheets.  That being said, any better ways of accomplishing this are welcome.</p>\n"}, {"tags": ["python", "keras", "shapes"], "answers": [{"tags": [], "owner": {"reputation": 2868, "user_id": 7212365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FBxLp.png?s=128&g=1", "display_name": "zihaozhihao", "link": "https://stackoverflow.com/users/7212365/zihaozhihao"}, "is_accepted": false, "score": 0, "last_activity_date": 1570048834, "creation_date": 1570048834, "answer_id": 58209061, "question_id": 58208954, "link": "https://stackoverflow.com/questions/58208954/expected-input-1-to-have-shape-224-224-3-but-got-array-with-shape-400-401/58209061#58209061", "title": "Expected input_1 to have shape (224, 224, 3) but got array with shape (400, 401, 3)", "body": "<p>You need to resize the <code>x</code> to (224,224,3) because your model only takes the input of this shape.</p>\n"}], "owner": {"reputation": 19, "user_id": 11614549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05338292fac0c33afc0a27a0792aafba?s=128&d=identicon&r=PG&f=1", "display_name": "Opt ZqGeo", "link": "https://stackoverflow.com/users/11614549/opt-zqgeo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 793, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1570048834, "creation_date": 1570048150, "question_id": 58208954, "link": "https://stackoverflow.com/questions/58208954/expected-input-1-to-have-shape-224-224-3-but-got-array-with-shape-400-401", "title": "Expected input_1 to have shape (224, 224, 3) but got array with shape (400, 401, 3)", "body": "<p>I am getting the following error while calling the <strong>model.predict</strong> function when running a text classification model in Keras. </p>\n\n<pre><code>Expected input_1 to have shape (224, 224, 3) but got array with shape (400, 401, 3)\n</code></pre>\n\n<p>This is the code of my model</p>\n\n<pre><code>from flask import render_template, jsonify, Flask, redirect, url_for, request\nfrom app import app\nimport random\nimport os\nfrom tensorflow.keras.applications.resnet50 import ResNet50\nfrom tensorflow.keras.preprocessing import image\nfrom tensorflow.keras.applications.resnet50 import preprocess_input, decode_predictions\nimport numpy as np\n\nUPLOAD_FOLDER = '/Users/lorenzocastagno/Desktop/flaskSaaS-master/app/forms'\n\n@app.route('/')\n@app.route('/index')\ndef index():\n     return render_template('index.html', title='Home')\n\n\n\n\n@app.route('/upload.php', methods = ['GET', 'POST'])\ndef upload_file():\n   if request.method == 'POST':\n      f = request.files['file']\n      path = os.path.join(app.config['UPLOAD_FOLDER'], f.filename)\n      model= ResNet50(weights='imagenet')\n      img = image.load_img(os.path.join(UPLOAD_FOLDER, f.filename))\n      x = image.img_to_array(img)\n      x = np.expand_dims(x, axis=0)\n      x = preprocess_input(x)\n      preds = model.predict(x)\n      preds_decoded = decode_predictions(preds, top=3)[0] \n      print(decode_predictions(preds, top=3)[0])\n      f.save(path)\n      return render_template('uploaded.html', title='Success', predictions=preds_decoded, user_image=f.filename)\n\n\n\n\n\n@app.route('/map')\ndef map():\n    return render_template('map.html', title='Map')\n\n\n@app.route('/map/refresh', methods=['POST'])\ndef map_refresh():\n    points = [(random.uniform(48.8434100, 48.8634100),\n               random.uniform(2.3388000, 2.3588000))\n              for _ in range(random.randint(2, 9))]\n    return jsonify({'points': points})\n\n\n@app.route('/contact')\ndef contact():\n    return render_template('contact.html', title='Contact')\n</code></pre>\n\n<p>I am not able to figure out where the problem lies and how to fix it.</p>\n\n<p>I think the problem lies on the dimension of the data, should I reshape it?</p>\n"}, {"tags": ["python", "python-3.x", "powerpoint"], "comments": [{"owner": {"reputation": 838, "user_id": 4570170, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PNF05.jpg?s=128&g=1", "display_name": "Chillie", "link": "https://stackoverflow.com/users/4570170/chillie"}, "edited": false, "score": 0, "creation_date": 1570048329, "post_id": 58208869, "comment_id": 102795781, "body": "Sorry, I&#39;m confused. Do you want to open a PowerPoint presentation inside/with this UI, or have this UI inside a presentation?"}, {"owner": {"reputation": 269, "user_id": 7288088, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/e8761678631e09382aadb848f7f28bfb?s=128&d=identicon&r=PG&f=1", "display_name": "pyring", "link": "https://stackoverflow.com/users/7288088/pyring"}, "reply_to_user": {"reputation": 838, "user_id": 4570170, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PNF05.jpg?s=128&g=1", "display_name": "Chillie", "link": "https://stackoverflow.com/users/4570170/chillie"}, "edited": false, "score": 0, "creation_date": 1570051590, "post_id": 58208869, "comment_id": 102796849, "body": "Have this UI inside."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1570063739, "post_id": 58208869, "comment_id": 102799354, "body": "Do you have reason to believe that&#39;s possible?"}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1570064023, "post_id": 58208869, "comment_id": 102799411, "body": "<a href=\"https://support.office.com/en-us/article/import-content-from-other-applications-into-powerpoint-8165a079-e639-4278-81be-8b3ee94f81fb\" rel=\"nofollow noreferrer\">As Microsoft documents</a>, only external applications supporting OLE can be embedded in PowerPoint. I have no reason to believe that support was ever written for PySimpleGUI."}, {"owner": {"reputation": 3307, "user_id": 8743099, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MCygy.png?s=128&g=1", "display_name": "Mike from PSG", "link": "https://stackoverflow.com/users/8743099/mike-from-psg"}, "edited": false, "score": 0, "creation_date": 1570129843, "post_id": 58208869, "comment_id": 102826028, "body": "Can you &quot;embed&quot; an any EXE file inside of power point?  Perhaps turn it into an EXE first using Pyinstaller?"}, {"owner": {"reputation": 3307, "user_id": 8743099, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MCygy.png?s=128&g=1", "display_name": "Mike from PSG", "link": "https://stackoverflow.com/users/8743099/mike-from-psg"}, "edited": false, "score": 0, "creation_date": 1570130492, "post_id": 58208869, "comment_id": 102826285, "body": "If you do get this to work, I&#39;m HIGHLY interested! So please report back.  Working on some power points that use PySimpleGUI examples and it would be awesome if they &quot;ran&quot;"}], "owner": {"reputation": 269, "user_id": 7288088, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/e8761678631e09382aadb848f7f28bfb?s=128&d=identicon&r=PG&f=1", "display_name": "pyring", "link": "https://stackoverflow.com/users/7288088/pyring"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 72, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1570060608, "creation_date": 1570047725, "last_edit_date": 1570060608, "question_id": 58208869, "link": "https://stackoverflow.com/questions/58208869/how-to-embed-on-a-power-point-presentation-an-interactive-window-created-with-py", "title": "How to embed on a power-point presentation an interactive window created with python?", "body": "<p>I have created a window using PySimpleGUI using the code bellow. I would like to use this window on a full screen power-point presentation.</p>\n\n<p>How could I get that interactive window embedded on the presentation?</p>\n\n<pre><code>import PySimpleGUI as sg\n\n# Demo of how columns work\n# window has on row 1 a vertical slider followed by a COLUMN with 7 rows\n# Prior to the Column element, this layout was not possible\n# Columns layouts look identical to window layouts, they are a list of lists of elements.\n\nwindow = sg.Window('Columns')                                   # blank window\n\n# Column layout\ncol = [[sg.Text('col Row 1')],\n       [sg.Text('col Row 2'), sg.Input('col input 1')],\n       [sg.Text('col Row 3'), sg.Input('col input 2')],\n       [sg.Text('col Row 4'), sg.Input('col input 3')],\n       [sg.Text('col Row 5'), sg.Input('col input 4')],\n       [sg.Text('col Row 6'), sg.Input('col input 5')],\n       [sg.Text('col Row 7'), sg.Input('col input 6')]]\n\nlayout = [[sg.Slider(range=(1,100), default_value=10, orientation='v', size=(8,20)), sg.Column(col)],\n          [sg.In('Last input')],\n          [sg.OK()]]\n\n# Display the window and get values\n\nwindow = sg.Window('Compact 1-line window with column', layout)\nevent, values = window.Read()\nwindow.Close()\n\nsg.Popup(event, values, line_width=200)\n</code></pre>\n"}, {"tags": ["python", "android", "python-3.x", "bluetooth", "printer-control-language"], "answers": [{"tags": [], "owner": {"reputation": 554, "user_id": 10177977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf188e08a450371c5a16b079a6bf451f?s=128&d=identicon&r=PG&f=1", "display_name": "Hmerman6006", "link": "https://stackoverflow.com/users/10177977/hmerman6006"}, "is_accepted": false, "score": 0, "last_activity_date": 1575187367, "creation_date": 1575187367, "answer_id": 59123674, "question_id": 58208865, "link": "https://stackoverflow.com/questions/58208865/how-to-send-a-esc-printing-command-over-bluetooth-using-python-on-android/59123674#59123674", "title": "How to send a ESC printing command over Bluetooth using Python on Android?", "body": "<p>Original question answer:  Use Utf-8 encoding and send all commands as ASCII decimals that is encoded as <code>bytearray</code>.  If you send Strings, encode them separately and extend the <code>bytearray</code>.</p>\n"}], "owner": {"reputation": 554, "user_id": 10177977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf188e08a450371c5a16b079a6bf451f?s=128&d=identicon&r=PG&f=1", "display_name": "Hmerman6006", "link": "https://stackoverflow.com/users/10177977/hmerman6006"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 686, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1575187367, "creation_date": 1570047700, "last_edit_date": 1575187037, "question_id": 58208865, "link": "https://stackoverflow.com/questions/58208865/how-to-send-a-esc-printing-command-over-bluetooth-using-python-on-android", "title": "How to send a ESC printing command over Bluetooth using Python on Android?", "body": "<p>So this was my original problem:  I tried printing PIL barcode images using CPCL commands over bluetooth.  The printer is a Rongta RPP320 bluetooth printer which support CPCL &amp; ESC/POS.  I chose CPCL because I have another printer that only runs CPCL and to cut developing time I use CPCL, for the present at least.  For now I am just testing a basic \"Hello World\" command.  So after reading the HP and Zebra CPCL pdf booklets I think I don't really understand everything but enough to have a try.<br>\nSo I scrounged the bluetooth script from <a href=\"http://blog.kevindoran.co/bluetooth-programming-with-python-3/\" rel=\"nofollow noreferrer\">this very helpful site</a>.</p>\n\n<p>Here the adapted code:</p>\n\n<pre><code>import bluetooth\n\nserverMACAddress = '00:00:12:03:00:12'\nport = 3\ns = bluetooth.BluetoothSocket(bluetooth.RFCOMM)\ns.connect((serverMACAddress, port))\nwhile 1:\n    a = b'''!0 200 200 210 1\n    TEXT 4 0 30 40 Hello World\n    FORM\n    OUTPUT'''\n    byt = bytearray(a)\n    for b in byt:\n        s.send(hex(b))\nsock.close()\n</code></pre>\n\n<p>After this script is run I listen for any feedback from the printer using the server script in above link.  Any connection problems via bluetooth I can sort out.<br>\nWhat I want to know is should I send my CPCL text as a hexadecimal bytes or should I encode it with Utf-8 or Latin 1 or something else?  Because the printer is not talking to me at the moment.</p>\n\n<p>E.g. </p>\n\n<pre><code>a = '''!0 200 200 210 1\nTEXT 4 0 30 40 Hello World\nFORM\nOUTPUT'''\nenc = a.encode('Latin 1')\n</code></pre>\n\n<p>Answer:  Use Utf-8 and send all commands as ASCII decimals that is encoded as <code>bytearray</code>.<br><br>\nEDIT to solve original problem:<br>\nSo I have, after many hours, come the conclusion that PyBluez will not work on Android and moved away from trying to print barcode PIL images with CPCL.  I have solved the bluetooth connection with Android problems I had in <a href=\"https://stackoverflow.com/questions/58477961/how-to-use-the-pyjnius-read-and-write-arguments-for-bluetooth-getinputstream-and\">another thread</a>, but I am not finished trying PyBluez on other OS'.  I switched the printer to accept ESC/POS commands and used the following to print barcodes (this also works on a UROVO K319 printer):</p>\n\n<pre><code>gs = 29\nesc = 27\nbcode = str(1001)\nprint('Building barcode command')\n#extend bytearray\n#initialise printer\ninit_cmd = [esc,64]\nwrt_send = bytearray(init_cmd)\n\n#set bcode string placement below barcode \nhri_cmd = [gs,72,2]\nwrt_send.extend(bytearray(hri_cmd))\nhrif = [gs,102,1]\nwrt_send.extend(bytearray(hrif))\n\n#set bcode height\nhbcode_cmd = [gs,104,80]\nwrt_send.extend(bytearray(hbcode_cmd))\n#set bcode width\nwbcode_cmd = [gs,119,6]\nwrt_send.extend(bytearray(wbcode_cmd))\n\n#print bcode very important is len of bcode for Code128 and linefeed dec 10 at end\nprnt_bcode_cmd_pre = [gs,107,73,len(bcode)]\npost = bytearray([10])\nbar = bcode.encode('utf-8')\nprnt_bcode = bytearray(prnt_bcode_cmd_pre)\nprnt_bcode.extend(bar)\nprnt_bcode.extend(post)\nwrt_send.extend(prnt_bcode)\nself.send_stream.write(wrt_send)\nself.send_stream.flush()\n</code></pre>\n\n<p>The reason I did not use escpos python library is because I could not get it to work with bluetooth in Android environment.  I know this did not adhere to what I was trying in my original question, but it did solve my problem about printing barcodes on my printer via bluetooth on Android.</p>\n"}, {"tags": ["javascript", "python", "jquery", "flask"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 12155919, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDjHNy5LNBcNP_4EGBvUrsY_iSLLmnRS4JrD51S=k-s128", "display_name": "Mateusz Delegacz", "link": "https://stackoverflow.com/users/12155919/mateusz-delegacz"}, "is_accepted": true, "score": 0, "last_activity_date": 1570049223, "creation_date": 1570049223, "answer_id": 58209135, "question_id": 58208855, "link": "https://stackoverflow.com/questions/58208855/python-api-call-with-output-to-flask-forloop/58209135#58209135", "title": "Python API Call with output to Flask forloop", "body": "<p>Ok, I had to be a bit stupid, I've found a way.\nYou can call a function with a variable in flask template </p>\n\n<p>Python function:</p>\n\n<pre><code>    @app.route('/')\n@app.route('/home')\ndef display():\n    def get_playlist_image(id):\n        image_response = requests.get('https://api.spotify.com/v1/playlists/' + id + '/images',\n                           headers={'Authorization':'Bearer '+ the_token})\n        image_response_data = image_response.json()\n        image_url = image_response_data[0]['url']\n        return image_url\n    return render_template(\"home.html\", playlists=mongo.db.playlists.find(), get_playlist_image=get_playlist_image)\n</code></pre>\n\n<p>Html template:</p>\n\n<pre><code> &lt;div id=\"api\"&gt;\n                    &lt;img src=\"{{get_playlist_image(p.spotify_id)}}\"/&gt;\n                &lt;/div&gt;\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 12155919, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDjHNy5LNBcNP_4EGBvUrsY_iSLLmnRS4JrD51S=k-s128", "display_name": "Mateusz Delegacz", "link": "https://stackoverflow.com/users/12155919/mateusz-delegacz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 58209135, "answer_count": 1, "score": 0, "last_activity_date": 1570049223, "creation_date": 1570047641, "question_id": 58208855, "link": "https://stackoverflow.com/questions/58208855/python-api-call-with-output-to-flask-forloop", "title": "Python API Call with output to Flask forloop", "body": "<p>I am writing a web python thing using flask, I am basically displaying all my records from a database as a list through a flask template in for loop. </p>\n\n<p>Now I want to call Spotify API and display a cover image from Spotify API next to each of the playlists but I can't get a hang of how to match the id and make a call all in a for loop</p>\n\n<p>Can I make the API call from Flask or maybe call a function with a call within that loop?\nI have also tried that with jQuery AJAX call but displayed image was the same for all items from the last item from the database</p>\n\n<pre><code>import os\nimport requests\nimport json\nfrom dotenv import load_dotenv\nfrom datetime import datetime\n##loading credenditls from seperate file\nfrom credentials import auth_data, auth_string\nfrom flask import Flask, redirect, render_template, request, session, url_for\nfrom flask_pymongo import PyMongo\nfrom bson.objectid import ObjectId\n#enviorement virables loading\nload_dotenv()\nDBNAME = os.getenv(\"DBNAME\")\nDATABASEURI = os.getenv(\"URI\")\n#calling api for spotify token\ntoken_response = requests.post('https://accounts.spotify.com/api/token',\n                    data = auth_data,\n                    headers = auth_string,)  \ntoken_response_data = token_response.json()\n##token\nthe_token = token_response_data['access_token']\n\napp = Flask(__name__)\n\n#Connecting to database\napp.config[\"MONGO_DBNANE\"] = DBNAME\napp.config[\"MONGO_URI\"] = DATABASEURI\n\nmongo = PyMongo(app)\n\ndef get_playlist_image(id):\n    image_response = requests.get('https://api.spotify.com/v1/playlists/' + id + '/images',\n                           headers={'Authorization':'Bearer '+ the_token})\n    image_response_data = image_response.json()\n    image_url = image_response_data[0]['url']\n    return image_url\n\n@app.route('/')\n@app.route('/home')\ndef display():\n    the_playlists = mongo.db.playlists.find()\n    for list in the_playlists:\n        spotifyid = list['spotify_id']\n        the_image_url = get_playlist_image(spotifyid)\n    return render_template(\"home.html\", playlists=mongo.db.playlists.find(), image_url=the_image_url, spotifyid = list['spotify_id']\n    )\n</code></pre>\n"}, {"tags": ["python", "pandas", "dataframe"], "answers": [{"tags": [], "owner": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "is_accepted": true, "score": 1, "last_activity_date": 1570048514, "last_edit_date": 1570048514, "creation_date": 1570048027, "answer_id": 58208928, "question_id": 58208833, "link": "https://stackoverflow.com/questions/58208833/pandas-create-dataframe-of-multiple-column-counts/58208928#58208928", "title": "Pandas Create DataFrame of Multiple Column Counts", "body": "<p>How about <code>value_counts</code>:</p>\n\n<pre><code># use df[['From','To']].apply(...) if you have other columns\ndf.apply(lambda x: x.value_counts())\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>         From  To\nAtlanta     1   1\nBoston      1   2\nDC          2   1\nLA          1   1\n</code></pre>\n\n<hr>\n\n<p><strong>Update</strong>: Another option, which is slightly faster:</p>\n\n<pre><code>df.stack().groupby(level=1).value_counts().unstack(0)\n</code></pre>\n\n<p>Tested:</p>\n\n<pre><code>%timeit -n 100 (df.apply(lambda x: x.value_counts()))\n# 3.7 ms \u00b1 71.7 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 100 loops each)\n\n%timeit -n 100 df.stack().groupby(level=1).value_counts().unstack(0)\n# 2.98 ms \u00b1 87.9 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 100 loops each)\n</code></pre>\n"}], "owner": {"reputation": 439, "user_id": 3851085, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/T1fNB.jpg?s=128&g=1", "display_name": "Alon", "link": "https://stackoverflow.com/users/3851085/alon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "closed_date": 1570048570, "accepted_answer_id": 58208928, "answer_count": 1, "score": 0, "last_activity_date": 1570048514, "creation_date": 1570047550, "last_edit_date": 1570047947, "question_id": 58208833, "link": "https://stackoverflow.com/questions/58208833/pandas-create-dataframe-of-multiple-column-counts", "closed_reason": "Duplicate", "title": "Pandas Create DataFrame of Multiple Column Counts", "body": "<p>I have a Pandas DataFrame that looks like this:</p>\n\n<pre><code>From         To\n--------------------\nDC           Boston\nDC           Boston\nBoston       DC\nAtlanta      LA\nLA           Atlanta\n</code></pre>\n\n<p>I want to create a DataFrame that looks like this:</p>\n\n<pre><code>City       From      To\n-----------------------\nDC         2         1\nBoston     1         2\nAtlanta    1         1\nLA         1         1\n</code></pre>\n\n<p>Each row contains the number of times in which the city is in the 'From' and the 'To' columns.</p>\n\n<p>What is the cleanest way to create such a DataFrame in Python?</p>\n"}, {"tags": ["python", "pandas", "numpy"], "answers": [{"comments": [{"owner": {"reputation": 167, "user_id": 11832526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62396383e30c05500345d0a2491e6b05?s=128&d=identicon&r=PG&f=1", "display_name": "Bigmoose70", "link": "https://stackoverflow.com/users/11832526/bigmoose70"}, "edited": false, "score": 0, "creation_date": 1570050656, "post_id": 58208888, "comment_id": 102796552, "body": "Thank you! I&#39;ve been looking for something &quot;melt&quot; accomplishes for some time now. How would I keep the entries with a NaN in Column 1? I&#39;ve tried altering the dropna clause."}, {"owner": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "reply_to_user": {"reputation": 167, "user_id": 11832526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62396383e30c05500345d0a2491e6b05?s=128&d=identicon&r=PG&f=1", "display_name": "Bigmoose70", "link": "https://stackoverflow.com/users/11832526/bigmoose70"}, "edited": false, "score": 0, "creation_date": 1570050777, "post_id": 58208888, "comment_id": 102796593, "body": "<code>fillna</code> column <code>1</code> with something unique, and replace that by <code>NaN</code> afterwards?"}, {"owner": {"reputation": 167, "user_id": 11832526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62396383e30c05500345d0a2491e6b05?s=128&d=identicon&r=PG&f=1", "display_name": "Bigmoose70", "link": "https://stackoverflow.com/users/11832526/bigmoose70"}, "edited": false, "score": 0, "creation_date": 1570051058, "post_id": 58208888, "comment_id": 102796686, "body": "Great Idea! Thanks!"}], "tags": [], "owner": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "is_accepted": true, "score": 2, "last_activity_date": 1570047822, "creation_date": 1570047822, "answer_id": 58208888, "question_id": 58208811, "link": "https://stackoverflow.com/questions/58208811/transpose-a-dataframe-based-on-the-amount-of-columns-with-values/58208888#58208888", "title": "Transpose a DataFrame based on the amount of Columns with Values", "body": "<p>This is <code>melt</code>:</p>\n\n<pre><code>df.melt(id_vars=['Operator id', 'CountryID']).drop('variable', 1).dropna()\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>     Operator id  CountryID               value\n0     john.smith      376.0      jake.sha.human\n1     john.wayne      826.0   sambaser@fake.com\n2     mike.evans      840.0     ardenn@fake.com\n3   sarah.wagner      356.0     nathan@fake.com\n4     two.chains      784.0         AR@fake.com\n7     mike.evans      840.0  isabellac@fake.com\n9     two.chains      784.0         hr@fake.com\n12    mike.evans      840.0             sam.cha\n</code></pre>\n\n<p>Or <code>stack</code>:</p>\n\n<pre><code>(df.set_index(['Operator id', 'CountryID'])\n   .stack()\n   .reset_index(level=-1, drop=True)\n   .reset_index(name='TransCol')\n)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>    Operator id  CountryID            TransCol\n0    john.smith      376.0      jake.sha.human\n1    john.wayne      826.0   sambaser@fake.com\n2    mike.evans      840.0     ardenn@fake.com\n3    mike.evans      840.0  isabellac@fake.com\n4    mike.evans      840.0             sam.cha\n5  sarah.wagner      356.0     nathan@fake.com\n6    two.chains      784.0         AR@fake.com\n7    two.chains      784.0         hr@fake.com\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 622, "user_id": 10239974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c9b732919673bb063492b412a98930a?s=128&d=identicon&r=PG&f=1", "display_name": "eva-vw", "link": "https://stackoverflow.com/users/10239974/eva-vw"}, "is_accepted": false, "score": 0, "last_activity_date": 1570048377, "creation_date": 1570048377, "answer_id": 58208984, "question_id": 58208811, "link": "https://stackoverflow.com/questions/58208811/transpose-a-dataframe-based-on-the-amount-of-columns-with-values/58208984#58208984", "title": "Transpose a DataFrame based on the amount of Columns with Values", "body": "<p>I'm sure there's a slicker way to do this with stack() but you can do something very simple like:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>id_cols = ['Operator id', 'CountryID']\nfinal_df = df[id_cols].drop_duplicates()\nfor col in [c for c in df.columns if c not in id_cols]:\n    col_df = df[id_cols + [col].dropna().rename(columns={col: 'TransCol'})\n    final_df = final_df.append(col_df, sort=False)\n</code></pre>\n"}], "owner": {"reputation": 167, "user_id": 11832526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62396383e30c05500345d0a2491e6b05?s=128&d=identicon&r=PG&f=1", "display_name": "Bigmoose70", "link": "https://stackoverflow.com/users/11832526/bigmoose70"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 58208888, "answer_count": 2, "score": 1, "last_activity_date": 1570048377, "creation_date": 1570047472, "question_id": 58208811, "link": "https://stackoverflow.com/questions/58208811/transpose-a-dataframe-based-on-the-amount-of-columns-with-values", "title": "Transpose a DataFrame based on the amount of Columns with Values", "body": "<p>I am looking to transpose the columns with values and not NaN in columns numbered 1-11. With each column transpose I need to copy the \"Operator id\" and the rest of the data to each new row. It is possible for each \"Operator id\" there can be up to 11 entries or only 1.</p>\n\n<p>I have tried df.T and df.stack(). </p>\n\n<pre><code>df.head()\nOut[7]: \n    Operator id  CountryID                  1                   2        3    4    5    6    7    8    9   10   11\n0    john.smith      376.0     jake.sha.human                 NaN      NaN  NaN  NaN  NaN  NaN  NaN  NaN  NaN  NaN\n1    john.wayne      826.0  sambaser@fake.com                 NaN      NaN  NaN  NaN  NaN  NaN  NaN  NaN  NaN  NaN\n2    mike.evans      840.0    ardenn@fake.com  isabellac@fake.com  sam.cha  NaN  NaN  NaN  NaN  NaN  NaN  NaN  NaN\n3  sarah.wagner      356.0    nathan@fake.com                 NaN      NaN  NaN  NaN  NaN  NaN  NaN  NaN  NaN  NaN\n4    two.chains      784.0        AR@fake.com         hr@fake.com      NaN  NaN  NaN  NaN  NaN  NaN  NaN  NaN  NaN\n</code></pre>\n\n<pre><code>    Operator id  CountryID               TransCol\n0    john.smith      376.0          jake.sha.human\n1    john.wayne      826.0          sambaser@fake.com\n2    mike.evans      840.0          ardenn@fake.com\n3    mike.evans      840.0          isabellac@fake.com\n4    mike.evans      840.0          sam.cha\n5    sarah.wagner    356.0          nathan@fake.com\n6    two.chains      784.0          AR@fake.com\n7    two.chains      784.0          hr@fake.com\n</code></pre>\n"}, {"tags": ["python", "xml"], "comments": [{"owner": {"reputation": 461, "user_id": 12118774, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MpS5X.jpg?s=128&g=1", "display_name": "Physicing", "link": "https://stackoverflow.com/users/12118774/physicing"}, "edited": false, "score": 1, "creation_date": 1570049011, "post_id": 58208794, "comment_id": 102796019, "body": "With <code>lxml</code>, you can check the following <a href=\"https://stackoverflow.com/questions/14299978/how-to-use-lxml-to-find-an-element-by-text\">link</a>"}, {"owner": {"reputation": 1222, "user_id": 2470378, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/SHj4a.jpg?s=128&g=1", "display_name": "qsp", "link": "https://stackoverflow.com/users/2470378/qsp"}, "reply_to_user": {"reputation": 461, "user_id": 12118774, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MpS5X.jpg?s=128&g=1", "display_name": "Physicing", "link": "https://stackoverflow.com/users/12118774/physicing"}, "edited": false, "score": 0, "creation_date": 1570049610, "post_id": 58208794, "comment_id": 102796214, "body": "@Physicing thanks, unfortunately, I&#39;m only allowed to use plain ElementTree"}, {"owner": {"reputation": 1484, "user_id": 7410383, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211966226936527/picture?type=large", "display_name": "Edeki Okoh", "link": "https://stackoverflow.com/users/7410383/edeki-okoh"}, "edited": false, "score": 0, "creation_date": 1570050802, "post_id": 58208794, "comment_id": 102796604, "body": "Can you post a sample xml?"}], "answers": [{"comments": [{"owner": {"reputation": 1222, "user_id": 2470378, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/SHj4a.jpg?s=128&g=1", "display_name": "qsp", "link": "https://stackoverflow.com/users/2470378/qsp"}, "edited": false, "score": 0, "creation_date": 1570053662, "post_id": 58209493, "comment_id": 102797381, "body": "Thanks. But this approach only returns the immediate node, e.g. Node3 in my example, instead of the Node1 that I want to search for."}], "tags": [], "owner": {"reputation": 461, "user_id": 12118774, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MpS5X.jpg?s=128&g=1", "display_name": "Physicing", "link": "https://stackoverflow.com/users/12118774/physicing"}, "is_accepted": false, "score": 0, "last_activity_date": 1570051051, "creation_date": 1570051051, "answer_id": 58209493, "question_id": 58208794, "link": "https://stackoverflow.com/questions/58208794/search-for-elements-which-contains-a-string-in-its-text-or-in-any-of-its-descend/58209493#58209493", "title": "Search for elements which contains a string in its text or in any of its descendant", "body": "<p>With <code>ElementTree</code> I think you could do something like</p>\n\n<pre><code>import sys\nimport xml.etree.ElementTree as etree\n\ns = \"\"\"&lt;root&gt;\n&lt;element&gt;A&lt;/element&gt;\n  &lt;element2&gt;C&lt;/element2&gt;\n    &lt;element3&gt;TEST&lt;/element3&gt;\n&lt;element&gt;B&lt;/element&gt;\n  &lt;element2&gt;D&lt;/element2&gt;\n    &lt;element3&gt;Test&lt;/element3&gt;\n&lt;/root&gt;\"\"\"\n\ne = etree.fromstring(s)\n\nfound = [element for element in e.iter() if element.text == 'Test']\n\nprint(found[0])\n</code></pre>\n\n<p>Returns:</p>\n\n<pre><code>&lt;Element 'element3' at 0x7f9edb7e7a98&gt;\n</code></pre>\n\n<p><strong>Reference:</strong></p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/10836205/find-element-by-text-with-xpath-in-elementtree\">Find element by text with XPath in ElementTree</a> Answered by <em>Chris</em></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 12314, "user_id": 415016, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/48e653222e0c86dbb4947ea2ea926ff9?s=128&d=identicon&r=PG", "display_name": "balderman", "link": "https://stackoverflow.com/users/415016/balderman"}, "is_accepted": false, "score": 0, "last_activity_date": 1570087602, "creation_date": 1570087602, "answer_id": 58214257, "question_id": 58208794, "link": "https://stackoverflow.com/questions/58208794/search-for-elements-which-contains-a-string-in-its-text-or-in-any-of-its-descend/58214257#58214257", "title": "Search for elements which contains a string in its text or in any of its descendant", "body": "<p>See below</p>\n\n<pre><code>import xml.etree.ElementTree as ET\n\nxml = '''&lt;?xml version=\"1.0\"?&gt;\n&lt;data&gt;\n    &lt;Node1 id=\"Node1\"&gt;Hello World! from Node1\n    &lt;/Node1&gt;\n\n    &lt;Node1 id=\"Node2\"&gt;Nothing to see here\n    &lt;/Node1&gt;\n\n    &lt;Node1 id=\"Node3\"&gt;\n        Some text goes here\n        &lt;Node2&gt;\n            More text\n            &lt;Node3&gt;Hello World! from Node3 &lt;/Node3&gt;\n        &lt;/Node2&gt;\n    &lt;/Node1&gt;\n&lt;/data&gt;'''\n\n\ndef scan_node(node, txt, result):\n    \"\"\"\n    Scan the node (recursively) and look for the text 'txt'\n    :param node:\n    :param txt:\n    :return:\n    \"\"\"\n    children = list(node)\n    for child in children:\n        if txt in child.text:\n            result.append(child)\n        scan_node(child, txt, result)\n\n\nroot = ET.fromstring(xml)\nresult = []\nscan_node(root, 'Hello World', result)\nprint(result)\n</code></pre>\n\n<p>output</p>\n\n<pre><code>[&lt;Element 'Node1' at 0x00723A80&gt;, &lt;Element 'Node3' at 0x00723C30&gt;]\n</code></pre>\n"}], "owner": {"reputation": 1222, "user_id": 2470378, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/SHj4a.jpg?s=128&g=1", "display_name": "qsp", "link": "https://stackoverflow.com/users/2470378/qsp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1570087602, "creation_date": 1570047397, "last_edit_date": 1570051181, "question_id": 58208794, "link": "https://stackoverflow.com/questions/58208794/search-for-elements-which-contains-a-string-in-its-text-or-in-any-of-its-descend", "title": "Search for elements which contains a string in its text or in any of its descendant", "body": "<p>The title says it all. I want to search for all element, say Node1, whose \"Hello World!\" appears in its text, or any of its decedent. If the string appears in a descendant, I still want to get Node1, and not that descendant.</p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;data&gt;\n    &lt;Node1 id=\"Node1\"&gt;Hello World! from Node1\n    &lt;/Node1&gt;\n\n    &lt;Node1 id=\"Node2\"&gt;Nothing to see here\n    &lt;/Node1&gt;\n\n    &lt;Node1 id=\"Node3\"&gt;\n        Some text goes here\n        &lt;Node2&gt;\n            More text\n            &lt;Node3&gt;Hellow World! from Node3 &lt;/Node3&gt;\n        &lt;/Node2&gt;\n    &lt;/Node1&gt;\n&lt;/data&gt;\n</code></pre>\n"}, {"tags": ["javascript", "python", "flask", "raspberry-pi", "gpio"], "comments": [{"owner": {"reputation": 11, "user_id": 12153802, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-66xfjYDShIk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcD6oIAga-CHRqcItdChWPMyBlCYQ/photo.jpg?sz=128", "display_name": "Richie", "link": "https://stackoverflow.com/users/12153802/richie"}, "edited": false, "score": 0, "creation_date": 1572644764, "post_id": 58208789, "comment_id": 103635512, "body": "In the end I worked out a way of doing this."}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 12153802, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-66xfjYDShIk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcD6oIAga-CHRqcItdChWPMyBlCYQ/photo.jpg?sz=128", "display_name": "Richie", "link": "https://stackoverflow.com/users/12153802/richie"}, "is_accepted": true, "score": 0, "last_activity_date": 1572645365, "creation_date": 1572645365, "answer_id": 58666353, "question_id": 58208789, "link": "https://stackoverflow.com/questions/58208789/im-trying-to-find-a-way-of-using-a-gpio-input-on-the-server-side-to-redirect-th/58666353#58666353", "title": "I&#39;m trying to find a way of using a GPIO input on the server side to redirect the client side to another web page rpi, RPi.GPIO, python, flask,j s", "body": "<p>In the end I worked out away to do this....\nThe function that takes the input from the rpi GPIO now creates a file.\nIn my main app I created a new flask route with an if statement. If the file doesn\u2019t exists the function returns a 404.\nIn js on the client side I query the url, if it gets a 200 back which only happens when the file exists it does a redirect.</p>\n\n<p>Effectively making it possible to make a change server side redirect the client side.</p>\n\n<p>I changed the input to pwm so and effectively created a safe tumbler lock, which when the code is entered correctly redirects the web app displayed on the screen in the escape room. </p>\n\n<p>Thanks to the person who took the time to correct my spelling and grammar in my original question.</p>\n\n<p>Now if I can just work out why my rpi is double executing my code hmmm </p>\n"}], "owner": {"reputation": 11, "user_id": 12153802, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-66xfjYDShIk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcD6oIAga-CHRqcItdChWPMyBlCYQ/photo.jpg?sz=128", "display_name": "Richie", "link": "https://stackoverflow.com/users/12153802/richie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 58666353, "answer_count": 1, "score": 1, "last_activity_date": 1572645365, "creation_date": 1570047377, "last_edit_date": 1570053796, "question_id": 58208789, "link": "https://stackoverflow.com/questions/58208789/im-trying-to-find-a-way-of-using-a-gpio-input-on-the-server-side-to-redirect-th", "title": "I&#39;m trying to find a way of using a GPIO input on the server side to redirect the client side to another web page rpi, RPi.GPIO, python, flask,j s", "body": "<p>I'm working on a Escape room project. Effectively, the behavior I'm trying to create is as follows:</p>\n\n<p>Web brower displays part of the web app in the usual way. From this point on, there will be no further inputs from the keyboard/mouse on the client. I've solved for time based changes using JS, so I can load the web app and after a period of time has JS redirects to another app route. Here's where I start struggling as well as the time based redirects I want a GPIO input on the server side to make the browser redirect to another app route.</p>\n\n<p>I'm using threading, so when the app route function runs it starts the thread running on the function that's waiting for the GPIO input. The <code>waitfortrigger</code> function works and runs as it should until I try to return a redirect. At that point I get an unknown context error in the Flask debug log. I can fix the error using <code>app.app_context</code> and <code>app.app_context.push</code>. At that point the <code>waitfortrigger</code> function runs without error but doesn't cause the redirect on the client side. I've also tried using the <code>copy_current_context decorator</code> but don't really understand how to use it and had no success. You might note that I'm using a URL for the redirect rather than the <code>url_for</code> function. Thats because without a client side request <code>url_for</code> can't construct the URL I'm trying to redirect to. Using a full URL really isn't an issue for what I'm trying to do.</p>\n\n<p>I think I'm correct in saying the reason it doesn't work on the client side is because the request doe not come from the client side and is in a different thread from the main app, so that it doesn't understand what to redirect.</p>\n\n<p>Here's a simplified version of the code that im trying:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from flask import Flask, render_template, redirect, url_for, session, logging\nimport RPi.GPIO as GPIO\nimport threading\n\napp = Flask(__name__)\ninput_pin = 18\n\ndef gpio_setup():\n    GPIO.setmode(GPIO.BCM)\n    GPIO.setup(input_pin, GPIO.IN, pull_up_down=GPIO.PUD_UP)\n\ndef waitfortrigger():\n    while GPIO.input(input_pin) == GPIO.HIGH:\n        continue\n    else:\n        con.push()\n        return redirect('http://192.168.0.17:5000/page2')\n\n@app.route('/')\ndef home():\n    trig_thread.start()\n    global con\n    con = app.app_context()\n    return render_template('home.html')\n\n@app.route('/page2')\ndef page2():\n    GPIO.cleanup()\n    return render_template('page2.html')\n\nif __name__ == '__main__':\n    gpio_setup()\n    app.secret_key='test'\n    trig_thread = threading.Thread(target=waitfortrigger)\n    app.run(debug=True, host='0.0.0.0')\n</code></pre>\n\n<p>What I'm thinking now: maybe there's a way I can use the <code>waitfortrigger</code> function to update something on the server side when it sees the GPIO input and in turn monitor something with JS and then redirect in JS on the client side?</p>\n\n<p>Or maybe using Flask for a web app for this isn't the best solution? \nI'm learning as I go so would appreciate any suggestion.</p>\n"}, {"tags": ["python", "tensorflow", "keras"], "comments": [{"owner": {"reputation": 49730, "user_id": 349130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e4efeebbf6994bb904738c4fb8922bf?s=128&d=identicon&r=PG", "display_name": "Dr. Snoopy", "link": "https://stackoverflow.com/users/349130/dr-snoopy"}, "edited": false, "score": 0, "creation_date": 1570066702, "post_id": 58208755, "comment_id": 102799881, "body": "System RAM will always be used to a degree, I am not sure what exactly you are asking."}, {"owner": {"reputation": 549, "user_id": 3443033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bfd6578e70f3d6739c5d38d6a11a467?s=128&d=identicon&r=PG&f=1", "display_name": "user3443033", "link": "https://stackoverflow.com/users/3443033/user3443033"}, "reply_to_user": {"reputation": 49730, "user_id": 349130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e4efeebbf6994bb904738c4fb8922bf?s=128&d=identicon&r=PG", "display_name": "Dr. Snoopy", "link": "https://stackoverflow.com/users/349130/dr-snoopy"}, "edited": false, "score": 0, "creation_date": 1570115857, "post_id": 58208755, "comment_id": 102819876, "body": "In my case, if I check the GPU memory using nvidia-smi, I dont see it is getting used 100%. But, my CPU memory gets used 100%. Should the Tensorflow also not use GPU memory?"}, {"owner": {"reputation": 49730, "user_id": 349130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e4efeebbf6994bb904738c4fb8922bf?s=128&d=identicon&r=PG", "display_name": "Dr. Snoopy", "link": "https://stackoverflow.com/users/349130/dr-snoopy"}, "edited": false, "score": 0, "creation_date": 1570136080, "post_id": 58208755, "comment_id": 102828548, "body": "Using GPU memory does not mean it has to use it to 100%."}, {"owner": {"reputation": 549, "user_id": 3443033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bfd6578e70f3d6739c5d38d6a11a467?s=128&d=identicon&r=PG&f=1", "display_name": "user3443033", "link": "https://stackoverflow.com/users/3443033/user3443033"}, "reply_to_user": {"reputation": 49730, "user_id": 349130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e4efeebbf6994bb904738c4fb8922bf?s=128&d=identicon&r=PG", "display_name": "Dr. Snoopy", "link": "https://stackoverflow.com/users/349130/dr-snoopy"}, "edited": false, "score": 0, "creation_date": 1570206925, "post_id": 58208755, "comment_id": 102852754, "body": "In my case, I don&#39;t see any GPU memory getting used by Tensorflow. I see CPU memory going up but not GPU memory."}], "answers": [{"comments": [{"owner": {"reputation": 549, "user_id": 3443033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bfd6578e70f3d6739c5d38d6a11a467?s=128&d=identicon&r=PG&f=1", "display_name": "user3443033", "link": "https://stackoverflow.com/users/3443033/user3443033"}, "edited": false, "score": 0, "creation_date": 1570055210, "post_id": 58208895, "comment_id": 102797711, "body": "I tried your suggestion. But it did not help. I again see the same behavior with CPU memory. It becomes maximum and after some time the code crashes. I have added the screenshot of the system monitor in the post. Thank you."}], "tags": [], "owner": {"reputation": 461, "user_id": 12118774, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MpS5X.jpg?s=128&g=1", "display_name": "Physicing", "link": "https://stackoverflow.com/users/12118774/physicing"}, "is_accepted": false, "score": 0, "last_activity_date": 1570047848, "creation_date": 1570047848, "answer_id": 58208895, "question_id": 58208755, "link": "https://stackoverflow.com/questions/58208755/allocation-of-86973087744-exceeds-10-of-system-memory/58208895#58208895", "title": "Allocation of 86973087744 exceeds 10% of system memory", "body": "<p>You could try before starting the session :</p>\n\n<pre><code>os.environ[\"CUDA_VISIBLE_DEVICES\"]=\"0\"\ngpu_options = tf.GPUOptions(per_process_gpu_memory_fraction=0.7)\nsess = tf.Session(config=tf.ConfigProto(gpu_options=gpu_options))\n</code></pre>\n\n<p>Since it limits the usage of GPU memory I think you will not have memory crashes. However, keep in mind that with limited usage of GPU memory, the process will be longer. Furthermore <code>os.environ</code> would makes you sure that you are in the CUDA. However <code>=\"0\"</code> part could be changed from system to system. You can also try <code>=\"\"</code> as well. </p>\n"}], "owner": {"reputation": 549, "user_id": 3443033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bfd6578e70f3d6739c5d38d6a11a467?s=128&d=identicon&r=PG&f=1", "display_name": "user3443033", "link": "https://stackoverflow.com/users/3443033/user3443033"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 558, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1570055269, "creation_date": 1570047246, "last_edit_date": 1570055269, "question_id": 58208755, "link": "https://stackoverflow.com/questions/58208755/allocation-of-86973087744-exceeds-10-of-system-memory", "title": "Allocation of 86973087744 exceeds 10% of system memory", "body": "<p><a href=\"https://i.stack.imgur.com/OOD2S.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/OOD2S.png\" alt=\"enter image description here\"></a>I am using SRGAN for super-resolution if images from 64x64 to 1024x1024 image. The network is very deep (it has 16 residual blocks). If I use the code for super-resolution from 64x64 to 256x256, everything is fine. But for 16x upsampling, I start getting the memory error. I am using Nvidia GeForce GTC 1080Ti. On System monitor, I see the memory and swap going up to the maximum values, and after some time the code crashes. I have also installed Tensorflow GPU version. Why is the code using CPU memory instead of GPU memory?</p>\n"}, {"tags": ["python", "compiler-optimization", "assert", "interpreter", "cpython"], "comments": [{"owner": {"reputation": 6802, "user_id": 9609843, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9ceb913f05e91861333b367e0379a8e?s=128&d=identicon&r=PG&f=1", "display_name": "sanyassh", "link": "https://stackoverflow.com/users/9609843/sanyassh"}, "edited": false, "score": 1, "creation_date": 1570049876, "post_id": 58208714, "comment_id": 102796304, "body": "I don&#39;t think it is possible. Your interpreter starts with some level of optimization and compiles all .py files to .pyc, then they are processed by interpreter. If you change optimization level in runtime it won&#39;t have any effect - .pyc files are already compiled."}], "owner": {"reputation": 7293, "user_id": 5994041, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dWWF9.png?s=128&g=1", "display_name": "Peter Badida", "link": "https://stackoverflow.com/users/5994041/peter-badida"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 146, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1570047008, "creation_date": 1570047008, "question_id": 58208714, "link": "https://stackoverflow.com/questions/58208714/dynamically-set-python-interpreter-optimization-at-runtime", "title": "Dynamically set Python interpreter optimization at runtime", "body": "<p>After a while of looking for the duplicates in here the only thing I find is no-ops and optimizing with Cython which is completely unrelated. What I'm trying to accomplish is to <strong>dynamically set <code>python -O</code> flag at runtime</strong>.</p>\n\n<p>Basically, there is one value <code>sys.flags.optimize</code> which is read-only. I'm looking for an option to change it or to find a place which can have this value changed and affects the bytecode generating.</p>\n\n<p>According to the <a href=\"https://docs.python.org/3/tutorial/modules.html#compiled-python-files\" rel=\"nofollow noreferrer\">doc</a> the official way is to call it before the interpreter is spin up, so I wonder if it's even possible, however this is what I've found:</p>\n\n<ul>\n<li><a href=\"https://github.com/python/cpython/blob/99b54d68172ad64ba3d0fdc0137f0df88c28ea2b/Python/compile.c#L161\" rel=\"nofollow noreferrer\"><code>Python/compiler.c -&gt; c_optimize</code></a></li>\n<li><a href=\"https://github.com/python/cpython/blob/8462a4936b3a551dc546a6adea04a70b0a07ca67/Python/initconfig.c#L1251\" rel=\"nofollow noreferrer\"><code>optimization_level</code></a> setup in C from environment variable <code>PYTHONOPTIMIZE</code></li>\n<li><a href=\"https://github.com/python/cpython/blob/2e33ecd7c9b0cac3efc6fcbdd4547fd086b4e2d1/Lib/py_compile.py#L79\" rel=\"nofollow noreferrer\"><code>Lib/py_compile.py</code></a></li>\n</ul>\n\n<p>Which seems like <code>py_compile</code> is called \"somewhere\" (GitHub search shows only doc or tests, not the actual caller at runtime) and manages the <code>optimization_level</code> in the <code>compiler.c</code> from above. That would mean I can change it within Python and make compiled interpreter assemble me code with and without optimizations in the same session/process.</p>\n\n<p>I can't seem to find the CLI params parsing though, nor any related \"state\" that can be changed at runtime.</p>\n\n<p>My target (for now) is to optionally allow/remove <code>assert</code> keyword which can be done by <code>-O</code> alone (via <a href=\"https://github.com/python/cpython/blob/99b54d68172ad64ba3d0fdc0137f0df88c28ea2b/Python/compile.c#L3256\" rel=\"nofollow noreferrer\"><code>compiler_assert()</code></a> that needs the level set, however I'm struggling with finding the \"missing link\" between C code building AST and the actual Python code which seems to be holding the config state (because <code>py_compile</code> contains raw <code>optimize</code> values) and seems to be compiling and loading the bytecode for the interpreter itself.</p>\n\n<p>Is there any way to change the <code>optimization_level</code> so that I can achieve this behavior and pretty much do this in a single Python session?</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>&gt;&gt;&gt; # change optimize to 1\n&gt;&gt;&gt; def test(): assert True\n&gt;&gt;&gt; import dis\n&gt;&gt;&gt; dis.dis(test)\n  1           0 LOAD_CONST               0 (None)\n              2 RETURN_VALUE\n&gt;&gt;&gt; # change optimize to 0\n&gt;&gt;&gt; dis.dis(test)\n  1           0 LOAD_CONST               1 (True)\n              2 POP_JUMP_IF_TRUE         8\n              4 LOAD_GLOBAL              0 (AssertionError)\n              6 RAISE_VARARGS            1\n        &gt;&gt;    8 LOAD_CONST               0 (None)\n             10 RETURN_VALUE\n</code></pre>\n"}, {"tags": ["python", "user-input", "pynput"], "comments": [{"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1570047958, "post_id": 58208712, "comment_id": 102795645, "body": "You may be running into conflicts trying to use <code>pynput</code> and <code>pyautogui</code> at the same time since they both process user-events. You can verify this by writing something that only uses the former, and see if there are similar issues."}, {"owner": {"reputation": 89, "user_id": 12083068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/192c475f1006982b4b415e6d674a0425?s=128&d=identicon&r=PG&f=1", "display_name": "Matt W", "link": "https://stackoverflow.com/users/12083068/matt-w"}, "reply_to_user": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1570048375, "post_id": 58208712, "comment_id": 102795797, "body": "Thanks.  Would you consider this issue to be unexpected?  It seems to make sense to me that it would occur, regardless of which module I use to type the string.  I tried using pynput&#39;s keyboard.type method but it simply wouldn&#39;t trigger anything for some reason."}, {"owner": {"reputation": 89, "user_id": 12083068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/192c475f1006982b4b415e6d674a0425?s=128&d=identicon&r=PG&f=1", "display_name": "Matt W", "link": "https://stackoverflow.com/users/12083068/matt-w"}, "reply_to_user": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1570048846, "post_id": 58208712, "comment_id": 102795946, "body": "I successfully got pynput&#39;s keyboard.type(insert.timestamp) to work but, as I suggested, the issue is the same.  I&#39;m happy it types, though, because pyautogui would not work for OSX users.  Thanks!"}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1570048850, "post_id": 58208712, "comment_id": 102795949, "body": "No it wouldn&#39;t be much of a surprise, as it&#39;s somewhat inherent or intrinsic to what each module does. There might be workarounds\u2026or perhaps you can accomplish everything you need just using <code>pyautogui</code>."}, {"owner": {"reputation": 89, "user_id": 12083068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/192c475f1006982b4b415e6d674a0425?s=128&d=identicon&r=PG&f=1", "display_name": "Matt W", "link": "https://stackoverflow.com/users/12083068/matt-w"}, "reply_to_user": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1570048902, "post_id": 58208712, "comment_id": 102795966, "body": "Working now with entirely pynput but problem persists."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1570048966, "post_id": 58208712, "comment_id": 102795996, "body": "Then you need to modify your question or ask a new, simpler one. The goal should be to provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> of the issue."}, {"owner": {"reputation": 89, "user_id": 12083068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/192c475f1006982b4b415e6d674a0425?s=128&d=identicon&r=PG&f=1", "display_name": "Matt W", "link": "https://stackoverflow.com/users/12083068/matt-w"}, "reply_to_user": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1570049310, "post_id": 58208712, "comment_id": 102796118, "body": "Sorry.  I&#39;m new to all of this.  I will rework the example code."}], "answers": [{"comments": [{"owner": {"reputation": 89, "user_id": 12083068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/192c475f1006982b4b415e6d674a0425?s=128&d=identicon&r=PG&f=1", "display_name": "Matt W", "link": "https://stackoverflow.com/users/12083068/matt-w"}, "edited": false, "score": 1, "creation_date": 1570049748, "post_id": 58209150, "comment_id": 102796261, "body": "Good idea!  This works well.  That said, now that I have the text being written with pynput (preferred for multi-platform reasons), is there a similar pynput functionality or should I go back to my pyautogui solution and use osascript on Macs?"}, {"owner": {"reputation": 389, "user_id": 10504196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83dc1f452a433c607322dadfe6b7ab77?s=128&d=identicon&r=PG&f=1", "display_name": "ItayMiz", "link": "https://stackoverflow.com/users/10504196/itaymiz"}, "reply_to_user": {"reputation": 89, "user_id": 12083068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/192c475f1006982b4b415e6d674a0425?s=128&d=identicon&r=PG&f=1", "display_name": "Matt W", "link": "https://stackoverflow.com/users/12083068/matt-w"}, "edited": false, "score": 1, "creation_date": 1570050084, "post_id": 58209150, "comment_id": 102796373, "body": "Use <code>keyboard.release(Key.shift)</code> (Where keyboard = Controller() )"}, {"owner": {"reputation": 89, "user_id": 12083068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/192c475f1006982b4b415e6d674a0425?s=128&d=identicon&r=PG&f=1", "display_name": "Matt W", "link": "https://stackoverflow.com/users/12083068/matt-w"}, "edited": false, "score": 1, "creation_date": 1570050473, "post_id": 58209150, "comment_id": 102796495, "body": "WORks PERfectly!... just kidding.  Great solution, thanks so much!  How do I mark the question as solved?"}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "reply_to_user": {"reputation": 89, "user_id": 12083068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/192c475f1006982b4b415e6d674a0425?s=128&d=identicon&r=PG&f=1", "display_name": "Matt W", "link": "https://stackoverflow.com/users/12083068/matt-w"}, "edited": false, "score": 2, "creation_date": 1570050640, "post_id": 58209150, "comment_id": 102796547, "body": "@Matt: See <a href=\"https://stackoverflow.com/help/someone-answers\">What should I do when someone answers my question?</a>"}], "tags": [], "owner": {"reputation": 389, "user_id": 10504196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83dc1f452a433c607322dadfe6b7ab77?s=128&d=identicon&r=PG&f=1", "display_name": "ItayMiz", "link": "https://stackoverflow.com/users/10504196/itaymiz"}, "is_accepted": true, "score": 3, "last_activity_date": 1570049314, "creation_date": 1570049314, "answer_id": 58209150, "question_id": 58208712, "link": "https://stackoverflow.com/questions/58208712/how-can-i-ignore-all-user-inputs-for-duration-of-function-run/58209150#58209150", "title": "How can I ignore all user inputs for duration of function run?", "body": "<p>You can use <code>pyautogui.keyUp(\"shift\")</code> before you type.</p>\n\n<pre><code>def insert():\nf=open('tc.txt')\nline=f.readlines()\ninsert.timestamp=(line[0])\ntime.sleep(.1)\npyautogui.keyUp(\"shift\")\npyautogui.typewrite(insert.timestamp)\n</code></pre>\n"}], "owner": {"reputation": 89, "user_id": 12083068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/192c475f1006982b4b415e6d674a0425?s=128&d=identicon&r=PG&f=1", "display_name": "Matt W", "link": "https://stackoverflow.com/users/12083068/matt-w"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 487, "favorite_count": 1, "accepted_answer_id": 58209150, "answer_count": 1, "score": 2, "last_activity_date": 1570052617, "creation_date": 1570047000, "last_edit_date": 1570052617, "question_id": 58208712, "link": "https://stackoverflow.com/questions/58208712/how-can-i-ignore-all-user-inputs-for-duration-of-function-run", "title": "How can I ignore all user inputs for duration of function run?", "body": "<p>I have a Python module that listens for a key combination using pynput then, once it's pressed, it types a string into a text program.  </p>\n\n<p>It works great!  Except...</p>\n\n<p>In the example below, the user's key combo is set to shift + space.  This makes a lot of sense and will likely be the most common chosen key command for Windows users running my program.  The trouble is, while the shift key is held down it changes what pynput types.  Instead of 01/20/2019, it will type )!/20/2019.</p>\n\n<p>I need a way to disable the keyboard until pyautogui is finished typing the string.  Thanks a lot for your help!!!</p>\n\n<p>Bonus question: I can't seem to get a result when the key combination includes a ctrl key.  Key.ctrl simply fails to ever trigger, whilst other keys work fine.  </p>\n\n<pre><code>from pynput.keyboard import Key, Controller, Listener\nimport time\n\nkeyboard = Controller()\n\ndef insert():                                 # check line 1 of config file \n     keyboard.type('01/20/2019')\n\n# The currently active modifiers\ncurrent = set()\n\ndef on_press(key):\n    if key in COMBINATION:\n        current.add(key)\n        if all(k in current for k in COMBINATION):      # I don't know what this k in current for k shit is.\n            current.remove(key)\n            insert()                                # run insert\n\n    if key == Key.esc:\n        listener.stop()\n\n\ndef on_release(key):\n    try:\n        current.remove(key)\n    except KeyError:\n        pass\n\nwith Listener(on_press=on_press, on_release=on_release) as listener:\n    listener.join()\n``\n</code></pre>\n"}, {"tags": ["python", "mysql", "mysql-python"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1570047214, "post_id": 58208711, "comment_id": 102795389, "body": "I think that&#39;s confusing two types of cursor. One is to iterate through result sets, the other is just as a type of connection. Using cursors to arbitrarily rather than sequentially step through result sets is where you have trouble. The slow cursor is <a href=\"https://dev.mysql.com/doc/refman/8.0/en/cursors.html\" rel=\"nofollow noreferrer\"><code>CURSOR</code></a>."}, {"owner": {"reputation": 153, "user_id": 2887850, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Pxi7h.png?s=128&g=1", "display_name": "spideyclick", "link": "https://stackoverflow.com/users/2887850/spideyclick"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1570216734, "post_id": 58208711, "comment_id": 102856387, "body": "I appreciate that! Sounds like I need to broaden my knowledge of SQL a little! I&#39;ll do some looking. Sounds like I&#39;m safe to use the cursor for my query at least!"}], "owner": {"reputation": 153, "user_id": 2887850, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Pxi7h.png?s=128&g=1", "display_name": "spideyclick", "link": "https://stackoverflow.com/users/2887850/spideyclick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 81, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1570050684, "creation_date": 1570046994, "last_edit_date": 1570050684, "question_id": 58208711, "link": "https://stackoverflow.com/questions/58208711/mysqldb-parameterized-queries-without-cursor", "title": "MySQLdb - Parameterized Queries without cursor?", "body": "<p>I'm using <a href=\"https://mysqlclient.readthedocs.io/user_guide.html?highlight=parameter#mysqldb\" rel=\"nofollow noreferrer\">MySQLdb</a> for Python 3.6 to store some data in a database. I have avoided using cursors as per <a href=\"https://stackoverflow.com/questions/6998585/cursors-on-mysql-good-or-bad\">this discussion</a> to avoid the performance hit. However, I am not seeing a good way to <a href=\"https://stackoverflow.com/questions/775296/mysql-parameterized-queries\">parameterize my data</a> unless I use a cursor.</p>\n\n<p>My question is: is there a way to parameterize data on a set based operation, or do I need to choose between using a cursor vs. sanitizing my own data?</p>\n"}, {"tags": ["python", "csv"], "comments": [{"owner": {"reputation": 809, "user_id": 4401979, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-K462hlcobLY/AAAAAAAAAAI/AAAAAAAAAQ0/KWmdibQcv64/photo.jpg?sz=128", "display_name": "FabioL", "link": "https://stackoverflow.com/users/4401979/fabiol"}, "edited": false, "score": 1, "creation_date": 1570047276, "post_id": 58208696, "comment_id": 102795411, "body": "Can you provide the csv file? or a part of it?"}, {"owner": {"reputation": 838, "user_id": 4570170, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PNF05.jpg?s=128&g=1", "display_name": "Chillie", "link": "https://stackoverflow.com/users/4570170/chillie"}, "edited": false, "score": 0, "creation_date": 1570047542, "post_id": 58208696, "comment_id": 102795489, "body": "Does your csv really start with &quot;username,&quot;? Is there a weird BOM that the csv reader fails to parse?"}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1570051590, "post_id": 58208696, "comment_id": 102796850, "body": "What version of Python are you using?"}], "answers": [{"tags": [], "owner": {"reputation": 1494, "user_id": 888386, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/62688936da7702a6c964afc82c3f7d2d?s=128&d=identicon&r=PG", "display_name": "jaypb", "link": "https://stackoverflow.com/users/888386/jaypb"}, "is_accepted": false, "score": 0, "last_activity_date": 1570048685, "creation_date": 1570048685, "answer_id": 58209038, "question_id": 58208696, "link": "https://stackoverflow.com/questions/58208696/trying-to-search-for-item-in-a-csv-file/58209038#58209038", "title": "Trying to search for item in a csv file", "body": "<p>Typically comparison issues like this are caused by formatting or spacing differences.</p>\n\n<p>The easiest way to solve this problem for yourself will be using the lovely <a href=\"https://docs.python.org/2/library/difflib.html\" rel=\"nofollow noreferrer\">difflib.ndiff</a> function. </p>\n\n<p>For an example I just wrote:</p>\n\n<pre><code>import csv\nimport io\n\nimport difflib\n\nCSV_FILE=u' \\uefeffusername,password\\r\\n matt,hunter2'\n\ndata = csv.reader(io.StringIO(CSV_FILE))\n\nusername = \"username\"\nfor row in data:\n  print (\"'\" + row[0] + \"'\")\n\n  print(\"\".join(difflib.ndiff(username, row[0])))\n\n</code></pre>\n\n<p>The output is:</p>\n\n<pre><code>[GCC 6.3.0 20170516] on linux\n' \uefeffusername'\n+  + \uefef+ f  u  s  e  r  n  a  m  e\n' matt'\n+  + m- u- s- e- r- n  a- m- e+ t+ t\n\ueea7\n</code></pre>\n\n<p>Now it's obvious that the first line doesn't match because I have an extra space and an unprintable block character, the second line doesn't match at all. Add this check to your script and you can fix your data source.</p>\n"}, {"tags": [], "owner": {"reputation": 3, "user_id": 11870638, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/479145d03d1a3dce04dd4161c67eaa98?s=128&d=identicon&r=PG&f=1", "display_name": "Josh", "link": "https://stackoverflow.com/users/11870638/josh"}, "is_accepted": false, "score": 0, "last_activity_date": 1570104706, "creation_date": 1570104706, "answer_id": 58218852, "question_id": 58208696, "link": "https://stackoverflow.com/questions/58208696/trying-to-search-for-item-in-a-csv-file/58218852#58218852", "title": "Trying to search for item in a csv file", "body": "<p>Nevermind, forgot csv.reader treats the first line as field names and so skips it out.</p>\n"}], "owner": {"reputation": 3, "user_id": 11870638, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/479145d03d1a3dce04dd4161c67eaa98?s=128&d=identicon&r=PG&f=1", "display_name": "Josh", "link": "https://stackoverflow.com/users/11870638/josh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1570104706, "creation_date": 1570046911, "question_id": 58208696, "link": "https://stackoverflow.com/questions/58208696/trying-to-search-for-item-in-a-csv-file", "title": "Trying to search for item in a csv file", "body": "<pre><code>def dataFinder(username):\n    readData = csv.reader(open(\"patient_data.csv\", \"r\"))\n    for row in readData:\n        print(row[0])\n        if row[0] == username:\n            print(\"True\")\n            break\n    else:\n        print(\"False\")\n\nusername = \"username\"\ndataFinder(username)\n</code></pre>\n\n<p>So when I run this it prints row[0] as \"username\" however, it returns false when it compares row[0] to the variable username, they appear the same and this code has worked in other programs I have run so why isn't it working here?</p>\n"}, {"tags": ["python", "pip"], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 8436751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18eff65dae0027015b1fc42e2ed5a731?s=128&d=identicon&r=PG&f=1", "display_name": "\u0410\u0445\u043c\u0435\u0434 \u0410\u0441\u0430\u0434\u043e\u0432", "link": "https://stackoverflow.com/users/8436751/%d0%90%d1%85%d0%bc%d0%b5%d0%b4-%d0%90%d1%81%d0%b0%d0%b4%d0%be%d0%b2"}, "edited": false, "score": 0, "creation_date": 1570047586, "post_id": 58208710, "comment_id": 102795508, "body": "Thank you for helped me! Yes, it was problem in my setup.cfg file."}, {"owner": {"reputation": 101, "user_id": 3331024, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b214cc5618d4eadb881f9757db97986d?s=128&d=identicon&r=PG", "display_name": "SydDevious", "link": "https://stackoverflow.com/users/3331024/syddevious"}, "edited": false, "score": 0, "creation_date": 1599681281, "post_id": 58208710, "comment_id": 112851995, "body": "Commenting a year later to say thanks. Same issue for me. Renamed my config file. All is well now"}], "tags": [], "owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "is_accepted": true, "score": 1, "last_activity_date": 1570046982, "creation_date": 1570046982, "answer_id": 58208710, "question_id": 58208685, "link": "https://stackoverflow.com/questions/58208685/why-when-installing-any-package-through-pip3-the-configparser-interpolationsynt/58208710#58208710", "title": "Why when installing any package through pip3, the configparser.InterpolationSyntaxError error occurs?", "body": "<p>Check your current working directory for a <code>setup.cfg</code> file with unsupported syntax in it.</p>\n\n<p>This is open issue <a href=\"https://github.com/pypa/pip/issues/5182\" rel=\"nofollow noreferrer\">#5182 CLI parses unrelated config files and then crashes</a>, created by me in April 2018.</p>\n\n<p>As a workaround until the issue is fixed, you can <code>cd</code> into a different directory and try installing again.</p>\n"}], "owner": {"reputation": 17, "user_id": 8436751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18eff65dae0027015b1fc42e2ed5a731?s=128&d=identicon&r=PG&f=1", "display_name": "\u0410\u0445\u043c\u0435\u0434 \u0410\u0441\u0430\u0434\u043e\u0432", "link": "https://stackoverflow.com/users/8436751/%d0%90%d1%85%d0%bc%d0%b5%d0%b4-%d0%90%d1%81%d0%b0%d0%b4%d0%be%d0%b2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "accepted_answer_id": 58208710, "answer_count": 1, "score": 1, "last_activity_date": 1570046982, "creation_date": 1570046875, "question_id": 58208685, "link": "https://stackoverflow.com/questions/58208685/why-when-installing-any-package-through-pip3-the-configparser-interpolationsynt", "title": "Why when installing any package through pip3, the configparser.InterpolationSyntaxError error occurs?", "body": "<p>When I install any package through pip3 for python 3.7.4 an error occurs in the form:</p>\n\n<pre><code>Exception:\nTraceback (most recent call last):\n  File \"/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages/pip/_internal/cli/base_command.py\", line 179, in main\n    status = self.run(options, args)\n  File \"/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages/pip/_internal/commands/install.py\", line 393, in run\n    use_user_site=options.use_user_site,\n  File \"/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages/pip/_internal/req/__init__.py\", line 57, in install_given_reqs\n    **kwargs\n  File \"/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages/pip/_internal/req/req_install.py\", line 913, in install\n    use_user_site=use_user_site, pycompile=pycompile,\n  File \"/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages/pip/_internal/req/req_install.py\", line 445, in move_wheel_files\n    warn_script_location=warn_script_location,\n  File \"/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages/pip/_internal/wheel.py\", line 320, in move_wheel_files\n    prefix=prefix,\n  File \"/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages/pip/_internal/locations.py\", line 166, in distutils_scheme\n    d.parse_config_files()\n  File \"/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/distutils/dist.py\", line 413, in parse_config_files\n    val = parser.get(section,opt)\n  File \"/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/configparser.py\", line 799, in get\n    d)\n  File \"/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/configparser.py\", line 394, in before_get\n    self._interpolate_some(parser, option, L, value, section, defaults, 1)\n  File \"/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/configparser.py\", line 444, in _interpolate_some\n    \"found: %r\" % (rest,))\nconfigparser.InterpolationSyntaxError: '%' must be followed by '%' or '(', found: '%Y-%m-%d %H:%M:%S'\n</code></pre>\n\n<p>I didn\u2019t have this before. This problem has appeared recently. The problem occurs on OS X Mojave version 10.14.6</p>\n"}, {"tags": ["python", "list-comprehension"], "comments": [{"owner": {"reputation": 2956, "user_id": 379181, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/EWoW0.png?s=128&g=1", "display_name": "Oso", "link": "https://stackoverflow.com/users/379181/oso"}, "edited": false, "score": 1, "creation_date": 1570046922, "post_id": 58208677, "comment_id": 102795279, "body": "How would <code>[1, -2]</code> be treated?"}, {"owner": {"reputation": 1044, "user_id": 7284763, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c47efac9c4248f1b5770f939fb6c44a9?s=128&d=identicon&r=PG&f=1", "display_name": "steviestickman", "link": "https://stackoverflow.com/users/7284763/steviestickman"}, "edited": false, "score": 2, "creation_date": 1570047020, "post_id": 58208677, "comment_id": 102795324, "body": "don&#39;t override defaults, use my_list instead of list"}, {"owner": {"reputation": 4770, "user_id": 6340496, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/a2hM0.png?s=128&g=1", "display_name": "S3DEV", "link": "https://stackoverflow.com/users/6340496/s3dev"}, "edited": false, "score": 1, "creation_date": 1570047054, "post_id": 58208677, "comment_id": 102795335, "body": "Can you perform a test on each sub-list which keeps only lists where the sum of absolute values equals the actual sum?"}, {"owner": {"reputation": 117, "user_id": 7041865, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh6.googleusercontent.com/-RQz_7vsoPIU/AAAAAAAAAAI/AAAAAAAAALw/XjeRuZzhgOg/photo.jpg?sz=128", "display_name": "Robert", "link": "https://stackoverflow.com/users/7041865/robert"}, "reply_to_user": {"reputation": 2956, "user_id": 379181, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/EWoW0.png?s=128&g=1", "display_name": "Oso", "link": "https://stackoverflow.com/users/379181/oso"}, "edited": false, "score": 0, "creation_date": 1570048820, "post_id": 58208677, "comment_id": 102795942, "body": "@Andy <code>[1, -2]</code> would be treated different. Only the values that have counter parts are affected."}, {"owner": {"reputation": 43491, "user_id": 4001592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HWyjo.jpg?s=128&g=1", "display_name": "Dani Mesejo", "link": "https://stackoverflow.com/users/4001592/dani-mesejo"}, "edited": false, "score": 0, "creation_date": 1570048994, "post_id": 58208677, "comment_id": 102796011, "body": "Then the answer that you marked as accepted does not works as expected"}], "answers": [{"tags": [], "owner": {"reputation": 43491, "user_id": 4001592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HWyjo.jpg?s=128&g=1", "display_name": "Dani Mesejo", "link": "https://stackoverflow.com/users/4001592/dani-mesejo"}, "is_accepted": false, "score": 2, "last_activity_date": 1570047252, "creation_date": 1570047252, "answer_id": 58208756, "question_id": 58208677, "link": "https://stackoverflow.com/questions/58208677/list-comprehension-headaches/58208756#58208756", "title": "List comprehension headaches", "body": "<p>In general is better to split the task by steps:</p>\n\n<ol>\n<li>Given list find the positives (<code>positives</code> function)</li>\n<li>Given list find the negatives and multiply them by -1 (<code>negatives</code> function)</li>\n<li>If the intersection of both positives and negatives is not empty remove.</li>\n</ol>\n\n<p>So, you could do:</p>\n\n<pre><code>def positives(ls):\n    return set(l for l in ls if l &gt; 0)\n\n\ndef negatives(ls):\n    return set(-1*l for l in ls if l &lt; 0)\n\n\nlist = [[1, 2, 3], [2, 5, 7, 6], [1, -1], [5, 7], [6, 3, 7, 4, 3], [2, 5, 1, -5]]\nresult = [l for l in list if not negatives(l) &amp; positives(l)]\n\nprint(result)\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>[[1, 2, 3], [2, 5, 7, 6], [5, 7], [6, 3, 7, 4, 3]]\n</code></pre>\n\n<p>As a side note you should not use list as a variable name as it shadows the built-int list function.</p>\n"}, {"tags": [], "owner": {"reputation": 1044, "user_id": 7284763, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c47efac9c4248f1b5770f939fb6c44a9?s=128&d=identicon&r=PG&f=1", "display_name": "steviestickman", "link": "https://stackoverflow.com/users/7284763/steviestickman"}, "is_accepted": false, "score": 2, "last_activity_date": 1570048149, "last_edit_date": 1570048149, "creation_date": 1570047750, "answer_id": 58208875, "question_id": 58208677, "link": "https://stackoverflow.com/questions/58208677/list-comprehension-headaches/58208875#58208875", "title": "List comprehension headaches", "body": "<p>Your generator should yield whether the condition to filter an object applies.<br>\nYou then feed the generator to an aggregator to determine if obj should be filtered.<br>\nthe aggregator could be any or all, or something different.</p>\n\n<pre><code># assuming obj should be filtered if both x and the inverse of x are in obj\ndef method_with_all(src):\n    return [obj for obj in src if all(-x not in obj for x in obj)]\n\ndef method_with_any(src):\n    return [obj for obj in src if any(-x in obj for x in obj)]\n\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 117, "user_id": 7041865, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh6.googleusercontent.com/-RQz_7vsoPIU/AAAAAAAAAAI/AAAAAAAAALw/XjeRuZzhgOg/photo.jpg?sz=128", "display_name": "Robert", "link": "https://stackoverflow.com/users/7041865/robert"}, "edited": false, "score": 0, "creation_date": 1570048636, "post_id": 58208880, "comment_id": 102795871, "body": "Thanks, this helped me :)"}, {"owner": {"reputation": 2956, "user_id": 379181, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/EWoW0.png?s=128&g=1", "display_name": "Oso", "link": "https://stackoverflow.com/users/379181/oso"}, "edited": false, "score": 0, "creation_date": 1570064584, "post_id": 58208880, "comment_id": 102799517, "body": "This doesn&#39;t answer the question as clarified in the comments, though. This approach would remove <code>[1, -2]</code>, which is undesired behavior."}, {"owner": {"reputation": 103812, "user_id": 320726, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/02041b18199678d1f02e6d5040dbb907?s=128&d=identicon&r=PG", "display_name": "6502", "link": "https://stackoverflow.com/users/320726/6502"}, "reply_to_user": {"reputation": 2956, "user_id": 379181, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/EWoW0.png?s=128&g=1", "display_name": "Oso", "link": "https://stackoverflow.com/users/379181/oso"}, "edited": false, "score": 0, "creation_date": 1570094358, "post_id": 58208880, "comment_id": 102808187, "body": "@Andy: you&#39;re right, I&#39;ve edited the answer to handle this more complex test"}], "tags": [], "owner": {"reputation": 103812, "user_id": 320726, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/02041b18199678d1f02e6d5040dbb907?s=128&d=identicon&r=PG", "display_name": "6502", "link": "https://stackoverflow.com/users/320726/6502"}, "is_accepted": true, "score": 5, "last_activity_date": 1570094336, "last_edit_date": 1570094336, "creation_date": 1570047787, "answer_id": 58208880, "question_id": 58208677, "link": "https://stackoverflow.com/questions/58208677/list-comprehension-headaches/58208880#58208880", "title": "List comprehension headaches", "body": "<p>Assuming you want lists where elements are either all negative or all positive you can use <code>all</code> predefined function to check for both possibilities</p>\n\n<pre><code>result = [L for L in x if all(y&gt;0 for y in L) or all(y&lt;0 for y in L)]\n</code></pre>\n\n<p>EDIT:</p>\n\n<p>In the comments you clarified what is a valid list (e.g. <code>[-1, 2]</code> is valid)... with this new formulation the test should be</p>\n\n<pre><code>result = [L for L in x if all(-y not in L for y in L)]\n</code></pre>\n\n<p>where each single test is however now quadratic in the size of the list. Using <code>set</code> this problem can be removed</p>\n\n<pre><code>result = [L for L in x if all(-y not in S for S in (set(L),) for y in L)]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 117, "user_id": 7041865, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh6.googleusercontent.com/-RQz_7vsoPIU/AAAAAAAAAAI/AAAAAAAAALw/XjeRuZzhgOg/photo.jpg?sz=128", "display_name": "Robert", "link": "https://stackoverflow.com/users/7041865/robert"}, "edited": false, "score": 0, "creation_date": 1570048754, "post_id": 58208896, "comment_id": 102795909, "body": "Thanks! This makes sense and I up-voted your answer. Now I know why it wasn&#39;t working on my end."}], "tags": [], "owner": {"reputation": 809, "user_id": 4401979, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-K462hlcobLY/AAAAAAAAAAI/AAAAAAAAAQ0/KWmdibQcv64/photo.jpg?sz=128", "display_name": "FabioL", "link": "https://stackoverflow.com/users/4401979/fabiol"}, "is_accepted": false, "score": 3, "last_activity_date": 1570047853, "creation_date": 1570047853, "answer_id": 58208896, "question_id": 58208677, "link": "https://stackoverflow.com/questions/58208677/list-comprehension-headaches/58208896#58208896", "title": "List comprehension headaches", "body": "<p>Using list comprehension you can do something like: </p>\n\n<pre><code>def method2(list):\n    return [obj for obj in list if (all(n&gt;0 for n in obj) or all(n&lt;0 for n in obj))]\n</code></pre>\n\n<p>that, with your example, give as output: </p>\n\n<pre><code>[[1, 2, 3], [2, 5, 7, 6], [5, 7], [6, 3, 7, 4, 3]]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 15239, "user_id": 3161575, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/V5D7Z.png?s=128&g=1", "display_name": "kederrac", "link": "https://stackoverflow.com/users/3161575/kederrac"}, "is_accepted": false, "score": 0, "last_activity_date": 1570047867, "creation_date": 1570047867, "answer_id": 58208898, "question_id": 58208677, "link": "https://stackoverflow.com/questions/58208677/list-comprehension-headaches/58208898#58208898", "title": "List comprehension headaches", "body": "<p>you can filter out the lists that have both negative and positive elements: </p>\n\n<pre><code>def keep_list(nested_list):\n\n    is_first_positive = nested_list[0] &gt; 0\n\n    for element in nested_list[1:]:\n        if (element &gt; 0) != is_first_positive:\n            return False\n\n    return True\n\n\nmy_list = [[1,2,3], [2,5,7,6], [1,-1], [5,7], [6,3,7,4,3], [2, 5, 1, -5]]\n\nprint(list(filter(keep_list, my_list)))\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>[[1, 2, 3], [2, 5, 7, 6], [5, 7], [6, 3, 7, 4, 3]]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 167, "user_id": 4385330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aae51b80efbfb8229da3bf9e38a596ce?s=128&d=identicon&r=PG&f=1", "display_name": "Jojo", "link": "https://stackoverflow.com/users/4385330/jojo"}, "is_accepted": false, "score": 0, "last_activity_date": 1570054917, "creation_date": 1570054917, "answer_id": 58210066, "question_id": 58208677, "link": "https://stackoverflow.com/questions/58208677/list-comprehension-headaches/58210066#58210066", "title": "List comprehension headaches", "body": "<p>Numpy can be used as well. My solution here is similar to the \"all\"-operation suggested by others but coded explicitly and only needs one condition. It checks whether the sign of the all the elements equals the sign of the first element (could be any other as well).</p>\n\n<pre><code>from numpy import *    \n\ndef f(b): \n   return [a for a in b if sum(sign(array(a)) == sign(a[0])) == len(a)]\n</code></pre>\n\n<p>For your case... </p>\n\n<pre><code>data = [[1,2,3], [2,5,7,6], [1,-1], [5,7], [6,3,7,4,3], [2, 5, 1, -5]]\nprint(f(data))\n</code></pre>\n\n<p>...it will return:</p>\n\n<pre><code>[[1, 2, 3], [2, 5, 7, 6], [5, 7], [6, 3, 7, 4, 3]]\n</code></pre>\n"}], "owner": {"reputation": 117, "user_id": 7041865, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh6.googleusercontent.com/-RQz_7vsoPIU/AAAAAAAAAAI/AAAAAAAAALw/XjeRuZzhgOg/photo.jpg?sz=128", "display_name": "Robert", "link": "https://stackoverflow.com/users/7041865/robert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 1, "accepted_answer_id": 58208880, "answer_count": 6, "score": 4, "last_activity_date": 1570094336, "creation_date": 1570046843, "last_edit_date": 1570048070, "question_id": 58208677, "link": "https://stackoverflow.com/questions/58208677/list-comprehension-headaches", "title": "List comprehension headaches", "body": "<p>I have a nested list like this which:</p>\n\n<pre><code>list = [[1,2,3], [2,5,7,6], [1,-1], [5,7], [6,3,7,4,3], [2, 5, 1, -5]]\n</code></pre>\n\n<p>What I am trying to do is to remove nested lists, where the value within these lists are both positive and negative. I have tried doing it by list comprehension, but I couldn't figure it out. </p>\n\n<pre><code>def method(list):\n    return [obj for obj in list if (x for x in obj if -x not in obj)]\n</code></pre>\n\n<p>The obtained results should be like:</p>\n\n<pre><code> list = [[1,2,3], [2,5,7,6], [5,7], [6,3,7,4,3]]\n</code></pre>\n"}, {"tags": ["python", "hex", "byte", "raw-data"], "answers": [{"comments": [{"owner": {"reputation": 117, "user_id": 3553653, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/eada9d575c316e7c9cc05144edc99cf2?s=128&d=identicon&r=PG", "display_name": "user3553653", "link": "https://stackoverflow.com/users/3553653/user3553653"}, "edited": false, "score": 0, "creation_date": 1570048140, "post_id": 58208737, "comment_id": 102795707, "body": "Thanks, this is exactly what pointed me to the right direction. 25,13 degrees celcius is indeed the reading I&#39;m supposed to get."}], "tags": [], "owner": {"reputation": 435647, "user_id": 367273, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/f1ed2b0c87f602ef30229f5c4b04eff6?s=128&d=identicon&r=PG", "display_name": "NPE", "link": "https://stackoverflow.com/users/367273/npe"}, "is_accepted": true, "score": 2, "last_activity_date": 1570047608, "last_edit_date": 1570047608, "creation_date": 1570047162, "answer_id": 58208737, "question_id": 58208667, "link": "https://stackoverflow.com/questions/58208667/what-kind-of-data-is-this-and-how-do-i-turn-it-to-human-readable-form-with-pyth/58208737#58208737", "title": "What kind of data is this, and how do I turn it to human readable form with python?", "body": "<p><code>Val32</code> is a 32-bit integer (little-endian by the look of things).  In your example, <code>d1090000</code>.  What follows thereafter is a subsequent message which will need to be decoded separately (it has the same format and is of type <code>GAS_REPORT_ID</code>).</p>\n\n<p>Since <code>0x000009d1 = 2513</code>, if I were to guess I'd say this is in hundredths of degrees C, i.e. <code>25.13C</code> (assuming this is ambient temperature and not, say, a reading from an oven).  Please don't rely on my guesswork though and read the relevant specs. :)</p>\n\n<p>You could use the <a href=\"https://docs.python.org/3/library/struct.html\" rel=\"nofollow noreferrer\"><code>struct</code></a> module to unpack the binary data in Python.</p>\n"}], "owner": {"reputation": 117, "user_id": 3553653, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/eada9d575c316e7c9cc05144edc99cf2?s=128&d=identicon&r=PG", "display_name": "user3553653", "link": "https://stackoverflow.com/users/3553653/user3553653"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 58208737, "answer_count": 1, "score": 1, "last_activity_date": 1570054885, "creation_date": 1570046822, "last_edit_date": 1570054885, "question_id": 58208667, "link": "https://stackoverflow.com/questions/58208667/what-kind-of-data-is-this-and-how-do-i-turn-it-to-human-readable-form-with-pyth", "title": "What kind of data is this, and how do I turn it to human readable form with python?", "body": "<p>I'm pulling data out from DA-14585 IoT device. I'm getting a report from the temperature sensor which is as follows:</p>\n\n<p><code>a50f060203d10900000b020390290000</code></p>\n\n<p>Reading <a href=\"https://www.dialog-semiconductor.com/sites/default/files/um-b-101_da14585_iot_multi_sensor_development_kit_developer_guide_rev1.1.pdf#table12\" rel=\"nofollow noreferrer\">the documentation</a> (search for table 12) tells me that</p>\n\n<p><code>a5</code> is preamble</p>\n\n<p><code>0f</code> is timestamp</p>\n\n<p><code>06</code> is the sensor id (temperature)</p>\n\n<p><code>02</code> is the sensor state (always 2)</p>\n\n<p><code>03</code> is the sensor value (always 3)</p>\n\n<p><code>d10900000b020390290000</code> is the actual sensor data, which is listed as \"Val32\". </p>\n\n<p>Mainly I'm wondering, what format is this data in, and how would one go with turning this into a human readable form? Same goes for the timestamp, which is 0f. </p>\n\n<p>I'm mainly working with Python.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 38630, "user_id": 1324033, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/PaonW.png?s=128&g=1", "display_name": "Sayse", "link": "https://stackoverflow.com/users/1324033/sayse"}, "edited": false, "score": 2, "creation_date": 1570047183, "post_id": 58208663, "comment_id": 102795379, "body": "There isn&#39;t a problem, you negate the while loop condition and then there isn&#39;t anything else in that iteration of the loop. <code>endLoop</code> refers to the outer for loop"}, {"owner": {"reputation": 435, "user_id": 6662984, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cccAu.png?s=128&g=1", "display_name": "Mahmudul Hasan", "link": "https://stackoverflow.com/users/6662984/mahmudul-hasan"}, "reply_to_user": {"reputation": 38630, "user_id": 1324033, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/PaonW.png?s=128&g=1", "display_name": "Sayse", "link": "https://stackoverflow.com/users/1324033/sayse"}, "edited": false, "score": 0, "creation_date": 1570047414, "post_id": 58208663, "comment_id": 102795447, "body": "I&#39;ve edited the problem. Please have a look now. there was a mistake in my writing."}, {"owner": {"reputation": 435647, "user_id": 367273, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/f1ed2b0c87f602ef30229f5c4b04eff6?s=128&d=identicon&r=PG", "display_name": "NPE", "link": "https://stackoverflow.com/users/367273/npe"}, "edited": false, "score": 0, "creation_date": 1570048116, "post_id": 58208663, "comment_id": 102795701, "body": "Is it intentional that you have both <code>loop</code> and <code>endLoop</code>?  In particular, you never set the latter to <code>True</code>."}], "answers": [{"tags": [], "owner": {"reputation": 9567, "user_id": 7916438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8541ff62182bcfd172e116a4e0d2fa58?s=128&d=identicon&r=PG", "display_name": "tevemadar", "link": "https://stackoverflow.com/users/7916438/tevemadar"}, "is_accepted": false, "score": 1, "last_activity_date": 1570048400, "creation_date": 1570048400, "answer_id": 58208988, "question_id": 58208663, "link": "https://stackoverflow.com/questions/58208663/loop-is-breaking-in-a-wrong-place-in-python/58208988#58208988", "title": "Loop is breaking in a wrong place in python", "body": "<p><code>loop</code> stays <code>False</code> after the first word, that is why. You should initialize it inside the <code>for</code>:</p>\n\n<pre><code>for word in words:\n    loop = True\n    while loop:\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 556, "user_id": 12156349, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c396971fe33bf92a53d9949b26e79c06?s=128&d=identicon&r=PG&f=1", "display_name": "alexpiers", "link": "https://stackoverflow.com/users/12156349/alexpiers"}, "is_accepted": false, "score": 1, "last_activity_date": 1570055724, "creation_date": 1570055724, "answer_id": 58210176, "question_id": 58208663, "link": "https://stackoverflow.com/questions/58208663/loop-is-breaking-in-a-wrong-place-in-python/58210176#58210176", "title": "Loop is breaking in a wrong place in python", "body": "<p>I wouldn't say the loop is breaking where you have pointed out. After <code>loop = False</code>, you correctly end the <code>while</code> loop and move onto the next entry in the <code>words</code> list. However, at this point <code>loop</code> is still false, so you will never enter the while loop, so it appears like the loop is breaking, when really you are iterating over the list of words correctly, just not entering the for loop.</p>\n\n<p>Instead something like:</p>\n\n<pre><code>for word in words:\n    loop = True\n    while loop:\n         &lt;Processing code goes here&gt;\n</code></pre>\n\n<p>So each iteration of you for loop, you make sure that the while loop will be entered at least once. </p>\n"}], "owner": {"reputation": 435, "user_id": 6662984, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cccAu.png?s=128&g=1", "display_name": "Mahmudul Hasan", "link": "https://stackoverflow.com/users/6662984/mahmudul-hasan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1570055724, "creation_date": 1570046815, "last_edit_date": 1570047368, "question_id": 58208663, "link": "https://stackoverflow.com/questions/58208663/loop-is-breaking-in-a-wrong-place-in-python", "title": "Loop is breaking in a wrong place in python", "body": "<p>I wrote this code in python. It's a part of a large code file. I explained my problem after the code below.</p>\n\n<pre><code>def main():\n    maxAttempt = 5\n    endLoop = False\n    isFailed = False\n    words = ['a', 'apple']\n    loop = True\n    for word in words:\n        while loop != False:\n            print(word)\n            uResult = input(\n                f'Enter the word: ').upper()\n            if uResult == word.upper():\n                print('Congrats!')\n                loop = False\n                # The loop is breaking here\n            else:\n                maxAttempt -= 1\n                if maxAttempt == 0:\n                    isFailed = True\n                    break\n                print('try again')\n        if endLoop:\n            break\n\n    if not isFailed:\n        print('Congrats! You are safe now.')\n\n\nif __name__ == \"__main__\":\n    main()\n</code></pre>\n\n<p>I want to break the <code>for</code> loop if the <code>endLoop</code> is <code>True</code>. But the loop is breaking right after executing the <code>if</code> block - </p>\n\n<pre><code>if uResult == word.upper():\n                print('Congrats!')\n                loop = False\n</code></pre>\n\n<p>Where is the problem and how can I solve this? \nHope I was able to explain my problem. Thanks in advance.</p>\n"}, {"tags": ["python", "python-3.x", "tensorflow", "keras", "tf.keras"], "comments": [{"owner": {"reputation": 2868, "user_id": 7212365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FBxLp.png?s=128&g=1", "display_name": "zihaozhihao", "link": "https://stackoverflow.com/users/7212365/zihaozhihao"}, "edited": false, "score": 0, "creation_date": 1570048149, "post_id": 58208659, "comment_id": 102795713, "body": "Looks like you lost connection with your remote host. Check this blog post to see some possible solution <a href=\"https://thomas-cokelaer.info/blog/2017/05/packet_write_wait-connection-to-xxx-broken-pipe/\" rel=\"nofollow noreferrer\">thomas-cokelaer.info/blog/2017/05/&hellip;</a>"}, {"owner": {"reputation": 1004, "user_id": 1249184, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/UkPsU.jpg?s=128&g=1", "display_name": "DukeLover", "link": "https://stackoverflow.com/users/1249184/dukelover"}, "reply_to_user": {"reputation": 2868, "user_id": 7212365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FBxLp.png?s=128&g=1", "display_name": "zihaozhihao", "link": "https://stackoverflow.com/users/7212365/zihaozhihao"}, "edited": false, "score": 0, "creation_date": 1570057124, "post_id": 58208659, "comment_id": 102798134, "body": "Hi , no it is not coincident. I can observe every time , I run something on GPU , jupyter server gets stuck and eventually the connection is broken."}], "owner": {"reputation": 1004, "user_id": 1249184, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/UkPsU.jpg?s=128&g=1", "display_name": "DukeLover", "link": "https://stackoverflow.com/users/1249184/dukelover"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 116, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1570046803, "creation_date": 1570046803, "question_id": 58208659, "link": "https://stackoverflow.com/questions/58208659/tensorflow-distribute-mirroredstrategy-crashes-jupyter", "title": "tensorflow.distribute.MirroredStrategy crashes jupyter", "body": "<p>Here is my sample code which I want to run on multiple GPUs:</p>\n\n<pre><code>Python 3.6.9 |Anaconda, Inc.| (default, Jul 30 2019, 19:07:31) \n[GCC 7.3.0] on linux\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; \n&gt;&gt;&gt; import tensorflow as tf\n&gt;&gt;&gt; tf.debugging.set_log_device_placement(True)\n&gt;&gt;&gt; strategy = tf.distribute.MirroredStrategy()\n2019-10-03 01:31:40.996949: I tensorflow/stream_executor/platform/default/dso_loader.cc:42] Successfully opened dynamic library libcuda.so.1\n2019-10-03 01:31:41.202104: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1640] Found device 0 with properties: \nname: Tesla M60 major: 5 minor: 2 memoryClockRate(GHz): 1.1775\npciBusID: 0000:88:00.0\n2019-10-03 01:31:41.204216: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1640] Found device 1 with properties: \nname: Tesla M60 major: 5 minor: 2 memoryClockRate(GHz): 1.1775\npciBusID: 0000:89:00.0\n2019-10-03 01:31:41.206891: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1640] Found device 2 with properties: \nname: Tesla M60 major: 5 minor: 2 memoryClockRate(GHz): 1.1775\npciBusID: 0000:b1:00.0\n2019-10-03 01:31:41.208973: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1640] Found device 3 with properties: \nname: Tesla M60 major: 5 minor: 2 memoryClockRate(GHz): 1.1775\npciBusID: 0000:b2:00.0\n2019-10-03 01:31:41.210742: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1640] Found device 4 with properties: \nname: Quadro P620 major: 6 minor: 1 memoryClockRate(GHz): 1.354\npciBusID: 0000:3b:00.0\n2019-10-03 01:31:41.212942: I tensorflow/stream_executor/platform/default/dso_loader.cc:42] Successfully opened dynamic library libcudart.so.10.0\n2019-10-03 01:31:41.238005: I tensorflow/stream_executor/platform/default/dso_loader.cc:42] Successfully opened dynamic library libcublas.so.10.0\n2019-10-03 01:31:41.250276: I tensorflow/stream_executor/platform/default/dso_loader.cc:42] Successfully opened dynamic library libcufft.so.10.0\n2019-10-03 01:31:41.253403: I tensorflow/stream_executor/platform/default/dso_loader.cc:42] Successfully opened dynamic library libcurand.so.10.0\n2019-10-03 01:31:41.282306: I tensorflow/stream_executor/platform/default/dso_loader.cc:42] Successfully opened dynamic library libcusolver.so.10.0\n2019-10-03 01:31:41.298864: I tensorflow/stream_executor/platform/default/dso_loader.cc:42] Successfully opened dynamic library libcusparse.so.10.0\n2019-10-03 01:31:41.680756: I tensorflow/stream_executor/platform/default/dso_loader.cc:42] Successfully opened dynamic library libcudnn.so.7\n2019-10-03 01:31:41.700545: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1748] Ignoring visible gpu device (device: 4, name: Quadro P620, pci bus id: 0000:3b:00.0, compute capability: 6.1) with core count: 4. The minimum required count is 8. You can adjust this requirement with the env var TF_MIN_GPU_MULTIPROCESSOR_COUNT.\n2019-10-03 01:31:41.700587: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1763] Adding visible gpu devices: 0, 1, 2, 3\n2019-10-03 01:31:41.730124: I tensorflow/core/platform/cpu_feature_guard.cc:142] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 AVX512F FMA\n2019-10-03 01:31:42.529773: I tensorflow/compiler/xla/service/service.cc:168] XLA service 0x557fadad7e70 executing computations on platform CUDA. Devices:\n2019-10-03 01:31:42.529852: I tensorflow/compiler/xla/service/service.cc:175]   StreamExecutor device (0): Tesla M60, Compute Capability 5.2\n2019-10-03 01:31:42.529879: I tensorflow/compiler/xla/service/service.cc:175]   StreamExecutor device (1): Tesla M60, Compute Capability 5.2\n2019-10-03 01:31:42.529897: I tensorflow/compiler/xla/service/service.cc:175]   StreamExecutor device (2): Tesla M60, Compute Capability 5.2\n2019-10-03 01:31:42.529914: I tensorflow/compiler/xla/service/service.cc:175]   StreamExecutor device (3): Tesla M60, Compute Capability 5.2\n2019-10-03 01:31:42.665047: I tensorflow/core/platform/profile_utils/cpu_utils.cc:94] CPU Frequency: 2100000000 Hz\n2019-10-03 01:31:42.681099: I tensorflow/compiler/xla/service/service.cc:168] XLA service 0x557fade9e890 executing computations on platform Host. Devices:\n2019-10-03 01:31:42.681154: I tensorflow/compiler/xla/service/service.cc:175]   StreamExecutor device (0): &lt;undefined&gt;, &lt;undefined&gt;\npacket_write_wait: Connection to 192.168.134.68 port 22: Broken pipe\n</code></pre>\n\n<p>I can see that the <code>tf.distribute.MirroredStrategy()</code> line crashes the system. You can probably see that the connection also gets closed.</p>\n\n<p>Can you please help ?</p>\n"}, {"tags": ["python", "dialogflow-es"], "comments": [{"owner": {"reputation": 7796, "user_id": 2334254, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh4.googleusercontent.com/-6e2XuTZAjgM/AAAAAAAAAAI/AAAAAAAAABU/JpF2-AkHsH4/photo.jpg?sz=128", "display_name": "kpie", "link": "https://stackoverflow.com/users/2334254/kpie"}, "edited": false, "score": 0, "creation_date": 1570047362, "post_id": 58208643, "comment_id": 102795431, "body": "Looks like they use callbacks to handle the results of the import and export. maybe try that?"}, {"owner": {"reputation": 41, "user_id": 6348454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5c2bdc6ff0c3a29179a33acb16ccec8?s=128&d=identicon&r=PG&f=1", "display_name": "mrphysics", "link": "https://stackoverflow.com/users/6348454/mrphysics"}, "reply_to_user": {"reputation": 7796, "user_id": 2334254, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh4.googleusercontent.com/-6e2XuTZAjgM/AAAAAAAAAAI/AAAAAAAAABU/JpF2-AkHsH4/photo.jpg?sz=128", "display_name": "kpie", "link": "https://stackoverflow.com/users/2334254/kpie"}, "edited": false, "score": 0, "creation_date": 1570048238, "post_id": 58208643, "comment_id": 102795743, "body": "so just append this code?     def callback(operation_future):         result = operation_future.result()     response.add_done_callback(callback)"}, {"owner": {"reputation": 5825, "user_id": 3196845, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/WZS0i.png?s=128&g=1", "display_name": "sid8491", "link": "https://stackoverflow.com/users/3196845/sid8491"}, "edited": false, "score": 0, "creation_date": 1570081048, "post_id": 58208643, "comment_id": 102802446, "body": "what error you are getting?"}], "owner": {"reputation": 41, "user_id": 6348454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5c2bdc6ff0c3a29179a33acb16ccec8?s=128&d=identicon&r=PG&f=1", "display_name": "mrphysics", "link": "https://stackoverflow.com/users/6348454/mrphysics"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 163, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1570046688, "creation_date": 1570046688, "question_id": 58208643, "link": "https://stackoverflow.com/questions/58208643/simple-example-to-export-and-import-a-dialogflow-agent-in-python", "title": "Simple Example to Export and Import a Dialogflow Agent in Python", "body": "<p>I'm having trouble executing a simple bit of code to export or import my Dialogflow agent in Python.  I'm not sure what is wrong with the below code and was hoping someone could help me out.  The Python dialogflow library documentation is confusing.</p>\n\n<pre><code>import dialogflow_v2\nimport os\n\n\nos.environ[\"GOOGLE_APPLICATION_CREDENTIALS\"]=\"C:\\\\path\\\\to\\\\credentials.json\"\nproject = \"my_project\"\nclient = dialogflow_v2.AgentsClient()\nparent = client.project_path(project)\nresponse = client.export_agent(parent)\nresponse = client.import_agent(parent) \n</code></pre>\n"}, {"tags": ["python"], "answers": [{"comments": [{"owner": {"reputation": 1178, "user_id": 11786778, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xZ5YgBdyerM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcCFSAwgN8TFFb4x1HJT6LzcoJW5Q/photo.jpg?sz=128", "display_name": "Nathalie", "link": "https://stackoverflow.com/users/11786778/nathalie"}, "edited": false, "score": 0, "creation_date": 1570048695, "post_id": 58208955, "comment_id": 102795887, "body": "Thank you. I tried to unistall rpy2 but it is not exist"}], "tags": [], "owner": {"reputation": 11, "user_id": 12029085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18df90d28238e0b4b44c165a45b9aaf5?s=128&d=identicon&r=PG&f=1", "display_name": "Sneha-md", "link": "https://stackoverflow.com/users/12029085/sneha-md"}, "is_accepted": false, "score": 1, "last_activity_date": 1570048155, "creation_date": 1570048155, "answer_id": 58208955, "question_id": 58208618, "link": "https://stackoverflow.com/questions/58208618/install-using-pip-a-specific-module/58208955#58208955", "title": "Install using pip a specific module", "body": "<p>Seems like there happens to be a cache issue. Have you installed the package before ? If yes then try to uninstall the package and then try reinstalling it once. </p>\n"}, {"tags": [], "owner": {"reputation": 121, "user_id": 12102280, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDZfv7GA6_wOHBJnpLhIcHQzeq64OluTjiyfHRuow=k-s128", "display_name": "valeriored83", "link": "https://stackoverflow.com/users/12102280/valeriored83"}, "is_accepted": false, "score": 1, "last_activity_date": 1570048825, "creation_date": 1570048825, "answer_id": 58209060, "question_id": 58208618, "link": "https://stackoverflow.com/questions/58208618/install-using-pip-a-specific-module/58209060#58209060", "title": "Install using pip a specific module", "body": "<p>It may be because you need the R libraries. It Should work using anaconda.\nFirst install anaconda (see <a href=\"https://www.anaconda.com/distribution/\" rel=\"nofollow noreferrer\">https://www.anaconda.com/distribution/</a>)\nThen you install running from the anaconda console.</p>\n\n<pre><code>conda install rpy2\n</code></pre>\n\n<p>The difference is that it will take care of the dependencies.\nSee last and most recent answer in: <a href=\"https://stackoverflow.com/questions/38955491/installing-rpy2-for-python-3-using-pip\">Installing rpy2 for Python 3 using pip</a></p>\n"}], "owner": {"reputation": 1178, "user_id": 11786778, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xZ5YgBdyerM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcCFSAwgN8TFFb4x1HJT6LzcoJW5Q/photo.jpg?sz=128", "display_name": "Nathalie", "link": "https://stackoverflow.com/users/11786778/nathalie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 247, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1570048825, "creation_date": 1570046604, "question_id": 58208618, "link": "https://stackoverflow.com/questions/58208618/install-using-pip-a-specific-module", "title": "Install using pip a specific module", "body": "<p>I try to install rpy2 using pip.</p>\n\n<p>I user windows 10.</p>\n\n<p>I run the pip command in cmd console with admin option</p>\n\n<p>However I receive this error:</p>\n\n<p>pip install rpy2</p>\n\n<blockquote>\n<pre><code> Collecting rpy2\n      Using cached https://files.pythonhosted.org/packages/7e/e0/7da849bb6cf47466ceb28a75f930e61c311878882c275dfb4bbb4fdcc3cb/rpy2-3.2.0.tar.gz\n        ERROR: Command errored out with exit status 1:\n         command: 'c:\\users\\mary\\appdata\\local\\programs\\python\\python37-32\\python.exe'\n</code></pre>\n  \n  <p>-c 'import sys, setuptools, tokenize; sys.argv[0] = '\"'\"'C:\\Users\\Mary\\AppData\\Local\\Temp\\pip-install-bov9dean\\rpy2\\setup.py'\"'\"';\n  <strong>file</strong>='\"'\"'C:\\Users\\Mary\\AppData\\Local\\Temp\\pip-install-bov9dean\\rpy2\\setup.py'\"'\"';f=getattr(tokenize,\n  '\"'\"'open'\"'\"', open)(<strong>file</strong>);code=f.read().replace('\"'\"'\\r\\n'\"'\"',\n  '\"'\"'\\n'\"'\"');f.close();exec(compile(code, <strong>file</strong>, '\"'\"'exec'\"'\"'))'\n  egg_info --egg-base pip-egg-info\n                   cwd: C:\\Users\\Mary\\AppData\\Local\\Temp\\pip-install-bov9dean\\rpy2\\\n              Complete output (79 lines):\n              test_pw_r.c\n              C:\\Users\\Mary\\AppData\\Local\\Temp\\tmp_pw_r_b9t41l4r\\test_pw_r.c(1):\n  fatal error C1083: Cannot open include file: 'Rinterface.h': No such\n  file or directory\n              warning: no previously-included files found matching 'setup.pyc'\n              warning: no previously-included files matching 'yacctab.<em>' found under directory 'tests'\n              warning: no previously-included files matching 'lextab.</em>' found under directory 'tests'\n              warning: no previously-included files matching 'yacctab.<em>' found under directory 'examples'\n              warning: no previously-included files matching 'lextab.</em>' found under directory 'examples'\n              zip_safe flag not set; analyzing archive contents...\n              pycparser.ply.<strong>pycache</strong>.lex.cpython-37: module references <strong>file</strong>\n              pycparser.ply.<strong>pycache</strong>.lex.cpython-37: module MAY be using inspect.getsourcefile\n              pycparser.ply.<strong>pycache</strong>.yacc.cpython-37: module references <strong>file</strong>\n              pycparser.ply.<strong>pycache</strong>.yacc.cpython-37: module MAY be using inspect.getsourcefile\n              pycparser.ply.<strong>pycache</strong>.yacc.cpython-37: module MAY be using inspect.stack\n              pycparser.ply.<strong>pycache</strong>.ygen.cpython-37: module references <strong>file</strong></p>\n\n<pre><code>        Installed c:\\users\\mary\\appdata\\local\\temp\\pip-install-bov9dean\\rpy2\\.eggs\\pycparser-2.19-py3.7.egg\n        Traceback (most recent call last):\n          File \"c:\\users\\mary\\appdata\\local\\temp\\pip-install-bov9dean\\rpy2\\.eggs\\cffi-1.12.3-py3.7-win32.egg\\cffi\\cparser.py\",\n</code></pre>\n  \n  <p>line 294, in _parse\n                  ast = _get_parser().parse(fullcsource)\n                File \"c:\\users\\mary\\appdata\\local\\temp\\pip-install-bov9dean\\rpy2.eggs\\pycparser-2.19-py3.7.egg\\pycparser\\c_parser.py\",\n  line 152, in parse\n                  debug=debuglevel)\n                File \"c:\\users\\mary\\appdata\\local\\temp\\pip-install-bov9dean\\rpy2.eggs\\pycparser-2.19-py3.7.egg\\pycparser\\ply\\yacc.py\",\n  line 331, in parse\n                  return self.parseopt_notrack(input, lexer, debug, tracking, tokenfunc)\n                File \"c:\\users\\mary\\appdata\\local\\temp\\pip-install-bov9dean\\rpy2.eggs\\pycparser-2.19-py3.7.egg\\pycparser\\ply\\yacc.py\",\n  line 1061, in parseopt_notrack\n                  lookahead = get_token()     # Get the next token\n                File \"c:\\users\\mary\\appdata\\local\\temp\\pip-install-bov9dean\\rpy2.eggs\\pycparser-2.19-py3.7.egg\\pycparser\\c_lexer.py\",\n  line 77, in token\n                  self.last_token = self.lexer.token()\n                File \"c:\\users\\mary\\appdata\\local\\temp\\pip-install-bov9dean\\rpy2.eggs\\pycparser-2.19-py3.7.egg\\pycparser\\ply\\lex.py\",\n  line 386, in token\n                  newtok = self.lexerrorf(tok)\n                File \"c:\\users\\mary\\appdata\\local\\temp\\pip-install-bov9dean\\rpy2.eggs\\pycparser-2.19-py3.7.egg\\pycparser\\c_lexer.py\",\n  line 484, in t_error\n                  self._error(msg, t)\n                File \"c:\\users\\mary\\appdata\\local\\temp\\pip-install-bov9dean\\rpy2.eggs\\pycparser-2.19-py3.7.egg\\pycparser\\c_lexer.py\",\n  line 93, in _error\n                  self.error_func(msg, location[0], location[1])\n                File \"c:\\users\\mary\\appdata\\local\\temp\\pip-install-bov9dean\\rpy2.eggs\\pycparser-2.19-py3.7.egg\\pycparser\\c_parser.py\",\n  line 193, in _lex_error_func\n                  self._parse_error(msg, self._coord(line, column))\n                File \"c:\\users\\mary\\appdata\\local\\temp\\pip-install-bov9dean\\rpy2.eggs\\pycparser-2.19-py3.7.egg\\pycparser\\plyparser.py\", line 67, in _parse_error\n                  raise ParseError(\"%s: %s\" % (coord, msg))\n              pycparser.plyparser.ParseError: :492:96: Illegal character '\\r'</p>\n\n<pre><code>        During handling of the above exception, another exception occurred:\n\n        Traceback (most recent call last):\n          File \"&lt;string&gt;\", line 1, in &lt;module&gt;\n          File \"C:\\Users\\Mary\\AppData\\Local\\Temp\\pip-install-bov9dean\\rpy2\\setup.py\",\n</code></pre>\n  \n  <p>line 182, in \n                  'rpy2/rinterface_lib/R_API_eventloop.h'])],\n                File \"c:\\users\\mary\\appdata\\local\\programs\\python\\python37-32\\lib\\site-packages\\setuptools__init__.py\",\n  line 145, in setup\n                  return distutils.core.setup(**attrs)\n                File \"c:\\users\\mary\\appdata\\local\\programs\\python\\python37-32\\lib\\distutils\\core.py\",\n  line 108, in setup\n                  _setup_distribution = dist = klass(attrs)\n                File \"c:\\users\\mary\\appdata\\local\\programs\\python\\python37-32\\lib\\site-packages\\setuptools\\dist.py\",\n  line 444, in <strong>init</strong>\n                  k: v for k, v in attrs.items()\n                File \"c:\\users\\mary\\appdata\\local\\programs\\python\\python37-32\\lib\\distutils\\dist.py\",\n  line 292, in <strong>init</strong>\n                  self.finalize_options()\n                File \"c:\\users\\mary\\appdata\\local\\programs\\python\\python37-32\\lib\\site-packages\\setuptools\\dist.py\",\n  line 732, in finalize_options\n                  ep.load()(self, ep.name, value)\n                File \"c:\\users\\mary\\appdata\\local\\temp\\pip-install-bov9dean\\rpy2.eggs\\cffi-1.12.3-py3.7-win32.egg\\cffi\\setuptools_ext.py\",\n  line 217, in cffi_modules\n                  add_cffi_module(dist, cffi_module)\n                File \"c:\\users\\mary\\appdata\\local\\temp\\pip-install-bov9dean\\rpy2.eggs\\cffi-1.12.3-py3.7-win32.egg\\cffi\\setuptools_ext.py\",\n  line 49, in add_cffi_module\n                  execfile(build_file_name, mod_vars)\n                File \"c:\\users\\mary\\appdata\\local\\temp\\pip-install-bov9dean\\rpy2.eggs\\cffi-1.12.3-py3.7-win32.egg\\cffi\\setuptools_ext.py\",\n  line 25, in execfile\n                  exec(code, glob, glob)\n                File \"rpy2/_rinterface_cffi_build.py\", line 164, in \n                  ffibuilder_api = createbuilder_api()\n                File \"rpy2/_rinterface_cffi_build.py\", line 157, in createbuilder_api\n                  ffibuilder.cdef(cdef)\n                File \"c:\\users\\mary\\appdata\\local\\temp\\pip-install-bov9dean\\rpy2.eggs\\cffi-1.12.3-py3.7-win32.egg\\cffi\\api.py\", line 112, in cdef\n                  self._cdef(csource, override=override, packed=packed, pack=pack)\n                File \"c:\\users\\mary\\appdata\\local\\temp\\pip-install-bov9dean\\rpy2.eggs\\cffi-1.12.3-py3.7-win32.egg\\cffi\\api.py\", line 126, in _cdef\n                  self._parser.parse(csource, override=override, **options)\n                File \"c:\\users\\mary\\appdata\\local\\temp\\pip-install-bov9dean\\rpy2.eggs\\cffi-1.12.3-py3.7-win32.egg\\cffi\\cparser.py\",\n  line 347, in parse\n                  self._internal_parse(csource)\n                File \"c:\\users\\mary\\appdata\\local\\temp\\pip-install-bov9dean\\rpy2.eggs\\cffi-1.12.3-py3.7-win32.egg\\cffi\\cparser.py\",\n  line 352, in _internal_parse\n                  ast, macros, csource = self._parse(csource)\n                File \"c:\\users\\mary\\appdata\\local\\temp\\pip-install-bov9dean\\rpy2.eggs\\cffi-1.12.3-py3.7-win32.egg\\cffi\\cparser.py\",\n  line 296, in _parse\n                  self.convert_pycparser_error(e, csource)\n                File \"c:\\users\\mary\\appdata\\local\\temp\\pip-install-bov9dean\\rpy2.eggs\\cffi-1.12.3-py3.7-win32.egg\\cffi\\cparser.py\",\n  line 325, in convert_pycparser_error\n                  raise CDefError(msg)\n              cffi.CDefError: cannot parse \"void __cffi_extern_python_start; void _capsule_finalizer(SEXP); void __cffi_extern_python_stop;\"\n              :492:96: Illegal character '\\r'\n              ----------------------------------------\n          ERROR: Command errored out with exit status 1: python setup.py egg_info Check the logs for full command output.</p>\n</blockquote>\n\n<p>Any idea please what should I fix?</p>\n\n<p>What is egg_info ?</p>\n\n<p>Is an alternative option to install it?</p>\n"}, {"tags": ["python", "object", "caching"], "comments": [{"owner": {"reputation": 11899, "user_id": 7216865, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/X90W9.png?s=128&g=1", "display_name": "Maurice Meyer", "link": "https://stackoverflow.com/users/7216865/maurice-meyer"}, "edited": false, "score": 0, "creation_date": 1570049115, "post_id": 58208604, "comment_id": 102796053, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/9361341/compare-two-same-strings-but-get-different-results-in-idle\">Compare two same strings but get different results in IDLE</a>"}, {"owner": {"reputation": 141, "user_id": 1908530, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c7e689196c41b7819b6ba6f77af9b12?s=128&d=identicon&r=PG", "display_name": "Oleg", "link": "https://stackoverflow.com/users/1908530/oleg"}, "reply_to_user": {"reputation": 11899, "user_id": 7216865, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/X90W9.png?s=128&g=1", "display_name": "Maurice Meyer", "link": "https://stackoverflow.com/users/7216865/maurice-meyer"}, "edited": false, "score": 0, "creation_date": 1570049486, "post_id": 58208604, "comment_id": 102796163, "body": "Not a duplicate. Completely different problem."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1570051843, "post_id": 58208604, "comment_id": 102796916, "body": "Why do you expect them to be the same?"}, {"owner": {"reputation": 141, "user_id": 1908530, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c7e689196c41b7819b6ba6f77af9b12?s=128&d=identicon&r=PG", "display_name": "Oleg", "link": "https://stackoverflow.com/users/1908530/oleg"}, "edited": false, "score": 0, "creation_date": 1570059536, "post_id": 58208604, "comment_id": 102798584, "body": "Exactly the same code works differently in the interactive window and when it is run as a script. In one case, the objects are different. In the other, the id\u2019s are the same."}], "answers": [{"tags": [], "owner": {"reputation": 141, "user_id": 1908530, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c7e689196c41b7819b6ba6f77af9b12?s=128&d=identicon&r=PG", "display_name": "Oleg", "link": "https://stackoverflow.com/users/1908530/oleg"}, "is_accepted": false, "score": 0, "last_activity_date": 1570073600, "last_edit_date": 1570073600, "creation_date": 1570072934, "answer_id": 58211890, "question_id": 58208604, "link": "https://stackoverflow.com/questions/58208604/python-object-identification-caching-different-in-the-interactive-window-and-s/58211890#58211890", "title": "Python object identification (caching) different in the interactive window and script execution when using id() command?", "body": "<p>No one seems to have an answer. I did a bit more exploration and found out that the problem exists in Anaconda but not in IDLE for a = -10 and b = -10. </p>\n\n<p>However, the problem exists for c = 257 and d = 257. Different id(c) and id(d) when running in the interactive window. Same id(c) and id(d) when running IDLE script. </p>\n"}], "owner": {"reputation": 141, "user_id": 1908530, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c7e689196c41b7819b6ba6f77af9b12?s=128&d=identicon&r=PG", "display_name": "Oleg", "link": "https://stackoverflow.com/users/1908530/oleg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1570073600, "creation_date": 1570046536, "last_edit_date": 1570051760, "question_id": 58208604, "link": "https://stackoverflow.com/questions/58208604/python-object-identification-caching-different-in-the-interactive-window-and-s", "title": "Python object identification (caching) different in the interactive window and script execution when using id() command?", "body": "<p>I know Python has a cache for objects with numerical values between -5 and 256. I can confirm this in Python interactive window (console). For example,</p>\n\n<pre><code>a = -10\nb = -10\nprint(id(a))\n1797396904912\nprint(id(b))\n1797396904976\nprint(id(a) == id(b))\nFalse\n</code></pre>\n\n<p>However, when I run exactly the same code via a script:</p>\n\n<pre><code>a = -10\nb = -10\nprint(id(a))\nprint(id(b))\nprint(id(a) == id(b))\n</code></pre>\n\n<p>I get:</p>\n\n<pre><code>1797396904848\n1797396904848\nTrue\n</code></pre>\n\n<p>What's going on?\n(The question has nothing to do with another question on id of strings with and without a space).</p>\n"}, {"tags": ["python", "python-3.x", "socketserver"], "comments": [{"owner": {"reputation": 838, "user_id": 4570170, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PNF05.jpg?s=128&g=1", "display_name": "Chillie", "link": "https://stackoverflow.com/users/4570170/chillie"}, "edited": false, "score": 2, "creation_date": 1570046693, "post_id": 58208585, "comment_id": 102795187, "body": "Welcome to Stack Overflow! Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, reading the <a href=\"https://stackoverflow.com/help/how-to-ask\">how to ask</a> section will also help you get more details that we need."}, {"owner": {"reputation": 253, "user_id": 5950072, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/P1ixJ.jpg?s=128&g=1", "display_name": "Devon  Oliver", "link": "https://stackoverflow.com/users/5950072/devon-oliver"}, "edited": false, "score": 0, "creation_date": 1570046721, "post_id": 58208585, "comment_id": 102795202, "body": "What are you trying to do? Can you provide reproducable sample code to replicate the problem?"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 12155877, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-7XEuHCuxHkM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf2N_tqA7v97sKw3hn0CifrX5s9Cw/photo.jpg?sz=128", "display_name": "El Amri Iheb", "link": "https://stackoverflow.com/users/12155877/el-amri-iheb"}, "edited": false, "score": 0, "creation_date": 1570047502, "post_id": 58208657, "comment_id": 102795473, "body": "what about simplehttpserver is it integrate with python 3"}, {"owner": {"reputation": 174, "user_id": 11623711, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Snh27ThCViI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reK8a500a7r8nSseCuI6yrDLAoTdw/mo/photo.jpg?sz=128", "display_name": "Sudharsana Rajasekaran", "link": "https://stackoverflow.com/users/11623711/sudharsana-rajasekaran"}, "reply_to_user": {"reputation": 13, "user_id": 12155877, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-7XEuHCuxHkM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf2N_tqA7v97sKw3hn0CifrX5s9Cw/photo.jpg?sz=128", "display_name": "El Amri Iheb", "link": "https://stackoverflow.com/users/12155877/el-amri-iheb"}, "edited": false, "score": 0, "creation_date": 1570048109, "post_id": 58208657, "comment_id": 102795698, "body": "<b>pip install httpserver</b> this should do the trick"}, {"owner": {"reputation": 174, "user_id": 11623711, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Snh27ThCViI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reK8a500a7r8nSseCuI6yrDLAoTdw/mo/photo.jpg?sz=128", "display_name": "Sudharsana Rajasekaran", "link": "https://stackoverflow.com/users/11623711/sudharsana-rajasekaran"}, "reply_to_user": {"reputation": 13, "user_id": 12155877, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-7XEuHCuxHkM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf2N_tqA7v97sKw3hn0CifrX5s9Cw/photo.jpg?sz=128", "display_name": "El Amri Iheb", "link": "https://stackoverflow.com/users/12155877/el-amri-iheb"}, "edited": false, "score": 0, "creation_date": 1570048315, "post_id": 58208657, "comment_id": 102795777, "body": "<b>import socketserver</b> in Python3 the package got renamed, all to lower case. socketserver not be installed it comes with the python distribution."}], "tags": [], "owner": {"reputation": 174, "user_id": 11623711, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Snh27ThCViI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reK8a500a7r8nSseCuI6yrDLAoTdw/mo/photo.jpg?sz=128", "display_name": "Sudharsana Rajasekaran", "link": "https://stackoverflow.com/users/11623711/sudharsana-rajasekaran"}, "is_accepted": true, "score": -1, "last_activity_date": 1570049378, "last_edit_date": 1570049378, "creation_date": 1570046795, "answer_id": 58208657, "question_id": 58208585, "link": "https://stackoverflow.com/questions/58208585/why-is-this-modulenotfounderror-error-occuring/58208657#58208657", "title": "Why is this ModuleNotFoundError error occuring?", "body": "<p>The Error is because you did not install the package.</p>\n\n<p>Install the package, before importing them</p>\n\n<p>For Python command prompt,</p>\n\n<pre><code>pip install package_name\npip install httpserver\n</code></pre>\n\n<p>For Anaconda Navigator prompt,</p>\n\n<pre><code>conda install package_name\n</code></pre>\n\n<p>When Importing Socketsever, all in small letters (Package got renamed in python3)</p>\n\n<pre><code>import socketserver\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 12155877, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-7XEuHCuxHkM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf2N_tqA7v97sKw3hn0CifrX5s9Cw/photo.jpg?sz=128", "display_name": "El Amri Iheb", "link": "https://stackoverflow.com/users/12155877/el-amri-iheb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 172, "favorite_count": 0, "closed_date": 1570047762, "accepted_answer_id": 58208657, "answer_count": 1, "score": -1, "last_activity_date": 1570049378, "creation_date": 1570046472, "last_edit_date": 1570048338, "question_id": 58208585, "link": "https://stackoverflow.com/questions/58208585/why-is-this-modulenotfounderror-error-occuring", "closed_reason": "Duplicate", "title": "Why is this ModuleNotFoundError error occuring?", "body": "<pre class=\"lang-none prettyprint-override\"><code>Traceback (most recent call last):\n  File \"server.py\", line 1, in &lt;module&gt;\n    import SocketServer\nModuleNotFoundError: No module named 'SocketServer'\\\n</code></pre>\n"}, {"tags": ["python", "list", "for-loop", "tags", "append"], "answers": [{"tags": [], "owner": {"reputation": 791, "user_id": 1434495, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/7737865536963b9e349ca1cce716084a?s=128&d=identicon&r=PG", "display_name": "Flair", "link": "https://stackoverflow.com/users/1434495/flair"}, "is_accepted": false, "score": 0, "last_activity_date": 1570046518, "creation_date": 1570046518, "answer_id": 58208598, "question_id": 58208555, "link": "https://stackoverflow.com/questions/58208555/convert-list-with-tags-into-text-list-python/58208598#58208598", "title": "Convert list with tags into text list, python", "body": "<p><a href=\"https://docs.python.org/3/tutorial/controlflow.html#for-statements\" rel=\"nofollow noreferrer\">https://docs.python.org/3/tutorial/controlflow.html#for-statements</a></p>\n\n<pre><code>for r in res:\n    site = r.text\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 670, "user_id": 2207618, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/bd1e561856a20d167f7b544cb381d373?s=128&d=identicon&r=PG", "display_name": "danny bee", "link": "https://stackoverflow.com/users/2207618/danny-bee"}, "is_accepted": true, "score": 1, "last_activity_date": 1570046778, "creation_date": 1570046778, "answer_id": 58208655, "question_id": 58208555, "link": "https://stackoverflow.com/questions/58208555/convert-list-with-tags-into-text-list-python/58208655#58208655", "title": "Convert list with tags into text list, python", "body": "<p>You can use a for loop as suggested.</p>\n\n<p>Another viable option is to use <code>map</code></p>\n\n<pre><code>res = list(map(lambda x: x.text, res))\n</code></pre>\n\n<p>I suggest you stay away from BeautifulSoup or other libraries until you have a fair grasp of the python standard library.</p>\n"}], "owner": {"reputation": 3, "user_id": 12155817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9239bd5fc7cad315bcda480a6814f14e?s=128&d=identicon&r=PG&f=1", "display_name": "ennriqe", "link": "https://stackoverflow.com/users/12155817/ennriqe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 58208655, "answer_count": 2, "score": 0, "last_activity_date": 1570046778, "creation_date": 1570046310, "last_edit_date": 1570046538, "question_id": 58208555, "link": "https://stackoverflow.com/questions/58208555/convert-list-with-tags-into-text-list-python", "title": "Convert list with tags into text list, python", "body": "<p>I have a list of tags I have obtained from beatifulSoup, I am trying to remove the tags:</p>\n\n<pre><code>res= [&lt;a href=\"/cities/Bilbao/place/p/95854/Guggenheim+Museum+Bilbao\"&gt;Guggenheim Museum Bilbao&lt;/a&gt;,\n &lt;a href=\"/cities/Bilbao/place/p/380902/Vizcaya+Bridge\"&gt;Vizcaya Bridge&lt;/a&gt;,\n &lt;a href=\"/cities/Bilbao/place/p/95864/Mercado+de+la+Ribera\"&gt;Mercado de la Ribera&lt;/a&gt;,\n &lt;a href=\"/cities/Bilbao/place/p/95863/Azkuna+Zentroa\"&gt;Azkuna Zentroa&lt;/a&gt;,\n &lt;a href=\"/cities/Bilbao/place/p/95846/Plaza+Berria\"&gt;Plaza Berria&lt;/a&gt;]\n</code></pre>\n\n<p>I can do manually do it one by one by: <code>sites = res[0].text</code>, but I would like to automate it, I had thought about creating a <code>for</code> loop, but I am so new to python and programming that I can not construct it.</p>\n"}, {"tags": ["python", "numpy"], "comments": [{"owner": {"reputation": 1434, "user_id": 7212665, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KrLoI.jpg?s=128&g=1", "display_name": "Demi-Lune", "link": "https://stackoverflow.com/users/7212665/demi-lune"}, "edited": false, "score": 0, "creation_date": 1570046968, "post_id": 58208544, "comment_id": 102795302, "body": "There&#39;s interesting related discussions in <a href=\"https://stackoverflow.com/questions/7632963/numpy-find-first-index-of-value-fast/7654768\" title=\"numpy find first index of value fast\">stackoverflow.com/questions/7632963/&hellip;</a> , esp. the benchmarks in the 3rd answer"}], "answers": [{"tags": [], "owner": {"reputation": 7796, "user_id": 2334254, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh4.googleusercontent.com/-6e2XuTZAjgM/AAAAAAAAAAI/AAAAAAAAABU/JpF2-AkHsH4/photo.jpg?sz=128", "display_name": "kpie", "link": "https://stackoverflow.com/users/2334254/kpie"}, "is_accepted": false, "score": 0, "last_activity_date": 1570046658, "creation_date": 1570046658, "answer_id": 58208636, "question_id": 58208544, "link": "https://stackoverflow.com/questions/58208544/how-to-change-value-of-remainder-of-a-row-in-a-numpy-array-once-a-certain-condit/58208636#58208636", "title": "How to change value of remainder of a row in a numpy array once a certain condition is met?", "body": "<p>You can use apply.</p>\n\n<pre><code>import numpy as np\n\narray = np.array([[0,0,0,1,0], [0,1,0,0,0], [1,0,0,0,0]])\n\ndef myfunc(l):\n    i = 0\n    while(l[i]!=1):\n        i+=1\n    return([0]*i+[1]*(len(l)-i))\n\nprint(np.apply_along_axis(myfunc, 1, array))\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 11875503, "user_type": "registered", "profile_image": "https://graph.facebook.com/10162095225695298/picture?type=large", "display_name": "Ian Gullett", "link": "https://stackoverflow.com/users/11875503/ian-gullett"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "closed_date": 1570046485, "answer_count": 1, "score": 0, "last_activity_date": 1570046658, "creation_date": 1570046247, "question_id": 58208544, "link": "https://stackoverflow.com/questions/58208544/how-to-change-value-of-remainder-of-a-row-in-a-numpy-array-once-a-certain-condit", "closed_reason": "Duplicate", "title": "How to change value of remainder of a row in a numpy array once a certain condition is met?", "body": "<p>I have a 2d numpy array of the form: </p>\n\n<pre><code>array = [[0,0,0,1,0], [0,1,0,0,0], [1,0,0,0,0]]\n</code></pre>\n\n<p>I'd like to go to each of the rows, iterate over the entries until the value 1 is found, then replace every subsequent value in that row to a 1. The output would then look like: </p>\n\n<pre><code>array = [[0,0,0,1,1], [0,1,1,1,1], [1,1,1,1,1]]\n</code></pre>\n\n<p>My actual data set is very large, so I was wondering if there is a specialized numpy function that does something like this, or if there's an obvious way to do it that I'm missing. </p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "syntax-error", "stdin"], "comments": [{"owner": {"reputation": 670, "user_id": 2207618, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/bd1e561856a20d167f7b544cb381d373?s=128&d=identicon&r=PG", "display_name": "danny bee", "link": "https://stackoverflow.com/users/2207618/danny-bee"}, "edited": false, "score": 0, "creation_date": 1570046360, "post_id": 58208523, "comment_id": 102795041, "body": "Can you include your code?"}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 4, "creation_date": 1570046381, "post_id": 58208523, "comment_id": 102795049, "body": "Aside from the <code>&amp;</code>, you appear to be trying to type a shell/interpreter command directly in the Python interpreter itself."}], "answers": [{"tags": [], "owner": {"reputation": 59, "user_id": 12159627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d4a9ffe8cfdc3303ca558c9bd612aff?s=128&d=identicon&r=PG&f=1", "display_name": "Z224", "link": "https://stackoverflow.com/users/12159627/z224"}, "is_accepted": false, "score": 0, "last_activity_date": 1570145396, "creation_date": 1570145396, "answer_id": 58228107, "question_id": 58208523, "link": "https://stackoverflow.com/questions/58208523/what-is-this-error-message-and-how-do-i-resolve-it/58228107#58228107", "title": "What is this error message, and how do I resolve it?", "body": "<p>Including your code could help us, here is a list of things to check that I found on the web: <a href=\"http://www.openbookproject.net/thinkcs/python/english2e/app_a.html\" rel=\"nofollow noreferrer\">Debugging</a></p>\n\n<p>Make sure you are not using a Python keyword for a variable name.\nCheck that you have a colon at the end of the header of every compound statement, including for, while, if, and def statements.</p>\n\n<p>Check that indentation is consistent. You may indent with either spaces or tabs but it\u2019s best not to mix them. Each level should be nested the same amount.\nMake sure that any strings in the code have matching quotation marks.</p>\n\n<p>If you have multiline strings with triple quotes (single or double), make sure you have terminated the string properly. An unterminated string may cause an invalid token error at the end of your program, or it may treat the following part of the program as a string until it comes to the next string. In the second case, it might not produce an error message at all!</p>\n\n<p>An unclosed bracket \u2013 (, {, or [ \u2013 makes Python continue with the next line as part of the current statement. Generally, an error occurs almost immediately in the next line.</p>\n\n<p>Check for the classic = instead of == inside a conditional.</p>\n"}], "owner": {"reputation": 1, "user_id": 7666899, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d66d5d51716af341e8e9119ad87fc359?s=128&d=identicon&r=PG&f=1", "display_name": "mitch_ell", "link": "https://stackoverflow.com/users/7666899/mitch-ell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1570145396, "creation_date": 1570046159, "question_id": 58208523, "link": "https://stackoverflow.com/questions/58208523/what-is-this-error-message-and-how-do-i-resolve-it", "title": "What is this error message, and how do I resolve it?", "body": "<p>I'm taking <a href=\"https://developers.google.com/edu/python\" rel=\"nofollow noreferrer\">google's python tutorial</a> and may have fat fingered a few keys, causing an error. I don't recognize the issue here, and the ctrl+click links it allows me to follow take me to line 1 of the file I'm writing in and to python.exe.</p>\n\n<p>It looks like there's an extra character somewhere in a file path? There are no syntax errors in the code itself as the debugger runs through it just fine.</p>\n\n<p>I'm using Visual Studio Code</p>\n\n<p>None of the code I've written (with my knowledge) is causing this error. </p>\n\n<p>This is the error message I'm getting.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>SyntaxError: invalid syntax\n&gt;&gt;&gt; &amp; C:/Users/mcgilm1/AppData/Local/Programs/Python/Python37-32/python.exe c:/Users/mcgilm1/Documents/google-python-exercises/basic/string2.py\n  File \"&lt;stdin&gt;\", line 1\n    &amp; C:/Users/mcgilm1/AppData/Local/Programs/Python/Python37-32/python.exe c:/Users/mcgilm1/Documents/google-python-exercises/basic/string2.py\n    ^\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "is_accepted": true, "score": 4, "last_activity_date": 1570046551, "creation_date": 1570046551, "answer_id": 58208605, "question_id": 58208517, "link": "https://stackoverflow.com/questions/58208517/add-suffix-to-column-names-that-dont-already-have-a-suffix/58208605#58208605", "title": "Add suffix to column names that don&#39;t already have a suffix", "body": "<p>How about:</p>\n\n<pre><code>df.columns = [x if x=='Name' or '_' in x else x+'_z' for x in df.columns]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 46860, "user_id": 4333359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/231e42e97a07b2937c1bf8a313dfa3f7?s=128&d=identicon&r=PG&f=1", "display_name": "ALollz", "link": "https://stackoverflow.com/users/4333359/alollz"}, "is_accepted": false, "score": 0, "last_activity_date": 1570046934, "creation_date": 1570046934, "answer_id": 58208700, "question_id": 58208517, "link": "https://stackoverflow.com/questions/58208517/add-suffix-to-column-names-that-dont-already-have-a-suffix/58208700#58208700", "title": "Add suffix to column names that don&#39;t already have a suffix", "body": "<p>Add '_z' where the column stub is duplicated and without a suffix. </p>\n\n<pre><code>m = (df.columns.str.split('_').str[0].duplicated(keep=False)\n     &amp; ~df.columns.str.contains('_'))\n\ndf.columns = df.columns.where(~m, df.columns+'_z')\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 22982, "user_id": 10189214, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oTTBaX3HSZQ/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7ohHVatc4khqXgYvNrBM40bMFj71Q/mo/photo.jpg?sz=128", "display_name": "Andy L.", "link": "https://stackoverflow.com/users/10189214/andy-l"}, "is_accepted": false, "score": 0, "last_activity_date": 1570048470, "creation_date": 1570048470, "answer_id": 58209004, "question_id": 58208517, "link": "https://stackoverflow.com/questions/58208517/add-suffix-to-column-names-that-dont-already-have-a-suffix/58209004#58209004", "title": "Add suffix to column names that don&#39;t already have a suffix", "body": "<p>I would use <code>index.putmask</code> as follows:</p>\n\n<pre><code>m = (df.columns == 'Name') | df.columns.str[-2:].isin(['_x','_y'])\ndf.columns = df.columns.putmask(~m, df.columns+'_z')\n\nIn [739]: df.columns\nOut[739]: Index(['Name', 'Date_z', 'Date_x', 'Date_y', 'A_z', 'A_x', 'A_y'], dty\npe='object')\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4314, "user_id": 5152563, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/ca2290acd27712398ff5bf1d469129dd?s=128&d=identicon&r=PG", "display_name": "Quickbeam2k1", "link": "https://stackoverflow.com/users/5152563/quickbeam2k1"}, "is_accepted": false, "score": 1, "last_activity_date": 1570050438, "creation_date": 1570050438, "answer_id": 58209378, "question_id": 58208517, "link": "https://stackoverflow.com/questions/58208517/add-suffix-to-column-names-that-dont-already-have-a-suffix/58209378#58209378", "title": "Add suffix to column names that don&#39;t already have a suffix", "body": "<p>You can also try:</p>\n\n<pre><code>df.rename(columns = lambda x: x if x=='Name' or '_' in x else x+'_z')\n</code></pre>\n\n<p>stealing slightly from Quang Hoang ;)</p>\n"}], "owner": {"reputation": 431, "user_id": 11956484, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4639a1db9ab445316f6194434a152973?s=128&d=identicon&r=PG&f=1", "display_name": "Gingerhaze", "link": "https://stackoverflow.com/users/11956484/gingerhaze"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 168, "favorite_count": 0, "accepted_answer_id": 58208605, "answer_count": 4, "score": 2, "last_activity_date": 1570050438, "creation_date": 1570046118, "question_id": 58208517, "link": "https://stackoverflow.com/questions/58208517/add-suffix-to-column-names-that-dont-already-have-a-suffix", "title": "Add suffix to column names that don&#39;t already have a suffix", "body": "<p>I have a data frame with columns like </p>\n\n<pre><code>Name  Date  Date_x  Date_y  A  A_x  A_y..\n</code></pre>\n\n<p>and I need to add _z to the columns (except the Name column) that don't already have _x or _y . So, I want the output to be similar to </p>\n\n<pre><code>Name  Date_z  Date_x  Date_y  A_z  A_x  A_y...\n</code></pre>\n\n<p>I've tried </p>\n\n<pre><code>df.iloc[:,~df.columns.str.contains('x|y|Name')]=df.iloc[:,~df.columns.str.contains('x|y|Name')].add_suffix(\"_z\")\n# doesn't add suffixes and replaces columns with all nans\n\ndf.columns=df.columns.map(lambda x : x+'_z' if \"x\" not in x or \"y\" not in x else x) \n#many variations of this but seems to add _z to all of the column names\n</code></pre>\n"}, {"tags": ["python", "dictionary", "iterator", "python-internals"], "comments": [{"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1570146473, "post_id": 58208510, "comment_id": 102831175, "body": "Iterators do not expose this as the API doesn\u2019t require that they do. What is the use case for this?"}, {"owner": {"reputation": 27784, "user_id": 4531270, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/uw3pm.png?s=128&g=1", "display_name": "pylang", "link": "https://stackoverflow.com/users/4531270/pylang"}, "edited": false, "score": 0, "creation_date": 1570249039, "post_id": 58208510, "comment_id": 102862449, "body": "I can see a use case as a view on generators."}], "answers": [{"tags": [], "owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "is_accepted": true, "score": 7, "last_activity_date": 1570214521, "creation_date": 1570214521, "answer_id": 58241690, "question_id": 58208510, "link": "https://stackoverflow.com/questions/58208510/given-a-dict-iterator-get-the-dict/58241690#58241690", "title": "Given a dict iterator, get the dict", "body": "<p>There is no API to find the source iterable object from an iterator. This is intentional, iterators are seen as single-use objects; iterate and discard. A such, they often <em>drop their iterable reference</em> once they have reached the end; what's the point of keeping it if you can't get more elements, anyway?</p>\n\n<p>You see this in both the list and dict iterators, the hacks you found either produce empty objects or <code>None</code> once you are done iterating. List iterators use an empty list when pickled:</p>\n\n<pre><code>&gt;&gt;&gt; l = [1]\n&gt;&gt;&gt; it = iter(l)\n&gt;&gt;&gt; it.__reduce__()[1][0] is l\nTrue\n&gt;&gt;&gt; list(it)  # exhaust the iterator\n[1]\n&gt;&gt;&gt; it.__reduce__()[1][0] is l\nFalse\n&gt;&gt;&gt; it.__reduce__()[1][0]\n[]\n</code></pre>\n\n<p>and the dictionary iterator just sets the pointer to the original dictionary to null, so there are no referents left after that:</p>\n\n<pre><code>&gt;&gt;&gt; import gc\n&gt;&gt;&gt; it = iter({'foo': 42})\n&gt;&gt;&gt; gc.get_referents(it)\n[{'foo': 42}]\n&gt;&gt;&gt; list(it)\n['foo']\n&gt;&gt;&gt; gc.get_referents(it)\n[]\n</code></pre>\n\n<p>Both your hacks are just that: hacks. They are implementation dependent and can and probably will change between Python releases. Currently, using <code>iter(dictionary).__reduce__()</code> gets you the equivalent of <code>iter, list(copy(self))</code> and rather than access to the dictionary because that's deemed a better implementation, but future versions might use something different altogether, etc.</p>\n\n<p>For dictionaries, the only other option currently available is to access the <a href=\"https://github.com/python/cpython/blob/6c3fbbc177f5e1867ab09a315dbf58554a80accd/Objects/dictobject.c#L3320-L3327\" rel=\"noreferrer\"><code>di_dict</code> pointer in the <code>dictiter</code> struct</a>, with ctypes:</p>\n\n<pre><code>import ctypes\n\nclass PyObject_HEAD(ctypes.Structure):\n    _fields_ = [\n        (\"ob_refcnt\", ctypes.c_ssize_t),\n        (\"ob_type\", ctypes.c_void_p),\n    ]\n\nclass dictiterobject(ctypes.Structure):\n    _fields_ = [\n        (\"ob_base\", PyObject_HEAD),\n        (\"di_dict\", ctypes.py_object),\n        (\"di_used\", ctypes.c_ssize_t),\n        (\"di_pos\", ctypes.c_ssize_t),\n        (\"di_result\", ctypes.py_object),  # always NULL for dictkeys_iter\n        (\"len\", ctypes.c_ssize_t),\n    ]\n\ndef dict_from_dictiter(it):\n    di = dictiterobject.from_address(id(it))\n    try:\n        return di.di_dict\n    except ValueError:  # null pointer\n        return None\n</code></pre>\n\n<p>This is just as much of a hack as relying on <code>gc.get_referents()</code>:</p>\n\n<pre><code>&gt;&gt;&gt; d = {'foo': 42}\n&gt;&gt;&gt; it = iter(d)\n&gt;&gt;&gt; dict_from_dictiter(it)\n{'foo': 42}\n&gt;&gt;&gt; dict_from_dictiter(it) is d\nTrue\n&gt;&gt;&gt; list(it)\n['foo']\n&gt;&gt;&gt; dict_from_dictiter(it) is None\nTrue\n</code></pre>\n\n<p>For now, at least in CPython versions up to and including Python 3.8, there are no other options available.</p>\n"}], "owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 301, "favorite_count": 3, "accepted_answer_id": 58241690, "answer_count": 1, "score": 7, "last_activity_date": 1570214701, "creation_date": 1570046077, "last_edit_date": 1570214701, "question_id": 58208510, "link": "https://stackoverflow.com/questions/58208510/given-a-dict-iterator-get-the-dict", "title": "Given a dict iterator, get the dict", "body": "<p>Given a list iterator, you can find the original list via the pickle protocol:</p>\n\n<pre><code>&gt;&gt;&gt; L = [1, 2, 3]\n&gt;&gt;&gt; Li = iter(L)\n&gt;&gt;&gt; Li.__reduce__()[1][0] is L\nTrue\n</code></pre>\n\n<p>Given a dict iterator, how can you find the original dict? I could only find a hacky way using CPython implementation details (via garbage collector):</p>\n\n<pre><code>&gt;&gt;&gt; def get_dict(dict_iterator): \n...     [d] = gc.get_referents(dict_iterator) \n...     return d \n...\n&gt;&gt;&gt; d = {}\n&gt;&gt;&gt; get_dict(iter(d)) is d\nTrue\n</code></pre>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 51, "user_id": 10771446, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TwdxO.jpg?s=128&g=1", "display_name": "zcoleman", "link": "https://stackoverflow.com/users/10771446/zcoleman"}, "edited": false, "score": 0, "creation_date": 1570046361, "post_id": 58208493, "comment_id": 102795042, "body": "The part of your code:     <code>if session_to_leads != False</code> refers to the whole list and not the positional part of the list. You need to either compare to that element of the list or recalculate it like:     <code>if generic_state_machine(file=a,obs_nums=i) != False</code>"}, {"owner": {"reputation": 1604, "user_id": 7158458, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209106524837718/picture?type=large", "display_name": "Emm", "link": "https://stackoverflow.com/users/7158458/emm"}, "reply_to_user": {"reputation": 51, "user_id": 10771446, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TwdxO.jpg?s=128&g=1", "display_name": "zcoleman", "link": "https://stackoverflow.com/users/10771446/zcoleman"}, "edited": false, "score": 0, "creation_date": 1570046672, "post_id": 58208493, "comment_id": 102795179, "body": "@zcoleman outcomes seems to be the same"}, {"owner": {"reputation": 1604, "user_id": 7158458, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209106524837718/picture?type=large", "display_name": "Emm", "link": "https://stackoverflow.com/users/7158458/emm"}, "reply_to_user": {"reputation": 51, "user_id": 10771446, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TwdxO.jpg?s=128&g=1", "display_name": "zcoleman", "link": "https://stackoverflow.com/users/10771446/zcoleman"}, "edited": false, "score": 0, "creation_date": 1570047057, "post_id": 58208493, "comment_id": 102795336, "body": "@zcoleman I&#39;m assuming when I add if generic_state_machine(file=a,obs_nums=i) it reruns random.uniform(0,1) in my function....not retaining the random number generated initially?"}, {"owner": {"reputation": 51, "user_id": 10771446, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TwdxO.jpg?s=128&g=1", "display_name": "zcoleman", "link": "https://stackoverflow.com/users/10771446/zcoleman"}, "edited": false, "score": 0, "creation_date": 1570048097, "post_id": 58208493, "comment_id": 102795694, "body": "I got the code to work by applying that fix and by starting the loop at the index 0 instead of <code>range(1,len(a))</code>. This gave me expected results."}, {"owner": {"reputation": 51, "user_id": 10771446, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TwdxO.jpg?s=128&g=1", "display_name": "zcoleman", "link": "https://stackoverflow.com/users/10771446/zcoleman"}, "edited": false, "score": 0, "creation_date": 1570048274, "post_id": 58208493, "comment_id": 102795757, "body": "The ternary operator won&#39;t call the function unless its in conditional. Here&#39;s simple example <code>print(&#39;foo&#39;) if False else print(&#39;test&#39;)</code> and   <code>print(&#39;foo&#39;) if True else print(&#39;test&#39;)</code>"}], "answers": [{"tags": [], "owner": {"reputation": 22982, "user_id": 10189214, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oTTBaX3HSZQ/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7ohHVatc4khqXgYvNrBM40bMFj71Q/mo/photo.jpg?sz=128", "display_name": "Andy L.", "link": "https://stackoverflow.com/users/10189214/andy-l"}, "is_accepted": true, "score": 0, "last_activity_date": 1570057176, "creation_date": 1570057176, "answer_id": 58210349, "question_id": 58208493, "link": "https://stackoverflow.com/questions/58208493/conditional-positional-comparison-of-lists-based-on/58210349#58210349", "title": "Conditional positional comparison of lists based on", "body": "<p>I may not understand your requirement and your intention is not clear. You already created dataframes from the list. You just need to work directly on dataframe <code>a</code> and <code>b</code>. Here the way works with dataframe <code>a</code> and <code>b</code></p>\n\n<pre><code>m = a &gt; 0.2\nsession_to_leads = a.where(a &gt; 0.2, False)[0].to_list()\n\nOut[755]: [False, 0.9, 0.6, 0.7, 0.8]\n</code></pre>\n\n<p>After having <code>session_to_leads</code>, use the the same condition on <code>b</code> combine with condition <code>m</code></p>\n\n<pre><code>lead_to_opps = b.where((b &gt; 0.2) &amp; m, False)[0].to_list()\nOut[769]: [False, 0.51, 0.3, 0.7, False]\n</code></pre>\n\n<p><strong>Note</strong>: the 3rd element of <code>lead_to_opps</code> is <code>0.3</code> instead of <code>False</code> as in your desired ouput because the condition is <code>&gt; 0.2</code> and <code>True</code> in   <code>session_to_leads</code></p>\n"}], "owner": {"reputation": 1604, "user_id": 7158458, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209106524837718/picture?type=large", "display_name": "Emm", "link": "https://stackoverflow.com/users/7158458/emm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 58210349, "answer_count": 1, "score": 0, "last_activity_date": 1570057176, "creation_date": 1570045937, "question_id": 58208493, "link": "https://stackoverflow.com/questions/58208493/conditional-positional-comparison-of-lists-based-on", "title": "Conditional positional comparison of lists based on", "body": "<p>I asked a similar question recently, but the error message and problem changed a bit.</p>\n\n<p>I would like to create multiple lists that are dependent on the previous list based on the position of items in each list</p>\n\n<p>So for example list 1 would read a specific file and return either a number or the boolean false based on a comparison.</p>\n\n<p>The second list would then compare the number that appears in the same position as those in the previous list (if the value from the previous list was not false) and return the value or false based on the same comparison as the first list</p>\n\n<p>Examples of dataframes:</p>\n\n<pre><code>a = pd.DataFrame([0,0.9,0.6,0.7,0.8])\nb = pd.DataFrame([0.7,0.51,0.3,0.7,0.2])\n</code></pre>\n\n<p>I created a function that carries out these comparisons and creates a list</p>\n\n<pre><code>def generic_state_machine(file,obs_nums):\n    return file.ix[:,0][obs_nums] if file.ix[:,0][obs_nums] &gt; 0.2 else False\n</code></pre>\n\n<p>obs_nums in this context refers to the position of an item in a list</p>\n\n<p>I then created the lists that look at different files</p>\n\n<pre><code>session_to_leads = []\nlead_to_opps = []\n\nfor i in range(1,len(a)):\n     session_to_leads.append(generic_state_machine(file=a,obs_nums=i))\n     lead_to_opps.append(generic_state_machine(file=b,obs_nums=i)) if session_to_leads != False else lead_to_opps.append(False)\n</code></pre>\n\n<p>I managed to sort out the initial error I encountered, the only problem now is that list lead_to_opps is not dependent on session_to_leads so if there is a False value in position 1, lead_to_opps will not automatically return a False in the same position. So assuming that random.uniform(0,1) generates 0.5 all the time, this is my current outcome:</p>\n\n<pre><code>session_to_leads = [False,0.9,0.6,0.7,0.8]\nlead_to_opps = [0.7,0.51,False,0.7,False]\n</code></pre>\n\n<p>This is my desired outcome:</p>\n\n<pre><code>session_to_leads = [False,0.9,0.6,0.7,0.8]\nlead_to_opps = [False,0.51,False,0.7,False]\n</code></pre>\n"}, {"tags": ["python", "recursion"], "comments": [{"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 3, "creation_date": 1570046056, "post_id": 58208491, "comment_id": 102794905, "body": "The code after the recursive call still executes once the recursive call returns. You would get your expected output if you used <code>return dive(x - 1)</code> instead."}], "answers": [{"tags": [], "owner": {"reputation": 76, "user_id": 10960141, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88001d90d5912306e42d642fa23d7758?s=128&d=identicon&r=PG&f=1", "display_name": "litpumpk1n", "link": "https://stackoverflow.com/users/10960141/litpumpk1n"}, "is_accepted": true, "score": 2, "last_activity_date": 1570046509, "creation_date": 1570046509, "answer_id": 58208596, "question_id": 58208491, "link": "https://stackoverflow.com/questions/58208491/recursion-used-in-if-else-statement/58208596#58208596", "title": "Recursion used in if else statement", "body": "<p>Recursion takes place on something called a call stack.\nSo when you first make the recursive call, it is placed on the call stack. Similarly for the subsequent calls you make. Once you reach 0, each function call on the stack is \"popped\", which is indicated in your code by the \"Coming back up\" line, since it comes after the recursive call line. In essence, even after you hit the else case the program still has to make its way through the previous recursive calls you made, and won't just exit the program when the else is encountered.</p>\n\n<p>I've attached a screenshot from the python tutor page. Feel free to use it yourself to see how that works step by step! Keep an eye on the output, and the Frames column which represents the recursive call stack.\n<a href=\"http://pythontutor.com/visualize.html#mode=display\" rel=\"nofollow noreferrer\">Python Tutor</a></p>\n\n<h2><a href=\"https://i.stack.imgur.com/PxnLe.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PxnLe.png\" alt=\"enter image description here\"></a></h2>\n\n<h2><a href=\"https://i.stack.imgur.com/G3b8c.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/G3b8c.png\" alt=\"enter image description here\"></a></h2>\n\n<h2><a href=\"https://i.stack.imgur.com/2wBZv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2wBZv.png\" alt=\"enter image description here\"></a></h2>\n"}], "owner": {"reputation": 7, "user_id": 12146118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b9eb5222f52839ceeb336332c7e812d?s=128&d=identicon&r=PG&f=1", "display_name": "Stephen", "link": "https://stackoverflow.com/users/12146118/stephen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 58208596, "answer_count": 1, "score": 0, "last_activity_date": 1570046509, "creation_date": 1570045934, "last_edit_date": 1592644375, "question_id": 58208491, "link": "https://stackoverflow.com/questions/58208491/recursion-used-in-if-else-statement", "title": "Recursion used in if else statement", "body": "<p>I am new to programming,\nso I am a little confused about this code,\nI thought this was supposed to print out:</p>\n<blockquote>\n<p>x is 2 - Going deeper</p>\n<p>x is 1 - Going deeper</p>\n<p>x is 0 - Turning around</p>\n</blockquote>\n<p>And that was it, since it got to <code>dive(0)</code> and got to the <code>else</code> statement</p>\n<p>How come it printed out:</p>\n<blockquote>\n<p>x is 2 - Going deeper</p>\n<p>x is 1 - Going deeper</p>\n<p>x is 0 - Turning around</p>\n<p>x was 1 - Coming back up</p>\n<p>x was 2 - Coming back up</p>\n</blockquote>\n<p>The code is:</p>\n<pre><code>def dive(x):\n    if x &gt; 0:\n        print(f'x is {x} - Going deeper')\n        dive(x - 1)  \n        print(f'x was {x} - Coming back up')\n    else:\n        print(f'x is {x} - Turning around')  \n\ndive(2)\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "sockets", "gps", "gpsd"], "answers": [{"tags": [], "owner": {"reputation": 447, "user_id": 2034574, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1mbUf.jpg?s=128&g=1", "display_name": "AnotherSmellyGeek", "link": "https://stackoverflow.com/users/2034574/anothersmellygeek"}, "is_accepted": false, "score": 0, "last_activity_date": 1573439237, "creation_date": 1573439237, "answer_id": 58794850, "question_id": 58208490, "link": "https://stackoverflow.com/questions/58208490/winerror10057-on-python-3-7-3-4-gps3-module/58794850#58794850", "title": "WinError10057 on Python 3.7 &amp; 3.4 GPS3 Module", "body": "<p>The line \"skt.connect()\" attempts to connect to GPSd, but judging by the diagnostic \"GPS3 gpsd connection at '192.168.0.13' on port '2947' failed\" which you received, that attempt failed. This could be because the GPSd server is not listening at that IP address and port, or that there is a firewall in the way, or for a number of other reasons.</p>\n\n<p>For some reason, failure to connect to GPSd does not raise an exception, even though I think it should (so this is arguably a bug in the Python GPS library). So your code continues to run.</p>\n\n<p>The line \"skt.watch()\" attempts to wait for new data to arrive on the socket to GPSd, but due to the preceding error, that socket was never opened, so can't be waited on. So this call fails, with the Windows error code 10057.</p>\n\n<p>In summary, the solution is to ensure that the GPSd server is reachable by your code, and ensure that the Python GPS library and your code both contain adequate error detection and throw exceptions in fatal error conditions.</p>\n"}], "owner": {"reputation": 1, "user_id": 11232086, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_k3_t4JCMOY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfeLoLOQr6hNQCCRalPpO11juP4sg/mo/photo.jpg?sz=128", "display_name": "Lucas Thomaz", "link": "https://stackoverflow.com/users/11232086/lucas-thomaz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1579217904, "creation_date": 1570045925, "last_edit_date": 1579217904, "question_id": 58208490, "link": "https://stackoverflow.com/questions/58208490/winerror10057-on-python-3-7-3-4-gps3-module", "title": "WinError10057 on Python 3.7 &amp; 3.4 GPS3 Module", "body": "<p>I'm studying the GPS3 Python 3.7 library, running this basic code:\nEstou estudando a biblioteca GPS3 do python 3.7, rodando esse c\u00f3digo simples:</p>\n\n<pre><code>\nskt, dts = gps3.GPSDSocket(), gps3.DataStream()\n\nskt.connect()\nskt.watch()\nfor dt in skt:\n    if dt:\n        dts.unpack(dt)\n        print(skt.TPV['alt'],skt.TPV['lat'])\n</code></pre>\n\n<p>I got the following output:<br>\nEu tive a seguinte sa\u00edda:<br></p>\n\n<pre><code>GPS3 gpsd connection at '192.168.0.13' on port '2947' failed\n\nGPS3 send command fail with [WinError 10057] Uma solicita\u00e7\u00e3o de envio ou recebimento de dados n\u00e3o foi permitida porque o soquete n\u00e3o est\u00e1 conectado e (durante o envio em um soquete de datagrama usando-se uma chamada sendto) n\u00e3o foi fornecido um endere\u00e7o\n</code></pre>\n\n<p>I already tried to run this code on python 3.4 and i got exactly the same output<br>\nEu j\u00e1 tentei rodar esse c\u00f3digo no python 3.4 e tive a mesma mensagem.<br></p>\n\n<p>Somebody know what's the solution for this? Or know some better python compatible framework to make this function? <br>\nAlgu\u00e9m sabe a solu\u00e7\u00e3o para isso? Ou conhece algum framework melhor para essa fun\u00e7\u00e3o que seja compat\u00edvel com python?<br></p>\n"}, {"tags": ["python", "tensorflow", "jupyter-notebook"], "comments": [{"owner": {"reputation": 5106, "user_id": 13465258, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af312ebdf3daf22a61af97062eccf2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Tensorflow Warrior", "link": "https://stackoverflow.com/users/13465258/tensorflow-warrior"}, "edited": false, "score": 0, "creation_date": 1589977091, "post_id": 58208478, "comment_id": 109505371, "body": "Can you please share the reproducible code. Thanks!"}], "owner": {"reputation": 19, "user_id": 12155803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e80e7e02e7d50263268c7e10a5092e02?s=128&d=identicon&r=PG&f=1", "display_name": "phenomina", "link": "https://stackoverflow.com/users/12155803/phenomina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 74, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1570045874, "creation_date": 1570045874, "question_id": 58208478, "link": "https://stackoverflow.com/questions/58208478/when-using-tensorflow-and-numpy-in-one-notebook-the-kernel-appears-to-have-died", "title": "When using tensorflow and numpy in one notebook: The kernel appears to have died. It will restart automatically", "body": "<p>When I try to run code using keras and numpy or keras and Matplotlib in one Jupyter notebook I always get the message: The kernel appears to have died. It will restart automatically. \nWhen I run the code in two different notebooks it works perfectly fine. I have installed it using anaconda and I am using macOS. I would really appreciate an answer, everything else I've found and tried so far did not work. Thank you!</p>\n"}]