[{"tags": ["python", "django", "amazon-ec2", "encoding"], "comments": [{"owner": {"reputation": 1187, "user_id": 3042057, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a699dceb8500b26a5355e497b73f3865?s=128&d=identicon&r=PG", "display_name": "Emin Mastizada", "link": "https://stackoverflow.com/users/3042057/emin-mastizada"}, "edited": false, "score": 0, "creation_date": 1517445406, "post_id": 48553384, "comment_id": 84103704, "body": "Which python version do you use? (python 2 or 3). Also in the same error page, you can trace where in your code that error happened. It might be that you are using python 2 and your models do not have <code>__unicode__</code> method."}, {"owner": {"reputation": 13, "user_id": 6732767, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156476392090705/picture?type=large", "display_name": "Raul Robles", "link": "https://stackoverflow.com/users/6732767/raul-robles"}, "reply_to_user": {"reputation": 1187, "user_id": 3042057, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a699dceb8500b26a5355e497b73f3865?s=128&d=identicon&r=PG", "display_name": "Emin Mastizada", "link": "https://stackoverflow.com/users/3042057/emin-mastizada"}, "edited": false, "score": 0, "creation_date": 1517498343, "post_id": 48553384, "comment_id": 84128163, "body": "im using python 2.7.12.  it happens when i try to put a country model {{formoffer.country}} into the html that holds all (or at least quite the amount of countries). this model is a dropdown since it is a one to many relationship.  but as i said, it works on localhost, but once i put it on the server it gives me that error. so i was thinking it MIGHT be some server configs. i installed and changed to other languages thinking it might be a weird character, but no luck."}], "owner": {"reputation": 13, "user_id": 6732767, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156476392090705/picture?type=large", "display_name": "Raul Robles", "link": "https://stackoverflow.com/users/6732767/raul-robles"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 248, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1517442962, "creation_date": 1517442962, "question_id": 48553384, "link": "https://stackoverflow.com/questions/48553384/ascii-codec-cant-encode-characters-in-position-1-2-ordinal-not-in-range128", "title": "&#39;ascii&#39; codec can&#39;t encode characters in position 1-2: ordinal not in range(128)", "body": "<p>i know there is a few questions related to this, but i cant seem to find a specific answer or solution i need</p>\n\n<p>my python django on an aws instance gives me this \n'ascii' codec can't encode characters in position 1-2: ordinal not in range(128) \nerror</p>\n\n<p>but in my local it is working perfectly fine, i installed the same requirements needed to run it, it has the same virtual environment, the same version of everything. and i cant seem to find where is the error specially since it is working 100% fine and not on the server im using.</p>\n\n<p>the whole thing error it gives is this: \n<a href=\"https://i.stack.imgur.com/u23Xn.png\" rel=\"nofollow noreferrer\">error</a> (appearently im not allowed to post images)</p>\n\n<p>i realize its a country with a weird name</p>\n"}, {"tags": ["python", "opencv", "camera"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8662646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f65007557198280f1a4598e6d316cea7?s=128&d=identicon&r=PG&f=1", "display_name": "Asguradian", "link": "https://stackoverflow.com/users/8662646/asguradian"}, "edited": false, "score": 0, "creation_date": 1517505558, "post_id": 48553481, "comment_id": 84132940, "body": "Can you explain how to calculate object location from camera location and object 2D coordinate..?"}], "tags": [], "owner": {"reputation": 133, "user_id": 2503034, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/650fdb655e2b19dfa67e9d6e18f80997?s=128&d=identicon&r=PG", "display_name": "dtauxe", "link": "https://stackoverflow.com/users/2503034/dtauxe"}, "is_accepted": false, "score": 0, "last_activity_date": 1517443757, "creation_date": 1517443757, "answer_id": 48553481, "question_id": 48553336, "link": "https://stackoverflow.com/questions/48553336/camera-orientation-and-object-location-identificaiton-in-3d-coordinate-system/48553481#48553481", "title": "Camera orientation and Object location identificaiton in 3D Coordinate system", "body": "<p>Yes, 3 cameras should be sufficient to locate an object in 3D space. If we know the (X,Y,Z) coordinates of each camera and the angle to the object from each camera, we can construct 3 lines each going thru a camera and towards the object. All 3 will only cross in one place - which is at the object.</p>\n"}], "owner": {"reputation": 1, "user_id": 8662646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f65007557198280f1a4598e6d316cea7?s=128&d=identicon&r=PG&f=1", "display_name": "Asguradian", "link": "https://stackoverflow.com/users/8662646/asguradian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 101, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1517443757, "creation_date": 1517442653, "question_id": 48553336, "link": "https://stackoverflow.com/questions/48553336/camera-orientation-and-object-location-identificaiton-in-3d-coordinate-system", "title": "Camera orientation and Object location identificaiton in 3D Coordinate system", "body": "<p>I am doing project on person re-identification within a single room with the concept of appearance model and  person actual location. My setup is, I have 3 camera inside a single room(overlapping). These cameras detect person and calculate  the appearance model for that person along with its exact location within the room in (x,y,z). My server in the cloud will maintain a feature list for each person in the room. I want to know if  hree cameras shooting on different direction on one object will be able to locate that object in exact same location or not. Given, I have camera  location in (xyz coordinate)  and object  2d Coordinate in  2D plane. My concern if, with this all information in hand, if three camera calculate  the person actual position relative to respective camera position, will all camera reports same location for that person.\nIf I am wrong, could you please help me what should  I aspect should I consider to make all camera report same exact location for an object.</p>\n"}, {"tags": ["python", "python-3.x", "pandas", "csv"], "comments": [{"owner": {"reputation": 10298, "user_id": 2484720, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/A5sYr.jpg?s=128&g=1", "display_name": "Woody Pride", "link": "https://stackoverflow.com/users/2484720/woody-pride"}, "edited": false, "score": 1, "creation_date": 1517442732, "post_id": 48553303, "comment_id": 84103110, "body": "Use the <code>sep</code> argument to <code>to_csv</code> e.g. <code>pd.DataFrame.to_csv(sep=&#39;\\t&#39;)</code> would separate with tabs not commas"}], "answers": [{"comments": [{"owner": {"reputation": 306, "user_id": 3955122, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/02c769a1fd9132eee1acb46e28f19c79?s=128&d=identicon&r=PG&f=1", "display_name": "Rohan Kadakia", "link": "https://stackoverflow.com/users/3955122/rohan-kadakia"}, "edited": false, "score": 2, "creation_date": 1517447316, "post_id": 48553586, "comment_id": 84104135, "body": "Unfortunately, the commas are still disappearing.  Do you have any other suggestions?  Thanks."}], "tags": [], "owner": {"reputation": 632, "user_id": 8766025, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7112bf0e140281eb3f4191f61eab6fc3?s=128&d=identicon&r=PG&f=1", "display_name": "ChootsMagoots", "link": "https://stackoverflow.com/users/8766025/chootsmagoots"}, "is_accepted": false, "score": 2, "last_activity_date": 1517444676, "creation_date": 1517444676, "answer_id": 48553586, "question_id": 48553303, "link": "https://stackoverflow.com/questions/48553303/writing-dataframe-to-csv-without-removing-commas/48553586#48553586", "title": "Writing dataframe to csv WITHOUT removing commas", "body": "<p><code>df.to_csv('output.tsv', sep='\\t')</code></p>\n\n<p>Will separate the values with tabs instead of commas.  </p>\n\n<p>.tsv is tab separated value file</p>\n"}, {"comments": [{"owner": {"reputation": 306, "user_id": 3955122, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/02c769a1fd9132eee1acb46e28f19c79?s=128&d=identicon&r=PG&f=1", "display_name": "Rohan Kadakia", "link": "https://stackoverflow.com/users/3955122/rohan-kadakia"}, "edited": false, "score": 0, "creation_date": 1517458732, "post_id": 48554976, "comment_id": 84106680, "body": "Thanks for your response.  Sadly, this also isn&#39;t working for me; don&#39;t know why."}, {"owner": {"reputation": 11919, "user_id": 9183344, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U7r5r.png?s=128&g=1", "display_name": "r.ook", "link": "https://stackoverflow.com/users/9183344/r-ook"}, "reply_to_user": {"reputation": 306, "user_id": 3955122, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/02c769a1fd9132eee1acb46e28f19c79?s=128&d=identicon&r=PG&f=1", "display_name": "Rohan Kadakia", "link": "https://stackoverflow.com/users/3955122/rohan-kadakia"}, "edited": false, "score": 0, "creation_date": 1517458858, "post_id": 48554976, "comment_id": 84106711, "body": "I have a feeling the culprit is your <code>DataFrame</code>.  <code>sep=&#39;\\t&#39; and my solution should both work.  Heck, even WITHOUT either of these </code>to_csv()` should automatically quote items with commas in it.  Perhaps post a sample of your <code>DataFrame</code> and code for more details"}, {"owner": {"reputation": 306, "user_id": 3955122, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/02c769a1fd9132eee1acb46e28f19c79?s=128&d=identicon&r=PG&f=1", "display_name": "Rohan Kadakia", "link": "https://stackoverflow.com/users/3955122/rohan-kadakia"}, "edited": false, "score": 1, "creation_date": 1517471012, "post_id": 48554976, "comment_id": 84110982, "body": "You were right.  The &quot;lists&quot; [1,2], [3,4], etc turned out to be numpy arrays instead."}, {"owner": {"reputation": 5993, "user_id": 1609514, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1e62d27c486199ea834abd203fbb841b?s=128&d=identicon&r=PG", "display_name": "Bill", "link": "https://stackoverflow.com/users/1609514/bill"}, "edited": false, "score": 0, "creation_date": 1535224331, "post_id": 48554976, "comment_id": 90991250, "body": "Good suggestion (it adds quotes) but for me it still does not include commas when the original data is a <code>np.array</code>.  The solution was to convert the values in my dataframe to lists and the commas are retained during <code>to_csv</code> even without <code>quoting=csv.QUOTE_ALL</code> keyword."}], "tags": [], "owner": {"reputation": 11919, "user_id": 9183344, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U7r5r.png?s=128&g=1", "display_name": "r.ook", "link": "https://stackoverflow.com/users/9183344/r-ook"}, "is_accepted": true, "score": 3, "last_activity_date": 1517456782, "last_edit_date": 1517456782, "creation_date": 1517456412, "answer_id": 48554976, "question_id": 48553303, "link": "https://stackoverflow.com/questions/48553303/writing-dataframe-to-csv-without-removing-commas/48554976#48554976", "title": "Writing dataframe to csv WITHOUT removing commas", "body": "<p>Add keyword argument <code>quoting=csv.QUOTE_ALL</code>:</p>\n\n<pre><code>import csv\nimport pandas as pd\n\ndata = {\"A\": [1,2,3], \"B\": [[11,12],[21,22],[31,32]]}\ndf = pd.DataFrame(data)\ndf.index.name='index'\n\n# df\n#        A         B\n# index             \n# 0      1  [11, 12]\n# 1      2  [21, 22]\n# 2      3  [31, 32]\n\ndf.to_csv('test.csv',quoting=csv.QUOTE_ALL)\n</code></pre>\n\n<h1>Output:</h1>\n\n<pre><code>\"index\",\"A\",\"B\"\n\"0\",\"1\",\"[11, 12]\"\n\"1\",\"2\",\"[21, 22]\"\n\"2\",\"3\",\"[31, 32]\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 326, "user_id": 13526199, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qwsLD.jpg?s=128&g=1", "display_name": "Cheolsoon Im", "link": "https://stackoverflow.com/users/13526199/cheolsoon-im"}, "is_accepted": false, "score": 0, "last_activity_date": 1593830767, "creation_date": 1593830767, "answer_id": 62724751, "question_id": 48553303, "link": "https://stackoverflow.com/questions/48553303/writing-dataframe-to-csv-without-removing-commas/62724751#62724751", "title": "Writing dataframe to csv WITHOUT removing commas", "body": "<p>I needed commas in my csv file, too. So, I tried to get it using df but in vain. I decided to do the following.\nI read tap-separated text file, first, and write to a csv file with commas added.\nNot sure this is what you exactly want, but this way you can have commas in your csv file. Hope it helps.</p>\n<pre><code>with open('test.txt', newline = '') as cos:\n    co_reader = csv.reader(cos, delimiter='\\t')\n    with open('output.csv', 'w', newline='') as csvfile:\n        cowriter = csv.writer(csvfile, delimiter=',',quotechar='|', quoting=csv.QUOTE_MINIMAL)\n    for co in cog_reader:\n        cowriter.writerow(co)\n</code></pre>\n"}], "owner": {"reputation": 306, "user_id": 3955122, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/02c769a1fd9132eee1acb46e28f19c79?s=128&d=identicon&r=PG&f=1", "display_name": "Rohan Kadakia", "link": "https://stackoverflow.com/users/3955122/rohan-kadakia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5324, "favorite_count": 0, "accepted_answer_id": 48554976, "answer_count": 3, "score": 3, "last_activity_date": 1593830767, "creation_date": 1517442461, "question_id": 48553303, "link": "https://stackoverflow.com/questions/48553303/writing-dataframe-to-csv-without-removing-commas", "title": "Writing dataframe to csv WITHOUT removing commas", "body": "<p>I want to write a pandas dataframe to csv.  One of the columns of the df has entries which are lists, e.g. [1, 2], [3, 4], ...</p>\n\n<p>When I use df.to_csv('output.csv') and I open the output csv file, the commas are gone.  That is, the corresponding column of the csv has entries [1  2], [3  4], ....</p>\n\n<p>Is there a way to write a dataframe to csv without removing the commas in these lists?  I've also tried using csv.writer.</p>\n"}, {"tags": ["python", "python-3.x", "pandas", "group-by"], "answers": [{"tags": [], "owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "is_accepted": true, "score": 2, "last_activity_date": 1517444025, "last_edit_date": 1517444025, "creation_date": 1517442922, "answer_id": 48553379, "question_id": 48553276, "link": "https://stackoverflow.com/questions/48553276/transforming-a-column-of-a-dataframe-according-to-a-condition/48553379#48553379", "title": "transforming a column of a dataframe according to a condition", "body": "<p>This is one way.</p>\n\n<pre><code># calculate rap_new indices\nrap_indices = [i for i, j in enumerate(df.rap) if j==1]\nrap_new_indices = list(set.union(*[set(range(n-2, n+1)) for n in rap_indices]))\n\n# apply indices to new col\ndf.rap_new = 0\ndf.loc[rap_new_indices, 'rap_new'] = 1\n\n#     id  year  rap  cohort  jobs  year_of_life  rap_new\n# 0    1  2009    0     NaN    10           NaN        0\n# 1    1  2012    0  2012.0    12           0.0        0\n# 2    1  2013    0  2012.0    12           1.0        1\n# 3    1  2014    0  2012.0    13           2.0        1\n# 4    1  2015    1  2012.0    15           3.0        1\n# 5    1  2016    0  2012.0    17           4.0        0\n# 6    1  2017    0  2012.0    18           5.0        0\n# 7    2  2009    0  2009.0    15           0.0        0\n# 8    2  2010    0  2009.0     2           1.0        1\n# 9    2  2011    0  2009.0     3           2.0        1\n# 10   2  2012    1  2009.0     3           3.0        1\n# 11   2  2013    0  2009.0    15           4.0        0\n# 12   2  2014    0  2009.0    12           5.0        0\n# 13   2  2015    0  2009.0    13           6.0        0\n# 14   2  2016    0  2009.0    13           7.0        0\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": false, "score": 2, "last_activity_date": 1517445294, "last_edit_date": 1517445294, "creation_date": 1517444853, "answer_id": 48553614, "question_id": 48553276, "link": "https://stackoverflow.com/questions/48553276/transforming-a-column-of-a-dataframe-according-to-a-condition/48553614#48553614", "title": "transforming a column of a dataframe according to a condition", "body": "<p><strong>Option 1</strong><br>\nGetting tricky with <code>pd.Series.shift</code>  </p>\n\n<pre><code>df.assign(\n    rap_new=sum(df.rap.shift(-i).fillna(0, downcast='infer') for i in range(3)))\n\n    id  year  rap  cohort  jobs  year_of_life  rap_new\n0    1  2009    0     NaN    10           NaN        0\n1    1  2012    0  2012.0    12           0.0        0\n2    1  2013    0  2012.0    12           1.0        1\n3    1  2014    0  2012.0    13           2.0        1\n4    1  2015    1  2012.0    15           3.0        1\n5    1  2016    0  2012.0    17           4.0        0\n6    1  2017    0  2012.0    18           5.0        0\n7    2  2009    0  2009.0    15           0.0        0\n8    2  2010    0  2009.0     2           1.0        1\n9    2  2011    0  2009.0     3           2.0        1\n10   2  2012    1  2009.0     3           3.0        1\n11   2  2013    0  2009.0    15           4.0        0\n12   2  2014    0  2009.0    12           5.0        0\n13   2  2015    0  2009.0    13           6.0        0\n14   2  2016    0  2009.0    13           7.0        0\n</code></pre>\n\n<hr>\n\n<p><strong>Option 2</strong><br>\n<strong>EXPERIMENTAL</strong><br>\nDon't use this!  I'm just having fun.  </p>\n\n<pre><code>from numpy.lib.stride_tricks import as_strided as strides\n\na = df.rap.values\ns = a.strides[0]\n\ndf.assign(rap_new=strides(np.append(a, [0, 0]), (a.shape[0], 3), (s, s)).sum(1))\n\n    id  year  rap  cohort  jobs  year_of_life  rap_new\n0    1  2009    0     NaN    10           NaN        0\n1    1  2012    0  2012.0    12           0.0        0\n2    1  2013    0  2012.0    12           1.0        1\n3    1  2014    0  2012.0    13           2.0        1\n4    1  2015    1  2012.0    15           3.0        1\n5    1  2016    0  2012.0    17           4.0        0\n6    1  2017    0  2012.0    18           5.0        0\n7    2  2009    0  2009.0    15           0.0        0\n8    2  2010    0  2009.0     2           1.0        1\n9    2  2011    0  2009.0     3           2.0        1\n10   2  2012    1  2009.0     3           3.0        1\n11   2  2013    0  2009.0    15           4.0        0\n12   2  2014    0  2009.0    12           5.0        0\n13   2  2015    0  2009.0    13           6.0        0\n14   2  2016    0  2009.0    13           7.0        0\n</code></pre>\n"}], "owner": {"reputation": 864, "user_id": 8627559, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/1a5ba760dc2b2ec8cabee703ad415414?s=128&d=identicon&r=PG&f=1", "display_name": "Lucas Dresl", "link": "https://stackoverflow.com/users/8627559/lucas-dresl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 24, "favorite_count": 0, "accepted_answer_id": 48553379, "answer_count": 2, "score": 1, "last_activity_date": 1519962321, "creation_date": 1517442239, "last_edit_date": 1519962321, "question_id": 48553276, "link": "https://stackoverflow.com/questions/48553276/transforming-a-column-of-a-dataframe-according-to-a-condition", "title": "transforming a column of a dataframe according to a condition", "body": "<p>i am willing too add a new column with three consecutives 1 whenever rap is equal to one. The three consecutive 1 must be in the same year when rap is equal one and the two before from that one. New columns must be by id (i have a data panel).</p>\n\n<p>df looks like this:</p>\n\n<pre><code>id  year  rap  cohort  jobs  year_of_life  \n1  2009    0     NaN      10      NaN       \n1  2012    0     2012     12      0         \n1  2013    0     2012     12      1         \n1  2014    0     2012     13      2         \n1  2015    1     2012     15      3         \n1  2016    0     2012     17      4       \n1  2017    0     2012     18      5         \n2  2009    0     2009     15      0         \n2  2010    0     2009     2       1         \n2  2011    0     2009     3       2         \n2  2012    1     2009     3       3         \n2  2013    0     2009     15      4         \n2  2014    0     2009     12      5         \n2  2015    0     2009     13      6         \n2  2016    0     2009     13      7         \n</code></pre>\n\n<p>expected output:</p>\n\n<pre><code>id  year  rap  cohort  jobs  year_of_life  rap_new\n1  2009    0     NaN      10      NaN       0  \n1  2012    0     2012     12      0         0   \n1  2013    0     2012     12      1         1\n1  2014    0     2012     13      2         1\n1  2015    1     2012     15      3         1\n1  2016    0     2012     17      4         0\n1  2017    0     2012     18      5         0\n2  2009    0     2009     15      0         0\n2  2010    0     2009     2       1         1\n2  2011    0     2009     3       2         1\n2  2012    1     2009     3       3         1\n2  2013    0     2009     15      4         0\n2  2014    0     2009     12      5         0\n2  2015    0     2009     13      6         0\n2  2016    0     2009     13      7         0\n</code></pre>\n"}, {"tags": ["python", "python-2.7", "file", "csv", "dictionary"], "comments": [{"owner": {"reputation": 1590, "user_id": 5428880, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/E8wTo.jpg?s=128&g=1", "display_name": "Suraj Kothari", "link": "https://stackoverflow.com/users/5428880/suraj-kothari"}, "edited": false, "score": 2, "creation_date": 1517509185, "post_id": 48553228, "comment_id": 84134837, "body": "What code have you attempted?"}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 1, "creation_date": 1517510927, "post_id": 48553228, "comment_id": 84135832, "body": "A better way than what?"}, {"owner": {"reputation": 5, "user_id": 6500364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b3fdabf0c25603fde3e94703c5ff677?s=128&d=identicon&r=PG&f=1", "display_name": "Armaja LaRue-Love", "link": "https://stackoverflow.com/users/6500364/armaja-larue-love"}, "edited": false, "score": 0, "creation_date": 1517591419, "post_id": 48553228, "comment_id": 84172353, "body": "Thank you! I figured out another path with all of the data I needed to store. I just ended up using a class. I couldn&#39;t post the code or else I would have."}], "answers": [{"tags": [], "owner": {"reputation": 1590, "user_id": 5428880, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/E8wTo.jpg?s=128&g=1", "display_name": "Suraj Kothari", "link": "https://stackoverflow.com/users/5428880/suraj-kothari"}, "is_accepted": true, "score": 0, "last_activity_date": 1517510829, "creation_date": 1517510829, "answer_id": 48569771, "question_id": 48553228, "link": "https://stackoverflow.com/questions/48553228/how-can-i-write-part-of-dictionary-value-string-as-headers-to-csv-file-in-python/48569771#48569771", "title": "How can I write part of dictionary value string as headers to csv file in python? Is there a better way?", "body": "<p>Here is my approach:</p>\n\n<pre><code>import csv\nd = {\"log1\":[[0,\"Val_num\"],[1,\"Val_num\"]],\n     \"log2\":[[1,\"Val_num\"],[3,\"Val_num\"]],\n     \"log3\":[[2,\"Val_num\"],[3,\"Val_num\"]]}\n</code></pre>\n\n<p>I made a dictionary. Use yours but the \"Val_num\" are meant to be the actual numbers. The first number is the value_name e.g. 1 -> Value1_name</p>\n\n<pre><code>headers = [\"Log File\",\"Value_num\",\"Value1_num\",\"Value2_num\",\"Value3_num\"]\nlog1Row = [\"log1\",\"\",\"\",\"\",\"\"]\nlog2Row = [\"log2\",\"\",\"\",\"\",\"\"]\nlog3Row = [\"log3\",\"\",\"\",\"\",\"\"]\n</code></pre>\n\n<p>Here I simply initialised the rows to be written into the csv file.</p>\n\n<pre><code>for i in d[\"log1\"]:\n    log1Row[i[0] + 1] = i[1]\nfor i in d[\"log2\"]:\n    log2Row[i[0] + 1] = i[1]\nfor i in d[\"log3\"]:\n    log3Row[i[0] + 1] = i[1]\n</code></pre>\n\n<p>Now I am going to iterate over each key in the dictionary and append them into the arrays. The <code>+ 1</code> is needed as the array position for where theses numbers begin from is index 1 not 0 as this is the word \"log\".</p>\n\n<pre><code>with open(\"file.csv\",\"w\") as file:\n    writer = csv.writer(file)\n    writer.writerow(headers)\n    writer.writerow(log1Row)\n    writer.writerow(log2Row)\n    writer.writerow(log3Row)\n</code></pre>\n\n<p>Just open the file to write to and write these rows.</p>\n\n<p>Hopefully this works as long as your dictionary follows the way mine does. </p>\n\n<p>Let me know of any erros.</p>\n\n<p>Thank you.</p>\n"}], "owner": {"reputation": 5, "user_id": 6500364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b3fdabf0c25603fde3e94703c5ff677?s=128&d=identicon&r=PG&f=1", "display_name": "Armaja LaRue-Love", "link": "https://stackoverflow.com/users/6500364/armaja-larue-love"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 48569771, "answer_count": 1, "score": -1, "last_activity_date": 1517510829, "creation_date": 1517441933, "question_id": 48553228, "link": "https://stackoverflow.com/questions/48553228/how-can-i-write-part-of-dictionary-value-string-as-headers-to-csv-file-in-python", "title": "How can I write part of dictionary value string as headers to csv file in python? Is there a better way?", "body": "<p>I have a dictionary that uses log file names as keys. When reading through a text file if it contains a value I was searching for, it saves the entire line as a new value in the list of values for that key(log file name).<br>\nI.e Key: logFile0  Value: [Val1 5, Val2 3, Val3 72]. \n I want to output to a csv file the values as headers and which log file it was found and the value.</p>\n\n<pre><code>  Key            |         Value\n  log1           |    [Value_name Val_num], [Value1_name Val_num]\n  log2           |    [Value1_name Val_num], [Value3_name Valu_num]\n  log3           |    [Value2_name Val_num], [Value3_name Val_num]\n</code></pre>\n\n<p>I want it to be displayed in the csv file where for each time the value was found in the log file, it's value is displayed as:</p>\n\n<pre><code>    Value_name    |    Value1_name   |   Value2_name  |  Value3_name\nlog1      val_num |      val_num     |                | \nlog2              |        val_num   |                |     val_num\nlog3              |                  |      val_num   |      val_num\n</code></pre>\n\n<p>Does anybody know how to do this? Or is there a better way to store all of this information and then display?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "edited": false, "score": 1, "creation_date": 1517441988, "post_id": 48553222, "comment_id": 84102904, "body": "You probably did <code>from os import open</code> or <code>from os import *</code> earlier in your code. The code you posted doesn&#39;t throw that error."}, {"owner": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "edited": false, "score": 1, "creation_date": 1517442045, "post_id": 48553222, "comment_id": 84102923, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/1046656/an-integer-is-required-open\">An integer is required? open()</a>"}, {"owner": {"reputation": 407, "user_id": 3605934, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/484ee50e4b6995dde2073274330562c9?s=128&d=identicon&r=PG&f=1", "display_name": "M4cJunk13", "link": "https://stackoverflow.com/users/3605934/m4cjunk13"}, "reply_to_user": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "edited": false, "score": 0, "creation_date": 1517442169, "post_id": 48553222, "comment_id": 84102955, "body": "@Rawing 8 No, in fact, I forgot to import os in the very beginning. I&#39;m doing this in a jupyter notebook so I&#39;ve gone back in and <code>imported os</code>, then taken it out."}, {"owner": {"reputation": 74709, "user_id": 21945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/631470ecb1d4fe8bd3be6d7e0dfe4449?s=128&d=identicon&r=PG", "display_name": "mhawke", "link": "https://stackoverflow.com/users/21945/mhawke"}, "edited": false, "score": 0, "creation_date": 1517442264, "post_id": 48553222, "comment_id": 84102982, "body": "Probably something, somewhere, is altering the reference to the builtin <code>open()</code> function.  Try printing its value: <code>print(open)</code>"}, {"owner": {"reputation": 407, "user_id": 3605934, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/484ee50e4b6995dde2073274330562c9?s=128&d=identicon&r=PG&f=1", "display_name": "M4cJunk13", "link": "https://stackoverflow.com/users/3605934/m4cjunk13"}, "reply_to_user": {"reputation": 74709, "user_id": 21945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/631470ecb1d4fe8bd3be6d7e0dfe4449?s=128&d=identicon&r=PG", "display_name": "mhawke", "link": "https://stackoverflow.com/users/21945/mhawke"}, "edited": false, "score": 0, "creation_date": 1517442399, "post_id": 48553222, "comment_id": 84103013, "body": "@mhawke You forgot a &#39;(&#39;  This is what i got using the <code>print((open))</code> <code>&lt;built-in function open&gt;</code>"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1517442410, "post_id": 48553222, "comment_id": 84103016, "body": "@M4cJunk13 but this is iPython so it&#39;s possible to trample a built-in &quot;permanently&quot; which may also have happened. You may need to clear the namespace."}, {"owner": {"reputation": 74709, "user_id": 21945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/631470ecb1d4fe8bd3be6d7e0dfe4449?s=128&d=identicon&r=PG", "display_name": "mhawke", "link": "https://stackoverflow.com/users/21945/mhawke"}, "edited": false, "score": 0, "creation_date": 1517442441, "post_id": 48553222, "comment_id": 84103026, "body": "@M4cJunk13: actually I added an extra one, thanks. Anyway, it&#39;s not a good test because <code>print(os.open)</code> displays the same string. Is your script <i>exactly</i> as you show in your question?"}, {"owner": {"reputation": 407, "user_id": 3605934, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/484ee50e4b6995dde2073274330562c9?s=128&d=identicon&r=PG&f=1", "display_name": "M4cJunk13", "link": "https://stackoverflow.com/users/3605934/m4cjunk13"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1517442547, "post_id": 48553222, "comment_id": 84103063, "body": "@roganjosh By clearing the <code>namespace</code> do you mean deleting line <code>import os</code> and re-run?"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 1, "creation_date": 1517442717, "post_id": 48553222, "comment_id": 84103104, "body": "@M4cJunk13 specifically for Jupyter I don&#39;t know but I don&#39;t think your suggestion will work. For example, you&#39;d do it in Spyder (or Canopy) <a href=\"https://stackoverflow.com/a/47738834/4799172\">this way</a>. <i>But</i>, your latest comment was that <code>open</code> points to the built-in. Your error does not make sense with the code you have given so I&#39;d suspect an iPython residual issue somewhere where <code>open</code> was redefined somehow, I just don&#39;t know where sorry."}, {"owner": {"reputation": 407, "user_id": 3605934, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/484ee50e4b6995dde2073274330562c9?s=128&d=identicon&r=PG&f=1", "display_name": "M4cJunk13", "link": "https://stackoverflow.com/users/3605934/m4cjunk13"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 1, "creation_date": 1517443018, "post_id": 48553222, "comment_id": 84103184, "body": "@roganjosh I&#39;ve managed to get it to work by deleting the entire notebook and creating a brand new one. I&#39;ve never used <code>from os import *</code>, or did I even know about it. Perhaps something got cached into the notebook somehow. I&#39;m not sure, but I guess this is a jupyter notebook issue. Thanks!"}], "owner": {"reputation": 407, "user_id": 3605934, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/484ee50e4b6995dde2073274330562c9?s=128&d=identicon&r=PG&f=1", "display_name": "M4cJunk13", "link": "https://stackoverflow.com/users/3605934/m4cjunk13"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1621, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1517442812, "creation_date": 1517441908, "last_edit_date": 1517442812, "question_id": 48553222, "link": "https://stackoverflow.com/questions/48553222/python-opening-txt-error-file-an-integer-is-required-got-type-str", "title": "python opening .txt error file an integer is required (got type str)", "body": "<p>I've never used from <code>os import *</code> So this duplicate suggestion is not valid. Please look at the code in the description.</p>\n\n<p>I'm not sure why I am running into this error. I thought it would be a simple with open() method but it isn't working. I have a .txt file that I'm trying to open and I'm getting this error.</p>\n\n<p>I'm not sure why it is asking for a integer vs a string to open a .txt file</p>\n\n<pre><code>import os\nimport spacy\nimport en_core_web_sm\nimport plac\nfrom collections import Counter\nfrom __future__ import unicode_literals\n\nfile = 'spacy_sample.txt'\nwith open(file, 'r' )as f:\n    '''Do something'''\n\n\nTypeError                                 Traceback (most recent call last)\n&lt;ipython-input-198-b6441a57e84e&gt; in &lt;module&gt;()\n----&gt; 1 with open(file, 'r' )as f:\n      2     print(f)\n\nTypeError: an integer is required (got type str)\n</code></pre>\n"}, {"tags": ["python", "regex", "nlp", "nltk", "data-mining"], "comments": [{"owner": {"reputation": 1475, "user_id": 7474744, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2e530f816ed5c411e76e0e55419966e0?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/7474744/joe"}, "edited": false, "score": 0, "creation_date": 1517441921, "post_id": 48553196, "comment_id": 84102888, "body": "You need to look into Regex. That is what your talking about. Just a warning this question does not meet standards. people will vote it down."}, {"owner": {"reputation": 93705, "user_id": 610569, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/0e9087f2672b0e4f28d91266acf9ce57?s=128&d=identicon&r=PG", "display_name": "alvas", "link": "https://stackoverflow.com/users/610569/alvas"}, "edited": false, "score": 0, "creation_date": 1517466124, "post_id": 48553196, "comment_id": 84108923, "body": "How long is your list of search words?"}, {"owner": {"reputation": 3, "user_id": 8320104, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-JZPwc3_S2uc/AAAAAAAAAAI/AAAAAAAAAAA/rBaYmkyhf3E/photo.jpg?sz=128", "display_name": "shivam negi", "link": "https://stackoverflow.com/users/8320104/shivam-negi"}, "reply_to_user": {"reputation": 93705, "user_id": 610569, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/0e9087f2672b0e4f28d91266acf9ce57?s=128&d=identicon&r=PG", "display_name": "alvas", "link": "https://stackoverflow.com/users/610569/alvas"}, "edited": false, "score": 0, "creation_date": 1517490963, "post_id": 48553196, "comment_id": 84123016, "body": "@alvas it will be having 22000 records approx where each record will be having a paragraph of 300-8000 words"}, {"owner": {"reputation": 93705, "user_id": 610569, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/0e9087f2672b0e4f28d91266acf9ce57?s=128&d=identicon&r=PG", "display_name": "alvas", "link": "https://stackoverflow.com/users/610569/alvas"}, "edited": false, "score": 0, "creation_date": 1517533467, "post_id": 48553196, "comment_id": 84145167, "body": "That&#39;s the number of rows in your data. How many search words are you planning to search. You have to consider the <a href=\"https://rob-bell.net/2009/06/a-beginners-guide-to-big-o-notation/\" rel=\"nofollow noreferrer\">rob-bell.net/2009/06/a-beginners-guide-to-big-o-notation</a> and <a href=\"https://stackoverflow.com/questions/487258/what-is-a-plain-english-explanation-of-big-o-notation\" title=\"what is a plain english explanation of big o notation\">stackoverflow.com/questions/487258/&hellip;</a> if you&#39;re doing unindex search and the order of your <code>searced_words</code> esp. if you use <code>any()</code> / <code>all()</code>"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 8320104, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-JZPwc3_S2uc/AAAAAAAAAAI/AAAAAAAAAAA/rBaYmkyhf3E/photo.jpg?sz=128", "display_name": "shivam negi", "link": "https://stackoverflow.com/users/8320104/shivam-negi"}, "edited": false, "score": 0, "creation_date": 1517442962, "post_id": 48553275, "comment_id": 84103173, "body": "Hey thanks for the quick reply,  That worked for me, though it has not created a new column and linked the sentences to the paragraph. Can you please tell how I can make sure that each extracted sentence corresponds to the paragraph-description without losing the index?  I may need 3 column, ID DESCRIPTION SentencesExtracted"}, {"owner": {"reputation": 632, "user_id": 8766025, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7112bf0e140281eb3f4191f61eab6fc3?s=128&d=identicon&r=PG&f=1", "display_name": "ChootsMagoots", "link": "https://stackoverflow.com/users/8766025/chootsmagoots"}, "reply_to_user": {"reputation": 3, "user_id": 8320104, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-JZPwc3_S2uc/AAAAAAAAAAI/AAAAAAAAAAA/rBaYmkyhf3E/photo.jpg?sz=128", "display_name": "shivam negi", "link": "https://stackoverflow.com/users/8320104/shivam-negi"}, "edited": false, "score": 0, "creation_date": 1517443680, "post_id": 48553275, "comment_id": 84103348, "body": "See my edit, that should do it.  Please confirm my answer :)"}, {"owner": {"reputation": 632, "user_id": 8766025, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7112bf0e140281eb3f4191f61eab6fc3?s=128&d=identicon&r=PG&f=1", "display_name": "ChootsMagoots", "link": "https://stackoverflow.com/users/8766025/chootsmagoots"}, "reply_to_user": {"reputation": 3, "user_id": 8320104, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-JZPwc3_S2uc/AAAAAAAAAAI/AAAAAAAAAAA/rBaYmkyhf3E/photo.jpg?sz=128", "display_name": "shivam negi", "link": "https://stackoverflow.com/users/8320104/shivam-negi"}, "edited": false, "score": 0, "creation_date": 1517443792, "post_id": 48553275, "comment_id": 84103375, "body": "Oh, the problem with this is it will only save the last sentence in the new column.  Not sure what you want to do in the case where there are multiple sentences containing &#39;superb product&#39;"}, {"owner": {"reputation": 632, "user_id": 8766025, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7112bf0e140281eb3f4191f61eab6fc3?s=128&d=identicon&r=PG&f=1", "display_name": "ChootsMagoots", "link": "https://stackoverflow.com/users/8766025/chootsmagoots"}, "reply_to_user": {"reputation": 3, "user_id": 8320104, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-JZPwc3_S2uc/AAAAAAAAAAI/AAAAAAAAAAA/rBaYmkyhf3E/photo.jpg?sz=128", "display_name": "shivam negi", "link": "https://stackoverflow.com/users/8320104/shivam-negi"}, "edited": false, "score": 0, "creation_date": 1517444040, "post_id": 48553275, "comment_id": 84103434, "body": "You also might need to declare df[&#39;extracted_sentence&#39;] as a column before the loop, not sure.  Sorry for a bunch of comments"}], "tags": [], "owner": {"reputation": 632, "user_id": 8766025, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7112bf0e140281eb3f4191f61eab6fc3?s=128&d=identicon&r=PG&f=1", "display_name": "ChootsMagoots", "link": "https://stackoverflow.com/users/8766025/chootsmagoots"}, "is_accepted": true, "score": 0, "last_activity_date": 1517443604, "last_edit_date": 1517443604, "creation_date": 1517442234, "answer_id": 48553275, "question_id": 48553196, "link": "https://stackoverflow.com/questions/48553196/extracting-sentence-from-a-dataframe-with-description-column-based-on-a-phrase/48553275#48553275", "title": "Extracting sentence from a dataframe with description column based on a phrase", "body": "<p>Assuming the paragraphs are neatly formatted into sentences with ending periods, something like: </p>\n\n<p><code>for index, paragraph in df['column_name'].iteritems():\n    for sentence in paragraph.split('.'):\n        if 'superb prod' in sentence: \n            print(sentence)\n            df['extracted_sentence'][index] = sentence</code></p>\n\n<p>This is going to be quite slow, but idk if there's a better way.  </p>\n"}, {"tags": [], "owner": {"reputation": 137, "user_id": 11614437, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/569dfed6e659bc6d6cb2d7c98bf35df4?s=128&d=identicon&r=PG&f=1", "display_name": "Ayjax", "link": "https://stackoverflow.com/users/11614437/ayjax"}, "is_accepted": false, "score": 1, "last_activity_date": 1572426340, "creation_date": 1572426340, "answer_id": 58621805, "question_id": 48553196, "link": "https://stackoverflow.com/questions/48553196/extracting-sentence-from-a-dataframe-with-description-column-based-on-a-phrase/58621805#58621805", "title": "Extracting sentence from a dataframe with description column based on a phrase", "body": "<p>There are lot of methods to do that ,@ChootsMagoots gave you the good answer but SPacy is also so efficient, you can simply choose the pattern that will lead you  to that sentence, but beofre that, you can need to define a function that will define the sentence here's the code :</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>\nimport spacy\n\ndef product_sentencizer(doc):\n    ''' Look for sentence start tokens by scanning for periods only. '''\n    for i, token in enumerate(doc[:-2]):  # The last token cannot start a sentence\n        if token.text == \".\":\n            doc[i+1].is_sent_start = True\n        else:\n            doc[i+1].is_sent_start = False  # Tell the default sentencizer to ignore this token\n    return doc\n\nnlp = spacy.load('en_core_web_sm',  disable=['ner'])\nnlp.add_pipe(product_sentencizer, before=\"parser\")  # Insert before the parser can build its own sentences\ntext = \"This is a superb product. I so so loved this superb product that I wanna gift to all. This is like the quality and packaging. I like it very much.\"\ndoc = nlp(text)\n\nmatcher = spacy.matcher.Matcher(nlp.vocab)\npattern = [{'ORTH': 'SUPERB PRODUCT'}] \n\n\nmatches = matcher(doc)\nfor match_id, start, end in matches:\n    matched_span = doc[start:end]\n    print(matched_span.text)         \n    print(matched_span.sent)\n\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 8320104, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-JZPwc3_S2uc/AAAAAAAAAAI/AAAAAAAAAAA/rBaYmkyhf3E/photo.jpg?sz=128", "display_name": "shivam negi", "link": "https://stackoverflow.com/users/8320104/shivam-negi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1057, "favorite_count": 1, "accepted_answer_id": 48553275, "answer_count": 2, "score": 0, "last_activity_date": 1572426340, "creation_date": 1517441699, "last_edit_date": 1517443641, "question_id": 48553196, "link": "https://stackoverflow.com/questions/48553196/extracting-sentence-from-a-dataframe-with-description-column-based-on-a-phrase", "title": "Extracting sentence from a dataframe with description column based on a phrase", "body": "<p>I have a dataframe with a 'description' column with details about the product. Each of the description in the column has long paragraphs. Like</p>\n\n<p>\"This is a superb product. I so so loved this superb product that I wanna gift to all. This is like the quality and packaging. I like it very much\"</p>\n\n<p>How do I locate/extract the sentence which has the phrase \"superb product\", and place it in a new column?</p>\n\n<p>So for this case the result will be\n<a href=\"https://i.stack.imgur.com/yKyeU.png\" rel=\"nofollow noreferrer\">expected output</a></p>\n\n<p>I have used this, </p>\n\n<pre><code>searched_words=['superb product','SUPERB PRODUCT']\n\n\nprint(df['description'].apply(lambda text: [sent for sent in sent_tokenize(text)\n                           if any(True for w in word_tokenize(sent) \n                                     if stemmer.stem(w.lower()) in searched_words)]))\n</code></pre>\n\n<p>The output for this is not suitable. Though it works if I put just one word in \" Searched Word\" List.</p>\n"}, {"tags": ["python", "sympy"], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user6655984"}, "is_accepted": false, "score": 0, "last_activity_date": 1517445102, "last_edit_date": 1517445102, "creation_date": 1517444503, "answer_id": 48553572, "question_id": 48553179, "link": "https://stackoverflow.com/questions/48553179/rounding-coefficients-of-a-symbolic-expression-in-sympy/48553572#48553572", "title": "Rounding coefficients of a symbolic expression in SymPy", "body": "<p>The rounding part was already addressed in <a href=\"https://stackoverflow.com/questions/48491577/printing-the-output-rounded-to-3-decimals-in-sympy\">Printing the output rounded to 3 decimals in SymPy</a> so I won't repeat my answer there, focusing instead of dropping imaginary parts of coefficients.  </p>\n\n<h3>Method 1</h3>\n\n<p>You can simply do <code>re(expr)</code> where expr is your expression. But for this to work, w must be known to be a real variable; otherwise there is no way for SymPy to tell what the real part of <code>(3+4*I)*w</code> is. (SymPy symbols are assumed to be complex unless stated otherwise.) This will do the job:</p>\n\n<pre><code>w = symbols('w', real=True)\nexpr = # your formula\nexpr = re(expr)\n</code></pre>\n\n<h3>Method 2</h3>\n\n<p>If for some reason you can't do the above... another, somewhat intrusive, way to drop the imaginary part of <em>everything</em> is to replace I with 0:</p>\n\n<pre><code>expr = expr.xreplace({I: 0})\n</code></pre>\n\n<p>This assumes the expression is already in the expanded form (as shown), so there is no <code>(3+4*I)**2</code>, for example; otherwise the result would be wrong. </p>\n\n<h3>Method 3</h3>\n\n<p>A more robust approach than 2, but specialized to polynomials:</p>\n\n<pre><code>expr = Poly([re(c) for c in Poly(expr, w).all_coeffs()], w).as_expr()\n</code></pre>\n\n<p>Here the expression is first turned into a polynomial in <code>w</code> (which is possible in your example, since it has a polynomial form). Then the real part of each coefficient is taken, and a polynomial is rebuilt from them. The final part <code>as_expr()</code> returns it back to expression form, if desired. </p>\n\n<p>Either way, the output for your expression: </p>\n\n<pre><code>-1.705768*w**18 + 14.702976409432*w**16 - 28.7694094371724*w**14 + 59.0191623753299*w**12 + 24.7015297857594*w**10 - 549.093511217598*w**8 + 1345.40434657845*w**6 - 1594.14046181284*w**4 + 980.58940367608*w**2 - 254.8428594382\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 9297073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d0633a5fb2644d3500987a7f21361fb?s=128&d=identicon&r=PG&f=1", "display_name": "Bartosz Muszy\u0144ski", "link": "https://stackoverflow.com/users/9297073/bartosz-muszy%c5%84ski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 858, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1517445102, "creation_date": 1517441636, "last_edit_date": 1517444763, "question_id": 48553179, "link": "https://stackoverflow.com/questions/48553179/rounding-coefficients-of-a-symbolic-expression-in-sympy", "title": "Rounding coefficients of a symbolic expression in SymPy", "body": "<p>I'm currently trying to calculate a negative group delay of analog filters by using symbolic calculations in Python. The problem that I'm currently trying to resolve is to get rid of some very small imaginary coefficients.</p>\n\n<p>For example, consider fraction with such numerator (imaginary parts are bolded): </p>\n\n<p>(-1.705768*w^18 + 14.702976409432*w^16 + <strong>1.06581410364015e-14*I*w^15</strong> - 28.7694094371724*w^14 - <strong>9.94759830064144e-14*I*w^13</strong> + 59.0191623753299*w^12 + <strong>5.6843418860808e-14*I*w^11</strong> + 24.7015297857594*w^10 - <strong>1.13686837721616e-13*I*w^9</strong> - 549.093511217598*w^8 - <strong>5.6843418860808e-14*I*w^7</strong> + 1345.40434657845*w^6 + <strong>2.27373675443232e-13*I*w^5</strong> - 1594.14046181284*w^4 - <strong>1.13686837721616e-13*I*w^3</strong> + 980.58940367608*w^2 - 254.8428594382)</p>\n\n<p>Is there any way to automatically round those small coefficients, so they would be equal 0 (in general any negligligible values)? Or at least, can I somehow filter imaginary values out? I've tried to use re(given_fraction), but it couldn't return anything. Also standard rounding function can't cope with symbolic expressions.</p>\n"}, {"tags": ["python", "django", "pdf", "python-imaging-library", "reportlab"], "answers": [{"comments": [{"owner": {"reputation": 4480, "user_id": 2261062, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/15756b0278dbf58ae90d2ffe8accbb81?s=128&d=identicon&r=PG", "display_name": "Sembei Norimaki", "link": "https://stackoverflow.com/users/2261062/sembei-norimaki"}, "edited": false, "score": 0, "creation_date": 1612181644, "post_id": 48626991, "comment_id": 116677786, "body": "Where does the 0.24 come from in the scaling of the canvas? Where did you get this number?"}, {"owner": {"reputation": 1309, "user_id": 963465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90d19ec4fadc2c91ec8d5b6e6d17ed65?s=128&d=identicon&r=PG", "display_name": "Michiel Overtoom", "link": "https://stackoverflow.com/users/963465/michiel-overtoom"}, "reply_to_user": {"reputation": 4480, "user_id": 2261062, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/15756b0278dbf58ae90d2ffe8accbb81?s=128&d=identicon&r=PG", "display_name": "Sembei Norimaki", "link": "https://stackoverflow.com/users/2261062/sembei-norimaki"}, "edited": false, "score": 0, "creation_date": 1612277630, "post_id": 48626991, "comment_id": 116712837, "body": "Trial and error. But I think it must be computable."}], "tags": [], "owner": {"reputation": 1309, "user_id": 963465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90d19ec4fadc2c91ec8d5b6e6d17ed65?s=128&d=identicon&r=PG", "display_name": "Michiel Overtoom", "link": "https://stackoverflow.com/users/963465/michiel-overtoom"}, "is_accepted": false, "score": 0, "last_activity_date": 1517847869, "creation_date": 1517847869, "answer_id": 48626991, "question_id": 48553162, "link": "https://stackoverflow.com/questions/48553162/generate-pdf-using-reportlab-with-custom-size-page-and-best-image-resolution/48626991#48626991", "title": "Generate PDF using Reportlab with custom size page and best image resolution", "body": "<p>The trick is to scale reportlab's Canvas before drawing the image onto it. It doesn't seem to pick up correctly the DPI information from the file.</p>\n\n<p>This example code works pretty well for my laserprinter:</p>\n\n<pre><code>from PIL import Image, ImageDraw, ImageFont\nimport reportlab.pdfgen.canvas\nfrom reportlab.lib.units import mm\n\n# Create an image with 300DPI, 150mm by 105mm.\ndpi = 300\nmmwidth = 150\nmmheight = 105\npixwidth = int(mmwidth / 25.4 * dpi)\npixheight = int(mmheight / 25.4 * dpi)\nim = Image.new(\"RGB\", (pixwidth, pixheight), \"white\")\ndr = ImageDraw.Draw(im)\ndr.rectangle((0, 0, pixwidth-1, pixheight-1), outline=\"black\")\ndr.line((0, 0, pixwidth, pixheight), \"black\")\ndr.line((0, pixheight, pixwidth, 0), \"black\")\ndr.text((100, 100), \"I should be 150mm x 105mm when printed, \\\n    with a thin black outline, at 300DPI\", fill=\"black\")\n# A test patch of 300 by 300 individual pixels, \n# should be 1 inch by 1 inch when printed,\n# to verify that the resolution is indeed 300DPI.\nfor y in range(400, 400+300):\n    for x in range(500, 500+300):\n        if x &amp; 1 and y &amp; 1:\n            dr.point((x, y), \"black\")\nim.save(\"safaripdf.png\", dpi=(dpi, dpi))\n\n# Create a PDF with a page that just fits the image we've created.\npagesize = (150*mm, 105*mm)\nc = reportlab.pdfgen.canvas.Canvas(\"safaripdf.pdf\", pagesize=pagesize) \nc.scale(0.24, 0.24) # Scale so that the image exactly fits the canvas.\nc.drawImage(\"safaripdf.png\", 0, 0) # , width=pixwidth, height=pixheight)\n\nc.showPage()\nc.save()\n</code></pre>\n\n<p>You might want to tweak the scale values a little bit so that the dimensions fit exactly your printer, but the values above come pretty close. I've checked it with a ruler ;-)</p>\n"}], "owner": {"reputation": 9698, "user_id": 534218, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/05708634a76195e829ce6dd077e45039?s=128&d=identicon&r=PG", "display_name": "Safari", "link": "https://stackoverflow.com/users/534218/safari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 3505, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1548314799, "creation_date": 1517441526, "question_id": 48553162, "link": "https://stackoverflow.com/questions/48553162/generate-pdf-using-reportlab-with-custom-size-page-and-best-image-resolution", "title": "Generate PDF using Reportlab with custom size page and best image resolution", "body": "<p>I have a generated Image (with PIL) and I have to create a PDF with specific size that it will contains this (full size) image.</p>\n\n<p>I start from <code>size= 150mm x 105mm</code>\nI generated the corresponding image <code>1818px x 1287px</code> (with small border)\n(mm to px with <code>300dpi</code>) \nI use this code</p>\n\n<pre><code>pp = 25.4  # 1 pp = 25,4mm\nreturn int((dpi * mm_value) / pp)\n</code></pre>\n\n<p>Now I have to create the PDF file with size <code>page = 150mm x 105mm</code>\nI use <code>reportlab</code> and I would a pdf with the <strong>best image quality</strong> (to print).</p>\n\n<p>Is possible to specify this?</p>\n\n<p>Is correct to create the PDF page size with this:</p>\n\n<pre><code>W = ? // inch value??\nH = ? // inch value??\nbuffer = BytesIO()\np = canvas.Canvas(buffer)\np.setPageSize(size=(W, H)) \n</code></pre>\n\n<p>and to draw the image:</p>\n\n<pre><code>p.drawImage(img, 0, 0, width=img.width, preserveAspectRatio=True, mask='auto', anchor='c')\n</code></pre>\n"}, {"tags": ["python", "regex"], "answers": [{"comments": [{"owner": {"reputation": 81, "user_id": 7882185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10f804c1eb4e873ab2a395e5b6bc5472?s=128&d=identicon&r=PG&f=1", "display_name": "banjoman", "link": "https://stackoverflow.com/users/7882185/banjoman"}, "edited": false, "score": 0, "creation_date": 1517505251, "post_id": 48553175, "comment_id": 84132749, "body": "Thank you.  Works very well."}], "tags": [], "owner": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "is_accepted": false, "score": 1, "last_activity_date": 1517441601, "creation_date": 1517441601, "answer_id": 48553175, "question_id": 48553106, "link": "https://stackoverflow.com/questions/48553106/parsing-related-group-of-lines-in-a-text-file-using-python-regular-expression/48553175#48553175", "title": "Parsing related group of lines in a text file using python regular expression", "body": "<p>Your regex is anchored to the end of the line:</p>\n\n<pre><code>^(\\d{4}-\\d{2}-\\d{2} \\d{2}:\\d{2}:\\d{2})(.*?)$\n</code></pre>\n\n<p>Since you've enabled multi-line mode, <code>$</code> matches at a line break. That's why the match ends after <code>global_pg_audit</code>.</p>\n\n<hr>\n\n<p>You want to match until the next line that starts with a date. You can use a lookahead to do this:</p>\n\n<pre><code>^(\\d{4}-\\d{2}-\\d{2} \\d{2}:\\d{2}:\\d{2})(.*?)(?=\\d{4}-\\d{2}-\\d{2} \\d{2}:\\d{2}:\\d{2}|\\Z)\n</code></pre>\n\n<p>The alternation <code>|\\Z</code> allows the regex to match the last line even though it's not followed by a date.</p>\n\n<p>See also the <a href=\"https://regex101.com/r/ZhCj18/1\" rel=\"nofollow noreferrer\">regex demo</a>.</p>\n"}], "owner": {"reputation": 81, "user_id": 7882185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10f804c1eb4e873ab2a395e5b6bc5472?s=128&d=identicon&r=PG&f=1", "display_name": "banjoman", "link": "https://stackoverflow.com/users/7882185/banjoman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1517441601, "creation_date": 1517441205, "question_id": 48553106, "link": "https://stackoverflow.com/questions/48553106/parsing-related-group-of-lines-in-a-text-file-using-python-regular-expression", "title": "Parsing related group of lines in a text file using python regular expression", "body": "<p>I have this file containing this text:</p>\n\n<pre>\n$ more audit.log\n2018-01-31 15:34:08 GMT:10.34.160.60(63788):agent3@pem:[31884]00000:LOG:  statement: DROP TABLE tmp_zombies\n2018-01-31 15:58:52 GMT:127.0.0.1(45050):agent1@pem:[13182]00000:LOG:  statement: CREATE TEMP TABLE tmp_zombies(jagpid int4)\n2018-01-31 15:58:52 GMT:127.0.0.1(45050):agent1@pem:[13182]00000:LOG:  statement: DROP TABLE tmp_zombies\n2018-01-31 16:24:00 GMT:10.34.160.55(57199):agent8@pem:[27888]00000:LOG:  statement: CREATE TEMP TABLE tmp_zombies(jagpid int4)\n2018-01-31 16:24:00 GMT:10.34.160.55(57199):agent8@pem:[27888]00000:LOG:  statement: DROP TABLE tmp_zombies\n2018-01-31 21:08:47 GMT:[local]:pgsql@p106:[26349]00000:LOG:  statement: create table global_pg_audit\n        (\n           rolename         text not null,\n           stmt_timestamp   timestamp not null,\n           source_ip        text,\n           target_ip        text,\n           dbname           text,\n           pid              text,\n           statement_type   text,\n           statement        text\n        );\n2018-01-31 15:34:08 GMT:10.34.160.60(63788):agent3@pem:[31884]00000:LOG:  statement: DROP TABLE tmp_zombies\n</pre>\n\n<p>When I run this python code:</p>\n\n<pre>\n    import re\n    fullpathname='./audit.log'\n    regex_pattern=re.compile(r'^(\\d{4}-\\d{2}-\\d{2} \\d{2}:\\d{2}:\\d{2})(.*?)$',re.MULTILINE|re.DOTALL)\n    with open(fullpathname,'r') as f:\n        log_entries = regex_pattern.findall(f.read())\n    counter=0\n    for entry in log_entries:\n        print '%d=>['%(counter),entry,']'\n        counter=counter+1\n</pre>\n\n<p>The output is as follows:</p>\n\n<pre>\n0=>[ ('2018-01-31 15:34:08', ' GMT:10.34.160.60(63788):agent3@pem:[31884]00000:LOG:  statement: DROP TABLE tmp_zombies') ]\n1=>[ ('2018-01-31 15:58:52', ' GMT:127.0.0.1(45050):agent1@pem:[13182]00000:LOG:  statement: CREATE TEMP TABLE tmp_zombies(jagpid int4)') ]\n2=>[ ('2018-01-31 15:58:52', ' GMT:127.0.0.1(45050):agent1@pem:[13182]00000:LOG:  statement: DROP TABLE tmp_zombies') ]\n3=>[ ('2018-01-31 16:24:00', ' GMT:10.34.160.55(57199):agent8@pem:[27888]00000:LOG:  statement: CREATE TEMP TABLE tmp_zombies(jagpid int4)') ]\n4=>[ ('2018-01-31 16:24:00', ' GMT:10.34.160.55(57199):agent8@pem:[27888]00000:LOG:  statement: DROP TABLE tmp_zombies') ]\n5=>[ ('2018-01-31 21:08:47', ' GMT:[local]:pgsql@p106:[26349]00000:LOG:  statement: create table global_pg_audit ') ]\n6=>[ ('2018-01-31 15:34:08', ' GMT:10.34.160.60(63788):agent3@pem:[31884]00000:LOG:  statement: DROP TABLE tmp_zombies') ]\n7=>[ ('2018-01-31 15:58:52', ' GMT:127.0.0.1(45050):agent1@pem:[13182]00000:LOG:  statement: CREATE TEMP TABLE tmp_zombies(jagpid int4)') ]\n\n</pre>\n\n<p>Notice that line 5 in the output, the code did not include the entire statement which should be:</p>\n\n<pre>\n    create table global_pg_audit\n        (\n           rolename         text not null,\n           stmt_timestamp   timestamp not null,\n           source_ip        text,\n           target_ip        text,\n           dbname           text,\n           pid              text,\n           statement_type   text,\n           statement        text\n        );\n</pre>\n\n<p>What is wrong with the code?</p>\n\n<p>Thanks very much!</p>\n"}, {"tags": ["python", "list", "dictionary"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1517441159, "post_id": 48553077, "comment_id": 84102663, "body": "or using a plain dict: <code>for item in my_list: some_dict[item] = some_dict.get(item, 0) + 1</code>"}], "answers": [{"comments": [{"owner": {"reputation": 1011, "user_id": 2969402, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a971b3c4d070d8af92b98952b702c9bb?s=128&d=identicon&r=PG&f=1", "display_name": "user2969402", "link": "https://stackoverflow.com/users/2969402/user2969402"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1517441298, "post_id": 48553099, "comment_id": 84102705, "body": "just realized that and edited."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1517441326, "post_id": 48553099, "comment_id": 84102716, "body": "still, should probably just use <code>int</code>."}, {"owner": {"reputation": 39, "user_id": 8513808, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ozdu7YhO1CQ/AAAAAAAAAAI/AAAAAAAAAMk/KsV_prHS11A/photo.jpg?sz=128", "display_name": "louielouielouie", "link": "https://stackoverflow.com/users/8513808/louielouielouie"}, "edited": false, "score": 0, "creation_date": 1517442044, "post_id": 48553099, "comment_id": 84102922, "body": "Thank you for your answer, this helps!"}], "tags": [], "owner": {"reputation": 1011, "user_id": 2969402, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a971b3c4d070d8af92b98952b702c9bb?s=128&d=identicon&r=PG&f=1", "display_name": "user2969402", "link": "https://stackoverflow.com/users/2969402/user2969402"}, "is_accepted": true, "score": 0, "last_activity_date": 1517441157, "creation_date": 1517441157, "answer_id": 48553099, "question_id": 48553077, "link": "https://stackoverflow.com/questions/48553077/iterating-over-a-list-while-updating-a-dictionary-with-python/48553099#48553099", "title": "Iterating over a list while updating a dictionary with Python", "body": "<p>You can use <code>defaultdict</code></p>\n\n<pre><code>from collections import defaultdict\ndiction = defaultdict(lambda:0, {})\nfor item in your_list:\n    diction[item] += 1\n</code></pre>\n\n<p>All your keys will be initialized to 1 if they are not in the dict already or incremented otherwise.</p>\n"}], "owner": {"reputation": 39, "user_id": 8513808, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ozdu7YhO1CQ/AAAAAAAAAAI/AAAAAAAAAMk/KsV_prHS11A/photo.jpg?sz=128", "display_name": "louielouielouie", "link": "https://stackoverflow.com/users/8513808/louielouielouie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "closed_date": 1517441057, "accepted_answer_id": 48553099, "answer_count": 1, "score": 0, "last_activity_date": 1517441182, "creation_date": 1517440963, "question_id": 48553077, "link": "https://stackoverflow.com/questions/48553077/iterating-over-a-list-while-updating-a-dictionary-with-python", "closed_reason": "Duplicate", "title": "Iterating over a list while updating a dictionary with Python", "body": "<p>For example, I have a list that has copies of certain items:</p>\n\n<pre><code>list = [item1,item2,item2,item3,item4,item4]\n</code></pre>\n\n<p>And I want to iterate over <code>list</code> and put each item in an empty dictionary <code>dict = {}</code></p>\n\n<p><code>for item in list:\n     # if the item isn't in the dict, add it and set value to 1\n     # if item is already in dict, increment value by one</code></p>\n\n<p>What is the best way to manipulate the dictionary and using the <code>for</code> loop variable <code>item</code>?</p>\n"}, {"tags": ["python", "numpy", "indexing"], "comments": [{"owner": {"reputation": 798, "user_id": 3692177, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/EJrNt.jpg?s=128&g=1", "display_name": "SebasSBM", "link": "https://stackoverflow.com/users/3692177/sebassbm"}, "edited": false, "score": 0, "creation_date": 1517441036, "post_id": 48553070, "comment_id": 84102618, "body": "I see two possible ways: conditional statements, or ternary operator. I&#39;d rather use conditional."}, {"owner": {"reputation": 861, "user_id": 3182843, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/599794324/picture?type=large", "display_name": "jrjames83", "link": "https://stackoverflow.com/users/3182843/jrjames83"}, "edited": false, "score": 0, "creation_date": 1517443684, "post_id": 48553070, "comment_id": 84103350, "body": "Could use a try / except IndexError block and set the black values when the index error is caught."}], "answers": [{"tags": [], "owner": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "is_accepted": true, "score": 1, "last_activity_date": 1517444352, "creation_date": 1517444352, "answer_id": 48553558, "question_id": 48553070, "link": "https://stackoverflow.com/questions/48553070/python-handle-out-of-range-numpy-indices/48553558#48553558", "title": "python: handle out of range numpy indices", "body": "<p>Just mask them:</p>\n\n<pre><code># transform\n&gt;&gt;&gt; x2 = ((x-im1.shape[1]/2)/np.cos(t*np.pi/2)+im1.shape[1]/2).astype(np.int)\n# check bounds\n&gt;&gt;&gt; allowed = np.where((x2&gt;=0) &amp; (x2&lt;im1.shape[1]))\n# preallocate with zeros\n&gt;&gt;&gt; res = np.zeros_like(im1)\n# fill in within-bounds pixels\n&gt;&gt;&gt; res[allowed] = im1[y[allowed],x2[allowed]]\n&gt;&gt;&gt; \n# one possible economy I left out for clarity\n&gt;&gt;&gt; np.all(y[allowed] == allowed[0])\nTrue\n</code></pre>\n"}], "owner": {"reputation": 183, "user_id": 6890926, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/7007a37678a6dc5c21dda9719d25e44e?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/6890926/jonathan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 48553558, "answer_count": 1, "score": 0, "last_activity_date": 1517444352, "creation_date": 1517440907, "question_id": 48553070, "link": "https://stackoverflow.com/questions/48553070/python-handle-out-of-range-numpy-indices", "title": "python: handle out of range numpy indices", "body": "<p>I am using the following code to rotate an image along it's y-axis.</p>\n\n<pre><code>y, x = np.indices(im1.shape[:2])\nreturn im1[y, ((x-im1.shape[1]/2)/math.cos(t*math.pi/2)+im1.shape[1]/2).astype(np.int)]\n</code></pre>\n\n<p>Some of the values are intentionally out-of-range.  I would like for out of range pixels to be black (0, 0, 0).  How can I allow the in range indices to work, while replacing the out-of range with black?</p>\n"}, {"tags": ["python", "range"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 2, "creation_date": 1517440958, "post_id": 48553036, "comment_id": 84102596, "body": "you could always check <code>if x &gt; y: x,y = y,x</code>, it&#39;s probably best to enforce some structure to user input though."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9297111"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1517441063, "post_id": 48553036, "comment_id": 84102628, "body": "Thanks, how could I do that without upsetting syntax module?"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1517441088, "post_id": 48553036, "comment_id": 84102638, "body": "the body of the <code>if</code> block needs to be indented"}, {"owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 0, "creation_date": 1517441238, "post_id": 48553036, "comment_id": 84102685, "body": "you need to define the behavior what if i  as a user want to go from 9 to 1"}, {"owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "edited": false, "score": 0, "creation_date": 1517441621, "post_id": 48553036, "comment_id": 84102810, "body": "you can also use <code>assert y &gt; x, &quot;Second integer must be larger than first integer!&quot;</code> after the <code>input</code> lines."}], "owner": {"user_type": "does_not_exist", "display_name": "user9297111"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1517440719, "creation_date": 1517440719, "question_id": 48553036, "link": "https://stackoverflow.com/questions/48553036/python-user-specified-range-with-bigger-number-entered-first", "title": "Python- User specified range with bigger number entered first", "body": "<pre><code>import random\nx= int(input('Enter first integer: '))\ny=int(input('Enter second integer: '))\n\nfor i in range(1,21):\n        i+=1\n        q=random.randint(x,y+1)\n        if q % 2==0:\n            print (str(q)+' is even')\n        else:\n            print(str(q)+' is odd.')\n</code></pre>\n\n<p>Is there and shortcuts for allowing user to enter bigger number first ?Or do I need to nest another if loop such as 'if x>y....'</p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "python-3.x", "pandas", "indexing"], "answers": [{"comments": [{"owner": {"reputation": 5295, "user_id": 2089899, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/JJVOk.jpg?s=128&g=1", "display_name": "Austin", "link": "https://stackoverflow.com/users/2089899/austin"}, "edited": false, "score": 0, "creation_date": 1517441244, "post_id": 48553062, "comment_id": 84102688, "body": "Ah thanks, assumed it was going to create a dataframe where each internal list was another column if I did it that way. I&#39;ll accept this answer as soon as it allows."}, {"owner": {"reputation": 1183, "user_id": 3637548, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/58v6s.jpg?s=128&g=1", "display_name": "B Furtado", "link": "https://stackoverflow.com/users/3637548/b-furtado"}, "edited": false, "score": 0, "creation_date": 1526916817, "post_id": 48553062, "comment_id": 87917273, "body": "Hi, @MaxU, how can I do that for a number of Keys. I&#39;ve tried append, but to no avail."}, {"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "reply_to_user": {"reputation": 1183, "user_id": 3637548, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/58v6s.jpg?s=128&g=1", "display_name": "B Furtado", "link": "https://stackoverflow.com/users/3637548/b-furtado"}, "edited": false, "score": 0, "creation_date": 1526916938, "post_id": 48553062, "comment_id": 87917350, "body": "@BFurtado, please open a new question with the corresponding small reproducible data set and your desired data set."}], "tags": [], "owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "is_accepted": true, "score": 2, "last_activity_date": 1517440846, "creation_date": 1517440846, "answer_id": 48553062, "question_id": 48553028, "link": "https://stackoverflow.com/questions/48553028/performance-unpacking-list-of-lists-into-pandas-dataframe/48553062#48553062", "title": "Performance unpacking list of lists into pandas dataframe", "body": "<p>Try this instead:</p>\n\n<pre><code>In [29]: lst = [[False,False],[True, False],[False, True]]\n\nIn [30]: df = pd.DataFrame(lst, columns=['col1','col2'])\n\nIn [31]: df\nOut[31]:\n    col1   col2\n0  False  False\n1   True  False\n2  False   True\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "is_accepted": false, "score": 2, "last_activity_date": 1517441251, "creation_date": 1517441251, "answer_id": 48553118, "question_id": 48553028, "link": "https://stackoverflow.com/questions/48553028/performance-unpacking-list-of-lists-into-pandas-dataframe/48553118#48553118", "title": "Performance unpacking list of lists into pandas dataframe", "body": "<p>If you want to add columns to an existing dataframe, this will work:-</p>\n\n<pre><code>import pandas as pd\n\ndf = pd.DataFrame()\nlst = [[True, False], [False, False], [True, True], [False, True]]\n\ndf = pd.concat([df, pd.DataFrame(columns=['A', 'B'])], axis=1)\ndf.A, df.B = list(zip(*lst))\n\n#        A      B\n# 0   True  False\n# 1  False  False\n# 2   True   True\n# 3  False   True\n</code></pre>\n"}], "owner": {"reputation": 5295, "user_id": 2089899, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/JJVOk.jpg?s=128&g=1", "display_name": "Austin", "link": "https://stackoverflow.com/users/2089899/austin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 554, "favorite_count": 0, "accepted_answer_id": 48553062, "answer_count": 2, "score": 2, "last_activity_date": 1519962653, "creation_date": 1517440684, "last_edit_date": 1519962653, "question_id": 48553028, "link": "https://stackoverflow.com/questions/48553028/performance-unpacking-list-of-lists-into-pandas-dataframe", "title": "Performance unpacking list of lists into pandas dataframe", "body": "<p>I have a list of lists, where the outer list is length 100k, and each inner list is length 2, with two bool entries, for example <code>[True, False]</code>. I'm trying to put each of the first entries in one column of a dataframe and each of the second entries into another. I have code that works, but it is very slow (takes about 12 seconds):</p>\n\n<pre><code>populate_df[[\"col1\", \"col2\"]] = pd.Series(list_of_lists).apply(pd.Series)\n</code></pre>\n\n<p>Can somebody please recommend a way that performs better?</p>\n"}, {"tags": ["python", "apache-spark"], "answers": [{"comments": [{"owner": {"reputation": 3378, "user_id": 3318273, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/nvfcf.png?s=128&g=1", "display_name": "Romain Jouin", "link": "https://stackoverflow.com/users/3318273/romain-jouin"}, "edited": false, "score": 0, "creation_date": 1517474640, "post_id": 48553044, "comment_id": 84112758, "body": "I think I am on the second case, I updated my questions accordingly"}, {"owner": {"reputation": 3378, "user_id": 3318273, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/nvfcf.png?s=128&g=1", "display_name": "Romain Jouin", "link": "https://stackoverflow.com/users/3318273/romain-jouin"}, "edited": false, "score": 0, "creation_date": 1517478806, "post_id": 48553044, "comment_id": 84115085, "body": "it seems like a &quot;repartition&quot; on a &quot;gz&quot; file doesn&#39;t work. I unzipped the &quot;gz&quot; directly in hdfs, and rebuilt a dataframe on it =&gt; now I can change the number of partitions, and see faster results."}, {"owner": {"reputation": 29493, "user_id": 3269809, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QRvqq.jpg?s=128&g=1", "display_name": "Alper t. Turker", "link": "https://stackoverflow.com/users/3269809/alper-t-turker"}, "reply_to_user": {"reputation": 3378, "user_id": 3318273, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/nvfcf.png?s=128&g=1", "display_name": "Romain Jouin", "link": "https://stackoverflow.com/users/3318273/romain-jouin"}, "edited": false, "score": 0, "creation_date": 1517481643, "post_id": 48553044, "comment_id": 84117002, "body": "It will work, fine but it happens <b>after</b> loading. First stage won&#39;t be affected."}, {"owner": {"reputation": 3378, "user_id": 3318273, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/nvfcf.png?s=128&g=1", "display_name": "Romain Jouin", "link": "https://stackoverflow.com/users/3318273/romain-jouin"}, "edited": false, "score": 0, "creation_date": 1517516434, "post_id": 48553044, "comment_id": 84138747, "body": "I couldn&#39;t really repartition a gz files. I had to transform it on csv to get partioning working correctly."}], "tags": [], "owner": {"reputation": 29493, "user_id": 3269809, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QRvqq.jpg?s=128&g=1", "display_name": "Alper t. Turker", "link": "https://stackoverflow.com/users/3269809/alper-t-turker"}, "is_accepted": false, "score": 3, "last_activity_date": 1517440766, "creation_date": 1517440766, "answer_id": 48553044, "question_id": 48553005, "link": "https://stackoverflow.com/questions/48553005/spark-dataframe-not-distributed/48553044#48553044", "title": "Spark Dataframe not distributed", "body": "<p>There are two possibilities:</p>\n\n<ul>\n<li>File size is below <a href=\"https://stackoverflow.com/q/38249624/8371915\"><code>spark.sql.files.maxPartitionBytes</code></a>.</li>\n<li>File is compressed using unsplitable format like gzip.</li>\n</ul>\n\n<p>In the first case you may consider adjusting parameters, but if you go with defaults, it is already small.</p>\n\n<p>In the second case it is best to unpack file before loading to Spark. If you cannot do that, <code>repartition</code> after loading, but it'll be slow.</p>\n"}], "owner": {"reputation": 3378, "user_id": 3318273, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/nvfcf.png?s=128&g=1", "display_name": "Romain Jouin", "link": "https://stackoverflow.com/users/3318273/romain-jouin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 638, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1517474886, "creation_date": 1517440553, "last_edit_date": 1517474886, "question_id": 48553005, "link": "https://stackoverflow.com/questions/48553005/spark-dataframe-not-distributed", "title": "Spark Dataframe not distributed", "body": "<p>I can't understand why my dataframe is only on one node.\nI have a cluster of 14 machines with 4 physical CPU on a spark standalone cluster.\n<a href=\"https://i.stack.imgur.com/Dhz1a.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Dhz1a.png\" alt=\"enter image description here\"></a></p>\n\n<p>I am connected through a notebook and create my spark context : </p>\n\n<p><a href=\"https://i.stack.imgur.com/pDBfN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pDBfN.png\" alt=\"enter image description here\"></a></p>\n\n<p>I expect a parralelism of 8 partitions, but when I create a dataframe I get only one partition : \n<a href=\"https://i.stack.imgur.com/pPGPw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pPGPw.png\" alt=\"enter image description here\"></a></p>\n\n<p>What am I missing ? </p>\n\n<p>Thanks to anser from user8371915 I repartitions my dataframe (I was reading a compressed file (.csv.gz) so I understand in splittable.\n<a href=\"https://i.stack.imgur.com/AVxcl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AVxcl.png\" alt=\"enter image description here\"></a></p>\n\n<p>But When I do a \"count\" on it, I see it as being executed only on one executor : \n<a href=\"https://i.stack.imgur.com/JQmqH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JQmqH.png\" alt=\"enter image description here\"></a>\nHere namely on executor n\u00b01, even if the file is 700 Mb large, and is on 6 blocks on HDFS. \nAs far as I understand, the calculus should be over 10 cores, over 5 nodes ... But everything is calculated only on one node :-(</p>\n"}, {"tags": ["python", "python-2.7", "numpy", "fft"], "comments": [{"owner": {"reputation": 8191, "user_id": 8881141, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/C3ydX.jpg?s=128&g=1", "display_name": "Mr. T", "link": "https://stackoverflow.com/users/8881141/mr-t"}, "edited": false, "score": 0, "creation_date": 1517440758, "post_id": 48552996, "comment_id": 84102535, "body": "Maybe you want to explain, what your function is supposed to do. When you say polynomial multiplication, you don&#39;t mean <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.polynomial.polynomial.polymul.html#numpy.polynomial.polynomial.polymul\" rel=\"nofollow noreferrer\">this</a>, I assume? And please edit your question and post the full traceback."}, {"owner": {"reputation": 4940, "user_id": 1673574, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/ubyAU.png?s=128&g=1", "display_name": "Chiel", "link": "https://stackoverflow.com/users/1673574/chiel"}, "edited": false, "score": 0, "creation_date": 1517441377, "post_id": 48552996, "comment_id": 84102729, "body": "You can write the complex part of a number with a <code>j</code> suffix, like <code>2j * pi</code> as you use it."}, {"owner": {"reputation": 4940, "user_id": 1673574, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/ubyAU.png?s=128&g=1", "display_name": "Chiel", "link": "https://stackoverflow.com/users/1673574/chiel"}, "edited": false, "score": 0, "creation_date": 1517441495, "post_id": 48552996, "comment_id": 84102774, "body": "This code does not run. Have you tested yourself what you have pasted?"}, {"owner": {"reputation": 117, "user_id": 9221668, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8bd74c8562e757917b63f8700a01ecc?s=128&d=identicon&r=PG&f=1", "display_name": "mpourreza", "link": "https://stackoverflow.com/users/9221668/mpourreza"}, "edited": false, "score": 0, "creation_date": 1517441554, "post_id": 48552996, "comment_id": 84102790, "body": "Yes, it runs and prints the output. But without the imaginary part."}, {"owner": {"reputation": 8191, "user_id": 8881141, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/C3ydX.jpg?s=128&g=1", "display_name": "Mr. T", "link": "https://stackoverflow.com/users/8881141/mr-t"}, "edited": false, "score": 0, "creation_date": 1517441595, "post_id": 48552996, "comment_id": 84102802, "body": "The first error message doesn&#39;t match your code."}, {"owner": {"reputation": 117, "user_id": 9221668, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8bd74c8562e757917b63f8700a01ecc?s=128&d=identicon&r=PG&f=1", "display_name": "mpourreza", "link": "https://stackoverflow.com/users/9221668/mpourreza"}, "edited": false, "score": 0, "creation_date": 1517441690, "post_id": 48552996, "comment_id": 84102830, "body": "Yes. it adds the complex() in error code but my code doesn&#39;t have it."}, {"owner": {"reputation": 8191, "user_id": 8881141, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/C3ydX.jpg?s=128&g=1", "display_name": "Mr. T", "link": "https://stackoverflow.com/users/8881141/mr-t"}, "edited": false, "score": 0, "creation_date": 1517442290, "post_id": 48552996, "comment_id": 84102989, "body": "Strange. Not in my error message."}], "answers": [{"tags": [], "owner": {"reputation": 8191, "user_id": 8881141, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/C3ydX.jpg?s=128&g=1", "display_name": "Mr. T", "link": "https://stackoverflow.com/users/8881141/mr-t"}, "is_accepted": true, "score": 1, "last_activity_date": 1517443244, "last_edit_date": 1517443244, "creation_date": 1517442919, "answer_id": 48553378, "question_id": 48552996, "link": "https://stackoverflow.com/questions/48552996/recursive-fft-discards-the-imaginary-part/48553378#48553378", "title": "Recursive FFT discards the imaginary part", "body": "<p>You try to cast complex numbers to a numpy array that has been defined as float. To overcome this problem, define <code>y</code> as a numpy array with complex values:</p>\n\n<pre><code>y = np.zeros(n, dtype = complex)\n</code></pre>\n\n<p>Output after this change:</p>\n\n<pre><code>[-1.+0.j  1.+2.j  3.+0.j  1.-2.j]\n</code></pre>\n\n<p>If you want to know more about numpy data types, read the <a href=\"https://docs.scipy.org/doc/numpy/user/basics.types.html\" rel=\"nofollow noreferrer\">numpy user guide</a>. </p>\n"}], "owner": {"reputation": 117, "user_id": 9221668, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8bd74c8562e757917b63f8700a01ecc?s=128&d=identicon&r=PG&f=1", "display_name": "mpourreza", "link": "https://stackoverflow.com/users/9221668/mpourreza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1210, "favorite_count": 0, "accepted_answer_id": 48553378, "answer_count": 1, "score": 1, "last_activity_date": 1517443244, "creation_date": 1517440494, "last_edit_date": 1517442331, "question_id": 48552996, "link": "https://stackoverflow.com/questions/48552996/recursive-fft-discards-the-imaginary-part", "title": "Recursive FFT discards the imaginary part", "body": "<p>I am trying to implement recursive FFT.</p>\n\n<pre><code>import numpy as np\nfrom math import e, pi\n\ndef rdft(a):\n    n = a.size\n    if n == 1:\n        return a\n    i = complex(0, 1)\n    w_n = e ** (2 * i * pi / float(n))\n    w = 1\n    a_0 = np.zeros(int(math.ceil(n / 2.0)))\n    a_1 = np.zeros(n / 2)\n    for index in range(0, n):\n        if index % 2 == 0:\n            a_0[index / 2] = a[index]\n        else:\n            a_1[index / 2] = a[index]\n    y_0 = rdft(a_0)\n    y_1 = rdft(a_1)\n    y = np.zeros(n)\n    for k in range(0, n / 2):\n        y[k] = y_0[k] + w * y_1[k]\n        y[k + n / 2] = y_0[k] - w * y_1[k]\n        w = w * w_n\nreturn y\n\n\n\nif __name__ == \"__main__\":\n    a = np.array([1, 0,0, -2])\n    print rdft(a)\n</code></pre>\n\n<p>It gives me the following error:</p>\n\n<pre><code>[-1.  1.  3.  1.]\n/path/file.py:22: ComplexWarning: Casting complex values to real discards the imaginary part y[k] = complex(y_0[k] + w * y_1[k])\n/path/file.py:23: ComplexWarning: Casting complex values to real discards the imaginary part y[k + n / 2] = y_0[k] - w * y_1[k]\n</code></pre>\n\n<p>I'm not familiar with complex calculations in Python. The real values are correct but as it says it discards the imaginary part.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1517440521, "post_id": 48552986, "comment_id": 84102466, "body": "Did you perhaps mean <code>winddata = MFDataset(&#39;wind00{}&#39;.format(s))</code>? <code>&#39;wind00[s]&#39;</code> is a string literal - the <code>s</code> in your <code>for</code> loop has nothing to do with the <code>&quot;s&quot;</code> in the string."}, {"owner": {"reputation": 11, "user_id": 9297041, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/041f9e57520fb0d8317fe161dd075a19?s=128&d=identicon&r=PG&f=1", "display_name": "Robb Thomson", "link": "https://stackoverflow.com/users/9297041/robb-thomson"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1517452146, "post_id": 48552986, "comment_id": 84105286, "body": "Thank you, roganjosh!   But I still get an error message &quot;name &#39;MFDataset&quot; is not defined&quot;"}], "owner": {"reputation": 11, "user_id": 9297041, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/041f9e57520fb0d8317fe161dd075a19?s=128&d=identicon&r=PG&f=1", "display_name": "Robb Thomson", "link": "https://stackoverflow.com/users/9297041/robb-thomson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 146, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1517440428, "creation_date": 1517440428, "question_id": 48552986, "link": "https://stackoverflow.com/questions/48552986/working-with-multiple-nc4-files-in-python-with-netncdf4", "title": "Working with multiple .nc4 files in Python with netNCDF4", "body": "<p>I need to work with multiple .nc4 files with ascending times downloaded from NASA (three in the following example). I have tried to write the files into a simple list (here) (and also into numpy files -- not here), and read from these files serially with MFDataset from netCDF4 in a 'for' statement. I get an error that MFDataset doesn't exist.  (I also tried to simply read from the list serially with 'Dataset' in a 'for' statement, and got a message that the list file does not exist.) ??? Here is a subset of the file:</p>\n\n<pre><code>import numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport csv\nimport glob\nimport netCDF4\nwind00 = glob.glob('Merra/*')\nprint(wind00)\nprint()\nfor s in range(3):\n    winddata = MFDataset('wind00[s]')\n    print(winddata.dimensions.keys())\n    print(winddata.variables.keys())\n    print()\n</code></pre>\n\n<hr>\n\n<p>Many thanks</p>\n"}, {"tags": ["python", "sympy", "lambdify"], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user6655984"}, "is_accepted": false, "score": 0, "last_activity_date": 1517458123, "last_edit_date": 1517458123, "creation_date": 1517441481, "answer_id": 48553159, "question_id": 48552962, "link": "https://stackoverflow.com/questions/48552962/sympy-lambdify-solving-for-unknown-variable-from-two-inequalities/48553159#48553159", "title": "Sympy Lambdify - solving for unknown variable from two inequalities", "body": "<p>The <code>lambdify</code> function does not solve for anything, it only evaluates. To evaluate your <code>expr</code>, it needs to know A, B, and y. You have not provided y, hence the error.</p>\n\n<p>If the goal is to determine y from A and B, you should first get a formula for y in terms of A and B,  presumably using the output of <code>solve</code>. Then lambdify that formula.</p>\n\n<p>As it happens, <code>solve</code> can't solve multivariable inequalities. Even if it could, there would be a range of possible values of y, and <code>lambdify</code> needs something concrete to evaluate. To get somewhere with this, I replaced > with =, solved the equations, and returned the average of these (they are the upper and lower bounds for y, assuming B > 1 as in your example).</p>\n\n<pre><code>A = Symbol('A')  \nB = Symbol('B')\nC = 1000\ny = Symbol('y')  \nexpr = (A * C &gt; C + y, B * y &gt; C + y)\nupper = solve(expr[0].replace(Gt, Eq), y, dict=True)[0][y]\nlower = solve(expr[1].replace(Gt, Eq), y, dict=True)[0][y]\nf = lambdify((A, B), (upper+lower)/2)\n</code></pre>\n\n<p>Now f is a lambda with two arguments, which returns the midpoint of the interval of possible values of y. </p>\n\n<pre><code>import pandas as pd\ndf = pd.DataFrame({'A': pd.Series([2.84, 3.24]),'B': pd.Series([1.7, 2.12])}) \nf(df['A'], df['B'])\n</code></pre>\n\n<p>returns</p>\n\n<pre><code>0    1634.285714\n1    1566.428571\ndtype: float64\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 7769226, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4945e30694d33a2cabeae338166c801e?s=128&d=identicon&r=PG&f=1", "display_name": "Josef", "link": "https://stackoverflow.com/users/7769226/josef"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 391, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1517458192, "creation_date": 1517440237, "last_edit_date": 1517458192, "question_id": 48552962, "link": "https://stackoverflow.com/questions/48552962/sympy-lambdify-solving-for-unknown-variable-from-two-inequalities", "title": "Sympy Lambdify - solving for unknown variable from two inequalities", "body": "<p>I have been successful solving for an unknown variable with solve()<br>\nCode here:  </p>\n\n<pre><code>x = 1000  \ny = Symbol('y')  \nw = 2.84 * x &gt; x + y, 1.7 * y &gt; x + y  \nsolve(w)  \n</code></pre>\n\n<p>Now I am trying to get the same result from a Pandas dataframe, unsuccessfully though.  </p>\n\n<pre><code>df = pd.DataFrame({'A': pd.Series([2.84]),'B': pd.Series([1.7])})  \nA = Symbol('A')  \nB = Symbol('B')\nC = 1000\ny = Symbol('y')  \nexpr = A * C &gt; C + y, B * y &gt; C + y  \nf = lambdify([A,B],expr, modules=\"sympy\")\nf(df['A'],df['B'])  \n</code></pre>\n\n<p>I get the error - NameError: name 'y' is not defined<br>\nWhich is weird because 'y' is what I'm searching for.  </p>\n"}, {"tags": ["python", "macos", "azure", "azure-webjobs"], "comments": [{"owner": {"reputation": 20458, "user_id": 8198946, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oRGKD.png?s=128&g=1", "display_name": "Jay Gong", "link": "https://stackoverflow.com/users/8198946/jay-gong"}, "edited": false, "score": 0, "creation_date": 1517448698, "post_id": 48552934, "comment_id": 84104472, "body": "Hi, would you please post the details about of the error you see.(e.g. a screenshot)"}, {"owner": {"reputation": 20458, "user_id": 8198946, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oRGKD.png?s=128&g=1", "display_name": "Jay Gong", "link": "https://stackoverflow.com/users/8198946/jay-gong"}, "edited": false, "score": 0, "creation_date": 1519376046, "post_id": 48552934, "comment_id": 84894998, "body": "Hi, any updates? Does my answer helps you?"}], "answers": [{"tags": [], "owner": {"reputation": 20458, "user_id": 8198946, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oRGKD.png?s=128&g=1", "display_name": "Jay Gong", "link": "https://stackoverflow.com/users/8198946/jay-gong"}, "is_accepted": false, "score": 3, "last_activity_date": 1517453167, "creation_date": 1517453167, "answer_id": 48554567, "question_id": 48552934, "link": "https://stackoverflow.com/questions/48552934/python-script-using-webjobs-in-azure/48554567#48554567", "title": "Python script using webjobs in azure", "body": "<p>Please refer to the steps as below which I uploaded python script into Webjobs previously. </p>\n\n<p>Step 1 :\nUse the <strong>virtualenv</strong> component to create an independent python runtime environment in your system.Please install it first with command <code>pip install virtualenv</code>  if you don't have it.</p>\n\n<p>If you installed it successfully ,you could see it in your <strong>python/Scripts</strong> file.</p>\n\n<p><a href=\"https://i.stack.imgur.com/fOtfV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fOtfV.png\" alt=\"enter image description here\"></a></p>\n\n<p>Step2 : Run the commad to create independent python runtime environment.</p>\n\n<p><a href=\"https://i.stack.imgur.com/AqAR6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AqAR6.png\" alt=\"enter image description here\"></a></p>\n\n<p>Step 3: Then go into the created directory's <strong>Scripts</strong> folder and activate it (<strong>this step is important , don't miss it</strong>)</p>\n\n<p><a href=\"https://i.stack.imgur.com/lVtrx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lVtrx.png\" alt=\"enter image description here\"></a></p>\n\n<p>Please <strong>don't close this command window</strong> and use <code>pip install &lt;your libraryname&gt;</code> to download external  libraries in this command window.</p>\n\n<p><a href=\"https://i.stack.imgur.com/IHAqU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/IHAqU.png\" alt=\"enter image description here\"></a></p>\n\n<p>Step 4\uff1aKeep the Sample.py uniformly compressed into a folder with the libs packages in the <strong>Libs/site-packages</strong> folder  that you rely on.</p>\n\n<p><a href=\"https://i.stack.imgur.com/ui8Ej.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ui8Ej.png\" alt=\"enter image description here\"></a></p>\n\n<p>Step 5:\nCreate webjob in Web app service and upload the zip file,then you could execute your Web Job and check the log</p>\n\n<p><a href=\"https://i.stack.imgur.com/eS13d.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/eS13d.png\" alt=\"enter image description here\"></a></p>\n\n<p>You could also refer to the SO thread :<a href=\"https://stackoverflow.com/questions/45716757/options-for-running-python-scripts-in-azure/45725327#45725327\">Options for running Python scripts in Azure</a></p>\n\n<p>Hope it helps you.</p>\n"}], "owner": {"reputation": 177, "user_id": 2737948, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/1523792fcf948ab512279c228e88cbea?s=128&d=identicon&r=PG&f=1", "display_name": "user2737948", "link": "https://stackoverflow.com/users/2737948/user2737948"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1910, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1517453167, "creation_date": 1517440093, "question_id": 48552934, "link": "https://stackoverflow.com/questions/48552934/python-script-using-webjobs-in-azure", "title": "Python script using webjobs in azure", "body": "<p>Hello I'm getting an error when uploading a new azure webjob. The error says it cant create the webjob.</p>\n\n<p>I followed this tutorial which I found it in a question that was asked in here. <a href=\"https://web.archive.org/web/20160410031124/http://nicholasjackson.github.io/azure/python/python-packages-and-azure-webjobs\" rel=\"nofollow noreferrer\">Link</a></p>\n\n<p>My script is the following:</p>\n\n<pre><code>import sys, os\nsys.path.append(os.path.join(os.getcwd(), \"site-packages\"))\nimport requests as req\n\nr = req.get('http://my_website.azurewebsites.net/user/cron')\n# Development\n# r = req.get('http://localhost:5000/user/cron')\nprint(r.status_code)\n</code></pre>\n\n<p>And the structure of my files is this one \n<a href=\"https://i.stack.imgur.com/kczav.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kczav.png\" alt=\"enter image description here\"></a></p>\n\n<p>If anyone can point out where I made a mistake, I just searched for hours and many questions and tutorials point out this is the proper way to add a library in Azure.</p>\n"}, {"tags": ["python", "django"], "answers": [{"comments": [{"owner": {"reputation": 361, "user_id": 8150822, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97f792f2ae77cc92ed283bba8a85465f?s=128&d=identicon&r=PG&f=1", "display_name": "Theodore Howell", "link": "https://stackoverflow.com/users/8150822/theodore-howell"}, "edited": false, "score": 0, "creation_date": 1517459947, "post_id": 48555440, "comment_id": 84106970, "body": "You can then have your forms post to each view you need. Im sure there are other ways to tackle this."}], "tags": [], "owner": {"reputation": 361, "user_id": 8150822, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97f792f2ae77cc92ed283bba8a85465f?s=128&d=identicon&r=PG&f=1", "display_name": "Theodore Howell", "link": "https://stackoverflow.com/users/8150822/theodore-howell"}, "is_accepted": false, "score": 0, "last_activity_date": 1517459905, "creation_date": 1517459905, "answer_id": 48555440, "question_id": 48552924, "link": "https://stackoverflow.com/questions/48552924/how-to-save-to-two-models-in-one-django-form/48555440#48555440", "title": "How to save to two models in one django form?", "body": "<p>You could use two forms and link the same button to submit both of them. See this link here<a href=\"https://stackoverflow.com/questions/7843355/submit-two-forms-with-one-button\">SO Example</a>, by containing them in both in a div and ensuring the required fields are set, you should only have to add this functionality. </p>\n"}], "owner": {"reputation": 765, "user_id": 142363, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/f5aaa511091d84a34e235ae9caee2259?s=128&d=identicon&r=PG", "display_name": "brunam", "link": "https://stackoverflow.com/users/142363/brunam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1448, "favorite_count": 2, "closed_date": 1517601763, "answer_count": 1, "score": 1, "last_activity_date": 1517459905, "creation_date": 1517440042, "question_id": 48552924, "link": "https://stackoverflow.com/questions/48552924/how-to-save-to-two-models-in-one-django-form", "closed_reason": "Duplicate", "title": "How to save to two models in one django form?", "body": "<p>I currently have a working form for job tickets using django 2.0. I want to add the ability for multiple file uploads as supporting docs and assets. I can easily add this into the admin side of things using inlines, but how would I accomplish something similar on the front end of the site? I'm not sure how to have a form submit to two models when a key/id has yet to be set. I'm using primary keys to associate the files with the entries...</p>\n\n<p>models.py:</p>\n\n<pre><code>class Job(models.Model):\n    id = models.AutoField(primary_key=True)\n    name = models.CharField(max_length=200)\n    ...\nclass File(models.model)\n    file = models.FileField(upload_to='uploads/%Y/%m')\n    job = models.ForeignKey(Job, models.set_NULL, blank=True, null=True)\n</code></pre>\n\n<p>admin.py</p>\n\n<pre><code>class FileInline(admin.TabularInline):\n   model = File\n   extra = 0\n\n@admin.register(Job)\nclass JobAdmin(admin.ModelAdmin):\n    exclude = ['ticket_number']\n    inlines = [FileInline]\n</code></pre>\n\n<p>This system is great in my admin and in my templates, but I just can't figure out how to get these two to live in one form together. Is there a better way to be doing this?</p>\n"}, {"tags": ["python", "json", "python-3.x"], "comments": [{"owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 0, "creation_date": 1517440856, "post_id": 48552918, "comment_id": 84102566, "body": "why not tell the site that they are generating invalid json? the right answer is to get correctly generated json.... I retract this comment given the top answer"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1517440934, "post_id": 48552918, "comment_id": 84102587, "body": "Don&#39;t escape the backslash in your <code>replace()</code> call."}], "answers": [{"comments": [{"owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 1, "creation_date": 1517441092, "post_id": 48553075, "comment_id": 84102640, "body": "lol i didnt even know you could do this :P +1 great answer i love learning new stuff"}, {"owner": {"reputation": 322, "user_id": 7405950, "user_type": "registered", "accept_rate": 93, "profile_image": "https://lh6.googleusercontent.com/-aQXMYWz1cdI/AAAAAAAAAAI/AAAAAAAAANI/P_oF6QSdn_8/photo.jpg?sz=128", "display_name": "JD Gamboa", "link": "https://stackoverflow.com/users/7405950/jd-gamboa"}, "edited": false, "score": 0, "creation_date": 1517441402, "post_id": 48553075, "comment_id": 84102741, "body": "sorry, I forgot to mention that I tried that as well."}], "tags": [], "owner": {"reputation": 21716, "user_id": 2401769, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/wkEbw.jpg?s=128&g=1", "display_name": "Matias Cicero", "link": "https://stackoverflow.com/users/2401769/matias-cicero"}, "is_accepted": false, "score": 3, "last_activity_date": 1517440933, "creation_date": 1517440933, "answer_id": 48553075, "question_id": 48552918, "link": "https://stackoverflow.com/questions/48552918/python-obtain-json-from-url-control-and-special-characters-inside/48553075#48553075", "title": "Python - obtain JSON from URL, control and special characters inside", "body": "<p>You can allow control characters by specifying <code>strict=False</code>.</p>\n\n<p>As per the <a href=\"https://docs.python.org/2/library/json.html#json.JSONDecoder\" rel=\"nofollow noreferrer\">docs</a>:</p>\n\n<blockquote>\n  <p>If <code>strict</code> is <code>False</code> (<code>True</code> is the default), then control characters will be allowed inside strings. Control characters in this context are those with character codes in the 0\u201331 range, including <code>'\\t'</code> (tab), <code>'\\n'</code>, <code>'\\r'</code> and <code>'\\0'</code>.</p>\n</blockquote>\n\n<pre><code>data = json.loads(url.read().decode(), strict=False)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 322, "user_id": 7405950, "user_type": "registered", "accept_rate": 93, "profile_image": "https://lh6.googleusercontent.com/-aQXMYWz1cdI/AAAAAAAAAAI/AAAAAAAAANI/P_oF6QSdn_8/photo.jpg?sz=128", "display_name": "JD Gamboa", "link": "https://stackoverflow.com/users/7405950/jd-gamboa"}, "is_accepted": true, "score": 1, "last_activity_date": 1520540690, "creation_date": 1520540690, "answer_id": 49181839, "question_id": 48552918, "link": "https://stackoverflow.com/questions/48552918/python-obtain-json-from-url-control-and-special-characters-inside/49181839#49181839", "title": "Python - obtain JSON from URL, control and special characters inside", "body": "<p>I ended up solving my predicament by first reading the original JSON into a string. There, I would make the string go through a sanitizing method that would remove escape characters and would replace 'damaged' characters for their original special characters.</p>\n"}], "owner": {"reputation": 322, "user_id": 7405950, "user_type": "registered", "accept_rate": 93, "profile_image": "https://lh6.googleusercontent.com/-aQXMYWz1cdI/AAAAAAAAAAI/AAAAAAAAANI/P_oF6QSdn_8/photo.jpg?sz=128", "display_name": "JD Gamboa", "link": "https://stackoverflow.com/users/7405950/jd-gamboa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 185, "favorite_count": 0, "accepted_answer_id": 49181839, "answer_count": 2, "score": 2, "last_activity_date": 1528049801, "creation_date": 1517440021, "last_edit_date": 1528049801, "question_id": 48552918, "link": "https://stackoverflow.com/questions/48552918/python-obtain-json-from-url-control-and-special-characters-inside", "title": "Python - obtain JSON from URL, control and special characters inside", "body": "<p>I have been trying to obtain a JSON from a URL with a typical method such as:</p>\n\n<pre><code>import urllib.request, json \nwith urllib.request.urlopen(\"my_url\") as url:\n    data = json.loads(url.read().decode())\n</code></pre>\n\n<p>Nevertheless this fails with <code>JSONDecodeError</code> since there is a control character inside some bracket</p>\n\n<pre><code>{...\"\\tvalue\"...}\n</code></pre>\n\n<p>I DID modify my source data to not include control characters (something I might not always be able to do), and nevertheless python keeps saying the control character is there.</p>\n\n<p>I decided to take my url response into a string, and there replace inner control characters</p>\n\n<pre><code>my_str = url.read()\nmy_str = my_str.replace('\"\\\\t','\"')\n</code></pre>\n\n<p>But in this way, the special characters throughout the JSON file get replaced in odd ways: <code>{...s\u00e1bado...}</code> becomes <code>{...sa\\cxx\\c1bado}</code> or something like that.</p>\n\n<p>How can I sanitize my JSON input from control characters without destroying my special characters?</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>Sorry, forgot to mention something given the first answer:</p>\n\n<p>I did try adding <code>strict=False</code>, but then my JSON went... well, nuts. The double quotes became single quotes, and some of them would dissapear, so when I would print it, I got something like:</p>\n\n<pre><code>{\n    'some_key':'some_value',\n    'another_key':'another_value_without_closing_quote,\n    a_key_without_opening_quote': 'value'\n}\n</code></pre>\n\n<p>Not a single clue of why was that the case.</p>\n"}, {"tags": ["python", "selenium", "selenium-webdriver", "webdriver"], "answers": [{"tags": [], "owner": {"reputation": 6104, "user_id": 1119381, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/aab36e75e2a1b09199da99501429f49e?s=128&d=identicon&r=PG", "display_name": "Eugene S", "link": "https://stackoverflow.com/users/1119381/eugene-s"}, "is_accepted": true, "score": 1, "last_activity_date": 1517452488, "creation_date": 1517452488, "answer_id": 48554506, "question_id": 48552914, "link": "https://stackoverflow.com/questions/48552914/calling-profile-from-another-class-with-python-selenium/48554506#48554506", "title": "Calling profile from another class with Python/Selenium", "body": "<p>You must instantiate the class or make the method static. Below are examples of each option.</p>\n\n<pre><code>#By initializing the profile class\nclass TestBase(object):\n\n     driver = None\n\n     profile = Profile() \n\n     def setup(self):\n         profile.chrome_configuration()\n\n#By making the method static\nclass Profile(object):\n\n     driver = None\n\n     @staticmethod\n     def chrome_configuration(self):\n         self.driver = webdriver.Chrome()\n         self.driver.set_window_size(1900, 1200)\n         self.driver.maximize_window()\n</code></pre>\n\n<p>In addition, all your classes should always inherit from <code>object</code> in 2.x. It's called new-style classes.</p>\n"}], "owner": {"reputation": 59, "user_id": 964503, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ed9ab3edcb7e3150a3c3eaceba404fde?s=128&d=identicon&r=PG", "display_name": "user964503", "link": "https://stackoverflow.com/users/964503/user964503"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 205, "favorite_count": 0, "accepted_answer_id": 48554506, "answer_count": 1, "score": 0, "last_activity_date": 1517452488, "creation_date": 1517440005, "question_id": 48552914, "link": "https://stackoverflow.com/questions/48552914/calling-profile-from-another-class-with-python-selenium", "title": "Calling profile from another class with Python/Selenium", "body": "<p>Having trouble calling the method <code>chrome_configuration</code> that comes from class <code>Profile</code>, I want to call that method on <code>TestBase</code> class:</p>\n\n<pre><code>class TestBase:\n\n     driver = None\n\n     def setup(self):\n         Profile.chrome_configuration()\n\n\nclass Profile:\n\n     driver = None\n\n     def chrome_configuration(self):\n         self.driver = webdriver.Chrome()\n         self.driver.set_window_size(1900, 1200)\n         self.driver.maximize_window()\n</code></pre>\n"}, {"tags": ["python", "django"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 8907934, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66528516f9546735f4a917d23de15431?s=128&d=identicon&r=PG&f=1", "display_name": "PgDn", "link": "https://stackoverflow.com/users/8907934/pgdn"}, "edited": false, "score": 0, "creation_date": 1517444458, "post_id": 48552899, "comment_id": 84103513, "body": "Sir! thank you for your help, It works! I wish I have more than 15 reputation to up vote it."}, {"owner": {"reputation": 13, "user_id": 8907934, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66528516f9546735f4a917d23de15431?s=128&d=identicon&r=PG&f=1", "display_name": "PgDn", "link": "https://stackoverflow.com/users/8907934/pgdn"}, "edited": false, "score": 0, "creation_date": 1517523886, "post_id": 48552899, "comment_id": 84142275, "body": "I&#39;m thinking of not showing the kwargs value on the url and just the thankyou/. I&#39;m concern of the user to use the url with the kwargs even without actually doing the required action from a successful POST for it to be the result page. is that possible?"}, {"owner": {"reputation": 1704, "user_id": 5978459, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fHmIL.jpg?s=128&g=1", "display_name": "perfect5th", "link": "https://stackoverflow.com/users/5978459/perfect5th"}, "reply_to_user": {"reputation": 13, "user_id": 8907934, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66528516f9546735f4a917d23de15431?s=128&d=identicon&r=PG&f=1", "display_name": "PgDn", "link": "https://stackoverflow.com/users/8907934/pgdn"}, "edited": false, "score": 0, "creation_date": 1517524372, "post_id": 48552899, "comment_id": 84142484, "body": "You could use a session variable (<a href=\"https://docs.djangoproject.com/en/2.0/topics/http/sessions/\" rel=\"nofollow noreferrer\">docs.djangoproject.com/en/2.0/topics/http/sessions</a>) that you set only if they&#39;ve done the required action, then check it in your <code>ThankYou</code> view to decide if you want to perform whatever action you&#39;re thinking of. It&#39;s hard to say without knowing exactly what you&#39;re trying to do."}, {"owner": {"reputation": 13, "user_id": 8907934, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66528516f9546735f4a917d23de15431?s=128&d=identicon&r=PG&f=1", "display_name": "PgDn", "link": "https://stackoverflow.com/users/8907934/pgdn"}, "edited": false, "score": 1, "creation_date": 1517524901, "post_id": 48552899, "comment_id": 84142667, "body": "well let say that I still want to print the value of kwargs but without showing it  in the url. so it&#39;s like if it just thankyou/ with the action needed it will present a 404 but if the thankyou/ request comes with the kwargs/session it will print it. but I think I can figure it out with your suggestion. great stuff."}, {"owner": {"reputation": 1704, "user_id": 5978459, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fHmIL.jpg?s=128&g=1", "display_name": "perfect5th", "link": "https://stackoverflow.com/users/5978459/perfect5th"}, "reply_to_user": {"reputation": 13, "user_id": 8907934, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66528516f9546735f4a917d23de15431?s=128&d=identicon&r=PG&f=1", "display_name": "PgDn", "link": "https://stackoverflow.com/users/8907934/pgdn"}, "edited": false, "score": 0, "creation_date": 1517527375, "post_id": 48552899, "comment_id": 84143551, "body": "Well, kwargs in URLs are generally used for resource specification (like the IDs of records in the database or something, or slugs) \u2013 I can&#39;t recommend using them for functional logic. Either modify something in your database to indicate a user has performed a certain task, or set a session variable. Good luck!"}, {"owner": {"reputation": 13, "user_id": 8907934, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66528516f9546735f4a917d23de15431?s=128&d=identicon&r=PG&f=1", "display_name": "PgDn", "link": "https://stackoverflow.com/users/8907934/pgdn"}, "edited": false, "score": 0, "creation_date": 1517550573, "post_id": 48552899, "comment_id": 84149318, "body": "i see, it make sense. thank you so much for the help and ideas."}], "tags": [], "owner": {"reputation": 1704, "user_id": 5978459, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fHmIL.jpg?s=128&g=1", "display_name": "perfect5th", "link": "https://stackoverflow.com/users/5978459/perfect5th"}, "is_accepted": true, "score": 1, "last_activity_date": 1517439898, "creation_date": 1517439898, "answer_id": 48552899, "question_id": 48552860, "link": "https://stackoverflow.com/questions/48552860/django-cant-reverse-project-level-view/48552899#48552899", "title": "django can&#39;t reverse project level view?", "body": "<p>It looks like the url for <code>'givethanks'</code> doesn't take any kwargs. The <em>view</em> function does, but the url pattern itself doesn't have a placeholder for <code>'thanks_for'</code>. You may want to modify it to</p>\n\n<pre><code>path('thankyou/&lt;thanks_for&gt;/', views.ThankYou, name=\"givethanks\"),\n</code></pre>\n\n<p>or something of the like.</p>\n\n<p>Then your view can be:</p>\n\n<pre><code>def ThankYou(request, **kwargs):\n    print(kwargs['thanks_for'])\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 8907934, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66528516f9546735f4a917d23de15431?s=128&d=identicon&r=PG&f=1", "display_name": "PgDn", "link": "https://stackoverflow.com/users/8907934/pgdn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 48552899, "answer_count": 1, "score": 1, "last_activity_date": 1517439898, "creation_date": 1517439668, "question_id": 48552860, "link": "https://stackoverflow.com/questions/48552860/django-cant-reverse-project-level-view", "title": "django can&#39;t reverse project level view?", "body": "<p>I'm trying to redirect to a view after a successful POST. Not sure why it isn't working if I try to add a kwargs on it. I tried to reverse it without the extra parameters and it worked. but then when I add the additional variable which I need for some conditional statment, it cause an error.</p>\n\n<p>I already checked the docs, some of the issues that was raised here and namespace is the solution but as far as I understand, it's for the app level. I created the view under the project.</p>\n\n<p>project urls.py</p>\n\n<pre><code>from django.contrib import admin\nfrom django.urls import path, include\nfrom . import views\n\nurlpatterns = [\n    path('', views.Index_With_Email_Subscription, name=\"index\"),\n    path('humongousdata/', admin.site.urls),\n    path('termsofservices/', views.Terms_Of_Services, name=\"termsofservices\"),\n    path('me/', include('me.urls')),\n    path('thankyou/', views.ThankYou, name=\"givethanks\"),\n]\n</code></pre>\n\n<p>project views.py</p>\n\n<pre><code>from django.shortcuts import render, redirect\nfrom django.urls import reverse\n\ndef index(request):\n    return redirect(reverse('givethanks', kwargs={'thanks_for':'registered'}))\n\ndef ThankYou(request, **kwargs):\n    print(thanks_for)\n</code></pre>\n\n<p>error message</p>\n\n<p><a href=\"https://i.stack.imgur.com/1vcEh.png\" rel=\"nofollow noreferrer\">error screenshot</a></p>\n"}, {"tags": ["python", "dynamic", "memoization", "topdown", "top-down"], "answers": [{"tags": [], "owner": {"reputation": 4914, "user_id": 7549907, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/29473460bbc1b265961d33279d837412?s=128&d=identicon&r=PG", "display_name": "tim-mccurrach", "link": "https://stackoverflow.com/users/7549907/tim-mccurrach"}, "is_accepted": false, "score": 0, "last_activity_date": 1517442051, "last_edit_date": 1517442051, "creation_date": 1517441453, "answer_id": 48553157, "question_id": 48552832, "link": "https://stackoverflow.com/questions/48552832/dynamic-programming-topdown-approach-minimum-cost-in-a-matrix-in-python/48553157#48553157", "title": "Dynamic programming Topdown approach - minimum cost in a matrix (in python)", "body": "<p>The problem here is the way that you have intialised the variable track. Observe the following:</p>\n\n<pre><code>track = [[-1]*5]*5\ntrack[2][3]=4\nprint(track)\n</code></pre>\n\n<p><strong>Result</strong></p>\n\n<pre><code>[-1, -1, -1, 4, -1]\n[-1, -1, -1, 4, -1]\n[-1, -1, -1, 4, -1]\n[-1, -1, -1, 4, -1]\n[-1, -1, -1, 4, -1]\n</code></pre>\n\n<p><strong>Why has the happened?</strong>\nwhen you do <code>[a]*n</code> you are creating n references to the same object <code>a</code>. In the case of a list (which is mutable), when you change it, (e.g in the line <code>track[m][n]=result</code>) that change will be reflected in all of the references to that list. </p>\n\n<p><strong>How to fix it</strong></p>\n\n<p>Use a list comprehnsion instead, this will create seperate copys of the 'inner list' e.g.</p>\n\n<pre><code>track = [[-1]*5 for i in range(5)]\n</code></pre>\n\n<p>I have tried this out with the code above, and that seems to fix the problem.</p>\n"}], "owner": {"reputation": 3, "user_id": 7808475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66c5a7f5de2fc8e6f492b6bf86673ec3?s=128&d=identicon&r=PG&f=1", "display_name": "Arian", "link": "https://stackoverflow.com/users/7808475/arian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 187, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1517442051, "creation_date": 1517439506, "last_edit_date": 1517439813, "question_id": 48552832, "link": "https://stackoverflow.com/questions/48552832/dynamic-programming-topdown-approach-minimum-cost-in-a-matrix-in-python", "title": "Dynamic programming Topdown approach - minimum cost in a matrix (in python)", "body": "<p>I have to implement some functions in python to find the minimum cost in a matrix.We must go down or right and to an adjacent number so at each step we have only two possible choices.</p>\n\n<p>i wrote the fisrt version (naive one) which works:</p>\n\n<pre><code>def minimal_trajectorry_helper(matrix, m, n):\n    if ( (n &gt; len(matrix) -1 ) or (m &gt; len(matrix) -1)):\n        return 1000000000\n\n    elif ((m == len(matrix) - 1) and (n == len(matrix) - 1)):\n        return matrix[m][n]\n\n    else:\n         result = matrix[m][n] + min(minimal_trajectorry_helper(matrix, m+1, n),\n                            minimal_trajectorry_helper(matrix, m, n+1) )\n         return result\n</code></pre>\n\n<p>But when i want to optimize it using memoization i can't find the right answer.\nI tried different ways but i wasn't able to do it correctly. Here is what i wrote:</p>\n\n<pre><code>def dptd_minimal_trajectorry_helper(matrix, m, n, track):\n    if ( (n &gt; len(matrix) -1 ) or (m &gt; len(matrix) -1)):\n        return 1000000000\n\n    elif ((m == len(matrix) - 1) and (n == len(matrix) - 1)):\n        return matrix[m][n]\n\n    elif (track[m][n] != -1):\n        return track[m][n] \n\n    else:\n        result = matrix[m][n] + min(dptd_minimal_trajectorry_helper(matrix, m+1, n, track),\n                            dptd_minimal_trajectorry_helper(matrix, m, n+1, track) \n        track[m][n] = result\n        return result\n</code></pre>\n\n<p>Here is an example :</p>\n\n<pre><code>     [2,3,1,1,6]\n     [1,4,4,1,4]\n     [7,1,2,2,5]\n     [2,1,3,8,3]\n     [2,4,3,2,1]\n</code></pre>\n\n<p>The naive version gives me the right anwser which is 18 -> 2,1,4,1,1,3,3,2,1\nBut the second one gives me 12</p>\n\n<p>Thanks in advance for any help :) </p>\n\n<p>EDIT : I call the naive version like <strong>minimal_trajectorry_helper(matrix, 0, 0)</strong> and the optimized one like <strong>dptd_minimal_trajectorry_helper(matrix, m, n, track)</strong> where track is initialized by : <strong>track = [[-1]*5]*5</strong></p>\n"}, {"tags": ["python", "odoo"], "comments": [{"owner": {"reputation": 13395, "user_id": 6089852, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/h15pk.png?s=128&g=1", "display_name": "Charif DZ", "link": "https://stackoverflow.com/users/6089852/charif-dz"}, "edited": false, "score": 0, "creation_date": 1517471690, "post_id": 48552786, "comment_id": 84111302, "body": "what you mean by custom JS button , if you have created a custom js button you need to handle the return value from the method."}, {"owner": {"reputation": 109, "user_id": 4370486, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/100000050545494/picture?type=large", "display_name": "Marek Jan-Alexander", "link": "https://stackoverflow.com/users/4370486/marek-jan-alexander"}, "reply_to_user": {"reputation": 13395, "user_id": 6089852, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/h15pk.png?s=128&g=1", "display_name": "Charif DZ", "link": "https://stackoverflow.com/users/6089852/charif-dz"}, "edited": false, "score": 0, "creation_date": 1517477782, "post_id": 48552786, "comment_id": 84114447, "body": "I created custom button in tree view, which calls the method up"}, {"owner": {"reputation": 109, "user_id": 4370486, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/100000050545494/picture?type=large", "display_name": "Marek Jan-Alexander", "link": "https://stackoverflow.com/users/4370486/marek-jan-alexander"}, "reply_to_user": {"reputation": 13395, "user_id": 6089852, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/h15pk.png?s=128&g=1", "display_name": "Charif DZ", "link": "https://stackoverflow.com/users/6089852/charif-dz"}, "edited": false, "score": 0, "creation_date": 1517477952, "post_id": 48552786, "comment_id": 84114572, "body": "odoo.define(&#39;account_period&#39;, function(require) {     &#39;use strict&#39;;  var ListView = require(&#39;web.ListView&#39;) var Model = require(&#39;web.Model&#39;)      ListView.include({         render_buttons: function() {             this._super.apply(this, arguments)             if (this.$buttons) {                 this.$buttons.find(&#39;.o_list_period_button_create&#39;).on(&#39;click&zwnj;&#8203;&#39;, this.proxy(&#39;do_new_button&#39;))             }         },         do_new_button: function () {              var model = new Model(&#39;account.period&#39;)             model.call(&#39;create_period&#39;, [[]]);         }     }) })"}], "answers": [{"tags": [], "owner": {"reputation": 13395, "user_id": 6089852, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/h15pk.png?s=128&g=1", "display_name": "Charif DZ", "link": "https://stackoverflow.com/users/6089852/charif-dz"}, "is_accepted": true, "score": 1, "last_activity_date": 1517482390, "creation_date": 1517482390, "answer_id": 48561013, "question_id": 48552786, "link": "https://stackoverflow.com/questions/48552786/odoo-10-page-reload/48561013#48561013", "title": "Odoo 10 page reload", "body": "<p>You are just telling odoo to execute the method but he will not do anything with the returned value in client side:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>   render_buttons: function() {\n            // First of all keep track of view instance so you can reference it in callback method     \n            var self = this;\n             // use self instead of this to prevent bugs \n             self._super.apply(this, arguments); // don't forget \";\" at the end of each instruction\n             ......\n             .....\n\n\n                  // you should save the response in  a variable\n                  var result = model.call('create_period', [[]]);\n\n                  // you may need to check the result first before reload\n                  // to execute an action use do_action any widget should have this method\n                  // try this self is the instance of tree view \n                  self.do_action(result);\n                  //or try this code:  self.do_action('reload');\n\n            ....\n            ....\n            ....\n</code></pre>\n\n<p>I don't know the right syntax. Hope you get the idea</p>\n"}], "owner": {"reputation": 109, "user_id": 4370486, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/100000050545494/picture?type=large", "display_name": "Marek Jan-Alexander", "link": "https://stackoverflow.com/users/4370486/marek-jan-alexander"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 891, "favorite_count": 1, "accepted_answer_id": 48561013, "answer_count": 1, "score": 1, "last_activity_date": 1517482390, "creation_date": 1517439212, "last_edit_date": 1517471279, "question_id": 48552786, "link": "https://stackoverflow.com/questions/48552786/odoo-10-page-reload", "title": "Odoo 10 page reload", "body": "<p>I\u00b4m trying to reload the web page from custom js button after creating a record via calling a method from Python:</p>\n\n<pre><code>@api.multi\ndef create_period(self):\n    self.create({\n        'name': '11',\n        'code': '12',\n        'date_start': '2018-01-01',\n        'date_stop': '2018-12-31',\n    })\n    return {\n        'type': 'ir.actions.client',\n        'tag': 'reload',\n    }\n</code></pre>\n\n<p>but it is not refreshing. What can i do?</p>\n"}, {"tags": ["python", "pandas", "numpy", "dataframe", "logic"], "answers": [{"tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": true, "score": 0, "last_activity_date": 1517439961, "creation_date": 1517439961, "answer_id": 48552908, "question_id": 48552766, "link": "https://stackoverflow.com/questions/48552766/matching-columns-in-a-data-frame-and-performing-operation-in-python/48552908#48552908", "title": "Matching Columns in a Data Frame and performing operation in Python", "body": "<p>By using <code>merge_asof</code></p>\n\n<pre><code>pd.merge_asof(dfA.sort_values('Index'),dfB.sort_values('Super_Index'),left_on='Index',right_on='Super_Index',left_by ='ID',right_by='Unique_ID',allow_exact_matches =False).dropna().Unique_ID.unique()\nOut[346]: array([33., 11., 22.])\n</code></pre>\n"}], "owner": {"reputation": 137, "user_id": 9288243, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9dc60457b7034a41167bd59a8e6412ff?s=128&d=identicon&r=PG&f=1", "display_name": "Zhoe", "link": "https://stackoverflow.com/users/9288243/zhoe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 48552908, "answer_count": 1, "score": 0, "last_activity_date": 1517439961, "creation_date": 1517439077, "question_id": 48552766, "link": "https://stackoverflow.com/questions/48552766/matching-columns-in-a-data-frame-and-performing-operation-in-python", "title": "Matching Columns in a Data Frame and performing operation in Python", "body": "<p>There are two data frames A and B. I have to Match <code>ID</code> Column of <code>Data Frame A</code> with the <code>Unique_ID</code> column of <code>Data Frame B</code>. If there are any  matches I am trying do the  operation Like if any of the  <code>Index</code> column of the matched <code>ID</code> in the <code>Data Frame A</code> is greater than the <code>Super_Index</code> of the <code>Data frame A</code> like <code>A.Index &gt;B.Super_Index</code>. If there exists then loading the <code>ID</code> in the separate data frame. This is just a sample data from the big data set I have.  </p>\n\n<p>Data Frame A: \n<code>\nPROD Index  ID\nA   1   11\nB   2   22\nB   5   33\nC   6   44\nB   6   22\nB   1   66\nB   4   11\nB   3   11\nA   8   33\nB   1   44\nG   5   11\nM   6   11\n</code></p>\n\n<p>Data Frame B: </p>\n\n<p><code>New  Super_Index  Unique_ID\nA   4   11\nS   5   22\nC   2   33\nB   9   44\n</code></p>\n\n<p>OUPUT:</p>\n\n<p><code>ID\n11\n22\n33\n</code></p>\n\n<p>Is there any way to do this? I am new to Python and have used R before. Thanks!</p>\n"}, {"tags": ["python", "optimization", "knapsack-problem"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 1, "creation_date": 1517439722, "post_id": 48552724, "comment_id": 84102186, "body": "To my knowledge, there are no proper solvers for combinatorial optimisation in python. Also, complex heuristics are usually employed to approximate a solution - I have looked at the source code of that package and it appears to be 6 lines of code that does anything - most likely they&#39;re trying to brute-force an NP-Hard problem... that will choke fast."}, {"owner": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "edited": false, "score": 0, "creation_date": 1517440677, "post_id": 48552724, "comment_id": 84102518, "body": "Formulate it as mixed-integer program. This will be hard to beat (especially for good approximations), even when using open-source solvers (and there are things like maxTime and mipGap supported). If you expect answers with benchmarks, add some <i>real</i> example (which you are trying to solve and struggle with) to your question (as your examples are solvable in polynomial time)!"}, {"owner": {"reputation": 392, "user_id": 6613358, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/d94ec69ac395fedfa61369ba2b4c8158?s=128&d=identicon&r=PG&f=1", "display_name": "HolyMonk", "link": "https://stackoverflow.com/users/6613358/holymonk"}, "edited": false, "score": 0, "creation_date": 1517441288, "post_id": 48552724, "comment_id": 84102704, "body": "Thanks for the responses, don&#39;t really get why I get downvoted.. Posing it as mixed integer and using those solution methods is a good idea thank you!"}, {"owner": {"reputation": 392, "user_id": 6613358, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/d94ec69ac395fedfa61369ba2b4c8158?s=128&d=identicon&r=PG&f=1", "display_name": "HolyMonk", "link": "https://stackoverflow.com/users/6613358/holymonk"}, "edited": false, "score": 0, "creation_date": 1517441314, "post_id": 48552724, "comment_id": 84102712, "body": "Of course I can solve this problem by just looking at it, but it is just an example.."}, {"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 1, "creation_date": 1517441377, "post_id": 48552724, "comment_id": 84102730, "body": "The point is that you should show us realistic data because that affects what&#39;s an appropriate solution."}, {"owner": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "edited": false, "score": 1, "creation_date": 1517441381, "post_id": 48552724, "comment_id": 84102733, "body": "It&#39;s one of the worst examples possible (which let&#39;s NP-hardness vanish)! Add a good one! Additionally you are forcing us to read out the exact definition of the problem in your external library used as you did not explain it. 0-1 knapsack vs. bounded vs. unbounded vs ...."}, {"owner": {"reputation": 392, "user_id": 6613358, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/d94ec69ac395fedfa61369ba2b4c8158?s=128&d=identicon&r=PG&f=1", "display_name": "HolyMonk", "link": "https://stackoverflow.com/users/6613358/holymonk"}, "reply_to_user": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 0, "creation_date": 1517441795, "post_id": 48552724, "comment_id": 84102858, "body": "@StefanPochmann : I adapted the example, but I am already quite pleased with the solution proposed by sascha."}], "answers": [{"comments": [{"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 0, "creation_date": 1517443361, "post_id": 48553316, "comment_id": 84103272, "body": "Is 1965 the value sum you found? That&#39;s also what I get with naive greedy, in 0.0012 seconds."}, {"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 0, "creation_date": 1517443903, "post_id": 48553316, "comment_id": 84103401, "body": "Uh... ok... sorry I don&#39;t know numpy/scipy/cylp enough to understand whether that&#39;s what that value means."}, {"owner": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "reply_to_user": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 0, "creation_date": 1517444002, "post_id": 48553316, "comment_id": 84103424, "body": "You are right about the value. But the consequences of such observations are hard to evaluate for NP-hard problems (when is my method good, when is yours good; there surely is some merit for greedy in some scenarios). I warned about that. One obvious thing here: my code proves 1965 is the optimal solution as the method is sound and complete. Yours is not and in terms of approximation, yours is probably limited to a factor 2 (factor depends on the exact greedy-approach and there are very good greedy-like approximations much better; 2 is the naive one)."}, {"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 0, "creation_date": 1517445315, "post_id": 48553316, "comment_id": 84103684, "body": "Did I claim optimality or anything like that? I just wanted some &quot;verification&quot; whether my result might be correct, and mentioned how I got it. Was working on an optimal one but now I&#39;m not in the mood anymore, thanks a lot. Btw I don&#39;t think it&#39;s a huge coincidence that my greedy one did find the optimal value, with data generated like this I think it has a good chance to."}, {"owner": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "reply_to_user": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 0, "creation_date": 1517445781, "post_id": 48553316, "comment_id": 84103786, "body": "Nobody will stop you. For NP-hard things i typically favour using tools optimized for decades before approaching current scientific ideas (as the former is often fast to implement and often very good). With such a classic problem i would never go blind and ignore the above by doing something from scratch (standing on the shoulder of giants), except i want to experiment. But to be honest: doing that with SO questions is often unmotivating as data-statistics are often incompletely specified. <a href=\"http://www.diku.dk/~pisinger/codes.html\" rel=\"nofollow noreferrer\">His generators</a> might be more interesting (years of research)."}, {"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 0, "creation_date": 1517447042, "post_id": 48553316, "comment_id": 84104081, "body": "Well you somewhat stopped me. Not very motivating to be called dumb for trying to verify something. I did finish my optimal solver anyway, or rather fix its bug, and it takes about 0.0065 seconds on repl.it to find the answer 1965. Not computing how to achieve that value, though. Not clear whether the OP wants more. Not going blind and from scratch, either, I did use numpy and the obvious dp algorithm that&#39;s also the first described on the wikipedia article."}], "tags": [], "owner": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "is_accepted": true, "score": 3, "last_activity_date": 1517444469, "last_edit_date": 1517444469, "creation_date": 1517442498, "answer_id": 48553316, "question_id": 48552724, "link": "https://stackoverflow.com/questions/48552724/fast-knapsack-solver-for-big-problems/48553316#48553316", "title": "Fast Knapsack Solver For big problems", "body": "<p>Here a small prototype 0-1-integer programming approach for the 0-1 knapsack! </p>\n\n<p>This code:</p>\n\n<ul>\n<li>is not doing everything perfectly!\n\n<ul>\n<li>e.g. constraints vs. bounds (latter more efficient; but too lazy to check cylp again for that; problems in the past)</li>\n</ul></li>\n<li>not much support for windows!\n\n<ul>\n<li>windows users: go for <a href=\"https://github.com/coin-or/pulp\" rel=\"nofollow noreferrer\">pulp</a> which brings the same solver (imho the best free open-source MIP-solver); although modelling looks quite different there!</li>\n</ul></li>\n<li>no tuning!\n\n<ul>\n<li>observe: CoinOR's <a href=\"https://projects.coin-or.org/Cgl\" rel=\"nofollow noreferrer\">Cgl</a>, which is used in the solver <a href=\"https://projects.coin-or.org/Cbc\" rel=\"nofollow noreferrer\">Cbc</a>, supports extra knapsack-cuts!</li>\n<li>as the logs show: example is too simple to effect in their usage!</li>\n</ul></li>\n<li>bounded / unbounded knapsack-versions are easily handled by just modifying the bounds</li>\n</ul>\n\n<p>The example here just solves one problem as defined by OP using a PRNG-seed of 1, where it takes <strong>0.02 seconds</strong>, but that's not a scientific test! NP-hard problems are all about easy vs. hard instances (huge variance!) and because of that, data to check against is important! One can observe, that there is no real integrality-gap for this example.</p>\n\n<h3>Code</h3>\n\n<pre><code>import numpy as np\nimport scipy.sparse as sp\nfrom cylp.cy import CyClpSimplex\nnp.random.seed(1)\n\n\"\"\" INSTANCE \"\"\"\nweight = np.random.randint(10, size = 1000)\nvalue = np.random.randint(10, size = 1000)\ncapacity = 500\n\n\"\"\" SOLVE \"\"\"\nn = weight.shape[0]\nmodel = CyClpSimplex()\nx = model.addVariable('x', n, isInt=True)\nmodel.objective = -value\nmodel += sp.eye(n) * x &gt;= np.zeros(n)  # could be improved\nmodel += sp.eye(n) * x &lt;= np.ones(n)   # \"\"\"\nmodel += np.matrix(weight) * x &lt;= capacity  # cylp somewhat outdated in terms of np-usage!\ncbcModel = model.getCbcModel()  # Clp -&gt; Cbc model / LP -&gt; MIP\ncbcModel.logLevel = True\nstatus = cbcModel.solve()\nx_sol = np.array(cbcModel.primalVariableSolution['x'].round()).astype(int)  # assumes there is one\n\nprint(x_sol)\nprint(x_sol.dot(weight))\nprint(x_sol.dot(value))\n</code></pre>\n\n<h3>Output</h3>\n\n<pre><code>Welcome to the CBC MILP Solver \nVersion: 2.9.9 \nBuild Date: Jan 15 2018 \n\ncommand line - ICbcModel -solve -quit (default strategy 1)\nContinuous objective value is -1965.33 - 0.00 seconds\nCgl0004I processed model has 1 rows, 542 columns (542 integer (366 of which binary)) and 542 elements\nCutoff increment increased from 1e-05 to 0.9999\nCbc0038I Initial state - 1 integers unsatisfied sum - 0.333333\nCbc0038I Pass   1: suminf.    0.25000 (1) obj. -1965 iterations 1\nCbc0038I Solution found of -1965\nCbc0038I Branch and bound needed to clear up 1 general integers\nCbc0038I Full problem 1 rows 542 columns, reduced to 1 rows 128 columns\nCbc0038I Cleaned solution of -1965\nCbc0038I Before mini branch and bound, 540 integers at bound fixed and 0 continuous\nCbc0038I Mini branch and bound did not improve solution (0.02 seconds)\nCbc0038I After 0.02 seconds - Feasibility pump exiting with objective of -1965 - took 0.01 seconds\nCbc0012I Integer solution of -1965 found by feasibility pump after 0 iterations and 0 nodes (0.02 seconds)\nCbc0038I Full problem 1 rows 542 columns, reduced to 1 rows 2 columns\nCbc0001I Search completed - best objective -1965, took 0 iterations and 0 nodes (0.02 seconds)\nCbc0035I Maximum depth 0, 362 variables fixed on reduced cost\nCuts at root node changed objective from -1965.33 to -1965.33\nProbing was tried 0 times and created 0 cuts of which 0 were active after adding rounds of cuts (0.000 seconds)\nGomory was tried 0 times and created 0 cuts of which 0 were active after adding rounds of cuts (0.000 seconds)\nKnapsack was tried 0 times and created 0 cuts of which 0 were active after adding rounds of cuts (0.000 seconds)\nClique was tried 0 times and created 0 cuts of which 0 were active after adding rounds of cuts (0.000 seconds)\nMixedIntegerRounding2 was tried 0 times and created 0 cuts of which 0 were active after adding rounds of cuts (0.000 seconds)\nFlowCover was tried 0 times and created 0 cuts of which 0 were active after adding rounds of cuts (0.000 seconds)\nTwoMirCuts was tried 0 times and created 0 cuts of which 0 were active after adding rounds of cuts (0.000 seconds)\n\nResult - Optimal solution found\n\nObjective value:                -1965.00000000\nEnumerated nodes:               0\nTotal iterations:               0\nTime (CPU seconds):             0.02\nTime (Wallclock seconds):       0.02\n\nTotal time (CPU seconds):       0.02   (Wallclock seconds):       0.02\n\n[0 0 0 0 1 1 1 0 0 0 1 0 0 0 0 0 0 0 0 0 1 0 1 0 0 0 0 0 0 1 1 1 0 0 1 0 0\n 0 1 0 0 0 0 0 1 0 1 1 1 0 0 1 1 0 0 0 0 0 0 0 0 0 0 0 0 1 0 0 1 0 0 1 1 0\n 0 0 0 1 0 0 0 0 1 1 0 1 0 0 0 0 0 1 1 0 0 0 0 0 0 1 0 1 1 0 0 1 0 0 0 1 1\n 1 0 0 1 1 1 0 0 1 0 1 0 0 0 0 1 0 0 1 0 0 0 0 0 1 0 0 1 1 1 0 0 1 0 0 0 0\n 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0 0 0 0 1 1 0 0 1 0 1 1 1 0 0 0 1 1 1 1\n 0 1 0 0 0 0 0 0 0 1 0 1 0 0 1 1 0 0 0 0 0 0 0 0 1 1 0 1 0 0 0 0 0 0 0 1 0\n 1 1 0 0 1 0 1 0 0 0 0 1 0 0 0 0 0 0 1 1 0 0 0 1 0 0 1 0 0 1 0 0 0 0 0 0 0\n 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0 0 0 0 1 0 1 0 0 0 0 1 1 1 0 1 0 1 1 0\n 0 0 0 0 1 0 1 0 0 1 0 0 0 0 0 0 0 0 1 0 1 1 1 0 1 0 1 0 1 1 0 0 1 0 1 0 0\n 0 0 0 0 1 1 0 0 0 0 0 1 1 0 1 0 1 1 0 0 0 0 0 1 0 0 0 1 1 0 1 0 0 0 0 1 1\n 0 0 1 0 0 0 0 1 0 0 0 0 1 0 1 0 0 1 0 0 0 1 0 0 0 0 0 0 0 0 1 0 1 0 0 0 1\n 0 0 0 0 0 1 1 1 1 1 1 1 1 1 0 0 0 1 1 0 0 1 0 1 0 0 0 1 1 0 0 0 0 0 1 0 0\n 0 0 0 1 0 0 1 0 0 1 0 1 0 1 0 1 0 0 0 1 0 0 0 0 0 0 0 1 0 0 0 0 0 1 0 1 1\n 0 0 0 0 0 0 0 1 0 0 0 1 0 0 1 0 0 1 0 0 0 0 0 0 1 1 0 0 1 0 0 1 0 1 1 0 0\n 1 1 1 0 0 0 0 0 1 1 1 0 0 0 0 0 0 0 1 0 0 0 0 1 0 1 0 0 0 0 0 1 0 1 0 0 0\n 0 1 1 0 0 0 0 0 0 1 0 1 0 0 0 1 1 1 1 0 0 0 0 0 0 1 0 1 1 0 0 1 0 0 0 1 1\n 1 0 0 0 0 1 1 0 0 0 0 0 0 0 0 0 1 0 0 1 0 0 0 1 0 1 1 0 0 0 1 1 0 0 1 0 0\n 0 1 0 0 0 0 1 1 0 0 1 0 0 0 0 1 0 0 0 0 0 0 0 0 0 0 0 0 1 1 1 0 1 0 0 1 1\n 0 0 1 1 0 0 0 1 1 0 1 1 0 0 0 1 0 0 0 0 0 0 1 0 0 0 1 0 0 1 1 0 0 0 0 1 1\n 0 0 0 1 1 0 1 1 0 0 1 0 0 0 0 1 0 0 1 0 0 1 1 1 0 0 0 1 1 1 0 0 1 0 0 0 1\n 1 1 1 0 1 0 0 0 0 0 0 1 1 0 0 0 0 0 0 0 0 0 0 1 0 0 0 0 1 1 0 0 1 0 0 0 0\n 0 1 0 0 0 1 0 0 0 1 0 0 0 0 0 1 0 1 1 0 1 0 0 0 0 0 1 0 1 1 0 1 0 1 0 0 0\n 0 0 0 0 0 0 1 0 1 0 0 0 0 0 1 1 0 1 1 0 1 1 0 1 1 0 1 0 0 0 0 1 0 0 0 1 1\n 0 1 0 0 0 0 0 1 0 1 1 0 1 0 1 0 1 1 0 0 1 0 0 0 0 0 0 0 0 0 1 1 0 1 0 0 0\n 0 0 0 0 0 0 0 1 0 0 0 0 0 1 0 1 0 0 1 0 1 0 1 1 0 1 0 0 0 1 0 0 1 0 1 1 0\n 0 0 0 0 0 1 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 1 0 0 0 1 1 0 1 0 0 0 1 1 1 0 0\n 0 0 1 1 1 0 0 1 0 0 1 1 0 0 1 0 0 0 0 1 0 0 0 1 0 0 0 0 0 0 1 1 0 0 0 1 1\n 0]\n500\n1965\n</code></pre>\n"}], "owner": {"reputation": 392, "user_id": 6613358, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/d94ec69ac395fedfa61369ba2b4c8158?s=128&d=identicon&r=PG&f=1", "display_name": "HolyMonk", "link": "https://stackoverflow.com/users/6613358/holymonk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2315, "favorite_count": 2, "accepted_answer_id": 48553316, "answer_count": 1, "score": -3, "last_activity_date": 1517444469, "creation_date": 1517438836, "last_edit_date": 1517441722, "question_id": 48552724, "link": "https://stackoverflow.com/questions/48552724/fast-knapsack-solver-for-big-problems", "title": "Fast Knapsack Solver For big problems", "body": "<p>I want to approximately solve the knapsack problem for big data sets using Python.</p>\n\n<p>Right now, I am using <a href=\"https://pypi.python.org/pypi/knapsack/0.0.2\" rel=\"nofollow noreferrer\">this implementation</a>, which works well for small examples like:</p>\n\n<pre><code>import knapsack\nweight = np.random.randint(10, size = 10)\nvalue = np.random.randint(10, size = 10)\ncapacity = 5\nknapsack.knapsack(weight, value).solve(capacity)\n</code></pre>\n\n<p>but when we scale it up to:</p>\n\n<pre><code>import knapsack\nweight = np.random.randint(10, size = 1000)\nvalue = np.random.randint(10, size = 1000)\ncapacity = 500\nknapsack.knapsack(weight, value).solve(capacity)\n</code></pre>\n\n<p>the program just gets stuck and gives an error. I was wondering if there is some implementation of the knapsack problem where we can state something like compute for 10 seconds and return me the best solution found so far, is this possible?</p>\n"}, {"tags": ["python", "python-3.x", "histogram"], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 9290077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0fd296cc0f3b3c9756559c5efedbdea?s=128&d=identicon&r=PG&f=1", "display_name": "a.f.uwrf", "link": "https://stackoverflow.com/users/9290077/a-f-uwrf"}, "edited": false, "score": 0, "creation_date": 1517442451, "post_id": 48552774, "comment_id": 84103031, "body": "Thanks for the mvce tip, hopefully my edit is better."}, {"owner": {"reputation": 43029, "user_id": 7505395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4t4nq.jpg?s=128&g=1", "display_name": "Patrick Artner", "link": "https://stackoverflow.com/users/7505395/patrick-artner"}, "reply_to_user": {"reputation": 55, "user_id": 9290077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0fd296cc0f3b3c9756559c5efedbdea?s=128&d=identicon&r=PG&f=1", "display_name": "a.f.uwrf", "link": "https://stackoverflow.com/users/9290077/a-f-uwrf"}, "edited": false, "score": 0, "creation_date": 1517446024, "post_id": 48552774, "comment_id": 84103856, "body": "@a.f.uwrf A mvce: I can copy your code into my IDE and it runs (or produces the error). See edit for labeling and link for moving. Putting question after question after question into one is considered bad. Accept an answer and if you have new questions, ask them. Its bad because anybody looking for &quot;how to change label on xaxis&quot; wont find your questionsin search b/c title is about &#39;using a list to create a histogram bar graph&#39; - so this part of knowledge is buried and mislabeld."}], "tags": [], "owner": {"reputation": 43029, "user_id": 7505395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4t4nq.jpg?s=128&g=1", "display_name": "Patrick Artner", "link": "https://stackoverflow.com/users/7505395/patrick-artner"}, "is_accepted": true, "score": 1, "last_activity_date": 1517445939, "last_edit_date": 1517445939, "creation_date": 1517439109, "answer_id": 48552774, "question_id": 48552598, "link": "https://stackoverflow.com/questions/48552598/using-a-list-to-create-a-histogram-bar-graph/48552774#48552774", "title": "using a list to create a histogram bar graph", "body": "<p>Youre <code>show</code> is missing some <code>()</code> - and your code does not qualify as <a href=\"https://stackoverflow.com/help/mcve\">mvce</a>.</p>\n\n<p>This works:</p>\n\n<pre><code>import matplotlib.pyplot as plt\n\ny = [1,1,4,7,4,3]\n\nx = range(len(y))\n\nplt.bar(x, y, 0.75, color=\"blue\")\nplt.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/gYgfB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gYgfB.png\" alt=\"bar plot 1\"></a></p>\n\n<hr>\n\n<p>Your y and x have  different dimensions, they will be cropped to the shorter one.</p>\n\n<pre><code>import matplotlib.pyplot as plt\n\ncolumn=\"voltage\"\ny=[14, 5, 5, 4, 3, 5, 5, 4, 6, 9] # frequencies\nx=[-4.9183599999999998, -3.916083, -2.9138060000000001, -1.9115290000000003, \n-0.90925200000000039, 0.093024999999999025, 1.0953019999999993, \n2.0975789999999996, 3.0998559999999991, 4.1021329999999985, \n5.1044099999999979] #bin limits\nz=range(len(y))\n\nplt.bar(z, y, 0.8)\nplt.xlabel(\"%s\" %column) \n\nplt.xticks(z,[str(round(i,4)) for i in x], rotation=35) # round, label and use\n\nplt.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/wnEuJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wnEuJ.png\" alt=\"bar plot 2\"></a></p>\n\n<p>I adjusted the subplot borders in the popup, you need to code that. How to and how to move all bars to the right so they are between the ticks, see:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/23561622/move-graph-position-within-plot-matplotlib\">Move graph position within plot (matplotlib)</a></p>\n\n<p>Thats too much matplotmagic for me.</p>\n"}], "owner": {"reputation": 55, "user_id": 9290077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0fd296cc0f3b3c9756559c5efedbdea?s=128&d=identicon&r=PG&f=1", "display_name": "a.f.uwrf", "link": "https://stackoverflow.com/users/9290077/a-f-uwrf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 48552774, "answer_count": 1, "score": 0, "last_activity_date": 1517445939, "creation_date": 1517438248, "last_edit_date": 1517445168, "question_id": 48552598, "link": "https://stackoverflow.com/questions/48552598/using-a-list-to-create-a-histogram-bar-graph", "title": "using a list to create a histogram bar graph", "body": "<p>Let me start by saying I know about the histogram function that just creates a nice histogram from a list of data. For this project I am trying to do everything the somewhat hard way because as far as I am concerned, more code=more practice. </p>\n\n<p>Now for the meat of the question, with plenty of help I have managed to write code that extracts a data set, takes user inputs for titles and number of bins, and crunches everything accurately into a \"histogram\" list, something like <code>[1,3,5,3,1]</code> with the numbers corresponding to the frequency of a range of data.</p>\n\n<p>What I am trying to do from this point is take that histogram list and place it in a bar graph using <code>plt.bar()</code>. I have some familiarity with <code>plt.scatter()</code> but it seems bar works differently as</p>\n\n<pre><code>plt.bar(x, y, align='center')\nplt.xticks(y)\nplt.show\n</code></pre>\n\n<p>with x being a list containing the separation values for the bins, and y being the list of frequencies, simply returns an empty graph. any assistance would be appreciated.</p>\n\n<p>Edit: code modifications:</p>\n\n<pre><code>column=\"voltage\"\ny=[14, 5, 5, 4, 3, 5, 5, 4, 6, 9] # frequencies\nx=[-4.9183599999999998, -3.916083, -2.9138060000000001, -1.9115290000000003, \n-0.90925200000000039, 0.093024999999999025, 1.0953019999999993, \n2.0975789999999996, 3.0998559999999991, 4.1021329999999985, \n5.1044099999999979] #bin limits\nz=range(len(y))\nplt.bar(z, y, 1.0)\nplt.xlabel(\"%s\" %column)\nplt.xticks(z, x)\nplt.show()\n</code></pre>\n\n<p>which produces:</p>\n\n<p><a href=\"https://i.stack.imgur.com/jG5Xc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jG5Xc.png\" alt=\"enter image description here\"></a></p>\n\n<p>Pretty close, eventually I'll need to round x, but before that happens, how do I get the ticks to align to the right? Also, why is the xlabel line outputting \"1\" instead of the string? </p>\n"}, {"tags": ["python", "pandas", "csv"], "comments": [{"owner": {"reputation": 1341, "user_id": 6809571, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/000a638897147ab84cf57cde60e2d05b?s=128&d=identicon&r=PG&f=1", "display_name": "John R", "link": "https://stackoverflow.com/users/6809571/john-r"}, "edited": false, "score": 1, "creation_date": 1517438356, "post_id": 48552589, "comment_id": 84101652, "body": "Post your pandas/python code"}, {"owner": {"reputation": 1590, "user_id": 5428880, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/E8wTo.jpg?s=128&g=1", "display_name": "Suraj Kothari", "link": "https://stackoverflow.com/users/5428880/suraj-kothari"}, "edited": false, "score": 0, "creation_date": 1517438595, "post_id": 48552589, "comment_id": 84101739, "body": "Have you tried to iterate over each file and append the headers into a header array and the values into their own array. Then you may be able to create a new csv file from the arrays."}, {"owner": {"reputation": 1590, "user_id": 5428880, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/E8wTo.jpg?s=128&g=1", "display_name": "Suraj Kothari", "link": "https://stackoverflow.com/users/5428880/suraj-kothari"}, "edited": false, "score": 0, "creation_date": 1517439065, "post_id": 48552589, "comment_id": 84101922, "body": "One other question: Will the keys from multiple files be repeated. As all three files have k1,k2 as their keys but the output only shows k1,k2. Where are the output keys from? I am guessing k1,k2 repeats."}, {"owner": {"reputation": 652, "user_id": 4338329, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-VNvM-kwy6Vo/AAAAAAAAAAI/AAAAAAAAAkg/BnXdycqT9eU/photo.jpg?sz=128", "display_name": "lovechillcool", "link": "https://stackoverflow.com/users/4338329/lovechillcool"}, "reply_to_user": {"reputation": 1341, "user_id": 6809571, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/000a638897147ab84cf57cde60e2d05b?s=128&d=identicon&r=PG&f=1", "display_name": "John R", "link": "https://stackoverflow.com/users/6809571/john-r"}, "edited": false, "score": 0, "creation_date": 1517439251, "post_id": 48552589, "comment_id": 84102012, "body": "@JohnH I posted my codes"}, {"owner": {"reputation": 652, "user_id": 4338329, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-VNvM-kwy6Vo/AAAAAAAAAAI/AAAAAAAAAkg/BnXdycqT9eU/photo.jpg?sz=128", "display_name": "lovechillcool", "link": "https://stackoverflow.com/users/4338329/lovechillcool"}, "reply_to_user": {"reputation": 1590, "user_id": 5428880, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/E8wTo.jpg?s=128&g=1", "display_name": "Suraj Kothari", "link": "https://stackoverflow.com/users/5428880/suraj-kothari"}, "edited": false, "score": 0, "creation_date": 1517439495, "post_id": 48552589, "comment_id": 84102116, "body": "@SurajKothari keys are compiled from all these 3 files. Each file has a different set of keys but 98% keys are overlapping within each file.."}, {"owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "edited": false, "score": 0, "creation_date": 1517440822, "post_id": 48552589, "comment_id": 84102557, "body": "make sure you specify <code>dtype</code>. in particular, if you have repeated text strings within a column, read them in as categories. this will not only save memory, but should speed up the <code>combine_first</code> process."}, {"owner": {"reputation": 144849, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1517441500, "post_id": 48552589, "comment_id": 84102777, "body": "<code>join</code> in the shell maybe? <code>man join</code>"}], "answers": [{"tags": [], "owner": {"reputation": 37454, "user_id": 4985733, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/r7daF.jpg?s=128&g=1", "display_name": "Martin Evans", "link": "https://stackoverflow.com/users/4985733/martin-evans"}, "is_accepted": false, "score": 0, "last_activity_date": 1517827857, "last_edit_date": 1517827857, "creation_date": 1517827037, "answer_id": 48620630, "question_id": 48552589, "link": "https://stackoverflow.com/questions/48552589/fastest-way-to-combining-csv-files-horizontally/48620630#48620630", "title": "Fastest Way to Combining csv Files Horizontally", "body": "<p>Most of the time is going to be file I/O. Here is non-pandas solution for you to test with:</p>\n\n<pre><code>import glob\nimport csv\nfrom collections import defaultdict\n\ndata = defaultdict(dict)\nmetrics = []\n\nfor csv_filename in glob.glob('foo_bar*.csv'):\n    with open(csv_filename, 'r', newline='') as f_input:\n        csv_input = csv.reader(f_input)\n        key_header, *header = next(csv_input)\n        metrics.extend(header)\n\n        for row in csv_input:\n            key = data[row[0]]\n\n            for metric, value in zip(header, row[1:]):\n                key[metric] = value\n\nmetrics = sorted(metrics)            \n\nwith open('output.csv', 'w', newline='') as f_output:\n    csv_output = csv.writer(f_output)\n    csv_output.writerow([key_header] + metrics)\n\n    for key in sorted(data.keys()):\n        csv_output.writerow([key] + [data[key].get(metric, 'null') for metric in metrics])\n</code></pre>\n\n<p>For your example files, this would create an output CSV file:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>key,metric1,metric2,metric3,metric4,metric5,metric6,metric7\nk1,m1,m2,m3,m4,m5,m6,m7\nk2,m1,m2,null,null,null,m6,m7\n</code></pre>\n\n<p>It uses a <code>defaultdict</code> to build up dictionaries for each key found in each CSV file, then writes all the results to the output file. If a given key does not have a matching metric <code>null</code> is written.</p>\n"}, {"tags": [], "owner": {"reputation": 144849, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "is_accepted": false, "score": 0, "last_activity_date": 1517831210, "creation_date": 1517831210, "answer_id": 48621923, "question_id": 48552589, "link": "https://stackoverflow.com/questions/48552589/fastest-way-to-combining-csv-files-horizontally/48621923#48621923", "title": "Fastest Way to Combining csv Files Horizontally", "body": "<p>As you haven't got a suitable <code>pandas</code> answer a week later, maybe have a try with <code>join</code> in the shell, using <code>,</code> as separator:</p>\n\n<pre><code>join -t, file[12].csv | join -t, - file3.csv\n</code></pre>\n"}], "owner": {"reputation": 652, "user_id": 4338329, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-VNvM-kwy6Vo/AAAAAAAAAAI/AAAAAAAAAkg/BnXdycqT9eU/photo.jpg?sz=128", "display_name": "lovechillcool", "link": "https://stackoverflow.com/users/4338329/lovechillcool"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 643, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1520579471, "creation_date": 1517438176, "last_edit_date": 1520579471, "question_id": 48552589, "link": "https://stackoverflow.com/questions/48552589/fastest-way-to-combining-csv-files-horizontally", "title": "Fastest Way to Combining csv Files Horizontally", "body": "<p>I have 3 large csv files, with size varying from 1.5GB-1.8GB. Each file has different metric columns from each other.</p>\n\n<pre><code>File1 (columns):       key, metric1, metric2\nFile1 (sample values): k1,  m1,      m2\n                       k2,  m1,      m2\n\nFile2 (columns):       key, metric3, metric4, metric5\nFile2 (sample values): k1,  m3,      m4,      m5\n\nFile3 (columns):       key, metric6, metric7\nFile3 (sample values): k1,  m6,      m7\n                       k2,  m6,      m7\n</code></pre>\n\n<p>I would like to combine these 3 files into one file below:</p>\n\n<pre><code>Output (columns):       key, metric1, metric2, metric3, metric4, metric5, metric6, metric7\nOutput (sample values): k1,  m1,      m2,      m3,      m4,      m5,      m6,      m7\n                        k2,  m1,      m2,      null,    null,    null,    m6,      m7\n</code></pre>\n\n<p>I tried to use <code>pandas</code> and it's taking 40 mins to complete. I guess it is due to the file size.</p>\n\n<p>Is there any faster way of combing big csv files horizontally?</p>\n\n<p><strong>EDIT :</strong></p>\n\n<p>Here below are the codes I used:</p>\n\n<pre><code>col_to_keep = ['a','b','c']\nfile_ptn = os.path.join('raw','*foo_bar*.csv')\nfiles = glob.glob(file_ptn)\n\ntry:\n        df = reduce(lambda left,right: pd.DataFrame.combine_first(left,right), [pd.read_csv(f,dtype={'[UPC]': str}).set_index(sch_inx_region) for f in files])\n        df = df[col_to_keep]\n        df.to_csv('output.csv', compression = None, encoding = 'utf-8')\n\nexcept Exception as e:\n    msg = '--- [combine] Writing output file failed! Error: '+str(e)\n    print(msg)\n</code></pre>\n"}, {"tags": ["python", "json", "python-3.x"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 8, "creation_date": 1517438165, "post_id": 48552580, "comment_id": 84101562, "body": "<code>print (result[&#39;response&#39;][0][&#39;name&#39;])</code>. <code>response</code> is a list with a dictionary at the 0th index."}, {"owner": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "edited": false, "score": 2, "creation_date": 1517438541, "post_id": 48552580, "comment_id": 84101715, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/48193502/access-a-particular-field-in-arbitrarily-nested-json-data\">Access a particular field in arbitrarily nested JSON data</a>"}], "answers": [{"tags": [], "owner": {"reputation": 5056, "user_id": 4276090, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/r87tb.jpg?s=128&g=1", "display_name": "Skam", "link": "https://stackoverflow.com/users/4276090/skam"}, "is_accepted": true, "score": 1, "last_activity_date": 1517438970, "creation_date": 1517438970, "answer_id": 48552741, "question_id": 48552580, "link": "https://stackoverflow.com/questions/48552580/json-parse-python/48552741#48552741", "title": "JSON parse Python", "body": "<p>What sort of data structure is the value of the key  <code>response</code>?</p>\n\n<p>i.e. how would you get it if I gave you the following instead?</p>\n\n<pre><code>\"response\": [{\n  \"id\": 156603484,\n  \"name\": \"Equestria in the Space\",\n  \"screen_name\": \"equestriaspace\",\n  \"is_closed\": 0,\n  \"type\": \"group\",\n  \"is_admin\": 1,\n  \"admin_level\": 3,\n  \"is_member\": 1,\n  \"description\": \"\u041e\u0444\u0438\u0446\u0438\u0430\u043b\u044c\u043d\u043e \u0441\u043e\u043e\u0431\u0449\u0435\u0441\u0442\u0432\u043e Equestria in the Space!\",\n  \"photo_50\": \"https://pp.userap...089/u0_mBSE4E34.jpg\",\n  \"photo_100\": \"https://pp.userap...088/O6vENP0IW_w.jpg\",\n  \"photo_200\": \"https://pp.userap...086/rwntMz6YwWM.jpg\"\n},\n{\n  \"not_a_real_response\": \"just some garbage actually\"\n}]\n</code></pre>\n\n<p>You would need to pick out the first response in that array of responses. As nice people in the comments have already told you.</p>\n\n<p><code>name = result['response'][0]['name']</code></p>\n"}], "owner": {"reputation": 206, "user_id": 8703567, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dKuDO.gif?s=128&g=1", "display_name": "Jengas", "link": "https://stackoverflow.com/users/8703567/jengas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 229, "favorite_count": 0, "accepted_answer_id": 48552741, "answer_count": 1, "score": -1, "last_activity_date": 1517438970, "creation_date": 1517438123, "last_edit_date": 1517438197, "question_id": 48552580, "link": "https://stackoverflow.com/questions/48552580/json-parse-python", "title": "JSON parse Python", "body": "<p>I have a json data that i got from VK.</p>\n\n<pre><code> {\n\"response\": [{\n    \"id\": 156603484,\n    \"name\": \"Equestria in the Space\",\n    \"screen_name\": \"equestriaspace\",\n    \"is_closed\": 0,\n    \"type\": \"group\",\n    \"is_admin\": 1,\n    \"admin_level\": 3,\n    \"is_member\": 1,\n    \"description\": \"\u041e\u0444\u0438\u0446\u0438\u0430\u043b\u044c\u043d\u043e \u0441\u043e\u043e\u0431\u0449\u0435\u0441\u0442\u0432\u043e Equestria in the Space!\",\n    \"photo_50\": \"https://pp.userap...089/u0_mBSE4E34.jpg\",\n    \"photo_100\": \"https://pp.userap...088/O6vENP0IW_w.jpg\",\n    \"photo_200\": \"https://pp.userap...086/rwntMz6YwWM.jpg\"\n    }]\n}\n</code></pre>\n\n<p>So i wanted to print only \"name\" but when i did it it gave me an error</p>\n\n<blockquote>\n  <p>TypeError: list indices must be integers or slices, not str</p>\n</blockquote>\n\n<p>My code is:</p>\n\n<pre><code>method_url = 'https://api.vk.com/method/groups.getById?'\ndata = dict(access_token=access_token, gid=group_id)\nresponse = requests.post(method_url, data)\nresult = json.loads(response.text)\n\nprint (result['response']['name'])\n</code></pre>\n\n<p>Any idea how can i fix it? In google i found how to parse json with one array. But here is two or something</p>\n\n<p>P.S dont beat me so much. I am new in Python, just learning</p>\n"}, {"tags": ["python", "pandas", "dataframe"], "comments": [{"owner": {"reputation": 3, "user_id": 8122713, "user_type": "registered", "profile_image": "https://graph.facebook.com/1776019132728398/picture?type=large", "display_name": "Libtjyry Asdascsac", "link": "https://stackoverflow.com/users/8122713/libtjyry-asdascsac"}, "reply_to_user": {"reputation": 11919, "user_id": 9183344, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U7r5r.png?s=128&g=1", "display_name": "r.ook", "link": "https://stackoverflow.com/users/9183344/r-ook"}, "edited": false, "score": 0, "creation_date": 1517439295, "post_id": 48552558, "comment_id": 84102035, "body": "thanks, i know it&#39;s a super simple question, but to me, i just start python 2 weeks ago, and I&#39;ve tried the whole day on this tiny small question."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 8122713, "user_type": "registered", "profile_image": "https://graph.facebook.com/1776019132728398/picture?type=large", "display_name": "Libtjyry Asdascsac", "link": "https://stackoverflow.com/users/8122713/libtjyry-asdascsac"}, "edited": false, "score": 0, "creation_date": 1517439458, "post_id": 48552719, "comment_id": 84102095, "body": "Thanks, it is such a short and complex code, and very beautiful! I gonna split it into several steps for better understanding!"}, {"owner": {"reputation": 3, "user_id": 8122713, "user_type": "registered", "profile_image": "https://graph.facebook.com/1776019132728398/picture?type=large", "display_name": "Libtjyry Asdascsac", "link": "https://stackoverflow.com/users/8122713/libtjyry-asdascsac"}, "edited": false, "score": 0, "creation_date": 1517441249, "post_id": 48552719, "comment_id": 84102690, "body": "Thanks for your editing, i can understand this part: {&#39;{}-D&#39;.format(i): df[&#39;1-D&#39;].shift(i-1) for i in range(2,11)}, but i cannot understand what ** means here?"}], "tags": [], "owner": {"reputation": 16194, "user_id": 667883, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a39234ae82a5898cba1d70b5bff80ec3?s=128&d=identicon&r=PG", "display_name": "Allen", "link": "https://stackoverflow.com/users/667883/allen"}, "is_accepted": true, "score": 2, "last_activity_date": 1517441471, "last_edit_date": 1517441471, "creation_date": 1517438827, "answer_id": 48552719, "question_id": 48552558, "link": "https://stackoverflow.com/questions/48552558/python-dataframe-how-to-delete-some-values-in-a-column-and-add-nan-then-comb/48552719#48552719", "title": "Python, dataframe, how to delete some values in a column, and add NaN, then combine the column with the existed table?", "body": "<p>I think you can use assign and shift:</p>\n\n<pre><code>df.assign(**{'{}-D'.format(i): df['1-D'].shift(i-1) for i in range(2,11)})\n</code></pre>\n\n<p>A bit explanation:</p>\n\n<pre><code>{'{}-D'.format(i): df['1-D'].shift(i-1) for i in range(2,11)}\n</code></pre>\n\n<p>Builds a dict with column names as keys and column series as values. The ** operator unpacks the dictionary keys and values and feed them as parameters to the assign function. It's the same as calling:</p>\n\n<pre><code>df.assign(2-D=xxx, 3-D=yyy...)\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 8122713, "user_type": "registered", "profile_image": "https://graph.facebook.com/1776019132728398/picture?type=large", "display_name": "Libtjyry Asdascsac", "link": "https://stackoverflow.com/users/8122713/libtjyry-asdascsac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 48552719, "answer_count": 1, "score": -5, "last_activity_date": 1517441471, "creation_date": 1517438031, "last_edit_date": 1517440453, "question_id": 48552558, "link": "https://stackoverflow.com/questions/48552558/python-dataframe-how-to-delete-some-values-in-a-column-and-add-nan-then-comb", "title": "Python, dataframe, how to delete some values in a column, and add NaN, then combine the column with the existed table?", "body": "<p>Here is what my table looks like:</p>\n\n<pre><code>df=pd.DataFrame(np.random.rand(60).reshape(20,3))\ndf.columns=['price','time','1-D']\n</code></pre>\n\n<p>Now, I want to add 9 more columns, which are '2-D', '3-D', ...., '10-D'.\nThe values in '2-D' are: 'NaN' plus all values in '1-D', but drop the last value (since I add a 'NaN' at first. Same to '3-D':'NaN'+ column['2-D'].</p>\n\n<p>Here is the result I want to get:</p>\n\n<pre><code>Out[153]: \n       price      time       1-D       2-D       3-D       4-D       5-D  \\\n0   0.414901  0.173058  0.403901       NaN       NaN       NaN       NaN   \n1   0.918011  0.262294  0.641516  0.403901       NaN       NaN       NaN   \n2   0.524934  0.051661  0.329890  0.641516  0.403901       NaN       NaN   \n3   0.654412  0.867551  0.263398  0.329890  0.641516  0.403901       NaN   \n4   0.107087  0.192514  0.598509  0.263398  0.329890  0.641516  0.403901   \n5   0.232152  0.144453  0.107699  0.598509  0.263398  0.329890  0.641516   \n6   0.105883  0.243597  0.602938  0.107699  0.598509  0.263398  0.329890   \n7   0.269133  0.036553  0.749552  0.602938  0.107699  0.598509  0.263398   \n8   0.144464  0.516613  0.179333  0.749552  0.602938  0.107699  0.598509   \n9   0.901749  0.908061  0.025336  0.179333  0.749552  0.602938  0.107699   \n10  0.247895  0.231501  0.157868  0.025336  0.179333  0.749552  0.602938   \n11  0.132763  0.501174  0.171977  0.157868  0.025336  0.179333  0.749552   \n12  0.165358  0.407833  0.284734  0.171977  0.157868  0.025336  0.179333   \n13  0.960481  0.511533  0.249719  0.284734  0.171977  0.157868  0.025336   \n14  0.016045  0.512287  0.206942  0.249719  0.284734  0.171977  0.157868   \n15  0.948984  0.911282  0.269408  0.206942  0.249719  0.284734  0.171977   \n16  0.470319  0.468252  0.289175  0.269408  0.206942  0.249719  0.284734   \n17  0.751353  0.167094  0.531566  0.289175  0.269408  0.206942  0.249719   \n18  0.854261  0.894898  0.513595  0.531566  0.289175  0.269408  0.206942   \n19  0.016631  0.110026  0.797857  0.513595  0.531566  0.289175  0.269408   \n\n         6-D       7-D       8-D       9-D      10-D  \n0        NaN       NaN       NaN       NaN       NaN  \n1        NaN       NaN       NaN       NaN       NaN  \n2        NaN       NaN       NaN       NaN       NaN  \n3        NaN       NaN       NaN       NaN       NaN  \n4        NaN       NaN       NaN       NaN       NaN  \n5   0.403901       NaN       NaN       NaN       NaN  \n6   0.641516  0.403901       NaN       NaN       NaN  \n7   0.329890  0.641516  0.403901       NaN       NaN  \n8   0.263398  0.329890  0.641516  0.403901       NaN  \n9   0.598509  0.263398  0.329890  0.641516  0.403901  \n10  0.107699  0.598509  0.263398  0.329890  0.641516  \n11  0.602938  0.107699  0.598509  0.263398  0.329890  \n12  0.749552  0.602938  0.107699  0.598509  0.263398  \n13  0.179333  0.749552  0.602938  0.107699  0.598509  \n14  0.025336  0.179333  0.749552  0.602938  0.107699  \n15  0.157868  0.025336  0.179333  0.749552  0.602938  \n16  0.171977  0.157868  0.025336  0.179333  0.749552  \n17  0.284734  0.171977  0.157868  0.025336  0.179333  \n18  0.249719  0.284734  0.171977  0.157868  0.025336  \n19  0.206942  0.249719  0.284734  0.171977  0.157868  \n</code></pre>\n"}, {"tags": ["python", "tensorflow"], "comments": [{"owner": {"reputation": 1680, "user_id": 6772171, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/bc07c67f42651f77624694bfd9ad6923?s=128&d=identicon&r=PG&f=1", "display_name": "Evan Weissburg", "link": "https://stackoverflow.com/users/6772171/evan-weissburg"}, "edited": false, "score": 0, "creation_date": 1517439019, "post_id": 48552542, "comment_id": 84101899, "body": "What&#39;s your batch size? What&#39;s your sentence lengths?"}, {"owner": {"reputation": 338, "user_id": 4705722, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b0292cef8a0a90ed57d525ed015438eb?s=128&d=identicon&r=PG&f=1", "display_name": "sail0r", "link": "https://stackoverflow.com/users/4705722/sail0r"}, "reply_to_user": {"reputation": 1680, "user_id": 6772171, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/bc07c67f42651f77624694bfd9ad6923?s=128&d=identicon&r=PG&f=1", "display_name": "Evan Weissburg", "link": "https://stackoverflow.com/users/6772171/evan-weissburg"}, "edited": false, "score": 0, "creation_date": 1517439987, "post_id": 48552542, "comment_id": 84102264, "body": "@EvanWeissburg batch_size=32. sentences can be quite large bodies of text, up to 2k-3k words or so."}, {"owner": {"reputation": 338, "user_id": 4705722, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b0292cef8a0a90ed57d525ed015438eb?s=128&d=identicon&r=PG&f=1", "display_name": "sail0r", "link": "https://stackoverflow.com/users/4705722/sail0r"}, "reply_to_user": {"reputation": 1680, "user_id": 6772171, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/bc07c67f42651f77624694bfd9ad6923?s=128&d=identicon&r=PG&f=1", "display_name": "Evan Weissburg", "link": "https://stackoverflow.com/users/6772171/evan-weissburg"}, "edited": false, "score": 0, "creation_date": 1517443404, "post_id": 48552542, "comment_id": 84103280, "body": "I tried changing batch size to 3 and get the exact same error again."}], "answers": [{"tags": [], "owner": {"reputation": 50, "user_id": 11643158, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p8bX9.png?s=128&g=1", "display_name": "DatenDenker", "link": "https://stackoverflow.com/users/11643158/datendenker"}, "is_accepted": false, "score": 0, "last_activity_date": 1601733903, "creation_date": 1601733903, "answer_id": 64185088, "question_id": 48552542, "link": "https://stackoverflow.com/questions/48552542/tensorflow-running-out-of-memory-resourceexhaustederror-when-executing-embeddi/64185088#64185088", "title": "TensorFlow running out of memory (ResourceExhaustedError) when executing embedding_lookup", "body": "<p>It could be that you computer runs out of memory (RAM). Take a look at the taskmanager before you initiate your model.\nI have 16 GB and was at 79%, so it ran out. It might help using a jupyter notebook to see the amount of Ram left after having the data prepared</p>\n"}], "owner": {"reputation": 338, "user_id": 4705722, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b0292cef8a0a90ed57d525ed015438eb?s=128&d=identicon&r=PG&f=1", "display_name": "sail0r", "link": "https://stackoverflow.com/users/4705722/sail0r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 236, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1601733903, "creation_date": 1517437947, "last_edit_date": 1525681495, "question_id": 48552542, "link": "https://stackoverflow.com/questions/48552542/tensorflow-running-out-of-memory-resourceexhaustederror-when-executing-embeddi", "title": "TensorFlow running out of memory (ResourceExhaustedError) when executing embedding_lookup", "body": "<p>I am using a pre-tained vector to create an embedding like so</p>\n\n<pre><code>import numpy\nimport gensim\nimport tensorflow\nft_model=gensim.models.KeyedVectors.load_word2vec_format(\"ft_model.vec\")\nvocabulary=ft_model.vocab\nembeddings=numpy.array([ft_model.word_vec(x) for x in vocabulary.keys()])\n\nvocabulary_size=len(vocabulary)\nembedding_size=embeddings.shape[1]\n\nW=tensorflow.Variable(\n    tensorflow.constant(0.0, shape=[vocabulary_size, embedding_size]),\n    trainable=False,\n    name=\"W\"\n)\nembedding_placeholder=tensorflow.placeholder(\n    tensorflow.float32,[vocabulary_size,embedding_size],\n    name=\"fasttext_vector\"\n)\nembedding_init=W.assign(embedding_placeholder)\ndata_placeholder=tensorflow.placeholder(tensorflow.int32,shape=[None, max_length])\nembedding_layer=tensorflow.nn.embedding_lookup(W, data_placeholder)\n</code></pre>\n\n<p>I get an error after it briefly runs through 1 or two training batches and the code crashes completely!</p>\n\n<pre><code>ResourceExhaustedError (see above for traceback): OOM when allocating tensor with shape[5000,14621,100]\n</code></pre>\n\n<p>The stack trace cleary states that this is caused by the <code>embedding_layer=tensorflow.nn.embedding_lookup(W, data_placeholder)</code> line.\nAny idea what could be causing this? 100 is the embedding size but those other numbers (5000, 14621) are rather strange, larger than I exected, and seem to be causing TensorFlow to completely chew up all GPU memory!\nembedding lookups seem like such a common thing and the .vec file I am incorporating is very small.</p>\n"}, {"tags": ["python", "pandas", "xlsxwriter"], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 9296857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a54af8e36b4ee47beea820cfb8684a68?s=128&d=identicon&r=PG&f=1", "display_name": "Charles Sayre", "link": "https://stackoverflow.com/users/9296857/charles-sayre"}, "edited": false, "score": 0, "creation_date": 1517509511, "post_id": 48564249, "comment_id": 84135021, "body": "Yep that fixed it. Well now I feel dumb for not noticing that. Thanks for your answer"}], "tags": [], "owner": {"reputation": 28655, "user_id": 10238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8c3b1025babebf20168dd90ea8f268c?s=128&d=identicon&r=PG", "display_name": "jmcnamara", "link": "https://stackoverflow.com/users/10238/jmcnamara"}, "is_accepted": true, "score": 1, "last_activity_date": 1517492724, "creation_date": 1517492724, "answer_id": 48564249, "question_id": 48552537, "link": "https://stackoverflow.com/questions/48552537/issue-with-column-names-in-xlsxwriter-and-pandas/48564249#48564249", "title": "Issue with column names in XlsxWriter and Pandas", "body": "<p>Rows and columns are zero indexed in XlsxWriter so you probably need <code>col_num</code> rather than <code>col_num +1</code> when you write the header In your example:</p>\n\n<pre><code>for col_num, value in enumerate(data.columns.values):\n    worksheet.write(0, col_num, value, header_format)\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 9296857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a54af8e36b4ee47beea820cfb8684a68?s=128&d=identicon&r=PG&f=1", "display_name": "Charles Sayre", "link": "https://stackoverflow.com/users/9296857/charles-sayre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1625, "favorite_count": 0, "accepted_answer_id": 48564249, "answer_count": 1, "score": 3, "last_activity_date": 1517492724, "creation_date": 1517437928, "question_id": 48552537, "link": "https://stackoverflow.com/questions/48552537/issue-with-column-names-in-xlsxwriter-and-pandas", "title": "Issue with column names in XlsxWriter and Pandas", "body": "<p>I am looking at automating a very small bit of my job that has to do with editing some files around, simple copy pasting in excel.I have been mildly successful in doing so in CSV and unformatted excel files. However the last file has to be formatted and I decided to uses XlsxWriter to do that. I am encountering an issue where the column names won't appropriately adjust to the left when I remove the index. On top of that some of the formatting is moving (column width) and other bits aren't (color, alignment, etc).</p>\n\n<pre><code>data_cols = ['Date', 'ID', 'Latitude', 'Longitude', 'Snow Accumulation at Customer Facility (inches)', 'Season Accumulation of Snow (inches)', 'Nearest Human Observed Snow Accumulation (inches)','Distance between snow observation site and customer facility (miles)','24 hr Maximum wind speed (mph)','24 hr Min. Temp. (degrees F)','Sleet or Freezing Rain (1=Yes; 0=No)']\n\ndata.columns = data_cols\n\nwriter = pd.ExcelWriter('C:/Users/csayre/Desktop/snowexpress_testbed/' + 'snowexpress_' + day.strftime(\"%m%d%y\") + '_dentco.xlsx', engine = 'xlsxwriter')\n\ndata.to_excel(writer, sheet_name='Sheet1', index=False)\n\nworkbook  = writer.book\nworksheet = writer.sheets['Sheet1']\n\nheader_format = workbook.add_format({\n    'bold': False,\n    'font_name': 'Arial',\n    'font_size': 10,\n    'text_wrap': True,\n    'center_across': True,\n    'valign': 'bottom',\n    'fg_color': '#cdffff',\n    'border': 1})\n\nfor col_num, value in enumerate(data.columns.values):\n    worksheet.write(0, col_num + 1, value, header_format)\n\n\nworksheet.set_column(0, 0, 14.43)\nworksheet.set_column(1, 1, 18.86)\nworksheet.set_column(2, 2, 8.71)\nworksheet.set_column(3, 3, 10.43)\nworksheet.set_column(4, 7, 11.57)\nworksheet.set_column(8, 8, 12)\nworksheet.set_column(9, 9, 9.57)\nworksheet.set_column(10, 10, 9.57)\n\nwriter.save()\n</code></pre>\n\n<p>Basic overview, data is an existing dataframe that I manipulate earlier and save as a csv mainly to keep track of the workflow, I have had no issues when exporting it as a csv and removing the index.</p>\n\n<p><a href=\"https://i.stack.imgur.com/ZyNu6.png\" rel=\"nofollow noreferrer\">This is what I am trying to produce</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/os75W.png\" rel=\"nofollow noreferrer\">This is what this code produces with \"index=false\"</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/4S344.png\" rel=\"nofollow noreferrer\">This is what it looks like with the index</a></p>\n"}, {"tags": ["python", "matlab"], "comments": [{"owner": {"reputation": 50452, "user_id": 33258, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/c4b21ea020b4d95c4abacaffc9daaf4e?s=128&d=identicon&r=PG", "display_name": "Hugh Bothwell", "link": "https://stackoverflow.com/users/33258/hugh-bothwell"}, "edited": false, "score": 2, "creation_date": 1517448277, "post_id": 48552517, "comment_id": 84104361, "body": "It might help to refer to <a href=\"https://stackoverflow.com/questions/1707780/call-python-function-from-matlab\" title=\"call python function from matlab\">stackoverflow.com/questions/1707780/&hellip;</a>"}, {"owner": {"reputation": 13303, "user_id": 4221706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6d40a22e3e6556e376d9b6d64022beb?s=128&d=identicon&r=PG", "display_name": "hbaderts", "link": "https://stackoverflow.com/users/4221706/hbaderts"}, "edited": false, "score": 1, "creation_date": 1517468681, "post_id": 48552517, "comment_id": 84109909, "body": "I get a <code>Python int with properties: ...</code> which has value 330, as expected. Using MATLAB R2017a and Python 3.6 from Anaconda."}, {"owner": {"reputation": 45, "user_id": 6182579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f1f5d016b1bb3f9acbe74badbc3a1d4?s=128&d=identicon&r=PG&f=1", "display_name": "Leo", "link": "https://stackoverflow.com/users/6182579/leo"}, "reply_to_user": {"reputation": 13303, "user_id": 4221706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6d40a22e3e6556e376d9b6d64022beb?s=128&d=identicon&r=PG", "display_name": "hbaderts", "link": "https://stackoverflow.com/users/4221706/hbaderts"}, "edited": false, "score": 0, "creation_date": 1517511014, "post_id": 48552517, "comment_id": 84135887, "body": "@hbaderts Maybe it doesnt work for me because I am using Python 2.7. Strange that I am able to get print outputs into MATLAB but not return variables."}, {"owner": {"reputation": 45, "user_id": 6182579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f1f5d016b1bb3f9acbe74badbc3a1d4?s=128&d=identicon&r=PG&f=1", "display_name": "Leo", "link": "https://stackoverflow.com/users/6182579/leo"}, "edited": false, "score": 0, "creation_date": 1517512434, "post_id": 48552517, "comment_id": 84136590, "body": "EDIT: Nevermind. Now it works. Not sure what happened, but restarting AND reloading the module worked."}], "owner": {"reputation": 45, "user_id": 6182579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f1f5d016b1bb3f9acbe74badbc3a1d4?s=128&d=identicon&r=PG&f=1", "display_name": "Leo", "link": "https://stackoverflow.com/users/6182579/leo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 833, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1517437964, "creation_date": 1517437822, "question_id": 48552517, "link": "https://stackoverflow.com/questions/48552517/returning-values-from-python-function-running-in-matlab", "title": "Returning values from Python function running in MATLAB", "body": "<p>I am testing calling Python functions through MATLAB, but I am not getting what I expected. I figured I could call a Python function within MATLAB and have whatever that function returns, given to a MATLAB variable, as follows:</p>\n\n<p>Python script (saved as test_for_mlab.py):</p>\n\n<pre><code>def out_func(arg_1):\n    print 'This print statement is in Python'\n    a = int(arg_1 * 10)\n    return a\n</code></pre>\n\n<p>MATLAB part:</p>\n\n<pre><code>val = py.test_for_mlab.out_func(33);\n</code></pre>\n\n<p>I was expecting val to have a value of 330 (int). Instead, the message I get in MATLAB is val = Python NoneType with no properties. None.</p>\n\n<p>How can I get my desired results?</p>\n"}, {"tags": ["python", "xml", "loops", "csv", "nodes"], "answers": [{"comments": [{"owner": {"reputation": 127, "user_id": 7334866, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/7f365ffd42a36dd13d2f6038f31e7245?s=128&d=identicon&r=PG&f=1", "display_name": "AllanLC", "link": "https://stackoverflow.com/users/7334866/allanlc"}, "edited": false, "score": 0, "creation_date": 1517475360, "post_id": 48552841, "comment_id": 84113133, "body": "Now suppose that I want to do the same for &quot;images&quot;, assuming images can also have multiple sub node &quot;image&quot;; how could I do that? I&#39;m very sorry but I starting in Python.. :( Thank you so much"}], "tags": [], "owner": {"reputation": 4114, "user_id": 1208034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uSUep.jpg?s=128&g=1", "display_name": "Max Szczurek", "link": "https://stackoverflow.com/users/1208034/max-szczurek"}, "is_accepted": false, "score": 0, "last_activity_date": 1517515903, "last_edit_date": 1517515903, "creation_date": 1517439545, "answer_id": 48552841, "question_id": 48552512, "link": "https://stackoverflow.com/questions/48552512/xml-to-csv-in-python-extract-series-of-subnodes-for-every-node/48552841#48552841", "title": "XML to CSV in PYTHON: Extract series of subnodes for every node", "body": "<p>I think this is what you're looking for:</p>\n\n<pre><code>for child in time.find('categories').find('tree'):\n    categ = child.text\n    row.append(categ)\n</code></pre>\n\n<p>Here's a solution that loops through the xml once to figure out how many headers to add, adds the headers, and then loops through each product's category list:</p>\n\n<p>**Updated to iterate through images in addition to categories. This is the biggest difference: </p>\n\n<pre><code>for child in time.find('categories').find('tree'):\n    categ = child.text\n    row.append(categ)\n    curcat += 1\n\nwhile curcat &lt; maxcat:\n    row.append('')\n    curcat += 1\n</code></pre>\n\n<p>It's going to figure out the maximum number of categories on a single record and then and that many columns. If a particular record has less categories, this code will stick blank values in as placeholders so the column headers always line up with the data. </p>\n\n<p>For instance:</p>\n\n<pre><code>Cat1     Cat2     Cat3     Img1     Img2     Img3\nA        B        C        1        2        3\nD        E        &lt;blank&gt;  4        &lt;blank&gt;  &lt;blank&gt;\n</code></pre>\n\n<p>Here's the full solution:</p>\n\n<pre><code>import xml.etree.ElementTree as ET\nimport csv\n\ntree = ET.parse(\"c:\\\\python\\\\xml.xml\")\nroot = tree.getroot()\n\nf = open('c:\\\\python\\\\xml.csv', 'w')\n\ncsvwriter = csv.writer(f, delimiter=',')\n\ncount = 0\n\nhead = ['Nedis Part Number', 'Nedis Article ID', 'Vendor Part Number', 'Brand', 'EAN', 'Header text', 'Internet Text', 'General Text']\nprdlist = root[1]\n\nmaxcat = 0\nfor time in prdlist.findall('product'):\n    cur = 0\n    for child in time.find('categories').find('tree'):\n        cur += 1\n    if cur &gt; maxcat:\n        maxcat = cur\n\nfor cnt in range (0, maxcat):\n    head.append('Category ' + str(cnt + 1))\n\nmaximg = 0\nfor time in prdlist.findall('product'):\n    cur = 0\n    for child in time.find('images'):\n        cur += 1\n    if cur &gt; maximg:\n        maximg = cur\n\nfor cnt in range(0, maximg):\n    head.append('Image ' + str(cnt + 1))\n\ncsvwriter.writerow(head)\n\nfor time in prdlist.findall('product'):\n    row = []\n    nedis_number = time.find('nedisPartnr').text\n    row.append(nedis_number)\n    nedis_art_id = time.find('nedisArtlid').text\n    row.append(nedis_art_id)\n    vendor_part_nbr = time.find('vendorPartnr').text\n    row.append(vendor_part_nbr)\n    Brand = time.find('brand').text\n    row.append(Brand)\n    ean = time.find('EAN').text\n    row.append(ean)\n    header_text = time.find('headerText').text\n    row.append(header_text)\n    internet_text = time.find('internetText').text\n    row.append(internet_text)\n    general_text = time.find('generalText').text\n    row.append(general_text)\n\n    curcat = 0\n\n    for child in time.find('categories').find('tree'):\n        categ = child.text\n        row.append(categ)\n        curcat += 1\n\n    while curcat &lt; maxcat:\n        row.append('')\n        curcat += 1\n\n    curimg = 0\n\n    for img in time.find('images'):\n        image = img.text\n        row.append(image)\n        curimg += 1\n\n    while curimg &lt; maximg:\n        row.append('')\n        curimg += 1\n\n    csvwriter.writerow(row)\n\nf.close()\n</code></pre>\n"}], "owner": {"reputation": 127, "user_id": 7334866, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/7f365ffd42a36dd13d2f6038f31e7245?s=128&d=identicon&r=PG&f=1", "display_name": "AllanLC", "link": "https://stackoverflow.com/users/7334866/allanlc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1220, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1517515903, "creation_date": 1517437790, "last_edit_date": 1517438099, "question_id": 48552512, "link": "https://stackoverflow.com/questions/48552512/xml-to-csv-in-python-extract-series-of-subnodes-for-every-node", "title": "XML to CSV in PYTHON: Extract series of subnodes for every node", "body": "<p>My goal is to convert an .XML file into a .CSV file.\nThis part of the code is already functional.</p>\n\n<p>However, I also want to extract the sub-sub-nodes of one of the \"father\" nodes.</p>\n\n<p>Maybe an example would be more self explanatory;</p>\n\n<p>Here is the structure of my XML:</p>\n\n<pre><code>&lt;nedisCatalogue&gt;\n   &lt;headerInfo&gt;\n    &lt;feedVersion&gt;1-0&lt;/feedVersion&gt;\n    &lt;dateCreated&gt;2018-01-22T23:37:01+0100&lt;/dateCreated&gt;\n    &lt;supplier&gt;Nedis_BENED&lt;/supplier&gt;\n    &lt;locale&gt;nl_BE&lt;/locale&gt;\n   &lt;/headerInfo&gt;\n   &lt;productList&gt;\n    &lt;product&gt;\n     &lt;nedisPartnr&gt;&lt;![CDATA[VS-150/63BA]]&gt;&lt;/nedisPartnr&gt;\n     &lt;nedisArtlid&gt;17005&lt;/nedisArtlid&gt;\n     &lt;vendorPartnr&gt;&lt;![CDATA[TONFREQ-ELKOS / BIPOL 150, 5390]]&gt;&lt;/vendorPartnr&gt;\n     &lt;brand&gt;&lt;![CDATA[Visaton]]&gt;&lt;/brand&gt;\n     &lt;EAN&gt;4007540053905&lt;/EAN&gt;\n     &lt;intrastatCode&gt;8532220000&lt;/intrastatCode&gt;\n     &lt;UNSPSC&gt;52161514&lt;/UNSPSC&gt;\n     &lt;headerText&gt;&lt;![CDATA[Crossover Foil capacitor]]&gt;&lt;/headerText&gt;\n     &lt;internetText&gt;&lt;![CDATA[Bipolaire elco met een ruwe folie en een zeer goede prijs/kwaliteits-verhouding voor de bouw van cross-overs. 63 Vdc, 10% tolerantie.]]&gt;&lt;/internetText&gt;\n     &lt;generalText&gt;&lt;![CDATA[Dimensions 16 x 35 mm    \n    ]]&gt;&lt;/generalText&gt;\n  &lt;images&gt;\n   &lt;image type=\"2\" order=\"15\"&gt;767736.JPG&lt;/image&gt;\n  &lt;/images&gt;\n  &lt;attachments&gt;\n  &lt;/attachments&gt;\n  &lt;categories&gt;\n   &lt;tree name=\"Internet_Tree_ISHP\"&gt;\n    &lt;entry depth=\"001\" id=\"1067858\"&gt;&lt;![CDATA[Audio]]&gt;&lt;/entry&gt;\n    &lt;entry depth=\"002\" id=\"1067945\"&gt;&lt;![CDATA[Speakers]]&gt;&lt;/entry&gt;\n    &lt;entry depth=\"003\" id=\"1068470\"&gt;&lt;![CDATA[Accessoires]]&gt;&lt;/entry&gt;\n   &lt;/tree&gt;\n  &lt;/categories&gt;\n  &lt;properties&gt;\n   &lt;property id=\"360\" multiplierID=\"\" unitID=\"\" valueID=\"\"&gt;&lt;![CDATA[...]]&gt;&lt;/property&gt;\n  &lt;/properties&gt;\n     &lt;status&gt;\n      &lt;code status=\"NORMAL\"&gt;&lt;/code&gt;\n     &lt;/status&gt;\n     &lt;packaging quantity=\"1\" weight=\"8\"&gt;&lt;/packaging&gt;\n     &lt;introductionDate&gt;2015-10-26&lt;/introductionDate&gt;\n     &lt;serialnumberKeeping&gt;N&lt;/serialnumberKeeping&gt;\n     &lt;priceLevels&gt;\n          &lt;normalPricing from=\"2017-02-13\" to=\"2018-01-23\"&gt;\n       &lt;price level=\"1\" moq=\"1\" currency=\"EUR\"&gt;2.48&lt;/price&gt;\n      &lt;/normalPricing&gt;\n      &lt;specialOfferPricing&gt;&lt;/specialOfferPricing&gt;\n     &lt;goingPriceInclVAT currency=\"EUR\" quantity=\"1\"&gt;3.99&lt;/goingPriceInclVAT&gt;\n     &lt;/priceLevels&gt;\n     &lt;tax&gt;\n     &lt;/tax&gt;\n     &lt;stock&gt;\n      &lt;inStockLocal&gt;25&lt;/inStockLocal&gt;\n      &lt;inStockCentral&gt;25&lt;/inStockCentral&gt;\n      &lt;ATP&gt;\n       &lt;nextExpectedStockDateLocal&gt;&lt;/nextExpectedStockDateLocal&gt;\n       &lt;nextExpectedStockDateCentral&gt;&lt;/nextExpectedStockDateCentral&gt;\n      &lt;/ATP&gt;\n     &lt;/stock&gt;\n    &lt;/product&gt;\n  ....\n&lt;/nedisCatalogue&gt;\n</code></pre>\n\n<p>And here is the code that I have now:</p>\n\n<pre><code>import xml.etree.ElementTree as ET\nimport csv\n\ntree = ET.parse(\"/Users/BE07861/Documents/nedis_catalog_2018-01-23_nl_BE_32191_v1-0_xml\")\nroot = tree.getroot()\n\nf = open('/Users/BE07861/Documents/test2.csv', 'w')\n\ncsvwriter = csv.writer(f, delimiter='\u00e7')\n\ncount = 0\n\nhead = ['Nedis Part Number', 'Nedis Article ID', 'Vendor Part Number', 'Brand', 'EAN', 'Header text', 'Internet Text', 'General Text', 'categories']\nprdlist = root[1]\nprdct = prdlist[5]\ncat = prdct[12]\ntree1=cat[0]\n\ncsvwriter.writerow(head)\n\nfor time in prdlist.findall('product'):\n    row = []\n    nedis_number = time.find('nedisPartnr').text\n    row.append(nedis_number)\n    nedis_art_id = time.find('nedisArtlid').text\n    row.append(nedis_art_id)\n    vendor_part_nbr = time.find('vendorPartnr').text\n    row.append(vendor_part_nbr)\n    Brand = time.find('brand').text\n    row.append(Brand)\n    ean = time.find('EAN').text\n    row.append(ean)\n    header_text = time.find('headerText').text\n    row.append(header_text)\n    internet_text = time.find('internetText').text\n    row.append(internet_text)\n    general_text = time.find('generalText').text\n    row.append(general_text)\n    categ = time.find('categories').find('tree').find('entry').text\n    row.append(categ)\n    csvwriter.writerow(row)\n\nf.close()\n</code></pre>\n\n<p>If you run the code, you'll see that I only retrieve the first \"entry\" of the categories/tree; which is normal. However, I don't know how to create a loop that, for every node \"categories\", creates new columns such as categories1, categories2 &amp; categories3 with the values: \"entry\".</p>\n\n<p>My result should look like this</p>\n\n<pre><code>Nedis Part Number   Nedis Article ID         Vendor Part Number   \nVS-150/63BA         17005              TONFREQ-ELKOS / BIPOL 150, 5390  \n\n\nBrand     EAN           Header text               Internet Text \nVisaton   4,00754E+12   Crossover Foil capacitor  Bipolaire elco \u2026\n\n\n\nGeneral Text              Category1    Categroy2     Category3\nDimensions 16 x 35 mm     Audio        Speakers      Accessoires\n</code></pre>\n\n<p>I've really tried my best but didn't manage to find the solution.</p>\n\n<p>Any help would be very much appreciated!!! :)</p>\n\n<p>Thanks a lot,</p>\n\n<p>Allan</p>\n"}, {"tags": ["python", "django", "django-rest-framework", "oauth2-toolkit"], "answers": [{"tags": [], "owner": {"reputation": 34200, "user_id": 995862, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/d5efb6c1054808f7a79aaefbc64cce76?s=128&d=identicon&r=PG", "display_name": "Kurt Peek", "link": "https://stackoverflow.com/users/995862/kurt-peek"}, "is_accepted": true, "score": 2, "last_activity_date": 1517438221, "creation_date": 1517438221, "answer_id": 48552596, "question_id": 48552509, "link": "https://stackoverflow.com/questions/48552509/in-django-tests-why-do-i-need-to-use-model-objects-get-instead-of-what-was/48552596#48552596", "title": "In Django tests, why do I need to use &lt;Model&gt;.objects.get() instead of what was returned by &lt;Model&gt;.objects.create()?", "body": "<p>It turns out I needed to call <a href=\"https://docs.djangoproject.com/en/2.0/ref/models/instances/#django.db.models.Model.refresh_from_db\" rel=\"nofollow noreferrer\">refresh_from_db()</a> on the <code>self.session</code>. So the following works:</p>\n\n<pre><code>    self.session.refresh_from_db()\n    self.assertEqual(self.session.feedback_expert, 'Yes')\n</code></pre>\n\n<p>Now the test passes.</p>\n"}], "owner": {"reputation": 34200, "user_id": 995862, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/d5efb6c1054808f7a79aaefbc64cce76?s=128&d=identicon&r=PG", "display_name": "Kurt Peek", "link": "https://stackoverflow.com/users/995862/kurt-peek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "accepted_answer_id": 48552596, "answer_count": 1, "score": 0, "last_activity_date": 1517438221, "creation_date": 1517437763, "question_id": 48552509, "link": "https://stackoverflow.com/questions/48552509/in-django-tests-why-do-i-need-to-use-model-objects-get-instead-of-what-was", "title": "In Django tests, why do I need to use &lt;Model&gt;.objects.get() instead of what was returned by &lt;Model&gt;.objects.create()?", "body": "<p>Although this is perhaps not a minimal example, I'm building on <a href=\"https://stackoverflow.com/questions/27641703/how-to-test-an-api-endpoint-with-django-rest-framework-using-django-oauth-toolki\">How to test an API endpoint with Django-rest-framework using Django-oauth-toolkit for authentication</a>. I have a model <code>Session</code> which I'd like to be able to update using the Django REST framework. To this end I wrote the following view:</p>\n\n<pre><code>from rest_framework import generics\n\nfrom oauth2_provider.contrib.rest_framework import OAuth2Authentication\n\nfrom ..models import Session\nfrom ..serializers import SessionSerializer\n\n\nclass SessionDetail(generics.UpdateAPIView):\n    authentication_classes = [OAuth2Authentication]\n    queryset = Session.objects.all()\n    serializer_class = SessionSerializer\n</code></pre>\n\n<p>where the default <code>permission_classes</code> are set in <code>settings.py</code>:</p>\n\n<pre><code>REST_FRAMEWORK = {\n    'DEFAULT_PERMISSION_CLASSES': [\n        'rest_framework.permissions.IsAuthenticated',\n    ],\n}\n</code></pre>\n\n<p>I've written the following test case:</p>\n\n<pre><code>import json\n\nfrom django.contrib.auth.models import User\nfrom datetime import timedelta\n\nfrom django.urls import reverse\nfrom django.test import TestCase, Client\nfrom django.utils import timezone\n\nfrom rest_framework import status\n\nfrom ..models import Family, Session, SessionType, SessionCategory\n\nfrom oauth2_provider.models import get_application_model, get_access_token_model\n\n\nApplication = get_application_model()\nAccessToken = get_access_token_model()\n\n\nclass OAuth2TestCase(TestCase):\n    def setUp(self):\n        self.username = \"test_user\"\n        self.password = \"123456\"\n\n        self.user = User.objects.create_user(username=self.username, password=self.password)\n\n        self.application = Application(\n            name=\"Test Application\",\n            redirect_uris=\"http://localhost\",\n            user=self.user,\n            client_type=Application.CLIENT_CONFIDENTIAL,\n            authorization_grant_type=Application.GRANT_AUTHORIZATION_CODE,\n        )\n        self.application.save()\n\n\n        self.TOKEN = '1234567890'\n        self.token = AccessToken.objects.create(\n            user=self.user,\n            token=self.TOKEN,\n            application=self.application,\n            scope='read write',\n            expires=timezone.now() + timedelta(days=1)\n        )\n\n        self._create_session()\n\n    def _create_session(self):\n        self.session_category = SessionCategory.objects.create(\n            name='Birth Prep')\n        self.session_type = SessionType.objects.create(\n            title='Initial Postpartum Lactation',\n            category=self.session_category)\n        self.family = Family.objects.create()\n        self.session = Session.objects.create(\n            family=self.family,\n            session_type=self.session_type)\n\n    def test_make_patch_request(self):\n        data = {'feedback_expert': 'Yes'}\n        url = reverse('sessions-feedback', kwargs={'pk': self.session.id})\n\n        auth = f\"Bearer {self.TOKEN}\"\n        response = self.client.patch(\n            path=url,\n            data=json.dumps(data),\n            content_type=\"application/json\",\n            HTTP_AUTHORIZATION=auth,\n        )\n\n        self.assertEqual(response.status_code, status.HTTP_200_OK)\n\n        self.assertEqual(Session.objects.get(pk=self.session.id).feedback_expert, 'Yes')\n        # self.assertEqual(self.session.feedback_expert, 'Yes')\n</code></pre>\n\n<p>The test passes, but what puzzles me is that if I comment in the last line and instead do</p>\n\n<pre><code>self.assertEqual(self.session.feedback_expert, 'Yes')\n</code></pre>\n\n<p>I get a test failure:</p>\n\n<pre><code>(venv) Kurts-MacBook-Pro:lucy-web kurtpeek$ python manage.py test lucy_web.tests.test_feedback\nCreating test database for alias 'default'...\nSystem check identified no issues (0 silenced).\nF\n======================================================================\nFAIL: test_make_patch_request (lucy_web.tests.test_feedback.OAuth2TestCase)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/kurtpeek/Documents/Dev/lucy/lucy-web/lucy_web/tests/test_feedback.py\", line 295, in test_make_patch_request\n    self.assertEqual(self.session.feedback_expert, 'Yes')\nAssertionError: '' != 'Yes'\n+ Yes\n\n----------------------------------------------------------------------\nRan 1 test in 1.299s\n\nFAILED (failures=1)\nDestroying test database for alias 'default'...\n</code></pre>\n\n<p>Apparently, the <code>self.session</code> doesn't have its <code>feedback_expert</code> field updated yet, whereas the one returned by <code>Session.objects.get(pk=self.session.id)</code> does. Any idea why this is the case?</p>\n"}, {"tags": ["python", "jenkins", "continuous-integration", "virtualenv"], "comments": [{"owner": {"reputation": 55797, "user_id": 7976758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/512cfbaf98d63ca4acd57b2df792aec6?s=128&d=identicon&r=PG", "display_name": "phd", "link": "https://stackoverflow.com/users/7976758/phd"}, "edited": false, "score": 0, "creation_date": 1517440975, "post_id": 48552479, "comment_id": 84102599, "body": "Why are these libraries slow to install? <code>pip install</code> compiles them from sources? Have you tried precompiled binary wheels?"}, {"owner": {"reputation": 19787, "user_id": 4525448, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/DqSm5.jpg?s=128&g=1", "display_name": "lvthillo", "link": "https://stackoverflow.com/users/4525448/lvthillo"}, "edited": false, "score": 0, "creation_date": 1517468576, "post_id": 48552479, "comment_id": 84109856, "body": "You can work with docker. Create a docker image for your virtual environment and use the docker image in a pipeline in your current job. Just spin up the container, do your tests inside the container and bring it down again, instead of needing to install everything every time you can persist that configuration in your docker image/container."}], "owner": {"reputation": 275, "user_id": 6154148, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6bd3cb95076687eaca190af66ae979f0?s=128&d=identicon&r=PG&f=1", "display_name": "nnja", "link": "https://stackoverflow.com/users/6154148/nnja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1517437622, "creation_date": 1517437622, "question_id": 48552479, "link": "https://stackoverflow.com/questions/48552479/make-virtual-environment-setup-faster", "title": "Make virtual environment setup faster", "body": "<p>I have some automated tests on Jenkins where part of the build steps is to setup a virtual environment (Virtualenv Builder option).\nThis step performs a pip install for about 6 libraries maintained externally. \nThe problem I have is that this process takes time.</p>\n\n<p>Is there a way of loading an image of the Python virtual environment? \nThat way I could create another Jenkins job which generates this image, and this job would only be executed if there are significant changes to the libraries. And then my original automated test jobs will simply get the artifact from this external job at the start of the tests and load the virtual environment from there.</p>\n"}, {"tags": ["python", "python-3.x", "web-scraping"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 1, "creation_date": 1517437834, "post_id": 48552475, "comment_id": 84101420, "body": "If you want to parse a URL, maybe use <a href=\"https://docs.python.org/3/library/urllib.parse.html#module-urllib.parse\" rel=\"nofollow noreferrer\"><code>urllib.urlparse</code></a>? But I doubt this part of your code is really a limiting factor."}], "answers": [{"tags": [], "owner": {"reputation": 19801, "user_id": 9189799, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/U2hEg.jpg?s=128&g=1", "display_name": "SIM", "link": "https://stackoverflow.com/users/9189799/sim"}, "is_accepted": false, "score": 1, "last_activity_date": 1517909010, "creation_date": 1517909010, "answer_id": 48639481, "question_id": 48552475, "link": "https://stackoverflow.com/questions/48552475/how-to-get-the-number-after-certain-slash-faster-in-string/48639481#48639481", "title": "How to get the number after certain slash faster in string?", "body": "<p>Give this a shot:</p>\n\n<pre><code>URL = 'https://www.ebay.com/itm/Deep-V-Neck-Sequin-Bodycon-Cocktail-Dress-Women-Clubwear-Sexy-Party-Dress-/302621221479?var=&amp;hash=item8c09eb2518'\n\nproduct_id = URL.split(\"/\")[-1].split('?')[0] ##you can try like this\nproduct_id = URL.split('?')[0].split(\"/\")[-1]  ##this one is safer\nprint(product_id)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>302621221479\n</code></pre>\n"}], "owner": {"reputation": 686, "user_id": 9045466, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-qvphIrxBPnI/AAAAAAAAAAI/AAAAAAAAAZ8/XALia88EAXQ/photo.jpg?sz=128", "display_name": "tarek hassan", "link": "https://stackoverflow.com/users/9045466/tarek-hassan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 25, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1518623744, "creation_date": 1517437603, "last_edit_date": 1518623744, "question_id": 48552475, "link": "https://stackoverflow.com/questions/48552475/how-to-get-the-number-after-certain-slash-faster-in-string", "title": "How to get the number after certain slash faster in string?", "body": "<p>In this link, I want to get <code>302621221479</code> from the url, Can I do it <strong>faster</strong>?</p>\n\n<p>I am asking for learning how to improve my code not how to do it.</p>\n\n<pre><code>url = 'https://www.ebay.com/itm/Deep-V-Neck-Sequin-Bodycon-Cocktail-Dress-Women-Clubwear-Sexy-Party-Dress-/302621221479?var=&amp;hash=item8c09eb2518'\n\nu = url.split('/')\n\nid_product = u[-1].split('?')\n\nprint(id_product[0])\n</code></pre>\n"}, {"tags": ["python", "unit-testing", "flask", "auth0"], "answers": [{"comments": [{"owner": {"reputation": 421, "user_id": 1758759, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/5e7df1d51660a7dd65bb2e7f46eca915?s=128&d=identicon&r=PG", "display_name": "dim_voly", "link": "https://stackoverflow.com/users/1758759/dim-voly"}, "edited": false, "score": 0, "creation_date": 1517439294, "post_id": 48552579, "comment_id": 84102032, "body": "Item 2 under <a href=\"https://auth0.com/docs/quickstart/backend/python/02-using#obtaining-an-access-token-for-testing\" rel=\"nofollow noreferrer\">https://auth0.com/docs/quickstart/backend/python/02-using#ob&zwnj;&#8203;taining-an-access-to&zwnj;&#8203;ken-for-testing</a>? So I can write a python <code>requests</code> equivalent to the curl that they&#39;ve shown there?"}], "tags": [], "owner": {"reputation": 528, "user_id": 561377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89ab857b2d58015b13ca239c3a277fb1?s=128&d=identicon&r=PG", "display_name": "Jeremy", "link": "https://stackoverflow.com/users/561377/jeremy"}, "is_accepted": false, "score": 1, "last_activity_date": 1517438119, "creation_date": 1517438119, "answer_id": 48552579, "question_id": 48552474, "link": "https://stackoverflow.com/questions/48552474/auth0-obtain-access-token-for-unit-tests-in-python/48552579#48552579", "title": "Auth0 obtain access_token for unit tests in Python", "body": "<p>Have you looked at the <a href=\"https://auth0.com/docs/quickstart/backend/python/01-authorization\" rel=\"nofollow noreferrer\">https://auth0.com/docs/quickstart/backend/python/01-authorization</a> walkthrough? The full quickstart for Python should give you a good start</p>\n"}, {"tags": [], "owner": {"reputation": 421, "user_id": 1758759, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/5e7df1d51660a7dd65bb2e7f46eca915?s=128&d=identicon&r=PG", "display_name": "dim_voly", "link": "https://stackoverflow.com/users/1758759/dim-voly"}, "is_accepted": false, "score": 2, "last_activity_date": 1517449456, "creation_date": 1517449456, "answer_id": 48554119, "question_id": 48552474, "link": "https://stackoverflow.com/questions/48552474/auth0-obtain-access-token-for-unit-tests-in-python/48554119#48554119", "title": "Auth0 obtain access_token for unit tests in Python", "body": "<p>Thanks to @Jerdog, I've constructed the required piece of code:</p>\n\n<pre><code>import json\nimport requests\n\n# testing user password database:\ntestingUsers = {\n    'testingUser2@funnymail.com': 'BuQ3tUS3 :jbFAL',\n    'testingUser3w@funnymail.com': 'y(1726854(b(-KY'\n    }\n\n\ndef getUserToken(userName):\n    # client id and secret come from LogIn (Test Client)! which has password enabled under \"Client &gt; Advanced &gt; Grant Types &gt; Tick Password\"\n    url = 'https://YOUR_AUTH0_DOMAIN/oauth/token' \n    headers = {'content-type': 'application/json'}\n    password = testingUsers[userName]\n    parameter = { \"client_id\":\"Jfjrl12w55uqcJswWmMhSm5IG2Qov8w2e\", \n                  \"client_secret\": \"3E5ZnqLFbPUppBLQiGDjB0H2GtXaLyaD26sdk2HmHrBXQaDYE453UCUoUHmt5nWWh\",\n                  \"audience\": 'AUTH0_AUDIENCE',\n                  \"grant_type\": \"password\",\n                  \"username\": userName,\n                  \"password\": password, \"scope\": \"openid\" } \n    # do the equivalent of a CURL request from https://auth0.com/docs/quickstart/backend/python/02-using#obtaining-an-access-token-for-testing\n    responseDICT = json.loads(requests.post(url, json=parameter, headers=headers).text)\n    return responseDICT['access_token']\n\n@memoize # memoize code from: https://stackoverflow.com/a/815160\ndef getUserTokenHeaders(userName='testingUser2@funnymail.com'):\n    return { 'authorization': \"Bearer \" + getUserToken(userName)} \n</code></pre>\n\n<p>The <code>@memoize</code> decorator is to avoid multiple calls to get a token over many tests. The tenant has to have a default database specified for the above call to work (<a href=\"https://stackoverflow.com/a/43835563/1758759\">see this answer</a>). It was a bit cryptic as to what the database name was supposed to be (the <code>default_directory</code>), but for me, with only Auth0 users, the database was <code>Username-Password-Authentication</code>, which seems to be the default for new accounts.</p>\n"}], "owner": {"reputation": 421, "user_id": 1758759, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/5e7df1d51660a7dd65bb2e7f46eca915?s=128&d=identicon&r=PG", "display_name": "dim_voly", "link": "https://stackoverflow.com/users/1758759/dim-voly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1671, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1517449456, "creation_date": 1517437597, "question_id": 48552474, "link": "https://stackoverflow.com/questions/48552474/auth0-obtain-access-token-for-unit-tests-in-python", "title": "Auth0 obtain access_token for unit tests in Python", "body": "<p>I'm trying to run unit tests in Python for my flask application for routes that depend on the userID which is obtained from the access_token.</p>\n\n<p>Is there a way to call the auth0 authorize API, in Python, to obtain an access_token for a user given their username and password?</p>\n\n<p>If not, then what is an automated way of calling the authorize API to give it a username and password and obtain an access_token?</p>\n\n<p>A code snippet would be best.</p>\n"}, {"tags": ["python", "django", "django-models", "django-templates"], "comments": [{"owner": {"reputation": 1704, "user_id": 5978459, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fHmIL.jpg?s=128&g=1", "display_name": "perfect5th", "link": "https://stackoverflow.com/users/5978459/perfect5th"}, "edited": false, "score": 2, "creation_date": 1517439049, "post_id": 48552470, "comment_id": 84101912, "body": "It looks like your method should work. Maybe one of the other fields is whitespace? <i>e.g.</i>: <code>&#39; &#39;</code>."}, {"owner": {"reputation": 4935, "user_id": 1000378, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/57cb8c4b4f374ca2343b4c318eca27ac?s=128&d=identicon&r=PG", "display_name": "Fran&#231;ois Constant", "link": "https://stackoverflow.com/users/1000378/fran%c3%a7ois-constant"}, "reply_to_user": {"reputation": 1704, "user_id": 5978459, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fHmIL.jpg?s=128&g=1", "display_name": "perfect5th", "link": "https://stackoverflow.com/users/5978459/perfect5th"}, "edited": false, "score": 1, "creation_date": 1517483382, "post_id": 48552470, "comment_id": 84118234, "body": "I agree with @perfect5th so basically try with: <code>field.value_to_string(self).strip()</code>"}], "owner": {"reputation": 1348, "user_id": 6735573, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/026a164e58778bbe4f8c778cb1980e14?s=128&d=identicon&r=PG&f=1", "display_name": "DeA", "link": "https://stackoverflow.com/users/6735573/dea"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 238, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1517443892, "creation_date": 1517437580, "last_edit_date": 1517443892, "question_id": 48552470, "link": "https://stackoverflow.com/questions/48552470/how-do-i-display-only-the-non-empty-or-non-null-fields-from-a-django-a-model", "title": "How do I display only the non empty or non null fields from a django a model?", "body": "<p>I have a model called Address and it has about 7 different fields. The corresponding form for this model is completely optional and the user may fill in either all 7 fields or just 1 field or none of the fields. There are no required fields here. </p>\n\n<p>Now, if the user has filled only the city and country field, how would I in my class method fetch only those fields and then display it properly in the template? </p>\n\n<p>This is the closest I've come to achieving what I want:</p>\n\n<pre><code>class Address(models.Model):\n    address_name = models.CharField(...)\n    line1 = models.CharField(...)\n    line2 = models.CharField(...)\n    line3 = models.CharField(...)\n\n    city = models.CharField(...)\n    state = models.CharField(...)\n    zipcode = models.CharField(...)\n\n    country = models.CharField(...)\n    def get_fields(self):\n        values = []\n        for field in Address._meta.fields:\n            if field.name in ('line1', 'line2', 'line3', 'city', 'state',\n                              'postcode', 'country'):\n                if field.value_to_string(self):\n                    values.append(field.value_to_string(self))\n       return values\n</code></pre>\n\n<p>In my template:</p>\n\n<pre><code>{% for field in address.get_fields %}\n    {{field}}{% if not forloop.last %}, {% else %}.{% endif %}\n{% endfor %}\n</code></pre>\n\n<p>Now this achieves almost what I want, but in one of the test cases, if only one field has been filled out (for ex: only country was filled), it prints:</p>\n\n<p><code>, US.</code></p>\n\n<p>How do I make it say only <code>US</code> instead. Basically, the address format I want is:</p>\n\n<pre><code>{{line1}}, {{line2}}, {{line3}}, {{state}} - {{zipcode}}, {{country}}.\n</code></pre>\n\n<p>Is this kind of formatting possible at all with the way my model currently is? I even tried using <code>{% if %}</code> before each variable, but, then again, the commas don't sit well. What are my options here? </p>\n"}, {"tags": ["python", "mocking"], "comments": [{"owner": {"reputation": 13858, "user_id": 9059420, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qaO9g.jpg?s=128&g=1", "display_name": "Darkonaut", "link": "https://stackoverflow.com/users/9059420/darkonaut"}, "edited": false, "score": 1, "creation_date": 1517440152, "post_id": 48552458, "comment_id": 84102332, "body": "Just saw that your <code>__init__</code> is also missing <code>self</code>"}], "answers": [{"comments": [{"owner": {"reputation": 22778, "user_id": 1554386, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bfe99a3a73b9284d16127418399762ff?s=128&d=identicon&r=PG", "display_name": "Alastair McCormack", "link": "https://stackoverflow.com/users/1554386/alastair-mccormack"}, "edited": false, "score": 0, "creation_date": 1568289943, "post_id": 48552812, "comment_id": 102232585, "body": "I used <code>MockClass()</code> instead of <code>MockClass.return_value</code>, which seemed to give me what I needed."}, {"owner": {"reputation": 9806, "user_id": 382982, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/9ZaxF.jpg?s=128&g=1", "display_name": "pdoherty926", "link": "https://stackoverflow.com/users/382982/pdoherty926"}, "edited": false, "score": 1, "creation_date": 1572031203, "post_id": 48552812, "comment_id": 103447628, "body": "Neither of the two approaches listed above are working for me."}, {"owner": {"reputation": 13858, "user_id": 9059420, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qaO9g.jpg?s=128&g=1", "display_name": "Darkonaut", "link": "https://stackoverflow.com/users/9059420/darkonaut"}, "reply_to_user": {"reputation": 9806, "user_id": 382982, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/9ZaxF.jpg?s=128&g=1", "display_name": "pdoherty926", "link": "https://stackoverflow.com/users/382982/pdoherty926"}, "edited": false, "score": 1, "creation_date": 1572032281, "post_id": 48552812, "comment_id": 103448075, "body": "@pdoherty926 I just tested it again and it still works for me, now under Python 3.7.3. You have to import <code>patch</code> from <code>unittest.mock</code> in case that&#39;s unclear."}, {"owner": {"reputation": 9806, "user_id": 382982, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/9ZaxF.jpg?s=128&g=1", "display_name": "pdoherty926", "link": "https://stackoverflow.com/users/382982/pdoherty926"}, "edited": false, "score": 0, "creation_date": 1572032904, "post_id": 48552812, "comment_id": 103448293, "body": "Thanks for the quick reply! After banging my head against this for a few hours, I&#39;m now thinking that my issue is probably the result of the attribute being set dynamically using <code>setattr</code> (legacy code -- not really sure why this is the case)."}, {"owner": {"reputation": 13858, "user_id": 9059420, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qaO9g.jpg?s=128&g=1", "display_name": "Darkonaut", "link": "https://stackoverflow.com/users/9059420/darkonaut"}, "reply_to_user": {"reputation": 9806, "user_id": 382982, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/9ZaxF.jpg?s=128&g=1", "display_name": "pdoherty926", "link": "https://stackoverflow.com/users/382982/pdoherty926"}, "edited": false, "score": 1, "creation_date": 1572034390, "post_id": 48552812, "comment_id": 103448836, "body": "@pdoherty926 Might be worth double-checking if <code>setattr</code> is really manipulating the class and not the instance, because your patch should also target the class."}, {"owner": {"reputation": 1263, "user_id": 1261573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dba96afc54466527538c4d6bb6d7f251?s=128&d=identicon&r=PG&f=1", "display_name": "Bj&#246;rn", "link": "https://stackoverflow.com/users/1261573/bj%c3%b6rn"}, "edited": false, "score": 0, "creation_date": 1576513241, "post_id": 48552812, "comment_id": 104914974, "body": "What about passing arguments to <code>MockClass.__init__()</code>?"}, {"owner": {"reputation": 13858, "user_id": 9059420, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qaO9g.jpg?s=128&g=1", "display_name": "Darkonaut", "link": "https://stackoverflow.com/users/9059420/darkonaut"}, "reply_to_user": {"reputation": 1263, "user_id": 1261573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dba96afc54466527538c4d6bb6d7f251?s=128&d=identicon&r=PG&f=1", "display_name": "Bj&#246;rn", "link": "https://stackoverflow.com/users/1261573/bj%c3%b6rn"}, "edited": false, "score": 1, "creation_date": 1576514594, "post_id": 48552812, "comment_id": 104915660, "body": "@Bj&#246;rn I&#39;m not sure if I understand what you mean. In the example <code>myFunc()</code>  <i>is</i> passing arguments <code>1, 2</code> to the mocked class."}], "tags": [], "owner": {"reputation": 13858, "user_id": 9059420, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qaO9g.jpg?s=128&g=1", "display_name": "Darkonaut", "link": "https://stackoverflow.com/users/9059420/darkonaut"}, "is_accepted": true, "score": 17, "last_activity_date": 1517439347, "creation_date": 1517439347, "answer_id": 48552812, "question_id": 48552458, "link": "https://stackoverflow.com/questions/48552458/how-do-i-mock-class-instance-attributes/48552812#48552812", "title": "How do I mock class instance attributes?", "body": "<p><code>return_value</code> is for callables, just write:</p>\n\n<pre><code>with patch('__main__.MyClass') as MockClass:\n   instance = MockClass.return_value\n   instance.a = 'test1'\n   instance.b = 'test2'\n   myFunc()\n\n# test1 test2\n</code></pre>\n\n<p>And you have to <code>patch</code> the class in the with-statement, note the capital letter of Class in <code>'__main__.MyClass'</code>.</p>\n"}], "owner": {"reputation": 2109, "user_id": 1008636, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ccc21c214b56f40fa518bedf7dd02819?s=128&d=identicon&r=PG", "display_name": "user1008636", "link": "https://stackoverflow.com/users/1008636/user1008636"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8536, "favorite_count": 2, "accepted_answer_id": 48552812, "answer_count": 1, "score": 7, "last_activity_date": 1517439347, "creation_date": 1517437509, "last_edit_date": 1517438009, "question_id": 48552458, "link": "https://stackoverflow.com/questions/48552458/how-do-i-mock-class-instance-attributes", "title": "How do I mock class instance attributes?", "body": "<pre><code>class MyClass:\n    def __init__ (a,b):\n           self.a = a\n           self.b = b\n\ndef myFunc():\n    myClass = MyClass(1,2)\n    print myClass.a, myClass.b\n</code></pre>\n\n<p>In my test, I want to run myFunc but inside myFunc I want myClass to return 'test1' and 'test2' as its a and b attributes.</p>\n\n<p>So I did this:</p>\n\n<pre><code>with patch('__main__.Myclass') as MockClass:\n   instance = MockClass.return_value\n   instance.a.return_value = 'test1'\n   instance.b.return_value = 'test2'\n   myFunc()\n</code></pre>\n\n<p>However, the result is <code>&lt;MagicMock name=MyClass().a' id='2938383'&gt;</code>..... Instead of simply test1 and test2.</p>\n\n<p>What am I doing wrong? What am I misunderstanding about how to use mock?</p>\n"}, {"tags": ["python", "pandas", "if-statement"], "comments": [{"owner": {"reputation": 8027, "user_id": 3282436, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e17caa3e07899b69539433130de1d420?s=128&d=identicon&r=PG&f=1", "display_name": "0x5453", "link": "https://stackoverflow.com/users/3282436/0x5453"}, "edited": false, "score": 1, "creation_date": 1517437350, "post_id": 48552406, "comment_id": 84101196, "body": "You can use <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.where.html\" rel=\"nofollow noreferrer\"><code>np.where</code></a> for this.  <code>file1[&#39;rcut&#39;] = np.where(file1[&#39;INT_STATUS&#39;].isin([&#39;B&#39;,&#39;C&#39;,&#39;F&#39;,&#39;H&#39;,&#39;P&#39;,&#39;R&#39;,&#39;&zwnj;&#8203;T&#39;,&#39;X&#39;,&#39;Z&#39;,&#39;8&#39;,&#39;9&#39;])&zwnj;&#8203;, &#39;01&#39;, &#39;00&#39;)</code>"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1517437443, "post_id": 48552406, "comment_id": 84101232, "body": "Can you give some example values for <code>file1[&#39;INT_STATUS&#39;]</code> since the name suggests values would not be letters."}, {"owner": {"reputation": 137, "user_id": 9078220, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9fd5695f3de2769cd38edddfa11abb75?s=128&d=identicon&r=PG&f=1", "display_name": "DPs", "link": "https://stackoverflow.com/users/9078220/dps"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1517437568, "post_id": 48552406, "comment_id": 84101296, "body": "@roganjosh Values are single alphabets or single digit numbers  [&#39;B&#39;,&#39;C&#39;,&#39;F&#39;,&#39;H&#39;,&#39;P&#39;,&#39;R&#39;,&#39;T&#39;,&#39;X&#39;,&#39;Z&#39;,&#39;8&#39;,&#39;9&#39;]"}, {"owner": {"reputation": 137, "user_id": 9078220, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9fd5695f3de2769cd38edddfa11abb75?s=128&d=identicon&r=PG&f=1", "display_name": "DPs", "link": "https://stackoverflow.com/users/9078220/dps"}, "reply_to_user": {"reputation": 8027, "user_id": 3282436, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e17caa3e07899b69539433130de1d420?s=128&d=identicon&r=PG&f=1", "display_name": "0x5453", "link": "https://stackoverflow.com/users/3282436/0x5453"}, "edited": false, "score": 0, "creation_date": 1517438131, "post_id": 48552406, "comment_id": 84101548, "body": "@0x5453 their are few more condition, Like elfi statements. Please see the edit"}], "answers": [{"comments": [{"owner": {"reputation": 137, "user_id": 9078220, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9fd5695f3de2769cd38edddfa11abb75?s=128&d=identicon&r=PG&f=1", "display_name": "DPs", "link": "https://stackoverflow.com/users/9078220/dps"}, "edited": false, "score": 0, "creation_date": 1517455794, "post_id": 48552544, "comment_id": 84106032, "body": "Your answer helped me when I have a single if statement, but I have continuous if and elif statement, How can I apply for that situation."}, {"owner": {"reputation": 32054, "user_id": 6287308, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NdmQp.jpg?s=128&g=1", "display_name": "Vaishali", "link": "https://stackoverflow.com/users/6287308/vaishali"}, "reply_to_user": {"reputation": 137, "user_id": 9078220, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9fd5695f3de2769cd38edddfa11abb75?s=128&d=identicon&r=PG&f=1", "display_name": "DPs", "link": "https://stackoverflow.com/users/9078220/dps"}, "edited": false, "score": 0, "creation_date": 1517459510, "post_id": 48552544, "comment_id": 84106872, "body": "Can you provide more details? What does the list look like for each condition?"}], "tags": [], "owner": {"reputation": 32054, "user_id": 6287308, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NdmQp.jpg?s=128&g=1", "display_name": "Vaishali", "link": "https://stackoverflow.com/users/6287308/vaishali"}, "is_accepted": false, "score": 3, "last_activity_date": 1517437961, "creation_date": 1517437961, "answer_id": 48552544, "question_id": 48552406, "link": "https://stackoverflow.com/questions/48552406/how-to-use-pandas-isin-with-if-statement/48552544#48552544", "title": "How to use pandas isin() with IF statement", "body": "<p>You can assign using loc</p>\n\n<pre><code>file1.loc[file1['INT_STATUS'].isin(l), 'rcut'] = '01'\n</code></pre>\n"}], "owner": {"reputation": 137, "user_id": 9078220, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9fd5695f3de2769cd38edddfa11abb75?s=128&d=identicon&r=PG&f=1", "display_name": "DPs", "link": "https://stackoverflow.com/users/9078220/dps"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2187, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1517458567, "creation_date": 1517437237, "last_edit_date": 1517458567, "question_id": 48552406, "link": "https://stackoverflow.com/questions/48552406/how-to-use-pandas-isin-with-if-statement", "title": "How to use pandas isin() with IF statement", "body": "<p>I have a column(INT_STATUS) in a data frame(file1) and INT_STATUS has values from A to Z and 1 to 9. If INT_STATUS columns has values in this list ['B','C','F','H','P','R','T','X','Z','8','9'] then I want to create a new column \"rcut\" and give a value '01' <strong>file1['rcut'] == '01'</strong>.</p>\n"}, {"tags": ["python", "selenium", "encryption", "passwords"], "comments": [{"owner": {"reputation": 8699, "user_id": 1726083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/757452f7cd7ba2347c667ef9298ceadb?s=128&d=identicon&r=PG", "display_name": "Daniel Farrell", "link": "https://stackoverflow.com/users/1726083/daniel-farrell"}, "edited": false, "score": 0, "creation_date": 1517438145, "post_id": 48552397, "comment_id": 84101551, "body": "You could encrypt it with a key that was removed, making decryption impossible.  But if the users need to be able to decrypt within the 24 hour window, and you can never rotate the password, what&#39;s the point?  I would probably have a Dev password in a few environment so I didn&#39;t have to give out a prod password I thought was sensitive and I couldn&#39;t easily rotate, make sure prod was consistent with dev, and have the humans debug in dev."}, {"owner": {"reputation": 13, "user_id": 3903548, "user_type": "registered", "profile_image": "https://graph.facebook.com/597862292/picture?type=large", "display_name": "John Ligda", "link": "https://stackoverflow.com/users/3903548/john-ligda"}, "reply_to_user": {"reputation": 8699, "user_id": 1726083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/757452f7cd7ba2347c667ef9298ceadb?s=128&d=identicon&r=PG", "display_name": "Daniel Farrell", "link": "https://stackoverflow.com/users/1726083/daniel-farrell"}, "edited": false, "score": 0, "creation_date": 1517439511, "post_id": 48552397, "comment_id": 84102119, "body": "A dev version of the site I log into to get the files is not possible. Nor can I change the password.  My hope is the decryption happens within the python script and is not visible to the developer. Is this an unreasonable expectation? Running the script gets you into the site, but there is no way to see or steal the password. Is it reasonable?"}, {"owner": {"reputation": 8643, "user_id": 1718554, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/n3jD1.jpg?s=128&g=1", "display_name": "Luke Joshua Park", "link": "https://stackoverflow.com/users/1718554/luke-joshua-park"}, "edited": false, "score": 2, "creation_date": 1517440409, "post_id": 48552397, "comment_id": 84102438, "body": "Not really reasonable, no.  If the script can /decrypt/derive/somehow-determine the password and someone other than you has the script, then they, by definition, also have the password.  This is an issue you need to solve server side, not client side."}, {"owner": {"reputation": 13, "user_id": 3903548, "user_type": "registered", "profile_image": "https://graph.facebook.com/597862292/picture?type=large", "display_name": "John Ligda", "link": "https://stackoverflow.com/users/3903548/john-ligda"}, "edited": false, "score": 0, "creation_date": 1517442038, "post_id": 48552397, "comment_id": 84102919, "body": "Thank you Luke, this makes sense now that I write it out."}, {"owner": {"reputation": 8699, "user_id": 1726083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/757452f7cd7ba2347c667ef9298ceadb?s=128&d=identicon&r=PG", "display_name": "Daniel Farrell", "link": "https://stackoverflow.com/users/1726083/daniel-farrell"}, "edited": false, "score": 0, "creation_date": 1517442420, "post_id": 48552397, "comment_id": 84103020, "body": "This is a long shot, but if you had a place to run the script but not access for the dev, they might be able to work on the script without being able to pull the password.  For example, put the password in aws ssm and have the script run in an ec2 instance on a got push.  The dev could still write the script to expose the password, but at least you&#39;d know it."}, {"owner": {"reputation": 13, "user_id": 3903548, "user_type": "registered", "profile_image": "https://graph.facebook.com/597862292/picture?type=large", "display_name": "John Ligda", "link": "https://stackoverflow.com/users/3903548/john-ligda"}, "edited": false, "score": 0, "creation_date": 1517443634, "post_id": 48552397, "comment_id": 84103339, "body": "Hey Dan, Sadly I can&#39;t follow. I&#39;m stuck in a Windows client server paradigm. I like what your getting at though. Some report showing me that the developer &#39;peeked&#39; as opposed to the script encrypting to do it&#39;s job. Seems helpful."}], "owner": {"reputation": 13, "user_id": 3903548, "user_type": "registered", "profile_image": "https://graph.facebook.com/597862292/picture?type=large", "display_name": "John Ligda", "link": "https://stackoverflow.com/users/3903548/john-ligda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 128, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1517440607, "creation_date": 1517437181, "last_edit_date": 1517440607, "question_id": 48552397, "link": "https://stackoverflow.com/questions/48552397/encrypted-password-file-which-expires-after-24-hours", "title": "encrypted password file which expires after 24 hours", "body": "<p>I am using python scripts to login to various sites to download sensitive data. Password credentials are passed to the scripts when they are run. Is it possible to have the password read from an encrypted file? Further, can that encrypted password file 'expire' after say 24 hours?</p>\n\n<ul>\n<li><p>USE Case 1: Deploy the script to production without hard coding the password in a batch file (windows/azure/python/SQL Server) In this case the encrypted password file is set to never expire.</p></li>\n<li><p>USE Case: I give an existing script to developer who must modify it against the production site (in this case the production site is the site where I download the sensitive data). I can NOT change my password at the target site. Assume the developer will not need to login to the site to do the work; when the developer runs python-selenium script, it logs in using the encrypted password file the developer will see enough to identify where it breaks then make the modifications.</p></li>\n</ul>\n"}, {"tags": ["python", "sorting", "dictionary"], "comments": [{"owner": {"reputation": 2421, "user_id": 4508178, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-vUogy15CTss/AAAAAAAAAAI/AAAAAAAAAAg/mD8TEjxHpt4/photo.jpg?sz=128", "display_name": "Derte Trdelnik", "link": "https://stackoverflow.com/users/4508178/derte-trdelnik"}, "edited": false, "score": 0, "creation_date": 1517437557, "post_id": 48552394, "comment_id": 84101288, "body": "dictionaries do not have an order, they are unsorted... use a different structure like a <code>list</code> python 3.7 guarantees the order is same as the insertion order, but I advise you to use OrderedDict instead to make it more clear"}, {"owner": {"reputation": 15086, "user_id": 3702377, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Ac4wz.jpg?s=128&g=1", "display_name": "Benyamin Jafari", "link": "https://stackoverflow.com/users/3702377/benyamin-jafari"}, "edited": false, "score": 1, "creation_date": 1517437722, "post_id": 48552394, "comment_id": 84101363, "body": "<b>This answer is here:</b> <a href=\"https://stackoverflow.com/questions/48262754/numpy-argsort-sorting-on-first-number/48263336#48263336\">Sorting dict</a>"}], "answers": [{"comments": [{"owner": {"reputation": 451, "user_id": 6693076, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/7fb115b9c2f4b9d0803e29d22bbd10da?s=128&d=identicon&r=PG&f=1", "display_name": "Maxime", "link": "https://stackoverflow.com/users/6693076/maxime"}, "edited": false, "score": 0, "creation_date": 1517439200, "post_id": 48552437, "comment_id": 84101977, "body": "Works great! Thank you all guys for all these solutions!"}], "tags": [], "owner": {"reputation": 32215, "user_id": 3789550, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8mGqv.gif?s=128&g=1", "display_name": "heemayl", "link": "https://stackoverflow.com/users/3789550/heemayl"}, "is_accepted": true, "score": 3, "last_activity_date": 1517437398, "creation_date": 1517437398, "answer_id": 48552437, "question_id": 48552394, "link": "https://stackoverflow.com/questions/48552394/sort-a-dict-based-on-numbered-keys/48552437#48552437", "title": "Sort a dict based on numbered keys", "body": "<p>Use <code>_</code> separated first element (<code>int</code>) as the sorting key:</p>\n\n<pre><code>sorted(myDict.items(), key=lambda x: int(x[0].split('_')[0]))\n</code></pre>\n\n<p>Use <code>collections.OrderedDict</code> to maintain the ordering:</p>\n\n<pre><code>collections.OrderedDict(sorted(myDict.items(), key=lambda x: int(x[0].split('_')[0])))\n</code></pre>\n\n<p><strong>Example:</strong></p>\n\n<pre><code>In [109]: sorted(myDict.items(), key=lambda x: int(x[0].split('_')[0]))\nOut[109]: \n[('10_str', 'value'),\n ('20_str', 'value'),\n ('80_str', 'value'),\n ('110_str', 'value'),\n ('120_str', 'value'),\n ('150_str', 'value')]\n\nIn [110]: collections.OrderedDict(sorted(myDict.items(), key=lambda x: int(x[0].split('_')[0])))\nOut[110]: \nOrderedDict([('10_str', 'value'),\n             ('20_str', 'value'),\n             ('80_str', 'value'),\n             ('110_str', 'value'),\n             ('120_str', 'value'),\n             ('150_str', 'value')])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "is_accepted": false, "score": 3, "last_activity_date": 1517437412, "creation_date": 1517437412, "answer_id": 48552441, "question_id": 48552394, "link": "https://stackoverflow.com/questions/48552394/sort-a-dict-based-on-numbered-keys/48552441#48552441", "title": "Sort a dict based on numbered keys", "body": "<pre><code>&gt;&gt;&gt; def key(s):\n...     n, s = s.split('_', 1)\n...     return int(n), s\n... \n&gt;&gt;&gt; from collections import OrderedDict\n&gt;&gt;&gt; OrderedDict([(k, myDict[k]) for k in sorted(myDict, key=key)])\nOrderedDict([('10_str', 'value'),\n             ('20_str', 'value'),\n             ('80_str', 'value'),\n             ('110_str', 'value'),\n             ('120_str', 'value'),\n             ('150_str', 'value')])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 56804, "user_id": 7326738, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VgOrW.jpg?s=128&g=1", "display_name": "Ajax1234", "link": "https://stackoverflow.com/users/7326738/ajax1234"}, "is_accepted": false, "score": 1, "last_activity_date": 1517437589, "creation_date": 1517437589, "answer_id": 48552473, "question_id": 48552394, "link": "https://stackoverflow.com/questions/48552394/sort-a-dict-based-on-numbered-keys/48552473#48552473", "title": "Sort a dict based on numbered keys", "body": "<p>You can try this:</p>\n\n<pre><code>import re\nsortedDict = {\n    '10_str' : 'value',\n    '110_str' : 'value',\n    '120_str' : 'value',\n    '150_str' : 'value',\n    '20_str' : 'value',\n    '80_str' : 'value'\n    }\n\nfinal_data = sorted(sortedDict.items(), key=lambda x:int(re.findall('^\\d+', x[0])[0]))\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>[('10_str', 'value'), ('20_str', 'value'), ('80_str', 'value'), ('110_str', 'value'), ('120_str', 'value'), ('150_str', 'value')]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 928, "user_id": 2260553, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/jkXDO.jpg?s=128&g=1", "display_name": "Asav Patel", "link": "https://stackoverflow.com/users/2260553/asav-patel"}, "is_accepted": false, "score": 2, "last_activity_date": 1517438179, "last_edit_date": 1517438179, "creation_date": 1517437623, "answer_id": 48552480, "question_id": 48552394, "link": "https://stackoverflow.com/questions/48552394/sort-a-dict-based-on-numbered-keys/48552480#48552480", "title": "Sort a dict based on numbered keys", "body": "<p>how about this? you can filter digits from the string and sort your dictionary based on that.</p>\n\n<p>this also <strong>doesn't</strong> require you to <strong>split</strong> using a particular character. just in case if your key structure changes this would still work.</p>\n\n<pre><code>sorted(myDict.items(), key=lambda t: int(filter(str.isdigit, t[0])))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "is_accepted": false, "score": 1, "last_activity_date": 1517437926, "creation_date": 1517437926, "answer_id": 48552535, "question_id": 48552394, "link": "https://stackoverflow.com/questions/48552394/sort-a-dict-based-on-numbered-keys/48552535#48552535", "title": "Sort a dict based on numbered keys", "body": "<p>Here is one way, assuming output is a list of tuples. Dictionaries are not considered to be ordered, although they may be in the future.</p>\n\n<p>Sort after converting to <code>int</code>, then add back the string formatting:</p>\n\n<pre><code>myLst = [(str(k)+'_str', v) for k, v in \\\n         sorted([(int(k.split('_')[0]), v) for k, v in myDict.items()])]\n\n# [('10_str', 'value'),\n#  ('20_str', 'value'),\n#  ('80_str', 'value'),\n#  ('110_str', 'value'),\n#  ('120_str', 'value'),\n#  ('150_str', 'value')]\n</code></pre>\n"}], "owner": {"reputation": 451, "user_id": 6693076, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/7fb115b9c2f4b9d0803e29d22bbd10da?s=128&d=identicon&r=PG&f=1", "display_name": "Maxime", "link": "https://stackoverflow.com/users/6693076/maxime"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 48552437, "answer_count": 5, "score": 1, "last_activity_date": 1517438179, "creation_date": 1517437157, "question_id": 48552394, "link": "https://stackoverflow.com/questions/48552394/sort-a-dict-based-on-numbered-keys", "title": "Sort a dict based on numbered keys", "body": "<p>I would like to sort a dict based on keys that have a pattern like \"[0-9]+_[A-Z]+\". I would like it to be ordered by ascending number.</p>\n\n<p>Here is where I am for the moment : </p>\n\n<pre><code>import operator\nmyDict = {\n        '120_str' : 'value',\n        '150_str' : 'value',\n        '110_str' : 'value',\n        '80_str' : 'value',\n        '10_str' : 'value',\n        '20_str' : 'value'\n        }\n\nsortedDict = sorted(myDict.items(), key=operator.itemgetter(0))\n</code></pre>\n\n<p>What I actually have : </p>\n\n<pre><code>sortedDict = {\n        '10_str' : 'value',\n        '110_str' : 'value',\n        '120_str' : 'value',\n        '150_str' : 'value',\n        '20_str' : 'value',\n        '80_str' : 'value'\n        }\n</code></pre>\n\n<p>What I would like to have : </p>\n\n<pre><code>sortedDict = {\n        '10_str' : 'value',\n        '20_str' : 'value',\n        '80_str' : 'value',\n        '110_str' : 'value',\n        '120_str' : 'value',\n        '150_str' : 'value'\n        }\n</code></pre>\n"}, {"tags": ["python", "json", "dictionary", "key"], "comments": [{"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 0, "creation_date": 1517437222, "post_id": 48552370, "comment_id": 84101139, "body": "What do you mean by &quot;no module being used&quot;?"}, {"owner": {"reputation": 1407, "user_id": 8228358, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/254c3da17123767403f9045fcaf41ee6?s=128&d=identicon&r=PG&f=1", "display_name": "Eleanor", "link": "https://stackoverflow.com/users/8228358/eleanor"}, "reply_to_user": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 0, "creation_date": 1517437363, "post_id": 48552370, "comment_id": 84101206, "body": "@wim Like no import collection(or other module)"}, {"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 0, "creation_date": 1517437499, "post_id": 48552370, "comment_id": 84101263, "body": "<code>collections</code> is built-in with any Python installation.  So, why can&#39;t you use it?"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 0, "creation_date": 1517437856, "post_id": 48552370, "comment_id": 84101429, "body": "@wim: because this is probably homework"}, {"owner": {"reputation": 1590, "user_id": 5428880, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/E8wTo.jpg?s=128&g=1", "display_name": "Suraj Kothari", "link": "https://stackoverflow.com/users/5428880/suraj-kothari"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1517438084, "post_id": 48552370, "comment_id": 84101527, "body": "@WillemVanOnsem homework? I never recieved h/w of this level without the use of import modules. Odd?"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 1590, "user_id": 5428880, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/E8wTo.jpg?s=128&g=1", "display_name": "Suraj Kothari", "link": "https://stackoverflow.com/users/5428880/suraj-kothari"}, "edited": false, "score": 0, "creation_date": 1517438269, "post_id": 48552370, "comment_id": 84101615, "body": "@SurajKothari: well I do not think this is JSON, it is simpy a Python dictionary, and this is simple recursion."}, {"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 0, "creation_date": 1517438373, "post_id": 48552370, "comment_id": 84101657, "body": "It&#39;s json, because look at the booleans.  But Eleanor must have parsed it before calling <code>myprint</code>."}, {"owner": {"reputation": 1590, "user_id": 5428880, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/E8wTo.jpg?s=128&g=1", "display_name": "Suraj Kothari", "link": "https://stackoverflow.com/users/5428880/suraj-kothari"}, "edited": false, "score": 0, "creation_date": 1517438471, "post_id": 48552370, "comment_id": 84101697, "body": "By the way, isn&#39;t anyone going to answer the post? I am no expert here and don&#39;t want to post a bad answer."}, {"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 0, "creation_date": 1517439439, "post_id": 48552370, "comment_id": 84102085, "body": "I don&#39;t answer questions with arbitrary restrictions, so I&#39;m still waiting on the answer to why other modules can&#39;t be used."}], "answers": [{"tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 0, "last_activity_date": 1517438600, "creation_date": 1517438600, "answer_id": 48552669, "question_id": 48552370, "link": "https://stackoverflow.com/questions/48552370/print-all-keys-from-a-dictionary-in-the-format-of-key1-key2-key3/48552669#48552669", "title": "Print all keys from a dictionary in the format of key1.key2.key3", "body": "<p>I think you make it complicated by updating <code>keys</code>. A string in Python is <em>immutable</em>. We can each time pass an extended key to the next recursive level, so with:</p>\n\n<pre><code>def myprint(d, keys = ''):\n    for k, v in d.items():\n        if isinstance(v, dict):\n            myprint(v, '{}{}.'.format(keys, k))\n        else:\n            print('{}{}'.format(keys, k))\n</code></pre>\n\n<p>This then yields:</p>\n\n<pre><code>&gt;&gt;&gt; myprint(d)\n$schema\nname\ntype\nproperties.id.type\nproperties.id.description\nproperties.id.required\nproperties.name.type\nproperties.name.description\nproperties.name.required\nproperties.price.type\nproperties.price.minimum\nproperties.price.required\nproperties.tags.type\nproperties.tags.items.type\nproperties.stock.type\nproperties.stock.properties.warehouse.type\nproperties.stock.properties.retail.type\n</code></pre>\n\n<p>The problem with your code was that you only restored the old <code>keys</code> value in case something was <em>not</em> a dictionary. So as a result if there were multiply subdictionaries, you started to concatenate the keys together.</p>\n"}, {"tags": [], "owner": {"reputation": 56804, "user_id": 7326738, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VgOrW.jpg?s=128&g=1", "display_name": "Ajax1234", "link": "https://stackoverflow.com/users/7326738/ajax1234"}, "is_accepted": false, "score": 1, "last_activity_date": 1517439526, "creation_date": 1517439526, "answer_id": 48552836, "question_id": 48552370, "link": "https://stackoverflow.com/questions/48552370/print-all-keys-from-a-dictionary-in-the-format-of-key1-key2-key3/48552836#48552836", "title": "Print all keys from a dictionary in the format of key1.key2.key3", "body": "<p>You can use recursion:</p>\n\n<pre><code>d = {'$schema': 'http://json-schema.org/draft-03/schema#', 'name': 'Product', 'type': 'object', 'properties': {'id': {'type': 'number', 'description': 'Product identifier', 'required': True}, 'name': {'type': 'string', 'description': 'Name of the product', 'required': True}, 'price': {'type': 'number', 'minimum': 0, 'required': True}, 'tags': {'type': 'array', 'items': {'type': 'string'}}, 'stock': {'type': 'object', 'properties': {'warehouse': {'type': 'number'}, 'retail': {'type': 'number'}}}}}\ndef display_keys(s, last=None):\n   for a, b in s.items():\n      if not isinstance(b, dict):\n          yield \"{}.{}\".format(last, a) if last else str(a)\n      else:\n         for h in display_keys(b, str(a) if not last else '{}.{}'.format(last, a)):\n           yield h\n\n print(list(display_keys(d)))\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>['$schema', 'name', 'type', 'properties.id.type', 'properties.id.description', 'properties.id.required', 'properties.name.type', 'properties.name.description', 'properties.name.required', 'properties.price.type', 'properties.price.minimum', 'properties.price.required', 'properties.tags.type', 'properties.tags.items.type', 'properties.stock.type', 'properties.stock.properties.warehouse.type', 'properties.stock.properties.retail.type']\n</code></pre>\n"}], "owner": {"reputation": 1407, "user_id": 8228358, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/254c3da17123767403f9045fcaf41ee6?s=128&d=identicon&r=PG&f=1", "display_name": "Eleanor", "link": "https://stackoverflow.com/users/8228358/eleanor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 196, "favorite_count": 0, "accepted_answer_id": 48552669, "answer_count": 2, "score": -1, "last_activity_date": 1517439526, "creation_date": 1517437050, "last_edit_date": 1517439302, "question_id": 48552370, "link": "https://stackoverflow.com/questions/48552370/print-all-keys-from-a-dictionary-in-the-format-of-key1-key2-key3", "title": "Print all keys from a dictionary in the format of key1.key2.key3", "body": "<p>Here is my dictionary (or JSON)</p>\n\n<pre><code>{\n    \"$schema\": \"http://json-schema.org/draft-03/schema#\",\n    \"name\": \"Product\",\n    \"type\": \"object\",\n    \"properties\": {\n        \"id\": {\n            \"type\": \"number\",\n            \"description\": \"Product identifier\",\n            \"required\": True\n        },\n        \"name\": {\n            \"type\": \"string\",\n            \"description\": \"Name of the product\",\n            \"required\": True\n        },\n        \"price\": {\n            \"type\": \"number\",\n            \"minimum\": 0,\n            \"required\": True\n        },\n        \"tags\": {\n            \"type\": \"array\",\n            \"items\": {\n                \"type\": \"string\"\n            }\n        },\n        \"stock\": {\n            \"type\": \"object\",\n            \"properties\": {\n                \"warehouse\": {\n                    \"type\": \"number\"\n                },\n                \"retail\": {\n                    \"type\": \"number\"\n                }\n            }\n        } \n    }\n}\n</code></pre>\n\n<p>I want to print all keys with this format <code>key1.key2.key3</code>. This is my code:</p>\n\n<pre><code>def myprint(d, keys = ''):\n    for k, v in d.items():\n        temp = keys\n        keys += k\n        if isinstance(v,dict):\n            keys += '.'\n            myprint(v,keys)\n        else:\n            print(keys)\n            keys = temp\n</code></pre>\n\n<p>Unfortunately, this failed where returns result like this:</p>\n\n<pre><code>$schema\ntype\nname\nproperties.stock.type\nproperties.stock.properties.warehouse.type\nproperties.stock.properties.warehouse.retail.type\nproperties.stock.price.minimum\nproperties.stock.price.type\nproperties.stock.price.required\nproperties.stock.price.tags.items.type\nproperties.stock.price.tags.items.type\nproperties.stock.price.tags.id.required\nproperties.stock.price.tags.id.type\nproperties.stock.price.tags.id.description\nproperties.stock.price.tags.id.name.required\nproperties.stock.price.tags.id.name.type\nproperties.stock.price.tags.id.name.description\n</code></pre>\n\n<p>As you see, the last several lines are wrong.</p>\n\n<p>Anyone have suggestions? Not only restrict from this script other methods are welcome, but no module being used.</p>\n"}, {"tags": ["python", "list", "merge", "referential"], "comments": [{"owner": {"reputation": 102109, "user_id": 1600898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/01377f8b31f24b0265854666b29d0c03?s=128&d=identicon&r=PG", "display_name": "user4815162342", "link": "https://stackoverflow.com/users/1600898/user4815162342"}, "edited": false, "score": 0, "creation_date": 1517437701, "post_id": 48552366, "comment_id": 84101355, "body": "I think you need <code>for name, version in zip(names, versions): ...</code>. Or <code>itertools.izip</code> instead of <code>zip</code> if you&#39;re on Python 2 and want to save some memory."}], "answers": [{"tags": [], "owner": {"reputation": 1128, "user_id": 2550940, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/188596724cddd5444ae629042981be73?s=128&d=identicon&r=PG", "display_name": "gunslingor", "link": "https://stackoverflow.com/users/2550940/gunslingor"}, "is_accepted": false, "score": 0, "last_activity_date": 1517492728, "creation_date": 1517492728, "answer_id": 48564250, "question_id": 48552366, "link": "https://stackoverflow.com/questions/48552366/how-to-combine-two-referential-lists-with-python/48564250#48564250", "title": "How to Combine Two Referential Lists With Python", "body": "<p>Just use the Counter... unless someone has a better idea:</p>\n\n<pre><code>tan_programs = []\nfor row in tan_output.programs:\n    names = row[\"Name\"].splitlines()\n    versions = row[\"Version\"].splitlines()\n    if(len(names) != len(versions)):\n        print(\"NAME and VERSION from tan_programs are not equal... Exiting\")\n        exit()\n    else:\n        i = 0\n        for name in names:\n            tan_programs.append({\"Hostname\": row[\"Hostname\"], \"Name\": name, \"Version\": versions[i]})\n            i += 1\n</code></pre>\n\n<p>Its actually very fast... the slow part is inserting 8 million records into a DB on another server over the network.</p>\n"}], "owner": {"reputation": 1128, "user_id": 2550940, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/188596724cddd5444ae629042981be73?s=128&d=identicon&r=PG", "display_name": "gunslingor", "link": "https://stackoverflow.com/users/2550940/gunslingor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1517492728, "creation_date": 1517437011, "last_edit_date": 1517437257, "question_id": 48552366, "link": "https://stackoverflow.com/questions/48552366/how-to-combine-two-referential-lists-with-python", "title": "How to Combine Two Referential Lists With Python", "body": "<p>I have stupid data coming out of a system, it needs to be flattened.</p>\n\n<p>The main csv has these columns: hostname, program_name, version_name</p>\n\n<p>However, there is only one row per host, so the last two fields look like this:</p>\n\n<p><strong>program_name contents</strong>:</p>\n\n<pre><code>Word\nExcel\nCognos\nMozilla\n</code></pre>\n\n<p><strong>version contents (not real, just for illustrative purposes)</strong>:</p>\n\n<pre><code>2.3.2\n121.3.0\nbuild 22\n</code></pre>\n\n<p>What's the best way to ensure things match up and to more concisely and pythonically do this.</p>\n\n<p>Here is what the real code looks like, the above is mainly for demo purposes:</p>\n\n<pre><code>for row in tan_output.programs:\n    names = row[\"Name\"].splitlines()\n    versions = row[\"Version\"].splitlines()\n    if(len(names) != len(versions)):\n        print(\"NAME and VERSION from tan_programs are not equal... Exiting\")\n        exit()\n    else:\n        for name in names:\n            #tan_programs.append({\"Count\": row[\"Count\"], \"Hostname\": row[\"Hostname\"], \"Name\": row[\"Name\"], \"Version\": row[\"Version\"]})\n</code></pre>\n\n<p>I am stuck on the bottom for loop because I feel like I should be looping thru both lists simultaneously instead of looping thru one, and then what I was going to do, use a counter to reference the second one and form the flattened data.</p>\n\n<p>PS, the file is 7 gigs... so the more efficient the better e.g. if I have to use the counter, I know from experience i += 1 is 100 times more efficient than i = i + 1</p>\n"}, {"tags": ["javascript", "python", "html"], "comments": [{"owner": {"reputation": 2613, "user_id": 9156061, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e69150721b719cef2eb990fc78bc9cc0?s=128&d=identicon&r=PG&f=1", "display_name": "mdatsev", "link": "https://stackoverflow.com/users/9156061/mdatsev"}, "edited": false, "score": 5, "creation_date": 1517437020, "post_id": 48552343, "comment_id": 84101046, "body": "Webpages are not allowed to run shell commands, as that would e very dangerous. Image going to a site that can run any command in your shell. What you would need is a server, that you send a request to and the server runs the command there."}, {"owner": {"reputation": 36576, "user_id": 2341603, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZTHIr.jpg?s=128&g=1", "display_name": "Obsidian Age", "link": "https://stackoverflow.com/users/2341603/obsidian-age"}, "edited": false, "score": 0, "creation_date": 1517437047, "post_id": 48552343, "comment_id": 84101058, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/47894506/running-python-scripts-from-html-button\">Running Python scripts from HTML button</a>"}, {"owner": {"reputation": 3744, "user_id": 2417483, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FYmKn.jpg?s=128&g=1", "display_name": "jeff", "link": "https://stackoverflow.com/users/2417483/jeff"}, "edited": false, "score": 0, "creation_date": 1517437078, "post_id": 48552343, "comment_id": 84101072, "body": "You&#39;ll need to use AJAX to call the script."}, {"owner": {"reputation": 332, "user_id": 8518708, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-NUkBxfpXSG0/AAAAAAAAAAI/AAAAAAAAAGQ/0SsNAYTSxVw/photo.jpg?sz=128", "display_name": "JakeTheSnake", "link": "https://stackoverflow.com/users/8518708/jakethesnake"}, "edited": false, "score": 0, "creation_date": 1517437084, "post_id": 48552343, "comment_id": 84101075, "body": "Just found <a href=\"https://stackoverflow.com/questions/15166941/create-html-button-to-run-python-script\">this</a> on another post, maybe it will help."}, {"owner": {"reputation": 33492, "user_id": 7212686, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Ey8ll.png?s=128&g=1", "display_name": "azro", "link": "https://stackoverflow.com/users/7212686/azro"}, "edited": false, "score": 3, "creation_date": 1517437092, "post_id": 48552343, "comment_id": 84101077, "body": "Body is after Head, not inside"}, {"owner": {"reputation": 4916, "user_id": 1507691, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/NRfxQ.jpg?s=128&g=1", "display_name": "Zak", "link": "https://stackoverflow.com/users/1507691/zak"}, "edited": false, "score": 0, "creation_date": 1517437109, "post_id": 48552343, "comment_id": 84101090, "body": "I would run a jQuery AJAX call to the script itself .. This script will have to reside in the public <code>html</code> directory and accessible by a browser.  <a href=\"http://api.jquery.com/jquery.ajax/\" rel=\"nofollow noreferrer\">api.jquery.com/jquery.ajax</a>"}, {"owner": {"reputation": 27290, "user_id": 16959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SlC7g.jpg?s=128&g=1", "display_name": "Jason Sperske", "link": "https://stackoverflow.com/users/16959/jason-sperske"}, "edited": false, "score": 0, "creation_date": 1517437125, "post_id": 48552343, "comment_id": 84101096, "body": "Doing this in HTML (and therefor in a browser) would be much more complicated than a basic UI built with something like WXPython <a href=\"https://www.wxpython.org/pages/overview/#hello-world\" rel=\"nofollow noreferrer\">wxpython.org/pages/overview/#hello-world</a>"}, {"owner": {"reputation": 2875, "user_id": 1911758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/958c51bae591f05d46c4db5911a14909?s=128&d=identicon&r=PG", "display_name": "BareNakedCoder", "link": "https://stackoverflow.com/users/1911758/barenakedcoder"}, "edited": false, "score": 0, "creation_date": 1517437183, "post_id": 48552343, "comment_id": 84101122, "body": "Windows, Linux, or Mac?"}, {"owner": {"reputation": 27290, "user_id": 16959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SlC7g.jpg?s=128&g=1", "display_name": "Jason Sperske", "link": "https://stackoverflow.com/users/16959/jason-sperske"}, "edited": false, "score": 0, "creation_date": 1517437189, "post_id": 48552343, "comment_id": 84101124, "body": "Wait, are you asking for an approach to run Python scripts locally or on a server remotely?"}, {"owner": {"reputation": 241, "user_id": 6815354, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh6.googleusercontent.com/-D5qpLWTp6pQ/AAAAAAAAAAI/AAAAAAAAAWc/vLxjFsC23fA/photo.jpg?sz=128", "display_name": "Justin Smith", "link": "https://stackoverflow.com/users/6815354/justin-smith"}, "reply_to_user": {"reputation": 27290, "user_id": 16959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SlC7g.jpg?s=128&g=1", "display_name": "Jason Sperske", "link": "https://stackoverflow.com/users/16959/jason-sperske"}, "edited": false, "score": 0, "creation_date": 1517437282, "post_id": 48552343, "comment_id": 84101158, "body": "@JasonSperske locally for now"}, {"owner": {"reputation": 27290, "user_id": 16959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SlC7g.jpg?s=128&g=1", "display_name": "Jason Sperske", "link": "https://stackoverflow.com/users/16959/jason-sperske"}, "edited": false, "score": 0, "creation_date": 1517437342, "post_id": 48552343, "comment_id": 84101190, "body": "Then a UI framework like wxPytyon would be a lot cleaner, I&#39;ll work on a simple example of this...one sec"}, {"owner": {"reputation": 2763, "user_id": 3491991, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/pmHXU.png?s=128&g=1", "display_name": "zelusp", "link": "https://stackoverflow.com/users/3491991/zelusp"}, "edited": false, "score": 0, "creation_date": 1517437834, "post_id": 48552343, "comment_id": 84101421, "body": "What do you ultimately want to accomplish with this? Because <a href=\"https://stackoverflow.com/a/47949174/3491991\">this</a> can do exactly what you want, just like a number of other frameworks (like the mentioned wxPython, Flask or Django). But each implementation varies in difficulty and aim..."}], "answers": [{"tags": [], "owner": {"reputation": 51, "user_id": 8890509, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39bc8a184fa5b23a8c0d65abb7b3d074?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Dennis", "link": "https://stackoverflow.com/users/8890509/michael-dennis"}, "is_accepted": false, "score": 2, "last_activity_date": 1517437312, "creation_date": 1517437312, "answer_id": 48552417, "question_id": 48552343, "link": "https://stackoverflow.com/questions/48552343/how-can-i-execute-a-python-script-from-an-html-button/48552417#48552417", "title": "How can I execute a python script from an html button?", "body": "<p>This would require knowledge of a backend website language.</p>\n\n<p>Fortunately, Python's <a href=\"http://flask.pocoo.org/\" rel=\"nofollow noreferrer\" title=\"Flask\">Flask Library</a> is a suitable backend language for the project at hand.</p>\n\n<p>Check out <a href=\"https://stackoverflow.com/questions/42601478/flask-calling-python-function-on-button-onclick-event\">this answer</a> from another thread.</p>\n"}, {"comments": [{"owner": {"reputation": 53, "user_id": 12394292, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206491642005089/picture?type=large", "display_name": "Mike Sandstrom", "link": "https://stackoverflow.com/users/12394292/mike-sandstrom"}, "edited": false, "score": 0, "creation_date": 1582696350, "post_id": 48552490, "comment_id": 106861866, "body": "this would mainly be dangerous if this is a script with a web server correct like flask or django? If this was just an simple html file and python file in the same directory running a script on a local machine... this would not be dangerous or am I missing something"}, {"owner": {"reputation": 4916, "user_id": 1507691, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/NRfxQ.jpg?s=128&g=1", "display_name": "Zak", "link": "https://stackoverflow.com/users/1507691/zak"}, "reply_to_user": {"reputation": 53, "user_id": 12394292, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206491642005089/picture?type=large", "display_name": "Mike Sandstrom", "link": "https://stackoverflow.com/users/12394292/mike-sandstrom"}, "edited": false, "score": 0, "creation_date": 1582732991, "post_id": 48552490, "comment_id": 106881066, "body": "The only security risk is that which is present for all server-side files.  If someone can access the file <i>directly</i> and manipulate inputs / injections to get a result that may display sensitive information like the server directory structure or tables within the database."}, {"owner": {"reputation": 4916, "user_id": 1507691, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/NRfxQ.jpg?s=128&g=1", "display_name": "Zak", "link": "https://stackoverflow.com/users/1507691/zak"}, "reply_to_user": {"reputation": 53, "user_id": 12394292, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206491642005089/picture?type=large", "display_name": "Mike Sandstrom", "link": "https://stackoverflow.com/users/12394292/mike-sandstrom"}, "edited": false, "score": 1, "creation_date": 1582733306, "post_id": 48552490, "comment_id": 106881256, "body": "--  It&#39;s the programming <b>within</b> the <code>.py</code> file that can be the security risk if not properly locked down.  Usually if it&#39;s already part of a framework, most of those security concerns are already addressed within the framework."}, {"owner": {"reputation": 53, "user_id": 12394292, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206491642005089/picture?type=large", "display_name": "Mike Sandstrom", "link": "https://stackoverflow.com/users/12394292/mike-sandstrom"}, "edited": false, "score": 0, "creation_date": 1582751594, "post_id": 48552490, "comment_id": 106889585, "body": "understood. so assuming the only parts involved in the project are a simple html file with a button and  a python script that runs onclick from within  a local machine...the biggest security concern is someone unauthorized getting access to that file."}, {"owner": {"reputation": 268, "user_id": 9684719, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-76-F-Cub7WE/AAAAAAAAAAI/AAAAAAAAAzY/UMqrjwv5ovc/photo.jpg?sz=128", "display_name": "Sebastian Paduano", "link": "https://stackoverflow.com/users/9684719/sebastian-paduano"}, "edited": false, "score": 0, "creation_date": 1614513775, "post_id": 48552490, "comment_id": 117403016, "body": "This does not work. I recieve a 405 error reponse. I think I need a backend solution in order to work, because calling a .py file from the frontend it doesnt work."}], "tags": [], "owner": {"reputation": 4916, "user_id": 1507691, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/NRfxQ.jpg?s=128&g=1", "display_name": "Zak", "link": "https://stackoverflow.com/users/1507691/zak"}, "is_accepted": false, "score": 11, "last_activity_date": 1517438017, "last_edit_date": 1517438017, "creation_date": 1517437678, "answer_id": 48552490, "question_id": 48552343, "link": "https://stackoverflow.com/questions/48552343/how-can-i-execute-a-python-script-from-an-html-button/48552490#48552490", "title": "How can I execute a python script from an html button?", "body": "<p>Since you asked for a way to complete this within an <code>HTML</code> page I am answering this.  I feel there is no need to mention the severe warnings and implications that would go along with this .. I trust you know the security of your <code>.py</code> script better than I do :-) </p>\n\n<p>I would use the <code>.ajax()</code> function in the <code>jQuery</code> library.  This will allow you to call your <code>Python</code> script <strong>as long as the script is in the publicly accessible html directory</strong>  ...  That said this is the part where I tell you to heed security precautions ... </p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n  &lt;head&gt;    \n  &lt;/head&gt;\n  &lt;body&gt;\n    &lt;input type=\"button\" id='script' name=\"scriptbutton\" value=\" Run Script \" onclick=\"goPython()\"&gt;\n\n    &lt;script src=\"http://code.jquery.com/jquery-3.3.1.min.js\" integrity=\"sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=\" crossorigin=\"anonymous\"&gt;&lt;/script&gt;\n\n    &lt;script&gt;\n        function goPython(){\n            $.ajax({\n              url: \"MYSCRIPT.py\",\n             context: document.body\n            }).done(function() {\n             alert('finished python script');;\n            });\n        }\n    &lt;/script&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>In addition .. It's worth noting that your script is going to have to have proper permissions for, say, the <code>www-data</code> user to be able to run it ... A <code>chmod</code>, and/or a <code>chown</code> may be necessary.</p>\n"}, {"tags": [], "owner": {"reputation": 27290, "user_id": 16959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SlC7g.jpg?s=128&g=1", "display_name": "Jason Sperske", "link": "https://stackoverflow.com/users/16959/jason-sperske"}, "is_accepted": false, "score": -1, "last_activity_date": 1517437884, "creation_date": 1517437884, "answer_id": 48552528, "question_id": 48552343, "link": "https://stackoverflow.com/questions/48552343/how-can-i-execute-a-python-script-from-an-html-button/48552528#48552528", "title": "How can I execute a python script from an html button?", "body": "<p>Using a UI Framework would be a lot cleaner (and involve fewer components).  Here is an example using <a href=\"https://www.wxpython.org/\" rel=\"nofollow noreferrer\">wxPython</a>:</p>\n\n<pre><code>import wx\nimport os\nclass MyForm(wx.Frame):\n    def __init__(self):\n        wx.Frame.__init__(self, None, wx.ID_ANY, \"Launch Scripts\")\n        panel = wx.Panel(self, wx.ID_ANY)\n        sizer = wx.BoxSizer(wx.VERTICAL)\n        buttonA = wx.Button(panel, id=wx.ID_ANY, label=\"App A\", name=\"MYSCRIPT\")\n        buttonB = wx.Button(panel, id=wx.ID_ANY, label=\"App B\", name=\"MYOtherSCRIPT\")\n        buttonC = wx.Button(panel, id=wx.ID_ANY, label=\"App C\", name=\"SomeDifferentScript\")\n        buttons = [buttonA, buttonB, buttonC]\n\n        for button in buttons:\n            self.buildButtons(button, sizer)\n\n        panel.SetSizer(sizer)\n\n    def buildButtons(self, btn, sizer):\n        btn.Bind(wx.EVT_BUTTON, self.onButton)\n        sizer.Add(btn, 0, wx.ALL, 5)\n\n    def onButton(self, event):\n        \"\"\"\n        This method is fired when its corresponding button is pressed, taking the script from it's name\n        \"\"\"\n        button = event.GetEventObject()\n\n        os.system('python {}.py'.format(button.GetName()))\n\n        button_id = event.GetId()\n        button_by_id = self.FindWindowById(button_id)\n        print \"The button you pressed was labeled: \" + button_by_id.GetLabel()\n        print \"The button's name is \" + button_by_id.GetName()\n\n# Run the program\nif __name__ == \"__main__\":\n    app = wx.App(False)\n    frame = MyForm()\n    frame.Show()\n    app.MainLoop()\n</code></pre>\n\n<p>I haven't tested this yet, and I'm sure there are cleaner ways of launching a python script form a python script, but the idea I think will still hold. Good luck!</p>\n"}, {"tags": [], "owner": {"reputation": 320, "user_id": 4802603, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-pJZFCx-Pq-g/AAAAAAAAAAI/AAAAAAAAAK4/TwjO0FwhjTY/photo.jpg?sz=128", "display_name": "Mieszko", "link": "https://stackoverflow.com/users/4802603/mieszko"}, "is_accepted": false, "score": 0, "last_activity_date": 1517438467, "last_edit_date": 1517438467, "creation_date": 1517438035, "answer_id": 48552560, "question_id": 48552343, "link": "https://stackoverflow.com/questions/48552343/how-can-i-execute-a-python-script-from-an-html-button/48552560#48552560", "title": "How can I execute a python script from an html button?", "body": "<p>It is discouraged and problematic yet doable. What you need is a custom URI scheme ie. You need to register and configure it on your machine and then hook an url with that scheme to the button. </p>\n\n<p>URI scheme is the part before <code>://</code> in an URI. Standard URI schemes are for example <code>https</code> or <code>ftp</code> or <code>file</code>. But there are custom like fx. <code>mongodb</code>. What you need is your own e.g. <code>mypythonscript</code>. It can be configured to exec the script or even just python with the script name in the params etc. It is of course a tradeoff between flexibility and security.</p>\n\n<p>You can find more details in the links:</p>\n\n<p><a href=\"https://support.shotgunsoftware.com/hc/en-us/articles/219031308-Launching-applications-using-custom-browser-protocols\" rel=\"nofollow noreferrer\">https://support.shotgunsoftware.com/hc/en-us/articles/219031308-Launching-applications-using-custom-browser-protocols</a> </p>\n\n<p><a href=\"https://msdn.microsoft.com/en-us/library/aa767914(v=vs.85).aspx\" rel=\"nofollow noreferrer\">https://msdn.microsoft.com/en-us/library/aa767914(v=vs.85).aspx</a></p>\n\n<p><strong>EDIT:</strong> Added more details about what an custom scheme is.</p>\n"}, {"tags": [], "owner": {"reputation": 2875, "user_id": 1911758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/958c51bae591f05d46c4db5911a14909?s=128&d=identicon&r=PG", "display_name": "BareNakedCoder", "link": "https://stackoverflow.com/users/1911758/barenakedcoder"}, "is_accepted": false, "score": 0, "last_activity_date": 1517438478, "last_edit_date": 1517438478, "creation_date": 1517438147, "answer_id": 48552581, "question_id": 48552343, "link": "https://stackoverflow.com/questions/48552343/how-can-i-execute-a-python-script-from-an-html-button/48552581#48552581", "title": "How can I execute a python script from an html button?", "body": "<p>I've done exactly this on Windows.  I have a local .html page that I use as a \"dashboard\" for all my current work.  In addition to the usual links, I've been able to add clickable links that open MS-Word documents, Excel spreadsheets, open my IDE, ssh to servers, etc.  It is a little involved but here's how I did it ...</p>\n\n<p>First, update the Windows registry.  Your browser handles usual protocols like http, https, ftp.  You can define your own protocol and a handler to be invoked when a link of that protocol-type is clicked.  Here's the config (run with <code>regedit</code>)</p>\n\n<pre><code>[HKEY_CLASSES_ROOT\\mydb]\n@=\"URL:MyDB Document\"\n\"URL Protocol\"=\"\"\n\n[HKEY_CLASSES_ROOT\\mydb\\shell]\n@=\"open\"\n\n[HKEY_CLASSES_ROOT\\mydb\\shell\\open]\n\n[HKEY_CLASSES_ROOT\\mydb\\shell\\open\\command]\n@=\"wscript C:\\_opt\\Dashboard\\Dashboard.vbs \\\"%1\\\"\"\n</code></pre>\n\n<p>With this, when I have a link like <code>&lt;a href=\"mydb:open:ProjectX.docx\"&gt;ProjectX&lt;/a&gt;</code>, clicking it will invoke <code>C:\\_opt\\Dashboard\\Dashboard.vbs</code> passing it the command line parameter <code>open:ProjectX.docx</code>.  My VBS code looks at this parameter and does the necessary thing (in this case, because it ends in .docx, it invokes MS-Word with <code>ProjectX.docx</code> as the parameter to it.</p>\n\n<p>Now, I've written my handler in VBS only because it is very old code (like 15+ years).  I haven't tried it, but you might be able to write a Python handler, <code>Dashboard.py</code>, instead.  I'll leave it up to you to write your own handler.  For your scripts, your link could be <code>href=\"mydb:runpy:whatever.py\"</code> (the <code>runpy:</code> prefix tells your handle to run with Python).</p>\n"}, {"tags": [], "owner": {"reputation": 585, "user_id": 8200791, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjZxU.jpg?s=128&g=1", "display_name": "Phok Chanrithisak", "link": "https://stackoverflow.com/users/8200791/phok-chanrithisak"}, "is_accepted": false, "score": 13, "last_activity_date": 1545912711, "creation_date": 1545912711, "answer_id": 53944884, "question_id": 48552343, "link": "https://stackoverflow.com/questions/48552343/how-can-i-execute-a-python-script-from-an-html-button/53944884#53944884", "title": "How can I execute a python script from an html button?", "body": "<p>There are various ways to make it done, very simple technique with security peace in mind, here might help you <br /><br /></p>\n\n<hr>\n\n<p><strong>1.</strong> First you need to install <strong>Flask</strong> <br />\n<code>pip install flask</code> <br />in your command prompt, which is a python microframework, don't be afraid that you need to have another prior knowledge to learn that, it's really simple and just a few line of code.\n<em>If you wish you learn Flask quickly for complete novice here is the tutorial that I also learn from <a href=\"https://www.youtube.com/playlist?list=PL6gx4Cwl9DGDi9F_slcQK7knjtO8TUvUs\" rel=\"noreferrer\">Flask Tutorial for beginner (YouTube)</a></em><br /><br />\n2.Create a new folder <br />\n- 1st file will be \n<strong>server.py</strong></p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>from flask import Flask, render_template\r\napp = Flask(__name__)\r\n\r\n@app.route('/')\r\ndef index():\r\n  return render_template('index.html')\r\n\r\n@app.route('/my-link/')\r\ndef my_link():\r\n  print ('I got clicked!')\r\n\r\n  return 'Click.'\r\n\r\nif __name__ == '__main__':\r\n  app.run(debug=True)</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>-2nd create another subfolder inside previous folder and name it as <strong>templates</strong> file will be your html file<br />\n<strong>index.html</strong></p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;!doctype html&gt;\r\n\r\n\r\n&lt;head&gt;&lt;title&gt;Test&lt;/title&gt; \r\n    &lt;meta charset=utf-8&gt; &lt;/head&gt;\r\n    &lt;body&gt;\r\n        &lt;h1&gt;My Website&lt;/h1&gt;\r\n        &lt;form action=\"/my-link/\"&gt;\r\n            &lt;input type=\"submit\" value=\"Click me\" /&gt;\r\n        &lt;/form&gt;\r\n        \r\n        &lt;button&gt; &lt;a href=\"/my-link/\"&gt;Click me&lt;/a&gt;&lt;/button&gt;\r\n\r\n    &lt;/body&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p><strong>3.</strong>. To run, open command prompt to the <em>New folder</em> directory, type <code>python server.py</code> to run the script, then go to browser type <code>localhost:5000</code>, then you will see button. You can click and route to destination script file you created.<br/><br/></p>\n\n<p>Hope this helpful. thank you. </p>\n"}, {"tags": [], "owner": {"reputation": 85, "user_id": 7206756, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/19772d61682de88f8ffad5aad27b9dd2?s=128&d=identicon&r=PG", "display_name": "kavin", "link": "https://stackoverflow.com/users/7206756/kavin"}, "is_accepted": false, "score": 1, "last_activity_date": 1552030071, "creation_date": 1552030071, "answer_id": 55058578, "question_id": 48552343, "link": "https://stackoverflow.com/questions/48552343/how-can-i-execute-a-python-script-from-an-html-button/55058578#55058578", "title": "How can I execute a python script from an html button?", "body": "<p>Best way is to Use a Python Web Frame Work you can choose <strong>Django/Flask</strong>. I will suggest you to Use <strong>Django</strong> because it's more powerful. \nHere is Step by guide to get complete your task :</p>\n\n<pre><code>pip install django\ndjango-admin createproject buttonpython\n</code></pre>\n\n<p>then you have to create a file name views.py in buttonpython directory.</p>\n\n<p>write below code in views.py:</p>\n\n<pre><code>from django.http import HttpResponse\n\ndef sample(request):\n    #your python script code\n    output=code output\n    return HttpResponse(output)\n</code></pre>\n\n<p>Once done navigate to urls.py and add this stanza</p>\n\n<pre><code>from . import views\n\npath('', include('blog.urls')),\n</code></pre>\n\n<p>Now go to parent directory and execute manage.py</p>\n\n<pre><code>python manage.py runserver 127.0.0.1:8001\n</code></pre>\n\n<p>Step by Step Guide in Detail: <a href=\"https://www.youtube.com/watch?v=ERMRVORGvZM\" rel=\"nofollow noreferrer\">Run Python script on clicking HTML button</a></p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 13247146, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9KfEh.png?s=128&g=1", "display_name": "Zax71", "link": "https://stackoverflow.com/users/13247146/zax71"}, "is_accepted": false, "score": 0, "last_activity_date": 1586252543, "creation_date": 1586252543, "answer_id": 61077082, "question_id": 48552343, "link": "https://stackoverflow.com/questions/48552343/how-can-i-execute-a-python-script-from-an-html-button/61077082#61077082", "title": "How can I execute a python script from an html button?", "body": "<p>you could use text files to trasfer the data using PHP and reading the text file in python</p>\n"}], "owner": {"reputation": 241, "user_id": 6815354, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh6.googleusercontent.com/-D5qpLWTp6pQ/AAAAAAAAAAI/AAAAAAAAAWc/vLxjFsC23fA/photo.jpg?sz=128", "display_name": "Justin Smith", "link": "https://stackoverflow.com/users/6815354/justin-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140348, "favorite_count": 17, "answer_count": 8, "score": 18, "last_activity_date": 1613927250, "creation_date": 1517436881, "last_edit_date": 1613927250, "question_id": 48552343, "link": "https://stackoverflow.com/questions/48552343/how-can-i-execute-a-python-script-from-an-html-button", "title": "How can I execute a python script from an html button?", "body": "<p>I have a number of python scripts that I have saved on my computer, out of curiosity I have created a html file that just has one button. Instead on going into the terminal and running <code>python &lt;path to script&gt;</code>, I would like to make it so when that button is clicked, is kicks off one of my python scripts. Is this possible/how can it be done?</p>\n<p>for example purposes we'll call the script to be run <code>MYSCRIPT.py</code>. I've done a little research but have come up with nothing promising. I'm aware the following code is incorrect but just for a starting point here is my html file.</p>\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n    &lt;body&gt;\n        &lt;head&gt;\n\n           &lt;input type=&quot;button&quot; id='script' name=&quot;scriptbutton&quot; value=&quot; Run Script &quot; onclick=&quot;exec('python MYSCRIPT.py');&quot;&gt;\n\n        &lt;/head&gt;\n    &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n"}, {"tags": ["python", "google-cloud-platform", "speech-recognition", "google-speech-api", "transcription"], "answers": [{"comments": [{"owner": {"reputation": 812, "user_id": 890154, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Yaygv.jpg?s=128&g=1", "display_name": "lCapp", "link": "https://stackoverflow.com/users/890154/lcapp"}, "edited": false, "score": 0, "creation_date": 1517552765, "post_id": 48560715, "comment_id": 84150100, "body": "4kHz maybe too low, since many ASR systems are trained with a broader band (eg using 16kHz sample rate, so 8kHz bandwidth - as stated in the docs)"}], "tags": [], "owner": {"reputation": 307, "user_id": 9192468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7c9e780929ad37be9449e167b21b490?s=128&d=identicon&r=PG&f=1", "display_name": "Ggrimaldo", "link": "https://stackoverflow.com/users/9192468/ggrimaldo"}, "is_accepted": true, "score": 2, "last_activity_date": 1517481508, "creation_date": 1517481508, "answer_id": 48560715, "question_id": 48552321, "link": "https://stackoverflow.com/questions/48552321/google-speechml-api-doesnt-work-well-with-noisy-audio/48560715#48560715", "title": "Google SpeechML API doesnt work well with noisy audio", "body": "<p>So far I know the quality of the Speech API results of the audio will always be heavily dependent on the external noise and the overall quality of the recording. The only ways I can think about to substantially improve your results are:  </p>\n\n<ol>\n<li>Reduce the noise levels at the source if possible (at the recording)</li>\n<li>Digitally filter the noise out before the processing, removing frequency bands not used by human speech. (upwards 4 KHz is standard for telephony)</li>\n<li>Use a non compressed audio file preferably (i.e wav), to avoid loss of quality in the compression (as it happens with mp3.)</li>\n</ol>\n\n<p>You might find additional tips to improve the processing in the official <a href=\"https://cloud.google.com/speech/docs/best-practices\" rel=\"nofollow noreferrer\">documentation</a></p>\n"}], "owner": {"reputation": 27, "user_id": 9296960, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-B2N_-2kA21w/AAAAAAAAAAI/AAAAAAAAAAc/g6VxlN8zTCs/photo.jpg?sz=128", "display_name": "Sreekar Reddy Jammula", "link": "https://stackoverflow.com/users/9296960/sreekar-reddy-jammula"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 469, "favorite_count": 0, "accepted_answer_id": 48560715, "answer_count": 1, "score": 1, "last_activity_date": 1517481508, "creation_date": 1517436781, "question_id": 48552321, "link": "https://stackoverflow.com/questions/48552321/google-speechml-api-doesnt-work-well-with-noisy-audio", "title": "Google SpeechML API doesnt work well with noisy audio", "body": "<p>I have been trying to develop a python script to transcribe audio from noisy audio files. My specific use case is to get noisy audio parts transcribed correctly. \nWhen i send the files to SpeechML API for processing, the responses have either omitted or incorrect responses for noisy audio . \nIs there any approach to solve this? \nI have tried couple of  tools like sox, speech-recognition wrapper but they didn't help \nBelow is the code i am using</p>\n\n<pre><code>def transcribe_gcs(gcs_uri):\n\"\"\"Asynchronously transcribes the audio file specified by the gcs_uri.\"\"\"\nfrom google.cloud import speech\nfrom google.cloud.speech import enums\nfrom google.cloud.speech import types\n\nclient = speech.SpeechClient()\naudio = types.RecognitionAudio(uri=gcs_uri)\nconfig = types.RecognitionConfig(\n         encoding=enums.RecognitionConfig.AudioEncoding.FLAC,\n         sample_rate_hertz=48000,\n         language_code='en-US')\n\noperation = client.long_running_recognize(config, audio)\nprint('Waiting for operation to complete...')\nresponse = operation.result(timeout=600)\n# Each result is for a consecutive portion of the audio. Iterate through\n# them to get the transcripts for the entire audio file.\nfor result in response.results:\n# The first alternative is the most likely one for this portion.\n    print('Transcript: {}'.format(result.alternatives[0].transcript))\n    print('Confidence: {}'.format(result.alternatives[0].confidence))\n# [END def_transcribe_gcs]\n</code></pre>\n\n<p>if <strong>name</strong> == '<strong>main</strong>':</p>\n\n<pre><code>gcs_uri=\"gs://speechmldemo/outputclear.flac\"   \ntranscribe_gcs(gcs_uri)\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "edited": false, "score": 0, "creation_date": 1517436830, "post_id": 48552288, "comment_id": 84100949, "body": "The code doesn&#39;t do what you described - it crashes with a <code>NameError</code>."}, {"owner": {"reputation": 31, "user_id": 8456310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd5dfb1c799016eae990aa694352ed03?s=128&d=identicon&r=PG&f=1", "display_name": "Leonard Hoss", "link": "https://stackoverflow.com/users/8456310/leonard-hoss"}, "reply_to_user": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "edited": false, "score": 0, "creation_date": 1517437079, "post_id": 48552288, "comment_id": 84101073, "body": "I edited so it&#39;s formated just like I ran it here. It works like I described. I get multiple entries of the second line (&quot;1,864,833,022,054,360&quot;)."}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 8456310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd5dfb1c799016eae990aa694352ed03?s=128&d=identicon&r=PG&f=1", "display_name": "Leonard Hoss", "link": "https://stackoverflow.com/users/8456310/leonard-hoss"}, "edited": false, "score": 0, "creation_date": 1517437198, "post_id": 48552373, "comment_id": 84101127, "body": "New error: &quot;TypeError: expected string or bytes-like object&quot;. I guess it&#39;s progress!"}, {"owner": {"reputation": 1590, "user_id": 5428880, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/E8wTo.jpg?s=128&g=1", "display_name": "Suraj Kothari", "link": "https://stackoverflow.com/users/5428880/suraj-kothari"}, "edited": false, "score": 0, "creation_date": 1517437475, "post_id": 48552373, "comment_id": 84101248, "body": "I think this works as this uses re.findall(). Kinda forgot about this method."}, {"owner": {"reputation": 1590, "user_id": 5428880, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/E8wTo.jpg?s=128&g=1", "display_name": "Suraj Kothari", "link": "https://stackoverflow.com/users/5428880/suraj-kothari"}, "edited": false, "score": 0, "creation_date": 1517437692, "post_id": 48552373, "comment_id": 84101350, "body": "Oh sorry. Yes it was meant to be searching through the counter &#39;i&#39; not &#39;row&#39;. Tested this just now."}, {"owner": {"reputation": 31, "user_id": 8456310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd5dfb1c799016eae990aa694352ed03?s=128&d=identicon&r=PG&f=1", "display_name": "Leonard Hoss", "link": "https://stackoverflow.com/users/8456310/leonard-hoss"}, "edited": false, "score": 0, "creation_date": 1517440669, "post_id": 48552373, "comment_id": 84102510, "body": "Thanks @Suraj Kothari. This is the closest I got. It is returning an empty line after every handle instead of just the handle. Is there any way to remove these empty lines?"}, {"owner": {"reputation": 4231, "user_id": 2304092, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/GPILT.jpg?s=128&g=1", "display_name": "OBu", "link": "https://stackoverflow.com/users/2304092/obu"}, "edited": false, "score": 0, "creation_date": 1517475126, "post_id": 48552373, "comment_id": 84112999, "body": "<code>for i in row</code> iterates through all characters in the row string - this is not what you want... If you want to stick to loops, use the second part of my code above."}], "tags": [], "owner": {"reputation": 1590, "user_id": 5428880, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/E8wTo.jpg?s=128&g=1", "display_name": "Suraj Kothari", "link": "https://stackoverflow.com/users/5428880/suraj-kothari"}, "is_accepted": false, "score": 0, "last_activity_date": 1517437662, "last_edit_date": 1517437662, "creation_date": 1517437067, "answer_id": 48552373, "question_id": 48552288, "link": "https://stackoverflow.com/questions/48552288/extracting-substrings-from-csv-table/48552373#48552373", "title": "Extracting substrings from CSV table", "body": "<p>Firstly the \"@\" symbol is a symbol. Therefore the <code>if i.isalpha():</code> will return False as it is NOT a alpha character. Your re.split() won't even be called.</p>\n\n<p>Try this:</p>\n\n<pre><code>import csv\nimport re\nwith open('C:\\\\Users\\\\input.csv', 'rt',  encoding='UTF-8') as inp:\n    read = csv.reader(inp)\n    for row in read:\n        for i in row:\n            stringafterword = re.findall('@.*',i)\n        print(stringafterword)\n</code></pre>\n\n<p>Here I have removed the if-condition and changed the re.split() index to 1 as that is the section you want.</p>\n\n<p>Hope it works.</p>\n"}, {"comments": [{"owner": {"reputation": 8191, "user_id": 8881141, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/C3ydX.jpg?s=128&g=1", "display_name": "Mr. T", "link": "https://stackoverflow.com/users/8881141/mr-t"}, "edited": false, "score": 0, "creation_date": 1517437405, "post_id": 48552400, "comment_id": 84101218, "body": "Another <code>TypeError: expected string or bytes-like object</code>"}, {"owner": {"reputation": 4231, "user_id": 2304092, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/GPILT.jpg?s=128&g=1", "display_name": "OBu", "link": "https://stackoverflow.com/users/2304092/obu"}, "reply_to_user": {"reputation": 30485, "user_id": 1222951, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/s64JD.png?s=128&g=1", "display_name": "Aran-Fey", "link": "https://stackoverflow.com/users/1222951/aran-fey"}, "edited": false, "score": 0, "creation_date": 1517437667, "post_id": 48552400, "comment_id": 84101341, "body": "@rawing: <code>read</code>was the variable name used by the OP. I made it a working example..."}, {"owner": {"reputation": 1590, "user_id": 5428880, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/E8wTo.jpg?s=128&g=1", "display_name": "Suraj Kothari", "link": "https://stackoverflow.com/users/5428880/suraj-kothari"}, "edited": false, "score": 0, "creation_date": 1517437774, "post_id": 48552400, "comment_id": 84101390, "body": "Show the code with the OP version. It helps the OP to incorparate the changes."}], "tags": [], "owner": {"reputation": 4231, "user_id": 2304092, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/GPILT.jpg?s=128&g=1", "display_name": "OBu", "link": "https://stackoverflow.com/users/2304092/obu"}, "is_accepted": false, "score": 1, "last_activity_date": 1517438754, "last_edit_date": 1517438754, "creation_date": 1517437198, "answer_id": 48552400, "question_id": 48552288, "link": "https://stackoverflow.com/questions/48552288/extracting-substrings-from-csv-table/48552400#48552400", "title": "Extracting substrings from CSV table", "body": "<p>If you are willing to use <code>re</code>, you can get a list of strings in one line:</p>\n\n<pre><code>import re\n\n#content string added to make it a working example\ncontent = \"\"\"KATY PERRY@katyperry\n1,084,149,282,038,820\nJustin Bieber@justinbieber\n10,527,300,631,674,900,000\nBarack Obama@BarackObama\n9,959,243,562,511,110,000\"\"\"\n\n#solution using 're':\nm = re.findall('@.*', content)\nprint(m)\n\n#option without 're' but using string.find() based on your loop:\nfor row in content.split():\n    pos_of_at = row.find('@')\n    if pos_of_at &gt; -1: #-1 indicates \"substring not found\"\n        print(row[pos_of_at:])\n</code></pre>\n\n<p>You should of course replace the <code>content</code>string with the file content.</p>\n"}], "owner": {"reputation": 31, "user_id": 8456310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd5dfb1c799016eae990aa694352ed03?s=128&d=identicon&r=PG&f=1", "display_name": "Leonard Hoss", "link": "https://stackoverflow.com/users/8456310/leonard-hoss"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 484, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1517438754, "creation_date": 1517436632, "last_edit_date": 1517437026, "question_id": 48552288, "link": "https://stackoverflow.com/questions/48552288/extracting-substrings-from-csv-table", "title": "Extracting substrings from CSV table", "body": "<p>I'm trying to clean up the data from a csv table that looks like this:</p>\n\n<pre><code>KATY PERRY@katyperry\n1,084,149,282,038,820\nJustin Bieber@justinbieber\n10,527,300,631,674,900,000\nBarack Obama@BarackObama\n9,959,243,562,511,110,000\n</code></pre>\n\n<p>I want to extract just the \"@\" handles, such as:</p>\n\n<pre><code>@katyperry\n@justinbieber\n@BarackObama\n</code></pre>\n\n<p>This is the code I've put togheter, but all it does is repeat the second line of the table over and over:</p>\n\n<pre><code>import csv\nimport re\nwith open('C:\\\\Users\\\\TK\\\\Steemit\\\\Scripts\\\\twitter.csv', 'rt',  encoding='UTF-8') as inp:\n    read = csv.reader(inp)\n    for row in read:\n        for i in row:\n            if i.isalpha():\n                stringafterword = re.split('\\\\@\\\\',row)[-1]\n        print(stringafterword)\n</code></pre>\n"}, {"tags": ["python", "selenium"], "comments": [{"owner": {"reputation": 12211, "user_id": 5411817, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Z0g8T.png?s=128&g=1", "display_name": "SherylHohman", "link": "https://stackoverflow.com/users/5411817/sherylhohman"}, "edited": false, "score": 2, "creation_date": 1517441665, "post_id": 48552268, "comment_id": 84102824, "body": "images of code are not acceptable.  Your must edit the formatting by had if it does not copy over.  <i>We</i> need to be able to <i>see</i> your code as text, and more importantly, <i>we</i> need to be able to copy and paste <i>your</i> code into our editors.  Even poorly formatted code is more useable than an image.  But every one of us should not need to perform this edit ourselves.  Put in the effort, to help us help you.  Anyway, if you use a code snippen (look for the &lt;&gt; symbol in the editor), then after you paste your code, there is a &quot;prettier&quot; link that will format the code properly!"}], "answers": [{"tags": [], "owner": {"reputation": 916, "user_id": 7825433, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-yiVrjYwlvs4/AAAAAAAAAAI/AAAAAAAAABE/Iwvd_jUP9Yo/photo.jpg?sz=128", "display_name": "Nestor Yanchuk", "link": "https://stackoverflow.com/users/7825433/nestor-yanchuk"}, "is_accepted": false, "score": 0, "last_activity_date": 1517438962, "creation_date": 1517438962, "answer_id": 48552739, "question_id": 48552268, "link": "https://stackoverflow.com/questions/48552268/selenium-python-dropdown-menu/48552739#48552739", "title": "Selenium Python dropdown menu", "body": "<p><a href=\"https://stackoverflow.com/a/18600739/7825433\">Find element by css selector</a> (<code>#breakdown-select-wrapper .drop-down__selected</code>) and click on it.</p>\n\n<p>After that, iterate over <a href=\"https://stackoverflow.com/a/47899537/7825433\"><code>li</code>s</a> (<code>#dropdown-breakdown-select li</code>) and <a href=\"https://stackoverflow.com/a/12019997/7825433\">find the one you are looking for by text</a>.</p>\n\n<p>Finally, <a href=\"https://stackoverflow.com/a/21350625/7825433\">click</a> on it.</p>\n"}, {"tags": [], "owner": {"reputation": 11632, "user_id": 8582353, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa2e22a564c1d0e098316210a2ec4fb1?s=128&d=identicon&r=PG&f=1", "display_name": "yong", "link": "https://stackoverflow.com/users/8582353/yong"}, "is_accepted": false, "score": 0, "last_activity_date": 1517467297, "creation_date": 1517467297, "answer_id": 48556770, "question_id": 48552268, "link": "https://stackoverflow.com/questions/48552268/selenium-python-dropdown-menu/48556770#48556770", "title": "Selenium Python dropdown menu", "body": "<p>Because your drop down is a CSS dropdown, not native dropdown, you can't use Select class.</p>\n\n<pre><code>def choose_breakdown(option):\n\n    // click to make option list visible\n    driver\n        .find_element_by_css_selector(\n            \"div#dropdown-breakdown-select &gt; div.drop-down__selected\"\n        ).click()\n\n    // choose option by given option text\n    driver\n        .find_element_by_xpath(\n            \"//div[@id='dropdown-breakdown-select']/ul/li[.='\" + option + \"']\"\n        ).click()\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8299112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b60b67d2f3e0335f360ac5499e156bb6?s=128&d=identicon&r=PG&f=1", "display_name": "user8299112", "link": "https://stackoverflow.com/users/8299112/user8299112"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 359, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1517472222, "creation_date": 1517436528, "last_edit_date": 1517472222, "question_id": 48552268, "link": "https://stackoverflow.com/questions/48552268/selenium-python-dropdown-menu", "title": "Selenium Python dropdown menu", "body": "<p>I'm a bit new to selenium. I'm trying to select values from a drop-down menu using selenium in python, but for this website it does not seem to work.</p>\n\n<p>Any ideas on how it can be done?</p>\n\n<p>HTML code of dropdown:</p>\n\n<pre><code>&lt;div id=\"dropdown-breakdown-select\" class=\"drop-down drop-down--open\"&gt;\n   &lt;div class=\"drop-down__selected drop-down__selected--open \"&gt;Geographical breakdown&lt;/div&gt;\n   &lt;ul class=\"dropdown-list\" tabindex=\"1\" style=\"height: 246px; \n       display: block; overflow-y: hidden; outline: none;\"&gt;\n      &lt;li style=\"font-weight: normal;\"&gt;Geographical breakdown&lt;/li&gt;\n      &lt;li style=\"font-weight: normal;\"&gt;Rating&lt;/li&gt;\n      &lt;li style=\"font-weight: normal;\"&gt;Maturity&lt;/li&gt;\n      &lt;li style=\"font-weight: normal;\"&gt;Benchmark breakdown&lt;/li&gt;\n      &lt;li style=\"font-weight: normal;\"&gt;Risk currency&lt;/li&gt;\n      &lt;li style=\"font-weight: normal;\"&gt;Active currency risk&lt;/li&gt;\n      &lt;li style=\"font-weight: normal;\"&gt;Active duration risk&lt;/li&gt;\n   &lt;/ul&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Screenshot of dropdown:</p>\n\n<p><a href=\"https://i.stack.imgur.com/iZC9d.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/iZC9d.png\" alt=\"enter image description here\"></a></p>\n\n<p>Drop down from this page: <a href=\"https://www.am.pictet/en/china/institutional/Funds/pictet%20emerging%20local%20currency%20debt?isin=LU0280437673#_portfolio\" rel=\"nofollow noreferrer\">Web link</a> </p>\n"}, {"tags": ["python", "xml", "python-3.x", "csv"], "answers": [{"tags": [], "owner": {"reputation": 1625, "user_id": 9129289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f8fea2e820b5fd246a78be208350b6c?s=128&d=identicon&r=PG&f=1", "display_name": "Glenn D.J.", "link": "https://stackoverflow.com/users/9129289/glenn-d-j"}, "is_accepted": false, "score": 1, "last_activity_date": 1517437937, "last_edit_date": 1517437937, "creation_date": 1517437134, "answer_id": 48552387, "question_id": 48552245, "link": "https://stackoverflow.com/questions/48552245/taking-multiple-elements-from-an-xml-file-and-converting-them-into-styled-elemen/48552387#48552387", "title": "Taking multiple elements from an XML file and converting them into styled element", "body": "<p>You can iterate over all the elements of an application and for each element with a race tag, you save the corresponding letter you want to add. Once you iterated over all the tags, you can create a new element with as the tag the joined letters. Example code: (untested for now)</p>\n\n<pre><code>    race_to_letter_map = {\n        'race_white': 'A',\n        'race_black': 'B'\n        # add more races\n    }\n\n    applications = tree.findall('application')\n    for application in applications:\n        races = []\n        elements_to_delete = []\n        for xml_element in application:  # iterate over all elements of application\n            # check whether the current child indicates one of the races\n            race_letter = race_to_letter_map.get(xml_element.tag, None)\n            if race_letter is not None:\n                elements_to_delete.append(xml_element)\n                if xml_element.text == 'Yes':\n                    races.append(race_letter)\n\n        # removing the now unwanted tags\n        for xml_element in elements_to_delete:\n            application.remove(xml_element)\n\n        # creating the resulting element and append it to application\n        multi_race_element = Element('multi_race')\n        multi_race_element.text = \",\".join(races)\n        application.append(multi_race_element)   \n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 9296663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2b6014e5bb044ae1c9d6d17f9576642?s=128&d=identicon&r=PG&f=1", "display_name": "Arthur Thomas", "link": "https://stackoverflow.com/users/9296663/arthur-thomas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1517437937, "creation_date": 1517436449, "last_edit_date": 1517437469, "question_id": 48552245, "link": "https://stackoverflow.com/questions/48552245/taking-multiple-elements-from-an-xml-file-and-converting-them-into-styled-elemen", "title": "Taking multiple elements from an XML file and converting them into styled element", "body": "<p>I am a beginner (~5 months) at python and I am currently struggling in figuring out how to parse through the races that are checked off as <code>Yes</code>, convert them to a letter that represents the race, then take all of the letters and append them the new node called <code>multi_race</code>.</p>\n\n<p>I was thinking of the pseudo code: </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>node = tree.findall('race_white')\nfor element in elements:\n    element sub ('Yes', 'A')\n    element write tree to xml\n</code></pre>\n\n<p>Here is the starting XML:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;application&gt;\n    &lt;lastname&gt;lastname&lt;/lastname&gt;\n    &lt;firstname&gt;first&lt;/firstname&gt;\n    &lt;middlename&gt;middle&lt;/middlename&gt;\n    &lt;sex&gt;Male&lt;/sex&gt;\n    &lt;BIRTH&gt;01/01/1980&lt;/BIRTH&gt;\n    &lt;hispanic_latino&gt;&lt;/hispanic_latino&gt;\n    &lt;race_white&gt;Yes&lt;/race_white&gt;  #CodeA\n    &lt;race_black&gt;&lt;/race_black&gt;     #CodeB\n    &lt;race_asian&gt;&lt;/race_asian&gt;     #CodeC\n    &lt;race_american_indian&gt;&lt;/race_american_indian&gt;  #CodeD\n    &lt;race_pacific_islander&gt;&lt;/race_pacific_islander&gt; #CodeE\n</code></pre>\n\n<p>Here is the ending result I would like: </p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;application&gt;\n    &lt;lastname&gt;lastname&lt;/lastname&gt;\n    &lt;firstname&gt;first&lt;/firstname&gt;\n    &lt;middlename&gt;middle&lt;/middlename&gt;\n    &lt;sex&gt;Male&lt;/sex&gt;  \n    &lt;BIRTH&gt;01/01/1980&lt;/BIRTH&gt;\n    &lt;hispanic_latino&gt;&lt;/hispanic_latino&gt;\n    &lt;multi_race&gt;A,&lt;/multi_race&gt;\n</code></pre>\n"}, {"tags": ["python", "odoo", "erp"], "comments": [{"owner": {"reputation": 8477, "user_id": 4891717, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/CTpEU.png?s=128&g=1", "display_name": "ChesuCR", "link": "https://stackoverflow.com/users/4891717/chesucr"}, "edited": false, "score": 0, "creation_date": 1517474514, "post_id": 48552182, "comment_id": 84112688, "body": "<code>&lt;field name=&quot;res_model&quot;&gt;mi_module.mi_module&lt;&#47;field&gt;</code> &gt; you need to write the model name there, instead of the module name. Take a look at the error string: &quot;Invalid model name&quot;"}, {"owner": {"reputation": 519, "user_id": 4377783, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Jj1hT.jpg?s=128&g=1", "display_name": "Virbhadrasinh", "link": "https://stackoverflow.com/users/4377783/virbhadrasinh"}, "edited": false, "score": 0, "creation_date": 1524174411, "post_id": 48552182, "comment_id": 86877371, "body": "For odoo prefer linux insted of windows, Linux(Ubuntu) is the best platform to development of odoo"}, {"owner": {"reputation": 1, "user_id": 10504003, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-U9V0Rq2-dbw/AAAAAAAAAAI/AAAAAAAAAM4/2MdWLqeGrP8/photo.jpg?sz=128", "display_name": "Mr. Vo", "link": "https://stackoverflow.com/users/10504003/mr-vo"}, "edited": false, "score": 0, "creation_date": 1539765237, "post_id": 48552182, "comment_id": 92622950, "body": "model mi_module.mi_module must be created"}], "answers": [{"tags": [], "owner": {"reputation": 430, "user_id": 7349964, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-jHz9a1m8hXg/AAAAAAAAAAI/AAAAAAAADh8/zNytc2MbiHw/photo.jpg?sz=128", "display_name": "Vishal Khichadiya", "link": "https://stackoverflow.com/users/7349964/vishal-khichadiya"}, "is_accepted": false, "score": 8, "last_activity_date": 1523960851, "last_edit_date": 1523960851, "creation_date": 1520839845, "answer_id": 49230109, "question_id": 48552182, "link": "https://stackoverflow.com/questions/48552182/python-odoo-10-error/49230109#49230109", "title": "python odoo 10 error", "body": "<p><strong>It should be like this !!</strong></p>\n\n<p><strong>if your class defined as:</strong></p>\n\n<pre><code>class mi_module(models.Model):\n    _name = \"mi.module\"\n\n    #\"Body\"\n</code></pre>\n\n<p><strong>you have to do it as :</strong></p>\n\n<pre><code>&lt;record model=\"ir.actions.act_window\" id=\"mi_module.action_window\"&gt;\n    &lt;field name=\"name\"&gt;mi module window&lt;/field&gt;\n    &lt;field name=\"res_model\"&gt;mi.module&lt;/field&gt;\n    &lt;field name=\"view_mode\"&gt;tree,form&lt;/field&gt;\n&lt;/record&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 312, "user_id": 9328782, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-6LMFNmyV0ts/AAAAAAAAAAI/AAAAAAAAAJo/h-M0bJeyzfg/photo.jpg?sz=128", "display_name": "Piotr Cierkosz", "link": "https://stackoverflow.com/users/9328782/piotr-cierkosz"}, "is_accepted": false, "score": 0, "last_activity_date": 1524062306, "creation_date": 1524062306, "answer_id": 49902543, "question_id": 48552182, "link": "https://stackoverflow.com/questions/48552182/python-odoo-10-error/49902543#49902543", "title": "python odoo 10 error", "body": "<p>Vishal Khichadiya in the post above found the solution. However, I think you should start from understanding how it works. Two ways of fast learning would be:</p>\n\n<ol>\n<li>Download some simple apps and see the files, learn how they are\nbuilt and try to replicate it. I would recommend starting with simple view edits.</li>\n<li>Activate the developer mode and make some front-end changes. If it is possible to save and things are working simply replace your front-end changes with a module.\nThe easiest would be editing the list /tree views - add some stuff here and there.</li>\n</ol>\n\n<p>What version of Odoo should you use? Probably 11 is the only right version as it is using different Python version than 10 and older. Get familiar with official Odoo forum as you might get an instant help in there.</p>\n"}, {"tags": [], "owner": {"reputation": 181, "user_id": 10084832, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/--zl-CySXAWA/AAAAAAAAAAI/AAAAAAAAAcA/SoCj4LHAtgQ/photo.jpg?sz=128", "display_name": "Abhay Singh Rathore", "link": "https://stackoverflow.com/users/10084832/abhay-singh-rathore"}, "is_accepted": false, "score": 0, "last_activity_date": 1532492379, "creation_date": 1532492379, "answer_id": 51510724, "question_id": 48552182, "link": "https://stackoverflow.com/questions/48552182/python-odoo-10-error/51510724#51510724", "title": "python odoo 10 error", "body": "<pre><code>E:\\odoo-11.0&gt;\"E:\\odoo-11.0\\venv\\Scripts\\python.exe\" \"E:\\odoo-11.0\\odoo-bin\" scaffold openacademy addons\n</code></pre>\n\n<p>Instead use this kind of path in the command prompt to scaffold a modole.</p>\n\n<p>Thanks\nAbhay S</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 10505712, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4NFqdY9T5xo/AAAAAAAAAAI/AAAAAAAAACQ/ajayB6dZiQE/photo.jpg?sz=128", "display_name": "Medo_ban", "link": "https://stackoverflow.com/users/10505712/medo-ban"}, "is_accepted": false, "score": 0, "last_activity_date": 1540537778, "creation_date": 1540537778, "answer_id": 53003312, "question_id": 48552182, "link": "https://stackoverflow.com/questions/48552182/python-odoo-10-error/53003312#53003312", "title": "python odoo 10 error", "body": "<p>I believe Vishal Khichadiya already answered your question however, if you do not \nunderstand how it works it will be pointless to use his answer</p>\n\n<p>starting odoo could be frustrating but when you know how it works it will get easier.</p>\n\n<p>please read on the documentation of your odoo version to understand how things works functionally</p>\n\n<p>for your version odoo 11 go to this link\n<a href=\"https://www.odoo.com/documentation/11.0/howtos/backend.html\" rel=\"nofollow noreferrer\">https://www.odoo.com/documentation/11.0/howtos/backend.html</a></p>\n\n<p>after finishing the above read this for more technical information</p>\n\n<p><a href=\"https://odoo-development.readthedocs.io/en/latest/#\" rel=\"nofollow noreferrer\">https://odoo-development.readthedocs.io/en/latest/#</a></p>\n\n<p>I just started odoo too and I found out its more research than development</p>\n\n<p>good luck</p>\n"}, {"tags": [], "owner": {"reputation": 79, "user_id": 7459599, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88a62381691c10510e2ea23ebd1179a3?s=128&d=identicon&r=PG&f=1", "display_name": "Jovani Martinez", "link": "https://stackoverflow.com/users/7459599/jovani-martinez"}, "is_accepted": false, "score": 0, "last_activity_date": 1549661897, "creation_date": 1549661897, "answer_id": 54600586, "question_id": 48552182, "link": "https://stackoverflow.com/questions/48552182/python-odoo-10-error/54600586#54600586", "title": "python odoo 10 error", "body": "<p>If you are on Windows try using \"_\" instead \".\", like this:</p>\n\n<p>&lt;field name=\"res_model\"&gt;mi_module_mi_module&lt;/field&gt;</p>\n"}, {"tags": [], "owner": {"reputation": 442, "user_id": 12350123, "user_type": "registered", "profile_image": "https://graph.facebook.com/808712149338870/picture?type=large", "display_name": "Saumil gauswami", "link": "https://stackoverflow.com/users/12350123/saumil-gauswami"}, "is_accepted": false, "score": 0, "last_activity_date": 1593342576, "creation_date": 1593342576, "answer_id": 62621675, "question_id": 48552182, "link": "https://stackoverflow.com/questions/48552182/python-odoo-10-error/62621675#62621675", "title": "python odoo 10 error", "body": "<p>PLease check your <code>/mi_module/models/__init__.py</code> file :- if their is something like <code>from . import models</code> then it is ok.</p>\n<p>check also <code>/mi_module/__init__.py</code> :- must be <code>from . import models</code></p>\n"}], "owner": {"reputation": 359, "user_id": 2030424, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/0d8637c048ff755f6d454a0e11674e93?s=128&d=identicon&r=PG", "display_name": "Francisco", "link": "https://stackoverflow.com/users/2030424/francisco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 907, "favorite_count": 0, "answer_count": 6, "score": 2, "last_activity_date": 1593342576, "creation_date": 1517436126, "last_edit_date": 1520781880, "question_id": 48552182, "link": "https://stackoverflow.com/questions/48552182/python-odoo-10-error", "title": "python odoo 10 error", "body": "<p>I'm starting to use odoo but I do not start very well, nothing but mistakes, generate a simple module to start</p>\n\n<pre><code>\"%pyodoo%\\python.exe\" odoo-bin scaffold mi_module\n</code></pre>\n\n<p>uncomment all the commented lines and I get the following error</p>\n\n<pre><code>Error:\nOdoo Server Error\n\nTraceback (most recent call last):\n  File \"C:\\Program Files (x86)\\Odoo 11.0\\server\\odoo\\tools\\convert.py\", line 741, in parse\n    self._tags[rec.tag](rec, de, mode=mode)\n  File \"C:\\Program Files (x86)\\Odoo 11.0\\server\\odoo\\tools\\convert.py\", line 651, in _tag_record\n    id = self.env(context=rec_context)['ir.model.data']._update(rec_model, self.module, res, rec_id or False, not self.isnoupdate(data_node), noupdate=self.isnoupdate(data_node), mode=self.mode)\n    _load_data(cr, module_name, idref, mode, kind='data')\n  File \"C:\\Program Files (x86)\\Odoo 11.0\\server\\odoo\\modules\\loading.py\", line 94, in _load_data\n    tools.convert_file(cr, module_name, filename, idref, mode, noupdate, kind, report)\n  File \"C:\\Program Files (x86)\\Odoo 11.0\\server\\odoo\\tools\\convert.py\", line 788, in convert_file\n    convert_xml_import(cr, module, fp, idref, mode, noupdate, report)\n  File \"C:\\Program Files (x86)\\Odoo 11.0\\server\\odoo\\tools\\convert.py\", line 849, in convert_xml_import\n    obj.parse(doc.getroot(), mode=mode)\n  File \"C:\\Program Files (x86)\\Odoo 11.0\\server\\odoo\\tools\\convert.py\", line 738, in parse\n    self.parse(rec, mode)\n  File \"C:\\Program Files (x86)\\Odoo 11.0\\server\\odoo\\tools\\convert.py\", line 748, in parse\n    exc_info[2]\n  File \"C:\\Program Files (x86)\\Odoo 11.0\\server\\odoo\\tools\\pycompat.py\", line 86, in reraise\n    raise value.with_traceback(tb)\n  File \"C:\\Program Files (x86)\\Odoo 11.0\\server\\odoo\\tools\\convert.py\", line 741, in parse\n    self._tags[rec.tag](rec, de, mode=mode)\n  File \"C:\\Program Files (x86)\\Odoo 11.0\\server\\odoo\\tools\\convert.py\", line 651, in _tag_record\n    id = self.env(context=rec_context)['ir.model.data']._update(rec_model, self.module, res, rec_id or False, not self.isnoupdate(data_node), noupdate=self.isnoupdate(data_node), mode=self.mode)\n  File \"C:\\Program Files (x86)\\Odoo 11.0\\server\\odoo\\addons\\base\\ir\\ir_model.py\", line 1469, in _update\n    record = record.create(values)\n  File \"C:\\Program Files (x86)\\Odoo 11.0\\server\\odoo\\addons\\base\\ir\\ir_actions.py\", line 217, in create\n    return super(IrActionsActWindow, self).create(vals)\n  File \"C:\\Program Files (x86)\\Odoo 11.0\\server\\odoo\\addons\\base\\ir\\ir_actions.py\", line 46, in create\n    res = super(IrActions, self).create(vals)\n  File \"C:\\Program Files (x86)\\Odoo 11.0\\server\\odoo\\models.py\", line 3278, in create\n    record = self.browse(self._create(old_vals))\n  File \"C:\\Program Files (x86)\\Odoo 11.0\\server\\odoo\\models.py\", line 3431, in _create\n    self._validate_fields(vals)\n  File \"C:\\Program Files (x86)\\Odoo 11.0\\server\\odoo\\models.py\", line 967, in _validate_fields\n    check(self)\n  File \"C:\\Program Files (x86)\\Odoo 11.0\\server\\odoo\\addons\\base\\ir\\ir_actions.py\", line 125, in _check_model\n    raise ValidationError(_('Invalid model name %r in action definition.') % action.res_model)\nodoo.tools.convert.ParseError: \"Nombre de modelo 'mi_module.mi_module' no valido en la definici\u00f3n de la acci\u00f3n.\nNone\" while parsing file:/c:/program%20files%20(x86)/odoo%2011.0/server/odoo/addons/mi_module/views/views.xml:10, near\n&lt;record model=\"ir.actions.act_window\" id=\"mi_module.action_window\"&gt;\n      &lt;field name=\"name\"&gt;mi_module window&lt;/field&gt;\n      &lt;field name=\"res_model\"&gt;mi_module.mi_module&lt;/field&gt;\n      &lt;field name=\"view_mode\"&gt;tree,form&lt;/field&gt;\n    &lt;/record&gt;\n</code></pre>\n\n<p>simply generate the module to start and then enter odoo, install the module but I get this error.\nI am using windows and the final version of odoo. Should I use another version of odoo to start?</p>\n"}, {"tags": ["python", "python-3.x", "pygame", "python-requests"], "comments": [{"owner": {"reputation": 18103, "user_id": 6220679, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LK4H1.png?s=128&g=1", "display_name": "skrx", "link": "https://stackoverflow.com/users/6220679/skrx"}, "edited": false, "score": 0, "creation_date": 1517441828, "post_id": 48552169, "comment_id": 84102865, "body": "Here&#39;s <a href=\"https://stackoverflow.com/a/46871398/6220679\">another example</a> without sprites. And search for tutorials about <a href=\"http://www.pygame.org/docs/ref/mask.html\" rel=\"nofollow noreferrer\">masks</a> and pixel perfect collision detection."}, {"owner": {"reputation": 457, "user_id": 9296938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbfd8a702e30dedd0801820c442523a4?s=128&d=identicon&r=PG&f=1", "display_name": "Tudor Popescu", "link": "https://stackoverflow.com/users/9296938/tudor-popescu"}, "reply_to_user": {"reputation": 18103, "user_id": 6220679, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LK4H1.png?s=128&g=1", "display_name": "skrx", "link": "https://stackoverflow.com/users/6220679/skrx"}, "edited": false, "score": 0, "creation_date": 1517522468, "post_id": 48552169, "comment_id": 84141672, "body": "@skrx thanks alot, I&#39;ll follow up on it\ud83d\ude00"}, {"owner": {"reputation": 18103, "user_id": 6220679, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LK4H1.png?s=128&g=1", "display_name": "skrx", "link": "https://stackoverflow.com/users/6220679/skrx"}, "edited": false, "score": 0, "creation_date": 1517536614, "post_id": 48552169, "comment_id": 84145892, "body": "You&#39;re welcome! You could also check out <a href=\"http://pymunk.org/\" rel=\"nofollow noreferrer\">Pymunk</a> (the physics library) which allows you to combine multiple polygons to create more complex shapes, but it takes a while (and can be a bit difficult) to familiarize yourself with this lib."}], "owner": {"reputation": 457, "user_id": 9296938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbfd8a702e30dedd0801820c442523a4?s=128&d=identicon&r=PG&f=1", "display_name": "Tudor Popescu", "link": "https://stackoverflow.com/users/9296938/tudor-popescu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "closed_date": 1517470466, "answer_count": 0, "score": 0, "last_activity_date": 1517436084, "creation_date": 1517436084, "question_id": 48552169, "link": "https://stackoverflow.com/questions/48552169/pygame-how-to-get-custom-boundaries", "closed_reason": "Duplicate", "title": "Pygame how to get &#39;custom boundaries&#39;", "body": "<p>I have been coding in python for about 4 months now and I want to get into pygame. But I have been noticing there isn't really a way to get a custom boundary for collisions, eg. Have a car shaped boundary instead of a rectangle. Is there way to get custom boundaries? thanks\ud83d\ude0a</p>\n"}, {"tags": ["python", "amazon-s3", "boto"], "comments": [{"owner": {"reputation": 11919, "user_id": 9183344, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U7r5r.png?s=128&g=1", "display_name": "r.ook", "link": "https://stackoverflow.com/users/9183344/r-ook"}, "edited": false, "score": 0, "creation_date": 1517436506, "post_id": 48552151, "comment_id": 84100814, "body": "I&#39;m not familiar with <code>smart_open</code> but answered a similar question recently: <a href=\"https://stackoverflow.com/questions/48529862/replace-single-character-in-a-line-of-a-text-file-with-python/48531038#48531038\" title=\"replace single character in a line of a text file with python\">stackoverflow.com/questions/48529862/&hellip;</a>. You can try and see if you can implement that into your solution."}, {"owner": {"reputation": 365, "user_id": 8605666, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cef82088f846f84b753c783ddf9b799c?s=128&d=identicon&r=PG&f=1", "display_name": "jumpman23", "link": "https://stackoverflow.com/users/8605666/jumpman23"}, "reply_to_user": {"reputation": 11919, "user_id": 9183344, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U7r5r.png?s=128&g=1", "display_name": "r.ook", "link": "https://stackoverflow.com/users/9183344/r-ook"}, "edited": false, "score": 0, "creation_date": 1517451305, "post_id": 48552151, "comment_id": 84105051, "body": "Yeah that is similar I just need a specific answer for s3 and working within the AWS ecosystem."}], "owner": {"reputation": 365, "user_id": 8605666, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cef82088f846f84b753c783ddf9b799c?s=128&d=identicon&r=PG&f=1", "display_name": "jumpman23", "link": "https://stackoverflow.com/users/8605666/jumpman23"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 344, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1517436369, "creation_date": 1517436011, "last_edit_date": 1517436369, "question_id": 48552151, "link": "https://stackoverflow.com/questions/48552151/aws-s3-python-read-process-then-write", "title": "AWS S3 - Python Read, Process, then Write", "body": "<p>I am looking to use boto3 or even something like smart_open within Python to read a file line by line from S3 then process each line (ex. clean certain fields) and then write those lines back into S3. The key is to not have any of the data in memory. Any suggestions? I have tried using the following below with no success</p>\n\n<pre><code>into = \"s3://\"+access_key+\":\"+secret_key+\"@\"+bucket+\"/Filetoread.csv\"\nout = \"s3://\"+access_key+\":\"+secret_key+\"@\"+bucket+\"/Filetowrite.csv\"\n\ndef streamline(inputfile, outputfile):\nwith smart_open.smart_open(inputfile, 'r') as infile, smart_open.smart_open(outputfile, 'w') as outfile:\n    for line in infile:\n        outfile.write(line + '\\n')\n\nstreamline(into, out)\n</code></pre>\n"}, {"tags": ["python", "multithreading", "machine-learning", "openmp"], "comments": [{"owner": {"reputation": 18362, "user_id": 1767754, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/00ba1fd17dc5970a0096cc4d7a932536?s=128&d=identicon&r=PG", "display_name": "user1767754", "link": "https://stackoverflow.com/users/1767754/user1767754"}, "edited": false, "score": 0, "creation_date": 1517436458, "post_id": 48552149, "comment_id": 84100792, "body": "What are trying to solve, based on that you could get a possible answer, you question is to general."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6070577"}, "reply_to_user": {"reputation": 18362, "user_id": 1767754, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/00ba1fd17dc5970a0096cc4d7a932536?s=128&d=identicon&r=PG", "display_name": "user1767754", "link": "https://stackoverflow.com/users/1767754/user1767754"}, "edited": false, "score": 0, "creation_date": 1517436767, "post_id": 48552149, "comment_id": 84100926, "body": "@user1767754 This is part of my current research project. basically, I am trying to parse given sparse data set by using latest parallel machine learning approach - <a href=\"https://medium.com/@krishna_srd/parallel-machine-learning-with-hogwild-f945ad7e48a4\" rel=\"nofollow noreferrer\"><code>hogWild!</code></a>. My objective is to implement <code>hogWild</code> for logistic regression and analyze given sparse dataset. I did implement respective implementation for those but still struggling to find a solution for multiple threading (such as <code>openMP</code> or <code>base threads</code>). Any more thoughts?"}], "owner": {"user_type": "does_not_exist", "display_name": "user6070577"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1517436462, "creation_date": 1517436009, "question_id": 48552149, "link": "https://stackoverflow.com/questions/48552149/which-python-module-provides-utilities-for-starting-multi-threading-session-ope", "title": "which python module provides utilities for starting multi-threading session (openMP or basethreads)?", "body": "<p>I am wondering which python module provides respective utility functions that allow the user to open multithreading sessions (openMP or base threads) for possible parallel processing. Perhaps, there might be handy Python module that does this sort of job, but it is unknown to me. Does anyone know how openMP /base threads that works for parallel processing jobs in Python? Any way to do this? How can I make this happen? Which python module can help me to use multithreading task (either openMP or base threads works for my current need). Any idea?</p>\n"}, {"tags": ["python", "scipy"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user6655984"}, "edited": false, "score": 0, "creation_date": 1517438664, "post_id": 48552133, "comment_id": 84101765, "body": "Would not this post be more useful at <a href=\"https://github.com/scipy/scipy/issues\" rel=\"nofollow noreferrer\">SciPy issue tracker</a>? Maybe there is no reason, and your approach should be used instead. Or there is, and some SciPy dev thought about it."}, {"owner": {"reputation": 92118, "user_id": 1217358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2aafb97833979e3668c61d36e697bfc?s=128&d=identicon&r=PG", "display_name": "Warren Weckesser", "link": "https://stackoverflow.com/users/1217358/warren-weckesser"}, "edited": false, "score": 2, "creation_date": 1517450015, "post_id": 48552133, "comment_id": 84104735, "body": "That software is distributed under the GNU LGPL license.  SciPy does not include GPL or LGPL code."}, {"owner": {"reputation": 92118, "user_id": 1217358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2aafb97833979e3668c61d36e697bfc?s=128&d=identicon&r=PG", "display_name": "Warren Weckesser", "link": "https://stackoverflow.com/users/1217358/warren-weckesser"}, "edited": false, "score": 0, "creation_date": 1517465811, "post_id": 48552133, "comment_id": 84108841, "body": "It would be helpful if you also included the timing for <code>scipy.special.ndtri</code>.  <code>norm.ppf()</code> has additional overhead for argument validation and processing the <code>loc</code> and <code>scale</code> arguments."}, {"owner": {"reputation": 736, "user_id": 4317363, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/36de5dfa781f22965f225c6f88a93824?s=128&d=identicon&r=PG&f=1", "display_name": "asdf", "link": "https://stackoverflow.com/users/4317363/asdf"}, "reply_to_user": {"reputation": 92118, "user_id": 1217358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2aafb97833979e3668c61d36e697bfc?s=128&d=identicon&r=PG", "display_name": "Warren Weckesser", "link": "https://stackoverflow.com/users/1217358/warren-weckesser"}, "edited": false, "score": 0, "creation_date": 1517501732, "post_id": 48552133, "comment_id": 84130478, "body": "@WarrenWeckesser oh okay. Just for my understanding why doesn&#39;t scipy include GPL or LGPL?"}], "owner": {"reputation": 736, "user_id": 4317363, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/36de5dfa781f22965f225c6f88a93824?s=128&d=identicon&r=PG&f=1", "display_name": "asdf", "link": "https://stackoverflow.com/users/4317363/asdf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 846, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1517435945, "creation_date": 1517435945, "question_id": 48552133, "link": "https://stackoverflow.com/questions/48552133/why-is-the-scipy-stats-norm-ppf-implementation-so-slow", "title": "Why is the scipy.stats.norm.ppf implementation so slow?", "body": "<p>I'm using scipy version 0.19.0. I see that under scipy\\stats_continuous_distns , the function <code>_norm_ppf</code> wraps <code>scipy.special.ndtri</code>. My question is, what implementation is this using and why is it so slow? </p>\n\n<p>For comparison, \ni created a c extension of a well known open-source implementation of inverse cdf within ASA 241 (\"R8_NORMAL_01_CDF_INVERSE\"). you can view it a version of it at this link: <a href=\"http://people.sc.fsu.edu/~jburkardt/c_src/asa241/asa241.html\" rel=\"nofollow noreferrer\">http://people.sc.fsu.edu/~jburkardt/c_src/asa241/asa241.html</a> </p>\n\n<p>some naive benchmarking shows scipy's version to be almost 1000x slower:</p>\n\n<pre><code>import timeit\nfrom scipy.stats import norm\nfrom QSCoreExtensions import r8_normal_01_cdf_inverse # compiled extension\n\ndef a():\n    norm.ppf(.3456)\n\ndef b():\n    r8_normal_01_cdf_inverse(.3456)\n\nprint(timeit.timeit('a()', number=10000, globals=globals()))\nprint(timeit.timeit('b()', number=10000, globals=globals()))\n</code></pre>\n\n<p>Output:</p>\n\n<p>1.219758156838038</p>\n\n<p>0.0021004953395136194</p>\n\n<p>Note that any input (not just .3456) will yield similar results. Also, the r8_normal_01_cdf_inverse accuracy is 1 part in 10**16 which is actually more accurate than scipy.stats.norm.ppf</p>\n"}, {"tags": ["python", "scikit-learn", "svm", "feature-extraction"], "owner": {"reputation": 634, "user_id": 1868436, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/F3MXS.jpg?s=128&g=1", "display_name": "Santino", "link": "https://stackoverflow.com/users/1868436/santino"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1517435904, "creation_date": 1517435904, "question_id": 48552121, "link": "https://stackoverflow.com/questions/48552121/feature-hashing-on-image-features-orb-scikit", "title": "feature hashing on image features (ORB) - scikit", "body": "<p>I am trying to train an SVM using ORB features for an image. Each ORB point has 32 integer values showing the intensity for the keypoint. The number of keypoints is variable, so I am looking into using feature hashing.</p>\n\n<pre><code>            img = cv2.imread(img_name,cv2.IMREAD_GRAYSCALE)\n            if img is None: continue\n            gray = cv2.resize(img,(256,256))\n            smooth = cv2.GaussianBlur(gray,(3,3),0)\n            kps = orb.detect(smooth,None)\n            kp, descs = orb.compute(smooth, kps)\n            #print des.shape\n            desc_dict = {}\n            for i,desc in enumerate(descs):\n                desc_dict[i] = desc\n</code></pre>\n\n<p>here is how the desc_dict looks like </p>\n\n<pre><code>{0: array([ 88, 143, 234, 183,  23, 248, 107,  50, 113, 205,  78,   2, 111,\n       227, 146, 116,  48, 230, 189, 203,   8, 216, 173, 109, 247, 103,\n       232, 129,  39, 231,  86, 110], dtype=uint8), \n1: array([ 71, 246, 250, 192, 114, 152, 191,  31,  43, 199,  90, 239, 221,\n       206, 222,  16,  55, 253,  53,  21, 195, 148, 182, 194,  62,  30,\n        47, 236, 140, 178, 131, 245], dtype=uint8), \n2: array([190, 205, 100, 238, 221,  82, 222, 230,   1,   6, 248, 131, 105,\n       125,  61, 128, 223, 243, 151, 227, 108, 170,  72, 239, 115, 127,\n       142, 147, 119, 255, 252,  14], dtype=uint8),\n            :\n            :\n          &lt;n&gt;\n</code></pre>\n\n<p>I am confused about how to pass this to the <code>FeatureHasher</code>. Should I convert the array into a catenated string? Sorry I am a newbie to this, and could use some guidance.</p>\n"}, {"tags": ["python", "tensorflow", "tensorflow-datasets"], "comments": [{"owner": {"reputation": 1680, "user_id": 6772171, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/bc07c67f42651f77624694bfd9ad6923?s=128&d=identicon&r=PG&f=1", "display_name": "Evan Weissburg", "link": "https://stackoverflow.com/users/6772171/evan-weissburg"}, "edited": false, "score": 1, "creation_date": 1517675032, "post_id": 48552103, "comment_id": 84195402, "body": "Unless there is usage somewhere else, it probably should be replaced. Maybe submit a pull request?"}, {"owner": {"reputation": 304, "user_id": 6457747, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U9YJo.jpg?s=128&g=1", "display_name": "KRish", "link": "https://stackoverflow.com/users/6457747/krish"}, "reply_to_user": {"reputation": 1680, "user_id": 6772171, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/bc07c67f42651f77624694bfd9ad6923?s=128&d=identicon&r=PG&f=1", "display_name": "Evan Weissburg", "link": "https://stackoverflow.com/users/6772171/evan-weissburg"}, "edited": false, "score": 0, "creation_date": 1517958492, "post_id": 48552103, "comment_id": 84304929, "body": "I went ahead and did so here: <a href=\"https://github.com/tensorflow/tensorflow/pull/16810\" rel=\"nofollow noreferrer\">github.com/tensorflow/tensorflow/pull/16810</a>"}], "answers": [{"tags": [], "owner": {"reputation": 304, "user_id": 6457747, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U9YJo.jpg?s=128&g=1", "display_name": "KRish", "link": "https://stackoverflow.com/users/6457747/krish"}, "is_accepted": true, "score": 0, "last_activity_date": 1518040296, "creation_date": 1518040296, "answer_id": 48673870, "question_id": 48552103, "link": "https://stackoverflow.com/questions/48552103/why-does-the-tensorflow-tf-data-dataset-shuffle-functions-reshuffle-each-iterat/48673870#48673870", "title": "Why does the TensorFlow tf.data.Dataset.shuffle function&#39;s reshuffle_each_iteration boolean argument default to None, as opposed to True?", "body": "<p>Answered by @mrry <a href=\"https://github.com/tensorflow/tensorflow/pull/16810#issuecomment-363918187.\" rel=\"nofollow noreferrer\">here</a>:</p>\n\n<blockquote>\n  <ul>\n  <li>In general I prefer None for default arguments, because it makes it easier to write wrappers around an API. If the default argument is set to True, it's difficult for a wrapper to use the default of the wrapped function, without making a copy of the default at each layer of wrapping. Using None and implementing the default at the innermost level is simpler to maintain.</li>\n  <li>Using None is also consistent with the necessary style when the default argument can be a mutable type (like a list) and it is unsafe to put the default value in the argument list.</li>\n  </ul>\n</blockquote>\n"}], "owner": {"reputation": 304, "user_id": 6457747, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U9YJo.jpg?s=128&g=1", "display_name": "KRish", "link": "https://stackoverflow.com/users/6457747/krish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 800, "favorite_count": 0, "accepted_answer_id": 48673870, "answer_count": 1, "score": 1, "last_activity_date": 1575828920, "creation_date": 1517435845, "last_edit_date": 1575828920, "question_id": 48552103, "link": "https://stackoverflow.com/questions/48552103/why-does-the-tensorflow-tf-data-dataset-shuffle-functions-reshuffle-each-iterat", "title": "Why does the TensorFlow tf.data.Dataset.shuffle function&#39;s reshuffle_each_iteration boolean argument default to None, as opposed to True?", "body": "<p>The <a href=\"https://www.tensorflow.org/api_docs/python/tf/data/Dataset#shuffle\" rel=\"nofollow noreferrer\">documentation for the tf.Dataset.data.shuffle function</a> states the following:</p>\n\n<blockquote>\n  <ul>\n  <li><strong>reshuffle_each_iteration</strong>: (Optional.) A boolean, which if true indicates that the dataset should be pseudorandomly reshuffled each time it is iterated over. (Defaults to True.)</li>\n  </ul>\n</blockquote>\n\n<p>However, the default value in the function is None, as mentioned on the same page and in <a href=\"https://github.com/tensorflow/tensorflow/blob/r1.5/tensorflow/python/data/ops/dataset_ops.py#L590\" rel=\"nofollow noreferrer\">the actual code</a>:</p>\n\n<pre><code>def shuffle(self, buffer_size, seed=None, reshuffle_each_iteration=None):\n</code></pre>\n\n<p>The function calls the ShuffleDataset class, whose <code>__init__</code> function also <a href=\"https://github.com/tensorflow/tensorflow/blob/r1.5/tensorflow/python/data/ops/dataset_ops.py#L1245\" rel=\"nofollow noreferrer\">sets the same argument to None by default</a>, and <a href=\"https://github.com/tensorflow/tensorflow/blob/r1.5/tensorflow/python/data/ops/dataset_ops.py#L1292\" rel=\"nofollow noreferrer\">uses the following logic</a> to set the default value of the argument to True:</p>\n\n<pre><code>if reshuffle_each_iteration is None:\n  self._reshuffle_each_iteration = True\nelse:\n  self._reshuffle_each_iteration = reshuffle_each_iteration\n</code></pre>\n\n<p>Why isn't the argument just set to True by default in both the function and the class? This would make the above code block redundant and allow replacing it with only <code>self._reshuffle_each_iteration = reshuffle_each_iteration</code>.</p>\n"}, {"tags": ["python", "arrays", "numpy", "multidimensional-array"], "comments": [{"owner": {"reputation": 860, "user_id": 1363495, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18f75bb8e7032480da04377694f3f448?s=128&d=identicon&r=PG&f=1", "display_name": "Gun2sh", "link": "https://stackoverflow.com/users/1363495/gun2sh"}, "edited": false, "score": 0, "creation_date": 1517436166, "post_id": 48552101, "comment_id": 84100663, "body": "make everything to 1 D by reshaping into 20x90 where the missing values can be zero. Then add them and resize again where you can neglect the dimensions not needed"}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 1, "creation_date": 1517436717, "post_id": 48552101, "comment_id": 84100905, "body": "What do you want to do with those [80-90] columns that might be missing?  Clip everything to 80 columns and omit the rest?  Pad the short columns with 0 or <code>nan</code>?  Or some other magic makes it possible to add things of different sizes?  Collapsing, concatenating or adding arrays of different sizes is a poorly defined operation."}, {"owner": {"reputation": 994, "user_id": 3579144, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/U5yBI.jpg?s=128&g=1", "display_name": "Vranvs", "link": "https://stackoverflow.com/users/3579144/vranvs"}, "edited": false, "score": 0, "creation_date": 1517436830, "post_id": 48552101, "comment_id": 84100950, "body": "I would want to pad the short columns with zeroes, yes."}], "answers": [{"tags": [], "owner": {"reputation": 594, "user_id": 8056248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50334383e1823cf5688da4ed39f8cf5b?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Holmgren", "link": "https://stackoverflow.com/users/8056248/andrew-holmgren"}, "is_accepted": false, "score": 1, "last_activity_date": 1517437240, "creation_date": 1517437240, "answer_id": 48552407, "question_id": 48552101, "link": "https://stackoverflow.com/questions/48552101/collapsing-a-three-dimensional-array-into-a-two-dimensional-array/48552407#48552407", "title": "Collapsing a three-dimensional array into a two-dimensional array", "body": "<p>If you know the max number of columns then just use a bit of memory overhead (it's not that much in your small matrix scenario) and initialize all your matrices to (20 x max(90?)). numpy/scipy work best (i.e. fastest and most consistently) when you don't dynamically mess with matrices.</p>\n\n<p>Alternatively, more in line with your original question (but much less efficient), you could reshape your smallest matrix to the largest matrix (options for zero-padding or whatever) as you encounter larger and larger matrices.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 9297010, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/585138f945a43ba964835834e38e3a30?s=128&d=identicon&r=PG&f=1", "display_name": "Carl E", "link": "https://stackoverflow.com/users/9297010/carl-e"}, "is_accepted": false, "score": 1, "last_activity_date": 1517437704, "creation_date": 1517437704, "answer_id": 48552495, "question_id": 48552101, "link": "https://stackoverflow.com/questions/48552101/collapsing-a-three-dimensional-array-into-a-two-dimensional-array/48552495#48552495", "title": "Collapsing a three-dimensional array into a two-dimensional array", "body": "<p>I don't know of a single numpy function that can do this, but if a for loop is acceptable you could do this:</p>\n\n<pre><code>array_sum = np.zeros((20, 90))\nfor array in arrays:\n    array_sum[:, :array.shape[1]] += array\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "is_accepted": true, "score": 0, "last_activity_date": 1517452475, "creation_date": 1517452475, "answer_id": 48554503, "question_id": 48552101, "link": "https://stackoverflow.com/questions/48552101/collapsing-a-three-dimensional-array-into-a-two-dimensional-array/48554503#48554503", "title": "Collapsing a three-dimensional array into a two-dimensional array", "body": "<p>Here is a solution that autodetects the required output size:</p>\n\n<pre><code>&gt;&gt;&gt; import numpy as np\n&gt;&gt;&gt; \n# create ragged list\n&gt;&gt;&gt; n = 4\n&gt;&gt;&gt; ragged = list(map(np.full, np.random.randint(1, 6, (n, 2)), 10**np.arange(n)))\n&gt;&gt;&gt; \n&gt;&gt;&gt; ragged\n[array([[1, 1, 1]]), array([[10, 10],\n       [10, 10],\n       [10, 10]]), array([[100],\n       [100],\n       [100]]), array([[1000, 1000, 1000, 1000],\n       [1000, 1000, 1000, 1000]])]\n&gt;&gt;&gt; \n# find maximum size in each dimension\n&gt;&gt;&gt; maxsh = *map(max, zip(*map(np.shape, ragged))),\n# allocate result\n&gt;&gt;&gt; result = np.zeros(maxsh, dtype=ragged[0].dtype)\n# and add\n&gt;&gt;&gt; for r in ragged:\n...     result[(*map(slice, r.shape),)] += r\n... \n&gt;&gt;&gt; result\narray([[1111, 1011, 1001, 1000],\n       [1110, 1010, 1000, 1000],\n       [ 110,   10,    0,    0]])\n</code></pre>\n"}], "owner": {"reputation": 994, "user_id": 3579144, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/U5yBI.jpg?s=128&g=1", "display_name": "Vranvs", "link": "https://stackoverflow.com/users/3579144/vranvs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 780, "favorite_count": 0, "accepted_answer_id": 48554503, "answer_count": 3, "score": 2, "last_activity_date": 1517452475, "creation_date": 1517435837, "question_id": 48552101, "link": "https://stackoverflow.com/questions/48552101/collapsing-a-three-dimensional-array-into-a-two-dimensional-array", "title": "Collapsing a three-dimensional array into a two-dimensional array", "body": "<p>I have an array of 2-dimensional arrays in python, all of which are 20 rows, but have variable column numbers (between 80 and 90 each).</p>\n\n<p>I would like to iteratively add the numerical (float) values within these two dimensional arrays to create one final two-dimensional array (see my schematic below).</p>\n\n<p>I'm new to python/numpy library and have found a few functions that might be what I'm looking for but can't seem to get them to work.</p>\n\n<p><strong>CONCATENATE</strong>\n<a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.concatenate.html\" rel=\"nofollow noreferrer\">docs here</a> Says that it will add two matrices of different size (supposing one axis is identical in all, I think?) but I don't know how to actually do the addition step iteratively. Reason being is because I want to initialize an empty numpy array outside the scope of my loop so I can add to it over and over and have the values save, but when I try to initialize an array with:</p>\n\n<pre><code>my_final_matrix = np.array()\n</code></pre>\n\n<p>It throws an error that no array is defined within the constructor. </p>\n\n<p><strong>FLATTEN/RESHAPE</strong> <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.flatten.html\" rel=\"nofollow noreferrer\">docs here</a> Reduce dimensionality but don't add the values.</p>\n\n<blockquote>\n  <p>In short -- how do I iteratively add different-sized matrices in\n  numpy?</p>\n</blockquote>\n\n<p><a href=\"https://i.stack.imgur.com/auaO7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/auaO7.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "excel", "sorting", "data-structures"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2603796"}, "edited": false, "score": 0, "creation_date": 1517439953, "post_id": 48552061, "comment_id": 84102256, "body": "your column headers are fixed? and also can you upload excel file?"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 9296890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f0ebc33291248fa056094fa516448dc?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/9296890/sam"}, "edited": false, "score": 1, "creation_date": 1517449117, "post_id": 48553262, "comment_id": 84104547, "body": "Thanks for this - I can visualize this way more easily.   How do I call a value here? I know it is probably simple, but I just cant picture it. If I want to scan through each one of these dicts, and if one particular team is represented (ex. all dicts containing Miami Heat), pull a specific value out (like points scored), how would I go about that?"}, {"owner": {"reputation": 505, "user_id": 9182617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5KUJN.png?s=128&g=1", "display_name": "Whooper", "link": "https://stackoverflow.com/users/9182617/whooper"}, "reply_to_user": {"reputation": 1, "user_id": 9296890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f0ebc33291248fa056094fa516448dc?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/9296890/sam"}, "edited": false, "score": 0, "creation_date": 1517467166, "post_id": 48553262, "comment_id": 84109306, "body": "You can get the values out of dictionary with <code>dict_name[&quot;key&quot;]</code>. So suppose I have a dictionary <code>dict = {&#39;Team&#39;:&#39;Miami Heat&#39;, &#39;Score&#39;:&#39;11:4&#39;, &#39;Result&#39;:&#39;W&#39;}</code>, then I can pull out the <code>team</code> with <code>dict[&#39;Team&#39;]</code>, <code>score</code> with <code>dict[&#39;Score&#39;]</code> and so on."}], "tags": [], "owner": {"reputation": 505, "user_id": 9182617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5KUJN.png?s=128&g=1", "display_name": "Whooper", "link": "https://stackoverflow.com/users/9182617/whooper"}, "is_accepted": false, "score": 0, "last_activity_date": 1517512872, "last_edit_date": 1592644375, "creation_date": 1517442130, "answer_id": 48553262, "question_id": 48552061, "link": "https://stackoverflow.com/questions/48552061/how-can-i-use-python-to-sort-and-store-sports-statistics-from-an-excel-file/48553262#48553262", "title": "How can I use Python to sort and store Sports Statistics from an Excel file?", "body": "<p>Let's say that you have these data:</p>\n<p><a href=\"https://i.stack.imgur.com/YQXsS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/YQXsS.png\" alt=\"enter image description here\" /></a></p>\n<p>You may want to store your data as a <code>list</code> of <code>dictionaries</code> instead which would look like:</p>\n<pre><code>data = [{'Team':'Miami Heat', 'Score':'11:4', 'Result':'W'},\n        {'Team':'Golden State Warriors', 'Score':'4:0', 'Result':'W'},\n        {'Team':'Cleveland Cavaliers', 'Score':'5:6', 'Result':'L'}]\n</code></pre>\n<p>You can achieve this with this code:</p>\n<pre><code>import xlrd\n\nworkbook = xlrd.open_workbook('Sample.xls')\nworksheet = workbook.sheet_by_index(0)\n\nresult = []\nkeys = [v.value.encode('ascii', 'ignore') for v in worksheet.row(0)]\n\nfor row_number in range(worksheet.nrows)[1:]:\n  row_data = {}\n  for col_number, cell in enumerate(worksheet.row(row_number)):\n    row_data[keys[col_number]] = cell.value.encode('ascii', 'ignore')\n  result.append(row_data)\n</code></pre>\n<p>Then with this, you can easily perform operations on array of dictionaries like sorting by team for example using this code:</p>\n<pre><code>sorted_team = sorted(result, key=lambda k: k['Team'])\n</code></pre>\n<p>Suppose you want to scan through each dictionary and get a particular team's score (say <em>&quot;Miami Heat&quot;</em> and <em>&quot;11-4&quot;</em>), then you can do it with something like:</p>\n<pre><code>for item in result:\n  if item['Team'] == &quot;Miami Heat&quot;:\n    print item['Score']\n</code></pre>\n<p>This is doing it the long way. I am pretty sure that you can simplify this code with <code>generator expressions</code> or some other way which I am leaving for you to find out. :)</p>\n<p>P.S.\nI kinda tweaked your variable names a bit for this code to make them more descriptive.</p>\n"}, {"comments": [{"owner": {"reputation": 505, "user_id": 9182617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5KUJN.png?s=128&g=1", "display_name": "Whooper", "link": "https://stackoverflow.com/users/9182617/whooper"}, "edited": false, "score": 0, "creation_date": 1517502877, "post_id": 48556981, "comment_id": 84131266, "body": "I am still not familiar with python libraries like pandas but this answer of @Khris is much better than mine. It pretty much covers the same thing as I have said but the library abstracts it much better!"}], "tags": [], "owner": {"reputation": 2672, "user_id": 2756793, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1cbe8b8b0848c306245687e301f8c95d?s=128&d=identicon&r=PG&f=1", "display_name": "Khris", "link": "https://stackoverflow.com/users/2756793/khris"}, "is_accepted": false, "score": 0, "last_activity_date": 1517468251, "creation_date": 1517468251, "answer_id": 48556981, "question_id": 48552061, "link": "https://stackoverflow.com/questions/48552061/how-can-i-use-python-to-sort-and-store-sports-statistics-from-an-excel-file/48556981#48556981", "title": "How can I use Python to sort and store Sports Statistics from an Excel file?", "body": "<p>Use pandas' <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.read_excel.html\" rel=\"nofollow noreferrer\"><code>read_excel</code></a> method.</p>\n\n<p>This puts your Excel data into a neat dataframe that has the same structure as your Excel table.</p>\n\n<pre><code>import pandas as pd\ndf = pd.read_excel(\"Sample.xls\")\n</code></pre>\n\n<p>If you have a datetime column use the option <code>parse_dates=[datetime_column]</code>.</p>\n\n<p>Then check if your data has all the correct data types using <code>df.dtypes</code> and if you need to change some, use <code>df[column] = df[column].astype(new_data_type)</code>.</p>\n\n<p>To sort the dataframe by team:</p>\n\n<pre><code>df = df.sort_values(\"Team\").reset_index(drop=True)\n</code></pre>\n\n<p>To select data from a certain team use boolean indexing:</p>\n\n<pre><code>df_team = df[df[\"Team\"] == team]\n</code></pre>\n\n<p>If you want to manipulate the filtered data further put a <code>.copy()</code> behind the above code to create a new object.</p>\n\n<p>To print the score for that team you can do this:</p>\n\n<pre><code>print(df_team[\"Score\"])\n</code></pre>\n\n<p>If the result is long this will omit data, then you can do this instead:</p>\n\n<pre><code>with pd.option_context('display.max_rows', None):\n    print(df_team[\"Score\"])\n</code></pre>\n\n<p>Alternatively iterate through the rows, though this is never recommended:</p>\n\n<pre><code>for _,row in df_team.iterrows():\n    print(row[\"Score\"])\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9296890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f0ebc33291248fa056094fa516448dc?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/9296890/sam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 192, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1517512872, "creation_date": 1517435619, "question_id": 48552061, "link": "https://stackoverflow.com/questions/48552061/how-can-i-use-python-to-sort-and-store-sports-statistics-from-an-excel-file", "title": "How can I use Python to sort and store Sports Statistics from an Excel file?", "body": "<p>I have an excel spreadsheet with sports data - a header row with things like Team, Result, Date, etc, and rows with all of the teams in them (for example, if baseball, the first 162 rows are individual games for one team, then the next 162 are for another, etc).</p>\n\n<p>I'm able to read these into python with XLRD easy enough, but i'm not sure exactly how to store them so that I can easily access information about a specific team. I can use a defaultdict(list) but i'm honestly not too sure how to actually access anything specific.</p>\n\n<p>For example:</p>\n\n<pre><code>import xlrd\nimport xlwt\nimport os.path\nimport math\nimport pandas as pd\nfrom xlutils.copy import copy as xl_copy\nfrom collections import defaultdict\n\n\n\nresult = defaultdict(list)\nworkbook = xlrd.open_workbook(\"Sample.xls\")\nworksheet = workbook.sheet_by_index(1)\nheaders = worksheet.row(0)\nfor index in range(worksheet.nrows)[1:]:\n    for header, col in zip(headers, worksheet.row(index)):\n        result[header.value].append(col.value)\n</code></pre>\n\n<p>This stores everything I need in \"Result\" and the output (if I print it) is like this (example for a 3-row file):</p>\n\n<pre><code>Team {'Boston Red Sox','Boston Red Sox','Boston Red Sox'}\nScore {'11-4','4-0','5-6'}\nResult {'W','W','L'}\n</code></pre>\n\n<p>How can this information be better stored/sorted <strong>by team</strong> in order for me to easily access information pertaining to a specific team? **If I wanted to add up how many victories they had, for example, how would I even do that? Is deafultdict a good use for this situation?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 2, "creation_date": 1517435700, "post_id": 48552043, "comment_id": 84100434, "body": "Relevant: <a href=\"https://stackoverflow.com/questions/1825715/how-to-pack-and-unpack-using-ctypes-structure-str\" title=\"how to pack and unpack using ctypes structure str\">stackoverflow.com/questions/1825715/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 3054, "user_id": 193848, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HWieK.jpg?s=128&g=1", "display_name": "Andrew Cottrell", "link": "https://stackoverflow.com/users/193848/andrew-cottrell"}, "edited": false, "score": 1, "creation_date": 1517507096, "post_id": 48552604, "comment_id": 84133795, "body": "Exceptionally helpful answer.  Thanks!"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "reply_to_user": {"reputation": 3054, "user_id": 193848, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HWieK.jpg?s=128&g=1", "display_name": "Andrew Cottrell", "link": "https://stackoverflow.com/users/193848/andrew-cottrell"}, "edited": false, "score": 1, "creation_date": 1517526572, "post_id": 48552604, "comment_id": 84143292, "body": "@AndrewCottrell you&#39;re welcome! Hopefully, this will make the transition to Python from C a little less painful. Note, Python and C are natural friends, when Guido created Python, he was aiming the language at &quot;Unix/C hackers.&quot;"}], "tags": [], "owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "is_accepted": true, "score": 4, "last_activity_date": 1517438628, "last_edit_date": 1517438628, "creation_date": 1517438288, "answer_id": 48552604, "question_id": 48552043, "link": "https://stackoverflow.com/questions/48552043/given-bytes-that-map-to-a-c-struct-how-to-access-the-bytes-via-the-c-structs-v/48552604#48552604", "title": "Given bytes that map to a C struct, how to access the bytes via the C struct&#39;s variable names", "body": "<p>You are looking for the <a href=\"https://docs.python.org/3/library/ctypes.html\" rel=\"nofollow noreferrer\"><code>ctypes</code> library</a>, which allows you to define Python wrappers around for complex, underlying C-struct. For a simple type:</p>\n\n<pre><code>import ctypes\n\nexample1_bytes = b'\\x08\\x09\\x0a\\x0b'\n\nclass Example1(ctypes.Structure):\n    _fields_ = (\n        ('val1', ctypes.c_uint8),\n        ('val2', ctypes.c_uint8),\n        ('val3', ctypes.c_uint8),\n        ('val4', ctypes.c_uint8)\n    )\n\nex1 = Example1.from_buffer_copy(example1_bytes)\n\nprint(ex1.val1, ex1.val2, ex1.val3, ex1.val4, sep='|')\n# 8|9|10|11\n</code></pre>\n\n<p>More complex structures:</p>\n\n<pre><code>class substruct(ctypes.Structure):\n    _fields_ = (\n        ('ss_val1', ctypes.c_uint8),\n        ('ss_val2', ctypes.c_uint8),\n    )\n\nclass Example2(ctypes.Structure):\n    _fields_ = (\n        ('val1', ctypes.c_uint8),\n        ('val2', ctypes.c_uint8),\n        ('ss', substruct*8), #array type!\n    )\n</code></pre>\n\n<p>Note, you define an array of type <code>T</code> of size <code>n</code> using the multiplication operator!: <code>T*n</code></p>\n\n<p>So, along with <code>Structures</code> and <code>Arrays</code>, it supports <code>Unions</code> and pointers, as well as containing all sorts of goodies for C-programmers.</p>\n\n<p>Note, you are using <code>bytes</code> objects, which are immutable and will require a copy when creating a structure. however, if you use a <code>bytearray</code>, you won't require a copy of the underlying buffer!:</p>\n\n<pre><code>In [4]: example1_bytes\nOut[4]: b'\\x08\\t\\n\\x0b'\n\nIn [5]: ex1.val2 = 99\n\nIn [6]: example1_bytes\nOut[6]: b'\\x08\\t\\n\\x0b'\n</code></pre>\n\n<p>However, using a bytearray:</p>\n\n<pre><code>In [16]: buffer = bytearray(example1_bytes)\n\nIn [17]: ex2 = Example1.from_buffer(buffer)\n\nIn [18]: ex2\nOut[18]: &lt;__main__.Example1 at 0x10a5b5598&gt;\n\nIn [19]: buffer\nOut[19]: bytearray(b'\\x08\\t\\n\\x0b')\n\nIn [20]: ex2.val2 = 99\n\nIn [21]: buffer\nOut[21]: bytearray(b'\\x08c\\n\\x0b')\n</code></pre>\n"}], "owner": {"reputation": 3054, "user_id": 193848, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/HWieK.jpg?s=128&g=1", "display_name": "Andrew Cottrell", "link": "https://stackoverflow.com/users/193848/andrew-cottrell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 620, "favorite_count": 0, "accepted_answer_id": 48552604, "answer_count": 1, "score": 2, "last_activity_date": 1517438628, "creation_date": 1517435508, "question_id": 48552043, "link": "https://stackoverflow.com/questions/48552043/given-bytes-that-map-to-a-c-struct-how-to-access-the-bytes-via-the-c-structs-v", "title": "Given bytes that map to a C struct, how to access the bytes via the C struct&#39;s variable names", "body": "<p>(Bear with me, I think in C and not Python, so you're probably about to see some real dumb stuff...)</p>\n\n<p>I have many (100+) different C <code>structs</code>, pulled into Python (version 3.5.1) as <code>bytes</code>, that I want to be able to access using the original C struct's variable names.  Here's a simple example.  In Python I have received these <code>bytes</code>:</p>\n\n<pre><code># In Python:\nexample1_bytes = b'\\x08\\x09\\x0a\\x0b'\n</code></pre>\n\n<p>Assume these <code>bytes</code> were provided by something running C, using a <code>struct</code> of the following format:</p>\n\n<pre><code>// In C:\nstruct example1 {\n  uint8_t val1;\n  uint8_t val2;\n  uint8_t val3;\n  uint8_t val4; };\n</code></pre>\n\n<p>How can I process <code>example1_bytes</code> so that I can access them like this:</p>\n\n<pre><code># In Python:\nresult = process_example1_bytes(example1_bytes)\nprint(result.val1)\n# Prints \"8\"\nprint(result.val2)\n# Prints \"9\"\n# Et cetera\n</code></pre>\n\n<p>Taking it a step further, what if the C <code>struct</code> is more complex and contains arrays and/or sub-structs?  For example, something like this:</p>\n\n<pre><code>// In C:\nstruct substruct {\n  uint8_t ss_val1;\n  uint8_t ss_val2; };\n\nstruct example2 {\n  uint8_t val1;\n  uint8_t val2;\n  struct substruct ss[8]; };\n</code></pre>\n\n<p>How can I process <code>example2_bytes</code> so that I can access them like this:</p>\n\n<pre><code># In Python:\nresult = process_example2_bytes(example2_bytes)\nprint(result.val1)\nprint(result.ss[3].ss_val2)\n</code></pre>\n\n<p>I've experimented a bit using Python's <code>struct</code> <code>unpack</code>, which returns tuples and I <em>think</em> is a step in the right direction, but it hasn't quite gotten me to the usable solution I want.  I'm not sure if I need to go down the <code>namedtuple</code> path or take some other direction.</p>\n"}, {"tags": ["python", "csv", "sorting", "search"], "comments": [{"owner": {"reputation": 11919, "user_id": 9183344, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U7r5r.png?s=128&g=1", "display_name": "r.ook", "link": "https://stackoverflow.com/users/9183344/r-ook"}, "edited": false, "score": 0, "creation_date": 1517436786, "post_id": 48552041, "comment_id": 84100931, "body": "Your <code>csv.DictReader(f)</code> buffer is gone once file is closed (outside the <code>with</code> block).  I&#39;m surprised it didn&#39;t give you a <code>ValueError</code>.  You need to execute all your functions in the <code>with</code> block."}, {"owner": {"reputation": 3, "user_id": 9296756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/300da16016e86f7ff619c3b5f60a8622?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Cullum", "link": "https://stackoverflow.com/users/9296756/justin-cullum"}, "reply_to_user": {"reputation": 11919, "user_id": 9183344, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U7r5r.png?s=128&g=1", "display_name": "r.ook", "link": "https://stackoverflow.com/users/9183344/r-ook"}, "edited": false, "score": 0, "creation_date": 1517439176, "post_id": 48552041, "comment_id": 84101965, "body": "Thanks Idlehands, that was a formatting error in the question. I&#39;ve edited the original post to accurately reflect how I have it."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 9296756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/300da16016e86f7ff619c3b5f60a8622?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Cullum", "link": "https://stackoverflow.com/users/9296756/justin-cullum"}, "edited": false, "score": 0, "creation_date": 1517439984, "post_id": 48552152, "comment_id": 84102261, "body": "Thanks Uday S. Your code ran but it is outputting only the first row (the column titles). To clarify, if I had a table with [Name, Gender, Age, Income, etc.] I need to find the oldest person(s) and print out the &quot;row&quot; containing their information. For example, I find that the oldest age is 62 and now I need to print all the people that are 62 and their information."}, {"owner": {"reputation": 3, "user_id": 9296756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/300da16016e86f7ff619c3b5f60a8622?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Cullum", "link": "https://stackoverflow.com/users/9296756/justin-cullum"}, "edited": false, "score": 0, "creation_date": 1517455908, "post_id": 48552152, "comment_id": 84106056, "body": "Disregard the above, the code you provided works perfectly however I overlooked the fact that it was reading my strings as values so when we searched for &quot;max value&quot; it was pulling up the title of the column as having the highest value. Ignoring the first row was sufficient to fixing the issue. Thanks again Uday S."}, {"owner": {"reputation": 674, "user_id": 6041169, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dg3EC.png?s=128&g=1", "display_name": "ExtractTable.com", "link": "https://stackoverflow.com/users/6041169/extracttable-com"}, "reply_to_user": {"reputation": 3, "user_id": 9296756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/300da16016e86f7ff619c3b5f60a8622?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Cullum", "link": "https://stackoverflow.com/users/9296756/justin-cullum"}, "edited": false, "score": 0, "creation_date": 1517492414, "post_id": 48552152, "comment_id": 84123957, "body": "@JustinCullum You are welcome. Your approach to the solution is correct, however, you need to explore the functions. if you want to skip the header you have to use next(reader) before making &#39;data&#39; list. Keep coding, keep exploring, keep helping."}], "tags": [], "owner": {"reputation": 674, "user_id": 6041169, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dg3EC.png?s=128&g=1", "display_name": "ExtractTable.com", "link": "https://stackoverflow.com/users/6041169/extracttable-com"}, "is_accepted": true, "score": 0, "last_activity_date": 1517436014, "creation_date": 1517436014, "answer_id": 48552152, "question_id": 48552041, "link": "https://stackoverflow.com/questions/48552041/python-3-x-searching-a-csv-file-for-a-specific-value-then-printing-the-row/48552152#48552152", "title": "Python 3.x - Searching a CSV file for a specific value then printing the row", "body": "<pre><code>import csv\n\nwith open('file_name.csv', 'r', newline='') as f:\n    reader = csv.reader(f)\n    # Saving CSV data into a list\n    data = [x for x in reader]\n\n# Get maximum value from list using max(list) function\nmax_thirdcol_val = max([x[2] for x in data])\n\n# Check row by row for 3 col value to max with Max value\nfor row in data:\n    if row[2] == max_thircol_val:\n        print(row)\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 9296756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/300da16016e86f7ff619c3b5f60a8622?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Cullum", "link": "https://stackoverflow.com/users/9296756/justin-cullum"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1245, "favorite_count": 0, "accepted_answer_id": 48552152, "answer_count": 1, "score": 0, "last_activity_date": 1517438932, "creation_date": 1517435506, "last_edit_date": 1517438932, "question_id": 48552041, "link": "https://stackoverflow.com/questions/48552041/python-3-x-searching-a-csv-file-for-a-specific-value-then-printing-the-row", "title": "Python 3.x - Searching a CSV file for a specific value then printing the row", "body": "<p>My task is to read a csv file, find the largest value in the third column and then store the row(s) with that largest value.</p>\n\n<p>So far, I have been able to read the csv file and find the largest value but I am unable to search for that value and get the rows.</p>\n\n<pre><code>import csv\n\nwith open('file_name.csv', 'r', newline='') as f:\n    reader = csv.DictReader(f)\n    ThirdCol = []\n\n#This block takes the 3rd column in the file and makes it a list. After sorting, the last value is the \"largest\" value.\n    for col in reader:\n        ThirdCol.append(col['colName']) \n        ThirdCol.sort()\n        Largest = ThirdCol[-1]\n\n#This block attempts to take the found largest value and print rows with their third columns matching the largest value.\n    for row in reader:\n        if Largest == row[2]:\n            print (row)\n</code></pre>\n\n<p>I'm not sure what is wrong here, my notebook is giving no output or error messages. I've narrowed down the issue to the \"row\" section of my code. My intent is to search through the [2] element in the rows, which should be the third column, and print the rows that have a row[2] matching what I determined to be the largest value in the previous for loop.</p>\n\n<p>From other questions on stackoverflow, I'm also thinking my problem may be related to the use of \"DictReader\" and how in the first for loop I'm searching using strings and the second for loop I'm using an integer.</p>\n\n<p>I'm very new to python, and programming in general. I was only given the link to the <a href=\"https://docs.python.org/3/library/csv.html\" rel=\"nofollow noreferrer\">documentation for CSV</a> and we have only covered the basic data types, functions and loops. I appreciate any direction anyone can give me, thanks.</p>\n"}, {"tags": ["python", "python-2.7", "urllib2"], "comments": [{"owner": {"reputation": 1704, "user_id": 5978459, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fHmIL.jpg?s=128&g=1", "display_name": "perfect5th", "link": "https://stackoverflow.com/users/5978459/perfect5th"}, "edited": false, "score": 0, "creation_date": 1517436382, "post_id": 48552038, "comment_id": 84100756, "body": "What&#39;s the value of <code>save</code>? Also, you appear to be defining your function in a <code>try</code> block, but you never call it."}, {"owner": {"reputation": 1704, "user_id": 5978459, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fHmIL.jpg?s=128&g=1", "display_name": "perfect5th", "link": "https://stackoverflow.com/users/5978459/perfect5th"}, "edited": false, "score": 1, "creation_date": 1517436683, "post_id": 48552038, "comment_id": 84100887, "body": "If, instead of a try/except, you simple allow the Exception to crash your script, you might be able to get more information from the traceback about what went wrong."}, {"owner": {"reputation": 155, "user_id": 8277652, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/57a76c9d2ccca4b4d07bdaebd8433d61?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/8277652/john"}, "reply_to_user": {"reputation": 1704, "user_id": 5978459, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fHmIL.jpg?s=128&g=1", "display_name": "perfect5th", "link": "https://stackoverflow.com/users/5978459/perfect5th"}, "edited": false, "score": 0, "creation_date": 1517436780, "post_id": 48552038, "comment_id": 84100928, "body": "save is just a string @perfect5th"}, {"owner": {"reputation": 1704, "user_id": 5978459, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fHmIL.jpg?s=128&g=1", "display_name": "perfect5th", "link": "https://stackoverflow.com/users/5978459/perfect5th"}, "edited": false, "score": 0, "creation_date": 1517436905, "post_id": 48552038, "comment_id": 84100989, "body": "See my previous comment about raising the Exception. Would be useful to see the full traceback."}, {"owner": {"reputation": 6690, "user_id": 4225229, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/2YfJM.jpg?s=128&g=1", "display_name": "JacobIRR", "link": "https://stackoverflow.com/users/4225229/jacobirr"}, "edited": false, "score": 0, "creation_date": 1517438914, "post_id": 48552038, "comment_id": 84101857, "body": "this may be more informative: <code>print(e.__dict__)</code>"}], "owner": {"reputation": 155, "user_id": 8277652, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/57a76c9d2ccca4b4d07bdaebd8433d61?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/8277652/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 169, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1517435490, "creation_date": 1517435490, "question_id": 48552038, "link": "https://stackoverflow.com/questions/48552038/urllib2-throwing-error-of-class-urllib2-urlerror", "title": "Urllib2 throwing error of &lt;class &#39;urllib2.URLError&#39;&gt;", "body": "<p>I cannot seem to see why this is not working. </p>\n\n<pre><code>import urllib2\nimport sys\n\ntry:\n    def script_create():\n        urllib2.urlopen(\"http://\"+sys.argv[1]+\":\"+sys.argv[2]+\"/?search=%00{.+\"+save+\".}\")\nexcept Exception as e:\n    e = sys.exc_info()[0]\n    print(e)\n</code></pre>\n\n<p>by executing this script like:</p>\n\n<pre><code>python myfile.py 192.168.1.2 4444\n</code></pre>\n\n<p>it gives:</p>\n\n<pre><code>&lt;class 'urllib2.URLError'&gt;\n</code></pre>\n\n<p>Thanks.</p>\n\n<p>Can someone help out please?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "pip", "psycopg2"], "comments": [{"owner": {"reputation": 6220, "user_id": 2216621, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/10c8cf1cdc1383558bd4b78a19d1b524?s=128&d=identicon&r=PG&f=1", "display_name": "Rob Watts", "link": "https://stackoverflow.com/users/2216621/rob-watts"}, "edited": false, "score": 1, "creation_date": 1517435604, "post_id": 48552036, "comment_id": 84100387, "body": "Do you have both python 2 and python 3 installed? If so, did you make sure to run python 3? Also, were you running in a virtual env but aren&#39;t now, or vice versa?"}, {"owner": {"reputation": 31, "user_id": 9296905, "user_type": "registered", "profile_image": "https://graph.facebook.com/1759520497431679/picture?type=large", "display_name": "Guilherme Arruda Sowek", "link": "https://stackoverflow.com/users/9296905/guilherme-arruda-sowek"}, "reply_to_user": {"reputation": 6220, "user_id": 2216621, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/10c8cf1cdc1383558bd4b78a19d1b524?s=128&d=identicon&r=PG&f=1", "display_name": "Rob Watts", "link": "https://stackoverflow.com/users/2216621/rob-watts"}, "edited": false, "score": 0, "creation_date": 1517438130, "post_id": 48552036, "comment_id": 84101546, "body": "I have python 2 and 3 installed. But I&#39;m using only python 3 (to instal and to import the psycopg2). And I didin&#39;t use the virtual env to install or import."}], "answers": [{"tags": [], "owner": {"reputation": 1675, "user_id": 6102984, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qgmVE.png?s=128&g=1", "display_name": "Sahil Nagpal", "link": "https://stackoverflow.com/users/6102984/sahil-nagpal"}, "is_accepted": false, "score": 0, "last_activity_date": 1527239624, "creation_date": 1527239624, "answer_id": 50525605, "question_id": 48552036, "link": "https://stackoverflow.com/questions/48552036/modulenotfounderror-no-module-named-psycopg2/50525605#50525605", "title": "ModuleNotFoundError: No module named &#39;psycopg2&#39;", "body": "<p>First Install psycopg2 on both the python version, only if you don't which one you are targetting.</p>\n\n<p>Command - pip install psycopg2 (for python 3)\nCommand - pip3 install psycopg2 (for python 2)</p>\n\n<p>Although, if it does not work there is one more way as well using the .whl(wheel file) </p>\n\n<p>using the wheel - pip install and from here you can download .whl file </p>\n\n<pre><code>pip install your.whl\n</code></pre>\n\n<p>Download the wheel file taking the version of your python in mind.</p>\n\n<p><a href=\"http://initd.org/psycopg/download/\" rel=\"nofollow noreferrer\">Psycopg2 whl file</a> </p>\n\n<p>Hope it helps.</p>\n"}, {"tags": [], "owner": {"reputation": 509, "user_id": 10320232, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-lLtRg7lioSs/AAAAAAAAAAI/AAAAAAAAAfQ/lxbwpkpWxuc/photo.jpg?sz=128", "display_name": "Kevin Martins", "link": "https://stackoverflow.com/users/10320232/kevin-martins"}, "is_accepted": false, "score": 0, "last_activity_date": 1554409344, "creation_date": 1554409344, "answer_id": 55524314, "question_id": 48552036, "link": "https://stackoverflow.com/questions/48552036/modulenotfounderror-no-module-named-psycopg2/55524314#55524314", "title": "ModuleNotFoundError: No module named &#39;psycopg2&#39;", "body": "<p>Execute (For Python 2)</p>\n\n<ul>\n<li><code>sudo apt-get install build-dep python-psycopg2</code> </li>\n<li><code>pip install psycopg2</code></li>\n</ul>\n\n<p>For Python 3</p>\n\n<ul>\n<li><code>sudo apt-get install build-dep python-psycopg3</code> </li>\n<li><code>pip install psycopg3</code></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 336, "user_id": 5771148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I0I2j.jpg?s=128&g=1", "display_name": "Khushhalm", "link": "https://stackoverflow.com/users/5771148/khushhalm"}, "is_accepted": false, "score": 4, "last_activity_date": 1589460796, "creation_date": 1589460796, "answer_id": 61797876, "question_id": 48552036, "link": "https://stackoverflow.com/questions/48552036/modulenotfounderror-no-module-named-psycopg2/61797876#61797876", "title": "ModuleNotFoundError: No module named &#39;psycopg2&#39;", "body": "<p>You can install 'psycopg2==2.7.5' using this command:</p>\n\n<pre><code>pip install psycopg2==2.7.5\n</code></pre>\n\n<p>psycopg2 2.7.5 is the last version that doesn't require building from source. Although it'll throw the following warning every time it is initialized in code: </p>\n\n<pre><code>UserWarning: The psycopg2 wheel package will be renamed from release 2.8; in order to keep installing from binary please use \"pip install psycopg2-binary\" instead. For details see: &lt;http://initd.org/psycopg/docs/install.html#binary-install-from-pypi&gt;.\n</code></pre>\n\n<p>So you can alternatively use <code>pip install psycopg2-binary</code></p>\n"}], "owner": {"reputation": 31, "user_id": 9296905, "user_type": "registered", "profile_image": "https://graph.facebook.com/1759520497431679/picture?type=large", "display_name": "Guilherme Arruda Sowek", "link": "https://stackoverflow.com/users/9296905/guilherme-arruda-sowek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4500, "favorite_count": 1, "answer_count": 3, "score": 3, "last_activity_date": 1589460796, "creation_date": 1517435476, "last_edit_date": 1560509976, "question_id": 48552036, "link": "https://stackoverflow.com/questions/48552036/modulenotfounderror-no-module-named-psycopg2", "title": "ModuleNotFoundError: No module named &#39;psycopg2&#39;", "body": "<p>I'm using Mac os.\nI installed pyscopg2 successfully (<code>pip3 install psycopg2</code>)</p>\n\n<p>But when I try to import psycopg2 I get the following message:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nModuleNotFoundError: No module named 'psycopg2'\n</code></pre>\n"}, {"tags": ["python", "keras", "loss-function"], "comments": [{"owner": {"reputation": 34711, "user_id": 5974433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ojtxg.jpg?s=128&g=1", "display_name": "Marcin Mo\u017cejko", "link": "https://stackoverflow.com/users/5974433/marcin-mo%c5%bcejko"}, "edited": false, "score": 0, "creation_date": 1517436638, "post_id": 48552002, "comment_id": 84100872, "body": "Try squeezing <code>y_true</code> outside the loss function. This part is causing an error as it is removing <code>batch_dimension</code> which is <code>None</code>."}, {"owner": {"reputation": 758, "user_id": 4120499, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-hjHqukNAB_M/AAAAAAAAAAI/AAAAAAAABmI/enS6buTqgpw/photo.jpg?sz=128", "display_name": "Blazina", "link": "https://stackoverflow.com/users/4120499/blazina"}, "reply_to_user": {"reputation": 34711, "user_id": 5974433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ojtxg.jpg?s=128&g=1", "display_name": "Marcin Mo\u017cejko", "link": "https://stackoverflow.com/users/5974433/marcin-mo%c5%bcejko"}, "edited": false, "score": 0, "creation_date": 1517470931, "post_id": 48552002, "comment_id": 84110936, "body": "@MarcinMo\u017cejko, you&#39;re absolutely correct, if I add <code>axis=2</code> as a parameter to <code>tf.squeeze()</code> the loss function works. Thanks a lot!"}, {"owner": {"reputation": 34711, "user_id": 5974433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ojtxg.jpg?s=128&g=1", "display_name": "Marcin Mo\u017cejko", "link": "https://stackoverflow.com/users/5974433/marcin-mo%c5%bcejko"}, "edited": false, "score": 0, "creation_date": 1517479329, "post_id": 48552002, "comment_id": 84115428, "body": "That&#39;s great - may I formulate the answer?"}, {"owner": {"reputation": 758, "user_id": 4120499, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-hjHqukNAB_M/AAAAAAAAAAI/AAAAAAAABmI/enS6buTqgpw/photo.jpg?sz=128", "display_name": "Blazina", "link": "https://stackoverflow.com/users/4120499/blazina"}, "reply_to_user": {"reputation": 34711, "user_id": 5974433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ojtxg.jpg?s=128&g=1", "display_name": "Marcin Mo\u017cejko", "link": "https://stackoverflow.com/users/5974433/marcin-mo%c5%bcejko"}, "edited": false, "score": 0, "creation_date": 1517480254, "post_id": 48552002, "comment_id": 84115988, "body": "Sure, that would be helpful. Another problem I&#39;m having now is that is is returning loss of nan. I&#39;m generating samples by pulling from a negative binomial distribution meaning that it has lots of zeros, which I try to offset by adding the esp constant to values but can&#39;t seem to get it to return values."}, {"owner": {"reputation": 758, "user_id": 4120499, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-hjHqukNAB_M/AAAAAAAAAAI/AAAAAAAABmI/enS6buTqgpw/photo.jpg?sz=128", "display_name": "Blazina", "link": "https://stackoverflow.com/users/4120499/blazina"}, "reply_to_user": {"reputation": 34711, "user_id": 5974433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ojtxg.jpg?s=128&g=1", "display_name": "Marcin Mo\u017cejko", "link": "https://stackoverflow.com/users/5974433/marcin-mo%c5%bcejko"}, "edited": false, "score": 0, "creation_date": 1517578133, "post_id": 48552002, "comment_id": 84163776, "body": "Ok, after debugging my loss function using first a combination of numpy and math.lgamma, and then using using keras.backend.eval(), I got it returning good losses. I&#39;ve edited my question to include the updated negative binomial loss. Thanks again for the help!"}], "owner": {"reputation": 758, "user_id": 4120499, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-hjHqukNAB_M/AAAAAAAAAAI/AAAAAAAABmI/enS6buTqgpw/photo.jpg?sz=128", "display_name": "Blazina", "link": "https://stackoverflow.com/users/4120499/blazina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 547, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1533130543, "creation_date": 1517435290, "last_edit_date": 1517578414, "question_id": 48552002, "link": "https://stackoverflow.com/questions/48552002/keras-custom-loss-with-3d-output", "title": "Keras custom loss with 3D output", "body": "<p>I am trying to implement the network described in this paper: <a href=\"https://arxiv.org/abs/1704.04110\" rel=\"nofollow noreferrer\">https://arxiv.org/abs/1704.04110</a></p>\n\n<p>And I am wondering how to create a custom loss function (in my case a negative binomial) which takes which has two y_pred parameters which are being estimated by the network. A simple example (network not as shown in paper but just for the purpose of asking this question):</p>\n\n<pre><code>n_neurons = 256\nn_batch = 100\nn_epochs = 50\ngru_cells=128\ndense_units = 20\n\n\nencoder_input_data_train = np.random.randn(100, 10, 2)\nX2_train = np.random.randn(100, 10, 1)\ntarget = np.random.randn(100, 10, 1)\n\ninputs = Input(shape=(encoder_input_data_train.shape[1], \nencoder_input_data_train.shape[2]))\naux_inputs  = Input(shape=(X2_train.shape[1], X2_train.shape[2]))\nencoder = GRU(gru_cells, input_shape=(None,), return_sequences=True)(inputs)\ncat = k.layers.concatenate([encoder, aux_inputs])\ntdist = TimeDistributed(Dense(dense_units, activation='relu'))(cat)\ndropout = Dropout(0.5)(tdist)\nout = TimeDistributed(Dense(2))(dropout)\nmodel = Model(inputs=[inputs, aux_inputs], outputs=[out])\nmodel.compile(loss=[nb_loss()], optimizer='adam')\nhistory = model.fit([encoder_input_data_train, X2_train],\n                    target, \n                    epochs=n_epochs,\n                    batch_size=n_batch,\n                    validation_split=0.20,\n                    verbose=1,\n                     callbacks=[k.callbacks.EarlyStopping(patience=2)])\n</code></pre>\n\n<p>My attempt at writing the loss is:</p>\n\n<pre><code>def nb_loss(y_true, y_pred):\n    eps = 1e-10\n    y_true = tf.squeeze(y_true, axis=2)\n    y_pred = y_pred[:, :]\n\n    alpha = y_pred[:, :, 0]\n    alpha = 1. / (alpha + eps)\n\n    mu = y_pred[:, :, 1]\n\n    t1 = -tf.lgamma(y_true + alpha + eps)\n    t2 = tf.lgamma(alpha + eps)\n    t3 = tf.lgamma(y_true + 1.0) \n\n    t4 = -(alpha * (tf.log(alpha + eps)))\n    t5 = -(y_true * (tf.log(mu + eps)))\n    t6 = (alpha + y_true) * tf.log(alpha + mu + eps)\n\n    loss = t1 + t2 + t3 + t4 + t5 + t6\n\n    return tf.reduce_mean(loss)\n</code></pre>\n\n<p>However when I run it throws a TypeError: 'NoneType' object cannot be interpreted as an integer.\nAnyone have experience writing custom loss functions such as this?</p>\n"}, {"tags": ["python", "numpy", "anaconda"], "comments": [{"owner": {"reputation": 11364, "user_id": 5351549, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f5c11fbd301040b24865853a1d73c914?s=128&d=identicon&r=PG&f=1", "display_name": "ewcz", "link": "https://stackoverflow.com/users/5351549/ewcz"}, "edited": false, "score": 3, "creation_date": 1517435248, "post_id": 48551971, "comment_id": 84100222, "body": "<code>inv</code> calculates multiplicative inverse, not a pseudoinverse, thus you need a square matrix on input"}, {"owner": {"reputation": 25, "user_id": 6841852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dce850ca36a5a6da499648ab3c2403fd?s=128&d=identicon&r=PG&f=1", "display_name": "A. Wali Jr.", "link": "https://stackoverflow.com/users/6841852/a-wali-jr"}, "reply_to_user": {"reputation": 11364, "user_id": 5351549, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f5c11fbd301040b24865853a1d73c914?s=128&d=identicon&r=PG&f=1", "display_name": "ewcz", "link": "https://stackoverflow.com/users/5351549/ewcz"}, "edited": false, "score": 0, "creation_date": 1517435347, "post_id": 48551971, "comment_id": 84100265, "body": "But it worked on a different system that I temporarily borrowed from a friend. That system was running Windows 10."}], "answers": [{"tags": [], "owner": {"reputation": 441, "user_id": 3701320, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b24fce51e1a5cce8ad73c71bf43bf1e?s=128&d=identicon&r=PG", "display_name": "Robert F. Dickerson", "link": "https://stackoverflow.com/users/3701320/robert-f-dickerson"}, "is_accepted": true, "score": 1, "last_activity_date": 1529959310, "last_edit_date": 1529959310, "creation_date": 1517435299, "answer_id": 48552003, "question_id": 48551971, "link": "https://stackoverflow.com/questions/48551971/numpy-linalg-inv-doesnt-work/48552003#48552003", "title": "numpy.linalg.inv() doesn&#39;t work", "body": "<p>Whenever a matrix has more rows than columns (the system of equations has more equations than unknowns), the system could be overdetermined- in other words, there is no exact solution. In fact, you cannot take an inverse of a non-square matrix.</p>\n\n<p>You might want to check the <a href=\"https://docs.scipy.org/doc/numpy-1.13.0/reference/generated/numpy.linalg.matrix_rank.html\" rel=\"nofollow noreferrer\">rank of the matrix</a>.</p>\n\n<p>However, practically, we end up using the pseudo-inverse for this scenario. You can look into using <code>pinv</code>.</p>\n\n<p><a href=\"https://docs.scipy.org/doc/numpy-1.14.0/reference/generated/numpy.linalg.pinv.html\" rel=\"nofollow noreferrer\">https://docs.scipy.org/doc/numpy-1.14.0/reference/generated/numpy.linalg.pinv.html</a></p>\n"}], "owner": {"reputation": 25, "user_id": 6841852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dce850ca36a5a6da499648ab3c2403fd?s=128&d=identicon&r=PG&f=1", "display_name": "A. Wali Jr.", "link": "https://stackoverflow.com/users/6841852/a-wali-jr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1101, "favorite_count": 0, "accepted_answer_id": 48552003, "answer_count": 1, "score": 1, "last_activity_date": 1529959310, "creation_date": 1517435153, "last_edit_date": 1517440437, "question_id": 48551971, "link": "https://stackoverflow.com/questions/48551971/numpy-linalg-inv-doesnt-work", "title": "numpy.linalg.inv() doesn&#39;t work", "body": "<p>I am trying to invert a 2-D matrix using the numpy.linalg.inv() function. However whenever I run it, it just seems to stop. Since I was using a matrix of dimensions 40989x52, I initially thought that this was an issue due to the so I tried waiting for it to process, but it just didn't proceed even after 30+mins. I later tried calling the inv() function with a 3x2 matrix but it surprisingly didn't work either.</p>\n\n<p>I am using python3.6 with Anaconda libraries on 64-bit Ubuntu.</p>\n\n<p>Could this be a library issue or is it an issue with my system?</p>\n"}, {"tags": ["python", "opencv", "raspberry-pi3"], "owner": {"reputation": 576, "user_id": 5252277, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/jxfJU.jpg?s=128&g=1", "display_name": "gatorreina", "link": "https://stackoverflow.com/users/5252277/gatorreina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 863, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1517434737, "creation_date": 1517434737, "question_id": 48551875, "link": "https://stackoverflow.com/questions/48551875/cant-access-logitech-c920-webcam-with-opencv-on-raspberry-pi-3-stretch", "title": "Can&#39;t access Logitech c920 Webcam with opencv on Raspberry Pi 3 Stretch", "body": "<p>I can access and take a picture with the camera using  fswebcam. However, if I run the python code below I get: \"Camera Not Online\". I built opencv-3.3.1 and opencv_contrib-3.3.1 per <a href=\"https://www.pyimagesearch.com/2015/10/26/how-to-install-opencv-3-on-raspbian-jessie/\" rel=\"nofollow noreferrer\">this tutorial</a> and it works fine for my Raspberry Pi Camera Module just not for the webcam.</p>\n\n<pre><code>cap = cv2.VideoCapture(0)\n\nwhile(True):\n    # Capture frame-by-frame\n    ret, frame = cap.read()\n\n    if cap.isOpened():\n        print(\"Webcam online.\")\n    else :\n        print(\"Camera Not Online\")\n\n# When everything done, release the capture\ncap.release()\ncv2.destroyAllWindows()\n</code></pre>\n\n<p>Going crazy. Any help greatly appreciated.</p>\n"}, {"tags": ["python", "git"], "comments": [{"owner": {"reputation": 181, "user_id": 3608301, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/efefb3d53ba61a3b2ec25a26c6f26355?s=128&d=identicon&r=PG&f=1", "display_name": "rchav9", "link": "https://stackoverflow.com/users/3608301/rchav9"}, "edited": false, "score": 0, "creation_date": 1517434610, "post_id": 48551826, "comment_id": 84099907, "body": "Are you trying to do this regularly? I.e. a cron job?"}, {"owner": {"reputation": 165, "user_id": 6004338, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e308ab44dfed24441ab1f2163ecdb45e?s=128&d=identicon&r=PG&f=1", "display_name": "Sean", "link": "https://stackoverflow.com/users/6004338/sean"}, "reply_to_user": {"reputation": 181, "user_id": 3608301, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/efefb3d53ba61a3b2ec25a26c6f26355?s=128&d=identicon&r=PG&f=1", "display_name": "rchav9", "link": "https://stackoverflow.com/users/3608301/rchav9"}, "edited": false, "score": 0, "creation_date": 1517434752, "post_id": 48551826, "comment_id": 84099979, "body": "No this is really just a one time thing. I saw some other posts about using curl with git tokens, but those weren&#39;t working on my mac. Something to do with ruby I believe."}, {"owner": {"reputation": 181, "user_id": 3608301, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/efefb3d53ba61a3b2ec25a26c6f26355?s=128&d=identicon&r=PG&f=1", "display_name": "rchav9", "link": "https://stackoverflow.com/users/3608301/rchav9"}, "edited": false, "score": 0, "creation_date": 1517438457, "post_id": 48551826, "comment_id": 84101691, "body": "Likely you haven&#39;t setup your ssh keys/https info, for the login mechanism in your GitHub instance."}], "answers": [{"comments": [{"owner": {"reputation": 165, "user_id": 6004338, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e308ab44dfed24441ab1f2163ecdb45e?s=128&d=identicon&r=PG&f=1", "display_name": "Sean", "link": "https://stackoverflow.com/users/6004338/sean"}, "edited": false, "score": 0, "creation_date": 1517435309, "post_id": 48551926, "comment_id": 84100247, "body": "I&#39;m getting the following error: AttributeError: module &#39;git&#39; has no attribute &#39;clone_from&#39;. I think it&#39;s because clone_from is a part of the repo class in the library."}, {"owner": {"reputation": 55797, "user_id": 7976758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/512cfbaf98d63ca4acd57b2df792aec6?s=128&d=identicon&r=PG", "display_name": "phd", "link": "https://stackoverflow.com/users/7976758/phd"}, "edited": false, "score": 1, "creation_date": 1517437428, "post_id": 48551926, "comment_id": 84101229, "body": "<code>git.Repo.clone_from(url)</code>"}], "tags": [], "owner": {"reputation": 181, "user_id": 3608301, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/efefb3d53ba61a3b2ec25a26c6f26355?s=128&d=identicon&r=PG&f=1", "display_name": "rchav9", "link": "https://stackoverflow.com/users/3608301/rchav9"}, "is_accepted": false, "score": 1, "last_activity_date": 1517438269, "last_edit_date": 1517438269, "creation_date": 1517434930, "answer_id": 48551926, "question_id": 48551826, "link": "https://stackoverflow.com/questions/48551826/python-git-clone-over-a-list/48551926#48551926", "title": "python git clone over a list", "body": "<p>This is a pretty well-documented library: <a href=\"https://gitpython.readthedocs.io/en/stable/reference.html#git.repo.base.Repo.clone\" rel=\"nofollow noreferrer\">https://gitpython.readthedocs.io/en/stable/reference.html#git.repo.base.Repo.clone</a></p>\n\n<pre><code>import git\ngit.Repo.clone_from(url)\n</code></pre>\n\n<blockquote>\n  <p>Create a clone from the given URL</p>\n  \n  <p>Parameters:<br>\n  url \u2013 valid git url, see \n  <a href=\"http://www.kernel.org/pub/software/scm/git/docs/git-clone.html#URLS\" rel=\"nofollow noreferrer\">http://www.kernel.org/pub/software/scm/git/docs/git-clone.html#URLS</a>\n  to_path \u2013 Path to which the repository should be cloned to\n  progress \u2013 See \u2018git.remote.Remote.push\u2019.\n  env \u2013 Optional dictionary containing the desired environment variables.\n  kwargs \u2013 see the clone method\n  Returns:<br>\n  Repo instance pointing to the cloned directory</p>\n</blockquote>\n\n<p>EDIT: +1 @phd</p>\n"}], "owner": {"reputation": 165, "user_id": 6004338, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e308ab44dfed24441ab1f2163ecdb45e?s=128&d=identicon&r=PG&f=1", "display_name": "Sean", "link": "https://stackoverflow.com/users/6004338/sean"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 212, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1517438269, "creation_date": 1517434506, "last_edit_date": 1517435210, "question_id": 48551826, "link": "https://stackoverflow.com/questions/48551826/python-git-clone-over-a-list", "title": "python git clone over a list", "body": "<p>I'm trying to clone all of the repos in an private github enterprise organisation. So far, I've managed to get every repo link in a Python list by webscraping with Selenium, and just need to run git clone on each list element. </p>\n\n<p>I was thinking there might be a way to either:</p>\n\n<p>1) turn the list into an environment variable, and create a git clone bash loop that I run in my jupyter labs notebook, or</p>\n\n<p>2) use a python git library to clone each repo in my list to a specified directory</p>\n\n<p>Please let me know how this can be achieved.</p>\n\n<p>Here's my code:</p>\n\n<pre><code>from scrapy.selector import Selector\nfrom selenium import webdriver\n\ndef get_repo_link():\n    \"\"\"\n    Use scrapy and xpath to scrape repository urls\n    \"\"\"\n    xpath_str = '//div[@class=\"d-inline-block mb-1\"]/h3/a'\n    git_link = Selector(text=html).xpath(xpath_str).extract()\n    return git_link\n\n# I am running this from a jupyter labs notebook, and need to login \n# to the organisation after the Selenium chrome window comes up\ndriver = webdriver.Chrome(executable_path='/anaconda/chromedriver')\ndriver.get(url='https://git.enterprise.name/org-name')\n\nlinks = []\nfor num in range(1,7):\n    if num == 1:\n        html = driver.page_source\n        for link in get_repo_link():\n            links.append(\"https://git.enterprise.name\" + link.split('\"')[1])\n    else:\n        git_url = 'https://git.enterprise.name/org-name' + '?page=' + str(num)\n        driver.get(url=git_url)\n        html = driver.page_source\n        for link in get_repo_link():\n            links.append(\"https://git.enterprise.name\" + link.split('\"')[1])\n\n# example of output of links:\n['https://git.enterprise.name/org-name/some-repo-name',\n 'https://git.enterprise.name/org-name/another-repo-name']\n</code></pre>\n"}, {"tags": ["python", "pandas", "pandas-groupby"], "answers": [{"tags": [], "owner": {"reputation": 32054, "user_id": 6287308, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NdmQp.jpg?s=128&g=1", "display_name": "Vaishali", "link": "https://stackoverflow.com/users/6287308/vaishali"}, "is_accepted": false, "score": 2, "last_activity_date": 1517435110, "creation_date": 1517435110, "answer_id": 48551959, "question_id": 48551823, "link": "https://stackoverflow.com/questions/48551823/perform-aggregation-on-multiindex-pandas-series/48551959#48551959", "title": "Perform Aggregation on MultiIndex Pandas Series", "body": "<p>You can use groupby on a multiindex using levels, say</p>\n\n<pre><code>df.groupby(level = [1,2]).mean()\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 32054, "user_id": 6287308, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NdmQp.jpg?s=128&g=1", "display_name": "Vaishali", "link": "https://stackoverflow.com/users/6287308/vaishali"}, "edited": false, "score": 0, "creation_date": 1517435237, "post_id": 48551978, "comment_id": 84100217, "body": "This is better than using groupby :)"}, {"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "reply_to_user": {"reputation": 32054, "user_id": 6287308, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NdmQp.jpg?s=128&g=1", "display_name": "Vaishali", "link": "https://stackoverflow.com/users/6287308/vaishali"}, "edited": false, "score": 1, "creation_date": 1517435272, "post_id": 48551978, "comment_id": 84100232, "body": "@Vaishali, it&#39;s just a little bit shorter... ;-)"}], "tags": [], "owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "is_accepted": false, "score": 2, "last_activity_date": 1517435246, "last_edit_date": 1517435246, "creation_date": 1517435196, "answer_id": 48551978, "question_id": 48551823, "link": "https://stackoverflow.com/questions/48551823/perform-aggregation-on-multiindex-pandas-series/48551978#48551978", "title": "Perform Aggregation on MultiIndex Pandas Series", "body": "<p>Use <code>Series.mean(level=[...])</code>:</p>\n\n<pre><code>In [13]: s.mean(level=['person','shift'])\nOut[13]:\nperson  shift\nAdams   A             336.745\nSmith   B             381.240\n        B_Overtime     77.710\nConner  A             473.080\nAdams   B             441.350\nSmith   C             392.970\nConner  C             124.630\nName: val, dtype: float64\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 793481, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8b1b41be16e4503b2c64fa3b44bc1f66?s=128&d=identicon&r=PG", "display_name": "lowjumpingfrog", "link": "https://stackoverflow.com/users/793481/lowjumpingfrog"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1517435246, "creation_date": 1517434468, "question_id": 48551823, "link": "https://stackoverflow.com/questions/48551823/perform-aggregation-on-multiindex-pandas-series", "title": "Perform Aggregation on MultiIndex Pandas Series", "body": "<p>I would like to perform an aggregation on a multi-index pandas series that looks like so:</p>\n\n<pre><code>revenue = \ndate        person       shift      \n2017-10-19  Adams        A           298.70\n            Smith        B           593.46\n                         B_Overtime  77.71\n2017-10-20  Conner       A           473.08\n            Adams        B           441.35\n            Smith        C           392.97\n2017-10-21  Adams        A           374.79\n            Smith        B           169.02\n            Conner       C           124.63\n</code></pre>\n\n<p>Where the series is for revenue by date, person and shift. I would like to find the mean of revenue by person and shift, then revenue mean by shift. If I do something like revenue.mean() it just gives me one number since it is a series and can't us groupy again. I looked at unstacking the Series but that seems to make things worse, since I have a bunch of 0's. Which I suppose are ok,since they won't contribute to a mean value. I am stuck on this one. </p>\n"}, {"tags": ["python", "regex", "notepad++"], "comments": [{"owner": {"reputation": 481672, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1517434707, "post_id": 48551790, "comment_id": 84099962, "body": "Use the <code>re.DOTALL</code> or <code>re.S</code> flag when compiling the regex, or add <code>(?s)</code> at the start of the pattern."}, {"owner": {"reputation": 18043, "user_id": 28045, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/e4TH3.jpg?s=128&g=1", "display_name": "johnny", "link": "https://stackoverflow.com/users/28045/johnny"}, "reply_to_user": {"reputation": 481672, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1517435382, "post_id": 48551790, "comment_id": 84100285, "body": "@WiktorStribi\u017cew This did not work.  I get the same results.  Nothing, blank line.  I have tried re.DOTALL, re.S and (?s).  Please consider reopening."}, {"owner": {"reputation": 18043, "user_id": 28045, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/e4TH3.jpg?s=128&g=1", "display_name": "johnny", "link": "https://stackoverflow.com/users/28045/johnny"}, "reply_to_user": {"reputation": 481672, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1517435977, "post_id": 48551790, "comment_id": 84100562, "body": "I am still looking at what you said.  Don&#39;t reopen."}, {"owner": {"reputation": 481672, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1517436721, "post_id": 48551790, "comment_id": 84100909, "body": "Check <a href=\"https://ideone.com/fxj9GE\" rel=\"nofollow noreferrer\">ideone.com/fxj9GE</a>"}, {"owner": {"reputation": 18043, "user_id": 28045, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/e4TH3.jpg?s=128&g=1", "display_name": "johnny", "link": "https://stackoverflow.com/users/28045/johnny"}, "reply_to_user": {"reputation": 481672, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1517436921, "post_id": 48551790, "comment_id": 84100997, "body": "@WiktorStribi\u017cew Thank you."}], "owner": {"reputation": 18043, "user_id": 28045, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/e4TH3.jpg?s=128&g=1", "display_name": "johnny", "link": "https://stackoverflow.com/users/28045/johnny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "closed_date": 1517434653, "answer_count": 0, "score": 0, "last_activity_date": 1517434340, "creation_date": 1517434340, "question_id": 48551790, "link": "https://stackoverflow.com/questions/48551790/how-do-i-convert-a-notepad-scintilla-regular-expression-that-matches-a-newline", "closed_reason": "Duplicate", "title": "How do I convert a Notepad++ Scintilla Regular Expression that matches a newline to Python re?", "body": "<p>I have the text below from a file.  I have also tried it from within the program as a string (using <code>'''mytext'''</code>).</p>\n\n<pre><code>RECORD1  Sed similique nostrum quibusdam minus. Rerum repudiandae et ipsum numquam commodi repellendus. Aut minima ratione vel \nbeatae minima reprehenderit provident neque. Earum quam temporibus repudiandae quidem officiis\nRECORD2 Sed similique nostrum quibusdam minus. Rerum repudiandae et ipsum numquam commodi repellendus. Aut minima ratione vel \nbeatae minima reprehenderit provident neque. Earum quam temporibus repudiandae quidem officiis\nRECORD3   It is a long established fact that a reader will be distracted by the readable content of a page when looking at its \nlayout. \nRECORD4 \n</code></pre>\n\n<p>If I use Notepad++'s find with,</p>\n\n<p><code>(RECORD.*?\\s).*?(?=(RECORD.*?\\s))</code> <strong>(and I check newline)</strong></p>\n\n<p>I can match from RECORDx to just before the next RECORDx. In other words, I get this below because of my look ahead.</p>\n\n<pre><code>RECORD1  Sed similique nostrum quibusdam minus. Rerum repudiandae et ipsum numquam commodi repellendus. Aut minima ratione vel \nbeatae minima reprehenderit provident neque. Earum quam temporibus repudiandae quidem officiis\n</code></pre>\n\n<p>So I only get the Record which is what I need.  It does this with the positive look ahead <code>(?=(RECORD.*?\\s))</code> and \"match newline\" in Notepad++.  This does not seem to work in Python, and I do not know how to format it correctly.  How do I do a look ahead in Python like I did in Notepad++?</p>\n\n<p>I have looked at this, <a href=\"https://markantoniou.blogspot.com/2008/06/notepad-how-to-use-regular-expressions.html\" rel=\"nofollow noreferrer\">https://markantoniou.blogspot.com/2008/06/notepad-how-to-use-regular-expressions.html</a></p>\n\n<p>But I am not sure what to do.</p>\n\n<p>This is my Python and it returns to the prompt with nothing.  I know <code>re</code> is working because I can do things like <code>.*</code> and it works fine, or even <code>(RECORD.*?\\s)</code> to return just the literal word RECORD.</p>\n\n<pre><code>import re\nregex = r\"(RECORD.*?\\s).*?(?=(RECORD.*?\\s))\"\nfilepath = 'test.txt'\nwith open(filepath) as fp:\n    data = fp.read()\nmatches = re.finditer(regex, data)\nfor matchNum, match in enumerate(matches):\n    matchNum = matchNum + 1\n\n    print (\"Match {matchNum} was found at {start}-{end}: {match}\".format(matchNum = matchNum, start = match.start(), end = match.end(), match = match.group()))\n\n    for groupNum in range(0, len(match.groups())):\n        groupNum = groupNum + 1\n\n        print (\"Group {groupNum} found at {start}-{end}: {group}\".format(groupNum = groupNum, start = match.start(groupNum), end = match.end(groupNum), group = match.group(groupNum)))\n</code></pre>\n\n<p>(I did the actual regex and the readfile, but most of the rest is generated from <a href=\"https://regex101.com/\" rel=\"nofollow noreferrer\">https://regex101.com/</a>)  Among other places, I have looked here, <a href=\"https://stackoverflow.com/questions/8069349/python-regex-positive-look-ahead\">Python regex positive look ahead</a>, and I have tried various pattern combinations in Python and Notepad++.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1517434289, "post_id": 48551707, "comment_id": 84099730, "body": "You can use recursion here."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5510840"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1517434403, "post_id": 48551707, "comment_id": 84099796, "body": "@Willem Van Onsem Isn&#39;t os.walk() already recursive?"}, {"owner": {"reputation": 3670, "user_id": 7857466, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7OW0s.png?s=128&g=1", "display_name": "progmatico", "link": "https://stackoverflow.com/users/7857466/progmatico"}, "edited": false, "score": 0, "creation_date": 1517434795, "post_id": 48551707, "comment_id": 84099996, "body": "Print the triple (I mean the tuple with three values) that os.walk returns in each iteration; if you understand the data os.walk gives you, you&#39;ll have no problem using it."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1517434803, "post_id": 48551707, "comment_id": 84100001, "body": "Yes, but the point is more how you will store it in a list, so instead of using <code>os.walk(..)</code> you can do the recursion yourself."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5510840"}, "edited": false, "score": 0, "creation_date": 1517473471, "post_id": 48552174, "comment_id": 84112177, "body": "Thanks, even better with the symlink problem solved."}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 0, "last_activity_date": 1517436101, "creation_date": 1517436101, "answer_id": 48552174, "question_id": 48551707, "link": "https://stackoverflow.com/questions/48551707/python-getting-a-recursive-list-of-directory-and-subdirectory/48552174#48552174", "title": "Python - Getting a recursive list of directory and subdirectory", "body": "<p>We can obtain a list of the <em>immediate</em> subdirectories with:</p>\n\n<pre><code>from os import listdir\nfrom os.path import join, isdir\n\nsubdirs = [join(d, o) for o in listdir(d) if isdir(join(d,o))]\n</code></pre>\n\n<p>We can use this in a recursive way with:</p>\n\n<pre><code>from os import listdir\nfrom os.path import join, isdir\n\ndef obtain_subdir_tuples(d):\n    subdirs = [join(d, o) for o in listdir(d) if isdir(join(d,o))]\n    return (d, [obtain_subdir_tuples(subdir) for subdir in subdirs])\n</code></pre>\n\n<p>A potential problem with this is however that we can also follow symbolic links and get stuck in infinite recursion: a symbolic link in a directory that points to the parent (or an anchestor in general) of that directory. In that case the directory is thus a child of itself somehow. We can avoid this by first looking whether it is a symbolic link with <code>islink</code>:</p>\n\n<pre><code>from os import listdir\nfrom os.path import join, isdir, islink\n\ndef obtain_subdir_tuples(d):\n    subdirs = [join(d, o)\n               for o in listdir(d)\n               if isdir(join(d, o)) and not islink(join(d, o))]\n    return (d, [obtain_subdir_tuples(subdir) for subdir in subdirs])\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5510840"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 48552174, "answer_count": 1, "score": 1, "last_activity_date": 1517436101, "creation_date": 1517433959, "question_id": 48551707, "link": "https://stackoverflow.com/questions/48551707/python-getting-a-recursive-list-of-directory-and-subdirectory", "title": "Python - Getting a recursive list of directory and subdirectory", "body": "<p>I would like to get a list of tuple containing every directory and their sub-directories, for instance, with a tree like this:</p>\n\n<pre><code>-A\n---AA\n---AB\n-----ABA\n-----ABB\n-B\n---BA\n---BB\n</code></pre>\n\n<p>I would get a list looking like this:</p>\n\n<pre><code>[\n    (A, [\n            (AA, []),\n            (AB, [\n                     (ABA, []),\n                     (ABB, []),\n                 ]),\n        ]),\n    (B, [\n            (BA, []),\n            (BB, []),\n        ]),\n]\n</code></pre>\n\n<p>I am not interested about the files.</p>\n\n<p>I tried using <em>os.walk('.')</em>, but I didn't manage to get inside the directories before moving to the next entry.</p>\n\n<p>Any idea ?</p>\n"}, {"tags": ["python", "python-3.x", "tkinter"], "comments": [{"owner": {"reputation": 1139, "user_id": 4179277, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96cfab2e6f13ebeb1d86b1d3b9e4bf2b?s=128&d=identicon&r=PG", "display_name": "BingsF", "link": "https://stackoverflow.com/users/4179277/bingsf"}, "edited": false, "score": 1, "creation_date": 1517436338, "post_id": 48551702, "comment_id": 84100734, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/16424091/why-does-tkinter-image-not-show-up-if-created-in-a-function\">Why does Tkinter image not show up if created in a function?</a>"}, {"owner": {"reputation": 61, "user_id": 9047256, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/878acd70d94223aa4b80eb945e3b6c9f?s=128&d=identicon&r=PG&f=1", "display_name": "sharjeel", "link": "https://stackoverflow.com/users/9047256/sharjeel"}, "reply_to_user": {"reputation": 1139, "user_id": 4179277, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96cfab2e6f13ebeb1d86b1d3b9e4bf2b?s=128&d=identicon&r=PG", "display_name": "BingsF", "link": "https://stackoverflow.com/users/4179277/bingsf"}, "edited": false, "score": 0, "creation_date": 1517439227, "post_id": 48551702, "comment_id": 84101993, "body": "i tried self.bishop to counter the garbage collection but got the same result."}, {"owner": {"reputation": 10223, "user_id": 7032856, "user_type": "registered", "accept_rate": 81, "profile_image": "https://lh6.googleusercontent.com/-v2P-pqI1pww/AAAAAAAAAAI/AAAAAAAAABg/BHOFSOpQ0BM/photo.jpg?sz=128", "display_name": "Nae", "link": "https://stackoverflow.com/users/7032856/nae"}, "edited": false, "score": 0, "creation_date": 1517439538, "post_id": 48551702, "comment_id": 84102127, "body": "Please format your code better using <code>{}</code> button above."}, {"owner": {"reputation": 10223, "user_id": 7032856, "user_type": "registered", "accept_rate": 81, "profile_image": "https://lh6.googleusercontent.com/-v2P-pqI1pww/AAAAAAAAAAI/AAAAAAAAABg/BHOFSOpQ0BM/photo.jpg?sz=128", "display_name": "Nae", "link": "https://stackoverflow.com/users/7032856/nae"}, "edited": false, "score": 0, "creation_date": 1517439580, "post_id": 48551702, "comment_id": 84102136, "body": "Please provide <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> for the specific question you&#39;re asking, as opposed to your current code."}], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 9047256, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/878acd70d94223aa4b80eb945e3b6c9f?s=128&d=identicon&r=PG&f=1", "display_name": "sharjeel", "link": "https://stackoverflow.com/users/9047256/sharjeel"}, "edited": false, "score": 0, "creation_date": 1517695173, "post_id": 48553515, "comment_id": 84201527, "body": "I seem to be getting the same result, im not really sure what the problem is."}], "tags": [], "owner": {"reputation": 10223, "user_id": 7032856, "user_type": "registered", "accept_rate": 81, "profile_image": "https://lh6.googleusercontent.com/-v2P-pqI1pww/AAAAAAAAAAI/AAAAAAAAABg/BHOFSOpQ0BM/photo.jpg?sz=128", "display_name": "Nae", "link": "https://stackoverflow.com/users/7032856/nae"}, "is_accepted": false, "score": 0, "last_activity_date": 1517444917, "last_edit_date": 1517444917, "creation_date": 1517444084, "answer_id": 48553515, "question_id": 48551702, "link": "https://stackoverflow.com/questions/48551702/how-to-add-image-in-tkinter-gui/48553515#48553515", "title": "How to add image in tkinter gui?", "body": "<p>You have a single line that tries to put an image to GUI:</p>\n\n<pre><code>self.canvas.create_image(1,1, image=bishop, tags=(name, \"Bishop\"), anchor= \"c\")\n</code></pre>\n\n<p>which is under <code>addpiece</code>.</p>\n\n<p>The line below saves the image in a reference:</p>\n\n<pre><code>bishop = tk.PhotoImage(file='C:\\\\Users\\\\Sharjeel Jan\\\\Desktop\\\\final shit man\\\\Pieces\\\\Bishop.gif')\n</code></pre>\n\n<p>which is defined <em>exclusively</em> for the scope of <code>addpiece</code>, when the method is finished, the image disappears if at all being displayed.</p>\n\n<p>Which effectively <em>makes</em> this question a duplicate to <a href=\"https://stackoverflow.com/q/16424091/7032856\">Why does Tkinter image not show up if created in a function?</a></p>\n\n<hr>\n\n<p>In order to prevent that, make the image reference available in the scope where <code>mainloop</code> is called.</p>\n\n<p>Either <em>attach</em> the reference <code>bishop</code> <em>to</em> an object, for example <code>self.canvas</code>, whose reference is available in the scope of <code>mainloop</code>:</p>\n\n<pre><code>self.canvas.bishop = tk.PhotoImage(file='C:\\\\Users\\\\Sharjeel Jan\\\\Desktop\\\\final shit man\\\\Pieces\\\\Bishop.gif')\nself.canvas.create_image(1,1, image=self.canvas.bishop, tags=(name, \"Bishop\"), anchor= \"c\")\n</code></pre>\n\n<p>or simply pass the image reference from the <code>mainloop</code> scope is in, and <em>use</em> that object reference:</p>\n\n<pre><code>self.canvas.create_image(1,1, image=image, tags=(name, \"Bishop\"), anchor= \"c\")\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 9047256, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/878acd70d94223aa4b80eb945e3b6c9f?s=128&d=identicon&r=PG&f=1", "display_name": "sharjeel", "link": "https://stackoverflow.com/users/9047256/sharjeel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 615, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1517444917, "creation_date": 1517433925, "last_edit_date": 1517439100, "question_id": 48551702, "link": "https://stackoverflow.com/questions/48551702/how-to-add-image-in-tkinter-gui", "title": "How to add image in tkinter gui?", "body": "<p>I picked up this code and wanted to mess with it, the main problem i'm having is being unable to add an image to the actual gui at a set location on the 2 dimensional array. I get no actual error but also get no output of the image on the gui. Please help! Thank you.</p>\n\n<pre><code>import tkinter as tk\nclass GameBoard(tk.Frame):\n    def __init__(self, parent, rows=9, columns=9, size=60, color1=\"light grey\", color2=\"light grey\"):\n        '''size is the size of a square, in pixels'''\n\n        self.rows = rows\n        self.columns = columns\n        self.size = size\n        self.color1 = color1\n        self.color2 = color2\n        self.pieces = {}\n\n        canvas_width = columns * size\n        canvas_height = rows * size\n\n        tk.Frame.__init__(self, parent)\n        self.canvas = tk.Canvas(self, borderwidth=0, highlightthickness=0,\n                            width=canvas_width, height=canvas_height, background=\"white\")\n        self.canvas.pack(side=\"top\", fill=\"both\", expand=True, padx=2, pady=2)\n\n        self.canvas.bind(\"&lt;Configure&gt;\", self.refresh)\n\n    def addpiece(self, name, image, row=1, column=1):\n        bishop = tk.PhotoImage(file='C:\\\\Users\\\\Sharjeel Jan\\\\Desktop\\\\final shit man\\\\Pieces\\\\Bishop.gif')\n        self.canvas.create_image(1,1, image=bishop, tags=(name, \"Bishop\"), anchor= \"c\")\n        self.placepiece(name, row, column)\n\n    def placepiece(self, name, row, column):\n        '''Place a piece at the given row/column'''\n        self.pieces[name] = (row, column)\n        x0 = (column * self.size) + int(self.size/2)\n        y0 = (row * self.size) + int(self.size/2)\n        self.canvas.coords(name, x0, y0)\n</code></pre>\n\n<p>def placepiece(self, name, row, column):\n        '''Place a piece at the given row/column'''\n        self.pieces[name] = (row, column)\n        x0 = (column * self.size) + int(self.size/2)\n        y0 = (row * self.size) + int(self.size/2)\n        self.canvas.coords(name, x0, y0)</p>\n\n<pre><code>  def refresh(self, event):\n        '''Redraw the board, possibly in response to window being resized'''\n        xsize = int((event.width-1) / self.columns)\n        ysize = int((event.height-1) / self.rows)\n        self.size = min(xsize, ysize)\n        self.canvas.delete(\"square\")\n        color = self.color2\n        for row in range(self.rows):\n            color = self.color1 if color == self.color2 else self.color2\n            for col in range(self.columns):\n                x1 = (col * self.size)\n                y1 = (row * self.size)\n                x2 = x1 + self.size\n                y2 = y1 + self.size\n                self.canvas.create_rectangle(x1, y1, x2, y2, outline=\"black\", fill=color, tags=\"square\")\n                color = self.color1 if color == self.color2 else self.color2\n        for name in self.pieces:\n            self.placepiece(name, self.pieces[name][0], self.pieces[name][1])\n        self.canvas.tag_raise(\"piece\")\n        self.canvas.tag_lower(\"square\")\n\n\n\n\nif __name__ == \"__main__\":\n    root = tk.Tk()\n    board = GameBoard(root)\n    board.pack(side=\"top\", fill=\"both\", expand=\"true\", padx=4, pady=4)\n  # player1 = tk.PhotoImage(data=imagedata)\n  # board.addpiece(\"player1\", player1, 0,0)\n    root.mainloop()\n</code></pre>\n"}, {"tags": ["python", "multithreading", "locking", "python-multithreading"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1517434453, "post_id": 48551679, "comment_id": 84099821, "body": "Not in the standard library. I don&#39;t know about existing libraries. <a href=\"https://stackoverflow.com/questions/37624289/value-based-thread-lock\">The last time I saw something like this come up</a>, a few of us ended up writing our own implementations."}, {"owner": {"reputation": 7225, "user_id": 1899628, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/PAWN2.png?s=128&g=1", "display_name": "stenci", "link": "https://stackoverflow.com/users/1899628/stenci"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1517443179, "post_id": 48551679, "comment_id": 84103228, "body": "@user2357112 thanks, that&#39;s similar to what I have, but in a function (I was managing the dictionaries every time I was locking it). I modified it and added the context manager."}], "answers": [{"tags": [], "owner": {"reputation": 7225, "user_id": 1899628, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/PAWN2.png?s=128&g=1", "display_name": "stenci", "link": "https://stackoverflow.com/users/1899628/stenci"}, "is_accepted": true, "score": 1, "last_activity_date": 1517443054, "last_edit_date": 1517443054, "creation_date": 1517441669, "answer_id": 48553188, "question_id": 48551679, "link": "https://stackoverflow.com/questions/48551679/is-there-a-parametric-locking-mechanism-in-python/48553188#48553188", "title": "Is there a parametric locking mechanism in Python?", "body": "<p>Inspired by the answer to the <a href=\"https://stackoverflow.com/questions/37624289/value-based-thread-lock\">post</a> mentioned in the comment I created a class that seems to do the job. </p>\n\n<p>I used the code from that answer, added <code>timeout</code> and <code>blocking</code> arguments and put it inside a class so I can use it as a context manager. The class uses static methods, so it can be instantiated once or it can be created many times (as the test below does in <code>slow_worker_2</code>).</p>\n\n<p>The first part of the code is the class, the second part tests both explicit <code>acquire</code> and <code>release</code> and the context manager with <code>with</code>. </p>\n\n<pre><code>import threading\nimport time\n\nnamespace_lock = threading.Lock()\nnamespace = {}\ncounters = {}\n\n\nclass NamespaceLock:\n    def __init__(self, group):\n        self.group = group\n\n    def __enter__(self):\n        self.__class__.acquire_lock(self.group)\n\n    def __exit__(self, exc_type, exc_val, exc_tb):\n        self.__class__.release_lock(self.group)\n\n    @staticmethod\n    def acquire_lock(value, blocking=True, timeout=-1.0):\n        with namespace_lock:\n            if value in namespace:\n                counters[value] += 1\n            else:\n                namespace[value] = threading.Lock()\n                counters[value] = 1\n\n        return namespace[value].acquire(blocking=blocking, timeout=timeout)\n\n    @staticmethod\n    def release_lock(value):\n        with namespace_lock:\n            if counters[value] == 1:\n                del counters[value]\n                lock = namespace.pop(value)\n            else:\n                counters[value] -= 1\n                lock = namespace[value]\n\n        lock.release()\n\n\ndef slow_worker_1(group, seconds):\n    if NamespaceLock.acquire_lock(group, timeout=2.5):\n        print('Start   {} {}'.format(group, seconds))\n        time.sleep(seconds)\n        print('End     {} {}'.format(group, seconds))\n        NamespaceLock.release_lock(group)\n    else:\n        print('Timeout {} {}'.format(group, seconds))\n\n\ndef slow_worker_2(group, seconds):\n    with NamespaceLock(group):\n        print('Start {} {}'.format(group, seconds))\n        time.sleep(seconds)\n        print('End   {} {}'.format(group, seconds))\n\n\ndef join_all(name):\n    for t in threading.enumerate():\n        if t.name == name:\n            t.join()\n\n\nif __name__ == '__main__':\n    print('explicit acquire and release')\n\n    threading.Thread(target=slow_worker_1, args=('g1', 1), name='worker').start()\n    threading.Thread(target=slow_worker_1, args=('g2', 2), name='worker').start()\n    threading.Thread(target=slow_worker_1, args=('g1', 3), name='worker').start()\n    threading.Thread(target=slow_worker_1, args=('g2', 4), name='worker').start()\n    threading.Thread(target=slow_worker_1, args=('g1', 5), name='worker').start()\n\n    join_all('worker')\n\n    print('context manager')\n\n    threading.Thread(target=slow_worker_2, args=('g1', 1), name='worker').start()\n    threading.Thread(target=slow_worker_2, args=('g2', 2), name='worker').start()\n    threading.Thread(target=slow_worker_2, args=('g1', 3), name='worker').start()\n    threading.Thread(target=slow_worker_2, args=('g2', 4), name='worker').start()\n    threading.Thread(target=slow_worker_2, args=('g1', 5), name='worker').start()\n\n    join_all('worker')\n</code></pre>\n"}], "owner": {"reputation": 7225, "user_id": 1899628, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/PAWN2.png?s=128&g=1", "display_name": "stenci", "link": "https://stackoverflow.com/users/1899628/stenci"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 151, "favorite_count": 1, "accepted_answer_id": 48553188, "answer_count": 1, "score": 2, "last_activity_date": 1517443054, "creation_date": 1517433823, "question_id": 48551679, "link": "https://stackoverflow.com/questions/48551679/is-there-a-parametric-locking-mechanism-in-python", "title": "Is there a parametric locking mechanism in Python?", "body": "<p>By <em>parametric</em> I mean a lock that can be used with a parameter and lock only the threads that use the same parameter. The parameter can have thousands of different values, and it's impossible to create a dictionary of <code>threading.Lock</code> objects, one per parameter value.</p>\n\n<p>A function on my web server accepts two parameters, a group and something else. Every time the function is called it checks if a group file has changed (very fast), and if it has changed it does something with it (very slow). The slow process for each group is completely independent from the other groups and can happen at the same time, but two elements of each group cannot be processed at the same time, nor while the group is being processed.</p>\n\n<p>I was able to get it to work using a global list of groups being processed, but now that I'm done with it I think it's really ugly and there must be a better way.</p>\n\n<p>The snippet below shows what I'm looking for. It uses an imaginary <code>LockWithGroup</code>. Is there something similar in Python?</p>\n\n<pre><code>process_lock = threading.LockWithGroup()\ndef process_element(group, element):\n    print('Start', group)\n\n    with process_lock(group):\n        if needs_update(group):\n            print('Updating', group)\n            update_group(group)\n            print('Updated', group)\n\n    with process_lock(group):\n        retval = do_something_with(group, element)\n\n    print('End', group)\n\n    return retval\n\nprocess_element('g1', e1)   # a\nprocess_element('g1', e2)   #  b\nprocess_element('g1', e3)   #   c\nprocess_element('g2', e4)   #    d\nprocess_element('g2', e5)   #     e\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>&gt; Start g1                  # a\n&gt; Start g2                  #    d\n&gt; Updating g1               # a\n&gt; Updating g2               #    d\n&gt; Updated g1                # a\n&gt; End g1                    # a\n&gt; Start g1                  #  b\n&gt; End g1                    #  b\n&gt; Start g1                  #   c\n&gt; Updated g2                #    d\n&gt; End g2                    #    d\n&gt; Start g2                  #     e    \n&gt; End g1                    #   c\n&gt; End g2                    #     e\n</code></pre>\n"}, {"tags": ["javascript", "python", "django"], "answers": [{"tags": [], "owner": {"reputation": 633, "user_id": 4558602, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-lAKtLomiKDU/AAAAAAAAAAI/AAAAAAAAAB0/GSkJkVYn9HM/photo.jpg?sz=128", "display_name": "Abhishek Menon", "link": "https://stackoverflow.com/users/4558602/abhishek-menon"}, "is_accepted": false, "score": 0, "last_activity_date": 1517436585, "creation_date": 1517436585, "answer_id": 48552277, "question_id": 48551674, "link": "https://stackoverflow.com/questions/48551674/how-do-i-link-to-django-static-assets-from-my-javascript-files/48552277#48552277", "title": "How do I link to Django static assets from my JavaScript files?", "body": "<p>Django converts the <code>static</code> template tag URLs into its corresponding absolute URIs at render time. You cannot use Django template tags in your JavaScript files. There are two ways to get around this problem.</p>\n\n<ol>\n<li>Find out the absolute URI of the resource, and use that in your JS file. </li>\n<li>Move the section that requires the use of an external link into your HTML file. And do the following:</li>\n</ol>\n\n<p><code>&lt;span id=\"absoluteURIResource\" style=\"display: hidden;\"&gt;{% static \"path/to/your/resource\" %}&lt;/span&gt;</code></p>\n\n<p>and then in your JavaScript you can access this as:</p>\n\n<p><code>var path = document.getElementByID(\"absoluteURIResource\").innerHTML;</code></p>\n\n<p>The second one is more of a hack, figuring out the absolute URI would be easier.</p>\n"}], "owner": {"reputation": 1203, "user_id": 6009931, "user_type": "registered", "accept_rate": 24, "profile_image": "https://www.gravatar.com/avatar/f75100c2f1ba45f38368d3b2fabddc8e?s=128&d=identicon&r=PG&f=1", "display_name": "yoursweater", "link": "https://stackoverflow.com/users/6009931/yoursweater"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1517436585, "creation_date": 1517433810, "question_id": 48551674, "link": "https://stackoverflow.com/questions/48551674/how-do-i-link-to-django-static-assets-from-my-javascript-files", "title": "How do I link to Django static assets from my JavaScript files?", "body": "<p>I'm trying to load a specific file but failing due to the way Django manages relative paths. Here's the structure of my app:</p>\n\n<pre><code>mysite\n|-- manage.py\n|-- mysite\n    |-- __init__.py\n    |-- settings.py\n    |-- urls.py\n    |-- wsgi.py\n|-- app\n    |-- __init__.py\n    |-- models.py\n    |-- tests.py\n    |-- views.py\n    |-- static\n        |-- JS\n            |-- myScript.js\n        |-- data\n            |-- myData.geojson\n|-- templates\n    |-- app\n        |-- index.html\n</code></pre>\n\n<p>In other words, pretty standard. The two key parts are that I load myScript.js in to my index.html like so:</p>\n\n<pre><code>&lt;script type='text/javascript' src=\"{% static '/JS/myScript.js' %}\"&gt;&lt;/script&gt;\n</code></pre>\n\n<p>The issue is that, within myScript.js, I want to load in myData.geojson. This doesn't work:</p>\n\n<pre><code>...\n'url': '/static/data/myData.geojson'\n...\n</code></pre>\n\n<p>nor does</p>\n\n<pre><code>'url': '{% static /data/myData.geojson %}' #this throws an error\n</code></pre>\n\n<p>I just want a project setup where I can use relative path to do this:</p>\n\n<pre><code>'url': '../data/myData.geojson'\n</code></pre>\n\n<p>Is that possible? My current settings are this:</p>\n\n<pre><code>STATIC_URL = '/static/'\nSTATIC_ROOT = '/var/www/mysite/static'\n</code></pre>\n"}, {"tags": ["python", "kivy"], "answers": [{"comments": [{"owner": {"reputation": 101, "user_id": 8713173, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh4.googleusercontent.com/-pQe-gg98kHc/AAAAAAAAAAI/AAAAAAAAAAc/IlRqiz8GhU4/photo.jpg?sz=128", "display_name": "Adam Kamil", "link": "https://stackoverflow.com/users/8713173/adam-kamil"}, "edited": false, "score": 0, "creation_date": 1517619968, "post_id": 48563024, "comment_id": 84183173, "body": "NameError: name &#39;sm&#39; is not defined"}, {"owner": {"reputation": 7186, "user_id": 5741460, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oxgS1vLh9Co/AAAAAAAAAAI/AAAAAAAAAAA/5hRLB7BLWWA/photo.jpg?sz=128", "display_name": "Yoav Glazner", "link": "https://stackoverflow.com/users/5741460/yoav-glazner"}, "reply_to_user": {"reputation": 101, "user_id": 8713173, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh4.googleusercontent.com/-pQe-gg98kHc/AAAAAAAAAAI/AAAAAAAAAAc/IlRqiz8GhU4/photo.jpg?sz=128", "display_name": "Adam Kamil", "link": "https://stackoverflow.com/users/8713173/adam-kamil"}, "edited": false, "score": 0, "creation_date": 1517690677, "post_id": 48563024, "comment_id": 84200258, "body": "@AdamKamil - its a ScreenManager, change it to fit your code"}, {"owner": {"reputation": 101, "user_id": 8713173, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh4.googleusercontent.com/-pQe-gg98kHc/AAAAAAAAAAI/AAAAAAAAAAc/IlRqiz8GhU4/photo.jpg?sz=128", "display_name": "Adam Kamil", "link": "https://stackoverflow.com/users/8713173/adam-kamil"}, "edited": false, "score": 0, "creation_date": 1518120201, "post_id": 48563024, "comment_id": 84386178, "body": "<code>def callback(instance):     scene=ScreenManager()     scene.current = &quot;OpeningScreen&quot;     print(&quot;Work?!&quot;)</code> -                                                      <code>self.add_widget(ImageButton(source=(&#39;image.png&#39;), size=(200,200), size_hint=(0.2, 0.2), on_press=callback, pos_hint={&quot;x&quot;:0.3, &quot;top&quot;:0.7}))</code>"}, {"owner": {"reputation": 7186, "user_id": 5741460, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oxgS1vLh9Co/AAAAAAAAAAI/AAAAAAAAAAA/5hRLB7BLWWA/photo.jpg?sz=128", "display_name": "Yoav Glazner", "link": "https://stackoverflow.com/users/5741460/yoav-glazner"}, "reply_to_user": {"reputation": 101, "user_id": 8713173, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh4.googleusercontent.com/-pQe-gg98kHc/AAAAAAAAAAI/AAAAAAAAAAc/IlRqiz8GhU4/photo.jpg?sz=128", "display_name": "Adam Kamil", "link": "https://stackoverflow.com/users/8713173/adam-kamil"}, "edited": false, "score": 0, "creation_date": 1518121157, "post_id": 48563024, "comment_id": 84386681, "body": "You are using not using <code>ScreenManager</code> correctly, you should create it only once"}, {"owner": {"reputation": 101, "user_id": 8713173, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh4.googleusercontent.com/-pQe-gg98kHc/AAAAAAAAAAI/AAAAAAAAAAc/IlRqiz8GhU4/photo.jpg?sz=128", "display_name": "Adam Kamil", "link": "https://stackoverflow.com/users/8713173/adam-kamil"}, "edited": false, "score": 0, "creation_date": 1518658636, "post_id": 48563024, "comment_id": 84600464, "body": "What do you mean by creating only once?"}, {"owner": {"reputation": 7186, "user_id": 5741460, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oxgS1vLh9Co/AAAAAAAAAAI/AAAAAAAAAAA/5hRLB7BLWWA/photo.jpg?sz=128", "display_name": "Yoav Glazner", "link": "https://stackoverflow.com/users/5741460/yoav-glazner"}, "reply_to_user": {"reputation": 101, "user_id": 8713173, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh4.googleusercontent.com/-pQe-gg98kHc/AAAAAAAAAAI/AAAAAAAAAAc/IlRqiz8GhU4/photo.jpg?sz=128", "display_name": "Adam Kamil", "link": "https://stackoverflow.com/users/8713173/adam-kamil"}, "edited": false, "score": 0, "creation_date": 1518677184, "post_id": 48563024, "comment_id": 84605285, "body": "def build(): global sm; sm = ScreenManager()"}, {"owner": {"reputation": 101, "user_id": 8713173, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh4.googleusercontent.com/-pQe-gg98kHc/AAAAAAAAAAI/AAAAAAAAAAc/IlRqiz8GhU4/photo.jpg?sz=128", "display_name": "Adam Kamil", "link": "https://stackoverflow.com/users/8713173/adam-kamil"}, "edited": false, "score": 0, "creation_date": 1518721073, "post_id": 48563024, "comment_id": 84632516, "body": "I&#39;ve done that and it says that there is no screen called &quot;Screen_Five&quot;"}, {"owner": {"reputation": 7186, "user_id": 5741460, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oxgS1vLh9Co/AAAAAAAAAAI/AAAAAAAAAAA/5hRLB7BLWWA/photo.jpg?sz=128", "display_name": "Yoav Glazner", "link": "https://stackoverflow.com/users/5741460/yoav-glazner"}, "reply_to_user": {"reputation": 101, "user_id": 8713173, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh4.googleusercontent.com/-pQe-gg98kHc/AAAAAAAAAAI/AAAAAAAAAAc/IlRqiz8GhU4/photo.jpg?sz=128", "display_name": "Adam Kamil", "link": "https://stackoverflow.com/users/8713173/adam-kamil"}, "edited": false, "score": 0, "creation_date": 1518761961, "post_id": 48563024, "comment_id": 84645651, "body": "please provide a full small example."}, {"owner": {"reputation": 101, "user_id": 8713173, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh4.googleusercontent.com/-pQe-gg98kHc/AAAAAAAAAAI/AAAAAAAAAAc/IlRqiz8GhU4/photo.jpg?sz=128", "display_name": "Adam Kamil", "link": "https://stackoverflow.com/users/8713173/adam-kamil"}, "edited": false, "score": 0, "creation_date": 1518810026, "post_id": 48563024, "comment_id": 84671895, "body": "kivy.uix.screenmanager.ScreenManagerException: No Screen with name &quot;Screen_Five&quot;."}, {"owner": {"reputation": 101, "user_id": 8713173, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh4.googleusercontent.com/-pQe-gg98kHc/AAAAAAAAAAI/AAAAAAAAAAc/IlRqiz8GhU4/photo.jpg?sz=128", "display_name": "Adam Kamil", "link": "https://stackoverflow.com/users/8713173/adam-kamil"}, "edited": false, "score": 0, "creation_date": 1518810088, "post_id": 48563024, "comment_id": 84671917, "body": "I put the &#39;sm&#39; inside the def build and I get this error now. I dont know why but I have that screen in my code."}], "tags": [], "owner": {"reputation": 7186, "user_id": 5741460, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oxgS1vLh9Co/AAAAAAAAAAI/AAAAAAAAAAA/5hRLB7BLWWA/photo.jpg?sz=128", "display_name": "Yoav Glazner", "link": "https://stackoverflow.com/users/5741460/yoav-glazner"}, "is_accepted": false, "score": 3, "last_activity_date": 1517488831, "creation_date": 1517488831, "answer_id": 48563024, "question_id": 48551672, "link": "https://stackoverflow.com/questions/48551672/kivy-changing-screens-with-buttons-python-code/48563024#48563024", "title": "Kivy Changing screens with buttons python code", "body": "<p>You sent <code>ScreenFive</code> as callback for <strong>on_press</strong>. the <em>callback</em> is called with the button instance so your error raise.</p>\n\n<p>try this:</p>\n\n<pre><code>def callback(instance):\n    sm.current = \"screen_five\"\n\n... ... on_press=callback\n</code></pre>\n"}], "owner": {"reputation": 101, "user_id": 8713173, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh4.googleusercontent.com/-pQe-gg98kHc/AAAAAAAAAAI/AAAAAAAAAAc/IlRqiz8GhU4/photo.jpg?sz=128", "display_name": "Adam Kamil", "link": "https://stackoverflow.com/users/8713173/adam-kamil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1517488831, "creation_date": 1517433802, "last_edit_date": 1517435872, "question_id": 48551672, "link": "https://stackoverflow.com/questions/48551672/kivy-changing-screens-with-buttons-python-code", "title": "Kivy Changing screens with buttons python code", "body": "<p>I keep getting this error</p>\n\n<p>TypeError: <code>__init__()</code> takes 1 positional argument but 2 were given</p>\n\n<p>I tried everything to make it work but it still seems not to work. I'm trying to make an button where you click it if makes you go to a different screen but in python code.</p>\n\n<pre><code>self.add_widget(ImageButton(source=('Image.png'), size=(200,200), size_hint=(0.2, 0.2), on_press=ScreenFive, pos_hint={\"x\":0.3, \"top\":0.7}))\n</code></pre>\n\n<p>Can you help me? Thanks!</p>\n"}, {"tags": ["python", "excel", "csv", "tkinter"], "comments": [{"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 2, "creation_date": 1517434342, "post_id": 48551668, "comment_id": 84099762, "body": "have you worked through a tkinter tutorial yet? That would be the first step. Then, search this site for questions about creating tables in tkinter -- there are several."}, {"owner": {"reputation": 1, "user_id": 9296789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/185dd9b4e642318efe18547282ef5309?s=128&d=identicon&r=PG&f=1", "display_name": "M Hals", "link": "https://stackoverflow.com/users/9296789/m-hals"}, "reply_to_user": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1517434888, "post_id": 48551668, "comment_id": 84100046, "body": "Hi Bryan have worked through many and cannot find anything relating to this"}, {"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 3, "creation_date": 1517435978, "post_id": 48551668, "comment_id": 84100564, "body": "Nothing? Seriously? <a href=\"https://stackoverflow.com/search?q=%5Btkinter%5D+table\">stackoverflow.com/search?q=%5Btkinter%5D+table</a> and"}], "owner": {"reputation": 1, "user_id": 9296789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/185dd9b4e642318efe18547282ef5309?s=128&d=identicon&r=PG&f=1", "display_name": "M Hals", "link": "https://stackoverflow.com/users/9296789/m-hals"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 108, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1517433783, "creation_date": 1517433783, "question_id": 48551668, "link": "https://stackoverflow.com/questions/48551668/turning-a-csv-file-into-a-tabular-format-like-excel-in-python", "title": "turning a csv file into a tabular format like excel in python", "body": "<p>I currently have a CSV file from excel. I would like to import this into python and Tkinter and have it formatted so that it displays it has columns and rows. like it would be displayed in excel. I would also like this to be editable. how can I go about this in python?</p>\n"}, {"tags": ["python", "text"], "comments": [{"owner": {"reputation": 32215, "user_id": 3789550, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8mGqv.gif?s=128&g=1", "display_name": "heemayl", "link": "https://stackoverflow.com/users/3789550/heemayl"}, "edited": false, "score": 1, "creation_date": 1517434105, "post_id": 48551660, "comment_id": 84099648, "body": "To know <i>whats wrong</i>, remove the <code>except: continue</code> block."}], "answers": [{"tags": [], "owner": {"reputation": 73, "user_id": 7278264, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-k0fxd2z9ots/AAAAAAAAAAI/AAAAAAAAE_k/Olbu9_60A3c/photo.jpg?sz=128", "display_name": "Marshal Hayes", "link": "https://stackoverflow.com/users/7278264/marshal-hayes"}, "is_accepted": false, "score": 0, "last_activity_date": 1517434913, "creation_date": 1517434913, "answer_id": 48551919, "question_id": 48551660, "link": "https://stackoverflow.com/questions/48551660/text-mining-a-txt-file-using-python/48551919#48551919", "title": "text mining a txt file using python", "body": "<p>The easiest way to read all the lines in a file with Python is to use the <code>readlines()</code> function. However, it looks like you are reading JSON...</p>\n\n<p>You should instead, then, take a look at the <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.read_json.html\" rel=\"nofollow noreferrer\">Pandas <code>read_json()</code></a> function. Pandas is a wonderful, powerful module for doing things like this. </p>\n"}], "owner": {"reputation": 1, "user_id": 9295349, "user_type": "registered", "profile_image": "https://graph.facebook.com/1979564992283655/picture?type=large", "display_name": "Samuel Abiola", "link": "https://stackoverflow.com/users/9295349/samuel-abiola"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 520, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1517434913, "creation_date": 1517433755, "last_edit_date": 1517433895, "question_id": 48551660, "link": "https://stackoverflow.com/questions/48551660/text-mining-a-txt-file-using-python", "title": "text mining a txt file using python", "body": "<p>Hello I am new to this site and python,</p>\n\n<p>I was trying to import data from a txt file into python and it was only reading one tweet out of the several hundreds on there. </p>\n\n<p>I have no idea what is wrong, please can someone help out.</p>\n\n<p>this is the code:</p>\n\n<pre><code>tweets_data = []\ntweets_file = open('unclassified_tweets.txt', \"r\")\nfor line in tweets_file:\n    try:\n        tweet = json.loads(line)\n        tweets_data.append(tweet)\n    except:\n        continue\n</code></pre>\n"}, {"tags": ["python", "graph", "plotly"], "owner": {"reputation": 3212, "user_id": 2233706, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/224116af88436575b20ba30f2fd9d995?s=128&d=identicon&r=PG", "display_name": "user2233706", "link": "https://stackoverflow.com/users/2233706/user2233706"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 155, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1517433717, "creation_date": 1517433717, "question_id": 48551653, "link": "https://stackoverflow.com/questions/48551653/dynamically-delete-points-in-plotly-graph", "title": "Dynamically delete points in plotly graph", "body": "<p>How can I delete points from a plotly generated HTML graph and have the fit line adjust dynamically?  I don't want to change the data in the code.  I would also like to update the equation of the line.  Here is the code:</p>\n\n<pre><code>import plotly.plotly as py\nimport plotly.graph_objs as go\nimport plotly\n\n# Scientific libraries\nfrom numpy import arange,array,ones\nfrom scipy import stats\n\n\n# (Almost) linear sequence\ny = [19, 20, 20.5, 21.5, 22, 23, 23, 25.5, 24]\n\n# Generated linear fit\nslope, intercept, r_value, p_value, std_err = stats.linregress(xi,y)\nline = slope*xi+intercept\n\n# Creating the dataset, and generating the plot\ntrace1 = go.Scatter(\n                  x=xi,\n                  y=y,\n                  mode='markers',\n                  marker=go.Marker(color='rgb(255, 127, 14)'),\n                  name='Data'\n                  )\n\ntrace2 = go.Scatter(\n                  x=xi,\n                  y=line,\n                  mode='lines',\n                  marker=go.Marker(color='rgb(255, 127, 14)'),\n                  name='y = %fx + %f' % (slope, intercept)\n                  )\n\nlayout = go.Layout(\n                title='Linear Fit in Python',\n                )\n\ndata = [trace1, trace2]\nfig = go.Figure(data=data, layout=layout)\n\nplotly.offline.plot(fig, filename='Linear-Fit-in-python')\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 2, "creation_date": 1517433695, "post_id": 48551635, "comment_id": 84099449, "body": "Yes, look into <code>multithreading</code>."}, {"owner": {"reputation": 35319, "user_id": 871910, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f073f5ca74b61813e689bbda8d12ba2b?s=128&d=identicon&r=PG", "display_name": "zmbq", "link": "https://stackoverflow.com/users/871910/zmbq"}, "edited": false, "score": 0, "creation_date": 1517433727, "post_id": 48551635, "comment_id": 84099465, "body": "Also, look into asynchronous operations."}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 4, "creation_date": 1517433730, "post_id": 48551635, "comment_id": 84099466, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/2957116/make-2-functions-run-at-the-same-time\">Make 2 functions run at the same time</a>"}], "answers": [{"comments": [{"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1517437701, "post_id": 48552459, "comment_id": 84101353, "body": "A beginner-focused question is not really the place to introduce one side of an ongoing holy war, even if it&#39;s a well-argued side. (BTW, I personally split my dev work between Go and Clojure, so I have a foot in both worlds -- continuation-passing async, and race-free lockless threading by virtue of immutable data with explicit state-management primitives; they both have their value, and their place)."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1517438039, "post_id": 48552459, "comment_id": 84101508, "body": "(If you aren&#39;t familiar with Clojure&#39;s concurrency model, I&#39;d suggest looking it -- basically, it puts the same transactional semantics around threads modifying in-memory variables that a modern RDBMS puts on updates, ensuring that each read is based on a consistent view of an individual point in time, and that each write is based on content that wasn&#39;t modified while the transaction was in-flight, by retrying transactions -- which can be done by virtue of using pure functions inside your transactional code)"}, {"owner": {"reputation": 8720, "user_id": 3846213, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/5PGh1.jpg?s=128&g=1", "display_name": "Eli Korvigo", "link": "https://stackoverflow.com/users/3846213/eli-korvigo"}, "edited": false, "score": 0, "creation_date": 1517438043, "post_id": 48552459, "comment_id": 84101509, "body": "You&#39;ve left out that all those pitfalls of concurrent parallelism mostly (if not entirely) disappear once you start coding in a functional style."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1517438073, "post_id": 48552459, "comment_id": 84101520, "body": "@Phil, ...point being, the &quot;all threading is racy, hard to reason about and deadlock-prone&quot; strawman you&#39;re building might represent threading as-practiced in a whole lot of the world (particularly those parts of the world whose building blocks for developing software center around mutable objects), but it&#39;s a strawman nonetheless."}, {"owner": {"reputation": 131, "user_id": 9241942, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2aebbdf52a1bfd975d9cc7f4e557a3c3?s=128&d=identicon&r=PG&f=1", "display_name": "Phil", "link": "https://stackoverflow.com/users/9241942/phil"}, "reply_to_user": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1517451640, "post_id": 48552459, "comment_id": 84105144, "body": "@CharlesDuffy, fair points. I did open a can of worms by bringing up other languages. But, I&#39;m fairly certain that the general consensus (that I&#39;ve seen, at least, in my research) is that concurrency-type problems <i>in Python</i> are best handled with <code>asyncio</code>, especially for devs just starting out in that realm"}, {"owner": {"reputation": 131, "user_id": 9241942, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2aebbdf52a1bfd975d9cc7f4e557a3c3?s=128&d=identicon&r=PG&f=1", "display_name": "Phil", "link": "https://stackoverflow.com/users/9241942/phil"}, "edited": false, "score": 0, "creation_date": 1517451746, "post_id": 48552459, "comment_id": 84105183, "body": "It is true that you <i>can</i> do threading stuff in a way that does not deadlock. It seems like it&#39;s easier for beginners to shift to a parallel mindset with async. Dunno. Certainly didn&#39;t mean it in a flamey sort of way."}], "tags": [], "owner": {"reputation": 131, "user_id": 9241942, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2aebbdf52a1bfd975d9cc7f4e557a3c3?s=128&d=identicon&r=PG&f=1", "display_name": "Phil", "link": "https://stackoverflow.com/users/9241942/phil"}, "is_accepted": false, "score": 0, "last_activity_date": 1517437518, "creation_date": 1517437518, "answer_id": 48552459, "question_id": 48551635, "link": "https://stackoverflow.com/questions/48551635/more-than-one-process-at-the-same-time/48552459#48552459", "title": "More than one process at the same time", "body": "<p>TL;DR: Use an async approach. Raymond Hettinger is a god, and <a href=\"https://www.youtube.com/watch?v=9zinZmE3Ogk&amp;t=26s\" rel=\"nofollow noreferrer\">this talk</a> explains this concept more accurately and thoroughly than I can. ;)</p>\n\n<p>The behavior you are describing is called \"concurrency\" or \"asynchronicity\", where you have more than one \"piece\" of code executing \"at the same time\". This is one of the hardest problems in practical computer science, because adding the dimension of time causes scheduling problems in addition to logic problems. However, it is very much in demand these days because of multi-core processors and the inherently parallel environment of the internet</p>\n\n<p>\"At the same time\" is in quotes, because there are two basic ways to make this happen: </p>\n\n<ol>\n<li><em>actually</em> run the code at the same time </li>\n<li>make it <em>look</em> like it is running at the same time.</li>\n</ol>\n\n<p>The first option is called Concurrent programing, and the second is called Asynchronous programming (commonly \"async\"). </p>\n\n<p>Generally, \"modern\" programming seems to favor async, because it's easier to reason about and comes with fewer, less severe pitfalls. If you do it right, async programs can look a lot like the synchronous, procedural code you're already familiar with. Golang is basically built on the concept. Javascript has embraced \"futures\" in the form of Promises and <code>async</code>/<code>await</code>. I know it's not Python, but <a href=\"https://vimeo.com/49718712\" rel=\"nofollow noreferrer\">this talk</a> by the creator of Go gives a good overview of the philosophy.</p>\n\n<p>Python gives you three main ways to approach this, separated into three major modules: <code>threading</code>, <code>multiprocessing</code>, and <code>asyncio</code></p>\n\n<p><strong><a href=\"https://docs.python.org/3.6/library/multiprocessing.html\" rel=\"nofollow noreferrer\">multiprocessing</a></strong> and <strong><a href=\"https://docs.python.org/3.6/library/threading.html#module-threading\" rel=\"nofollow noreferrer\">threading</a></strong> are concurrent solutions. They do very  similar things, but accomplish them in slightly different ways by delegating to the OS in different ways. <a href=\"https://stackoverflow.com/a/3044626/9241942\">This answer</a> has a concise explanation of the difference. Concurrency is notoriously difficult to debug, because it is not <em>deterministic</em>: small differences in timing can result in completely different sequences of execution. You also have to deal with \"race conditions\" in threads, where two bits of code want to read/change the same piece of shared state at the same time.</p>\n\n<p><strong><a href=\"https://docs.python.org/3.5/library/asyncio.html\" rel=\"nofollow noreferrer\">asyncio</a></strong>, or \"asynchronous input-output\" is a more recent, async solution. You'll need at least Python 3.4. It uses event loops to allow long-running tasks to execute without \"blocking\" the rest of the program. Processes and threads do a similar thing, running two or more operations on even the same processor core by interrupting the running process periodically, forcing them to take turns. But with async, <em>you</em> decide where the turn-taking happens. It's like designing mature adults that interact cooperatively rather than designing kindergarteners that have to be baby-sat by the OS and forced to share the processor.</p>\n\n<p>There are also third-party packages like <a href=\"http://www.gevent.org/\" rel=\"nofollow noreferrer\">gevent</a> and <a href=\"http://eventlet.net/\" rel=\"nofollow noreferrer\">eventlet</a> that predate <code>asyncio</code> and work in earlier versions of Python. If you can afford to target Python >=3.4, I would recommend just using <code>asyncio</code>, because it's part of the Python core.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7476082"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 68, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1517437518, "creation_date": 1517433656, "question_id": 48551635, "link": "https://stackoverflow.com/questions/48551635/more-than-one-process-at-the-same-time", "title": "More than one process at the same time", "body": "<p>Hey I am learning Python at the moment. I wrote a few programs. Now I have a question: \nIs it possible to run more \"operations\" at once?\nAccording to my knowledge the scripts runs from the top to the bottom (except from thing like called def and if statements and so on). </p>\n\n<hr>\n\n<p>For example: I want to do something and wait 5 seconds an then continue but while my program \"waits\" it should do something other? (This one is very simple)\nOr: While checking for input do something other output things.</p>\n\n<p>The examples are very poor but I do not finde something better at the moment. (If something comes to my mind, I will add it later)\nI hope you understand what my question is.</p>\n\n<p><b>Cheers</b>  </p>\n"}, {"tags": ["python", "pandas", "pyodbc"], "comments": [{"owner": {"reputation": 3670, "user_id": 7857466, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7OW0s.png?s=128&g=1", "display_name": "progmatico", "link": "https://stackoverflow.com/users/7857466/progmatico"}, "edited": false, "score": 0, "creation_date": 1517434119, "post_id": 48551633, "comment_id": 84099655, "body": "You can&#39;t run an sql statement without creating a connection and a cursor just before your loop, to execute your sql statement inside the loop. Is this your question?"}, {"owner": {"reputation": 3670, "user_id": 7857466, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7OW0s.png?s=128&g=1", "display_name": "progmatico", "link": "https://stackoverflow.com/users/7857466/progmatico"}, "edited": false, "score": 0, "creation_date": 1517434615, "post_id": 48551633, "comment_id": 84099911, "body": "please edit your question and post the errors thrown, also we can&#39;t debug code we don&#39;t see..."}, {"owner": {"reputation": 143, "user_id": 7987163, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fa6b3513c5bfafb2164c17476430bb85?s=128&d=identicon&r=PG", "display_name": "yanci", "link": "https://stackoverflow.com/users/7987163/yanci"}, "reply_to_user": {"reputation": 3670, "user_id": 7857466, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7OW0s.png?s=128&g=1", "display_name": "progmatico", "link": "https://stackoverflow.com/users/7857466/progmatico"}, "edited": false, "score": 0, "creation_date": 1517437994, "post_id": 48551633, "comment_id": 84101492, "body": "I updated my question, hopefully it helps.  thanks for the suggestion."}, {"owner": {"reputation": 3670, "user_id": 7857466, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7OW0s.png?s=128&g=1", "display_name": "progmatico", "link": "https://stackoverflow.com/users/7857466/progmatico"}, "edited": false, "score": 0, "creation_date": 1517438857, "post_id": 48551633, "comment_id": 84101843, "body": "see a parametric query example <a href=\"https://stackoverflow.com/questions/17139487/pyodbc-query-string-quote-escaping\" title=\"pyodbc query string quote escaping\">stackoverflow.com/questions/17139487/&hellip;</a>. You shouldn&#39;t concatenate strings like that because of sql injection attacks. Also it looks to me the variables you are concatenating are not a strings, and/or the plus signal is passing to database driver as a sum, instead of the concatenation you wanted."}], "owner": {"reputation": 143, "user_id": 7987163, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fa6b3513c5bfafb2164c17476430bb85?s=128&d=identicon&r=PG", "display_name": "yanci", "link": "https://stackoverflow.com/users/7987163/yanci"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1517439244, "creation_date": 1517433651, "last_edit_date": 1517439244, "question_id": 48551633, "link": "https://stackoverflow.com/questions/48551633/python-pyodbc-sql", "title": "Python pyodbc Sql", "body": "<p>I am not sure if I am approaching this in the best way.  I need to use the results of an array to generate dynamic sql.  </p>\n\n<p>I am trying to run a sql statement with a variable that comes from an array</p>\n\n<pre><code> while count &lt;=len(ArrayList) -1:\n     ID = ArrayList[count,0] \n     AnotherValue = ArrayList[count,1]\n\n     sql = \"\"\" select Column1, Column2 from Atable where ID = \"\"\" + ID  + \"\"\" and AnotherValue = \"\"\" + AnotherValue\n\n     sqlResults= pd.read_sql(sql, conn)\n\n     count +=1\n</code></pre>\n\n<p>How can I use a variable to run the statement in a loop?  Or other suggestions?  Thank you!</p>\n\n<p>I am getting this error:</p>\n\n<pre><code> TypeError: ufunc 'add' did not contain a loop with signature matching types dtype('&lt;U254') dtype('&lt;U254') dtype('&lt;U254')\n</code></pre>\n\n<p>I also tried this: </p>\n\n<pre><code>     while count &lt;=len(ArrayList) -1:\n         ID = ArrayList[count,0] \n          AnotherValue = ArrayList[count,1]\n\n     sql = \"\"\" select Column1, Column2 from Atable where ID = $ID and AnotherValue = $AnotherValue \"\"\"\n\n     sqlResults= pd.read_sql(sql, conn)\n\n     count +=1\n</code></pre>\n\n<p>and it got this error</p>\n\n<pre><code> ('42000', '[42000] [Microsoft][SQL Server Native Client 11.0][SQL Server]Invalid pseudocolumn \"$ID\". (126) (SQLExecDirectW)')\n</code></pre>\n"}, {"tags": ["python", "django"], "comments": [{"owner": {"reputation": 514, "user_id": 3530275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1af2b622cf1ac5a985edb93a342c1ad9?s=128&d=identicon&r=PG&f=1", "display_name": "rsiemens", "link": "https://stackoverflow.com/users/3530275/rsiemens"}, "edited": false, "score": 1, "creation_date": 1517433559, "post_id": 48551574, "comment_id": 84099387, "body": "shouldn&#39;t you be creating a new dict in each loop iteration to append to <code>tasks_to_return</code>? Also I think you want to be using <code>append</code> instead of extend."}], "answers": [{"comments": [{"owner": {"reputation": 3487, "user_id": 6843153, "user_type": "registered", "accept_rate": 90, "profile_image": "https://graph.facebook.com/10207079768572690/picture?type=large", "display_name": "HuLu ViCa", "link": "https://stackoverflow.com/users/6843153/hulu-vica"}, "edited": false, "score": 0, "creation_date": 1517436046, "post_id": 48551620, "comment_id": 84100606, "body": "Fantastic! everything works handsomely. Today was a very productive day for learning. Thanks a lot!"}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 3, "last_activity_date": 1517433596, "creation_date": 1517433596, "answer_id": 48551620, "question_id": 48551574, "link": "https://stackoverflow.com/questions/48551574/insert-an-element-into-a-list-of-dictionaries/48551620#48551620", "title": "insert an element into a list of dictionaries", "body": "<p>That is because you each time add the <em>same</em> dictionary to the list: indeed you only change the key/values of that dictionary, and add that dictionary a second time, etc.</p>\n\n<p>Furthermore by using <code>extend</code>, you actually add a <em>iterable</em> of elements to a list. A dictionary is an <em>iterable</em>: you iterate over the keys.</p>\n\n<p>So what you should do is (1) construct a new dictionary each time, and (2) use <code>append</code> instead of extend:</p>\n\n<pre><code>for task in tasks:\n    <b>task_data = {}</b>\n    task_data['name'] = getattr(task, 'name')\n    task_data['description'] = getattr(task, 'description')\n    task_data['start_date'] = getattr(task, 'start_date')\n    task_data['finish_date'] = getattr(task, 'finish_date')\n    task_data['situation'] = task.get_situation()\n    tasks_to_return.<b>append</b>(task_data)</code></pre>\n\n<p>We can also improve the code, for instance instead of setting the key-value pairs, we can do this at the construction of the dictionary. You use <code>getattr(..)</code>, but this is not necessary here: we can use <code>task.name</code> instead of <code>getattr(task, 'name')</code>, so a more elegant approach is probably:</p>\n\n<pre><code>tasks_to_return = []\ntask_data = {}\n</code></pre>\n\n<pre><code>for task in tasks:\n    <b>task_data = {\n        'name': task.name,\n        'description': task.description,\n        'start_date': task.start_date,\n        'finish_date': task.finish_date,\n        'situation': task.situation\n    }</b>\n    tasks_to_return.append(task_data)</code></pre>\n\n<p>Now since the list is initially empty, we can also use <em>list comprehension</em>:</p>\n\n<pre><code><b>tasks_to_return = </b>[ {\n        'name': task.name,\n        'description': task.description,\n        'start_date': task.start_date,\n        'finish_date': task.finish_date,\n        'situation': task.situation\n    } <b>for task in tasks]</b></code></pre>\n"}, {"tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 1, "last_activity_date": 1517433689, "creation_date": 1517433689, "answer_id": 48551645, "question_id": 48551574, "link": "https://stackoverflow.com/questions/48551574/insert-an-element-into-a-list-of-dictionaries/48551645#48551645", "title": "insert an element into a list of dictionaries", "body": "<p>Your <code>extend</code> or <code>append</code> adds the original reference to <code>task_data</code>, whose contents you keep changing.  Instead, either make a new empty object for <code>task_data</code>, or append a copy of the one you reuse:</p>\n\n<pre><code>import copy\n...\n    tasks_to_return.append(copy.copy(task_data))\n</code></pre>\n"}], "owner": {"reputation": 3487, "user_id": 6843153, "user_type": "registered", "accept_rate": 90, "profile_image": "https://graph.facebook.com/10207079768572690/picture?type=large", "display_name": "HuLu ViCa", "link": "https://stackoverflow.com/users/6843153/hulu-vica"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 48551620, "answer_count": 2, "score": 1, "last_activity_date": 1517433689, "creation_date": 1517433391, "question_id": 48551574, "link": "https://stackoverflow.com/questions/48551574/insert-an-element-into-a-list-of-dictionaries", "title": "insert an element into a list of dictionaries", "body": "<p>I have declared an empty list and I want to append dictionaries through a <code>for</code> loop by using the <code>extend()</code> method, but I end with a list with the same content in all its positions (the same dictionary)</p>\n\n<p>This is the code:</p>\n\n<pre><code>def get_tasks(self, actor, task_state):\n    tasks = Task.objects.filter(actor=actor.id, state=task_state)\n    tasks_to_return = []\n    task_data = {}\n\n    for task in tasks:\n        task_data['name'] = getattr(task, 'name')\n        task_data['description'] = getattr(task, 'description')\n        task_data['start_date'] = getattr(task, 'start_date')\n        task_data['finish_date'] = getattr(task, 'finish_date')\n        task_data['situation'] = task.get_situation()\n        tasks_to_return.extend(task_data)\n\n    return tasks_to_return\n</code></pre>\n\n<p>If I change <code>extend()</code> for <code>append()</code>, the result is even worst.</p>\n"}, {"tags": ["python", "optimization", "tensorflow", "loss-function"], "answers": [{"tags": [], "owner": {"reputation": 318, "user_id": 8957978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fcbfae3183b0dab5f5dcd4bdebc90bf?s=128&d=identicon&r=PG", "display_name": "v-i-s-h", "link": "https://stackoverflow.com/users/8957978/v-i-s-h"}, "is_accepted": true, "score": 1, "last_activity_date": 1551949781, "creation_date": 1551949781, "answer_id": 55039917, "question_id": 48551557, "link": "https://stackoverflow.com/questions/48551557/custom-tensorflow-optimizer-for-noisy-non-differentiable-loss-function/55039917#55039917", "title": "Custom Tensorflow optimizer for noisy non-differentiable loss function", "body": "<p>I think SPSA will work with non-differentiable functions also.\nFor SPSA implementation: <a href=\"https://github.com/fraunhofer-iais/tensorflow_spsa\" rel=\"nofollow noreferrer\">https://github.com/fraunhofer-iais/tensorflow_spsa</a></p>\n"}], "owner": {"reputation": 512, "user_id": 3187049, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/2a5906d8b08dba112d7a15aa7ad5abb5?s=128&d=identicon&r=PG&f=1", "display_name": "flxh", "link": "https://stackoverflow.com/users/3187049/flxh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 283, "favorite_count": 1, "accepted_answer_id": 55039917, "answer_count": 1, "score": 2, "last_activity_date": 1551949781, "creation_date": 1517433325, "question_id": 48551557, "link": "https://stackoverflow.com/questions/48551557/custom-tensorflow-optimizer-for-noisy-non-differentiable-loss-function", "title": "Custom Tensorflow optimizer for noisy non-differentiable loss function", "body": "<p>I have build a model using the low-level tensorflow API that has only a couple of variables (about 10) that I want to optimize. Therefore I want to implement a custom loss function that produces noisy loss values (kind of like a simulation based optimization approach). </p>\n\n<p>Usually I would a derivative free optimizer like the SPSA optimizer. </p>\n\n<p><em>Is there a way to implement a loss function that is not differentiable and an optimizer like SPSA with the low-level tensorflow API?</em></p>\n\n<p>PS: One might ask why use tensorflow for this? This is because I want to use tensorflow for convenient saving of the model and tensorboard for convenient and comprehensive visualization. Also I want to be able to switch and compare different models in a standardized framework. </p>\n"}, {"tags": ["python", "numpy", "indexing"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 5, "creation_date": 1517433463, "post_id": 48551554, "comment_id": 84099347, "body": "Have you read the <a href=\"https://docs.scipy.org/doc/numpy/reference/arrays.indexing.html\" rel=\"nofollow noreferrer\">docs</a>?"}, {"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 1, "creation_date": 1517433588, "post_id": 48551554, "comment_id": 84099397, "body": "Bad code, btw.  They should use <code>np.pad</code>."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "reply_to_user": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 0, "creation_date": 1517434300, "post_id": 48551554, "comment_id": 84099736, "body": "@wim, But internally <code>np.pad</code> does this same thing - in 4 steps.  It does the pre and post pad separately 1 dimension at a time."}], "answers": [{"tags": [], "owner": {"reputation": 133, "user_id": 930689, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/6f2fba8cb83f2eed8d9923619fcd10ac?s=128&d=identicon&r=PG", "display_name": "GhzNcl", "link": "https://stackoverflow.com/users/930689/ghzncl"}, "is_accepted": false, "score": 0, "last_activity_date": 1517433623, "creation_date": 1517433623, "answer_id": 48551626, "question_id": 48551554, "link": "https://stackoverflow.com/questions/48551554/how-do-we-interpret-this-indexing/48551626#48551626", "title": "How do we interpret this indexing?", "body": "<p>From this <a href=\"https://stackoverflow.com/questions/509211/understanding-pythons-slice-notation\">thread</a>\n    <code>\n    a[start:end] # items start through end-1\n    a[start:]    # items start through the rest of the array\n    a[:end]      # items from the beginning through end-1\n    a[:]         # a copy of the whole array\n</code></p>\n\n<p>and -1 means the last element, so: from 1 to the last element of the two dimension. </p>\n"}, {"tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": false, "score": 1, "last_activity_date": 1517434563, "creation_date": 1517434563, "answer_id": 48551835, "question_id": 48551554, "link": "https://stackoverflow.com/questions/48551554/how-do-we-interpret-this-indexing/48551835#48551835", "title": "How do we interpret this indexing?", "body": "<pre><code>In [45]: \n    ...: image = numpy.array([[1,2,3],[4,5,6],[7,8,9]])\n    ...: image_padded = numpy.zeros((image.shape[0] + 2, image.shape[1] + 2))\n    ...: \n</code></pre>\n\n<p><code>1:-1</code> is a slice excluding the outer 2 items.  It starts with <code>1</code>, and ends before the last <code>-1</code>:</p>\n\n<pre><code>In [46]: image[1:,:]\nOut[46]: \narray([[4, 5, 6],\n       [7, 8, 9]])\nIn [47]: image[:-1,:]\nOut[47]: \narray([[1, 2, 3],\n       [4, 5, 6]])\nIn [48]: image[1:-1,:]\nOut[48]: array([[4, 5, 6]])\n</code></pre>\n\n<p>Same applies to the 2d indexing.</p>\n\n<pre><code>In [49]: image_padded[1:-1, 1:-1]\nOut[49]: \narray([[0., 0., 0.],\n       [0., 0., 0.],\n       [0., 0., 0.]])\nIn [50]: image_padded[1:-1, 1:-1] = image\nIn [51]: image_padded[1:-1, 1:-1]\nOut[51]: \narray([[1., 2., 3.],\n       [4., 5., 6.],\n       [7., 8., 9.]])\nIn [52]: image_padded\nOut[52]: \narray([[0., 0., 0., 0., 0.],\n       [0., 1., 2., 3., 0.],\n       [0., 4., 5., 6., 0.],\n       [0., 7., 8., 9., 0.],\n       [0., 0., 0., 0., 0.]])\n</code></pre>\n\n<p>Adjacent differences are taken with expressions like <code>image[1:] - image[:-1]</code>.</p>\n"}], "owner": {"reputation": 41029, "user_id": 588855, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/5f6a798479cf28587a0fe18224d2a94a?s=128&d=identicon&r=PG&f=1", "display_name": "Simplicity", "link": "https://stackoverflow.com/users/588855/simplicity"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1517434563, "creation_date": 1517433320, "last_edit_date": 1517433798, "question_id": 48551554, "link": "https://stackoverflow.com/questions/48551554/how-do-we-interpret-this-indexing", "title": "How do we interpret this indexing?", "body": "<p>I came across the following Python script:</p>\n\n<pre><code>import numpy\n\nimage = numpy.array([[1,2,3],[4,5,6],[7,8,9]])\nimage_padded = numpy.zeros((image.shape[0] + 2, image.shape[1] + 2))\nimage_padded[1:-1, 1:-1] = image\n</code></pre>\n\n<p>I understand that the last statement would equal to the 3x3 image array. The part I couldn't understand is how the indexing was made: <code>[1:-1, 1:-1]</code>. How can we interpret what this indexing is doing?</p>\n"}, {"tags": ["python", "pyside"], "answers": [{"tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": false, "score": 1, "last_activity_date": 1517434404, "creation_date": 1517434404, "answer_id": 48551804, "question_id": 48551549, "link": "https://stackoverflow.com/questions/48551549/painting-filled-ellipse-with-pyside/48551804#48551804", "title": "Painting filled ellipse with Pyside", "body": "<p>You have to use a larger <code>QPixmap</code>, besides that you must call <code>painter.end()</code> to indicate that you must finish painting:</p>\n\n<pre><code>class Example(QtGui.QDialog):\n    def __init__(self, parent=None):\n        super(Example, self).__init__(parent)\n        self.resize(200, 50)\n        self.initUI()\n\n    def initUI(self):\n        self.ui_list = QtGui.QComboBox()\n        grid = QtGui.QVBoxLayout()\n        grid.addWidget(self.ui_list)\n        self.setLayout(grid)\n        self.populate_list()\n\n    def populate_list(self):\n        colors = {\n            'White': QtCore.Qt.white,  \n            'Black': QtCore.Qt.black,  \n            'Red': QtCore.Qt.red,\n            'Green': QtCore.Qt.green,   \n            'Blue': QtCore.Qt.blue,\n            'Cyan': QtCore.Qt.cyan,\n            'Magenta': QtCore.Qt.magenta,\n            'Yellow': QtCore.Qt.yellow, \n            'Gray': QtCore.Qt.gray,\n            'Orange': QtGui.QColor(255,128,0)\n        }\n        px = QtGui.QPixmap(640,640)\n\n        for key, val in sorted(colors.items()):\n            px.fill(QtCore.Qt.transparent)\n            painter = QtGui.QPainter(px)\n            painter.setBrush(QtGui.QColor(val))\n            painter.drawEllipse(px.rect())\n            painter.end()\n            self.ui_list.addItem(QtGui.QIcon(px), key) \n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/1x6y3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1x6y3.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 36, "user_id": 11167350, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/a778189c1feb99f783cea09fd7d22df1?s=128&d=identicon&r=PG", "display_name": "user11167350", "link": "https://stackoverflow.com/users/11167350/user11167350"}, "is_accepted": true, "score": 2, "last_activity_date": 1551986059, "creation_date": 1551986059, "answer_id": 55051249, "question_id": 48551549, "link": "https://stackoverflow.com/questions/48551549/painting-filled-ellipse-with-pyside/55051249#55051249", "title": "Painting filled ellipse with Pyside", "body": "<p>Just looking at the approved answer, It looks to me like the outline is black and setting a larger pixmap is making the issue less visible. I would be better to set the stroke color instead. Also, making a pixmap larger in order to get a nicer looking circle is unnecessary if you turn on antialiasing explicitly.</p>\n\n<p>...</p>\n\n<pre><code>for key, val in sorted(colors.items()):\n    # a small pixmap size\n    size = 32\n    px = QtGui.QPixmap(size,size)\n    px.fill(QtCore.Qt.transparent)\n    painter = QtGui.QPainter(px)\n    # turn on Antialiasing\n    painter.setRenderHints(QtGui.QPainter.Antialiasing, True)\n    # set the brush and pen to the same color\n    painter.setBrush(QtGui.QColor(val))\n    painter.setPen(QtGui.QColor(val))\n    painter.drawEllipse(px.rect())\n    painter.end()\n    self.ui_list.addItem(QtGui.QIcon(px), key) \n</code></pre>\n"}], "owner": {"reputation": 4576, "user_id": 3156300, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Oo88B.png?s=128&g=1", "display_name": "JokerMartini", "link": "https://stackoverflow.com/users/3156300/jokermartini"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 314, "favorite_count": 0, "accepted_answer_id": 55051249, "answer_count": 2, "score": 1, "last_activity_date": 1551986059, "creation_date": 1517433296, "question_id": 48551549, "link": "https://stackoverflow.com/questions/48551549/painting-filled-ellipse-with-pyside", "title": "Painting filled ellipse with Pyside", "body": "<p>I'm trying to paint an solid colored ellipse in pyside and I'm getting an unexpected black line around the outside and I'm also not getting what appears to be a smooth circular shape? Some colors are not showing up as well.</p>\n\n<p>What am I doing wrong here?</p>\n\n<p><a href=\"https://i.stack.imgur.com/Dq25q.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Dq25q.png\" alt=\"enter image description here\"></a></p>\n\n<pre><code>import sys\nfrom PySide import QtGui, QtCore\n\nclass Example(QtGui.QDialog):\n    def __init__(self, parent=None):\n        super(Example, self).__init__(parent)\n        self.resize(200, 50)\n        self.initUI()\n\n    def initUI(self):\n        self.ui_list = QtGui.QComboBox()\n        grid = QtGui.QVBoxLayout()\n        grid.addWidget(self.ui_list)\n        self.setLayout(grid)\n        self.populate_list()\n\n    def populate_list(self):\n        colors = {\n            'White': QtCore.Qt.white,  \n            'Black': QtCore.Qt.black,  \n            'Red': QtCore.Qt.red,\n            'Green': QtCore.Qt.green,   \n            'Blue': QtCore.Qt.blue,\n            'Cyan': QtCore.Qt.cyan,\n            'Magenta': QtCore.Qt.magenta,\n            'Yellow': QtCore.Qt.yellow, \n            'Gray': QtCore.Qt.gray,\n            'Orange': QtGui.QColor(255,128,0)\n        }\n        px = QtGui.QPixmap(12,12)\n\n        for key, val in sorted(colors.items()):\n            px.fill(QtCore.Qt.transparent)\n            painter = QtGui.QPainter(px)\n            painter.setBrush(QtGui.QColor(val))\n            painter.drawEllipse(0,0,12,12)\n            self.ui_list.addItem(QtGui.QIcon(px), key) \n\ndef main():\n    app = QtGui.QApplication(sys.argv)\n    ex = Example()\n    ex.show()\n    sys.exit(app.exec_())\n\n\nif __name__ == '__main__':\n    main()\n</code></pre>\n"}, {"tags": ["python", "typescript", "protractor"], "comments": [{"owner": {"reputation": 11632, "user_id": 8582353, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa2e22a564c1d0e098316210a2ec4fb1?s=128&d=identicon&r=PG&f=1", "display_name": "yong", "link": "https://stackoverflow.com/users/8582353/yong"}, "edited": false, "score": 0, "creation_date": 1517462110, "post_id": 48551528, "comment_id": 84107646, "body": "because the <code>Click</code> method is not static, you should use instace of Wait class to call <code>Click</code> or declare it as static method by changing code to <code>static Click(selector) {}</code>, if you change <code>Click</code> to static, you have to change <code>ElementVisibility</code> to static also and remove <code>this.</code> inside <code>Click</code> function"}], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 9221404, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/34e8e034116b1b38e279e4c6eb2ee5a9?s=128&d=identicon&r=PG&f=1", "display_name": "J Don", "link": "https://stackoverflow.com/users/9221404/j-don"}, "edited": false, "score": 0, "creation_date": 1517460054, "post_id": 48555019, "comment_id": 84107001, "body": "also, it is giving me error on the enterValue - ts] Return type of public method from exported class has or is using name &#39;promise.Promise&#39; from external module &quot;/Users/chiragverma/Desktop/osxp-automation-master/node_modu&zwnj;&#8203;les/protractor/node_&zwnj;&#8203;modules/@types/selen&zwnj;&#8203;ium-webdriver/index&quot; but cannot be named."}], "tags": [], "owner": {"reputation": 11632, "user_id": 8582353, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa2e22a564c1d0e098316210a2ec4fb1?s=128&d=identicon&r=PG&f=1", "display_name": "yong", "link": "https://stackoverflow.com/users/8582353/yong"}, "is_accepted": true, "score": 0, "last_activity_date": 1517456753, "creation_date": 1517456753, "answer_id": 48555019, "question_id": 48551528, "link": "https://stackoverflow.com/questions/48551528/explicit-wait-in-protractor-serenity/48555019#48555019", "title": "Explicit wait in protractor serenity", "body": "<p>Give a code example, but I'm not sure your argument value for <code>locator</code> can compatible with <code>Protractor</code> locator.</p>\n\n<pre><code>import { Enter, Click } from \"serenity-js/lib/screenplay-protractor\";\nimport { protractor, element } from \"protractor\";\n\nvar EC = protractor.ExpectedConditions;\n\nexport class Wait{\n    constructor() {\n    }\n\n    enterValue(text:any, locator:any) {\n        //Enter.theValue comes from serenity\n        return browser.wait(EC.elementToBeClickable(element(locator)), 5000)\n\n        .then(function(){\n            return Enter.theValue(text).into(locator);\n        });\n\n    }\n\n    clickOn(locator: any): any {\n        //Click.on comes from serenity\n        return browser.wait(EC.elementToBeClickable(element(locator)), 5000)\n\n        .then(function(){\n            return Click.on(locator);\n        });\n    }\n};\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 9221404, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/34e8e034116b1b38e279e4c6eb2ee5a9?s=128&d=identicon&r=PG&f=1", "display_name": "J Don", "link": "https://stackoverflow.com/users/9221404/j-don"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 423, "favorite_count": 0, "accepted_answer_id": 48555019, "answer_count": 1, "score": 0, "last_activity_date": 1517861085, "creation_date": 1517433173, "last_edit_date": 1517861085, "question_id": 48551528, "link": "https://stackoverflow.com/questions/48551528/explicit-wait-in-protractor-serenity", "title": "Explicit wait in protractor serenity", "body": "<p>I am trying to create a base class to add the explicit weights in click and select methods. This is the code I have tried so far but I am getting the error on Click.on():</p>\n\n<pre><code>import { Enter, Click } from \"serenity-js/lib/screenplay-protractor\";\nimport { by } from \"protractor\";\nimport { protractor, browser } from 'protractor';\n\nvar EC = protractor.ExpectedConditions;\n\n\nexport class wait{\n    constructor() {\n    }\n\n    ElementVisibility(selector){\n    browser.driver.wait(function() {\n        return browser.driver.isElementPresent(by.xpath(selector));\n    });\n    }\n\n    Click(selector) {\n    this.ElementVisibility(selector).Click.on()\n    }\n\n}\n</code></pre>\n\n<p>Also when I import to another page is this the right way to do it? Sorry i am new to typescript and it is giving error and not recognizing the Click method</p>\n\n<pre><code>import { Task, step, PerformsTasks } from \"serenity-js/lib/screenplay\";\nimport { Enter, Click } from \"serenity-js/lib/screenplay-protractor\";\nimport { CheckoutPageMap } from \"../interactions/element-mappings/CheckoutPageMap\";\nimport { wait } from \"../interactions/element-mappings/wait\";\n\nexport class FillPaymentMethod implements Task {\n  static called(): FillPaymentMethod {\n    return new FillPaymentMethod();\n  }\n  @step('{0} Select Shipping Method - Bruno selects for an item in men section')\n  performAs(actor: PerformsTasks): PromiseLike&lt;void&gt; {\n    return actor.attemptsTo(\n      Click.on(CheckoutPageMap.radioCreditCard),\n      Enter.theValue('Bruno Sacco').into(CheckoutPageMap.textCreditCardHolderName),\n      Enter.theValue('4032039926075500').into(CheckoutPageMap.textCreditCardNumber),\n      Enter.theValue('123').into(CheckoutPageMap.textCreditCardCvv),\n      wait.Click('//*[@id=\"card_month\"]/option[.=\" 09\"]'),\n      //Click.on(CheckoutPageMap.dropDownCreditCardMonth), // TO-DO: optimize choosing option from dropdown from properties file\n      Click.on(CheckoutPageMap.dropDownCreditCardYear) // TO-DO: optimize choosing option from dropdown from properties file\n    );\n  }\n};\n</code></pre>\n\n<p>getting this error - [ts] Property 'Click' does not exist on type 'typeof wait'.</p>\n"}, {"tags": ["python", "arrays", "list", "recursion", "dynamic-programming"], "comments": [{"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 3, "creation_date": 1517433178, "post_id": 48551523, "comment_id": 84099195, "body": "What is your question?"}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 1, "creation_date": 1517433456, "post_id": 48551523, "comment_id": 84099340, "body": "You should not use recursion in the first place here, the <i>subset sum problem</i> can usually be solved fast with <i>dynamic programming</i>."}, {"owner": {"reputation": 9258, "user_id": 5665870, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TQBw0.png?s=128&g=1", "display_name": "Sphinx", "link": "https://stackoverflow.com/users/5665870/sphinx"}, "edited": false, "score": 2, "creation_date": 1517434311, "post_id": 48551523, "comment_id": 84099745, "body": "the key problem is you use &#39;return&#39; in one loop. That causes the loop will run once instead of range(0,len(grp))"}, {"owner": {"reputation": 1397, "user_id": 6147182, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/8ACnl.png?s=128&g=1", "display_name": "Mohamed Benkedadra", "link": "https://stackoverflow.com/users/6147182/mohamed-benkedadra"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1517535172, "post_id": 48551523, "comment_id": 84145555, "body": "@WillemVanOnsem i know but i have never used dynamic programming, I&#39;m still learning recursion shouldn&#39;t i learn that first?"}], "answers": [{"comments": [{"owner": {"reputation": 1397, "user_id": 6147182, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/8ACnl.png?s=128&g=1", "display_name": "Mohamed Benkedadra", "link": "https://stackoverflow.com/users/6147182/mohamed-benkedadra"}, "edited": false, "score": 0, "creation_date": 1517526536, "post_id": 48551920, "comment_id": 84143279, "body": "thank you so much, but the code doesn&#39;t work in the case of S = 7 grp = [0,3,6,4,6]"}, {"owner": {"reputation": 9258, "user_id": 5665870, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TQBw0.png?s=128&g=1", "display_name": "Sphinx", "link": "https://stackoverflow.com/users/5665870/sphinx"}, "reply_to_user": {"reputation": 1397, "user_id": 6147182, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/8ACnl.png?s=128&g=1", "display_name": "Mohamed Benkedadra", "link": "https://stackoverflow.com/users/6147182/mohamed-benkedadra"}, "edited": false, "score": 0, "creation_date": 1517592316, "post_id": 48551920, "comment_id": 84172841, "body": "@HammiCloud, The issue is caused by &#39;res is used as one reference instead of one copy; check this: <a href=\"https://stackoverflow.com/questions/2438938/python-copy-through-assignment\">Python Reference&amp;Copy</a>&#39;. so added one line (&#39;temp=list(res)&#39;) to fix this issue."}], "tags": [], "owner": {"reputation": 9258, "user_id": 5665870, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TQBw0.png?s=128&g=1", "display_name": "Sphinx", "link": "https://stackoverflow.com/users/5665870/sphinx"}, "is_accepted": false, "score": 3, "last_activity_date": 1517592815, "last_edit_date": 1517592815, "creation_date": 1517434919, "answer_id": 48551920, "question_id": 48551523, "link": "https://stackoverflow.com/questions/48551523/recursion-on-each-element-of-array/48551920#48551920", "title": "recursion on each element of array", "body": "<p>Below codes work (remove 'directly return' in the loop, changed to conditional 'return'). </p>\n\n<p>But I don't think it is a good solution. You need to improve your algorithm.</p>\n\n<p>PS: This codes also will only return one match instead of all.</p>\n\n<pre><code>S = 7\ngrp = [0,3,6,4,6]\n\nresult = []\n\ndef sumFinder(res,grp, result):\n    for i in range (0,len(grp)):\n        temp = list(res) #clone res instead of direct-reference\n        if grp == [] or not temp:\n            return grp #in case no pair was found [] is returned\n        if sum(temp) == S:\n            result.append(tuple(temp))\n            return temp\n        temp.append(grp[i])\n        newgrp = grp[:i] + grp[i+1:]\n        sumFinder(list(temp),newgrp, result)\n\nsumFinder([0], grp, result)\nprint result\n</code></pre>\n\n<p>Test Cases:</p>\n\n<pre><code>S = 7\ngrp = [0,3,6,4,6]\nresult = [(0, 0, 3, 4), (0, 0, 4, 3), (0, 3, 0, 4), (0, 3, 4), (0, 4, 0, 3), (0, 4, 3)]\n[Finished in 0.823s]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1397, "user_id": 6147182, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/8ACnl.png?s=128&g=1", "display_name": "Mohamed Benkedadra", "link": "https://stackoverflow.com/users/6147182/mohamed-benkedadra"}, "edited": false, "score": 0, "creation_date": 1517527617, "post_id": 48562713, "comment_id": 84143641, "body": "this is really hard for me to understand, maybe i&#39;m just dumb .. do you have any books or tutorial i could read to improve my skills, i just started learning python too, so what does this do ?  for i in L isn&#39;t this a for loop  how come you&#39;re using it this way return L + [i + [newelement] for i in L] + [[newelement]]"}], "tags": [], "owner": {"reputation": 1076, "user_id": 2883282, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44d8f579f6c1af59561466707832b2ee?s=128&d=identicon&r=PG&f=1", "display_name": "englealuze", "link": "https://stackoverflow.com/users/2883282/englealuze"}, "is_accepted": true, "score": 3, "last_activity_date": 1541519647, "last_edit_date": 1541519647, "creation_date": 1517487798, "answer_id": 48562713, "question_id": 48551523, "link": "https://stackoverflow.com/questions/48551523/recursion-on-each-element-of-array/48562713#48562713", "title": "recursion on each element of array", "body": "<p>In stead of just providing code, I will show you how to think about this problem and how to tackle this type of problems in a general sense.</p>\n\n<p>First, let us rephrase your question. In fact what you want is for a given set of numbers, find the combinations within the set which fulfill certain condition. So, you can decompose your question into 2 distinct steps.</p>\n\n<ol>\n<li>Find all combinations of your set</li>\n<li>Filter out the combinations that fulfill certain conditions</li>\n</ol>\n\n<p>Let us think about how to solve the first task recursively. Remember, if a problem can be solved in a recursive way, it generally means there are some recursive patterns within your data and it usually can be solved in a very simple and clear way. If you end up with a messy recursive solution, it pretty much means you are in a wrong direction.</p>\n\n<p>Let us see the pattern of your data first. If you have a very small set (1, 2), then the combinations out of this set are</p>\n\n<pre><code>1\n2\n1, 2\n</code></pre>\n\n<p>Let us increase one member to the set, (1, 2, 3). For this bigger set, all combiantions are</p>\n\n<pre><code>1       | 1, 3\n2       | 2, 3\n1, 2    | 1, 2, 3\n        | 3\n</code></pre>\n\n<p>Let us look at even bigger set (1, 2, 3, 4). The possible combinations are</p>\n\n<pre><code>1       1, 3       | 1, 3, 4\n2       2, 3       | 2, 3, 4\n1, 2    1, 2, 3    | 1, 2, 3, 4\n        3          | 3, 4\n                   | 4\n</code></pre>\n\n<p>Now you see something interesting, the combinations of one bigger set is the combinations of the smaller set plus the additional element appending to every previous combination and plus the additional element itself.</p>\n\n<p>Assume you already got the solution of all combinations of set with certain size, the solution of a bigger set can be derived from this solution. This naturally forms a recursion. You can translate this plain English directly to a recursive code as below</p>\n\n<pre><code># assume you have got all combinations of a smaller set -&gt; combinations(smaller(L))\n# the solution of your bigger set can be directly derived from it with known new element\ndef combinations(L):\n    if L == []:\n        return []\n    else:\n        return next_solution(combinations(smaller(L)), newitem(L))\n</code></pre>\n\n<p>Notice how we decompose out task of solving a larger problem to solving smaller problems. You need the helper functions as below</p>\n\n<pre><code># in your case a smaller set is just the new set drop one element\ndef smaller(L):\n    return L[1:]\n\n# the new element would be the first element of new set\ndefine newitem(L):\n    return L[0]\n\n# to derive the new solution from previous combinations, you need three parts\n# 1. all the previous combinations -&gt; L\n# 2. new item appending to each previous combination -&gt; [i + [newelement] for i in L]\n# 3. the new item itself [[newelement]]\ndef next_solution(L, newelement):\n    return L + [i + [newelement] for i in L] + [[newelement]]\n</code></pre>\n\n<p>Now we know how to get all combinations out of a set.\nThen to filter them, you cannot just insert the filter directly into your recursive steps, since we rely on our previous solution to build up the result list recursively. The simple way is to filter the list while we obtain the full result of all combinations.</p>\n\n<p>You will end up with a solution as this.</p>\n\n<pre><code>def smaller(L):\n  return L[1:]\n\ndef newitem(L):\n  return L[0]\n\ndef next_solution(L, newelement):\n  return L + [i + [newelement] for i in L] + [[newelement]]\n\ndef filtersum(L, N, f=sum):\n  return list(filter(lambda x: f(x)==N, L))\n\ndef combinations(L):\n  if L == []:\n    return []\n  else:\n    return next_solution(combinations(smaller(L)), newitem(L))\n\ndef filter_combinations(L, N, f=filtersum):\n  return f(combinations(L), N)\n\nprint(filter_combinations([0,5,6,4,3], 7))\n# -&gt; [[3, 4], [3, 4, 0]]\n</code></pre>\n\n<p>You can save some computations by filter out in each recursive call the combinations with sum bigger than your defined value, such as</p>\n\n<pre><code>def combinations(L):\n  if L == []:\n    return []\n  else:\n    return next_solution(list(filter(lambda x: sum(x) &lt;=5, combinations(smaller(L)))), newitem(L))\n\nprint(combinations([1,2,3,4]))\n# -&gt; [[4], [3], [3, 2], [2], [4, 1], [3, 1], [3, 2, 1], [2, 1], [1]]\n</code></pre>\n\n<p>In fact there will be different ways to do recursion, depends on the way how you decompose your problem to smaller problems. There existed some smarter ways, but the approach I showed above is a typical and general approach for solving this type of problems.</p>\n\n<p>I have example of solving other problems with this way</p>\n\n<p><a href=\"https://stackoverflow.com/questions/45878288/python-combinations-of-map-tuples/45881212#45881212\">Python: combinations of map tuples</a></p>\n"}, {"comments": [{"owner": {"reputation": 1397, "user_id": 6147182, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/8ACnl.png?s=128&g=1", "display_name": "Mohamed Benkedadra", "link": "https://stackoverflow.com/users/6147182/mohamed-benkedadra"}, "edited": false, "score": 0, "creation_date": 1517526751, "post_id": 48570234, "comment_id": 84143359, "body": "this is an interview question, that some youtuber said he was asked when applying for a job at a tech company"}, {"owner": {"reputation": 1076, "user_id": 2883282, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44d8f579f6c1af59561466707832b2ee?s=128&d=identicon&r=PG&f=1", "display_name": "englealuze", "link": "https://stackoverflow.com/users/2883282/englealuze"}, "edited": false, "score": 0, "creation_date": 1517609261, "post_id": 48570234, "comment_id": 84180328, "body": "Try these web: <a href=\"https://projecteuler.net/\" rel=\"nofollow noreferrer\">projecteuler.net</a>, <a href=\"https://leetcode.com/problemset/all/\" rel=\"nofollow noreferrer\">leetcode.com/problemset/all</a>, <a href=\"https://www.hackerrank.com/dashboard\" rel=\"nofollow noreferrer\">hackerrank.com/dashboard</a>"}], "tags": [], "owner": {"reputation": 8912, "user_id": 5904928, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/jwFz9.png?s=128&g=1", "display_name": "Aaditya Ura", "link": "https://stackoverflow.com/users/5904928/aaditya-ura"}, "is_accepted": false, "score": 2, "last_activity_date": 1517512903, "creation_date": 1517512903, "answer_id": 48570234, "question_id": 48551523, "link": "https://stackoverflow.com/questions/48551523/recursion-on-each-element-of-array/48570234#48570234", "title": "recursion on each element of array", "body": "<p>Can you let me know where did you find this problem? I love to solve this type of problem, Bdw here is my approach:</p>\n\n<pre><code>a=[[[0],[0,5,6,4,3]]]\n\ns=7\n\ndef recursive_approach(array_a):\n    print(array_a)\n    sub=[]\n    for mm in array_a:\n        array_1 = mm[0]\n        array_2 = mm[1]\n        if sum(array_2)==s:\n            return \"result is\",array_2\n        else:\n            track = []\n            for i in range(len(array_2)):\n                c = array_2[:]\n                del c[i]\n\n                track.append([array_1 + [array_2[i]], c])\n            sub.append(track)\n    print(sub)\n    return recursive_approach(sub[0])\n\n\n\n\n\nprint(recursive_approach(a))\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>[[[0], [0, 5, 6, 4, 3]]]\n[[[[0, 0], [5, 6, 4, 3]], [[0, 5], [0, 6, 4, 3]], [[0, 6], [0, 5, 4, 3]], [[0, 4], [0, 5, 6, 3]], [[0, 3], [0, 5, 6, 4]]]]\n[[[0, 0], [5, 6, 4, 3]], [[0, 5], [0, 6, 4, 3]], [[0, 6], [0, 5, 4, 3]], [[0, 4], [0, 5, 6, 3]], [[0, 3], [0, 5, 6, 4]]]\n[[[[0, 0, 5], [6, 4, 3]], [[0, 0, 6], [5, 4, 3]], [[0, 0, 4], [5, 6, 3]], [[0, 0, 3], [5, 6, 4]]], [[[0, 5, 0], [6, 4, 3]], [[0, 5, 6], [0, 4, 3]], [[0, 5, 4], [0, 6, 3]], [[0, 5, 3], [0, 6, 4]]], [[[0, 6, 0], [5, 4, 3]], [[0, 6, 5], [0, 4, 3]], [[0, 6, 4], [0, 5, 3]], [[0, 6, 3], [0, 5, 4]]], [[[0, 4, 0], [5, 6, 3]], [[0, 4, 5], [0, 6, 3]], [[0, 4, 6], [0, 5, 3]], [[0, 4, 3], [0, 5, 6]]], [[[0, 3, 0], [5, 6, 4]], [[0, 3, 5], [0, 6, 4]], [[0, 3, 6], [0, 5, 4]], [[0, 3, 4], [0, 5, 6]]]]\n[[[0, 0, 5], [6, 4, 3]], [[0, 0, 6], [5, 4, 3]], [[0, 0, 4], [5, 6, 3]], [[0, 0, 3], [5, 6, 4]]]\n[[[[0, 0, 5, 6], [4, 3]], [[0, 0, 5, 4], [6, 3]], [[0, 0, 5, 3], [6, 4]]], [[[0, 0, 6, 5], [4, 3]], [[0, 0, 6, 4], [5, 3]], [[0, 0, 6, 3], [5, 4]]], [[[0, 0, 4, 5], [6, 3]], [[0, 0, 4, 6], [5, 3]], [[0, 0, 4, 3], [5, 6]]], [[[0, 0, 3, 5], [6, 4]], [[0, 0, 3, 6], [5, 4]], [[0, 0, 3, 4], [5, 6]]]]\n[[[0, 0, 5, 6], [4, 3]], [[0, 0, 5, 4], [6, 3]], [[0, 0, 5, 3], [6, 4]]]\n('result is', [4, 3])\n</code></pre>\n"}], "owner": {"reputation": 1397, "user_id": 6147182, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/8ACnl.png?s=128&g=1", "display_name": "Mohamed Benkedadra", "link": "https://stackoverflow.com/users/6147182/mohamed-benkedadra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1661, "favorite_count": 1, "accepted_answer_id": 48562713, "answer_count": 3, "score": 2, "last_activity_date": 1541519647, "creation_date": 1517433134, "last_edit_date": 1517544629, "question_id": 48551523, "link": "https://stackoverflow.com/questions/48551523/recursion-on-each-element-of-array", "title": "recursion on each element of array", "body": "<p>I have an integer S and a collection A of integers. I need to find a set of integers from the collection where the sum of those integers is equal to S. It could be 1 integer or 50 - it doesn't matter.</p>\n\n<p>I'm trying to do this like this:</p>\n\n<p>I have an array res and an array grp </p>\n\n<p>res starts with [0], grp is the initially given collection, and S is the sum we're trying to find, S is global</p>\n\n<p>my function takes (res, grp)</p>\n\n<p>I want to do this : (and example)</p>\n\n<p><a href=\"https://i.stack.imgur.com/dLhCT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dLhCT.png\" alt=\"enter image description here\"></a>\n   -</p>\n\n<p>and stop when the sum of the res elements is equal to S</p>\n\n<p>but I suck with recursion and I have no idea what I should be doing </p>\n\n<p>this is my code </p>\n\n<pre><code>S = 7\ngrp = [0,5,6,4,3]\n\ndef sumFinder(res,grp):\n    if grp == []:\n        return grp #in case no pair was found [] is returned \n    if sum(res) == S:\n        return res\n    for i in range (0,len(grp)):\n        print(res)\n        print(grp[i])\n        res += [grp[i]]\n        newgrp = grp[:i]\n        newgrp += grp[i+1:]\n        return sumFinder(res,newgrp)\n\n print(sumFinder([0],grp))\n</code></pre>\n\n<p><strong>UPDATE:</strong></p>\n\n<p>thank you everyone for you answers \nthank you <strong>englealuze</strong> for giving me a beter idea about approaching the problem thanks o you i got to this:</p>\n\n<p>1 - this is for finding the first combination and returning it (this was my goal)</p>\n\n<pre><code>grp = [1,0,1,0,1,2,6,2,3,5,6,7,8,9,2,1,1,9,6,7,4,1,2,3,2,2]\nS = 55\ngrps = []\n\ndef findCombination(comb,grp):\n    for i in range (0,len(grp)):\n        comb += [grp[i]]\n        newgrp = grp[:i]\n        newgrp += grp[i+1:]\n\n        if sum(comb) == S:\n            return comb\n\n        if newgrp not in grps:\n            grps.append(newgrp)\n            res = findCombination([],newgrp)\n            if res != None:\n                return res\n\nprint(findCombination([],grp))\n</code></pre>\n\n<p>2- this is for finding all the combinations: (this is the problem <strong>englealuze</strong> talked about, but i didn't understand his method that well even though it seems better)</p>\n\n<pre><code>grp = [1,0,1,1,9,6,7,4,1,2,3,2,2]\nS = 12\ngrps = []\ncombinations = []\n\ndef findAllCombinations(comb,grp):\n    global combinations\n    for i in range (0,len(grp)):\n        comb += [grp[i]]\n        newgrp = grp\n        newgrp = grp[:i]\n        newgrp += grp[i+1:]\n\n        if sum(comb) == S and tuple(comb) not in combinations:\n            combinations.append(tuple(comb))\n\n        if newgrp not in grps:\n            grps.append(newgrp)\n            findAllCombinations([],newgrp)\n\nfindAllCombinations([],grp)\nprint(combinations)\n</code></pre>\n\n<p>my only problem now is that when S > 50 (in the first one), it takes longer to find the answer</p>\n\n<p>what advice could you guys give me to improve both algorithms?</p>\n"}, {"tags": ["python", "python-2.7"], "answers": [{"tags": [], "owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "is_accepted": true, "score": 5, "last_activity_date": 1517435003, "last_edit_date": 1517435003, "creation_date": 1517434191, "answer_id": 48551765, "question_id": 48551521, "link": "https://stackoverflow.com/questions/48551521/monkey-patching-duck-typing-and-argument-self/48551765#48551765", "title": "Monkey-patching, duck-typing and argument self", "body": "<p>Because of the way methods are contributed to class objects in Python 2, the actual function object is hidden behind an unbound method, but you can access it using the <a href=\"https://docs.python.org/2/reference/datamodel.html\" rel=\"nofollow noreferrer\"><code>im_func</code></a> aka <code>__func__</code> attribute:</p>\n\n<pre><code>&gt;&gt;&gt; B.__str__ = A.__str__.__func__\n&gt;&gt;&gt; str(B('stuff'))\n'Fancy formatted stuff'\n</code></pre>\n\n<p>Arguably, a better way to do this is using new-style classes and inheritance.</p>\n\n<pre><code>class MyStrMixin(object):\n   def __str__(self):\n       return \"Fancy formatted %s\" % self.val\n</code></pre>\n\n<p>Then inherit from <code>MyStrMixin</code> in both <code>A</code> and <code>B</code>, and just let the <a href=\"https://www.python.org/download/releases/2.3/mro/\" rel=\"nofollow noreferrer\">MRO</a> do its thing.  </p>\n"}], "owner": {"reputation": 26689, "user_id": 5769463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/71a28b5fac23ee656a32cc7ea6df54ec?s=128&d=identicon&r=PG&f=1", "display_name": "ead", "link": "https://stackoverflow.com/users/5769463/ead"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 194, "favorite_count": 0, "accepted_answer_id": 48551765, "answer_count": 1, "score": 2, "last_activity_date": 1517435003, "creation_date": 1517433125, "question_id": 48551521, "link": "https://stackoverflow.com/questions/48551521/monkey-patching-duck-typing-and-argument-self", "title": "Monkey-patching, duck-typing and argument self", "body": "<p>When I try to monkey-patch a class with a method from another class, it doesn't work because the argument <code>self</code> isn't of the right type.</p>\n\n<p>For example, let's like the result of the method <code>__str__</code> created by the fancy class <code>A</code>:</p>\n\n<pre><code>class A:\n   def __init__(self, val):\n       self.val=val\n   def __str__(self):\n       return \"Fancy formatted %s\"%self.val\n</code></pre>\n\n<p>and would like to reuse it for a boring class <code>B</code>:</p>\n\n<pre><code>class B:\n   def __init__(self, val):\n       self.val=val\n</code></pre>\n\n<p>That means:</p>\n\n<pre><code> &gt;&gt;&gt; b=B(\"B\") \n\n &gt;&gt;&gt; #first try:\n &gt;&gt;&gt; B.__str__=A.__str__\n &gt;&gt;&gt; str(b)\n Traceback (most recent call last):\n File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\n TypeError: unbound method __str__() must be called with A instance as first argument (got nothing instead)\n\n\n &gt;&gt;&gt; #second try:\n &gt;&gt;&gt; B.__str__= lambda self: A.__str__(self)\n &gt;&gt;&gt; str(b)\n Traceback (most recent call last):\n   File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\n   File \"&lt;stdin&gt;\", line 1, in &lt;lambda&gt;\n TypeError: unbound method __str__() must be called with A instance as first argument (got B instance instead)\n</code></pre>\n\n<p>So in both cases the it doesn't work because the argument <code>self</code> should be an instance of class <code>A</code>, but evidently isn't.</p>\n\n<p>It would be nice to find a way to do the monkey-patching, but my actual question is, why it is necessary for the implicit parameter <code>self</code> to be an instance of the \"right\" class and not just depend on the duck-typing?</p>\n"}, {"tags": ["python", "yaml", "cross-reference", "ruamel.yaml"], "comments": [{"owner": {"reputation": 50175, "user_id": 1307905, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a38a4f5f180194ac457cdc057f1be6e3?s=128&d=identicon&r=PG", "display_name": "Anthon", "link": "https://stackoverflow.com/users/1307905/anthon"}, "edited": false, "score": 0, "creation_date": 1517434001, "post_id": 48551508, "comment_id": 84099601, "body": "What do you mean with how the anchor is derived? When dumping a data-structure, PyYAML and ruamel.yaml check if a particular complex object (i.e. not a primtive like integer, string) was already dumped and creates an alias if it was. One of the things ruamel.yaml does is keep the original anchor name attached to that complex structure, so it can reuse it. But there is no list of references, there is one object with multiple paths through the datastructure to that object. You&#39;ll have to walk the tree to find all the references just like the dumper does."}, {"owner": {"reputation": 458, "user_id": 918093, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/524adc6f08415b1e2fbb5c1a10ed7662?s=128&d=identicon&r=PG", "display_name": "labarna", "link": "https://stackoverflow.com/users/918093/labarna"}, "reply_to_user": {"reputation": 50175, "user_id": 1307905, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a38a4f5f180194ac457cdc057f1be6e3?s=128&d=identicon&r=PG", "display_name": "Anthon", "link": "https://stackoverflow.com/users/1307905/anthon"}, "edited": false, "score": 0, "creation_date": 1517435916, "post_id": 48551508, "comment_id": 84100530, "body": "Thanks for the explanation.  I&#39;d like to be able to modify that anchor on the initial load.  Is this only possible by looking at the Events level?"}], "answers": [{"comments": [{"owner": {"reputation": 458, "user_id": 918093, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/524adc6f08415b1e2fbb5c1a10ed7662?s=128&d=identicon&r=PG", "display_name": "labarna", "link": "https://stackoverflow.com/users/918093/labarna"}, "edited": false, "score": 0, "creation_date": 1517496638, "post_id": 48559644, "comment_id": 84126952, "body": "Thank you this is a very detailed answer and helps a lot in figuring out whether what I want is feasible or not.  And thanks for your work on ruamel.yaml as well."}], "tags": [], "owner": {"reputation": 50175, "user_id": 1307905, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a38a4f5f180194ac457cdc057f1be6e3?s=128&d=identicon&r=PG", "display_name": "Anthon", "link": "https://stackoverflow.com/users/1307905/anthon"}, "is_accepted": true, "score": 3, "last_activity_date": 1517478356, "creation_date": 1517478356, "answer_id": 48559644, "question_id": 48551508, "link": "https://stackoverflow.com/questions/48551508/preserving-anchors-and-aliases-in-yaml-with-python/48559644#48559644", "title": "Preserving anchors and aliases in YAML with Python", "body": "<p>There are a few things to keep in mind:</p>\n\n<ul>\n<li>YAML has no fields. I assume that that is your interpretation of keys in a mapping, so that you want an anchor associated with a mapping to be the same as the value for the key '<code>name</code>'</li>\n<li>During load time the event created when encountering an anchor doesn't know about whether it is an anchor on a scalar, sequence or mapping. Let alone that it could access the value for '<code>name</code>'. </li>\n<li>Changing the anchor during load is tricky, as you have to keep track of aliases referring to the original anchor (and map them to its new value)</li>\n<li>In PyYAML the anchor name gets created during <code>dump</code>-ing, so you would have to hook into that when using PyYAML. You can do the same with <code>ruamel.yaml</code></li>\n<li>Only <code>ruamel.yaml</code> has the capability to preserve an anchor on round-trip. I.e. if you can have the anchor to be persistent, even if the value for the key '<code>name</code>' changes (assuming you test e.g. on the default generated form <code>idNNNN</code>)</li>\n</ul>\n\n<p>When you use <code>ruamel.yaml</code> you can recursively walk the data-structure, keeping track of nodes already visited (in case a child contains an ancestor) and when encountering a <code>ruamel.yaml.comments.CommentedMap</code>, set the anchor (currently the attribute with the value of <code>ruamel.yaml.comments.Anchor.attrib</code> i.e. <code>_yaml_anchor</code>). Untested code:</p>\n\n<pre><code>if isinstance(x, ruamel.yaml.comments.CommentedMap):\n    if 'name' in x:\n        x.yaml_set_anchor(x['name'])\n</code></pre>\n\n<p>If you have a YAML document that you can round-trip you can hook into the representer:</p>\n\n<pre><code>import sys\nimport ruamel.yaml\nfrom ruamel.yaml.representer import RoundTripRepresenter\n\nyaml_str = \"\"\"\\\n# data = [dict(a=1, b=2, name='mydata'), dict(c=3)]\n# data.append(data[0])\n- &amp;id001\n  a: 1\n  b: 2\n  name: mydata\n- c: 3\n- *id001\n\"\"\"\n\nclass MyRTR(RoundTripRepresenter):\n    def represent_mapping(self, tag, mapping, flow_style=None):\n        if 'name' in mapping:\n            # if not isinstance(mapping, ruamel.yaml.comments.CommentedMap):\n            #     mapping = ruamel.yaml.comments.CommentedMap(mapping)\n        mapping.yaml_set_anchor(mapping['name'])\n\n            mapping.yaml_set_anchor(mapping['name'])\n        return RoundTripRepresenter.represent_mapping(\n            self, tag, mapping, flow_style=flow_style)\n\n\nyaml = ruamel.yaml.YAML()\nyaml.Representer = MyRTR\ndata = yaml.load(yaml_str)\nyaml.dump(data, sys.stdout)\n</code></pre>\n\n<p>which gives:</p>\n\n<pre><code># data = [dict(a=1, b=2, name='mydata'), dict(c=3)]\n# data.append(data[0])\n- &amp;mydata a: 1\n  b: 2\n  name: mydata\n- c: 3\n- *mydata\n</code></pre>\n\n<p>But note that this assumes that you loaded the data and that all <code>dict</code>s are actually <code>CommentedMap</code>s under the hood. If that is not the case (i.e. you added normal <code>dict</code>s, then uncomment the two lines doing the conversion.</p>\n"}], "owner": {"reputation": 458, "user_id": 918093, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/524adc6f08415b1e2fbb5c1a10ed7662?s=128&d=identicon&r=PG", "display_name": "labarna", "link": "https://stackoverflow.com/users/918093/labarna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2148, "favorite_count": 1, "accepted_answer_id": 48559644, "answer_count": 1, "score": 2, "last_activity_date": 1556823700, "creation_date": 1517433081, "last_edit_date": 1556823700, "question_id": 48551508, "link": "https://stackoverflow.com/questions/48551508/preserving-anchors-and-aliases-in-yaml-with-python", "title": "Preserving anchors and aliases in YAML with Python", "body": "<p>I'm editing a large YAML document in Python with extensive anchors and aliases.  I'd like to be able to determine how the anchor is derived based on data from the node it references.</p>\n\n<p>For instance the node has a 'name' field and I'd like the anchor to be the value of that field rather than a random id number.</p>\n\n<p>Is this possible with PyYAML or ruamel.yaml?</p>\n"}, {"tags": ["python", "numpy", "scipy"], "comments": [{"owner": {"reputation": 364, "user_id": 3707720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0fd80bb42c49cd68a45120900ba88ba?s=128&d=identicon&r=PG&f=1", "display_name": "Dylan", "link": "https://stackoverflow.com/users/3707720/dylan"}, "edited": false, "score": 0, "creation_date": 1517433361, "post_id": 48551460, "comment_id": 84099295, "body": "<a href=\"https://docs.scipy.org/doc/scipy-0.19.0/reference/generated/scipy.io.loadmat.html\" rel=\"nofollow noreferrer\">docs.scipy.org/doc/scipy-0.19.0/reference/generated/&hellip;</a> Docs mention only some version are supported. 7.3, for example, is not supported. What version are the .mats?"}, {"owner": {"reputation": 133, "user_id": 7074893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73b8ec585d82c9084ffc272054660abe?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/7074893/alexander"}, "reply_to_user": {"reputation": 364, "user_id": 3707720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0fd80bb42c49cd68a45120900ba88ba?s=128&d=identicon&r=PG&f=1", "display_name": "Dylan", "link": "https://stackoverflow.com/users/3707720/dylan"}, "edited": false, "score": 0, "creation_date": 1517433666, "post_id": 48551460, "comment_id": 84099442, "body": "@Dylan I printed the &#39;_<i>version_</i>&#39; key and they all said 1.0. I guess that would not be supported, right?"}, {"owner": {"reputation": 364, "user_id": 3707720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0fd80bb42c49cd68a45120900ba88ba?s=128&d=identicon&r=PG&f=1", "display_name": "Dylan", "link": "https://stackoverflow.com/users/3707720/dylan"}, "edited": false, "score": 0, "creation_date": 1517433993, "post_id": 48551460, "comment_id": 84099597, "body": "I am not entirely sure, since the Notes say &quot;v4 (Level 1.0)...&quot; which is rather confusing to me. if you just try and return &quot;data[&#39;dataset&#39;]&quot; without the print() and type() what happens?"}, {"owner": {"reputation": 133, "user_id": 7074893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73b8ec585d82c9084ffc272054660abe?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/7074893/alexander"}, "reply_to_user": {"reputation": 364, "user_id": 3707720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0fd80bb42c49cd68a45120900ba88ba?s=128&d=identicon&r=PG&f=1", "display_name": "Dylan", "link": "https://stackoverflow.com/users/3707720/dylan"}, "edited": false, "score": 0, "creation_date": 1517434180, "post_id": 48551460, "comment_id": 84099683, "body": "@Dylan the program just terminates since I&#39;m currently not returning it to anything"}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 2, "creation_date": 1517435858, "post_id": 48551460, "comment_id": 84100510, "body": "Look at the <code>dtype</code> of an array rather than the <code>type</code>.  <code>data</code> is a dictionary.  <code>data[&#39;dataset&#39;]</code> is an array.  But depending on what MATLAB object was stored it might be a object dtype array, or something more complicated.  See <a href=\"https://stackoverflow.com/questions/37996883/how-to-access-elements-of-numpy-ndarray\" title=\"how to access elements of numpy ndarray\">stackoverflow.com/questions/37996883/&hellip;</a> for more details."}, {"owner": {"reputation": 133, "user_id": 7074893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73b8ec585d82c9084ffc272054660abe?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/7074893/alexander"}, "reply_to_user": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1517436242, "post_id": 48551460, "comment_id": 84100698, "body": "@hpaulj Ah thank you, if I replace <code>type</code> with <code>numpy.dtype</code> I get: <code>[(&#39;train&#39;, &#39;O&#39;), (&#39;test&#39;, &#39;O&#39;), (&#39;mapping&#39;, &#39;O&#39;)]</code>. I needed to add another index to get what I wanted ([0][0][0] worked)."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1517436469, "post_id": 48551460, "comment_id": 84100795, "body": "That&#39;s a structured array with 3 fields, possibly a <code>struct</code> in the original MATLAB.  I&#39;d try to access elements with <code>data[&#39;dataset&#39;][&#39;train&#39;]</code> or <code>data[&#39;dataset&#39;][0,0][&#39;test&#39;]</code>.  But the elements themselves might be arrays (the &#39;O&#39; object dtype)."}, {"owner": {"reputation": 133, "user_id": 7074893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73b8ec585d82c9084ffc272054660abe?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/7074893/alexander"}, "reply_to_user": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1517437619, "post_id": 48551460, "comment_id": 84101319, "body": "@hpaulj Cool, thanks a lot!"}], "owner": {"reputation": 133, "user_id": 7074893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73b8ec585d82c9084ffc272054660abe?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/7074893/alexander"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 300, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1517435991, "creation_date": 1517432921, "last_edit_date": 1517434903, "question_id": 48551460, "link": "https://stackoverflow.com/questions/48551460/why-do-i-get-a-void-numpy-array-when-i-try-to-load-the-emnist-dataset", "title": "Why do I get a void numpy array when I try to load the EMNIST dataset?", "body": "<p>I'm trying to load a database of handwritten letters into python from the <a href=\"https://www.nist.gov/itl/iad/image-group/emnist-dataset\" rel=\"nofollow noreferrer\">EMNIST database</a>. I downloaded the matlab format files and got 6 .mat files. I put them in the same directory as my .py file and loaded them like this: </p>\n\n<pre><code>import scipy.io as sio\nimport numpy\n\ndata = sio.loadmat(\"emnist-letters.mat\")\n\nprint(type(data['dataset'][0,0]))\n</code></pre>\n\n<p>I get this as the output:</p>\n\n<pre><code>&lt;class 'numpy.void'&gt;\n</code></pre>\n\n<p>With shape (1,1)</p>\n\n<p>When I check the keys on the dictionary that loadmat returned I get ['__header__', '__version__', '__globals__', 'dataset'])</p>\n"}, {"tags": ["python", "multithreading", "multiprocessing", "python-multiprocessing"], "comments": [{"owner": {"reputation": 189, "user_id": 7828241, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-K_tiG2W8cf0/AAAAAAAAAAI/AAAAAAAAAFs/JiG-4say6yg/photo.jpg?sz=128", "display_name": "HunterM267", "link": "https://stackoverflow.com/users/7828241/hunterm267"}, "edited": false, "score": 0, "creation_date": 1517432977, "post_id": 48551440, "comment_id": 84099077, "body": "In what way is not working? Any error codes?"}, {"owner": {"reputation": 4329, "user_id": 1406420, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/qApC0.jpg?s=128&g=1", "display_name": "Stryker", "link": "https://stackoverflow.com/users/1406420/stryker"}, "reply_to_user": {"reputation": 189, "user_id": 7828241, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-K_tiG2W8cf0/AAAAAAAAAAI/AAAAAAAAAFs/JiG-4say6yg/photo.jpg?sz=128", "display_name": "HunterM267", "link": "https://stackoverflow.com/users/7828241/hunterm267"}, "edited": false, "score": 0, "creation_date": 1517433777, "post_id": 48551440, "comment_id": 84099486, "body": "I get the following error:   AttributeError: Can&#39;t get attribute &#39;checkurl&#39; on &lt;module &#39;<b>main</b>&#39; (built-in)&gt;"}, {"owner": {"reputation": 35319, "user_id": 871910, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f073f5ca74b61813e689bbda8d12ba2b?s=128&d=identicon&r=PG", "display_name": "zmbq", "link": "https://stackoverflow.com/users/871910/zmbq"}, "edited": false, "score": 1, "creation_date": 1517433797, "post_id": 48551440, "comment_id": 84099500, "body": "I wouldn&#39;t use multiprocessing here, but rather async I/O."}, {"owner": {"reputation": 4329, "user_id": 1406420, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/qApC0.jpg?s=128&g=1", "display_name": "Stryker", "link": "https://stackoverflow.com/users/1406420/stryker"}, "edited": false, "score": 0, "creation_date": 1517433859, "post_id": 48551440, "comment_id": 84099528, "body": "If you could provide what I need to change or an example it would be great."}, {"owner": {"reputation": 36902, "user_id": 223424, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e97c628a88337b15e76a4690e916a2cd?s=128&d=identicon&r=PG", "display_name": "9000", "link": "https://stackoverflow.com/users/223424/9000"}, "edited": false, "score": 0, "creation_date": 1517433976, "post_id": 48551440, "comment_id": 84099585, "body": "^^ This; take a look at async features of Python 3 or <code>grequests</code> for Python 2, or maybe directly at <code>scrapy</code>."}, {"owner": {"reputation": 2763, "user_id": 3491991, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/pmHXU.png?s=128&g=1", "display_name": "zelusp", "link": "https://stackoverflow.com/users/3491991/zelusp"}, "edited": false, "score": 0, "creation_date": 1517503781, "post_id": 48551440, "comment_id": 84131867, "body": "@Stryker does my answer help you? Is there something I missed?"}, {"owner": {"reputation": 4329, "user_id": 1406420, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/qApC0.jpg?s=128&g=1", "display_name": "Stryker", "link": "https://stackoverflow.com/users/1406420/stryker"}, "reply_to_user": {"reputation": 2763, "user_id": 3491991, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/pmHXU.png?s=128&g=1", "display_name": "zelusp", "link": "https://stackoverflow.com/users/3491991/zelusp"}, "edited": false, "score": 0, "creation_date": 1517505316, "post_id": 48551440, "comment_id": 84132782, "body": "@zelusp - Works great. trying to understand why not do: &quot;from multiprocessing import Pool &quot; vs &quot;from multiprocessing.dummy ....&quot;"}], "answers": [{"tags": [], "owner": {"reputation": 1796, "user_id": 5763327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/051c8032c315fd540790929f1d6a6510?s=128&d=identicon&r=PG&f=1", "display_name": "Setop", "link": "https://stackoverflow.com/users/5763327/setop"}, "is_accepted": false, "score": 0, "last_activity_date": 1517435862, "creation_date": 1517435862, "answer_id": 48552109, "question_id": 48551440, "link": "https://stackoverflow.com/questions/48551440/how-to-use-multiprocessing-to-loop-through-a-big-list-of-url/48552109#48552109", "title": "How to use multiprocessing to loop through a big list of URL?", "body": "<p>In <code>checkurlconnection</code> function, parameter must be <code>urls</code> not <code>url</code>.\nelse, in the for loop, <code>urls</code> will point to the global variable, which is not what you want.</p>\n\n<pre><code>import requests\nfrom multiprocessing import Pool\n\nwith open(\"url10.txt\") as f:\n    urls = f.read().splitlines()\n\ndef checkurlconnection(urls):\n    for url in urls:\n        url =  'http://'+url\n        try:\n            resp = requests.get(url, timeout=1)\n            print(len(resp.content), '-&gt;', resp.status_code, '-&gt;', resp.url)\n        except Exception as e:\n            print(\"Error\", url)\n\nif __name__ == \"__main__\":\n    p = Pool(processes=4)\n    result = p.map(checkurlconnection, urls)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2763, "user_id": 3491991, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/pmHXU.png?s=128&g=1", "display_name": "zelusp", "link": "https://stackoverflow.com/users/3491991/zelusp"}, "is_accepted": true, "score": 6, "last_activity_date": 1517511083, "last_edit_date": 1517511083, "creation_date": 1517439073, "answer_id": 48552764, "question_id": 48551440, "link": "https://stackoverflow.com/questions/48551440/how-to-use-multiprocessing-to-loop-through-a-big-list-of-url/48552764#48552764", "title": "How to use multiprocessing to loop through a big list of URL?", "body": "<p>In this case your task is I/O bound and not processor bound - it takes longer for a website to reply than it does for your CPU to loop once through your script (not including the TCP request). What this means is that you wont get any speedup from doing this task in parallel (which is what <code>multiprocessing</code> does). What you want is multi-threading. The way this is achieved is by using the little documented, perhaps poorly named, <code>multiprocessing.dummy</code>:</p>\n\n<pre><code>import requests\nfrom multiprocessing.dummy import Pool as ThreadPool \n\nurls = ['https://www.python.org',\n        'https://www.python.org/about/']\n\ndef get_status(url):\n    r = requests.get(url)\n    return r.status_code\n\nif __name__ == \"__main__\":\n    pool = ThreadPool(4)  # Make the Pool of workers\n    results = pool.map(get_status, urls) #Open the urls in their own threads\n    pool.close() #close the pool and wait for the work to finish \n    pool.join() \n</code></pre>\n\n<p><a href=\"http://chriskiehl.com/article/parallelism-in-one-line/\" rel=\"noreferrer\">See here</a> for examples of multiprocessing vs multithreading in Python.</p>\n"}], "owner": {"reputation": 4329, "user_id": 1406420, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/qApC0.jpg?s=128&g=1", "display_name": "Stryker", "link": "https://stackoverflow.com/users/1406420/stryker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3650, "favorite_count": 4, "accepted_answer_id": 48552764, "answer_count": 2, "score": 1, "last_activity_date": 1517511083, "creation_date": 1517432862, "last_edit_date": 1592644375, "question_id": 48551440, "link": "https://stackoverflow.com/questions/48551440/how-to-use-multiprocessing-to-loop-through-a-big-list-of-url", "title": "How to use multiprocessing to loop through a big list of URL?", "body": "<p>Problem: Check a listing of over 1000 urls and get the url return code (status_code).</p>\n<p>The script I have works but very slow.</p>\n<p>I am thinking there has to be a better, pythonic (more beutifull) way of doing this, where I can spawn 10 or 20 threads to check the urls and collect resonses.\n(i.e:</p>\n<pre><code>200 -&gt; www.yahoo.com\n404 -&gt; www.badurl.com\n...\n</code></pre>\n<hr />\n<h1>Input file:Url10.txt</h1>\n<pre><code>www.example.com\nwww.yahoo.com\nwww.testsite.com\n</code></pre>\n<p>....</p>\n<pre><code>import requests\n\nwith open(&quot;url10.txt&quot;) as f:\n    urls = f.read().splitlines()\n\nprint(urls)\nfor url in urls:\n    url =  'http://'+url   #Add http:// to each url (there has to be a better way to do this)\n    try:\n        resp = requests.get(url, timeout=1)\n        print(len(resp.content), '-&gt;', resp.status_code, '-&gt;', resp.url)\n    except Exception as e:\n        print(&quot;Error&quot;, url)\n</code></pre>\n<p><strong>Challenges:</strong>\nImprove speed with multiprocessing.</p>\n<hr />\n<h1>With multiprocessing</h1>\n<p>But is it not working.\nI get the following error: (note: I am not sure if I have even implemented this correctly)</p>\n<pre><code>AttributeError: Can't get attribute 'checkurl' on &lt;module '__main__' (built-in)&gt;\n</code></pre>\n<p>--</p>\n<pre><code>import requests\nfrom multiprocessing import Pool\n\nwith open(&quot;url10.txt&quot;) as f:\n    urls = f.read().splitlines()\n \ndef checkurlconnection(url):\n    \n    for url in urls:\n        url =  'http://'+url\n        try:\n            resp = requests.get(url, timeout=1)\n            print(len(resp.content), '-&gt;', resp.status_code, '-&gt;', resp.url)\n        except Exception as e:\n            print(&quot;Error&quot;, url)\n        \nif __name__ == &quot;__main__&quot;:\n    p = Pool(processes=4)\n    result = p.map(checkurlconnection, urls)\n</code></pre>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 25595, "user_id": 202229, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6cc1d82c11563b440c57280ad587ee47?s=128&d=identicon&r=PG", "display_name": "smci", "link": "https://stackoverflow.com/users/202229/smci"}, "edited": false, "score": 0, "creation_date": 1517519546, "post_id": 48551370, "comment_id": 84140336, "body": "You&#39;re making things harder by treating two series from the same (grouped) df as two different objects. Instead do <code>df.groupby([&#39;ID&#39;, &#39;yy&#39;])</code> and save that grouped df (or use it with a context manager). See my answer"}], "answers": [{"tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": false, "score": 2, "last_activity_date": 1517433019, "creation_date": 1517433019, "answer_id": 48551490, "question_id": 48551370, "link": "https://stackoverflow.com/questions/48551370/calculations-with-groupby-objects-pandas/48551490#48551490", "title": "Calculations with Groupby objects Pandas", "body": "<p>Is this what you need ?</p>\n\n<pre><code>pct.mul(cost)/100\nOut[332]: \nID   yy\n312  13    22214.421669\n361  15    56583.626963\n373  14    49756.096000\n403  13    37895.000550\n     14    37895.000550\n     15    44316.319281\n     16    31211.543783\n     17    44477.374796\nName: V, dtype: float64\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 25595, "user_id": 202229, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6cc1d82c11563b440c57280ad587ee47?s=128&d=identicon&r=PG", "display_name": "smci", "link": "https://stackoverflow.com/users/202229/smci"}, "edited": false, "score": 0, "creation_date": 1517434793, "post_id": 48551710, "comment_id": 84099994, "body": "No, the series are both from the same df. So you simply do <code>df.groupby([&#39;ID&#39;, &#39;yy&#39;])</code>"}, {"owner": {"reputation": 32054, "user_id": 6287308, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NdmQp.jpg?s=128&g=1", "display_name": "Vaishali", "link": "https://stackoverflow.com/users/6287308/vaishali"}, "reply_to_user": {"reputation": 25595, "user_id": 202229, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6cc1d82c11563b440c57280ad587ee47?s=128&d=identicon&r=PG", "display_name": "smci", "link": "https://stackoverflow.com/users/202229/smci"}, "edited": false, "score": 0, "creation_date": 1517434904, "post_id": 48551710, "comment_id": 84100054, "body": "@smci, here cost and percentage are two different dataframes as specified in the question"}, {"owner": {"reputation": 25595, "user_id": 202229, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6cc1d82c11563b440c57280ad587ee47?s=128&d=identicon&r=PG", "display_name": "smci", "link": "https://stackoverflow.com/users/202229/smci"}, "edited": false, "score": 0, "creation_date": 1517435774, "post_id": 48551710, "comment_id": 84100470, "body": "no they&#39;re not, they both came from the same grouped df: <code>df.groupby([&#39;ID&#39;, &#39;yy&#39;])</code>."}], "tags": [], "owner": {"reputation": 32054, "user_id": 6287308, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NdmQp.jpg?s=128&g=1", "display_name": "Vaishali", "link": "https://stackoverflow.com/users/6287308/vaishali"}, "is_accepted": true, "score": 2, "last_activity_date": 1517433966, "creation_date": 1517433966, "answer_id": 48551710, "question_id": 48551370, "link": "https://stackoverflow.com/questions/48551370/calculations-with-groupby-objects-pandas/48551710#48551710", "title": "Calculations with Groupby objects Pandas", "body": "<p>You are using groupby without any aggregate function which returns as groupby object, NOT a series.</p>\n\n<p>You need</p>\n\n<pre><code>cost = df1.set_index(['ID', 'yy'])['cost']\npct = df2.set_index(['ID', 'yy'])['cost']\ncost.mul(pct/100)\n\nID   yy\n312  13    22214.421669\n361  15    56583.626963\n373  14    49756.096000\n403  13    37895.000550\n     14    37895.000550\n     15    44316.319281\n     16    31211.543783\n     17    44477.374796\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2920, "user_id": 3516936, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/06cf34e713525dcf34a1f35d61c1cd8b?s=128&d=identicon&r=PG&f=1", "display_name": "Neo", "link": "https://stackoverflow.com/users/3516936/neo"}, "is_accepted": false, "score": 0, "last_activity_date": 1517434834, "creation_date": 1517434834, "answer_id": 48551904, "question_id": 48551370, "link": "https://stackoverflow.com/questions/48551370/calculations-with-groupby-objects-pandas/48551904#48551904", "title": "Calculations with Groupby objects Pandas", "body": "<p>You can directly multiply cost and percentage just because here your indices i.e id and yy are same for both DF.\nSo </p>\n\n<pre><code>percentage.mul(cost)  should work.\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 25595, "user_id": 202229, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6cc1d82c11563b440c57280ad587ee47?s=128&d=identicon&r=PG", "display_name": "smci", "link": "https://stackoverflow.com/users/202229/smci"}, "is_accepted": false, "score": 0, "last_activity_date": 1517519462, "last_edit_date": 1517519462, "creation_date": 1517435013, "answer_id": 48551939, "question_id": 48551370, "link": "https://stackoverflow.com/questions/48551370/calculations-with-groupby-objects-pandas/48551939#48551939", "title": "Calculations with Groupby objects Pandas", "body": "<p>You made a mistake in treating two series from the same (grouped) df as two different objects. So just do:</p>\n\n<pre><code>with df.groupby(['ID', 'yy']) as dfg:\n    dfg['cost'] * dfg['percentage'] # you have to assign or write the output\n</code></pre>\n\n<p>You can probably even reduce this to a one-liner, if you post us reproducible data I'll post it. In fact as @Neo showed, something like:</p>\n\n<pre><code>df.groupby(['ID', 'yy']).percentage.mul(cost)\n</code></pre>\n"}], "owner": {"reputation": 189, "user_id": 8264382, "user_type": "registered", "accept_rate": 65, "profile_image": "https://lh6.googleusercontent.com/-gzggJflShW8/AAAAAAAAAAI/AAAAAAAADdA/ThPvuEcpQEk/photo.jpg?sz=128", "display_name": "Iwan", "link": "https://stackoverflow.com/users/8264382/iwan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 681, "favorite_count": 0, "accepted_answer_id": 48551710, "answer_count": 4, "score": 1, "last_activity_date": 1517519462, "creation_date": 1517432589, "question_id": 48551370, "link": "https://stackoverflow.com/questions/48551370/calculations-with-groupby-objects-pandas", "title": "Calculations with Groupby objects Pandas", "body": "<p>I would like to retrieve two groupby series objects and calculate between each other.</p>\n\n<p>Series objects below:</p>\n\n<pre><code>Cost\n    ID    yy\n    312   13    102429.610000\n    361   15    170526.000000\n    373   14    400000.000000\n    403   13    165000.000000\n          14    165000.000000\n          15    183558.720000\n          16    133763.760980\n          17    121301.930160\n\nPercentage\n        ID    yy\n        312   13     21.687500\n        361   15     33.181818\n        373   14     12.439024\n        403   13     22.966667\n              14     22.966667\n              15     24.142857\n              16     23.333333\n              17     36.666667\n\ncost=df.groupby(['ID', 'yy'])['cost']\npercentage=df.groupby(['ID', 'yy'])['percentage']\n</code></pre>\n\n<p>I essentially want to calculate cost * percentage.</p>\n\n<p>how is this done correctly? The error is 'unsupported operand type(s) for *: 'SeriesGroupBy' and 'SeriesGroupBy'.</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 3952, "user_id": 6696657, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c78dbc81728388bd956e9d4f4c1a6759?s=128&d=identicon&r=PG&f=1", "display_name": "MattR", "link": "https://stackoverflow.com/users/6696657/mattr"}, "edited": false, "score": 0, "creation_date": 1517433409, "post_id": 48551332, "comment_id": 84099316, "body": "what is the code you&#39;ve tried when using pivot? and have you taken a look at <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.stack.html\" rel=\"nofollow noreferrer\"><code>stack</code></a>? Also, you can print the top 5 rows or so of the dataframe and paste the formatted text here. pictures are not good for pandas examples"}], "answers": [{"tags": [], "owner": {"reputation": 535, "user_id": 9295613, "user_type": "registered", "profile_image": "https://graph.facebook.com/1592664147448089/picture?type=large", "display_name": "AC at CA", "link": "https://stackoverflow.com/users/9295613/ac-at-ca"}, "is_accepted": true, "score": 0, "last_activity_date": 1517438063, "last_edit_date": 1517438063, "creation_date": 1517436687, "answer_id": 48552303, "question_id": 48551332, "link": "https://stackoverflow.com/questions/48551332/dataframe-has-everyother-column-timestamp-how-to-get-it-in-one-column/48552303#48552303", "title": "Dataframe has Everyother column timestamp, how to get it in one column?", "body": "<p>You may need to extract the data by 3 columns group. Then rename the columns and add the \"A,B,C\" flag column and concatenate them together. See the test as below:</p>\n\n<pre><code>abc_list = [[\"2017-10-01\",0,\"2017-10-02\",1,\"2017-10-03\",8],[\"2017-11-01\",3,\"2017-11-01\",5,\"2017-11-05\",10],[\"2017-12-01\",0,\"2017-12-07\",7,\"2017-12-07\",12]]\ndf = pd.DataFrame(abc_list,columns=[\"Time1\",\"A\",\"Time2\",\"B\",\"Time3\",\"C\"])\n</code></pre>\n\n<p>The output:</p>\n\n<pre><code>        Time1  A       Time2  B       Time3   C\n0  2017-10-01  0  2017-10-02  1  2017-10-03   8\n1  2017-11-01  3  2017-11-01  5  2017-11-05  10\n2  2017-12-01  0  2017-12-07  7  2017-12-07  12\n</code></pre>\n\n<p>Then:</p>\n\n<pre><code>df_a=df.iloc[:,0:2].rename(columns={'Time1':'time','A':'value'})\ndf_a['flag']=\"A\"\ndf_b=df.iloc[:,2:4].rename(columns={'Time2':'time','B':'value'})\ndf_b['flag']=\"B\"\ndf_c=df.iloc[:,4:].rename(columns={'Time3':'time','C':'value'})\ndf_c['flag']=\"C\"\ndf_final=pd.concat([df_a,df_b,df_c])\ndf_final.reset_index(drop=True)\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>         time  value flag\n0  2017-10-01      0    A\n1  2017-11-01      3    A\n2  2017-12-01      0    A\n3  2017-10-02      1    B\n4  2017-11-01      5    B\n5  2017-12-07      7    B\n6  2017-10-03      8    C\n7  2017-11-05     10    C\n8  2017-12-07     12    C\n</code></pre>\n\n<p>This is a quit bit not a pythonic way to do it.</p>\n\n<hr>\n\n<p>Here is another way:</p>\n\n<pre><code>columns = pd.MultiIndex.from_tuples([('A','Time'),('A','Value'),('B','Time'),('B','Value'),('C','Time'),('C','Value')],names=['Group','Sub_value'])\ndf.columns=columns\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Group               A                 B                 C\nSub_value        Time Value        Time Value        Time Value\n0          2017-10-01     0  2017-10-02     1  2017-10-03     8\n1          2017-11-01     3  2017-11-01     5  2017-11-05    10\n2          2017-12-01     0  2017-12-07     7  2017-12-07    12\n</code></pre>\n\n<p>Run:</p>\n\n<pre><code>df.stack(level='Group')\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Sub_value        Time  Value\n  Group\n0 A        2017-10-01      0\n  B        2017-10-02      1\n  C        2017-10-03      8\n1 A        2017-11-01      3\n  B        2017-11-01      5\n  C        2017-11-05     10\n2 A        2017-12-01      0\n  B        2017-12-07      7\n  C        2017-12-07     12\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "is_accepted": false, "score": 0, "last_activity_date": 1517437375, "creation_date": 1517437375, "answer_id": 48552432, "question_id": 48551332, "link": "https://stackoverflow.com/questions/48551332/dataframe-has-everyother-column-timestamp-how-to-get-it-in-one-column/48552432#48552432", "title": "Dataframe has Everyother column timestamp, how to get it in one column?", "body": "<p>This is one method. It is fairly easy to extend to any number of columns.</p>\n\n<pre><code>import pandas as pd\n\ndfs = {}\n\n# read in pairs of columns and assign 'Category' column\ndfs[i] = {i: pd.read_excel('file.xlsx', usecols=[2*i, 2*i+1], skiprows=[0],\n                           header=None, columns=['Date', 'Value']).assign(Category=j) \\\n             for i, j in enumerate(['A', 'B', 'C'])}\n\n# concatenate dataframes\ndf = pd.concat(list(dfs.values()), ignore_index=True)\n</code></pre>\n"}], "owner": {"reputation": 193, "user_id": 3987860, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1eaa33104286a69e4e9cd7fc4aef1d8f?s=128&d=identicon&r=PG&f=1", "display_name": "getaglow", "link": "https://stackoverflow.com/users/3987860/getaglow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 48552303, "answer_count": 2, "score": 0, "last_activity_date": 1517438063, "creation_date": 1517432418, "question_id": 48551332, "link": "https://stackoverflow.com/questions/48551332/dataframe-has-everyother-column-timestamp-how-to-get-it-in-one-column", "title": "Dataframe has Everyother column timestamp, how to get it in one column?", "body": "<p>I have a dataframe I import from excel that is of 'n x n' length, that looks like the following (sorry, i do not know how to easily duplicate this with code)\n<a href=\"https://i.stack.imgur.com/Wpmmn.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Wpmmn.png\" alt=\"enter image description here\"></a></p>\n\n<p>How do I get the timestamps into one column? Like the following (I've tried pivot)\n<a href=\"https://i.stack.imgur.com/DyQlW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DyQlW.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 3, "creation_date": 1517432488, "post_id": 48551318, "comment_id": 84098816, "body": "Move <code>a = input(&#39;Enter yes&#47;higher&#47;lower:\\n&#39;)</code> to inside the <code>while</code> loop."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1517432530, "post_id": 48551318, "comment_id": 84098842, "body": "also that doesn&#39;t work as you expect: <code>elif a != &#39;yes&#39; or &#39;higher&#39; or &#39;lower&#39;:</code>: <a href=\"https://stackoverflow.com/questions/15112125/how-do-i-test-one-variable-against-multiple-values\" title=\"how do i test one variable against multiple values\">stackoverflow.com/questions/15112125/&hellip;</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9296698"}, "edited": false, "score": 0, "creation_date": 1517432614, "post_id": 48551318, "comment_id": 84098889, "body": "why must you guys click the down arrow button for my post"}, {"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1517432730, "post_id": 48551318, "comment_id": 84098946, "body": "<a href=\"https://stackoverflow.com/questions/39528456/guesses-a-secret-number-in-python\" title=\"guesses a secret number in python\">stackoverflow.com/questions/39528456/&hellip;</a>"}, {"owner": {"reputation": 134, "user_id": 3364446, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bb6837de9f202195e15a8fbb7f7059fc?s=128&d=identicon&r=PG&f=1", "display_name": "Aleks Lee", "link": "https://stackoverflow.com/users/3364446/aleks-lee"}, "edited": false, "score": 0, "creation_date": 1517432783, "post_id": 48551318, "comment_id": 84098980, "body": "also pay attenion, you always updating high and low vars to initial guess var, not to updated value."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9296698"}, "edited": false, "score": 0, "creation_date": 1517432872, "post_id": 48551318, "comment_id": 84099027, "body": "nvm I fixed it. I put the a = input(&#39;Enter yes/higher/lower:\\n&#39;) inside the while loop and I changed the &quot;guess1&quot; to &quot;guess&quot;. So thanks Johnny Mopp for that."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "reply_to_user": {"reputation": 1283, "user_id": 5365862, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ThfV6.jpg?s=128&g=1", "display_name": "Ali", "link": "https://stackoverflow.com/users/5365862/ali"}, "edited": false, "score": 0, "creation_date": 1517433081, "post_id": 48551318, "comment_id": 84099131, "body": "@Ali: No it&#39;s not, because the code doesn&#39;t work."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1517433275, "post_id": 48551318, "comment_id": 84099243, "body": "This isn&#39;t really that bad a question. It has correctly formatted, runnable code that reproduces the error when run, and a description of the desired and actual outputs. Since the code produces output indefinitely, it&#39;s not reasonable to expect a copy-paste of all the output, although an excerpt from the start would have helped (but it might be difficult for an inexperienced programmer to produce such an excerpt, depending on their environment). It could have used more detail regarding what input produces the problematic output and a more specific word than &quot;MULTIPLE&quot;."}, {"owner": {"reputation": 1283, "user_id": 5365862, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ThfV6.jpg?s=128&g=1", "display_name": "Ali", "link": "https://stackoverflow.com/users/5365862/ali"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1517433960, "post_id": 48551318, "comment_id": 84099573, "body": "@user2357112 I deleted my comment for giving the wrong advice. Thanks for letting me know."}, {"owner": {"reputation": 505, "user_id": 9182617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5KUJN.png?s=128&g=1", "display_name": "Whooper", "link": "https://stackoverflow.com/users/9182617/whooper"}, "reply_to_user": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1517436167, "post_id": 48551318, "comment_id": 84100664, "body": "@CristiFati the link you&#39;ve shared is technically similar with the program in this post. However, this post is more well put. He encountered a problem with his code and he did describe what was happening and is asking for help to find out what&#39;s wrong with it and how can it be fixed. :)"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user9296698"}, "edited": false, "score": 2, "creation_date": 1517433073, "post_id": 48551467, "comment_id": 84099127, "body": "are you sure you&#39;re thinking of python 3? I&#39;m learning it now and I&#39;ve always used just &quot;input()&quot; and it works fine for me. I never used &quot;raw_input()&quot;. I know int(input()) works for integers."}, {"owner": {"reputation": 505, "user_id": 9182617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5KUJN.png?s=128&g=1", "display_name": "Whooper", "link": "https://stackoverflow.com/users/9182617/whooper"}, "edited": false, "score": 0, "creation_date": 1517433346, "post_id": 48551467, "comment_id": 84099287, "body": "Oh yes my bad! Just move your <code>a = input(&#39;Enter yes&#47;higher&#47;lower:\\n&#39;)</code> inside the while loop to avoid the infinite loop."}, {"owner": {"reputation": 505, "user_id": 9182617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5KUJN.png?s=128&g=1", "display_name": "Whooper", "link": "https://stackoverflow.com/users/9182617/whooper"}, "edited": false, "score": 0, "creation_date": 1517434435, "post_id": 48551467, "comment_id": 84099815, "body": "@rainydayss check out my updated code and see if it works exactly as you want it to be."}], "tags": [], "owner": {"reputation": 505, "user_id": 9182617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5KUJN.png?s=128&g=1", "display_name": "Whooper", "link": "https://stackoverflow.com/users/9182617/whooper"}, "is_accepted": true, "score": 0, "last_activity_date": 1517435291, "last_edit_date": 1517435291, "creation_date": 1517432940, "answer_id": 48551467, "question_id": 48551318, "link": "https://stackoverflow.com/questions/48551318/creating-a-python-program-that-guesses-a-users-secret-number/48551467#48551467", "title": "Creating a python program that guesses a user&#39;s &quot;secret number&quot;?", "body": "<p>Try out this code and see if this is the intended behavior of your program.</p>\n\n<pre><code>print('Hello.')\nprint('Pick a secret number between 0 and 100.')\nprint('Is your secret number 50')\nlow = 0\nhigh = 100\n\nwhile True:\n    guess = int((low+high)/2)\n    print('Is your secret number', guess)\n    a = input('Enter yes/higher/lower:\\n')\n    if a == 'yes':\n      print('Great!')\n      break\n    elif a == 'lower':\n      high = guess-1\n    elif a == 'higher':\n      low = guess+1\n    else:\n        print('I did not understand')\n</code></pre>\n\n<p>The algorithm goes like this:</p>\n\n<ol>\n<li>You make your guess by getting the <code>middle</code> of the <code>low</code> and <code>high</code> values. So you do that with <code>guess = int((high+low)/2)</code></li>\n<li>If the user's number is greater than your <code>guess</code>, then you change your <code>low</code> value to <code>guess+1</code>. If the user's number is lower than your <code>guess</code>, then you change your <code>high</code> value to <code>guess-1</code>.</li>\n<li>Repeat this process until you eventually get the user's number.</li>\n</ol>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9296698"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1678, "favorite_count": 0, "accepted_answer_id": 48551467, "answer_count": 1, "score": 1, "last_activity_date": 1517442718, "creation_date": 1517432343, "last_edit_date": 1517442718, "question_id": 48551318, "link": "https://stackoverflow.com/questions/48551318/creating-a-python-program-that-guesses-a-users-secret-number", "title": "Creating a python program that guesses a user&#39;s &quot;secret number&quot;?", "body": "<p>I'm creating a program that asks you to think of a number from <code>0 to 100</code>. Then it will guess if it IS <code>50, lower than 50, or higher than 50</code>. The program will keep guessing with different numbers until it guesses the correct number.</p>\n\n<p>If the user doesn't enter <code>yes</code>, <code>lower</code> or <code>higher</code>, then the output is supposed to be <em>\"I did not understand\"</em>. The problem with my code is that it gets an infinite loop. I assume there is a loop and I need to include something to end it once the user says \"yes\". </p>\n\n<p>Here is what I have so far (I'm a novice programmer so I'm sorry if this doesn't make sense or if my code is really bad!):</p>\n\n<pre><code>print('Hello.')\nprint('Pick a secret number between 0 and 100.')\nprint('Is your secret number 50')\nlow = 0\nhigh = 101\nguess = 50\na = input('Enter yes/higher/lower:\\n')\nwhile True:\n    if a == 'yes':\n        print('Great!')\n        break\n    elif a == 'lower':\n        high = guess\n        guess1 = (guess-low)//2+low\n        print('Next is', guess1)\n        print('Is your secret number', guess1)\n    elif a == 'higher':\n        low = guess\n        guess1 = (high-guess)//2+guess\n        print('Next is', guess1)\n        print('Is your secret number', guess1)\n    elif a != 'yes' or 'higher' or 'lower':\n        print('I did not understand')\n</code></pre>\n"}, {"tags": ["python", "arrays", "numpy"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1517432421, "post_id": 48551298, "comment_id": 84098774, "body": "The <code>def init(self):</code> type methods just seem to add a chain of redundant calls that makes this more difficult to follow than it needs to be. Why can&#39;t it be handled in <code>__init__</code>?"}, {"owner": {"reputation": 626, "user_id": 3843539, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/14b67954c811b93169e2175388938a75?s=128&d=identicon&r=PG&f=1", "display_name": "MaheshKumar", "link": "https://stackoverflow.com/users/3843539/maheshkumar"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1517432667, "post_id": 48551298, "comment_id": 84098913, "body": "@roganjosh yeah true, in my original problem I need to call a method multiple times in class C with updated attributes in Class A. So it wouldn&#39;t be good to instantiate the class multiple times. Please me in achieving my requirement."}], "answers": [{"comments": [{"owner": {"reputation": 626, "user_id": 3843539, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/14b67954c811b93169e2175388938a75?s=128&d=identicon&r=PG&f=1", "display_name": "MaheshKumar", "link": "https://stackoverflow.com/users/3843539/maheshkumar"}, "edited": false, "score": 0, "creation_date": 1517433850, "post_id": 48551558, "comment_id": 84099527, "body": "@Nathan I know this would work, but the attributes in class C are different than class A.  I need to abstract class A in class C, also I need to only few attributes from class A in class C to processed in class C. So this solution is not I expected."}], "tags": [], "owner": {"reputation": 3322, "user_id": 6766457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b32dab91c17be7b8a4b0796836b2d27?s=128&d=identicon&r=PG&f=1", "display_name": "Nathan", "link": "https://stackoverflow.com/users/6766457/nathan"}, "is_accepted": false, "score": 1, "last_activity_date": 1517433333, "creation_date": 1517433333, "answer_id": 48551558, "question_id": 48551298, "link": "https://stackoverflow.com/questions/48551298/appending-to-already-instantiated-numpy-array-is-not-updated/48551558#48551558", "title": "Appending to already instantiated numpy array is not updated", "body": "<p>If you send the object A to C instead of the array A.A to C, it still is connected (be sure to call A.A instead of A when asking for the matrix) (I know this is confusing, but just check the code and you'll understand)</p>\n\n<pre><code>import numpy as np\n\nclass A:\n    def __init__(self):\n        self.A = []\n\n    def init(self):\n        self.A = np.zeros((1, 5))\n\n    def add_items(self, item):\n        # np.append(self.A, item)\n        self.A = np.vstack([self.A, item])\n        print \"from class A\"\n        print self.A\n\nclass B:\n    def __init__(self):\n        self.A = A()\n        self.C = C()\n\n    def init(self):\n        self.A.init()\n        # send self.A instead of self.A.A\n        self.C.init(self.A)\n\nclass C:\n    def __init__(self):\n        self.A = []\n\n    def init(self, A):\n        self.A = A\n\n    def disp(self):\n        print \"from class C\"\n        # now as self.A is an object, and you want the array, return self.A.A\n        print self.A.A\n\nif __name__ == '__main__':\n    b = B()\n    b.init()\n    b.C.disp()\n    b.A.add_items(np.ones((1, 5)))\n    b.C.disp()\n</code></pre>\n\n<p>this prints:</p>\n\n<pre><code>from class C\n[[ 0.  0.  0.  0.  0.]]\nfrom class A\n[[ 0.  0.  0.  0.  0.]\n [ 1.  1.  1.  1.  1.]]\nfrom class C\n[[ 0.  0.  0.  0.  0.]\n [ 1.  1.  1.  1.  1.]]\n</code></pre>\n"}], "owner": {"reputation": 626, "user_id": 3843539, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/14b67954c811b93169e2175388938a75?s=128&d=identicon&r=PG&f=1", "display_name": "MaheshKumar", "link": "https://stackoverflow.com/users/3843539/maheshkumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1517433333, "creation_date": 1517432284, "question_id": 48551298, "link": "https://stackoverflow.com/questions/48551298/appending-to-already-instantiated-numpy-array-is-not-updated", "title": "Appending to already instantiated numpy array is not updated", "body": "<p>Let say I have the following code, where I am trying to append a numpy array with new values. Since the array is already instantiated to another class, appending to the existing array in one class doesn't update the other.</p>\n\n<pre><code>import numpy as np\n\nclass A:\n    def __init__(self):\n        self.A = []\n\n    def init(self):\n        self.A = np.zeros((1, 5))\n\n    def add_items(self, item):\n        # np.append(self.A, item)\n        self.A = np.vstack([self.A, item])\n        print \"from class A\"\n        print self.A\n\nclass B:\n    def __init__(self):\n        self.A = A()\n        self.C = C()\n\n    def init(self):\n        self.A.init()\n        self.C.init(self.A.A)\n\nclass C:\n    def __init__(self):\n        self.A = []\n\n    def init(self, A):\n        self.A = A\n\n    def disp(self):\n        print \"from class C\"\n\n        print self.A\n\nif __name__ == '__main__':\n    b = B()\n    b.init()\n    b.C.disp()\n    b.A.add_items(np.ones((1, 5)))\n    b.C.disp()\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>from class C\n[[ 0.  0.  0.  0.  0.]]\nfrom class A\n[[ 0.  0.  0.  0.  0.]\n [ 1.  1.  1.  1.  1.]]\nfrom class C\n[[ 0.  0.  0.  0.  0.]]\n</code></pre>\n\n<p>please help me, how can I update the attribute A in class C after the attribute A in class A is updated.</p>\n"}, {"tags": ["python", "pandas", "pandas-groupby"], "answers": [{"comments": [{"owner": {"reputation": 3445, "user_id": 2977256, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/b2b87c8281161bba80ee253b820a850f?s=128&d=identicon&r=PG", "display_name": "Igor Rivin", "link": "https://stackoverflow.com/users/2977256/igor-rivin"}, "edited": false, "score": 0, "creation_date": 1517432998, "post_id": 48551355, "comment_id": 84099091, "body": "I am totally confused about the groupby/apply semantics, obviously. It appears (given your answer) that apply does its thing in every group separately, which is exactly what agg does, and yet agg produces a dataframe and apply a series. Sigh."}, {"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "reply_to_user": {"reputation": 3445, "user_id": 2977256, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/b2b87c8281161bba80ee253b820a850f?s=128&d=identicon&r=PG", "display_name": "Igor Rivin", "link": "https://stackoverflow.com/users/2977256/igor-rivin"}, "edited": false, "score": 0, "creation_date": 1517433095, "post_id": 48551355, "comment_id": 84099142, "body": "@IgorRivin yep .sometime it is hard to pick apply or agg in real case :-)"}], "tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": true, "score": 1, "last_activity_date": 1517432527, "creation_date": 1517432527, "answer_id": 48551355, "question_id": 48551297, "link": "https://stackoverflow.com/questions/48551297/combining-multiple-columns-pandas-groupby/48551355#48551355", "title": "combining multiple columns pandas groupby", "body": "<p>IIUC</p>\n\n<pre><code>df.groupby('tradingDay').apply(lambda x: sum(x['close'].mul(x['volume']))/np.sum(x['volume']))\nOut[323]: \ntradingDay\n2017-01-03    116.132927\ndtype: float64\n</code></pre>\n"}], "owner": {"reputation": 3445, "user_id": 2977256, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/b2b87c8281161bba80ee253b820a850f?s=128&d=identicon&r=PG", "display_name": "Igor Rivin", "link": "https://stackoverflow.com/users/2977256/igor-rivin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 841, "favorite_count": 0, "accepted_answer_id": 48551355, "answer_count": 1, "score": 0, "last_activity_date": 1517432527, "creation_date": 1517432282, "question_id": 48551297, "link": "https://stackoverflow.com/questions/48551297/combining-multiple-columns-pandas-groupby", "title": "combining multiple columns pandas groupby", "body": "<p>suppose I have a stock, and I have a minute-by-minte dataframe of prices and volumes:</p>\n\n<pre><code>close   high    low open    symbol  timestamp   tradingDay  volume\n0   116.02  116.02  116.02  116.02  AAPL    2017-01-03 04:03:00-05:00   \n2017-01-03  200\n1   116.14  116.14  116.14  116.14  AAPL    2017-01-03 04:06:00-05:00   \n2017-01-03  100\n2   116.15  116.24  116.12  116.14  AAPL    2017-01-03 04:07:00-05:00   \n2017-01-03  1370\n3   116.13  116.15  116.13  116.15  AAPL    2017-01-03 04:08:00-05:00   \n2017-01-03  1100\n4   116.15  116.15  116.15  116.15  AAPL    2017-01-03 04:09:00-05:00   \n2017-01-03  100\n</code></pre>\n\n<p>(sorry about the formatting)</p>\n\n<p>I want to combine these into \"vwap\" (volume weighed average price), and this seems easy:</p>\n\n<pre><code>zoo= foo.groupby('tradingDay').agg( lambda x: x['close'].dot(x['volume'])/np.sum(x.volume))\n</code></pre>\n\n<p>But the resulting object has as many columns as the original dataframe (each column being the same and equal to the desired vwap price). Of course, one can then select a random column, but that seems morally impure and memory-wasteful. I am presumably missing something very obvious, but what?</p>\n"}, {"tags": ["python", "bash", "subprocess", "call", "stdout"], "comments": [{"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 1, "creation_date": 1517432379, "post_id": 48551165, "comment_id": 84098753, "body": "This code has serious security vulnerabilities. Keep in mind that <code>$(rm -rf ~)</code> is completely legal as part of a filename; so is <code>; rm &#47;etc&#47;passwd</code>."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 1, "creation_date": 1517432457, "post_id": 48551165, "comment_id": 84098798, "body": "It&#39;d be much safer to use <code>subprocess.call([&#39;grep&#39;, &#39;-c&#39;, &#39;^&gt;&#39;, &#39;--&#39;, path])</code>, or, barring that, <code>subprocess.call([&#39;&#39;&#39;grep -c &#39;^&gt;&#39; -- &quot;$1&quot;&#39;&#39;&#39;, &#39;_&#39;, path], shell=True)</code>."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 1, "creation_date": 1517432515, "post_id": 48551165, "comment_id": 84098833, "body": "See the &quot;warning&quot; section in red in the documentation at <a href=\"https://docs.python.org/2/library/subprocess.html#frequently-used-arguments\" rel=\"nofollow noreferrer\">docs.python.org/2/library/&hellip;</a> for more discussion."}, {"owner": {"reputation": 23937, "user_id": 678572, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kZ2Ia.jpg?s=128&g=1", "display_name": "O.rka", "link": "https://stackoverflow.com/users/678572/o-rka"}, "reply_to_user": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1517432716, "post_id": 48551165, "comment_id": 84098935, "body": "So much dread looking at this line: <code>rm -rf ~</code>"}, {"owner": {"reputation": 255971, "user_id": 464744, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/3dfd6067f4c69986a652444f44bb6d7c?s=128&d=identicon&r=PG", "display_name": "Blender", "link": "https://stackoverflow.com/users/464744/blender"}, "edited": false, "score": 0, "creation_date": 1517432937, "post_id": 48551165, "comment_id": 84099055, "body": "@O.rka: You can also just do this within Python: <code>with open(filename, &#39;rb&#39;) as handle: total = sum(line.startswith(&#39;&gt;&#39;) for line in handle)</code>."}, {"owner": {"reputation": 23937, "user_id": 678572, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kZ2Ia.jpg?s=128&g=1", "display_name": "O.rka", "link": "https://stackoverflow.com/users/678572/o-rka"}, "reply_to_user": {"reputation": 255971, "user_id": 464744, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/3dfd6067f4c69986a652444f44bb6d7c?s=128&d=identicon&r=PG", "display_name": "Blender", "link": "https://stackoverflow.com/users/464744/blender"}, "edited": false, "score": 0, "creation_date": 1517433134, "post_id": 48551165, "comment_id": 84099168, "body": "Thanks @Blender I think the <code>bash</code> way is faster and I&#39;m trying to speed it up since I&#39;m working with 5GB text files.  I just recently started using <code>subprocess</code>"}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1517433190, "post_id": 48551165, "comment_id": 84099202, "body": "Could well be -- <code>grep</code> is heavily optimized. That said, if you&#39;re going to be doing this repeatedly, getting your data into an indexed format so this stops being an O(n) operation is in your interest. (If the lines are sorted, for instance, then it&#39;s a bisect operation to find either the start or the end of the section that starts with <code>&gt;</code>; that gives you the number of <i>bytes</i> between those two regions in amortized constant time)."}, {"owner": {"reputation": 23937, "user_id": 678572, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kZ2Ia.jpg?s=128&g=1", "display_name": "O.rka", "link": "https://stackoverflow.com/users/678572/o-rka"}, "edited": false, "score": 0, "creation_date": 1517433211, "post_id": 48551165, "comment_id": 84099211, "body": "<code>x = int(subprocess.run([&#39;grep&#39;, &#39;-c&#39;, &#39;^&gt;&#39;, &quot;--&quot;, path], stdout=subprocess.PIPE).stdout.strip())</code>"}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1517433353, "post_id": 48551165, "comment_id": 84099292, "body": "...once you know the byte offsets, whether it requires an O(n) scan through that section to count number of <i>lines</i> is a question of whether the line length is constant, or if there&#39;s a line number in the data format -- if the latter, then it could just be a matter of subtraction, and there you are."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1517433391, "post_id": 48551165, "comment_id": 84099303, "body": "(point I&#39;m making being that slow operations can generally be avoided if your data structures are well-considered)."}, {"owner": {"reputation": 255971, "user_id": 464744, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/3dfd6067f4c69986a652444f44bb6d7c?s=128&d=identicon&r=PG", "display_name": "Blender", "link": "https://stackoverflow.com/users/464744/blender"}, "edited": false, "score": 1, "creation_date": 1517438078, "post_id": 48551165, "comment_id": 84101524, "body": "@O.rka: <code>grep</code> takes twice as long for me for a 2.5GB file, regardless of the number of lines starting with <code>&gt;</code>. You may want to test it out before committing to a particular solution due to performance. You can shrink the performance gap by using <code>LC_ALL=C grep ...</code>."}], "owner": {"reputation": 23937, "user_id": 678572, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kZ2Ia.jpg?s=128&g=1", "display_name": "O.rka", "link": "https://stackoverflow.com/users/678572/o-rka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 0, "closed_date": 1517431831, "answer_count": 0, "score": 0, "last_activity_date": 1517431848, "creation_date": 1517431735, "question_id": 48551165, "link": "https://stackoverflow.com/questions/48551165/how-to-get-variable-from-subprocess-call-in-python", "closed_reason": "Duplicate", "title": "How to get variable from subprocess.call in Python?", "body": "<p>I'm trying to count the number of lines that start with \">\" using grep and then store that value as a <code>Python</code> integer object [<code>int</code>].  I'm running the command with <code>subprocess</code> using the <code>call</code> method.</p>\n\n<pre><code>In [8]: x = subprocess.call(f\"grep -c '^&gt;' {path}\", shell=True)\n4626\n\nIn [9]: x\nOut[9]: 0\n</code></pre>\n\n<p>It's going to <code>stdout</code> but I want it to go into the variable <code>x</code>. </p>\n"}, {"tags": ["python", "selenium", "firefox", "selenium-webdriver", "geckodriver"], "comments": [{"owner": {"reputation": 3438, "user_id": 2205785, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FY5zS.png?s=128&g=1", "display_name": "pbuck", "link": "https://stackoverflow.com/users/2205785/pbuck"}, "edited": false, "score": 1, "creation_date": 1517431860, "post_id": 48551161, "comment_id": 84098504, "body": "and the error is...? Please provide exact error plus relevant code."}, {"owner": {"reputation": 11, "user_id": 7246278, "user_type": "registered", "accept_rate": 12, "profile_image": "https://lh4.googleusercontent.com/-TrGqFtAPRO4/AAAAAAAAAAI/AAAAAAAAAEY/2mjIWsL0J3I/photo.jpg?sz=128", "display_name": "Noah Linton", "link": "https://stackoverflow.com/users/7246278/noah-linton"}, "reply_to_user": {"reputation": 3438, "user_id": 2205785, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FY5zS.png?s=128&g=1", "display_name": "pbuck", "link": "https://stackoverflow.com/users/2205785/pbuck"}, "edited": false, "score": 0, "creation_date": 1517431909, "post_id": 48551161, "comment_id": 84098527, "body": "Sorry! I added the screenshot in"}, {"owner": {"reputation": 189, "user_id": 7828241, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-K_tiG2W8cf0/AAAAAAAAAAI/AAAAAAAAAFs/JiG-4say6yg/photo.jpg?sz=128", "display_name": "HunterM267", "link": "https://stackoverflow.com/users/7828241/hunterm267"}, "edited": false, "score": 0, "creation_date": 1517431934, "post_id": 48551161, "comment_id": 84098542, "body": "Trace back is python\u2019s way of returning the error/exception. Posting what it said here, and a relevant snippet of code, could yield your answer."}, {"owner": {"reputation": 11, "user_id": 7246278, "user_type": "registered", "accept_rate": 12, "profile_image": "https://lh4.googleusercontent.com/-TrGqFtAPRO4/AAAAAAAAAAI/AAAAAAAAAEY/2mjIWsL0J3I/photo.jpg?sz=128", "display_name": "Noah Linton", "link": "https://stackoverflow.com/users/7246278/noah-linton"}, "edited": false, "score": 1, "creation_date": 1517432200, "post_id": 48551161, "comment_id": 84098671, "body": "I updated it to display the relevant code"}], "answers": [{"tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 0, "last_activity_date": 1517432992, "creation_date": 1517432992, "answer_id": 48551482, "question_id": 48551161, "link": "https://stackoverflow.com/questions/48551161/selenium-common-exceptions-webdriverexception-message-geckodriver-executable/48551482#48551482", "title": "selenium.common.exceptions.WebDriverException: Message: &#39;geckodriver&#39; executable needs to be in PATH with GeckoDriver Selenium Firefox", "body": "<p>For what little help it might be, the critical parts of the traceback are</p>\n\n<pre><code>FileNotFoundError: [WinError 2] The system cannot find the file specified\n\nline 3, in &lt;module&gt;\ndriver = webdriver.Firefox()\n\nselenium.common.exceptions.WebDriverException: Message: 'geckodriver' \nexecutable needs to be in PATH.\n</code></pre>\n\n<p>It seems that the Firefox webdriver isn't in the defined search path that your main program sees.  There's something called <code>geckodriver</code> that isn't available.</p>\n\n<p>Check your installation and configuration for this package.  Consult with your class instructors and classmates for help.  I suspect that the repair is something with your local set-up, beyond our knowledge here.</p>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 7246278, "user_type": "registered", "accept_rate": 12, "profile_image": "https://lh4.googleusercontent.com/-TrGqFtAPRO4/AAAAAAAAAAI/AAAAAAAAAEY/2mjIWsL0J3I/photo.jpg?sz=128", "display_name": "Noah Linton", "link": "https://stackoverflow.com/users/7246278/noah-linton"}, "edited": false, "score": 1, "creation_date": 1517692519, "post_id": 48567553, "comment_id": 84200801, "body": "That worked! I would like to add however that there should be an r before r&quot;C:\\\\path\\\\to\\\\geckodriver.exe as to convert the path string into a raw string instead of a normal string for anyone else asking a question like this. Thank you so much!"}], "tags": [], "owner": {"reputation": 116545, "user_id": 7429447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5a25589e600c8ae89717c14e51a6754b?s=128&d=identicon&r=PG&f=1", "display_name": "DebanjanB", "link": "https://stackoverflow.com/users/7429447/debanjanb"}, "is_accepted": true, "score": 1, "last_activity_date": 1517502856, "creation_date": 1517502856, "answer_id": 48567553, "question_id": 48551161, "link": "https://stackoverflow.com/questions/48551161/selenium-common-exceptions-webdriverexception-message-geckodriver-executable/48567553#48567553", "title": "selenium.common.exceptions.WebDriverException: Message: &#39;geckodriver&#39; executable needs to be in PATH with GeckoDriver Selenium Firefox", "body": "<p>The error says it all :</p>\n\n<pre><code>selenium.common.exceptions.WebDriverException: Message: 'geckodriver' executable needs to be in PATH. \n</code></pre>\n\n<p>Which implies that <em>GeckoDriver</em> binary is not in the <em>Classpath</em></p>\n\n<p>While working with <em>Selenium v3.x</em> you have to download the latest <em>GeckoDriver</em> from this <a href=\"https://github.com/mozilla/geckodriver/releases\" rel=\"nofollow noreferrer\"><em>url</em></a> and store it in your system and mention the absolute path while initiating the <em>webdriver</em> and <em>Web Browser</em> session as follows :</p>\n\n<pre><code>from selenium import webdriver\n\ndriver = webdriver.Firefox(executable_path=\"C:\\\\path\\\\to\\\\geckodriver.exe\")\ndriver.get(\"https://auth.edgenuity.com/Login/Login/Student\")\nbutton = driver.find_element_by_id('LoginSubmit')\nbutton.click()\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 7246278, "user_type": "registered", "accept_rate": 12, "profile_image": "https://lh4.googleusercontent.com/-TrGqFtAPRO4/AAAAAAAAAAI/AAAAAAAAAEY/2mjIWsL0J3I/photo.jpg?sz=128", "display_name": "Noah Linton", "link": "https://stackoverflow.com/users/7246278/noah-linton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2627, "favorite_count": 1, "accepted_answer_id": 48567553, "answer_count": 2, "score": 0, "last_activity_date": 1544798659, "creation_date": 1517431716, "last_edit_date": 1544798659, "question_id": 48551161, "link": "https://stackoverflow.com/questions/48551161/selenium-common-exceptions-webdriverexception-message-geckodriver-executable", "title": "selenium.common.exceptions.WebDriverException: Message: &#39;geckodriver&#39; executable needs to be in PATH with GeckoDriver Selenium Firefox", "body": "<p>I don't know Pycharm - or Python well enough to troubleshoot just what went wrong. It seems top me as if this simply bit of code should execute but I get a jumble of text that says nothing to me.</p>\n\n<p>Anyone else using Selenium get this error and know how to fix it?\nThe physical code - </p>\n\n<pre><code>\"C:\\Users\\Noah Linton\\PycharmProjects\\EdgenuityBot\\venv\\Scripts\\python.exe\" \n\"C:/Users/Noah Linton/PycharmProjects/EdgenuityBot/Edgenuity Bot\"\nTraceback (most recent call last):\n  File \"C:\\Users\\Noah Linton\\PycharmProjects\\EdgenuityBot\\venv\\lib\\site-\npackages\\selenium\\webdriver\\common\\service.py\", line 76, in start\n    stdin=PIPE)\n  File \"C:\\Program Files (x86)\\Microsoft Visual \nStudio\\Shared\\Python36_64\\Lib\\subprocess.py\", line 709, in __init__\n    restore_signals, start_new_session)\n  File \"C:\\Program Files (x86)\\Microsoft Visual \nStudio\\Shared\\Python36_64\\Lib\\subprocess.py\", line 997, in _execute_child\nstartupinfo)\nFileNotFoundError: [WinError 2] The system cannot find the file specified\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\nFile \"C:/Users/Noah Linton/PycharmProjects/EdgenuityBot/Edgenuity Bot\", line                         \n3, in &lt;module&gt;\ndriver = webdriver.Firefox()\nFile \"C:\\Users\\Noah Linton\\PycharmProjects\\EdgenuityBot\\venv\\lib\\site-\npackages\\selenium\\webdriver\\firefox\\webdriver.py\", line 148, in __init__\nself.service.start()\nFile \"C:\\Users\\Noah Linton\\PycharmProjects\\EdgenuityBot\\venv\\lib\\site-\npackages\\selenium\\webdriver\\common\\service.py\", line 83, in start\nos.path.basename(self.path), self.start_error_message)\nselenium.common.exceptions.WebDriverException: Message: 'geckodriver' \nexecutable needs to be in PATH. \n\n\nProcess finished with exit code 1\n</code></pre>\n\n<p>The executive code </p>\n\n<pre><code> from selenium import webdriver\n\ndriver = webdriver.Firefox()\ndriver.get(\"https://auth.edgenuity.com/Login/Login/Student\")\nbutton = driver.find_element_by_id('LoginSubmit')\nbutton.click()\n</code></pre>\n"}, {"tags": ["python", "regex"], "comments": [{"owner": {"reputation": 37822, "user_id": 1231450, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b9c98b4ce12bf9fd925d8c35c8861bb2?s=128&d=identicon&r=PG", "display_name": "Jan", "link": "https://stackoverflow.com/users/1231450/jan"}, "reply_to_user": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1517435803, "post_id": 48551160, "comment_id": 84100486, "body": "@usr2564301: Please do so. Also, I&#39;d be interested in a pure non-regex solution."}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "reply_to_user": {"reputation": 37822, "user_id": 1231450, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b9c98b4ce12bf9fd925d8c35c8861bb2?s=128&d=identicon&r=PG", "display_name": "Jan", "link": "https://stackoverflow.com/users/1231450/jan"}, "edited": false, "score": 0, "creation_date": 1517435910, "post_id": 48551160, "comment_id": 84100528, "body": "@Jan: since there is no cumbersome punctuation (comma&#39;s or (semi-)colons), a bog standard <code>split</code> could be used. It&#39;s fairly trivial so I won&#39;t suggest that as an answer. (Hah! you mention that punctuation as well. Here, have my last vote of the day \ud83d\ude00)"}, {"owner": {"reputation": 37822, "user_id": 1231450, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b9c98b4ce12bf9fd925d8c35c8861bb2?s=128&d=identicon&r=PG", "display_name": "Jan", "link": "https://stackoverflow.com/users/1231450/jan"}, "reply_to_user": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1517435959, "post_id": 48551160, "comment_id": 84100554, "body": "@usr2564301: Nope, try a split in combination with <code>CPI Combos</code> (see my notes below)."}], "answers": [{"comments": [{"owner": {"reputation": 8027, "user_id": 3282436, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e17caa3e07899b69539433130de1d420?s=128&d=identicon&r=PG&f=1", "display_name": "0x5453", "link": "https://stackoverflow.com/users/3282436/0x5453"}, "edited": false, "score": 0, "creation_date": 1517432635, "post_id": 48551299, "comment_id": 84098901, "body": "I think this should be <code>mystring.find(key)</code> if <code>key</code> is the substring you are looking for.  But even with that change, this just seems like a less pythonic version of the attempt that the OP listed."}], "tags": [], "owner": {"reputation": 371, "user_id": 7747899, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ld158.png?s=128&g=1", "display_name": "Woops", "link": "https://stackoverflow.com/users/7747899/woops"}, "is_accepted": false, "score": -2, "last_activity_date": 1517432920, "last_edit_date": 1517432920, "creation_date": 1517432285, "answer_id": 48551299, "question_id": 48551160, "link": "https://stackoverflow.com/questions/48551160/matching-if-any-keyword-from-a-list-is-present-in-a-string/48551299#48551299", "title": "Matching if any keyword from a list is present in a string", "body": "<pre><code>for index,key in enumerate(mylist):\n      if key.find(mystring) != -1:\n         return index\n</code></pre>\n\n<p>It loops over your list, on every item in the list, it checks if your string is contained in the item, if it does, <a href=\"https://www.tutorialspoint.com/python/string_find.htm\" rel=\"nofollow noreferrer\">find()</a> returns -1 which means it is contained, and if that happens, you get the index of the item  where it was found with the help of <a href=\"https://docs.python.org/3.5/library/functions.html#enumerate\" rel=\"nofollow noreferrer\">enumerate()</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 37822, "user_id": 1231450, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b9c98b4ce12bf9fd925d8c35c8861bb2?s=128&d=identicon&r=PG", "display_name": "Jan", "link": "https://stackoverflow.com/users/1231450/jan"}, "edited": false, "score": 0, "creation_date": 1517434981, "post_id": 48551303, "comment_id": 84100101, "body": "@heemayl: Found a drawback for the non-regex solution: combined phrases like <code>CPI Combos</code> cannot be found because of <code>split()</code>."}, {"owner": {"reputation": 809, "user_id": 2916886, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/21b5f91f799f6e0c4fd70b50931fc7d0?s=128&d=identicon&r=PG&f=1", "display_name": "user2916886", "link": "https://stackoverflow.com/users/2916886/user2916886"}, "edited": false, "score": 0, "creation_date": 1517441962, "post_id": 48551303, "comment_id": 84102896, "body": "so for non-regex version with ignorecase the search will be - <code>flag.search(string)</code>?"}, {"owner": {"reputation": 809, "user_id": 2916886, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/21b5f91f799f6e0c4fd70b50931fc7d0?s=128&d=identicon&r=PG&f=1", "display_name": "user2916886", "link": "https://stackoverflow.com/users/2916886/user2916886"}, "edited": false, "score": 0, "creation_date": 1517446247, "post_id": 48551303, "comment_id": 84103897, "body": "Also how do I identify which keyword was present in the String?"}], "tags": [], "owner": {"reputation": 37822, "user_id": 1231450, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b9c98b4ce12bf9fd925d8c35c8861bb2?s=128&d=identicon&r=PG", "display_name": "Jan", "link": "https://stackoverflow.com/users/1231450/jan"}, "is_accepted": true, "score": 4, "last_activity_date": 1517474226, "last_edit_date": 1517474226, "creation_date": 1517432297, "answer_id": 48551303, "question_id": 48551160, "link": "https://stackoverflow.com/questions/48551160/matching-if-any-keyword-from-a-list-is-present-in-a-string/48551303#48551303", "title": "Matching if any keyword from a list is present in a string", "body": "<h3>Regex solution</h3>\n\n<p>You'll need to implement word boundaries here:</p>\n\n<pre><code>import re\n\nkeywords = ['IO', 'IO Combination','CPI Combos']\n\nwords_flat = \"|\".join(r'\\b{}\\b'.format(word) for word in keywords)\nrx = re.compile(words_flat)\n\nstring = \"there is a IO competition coming in Summer 2018\"\nmatch = rx.search(string)\n\nif match:\n    print(\"Found: {}\".format(match.group(0)))\nelse:\n    print(\"Not found\")\n</code></pre>\n\n<hr>\n\n<p>Here, your list is joined with <code>|</code> and <code>\\b</code> on both sides.<br>\nAfterwards, you may search with <code>re.search()</code> which prints <code>\"Found: IO\"</code> in this example.</p>\n\n<hr>\n\n<p>Even shorter with a direct comprehension:</p>\n\n<pre><code>rx = re.compile(\"|\".join(r'\\b{}\\b'.format(word) for word in keywords))\n</code></pre>\n\n<hr>\n\n<h3>Non-regex solution</h3>\n\n<p>Please note that you can even use a non-regex solution <strong>for single words</strong>, you just have to reorder your comprehension and use <code>split()</code> like</p>\n\n<pre><code>found = any(word in keywords for word in string.split())\n\nif found:\n    # do sth. here\n</code></pre>\n\n<hr>\n\n<h3>Notes</h3>\n\n<p>The latter has the drawback that strings like </p>\n\n<pre><code>there is a IO. competition coming in Summer 2018\n#         ---^---\n</code></pre>\n\n<p>won't work while they do count as a \"word\" in the regex solution (hence the approaches are yielding different results). Additionally, because of the <code>split()</code> function, combined phrases like <code>CPI Combos</code> cannot be found. The regex solution has the advantage to even support lower and uppercase scenarios (just apply <code>flag = re.IGNORECASE</code>).  </p>\n\n<p>It really depends on your actual requirements. </p>\n"}], "owner": {"reputation": 809, "user_id": 2916886, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/21b5f91f799f6e0c4fd70b50931fc7d0?s=128&d=identicon&r=PG&f=1", "display_name": "user2916886", "link": "https://stackoverflow.com/users/2916886/user2916886"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 48551303, "answer_count": 2, "score": 3, "last_activity_date": 1517474226, "creation_date": 1517431712, "last_edit_date": 1517435369, "question_id": 48551160, "link": "https://stackoverflow.com/questions/48551160/matching-if-any-keyword-from-a-list-is-present-in-a-string", "title": "Matching if any keyword from a list is present in a string", "body": "<p>I have a list of keywords. A sample is:</p>\n\n<pre><code> ['IO', 'IO Combination','CPI Combos']\n</code></pre>\n\n<p>Now what I am trying to do is see if any of these keywords is present in a string. For example, if my string is: <code>there is a IO competition coming in Summer 2018</code>. So for this example since it contains <code>IO</code>, it should identify that but if the string is <code>there is a competition coming in Summer 2018</code> then it should not identify any keywords.</p>\n\n<p>I wrote this Python code but it also identifies <code>IO</code> in <code>competition</code>:</p>\n\n<pre><code>if any(word.lower() in string_1.lower() for word in keyword_list):\n                    print('FOUND A KEYWORD IN STRING')\n</code></pre>\n\n<p>I also want to identify which keyword was identified in the string (if any present). What is the issue in my code and how can I make sure that it matches only complete words?</p>\n"}, {"tags": ["python", "pandas", "tensorflow", "keras"], "comments": [{"owner": {"reputation": 34711, "user_id": 5974433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ojtxg.jpg?s=128&g=1", "display_name": "Marcin Mo\u017cejko", "link": "https://stackoverflow.com/users/5974433/marcin-mo%c5%bcejko"}, "edited": false, "score": 0, "creation_date": 1517433547, "post_id": 48551158, "comment_id": 84099383, "body": "Just from curiosity - could you check how <code>preds[::1024]</code> vector looks like?"}], "answers": [{"comments": [{"owner": {"reputation": 137, "user_id": 2448361, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a234db96d5b82eac406cd84980c4f4ff?s=128&d=identicon&r=PG", "display_name": "user2448361", "link": "https://stackoverflow.com/users/2448361/user2448361"}, "edited": false, "score": 0, "creation_date": 1517469472, "post_id": 48551869, "comment_id": 84110265, "body": "Great explanation and example. I solved the problem. Thank you very much :)"}], "tags": [], "owner": {"reputation": 34711, "user_id": 5974433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ojtxg.jpg?s=128&g=1", "display_name": "Marcin Mo\u017cejko", "link": "https://stackoverflow.com/users/5974433/marcin-mo%c5%bcejko"}, "is_accepted": false, "score": 6, "last_activity_date": 1517437595, "last_edit_date": 1517437595, "creation_date": 1517434705, "answer_id": 48551869, "question_id": 48551158, "link": "https://stackoverflow.com/questions/48551158/keras-predict-generator-not-returning-correct-number-of-samples/48551869#48551869", "title": "Keras&#39; predict_generator not returning correct number of samples", "body": "<p>Well, this is tricky. So let's dive into the problem:</p>\n\n<ol>\n<li><p><strong>How <code>fit_generator</code> works when batch provided is less than <code>batch_size</code></strong>: As you may see - many batches you provide to <code>fit_generator</code> are of the size less than <code>batch_size</code>. This happens every time when you take the last batch from every file. Usually - a number of texts are not divisible by batch size so there are not enough texts to fill the batch. This ends up in feeding less examples to a model.</p>\n\n<p>And here is a tricky part - <code>keras</code> ignores less size, treats this as valid generator step and returns values for an incomplete batch.</p></li>\n<li><p><strong>So why there are texts missing:</strong> let me show you by example. Let's assume that you have 2 files with 5 texts each and your <code>batch_size</code> is 4. This is how your batches would look like:</p>\n\n<pre><code>[1t1, 1t2, 1t3, 1t4], [1t5,], [2t1, 2t2, 2t3, 2t4], [2t5].\n</code></pre>\n\n<p>As you may see - the actual number of steps needed is equal to <code>4</code> which is not equal to <code>3</code> which is obtained by taking: <code>math.ceil(10 / 4)</code>. This way is appropriate for these batches:</p>\n\n<pre><code>[1t1, 1t2, 1t3, 1t4], [1t5, 2t1, 2t2, 2t3], [2t4, 2t5]\n</code></pre>\n\n<p>But batches returned from your generator are not like these.</p></li>\n<li><p><strong>How to solve the problem?</strong> - you need to make your generator to compute the actual number of steps needed:</p>\n\n<pre><code>def steps_needed(self):\n    steps = 0\n    csv_files = glob.glob(self.directory + '/*.csv')\n    for file in csv_files:\n    df = pd.read_csv(file, chunksize=self.chunk_size)\n    for df_chunk in df:\n        chunk_steps = math.ceil(len(df_chunk) / self.batch_size)\n        steps += chunk_steps\n    return steps\n</code></pre>\n\n<p>This function computes exactly how many batches your generator will return.</p></li>\n</ol>\n\n<p>Cheers :)</p>\n"}], "owner": {"reputation": 137, "user_id": 2448361, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a234db96d5b82eac406cd84980c4f4ff?s=128&d=identicon&r=PG", "display_name": "user2448361", "link": "https://stackoverflow.com/users/2448361/user2448361"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2381, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1517437595, "creation_date": 1517431693, "question_id": 48551158, "link": "https://stackoverflow.com/questions/48551158/keras-predict-generator-not-returning-correct-number-of-samples", "title": "Keras&#39; predict_generator not returning correct number of samples", "body": "<p>I'm trying to implement a custom data generator that reads data from csv file(s) in chunks using <code>pandas.read_csv</code>. I tested it with <code>model.predict_generator</code> but the number of predictions returned is less than expected (in my case, 248192 out of 253457).</p>\n\n<p>Custom generator</p>\n\n<pre><code>class TestDataGenerator:\n\ndef __init__(self, directory, batch_size=1024):\n    self.directory = directory\n    self.batch_size = batch_size\n    self.chunk_size=10000\n    self.samples = 0\n\ndef _to_movie_id(self, ids):\n    ids = ast.literal_eval(ids)\n    if ids == []:\n        return [EMB_MATRIX_SIZE-1]\n    else:\n        return [movie2idx[str(movie_id)] for movie_id in ids]\n\ndef generate(self):\n    csv_files = glob.glob(self.directory + '/*.csv')\n    while True:\n        for file in csv_files:\n            df = pd.read_csv(file, chunksize=self.chunk_size)\n            for df_chunk in df:\n                chunk_steps = math.ceil(len(df_chunk) / self.batch_size)\n                for i in range(chunk_steps):\n                    batch = df_chunk[i * self.batch_size:(i + 1) * self.batch_size]\n                    X_batch, y_batch = self.preprocess(batch)\n                    self.samples += len(batch)\n                    yield X_batch, y_batch\n\n\ndef preprocess(self, df):\n    X_user = df['user'].apply(lambda x: user2idx[str(x)]).values\n    X_watched = df['watched'].apply(self._to_movie_id).values\n    X_watched_padded = pad_sequences(X_watched, maxlen=SEQ_LENGTH, value=0)\n\n    ohe = df['movie'].apply(lambda x: to_categorical(movie2idx[x], num_classes=len(movie2idx)))\n    X = [X_user, X_watched_padded]\n    y = np.array([o.tolist() for o in ohe])\n\n    return X, y\n</code></pre>\n\n<p>Run <code>model.predict_generator</code></p>\n\n<pre><code>batch_size=1024\nn_samples_test = 253457\ntest_dir = 'folder/'\ntest_gen = TestDataGenerator(test_dir, batch_size=batch_size)\nnext_test_gen = test_gen.generate()\npreds = model.predict_generator(next_test_gen, steps=math.ceil(n_samples_test/batch_size))\n</code></pre>\n\n<p>After running <code>model.predict_generator</code>, the number of rows for <code>preds</code> is <code>248192</code> which is less than the actual <code>253457</code>. It looks like it's missing a few number of epochs. I also tested <code>generate</code> individually without interacting with Keras and it behaved as expected returning the correct number of samples in csv file. Also, before the <code>generate</code> yields a value, I keep track of the number of samples processed with <code>samples</code>. Surprisingly, the value for <code>samples</code> is 250000. So, I'm pretty sure I might have done something with Keras. </p>\n\n<p>Note that I also tried setting <code>max_queue_size=1</code>, and making <code>generate</code> thread-safe but got no luck. I placed only 1 csv file under <code>test_dir</code> for simplicity. I'm using Keras 2.1.2-tf embedded in Tensorflow 1.5.0.</p>\n\n<p>I did some research on how this can be done but haven't come across a useful example yet. What is wrong with this implementation?</p>\n\n<p>Thanks</p>\n\n<p>Peeranat F.</p>\n"}, {"tags": ["python", "python-3.x", "amazon-web-services", "aws-lambda", "pymysql"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1517431226, "post_id": 48551038, "comment_id": 84098201, "body": "Please include the full traceback"}, {"owner": {"reputation": 728, "user_id": 656691, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/2939818f3664d3844f339c3981e59ab3?s=128&d=identicon&r=PG", "display_name": "Patrick Villela", "link": "https://stackoverflow.com/users/656691/patrick-villela"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1517431593, "post_id": 48551038, "comment_id": 84098369, "body": "@roganjosh Done"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1517431645, "post_id": 48551038, "comment_id": 84098394, "body": ":( I was hoping it might have shed a bit more light on the issue but I don&#39;t take anything from that"}, {"owner": {"reputation": 728, "user_id": 656691, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/2939818f3664d3844f339c3981e59ab3?s=128&d=identicon&r=PG", "display_name": "Patrick Villela", "link": "https://stackoverflow.com/users/656691/patrick-villela"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1517431756, "post_id": 48551038, "comment_id": 84098459, "body": "@roganjosh Yeah, when you asked me that I had a &quot;OF COURSE&quot; moment, but got disappointed as well..."}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 1, "creation_date": 1517431866, "post_id": 48551038, "comment_id": 84098511, "body": "What do you get from <code>print(dir(pymysql))</code>? My suspicion is that you have named another script <code>pymysql.py</code> somewhere that&#39;s on the PATH. Do you recognise anything in <code>dir</code> that is of your creation?"}, {"owner": {"reputation": 728, "user_id": 656691, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/2939818f3664d3844f339c3981e59ab3?s=128&d=identicon&r=PG", "display_name": "Patrick Villela", "link": "https://stackoverflow.com/users/656691/patrick-villela"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1517483582, "post_id": 48551038, "comment_id": 84118350, "body": "I do not, but I&#39;m gonna check that out."}, {"owner": {"reputation": 728, "user_id": 656691, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/2939818f3664d3844f339c3981e59ab3?s=128&d=identicon&r=PG", "display_name": "Patrick Villela", "link": "https://stackoverflow.com/users/656691/patrick-villela"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1517484712, "post_id": 48551038, "comment_id": 84118980, "body": "Well, guess what? <code>[&#39;__doc__&#39;, &#39;__loader__&#39;, &#39;__name__&#39;, &#39;__package__&#39;, &#39;__path__&#39;, &#39;__spec__&#39;]</code>. I don&#39;t know, but I have no other script but lambda.py..."}, {"owner": {"reputation": 498, "user_id": 7280962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8181c2901a87288eef3d3a62589b0bd4?s=128&d=identicon&r=PG", "display_name": "Nicholas Martinez", "link": "https://stackoverflow.com/users/7280962/nicholas-martinez"}, "edited": false, "score": 0, "creation_date": 1517494029, "post_id": 48551038, "comment_id": 84125110, "body": "How did you package and upload the Lambda function to AWS?"}, {"owner": {"reputation": 728, "user_id": 656691, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/2939818f3664d3844f339c3981e59ab3?s=128&d=identicon&r=PG", "display_name": "Patrick Villela", "link": "https://stackoverflow.com/users/656691/patrick-villela"}, "edited": false, "score": 0, "creation_date": 1517504154, "post_id": 48551038, "comment_id": 84132077, "body": "I installed the library to the directory with <code>pip install --target=. PyMySQL</code> and then <code>zip package.zip *</code>. I then uploaded package.zip to AWS."}, {"owner": {"reputation": 498, "user_id": 7280962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8181c2901a87288eef3d3a62589b0bd4?s=128&d=identicon&r=PG", "display_name": "Nicholas Martinez", "link": "https://stackoverflow.com/users/7280962/nicholas-martinez"}, "edited": false, "score": 0, "creation_date": 1517512423, "post_id": 48551038, "comment_id": 84136586, "body": "I would suspect there is a problem with the way you created the package/zipped it. Are you familiar with SAM?"}, {"owner": {"reputation": 3294, "user_id": 2190251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9318640992144436a6b04d07eb947933?s=128&d=identicon&r=PG", "display_name": "FelixEnescu", "link": "https://stackoverflow.com/users/2190251/felixenescu"}, "edited": false, "score": 0, "creation_date": 1517579619, "post_id": 48551038, "comment_id": 84164719, "body": "What is your environment?"}, {"owner": {"reputation": 728, "user_id": 656691, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/2939818f3664d3844f339c3981e59ab3?s=128&d=identicon&r=PG", "display_name": "Patrick Villela", "link": "https://stackoverflow.com/users/656691/patrick-villela"}, "edited": false, "score": 0, "creation_date": 1517585303, "post_id": 48551038, "comment_id": 84168568, "body": "My environment is an AWS Lambda function. I have in the directory pymysql and the function itself, lambda.py"}], "answers": [{"comments": [{"owner": {"reputation": 153, "user_id": 2363354, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/4Qx9p.jpg?s=128&g=1", "display_name": "Swapniel", "link": "https://stackoverflow.com/users/2363354/swapniel"}, "edited": false, "score": 0, "creation_date": 1543227265, "post_id": 49852755, "comment_id": 93827601, "body": "The subdirectories and files are present. I am also facing the same issue."}], "tags": [], "owner": {"reputation": 111, "user_id": 8573615, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad7e2c0fe3ab3ce90619195f379acd21?s=128&d=identicon&r=PG&f=1", "display_name": "weegolo", "link": "https://stackoverflow.com/users/8573615/weegolo"}, "is_accepted": false, "score": 1, "last_activity_date": 1523867294, "creation_date": 1523867294, "answer_id": 49852755, "question_id": 48551038, "link": "https://stackoverflow.com/questions/48551038/aws-lambda-python-library-function-error/49852755#49852755", "title": "AWS Lambda python library function error", "body": "<p>Try <code>zip -r package.zip *</code></p>\n\n<p>I suspect you are zipping only the top level of the pymysql module, not the contents of its subdirectories</p>\n\n<p>The AWS documentation for uploading to lambda is pretty poor.  </p>\n"}, {"tags": [], "owner": {"reputation": 191, "user_id": 7495499, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/6477e048326cfddadf77f7a6408c51df?s=128&d=identicon&r=PG&f=1", "display_name": "Bhaskar Bhuyan", "link": "https://stackoverflow.com/users/7495499/bhaskar-bhuyan"}, "is_accepted": false, "score": 0, "last_activity_date": 1590590084, "creation_date": 1590590084, "answer_id": 62045717, "question_id": 48551038, "link": "https://stackoverflow.com/questions/48551038/aws-lambda-python-library-function-error/62045717#62045717", "title": "AWS Lambda python library function error", "body": "<ol>\n<li><p>First create a directory in your local machine eg: \"package-dir\"</p></li>\n<li><p>Now install pymlsql to your created directory path \"pip install pymlsql -t path/to/package-dir\"</p></li>\n<li><p>Paste you python script to the same dirctory</p></li>\n<li><p>Select all the items inside the directory and create a zip file. Do not zip the directory itself this is very important</p></li>\n<li><p>Upload the zip file in lambda and it should work</p></li>\n<li><p>Also see that the handler name is \"python_script_name.lambda_handler\".\nEg: if your script file name is \"lambda_function.py\" then your handler should be \"lambda_function.lambda_handler\"</p></li>\n</ol>\n"}], "owner": {"reputation": 728, "user_id": 656691, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/2939818f3664d3844f339c3981e59ab3?s=128&d=identicon&r=PG", "display_name": "Patrick Villela", "link": "https://stackoverflow.com/users/656691/patrick-villela"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 590, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1590590084, "creation_date": 1517431071, "last_edit_date": 1517431574, "question_id": 48551038, "link": "https://stackoverflow.com/questions/48551038/aws-lambda-python-library-function-error", "title": "AWS Lambda python library function error", "body": "<p>I'm trying to connect to AWS RDS using AWS Lambda. I installed PyMySQL to the directory and built the package with the code below and the libraries</p>\n\n<pre><code>import sys\nimport pymysql\n\ndef lambda_handler(event, context):\n    string=\"\"\n    try:\n            connection = pymysql.connect(host='',\n                                            user='',\n                                            password='',\n                                            db='',\n                                            charset='',\n                                            cursorclass=pymysql.cursors.DictCursor)\n            cur = connection.cursor(pymysql.cursors.DictCursor)\n            cur.execute(\"select * from table\")\n            for row in cur:\n                    print(row['col'])\n                    string+=row['col']\n    except Exception as e:\n            print(\"MySQL error: %s\" % (e.args[0]))\n\n    return string\n\nprint(lambda_handler(\"\",\"\"))\n</code></pre>\n\n<p>In my machine, the code above works, but in AWS, it displays </p>\n\n<blockquote>\n  <p>MySQL error: module 'pymysql' has no attribute 'connect'</p>\n</blockquote>\n\n<p>I checked that pymysql is only available in the directory that has the code, so I don't know why I'm not able to use the connect method.\nBoth Python versions are the same.</p>\n\n<p>EDIT: </p>\n\n<pre><code>Traceback (most recent call last):\n  File \"/var/task/lambda.py\", line 7, in lambda_handler\n    connection = pymysql.connect(host='',\nAttributeError: module 'pymysql' has no attribute 'connect'\n</code></pre>\n"}]