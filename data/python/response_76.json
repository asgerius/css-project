[{"tags": ["python", "csv"], "comments": [{"owner": {"reputation": 74709, "user_id": 21945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/631470ecb1d4fe8bd3be6d7e0dfe4449?s=128&d=identicon&r=PG", "display_name": "mhawke", "link": "https://stackoverflow.com/users/21945/mhawke"}, "edited": false, "score": 1, "creation_date": 1466640561, "post_id": 37980119, "comment_id": 63406008, "body": "What is the trouble that you are running into? Any errors? Please add example input as it&#39;s not clear what your CSV file contains. Does your CSV file literally contain columns like &quot;[&#39;spam&#39;, &#39;eggs&#39;, ..., &#39;spam&#39;]&quot;?"}, {"owner": {"reputation": 3, "user_id": 6501655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e8d536a5b478a2367e22960d04b77c2?s=128&d=identicon&r=PG", "display_name": "Joshua Gensler", "link": "https://stackoverflow.com/users/6501655/joshua-gensler"}, "reply_to_user": {"reputation": 74709, "user_id": 21945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/631470ecb1d4fe8bd3be6d7e0dfe4449?s=128&d=identicon&r=PG", "display_name": "mhawke", "link": "https://stackoverflow.com/users/21945/mhawke"}, "edited": false, "score": 0, "creation_date": 1466641217, "post_id": 37980119, "comment_id": 63406185, "body": "I tried editing the question to give some more context on what things look like and the issues I&#39;m getting. Let me know if you need more."}], "answers": [{"comments": [{"owner": {"reputation": 74709, "user_id": 21945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/631470ecb1d4fe8bd3be6d7e0dfe4449?s=128&d=identicon&r=PG", "display_name": "mhawke", "link": "https://stackoverflow.com/users/21945/mhawke"}, "reply_to_user": {"reputation": 3, "user_id": 6501655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e8d536a5b478a2367e22960d04b77c2?s=128&d=identicon&r=PG", "display_name": "Joshua Gensler", "link": "https://stackoverflow.com/users/6501655/joshua-gensler"}, "edited": false, "score": 0, "creation_date": 1466643191, "post_id": 37980354, "comment_id": 63406661, "body": "@JoshuaGensler: no problem."}], "tags": [], "owner": {"reputation": 74709, "user_id": 21945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/631470ecb1d4fe8bd3be6d7e0dfe4449?s=128&d=identicon&r=PG", "display_name": "mhawke", "link": "https://stackoverflow.com/users/21945/mhawke"}, "is_accepted": true, "score": 0, "last_activity_date": 1466641691, "creation_date": 1466641691, "answer_id": 37980354, "question_id": 37980119, "link": "https://stackoverflow.com/questions/37980119/objects-in-column-of-csv-file-are-lists-how-do-i-combine-these-into-one-giant-l/37980354#37980354", "title": "Objects in column of csv file are lists. How do I combine these into one giant list using Python?", "body": "<p>A file containing <code>['spam', 'eggs', 'spam', 'eggs']</code> is not a CSV file. The content appears more like a string literal version of a Python list. Given that you might be better off treating them as Python list literals, and parsing them with <code>ast.literal_eval()</code>:</p>\n\n<pre><code>from ast import literal_eval\n\nwith open(&lt;filepath&gt;) as infile:\n    lst = []\n    for line in infile:\n        lst.extend(literal_eval(line))\n</code></pre>\n\n<p>If your input file contains this:</p>\n\n<pre>\n['spam', 'eggs', 'spam', 'eggs']\n['more', 'spam', 'more', 'eggs']\n['spam', 'spam', 'spam', 'spam']\n</pre>\n\n<p><code>lst</code> would end up containing this:</p>\n\n<pre><code>['spam', 'eggs', 'spam', 'eggs', 'more', 'spam', 'more', 'eggs', 'spam', 'spam', 'spam', 'spam']\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 6501655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e8d536a5b478a2367e22960d04b77c2?s=128&d=identicon&r=PG", "display_name": "Joshua Gensler", "link": "https://stackoverflow.com/users/6501655/joshua-gensler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 37980354, "answer_count": 1, "score": 0, "last_activity_date": 1466641691, "creation_date": 1466639950, "last_edit_date": 1466641180, "question_id": 37980119, "link": "https://stackoverflow.com/questions/37980119/objects-in-column-of-csv-file-are-lists-how-do-i-combine-these-into-one-giant-l", "title": "Objects in column of csv file are lists. How do I combine these into one giant list using Python?", "body": "<p>I have a csv file whose columns consists entirely of lists like ['spam', 'eggs', ..., 'spam']. Ideally I want to aggregate all of these lists together into one giant list, but am running into trouble doing that; initially I thought something like:</p>\n\n<pre><code>import csv\nwith open(&lt;filepath&gt;, 'r') as csvfile:\n    reader = csv.reader(csvfile)\n    lst = []\n    for row in reader:\n        lst += row\n</code></pre>\n\n<p>So my idea was basically that each \"row in reader\" would more-or-less be the list ['spam', 'eggs', ..., 'spam'] and that I could just combine these together one at a time, but that evidently ran into some problems. Is there anyway to make this work? Any help is appreciated!</p>\n\n<p>Edit: To give more context, let's say this csv has one column only and three rows, each of which is literally \"['spam', 'eggs', 'spam', 'eggs']\". The desired output would be:</p>\n\n<pre><code>\"['spam', 'eggs', 'spam', 'eggs', 'spam', 'eggs', 'spam', 'eggs', 'spam', 'eggs', 'spam', 'eggs']\"\n</code></pre>\n\n<p>But the output I'm getting from my code instead is:</p>\n\n<pre><code>\"[['spam', 'eggs', 'spam', 'eggs'], ['spam', 'eggs', 'spam', 'eggs'], ['spam', 'eggs', 'spam', 'eggs']]\n</code></pre>\n\n<p>So the question is around how to fix this kind of issue.</p>\n"}, {"tags": ["python", "list", "multidimensional-array", "tuples"], "comments": [{"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 3, "creation_date": 1466640186, "post_id": 37980089, "comment_id": 63405916, "body": "I don&#39;t understand: the nearest tuple to the right of the second coordinate is (1, 0), not -1, -1.  Where do the <b>-1</b> values come from?"}], "answers": [{"tags": [], "owner": {"reputation": 3202, "user_id": 3358074, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vnKYD.png?s=128&g=1", "display_name": "dmitryro", "link": "https://stackoverflow.com/users/3358074/dmitryro"}, "is_accepted": false, "score": 0, "last_activity_date": 1466640473, "creation_date": 1466640473, "answer_id": 37980202, "question_id": 37980089, "link": "https://stackoverflow.com/questions/37980089/how-to-iterate-through-a-list-of-tuples-in-python/37980202#37980202", "title": "How to iterate through a list of tuples in Python?", "body": "<p>Do it like this:</p>\n\n<pre><code>coordinates = [(0,0),(0,3),(1,0),(1,2),(1,3)]\n\nf = lambda x,index:tuple( i[index] for i in x)\n\ntup1 = f(coordinates,0)\ntup2 = f(coordinates,1)\n\nprint tup1\nprint tup2\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 43245, "user_id": 699305, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/db6ce45b5ec86e1b00d922fc5cee315f?s=128&d=identicon&r=PG", "display_name": "alexis", "link": "https://stackoverflow.com/users/699305/alexis"}, "is_accepted": false, "score": 4, "last_activity_date": 1466640917, "creation_date": 1466640917, "answer_id": 37980257, "question_id": 37980089, "link": "https://stackoverflow.com/questions/37980089/how-to-iterate-through-a-list-of-tuples-in-python/37980257#37980257", "title": "How to iterate through a list of tuples in Python?", "body": "<p>Extracting the first (or second) coordinate is simple, and it's a python idiom you should know:</p>\n\n<pre><code>[ i for i, j in coordinates ]\n</code></pre>\n\n<p>However, this does not match your example output (and would give five values, not six). So... who knows what you mean. As for the rest of your tasks, I can't even guess wrong. You'll need to clarify your goal or wait for someone who can read your mind.</p>\n"}, {"tags": [], "owner": {"reputation": 613, "user_id": 6376924, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/8108cf5530c5687c887bb234aca2d93d?s=128&d=identicon&r=PG&f=1", "display_name": "atomsmasher", "link": "https://stackoverflow.com/users/6376924/atomsmasher"}, "is_accepted": false, "score": 0, "last_activity_date": 1466641211, "creation_date": 1466641211, "answer_id": 37980295, "question_id": 37980089, "link": "https://stackoverflow.com/questions/37980089/how-to-iterate-through-a-list-of-tuples-in-python/37980295#37980295", "title": "How to iterate through a list of tuples in Python?", "body": "<p>As others have commented, not sure where the -1 values come from, and this only corresponds to your first example output:</p>\n\n<pre><code>coordinates = [(0,0),(0,3),(1,0),(1,2),(1,3)]\n\n\ndef return_coords(c,p):\n    return [y for x in range(p,p+3) for y in c[x]]\n\nreturn_coords(coordinates, 0)\nreturn_coords(coordinates, 1)\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>[0, 0, 0, 3, 1, 0]\n[0, 3, 1, 0, 1, 2]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3749, "user_id": 3580365, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Ch2Yd.jpg?s=128&g=1", "display_name": "Gal Dreiman", "link": "https://stackoverflow.com/users/3580365/gal-dreiman"}, "is_accepted": false, "score": 7, "last_activity_date": 1562140972, "last_edit_date": 1562140972, "creation_date": 1466669784, "answer_id": 37985844, "question_id": 37980089, "link": "https://stackoverflow.com/questions/37980089/how-to-iterate-through-a-list-of-tuples-in-python/37985844#37985844", "title": "How to iterate through a list of tuples in Python?", "body": "<p>This print is not exactly as you defined, but you can use this kind of iteration on list of tuples and do whatever you need with each tuple :</p>\n\n<pre><code>coordinates = [(0,0),(0,3),(1,0),(1,2),(1,3)]\nfor (i,j) in coordinates:\n    print i,j\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 6501543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5380d5f8d585741ad660dfe40a56d968?s=128&d=identicon&r=PG&f=1", "display_name": "roshlife", "link": "https://stackoverflow.com/users/6501543/roshlife"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 13968, "favorite_count": 0, "closed_date": 1466694300, "answer_count": 4, "score": 2, "last_activity_date": 1562140972, "creation_date": 1466639810, "last_edit_date": 1466640082, "question_id": 37980089, "link": "https://stackoverflow.com/questions/37980089/how-to-iterate-through-a-list-of-tuples-in-python", "closed_reason": "Duplicate", "title": "How to iterate through a list of tuples in Python?", "body": "<pre><code>coordinates = [(i, j) for i, row in enumerate(mymatrix) for j, v in enumerate(row) if v == '0']\n</code></pre>\n\n<p>I have a list of coordinates (tuples) and would like to print the coordinate, the nearest tuple to the right of the coordinate and the next tuple within the same column as the coordinate. How would I do this for each coordinate?</p>\n\n<p>For example:</p>\n\n<pre><code>coordinates = [(0,0),(0,3),(1,0),(1,2),(1,3)]\n</code></pre>\n\n<p>Output for the first coordinate would be:</p>\n\n<pre><code>0 0 0 3 1 0\n</code></pre>\n\n<p>Output for the second coordinate would be:</p>\n\n<pre><code>0 3 -1 -1 1 3\n</code></pre>\n"}, {"tags": ["python", "regex", "token", "tokenize"], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 2763524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b076d5ea1459585af7cde71b6e18d78b?s=128&d=identicon&r=PG&f=1", "display_name": "user2763524", "link": "https://stackoverflow.com/users/2763524/user2763524"}, "edited": false, "score": 0, "creation_date": 1466641294, "post_id": 37980188, "comment_id": 63406210, "body": "Sorry if I was unclear, the URLs (or strings rather) with the backslashes are already in my data. So I&#39;m trying to turn      https:\\/\\/t.co\\/c1taPXzi4X  into       http// t.co/c1taPXzi4X"}], "tags": [], "owner": {"reputation": 169, "user_id": 1945707, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rsSXz.jpg?s=128&g=1", "display_name": "Tom&#225;s Gonzalez Dowling", "link": "https://stackoverflow.com/users/1945707/tom%c3%a1s-gonzalez-dowling"}, "is_accepted": false, "score": 0, "last_activity_date": 1466640429, "last_edit_date": 1495542709, "creation_date": 1466640429, "answer_id": 37980188, "question_id": 37980061, "link": "https://stackoverflow.com/questions/37980061/using-regex-to-deal-with-escape-characters-in-urls/37980188#37980188", "title": "Using regex to deal with escape characters in URLs", "body": "<p>As pointed out in this <a href=\"https://stackoverflow.com/questions/1856785/characters-allowed-in-a-url\">other question</a>, you can't add a \"\\\" in a url. \nYou regex seems ok to me, i've tested <a href=\"http://regexr.com/3dm7s\" rel=\"nofollow noreferrer\">against regxr</a>. The only thing I've done is scape the backslashes after http.</p>\n"}, {"tags": [], "owner": {"reputation": 802, "user_id": 6463812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ada6562a6b8560eca1f5227dc046a03?s=128&d=identicon&r=PG&f=1", "display_name": "Yarnspinner", "link": "https://stackoverflow.com/users/6463812/yarnspinner"}, "is_accepted": false, "score": 0, "last_activity_date": 1466686763, "creation_date": 1466686763, "answer_id": 37992387, "question_id": 37980061, "link": "https://stackoverflow.com/questions/37980061/using-regex-to-deal-with-escape-characters-in-urls/37992387#37992387", "title": "Using regex to deal with escape characters in URLs", "body": "<p>Calling <code>re.sub</code> before you apply the regex would work</p>\n\n<pre><code>re.sub(r\"\\\\\",\"\",r\"https:\\/\\/abc.com\\/defg\") \n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 2763524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b076d5ea1459585af7cde71b6e18d78b?s=128&d=identicon&r=PG&f=1", "display_name": "user2763524", "link": "https://stackoverflow.com/users/2763524/user2763524"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 133, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1466686763, "creation_date": 1466639644, "question_id": 37980061, "link": "https://stackoverflow.com/questions/37980061/using-regex-to-deal-with-escape-characters-in-urls", "title": "Using regex to deal with escape characters in URLs", "body": "<p>I'm in the process of tokenizing strings which contain URLs. Here is the part I use to pick up the URLs:</p>\n\n<pre><code>regex_str = [r'http[s]?://(?:[a-z]|[0-9]|[$-_@.&amp;+]|[!*\\(\\),]|(?:%[0-9a-f][0-9a-f]))+']\n</code></pre>\n\n<p>It picks up \"regular\" URLs perfectly fine; however some of the URLs look like this:</p>\n\n<pre><code>https:\\/\\/t.co\\/c1taPXzi4X\n</code></pre>\n\n<p>How can I modify the regex so that it deals with the escape characters, in order to end up with a complete and clean URL?</p>\n\n<p>Many thanks in advance! :) </p>\n"}, {"tags": ["python", "theano", "bayesian", "pymc3"], "comments": [{"owner": {"reputation": 3871, "user_id": 429726, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/b9ac79232e794df7c8e63e5e0df2fc26?s=128&d=identicon&r=PG", "display_name": "Chris Fonnesbeck", "link": "https://stackoverflow.com/users/429726/chris-fonnesbeck"}, "edited": false, "score": 1, "creation_date": 1466687622, "post_id": 37979956, "comment_id": 63428968, "body": "It looks like you need the dot product of the data and coefficients, not elementwise multiplication: <code>x_train.dot(beta)</code> or similar"}, {"owner": {"reputation": 7511, "user_id": 2530674, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/75d910050ccc1bc26073167739158abf?s=128&d=identicon&r=PG", "display_name": "sachinruk", "link": "https://stackoverflow.com/users/2530674/sachinruk"}, "reply_to_user": {"reputation": 3871, "user_id": 429726, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/b9ac79232e794df7c8e63e5e0df2fc26?s=128&d=identicon&r=PG", "display_name": "Chris Fonnesbeck", "link": "https://stackoverflow.com/users/429726/chris-fonnesbeck"}, "edited": false, "score": 0, "creation_date": 1466729543, "post_id": 37979956, "comment_id": 63452024, "body": "That did the trick. Do you want to put this as a solution so that I can accept it as the answer?"}], "answers": [{"tags": [], "owner": {"reputation": 3871, "user_id": 429726, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/b9ac79232e794df7c8e63e5e0df2fc26?s=128&d=identicon&r=PG", "display_name": "Chris Fonnesbeck", "link": "https://stackoverflow.com/users/429726/chris-fonnesbeck"}, "is_accepted": true, "score": 2, "last_activity_date": 1466937936, "creation_date": 1466937936, "answer_id": 38037685, "question_id": 37979956, "link": "https://stackoverflow.com/questions/37979956/having-two-input-matrices-in-regression/38037685#38037685", "title": "having two input matrices in regression", "body": "<p>In the above, you are multiplying the vector of coefficients and matrix of data element-wise. You should take their dot product instead. For example:</p>\n\n<pre><code>x_train.dot(beta)\n</code></pre>\n"}], "owner": {"reputation": 7511, "user_id": 2530674, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/75d910050ccc1bc26073167739158abf?s=128&d=identicon&r=PG", "display_name": "sachinruk", "link": "https://stackoverflow.com/users/2530674/sachinruk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 0, "accepted_answer_id": 38037685, "answer_count": 1, "score": 0, "last_activity_date": 1466937936, "creation_date": 1466638802, "question_id": 37979956, "link": "https://stackoverflow.com/questions/37979956/having-two-input-matrices-in-regression", "title": "having two input matrices in regression", "body": "<p>I wish to learn some coefficients of which some are sparse, and others are simply regularised as usual. The sparse part is done keeping Relevance Vector Machines in mind. My model is as follows:</p>\n\n<pre><code>with pm.Model() as model:\n    b0 = pm.Normal('b0',mu=0,sd=10)\n    beta = pm.Normal('beta',mu=0,sd=30,shape = x_train.shape[1]) #normal coefficients\n\n    #sparse weights\n    alpha = pm.Gamma('alpha',1e-4,1e-4,shape = Phi_train.shape[1])\n    beta_s = pm.Normal('beta_s',mu=0,tau=alpha,shape = Phi_train.shape[1]) #sparse betas\n\n    # Likelihood - NOTE x_train and Phi_train are the two INPUT matrices\n    mu = b0 + x_train*beta.T + Phi_train*beta_s.T \n    inv_sigma = pm.Gamma('sigma',1e-4,1e-4)\n    y_est = pm.Normal('y_est', mu=mu, tau= inv_sigma, observed=y_train)\n</code></pre>\n\n<p>except that it doesnt seem to like the mu = b0... line. If I get rid of either <code>x_train*beta.T</code> or <code>Phi_train*beta_s.T</code> it compiles fine. Otherwise it complains of the following error: \n<code>ValueError: Input dimension mis-match. (input[0].shape[1] = 35, input[1].shape[1] = 500)</code></p>\n\n<p>So the sizes of the two matrices are: <code>(210042, 35)</code> and <code>(210042, 500)</code>. So am I doing something wrong here?</p>\n"}, {"tags": ["python", "xcode", "macos"], "comments": [{"owner": {"reputation": 339, "user_id": 6189206, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f3d3ce71b178c2a0c5c0a70c29eabc9?s=128&d=identicon&r=PG&f=1", "display_name": "BoxTechy", "link": "https://stackoverflow.com/users/6189206/boxtechy"}, "reply_to_user": {"reputation": 7725, "user_id": 4889267, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b86b65464f4070d38bbf2abdbd4f1610?s=128&d=identicon&r=PG&f=1", "display_name": "AK47", "link": "https://stackoverflow.com/users/4889267/ak47"}, "edited": false, "score": 1, "creation_date": 1466723890, "post_id": 37979941, "comment_id": 63450737, "body": "@tehjoker Thanks! It did help. I knew that I should just change my default program, but it was just kinda weird that Xcode could open Python scripts without having a proper interpreter for it."}], "answers": [{"tags": [], "owner": {"reputation": 7725, "user_id": 4889267, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b86b65464f4070d38bbf2abdbd4f1610?s=128&d=identicon&r=PG&f=1", "display_name": "AK47", "link": "https://stackoverflow.com/users/4889267/ak47"}, "is_accepted": true, "score": 2, "last_activity_date": 1466724374, "last_edit_date": 1495542163, "creation_date": 1466640391, "answer_id": 37980181, "question_id": 37979941, "link": "https://stackoverflow.com/questions/37979941/py-files-default-to-xcode-on-mac/37980181#37980181", "title": ".py files default to Xcode on Mac?", "body": "<p>The default application for .py files on Mac is set to open in Xcode. Usually at installation time, you're provided with a list of checkboxes of extensions to associate with the program you're installing.</p>\n\n<p>To fix this, follow this tutorial: \n<a href=\"http://www.imore.com/how-change-default-apps-os-x\" rel=\"nofollow noreferrer\">http://www.imore.com/how-change-default-apps-os-x</a></p>\n\n<p>Also, it doesn't recognize regular Python syntax because it's not configured to run Python. By default it's set to Objective C/Swift. You need to associate a project with a Python interpreter for it to pick up the syntax.</p>\n\n<p>To setup a Python project in Xcode, follow this tutorial:\n<a href=\"https://stackoverflow.com/a/5438416/4889267\">https://stackoverflow.com/a/5438416/4889267</a></p>\n"}], "owner": {"reputation": 339, "user_id": 6189206, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f3d3ce71b178c2a0c5c0a70c29eabc9?s=128&d=identicon&r=PG&f=1", "display_name": "BoxTechy", "link": "https://stackoverflow.com/users/6189206/boxtechy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3512, "favorite_count": 0, "accepted_answer_id": 37980181, "answer_count": 1, "score": 2, "last_activity_date": 1515306670, "creation_date": 1466638708, "last_edit_date": 1515306670, "question_id": 37979941, "link": "https://stackoverflow.com/questions/37979941/py-files-default-to-xcode-on-mac", "title": ".py files default to Xcode on Mac?", "body": "<p>When I open a .py file on my Mac it opens in Xcode but wont run.\nWhy does this happen and how do I fix this? </p>\n\n<p>Xcode doesn't seem to recognize Python syntax. How do I fix this? (for example <code>True</code> and <code>False</code> are not recognized as keywords)</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1466640663, "post_id": 37979934, "comment_id": 63406037, "body": "If you want to make a dict, why did you write a class instead?"}], "answers": [{"tags": [], "owner": {"reputation": 342, "user_id": 6501627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be3213e6794e4642af2e0a8080734fbd?s=128&d=identicon&r=PG&f=1", "display_name": "Max Feng", "link": "https://stackoverflow.com/users/6501627/max-feng"}, "is_accepted": false, "score": 1, "last_activity_date": 1466640860, "last_edit_date": 1466640860, "creation_date": 1466640131, "answer_id": 37980144, "question_id": 37979934, "link": "https://stackoverflow.com/questions/37979934/how-can-i-output-a-dictionary-in-a-class/37980144#37980144", "title": "How can I output a dictionary in a class?", "body": "<p>Other answers modify <code>__repr__</code>, which only affects the string representation. To actually output a dictionary, you can define a method within UserAccount that returns in the specific format:</p>\n\n<pre><code>class UserAccount(object):\n\n    def __init__(self, saving, checking, PIN):\n        self.save = saving\n        self.check = checking\n        self.passwd = PIN\n\n    def asDict(self):\n        return {self.passwd: [self.save, self.check]}\n</code></pre>\n\n<p>For example:</p>\n\n<pre><code>&gt;&gt;&gt; user1 = UserAccount(10, 20, 1234)\n&gt;&gt;&gt; user1.asDict()\n{1234: [10, 20]}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 218, "user_id": 3220892, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1445426361aeed1448e12b29bda25445?s=128&d=identicon&r=PG&f=1", "display_name": "user3220892", "link": "https://stackoverflow.com/users/3220892/user3220892"}, "is_accepted": false, "score": 0, "last_activity_date": 1466640145, "creation_date": 1466640145, "answer_id": 37980146, "question_id": 37979934, "link": "https://stackoverflow.com/questions/37979934/how-can-i-output-a-dictionary-in-a-class/37980146#37980146", "title": "How can I output a dictionary in a class?", "body": "<p>You can define a <code>__repr__</code> method on the Class that formats it's print output.</p>\n\n<pre><code>class Useraccount():\n\n    def __init__(self, saving, checking, PIN):\n        self.save = saving\n        self.check = checking\n        self.passwd = PIN\n\n    def __repr__(self):\n        return '&lt;Useraccount({pin}: [{saving}, {checking}])&gt;'.format(pin=self.passwd, saving=self.save, checking=self.check)\n</code></pre>\n\n<p>Example:</p>\n\n<pre><code>&gt;&gt;&gt; a = Useraccount(2000,3000,1234)\n&gt;&gt;&gt; a\n&lt;Useraccount(1234: [2000, 3000])&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 3901639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30e7541bfc15ba6422bf98dfeb5ffe1b?s=128&d=identicon&r=PG&f=1", "display_name": "zbro898", "link": "https://stackoverflow.com/users/3901639/zbro898"}, "is_accepted": false, "score": 0, "last_activity_date": 1466640414, "creation_date": 1466640414, "answer_id": 37980186, "question_id": 37979934, "link": "https://stackoverflow.com/questions/37979934/how-can-i-output-a-dictionary-in-a-class/37980186#37980186", "title": "How can I output a dictionary in a class?", "body": "<p>so, if you are using Python2.x then you should override the <strong>unicode</strong> method to represent a object of your Useraccount class.</p>\n\n<pre><code>def __unicode__(self):\n    return '{%d: [%d,%d]}' % (self.save, self.check, self.passwd)\n</code></pre>\n\n<p>and if u are using Python3.x</p>\n\n<pre><code>def __str__(self)\n    return '{%d: [%d,%d]}' % (self.save, self.check, self.passwd)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 430, "user_id": 2516233, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/323444ee94a1425e6b4457702eacd108?s=128&d=identicon&r=PG", "display_name": "antonavy", "link": "https://stackoverflow.com/users/2516233/antonavy"}, "is_accepted": false, "score": 0, "last_activity_date": 1468458575, "creation_date": 1468458575, "answer_id": 38364009, "question_id": 37979934, "link": "https://stackoverflow.com/questions/37979934/how-can-i-output-a-dictionary-in-a-class/38364009#38364009", "title": "How can I output a dictionary in a class?", "body": "<p>This seems to be doing what you describe:</p>\n\n<pre><code>class Useraccount(object):\n    def __new__(cls, save, check, pin):\n        return {saving: [check, pin]}\n</code></pre>\n\n<p>Example:</p>\n\n<pre><code>a = Useraccount(2000, 3000, 1234)\na\n\nOut[53]: {2000: [3000, 1234]}\n</code></pre>\n\n<p>Not sure if it's a good practice though :)</p>\n"}], "owner": {"reputation": 1, "user_id": 6501624, "user_type": "registered", "profile_image": "https://graph.facebook.com/1822156811341148/picture?type=large", "display_name": "Yichen Gu", "link": "https://stackoverflow.com/users/6501624/yichen-gu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "answer_count": 4, "score": -1, "last_activity_date": 1468458575, "creation_date": 1466638683, "question_id": 37979934, "link": "https://stackoverflow.com/questions/37979934/how-can-i-output-a-dictionary-in-a-class", "title": "How can I output a dictionary in a class?", "body": "<p>So I got a class like this:</p>\n\n<pre><code>class Useraccount():\n\ndef __init__(self, saving, checking, PIN):\n    self.save = saving\n    self.check = checking\n    self.passwd = PIN\n</code></pre>\n\n<p>I want a output like this:</p>\n\n<pre><code>&gt;&gt;&gt; a = Useraccount(2000,3000,1234)\n&gt;&gt;&gt; a\n&gt;&gt;&gt; {1234:[2000,3000]}\n</code></pre>\n\n<p>How to achieve this, please help me out.</p>\n"}, {"tags": ["python", "scrapy", "scrapy-spider"], "answers": [{"comments": [{"owner": {"reputation": 385, "user_id": 1862452, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/31125a8cc0a14155856465ef80bbb022?s=128&d=identicon&r=PG", "display_name": "MDuh", "link": "https://stackoverflow.com/users/1862452/mduh"}, "edited": false, "score": 0, "creation_date": 1466656311, "post_id": 37980613, "comment_id": 63409813, "body": "Thanks for the help but this problem is not about iterators and loops. I managed to fix it though by learning how to use &#39;yield&#39; in python"}], "tags": [], "owner": {"reputation": 169, "user_id": 1945707, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rsSXz.jpg?s=128&g=1", "display_name": "Tom&#225;s Gonzalez Dowling", "link": "https://stackoverflow.com/users/1945707/tom%c3%a1s-gonzalez-dowling"}, "is_accepted": false, "score": 0, "last_activity_date": 1466643668, "creation_date": 1466643668, "answer_id": 37980613, "question_id": 37979924, "link": "https://stackoverflow.com/questions/37979924/scrapy-requesting-a-different-html-inside-parse/37980613#37980613", "title": "Scrapy: Requesting a different html inside parse()", "body": "<p>I think you can do something like this. Note that while statements were replaced and code looks much nicer. Yo may want to do a recursive algorithm to resolve this, but I'm not sure what exactly you want to acomplish. The following code is not tested.</p>\n\n<pre><code>    ...\n    for url in  start_urls:\n        entry_list = response.css('.entry__row-inner-wrap').extract()\n\n        for innerurl in entry_list:\n                [Doing some css, xpath filtering here]\n                if([Some Condition here]):\n                        [Doing some file write here]\n                        ENDLOOP = True\n\n        body = Request(nextPage, callback=self.parse1)\n        response2 = HtmlResponse(url, body=body)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 385, "user_id": 1862452, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/31125a8cc0a14155856465ef80bbb022?s=128&d=identicon&r=PG", "display_name": "MDuh", "link": "https://stackoverflow.com/users/1862452/mduh"}, "is_accepted": false, "score": 0, "last_activity_date": 1466656639, "creation_date": 1466656639, "answer_id": 37982450, "question_id": 37979924, "link": "https://stackoverflow.com/questions/37979924/scrapy-requesting-a-different-html-inside-parse/37982450#37982450", "title": "Scrapy: Requesting a different html inside parse()", "body": "<p>Fixed it after a 4 hours.</p>\n\n<p>I learned how to use Scrapy's \"self.make_requests_from_url\" and <code>yield</code> command in python.</p>\n\n<p>Fixed code:</p>\n\n<pre><code>with open('C:\\Users\\MDuh\\Desktop\\scrape\\scrappy_demo.csv', 'rb') as csvfile:\nlinkreader = csv.reader(csvfile, dialect=csv.excel)\nfor row in linkreader:\n    start_url.append(str(row)[2:-2]+\"/search?page=1\")\n    i += 1\n\ndef parse(self, response):\n        i = 0;\n        ENDLOOP = False\n        ...\n        [Pagination CSS/XPATH filtering here]\n        next_page = int(pagination_response[pagination_parse:pagination_response[pagination_parse:].find('\"')+pagination_parse])\n        current_page = int(str(response.url)[-((len(str(response.url)))-(str(response.url).find('?page='))-6):])\n\n        giveaway_list = response.css('.giveaway__row-inner-wrap').extract()\n        while (i &lt; len(giveaway_list) and not ENDLOOP):\n                if([CONDITION HERE]):\n                    [FILE WRITE HERE]\n                    ENDLOOP = True\n                    raise StopIteration\n                i += 1\n\n        if(next_page &lt;&gt; current_page and not ENDLOOP):\n           yield self.make_requests_from_url(url_redir[:-(len(url_redir)-url_redir.find(\"page=\")-5)]+str(next_page))\n\n        base_url[:-(len(base_url)-base_url.find(\"/search?page=\"))]\n</code></pre>\n"}], "owner": {"reputation": 385, "user_id": 1862452, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/31125a8cc0a14155856465ef80bbb022?s=128&d=identicon&r=PG", "display_name": "MDuh", "link": "https://stackoverflow.com/users/1862452/mduh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 627, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1466656639, "creation_date": 1466638618, "last_edit_date": 1466641873, "question_id": 37979924, "link": "https://stackoverflow.com/questions/37979924/scrapy-requesting-a-different-html-inside-parse", "title": "Scrapy: Requesting a different html inside parse()", "body": "<p>Is it possible to request a new HTML while inside parse?</p>\n\n<p>My code currently is reading HTML links in a CSV file and then putting all links on it in the <code>start_urls</code> list.</p>\n\n<p>What I want to happen is when it gets a link on <code>start_urls</code>, parses it, loops on all pages until it satisfies a condition inside the loop.  Breaks the entire loop and continue parsing the next item on the <code>start_urls</code> list</p>\n\n<pre><code>with open('.\\scrappy_demo.csv', 'rb') as csvfile:\n    #Open CSV File here\n    linkreader = csv.reader(csvfile, dialect=csv.excel)\n    for row in linkreader:\n        start_url.append(str(row)[2:-2]+\"/search?page=1\")\n        i += 1\n\nclass demo(scrapy.Spider):\n    ...\n    def parse1(self, response):\n        return response\n\n    def parse(self, response):\n        i = 0;\n        j = 0;\n        ENDLOOP = False\n        ...\n        while(next_page &lt;&gt; current_page and not ENDLOOP):\n                entry_list = response.css('.entry__row-inner-wrap').extract()\n\n                while (i &lt; len(entry_list) and not ENDLOOP):\n                        [Doing some css,xpath filtering here]\n                        if([Some Condition here]):\n                                [Doing some file write here]\n                                ENDLOOP = True\n                        i += 1\n\n                j += 1\n                nextPage = url_redir[:-1]+str(j+1)\n                body = Request(nextPage, callback=self.parse1)\n                response2 = HtmlResponse(nextPage, body=body)\n</code></pre>\n\n<p>On the last 2 lines, I'm trying to request a new html but with a +1 increment on the page number. But when the code runs, it doesn't return the html code of the request. What am I missing here?</p>\n\n<p>Note: I tried checking the values of body and response2 by printing it but it looks like <code>body.body</code> is empty and the callback doesn't get executed</p>\n\n<p>Note2: First time using scrappy</p>\n\n<p>Note3: I know that code fails on 2 digit page number, but nvm that for now</p>\n"}, {"tags": ["python", "string", "python-2.7"], "comments": [{"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 1, "creation_date": 1466638769, "post_id": 37979920, "comment_id": 63405568, "body": "<code>\\xb7</code> is the hexadecimal string of B7, so there is no backslash"}, {"owner": {"reputation": 38676, "user_id": 227884, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/L7EG1.png?s=128&g=1", "display_name": "UltraInstinct", "link": "https://stackoverflow.com/users/227884/ultrainstinct"}, "edited": false, "score": 0, "creation_date": 1466638825, "post_id": 37979920, "comment_id": 63405585, "body": ".. <code>\\xb7</code> behaves like one character"}], "answers": [{"tags": [], "owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "is_accepted": true, "score": 1, "last_activity_date": 1466638821, "creation_date": 1466638821, "answer_id": 37979960, "question_id": 37979920, "link": "https://stackoverflow.com/questions/37979920/remove-backslash-with-str-translate/37979960#37979960", "title": "Remove backslash with str.translate", "body": "<p>You don't have any strings with backslashes. <code>x</code> has the characters <code>'x'</code>, <code>'b'</code>, and <code>'7'</code>, while <code>y</code> has a single character, <code>'\u00b7'</code>, denoted by the hex code <code>b7</code>. If you want the literal string <code>'\\xb7'</code>, with four characters in it, use a raw string by prefixing an <code>r</code> in front of the literal.</p>\n\n<pre><code>&gt;&gt;&gt; import string\n&gt;&gt;&gt; print r'\\xb7'.translate(None, '\\\\' + string.digits)\nxb\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 0, "last_activity_date": 1466639138, "creation_date": 1466639138, "answer_id": 37979991, "question_id": 37979920, "link": "https://stackoverflow.com/questions/37979920/remove-backslash-with-str-translate/37979991#37979991", "title": "Remove backslash with str.translate", "body": "<p>Your algorithm works much better when there's actually a backslash to remove.  Tigerhawk already showed you your hexadecimal string.  Here's another simplistic example to help, showing the unchanged original <strong>y</strong>.</p>\n\n<pre><code>import string\nx = 'xb7'\ny = '\\\\xb7'\nprint x, y\nkill = '\\\\' + string.digits\nprint \"kill\", kill\nprint x.translate(None, kill)\nprint y.translate(None, kill)\nprint \"y=\", y\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>xb7 \\xb7\nkill \\0123456789\nxb\nxb\ny= \\xb7\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 3732120, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2f0dc8e7dffa87a589f0701d6d040d8?s=128&d=identicon&r=PG&f=1", "display_name": "John Jung", "link": "https://stackoverflow.com/users/3732120/john-jung"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 228, "favorite_count": 0, "accepted_answer_id": 37979960, "answer_count": 2, "score": 0, "last_activity_date": 1466639138, "creation_date": 1466638591, "last_edit_date": 1466638701, "question_id": 37979920, "link": "https://stackoverflow.com/questions/37979920/remove-backslash-with-str-translate", "title": "Remove backslash with str.translate", "body": "<p>I wrote the following Python2.7 code to remove digits and the backslash character (\\) from some string. I attempted to use the str.translate method, because I had learned that it is very efficient. The code below successfully removed digits from the string x, but is unable to remove the single backslash in y. What did I do wrong? </p>\n\n<pre><code>import string    \nx = 'xb7'\ny = '\\xb7'\nprint x.translate(None, '\\\\' + string.digits)\nprint y.translate(None, '\\\\' + string.digits)\n</code></pre>\n"}, {"tags": ["python", "pandas", "seaborn"], "answers": [{"tags": [], "owner": {"reputation": 25119, "user_id": 2166823, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/daI9F.jpg?s=128&g=1", "display_name": "joelostblom", "link": "https://stackoverflow.com/users/2166823/joelostblom"}, "is_accepted": true, "score": 1, "last_activity_date": 1508342985, "creation_date": 1508342985, "answer_id": 46814627, "question_id": 37979906, "link": "https://stackoverflow.com/questions/37979906/using-a-multiindex-dataframe-to-produce-a-complicated-seaborn-pointplot/46814627#46814627", "title": "Using a multiindex dataframe to produce a complicated seaborn pointplot", "body": "<p>Seaborn prefers the data to be in the long (tidy) format, which you can read more about in <a href=\"https://seaborn.pydata.org/tutorial/categorical.html\" rel=\"nofollow noreferrer\">the documentation</a>:</p>\n\n<blockquote>\n  <p>It is easiest and best to invoke these functions with a DataFrame that is in <a href=\"http://vita.had.co.nz/papers/tidy-data.pdf\" rel=\"nofollow noreferrer\">\u201ctidy\u201d</a> format, although the lower-level functions also accept wide-form DataFrames or simple vectors of observations.</p>\n</blockquote>\n\n<p>In essence, this means that you want as much as possible of the information to be contained in the rows of the data frame and not in the columns. In your case, you want to turn your data into this format:</p>\n\n<pre><code>rep  table    c       value\nr1  table1    c1      1\nr2  table1    c1      2\nr3  table1    c1      3\n...\n</code></pre>\n\n<p>I copied your sample data and modified it slighty to get this:</p>\n\n<pre><code>rep c1 c2 table\nr1 1  3 table1\nr2 2  2 table1\nr3 3  1 table1\nr1 4  6 table2\nr2 5  5 table2\nr3 6  4 table2\nr1 7  9 table3\nr2 8  8 table3\nr3 9  7 table3\n</code></pre>\n\n<p>Copy to the clipboard and read it into pandas via</p>\n\n<pre><code>import pandas as pd\nimport seaborn as sns\n\ndf = pd.read_clipboard()\n</code></pre>\n\n<p>You can then \"melt\" the data into the long format, and plot it with Seaborn:</p>\n\n<pre><code>df_long = df.melt(id_vars=['rep', 'table'], var_name='c')\nsns.pointplot(x='table', y='value', hue='c', data=df_long, join=False, dodge=0.2)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/zBw5Y.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zBw5Y.png\" alt=\"enter image description here\"></a></p>\n\n<p>To get from (and into) your hierarchical column format is quite a bit messier, but can be done via</p>\n\n<pre><code># Get sample data into the hierarchical column format\ndf_long_temp = df.melt(id_vars=['rep', 'table'], value_vars=['c1', 'c2'], var_name='c')\ndf_multi_cols = df_long_temp.set_index(['table', 'rep', 'c']).unstack(level=[0,1])\n\n# Reshape from hierarchical column to long-form data\ndf_long = df_multi_cols.stack(level=[1,2]).reset_index()\nsns.pointplot(x='table', y='value', hue='c', data=df_long, join=False, dodge=0.2)\n</code></pre>\n"}], "owner": {"reputation": 2479, "user_id": 2370863, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/1A5At.jpg?s=128&g=1", "display_name": "Ian Fiddes", "link": "https://stackoverflow.com/users/2370863/ian-fiddes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1514, "favorite_count": 0, "accepted_answer_id": 46814627, "answer_count": 1, "score": 3, "last_activity_date": 1508342985, "creation_date": 1466638422, "question_id": 37979906, "link": "https://stackoverflow.com/questions/37979906/using-a-multiindex-dataframe-to-produce-a-complicated-seaborn-pointplot", "title": "Using a multiindex dataframe to produce a complicated seaborn pointplot", "body": "<p>example data:</p>\n\n<pre><code>table1\n   c1  c2\nr1 1   3\nr2 2   2\nr3 3   1\n\ntable2\n   c1  c2\nr1 4   6\nr2 5   5\nr3 6   4\n\ntable3\n  c1  c2\nr1 7  9\nr2 8  8\nr3 9  7\n</code></pre>\n\n<p>I have munged the data into a dataframe like the following, with the rows being categories of analysis, the upper level column is the individual being analyzed, and the second level the replicates.</p>\n\n<pre><code>   table1    table2    table3\n   r1 r2 r3  r1 r2 r3  r1 r2 r3\nc1  1 2 3     4 5 6     7 8 9\nc2  3 2 1     6 5 4     9 8 7\n</code></pre>\n\n<p>I want to turn this into a pointplot where the mean of each replicate is the point, the remaining values are used to create a confidence interval, and a line is drawn for each table. In other words, I want the values to pass to pointplot to be <code>x=[table1,table2,table3], y=mean(all_r_values), hue=[c1, c2]</code></p>\n\n<p>I am not sure how to do this, or how to reshape my table into a form suitable for this.</p>\n"}, {"tags": ["python", "django"], "comments": [{"owner": {"reputation": 104137, "user_id": 267887, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/MzpbS.png?s=128&g=1", "display_name": "Yuji &#39;Tomita&#39; Tomita", "link": "https://stackoverflow.com/users/267887/yuji-tomita-tomita"}, "edited": false, "score": 1, "creation_date": 1466638933, "post_id": 37979899, "comment_id": 63405621, "body": "Take a look at the regroup tag <a href=\"https://docs.djangoproject.com/en/1.9/ref/templates/builtins/#regroup\" rel=\"nofollow noreferrer\">docs.djangoproject.com/en/1.9/ref/templates/builtins/#regrou&zwnj;&#8203;p</a>  and always remember that you can do any kind of template required ordering in your view. Populate a list of lists, grouped by however logic you desire."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 3277107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10d439fe296a437db1066bcaaf90f4bc?s=128&d=identicon&r=PG&f=1", "display_name": "rcmiskin", "link": "https://stackoverflow.com/users/3277107/rcmiskin"}, "is_accepted": false, "score": 0, "last_activity_date": 1466649335, "last_edit_date": 1466649335, "creation_date": 1466648883, "answer_id": 37981337, "question_id": 37979899, "link": "https://stackoverflow.com/questions/37979899/django-how-to-sort-through-a-queryset-based-on-the-value-of-an-attribute/37981337#37981337", "title": "Django - How to sort through a queryset based on the value of an attribute", "body": "<p>In your view:</p>\n\n<pre><code>banners = BannerCode.objects.all().order_by('review_round') \n</code></pre>\n\n<p>***if you want to reverse order use <code>'-review_round'</code></p>\n\n<p>Then in your template:</p>\n\n<pre><code>{% for item in banners %}\n\n    &lt;li&gt;{{ item.name }}&lt;/li&gt;\n\n{% endfor %}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 550, "user_id": 5555392, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J51B6.png?s=128&g=1", "display_name": "Mark White", "link": "https://stackoverflow.com/users/5555392/mark-white"}, "is_accepted": false, "score": 0, "last_activity_date": 1466655134, "creation_date": 1466655134, "answer_id": 37982206, "question_id": 37979899, "link": "https://stackoverflow.com/questions/37979899/django-how-to-sort-through-a-queryset-based-on-the-value-of-an-attribute/37982206#37982206", "title": "Django - How to sort through a queryset based on the value of an attribute", "body": "<p>you change <code>{{ b.review_round }}</code> in you template to <code>{{ b.name }}</code></p>\n"}, {"comments": [{"owner": {"reputation": 107, "user_id": 2495333, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/5a356af04cd36ed5798278375115b043?s=128&d=identicon&r=PG", "display_name": "Scott Johnson", "link": "https://stackoverflow.com/users/2495333/scott-johnson"}, "edited": false, "score": 0, "creation_date": 1466657012, "post_id": 37982369, "comment_id": 63410075, "body": "This is exactly the direction I needed, thanks, ARJMP!"}], "tags": [], "owner": {"reputation": 6188, "user_id": 784648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4ce12343afb67ff0bf132f30b0ca9c5?s=128&d=identicon&r=PG", "display_name": "A. J. Parr", "link": "https://stackoverflow.com/users/784648/a-j-parr"}, "is_accepted": true, "score": 0, "last_activity_date": 1466656229, "creation_date": 1466656229, "answer_id": 37982369, "question_id": 37979899, "link": "https://stackoverflow.com/questions/37979899/django-how-to-sort-through-a-queryset-based-on-the-value-of-an-attribute/37982369#37982369", "title": "Django - How to sort through a queryset based on the value of an attribute", "body": "<p>In this scenario you're either going to have to have different sections in your template for the different review rounds, or define the context for your template differently to render the headers.</p>\n\n<p>Here's an example which defines the variable <code>review_round_groups</code> to hold our template context.  <code>review_round_groups</code> is a dictionary which maps the header of each section to the queryset it should render (in this case each queryset is the result of filtering on a different round_review):</p>\n\n<pre><code>review_round_groups = {}\n\nfor review_round_int in BannerCode.ROUNDS_LIST:  # Group BannerCode's into review rounds\n    review_round_int = review_round_int[0]  # Value to filter on\n    review_round_groups['Round %d' % review_round_int] = BannerCode.objects.filter(review_round=review_round_int)\n</code></pre>\n\n<p>Then in your template:</p>\n\n<pre><code>{% for banner_group_name, banner_qs in review_round_group.items %}\n    &lt;h1&gt;{{ banner_group_name }}&lt;/h1&gt;\n    {% if banner_qs.exists %}\n        &lt;ul&gt;\n        {% for banner in banner_qs %}\n            &lt;li&gt;{{ banner.name }}&lt;/li&gt;\n        {% endfor %}\n        &lt;/ul&gt;\n    {% endif %}\n{% endfor %}\n</code></pre>\n\n<p>This should render all your different review rounds as unordered lists, if there are no banners for a certain review_round then it will not display that group.  If you want to still render the header for an empty review round group, just remove the <code>{% if banner_qs.exists %}</code>.</p>\n"}], "owner": {"reputation": 107, "user_id": 2495333, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/5a356af04cd36ed5798278375115b043?s=128&d=identicon&r=PG", "display_name": "Scott Johnson", "link": "https://stackoverflow.com/users/2495333/scott-johnson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 235, "favorite_count": 0, "accepted_answer_id": 37982369, "answer_count": 3, "score": 1, "last_activity_date": 1466656229, "creation_date": 1466638402, "last_edit_date": 1466640628, "question_id": 37979899, "link": "https://stackoverflow.com/questions/37979899/django-how-to-sort-through-a-queryset-based-on-the-value-of-an-attribute", "title": "Django - How to sort through a queryset based on the value of an attribute", "body": "<p>I have created the following model which stores information for an html5 banner. I have a ForeignKey to associate the banner with a specific project.</p>\n\n<pre><code>class BannerCode(models.Model):\n    ROUNDS_LIST = (\n        ('1', '1'),\n        ('2', '2'),\n        ('3', '3'),\n        ('4', '4'),\n        ('5', '5'),\n        ('6', '6'),\n    )\n\n    project = models.ForeignKey(Project)\n    client = models.ForeignKey(Client, null=True, blank=True)\n    name = models.CharField(max_length=256, null=True, blank=True)\n    width = models.CharField(max_length=3, null=True, blank=True)\n    height = models.CharField(max_length=3, null=True, blank=True)\n    review_round = models.CharField(max_length=3, choices=ROUNDS_LIST, default=1)\n</code></pre>\n\n<p>I need to print out in my template something like this desired Output:</p>\n\n<p>Round 1</p>\n\n<ul>\n<li>banner name</li>\n<li>banner name</li>\n<li>banner name</li>\n<li>banner name</li>\n</ul>\n\n<p>Round 2</p>\n\n<ul>\n<li>banner name</li>\n<li>banner name</li>\n<li>banner name</li>\n<li>banner name</li>\n</ul>\n\n<p>I am having trouble understanding how to loop through the objects and sort by the review_round attribute.</p>\n\n<p>I created a custom filter and am able to sort them in one long list:</p>\n\n<pre><code>@register.filter\ndef sort_by(queryset, order):\n    return queryset.order_by(order)\n</code></pre>\n\n<p>In Template:</p>\n\n<pre><code>{% for b in project.bannercode_set.all|sort_by:'review_round' %}\n    {{ b.review_round }}\n{% endfor %}\n</code></pre>\n\n<p>This loop works great for outputting something like this:</p>\n\n<p>Current Output</p>\n\n<ul>\n<li>banner name, round 1</li>\n<li>banner name, round 1</li>\n<li>banner name, round 2</li>\n<li>banner name, round 3</li>\n</ul>\n\n<p>How can I create a for loop that would match my desired output?</p>\n"}, {"tags": ["python", "mongodb", "mongoengine", "odm"], "owner": {"reputation": 3429, "user_id": 724239, "user_type": "registered", "accept_rate": 74, "profile_image": "https://graph.facebook.com/553825011/picture?type=large", "display_name": "PachinSV", "link": "https://stackoverflow.com/users/724239/pachinsv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 205, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1466638220, "creation_date": 1466638220, "question_id": 37979874, "link": "https://stackoverflow.com/questions/37979874/how-to-use-an-operator-exists-inside-an-elemmatch-using-mongoengine-syntax", "title": "How to use an operator $exists inside an $elemMatch using MongoEngine syntax", "body": "<p>Is it possible to use an $exists operator inside an $elemMatch using MongoEngine?</p>\n\n<p>I would like to do something like:</p>\n\n<pre><code>Location.objects(accessPoints__match={'deletedAt__exists': True, 'mac': \"AC-86-74-xx-xx-xx\"})\n</code></pre>\n\n<p>I think MongoEngine assumes that deletedAt__exists is the name of attribute in my document.</p>\n\n<p>But the only way I found out to work is combining syntaxes:</p>\n\n<pre><code>Location.objects(accessPoints__match={'deletedAt': {'$exists': True}, 'mac': \"AC-86-74-02-6E-70\"})\n</code></pre>\n\n<p>Combining MongoEngine syntax and pure MongoDB syntax.</p>\n"}, {"tags": ["python", "cassandra", "nose", "ccm"], "owner": {"reputation": 11, "user_id": 6501595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f6442d68d7a792c7ebb00468b21bec2?s=128&d=identicon&r=PG&f=1", "display_name": "Vinay Prasad", "link": "https://stackoverflow.com/users/6501595/vinay-prasad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 273, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1466638198, "creation_date": 1466638198, "question_id": 37979871, "link": "https://stackoverflow.com/questions/37979871/running-cassandra-unit-tests-in-parallel-using-nose-ccm-python", "title": "Running Cassandra unit tests in parallel using nose, ccm, python", "body": "<p>I've recently started using Cassandra as a primary data store, and am trying to write unit tests for this using <a href=\"https://github.com/pcmanus/ccm\" rel=\"nofollow\">CCM</a> </p>\n\n<p>I'm able to spin up a Cassandra Cluster instance and test one test class. I want to be able to test another test class in parallel with this, as serial unit testing can take really long, with more test cases added. My test code looks something like - </p>\n\n<pre><code>class BaseTestCase(TestCase):\n  def setUp(self):\n    super(BaseTestCase, self).setUp()\n\n    # Create and start a CCM (Cassandra Cluster Management) cluster\n    self.cluster = ccmlib.cluster.Cluster() # with reqd params\n    self.cluster.populate(1).start()  # Start cluster with 1 node\n</code></pre>\n\n<p>Now when I have more than 1 test class inheriting from this Base class, and I run the tests serially, it works fine. But when I run nosetests in parallel, I get errors along the lines of \"A Cassandra instance may already be running\". I've tried looking into <a href=\"https://github.com/riptano/cassandra-dtest\" rel=\"nofollow\">Dtests</a> but this doesn't seem to solve my problem. It seems that it can run tests across clusters, but not in parallel. </p>\n\n<p>I was wondering if there is anything that someone can point me to, for this purpose, or if anyone thinks I'm doing something incorrect with the usage of CCM or Dtests. Thanks!</p>\n"}, {"tags": ["python", "time", "pygtk"], "comments": [{"owner": {"reputation": 2024, "user_id": 3749818, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a7b0e924a4d88adaa3f32e1348603e83?s=128&d=identicon&r=PG&f=1", "display_name": "elya5", "link": "https://stackoverflow.com/users/3749818/elya5"}, "edited": false, "score": 0, "creation_date": 1466681776, "post_id": 37979801, "comment_id": 63424571, "body": "What&#39;s the exact quesiton here? Do you want to know how to convert seconds into a &quot;hh:mm:ss&quot; format?"}], "owner": {"reputation": 6935, "user_id": 1729094, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/13c6b4a9521095fe4c7b53e0b35fab98?s=128&d=identicon&r=PG", "display_name": "yPhil", "link": "https://stackoverflow.com/users/1729094/yphil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1466637731, "creation_date": 1466637731, "last_edit_date": 1495542709, "question_id": 37979801, "link": "https://stackoverflow.com/questions/37979801/get-time-values-with-a-slider-scale", "title": "Get time values with a slider/scale", "body": "<p>I'm coding a video player with controls that allow the user to select beginning and end time to crop/trim it. At run-time, I read the total length of the media file.</p>\n\n<p>I have a \"play\" HScale, that updates while playing, and allow the user to seek, this is fine.</p>\n\n<p>But I need two others: Beginning, and end. Let's suppose the media file is 00:02:42 long (that would be 162 in <a href=\"https://stackoverflow.com/questions/3098248/time-to-decimal-time-in-python\">decimal</a>) so I'd like to setup a <code>GTK.HScale()</code> (this is a generic, almost purely math logic - at which I'm pretty bad - question, the environment is not so important) that goes from 00:00:00 to 00:02:42.</p>\n\n<p>Then, when the user moves the \"beginning/start\" slider (in increments of one second) and click a button, I would then retrieve the value (either hh:mm:ss, or decimal and then convert back to hh:mm:ss, no problem.) of the slider along the timeline.</p>\n\n<p>My full code is <a href=\"https://bitbucket.org/philipyassin/derusher/src/83689c55aa0654f928ef3d6117dc33dfcfabc933/derusher.py?fileviewer=file-view-default\" rel=\"nofollow noreferrer\">here</a>, I'm stuck in <a href=\"http://www.pygtk.org/pygtk2reference/class-gtkadjustment.html#constructor-gtkadjustment\" rel=\"nofollow noreferrer\">the docs</a>, thank you for helping!</p>\n"}, {"tags": ["python", "numpy"], "comments": [{"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1466638061, "post_id": 37979785, "comment_id": 63405394, "body": "Why did you delete the previous version of this question instead of simply updating it appropriately?"}, {"owner": {"reputation": 5616, "user_id": 2769240, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/1501f510275875ae7ac437f758de28e8?s=128&d=identicon&r=PG", "display_name": "Baktaawar", "link": "https://stackoverflow.com/users/2769240/baktaawar"}, "reply_to_user": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1466638090, "post_id": 37979785, "comment_id": 63405404, "body": "updated the question. I deleted because i was not sure if someone putting it to close would get visibility or not"}], "answers": [{"comments": [{"owner": {"reputation": 5616, "user_id": 2769240, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/1501f510275875ae7ac437f758de28e8?s=128&d=identicon&r=PG", "display_name": "Baktaawar", "link": "https://stackoverflow.com/users/2769240/baktaawar"}, "edited": false, "score": 0, "creation_date": 1466639103, "post_id": 37979914, "comment_id": 63405668, "body": "Thanks that works. I tried this too and it works if I use any()  sum=0 for x in range(b.shape[0]):     e=np.array(np.nonzero(b[x,:]!=0))     f=np.array(np.nonzero(c[:,x]!=0))     print e     print f     sum+=np.sum(e.any() == f.any())                                      sum"}, {"owner": {"reputation": 5616, "user_id": 2769240, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/1501f510275875ae7ac437f758de28e8?s=128&d=identicon&r=PG", "display_name": "Baktaawar", "link": "https://stackoverflow.com/users/2769240/baktaawar"}, "edited": false, "score": 0, "creation_date": 1466639186, "post_id": 37979914, "comment_id": 63405692, "body": "I have one addition to this. Instead of just counting 1 where there is a non zero same index position match, how to count (1/index position) in array c?. So basically wherever there is a match of non zero value at same index position between two arrays, add 1/index position of c array where match occured"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "reply_to_user": {"reputation": 5616, "user_id": 2769240, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/1501f510275875ae7ac437f758de28e8?s=128&d=identicon&r=PG", "display_name": "Baktaawar", "link": "https://stackoverflow.com/users/2769240/baktaawar"}, "edited": false, "score": 0, "creation_date": 1466639328, "post_id": 37979914, "comment_id": 63405725, "body": "Generate a vector with the needed Boolean values; you should be able to figure out how to sum 1/**N+1** for index <b>N</b> over the vector."}, {"owner": {"reputation": 5616, "user_id": 2769240, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/1501f510275875ae7ac437f758de28e8?s=128&d=identicon&r=PG", "display_name": "Baktaawar", "link": "https://stackoverflow.com/users/2769240/baktaawar"}, "edited": false, "score": 0, "creation_date": 1466639530, "post_id": 37979914, "comment_id": 63405763, "body": "Didn&#39;t get that. I was thinking I can get the index array of non zero for both these. Then how to just get an array of matching indices. If I have that vector then i can sum that up as u said"}], "tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 1, "last_activity_date": 1466638534, "creation_date": 1466638534, "answer_id": 37979914, "question_id": 37979785, "link": "https://stackoverflow.com/questions/37979785/counting-match-between-two-arrays-at-same-index-position-and-having-non-zero-val/37979914#37979914", "title": "Counting match between two arrays at same index position and having non zero values", "body": "<p>Your critical problem is checking that the \"non-zero\" values are equal: you need an <strong>and</strong> here, not <strong>==</strong>:</p>\n\n<pre><code>    sum += np.sum((b[x,:]!=0) &amp; (c[:,x]!=0))\n</code></pre>\n\n<p>This yields the desired result of <strong>2</strong>.</p>\n\n<pre><code>import numpy as np\n\nb = np.array([[1, 0, 1],\n           [0, 0, 1]])\n\nc = np.array([[ 0.5 ,  0.  ],\n           [ 0.34,  1.  ],\n           [ 0.  ,  1.  ]])\n\nsum=0\nfor x in range(b.shape[0]):\n    print \"row/col\", x\n    print b[x,:]!=0\n    print c[:,x]!=0\n    sum+=np.sum((b[x,:]!=0) &amp; (c[:,x]!=0))\n\nprint sum\n</code></pre>\n"}], "owner": {"reputation": 5616, "user_id": 2769240, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/1501f510275875ae7ac437f758de28e8?s=128&d=identicon&r=PG", "display_name": "Baktaawar", "link": "https://stackoverflow.com/users/2769240/baktaawar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1838, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1466638534, "creation_date": 1466637657, "last_edit_date": 1466638065, "question_id": 37979785, "link": "https://stackoverflow.com/questions/37979785/counting-match-between-two-arrays-at-same-index-position-and-having-non-zero-val", "title": "Counting match between two arrays at same index position and having non zero values", "body": "<p>I have two arrays as below:</p>\n\n<pre><code>b = array([[1, 0, 1],\n           [0, 0, 1]])\n\nc = array([[ 0.5 ,  0.  ],\n           [ 0.34,  1.  ],\n           [ 0.  ,  1.  ]])\n</code></pre>\n\n<p>How to count matching values of two arrays based on same index value AND the element value of the array should non zero.  Here matching value is based on index of the element and not the exact value.</p>\n\n<p>For eg. in the above matrices, my two arrays are row of b and corresponding column of c. If you see, 0.5 c[0,0] in c matches with 1 (b[0,0]) of b. The value doesn't match but since they are non zero values and present in the same position in the respective arrays (both present at 0th index), it should be counted. If the value is zero in either array position then it won't be counted.</p>\n\n<p>For the above matrices, I should get 2 hits, because first row of b and first column of c has common non-zero elements at only one value: b[0,0] or c[0,0]. Similarly, the second row of b has one match with second column of c: b[1,2] or c[2,1]</p>\n\n<p>I tried the following code, but it gives sum as 3 instead of 2. Because it is also counting the case where both the position have 0 as value and it matches that too. I want non zero value at the same position in two arrays.</p>\n\n<pre><code>sum=0\nfor x in range(b.shape[0]):\n    sum+=np.sum((b[x,:]==0) == (c[:,x]==0))\n</code></pre>\n\n<p>I then tried this: this would first get the non zero indices of both the arrays and then compare. But it gives an error. </p>\n\n<pre><code>sum=0\nfor x in range(b.shape[0]):\n    sum+= np.sum((np.nonzero(b[x,:]!=0)) == (np.nonzero(c[:,x]!=0)))\n\n\nValueError: The truth value of an array with more than one element is ambiguous. Use a.any() or a.all()\n</code></pre>\n"}, {"tags": ["python", "qt", "pyqt", "raspberry-pi", "raspberry-pi3"], "comments": [{"owner": {"reputation": 4632, "user_id": 1818868, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Xv16g.jpg?s=128&g=1", "display_name": "Ellioh", "link": "https://stackoverflow.com/users/1818868/ellioh"}, "edited": false, "score": 0, "creation_date": 1466694822, "post_id": 37979755, "comment_id": 63434766, "body": "Is it really a duplicate? To my mind, it isn&#39;t, the key sdpect is PyQT."}], "answers": [{"comments": [{"owner": {"reputation": 10344, "user_id": 1994235, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc318537facc47ebe1ae98a7aabacecf?s=128&d=identicon&r=PG", "display_name": "three_pineapples", "link": "https://stackoverflow.com/users/1994235/three-pineapples"}, "edited": false, "score": 1, "creation_date": 1466648316, "post_id": 37980657, "comment_id": 63407813, "body": "This won&#39;t catch key presses when the window does not have focus, so you will not keep track of the state correctly (nor does it tell you about the initial state)"}, {"owner": {"reputation": 9, "user_id": 6501569, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-9akqu8KXsuk/AAAAAAAAAAI/AAAAAAAAFMI/Vf0bIdUeDkw/photo.jpg?sz=128", "display_name": "Ceppy Nurul Huda", "link": "https://stackoverflow.com/users/6501569/ceppy-nurul-huda"}, "edited": false, "score": 0, "creation_date": 1466901653, "post_id": 37980657, "comment_id": 63508499, "body": "@three-pineapples i mean i want to detect the numlock indicator on the program begining without any keypressevent"}], "tags": [], "owner": {"reputation": 169, "user_id": 1945707, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rsSXz.jpg?s=128&g=1", "display_name": "Tom&#225;s Gonzalez Dowling", "link": "https://stackoverflow.com/users/1945707/tom%c3%a1s-gonzalez-dowling"}, "is_accepted": false, "score": 0, "last_activity_date": 1466686465, "last_edit_date": 1495542152, "creation_date": 1466644086, "answer_id": 37980657, "question_id": 37979755, "link": "https://stackoverflow.com/questions/37979755/can-we-read-num-lock-indicator-on-pyqt-rapsberry/37980657#37980657", "title": "can we read num lock indicator on pyqt rapsberry", "body": "<p>You can write a function on your main form to catch all keypress events, and filter the numlock key, like this:</p>\n\n<pre><code>class Form(QDialog, Some_Form):\n    ...\n    def keyPressEvent(self, event):\n        ''' Get key press event '''\n\n        if event.key() == Qt.Key_NumLock:\n            do_something()\n</code></pre>\n\n<p><strong>Edit:</strong>\nAs pointed out in a comment, this will not register a change if the window has no focus.</p>\n\n<p>As far I can tell, pyqt has not a status function for numlock and capslock. Probably the best way to do it is implementing <a href=\"https://stackoverflow.com/questions/3207032/detect-caps-lock-in-python-curses\">this if you are on linux</a>, and <a href=\"https://stackoverflow.com/questions/21160100/python-3-x-getting-the-state-of-caps-lock-num-lock-scroll-lock-on-windows\">this if you run windows</a>.</p>\n"}], "owner": {"reputation": 9, "user_id": 6501569, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-9akqu8KXsuk/AAAAAAAAAAI/AAAAAAAAFMI/Vf0bIdUeDkw/photo.jpg?sz=128", "display_name": "Ceppy Nurul Huda", "link": "https://stackoverflow.com/users/6501569/ceppy-nurul-huda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 215, "favorite_count": 0, "closed_date": 1466694130, "answer_count": 1, "score": 0, "last_activity_date": 1466901187, "creation_date": 1466637447, "last_edit_date": 1592644375, "question_id": 37979755, "link": "https://stackoverflow.com/questions/37979755/can-we-read-num-lock-indicator-on-pyqt-rapsberry", "closed_reason": "Duplicate", "title": "can we read num lock indicator on pyqt rapsberry", "body": "<p>i'm a PYQT freshman\ni'm using PYQT5 and Python3.x on raspberry pi 3</p>\n<h1>Update</h1>\n<p>sorry for previous question</p>\n<p>The question is :</p>\n<p>How can i know if the num lock is on?\nFor simply, i want to :</p>\n<ul>\n<li>print (&quot;NumLock is ON&quot;) # if num lock is on without any key pressed before or using keypressevent.</li>\n<li>else print(&quot;NumLock is OFF&quot;) # if numlock is off</li>\n</ul>\n"}, {"tags": ["python", "django", "django-models"], "answers": [{"comments": [{"owner": {"reputation": 3146, "user_id": 327258, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/50d026903563e045ca29cab1ad0b1d66?s=128&d=identicon&r=PG", "display_name": "Codejoy", "link": "https://stackoverflow.com/users/327258/codejoy"}, "edited": false, "score": 0, "creation_date": 1466641342, "post_id": 37980278, "comment_id": 63406225, "body": "you might be right, I have to rethink this.  I wasn&#39;t sure how the group would see the providers through the locations (as they are connected through group_locations).  I believe in my thinking the reason for the separation was that... a provider might be part of a group but at a specific location.     So above if I understand it:  a provider would be part of a group through a provider location (which has  a group location which is how it gets back to group) that works from the one line above?  Or was that what you were asking on the provider locations vs group locations?"}, {"owner": {"reputation": 47988, "user_id": 267540, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2v58W.jpg?s=128&g=1", "display_name": "e4c5", "link": "https://stackoverflow.com/users/267540/e4c5"}, "reply_to_user": {"reputation": 3146, "user_id": 327258, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/50d026903563e045ca29cab1ad0b1d66?s=128&d=identicon&r=PG", "display_name": "Codejoy", "link": "https://stackoverflow.com/users/327258/codejoy"}, "edited": false, "score": 0, "creation_date": 1466641372, "post_id": 37980278, "comment_id": 63406232, "body": "Yes and that&#39;s what a ProviderLocation or GroupLocation model gives you. Having both means redundancy."}, {"owner": {"reputation": 3146, "user_id": 327258, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/50d026903563e045ca29cab1ad0b1d66?s=128&d=identicon&r=PG", "display_name": "Codejoy", "link": "https://stackoverflow.com/users/327258/codejoy"}, "edited": false, "score": 0, "creation_date": 1466641511, "post_id": 37980278, "comment_id": 63406268, "body": "changed my comment."}, {"owner": {"reputation": 47988, "user_id": 267540, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2v58W.jpg?s=128&g=1", "display_name": "e4c5", "link": "https://stackoverflow.com/users/267540/e4c5"}, "reply_to_user": {"reputation": 3146, "user_id": 327258, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/50d026903563e045ca29cab1ad0b1d66?s=128&d=identicon&r=PG", "display_name": "Codejoy", "link": "https://stackoverflow.com/users/327258/codejoy"}, "edited": false, "score": 0, "creation_date": 1466642259, "post_id": 37980278, "comment_id": 63406451, "body": "I am not sure I have understood your comment in full. &quot;a provider might be part of a group but at a specific location&quot; for example doesn&#39;t really sound like a many to many"}, {"owner": {"reputation": 3146, "user_id": 327258, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/50d026903563e045ca29cab1ad0b1d66?s=128&d=identicon&r=PG", "display_name": "Codejoy", "link": "https://stackoverflow.com/users/327258/codejoy"}, "edited": false, "score": 0, "creation_date": 1466642475, "post_id": 37980278, "comment_id": 63406505, "body": "Maybe a good way to say it is a provider is part of a group via the location they work at.   And a group can have many locations.  So the provider is part of a group to a specific location.  It might be they work at many of the groups locations, or just one.  But it is how they are related."}, {"owner": {"reputation": 47988, "user_id": 267540, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2v58W.jpg?s=128&g=1", "display_name": "e4c5", "link": "https://stackoverflow.com/users/267540/e4c5"}, "reply_to_user": {"reputation": 3146, "user_id": 327258, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/50d026903563e045ca29cab1ad0b1d66?s=128&d=identicon&r=PG", "display_name": "Codejoy", "link": "https://stackoverflow.com/users/327258/codejoy"}, "edited": false, "score": 0, "creation_date": 1466646781, "post_id": 37980278, "comment_id": 63407504, "body": "What&#39;s confusing here is the use of <code>part of</code> I think you just mean associated wtih. In that case yes, you can merge GroupLocation and ProviderLocation."}, {"owner": {"reputation": 3146, "user_id": 327258, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/50d026903563e045ca29cab1ad0b1d66?s=128&d=identicon&r=PG", "display_name": "Codejoy", "link": "https://stackoverflow.com/users/327258/codejoy"}, "edited": false, "score": 0, "creation_date": 1466650192, "post_id": 37980278, "comment_id": 63408276, "body": "I think I see the disconnect.  To me I couldn&#39;t figure out how Providers related to groups except through their locations.  If  provider belongs to a group it does.  But it does so at a specific location the group has.  Not sure if that cleared it up at all.  Bah this logic is on the tip of my tongue and I am just not sure what captures it."}, {"owner": {"reputation": 3146, "user_id": 327258, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/50d026903563e045ca29cab1ad0b1d66?s=128&d=identicon&r=PG", "display_name": "Codejoy", "link": "https://stackoverflow.com/users/327258/codejoy"}, "edited": false, "score": 0, "creation_date": 1466707103, "post_id": 37980278, "comment_id": 63442797, "body": "updated my question to reflect what I tried (based off your suggestion @e4c5"}, {"owner": {"reputation": 47988, "user_id": 267540, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2v58W.jpg?s=128&g=1", "display_name": "e4c5", "link": "https://stackoverflow.com/users/267540/e4c5"}, "reply_to_user": {"reputation": 3146, "user_id": 327258, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/50d026903563e045ca29cab1ad0b1d66?s=128&d=identicon&r=PG", "display_name": "Codejoy", "link": "https://stackoverflow.com/users/327258/codejoy"}, "edited": false, "score": 0, "creation_date": 1466721642, "post_id": 37980278, "comment_id": 63450091, "body": "this is now a completely different question and it should have been posted as such"}, {"owner": {"reputation": 3146, "user_id": 327258, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/50d026903563e045ca29cab1ad0b1d66?s=128&d=identicon&r=PG", "display_name": "Codejoy", "link": "https://stackoverflow.com/users/327258/codejoy"}, "edited": false, "score": 0, "creation_date": 1466722238, "post_id": 37980278, "comment_id": 63450283, "body": "indeed. Fixed posted a new question. Thanks I think just talking this helps me wrap my head around this."}], "tags": [], "owner": {"reputation": 47988, "user_id": 267540, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2v58W.jpg?s=128&g=1", "display_name": "e4c5", "link": "https://stackoverflow.com/users/267540/e4c5"}, "is_accepted": true, "score": 1, "last_activity_date": 1466641098, "creation_date": 1466641098, "answer_id": 37980278, "question_id": 37979749, "link": "https://stackoverflow.com/questions/37979749/using-manytomany-through-correctly-for-complex-model-in-django/37980278#37980278", "title": "Using ManyToMany through correctly for complex model in django", "body": "<blockquote>\n  <p>My question is, does my Group (and/or Provider) model need to have\n  some sort of relationship specified in their model definitions?</p>\n</blockquote>\n\n<p>Yes a many to many relationship. And you only need to define it for one model or the other because many to many can be traversed in both direction. </p>\n\n<blockquote>\n  <p>Both ends of a many-to-many relationship get automatic API access to\n  the other end. The API works just as a \u201cbackward\u201d one-to-many\n  relationship, above.</p>\n  \n  <p>The only difference is in the attribute naming: The model that defines\n  the ManyToManyField uses the attribute name of that field itself,\n  whereas the \u201creverse\u201d model uses the lowercased model name of the\n  original model, plus '_set' (just like reverse one-to-many\n  relationships).</p>\n</blockquote>\n\n<p>Source: <a href=\"https://docs.djangoproject.com/en/dev/topics/db/queries/#many-to-many-relationships\" rel=\"nofollow\">https://docs.djangoproject.com/en/dev/topics/db/queries/#many-to-many-relationships</a></p>\n\n<p>Thus your models can be simplified.</p>\n\n<pre><code>class Group(models.Model):\n   group_name = models.CharField(max_length=50)\n   group_contact= models.CharField(max_length=50)\n\n   providers = models.ManyToMany(Provider, through='ProviderLocations')\n\n\nclass Provider(models.Model):\n    created_at=models.DateField(auto_now=false, auto_now_add=true)\n    updated_at=models.DateField(auto_now=true, auto_now_add=true)\n</code></pre>\n\n<p>I am not quite sure why you are trying to create both a <code>GroupLocation</code> and <code>ProviderLocation</code> model. I do believe they can be merged.</p>\n"}], "owner": {"reputation": 3146, "user_id": 327258, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/50d026903563e045ca29cab1ad0b1d66?s=128&d=identicon&r=PG", "display_name": "Codejoy", "link": "https://stackoverflow.com/users/327258/codejoy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 297, "favorite_count": 0, "accepted_answer_id": 37980278, "answer_count": 1, "score": 2, "last_activity_date": 1466722216, "creation_date": 1466637427, "last_edit_date": 1466722216, "question_id": 37979749, "link": "https://stackoverflow.com/questions/37979749/using-manytomany-through-correctly-for-complex-model-in-django", "title": "Using ManyToMany through correctly for complex model in django", "body": "<p>I have a semi complex model relationship in my django app.</p>\n\n<p>I have a Group (a business) which can have many locations\nSo </p>\n\n<p>A group can have many providers (person) as well.  The thing is, the Provider is connected to a particular group through the group location. That is to say a provider can have that location.  In reality, i believe a provider can have many locations (belonging to multiple groups).  The way I have this in my django so far which I don't think correct is this way:</p>\n\n<pre><code>class GroupLocations(models.Model):\n    address_id = models.ForeignKey(Address, on_delete= models.SET_NULL)\n    group_id = models.ForeignKey(Group, on_delete=models.SET_NULL)\n    doing_business_as = models.CharField(max_length = 255)\n    created_at=models.DateField(auto_now=false, auto_now_add=true)\n    updated_at=models.DateField(auto_now=true, auto_now_add=true)\n\nclass ProviderLocations(models.Model):\n    provider_id = models.ForeignKey(Provider, on_delete=models.CASCADE)\n    group_location_id = models.ForeignKey(GroupLocations, on_delete=models.CASCADE)\n    created_at=models.DateField(auto_now=false, auto_now_add=true)\n    updated_at=models.DateField(auto_now=true, auto_now_add=true)\n</code></pre>\n\n<p>My question is, does my Group (and/or Provider) model need to have some sort of relationship specified in their model definitions?</p>\n\n<pre><code>class Group(models.Model):\n    group_name = models.CharField(max_length=50)\n    group_contact= models.CharField(max_length=50)\n    #do I need something like the following:\n   providers = models.ManyToMany(Provider, through='ProviderLocations')\n   provider_locations = models.ManyToMany(Group, through='GroupLocations'\n\n\nclass Provider(models.Model):\n    created_at=models.DateField(auto_now=false, auto_now_add=true)\n    updated_at=models.DateField(auto_now=true, auto_now_add=true)\n    groups = models.ManyToManyField(Group, through='GroupLocations')\n    group_locations = models.ManyToMany(GroupLocations, through='ProviderLocations')\n</code></pre>\n\n<p>This is so i can get a list of groups from a provider, and the groups locations\nand I can get a list of providers from a group and the providers locations.Actually more like the locations join which to which.    I am still learning Django'ss relationship systems so any constructive criticism of how to make these relationships work well together would be helpful.</p>\n"}, {"tags": ["python", "html", "selenium", "beautifulsoup"], "answers": [{"tags": [], "owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "is_accepted": false, "score": 0, "last_activity_date": 1466637547, "last_edit_date": 1466637547, "creation_date": 1466637227, "answer_id": 37979715, "question_id": 37979644, "link": "https://stackoverflow.com/questions/37979644/parse-beautifulsoup-element-into-selenium/37979715#37979715", "title": "Parse BeautifulSoup element into Selenium", "body": "<p>I don't know of any way to pass from bs4 to selenium but you can just use selenium to find the element:</p>\n\n<pre><code>driver.find_element_by_xpath('//input[@title=\"Search\"]').click()\n</code></pre>\n\n<p>Or to find using just the title text like your bs4 find:</p>\n\n<pre><code>driver.find_element_by_xpath('//*[@title=\"Search\"]').click()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 151, "user_id": 3689243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcb4c3513212bc3e0f337bf16164b13c?s=128&d=identicon&r=PG&f=1", "display_name": "Brian A", "link": "https://stackoverflow.com/users/3689243/brian-a"}, "is_accepted": false, "score": 1, "last_activity_date": 1504218688, "creation_date": 1504218688, "answer_id": 45990979, "question_id": 37979644, "link": "https://stackoverflow.com/questions/37979644/parse-beautifulsoup-element-into-selenium/45990979#45990979", "title": "Parse BeautifulSoup element into Selenium", "body": "<pre><code>from selenium import webdriver\nfrom selenium.webdriver.common.keys import Keys\nfrom bs4 import BeautifulSoup\n\ndriver = webdriver.Chrome()\ndriver.get(\"http://www.google.com\")\nsoup = BeautifulSoup(driver.page_source, 'html.parser')\nsearch_soup_element = soup.find(title=\"Search\")\ninput_element = soup.select('input.gsfi.lst-d-f')[0]\n\nsearch_box = driver.find_element(by='name', value=input_element.attrs['name'])\nsearch_box.send_keys('Hello World!')\nsearch_box.send_keys(Keys.RETURN)\n</code></pre>\n\n<p>This pretty much works. I can see reason for working with both webdriver and BeautifulSoup but not necessarily for this example.</p>\n"}, {"comments": [{"owner": {"reputation": 158, "user_id": 2287684, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/100000195210089/picture?type=large", "display_name": "Rafael Gon&#231;alves", "link": "https://stackoverflow.com/users/2287684/rafael-gon%c3%a7alves"}, "edited": false, "score": 0, "creation_date": 1546664597, "post_id": 48376038, "comment_id": 94933355, "body": "Worked for me! Thanks"}], "tags": [], "owner": {"reputation": 431, "user_id": 2636364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93670585cb463dade7226afc9d5ad17c?s=128&d=identicon&r=PG", "display_name": "Rob Hawkins", "link": "https://stackoverflow.com/users/2636364/rob-hawkins"}, "is_accepted": false, "score": 6, "last_activity_date": 1516603934, "creation_date": 1516603934, "answer_id": 48376038, "question_id": 37979644, "link": "https://stackoverflow.com/questions/37979644/parse-beautifulsoup-element-into-selenium/48376038#48376038", "title": "Parse BeautifulSoup element into Selenium", "body": "<p>A general solution that worked for me is to compute <a href=\"https://gist.github.com/ergoithz/6cf043e3fdedd1b94fcf\" rel=\"noreferrer\">the xpath of the bs4 element</a>, then use that to find the element in selenium,</p>\n\n<pre><code>xpath = xpath_soup(soup_element)\nselenium_element = driver.find_element_by_xpath(xpath)\n</code></pre>\n\n<p>...</p>\n\n<pre><code>import itertools\n\ndef xpath_soup(element):\n    \"\"\"\n    Generate xpath of soup element\n    :param element: bs4 text or node\n    :return: xpath as string\n    \"\"\"\n    components = []\n    child = element if element.name else element.parent\n    for parent in child.parents:\n        \"\"\"\n        @type parent: bs4.element.Tag\n        \"\"\"\n        previous = itertools.islice(parent.children, 0, parent.contents.index(child))\n        xpath_tag = child.name\n        xpath_index = sum(1 for i in previous if i.name == xpath_tag) + 1\n        components.append(xpath_tag if xpath_index == 1 else '%s[%d]' % (xpath_tag, xpath_index))\n        child = parent\n    components.reverse()\n    return '/%s' % '/'.join(components)\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 6218294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b57c8309984a9c8ebdf4e39f1fb0f321?s=128&d=identicon&r=PG&f=1", "display_name": "Darth Ludius", "link": "https://stackoverflow.com/users/6218294/darth-ludius"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4885, "favorite_count": 3, "answer_count": 3, "score": 7, "last_activity_date": 1516603934, "creation_date": 1466636795, "question_id": 37979644, "link": "https://stackoverflow.com/questions/37979644/parse-beautifulsoup-element-into-selenium", "title": "Parse BeautifulSoup element into Selenium", "body": "<p>I want to get the source code of a website using selenium; find a particular element using BeautifulSoup; and then parse it back into selenium as a selenium.webdriver.remote.webelement object.\nLike so:</p>\n\n<pre><code>driver.get(\"www.google.com\")\nsoup = BeautifulSoup(driver.source)\nelement = soup.find(title=\"Search\")\n\nelement = Selenium.webelement(element)\nelement.click()\n</code></pre>\n\n<p>How can I achieve this?</p>\n"}, {"tags": ["python", "list", "python-2.7", "dictionary", "dict-comprehension"], "comments": [{"owner": {"reputation": 56500, "user_id": 2658050, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yPuAp.jpg?s=128&g=1", "display_name": "lejlot", "link": "https://stackoverflow.com/users/2658050/lejlot"}, "edited": false, "score": 2, "creation_date": 1466636917, "post_id": 37979641, "comment_id": 63405102, "body": "this is not a dict, as you do not have keys in your structure, maybe you meant list of dicts?"}, {"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 1, "creation_date": 1466636997, "post_id": 37979641, "comment_id": 63405120, "body": "There is a way to use dict-comprehension inside of a list-comprehension, yes, but could you show what you&#39;ve tried?"}, {"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1466638395, "post_id": 37979641, "comment_id": 63405484, "body": "Why do you want multiple dictionaries with <code>{&#39;name&#39;:name, &#39;age&#39;:age}</code> instead of a single dictionary of <code>{name:age, name:age...}</code>?"}, {"owner": {"reputation": 4235, "user_id": 1306819, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d40a429220eaba06b94e1ab561e88a77?s=128&d=identicon&r=PG", "display_name": "Nik", "link": "https://stackoverflow.com/users/1306819/nik"}, "reply_to_user": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1466638785, "post_id": 37979641, "comment_id": 63405571, "body": "@TigerhawkT3: the resulting structure would go as input to another module which needed the dictionary structure to be what I described above. The other module is not editable."}], "answers": [{"tags": [], "owner": {"reputation": 28245, "user_id": 1547004, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5255289d0269d550a4e80e6bf6b0f590?s=128&d=identicon&r=PG", "display_name": "Brendan Abel", "link": "https://stackoverflow.com/users/1547004/brendan-abel"}, "is_accepted": true, "score": 4, "last_activity_date": 1466637095, "creation_date": 1466637095, "answer_id": 37979693, "question_id": 37979641, "link": "https://stackoverflow.com/questions/37979641/python-convert-list-to-dict/37979693#37979693", "title": "Python - convert list to dict", "body": "<p>You can create a <em>list of dictionaries</em> this way</p>\n\n<pre><code>d = [{'name': x[0], 'age': x[1]} for x in l]\n</code></pre>\n\n<p>Your example had a <em>set/dictionary? of dictionaries</em> which isn't really possible since dictionaries can't be hashed, and therefore can be used in sets or as dictionary keys.</p>\n"}, {"tags": [], "owner": {"reputation": 1923, "user_id": 765210, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/a28TG.png?s=128&g=1", "display_name": "Dmiters", "link": "https://stackoverflow.com/users/765210/dmiters"}, "is_accepted": false, "score": 3, "last_activity_date": 1466637218, "creation_date": 1466637218, "answer_id": 37979714, "question_id": 37979641, "link": "https://stackoverflow.com/questions/37979641/python-convert-list-to-dict/37979714#37979714", "title": "Python - convert list to dict", "body": "<p>That would be a list of dictionaries, since each entry has to have a key in order for the whole thing to be a dictionary.</p>\n\n<p>You can make one with a dictionary inside a list comprehension like this:</p>\n\n<pre><code>[{'name': name, 'age': age} for name, age in l]\n</code></pre>\n\n<p>Also note that while dictionaries themselves are unordered, this list of dictionaries will preserve the order of the list <code>l</code>.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user8661018"}, "is_accepted": false, "score": 2, "last_activity_date": 1509808626, "creation_date": 1509808626, "answer_id": 47112212, "question_id": 37979641, "link": "https://stackoverflow.com/questions/37979641/python-convert-list-to-dict/47112212#47112212", "title": "Python - convert list to dict", "body": "<p>you can make a function to do it</p>\n\n<pre><code>def list2dict(list_):\n    changed=[{'name':i[0],'age':i[1]} for i in list_]\n    return changed\n</code></pre>\n\n<p>then just call</p>\n\n<pre><code>l=[('Alice',12) , ('Bob',10) , ('Celine',11)]\nd=list2dict(l)\n</code></pre>\n\n<p>Tested in python 3.4.4</p>\n"}], "owner": {"reputation": 4235, "user_id": 1306819, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d40a429220eaba06b94e1ab561e88a77?s=128&d=identicon&r=PG", "display_name": "Nik", "link": "https://stackoverflow.com/users/1306819/nik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 12476, "favorite_count": 1, "accepted_answer_id": 37979693, "answer_count": 3, "score": -5, "last_activity_date": 1509808626, "creation_date": 1466636782, "last_edit_date": 1466638421, "question_id": 37979641, "link": "https://stackoverflow.com/questions/37979641/python-convert-list-to-dict", "title": "Python - convert list to dict", "body": "<p>I have the following list:</p>\n\n<pre><code>l = [('Alice',12),('Bob',10),('Celine',11)]\n</code></pre>\n\n<p>I want to get the following <code>dict</code> (as correctly pointed in a comment below, this is not a dict. In reality, I just want a list of dicts):</p>\n\n<pre><code>[\n    {'name':'Alice','age':12},\n    {'name':'Bob','age':10},\n    {'name':'Celine','age':11}\n]\n</code></pre>\n\n<p>Is there a way I can use <code>dict comprehension</code> to achieve this?</p>\n"}, {"tags": ["python", "linux", "unix", "compilation"], "answers": [{"tags": [], "owner": {"reputation": 9, "user_id": 1820730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15a5caeb7cea1ef7788a022402ca1859?s=128&d=identicon&r=PG", "display_name": "Nassim Abedi", "link": "https://stackoverflow.com/users/1820730/nassim-abedi"}, "is_accepted": false, "score": 0, "last_activity_date": 1486470108, "creation_date": 1486470108, "answer_id": 42089802, "question_id": 37979620, "link": "https://stackoverflow.com/questions/37979620/python-package-compile-build-ext-in-linux-from-other-directory-seqlearn-package/42089802#42089802", "title": "python package compile build_ext in linux from other directory (seqlearn package)", "body": "<p>You can use this code to see options:</p>\n\n<pre><code>python setup_telnet.py --help build_ext\n</code></pre>\n\n<p>and use --build-lib option to set other directory.</p>\n\n<pre><code>python setup.py  build_ext --build-lib &lt;other directory&gt;\n</code></pre>\n"}], "owner": {"reputation": 349, "user_id": 5025141, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/c467e4f9482dfd9f379314321dd9f600?s=128&d=identicon&r=PG&f=1", "display_name": "user5025141", "link": "https://stackoverflow.com/users/5025141/user5025141"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 120, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1486470108, "creation_date": 1466636572, "question_id": 37979620, "link": "https://stackoverflow.com/questions/37979620/python-package-compile-build-ext-in-linux-from-other-directory-seqlearn-package", "title": "python package compile build_ext in linux from other directory (seqlearn package)", "body": "<p>I downloaded seqlearn python package (at <code>https://github.com/larsmans/seqlearn</code>). I want to use seqlearn from its source directory without installing, so I try to compile first on linux.</p>\n\n<p>The files are at <code>/home/user/Downloads/seqlearn-master/seqlearn-master/</code>\nI can run \n<code>python setup.py build_ext --inplace</code> perfectly \nin the <code>/home/user/Downloads/seqlearn-master/seqlearn-master/</code> directory.</p>\n\n<p>However, I want to launch python notebook in my home directory, so I tried <code>python /home/user/Downloads/seqlearn-master/seqlearn-master/setup.py build_ext --inplace</code> in my home directory , but it shows</p>\n\n<pre><code>ValueError: 'seqlearn/_decode/bestfirst.pyx' doesn't match any files\n</code></pre>\n\n<p>So I can't really compile from my home directory, anyone knows how to fix this?</p>\n"}, {"tags": ["python", "apache-spark", "pyspark"], "comments": [{"owner": {"reputation": 1222, "user_id": 1777840, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7fOBm.jpg?s=128&g=1", "display_name": "Kenny Chan", "link": "https://stackoverflow.com/users/1777840/kenny-chan"}, "edited": false, "score": 0, "creation_date": 1466646762, "post_id": 37979565, "comment_id": 63407496, "body": "The Error says &#39;sc&#39; is not defined which is quite self-explanatory. Perhaps you could show us more of your code so that we can help you."}], "answers": [{"tags": [], "owner": {"reputation": 379, "user_id": 4132269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5542036e8c6fded6db717160c6cd7ff?s=128&d=identicon&r=PG&f=1", "display_name": "Akarsh", "link": "https://stackoverflow.com/users/4132269/akarsh"}, "is_accepted": true, "score": 2, "last_activity_date": 1466662449, "creation_date": 1466662449, "answer_id": 37983622, "question_id": 37979565, "link": "https://stackoverflow.com/questions/37979565/code-using-the-spark-on-pyspark/37983622#37983622", "title": "code using the Spark on pyspark", "body": "<p>The error message quite clearly states that the sparkContext is not created on the sc variable. This would have automatically got create incase you are on the pyspark shell. Since it does not, I predict you are running it through spark-submit. In that case, add the below boiler plate code to get your script running.</p>\n\n<pre><code>from pyspark import SparkContext\n\nsc = SparkContext(appName=\"Scalaword\")\n</code></pre>\n\n<p>More information on what you have got would help you better.</p>\n"}], "owner": {"reputation": 605, "user_id": 2718018, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/78d8e27b9712d9d7a871e75ef18a98c2?s=128&d=identicon&r=PG&f=1", "display_name": "Yasir", "link": "https://stackoverflow.com/users/2718018/yasir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 151, "favorite_count": 0, "accepted_answer_id": 37983622, "answer_count": 1, "score": 1, "last_activity_date": 1466662510, "creation_date": 1466636272, "last_edit_date": 1466662510, "question_id": 37979565, "link": "https://stackoverflow.com/questions/37979565/code-using-the-spark-on-pyspark", "title": "code using the Spark on pyspark", "body": "<p>I have problem in pyspark. I have executed just these lines on Spark using pyspark as given below, it gives me following error,</p>\n\n<pre><code>&gt;&gt;&gt; text_file=sc.textFile(\"/Users/Aroon/spark/Scala/word\")\n</code></pre>\n\n<blockquote>\n  <p>Traceback (most recent call last):\n    File \"\", line 1, in \n  NameError: name 'sc' is not defined.</p>\n</blockquote>\n"}, {"tags": ["python", "amazon-web-services", "amazon-ec2", "boto3"], "answers": [{"comments": [{"owner": {"reputation": 3965, "user_id": 755934, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/78206ae90608eeec3892338bc3f1d1b4?s=128&d=identicon&r=PG", "display_name": "Daniel Kats", "link": "https://stackoverflow.com/users/755934/daniel-kats"}, "edited": false, "score": 0, "creation_date": 1466640351, "post_id": 37980045, "comment_id": 63405951, "body": "This mostly worked for me, except I found the documentation was incorrect and the parameter keys were: <code>Attribute</code>, <code>Value</code>, <code>DryRun</code>. I also found that the value, despite being called a set, is actually a string."}], "tags": [], "owner": {"reputation": 10917, "user_id": 5451492, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/14ea33b371d1388017d643f0332785c0?s=128&d=identicon&r=PG&f=1", "display_name": "Rodrigo M", "link": "https://stackoverflow.com/users/5451492/rodrigo-m"}, "is_accepted": true, "score": 1, "last_activity_date": 1466640009, "last_edit_date": 1466640009, "creation_date": 1466639513, "answer_id": 37980045, "question_id": 37979434, "link": "https://stackoverflow.com/questions/37979434/how-to-associate-a-newly-created-ec2-security-group-with-an-instance/37980045#37980045", "title": "how to associate a newly created EC2 security group with an instance", "body": "<p>You will want to modify the attributes of the instance:</p>\n\n<pre><code>modify_attribute(attribute, value, dry_run=False)\n</code></pre>\n\n<p><code>modify_attribute</code> changes an attribute of this instance. Use the attribute <strong>groupSet</strong> - <em>Set of Security Groups or IDs</em></p>\n\n<pre><code>i.modify_attribute('groupSet','sg-xxxx5678')\n</code></pre>\n\n<p>See <a href=\"http://boto.readthedocs.io/en/latest/ref/ec2.html#boto.ec2.instance.Instance.modify_attribute\" rel=\"nofollow\">boto.ec2.instance</a></p>\n"}], "owner": {"reputation": 3965, "user_id": 755934, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/78206ae90608eeec3892338bc3f1d1b4?s=128&d=identicon&r=PG", "display_name": "Daniel Kats", "link": "https://stackoverflow.com/users/755934/daniel-kats"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 694, "favorite_count": 0, "accepted_answer_id": 37980045, "answer_count": 1, "score": 2, "last_activity_date": 1466640009, "creation_date": 1466635537, "question_id": 37979434, "link": "https://stackoverflow.com/questions/37979434/how-to-associate-a-newly-created-ec2-security-group-with-an-instance", "title": "how to associate a newly created EC2 security group with an instance", "body": "<p>How do I add an EC2 instance to a newly created security group? The security group was created with</p>\n\n<pre><code>client = session.client(\"ec2\")\ngroup_id = client.create_security_group(\n    DryRun=False,\n    GroupName=group_name,\n    VpcId=vpc_id,\n    Description=description\n)\n</code></pre>\n"}, {"tags": ["python", "django", "database"], "answers": [{"tags": [], "owner": {"reputation": 2367, "user_id": 3076091, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/CrUBz.jpg?s=128&g=1", "display_name": "dnit13", "link": "https://stackoverflow.com/users/3076091/dnit13"}, "is_accepted": false, "score": 1, "last_activity_date": 1466635678, "creation_date": 1466635678, "answer_id": 37979459, "question_id": 37979398, "link": "https://stackoverflow.com/questions/37979398/django-retrieve-all-rows-from-a-table-but-the-last-three/37979459#37979459", "title": "Django retrieve all rows from a table but the last three", "body": "<p>This should work,</p>\n\n<pre><code>Book.objects.order_by('-id')[3:]\n</code></pre>\n\n<p>if you want to get them in order</p>\n\n<pre><code>Book.objects.order_by('-id')[3:][::-1]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3202, "user_id": 3358074, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vnKYD.png?s=128&g=1", "display_name": "dmitryro", "link": "https://stackoverflow.com/users/3358074/dmitryro"}, "is_accepted": false, "score": 0, "last_activity_date": 1466635934, "creation_date": 1466635934, "answer_id": 37979508, "question_id": 37979398, "link": "https://stackoverflow.com/questions/37979398/django-retrieve-all-rows-from-a-table-but-the-last-three/37979508#37979508", "title": "Django retrieve all rows from a table but the last three", "body": "<p>As you have </p>\n\n<pre><code>books = Book.objects.order_by('-id')[:3]\n\nlist_to_exclude = [b.id for b in books]\n</code></pre>\n\n<p>and then</p>\n\n<pre><code>books_excl = Book.objects.all().exclude(id__in=list_to_exclude)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1538, "user_id": 3901473, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/slo1e.jpg?s=128&g=1", "display_name": "Ravi Kumar", "link": "https://stackoverflow.com/users/3901473/ravi-kumar"}, "is_accepted": false, "score": 0, "last_activity_date": 1466647193, "creation_date": 1466647193, "answer_id": 37981085, "question_id": 37979398, "link": "https://stackoverflow.com/questions/37979398/django-retrieve-all-rows-from-a-table-but-the-last-three/37981085#37981085", "title": "Django retrieve all rows from a table but the last three", "body": "<p>Use:</p>\n\n<pre><code>Book.objects.exclude(pk__in=Book.objects.order_by('-id')[:3])\n</code></pre>\n\n<p>Note: above query tested on postgres 9.5.3</p>\n"}], "owner": {"reputation": 3732, "user_id": 708678, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/7fbb6daceccbb0a4dac60a58d725f8a5?s=128&d=identicon&r=PG", "display_name": "Aaron", "link": "https://stackoverflow.com/users/708678/aaron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1466655358, "creation_date": 1466635281, "last_edit_date": 1466638642, "question_id": 37979398, "link": "https://stackoverflow.com/questions/37979398/django-retrieve-all-rows-from-a-table-but-the-last-three", "title": "Django retrieve all rows from a table but the last three", "body": "<p>I have the last three rows by using <code>Book.objects.order_by('-id')[:3]</code>, is there a way to get all the rows excluding those three elements?</p>\n"}, {"tags": ["python", "pytest", "coverage.py", "python-coverage"], "answers": [{"tags": [], "owner": {"reputation": 30697, "user_id": 31667, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/082b069c287878a1bd5731f44c8f10e7?s=128&d=identicon&r=PG", "display_name": "viraptor", "link": "https://stackoverflow.com/users/31667/viraptor"}, "is_accepted": false, "score": 0, "last_activity_date": 1466636540, "creation_date": 1466636540, "answer_id": 37979615, "question_id": 37979365, "link": "https://stackoverflow.com/questions/37979365/given-an-object-how-to-get-a-list-of-bound-methods-which-are-called-during-runt/37979615#37979615", "title": "Given an object, how to get a list of bound methods which are called during runtime", "body": "<p>I don't know if you can get this from coverage library itself, but you can definitely get this information by processing files yourself.</p>\n\n<p>Have a look at the <a href=\"https://docs.python.org/2/library/ast.html\" rel=\"nofollow\">AST</a> module. It allows you to parse the all the files reported by coverage and generate ranges of lines for each function. From there you just need to check which functions executed any lines at all.</p>\n\n<p>But... since coverage needs to do something similar, it may be easier to just modify coverage to do report the local function instead.</p>\n"}, {"comments": [{"owner": {"reputation": 601, "user_id": 5425279, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QX2gc.jpg?s=128&g=1", "display_name": "Li Feng", "link": "https://stackoverflow.com/users/5425279/li-feng"}, "edited": false, "score": 0, "creation_date": 1466707399, "post_id": 37989113, "comment_id": 63442960, "body": "Agree, I am digging deeper into <code>trace</code> and <code>inspect</code> module."}], "tags": [], "owner": {"reputation": 320805, "user_id": 14343, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/75e9a11371cbe1566607180863efdf4c?s=128&d=identicon&r=PG", "display_name": "Ned Batchelder", "link": "https://stackoverflow.com/users/14343/ned-batchelder"}, "is_accepted": false, "score": 0, "last_activity_date": 1466677950, "creation_date": 1466677950, "answer_id": 37989113, "question_id": 37979365, "link": "https://stackoverflow.com/questions/37979365/given-an-object-how-to-get-a-list-of-bound-methods-which-are-called-during-runt/37989113#37989113", "title": "Given an object, how to get a list of bound methods which are called during runtime", "body": "<p>Coverage.py does not have this feature. You'll need to use the <code>trace</code> module, or post-process the coverage results to get the method names.</p>\n"}], "owner": {"reputation": 601, "user_id": 5425279, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QX2gc.jpg?s=128&g=1", "display_name": "Li Feng", "link": "https://stackoverflow.com/users/5425279/li-feng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1466677950, "creation_date": 1466635057, "last_edit_date": 1466666047, "question_id": 37979365, "link": "https://stackoverflow.com/questions/37979365/given-an-object-how-to-get-a-list-of-bound-methods-which-are-called-during-runt", "title": "Given an object, how to get a list of bound methods which are called during runtime", "body": "<p>The question comes from this scenario:</p>\n\n<p>We've built a framework to test northbound apis of our project, based on pytest.\nAnd now we want to have a coverage report about how many apis are tested(basically, are called) by running the test scripts we have.</p>\n\n<p>We already have a well-defined client manager, which makes every api as a python method.\nFor example, say we have an api <code>GET /user</code>,then we will have a method <code>get_user</code> which sends the actual request to server.</p>\n\n<p>We are now using python-coverage (actually pytest-cov but it's the same thing) which will give us a report of code coverage, and based on that, we will have some sort of concept about how many apis are called. However, it's not accurate and clear enough. </p>\n\n<p>So the key question is, is there a way to get a list of bound methods which are called during runtime.</p>\n\n<p>I'd like to give an example to illustrate the question.</p>\n\n<pre><code>class Client(object):\n    def __init__(self):\n        pass\n\n    def get_user(self, user):\n        pass\n\n    def post_user(self, user):\n        pass\n\n    def delete_user(self, user):\n        pass\n\ndef test_get_user():\n    Client().get_user(\"user\")\n\ndef test_post_user():\n    Client().post_user(\"user\")\n</code></pre>\n\n<p>After running the two tests, how can I get a report saying that <code>get_user</code> and <code>post_user</code> was called and <code>delete_user</code> was not called during last run.</p>\n\n<p>One possible solution is, since running tests with coverage.py will give us enough information about line numbers and files being executed, maybe I can analyze what I need from there.</p>\n\n<p>Another possible solution is to track which method is called in <code>Client</code> I defined. Actually I solved my question in my particular case where all apis method will call a common method, in my case, <code>call_api</code>. I use <code>inspect</code> in method <code>call_api</code>, and I am able to get the method name because say <code>get_user</code> is always the caller of <code>call_api</code>. However, this solution only works for this special case and is not a general solution.</p>\n\n<p>I also looked at module <code>trace</code>, it looks close to what I want, but unfortunately, you have to use <code>tracer(Trace instance)</code> to run command or function. </p>\n\n<p>What I want to achieve eventually is:</p>\n\n<pre><code>tracer = Trace(obj_to_trace)\ntracer.start_trace()\n# using obj_to_trace \ntracer.end_trace()\ntracer.get_called_methods()\n</code></pre>\n"}, {"tags": ["python", "mysql", "django"], "comments": [{"owner": {"reputation": 38630, "user_id": 1324033, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/PaonW.png?s=128&g=1", "display_name": "Sayse", "link": "https://stackoverflow.com/users/1324033/sayse"}, "edited": false, "score": 0, "creation_date": 1466634909, "post_id": 37979286, "comment_id": 63404506, "body": "Do you have your query backwards? it looks like you need to filter addresses then get the related object"}, {"owner": {"reputation": 2878, "user_id": 977524, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/c77608603004acd9dd89446f8e649cea?s=128&d=identicon&r=PG", "display_name": "whiterook6", "link": "https://stackoverflow.com/users/977524/whiterook6"}, "reply_to_user": {"reputation": 38630, "user_id": 1324033, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/PaonW.png?s=128&g=1", "display_name": "Sayse", "link": "https://stackoverflow.com/users/1324033/sayse"}, "edited": false, "score": 0, "creation_date": 1466634994, "post_id": 37979286, "comment_id": 63404530, "body": "Would changing the context to Address change how the filtering is built? I suspect I&#39;d still have many filter function calls. Also I&#39;m potentially querying on other tables as well (voters, phones, emails, etc.)"}, {"owner": {"reputation": 38630, "user_id": 1324033, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/PaonW.png?s=128&g=1", "display_name": "Sayse", "link": "https://stackoverflow.com/users/1324033/sayse"}, "edited": false, "score": 0, "creation_date": 1466635042, "post_id": 37979286, "comment_id": 63404544, "body": "I believe it would because you&#39;re having to do a related lookup every time, im not sure though"}], "answers": [{"comments": [{"owner": {"reputation": 2878, "user_id": 977524, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/c77608603004acd9dd89446f8e649cea?s=128&d=identicon&r=PG", "display_name": "whiterook6", "link": "https://stackoverflow.com/users/977524/whiterook6"}, "edited": false, "score": 0, "creation_date": 1466693125, "post_id": 37982155, "comment_id": 63433432, "body": "It&#39;s the <code>**</code> that does it, right? I&#39;m new to Python but it looks like passing a dictionary into a function using the double-star operator will actually expand it into key=value arguments for the function. (In case anyone else didn&#39;t know.) Thanks!"}, {"owner": {"reputation": 1767, "user_id": 375649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AYXsA.jpg?s=128&g=1", "display_name": "Andrey Shipilov", "link": "https://stackoverflow.com/users/375649/andrey-shipilov"}, "reply_to_user": {"reputation": 2878, "user_id": 977524, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/c77608603004acd9dd89446f8e649cea?s=128&d=identicon&r=PG", "display_name": "whiterook6", "link": "https://stackoverflow.com/users/977524/whiterook6"}, "edited": false, "score": 0, "creation_date": 1466780227, "post_id": 37982155, "comment_id": 63474755, "body": "No worries. Yeah the double asterisks is unpacking the dictionary if pass it to a function."}], "tags": [], "owner": {"reputation": 1767, "user_id": 375649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AYXsA.jpg?s=128&g=1", "display_name": "Andrey Shipilov", "link": "https://stackoverflow.com/users/375649/andrey-shipilov"}, "is_accepted": true, "score": 1, "last_activity_date": 1466654788, "creation_date": 1466654788, "answer_id": 37982155, "question_id": 37979286, "link": "https://stackoverflow.com/questions/37979286/how-can-i-build-a-django-query-without-knowing-what-fields-i-will-query-on/37982155#37982155", "title": "How can I build a Django query without knowing what fields I will query on?", "body": "<p>There's no built in way to do it by you can kinda optimise it.</p>\n\n<pre><code>def set_if_not_none(mapping, key, value):\n    if value is not None:\n        mapping[key] = value\n\n\ndef view(request):\n    sort_params = {}\n    get_params_needed = ['street_number', 'street_name', 'district'] # And list all of them you need.\n\n    for param in get_params_needed:\n        set_if_not_none(sort_params, 'addresses__' + param, request.GET.get(param))\n\n    result = YourObject.objects.filter(**sort_params)\n\n    ...\n\n    return render(...)\n</code></pre>\n\n<p>The code is self explanatory. Hope it helps.</p>\n"}], "owner": {"reputation": 2878, "user_id": 977524, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/c77608603004acd9dd89446f8e649cea?s=128&d=identicon&r=PG", "display_name": "whiterook6", "link": "https://stackoverflow.com/users/977524/whiterook6"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 37982155, "answer_count": 1, "score": 1, "last_activity_date": 1466654788, "creation_date": 1466634515, "last_edit_date": 1466635344, "question_id": 37979286, "link": "https://stackoverflow.com/questions/37979286/how-can-i-build-a-django-query-without-knowing-what-fields-i-will-query-on", "title": "How can I build a Django query without knowing what fields I will query on?", "body": "<p>I'm new to Django and kinda new to Python too, and I'm trying to build a query. I have some fields in a dictionary and I don't know which will be used in a query (they're coming in from a form.)</p>\n\n<p>I've got something kinda working, but I can tell it's broke, and it's terrible, not reusable code:</p>\n\n<pre><code>if 'street_number' in params:\n    query = query.filter(addresses__street_number=params['street_number'])\nif 'street_name' in params:\n    query = query.filter(addresses__street_name=params['street_name'])\nif 'district' in params:\n    query = query.filter(addresses__district=params['district'])\nif 'city' in params:\n    query = query.filter(addresses__city=params['city'])\nif 'county' in params:\n    query = query.filter(addresses__county=params['county'])\nif 'state' in params:\n    query = query.filter(addresses__state=params['state'])\nif 'country' in params:\n    query = query.filter(addresses__country=params['country'])\nif 'zip_code' in params:\n    query = query.filter(addresses__zip_code=params['zip_code'])\nif 'precinct' in params:\n    query = query.filter(addresses__precinct=params['precinct'])\n</code></pre>\n\n<p>I believe it's joining once for every time I call query.filter. When I view the SQL it generates I see this mess:</p>\n\n<pre><code>SELECT `voters`.`id`, `voters`.`created_at`, `voters`.`updated_at`, `voters`.`first_name`, `voters`.`middle_name`, `voters`.`last_name`, `voters`.`name_prefix`, `voters`.`name_suffix`, `voters`.`ethnicity`, `voters`.`gender`, `voters`.`i360_id`, `voters`.`rnc_id`, `voters`.`congressional_voter_id`, `voters`.`state_voter_id`, `voters`.`county_voter_id`\nFROM `voters`\nINNER JOIN `voters_addresses` ON (`voters`.`id` = `voters_addresses`.`voter_id`)\nINNER JOIN `addresses` ON (`voters_addresses`.`address_id` = `addresses`.`id`)\nINNER JOIN `voters_addresses` T4 ON (`voters`.`id` = T4.`voter_id`) \nINNER JOIN `addresses` T5 ON (T4.`address_id` = T5.`id`)\nWHERE (`addresses`.`city` = Nashville AND T5.`state` = TN) LIMIT 10\n</code></pre>\n\n<p>(there's also a couple other things going on in the SQL, like joining on phones, but that's not related to this problem.)</p>\n\n<p>Note the extra joining on voters_addresses and addresses. Can I refactor this so it uses one filter() call instead? Alternatively, can I build a query starting with each of the related models (Address, Phone, etc.) and combine them later, somehow? Something like</p>\n\n<pre><code>Voter.objects\n  .whereExists(Address.objects.filter())\n  .whereExists(Phone.objects.filter())...\n</code></pre>\n\n<p>?</p>\n"}, {"tags": ["python", "function", "powershell", "parameter-passing"], "comments": [{"owner": {"reputation": 18739, "user_id": 4003407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1bb6a20caae0ab19fe7eab3ac3f74fb?s=128&d=identicon&r=PG&f=1", "display_name": "user4003407", "link": "https://stackoverflow.com/users/4003407/user4003407"}, "edited": false, "score": 0, "creation_date": 1466658939, "post_id": 37979266, "comment_id": 63410685, "body": "Your <code>.ps1</code> file define the function, but does it call it?"}, {"owner": {"reputation": 555, "user_id": 5200872, "user_type": "registered", "accept_rate": 81, "profile_image": "https://lh6.googleusercontent.com/-pR1xZ8K8_SI/AAAAAAAAAAI/AAAAAAAAAGE/sswvwzQjQgs/photo.jpg?sz=128", "display_name": "Goofball", "link": "https://stackoverflow.com/users/5200872/goofball"}, "reply_to_user": {"reputation": 18739, "user_id": 4003407, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1bb6a20caae0ab19fe7eab3ac3f74fb?s=128&d=identicon&r=PG&f=1", "display_name": "user4003407", "link": "https://stackoverflow.com/users/4003407/user4003407"}, "edited": false, "score": 0, "creation_date": 1466660384, "post_id": 37979266, "comment_id": 63411234, "body": "It did not call it. How would you call it? That&#39;s the part I&#39;m struggling with"}], "answers": [{"tags": [], "owner": {"reputation": 555, "user_id": 5200872, "user_type": "registered", "accept_rate": 81, "profile_image": "https://lh6.googleusercontent.com/-pR1xZ8K8_SI/AAAAAAAAAAI/AAAAAAAAAGE/sswvwzQjQgs/photo.jpg?sz=128", "display_name": "Goofball", "link": "https://stackoverflow.com/users/5200872/goofball"}, "is_accepted": false, "score": 0, "last_activity_date": 1466655336, "creation_date": 1466655336, "answer_id": 37982234, "question_id": 37979266, "link": "https://stackoverflow.com/questions/37979266/pass-parameter-to-powershell-script-when-calling-from-python/37982234#37982234", "title": "pass parameter to PowerShell script when calling from Python", "body": "<p>I couldn't make the Powershell command work from Python. I actually found a .bat file with a command that works. I just inserted the 'start' parameter I call the bat file from python. It works like a charm. It's not optimal but it does the job for me.</p>\n\n<pre><code>SETLOCAL\nPowershell -NoProfile -NonInteractive -NoLogo -ExecutionPolicy Bypass -Command \"try { Unblock-File -Path '%~dp0Neo4j-Management\\*.*' -ErrorAction 'SilentlyContinue' } catch {};Import-Module '%~dp0Neo4j-Management.psd1'; Exit (Invoke-Neo4j 'start')\"\nEXIT /B %ERRORLEVEL%\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2191, "user_id": 6084559, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/247p3.jpg?s=128&g=1", "display_name": "Bruce Payette", "link": "https://stackoverflow.com/users/6084559/bruce-payette"}, "is_accepted": false, "score": 0, "last_activity_date": 1466715644, "creation_date": 1466715644, "answer_id": 38001791, "question_id": 37979266, "link": "https://stackoverflow.com/questions/37979266/pass-parameter-to-powershell-script-when-calling-from-python/38001791#38001791", "title": "pass parameter to PowerShell script when calling from Python", "body": "<p>Running a script, in either PowerShell or Python, that only defines a function but does not call it has no other effect than defining function. The script needs to include a specific call to that function. In your case, you might as well put the logic at the top level of the script instead of inside a function then calling the function. This would look like:</p>\n\n<pre><code>[cmdletBinding(SupportsShouldProcess=$false,ConfirmImpact='Low')]\nparam (\n    [Parameter(Mandatory=$false,ValueFromPipeline=$false,Position=0)]\n    [string]$Command = ''\n)\n# rest of code not surrounded by { }\nexit 0\n</code></pre>\n\n<p>Invoke the revised script from Python as you were initially doing and it should work properly.</p>\n"}], "owner": {"reputation": 555, "user_id": 5200872, "user_type": "registered", "accept_rate": 81, "profile_image": "https://lh6.googleusercontent.com/-pR1xZ8K8_SI/AAAAAAAAAAI/AAAAAAAAAGE/sswvwzQjQgs/photo.jpg?sz=128", "display_name": "Goofball", "link": "https://stackoverflow.com/users/5200872/goofball"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1396, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1466715644, "creation_date": 1466634391, "question_id": 37979266, "link": "https://stackoverflow.com/questions/37979266/pass-parameter-to-powershell-script-when-calling-from-python", "title": "pass parameter to PowerShell script when calling from Python", "body": "<p>From python I want to call a powershell script and pass a parameter to it</p>\n\n<p>The Powershell function header is listed here:</p>\n\n<pre><code>Function Invoke-Neo4j\n{\n  [cmdletBinding(SupportsShouldProcess=$false,ConfirmImpact='Low')]\n  param (\n    [Parameter(Mandatory=$false,ValueFromPipeline=$false,Position=0)]\n    [string]$Command = ''\n  )\n</code></pre>\n\n<p>Python - How do pass the parameter $Command = 'start' to the function from python? I can't seem to get it to work.</p>\n\n<pre><code>import subprocess\ncmd = ['powershell.exe', '-ExecutionPolicy', 'RemoteSigned', '-File',\n       'C:\\\\PathName\\\\Invoke-Neo4j.ps1']\nreturncode = subprocess.call(cmd)\nprint(returncode)\n</code></pre>\n"}, {"tags": ["python", "web-services"], "answers": [{"comments": [{"owner": {"reputation": 616, "user_id": 656065, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/d5605508fc6cbb5a0d7703d3c3b59177?s=128&d=identicon&r=PG", "display_name": "chrislgarry", "link": "https://stackoverflow.com/users/656065/chrislgarry"}, "edited": false, "score": 0, "creation_date": 1466886141, "post_id": 37979340, "comment_id": 63505434, "body": "Thanks. I decided to forgoe using CGI and my LAMP stack, and set up a Tornado web server and web socket to accomplish this. It seems much more appropriate."}], "tags": [], "owner": {"reputation": 3223, "user_id": 501979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e705bcc10f6b8b5e04104546ea523d7?s=128&d=identicon&r=PG", "display_name": "Ali Nikneshan", "link": "https://stackoverflow.com/users/501979/ali-nikneshan"}, "is_accepted": false, "score": 1, "last_activity_date": 1466634922, "creation_date": 1466634922, "answer_id": 37979340, "question_id": 37979262, "link": "https://stackoverflow.com/questions/37979262/how-can-i-avoid-webpage-receiving-gateway-timeout-when-calling-slow-python-cgi-s/37979340#37979340", "title": "How can I avoid webpage receiving Gateway Timeout when calling slow Python CGI script?", "body": "<p>Generally the way to handle long delay is using <code>yield</code> and sending partial data to client. Instead of <code>obj.wait()</code> you need a loop to check if status is finished and if not printing something like: <code>...</code> and sleep for one second. This way you will not receive timeout.</p>\n"}, {"tags": [], "owner": {"reputation": 616, "user_id": 656065, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/d5605508fc6cbb5a0d7703d3c3b59177?s=128&d=identicon&r=PG", "display_name": "chrislgarry", "link": "https://stackoverflow.com/users/656065/chrislgarry"}, "is_accepted": true, "score": 0, "last_activity_date": 1466886277, "creation_date": 1466886277, "answer_id": 38032665, "question_id": 37979262, "link": "https://stackoverflow.com/questions/37979262/how-can-i-avoid-webpage-receiving-gateway-timeout-when-calling-slow-python-cgi-s/38032665#38032665", "title": "How can I avoid webpage receiving Gateway Timeout when calling slow Python CGI script?", "body": "<p>While Ali Nikneshans answer was helpful, it seems CGI is not the right tool for the job. I decided to stop using a LAMP stack/CGI apps and setup a Tornado web server with web sockets, which allows me to do async calls easily, background tasks, and use coroutines to setup a data pipeline for polling the API endpoint and feeding the data into the browser. </p>\n\n<p>This presentation was quite helpful for understanding coroutines: </p>\n\n<p><a href=\"http://www.dabeaz.com/coroutines/Coroutines.pdf\" rel=\"nofollow\">http://www.dabeaz.com/coroutines/Coroutines.pdf</a>. </p>\n\n<p>And for Tornado:</p>\n\n<p><a href=\"http://www.tornadoweb.org/en/stable/index.html\" rel=\"nofollow\">http://www.tornadoweb.org/en/stable/index.html</a>.</p>\n"}], "owner": {"reputation": 616, "user_id": 656065, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/d5605508fc6cbb5a0d7703d3c3b59177?s=128&d=identicon&r=PG", "display_name": "chrislgarry", "link": "https://stackoverflow.com/users/656065/chrislgarry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 381, "favorite_count": 0, "accepted_answer_id": 38032665, "answer_count": 2, "score": 0, "last_activity_date": 1466886277, "creation_date": 1466634365, "last_edit_date": 1466634741, "question_id": 37979262, "link": "https://stackoverflow.com/questions/37979262/how-can-i-avoid-webpage-receiving-gateway-timeout-when-calling-slow-python-cgi-s", "title": "How can I avoid webpage receiving Gateway Timeout when calling slow Python CGI script?", "body": "<p>I have a LAMP server set up in EC2. A simple website hosted on this web server in <code>/var/www/html/</code> allows a user to upload an audio file of people having a discussion via an input form:</p>\n\n<pre><code>&lt;form action=\"../cgi-bin/store_mp3_view\" method=\"post\" accept-charset=\"utf-8\" enctype=\"multipart/form-data\"&gt;\n    &lt;label for=\"mp3\"&gt;Audio file&lt;/label&gt;\n    &lt;input type=\"file\" name=\"filename\" /&gt;\n    &lt;input type=\"submit\" value=\"Upload\" /&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>This audio file gets stored in <code>/tmp/</code>. As you can see, this triggers a Python script I have in cgi-bin. Here is the script: <a href=\"http://pastebin.com/iNU6WSUV\" rel=\"nofollow\">http://pastebin.com/iNU6WSUV</a>. This script then uploads the uploaded audio file from my web server to an API by Honda which will detect utterances and produce an audio file for each utterance as well as a json object containing metadata for each utterance. It appears the utterance files can be fetched separately, as well as the json for each utterance from Hondas API: <a href=\"https://api.hark.jp/docs/en/05_reference_webapi.html\" rel=\"nofollow\">https://api.hark.jp/docs/en/05_reference_webapi.html</a>. My script waits for <em>all</em> of this processing to complete (all utterances to be processed and ready), then retrieves each audio file and sends it to Bing Speech API to get the text from speech. This is because I want to play each utterance audio file and associated text and metadata in the browser as the conversation happened in sequence/real-time. A player, if you will. The problem is all of this takes too long, as the browser is receiving a gateway timeout from the cgi script. It can take several minutes. Specifically, Hark takes a while to return the complete results of the audio analysis, but it appears I can query their API and retrieve intermediate results as mentioned earlier. However, the utterances don't finish in order, so utterance 3 may be ready before utterance 2, but I need to show 2 before 3 because conversations have an order of utterances. What is the best way to go about building an app that can do this? How can I background these API calls to not block and cause a timeout? Should I be using something like Flask for this web app? How can I render the results in the webpage as I iteratively poll and retrieve them from Hark? Is CGI the wrong tool for the job? Thanks.</p>\n"}, {"tags": ["python", "tensorflow"], "answers": [{"tags": [], "owner": {"reputation": 4503, "user_id": 6490351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e233e0c24ba66b67585e9c9efdab6c5?s=128&d=identicon&r=PG&f=1", "display_name": "Yao Zhang", "link": "https://stackoverflow.com/users/6490351/yao-zhang"}, "is_accepted": true, "score": 2, "last_activity_date": 1466637688, "last_edit_date": 1466637688, "creation_date": 1466636298, "answer_id": 37979571, "question_id": 37979238, "link": "https://stackoverflow.com/questions/37979238/tensorflow-product-equivalent-of-tf-add-n/37979571#37979571", "title": "TensorFlow: product equivalent of tf.add_n", "body": "<p>Solution 1:</p>\n\n<p>You can use higher order functions tf.foldl and tf.foldr. Here is an example:</p>\n\n<pre><code>x = tf.constant([5, 2, 4, 3])\ny = tf.constant([2, 2, 1, 6])\nz = tf.constant([24, 2, 1, 6])\n\nxyz=[x,y,z]\nproduct = tf.foldl(tf.mul, xyz) \n\nwith tf.Session() as sess:\n    print product.eval()\n</code></pre>\n\n<p>Results:\n[240   8   4 108]</p>\n\n<p>Solution 2:\nYou can use tf.reduce_prod:</p>\n\n<pre><code>x = tf.constant([5, 2, 4, 3])\ny = tf.constant([2, 2, 1, 6])\nz = tf.constant([24, 2, 1, 6])\n\nx=tf.reshape(x,[1,-1])\ny=tf.reshape(y,[1,-1])\nz=tf.reshape(z,[1,-1])\nxyz=tf.concat(concat_dim=0, values=[x,y,z])\n\nproduct = tf.reduce_prod(xyz, reduction_indices=0) \n\nwith tf.Session() as sess:\n    print xyz.eval()\n    print product.eval()\n</code></pre>\n\n<p>Results:</p>\n\n<p>xyz\n[[ 5  2  4  3]</p>\n\n<p>[ 2  2  1  6]</p>\n\n<p>[24  2  1  6]]</p>\n\n<p>product\n[240   8   4 108]</p>\n"}], "owner": {"reputation": 35, "user_id": 5640923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d77c841dfcda1d5612f3a40c288ea4a0?s=128&d=identicon&r=PG&f=1", "display_name": "user266044", "link": "https://stackoverflow.com/users/5640923/user266044"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 694, "favorite_count": 2, "accepted_answer_id": 37979571, "answer_count": 1, "score": 2, "last_activity_date": 1466637688, "creation_date": 1466634258, "question_id": 37979238, "link": "https://stackoverflow.com/questions/37979238/tensorflow-product-equivalent-of-tf-add-n", "title": "TensorFlow: product equivalent of tf.add_n", "body": "<p>Is there a product equivalent of tf.add_n, returning the elementwise product of a list of tensors?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 24305, "user_id": 2776376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/40VxD.gif?s=128&g=1", "display_name": "Maximilian Peters", "link": "https://stackoverflow.com/users/2776376/maximilian-peters"}, "edited": false, "score": 1, "creation_date": 1466634316, "post_id": 37979232, "comment_id": 63404343, "body": "do you get an error message or unexpected output?"}, {"owner": {"reputation": 2727, "user_id": 986012, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/07059b53ad8cdae7f9955da84756b089?s=128&d=identicon&r=PG", "display_name": "Morgan Allen", "link": "https://stackoverflow.com/users/986012/morgan-allen"}, "reply_to_user": {"reputation": 24305, "user_id": 2776376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/40VxD.gif?s=128&g=1", "display_name": "Maximilian Peters", "link": "https://stackoverflow.com/users/2776376/maximilian-peters"}, "edited": false, "score": 0, "creation_date": 1466634524, "post_id": 37979232, "comment_id": 63404405, "body": "updated my question"}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 1, "creation_date": 1466634949, "post_id": 37979232, "comment_id": 63404518, "body": "Unrelated but why are you opening the file in binary mode? Also, has the program finished when you inspect the file or is this some ongoing loop?"}, {"owner": {"reputation": 2727, "user_id": 986012, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/07059b53ad8cdae7f9955da84756b089?s=128&d=identicon&r=PG", "display_name": "Morgan Allen", "link": "https://stackoverflow.com/users/986012/morgan-allen"}, "edited": false, "score": 0, "creation_date": 1466639467, "post_id": 37979232, "comment_id": 63405751, "body": "What would be an alternate way of opening it? I&#39;m opening the file, scraping some data off websites and writing rows to the file."}], "answers": [{"comments": [{"owner": {"reputation": 2727, "user_id": 986012, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/07059b53ad8cdae7f9955da84756b089?s=128&d=identicon&r=PG", "display_name": "Morgan Allen", "link": "https://stackoverflow.com/users/986012/morgan-allen"}, "edited": false, "score": 0, "creation_date": 1466634736, "post_id": 37979307, "comment_id": 63404451, "body": "unfortunately nothing is being written to the CSV file and I don&#39;t understand why"}, {"owner": {"reputation": 4349, "user_id": 2945815, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7rIjL.jpg?s=128&g=1", "display_name": "little_birdie", "link": "https://stackoverflow.com/users/2945815/little-birdie"}, "reply_to_user": {"reputation": 2727, "user_id": 986012, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/07059b53ad8cdae7f9955da84756b089?s=128&d=identicon&r=PG", "display_name": "Morgan Allen", "link": "https://stackoverflow.com/users/986012/morgan-allen"}, "edited": false, "score": 0, "creation_date": 1466636898, "post_id": 37979307, "comment_id": 63405097, "body": "I ran your code and it worked other than this issue.  However, I did close the file afterward.  Are you closing the file?"}], "tags": [], "owner": {"reputation": 4349, "user_id": 2945815, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7rIjL.jpg?s=128&g=1", "display_name": "little_birdie", "link": "https://stackoverflow.com/users/2945815/little-birdie"}, "is_accepted": false, "score": -1, "last_activity_date": 1466634649, "creation_date": 1466634649, "answer_id": 37979307, "question_id": 37979232, "link": "https://stackoverflow.com/questions/37979232/writing-to-csv-issue/37979307#37979307", "title": "Writing to CSV issue", "body": "<p>The <code>writerow</code> method expects a list of values.  You're giving it a string, which is iterable.. so you end up with <code>t, e, s, t</code> which is probably not what you want.  Make sure you are passing a list:</p>\n\n<pre><code>writer.writerow(['test'])\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2727, "user_id": 986012, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/07059b53ad8cdae7f9955da84756b089?s=128&d=identicon&r=PG", "display_name": "Morgan Allen", "link": "https://stackoverflow.com/users/986012/morgan-allen"}, "edited": false, "score": 0, "creation_date": 1466634979, "post_id": 37979315, "comment_id": 63404525, "body": "What is the difference between using &quot;with&quot; and not using it?"}, {"owner": {"reputation": 71409, "user_id": 3125566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QcWOt.jpg?s=128&g=1", "display_name": "Moses Koledoye", "link": "https://stackoverflow.com/users/3125566/moses-koledoye"}, "reply_to_user": {"reputation": 2727, "user_id": 986012, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/07059b53ad8cdae7f9955da84756b089?s=128&d=identicon&r=PG", "display_name": "Morgan Allen", "link": "https://stackoverflow.com/users/986012/morgan-allen"}, "edited": false, "score": 0, "creation_date": 1466635054, "post_id": 37979315, "comment_id": 63404545, "body": "Saves you the burden of calling <code>csv_file.close()</code>. Python does the closing and cleanup for you once the <code>with</code> context has expired."}], "tags": [], "owner": {"reputation": 71409, "user_id": 3125566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QcWOt.jpg?s=128&g=1", "display_name": "Moses Koledoye", "link": "https://stackoverflow.com/users/3125566/moses-koledoye"}, "is_accepted": true, "score": 1, "last_activity_date": 1466634730, "creation_date": 1466634730, "answer_id": 37979315, "question_id": 37979232, "link": "https://stackoverflow.com/questions/37979232/writing-to-csv-issue/37979315#37979315", "title": "Writing to CSV issue", "body": "<p>Call a <code>.close()</code> on the file object or open <code>with</code> a context manager:</p>\n\n<pre><code>with open('test_a.csv', 'wb') as csv_file:\n    writer = csv.writer(csv_file)\n    writer.writerow(['test'])\n</code></pre>\n"}], "owner": {"reputation": 2727, "user_id": 986012, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/07059b53ad8cdae7f9955da84756b089?s=128&d=identicon&r=PG", "display_name": "Morgan Allen", "link": "https://stackoverflow.com/users/986012/morgan-allen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 37979315, "answer_count": 2, "score": -3, "last_activity_date": 1466634730, "creation_date": 1466634223, "last_edit_date": 1466634517, "question_id": 37979232, "link": "https://stackoverflow.com/questions/37979232/writing-to-csv-issue", "title": "Writing to CSV issue", "body": "<p>I've done this 100 times, but for some reason I can't get this to work. What am I doing wrong?</p>\n\n<pre><code>csv_file = open('test_a.csv', 'wb')\nwriter = csv.writer(csv_file)\nwriter.writerow('test')\n</code></pre>\n\n<p>OR</p>\n\n<pre><code>csv_file = open('test_a.csv', 'wb')\nwriter = csv.writer(csv_file)\nwriter.writerows(['test'])\n</code></pre>\n\n<p>OR </p>\n\n<pre><code>csv_file = open('test_a.csv', 'a')\nwriter = csv.writer(csv_file)\nwriter.writerow('test')\n</code></pre>\n\n<p>The CSV file is created, but nothing gets written.</p>\n"}, {"tags": ["python", "csv", "delimiter", "python-3.5"], "comments": [{"owner": {"reputation": 2922, "user_id": 378826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0eed752c6937edcf8597e360c627582?s=128&d=identicon&r=PG", "display_name": "Dilettant", "link": "https://stackoverflow.com/users/378826/dilettant"}, "edited": false, "score": 2, "creation_date": 1466634230, "post_id": 37979192, "comment_id": 63404321, "body": "CSV and a field separator being used also as content without &quot;quoting&quot; - shiver, I suggest as fast hack, to first replace all &quot;good&quot; separtors with an out of band character (say pipe (|)) that does not appear else where in the file, than split on that one or let csv module parse it with a special dialect or autotdetect, and you are done. But maybe too late in the evening here ;-) or if from the right, always two commas are &quot;good&quot; parse from the right by simple <code>line.rsplit(&#39;,&#39;, 2)</code>or the like. +1 for @padraic-cunningham&#39;s answer"}, {"owner": {"reputation": 84731, "user_id": 510937, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/70b13a9ae1aae1ca1aa6ac8dab4643f2?s=128&d=identicon&r=PG", "display_name": "Bakuriu", "link": "https://stackoverflow.com/users/510937/bakuriu"}, "edited": false, "score": 1, "creation_date": 1466842142, "post_id": 37979192, "comment_id": 63493320, "body": "What you have is <b>not</b> a proper CSV file. Fix the file..."}, {"owner": {"reputation": 33, "user_id": 6501380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e93931409d19ab41e8e497c0b061f94?s=128&d=identicon&r=PG&f=1", "display_name": "Othman", "link": "https://stackoverflow.com/users/6501380/othman"}, "edited": false, "score": 0, "creation_date": 1467038753, "post_id": 37979192, "comment_id": 90252888, "body": "For those who are facing the same problem, you might also try the Pandas library, especially if Padraic&#39;s suggested solution doesn&#39;t work for you. It is very easy to use."}], "answers": [{"tags": [], "owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "is_accepted": true, "score": 2, "last_activity_date": 1466635624, "last_edit_date": 1466635624, "creation_date": 1466634322, "answer_id": 37979253, "question_id": 37979192, "link": "https://stackoverflow.com/questions/37979192/how-to-make-python-only-look-at-commas-with-no-space-before-or-after-as-delimite/37979253#37979253", "title": "How to make Python only look at commas with no space before or after as delimiters", "body": "<p>A regex may be your best bet:</p>\n\n<pre><code>import re\n\npatt = re.compile(r\"\\b,\\b\")\nwith open(\"in.csv\") as f:\n    for row in map(patt.split, f):\n        print(row)\n</code></pre>\n\n<p>Which would give you:</p>\n\n<pre><code>['Date', 'Name', 'City\\n']\n['May 30, 2016', 'Ryan', 'Boston']\n</code></pre>\n\n<p>You will have to take care of the trailing whitespace but that should not be a big issue. Obviously you would also run into issues if you had <code>\"foo,bar\"</code> as a name i.e but if not the re approach will be fine. </p>\n\n<p>Another option would be to maybe replace <code>\", \"</code> or <code>\" ,\"</code> with just a space:</p>\n\n<pre><code>import csv\nimport re\n\npatt = re.compile(r\"\\s(,)|(,)\\s\")\n\nwith open(\"in.csv\") as f:\n    for line in csv.reader(map(lambda s: patt.sub(\" \", s), f)):\n        print(line)\n</code></pre>\n\n<p>So for:</p>\n\n<pre><code>Date,Name,City\nMay 30, 2016,Ryan,Boston\nMay 31 ,2016,foo,Narnia\n</code></pre>\n\n<p>You would get:</p>\n\n<pre><code>['Date', 'Name', 'City']\n['May 30 2016', 'Ryan', 'Boston']\n['May 31 2016', 'foo', 'Narnia']\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 6501380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e93931409d19ab41e8e497c0b061f94?s=128&d=identicon&r=PG&f=1", "display_name": "Othman", "link": "https://stackoverflow.com/users/6501380/othman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 703, "favorite_count": 0, "accepted_answer_id": 37979253, "answer_count": 1, "score": 3, "last_activity_date": 1467038753, "creation_date": 1466633979, "last_edit_date": 1466840238, "question_id": 37979192, "link": "https://stackoverflow.com/questions/37979192/how-to-make-python-only-look-at-commas-with-no-space-before-or-after-as-delimite", "title": "How to make Python only look at commas with no space before or after as delimiters", "body": "<p>I have a csv file that I'm trying to read into python, manipulate, then write to another csv file.</p>\n\n<p>My current problem is that although the file is comma delimited, not all commas are delimiters. </p>\n\n<p>Only the commas that are <strong>NOT</strong> preceded and/or followed by a space should be counted as delimiters. (only \",\" not \" ,\" or \", \").</p>\n\n<p>Here's how my code looks like:</p>\n\n<pre><code>import csv\n\n#open file for reading\nwith open(mypath, 'r', encoding = 'utf_8') as csvfile:\n    myfile = list(csv.reader(csvfile, dialect = 'excel', delimiter = ','))\n    #specifying columns to be deleted\n    BadCols = [29,28,27,25,21,20,19,18,16,15,14,13,12,11,8,7,4,3] \n    #Loop through column indices to be deleted\n    for col in BadCols:        \n        #Loop through each row to delete columns\n        for i, row in enumerate(myfile):\n            #Delete Column, which is basically a list item at that row\n            myfile[i].pop(col)\n\n\n#Open file for writing\nwith open(mypath2, \"w\", encoding = 'utf_8', newline='') as csvfile:\n    csv_file = csv.writer(csvfile, dialect = 'excel', delimiter = ',')\n    for i, row in enumerate(myfile):\n        for j, col in enumerate(row):\n            csvfile.write('%s, ' %col)\n        csvfile.write('\\n')\ncsvfile.close\n</code></pre>\n\n<p>Here's how my data looks like:</p>\n\n<pre><code>Date,Name,City\nMay 30, 2016,Ryan,Boston\n</code></pre>\n\n<p>Here's what I'd like to see when I open the file using excel:</p>\n\n<pre><code>Date            Name    City\nMay 30, 2016    Ryan    Boston\n</code></pre>\n\n<p>Here's what I'm actually seeing from Excel:</p>\n\n<pre><code>Date     [Blank column name]    Name   City\nMay 30   2016                   Ryan   Boston\n</code></pre>\n\n<p>So, the date is read as two elements instead of one.</p>\n\n<p>Any help would be most appreciated.</p>\n"}, {"tags": ["python", "authentication", "coinbase-api"], "comments": [{"owner": {"reputation": 2420, "user_id": 2635931, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a7f4cb3ccf5ae4a25312f989064dbd05?s=128&d=identicon&r=PG", "display_name": "James", "link": "https://stackoverflow.com/users/2635931/james"}, "edited": false, "score": 0, "creation_date": 1466638568, "post_id": 37979170, "comment_id": 63405528, "body": "can you post the working version?"}, {"owner": {"reputation": 510, "user_id": 5913481, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d96dfd34408de6ab5ea728e212bfbd36?s=128&d=identicon&r=PG&f=1", "display_name": "Lamar", "link": "https://stackoverflow.com/users/5913481/lamar"}, "reply_to_user": {"reputation": 2420, "user_id": 2635931, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a7f4cb3ccf5ae4a25312f989064dbd05?s=128&d=identicon&r=PG", "display_name": "James", "link": "https://stackoverflow.com/users/2635931/james"}, "edited": false, "score": 0, "creation_date": 1466639261, "post_id": 37979170, "comment_id": 63405713, "body": "@James For sure. It works just fine as a small script as I have edited in."}, {"owner": {"reputation": 2420, "user_id": 2635931, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a7f4cb3ccf5ae4a25312f989064dbd05?s=128&d=identicon&r=PG", "display_name": "James", "link": "https://stackoverflow.com/users/2635931/james"}, "edited": false, "score": 0, "creation_date": 1466642894, "post_id": 37979170, "comment_id": 63406597, "body": "To reduce the chance of a scoping issue you caused, can we put the non working and working samples into the same file, pull all your variables into global constants, and use the same constants for both versions? See if you still get the same issues. If you do, update the code here cause that would definitively prove you are using the same authentication values."}, {"owner": {"reputation": 510, "user_id": 5913481, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d96dfd34408de6ab5ea728e212bfbd36?s=128&d=identicon&r=PG&f=1", "display_name": "Lamar", "link": "https://stackoverflow.com/users/5913481/lamar"}, "reply_to_user": {"reputation": 2420, "user_id": 2635931, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a7f4cb3ccf5ae4a25312f989064dbd05?s=128&d=identicon&r=PG", "display_name": "James", "link": "https://stackoverflow.com/users/2635931/james"}, "edited": false, "score": 0, "creation_date": 1466650502, "post_id": 37979170, "comment_id": 63408340, "body": "It worked when using the global variables for both. However, wont work when I access the values with of the object itself. ( i.e. self.CB_key ) Any suggestions?"}, {"owner": {"reputation": 2420, "user_id": 2635931, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a7f4cb3ccf5ae4a25312f989064dbd05?s=128&d=identicon&r=PG", "display_name": "James", "link": "https://stackoverflow.com/users/2635931/james"}, "edited": false, "score": 0, "creation_date": 1466651117, "post_id": 37979170, "comment_id": 63408478, "body": "lets see the new code."}, {"owner": {"reputation": 510, "user_id": 5913481, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d96dfd34408de6ab5ea728e212bfbd36?s=128&d=identicon&r=PG&f=1", "display_name": "Lamar", "link": "https://stackoverflow.com/users/5913481/lamar"}, "reply_to_user": {"reputation": 2420, "user_id": 2635931, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a7f4cb3ccf5ae4a25312f989064dbd05?s=128&d=identicon&r=PG", "display_name": "James", "link": "https://stackoverflow.com/users/2635931/james"}, "edited": false, "score": 0, "creation_date": 1466654744, "post_id": 37979170, "comment_id": 63409407, "body": "@James New code Posted"}], "answers": [{"comments": [{"owner": {"reputation": 510, "user_id": 5913481, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d96dfd34408de6ab5ea728e212bfbd36?s=128&d=identicon&r=PG&f=1", "display_name": "Lamar", "link": "https://stackoverflow.com/users/5913481/lamar"}, "edited": false, "score": 0, "creation_date": 1466648166, "post_id": 37980539, "comment_id": 63407778, "body": "This was an accident when writing up my code on the page. It actually is not the issue. Thanks for noticing though!"}], "tags": [], "owner": {"reputation": 2420, "user_id": 2635931, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a7f4cb3ccf5ae4a25312f989064dbd05?s=128&d=identicon&r=PG", "display_name": "James", "link": "https://stackoverflow.com/users/2635931/james"}, "is_accepted": false, "score": 0, "last_activity_date": 1466643477, "last_edit_date": 1466643477, "creation_date": 1466643054, "answer_id": 37980539, "question_id": 37979170, "link": "https://stackoverflow.com/questions/37979170/coinbase-wallet-api-python-authentication-error-invalid-signature/37980539#37980539", "title": "Coinbase Wallet API python Authentication Error, Invalid Signature", "body": "<p>after extensive static analysis, I have concluded this is probably your issue. </p>\n\n<pre><code>buy = api.buy('COIN-BS', 1) -&gt; buy = api.buy_c('COIN-BS', 1)\n</code></pre>\n\n<p>also figure out why your stack trace has <code>client.buy_c</code> instead of <code>client.buy</code></p>\n"}], "owner": {"reputation": 510, "user_id": 5913481, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d96dfd34408de6ab5ea728e212bfbd36?s=128&d=identicon&r=PG&f=1", "display_name": "Lamar", "link": "https://stackoverflow.com/users/5913481/lamar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 962, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1466657231, "creation_date": 1466633849, "last_edit_date": 1466657231, "question_id": 37979170, "link": "https://stackoverflow.com/questions/37979170/coinbase-wallet-api-python-authentication-error-invalid-signature", "title": "Coinbase Wallet API python Authentication Error, Invalid Signature", "body": "<p>Python 3.4 Coinbase Wallet API V2</p>\n\n<hr>\n\n<p>I have been stuck for some time trying to figure out while this buy call \n(and other api calls like get_payment_methods() and get_accounts() ) run into authentication errors. I have successfully been able to run some of these api calls alone in a separate file.</p>\n\n<hr>\n\n<p><strong>What Does Not Work</strong>:</p>\n\n<pre><code>class api_call(object):                                                                                                           \n\n      def __init__(self):                                                                                                           \n          self.CB_key = xxxxxxxx                                                                                                        \n          self.CB_secret = yyyyyyyy                                                                                                    \n          self.CB_account = zzzzzzzzz                                                                                                    \n          self.CB_payment_method = aaaaaaaaaa\n\n      def buy_c(self, exchange, b_amount):                                                                                \n          client = Client(self.CB_key, self.CB_secret)                                                                          \n          buy = client.buy(self.CB_account, amount=str(b_amount), currency=\"USD\", payment_method=self.CB_payment_method)\n\napi = api_call()\nbuy = api.buy('COIN-BS', 1)\n</code></pre>\n\n<p>I have triple checked my accounts, keys and secrets and have also tried hard coding them inside the class definition instead of using <strong>init</strong> members. </p>\n\n<hr>\n\n<p><strong>What Works:</strong></p>\n\n<pre><code> from coinbase.wallet.client import Client\n client = Client(&lt;api_key&gt;, &lt;api_secret&gt;)\n\n buy = client.buy('zzzzzzzz', amount='1', currency=\"USD\", payment_method='aaaaaaaaaa')\n</code></pre>\n\n<hr>\n\n<p>The error is as follows:</p>\n\n<pre><code>Traceback (most recent call last):\nFile \"api_call.py\", line 126, in &lt;module&gt;\n   buy = api.buy('COIN-BS', 1)\nFile \"api_call.py\", line 110, in buy\n   buy = client.buy_c( self.CB_account, amount=str(amount), currency=\"USD\", payment_method=\"XXXXXXXXXXXX\")\nFile \"/home/LA/.local/lib/python3.4/site-packages/coinbase/wallet/client.py\", line 381, in buy\n   response = self._post('v2', 'accounts', account_id, 'buys', data=params)\nFile \"/home/LA/.local/lib/python3.4/site-packages/coinbase/wallet/client.py\", line 132, in _post\n   return self._request('post', *args, **kwargs)\nFile \"/home/LA/.local/lib/python3.4/site-packages/coinbase/wallet/client.py\", line 116, in _request\n   return self._handle_response(response)\nFile \"/home/LA/.local/lib/python3.4/site-packages/coinbase/wallet/client.py\", line 125, in _handle_response\n   raise build_api_error(response)\n\ncoinbase.wallet.error.AuthenticationError: APIError(id=authentication_error): invalid signature\n</code></pre>\n\n<p>Im thinking that the problem may be due to the use of the API buy method inside of a definition of a class file, that is my api_call.py class.I think this because I can call the buy method ( and others ) just fine from separate files and even outside of the class indentations inside of api_call.py. </p>\n\n<hr>\n\n<p>Does anyone have any idea why this would raise an Authentication Error? I have looked around in <a href=\"https://github.com/coinbase/coinbase-python/blob/master/coinbase/wallet/error.py\" rel=\"nofollow\">error.py</a>, but haven't yet found a clue on why this might be happening. </p>\n\n<p>As always, any help or thoughts regarding the matter is much appreciated! </p>\n\n<hr>\n\n<p><strong>EDIT</strong></p>\n\n<p>After running the working and non working code on the same file, I was successfully able to make both buys. After trying a few other things, I found that apparently any POSTs to the API using those globally modified variables, command line arguments, and updated object member variables will produce this authentication error. Is this supposed to happen?</p>\n\n<pre><code>from coinbase.wallet.client import Client\n\n#Globals\nkey = 'xxxxxx'\nsecret = 'yyyyyy'\naccount = 'zzzzzzz'\npayment = 'aaaaaaa'\n\nclass api_call(object):                                                                                                           \n\n  def __init__(self):                                                                                                           \n      self.CB_key = None                                                                                                        \n      self.CB_secret = None                                                                                                    \n      self.CB_account = None                                                                                                    \n      self.CB_payment_method = None\n\n  def buy_c(self, exchange, b_amount):                                                                                \n      client = Client(key, secret)                                                                          \n      buy = client.buy(account, amount=str(b_amount), currency=\"USD\", payment_method=payment)\n\nclient = Client(key, secret)\nbuy = client.buy(account, amount='1', currency=\"USD\", payment_method=payment)\n\napi = api_call()\nbuy = api.buy_c('COIN-BS', 1)\n</code></pre>\n"}, {"tags": ["python", "pandas", "parallel-processing", "dask", "fuzzywuzzy"], "comments": [{"owner": {"reputation": 47893, "user_id": 616616, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/8749ec52cee260c4c1f67f2dec29d957?s=128&d=identicon&r=PG", "display_name": "MRocklin", "link": "https://stackoverflow.com/users/616616/mrocklin"}, "edited": false, "score": 1, "creation_date": 1466635173, "post_id": 37979167, "comment_id": 63404585, "body": "I notice you added the dask tag here.  Have you tried using dask already and run into an issue?"}, {"owner": {"reputation": 15196, "user_id": 1609428, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/TnnKE.jpg?s=128&g=1", "display_name": "\u2115\u0298\u0298\u1e06\u1e3d\u1e18", "link": "https://stackoverflow.com/users/1609428/%e2%84%95%ca%98%ca%98%e1%b8%86%e1%b8%bd%e1%b8%98"}, "reply_to_user": {"reputation": 47893, "user_id": 616616, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/8749ec52cee260c4c1f67f2dec29d957?s=128&d=identicon&r=PG", "display_name": "MRocklin", "link": "https://stackoverflow.com/users/616616/mrocklin"}, "edited": false, "score": 0, "creation_date": 1466635258, "post_id": 37979167, "comment_id": 63404611, "body": "thanks for your help! it seems dask only accepts regular functions"}, {"owner": {"reputation": 15196, "user_id": 1609428, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/TnnKE.jpg?s=128&g=1", "display_name": "\u2115\u0298\u0298\u1e06\u1e3d\u1e18", "link": "https://stackoverflow.com/users/1609428/%e2%84%95%ca%98%ca%98%e1%b8%86%e1%b8%bd%e1%b8%98"}, "reply_to_user": {"reputation": 47893, "user_id": 616616, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/8749ec52cee260c4c1f67f2dec29d957?s=128&d=identicon&r=PG", "display_name": "MRocklin", "link": "https://stackoverflow.com/users/616616/mrocklin"}, "edited": false, "score": 0, "creation_date": 1466635359, "post_id": 37979167, "comment_id": 63404635, "body": "also, I only have one computer so no distributed jobs across machines"}, {"owner": {"reputation": 47893, "user_id": 616616, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/8749ec52cee260c4c1f67f2dec29d957?s=128&d=identicon&r=PG", "display_name": "MRocklin", "link": "https://stackoverflow.com/users/616616/mrocklin"}, "edited": false, "score": 1, "creation_date": 1466635731, "post_id": 37979167, "comment_id": 63404754, "body": "Dask uses cloudpickle to serialize functions and so can easily handle lambdas and closures over other datasets."}, {"owner": {"reputation": 15196, "user_id": 1609428, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/TnnKE.jpg?s=128&g=1", "display_name": "\u2115\u0298\u0298\u1e06\u1e3d\u1e18", "link": "https://stackoverflow.com/users/1609428/%e2%84%95%ca%98%ca%98%e1%b8%86%e1%b8%bd%e1%b8%98"}, "reply_to_user": {"reputation": 47893, "user_id": 616616, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/8749ec52cee260c4c1f67f2dec29d957?s=128&d=identicon&r=PG", "display_name": "MRocklin", "link": "https://stackoverflow.com/users/616616/mrocklin"}, "edited": false, "score": 0, "creation_date": 1466635972, "post_id": 37979167, "comment_id": 63404809, "body": "then would you be able to write the simple code above in dask, as you suggest?"}, {"owner": {"reputation": 47893, "user_id": 616616, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/8749ec52cee260c4c1f67f2dec29d957?s=128&d=identicon&r=PG", "display_name": "MRocklin", "link": "https://stackoverflow.com/users/616616/mrocklin"}, "edited": false, "score": 1, "creation_date": 1466636090, "post_id": 37979167, "comment_id": 63404845, "body": "About the same, but I would use <code>assign</code> rather than column assignment and I would provide metadata to <code>apply</code> about the column you expect.  If you create a minimal reproducible example then it&#39;ll be easier to provide an explicit solution.  For example, something that I can copy-and-paste to just work on my local machine."}, {"owner": {"reputation": 15196, "user_id": 1609428, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/TnnKE.jpg?s=128&g=1", "display_name": "\u2115\u0298\u0298\u1e06\u1e3d\u1e18", "link": "https://stackoverflow.com/users/1609428/%e2%84%95%ca%98%ca%98%e1%b8%86%e1%b8%bd%e1%b8%98"}, "reply_to_user": {"reputation": 47893, "user_id": 616616, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/8749ec52cee260c4c1f67f2dec29d957?s=128&d=identicon&r=PG", "display_name": "MRocklin", "link": "https://stackoverflow.com/users/616616/mrocklin"}, "edited": false, "score": 0, "creation_date": 1466636139, "post_id": 37979167, "comment_id": 63404865, "body": "thats sounds good. i believe the code above is fully functional"}, {"owner": {"reputation": 47893, "user_id": 616616, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/8749ec52cee260c4c1f67f2dec29d957?s=128&d=identicon&r=PG", "display_name": "MRocklin", "link": "https://stackoverflow.com/users/616616/mrocklin"}, "reply_to_user": {"reputation": 15196, "user_id": 1609428, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/TnnKE.jpg?s=128&g=1", "display_name": "\u2115\u0298\u0298\u1e06\u1e3d\u1e18", "link": "https://stackoverflow.com/users/1609428/%e2%84%95%ca%98%ca%98%e1%b8%86%e1%b8%bd%e1%b8%98"}, "edited": false, "score": 1, "creation_date": 1466636232, "post_id": 37979167, "comment_id": 63404894, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/115351/discussion-between-mrocklin-and-noobie\">continue this discussion in chat</a>."}, {"owner": {"reputation": 15196, "user_id": 1609428, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/TnnKE.jpg?s=128&g=1", "display_name": "\u2115\u0298\u0298\u1e06\u1e3d\u1e18", "link": "https://stackoverflow.com/users/1609428/%e2%84%95%ca%98%ca%98%e1%b8%86%e1%b8%bd%e1%b8%98"}, "reply_to_user": {"reputation": 47893, "user_id": 616616, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/8749ec52cee260c4c1f67f2dec29d957?s=128&d=identicon&r=PG", "display_name": "MRocklin", "link": "https://stackoverflow.com/users/616616/mrocklin"}, "edited": false, "score": 0, "creation_date": 1466636421, "post_id": 37979167, "comment_id": 63404954, "body": "cannot use the chat right now unfortunately. please tell me whatever you need and i will do my very best! thanks for your help"}, {"owner": {"reputation": 15196, "user_id": 1609428, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/TnnKE.jpg?s=128&g=1", "display_name": "\u2115\u0298\u0298\u1e06\u1e3d\u1e18", "link": "https://stackoverflow.com/users/1609428/%e2%84%95%ca%98%ca%98%e1%b8%86%e1%b8%bd%e1%b8%98"}, "reply_to_user": {"reputation": 47893, "user_id": 616616, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/8749ec52cee260c4c1f67f2dec29d957?s=128&d=identicon&r=PG", "display_name": "MRocklin", "link": "https://stackoverflow.com/users/616616/mrocklin"}, "edited": false, "score": 0, "creation_date": 1466636591, "post_id": 37979167, "comment_id": 63405001, "body": "ok got it let me create a paste and go code for you"}, {"owner": {"reputation": 15196, "user_id": 1609428, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/TnnKE.jpg?s=128&g=1", "display_name": "\u2115\u0298\u0298\u1e06\u1e3d\u1e18", "link": "https://stackoverflow.com/users/1609428/%e2%84%95%ca%98%ca%98%e1%b8%86%e1%b8%bd%e1%b8%98"}, "reply_to_user": {"reputation": 47893, "user_id": 616616, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/8749ec52cee260c4c1f67f2dec29d957?s=128&d=identicon&r=PG", "display_name": "MRocklin", "link": "https://stackoverflow.com/users/616616/mrocklin"}, "edited": false, "score": 0, "creation_date": 1466637770, "post_id": 37979167, "comment_id": 63405326, "body": "hello @MRocklin, please see my updated answer. Thanks!!"}], "answers": [{"comments": [{"owner": {"reputation": 15196, "user_id": 1609428, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/TnnKE.jpg?s=128&g=1", "display_name": "\u2115\u0298\u0298\u1e06\u1e3d\u1e18", "link": "https://stackoverflow.com/users/1609428/%e2%84%95%ca%98%ca%98%e1%b8%86%e1%b8%bd%e1%b8%98"}, "edited": false, "score": 0, "creation_date": 1466638443, "post_id": 37979876, "comment_id": 63405497, "body": "genius! just a quick question: I have a 8 core xeon machine, will that work on it? I cannot use a distributed system as you suggest"}, {"owner": {"reputation": 47893, "user_id": 616616, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/8749ec52cee260c4c1f67f2dec29d957?s=128&d=identicon&r=PG", "display_name": "MRocklin", "link": "https://stackoverflow.com/users/616616/mrocklin"}, "reply_to_user": {"reputation": 15196, "user_id": 1609428, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/TnnKE.jpg?s=128&g=1", "display_name": "\u2115\u0298\u0298\u1e06\u1e3d\u1e18", "link": "https://stackoverflow.com/users/1609428/%e2%84%95%ca%98%ca%98%e1%b8%86%e1%b8%bd%e1%b8%98"}, "edited": false, "score": 1, "creation_date": 1466638989, "post_id": 37979876, "comment_id": 63405636, "body": "Multiprocessing will accelerate your computations but will slow down from inter-process data transfer.  There&#39;s no way for me to know if things will speed up or not without knowing way more about your problem than I really want to get into.  I recommend trying it out and profiling."}, {"owner": {"reputation": 15196, "user_id": 1609428, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/TnnKE.jpg?s=128&g=1", "display_name": "\u2115\u0298\u0298\u1e06\u1e3d\u1e18", "link": "https://stackoverflow.com/users/1609428/%e2%84%95%ca%98%ca%98%e1%b8%86%e1%b8%bd%e1%b8%98"}, "edited": false, "score": 0, "creation_date": 1466641011, "post_id": 37979876, "comment_id": 63406129, "body": "thanks @MRocklin ! I am sure many will find this post useful. I, myself, was still completely clueless about <code>dask</code> after skimming through <a href=\"http://dask.pydata.org/en/latest/install.html\" rel=\"nofollow noreferrer\">dask.pydata.org/en/latest/install.html</a>"}, {"owner": {"reputation": 15196, "user_id": 1609428, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/TnnKE.jpg?s=128&g=1", "display_name": "\u2115\u0298\u0298\u1e06\u1e3d\u1e18", "link": "https://stackoverflow.com/users/1609428/%e2%84%95%ca%98%ca%98%e1%b8%86%e1%b8%bd%e1%b8%98"}, "edited": false, "score": 0, "creation_date": 1466643640, "post_id": 37979876, "comment_id": 63406768, "body": "follow up if you still have 20 secs. should I play with <code>npartitions</code> as well?"}, {"owner": {"reputation": 15196, "user_id": 1609428, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/TnnKE.jpg?s=128&g=1", "display_name": "\u2115\u0298\u0298\u1e06\u1e3d\u1e18", "link": "https://stackoverflow.com/users/1609428/%e2%84%95%ca%98%ca%98%e1%b8%86%e1%b8%bd%e1%b8%98"}, "edited": false, "score": 0, "creation_date": 1466647777, "post_id": 37979876, "comment_id": 63407709, "body": "I have a lot of RAM (128GB), so should I use many npartitions?"}, {"owner": {"reputation": 15196, "user_id": 1609428, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/TnnKE.jpg?s=128&g=1", "display_name": "\u2115\u0298\u0298\u1e06\u1e3d\u1e18", "link": "https://stackoverflow.com/users/1609428/%e2%84%95%ca%98%ca%98%e1%b8%86%e1%b8%bd%e1%b8%98"}, "edited": false, "score": 0, "creation_date": 1467380673, "post_id": 37979876, "comment_id": 63723633, "body": "sorry for the follow up, but maybe you can give me a hint? I see now a lot of processes running for quite a long time, but the CPU usage remains very low with some spikes at 2% - 5% every few seconds or so. Is this expected? Thank you again for your time"}], "tags": [], "owner": {"reputation": 47893, "user_id": 616616, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/8749ec52cee260c4c1f67f2dec29d957?s=128&d=identicon&r=PG", "display_name": "MRocklin", "link": "https://stackoverflow.com/users/616616/mrocklin"}, "is_accepted": true, "score": 33, "last_activity_date": 1521558187, "last_edit_date": 1521558187, "creation_date": 1466638231, "answer_id": 37979876, "question_id": 37979167, "link": "https://stackoverflow.com/questions/37979167/how-to-parallelize-many-fuzzy-string-comparisons-using-apply-in-pandas/37979876#37979876", "title": "how to parallelize many (fuzzy) string comparisons using apply in Pandas?", "body": "<p>You can parallelize this with Dask.dataframe.  </p>\n\n<pre><code>&gt;&gt;&gt; dmaster = dd.from_pandas(master, npartitions=4)\n&gt;&gt;&gt; dmaster['my_value'] = dmaster.original.apply(lambda x: helper(x, slave), name='my_value'))\n&gt;&gt;&gt; dmaster.compute()\n                  original  my_value\n0  this is a nice sentence         2\n1      this is another one         3\n2    stackoverflow is nice         1\n</code></pre>\n\n<p>Additionally, you should think about the tradeoffs between using threads vs processes here.  Your fuzzy string matching almost certainly doesn't release the GIL, so you won't get any benefit from using multiple threads.  However, using processes will cause data to serialize and move around your machine, which might slow things down a bit.  </p>\n\n<p>You can experiment between using threads and processes or a distributed system by managing the <code>get=</code> keyword argument to the <code>compute()</code> method.</p>\n\n<pre><code>import dask.multiprocessing\nimport dask.threaded\n\n&gt;&gt;&gt; dmaster.compute(get=dask.threaded.get)  # this is default for dask.dataframe\n&gt;&gt;&gt; dmaster.compute(get=dask.multiprocessing.get)  # try processes instead\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 607, "user_id": 3433625, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QEo7m.png?s=128&g=1", "display_name": "shellcat_zero", "link": "https://stackoverflow.com/users/3433625/shellcat-zero"}, "is_accepted": false, "score": 3, "last_activity_date": 1522889267, "creation_date": 1522889267, "answer_id": 49662511, "question_id": 37979167, "link": "https://stackoverflow.com/questions/37979167/how-to-parallelize-many-fuzzy-string-comparisons-using-apply-in-pandas/49662511#49662511", "title": "how to parallelize many (fuzzy) string comparisons using apply in Pandas?", "body": "<p>I'm working on something similar and I wanted to provide a more complete working solution for anyone else you might stumble upon this question. @MRocklin unfortunately has some syntax errors in the code snippets provided. I am no expert with Dask, so I can't comment on some performance considerations, but this should accomplish your task just as @MRocklin has suggested.  This is using <strong>Dask version 0.17.2</strong> and <strong>Pandas version 0.22.0</strong>:</p>\n\n<pre><code>import dask.dataframe as dd\nimport dask.multiprocessing\nimport dask.threaded\nfrom fuzzywuzzy import fuzz\nimport pandas as pd\n\nmaster= pd.DataFrame({'original':['this is a nice sentence',\n'this is another one',\n'stackoverflow is nice']})\n\nslave= pd.DataFrame({'name':['hello world',\n'congratulations',\n'this is a nice sentence ',\n'this is another one',\n'stackoverflow is nice'],'my_value': [1,2,3,4,5]})\n\ndef fuzzy_score(str1, str2):\n    return fuzz.token_set_ratio(str1, str2)\n\ndef helper(orig_string, slave_df):\n    slave_df['score'] = slave_df.name.apply(lambda x: fuzzy_score(x,orig_string))\n    #return my_value corresponding to the highest score\n    return slave_df.loc[slave_df.score.idxmax(),'my_value']\n\ndmaster = dd.from_pandas(master, npartitions=4)\ndmaster['my_value'] = dmaster.original.apply(lambda x: helper(x, slave),meta=('x','f8'))\n</code></pre>\n\n<p>Then, obtain your results (like in this interpreter session):</p>\n\n<pre><code>In [6]: dmaster.compute(get=dask.multiprocessing.get)                                             \nOut[6]:                                          \n                  original  my_value             \n0  this is a nice sentence         3             \n1      this is another one         4             \n2    stackoverflow is nice         5    \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6101, "user_id": 2573069, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/eb2b483ce40a13f95468dcb3cb8e09bc?s=128&d=identicon&r=PG&f=1", "display_name": "Union find", "link": "https://stackoverflow.com/users/2573069/union-find"}, "is_accepted": false, "score": 2, "last_activity_date": 1614369537, "last_edit_date": 1614369537, "creation_date": 1572471115, "answer_id": 58633927, "question_id": 37979167, "link": "https://stackoverflow.com/questions/37979167/how-to-parallelize-many-fuzzy-string-comparisons-using-apply-in-pandas/58633927#58633927", "title": "how to parallelize many (fuzzy) string comparisons using apply in Pandas?", "body": "<p>These answers are based on an older API. Some newer code:</p>\n<pre><code>dmaster = dd.from_pandas(master, npartitions=4)\ndmaster['my_value'] = dmaster.original.apply(lambda x: helper(x, slave),meta=('x','f8'))\ndmaster.compute(scheduler='processes') \n</code></pre>\n<p>Personally I'd ditch that apply call to fuzzy_score in the helper function and just perform the operation there.</p>\n<p>You can alter the scheduler using <a href=\"https://docs.dask.org/en/latest/scheduler-overview.html\" rel=\"nofollow noreferrer\">these tips</a>.</p>\n"}], "owner": {"reputation": 15196, "user_id": 1609428, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/TnnKE.jpg?s=128&g=1", "display_name": "\u2115\u0298\u0298\u1e06\u1e3d\u1e18", "link": "https://stackoverflow.com/users/1609428/%e2%84%95%ca%98%ca%98%e1%b8%86%e1%b8%bd%e1%b8%98"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9178, "favorite_count": 19, "accepted_answer_id": 37979876, "answer_count": 3, "score": 24, "last_activity_date": 1614369537, "creation_date": 1466633838, "last_edit_date": 1525190719, "question_id": 37979167, "link": "https://stackoverflow.com/questions/37979167/how-to-parallelize-many-fuzzy-string-comparisons-using-apply-in-pandas", "title": "how to parallelize many (fuzzy) string comparisons using apply in Pandas?", "body": "<p>I have the following problem</p>\n\n<p>I have a dataframe <strong>master</strong> that contains sentences, such as</p>\n\n<pre><code>master\nOut[8]: \n                  original\n0  this is a nice sentence\n1      this is another one\n2    stackoverflow is nice\n</code></pre>\n\n<p>For every row in Master, I lookup into another Dataframe <strong>slave</strong> for the best match using <code>fuzzywuzzy</code>. I use fuzzywuzzy because the matched sentences between the two dataframes could differ a bit (extra characters, etc).</p>\n\n<p>For instance, <strong>slave</strong> could be</p>\n\n<pre><code>slave\nOut[10]: \n   my_value                      name\n0         2               hello world\n1         1           congratulations\n2         2  this is a nice sentence \n3         3       this is another one\n4         1     stackoverflow is nice\n</code></pre>\n\n<p>Here is a fully-functional, wonderful, compact working example :)</p>\n\n<pre><code>from fuzzywuzzy import fuzz\nimport pandas as pd\nimport numpy as np\nimport difflib\n\n\nmaster= pd.DataFrame({'original':['this is a nice sentence',\n'this is another one',\n'stackoverflow is nice']})\n\n\nslave= pd.DataFrame({'name':['hello world',\n'congratulations',\n'this is a nice sentence ',\n'this is another one',\n'stackoverflow is nice'],'my_value': [2,1,2,3,1]})\n\ndef fuzzy_score(str1, str2):\n    return fuzz.token_set_ratio(str1, str2)\n\ndef helper(orig_string, slave_df):\n    #use fuzzywuzzy to see how close original and name are\n    slave_df['score'] = slave_df.name.apply(lambda x: fuzzy_score(x,orig_string))\n    #return my_value corresponding to the highest score\n    return slave_df.ix[slave_df.score.idxmax(),'my_value']\n\nmaster['my_value'] = master.original.apply(lambda x: helper(x,slave))\n</code></pre>\n\n<p><strong>The 1 million dollars question is: can I parallelize my apply code above?</strong> </p>\n\n<p>After all, every row in <code>master</code> is compared to all the rows in <code>slave</code> (slave is a small dataset and I can hold many copies of the data into the RAM). </p>\n\n<p>I dont see why I could not run multiple comparisons (i.e. process multiple rows at the same time). </p>\n\n<p>Problem: I dont know how to do that or if thats even possible.</p>\n\n<p>Any help greatly appreciated!</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 941, "user_id": 6461192, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/9591f4de71c76a92ca769e20bc9282b5?s=128&d=identicon&r=PG&f=1", "display_name": "ComplexData", "link": "https://stackoverflow.com/users/6461192/complexdata"}, "edited": false, "score": 0, "creation_date": 1466634748, "post_id": 37979248, "comment_id": 63404458, "body": "No it still doesn&#39;t include rows with NaN values for either/both company_names"}, {"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "reply_to_user": {"reputation": 941, "user_id": 6461192, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/9591f4de71c76a92ca769e20bc9282b5?s=128&d=identicon&r=PG&f=1", "display_name": "ComplexData", "link": "https://stackoverflow.com/users/6461192/complexdata"}, "edited": false, "score": 0, "creation_date": 1466634866, "post_id": 37979248, "comment_id": 63404496, "body": "@user6461192, can you provide a sample data set, which can be used in order to reproduce your problem?"}, {"owner": {"reputation": 941, "user_id": 6461192, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/9591f4de71c76a92ca769e20bc9282b5?s=128&d=identicon&r=PG&f=1", "display_name": "ComplexData", "link": "https://stackoverflow.com/users/6461192/complexdata"}, "edited": false, "score": 0, "creation_date": 1466634941, "post_id": 37979248, "comment_id": 63404513, "body": "It works! Just a small change - Result1=Result[(Result.company_name1==Result.company_name2) | \\                (pd.isnull(Result.company_name1) | pd.isnull(Result.company_name2))]"}, {"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "reply_to_user": {"reputation": 941, "user_id": 6461192, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/9591f4de71c76a92ca769e20bc9282b5?s=128&d=identicon&r=PG&f=1", "display_name": "ComplexData", "link": "https://stackoverflow.com/users/6461192/complexdata"}, "edited": false, "score": 0, "creation_date": 1466635057, "post_id": 37979248, "comment_id": 63404547, "body": "@user6461192, i thought you want to have only those which have NaN&#39;s on <b>both</b> sides... Oh, i see now - <i>where <b>either</b> company_name1 or company_name2 is NaN</i>"}, {"owner": {"reputation": 941, "user_id": 6461192, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/9591f4de71c76a92ca769e20bc9282b5?s=128&d=identicon&r=PG&f=1", "display_name": "ComplexData", "link": "https://stackoverflow.com/users/6461192/complexdata"}, "edited": false, "score": 0, "creation_date": 1466635110, "post_id": 37979248, "comment_id": 63404561, "body": "Done. Thanks anyways."}], "tags": [], "owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "is_accepted": true, "score": 0, "last_activity_date": 1466635147, "last_edit_date": 1466635147, "creation_date": 1466634299, "answer_id": 37979248, "question_id": 37979138, "link": "https://stackoverflow.com/questions/37979138/display-merged-values-using-a-condition-while-including-nan-values/37979248#37979248", "title": "Display merged values using a condition, while including NaN values", "body": "<p>try this:</p>\n\n<pre><code>Result1=Result[(Result.company_name1==Result.company_name2) | \\\n               (pd.isnull(Result.company_name1) | pd.isnull(Result.company_name2))]\n</code></pre>\n"}], "owner": {"reputation": 941, "user_id": 6461192, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/9591f4de71c76a92ca769e20bc9282b5?s=128&d=identicon&r=PG&f=1", "display_name": "ComplexData", "link": "https://stackoverflow.com/users/6461192/complexdata"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "accepted_answer_id": 37979248, "answer_count": 1, "score": 0, "last_activity_date": 1466638968, "creation_date": 1466633672, "last_edit_date": 1466638968, "question_id": 37979138, "link": "https://stackoverflow.com/questions/37979138/display-merged-values-using-a-condition-while-including-nan-values", "title": "Display merged values using a condition, while including NaN values", "body": "<p>I have a resultant dataset (called Result) after merging two datasets. I want to display only those rows from Result where company_name1 is equal to company_name2. The output is stored in Result1.This can be done as follows:</p>\n\n<ul>\n<li>Result1=Result[Result.company_name1==Result.company_name2] </li>\n</ul>\n\n<p>The above statement works fine. The problem is - </p>\n\n<p>There are few rows in Result where either company_name1 or company_name2 is NaN, and those rows won't become part of Result1. My requirement is to over pass the condition in all such cases and also include those rows in Result1. \nHow do I incorporate that condition?</p>\n"}, {"tags": ["python", "dataframe"], "owner": {"reputation": 2882, "user_id": 4995876, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/3e3ef09fd46fd8c29fd94e661e2f4327?s=128&d=identicon&r=PG&f=1", "display_name": "helloB", "link": "https://stackoverflow.com/users/4995876/hellob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 237, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1466690600, "creation_date": 1466633648, "last_edit_date": 1592644375, "question_id": 37979134, "link": "https://stackoverflow.com/questions/37979134/strange-output-from-pandas-plotting-along-with-userwarning", "title": "Strange output from pandas plotting along with UserWarning", "body": "<p>I'm getting this warning:</p>\n<pre><code>UserWarning: Attempting to set identical left==right results\nin singular transformations; automatically expanding.\n</code></pre>\n<p>and this nonsensical graph:</p>\n<p><a href=\"https://i.stack.imgur.com/VN3Fe.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VN3Fe.png\" alt=\"graph\" /></a></p>\n<p>when I run the following code:</p>\n<pre><code>corr.plot(x = 'count', y = 'mean')\n</code></pre>\n<p>on a dataframe that looks like this:</p>\n<p><a href=\"https://i.stack.imgur.com/qcJfU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qcJfU.png\" alt=\"data frame\" /></a></p>\n<p>There's clearly at least some variation in each column, so why the degenerate plot?</p>\n"}, {"tags": ["python", "regex"], "comments": [{"owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1466633727, "post_id": 37979131, "comment_id": 63404150, "body": "#1 makes perfect sense."}, {"owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1466634001, "post_id": 37979131, "comment_id": 63404239, "body": "It is up to you, just do not remove your questions often. I&#39;d keep it."}, {"owner": {"reputation": 4929, "user_id": 1536499, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/89e526614489231084932e87399ef9d3?s=128&d=identicon&r=PG", "display_name": "anthonybell", "link": "https://stackoverflow.com/users/1536499/anthonybell"}, "reply_to_user": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1466634180, "post_id": 37979131, "comment_id": 63404301, "body": "I am noticing the solution to that question does not solve my problem since <code>re.findall(r&quot;(?:\\b|\\s+)(&lt;\\w+&gt;)(?:\\b|\\s+)&quot;, &quot;&lt;D&gt; &lt;E&gt; &lt;F&gt;&quot;)</code> prints <code>[&#39;&lt;E&gt;&#39;]</code>.  If I try to use look-ahead/look-behind I get an error: &quot;look-behind requires fixed-width pattern&quot;"}, {"owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1466634271, "post_id": 37979131, "comment_id": 63404330, "body": "Right now, I do not see that problem clearly stated in the question. Could you please narrow it down to this specific issue? Perhaps, you mean the <i>How can I match a work with angle brackets with word boundries enforced?</i> question at the end... Anyway, I believe you need to replace <code>\\b...\\b</code> with <code>(?&lt;!\\w)....(?!\\w)</code> to use unambiguous word boundaries."}, {"owner": {"reputation": 4929, "user_id": 1536499, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/89e526614489231084932e87399ef9d3?s=128&d=identicon&r=PG", "display_name": "anthonybell", "link": "https://stackoverflow.com/users/1536499/anthonybell"}, "reply_to_user": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1466634605, "post_id": 37979131, "comment_id": 63404423, "body": "updated to include a concise question: why does this work <code>\\b(z&lt;WORD&gt;z)\\b</code> but not this: <code>\\b(&lt;WORD&gt;)\\b</code>."}, {"owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1466634955, "post_id": 37979131, "comment_id": 63404519, "body": "Actually, it is still a duplicate because you just ask for an explanation of why <code>\\b&lt;</code> does not match in <code>&quot;&lt;A&gt; B &lt;C&gt;&quot;</code> (answer: because none of the <code>&lt;</code> are preceded with a &quot;word&quot; char). Study <a href=\"http://stackoverflow.com/questions/1324676/what-is-a-word-boundary-in-regexes\"><i>What is a word boundary in regexes?</i></a>. And as I say, try <code>r&#39;(?&lt;!\\w)&lt;\\w+&gt;(?!\\w)&#39;</code> or define what word boundary you need (define it for this task)."}], "owner": {"reputation": 4929, "user_id": 1536499, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/89e526614489231084932e87399ef9d3?s=128&d=identicon&r=PG", "display_name": "anthonybell", "link": "https://stackoverflow.com/users/1536499/anthonybell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 25, "favorite_count": 0, "closed_date": 1466633804, "answer_count": 0, "score": 0, "last_activity_date": 1466634560, "creation_date": 1466633644, "last_edit_date": 1466634560, "question_id": 37979131, "link": "https://stackoverflow.com/questions/37979131/python-regex-strange-behavior-for-word-boundary", "closed_reason": "Duplicate", "title": "python regex - strange behavior for word boundary", "body": "<p>How can I capture a word wrapped in square brackets using word bounderies like this: <code>\\b&lt;WORD-IN-ANGLE-BRACKETS&gt;\\b</code>.  There appears to be some kind of bug that if a square bracket is touching a word boundry it doesn't match.</p>\n\n<p>Look at this example:</p>\n\n<pre><code>re.findall(r\"\\b(&lt;\\w+&gt;)\\b\", \"&lt;A&gt; B &lt;C&gt;\")  # 1. output: []\nre.findall(r\"(&lt;\\w+&gt;)\", \"&lt;D&gt; E &lt;F&gt;\")      # 2. output: ['&lt;D&gt;', '&lt;F&gt;']\nre.findall(r\"\\b(\\w+)\\b\", \"G H I\")        # 3. output: ['G', 'H', 'I']\nre.findall(r\"\\b(z&lt;\\w+&gt;z)\\b\", \"z&lt;D&gt;z z&lt;E&gt;z z&lt;F&gt;z\") #4. output: ['z&lt;D&gt;z', 'z&lt;E&gt;z', 'z&lt;F&gt;z']\n</code></pre>\n\n<p>As you can see in #4, if I put something between the square bracket and the word boundry it works, so this only happens when they are touching.</p>\n\n<p>What is going on here?  Why doesn't #1 work but #4 works?  How can I make #1 work?</p>\n"}, {"tags": ["python", "ubuntu", "flask", "gtk3", "python-multithreading"], "answers": [{"tags": [], "owner": {"reputation": 545, "user_id": 576138, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9fd87ec778a973d194c0fabd92c67830?s=128&d=identicon&r=PG", "display_name": "okelet", "link": "https://stackoverflow.com/users/576138/okelet"}, "is_accepted": true, "score": 1, "last_activity_date": 1466789564, "creation_date": 1466789564, "answer_id": 38019104, "question_id": 37979079, "link": "https://stackoverflow.com/questions/37979079/update-gtk-menu-from-web-flask-app/38019104#38019104", "title": "Update GTK menu from Web Flask App", "body": "<p>Solved, it was all about the module <code>multiprocessing.Process</code>. Replaced with <code>threading.Thread</code> and everything works fine now.</p>\n"}], "owner": {"reputation": 545, "user_id": 576138, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9fd87ec778a973d194c0fabd92c67830?s=128&d=identicon&r=PG", "display_name": "okelet", "link": "https://stackoverflow.com/users/576138/okelet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 225, "favorite_count": 1, "accepted_answer_id": 38019104, "answer_count": 1, "score": 2, "last_activity_date": 1466789564, "creation_date": 1466633299, "question_id": 37979079, "link": "https://stackoverflow.com/questions/37979079/update-gtk-menu-from-web-flask-app", "title": "Update GTK menu from Web Flask App", "body": "<p>I am trying to create an Ubuntu indicator, that launches a Flask app in a separate thread (using <code>multiprocessing.Process</code>), and from an action in the Flask app, add an item to the indicator menu  (in this simplified code, just when the root page is loaded, a menu item with the current datetime should be created). The problem is that altough there are no errors, the menu is not created. I am using <code>GLib.idle_add</code> as recommended in other places without success. This is the code:</p>\n\n<pre><code>#!/usr/bin/env python\n# -*- coding: UTF-8 -*-\n\nimport argparse\nfrom datetime import datetime\nfrom flask import Flask\nfrom multiprocessing import Process\nimport signal\n\nimport gi\ngi.require_version('Gtk', '3.0')\ngi.require_version('AppIndicator3', '0.1')\nfrom gi.repository import Gtk, GLib, AppIndicator3\n\n\nAPP_ID = \"test\"\nAPP_ICON = \"test\"\n\nclass GtkFlaskIndicatorTest(object):\n\n    def __init__(self, debug):\n\n        self.indicator = AppIndicator3.Indicator.new(APP_ID, APP_ICON, AppIndicator3.IndicatorCategory.APPLICATION_STATUS)\n        self.indicator.set_status(AppIndicator3.IndicatorStatus.ACTIVE)\n\n        GLib.threads_init()\n\n        self.app = GtkFlaskApp(self, debug)\n        self.app.start_app()\n\n        self.menu = None\n        self.quit_menu_item = None\n        self.build_menu()\n\n        Gtk.main()\n\n    def build_menu(self):\n\n        self.menu = Gtk.Menu()\n\n        self.quit_menu_item = Gtk.MenuItem(u\"Quit\")\n        self.quit_menu_item.connect('activate', self.quit)\n        self.menu.append(self.quit_menu_item)\n\n        self.menu.show_all()\n        self.indicator.set_menu(self.menu)\n\n    def add_menu_item(self, text):\n        print \"add_menu_item: \" + text\n        GLib.idle_add(self.add_menu_item_cb, text)\n\n    def add_menu_item_cb(self, text):\n        print \"add_menu_item_cb: \" + text\n        item = Gtk.MenuItem(text)\n        self.menu.append(item)\n        self.menu.show_all()\n\n    def quit_control_c(self, signal, frame):\n        self.quit(None)\n\n    def quit(self, source):\n        self.app.stop_app()\n        Gtk.main_quit()\n\n\nclass GtkFlaskApp(object):\n\n    def __init__(self, indicator, debug):\n        self.indicator = indicator\n        self.debug = debug\n        self.app = Flask(\"GtkFlaskFlaskApp\")\n        self.app.add_url_rule('/', 'test', self.test)\n\n    def test(self):\n        text = str(datetime.now())\n        self.indicator.add_menu_item(text)\n        return text\n\n    def start_app(self):\n        self.app_server = Process(target=self.start_app_thread)\n        self.app_server.start()\n\n    def start_app_thread(self):\n        self.app.run(port=8888, debug=self.debug, use_reloader=False)\n\n\nif __name__ == \"__main__\":\n\n    signal.signal(signal.SIGINT, signal.SIG_DFL)\n\n    parser = argparse.ArgumentParser()\n    parser.add_argument('--debug', action='store_true')\n    args = parser.parse_args()\n\n    GtkFlaskIndicatorTest(args.debug)\n</code></pre>\n"}, {"tags": ["python", "list", "tensorflow"], "answers": [{"tags": [], "owner": {"reputation": 25824, "user_id": 5098368, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73fd0f3587eec2e8ac9e13726a84e11e?s=128&d=identicon&r=PG&f=1", "display_name": "Olivier Moindrot", "link": "https://stackoverflow.com/users/5098368/olivier-moindrot"}, "is_accepted": true, "score": 0, "last_activity_date": 1466698157, "creation_date": 1466698157, "answer_id": 37996755, "question_id": 37979037, "link": "https://stackoverflow.com/questions/37979037/tensorflow-mlp-unhashable-type-list/37996755#37996755", "title": "TensorFlow MLP unhashable type &#39;list&#39;", "body": "<p>I suppose you had at the beginning of your code two placeholder <code>x</code> and <code>y</code>:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>x = tf.placeholder(tf.float32)\ny = tf.placeholder(tf.float32)\n</code></pre>\n\n<hr>\n\n<p>The issue is that in your code, you use again the same name <code>x</code> and <code>y</code> for two variables:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>for x in letter[0][0]:\n    for y in x:\n        result.append(y)\n</code></pre>\n\n<p>This will erase the previous value of <code>x</code> and <code>y</code>.<br>\nInstead, you should use other names like:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>for ix in letter[0][0]:\n    for iy in ix:\n        result.append(iy)\n</code></pre>\n"}], "owner": {"reputation": 1707, "user_id": 3799743, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/AqPGw.jpg?s=128&g=1", "display_name": "BernardoGO", "link": "https://stackoverflow.com/users/3799743/bernardogo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2520, "favorite_count": 0, "accepted_answer_id": 37996755, "answer_count": 1, "score": 0, "last_activity_date": 1466698157, "creation_date": 1466633064, "last_edit_date": 1466641482, "question_id": 37979037, "link": "https://stackoverflow.com/questions/37979037/tensorflow-mlp-unhashable-type-list", "title": "TensorFlow MLP unhashable type &#39;list&#39;", "body": "<p>I'm trying to feed a MLP with an array. The input array contains 120 floats and the output contains 2.</p>\n\n<pre><code>sess.run(init)\n# Training cycle\ntrain = True\nif train is True:\n    for i in range(50):\n        for letter in d1:\n            #print(letter[0][0][0:5])\n            letter[0][0][0:5] = sorted(letter[0][0][0:5], key=itemgetter(0))\n            letter[0][0][5:10] = sorted(letter[0][0][5:10], key=itemgetter(0))\n            #print(np.squeeze(np.asarray(d1[0])))\n            result=[]\n            for x in letter[0][0]:\n                for y in x:\n                    result.append(y)\n            div = (result)\n\n            xxx = [letter[0][1][0], int(not letter[0][1][0])]\n            xxx = (xxx)\n            print(result)\n\n            #print(letter[1])\n            _, c = sess.run([optimizer, cost], feed_dict={x: div, y: xxx})\n</code></pre>\n\n<p>When executing the last line it throws the exception:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"tf.py\", line 97, in &lt;module&gt;\n    _, c = sess.run([optimizer, cost], feed_dict={x: div, y: xxx})\nTypeError: unhashable type: 'list'\n</code></pre>\n"}, {"tags": ["python", "pandas", "pivot-table"], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 6490054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6300682ebb127cb47349c0165c1943cd?s=128&d=identicon&r=PG&f=1", "display_name": "Neri0x", "link": "https://stackoverflow.com/users/6490054/neri0x"}, "edited": false, "score": 0, "creation_date": 1466633387, "post_id": 37978952, "comment_id": 63404046, "body": "can i do the same thing using a pivot table?"}], "tags": [], "owner": {"reputation": 142796, "user_id": 42346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZikEw.jpg?s=128&g=1", "display_name": "mechanical_meat", "link": "https://stackoverflow.com/users/42346/mechanical-meat"}, "is_accepted": true, "score": 0, "last_activity_date": 1466634555, "last_edit_date": 1466634555, "creation_date": 1466632637, "answer_id": 37978952, "question_id": 37978891, "link": "https://stackoverflow.com/questions/37978891/finding-annual-averages-using-pandas-in-python/37978952#37978952", "title": "finding annual averages using pandas in python", "body": "<pre><code>&gt;&gt;&gt; df.reset_index().groupby(['unit','year'])['SURQ'].mean()\nunit   year\n10001  2012    89\n       2013    75\n       2014    36\n10002  2012    83\n       2013    69\n       2014    59\n10003  2012    88\n       2013    59\n       2014    84\nName: SURQ, dtype: int64\n</code></pre>\n\n<p>Or with a pivot table:</p>\n\n<pre><code>&gt;&gt;&gt; pd.pivot_table(df.reset_index(),columns=['unit','year'],aggfunc=np.mean)\n      unit   year\nSURQ  10001  2012    89\n             2013    75\n             2014    36\n      10002  2012    83\n             2013    69\n             2014    59\n      10003  2012    88\n             2013    59\n             2014    84\ndtype: int64\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "is_accepted": false, "score": 0, "last_activity_date": 1466634597, "creation_date": 1466634597, "answer_id": 37979299, "question_id": 37978891, "link": "https://stackoverflow.com/questions/37978891/finding-annual-averages-using-pandas-in-python/37979299#37979299", "title": "finding annual averages using pandas in python", "body": "<p>if you want to do it using <code>pivot_table()</code>:</p>\n\n<pre><code>In [169]: x.pivot_table(index=[x.index,'year'], values='SURQ').reset_index()\nOut[169]:\n    unit  year  SURQ\n0  10001  2012    89\n1  10001  2013    75\n2  10001  2014    36\n3  10002  2012    83\n4  10002  2013    69\n5  10002  2014    59\n6  10003  2012    88\n7  10003  2013    59\n8  10003  2014    84\n</code></pre>\n\n<p>PS but i think using <code>groupby()</code> will be faster and will require less memory</p>\n\n<p>Data:</p>\n\n<pre><code>In [168]: x\nOut[168]:\n       year  SURQ\nunit\n10001  2012    89\n10002  2012    83\n10003  2012    88\n10001  2013    75\n10002  2013    69\n10003  2013    59\n10001  2014    36\n10002  2014    59\n10003  2014    84\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 6490054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6300682ebb127cb47349c0165c1943cd?s=128&d=identicon&r=PG&f=1", "display_name": "Neri0x", "link": "https://stackoverflow.com/users/6490054/neri0x"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 37978952, "answer_count": 2, "score": 1, "last_activity_date": 1466634597, "creation_date": 1466632306, "question_id": 37978891, "link": "https://stackoverflow.com/questions/37978891/finding-annual-averages-using-pandas-in-python", "title": "finding annual averages using pandas in python", "body": "<p>my data looks like this</p>\n\n<pre><code>unit  year   SURQ\n10001  2012   89\n10002  2012   83\n10003  2012   88\n10001  2013   75\n10002  2013   69\n10003  2013   59 \n10001  2014   36\n10002  2014   59\n10003  2014   84\n</code></pre>\n\n<p>I want to find the annual average values for SURQ by unit. For example average SURQ in 2012 for unit 10001 = ???</p>\n\n<p>I tried using pivot tables </p>\n\n<pre><code>avgSURQ = pd.pivot_table(df,index=['year'])\n</code></pre>\n\n<p>and groupby </p>\n\n<pre><code>avgSURQ = SURQ.groupby('year')\n</code></pre>\n\n<p>but I think I am getting the syntax wrong so it doesn't work. I am new to python so I might be misunderstanding the examples online. </p>\n"}, {"tags": ["python", "mocking", "patch", "python-unittest", "magicmock"], "answers": [{"tags": [], "owner": {"reputation": 1722, "user_id": 1394869, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1f99af368f5f1bf54c512e2a79d155ab?s=128&d=identicon&r=PG", "display_name": "Dan", "link": "https://stackoverflow.com/users/1394869/dan"}, "is_accepted": true, "score": 1, "last_activity_date": 1466807754, "creation_date": 1466807754, "answer_id": 38023023, "question_id": 37978880, "link": "https://stackoverflow.com/questions/37978880/when-patching-2-objects-second-return-first-patched-value/38023023#38023023", "title": "When patching 2 objects, second return first patched value", "body": "<p>You have them in the wrong order, put the params in the reverse order you define them.</p>\n\n<pre><code>@patch('mypackage.models.db_models.MongoClient',\n       return_value={})\n@patch('mypackage.models.db_models.GridFS')\ndef test_file_in_db(self, mock_gridfs, mock_mongoclient):\n</code></pre>\n"}], "owner": {"reputation": 17770, "user_id": 243031, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/CDbHI.jpg?s=128&g=1", "display_name": "Nilesh", "link": "https://stackoverflow.com/users/243031/nilesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 38023023, "answer_count": 1, "score": 0, "last_activity_date": 1466807754, "creation_date": 1466632276, "question_id": 37978880, "link": "https://stackoverflow.com/questions/37978880/when-patching-2-objects-second-return-first-patched-value", "title": "When patching 2 objects, second return first patched value", "body": "<p>I am writing UT for one of my function where I have to patch 2 objects.</p>\n\n<pre><code>@patch('mypackage.models.db_models.MongoClient',\n       return_value={})\n@patch('mypackage.models.db_models.GridFS')\ndef test_file_in_db(self, mock_mongoclient, mock_gridfs):\n    print \"*\"*80\n    print mock_gridfs\n    print mock_gridfs.return_value\n    print \"*\"*80\n    mock_gridfs.return_value.new_file.return_value = {}\n</code></pre>\n\n<p>This gives error:</p>\n\n<pre><code>----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/venv/lib/python2.7/site-packages/mock/mock.py\", line 1305, in patched\n    return func(*args, **keywargs)\n  File \"/tests/models/test_db_models.py\", line 29, in test_file_in_db\n    mock_gridfs.return_value.new_file.return_value = {}\nAttributeError: 'dict' object has no attribute 'new_file'\n-------------------- &gt;&gt; begin captured stdout &lt;&lt; ---------------------\n********************************************************************************\n&lt;MagicMock name='MongoClient' id='4385486992'&gt;\n{}\n********************************************************************************\n\n--------------------- &gt;&gt; end captured stdout &lt;&lt; ----------------------\n</code></pre>\n\n<p>When I am accessing second argument, means <code>mock_gridfs</code> why it return <code>Mock</code> object for <code>MongoClient</code>?</p>\n"}, {"tags": ["python", "algorithm", "data-structures", "nested-loops"], "comments": [{"owner": {"reputation": 180675, "user_id": 1090562, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d675b3e6225683ba6432496ec23ed806?s=128&d=identicon&r=PG", "display_name": "Salvador Dali", "link": "https://stackoverflow.com/users/1090562/salvador-dali"}, "edited": false, "score": 0, "creation_date": 1466632223, "post_id": 37978846, "comment_id": 63403641, "body": "You just asked the same question a few minutes ago (which you deleted), which quickly collected downvotes and closes."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1466632405, "post_id": 37978846, "comment_id": 63403710, "body": "Welcome to StackOverflow.  Please read and follow the posting guidelines in the help documentation.  <a href=\"http://stackoverflow.com/help/on-topic\">on topic</a> and <a href=\"http://stackoverflow.com/help/how-to-ask\">how to ask</a> apply here."}, {"owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 0, "creation_date": 1466632872, "post_id": 37978846, "comment_id": 63403875, "body": "wait how does k=3 work?"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1466632943, "post_id": 37978846, "comment_id": 63403902, "body": "You are going to have to be more precise."}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 6126386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba477a3dcaf5800a57c3dccbc8667ca5?s=128&d=identicon&r=PG&f=1", "display_name": "sweetpotatoegg", "link": "https://stackoverflow.com/users/6126386/sweetpotatoegg"}, "edited": false, "score": 0, "creation_date": 1466638258, "post_id": 37978933, "comment_id": 63405446, "body": "This looks great. I didn&#39;t think about using zip. Thank you so much @Joran Beasley. One thing is that you don&#39;t need to sort in get_pairs function since the order keeps the same. The result is the same regardless of sorting."}, {"owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "reply_to_user": {"reputation": 41, "user_id": 6126386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba477a3dcaf5800a57c3dccbc8667ca5?s=128&d=identicon&r=PG&f=1", "display_name": "sweetpotatoegg", "link": "https://stackoverflow.com/users/6126386/sweetpotatoegg"}, "edited": false, "score": 0, "creation_date": 1466640854, "post_id": 37978933, "comment_id": 63406089, "body": "only if L is already sorted ... if it wasnt it would not work ... I wrote get_pairs before I understood what k was so I didnt know how it would get the lists"}], "tags": [], "owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "is_accepted": false, "score": 1, "last_activity_date": 1466633777, "last_edit_date": 1466633777, "creation_date": 1466632525, "answer_id": 37978933, "question_id": 37978846, "link": "https://stackoverflow.com/questions/37978846/how-to-pair-up-numbers-in-tournament-given-k-and-a-specific-condition/37978933#37978933", "title": "How to pair up numbers in tournament given k and a specific condition", "body": "<p>wow hopefully the interviewers did a much better job of explaining the problem statement</p>\n\n<p>maybe this is what you want</p>\n\n<pre><code>def get_pairs(L):\n    L = sorted(L)\n    middle = len(L)//2\n    result=list(zip(L[:middle],L[:middle-1:-1]))\n    if len(result) &gt; 2:\n        return get_pairs(result)\n    return result\n\nprint get_pairs(range(1,5)) #k=2 ???    \nprint get_pairs(range(1,9)) #k=3 ???\nprint get_pairs(range(1,17) #k=4 ???\n</code></pre>\n\n<p>aha I think I figured it(wtf k is and how it relates) out ..</p>\n\n<pre><code>def get_pairs_for_rank(k):\n    return get_pairs(range(1,2**k+1))\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 6126386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba477a3dcaf5800a57c3dccbc8667ca5?s=128&d=identicon&r=PG&f=1", "display_name": "sweetpotatoegg", "link": "https://stackoverflow.com/users/6126386/sweetpotatoegg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1466634138, "creation_date": 1466632096, "last_edit_date": 1466634138, "question_id": 37978846, "link": "https://stackoverflow.com/questions/37978846/how-to-pair-up-numbers-in-tournament-given-k-and-a-specific-condition", "title": "How to pair up numbers in tournament given k and a specific condition", "body": "<p>I was asked during the interview. I didn't take a note, so the problem description may be a bit vague.</p>\n\n<p>number is the rank in tournament.</p>\n\n<pre><code>k=1, return (1, 2) \nk=2, return ((1, 4), (2, 3)) \nk=3, return (((1, 8), (4, 5)), ((2, 7), (3, 6)))\nk=4, return ((((1, 16), (8, 9)), ((4, 13), (5, 12))), (((2, 15), (7, 10)), (3, 14), (6, 11))))\n</code></pre>\n\n<p>The smallest rank should be paired up with the largest rank always. So for example, <code>k=3 (((1, 8), (4, 5)), ((2, 7), (3, 6))) -&gt; ((1, 4), (2, 3)) -&gt; (1, 2) -&gt; 1 (winner)</code></p>\n\n<p>I think the brute force solution is to create a list of numbers given k and pair up between the largest number and the smallest number by incrementing both right and left index. But once paring is done, I should be able to pair up furthermore. For example, when k=3, I can create a list: <code>[1, 2, 3, 4, 5, 6, 7, 8]</code> and create a list of pairs: <code>[(1, 8), (2, 7), (3, 6), (4, 5)]</code>. After that, I should be able to pair up again to this: <code>[((1, 8), (4, 5)), ((2, 7), (3, 6))]</code></p>\n\n<p>I can't come up with a nested paring rule after I pair up two numbers in the beginning which can apply to any given k number.</p>\n\n<p>Edit: K is given. With k, you can create a list of numbers from 1 to 2**k. So, if k=3, a list of numbers would be [1, 2, 3, 4, 5, 6, 7, 8]. And as I mentioned it above, the number represents a rank. So '1' is a winner after the tournament. And since '1' is the winner (the smallest number), '1' should pair up with '8' (the bottom one and the largest number). And as follows (2, 7), (3, 6), (4, 5). But since it's a tournament, you expect that a winner from each pair will match  each other again. Since the condition is that (1st smallest , 1st largest), (2nd smallest, 2nd largest)..., you should pair up ((1, 8), (4, 5)) and ((2, 7), (3, 6)). ((1, 8), (4, 5)) -> (1, 4), ((2, 7), (3, 6)) -> (2, 3) => ((1, 4), (2, 3)) => (1, 2) => 1 (winner)</p>\n\n<p>The goal of the problem is to pair up numbers (by a nested tuple or list) given k and a certain condition ((1st smallest , 1st largest), (2nd smallest, 2nd largest)...). </p>\n\n<p>I tried the brute force solution, which I couldn't think of how to pair up in nested loops given k. I also thought of using a binary tree and a recursive way, which I should know how to pair up given k and the certain condition, and that's where I can't move forward. </p>\n"}, {"tags": ["python", "django"], "answers": [{"tags": [], "owner": {"reputation": 1463, "user_id": 2774483, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/541e8aecb8f3a94abc0888af75721c51?s=128&d=identicon&r=PG&f=1", "display_name": "jmerkow", "link": "https://stackoverflow.com/users/2774483/jmerkow"}, "is_accepted": true, "score": 5, "last_activity_date": 1466798186, "creation_date": 1466798186, "answer_id": 38021174, "question_id": 37978823, "link": "https://stackoverflow.com/questions/37978823/how-to-create-a-django-migration-for-splitting-model-into-multiple-models/38021174#38021174", "title": "how to create a django migration for splitting model into multiple models", "body": "<p>You can create the new model migration using south, then copy/create new objects for the new classes, then remove the fields from the original model.\nHere's what I do:</p>\n\n<ol>\n<li>Create the new model (ItemFile), DO NOT remove the fields from ItemA</li>\n<li>Generate a south migration using the standard methods</li>\n<li>Edit the migration, and add a loop that goes through all ItemA objects and creates the necessary Filesystem and ItemAFile objects.</li>\n<li>Remove fields from the model, create another migration.</li>\n</ol>\n\n<p>Here's what the code for (3) might look like:</p>\n\n<pre><code>def forwards_func(apps, schema_editor):\n    ItemA = apps.get_model(\"app\", \"ItemA\")\n    Filesystem = apps.get_model(\"app\", \"Filesystem\")\n    ItemAFile = apps.get_model(\"app\", \"ItemAFile\")\n\n    for item in ItemA.objects.all():\n        fs,added = Filesystem.objects.get_or_create(dirpath=str(item.base_dir))\n        itemafile=ItemAFile(itema=item, filesystem=fs, filepath=item.rel_fname)\n        # do md5 stuff\n        ....\n        itemafile.save()\n\ndef reverse_func(apps, schema_editor):\n    Filesystem = apps.get_model(\"app\", \"Filesystem\")\n    ItemAFile = apps.get_model(\"app\", \"ItemAFile\")\n\n    Filesystem.objects.all().delete()\n    ItemAFile.objects.all().delete()\n\nclass Migration(migrations.Migration):\n\n    dependencies = [\n        ...\n    ]\n\n    operations = [\n        ...\n        migrations.RunPython(forwards_func, reverse_func),\n    ]\n</code></pre>\n\n<p>I would consider putting the onetoone on the ItemAFile class rather than the ItemA class:</p>\n\n<pre><code>class ItemTypeAFile(BaseFile):\n    item = models.OneToOneField(ItemTypeA)\n</code></pre>\n\n<p>This way if you delete an ItemA object, the associated ItemAFile object will be deleted as well. Since ItemAFile is an extension of ItemA, this might be the behavior you want.</p>\n"}], "owner": {"reputation": 835, "user_id": 4589203, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/cf67731a41b816cccdc0247f0adce508?s=128&d=identicon&r=PG&f=1", "display_name": "Greg Samson", "link": "https://stackoverflow.com/users/4589203/greg-samson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1085, "favorite_count": 0, "accepted_answer_id": 38021174, "answer_count": 1, "score": 4, "last_activity_date": 1466798186, "creation_date": 1466631998, "question_id": 37978823, "link": "https://stackoverflow.com/questions/37978823/how-to-create-a-django-migration-for-splitting-model-into-multiple-models", "title": "how to create a django migration for splitting model into multiple models", "body": "<p>I have a django model that I am splitting into multiple models (django 1.9)\nThe app is more or less a system for tracking items and sets of items, which are usually associated with a file. (these files are not uploaded, or added by users, this is why I do no use the file field)</p>\n\n<p>Here is a toy example of one of the items, which also has an associated file:</p>\n\n<pre><code>class ItemTypeA(models.Model):\n    field1 = models.CharField(max_length=512)\n    ...\n    base_dir = models.CharField(max_length=512)\n    rel_fname = models.CharField(max_length=512)\n</code></pre>\n\n<p>In that model, I can filter on field1 and then get the appropriate file, (the real model has many fields, and relationships with other models not listed). There are also many more types of Items.</p>\n\n<p>I want to move the file details another model with a onetoone relationship.</p>\n\n<p>This might look like this:</p>\n\n<pre><code>class Filesystem(models.Model):\n    dirpath = models.CharField(max_length=512)\n    ... #Some other details for accessing the system, and system availablity.\n\nclass BaseFile(models.Model):\n    filesystem = models.ForeignKey(Filesystem,related_name=\"system\")\n    filepath = models.CharField(max_length=512)\n    md5 = models.CharField(max_length=16, editable=False)\n    md5_check_datetime = models.DateTimeField()\n    size = models.IntegerField(verbose_name=\"file_size\")\n    class Meta:\n        abstract = True\n\nclass ItemTypeAFile(BaseFile):\n    pass\n\nclass ItemTypeA(models.Model):\n    field1 = models.CharField(max_length=512)\n    file = models.OneToOneField(ItemTypeAFile)\n</code></pre>\n\n<p>I would like to create a migration for this such that filesystems are created when for each unique <code>base_dir==&gt;dirpath</code>, and a new ItemTypeAFile object is created with <code>OldItemTypeA.rel_fname==&gt;ItemTypeAFile.filepath</code>.</p>\n\n<p>I do not really even know where to start with this.</p>\n"}, {"tags": ["python", "machine-learning", "neural-network", "artificial-intelligence", "tensorflow"], "answers": [{"comments": [{"owner": {"reputation": 1933, "user_id": 5449456, "user_type": "registered", "accept_rate": 52, "profile_image": "https://lh5.googleusercontent.com/-2pNZV5O6iBo/AAAAAAAAAAI/AAAAAAAAAEk/eEtyVSBbwSk/photo.jpg?sz=128", "display_name": "Kendall Weihe", "link": "https://stackoverflow.com/users/5449456/kendall-weihe"}, "edited": false, "score": 0, "creation_date": 1466634139, "post_id": 37978910, "comment_id": 63404288, "body": "Why do I feed in temp_y during training but then y during loss/accuracy?"}, {"owner": {"reputation": 1933, "user_id": 5449456, "user_type": "registered", "accept_rate": 52, "profile_image": "https://lh5.googleusercontent.com/-2pNZV5O6iBo/AAAAAAAAAAI/AAAAAAAAAEk/eEtyVSBbwSk/photo.jpg?sz=128", "display_name": "Kendall Weihe", "link": "https://stackoverflow.com/users/5449456/kendall-weihe"}, "edited": false, "score": 0, "creation_date": 1466634199, "post_id": 37978910, "comment_id": 63404310, "body": "So this is also converging to roughly 0.69 -- the same as the version using the sigmoid_cross_...()"}, {"owner": {"reputation": 25824, "user_id": 5098368, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73fd0f3587eec2e8ac9e13726a84e11e?s=128&d=identicon&r=PG&f=1", "display_name": "Olivier Moindrot", "link": "https://stackoverflow.com/users/5098368/olivier-moindrot"}, "reply_to_user": {"reputation": 1933, "user_id": 5449456, "user_type": "registered", "accept_rate": 52, "profile_image": "https://lh5.googleusercontent.com/-2pNZV5O6iBo/AAAAAAAAAAI/AAAAAAAAAEk/eEtyVSBbwSk/photo.jpg?sz=128", "display_name": "Kendall Weihe", "link": "https://stackoverflow.com/users/5449456/kendall-weihe"}, "edited": false, "score": 0, "creation_date": 1466634213, "post_id": 37978910, "comment_id": 63404314, "body": "You should always feed <code>y</code>, because this is the placeholder in your graph."}, {"owner": {"reputation": 25824, "user_id": 5098368, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73fd0f3587eec2e8ac9e13726a84e11e?s=128&d=identicon&r=PG&f=1", "display_name": "Olivier Moindrot", "link": "https://stackoverflow.com/users/5098368/olivier-moindrot"}, "reply_to_user": {"reputation": 1933, "user_id": 5449456, "user_type": "registered", "accept_rate": 52, "profile_image": "https://lh5.googleusercontent.com/-2pNZV5O6iBo/AAAAAAAAAAI/AAAAAAAAAEk/eEtyVSBbwSk/photo.jpg?sz=128", "display_name": "Kendall Weihe", "link": "https://stackoverflow.com/users/5449456/kendall-weihe"}, "edited": false, "score": 0, "creation_date": 1466634237, "post_id": 37978910, "comment_id": 63404325, "body": "Have you tried training only on 1 image and trying to overfit it?"}, {"owner": {"reputation": 1933, "user_id": 5449456, "user_type": "registered", "accept_rate": 52, "profile_image": "https://lh5.googleusercontent.com/-2pNZV5O6iBo/AAAAAAAAAAI/AAAAAAAAAEk/eEtyVSBbwSk/photo.jpg?sz=128", "display_name": "Kendall Weihe", "link": "https://stackoverflow.com/users/5449456/kendall-weihe"}, "edited": false, "score": 0, "creation_date": 1466690400, "post_id": 37978910, "comment_id": 63431283, "body": "I tried training 1 image and I got it to converge. However the results look like noise (I predicted on the same image as I trained) -- I have attached an image in the post. What is the point in overfitting a single image?"}, {"owner": {"reputation": 25824, "user_id": 5098368, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73fd0f3587eec2e8ac9e13726a84e11e?s=128&d=identicon&r=PG&f=1", "display_name": "Olivier Moindrot", "link": "https://stackoverflow.com/users/5098368/olivier-moindrot"}, "reply_to_user": {"reputation": 1933, "user_id": 5449456, "user_type": "registered", "accept_rate": 52, "profile_image": "https://lh5.googleusercontent.com/-2pNZV5O6iBo/AAAAAAAAAAI/AAAAAAAAAEk/eEtyVSBbwSk/photo.jpg?sz=128", "display_name": "Kendall Weihe", "link": "https://stackoverflow.com/users/5449456/kendall-weihe"}, "edited": false, "score": 0, "creation_date": 1466692484, "post_id": 37978910, "comment_id": 63432953, "body": "And you get 100% accuracy on that image? The goal is to prove that your model can overfit and converge to 100% accuracy. Now you can try with gradually more images, and try to add regularization. If your dataset is that small (40 images) it will be hard to train a good model"}, {"owner": {"reputation": 1933, "user_id": 5449456, "user_type": "registered", "accept_rate": 52, "profile_image": "https://lh5.googleusercontent.com/-2pNZV5O6iBo/AAAAAAAAAAI/AAAAAAAAAEk/eEtyVSBbwSk/photo.jpg?sz=128", "display_name": "Kendall Weihe", "link": "https://stackoverflow.com/users/5449456/kendall-weihe"}, "edited": false, "score": 0, "creation_date": 1466698864, "post_id": 37978910, "comment_id": 63437574, "body": "I trained to 100% accuracy on the 1 image, and then to 100% accuracy on 50 images, but the predictions are still noise. What&#39;s weird is that I am predicting on an image that I trained with, so it should look basically identical? I&#39;m moving up to a full 635 images now..."}, {"owner": {"reputation": 1933, "user_id": 5449456, "user_type": "registered", "accept_rate": 52, "profile_image": "https://lh5.googleusercontent.com/-2pNZV5O6iBo/AAAAAAAAAAI/AAAAAAAAAEk/eEtyVSBbwSk/photo.jpg?sz=128", "display_name": "Kendall Weihe", "link": "https://stackoverflow.com/users/5449456/kendall-weihe"}, "edited": false, "score": 0, "creation_date": 1466700119, "post_id": 37978910, "comment_id": 63438339, "body": "Hold on, check out a sample from the prediction file I just posted. It&#39;s just the upper left corner. You can see how it changes from 0&#39;s and 1&#39;s to values in between 0 and 1 -- plus they repeat?"}, {"owner": {"reputation": 25824, "user_id": 5098368, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73fd0f3587eec2e8ac9e13726a84e11e?s=128&d=identicon&r=PG&f=1", "display_name": "Olivier Moindrot", "link": "https://stackoverflow.com/users/5098368/olivier-moindrot"}, "reply_to_user": {"reputation": 1933, "user_id": 5449456, "user_type": "registered", "accept_rate": 52, "profile_image": "https://lh5.googleusercontent.com/-2pNZV5O6iBo/AAAAAAAAAAI/AAAAAAAAAEk/eEtyVSBbwSk/photo.jpg?sz=128", "display_name": "Kendall Weihe", "link": "https://stackoverflow.com/users/5449456/kendall-weihe"}, "edited": false, "score": 0, "creation_date": 1466700898, "post_id": 37978910, "comment_id": 63438815, "body": "You can also remove dropout after conv6, and do not use <code>sigmoid</code> anymore (you use it in prediction). At that point I kind of want to write the whole code for you, it would be easier^^"}, {"owner": {"reputation": 1933, "user_id": 5449456, "user_type": "registered", "accept_rate": 52, "profile_image": "https://lh5.googleusercontent.com/-2pNZV5O6iBo/AAAAAAAAAAI/AAAAAAAAAEk/eEtyVSBbwSk/photo.jpg?sz=128", "display_name": "Kendall Weihe", "link": "https://stackoverflow.com/users/5449456/kendall-weihe"}, "edited": false, "score": 0, "creation_date": 1466706544, "post_id": 37978910, "comment_id": 63442419, "body": "I added the solution"}], "tags": [], "owner": {"reputation": 25824, "user_id": 5098368, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73fd0f3587eec2e8ac9e13726a84e11e?s=128&d=identicon&r=PG&f=1", "display_name": "Olivier Moindrot", "link": "https://stackoverflow.com/users/5098368/olivier-moindrot"}, "is_accepted": true, "score": 1, "last_activity_date": 1466632400, "creation_date": 1466632400, "answer_id": 37978910, "question_id": 37978809, "link": "https://stackoverflow.com/questions/37978809/tensorflow-softmax-cross-function-float-type-error/37978910#37978910", "title": "Tensorflow softmax_cross...() function float type error", "body": "<p>You have created a placeholder with:</p>\n\n<pre><code>y = tf.placeholder(tf.float32, [None, n_input, n_input, n_classes], name=\"ground_truth\")\n</code></pre>\n\n<p>The error is quite clear:</p>\n\n<blockquote>\n  <p>You must feed a value for placeholder tensor 'ground_truth'</p>\n</blockquote>\n\n<p>When calling <code>sess.run([cost, accuracy], feed_dict={x: batch_x, temp_y: batch_y, keep_prob: 1.0})</code>, you are not feeding the parameter <code>y</code>.</p>\n\n<p>You should instead use:</p>\n\n<pre><code>batch_y = convert_to_2_channel(batch_y, batch_size)\n# do not reshape batch_y now\nsess.run([cost, accuracy], feed_dict={x: batch_x,\n                                      y: batch_y,\n                                      keep_prob: 1.0})\n</code></pre>\n"}], "owner": {"reputation": 1933, "user_id": 5449456, "user_type": "registered", "accept_rate": 52, "profile_image": "https://lh5.googleusercontent.com/-2pNZV5O6iBo/AAAAAAAAAAI/AAAAAAAAAEk/eEtyVSBbwSk/photo.jpg?sz=128", "display_name": "Kendall Weihe", "link": "https://stackoverflow.com/users/5449456/kendall-weihe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1363, "favorite_count": 0, "accepted_answer_id": 37978910, "answer_count": 1, "score": 1, "last_activity_date": 1466706529, "creation_date": 1466631923, "last_edit_date": 1495535348, "question_id": 37978809, "link": "https://stackoverflow.com/questions/37978809/tensorflow-softmax-cross-function-float-type-error", "title": "Tensorflow softmax_cross...() function float type error", "body": "<p>I resolved in issue from <a href=\"https://stackoverflow.com/questions/37973619/tensorflow-converging-but-bad-predictions/37973844#37973844\">this</a> post, and the use Olivier recommended using the <code>softmax_cross_entropy_with_logits()</code> function. He is correct, but I'm getting a weird data type error. </p>\n\n<p>The error is </p>\n\n<pre><code>tensorflow.python.framework.errors.InvalidArgumentError: You must feed a value for placeholder tensor 'ground_truth' with dtype float\n     [[Node: ground_truth = Placeholder[dtype=DT_FLOAT, shape=[], _device=\"/job:localhost/replica:0/task:0/cpu:0\"]()]]\n</code></pre>\n\n<p>The softmax loss function requires data type float... which I have (it even says <code>ground_truth = Placeholder[dtype=DT_FLOAT</code> in the error message.</p>\n\n<p>Here is my definition: <code>y = tf.placeholder(tf.float32, [None, n_input, n_input, n_classes], name=\"ground_truth\")</code></p>\n\n<p>then I reshape and input into the loss function</p>\n\n<pre><code>temp_y = tf.reshape(y, [-1, 2])\ncost = (tf.nn.softmax_cross_entropy_with_logits(temp_pred, temp_y))\n</code></pre>\n\n<p>the error happens when I run a loss and accuracy session</p>\n\n<pre><code>loss, acc = sess.run([cost, accuracy], feed_dict={x: batch_x,\n                                              temp_y: batch_y,\n                                              keep_prob: 1.0})\n</code></pre>\n\n<p>but debugging right above that step I have</p>\n\n<pre><code>(Pdb) cost\n&lt;tf.Tensor 'loss/SoftmaxCrossEntropyWithLogits:0' shape=(?,) dtype=float32&gt;\n(Pdb) accuracy\n&lt;tf.Tensor 'acc/Mean:0' shape=() dtype=float32&gt;\n(Pdb) x\n&lt;tf.Tensor 'Placeholder:0' shape=(?, 200, 200) dtype=float32&gt;\n(Pdb) batch_x.dtype\ndtype('float64')\n(Pdb) temp_y\n&lt;tf.Tensor 'loss/Reshape_1:0' shape=(?, 2) dtype=float32&gt;\n(Pdb) batch_y.dtype\ndtype('float64')\n(Pdb) batch_x.shape\n(10, 200, 200)\n(Pdb) batch_y.shape\n(400000, 2)\n</code></pre>\n\n<p>So you can see they are all of type float, so why is it throwing a data type error?</p>\n\n<p>I've also tried: <code>batch_y = np.float32(batch_y)</code> but no luck</p>\n\n<p>The full code is here:</p>\n\n<pre><code>import tensorflow as tf\nimport pdb\nimport numpy as np\nfrom numpy import genfromtxt\nfrom PIL import Image\n\n# Parameters\nlearning_rate = 0.001\ntraining_iters = 10000\nbatch_size = 10\ndisplay_step = 1\n\n# Network Parameters\nn_input = 200 # MNIST data input (img shape: 28*28)\nn_output = 40000\nn_classes = 2 # MNIST total classes (0-9 digits)\n#n_input = 200\n\ndropout = 0.75 # Dropout, probability to keep units\n\n# tf Graph input\nx = tf.placeholder(tf.float32, [None, n_input, n_input])\ny = tf.placeholder(tf.float32, [None, n_input, n_input, n_classes], name=\"ground_truth\")\nkeep_prob = tf.placeholder(tf.float32) #dropout (keep probability)\n\n\ndef convert_to_2_channel(x, batch_size):\n    #assume input has dimension (batch_size,x,y)\n    #output will have dimension (batch_size,x,y,2)\n    output = np.empty((batch_size, 200, 200, 2))\n\n    temp_arr1 = np.empty((batch_size, 200, 200))\n    temp_arr2 = np.empty((batch_size, 200, 200))\n\n    for i in xrange(batch_size):\n        for j in xrange(200):\n            for k in xrange(200):\n                if x[i][j][k] == 1:\n                    temp_arr1[i][j][k] = 1\n                    temp_arr2[i][j][k] = 0\n                else:\n                    temp_arr1[i][j][k] = 0\n                    temp_arr2[i][j][k] = 1\n\n    for i in xrange(batch_size):\n        for j in xrange(200):\n            for k in xrange(200):\n                for l in xrange(2):\n                    if l == 0:\n                        output[i][j][k][l] = temp_arr1[i][j][k]\n                    else:\n                        output[i][j][k][l] = temp_arr2[i][j][k]\n\n    return output\n\n\n# Create some wrappers for simplicity\ndef conv2d(x, W, b, strides=1):\n    # Conv2D wrapper, with bias and relu activation\n    x = tf.nn.conv2d(x, W, strides=[1, strides, strides, 1], padding='SAME')\n    x = tf.nn.bias_add(x, b)\n    return tf.nn.relu(x)\n\ndef maxpool2d(x, k=2):\n    # MaxPool2D wrapper\n    return tf.nn.max_pool(x, ksize=[1, k, k, 1], strides=[1, k, k, 1],\n                          padding='SAME')\n\n\n# Create model\ndef conv_net(x, weights, biases, dropout):\n    # Reshape input picture\n    x = tf.reshape(x, shape=[-1, 200, 200, 1])\n\n    with tf.name_scope(\"conv1\") as scope:\n    # Convolution Layer\n        conv1 = conv2d(x, weights['wc1'], biases['bc1'])\n        # Max Pooling (down-sampling)\n        #conv1 = tf.nn.local_response_normalization(conv1)\n        conv1 = maxpool2d(conv1, k=2)\n\n    # Convolution Layer\n    with tf.name_scope(\"conv2\") as scope:\n        conv2 = conv2d(conv1, weights['wc2'], biases['bc2'])\n        # Max Pooling (down-sampling)\n        #conv2 = tf.nn.local_response_normalization(conv2)\n        conv2 = maxpool2d(conv2, k=2)\n\n    # Convolution Layer\n    with tf.name_scope(\"conv3\") as scope:\n        conv3 = conv2d(conv2, weights['wc3'], biases['bc3'])\n        # # Max Pooling (down-sampling)\n        #conv3 = tf.nn.local_response_normalization(conv3)\n        conv3 = maxpool2d(conv3, k=2)\n\n\n    temp_batch_size = tf.shape(x)[0]\n    with tf.name_scope(\"deconv1\") as scope:\n        output_shape = [temp_batch_size, 50, 50, 64]\n        conv4 = tf.nn.conv2d_transpose(conv3, weights['wdc1'], output_shape=output_shape, strides=[1,2,2,1], padding=\"VALID\")\n        conv4 = tf.nn.bias_add(conv4, biases['bdc1'])\n        conv4 = tf.nn.relu(conv4)\n        # conv4 = tf.nn.local_response_normalization(conv4)\n\n    with tf.name_scope(\"deconv2\") as scope:\n        # output_shape = tf.pack([temp_batch_size, 100, 100, 32])\n        output_shape = [temp_batch_size, 100, 100, 32]\n        conv5 = tf.nn.conv2d_transpose(conv4, weights['wdc2'], output_shape=output_shape, strides=[1,2,2,1], padding=\"VALID\")\n        conv5 = tf.nn.bias_add(conv5, biases['bdc2'])\n        conv5 = tf.nn.relu(conv5)\n        # conv5 = tf.nn.local_response_normalization(conv5)\n\n    with tf.name_scope(\"deconv3\") as scope:\n        # output_shape = tf.pack([temp_batch_size, 200, 200, 1])\n        output_shape = [temp_batch_size, 200, 200, 2]\n        conv6 = tf.nn.conv2d_transpose(conv5, weights['wdc3'], output_shape=output_shape, strides=[1,2,2,1], padding=\"VALID\")\n        conv6 = tf.nn.bias_add(conv6, biases['bdc3'])\n    # conv6 = tf.nn.relu(conv6)\n    # pdb.set_trace()\n    conv6 = tf.nn.dropout(conv6, dropout)\n\n    return conv6\n    # Fully connected layer\n    # Reshape conv2 output to fit fully connected layer input\n    # fc1 = tf.reshape(conv6, [-1, weights['wd1'].get_shape().as_list()[0]])\n    # fc1 = tf.add(tf.matmul(fc1, weights['wd1']), biases['bd1'])\n    # fc1 = tf.nn.relu(fc1)\n    # # Apply Dropout\n    # fc1 = tf.nn.dropout(fc1, dropout)\n    #\n    # return (tf.add(tf.matmul(fc1, weights['out']), biases['out']))# Store layers weight &amp; bias\n\nweights = {\n    # 5x5 conv, 1 input, 32 outputs\n    'wc1' : tf.Variable(tf.random_normal([5, 5, 1, 32])),\n    # 5x5 conv, 32 inputs, 64 outputs\n    'wc2' : tf.Variable(tf.random_normal([5, 5, 32, 64])),\n    # 5x5 conv, 32 inputs, 64 outputs\n    'wc3' : tf.Variable(tf.random_normal([5, 5, 64, 128])),\n\n    'wdc1' : tf.Variable(tf.random_normal([2, 2, 64, 128])),\n\n    'wdc2' : tf.Variable(tf.random_normal([2, 2, 32, 64])),\n\n    'wdc3' : tf.Variable(tf.random_normal([2, 2, 2, 32])),\n\n    # fully connected, 7*7*64 inputs, 1024 outputs\n    'wd1': tf.Variable(tf.random_normal([80000, 1024])),\n    # 1024 inputs, 10 outputs (class prediction)\n    'out': tf.Variable(tf.random_normal([1024, 80000]))\n}\n\nbiases = {\n    'bc1': tf.Variable(tf.random_normal([32])),\n    'bc2': tf.Variable(tf.random_normal([64])),\n    'bc3': tf.Variable(tf.random_normal([128])),\n    'bdc1': tf.Variable(tf.random_normal([64])),\n    'bdc2': tf.Variable(tf.random_normal([32])),\n    'bdc3': tf.Variable(tf.random_normal([2])),\n    'bd1': tf.Variable(tf.random_normal([1024])),\n    'out': tf.Variable(tf.random_normal([80000]))\n}\n\n# Construct model\n# with tf.name_scope(\"net\") as scope:\npred = conv_net(x, weights, biases, keep_prob)\npred = tf.reshape(pred, [-1,n_input,n_input,n_classes])\n# Define loss and optimizer\nwith tf.name_scope(\"loss\") as scope:\n    # cost = tf.reduce_mean(tf.nn.sigmoid_cross_entropy_with_logits(pred, y))\n    temp_pred = tf.reshape(pred, [-1, 2])\n    temp_y = tf.reshape(y, [-1, 2])\n    cost = (tf.nn.softmax_cross_entropy_with_logits(temp_pred, temp_y))\n\nwith tf.name_scope(\"opt\") as scope:\n    optimizer = tf.train.AdamOptimizer(learning_rate=learning_rate).minimize(cost)\n    # optimizer = tf.train.GradientDescentOptimizer(learning_rate=learning_rate).minimize(cost)\n\n\n# Evaluate model\nwith tf.name_scope(\"acc\") as scope:\n    correct_pred = tf.equal(0,tf.cast(tf.sub(tf.nn.softmax(temp_pred),y), tf.int32))\n    accuracy = tf.reduce_mean(tf.cast(correct_pred, tf.float32))\n\n# Initializing the variables\ninit = tf.initialize_all_variables()\nsaver = tf.train.Saver()\n# Launch the graph\nwith tf.Session() as sess:\n    sess.run(init)\n    summary = tf.train.SummaryWriter('/tmp/logdir/', sess.graph)\n    step = 1\n    from tensorflow.contrib.learn.python.learn.datasets.scroll import scroll_data\n    data = scroll_data.read_data('/home/kendall/Desktop/')\n    # Keep training until reach max iterations\n    while step * batch_size &lt; training_iters:\n        batch_x, batch_y = data.train.next_batch(batch_size)\n        # Run optimization op (backprop)\n        batch_x = batch_x.reshape((batch_size, n_input, n_input))\n        batch_y = batch_y.reshape((batch_size, n_input, n_input))\n        batch_y = convert_to_2_channel(batch_y, batch_size) #converts the 200x200 ground truth to a 200x200x2 classification\n        batch_y = batch_y.reshape(batch_size * n_input * n_input, 2)\n        sess.run(optimizer, feed_dict={x: batch_x, temp_y: batch_y,\n                                       keep_prob: dropout})\n        #measure prediction\n        prediction = sess.run(tf.nn.softmax(temp_pred), feed_dict={x: batch_x, keep_prob: 1.0})\n        print prediction\n        if step % display_step == 0:\n            # Calculate batch loss and accuracdef conv_net(x, weights, biases, dropout):\n            # save_path = \"model.ckpt\"\n            # saver.save(sess, save_path)\n            pdb.set_trace()\n            loss, acc = sess.run([cost, accuracy], feed_dict={x: batch_x,\n                                                              temp_y: batch_y,\n                                                              keep_prob: 1.0})\n            print \"Accuracy = \" + str(acc)\n            if acc &gt; 0.73:\n                break\n        step += 1\n    print \"Optimization Finished!\"\n\n    #make prediction\n    im = Image.open('/home/kendall/Desktop/HA900_frames/frame0035.tif')\n    batch_x = np.array(im)\n    # pdb.set_trace()\n    batch_x = batch_x.reshape((1, n_input, n_input))\n    batch_x = batch_x.astype(float)\n    pdb.set_trace()\n    prediction = sess.run(tf.nn.sigmoid(pred), feed_dict={x: batch_x, keep_prob: dropout})\n    print prediction\n    arr1 = np.empty((n_input,n_input))\n    arr2 = np.empty((n_input,n_input))\n    for i in xrange(n_input):\n        for j in xrange(n_input):\n            for k in xrange(2):\n                if k == 0:\n                    arr1[i][j] = (prediction[0][i][j][k])\n                else:\n                    arr2[i][j] = (prediction[0][i][j][k])\n    # prediction = np.asarray(prediction)\n    # prediction = np.reshape(prediction, (200,200))\n    # np.savetxt(\"prediction.csv\", prediction, delimiter=\",\")\n    np.savetxt(\"prediction1.csv\", arr1, delimiter=\",\")\n    np.savetxt(\"prediction2.csv\", arr2, delimiter=\",\")\n    # np.savetxt(\"prediction2.csv\", arr2, delimiter=\",\")\n\n    # Calculate accuracy for 256 mnist test images\n    print \"Testing Accuracy:\", \\\n        sess.run(accuracy, feed_dict={x: data.test.images[:256],\n                                      y: data.test.labels[:256],\n                                      keep_prob: 1.})\n</code></pre>\n\n<p><strong>EDIT</strong> I tried Olivier's suggestion below -- I have trained on a single image and made a prediction on the same image, however the results are noise (image below)</p>\n\n<p><a href=\"https://i.stack.imgur.com/JrFdl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JrFdl.png\" alt=\"enter image description here\"></a></p>\n\n<pre><code>0   1   0   0   0   0   1   0   0.1123563871    0.0098750331\n0   0   0   0   0   0   0   0   0.3422192633    0.1503699124\n0   0   1   1   0   0   1   0   0.2514399588    0.2409999073\n0   0   0   1   0   0   0   0   6.89521839376539E-005   3.05128295963186E-008\n0   0   1   0   0   0   0   0   0.1123563871    0.0098750331\n1   0   0   0   0   0   0   0   0.3422192633    0.1503699124\n0   0   1   0   0   1   0   0   0.2514399588    0.2409999073\n1   0   0   0   0   0   0   0   6.89521839376539E-005   3.05128295963186E-008\n0.1123563871    0.0098750331    0.4323458374    5.16190539201489E-007   0.1123563871    0.0098750331    0.4323458374    5.16190539201489E-007   0.1123563871    0.0098750331\n0.3422192633    0.1503699124    0.0003182398    0.0169620775    0.3422192633    0.1503699124    0.0003182398    0.0169620775    0.3422192633    0.1503699124\n0.2514399588    0.2409999073    0.1795956045    0.1424995959    0.2514399588    0.2409999073    0.1795956045    0.1424995959    0.2514399588    0.2409999073\n6.89521839376539E-005   3.05128295963186E-008   0.2851913273    0.002106138 6.89521839376539E-005   3.05128295963186E-008   0.2851913273    0.002106138 6.89521839376539E-005   3.05128295963186E-008\n0.1123563871    0.0098750331    0.4323458374    5.16190539201489E-007   0.1123563871    0.0098750331    0.4323458374    5.16190539201489E-007   0.1123563871    0.0098750331\n0.3422192633    0.1503699124    0.0003182398    0.0169620775    0.3422192633    0.1503699124    0.0003182398    0.0169620775    0.3422192633    0.1503699124\n0.2514399588    0.2409999073    0.1795956045    0.1424995959    0.2514399588    0.2409999073    0.1795956045    0.1424995959    0.2514399588    0.2409999073\n6.89521839376539E-005   3.05128295963186E-008   0.2851913273    0.002106138 6.89521839376539E-005   3.05128295963186E-008   0.2851913273    0.002106138 6.89521839376539E-005   3.05128295963186E-008\n0.1123563871    0.0098750331    0.4323458374    5.16190539201489E-007   0.1123563871    0.0098750331    0.4323458374    5.16190539201489E-007   0.1123563871    0.0098750331\n0.3422192633    0.1503699124    0.0003182398    0.0169620775    0.3422192633    0.1503699124    0.0003182398    0.0169620775    0.3422192633    0.1503699124\n</code></pre>\n\n<p><strong>SOLUTION</strong> I had to change the prediction to this:</p>\n\n<pre><code>prediction1 = sess.run(pred, feed_dict={x: batch_x, keep_prob: 1.0})\nprediction1 = prediction1.reshape((40000,2))\nprediction1 = tf.nn.softmax(prediction1)\nprediction1 = prediction1.eval()\nprediction1 = prediction1.reshape((n_input, n_input, 2))\n</code></pre>\n"}, {"tags": ["python", "arrays", "csv", "numpy"], "comments": [{"owner": {"reputation": 1363, "user_id": 2792896, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1dbf65eb2ebc0d8dc5b8fb48ac825fed?s=128&d=identicon&r=PG&f=1", "display_name": "Arnial", "link": "https://stackoverflow.com/users/2792896/arnial"}, "edited": false, "score": 0, "creation_date": 1466631779, "post_id": 37978624, "comment_id": 63403449, "body": "why you trying to use numpy (linear algebra library) instead of <a href=\"https://docs.python.org/2/library/csv.html\" rel=\"nofollow noreferrer\">python standart library for reading and writing csv</a>?"}, {"owner": {"reputation": 487, "user_id": 6499948, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/zDO8C.jpg?s=128&g=1", "display_name": "PythonMan", "link": "https://stackoverflow.com/users/6499948/pythonman"}, "reply_to_user": {"reputation": 1363, "user_id": 2792896, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1dbf65eb2ebc0d8dc5b8fb48ac825fed?s=128&d=identicon&r=PG&f=1", "display_name": "Arnial", "link": "https://stackoverflow.com/users/2792896/arnial"}, "edited": false, "score": 0, "creation_date": 1466632139, "post_id": 37978624, "comment_id": 63403606, "body": "@Arnial  how? do you have code suggestion how to do that on your way?"}], "answers": [{"comments": [{"owner": {"reputation": 487, "user_id": 6499948, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/zDO8C.jpg?s=128&g=1", "display_name": "PythonMan", "link": "https://stackoverflow.com/users/6499948/pythonman"}, "edited": false, "score": 0, "creation_date": 1466674247, "post_id": 37979006, "comment_id": 63419376, "body": "Ok this helps a lot, because now I understand where is the problem. I used your last part of code, surf more a bit and find solution thanks to you. So here is the final result that will append all every time it runs  I added this after <code>pass</code> .... <code>mybook = open(&#39;archive.csv&#39;, &#39;a&#39;)                     mybook.write(&#39;%20s,%20s\\n&#39;%(people, datetime.now().strftime(&quot;%d&#47;%m&#47;%y %H:%M&quot;)))                     mybook.close()</code>"}], "tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": true, "score": 1, "last_activity_date": 1466634101, "last_edit_date": 1466634101, "creation_date": 1466632911, "answer_id": 37979006, "question_id": 37978624, "link": "https://stackoverflow.com/questions/37978624/how-to-export-array-in-csv-or-txt-in-python/37979006#37979006", "title": "How to export array in csv or txt in Python", "body": "<p>Looks like you are doing something like:</p>\n\n<pre><code>In [1339]: peoples=[]\n\nIn [1340]: for _ in range(3):\n   ......:     peoples.append([234, datetime.datetime.now().strftime(\"%d/%m/%y %H:%M\")])\n   ......:     \n\nIn [1341]: peoples\nOut[1341]: [[234, '22/06/16 14:57'], [234, '22/06/16 14:57'], [234, '22/06/16 14:57']]\n</code></pre>\n\n<p><code>peoples</code> is an array (or here a list of lists), that contains, among other things formatted dates.</p>\n\n<pre><code>In [1342]: np.savetxt('test.txt',peoples)\n...    \nTypeError: Mismatch between array dtype ('&lt;U14') and format specifier ('%.18e %.18e')\n</code></pre>\n\n<p>Since I didn't specify <code>fmt</code> it constructed a default one, consisting of two <code>%.18e</code> fields.  That's great for general formatting of numbers.  But the data includes 14 characters strings ('U14' - unicode in Python3).</p>\n\n<p>If I tell it to use <code>%s</code>, the generic string format, I get:</p>\n\n<pre><code>In [1346]: np.savetxt('test.txt',peoples, fmt='%s', delimiter=',')\n\nIn [1347]: cat test.txt\n234,22/06/16 14:57\n234,22/06/16 14:57\n234,22/06/16 14:57\n</code></pre>\n\n<p>Not ideal, but still it works.  <code>fmt='%20s'</code> would be better.</p>\n\n<p>I glossed over a another nuance.  <code>peoples</code> is a list of lists.  <code>np.savetxt</code> works with arrays, so it first turns that into an array with:</p>\n\n<pre><code>In [1360]: np.array(peoples)\nOut[1360]: \narray([['234', '22/06/16 14:57'],\n       ['234', '22/06/16 14:57'],\n       ['234', '22/06/16 14:57']], \n      dtype='&lt;U14')\n</code></pre>\n\n<p>But this turns both columns into <code>U14</code> strings.  So I have to format both columns with <code>%s</code>.  I can't use a numeric format on the first.  What I need to do first is make a structured array with a numeric field(s) and a string field.  I know how to do that, but I won't get into the details now.</p>\n\n<p>As per comments, it could be simpler to format each <code>peoples</code> line as a complete string, and write that to a file.</p>\n\n<pre><code>In [1378]: with open('test.txt','w') as f:\n    for _ in range(3):\n        f.write('%10d,%20s\\n'%(234, datetime.datetime.now().strftime(\"%d/%m/%y %H:%M\")))\n   ......:         \n\nIn [1379]: cat test.txt\n       234,      22/06/16 15:18\n       234,      22/06/16 15:18\n       234,      22/06/16 15:18\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 487, "user_id": 6499948, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/zDO8C.jpg?s=128&g=1", "display_name": "PythonMan", "link": "https://stackoverflow.com/users/6499948/pythonman"}, "edited": false, "score": 0, "creation_date": 1466675191, "post_id": 37979164, "comment_id": 63420043, "body": "yeah csv is much simpler. Thanks for this code it helped a lot! But I must admit hpauj&#39;s answer helped me to understand how it works."}], "tags": [], "owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "is_accepted": false, "score": 1, "last_activity_date": 1466633823, "last_edit_date": 1495541684, "creation_date": 1466633823, "answer_id": 37979164, "question_id": 37978624, "link": "https://stackoverflow.com/questions/37978624/how-to-export-array-in-csv-or-txt-in-python/37979164#37979164", "title": "How to export array in csv or txt in Python", "body": "<p><a href=\"https://stackoverflow.com/a/37979006/2141635\">hpauj's</a> answer explains you why your code error but using the <em>csv</em> lib and writing as you go is probably a lot easier:</p>\n\n<pre><code>import csv\n\nwith open(\"out.csv\", \"w\") as f:\n    wr = csv.writer(f)\n    for content in driver.find_elements_by_class_name('x234'):\n        people = content.find_element_by_xpath('.//div[@class=\"zstrim\"]').text\n        if people != \"Django\" and people != \"Rooky\":\n            wr.writerow([people, 1, datetime.now().strftime(\"%d/%m/%y %H:%M\")])\n</code></pre>\n"}], "owner": {"reputation": 487, "user_id": 6499948, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/zDO8C.jpg?s=128&g=1", "display_name": "PythonMan", "link": "https://stackoverflow.com/users/6499948/pythonman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2204, "favorite_count": 1, "accepted_answer_id": 37979006, "answer_count": 2, "score": 0, "last_activity_date": 1466634165, "creation_date": 1466631127, "question_id": 37978624, "link": "https://stackoverflow.com/questions/37978624/how-to-export-array-in-csv-or-txt-in-python", "title": "How to export array in csv or txt in Python", "body": "<p>I'm trying to export array to txt or csv file. I've been trying with numpy but i always get some error like \n<code>TypeError: Mismatch between array dtype ('&lt;U14') and format specifier ('%.18e')</code></p>\n\n<p>Here is my code without numpy that works great but I need help with part how to export it.</p>\n\n<pre><code>peoples = []\nfor content in driver.find_elements_by_class_name('x234'):\n    people = content.find_element_by_xpath('.//div[@class=\"zstrim\"]').text\n    if people != \"Django\" and people != \"Rooky\" :\n        pass\n        peoples.append([people, 1, datetime.now().strftime(\"%d/%m/%y %H:%M\")])\nprint(peoples)\n</code></pre>\n\n<p>Really need some help with this.</p>\n"}, {"tags": ["python", "assert"], "comments": [{"owner": {"reputation": 45741, "user_id": 744178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3193139ea494c45e63752504f5ff1f2?s=128&d=identicon&r=PG", "display_name": "jwodder", "link": "https://stackoverflow.com/users/744178/jwodder"}, "edited": false, "score": 0, "creation_date": 1466631232, "post_id": 37978620, "comment_id": 63403218, "body": "The parentheses are unnecessary and misleading."}, {"owner": {"reputation": 18146, "user_id": 646619, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bd61a0f309ebc135d2661710c2faf379?s=128&d=identicon&r=PG", "display_name": "Colonel Thirty Two", "link": "https://stackoverflow.com/users/646619/colonel-thirty-two"}, "edited": false, "score": 1, "creation_date": 1466631593, "post_id": 37978620, "comment_id": 63403379, "body": "Note that assertions are removed when running with <code>-O</code>. You probably don&#39;t want that if you are checking a file for consistency (which is outside of your control)..."}, {"owner": {"reputation": 968, "user_id": 4430458, "user_type": "registered", "accept_rate": 94, "profile_image": "https://lh4.googleusercontent.com/-mFwsSLm-6TM/AAAAAAAAAAI/AAAAAAAAxXk/k14wPJkWAX4/photo.jpg?sz=128", "display_name": "Chris", "link": "https://stackoverflow.com/users/4430458/chris"}, "reply_to_user": {"reputation": 18146, "user_id": 646619, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bd61a0f309ebc135d2661710c2faf379?s=128&d=identicon&r=PG", "display_name": "Colonel Thirty Two", "link": "https://stackoverflow.com/users/646619/colonel-thirty-two"}, "edited": false, "score": 0, "creation_date": 1466631759, "post_id": 37978620, "comment_id": 63403444, "body": "@ColonelThirtyTwo Oh, that&#39;s true. I do not want that."}], "owner": {"reputation": 968, "user_id": 4430458, "user_type": "registered", "accept_rate": 94, "profile_image": "https://lh4.googleusercontent.com/-mFwsSLm-6TM/AAAAAAAAAAI/AAAAAAAAxXk/k14wPJkWAX4/photo.jpg?sz=128", "display_name": "Chris", "link": "https://stackoverflow.com/users/4430458/chris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 135, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1466631115, "creation_date": 1466631115, "question_id": 37978620, "link": "https://stackoverflow.com/questions/37978620/is-this-the-proper-way-to-use-assert-in-python-3-5", "title": "Is this the proper way to use assert in Python 3.5?", "body": "<p>Is this the proper way to use assert?</p>\n\n<p>My program takes some files names as command line arguments and stores them in a list. I need to cross reference the list of file names with names in a metadata file. If one of the files isn't in the metadata, I want the program to end and explain why. I thought assert might be good for that but I'm not sure if this is the proper way to use it or if there is a better way to iterate over a list and make sure it exists in the metadata.</p>\n\n<pre><code>for sample in samples_list:\n    assert(sample in meta_sampleIds), \"A file is missing from the metadata\"\n</code></pre>\n"}, {"tags": ["python", "google-app-engine"], "comments": [{"owner": {"reputation": 142796, "user_id": 42346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZikEw.jpg?s=128&g=1", "display_name": "mechanical_meat", "link": "https://stackoverflow.com/users/42346/mechanical-meat"}, "edited": false, "score": 0, "creation_date": 1466631556, "post_id": 37978583, "comment_id": 63403360, "body": "It looks like you need to call it MySQLdb? <a href=\"https://cloud.google.com/appengine/docs/python/tools/using-libraries-python-27\" rel=\"nofollow noreferrer\">cloud.google.com/appengine/docs/python/tools/&hellip;</a>"}, {"owner": {"reputation": 988, "user_id": 2434480, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/b36ff2fa9db9e8834f604f49dc0bd8fa?s=128&d=identicon&r=PG&f=1", "display_name": "SupimpaAllTheWay", "link": "https://stackoverflow.com/users/2434480/supimpaalltheway"}, "edited": false, "score": 0, "creation_date": 1466640682, "post_id": 37978583, "comment_id": 63406045, "body": "I also tried that, but didn&#39;t work. Btw i&#39;m deploying with gcloud"}], "owner": {"reputation": 317, "user_id": 3958473, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/e675d94147c6c335432684984f890f10?s=128&d=identicon&r=PG&f=1", "display_name": "user309838", "link": "https://stackoverflow.com/users/3958473/user309838"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 87, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1466633940, "creation_date": 1466630973, "question_id": 37978583, "link": "https://stackoverflow.com/questions/37978583/gae-python-libs-on-my-requirements-txt-are-not-installed", "title": "GAE Python - libs on my requirements.txt are not installed", "body": "<p>I'm using flexible environments and I'd like to know what am I doing wrong when deploying it.</p>\n\n<p>This is my requirements.txt</p>\n\n<pre><code>MySQL-python==1.2.5\n</code></pre>\n\n<p>If I uninstall this lib on my local computer this error will be thrown:</p>\n\n<pre><code>No module named MySQLdb\n</code></pre>\n\n<p>When I run \"pip install -r requirements.txt\" the lib will be installed  and I'll able to use MySQLdb with no problems.</p>\n\n<p>The problem is, when I upload this to server  it does not install and the error  \"No module named MySQLdb\" is thrown on production...</p>\n\n<p>From what I understood reading some docs, is that I'd only need to specify which libs I want to use and google would do the installing on production.</p>\n\n<p>Am I wrong?</p>\n\n<p>Thanks a lot!</p>\n"}, {"tags": ["python", "matplotlib"], "comments": [{"owner": {"reputation": 1590, "user_id": 4085591, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/141ba1a86ddc18e4a0f3098948dac960?s=128&d=identicon&r=PG&f=1", "display_name": "StefanS", "link": "https://stackoverflow.com/users/4085591/stefans"}, "edited": false, "score": 0, "creation_date": 1466682589, "post_id": 37978542, "comment_id": 63425149, "body": "I don&#39;t understand why you can&#39;t just hardcode the color in the plot statement if you want the same every time: <code>ax.plot(x,a*np.sin(x),x,a*np.cos(x), &#39;-ks&#39; ,label=&#39;trig a={}&#39;.format(a))</code>. Notice the addition of <code>&#39;-ks&#39;</code>: that is a black (k), solid line (-) with squares (s) where the values are. You can change that to the style you want and every plot will have the same style."}, {"owner": {"reputation": 337, "user_id": 1723062, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e717be47b3db9187f5d91ed45aba5061?s=128&d=identicon&r=PG", "display_name": "Mus", "link": "https://stackoverflow.com/users/1723062/mus"}, "reply_to_user": {"reputation": 1590, "user_id": 4085591, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/141ba1a86ddc18e4a0f3098948dac960?s=128&d=identicon&r=PG&f=1", "display_name": "StefanS", "link": "https://stackoverflow.com/users/4085591/stefans"}, "edited": false, "score": 0, "creation_date": 1466693965, "post_id": 37978542, "comment_id": 63434082, "body": "In the original problem I display more then 10 functions per parameter and I have many parameters shown in iteration proces. Hardcoding colours could solve some of the problem but in some cases I will run out of the list of colours. Abother big problem is that every single function will have an assosiated legend which I have to avoid. In addition I am doing anotation to the function plot depending on parameter, which complecates further."}], "answers": [{"tags": [], "owner": {"reputation": 1590, "user_id": 4085591, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/141ba1a86ddc18e4a0f3098948dac960?s=128&d=identicon&r=PG&f=1", "display_name": "StefanS", "link": "https://stackoverflow.com/users/4085591/stefans"}, "is_accepted": true, "score": 2, "last_activity_date": 1466776650, "last_edit_date": 1466776650, "creation_date": 1466776336, "answer_id": 38015084, "question_id": 37978542, "link": "https://stackoverflow.com/questions/37978542/plot-multiple-functions-with-the-same-properties-in-matplotlib/38015084#38015084", "title": "Plot multiple functions with the same properties in matplotlib", "body": "<p>I think now I understand what you want. You'll never run out of colors, because <code>matplotlib</code> supports a wide range of color definitions. Any legal HTML-name, any RGB-triple, ...</p>\n\n<p>I'm don't know how to conditionally set the label for artists, so that part of the following (the <code>if</code>) is a hack that can be improved by someone with more knowledge about the inner working of <code>matplotlib</code>.</p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\n\ndef my_sin(x, a):\n    return a * np.sin(x)\n\ndef my_cos(x, a):\n    return a * np.cos(x)\n\ndef my_tanh(x, a):\n    return np.tanh(x / a - 1)\n\ndef plotTrig(x, data, colors, parameters):\n    fig, ax = plt.subplots()\n    for ind, a in enumerate(parameters):\n        for name, func in data.iteritems():\n            if (name == 'sin'):  # or any other\n                ax.plot(x, func(x, a), '-',\n                        color=colors[ind],\n                        label='trig a={}'.format(a))\n            else:\n                ax.plot(x, func(x, a), '-',\n                        color=colors[ind])\n    ax.legend()\n\n\nif __name__ == '__main__':\n    # prepare data\n    x = np.arange(0,10,0.1)\n    data = {}  # dictionary to hold the values\n    data['sin'] = my_sin\n    data['cos'] = my_cos\n    data['tanh'] = my_tanh\n    # list to hold the colors for each parameter\n    colors = ['burlywood', 'r', '#0000FF', '0.25', (0.75, 0, 0.75)]\n    # parameters\n    parameters = [1, 2, 3, 4, 5]\n    plotTrig(x, data, colors, parameters)\n    plt.show()\n</code></pre>\n\n<p>The idea is to put the different functions in a container, so we can iterate over them (a list would have worked as well) and then use the same color for every function, but different color for each parameter. The label is only added to one function with the hacky <code>if</code> statement. </p>\n\n<p>I could have done it a lot simpler if I'd just set the dictionary values to the results of the functions:</p>\n\n<pre><code>data['sin'] = np.sin(x)\n</code></pre>\n\n<p>and then plot with</p>\n\n<pre><code>ax.plot(x, a * func, '-',...\n</code></pre>\n\n<p>to reproduce your example, but then your parameters could only be applied to the result of the function. This way you can use them in any way you can express as a function.</p>\n\n<p>Result:\n<a href=\"https://i.stack.imgur.com/sQZOz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/sQZOz.png\" alt=\"Result\"></a></p>\n"}], "owner": {"reputation": 337, "user_id": 1723062, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e717be47b3db9187f5d91ed45aba5061?s=128&d=identicon&r=PG", "display_name": "Mus", "link": "https://stackoverflow.com/users/1723062/mus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1832, "favorite_count": 0, "accepted_answer_id": 38015084, "answer_count": 1, "score": 2, "last_activity_date": 1466776650, "creation_date": 1466630779, "question_id": 37978542, "link": "https://stackoverflow.com/questions/37978542/plot-multiple-functions-with-the-same-properties-in-matplotlib", "title": "Plot multiple functions with the same properties in matplotlib", "body": "<p>I try to visualise multiple function coming from the single parameter. I need to do some kind of loop over parameter. I would like to do assign the same colour, legend etc to all plotted functions of given parameter.</p>\n\n<p>The problem is that all plots I try, matplotlib assign different colours and always give a label. </p>\n\n<p>Basicaly I would like to achive something like:</p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\ndef plot2():    \n    fig, ax = plt.subplots()\n    x = np.arange(0,10,0.1)\n    ax.plot(x,1*np.sin(x),'b-')\n    ax.plot(x,1*np.cos(x),'b-',label='trig a={}'.format(1))\n    ax.plot(x,2*np.sin(x),'g-')\n    ax.plot(x,2*np.cos(x),'g-',label='trig a={}'.format(2))\n    ax.plot(x,3*np.sin(x),'r-')\n    ax.plot(x,3*np.cos(x),'r-',label='trig a={}'.format(3))\n    ax.legend()\n</code></pre>\n\n<p>but with function like:</p>\n\n<pre><code>def plotTrig():\n    fig, ax = plt.subplots()\n    x = np.arange(0,10,0.1)\n    for a in [1,2,3]:\n        ax.plot(x,a*np.sin(x),x,a*np.cos(x),label='trig a={}'.format(a))\n    ax.legend()\n</code></pre>\n\n<p>above is only simplified example. In practice I have much more functions and parameters, so solution with looping over colors is not very helpful</p>\n"}, {"tags": ["python", "user-interface", "tkinter"], "answers": [{"comments": [{"owner": {"reputation": 101, "user_id": 6501287, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QwvaG.jpg?s=128&g=1", "display_name": "Histoscienology", "link": "https://stackoverflow.com/users/6501287/histoscienology"}, "edited": false, "score": 0, "creation_date": 1466710375, "post_id": 37983837, "comment_id": 63444731, "body": "Thanks for that! But then it just keeps printing <code>File &quot;user_interface3.py&quot;, line 159, in initUI                  self.after(delay, self.initUI())</code> and returns the error:  <code>RuntimeError: maximum recursion depth exceeded while calling a Python object</code>  I think it somehow loops inside the code and never give me any output"}], "tags": [], "owner": {"reputation": 1149, "user_id": 5168028, "user_type": "registered", "accept_rate": 96, "profile_image": "https://lh4.googleusercontent.com/-nT_-2fs9ykY/AAAAAAAAAAI/AAAAAAAAABI/n9DanYw3AEk/photo.jpg?sz=128", "display_name": "Jonah Fleming", "link": "https://stackoverflow.com/users/5168028/jonah-fleming"}, "is_accepted": false, "score": 1, "last_activity_date": 1466663390, "creation_date": 1466663390, "answer_id": 37983837, "question_id": 37978529, "link": "https://stackoverflow.com/questions/37978529/gui-with-tkinter-auto-refresh-an-image/37983837#37983837", "title": "GUI with Tkinter, auto refresh an image", "body": "<p>You need to call <code>root.mainloop()</code> in <code>main()</code>. You need to call this in every Tkinter app.</p>\n"}], "owner": {"reputation": 101, "user_id": 6501287, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QwvaG.jpg?s=128&g=1", "display_name": "Histoscienology", "link": "https://stackoverflow.com/users/6501287/histoscienology"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 365, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1466666806, "creation_date": 1466630728, "last_edit_date": 1466666806, "question_id": 37978529, "link": "https://stackoverflow.com/questions/37978529/gui-with-tkinter-auto-refresh-an-image", "title": "GUI with Tkinter, auto refresh an image", "body": "<pre><code>from __future__ import print_function \nfrom Tkinter import * \nfrom tkFont import Font \n#import RPi.GPIO as GPIO \nfrom subprocess import call \nimport time \nfrom time import sleep \nfrom PIL import Image \nfrom PIL import ImageTk\n\n###STARTING A CLASS### \nclass MyDialog(Frame): \n    def __init__(self, parent): \n        Frame.__init__(self,parent)\n\n        self.parent = parent\n        self.mouse_pressed = False \n\n        self.initUI()\n\n    delay = 1000\n    def initUI(self):\n        self.tkimg = [None]\n        self.img = None\n\n        self.parent.title(\"High Tatras\")        \n\n        self.pack(fill=BOTH, expand=1)\n        self.img = Image.open(\"C:/Code_data/captures/test1_raw.png\")\n        self.img = Image.new('1', (100, 100), 0)\n        self.img = self.img.resize((400, 400), Image.ANTIALIAS)\n\n        self.tkimg[0] = ImageTk.PhotoImage(self.img)\n        #self.config(image=self.tkimg[0])\n        canvas = Canvas(self, width=400, height=800+20)\n        canvas.create_image(10, 10, anchor=NW, image=self.tkimg[0])\n        canvas.pack(fill=BOTH, expand=1)\n\n        self.update_idletasks()\n        self.after(delay, self.initUI())\n\n\ndef main():   \n    root = Tk()\n    ex = MyDialog(root)\n    ex.initUI()\n\n    root.wait_window(ex.top)\n\n\nif __name__ == '__main__':\n    main()\n</code></pre>\n\n<p>I'm a beginner in python, biulding a GUI that will auto refresh an image taken by a webcam and do other stuff omitted here. The image is saved locally as the same name as in the code(C:/Code_data/captures/test1_raw.png). Here is my solution, but after I ran the code, the GUI appeared for a second and disappeared. What I'm doing wrong? I'm wondering if there is efficient way to do it? </p>\n"}, {"tags": ["python", "c++", "r", "numpy"], "comments": [{"owner": {"reputation": 7445, "user_id": 1174378, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a8e5416e29987d91116420dc387e7153?s=128&d=identicon&r=PG", "display_name": "Mihai Todor", "link": "https://stackoverflow.com/users/1174378/mihai-todor"}, "edited": false, "score": 0, "creation_date": 1467281389, "post_id": 37978519, "comment_id": 63672080, "body": "I have no experience with Cython, but it looks like you need to figure out how to pass pointers (<code>double *</code>) to your C function (<code>Ckmeans_1d_dp</code>). For example, <code>cdef double y = np.repeat(1, N)</code>, doesn&#39;t look like a pointer to me. Also <code>np.ndarray[np.double_t, ndim=1] x</code> might need to be adjusted..."}, {"owner": {"reputation": 605, "user_id": 1451579, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/7ab106f4a479d95bd63adebe7d58c9dd?s=128&d=identicon&r=PG", "display_name": "Brans", "link": "https://stackoverflow.com/users/1451579/brans"}, "edited": false, "score": 0, "creation_date": 1482419655, "post_id": 37978519, "comment_id": 69774334, "body": "@ssdecontrol Was you able to do this?"}], "owner": {"reputation": 8493, "user_id": 2954547, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/a859521339cfc1d7bc8a3d3da7031cab?s=128&d=identicon&r=PG&f=1", "display_name": "shadowtalker", "link": "https://stackoverflow.com/users/2954547/shadowtalker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 208, "favorite_count": 1, "answer_count": 0, "score": 4, "last_activity_date": 1466630698, "creation_date": 1466630698, "question_id": 37978519, "link": "https://stackoverflow.com/questions/37978519/how-to-translate-an-r-wrapper-around-a-c-function-to-python-numpy", "title": "How to translate an R wrapper around a C++ function to Python/Numpy", "body": "<p>The R package <a href=\"https://cran.r-project.org/web/packages/Ckmeans.1d.dp\" rel=\"nofollow\">Ckmeans.1d.dp</a> relies on <a href=\"https://github.com/cran/Ckmeans.1d.dp/blob/master/src/Ckmeans.1d.dp_main.cpp\" rel=\"nofollow\">C++ code</a> to do 99% of its work.</p>\n\n<p>I want to use this functionality in Python without having to rely on RPy2. Therefore I want to \"translate\" the R wrapper to an analogous Python wrapper that operates on Numpy arrays the way the R code operates on R vectors. Is this possible? It seems like it should be, since the C++ code itself looks (to my untrained eye) like it stands up on its own.</p>\n\n<p>However, the documentation for Cython doesn't really cover this use case, of wrapping a existing C++ with Python. It's briefly mentioned <a href=\"http://docs.cython.org/src/userguide/external_C_code.html\" rel=\"nofollow\">here</a> and <a href=\"http://docs.cython.org/src/userguide/language_basics.html\" rel=\"nofollow\">here</a>, but I'm in way over my head since I've never worked with C++ before.</p>\n\n<p>Here's my attempt, which fails with a slew of \"<code>Cannot assign type 'double' to 'double *'</code> errors:</p>\n\n<h3>Directory structure</h3>\n\n<pre><code>.\n\u251c\u2500\u2500 Ckmeans.1d.dp  # clone of https://github.com/cran/Ckmeans.1d.dp\n\u251c\u2500\u2500 ckmeans\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 __init__.py\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 _ckmeans.pyx\n\u251c\u2500\u2500 setup.py\n\u2514\u2500\u2500 src\n \u00a0\u00a0 \u2514\u2500\u2500 Ckmeans.1d.dp_pymain.cpp\n</code></pre>\n\n<h3>src/Ckmeans.1d.dp_pymain.cpp</h3>\n\n<pre><code>#include \"../Ckmeans.1d.dp/src/Ckmeans.1d.dp.h\"\nstatic void Ckmeans_1d_dp(double *x, int* length, double *y, int * ylength,\n                          int* minK, int *maxK, int* cluster,\n                          double* centers, double* withinss, int* size)\n{\n    // Call C++ version one-dimensional clustering algorithm*/\n    if(*ylength != *length) { y = 0; }\n\n    kmeans_1d_dp(x, (size_t)*length, y, (size_t)(*minK), (size_t)(*maxK),\n                    cluster, centers, withinss, size);\n\n    // Change the cluster numbering from 0-based to 1-based\n    for(size_t i=0; i&lt; *length; ++i) {\n        cluster[i] ++;\n    }\n}\n</code></pre>\n\n<h3>ckmeans/<strong>init</strong>.py</h3>\n\n<pre><code>from ._ckmeans import ckmeans\n</code></pre>\n\n<h3>ckmeans/_ckmeans.pyx</h3>\n\n<pre><code>cimport numpy as np\nimport numpy as np\nfrom .ckmeans import ClusterResult\n\ncdef extern from \"../src/Ckmeans.1d.dp_pymain.cpp\":\n    void Ckmeans_1d_dp(double *x, int* length,\n                       double *y, int * ylength,\n                       int* minK, int *maxK,\n                       int* cluster, double* centers, double* withinss, int* size)\n\ndef ckmeans(np.ndarray[np.double_t, ndim=1] x, int* min_k, int* max_k):\n    cdef int n_x = len(x)\n    cdef double y = np.repeat(1, N)\n    cdef int n_y = len(y)\n    cdef double cluster\n    cdef double centers\n    cdef double within_ss\n    cdef int sizes\n    Ckmeans_1d_dp(x, n_x, y, n_y, min_k, max_k, cluster, centers, within_ss, sizes)\n    return (np.array(cluster), np.array(centers), np.array(within_ss), np.array(sizes))\n</code></pre>\n"}, {"tags": ["python", "matplotlib", "cluster-analysis", "seaborn"], "owner": {"reputation": 593, "user_id": 399641, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/QKq1v.jpg?s=128&g=1", "display_name": "Hersh Bhargava", "link": "https://stackoverflow.com/users/399641/hersh-bhargava"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 425, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1466630494, "creation_date": 1466630494, "question_id": 37978471, "link": "https://stackoverflow.com/questions/37978471/seaborn-clustermap-plot-all-parameters-but-only-cluster-based-on-some", "title": "Seaborn Clustermap: Plot all parameters but only cluster based on some", "body": "<p>I have a dataset that consists of elements with k properties, and I want to be able to hierarchically cluster them based on only some of those properties, but I want to graph a heatmap + dendrogram that contains all of the properties. I am using <code>seaborn.clustermap</code> (<a href=\"https://stanford.edu/~mwaskom/software/seaborn/generated/seaborn.clustermap.html\" rel=\"nofollow\">link</a>) to handle the clustering and plotting.</p>\n\n<p>My dataset looks like this:</p>\n\n<pre><code>| ID | Property A | Property B | ... | Property k |\n| AA |    val1    |    val2    | ... |   valk     |\n| AB |    val1    |    val2    | ... |   valk     |\netc.\n</code></pre>\n\n<p>It is straightforward to create an array of k-tuples and pass them into Seaborn for clustering, but only the values that are passed are plotted. How can I plot all values (the output would have a column for each property), but make Seaborn only compute the clusters based on, for instance, Property A and Property B?</p>\n\n<p>My code is straightforward and somewhat irrelevant at this point:</p>\n\n<pre><code># Generate the datamatrix\ndata = np.array(dataMatrix)\nframe = pandas.DataFrame(data, columns = markerHeaders, index = headers)\ng = sns.clustermap(frame, metric=\"euclidean\", figsize=(30, 20), cmap=sns.diverging_palette(10, 220, sep=80, as_cmap=True), row_colors = tuple(colors))\ng.savefig(clusterForm + \".png\")\n</code></pre>\n"}, {"tags": ["python", "django", "url", "encryption", "signer"], "comments": [{"owner": {"reputation": 5245, "user_id": 3741729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zAt11.png?s=128&g=1", "display_name": "PatNowak", "link": "https://stackoverflow.com/users/3741729/patnowak"}, "edited": false, "score": 0, "creation_date": 1466630465, "post_id": 37978411, "comment_id": 63402875, "body": "Add custom filter, which strips out the part with digits and colon or try to create wrapper function for url.value() and there ignore the digit part."}, {"owner": {"reputation": 1602, "user_id": 5682919, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4rC18.png?s=128&g=1", "display_name": "jsanchezs", "link": "https://stackoverflow.com/users/5682919/jsanchezs"}, "reply_to_user": {"reputation": 5245, "user_id": 3741729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zAt11.png?s=128&g=1", "display_name": "PatNowak", "link": "https://stackoverflow.com/users/3741729/patnowak"}, "edited": false, "score": 0, "creation_date": 1466630655, "post_id": 37978411, "comment_id": 63402952, "body": "Thanks for your answer, i can&#39;t exactly ignore the pk digits because when i unsign the signature i need that value...i mean, i need to unsign that pk as well but not that it shows along with the signature in the url"}, {"owner": {"reputation": 5245, "user_id": 3741729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zAt11.png?s=128&g=1", "display_name": "PatNowak", "link": "https://stackoverflow.com/users/3741729/patnowak"}, "edited": false, "score": 1, "creation_date": 1466630732, "post_id": 37978411, "comment_id": 63402986, "body": "So create this wrapper function for that. You will keep your full value, but you won&#39;t display it that way."}, {"owner": {"reputation": 1602, "user_id": 5682919, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4rC18.png?s=128&g=1", "display_name": "jsanchezs", "link": "https://stackoverflow.com/users/5682919/jsanchezs"}, "reply_to_user": {"reputation": 5245, "user_id": 3741729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zAt11.png?s=128&g=1", "display_name": "PatNowak", "link": "https://stackoverflow.com/users/3741729/patnowak"}, "edited": false, "score": 0, "creation_date": 1466630808, "post_id": 37978411, "comment_id": 63403018, "body": "Any sample code ? to be honest i&#39;ve never used a wrapper"}, {"owner": {"reputation": 5245, "user_id": 3741729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zAt11.png?s=128&g=1", "display_name": "PatNowak", "link": "https://stackoverflow.com/users/3741729/patnowak"}, "edited": false, "score": 0, "creation_date": 1466630914, "post_id": 37978411, "comment_id": 63403072, "body": "In my understanding wrapper function is just a regular function, in which you cover other function. Consider this: <code>def getMyValue(): print(url.value() + &quot;test&quot;)</code>. All you have to do is declare in your View similar function and use <code>re</code> module."}, {"owner": {"reputation": 1602, "user_id": 5682919, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4rC18.png?s=128&g=1", "display_name": "jsanchezs", "link": "https://stackoverflow.com/users/5682919/jsanchezs"}, "reply_to_user": {"reputation": 5245, "user_id": 3741729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zAt11.png?s=128&g=1", "display_name": "PatNowak", "link": "https://stackoverflow.com/users/3741729/patnowak"}, "edited": false, "score": 0, "creation_date": 1466634491, "post_id": 37978411, "comment_id": 63404399, "body": "Gonna try it, thanks a lot !"}, {"owner": {"reputation": 2414, "user_id": 2013448, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rEEjx.png?s=128&g=1", "display_name": "srodriguex", "link": "https://stackoverflow.com/users/2013448/srodriguex"}, "edited": false, "score": 0, "creation_date": 1509634420, "post_id": 37978411, "comment_id": 81105132, "body": "@jsanchezs I have the same doubt because I want to store the encrypted value so it makes no sense to also store the value itself in plain text . The problem is precisely how to unsign that value without knowing it."}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 9988604, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-xIm8Jk-uJgY/AAAAAAAAAAI/AAAAAAAAIOQ/SOgfggj2nKM/photo.jpg?sz=128", "display_name": "rampon", "link": "https://stackoverflow.com/users/9988604/rampon"}, "is_accepted": false, "score": 1, "last_activity_date": 1529923017, "creation_date": 1529923017, "answer_id": 51021482, "question_id": 37978411, "link": "https://stackoverflow.com/questions/37978411/django-signer-value/51021482#51021482", "title": "Django signer value", "body": "<p>try this for signing:</p>\n\n<pre><code>from django.core import signing \n\nsigned_value = signing.dumps('mytest')\n</code></pre>\n\n<p>and this for unsigning:</p>\n\n<pre><code>from django.core import signing \n\nunsigned_value = signing.loads(signed_value)\n</code></pre>\n\n<p>Regards</p>\n"}, {"tags": [], "owner": {"reputation": 26, "user_id": 5373824, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rExt2.jpg?s=128&g=1", "display_name": "svillga", "link": "https://stackoverflow.com/users/5373824/svillga"}, "is_accepted": true, "score": 1, "last_activity_date": 1544555137, "creation_date": 1544555137, "answer_id": 53730779, "question_id": 37978411, "link": "https://stackoverflow.com/questions/37978411/django-signer-value/53730779#53730779", "title": "Django signer value", "body": "<p>Try first with a django filter for pk's signature and read the urls documentation for passing the pk and signature to the view</p>\n\n<p><a href=\"https://docs.djangoproject.com/en/1.11/topics/http/urls/#including-other-urlconfs\" rel=\"nofollow noreferrer\">https://docs.djangoproject.com/en/1.11/topics/http/urls/#including-other-urlconfs</a></p>\n"}], "owner": {"reputation": 1602, "user_id": 5682919, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4rC18.png?s=128&g=1", "display_name": "jsanchezs", "link": "https://stackoverflow.com/users/5682919/jsanchezs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1321, "favorite_count": 1, "accepted_answer_id": 53730779, "answer_count": 2, "score": 3, "last_activity_date": 1598167250, "creation_date": 1466630293, "question_id": 37978411, "link": "https://stackoverflow.com/questions/37978411/django-signer-value", "title": "Django signer value", "body": "<p>Im trying to encrypt a django model pk to send it via url from a template using django signer :</p>\n\n<pre><code>signer = Signer()\nvalue = signer.sign(pk)\nurl = {% myapp:url value %}\n</code></pre>\n\n<p>But i get in my url the pk plus the signature, like this example (pk=110) :</p>\n\n<pre><code>'110:EkfQJafvGyiofrdGnuthdxImIJw'\n</code></pre>\n\n<p>What i want it's only to retrieve the signature without the pk (110 or any value i send).</p>\n\n<p>Any idea how ?, or any other way to encrypt the pk without using anothe field in the model ??</p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["python", "numpy", "parallel-processing", "dask"], "answers": [{"comments": [{"owner": {"reputation": 47893, "user_id": 616616, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/8749ec52cee260c4c1f67f2dec29d957?s=128&d=identicon&r=PG", "display_name": "MRocklin", "link": "https://stackoverflow.com/users/616616/mrocklin"}, "reply_to_user": {"reputation": 483, "user_id": 3168283, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/xXxmF.jpg?s=128&g=1", "display_name": "takachanbo", "link": "https://stackoverflow.com/users/3168283/takachanbo"}, "edited": false, "score": 0, "creation_date": 1466702606, "post_id": 37978626, "comment_id": 63439897, "body": "Can you provide a minimal complete verifiable example? <a href=\"http://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a>"}], "tags": [], "owner": {"reputation": 47893, "user_id": 616616, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/8749ec52cee260c4c1f67f2dec29d957?s=128&d=identicon&r=PG", "display_name": "MRocklin", "link": "https://stackoverflow.com/users/616616/mrocklin"}, "is_accepted": false, "score": 0, "last_activity_date": 1466635808, "last_edit_date": 1466635808, "creation_date": 1466631150, "answer_id": 37978626, "question_id": 37978336, "link": "https://stackoverflow.com/questions/37978336/parallelizing-3d-numpy-array-calculation-using-dask-array-core-map-blocks/37978626#37978626", "title": "Parallelizing 3D numpy array calculation using dask.array.core.map_blocks", "body": "<p>Chunks should either be a tuple of integers specifying a uniform chunkshape across the full array</p>\n\n<pre><code>chunks=(49, 32, 12)\n</code></pre>\n\n<p>Or it should be a tuple of tuples, each tuple defining how to chunk up each dimension.</p>\n\n<pre><code>chunks=((20, 20, 9), (8, 8, 8, 8), (12, 24, 24, 12))\n</code></pre>\n\n<p>In your case you appear to be mixing these forms</p>\n\n<pre><code>chunks=(49, 32, (12, 12, 12, 12, 12, 12))\n</code></pre>\n\n<p>You probably intended one of the following:</p>\n\n<pre><code>chunks=(49, 32, 12)\nchunks=((49,), (32,), (12, 12, 12, 12, 12, 12))\n</code></pre>\n\n<p>Given that the last dimension is uniformly chunked (all 12s) I recommend just using <code>(49, 32, 12)</code></p>\n"}], "owner": {"reputation": 483, "user_id": 3168283, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/xXxmF.jpg?s=128&g=1", "display_name": "takachanbo", "link": "https://stackoverflow.com/users/3168283/takachanbo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 350, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1466635808, "creation_date": 1466630053, "question_id": 37978336, "link": "https://stackoverflow.com/questions/37978336/parallelizing-3d-numpy-array-calculation-using-dask-array-core-map-blocks", "title": "Parallelizing 3D numpy array calculation using dask.array.core.map_blocks", "body": "<p>I have a 3D numpy array (dimensions: depth, latitude, longtitude) and I am trying to do some parallelized calculation using the data along the depth axis at each lat-lon point and so far I have been unsuccessful. I've looked at the documentation for <code>dask.array.core.map_blocks</code> but it has not been helpful. Here is what I am doing:</p>\n\n<pre><code>N2_dask = da.from_array(N2_naned, chunks=(49, 32, (12, 12, 12, 12, 12, 12)))\nzN2_dask = da.from_array(-zN2_agg[t], chunks=(49, 32, (12, 12, 12, 12, 12, 12)))\nlat_dask = da.from_array(lat_agg, chunks=(32))\nlon_dask = da.from_array(lon_agg, chunks=((12, 12, 12, 12, 12, 12)))\n\nfor j in range(len(lat_dask)):\n    for i in range(len(lon_dask)):\n        f = da.core.map_blocks(baroclinic.neutral_modes_from_N2_profile(\n            zN2_dask[:, j, i], N2_dask[:, j, i], gsw.earth.f(lat_dask[j, i]), **kwargs))\n        zphi, Rd, vd = f.compute()\n</code></pre>\n\n<p>where baroclinic.neutral_modes_from_N2_profile is my function. I get an error as the follows:</p>\n\n<pre><code>AssertionErrorTraceback (most recent call last)\n&lt;ipython-input-61-e58a7b54c470&gt; in &lt;module&gt;()\n      6         print zN2_dask[:, j, i]\n      7         f = da.core.map_blocks(baroclinic.neutral_modes_from_N2_profile(\n----&gt; 8                 zN2_dask[:, j, i], N2_dask[:, j, i], gsw.earth.f(lat_dask[j, i]), **kwargs))\n      9         zphi, Rd, vd = f.compute()\n\n/home/takaya/.conda/envs/oceanmodes/lib/python2.7/site-packages/dask/array/core.pyc in __getitem__(self, index)\n   1023             return self\n   1024 \n-&gt; 1025         dsk, chunks = slice_array(out, self.name, self.chunks, index)\n   1026 \n   1027         return Array(merge(self.dask, dsk), out, chunks, dtype=self._dtype)\n\n/home/takaya/.conda/envs/oceanmodes/lib/python2.7/site-packages/dask/array/slicing.pyc in slice_array(out_name, in_name, blockdims, index)\n    134 \n    135     # Pass down to next function\n--&gt; 136     dsk_out, bd_out = slice_with_newaxes(out_name, in_name, blockdims, index)\n    137 \n    138     bd_out = tuple(map(tuple, bd_out))\n\n/home/takaya/.conda/envs/oceanmodes/lib/python2.7/site-packages/dask/array/slicing.pyc in slice_with_newaxes(out_name, in_name, blockdims, index)\n    152 \n    153     # Pass down and do work\n--&gt; 154     dsk, blockdims2 = slice_wrap_lists(out_name, in_name, blockdims, index2)\n    155 \n    156     # Insert \",0\" into the key:  ('x', 2, 3) -&gt; ('x', 0, 2, 0, 3)\n\n/home/takaya/.conda/envs/oceanmodes/lib/python2.7/site-packages/dask/array/slicing.pyc in slice_wrap_lists(out_name, in_name, blockdims, index)\n    183     shape = tuple(map(sum, blockdims))\n    184     assert all(isinstance(i, (slice, list, int, long)) for i in index)\n--&gt; 185     assert len(blockdims) == len(index)\n    186     for bd, i in zip(blockdims, index):\n    187         check_index(i, sum(bd))\n\nAssertionError: \n</code></pre>\n\n<p>Can anyone tell me why this gives me an AssertionError? Thank you in advance!</p>\n"}, {"tags": ["python", "arrays", "numpy"], "answers": [{"tags": [], "owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "is_accepted": false, "score": 1, "last_activity_date": 1466630135, "creation_date": 1466630135, "answer_id": 37978362, "question_id": 37978306, "link": "https://stackoverflow.com/questions/37978306/numpy-set-1-element-of-each-row-based-on-a-column-index-array/37978362#37978362", "title": "Numpy: Set 1 element of each row based on a column index array", "body": "<p>You can use <a href=\"http://docs.scipy.org/doc/numpy/user/basics.broadcasting.html\" rel=\"nofollow\"><code>NumPy broadcasting</code></a> to directly get <code>c</code> from <code>b</code> by using <code>max</code> of <code>b</code> as the number of columns in the output array, like so -</p>\n\n<pre><code>(b[:,None] == np.arange(b.max()+1)).astype(float) \n</code></pre>\n\n<p>Sample run -</p>\n\n<pre><code>In [484]: b\nOut[484]: array([0, 1, 2, 1])\n\nIn [485]: (b[:,None] == np.arange(b.max()+1)).astype(float)\nOut[485]: \narray([[ 1.,  0.,  0.],\n       [ 0.,  1.,  0.],\n       [ 0.,  0.,  1.],\n       [ 0.,  1.,  0.]])\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 288763, "user_id": 487339, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wbe4o.png?s=128&g=1", "display_name": "DSM", "link": "https://stackoverflow.com/users/487339/dsm"}, "edited": false, "score": 0, "creation_date": 1466630324, "post_id": 37978377, "comment_id": 63402817, "body": "Do you think this Q is close enough to <a href=\"https://stackoverflow.com/questions/18968660/construct-two-dimensional-numpy-array-from-indices-and-values-of-a-one-dimension\">this</a> to close as dup?  Our answers are similar, and Divakar and Jaime&#39;s are similar."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "reply_to_user": {"reputation": 288763, "user_id": 487339, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wbe4o.png?s=128&g=1", "display_name": "DSM", "link": "https://stackoverflow.com/users/487339/dsm"}, "edited": false, "score": 0, "creation_date": 1466630425, "post_id": 37978377, "comment_id": 63402858, "body": "@DSM: Yeah, that looks like a reasonable dupe target."}, {"owner": {"reputation": 16194, "user_id": 667883, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a39234ae82a5898cba1d70b5bff80ec3?s=128&d=identicon&r=PG", "display_name": "Allen", "link": "https://stackoverflow.com/users/667883/allen"}, "reply_to_user": {"reputation": 288763, "user_id": 487339, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wbe4o.png?s=128&g=1", "display_name": "DSM", "link": "https://stackoverflow.com/users/487339/dsm"}, "edited": false, "score": 0, "creation_date": 1466630915, "post_id": 37978377, "comment_id": 63403073, "body": "Thanks user2357112. This is exactly what I wanted. @DSM, just wondering how you could find the other question so quickly? I did try to search for a while but couldn&#39;t find a similar question."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "reply_to_user": {"reputation": 16194, "user_id": 667883, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a39234ae82a5898cba1d70b5bff80ec3?s=128&d=identicon&r=PG", "display_name": "Allen", "link": "https://stackoverflow.com/users/667883/allen"}, "edited": false, "score": 0, "creation_date": 1466630967, "post_id": 37978377, "comment_id": 63403104, "body": "@Allen: It&#39;s probably easier for him to remember that question since he answered it."}, {"owner": {"reputation": 16194, "user_id": 667883, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a39234ae82a5898cba1d70b5bff80ec3?s=128&d=identicon&r=PG", "display_name": "Allen", "link": "https://stackoverflow.com/users/667883/allen"}, "edited": false, "score": 0, "creation_date": 1466631073, "post_id": 37978377, "comment_id": 63403145, "body": "oh, that makes sense. now. Thanks."}], "tags": [], "owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "is_accepted": true, "score": 4, "last_activity_date": 1466630197, "creation_date": 1466630197, "answer_id": 37978377, "question_id": 37978306, "link": "https://stackoverflow.com/questions/37978306/numpy-set-1-element-of-each-row-based-on-a-column-index-array/37978377#37978377", "title": "Numpy: Set 1 element of each row based on a column index array", "body": "<p>This is a job for <a href=\"http://docs.scipy.org/doc/numpy/reference/arrays.indexing.html\" rel=\"nofollow\">advanced indexing</a>:</p>\n\n<pre><code>a[np.arange(a.shape[0]), b] = 1\n</code></pre>\n\n<p>For arrays <code>A</code>, <code>I</code>, and <code>J</code> where <code>I</code> and <code>J</code> have integer dtype and identical shape, <code>A[I, J]</code> selects all entries <code>A[I[n], J[n]]</code> of <code>A</code>. The assignment then sets these entries to <code>1</code>.</p>\n"}], "owner": {"reputation": 16194, "user_id": 667883, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a39234ae82a5898cba1d70b5bff80ec3?s=128&d=identicon&r=PG", "display_name": "Allen", "link": "https://stackoverflow.com/users/667883/allen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2596, "favorite_count": 0, "closed_date": 1466630976, "accepted_answer_id": 37978377, "answer_count": 2, "score": 3, "last_activity_date": 1466630197, "creation_date": 1466629914, "question_id": 37978306, "link": "https://stackoverflow.com/questions/37978306/numpy-set-1-element-of-each-row-based-on-a-column-index-array", "closed_reason": "Duplicate", "title": "Numpy: Set 1 element of each row based on a column index array", "body": "<p>Suppose I have the following arrays:</p>\n\n<pre><code>a = np.zeros([4,3])\nb = np.asarray([0,1,2,1])\n</code></pre>\n\n<p>Now how can I set an element on each row in array a to 1 based on the column index indicated by array b? What I need is an array c which looks like below:</p>\n\n<pre><code>[[ 1.  0.  0.]\n [ 0.  1.  0.]\n [ 0.  0.  1.]\n [ 0.  1.  0.]]\n</code></pre>\n\n<p>Alternatively, is there a way to directly convert array b to array c?</p>\n"}, {"tags": ["python", "opencv"], "answers": [{"tags": [], "owner": {"reputation": 231, "user_id": 5960055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de631e9fe926fcf1663c8419c7d8fbbb?s=128&d=identicon&r=PG&f=1", "display_name": "Georges", "link": "https://stackoverflow.com/users/5960055/georges"}, "is_accepted": false, "score": 1, "last_activity_date": 1466630729, "creation_date": 1466630729, "answer_id": 37978531, "question_id": 37978271, "link": "https://stackoverflow.com/questions/37978271/opencv-python-incorrect-blocksize/37978531#37978531", "title": "Opencv python incorrect blocksize", "body": "<p>If you do call the <code>help()</code> for that function in python, the call needs to respect the following form:</p>\n\n<pre><code>Help on built-in function adaptiveThreshold in module cv2:\n\nadaptiveThreshold(...)\n    adaptiveThreshold(src, maxValue, adaptiveMethod, thresholdType, blockSize, C[, dst]) \n</code></pre>\n\n<p>The value <code>3</code> between the <code>adaptiveMethod</code> and <code>thresholdType</code> in your call should be omitted.</p>\n\n<p>And <code>C</code> is subtracted from the mean or weighted mean calculated maybe insert a value <code>e.g. 2</code>.</p>\n\n<p>example call:\n<code>mycall= cv2.adaptiveThreshold(img, 255, cv2.ADAPTIVE_THRESH_GAUSSIAN_C,\\\n  cv2.THRESH_BINARY, 11, 2)</code></p>\n"}, {"comments": [{"owner": {"reputation": 575, "user_id": 5275692, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/860f95825286c237212d5313d57a625f?s=128&d=identicon&r=PG&f=1", "display_name": "user5275692", "link": "https://stackoverflow.com/users/5275692/user5275692"}, "edited": false, "score": 0, "creation_date": 1466816317, "post_id": 37978540, "comment_id": 63489080, "body": "Thanks, I think what confused me was you seem to be missing the &#39;dst&#39; or destination src for the file. You have specified an input, but not an output."}, {"owner": {"reputation": 10061, "user_id": 1601291, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6dc4421361b876e9d58c10fa16f49386?s=128&d=identicon&r=PG", "display_name": "Aurelius", "link": "https://stackoverflow.com/users/1601291/aurelius"}, "reply_to_user": {"reputation": 575, "user_id": 5275692, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/860f95825286c237212d5313d57a625f?s=128&d=identicon&r=PG&f=1", "display_name": "user5275692", "link": "https://stackoverflow.com/users/5275692/user5275692"}, "edited": false, "score": 0, "creation_date": 1467051353, "post_id": 37978540, "comment_id": 63560047, "body": "@user5275692 In the Python bindings, the output of the algorithm is almost always returned from the function, so <code>filtered_image</code> is the output. The <code>dst</code>parameter is purely optional and a holdover from the C++ API."}], "tags": [], "owner": {"reputation": 10061, "user_id": 1601291, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6dc4421361b876e9d58c10fa16f49386?s=128&d=identicon&r=PG", "display_name": "Aurelius", "link": "https://stackoverflow.com/users/1601291/aurelius"}, "is_accepted": true, "score": 4, "last_activity_date": 1466630774, "creation_date": 1466630774, "answer_id": 37978540, "question_id": 37978271, "link": "https://stackoverflow.com/questions/37978271/opencv-python-incorrect-blocksize/37978540#37978540", "title": "Opencv python incorrect blocksize", "body": "<p>You are calling <code>adaptiveThreshold</code> with an extra argument. You have incorrectly placed a <code>3</code> in between the <code>adaptiveMethod</code> and <code>thresholdType</code> arguments. In your invocation, the <code>cv2.THRESH_BINARY</code> flag is in the position expected for the <code>blockSize</code> value. Incidentally, <code>cv2.THRESH_BINARY</code> evaluates to zero, hence the error you see. The correct way to call your function is:</p>\n\n<pre><code>filtered_image = cv2.adaptiveThreshold(im, 255, cv2.ADAPTIVE_THRESH_GAUSSIAN_C, cv2.THRESH_BINARY, 3, 0)\n</code></pre>\n"}], "owner": {"reputation": 575, "user_id": 5275692, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/860f95825286c237212d5313d57a625f?s=128&d=identicon&r=PG&f=1", "display_name": "user5275692", "link": "https://stackoverflow.com/users/5275692/user5275692"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 211, "favorite_count": 0, "accepted_answer_id": 37978540, "answer_count": 2, "score": 1, "last_activity_date": 1466635189, "creation_date": 1466629741, "last_edit_date": 1466635189, "question_id": 37978271, "link": "https://stackoverflow.com/questions/37978271/opencv-python-incorrect-blocksize", "title": "Opencv python incorrect blocksize", "body": "<pre><code>def adaptive_gaussian_thresholding(self, filename):\n    im = cv2.imread(filename, 0)\n    filtered_image = cv2.adaptiveThreshold(im, 255, cv2.ADAPTIVE_THRESH_GAUSSIAN_C, 3, cv2.THRESH_BINARY, 3, 0)\n    cv2.imwrite(filename, filtered_image)\n</code></pre>\n\n<blockquote>\n<pre><code>filtered_image = cv2.adaptiveThreshold(im, 255, cv2.ADAPTIVE_THRESH_GAUSSIAN_C, 3, cv2.THRESH_BINARY, 3, 0)\nerror: /root/opencv/modules/imgproc/src/thresh.cpp:1287: error: (-215) blockSize % 2 == 1 &amp;&amp; blockSize &gt; 1 in function adaptiveThreshold\n</code></pre>\n</blockquote>\n\n<p>The blocksize or tile size is the number of pixels^2 to be used for the kernel that is passed to the procedure. It needs to be an odd number. I am unsure if this is a bug or something else is wrong?</p>\n\n<p><a href=\"http://docs.opencv.org/2.4/modules/imgproc/doc/miscellaneous_transformations.html#cv2.adaptiveThreshold\" rel=\"nofollow\">Official documentation</a></p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 71409, "user_id": 3125566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QcWOt.jpg?s=128&g=1", "display_name": "Moses Koledoye", "link": "https://stackoverflow.com/users/3125566/moses-koledoye"}, "edited": false, "score": 3, "creation_date": 1466629739, "post_id": 37978260, "comment_id": 63402550, "body": "<code>save.close()</code> should close this problem"}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 2, "creation_date": 1466630081, "post_id": 37978260, "comment_id": 63402701, "body": "Note that using the context manager <code>with open(...) as save:</code> would have <code>save</code>d (stop giggling at the back) you from this."}], "answers": [{"tags": [], "owner": {"reputation": 5245, "user_id": 3741729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zAt11.png?s=128&g=1", "display_name": "PatNowak", "link": "https://stackoverflow.com/users/3741729/patnowak"}, "is_accepted": false, "score": 3, "last_activity_date": 1466629760, "creation_date": 1466629760, "answer_id": 37978273, "question_id": 37978260, "link": "https://stackoverflow.com/questions/37978260/when-i-write-to-a-text-file-in-python-3-5-1-the-text-file-is-blank/37978273#37978273", "title": "When I write to a text file in python 3.5.1 the text file is blank", "body": "<p>In Python every method call is with parentheses. Just use <code>save.close()</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 544, "user_id": 1030736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cbb88ddd0ccb2af00b2784b8a25fb89?s=128&d=identicon&r=PG", "display_name": "LukeGeneva", "link": "https://stackoverflow.com/users/1030736/lukegeneva"}, "is_accepted": false, "score": 3, "last_activity_date": 1466630247, "creation_date": 1466630247, "answer_id": 37978397, "question_id": 37978260, "link": "https://stackoverflow.com/questions/37978260/when-i-write-to-a-text-file-in-python-3-5-1-the-text-file-is-blank/37978397#37978397", "title": "When I write to a text file in python 3.5.1 the text file is blank", "body": "<p>The save.close part should be the culprit here. Try changing it to:</p>\n\n<pre><code>save.close()\n</code></pre>\n\n<p>It can be a hard bug to catch because this won't cause an exception. The interpreter will silently return a value such as:</p>\n\n<pre><code>&lt;built-in method close of _io.TextIOWrapper object at 0x003E7CB0&gt;\n</code></pre>\n\n<p>Try entering in the contents of main() line-by-line interactively to see an example if you'd like.</p>\n\n<p>The following would be even better, as you wouldn't have to call the close method yourself:</p>\n\n<pre><code>with open('type.txt', 'w') as save:\n    save.write(types)\n</code></pre>\n"}], "owner": {"reputation": 135, "user_id": 4572812, "user_type": "registered", "profile_image": "https://graph.facebook.com/808416889194240/picture?type=large", "display_name": "Wesley James Holroyd Newman", "link": "https://stackoverflow.com/users/4572812/wesley-james-holroyd-newman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1186, "favorite_count": 0, "closed_date": 1467835909, "answer_count": 2, "score": -1, "last_activity_date": 1466633415, "creation_date": 1466629679, "last_edit_date": 1466633415, "question_id": 37978260, "link": "https://stackoverflow.com/questions/37978260/when-i-write-to-a-text-file-in-python-3-5-1-the-text-file-is-blank", "closed_reason": "Not suitable for this site", "title": "When I write to a text file in python 3.5.1 the text file is blank", "body": "<p>I'm writing to a text file but the final content is blank. Can anyone help.</p>\n\n<pre><code>def main():\n    types = input('What is the device type? Phone or Tablet')\n    save = open('type.txt', 'w')\n    save.write(types)\n    save.close\n    if types == 'phone':\n        import Type1\n    elif types == 'tablet':\n        import Type2\n    else:\n        main()\n\nmain()\n</code></pre>\n\n<p>I've tried what I could but I'm not an expert on python.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 94141, "user_id": 2867928, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/a8DM1.jpg?s=128&g=1", "display_name": "kasravnd", "link": "https://stackoverflow.com/users/2867928/kasravnd"}, "edited": false, "score": 0, "creation_date": 1466629574, "post_id": 37978225, "comment_id": 63402479, "body": "What&#39;s your python version? and what&#39;s wrong with your current code?"}, {"owner": {"reputation": 92827, "user_id": 369, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/DHcF2.png?s=128&g=1", "display_name": "Blorgbeard", "link": "https://stackoverflow.com/users/369/blorgbeard"}, "edited": false, "score": 0, "creation_date": 1466629601, "post_id": 37978225, "comment_id": 63402491, "body": "Are you getting an error? The wrong output? You just want your code &quot;verified&quot;? What is your question?"}, {"owner": {"reputation": 1491, "user_id": 6480793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fe10b5df5ec1164b5bade347d8599f8?s=128&d=identicon&r=PG&f=1", "display_name": "Delioth", "link": "https://stackoverflow.com/users/6480793/delioth"}, "edited": false, "score": 1, "creation_date": 1466629710, "post_id": 37978225, "comment_id": 63402538, "body": "Regular expressions are overkill in this program- use python&#39;s <code>string.replace()</code> builtin- <code>i.e. word = word.replace(al, letters[i])</code>"}], "answers": [{"comments": [{"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1466635304, "post_id": 37978435, "comment_id": 63404621, "body": "<code>repl = [</code> shouldn&#39;t that be <code>repl = {</code>?"}, {"owner": {"reputation": 1279, "user_id": 1543263, "user_type": "registered", "accept_rate": 23, "profile_image": "https://i.stack.imgur.com/WaOlX.png?s=128&g=1", "display_name": "Fernando", "link": "https://stackoverflow.com/users/1543263/fernando"}, "edited": false, "score": 0, "creation_date": 1466690621, "post_id": 37978435, "comment_id": 63431450, "body": "That is not working for me. However, I found a way of doing that."}], "tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 5, "last_activity_date": 1466636272, "last_edit_date": 1466636272, "creation_date": 1466630375, "answer_id": 37978435, "question_id": 37978225, "link": "https://stackoverflow.com/questions/37978225/replace-some-accented-letters-from-word-in-python/37978435#37978435", "title": "Replace some accented letters from word in python", "body": "<p>A simple translation dictionary should do the trick.  For each letter, if the letter is in the dictionary, use its translation.  Otherwise, use the original.  Join the individual characters back into a word.</p>\n\n<pre><code>def removeAccents(word):\n    repl = {'\u00e0': 'a', '\u00e1': 'a', '\u00e2': 'a', '\u00e3': 'a',\n            '\u00e9': 'e', '\u00ea': 'e',\n            '\u00ed': 'i',\n            '\u00f3': 'o', '\u00f4': 'o', '\u00f5': 'o',\n            '\u00fa': 'u', '\u00fc': 'u'}\n\n    new_word = ''.join([repl[c] if c in repl else c for c in word])\n    return new_word\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5839, "user_id": 6454584, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YR4dt.png?s=128&g=1", "display_name": "Zroq", "link": "https://stackoverflow.com/users/6454584/zroq"}, "is_accepted": false, "score": 1, "last_activity_date": 1466631985, "creation_date": 1466631985, "answer_id": 37978821, "question_id": 37978225, "link": "https://stackoverflow.com/questions/37978225/replace-some-accented-letters-from-word-in-python/37978821#37978821", "title": "Replace some accented letters from word in python", "body": "<p>You can view the Unidecode library for Python3.</p>\n\n<p>For example:</p>\n\n<pre><code>from unidecode import unidecode\n\na = ['\u00e0', '\u00e1', '\u00e2', '\u00e3', '\u00e9', '\u00ea', '\u00ed', '\u00f3', '\u00f4', '\u00f5', '\u00fa', '\u00fc']\n\nfor k in a:\n    print (unidecode(u'{0}'.format(k)))\n</code></pre>\n\n<p>Result:</p>\n\n<p>a\na\na\na\ne\ne\ni\no\no\no\nu\nu</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5547025"}, "edited": false, "score": 0, "creation_date": 1466690327, "post_id": 37993633, "comment_id": 63431213, "body": "Using <code>+=</code> to concat string is not very efficient. Better use <code>&#39;&#39;.join(finalChars)</code> where <code>finalChars</code> starts as <code>[]</code> and collects the letters."}], "tags": [], "owner": {"reputation": 1279, "user_id": 1543263, "user_type": "registered", "accept_rate": 23, "profile_image": "https://i.stack.imgur.com/WaOlX.png?s=128&g=1", "display_name": "Fernando", "link": "https://stackoverflow.com/users/1543263/fernando"}, "is_accepted": false, "score": 0, "last_activity_date": 1466689919, "creation_date": 1466689919, "answer_id": 37993633, "question_id": 37978225, "link": "https://stackoverflow.com/questions/37978225/replace-some-accented-letters-from-word-in-python/37993633#37993633", "title": "Replace some accented letters from word in python", "body": "<p>I have finally solved my problem:</p>\n\n<pre><code>#! /usr/bin/python\n# -*- coding: utf-8 -*-\n\nimport sys\n\ndef removeAccents(word):\n    replaceDict = {'\u00e0'.decode('utf-8'): 'a', \n                   '\u00e1'.decode('utf-8'): 'a',\n                   '\u00e2'.decode('utf-8'): 'a',\n                   '\u00e3'.decode('utf-8'): 'a',\n                   '\u00e9'.decode('utf-8'): 'e',\n                   '\u00ea'.decode('utf-8'): 'e',\n                   '\u00ed'.decode('utf-8'): 'i',\n                   '\u00f3'.decode('utf-8'): 'o',\n                   '\u00f4'.decode('utf-8'): 'o',\n                   '\u00f5'.decode('utf-8'): 'o',\n                   '\u00fa'.decode('utf-8'): 'u',\n                   '\u00fc'.decode('utf-8'): 'u'}\n\n    finalWord = ''\n    for letter in word:\n        if letter in replaceDict:\n            finalWord += replaceDict[letter]\n        else:\n            finalWord += letter\n    return finalWord\n\n\nword = (sys.argv[1]).decode('utf-8')\nprint removeAccents(word)\n</code></pre>\n\n<p>This just works as I expected.</p>\n"}, {"tags": [], "owner": {"reputation": 8937, "user_id": 2815099, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/fHZcV.jpg?s=128&g=1", "display_name": "AlvaroAV", "link": "https://stackoverflow.com/users/2815099/alvaroav"}, "is_accepted": false, "score": 0, "last_activity_date": 1499611865, "last_edit_date": 1499611865, "creation_date": 1499611480, "answer_id": 44997618, "question_id": 37978225, "link": "https://stackoverflow.com/questions/37978225/replace-some-accented-letters-from-word-in-python/44997618#44997618", "title": "Replace some accented letters from word in python", "body": "<p>Another simple option using regex:</p>\n\n<pre><code>import re\n\ndef remove_accents(string):\n    if type(string) is not unicode:\n        string = unicode(string, encoding='utf-8')\n\n    string = re.sub(u\"[\u00e0\u00e1\u00e2\u00e3\u00e4\u00e5]\", 'a', string)\n    string = re.sub(u\"[\u00e8\u00e9\u00ea\u00eb]\", 'e', string)\n    string = re.sub(u\"[\u00ec\u00ed\u00ee\u00ef]\", 'i', string)\n    string = re.sub(u\"[\u00f2\u00f3\u00f4\u00f5\u00f6]\", 'o', string)\n    string = re.sub(u\"[\u00f9\u00fa\u00fb\u00fc]\", 'u', string)\n    string = re.sub(u\"[\u00fd\u00ff]\", 'y', string)\n\n    return string\n</code></pre>\n"}], "owner": {"reputation": 1279, "user_id": 1543263, "user_type": "registered", "accept_rate": 23, "profile_image": "https://i.stack.imgur.com/WaOlX.png?s=128&g=1", "display_name": "Fernando", "link": "https://stackoverflow.com/users/1543263/fernando"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 756, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1499611865, "creation_date": 1466629469, "last_edit_date": 1466690094, "question_id": 37978225, "link": "https://stackoverflow.com/questions/37978225/replace-some-accented-letters-from-word-in-python", "title": "Replace some accented letters from word in python", "body": "<p>I'm trying to replace some accented letters from Portuguese words in Python.</p>\n\n<pre><code>accentedLetters = ['\u00e0', '\u00e1', '\u00e2', '\u00e3', '\u00e9', '\u00ea', '\u00ed', '\u00f3', '\u00f4', '\u00f5', '\u00fa', '\u00fc']\nletters         = ['a', 'a', 'a', 'a', 'e', 'e', 'i', 'o', 'o', 'o', 'u', 'u']\n</code></pre>\n\n<p>So the accentedLetters will be replaced by the letter in the letters array.</p>\n\n<p>In this way, my expected results are for example:</p>\n\n<pre><code>a\u00e7\u00e3o    =&gt; a\u00e7ao\nfra\u00e7\u00f5es =&gt; fra\u00e7oes \n</code></pre>\n\n<p>How can I do that?</p>\n"}, {"tags": ["python", "django", "excel", "django-import-export"], "answers": [{"tags": [], "owner": {"reputation": 93, "user_id": 4578981, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6556a4d8c9a38a3ddaf9afdb83328651?s=128&d=identicon&r=PG", "display_name": "amishelli", "link": "https://stackoverflow.com/users/4578981/amishelli"}, "is_accepted": true, "score": 1, "last_activity_date": 1466669099, "creation_date": 1466669099, "answer_id": 37985603, "question_id": 37978208, "link": "https://stackoverflow.com/questions/37978208/django-import-export-foreignkeywidget-doesnt-do-lookup/37985603#37985603", "title": "django-import-export ForeignKeyWidget doesn&#39;t do lookup", "body": "<p>I found the answer now. My CourseAdmin was missing the resource class, so my CourseResource had no effect at all. I added this: </p>\n\n<pre><code>class CourseAdmin(ImportExportActionModelAdmin, ImportExportModelAdmin):\n    list_display = ('course_number', 'school_year', 'school_subject', 'teacher', 'lessons_per_week', 'major')\n    list_filter = ('school_year', 'school_subject', 'teacher')\n    resource_class = CourseResource\n\nadmin.site.register(Course, CourseAdmin)\n</code></pre>\n\n<p>Works like a charm! :)</p>\n"}], "owner": {"reputation": 93, "user_id": 4578981, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6556a4d8c9a38a3ddaf9afdb83328651?s=128&d=identicon&r=PG", "display_name": "amishelli", "link": "https://stackoverflow.com/users/4578981/amishelli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 958, "favorite_count": 0, "accepted_answer_id": 37985603, "answer_count": 1, "score": 2, "last_activity_date": 1466669099, "creation_date": 1466629403, "question_id": 37978208, "link": "https://stackoverflow.com/questions/37978208/django-import-export-foreignkeywidget-doesnt-do-lookup", "title": "django-import-export ForeignKeyWidget doesn&#39;t do lookup", "body": "<p>I'm trying to import an xls file with django-import-export. </p>\n\n<p>This is what I have:</p>\n\n<pre><code>class CourseResource(resources.ModelResource):\n\n   course_number = fields.Field(column_name='Kursnummer', attribute='course_number', widget=CharWidget())\n\n   school_year = fields.Field(column_name='Schuljahr', attribute='school_year',\n                          widget=ForeignKeyWidget(model=SchoolYear, field='name'))\n\n\n   #other fields....\n\n   class Meta:\n       model = Course\n       exclude = ('students')\n       export_order = ('id', 'course_number', 'school_year')\n</code></pre>\n\n<p>The SchoolYear model:</p>\n\n<pre><code>class SchoolYear(models.Model):\n   name = models.CharField(max_length=25, unique=True)\n   start_date = models.DateField(verbose_name=\"Beginn\")\n   end_date = models.DateField(verbose_name=\"Ende\")\n\n   def __str__(self):\n       return self.name\n\n   def __unicode__(self):\n       return self.name\n</code></pre>\n\n<p>The Course model:</p>\n\n<pre><code>class Course(models.Model):\n\n   course_number = models.CharField(max_length=25, verbose_name=\"Kursnummer\")\n   school_year = models.ForeignKey(SchoolYear, default=30, verbose_name=\"Schuljahr\")\n\n   #some other fields...\n\n   students = models.ManyToManyField(Student, verbose_name=\"Sch\u00fcler\", null=True, blank=True, related_name=\"courses\")\n\n   class Meta:\n       unique_together = ('course_number', 'school_year',)\n       verbose_name = \"Kurs\"\n       verbose_name_plural = \"Kurse\"\n       managed = True\n\n   def __str__(self):\n       return \"%s (%s)\" % (self.course_number, self.school_year)\n</code></pre>\n\n<p>An example row in my excel file looks like this (second column is the course number, third column is the name of the school year, then some more field): </p>\n\n<pre><code>... 7aMa 2015/2016 ...\n</code></pre>\n\n<p>When I try to import the file in the django admin, I get this error message:</p>\n\n<pre><code>Row number: 1 - Column 'school_year': invalid literal for int() with base 10: '2015/2016' [...]\nTraceback (most recent call last):\nFile \"/Users/amishelli/Dropbox/IMS/ims2/import_export/resources.py\", line 441, in import_row\nself.import_obj(instance, row, dry_run)\nFile \"/Users/amishelli/Dropbox/IMS/ims2/import_export/resources.py\",    line 300, in import_obj\nself.import_field(field, obj, data)\nFile \"/Users/amishelli/Dropbox/IMS/ims2/import_export/resources.py\", line 290, in import_field\nfield.save(obj, data)\nFile \"/Users/amishelli/Dropbox/IMS/ims2/import_export/fields.py\", line 112, in save\nsetattr(obj, attrs[-1], self.clean(data))\nFile \"/Users/amishelli/Dropbox/IMS/ims2/import_export/fields.py\", line 68, in clean\n raise ValueError(\"Column '%s': %s\" % (self.column_name, e))\n ValueError: Column 'school_year': invalid literal for int() with base 10: '2015/2016'\n</code></pre>\n\n<p>I presume the lookup of the ForeignKey for SchoolYear doesn't work. What am I doing wrong? </p>\n"}, {"tags": ["python", "python-3.x", "pandas"], "comments": [{"owner": {"reputation": 1151, "user_id": 3109834, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a7b76d82c5b329929d39025e904f6d9c?s=128&d=identicon&r=PG&f=1", "display_name": "lhoworko", "link": "https://stackoverflow.com/users/3109834/lhoworko"}, "edited": false, "score": 0, "creation_date": 1466630622, "post_id": 37978160, "comment_id": 63402942, "body": "I would suggest looking into grep to delete rows, and awk to delete columns"}], "answers": [{"comments": [{"owner": {"reputation": 303, "user_id": 6377863, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1f7a69816576dc244df97631a057d23e?s=128&d=identicon&r=PG&f=1", "display_name": "JetCorey", "link": "https://stackoverflow.com/users/6377863/jetcorey"}, "edited": false, "score": 0, "creation_date": 1466690072, "post_id": 37978749, "comment_id": 63430984, "body": "I get there error &quot;TypeError: bad operand type for unary ~: &#39;float&#39;&quot; When I use this.  IT works with sample data, but I am using a large data file. Any help with this?"}, {"owner": {"reputation": 169523, "user_id": 4983450, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/NR2ko.jpg?s=128&g=1", "display_name": "Psidom", "link": "https://stackoverflow.com/users/4983450/psidom"}, "reply_to_user": {"reputation": 303, "user_id": 6377863, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1f7a69816576dc244df97631a057d23e?s=128&d=identicon&r=PG&f=1", "display_name": "JetCorey", "link": "https://stackoverflow.com/users/6377863/jetcorey"}, "edited": false, "score": 0, "creation_date": 1466690967, "post_id": 37978749, "comment_id": 63431733, "body": "It&#39;s likely that your data frame contains missing values. Remove or double check before you apply <code>contains</code> method should solve the problem."}, {"owner": {"reputation": 303, "user_id": 6377863, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1f7a69816576dc244df97631a057d23e?s=128&d=identicon&r=PG&f=1", "display_name": "JetCorey", "link": "https://stackoverflow.com/users/6377863/jetcorey"}, "edited": false, "score": 0, "creation_date": 1466691092, "post_id": 37978749, "comment_id": 63431832, "body": "Yes, some of the User Names have no information.  If I need to keep them... then I cannot use contains?"}, {"owner": {"reputation": 169523, "user_id": 4983450, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/NR2ko.jpg?s=128&g=1", "display_name": "Psidom", "link": "https://stackoverflow.com/users/4983450/psidom"}, "reply_to_user": {"reputation": 303, "user_id": 6377863, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1f7a69816576dc244df97631a057d23e?s=128&d=identicon&r=PG&f=1", "display_name": "JetCorey", "link": "https://stackoverflow.com/users/6377863/jetcorey"}, "edited": false, "score": 0, "creation_date": 1466692819, "post_id": 37978749, "comment_id": 63433226, "body": "You can add a missing value checker as this <code>df.loc[~(~pd.isnull(df.DN) &amp; df.DN.str.contains(&quot;OU=DNA&quot;))]</code>."}, {"owner": {"reputation": 303, "user_id": 6377863, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1f7a69816576dc244df97631a057d23e?s=128&d=identicon&r=PG&f=1", "display_name": "JetCorey", "link": "https://stackoverflow.com/users/6377863/jetcorey"}, "edited": false, "score": 0, "creation_date": 1468336266, "post_id": 37978749, "comment_id": 64079943, "body": "How do I take out multiple values at once? df.loc[~(~pd.isnull(df.DN) &amp; df.DN.str.contains(&quot;OU=DNA&quot;, &quot;CN=Users&quot;))] present an error @Psidom"}], "tags": [], "owner": {"reputation": 169523, "user_id": 4983450, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/NR2ko.jpg?s=128&g=1", "display_name": "Psidom", "link": "https://stackoverflow.com/users/4983450/psidom"}, "is_accepted": true, "score": 3, "last_activity_date": 1466631633, "creation_date": 1466631633, "answer_id": 37978749, "question_id": 37978160, "link": "https://stackoverflow.com/questions/37978160/deleting-rows-with-certain-keywords-of-csv-file/37978749#37978749", "title": "Deleting rows with certain keywords of csv file", "body": "<p>You can try this two-step filtering as your logic. Use the <code>str.contains</code> method to filter out rows with <code>OU=DNA</code> and use <code>str.replace</code> method with regular expression to trim the leading <code>CN=x</code>:</p>\n\n<pre><code>newDf = df.loc[~df.DN.str.contains(\"OU=DNA\")]\nnewDf.DN = newDf.DN.str.replace(\"^CN=[^,]*,\", \"\")\nnewDf\n\n    UserName    DN\n0   MB31212 CN=Users,DC=prod,DC=trovp,DC=net\n1   MB23423 OU=Generic Mailbox,DC=prod,DC=trovp,DC=net\n2   MB23424 CN=Users,DC=prod,DC=trovp,DC=net\n</code></pre>\n\n<p>A little break down of the regular expression: <code>^</code> stands for the beginning of the string which is followed by <code>CN=</code> and use <code>[^,]*,</code> to capture pattern until the first comma;</p>\n"}, {"comments": [{"owner": {"reputation": 303, "user_id": 6377863, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1f7a69816576dc244df97631a057d23e?s=128&d=identicon&r=PG&f=1", "display_name": "JetCorey", "link": "https://stackoverflow.com/users/6377863/jetcorey"}, "edited": false, "score": 0, "creation_date": 1466689925, "post_id": 37979095, "comment_id": 63430868, "body": "this worked using the sample file.. but I&#39;m using large data file.. error that occurs: &#39;ValueError: cannot index with vector containing NA / NaN values&#39;. There are some rows that are blank and have no information in them.  Any help with this?"}], "tags": [], "owner": {"reputation": 21, "user_id": 1439745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UJfgt.jpg?s=128&g=1", "display_name": "lowcloudnine", "link": "https://stackoverflow.com/users/1439745/lowcloudnine"}, "is_accepted": false, "score": 2, "last_activity_date": 1466633405, "creation_date": 1466633405, "answer_id": 37979095, "question_id": 37978160, "link": "https://stackoverflow.com/questions/37978160/deleting-rows-with-certain-keywords-of-csv-file/37979095#37979095", "title": "Deleting rows with certain keywords of csv file", "body": "<p>To read the file sample you gave I used:</p>\n\n<pre><code>df = pd.read_csv('sample.csv', sep='     ', encoding='latin1', engine=\"python\")\n</code></pre>\n\n<p>and then:</p>\n\n<pre><code>df = df.drop(df[df.DN.str.contains(\"OU=DNA\")].index)\ndf.DN = df.DN.str.replace('(CN=MB[0-9]{5}\\s*,)', '')\ndf\n</code></pre>\n\n<p>gave the desired result:</p>\n\n<pre><code>    User Name   DN\n0   MB31212     CN=Users,DC=prod,DC=trovp,DC=net\n1   MB23423     OU=Generic Mailbox,DC=prod,DC=trovp,DC=net\n2   MB23424     CN=Users,DC=prod,DC=trovp,DC=net\n</code></pre>\n"}], "owner": {"reputation": 303, "user_id": 6377863, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1f7a69816576dc244df97631a057d23e?s=128&d=identicon&r=PG&f=1", "display_name": "JetCorey", "link": "https://stackoverflow.com/users/6377863/jetcorey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1314, "favorite_count": 0, "accepted_answer_id": 37978749, "answer_count": 2, "score": 1, "last_activity_date": 1466633405, "creation_date": 1466629214, "last_edit_date": 1466631201, "question_id": 37978160, "link": "https://stackoverflow.com/questions/37978160/deleting-rows-with-certain-keywords-of-csv-file", "title": "Deleting rows with certain keywords of csv file", "body": "<p>I have a large data file and I need to delete rows that have certain keywords. </p>\n\n<p>Here is an example of the file I'm using:</p>\n\n<pre><code>User Name     DN\nMB31212       CN=MB31212,CN=Users,DC=prod,DC=trovp,DC=net\nMB23423       CN=MB23423 ,OU=Generic Mailbox,DC=prod,DC=trovp,DC=net\nMB23424       CN=MB23424 ,CN=Users,DC=prod,DC=trovp,DC=net\nMB23423       CN=MB23423,OU=DNA,DC=prod,DC=trovp,DC=net\nMB23234       CN=MB23234 ,OU=DNA,DC=prod,DC=trovp,DC=net\n</code></pre>\n\n<p>This is how I import file:</p>\n\n<pre><code>import pandas as pd\ndf = pd.read_csv('sample.csv', sep=',', encoding='latin1')\n</code></pre>\n\n<p>How can I</p>\n\n<ol>\n<li>Delete all rows that contain 'OU=DNA' in DN column for example?</li>\n<li>How can I delete the first attribute 'CN= x' in the DN column without deleting the rest of the data in the column?</li>\n</ol>\n\n<p>I would like to get something like what is posted below, with the 2 rows that contained 'OU=DNA' deleted and the 'CN=x' deleted from every row:</p>\n\n<pre><code>User Name     DN\nMB31212       CN=Users,DC=prod,DC=trovp,DC=net\nMB23423       OU=Generic Mailbox,DC=prod,DC=trovp,DC=net\nMB23424       CN=Users,DC=prod,DC=trovp,DC=net\n</code></pre>\n"}, {"tags": ["python", "graph-tool"], "answers": [{"tags": [], "owner": {"reputation": 215, "user_id": 5249647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/663c29554954d03e964bc586913ae8d6?s=128&d=identicon&r=PG&f=1", "display_name": "me47", "link": "https://stackoverflow.com/users/5249647/me47"}, "is_accepted": false, "score": 4, "last_activity_date": 1466977218, "last_edit_date": 1466977218, "creation_date": 1466974677, "answer_id": 38043114, "question_id": 37978154, "link": "https://stackoverflow.com/questions/37978154/specifying-vertex-position-via-coordinates-in-python-graph-tool/38043114#38043114", "title": "Specifying vertex position via coordinates in python graph-tool", "body": "<p>Suppose you have a graph called \"g\".</p>\n\n<p>First create a property map by typing:</p>\n\n<pre><code>position = g.new_vertex_property(\"vector&lt;double&gt;\")\n</code></pre>\n\n<p>You can manually add the coordinates of each vertex. For example if you want vertex 5 to be a position (2.5, -1.9) type:</p>\n\n<pre><code>position[g.vertex(5)] = (2.5, -1.9)\n</code></pre>\n\n<p>(Remember that vertices start at 0 in graph-tool)</p>\n\n<p>To plot the graph, do:</p>\n\n<pre><code>graph_draw(g, pos=position)\n</code></pre>\n"}], "owner": {"reputation": 550, "user_id": 6046281, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/6a97f01723e54ef60ceb3a27151a1667?s=128&d=identicon&r=PG", "display_name": "duncster94", "link": "https://stackoverflow.com/users/6046281/duncster94"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 734, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1466977218, "creation_date": 1466629203, "question_id": 37978154, "link": "https://stackoverflow.com/questions/37978154/specifying-vertex-position-via-coordinates-in-python-graph-tool", "title": "Specifying vertex position via coordinates in python graph-tool", "body": "<p>Is it possible to plot a vertex at a particular position on the xy-axis by specifying coordinates? I want to have a square lattice of vertices without the edges between them (and then add edges later as I see fit).</p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 1465, "user_id": 4681732, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Xuool.jpg?s=128&g=1", "display_name": "nbryans", "link": "https://stackoverflow.com/users/4681732/nbryans"}, "edited": false, "score": 0, "creation_date": 1466629215, "post_id": 37978136, "comment_id": 63402322, "body": "See <a href=\"http://stackoverflow.com/questions/19747371/python-exit-commands-why-so-many-and-when-should-each-be-used\">this thread</a> on system exiting."}], "answers": [{"tags": [], "owner": {"reputation": 1980, "user_id": 25818, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/Y0MlY.jpg?s=128&g=1", "display_name": "3Doubloons", "link": "https://stackoverflow.com/users/25818/3doubloons"}, "is_accepted": false, "score": 0, "last_activity_date": 1466629326, "creation_date": 1466629326, "answer_id": 37978185, "question_id": 37978136, "link": "https://stackoverflow.com/questions/37978136/do-python-scripts-need-to-be-exited/37978185#37978185", "title": "Do python scripts need to be exited?", "body": "<p>You do not need an exit statement in Python code, unless you want to set the exit code yourself</p>\n"}, {"tags": [], "owner": {"reputation": 1491, "user_id": 6480793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fe10b5df5ec1164b5bade347d8599f8?s=128&d=identicon&r=PG&f=1", "display_name": "Delioth", "link": "https://stackoverflow.com/users/6480793/delioth"}, "is_accepted": true, "score": 1, "last_activity_date": 1466629410, "creation_date": 1466629410, "answer_id": 37978210, "question_id": 37978136, "link": "https://stackoverflow.com/questions/37978136/do-python-scripts-need-to-be-exited/37978210#37978210", "title": "Do python scripts need to be exited?", "body": "<p>No, python scripts do not need an exit- in fact, a raw <code>quit()</code> or <code>exit()</code> at the end of many things may break them - in the case of importing something, all top-level code is executed: if that contains an <code>exit()</code>, the whole importing program will exit, which is almost certainly not desired.</p>\n\n<p>If in doubt, Python will almost always clean up after itself (zombie threads may be an exception, but that's way more advanced).</p>\n"}, {"tags": [], "owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1466629413, "creation_date": 1466629413, "answer_id": 37978212, "question_id": 37978136, "link": "https://stackoverflow.com/questions/37978136/do-python-scripts-need-to-be-exited/37978212#37978212", "title": "Do python scripts need to be exited?", "body": "<p>This is unnecessary. There is no such thing as an \"exit statement\" in Python, and calling a function like <code>sys.exit()</code> at the end of your program does the same thing as just letting execution flow off the end of your program.</p>\n"}], "owner": {"reputation": 3, "user_id": 1820321, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f106d8285b4deb6740662f6c9b2cb5b7?s=128&d=identicon&r=PG", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/1820321/jonathan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 37978210, "answer_count": 3, "score": -1, "last_activity_date": 1466629413, "creation_date": 1466629142, "question_id": 37978136, "link": "https://stackoverflow.com/questions/37978136/do-python-scripts-need-to-be-exited", "title": "Do python scripts need to be exited?", "body": "<p>I've been using Python more and more recently, and I'd like to know if Python scripts need an exit statement at the end? If they don't is it proper to always add an exit statement at the end of a script?</p>\n"}, {"tags": ["python", "csv"], "comments": [{"owner": {"reputation": 15290, "user_id": 1913824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7793dc1a1117c0583651f716630e2403?s=128&d=identicon&r=PG", "display_name": "Andrea Corbellini", "link": "https://stackoverflow.com/users/1913824/andrea-corbellini"}, "edited": false, "score": 0, "creation_date": 1466629190, "post_id": 37978022, "comment_id": 63402311, "body": "<code>float(&#39;+1.50000000000E+009&#39;)</code> works"}, {"owner": {"reputation": 269348, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1466629492, "post_id": 37978022, "comment_id": 63402435, "body": "It looks like you&#39;re already using <code>float(cell)</code> which is what the current answers are suggesting. What about it doesn&#39;t work?"}, {"owner": {"reputation": 243, "user_id": 4999890, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/c34942cc479898b04d21c6c917d64955?s=128&d=identicon&r=PG&f=1", "display_name": "MadisonCooper", "link": "https://stackoverflow.com/users/4999890/madisoncooper"}, "edited": false, "score": 0, "creation_date": 1466630410, "post_id": 37978022, "comment_id": 63402854, "body": "Typecasting should work - as the answers have suggested. Could it be that your second <code>ws.cell = ...</code> does not have a typecast operation like the first one does? You have one <code>ws.cell ... = float(cell)</code> and another just <code>ws.cell ... = cell</code>"}, {"owner": {"reputation": 243, "user_id": 4999890, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/c34942cc479898b04d21c6c917d64955?s=128&d=identicon&r=PG&f=1", "display_name": "MadisonCooper", "link": "https://stackoverflow.com/users/4999890/madisoncooper"}, "edited": false, "score": 0, "creation_date": 1466630545, "post_id": 37978022, "comment_id": 63402910, "body": "Also note about printing <code>type(cell)</code> - if you dont do a <code>cell = float(cell)</code> somewhere in the script, cell will not be changed from a string to a float. Just calling <code>float(cell)</code> does not actually modify <code>cell</code>"}, {"owner": {"reputation": 21, "user_id": 6501151, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45a165ebc5e060f2f5be8b5d0e282a1b?s=128&d=identicon&r=PG&f=1", "display_name": "user448574", "link": "https://stackoverflow.com/users/6501151/user448574"}, "reply_to_user": {"reputation": 243, "user_id": 4999890, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/c34942cc479898b04d21c6c917d64955?s=128&d=identicon&r=PG&f=1", "display_name": "MadisonCooper", "link": "https://stackoverflow.com/users/4999890/madisoncooper"}, "edited": false, "score": 0, "creation_date": 1466731001, "post_id": 37978022, "comment_id": 63452364, "body": "Thank you all for your responses. The problem that I guess is truly the root of the problem is what @ChildishJack said. I would like the values within the new .xlsx file to be numbers (and the first three lines of text for the headers) themselves, not merely loading them into memory as floats and not changing their inherent type. How would I change their type permanently"}, {"owner": {"reputation": 579, "user_id": 6145303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0cf09dbd6a1479eac38241085a0e64de?s=128&d=identicon&r=PG&f=1", "display_name": "arewm", "link": "https://stackoverflow.com/users/6145303/arewm"}, "edited": false, "score": 0, "creation_date": 1466803146, "post_id": 37978022, "comment_id": 63486205, "body": "So is your issue that the values in the sheet when opening the .xlsx are strings and not floats?"}], "answers": [{"tags": [], "owner": {"reputation": 579, "user_id": 6145303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0cf09dbd6a1479eac38241085a0e64de?s=128&d=identicon&r=PG&f=1", "display_name": "arewm", "link": "https://stackoverflow.com/users/6145303/arewm"}, "is_accepted": false, "score": 3, "last_activity_date": 1466629069, "creation_date": 1466629069, "answer_id": 37978121, "question_id": 37978022, "link": "https://stackoverflow.com/questions/37978022/python-scientific-notation-string-to-number/37978121#37978121", "title": "Python; scientific notation string to number", "body": "<p>You can accomplish this using <code>float()</code>.</p>\n\n<pre><code>&gt;&gt;&gt; float(\"+1.50000000000E+009\")\n&gt;&gt;&gt; 1500000000.0\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 579, "user_id": 6145303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0cf09dbd6a1479eac38241085a0e64de?s=128&d=identicon&r=PG&f=1", "display_name": "arewm", "link": "https://stackoverflow.com/users/6145303/arewm"}, "edited": false, "score": 1, "creation_date": 1466629418, "post_id": 37978162, "comment_id": 63402410, "body": "If you know that it will be a number, I would recommend against using <code>eval()</code> because you are accepting input from a potentially untrusted source. The risk of an arbitrary execution vulnerability does not seem worth it for this case because <code>float()</code> works the same."}, {"owner": {"reputation": 3137, "user_id": 6320655, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-M4BVxTY56KE/AAAAAAAAAAI/AAAAAAAAAB4/4zNEZqhVqpI/photo.jpg?sz=128", "display_name": "ospahiu", "link": "https://stackoverflow.com/users/6320655/ospahiu"}, "reply_to_user": {"reputation": 579, "user_id": 6145303, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0cf09dbd6a1479eac38241085a0e64de?s=128&d=identicon&r=PG&f=1", "display_name": "arewm", "link": "https://stackoverflow.com/users/6145303/arewm"}, "edited": false, "score": 0, "creation_date": 1466629508, "post_id": 37978162, "comment_id": 63402444, "body": "@arewm I would tend to agree, as <code>eval()</code> does evaluate python expressions, I&#39;ll update my answer."}, {"owner": {"reputation": 47412, "user_id": 3141234, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/78b45a835031f4ce03a6653b3262b5d3?s=128&d=identicon&r=PG", "display_name": "Alexander", "link": "https://stackoverflow.com/users/3141234/alexander"}, "edited": false, "score": 0, "creation_date": 1467842020, "post_id": 37978162, "comment_id": 63890436, "body": "<code>float()</code> is the way to go. <code>eval()</code> is vulnerable to code injection. In itself, it like uses the <code>float()</code> anyway."}], "tags": [], "owner": {"reputation": 3137, "user_id": 6320655, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-M4BVxTY56KE/AAAAAAAAAAI/AAAAAAAAAB4/4zNEZqhVqpI/photo.jpg?sz=128", "display_name": "ospahiu", "link": "https://stackoverflow.com/users/6320655/ospahiu"}, "is_accepted": false, "score": 0, "last_activity_date": 1469206835, "last_edit_date": 1469206835, "creation_date": 1466629218, "answer_id": 37978162, "question_id": 37978022, "link": "https://stackoverflow.com/questions/37978022/python-scientific-notation-string-to-number/37978162#37978162", "title": "Python; scientific notation string to number", "body": "<p>You <strong>should</strong> use <code>float()</code> :</p>\n\n<pre><code>float(\"+1.50000000000E+009\")\n</code></pre>\n\n<p>you can also use <code>eval()</code>, however this could be potentially <em>dangerous</em> if you do not know for certain the type of input you'll be passing as a parameter. </p>\n\n<pre><code>eval(\"+1.50000000000E+009\")\n</code></pre>\n\n<p>Both return <code>1500000000.0\n</code></p>\n"}], "owner": {"reputation": 21, "user_id": 6501151, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45a165ebc5e060f2f5be8b5d0e282a1b?s=128&d=identicon&r=PG&f=1", "display_name": "user448574", "link": "https://stackoverflow.com/users/6501151/user448574"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1439, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1469206835, "creation_date": 1466628639, "question_id": 37978022, "link": "https://stackoverflow.com/questions/37978022/python-scientific-notation-string-to-number", "title": "Python; scientific notation string to number", "body": "<p>I am currently converting a file from csv to xlsx. The problem is that the data is default converted all to strings. How can I convert the numbers (typically shown as +1.50000000000E+009 or \" +1.50000000000E+009\" (leading space) from string to number representations. I've tried typecasting and general workarounds but nothing works.</p>\n\n<p>The \"IF\" statement is because the csv file has a header.</p>\n\n<pre><code>def csv_to_excel(csv_path, delimiter, delimiter_txt, excel_path, excel_title):\ncsv_file = open(csv_path, 'r')\ncsv.register_dialect(delimiter_txt, delimiter=delimiter)\n\nreader = csv.reader(csv_file, dialect=delimiter_txt)\n\nwb = Workbook()\n\nws = wb.worksheets[0]\nws.title = excel_title\nfor row_index, row in enumerate(reader):\n    for column_index, cell in enumerate(row):\n        column_letter = get_column_letter((column_index + 1))\n        if row_index &gt; 3:\n            ws.cell('%s%s'%(column_letter, (row_index + 1))).value = float(cell)\n        else:\n            ws.cell('%s%s'%(column_letter, (row_index + 1))).value = cell\n        print(cell)\n        print(type(cell))\nwb.save(filename = excel_path)\ncsv_file.close()\n</code></pre>\n\n<p>csv_to_excel('file.csv',',','comma','file.xlsx','data')</p>\n\n<p>Thanks! Any help would be great!</p>\n"}, {"tags": ["javascript", "jquery", "python", "ajax", "mod-wsgi"], "owner": {"reputation": 11, "user_id": 2134626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79af41f635a266c2e41ffcf32e8fbf5b?s=128&d=identicon&r=PG", "display_name": "saibot", "link": "https://stackoverflow.com/users/2134626/saibot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 550, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1473301616, "creation_date": 1466628619, "question_id": 37978019, "link": "https://stackoverflow.com/questions/37978019/pass-data-from-ajax-to-python-script-using-xampp-and-wsgi", "title": "Pass data from AJAX to python script using xampp and wsgi", "body": "<p>I'm using XAMPP and mod_wsgi to execute my python scripts. So far I'm able to execute my python code by clicking on a button I've created. I'm trying to send data to a python script from a html page, do some stuff, and send back an alert on the page. </p>\n\n<p>Below is my HTML code which just has a button and I'm trying to send the value 84 to my python script and send it back. Right now I just get a popup that says \"None\" so I'm pretty sure the problem is in the python script and how it receives the data.</p>\n\n<p>Any help would be greatly appreciated!</p>\n\n<pre><code>    &lt;html&gt;\n    &lt;head&gt;\n    &lt;script src=\"https://ajax.googleapis.com/ajax/libs/jquery/2.2.2/jquery.min.js\"&gt;&lt;/script&gt;\n                    &lt;title&gt;Conveyor&lt;/title&gt;\n                    &lt;/head&gt;\n\n    &lt;body&gt;\n    &lt;script&gt;\n    getTxt = function (){\n\n      $.ajax({\n        data: {param1:'84.0'},\n        url:'test.py',\n        type: \"post\",\n        success: function (response) {\n            alert(response);\n        }\n      });\n    }\n    &lt;/script&gt;\n    &lt;/head&gt;&lt;body&gt;\n      &lt;button type=\"button\" id=\"btnGetTxt\" onclick=\"getTxt()\"&gt;Send Number&lt;/button&gt;\n    &lt;/body&gt;&lt;/html&gt;                                                          \n    &lt;/body&gt;                             \n    &lt;/body&gt;\n    &lt;/html&gt;\n</code></pre>\n\n<p>python script.</p>\n\n<pre><code>    import sys\n    import cgi\n\n    def application(environ, start_response):\n        form = cgi.FieldStorage()\n        status = '200 OK'\n        name = form.getvalue('param1')\n\n        output = str(name)\n        response_headers = [('Content-type', 'text/plain'),('Content-Length', str(len(output)))]\n        start_response(status, response_headers)\n\n        return [output] \n</code></pre>\n"}, {"tags": ["python", "list-comprehension"], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 1382252, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/19e9c12db4c974300bbd6728622af852?s=128&d=identicon&r=PG", "display_name": "Ayush", "link": "https://stackoverflow.com/users/1382252/ayush"}, "edited": false, "score": 0, "creation_date": 1466628909, "post_id": 37978034, "comment_id": 63402165, "body": "That worked like a charm! I will keep this in mind. Thanks"}, {"owner": {"reputation": 8106, "user_id": 129600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8304c94fad5c5a762301de60d0a9bd7e?s=128&d=identicon&r=PG", "display_name": "acushner", "link": "https://stackoverflow.com/users/129600/acushner"}, "edited": false, "score": 0, "creation_date": 1466629071, "post_id": 37978034, "comment_id": 63402248, "body": "although small, should use the set <code>{3, 4, 5}</code> instead of the tuple"}, {"owner": {"reputation": 38676, "user_id": 227884, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/L7EG1.png?s=128&g=1", "display_name": "UltraInstinct", "link": "https://stackoverflow.com/users/227884/ultrainstinct"}, "edited": false, "score": 0, "creation_date": 1466629660, "post_id": 37978034, "comment_id": 63402517, "body": "If <code>timeit</code> is to be trusted, I find tuple-contains 2.5x faster than set-contains. Mostly (I am guessing) because it is faster to iterate over 3 items and check instead of getting the hashes, followed by iteration and then a check."}], "tags": [], "owner": {"reputation": 38676, "user_id": 227884, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/L7EG1.png?s=128&g=1", "display_name": "UltraInstinct", "link": "https://stackoverflow.com/users/227884/ultrainstinct"}, "is_accepted": false, "score": 3, "last_activity_date": 1466628706, "creation_date": 1466628706, "answer_id": 37978034, "question_id": 37977985, "link": "https://stackoverflow.com/questions/37977985/line-comprehension-in-python/37978034#37978034", "title": "Line comprehension in python", "body": "<p>What you are doing now is called: <code>bitwise OR</code>. You should use a logical or: <code>or</code>.</p>\n\n<p>Better yet, you can use <code>in</code> operator to test. </p>\n\n<pre><code>a = [1 if x in (3,4,5) else x for x in arr]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "is_accepted": true, "score": 1, "last_activity_date": 1466628984, "last_edit_date": 1466628984, "creation_date": 1466628770, "answer_id": 37978047, "question_id": 37977985, "link": "https://stackoverflow.com/questions/37977985/line-comprehension-in-python/37978047#37978047", "title": "Line comprehension in python", "body": "<p>Logical OR is <code>or</code>, not <code>|</code>. <code>|</code> is bitwise OR. This list comprehension should be written as</p>\n\n<pre><code>a = [1 if x == 3 or x == 4 or x == 5 else x for x in arr]\n</code></pre>\n\n<p>or</p>\n\n<pre><code>a = [1 if x in (3, 4, 5) else x for x in arr]\n</code></pre>\n\n<p>Libraries like NumPy use <code>|</code> for broadcasted logical OR because <code>or</code> can't be overloaded, but even then, you generally need to parenthesize your comparisons to override the high precedence of <code>|</code>. If you're using NumPy, then instead of a list comprehension, you should do</p>\n\n<pre><code>a = np.where((arr == 3) | (arr == 4) | (arr == 5), 1, arr)\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 1382252, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/19e9c12db4c974300bbd6728622af852?s=128&d=identicon&r=PG", "display_name": "Ayush", "link": "https://stackoverflow.com/users/1382252/ayush"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 37978047, "answer_count": 2, "score": 1, "last_activity_date": 1466695453, "creation_date": 1466628511, "last_edit_date": 1466695453, "question_id": 37977985, "link": "https://stackoverflow.com/questions/37977985/line-comprehension-in-python", "title": "Line comprehension in python", "body": "<p>I want to write a small program that replaces certain values in an array with the desired value. The array (called \"arr\") contains about 10,000 elements of integer type and i would like to replace the digits 3,4 and 5 with 1. </p>\n\n<p>I wrote the following code but it does not perform the desired function. Could someone help me figure out the logical error I am making. Thanks!</p>\n\n<pre><code>a=[1 if x==3|x==4|x==5 else x for x in arr]\n</code></pre>\n"}, {"tags": ["python", "luigi"], "answers": [{"tags": [], "owner": {"reputation": 827, "user_id": 2056246, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d3ff258f07d607124962ce2d22ef6076?s=128&d=identicon&r=PG", "display_name": "Alex Spangher", "link": "https://stackoverflow.com/users/2056246/alex-spangher"}, "is_accepted": true, "score": 0, "last_activity_date": 1466693729, "creation_date": 1466693729, "answer_id": 37995183, "question_id": 37977959, "link": "https://stackoverflow.com/questions/37977959/retry-complete-for-wrappertask/37995183#37995183", "title": "Retry .complete() for WrapperTask", "body": "<p>I still think that overriding <code>.complete()</code> should in theory have been able to do this, and I'm still not sure why it's not, but if you're just looking for a way to bulk-transfer files after running a process, a workable solution is just to have the transfer take place within a <code>.run()</code> method:</p>\n\n<pre><code>def run(self):\n    logger.info('transferring into current directory')\n    self.client.copy('current-old','current')\n</code></pre>\n"}], "owner": {"reputation": 827, "user_id": 2056246, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d3ff258f07d607124962ce2d22ef6076?s=128&d=identicon&r=PG", "display_name": "Alex Spangher", "link": "https://stackoverflow.com/users/2056246/alex-spangher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 436, "favorite_count": 0, "accepted_answer_id": 37995183, "answer_count": 1, "score": 0, "last_activity_date": 1466693729, "creation_date": 1466628360, "question_id": 37977959, "link": "https://stackoverflow.com/questions/37977959/retry-complete-for-wrappertask", "title": "Retry .complete() for WrapperTask", "body": "<p>I am using Luigi to run several tasks, and then I need to bulk transfer the output to a standardized file location. I've written a WrapperTask with an overridden <code>complete()</code> method to do this:</p>\n\n<pre><code>from luigi.task import flatten\n\nclass TaskX(luigi.WrapperTask):\n    date = luigi.DateParameter()\n    client = luigi.s3.S3Client()\n\n    def requires(self):\n        yield TaskA(date=self.date)     \n        yield TaskB(date=self.date)\n\n    def complete(self):\n        tasks_complete = all(r.complete() for r in flatten(self.requires())) \n\n        ## at the end of everything, batch copy the files\n        if tasks_complete:\n            self.client.copy('current-old', 'current')\n            return True\n        else:\n            return False\n\n\nif __name__ == \"__main__\":\n    luigi.run()\n</code></pre>\n\n<p>but I'm having trouble getting conditional part of <code>complete()</code> to be called when the process is actually finished. </p>\n\n<p>I assume this is because of <a href=\"http://bytepawn.com/luigi.html\" rel=\"nofollow\">asynchronous behavior</a> pointed out by others, but I'm not sure how to fix it.</p>\n\n<p>I've tried running Luigi with these command-line parameters:</p>\n\n<pre><code>$ PYTHONPATH=\"\" luigi --module x TaskX --worker-retry-external-task\n</code></pre>\n\n<p>But that doesn't seem to be working correctly. Is this the right approach to handle this type of task? </p>\n\n<p>Also, I'm curious \u2014\u00a0has anyone had experience with the <code>--worker-retry-external-task</code> command? I'm having some trouble understanding it.</p>\n\n<p>In the <a href=\"http://luigi.readthedocs.io/en/stable/_modules/luigi/worker.html#worker\" rel=\"nofollow\">source code</a>,</p>\n\n<pre><code>def _is_external(task):\n    return task.run is None or task.run == NotImplemented\n</code></pre>\n\n<p>is called to determine whether or not a LuigiTask has a <code>run()</code> method, which a <code>WrapperTask</code> does not. Thus, I'd expect the <code>--retry-external-task</code> flag to retry <code>complete()</code> for this until it's complete, thus performing the action. However, just playing around in the interpreter leads me to believe that:</p>\n\n<pre><code>&gt;&gt;&gt; import luigi_newsletter_process\n&gt;&gt;&gt; task = luigi_newsletter_process.Newsletter()\n&gt;&gt;&gt; task.run\n    &lt;bound method Newsletter.run of Newsletter(date=2016-06-22, use_s3=True)&gt;\n&gt;&gt;&gt; task.run()\n&gt;&gt;&gt; task.run == None\nFalse\n&gt;&gt;&gt; task.run() == None\nTrue\n</code></pre>\n\n<p>This code snippet is not doing what it thinks it is. </p>\n\n<p>Am I off-base here?</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "edited": false, "score": 2, "creation_date": 1466630243, "post_id": 37977978, "comment_id": 63402769, "body": "you can remove <code>list</code>: <code>df[df.sum().sort_values(ascending=0).index]</code>"}], "tags": [], "owner": {"reputation": 31353, "user_id": 1179880, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/02d09848db9f59fa45d61d9c4100e779?s=128&d=identicon&r=PG", "display_name": "whytheq", "link": "https://stackoverflow.com/users/1179880/whytheq"}, "is_accepted": true, "score": 3, "last_activity_date": 1466632135, "last_edit_date": 1466632135, "creation_date": 1466628472, "answer_id": 37977978, "question_id": 37977929, "link": "https://stackoverflow.com/questions/37977929/rearrange-the-columns-of-a-pandas-dataframe-so-that-the-column-with-highest-tota/37977978#37977978", "title": "Rearrange the columns of a pandas DataFrame so that the column with highest total is first", "body": "<p>Apologies for the trivial question - it is easier than I thought:</p>\n\n<pre><code>df[df.sum().sort_values(ascending = False).index]\n</code></pre>\n"}], "owner": {"reputation": 31353, "user_id": 1179880, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/02d09848db9f59fa45d61d9c4100e779?s=128&d=identicon&r=PG", "display_name": "whytheq", "link": "https://stackoverflow.com/users/1179880/whytheq"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 447, "favorite_count": 0, "accepted_answer_id": 37977978, "answer_count": 1, "score": 3, "last_activity_date": 1466632135, "creation_date": 1466628286, "question_id": 37977929, "link": "https://stackoverflow.com/questions/37977929/rearrange-the-columns-of-a-pandas-dataframe-so-that-the-column-with-highest-tota", "title": "Rearrange the columns of a pandas DataFrame so that the column with highest total is first", "body": "<p>I have this DataFrame:</p>\n\n<pre><code>df = pd.DataFrame({'c1':[1,2,3,4]\n                       ,'c2':[2,4,5,6]\n                       ,'c3':[5,7,9,10]\n                       ,'c4':[-1,3,1,0]\n                       ,'c5':[100,1000,1,2]})\ndf\n\n    c1  c2  c3  c4  c5\n0   1   2   5   -1  100\n1   2   4   7   3   1000\n2   3   5   9   1   1\n3   4   6   10  0   2\n</code></pre>\n\n<p>What I don't know how to do is quickly sort the columns so the column with the highest total c5 comes first, then c3, c2, c1 and c4:</p>\n\n<pre><code>    c1  c2  c3  c4  c5\n0   1   2   5   -1  100\n1   2   4   7   3   1000\n2   3   5   9   1   1\n3   4   6   10  0   2\n</code></pre>\n\n<p>So is there a command to produce the following result (without hard-coding the column names)?</p>\n\n<pre><code>df[['c5', 'c3', 'c2', 'c1' , 'c4']]\n\n    c5  c3  c2  c1  c4\n0   100     5   2   1   -1\n1   1000    7   4   2   3\n2   1   9   5   3   1\n3   2   10  6   4   0\n</code></pre>\n"}, {"tags": ["python", "tkinter"], "answers": [{"tags": [], "owner": {"reputation": 1491, "user_id": 6480793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fe10b5df5ec1164b5bade347d8599f8?s=128&d=identicon&r=PG&f=1", "display_name": "Delioth", "link": "https://stackoverflow.com/users/6480793/delioth"}, "is_accepted": true, "score": 2, "last_activity_date": 1466628450, "creation_date": 1466628450, "answer_id": 37977974, "question_id": 37977885, "link": "https://stackoverflow.com/questions/37977885/python-tkinter-removing-widgets-that-were-created-using-a-for-loop/37977974#37977974", "title": "Python Tkinter :removing widgets that were created using a for loop", "body": "<p>You need to hold on to references to all those widgets, usually via a list. Try initializing a list (<code>list_of_widgets</code>) before your loop, then every time you create a widget, append it to that list. When you clear, you can iterate through that list of widgets and destroy each one. Once you're done clearing them, you can clear the list so you don't try to destroy a widget twice (Tkinter will error at that point).</p>\n\n<pre><code>def generatePoints():\n    list_of_widgets = [] # or take the list as a parameter\n    for x in range(3):\n        degLong_label = Label(...)\n        degLong_label.grid(...)\n        list_of_widgets.append(degLong_label)\n        degLong = Entry(...)\n        degLong.grid(...)\n        list_of_widgets.append(degLong)\n\n        # et al.\n\ndef clearGrid(list_of_widgets):\n    for widget in list_of_widgets:\n        widget.destroy()\n</code></pre>\n\n<p>Note that you probably want to actually destroy the widgets if you aren't planning on showing <em>that specific widget</em> again (initializing a new one doesn't count).</p>\n"}], "owner": {"reputation": 93, "user_id": 6501155, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a5f0354303d44c79318a77e5c34db70f?s=128&d=identicon&r=PG&f=1", "display_name": "exAns", "link": "https://stackoverflow.com/users/6501155/exans"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1558, "favorite_count": 0, "accepted_answer_id": 37977974, "answer_count": 1, "score": 1, "last_activity_date": 1466628450, "creation_date": 1466628093, "question_id": 37977885, "link": "https://stackoverflow.com/questions/37977885/python-tkinter-removing-widgets-that-were-created-using-a-for-loop", "title": "Python Tkinter :removing widgets that were created using a for loop", "body": "<p>I'm currently learning how to use the Tkinter library on python to create a GUI that takes in longitude and latitude points and outputing that into a file. Basically I'm trying to automate the process of having to copy the correct format of line of points to another file.</p>\n\n<p>So I created a Entry and button field to see how many long/lat points are needed to generate a 'shape'. Using this integer input from user, I have a for loop to populate the GUI with multiple widgets asking for the long/lat points. I have that working properly, but now I am trying to have a clear button, which would allow the user to clear all these long/lat points and give them the ability to repopulate the field with the amount of points the other shape requires. </p>\n\n<p>So far I have: </p>\n\n<pre><code>def clearGrid():\n   coordAmount = int(pointText.get())\n   latLabel.grid_forget()\n   longLabel.grid_forget()\n\n   .....(contains code that populates the GUI)\n   #creating clear site Button\n   clearButton = Button(main_gui, text=\"Clear Sites!\",command=clearGrid)\n   clearButton.grid(row=lastRow+1, column=5, pady=10)\n</code></pre>\n\n<p>However, the problem that I am running into is that when the clear button is clicked, it only clears the latest instance of the widgets not all of them. So in a for loop that creates 5 instances/iteration of widgets, it will remove only the 5th instance/iteration of widgets.</p>\n\n<p>I'm trying to have the clear button functionality be able to delete all 5 instances of these widgets.</p>\n\n<p>So here is a shortened code of how I am populating the GUI with widgets</p>\n\n<pre><code>          def generatePoints():\n            for x in range(0,3):\n              degLong_label = Label(main_gui, text=\"Degree:\", height=2)\n              degLong_label.grid(row=y,column=6,sticky=E)\n              degLong = Entry(main_gui, width=4)\n              degLong.grid(row=y,column=7,sticky=W)\n\n              #minute\n              minLong_Label = Label(main_gui,text=\"Minutes:\", height=2)\n              minLong_Label.grid(row=y,column=8,sticky=W)\n              minLong = Entry(main_gui,width=3)\n              minLong.grid(row=y,column=8,sticky=E)\n\n              #seconds\n              secLong_Label= Label(main_gui,text=\"Sec:\",height=2)\n              secLong_Label.grid(row=y,column=9,sticky=W,padx=20)\n              secLong = Entry(main_gui,width=3)\n              secLong.grid(row=y,column=9,sticky=E,padx=20)\n\n              #direction\n             dirLong_Label = Label(main_gui,text=\"Direction:\",padx=5,height=2)\n             dirLong_Label.grid(row=y,column=12,sticky=W)\n             dirLong = Entry(main_gui,width=3)\n             dirLong.grid(row=y,column=13)\n</code></pre>\n"}, {"tags": ["python", "pandas", "lambda", "pivot-table"], "comments": [{"owner": {"reputation": 54, "user_id": 2011849, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08a078e01871fa0f45d9c2b341279389?s=128&d=identicon&r=PG", "display_name": "jason", "link": "https://stackoverflow.com/users/2011849/jason"}, "edited": false, "score": 0, "creation_date": 1466628940, "post_id": 37977881, "comment_id": 63402177, "body": "I thought by creating the demo code it might help me solve it. I&#39;m thinking that creating a new field for each row which includes the logtime for the next record might help? Then I could get the difference between logtimes on each row/record, <i>then</i> filter out null values <i>then</i> sum the times. The last row/record would just be the row/record logtime. Does that make sense?"}, {"owner": {"reputation": 54, "user_id": 2011849, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08a078e01871fa0f45d9c2b341279389?s=128&d=identicon&r=PG", "display_name": "jason", "link": "https://stackoverflow.com/users/2011849/jason"}, "edited": false, "score": 0, "creation_date": 1466629357, "post_id": 37977881, "comment_id": 63402389, "body": "Hi <a href=\"http://stackoverflow.com/questions/30901947/pandas-looking-at-next-row-and-swapping-values\">dataframe.shift</a> might be what I&#39;m looking for. Jas"}], "answers": [{"comments": [{"owner": {"reputation": 54, "user_id": 2011849, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08a078e01871fa0f45d9c2b341279389?s=128&d=identicon&r=PG", "display_name": "jason", "link": "https://stackoverflow.com/users/2011849/jason"}, "edited": false, "score": 0, "creation_date": 1466669618, "post_id": 37981310, "comment_id": 63416212, "body": "That&#39;s great thank you. And the extra course shift too."}], "tags": [], "owner": {"reputation": 2063, "user_id": 1407227, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a55cf3ec7698d27262f355872de6131d?s=128&d=identicon&r=PG", "display_name": "Stephan", "link": "https://stackoverflow.com/users/1407227/stephan"}, "is_accepted": true, "score": 1, "last_activity_date": 1466648683, "creation_date": 1466648683, "answer_id": 37981310, "question_id": 37977881, "link": "https://stackoverflow.com/questions/37977881/python-using-pandas-pivot-table-to-flatten-activity-logs-and-display-time-spent/37981310#37981310", "title": "Python: using pandas.pivot_table to flatten activity logs and display time spent doing activities", "body": "<p>You're right (in your comment): you'll need <code>dataframe.shift</code>.</p>\n\n<p>If I'm understanding your question correctly, you want to record the time <em>elapsed</em> since the last timestamp, so timestamps signify the beginning of an activity, and when the last activity was <code>null</code> we should not record any elapsed time. Assuming that's all correct, use <code>shift</code> to add a column for time differences:</p>\n\n<pre><code>activity['timelog_diff'] = activity['logtime'] - activity['logtime'].shift()\n</code></pre>\n\n<p>Now the first row will show the special \"not a time\" value <code>NaT</code>, but that's fine as we can't calculate elapsed time there. Next we can fill in some more <code>NaT</code> values for any elapsed time where a <code>null</code> event has just occurred:</p>\n\n<pre><code>mask = activity.event == 'null'\nactivity.loc[mask.shift(1).fillna(False), 'timelog_diff'] = pd.NaT\n</code></pre>\n\n<p>When we want to find out how much time was spent on <code>course1</code>, we have to shift again, because indexing for the <code>course1</code> rows will produce rows where <code>course1</code> is beginning. We need those where <code>course1</code> is finishing/has finished:</p>\n\n<pre><code>activity[(activity.event == 'course1').shift().fillna(False)]['timelog_diff'].sum()\n</code></pre>\n\n<p>That returns 15 hours for <code>course1</code> and 20 for <code>course2</code> in your example.</p>\n"}], "owner": {"reputation": 54, "user_id": 2011849, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08a078e01871fa0f45d9c2b341279389?s=128&d=identicon&r=PG", "display_name": "jason", "link": "https://stackoverflow.com/users/2011849/jason"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 242, "favorite_count": 1, "accepted_answer_id": 37981310, "answer_count": 1, "score": 1, "last_activity_date": 1466648683, "creation_date": 1466628054, "question_id": 37977881, "link": "https://stackoverflow.com/questions/37977881/python-using-pandas-pivot-table-to-flatten-activity-logs-and-display-time-spent", "title": "Python: using pandas.pivot_table to flatten activity logs and display time spent doing activities", "body": "<p>I'm looking at using python and pandas to flatten our VLE (Blackboard inc.) activity table. I'm trying to sum the total time spent per day on accessing courses as opposed to doing other non course activity in the activity logs/table. </p>\n\n<p>I've created some fake data and code below (python) to simulate the question and where I'm struggling. It's the flattened_v2 part I'm struggling with as that's close to my actual case.</p>\n\n<p>The log data typically looks like this and I've created it below in the code example: (activity dataframe in the code below)</p>\n\n<pre><code>         DAY    event somethingelse  timespent             logtime\n0 2013-01-02     null           foo   0.274139 2013-01-02 00:00:00\n0 2013-01-02  course1           foo   1.791061 2013-01-02 01:00:00\n1 2013-01-02  course1           foo   0.824152 2013-01-02 02:00:00\n2 2013-01-02  course1           foo   1.626477 2013-01-02 03:00:00\n</code></pre>\n\n<p>I've got a field called logtime in the real data. This is an actual datetime rather than a time spent field( also included in my fake data as I was experimenting). </p>\n\n<p>How do I record total time spent (using logtime) on event = course (many courses)?</p>\n\n<p>Each record contains logtime which shows datetime to access page\nNext record logtime shows the datetime accessing new page and therefore leaving old page (close enough). How can I get the total time where event is not null. If I just use the max/min values then this leads to an overestimate as the gaps in course access (where event = null) are also included. I've simplified the data so that each record increments by 1 hour which isn't the real case. </p>\n\n<p>Thanks for any tips\nJason</p>\n\n<p>The code is:</p>\n\n<pre><code># dataframe example\n# How do I record total time spent on event = course (many courses)?\n# Each record contains logtime which shows datetime to access page\n# Next record logtime shows the datetime accessing new page and\n# therefore leaving old page (close enough)\n# \n#\n\nimport pandas as pd\nimport numpy as np\nimport datetime\n\n\n# Creating fake data with string null and course1, course2\ndf = pd.DataFrame({\n    'DAY' : pd.Timestamp('20130102'),\n    'timespent' : abs(np.random.randn(5)),\n    'event' : \"course1\",\n    'somethingelse' : 'foo' })\n\ndf2 = pd.DataFrame({\n    'DAY' : pd.Timestamp('20130102'),\n    'timespent' : abs(np.random.randn(5)),\n    'event' : \"course2\",\n    'somethingelse' : 'foo' })\n\ndfN =pd.DataFrame({\n    'DAY' : pd.Timestamp('20130102'),\n    'timespent' : abs(np.random.randn(1)),\n    'event' : \"null\",\n    'somethingelse' : 'foo' })\n\n\ndfLog = [dfN, df,df2,dfN,dfN,dfN,df2,dfN,dfN,df,dfN,df2,dfN,df,df2,dfN, ]\nactivity = pd.concat(dfLog)\n# add time column\ntimes = pd.date_range('20130102', periods=activity.shape[0], freq='H')\nactivity['logtime'] = times\n\n# activity contains a DAY field (probably not required)\n# timespent -this is fake time spent on each event. This is\n# not in my real data but I started this way when faking data\n# event -either a course or null (not a course)\n# somethingelse -just there to indicate other data. \n#\n\nprint activity # This is quite close to real data.\n\n# Fake activity date created above to demo question.\n\n# *********************************************\n# Actual code to extract time spent on courses\n# *********************************************\n\n# Lambda function to aggregate data -max and min\n\n# Where time diff each minutes.\ndef agg_timespent(a, b):\n    c = abs(b-a)\n    return c\n\n# Where the time difference is not explicit but is \n# record of time recorded when accessing page (course event)\ndef agg_logtime(a, b):\n    # In real data b and a are strings\n    # b = datetime.datetime.strptime(b, '%Y-%m-%d %H:%M:%S')\n    # a = datetime.datetime.strptime(a, '%Y-%m-%d %H:%M:%S')\n    c = abs(b-a).seconds\n    return c    \n\n\n\n# Remove 'null' data as that's not of interest here. \n# null means non course activity e.g. checking email\n# or timetable -non course stuff.\nactivity= activity[(activity.event != 'null') ]\n\nprint activity  # This shows *just* course activity info\n\n# pivot by Day (only 1 day in fake data but 1 year in real data)\n# Don't need DAY field but helped me fake-up data\nflattened_v1 = activity.pivot_table(index=['DAY'], values=[\"timespent\"],aggfunc=[min, max],fill_value=0)\nflattened_v1['time_diff'] = flattened_v1.apply(lambda row: agg_timespent(row[0], row[1]), axis=1)\n\n\n# How to achieve this?\n# Where NULL has been removed I think this is wrong as NULL records could\n# indicate several hours gap between course accesses but as\n# I'm using MAX and MIN then I'm ignoring the periods of null\n# This is overestimating time on courses\n# I need to subtract/remove/ignore?? the hours spent on null times\n\nflattened_v2 = activity.pivot_table(index=['DAY'], values=[\"logtime\"],aggfunc=[min, max],fill_value=0)\nflattened_v2['time_diff'] = flattened_v2.apply(lambda row: agg_logtime(row[0], row[1]), axis=1)\n\nprint\nprint '*****Wrong!**********'\nprint 'This is not what I have but just showing how I thought it might work.'\nprint flattened_v1\nprint\nprint '******Not sure how to do this*********'\nprint 'This is wrong as nulls/gaps are also included too'\nprint flattened_v2\n</code></pre>\n"}, {"tags": ["python", "dictionary"], "comments": [{"owner": {"reputation": 38676, "user_id": 227884, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/L7EG1.png?s=128&g=1", "display_name": "UltraInstinct", "link": "https://stackoverflow.com/users/227884/ultrainstinct"}, "edited": false, "score": 8, "creation_date": 1466627554, "post_id": 37977734, "comment_id": 63401522, "body": "You can never have <code>result</code> object like that. There are several repeating keys in it. You might want a list of tuples instead."}], "answers": [{"comments": [{"owner": {"reputation": 38676, "user_id": 227884, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/L7EG1.png?s=128&g=1", "display_name": "UltraInstinct", "link": "https://stackoverflow.com/users/227884/ultrainstinct"}, "edited": false, "score": 4, "creation_date": 1466628187, "post_id": 37977854, "comment_id": 63401813, "body": "... or much shorter: <code>for k, v in result: dictionary.setdefault(k, []).append(v)</code>"}, {"owner": {"reputation": 300, "user_id": 3251418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/912841c1bfeffbb0b05fe6c9fe667c8f?s=128&d=identicon&r=PG&f=1", "display_name": "johmsp", "link": "https://stackoverflow.com/users/3251418/johmsp"}, "reply_to_user": {"reputation": 38676, "user_id": 227884, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/L7EG1.png?s=128&g=1", "display_name": "UltraInstinct", "link": "https://stackoverflow.com/users/227884/ultrainstinct"}, "edited": false, "score": 0, "creation_date": 1466628304, "post_id": 37977854, "comment_id": 63401868, "body": "Oooh I like it SuperSaiyan"}, {"owner": {"reputation": 1139, "user_id": 3934271, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/648a452f413925929c1f39cf3c45dc1b?s=128&d=identicon&r=PG&f=1", "display_name": "jas", "link": "https://stackoverflow.com/users/3934271/jas"}, "edited": false, "score": 0, "creation_date": 1466628314, "post_id": 37977854, "comment_id": 63401872, "body": "Thanks for pointing in right direction guys. Just starting out with python. Didn&#39;t realise such a thing is not a possible"}, {"owner": {"reputation": 32227, "user_id": 2337736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77aacbcecad375ad6d8c45cfe43afbc5?s=128&d=identicon&r=PG", "display_name": "Peter DeGlopper", "link": "https://stackoverflow.com/users/2337736/peter-deglopper"}, "edited": false, "score": 0, "creation_date": 1466631832, "post_id": 37977854, "comment_id": 63403471, "body": "FWIW I usually use <code>collections.defaultdict(list)</code> rather than <code>setdefault</code> in cases like that, although <code>setdefault</code> was great before <code>defaultdict</code>s became standard."}, {"owner": {"reputation": 1139, "user_id": 3934271, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/648a452f413925929c1f39cf3c45dc1b?s=128&d=identicon&r=PG&f=1", "display_name": "jas", "link": "https://stackoverflow.com/users/3934271/jas"}, "reply_to_user": {"reputation": 32227, "user_id": 2337736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77aacbcecad375ad6d8c45cfe43afbc5?s=128&d=identicon&r=PG", "display_name": "Peter DeGlopper", "link": "https://stackoverflow.com/users/2337736/peter-deglopper"}, "edited": false, "score": 0, "creation_date": 1466799408, "post_id": 37977854, "comment_id": 63484625, "body": "@PeterDeGlopper collections.defaultdict doesn&#39;t have attribute append, so I guess I cannot use it?"}, {"owner": {"reputation": 32227, "user_id": 2337736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77aacbcecad375ad6d8c45cfe43afbc5?s=128&d=identicon&r=PG", "display_name": "Peter DeGlopper", "link": "https://stackoverflow.com/users/2337736/peter-deglopper"}, "reply_to_user": {"reputation": 1139, "user_id": 3934271, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/648a452f413925929c1f39cf3c45dc1b?s=128&d=identicon&r=PG&f=1", "display_name": "jas", "link": "https://stackoverflow.com/users/3934271/jas"}, "edited": false, "score": 0, "creation_date": 1466801620, "post_id": 37977854, "comment_id": 63485572, "body": "@jas: <code>dictionary = collections.defaultdict(list); dictionary[k].append(v)</code>"}], "tags": [], "owner": {"reputation": 300, "user_id": 3251418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/912841c1bfeffbb0b05fe6c9fe667c8f?s=128&d=identicon&r=PG&f=1", "display_name": "johmsp", "link": "https://stackoverflow.com/users/3251418/johmsp"}, "is_accepted": true, "score": 0, "last_activity_date": 1466627890, "creation_date": 1466627890, "answer_id": 37977854, "question_id": 37977734, "link": "https://stackoverflow.com/questions/37977734/how-to-make-a-new-dict-from-two-dict/37977854#37977854", "title": "How to make a new dict from two dict", "body": "<p>Use a list of tuples instead:</p>\n\n<pre><code>result = [('2', 'Berat'), ('3', 'Ayn Daflah'), ('4', 'Eastern'), ('5', 'Canillo'), ('1', 'Badgis'), ('4', \"Manu'a\"), etc. ]\n</code></pre>\n\n<p>Then do something like this:</p>\n\n<pre><code>dictionary = {}\n\nfor (key, val) in result:\n    if not key in dictionary:\n          dictionary[key] = [val]\n    else:\n        dictionary[key] = dictionary[key] + [val]\n</code></pre>\n"}], "owner": {"reputation": 1139, "user_id": 3934271, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/648a452f413925929c1f39cf3c45dc1b?s=128&d=identicon&r=PG&f=1", "display_name": "jas", "link": "https://stackoverflow.com/users/3934271/jas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 1, "accepted_answer_id": 37977854, "answer_count": 1, "score": 0, "last_activity_date": 1469974449, "creation_date": 1466627446, "last_edit_date": 1469974449, "question_id": 37977734, "link": "https://stackoverflow.com/questions/37977734/how-to-make-a-new-dict-from-two-dict", "title": "How to make a new dict from two dict", "body": "<p>I'm trying to build a new dict from dict of just keys and a another dict of keys values pairs. In the second dict there could be more then one item mapped to same key. In the new dict, I would like to collect all those items together in a list and map it to a key. I have this code so far but it doesn't work. I get <code>KeyError: '1'</code>.</p>\n\n<pre><code>dictKeys = ['1', '2', '3', '4', '5']\n\n#dict to sort based on dictKeys \nresult = {'2': 'Berat', \n          '3': 'Ayn Daflah', \n          '4': 'Eastern', \n          '5': 'Canillo', \n          '1': 'Badgis', \n          '4': \"Manu'a\", \n          '5': 'Andorra la Vella', \n          '1': 'Badakhshan', \n          '2': 'Bulqize', \n          '3': 'Ayn Tamushanat'}\n\n#expected dictonary\nresult_dict = {}\n\nfor k in dictKeys:\n    for key,value in result.items():\n        if k == key:\n            result_dict[key].append(value)\n\nprint result_dict\n</code></pre>\n\n<p>I'm expecting to build a dict like this: </p>\n\n<pre><code>{\n  '1': ['Badgis', 'Badakhshan'],\n  '2': ['Berat', 'Bulqize'],\n  '3': ['Ayn Tamushanat', 'Ayn Daflah'],\n  '4': [\"Manu'a\", 'Eastern'],\n  '5': ['Canillo', 'Andorra la Vella']    \n}\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 71409, "user_id": 3125566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QcWOt.jpg?s=128&g=1", "display_name": "Moses Koledoye", "link": "https://stackoverflow.com/users/3125566/moses-koledoye"}, "edited": false, "score": 3, "creation_date": 1466627148, "post_id": 37977617, "comment_id": 63401309, "body": "It&#39;s probably a question of style"}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 2, "creation_date": 1466627261, "post_id": 37977617, "comment_id": 63401359, "body": "Well first you shouldn&#39;t have three dictionaries with single-letter names... This is not a useful thing to answer in the generic case, read PEP-8 and do whatever feels good within that."}], "answers": [{"comments": [{"owner": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "edited": false, "score": 1, "creation_date": 1466628096, "post_id": 37977632, "comment_id": 63401756, "body": "FWIW, there are a large number of &quot;pythonistas&quot; who prefer <code>dict()</code> to <code>{}</code> (for readability reasons).  Personally, It doesn&#39;t make much difference to me ..."}], "tags": [], "owner": {"reputation": 38676, "user_id": 227884, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/L7EG1.png?s=128&g=1", "display_name": "UltraInstinct", "link": "https://stackoverflow.com/users/227884/ultrainstinct"}, "is_accepted": true, "score": 1, "last_activity_date": 1466628622, "last_edit_date": 1466628622, "creation_date": 1466627145, "answer_id": 37977632, "question_id": 37977617, "link": "https://stackoverflow.com/questions/37977617/best-way-to-define-multiple-dictionary-in-one-line-versus-many-lines/37977632#37977632", "title": "Best way to define multiple dictionary in one line versus many lines", "body": "<blockquote>\n  <p>All 3 dictionaries will have different keys and are for different purpose ?</p>\n</blockquote>\n\n<p><strong>Keep it on different lines</strong> -- they are more readable that way. Readability of a python code matters a lot. That being said, you could:</p>\n\n<pre><code>a = {}   # or dict(..)\nb = {}\nc = {}\n</code></pre>\n\n<p>Note: This doesn't mean you <strong>can not</strong> do it in a single line. I am guilty of doing it myself.</p>\n\n<p><strong>Update</strong>: It seems there are people who prefer an explicit <code>dict()</code> over implicit <code>{}</code>. I guess the former is slightly more readable. Personally, I'm someone who'd go out of my way to delete <code>dict()</code> and replace with <code>{}</code> whenever I see one.</p>\n"}], "owner": {"reputation": 3201, "user_id": 1251918, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/736192db48b1a0b78b32a913b432360d?s=128&d=identicon&r=PG", "display_name": "NullException", "link": "https://stackoverflow.com/users/1251918/nullexception"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 166, "favorite_count": 0, "accepted_answer_id": 37977632, "answer_count": 1, "score": 0, "last_activity_date": 1466628622, "creation_date": 1466627091, "last_edit_date": 1466627333, "question_id": 37977617, "link": "https://stackoverflow.com/questions/37977617/best-way-to-define-multiple-dictionary-in-one-line-versus-many-lines", "title": "Best way to define multiple dictionary in one line versus many lines", "body": "<p>Which method is better and why?</p>\n\n<pre><code>a = dict() \nb = dict()\nc = dict()\n</code></pre>\n\n<p>or</p>\n\n<pre><code>a, b, c = dict(), dict(), dict()\n</code></pre>\n\n<p>All three dictionaries will have different keys and are for different purpose.</p>\n"}, {"tags": ["python", "web-scraping"], "answers": [{"comments": [{"owner": {"reputation": 81, "user_id": 6501013, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/01572db3ae30a16eb088ae4deab0e525?s=128&d=identicon&r=PG&f=1", "display_name": "David.L", "link": "https://stackoverflow.com/users/6501013/david-l"}, "edited": false, "score": 0, "creation_date": 1466628810, "post_id": 37977986, "comment_id": 63402108, "body": "Thanks Keiv.fly for your response. Like I said, I&#39;m totally new in Python, and basically been googling and finding answers and trying to implement it.  I don&#39;t know anything about XPath...where can I learn it?  Also, can you explain why is it &#39;.child-pages a&#39;? The element thing is really that confuses me, and with the addition of how python &#39;language&#39; makes these 2 as ancient language."}, {"owner": {"reputation": 81, "user_id": 6501013, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/01572db3ae30a16eb088ae4deab0e525?s=128&d=identicon&r=PG&f=1", "display_name": "David.L", "link": "https://stackoverflow.com/users/6501013/david-l"}, "edited": false, "score": 0, "creation_date": 1466629031, "post_id": 37977986, "comment_id": 63402227, "body": "Instead of getting the href link, is it possible to ONLY just get the city name?  Currently, the &#39;answer&#39; is by the URL...and it appears twice."}, {"owner": {"reputation": 2382, "user_id": 3596337, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/342bc87e52c3a697732300f833e50036?s=128&d=identicon&r=PG&f=1", "display_name": "keiv.fly", "link": "https://stackoverflow.com/users/3596337/keiv-fly"}, "reply_to_user": {"reputation": 81, "user_id": 6501013, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/01572db3ae30a16eb088ae4deab0e525?s=128&d=identicon&r=PG&f=1", "display_name": "David.L", "link": "https://stackoverflow.com/users/6501013/david-l"}, "edited": false, "score": 0, "creation_date": 1466629226, "post_id": 37977986, "comment_id": 63402328, "body": "I edited the answer to get the city names working on the doubling of URLs"}, {"owner": {"reputation": 81, "user_id": 6501013, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/01572db3ae30a16eb088ae4deab0e525?s=128&d=identicon&r=PG&f=1", "display_name": "David.L", "link": "https://stackoverflow.com/users/6501013/david-l"}, "edited": false, "score": 0, "creation_date": 1466629540, "post_id": 37977986, "comment_id": 63402456, "body": "So you mean you purposefully have it double? Meaning that the city appears twice?"}, {"owner": {"reputation": 2382, "user_id": 3596337, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/342bc87e52c3a697732300f833e50036?s=128&d=identicon&r=PG&f=1", "display_name": "keiv.fly", "link": "https://stackoverflow.com/users/3596337/keiv-fly"}, "reply_to_user": {"reputation": 81, "user_id": 6501013, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/01572db3ae30a16eb088ae4deab0e525?s=128&d=identicon&r=PG&f=1", "display_name": "David.L", "link": "https://stackoverflow.com/users/6501013/david-l"}, "edited": false, "score": 0, "creation_date": 1466629856, "post_id": 37977986, "comment_id": 63402599, "body": "I edited the code. Now the cities are not doubled. I meant I was looking for the way to change the code."}, {"owner": {"reputation": 81, "user_id": 6501013, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/01572db3ae30a16eb088ae4deab0e525?s=128&d=identicon&r=PG&f=1", "display_name": "David.L", "link": "https://stackoverflow.com/users/6501013/david-l"}, "edited": false, "score": 0, "creation_date": 1466630064, "post_id": 37977986, "comment_id": 63402689, "body": "Thanks Keiv.fly.  I&#39;ve vote for the &#39;Answer is useful&#39; and &#39;Accept this answer&#39;  Honestly speaking, I have no idea of what you did. Would you be kind enough to explain what it does?  Also, now that I have the city name and the href as well, how do I go about doing the 2nd step, which is taking each individual apartment, clicking it and get the value of interest? Any forum, article, video tutorial that I can watch and learn?"}], "tags": [], "owner": {"reputation": 2382, "user_id": 3596337, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/342bc87e52c3a697732300f833e50036?s=128&d=identicon&r=PG&f=1", "display_name": "keiv.fly", "link": "https://stackoverflow.com/users/3596337/keiv-fly"}, "is_accepted": true, "score": 0, "last_activity_date": 1466631430, "last_edit_date": 1466631430, "creation_date": 1466628514, "answer_id": 37977986, "question_id": 37977609, "link": "https://stackoverflow.com/questions/37977609/web-scraping-with-python-looping-for-city-name-clicking-and-get-interested-va/37977986#37977986", "title": "Web Scraping with Python - Looping for city name, clicking and get interested value", "body": "<p>You can access the elements by the class and a child \"a\" node. Then access the attribute \"href\" and add a domain name. </p>\n\n<pre><code>import requests\nfrom bs4 import BeautifulSoup\n\nurl = 'http://www.homestead.ca/apartments-for-rent/'\nresponse = requests.get(url)\nhtml = response.content\nsoup = BeautifulSoup(html,'lxml')\n\ndropdown_list = soup.select(\".primary .child-pages a\")\nlinks=['http://www.homestead.ca'+x['href'] for x in dropdown_list]\nprint (links)\n\ncity_names=[x.text for x in dropdown_list]\nprint (city_names)\n\nresult=[]\n\nfor link in links:\n    response = requests.get(link)\n    html = response.content\n    soup = BeautifulSoup(html,'lxml')\n    ...\n    result.append(...)\n</code></pre>\n\n<p>Explanation:</p>\n\n<pre><code>soup.select(\".primary .child-pages a\")\n</code></pre>\n\n<p>Using CSS selector I select the \"a\" nodes that are children of a node with the class \"child-pages\" which is a child of the the node with a class \"primary\". There were two nodes with class \"child-pages\" and I filtered one that was under node with \"primary\" class.</p>\n\n<pre><code>[x.text for x in dropdown_list]\n</code></pre>\n\n<p>This is a list comprehension in Python. It means that I choose all elements of dropdown_list and then take only the attribute text of each of them and then return as a list.</p>\n\n<p>You can then iterate over the links and append the data to a list (here \"result\").</p>\n\n<p>I found this introduction to BeautifulSoup pretty good though without going through the links: <a href=\"http://programminghistorian.org/lessons/intro-to-beautiful-soup\" rel=\"nofollow noreferrer\">http://programminghistorian.org/lessons/intro-to-beautiful-soup</a></p>\n\n<p>I would also recommend reading a book. For example this one: <a href=\"https://rads.stackoverflow.com/amzn/click/com/1491910291\" rel=\"nofollow noreferrer\" rel=\"nofollow noreferrer\" title=\"Web Scraping with Python: Collecting Data from the Modern Web\">Web Scraping with Python: Collecting Data from the Modern Web</a></p>\n"}], "owner": {"reputation": 81, "user_id": 6501013, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/01572db3ae30a16eb088ae4deab0e525?s=128&d=identicon&r=PG&f=1", "display_name": "David.L", "link": "https://stackoverflow.com/users/6501013/david-l"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 342, "favorite_count": 0, "accepted_answer_id": 37977986, "answer_count": 1, "score": 0, "last_activity_date": 1466631430, "creation_date": 1466627064, "question_id": 37977609, "link": "https://stackoverflow.com/questions/37977609/web-scraping-with-python-looping-for-city-name-clicking-and-get-interested-va", "title": "Web Scraping with Python - Looping for city name, clicking and get interested value", "body": "<p>This is my first time with Python and web scraping. Have been looking around and still unable to get what I need to do.</p>\n\n<p>Below are print screen of the elements that I've used via Chrome.</p>\n\n<p>As you can see, it is from the dropdown 'Apartments'.</p>\n\n<p>My 1st step in trying to do is get the list of cities from the drop down</p>\n\n<p>My 2nd step is then, from the given city list, go to each of them (...url.../Brantford/   for example)</p>\n\n<p>My 3rd step is then, given the available apartments, click each of the available apartments to get the price range for each bedroom type</p>\n\n<p>Currently, I am JUST trying to 'loop' through the cities in the first step and it's not working.</p>\n\n<p>Could you please help me out as well, if there's a good forum, article, tutorial etc that's good for beginner like me to read and learn. I'd really like to be good in this so that I may give me to society one day.</p>\n\n<p>Thank you!</p>\n\n<pre><code>import requests\nfrom bs4 import BeautifulSoup\n\nurl = 'http://www.homestead.ca/apartments-for-rent/'\nresponse = requests.get(url)\nhtml = response.content\nsoup = BeautifulSoup(html,'lxml')\n\ndropdown_list = soup.find(\".child-pages dropdown-menu a href\")\n\nprint (dropdown_list.prettify())\n</code></pre>\n\n<p><a href=\"http://i.stack.imgur.com/O7JLP.jpg\" rel=\"nofollow\">Screenshot</a></p>\n"}, {"tags": ["python", "numpy", "apache-spark", "pyspark", "apache-spark-sql"], "answers": [{"tags": [], "owner": {"reputation": 280325, "user_id": 1560062, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7c5027e3046fed86e8e34b4fa0e6246c?s=128&d=identicon&r=PG", "display_name": "zero323", "link": "https://stackoverflow.com/users/1560062/zero323"}, "is_accepted": false, "score": 0, "last_activity_date": 1466633010, "last_edit_date": 1466633010, "creation_date": 1466632271, "answer_id": 37978876, "question_id": 37977608, "link": "https://stackoverflow.com/questions/37977608/how-to-modify-numpy-arrays-in-spark-dataframe/37978876#37978876", "title": "How to modify numpy arrays in Spark dataframe?", "body": "<p>The source of the problem is much simpler than that. When you execute <code>sc.parallelize(a)</code> input array is converted to list and elements of this list become elements of the <code>RDD</code>. So when you execute <code>map</code> it applies the function to each element of the input separately. So it is equivalent to something like this:</p>\n\n<pre><code>f = lambda ar: np.concatenate([ar[:1], ar[1:3] + 7, ar[3:]])\n\n[f(x) for x in list(a)]\n## IndexError      \n## ...\n## IndexError: invalid index to scalar variable.\n</code></pre>\n\n<p>Hence the error you see. What you want is most likely this:</p>\n\n<pre><code>sc.parallelize([a]).map(f).take(1)\n## [array([  0.,  14.,  14.,   0.,   0.])]\n</code></pre>\n\n<p>There are also two things worth noting:</p>\n\n<ul>\n<li>Spark doesn't require lambda expression when working with higher order functions. The only requirement is that the function you pass shouldn't modify its arguments and optimally should be pure. In practice you can get away with modifying data in place in PySpark (not Spark in  general) if you know what is going on inside but it is not something you should do in practice. So to answer the question from the title simply don't try.</li>\n<li>Lambda expressions don't have any magic safeguard which protects against side effects. You simply cannot directly use statements inside its body.</li>\n</ul>\n"}], "owner": {"reputation": 2902, "user_id": 3785114, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/9KZgw.jpg?s=128&g=1", "display_name": "alfredox", "link": "https://stackoverflow.com/users/3785114/alfredox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1759, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1466633010, "creation_date": 1466627059, "question_id": 37977608, "link": "https://stackoverflow.com/questions/37977608/how-to-modify-numpy-arrays-in-spark-dataframe", "title": "How to modify numpy arrays in Spark dataframe?", "body": "<p><strong>Problem:</strong><br>\nNo assignments are allowed inside lambda or dataframe transforms, this means we usually have to create a new structure for every data manipulation done in Dataframes with Spark.</p>\n\n<p><strong>Example (Python):</strong><br>\nI have previously gotten around this issue by simply creating the modified data in-place without assignments in lists and dictionaries, however the numpy arithmetic is proving to be quite troublesome. And I have ran some simulations on putting all this data into lists, and it would be slowed down quite significantly since the arrays are pretty large. (Ex. these arrays are about 3K elements long each, contained in lists of 30 arrays per db row, for several million rows)</p>\n\n<pre><code>a = np.zeros(5)\n\n# Actual operation\na[1:3] += 7\nprint \"{}\".format(a)\n&gt;&gt; [ 0.  7.  7.  0.  0.]\n\n# Spark compatability - Create modified array in memory to avoid assignment\n# Not sure if this is best \"solution\" performance-wise\nc = np.concatenate([a[:1], a[1:3] + 7, a[3:]])\nprint \"{}\\n\".format(c)\n&gt;&gt; [ 0.  7.  7.  0.  0.]\n</code></pre>\n\n<p><strong>Example (pyspark):</strong><br>\nSo now you can see the output I'm expecting, here is a Spark version.  </p>\n\n<pre><code>t = sc.parallelize(a)\nt2 = t.map(lambda ar: np.concatenate([ar[:1], ar[1:3] + 7, ar[3:]]))\nt2.take(1)\n</code></pre>\n\n<p><strong>Error:</strong><br>\nI thought this would work, however I get this. I thought the issue was this \"ar[1:3] + 7\" but after running it without that, it still gave same error. Maybe there's something I'm missing. </p>\n\n<blockquote>\n  <p>Maybe the np.concatenate() does some sort of assignment that causes\n  this. If that is the case what would be a way around it?</p>\n</blockquote>\n\n<pre><code>---------------------------------------------------------------------------\nPy4JJavaError                             Traceback (most recent call last)\n&lt;ipython-input-46-4a4c467a0b3d&gt; in &lt;module&gt;()\n     12 t = sc.parallelize(a)\n     13 t2 = t.map(lambda ar: np.concatenate([ar[:1], ar[1:3] + 7, ar[3:]]))\n---&gt; 14 t2.take(1)\n\n/databricks/spark/python/pyspark/rdd.py in take(self, num)\n   1297 \n   1298             p = range(partsScanned, min(partsScanned + numPartsToTry, totalParts))\n-&gt; 1299             res = self.context.runJob(self, takeUpToNumLeft, p)\n   1300 \n   1301             items += res\n\n/databricks/spark/python/pyspark/context.py in runJob(self, rdd, partitionFunc, partitions, allowLocal)\n    914         # SparkContext#runJob.\n    915         mappedRDD = rdd.mapPartitions(partitionFunc)\n--&gt; 916         port = self._jvm.PythonRDD.runJob(self._jsc.sc(), mappedRDD._jrdd, partitions)\n    917         return list(_load_from_socket(port, mappedRDD._jrdd_deserializer))\n    918 \n\n/databricks/spark/python/lib/py4j-0.8.2.1-src.zip/py4j/java_gateway.py in __call__(self, *args)\n    536         answer = self.gateway_client.send_command(command)\n    537         return_value = get_return_value(answer, self.gateway_client,\n--&gt; 538                 self.target_id, self.name)\n    539 \n    540         for temp_arg in temp_args:\n\n/databricks/spark/python/pyspark/sql/utils.py in deco(*a, **kw)\n     34     def deco(*a, **kw):\n     35         try:\n---&gt; 36             return f(*a, **kw)\n     37         except py4j.protocol.Py4JJavaError as e:\n     38             s = e.java_exception.toString()\n\n/databricks/spark/python/lib/py4j-0.8.2.1-src.zip/py4j/protocol.py in get_return_value(answer, gateway_client, target_id, name)\n    298                 raise Py4JJavaError(\n    299                     'An error occurred while calling {0}{1}{2}.\\n'.\n--&gt; 300                     format(target_id, '.', name), value)\n    301             else:\n    302                 raise Py4JError(\n\nPy4JJavaError: An error occurred while calling z:org.apache.spark.api.python.PythonRDD.runJob.\n: org.apache.spark.SparkException: Job aborted due to stage failure: Task 0 in stage 25.0 failed 1 times, most recent failure: Lost task 0.0 in stage 25.0 (TID 30, localhost): org.apache.spark.api.python.PythonException: Traceback (most recent call last):\n  File \"/databricks/spark/python/pyspark/worker.py\", line 111, in main\n    process()\n  File \"/databricks/spark/python/pyspark/worker.py\", line 106, in process\n    serializer.dump_stream(func(split_index, iterator), outfile)\n  File \"/databricks/spark/python/pyspark/serializers.py\", line 263, in dump_stream\n    vs = list(itertools.islice(iterator, batch))\n  File \"/databricks/spark/python/pyspark/rdd.py\", line 1295, in takeUpToNumLeft\n    yield next(iterator)\n  File \"&lt;ipython-input-46-4a4c467a0b3d&gt;\", line 13, in &lt;lambda&gt;\nIndexError: invalid index to scalar variable.\n\n    at org.apache.spark.api.python.PythonRunner$$anon$1.read(PythonRDD.scala:166)\n    at org.apache.spark.api.python.PythonRunner$$anon$1.&lt;init&gt;(PythonRDD.scala:207)\n    at org.apache.spark.api.python.PythonRunner.compute(PythonRDD.scala:125)\n    at org.apache.spark.api.python.PythonRDD.compute(PythonRDD.scala:70)\n    at org.apache.spark.rdd.RDD.computeOrReadCheckpoint(RDD.scala:300)\n    at org.apache.spark.rdd.RDD.iterator(RDD.scala:264)\n    at org.apache.spark.scheduler.ResultTask.runTask(ResultTask.scala:66)\n    at org.apache.spark.scheduler.Task.run(Task.scala:88)\n    at org.apache.spark.executor.Executor$TaskRunner.run(Executor.scala:214)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    at java.lang.Thread.run(Thread.java:745)\n\nDriver stacktrace:\n    at org.apache.spark.scheduler.DAGScheduler.org$apache$spark$scheduler$DAGScheduler$$failJobAndIndependentStages(DAGScheduler.scala:1283)\n    at org.apache.spark.scheduler.DAGScheduler$$anonfun$abortStage$1.apply(DAGScheduler.scala:1271)\n    at org.apache.spark.scheduler.DAGScheduler$$anonfun$abortStage$1.apply(DAGScheduler.scala:1270)\n    at scala.collection.mutable.ResizableArray$class.foreach(ResizableArray.scala:59)\n    at scala.collection.mutable.ArrayBuffer.foreach(ArrayBuffer.scala:47)\n    at org.apache.spark.scheduler.DAGScheduler.abortStage(DAGScheduler.scala:1270)\n    at org.apache.spark.scheduler.DAGScheduler$$anonfun$handleTaskSetFailed$1.apply(DAGScheduler.scala:697)\n    at org.apache.spark.scheduler.DAGScheduler$$anonfun$handleTaskSetFailed$1.apply(DAGScheduler.scala:697)\n    at scala.Option.foreach(Option.scala:236)\n    at org.apache.spark.scheduler.DAGScheduler.handleTaskSetFailed(DAGScheduler.scala:697)\n    at org.apache.spark.scheduler.DAGSchedulerEventProcessLoop.doOnReceive(DAGScheduler.scala:1496)\n    at org.apache.spark.scheduler.DAGSchedulerEventProcessLoop.onReceive(DAGScheduler.scala:1458)\n    at org.apache.spark.scheduler.DAGSchedulerEventProcessLoop.onReceive(DAGScheduler.scala:1447)\n    at org.apache.spark.util.EventLoop$$anon$1.run(EventLoop.scala:48)\n    at org.apache.spark.scheduler.DAGScheduler.runJob(DAGScheduler.scala:567)\n    at org.apache.spark.SparkContext.runJob(SparkContext.scala:1827)\n    at org.apache.spark.SparkContext.runJob(SparkContext.scala:1840)\n    at org.apache.spark.SparkContext.runJob(SparkContext.scala:1853)\n    at org.apache.spark.api.python.PythonRDD$.runJob(PythonRDD.scala:393)\n    at org.apache.spark.api.python.PythonRDD.runJob(PythonRDD.scala)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:497)\n    at py4j.reflection.MethodInvoker.invoke(MethodInvoker.java:231)\n    at py4j.reflection.ReflectionEngine.invoke(ReflectionEngine.java:379)\n    at py4j.Gateway.invoke(Gateway.java:259)\n    at py4j.commands.AbstractCommand.invokeMethod(AbstractCommand.java:133)\n    at py4j.commands.CallCommand.execute(CallCommand.java:79)\n    at py4j.GatewayConnection.run(GatewayConnection.java:207)\n    at java.lang.Thread.run(Thread.java:745)\nCaused by: org.apache.spark.api.python.PythonException: Traceback (most recent call last):\n  File \"/databricks/spark/python/pyspark/worker.py\", line 111, in main\n    process()\n  File \"/databricks/spark/python/pyspark/worker.py\", line 106, in process\n    serializer.dump_stream(func(split_index, iterator), outfile)\n  File \"/databricks/spark/python/pyspark/serializers.py\", line 263, in dump_stream\n    vs = list(itertools.islice(iterator, batch))\n  File \"/databricks/spark/python/pyspark/rdd.py\", line 1295, in takeUpToNumLeft\n    yield next(iterator)\n  File \"&lt;ipython-input-46-4a4c467a0b3d&gt;\", line 13, in &lt;lambda&gt;\nIndexError: invalid index to scalar variable.\n\n    at org.apache.spark.api.python.PythonRunner$$anon$1.read(PythonRDD.scala:166)\n    at org.apache.spark.api.python.PythonRunner$$anon$1.&lt;init&gt;(PythonRDD.scala:207)\n    at org.apache.spark.api.python.PythonRunner.compute(PythonRDD.scala:125)\n    at org.apache.spark.api.python.PythonRDD.compute(PythonRDD.scala:70)\n    at org.apache.spark.rdd.RDD.computeOrReadCheckpoint(RDD.scala:300)\n    at org.apache.spark.rdd.RDD.iterator(RDD.scala:264)\n    at org.apache.spark.scheduler.ResultTask.runTask(ResultTask.scala:66)\n    at org.apache.spark.scheduler.Task.run(Task.scala:88)\n    at org.apache.spark.executor.Executor$TaskRunner.run(Executor.scala:214)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    ... 1 more\n</code></pre>\n"}, {"tags": ["python", "csv", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 654, "user_id": 5037442, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/75199ed4754399c03e62267158d9445b?s=128&d=identicon&r=PG&f=1", "display_name": "click here", "link": "https://stackoverflow.com/users/5037442/click-here"}, "is_accepted": false, "score": 1, "last_activity_date": 1466627928, "last_edit_date": 1466627928, "creation_date": 1466627231, "answer_id": 37977666, "question_id": 37977558, "link": "https://stackoverflow.com/questions/37977558/python-pandas-as-pd-set-to-csv-location/37977666#37977666", "title": "Python Pandas as pd set to_csv location", "body": "<p>You could just set the exact path. </p>\n\n<p>As in:</p>\n\n<pre><code>new_df.to_csv(r\"C:\\users\\mthiesen\\desktop\\python\\removed.csv\", index=False)\n</code></pre>\n\n<p>or something like this:</p>\n\n<pre><code>path_to_output = r'C:\\Users\\clickhere\\Desktop'\nnew_df.to_csv(path_to_output + r'\\output.csv')\n</code></pre>\n\n<p>Note: You could also improve performance by only taking in the columns that you need a la:</p>\n\n<pre><code>keep_cols = [\"Path\", \"IPTC - Title\", \"Description\", \"Person(s) of Import\", \"Museum Location\", \"Catalog Name\", \"Catalog Number\", \"Catalog Link\", \"Keywords\", \"Special Exhibitions\", \"Donor Credit\", \"Video Licensing\", \"Image Licensing\", \"Music Licensing\", \"Audio Licensing\", \"Relate Assets\", \"IPTC - Creator\", \"IPTC - City\", \"IPTC - Country\", \"Rights Usage Terms\"]\nnew_df = pd.read_csv(filename,usecols=keep_cols)\n</code></pre>\n"}], "owner": {"reputation": 81, "user_id": 5833718, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh6.googleusercontent.com/-J_fDaNYMJqE/AAAAAAAAAAI/AAAAAAAABTA/KJEa4-Tqo2U/photo.jpg?sz=128", "display_name": "Maile Thiesen", "link": "https://stackoverflow.com/users/5833718/maile-thiesen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1984, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1466627928, "creation_date": 1466626877, "question_id": 37977558, "link": "https://stackoverflow.com/questions/37977558/python-pandas-as-pd-set-to-csv-location", "title": "Python Pandas as pd set to_csv location", "body": "<p>I've got this script working based on another stack overflow post and I'm so close to having it do what I want it to do. The last step is getting the new csv to save in the second location I add as an argument. In this code i'd like to replace \"removed.csv\" with destination, but it's not working. It saves it where the source code lives, and I want to tell it where to save. Can anyone help point me in the right direction? Thanks so much!</p>\n\n<pre><code>#!/usr/bin/python\n\nimport sys\n\nimport pandas as pd\n\nfilename = sys.argv[1]\ndestination = sys.argv[2]\n\ndf = pd.read_csv(filename)\n\nkeep_cols = [\"Path\", \"IPTC - Title\", \"Description\", \"Person(s) of Import\", \"Museum Location\", \"Catalog Name\", \"Catalog Number\", \"Catalog Link\", \"Keywords\", \"Special Exhibitions\", \"Donor Credit\", \"Video Licensing\", \"Image Licensing\", \"Music Licensing\", \"Audio Licensing\", \"Relate Assets\", \"IPTC - Creator\", \"IPTC - City\", \"IPTC - Country\", \"Rights Usage Terms\"]\n\nnew_df = df[keep_cols]\n\nnew_df.to_csv(\"removed.csv\", index=False)\n</code></pre>\n"}, {"tags": ["python", "command-line-interface", "docopt"], "answers": [{"tags": [], "owner": {"reputation": 11047, "user_id": 1773706, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/kivhU.jpg?s=128&g=1", "display_name": "Omer Dagan", "link": "https://stackoverflow.com/users/1773706/omer-dagan"}, "is_accepted": false, "score": 0, "last_activity_date": 1478814555, "creation_date": 1478814555, "answer_id": 40537600, "question_id": 37977545, "link": "https://stackoverflow.com/questions/37977545/docopt-interprets-any-v-as-version/40537600#40537600", "title": "docopt interprets any -v as version", "body": "<p>You can prevent docopt from parsing <code>-v</code> as a special option by simply mention it yourself in the docstring, as an option. For example, suppose you would like to use <code>-v</code> for verbosity:</p>\n\n<pre><code>!/usr/bin/python\n\"\"\"\nUsage: ./ [options]\n\nOptions:\n-v  show verbose printing\n\"\"\"\nfrom docopt import docopt\n\narguments = docopt(__doc__)\nif arguments[\"-v\"] == True:\n    print \"A verbose message\"\n</code></pre>\n\n<p>In this case, running the script with no parameters will do nothing, while running it with <code>-v</code> will generate the string \"A verbose message\"</p>\n"}], "owner": {"reputation": 179, "user_id": 1651037, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/07b6c44d9552f6bf7ec9e6048273099a?s=128&d=identicon&r=PG", "display_name": "Narine Cholakian", "link": "https://stackoverflow.com/users/1651037/narine-cholakian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1478814555, "creation_date": 1466626844, "question_id": 37977545, "link": "https://stackoverflow.com/questions/37977545/docopt-interprets-any-v-as-version", "title": "docopt interprets any -v as version", "body": "<p>I am creating a cli with docopt and have the following issue (I'll bring in examples from their naval_fate example cli)</p>\n\n<p><code>naval-fate --version</code> or <code>naval-fate -v</code> will return the cli version but when try doing let's say <code>naval-fate ship -v</code> for a different purpose, it automatically returns the same result as the first two commands. </p>\n\n<p>Is there a way to prevent docopt from doing this?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "jenkins"], "comments": [{"owner": {"reputation": 1014, "user_id": 1059396, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/JSH2f.jpg?s=128&g=1", "display_name": "minocha", "link": "https://stackoverflow.com/users/1059396/minocha"}, "edited": false, "score": 0, "creation_date": 1466628433, "post_id": 37977531, "comment_id": 63401930, "body": "Can you please provide more detail to add context to the question? Maybe a code snippet or error"}, {"owner": {"reputation": 11, "user_id": 6501103, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e175d8be32c7401185be2b84b9992260?s=128&d=identicon&r=PG&f=1", "display_name": "M.M.", "link": "https://stackoverflow.com/users/6501103/m-m"}, "reply_to_user": {"reputation": 1014, "user_id": 1059396, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/JSH2f.jpg?s=128&g=1", "display_name": "minocha", "link": "https://stackoverflow.com/users/1059396/minocha"}, "edited": false, "score": 1, "creation_date": 1466672715, "post_id": 37977531, "comment_id": 63418326, "body": "Job&#39;s slave is a windows pc, so I&#39;m trying through a batch to set the user&#39;s input in a variable: Execute Windows batch command: set TYPE = %Type%,   Then try to retrieve it in python scipt: Execute Python script: Type = os.environ[&#39;TYPE&#39;]  The error I&#39;m getting is: Traceback (most recent call last):File &quot;C:\\Users\\ipsl\\AppData\\Local\\Temp\\hudson6045045489072241428.&zwnj;&#8203;py&quot;, line 67, in &lt;module&gt;     Type = os.environ[&#39;TYPE&#39;] File &quot;C:\\Users\\ipsl\\AppData\\Local\\Programs\\Python\\Python35\\lib\\os&zwnj;&#8203;.py&quot;, line 681, in <b>getitem</b>     raise KeyError(key) from None KeyError: &#39;TYPE&#39;  Thanks @minocha"}, {"owner": {"reputation": 5073, "user_id": 1579623, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/89a16a951477bb7e2fce77b6d33c60e2?s=128&d=identicon&r=PG", "display_name": "izzekil", "link": "https://stackoverflow.com/users/1579623/izzekil"}, "edited": false, "score": 0, "creation_date": 1466729858, "post_id": 37977531, "comment_id": 63452101, "body": "Do you use a freestyle job or a Pipeline one?"}, {"owner": {"reputation": 11, "user_id": 6501103, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e175d8be32c7401185be2b84b9992260?s=128&d=identicon&r=PG&f=1", "display_name": "M.M.", "link": "https://stackoverflow.com/users/6501103/m-m"}, "edited": false, "score": 0, "creation_date": 1466770388, "post_id": 37977531, "comment_id": 63468623, "body": "It is a freestyle job."}], "answers": [{"comments": [{"owner": {"reputation": 588, "user_id": 2913563, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh6.googleusercontent.com/-56Md6Abl_0w/AAAAAAAAAAI/AAAAAAAADWI/eBzIUyPVn2Y/photo.jpg?sz=128", "display_name": "KanwarG", "link": "https://stackoverflow.com/users/2913563/kanwarg"}, "edited": false, "score": 0, "creation_date": 1508865351, "post_id": 38075436, "comment_id": 80780081, "body": "Still no answer here?"}], "tags": [], "owner": {"reputation": 11, "user_id": 6501103, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e175d8be32c7401185be2b84b9992260?s=128&d=identicon&r=PG&f=1", "display_name": "M.M.", "link": "https://stackoverflow.com/users/6501103/m-m"}, "is_accepted": false, "score": 1, "last_activity_date": 1467114563, "creation_date": 1467114563, "answer_id": 38075436, "question_id": 37977531, "link": "https://stackoverflow.com/questions/37977531/execute-python-script-on-jenkins-with-variables/38075436#38075436", "title": "Execute python script on Jenkins with variables", "body": "<p>Solution:\nfrom os import environ</p>\n\n<p>Type = environ['Type']</p>\n"}], "owner": {"reputation": 11, "user_id": 6501103, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e175d8be32c7401185be2b84b9992260?s=128&d=identicon&r=PG&f=1", "display_name": "M.M.", "link": "https://stackoverflow.com/users/6501103/m-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3242, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1467114563, "creation_date": 1466626790, "question_id": 37977531, "link": "https://stackoverflow.com/questions/37977531/execute-python-script-on-jenkins-with-variables", "title": "Execute python script on Jenkins with variables", "body": "<p>I have created a job in Jenkins, for which user provides the value of a specific parameter, let's say PYTHON_PARM, as an input. On this job I execute a python script (using Python Plugin). The problem is that I want to use as a variable the user input $PYTHON_PARM parameter. This is not considered as an environment variable, so when trying to use os.environ['PYTHON_PARM'], this doesn't work.\nAny idea?</p>\n\n<p>Thanks,</p>\n"}, {"tags": ["python", "django", "static-analysis"], "comments": [{"owner": {"reputation": 38630, "user_id": 1324033, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/PaonW.png?s=128&g=1", "display_name": "Sayse", "link": "https://stackoverflow.com/users/1324033/sayse"}, "edited": false, "score": 1, "creation_date": 1466628270, "post_id": 37977487, "comment_id": 63401856, "body": "I&#39;m pretty sure it doesn&#39;t call the wsgi file, Make sure you add the project path to the sys path for the environment you&#39;re using"}, {"owner": {"reputation": 868, "user_id": 3865171, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Ora6D.jpg?s=128&g=1", "display_name": "katericata", "link": "https://stackoverflow.com/users/3865171/katericata"}, "reply_to_user": {"reputation": 38630, "user_id": 1324033, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/PaonW.png?s=128&g=1", "display_name": "Sayse", "link": "https://stackoverflow.com/users/1324033/sayse"}, "edited": false, "score": 1, "creation_date": 1466629529, "post_id": 37977487, "comment_id": 63402453, "body": "Thanks for the advice! Updating the <code>PYTHONPATH</code> with <code>&#47;home&#47;username&#47;virtenv&#47;my_site</code> fixed the problem."}], "answers": [{"tags": [], "owner": {"reputation": 38630, "user_id": 1324033, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/PaonW.png?s=128&g=1", "display_name": "Sayse", "link": "https://stackoverflow.com/users/1324033/sayse"}, "is_accepted": true, "score": 2, "last_activity_date": 1466628180, "last_edit_date": 1466628180, "creation_date": 1466627657, "answer_id": 37977794, "question_id": 37977487, "link": "https://stackoverflow.com/questions/37977487/djangos-check-cannot-import-settings/37977794#37977794", "title": "Django&#39;s &quot;check&quot; cannot import settings", "body": "<p>you seem to append to the sys path in the wsgi but the admin <code>check</code> won't be using that.</p>\n\n<p>Make sure you add the project path to the sys path for the environment you're using</p>\n"}], "owner": {"reputation": 868, "user_id": 3865171, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Ora6D.jpg?s=128&g=1", "display_name": "katericata", "link": "https://stackoverflow.com/users/3865171/katericata"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 37977794, "answer_count": 1, "score": 2, "last_activity_date": 1466628180, "creation_date": 1466626644, "question_id": 37977487, "link": "https://stackoverflow.com/questions/37977487/djangos-check-cannot-import-settings", "title": "Django&#39;s &quot;check&quot; cannot import settings", "body": "<p>Since the project is evolving I would like to start executing the system check framework of Django on dev environment. The technology stack is Ubuntu, PostgreSQL, Django1.9 + UWSGI. But...</p>\n\n<pre><code>django-admin check\n</code></pre>\n\n<p>outputs the following error:</p>\n\n<pre><code>ImportError: No module named my_project.settings\n</code></pre>\n\n<p>The <code>wsgi.py</code> file contains:</p>\n\n<pre><code>import os\nimport sys\nfrom django.core.wsgi import get_wsgi_application\n\nsys.path.append('~/virtenv/my_site')\n\nos.environ.setdefault(\"DJANGO_SETTINGS_MODULE\", \"my_site.settings\")\n\napplication = get_wsgi_application()\n</code></pre>\n\n<p>The env variable <code>DJANGO_SETTINGS_MODULE</code> echoes <code>my_site.settings</code></p>\n\n<p>It is important to mention that the <code>settings.py</code> file is in <code>virtenv/my_site/my_site/</code> . Please also note that the entire web application is running fine, I am also using the features of <code>manage.py</code>. Its just the <code>django-admin check</code> that is getting on my nerves.</p>\n"}, {"tags": ["python", "calendar", "google-api", "google-admin-sdk"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 6501078, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a9bd6739ec18677b5f30b2d35f596bf?s=128&d=identicon&r=PG&f=1", "display_name": "Greg B.", "link": "https://stackoverflow.com/users/6501078/greg-b"}, "is_accepted": true, "score": 0, "last_activity_date": 1470840224, "creation_date": 1470840224, "answer_id": 38876630, "question_id": 37977358, "link": "https://stackoverflow.com/questions/37977358/google-api-domain-admin-access/38876630#38876630", "title": "Google API Domain Admin Access", "body": "<p>Solved:</p>\n\n<p>The issue was that my client_secrets.json file for oauth 2.0 was set to my personal google account and not the admin account. I cleared the storage.json file where credentials were stored, re ran the program with the admin account logged in, and it worked! Hoped this helps.</p>\n"}], "owner": {"reputation": 1, "user_id": 6501078, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a9bd6739ec18677b5f30b2d35f596bf?s=128&d=identicon&r=PG&f=1", "display_name": "Greg B.", "link": "https://stackoverflow.com/users/6501078/greg-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 38876630, "answer_count": 1, "score": 0, "last_activity_date": 1470840224, "creation_date": 1466626178, "last_edit_date": 1466626535, "question_id": 37977358, "link": "https://stackoverflow.com/questions/37977358/google-api-domain-admin-access", "title": "Google API Domain Admin Access", "body": "<p>I'm working on a script using Python that will access all students' Google calendars using their Google accounts and then add their school schedule into their calendar. I have figured out adding and deleting events and calendars using the API, but my question is how do I add a specific event to a specific calendar under a domain. I am a domain admin.</p>\n"}, {"tags": ["python", "python-3.x", "tkinter"], "answers": [{"comments": [{"owner": {"reputation": 195, "user_id": 1042728, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/bd733d5f5fe41cbf61a4d14784a4cfa3?s=128&d=identicon&r=PG", "display_name": "Aaron Henderson", "link": "https://stackoverflow.com/users/1042728/aaron-henderson"}, "edited": false, "score": 0, "creation_date": 1466629554, "post_id": 37977598, "comment_id": 63402467, "body": "Thank you! I tried every combination of adding self to the saveButtonCommand function I didn&#39;t think to add it to the variables themselves. Forest through the trees."}], "tags": [], "owner": {"reputation": 56, "user_id": 1926352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e1c25f2520c78f116524f80d0527324?s=128&d=identicon&r=PG", "display_name": "khadrawy", "link": "https://stackoverflow.com/users/1926352/khadrawy"}, "is_accepted": true, "score": 2, "last_activity_date": 1466626995, "creation_date": 1466626995, "answer_id": 37977598, "question_id": 37977302, "link": "https://stackoverflow.com/questions/37977302/how-do-i-get-the-value-of-an-item-in-tkinter-when-using-a-class/37977598#37977598", "title": "How do i get the value of an item in tkinter when using a class?", "body": "<p>Well I fixed it, you should use self.\"variable-name\" to declare an accessible attribute.</p>\n\n<pre><code>from tkinter import *\nfrom tkinter import messagebox\nimport sys, datetime\n\nclass Window(Frame):\n\ndef __init__(self, master = None):\n    Frame.__init__(self, master)\n    self.master = master\n    self.init_window()\n\ndef init_window(self):\n    self.master.title(\"SPL - \" + str(datetime.date.today()))\n    self.configure(background=\"#e7e7e7\")\n    self.pack(fill=BOTH, expand=1)\n\n    # Menu -&gt; Quit, Open Log\n\n    menu = Menu(self.master)\n    self.master.config(menu=menu)\n\n    file = Menu(menu)\n    file.add_command(label=\"Open Log\")\n    file.add_command(label=\"Quit\", command=self.client_exit)\n    menu.add_cascade(label=\"File\", menu=file)\n\n    # Window Items\n\n    # Office Drop Down\n    OFFICES = [\n        \"County Building\",\n        \"Adult Probation\",\n        \"Building &amp; Zoning\",\n        \"Circuit Court\",\n        \"    - CC. Family Division\",\n        \"    - CC. Friend of the Court\",\n        \"    - CC. Juvenile Division\",\n        \"Clerk\",\n        \"Commissioners\",\n        \"Computer Infomration Systems\",\n        \"Corporation Counsel\",\n        \"District Court\",\n        \"    - DC. Community Corrections\",\n        \"    - DC. Magistrate Office\",\n        \"    - DC. Probation Office\",\n        \"Economic Development Corp.\",\n        \"Equalization\",\n        \"Maintenance\",\n        \"Probate Court\",\n        \"Prosecuting Attorney\",\n        \"Public Guardian\",\n        \"Register of Deeds\",\n        \"Sheriff Department\",\n        \"    - SD. Booking\",\n        \"    - SD. Kitchen\",\n        \"    - SD. Records\",\n        \"    - SD. Squadroom\",\n        \"Social Security\",\n        \"Tax Mapping/GIS\",\n        \"Treasurer\",\n        \"Veteran's\"\n    ]\n\n    officeLabel = Label(self, text=\"Office:\", fg=\"#000000\", bg=\"#e7e7e7\", font=\"Verdana 10\")\n    officeLabel.place(x=5,y=5)\n\n    self.officeOptionVar = StringVar()\n    self.officeOptionVar.set(OFFICES[0]) # Default Value\n\n    officeOption = OptionMenu(self, self.officeOptionVar, *OFFICES)\n    officeOption.place(x=5,y=28,width=310)\n\n    # Note\n    noteLabel = Label(self, text=\"Note:\", fg=\"#000000\", bg=\"#e7e7e7\",      font=\"Verdana 10\")\n    noteLabel.place(x=5,y=58)\n\n    self.noteText = Text()\n    self.noteText.place(x=5, y=81, width=310, height=225)\n\n    # Save Button\n    saveButton = Button(self, text='Save', command=self.saveButtonCommand)\n    saveButton.place(x=5, y=312, width=310, height=50)\n\ndef client_exit(self):\n    exit()\n\ndef saveButtonCommand(self):\n    office = self.officeOptionVar.get()\n    note = self.noteText.get(\"1.0\",\"end-1c\")\n    messagebox.showinfo(title=\"Test\", message=note)\n\n root = Tk()\n root.resizable(0,0)\n\n screen_width = root.winfo_screenwidth()\n screen_height = root.winfo_screenheight()\n\n geo_width = 320\n geo_height = 370\n geo_offset_w = int((screen_width/2)-(geo_width/2))\n\n root.geometry(str(geo_width) + \"x\" + str(geo_height) + \"+\" + str(geo_offset_w) + \"+200\")\n\n\n app = Window(root)\n root.mainloop()\n</code></pre>\n"}], "owner": {"reputation": 195, "user_id": 1042728, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/bd733d5f5fe41cbf61a4d14784a4cfa3?s=128&d=identicon&r=PG", "display_name": "Aaron Henderson", "link": "https://stackoverflow.com/users/1042728/aaron-henderson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 521, "favorite_count": 0, "accepted_answer_id": 37977598, "answer_count": 1, "score": 1, "last_activity_date": 1466626995, "creation_date": 1466626007, "question_id": 37977302, "link": "https://stackoverflow.com/questions/37977302/how-do-i-get-the-value-of-an-item-in-tkinter-when-using-a-class", "title": "How do i get the value of an item in tkinter when using a class?", "body": "<p>I wanted to learn a bit of tkinter. I followed a couple guides by <a href=\"https://www.youtube.com/watch?v=Ccct5D2AyNM&amp;list=PLQVvvaa0QuDe8XSftW-RAxdo6OmaeL85M&amp;index=40\" rel=\"nofollow\">sentdex</a> on Youtube and feel like I have a good understanding of the basics. However, now I am trying to write a script that works as quick log and I am running into issues getting the text from the entry/text/optionmenu.</p>\n\n<p>If I set up the gui outside of class I can simply do a variable.get() and all is ducky. But when I have my gui tkinter stuff in a class I get an Exception that  is not defined.</p>\n\n<p>Here is my code. The issue lies in def saveButtonCommand(self):</p>\n\n<p>How do I get the values of noteText and officeOption/Var?</p>\n\n<pre><code># Imports\nfrom tkinter import *\nfrom tkinter import messagebox\nimport sys, datetime\n\nclass Window(Frame):\n\n    def __init__(self, master = None):\n        Frame.__init__(self, master)\n        self.master = master\n        self.init_window()\n\n    def init_window(self):\n        self.master.title(\"SPL - \" + str(datetime.date.today()))\n        self.configure(background=\"#e7e7e7\")\n        self.pack(fill=BOTH, expand=1)\n\n        # Menu -&gt; Quit, Open Log\n\n        menu = Menu(self.master)\n        self.master.config(menu=menu)\n\n        file = Menu(menu)\n        file.add_command(label=\"Open Log\")\n        file.add_command(label=\"Quit\", command=self.client_exit)\n        menu.add_cascade(label=\"File\", menu=file)\n\n        # Window Items\n\n        # Office Drop Down\n        OFFICES = [\n            \"County Building\",\n            \"Adult Probation\",\n            \"Building &amp; Zoning\",\n            \"Circuit Court\",\n            \"    - CC. Family Division\",\n            \"    - CC. Friend of the Court\",\n            \"    - CC. Juvenile Division\",\n            \"Clerk\",\n            \"Commissioners\",\n            \"Computer Infomration Systems\",\n            \"Corporation Counsel\",\n            \"District Court\",\n            \"    - DC. Community Corrections\",\n            \"    - DC. Magistrate Office\",\n            \"    - DC. Probation Office\",\n            \"Economic Development Corp.\",\n            \"Equalization\",\n            \"Maintenance\",\n            \"Probate Court\",\n            \"Prosecuting Attorney\",\n            \"Public Guardian\",\n            \"Register of Deeds\",\n            \"Sheriff Department\",\n            \"    - SD. Booking\",\n            \"    - SD. Kitchen\",\n            \"    - SD. Records\",\n            \"    - SD. Squadroom\",\n            \"Social Security\",\n            \"Tax Mapping/GIS\",\n            \"Treasurer\",\n            \"Veteran's\"\n        ]\n\n        officeLabel = Label(self, text=\"Office:\", fg=\"#000000\", bg=\"#e7e7e7\", font=\"Verdana 10\")\n        officeLabel.place(x=5,y=5)\n\n        officeOptionVar = StringVar()\n        officeOptionVar.set(OFFICES[0]) # Default Value\n\n        officeOption = OptionMenu(self, officeOptionVar, *OFFICES)\n        officeOption.place(x=5,y=28,width=310)\n\n        # Note\n        noteLabel = Label(self, text=\"Note:\", fg=\"#000000\", bg=\"#e7e7e7\", font=\"Verdana 10\")\n        noteLabel.place(x=5,y=58)\n\n        noteText = Text()\n        noteText.place(x=5, y=81, width=310, height=225)\n\n        # Save Button\n        saveButton = Button(self, text='Save', command=self.saveButtonCommand)\n        saveButton.place(x=5, y=312, width=310, height=50)\n\n    def client_exit(self):\n        exit()\n\n    def saveButtonCommand(self):\n        office = officeOptionVar.get()\n        note = noteText.get(\"1.0\",\"end-1c\")\n        messagebox.showinfo(title=\"Test\", message=note)\n\nroot = Tk()\nroot.resizable(0,0)\n\nscreen_width = root.winfo_screenwidth()\nscreen_height = root.winfo_screenheight()\n\ngeo_width = 320\ngeo_height = 370\ngeo_offset_w = int((screen_width/2)-(geo_width/2))\n\nroot.geometry(str(geo_width) + \"x\" + str(geo_height) + \"+\" + str(geo_offset_w) + \"+200\")\n\n\napp = Window(root)\nroot.mainloop()\n</code></pre>\n"}, {"tags": ["python", "windows", "packaging", "python-wheel", "uberjar"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1466626408, "post_id": 37977289, "comment_id": 63400960, "body": "I think the short answer is <i>&quot;no&quot;</i>. The slightly longer non-answer is <i>&quot;finding this for you is off-topic for SO&quot;</i>."}, {"owner": {"reputation": 6848, "user_id": 260122, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b88e92c805fa75acab94832be799b65f?s=128&d=identicon&r=PG", "display_name": "clacke", "link": "https://stackoverflow.com/users/260122/clacke"}, "edited": false, "score": 0, "creation_date": 1562515831, "post_id": 37977289, "comment_id": 100389808, "body": "pex clearly does not support windows, and nothing seems to have happened on that front since 2016. <a href=\"https://github.com/pantsbuild/pex/issues/230\" rel=\"nofollow noreferrer\">github.com/pantsbuild/pex/issues/230</a>"}], "answers": [{"comments": [{"owner": {"reputation": 6848, "user_id": 260122, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b88e92c805fa75acab94832be799b65f?s=128&d=identicon&r=PG", "display_name": "clacke", "link": "https://stackoverflow.com/users/260122/clacke"}, "edited": false, "score": 0, "creation_date": 1562516516, "post_id": 40176913, "comment_id": 100389937, "body": "<a href=\"https://pypi.org/project/pyzzer/\" rel=\"nofollow noreferrer\">pypi.org/project/pyzzer</a> can be used for this. Not as neat as pex, which pulls in dependencies, adds its own prelude which can unzip to a temp directory, etc. But it&#39;s a start, and unlike pex, pyzzer does support Windows."}], "tags": [], "owner": {"reputation": 15566, "user_id": 876497, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2713233cc2e49a4db53ff08d6c114255?s=128&d=identicon&r=PG", "display_name": "DejanLekic", "link": "https://stackoverflow.com/users/876497/dejanlekic"}, "is_accepted": false, "score": 1, "last_activity_date": 1602598453, "last_edit_date": 1602598453, "creation_date": 1477053558, "answer_id": 40176913, "question_id": 37977289, "link": "https://stackoverflow.com/questions/37977289/python-equivalent-of-uber-jar/40176913#40176913", "title": "Python equivalent of uber-jar", "body": "<p>One Python alternative to Java's &quot;uber-jar&quot; (made with, say, shade plugin) could be to simply make a tarball of the <em>whole</em> virtual environment, and use it to in your deployment process.</p>\n<p>Problem with this approach (as with JAR as well!) is when one of the packages need native libraries. But that is a different story I would say...</p>\n<p>Another (modern) alternative is to simply create a Docker image.</p>\n"}], "owner": {"reputation": 544, "user_id": 514187, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/ae96ef1fd1f1d8e7470df5bbdcf62411?s=128&d=identicon&r=PG", "display_name": "Michael Gummelt", "link": "https://stackoverflow.com/users/514187/michael-gummelt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 996, "favorite_count": 0, "answer_count": 1, "score": 9, "last_activity_date": 1602598453, "creation_date": 1466625963, "question_id": 37977289, "link": "https://stackoverflow.com/questions/37977289/python-equivalent-of-uber-jar", "title": "Python equivalent of uber-jar", "body": "<p>I'm looking for the equivalent of an uber-jar in the python world.</p>\n\n<ul>\n<li>I need to distribute a python package to all three major platforms (Windows, Mac, Linux).</li>\n<li>It must be bundled with all its dependencies, as the target platform may lack internet.</li>\n<li><p>It must be a cross-platform distribution, so I don't have to build for multiple targets.  That is, I should be able to run it on all platforms like this:</p>\n\n<p><code>python package.ext</code></p></li>\n</ul>\n\n<p>You can assume that the package is pure python (no native code).  <strong>Is there anything that satisfies these requirements?</strong></p>\n\n<p>I know of the following options, each with deficiencies:</p>\n\n<ul>\n<li><code>.whl</code> packages  require <code>pip</code> for installation.</li>\n<li>I don't know how to create an <code>.egg</code> containing all package dependencies.</li>\n<li>This PEP: <a href=\"http://legacy.python.org/dev/peps/pep-0441\" rel=\"noreferrer\">http://legacy.python.org/dev/peps/pep-0441</a> shows that python supports running <code>.zip</code> files, but AFAICT, the best tooling for creating such a zip is pex (<a href=\"https://github.com/pantsbuild/pex\" rel=\"noreferrer\">https://github.com/pantsbuild/pex</a>), which I think doesn't support Windows</li>\n</ul>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 14205, "user_id": 3067748, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/ojjhJ.jpg?s=128&g=1", "display_name": "SparkAndShine", "link": "https://stackoverflow.com/users/3067748/sparkandshine"}, "edited": false, "score": 0, "creation_date": 1466626235, "post_id": 37977223, "comment_id": 63400856, "body": "Use <a href=\"https://docs.python.org/2.6/library/string.html#string.replace\" rel=\"nofollow noreferrer\"><code>string.replace</code></a>, <code>abc = abc.replace(&quot;Z2&quot;, &#39;&#39;)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 65, "user_id": 6500607, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1496d7e1a35ccc59244ef4c92e19725e?s=128&d=identicon&r=PG&f=1", "display_name": "user2829222", "link": "https://stackoverflow.com/users/6500607/user2829222"}, "edited": false, "score": 0, "creation_date": 1466626323, "post_id": 37977298, "comment_id": 63400916, "body": "Thank you ! Gotcha"}], "tags": [], "owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "is_accepted": true, "score": 1, "last_activity_date": 1466625986, "creation_date": 1466625986, "answer_id": 37977298, "question_id": 37977223, "link": "https://stackoverflow.com/questions/37977223/removing-specific-matching-substring-from-a-string-python/37977298#37977298", "title": "Removing specific matching substring from a string python", "body": "<p><code>rstrip()</code> returns a new string; it does not modify the existing string.</p>\n\n<p>You have to reassign abc to contain the new string:</p>\n\n<pre><code>abc = abc.rstrip(\"Z2\")\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 65, "user_id": 6500607, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1496d7e1a35ccc59244ef4c92e19725e?s=128&d=identicon&r=PG&f=1", "display_name": "user2829222", "link": "https://stackoverflow.com/users/6500607/user2829222"}, "edited": false, "score": 0, "creation_date": 1466626352, "post_id": 37977347, "comment_id": 63400934, "body": "Thanks you, got it !"}, {"owner": {"reputation": 8538, "user_id": 3059812, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/UaU9b.jpg?s=128&g=1", "display_name": "Morgan Thrapp", "link": "https://stackoverflow.com/users/3059812/morgan-thrapp"}, "edited": false, "score": 1, "creation_date": 1466627154, "post_id": 37977347, "comment_id": 63401311, "body": "Dumping code without an explanation is not helpful for either the questioner or future readers."}], "tags": [], "owner": {"reputation": 654, "user_id": 5037442, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/75199ed4754399c03e62267158d9445b?s=128&d=identicon&r=PG&f=1", "display_name": "click here", "link": "https://stackoverflow.com/users/5037442/click-here"}, "is_accepted": false, "score": 0, "last_activity_date": 1466627674, "last_edit_date": 1466627674, "creation_date": 1466626139, "answer_id": 37977347, "question_id": 37977223, "link": "https://stackoverflow.com/questions/37977223/removing-specific-matching-substring-from-a-string-python/37977347#37977347", "title": "Removing specific matching substring from a string python", "body": "<p>You can use regular expressions. Which will remove <code>Z2</code> from the end as well as cases where it's somewhere in the string.</p>\n\n<pre><code>import re\nabc= \"20160622125255102D87Z2\"\nabc = re.sub('Z2', '', abc)\nprint(abc)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 65, "user_id": 6500607, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1496d7e1a35ccc59244ef4c92e19725e?s=128&d=identicon&r=PG&f=1", "display_name": "user2829222", "link": "https://stackoverflow.com/users/6500607/user2829222"}, "edited": false, "score": 0, "creation_date": 1466626310, "post_id": 37977370, "comment_id": 63400907, "body": "For my case , the substring occurs at the end , so i used rstrip. Thanks"}], "tags": [], "owner": {"reputation": 176, "user_id": 3114897, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qydM2.jpg?s=128&g=1", "display_name": "Shalan", "link": "https://stackoverflow.com/users/3114897/shalan"}, "is_accepted": false, "score": 1, "last_activity_date": 1466626215, "creation_date": 1466626215, "answer_id": 37977370, "question_id": 37977223, "link": "https://stackoverflow.com/questions/37977223/removing-specific-matching-substring-from-a-string-python/37977370#37977370", "title": "Removing specific matching substring from a string python", "body": "<p>It's because rstrip returns a new string. Try </p>\n\n<pre><code>abc = abc.rstrip(\"Z2\")\n</code></pre>\n\n<p>Also, if the substring you want to remove could appear anywhere in the string (as opposed to being at the end always), you might instead want to use </p>\n\n<p><code>abc.replace(\"Z2\",\"\")</code> </p>\n"}], "owner": {"reputation": 65, "user_id": 6500607, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1496d7e1a35ccc59244ef4c92e19725e?s=128&d=identicon&r=PG&f=1", "display_name": "user2829222", "link": "https://stackoverflow.com/users/6500607/user2829222"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "closed_date": 1466627312, "accepted_answer_id": 37977298, "answer_count": 3, "score": 0, "last_activity_date": 1466627674, "creation_date": 1466625677, "last_edit_date": 1466625989, "question_id": 37977223, "link": "https://stackoverflow.com/questions/37977223/removing-specific-matching-substring-from-a-string-python", "closed_reason": "Duplicate", "title": "Removing specific matching substring from a string python", "body": "<p>I want to remove a matching substring from a string in python .</p>\n\n<p>Here is what I have tried so far:</p>\n\n<pre><code>abc= \"20160622125255102D87Z2\"\n\nif \"Z2\" in abc:\n    abc.rstrip(\"Z2\")\n    print(abc)\n</code></pre>\n\n<p>But this doesn't work. Kindly help</p>\n"}, {"tags": ["python", "math", "geometry", "trigonometry"], "answers": [{"comments": [{"owner": {"reputation": 5496, "user_id": 2661491, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/829f8aba5815197b56359be148cd0a13?s=128&d=identicon&r=PG", "display_name": "evan.oman", "link": "https://stackoverflow.com/users/2661491/evan-oman"}, "edited": false, "score": 1, "creation_date": 1466636131, "post_id": 37978723, "comment_id": 63404861, "body": "&quot;To be able to have an ellipse that is not straight up and down you will have to use polar coordinates.&quot; This is not trure, see <a href=\"http://www.maa.org/external_archive/joma/Volume8/Kalman/General.html\" rel=\"nofollow noreferrer\">here</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5454506"}, "reply_to_user": {"reputation": 5496, "user_id": 2661491, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/829f8aba5815197b56359be148cd0a13?s=128&d=identicon&r=PG", "display_name": "evan.oman", "link": "https://stackoverflow.com/users/2661491/evan-oman"}, "edited": false, "score": 0, "creation_date": 1466646304, "post_id": 37978723, "comment_id": 63407394, "body": "Well evan058, your a beast! I should have said easier for most people. Since the various algebra syntax systems support substitution you could probably make a ellipse in differential equations, trig, linear algebra, arithmetic or heck even make one with quantum physics....No... with particles in a collider. You are correct Sir:)"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user5454506"}, "is_accepted": false, "score": 0, "last_activity_date": 1466631544, "creation_date": 1466631544, "answer_id": 37978723, "question_id": 37977179, "link": "https://stackoverflow.com/questions/37977179/how-to-change-this-function-from-creating-a-circular-gradient-to-an-elliptical-g/37978723#37978723", "title": "How to change this function from creating a circular gradient to an elliptical gradient?", "body": "<p>I don't understand your function because of the variable naming. However:</p>\n\n<p><a href=\"https://i.stack.imgur.com/WhpCp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/WhpCp.png\" alt=\"Ellipse\"></a></p>\n\n<p>The <code>a^2</code> and <code>b^2</code> parts are what causes the squashing in one direction or the other.</p>\n\n<p>To be able to have an ellipse that is not straight up and down you will have to use polar coordinates.</p>\n"}, {"tags": [], "owner": {"reputation": 65718, "user_id": 844416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e39c2364935265593d76247ddc6d07c?s=128&d=identicon&r=PG", "display_name": "MBo", "link": "https://stackoverflow.com/users/844416/mbo"}, "is_accepted": false, "score": 0, "last_activity_date": 1466661311, "creation_date": 1466661311, "answer_id": 37983354, "question_id": 37977179, "link": "https://stackoverflow.com/questions/37977179/how-to-change-this-function-from-creating-a-circular-gradient-to-an-elliptical-g/37983354#37983354", "title": "How to change this function from creating a circular gradient to an elliptical gradient?", "body": "<p>To obtain axis-aligned elliptical gradient, just use scale coefficients for dx and dy. For example: <code>dx = 2.0 * dx</code></p>\n\n<p>P.S. Your code </p>\n\n<pre><code> t = math.atan2(dy, dx)\n r = math.sqrt(dx ** 2 + dy ** 2)\n ux = r * math.cos(t)\n uy = r * math.sin(t)\n</code></pre>\n\n<p>is completely useless - it gives <code>ux=dx, uy=dy</code></p>\n"}], "owner": {"reputation": 21, "user_id": 4179750, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-HiBiO1Yiu_E/AAAAAAAAAAI/AAAAAAAAALo/vo2iz9vc58k/photo.jpg?sz=128", "display_name": "mbrockman1", "link": "https://stackoverflow.com/users/4179750/mbrockman1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 84, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1466661311, "creation_date": 1466625541, "last_edit_date": 1466646935, "question_id": 37977179, "link": "https://stackoverflow.com/questions/37977179/how-to-change-this-function-from-creating-a-circular-gradient-to-an-elliptical-g", "title": "How to change this function from creating a circular gradient to an elliptical gradient?", "body": "<p>I am trying to create a function that doesn't rely on a perfect circle for a transparency gradient, but rather an elliptical that can be a perfect circle or can be an ellipse. Currently my function creates a square that contains a 1/4th of a circular gradient that is later mirrored in 3 directions to make a circle.</p>\n\n<p>My function is defined as:</p>\n\n<pre><code>def _calc_mask(rx, ry): #rx and ry represent the pixels\n    dx = rx - (width/2)   # horizontal center of Grating\n    dy = ry - (width/2)  # vertical center of Grating\n\n    t = math.atan2(dy, dx)\n    r = math.sqrt(dx ** 2 + dy ** 2)\n    ux = r * math.cos(t)\n    uy = r * math.sin(t)\n    f = math.exp(-0.5 * (ux / (self.std_dev*3)) ** 2 - 0.5 *\n                 (uy / (self.std_dev*3)) ** 2)\n    f = 1.0-f\n    return 0, 0, 0, f\n</code></pre>\n"}, {"tags": ["python", "input", "raw-input"], "comments": [{"owner": {"reputation": 71409, "user_id": 3125566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QcWOt.jpg?s=128&g=1", "display_name": "Moses Koledoye", "link": "https://stackoverflow.com/users/3125566/moses-koledoye"}, "edited": false, "score": 1, "creation_date": 1466625388, "post_id": 37977123, "comment_id": 63400402, "body": "Subtle. This could easily go from a few lines of code to some AI project."}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1466625932, "post_id": 37977123, "comment_id": 63400701, "body": "Yes, you could do that, but it would probably get very complex very quickly and is not a good subject for a SO question. I would start with a dictionary mapping something that can match a user&#39;s input (e.g. using a regular expression or just something simple like <code>&#39;good&#39; in response.lower()</code>) to the next action the &quot;bot&quot; should take (e.g. <code>print &#39;Awesome!&#39;</code>)."}], "answers": [{"tags": [], "owner": {"reputation": 1491, "user_id": 6480793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fe10b5df5ec1164b5bade347d8599f8?s=128&d=identicon&r=PG&f=1", "display_name": "Delioth", "link": "https://stackoverflow.com/users/6480793/delioth"}, "is_accepted": true, "score": 1, "last_activity_date": 1466625954, "creation_date": 1466625954, "answer_id": 37977288, "question_id": 37977123, "link": "https://stackoverflow.com/questions/37977123/using-multiple-inputs-for-raw-input-python/37977288#37977288", "title": "Using multiple inputs for raw_input python", "body": "<p>Yes, go ahead and take a look at <a href=\"https://docs.python.org/2/tutorial/controlflow.html\" rel=\"nofollow\">if statements, and flow of control</a>. In short, <code>if</code> lets you do some things if a condition is true. In this example, it could be something like:</p>\n\n<pre><code>how_are_you = raw_input(\"How are you? \")\nif how_are_you == 'good':\n    print 'Awesome!'\n</code></pre>\n\n<p>You can also use <code>else</code> or <code>elif</code> to have multiple branches:</p>\n\n<pre><code>how_are_you = raw_input(\"How are you? \")\nif how_are_you == 'good':\n    print 'Awesome!'\nelif how_are_you == 'great':\n    print 'Fantastic!'\nelse: # if how_are_you is anything except 'good' or 'great'.\n    print \"that's not so good...\"\n</code></pre>\n\n<p>And there's much, much more with making sure sensical things work (if the user types \"Good\" this chunk won't catch it- you'd need to use the .lower() functionality to compare regardless of case, or <code>in</code> to verify that punctuation won't kill it.). if...elif...else chains can be arbitrarily long, so you can have as many options and unique responses.</p>\n\n<p>You can also chain conditions with <code>and</code> and <code>or</code> if you want to use the same response for multiple inputs.</p>\n"}], "owner": {"reputation": 142, "user_id": 6500957, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-49RmKjrls20/AAAAAAAAAAI/AAAAAAAAANU/JJTfpiMwuSE/photo.jpg?sz=128", "display_name": "ethan lee", "link": "https://stackoverflow.com/users/6500957/ethan-lee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 264, "favorite_count": 0, "closed_date": 1466710966, "accepted_answer_id": 37977288, "answer_count": 1, "score": 0, "last_activity_date": 1466625954, "creation_date": 1466625271, "last_edit_date": 1466625477, "question_id": 37977123, "link": "https://stackoverflow.com/questions/37977123/using-multiple-inputs-for-raw-input-python", "closed_reason": "Needs more focus", "title": "Using multiple inputs for raw_input python", "body": "<p>Hi this is my first question. I started working on learning python this week and I started making simple programs. I started making a raw_input program, so the console asks a question like \"Hi how are you?\" and no matter what you respond with it would say the same thing. Is there a way I could make it so that if I say good it would say \"Awesome!...\" then ask another question like \"Awesome! How old are you?\" Something like that? This is my simple code so far.</p>\n\n<pre><code>print \"Hello! THis is a simple program created by myselF! It will ask a variety of simple questions!\"\n\nhow_are_you = raw_input(\"How are you?\")\nprint how_are_you\n\nage = raw_input(\"Good, glad to hear it! How old are you?\") # Or \"Aw thats not good hopefully this will change that. blah blah blah.\nprint age\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "pandas", "indexing"], "answers": [{"comments": [{"owner": {"reputation": 483, "user_id": 5536001, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/b724454eea2f7469a1f8074c520c720c?s=128&d=identicon&r=PG", "display_name": "cbcoutinho", "link": "https://stackoverflow.com/users/5536001/cbcoutinho"}, "edited": false, "score": 0, "creation_date": 1466626029, "post_id": 37977220, "comment_id": 63400753, "body": "This answer assumes that the data is evenly spaced and indexed by hours. I want to take advantage of the df.first(&#39;2H&#39;) functionality to take care of unique but inconsistently spaced data"}, {"owner": {"reputation": 483, "user_id": 5536001, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/b724454eea2f7469a1f8074c520c720c?s=128&d=identicon&r=PG", "display_name": "cbcoutinho", "link": "https://stackoverflow.com/users/5536001/cbcoutinho"}, "edited": false, "score": 0, "creation_date": 1466627844, "post_id": 37977220, "comment_id": 63401653, "body": "Incredible - this is exactly what I was looking for."}], "tags": [], "owner": {"reputation": 619481, "user_id": 2901002, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/hMDvl.jpg?s=128&g=1", "display_name": "jezrael", "link": "https://stackoverflow.com/users/2901002/jezrael"}, "is_accepted": true, "score": 1, "last_activity_date": 1466626826, "last_edit_date": 1466626826, "creation_date": 1466625667, "answer_id": 37977220, "question_id": 37977118, "link": "https://stackoverflow.com/questions/37977118/pandas-set-first-2-hours-of-every-group-to-nan/37977220#37977220", "title": "Pandas: Set first 2 hours of every group to NaN", "body": "<p>Find all <code>indexes</code> by first <code>2H</code>, then change <code>index</code> to <code>Multiindex</code>, <a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.swaplevel.html\" rel=\"nofollow\"><code>swaplevel</code></a> for matching <a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.ix.html\" rel=\"nofollow\"><code>ix</code></a> and last <a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.reset_index.html\" rel=\"nofollow\"><code>reset_index</code></a>:</p>\n\n<pre><code>idx = df.groupby('state')['value'].apply(lambda x: x.first('2H')).index\n\ndf.set_index('state', append=True, inplace=True)\ndf = df.swaplevel(0,1)\n\ndf.ix[idx,'value'] = np.nan\n\nprint (df.reset_index(level=0))\n                       state     value\n2016-01-01 00:00:00  State 1       NaN\n2016-01-01 01:00:00  State 1       NaN\n2016-01-01 02:00:00  State 1  0.406512\n2016-01-01 03:00:00  State 2       NaN\n2016-01-01 04:00:00  State 2       NaN\n2016-01-01 05:00:00  State 2  0.226350\n</code></pre>\n"}], "owner": {"reputation": 483, "user_id": 5536001, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/b724454eea2f7469a1f8074c520c720c?s=128&d=identicon&r=PG", "display_name": "cbcoutinho", "link": "https://stackoverflow.com/users/5536001/cbcoutinho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 190, "favorite_count": 0, "accepted_answer_id": 37977220, "answer_count": 1, "score": 1, "last_activity_date": 1466626826, "creation_date": 1466625264, "question_id": 37977118, "link": "https://stackoverflow.com/questions/37977118/pandas-set-first-2-hours-of-every-group-to-nan", "title": "Pandas: Set first 2 hours of every group to NaN", "body": "<p>I am trying to clean my data by setting 'value' to NaN for the first 2 hours of every 'state' group.</p>\n\n<p>My dataframe looks like this:</p>\n\n<pre><code>&gt;&gt;&gt; import pandas as pd\n&gt;&gt;&gt; import numpy as np\n&gt;&gt;&gt; \n&gt;&gt;&gt; rng = pd.date_range('1/1/2016', periods=6, freq='H')\n&gt;&gt;&gt; \n&gt;&gt;&gt; data = {'value': np.random.rand(len(rng)), \n...         'state': ['State 1']*3 + ['State 2']*3}\n&gt;&gt;&gt; df = pd.DataFrame(data, index=rng)\n&gt;&gt;&gt; \n&gt;&gt;&gt; df\n                       state     value\n2016-01-01 00:00:00  State 1  0.800798\n2016-01-01 01:00:00  State 1  0.130290\n2016-01-01 02:00:00  State 1  0.464372\n2016-01-01 03:00:00  State 2  0.925445\n2016-01-01 04:00:00  State 2  0.732331\n2016-01-01 05:00:00  State 2  0.811541\n</code></pre>\n\n<p>I've come up with three ways of doing this, and both don't work:</p>\n\n<p>1) First attempt using .loc and/or .ix result in no change:</p>\n\n<pre><code>&gt;&gt;&gt; df.loc[df.state=='State 2'].first('2H').value = np.nan\n&gt;&gt;&gt; df.ix[df.state=='State 2'].first('2H').value = np.nan\n&gt;&gt;&gt; df\n                       state     value\n2016-01-01 00:00:00  State 1  0.800798\n2016-01-01 01:00:00  State 1  0.130290\n2016-01-01 02:00:00  State 1  0.464372\n2016-01-01 03:00:00  State 2  0.925445\n2016-01-01 04:00:00  State 2  0.732331\n2016-01-01 05:00:00  State 2  0.811541\n</code></pre>\n\n<p>2) Second attempt results in an error:</p>\n\n<pre><code>&gt;&gt;&gt; df.loc[df.state=='State 2', 'value'].first('2H') = np.nan\n  File \"&lt;stdin&gt;\", line 1\nSyntaxError: can't assign to function call\n</code></pre>\n\n<p>3) This is a hackish attempt that worked, but is apparently discouraged:</p>\n\n<pre><code>&gt;&gt;&gt; temp = df.loc[df.state=='State 2']\n&gt;&gt;&gt; temp.first('2H').value = np.nan\n/home/user/anaconda3/lib/python3.5/site-packages/pandas/core/generic.py:2698: SettingWithCopyWarning: \nA value is trying to be set on a copy of a slice from a DataFrame.\nTry using .loc[row_indexer,col_indexer] = value instead\n\nSee the caveats in the documentation: http://pandas.pydata.org/pandas-docs/stable/indexing.html#indexing-view-versus-copy\n  self[name] = value\n&gt;&gt;&gt; df.loc[df.state=='State 2'] = temp\n&gt;&gt;&gt; df\n                       state     value\n2016-01-01 00:00:00  State 1  0.800798\n2016-01-01 01:00:00  State 1  0.130290\n2016-01-01 02:00:00  State 1  0.464372\n2016-01-01 03:00:00  State 2       NaN\n2016-01-01 04:00:00  State 2       NaN\n2016-01-01 05:00:00  State 2  0.811541\n</code></pre>\n\n<p>Ideally, I want to determine an easy way to loop over each group and clean the beginning and end of their respective data groups. I was under the impression that .first and .last would be great due to their simple time string formats.</p>\n\n<p>Using .loc doesn't take into account these time string formats, but I'm probably missing something.</p>\n\n<p>What's the true way of doing this in pandas?</p>\n"}, {"tags": ["python", "sqlalchemy"], "comments": [{"owner": {"reputation": 16460, "user_id": 341730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc4ac3bee5a31e114112c0222eef62e0?s=128&d=identicon&r=PG", "display_name": "univerio", "link": "https://stackoverflow.com/users/341730/univerio"}, "edited": false, "score": 0, "creation_date": 1466626462, "post_id": 37977117, "comment_id": 63400983, "body": "Can&#39;t you have three different functions, each attached to a different <code>set</code> event?"}, {"owner": {"reputation": 2432, "user_id": 1139131, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/8c9d5ca0838f355d80360c341122d04b?s=128&d=identicon&r=PG&f=1", "display_name": "Colton Allen", "link": "https://stackoverflow.com/users/1139131/colton-allen"}, "reply_to_user": {"reputation": 16460, "user_id": 341730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc4ac3bee5a31e114112c0222eef62e0?s=128&d=identicon&r=PG", "display_name": "univerio", "link": "https://stackoverflow.com/users/341730/univerio"}, "edited": false, "score": 0, "creation_date": 1466626900, "post_id": 37977117, "comment_id": 63401185, "body": "@univerio Unfortunately, it raises the same issue.  They will still recurse indefinitely as the events bounce between the three functions."}, {"owner": {"reputation": 16460, "user_id": 341730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc4ac3bee5a31e114112c0222eef62e0?s=128&d=identicon&r=PG", "display_name": "univerio", "link": "https://stackoverflow.com/users/341730/univerio"}, "edited": false, "score": 0, "creation_date": 1466627808, "post_id": 37977117, "comment_id": 63401638, "body": "Hm. Maybe set a flag on the instance and check the flag before you set anything?"}, {"owner": {"reputation": 2432, "user_id": 1139131, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/8c9d5ca0838f355d80360c341122d04b?s=128&d=identicon&r=PG&f=1", "display_name": "Colton Allen", "link": "https://stackoverflow.com/users/1139131/colton-allen"}, "reply_to_user": {"reputation": 16460, "user_id": 341730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc4ac3bee5a31e114112c0222eef62e0?s=128&d=identicon&r=PG", "display_name": "univerio", "link": "https://stackoverflow.com/users/341730/univerio"}, "edited": false, "score": 0, "creation_date": 1466628328, "post_id": 37977117, "comment_id": 63401879, "body": "@univerio Ayyyyy that did the trick.  Thanks bud!"}], "owner": {"reputation": 2432, "user_id": 1139131, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/8c9d5ca0838f355d80360c341122d04b?s=128&d=identicon&r=PG&f=1", "display_name": "Colton Allen", "link": "https://stackoverflow.com/users/1139131/colton-allen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1466625681, "creation_date": 1466625264, "last_edit_date": 1466625681, "question_id": 37977117, "link": "https://stackoverflow.com/questions/37977117/nullify-an-attribute-when-another-attribute-has-been-nullified", "title": "Nullify an attribute when another attribute has been nullified", "body": "<p>I have a model with three foreign keys that point to the same table.  When one of the foreign keys is set to <code>NULL</code>, I also want to nullify the other two foreign keys.</p>\n\n<pre><code>primary_id = Column(Integer, ForeignKey(table.id))\nsecondary_id = Column(Integer, ForeignKey(table.id))\ntertiary_id = Column(Integer, ForeignKey(table.id))\n</code></pre>\n\n<p>My initial thought was to setup an event listening for <code>set</code> but that will recurse indefinitely.</p>\n\n<pre><code>@event.listens_for(Model.primary_id, 'set')\n@event.listens_for(Model.secondary_id, 'set')\n@event.listens_for(Model.tertiary_id, 'set')\ndef example(target, value, old, initiator):\n    target.primary_id = None\n    target.secondary_id = None\n    target.tertiary_id = None\n</code></pre>\n\n<p>Is there some way for me to stop the events propagation if I know the source is the <code>example</code> function provided above?</p>\n"}, {"tags": ["c#", "python", "visual-studio"], "comments": [{"owner": {"reputation": 2382, "user_id": 3596337, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/342bc87e52c3a697732300f833e50036?s=128&d=identicon&r=PG&f=1", "display_name": "keiv.fly", "link": "https://stackoverflow.com/users/3596337/keiv-fly"}, "edited": false, "score": 0, "creation_date": 1466625391, "post_id": 37977071, "comment_id": 63400403, "body": "Possible variants: 1. IronPython is a .NET implementation. As I understand you can write a python code in IronPython and then just include the source in C# (not 100% sure).  2. Execute a python code as a command line. 3. Python creates a web site with REST API."}], "owner": {"reputation": 114, "user_id": 5879734, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/enWm9.jpg?s=128&g=1", "display_name": "Coder404", "link": "https://stackoverflow.com/users/5879734/coder404"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 403, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1466625109, "creation_date": 1466625109, "question_id": 37977071, "link": "https://stackoverflow.com/questions/37977071/how-to-run-python-functions-within-a-c-windows-form-application", "title": "How to run Python functions within a C# Windows Form Application", "body": "<p>I'm trying to create a windows form application using C# but run existing python code within it. I currently have my entire program working in python code, but would like to use the functions I created in Python within my C# Windows Form Application. For example (keeping this very basic) let's say I have a label on my form called \"label\". Then I have a variable, x per say that's equal to 5. And a python functions that returns the string \"True\" if the passed in value is 5. Ideally I'd like to be able to say:</p>\n\n<p>label.Text = PYTHONFUNCTION(x);</p>\n\n<p>which would then run the python function and since x is 5 return the string \"True\" to the C# code and display it on the label. Is this at all possible, and if so how? Thanks in advance for the help!</p>\n"}, {"tags": ["python", "c++", "python-2.7", "qt", "pyqt"], "comments": [{"owner": {"reputation": 28245, "user_id": 1547004, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5255289d0269d550a4e80e6bf6b0f590?s=128&d=identicon&r=PG", "display_name": "Brendan Abel", "link": "https://stackoverflow.com/users/1547004/brendan-abel"}, "edited": false, "score": 1, "creation_date": 1466625750, "post_id": 37977040, "comment_id": 63400611, "body": "If your codebase is in python, why would you write your GUI code in C++?  Why not just write the GUI in python (ie. pyqt) as well?"}, {"owner": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "edited": false, "score": 0, "creation_date": 1466632408, "post_id": 37977040, "comment_id": 63403711, "body": "If you want to make your Qt C++ extensions accessible to python, wrap them using <a href=\"http://pyqt.sourceforge.net/Docs/sip4/\" rel=\"nofollow noreferrer\">sip</a> (i.e. the same tool that is used by pyqt)."}, {"owner": {"reputation": 953, "user_id": 1095896, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f70f2db9cc735bfc663e9b0794125e2e?s=128&d=identicon&r=PG", "display_name": "james", "link": "https://stackoverflow.com/users/1095896/james"}, "reply_to_user": {"reputation": 28245, "user_id": 1547004, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5255289d0269d550a4e80e6bf6b0f590?s=128&d=identicon&r=PG", "display_name": "Brendan Abel", "link": "https://stackoverflow.com/users/1547004/brendan-abel"}, "edited": false, "score": 0, "creation_date": 1466633646, "post_id": 37977040, "comment_id": 63404111, "body": "@BrendanAbel, because it is possible that some of the components of the GUI app will be written in C++, esp. some 3rd party Qt controls, for instance."}, {"owner": {"reputation": 953, "user_id": 1095896, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f70f2db9cc735bfc663e9b0794125e2e?s=128&d=identicon&r=PG", "display_name": "james", "link": "https://stackoverflow.com/users/1095896/james"}, "reply_to_user": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "edited": false, "score": 0, "creation_date": 1466633831, "post_id": 37977040, "comment_id": 63404184, "body": "@ekhumoro, that&#39;s good to know. At least there is a way to do this, but ideally we would prefer a solution without this hassle. PyQt is the best solution I found so far, but it is possible that there are some better options that I am not aware of."}], "owner": {"reputation": 953, "user_id": 1095896, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f70f2db9cc735bfc663e9b0794125e2e?s=128&d=identicon&r=PG", "display_name": "james", "link": "https://stackoverflow.com/users/1095896/james"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 161, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1466625005, "creation_date": 1466625005, "question_id": 37977040, "link": "https://stackoverflow.com/questions/37977040/qt-application-interact-with-python-2-7", "title": "Qt application interact with python 2.7", "body": "<p>We have a large library and utility tools written in Python 2.7. And we need to create a GUI application that uses these python library and tools. So I'm looking for a solution that can easily interact between the GUI app and our python code base.\nRequirements:</p>\n\n<ol>\n<li>cross-platform: Linux, Windows; </li>\n<li>these programming languages are preferred: C++, C#, Python.\nPerformance is not very essential. The key is to quickly develop the\nGUI application;</li>\n</ol>\n\n<p>I know that PyQt can be a good choice but what concerned me is - if we are to develop the GUI in Qt C++, interact with Python may not as easy as the other way round, i.e. python code can easily use Qt library because of PyQt but C++ code does not have something similar. When we have controls made in Qt C++, it would not be straightforward to use them in python.</p>\n\n<p>Any suggestions? Thanks.</p>\n"}, {"tags": ["python", "list"], "comments": [{"owner": {"reputation": 13248, "user_id": 3375713, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/fUsUA.png?s=128&g=1", "display_name": "S\u043d\u0430\u0111\u043e\u0448\u0192\u0430\u04fd", "link": "https://stackoverflow.com/users/3375713/s%d0%bd%d0%b0%c4%91%d0%be%d1%88%c6%92%d0%b0%d3%bd"}, "edited": false, "score": 2, "creation_date": 1466625436, "post_id": 37977023, "comment_id": 63400426, "body": "What code have you tried so far?"}, {"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 2, "creation_date": 1466625491, "post_id": 37977023, "comment_id": 63400461, "body": "I don&#39;t see &quot;1&quot; in the third row of &quot;x&quot;."}, {"owner": {"reputation": 1262, "user_id": 4343502, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f5e19333dfe0dc29e10d2b5e6afbd627?s=128&d=identicon&r=PG&f=1", "display_name": "touch my body", "link": "https://stackoverflow.com/users/4343502/touch-my-body"}, "edited": false, "score": 1, "creation_date": 1466626126, "post_id": 37977023, "comment_id": 63400791, "body": "This is a &quot;can you help me fix my homework solution&quot; site, not a &quot;can you do my homework for me&quot; site"}, {"owner": {"reputation": 45920, "user_id": 4996248, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IUaWZ.jpg?s=128&g=1", "display_name": "John Coleman", "link": "https://stackoverflow.com/users/4996248/john-coleman"}, "edited": false, "score": 0, "creation_date": 1466682241, "post_id": 37977023, "comment_id": 63424875, "body": "Perhaps you can begin by writing a function to delete specific rows and columns from the array. Something like <code>remove(y,i,j)</code> to be called like <code>y = remove(y,i,j)</code>. Once you have that written and debugged, figure out how to loop over <code>x</code>, calling <code>remove</code> with the right arguments when you encounter a 1 in the second column. Also, things really go better on Stack Overflow if you do show some code and ask for help, rather than simply stating your specifications."}], "answers": [{"tags": [], "owner": {"reputation": 45920, "user_id": 4996248, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IUaWZ.jpg?s=128&g=1", "display_name": "John Coleman", "link": "https://stackoverflow.com/users/4996248/john-coleman"}, "is_accepted": false, "score": 1, "last_activity_date": 1466859197, "creation_date": 1466859197, "answer_id": 38028727, "question_id": 37977023, "link": "https://stackoverflow.com/questions/37977023/how-can-i-delete-an-specific-row-and-column-in-a-list/38028727#38028727", "title": "How can I delete an specific row and column in a list?", "body": "<p>The function</p>\n\n<pre><code>def remove(a,i,j):\n    return [row[:j] + row[j+1:] for k,row in enumerate(a) if k != i]\n</code></pre>\n\n<p>answers your stated question (\"how can I delete a specific row and column from a list\"), though it is still obscure exactly which rows and columns you want to remove.</p>\n\n<p>In the case of your <code>y</code>, the two lines</p>\n\n<pre><code>&gt;&gt;&gt; y = remove(y,0,0)\n&gt;&gt;&gt; y = remove(y,1,1)\n</code></pre>\n\n<p>results in</p>\n\n<pre><code>&gt;&gt;&gt; y\n[[25, 45], [35, 17]]\n</code></pre>\n\n<p>You just need to figure out how to iterate through <code>x</code> and calculate the needed indices (<code>0</code> and <code>1</code> in this case).</p>\n"}], "owner": {"reputation": 47, "user_id": 6457348, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c323367e8eda4152773ada204696f3da?s=128&d=identicon&r=PG&f=1", "display_name": "SsRr", "link": "https://stackoverflow.com/users/6457348/ssrr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1466859197, "creation_date": 1466624946, "question_id": 37977023, "link": "https://stackoverflow.com/questions/37977023/how-can-i-delete-an-specific-row-and-column-in-a-list", "title": "How can I delete an specific row and column in a list?", "body": "<p>I need some tips. I have a square list \"y\" (\"y\" has a nxn size). This is an example:</p>\n\n<pre><code>y=[[20,30,35,40],\n   [10,25,55,45],\n   [15,39,19,59],\n   [25,35,24,17]]\n</code></pre>\n\n<p>I have another list \"x\"(\"x\" has a nx2 size).This is an example:</p>\n\n<pre><code>x=[[1,1]\n   [2,0]\n   [3,0]\n   [4,1]]\n</code></pre>\n\n<p>I want to find in the list \"x\"(for each row) if appears (in the second column of the list \"x\") the number \"1\". If the number \"1\" appears in the second column of the list \"x\", I want to delete the respective row and the respective column in the list \"y\". In the example above, in the list \"x\" the number \"1\" appears in the first row and the four row of the list \"x\". Then I need to delete the respective rows and columns in the list \"y\". </p>\n\n<p>When \"1\" appears in the first row in the list \"x\" (for the example above), this is the desired list \"y\"(I need delete the first row and delete the first column in the original list \"y\"):   </p>\n\n<pre><code>   y=[[25,55,45],\n       39,19,59],\n       35,24,17]]\n</code></pre>\n\n<p>Then, because \"1\" appears in the third row in the list \"x\"(for the example above), this is the desired list \"y\"( I need delete the third row and delete the third column in the original list \"y\"):</p>\n\n<pre><code>  y=[ [25,45]\n      [35,17] \n</code></pre>\n\n<p>Thanks a lot.</p>\n"}, {"tags": ["python", "arrays", "numpy"], "comments": [{"owner": {"reputation": 10409, "user_id": 483620, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/efc681121bec8b6c5f9b5bc0714396a0?s=128&d=identicon&r=PG", "display_name": "Benjamin", "link": "https://stackoverflow.com/users/483620/benjamin"}, "edited": false, "score": 2, "creation_date": 1466625083, "post_id": 37977013, "comment_id": 63400242, "body": "See <a href=\"http://docs.scipy.org/doc/numpy/reference/arrays.indexing.html\" rel=\"nofollow noreferrer\">docs.scipy.org/doc/numpy/reference/arrays.indexing.html</a>, and <code>numpy.r_[]</code>"}, {"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 0, "creation_date": 1466625200, "post_id": 37977013, "comment_id": 63400302, "body": "Well, one way would be to use range to simulate the colon operation and then just index into cols : <code>A[:,np.hstack((2,4,range(6,10+1),range(50,80+1)))]</code>."}, {"owner": {"reputation": 838, "user_id": 3901029, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/pyayF.jpg?s=128&g=1", "display_name": "Forever", "link": "https://stackoverflow.com/users/3901029/forever"}, "edited": false, "score": 0, "creation_date": 1466632012, "post_id": 37977013, "comment_id": 63403562, "body": "<code>@Divakar</code> I&#39;ve actually also tried this way, but I believed there must be some method simpler than it :)"}], "answers": [{"comments": [{"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 0, "creation_date": 1466626998, "post_id": 37977570, "comment_id": 63401232, "body": "Ah didn&#39;t know that colon could be used within <code>np.r_[]</code>, nice!"}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "reply_to_user": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 1, "creation_date": 1466632179, "post_id": 37977570, "comment_id": 63403621, "body": "There are more features in <code>r_</code> (and <code>c_</code>) than most of us need.  I&#39;ve never had to use the first argument string.  The <code>j</code> step is just a cute way of using <code>linspace</code> instead of <code>arange</code>.  If features are useful, great.  But if you don&#39;t understand them, don&#39;t worry."}, {"owner": {"reputation": 838, "user_id": 3901029, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/pyayF.jpg?s=128&g=1", "display_name": "Forever", "link": "https://stackoverflow.com/users/3901029/forever"}, "edited": false, "score": 0, "creation_date": 1466632222, "post_id": 37977570, "comment_id": 63403640, "body": "This is exactly the information I&#39;m looking for. I believe the link <code>Benjamin</code> provides is a good knowledge base. For now it seems overwhelming to me. I&#39;m still trying to understand <code>r_[]</code> and <code>c_[]</code>"}], "tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": true, "score": 2, "last_activity_date": 1466626907, "creation_date": 1466626907, "answer_id": 37977570, "question_id": 37977013, "link": "https://stackoverflow.com/questions/37977013/access-several-columns-in-an-array-in-python/37977570#37977570", "title": "Access several columns in an array in Python", "body": "<p>As <code>Benjamin</code> suggested, <code>np.r_</code> handles an expression like this nicely</p>\n\n<pre><code>In [1329]: np.r_[2,4,6:10,50:80]\nOut[1329]: \narray([ 2,  4,  6,  7,  8,  9, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60,\n       61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77,\n       78, 79])\n</code></pre>\n\n<p>which can be used as:</p>\n\n<pre><code>B = A[:, np.r_[2,4,6:10,50:80]]\n</code></pre>\n\n<p><code>r_</code> expands the slices into ranges and concatenates everything together, as in <code>Divakar's</code> comment.</p>\n"}], "owner": {"reputation": 838, "user_id": 3901029, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/pyayF.jpg?s=128&g=1", "display_name": "Forever", "link": "https://stackoverflow.com/users/3901029/forever"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 37977570, "answer_count": 1, "score": 2, "last_activity_date": 1466627109, "creation_date": 1466624926, "last_edit_date": 1466627109, "question_id": 37977013, "link": "https://stackoverflow.com/questions/37977013/access-several-columns-in-an-array-in-python", "title": "Access several columns in an array in Python", "body": "<p>I'm new to python and numpy. Suppose I have an array <code>A = np.random.rand(10,100)</code> , how do i access some of its columns easily?</p>\n\n<p>In <code>Matlab</code> I would write something like <code>B = A(:,[2,4,6:10,50:80])</code>. What is the equivalent of this line of code in Python?</p>\n\n<p>I've looked at the examples in <a href=\"http://scipy.github.io/old-wiki/pages/NumPy_for_Matlab_Users.html\" rel=\"nofollow\">http://scipy.github.io/old-wiki/pages/NumPy_for_Matlab_Users.html</a>  but none of them answer my question. </p>\n"}, {"tags": ["python", "json", "pandas", "dataframe"], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 6499943, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/42d358454d26fe3a861a22ed550a4309?s=128&d=identicon&r=PG&f=1", "display_name": "BallsyWalnuts", "link": "https://stackoverflow.com/users/6499943/ballsywalnuts"}, "edited": false, "score": 0, "creation_date": 1466625417, "post_id": 37977113, "comment_id": 63400416, "body": "Isn&#39;t that what the <code>concat</code> method does?"}, {"owner": {"reputation": 85, "user_id": 6499943, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/42d358454d26fe3a861a22ed550a4309?s=128&d=identicon&r=PG&f=1", "display_name": "BallsyWalnuts", "link": "https://stackoverflow.com/users/6499943/ballsywalnuts"}, "edited": false, "score": 0, "creation_date": 1466626046, "post_id": 37977113, "comment_id": 63400761, "body": "Doesn&#39;t change output"}, {"owner": {"reputation": 1016, "user_id": 3856624, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/b18b401d3a489632aa8eb16cb9eb04cf?s=128&d=identicon&r=PG&f=1", "display_name": "ivan7707", "link": "https://stackoverflow.com/users/3856624/ivan7707"}, "reply_to_user": {"reputation": 85, "user_id": 6499943, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/42d358454d26fe3a861a22ed550a4309?s=128&d=identicon&r=PG&f=1", "display_name": "BallsyWalnuts", "link": "https://stackoverflow.com/users/6499943/ballsywalnuts"}, "edited": false, "score": 0, "creation_date": 1466628930, "post_id": 37977113, "comment_id": 63402172, "body": "@GrantSteiner, aside from the above edit, try this df.to_json() without the file to see if you get the right output."}, {"owner": {"reputation": 85, "user_id": 6499943, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/42d358454d26fe3a861a22ed550a4309?s=128&d=identicon&r=PG&f=1", "display_name": "BallsyWalnuts", "link": "https://stackoverflow.com/users/6499943/ballsywalnuts"}, "edited": false, "score": 0, "creation_date": 1466630553, "post_id": 37977113, "comment_id": 63402915, "body": "Figured it out. It was an issue with other code in the program. Thank you for your help."}, {"owner": {"reputation": 1016, "user_id": 3856624, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/b18b401d3a489632aa8eb16cb9eb04cf?s=128&d=identicon&r=PG&f=1", "display_name": "ivan7707", "link": "https://stackoverflow.com/users/3856624/ivan7707"}, "reply_to_user": {"reputation": 85, "user_id": 6499943, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/42d358454d26fe3a861a22ed550a4309?s=128&d=identicon&r=PG&f=1", "display_name": "BallsyWalnuts", "link": "https://stackoverflow.com/users/6499943/ballsywalnuts"}, "edited": false, "score": 0, "creation_date": 1466639417, "post_id": 37977113, "comment_id": 63405743, "body": "@grant steiner glad I could help.  Marking this as the answer would be appreciated."}], "tags": [], "owner": {"reputation": 1016, "user_id": 3856624, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/b18b401d3a489632aa8eb16cb9eb04cf?s=128&d=identicon&r=PG&f=1", "display_name": "ivan7707", "link": "https://stackoverflow.com/users/3856624/ivan7707"}, "is_accepted": false, "score": 2, "last_activity_date": 1466628741, "last_edit_date": 1466628741, "creation_date": 1466625257, "answer_id": 37977113, "question_id": 37976996, "link": "https://stackoverflow.com/questions/37976996/saving-a-pandas-dataframe-to-a-json-string/37977113#37977113", "title": "Saving a Pandas DataFrame to a JSON string", "body": "<p>If your summary columns give you the data you expect, add the columns to the dataframe.  </p>\n\n<p>Try</p>\n\n<pre><code>df['std'] = pd.Series(df.std(axis=1), index=df.index)\n\ndf['mean'] = pd.Series(df.mean(axis=1), index=df.index)\n</code></pre>\n\n<p>Then export to JSON.  </p>\n\n<p>Edit:  ok, I see that you see it works with print df now sorry). </p>\n\n<p>I was unable to reproduce your results. this is what I have:</p>\n\n<pre><code>import pandas as pd\n\nd = {'2016-05-08': 1, '2016-05-09': float('nan'), '2016-05-05': float('nan'), '2016-05-06': float('nan'), '2016-05-07': float('nan'), '2016-05-11': float('nan'), 'address': '&lt;email address&gt;', '2016-05-12': float('nan'), '2016-05-10': float('nan')}\n\ndf = pd.DataFrame(d, index=[0])\n\nmean = pd.Series(df.mean(axis=1), index=df.index)\nstd = pd.Series(df.std(axis=1), index=df.index)\ndf = pd.concat([df, mean, std], axis=1)\n\ndf.to_json('correctoutput.txt')\n</code></pre>\n\n<p>Here is the json with the output:</p>\n\n<p><a href=\"http://www.jsoneditoronline.org/?id=c0b29191d89fba8b593e29009af4f382\" rel=\"nofollow\">http://www.jsoneditoronline.org/?id=c0b29191d89fba8b593e29009af4f382</a> </p>\n"}], "owner": {"reputation": 85, "user_id": 6499943, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/42d358454d26fe3a861a22ed550a4309?s=128&d=identicon&r=PG&f=1", "display_name": "BallsyWalnuts", "link": "https://stackoverflow.com/users/6499943/ballsywalnuts"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4433, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1466628741, "creation_date": 1466624869, "question_id": 37976996, "link": "https://stackoverflow.com/questions/37976996/saving-a-pandas-dataframe-to-a-json-string", "title": "Saving a Pandas DataFrame to a JSON string", "body": "<p>I realize that this may seem like a question that has already been asked here, but none of the solutions seem to work. I start out with a dictionary that looks something along the line of this:</p>\n\n<p><code>{'2016-05-08': 1, '2016-05-09': nan, '2016-05-05': nan, '2016-05-06': nan, '2016-05-07': nan, '2016-05-11': nan, 'address': '&lt;email address&gt;, '2016-05-12': nan, '2016-05-10': nan}</code></p>\n\n<p>I read this data into a pandas DataFrame, looking something like this:</p>\n\n<p><code>address    date1    date2    date3    date4    date5   date6    date7\n&lt;email&gt;      NaN      NaN      NaN       1       NaN     NaN      NaN</code></p>\n\n<p>I then use the following methods to calculate the mean and standard deviation and add them to the DataFrame:</p>\n\n<p><code>mean = pd.Series(df.mean(axis=1), index=df.index)\nstd = pd.Series(df.std(axis=1), index=df.index)\ndf = pd.concat([df, mean, std], axis=1)</code></p>\n\n<p>When I <code>print df</code>, it looks as it should. However, when I used this method to write the DataFrame to a JSON string, <code>df.to_json(&lt;path to file&gt;)</code>, it get the original dictionary in my JSON file. I want a JSON string of all the data with the standard deviation and mean included in the JSON data, how can I do this?</p>\n"}, {"tags": ["javascript", "python"], "comments": [{"owner": {"reputation": 69452, "user_id": 953482, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/T3HH6.png?s=128&g=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/953482/kevin"}, "edited": false, "score": 1, "creation_date": 1466626000, "post_id": 37976957, "comment_id": 63400735, "body": "Well Python doesn&#39;t exactly have variable declaration to begin with, so it&#39;s hard to make comparisons to javascript&#39;s <code>var</code> hoisting. I do know you can put a <code>global x</code> declaration after assigning something to x and it will still work, but that&#39;s sort of apples-and-oranges."}, {"owner": {"reputation": 3933, "user_id": 1821750, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NEYw6.png?s=128&g=1", "display_name": "Charles Addis", "link": "https://stackoverflow.com/users/1821750/charles-addis"}, "edited": false, "score": 0, "creation_date": 1466627019, "post_id": 37976957, "comment_id": 63401249, "body": "@jamesfranco -- it&#39;s never safe to assume. Why don&#39;t you fire up your python interpreter and find out?"}, {"owner": {"reputation": 6998, "user_id": 61938, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/vhWr1.jpg?s=128&g=1", "display_name": "Rob Grant", "link": "https://stackoverflow.com/users/61938/rob-grant"}, "reply_to_user": {"reputation": 69452, "user_id": 953482, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/T3HH6.png?s=128&g=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/953482/kevin"}, "edited": false, "score": 0, "creation_date": 1466627164, "post_id": 37976957, "comment_id": 63401320, "body": "@Kevin how&#39;s Python&#39;s declaration (or lack thereof) different to Javascript&#39;s, other than the <code>var</code> keyword?"}], "answers": [{"comments": [{"owner": {"reputation": 13971, "user_id": 554807, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/11449ff391eb9e813ac9f467ae6e0102?s=128&d=identicon&r=PG", "display_name": "GreenAsJade", "link": "https://stackoverflow.com/users/554807/greenasjade"}, "edited": false, "score": 0, "creation_date": 1469504235, "post_id": 37977312, "comment_id": 64550200, "body": "This also appears to apply at the top &quot;module&quot; level.  I am just now reading a class that references a variable (a singleton, as it happens) defined after it in the file (!)"}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "reply_to_user": {"reputation": 13971, "user_id": 554807, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/11449ff391eb9e813ac9f467ae6e0102?s=128&d=identicon&r=PG", "display_name": "GreenAsJade", "link": "https://stackoverflow.com/users/554807/greenasjade"}, "edited": false, "score": 2, "creation_date": 1552511832, "post_id": 37977312, "comment_id": 97042977, "body": "@GreenAsJade: That&#39;s only legal if the variable is referenced from within a function scope (because functions aren&#39;t actually executed at definition time, and look up their globals lazily when called). If it was referenced at global or class definition scope before it was defined, it would fail."}], "tags": [], "owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "is_accepted": true, "score": 14, "last_activity_date": 1466626045, "creation_date": 1466626045, "answer_id": 37977312, "question_id": 37976957, "link": "https://stackoverflow.com/questions/37976957/block-scoping-in-python-is-it-similar-to-javascript-hoisting-when-inside-a-fun/37977312#37977312", "title": "Block Scoping in python - is it similar to javascript hoisting when inside a function?", "body": "<p>You got it. Any name assigned inside a function that isn't explicitly declared with <code>global</code> (with Py3 adding <code>nonlocal</code> to indicate it's not in local scope, but to look in wrapping scopes rather than jumping straight to global scope) is a local variable from the beginning of the function (it has space reserved in an array of locals), but reading it prior to assignment raises <code>UnboundLocalError</code>.</p>\n"}], "owner": {"reputation": 3558, "user_id": 4589819, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d29fd6d2f29e22c18d200b5108b2ed99?s=128&d=identicon&r=PG&f=1", "display_name": "James Franco", "link": "https://stackoverflow.com/users/4589819/james-franco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8104, "favorite_count": 2, "accepted_answer_id": 37977312, "answer_count": 1, "score": 14, "last_activity_date": 1466626045, "creation_date": 1466624688, "last_edit_date": 1495542308, "question_id": 37976957, "link": "https://stackoverflow.com/questions/37976957/block-scoping-in-python-is-it-similar-to-javascript-hoisting-when-inside-a-fun", "title": "Block Scoping in python - is it similar to javascript hoisting when inside a function?", "body": "<p>I am currently trying to understand this piece of code in python</p>\n\n<pre><code>def foo(a):\n  if a==12:\n    var = \"Same\"\n  else:\n    var = \"different\"\n</code></pre>\n\n<p>I read and understand the fact that python does not support block based scoping. So everything created inside a function (whether inside a loop or conditional statements) is openly available to other members of a function.I also read the scoping rules <a href=\"https://stackoverflow.com/questions/291978/short-description-of-python-scoping-rules\">here</a> . At this point would it be same to assume that these inner scoped variables are hoisted inside a functions just like they are hoisted in javascript ?</p>\n"}, {"tags": ["python", "recursion", "induction"], "answers": [{"comments": [{"owner": {"reputation": 19107, "user_id": 216356, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/dc105cdd75395154274f9da3d7612a9f?s=128&d=identicon&r=PG", "display_name": "Noctis Skytower", "link": "https://stackoverflow.com/users/216356/noctis-skytower"}, "edited": false, "score": 0, "creation_date": 1466625633, "post_id": 37977171, "comment_id": 63400542, "body": "The last line in your function will return <code>None</code> since that is what <code>list.append</code> returns."}], "tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 0, "last_activity_date": 1466630914, "last_edit_date": 1466630914, "creation_date": 1466625516, "answer_id": 37977171, "question_id": 37976952, "link": "https://stackoverflow.com/questions/37976952/improve-recursive-algorithm-for-finite-products-of-primes/37977171#37977171", "title": "Improve recursive algorithm for finite products of primes", "body": "<p>To remove the list, simply make it an in-line construction:</p>\n\n<pre><code>def products(n):\n    if n == 2 or fermat(n):\n        return [n]\n    else:\n        num = first_prime_divisor(n, 2)\n        return products(n//num) + [num]\n</code></pre>\n\n<p>From here, the main problem is the inefficiency of your recursion; you're blowing your stack space by making K-1 calls to find a prime divisor K.\nInstead, run your checks from <strong>n</strong> (the most recently found prime) through sqrt(num); the remaining number after that point is the final prime.</p>\n\n<p>Most of all, however, you'll need to break your dependence on recursion to do your iteration through the divisors.  Your system stack isn't likely to be set up to handle on the order of a million recursive calls, which is what you still have in crawling your way to find a prime around 10^12.</p>\n"}], "owner": {"reputation": 59, "user_id": 4777280, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh4.googleusercontent.com/-3Ln-mKzY6YY/AAAAAAAAAAI/AAAAAAAAVr0/rzc7K7pho_A/photo.jpg?sz=128", "display_name": "Eduardo Hashimoto", "link": "https://stackoverflow.com/users/4777280/eduardo-hashimoto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 82, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1466630914, "creation_date": 1466624668, "question_id": 37976952, "link": "https://stackoverflow.com/questions/37976952/improve-recursive-algorithm-for-finite-products-of-primes", "title": "Improve recursive algorithm for finite products of primes", "body": "<p>From the book How to Read and Do Proofs by Daniel Solow, I took the following problem:</p>\n\n<blockquote>\n  <p>Any integer n >= 2 can be expressed as a finite product of primes.</p>\n</blockquote>\n\n<p>After looking at the proof by induction in the book, I tried then to implement an algorithm to verify it:</p>\n\n<pre><code> from fermat import fermat\n\ndef first_prime_divisor(n, j):\n    if not fermat(j):\n        return first_prime_divisor(n, j+1)\n    else:\n        if n%j:\n            return first_prime_divisor(n, j+1)\n        else:\n            return j\n\ndef products(n, lista):\n\n\n    if n == 2:\n        lista.append(2)\n    elif fermat(n):\n        lista.append(n)\n    else:\n        num = first_prime_divisor(n, 2)\n        lista.append(num)\n        products(n//num, lista)\n</code></pre>\n\n<p>Where fermat is a known primality test. The code works fine and changes the state of the inputed list accordingly.\nThere are two problems though:</p>\n\n<p>1) I'd like not to have a list variable and instead the function itself returning it to me</p>\n\n<p>2) The code doesn't work for large number (not so large, e.g, 1531351254251) because it run out of memory first.</p>\n\n<p>Could you give suggestions for fixing it?</p>\n\n<p>PS: I'm trying to improve my way of reasoning about recursion, so I've solved the problem using it.</p>\n"}, {"tags": ["python", "list", "pandas", "dataframe", "contains"], "comments": [{"owner": {"reputation": 675, "user_id": 1993875, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d1df46af4919ae14144600d76de96de8?s=128&d=identicon&r=PG", "display_name": "Christopher Jenkins", "link": "https://stackoverflow.com/users/1993875/christopher-jenkins"}, "edited": false, "score": 0, "creation_date": 1466624225, "post_id": 37976823, "comment_id": 63399809, "body": "It&#39;s important that the list is the conditional check."}], "answers": [{"comments": [{"owner": {"reputation": 675, "user_id": 1993875, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d1df46af4919ae14144600d76de96de8?s=128&d=identicon&r=PG", "display_name": "Christopher Jenkins", "link": "https://stackoverflow.com/users/1993875/christopher-jenkins"}, "edited": false, "score": 0, "creation_date": 1466624536, "post_id": 37976890, "comment_id": 63399980, "body": "I&#39;ve simplified my dataframe for this example. I&#39;m not actually checking for odd or even numbers. I need to check an existing series&#39; elements against a list."}], "tags": [], "owner": {"reputation": 619481, "user_id": 2901002, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/hMDvl.jpg?s=128&g=1", "display_name": "jezrael", "link": "https://stackoverflow.com/users/2901002/jezrael"}, "is_accepted": true, "score": 4, "last_activity_date": 1466624836, "last_edit_date": 1466624836, "creation_date": 1466624455, "answer_id": 37976890, "question_id": 37976823, "link": "https://stackoverflow.com/questions/37976823/how-to-conditionally-update-dataframe-column-in-pandas-based-on-list/37976890#37976890", "title": "How to conditionally update DataFrame column in Pandas based on list", "body": "<p>I think you can use <a href=\"http://docs.scipy.org/doc/numpy-1.10.1/reference/generated/numpy.where.html\" rel=\"nofollow\"><code>numpy.where</code></a>:</p>\n\n<pre><code>import pandas as pd\nimport numpy as np\n\ndf = pd.DataFrame(np.random.randint(0,9,size=(100, 1)), columns=['number'])\n\ndf['odd_or_even'] = np.where(df.number % 2, 'odd', 'even')\nprint (df)\n\n    number odd_or_even\n0        1         odd\n1        0        even\n2        4        even\n3        5         odd\n4        0        even\n5        0        even\n6        1         odd\n7        0        even\n8        7         odd\n9        8        even\n</code></pre>\n\n<p>EDIT by comment </p>\n\n<p>Use <a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.loc.html\" rel=\"nofollow\"><code>loc</code></a>:</p>\n\n<pre><code>import pandas as pd\nimport numpy as np\n\ndf = pd.DataFrame(np.random.randint(0,9,size=(20, 1)), columns=['number'])\n\nodd_numbers = [1,3,5,7,9]\neven_numbers = [0,2,4,6,8]\n\ndf.loc[df.number.isin(odd_numbers), 'odd_or_even'] = 'odd'\ndf.loc[df.number.isin(even_numbers), 'odd_or_even'] = 'even'\n\nprint (df)\n    number odd_or_even\n0        5         odd\n1        1         odd\n2        2        even\n3        3         odd\n4        5         odd\n5        6        even\n6        3         odd\n7        4        even\n8        2        even\n9        8        even\n10       8        even\n11       1         odd\n12       2        even\n13       1         odd\n14       3         odd\n15       3         odd\n16       5         odd\n17       4        even\n18       2        even\n19       5         odd\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 56440, "user_id": 2285236, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5ac8c2e0f71dbd8cf4543039bebf2ab3?s=128&d=identicon&r=PG&f=1", "display_name": "ayhan", "link": "https://stackoverflow.com/users/2285236/ayhan"}, "is_accepted": false, "score": 1, "last_activity_date": 1466625305, "creation_date": 1466625305, "answer_id": 37977132, "question_id": 37976823, "link": "https://stackoverflow.com/questions/37976823/how-to-conditionally-update-dataframe-column-in-pandas-based-on-list/37977132#37977132", "title": "How to conditionally update DataFrame column in Pandas based on list", "body": "<p>A <a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.map.html\" rel=\"nofollow\">map</a> version:</p>\n\n<p>First, create a dictionary:</p>\n\n<pre><code>d = {**{o: \"odd\" for o in odd_numbers}, **{e: \"even\" for e in even_numbers}}\n</code></pre>\n\n<p>Then use map on the series:</p>\n\n<pre><code>df['odd_or_even'] = df['number'].map(d)\n</code></pre>\n"}], "owner": {"reputation": 675, "user_id": 1993875, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d1df46af4919ae14144600d76de96de8?s=128&d=identicon&r=PG", "display_name": "Christopher Jenkins", "link": "https://stackoverflow.com/users/1993875/christopher-jenkins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3082, "favorite_count": 1, "accepted_answer_id": 37976890, "answer_count": 2, "score": 4, "last_activity_date": 1466625305, "creation_date": 1466624172, "last_edit_date": 1466625072, "question_id": 37976823, "link": "https://stackoverflow.com/questions/37976823/how-to-conditionally-update-dataframe-column-in-pandas-based-on-list", "title": "How to conditionally update DataFrame column in Pandas based on list", "body": "<p>Supposed I have a dataframe with one column:</p>\n\n<pre><code>df = pd.DataFrame(np.random.randint(0,9,size=(100, 1)), columns=['number'])\n</code></pre>\n\n<p>I have two lists, one list containing even numbers, the other containing odd numbers.</p>\n\n<pre><code>odd_numbers = [1,3,5,7,9]\neven_numbers = [0,2,4,6,8]\n</code></pre>\n\n<p>I'd like to create another series on the dataframe that says 'even' or 'odd' depending on the value within df['number']</p>\n\n<p>Something like:</p>\n\n<pre><code>df['odd_or_even'] = 'even' if df[number].isin(even_numbers)\ndf['odd_or_even'] = 'odd' if df[number].isin(odd_numbers)\n</code></pre>\n"}, {"tags": ["python", "numpy", "machine-learning", "svm", "mfcc"], "comments": [{"owner": {"reputation": 56500, "user_id": 2658050, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yPuAp.jpg?s=128&g=1", "display_name": "lejlot", "link": "https://stackoverflow.com/users/2658050/lejlot"}, "edited": false, "score": 1, "creation_date": 1466631583, "post_id": 37976754, "comment_id": 63403372, "body": "first of all, you will not be ever able to use (obtain anything reasonable with) SVM with <b>a single observation per class</b>"}, {"owner": {"reputation": 161, "user_id": 4271555, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ffb059cf75800f268936eec4133a25d?s=128&d=identicon&r=PG", "display_name": "kalleknast", "link": "https://stackoverflow.com/users/4271555/kalleknast"}, "edited": false, "score": 0, "creation_date": 1488299517, "post_id": 37976754, "comment_id": 72165348, "body": "The sklearn method <code>clf.fit()</code> takes an array with <code>shape == (num_samples, num_features)</code> as input (i.e. a 2D array)."}, {"owner": {"reputation": 161, "user_id": 4271555, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ffb059cf75800f268936eec4133a25d?s=128&d=identicon&r=PG", "display_name": "kalleknast", "link": "https://stackoverflow.com/users/4271555/kalleknast"}, "reply_to_user": {"reputation": 56500, "user_id": 2658050, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yPuAp.jpg?s=128&g=1", "display_name": "lejlot", "link": "https://stackoverflow.com/users/2658050/lejlot"}, "edited": false, "score": 0, "creation_date": 1488300832, "post_id": 37976754, "comment_id": 72166184, "body": "The sklearn method <code>clf.fit()</code> takes an array with <code>shape == (num_samples, num_features)</code> as input (i.e. a 2-D array). To get this you will need to flatten and stack your feature arrays (i.e. <code>mfccsorry</code> &amp; <code>mfcctestwav</code>), e.g. like this: <code>arr = np.r_[mfccsorry, mfcctestwav]</code>. <code>Targ</code> needs to be an numerical array where the labels are coded by numbers (e.g. <code>Targ = np.array([0., 1.])</code>, &quot;sad&quot; -&gt; 0 &amp; &quot;hope&quot; -&gt; 1). Also, <code>arr = [mfccsorry,mfccsad]</code> shouldn&#39;t yield an array, but a list of arrays. Finally, as @lejlot pointed out, there is not learning to be done from 1 observation per class."}], "owner": {"reputation": 194, "user_id": 1322603, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/afcdbb9287ecbe7c0b104d5ceee9f9f2?s=128&d=identicon&r=PG", "display_name": "Ugur", "link": "https://stackoverflow.com/users/1322603/ugur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 831, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1466626508, "creation_date": 1466623907, "last_edit_date": 1466626508, "question_id": 37976754, "link": "https://stackoverflow.com/questions/37976754/python-with-mfcc-features-to-train-svm-using-numpy", "title": "Python with MFCC Features to train SVM using Numpy", "body": "<p>I'm having problems particularly with numpy.\nFor testing purposes, I'm trying to train MFCC's of two wav files. Both of the array sizes are the same.</p>\n\n<p>When I'm trying to fit the data into classifier I'm having</p>\n\n<pre><code>ValueError: Found array with dim 3. Estimator expected &lt;= 2.\n</code></pre>\n\n<p>Let me be more precise since I'm struggling with this numpy shape problem with myself for long time and couldn't find a solution.</p>\n\n<pre><code>&gt;mfccsorry = sf.getFeatures(dir+\"sorry.mp3.wav\")\n&gt;mfccsorry.shape\n(622, 13)\n&gt;mfccsorry = sf.getFeatures(dir+\"sorry.mp3.wav\")\n(622, 13)\n&gt;mfcctestwav = sf.getFeatures(dir+\"test.mp3.wav\")\n(622, 13)\n&gt;arr = [mfccsorry,mfccsad]\n&gt;targ = [\"sad\",\"hope\"]\n</code></pre>\n\n<p>At this point, I'm trying to label the feature vector one with \"sad\" and the second with \"hope\" and hoping to predict the label of mfcctestwav.</p>\n\n<pre><code>clf.fit(arr, targ)\n</code></pre>\n\n<p>Returns the error.</p>\n\n<p>I've tried to ravel the arrays and that resulted with 0.5,0.5 prediction rate, which was not a surprise since I've merged all the feature vectors into one.\nI believe I'm having a problem regarding to Numpy's or ,in general, SVM matrix formations.</p>\n\n<p>I've checked the documentation from\n<a href=\"http://python-speech-features.readthedocs.io/en/latest/\" rel=\"nofollow\">http://python-speech-features.readthedocs.io/en/latest/</a>\n<a href=\"https://docs.scipy.org/doc/numpy-dev/user/quickstart.html\" rel=\"nofollow\">https://docs.scipy.org/doc/numpy-dev/user/quickstart.html</a></p>\n\n<p>But still couldn't find the problem myself.\nThanks for all sorts of suggestions and explanations.</p>\n\n<p>EDIT:\nI know that the line</p>\n\n<pre><code>&gt;arr = [mfccsorry,mfccsad]\n</code></pre>\n\n<p>creates an 3D array with shape (2, 622, 13) which ultimately causes the error. Should I reshape it to 2D array, if so what should be the correct form and what might be the logic behind it.</p>\n"}, {"tags": ["python", "list", "file", "python-3.x", "readfile"], "comments": [{"owner": {"reputation": 379, "user_id": 4132269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5542036e8c6fded6db717160c6cd7ff?s=128&d=identicon&r=PG&f=1", "display_name": "Akarsh", "link": "https://stackoverflow.com/users/4132269/akarsh"}, "edited": false, "score": 0, "creation_date": 1466623958, "post_id": 37976716, "comment_id": 63399687, "body": "Is the value same for all rows ? I see the file you have now has just 1 value. <code>value, timestampvalue,timestampvalue,timestampvalue.....</code>"}, {"owner": {"reputation": 137, "user_id": 4244966, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001611724424/picture?type=large", "display_name": "Max Kraus", "link": "https://stackoverflow.com/users/4244966/max-kraus"}, "reply_to_user": {"reputation": 379, "user_id": 4132269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5542036e8c6fded6db717160c6cd7ff?s=128&d=identicon&r=PG&f=1", "display_name": "Akarsh", "link": "https://stackoverflow.com/users/4132269/akarsh"}, "edited": false, "score": 0, "creation_date": 1466624086, "post_id": 37976716, "comment_id": 63399744, "body": "No, there are different values from -1.0000000 to 1.0000000. So float values between one and minus one"}, {"owner": {"reputation": 379, "user_id": 4132269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5542036e8c6fded6db717160c6cd7ff?s=128&d=identicon&r=PG&f=1", "display_name": "Akarsh", "link": "https://stackoverflow.com/users/4132269/akarsh"}, "edited": false, "score": 0, "creation_date": 1466624162, "post_id": 37976716, "comment_id": 63399775, "body": "In that case, it looks like you lost the data, not just the format. If that&#39;s the case, we cannot get the data. Can you share a sample of what you have now ?"}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1466624233, "post_id": 37976716, "comment_id": 63399812, "body": "So basically you have a single line?"}, {"owner": {"reputation": 137, "user_id": 4244966, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001611724424/picture?type=large", "display_name": "Max Kraus", "link": "https://stackoverflow.com/users/4244966/max-kraus"}, "reply_to_user": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1466624290, "post_id": 37976716, "comment_id": 63399837, "body": "@PadraicCunningham yes"}, {"owner": {"reputation": 137, "user_id": 4244966, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001611724424/picture?type=large", "display_name": "Max Kraus", "link": "https://stackoverflow.com/users/4244966/max-kraus"}, "reply_to_user": {"reputation": 379, "user_id": 4132269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5542036e8c6fded6db717160c6cd7ff?s=128&d=identicon&r=PG&f=1", "display_name": "Akarsh", "link": "https://stackoverflow.com/users/4132269/akarsh"}, "edited": false, "score": 0, "creation_date": 1466624327, "post_id": 37976716, "comment_id": 63399864, "body": "@imakarsh it&#39;s like this: -0.1351197,1466615025472-0.25672746,1466615025501-0.3661744,&zwnj;&#8203;1466615025531-0.4646&zwnj;&#8203;7665,1466615025561-0&zwnj;&#8203;.5533287,14666150255&zwnj;&#8203;91-0.63311553,146661&zwnj;&#8203;5025621-0.7049236,14&zwnj;&#8203;66615025652-0.769550&zwnj;&#8203;9,1466615025681-1.71&zwnj;&#8203;58673,1466615025711-&zwnj;&#8203;1.6896278,1466615025&zwnj;&#8203;741-1.65375,14666150&zwnj;&#8203;25772-1.6092329,1466&zwnj;&#8203;615025801"}, {"owner": {"reputation": 137, "user_id": 4244966, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001611724424/picture?type=large", "display_name": "Max Kraus", "link": "https://stackoverflow.com/users/4244966/max-kraus"}, "edited": false, "score": 0, "creation_date": 1466624370, "post_id": 37976716, "comment_id": 63399881, "body": "is there no way to split every 13 character after comma?"}, {"owner": {"reputation": 169523, "user_id": 4983450, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/NR2ko.jpg?s=128&g=1", "display_name": "Psidom", "link": "https://stackoverflow.com/users/4983450/psidom"}, "edited": false, "score": 0, "creation_date": 1466624451, "post_id": 37976716, "comment_id": 63399926, "body": "You reassigned the parsed values to the direction variable which corrupts your result."}], "answers": [{"tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": true, "score": 0, "last_activity_date": 1466624474, "creation_date": 1466624474, "answer_id": 37976895, "question_id": 37976716, "link": "https://stackoverflow.com/questions/37976716/python-read-txt-file-list/37976895#37976895", "title": "Python read .txt File -&gt; list", "body": "<p>I coded a quickie using your example, and not using 13 but len(\"timestamp\") so you can adapt</p>\n\n<pre><code>instr = \"value,timestampvalue2,timestampvalue3,timestampvalue4,timestamp\"\n\nprevious_i = 0\nfor i,c in enumerate(instr):\n    if c==\",\":\n        next_i = i+len(\"timestamp\")+1\n        print(instr[previous_i:next_i])\n        previous_i = next_i\n</code></pre>\n\n<p>output is descrambled:</p>\n\n<pre><code>value,timestamp\nvalue2,timestamp\nvalue3,timestamp\nvalue4,timestamp\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "is_accepted": false, "score": 1, "last_activity_date": 1466625337, "last_edit_date": 1466625337, "creation_date": 1466624486, "answer_id": 37976898, "question_id": 37976716, "link": "https://stackoverflow.com/questions/37976716/python-read-txt-file-list/37976898#37976898", "title": "Python read .txt File -&gt; list", "body": "<p>You will have to strip the last , but you can insert a comma after every 13 chars following a comma:</p>\n\n<pre><code>import re\ns = \"-0.1351197,1466615025472-0.25672746,1466615025501-0.3661744,1466615025531-0.4646\u200c\u200b7665,1466615025561-0.5533287,1466615025591-0.63311553,1466615025621-0.7049236,146\u200c\u200b6615025652-0.7695509,1466615025681-1.7158673,1466615025711-1.6896278,146661502574\u200c\u200b1-1.65375,1466615025772-1.6092329,1466615025801\"\n\nprint(re.sub(\"(?&lt;=,)(.{13})\",r\"\\1\"+\",\", s))\n</code></pre>\n\n<p>Which will give you:</p>\n\n<pre><code>-0.1351197,1466615025472,-0.25672746,1466615025501,-0.3661744,1466615025531,-0.4646\u200c\u200b7665,1466615025561,-0.5533287,1466615025591,-0.63311553,1466615025621,-0.7049236,146\u200c\u200b6615025652-0.7695509,1466615025681,-1.7158673,1466615025711,-1.6896278,146661502574\u200c\u200b1-1.65375,1466615025772,-1.6092329,1466615025801, \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1207, "user_id": 925671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jdyXP.png?s=128&g=1", "display_name": "Bill", "link": "https://stackoverflow.com/users/925671/bill"}, "is_accepted": false, "score": 1, "last_activity_date": 1466625096, "creation_date": 1466625096, "answer_id": 37977069, "question_id": 37976716, "link": "https://stackoverflow.com/questions/37976716/python-read-txt-file-list/37977069#37977069", "title": "Python read .txt File -&gt; list", "body": "<pre><code>import re\ninput = \"value0,0123456789012value1,0123456789012value2,0123456789012value3\"\n\nfor (line, value, timestamp) in re.findall(\"(([^,]+),(.{13}))\", input):\n    print value, timestamp\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 55, "user_id": 6495896, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5008818b78243ef0ddeb871b46362155?s=128&d=identicon&r=PG&f=1", "display_name": "Lance", "link": "https://stackoverflow.com/users/6495896/lance"}, "is_accepted": false, "score": 0, "last_activity_date": 1466625828, "creation_date": 1466625828, "answer_id": 37977258, "question_id": 37976716, "link": "https://stackoverflow.com/questions/37976716/python-read-txt-file-list/37977258#37977258", "title": "Python read .txt File -&gt; list", "body": "<p>I think you could do something like this:</p>\n\n<pre><code>direction = []\nfor line in open(filename):\n    list = line.split(',')\n    v = list[0]\n    for s in list[1:]:\n        t = s[:13]\n        direction.append([float(v), long(t)])\n        v = s[13:]\n</code></pre>\n\n<p>If you're using python 3.X, then the long function no longer exists -- use int.</p>\n"}], "owner": {"reputation": 137, "user_id": 4244966, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001611724424/picture?type=large", "display_name": "Max Kraus", "link": "https://stackoverflow.com/users/4244966/max-kraus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 249, "favorite_count": 0, "accepted_answer_id": 37976895, "answer_count": 4, "score": 1, "last_activity_date": 1466625828, "creation_date": 1466623749, "last_edit_date": 1466624245, "question_id": 37976716, "link": "https://stackoverflow.com/questions/37976716/python-read-txt-file-list", "title": "Python read .txt File -&gt; list", "body": "<p>I have a .txt File and I want to get the values in a list.\nThe format of the txt file should be:</p>\n\n<pre><code>value0,timestamp0\nvalue1,timestamp1\n...\n...\n...\n</code></pre>\n\n<p>In the end I want to get a list with </p>\n\n<pre><code>[[value0,timestamp0],[value1,timestamp1],.....]\n</code></pre>\n\n<p>I know it's easy to get these values by</p>\n\n<pre><code>direction = []\nfor line in open(filename):\n    direction,t = line.strip().split(',')\n    direction = float(direction)\n    t = long(t)\n    direction.append([direction,t])\nreturn  direction\n</code></pre>\n\n<p>But I have a big problem: When creating the data I forgot to insert a \"\\n\" in each row.</p>\n\n<p>Thats why I have this format:</p>\n\n<pre><code>value0, timestamp0value1,timestamp1value2,timestamp2value3.....\n</code></pre>\n\n<p>Every timestamp has exactly 13 characters.</p>\n\n<p>Is there a way to get these data in a list as I want it? Would be very much work get the data again.</p>\n\n<p>Thanks\nMax</p>\n"}, {"tags": ["python", "pandas", "dataframe", "pivot-table", "dynamic-columns"], "answers": [{"comments": [{"owner": {"reputation": 264, "user_id": 6453877, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f2d77f47f35b191db9f1a542b5ef3bee?s=128&d=identicon&r=PG&f=1", "display_name": "user6453877", "link": "https://stackoverflow.com/users/6453877/user6453877"}, "edited": false, "score": 0, "creation_date": 1466681081, "post_id": 37976689, "comment_id": 63424114, "body": "Thank you Jezrael! Your solution worked perfect. On 33M rows, with an average of 2 items per receipt it ran on 20 min using 58 GB RAM. Some receipts had up to 30 items. I dropped all numbered columns &gt;8."}, {"owner": {"reputation": 619481, "user_id": 2901002, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/hMDvl.jpg?s=128&g=1", "display_name": "jezrael", "link": "https://stackoverflow.com/users/2901002/jezrael"}, "reply_to_user": {"reputation": 264, "user_id": 6453877, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f2d77f47f35b191db9f1a542b5ef3bee?s=128&d=identicon&r=PG&f=1", "display_name": "user6453877", "link": "https://stackoverflow.com/users/6453877/user6453877"}, "edited": false, "score": 0, "creation_date": 1466681113, "post_id": 37976689, "comment_id": 63424129, "body": "Glad can help you! Nice day!"}], "tags": [], "owner": {"reputation": 619481, "user_id": 2901002, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/hMDvl.jpg?s=128&g=1", "display_name": "jezrael", "link": "https://stackoverflow.com/users/2901002/jezrael"}, "is_accepted": true, "score": 1, "last_activity_date": 1466623971, "last_edit_date": 1466623971, "creation_date": 1466623657, "answer_id": 37976689, "question_id": 37976592, "link": "https://stackoverflow.com/questions/37976592/pandas-pivot-table-incremental-column-names/37976689#37976689", "title": "Pandas Pivot table - incremental column names", "body": "<p>I think you need <a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.core.groupby.GroupBy.cumcount.html\" rel=\"nofollow\"><code>cumcount</code></a> for creating column names and to remove <code>[]</code> from parameter <code>values</code>:</p>\n\n<pre><code>df['g'] = df.groupby(['customer_id','receipt_id'])['item_id'].cumcount() + 1\n\npt = pd.pivot_table(df, \n                    values=\"item_id\",\n                    index=[\"customer_id\", \"receipt_id\"], \n                    columns=\"g\", \n                    fill_value=\"NaN\").reset_index()\n\nprint (pt)\n\ng  customer_id  receipt_id    1    2    3    4\n0            1         100  420  NaN  NaN  NaN\n1            2         300  320  460  NaN  NaN\n2            5         200  220  NaN  NaN  NaN\n3            5         400  450  460  320  270\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "is_accepted": false, "score": 1, "last_activity_date": 1466624093, "creation_date": 1466624093, "answer_id": 37976803, "question_id": 37976592, "link": "https://stackoverflow.com/questions/37976592/pandas-pivot-table-incremental-column-names/37976803#37976803", "title": "Pandas Pivot table - incremental column names", "body": "<p>alternative solution (it might be slower - i didn't test timing):</p>\n\n<pre><code>In [243]: df.groupby(['customer_id','receipt_id'])['item_id'].apply(list).apply(pd.Series).reset_index()\nOut[243]:\n   customer_id  receipt_id      0      1      2      3\n0            1         100  420.0    NaN    NaN    NaN\n1            2         300  320.0  460.0    NaN    NaN\n2            5         200  220.0    NaN    NaN    NaN\n3            5         400  450.0  460.0  320.0  270.0\n</code></pre>\n"}], "owner": {"reputation": 264, "user_id": 6453877, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f2d77f47f35b191db9f1a542b5ef3bee?s=128&d=identicon&r=PG&f=1", "display_name": "user6453877", "link": "https://stackoverflow.com/users/6453877/user6453877"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 908, "favorite_count": 2, "accepted_answer_id": 37976689, "answer_count": 2, "score": 2, "last_activity_date": 1466624093, "creation_date": 1466623302, "last_edit_date": 1466623849, "question_id": 37976592, "link": "https://stackoverflow.com/questions/37976592/pandas-pivot-table-incremental-column-names", "title": "Pandas Pivot table - incremental column names", "body": "<p>I am trying to use Pandas pivot_table to move line items on my receipts as columns, leaving only one row per receipt. My main challenge is to name my new columns counting numbers as needed and fill with NaNs. </p>\n\n<p>I am trying to make this:</p>\n\n<pre><code>customer_id receipt_id item_id\n01          100       420\n05          400       450\n05          400       460\n05          400       320\n05          400       270\n02          300       320\n02          300       460\n05          200       220\n</code></pre>\n\n<p>...look like this:</p>\n\n<pre><code>customer_id receipt_id   1     2     3     4   n..\n01          100          420   NaN   NaN   NaN\n05          400          450   460   320   270\n02          300          320   460   NaN   NaN\n05          200          220   NaN   NaN   Nan\n</code></pre>\n\n<p>I have been trying to make it work, but I am not close.</p>\n\n<pre><code>pt = pd.pivot_table(df, values=[\"item_id\"], index=[\"customer_id\", \"receipt_id\"], columns=[\"item_id\"], fill_value=\"NaN\").reset_index()\n</code></pre>\n"}, {"tags": ["python", "matplotlib", "machine-learning", "scikit-learn", "pca"], "answers": [{"comments": [{"owner": {"reputation": 23937, "user_id": 678572, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kZ2Ia.jpg?s=128&g=1", "display_name": "O.rka", "link": "https://stackoverflow.com/users/678572/o-rka"}, "edited": false, "score": 0, "creation_date": 1466636383, "post_id": 37977244, "comment_id": 63404944, "body": "yes that&#39;s what I meant, to plot them on the original axis after it&#39;s been reduced in dimensions . I think that example you posted is the one I was using . I could get it to work correctly for my data"}, {"owner": {"reputation": 23937, "user_id": 678572, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kZ2Ia.jpg?s=128&g=1", "display_name": "O.rka", "link": "https://stackoverflow.com/users/678572/o-rka"}, "edited": false, "score": 0, "creation_date": 1466636479, "post_id": 37977244, "comment_id": 63404972, "body": "thanks for clarifying that I&#39;m going to fix the question \ud83d\udc4c\ud83c\udffd"}], "tags": [], "owner": {"reputation": 31, "user_id": 6446317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8dc47b52310aaf23929077f02c8f7c8?s=128&d=identicon&r=PG&f=1", "display_name": "amhr", "link": "https://stackoverflow.com/users/6446317/amhr"}, "is_accepted": false, "score": 0, "last_activity_date": 1466625770, "last_edit_date": 1495535348, "creation_date": 1466625770, "answer_id": 37977244, "question_id": 37976564, "link": "https://stackoverflow.com/questions/37976564/simple-plots-of-eigenvectors-for-sklearn-decomposition-pca/37977244#37977244", "title": "Simple plots of eigenvectors for sklearn.decomposition.PCA", "body": "<p>I think you are asking the wrong question. The eigenvectors ARE the the principal components (PC1, PC2, etc.). So plotting the eigenvectors in the [PC1, PC2, PC3] 3D plot is simply plotting the three orthogonal axes of that plot.</p>\n\n<p>You probably want to visualize how the eigenvectors look in your original coordinate system. This is what is discussed in your second link: <a href=\"https://stackoverflow.com/questions/18299523/basic-example-for-pca-with-matplotlib\">Basic example for PCA with matplotlib</a>.</p>\n"}], "owner": {"reputation": 23937, "user_id": 678572, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kZ2Ia.jpg?s=128&g=1", "display_name": "O.rka", "link": "https://stackoverflow.com/users/678572/o-rka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 9281, "favorite_count": 4, "answer_count": 1, "score": 5, "last_activity_date": 1616245635, "creation_date": 1466623215, "last_edit_date": 1592644375, "question_id": 37976564, "link": "https://stackoverflow.com/questions/37976564/simple-plots-of-eigenvectors-for-sklearn-decomposition-pca", "title": "Simple plots of eigenvectors for sklearn.decomposition.PCA", "body": "<p>I'm trying to understand how <code>Principal Component Analysis</code> works and I am testing it on the <code>sklearn.datasets.load_iris</code> dataset.  I understand how each step works (e.g. standardize the data, covariance, eigendecomposition, sort for highest eigenvalue, transform original data to new axis using <code>K</code> selected dimensions).</p>\n<p>The next step is to visualize where these <code>eigenvectors</code> are being projected into on the dataset (on the <code>PC1 vs. PC2 plot</code>, right?).</p>\n<h3>Can someone explain how to plot [PC1, PC2, PC3] eigenvectors on a 3D plot of the reduced dimension dataset?</h3>\n<p>Also, am I plotting this 2D version correctly? I'm not sure why my first eigenvector has a shorter length.  Should I multiply by the eigenvalue?</p>\n<hr />\n<p><strong>Here is some of the research I have done to accomplish this:</strong></p>\n<p>The PCA method that I'm following is from :\n<a href=\"https://plot.ly/ipython-notebooks/principal-component-analysis/#Shortcut---PCA-in-scikit-learn\" rel=\"nofollow noreferrer\">https://plot.ly/ipython-notebooks/principal-component-analysis/#Shortcut---PCA-in-scikit-learn</a> (although I don't want to use <code>plotly</code>.  I want to stick with <code>pandas, numpy, sklearn, matplotlib, scipy, and seaborn</code>)</p>\n<p>I've been following this tutorial for plotting eigenvectors it seems pretty simple: <a href=\"https://stackoverflow.com/questions/18299523/basic-example-for-pca-with-matplotlib\">Basic example for PCA with matplotlib</a> but I can't seem to replicate the results with my data.</p>\n<p>I found this but it seems overly complicated for what I'm trying to do and I don't want to have to create a <code>FancyArrowPatch</code>: <a href=\"https://stackoverflow.com/questions/35508141/plotting-the-eigenvector-of-covariance-matrix-using-matplotlib-and-np-linalg\">plotting the eigenvector of covariance matrix using matplotlib and np.linalg</a></p>\n<hr />\n<p><strong>I've tried to make my code as straightforward as possible to follow the other tutorials:</strong></p>\n<pre><code>import numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nfrom sklearn.datasets import load_iris\nfrom sklearn.preprocessing import StandardScaler\nfrom sklearn import decomposition\nimport seaborn as sns; sns.set_style(&quot;whitegrid&quot;, {'axes.grid' : False})\n\n%matplotlib inline\nnp.random.seed(0)\n\n# Iris dataset\nDF_data = pd.DataFrame(load_iris().data, \n                       index = [&quot;iris_%d&quot; % i for i in range(load_iris().data.shape[0])],\n                       columns = load_iris().feature_names)\n\nSe_targets = pd.Series(load_iris().target, \n                       index = [&quot;iris_%d&quot; % i for i in range(load_iris().data.shape[0])], \n                       name = &quot;Species&quot;)\n\n# Scaling mean = 0, var = 1\nDF_standard = pd.DataFrame(StandardScaler().fit_transform(DF_data), \n                           index = DF_data.index,\n                           columns = DF_data.columns)\n\n# Sklearn for Principal Componenet Analysis\n\n# Dims\nm = DF_standard.shape[1]\nK = 2\n\n# PCA (How I tend to set it up)\nM_PCA = decomposition.PCA(n_components=m)\nDF_PCA = pd.DataFrame(M_PCA.fit_transform(DF_standard), \n                columns=[&quot;PC%d&quot; % k for k in range(1,m + 1)]).iloc[:,:K]\n\n\n# Plot the eigenvectors\n#https://stackoverflow.com/questions/18299523/basic-example-for-pca-with-matplotlib\n\n# This is where stuff gets weird...\ndata = DF_standard\n\nmu = data.mean(axis=0)\neigenvectors, eigenvalues = M_PCA.components_, M_PCA.explained_variance_ #eigenvectors, eigenvalues, V = np.linalg.svd(data.T, full_matrices=False)\nprojected_data = DF_PCA #np.dot(data, eigenvectors)\n\nsigma = projected_data.std(axis=0).mean()\n\nfig, ax = plt.subplots(figsize=(10,10))\nax.scatter(projected_data[&quot;PC1&quot;], projected_data[&quot;PC2&quot;])\nfor axis, color in zip(eigenvectors[:K], [&quot;red&quot;,&quot;green&quot;]):\n#     start, end = mu, mu + sigma * axis ### leads to &quot;ValueError: too many values to unpack (expected 2)&quot;\n\n    # So I tried this but I don't think it's correct\n    start, end = (mu)[:K], (mu + sigma * axis)[:K] \n    ax.annotate('', xy=end,xytext=start, arrowprops=dict(facecolor=color, width=1.0))\n    \nax.set_aspect('equal')\nplt.show()\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/t9st0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/t9st0.png\" alt=\"enter image description here\" /></a></p>\n"}, {"tags": ["python", "sockets", "networking", "udp", "windows-xp"], "comments": [{"owner": {"reputation": 229, "user_id": 4513433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67a12ae3ef367909451e6c4c8946bb41?s=128&d=identicon&r=PG&f=1", "display_name": "Wuggy", "link": "https://stackoverflow.com/users/4513433/wuggy"}, "edited": false, "score": 0, "creation_date": 1467237817, "post_id": 37976551, "comment_id": 63655104, "body": "This definitely sounds like a network configuration issue rather than a python one. Can you get the same results using something like the &quot;netcat&quot; tool? Can you use &quot;route PRINT -4&quot; and see what rules for mapping from IP addresses to interfaces are being used? You may have some interfaces with overlapping netmasks (or something similarly bad) such that their is a choice of rules and hence wrong interface is being used. &quot;route&quot; should help you see if that&#39;s the case."}, {"owner": {"reputation": 51, "user_id": 6231687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc220a20bd494dfc15f57dd04605bd62?s=128&d=identicon&r=PG&f=1", "display_name": "CytznX", "link": "https://stackoverflow.com/users/6231687/cytznx"}, "reply_to_user": {"reputation": 229, "user_id": 4513433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67a12ae3ef367909451e6c4c8946bb41?s=128&d=identicon&r=PG&f=1", "display_name": "Wuggy", "link": "https://stackoverflow.com/users/4513433/wuggy"}, "edited": false, "score": 0, "creation_date": 1467286344, "post_id": 37976551, "comment_id": 63675348, "body": "I don&#39;t know what the &quot;-4&quot; flag does, DOS didn&#39;t seam to like it. Instead I used &quot;route PRINT 10*&quot;. I&#39;ve Updated my question with the results"}, {"owner": {"reputation": 229, "user_id": 4513433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67a12ae3ef367909451e6c4c8946bb41?s=128&d=identicon&r=PG&f=1", "display_name": "Wuggy", "link": "https://stackoverflow.com/users/4513433/wuggy"}, "edited": false, "score": 0, "creation_date": 1467291035, "post_id": 37976551, "comment_id": 63678628, "body": "Yep, you&#39;ve got overlapping subnets here. The interface 10.10.10.12 is going to be chosen for sending all traffic to 10.x.x.x destinations. The best way to fix this would be to change the network configuration for the 10.10.10.12 interface to avoid the overlap. If 10.10.x.x and 10.31.x.x are meant to be different subnets, then the netmasks should both be 255.255.0.0.   (I&#39;m on win 7, so the command line options for &quot;route&quot; may be a little different for you on XP. On win 7, &quot;-4&quot; restricts the output to IPv4 routes.)"}, {"owner": {"reputation": 51, "user_id": 6231687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc220a20bd494dfc15f57dd04605bd62?s=128&d=identicon&r=PG&f=1", "display_name": "CytznX", "link": "https://stackoverflow.com/users/6231687/cytznx"}, "reply_to_user": {"reputation": 229, "user_id": 4513433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67a12ae3ef367909451e6c4c8946bb41?s=128&d=identicon&r=PG&f=1", "display_name": "Wuggy", "link": "https://stackoverflow.com/users/4513433/wuggy"}, "edited": false, "score": 0, "creation_date": 1467297568, "post_id": 37976551, "comment_id": 63683816, "body": "That makes sense, I owe you big time. I won&#39;t be able to test this until sometime next week (bureaucracy at its finest). but if you want to type up an answer ill mark it as &quot;accepted&quot; as soon as I get confermation"}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 6231687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc220a20bd494dfc15f57dd04605bd62?s=128&d=identicon&r=PG&f=1", "display_name": "CytznX", "link": "https://stackoverflow.com/users/6231687/cytznx"}, "edited": false, "score": 0, "creation_date": 1467813308, "post_id": 38129891, "comment_id": 63873430, "body": "Gahhh... bad news... It didnt work, however I can Now see ARP request go out on the right interface (10.31.9.0 instead of 10.10.10.12)... I&#39;ve updated the question with a full &quot;route PRINT&quot;... =/"}, {"owner": {"reputation": 229, "user_id": 4513433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67a12ae3ef367909451e6c4c8946bb41?s=128&d=identicon&r=PG&f=1", "display_name": "Wuggy", "link": "https://stackoverflow.com/users/4513433/wuggy"}, "reply_to_user": {"reputation": 51, "user_id": 6231687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc220a20bd494dfc15f57dd04605bd62?s=128&d=identicon&r=PG&f=1", "display_name": "CytznX", "link": "https://stackoverflow.com/users/6231687/cytznx"}, "edited": false, "score": 0, "creation_date": 1467889227, "post_id": 38129891, "comment_id": 63908406, "body": "If it&#39;s now using the right interface, there&#39;s almost certainly something else networking-related that&#39;s preventing reaching the server. That&#39;s getting a bit away from the original question. How&#39;s about grabbing me on chat (<a href=\"http://chat.stackoverflow.com/\">chat.stackoverflow.com</a>) and we can try figuring it out?"}, {"owner": {"reputation": 51, "user_id": 6231687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc220a20bd494dfc15f57dd04605bd62?s=128&d=identicon&r=PG&f=1", "display_name": "CytznX", "link": "https://stackoverflow.com/users/6231687/cytznx"}, "edited": false, "score": 0, "creation_date": 1467892074, "post_id": 38129891, "comment_id": 63910304, "body": "It says I don&#39;t have enough reputation to &quot;chat&quot; there... =/"}, {"owner": {"reputation": 229, "user_id": 4513433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67a12ae3ef367909451e6c4c8946bb41?s=128&d=identicon&r=PG&f=1", "display_name": "Wuggy", "link": "https://stackoverflow.com/users/4513433/wuggy"}, "reply_to_user": {"reputation": 51, "user_id": 6231687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc220a20bd494dfc15f57dd04605bd62?s=128&d=identicon&r=PG&f=1", "display_name": "CytznX", "link": "https://stackoverflow.com/users/6231687/cytznx"}, "edited": false, "score": 0, "creation_date": 1467894469, "post_id": 38129891, "comment_id": 63912015, "body": "Sorry, I&#39;d not noticed the minimum reputation requirement. Try again now!"}, {"owner": {"reputation": 51, "user_id": 6231687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc220a20bd494dfc15f57dd04605bd62?s=128&d=identicon&r=PG&f=1", "display_name": "CytznX", "link": "https://stackoverflow.com/users/6231687/cytznx"}, "edited": false, "score": 0, "creation_date": 1467894593, "post_id": 38129891, "comment_id": 63912097, "body": "is there another way?"}, {"owner": {"reputation": 229, "user_id": 4513433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67a12ae3ef367909451e6c4c8946bb41?s=128&d=identicon&r=PG&f=1", "display_name": "Wuggy", "link": "https://stackoverflow.com/users/4513433/wuggy"}, "reply_to_user": {"reputation": 51, "user_id": 6231687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc220a20bd494dfc15f57dd04605bd62?s=128&d=identicon&r=PG&f=1", "display_name": "CytznX", "link": "https://stackoverflow.com/users/6231687/cytznx"}, "edited": false, "score": 0, "creation_date": 1467894822, "post_id": 38129891, "comment_id": 63912256, "body": "You should have enough reputation now, give it another go. Alternatively, feel free suggest somewhere else, I&#39;m flexible."}, {"owner": {"reputation": 51, "user_id": 6231687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc220a20bd494dfc15f57dd04605bd62?s=128&d=identicon&r=PG&f=1", "display_name": "CytznX", "link": "https://stackoverflow.com/users/6231687/cytznx"}, "edited": false, "score": 0, "creation_date": 1467901976, "post_id": 38129891, "comment_id": 63917707, "body": "Yeah, I can talk on a given &quot;chat&quot;... but I cannot create a new one until I have 100 points... &gt;&lt;... can u create on your end?"}, {"owner": {"reputation": 229, "user_id": 4513433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67a12ae3ef367909451e6c4c8946bb41?s=128&d=identicon&r=PG&f=1", "display_name": "Wuggy", "link": "https://stackoverflow.com/users/4513433/wuggy"}, "reply_to_user": {"reputation": 51, "user_id": 6231687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc220a20bd494dfc15f57dd04605bd62?s=128&d=identicon&r=PG&f=1", "display_name": "CytznX", "link": "https://stackoverflow.com/users/6231687/cytznx"}, "edited": false, "score": 0, "creation_date": 1467902157, "post_id": 38129891, "comment_id": 63917864, "body": "Hopefully this link will work: <a href=\"http://chat.stackoverflow.com/rooms/info/116684/discussion-between-wuggy-and-cytznx\">chat.stackoverflow.com/rooms/info/116684/&hellip;</a>"}], "tags": [], "owner": {"reputation": 229, "user_id": 4513433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67a12ae3ef367909451e6c4c8946bb41?s=128&d=identicon&r=PG&f=1", "display_name": "Wuggy", "link": "https://stackoverflow.com/users/4513433/wuggy"}, "is_accepted": false, "score": 1, "last_activity_date": 1467308221, "creation_date": 1467308221, "answer_id": 38129891, "question_id": 37976551, "link": "https://stackoverflow.com/questions/37976551/python-udp-sockets-with-multiple-interfaces/38129891#38129891", "title": "Python UDP Sockets with Multiple Interfaces", "body": "<p>Given the output from \"route\", it looks like you're 10.10.10.12 and 10.31.9.0 interfaces have been configured with overlapping subnets. The OS is choosing to use 10.10.10.12 for all 10.x.x.x addresses as it's the first rule that applies.</p>\n\n<p>Having overlapping subnets is normally a network configuration error: it's probably intended that 10.10.x.x and 10.31.x.x are the valid subnets and both should use a netmask of 255.255.0.0, and so the current 255.0.0.0 netmask used by the 10.10.10.12 interface is incorrect.</p>\n\n<p>(It may be possible to 'fudge' a fix, if the intention is to make all 10.x.x.x requests use the 10.10.10.12 interface except for those in 10.31.x.x which should use the 10.31.9.0 address, by changing the 'metric' of the 10.31.0.0 routing rule so that anything for 10.31.x.x addresses matches that rule before the 10.x.x.x rule is checked. You can use the <code>route</code> command to make that change, but it's definitely not recommended! Fixing the overlapping subnets is the proper solution.)</p>\n"}, {"tags": [], "owner": {"reputation": 51, "user_id": 6231687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc220a20bd494dfc15f57dd04605bd62?s=128&d=identicon&r=PG&f=1", "display_name": "CytznX", "link": "https://stackoverflow.com/users/6231687/cytznx"}, "is_accepted": true, "score": 0, "last_activity_date": 1469286204, "creation_date": 1469286204, "answer_id": 38543172, "question_id": 37976551, "link": "https://stackoverflow.com/questions/37976551/python-udp-sockets-with-multiple-interfaces/38543172#38543172", "title": "Python UDP Sockets with Multiple Interfaces", "body": "<p>Turns out, the Packets that my \"server\" was sending where not IP kosher. so they where getting rejected at the network and transport layers. Solution was to not use python socket class, but instead communicate directly to OSI-L2 using <a href=\"https://www.winpcap.org/\" rel=\"nofollow\">winpcap</a> and ctypes</p>\n"}], "owner": {"reputation": 51, "user_id": 6231687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc220a20bd494dfc15f57dd04605bd62?s=128&d=identicon&r=PG&f=1", "display_name": "CytznX", "link": "https://stackoverflow.com/users/6231687/cytznx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2523, "favorite_count": 0, "accepted_answer_id": 38543172, "answer_count": 2, "score": 4, "last_activity_date": 1469286204, "creation_date": 1466623174, "last_edit_date": 1495535337, "question_id": 37976551, "link": "https://stackoverflow.com/questions/37976551/python-udp-sockets-with-multiple-interfaces", "title": "Python UDP Sockets with Multiple Interfaces", "body": "<p>I'm Writing a script in python2.7 on a windows XP machine. The machine is connected to multiple networks using different network cards.</p>\n\n<p>I'm running into an issue where I've bound a UDP Socket to a specific interface(I understand that you can accomplish this in windows by just providing the network cards existing IP address) </p>\n\n<pre><code>self.sock = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)\nself.sock.bind(('10.31.9.0', 6466)) #&lt;&lt;&lt; 10.31.9.0 is address of desired card\n</code></pre>\n\n<p>I then set the timeout to 5s</p>\n\n<pre><code>self.sock.settimeout(5)\n</code></pre>\n\n<p>Then I try to send a message out to a server that I can prove exists and works. then wait for a response. </p>\n\n<pre><code>self.destintation = ('10.42.40.34', 62434)\n\n# Send the msg\nself.sock.sendto(msg, self.destintation)\n\n# receive data\nreply, addr = self.sock.recvfrom(1024)\n</code></pre>\n\n<p>However a <code>socket.timeout</code> is always thrown. so I open up wire shark to see what is going wrong, and it turns out that my initial message never gets sent on the desired interface.</p>\n\n<p>What I do see is an arp broadcast on a different interface(10.10.10.12\n) from my machine asking who is attached to my desired destination IP: </p>\n\n<pre><code>1   0.000000    IntelCor_8c:6d:97   Broadcast   ARP 42      Who has 10.42.40.34?  Tell 10.10.10.12\n</code></pre>\n\n<p>Of course there is no response to the broadcast because the 10.42.40.34 Address/machine is not reachable from the 10.10.10.12 interface</p>\n\n<p>How do I tell Python to send the ARP broadcast out on <code>'10.31.9.0'</code>? What have I done Wrong?</p>\n\n<p><strong>EDIT:</strong> </p>\n\n<p>Additional Information> \n    The network for the interface I am using is a Class B \n        (netmask is 255.255.0.0) </p>\n\n<pre><code>The interface IP is : 10.31.9.0 \n\nThe target IP is: 10.42.40.34. \n</code></pre>\n\n<p>I am wondering if the issue is a result of my target sitting on a separate subnet. However, as described in a related issue <a href=\"https://stackoverflow.com/questions/38106302/python-wont-receive-udp-packetsnon-broadcast\">here</a>. there is traffic from the server to me... =/</p>\n\n<p><strong>UPDATE:</strong></p>\n\n<p>Results of \"route PRINT 10*\"</p>\n\n<pre><code>Active Routes:\nNetwork Destination        Netmask          Gateway       Interface  Metric\n         10.0.0.0        255.0.0.0      10.10.10.12     10.10.10.12   10\n      10.10.10.12  255.255.255.255        127.0.0.1       127.0.0.1   10\n        10.31.0.0      255.255.0.0        10.31.9.0       10.31.9.0   10\n        10.31.9.0  255.255.255.255        127.0.0.1       127.0.0.1   10\n   10.255.255.255  255.255.255.255      10.10.10.12     10.10.10.12   10\n   10.255.255.255  255.255.255.255        10.31.9.0       10.31.9.0   10\nDefault Gateway:        153.4.84.1\n===========================================================================\nPersistent Routes:\n  None\n</code></pre>\n\n<p><strong>UPDATE #2</strong>\nFull route PRINT</p>\n\n<pre><code>Active Routes:\nNetwork Destination        Netmask          Gateway       Interface  Metric\n          0.0.0.0          0.0.0.0       153.4.84.1     153.4.85.81   10\n        10.10.0.0      255.255.0.0      10.10.10.12     10.10.10.12   10\n      10.10.10.12  255.255.255.255        127.0.0.1       127.0.0.1   10\n        10.31.0.0      255.255.0.0        10.31.9.0       10.31.9.0   10\n        10.31.9.0  255.255.255.255        127.0.0.1       127.0.0.1   10\n   10.255.255.255  255.255.255.255      10.10.10.12     10.10.10.12   10\n   10.255.255.255  255.255.255.255        10.31.9.0       10.31.9.0   10\n        127.0.0.0        255.0.0.0        127.0.0.1       127.0.0.1   1\n       153.4.84.0    255.255.252.0      153.4.85.81     153.4.85.81   10\n      153.4.85.81  255.255.255.255        127.0.0.1       127.0.0.1   10\n    153.4.255.255  255.255.255.255      153.4.85.81     153.4.85.81   10\n     192.168.56.0    255.255.255.0     192.168.56.1    192.168.56.1   20\n     192.168.56.1  255.255.255.255        127.0.0.1       127.0.0.1   20\n   192.168.56.255  255.255.255.255     192.168.56.1    192.168.56.1   20\n        224.0.0.0        240.0.0.0      10.10.10.12     10.10.10.12   10\n        224.0.0.0        240.0.0.0        10.31.9.0       10.31.9.0   10\n        224.0.0.0        240.0.0.0      153.4.85.81     153.4.85.81   10\n        224.0.0.0        240.0.0.0     192.168.56.1    192.168.56.1   20\n  255.255.255.255  255.255.255.255      10.10.10.12     10.10.10.12   1\n  255.255.255.255  255.255.255.255        10.31.9.0       10.31.9.0   1\n  255.255.255.255  255.255.255.255      153.4.85.81     153.4.85.81   1\n  255.255.255.255  255.255.255.255     192.168.56.1    192.168.56.1   1\n  255.255.255.255  255.255.255.255     192.168.56.1               5   1\nDefault Gateway:        153.4.84.1\n===========================================================================\nPersistent Routes:\n  None\n</code></pre>\n"}, {"tags": ["python", "openshift", "redhat"], "comments": [{"owner": {"reputation": 6813, "user_id": 1924325, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/88f9a0debb4ccf2449af3f535799d863?s=128&d=identicon&r=PG", "display_name": "fat fantasma", "link": "https://stackoverflow.com/users/1924325/fat-fantasma"}, "edited": false, "score": 0, "creation_date": 1466627993, "post_id": 37976550, "comment_id": 63401713, "body": "Search Github for my fatfantasma Pyramid starter. Sry.  Don&#39;t have link at moment."}, {"owner": {"reputation": 6813, "user_id": 1924325, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/88f9a0debb4ccf2449af3f535799d863?s=128&d=identicon&r=PG", "display_name": "fat fantasma", "link": "https://stackoverflow.com/users/1924325/fat-fantasma"}, "edited": false, "score": 0, "creation_date": 1466628061, "post_id": 37976550, "comment_id": 63401742, "body": "Found it; ) <a href=\"https://github.com/fatfantasma/Openshift-Pyramidstarter\" rel=\"nofollow noreferrer\">github.com/fatfantasma/Openshift-Pyramidstarter</a>"}, {"owner": {"reputation": 25, "user_id": 6500908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ec74ac23521a343f61d23025f1073b4?s=128&d=identicon&r=PG&f=1", "display_name": "M Jenkins", "link": "https://stackoverflow.com/users/6500908/m-jenkins"}, "reply_to_user": {"reputation": 6813, "user_id": 1924325, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/88f9a0debb4ccf2449af3f535799d863?s=128&d=identicon&r=PG", "display_name": "fat fantasma", "link": "https://stackoverflow.com/users/1924325/fat-fantasma"}, "edited": false, "score": 0, "creation_date": 1466693349, "post_id": 37976550, "comment_id": 63433597, "body": "Which file should I look at?"}, {"owner": {"reputation": 6813, "user_id": 1924325, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/88f9a0debb4ccf2449af3f535799d863?s=128&d=identicon&r=PG", "display_name": "fat fantasma", "link": "https://stackoverflow.com/users/1924325/fat-fantasma"}, "edited": false, "score": 0, "creation_date": 1466693761, "post_id": 37976550, "comment_id": 63433918, "body": "That starter uses the Pyramid framework for web development and how to set up on Openshift.  You now need to read the Pyramid docs to understand everything."}, {"owner": {"reputation": 25, "user_id": 6500908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ec74ac23521a343f61d23025f1073b4?s=128&d=identicon&r=PG&f=1", "display_name": "M Jenkins", "link": "https://stackoverflow.com/users/6500908/m-jenkins"}, "reply_to_user": {"reputation": 6813, "user_id": 1924325, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/88f9a0debb4ccf2449af3f535799d863?s=128&d=identicon&r=PG", "display_name": "fat fantasma", "link": "https://stackoverflow.com/users/1924325/fat-fantasma"}, "edited": false, "score": 0, "creation_date": 1466694096, "post_id": 37976550, "comment_id": 63434205, "body": "OK.  I&#39;m really new and this code is a bit too complex for me.  Is there an easier way? At any rate thanks for your help!"}, {"owner": {"reputation": 6813, "user_id": 1924325, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/88f9a0debb4ccf2449af3f535799d863?s=128&d=identicon&r=PG", "display_name": "fat fantasma", "link": "https://stackoverflow.com/users/1924325/fat-fantasma"}, "edited": false, "score": 0, "creation_date": 1466694442, "post_id": 37976550, "comment_id": 63434487, "body": "Take a look at Flask framework.  Or real simple, without using a framework just create your webpage1.html and webpage2.html files and access them like in your question. I think you need to do some reading tho: ) there are plenty of examples."}, {"owner": {"reputation": 25, "user_id": 6500908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ec74ac23521a343f61d23025f1073b4?s=128&d=identicon&r=PG&f=1", "display_name": "M Jenkins", "link": "https://stackoverflow.com/users/6500908/m-jenkins"}, "reply_to_user": {"reputation": 6813, "user_id": 1924325, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/88f9a0debb4ccf2449af3f535799d863?s=128&d=identicon&r=PG", "display_name": "fat fantasma", "link": "https://stackoverflow.com/users/1924325/fat-fantasma"}, "edited": false, "score": 0, "creation_date": 1466694524, "post_id": 37976550, "comment_id": 63434554, "body": "Ok thanks so much for your help!"}], "owner": {"reputation": 25, "user_id": 6500908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ec74ac23521a343f61d23025f1073b4?s=128&d=identicon&r=PG&f=1", "display_name": "M Jenkins", "link": "https://stackoverflow.com/users/6500908/m-jenkins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 19, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1466623872, "creation_date": 1466623168, "last_edit_date": 1466623872, "question_id": 37976550, "link": "https://stackoverflow.com/questions/37976550/python-openshift-multiple-webpages", "title": "Python Openshift Multiple webpages", "body": "<p>New to python and openshift.  I can follow the directions easy enough to edit the wsgi.py file (<a href=\"https://developers.openshift.com/languages/python/getting-started.html\" rel=\"nofollow\">directions</a>).  However I'm not sure what to do if I want to add more webpages to this.  If I go to mydomain.rhcloud.com it will display my wsgi.py file.  However I want to add web pages to this.  So something like mydomain.rhcloud.com/webpage1 and mydomain.rhcloud.com/webpage2.  Can someone please instruct me on how to set this up?<br>\nThanks so much!</p>\n"}, {"tags": ["python", "csv"], "comments": [{"owner": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 0, "creation_date": 1466623141, "post_id": 37976523, "comment_id": 63399274, "body": "what happens if the text contains something like <code>VANILLA</code>?"}, {"owner": {"reputation": 1269, "user_id": 1433948, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/53ade166f36c2604c7fcf2ea621373c2?s=128&d=identicon&r=PG", "display_name": "Splendonia", "link": "https://stackoverflow.com/users/1433948/splendonia"}, "reply_to_user": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 0, "creation_date": 1466623219, "post_id": 37976523, "comment_id": 63399320, "body": "@MarcB It won&#39;t, it&#39;s only numbers but if it doesn&#39;t get a value then it returns NIL"}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "reply_to_user": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 0, "creation_date": 1466623224, "post_id": 37976523, "comment_id": 63399325, "body": "@MarcB, row should be a list."}], "answers": [{"comments": [{"owner": {"reputation": 1269, "user_id": 1433948, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/53ade166f36c2604c7fcf2ea621373c2?s=128&d=identicon&r=PG", "display_name": "Splendonia", "link": "https://stackoverflow.com/users/1433948/splendonia"}, "edited": false, "score": 0, "creation_date": 1466624383, "post_id": 37976606, "comment_id": 63399889, "body": "This was so helpful! Thank you very much."}], "tags": [], "owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "is_accepted": true, "score": 2, "last_activity_date": 1466624151, "last_edit_date": 1466624151, "creation_date": 1466623356, "answer_id": 37976606, "question_id": 37976523, "link": "https://stackoverflow.com/questions/37976523/replacing-word-in-csv-without-knowing-its-position-with-python/37976606#37976606", "title": "Replacing word in CSV without knowing it&#39;s position with python", "body": "<p>Use  a try/except if <em>Nil</em> is not in every row getting the index and just assign to an empty string:</p>\n\n<pre><code>try:\n\n    row[row.index(\"NIL\")] = \"\"\nexcept IndexError:\n    pass\n</code></pre>\n\n<p><em>index</em> will find where Nil is in your list, once you have that the assignment will replace it:</p>\n\n<pre><code>In [9]: lst = [\"NIL\", \"foo\"]\n\nIn [10]: lst[lst.index(\"NIL\")] = \"\"\n\nIn [11]: lst\nOut[11]: ['', 'foo']\n</code></pre>\n\n<p>Since you can have multiple <code>NIL</code> strings per row, you will need to loop over each element:</p>\n\n<pre><code>row[:] = [ele if ele != \"NIL\" else \"\" for ele in row] \n</code></pre>\n\n<p>Also you don't need to call readlines, you can use <em>itertools.islice</em> to start at the nth line:</p>\n\n<pre><code>from itertools import islice\n\nreader = csv.reader(islice(csvfile, 6, None), delimiter=',')\n</code></pre>\n"}], "owner": {"reputation": 1269, "user_id": 1433948, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/53ade166f36c2604c7fcf2ea621373c2?s=128&d=identicon&r=PG", "display_name": "Splendonia", "link": "https://stackoverflow.com/users/1433948/splendonia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 37976606, "answer_count": 1, "score": 1, "last_activity_date": 1466624151, "creation_date": 1466623039, "last_edit_date": 1466623619, "question_id": 37976523, "link": "https://stackoverflow.com/questions/37976523/replacing-word-in-csv-without-knowing-its-position-with-python", "title": "Replacing word in CSV without knowing it&#39;s position with python", "body": "<p>I'm trying to find occurrences of the word NIL inside several huge CSV files and replace them for an empty string. I've looked up solutions but the one <strong>I tried doesn't work because the line is a list</strong> and the other ones I've found seem to be with specific position but I can't know where the NIL will appear because the files are always changing. </p>\n\n<p>My code:</p>\n\n<pre><code>import Tkinter, tkFileDialog, os, csv\n\nroot = Tkinter.Tk()\nroot.withdraw()\ndirname = tkFileDialog.askdirectory(parent=root,initialdir=\"/\",title='Please select a directory')\nfor subdir, dirs, files in os.walk(dirname):\n    for file in files:\n        with open (os.path.join(subdir, file), 'rb') as csvfile:\n            #Check if the file has headers#\n            if 'Result  :  Query Result' in csvfile.readline():\n                with open(os.path.join(subdir, os.path.splitext(file)[0] + '_no_headers_no_nil.csv'), 'wb') as out:\n                    reader = csv.reader(csvfile.readlines()[6:], delimiter=',')\n                    writer = csv.writer(out)\n                    for row in reader:\n                        #replace NIL occurrences with empty strings\n                        row = row.replace('NIL', '')\n                        separated = row.split(',')\n                        writer.writerow(row)\n\n            else:\n                #The file doesn't have headers\n                #find and replace NIL occurrences goes here\n                print 'file skipped ' + file + ': No headers found'\n</code></pre>\n\n<p>and here's an example of the type of CSVs</p>\n\n<p><a href=\"https://i.stack.imgur.com/KFbIV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/KFbIV.png\" alt=\"csv example\"></a></p>\n"}, {"tags": ["python", "django", "multithreading", "django-models"], "comments": [{"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1466627013, "post_id": 37976484, "comment_id": 63401247, "body": "Django itself is threadsafe, so any thread-safety bugs are in your own code. You probably need to show exactly where you are defining and using that <code>obj_list</code>."}, {"owner": {"reputation": 12415, "user_id": 5532516, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/QMoKm.jpg?s=128&g=1", "display_name": "Muhammad Hassan", "link": "https://stackoverflow.com/users/5532516/muhammad-hassan"}, "edited": false, "score": 0, "creation_date": 1466668827, "post_id": 37976484, "comment_id": 63415711, "body": "@DanielRosemanI I have provided my original code with models."}, {"owner": {"reputation": 12415, "user_id": 5532516, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/QMoKm.jpg?s=128&g=1", "display_name": "Muhammad Hassan", "link": "https://stackoverflow.com/users/5532516/muhammad-hassan"}, "reply_to_user": {"reputation": 47988, "user_id": 267540, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2v58W.jpg?s=128&g=1", "display_name": "e4c5", "link": "https://stackoverflow.com/users/267540/e4c5"}, "edited": false, "score": 0, "creation_date": 1466668840, "post_id": 37976484, "comment_id": 63415715, "body": "@e4c5 I have provided my original code with models."}, {"owner": {"reputation": 12415, "user_id": 5532516, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/QMoKm.jpg?s=128&g=1", "display_name": "Muhammad Hassan", "link": "https://stackoverflow.com/users/5532516/muhammad-hassan"}, "reply_to_user": {"reputation": 47988, "user_id": 267540, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2v58W.jpg?s=128&g=1", "display_name": "e4c5", "link": "https://stackoverflow.com/users/267540/e4c5"}, "edited": false, "score": 0, "creation_date": 1466672145, "post_id": 37976484, "comment_id": 63417934, "body": "@e4c5 There can be only one CandidateApplied model object for a specific TestConducted model object."}], "owner": {"reputation": 12415, "user_id": 5532516, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/QMoKm.jpg?s=128&g=1", "display_name": "Muhammad Hassan", "link": "https://stackoverflow.com/users/5532516/muhammad-hassan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1466672127, "creation_date": 1466622877, "last_edit_date": 1466672127, "question_id": 37976484, "link": "https://stackoverflow.com/questions/37976484/threads-are-conflicting-in-django-with-each-other", "title": "Threads are conflicting in django with each other", "body": "<p>I am getting a strange problem in my django app. In my app, I have a model A like this</p>\n\n<pre><code>class ModelA(models.Model):\n    name = models.CharField(max_length=30)\n</code></pre>\n\n<p>and another model B which is using model A foreign key like this</p>\n\n<pre><code>class ModelB(models.Model):\n    modelA = models.ForeignKey(ModelA)\n    name = models.CharField(max_length=30)\n</code></pre>\n\n<p>I have a view where I generate a report where I have value of <code>ModelA</code> object and I want all <code>ModelB</code> object created against that `ModelA' object. I am doing this like this</p>\n\n<pre><code>obj_list = ModelB.objects.filter(modelA=modelA_object)\n</code></pre>\n\n<p>The problem which I am getting is that some times (not always), I get ModelB objects which are not related to that <code>modelA_object</code>. In face, it is related to some other <code>modelA_object</code>. \nFor example, I have two <code>modelA</code> object <code>A1 and A2</code>. And some <code>modelB</code> object <code>B1 and B2</code>. Here <code>B1</code> is using <code>A1</code> foreign key and <code>B2</code> is using <code>A2</code> foreign key. In normal case, when I run following code</p>\n\n<pre><code>obj_list = ModelB.objects.filter(modelA=A1)\n</code></pre>\n\n<p><code>obj_list</code> will contain <code>B1</code>. But Sometimes (not always) I get <code>B2</code> in that list. Its seems that two request/threads for report are conflicting with each other. It does not happens often and when it happens, when I generate report second time, it show correct result. I am not writing any thing in DB in view where I am generating report. Can anyone please help me to resolve this issue?</p>\n\n<p>Original Code:</p>\n\n<p>Task Model:</p>\n\n<pre><code>class Tasks(models.Model):\n    name = models.CharField(max_length=500)\n    description = models.CharField(max_length=5000)\n    job = models.ForeignKey(JobPosition)\n</code></pre>\n\n<p>Test Conducted Model:</p>\n\n<pre><code>class TestConducted(models.Model):\n    clinic = models.ForeignKey(Entity)\n    applied = models.ForeignKey(CandidateApplied)\n    result = models.ForeignKey(TestResults)\n    date = models.DateTimeField(blank=True)\n    comments = models.CharField(max_length=5000, blank=True)\n    dynamic_Lifts = models.CharField(max_length=1000, blank=True)\n    not_cap_Comments = models.CharField(max_length=5000, blank=True)\n    hidden = models.BooleanField(default=False)\n    is_invoiced = models.BooleanField(default=False)\n    modified = AutoLastModifiedField(('modified'))\n</code></pre>\n\n<p>CandidateApplied Model:</p>\n\n<pre><code>class CandidateApplied(models.Model):\n    candidate = models.ForeignKey(Candidate)\n    format = models.ForeignKey(TestFormat)\n    jobposition = models.ForeignKey(JobPosition,\n                                blank=True,\n                                null=True)\n    barcode = models.IntegerField(max_length=6, blank=True, null=True)\n</code></pre>\n\n<p>There can be only one CandidateApplied model object for a specific TestConducted model object.\nThis is how I am accessing tasks</p>\n\n<pre><code>var_conducted = \"TestConducted Model Object\"\ntemp_tasks = Tasks.objects.filter(job=var_conducted.applied.jobposition.id).values_list \\\n            ('name', 'description').order_by('id')\n</code></pre>\n\n<p>Here <code>jobposition</code> is another model which is like this</p>\n\n<pre><code>class JobPosition(TimeStampedModel):\n    title = models.CharField(max_length=200)\n    description = models.CharField(max_length=400, blank=True)\n    SOC_Code = models.CharField(max_length=400, blank=True)\n    PDC = models.CharField(max_length=100, choices=Values.CUSTOM_PDC_OPTIONS)\n    entity = models.ForeignKey(Entity, blank=True, null=True)\n    is_active = models.BooleanField(default=True)\n    billed_amount = models.IntegerField(default=0, blank=True)\n    hidden = models.BooleanField(default=False)\n    monthly_invoice = models.BooleanField(default=False)\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 374, "user_id": 5775722, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sxDNb.jpg?s=128&g=1", "display_name": "FMaz", "link": "https://stackoverflow.com/users/5775722/fmaz"}, "edited": false, "score": 1, "creation_date": 1466623488, "post_id": 37976477, "comment_id": 63399465, "body": "RoboBrowser won&#39;t work in this case. It doesn&#39;t support JS or any other dynamic browsing features. Use <a href=\"http://www.seleniumhq.org\" rel=\"nofollow noreferrer\">Selenium</a> instead."}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user6866656"}, "is_accepted": false, "score": 2, "last_activity_date": 1546121876, "creation_date": 1546121876, "answer_id": 53973762, "question_id": 37976477, "link": "https://stackoverflow.com/questions/37976477/how-to-use-robobrowser-to-click-a-button/53973762#53973762", "title": "How to use RoboBrowser to click a button", "body": "<p>As Fmaz mentioned, you can use Selenium to do that.</p>\n\n<pre><code>from selenium import webdriver\n\nurl = 'set your website URL here'\n\ndriver = webdriver.Chrome(\"Set your path to chrome driver here\")\n#path example: /home/username/Downloads/chromedriver\n\ndriver.get(url)\n\ndriver.find_element_by_class_name('button').click()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 3690393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7326d50b92db00869623c757fe4d3360?s=128&d=identicon&r=PG&f=1", "display_name": "Fasta", "link": "https://stackoverflow.com/users/3690393/fasta"}, "is_accepted": false, "score": 1, "last_activity_date": 1568102480, "creation_date": 1568102480, "answer_id": 57866449, "question_id": 37976477, "link": "https://stackoverflow.com/questions/37976477/how-to-use-robobrowser-to-click-a-button/57866449#57866449", "title": "How to use RoboBrowser to click a button", "body": "<p>Actually this could be done using RoboBrowser!\nThe button click element is actually contains an href link that could be found and used to redirect:</p>\n\n<pre><code> browser.follow_link(browser.get_link(\"Esporta\"))\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 6500903, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208505469068556/picture?type=large", "display_name": "Luca Boschini", "link": "https://stackoverflow.com/users/6500903/luca-boschini"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3336, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1568102480, "creation_date": 1466622842, "question_id": 37976477, "link": "https://stackoverflow.com/questions/37976477/how-to-use-robobrowser-to-click-a-button", "title": "How to use RoboBrowser to click a button", "body": "<p>how can i click a button with RoboBrowser?</p>\n\n<p>this is the html code:</p>\n\n<pre><code>&lt;div id=\"DivDati\" class=\"ui-accordion-content ui-helper-reset ui-widget-             content ui-corner-bottom\"&gt;\n         &lt;p&gt;&lt;a style=\"margin:20px;\" class=\"button\" href=\"javascript:EsportaConfrontoCanali(false);\"&gt;Esporta&lt;/a&gt;&lt;/p&gt;\n        &lt;!-- Tabella --&gt;\n        &lt;table style=\"width:800px;margin:auto;\" class=\"confrontoTabelle\"&gt;\n                &lt;tbody&gt;&lt;tr&gt;\n                    &lt;th&gt;Selezionare i valori e premere \"Filtra\"&lt;/th&gt;\n                &lt;/tr&gt;\n        &lt;/tbody&gt;&lt;/table&gt;\n        &lt;!-- Fine tabella --&gt;\n    &lt;/div&gt;\n</code></pre>\n"}, {"tags": ["python", "service", "msvcrt", "keylogger", "pyhook"], "owner": {"reputation": 53, "user_id": 4397629, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/d79cc8c891b506c4a1802ad240afcb3f?s=128&d=identicon&r=PG&f=1", "display_name": "Yovel Zanzuri", "link": "https://stackoverflow.com/users/4397629/yovel-zanzuri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 184, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1528723428, "creation_date": 1466622830, "last_edit_date": 1528723428, "question_id": 37976475, "link": "https://stackoverflow.com/questions/37976475/use-pyhook-or-msvcrt-in-windows-service-python", "title": "Use pyHook or msvcrt in windows service (python)", "body": "<p>I am trying to make a simple keylogger with pyHook or msvcrt.</p>\n\n<p>Both modules work fine when I compile the code and run the .exe file.</p>\n\n<p>But when I'm trying to run the .exe as a windows service (using NSSM if that's matter), the service does not seem to log the pressed keys.</p>\n\n<p>I know the service is working, because it is writing to the files, communicating with sockets etc. </p>\n\n<p>The problem is only with the keylogger.</p>\n\n<p>I suspect the problem is that the service runs in it's own environment so it doesn't recognize the key presses.</p>\n\n<p>Any suggestions how to bypass it?</p>\n\n<p>Here is the keylogger:</p>\n\n<pre><code>    while True:\n        c = msvcrt.getch()\n        if ord(c) == 8:\n            buffer = buffer[:-1]\n        else:\n            buffer += c\n\n        # write the buffer to file\n</code></pre>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["python", "html", "django", "forms"], "comments": [{"owner": {"reputation": 138, "user_id": 1994255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85b1a59007598923576a3a3d7345f59f?s=128&d=identicon&r=PG", "display_name": "Lawrence Dean Vanderpool", "link": "https://stackoverflow.com/users/1994255/lawrence-dean-vanderpool"}, "edited": false, "score": 0, "creation_date": 1466623102, "post_id": 37976380, "comment_id": 63399245, "body": "Why are you not using models.EmailField?"}, {"owner": {"reputation": 138, "user_id": 1994255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85b1a59007598923576a3a3d7345f59f?s=128&d=identicon&r=PG", "display_name": "Lawrence Dean Vanderpool", "link": "https://stackoverflow.com/users/1994255/lawrence-dean-vanderpool"}, "edited": false, "score": 0, "creation_date": 1466623149, "post_id": 37976380, "comment_id": 63399282, "body": "If you use models.EmailField you don&#39;t have to do any custom validation at all, it&#39;ll &quot;just work&quot;"}, {"owner": {"reputation": 51, "user_id": 5233042, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/kBVoZ.jpg?s=128&g=1", "display_name": "Will", "link": "https://stackoverflow.com/users/5233042/will"}, "reply_to_user": {"reputation": 138, "user_id": 1994255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85b1a59007598923576a3a3d7345f59f?s=128&d=identicon&r=PG", "display_name": "Lawrence Dean Vanderpool", "link": "https://stackoverflow.com/users/1994255/lawrence-dean-vanderpool"}, "edited": false, "score": 0, "creation_date": 1466623251, "post_id": 37976380, "comment_id": 63399339, "body": "I&#39;m doing this for a Capstone project at my work. One of the perquisites of the project is to have custom form validation and to have any errors caught by that validation rendered on the template. I was using and EmailField before this, however."}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 5233042, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/kBVoZ.jpg?s=128&g=1", "display_name": "Will", "link": "https://stackoverflow.com/users/5233042/will"}, "edited": false, "score": 0, "creation_date": 1466623548, "post_id": 37976559, "comment_id": 63399494, "body": "I&#39;m doing this for a Capstone project at my work. One of the perquisites of the project is to have custom form validation and to have any errors caught by that validation rendered on the template. I was using an EmailField before this, however.    Also, your code didn&#39;t work. Nothin appeared on the template and I inspected the HTML using Chrome&#39;s developer tools. Nothing."}], "tags": [], "owner": {"reputation": 138, "user_id": 1994255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85b1a59007598923576a3a3d7345f59f?s=128&d=identicon&r=PG", "display_name": "Lawrence Dean Vanderpool", "link": "https://stackoverflow.com/users/1994255/lawrence-dean-vanderpool"}, "is_accepted": false, "score": 1, "last_activity_date": 1466623202, "creation_date": 1466623202, "answer_id": 37976559, "question_id": 37976380, "link": "https://stackoverflow.com/questions/37976380/rendering-raising-a-validation-error-on-an-html-template-in-django/37976559#37976559", "title": "Rendering/Raising A Validation Error on an HTML Template in Django", "body": "<p>Apart from using models.EmailField (which you should be doing) you need to change <code>{{ contactform.errors }}</code> to <code>{{ contactform.email.errors }}</code></p>\n"}, {"tags": [], "owner": {"reputation": 51, "user_id": 5233042, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/kBVoZ.jpg?s=128&g=1", "display_name": "Will", "link": "https://stackoverflow.com/users/5233042/will"}, "is_accepted": false, "score": 1, "last_activity_date": 1466624816, "creation_date": 1466624816, "answer_id": 37976983, "question_id": 37976380, "link": "https://stackoverflow.com/questions/37976380/rendering-raising-a-validation-error-on-an-html-template-in-django/37976983#37976983", "title": "Rendering/Raising A Validation Error on an HTML Template in Django", "body": "<p>I figured it out. Before the validation error could even be raised, I was attempting to generate a brand new form. </p>\n\n<pre><code>contactform = ContactForm()\n</code></pre>\n\n<p>^That code in my views.py file would make it so an entirely new form was created on my HTML template. Once I got rid of it, everything worked like it should.  </p>\n"}], "owner": {"reputation": 51, "user_id": 5233042, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/kBVoZ.jpg?s=128&g=1", "display_name": "Will", "link": "https://stackoverflow.com/users/5233042/will"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 784, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1466624816, "creation_date": 1466622475, "question_id": 37976380, "link": "https://stackoverflow.com/questions/37976380/rendering-raising-a-validation-error-on-an-html-template-in-django", "title": "Rendering/Raising A Validation Error on an HTML Template in Django", "body": "<p>I'm attempting to list a validation error on my HTML template if the form on that template isn't properly submitted. My forms.py file includes a function (clean_email) that will catch any string that's entered that doesn't include an \"@\" symbol, and it actually works. Therefore, any form that I attempt to submit without an \"@\" character in the email field won't be submitted. </p>\n\n<p>Unfortunately, the error isn't displayed as it should be on my HTML template. The code for displaying it is in line 15 of contact.html (contactform.errors ). This code doesn't produce any results. Here are the relevant files:</p>\n\n<p>Models.py</p>\n\n<pre><code>from __future__ import unicode_literals\nfrom django.db import models\n\nclass Contact(models.Model):\n\n    first_name = models.CharField(max_length=30)\n    last_name = models.CharField(max_length=30)\n    phone_number = models.CharField(max_length=30, blank=True)\n    email = models.CharField(max_length=50)\n    message = models.TextField(default=\" \")\n</code></pre>\n\n<p>Forms.py</p>\n\n<pre><code>from models import Contact\nfrom django.forms import ModelForm\nfrom django.core.exceptions import ValidationError\nfrom django import forms\n\nclass ContactForm(ModelForm):\n\n    class Meta:\n        model = Contact\n        fields = \"__all__\"\n\n    def clean_email(self):\n        email = self.cleaned_data[\"email\"]\n\n        if \"@\" not in email:\n            raise ValidationError(\"Not an Email Address\")\n\n        return email\n</code></pre>\n\n<p>Views.py</p>\n\n<pre><code>from django.shortcuts import render\nfrom django.core.urlresolvers import reverse\nfrom django.http import HttpResponseRedirect\nfrom forms import ContactForm\n\ndef contact(request):\n    contactform = ContactForm()\n    if request.method == \"POST\":\n        contactform = ContactForm(request.POST)\n        if contactform.is_valid():\n            message = contactform.save(commit=False)\n            message.save()\n            return HttpResponseRedirect(reverse(\"contact\"))\n        else:\n            print(contactform.errors)\n            contactform = ContactForm()\n    return render(request,\"contact_form/contact.html\",{\"contactform\":contactform})\n</code></pre>\n\n<p>Finally, Contact.HTML</p>\n\n<pre><code>{% block content %}\n\n &lt;link rel=\"stylesheet\" href=\"//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css\"&gt;\n &lt;link rel=\"stylesheet\" href=\"//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap-theme.min.css\"&gt;\n\n  &lt;link rel=\"stylesheet\" href=\"{% static \"css/main.css\" %}\"&gt;\n  &lt;link rel=\"stylesheet\" href=\"{% static \"css/contact.css\" %}\"&gt;\n\n  &lt;div class=\"outer\"&gt;\n      &lt;form method=\"POST\" action=\"\"&gt;\n        {% csrf_token %}\n          &lt;ul&gt;\n            &lt;li&gt;\n                &lt;label = for=\"email\"&gt;Email&lt;/label&gt;\n                {{ contactform.email }}\n                {{ contactform.errors }}\n            &lt;/li&gt;\n          &lt;/ul&gt;\n        &lt;input type=\"submit\" value=\"Submit Form\"/&gt;\n      &lt;/form&gt;\n  &lt;/div&gt;\n\n{% endblock %}\n</code></pre>\n\n<p>Any ideas/help is appreciated, thanks!</p>\n"}]