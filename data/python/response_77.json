[{"tags": ["python", "c++", "c++11", "vector", "swig"], "comments": [{"owner": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "edited": false, "score": 1, "creation_date": 1467260130, "post_id": 38111942, "comment_id": 63660941, "body": "Putting using statements in header files is a no-no, and you&#39;re finding out why."}], "answers": [{"comments": [{"owner": {"reputation": 81653, "user_id": 168175, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/qxeUf.jpg?s=128&g=1", "display_name": "Flexo", "link": "https://stackoverflow.com/users/168175/flexo"}, "edited": false, "score": 0, "creation_date": 1467269033, "post_id": 38113826, "comment_id": 63664205, "body": "(Or just not force <code>using</code> on everyone by having them at global scope inside header files)."}, {"owner": {"reputation": 114, "user_id": 2792600, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/86783d65cebffd18ddca3beff033a76b?s=128&d=identicon&r=PG&f=1", "display_name": "jrk0414", "link": "https://stackoverflow.com/users/2792600/jrk0414"}, "edited": false, "score": 0, "creation_date": 1467318038, "post_id": 38113826, "comment_id": 63696275, "body": "I agree with Flexo, without a doubt.  That might be the best way to handle this, but unfortunately, that was not the question.  As far as m7thon&#39;s response, the first bullet seems to override the <code>using std::vector</code> in the h file.  Very nice!  The other options are iffy, but I&#39;ll count it as closed because of the first bullet."}, {"owner": {"reputation": 2883, "user_id": 5162389, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FTqjP.jpg?s=128&g=1", "display_name": "m7thon", "link": "https://stackoverflow.com/users/5162389/m7thon"}, "edited": false, "score": 0, "creation_date": 1467323232, "post_id": 38113826, "comment_id": 63698668, "body": "The third point (copying and customizing the declarations) is in some sense the &quot;correct&quot; way to go and guaranteed to work. Using <code>%include &quot;test.hh&quot;</code> is really a shortcut for when the header file can be used as is. The first two points are hacks, but if they work... ;-)"}], "tags": [], "owner": {"reputation": 2883, "user_id": 5162389, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FTqjP.jpg?s=128&g=1", "display_name": "m7thon", "link": "https://stackoverflow.com/users/5162389/m7thon"}, "is_accepted": true, "score": 2, "last_activity_date": 1467259654, "creation_date": 1467259654, "answer_id": 38113826, "question_id": 38111942, "link": "https://stackoverflow.com/questions/38111942/swig-argument-error-when-using-using-stdvector-in-python/38113826#38113826", "title": "SWIG argument error when using &quot;using std::vector&quot; in python", "body": "<p>To me, this looks like SWIG does not support the <code>using std::vector;</code> statement correctly. I think it's a SWIG bug. I can think of the following workarounds:</p>\n\n<ul>\n<li>Add <code>using namespace std;</code> to the SWIG interface file (this will only affect the way wrappers are created; the <code>using</code> statement will not enter C++ code)</li>\n<li>Add <code>#define vector std::vector</code> to the SWIG interface file (this will only work if <code>vector</code> is never used as <code>std::vector</code>)</li>\n<li>Copy the declarations from the header file to the SWIG interface file, and change <code>vector</code> to <code>std::vector</code>. This will cause SWIG to generate correct wrappers, and again will not affect the C++ library code.</li>\n</ul>\n"}], "owner": {"reputation": 114, "user_id": 2792600, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/86783d65cebffd18ddca3beff033a76b?s=128&d=identicon&r=PG&f=1", "display_name": "jrk0414", "link": "https://stackoverflow.com/users/2792600/jrk0414"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 928, "favorite_count": 0, "accepted_answer_id": 38113826, "answer_count": 1, "score": 2, "last_activity_date": 1467259654, "creation_date": 1467244722, "last_edit_date": 1495542161, "question_id": 38111942, "link": "https://stackoverflow.com/questions/38111942/swig-argument-error-when-using-using-stdvector-in-python", "title": "SWIG argument error when using &quot;using std::vector&quot; in python", "body": "<p>This is very related to <a href=\"https://stackoverflow.com/questions/22491921/how-to-use-a-python-list-to-assign-a-stdvector-in-c-using-swig\">this</a> question</p>\n\n<p>Regardless of whether or not this is coding practice, I have come across code that looks like this</p>\n\n<p><strong>test.hh</strong></p>\n\n<pre><code>#include &lt;vector&gt;                                                                                   \nusing std::vector;                                                             \n\nclass Test \n{                                                                     \n    public:                                                                      \n        vector&lt;double&gt; data;                                                     \n};  \n</code></pre>\n\n<p>I am trying to swig this using swig3.0 using the following interface file</p>\n\n<p><strong>test.i</strong></p>\n\n<pre><code>%module test_swig                                                                \n\n%include \"std_vector.i\"                                                          \n\nnamespace std {                                                                  \n    %template(VectorDouble) vector&lt;double&gt;;                                      \n};                                                                               \n\n%{                                                                               \n    #include \"test.hh\"                                                               \n%}                                                                               \n\n%naturalvar Test::data;                                                                                 \n%include \"test.hh\"    \n</code></pre>\n\n<p>And the following test code</p>\n\n<p><strong>test.py</strong></p>\n\n<pre><code>t = test.Test()                                                              \njprint(t)                                                                    \na      = [1, 2, 3]                                                                \nt.data = a # fails   \n</code></pre>\n\n<p>doing so gives me the following error</p>\n\n<pre><code>in method 'Test_data_set', argument 2 of type 'vector&lt; double &gt;'\n</code></pre>\n\n<p>This can be fixed by either changing the <code>using std::vector</code> in test.hh to <code>using namespace std</code> or by removing <code>using std::vector</code> and changing <code>vector&lt;double&gt;</code> to <code>std::vector&lt;double&gt;</code>.  This is not what I want.</p>\n\n<p>The problem is that I was given this code as is.  I am not allowed to make changes, but I am supposed to still make everything available in python via SWIG.  What's going on here?  </p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["python", "json", "django", "d3.js"], "comments": [{"owner": {"reputation": 1, "user_id": 6119107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e91c684e610ad6de6e1ff4fb14037da?s=128&d=identicon&r=PG&f=1", "display_name": "qperotti", "link": "https://stackoverflow.com/users/6119107/qperotti"}, "edited": false, "score": 0, "creation_date": 1467259056, "post_id": 38111941, "comment_id": 63660692, "body": "LOL It was easier than I thought. Thanks a lot!"}], "answers": [{"comments": [{"owner": {"reputation": 6188, "user_id": 784648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4ce12343afb67ff0bf132f30b0ca9c5?s=128&d=identicon&r=PG", "display_name": "A. J. Parr", "link": "https://stackoverflow.com/users/784648/a-j-parr"}, "edited": false, "score": 0, "creation_date": 1467253256, "post_id": 38112511, "comment_id": 63659322, "body": "This would result in invalid JSON.  You are converting JSON arrays to objects, but the objects need a key and value for each entry."}], "tags": [], "owner": {"reputation": 1425, "user_id": 357631, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/4961fbcd89536082eb7b2def765388df?s=128&d=identicon&r=PG", "display_name": "Patrick Beeson", "link": "https://stackoverflow.com/users/357631/patrick-beeson"}, "is_accepted": false, "score": -1, "last_activity_date": 1467249761, "creation_date": 1467249761, "answer_id": 38112511, "question_id": 38111941, "link": "https://stackoverflow.com/questions/38111941/django-formatting-json-objects/38112511#38112511", "title": "Django - formatting json objects", "body": "<p>How about a little <code>replace</code> (assuming your JSON is a variable called <code>data</code>):</p>\n\n<p><code>data.replace(\"[\", \"{\").replace(\"]\", \"}\")</code></p>\n"}, {"tags": [], "owner": {"reputation": 671, "user_id": 1855323, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d0ac755919457c4e6c819fa31e09d0c?s=128&d=identicon&r=PG", "display_name": "Nathaniel", "link": "https://stackoverflow.com/users/1855323/nathaniel"}, "is_accepted": false, "score": 1, "last_activity_date": 1467249980, "creation_date": 1467249980, "answer_id": 38112540, "question_id": 38111941, "link": "https://stackoverflow.com/questions/38111941/django-formatting-json-objects/38112540#38112540", "title": "Django - formatting json objects", "body": "<p>This should do it without calling replace:   </p>\n\n<pre><code>states_dict[state.state] = {\"score\": state.score, \"recurrence\": state.recurrence}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6119107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e91c684e610ad6de6e1ff4fb14037da?s=128&d=identicon&r=PG&f=1", "display_name": "qperotti", "link": "https://stackoverflow.com/users/6119107/qperotti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1467249980, "creation_date": 1467244721, "question_id": 38111941, "link": "https://stackoverflow.com/questions/38111941/django-formatting-json-objects", "title": "Django - formatting json objects", "body": "<p>I am working on a backend web service using Django to consume JSON for later be displayed in a map using d3.js. The problem is that I am having trouble to parsing the json in the way I need. This is the format I get right now:</p>\n\n<pre><code>{\n  \"UT\": [    \n      {\"score\": \"Republican\"},\n      {\"recurrence\": 32}\n  ],\n  \"WI\": [\n      {\"score\": \"Democrat\"},\n      {\"recurrence\": 32}\n  ]\n}\n</code></pre>\n\n<p>And this is the format I need:</p>\n\n<pre><code>{\n  \"UT\": {\n      \"score\": \"5.01\",\n      \"recurrence\": 32\n  },\n  \"WI\": {\n      \"score\": 4.92,\n      \"recurrence\": 32\n  }\n}\n</code></pre>\n\n<p>The function I am using is this one:</p>\n\n<pre><code>def StatesJson(request, word):\n\n    states = State.objects.filter(word__word=word)\n    states_dict = dict()\n\n    for state in states:\n        states_dict[state.state] = ({\"score\": state.score},{\"recurrence\": state.recurrence})\n\n    return HttpResponse(json.dumps(states_dict))\n</code></pre>\n\n<p>There is any way to get rid of the square brackets? </p>\n"}, {"tags": ["python", "datetime", "timezone", "utc"], "comments": [{"owner": {"reputation": 215, "user_id": 5685031, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/WUPX7.jpg?s=128&g=1", "display_name": "Mr. zero", "link": "https://stackoverflow.com/users/5685031/mr-zero"}, "edited": false, "score": 0, "creation_date": 1467245816, "post_id": 38111921, "comment_id": 63657689, "body": "from time import gmtime, strftime  LocTime = strftime(&quot;%a, %d %b %Y %H:%M:%S&quot;) GMTime = strftime(&quot;%Y %m %d T %H:%M:%S (GMT)&quot;, gmtime())  print &quot;Local :&quot;,LocTime print &quot;UTC :&quot;,GMTime"}, {"owner": {"reputation": 215, "user_id": 5685031, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/WUPX7.jpg?s=128&g=1", "display_name": "Mr. zero", "link": "https://stackoverflow.com/users/5685031/mr-zero"}, "edited": false, "score": 0, "creation_date": 1467245850, "post_id": 38111921, "comment_id": 63657695, "body": "you want to convert from local time 2 utc ?"}, {"owner": {"reputation": 215, "user_id": 5685031, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/WUPX7.jpg?s=128&g=1", "display_name": "Mr. zero", "link": "https://stackoverflow.com/users/5685031/mr-zero"}, "edited": false, "score": 0, "creation_date": 1467246205, "post_id": 38111921, "comment_id": 63657764, "body": "you can get timezone with : tz = strftime(&quot;%Z&quot;)"}, {"owner": {"reputation": 1108, "user_id": 3345085, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/6c3399b28f28c7597ad4bdf53cfadef2?s=128&d=identicon&r=PG&f=1", "display_name": "Logan", "link": "https://stackoverflow.com/users/3345085/logan"}, "reply_to_user": {"reputation": 215, "user_id": 5685031, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/WUPX7.jpg?s=128&g=1", "display_name": "Mr. zero", "link": "https://stackoverflow.com/users/5685031/mr-zero"}, "edited": false, "score": 0, "creation_date": 1467246462, "post_id": 38111921, "comment_id": 63657826, "body": "@Mr.zero Yes, I want to convert from local time to utc. Yes, I can also get that with time.tzname, but how can I use that to do a conversion from that timezone that it returns to UTC? For example, maybe using pytz&#39;s astimezone() method."}, {"owner": {"reputation": 1108, "user_id": 3345085, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/6c3399b28f28c7597ad4bdf53cfadef2?s=128&d=identicon&r=PG&f=1", "display_name": "Logan", "link": "https://stackoverflow.com/users/3345085/logan"}, "reply_to_user": {"reputation": 215, "user_id": 5685031, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/WUPX7.jpg?s=128&g=1", "display_name": "Mr. zero", "link": "https://stackoverflow.com/users/5685031/mr-zero"}, "edited": false, "score": 0, "creation_date": 1467247033, "post_id": 38111921, "comment_id": 63657946, "body": "@Mr.zero I also want to be able to pass any time I want, not just using &#39;now&#39;. Thanks for your help."}], "answers": [{"comments": [{"owner": {"reputation": 1108, "user_id": 3345085, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/6c3399b28f28c7597ad4bdf53cfadef2?s=128&d=identicon&r=PG&f=1", "display_name": "Logan", "link": "https://stackoverflow.com/users/3345085/logan"}, "edited": false, "score": 0, "creation_date": 1467305491, "post_id": 38112241, "comment_id": 63689384, "body": "Awesome thank you! The first conversion has what I was looking for."}], "tags": [], "owner": {"reputation": 215, "user_id": 5685031, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/WUPX7.jpg?s=128&g=1", "display_name": "Mr. zero", "link": "https://stackoverflow.com/users/5685031/mr-zero"}, "is_accepted": true, "score": 1, "last_activity_date": 1467247471, "creation_date": 1467247471, "answer_id": 38112241, "question_id": 38111921, "link": "https://stackoverflow.com/questions/38111921/how-can-i-convert-a-date-time-string-in-local-time-into-utc-in-python/38112241#38112241", "title": "How can I convert a date/time string in local time into UTC in Python?", "body": "<p>If I understand your question correctly you want this :</p>\n\n<pre><code>from time import strftime,gmtime,mktime,strptime\n\n# you can pass any time you want\nstrftime(\"%Y-%m-%d %H:%M:%S\", gmtime(mktime(strptime(\"Thu, 30 Jun 2016 03:12:40\", \"%a, %d %b %Y %H:%M:%S\"))))\n\n# and here for real time\nstrftime(\"%Y-%m-%d %H:%M:%S\", gmtime(mktime(strptime(strftime(\"%a, %d %b %Y %H:%M:%S\"), \"%a, %d %b %Y %H:%M:%S\"))))\n</code></pre>\n"}], "owner": {"reputation": 1108, "user_id": 3345085, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/6c3399b28f28c7597ad4bdf53cfadef2?s=128&d=identicon&r=PG&f=1", "display_name": "Logan", "link": "https://stackoverflow.com/users/3345085/logan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1127, "favorite_count": 0, "accepted_answer_id": 38112241, "answer_count": 1, "score": 1, "last_activity_date": 1467247471, "creation_date": 1467244584, "last_edit_date": 1495539852, "question_id": 38111921, "link": "https://stackoverflow.com/questions/38111921/how-can-i-convert-a-date-time-string-in-local-time-into-utc-in-python", "title": "How can I convert a date/time string in local time into UTC in Python?", "body": "<p>I am trying to write a function that will convert a string date/time from local time to UTC in Python. </p>\n\n<p>According to <a href=\"https://stackoverflow.com/questions/1111056/get-time-zone-information-of-the-system-in-python\">this question</a>, you can use <code>time.tzname</code> to get some forms of the local timezone, but I have not found a way to use this in any of the datetime conversion methods. For example, <a href=\"http://www.saltycrane.com/blog/2009/05/converting-time-zones-datetime-objects-python/\" rel=\"nofollow noreferrer\">this article</a> shows there are a couple of things you can do with <code>pytz</code> and <code>datetime</code> to convert times, but all of them have timezones that are hardcoded in and are of different formats than what <code>time.tzname</code>returns. </p>\n\n<p>Currently I have the following code to translate a string-formatted time into milliseconds (Unix epoch):</p>\n\n<pre><code>local_time = time.strptime(datetime_str, \"%m/%d/%Y %H:%M:%S\") # expects UTC, but I want this to be local\ndt = datetime.datetime(*local_time[:6])\nms = int((dt - datetime.datetime.utcfromtimestamp(0)).total_seconds() * 1000)\n</code></pre>\n\n<p>However, this is expecting the time to be input as UTC. Is there a way to convert the string formatted time as if it were in the local timezone? Thanks.</p>\n\n<p><strong>Essentially, I want to be able to do what <a href=\"https://stackoverflow.com/a/79877/3345085\">this answer</a> does, but instead of hard-coding in \"America/Los_Angeles\", I want to be able to dynamically specify the local timezone.</strong> </p>\n"}, {"tags": ["python", "plot", "wxpython"], "answers": [{"tags": [], "owner": {"reputation": 1880, "user_id": 4281182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/teZv4.png?s=128&g=1", "display_name": "Sel&#231;uk Cihan", "link": "https://stackoverflow.com/users/4281182/sel%c3%a7uk-cihan"}, "is_accepted": true, "score": 1, "last_activity_date": 1467294842, "creation_date": 1467294842, "answer_id": 38125229, "question_id": 38111819, "link": "https://stackoverflow.com/questions/38111819/how-do-i-set-the-axis-limits-with-wx-lib-plot-in-python/38125229#38125229", "title": "How do I set the axis limits with wx.lib.plot in Python?", "body": "<p>You would set axis values while calling <a href=\"https://www.wxpython.org/docs/api/wx.lib.plot.PlotCanvas-class.html#Draw\" rel=\"nofollow\">PlotCanvas.Draw</a>.</p>\n\n<pre><code>self.Draw(gc, xAxis=(0,xlimit), yAxis=(0,ylimit))\n</code></pre>\n\n<p>Where <code>self</code> is derived from <code>plot.PlotCanvas</code>.</p>\n"}], "owner": {"reputation": 378, "user_id": 5116094, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/53da9d7fe74da4cf9bbd9cf8f2c8df89?s=128&d=identicon&r=PG&f=1", "display_name": "jmcampbell", "link": "https://stackoverflow.com/users/5116094/jmcampbell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 210, "favorite_count": 0, "accepted_answer_id": 38125229, "answer_count": 1, "score": 0, "last_activity_date": 1467294842, "creation_date": 1467243877, "question_id": 38111819, "link": "https://stackoverflow.com/questions/38111819/how-do-i-set-the-axis-limits-with-wx-lib-plot-in-python", "title": "How do I set the axis limits with wx.lib.plot in Python?", "body": "<p>The title really says it all. I currently have some Python code which generates a line graph using wx.lib.plot, and I would like to manually set the axis limits. How can I do so?</p>\n"}, {"tags": ["python", "eve"], "comments": [{"owner": {"reputation": 644, "user_id": 3689166, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8148710486ab58ba20f23d4d6d736ae5?s=128&d=identicon&r=PG&f=1", "display_name": "limbo", "link": "https://stackoverflow.com/users/3689166/limbo"}, "edited": false, "score": 0, "creation_date": 1467244231, "post_id": 38111789, "comment_id": 63657264, "body": "not sure what you are asking. Is this what you are looking for? <code>http:&#47;&#47;localhost:5000&#47;regions?name=&quot;El Salvador&quot;&amp;lang=&quot;es&quot;</code> This will allow you to filter on the endpoint using those 2 query string arguments."}, {"owner": {"reputation": 3429, "user_id": 724239, "user_type": "registered", "accept_rate": 74, "profile_image": "https://graph.facebook.com/553825011/picture?type=large", "display_name": "PachinSV", "link": "https://stackoverflow.com/users/724239/pachinsv"}, "reply_to_user": {"reputation": 644, "user_id": 3689166, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8148710486ab58ba20f23d4d6d736ae5?s=128&d=identicon&r=PG&f=1", "display_name": "limbo", "link": "https://stackoverflow.com/users/3689166/limbo"}, "edited": false, "score": 0, "creation_date": 1467244651, "post_id": 38111789, "comment_id": 63657379, "body": "@limbo I think it&#39;s not a duplicated question, I&#39;m talking about Eve&#39;s syntax for filtering results through query string parameters."}, {"owner": {"reputation": 3429, "user_id": 724239, "user_type": "registered", "accept_rate": 74, "profile_image": "https://graph.facebook.com/553825011/picture?type=large", "display_name": "PachinSV", "link": "https://stackoverflow.com/users/724239/pachinsv"}, "reply_to_user": {"reputation": 644, "user_id": 3689166, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8148710486ab58ba20f23d4d6d736ae5?s=128&d=identicon&r=PG&f=1", "display_name": "limbo", "link": "https://stackoverflow.com/users/3689166/limbo"}, "edited": false, "score": 0, "creation_date": 1467245128, "post_id": 38111789, "comment_id": 63657506, "body": "@limbo have you used Eve ?"}, {"owner": {"reputation": 644, "user_id": 3689166, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8148710486ab58ba20f23d4d6d736ae5?s=128&d=identicon&r=PG&f=1", "display_name": "limbo", "link": "https://stackoverflow.com/users/3689166/limbo"}, "edited": false, "score": 0, "creation_date": 1467245520, "post_id": 38111789, "comment_id": 63657609, "body": "my bad, didn&#39;t use it, I should have looked into it a bit more. Guess I wasted a flag."}, {"owner": {"reputation": 3429, "user_id": 724239, "user_type": "registered", "accept_rate": 74, "profile_image": "https://graph.facebook.com/553825011/picture?type=large", "display_name": "PachinSV", "link": "https://stackoverflow.com/users/724239/pachinsv"}, "reply_to_user": {"reputation": 644, "user_id": 3689166, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8148710486ab58ba20f23d4d6d736ae5?s=128&d=identicon&r=PG&f=1", "display_name": "limbo", "link": "https://stackoverflow.com/users/3689166/limbo"}, "edited": false, "score": 0, "creation_date": 1467245882, "post_id": 38111789, "comment_id": 63657700, "body": "@limbo this I wha&#39;t I&#39;m trying to do but with 2 &quot;where  clauses&quot; or an &quot;AND&quot; <a href=\"http://python-eve.org/features.html#filtering\" rel=\"nofollow noreferrer\">python-eve.org/features.html#filtering</a>, look at &quot;native python syntax&quot;"}, {"owner": {"reputation": 644, "user_id": 3689166, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8148710486ab58ba20f23d4d6d736ae5?s=128&d=identicon&r=PG&f=1", "display_name": "limbo", "link": "https://stackoverflow.com/users/3689166/limbo"}, "edited": false, "score": 0, "creation_date": 1467247329, "post_id": 38111789, "comment_id": 63658009, "body": "I see now, what do you get with your current syntax, do you get the first filter working? Does it just ignore the part after the and?"}, {"owner": {"reputation": 644, "user_id": 3689166, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8148710486ab58ba20f23d4d6d736ae5?s=128&d=identicon&r=PG&f=1", "display_name": "limbo", "link": "https://stackoverflow.com/users/3689166/limbo"}, "edited": false, "score": 0, "creation_date": 1467247367, "post_id": 38111789, "comment_id": 63658019, "body": "can you try using                                                           <code>http:&#47;&#47;localhost:5000&#47;regions?where=name==&quot;El Salvador&quot;&amp;lang==&quot;es&quot;</code>"}, {"owner": {"reputation": 3429, "user_id": 724239, "user_type": "registered", "accept_rate": 74, "profile_image": "https://graph.facebook.com/553825011/picture?type=large", "display_name": "PachinSV", "link": "https://stackoverflow.com/users/724239/pachinsv"}, "reply_to_user": {"reputation": 644, "user_id": 3689166, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8148710486ab58ba20f23d4d6d736ae5?s=128&d=identicon&r=PG&f=1", "display_name": "limbo", "link": "https://stackoverflow.com/users/3689166/limbo"}, "edited": false, "score": 0, "creation_date": 1467247531, "post_id": 38111789, "comment_id": 63658071, "body": "Thanks @limbo I tried that URL but the seconde parameter (and) is ignored, I get all results for name==&quot;El Salvador&quot; but with all the languages available (en, es, pt)"}], "answers": [{"comments": [{"owner": {"reputation": 3429, "user_id": 724239, "user_type": "registered", "accept_rate": 74, "profile_image": "https://graph.facebook.com/553825011/picture?type=large", "display_name": "PachinSV", "link": "https://stackoverflow.com/users/724239/pachinsv"}, "edited": false, "score": 0, "creation_date": 1467244424, "post_id": 38111870, "comment_id": 63657319, "body": "I test it, but it doesn&#39;t work.... in a matter of fact it does not apply any of the filters :("}, {"owner": {"reputation": 465, "user_id": 6530840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d1682befbed76b1aa21ad1f4192e31e?s=128&d=identicon&r=PG", "display_name": "Alastair", "link": "https://stackoverflow.com/users/6530840/alastair"}, "reply_to_user": {"reputation": 3429, "user_id": 724239, "user_type": "registered", "accept_rate": 74, "profile_image": "https://graph.facebook.com/553825011/picture?type=large", "display_name": "PachinSV", "link": "https://stackoverflow.com/users/724239/pachinsv"}, "edited": false, "score": 0, "creation_date": 1467244658, "post_id": 38111870, "comment_id": 63657382, "body": "are you using the python requests library like in the link I posted?"}], "tags": [], "owner": {"reputation": 465, "user_id": 6530840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d1682befbed76b1aa21ad1f4192e31e?s=128&d=identicon&r=PG", "display_name": "Alastair", "link": "https://stackoverflow.com/users/6530840/alastair"}, "is_accepted": false, "score": 1, "last_activity_date": 1467244240, "last_edit_date": 1495542273, "creation_date": 1467244240, "answer_id": 38111870, "question_id": 38111789, "link": "https://stackoverflow.com/questions/38111789/multiple-where-clauses-in-endpoint-query-string-parameters/38111870#38111870", "title": "Multiple &quot;where clauses&quot; in endpoint query string parameters", "body": "<p><a href=\"https://stackoverflow.com/questions/22974772/querystring-array-parameters-in-python-using-requests\">Querystring Array Parameters in Python using Requests</a> \n<br>Looks like what you are after. The where clause is not necessary if you are using the '&amp;' syntax so your clause should look something like this </p>\n\n<pre><code>http://localhost:5000/regions?name=='El Salvador'&amp;lang=='es'\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3429, "user_id": 724239, "user_type": "registered", "accept_rate": 74, "profile_image": "https://graph.facebook.com/553825011/picture?type=large", "display_name": "PachinSV", "link": "https://stackoverflow.com/users/724239/pachinsv"}, "edited": false, "score": 0, "creation_date": 1467248630, "post_id": 38112365, "comment_id": 63658302, "body": "Yes, using MongoDB syntax works fine, I&#39;m trying to do it using python syntax :)"}, {"owner": {"reputation": 1466, "user_id": 4950452, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/34c45d319ceb8a68f08256db8a1f77a1?s=128&d=identicon&r=PG", "display_name": "gcw", "link": "https://stackoverflow.com/users/4950452/gcw"}, "reply_to_user": {"reputation": 3429, "user_id": 724239, "user_type": "registered", "accept_rate": 74, "profile_image": "https://graph.facebook.com/553825011/picture?type=large", "display_name": "PachinSV", "link": "https://stackoverflow.com/users/724239/pachinsv"}, "edited": false, "score": 0, "creation_date": 1467249874, "post_id": 38112365, "comment_id": 63658558, "body": "@PachinSV I have updated the answer to use python syntax."}, {"owner": {"reputation": 3429, "user_id": 724239, "user_type": "registered", "accept_rate": 74, "profile_image": "https://graph.facebook.com/553825011/picture?type=large", "display_name": "PachinSV", "link": "https://stackoverflow.com/users/724239/pachinsv"}, "edited": false, "score": 0, "creation_date": 1467256728, "post_id": 38112365, "comment_id": 63660098, "body": "It worked using spaces <a href=\"http://localhost:5000/regions?where=name==&quot;El\" rel=\"nofollow noreferrer\">localhost:5000/regions?where=name==&quot;El</a> Salvador&quot; and lang==&quot;en&quot;, you could update your answer to clarify that (you can use spaces or the html entity for a space %20)"}, {"owner": {"reputation": 1466, "user_id": 4950452, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/34c45d319ceb8a68f08256db8a1f77a1?s=128&d=identicon&r=PG", "display_name": "gcw", "link": "https://stackoverflow.com/users/4950452/gcw"}, "reply_to_user": {"reputation": 3429, "user_id": 724239, "user_type": "registered", "accept_rate": 74, "profile_image": "https://graph.facebook.com/553825011/picture?type=large", "display_name": "PachinSV", "link": "https://stackoverflow.com/users/724239/pachinsv"}, "edited": false, "score": 1, "creation_date": 1467279913, "post_id": 38112365, "comment_id": 63670958, "body": "Sure @PachinSV , just did that."}], "tags": [], "owner": {"reputation": 1466, "user_id": 4950452, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/34c45d319ceb8a68f08256db8a1f77a1?s=128&d=identicon&r=PG", "display_name": "gcw", "link": "https://stackoverflow.com/users/4950452/gcw"}, "is_accepted": true, "score": 5, "last_activity_date": 1467279868, "last_edit_date": 1467279868, "creation_date": 1467248501, "answer_id": 38112365, "question_id": 38111789, "link": "https://stackoverflow.com/questions/38111789/multiple-where-clauses-in-endpoint-query-string-parameters/38112365#38112365", "title": "Multiple &quot;where clauses&quot; in endpoint query string parameters", "body": "<p>Have you tried <code>http://localhost:5000/regions?where=name==\"El Salvador\"%20and%20lang==\"es\"</code>?</p>\n\n<p>You can replace <code>%20</code> for <code>space</code> in the <code>URL</code> if it doesn't work. In my postman environment works both ways.</p>\n\n<p>Seems to work like the <code>AND</code> you want. The <a href=\"http://python-eve.org/features.html#filtering\" rel=\"nofollow\">documentation</a> mentions it, but it misses an example I think. Mind the correct position for double quotes.</p>\n"}], "owner": {"reputation": 3429, "user_id": 724239, "user_type": "registered", "accept_rate": 74, "profile_image": "https://graph.facebook.com/553825011/picture?type=large", "display_name": "PachinSV", "link": "https://stackoverflow.com/users/724239/pachinsv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1513, "favorite_count": 1, "accepted_answer_id": 38112365, "answer_count": 2, "score": 5, "last_activity_date": 1467279868, "creation_date": 1467243668, "last_edit_date": 1467253696, "question_id": 38111789, "link": "https://stackoverflow.com/questions/38111789/multiple-where-clauses-in-endpoint-query-string-parameters", "title": "Multiple &quot;where clauses&quot; in endpoint query string parameters", "body": "<p>Can I include multiple \"where\" clauses (or an AND operator) in an endpoint query string? I'd like to do something like this:</p>\n\n<pre><code>http://localhost:5000/regions?where=name==\"El Salvador\"&amp;where=lang==\"es\"\n</code></pre>\n\n<p>I've tried few different syntaxes, but I can't get it to work.</p>\n\n<p>Is this possible? I know I can do it using MongoDB syntax, but I would like to use Python syntax.</p>\n\n<p>Note: I'm not trying to concatenate an list of parameteres using python, I'm trying to use <a href=\"http://python-eve.org/features.html#filtering\" rel=\"nofollow\">Eve's filtering feature</a> using native python syntax.</p>\n"}, {"tags": ["python", "graph", "neo4j", "pycharm", "ram"], "comments": [{"owner": {"reputation": 7732, "user_id": 2954199, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98eb7858bb6265f6f15308c89862104d?s=128&d=identicon&r=PG", "display_name": "William Lyon", "link": "https://stackoverflow.com/users/2954199/william-lyon"}, "edited": false, "score": 0, "creation_date": 1467254115, "post_id": 38111769, "comment_id": 63659513, "body": "Can you share the python code?"}, {"owner": {"reputation": 555, "user_id": 5200872, "user_type": "registered", "accept_rate": 81, "profile_image": "https://lh6.googleusercontent.com/-pR1xZ8K8_SI/AAAAAAAAAAI/AAAAAAAAAGE/sswvwzQjQgs/photo.jpg?sz=128", "display_name": "Goofball", "link": "https://stackoverflow.com/users/5200872/goofball"}, "reply_to_user": {"reputation": 7732, "user_id": 2954199, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98eb7858bb6265f6f15308c89862104d?s=128&d=identicon&r=PG", "display_name": "William Lyon", "link": "https://stackoverflow.com/users/2954199/william-lyon"}, "edited": false, "score": 0, "creation_date": 1467266392, "post_id": 38111769, "comment_id": 63663043, "body": "William, I added a simple example in the question. That shows what causes the problem. It is transaction related I believe. i must be doing something wrong there."}, {"owner": {"reputation": 39550, "user_id": 728812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f522bc835d745f319a9567d63f5c0cc9?s=128&d=identicon&r=PG", "display_name": "Michael Hunger", "link": "https://stackoverflow.com/users/728812/michael-hunger"}, "edited": false, "score": 0, "creation_date": 1467277450, "post_id": 38111769, "comment_id": 63669199, "body": "Btw. on your setting a page-cache of 250M or at most 1G should be good enough. It seems to be something about the tx/session mgmt of the  python driver. Which version do you use?"}, {"owner": {"reputation": 555, "user_id": 5200872, "user_type": "registered", "accept_rate": 81, "profile_image": "https://lh6.googleusercontent.com/-pR1xZ8K8_SI/AAAAAAAAAAI/AAAAAAAAAGE/sswvwzQjQgs/photo.jpg?sz=128", "display_name": "Goofball", "link": "https://stackoverflow.com/users/5200872/goofball"}, "edited": false, "score": 0, "creation_date": 1467302361, "post_id": 38111769, "comment_id": 63687526, "body": "For my Pycharm Project the python interpreter used is 3.4.3 and the neo4j-driver is version 1.0.1"}, {"owner": {"reputation": 555, "user_id": 5200872, "user_type": "registered", "accept_rate": 81, "profile_image": "https://lh6.googleusercontent.com/-pR1xZ8K8_SI/AAAAAAAAAAI/AAAAAAAAAGE/sswvwzQjQgs/photo.jpg?sz=128", "display_name": "Goofball", "link": "https://stackoverflow.com/users/5200872/goofball"}, "edited": false, "score": 0, "creation_date": 1467338760, "post_id": 38111769, "comment_id": 63702786, "body": "when I populate the transaction block using the py2neo and append commands then I have speedy execution and I do not have the RAM issue. I tried it with the example and also with my much more complex python code. Py2neo works fine and allows me to create hundreds of thousands of nodes but the module neo4j.v1 blows up the memory. A neo4j.v1 bug???"}, {"owner": {"reputation": 830, "user_id": 3454650, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6ccec193e74c155b5575cf893799e694?s=128&d=identicon&r=PG&f=1", "display_name": "spanishgum", "link": "https://stackoverflow.com/users/3454650/spanishgum"}, "edited": false, "score": 0, "creation_date": 1469219768, "post_id": 38111769, "comment_id": 64463534, "body": "Did you find any resolution to this? I am experiencing similar behavior in my application during bulk processing. I am not using the transaction method however. (I simply call <code>session.run(a_statement)</code> over and over before calling <code>session.close()</code> at the end.) Since my bulk processing method does this ~58 million times, my memory usage explodes. It seems like every transaction / statement is saved, and actually committed during `session.close()&#39;. I would expect your transaction method here to mitigate this, but it seems that it doesn&#39;t."}, {"owner": {"reputation": 555, "user_id": 5200872, "user_type": "registered", "accept_rate": 81, "profile_image": "https://lh6.googleusercontent.com/-pR1xZ8K8_SI/AAAAAAAAAAI/AAAAAAAAAGE/sswvwzQjQgs/photo.jpg?sz=128", "display_name": "Goofball", "link": "https://stackoverflow.com/users/5200872/goofball"}, "edited": false, "score": 1, "creation_date": 1469235378, "post_id": 38111769, "comment_id": 64467621, "body": "I actually switched back to the py2neo package for the bulk transaction processing and that worked fine without overloading my memory. I believe there must be a problem with the neo4j.v1 package and memory management."}, {"owner": {"reputation": 4347, "user_id": 2455626, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/XaHH5.png?s=128&g=1", "display_name": "Avihoo Mamka", "link": "https://stackoverflow.com/users/2455626/avihoo-mamka"}, "edited": false, "score": 0, "creation_date": 1489163263, "post_id": 38111769, "comment_id": 72566111, "body": "@GoofyGert I suggest you post your replacement as answer, it helped me, but only because I kept on reading all the comments."}], "answers": [{"tags": [], "owner": {"reputation": 555, "user_id": 5200872, "user_type": "registered", "accept_rate": 81, "profile_image": "https://lh6.googleusercontent.com/-pR1xZ8K8_SI/AAAAAAAAAAI/AAAAAAAAAGE/sswvwzQjQgs/photo.jpg?sz=128", "display_name": "Goofball", "link": "https://stackoverflow.com/users/5200872/goofball"}, "is_accepted": false, "score": 0, "last_activity_date": 1489184345, "creation_date": 1489184345, "answer_id": 42728666, "question_id": 38111769, "link": "https://stackoverflow.com/questions/38111769/neo4j-server-becomes-very-slow-when-creating-nodes-and-relations/42728666#42728666", "title": "neo4j server becomes very slow when creating nodes and relations", "body": "<p>What I first did: I actually switched back to the py2neo package for the bulk transaction processing and that worked fine without overloading my memory. I believe there must be a problem with the neo4j.v1 package and memory management.</p>\n\n<p>Later on: I used a later version of the neo4j package and that did not have the issue anymore. It must have been a bug in the earlier version.</p>\n"}], "owner": {"reputation": 555, "user_id": 5200872, "user_type": "registered", "accept_rate": 81, "profile_image": "https://lh6.googleusercontent.com/-pR1xZ8K8_SI/AAAAAAAAAAI/AAAAAAAAAGE/sswvwzQjQgs/photo.jpg?sz=128", "display_name": "Goofball", "link": "https://stackoverflow.com/users/5200872/goofball"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 692, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1489184345, "creation_date": 1467243540, "last_edit_date": 1467266309, "question_id": 38111769, "link": "https://stackoverflow.com/questions/38111769/neo4j-server-becomes-very-slow-when-creating-nodes-and-relations", "title": "neo4j server becomes very slow when creating nodes and relations", "body": "<p>For testing purposes, I'm using a Windows 7 laptop with the following specs: <a href=\"https://i.stack.imgur.com/hMnq9.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hMnq9.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>I also use neo4j-enterprise-3.0.2 and connect my Pycharm python program to the database using the BOLT connection. I create many nodes and relations. I noticed that the creation of nodes and relations slows down tremendously after a certain time and almost does not progress after a certain point.</p>\n\n<p>I checked the following</p>\n\n<ul>\n<li>I use unique constraints on nodes and properties so that schema-indexing is available to easily find nodes in the database</li>\n<li>I noticed that my RAM memory keeps increasing while all these transactions take place. I used different setting in the neo4j config file for dbms.memory.pagecache.size  (default, 2g, 3g, 10g) and They all cause my RAM to increase from around 4GB (no python code running) up to 7GB and above. That's when the creation of nodes get very slow. When stopping the program, the RAM usage drops again.</li>\n</ul>\n\n<p><a href=\"https://i.stack.imgur.com/YHsXp.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/YHsXp.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>This is what the health monitor shows me:</p>\n\n<p><a href=\"https://i.stack.imgur.com/My1Mq.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/My1Mq.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>Question: why does the creation of nodes and relations slows down so much? Is it due to the graph size (but the data set seems rather small for that)? Is it related to the BOLT connections and transactions to the database? Is it related to the increased RAM usage? How can this be prevented?</p>\n\n<p>I created this simple example to show the problem:</p>\n\n<pre><code>from neo4j.v1 import GraphDatabase\n\n#BOLT driver\ndriver = GraphDatabase.driver(\"bolt://localhost\")\nsession = driver.session()\n\n#start with empty database\nstmtDel = \"MATCH (n) OPTIONAL MATCH (n)-[r]-() DELETE n,r\"\nsession.run(stmtDel)\n\n#Add uniqueness constraint\nstmt = 'CREATE CONSTRAINT ON (d:Day) ASSERT d.name IS UNIQUE'\nsession.run(stmt)\n\n# Create many nodes - run either option 1 or option 2\n# # Option 1: Creates a node one by one. This is slow in execution and keeps the RAM flat (no increase)\n# for i in range(1,80001):\n#     stmt1 = 'CREATE (d:Day) SET d.name = {name}'\n#     dict = {\"name\": str(i)}\n#     print(i)\n#     session.run(stmt1,dict)\n\n#Option 2: Increase the speed and submit multiple transactions at the same time - e.g.1000\n# This is very fast but blows up the RAM memory in no time, even with a limit on the page cache of 2GB\ntx = session.begin_transaction()\nfor i in range(1, 80001):\n    stmt1 = 'CREATE (d:Day) SET d.name = {name}'\n    dict = {\"name\": str(i)}\n    tx.run(stmt1, dict) # append a transaction to the block\n    print(i)\n    if divmod(i,1000)[1] == 0:   #every one thousand transactions submit the block and creat an new transaction block\n        tx.commit()\n        tx.close\n        tx = session.begin_transaction()  #it seems that recycling the session keeps on growing the RAM.\n</code></pre>\n"}, {"tags": ["python", "statistics", "distribution"], "answers": [{"comments": [{"owner": {"reputation": 1519, "user_id": 402866, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7c495a2ca4e89d759873a273692c7543?s=128&d=identicon&r=PG", "display_name": "Scholle", "link": "https://stackoverflow.com/users/402866/scholle"}, "edited": false, "score": 0, "creation_date": 1467364585, "post_id": 38133366, "comment_id": 63712916, "body": "Looks promising! Where to set the upper/lower bound in the online calculator? Regarding the calculation of the difference to get the inverse of the integral: You probably mean calculating the integral A from -1 to 1 and B from -1 to o (o=the variable of some value between -1 and 1), then the inverse C is C=A-B. Do u know any python lib coz I need to do this programatically."}, {"owner": {"reputation": 1519, "user_id": 402866, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7c495a2ca4e89d759873a273692c7543?s=128&d=identicon&r=PG", "display_name": "Scholle", "link": "https://stackoverflow.com/users/402866/scholle"}, "edited": false, "score": 0, "creation_date": 1467626029, "post_id": 38133366, "comment_id": 63789684, "body": "How is variable &quot;rn&quot; defined? I tested your code. It executes for x&gt;=0, but throws a ValueError if x&lt;0; e.g. assume p=0.25 (p is in [0,1]) and x=-0.5, which is a valid value due to scaling in step 2 of the preprocessing step."}, {"owner": {"reputation": 15136, "user_id": 4044696, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/54xyv.jpg?s=128&g=1", "display_name": "Severin Pappadeux", "link": "https://stackoverflow.com/users/4044696/severin-pappadeux"}, "reply_to_user": {"reputation": 1519, "user_id": 402866, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7c495a2ca4e89d759873a273692c7543?s=128&d=identicon&r=PG", "display_name": "Scholle", "link": "https://stackoverflow.com/users/402866/scholle"}, "edited": false, "score": 0, "creation_date": 1468459173, "post_id": 38133366, "comment_id": 64140332, "body": "@Scholle ok, updated the code, and tested it, works for me. It plots PDF, CDF, and inverse CDF. Was on vacation, so ..."}], "tags": [], "owner": {"reputation": 15136, "user_id": 4044696, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/54xyv.jpg?s=128&g=1", "display_name": "Severin Pappadeux", "link": "https://stackoverflow.com/users/4044696/severin-pappadeux"}, "is_accepted": true, "score": 1, "last_activity_date": 1468459175, "last_edit_date": 1495540295, "creation_date": 1467321197, "answer_id": 38133366, "question_id": 38111766, "link": "https://stackoverflow.com/questions/38111766/how-to-implement-the-inverse-of-the-integrated-chi2-function/38133366#38133366", "title": "How to implement the inverse of the integrated Chi^2 function?", "body": "<p>If you mean X<sup>2</sup> distribution with PDF as described <a href=\"https://en.wikipedia.org/wiki/Chi-squared_distribution\" rel=\"nofollow noreferrer\">here</a>, then what you're looking is X<sup>2</sup> CDF. It is expressed via incomplete Gamma function, see same reference, and you could use SciPy to compute it, <a href=\"http://docs.scipy.org/doc/scipy-0.14.0/reference/generated/scipy.special.gammaincinv.html#scipy.special.gammaincinv\" rel=\"nofollow noreferrer\">this</a> or <a href=\"http://docs.scipy.org/doc/scipy-0.14.0/reference/generated/scipy.special.gammaincc.html#scipy.special.gammaincc\" rel=\"nofollow noreferrer\">that</a> should fit the bill. Don't forget full Gamma-function in denominator.</p>\n\n<p>To find inverse of the incomplete Gamma, you could look at inverse functions from SciPy: <a href=\"http://docs.scipy.org/doc/scipy-0.14.0/reference/generated/scipy.special.gammaincinv.html#scipy.special.gammaincinv\" rel=\"nofollow noreferrer\">this</a> or <a href=\"http://docs.scipy.org/doc/scipy-0.14.0/reference/generated/scipy.special.gammainccinv.html#scipy.special.gammainccinv\" rel=\"nofollow noreferrer\">that</a>.</p>\n\n<p>Therefore, I don't believe you'll need all this interpolation stuff</p>\n\n<p>UPDATE</p>\n\n<p>That expression could be computed analytically, say, using online integrator\nlike <a href=\"http://integrals.wolfram.com/index.jsp?expr=p*%281-x%29%5E2%2B%281-p%29*%28%28-1%29-x%29%5E2\" rel=\"nofollow noreferrer\">that</a>. Just calculate the difference between resulat at upper bound and result at lower bound and you're set</p>\n\n<p>UPDATE II</p>\n\n<p>You have to set intervals yourself</p>\n\n<p>Below is (absolutely untested!) code you may try to use. Note, I use generic\nroot finding routine, though because integral is a polynomial, more optimal way might\nbe to use polynomial roots from <a href=\"http://docs.scipy.org/doc/numpy/reference/generated/numpy.roots.html\" rel=\"nofollow noreferrer\">here</a>, or even\ncode it yourself - it is just a <a href=\"https://stackoverflow.com/questions/1829330/solving-a-cubic-equation\">cubic equation</a></p>\n\n<pre><code>def intgrl(x):\n    return x*(x*(3.0 + x - 6.0*p) + 3.0)/3.0\n\ndef CDF(x, norm):\n    return (intgrl(x) - intgrl(-1.0))/norm\n\ndef f(x, norm, rn):\n    return CDF(x, norm) - rn\n\nnorm = intgrl(1.0) - intgrl(-1.0)\n\nrn = 0.12345\nres = scipy.optimize.brentq(f, -1.0, 1.0, args=(norm, rn))\n</code></pre>\n\n<p>UPDATE III</p>\n\n<p>Variable <code>rn</code> was defined to be some (random U(0,1)) number from 0 to 1.</p>\n\n<pre><code>from scipy.optimize import brentq\nimport numpy as np\nimport matplotlib.pyplot as plt\n\ndef denormPDF(x, p):\n    return p*(1.0-x)**2 + (1.0-p)*((-1.0)-x)**2\n\ndef intgrl(x, p):\n    return x*(x*(3.0 + x - 6.0*p) + 3.0)/3.0\n\ndef CDF(x, p, norm):\n    return (intgrl(x, p) - intgrl(-1.0, p))/norm\n\ndef PDF(x, p, norm):\n    return denormPDF(x, p)/norm\n\ndef f(x, p, norm, rn):\n    return CDF(x, p, norm) - rn\n\np = 0.25\n\nnorm = intgrl(1.0, p) - intgrl(-1.0, p)\n\nx = np.linspace(-1.0, 1.0, 100)\ny = [PDF(x, p, norm) for x in x]\nz = [CDF(x, p, norm) for x in x]\n\n# plot PDF\nplt.plot(x, y)\nplt.show()\n\n# plot CDF\nplt.plot(x, z)\nplt.show()\n\nrn   = np.linspace(0.000001, 1.0-0.000001, 50)\niCDF = [brentq(f, -1.0, 1.0, args=(p, norm, rn)) for rn in rn]\n\n# plot inverse CDF\nplt.plot(rn, iCDF)\nplt.show()\n</code></pre>\n"}], "owner": {"reputation": 1519, "user_id": 402866, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7c495a2ca4e89d759873a273692c7543?s=128&d=identicon&r=PG", "display_name": "Scholle", "link": "https://stackoverflow.com/users/402866/scholle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 517, "favorite_count": 0, "accepted_answer_id": 38133366, "answer_count": 1, "score": 0, "last_activity_date": 1468459175, "creation_date": 1467243513, "last_edit_date": 1467624674, "question_id": 38111766, "link": "https://stackoverflow.com/questions/38111766/how-to-implement-the-inverse-of-the-integrated-chi2-function", "title": "How to implement the inverse of the integrated Chi^2 function?", "body": "<p>I am implementing some preprocessing of variables in the context of a paper called <a href=\"https://arxiv.org/abs/physics/0402093\" rel=\"nofollow\">A Neural Bayesian Estimator for Conditional Probability Densities</a>.</p>\n\n<p>It states: \n1.) Given a non-linear, a monotonous variable transformation F:t->s such that s is distributed uniformly is applied. This can be achieved as mentioned in the paper by:</p>\n\n<pre><code>&gt;&gt;&gt; sorting the target vector in ascending order\n&gt;&gt;&gt; fitting the spline to data, e.g. using interpolate from scipy\n</code></pre>\n\n<p>2.) Afterwards s is scaled to lie between -1 and 1. This can be achieved with <code>interp</code>:</p>\n\n<pre><code>&gt;&gt;&gt; from numpy import interp\n&gt;&gt;&gt; interp(256,[1,512],[5,10])\n</code></pre>\n\n<p>3.) Finally, the flat distributions need to be converted into Gaussian distributions, centered at zero with std 1. </p>\n\n<p>While the first two steps are clear on how to implement, I am struggling with the third one.</p>\n\n<p>Regarding 3.), the author further states that the inverse of the integrated X^2 (X...chi) function may be used. Are there any libraries, preferably Python, suitable for this job?</p>\n\n<p><strong>Update 1:</strong></p>\n\n<p>After reading the paper again, it seems that X^2 doesn't directly relate to chi, but is rather calculated as follows:</p>\n\n<p>X^2 = P*(1-o)^2+(1-P)*((-1)-o)^2</p>\n\n<p>with <code>P</code> as the purity (can be computed easily given some variable) and <code>o</code> the variable itself.</p>\n\n<p>For a given s scaled to lie between -1 and 1, I may just calculated the integral with lower bound=-1 and upper bound=s and then getting the inverse of it.</p>\n\n<p>Question: How to do this numerically?</p>\n"}, {"tags": ["python", "html", "css"], "answers": [{"tags": [], "owner": {"reputation": 4069, "user_id": 3413239, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/hM6rq.jpg?s=128&g=1", "display_name": "pg2455", "link": "https://stackoverflow.com/users/3413239/pg2455"}, "is_accepted": false, "score": 1, "last_activity_date": 1478622066, "creation_date": 1478622066, "answer_id": 40491785, "question_id": 38111725, "link": "https://stackoverflow.com/questions/38111725/conditionally-apply-in-line-style-format-to-html-table-with-python/40491785#40491785", "title": "Conditionally Apply In-Line Style Format to HTML Table with Python", "body": "<p>With the current development in pandas there is a functionality to modify the <code>style</code> of dataframe before converting it to HTML. </p>\n\n<p>Simple solution is to define a function and pass it as a parameter to the <code>apply</code> function of <code>style</code>.</p>\n\n<p>Here is an example:</p>\n\n<pre><code>def f(val):\n   # @params: val is the entire column if axis is 0\n   # @returns: css style attributes based on the cell value\n   return ['color: red' if x &lt; 0 else 'color: blue' for x in val]\n\nhtml_style = df.style.apply(f, axis = 0, subset = ['column_name']) # this will apply the css style to td of that column\n\n # above only returns Styler object so you need to convert it to string to render it\nhtml_style.render() # this does the job\n</code></pre>\n\n<p>You can read more about it here: <a href=\"http://pandas.pydata.org/pandas-docs/stable/style.html#Building-Styles\" rel=\"nofollow noreferrer\">http://pandas.pydata.org/pandas-docs/stable/style.html#Building-Styles</a></p>\n"}], "owner": {"reputation": 5299, "user_id": 1708772, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/edfa95d36c2a3b071607604d1f2d4c5c?s=128&d=identicon&r=PG", "display_name": "brno792", "link": "https://stackoverflow.com/users/1708772/brno792"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2981, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1478622066, "creation_date": 1467243185, "question_id": 38111725, "link": "https://stackoverflow.com/questions/38111725/conditionally-apply-in-line-style-format-to-html-table-with-python", "title": "Conditionally Apply In-Line Style Format to HTML Table with Python", "body": "<p>I'm embedding a dataframe into an email's body as an html table. I want to conditionally format the cell colors and text colors based on the values in each cell.</p>\n\n<p>I first read in some data from an example csv file and format it as an html table using the <code>pandas</code> <code>to_html()</code> method:</p>\n\n<pre><code>df = pd.read_csv('example.csv')\ntable = df.to_html()\n</code></pre>\n\n<p>Now I create some basic html with <code>&lt;style&gt;</code> tags for the message body and insert the <code>table</code> html code into a <code>&lt;div&gt;</code> in the body of the <code>msg</code> string as follows:</p>\n\n<pre><code>msg = \"\"\"&lt;html&gt;\n        &lt;style type = \"text/css\"&gt;\n            table, th, td { border: 1px solid black; }\n        &lt;/style&gt;\n        &lt;head&gt;&lt;/head&gt;\n        &lt;body&gt;\n            &lt;p&gt;some text&lt;/p&gt;\n            &lt;div&gt; %s &lt;/div&gt;\n        &lt;/body\n    &lt;/html&gt;\"\"\" % (table)\n</code></pre>\n\n<p>I then convert the <code>&lt;style&gt;</code> css code to in-line styling using the <code>premailer</code> python module as such:</p>\n\n<pre><code>from premailer import transform\nresult = transform(msg)\n</code></pre>\n\n<p>Now <code>result</code> is a string of html with a table that has in-line styling like <code>&lt;table border=\"1\" class=\"dataframe\" style=\"border:1px solid black\"&gt;</code></p>\n\n<p>I embed the resulting html in the email with:</p>\n\n<pre><code>msg_body = MIMEText(result, 'html')\nmsg.attach(msg_body)\n</code></pre>\n\n<p>This all works great.</p>\n\n<p>Now I need to conditionally format the cell colors and font colors based on the values in each cell.</p>\n\n<p>How can I best do this?\nWas thinking some function such as:</p>\n\n<pre><code>def styleTable(x):\n  if x &lt; 0:\n    return 'background-color: red'\n  else\n    return ''\n</code></pre>\n\n<p>But how can I apply this to my html string? Or do I need to do something different up-stream?</p>\n\n<p>Again, this will be embedded in an email so cannot have Javascript or CSS code in it. Thanks</p>\n"}, {"tags": ["python", "matplotlib"], "comments": [{"owner": {"reputation": 164, "user_id": 5574172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fa159224bdd7aca4bec26d7dc510bc3?s=128&d=identicon&r=PG&f=1", "display_name": "Blue_vision", "link": "https://stackoverflow.com/users/5574172/blue-vision"}, "edited": false, "score": 0, "creation_date": 1467244046, "post_id": 38111724, "comment_id": 63657217, "body": "Could you give a little more information on what <code>X</code>, <code>y</code>, and <code>func</code> are? I&#39;m not able to reproduce the error you showed.  Just a thought, if the code you are running has a typo and is instead <code>for ax, _x in zip(X, axes)</code>, that would reproduce the error (and be a typo I could totally see myself making.)"}], "answers": [{"tags": [], "owner": {"reputation": 49128, "user_id": 588071, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0e0397d27c84e04451691ddb6c8d49c?s=128&d=identicon&r=PG&f=1", "display_name": "tmdavison", "link": "https://stackoverflow.com/users/588071/tmdavison"}, "is_accepted": true, "score": 6, "last_activity_date": 1467248219, "last_edit_date": 1467248219, "creation_date": 1467247912, "answer_id": 38112294, "question_id": 38111724, "link": "https://stackoverflow.com/questions/38111724/attributeerror-numpy-ndarray-object-has-no-attribute-plot/38112294#38112294", "title": "AttributeError: &#39;numpy.ndarray&#39; object has no attribute &#39;plot&#39;", "body": "<p>If <code>len(X)</code> is >1, <code>axes</code> will be a 2D array of <code>AxesSubplot</code> instances. So when you loop over <code>axes</code>, you actually get a slice along one dimension of the <code>axes</code> array.</p>\n\n<p>To overcome this, you could use <code>axes.flat</code>:</p>\n\n<pre><code>for ax,_x in zip(axes.flat,X):\n</code></pre>\n\n<p>Also if you are trying to plot all these on one figure, you don't need to call <code>plt.subplots</code> twice, as that will create two figures.</p>\n\n<p>It may be easier to index the <code>axes</code> array like this:</p>\n\n<pre><code>yy = func(*X)\n\nfig, axes = plt.subplots(2, len(X))\n\nfor i,_x in enumerate(X):\n    axes[0, i].plot(_x, y, 'b.')\n    axes[0, i].plot(_x, yy, 'r.')\n\n    axes[1, i].plot(_x, yy/y-1, 'r.')\n\nplt.show()\n</code></pre>\n"}], "owner": {"reputation": 3024, "user_id": 3154996, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2031da3bb3fc999ec22e677995debd7b?s=128&d=identicon&r=PG&f=1", "display_name": "Elliot Gorokhovsky", "link": "https://stackoverflow.com/users/3154996/elliot-gorokhovsky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 22784, "favorite_count": 0, "accepted_answer_id": 38112294, "answer_count": 1, "score": 1, "last_activity_date": 1467248219, "creation_date": 1467243161, "question_id": 38111724, "link": "https://stackoverflow.com/questions/38111724/attributeerror-numpy-ndarray-object-has-no-attribute-plot", "title": "AttributeError: &#39;numpy.ndarray&#39; object has no attribute &#39;plot&#39;", "body": "<p>Why is this matplotlib code giving me a weird exception? I'm going for two rows of plots. The top row is supposed to show true vs. pred and the bottom row is supposed to show percent error.</p>\n\n<pre><code>yy = func(*X)\n\nfig, axes = plt.subplots(1, len(X))\nfor ax,_x in zip(axes,X):\n    ax.plot(_x, y, 'b.')\n    ax.plot(_x, yy, 'r.')\n\nfig, axes = plt.subplots(2, len(X))\nfor ax,_x in zip(axes,X):\n    ax.plot(_x, yy/y-1, 'r.')\n\nplt.show()\n</code></pre>\n\n<p>Traceback:</p>\n\n<pre><code>   File \"pysr.py\", line 235, in main\n     ax.plot(_x, yy/y-1, 'r.')\nAttributeError: 'numpy.ndarray' object has no attribute 'plot'\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 4676, "user_id": 30105, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/a1dc4bddf38de8351ae70e98845242e9?s=128&d=identicon&r=PG", "display_name": "PyNEwbie", "link": "https://stackoverflow.com/users/30105/pynewbie"}, "edited": false, "score": 0, "creation_date": 1467244844, "post_id": 38111648, "comment_id": 63657436, "body": "lso please look at this question <a href=\"http://stackoverflow.com/questions/4553129/when-to-use-os-name-sys-platform-or-platform-system\" title=\"when to use os name sys platform or platform system\">stackoverflow.com/questions/4553129/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 52229, "user_id": 2937831, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/56c4053438af8e8b90d6f53cbb7573be?s=128&d=identicon&r=PG", "display_name": "jakevdp", "link": "https://stackoverflow.com/users/2937831/jakevdp"}, "is_accepted": false, "score": 1, "last_activity_date": 1467243659, "last_edit_date": 1495542712, "creation_date": 1467242787, "answer_id": 38111679, "question_id": 38111648, "link": "https://stackoverflow.com/questions/38111648/what-is-sys-platform-used-for-in-python/38111679#38111679", "title": "What is sys.platform used for in python?", "body": "<p><code>sys.platform</code> lets you inspect what operating system/platform the code is running on. This can be very useful, for example, in projects which interface with non-Python aspects of the operating system. There are details about the possible values <a href=\"https://stackoverflow.com/questions/446209/possible-values-from-sys-platform\">here</a>.</p>\n\n<p>Edit: <a href=\"https://github.com/search?utf8=%E2%9C%93&amp;q=sys.platform+in%3Afile+language%3APython&amp;type=Code&amp;ref=searchresults\" rel=\"nofollow noreferrer\">this search</a> shows how people are using <code>sys.platform</code> on github.</p>\n"}], "owner": {"reputation": 17, "user_id": 6468149, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d3d6ead2d40a9a8dd58fa16596b6ff2?s=128&d=identicon&r=PG&f=1", "display_name": "Poly_J", "link": "https://stackoverflow.com/users/6468149/poly-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 630, "favorite_count": 0, "closed_date": 1467582252, "answer_count": 1, "score": 1, "last_activity_date": 1467243659, "creation_date": 1467242534, "question_id": 38111648, "link": "https://stackoverflow.com/questions/38111648/what-is-sys-platform-used-for-in-python", "closed_reason": "Duplicate", "title": "What is sys.platform used for in python?", "body": "<p>I wanted to know what the sys.platform does in python and what it is useful for. What type of projects would i want to use it for?</p>\n"}, {"tags": ["python", "algorithm", "graph-algorithm"], "comments": [{"owner": {"reputation": 3873, "user_id": 2185825, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/NReIt.jpg?s=128&g=1", "display_name": "shole", "link": "https://stackoverflow.com/users/2185825/shole"}, "edited": false, "score": 1, "creation_date": 1467249020, "post_id": 38111632, "comment_id": 63658387, "body": "Isn&#39;t BFS with fixed maximum steps solve your problem?"}], "answers": [{"tags": [], "owner": {"reputation": 316, "user_id": 6343046, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f3f48209610b6ef289c665ce3d38e2b6?s=128&d=identicon&r=PG&f=1", "display_name": "kcborys", "link": "https://stackoverflow.com/users/6343046/kcborys"}, "is_accepted": false, "score": -1, "last_activity_date": 1467248461, "creation_date": 1467248461, "answer_id": 38112362, "question_id": 38111632, "link": "https://stackoverflow.com/questions/38111632/finding-all-combinations-of-paths-from-a-graph-with-a-given-distance-from-the-or/38112362#38112362", "title": "Finding all combinations of paths from a graph with a given distance from the origin", "body": "<p>If you intend to take just one path, then you can try <a href=\"https://en.wikipedia.org/wiki/Dijkstra%27s_algorithm\" rel=\"nofollow\">Dijkstra's Algorithm</a> to get you the distance from the initial node to all other nodes. Then just iterate through them to return the ones with the distance you want.</p>\n\n<p>If you want to try branching paths, this might become more difficult. My instinct is to run Dijkstra's on the other nodes and use some Dynamic Programming, but I'd bet there's an easier way; my computer-science-problem-solving skills are modest.</p>\n"}, {"tags": [], "owner": {"reputation": 47344, "user_id": 47984, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d3149cf105b708746f1c4eb0a63a5c24?s=128&d=identicon&r=PG", "display_name": "j_random_hacker", "link": "https://stackoverflow.com/users/47984/j-random-hacker"}, "is_accepted": false, "score": 0, "last_activity_date": 1467280860, "creation_date": 1467280860, "answer_id": 38119851, "question_id": 38111632, "link": "https://stackoverflow.com/questions/38111632/finding-all-combinations-of-paths-from-a-graph-with-a-given-distance-from-the-or/38119851#38119851", "title": "Finding all combinations of paths from a graph with a given distance from the origin", "body": "<p>IIUC, you have an unweighted directed graph G, and you're looking for the set of all subgraphs H of G that have the following 2 properties:</p>\n\n<ol>\n<li>There is a path from the given origin vertex to every vertex in H (this implies that H itself is at least weakly connected)</li>\n<li>The total number (or weight) of edges is exactly some given k.</li>\n</ol>\n\n<p>There's an easy algorithm for this, where you maintain the set of all subgraphs having total length exactly i, and on each iteration grow them to the set of all subgraphs having total length exactly i+1:</p>\n\n<ol>\n<li>Start with a single subgraph in the set S, consisting of just the origin vertex.</li>\n<li>For i from 0 to k:\n\n<ul>\n<li>Invariant: S contains all subgraphs of G that are weakly connected to the origin and have total length exactly i.</li>\n<li>Set S' = {}.</li>\n<li>For every subgraph H in S:\n\n<ul>\n<li>For every edge (u, v) with u in V(H) and v outside of V(H):\n\n<ul>\n<li>Form a subgraph H' consisting of H, plus the edge (u, v).</li>\n<li>Add H' to the set S'.  (If exactly this graph H' is already in S', do nothing.  This will happen often.  That's why it's best to use a data structure suited to <em>sets</em> for S' that takes care of this automatically, e.g. a hashtable or binary search tree.)</li>\n</ul></li>\n</ul></li>\n<li>Set S = S'.</li>\n</ul></li>\n</ol>\n\n<p>When the algorithm terminates, S will contain all subgraphs meeting requirements 1 and 2 above.  In the worst case it will take m times as long as the number of different subgraphs in the output, where m is the number of edges in the graph.  Note that there could be a large number of subgraphs in the output -- consider the complete graph on n vertices, and note that there are <em>many</em> more possible subgraphs than there are combinations of k items from n, and the latter is already big.</p>\n"}], "owner": {"reputation": 21, "user_id": 6530664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MzMx4.jpg?s=128&g=1", "display_name": "Aethys", "link": "https://stackoverflow.com/users/6530664/aethys"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1321, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1467280860, "creation_date": 1467242457, "last_edit_date": 1467245075, "question_id": 38111632, "link": "https://stackoverflow.com/questions/38111632/finding-all-combinations-of-paths-from-a-graph-with-a-given-distance-from-the-or", "title": "Finding all combinations of paths from a graph with a given distance from the origin", "body": "<p><br />\nI'm trying to find all combinations of paths from a graph with a given distance from the origin.</p>\n\n<p>In fact, the new expansion of World of Warcraft (Legion) will introduce the Artifact system to the game.<br />\nIt's a feature that you can level up, each level give you 1 rank and you can spend 1 point for each rank in a tree.<br />\nYou can find a calculator of each artifact on WowHead and I will use this one as example : <a href=\"http://legion.wowhead.com/artifact-calc/rogue/subtlety/\" rel=\"nofollow\">http://legion.wowhead.com/artifact-calc/rogue/subtlety/</a></p>\n\n<p>Basically, the aim of the program would be :<br />\n\"I give a rank, let's say 7, and it returns to me every path combinations from the graph which I had to spent 7 points to get there (ie, list of 7 unique nodes)\".</p>\n\n<p>When I saw the calculator, I thought that it was solvable by transposing it to a graph, so I made one to help me to get through :\n<a href=\"http://i.stack.imgur.com/3RGot.png\" rel=\"nofollow\">Graph</a></p>\n\n<p>On the graph, I had to make little adjustments from the calculator, for example each trait which got 3 ranks had to be represented as 3 nodes linked each other.\nAlso, for the traits which were unlocking 2 ways to continue, I had to represent them as 4 nodes to \"emulate\" the 3 nodes requirements to get through. (But we'll see after that is still an issue and it didn't really fixed the problem)</p>\n\n<p>Then from there I tried to find a good way to list every possibilities, so I made a lot of research over the internet to find the best way to handle my issue.<br />\nI firstly tried to solve it using the Breadth-first search, but having the distance from the origin of each node didn't helped much.\nThen I tried to use the exhaustive search.<br />\nI'm currently using an adaption of the code posted there : \"Finding all paths from a given graph\" on CodeReview@StackEchange (can't post more than 2 links)</p>\n\n<pre><code>def paths(graph, v, lmax):\n    \"\"\"Generate the maximal cycle-free paths with a given maximum length lmax in \n    graph starting at v. Graph must be a mapping from vertices to collections of\n    neighbouring vertices.\n\n    &gt;&gt;&gt; g = {1: [2, 3], 2: [3, 4], 3: [1], 4: []}\n    &gt;&gt;&gt; sorted(paths(g, 1, 3))\n    [[1, 2, 3], [1, 2, 4], [1, 3]]\n    &gt;&gt;&gt; sorted(paths(g, 3, 4))\n    [[3, 1, 2, 4]]\n\n    Credit to Gareth Rees from StackExchange for the original code.\n    \"\"\"\n    path = [v]                  # path traversed so far\n    seen = {v}                  # set of vertices in path\n    def search():\n        dead_end = True\n        if len(seen) &lt; lmax:\n            for neighbour in graph[path[-1]]:\n                if neighbour not in seen:\n                    dead_end = False\n                    seen.add(neighbour)\n                    path.append(neighbour)\n                    yield from search()\n                    path.pop()\n                    seen.remove(neighbour)\n        if dead_end:\n            yield list(path)\n    yield from search()\n</code></pre>\n\n<p>Then I make a function to sort the results and display only the one that had the required length.</p>\n\n<pre><code>def artifact(graph, maxrank, start):\n    for i in range(1, maxrank+1):\n        print(\"---------\")\n        print(\"Rank: \" + str(i))\n        print(\"---------\")\n        # Get all the Paths at \"i\" Rank\n        RawPaths = sorted(paths(g, start, i), key=len)\n        # Remove paths that doesn't satisfact our rank requirement and sort it\n        ValidPaths = [sorted(j) for j in RawPaths if len(j) == i]\n        # Remove duplicates\n        UniquePaths = sorted([list(j) for j in set(map(tuple, ValidPaths))])\n        # Display the Paths\n        for j in range(len(UniquePaths)):\n            PathString = \"\";\n            for k in range(len(UniquePaths[j])):\n                PathString += str(UniquePaths[j][k]) + \" \"\n            print(PathString)\n        print(\"\")\n</code></pre>\n\n<p>From there, I built list of adjacent nodes (neighbors) of a portion of nodes from the graph. I can't post more than 2 link, but the subgraph end at 8/7/32/31 nodes from the graph linked earlier.</p>\n\n<pre><code>g = {\n  1: [2, 38],\n  2: [1, 3],\n  3: [2, 4],\n  4: [3, 5],\n  5: [4, 6],\n  6: [5, 7, 8],\n  7: [6],\n  8: [6],\n 31: [33],\n 32: [33],\n 33: [31, 32, 34],\n 34: [33, 35],\n 35: [34, 36],\n 36: [35, 37],\n 37: [36, 38],\n 38: [1, 37]\n}\n</code></pre>\n\n<p>And then I called my function:</p>\n\n<pre><code>artifact(g, 8, 1)\n</code></pre>\n\n<p>But using this list, I was facing a major issue. In fact, the algorithm go straight until the end but it doesn't do any backtrack to reach the rank wanted (ie, after going all the way through 1 - 38 - 37 - 36 - 35 - 34 - 33 - 31, it wouldn't go back to 2 - 3 - ... if I had let's say 10 points to spend).<br />\nI was able to solve it for this subgraph by adding either as neighbour 2 to the 38, 37, ... branch or 38 to the 2, 3, ... branch.</p>\n\n<p>So my list became :</p>\n\n<pre><code>g = {\n  1: [2, 38],\n  2: [1, 3, 38],\n  3: [2, 4, 38],\n  4: [3, 5, 38],\n  5: [4, 6, 38],\n  6: [5, 7, 8, 38],\n  7: [6, 38],\n  8: [6, 38],\n 31: [2, 33],\n 32: [2, 33],\n 33: [2, 31, 32, 34],\n 34: [2, 33, 35],\n 35: [2, 34, 36],\n 36: [2, 35, 37],\n 37: [2, 36, 38],\n 38: [1, 2, 37]\n}\n</code></pre>\n\n<p>And then I was able to get everything I wanted for this part of the graph.\nNow I'm trying to extend my reasoning to the entire graph. But I'm failing hard due to main 2 issues :<br />\n- The 4 nodes to represent the traits with 3 ranks is working when I'm going in one direction, but if I have filled the entire branch and then I try to go back, I count the 4th node. (I could still make something in the artifact function to remove the 4th node but I don't think it's a good way to deal with it and should find a clever way to handle it.<br />\n- The trick that I used to link the first 2 branches isn't directly applicable to the whole graph. For example, following what I did, I would add 32 to the 29s neighbors since when I come from 35, 32 is accessible from 29. But, if I come from 28 and didn't added 27 to the path, then 32 is not normally reachable from 29.\nThen my paths became invalid.</p>\n\n<p>I'm not sure if I can solve it this way, I hope you would be able to help me. Also, I have the feeling that my way of backtracking the search is not perfect.\nI also thought this :<br />\nAs soon as I'm at the end of a branch, I would go back to the previous separation and explore from there. But as the node would have been already explored, it don't go the other way and stop there.</p>\n\n<p>Finally, I'm up to any other way to handle my problem, I don't want especially to solve it using graph.<br />\nMaybe there is another way to solve it efficiently (like building the graph step by step and having a number of ranks to spend and spent them gradually while nodes are unlocked maybe ?).</p>\n\n<p>Thank you in advance for your help and sorry for my English mistakes, I'm French :)</p>\n"}, {"tags": ["python", "isbn"], "comments": [{"owner": {"reputation": 38676, "user_id": 227884, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/L7EG1.png?s=128&g=1", "display_name": "UltraInstinct", "link": "https://stackoverflow.com/users/227884/ultrainstinct"}, "edited": false, "score": 1, "creation_date": 1467242959, "post_id": 38111620, "comment_id": 63656942, "body": "Please provide a sample input on which it fails."}, {"owner": {"reputation": 55, "user_id": 6443397, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f43cad6491614b8646b0e9053845786b?s=128&d=identicon&r=PG&f=1", "display_name": "Miryloth", "link": "https://stackoverflow.com/users/6443397/miryloth"}, "reply_to_user": {"reputation": 38676, "user_id": 227884, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/L7EG1.png?s=128&g=1", "display_name": "UltraInstinct", "link": "https://stackoverflow.com/users/227884/ultrainstinct"}, "edited": false, "score": 0, "creation_date": 1467244634, "post_id": 38111620, "comment_id": 63657376, "body": "978-3-16-148410-0 would pass, 978-3-16-148410 would fail"}, {"owner": {"reputation": 4676, "user_id": 30105, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/a1dc4bddf38de8351ae70e98845242e9?s=128&d=identicon&r=PG", "display_name": "PyNEwbie", "link": "https://stackoverflow.com/users/30105/pynewbie"}, "edited": false, "score": 0, "creation_date": 1467244959, "post_id": 38111620, "comment_id": 63657468, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/14258720/how-to-use-python-to-find-all-isbn-in-a-text-file\">How to use Python to find all isbn in a text file?</a>"}, {"owner": {"reputation": 176, "user_id": 608553, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb60b91fbdc5cc2222ba9cf30ca1e2a3?s=128&d=identicon&r=PG", "display_name": "clp2", "link": "https://stackoverflow.com/users/608553/clp2"}, "edited": false, "score": 0, "creation_date": 1467245098, "post_id": 38111620, "comment_id": 63657493, "body": "Error 1: Missing a colon at end of the &#39;def&#39; statement.    Error 2: The &#39;return isbn&#39; statement is not indented to put it inside the function."}], "answers": [{"comments": [{"owner": {"reputation": 74709, "user_id": 21945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/631470ecb1d4fe8bd3be6d7e0dfe4449?s=128&d=identicon&r=PG", "display_name": "mhawke", "link": "https://stackoverflow.com/users/21945/mhawke"}, "edited": false, "score": 0, "creation_date": 1467326253, "post_id": 38111752, "comment_id": 63699718, "body": "Oddly, this regex will not work for any real ISBN-13 codes, only for those following the OP&#39;s invalid format :) @Miryloth: you need to adapt the regex pattern provided in this answer to work with real ISBN-13 codes, e.g. ` ^97(8|9)(-\\d+){4}$`. Finally, you should verify the check digit."}, {"owner": {"reputation": 925, "user_id": 3819415, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/67b228536ece20c66cfb7b80a1199b7b?s=128&d=identicon&r=PG&f=1", "display_name": "wolframalpha", "link": "https://stackoverflow.com/users/3819415/wolframalpha"}, "reply_to_user": {"reputation": 74709, "user_id": 21945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/631470ecb1d4fe8bd3be6d7e0dfe4449?s=128&d=identicon&r=PG", "display_name": "mhawke", "link": "https://stackoverflow.com/users/21945/mhawke"}, "edited": false, "score": 0, "creation_date": 1467340803, "post_id": 38111752, "comment_id": 63703254, "body": "Yes the reason why I said it works exactly as Ops logic!"}], "tags": [], "owner": {"reputation": 925, "user_id": 3819415, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/67b228536ece20c66cfb7b80a1199b7b?s=128&d=identicon&r=PG&f=1", "display_name": "wolframalpha", "link": "https://stackoverflow.com/users/3819415/wolframalpha"}, "is_accepted": true, "score": 1, "last_activity_date": 1467243814, "last_edit_date": 1467243814, "creation_date": 1467243363, "answer_id": 38111752, "question_id": 38111620, "link": "https://stackoverflow.com/questions/38111620/python-isbn-13-digit-validate/38111752#38111752", "title": "python isbn 13 digit validate", "body": "<p>You should use regular expression and this is exactly why it is used for:</p>\n\n<pre><code>&gt;&gt;&gt; import re\n&gt;&gt;&gt; def validate(isbn):\n        isbn_regex = re.compile('^(978|979)-\\d+-\\d+-\\d$')\n        return isbn_regex.search(isbn) is not None\n\n&gt;&gt;&gt; print validate('978-12-12-2')\n    True\n</code></pre>\n\n<p>Note: This works as per your logic in the above code(except for you didn't check whether it's a digit).</p>\n"}, {"tags": [], "owner": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "is_accepted": false, "score": 0, "last_activity_date": 1467246177, "last_edit_date": 1467246177, "creation_date": 1467245700, "answer_id": 38112052, "question_id": 38111620, "link": "https://stackoverflow.com/questions/38111620/python-isbn-13-digit-validate/38112052#38112052", "title": "python isbn 13 digit validate", "body": "<p>An ISBN-13 consists of five groups of numbers and the last digit is a check digit.  Here's a function to make sure there are five groups, exactly 13 digits, and validates the check digit.  It works with your samples:</p>\n\n<pre><code>import re\n\ndef validate(s):\n    d = re.findall(r'\\d',s)\n    if len(d) != 13:\n        return False\n    if not re.match(r'97[89](?:-\\d+){3}-\\d$',s):\n        return False\n\n    # The ISBN-13 check digit, which is the last digit of the ISBN, must range from 0 to 9\n    # and must be such that the sum of all the thirteen digits, each multiplied by its\n    # (integer) weight, alternating between 1 and 3, is a multiple of 10.\n    odd = [int(x) for x in d[::2]]\n    even = [int(x)*3 for x in d[1::2]]\n    return (sum(odd)+sum(even)) % 10 == 0\n\ntrials = '''\\\n978-3-16-148410-0\n978-3-16-148410\n978-0-306-40615-7\n978-0306-40615-7\n979-11111-11-11-2\n978-7654-321-12-4\n977-7654-321-12-4\n978-7654-321-1-41\n978-7654-321-1-4\n978-7654-321-122-4\n'''.splitlines()\n\nfor trial in trials:\n    print(validate(trial),trial)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>True 978-3-16-148410-0\nFalse 978-3-16-148410        # too few numbers and groups       \nTrue 978-0-306-40615-7\nFalse 978-0306-40615-7       # too few groups\nTrue 979-11111-11-11-2\nFalse 978-7654-321-12-4      # wrong check digit\nFalse 977-7654-321-12-4      # didn't start with 978 or 979\nFalse 978-7654-321-1-41      # didn't end in one digit.\nFalse 978-7654-321-1-4       # too few digits\nFalse 978-7654-321-122-4     # too many digits\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 74709, "user_id": 21945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/631470ecb1d4fe8bd3be6d7e0dfe4449?s=128&d=identicon&r=PG", "display_name": "mhawke", "link": "https://stackoverflow.com/users/21945/mhawke"}, "is_accepted": false, "score": 2, "last_activity_date": 1467246067, "last_edit_date": 1467246067, "creation_date": 1467245732, "answer_id": 38112055, "question_id": 38111620, "link": "https://stackoverflow.com/questions/38111620/python-isbn-13-digit-validate/38112055#38112055", "title": "python isbn 13 digit validate", "body": "<p>ISBN-13 requires 13 digits to be valid. Your code does not check that all characters are digits (excluding the <code>-</code> separator), nor does it check the actual length. Also, five parts are required, and you could be verifying the check digit.</p>\n\n<p>Specifically your code fails to ever return <code>True</code> because the fourth segment (<code>lst[3]</code>) checks for <em>exactly</em> one character (<code>if len(lst[3])==1:</code>), however, that element will typically be longer than 1 digit.</p>\n\n<p>There are python libraries available via PyPI that can validate ISBN codes. Here's an example using <a href=\"https://pypi.python.org/pypi/isbnlib/3.6.1\" rel=\"nofollow\"><code>isbnlib</code></a>:</p>\n\n<pre><code>&gt;&gt;&gt; import isbnlib\n&gt;&gt;&gt; isbnlib.is_isbn13('978-3-16-148410-0')\nTrue\n&gt;&gt;&gt; isbnlib.is_isbn13('978-3-16-148410-5')\nFalse\n&gt;&gt;&gt; isbnlib.is_isbn13('978-3-16-148410-A')\nFalse\n&gt;&gt;&gt; isbnlib.is_isbn13('979-3-16-148410-9')\nTrue\n</code></pre>\n\n<p>Another, lighter weight library is <a href=\"https://pypi.python.org/pypi/pyisbn\" rel=\"nofollow\"><code>pyisbn</code></a>:</p>\n\n<pre><code>&gt;&gt;&gt; import pysisbn\n&gt;&gt;&gt; pyisbn.validate('979-3-16-148410-9')\nTrue\n&gt;&gt;&gt; pyisbn.validate('979-3-16-148410-0')\nFalse\n</code></pre>\n\n<p>The advantage of using these libraries, other than saving you the hassle of parsing ISBN strings yourself, is that they offer additional functionality such as converting from ISBN-13 to ISBN-10.</p>\n"}, {"tags": [], "owner": {"reputation": 176, "user_id": 608553, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb60b91fbdc5cc2222ba9cf30ca1e2a3?s=128&d=identicon&r=PG", "display_name": "clp2", "link": "https://stackoverflow.com/users/608553/clp2"}, "is_accepted": false, "score": 0, "last_activity_date": 1467246614, "creation_date": 1467246614, "answer_id": 38112158, "question_id": 38111620, "link": "https://stackoverflow.com/questions/38111620/python-isbn-13-digit-validate/38112158#38112158", "title": "python isbn 13 digit validate", "body": "<p>Error 1: Missing a colon at end of the 'def' statement. </p>\n\n<p>Error 2: The 'return isbn' statement is not indented; it is outside the function but should be inside.</p>\n\n<p>Error 3: The line checking the length of lst[3] does not check the last element of the isbn string when there are more than four elements in lst.</p>\n\n<p>The split command creates five elements in lst for your first string, 978-3-16-148410-0; but lst[3] has 6 digits, and the length test fails.</p>\n\n<p>The split command creates four elements in lst for your second string, 978-3-16-148410; but lst[3] has 6 digits, and the length test fails.</p>\n\n<p>Consider using lst[-1] to specify the last element of lst, regardless of how many elements it contains.  If your i/p is formatted correctly, the o/p should be correct.</p>\n"}], "owner": {"reputation": 55, "user_id": 6443397, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f43cad6491614b8646b0e9053845786b?s=128&d=identicon&r=PG&f=1", "display_name": "Miryloth", "link": "https://stackoverflow.com/users/6443397/miryloth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2048, "favorite_count": 0, "accepted_answer_id": 38111752, "answer_count": 4, "score": 0, "last_activity_date": 1467252708, "creation_date": 1467242416, "last_edit_date": 1467252708, "question_id": 38111620, "link": "https://stackoverflow.com/questions/38111620/python-isbn-13-digit-validate", "title": "python isbn 13 digit validate", "body": "<p>I need to write a function that validates a 13 digit ISBN. It needs to start with 978 or 979, end with a single digit, and the remaining sections need to be at least 1 digit in length. I need some help to make this work, I don't understand why it never returns true</p>\n\n<pre><code>def validate(s)\n lst = s.split(\"-\")\n isbn= False\n if lst[0] == \"978\" or lst[0] == \"979\":\n     if len(lst[1])&gt;=1 and len(lst[2])&gt;=1:\n         if len(lst[3])==1:\n            isbn= True\nreturn isbn\n</code></pre>\n"}, {"tags": ["python", "class", "scope", "instantiation"], "comments": [{"owner": {"reputation": 16773, "user_id": 5827215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-s_pAOw1Sc-M/AAAAAAAAAAI/AAAAAAAAAMA/J-R1IMHbuY4/photo.jpg?sz=128", "display_name": "Tadhg McDonald-Jensen", "link": "https://stackoverflow.com/users/5827215/tadhg-mcdonald-jensen"}, "edited": false, "score": 2, "creation_date": 1467242382, "post_id": 38111585, "comment_id": 63656738, "body": "the default value is determined at definition time (when the class block executes) not when the function is run, just put the code that determines their value in the function body."}, {"owner": {"reputation": 16773, "user_id": 5827215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-s_pAOw1Sc-M/AAAAAAAAAAI/AAAAAAAAAMA/J-R1IMHbuY4/photo.jpg?sz=128", "display_name": "Tadhg McDonald-Jensen", "link": "https://stackoverflow.com/users/5827215/tadhg-mcdonald-jensen"}, "edited": false, "score": 0, "creation_date": 1467242437, "post_id": 38111585, "comment_id": 63656763, "body": "Note that that is the entire point of having an <code>__init__</code> method, to run some code to create the object.  Your <code>age</code> will always default to the same number that was only generated once at definition time instead of once per instance."}, {"owner": {"reputation": 23, "user_id": 6222017, "user_type": "registered", "profile_image": "https://graph.facebook.com/3574068226780/picture?type=large", "display_name": "Phil", "link": "https://stackoverflow.com/users/6222017/phil"}, "reply_to_user": {"reputation": 16773, "user_id": 5827215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-s_pAOw1Sc-M/AAAAAAAAAAI/AAAAAAAAAMA/J-R1IMHbuY4/photo.jpg?sz=128", "display_name": "Tadhg McDonald-Jensen", "link": "https://stackoverflow.com/users/5827215/tadhg-mcdonald-jensen"}, "edited": false, "score": 0, "creation_date": 1467246528, "post_id": 38111585, "comment_id": 63657838, "body": "So you&#39;re saying if I instantiate the class 2 separate times, the age value will always be the same? Is there any way to get a random age each instantiation?"}, {"owner": {"reputation": 16773, "user_id": 5827215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-s_pAOw1Sc-M/AAAAAAAAAAI/AAAAAAAAAMA/J-R1IMHbuY4/photo.jpg?sz=128", "display_name": "Tadhg McDonald-Jensen", "link": "https://stackoverflow.com/users/5827215/tadhg-mcdonald-jensen"}, "edited": false, "score": 0, "creation_date": 1467247161, "post_id": 38111585, "comment_id": 63657974, "body": "you will notice that in my answer <code>age</code> is defaulted to <code>None</code> and initialized as a random number in the function body.  That is how you set a value every time the function is run, you do it in the function body."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 6222017, "user_type": "registered", "profile_image": "https://graph.facebook.com/3574068226780/picture?type=large", "display_name": "Phil", "link": "https://stackoverflow.com/users/6222017/phil"}, "edited": false, "score": 0, "creation_date": 1467244992, "post_id": 38111943, "comment_id": 63657471, "body": "I see, this seems to be a much better implementation of what I was trying to achieve. I do want <b>social_index</b> and <b>econ_index</b> to be optional arguments that will override any logic that would determine the default values so your first example is exactly what I was looking for. Thanks!"}], "tags": [], "owner": {"reputation": 16773, "user_id": 5827215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-s_pAOw1Sc-M/AAAAAAAAAAI/AAAAAAAAAMA/J-R1IMHbuY4/photo.jpg?sz=128", "display_name": "Tadhg McDonald-Jensen", "link": "https://stackoverflow.com/users/5827215/tadhg-mcdonald-jensen"}, "is_accepted": true, "score": 0, "last_activity_date": 1467244724, "last_edit_date": 1495541767, "creation_date": 1467244724, "answer_id": 38111943, "question_id": 38111585, "link": "https://stackoverflow.com/questions/38111585/self-referencing-variables-passed-during-the-instantiation-of-a-class/38111943#38111943", "title": "Self referencing variables passed during the instantiation of a class", "body": "<p>Assuming you want <code>social_index</code> and <code>econ_index</code> to be parameters your code would look like:</p>\n\n<pre><code>class Candidate(object):\n    def __init__(self, party_code, state, age=None,\n            social_index=None, econ_index=None):\n        if age is None:\n            age=random.randint(35, 70)\n        if social_index is None:\n            social_index = (1 if party_code == 'dem' else -1 if party_code == 'rep' else 0)\n        if econ_index is None:\n            econ_index=(-1 if party_code == 'dem' else 1 if party_code == 'rep' else 0)\n        self.state = state\n        self.party_code = party_code\n        self.age = age\n        self.social_index = social_index\n        self.econ_index = econ_index\n</code></pre>\n\n<p>You need to specify the logic to determine the values in the function body in order for it to be executed when the function is called.  The default to the function is determined at definition (the <code>def</code> block) which is why the <a href=\"https://stackoverflow.com/questions/1132941/least-astonishment-in-python-the-mutable-default-argument\">Mutable default trap</a> exists.</p>\n\n<p>On the other hand if you don't need to be able to pass them as arguments you can simplify it to this:</p>\n\n<pre><code>class Candidate(object):\n    def __init__(self, party_code, state):\n        self.state = state\n        self.party_code = party_code\n        self.age = random.randint(35, 70)\n        if party_code == 'dem':\n            self.social_index = 1\n            self.econ_index = -1\n        elif party_code == \"rep\":\n            self.social_index = 0\n            self.econ_index = 0\n        else:\n            self.social_index = 0\n            self.econ_index = 0\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 6222017, "user_type": "registered", "profile_image": "https://graph.facebook.com/3574068226780/picture?type=large", "display_name": "Phil", "link": "https://stackoverflow.com/users/6222017/phil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 38111943, "answer_count": 1, "score": 0, "last_activity_date": 1467244724, "creation_date": 1467242134, "question_id": 38111585, "link": "https://stackoverflow.com/questions/38111585/self-referencing-variables-passed-during-the-instantiation-of-a-class", "title": "Self referencing variables passed during the instantiation of a class", "body": "<p>I'm not sure if I'm using the correct terminology, but here's my code:</p>\n\n<pre><code>class Candidate(object):\n        def __init__(self, party_code, state, age=random.randint(35, 70),\n                social_index=(1 if party_code == 'dem' else -1 if party_code == 'rep' else 0),\n                econ_index=(-1 if party_code == 'dem' else 1 if party_code == 'rep' else 0)):\n            self.state = state\n            self.party_code = party_code\n            self.age = age\n            self.social_index = social_index\n            self.econ_index = econ_index\n</code></pre>\n\n<p>I would like to be able to use <strong>party_code</strong> to determine what the initial values of <strong>social_index</strong> and <strong>econ_index</strong> will be, but this isn't allowed with the way I currently have it set up. Is there an alternative way to dynamically set keyword variable on creation of this class?</p>\n"}, {"tags": ["python", "subprocess"], "comments": [{"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 1, "creation_date": 1467241917, "post_id": 38111484, "comment_id": 63656604, "body": "Use a list of args"}], "answers": [{"comments": [{"owner": {"reputation": 1485, "user_id": 2593123, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/YsoM9.png?s=128&g=1", "display_name": "arcade16", "link": "https://stackoverflow.com/users/2593123/arcade16"}, "edited": false, "score": 0, "creation_date": 1467241831, "post_id": 38111518, "comment_id": 63656575, "body": "Thank you, much appreciated!"}, {"owner": {"reputation": 1485, "user_id": 2593123, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/YsoM9.png?s=128&g=1", "display_name": "arcade16", "link": "https://stackoverflow.com/users/2593123/arcade16"}, "edited": false, "score": 0, "creation_date": 1467253126, "post_id": 38111518, "comment_id": 63659288, "body": "I am getting an error: Traceback (most recent call last):   File &quot;automate_wig.py&quot;, line 5, in &lt;module&gt;     subprocess.call(&#39;python3 wig.py {}&#39;.format(var))   File &quot;/usr/lib/python2.7/subprocess.py&quot;, line 522, in call     return Popen(*popenargs, **kwargs).wait()   File &quot;/usr/lib/python2.7/subprocess.py&quot;, line 710, in <b>init</b>     errread, errwrite)   File &quot;/usr/lib/python2.7/subprocess.py&quot;, line 1327, in _execute_child     raise child_exception OSError: [Errno 2] No such file or directory...Any ideas what could be causing it?"}, {"owner": {"reputation": 1485, "user_id": 2593123, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/YsoM9.png?s=128&g=1", "display_name": "arcade16", "link": "https://stackoverflow.com/users/2593123/arcade16"}, "edited": false, "score": 0, "creation_date": 1467253428, "post_id": 38111518, "comment_id": 63659359, "body": "I believe so, it works if I just run python3 wig.py google.com"}, {"owner": {"reputation": 1485, "user_id": 2593123, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/YsoM9.png?s=128&g=1", "display_name": "arcade16", "link": "https://stackoverflow.com/users/2593123/arcade16"}, "edited": false, "score": 0, "creation_date": 1467253670, "post_id": 38111518, "comment_id": 63659411, "body": "yup! The directory I run this script in has wig.py in the same folder"}, {"owner": {"reputation": 1485, "user_id": 2593123, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/YsoM9.png?s=128&g=1", "display_name": "arcade16", "link": "https://stackoverflow.com/users/2593123/arcade16"}, "edited": false, "score": 0, "creation_date": 1467254547, "post_id": 38111518, "comment_id": 63659603, "body": "I believe it works if I do this: process = subprocess.call(&#39;python3 wig.py {}&#39;.format(var), shell=True, stdout=subprocess.PIPE) print process.returncode"}, {"owner": {"reputation": 142796, "user_id": 42346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZikEw.jpg?s=128&g=1", "display_name": "mechanical_meat", "link": "https://stackoverflow.com/users/42346/mechanical-meat"}, "reply_to_user": {"reputation": 1485, "user_id": 2593123, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/YsoM9.png?s=128&g=1", "display_name": "arcade16", "link": "https://stackoverflow.com/users/2593123/arcade16"}, "edited": false, "score": 1, "creation_date": 1467254965, "post_id": 38111518, "comment_id": 63659691, "body": "Cheers, mate. Happy to help."}], "tags": [], "owner": {"reputation": 142796, "user_id": 42346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZikEw.jpg?s=128&g=1", "display_name": "mechanical_meat", "link": "https://stackoverflow.com/users/42346/mechanical-meat"}, "is_accepted": true, "score": 2, "last_activity_date": 1467254897, "last_edit_date": 1467254897, "creation_date": 1467241796, "answer_id": 38111518, "question_id": 38111484, "link": "https://stackoverflow.com/questions/38111484/user-input-in-subprocess-call/38111518#38111518", "title": "User input in subprocess call?", "body": "<p>Pass the arguments as a list as @PadraicCunningham suggests:</p>\n\n<pre><code>args = ['python3','wig.py']\nargs.append(var)\nsubprocess.call(args)\n</code></pre>\n\n<p>If your argument list becomes long and complicated you can bring in <code>shlex</code>:</p>\n\n<pre><code>import shlex\nargs = shlex.split('python3 wig.py {}'.format(var))\nsubprocess.call(args)\n</code></pre>\n"}], "owner": {"reputation": 1485, "user_id": 2593123, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/YsoM9.png?s=128&g=1", "display_name": "arcade16", "link": "https://stackoverflow.com/users/2593123/arcade16"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 359, "favorite_count": 1, "accepted_answer_id": 38111518, "answer_count": 1, "score": 2, "last_activity_date": 1467254897, "creation_date": 1467241630, "question_id": 38111484, "link": "https://stackoverflow.com/questions/38111484/user-input-in-subprocess-call", "title": "User input in subprocess call?", "body": "<p>I am working to automate the Wig tool in python, which will involve including a URL.</p>\n\n<p>Currently I take in user input (a URL) but am having difficulty adding it to the end of the subprocess call.</p>\n\n<pre><code>import subprocess\n\nvar = raw_input(\"Enter a URL: \")\n\nsubprocess.call('python3 wig.py ', var)\n</code></pre>\n\n<p>I know this is probably a simple question, but any help would be appreciated!</p>\n"}, {"tags": ["python", "squish"], "comments": [{"owner": {"reputation": 16773, "user_id": 5827215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-s_pAOw1Sc-M/AAAAAAAAAAI/AAAAAAAAAMA/J-R1IMHbuY4/photo.jpg?sz=128", "display_name": "Tadhg McDonald-Jensen", "link": "https://stackoverflow.com/users/5827215/tadhg-mcdonald-jensen"}, "edited": false, "score": 0, "creation_date": 1467242305, "post_id": 38111447, "comment_id": 63656715, "body": "Welcome to stackoverflow! please take the time to take the <a href=\"http://stackoverflow.com/tour\">tour</a> and see <a href=\"http://stackoverflow.com/help/on-topic\">what can I ask here?</a>.  As it is written your question doesn&#39;t provide enough information about the issue you are having. Could you provide some of your code? Perhaps give more detail about what the application is."}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 7479460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c4cefbb85e3741b902087e5e194392d?s=128&d=identicon&r=PG&f=1", "display_name": "Kalle", "link": "https://stackoverflow.com/users/7479460/kalle"}, "is_accepted": false, "score": 0, "last_activity_date": 1485536354, "last_edit_date": 1485536354, "creation_date": 1485534739, "answer_id": 41898682, "question_id": 38111447, "link": "https://stackoverflow.com/questions/38111447/draganddrop-in-squish/41898682#41898682", "title": "DragandDrop in squish", "body": "<p>It should be possible by just using either <code>mouseDrag()</code> function on the scrollbar object or by directly setting its position by <code>setValue(obj,value)</code> function. like follows:</p>\n\n<p><strong>this should perform dragging a up/down scrollbar 280 pixels downwards:</strong> </p>\n\n<pre><code>*mouseDrag(waitForObject(\":_YourScrollBarsName\"), 5, 30, 0, 280)*\n</code></pre>\n\n<p><strong>this should set the scrollbars internally used position value directly:</strong></p>\n\n<pre><code>*setValue(waitForObject(\":_YourScrollBarsName\"), 67)*\n</code></pre>\n\n<p>(The value (here 67) is not equal to the amount on pixels it would need by doing this by mouse drag... it's just an internal positioning value in the range of minimum and maximum properties of the scrollbar)</p>\n\n<p>To verify a scrollbar controls position you can either do by checking against it's position value by: </p>\n\n<pre><code>test.verify(waitForObject(\":_YourScrollBarsName\").position == 67)\n</code></pre>\n\n<p>for example, or you could create a verification point for verifying its position.</p>\n"}], "owner": {"reputation": 23, "user_id": 6332677, "user_type": "registered", "accept_rate": 10, "profile_image": "https://www.gravatar.com/avatar/c9974263a14d69ecdb4ff8637af173e3?s=128&d=identicon&r=PG&f=1", "display_name": "pigsrule", "link": "https://stackoverflow.com/users/6332677/pigsrule"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 986, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1485536354, "creation_date": 1467241405, "question_id": 38111447, "link": "https://stackoverflow.com/questions/38111447/draganddrop-in-squish", "title": "DragandDrop in squish", "body": "<p>I am working on windows application and when I click on ZoomIn button the window opens a vertical and horizontal scroll bar. How to test the scroll bars using squish? </p>\n"}, {"tags": ["python", "cherrypy"], "answers": [{"tags": [], "owner": {"reputation": 613, "user_id": 595220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/411092932361d175e66a92a2960599fe?s=128&d=identicon&r=PG", "display_name": "webknjaz", "link": "https://stackoverflow.com/users/595220/webknjaz"}, "is_accepted": true, "score": 0, "last_activity_date": 1469819095, "last_edit_date": 1469819095, "creation_date": 1467314337, "answer_id": 38131584, "question_id": 38111377, "link": "https://stackoverflow.com/questions/38111377/cherry-py-auto-download-file/38131584#38131584", "title": "cherry py auto download file", "body": "<p>Just create a zip archive in memory and then return it using <code>file_generator()</code> helper function from <code>cherrypy.lib</code>. You may as well <code>yield</code> HTTP response to enable streaming capabilities (keep in mind to set HTTP headers prior to doing that).\nI wrote a simple example (based on your snippet) for you just <code>return</code>ing a whole buffered zip archive.</p>\n\n<pre><code>from io import BytesIO\n\nimport cherrypy\nfrom cherrypy.lib import file_generator\n\n\nclass GenerateZip:\n    @cherrypy.expose\n    def archive(self, filename):\n        zip_archive = BytesIO()\n        with closed(ZipFile(zip_archive, \"w\", ZIP_DEFLATED)) as z:\n            for root, dirs, files in os.walk(basedir):\n                #NOTE: ignore empty directories\n                for fn in files:\n                    absfn = os.path.join(root, fn)\n                    zfn = absfn[len(basedir)+len(os.sep):] #XXX: relative path\n                    z.write(absfn, zfn)\n\n\n        cherrypy.response.headers['Content-Type'] = (\n            'application/zip'\n        )\n        cherrypy.response.headers['Content-Disposition'] = (\n            'attachment; filename={fname}.zip'.format(\n                fname=filename\n            )\n        )\n\n        return file_generator(zip_archive)\n</code></pre>\n\n<p>N.B. I didn't test this specific piece of code, but the general idea is correct.</p>\n\n\n"}], "owner": {"reputation": 3, "user_id": 6482722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c002e4852b92034c2e4507c694fe36a5?s=128&d=identicon&r=PG&f=1", "display_name": "Dennis", "link": "https://stackoverflow.com/users/6482722/dennis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 345, "favorite_count": 0, "accepted_answer_id": 38131584, "answer_count": 1, "score": 0, "last_activity_date": 1469819095, "creation_date": 1467241049, "question_id": 38111377, "link": "https://stackoverflow.com/questions/38111377/cherry-py-auto-download-file", "title": "cherry py auto download file", "body": "<p>I'm currently building cherry py app for my projects and at certain function I need auto starting download a file.</p>\n\n<p>After zip file finish generating, I want to start downloading to client\nSo after images are created, they are zipped and sent to client</p>\n\n<pre><code>class Process(object):\n    exposed = True\n\n    def GET(self, id, norm_all=True, format_ramp=None):\n        ...\n        def content(): #generating images\n            ...\n\n            def zipdir(basedir, archivename):\n                assert os.path.isdir(basedir)\n                with closing(ZipFile(archivename, \"w\", ZIP_DEFLATED)) as z:\n                    for root, dirs, files in os.walk(basedir):\n                        #NOTE: ignore empty directories\n                        for fn in files:\n                            absfn = os.path.join(root, fn)\n                            zfn = absfn[len(basedir)+len(os.sep):] #XXX: relative path\n                            z.write(absfn, zfn)\n\n            zipdir(\"/data/images/8\",\"8.zip\")\n\n            #after zip file finish generating, I want to start downloading to client\n            #so after images are created, they are zipped and sent to client\n            #and I'm thinking do it here, but don't know how\n\n        return content()\n\n    GET._cp_config = {'response.stream': True}\n\n\n    def POST(self):\n        global proc\n        global processing\n        proc.kill()\n        processing = False\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "python-3.5", "pyperclip"], "comments": [{"owner": {"reputation": 553, "user_id": 6353933, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fd6efa5eeea90f2aea3fc61e7e4c384d?s=128&d=identicon&r=PG", "display_name": "Kode.Error404", "link": "https://stackoverflow.com/users/6353933/kode-error404"}, "edited": false, "score": 0, "creation_date": 1467251406, "post_id": 38111340, "comment_id": 63658907, "body": "Did you run the setup.py file? Read this <a href=\"http://stackoverflow.com/questions/6081317/using-pyclips-and-import-clips-as-a-python-module\" title=\"using pyclips and import clips as a python module\">stackoverflow.com/questions/6081317/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 111, "user_id": 6530753, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e6f9f9bb3e43c2d70e643156354dfa4?s=128&d=identicon&r=PG&f=1", "display_name": "Ozixic", "link": "https://stackoverflow.com/users/6530753/ozixic"}, "is_accepted": true, "score": 5, "last_activity_date": 1467300383, "creation_date": 1467300383, "answer_id": 38127468, "question_id": 38111340, "link": "https://stackoverflow.com/questions/38111340/cant-import-pyperclip/38127468#38127468", "title": "Can&#39;t import Pyperclip", "body": "<p>It unpacked pyperclip in the wrong directory. I copied the entire pyperclip folder and put it in C:/python/python35, now it works as it should. Seems like a noob mistake on my part, but it took me a long time to figure this out.  I hope this helps someone in the future.</p>\n"}, {"comments": [{"owner": {"reputation": 169, "user_id": 6423853, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-pnJxDGD5Stg/AAAAAAAAAAI/AAAAAAAABW0/U05Y-Ishqos/photo.jpg?sz=128", "display_name": "Gabz", "link": "https://stackoverflow.com/users/6423853/gabz"}, "edited": false, "score": 2, "creation_date": 1548071978, "post_id": 45323641, "comment_id": 95399761, "body": "Well, I&#39;ve tried with &quot;pip install pyperclip&quot; your solution solved my problem."}], "tags": [], "owner": {"reputation": 541, "user_id": 7898385, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YlJ3o.jpg?s=128&g=1", "display_name": "Secant Zhang", "link": "https://stackoverflow.com/users/7898385/secant-zhang"}, "is_accepted": false, "score": 7, "last_activity_date": 1501073198, "last_edit_date": 1501073198, "creation_date": 1501063251, "answer_id": 45323641, "question_id": 38111340, "link": "https://stackoverflow.com/questions/38111340/cant-import-pyperclip/45323641#45323641", "title": "Can&#39;t import Pyperclip", "body": "<p>Try</p>\n\n<pre><code>pip3 install pyperclip\n</code></pre>\n\n<p>That installs pyperclip in python3.</p>\n"}, {"tags": [], "owner": {"reputation": 36, "user_id": 14774305, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84a489923633020f2010a0ca443d2abc?s=128&d=identicon&r=PG&f=1", "display_name": "Jonas Willems", "link": "https://stackoverflow.com/users/14774305/jonas-willems"}, "is_accepted": false, "score": 1, "last_activity_date": 1607286879, "last_edit_date": 1607286879, "creation_date": 1607262319, "answer_id": 65168753, "question_id": 38111340, "link": "https://stackoverflow.com/questions/38111340/cant-import-pyperclip/65168753#65168753", "title": "Can&#39;t import Pyperclip", "body": "<p>For those working in a <code>venv</code>, make sure that you have <code>pyperclip</code> installed in the directory that your venv is running in. <br>\nEg. <code>C:\\MY_PROJECT\\venv\\Lib\\site-packages</code> should include the pyperclip module. If you don't find it here, have a look at where you installed Python and you'll find it there. <br>\nEg. <code>C:\\Users\\Username\\AppData\\Local\\Programs\\Python\\Python39\\Lib\\site-packages</code></p>\n"}], "owner": {"reputation": 111, "user_id": 6530753, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e6f9f9bb3e43c2d70e643156354dfa4?s=128&d=identicon&r=PG&f=1", "display_name": "Ozixic", "link": "https://stackoverflow.com/users/6530753/ozixic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 16095, "favorite_count": 1, "accepted_answer_id": 38127468, "answer_count": 3, "score": 3, "last_activity_date": 1607286879, "creation_date": 1467240842, "question_id": 38111340, "link": "https://stackoverflow.com/questions/38111340/cant-import-pyperclip", "title": "Can&#39;t import Pyperclip", "body": "<p>I am having trouble importing Pyperclip in IDLE.<br>\nI am running windows 7 (64-bit).<br>\nI have Python 3.5.2 Installed on: C:\\Python\\Python35.<br>\nI opened command prompt and initiated the install by typing pip install pyperclip after changing directory to C:\\Python\\Python35\\Scripts. \nIt successfully installed Pyperclip-1.5.27. \nI then went to IDLE and typed in import pyperclip but the following error is showing up: </p>\n\n<p>Traceback (most recent call last):\n  File \"\", line 1, in \n    import pyperclip\nImportError: No module named 'pyperclip'</p>\n\n<p>I tried to fix this by adding \"C:\\Python\\Python35\" to the end of the \"Path\" variable, in the systems environmental variables.</p>\n"}, {"tags": ["python", "matplotlib"], "answers": [{"tags": [], "owner": {"reputation": 16763, "user_id": 2749397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/rcNMz.png?s=128&g=1", "display_name": "gboffi", "link": "https://stackoverflow.com/users/2749397/gboffi"}, "is_accepted": false, "score": 2, "last_activity_date": 1607196270, "last_edit_date": 1607196270, "creation_date": 1467242532, "answer_id": 38111647, "question_id": 38111332, "link": "https://stackoverflow.com/questions/38111332/is-it-possible-to-reset-a-cycler-object/38111647#38111647", "title": "Is it possible to reset a Cycler object", "body": "<p>Asking a question implies reaching a better understanding of the problem, doesn't it?</p>\n<p>The statement below does the trick,</p>\n<pre><code>plt.gca().set_prop_cycle(plt.rcParams['axes.prop_cycle'])\n</code></pre>\n<p><code>&lt;edit&gt;</code>Even simpler,<code>plt.gca().set_prop_cycle(None)</code>, see <strong>Addendum</strong> below.<code>&lt;/edit&gt;</code></p>\n<p><code>matplotlib</code> has its internal consistency...</p>\n<p>Example:</p>\n<pre><code>In [46]: %matplotlib\nIn [47]: import matplotlib.pyplot as plt\nIn [48]: import numpy as np\nIn [49]: x = np.linspace(0, 7, 101)\nIn [50]: y1 = np.array([np.sin(x+0.2*i*x) for i in range(2)])\nIn [51]: y2 = 0.9*y1+0.1\nIn [52]: plt.plot(x, y1.T, linewidth=3)\nOut[52]: \n[&lt;matplotlib.lines.Line2D at 0x7f5118b759b0&gt;,\n &lt;matplotlib.lines.Line2D at 0x7f5118b75b38&gt;]\nIn [53]: plt.gca().set_prop_cycle(plt.rcParams['axes.prop_cycle'])\nIn [54]: plt.plot(x, y2.T, linewidth=1)\nOut[54]: \n[&lt;matplotlib.lines.Line2D at 0x7f511a3bec50&gt;,\n &lt;matplotlib.lines.Line2D at 0x7f5118b1e898&gt;]\nIn [55]: \n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/Wnd2W.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Wnd2W.png\" alt=\"enter image description here\" /></a>gives me</p>\n<h3>Addendum</h3>\n<p>At last I read the doc string of <code>.set_prop_cycle()</code></p>\n<blockquote>\n<p>Set the property cycle for any future plot commands on this <code>Axes</code>.</p>\n<pre><code>set_prop_cycle(arg)  \nset_prop_cycle(label, itr)  \nset_prop_cycle(label1=itr1[, label2=itr2[, ...]])  \n</code></pre>\n<p>Form 1 simply sets given <code>Cycler</code> object.<br />\n[...]<br />\n<strong>Parameters</strong><br />\n<strong>arg</strong> : Cycler<br />\nSet the given Cycler.<br />\nCan also be <code>None</code> to <em>reset</em> to the cycle defined by the current style.<br />\n[...]</p>\n</blockquote>\n<p>My code can be simplified:</p>\n<pre><code>plt.plot(x, y1, linewidth=3)\nplt.gca().set_prop_cycle(None)\nplt.plot(x, y2, linewidth=1)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 16763, "user_id": 2749397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/rcNMz.png?s=128&g=1", "display_name": "gboffi", "link": "https://stackoverflow.com/users/2749397/gboffi"}, "edited": false, "score": 0, "creation_date": 1467243661, "post_id": 38111656, "comment_id": 63657133, "body": "Your answer is useful but my question had a different twist in it... If you plot the two line sets in two subplots, the <code>Cycler</code> is reset automatically,  I want to do the same but using only one subplot, w/o having to guess which are the current defaults \u2014 that, given the introduction of <code>plt.style.use()</code> can be different from blue, green, red."}, {"owner": {"reputation": 73075, "user_id": 380231, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8744048060e5931c500d3c9d1ecb997e?s=128&d=identicon&r=PG", "display_name": "tacaswell", "link": "https://stackoverflow.com/users/380231/tacaswell"}, "reply_to_user": {"reputation": 16763, "user_id": 2749397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/rcNMz.png?s=128&g=1", "display_name": "gboffi", "link": "https://stackoverflow.com/users/2749397/gboffi"}, "edited": false, "score": 0, "creation_date": 1467244002, "post_id": 38111656, "comment_id": 63657205, "body": "It is not so much reset, but is simply an entirely different iterator.  Also see my edit."}, {"owner": {"reputation": 73075, "user_id": 380231, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8744048060e5931c500d3c9d1ecb997e?s=128&d=identicon&r=PG", "display_name": "tacaswell", "link": "https://stackoverflow.com/users/380231/tacaswell"}, "reply_to_user": {"reputation": 16763, "user_id": 2749397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/rcNMz.png?s=128&g=1", "display_name": "gboffi", "link": "https://stackoverflow.com/users/2749397/gboffi"}, "edited": false, "score": 0, "creation_date": 1467244095, "post_id": 38111656, "comment_id": 63657234, "body": "Also, mpl will do all sorts of things implicitly for you (which is great if you are typing this into a terminal) but I <i>strongly</i> suggest writing your self helper functions that take in <code>def my_helper(ax, data, style)</code> which can then be very explicit about things."}], "tags": [], "owner": {"reputation": 73075, "user_id": 380231, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8744048060e5931c500d3c9d1ecb997e?s=128&d=identicon&r=PG", "display_name": "tacaswell", "link": "https://stackoverflow.com/users/380231/tacaswell"}, "is_accepted": false, "score": 1, "last_activity_date": 1467243989, "last_edit_date": 1467243989, "creation_date": 1467242596, "answer_id": 38111656, "question_id": 38111332, "link": "https://stackoverflow.com/questions/38111332/is-it-possible-to-reset-a-cycler-object/38111656#38111656", "title": "Is it possible to reset a Cycler object", "body": "<p>The value in <code>plt.rcParams</code> is the underlying <code>Cycler</code> but the <code>Axes</code> objects hold a reference to an iterator over that object (see <a href=\"https://github.com/matplotlib/matplotlib/blob/master/lib/matplotlib/axes/_base.py#L169\" rel=\"nofollow\">here</a>, it is actually a <code>itertools.cycle</code> around the iterator so it never runs out).</p>\n\n<p>If you are using the broadcasting in plot then you can do something like</p>\n\n<pre><code>fig, ax = plt.subplots()\nax.set_prop_cycle((cycler('lw', [1, 3] *\n                   cycler('color', ['b', 'g', 'r']))\nax.plot(x, lines1)\nax.plot(x, lines2)\n</code></pre>\n\n<p>To use a subset of the current default cycle</p>\n\n<pre><code>dflt_cy = plt.rcParams['axes.prop_cycle']\nmy_cy = cycler('lw', [1, 3]) * dflt_cy[:3]\n</code></pre>\n\n<p>(See <a href=\"http://matplotlib.org/cycler/#slicing\" rel=\"nofollow\">the docs</a> for details)  will give you the same as above.</p>\n\n<p>My suggestion here is do to something a bit more general if you can loop over your data one at a time:</p>\n\n<pre><code>from cycler import cycler\nmy_cycle = (cycler('lw', [1, 3] *\n            cycler('color', ['b', 'g', 'r', 'c', 'm', 'y', 'k']))\nfig, ax = plt.subplots()\nfor sty, data in zip(my_cycle(), my_data):\n    ax.plot(x, data, **sty)\n</code></pre>\n"}], "owner": {"reputation": 16763, "user_id": 2749397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/rcNMz.png?s=128&g=1", "display_name": "gboffi", "link": "https://stackoverflow.com/users/2749397/gboffi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 478, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1607196270, "creation_date": 1467240802, "question_id": 38111332, "link": "https://stackoverflow.com/questions/38111332/is-it-possible-to-reset-a-cycler-object", "title": "Is it possible to reset a Cycler object", "body": "<p>E.g., if shape of <code>lines1</code> and <code>lines2</code> were <code>(3,101)</code> with</p>\n\n<pre><code> plt.plot(x, lines1, linewidth=3)\n plt.plot(x, lines2, linewidth=1)\n</code></pre>\n\n<p>I have a blue, green, red line with width equal to 3, and a cyan, magenta and yellow line with width equal to 1.</p>\n\n<p>Because the data in <code>lines1</code> is connected pairwise to data in <code>lines2</code>, \nI'd like to reset the <code>Cycler</code> objet that controls the lines' color between the two <code>plot</code> instructions, so that I have  blue, green, red lines, width=3 followed by blue, green, red lines width=1 and there is a visual connection (the color) between the pairs of lines.</p>\n\n<p>The <code>Cycler</code> object in question is a property of <code>axes</code>, exactly the <code>prop_cycle</code> property</p>\n\n<pre><code>In [28]: plt.rcParams['axes.prop_cycle']\nOut[28]: cycler('color', ['b', 'g', 'r', 'c', 'm', 'y', 'k'])\n</code></pre>\n\n<p>Is it possible to reset this <code>Cycler</code> object?</p>\n"}, {"tags": ["python", "python-2.7", "scipy"], "comments": [{"owner": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "edited": false, "score": 0, "creation_date": 1467323180, "post_id": 38111320, "comment_id": 63698647, "body": "So what&#39;s the question..."}, {"owner": {"reputation": 111, "user_id": 3990858, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/yzEsa.jpg?s=128&g=1", "display_name": "Mateyobi", "link": "https://stackoverflow.com/users/3990858/mateyobi"}, "reply_to_user": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "edited": false, "score": 0, "creation_date": 1467384003, "post_id": 38111320, "comment_id": 63725930, "body": "@sascha how do I set this up to get an r for each division that minimizes e?"}, {"owner": {"reputation": 111, "user_id": 3990858, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/yzEsa.jpg?s=128&g=1", "display_name": "Mateyobi", "link": "https://stackoverflow.com/users/3990858/mateyobi"}, "reply_to_user": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "edited": false, "score": 0, "creation_date": 1467384337, "post_id": 38111320, "comment_id": 63726156, "body": "i understand now that fmin requires args to be in an array and I am working on that."}, {"owner": {"reputation": 111, "user_id": 3990858, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/yzEsa.jpg?s=128&g=1", "display_name": "Mateyobi", "link": "https://stackoverflow.com/users/3990858/mateyobi"}, "reply_to_user": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "edited": false, "score": 0, "creation_date": 1467399588, "post_id": 38111320, "comment_id": 63734056, "body": "@sascha I did a lot of work on my code and posted a new question here: <a href=\"http://stackoverflow.com/questions/38152316/why-am-i-getting-incorrect-results-from-scipy-optimize-fmin\" title=\"why am i getting incorrect results from scipy optimize fmin\">stackoverflow.com/questions/38152316/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 111, "user_id": 3990858, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/yzEsa.jpg?s=128&g=1", "display_name": "Mateyobi", "link": "https://stackoverflow.com/users/3990858/mateyobi"}, "is_accepted": true, "score": 0, "last_activity_date": 1467736861, "creation_date": 1467736861, "answer_id": 38208567, "question_id": 38111320, "link": "https://stackoverflow.com/questions/38111320/how-to-minimize-forecast-error-with-fmin/38208567#38208567", "title": "How to minimize forecast error with fmin?", "body": "<p>So I learned a few things about fmin during this project:</p>\n\n<p>-Arguments must be in array format so I made the return_array helper function.</p>\n\n<p>-The variable you want to optimize must be listed first in the function you want to minimize. So for me it had to be e(r,c,u,s), not e(c,u,s,r).</p>\n\n<pre><code>#calculate new fall out rates with fmin\nimport numpy as np\nimport pandas as pd\nfrom scipy.optimize import fmin\n\ndata = pd.DataFrame({'DIV': [1,2,3]*3,\n                     'MONTH': ['May','May','May','June','June','Jun','Jul','Jul','Jul'],\n                     'C':[8]*9,\n                     'U':[3,2,1]*3,\n                     'S':[9]*9})\n\ndata.to_csv(r'C:\\Users\\mbabski\\Documents\\Unit Plan Summer 2016\\data_test.csv')\n\ndef return_array(x):\n    return x.values\n\ndef mape(c,u,s,r): #returns an array of line level Mean Absolute Percentage Errors\n    p = c + u * r #calculates the forecasted number number\n    m = abs(1.0-(p/s)) #calculates the MAPE at the line level\n    return m\n\ndef e(r,c,u,s): #calculates average of the MAPEs\n    return np.mean(mape(c,u,s,r)) \n\nfor d in range(1,4):\n    div_data = data[data.DIV==d]\n    c = return_array(div_data.C)\n    u = return_array(div_data.U)\n    s = return_array(div_data.S)\n    r0 = [[1.0]]\n    t = fmin(e,r0,args=(c,u,s))\n    print 'r:',t\n</code></pre>\n\n<blockquote>\n  <p>Optimization terminated successfully.<br>\n           Current function value: 0.000011<br>\n           Iterations: 16<br>\n           Function evaluations: 32<br> r: [ 0.33330078] <br>Optimization terminated successfully.<br>\n           Current function value: 0.000000<br>\n           Iterations: 15<br>\n           Function evaluations: 30 <br>r: [ 0.5] <br>Optimization terminated successfully.<br>\n           Current function value: 0.000000<br>\n           Iterations: 10<br>\n           Function evaluations: 20 <br>r: [ 1.]</p>\n</blockquote>\n"}], "owner": {"reputation": 111, "user_id": 3990858, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/yzEsa.jpg?s=128&g=1", "display_name": "Mateyobi", "link": "https://stackoverflow.com/users/3990858/mateyobi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "accepted_answer_id": 38208567, "answer_count": 1, "score": 0, "last_activity_date": 1467736861, "creation_date": 1467240722, "question_id": 38111320, "link": "https://stackoverflow.com/questions/38111320/how-to-minimize-forecast-error-with-fmin", "title": "How to minimize forecast error with fmin?", "body": "<p>I'm trying to minimize forecast error by choosing the right \"fall out rate\" (r). I'm still fairly new to Pandas and brand new to SciPy. Please help!</p>\n\n<pre><code>import pandas as pd\nfrom scipy.optimize import fmin\n\ndata = pd.DataFrame({'Division': [1,2,3]*3,\n                     'Month': ['May','May','May','June','June','Jun','Jul','Jul','Jul'],\n                     'Definite_Units':[8]*9,\n                     'Maybe_Units':[3,2,1]*3,\n                     'Actually_Shipped_Units':[9]*9})\n\np = lambda r,x,y: x+y*r\ne = lambda r,x,y,z: abs(1-(p(x,y,r)/z))\n\nx = div_data['Definite_Units'].sum\ny = div_data['Maybe_Units'].sum\nz = div_data['Actually_Shipped_Units'].sum\n\nfor d in range(1,4):\n    r0 = 1\n    div_data = data['Division']=d\n    x = div_data['Definite_Units'].sum()\n    y = div_data['Maybe_Units'].sum()\n    z = div_data['Actually_Shipped_Units'].sum()\n    t = fmin(e,r0,args=(x,y,z))\n    print d, t\n</code></pre>\n\n<p>I want an r for each division that minimizes e.</p>\n\n<p>So in this case my outputs should be:</p>\n\n<ul>\n<li>Division 1: r = 0.33, e = 0 </li>\n<li>Division 2: r = 0.50, e = 0 </li>\n<li>Division 3: r = 1.00, e = 0</li>\n</ul>\n"}, {"tags": ["python", "json", "sqlalchemy", "flask-sqlalchemy"], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 3984576, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d6e0c7ee244a37d15113db81f78a9421?s=128&d=identicon&r=PG", "display_name": "user8363", "link": "https://stackoverflow.com/users/3984576/user8363"}, "edited": false, "score": 0, "creation_date": 1467240999, "post_id": 38111338, "comment_id": 63656278, "body": "i wasnt aware there existed this json module. Is it a part of pythons base?"}, {"owner": {"reputation": 3903, "user_id": 1434070, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/7uABI.jpg?s=128&g=1", "display_name": "fips", "link": "https://stackoverflow.com/users/1434070/fips"}, "reply_to_user": {"reputation": 55, "user_id": 3984576, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d6e0c7ee244a37d15113db81f78a9421?s=128&d=identicon&r=PG", "display_name": "user8363", "link": "https://stackoverflow.com/users/3984576/user8363"}, "edited": false, "score": 0, "creation_date": 1467241151, "post_id": 38111338, "comment_id": 63656337, "body": "yep, standard python, batteries included!"}, {"owner": {"reputation": 55, "user_id": 3984576, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d6e0c7ee244a37d15113db81f78a9421?s=128&d=identicon&r=PG", "display_name": "user8363", "link": "https://stackoverflow.com/users/3984576/user8363"}, "edited": false, "score": 0, "creation_date": 1467242258, "post_id": 38111338, "comment_id": 63656698, "body": "i am getting ` Decimal(&#39;1.00&#39;) is not JSON serializable` error when i use json.dumps()"}, {"owner": {"reputation": 3903, "user_id": 1434070, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/7uABI.jpg?s=128&g=1", "display_name": "fips", "link": "https://stackoverflow.com/users/1434070/fips"}, "reply_to_user": {"reputation": 55, "user_id": 3984576, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d6e0c7ee244a37d15113db81f78a9421?s=128&d=identicon&r=PG", "display_name": "user8363", "link": "https://stackoverflow.com/users/3984576/user8363"}, "edited": false, "score": 0, "creation_date": 1467242975, "post_id": 38111338, "comment_id": 63656948, "body": "right, forgot about this encoder issue of json. use <code>simplejson</code> instead, install using <code>pip install simplejson</code>, as that one supports decimal encoding. it has the same functions. answer updated."}, {"owner": {"reputation": 55, "user_id": 3984576, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d6e0c7ee244a37d15113db81f78a9421?s=128&d=identicon&r=PG", "display_name": "user8363", "link": "https://stackoverflow.com/users/3984576/user8363"}, "edited": false, "score": 0, "creation_date": 1467243069, "post_id": 38111338, "comment_id": 63656977, "body": "gotcha thanks so much, is simplejson a standard or something?"}, {"owner": {"reputation": 3903, "user_id": 1434070, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/7uABI.jpg?s=128&g=1", "display_name": "fips", "link": "https://stackoverflow.com/users/1434070/fips"}, "reply_to_user": {"reputation": 55, "user_id": 3984576, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d6e0c7ee244a37d15113db81f78a9421?s=128&d=identicon&r=PG", "display_name": "user8363", "link": "https://stackoverflow.com/users/3984576/user8363"}, "edited": false, "score": 0, "creation_date": 1467243255, "post_id": 38111338, "comment_id": 63657024, "body": "no, but is available in pypi: <a href=\"https://pypi.python.org/pypi/simplejson\" rel=\"nofollow noreferrer\">pypi.python.org/pypi/simplejson</a> and source code in github: <a href=\"https://github.com/simplejson/simplejson\" rel=\"nofollow noreferrer\">github.com/simplejson/simplejson</a>"}], "tags": [], "owner": {"reputation": 3903, "user_id": 1434070, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/7uABI.jpg?s=128&g=1", "display_name": "fips", "link": "https://stackoverflow.com/users/1434070/fips"}, "is_accepted": true, "score": 0, "last_activity_date": 1467243013, "last_edit_date": 1467243013, "creation_date": 1467240839, "answer_id": 38111338, "question_id": 38111176, "link": "https://stackoverflow.com/questions/38111176/how-to-make-sqlalchemy-to-json-function-that-doesnt-add-column-type-to-ouput/38111338#38111338", "title": "how to make SQLAlchemy to_json function that doesnt add column type to ouput?", "body": "<p>Use the json module to output proper json.</p>\n\n<pre><code>from simplejson import dumps\n\ndef to_json(self):\n    json_drinkIngredient = dumps({\n        \"ingredient\": self.ingredient.name,\n        \"amount\": self.units\n    })\n    return json_drinkIngredient\n</code></pre>\n\n<p>About your second question, the reason is that python dictionaries are unordered. If it's important to maintain the order with which you declared the keys use an <code>OrderedDict</code> and pass that object to <code>json.dumps</code>:</p>\n\n<pre><code>from collections import OrderedDict\n\nd=OrderedDict()\nd['ingredient']=self.ingredient.name\nd['amount']=self.units\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 3984576, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d6e0c7ee244a37d15113db81f78a9421?s=128&d=identicon&r=PG", "display_name": "user8363", "link": "https://stackoverflow.com/users/3984576/user8363"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 194, "favorite_count": 0, "accepted_answer_id": 38111338, "answer_count": 1, "score": 0, "last_activity_date": 1467243013, "creation_date": 1467239864, "question_id": 38111176, "link": "https://stackoverflow.com/questions/38111176/how-to-make-sqlalchemy-to-json-function-that-doesnt-add-column-type-to-ouput", "title": "how to make SQLAlchemy to_json function that doesnt add column type to ouput?", "body": "<p>I have an association object that accesses two fields in its to_json function. One is a string and one is a decimal number</p>\n\n<p>here is the object:</p>\n\n<pre><code>class DrinkIngredient(db.Model):\n    __tablename__ = 'drink_ingredient'\n    drink_id = db.Column(db.Integer, db.ForeignKey(\"drink.id\"), primary_key=True)\n    ingredient_id = db.Column(db.Integer, db.ForeignKey(\"ingredient.id\"), primary_key=True)\n    units = db.Column(db.Numeric(4, 2)) # Total of 4 digits, 2 after decimal: 00.00\n\n    ingredient = db.relationship(\"Ingredient\")\n\n    def __init__(self, ingredient=None, units=None):\n        self.ingredient = ingredient\n        self.units = units\n\n    def __repr__(self):\n        return '&lt;DrinkIngredient %g units of %r&gt;' % (self.units, self.ingredient)\n\n    def to_json(self):\n        json_drinkIngredient = {\n            \"ingredient\": self.ingredient.name,\n            \"amount\": self.units\n        }\n        return json_drinkIngredient\n</code></pre>\n\n<p>Ingredient.name is a string in another table called <code>Ingredient</code>.</p>\n\n<p>When i call this function I get an output like this\n<code>{'amount': Decimal('0.20'), 'ingredient': u'grenadine'}</code></p>\n\n<p>why is the <code>Decimal('...')</code> and <code>u'...'</code> being included and how do i correctly make these json objects without the type listed. </p>\n\n<p>Also this isn't a huge concern but i'd rather them be in the reverse order as that is the order i defined them in and I'm not sure why they aren't in that order.</p>\n"}, {"tags": ["javascript", "python", "data-visualization", "bokeh"], "owner": {"reputation": 29, "user_id": 6530703, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IpXgC.jpg?s=128&g=1", "display_name": "Vijay Viswanathan", "link": "https://stackoverflow.com/users/6530703/vijay-viswanathan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 423, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1574531223, "creation_date": 1467239705, "last_edit_date": 1574531223, "question_id": 38111149, "link": "https://stackoverflow.com/questions/38111149/how-to-create-a-dynamic-bar-chart-with-in-bokeh", "title": "How to create a dynamic bar chart with in Bokeh?", "body": "<p>I want to create a dynamic bar chart in Bokeh. Basically I have <em>n</em> arrays, stored in a matrix (corresponding to words and frequencies), and I want to be able to choose which array to display (with a slider from <em>0</em> to <em>n</em>), and change the axis labels correspondingly.</p>\n\n<p>When I try to reimplement <a href=\"https://demo.bokeh.org/sliders\" rel=\"nofollow noreferrer\">https://demo.bokeh.org/sliders</a> as a bar chart, the conversion between ColumnDataSource (for the callback) and Pandas Dataframe (for the bar chart) seems to break the callback.</p>\n\n<p>The end result should be something vaguely similar to <a href=\"http://nbviewer.jupyter.org/gist/chriddyp/9827cb5086cfab8da092/Pandas%20Widget%20-%20Time%20Series,%20Search,%20and%20Filtering.ipynb\" rel=\"nofollow noreferrer\">http://nbviewer.jupyter.org/gist/chriddyp/9827cb5086cfab8da092/Pandas%20Widget%20-%20Time%20Series,%20Search,%20and%20Filtering.ipynb</a>. Is this something that can be done in Bokeh? Am I better off using another non-Python service, like D3.js? IPython seems to be difficult for this case, but I'm open to anything.</p>\n\n<p>Please advise?</p>\n"}, {"tags": ["python", "text", "docx", "python-docx"], "answers": [{"comments": [{"owner": {"reputation": 782, "user_id": 5049858, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MXzyH.jpg?s=128&g=1", "display_name": "andrralv", "link": "https://stackoverflow.com/users/5049858/andrralv"}, "edited": false, "score": 0, "creation_date": 1467240136, "post_id": 38111181, "comment_id": 63655975, "body": "Yeah I read those pages too and I found methods such as &quot;add_paragraph()&quot; and &quot;add_run()&quot; but I could not find methods like &quot;get_paragraph()&quot;. I need to get objects to parse through and modify to make a new file. Maybe this library only works for creating docx documents but not for retrieving data from them?"}, {"owner": {"reputation": 19772, "user_id": 1902513, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/dde51d04370847170ede2450660334ac?s=128&d=identicon&r=PG", "display_name": "scanny", "link": "https://stackoverflow.com/users/1902513/scanny"}, "reply_to_user": {"reputation": 782, "user_id": 5049858, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MXzyH.jpg?s=128&g=1", "display_name": "andrralv", "link": "https://stackoverflow.com/users/5049858/andrralv"}, "edited": false, "score": 0, "creation_date": 1467240450, "post_id": 38111181, "comment_id": 63656085, "body": "Look in the Document object. I think you&#39;re looking for <code>Document.paragraphs</code>."}, {"owner": {"reputation": 2008, "user_id": 5534457, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/IiquF.jpg?s=128&g=1", "display_name": "Jeff", "link": "https://stackoverflow.com/users/5534457/jeff"}, "edited": false, "score": 0, "creation_date": 1467240596, "post_id": 38111181, "comment_id": 63656140, "body": "It seems too hacky to be an answer, but you can actually unzip Word documents and it returns, among other things, a text document with the unformatted text. I&#39;m not familiar with this library, but if worse comes to worst you could use one utility to unzip it, then read the text, delete the unneeded parts, then use this library to build the document you want."}], "tags": [], "owner": {"reputation": 19772, "user_id": 1902513, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/dde51d04370847170ede2450660334ac?s=128&d=identicon&r=PG", "display_name": "scanny", "link": "https://stackoverflow.com/users/1902513/scanny"}, "is_accepted": false, "score": 1, "last_activity_date": 1467239901, "creation_date": 1467239901, "answer_id": 38111181, "question_id": 38111130, "link": "https://stackoverflow.com/questions/38111130/python-docx-replacing-characters/38111181#38111181", "title": "python-docx - replacing characters", "body": "<p>The API documentation is indexed (i.e. its table of contents appears) on the page you link to and describes all the objects and methods. <a href=\"https://python-docx.readthedocs.io/en/latest/#api-documentation\" rel=\"nofollow\">https://python-docx.readthedocs.io/en/latest/#api-documentation</a></p>\n"}, {"tags": [], "owner": {"reputation": 782, "user_id": 5049858, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MXzyH.jpg?s=128&g=1", "display_name": "andrralv", "link": "https://stackoverflow.com/users/5049858/andrralv"}, "is_accepted": false, "score": 0, "last_activity_date": 1467241314, "creation_date": 1467241314, "answer_id": 38111432, "question_id": 38111130, "link": "https://stackoverflow.com/questions/38111130/python-docx-replacing-characters/38111432#38111432", "title": "python-docx - replacing characters", "body": "<p>I think I found something useful in case future readers might be interested. The problem with python-docx is I could get paragraphs individually and it would take a lot of time. I don't even know if titles, footers and headers count as paragraphs.</p>\n\n<p>But there is a library called textract that can read docx and other files, it integrates with python-docx, or at least that's what the short documentation says. But what I can do, is save my docx file to PDF and use:</p>\n\n<pre><code>text = textract.process(\n    'path/to/norwegian.pdf',\n    method='pdftofile',\n    language='nor',\n)\n</code></pre>\n\n<p>This allows you to get all the text as a string and save it preserving the layout of the pdf. Haven't tested it yet, will edit this post if it doesn't work as intended.</p>\n\n<p><a href=\"http://textract.readthedocs.io/en/latest/python_package.html#python-package\" rel=\"nofollow\">http://textract.readthedocs.io/en/latest/python_package.html#python-package</a></p>\n"}], "owner": {"reputation": 782, "user_id": 5049858, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MXzyH.jpg?s=128&g=1", "display_name": "andrralv", "link": "https://stackoverflow.com/users/5049858/andrralv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 794, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1467241314, "creation_date": 1467239565, "question_id": 38111130, "link": "https://stackoverflow.com/questions/38111130/python-docx-replacing-characters", "title": "python-docx - replacing characters", "body": "<p>I am trying to build a small program in which I open a docx document and replace characters by others, to do some old school caesar-style encrypting, after checking the documentation: [ <a href=\"https://python-docx.readthedocs.io\" rel=\"nofollow\">https://python-docx.readthedocs.io</a> ] I am afraid I can't find the object methods and attributes, the documentation just kind-of explains how to do certain stuff like creating paragraphs and sections but I can't find anything on retrieving document data and parsing. I would like to find a list of the objects in the document so I can parse through them. </p>\n\n<p>I would like to do something like this:</p>\n\n<pre><code>from docx import Document\ndocument = Document('essay.docx')\n\nparagraph = []\nfor i in document:\n    paragraph.append(i)\n\nfor i in paragraph:\n    for y in i:\n        y.replace(\"a\", \"y\")\n\n... \n</code></pre>\n\n<p>Can python-docx do something like this? If so where would I find the documentation that could show me how to do it?</p>\n\n<p>If maybe I am using the incorrect library I would also appreciate it if you could point it out.     </p>\n"}, {"tags": ["python", "tensorflow", "word2vec"], "comments": [{"owner": {"reputation": 12740, "user_id": 3907250, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/RIhjj.jpg?s=128&g=1", "display_name": "Aerin", "link": "https://stackoverflow.com/users/3907250/aerin"}, "edited": false, "score": 0, "creation_date": 1499571359, "post_id": 38111129, "comment_id": 76960192, "body": "did you find the answer? If so, could you add as an answer?"}], "answers": [{"tags": [], "owner": {"reputation": 75, "user_id": 1903382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3d0c0c79acfeba67da857a5851b6da4?s=128&d=identicon&r=PG", "display_name": "user1903382", "link": "https://stackoverflow.com/users/1903382/user1903382"}, "is_accepted": false, "score": 1, "last_activity_date": 1469268273, "creation_date": 1469268273, "answer_id": 38540523, "question_id": 38111129, "link": "https://stackoverflow.com/questions/38111129/tensorflow-implementation-of-word2vec/38540523#38540523", "title": "Tensorflow implementation of word2vec", "body": "<p>There is a parameter named <code>num_skips</code> which denotes the number of (input, output) pairs generated from the single window: [skip_window target skip_window]. So <code>num_skips</code> restrict the number of context words we would use as output words. And that is why the generate_batch function <code>assert num_skips &lt;= 2*skip_window</code>. The code just randomly pick up <code>num_skip</code> context words to construct training pairs with target.\nBut I don't know how <code>num_skips</code> affects the performance.</p>\n"}, {"comments": [{"owner": {"reputation": 7476, "user_id": 1931605, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/vMEvq.jpg?s=128&g=1", "display_name": "Shan Khan", "link": "https://stackoverflow.com/users/1931605/shan-khan"}, "edited": false, "score": 0, "creation_date": 1497989939, "post_id": 41122574, "comment_id": 76310166, "body": "what is in the get_context_indices"}, {"owner": {"reputation": 12740, "user_id": 3907250, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/RIhjj.jpg?s=128&g=1", "display_name": "Aerin", "link": "https://stackoverflow.com/users/3907250/aerin"}, "edited": false, "score": 0, "creation_date": 1499571371, "post_id": 41122574, "comment_id": 76960194, "body": "This doesn&#39;t answer the question."}, {"owner": {"reputation": 933, "user_id": 6329284, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/e0205464ef6f848e69bfadaed325b1f7?s=128&d=identicon&r=PG&f=1", "display_name": "zwep", "link": "https://stackoverflow.com/users/6329284/zwep"}, "reply_to_user": {"reputation": 12740, "user_id": 3907250, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/RIhjj.jpg?s=128&g=1", "display_name": "Aerin", "link": "https://stackoverflow.com/users/3907250/aerin"}, "edited": false, "score": 0, "creation_date": 1504105780, "post_id": 41122574, "comment_id": 78886755, "body": "@ToussaintLouverture It does answer question number 1. :) Which question are you referring to?"}], "tags": [], "owner": {"reputation": 5380, "user_id": 2305095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCenv.jpg?s=128&g=1", "display_name": "Kilian Batzner", "link": "https://stackoverflow.com/users/2305095/kilian-batzner"}, "is_accepted": false, "score": 3, "last_activity_date": 1504114967, "last_edit_date": 1504114967, "creation_date": 1481636410, "answer_id": 41122574, "question_id": 38111129, "link": "https://stackoverflow.com/questions/38111129/tensorflow-implementation-of-word2vec/41122574#41122574", "title": "Tensorflow implementation of word2vec", "body": "<p>I tried out your proposed way to generate batches - having a loop and using the whole skip-window. The results are:</p>\n\n<p><strong>1. Faster generation of batches</strong></p>\n\n<p>For a batch size of 128 and a skip window of 5</p>\n\n<ul>\n<li>generating batches by looping over the data one by one takes <strong>0.73s</strong> per 10,000 batches</li>\n<li>generating batches with the tutorial code and <code>num_skips=2</code> takes <strong>3.59s</strong> per 10,000 batches</li>\n</ul>\n\n<p><strong>2. Higher danger of overfitting</strong></p>\n\n<p>Keeping the rest of the tutorial code as it is, I trained the model with both ways and logged the average loss every 2000 steps:</p>\n\n<p><a href=\"https://i.stack.imgur.com/mZvUi.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/mZvUi.png\" alt=\"enter image description here\"></a></p>\n\n<p>This pattern occurred repeatedly. It shows that using 10 samples per word instead of 2 can cause overfitting.</p>\n\n<p>Here is the code that I used for generating the batches. It replaces the tutorial's <code>generate_batch</code> function.</p>\n\n<pre><code>data_index = 0\n\ndef generate_batch(batch_size, skip_window):\n    global data_index\n    batch = np.ndarray(shape=(batch_size), dtype=np.int32)  # Row\n    labels = np.ndarray(shape=(batch_size, 1), dtype=np.int32)  # Column\n\n    # For each word in the data, add the context to the batch and the word to the labels\n    batch_index = 0\n    while batch_index &lt; batch_size:\n        context = data[get_context_indices(data_index, skip_window)]\n\n        # Add the context to the remaining batch space\n        remaining_space = min(batch_size - batch_index, len(context))\n        batch[batch_index:batch_index + remaining_space] = context[0:remaining_space]\n        labels[batch_index:batch_index + remaining_space] = data[data_index]\n\n        # Update the data_index and the batch_index\n        batch_index += remaining_space\n        data_index = (data_index + 1) % len(data)\n\n    return batch, labels\n</code></pre>\n\n<p><strong>Edit:</strong> The <code>get_context_indices</code> is a simple function, which returns the index slice in the skip_window around data_index. See the <a href=\"https://docs.python.org/3.3/library/functions.html#slice\" rel=\"nofollow noreferrer\">slice() documentation</a> for more info.</p>\n"}], "owner": {"reputation": 13181, "user_id": 712997, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c5ad6f27f1e7160f6fdb9618e333caa9?s=128&d=identicon&r=PG", "display_name": "lollercoaster", "link": "https://stackoverflow.com/users/712997/lollercoaster"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3827, "favorite_count": 2, "answer_count": 2, "score": 13, "last_activity_date": 1504114967, "creation_date": 1467239554, "question_id": 38111129, "link": "https://stackoverflow.com/questions/38111129/tensorflow-implementation-of-word2vec", "title": "Tensorflow implementation of word2vec", "body": "<p>The Tensorflow tutorial <a href=\"https://www.tensorflow.org/versions/r0.9/tutorials/word2vec/index.html#vector-representations-of-words\" rel=\"noreferrer\">here</a> refers to their basic implementation which you can find on github <a href=\"https://github.com/tensorflow/tensorflow/blob/r0.9/tensorflow/examples/tutorials/word2vec/word2vec_basic.py\" rel=\"noreferrer\">here</a>, where the Tensorflow authors implement word2vec vector embedding training/evaluation with the Skipgram model. </p>\n\n<p>My question is about the actual generation of (target, context) pairs in the <code>generate_batch()</code> function. </p>\n\n<p>On <a href=\"https://github.com/tensorflow/tensorflow/blob/r0.9/tensorflow/examples/tutorials/word2vec/word2vec_basic.py#L107\" rel=\"noreferrer\">this line</a> Tensorflow authors randomly sample nearby target indices from the \"center\" word index in the sliding window of words. </p>\n\n<p>However, they <a href=\"https://github.com/tensorflow/tensorflow/blob/r0.9/tensorflow/examples/tutorials/word2vec/word2vec_basic.py#L104\" rel=\"noreferrer\">also keep a data structure <code>targets_to_avoid</code></a> to which they add first the \"center\" context word (which of course we don't want to sample) but ALSO other words after we add them. </p>\n\n<p>My questions are as follows:</p>\n\n<ol>\n<li>Why sample from this sliding window around the word, why not just have a loop and use them all rather than sampling? It seems strange they would worry about performance/memory in <code>word2vec_basic.py</code> (their \"basic\" implementation). </li>\n<li>Whatever the answer to 1) is, why are they <em>both</em> sampling and keeping track of what they've selected with <code>targets_to_avoid</code>? If they wanted truly random, they'd use selection with replacement, and if they wanted to ensure they got all the options, they should have just used a loop and gotten them all in the first place!</li>\n<li>Does the built in <a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/models/embedding/word2vec.py#L349\" rel=\"noreferrer\">tf.models.embedding.gen_word2vec</a> work this way too? If so where can I find the source code? (couldn't find the .py file in the Github repo)</li>\n</ol>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "twitter", "tweepy"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1467239851, "post_id": 38111125, "comment_id": 63655889, "body": "What&#39;s your tweepy version?"}, {"owner": {"reputation": 927, "user_id": 5056548, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/cd3c361fcc40952ff3373dd33dc84f1e?s=128&d=identicon&r=PG&f=1", "display_name": "Sitz Blogz", "link": "https://stackoverflow.com/users/5056548/sitz-blogz"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1467240349, "post_id": 38111125, "comment_id": 63656045, "body": "@user2357112 I am not able to find the version of tweepy, My python version is 2.7"}, {"owner": {"reputation": 927, "user_id": 5056548, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/cd3c361fcc40952ff3373dd33dc84f1e?s=128&d=identicon&r=PG&f=1", "display_name": "Sitz Blogz", "link": "https://stackoverflow.com/users/5056548/sitz-blogz"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1467240520, "post_id": 38111125, "comment_id": 63656105, "body": "@user2357112 It was 2.2.1 version previously and just now I have upgraded it to 3.5.0"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1467240612, "post_id": 38111125, "comment_id": 63656144, "body": "2.2.1 didn&#39;t have <code>wait_on_rate_limit</code>. Your upgrade to 3.5.0 should resolve this issue."}, {"owner": {"reputation": 927, "user_id": 5056548, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/cd3c361fcc40952ff3373dd33dc84f1e?s=128&d=identicon&r=PG&f=1", "display_name": "Sitz Blogz", "link": "https://stackoverflow.com/users/5056548/sitz-blogz"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1467240809, "post_id": 38111125, "comment_id": 63656207, "body": "@user2357112 After upgrade when I run the program I get the following warning and the program terminates"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1467240921, "post_id": 38111125, "comment_id": 63656248, "body": "Well, your program isn&#39;t programmed to do anything with that data it&#39;s scraping. Check the indentation on those last few lines."}, {"owner": {"reputation": 927, "user_id": 5056548, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/cd3c361fcc40952ff3373dd33dc84f1e?s=128&d=identicon&r=PG&f=1", "display_name": "Sitz Blogz", "link": "https://stackoverflow.com/users/5056548/sitz-blogz"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1467241620, "post_id": 38111125, "comment_id": 63656502, "body": "@user2357112 Yes changed and that gives me emtpy file with only header.  :("}], "owner": {"reputation": 927, "user_id": 5056548, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/cd3c361fcc40952ff3373dd33dc84f1e?s=128&d=identicon&r=PG&f=1", "display_name": "Sitz Blogz", "link": "https://stackoverflow.com/users/5056548/sitz-blogz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1019, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1467241541, "creation_date": 1467239542, "last_edit_date": 1467241541, "question_id": 38111125, "link": "https://stackoverflow.com/questions/38111125/typeerror-init-got-an-unexpected-keyword-argument-wait-on-rate-limit", "title": "TypeError: __init__() got an unexpected keyword argument &#39;wait_on_rate_limit&#39;", "body": "<p>I am trying to harvest twitter data with respect to Latitude and Longitude but I happen to get error. </p>\n\n<p>I am trying to avoid the tweet count limit and also the timing limit of scraping. </p>\n\n<p>Code:</p>\n\n<pre><code>import tweepy\nfrom tweepy import Stream\nfrom tweepy import OAuthHandler\nfrom tweepy.streaming import StreamListener\nimport pandas as pd\nimport json\nimport csv\nimport sys\nimport time\n\nreload(sys)\nsys.setdefaultencoding('utf8')\n\nckey = 'XYZ'\ncsecret = 'XYZ'\natoken = 'XYZ'\nasecret = 'XYZ'\n\nOAUTH_KEYS = {'consumer_key':ckey, 'consumer_secret':csecret, 'access_token_key':atoken, 'access_token_secret':asecret}\nauth = tweepy.OAuthHandler(OAUTH_KEYS['consumer_key'], OAUTH_KEYS['consumer_secret'])\n\napi = tweepy.API(auth, wait_on_rate_limit=True, wait_on_rate_limit_notify=True)\nif (not api):\n    print (\"Can't Authenticate\")\n    sys.exit(-1)\nelse:\n    print \" Scraping data now\" # Enter lat and long and radius in Kms  q='hello'\n    cursor = tweepy.Cursor(api.search,geocode=\"55.0000,4.0000,1000km\",since= '2016-06-27',until='2016-06-28',lang='en',count=100)\n    results=[]\n    for item in cursor.items(1000): # Remove the limit to 1000\n            results.append(item)\n\ndef toDataFrame(tweets):\n    # COnvert to data frame\n    DataSet = pd.DataFrame()\n\n    DataSet['tweetID'] = [tweet.id for tweet in tweets]\n    DataSet['tweetText'] = [tweet.text.encode('utf-8') for tweet in tweets]\n    DataSet['tweetRetweetCt'] = [tweet.retweet_count for tweet in tweets]\n    DataSet['tweetFavoriteCt'] = [tweet.favorite_count for tweet in tweets]\n    DataSet['tweetSource'] = [tweet.source for tweet in tweets]\n    DataSet['tweetCreated'] = [tweet.created_at for tweet in tweets]\n    DataSet['userID'] = [tweet.user.id for tweet in tweets]\n    DataSet['userScreen'] = [tweet.user.screen_name for tweet in tweets]\n    DataSet['userName'] = [tweet.user.name for tweet in tweets]\n    DataSet['userCreateDt'] = [tweet.user.created_at for tweet in tweets]\n    DataSet['userDesc'] = [tweet.user.description for tweet in tweets]\n    DataSet['userFollowerCt'] = [tweet.user.followers_count for tweet in tweets]\n    DataSet['userFriendsCt'] = [tweet.user.friends_count for tweet in tweets]\n    DataSet['userLocation'] = [tweet.user.location for tweet in tweets]\n    DataSet['userTimezone'] = [tweet.user.time_zone for tweet in tweets]\n    DataSet['Coordinates'] = [tweet.coordinates for tweet in tweets]\n    DataSet['GeoEnabled'] = [tweet.user.geo_enabled for tweet in tweets]\n    DataSet['Language'] = [tweet.user.lang for tweet in tweets]\n    tweets_place= []\n    #users_retweeted = []\n    for tweet in tweets:\n        if tweet.place:\n            tweets_place.append(tweet.place.full_name)\n        else:\n            tweets_place.append('null')\n    DataSet['TweetPlace'] = [i for i in tweets_place]\n    #DataSet['UserWhoRetweeted'] = [i for i in users_retweeted]\n\n    return DataSet\n\nDataSet = toDataFrame(results)\nDataSet.to_csv('Belgium_27.csv',index=False)\n</code></pre>\n\n<p>Error:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"CS.py\", line 23, in &lt;module&gt;\n    api = tweepy.API(auth, wait_on_rate_limit=True, wait_on_rate_limit_notify=True)\nTypeError: __init__() got an unexpected keyword argument 'wait_on_rate_limit'\n</code></pre>\n\n<p>What changes are to be made in order to solve the error and harvest the tweets?</p>\n\n<p><strong>Edit One</strong>: After <code>tweepy</code> upgrade I get the following warning and the program terminates automatically </p>\n\n<pre><code>Scraping data now\n/usr/local/lib/python2.7/dist-packages/requests/packages/urllib3/util/ssl_.py:318: SNIMissingWarning: An HTTPS request has been made, but the SNI (Subject Name Indication) extension to TLS is not available on this platform. This may cause the server to present an incorrect TLS certificate, which can cause validation failures. You can upgrade to a newer version of Python to solve this. For more information, see https://urllib3.readthedocs.org/en/latest/security.html#snimissingwarning.\n  SNIMissingWarning\n/usr/local/lib/python2.7/dist-packages/requests/packages/urllib3/util/ssl_.py:122: InsecurePlatformWarning: A true SSLContext object is not available. This prevents urllib3 from configuring SSL appropriately and may cause certain SSL connections to fail. You can upgrade to a newer version of Python to solve this. For more information, see https://urllib3.readthedocs.org/en/latest/security.html#insecureplatformwarning.\n  InsecurePlatformWarning\n</code></pre>\n\n<p><strong>Edit Two:</strong> After changing the indentation on write statements in the code. The program executes but returns only empty <code>CSV</code>.</p>\n"}, {"tags": ["python", "rabbitmq", "celery"], "answers": [{"comments": [{"owner": {"reputation": 508, "user_id": 193985, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FwRnA.jpg?s=128&g=1", "display_name": "Kon Pal", "link": "https://stackoverflow.com/users/193985/kon-pal"}, "edited": false, "score": 0, "creation_date": 1507287042, "post_id": 46128311, "comment_id": 80159650, "body": "Your example does not work for me. You have to remove <code>dead_letter_queue</code> from the <code>task_queues</code> otherwise celery worker will connect on this queue and consume the messages (without processing). Though an alternative way is needed to create these queues."}, {"owner": {"reputation": 316, "user_id": 703135, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0e5da306b120750f190f3921fe22142?s=128&d=identicon&r=PG&f=1", "display_name": "Hengfeng Li", "link": "https://stackoverflow.com/users/703135/hengfeng-li"}, "reply_to_user": {"reputation": 508, "user_id": 193985, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FwRnA.jpg?s=128&g=1", "display_name": "Kon Pal", "link": "https://stackoverflow.com/users/193985/kon-pal"}, "edited": false, "score": 0, "creation_date": 1508557950, "post_id": 46128311, "comment_id": 80667408, "body": "@K.P. I met the same issue as well. You are absolutely correct. Thanks for your solution. I tested it and it works great! :-)"}], "tags": [], "owner": {"reputation": 316, "user_id": 703135, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0e5da306b120750f190f3921fe22142?s=128&d=identicon&r=PG&f=1", "display_name": "Hengfeng Li", "link": "https://stackoverflow.com/users/703135/hengfeng-li"}, "is_accepted": false, "score": 4, "last_activity_date": 1504942744, "creation_date": 1504942744, "answer_id": 46128311, "question_id": 38111122, "link": "https://stackoverflow.com/questions/38111122/celery-how-can-i-route-a-failed-task-to-a-dead-letter-queue/46128311#46128311", "title": "Celery: how can I route a failed task to a dead-letter queue", "body": "<p>I think you should not add <code>arguments=DEAD_LETTER_CELERY_OPTIONS</code> in CELERY_EXCHANGE. You should add it to CELERY_QUEUE with <code>queue_arguments=DEAD_LETTER_CELERY_OPTIONS</code>. </p>\n\n<p>The following example is what I did and it works fine: </p>\n\n<pre><code>from celery import Celery\nfrom kombu import Exchange, Queue\nfrom celery.exceptions import Reject\n\napp = Celery(\n    'tasks',\n    broker='amqp://guest@localhost:5672//',\n    backend='redis://localhost:6379/0')\n\ndead_letter_queue_option = {\n    'x-dead-letter-exchange': 'dlx',\n    'x-dead-letter-routing-key': 'dead_letter'\n}\n\ndefault_exchange = Exchange('default', type='direct')\ndlx_exchange = Exchange('dlx', type='direct')\n\ndefault_queue = Queue(\n    'default',\n    default_exchange,\n    routing_key='default',\n    queue_arguments=dead_letter_queue_option)\ndead_letter_queue = Queue(\n    'dead_letter', dlx_exchange, routing_key='dead_letter')\n\napp.conf.task_queues = (default_queue, dead_letter_queue)\n\napp.conf.task_default_queue = 'default'\napp.conf.task_default_exchange = 'default'\napp.conf.task_default_routing_key = 'default'\n\n\n@app.task\ndef add(x, y):\n    return x + y\n\n\n@app.task(acks_late=True)\ndef div(x, y):\n    try:\n        z = x / y\n        return z\n    except ZeroDivisionError as exc:\n        raise Reject(exc, requeue=False)\n</code></pre>\n\n<p>After the creation of queue, you should see that on the 'Features' column, it shows <code>DLX</code> (dead-letter-exchange) and <code>DLK</code> (dead-letter-routing-key) labels. </p>\n\n<p><a href=\"https://i.stack.imgur.com/V97rj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/V97rj.png\" alt=\"enter image description here\"></a></p>\n\n<p>NOTE: You should delete the previous queues, if you have already created them in RabbitMQ. This is because celery won't delete the existing queue and re-create a new one. </p>\n"}, {"tags": [], "owner": {"reputation": 508, "user_id": 193985, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FwRnA.jpg?s=128&g=1", "display_name": "Kon Pal", "link": "https://stackoverflow.com/users/193985/kon-pal"}, "is_accepted": false, "score": 2, "last_activity_date": 1507710567, "last_edit_date": 1507710567, "creation_date": 1507298622, "answer_id": 46607586, "question_id": 38111122, "link": "https://stackoverflow.com/questions/38111122/celery-how-can-i-route-a-failed-task-to-a-dead-letter-queue/46607586#46607586", "title": "Celery: how can I route a failed task to a dead-letter queue", "body": "<p>I am having a similar case and I faced the same problems. I also wanted a solution that was based on configuration and not hard coded values. The proposed solution of <a href=\"https://stackoverflow.com/users/703135/hengfeng-li\">Hengfeng Li</a> was very helpfull and helped me understand the mechanism and the concepts. But there was a problem with the declaration of dead-letter queues. Specifically if you injected the DLQ in the <code>task_default_queues</code>, the Celery was consuming the queue and it was always empty. So a manual way of declaring DL(X/Q) was needed.</p>\n\n<p>I used Celery's <a href=\"http://docs.celeryproject.org/en/latest/userguide/extending.html\" rel=\"nofollow noreferrer\">Bootsteps</a> as they provide a good control on the stage that the code was run. My initial experiment was to create them exactly after the app creation but this created stalled connection after the forking of processes and it created an ugly exception. With a bootstep that runs exactly after the <code>Pool</code> step you can be guaranteed that it runs in the begining of each worker after it is forked and the connection pool is ready.</p>\n\n<p>Finally I created a decorator that converts uncaught exceptions to task rejections by reraising with celery's <code>Reject</code>. Special care is taken for cases where a task is already decided on how to be handled, such as retries.</p>\n\n<p>Here is a full working example. Try to run the task <code>div.delay(1, 0)</code> and see how it works.</p>\n\n<pre><code>from celery import Celery\nfrom celery.exceptions import Reject, TaskPredicate\nfrom functools import wraps\nfrom kombu import Exchange, Queue\n\nfrom celery import bootsteps\n\n\nclass Config(object):\n\n    APP_NAME = 'test'\n\n    task_default_queue = '%s_celery' % APP_NAME\n    task_default_exchange = \"%s_celery\" % APP_NAME\n    task_default_exchange_type = 'direct'\n    task_default_routing_key = task_default_queue\n    task_create_missing_queues = False\n    task_acks_late = True\n\n    # Configuration for DLQ support\n    dead_letter_exchange = '%s_dlx' % APP_NAME\n    dead_letter_exchange_type = 'direct'\n    dead_letter_queue = '%s_dlq' % APP_NAME\n    dead_letter_routing_key = dead_letter_queue\n\n\nclass DeclareDLXnDLQ(bootsteps.StartStopStep):\n    \"\"\"\n    Celery Bootstep to declare the DL exchange and queues before the worker starts\n        processing tasks\n    \"\"\"\n    requires = {'celery.worker.components:Pool'}\n\n    def start(self, worker):\n        app = worker.app\n\n        # Declare DLX and DLQ\n        dlx = Exchange(\n            app.conf.dead_letter_exchange,\n            type=app.conf.dead_letter_exchange_type)\n\n        dead_letter_queue = Queue(\n            app.conf.dead_letter_queue,\n            dlx,\n            routing_key=app.conf.dead_letter_routing_key)\n\n        with worker.app.pool.acquire() as conn:\n            dead_letter_queue.bind(conn).declare()\n\n\napp = Celery('tasks', broker='pyamqp://guest@localhost//')\napp.config_from_object(Config)\n\n\n# Declare default queues\n# We bypass the default mechanism tha creates queues in order to declare special queue arguments for DLX support\ndefault_exchange = Exchange(\n    app.conf.task_default_exchange,\n    type=app.conf.task_default_exchange_type)\ndefault_queue = Queue(\n        app.conf.task_default_queue,\n        default_exchange,\n        routing_key=app.conf.task_default_routing_key,\n        queue_arguments={\n            'x-dead-letter-exchange': app.conf.dead_letter_exchange,\n            'x-dead-letter-routing-key': app.conf.dead_letter_routing_key\n        })\n\n# Inject the default queue in celery application\napp.conf.task_queues = (default_queue,)\n\n# Inject extra bootstep that declares DLX and DLQ\napp.steps['worker'].add(DeclareDLXnDLQ)\n\n\ndef onfailure_reject(requeue=False):\n    \"\"\"\n    When a task has failed it will raise a Reject exception so\n    that the message will be requeued or marked for insertation in Dead Letter Exchange\n    \"\"\"\n\n    def _decorator(f):\n        @wraps(f)\n        def _wrapper(*args, **kwargs):\n\n            try:\n                return f(*args, **kwargs)\n            except TaskPredicate:\n                raise   # Do not handle TaskPredicate like Retry or Reject\n            except Exception as e:\n                print(\"Rejecting\")\n                raise Reject(str(e), requeue=requeue)\n        return _wrapper\n\n    return _decorator\n\n\n@app.task()\n@onfailure_reject()\ndef div(x, y):\n    return x / y\n</code></pre>\n\n<p><strong>Edit:</strong> I updated the code to use the new configuration schema of celery (lower-case) as I found some compatibility issues in Celery 4.1.0.</p>\n"}], "owner": {"reputation": 905, "user_id": 1830043, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/q768q.jpg?s=128&g=1", "display_name": "onizukaek", "link": "https://stackoverflow.com/users/1830043/onizukaek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4146, "favorite_count": 6, "answer_count": 2, "score": 16, "last_activity_date": 1527615939, "creation_date": 1467239518, "question_id": 38111122, "link": "https://stackoverflow.com/questions/38111122/celery-how-can-i-route-a-failed-task-to-a-dead-letter-queue", "title": "Celery: how can I route a failed task to a dead-letter queue", "body": "<p>I'm a newcomer to celery and I try to integrate this task queue into my project but I still don't figure out how celery handles the failed tasks and I'd like to keep all those in a amqp dead-letter queue.</p>\n\n<p>According to the doc <a href=\"http://docs.celeryproject.org/en/latest/userguide/tasks.html#reject\" rel=\"noreferrer\">here</a> it seems that raising Reject in a Task having acks_late enabled produces the same effect as acking the message and then we have a few words about dead-letter queues.</p>\n\n<p>So I added a custom default queue to my celery config</p>\n\n<pre><code>celery_app.conf.update(CELERY_ACCEPT_CONTENT=['application/json'],\n                       CELERY_TASK_SERIALIZER='json',\n                       CELERY_QUEUES=[CELERY_QUEUE,\n                                      CELERY_DLX_QUEUE],\n                       CELERY_DEFAULT_QUEUE=CELERY_QUEUE_NAME,\n                       CELERY_DEFAULT_EXCHANGE=CELERY_EXCHANGE\n                       )\n</code></pre>\n\n<p>and my kombu objects are looking like</p>\n\n<pre><code>CELERY_DLX_EXCHANGE = Exchange(CELERY_DLX_EXCHANGE_NAME, type='direct')\nCELERY_DLX_QUEUE = Queue(CELERY_DLX_QUEUE_NAME, exchange=DLX_EXCHANGE,\n                             routing_key='celery-dlq')\n\nDEAD_LETTER_CELERY_OPTIONS = {'x-dead-letter-exchange': CELERY_DLX_EXCHANGE_NAME,\n                          'x-dead-letter-routing-key': 'celery-dlq'}\n\nCELERY_EXCHANGE = Exchange(CELERY_EXCHANGE_NAME,\n                               arguments=DEAD_LETTER_CELERY_OPTIONS,\n                               type='direct')\n\nCELERY_QUEUE = Queue(CELERY_QUEUE_NAME,\n                         exchange=CELERY_EXCHANGE,\n                         routing_key='celery-q')\n</code></pre>\n\n<p>And the task I'm executing is:</p>\n\n<pre><code>class HookTask(Task):\n    acks_late = True\n\ndef run(self, ctx, data):\n    logger.info('{0} starting {1.name}[{1.request.id}]'.format(self.__class__.__name__.upper(), self))\n    self.hook_process(ctx, data)\n\n\ndef on_failure(self, exc, task_id, args, kwargs, einfo):\n    logger.error('task_id %s failed, message: %s', task_id, exc.message)\n\ndef hook_process(self, t_ctx, body):\n    # Build context\n    ctx = TaskContext(self.request, t_ctx)\n    logger.info('Task_id: %s, handling request %s', ctx.task_id, ctx.req_id)\n    raise Reject('no_reason', requeue=False)\n</code></pre>\n\n<p>I made a little test with it but with no results when raising a Reject exception.</p>\n\n<p>Now I'm wondering if it's a good idea to force the failed task route to the dead-letter queue by overriding the Task.on_failure. I think this would work but I also think that this solution is not so clean because according to what I red celery should do this all alone.</p>\n\n<p>Thanks for your help.</p>\n"}, {"tags": ["python", "twilio"], "comments": [{"owner": {"reputation": 3903, "user_id": 1434070, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/7uABI.jpg?s=128&g=1", "display_name": "fips", "link": "https://stackoverflow.com/users/1434070/fips"}, "edited": false, "score": 0, "creation_date": 1467240301, "post_id": 38111055, "comment_id": 63656028, "body": "Did you verify that phone number with Twilio? <a href=\"https://www.twilio.com/help/faq/phone-numbers/whats-the-difference-between-a-verified-phone-number-and-a-twilio-phone-number?utm_source=stack_overflow&amp;utm_medium=jan2014&amp;utm_campaign=stackathon\" rel=\"nofollow noreferrer\">twilio.com/help/faq/phone-numbers/&hellip;</a> Also you may want to use their phone validator to verify the whole number you are using: <a href=\"https://www.twilio.com/lookup\" rel=\"nofollow noreferrer\">twilio.com/lookup</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1096, "user_id": 6061947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99f89bd4c6b19d14dc3d682c08242cc4?s=128&d=identicon&r=PG&f=1", "display_name": "Cory Shay", "link": "https://stackoverflow.com/users/6061947/cory-shay"}, "is_accepted": true, "score": 2, "last_activity_date": 1467239833, "creation_date": 1467239833, "answer_id": 38111171, "question_id": 38111055, "link": "https://stackoverflow.com/questions/38111055/i-get-the-following-error-when-trying-to-send-a-message-to-my-phone-number-from/38111171#38111171", "title": "I get the following error when trying to send a message to my phone number from my Twilio number", "body": "<p>Have you made sure to add the <code>from_</code> number to your Twilio account on your <a href=\"https://www.twilio.com/user/account/phone-numbers\" rel=\"nofollow\">Account's phone numbers page</a>. <a href=\"https://www.twilio.com/docs/api/errors/21606\" rel=\"nofollow\">Error 21606</a> may have more information regarding this issue. If this is using your \"test credentials\" you will want to have a look at <a href=\"https://www.twilio.com/docs/api/errors/21606#test-credentials\" rel=\"nofollow\">test credentials</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 310, "user_id": 2485991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/so2Bn.jpg?s=128&g=1", "display_name": "January Mmako", "link": "https://stackoverflow.com/users/2485991/january-mmako"}, "is_accepted": false, "score": 0, "last_activity_date": 1467295634, "creation_date": 1467295634, "answer_id": 38125582, "question_id": 38111055, "link": "https://stackoverflow.com/questions/38111055/i-get-the-following-error-when-trying-to-send-a-message-to-my-phone-number-from/38125582#38125582", "title": "I get the following error when trying to send a message to my phone number from my Twilio number", "body": "<p>The twilio number (Your from number: should be sms-enabled) that you have bought doesn't seem to have Capabilities of sending smses.</p>\n"}], "owner": {"reputation": 58, "user_id": 5703393, "user_type": "registered", "profile_image": "https://graph.facebook.com/1085802901471106/picture?type=large", "display_name": "Udoh Success Benjamin", "link": "https://stackoverflow.com/users/5703393/udoh-success-benjamin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "accepted_answer_id": 38111171, "answer_count": 2, "score": 0, "last_activity_date": 1488869444, "creation_date": 1467239132, "question_id": 38111055, "link": "https://stackoverflow.com/questions/38111055/i-get-the-following-error-when-trying-to-send-a-message-to-my-phone-number-from", "title": "I get the following error when trying to send a message to my phone number from my Twilio number", "body": "<p>I get the following error when trying to send a message to my phone number from my Twilio number</p>\n\n<pre><code>    from twilio.rest import TwilioRestClient as TRC\n    client = TRC('AC**********************edc','a7b***************************3d2') # connect to an account\n    client.messages.create(from_='+17********25', to='+23***********27', body='Twilio\\'s the best!!') #create the message\n\n    Traceback\n    TwilioRestException: The From phone number +17*******25 is not a valid,\n    SMS-capable inbound phone number or short code for your account.\n</code></pre>\n\n<p>Can someone pls help me out?</p>\n"}, {"tags": ["python", "python-2.7", "theano"], "comments": [{"owner": {"reputation": 16773, "user_id": 5827215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-s_pAOw1Sc-M/AAAAAAAAAAI/AAAAAAAAAMA/J-R1IMHbuY4/photo.jpg?sz=128", "display_name": "Tadhg McDonald-Jensen", "link": "https://stackoverflow.com/users/5827215/tadhg-mcdonald-jensen"}, "edited": false, "score": 1, "creation_date": 1467239459, "post_id": 38111031, "comment_id": 63655752, "body": "What do you mean &quot;floating point exception&quot; does it give you an error message?"}, {"owner": {"reputation": 755, "user_id": 1999728, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/09894a0c70d01dd36d40a6b722dae5fa?s=128&d=identicon&r=PG", "display_name": "user1999728", "link": "https://stackoverflow.com/users/1999728/user1999728"}, "reply_to_user": {"reputation": 16773, "user_id": 5827215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-s_pAOw1Sc-M/AAAAAAAAAAI/AAAAAAAAAMA/J-R1IMHbuY4/photo.jpg?sz=128", "display_name": "Tadhg McDonald-Jensen", "link": "https://stackoverflow.com/users/5827215/tadhg-mcdonald-jensen"}, "edited": false, "score": 0, "creation_date": 1467269685, "post_id": 38111031, "comment_id": 63664536, "body": "@TadhgMcDonald-Jensen Nope. All I get is a message, <code>Floating point exception. Core dumped</code>. That&#39;s it. no traceback"}, {"owner": {"reputation": 5452, "user_id": 3714940, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bwcdU.jpg?s=128&g=1", "display_name": "SiHa", "link": "https://stackoverflow.com/users/3714940/siha"}, "edited": false, "score": 0, "creation_date": 1467270159, "post_id": 38111031, "comment_id": 63664799, "body": "You could use <a href=\"https://docs.python.org/2/library/pdb.html\" rel=\"nofollow noreferrer\">pdb</a> to single-step through the code and find the culprit, maybe?"}, {"owner": {"reputation": 755, "user_id": 1999728, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/09894a0c70d01dd36d40a6b722dae5fa?s=128&d=identicon&r=PG", "display_name": "user1999728", "link": "https://stackoverflow.com/users/1999728/user1999728"}, "reply_to_user": {"reputation": 5452, "user_id": 3714940, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bwcdU.jpg?s=128&g=1", "display_name": "SiHa", "link": "https://stackoverflow.com/users/3714940/siha"}, "edited": false, "score": 0, "creation_date": 1467270515, "post_id": 38111031, "comment_id": 63665028, "body": "@SiHa I wish. I&#39;m actually using a library called theano, which is very difficult to debug as it is. The package is very complex and there&#39;s a lot of code..."}, {"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 1, "creation_date": 1467287292, "post_id": 38111031, "comment_id": 63675981, "body": "You should single step through <i>your</i> code, unless you are trying to debug the library (which, if true, would have been relevant to say up front, no?)."}, {"owner": {"reputation": 13303, "user_id": 4221706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6d40a22e3e6556e376d9b6d64022beb?s=128&d=identicon&r=PG", "display_name": "hbaderts", "link": "https://stackoverflow.com/users/4221706/hbaderts"}, "edited": false, "score": 2, "creation_date": 1467287466, "post_id": 38111031, "comment_id": 63676077, "body": "Are you compiling with <a href=\"http://deeplearning.net/software/theano/library/compile/debugmode.html#debugmode\" rel=\"nofollow noreferrer\"><code>DebugMode</code></a>? That should actually give you more details on the exception."}, {"owner": {"reputation": 957, "user_id": 241449, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2186e022c9de2aa4a22b0b01c846c4b6?s=128&d=identicon&r=PG", "display_name": "Yusufk", "link": "https://stackoverflow.com/users/241449/yusufk"}, "edited": false, "score": 0, "creation_date": 1469024155, "post_id": 38111031, "comment_id": 64369700, "body": "I&#39;ve got the same issue, and I think it has to do with the decoder not being able to pick up the incoming frame rate and setting it to 0, causing a divide by 0 error. Not sure if incoming frame rate can be set somewhere?"}, {"owner": {"reputation": 574, "user_id": 4580942, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/04db2e5a951d4ed41cd3d1bdeeda3073?s=128&d=identicon&r=PG&f=1", "display_name": "Shekhar Samanta", "link": "https://stackoverflow.com/users/4580942/shekhar-samanta"}, "edited": false, "score": 0, "creation_date": 1526030634, "post_id": 38111031, "comment_id": 87594200, "body": "Ubuntu specific issue with memory allocation"}], "owner": {"reputation": 755, "user_id": 1999728, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/09894a0c70d01dd36d40a6b722dae5fa?s=128&d=identicon&r=PG", "display_name": "user1999728", "link": "https://stackoverflow.com/users/1999728/user1999728"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 4353, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1467287195, "creation_date": 1467239004, "last_edit_date": 1467287195, "question_id": 38111031, "link": "https://stackoverflow.com/questions/38111031/debugging-floating-point-exception-in-python", "title": "Debugging floating-point exception in python", "body": "<p>I'm trying to run something that gives me a floating point exception (<code>Floating point exception. Core dumped</code>. No traceback). Since that kind of exception can't be caught using usual <code>try</code> and <code>except</code>, I can't figure out what's causing the exception.</p>\n\n<p>Since I'm working on a VM, I'm not concerned about the implications of using <code>fpectl</code>. However, since I'm using anaconda python, I have no idea how to reinstall it with the appropriate flag. I tried downloading a python distribution from the official website and build it with the flag. The build seemed to be successful, but the when running <code>python</code> from the terminal, it still opens anaconda python one (I thought the default would be overwritten).</p>\n\n<p>Is there a better way to debug a floating point exception, or to install <code>fpectl</code> without having to reinstall anaconda python?</p>\n"}, {"tags": ["python", "arrays", "numpy"], "answers": [{"tags": [], "owner": {"reputation": 515, "user_id": 6475616, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qehFY.jpg?s=128&g=1", "display_name": "Wokpak", "link": "https://stackoverflow.com/users/6475616/wokpak"}, "is_accepted": false, "score": 0, "last_activity_date": 1467242187, "last_edit_date": 1467242187, "creation_date": 1467241494, "answer_id": 38111461, "question_id": 38111010, "link": "https://stackoverflow.com/questions/38111010/how-to-index-a-numpy-array-using-conditions/38111461#38111461", "title": "how to index a numpy array using conditions?", "body": "<p>While this uses <code>list</code> to collect results and requires a <code>for</code> loop, this collects the second column values once the first column has passed some criteria (in a <code>list</code> of acceptable results in this case).</p>\n\n<pre><code>a = np.array([[2, 1],\n              [4, 2],\n              [1, 3]])\nb = []\ncriteria = [2, 4]\n\nfor entry in a:\n    if entry[0] in criteria:\n        b.append(entry[1])\n\nb = np.array(b)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320, "user_id": 3033791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a4de76c7326b62d116ea5c266b010d1?s=128&d=identicon&r=PG&f=1", "display_name": "rwhitt2049", "link": "https://stackoverflow.com/users/3033791/rwhitt2049"}, "is_accepted": false, "score": 0, "last_activity_date": 1467250930, "creation_date": 1467250930, "answer_id": 38112660, "question_id": 38111010, "link": "https://stackoverflow.com/questions/38111010/how-to-index-a-numpy-array-using-conditions/38112660#38112660", "title": "how to index a numpy array using conditions?", "body": "<p>You could create a mask based off of your first column, and then use that to mask off the second column.</p>\n\n<pre><code>import numpy as np\n\na = np.array([[2, 1],\n              [4, 2], \n              [1, 3]])\n\nmask = np.logical_or(a[:,0] == 2, a[:,0] == 4)\n\nb = a[:,1][mask]\n\nprint(b)\n</code></pre>\n\n<p>Returns:</p>\n\n<pre><code>[1, 2]\n</code></pre>\n\n<p>It could get a little clumsy if you have many values you want to compare to.</p>\n"}], "owner": {"reputation": 417, "user_id": 6490995, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/1b7bd66fc5eb9c8aa4daad79ec3c5440?s=128&d=identicon&r=PG&f=1", "display_name": "tnabdb", "link": "https://stackoverflow.com/users/6490995/tnabdb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 190, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1467250930, "creation_date": 1467238844, "question_id": 38111010, "link": "https://stackoverflow.com/questions/38111010/how-to-index-a-numpy-array-using-conditions", "title": "how to index a numpy array using conditions?", "body": "<p>Suppose I have an array like this:</p>\n\n<pre><code>a = np.array([[2,1],\n              [4,2],\n              [1,3],...]\n</code></pre>\n\n<p>I want to retrieve the elements of the second column where the corresponding elements in the first column match some condition. So something like</p>\n\n<pre><code>a[a[:,0] == np.array([2,4]),1] (?)\n</code></pre>\n\n<p>should give</p>\n\n<pre><code>np.array([1,2])\n</code></pre>\n"}, {"tags": ["python", "regex", "negative-lookahead", "negative-lookbehind"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1467238974, "post_id": 38111004, "comment_id": 63655580, "body": "Are you sure regex is the best tool for this?"}, {"owner": {"reputation": 57, "user_id": 6530674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27a332be98baf288070a9521c393f5b1?s=128&d=identicon&r=PG&f=1", "display_name": "jengelhart", "link": "https://stackoverflow.com/users/6530674/jengelhart"}, "reply_to_user": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1467239266, "post_id": 38111004, "comment_id": 63655689, "body": "Not positive, but I&#39;m building the regex string from user provided search terms to search across a million or so code lines. I think I&#39;d be better off running one regex pattern across each of those lines rather than each term in a list of terms across each of those lines."}, {"owner": {"reputation": 28245, "user_id": 1547004, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5255289d0269d550a4e80e6bf6b0f590?s=128&d=identicon&r=PG", "display_name": "Brendan Abel", "link": "https://stackoverflow.com/users/1547004/brendan-abel"}, "edited": false, "score": 0, "creation_date": 1467239430, "post_id": 38111004, "comment_id": 63655743, "body": "Why is <code>telepath</code> allowed but not <code>filepath</code>?  How are you determining your criteria as to what words are allowed/disallowed?"}, {"owner": {"reputation": 28245, "user_id": 1547004, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5255289d0269d550a4e80e6bf6b0f590?s=128&d=identicon&r=PG", "display_name": "Brendan Abel", "link": "https://stackoverflow.com/users/1547004/brendan-abel"}, "edited": false, "score": 0, "creation_date": 1467239603, "post_id": 38111004, "comment_id": 63655803, "body": "This sounds like an <a href=\"http://xyproblem.info/\" rel=\"nofollow noreferrer\">XY Problem</a>.  What are you <i>really</i> trying to do?  Are you trying to find a list of certain words?  Are you just trying to exclude specific words from the match?"}, {"owner": {"reputation": 57, "user_id": 6530674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27a332be98baf288070a9521c393f5b1?s=128&d=identicon&r=PG&f=1", "display_name": "jengelhart", "link": "https://stackoverflow.com/users/6530674/jengelhart"}, "edited": false, "score": 0, "creation_date": 1467239925, "post_id": 38111004, "comment_id": 63655917, "body": "A user is entering terms to exclude and it would be sloppy to exclude terms the user didn&#39;t ask to be excluded. Therefore, if a user wants to exclude &#39;telephone,&#39; I don&#39;t want to exclude some other arbitrary combination of excluded prefixes/suffixes. &#39;telepathy&#39; is just an example, but &#39;telephone&#39; does actually occur thousands of times in the result set without any sort of exclusionary criteria."}, {"owner": {"reputation": 15290, "user_id": 1913824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7793dc1a1117c0583651f716630e2403?s=128&d=identicon&r=PG", "display_name": "Andrea Corbellini", "link": "https://stackoverflow.com/users/1913824/andrea-corbellini"}, "edited": false, "score": 0, "creation_date": 1467240908, "post_id": 38111004, "comment_id": 63656243, "body": "You can use something like <code>(?&lt;!te|fi)lep(?!hone|ath)|telepath|filephone</code> (of course you can write a better version of it)"}, {"owner": {"reputation": 6424, "user_id": 3579910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoMjv.jpg?s=128&g=1", "display_name": "TemporalWolf", "link": "https://stackoverflow.com/users/3579910/temporalwolf"}, "edited": false, "score": 0, "creation_date": 1467243088, "post_id": 38111004, "comment_id": 63656982, "body": "That doesn&#39;t make sense to me. If I ask to exclude <code>tele</code>... I would expect <code>telephone</code> and <code>telepath</code> to be excluded... how does one decide what should or should not be excluded? Why are you selected a small subset to match instead of the entire exclusion?"}], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 6530674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27a332be98baf288070a9521c393f5b1?s=128&d=identicon&r=PG&f=1", "display_name": "jengelhart", "link": "https://stackoverflow.com/users/6530674/jengelhart"}, "edited": false, "score": 0, "creation_date": 1467294090, "post_id": 38111827, "comment_id": 63680888, "body": "That&#39;s excellent. Thanks for your help. What makes putting lookbehinds last more efficient? Does it have anything to do with being able to disregard the lookbehind if the portion you are trying to match fails for a substring of the string being searched?"}, {"owner": {"reputation": 68253, "user_id": 20938, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CuXSm.jpg?s=128&g=1", "display_name": "Alan Moore", "link": "https://stackoverflow.com/users/20938/alan-moore"}, "reply_to_user": {"reputation": 57, "user_id": 6530674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27a332be98baf288070a9521c393f5b1?s=128&d=identicon&r=PG&f=1", "display_name": "jengelhart", "link": "https://stackoverflow.com/users/6530674/jengelhart"}, "edited": false, "score": 0, "creation_date": 1467303223, "post_id": 38111827, "comment_id": 63688069, "body": "That&#39;s it exactly.  Lookbehinds aren&#39;t the performance-eating monsters many people make them out to be, but on very large texts like you&#39;re working with, the optimization is worthwhile."}], "tags": [], "owner": {"reputation": 68253, "user_id": 20938, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CuXSm.jpg?s=128&g=1", "display_name": "Alan Moore", "link": "https://stackoverflow.com/users/20938/alan-moore"}, "is_accepted": true, "score": 1, "last_activity_date": 1467243953, "creation_date": 1467243953, "answer_id": 38111827, "question_id": 38111004, "link": "https://stackoverflow.com/questions/38111004/how-can-i-use-use-a-regex-to-match-characters-that-arent-included-in-certain-wo/38111827#38111827", "title": "How can I use use a regex to match characters that aren&#39;t included in certain words?", "body": "<p>You can place lookaheads inside lookbehinds (and vice-versa; any combination, really, so long as every lookbehind has a fixed length).  That allows you to combine the two conditions into one (<em>doesn't begin with X <strong>and</strong> end with Y</em>):</p>\n\n<pre><code>lep(?&lt;!telep(?=hone))(?&lt;!filep(?=ath))\n</code></pre>\n\n<p>Putting the lookbehinds last is more efficient, too.  I would advise doing it that way even if there's no suffix (for example, <code>lep(?&lt;!filep)</code> to exclude <code>filep</code>).</p>\n\n<p>However, generating the regexes from user input like <code>lep -telephone -filepath</code> promises to be finicky and tedious.  If you can, it would be much easier to search for the unwanted terms first and eliminate them.  For example, search for:</p>\n\n<pre><code>(?:telephone|filepath|(lep))\n</code></pre>\n\n<p>If the search succeeds and <code>group(1)</code> is not <code>None</code>, it's a hit.</p>\n"}], "owner": {"reputation": 57, "user_id": 6530674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27a332be98baf288070a9521c393f5b1?s=128&d=identicon&r=PG&f=1", "display_name": "jengelhart", "link": "https://stackoverflow.com/users/6530674/jengelhart"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 38111827, "answer_count": 1, "score": 0, "last_activity_date": 1467243953, "creation_date": 1467238809, "question_id": 38111004, "link": "https://stackoverflow.com/questions/38111004/how-can-i-use-use-a-regex-to-match-characters-that-arent-included-in-certain-wo", "title": "How can I use use a regex to match characters that aren&#39;t included in certain words?", "body": "<p>Suppose I want to return all occurrences of 'lep' in a string in Python, but not if an occurrence is in a substring like 'filepath' or 'telephone'. Right now I am using a combination of negative lookahead/lookbehind:</p>\n\n<pre><code>(?&lt;!te|fi)lep(?!hone|ath)\n</code></pre>\n\n<p>However, I do want 'telepath' and 'filephone' as well as 'filep' and 'telep'. I've seen similar questions but not one that addresses this type of combination of lookahead/behind.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 16773, "user_id": 5827215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-s_pAOw1Sc-M/AAAAAAAAAAI/AAAAAAAAAMA/J-R1IMHbuY4/photo.jpg?sz=128", "display_name": "Tadhg McDonald-Jensen", "link": "https://stackoverflow.com/users/5827215/tadhg-mcdonald-jensen"}, "edited": false, "score": 0, "creation_date": 1467239401, "post_id": 38111000, "comment_id": 63655737, "body": "Slicing uses indices, not values.  you can get the indice of that value with the <code>.index()</code> method but you will A: need to  store the return value of <code>text.split(&quot; &quot;)</code> before passing it into islice to use .index correctly and B: use the correct word that represents your start, <code>&quot;start&quot;</code> is not present in your sentence but <code>&quot;starts&quot;</code> is."}, {"owner": {"reputation": 37, "user_id": 5809091, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/8e1d49a4b4d983550b6ab9e32c7868ca?s=128&d=identicon&r=PG&f=1", "display_name": "FrankBud", "link": "https://stackoverflow.com/users/5809091/frankbud"}, "reply_to_user": {"reputation": 16773, "user_id": 5827215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-s_pAOw1Sc-M/AAAAAAAAAAI/AAAAAAAAAMA/J-R1IMHbuY4/photo.jpg?sz=128", "display_name": "Tadhg McDonald-Jensen", "link": "https://stackoverflow.com/users/5827215/tadhg-mcdonald-jensen"}, "edited": false, "score": 0, "creation_date": 1467239745, "post_id": 38111000, "comment_id": 63655858, "body": "baaaaam that did it. Thanks a lot @TadhgMcDonald-Jensen I need to eat the same food you eat to be as smart as you are :))"}], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 5809091, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/8e1d49a4b4d983550b6ab9e32c7868ca?s=128&d=identicon&r=PG&f=1", "display_name": "FrankBud", "link": "https://stackoverflow.com/users/5809091/frankbud"}, "edited": false, "score": 0, "creation_date": 1467239327, "post_id": 38111053, "comment_id": 63655711, "body": "Thank you and excuse my ignorance. When you say index, do you mean it in the sense of text[5] for the start word index and text[15] ?"}, {"owner": {"reputation": 3202, "user_id": 3358074, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vnKYD.png?s=128&g=1", "display_name": "dmitryro", "link": "https://stackoverflow.com/users/3358074/dmitryro"}, "reply_to_user": {"reputation": 37, "user_id": 5809091, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/8e1d49a4b4d983550b6ab9e32c7868ca?s=128&d=identicon&r=PG&f=1", "display_name": "FrankBud", "link": "https://stackoverflow.com/users/5809091/frankbud"}, "edited": false, "score": 0, "creation_date": 1467239380, "post_id": 38111053, "comment_id": 63655725, "body": "Yes, there&#39;s a number of different ways to figure out them.  You&#39;re welcome."}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 1, "creation_date": 1467239517, "post_id": 38111053, "comment_id": 63655773, "body": "Mind you, if you know the index, you may as well just slice; <code>islice</code> is inefficient for skipping many values if the data is already in memory anyway, it has to iterate through to the start point, and while it does it efficiently, if it&#39;s already a <code>list</code>, real slicing can skip that entirely."}], "tags": [], "owner": {"reputation": 3202, "user_id": 3358074, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vnKYD.png?s=128&g=1", "display_name": "dmitryro", "link": "https://stackoverflow.com/users/3358074/dmitryro"}, "is_accepted": false, "score": 2, "last_activity_date": 1467239126, "creation_date": 1467239126, "answer_id": 38111053, "question_id": 38111000, "link": "https://stackoverflow.com/questions/38111000/python-itertools-with-islice-error/38111053#38111053", "title": "python itertools with islice error", "body": "<p>You need to calculate the index of 'start' and 'stop' and then you provide\n    two integer values, not strings:</p>\n\n<pre><code>for i in islice(text.split(\" \"), startword_index, stopword_index):\n    print i\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 16773, "user_id": 5827215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-s_pAOw1Sc-M/AAAAAAAAAAI/AAAAAAAAAMA/J-R1IMHbuY4/photo.jpg?sz=128", "display_name": "Tadhg McDonald-Jensen", "link": "https://stackoverflow.com/users/5827215/tadhg-mcdonald-jensen"}, "edited": false, "score": 0, "creation_date": 1467240136, "post_id": 38111184, "comment_id": 63655974, "body": "A true python slice like operation would leave in the start value, Also maybe use a different variable name so the original text is still available.  Other then that I like this solution."}, {"owner": {"reputation": 37, "user_id": 5809091, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/8e1d49a4b4d983550b6ab9e32c7868ca?s=128&d=identicon&r=PG&f=1", "display_name": "FrankBud", "link": "https://stackoverflow.com/users/5809091/frankbud"}, "edited": false, "score": 0, "creation_date": 1467240174, "post_id": 38111184, "comment_id": 63655987, "body": "Thank you @ShadowRanger this is perfect explanation. how would it look if my starting word is more than &quot;starts&quot; say &quot;starts with&quot;"}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "reply_to_user": {"reputation": 16773, "user_id": 5827215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-s_pAOw1Sc-M/AAAAAAAAAAI/AAAAAAAAAMA/J-R1IMHbuY4/photo.jpg?sz=128", "display_name": "Tadhg McDonald-Jensen", "link": "https://stackoverflow.com/users/5827215/tadhg-mcdonald-jensen"}, "edited": false, "score": 0, "creation_date": 1467240417, "post_id": 38111184, "comment_id": 63656070, "body": "@TadhgMcDonald-Jensen: Yar, alternate variables to preserve the original string aren&#39;t a bad idea. I avoided preserving <code>start</code> simply because I felt it was closer to a delimiter than part of the data to be kept, but that&#39;s obviously problem dependent."}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "reply_to_user": {"reputation": 37, "user_id": 5809091, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/8e1d49a4b4d983550b6ab9e32c7868ca?s=128&d=identicon&r=PG&f=1", "display_name": "FrankBud", "link": "https://stackoverflow.com/users/5809091/frankbud"}, "edited": false, "score": 0, "creation_date": 1467240503, "post_id": 38111184, "comment_id": 63656099, "body": "@FrankBud: You can change the first <code>split</code> argument to whatever you like, it will be removed, as will everything before it. If it&#39;s more complex (any word that begins with <code>start</code>, but might have trailing additional characters), it&#39;s probably best to move to <code>re.split</code> with a pattern like <code>r&#39;\\bstart\\w*\\b&#39;</code>."}], "tags": [], "owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "is_accepted": false, "score": 2, "last_activity_date": 1467239925, "creation_date": 1467239925, "answer_id": 38111184, "question_id": 38111000, "link": "https://stackoverflow.com/questions/38111000/python-itertools-with-islice-error/38111184#38111184", "title": "python itertools with islice error", "body": "<p>In this particular case, <code>islice</code> is a poor choice; you have all the data in memory, in a realized sequence, so <code>islice</code> is just wasting time iterating the leading values. There are many better ways to handle this, either using <code>index</code> to find the <code>start</code> and <code>end</code> indices and doing a true slice, or to get more clever, and reduce the work by splitting out the <code>start/end</code> delimited section and only splitting that part to extract words. For example:</p>\n\n<pre><code>text = \"this is a text that starts with some test stuff and then after that it stop right here!\"\n\n_, text = text.split('start', 1)  # Remove start and stuff before it\ntext, _ = text.rsplit('stop', 1)  # Remove stop and stuff after it\n\nfor word in text.split():  # Split what remains on whitespace\n    print word\n</code></pre>\n\n<p>Mind you, this still isn't quite right (your bounded region begins with \"starts\" not \"start\", so you end up with a leading \"word\" of \"s\"), but switching to <code>re.split</code> with appropriate bounding and wildcarding could be used to fix that in whatever way is appropriate to your scenario.</p>\n"}], "owner": {"reputation": 37, "user_id": 5809091, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/8e1d49a4b4d983550b6ab9e32c7868ca?s=128&d=identicon&r=PG&f=1", "display_name": "FrankBud", "link": "https://stackoverflow.com/users/5809091/frankbud"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1707, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1467239925, "creation_date": 1467238787, "question_id": 38111000, "link": "https://stackoverflow.com/questions/38111000/python-itertools-with-islice-error", "title": "python itertools with islice error", "body": "<p>I'm still learning python and I have the code below but it is not working:</p>\n\n<pre><code>from itertools import *\n\nstartword = [\"start\",]\nstopword = [\"stop\",]\ntext = \"this is a text that starts with some test stuff and then after that it stop right here!\"\n\nfor i in islice(text.split(\" \"), startword, stopword):\n    print i\n</code></pre>\n\n<p>I'm trying to print the words between the start and stop without knowing how many words are there in between.\nfrom the error I'm getting it look like I need an integer for start and stop parameters for islice. here is the error \"<code>ValueError: Indices for islice() must be None or an integer: 0 &lt;= x &lt;= maxing.</code>\"\nany other itertool that I can use?!</p>\n\n<p>Thanks,</p>\n"}, {"tags": ["python", "fonts", "pygame"], "comments": [{"owner": {"reputation": 5662, "user_id": 5781248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/712de4f2f811d1a400d3311c9cdd5836?s=128&d=identicon&r=PG&f=1", "display_name": "J.J. Hakala", "link": "https://stackoverflow.com/users/5781248/j-j-hakala"}, "edited": false, "score": 2, "creation_date": 1467250123, "post_id": 38110911, "comment_id": 63658615, "body": "<code>red</code> in <code>message_to_display(&quot;You Lose&quot;, red)</code> has not been defined anywhere"}], "answers": [{"tags": [], "owner": {"reputation": 7155, "user_id": 6486738, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10205523648805608/picture?type=large", "display_name": "Ted Klein Bergman", "link": "https://stackoverflow.com/users/6486738/ted-klein-bergman"}, "is_accepted": true, "score": 2, "last_activity_date": 1468003806, "last_edit_date": 1468003806, "creation_date": 1467996508, "answer_id": 38271844, "question_id": 38110911, "link": "https://stackoverflow.com/questions/38110911/pygame-font-not-working-and-not-showing-any-errors-also/38271844#38271844", "title": "pygame.font not working and not showing any errors also", "body": "<p>The reason you see nothing is because you haven't <strong><em>updated</em></strong> or <strong><em>'flipped'</em></strong> the display. After you've created the text Surface and blit it to the gameDisplay Surface you have to update/'flip' the display so it becomes visible to the user.</p>\n\n<p>So, between <code>message_to_display(\"You Lose\", red)</code> and <code>time.sleep(3)</code> you put <code>pygame.display.update()</code>or <code>pygame.display.flip()</code> (it doesn't matter which). Like this:</p>\n\n<pre><code># import library here\nimport pygame\nimport time\nimport sys\n\n# display init\ndisplay_width = 800\ndisplay_height = 600\n\n# game initialization done\npygame.init()\n\n# game display changed\ngameDisplay = pygame.display.set_mode((display_width, display_height))\n\n# init font object with font size 25 \nfont = pygame.font.SysFont(None, 25)\n\ndef message_to_display(msg, color):\n    screen_text = font.render(msg, True, color)\n    gameDisplay.blit(screen_text, [10, 10])\n\nmessage_to_display(\"You Lose\", red)\npygame.display.update()  # VERY IMPORTANT! THIS IS WHAT YOU MISSED!\ntime.sleep(3)\n\npygame.quit()\n# you can signoff now, everything looks good!\nquit()\n</code></pre>\n\n<p>Also, as <em>J.J. Hakala</em> pointed out, you have to define <strong><em>red</em></strong> in <code>message_to_display(\"You Lose\", red)</code> as well.</p>\n"}], "owner": {"reputation": 772, "user_id": 5816974, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/x3dg1.jpg?s=128&g=1", "display_name": "Amar Prakash Pandey", "link": "https://stackoverflow.com/users/5816974/amar-prakash-pandey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1446, "favorite_count": 0, "accepted_answer_id": 38271844, "answer_count": 1, "score": -1, "last_activity_date": 1468003806, "creation_date": 1467238350, "question_id": 38110911, "link": "https://stackoverflow.com/questions/38110911/pygame-font-not-working-and-not-showing-any-errors-also", "title": "pygame.font not working and not showing any errors also", "body": "<p>Everything is working fine except that font thing, i don't know why it's happening and it's not even showing any error. And not displaying the Text on screen.</p>\n\n<pre><code># import library here\nimport pygame\nimport time\nimport sys\n\n# display init\ndisplay_width = 800\ndisplay_height = 600\n\n# game initialization done\npygame.init()\n\n# game display changed\ngameDisplay = pygame.display.set_mode((display_width, display_height))\n\n# init font object with font size 25 \nfont = pygame.font.SysFont(None, 25)\n\ndef message_to_display(msg, color):\n    screen_text = font.render(msg, True, color)\n    gameDisplay.blit(screen_text, [10, 10])\n\nmessage_to_display(\"You Lose\", red)\ntime.sleep(3)\n\npygame.quit()\n# you can signoff now, everything looks good!\nquit()\n</code></pre>\n"}, {"tags": ["python", "automation"], "comments": [{"owner": {"reputation": 259, "user_id": 5096003, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ae58bfe93e163cc06b0d37ee766cb3a9?s=128&d=identicon&r=PG&f=1", "display_name": "Kandarp Gandhi", "link": "https://stackoverflow.com/users/5096003/kandarp-gandhi"}, "edited": false, "score": 0, "creation_date": 1467239582, "post_id": 38110903, "comment_id": 63655793, "body": "Is there any configuration I&#39;m not aware of ? I&#39;m using El Capitan"}, {"owner": {"reputation": 6961, "user_id": 1248974, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ClqC2.jpg?s=128&g=1", "display_name": "davedwards", "link": "https://stackoverflow.com/users/1248974/davedwards"}, "edited": false, "score": 1, "creation_date": 1467249250, "post_id": 38110903, "comment_id": 63658423, "body": "Wow very cool script! I can confirm there&#39;s nothing wrong with your code since I ran it as-is, modifying only the 3 credentials at the top for my Gmail account, and it ran perfectly. Sorry I can&#39;t suggest any solutions, but at least I can confirm nothing is wrong with your code."}, {"owner": {"reputation": 259, "user_id": 5096003, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ae58bfe93e163cc06b0d37ee766cb3a9?s=128&d=identicon&r=PG&f=1", "display_name": "Kandarp Gandhi", "link": "https://stackoverflow.com/users/5096003/kandarp-gandhi"}, "reply_to_user": {"reputation": 6961, "user_id": 1248974, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ClqC2.jpg?s=128&g=1", "display_name": "davedwards", "link": "https://stackoverflow.com/users/1248974/davedwards"}, "edited": false, "score": 0, "creation_date": 1467250228, "post_id": 38110903, "comment_id": 63658636, "body": "@downshift It ran perfectly at my home ISP. I guess there is a problem with my ISP at work. I think its blocking some sort of traffic."}], "owner": {"reputation": 259, "user_id": 5096003, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ae58bfe93e163cc06b0d37ee766cb3a9?s=128&d=identicon&r=PG&f=1", "display_name": "Kandarp Gandhi", "link": "https://stackoverflow.com/users/5096003/kandarp-gandhi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 82, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1467238313, "creation_date": 1467238313, "question_id": 38110903, "link": "https://stackoverflow.com/questions/38110903/send-an-email-from-python-script", "title": "Send an email from Python Script", "body": "<p>I am trying to send an email from a python script. I am using this example but somehow the code keeps on running and does give back anything.   </p>\n\n<pre><code>import smtplib\n\nto = 'receiver'\ngmail_user = 'username'\ngmail_pwd = 'password'\nsmtpserver = smtplib.SMTP(\"smtp.gmail.com\", 587)\nsmtpserver.ehlo()\nsmtpserver.starttls()\nsmtpserver.ehlo()\nsmtpserver.login(gmail_user, gmail_pwd)\nheader = 'To:' + to + '\\n' + 'From: ' + gmail_user + '\\n' + 'Subject:testing \\n'\nprint header\nmsg = header + '\\n this is test msg from mkyong.com \\n\\n'\nsmtpserver.sendmail(gmail_user, to, msg)\nprint 'done!'\nsmtpserver.close()\n</code></pre>\n\n<p>I also enabled the allow less secure apps in google account. The error I get on interrupting this code is :</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"/Users/kgandh003c/PycharmProjects/kandarp_exercise/kandarp.py\", line 6, in &lt;module&gt;\n    smtpserver = smtplib.SMTP(\"smtp.gmail.com\", 587)\n  File \"/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/smtplib.py\", line 256, in __init__\n    (code, msg) = self.connect(host, port)\n  File \"/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/smtplib.py\", line 316, in connect\n    self.sock = self._get_socket(host, port, self.timeout)\n  File \"/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/smtplib.py\", line 291, in _get_socket\n    return socket.create_connection((host, port), timeout)\n  File \"/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/socket.py\", line 575, in create_connection\n    raise err\nsocket.error: [Errno 60] Operation timed out\n</code></pre>\n\n<p>Please let me know what could be wrong with this if anyone has faced this issue.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "opencv", "zbar"], "answers": [{"comments": [{"owner": {"reputation": 404, "user_id": 2302912, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/9a8a1e4c0ff579fae7d51b098fd5e72e?s=128&d=identicon&r=PG", "display_name": "abeagomez", "link": "https://stackoverflow.com/users/2302912/abeagomez"}, "edited": false, "score": 0, "creation_date": 1467249304, "post_id": 38111710, "comment_id": 63658434, "body": "Thanks, but I&#180;m working with video stream, so I need to fix this with cv2"}, {"owner": {"reputation": 113073, "user_id": 141555, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/oOW8R.jpg?s=128&g=1", "display_name": "sberry", "link": "https://stackoverflow.com/users/141555/sberry"}, "reply_to_user": {"reputation": 404, "user_id": 2302912, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/9a8a1e4c0ff579fae7d51b098fd5e72e?s=128&d=identicon&r=PG", "display_name": "abeagomez", "link": "https://stackoverflow.com/users/2302912/abeagomez"}, "edited": false, "score": 0, "creation_date": 1467270759, "post_id": 38111710, "comment_id": 63665155, "body": "@abea that&#39;s fair, but maybe try with a QR that works with Pil(low) first so you know you should get results.  I tried with several images found via googling &quot;QR image sample&quot; and the first 2 or 3 didn&#39;t work at all."}], "tags": [], "owner": {"reputation": 113073, "user_id": 141555, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/oOW8R.jpg?s=128&g=1", "display_name": "sberry", "link": "https://stackoverflow.com/users/141555/sberry"}, "is_accepted": false, "score": 0, "last_activity_date": 1467243032, "creation_date": 1467243032, "answer_id": 38111710, "question_id": 38110888, "link": "https://stackoverflow.com/questions/38110888/cannot-scan-qr-code-using-zbar/38111710#38111710", "title": "Cannot scan QR code using zbar", "body": "<p>Not sure what the actual problem is, but I was able to get this working using Pil (or Pillow) instead of cv2.  </p>\n\n<pre><code>import cv2\nimport Image\nimport zbar\nimport sys\n\nclass ImageSource(object):\n    def __init__(self,source):\n        self.is_camera = type(source)==int\n        if self.is_camera:\n            self.source = cv2.VideoCapture(source)\n        else:\n            self.source = cv2.imread(source,1)\n\n    def get_size(self):\n        if self.is_camera:\n            return (int(self.source.get(3)),int(self.source.get(4)))\n        else:\n            return (self.source.shape[1],self.source.shape[0])\n\n    def get_next(self):\n        if self.is_camera:\n            return self.source.read()[1]\n        else:\n            return self.source\n\n    def release(self):\n        if self.is_camera:\n            self.source.release()\n\nclass QRScanner(object):\n    def __init__(self, width, height):\n        self.scanner = zbar.ImageScanner()\n        self.scanner.parse_config('enable')\n        self.width = width\n        self.height = height\n\n    def get_qrcodes(self, image):\n        zbar_img = self.cv2_to_zbar_image(image)\n        self.scanner.scan(zbar_img)\n        result=[]\n        for symbol in zbar_img:\n            if symbol.type!=zbar.Symbol.QRCODE: continue\n            fixed_data = symbol.data.decode(\"utf8\").encode(\"shift_jis\").decode(\"utf8\")\n\n            result.append((fixed_data,symbol.location))\n        del(zbar_img)\n        return result\n\n    def cv2_to_zbar_image(self, cv2_image):\n        return zbar.Image(self.width, self.height, 'Y800',cv2_image.tostring())\n\npil = Image.open(sys.argv[1]).convert('L')\nwidth, height = pil.size\nscanner = QRScanner(width,height)\nprint scanner.get_qrcodes(pil)\n</code></pre>\n\n<p>Also, this didn't work with all QR codes I tried, but here was one that did work:</p>\n\n<pre><code>http://media.techtarget.com/rms/misc/qr_code_barcode.jpg\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/c1hra.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/c1hra.jpg\" alt=\"working qr code for above\"></a></p>\n"}], "owner": {"reputation": 404, "user_id": 2302912, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/9a8a1e4c0ff579fae7d51b098fd5e72e?s=128&d=identicon&r=PG", "display_name": "abeagomez", "link": "https://stackoverflow.com/users/2302912/abeagomez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1594, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1467243864, "creation_date": 1467238203, "last_edit_date": 1467243864, "question_id": 38110888, "link": "https://stackoverflow.com/questions/38110888/cannot-scan-qr-code-using-zbar", "title": "Cannot scan QR code using zbar", "body": "<p><a href=\"http://i.stack.imgur.com/zclcr.png\" rel=\"nofollow\">My QR code</a></p>\n\n<p>When I run my code I\u00b4m always getting \"[]\" as output, which means that Zbar can\u00b4t read the QR... There is something wrong with my image format? I can\u00b4t figure out why this is not working.</p>\n\n<p><strong>My code:</strong></p>\n\n<pre><code>import numpy as np\nimport cv2\nimport zbar\nimport sys\n\nclass ImageSource(object):\n    def __init__(self,source):\n        self.is_camera = type(source)==int\n        if self.is_camera:\n            self.source = cv2.VideoCapture(source)\n        else:\n            self.source = cv2.imread(source,1)\n\n    def get_size(self):\n        if self.is_camera:\n            return (int(self.source.get(3)),int(self.source.get(4)))\n        else:\n            return (self.source.shape[1],self.source.shape[0])\n\n    def get_next(self):\n        if self.is_camera:\n            return self.source.read()[1]\n        else:\n            return self.source\n\n    def release(self):\n        if self.is_camera:\n            self.source.release()\n\nclass QRScanner(object):\n    def __init__(self, width, height):\n        self.scanner = zbar.ImageScanner()\n        self.scanner.parse_config('enable')\n        self.width = width\n        self.height = height\n\n    def get_qrcodes(self, image):\n        zbar_img = self.cv2_to_zbar_image(image)\n        self.scanner.scan(zbar_img)\n        result=[]\n        for symbol in zbar_img:\n            if symbol.type!=zbar.Symbol.QRCODE: continue\n            fixed_data = symbol.data.decode(\"utf8\").encode(\"shift_jis\").decode(\"utf8\")\n\n            result.append(QRCode(fixed_data,symbol.location))\n        del(zbar_img)\n        return result\n\n    def cv2_to_zbar_image(self, cv2_image):\n        return zbar.Image(self.width, self.height, 'Y800',cv2_image.tostring())\n\n\ncap = ImageSource(\"1.png\")\nframe = cap.get_next()\nscanner = QRScanner(cap.get_size()[0],cap.get_size()[1])\nprint scanner.get_qrcodes(frame)\n</code></pre>\n"}, {"tags": ["python", "django", "postgresql", "django-migrations"], "comments": [{"owner": {"reputation": 47988, "user_id": 267540, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2v58W.jpg?s=128&g=1", "display_name": "e4c5", "link": "https://stackoverflow.com/users/267540/e4c5"}, "edited": false, "score": 0, "creation_date": 1467281193, "post_id": 38110785, "comment_id": 63671941, "body": "There&#39;s no migration here that creates a table as you have described. This migration shows custom code that you have put in there"}, {"owner": {"reputation": 765, "user_id": 2258441, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/7cf65c098d1c86db2212466408c8f919?s=128&d=identicon&r=PG", "display_name": "NJP", "link": "https://stackoverflow.com/users/2258441/njp"}, "reply_to_user": {"reputation": 47988, "user_id": 267540, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2v58W.jpg?s=128&g=1", "display_name": "e4c5", "link": "https://stackoverflow.com/users/267540/e4c5"}, "edited": false, "score": 0, "creation_date": 1467300193, "post_id": 38110785, "comment_id": 63685933, "body": "I know. When I generate migrations for that app after that, it&#39;s still trying to create a table for the VirtualTotal model. I was under the impression that <code>managed = False</code> tells Django to not generate migrations for that table."}, {"owner": {"reputation": 47988, "user_id": 267540, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2v58W.jpg?s=128&g=1", "display_name": "e4c5", "link": "https://stackoverflow.com/users/267540/e4c5"}, "edited": false, "score": 0, "creation_date": 1467329700, "post_id": 38110785, "comment_id": 63700707, "body": "what makes you say that?"}, {"owner": {"reputation": 765, "user_id": 2258441, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/7cf65c098d1c86db2212466408c8f919?s=128&d=identicon&r=PG", "display_name": "NJP", "link": "https://stackoverflow.com/users/2258441/njp"}, "reply_to_user": {"reputation": 47988, "user_id": 267540, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2v58W.jpg?s=128&g=1", "display_name": "e4c5", "link": "https://stackoverflow.com/users/267540/e4c5"}, "edited": false, "score": 0, "creation_date": 1467390024, "post_id": 38110785, "comment_id": 63729438, "body": "That&#39;s how I interpreted the API documentation on <code>Options.managed</code>: <a href=\"https://docs.djangoproject.com/en/1.8/ref/models/options/#managed\" rel=\"nofollow noreferrer\">docs.djangoproject.com/en/1.8/ref/models/options/#managed</a>. Am I misinterpreting it? I first read about it in this SO answer: <a href=\"http://stackoverflow.com/questions/507795/can-i-use-a-database-view-as-a-model-in-django/1281051#1281051\" title=\"can i use a database view as a model in django\">stackoverflow.com/questions/507795/&hellip;</a>."}], "answers": [{"tags": [], "owner": {"reputation": 47988, "user_id": 267540, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2v58W.jpg?s=128&g=1", "display_name": "e4c5", "link": "https://stackoverflow.com/users/267540/e4c5"}, "is_accepted": true, "score": 9, "last_activity_date": 1507035334, "last_edit_date": 1507035334, "creation_date": 1467646739, "answer_id": 38188332, "question_id": 38110785, "link": "https://stackoverflow.com/questions/38110785/django-model-for-a-postgres-view/38188332#38188332", "title": "Django model for a Postgres view", "body": "<p>Django does create a migration for each newly added table in your app regardless of whether it's a managed model or not. However there is a very important and subtle difference when you use the <code>managed=False</code> setting. The resultant migration is a dummy entry. It does not execute any SQL at all.</p>\n\n<p>To confirm this add a new model that is unmanaged</p>\n\n<pre><code>class Dummy(models.Model):\n    something = models.IntegerField()\n\n    class Meta:\n       managed = False\n</code></pre>\n\n<p>now when you do <code>makemigrations</code> followed by <code>sqlimigrate *myapp* *migration_number*</code> you will see that it doesn't produce any sql.</p>\n\n<p>If on the other hand, you do find that Django is trying to create a table for you, that usually means that you had the same model in existence earlier but at the time the model was managed. To confirm this, search your <code>migrations</code> folder for <code>VirtualTotal</code> which is the name of the model in question.</p>\n"}], "owner": {"reputation": 765, "user_id": 2258441, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/7cf65c098d1c86db2212466408c8f919?s=128&d=identicon&r=PG", "display_name": "NJP", "link": "https://stackoverflow.com/users/2258441/njp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7581, "favorite_count": 0, "accepted_answer_id": 38188332, "answer_count": 1, "score": 6, "last_activity_date": 1507035349, "creation_date": 1467237646, "last_edit_date": 1507035349, "question_id": 38110785, "link": "https://stackoverflow.com/questions/38110785/django-model-for-a-postgres-view", "title": "Django model for a Postgres view", "body": "<p><strong>Edit:</strong> There seems to be some confusion about what I'm asking. That model is for the <a href=\"https://www.postgresql.org/docs/9.4/static/sql-createview.html\" rel=\"nofollow noreferrer\">Postgres view</a> that I created in migration 0009. I was under the impression that Django won't generate a migration for a model if it has the <code>managed = False</code> option. However, it's still trying to create it.</p>\n\n<p>Also, I'm using Django 1.8 with Python 3.4.</p>\n\n<p>I'm having trouble creating a Django model for a Postgres view, using these links as a guide: <a href=\"https://stackoverflow.com/a/1281051/2258441\">drdaeman</a> and <a href=\"https://stackoverflow.com/a/29532034/2258441\">eceppda's</a> answer in <a href=\"https://stackoverflow.com/questions/507795/can-i-use-a-database-view-as-a-model-in-django\">Can I use a database view as a model in django</a>. I also looked up the Options.managed entry in <a href=\"https://docs.djangoproject.com/en/1.8/ref/models/options/#django.db.models.Options.managed\" rel=\"nofollow noreferrer\">Django's API docs</a>. However, even with this, it's creating a migration that adds a table for the view's model.</p>\n\n<p>This is my code so far:</p>\n\n<h3>foo/models.py</h3>\n\n<pre><code>class RelevantModel(models.Model):\n    rebate_pool_total = models.OneToOneField('foo.VirtualTotal', null=True)\n    total = models.DecimalField(null=True, decimal_places=2, max_digits=32)\n\nclass VirtualTotal(models.Model):\n    relevant_model = models.ForeignKey('foo.RelevantModel')\n    total = models.DecimalField(null=True, decimal_places=2, max_digits=32)\n\n    class Meta:\n        managed = False\n</code></pre>\n\n<h3>foo/migrations/0009_add_foo_view.py</h3>\n\n<pre><code># -*- coding: utf-8 -*-\nfrom __future__ import unicode_literals\n\nfrom django.db import models, migrations\n\n\nclass Migration(migrations.Migration):\n\n    dependencies = [\n        ('foo', '0008_previous_migration'),\n    ]\n\n    sql = \"\"\"\n    create VIEW foo_virtualtotal AS\n      SELECT rest of view...\n    \"\"\"\n\n    operations = [\n        migrations.RunSQL('DROP VIEW IF EXISTS foo_virtualtotal;'),\n        migrations.RunSQL(sql)\n    ]\n</code></pre>\n\n<p>What am I doing wrong? </p>\n"}, {"tags": ["python", "python-2.7", "cookies", "python-requests"], "answers": [{"comments": [{"owner": {"reputation": 134, "user_id": 6000276, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kC2KA.jpg?s=128&g=1", "display_name": "Jacob Marshall", "link": "https://stackoverflow.com/users/6000276/jacob-marshall"}, "edited": false, "score": 0, "creation_date": 1467238603, "post_id": 38110852, "comment_id": 63655447, "body": "Just to clarify, I shouldn&#39;t use all of those User-Agents, just one of them, correct? And what do you mean by &quot;you should be posting all the required data&quot;? What am I missing?"}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "reply_to_user": {"reputation": 134, "user_id": 6000276, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kC2KA.jpg?s=128&g=1", "display_name": "Jacob Marshall", "link": "https://stackoverflow.com/users/6000276/jacob-marshall"}, "edited": false, "score": 0, "creation_date": 1467238641, "post_id": 38110852, "comment_id": 63655463, "body": "@Jacob, there is only one"}, {"owner": {"reputation": 134, "user_id": 6000276, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kC2KA.jpg?s=128&g=1", "display_name": "Jacob Marshall", "link": "https://stackoverflow.com/users/6000276/jacob-marshall"}, "edited": false, "score": 0, "creation_date": 1467318097, "post_id": 38110852, "comment_id": 63696315, "body": "What do you mean by &quot;you should be posting all the required data&quot;? What am I missing? @Padraic"}, {"owner": {"reputation": 134, "user_id": 6000276, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kC2KA.jpg?s=128&g=1", "display_name": "Jacob Marshall", "link": "https://stackoverflow.com/users/6000276/jacob-marshall"}, "edited": false, "score": 0, "creation_date": 1467322205, "post_id": 38110852, "comment_id": 63698265, "body": "I did, and I got this error:   File &quot;req3.py&quot;, line 13, in &lt;module&gt;     data.update({inp[&quot;name&quot;]: inp[&quot;value&quot;] for inp in inputs if inp[&quot;name&quot;] not in data}) NameError: name &#39;inputs&#39; is not defined"}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "reply_to_user": {"reputation": 134, "user_id": 6000276, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kC2KA.jpg?s=128&g=1", "display_name": "Jacob Marshall", "link": "https://stackoverflow.com/users/6000276/jacob-marshall"}, "edited": false, "score": 0, "creation_date": 1467322299, "post_id": 38110852, "comment_id": 63698307, "body": "Sorry, should be <code>form_data</code>"}, {"owner": {"reputation": 134, "user_id": 6000276, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kC2KA.jpg?s=128&g=1", "display_name": "Jacob Marshall", "link": "https://stackoverflow.com/users/6000276/jacob-marshall"}, "edited": false, "score": 0, "creation_date": 1467322431, "post_id": 38110852, "comment_id": 63698352, "body": "Another error: An HTTPS request has been made, but the SNI (Subject Name Indication) extension to TLS is not available on this platform. This may cause the server to present an incorrect TLS certificate, which can cause validation failures. You can upgrade to a newer version of Python to solve this. For more information, see <a href=\"https://urllib3.readthedocs.org/en/latest/security.html#snimissingwarning\" rel=\"nofollow noreferrer\">urllib3.readthedocs.org/en/latest/&hellip;</a>.   SNIMissingWarning"}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "reply_to_user": {"reputation": 134, "user_id": 6000276, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kC2KA.jpg?s=128&g=1", "display_name": "Jacob Marshall", "link": "https://stackoverflow.com/users/6000276/jacob-marshall"}, "edited": false, "score": 0, "creation_date": 1467322521, "post_id": 38110852, "comment_id": 63698388, "body": "You need to install <a href=\"https://urllib3.readthedocs.io/en/latest/security.html#pyopenssl\" rel=\"nofollow noreferrer\">urllib3.readthedocs.io/en/latest/security.html#pyopenssl</a>, sni support is only in python &gt;= 2.7.9, you could also just use python3"}], "tags": [], "owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "is_accepted": true, "score": 1, "last_activity_date": 1467322263, "last_edit_date": 1467322263, "creation_date": 1467237997, "answer_id": 38110852, "question_id": 38110760, "link": "https://stackoverflow.com/questions/38110760/how-to-use-python-requests-to-login-to-website-store-cookie-then-access-anothe/38110852#38110852", "title": "How to use Python Requests to login to website, store cookie, then access another page on the website?", "body": "<p>You should be posting all the required data, you can use <em>bs4</em> to parse the login page to get the values you need:</p>\n\n<pre><code>from requests import session\nfrom bs4 import BeautifulSoup\n\ndata = {\n    'username': 'MY_USERNAME',\n    'password': 'MY_PASSWORD'\n}\n\nhead = {\"User-Agent\":\"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/51.0.2704.103 Safari/537.36\"}\nwith  session() as s:\n    soup = BeautifulSoup(s.get(\"https://fif.com/login\").content)\n    form_data = soup.select(\"form[action^=/login?task] input\")\n    data.update({inp[\"name\"]: inp[\"value\"] for inp in form_data if inp[\"name\"] not in data})\n    s.post('https://fif.com/login?task=user.login', data=data, headers=head)\n    resp = s.get('https://fif.com/tools/capacity')\n</code></pre>\n\n<p>If you make a requests and look in chrome tools or firebug, the form data looks like:</p>\n\n<pre><code>username:foo\npassword:bar\nreturn:aW5kZXgucGhwP29wdGlvbj1jb21fdXNlcnMmdmlldz1wcm9maWxl\nd68a2b40daf7b6c8eaa3a2f652f7ee62:1\n</code></pre>\n"}], "owner": {"reputation": 134, "user_id": 6000276, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kC2KA.jpg?s=128&g=1", "display_name": "Jacob Marshall", "link": "https://stackoverflow.com/users/6000276/jacob-marshall"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3217, "favorite_count": 2, "accepted_answer_id": 38110852, "answer_count": 1, "score": 3, "last_activity_date": 1467322263, "creation_date": 1467237517, "last_edit_date": 1495539852, "question_id": 38110760, "link": "https://stackoverflow.com/questions/38110760/how-to-use-python-requests-to-login-to-website-store-cookie-then-access-anothe", "title": "How to use Python Requests to login to website, store cookie, then access another page on the website?", "body": "<p>I'm trying to login into website using a Python script, store the cookie I receive, and then use that same cookie to access member-only parts of the website. I've read several posts and answers about this topic, but none of the answers have worked for me. </p>\n\n<p>Here is the HTML code for the website login page I'm trying to access.</p>\n\n<pre><code>&lt;form action=\"/login?task=user.login\" method=\"post\"&gt;\n    &lt;fieldset&gt;\n        &lt;table border=\"0\" cellspacing=\"0\" cellpadding=\"0\"&gt;\n        &lt;tbody&gt;\n                                                        &lt;tr&gt;\n            &lt;td width=\"70\" nowrap=\"\"&gt;Username&amp;nbsp;&amp;nbsp;&lt;/td&gt;\n            &lt;td width=\"260\"&gt;&lt;input type=\"text\" name=\"username\" id=\"username\" value=\"\" class=\"validate-username\" size=\"25\"/&gt;&lt;/td&gt;\n                    &lt;/tr&gt;\n                                                                                &lt;tr&gt;\n            &lt;td width=\"70\" nowrap=\"\"&gt;Password&amp;nbsp;&amp;nbsp;&lt;/td&gt;\n             &lt;td width=\"260\"&gt;&lt;input type=\"password\" name=\"password\" id=\"password\" value=\"\" class=\"validate-password\" size=\"25\"/&gt;&lt;/td&gt;\n         &lt;/tr&gt;\n                                                        &lt;tr&gt;\n             &lt;td colspan=\"2\"&gt;&lt;label style=\"float: left;width: 70%;\" for=\"modlgn_remember\"&gt;Remember Me&lt;/label&gt;\n             &lt;input style=\"float: right;width: 20%;\"id=\"modlgn_remember\" type=\"checkbox\" name=\"remember\" class=\"inputbox\" value=\"yes\"/&gt;&lt;/td&gt;\n         &lt;/tr&gt;\n         &lt;tr&gt;\n            &lt;td  colspan=\"2\" width=\"100%\"&gt; &lt;a href=\"/reset-password\"&gt; Forgot your password?&lt;/a&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n            &lt;td  colspan=\"2\" width=\"100%\"&gt; &lt;a href=\"/username-reminder\"&gt;Forgot your username?&lt;/a&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n            &lt;td colspan=\"2\"&gt;&lt;button type=\"submit\" class=\"button cta\"&gt;Log in&lt;/button&gt;&lt;/td&gt;\n&lt;!--                            &lt;td colspan=\"1\"&gt;&lt;a href=\"/--&gt;&lt;!--\"&gt;Register Now&lt;/a&gt;&lt;/td&gt;--&gt;\n        &lt;/tr&gt;\n        &lt;/tbody&gt;\n        &lt;/table&gt;\n\n        &lt;input type=\"hidden\" name=\"return\"\n               value=\"aHR0cHM6Ly9maWYuY29tLw==\"/&gt;\n        &lt;input type=\"hidden\" name=\"3295f23066f7c6ab53c290c6c022cc4b\" value=\"1\" /&gt;                    &lt;/fieldset&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>Here is my own code that I'm using to attempt a login. </p>\n\n<pre><code>from requests import session\n\npayload = {\n     'username': 'MY_USERNAME',\n     'password': 'MY_PASSWORD'\n}\n\ns = session()\ns.post('https://fif.com/login?task=user.login', data=payload)\n\nresponse = s.get('https://fif.com/tools/capacity')\n</code></pre>\n\n<p>From everything I have read, this should work, but it doesn't. I've been struggling with this for two days, so if you know the answer, I would love the solution. </p>\n\n<p>For reference, here are all the other StackOverflow posts I have looked at in hopes for an answer:</p>\n\n<ol>\n<li><a href=\"https://stackoverflow.com/questions/12737740/python-requests-and-persistent-sessions\">Python Requests and Persistent Sessions</a></li>\n<li><a href=\"https://stackoverflow.com/questions/30605582/logging-in-to-a-site-using-python-requests?lq=1\">Logging into a site using Python Reqeusts</a></li>\n<li><a href=\"https://stackoverflow.com/questions/8316818/login-to-website-using-python\">Login to website using python</a></li>\n<li><a href=\"https://stackoverflow.com/questions/11892729/how-to-log-in-to-a-website-using-pythons-requests-module/17633072#17633072\">How to \u201clog in\u201d to a website using Python's Requests module?</a></li>\n<li><a href=\"https://stackoverflow.com/questions/24260149/python-requests-session-login-cookies\">Python: Requests Session Login Cookies</a></li>\n<li><a href=\"https://stackoverflow.com/questions/189555/how-to-use-python-to-login-to-a-webpage-and-retrieve-cookies-for-later-usage\">How to use Python to login to a webpage and retrieve cookies for later usage?</a></li>\n<li><a href=\"https://stackoverflow.com/questions/6987876/curl-login-then-curl-download\">cUrl Login then cUrl Download</a></li>\n</ol>\n"}, {"tags": ["python", "pip", "lxml", "bs4"], "answers": [{"comments": [{"owner": {"reputation": 133, "user_id": 5731925, "user_type": "registered", "accept_rate": 70, "profile_image": "https://graph.facebook.com/750341425099155/picture?type=large", "display_name": "Sriker Ch", "link": "https://stackoverflow.com/users/5731925/sriker-ch"}, "edited": false, "score": 0, "creation_date": 1467238194, "post_id": 38110808, "comment_id": 63655274, "body": "thank you!but tried that already.did&#39;nt worked"}, {"owner": {"reputation": 135, "user_id": 2505932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uL8FK.jpg?s=128&g=1", "display_name": "Felipe Guerra", "link": "https://stackoverflow.com/users/2505932/felipe-guerra"}, "reply_to_user": {"reputation": 133, "user_id": 5731925, "user_type": "registered", "accept_rate": 70, "profile_image": "https://graph.facebook.com/750341425099155/picture?type=large", "display_name": "Sriker Ch", "link": "https://stackoverflow.com/users/5731925/sriker-ch"}, "edited": false, "score": 0, "creation_date": 1467238354, "post_id": 38110808, "comment_id": 63655337, "body": "Why don&#39;t you try urllib? <a href=\"https://docs.python.org/2/library/urllib.html\" rel=\"nofollow noreferrer\">docs.python.org/2/library/urllib.html</a>"}, {"owner": {"reputation": 135, "user_id": 2505932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uL8FK.jpg?s=128&g=1", "display_name": "Felipe Guerra", "link": "https://stackoverflow.com/users/2505932/felipe-guerra"}, "reply_to_user": {"reputation": 133, "user_id": 5731925, "user_type": "registered", "accept_rate": 70, "profile_image": "https://graph.facebook.com/750341425099155/picture?type=large", "display_name": "Sriker Ch", "link": "https://stackoverflow.com/users/5731925/sriker-ch"}, "edited": false, "score": 0, "creation_date": 1467238390, "post_id": 38110808, "comment_id": 63655354, "body": "Are you facing this warning when using BeautifulSoup?"}, {"owner": {"reputation": 133, "user_id": 5731925, "user_type": "registered", "accept_rate": 70, "profile_image": "https://graph.facebook.com/750341425099155/picture?type=large", "display_name": "Sriker Ch", "link": "https://stackoverflow.com/users/5731925/sriker-ch"}, "edited": false, "score": 0, "creation_date": 1467238599, "post_id": 38110808, "comment_id": 63655445, "body": "yes iam using <b>urllib</b> and <b>url.request</b> but for retrieving the specific data it would be complicate using <b>urllib and regex</b> so iam using beautifulSoup.Yes Iam facing it when using BeautifulSoup.<code>soup=BeautifulSoup(readData) </code>.regarding the error i mentioned above iam using lxml.Is there any way I could make it without lxml"}], "tags": [], "owner": {"reputation": 135, "user_id": 2505932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uL8FK.jpg?s=128&g=1", "display_name": "Felipe Guerra", "link": "https://stackoverflow.com/users/2505932/felipe-guerra"}, "is_accepted": false, "score": 0, "last_activity_date": 1467237787, "creation_date": 1467237787, "answer_id": 38110808, "question_id": 38110720, "link": "https://stackoverflow.com/questions/38110720/unable-to-install-lxml-by-pipis-there-anyalternative/38110808#38110808", "title": "Unable to install lxml by pip?Is there anyalternative?", "body": "<p>Probabily you didin't installed the requirements for lxml package. Follow this tutorial: <a href=\"http://lxml.de/installation.html\" rel=\"nofollow\">http://lxml.de/installation.html</a>  </p>\n\n<p>Pay extra attention to this excert:</p>\n\n<blockquote>\n  <p>Most MS Windows systems lack the necessarily tools to build software,\n  starting with a C compiler already. Microsoft leaves it to users to\n  install and configure them, which is usually not trivial and means\n  that distributors cannot rely on these dependencies being available on\n  a given system. In a way, you get what you've paid for and make others\n  pay for it.</p>\n  \n  <p>Due to the additional lack of package management of this platform, it\n  is best to link the library dependencies statically if you decide to\n  build from sources, rather than using a binary installer. For that,\n  lxml can use the binary distribution of libxml2 and libxslt, which it\n  downloads automatically during the static build. It needs both libxml2\n  and libxslt, as well as iconv and zlib, which are available from the\n  same download site. Further build instructions are in the source build\n  documentation.</p>\n</blockquote>\n"}], "owner": {"reputation": 133, "user_id": 5731925, "user_type": "registered", "accept_rate": 70, "profile_image": "https://graph.facebook.com/750341425099155/picture?type=large", "display_name": "Sriker Ch", "link": "https://stackoverflow.com/users/5731925/sriker-ch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "closed_date": 1467417034, "answer_count": 1, "score": -1, "last_activity_date": 1467237787, "creation_date": 1467237339, "question_id": 38110720, "link": "https://stackoverflow.com/questions/38110720/unable-to-install-lxml-by-pipis-there-anyalternative", "closed_reason": "Duplicate", "title": "Unable to install lxml by pip?Is there anyalternative?", "body": "<p>Actually Iam trying to installing lxml because of </p>\n\n<blockquote>\n  <p>UserWarning: No parser was explicitly specified, so I'm using the best available HTML parser for this system (\"html.parser\"). This usually isn't a problem, but if you run this code on another system, or in a different virtual environment, it may use a different parser and behave differently.</p>\n</blockquote>\n\n<p>So Iam trying to use lxml.but I could not install due to this error\n<a href=\"https://i.stack.imgur.com/qUqVY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qUqVY.png\" alt=\"enter image description here\"></a></p>\n\n<p>I tried to install manually by downloading the latest version also.But couldn't make it.Can any one please help me to sort this out</p>\n"}, {"tags": ["python", "apache-spark", "pyspark", "apache-spark-sql"], "comments": [{"owner": {"reputation": 35667, "user_id": 3415409, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/511ea2c9f96104e90774206261f0e608?s=128&d=identicon&r=PG", "display_name": "eliasah", "link": "https://stackoverflow.com/users/3415409/eliasah"}, "edited": false, "score": 0, "creation_date": 1467238268, "post_id": 38110711, "comment_id": 63655302, "body": "Where is this type of query supported ? :)"}, {"owner": {"reputation": 219, "user_id": 3292147, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/397b70ed93de1c4bbd487e057ec47f6a?s=128&d=identicon&r=PG&f=1", "display_name": "user3292147", "link": "https://stackoverflow.com/users/3292147/user3292147"}, "reply_to_user": {"reputation": 35667, "user_id": 3415409, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/511ea2c9f96104e90774206261f0e608?s=128&d=identicon&r=PG", "display_name": "eliasah", "link": "https://stackoverflow.com/users/3415409/eliasah"}, "edited": false, "score": 0, "creation_date": 1467273148, "post_id": 38110711, "comment_id": 63666573, "body": "pure select part is supported at least in Oracle, could be some other DBs"}], "answers": [{"tags": [], "owner": {"reputation": 500, "user_id": 6015053, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-gboyrC9QJII/AAAAAAAAAAI/AAAAAAAAAGA/JxepX7r270w/photo.jpg?sz=128", "display_name": "Milos Milovanovic", "link": "https://stackoverflow.com/users/6015053/milos-milovanovic"}, "is_accepted": true, "score": 1, "last_activity_date": 1467281390, "creation_date": 1467281390, "answer_id": 38120066, "question_id": 38110711, "link": "https://stackoverflow.com/questions/38110711/make-new-dataframe-only-with-rows-whose-id-is-not-contained-in-second-dataframe/38120066#38120066", "title": "Make new DataFrame only with rows whose ID is not contained in second DataFrame", "body": "<p>Spark SQL will support this type of subqueries starting from Spark version 2.0 (more information is available on <a href=\"https://databricks.com/blog/2016/06/17/sql-subqueries-in-apache-spark-2-0.html\" rel=\"nofollow\">Databricks blog</a>).</p>\n\n<p>A way to do this in older versions of Spark would be the following:</p>\n\n<pre><code>df3 = sqlContext.sql(\n    \"\"\"\n    select \n     *\n    from df1 left join df2 on df1.id=df2.id \n    where df2.id is null\n    \"\"\"\n)\n</code></pre>\n"}], "owner": {"reputation": 219, "user_id": 3292147, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/397b70ed93de1c4bbd487e057ec47f6a?s=128&d=identicon&r=PG&f=1", "display_name": "user3292147", "link": "https://stackoverflow.com/users/3292147/user3292147"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 258, "favorite_count": 0, "accepted_answer_id": 38120066, "answer_count": 1, "score": 0, "last_activity_date": 1547835366, "creation_date": 1467237291, "last_edit_date": 1547835366, "question_id": 38110711, "link": "https://stackoverflow.com/questions/38110711/make-new-dataframe-only-with-rows-whose-id-is-not-contained-in-second-dataframe", "title": "Make new DataFrame only with rows whose ID is not contained in second DataFrame", "body": "<p>There are two DataFrames. One, <code>df1</code>, contains events, and one of its columns is <code>ID</code>.\nThe other <code>df2</code> contains just <code>ID</code>-s.</p>\n\n<p>How would be best to crate <code>df3</code> which contain just rows whose <code>ID</code> is not present in <code>df2</code>.</p>\n\n<p>Looks like this type of query is not supported in Spark SQL:</p>\n\n<pre><code>sqlContext.sql(\"\"\" SELECT * FROM table_df1\nWHERE ID NOT IN (SELECT ID FROM table_df2) \"\"\")\n</code></pre>\n"}, {"tags": ["python", "python-import"], "comments": [{"owner": {"reputation": 2995, "user_id": 667913, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/e038b48be307830687c8a71ff716ba07?s=128&d=identicon&r=PG", "display_name": "patrick", "link": "https://stackoverflow.com/users/667913/patrick"}, "edited": false, "score": 1, "creation_date": 1467237335, "post_id": 38110681, "comment_id": 63654914, "body": "have you installed the module? if not, there are some good tips <a href=\"http://stackoverflow.com/questions/1449494/how-do-i-install-python-packages-on-windows\">here</a>"}, {"owner": {"reputation": 7750, "user_id": 5747944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90aefeb5e2f0ecf9a68bf851a2b61336?s=128&d=identicon&r=PG", "display_name": "sytech", "link": "https://stackoverflow.com/users/5747944/sytech"}, "edited": false, "score": 0, "creation_date": 1467237393, "post_id": 38110681, "comment_id": 63654936, "body": "You&#39;re hitting the error before you even get to the line with <code>import sys</code> -- You need to install <code>semanticnet</code>"}, {"owner": {"reputation": 995, "user_id": 6437335, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/b1e29f44c7cffacfb1b32c6746f85c27?s=128&d=identicon&r=PG&f=1", "display_name": "Edon", "link": "https://stackoverflow.com/users/6437335/edon"}, "edited": false, "score": 0, "creation_date": 1467297896, "post_id": 38110681, "comment_id": 63684083, "body": "sorry for the late replies, yes this was indeed the problem. Thanks for the help!"}], "answers": [{"comments": [{"owner": {"reputation": 995, "user_id": 6437335, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/b1e29f44c7cffacfb1b32c6746f85c27?s=128&d=identicon&r=PG&f=1", "display_name": "Edon", "link": "https://stackoverflow.com/users/6437335/edon"}, "edited": false, "score": 0, "creation_date": 1467297848, "post_id": 38110778, "comment_id": 63684045, "body": "yep, I derped. Thank you very much"}], "tags": [], "owner": {"reputation": 115, "user_id": 4127469, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ExSyiCFnBYk/AAAAAAAAAAI/AAAAAAAAAKg/9O9UNejMDwI/photo.jpg?sz=128", "display_name": "MrJomp", "link": "https://stackoverflow.com/users/4127469/mrjomp"}, "is_accepted": true, "score": 0, "last_activity_date": 1467237619, "creation_date": 1467237619, "answer_id": 38110778, "question_id": 38110681, "link": "https://stackoverflow.com/questions/38110681/python-import-error-no-module-named/38110778#38110778", "title": "Python import error: &#39;No module named&#39;", "body": "<p>You need to install that library, if you're on windows which it seems because of your \"C://\" first install setuptools.</p>\n\n<blockquote>\n  <p><a href=\"https://pypi.python.org/pypi/setuptools\" rel=\"nofollow\">https://pypi.python.org/pypi/setuptools</a></p>\n</blockquote>\n\n<p>Using Windows 8 (which includes PowerShell 3) or earlier versions of Windows with PowerShell 3 installed, it\u2019s possible to install with one simple Powershell command. Start up Powershell and paste this command:</p>\n\n<pre><code>(Invoke-WebRequest https://bootstrap.pypa.io/ez_setup.py).Content | python -\n</code></pre>\n\n<p>You must start the Powershell with Administrative privileges or you may choose to install a user-local installation:</p>\n\n<pre><code>(Invoke-WebRequest https://bootstrap.pypa.io/ez_setup.py).Content | python - --user\n</code></pre>\n\n<p>If you have Python 3.3 or later, you can use the py command to install to different Python versions. For example, to install to Python 3.3 if you have Python 2.7 installed:</p>\n\n<pre><code>(Invoke-WebRequest https://bootstrap.pypa.io/ez_setup.py).Content | py -3 -\n</code></pre>\n\n<p>Once installed run as follows:</p>\n\n<pre><code>easy_install semanticnet\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 995, "user_id": 6437335, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/b1e29f44c7cffacfb1b32c6746f85c27?s=128&d=identicon&r=PG&f=1", "display_name": "Edon", "link": "https://stackoverflow.com/users/6437335/edon"}, "edited": false, "score": 0, "creation_date": 1467297858, "post_id": 38110782, "comment_id": 63684051, "body": "appreciate it, that was the problem!"}], "tags": [], "owner": {"reputation": 83, "user_id": 5691244, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/1671f5794b4f0227e213742a712817f7?s=128&d=identicon&r=PG&f=1", "display_name": "alvarosps", "link": "https://stackoverflow.com/users/5691244/alvarosps"}, "is_accepted": false, "score": 0, "last_activity_date": 1467237626, "creation_date": 1467237626, "answer_id": 38110782, "question_id": 38110681, "link": "https://stackoverflow.com/questions/38110681/python-import-error-no-module-named/38110782#38110782", "title": "Python import error: &#39;No module named&#39;", "body": "<p>I think you don't have the module installed..\ntry <code>pip install semanticnet</code> on the Prompt Command first(I believe that you installed pip when you installed python), then when the installation is complete, just run python and try some \u00b4import semanticnet` on the python command line...</p>\n"}], "owner": {"reputation": 995, "user_id": 6437335, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/b1e29f44c7cffacfb1b32c6746f85c27?s=128&d=identicon&r=PG&f=1", "display_name": "Edon", "link": "https://stackoverflow.com/users/6437335/edon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2103, "favorite_count": 0, "accepted_answer_id": 38110778, "answer_count": 2, "score": 0, "last_activity_date": 1467237626, "creation_date": 1467237189, "question_id": 38110681, "link": "https://stackoverflow.com/questions/38110681/python-import-error-no-module-named", "title": "Python import error: &#39;No module named&#39;", "body": "<p>Just installed python, and am running into this error:</p>\n\n<blockquote>\n  <p>ImportError: No module named 'semanticnet'</p>\n</blockquote>\n\n<p>here are my imports:</p>\n\n<pre><code>import semanticnet as sn\nimport sys\n</code></pre>\n\n<p>I've tried the solution on this site that suggests adding:</p>\n\n<pre><code>sys.path.append('C:\\Python34')\n</code></pre>\n\n<p>after the 'import sys', but no luck.</p>\n\n<p>Does anyone know what could be causing this issue?</p>\n\n<p>Here is my full code: <a href=\"https://ideone.com/UHRI4S\" rel=\"nofollow\">https://ideone.com/UHRI4S</a> , running windows 10</p>\n"}, {"tags": ["python", "string", "list", "file", "lines"], "comments": [{"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1467238573, "post_id": 38110665, "comment_id": 63655432, "body": "Please show a brief example of the input and desired output. Why isn&#39;t  your procedure working?"}], "answers": [{"comments": [{"owner": {"reputation": 2777, "user_id": 1002371, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/612ee2165cc4115ea14888dbf6ae24cf?s=128&d=identicon&r=PG", "display_name": "a p", "link": "https://stackoverflow.com/users/1002371/a-p"}, "edited": false, "score": 0, "creation_date": 1467237529, "post_id": 38110750, "comment_id": 63655001, "body": "Don&#39;t know if you&#39;re going to be able to write to <code>f2</code> opened in read mode."}, {"owner": {"reputation": 23600, "user_id": 1695172, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/6319d7eafca7852cf04c88598ca31e75?s=128&d=identicon&r=PG", "display_name": "Netwave", "link": "https://stackoverflow.com/users/1695172/netwave"}, "reply_to_user": {"reputation": 2777, "user_id": 1002371, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/612ee2165cc4115ea14888dbf6ae24cf?s=128&d=identicon&r=PG", "display_name": "a p", "link": "https://stackoverflow.com/users/1002371/a-p"}, "edited": false, "score": 0, "creation_date": 1467237599, "post_id": 38110750, "comment_id": 63655025, "body": "@ap, true, just the copy/paste"}, {"owner": {"reputation": 2331, "user_id": 3672754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/XX1DD.jpg?s=128&g=1", "display_name": "rsm", "link": "https://stackoverflow.com/users/3672754/rsm"}, "edited": false, "score": 0, "creation_date": 1467237626, "post_id": 38110750, "comment_id": 63655038, "body": "would not be better to simply use <code>f2.write(&quot; &quot;.join(f1.readlines()))</code>?"}, {"owner": {"reputation": 1277, "user_id": 1339820, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e3a347c5e4ca2fc3b6b5e0baf971302?s=128&d=identicon&r=PG", "display_name": "pcurry", "link": "https://stackoverflow.com/users/1339820/pcurry"}, "reply_to_user": {"reputation": 2331, "user_id": 3672754, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/XX1DD.jpg?s=128&g=1", "display_name": "rsm", "link": "https://stackoverflow.com/users/3672754/rsm"}, "edited": false, "score": 0, "creation_date": 1467237795, "post_id": 38110750, "comment_id": 63655095, "body": "@rsm no, because that won&#39;t strip the carriage returns at the end of lines"}], "tags": [], "owner": {"reputation": 23600, "user_id": 1695172, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/6319d7eafca7852cf04c88598ca31e75?s=128&d=identicon&r=PG", "display_name": "Netwave", "link": "https://stackoverflow.com/users/1695172/netwave"}, "is_accepted": false, "score": 0, "last_activity_date": 1467237547, "last_edit_date": 1467237547, "creation_date": 1467237478, "answer_id": 38110750, "question_id": 38110665, "link": "https://stackoverflow.com/questions/38110665/how-do-you-turn-multiple-lines-of-text-in-a-file-into-one-line-of-text-in-python/38110750#38110750", "title": "How do you turn multiple lines of text in a file into one line of text in python?", "body": "<p>This will do:</p>\n\n<pre><code>with open(\"f1\", \"r\") as f1:\n    with open(\"f2\", \"w\") as f2:\n        f2.write(\" \".join(map(lambda x: x.strip(\"\\n\"), f1.readlines())))\n</code></pre>\n\n<p>Take all lines form f1, strip the \"\\n\", join them with <code>\" \"</code> and write that string to the new file.</p>\n"}, {"tags": [], "owner": {"reputation": 23605, "user_id": 1016216, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/xF5Ew.png?s=128&g=1", "display_name": "L3viathan", "link": "https://stackoverflow.com/users/1016216/l3viathan"}, "is_accepted": false, "score": 3, "last_activity_date": 1467237565, "creation_date": 1467237565, "answer_id": 38110767, "question_id": 38110665, "link": "https://stackoverflow.com/questions/38110665/how-do-you-turn-multiple-lines-of-text-in-a-file-into-one-line-of-text-in-python/38110767#38110767", "title": "How do you turn multiple lines of text in a file into one line of text in python?", "body": "<p>Just print them with a space inbetween:</p>\n\n<pre><code>...\n\nfor i, line in enumerate(f1):\n    space = \" \" if i != 0 else \"\"\n    line = line.rstrip('\\n')\n    f2.write(space + line)\n\nf1.close()\nf2.close()\n</code></pre>\n\n<p>If the files aren't <em>huge</em> (i.e. they fit in memory), an easier way would be:</p>\n\n<pre><code>with open(\"foo\") as f1, open(\"bar\", 'w') as f2:\n    f2.write(\" \".join(line.rstrip('\\n') for line in f1))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1277, "user_id": 1339820, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e3a347c5e4ca2fc3b6b5e0baf971302?s=128&d=identicon&r=PG", "display_name": "pcurry", "link": "https://stackoverflow.com/users/1339820/pcurry"}, "is_accepted": false, "score": 1, "last_activity_date": 1467237598, "creation_date": 1467237598, "answer_id": 38110774, "question_id": 38110665, "link": "https://stackoverflow.com/questions/38110665/how-do-you-turn-multiple-lines-of-text-in-a-file-into-one-line-of-text-in-python/38110774#38110774", "title": "How do you turn multiple lines of text in a file into one line of text in python?", "body": "<p>If you are in Python 2.7+ or Python 3.x, and the size of the file is not prohibitive, you could probably do it in memory:</p>\n\n<pre><code>with open(filename1, 'r') as fin, open(filename2, 'w+') as fout:\n    lines = fin.readlines()\n    cleaned = [line.strip() for line in lines]\n    joined = ' '.join(cleaned)\n    fout.write(joined)\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6530373, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39516d47d0e31a9b4242c3d6f41983c4?s=128&d=identicon&r=PG&f=1", "display_name": "Lilly H-M", "link": "https://stackoverflow.com/users/6530373/lilly-h-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 193, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1467243727, "creation_date": 1467237150, "last_edit_date": 1467243727, "question_id": 38110665, "link": "https://stackoverflow.com/questions/38110665/how-do-you-turn-multiple-lines-of-text-in-a-file-into-one-line-of-text-in-python", "title": "How do you turn multiple lines of text in a file into one line of text in python?", "body": "<p>I have a text file with a number value on every line and I am trying to condense all the values onto a single line with a space between them. This is what I have so far but it's not working: </p>\n\n<pre><code>for line in f1:\n    line = line.rstrip('\\n')\n    f2.write(line)\n\nf1.close()\nf2.close()\n</code></pre>\n"}, {"tags": ["python", "tkinter", "scrollbar"], "comments": [{"owner": {"reputation": 925, "user_id": 3819415, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/67b228536ece20c66cfb7b80a1199b7b?s=128&d=identicon&r=PG&f=1", "display_name": "wolframalpha", "link": "https://stackoverflow.com/users/3819415/wolframalpha"}, "edited": false, "score": 0, "creation_date": 1467240380, "post_id": 38110651, "comment_id": 63656053, "body": "Add a <code>Frame</code> into the <code>Canvas</code> which is scrollable !"}, {"owner": {"reputation": 53, "user_id": 6226039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20f98b06c8cfa27c14875f1236339611?s=128&d=identicon&r=PG&f=1", "display_name": "stackofpancakes", "link": "https://stackoverflow.com/users/6226039/stackofpancakes"}, "reply_to_user": {"reputation": 925, "user_id": 3819415, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/67b228536ece20c66cfb7b80a1199b7b?s=128&d=identicon&r=PG&f=1", "display_name": "wolframalpha", "link": "https://stackoverflow.com/users/3819415/wolframalpha"}, "edited": false, "score": 0, "creation_date": 1467241145, "post_id": 38110651, "comment_id": 63656333, "body": "@wolframalpha Please forgive my code fog, but I am having issues engineering that to happen."}, {"owner": {"reputation": 925, "user_id": 3819415, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/67b228536ece20c66cfb7b80a1199b7b?s=128&d=identicon&r=PG&f=1", "display_name": "wolframalpha", "link": "https://stackoverflow.com/users/3819415/wolframalpha"}, "edited": false, "score": 0, "creation_date": 1467241732, "post_id": 38110651, "comment_id": 63656535, "body": "Okay but what exactly you want to do ? Adding Frame to a canvas is as simple as <code>frame_in_canvas = Frame(w1)</code> you can then add anything into the <code>frame_in_canvas</code> and since w1 is the root of the Frame it will be scrollable. Your question is unclear!"}, {"owner": {"reputation": 53, "user_id": 6226039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20f98b06c8cfa27c14875f1236339611?s=128&d=identicon&r=PG&f=1", "display_name": "stackofpancakes", "link": "https://stackoverflow.com/users/6226039/stackofpancakes"}, "reply_to_user": {"reputation": 925, "user_id": 3819415, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/67b228536ece20c66cfb7b80a1199b7b?s=128&d=identicon&r=PG&f=1", "display_name": "wolframalpha", "link": "https://stackoverflow.com/users/3819415/wolframalpha"}, "edited": false, "score": 0, "creation_date": 1467242686, "post_id": 38110651, "comment_id": 63656848, "body": "@wolframalpha I&#39;m sorry I&#39;m not being clear enough. The code I have above will scroll but only for the &quot;test&quot; canvas I have to the right. I want only the data I&#39;m dumping to be scrollable but as it is, it&#39;s just scrolling that right canvas. Adding in frame_in_canvas before my adding of my data doesn&#39;t change anything cause right now w1 and text aren&#39;t even &quot;talking&quot; to one another. I don&#39;t know how to add the text.pack() into w1."}], "owner": {"reputation": 53, "user_id": 6226039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20f98b06c8cfa27c14875f1236339611?s=128&d=identicon&r=PG&f=1", "display_name": "stackofpancakes", "link": "https://stackoverflow.com/users/6226039/stackofpancakes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1467239285, "creation_date": 1467237112, "last_edit_date": 1495540349, "question_id": 38110651, "link": "https://stackoverflow.com/questions/38110651/need-help-understanding-creating-a-scrollable-frame-with-python-tkinter", "title": "Need help understanding/creating a scrollable frame with python Tkinter", "body": "<p>I am somewhat new to python and totally new to user interfaces of this kind, so I apologize if I am not using the correct terminology. </p>\n\n<p>I have also spent a good amount of time trying to create a solution or adapt an existing one and now my head is admittedly jumbled. I also recently posted this same question with a different iteration of making a scrolled area. </p>\n\n<pre><code>root = Tkinter.Tk()\n\nframe = Frame(root)\nframe.pack(side=RIGHT)\n\nw1 = Canvas(frame, width=600, height=300,scrollregion=(0,0,3000,3000))\n\nscr_h1 = Scrollbar(orient=HORIZONTAL)\nscr_h1.pack(side=BOTTOM,fill=X)\nscr_h1.config(command=w1.xview)\n\nscr_v1 = Scrollbar(orient=VERTICAL)\nscr_v1.pack(side=RIGHT,fill=Y)\nscr_v1.config(command=w1.yview)\n\nw1.config(xscrollcommand=scr_h1.set,yscrollcommand=scr_v1.set)\nw1.pack(fill=BOTH,expand=True)\n\n#inserted to see if it's actually scrolling\nw1.create_oval(0,0,50,50,fill='red')\n\ndata = information.read()\n\nL1 = Label(root, text = 'A Title')\nL1.pack(side=TOP)\n\ntext = Text(root)\ntext.insert(INSERT, data)\ntext.pack()\n</code></pre>\n\n<p>This creates a canvas to the right of the original and scrolls the rightmost one (as tested with the red oval). How can I insert text portion on the same canvas as the scrollbar? I was told that anything added via pack (or grid or place) won't be able to scroll. What should I be doing instead?</p>\n\n<p>The way the data is displayed now is just fine except for the fact that it exceeds the length of the screen so a scrollbar is required to view it. Right now, the data is dumped in its own individual canvas for each file, it's having a scrollbar for the entire set that would be helpful. </p>\n\n<p>Thank you for taking the time and providing detailed feedback. Learning is a process and this function is something I'm having some issues utilizing. </p>\n\n<p>This scrollbar framework taken from an answer here:\n<a href=\"https://stackoverflow.com/questions/25132438/tkinter-cant-make-frame-scrollable/25695618#25695618\">tkinter: Can&#39;t make frame scrollable</a></p>\n"}, {"tags": ["python", "algorithm", "levenshtein-distance", "naivebayes"], "owner": {"reputation": 467, "user_id": 4789356, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/bzHKV.jpg?s=128&g=1", "display_name": "Luca", "link": "https://stackoverflow.com/users/4789356/luca"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 467, "favorite_count": 3, "answer_count": 0, "score": 4, "last_activity_date": 1467236988, "creation_date": 1467236988, "question_id": 38110630, "link": "https://stackoverflow.com/questions/38110630/how-to-improve-accuracy-of-record-linkage-algorithm", "title": "How to Improve Accuracy of Record Linkage Algorithm", "body": "<p>I have written a program that looks for probable duplicate records in a list of records. The current version of my program recognized 94 percent of the duplicates found by a manual check of the data, though if possible I need to get that up to 100 percent, while minimizing false positives. This has proved tricky.</p>\n\n<p>My program takes as input a spreadsheet with four relevant columns each of length n. First the record name, followed by three string attributes. For each attribute column, I compare each element with each other element by comparing their Levenshtein distances and forming an nxn matrix that contains each distance. Then I weed out pairs of elements in the matrix that are insufficiently similar by only selecting pairs whose distance is below a chosen threshold (the threshold is different for each column because some attributes have more or less variance in their instances). Two records are then said to be probable duplicates if at least one of their corresponding pairs of attributes is a probable duplicate.</p>\n\n<pre><code>Sample output: Kang,[Kor, Koloth, Martok]\n</code></pre>\n\n<p>where the record Kang is a probable duplicate of Kor, Koloth, and Martok\nbecause at least one of their associated fields is similar to that of Kang</p>\n\n<pre><code>e.g. bat'leth,[mek'leth,d'k tahg, mek'leth]\n</code></pre>\n\n<p>I could easily tweak the Levenshtein distance threshold to detect a higher portion of duplicates, but it seems that raising them higher than they already are yields diminishing marginal recognitions and dramatically increases the number of false positives, as there are a small number of duplicates whose attributes are very dissimilar (not sure I can post examples; it is work sensitive). I have considered alternate solutions like using other string similarity functions besides Levenshtein's or even a Na\u00efve Byes classifier.\nHow do you think I could best improve the accuracy of my program?</p>\n"}, {"tags": ["python", "if-statement"], "comments": [{"owner": {"reputation": 452, "user_id": 702383, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0FIFS.jpg?s=128&g=1", "display_name": "RCA", "link": "https://stackoverflow.com/users/702383/rca"}, "edited": false, "score": 0, "creation_date": 1467236630, "post_id": 38110519, "comment_id": 63654612, "body": "Did you mean to have an elif for &quot;input3&quot; 3 times?"}, {"owner": {"reputation": 5236, "user_id": 1913990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fab871420257b4167142acf11b0923cb?s=128&d=identicon&r=PG", "display_name": "cmd", "link": "https://stackoverflow.com/users/1913990/cmd"}, "edited": false, "score": 0, "creation_date": 1467236634, "post_id": 38110519, "comment_id": 63654613, "body": "I sometimes put the then thing I&#39;m matching on as a key in a dictionary and the thing I want to do as the value, then do something like <code>D[userinput]()</code> but that only works for <code>==</code> matches and a default"}], "owner": {"reputation": 692, "user_id": 1654472, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/c03ac12022362a6901505ead53bf80c1?s=128&d=identicon&r=PG", "display_name": "GeekSince1982", "link": "https://stackoverflow.com/users/1654472/geeksince1982"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "closed_date": 1467236588, "answer_count": 0, "score": 0, "last_activity_date": 1467237759, "creation_date": 1467236453, "last_edit_date": 1467237759, "question_id": 38110519, "link": "https://stackoverflow.com/questions/38110519/alternative-to-many-if-statements-in-python", "closed_reason": "Duplicate", "title": "Alternative to many IF statements in python?", "body": "<p>I know there are a lot of questions about that, but they are all about some specific cases.</p>\n\n<p>I have a general question.  I have code which compares user input to many possible values (keywords).</p>\n\n<p>All works, but I hate the \"monstrosity\".</p>\n\n<p>it's like this:</p>\n\n<pre><code> if userinput == \"input1\":\n   print('input1')\n elif userinput == \"input2\":\n   print('input2')\n elif userinput == \"input3\":\n   print('input3')\n elif userinput == \"input4\":\n   print('input4')\n elif userinput == \"input5\":\n   print('input5')\n # repeat many times until the last else\n else:\n   print('all the rest')\n</code></pre>\n\n<ul>\n<li>the inputs can be ANYTHING. And comparison is not always just <code>==</code>.</li>\n<li>the action on match sometimes can be a long piece of code too, not just print.</li>\n</ul>\n\n<p>I can't really combine those conditions and I on purpose don't want to, since each one detects it's own thing. </p>\n\n<p>My question is: Any practice of making such cases more readable? Cleaner? </p>\n\n<p>One thing I am thinking is to call an external functions per case from each comparison and store those functions in separate *.py file. The best I can think of at this point..</p>\n\n<p>Any better ideas\\ways to handle that?</p>\n"}, {"tags": ["python", "file"], "comments": [{"owner": {"reputation": 76348, "user_id": 392044, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/4df33f9e8a81cc9d8046f057dbb4debc?s=128&d=identicon&r=PG", "display_name": "Mike Christensen", "link": "https://stackoverflow.com/users/392044/mike-christensen"}, "edited": false, "score": 1, "creation_date": 1467236448, "post_id": 38110503, "comment_id": 63654531, "body": "You&#39;ll probably want to add a language tag if you want anyone to see this.."}, {"owner": {"reputation": 175722, "user_id": 328193, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/FnwU5.jpg?s=128&g=1", "display_name": "David", "link": "https://stackoverflow.com/users/328193/david"}, "edited": false, "score": 0, "creation_date": 1467236553, "post_id": 38110503, "comment_id": 63654577, "body": "So you want to <i>append</i> to the file instead of <i>overwrite</i> it.  Whatever language/framework/etc. you&#39;re using should have some means of distinguishing between the two.  Check the documentation."}, {"owner": {"reputation": 7, "user_id": 6335400, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Xmcb8.jpg?s=128&g=1", "display_name": "Zebra", "link": "https://stackoverflow.com/users/6335400/zebra"}, "edited": false, "score": 0, "creation_date": 1467236744, "post_id": 38110503, "comment_id": 63654667, "body": "I&#39;ve only started learning Python a month. I don&#39;t know this section well which is why I&#39;m asking."}, {"owner": {"reputation": 7, "user_id": 6335400, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Xmcb8.jpg?s=128&g=1", "display_name": "Zebra", "link": "https://stackoverflow.com/users/6335400/zebra"}, "edited": false, "score": 0, "creation_date": 1467237856, "post_id": 38110503, "comment_id": 63655128, "body": "Thank you. Just solved my problem."}], "answers": [{"tags": [], "owner": {"reputation": 76348, "user_id": 392044, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/4df33f9e8a81cc9d8046f057dbb4debc?s=128&d=identicon&r=PG", "display_name": "Mike Christensen", "link": "https://stackoverflow.com/users/392044/mike-christensen"}, "is_accepted": false, "score": 0, "last_activity_date": 1467237100, "creation_date": 1467237100, "answer_id": 38110646, "question_id": 38110503, "link": "https://stackoverflow.com/questions/38110503/text-files-writing-on-sepates-lines/38110646#38110646", "title": "Text files: writing on sepates lines", "body": "<p>From the <a href=\"https://docs.python.org/2/library/functions.html#open\" rel=\"nofollow\">docs</a>:</p>\n\n<blockquote>\n  <p>The most commonly-used values of mode are 'r' for reading, 'w' for writing (truncating the file if it already exists), and 'a' for\n  appending (which on some Unix systems means that all writes append to\n  the end of the file regardless of the current seek position).</p>\n</blockquote>\n\n<p>So, probably what you'd want is:</p>\n\n<pre><code>A = open(\"File.txt\", \"a\")\nA.write(\"cbcobcebviue\")\nA.close\n</code></pre>\n\n<p>Note, you'd want to put a <code>\\n</code> at the end of your string to insert a line break.</p>\n"}, {"comments": [{"owner": {"reputation": 7, "user_id": 6335400, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Xmcb8.jpg?s=128&g=1", "display_name": "Zebra", "link": "https://stackoverflow.com/users/6335400/zebra"}, "edited": false, "score": 0, "creation_date": 1467243406, "post_id": 38110698, "comment_id": 63657072, "body": "Yes! This is what I was looking for! THANKS YOU :D!"}], "tags": [], "owner": {"reputation": 71409, "user_id": 3125566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QcWOt.jpg?s=128&g=1", "display_name": "Moses Koledoye", "link": "https://stackoverflow.com/users/3125566/moses-koledoye"}, "is_accepted": true, "score": 2, "last_activity_date": 1467237224, "creation_date": 1467237224, "answer_id": 38110698, "question_id": 38110503, "link": "https://stackoverflow.com/questions/38110503/text-files-writing-on-sepates-lines/38110698#38110698", "title": "Text files: writing on sepates lines", "body": "<p>You need to add a new line character <code>'\\n'</code> to your string:</p>\n\n<pre><code>A = open(\"File.txt\", \"w\")\nA.write(\"cbcobcebviue\\n\")\n#                     ^\nA.close()\n</code></pre>\n\n<blockquote>\n  <p>newline, also known as a line ending, end of line (EOL), or line\n  break, is a special character or sequence of characters signifying the\n  end of a line of text and the start of a new line</p>\n</blockquote>\n\n<p>So as in your example, you would do:</p>\n\n<pre><code>A = open(\"File.txt\", \"w\")\nA.write(\"aaaa\\naaxsxs\\naaaaa\\n\")\n#             ^       ^      ^ \nA.close()\n</code></pre>\n\n<p>Which would be written in your file as:</p>\n\n<pre><code>aaaa\naaxsxs\naaaaa\n</code></pre>\n"}], "owner": {"reputation": 7, "user_id": 6335400, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Xmcb8.jpg?s=128&g=1", "display_name": "Zebra", "link": "https://stackoverflow.com/users/6335400/zebra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28, "favorite_count": 0, "accepted_answer_id": 38110698, "answer_count": 2, "score": -2, "last_activity_date": 1467237224, "creation_date": 1467236396, "last_edit_date": 1467236852, "question_id": 38110503, "link": "https://stackoverflow.com/questions/38110503/text-files-writing-on-sepates-lines", "title": "Text files: writing on sepates lines", "body": "<p>Propose we have this simple function:</p>\n\n<pre><code>X():\n   A = open(\"File.txt\", \"w\")\n   A.write(\"cbcobcebviue\")\n   A.close\n</code></pre>\n\n<p>In the file we would see \"cbcobcebviue\". My questions is how do we write on separate lines without over-writing producing something like this,\naaaa (Line1)\naaxsxs (Line2)\naaaaa (Line3)\nNOT aaaaaaxsxsaaaaa (Line1)?\nI've been searching for HOURS and I can't find any clear answers. </p>\n"}, {"tags": ["python"], "answers": [{"tags": [], "owner": {"reputation": 5236, "user_id": 1913990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fab871420257b4167142acf11b0923cb?s=128&d=identicon&r=PG", "display_name": "cmd", "link": "https://stackoverflow.com/users/1913990/cmd"}, "is_accepted": false, "score": 4, "last_activity_date": 1467236302, "creation_date": 1467236302, "answer_id": 38110482, "question_id": 38110446, "link": "https://stackoverflow.com/questions/38110446/python-error-bool-not-iterable/38110482#38110482", "title": "Python error: &#39;bool&#39; not iterable", "body": "<pre><code>if f in f.startswith(\"20\"):\n</code></pre>\n\n<p>is not valid.  <code>startswith</code> returns a <code>bool</code> the <code>in</code> keyword trys to check for containment inside your <code>bool</code>.  That only works for iterables (which <code>bool</code> is not).  You probably want:</p>\n\n<pre><code>if f.startswith(\"20\"):\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6466990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d86225d2029a828098798d2ef4882d3?s=128&d=identicon&r=PG&f=1", "display_name": "mindturning", "link": "https://stackoverflow.com/users/6466990/mindturning"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1467236303, "creation_date": 1467236173, "last_edit_date": 1467236303, "question_id": 38110446, "link": "https://stackoverflow.com/questions/38110446/python-error-bool-not-iterable", "title": "Python error: &#39;bool&#39; not iterable", "body": "<p>I'm trying to run a code:</p>\n\n<pre><code>import os\nfrom os import listdir\n\nfor f in sorted(os.listdir(\"/path\")):\n    if f in f.startswith(\"20\"):\n        for f in sorted(os.listdir(f)):\n            if f.endswith(\".txt\"):\n                pass\n            else:\n                try:\n                   os.system(\"/path/script.py %s\" % f)\n                except:\n                   pass\n</code></pre>\n\n<p>I have received this error:</p>\n\n<pre><code>Traceback (most recent call last):\n\n File \"files_correct_phase.py\", line 5, in &lt;module&gt;\n    if f in f.startswith(\"20\"): \nTypeError: argument of type 'bool' is not iterable\n code here\n</code></pre>\n\n<p>I ran it inside the python prompt and it worked fine after line 5, but when I run it as</p>\n\n<pre><code>python python_script.py\n</code></pre>\n\n<p>in the command line, it gives me this error. I would be grateful for any advice and/or help.</p>\n\n<p>(Python version 2.7.6)</p>\n"}, {"tags": ["python", "redirect", "aiohttp"], "answers": [{"tags": [], "owner": {"reputation": 14527, "user_id": 3454879, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uSMGz.jpg?s=128&g=1", "display_name": "Andrew Svetlov", "link": "https://stackoverflow.com/users/3454879/andrew-svetlov"}, "is_accepted": false, "score": 3, "last_activity_date": 1467885426, "creation_date": 1467885426, "answer_id": 38242556, "question_id": 38110433, "link": "https://stackoverflow.com/questions/38110433/using-python-and-3-aiohttp-to-find-the-url-after-redirect-when-timeout/38242556#38242556", "title": "Using Python and 3 aiohttp to find the URL after redirect when timeout", "body": "<p>The only way to do it is disabling redirects by <code>allow_redirects=False</code> and performing redirections manually.</p>\n"}, {"comments": [{"owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 0, "creation_date": 1520143260, "post_id": 49091337, "comment_id": 85190167, "body": "Some explanation would be helpful here."}, {"owner": {"reputation": 625, "user_id": 2643679, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/63fc37cb15f5d33453bbd570bd925c8d?s=128&d=identicon&r=PG", "display_name": "user2643679", "link": "https://stackoverflow.com/users/2643679/user2643679"}, "reply_to_user": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 0, "creation_date": 1520234219, "post_id": 49091337, "comment_id": 85215384, "body": "The final url from the redirect is output in the response and the Location variable is just extracting that part from it."}], "tags": [], "owner": {"reputation": 625, "user_id": 2643679, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/63fc37cb15f5d33453bbd570bd925c8d?s=128&d=identicon&r=PG", "display_name": "user2643679", "link": "https://stackoverflow.com/users/2643679/user2643679"}, "is_accepted": false, "score": 0, "last_activity_date": 1520130434, "creation_date": 1520130434, "answer_id": 49091337, "question_id": 38110433, "link": "https://stackoverflow.com/questions/38110433/using-python-and-3-aiohttp-to-find-the-url-after-redirect-when-timeout/49091337#49091337", "title": "Using Python and 3 aiohttp to find the URL after redirect when timeout", "body": "<pre><code>async with aiohttp.ClientSession() as session:\n    async with session.get(URL, allow_redirects=False) as response:\n        Location = str(response).split(\"Location': \\'\")[1].split(\"\\'\")[0]\n            return Location\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 18483, "user_id": 497600, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/9d2bd51b0d7a3e483cb42919119d2e8d?s=128&d=identicon&r=PG", "display_name": "lhk", "link": "https://stackoverflow.com/users/497600/lhk"}, "is_accepted": false, "score": 0, "last_activity_date": 1551271574, "creation_date": 1551271574, "answer_id": 54905840, "question_id": 38110433, "link": "https://stackoverflow.com/questions/38110433/using-python-and-3-aiohttp-to-find-the-url-after-redirect-when-timeout/54905840#54905840", "title": "Using Python and 3 aiohttp to find the URL after redirect when timeout", "body": "<p>I don't think it is necessary anymore to parse that string for a Location. Here is a small example.</p>\n\n<p>Local flask server with a redirect:</p>\n\n<pre><code>from flask import Flask, redirect\n\napp = Flask(__name__)\n\n\n@app.route('/')\ndef hello_world():\n    return 'Hello World!'\n\n@app.route('/redirect')\ndef redir():\n    return redirect('/')\n\n\nif __name__ == '__main__':\n    app.run()\n</code></pre>\n\n<p>aiohttp request to that redirect:</p>\n\n<pre><code># coding: utf-8\nimport asyncio\nimport aiohttp\n\n\nasync def fetch(URL):\n    async with aiohttp.ClientSession() as session:\n        async with session.get(URL, allow_redirects=False) as response:\n            print(response.url, response.real_url, 'location' in str(response).lower())\n\n        async with session.get(URL, allow_redirects=True) as response:\n            print(response.url, response.real_url, 'location' in str(response).lower())\n\nurl = \"http://127.0.0.1:5000/redirect\"\n\nasync def main():\n    await fetch(local_url)\n\nloop = asyncio.new_event_loop()\nloop.run_until_complete(main())\n</code></pre>\n\n<p>prints:</p>\n\n<pre><code>http://127.0.0.1:5000/redirect http://127.0.0.1:5000/redirect True\nhttp://127.0.0.1:5000/ http://127.0.0.1:5000/ False\n</code></pre>\n\n<p>According to the <a href=\"https://docs.aiohttp.org/en/stable/client_reference.html#aiohttp.ClientResponse.real_url\" rel=\"nofollow noreferrer\">docs</a>, the difference between <code>url</code> and <code>real_url</code> is that real_url is the raw string of the original request, not stripped.</p>\n"}], "owner": {"reputation": 902, "user_id": 3586151, "user_type": "registered", "accept_rate": 64, "profile_image": "https://graph.facebook.com/8637474/picture?type=large", "display_name": "loneraver", "link": "https://stackoverflow.com/users/3586151/loneraver"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2363, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1551271574, "creation_date": 1467236111, "question_id": 38110433, "link": "https://stackoverflow.com/questions/38110433/using-python-and-3-aiohttp-to-find-the-url-after-redirect-when-timeout", "title": "Using Python and 3 aiohttp to find the URL after redirect when timeout", "body": "<p>I'm currently trying to audit a large number of redirect URL handles to make sure that their destinations are still valid. </p>\n\n<p>I'm using aiohttp to go through the large volume in order to produce a report. </p>\n\n<pre><code>try:\n    with aiohttp.Timeout(timeout):\n        async with session.get(url) as resp:\n            return {\"Handle URL\": url,\n                    \"Status Code\": resp.status,\n                    \"Redirects\": resp.url != url,\n                    \"Resolving URL\": resp.url,\n                    \"Success\": resp.status == 200,\n                    \"Message\": \"\"}\nexcept asyncio.TimeoutError:\n        return {\"Handle URL\": url,\n                \"Success\": False,\n                \"Message\": \"Handle server timed out. &gt;{} seconds\".format(timeout)}\n</code></pre>\n\n<p>For the most part, this has been fine for identifying which URL redirect no longer sends to a valid URL. However, I'd really like to know the final address where times out.</p>\n\n<p>Any ideas?</p>\n"}, {"tags": ["python", "python-2.7"], "comments": [{"owner": {"reputation": 84731, "user_id": 510937, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/70b13a9ae1aae1ca1aa6ac8dab4643f2?s=128&d=identicon&r=PG", "display_name": "Bakuriu", "link": "https://stackoverflow.com/users/510937/bakuriu"}, "edited": false, "score": 2, "creation_date": 1467236171, "post_id": 38110430, "comment_id": 63654395, "body": "<code>isalpha</code> is not a function. It&#39;s a method: <code>x.isalpha()</code>."}], "answers": [{"comments": [{"owner": {"reputation": 439, "user_id": 5335180, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6056234c06dfa76d0373bc3814438ed1?s=128&d=identicon&r=PG", "display_name": "reas0n", "link": "https://stackoverflow.com/users/5335180/reas0n"}, "edited": false, "score": 0, "creation_date": 1467236270, "post_id": 38110458, "comment_id": 63654451, "body": "fair enough, what about sin(3.3) telling me that <code>&#39;sin&#39; is not defined</code>?"}, {"owner": {"reputation": 71409, "user_id": 3125566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QcWOt.jpg?s=128&g=1", "display_name": "Moses Koledoye", "link": "https://stackoverflow.com/users/3125566/moses-koledoye"}, "reply_to_user": {"reputation": 439, "user_id": 5335180, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6056234c06dfa76d0373bc3814438ed1?s=128&d=identicon&r=PG", "display_name": "reas0n", "link": "https://stackoverflow.com/users/5335180/reas0n"}, "edited": false, "score": 0, "creation_date": 1467236322, "post_id": 38110458, "comment_id": 63654480, "body": "You need to import: <code>from math import sin</code>"}], "tags": [], "owner": {"reputation": 71409, "user_id": 3125566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QcWOt.jpg?s=128&g=1", "display_name": "Moses Koledoye", "link": "https://stackoverflow.com/users/3125566/moses-koledoye"}, "is_accepted": false, "score": 1, "last_activity_date": 1467236444, "last_edit_date": 1467236444, "creation_date": 1467236208, "answer_id": 38110458, "question_id": 38110430, "link": "https://stackoverflow.com/questions/38110430/interpreter-python-built-in-functions-not-defined/38110458#38110458", "title": "Interpreter: Python built-in functions not defined?", "body": "<p><code>isalpha</code> is a method for strings, not a builtin function as you suppose.</p>\n\n<pre><code>&gt;&gt;&gt; '34r'.isalpha()\nFalse\n&gt;&gt;&gt; '45'.isalpha()\nFalse\n&gt;&gt;&gt; 'rt'.isalpha()\nTrue\n</code></pre>\n\n<p>To use <code>sin</code>, you need to import: <code>from math import sin</code></p>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 6525674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cdf25b5dca34af1452dd4b6a3c63cd2?s=128&d=identicon&r=PG&f=1", "display_name": "iciaran", "link": "https://stackoverflow.com/users/6525674/iciaran"}, "is_accepted": false, "score": 0, "last_activity_date": 1467236243, "creation_date": 1467236243, "answer_id": 38110469, "question_id": 38110430, "link": "https://stackoverflow.com/questions/38110430/interpreter-python-built-in-functions-not-defined/38110469#38110469", "title": "Interpreter: Python built-in functions not defined?", "body": "<p>For <code>sin(3.3)</code> you have to <code>import math</code>, then call <code>math.sin(3.3)</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 4294, "user_id": 2738262, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ead9263d3f0f0cc74f54d5d9fdbaa4cd?s=128&d=identicon&r=PG", "display_name": "Damian Yerrick", "link": "https://stackoverflow.com/users/2738262/damian-yerrick"}, "is_accepted": true, "score": 3, "last_activity_date": 1467236673, "creation_date": 1467236673, "answer_id": 38110566, "question_id": 38110430, "link": "https://stackoverflow.com/questions/38110430/interpreter-python-built-in-functions-not-defined/38110566#38110566", "title": "Interpreter: Python built-in functions not defined?", "body": "<p><code>isalpha()</code> is not a function but a method of the <code>str</code> type. If you have to, you can extract it as an unbound method and give it a name as a function:</p>\n\n<pre><code>&gt;&gt;&gt; \"hello\".isalpha()\nTrue\n&gt;&gt;&gt; \"31337\".isalpha()\nFalse\n&gt;&gt;&gt; isalpha = str.isalpha\n&gt;&gt;&gt; isalpha(\"hello\")\nTrue\n&gt;&gt;&gt; isalpha(\"31337\")\nFalse\n</code></pre>\n\n<p>Functions in an imported module are members of that module. To pull a function into the main namespace, use the <code>from</code> statement:</p>\n\n<pre><code>&gt;&gt;&gt; import math\n&gt;&gt;&gt; math.sin(3.3)\n-0.1577456941432482\n&gt;&gt;&gt; from math import cos\n&gt;&gt;&gt; cos(3.3)\n-0.9874797699088649\n</code></pre>\n\n<p>Now why does Python work this way? Both the <code>math</code> module and the <code>logging</code> module have a function called <code>log()</code>, but they do very different things.</p>\n\n<pre><code>&gt;&gt;&gt; import math, logging\n&gt;&gt;&gt; help(math.log)\n\nlog(...)\n    log(x[, base])\n\n    Return the logarithm of x to the given base.\n    If the base not specified, returns the natural logarithm (base e) of x.\n\n&gt;&gt;&gt; help(logging.log)\n\nlog(level, msg, *args, **kwargs)\n    Log 'msg % args' with the integer severity 'level' on the root logger. If\n    the logger has no handlers, call basicConfig() to add a console handler\n    with a pre-defined format.\n</code></pre>\n\n<p>If all imported symbols went straight to the main namespace the way they do when you <code>from math import *</code>, a program wouldn't be able to use both modules' <code>log()</code> functions.</p>\n"}], "owner": {"reputation": 439, "user_id": 5335180, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6056234c06dfa76d0373bc3814438ed1?s=128&d=identicon&r=PG", "display_name": "reas0n", "link": "https://stackoverflow.com/users/5335180/reas0n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5057, "favorite_count": 0, "accepted_answer_id": 38110566, "answer_count": 3, "score": 2, "last_activity_date": 1467236673, "creation_date": 1467236100, "question_id": 38110430, "link": "https://stackoverflow.com/questions/38110430/interpreter-python-built-in-functions-not-defined", "title": "Interpreter: Python built-in functions not defined?", "body": "<p>I was going through the basics of Python, and testing out some built-in functions in the interpreter. The documentation I was looking at was talking about Python 3... I am using Python 2.7.3. </p>\n\n<pre><code>&gt;&gt;&gt; x = '32456'\n&gt;&gt;&gt; x\n'32456'\n&gt;&gt;&gt; isalpha(x)\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nNameError: name 'isalpha' is not defined\n</code></pre>\n\n<p>I did some research and it does not seem that <code>isalpha()</code> is limited to only Python 3... I also cannot use <code>sin(3.3)</code> even after doing <code>import math</code></p>\n\n<p>So why am I seeing an error? Is there some other module I have to import for these functions to work?</p>\n"}, {"tags": ["python", "machine-learning", "tensorflow", "linear-regression", "deep-learning"], "answers": [{"tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 0, "last_activity_date": 1467236390, "creation_date": 1467236390, "answer_id": 38110501, "question_id": 38110414, "link": "https://stackoverflow.com/questions/38110414/how-to-test-my-trained-tensor-flow-model/38110501#38110501", "title": "How to test my trained Tensor Flow model", "body": "<p>Typically, you split your training set into two pieces: roughly 2/3 for training and 1/3 for testing (opinions vary on the proportions).  Train your model with the first set.  Check the training accuracy (run the training set back through the model to see how many it gets right).</p>\n\n<p>Now, run the remainder (test set) through the model and check how well the predictions match the results. \"Find the accuracy\" depends on what sort of predictions you're making: classification vs scoring, binary vs disjoint vs contiguous, etc.</p>\n"}], "owner": {"reputation": 11, "user_id": 5862655, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-RJUJfcOHfcE/AAAAAAAAAAI/AAAAAAAABrs/jJRVdHXO0V4/photo.jpg?sz=128", "display_name": "Anthony Sistilli", "link": "https://stackoverflow.com/users/5862655/anthony-sistilli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 665, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1467236390, "creation_date": 1467236007, "question_id": 38110414, "link": "https://stackoverflow.com/questions/38110414/how-to-test-my-trained-tensor-flow-model", "title": "How to test my trained Tensor Flow model", "body": "<p>I currently have a regression model that tries to predict a value based on 25 other ones. </p>\n\n<p>Here is the code I currently gave </p>\n\n<pre><code>import tensorflow as tf\nimport numpy as np\nimport matplotlib.pyplot as plt\nrng = np.random\nlearning_rate  = 0.11\ntraining_epochs = 1000\ndisplay_step = 50\nX = np.random.randint(5,size=(100,25)).astype('float32')\ny_data = np.random.randint(5,size=(100,1)).astype('float32')\nm = 100\nepochs = 100\nW = tf.Variable(tf.zeros([25,1]))\nb = tf.Variable(tf.zeros([1]))\ny = tf.add( tf.matmul(X,W), b)\nloss = tf.reduce_sum(tf.square(y - y_data)) / (2 * m)\nloss = tf.Print(loss, [loss], \"loss: \")\noptimizer = tf.train.GradientDescentOptimizer(.01)\n\ntrain = optimizer.minimize(loss)\n\ninit = tf.initialize_all_variables()\n\nsess = tf.Session()\nsess.run(init)\n\nfor i in range(epochs):\n  sess.run(train)\n\n\nsess.close()\n</code></pre>\n\n<p>I understand that right now these variables are all random so the accuracy would not be very good anyways, but I just want to know how to make a test set and find the accuracy of the predictions.</p>\n"}, {"tags": ["python", "arrays", "numpy", "scipy", "sqrt"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1467238756, "post_id": 38110408, "comment_id": 63655491, "body": "&quot;the norm.rvs function underneath takes a scalar&quot; - what makes you think that? The <a href=\"http://docs.scipy.org/doc/scipy-0.16.0/reference/generated/scipy.stats.rv_continuous.rvs.html#scipy.stats.rv_continuous.rvs\" rel=\"nofollow noreferrer\">documentation</a> says &quot;scale : array_like, optional&quot;."}, {"owner": {"reputation": 53, "user_id": 6511100, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d3424e74a1aaac8006071d1a23dd2db?s=128&d=identicon&r=PG&f=1", "display_name": "samman", "link": "https://stackoverflow.com/users/6511100/samman"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1467239342, "post_id": 38110408, "comment_id": 63655717, "body": "I missed array_like. I must of seen default = 1 and assumed it was a scalar also if I had seen array_like I didn&#39;t know what that means when combined with default = 1. Please remember when your not used to a language its hard to imagine a default of 1 for an array.  I know some languages are very loosely typed. I am not going to start a war about loose typing and hard typing but it sure makes it harder when your exposed to a new language when its not hard typed. Documentation should clarify scalar or array. I have no idea what array_like meant."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1467256367, "post_id": 38110408, "comment_id": 63660022, "body": "The saying in Python is: if it quacks like a duck it is a duck.  In many contexts a scalar (single number) can act like an array of numbers - just repeated the necessary of number times."}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 6511100, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d3424e74a1aaac8006071d1a23dd2db?s=128&d=identicon&r=PG&f=1", "display_name": "samman", "link": "https://stackoverflow.com/users/6511100/samman"}, "edited": false, "score": 0, "creation_date": 1467237608, "post_id": 38110712, "comment_id": 63655031, "body": "So what you are saying is that var_norm is in fact an array. I looked up the norm.rvs and it was a scalar and I think thats what got me stumped."}, {"owner": {"reputation": 348, "user_id": 2495342, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ff082a266a43a7035a80d40008fbdb57?s=128&d=identicon&r=PG", "display_name": "abnowack", "link": "https://stackoverflow.com/users/2495342/abnowack"}, "reply_to_user": {"reputation": 53, "user_id": 6511100, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d3424e74a1aaac8006071d1a23dd2db?s=128&d=identicon&r=PG&f=1", "display_name": "samman", "link": "https://stackoverflow.com/users/6511100/samman"}, "edited": false, "score": 0, "creation_date": 1467237675, "post_id": 38110712, "comment_id": 63655054, "body": "It can be both! If it is a scalar, every output of <code>norm.rvs</code> is generated with a constant scale, otherwise each output is made from individual scales in the scale array."}, {"owner": {"reputation": 53, "user_id": 6511100, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d3424e74a1aaac8006071d1a23dd2db?s=128&d=identicon&r=PG&f=1", "display_name": "samman", "link": "https://stackoverflow.com/users/6511100/samman"}, "edited": false, "score": 0, "creation_date": 1467238575, "post_id": 38110712, "comment_id": 63655435, "body": "When you say &quot;every output is from individual scales in the scale array&quot; it is still a little confusing.  I don&#39;t see a definition of what happens when scale is an array.  My understanding is the size parameter returns an array of that size. So how can scale also define the size of the array or is every sample from a different scale? Is ith return value is a sample with ith scale??"}, {"owner": {"reputation": 53, "user_id": 6511100, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d3424e74a1aaac8006071d1a23dd2db?s=128&d=identicon&r=PG&f=1", "display_name": "samman", "link": "https://stackoverflow.com/users/6511100/samman"}, "edited": false, "score": 0, "creation_date": 1467238929, "post_id": 38110712, "comment_id": 63655565, "body": "Sorry didn&#39;t have enough time to edit my comment above time ran out. Here goes a reword of the comment:   When you say &quot;every output is from individual scales in the scale array&quot; it is still a little confusing.  I don&#39;t see a definition of what happens when scale is an array.  My understanding is the rvs function will return an array &quot;size&quot; long. So how can scale also define the size of the array or is every sample from a different scale? If I understand correctly then ith return value is a sample with ith scale based on broadcasting?"}, {"owner": {"reputation": 348, "user_id": 2495342, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ff082a266a43a7035a80d40008fbdb57?s=128&d=identicon&r=PG", "display_name": "abnowack", "link": "https://stackoverflow.com/users/2495342/abnowack"}, "reply_to_user": {"reputation": 53, "user_id": 6511100, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d3424e74a1aaac8006071d1a23dd2db?s=128&d=identicon&r=PG&f=1", "display_name": "samman", "link": "https://stackoverflow.com/users/6511100/samman"}, "edited": false, "score": 0, "creation_date": 1467247573, "post_id": 38110712, "comment_id": 63658083, "body": "@samman yes, the ith return value is a sample with the ith scale. Try playing around with broadcasting. In the case of a single number for the scale parameter, the scales are all identical. Internal to the rvs function, it will create an array of length (size), which is then multiplied by the scale parameter. If scale is an array, it does array element multiplication. If scale is a scalar, it multiples them all by a constant."}], "tags": [], "owner": {"reputation": 348, "user_id": 2495342, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ff082a266a43a7035a80d40008fbdb57?s=128&d=identicon&r=PG", "display_name": "abnowack", "link": "https://stackoverflow.com/users/2495342/abnowack"}, "is_accepted": true, "score": 0, "last_activity_date": 1467237296, "creation_date": 1467237296, "answer_id": 38110712, "question_id": 38110408, "link": "https://stackoverflow.com/questions/38110408/can-someone-explain-how-arrays-and-scalars-are-handled-in-a-python-code-snippet/38110712#38110712", "title": "Can someone explain how arrays and scalars are handled in a Python code snippet", "body": "<p>In the line</p>\n\n<pre><code>mu_samples = norm.rvs(mean_norm,scale=var_norm,size=n_samples)\n</code></pre>\n\n<p><code>n_samples</code> has the same size as <code>var_norm</code>, so what is happening is that for the ith sample of <code>n_samples</code>, it generates it using the ith scale parameter of <code>var_norm</code>, <code>var_norm[i]</code></p>\n\n<p>Internal to the code is\n<code>vals = vals * scale + loc</code>, when scale is an array it uses broadcasting which is a common feature of numpy. <code>norm.rvs</code> already generated an array of <code>n_samples</code> random values. When multiplied by <code>scale</code>, it does an element-wise multiplication between each array. The result is that the left hand side will also be an array value. For more information see <a href=\"http://docs.scipy.org/doc/numpy/user/basics.broadcasting.html\" rel=\"nofollow\">here</a></p>\n"}, {"tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": false, "score": 0, "last_activity_date": 1467256151, "last_edit_date": 1467256151, "creation_date": 1467255734, "answer_id": 38113282, "question_id": 38110408, "link": "https://stackoverflow.com/questions/38110408/can-someone-explain-how-arrays-and-scalars-are-handled-in-a-python-code-snippet/38113282#38113282", "title": "Can someone explain how arrays and scalars are handled in a Python code snippet", "body": "<pre><code>sig_sq_samples = beta*invgamma.rvs(alpha,size=n_samples)\n</code></pre>\n\n<p>if \n    invgamma.rvs() - returns an array of numeric values\n    beta - is a scalar value</p>\n\n<p>then</p>\n\n<pre><code>sig_sq_samples = beta*invgamma.rvs(alpha,size=n_samples)\n</code></pre>\n\n<p>produces another array of the same size.  Scalar <code>beta</code> just multiplies each element.</p>\n\n<p>In</p>\n\n<pre><code>var_norm = sqrt(sig_sq_samples/kN)\n</code></pre>\n\n<p><code>kN</code> is scalar doing the same thing - dividing each element.  I assume <code>sqrt</code> is <code>numpy.sqrt</code>, which takes the sqrt of each element.  So <code>var_norm</code> is again an array of the original size (of <code>invgammas.rvs()</code>).</p>\n\n<pre><code>mu_samples = norm.rvs(mean_norm,scale=var_norm,size=n_samples)\n</code></pre>\n\n<p>I don't know what <code>norm.rvs</code> does, or where it is from.  It's not <code>numpy</code>, but could be a package in <code>scipy</code>.  I'd have to google it.  It takes one postional argument, here <code>mean_norm</code>, and two (at least) keyword values.  <code>n_samples</code> is probably a number, eg. 100.  But <code>scale</code> could certainly take an array, such as <code>var_norm</code>.</p>\n\n<p>======================</p>\n\n<p><a href=\"http://docs.scipy.org/doc/scipy-0.16.0/reference/generated/scipy.stats.rv_continuous.rvs.html#scipy.stats.rv_continuous.rvs\" rel=\"nofollow\">http://docs.scipy.org/doc/scipy-0.16.0/reference/generated/scipy.stats.rv_continuous.rvs.html#scipy.stats.rv_continuous.rvs</a></p>\n\n<p>appears to be the documentation for the <code>rvs</code> method (<code>norm</code> is a subclass of <code>rv_continuous</code>).</p>\n\n<p>Arguments are:</p>\n\n<pre><code>arg1, arg2, arg3,... : array_like\nThe shape parameter(s) for the distribution (see docstring of the instance object for more information).\n\nscale : array_like, optional\nScale parameter (default=1).\n\nsize : int or tuple of ints, optional\nDefining number of random variates (default is 1).\n</code></pre>\n\n<p>and the result is</p>\n\n<pre><code>rvs : ndarray or scalar\nRandom variates of given size.\n</code></pre>\n\n<p>I'm guessing <code>invgamma.rvs</code> is the similar method for a different subclass.  <code>alpha</code> must be the <code>shape</code> argument for the first, and <code>norm_mean</code> the shape for the 2nd.</p>\n"}], "owner": {"reputation": 53, "user_id": 6511100, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d3424e74a1aaac8006071d1a23dd2db?s=128&d=identicon&r=PG&f=1", "display_name": "samman", "link": "https://stackoverflow.com/users/6511100/samman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 38110712, "answer_count": 2, "score": 0, "last_activity_date": 1467256151, "creation_date": 1467235989, "question_id": 38110408, "link": "https://stackoverflow.com/questions/38110408/can-someone-explain-how-arrays-and-scalars-are-handled-in-a-python-code-snippet", "title": "Can someone explain how arrays and scalars are handled in a Python code snippet", "body": "<p>I have this code snippet I am trying to understand that is in python. I don't understand how scalars operate on arrays in all cases. In most code I read it makes sense that operations work on each value of an array.</p>\n\n<pre><code>sig_sq_samples = beta*invgamma.rvs(alpha,size=n_samples)\nvar_norm = sqrt(sig_sq_samples/kN)\nmu_samples = norm.rvs(mean_norm,scale=var_norm,size=n_samples)\n</code></pre>\n\n<p>I want to know how each line is functioning.  The reason being is that I don't have a linux machine setup with the library and thought someone may be able to help me understand this python code I have found in an article. I can not setup the environment in a reasonable amount of time. </p>\n\n<pre><code>invgamma.rvs() - returns an array of numeric values\nbeta - is a scalar value\n\nsig_sq_samples (I'm assuming)- is an array of beta * each array value of \nwhat invgamma.rvs() function returns.  \n\nvar_norm - I have no idea what this value is supposed to be because \nthe norm.rvs function underneath takes a scalar (scale=var_norm). \n</code></pre>\n\n<p>In short how is sqrt(siq_sq_samples/kn) with kN also a scalar returning back a scalar?  What is happening here? This one line is what is getting me.  Like I said earlier sig_sq_samples is an array. I hope I'm not wrong about that line that is producing sig_sq_samples. At one point or another the values being worked on are scalars. I am from c# where hard types are used and I have worked with scripting languages such as PERL where I had a lot of experience with what \"shortcut\" operations do.  Ex. C# does not allow you to multiply a scalar to an array.  I tried to look up how scalars work with arrays but it doesn't clarify this code to me. Anyone answering is more than welcome to look up the functions above in case I am wrong about anything. I put a lot of effort and I have many years of development experience. Either this code snippet is wrong or I'm just not seeing something real obvious. </p>\n"}, {"tags": ["python", "python-2.7", "optimization", "scipy", "signal-processing"], "comments": [{"owner": {"reputation": 92118, "user_id": 1217358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2aafb97833979e3668c61d36e697bfc?s=128&d=identicon&r=PG", "display_name": "Warren Weckesser", "link": "https://stackoverflow.com/users/1217358/warren-weckesser"}, "edited": false, "score": 0, "creation_date": 1467238042, "post_id": 38110313, "comment_id": 63655199, "body": "What is the length of <code>data_arr[some_number:some_number]</code>?  At the heart of the periodogram calculation is a fast fourier transform, and the time required for an FFT depends on the length--best is a power of 2, worst is a large prime number.  Try using the <code>nfft</code> argument, using a power of 2."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6530460"}, "reply_to_user": {"reputation": 92118, "user_id": 1217358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2aafb97833979e3668c61d36e697bfc?s=128&d=identicon&r=PG", "display_name": "Warren Weckesser", "link": "https://stackoverflow.com/users/1217358/warren-weckesser"}, "edited": false, "score": 1, "creation_date": 1467311502, "post_id": 38110313, "comment_id": 63692663, "body": "Ah! I didnt think of that, I knew that a FFT was was happening in the back end, but I didnt think to check prime vs. non-prime. Since the length of <code>data_arr</code> truncated is in fact prime number, truncating it to <code>data_arr[some_number:some_number-1]</code> fixed the issue. I appreciate the help."}], "owner": {"user_type": "does_not_exist", "display_name": "user6530460"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 471, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1471965148, "creation_date": 1467235576, "question_id": 38110313, "link": "https://stackoverflow.com/questions/38110313/python-scipy-signal-periodogram-optimization", "title": "Python scipy.signal.periodogram() optimization", "body": "<p>I am trying to analyze a signal and I need to compute multiple periodograms in a <code>for</code> loop. When I run: </p>\n\n<pre><code>scipy.signal.periodogram(data_arr,fs=sampling_frequency, window=some_window)\n</code></pre>\n\n<p>on my data array which has a <code>len() = 3456410</code> it only take ~3 seconds or so. HOWEVER, when I run a truncated version of my data <code>data_arr[some_number:some_number]</code>, which has a significantly smaller size than the original <code>data_arr</code>(about an order of magnitude), using <code>scipy.signal.periodogram()</code> it take ~3 minutes to run the same process on less data.</p>\n\n<p>I have also tried this using the <code>spectrum.DaniellPeriodogram()</code> and it does the same thing.</p>\n\n<p>I assume the issue lies in the back end somewhere, possibly using python's <code>[:]</code> method to truncate my data. Ive also checked out the scipys source code for the function, but I cant seem to find the issue. Any suggestions as to why it takes longer to process my truncated data vs the entire data array?</p>\n"}, {"tags": ["python", "arrays", "numpy", "vectorization", "dot-product"], "answers": [{"tags": [], "owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "is_accepted": false, "score": 1, "last_activity_date": 1467236541, "last_edit_date": 1467236541, "creation_date": 1467235747, "answer_id": 38110345, "question_id": 38110296, "link": "https://stackoverflow.com/questions/38110296/numpy-dot-product-for-many-small-matrices-at-once/38110345#38110345", "title": "NumPy: Dot product for many small matrices at once", "body": "<p>Looking closely at the code and trying to get a bigger picture reveals some information there. The first axis needs alignment between <code>A</code> and its transposed version as we are iterating through the first axis for both these versions in the code. Then, there is reduction along the third axis in both <code>A</code> and its transposed version. Now, to maintain the alignment and perform such a dot product reduction, there's one good vectorized option in <a href=\"http://docs.scipy.org/doc/numpy/reference/generated/numpy.einsum.html\" rel=\"nofollow\"><code>np.einsum</code></a>. Thus, to solve our case, the implementation would look like this -</p>\n\n<pre><code>B = np.einsum('ijk,ilk-&gt;ijl',A,A)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 10159, "user_id": 509824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c62e65b86aabdffdd1c628aad1fefe3?s=128&d=identicon&r=PG", "display_name": "Alberto Garcia-Raboso", "link": "https://stackoverflow.com/users/509824/alberto-garcia-raboso"}, "is_accepted": true, "score": 3, "last_activity_date": 1521567098, "last_edit_date": 1521567098, "creation_date": 1467235948, "answer_id": 38110396, "question_id": 38110296, "link": "https://stackoverflow.com/questions/38110296/numpy-dot-product-for-many-small-matrices-at-once/38110396#38110396", "title": "NumPy: Dot product for many small matrices at once", "body": "<p>You can obtain the list of transposed matrices as <code>A.swapaxes(1, 2)</code>, and the list of products you want as <code>A @ A.swapaxes(1, 2)</code>.</p>\n\n<pre><code>import numpy as np\n\nA = np.random.rand(25, 3, 3)\n\nB = np.array([\n    np.dot(a, a.T) for a in A\n    ])\n\nC = A @ A.swapaxes(1, 2)\n\n(B==C).all()     # =&gt; True\n</code></pre>\n\n<p>The <a href=\"http://legacy.python.org/dev/peps/pep-0465/\" rel=\"nofollow noreferrer\"><code>@</code> operator</a> is just syntactic sugar for <code>np.matmul</code>, about which the <a href=\"http://docs.scipy.org/doc/numpy/reference/generated/numpy.matmul.html#numpy.matmul\" rel=\"nofollow noreferrer\">documentation</a> says that \"<em>if either argument is N-D, N > 2, it is treated as a stack of matrices residing in the last two indexes and broadcast accordingly.</em>\"</p>\n"}], "owner": {"reputation": 36288, "user_id": 353337, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/500a1e2e864ae08f386afde2cd21add0?s=128&d=identicon&r=PG", "display_name": "Nico Schl&#246;mer", "link": "https://stackoverflow.com/users/353337/nico-schl%c3%b6mer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 557, "favorite_count": 0, "accepted_answer_id": 38110396, "answer_count": 2, "score": 1, "last_activity_date": 1521567098, "creation_date": 1467235501, "last_edit_date": 1521567052, "question_id": 38110296, "link": "https://stackoverflow.com/questions/38110296/numpy-dot-product-for-many-small-matrices-at-once", "title": "NumPy: Dot product for many small matrices at once", "body": "<p>I have a long array of 3-by-3 matrices, e.g.,</p>\n\n\n\n<pre><code>import numpy as np\n\nA = np.random.rand(25, 3, 3)\n</code></pre>\n\n<p>and for each of the small matrices, I would like to perform an outer product <code>dot(a, a.T)</code>. The list comprehension</p>\n\n<pre><code>import numpy as np\n\nB = np.array([\n    np.dot(a, a.T) for a in A\n    ])\n</code></pre>\n\n<p>works, but doesn't perform well. A possible improvement could be to do just <em>one</em> big <code>dot</code> product, but I'm having troubles here setting up <code>A</code> correctly for it.</p>\n\n<p>Any hints?</p>\n"}, {"tags": ["python", "pandas", "timestamp"], "comments": [{"owner": {"reputation": 1969, "user_id": 3226167, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/1e771933b5dfb28ed88555ec92b7dc77?s=128&d=identicon&r=PG&f=1", "display_name": "user3226167", "link": "https://stackoverflow.com/users/3226167/user3226167"}, "edited": false, "score": 0, "creation_date": 1514880516, "post_id": 38110263, "comment_id": 83087237, "body": "Is it because the standard format is <code>35.317</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 142796, "user_id": 42346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZikEw.jpg?s=128&g=1", "display_name": "mechanical_meat", "link": "https://stackoverflow.com/users/42346/mechanical-meat"}, "is_accepted": false, "score": 2, "last_activity_date": 1467235617, "creation_date": 1467235617, "answer_id": 38110323, "question_id": 38110263, "link": "https://stackoverflow.com/questions/38110263/in-pandas-how-to-convert-a-string-to-a-datetime-object-with-milliseconds/38110323#38110323", "title": "In Pandas, how to convert a string to a datetime object with milliseconds?", "body": "<p>Normally there is a period / full-stop between the seconds and microseconds.  </p>\n\n<p>Since your data does not have that you can specify how your data is formatted:</p>\n\n<pre><code>pd.to_datetime('2016-06-10 18:57:35:317', format='%Y-%m-%d %H:%M:%S:%f')\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 142796, "user_id": 42346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZikEw.jpg?s=128&g=1", "display_name": "mechanical_meat", "link": "https://stackoverflow.com/users/42346/mechanical-meat"}, "edited": false, "score": 1, "creation_date": 1467235772, "post_id": 38110324, "comment_id": 63654223, "body": "Awesome! We answered at the same time! Well played, Sir"}, {"owner": {"reputation": 2819, "user_id": 1451311, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/ee722dcd3d2b6473cb2d26584288fa62?s=128&d=identicon&r=PG&f=1", "display_name": "mgilbert", "link": "https://stackoverflow.com/users/1451311/mgilbert"}, "reply_to_user": {"reputation": 142796, "user_id": 42346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZikEw.jpg?s=128&g=1", "display_name": "mechanical_meat", "link": "https://stackoverflow.com/users/42346/mechanical-meat"}, "edited": false, "score": 1, "creation_date": 1467236056, "post_id": 38110324, "comment_id": 63654355, "body": "Millisecond resolution ;)"}], "tags": [], "owner": {"reputation": 2819, "user_id": 1451311, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/ee722dcd3d2b6473cb2d26584288fa62?s=128&d=identicon&r=PG&f=1", "display_name": "mgilbert", "link": "https://stackoverflow.com/users/1451311/mgilbert"}, "is_accepted": true, "score": 16, "last_activity_date": 1467235617, "creation_date": 1467235617, "answer_id": 38110324, "question_id": 38110263, "link": "https://stackoverflow.com/questions/38110263/in-pandas-how-to-convert-a-string-to-a-datetime-object-with-milliseconds/38110324#38110324", "title": "In Pandas, how to convert a string to a datetime object with milliseconds?", "body": "<p>Something like this should work</p>\n\n<pre><code>pd.to_datetime('2016-06-10 18:57:35:317', format=\"%Y-%m-%d %H:%M:%S:%f\")\n</code></pre>\n\n<p>You can look up datetime formats <a href=\"https://docs.python.org/2/library/datetime.html#strftime-and-strptime-behavior\" rel=\"noreferrer\">here</a></p>\n"}], "owner": {"reputation": 127, "user_id": 6496682, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/16ee69e37299f6c769265ff0a7fe1e04?s=128&d=identicon&r=PG&f=1", "display_name": "bananana", "link": "https://stackoverflow.com/users/6496682/bananana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 13936, "favorite_count": 1, "accepted_answer_id": 38110324, "answer_count": 2, "score": 5, "last_activity_date": 1588170266, "creation_date": 1467235313, "last_edit_date": 1467235464, "question_id": 38110263, "link": "https://stackoverflow.com/questions/38110263/in-pandas-how-to-convert-a-string-to-a-datetime-object-with-milliseconds", "title": "In Pandas, how to convert a string to a datetime object with milliseconds?", "body": "<p>I have a column of event's timestamp in my dataframe, looks like \"2016-06-10 18:58:25:675\", the last 3 digits are milliseconds, is there a efficient way to transform this column to a Pandas datatime type?</p>\n\n<p>When I try: </p>\n\n<pre><code>pd.to_datetime('2016-06-10 18:57:35:317')\n</code></pre>\n\n<p>An error occurs saying \"Unknown string format\".</p>\n"}, {"tags": ["python", "selenium", "xpath", "web-scraping"], "answers": [{"comments": [{"owner": {"reputation": 121, "user_id": 6500653, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/6eac72780cd30a64094d4f68c2817d86?s=128&d=identicon&r=PG&f=1", "display_name": "Lord", "link": "https://stackoverflow.com/users/6500653/lord"}, "edited": false, "score": 1, "creation_date": 1467240200, "post_id": 38110157, "comment_id": 63655998, "body": "Thanks!!!! you are a great!!! I didn&#39;t know I could use contains... With that it works really well :D... thanks again!"}], "tags": [], "owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "is_accepted": true, "score": 1, "last_activity_date": 1467236181, "last_edit_date": 1467236181, "creation_date": 1467234836, "answer_id": 38110157, "question_id": 38110108, "link": "https://stackoverflow.com/questions/38110108/scraping-webpage-with-selenium-python/38110157#38110157", "title": "Scraping webpage with selenium (python)", "body": "<p>Use contains to catch just the name presuming the numbers all all that change, for a single element you should also use <code>find_element</code> as opposed to <code>find_elements</code> :</p>\n\n<pre><code>find_element_by_xpath(\"//*[contains(@id,'ip_selection') and contains(@id,'name')]\") \n</code></pre>\n\n<p>You could also use starts-with and ends-with depending on the browser:</p>\n\n<pre><code>find_element_by_xpath(\"//*[starts-with(@id,'ip_selection') and ends-with(@id,'name')]\") \n</code></pre>\n"}], "owner": {"reputation": 121, "user_id": 6500653, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/6eac72780cd30a64094d4f68c2817d86?s=128&d=identicon&r=PG&f=1", "display_name": "Lord", "link": "https://stackoverflow.com/users/6500653/lord"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 38110157, "answer_count": 1, "score": 1, "last_activity_date": 1467236181, "creation_date": 1467234664, "last_edit_date": 1467235698, "question_id": 38110108, "link": "https://stackoverflow.com/questions/38110108/scraping-webpage-with-selenium-python", "title": "Scraping webpage with selenium (python)", "body": "<p>Hi I would like to scrap what is selected in the following image:</p>\n\n<p><a href=\"http://i.stack.imgur.com/uazuz.jpg\" rel=\"nofollow\">Image Code</a></p>\n\n<p>I know i could use the following code to get the text:</p>\n\n<pre><code>cell = driver.find_elements_by_xpath(\".//*[@id='ip_selection1233880116name']\") \nprint cell.text\n</code></pre>\n\n<p>But my problem is that <em>ip_selection1233880116name</em> should be dynamic, given that it changes every time as you can see from the image.</p>\n\n<p>How could I do it?</p>\n\n<p>Thanks a lot for your help!!!!</p>\n"}, {"tags": ["python", "tensorflow"], "comments": [{"owner": {"reputation": 3071, "user_id": 6392807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d22f8ef1f71b37fe6522255d8b3dcc8?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Hawkins", "link": "https://stackoverflow.com/users/6392807/peter-hawkins"}, "edited": false, "score": 0, "creation_date": 1467243611, "post_id": 38110096, "comment_id": 63657117, "body": "It looks like you&#39;re using a very large batch size (10000). Something more like 500 is probably appropriate. A 10000 * 28 * 28 * 32 tensor will take ~1Gb of RAM."}], "owner": {"reputation": 11, "user_id": 6530500, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6acb7784803d7d6a8049741c5417b04a?s=128&d=identicon&r=PG&f=1", "display_name": "Aero Intern", "link": "https://stackoverflow.com/users/6530500/aero-intern"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1048, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1467234622, "creation_date": 1467234622, "question_id": 38110096, "link": "https://stackoverflow.com/questions/38110096/tensorflow-out-of-memory-when-saving", "title": "Tensorflow Out of Memory when saving?", "body": "<p>Hi I'm running the Linux CPU version of tensorflow on Ubuntu 14.04 and I'm running out of memory when I try to save my model. I'm using the tutorial for Deep MNIST that builds a convolution network. You can find it here: </p>\n\n<p><a href=\"https://www.tensorflow.org/versions/r0.9/tutorials/mnist/pros/index.html#deep-mnist-for-experts\" rel=\"nofollow\">https://www.tensorflow.org/versions/r0.9/tutorials/mnist/pros/index.html#deep-mnist-for-experts</a></p>\n\n<p>I changed a couple of things and tried to add a Saver to export the model weights. However when I run it I get an error that says I am out of memory. Which doesn't make sense to me because it can train the data forever but saving it somehow uses too much memory?</p>\n\n<pre><code>Extracting MNIST_data/train-images-idx3-ubyte.gz\nExtracting MNIST_data/train-labels-idx1-ubyte.gz\nExtracting MNIST_data/t10k-images-idx3-ubyte.gz\nExtracting MNIST_data/t10k-labels-idx1-ubyte.gz\nstep 0, training accuracy 0.06\nW tensorflow/core/framework/op_kernel.cc:909] Resource exhausted: OOM when allocating tensor with shape[10000,28,28,32]\nTraceback (most recent call last):\nFile \"/home/mgump/Lambda_Project/MNIST_TRAINER.py\", line 66, in &lt;module&gt;\nx: mnist.test.images, y_: mnist.test.labels, keep_prob: 1.0}))\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\", line 555, in eval\nreturn _eval_using_default_session(self, feed_dict, self.graph, session)\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\", line 3498, in  _eval_using_default_session\nreturn session.run(tensors, feed_dict)\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/client/session.py\", line 372, in run\nrun_metadata_ptr)\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/client/session.py\", line 636, in _run\nfeed_dict_string, options, run_metadata)\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/client/session.py\", line 708, in _do_run\ntarget_list, options, run_metadata)\nFile \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/client/session.py\", line 728, in _do_call\nraise type(e)(node_def, op, message)\ntensorflow.python.framework.errors.ResourceExhaustedError: OOM when allocating tensor with shape[10000,28,28,32]    \n[[Node: Conv2D = Conv2D[T=DT_FLOAT, data_format=\"NHWC\", padding=\"SAME\",  strides=[1, 1, 1, 1], use_cudnn_on_gpu=true,   _device=\"/job:localhost/replica:0/task:0/cpu:0\"](Reshape, Variable/read)]]\nCaused by op u'Conv2D', defined at:\nFile \"/home/mgump/Lambda_Project/MNIST_TRAINER.py\", line 28, in &lt;module&gt;\nh_conv1 = tf.nn.relu(conv2d(x_image, W_conv1) + b_conv1)\nFile \"/home/mgump/Lambda_Project/MNIST_TRAINER.py\", line 18, in conv2d\nreturn tf.nn.conv2d(x, W, strides=[1, 1, 1, 1], padding='SAME')\nFile \"/usr/local/lib/python2.7/dist- packages/tensorflow/python/ops/gen_nn_ops.py\", line 394, in conv2d\ndata_format=data_format, name=name)\nFile \"/usr/local/lib/python2.7/dist-  packages/tensorflow/python/ops/op_def_library.py\", line 704, in apply_op\nop_def=op_def)\nFile \"/usr/local/lib/python2.7/dist-   packages/tensorflow/python/framework/ops.py\", line 2260, in create_op\noriginal_op=self._default_original_op, op_def=op_def)\nFile \"/usr/local/lib/python2.7/dist- packages/tensorflow/python/framework/ops.py\", line 1230, in __init__\nself._traceback = _extract_stack()`\n</code></pre>\n\n<p>This is what it outputs when I run it thanks so much!</p>\n"}, {"tags": ["python", "memory", "scipy", "interpolation"], "comments": [{"owner": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "edited": false, "score": 2, "creation_date": 1467235366, "post_id": 38110094, "comment_id": 63654058, "body": "Without having experiece, this looks like normal behaviour to me due to the increased complexity of the task if it&#39;s not linear. I would reduce the data, compare memory usage of linear vs. cubic; increase the data a bit, compare again. From this you might get some idea of the internal algorithmic complexity (or more important: memory-complexity). Maybe subsampling is also a valid approach for your final interpolation (if you can&#39;t handle all the data, just use a subset). Sadly there seems to be not much information about the internals in the docs :-/."}, {"owner": {"reputation": 825, "user_id": 2053080, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9af4f15a5540a4ba6cabee166dc139af?s=128&d=identicon&r=PG", "display_name": "Isaac", "link": "https://stackoverflow.com/users/2053080/isaac"}, "reply_to_user": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "edited": false, "score": 0, "creation_date": 1467235950, "post_id": 38110094, "comment_id": 63654305, "body": "@sascha: Thank you for the suggestion, for sure I will try shorter data comparing cubic/quadratic and linear."}, {"owner": {"reputation": 825, "user_id": 2053080, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9af4f15a5540a4ba6cabee166dc139af?s=128&d=identicon&r=PG", "display_name": "Isaac", "link": "https://stackoverflow.com/users/2053080/isaac"}, "reply_to_user": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "edited": false, "score": 0, "creation_date": 1467238830, "post_id": 38110094, "comment_id": 63655528, "body": "@sascha: However, I need to use this whole data, not reduced one. So, I am looking for the way to use the whole array of numbers using cubic and quadratic interpolation."}], "answers": [{"tags": [], "owner": {"reputation": 21050, "user_id": 143765, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/bd4477dc26bf9941268fbfa05abdeae6?s=128&d=identicon&r=PG", "display_name": "ev-br", "link": "https://stackoverflow.com/users/143765/ev-br"}, "is_accepted": true, "score": 2, "last_activity_date": 1501800110, "last_edit_date": 1501800110, "creation_date": 1467324091, "answer_id": 38133958, "question_id": 38110094, "link": "https://stackoverflow.com/questions/38110094/memory-error-issue-when-running-scipy-interpolation-interp1d/38133958#38133958", "title": "Memory error issue when running scipy interpolation (interp1d)", "body": "<p>Spline interpolation in interp1d uses full matrices. Better use splev/splrep combo, UnivariateSpline, or CubicSpline (to be available in the future scipy version).</p>\n\n<p><strong>EDIT</strong>: This answer is obsolete as of scipy 0.19.0 and above, where <code>interp1d</code> no longer uses full matrices. </p>\n"}], "owner": {"reputation": 825, "user_id": 2053080, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9af4f15a5540a4ba6cabee166dc139af?s=128&d=identicon&r=PG", "display_name": "Isaac", "link": "https://stackoverflow.com/users/2053080/isaac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 986, "favorite_count": 0, "accepted_answer_id": 38133958, "answer_count": 1, "score": 1, "last_activity_date": 1501800110, "creation_date": 1467234613, "question_id": 38110094, "link": "https://stackoverflow.com/questions/38110094/memory-error-issue-when-running-scipy-interpolation-interp1d", "title": "Memory error issue when running scipy interpolation (interp1d)", "body": "<p>I have tried to run scipy 1d-interpolation (interp1d) with various interpolation methods. Data is an array with 525600 numbers. When I ran it with simpler methods such as 'linear', 'nearest' or 'zero', it worked fine, but when I used 'cubic' or 'quadratic', it resulted 'memory error as below:</p>\n\n<pre><code>Traceback (most recent call last):\nFile \"inter_comp.py\", line 37, in &lt;module&gt;\ninterp = interp1d(indices[not_nan], B[not_nan], bounds_error=False,fill_value=0.,  kind = 'cubic')\nFile \"/lustre/work/apps/anaconda/lib/python2.7/site-   packages/scipy/interpolate/interpolate.py\", line 476, in __init__\nself._spline = splmake(self.x, self._y, order=order)\nFile \"/lustre/work/apps/anaconda/lib/python2.7/site-packages/scipy/interpolate/interpolate.py\", line 2356, in splmake\nB = _fitpack._bsplmat(order, xk)\nMemoryError\n</code></pre>\n\n<p>My code is as below:</p>\n\n<pre><code>filn1 = \"/lustre/work/hwon/PAPER2/Data/BAO_NEW/1year_New/BAO010_2013_WS_N.txt\"\n\nB = np.genfromtxt(filn1,delimiter=\"\",usecols=0,dtype=None)\nnot_nan = np.logical_not(np.isnan(B))\nindices = np.arange(len(B))\ninterp = interp1d(indices[not_nan], B[not_nan], bounds_error=False, fill_value=0.,  kind = 'cubic')\np1 = interp(indices)\n</code></pre>\n\n<p>I am not sure whether is the problem of the computing platform which I used or of the way to handle the data or of the coding.</p>\n\n<p>Would you please give me any idea to sort this problem out?</p>\n\n<p>Thank you,\nIsaac</p>\n"}, {"tags": ["python", "tensorflow", "lstm", "recurrent-neural-network"], "answers": [{"comments": [{"owner": {"reputation": 319, "user_id": 3610694, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/M4C2a.jpg?s=128&g=1", "display_name": "Sully Chen", "link": "https://stackoverflow.com/users/3610694/sully-chen"}, "edited": false, "score": 0, "creation_date": 1467238947, "post_id": 38110423, "comment_id": 63655572, "body": "I read through the page, but I&#39;m having trouble &quot;restoring&quot; the hidden state variable of the MultiCellRNN object because I don&#39;t really know what its name is. Am I approaching this incorrectly?"}, {"owner": {"reputation": 319, "user_id": 3610694, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/M4C2a.jpg?s=128&g=1", "display_name": "Sully Chen", "link": "https://stackoverflow.com/users/3610694/sully-chen"}, "edited": false, "score": 0, "creation_date": 1467241261, "post_id": 38110423, "comment_id": 63656389, "body": "Since this isn&#39;t a model I created from scratch -- it&#39;s comprised of BasicLSTMCell -- I&#39;m not sure how to access its variables"}], "tags": [], "owner": {"reputation": 216, "user_id": 6504341, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/9150d96d910bb2d671574762fe71b88a?s=128&d=identicon&r=PG&f=1", "display_name": "flobotics robotics", "link": "https://stackoverflow.com/users/6504341/flobotics-robotics"}, "is_accepted": false, "score": 0, "last_activity_date": 1467236080, "creation_date": 1467236080, "answer_id": 38110423, "question_id": 38110068, "link": "https://stackoverflow.com/questions/38110068/extract-hidden-layer-vector-from-rnn-tensoflow/38110423#38110423", "title": "Extract Hidden Layer Vector from RNN Tensoflow", "body": "<p>perhaps you have not seen this, <a href=\"https://www.tensorflow.org/versions/r0.9/how_tos/variables/index.html\" rel=\"nofollow\">https://www.tensorflow.org/versions/r0.9/how_tos/variables/index.html</a></p>\n"}], "owner": {"reputation": 319, "user_id": 3610694, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/M4C2a.jpg?s=128&g=1", "display_name": "Sully Chen", "link": "https://stackoverflow.com/users/3610694/sully-chen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 227, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1467236080, "creation_date": 1467234522, "question_id": 38110068, "link": "https://stackoverflow.com/questions/38110068/extract-hidden-layer-vector-from-rnn-tensoflow", "title": "Extract Hidden Layer Vector from RNN Tensoflow", "body": "<p>I'm very unfamiliar with TensorFlow, but I'm trying to get a project working.</p>\n\n<p>I've trained an LSTM using the following code: <a href=\"https://github.com/sherjilozair/char-rnn-tensorflow\" rel=\"nofollow\">https://github.com/sherjilozair/char-rnn-tensorflow</a></p>\n\n<p>This is great, and using sample.py I get great output data. However, I'm not very interested in generating output data. What I want to do is extract the hidden layer vector from the last step of the LSTM.</p>\n\n<p>Basically, I would like to return an array of the hidden values which would normally be passed to the next time step in the LSTM (128-dimensional vector for this particular model, which is specified in train.py) immediately after the following segment of model.py is run:</p>\n\n<pre><code>def sample(self, sess, chars, vocab, num=200, prime='The ', sampling_type=1):\n        state = self.cell.zero_state(1, tf.float32).eval()\n        for char in prime[:-1]:\n            x = np.zeros((1, 1))\n            x[0, 0] = vocab[char]\n            feed = {self.input_data: x, self.initial_state:state}\n            [state] = sess.run([self.final_state], feed)\n</code></pre>\n\n<p>I'm not sure how to do this in Tensorflow, any help would be great, thanks.</p>\n"}, {"tags": ["python", "arrays", "list", "numpy", "transpose"], "comments": [{"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1467234568, "post_id": 38110034, "comment_id": 63653689, "body": "Use <code>numpy.swapaxes</code>."}, {"owner": {"reputation": 173, "user_id": 4245098, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LaD6y.jpg?s=128&g=1", "display_name": "xman", "link": "https://stackoverflow.com/users/4245098/xman"}, "reply_to_user": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1467237109, "post_id": 38110034, "comment_id": 63654809, "body": "@MadPhysicist will try, but now I got another issue, seems one axes missing when I read the file from h5py"}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1467297640, "post_id": 38110034, "comment_id": 63683879, "body": "Print the shape of your arrays, the commands you are running, the actual, full errors you are getting. Your comments don&#39;t match what you are saying in the question."}], "answers": [{"comments": [{"owner": {"reputation": 173, "user_id": 4245098, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LaD6y.jpg?s=128&g=1", "display_name": "xman", "link": "https://stackoverflow.com/users/4245098/xman"}, "edited": false, "score": 0, "creation_date": 1467236857, "post_id": 38110208, "comment_id": 63654703, "body": "Use ndarray, I got the error: only length-1 arrays can be converted to Python scalars."}, {"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "reply_to_user": {"reputation": 173, "user_id": 4245098, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LaD6y.jpg?s=128&g=1", "display_name": "xman", "link": "https://stackoverflow.com/users/4245098/xman"}, "edited": false, "score": 0, "creation_date": 1467236956, "post_id": 38110208, "comment_id": 63654751, "body": "@xman Convert the list to an array with <code>np.asarray(input_list)</code> and then try <code>swapaxes</code> or <code>transpose</code>."}, {"owner": {"reputation": 173, "user_id": 4245098, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LaD6y.jpg?s=128&g=1", "display_name": "xman", "link": "https://stackoverflow.com/users/4245098/xman"}, "reply_to_user": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 0, "creation_date": 1467237829, "post_id": 38110208, "comment_id": 63655113, "body": "@Divakar I got another issue now, the h5py file I read from &quot;*.mat&quot; with 2 cells (each of them 3 dimension, 3*4*5 and 6*7*8) now only the 2nd and 3rd axes left after np.array(), and dimension seems to be like (2*4*5) and (2*7*8)."}, {"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "reply_to_user": {"reputation": 173, "user_id": 4245098, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LaD6y.jpg?s=128&g=1", "display_name": "xman", "link": "https://stackoverflow.com/users/4245098/xman"}, "edited": false, "score": 0, "creation_date": 1467237999, "post_id": 38110208, "comment_id": 63655189, "body": "@xman Ah my bad! I got your question wrongly it seems. So, I think you can process each cell separately. So, if the input list is named <code>input_list</code>, you can use <code>swapaxes</code> or <code>transpose</code> on <code>input_list[0]</code> and so on."}, {"owner": {"reputation": 173, "user_id": 4245098, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LaD6y.jpg?s=128&g=1", "display_name": "xman", "link": "https://stackoverflow.com/users/4245098/xman"}, "edited": false, "score": 0, "creation_date": 1467238050, "post_id": 38110208, "comment_id": 63655203, "body": "The way I read .mat is here: <a href=\"http://stackoverflow.com/questions/27670149/read-matlab-v7-3-file-into-python-list-of-numpy-arrays-via-h5py\">link</a>"}, {"owner": {"reputation": 173, "user_id": 4245098, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LaD6y.jpg?s=128&g=1", "display_name": "xman", "link": "https://stackoverflow.com/users/4245098/xman"}, "reply_to_user": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 0, "creation_date": 1467238174, "post_id": 38110208, "comment_id": 63655263, "body": "@Divakar I tried, not work for me.... my problem now is one of the axes missing..."}, {"owner": {"reputation": 173, "user_id": 4245098, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LaD6y.jpg?s=128&g=1", "display_name": "xman", "link": "https://stackoverflow.com/users/4245098/xman"}, "reply_to_user": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 0, "creation_date": 1467239001, "post_id": 38110208, "comment_id": 63655587, "body": "@Divakar Yes, that&#39;s what I was doing. After cell[0].transpose([2,1,0]), it shows that cell[0].shape is still (3, 4, 5), but I want it to be (5, 4, 3)..."}, {"owner": {"reputation": 173, "user_id": 4245098, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LaD6y.jpg?s=128&g=1", "display_name": "xman", "link": "https://stackoverflow.com/users/4245098/xman"}, "reply_to_user": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 0, "creation_date": 1467239399, "post_id": 38110208, "comment_id": 63655735, "body": "@Divakar Thank you, I&#39;m using pdb debugging, just want to get the array with correct dimension."}, {"owner": {"reputation": 173, "user_id": 4245098, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LaD6y.jpg?s=128&g=1", "display_name": "xman", "link": "https://stackoverflow.com/users/4245098/xman"}, "reply_to_user": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 0, "creation_date": 1467239748, "post_id": 38110208, "comment_id": 63655860, "body": "@Divakar Thank you so much!!! I forgot to save it back! Now it works! :)"}], "tags": [], "owner": {"reputation": 424, "user_id": 6441641, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/COvYa.jpg?s=128&g=1", "display_name": "jackiezhu", "link": "https://stackoverflow.com/users/6441641/jackiezhu"}, "is_accepted": false, "score": 2, "last_activity_date": 1467235058, "creation_date": 1467235058, "answer_id": 38110208, "question_id": 38110034, "link": "https://stackoverflow.com/questions/38110034/transpose-list-subset-dimension/38110208#38110208", "title": "Transpose list subset dimension?", "body": "<p>Try using the <code>numpy.ndarray.transpose()</code> function instead. Seems like that's closer to what you're looking for.</p>\n\n<p>Documentation:\n<a href=\"http://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.transpose.html\" rel=\"nofollow\">http://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.transpose.html</a></p>\n"}], "owner": {"reputation": 173, "user_id": 4245098, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LaD6y.jpg?s=128&g=1", "display_name": "xman", "link": "https://stackoverflow.com/users/4245098/xman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1467235478, "creation_date": 1467234395, "last_edit_date": 1467235478, "question_id": 38110034, "link": "https://stackoverflow.com/questions/38110034/transpose-list-subset-dimension", "title": "Transpose list subset dimension?", "body": "<p>I have a list with 2 cells, each of them is 3 dimension array, one is 3 by 4 by 5, the other is 6 by 7 by 8. Need to transpose the subset in the list to be like: 5 by 4 by 3, and 8 by 7 by 6, I used <code>array.transpose([2,1,0])</code>, got the error <code>axes don't match</code>.</p>\n"}, {"tags": ["python", "beaker-notebook"], "answers": [{"tags": [], "owner": {"reputation": 51, "user_id": 6490262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7aa0a662da8c761ae2474c189684a780?s=128&d=identicon&r=PG&f=1", "display_name": "melmac", "link": "https://stackoverflow.com/users/6490262/melmac"}, "is_accepted": true, "score": 1, "last_activity_date": 1467292761, "last_edit_date": 1495535568, "creation_date": 1467292761, "answer_id": 38124394, "question_id": 38109980, "link": "https://stackoverflow.com/questions/38109980/adding-non-standard-python-library-to-beaker-lab-notebook/38124394#38124394", "title": "Adding non standard Python library to Beaker Lab notebook", "body": "<p>To use python packages in a Python 2 Notebook you should first use the My Cloud Resources to create a directory \u2018p2packages\u2019 in your scratch space.</p>\n\n<p>Then you can append the path to your sys.path variable. This should be done in every notebook that requires your custom packages.</p>\n\n<pre><code>sys.path.append('/mnt/scratch/p2packages/')\n</code></pre>\n\n<p>Next step is to use the embedded pip to install the required package and its dependencies.</p>\n\n<p>Usually it is enough to specify a \u2013target option, but in other cases you might want to check <a href=\"https://stackoverflow.com/questions/12332975/installing-python-module-within-code\">Installing python module within code</a> for other options that might be required by other packages.</p>\n\n<pre><code>import pip\npip.main(['install', '--target=/mnt/scratch/p2packages/', 'pattern' ])\n</code></pre>\n\n<p>Now you can use this new package in your notebook</p>\n\n<p>Example in Beaker Lab: <a href=\"https://lab.beakernotebook.com/publications/2ff702e6-3ebf-11e6-b0e2-5f05deb51e12?fullscreen=true\" rel=\"nofollow noreferrer\">https://lab.beakernotebook.com/publications/2ff702e6-3ebf-11e6-b0e2-5f05deb51e12?fullscreen=true</a></p>\n\n<p>Here's an example for python 3</p>\n\n<p><a href=\"https://lab.beakernotebook.com/approval/view/3c73a144-3ec1-11e6-935b-8ff81ae480a3\" rel=\"nofollow noreferrer\">https://lab.beakernotebook.com/approval/view/3c73a144-3ec1-11e6-935b-8ff81ae480a3</a></p>\n"}], "owner": {"reputation": 23, "user_id": 6530444, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155099738387195/picture?type=large", "display_name": "Dasha Merkusheva", "link": "https://stackoverflow.com/users/6530444/dasha-merkusheva"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 171, "favorite_count": 1, "accepted_answer_id": 38124394, "answer_count": 1, "score": 2, "last_activity_date": 1479504286, "creation_date": 1467234174, "question_id": 38109980, "link": "https://stackoverflow.com/questions/38109980/adding-non-standard-python-library-to-beaker-lab-notebook", "title": "Adding non standard Python library to Beaker Lab notebook", "body": "<p>I would like to use fiona (and a few other third party libraries from Github) in my Beaker Lab notebook and it's not included in the default installation. </p>\n\n<p>Is there a way to install new Python packages?</p>\n"}, {"tags": ["python", "image", "label", "tensorflow"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 6530430, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26d5af3c0cc6411ac96078483cd0d34b?s=128&d=identicon&r=PG&f=1", "display_name": "Penny", "link": "https://stackoverflow.com/users/6530430/penny"}, "edited": false, "score": 0, "creation_date": 1467236104, "post_id": 38110251, "comment_id": 63654374, "body": "Thanks for your answer. As I understand, the reader.read op reads in both the image and label if they are stores in the same file? In my case, I only have jpg pictures and a file storing labels, the names of the images work as keys. How can I input them in this case (no worries about the image size, I guess I can resize them later)?"}, {"owner": {"reputation": 216, "user_id": 6504341, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/9150d96d910bb2d671574762fe71b88a?s=128&d=identicon&r=PG&f=1", "display_name": "flobotics robotics", "link": "https://stackoverflow.com/users/6504341/flobotics-robotics"}, "reply_to_user": {"reputation": 11, "user_id": 6530430, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26d5af3c0cc6411ac96078483cd0d34b?s=128&d=identicon&r=PG&f=1", "display_name": "Penny", "link": "https://stackoverflow.com/users/6530430/penny"}, "edited": false, "score": 0, "creation_date": 1467236256, "post_id": 38110251, "comment_id": 63654440, "body": "you could read the jpeg with <a href=\"https://www.tensorflow.org/versions/r0.9/api_docs/python/image.html\" rel=\"nofollow noreferrer\">tensorflow.org/versions/r0.9/api_docs/python/image.html</a>      Perhaps also interresting <a href=\"https://www.tensorflow.org/versions/r0.9/how_tos/reading_data/index.html#reading-from-files\" rel=\"nofollow noreferrer\">tensorflow.org/versions/r0.9/how_tos/reading_data/&hellip;</a>"}], "tags": [], "owner": {"reputation": 216, "user_id": 6504341, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/9150d96d910bb2d671574762fe71b88a?s=128&d=identicon&r=PG&f=1", "display_name": "flobotics robotics", "link": "https://stackoverflow.com/users/6504341/flobotics-robotics"}, "is_accepted": false, "score": 0, "last_activity_date": 1467235252, "creation_date": 1467235252, "answer_id": 38110251, "question_id": 38109979, "link": "https://stackoverflow.com/questions/38109979/how-to-read-images-and-labels-to-batches-in-tensorflow-from-separate-files-with/38110251#38110251", "title": "How to read images and labels to batches in tensorflow from separate files with shared keys?", "body": "<p>if you look at <a href=\"https://www.tensorflow.org/versions/r0.9/api_docs/python/io_ops.html#FixedLengthRecordReader\" rel=\"nofollow\">https://www.tensorflow.org/versions/r0.9/api_docs/python/io_ops.html#FixedLengthRecordReader</a>  it seemed that the reader.read op is reading the image and the label</p>\n\n<p>result.key, value = reader.read(filename_queue)</p>\n\n<p>If you want to read in images of various sizes, i dont know if that works without reshaping, with the same network?? but i am tensorflow newbii, so it could be  possible</p>\n"}, {"tags": [], "owner": {"reputation": 156, "user_id": 4316757, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/b3513b6f72983fb254fb9eebd139fef0?s=128&d=identicon&r=PG&f=1", "display_name": "Oli Callaghan", "link": "https://stackoverflow.com/users/4316757/oli-callaghan"}, "is_accepted": false, "score": 0, "last_activity_date": 1505759232, "creation_date": 1505759232, "answer_id": 46285922, "question_id": 38109979, "link": "https://stackoverflow.com/questions/38109979/how-to-read-images-and-labels-to-batches-in-tensorflow-from-separate-files-with/46285922#46285922", "title": "How to read images and labels to batches in tensorflow from separate files with shared keys?", "body": "<p>I know this question is quite old, however I'm sure this won't hurt. So, when you train the network on your test data, your test data should be the same dimensions. This is because otherwise, your weights which are trained in each layer won't converge to an optimum value (well, technically they would, but it would take a long time), and your network won't train properly.</p>\n\n<p>My suggestion to you would be to read in the test data, and then resize each image so that they are the same size. That way, your network will train a lot faster.</p>\n"}], "owner": {"reputation": 11, "user_id": 6530430, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26d5af3c0cc6411ac96078483cd0d34b?s=128&d=identicon&r=PG&f=1", "display_name": "Penny", "link": "https://stackoverflow.com/users/6530430/penny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1383, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1505759232, "creation_date": 1467234173, "question_id": 38109979, "link": "https://stackoverflow.com/questions/38109979/how-to-read-images-and-labels-to-batches-in-tensorflow-from-separate-files-with", "title": "How to read images and labels to batches in tensorflow from separate files with shared keys?", "body": "<p>I am trying to use the convolutional network code on cifar-10 from the tensorflow tutorial with my own images (various sizes). Now the images and labels are stored separately with image names as keys. I was wondering how to modify the following function in cifar10_input.py. Thanks.</p>\n\n<pre><code>def read_cifar10(filename_queue):\n\n  class CIFAR10Record(object):\n    pass\n  result = CIFAR10Record()\n\n  label_bytes = 1  # 2 for CIFAR-100\n  result.height = 32\n  result.width = 32\n  result.depth = 3\n  image_bytes = result.height * result.width * result.depth\n\n  record_bytes = label_bytes + image_bytes\n\n  reader = tf.FixedLengthRecordReader(record_bytes=record_bytes)\n  result.key, value = reader.read(filename_queue)\n\n  record_bytes = tf.decode_raw(value, tf.uint8)\n\n  result.label = tf.cast(\n      tf.slice(record_bytes, [0], [label_bytes]), tf.int32)\n\n  depth_major = tf.reshape(tf.slice(record_bytes, [label_bytes], [image_bytes]),\n                           [result.depth, result.height, result.width])\n  result.uint8image = tf.transpose(depth_major, [1, 2, 0])\n\n  return result\n</code></pre>\n"}, {"tags": ["python", "matplotlib"], "answers": [{"tags": [], "owner": {"reputation": 60033, "user_id": 102302, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/edd9c8a33bbb45d398ad8777e619c7a3?s=128&d=identicon&r=PG", "display_name": "tom10", "link": "https://stackoverflow.com/users/102302/tom10"}, "is_accepted": true, "score": 1, "last_activity_date": 1467252328, "creation_date": 1467252328, "answer_id": 38112824, "question_id": 38109960, "link": "https://stackoverflow.com/questions/38109960/how-to-close-the-ends-of-a-cylinder-in-matplotlib/38112824#38112824", "title": "How to close the ends of a cylinder in matplotlib", "body": "<p>A quick and easy way that's similar to your other code is to generate a surface using strips from <code>r=0</code> to <code>r=R</code>.  Right before <code>plt.show()</code> add the following lines:</p>\n\n<pre><code>R = np.array([0,R])\n# cap at t=0\nX, Y, Z = [p0[i] + np.outer(R, np.sin(theta)) * n1[i] + np.outer(R, np.cos(theta))*n2[i] for i in [0, 1, 2]]\nax.plot_surface(X, Y, Z, edgecolors = \"r\", alpha=.4, linewidth = .1)\n# cap at t=mag\nX, Y, Z = [p0[i] + v[i]*mag + np.outer(R, np.sin(theta)) * n1[i] + np.outer(R, np.cos(theta))*n2[i] for i in [0, 1, 2]]\nax.plot_surface(X, Y, Z, edgecolors = \"r\", alpha=.4, linewidth = .1)\n</code></pre>\n\n<p>Here the colors are more for illustrative purposes, mostly so you can see the strips.  The result looks like:\n<a href=\"https://i.stack.imgur.com/CYQ85.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CYQ85.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 1486, "user_id": 1083653, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/f1a46ccd675232199b375da6552cf328?s=128&d=identicon&r=PG", "display_name": "fosho", "link": "https://stackoverflow.com/users/1083653/fosho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 252, "favorite_count": 2, "accepted_answer_id": 38112824, "answer_count": 1, "score": 1, "last_activity_date": 1467252328, "creation_date": 1467234081, "last_edit_date": 1467237658, "question_id": 38109960, "link": "https://stackoverflow.com/questions/38109960/how-to-close-the-ends-of-a-cylinder-in-matplotlib", "title": "How to close the ends of a cylinder in matplotlib", "body": "<p>I am trying to make a 'closed' cylinder in matplotlib but I am not sure how to go about doing this. So far I have a cylinder with the ends open, the code for this is as follows:</p>\n\n<pre><code>#make a cylinder without the ends closed\nimport numpy as np\nfrom matplotlib import cm\nfrom matplotlib import pyplot as plt\nfrom mpl_toolkits.mplot3d import Axes3D\nfrom scipy.linalg import norm\nfrom mpl_toolkits.mplot3d.art3d import Poly3DCollection\nimport numpy as np\nimport math\n\n\n\n\nfig = plt.figure()\nax = fig.add_subplot(111, projection='3d')\n\n\n\norigin = [0,0,0]\n#radius = R\np0 = np.array(origin)\np1 = np.array([8, 8, 8])\norigin = np.array(origin)\nR = 4\n\n#vector in direction of axis\nv = p1 - p0\n#find magnitude of vector\nmag = norm(v)\n#unit vector in direction of axis\nv = v / mag\n#make some vector not in the same direction as v\nnot_v = np.array([1, 0, 0])\nif (v == not_v).all():\n    not_v = np.array([0, 1, 0])\n#make vector perpendicular to v\nn1 = np.cross(v, not_v)\n#normalize n1\nn1 /= norm(n1)\n#make unit vector perpendicular to v and n1\nn2 = np.cross(v, n1)\n#surface ranges over t from 0 to length of axis and 0 to 2*pi\nt = np.linspace(0, mag, 600)\ntheta = np.linspace(0, 2 * np.pi, 100)\n#use meshgrid to make 2d arrays\nt, theta = np.meshgrid(t, theta)\n#generate coordinates for surface\nX, Y, Z = [p0[i] + v[i] * t + R * np.sin(theta) * n1[i] + R * np.cos(theta) *    n2[i] for i in [0, 1, 2]]\n\n\n#make the color for the faces\ncol1 = plt.cm.autumn(np.ones(600)) # linear gradient along the t-axis\ncol1 = np.repeat(col1[np.newaxis,:, :], 100, axis=0) # expand over the theta-axis\n\n\n\nax.plot_surface(X, Y,Z, facecolors = col1, shade = True,edgecolors = \"None\",    alpha = 0.4, linewidth = 0)\n\nplt.show()\n</code></pre>\n\n<p>Running this code produces the following image<a href=\"https://i.stack.imgur.com/OyiPF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/OyiPF.png\" alt=\"enter image description here\"></a></p>\n\n<p>How would I close the ends of the cylinder with a solid circle (i.e. disk)?</p>\n"}, {"tags": ["python", "time"], "comments": [{"owner": {"reputation": 165, "user_id": 6495780, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abbc49c52c3255613e1c47f89190a76a?s=128&d=identicon&r=PG&f=1", "display_name": "mrwyatt", "link": "https://stackoverflow.com/users/6495780/mrwyatt"}, "edited": false, "score": 0, "creation_date": 1467235002, "post_id": 38109943, "comment_id": 63653895, "body": "You will need to store the values somehow.  A simple text document would suffice, but you could also keep track of daily earnings in a larger array.  If you use numpy, then saving and loading is easy with <code>np.save()</code> and <code>np.load()</code>."}], "answers": [{"tags": [], "owner": {"reputation": 680, "user_id": 264745, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/7e566b7a44295043db6019db7b5014ef?s=128&d=identicon&r=PG", "display_name": "dcc310", "link": "https://stackoverflow.com/users/264745/dcc310"}, "is_accepted": true, "score": 1, "last_activity_date": 1467236346, "creation_date": 1467236346, "answer_id": 38110485, "question_id": 38109943, "link": "https://stackoverflow.com/questions/38109943/how-to-store-data-with-time-module-in-python/38110485#38110485", "title": "How to store data with Time Module in python", "body": "<p>As plamut said, you need some storage.  Here is a program to get you started that will give interaction like so:</p>\n\n<pre>\nEnter 'print' or some hours, format like 12.34, 0.56,etc\n1.00\nEnter 'print' or some hours, format like 12.34, 0.56,etc\n2.01\nEnter 'print' or some hours, format like 12.34, 0.56,etc\nprint\nYou have earned 24.08 today and 24.08 this month\nEnter 'print' or some hours, format like 12.34, 0.56,etc\n</pre>\n\n<p>If you know how to read and write to files, and print the current date, take substrings, and split strings, you should be able to read through this.</p>\n\n<pre><code>import datetime\n\nfile_name = \"work_log.txt\"\nhourly_wage = 8.00\n\ndef get_year_month_day_string():\n    return datetime.datetime.now().strftime(\"%Y-%m-%d\")\n\ndef add_to_log(num_hours):\n    earnings = num_hours * hourly_wage\n    # open in append mode\n    with open(file_name, \"a\") as f_out:\n        f_out.write(\"%s,%s\\n\" % (get_year_month_day_string(), earnings))\n\ndef read_earnings():\n    year_month_day_prefix = get_year_month_day_string()\n    year_month_prefix = year_month_day_prefix[0:7]\n    # open in read mode\n    with open(file_name, \"r\") as f_in:\n        day_sum = 0\n        month_sum = 0\n        lines = f_in.readlines()\n        for line in lines:\n            date = line.split(\",\")[0]\n            amount = float(line.split(\",\")[1])\n            if date.startswith(year_month_day_prefix):\n                day_sum += amount\n            if date.startswith(year_month_prefix):\n                month_sum += amount\n        print \"You have earned %s today and %s this month\" % (day_sum, month_sum)\n\nif __name__ == \"__main__\":\n    while True:\n        user_input = raw_input(\"Enter 'print' or some hours, format like 12.34, 0.56,etc\\n\")\n        if user_input == \"print\":\n            read_earnings()\n            next\n        else:\n            entered_hours = float(user_input)\n            add_to_log(entered_hours)\n</code></pre>\n\n<p>You could of course edit the file if you ever made a mistake or a duplicate entry.  The file work_log.txt just looks like:</p>\n\n<pre>\n2016-06-29,8.0\n2016-06-29,16.08\n</pre>\n"}], "owner": {"reputation": 150, "user_id": 4909671, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fe4c00e1ecd4ecdba83b7b47205b3c8a?s=128&d=identicon&r=PG&f=1", "display_name": "Leonardo", "link": "https://stackoverflow.com/users/4909671/leonardo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 38110485, "answer_count": 1, "score": 0, "last_activity_date": 1467236346, "creation_date": 1467233993, "last_edit_date": 1467234241, "question_id": 38109943, "link": "https://stackoverflow.com/questions/38109943/how-to-store-data-with-time-module-in-python", "title": "How to store data with Time Module in python", "body": "<p>I want to write a very simple program which calculates how much you earned with work during the month (it's just for practicing). Idea is next: every time you run the program it prints out today's date and asks user to enter the amount of hour he worked. Then it calculates today's and whole month earnings and prints it out. My problem is that I don't know how to \"manipulate\" time module. </p>\n\n<p>write now I wrote this: (which has today's and monthly earnings the same)</p>\n\n<pre><code>import time\n\nToday = time.strftime('%d/%m/%Y')\n\niph = 8.51 # Income Per Hour\nprint 'Today Is: ' , Today # Print Current Date\nTodayHours = input('How many hours did you work today? ')\nMonthlyEarning = TodayHours * iph # Amount of Money Earned During the Whole Month\nDayE = TodayHours * iph # Today's Earning\nprint 'Today You Earned: ' , DayE , 'Euros'\nprint 'Total Monthly Earnings: ' , MonthlyEarning , 'Euros'\n</code></pre>\n\n<p>What I want to do is that, if I run it today and write that I worked 5 hours it stores it as today's date and when I run it again tomorrow and type another 5 hours it will print today's earning as <code>5*8.51</code> and as Monthly earning <code>(5+5) * 8.51</code></p>\n\n<p>How can I do that? </p>\n"}, {"tags": ["python", "django", "django-rest-framework", "manytomanyfield"], "comments": [{"owner": {"reputation": 1457, "user_id": 3449518, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/KZNAP.png?s=128&g=1", "display_name": "Amrullah Zunzunia", "link": "https://stackoverflow.com/users/3449518/amrullah-zunzunia"}, "edited": false, "score": 0, "creation_date": 1467281428, "post_id": 38109935, "comment_id": 63672110, "body": "why have you set <code>symmetrical=False</code> in <code>friends</code> M2M Field?  If U1 is friend of U5, then won&#39;t U5  be friend of U1?"}, {"owner": {"reputation": 3763, "user_id": 1362215, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/c9237a0432d6a65ac82edd0085a5d100?s=128&d=identicon&r=PG", "display_name": "Max Candocia", "link": "https://stackoverflow.com/users/1362215/max-candocia"}, "reply_to_user": {"reputation": 1457, "user_id": 3449518, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/KZNAP.png?s=128&g=1", "display_name": "Amrullah Zunzunia", "link": "https://stackoverflow.com/users/3449518/amrullah-zunzunia"}, "edited": false, "score": 0, "creation_date": 1467284281, "post_id": 38109935, "comment_id": 63674005, "body": "Django wouldn&#39;t let me define a symmetric relationship with a <code>through</code> argument/relationship for the models."}], "answers": [{"tags": [], "owner": {"reputation": 3763, "user_id": 1362215, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/c9237a0432d6a65ac82edd0085a5d100?s=128&d=identicon&r=PG", "display_name": "Max Candocia", "link": "https://stackoverflow.com/users/1362215/max-candocia"}, "is_accepted": false, "score": 0, "last_activity_date": 1467324365, "creation_date": 1467324365, "answer_id": 38134007, "question_id": 38109935, "link": "https://stackoverflow.com/questions/38109935/how-can-i-get-an-asymmetric-many-to-many-self-relationship-to-show-up-for-both-p/38134007#38134007", "title": "How can I get an asymmetric many-to-many self-relationship to show up for both parties in a Django restful response?", "body": "<p>My current solution is to define a method in the <code>UserProfile</code> class and use queries to get the set of objects I want. I still want to know if there are other ways to do this, though.</p>\n\n<pre><code>...\nfrom itertools import chain\nfrom django.db.models import Q\n\nclass UserProfile(models.Model):\n    ...\n    def get_friends_both(self):\n        invitees_list = FriendInvite.objects.filter(Q(sender=self)).values('invitee')\n\n        sender_list = FriendInvite.objects.filter(Q(invitee=self)).values('sender')\n        return chain(sender_list,  invitees_list)\n\nclass UserProfileSerializer(serializers.ModelSerializer):\n    friend_list = serializers.ReadOnlyField(source='get_friends_both')\n    class Meta:\n        model = UserProfile\n        fields = ('friend_list','username','id')\n        depth = 1\n</code></pre>\n"}], "owner": {"reputation": 3763, "user_id": 1362215, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/c9237a0432d6a65ac82edd0085a5d100?s=128&d=identicon&r=PG", "display_name": "Max Candocia", "link": "https://stackoverflow.com/users/1362215/max-candocia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 270, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1467324365, "creation_date": 1467233972, "question_id": 38109935, "link": "https://stackoverflow.com/questions/38109935/how-can-i-get-an-asymmetric-many-to-many-self-relationship-to-show-up-for-both-p", "title": "How can I get an asymmetric many-to-many self-relationship to show up for both parties in a Django restful response?", "body": "<p>I currently have 2 relevant classes in my model: A <code>UserProfile</code> class and a <code>FriendInvite</code> class in <code>models.py</code></p>\n\n<pre><code>class UserProfile(models.Model):\n    user = models.OneToOneField(User)\n    username = models.TextField()\n    friends = models.ManyToManyField('self',through='FriendInvite',\n     symmetrical=False)\n\nclass FriendInvite(models.Model):\n    sender = models.ForeignKey(UserProfile,related_name='fi_sender')\n    invitee = models.ForeignKey(UserProfile,related_name='fi_invitee')\n    status = models.IntegerField(default=0)\n    def __str__(self):\n        return '%s invites %s' % (self.sender.username,self.invitee.username)\n</code></pre>\n\n<p>In <code>serializers.py</code>:</p>\n\n<pre><code>from rest_framework import serializers\nfrom myapp.models import UserProfile\n\nclass UserProfileSerializer(serializers.ModelSerializer):\n    class Meta:\n        model = UserProfile\n</code></pre>\n\n<p>And in <code>views.py</code>:</p>\n\n<pre><code>from rest_framework import generics\nfrom myapp.models import UserProfile\nfrom myapp.serializers import UserProfileSerializer\n\nclass UserProfileList(generics.ListAPIView):\n    queryset = UserProfile.objects.all()\n    serializer_class = UserProfileSerializer\n</code></pre>\n\n<p>I generated 5 different users and 3 different friend relationships. However, when I received the JSON response from the server, it only included the users who sent the invites, not the ones who received them:</p>\n\n<pre><code>[{\"id\":1,\"username\":\"U1\",\"user\":1,\"friends\":[5]},\n{\"id\":2,\"username\":\"U2\",\"user\":2,\"friends\":[]},\n{\"id\":3,\"username\":\"U3\",\"user\":3,\"friends\":[4]},\n{\"id\":4,\"username\":\"U4\",\"user\":4,\"friends\":[]},\n{\"id\":5,\"username\":\"U5\",\"user\":5,\"friends\":[2]}]\n</code></pre>\n\n<p>In this case, U1 sent an invite to U5, U3 to U4, and U5 to U2.  How can I get results for both sent and received invites for users?</p>\n"}, {"tags": ["python", "numpy", "pandas", "dataframe"], "comments": [{"owner": {"reputation": 169523, "user_id": 4983450, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/NR2ko.jpg?s=128&g=1", "display_name": "Psidom", "link": "https://stackoverflow.com/users/4983450/psidom"}, "edited": false, "score": 1, "creation_date": 1467234173, "post_id": 38109894, "comment_id": 63653511, "body": "How about assigning the column you calculated back to the data frame as <code>df2[&#39;food_eaten&#39;] = df2.groupby([&#39;animal&#39;,&#39;meal&#39;]).transform(lambda x: x[0] - x)</code>?"}, {"owner": {"reputation": 1580, "user_id": 4091874, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c9bd11233d3028c8367d23ae499768d7?s=128&d=identicon&r=PG&f=1", "display_name": "caseygrun", "link": "https://stackoverflow.com/users/4091874/caseygrun"}, "reply_to_user": {"reputation": 169523, "user_id": 4983450, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/NR2ko.jpg?s=128&g=1", "display_name": "Psidom", "link": "https://stackoverflow.com/users/4983450/psidom"}, "edited": false, "score": 0, "creation_date": 1467291526, "post_id": 38109894, "comment_id": 63678989, "body": "Hm, that seems like a good solution; is <code>transform</code> guaranteed to give back elements in the same order as input (I see it&#39;s guaranteed to be in the same shape)? If you post this as an answer, I&#39;ll accept it."}, {"owner": {"reputation": 169523, "user_id": 4983450, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/NR2ko.jpg?s=128&g=1", "display_name": "Psidom", "link": "https://stackoverflow.com/users/4983450/psidom"}, "edited": false, "score": 1, "creation_date": 1467293386, "post_id": 38109894, "comment_id": 63680328, "body": "I believe so. According to the documentation, <code>The transform method returns an object that is indexed the same (same size) as the one being grouped.</code>"}], "answers": [{"comments": [{"owner": {"reputation": 1580, "user_id": 4091874, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c9bd11233d3028c8367d23ae499768d7?s=128&d=identicon&r=PG&f=1", "display_name": "caseygrun", "link": "https://stackoverflow.com/users/4091874/caseygrun"}, "edited": false, "score": 0, "creation_date": 1467291149, "post_id": 38110180, "comment_id": 63678712, "body": "If you look at the example, this doesn&#39;t actually produce the correct output which was to subtract the zero time point (rather than take the finite difference between each two elements). This can be made correct by using <code>cumsum</code> (like taking the derivative then integrating) but that requires a second <code>groupby</code>; interesting solution, but doesn&#39;t really generalize to other operations."}], "tags": [], "owner": {"reputation": 844, "user_id": 5910812, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NSqqn.jpg?s=128&g=1", "display_name": "Silenced Temporarily", "link": "https://stackoverflow.com/users/5910812/silenced-temporarily"}, "is_accepted": false, "score": 0, "last_activity_date": 1467234937, "creation_date": 1467234937, "answer_id": 38110180, "question_id": 38109894, "link": "https://stackoverflow.com/questions/38109894/how-to-do-arithmetic-on-tidy-data-in-pandas/38110180#38110180", "title": "How to do arithmetic on tidy data in pandas?", "body": "<p>You want to use <code>groupby</code> and <code>diff</code>:</p>\n\n<pre><code>df['food_eaten'] = -df.groupby(['animal', 'meal'])['food_left'].diff()\n</code></pre>\n\n<p>Follow that with fillna() if you want zeroes rather than NaN for situations where nothing was eaten. While this doesn't directly generalize you now have the amount of food of each type eaten by each animal in each time interval, so you can do the additional computations on this new field.</p>\n"}, {"tags": [], "owner": {"reputation": 169523, "user_id": 4983450, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/NR2ko.jpg?s=128&g=1", "display_name": "Psidom", "link": "https://stackoverflow.com/users/4983450/psidom"}, "is_accepted": true, "score": 1, "last_activity_date": 1467293856, "creation_date": 1467293856, "answer_id": 38124788, "question_id": 38109894, "link": "https://stackoverflow.com/questions/38109894/how-to-do-arithmetic-on-tidy-data-in-pandas/38124788#38124788", "title": "How to do arithmetic on tidy data in pandas?", "body": "<p>You can create a new column based on the transformed data, as a one-liner, it would be:</p>\n\n<pre><code>df['food_eaten'] = df.set_index(['time']).groupby(['animal', 'meal']).\n                      transform(lambda x: x[0] - x).values\n</code></pre>\n\n<p>df</p>\n\n<pre><code>    animal  meal    time    food_left   food_eaten\n0   lion    meat       0          10             0\n1   lion    meat       1          5              5\n2   lion    meat       2          2              8\n3   tiger   meat       0          5              0\n4   tiger   meat       1          3              2\n5   tiger   meat       2          2              3\n6   lion    vegetable  0          5              0\n7   lion    vegetable  1          5              0\n8   lion    vegetable  2          5              0\n9   tiger   vegetable  0          5              0\n10  tiger   vegetable  1          5              0\n11  tiger   vegetable  2          5              0\n</code></pre>\n"}], "owner": {"reputation": 1580, "user_id": 4091874, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c9bd11233d3028c8367d23ae499768d7?s=128&d=identicon&r=PG&f=1", "display_name": "caseygrun", "link": "https://stackoverflow.com/users/4091874/caseygrun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 176, "favorite_count": 0, "accepted_answer_id": 38124788, "answer_count": 2, "score": 0, "last_activity_date": 1467293856, "creation_date": 1467233833, "question_id": 38109894, "link": "https://stackoverflow.com/questions/38109894/how-to-do-arithmetic-on-tidy-data-in-pandas", "title": "How to do arithmetic on tidy data in pandas?", "body": "<p>I have a <code>DataFrame</code> in \"<a href=\"http://vita.had.co.nz/papers/tidy-data.pdf\" rel=\"nofollow\">tidy</a>\" format (columns are variables, rows are observations) containing time series data for several different conditions. I'd like to normalize the data to the zero-hour time point for each condition.</p>\n\n<p>For example, lets say I fed two different <code>animal</code>s two different kinds of <code>meal</code>, then every hour I recorded how much food was left: </p>\n\n<pre><code>In [4]: df\nOut[4]: \n   animal       meal  time  food_left\n0    lion       meat     0         10\n1    lion       meat     1          5\n2    lion       meat     2          2\n3   tiger       meat     0          5\n4   tiger       meat     1          3\n5   tiger       meat     2          2\n6    lion  vegetable     0          5\n7    lion  vegetable     1          5\n8    lion  vegetable     2          5\n9   tiger  vegetable     0          5\n10  tiger  vegetable     1          5\n11  tiger  vegetable     2          5\n</code></pre>\n\n<p>For each <code>time</code> point, I want to calculate how much food a particular animal has eaten (<code>food_eaten</code>) by subtracting <code>food_left</code> at that time point from <code>food_left</code> at time point zero (for that animal and meal), then store the result in another column, e.g.: </p>\n\n<pre><code>   animal       meal  time  food_left  food_eaten\n0    lion       meat     0         10           0\n1    lion       meat     1          5           5\n2    lion       meat     2          2           8\n3   tiger       meat     0          5           0\n4   tiger       meat     1          3           2\n5   tiger       meat     2          2           3\n6    lion  vegetable     0          5           0\n7    lion  vegetable     1          5           0\n8    lion  vegetable     2          5           0\n9   tiger  vegetable     0          5           0\n10  tiger  vegetable     1          5           0\n11  tiger  vegetable     2          5           0\n</code></pre>\n\n<p>I'm struggling to figure out how to apply this transformation in Pandas to produce the final data frame (preferably also in tidy format). Importantly, I need to keep the metadata (<code>animal</code>, <code>meal</code>, etc.).</p>\n\n<p>Preferably I'd like a solution which generalizes to different groupings and transformations; for instance, what if I want to divide the amount the tiger ate at each time point by the amount the lion ate (for a given meal) at that time point, or find out how much less the lion ate of vegetables than meat, and so on.</p>\n\n<hr>\n\n<p>Things I've tried:</p>\n\n<ul>\n<li><p><code>groupby</code>:</p>\n\n<pre><code>In [15]: df2 = df.set_index(['time'])\nIn [16]: df2.groupby(['animal','meal']).transform(lambda x: x[0] - x)\nOut[16]: \n      food_left\ntime           \n0             0\n1             5\n2             8\n0             0\n1             2\n2             3\n0             0\n1             0\n2             0\n0             0\n1             0\n2             0\n</code></pre>\n\n<p>Result is correct, but the metadata is lost, and I can't join it back to the original <code>df</code> </p></li>\n<li><p>If I <code>set_index</code> on <code>['time', 'animal', 'meal']</code>, then I can't <code>groupby</code>:</p>\n\n<pre><code>In [17]: df2 = df.set_index(['time','animal','meal'])\nIn [19]: df2.groupby(['animal','meal']).transform(lambda x: x[0] - x)\n---------------------------------------------------------------------------\nKeyError                                  Traceback (most recent call last)\n\n... snip ...\n\nKeyError: 'animal'\n</code></pre></li>\n<li><p><code>pivot</code>: </p>\n\n<pre><code>In [21]: data_pivot = df.pivot_table(columns=['animal','meal'],index=['time'],values='food_left')\n\nIn [22]: data_norm = data_pivot.rsub(data_pivot.loc[0], axis=1)\n\nIn [23]: data_norm\nOut[23]: \nanimal lion           tiger          \nmeal   meat vegetable  meat vegetable\ntime                                 \n0         0         0     0         0\n1         5         0     2         0\n2         8         0     3         0\n</code></pre>\n\n<p>This is a bit better and I could probably retrieve the original data with <code>melt</code> or <code>unstack</code>, but it seems inelegant. Is there a better way? </p></li>\n</ul>\n"}, {"tags": ["python", "python-2.7", "opencv"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user3325783"}, "edited": false, "score": 0, "creation_date": 1467233840, "post_id": 38109860, "comment_id": 63653340, "body": "You might need to have the CV file within the same directory as the <code>.py</code> file. Or the CV file isn&#39;t imported into the project correctly."}, {"owner": {"reputation": 178, "user_id": 3011131, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6954bdd14b808f15a3d757be039456e?s=128&d=identicon&r=PG&f=1", "display_name": "Nikos", "link": "https://stackoverflow.com/users/3011131/nikos"}, "edited": false, "score": 0, "creation_date": 1467237001, "post_id": 38109860, "comment_id": 63654766, "body": "I tried it and it didn&#39;t solve the problem."}], "answers": [{"comments": [{"owner": {"reputation": 178, "user_id": 3011131, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6954bdd14b808f15a3d757be039456e?s=128&d=identicon&r=PG&f=1", "display_name": "Nikos", "link": "https://stackoverflow.com/users/3011131/nikos"}, "edited": false, "score": 0, "creation_date": 1467236955, "post_id": 38110151, "comment_id": 63654748, "body": "I actually forgot to mention that the system runs Windows 10. But I did what you proposed and it didn&#39;t work unfortunately."}, {"owner": {"reputation": 925, "user_id": 3819415, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/67b228536ece20c66cfb7b80a1199b7b?s=128&d=identicon&r=PG&f=1", "display_name": "wolframalpha", "link": "https://stackoverflow.com/users/3819415/wolframalpha"}, "reply_to_user": {"reputation": 178, "user_id": 3011131, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6954bdd14b808f15a3d757be039456e?s=128&d=identicon&r=PG&f=1", "display_name": "Nikos", "link": "https://stackoverflow.com/users/3011131/nikos"}, "edited": false, "score": 0, "creation_date": 1467237607, "post_id": 38110151, "comment_id": 63655030, "body": "Check the execution path doing <code>sys.path</code>on IDLE and then on cmd(by opening <code>python</code> interpreter @cmd),  is it same?"}, {"owner": {"reputation": 178, "user_id": 3011131, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6954bdd14b808f15a3d757be039456e?s=128&d=identicon&r=PG&f=1", "display_name": "Nikos", "link": "https://stackoverflow.com/users/3011131/nikos"}, "edited": false, "score": 0, "creation_date": 1467237842, "post_id": 38110151, "comment_id": 63655120, "body": "You are actually completely right! Another software that I use comes with a Python installation and I guess it causes a conflict. How can I solve it?"}, {"owner": {"reputation": 925, "user_id": 3819415, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/67b228536ece20c66cfb7b80a1199b7b?s=128&d=identicon&r=PG&f=1", "display_name": "wolframalpha", "link": "https://stackoverflow.com/users/3819415/wolframalpha"}, "reply_to_user": {"reputation": 178, "user_id": 3011131, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6954bdd14b808f15a3d757be039456e?s=128&d=identicon&r=PG&f=1", "display_name": "Nikos", "link": "https://stackoverflow.com/users/3011131/nikos"}, "edited": false, "score": 0, "creation_date": 1467238320, "post_id": 38110151, "comment_id": 63655324, "body": "Check the executable path on IDLE ..  On Windows it would be something like <code>c:\\python2x</code> or whatever..  You need to set the same path as environment variable(My Computer &gt; Properties &gt; Advanced System Settings &gt; Environment Variables)   i.e. <code>PYTHONPATH</code> to the same."}, {"owner": {"reputation": 925, "user_id": 3819415, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/67b228536ece20c66cfb7b80a1199b7b?s=128&d=identicon&r=PG&f=1", "display_name": "wolframalpha", "link": "https://stackoverflow.com/users/3819415/wolframalpha"}, "reply_to_user": {"reputation": 178, "user_id": 3011131, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6954bdd14b808f15a3d757be039456e?s=128&d=identicon&r=PG&f=1", "display_name": "Nikos", "link": "https://stackoverflow.com/users/3011131/nikos"}, "edited": false, "score": 0, "creation_date": 1467238474, "post_id": 38110151, "comment_id": 63655389, "body": "Instead of adding the path to the variable <code>PYTHONPATH</code> add it to <code>path</code>"}], "tags": [], "owner": {"reputation": 925, "user_id": 3819415, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/67b228536ece20c66cfb7b80a1199b7b?s=128&d=identicon&r=PG&f=1", "display_name": "wolframalpha", "link": "https://stackoverflow.com/users/3819415/wolframalpha"}, "is_accepted": true, "score": 0, "last_activity_date": 1467238789, "last_edit_date": 1467238789, "creation_date": 1467234814, "answer_id": 38110151, "question_id": 38109860, "link": "https://stackoverflow.com/questions/38109860/opencv-python-cv2-module-not-found/38110151#38110151", "title": "OpenCV Python - cv2 Module not found", "body": "<p>Try to reinstall it by <code>sudo apt-get install python-opencv</code>,\nBut first you may check out something you might be skipping.\nMake sure the script you are running on the terminal is on the same python version/ location as on IDLE. \nMaybe your IDLE is running on a different interpreter(different location).\nOpen IDLE and check the path of cv2 module by <code>cv2.__file__</code>.\nOr you can check the executables path by <code>sys.path</code>. \nThen check the executable python path by running the script from the terminal, it must be same or else you need to explicitly set the <code>PYTHONPATH</code> to executable path shown in IDLE.</p>\n\n<p>Edit: \nAccording to the comments the problem you are facing is with the execution path,  add the idle execution path to the environment variable <code>path</code> - on Windows.  You can do it on the go by </p>\n\n<p><code>SET PATH=%PATH%;c:\\python27</code> on cmd\nChange the path to your context (of the IDLE).</p>\n"}], "owner": {"reputation": 178, "user_id": 3011131, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6954bdd14b808f15a3d757be039456e?s=128&d=identicon&r=PG&f=1", "display_name": "Nikos", "link": "https://stackoverflow.com/users/3011131/nikos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2480, "favorite_count": 0, "accepted_answer_id": 38110151, "answer_count": 1, "score": 0, "last_activity_date": 1517711281, "creation_date": 1467233725, "last_edit_date": 1467236885, "question_id": 38109860, "link": "https://stackoverflow.com/questions/38109860/opencv-python-cv2-module-not-found", "title": "OpenCV Python - cv2 Module not found", "body": "<p>Even though I believe I have installed correctly OpenCV, I cannot overcome the following problem. When I start a new python project from IDLE (2.7) the cv2 module is imported successfully. If I close IDLE and try to run the .py file, an error message is displayed that says \"ImportError: No module named cv2\". Then if I create a clean project through IDLE it works until I close it. What could be the problem?</p>\n\n<p>P.S. I am using Python 2.7 and OpenCV 3.1, but tried also with 2.4.13 on Windows 10.</p>\n"}, {"tags": ["python", "django"], "comments": [{"owner": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "edited": false, "score": 0, "creation_date": 1467233904, "post_id": 38109857, "comment_id": 63653371, "body": "Is the problem with the templating or with the code?  (i.e. Are the logs what you&#39;d expect?)"}, {"owner": {"reputation": 126, "user_id": 238104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/456552b905bd9fad75ede5c4eb4968ee?s=128&d=identicon&r=PG", "display_name": "jensq", "link": "https://stackoverflow.com/users/238104/jensq"}, "edited": false, "score": 0, "creation_date": 1467234226, "post_id": 38109857, "comment_id": 63653537, "body": "Does the behaviour change if you create explicit copies of the sublists, like <code>rm.rentalrates = list(srentalrate.readformaster(rm.rentalmasterid))</code> ?"}, {"owner": {"reputation": 93, "user_id": 593191, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/97a5c45b5e054e0883fbc413af2d4890?s=128&d=identicon&r=PG", "display_name": "David Freeman", "link": "https://stackoverflow.com/users/593191/david-freeman"}, "edited": false, "score": 0, "creation_date": 1467245857, "post_id": 38109857, "comment_id": 63657697, "body": "the logs produced by the python code are exactly correct, with the correct &#39;rentalrates&#39; shown.  The sets of rm.code and rm.model show correctly but their rental rates are all the same, those of the last rm record."}, {"owner": {"reputation": 126, "user_id": 238104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/456552b905bd9fad75ede5c4eb4968ee?s=128&d=identicon&r=PG", "display_name": "jensq", "link": "https://stackoverflow.com/users/238104/jensq"}, "edited": false, "score": 0, "creation_date": 1467278474, "post_id": 38109857, "comment_id": 63669915, "body": "Still, the most likely explanation is that rm.rentalrates is referencing the same object in all rows. That&#39;s the reason I asked for a literal copy with list() on assignment to rule out this case."}], "owner": {"reputation": 93, "user_id": 593191, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/97a5c45b5e054e0883fbc413af2d4890?s=128&d=identicon&r=PG", "display_name": "David Freeman", "link": "https://stackoverflow.com/users/593191/david-freeman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 23, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1467246153, "creation_date": 1467233709, "last_edit_date": 1467246153, "question_id": 38109857, "link": "https://stackoverflow.com/questions/38109857/nested-for-in-app-engine-django-incorrect", "title": "Nested &#39;for&#39; in app engine / django incorrect", "body": "<p>I am obviously doing something wrong, but my 'simple' nested for loop doesn't quite work correctly</p>\n\n<p>My python code is...</p>\n\n<pre><code>rrentalmasters = srentalmaster.readall()\nfor rm in rrentalmasters:\n    rm.rentalrates = srentalrate.readformaster(rm.rentalmasterid)\n    logging.error(rm.rentalmasterid.asstring)\n    for rr in rm.rentalrates:\n        logging.error(' - ' + rr.rentalrate.asstring)\n\noutopt = {\n    'rentalperiods': rrentalperiods,\n    'rentalmasters': rrentalmasters\n}\ndoRender(self, 'rentalpricelist.html', outopt)\n\nSample log would be \n1\n- 10\n- 20\n-40\n2\n- 5\n- 10\n- 15 \nand so on.\n</code></pre>\n\n<p>rentalrates is a list() of 1-5 rates for each rentalmaster item.  The logging shows the correct values for each item logged</p>\n\n<p>my html is as follows...</p>\n\n<pre><code>&lt;table class='fsgrid' width='100%'&gt;\n    {% for rm in rentalmasters %}\n        &lt;tr&gt;\n        &lt;td&gt;{{ rm.code }}&lt;/td&gt;\n        &lt;td&gt;{{ rm.model }}&lt;/td&gt;\n        {% for rr in rm.rentalrates %}\n            &lt;td&gt;{{ rr.rentalrate.asstring }}&lt;/td&gt;\n        {% endfor%}        \n        &lt;/tr&gt;\n    {% endfor%}\n&lt;/table&gt;\n\nhtml output might look like\n| 1 | model 1 |  5 | 10 | 15 |  # incorrect rates should be 10, 20 and 40\n| 2 | model 2 |  5 | 10 | 15 |  # correct rates\n</code></pre>\n\n<p>rm.code and rm.model display correctly but rr.rentalrate.asstring only shows the values for the LAST rm record, all rows in the table show the same rates.</p>\n\n<p>The examples of nested loops seem to indicate a known number of items in the nested list.  While I can assume 1..5 items, I cannot know.</p>\n\n<p>Any thoughts for me?</p>\n\n<p>Thanks\nDavid</p>\n"}, {"tags": ["python", "multiprocessing", "grid-search"], "comments": [{"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1467240821, "post_id": 38109830, "comment_id": 63656214, "body": "I think <a href=\"http://docs.scipy.org/doc/numpy/reference/generated/numpy.meshgrid.html\" rel=\"nofollow noreferrer\"><code>numpy.meshgrid</code></a> would help but I can&#39;t try it out right now.  Have a look at it."}, {"owner": {"reputation": 4365, "user_id": 5050917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10a198ba2d53839818a33b751eca2404?s=128&d=identicon&r=PG", "display_name": "mgc", "link": "https://stackoverflow.com/users/5050917/mgc"}, "edited": false, "score": 1, "creation_date": 1467241512, "post_id": 38109830, "comment_id": 63656467, "body": "Just a comment concerning how you use Pool and map: i guess you might need to return values (instead of appending values to <code>record_data</code>) from your <code>run_model</code> function and fetch the result in a variable like <code>res = p.map(f, [1, 2, 3])</code>. Also the <code>map</code> method take (at least in python 3) a <i>chunksize</i> argument to chunk your <i>iterable</i>."}, {"owner": {"reputation": 4365, "user_id": 5050917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10a198ba2d53839818a33b751eca2404?s=128&d=identicon&r=PG", "display_name": "mgc", "link": "https://stackoverflow.com/users/5050917/mgc"}, "edited": false, "score": 0, "creation_date": 1467242400, "post_id": 38109830, "comment_id": 63656744, "body": "(I haven&#39;t seen your <i>data_grid</i> object was also a global variable but  you might need to take a look to the <a href=\"https://docs.python.org/3.5/library/multiprocessing.html#synchronization-primitives\" rel=\"nofollow noreferrer\">synchronization primitives</a> or shared ctypes objects parts of the documentation to share variables between process)"}, {"owner": {"reputation": 830, "user_id": 4945948, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/7eb29ca42fb0303ab8e12ef8e0046549?s=128&d=identicon&r=PG&f=1", "display_name": "Will.Evo", "link": "https://stackoverflow.com/users/4945948/will-evo"}, "edited": false, "score": 0, "creation_date": 1467297583, "post_id": 38109830, "comment_id": 63683828, "body": "Thanks mgc. I&#39;ll look into all this."}], "answers": [{"comments": [{"owner": {"reputation": 830, "user_id": 4945948, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/7eb29ca42fb0303ab8e12ef8e0046549?s=128&d=identicon&r=PG&f=1", "display_name": "Will.Evo", "link": "https://stackoverflow.com/users/4945948/will-evo"}, "edited": false, "score": 1, "creation_date": 1467297273, "post_id": 38113474, "comment_id": 63683562, "body": "Thanks for the suggestions. Unfortunately, the computation isn&#39;t quite as simple as a+b+c and would be a huge pain to change now. I&#39;d much rather work with the framework I have but use multiprocessing to speed it up if possible."}, {"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "reply_to_user": {"reputation": 830, "user_id": 4945948, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/7eb29ca42fb0303ab8e12ef8e0046549?s=128&d=identicon&r=PG&f=1", "display_name": "Will.Evo", "link": "https://stackoverflow.com/users/4945948/will-evo"}, "edited": false, "score": 0, "creation_date": 1467303808, "post_id": 38113474, "comment_id": 63688440, "body": "@Will.Evo - so the second method, while slower than the first, may still be a bit faster than the nested Python loops and when you work out the multiprocessing you could still use it.  You wouldn&#39;t need to use <code>apply_along_axis</code>, just iterate over <code>points</code> - try it on a small dataset and see if it helps.."}, {"owner": {"reputation": 830, "user_id": 4945948, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/7eb29ca42fb0303ab8e12ef8e0046549?s=128&d=identicon&r=PG&f=1", "display_name": "Will.Evo", "link": "https://stackoverflow.com/users/4945948/will-evo"}, "edited": false, "score": 0, "creation_date": 1467306818, "post_id": 38113474, "comment_id": 63690106, "body": "I am starting to see what you are saying...your suggestions actually led me to get multiprocessing to run. I returned a list of values from the model but I still need to verify their order. I also am stuck in getting multiprocessing to run through certain parts of code and not the entire file. Anyway, I&#39;m working on it (even though I know someone on this site could do it in two seconds haha)"}, {"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "reply_to_user": {"reputation": 830, "user_id": 4945948, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/7eb29ca42fb0303ab8e12ef8e0046549?s=128&d=identicon&r=PG&f=1", "display_name": "Will.Evo", "link": "https://stackoverflow.com/users/4945948/will-evo"}, "edited": false, "score": 0, "creation_date": 1467603984, "post_id": 38113474, "comment_id": 63780466, "body": "@Will.Evo - can you modify the model to except something like a <a href=\"https://docs.python.org/3/library/collections.html#collections.namedtuple\" rel=\"nofollow noreferrer\"><code>namedtuple</code></a> which has a field for the data and a field for the original <i>location</i>?  The model operates on the data <i>field</i> and returns a <code>namedtuple</code> with the coordinates so you can reconstruct it?"}, {"owner": {"reputation": 830, "user_id": 4945948, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/7eb29ca42fb0303ab8e12ef8e0046549?s=128&d=identicon&r=PG&f=1", "display_name": "Will.Evo", "link": "https://stackoverflow.com/users/4945948/will-evo"}, "edited": false, "score": 0, "creation_date": 1467836130, "post_id": 38113474, "comment_id": 63887586, "body": "I actually just wrote in the meshgrid method for the model and tested it on a short run. Seems to work fine but I won&#39;t know how much time is saved until tonight when I run a longer iteration of the model. Thanks for all the help. I&#39;ll let you know how it goes.   PS: I&#39;ve abandoned my multi-processing aspirations. I am in an internship and only have three weeks left for my project, I&#39;ve gotta focus on getting results (even if that means long model runs)."}, {"owner": {"reputation": 830, "user_id": 4945948, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/7eb29ca42fb0303ab8e12ef8e0046549?s=128&d=identicon&r=PG&f=1", "display_name": "Will.Evo", "link": "https://stackoverflow.com/users/4945948/will-evo"}, "edited": false, "score": 0, "creation_date": 1467905969, "post_id": 38113474, "comment_id": 63920651, "body": "So I tested the meshgrid method and it works perfectly (compared it to a previous run to make sure) but the time saved wasn&#39;t all that much. I&#39;d say I save maybe 5-10% on run time. It translates into about an hour saved for the longer runs and for shorter runs only a few minutes. It is cleaner though so that is nice. I&#39;m going to post my solution as an answer shortly. Thanks for all the help."}, {"owner": {"reputation": 830, "user_id": 4945948, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/7eb29ca42fb0303ab8e12ef8e0046549?s=128&d=identicon&r=PG&f=1", "display_name": "Will.Evo", "link": "https://stackoverflow.com/users/4945948/will-evo"}, "edited": false, "score": 0, "creation_date": 1467907414, "post_id": 38113474, "comment_id": 63921506, "body": "weirdly enough, the example I posted above actually loses time with the meshgrid method...by quite a bit of time (20 seconds when I made a, b, and c large ranges)."}, {"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "reply_to_user": {"reputation": 830, "user_id": 4945948, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/7eb29ca42fb0303ab8e12ef8e0046549?s=128&d=identicon&r=PG&f=1", "display_name": "Will.Evo", "link": "https://stackoverflow.com/users/4945948/will-evo"}, "edited": false, "score": 0, "creation_date": 1467922860, "post_id": 38113474, "comment_id": 63930238, "body": "@Will.Evo, twenty seconds per loop or twenty extra seconds on a fourteen hour run? 20x20x20 is 8000 <i>loops</i>, if the actual calcs take seven seconds that is 15 hours just for the calcs.  Sorry,"}, {"owner": {"reputation": 830, "user_id": 4945948, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/7eb29ca42fb0303ab8e12ef8e0046549?s=128&d=identicon&r=PG&f=1", "display_name": "Will.Evo", "link": "https://stackoverflow.com/users/4945948/will-evo"}, "edited": false, "score": 0, "creation_date": 1467923708, "post_id": 38113474, "comment_id": 63930659, "body": "no I mean the example code I provided in my first post. The code ran for ~11 seconds total with the for loops and ~30 seconds total with the meshgrid method. I made the range arrays for a, b, and c large enough to make the code run for a decent amount of time to compare."}], "tags": [], "owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "is_accepted": false, "score": 1, "last_activity_date": 1467304048, "last_edit_date": 1495541296, "creation_date": 1467257084, "answer_id": 38113474, "question_id": 38109830, "link": "https://stackoverflow.com/questions/38109830/nested-for-loops-using-multiprocessing/38113474#38113474", "title": "Nested for loops using multiprocessing", "body": "<p>This doesn't solve your multiprocessing problem but it might make your process faster.</p>\n\n<p>Your <em>pattern</em> of using nested loops to construct n-d coordinates and then operating on them can be <em>vectorize</em>d using <a href=\"http://docs.scipy.org/doc/numpy/reference/generated/numpy.meshgrid.html\" rel=\"nofollow noreferrer\">```numpy.meshgrid````</a>.  Without knowing your actual calcs this approach can't be tested.</p>\n\n<pre><code>import numpy as np\na = np.array([0,1,2])\nb = np.array([10,11,12])\nc = np.array([20,21,22])\n\nx, y, z = np.meshgrid(a,b,c)\n\n&gt;&gt;&gt; x\narray([[[0, 0, 0],\n        [1, 1, 1],\n        [2, 2, 2]],\n\n       [[0, 0, 0],\n        [1, 1, 1],\n        [2, 2, 2]],\n\n       [[0, 0, 0],\n        [1, 1, 1],\n        [2, 2, 2]]])\n&gt;&gt;&gt; y\narray([[[10, 10, 10],\n        [10, 10, 10],\n        [10, 10, 10]],\n\n       [[11, 11, 11],\n        [11, 11, 11],\n        [11, 11, 11]],\n\n       [[12, 12, 12],\n        [12, 12, 12],\n        [12, 12, 12]]])\n&gt;&gt;&gt; z\narray([[[20, 21, 22],\n        [20, 21, 22],\n        [20, 21, 22]],\n\n       [[20, 21, 22],\n        [20, 21, 22],\n        [20, 21, 22]],\n\n       [[20, 21, 22],\n        [20, 21, 22],\n        [20, 21, 22]]])\n&gt;&gt;&gt; \n\n\n\nf = x + y + z\n\n&gt;&gt;&gt; f\narray([[[30, 31, 32],\n        [31, 32, 33],\n        [32, 33, 34]],\n\n       [[31, 32, 33],\n        [32, 33, 34],\n        [33, 34, 35]],\n\n       [[32, 33, 34],\n        [33, 34, 35],\n        [34, 35, 36]]])\n&gt;&gt;&gt; \n</code></pre>\n\n<hr>\n\n<p>There is also the option of using <code>meshgrid</code> to create the actual points then use a single loop to iterate over the points - you lose the spatial info with this approach unless you can figure out how to reshape the result.  I found this in SO answer <a href=\"https://stackoverflow.com/a/18253506/2823755\">https://stackoverflow.com/a/18253506/2823755</a></p>\n\n<pre><code>points = np.vstack([x,y,z]).reshape(3, -1).T\n\n&gt;&gt;&gt; points\narray([[ 0, 10, 20],\n       [ 0, 10, 21],\n       [ 0, 10, 22],\n       [ 1, 10, 20],\n       [ 1, 10, 21],\n       [ 1, 10, 22],\n       [ 2, 10, 20],\n       [ 2, 10, 21],\n       [ 2, 10, 22],\n       [ 0, 11, 20],\n       [ 0, 11, 21],\n       [ 0, 11, 22],\n       [ 1, 11, 20],\n       [ 1, 11, 21],\n       [ 1, 11, 22],\n       [ 2, 11, 20],\n       [ 2, 11, 21],\n       [ 2, 11, 22],\n       [ 0, 12, 20],\n       [ 0, 12, 21],\n       [ 0, 12, 22],\n       [ 1, 12, 20],\n       [ 1, 12, 21],\n       [ 1, 12, 22],\n       [ 2, 12, 20],\n       [ 2, 12, 21],\n       [ 2, 12, 22]])\n&gt;&gt;&gt;\n</code></pre>\n\n<p>You can create a function and apply it to <code>points</code></p>\n\n<pre><code>def g(point):\n    x, y, z = point\n    return x + y + z\n\nresult = np.apply_along_axis(g, 1, points)\n\n&gt;&gt;&gt; result\narray([30, 31, 32, 31, 32, 33, 32, 33, 34, 31, 32, 33, 32, 33, 34, 33, 34, 35, 32, 33, 34, 33, 34, 35, 34, 35, 36])\n&gt;&gt;&gt;\n</code></pre>\n\n<p>Reshaping this example is straightforward:</p>\n\n<pre><code>&gt;&gt;&gt; result.reshape(3,3,3)\narray([[[30, 31, 32],\n        [31, 32, 33],\n        [32, 33, 34]],\n\n       [[31, 32, 33],\n        [32, 33, 34],\n        [33, 34, 35]],\n\n       [[32, 33, 34],\n        [33, 34, 35],\n        [34, 35, 36]]])\n&gt;&gt;&gt; \n</code></pre>\n\n<p>Test to make sure they both the same</p>\n\n<pre><code>&gt;&gt;&gt; np.all(result.reshape(3,3,3) == f)\nTrue\n&gt;&gt;&gt; \n</code></pre>\n\n<p>For more complicated maths, just iterate over points:</p>\n\n<pre><code>result = []\nfor point in points:\n    example = some_maths\n    result.append(example)\n\nresult = np.array(result).reshape(shape_of_the_3d_data)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 830, "user_id": 4945948, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/7eb29ca42fb0303ab8e12ef8e0046549?s=128&d=identicon&r=PG&f=1", "display_name": "Will.Evo", "link": "https://stackoverflow.com/users/4945948/will-evo"}, "is_accepted": false, "score": 0, "last_activity_date": 1467907355, "last_edit_date": 1467907355, "creation_date": 1467906762, "answer_id": 38250020, "question_id": 38109830, "link": "https://stackoverflow.com/questions/38109830/nested-for-loops-using-multiprocessing/38250020#38250020", "title": "Nested for loops using multiprocessing", "body": "<p>As per user wwii's suggestions, I have rewrote the example above by using numpy's meshgrid  and getting rid of the nested for loops for just a single loop. Here is an example of the working code. </p>\n\n<pre><code>import numpy as np\nimport time\n\na_range = np.arange(14, 18, 1)\nb_range = np.arange(1000, 2200, 200)\nc_range = np.arange(12, 21, 1)\n\na_position = range(len(a_range))\nb_position = range(len(b_range))\nc_position = range(len(c_range))\n\nmesha, meshb, meshc = np.meshgrid(a_range, b_range, c_range)\nmesh_vals = np.vstack([mesha, meshb, meshc]).reshape(3, -1).T\n\nmesha_pos, meshb_pos, meshc_pos = np.meshgrid(a_position, b_position, c_position)\nmesh_positions = np.vstack([mesha_pos, meshb_pos, meshc_pos]).reshape(3,-1).T\n\ndata_grid = np.zeros([len(a_range), len(b_range), len(c_range)])\nrecord_data = []\n\nstart_time = time.time()\n\nfor pol in range(len(mesh_positions)):\n    example = mesh_vals[pol][0]+ mesh_vals[pol][1]+ mesh_vals[pol][2]\n    data_grid[mesh_positions[pol][0], mesh_positions[pol][1], mesh_positions[pol][2]] = example\n    record_data.append([mesh_vals[pol][0], mesh_vals[pol][1], mesh_vals[pol][2], example])\n\nprint 'Code ran for ', round(time.time()-start_time,2), ' seconds'\n</code></pre>\n\n<p>This actually, after further investigation caused the run time to increase rather significantly. The difference between the for loops and this method was 20 seconds when subjected to a large range for a, b, and c. I have no idea why, but I do know this construction of the problem should make multiprocessing easier since there is only a single for loop to deal with. </p>\n"}], "owner": {"reputation": 830, "user_id": 4945948, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/7eb29ca42fb0303ab8e12ef8e0046549?s=128&d=identicon&r=PG&f=1", "display_name": "Will.Evo", "link": "https://stackoverflow.com/users/4945948/will-evo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 944, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1467907355, "creation_date": 1467233599, "question_id": 38109830, "link": "https://stackoverflow.com/questions/38109830/nested-for-loops-using-multiprocessing", "title": "Nested for loops using multiprocessing", "body": "<p>I have a quick question regarding multiprocessing in python. </p>\n\n<p>I am conducting a rather large grid search over three parameters and the computation is taking ~14 hours to complete. I would like to shrink this run time down by using multiprocessing. </p>\n\n<p>A very simplified example of my code is here:</p>\n\n<pre><code>import numpy as np\nimport pickle\nimport time\n\na_range = np.arange(14, 18, 0.2)\nb_range = np.arange(1000, 5000, 200)\nc_range = np.arange(12, 21, .5)\n\na_position = range(len(a_range))\nb_position = range(len(b_range))\nc_position = range(len(c_range))\n\ndata_grid = np.zeros([len(a_range), len(b_range), len(c_range)])\nrecord_data = []\n\nstart_time = time.time()\n\nfor (a,apos) in zip(a_range, a_position):\n    for (b, bpos) in zip(b_range, b_position):\n        for (c, cpos) in zip(c_range, c_position):\n            example = a+b+c  #The math in my model is much more complex and takes\n            #about 7-8 seconds to process\n            data_grid[apos, bpos, cpos] = example\n            record_data.append([a, b, c, example])\n\nwith open('Test_File', 'wb') as f: \n    pickle.dump(record_data, f) \n\nnp.save('example_values', data_grid) \n\nprint 'Code ran for ', round(time.time()-start_time,2), ' seconds'\n</code></pre>\n\n<p>Now, I have absolutely zero experience in multiprocessing so my first attempt at this was changing the for loops into a function and then calling the multiprocessing function like this:</p>\n\n<pre><code>def run_model(a, b, c, apos, bpos, cpos):\n    example=a+b+c  \n    data_grid[apos, bpos, cpos]=example\n    record_data.append([a, b, c, example])\n\nfrom multiprocessing import Pool\n\nif __name__=='__main__':\n    pool=Pool(processes=4)\n    pool.map(run_model, [a_range, b_range, c_range, a_position, b_positon, c_positon])\n    pool.close()\n    pool.join()\n</code></pre>\n\n<p>This failed however at the pool.map call. I understand this function only takes a single iterable argument but I don't know how to fix the problem. I am also skeptical that the data_grid variable is going to be filled correctly. The result I want from this function is two files saved, one as an array of values whose indexes correspond to a, b, and c values and the last a list of lists containing the a, b, c values and the resulting value (example in the code above)</p>\n\n<p>Thanks for any help!</p>\n\n<p>-Will</p>\n"}, {"tags": ["python", "numpy"], "comments": [{"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 5, "creation_date": 1467233332, "post_id": 38109760, "comment_id": 63653076, "body": "Subtract <code>11</code> from them?"}, {"owner": {"reputation": 27649, "user_id": 5067311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjltV.png?s=128&g=1", "display_name": "Andras Deak", "link": "https://stackoverflow.com/users/5067311/andras-deak"}, "reply_to_user": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 3, "creation_date": 1467233349, "post_id": 38109760, "comment_id": 63653087, "body": "Just to top @Divakar: subtract <code>my_array.min()</code> ;)"}, {"owner": {"reputation": 5109, "user_id": 2373748, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/moadr.png?s=128&g=1", "display_name": "galaxyan", "link": "https://stackoverflow.com/users/2373748/galaxyan"}, "reply_to_user": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 0, "creation_date": 1467233496, "post_id": 38109760, "comment_id": 63653163, "body": "@Divakar is that only 0~18?"}, {"owner": {"reputation": 27649, "user_id": 5067311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjltV.png?s=128&g=1", "display_name": "Andras Deak", "link": "https://stackoverflow.com/users/5067311/andras-deak"}, "edited": false, "score": 1, "creation_date": 1467233628, "post_id": 38109760, "comment_id": 63653229, "body": "Now that you&#39;ve edited your question, it&#39;s no longer trivial. It&#39;s unclear instead."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1467233632, "post_id": 38109760, "comment_id": 63653232, "body": "would an <code>sklearn</code> solution be ok?"}, {"owner": {"reputation": 417, "user_id": 6490995, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/1b7bd66fc5eb9c8aa4daad79ec3c5440?s=128&d=identicon&r=PG&f=1", "display_name": "tnabdb", "link": "https://stackoverflow.com/users/6490995/tnabdb"}, "edited": false, "score": 0, "creation_date": 1467233672, "post_id": 38109760, "comment_id": 63653250, "body": "any solution would be fine"}, {"owner": {"reputation": 86856, "user_id": 1628832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/090ce0cca74f8cc6766366460b956a0f?s=128&d=identicon&r=PG&f=1", "display_name": "karthikr", "link": "https://stackoverflow.com/users/1628832/karthikr"}, "edited": false, "score": 0, "creation_date": 1467233677, "post_id": 38109760, "comment_id": 63653252, "body": "the question is, if it is unique, what is compelling you to convert them as zero indexed ? You can always enumerate or figure out another way to iterate"}, {"owner": {"reputation": 417, "user_id": 6490995, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/1b7bd66fc5eb9c8aa4daad79ec3c5440?s=128&d=identicon&r=PG&f=1", "display_name": "tnabdb", "link": "https://stackoverflow.com/users/6490995/tnabdb"}, "reply_to_user": {"reputation": 86856, "user_id": 1628832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/090ce0cca74f8cc6766366460b956a0f?s=128&d=identicon&r=PG&f=1", "display_name": "karthikr", "link": "https://stackoverflow.com/users/1628832/karthikr"}, "edited": false, "score": 0, "creation_date": 1467233712, "post_id": 38109760, "comment_id": 63653270, "body": "@karthikr I&#39;m not sure what you mean"}, {"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 0, "creation_date": 1467233847, "post_id": 38109760, "comment_id": 63653346, "body": "See if this works for you : <code>np.unique(input_array,return_inverse=True)</code>. This would ID each category starting from 0 until <code>N-1</code>, where <code>N</code> is the number of categories."}, {"owner": {"reputation": 417, "user_id": 6490995, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/1b7bd66fc5eb9c8aa4daad79ec3c5440?s=128&d=identicon&r=PG&f=1", "display_name": "tnabdb", "link": "https://stackoverflow.com/users/6490995/tnabdb"}, "reply_to_user": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 0, "creation_date": 1467233961, "post_id": 38109760, "comment_id": 63653398, "body": "@Divakar that does the conversion from the categories to id. How would I go from id to categories?"}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1467233974, "post_id": 38109760, "comment_id": 63653409, "body": "This is either getting surreal or I have no idea what is going on."}, {"owner": {"reputation": 417, "user_id": 6490995, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/1b7bd66fc5eb9c8aa4daad79ec3c5440?s=128&d=identicon&r=PG&f=1", "display_name": "tnabdb", "link": "https://stackoverflow.com/users/6490995/tnabdb"}, "edited": false, "score": 0, "creation_date": 1467234150, "post_id": 38109760, "comment_id": 63653501, "body": "say now I have a new array containing categories and a new array containing ids. How do I convert one to the other, given the <code>unique</code> and <code>inverse</code> arrays from <code>np.unique</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "is_accepted": false, "score": 5, "last_activity_date": 1467234632, "last_edit_date": 1467234632, "creation_date": 1467234311, "answer_id": 38110015, "question_id": 38109760, "link": "https://stackoverflow.com/questions/38109760/map-a-number-to-an-id-in-python/38110015#38110015", "title": "Map a number to an id in python", "body": "<p>Let's say <code>arr</code> is the input array of categories. </p>\n\n<p><strong>Forward Process/Encoding :</strong> From categories to IDs</p>\n\n<p>To perform the encoding, use <code>np.unique</code> alongwith its optional <code>return_inverse</code> argument to give us IDs that would have values from <code>0</code> to <code>N-1</code>, where <code>N</code> is the number of categories you would have in <code>arr</code> , like so -</p>\n\n<pre><code>unq,idx = np.unique(arr,return_inverse=True)\n</code></pre>\n\n<p><strong>Backward Process/Decoding :</strong> From IDs to categories</p>\n\n<p>To go back to the original categories from the <code>IDs (idx)</code>, just index into unique categories saved earlier as <code>unq</code>, like so -</p>\n\n<pre><code>arr_out = unq[idx]\n</code></pre>\n\n<p>Sample run -</p>\n\n<pre><code>In [40]: arr # Input array of categories\nOut[40]: array([7, 1, 1, 3, 8, 2, 7, 7, 0, 2])\n\nIn [41]: unq,idx = np.unique(arr,return_inverse=True)\n\nIn [42]: idx  # ID array with values from 0 to 5 (6 categories)\nOut[42]: array([4, 1, 1, 3, 5, 2, 4, 4, 0, 2])\n\nIn [43]: unq[idx] # Get back original array of categories\nOut[43]: array([7, 1, 1, 3, 8, 2, 7, 7, 0, 2])\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 417, "user_id": 6490995, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/1b7bd66fc5eb9c8aa4daad79ec3c5440?s=128&d=identicon&r=PG&f=1", "display_name": "tnabdb", "link": "https://stackoverflow.com/users/6490995/tnabdb"}, "edited": false, "score": 0, "creation_date": 1467236913, "post_id": 38110022, "comment_id": 63654719, "body": "This one is elegant but it makes my ipython notebook kernel die. I have about 10000 categories."}], "tags": [], "owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "is_accepted": true, "score": 3, "last_activity_date": 1467234341, "creation_date": 1467234341, "answer_id": 38110022, "question_id": 38109760, "link": "https://stackoverflow.com/questions/38109760/map-a-number-to-an-id-in-python/38110022#38110022", "title": "Map a number to an id in python", "body": "<p>To be able to easily convert back-and-forth, I would use the <code>sklearn.preprocessing</code> module <code>LabelEncoder</code>:</p>\n\n<pre><code>In [7]: from sklearn.preprocessing import LabelEncoder\n\nIn [8]: encoder = LabelEncoder()\n\nIn [9]: encoder.fit(range(11,31))\nOut[9]: LabelEncoder()\n\nIn [10]: encoder.transform([11,30,25])\nOut[10]: array([ 0, 19, 14])\n\nIn [11]: encoder.inverse_transform([18, 1, 15])\nOut[11]: array([29, 12, 26])\n</code></pre>\n"}], "owner": {"reputation": 417, "user_id": 6490995, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/1b7bd66fc5eb9c8aa4daad79ec3c5440?s=128&d=identicon&r=PG&f=1", "display_name": "tnabdb", "link": "https://stackoverflow.com/users/6490995/tnabdb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 333, "favorite_count": 0, "accepted_answer_id": 38110022, "answer_count": 2, "score": 2, "last_activity_date": 1467234632, "creation_date": 1467233261, "last_edit_date": 1467233589, "question_id": 38109760, "link": "https://stackoverflow.com/questions/38109760/map-a-number-to-an-id-in-python", "title": "Map a number to an id in python", "body": "<p>Suppose I have a numpy array like: [11, 30, 25]. These numbers represent categories of the objects corresponding to the indices. I know there are just 20 categories but for some reason they are numbered from 11 to 29. I'd like to convert them to numbers in 0:19 and back. What would by a pythonic way to do this? Preferably in bumpy.</p>\n\n<p>EDIT: this is just a small example of a bigger problem, where the number of categories are in the thousands, and some categories are never represented, so the maximum id will be the number of unique existing categories.</p>\n"}, {"tags": ["python", "linux"], "comments": [{"owner": {"reputation": 26589, "user_id": 1032785, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/30816b3d787c2bd9d6f036318304f225?s=128&d=identicon&r=PG", "display_name": "jordanm", "link": "https://stackoverflow.com/users/1032785/jordanm"}, "edited": false, "score": 1, "creation_date": 1467233103, "post_id": 38109637, "comment_id": 63652954, "body": "You need the <code>libffi-dev</code> package"}, {"owner": {"reputation": 155, "user_id": 6347875, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83abb041641f1c054909a328f1c9f5dd?s=128&d=identicon&r=PG&f=1", "display_name": "Aprameya NDS", "link": "https://stackoverflow.com/users/6347875/aprameya-nds"}, "reply_to_user": {"reputation": 26589, "user_id": 1032785, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/30816b3d787c2bd9d6f036318304f225?s=128&d=identicon&r=PG", "display_name": "jordanm", "link": "https://stackoverflow.com/users/1032785/jordanm"}, "edited": false, "score": 0, "creation_date": 1467233242, "post_id": 38109637, "comment_id": 63653008, "body": "Hi, I already have the package installed inspite of which i am getting this error. Please refer to the above output &quot;yum list libffi&quot;"}, {"owner": {"reputation": 26589, "user_id": 1032785, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/30816b3d787c2bd9d6f036318304f225?s=128&d=identicon&r=PG", "display_name": "jordanm", "link": "https://stackoverflow.com/users/1032785/jordanm"}, "edited": false, "score": 0, "creation_date": 1467233281, "post_id": 38109637, "comment_id": 63653039, "body": "That output is for <code>libffi</code>, not <code>libffi-dev</code>."}, {"owner": {"reputation": 155, "user_id": 6347875, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83abb041641f1c054909a328f1c9f5dd?s=128&d=identicon&r=PG&f=1", "display_name": "Aprameya NDS", "link": "https://stackoverflow.com/users/6347875/aprameya-nds"}, "reply_to_user": {"reputation": 26589, "user_id": 1032785, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/30816b3d787c2bd9d6f036318304f225?s=128&d=identicon&r=PG", "display_name": "jordanm", "link": "https://stackoverflow.com/users/1032785/jordanm"}, "edited": false, "score": 0, "creation_date": 1467234317, "post_id": 38109637, "comment_id": 63653579, "body": "@jordanm - Thanks a lot it really helped. You are right i downloaded the rpm pkg for libffi-dev &quot;libffi-devel-3.0.5-3.2.el6.x86_64.rpm&quot; and installed and it worked. I was under the impression that libffi and libffi-dev are same. But its not. Thanks once again."}, {"owner": {"reputation": 4790, "user_id": 4491743, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aXCqO.jpg?s=128&g=1", "display_name": "Knud Larsen", "link": "https://stackoverflow.com/users/4491743/knud-larsen"}, "edited": false, "score": 0, "creation_date": 1467239231, "post_id": 38109637, "comment_id": 63655673, "body": "@Aprameya NDS. Actually yum can inform : <code>yum provides *&#47;ffi.h</code>  ,  <code>yum provides *&#47;libffi.pc</code> ... or use the online search <a href=\"http://rpm.pbone.net/\" rel=\"nofollow noreferrer\">rpm.pbone.net</a> ... and have a look at the package list <a href=\"http://mirror.centos.org/centos/6.8/os/x86_64/Packages/\" rel=\"nofollow noreferrer\">mirror.centos.org/centos/6.8/os/x86_64/Packages</a>"}, {"owner": {"reputation": 155, "user_id": 6347875, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83abb041641f1c054909a328f1c9f5dd?s=128&d=identicon&r=PG&f=1", "display_name": "Aprameya NDS", "link": "https://stackoverflow.com/users/6347875/aprameya-nds"}, "edited": false, "score": 0, "creation_date": 1467243940, "post_id": 38109637, "comment_id": 63657189, "body": "Thanks Knud Larsen"}], "answers": [{"comments": [{"owner": {"reputation": 600, "user_id": 1121909, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CSZiI.jpg?s=128&g=1", "display_name": "frozenjim", "link": "https://stackoverflow.com/users/1121909/frozenjim"}, "edited": false, "score": 1, "creation_date": 1600365233, "post_id": 43827540, "comment_id": 113072715, "body": "Not sure why, but I have a docker build that has never failed... today it fails with this error so I added libffi-dev and the build works again.  It would be nice to know WHAT changed, but hey... it&#39;s working again, right?"}], "tags": [], "owner": {"reputation": 2393, "user_id": 3588013, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kk3Pv.jpg?s=128&g=1", "display_name": "Harun-Ur-Rashid", "link": "https://stackoverflow.com/users/3588013/harun-ur-rashid"}, "is_accepted": false, "score": 21, "last_activity_date": 1494127959, "creation_date": 1494127959, "answer_id": 43827540, "question_id": 38109637, "link": "https://stackoverflow.com/questions/38109637/package-libffi-was-not-found-in-the-pkg-config-search-path-redhat6-5/43827540#43827540", "title": "Package libffi was not found in the pkg-config search path REDHAT6.5", "body": "<p>try after installing:</p>\n\n<pre><code>sudo apt-get install libffi6 libffi-dev\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 751, "user_id": 7418388, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/caa8d6f3cc0df001ff2f66aeed93fc85?s=128&d=identicon&r=PG&f=1", "display_name": "nishith", "link": "https://stackoverflow.com/users/7418388/nishith"}, "is_accepted": false, "score": 14, "last_activity_date": 1497031020, "creation_date": 1497031020, "answer_id": 44464093, "question_id": 38109637, "link": "https://stackoverflow.com/questions/38109637/package-libffi-was-not-found-in-the-pkg-config-search-path-redhat6-5/44464093#44464093", "title": "Package libffi was not found in the pkg-config search path REDHAT6.5", "body": "<p>You will need the development version of libffi to install libraries which depends on libffi : </p>\n\n<pre><code>sudo yum install libffi-devel\n</code></pre>\n\n<p>This worked for me</p>\n"}, {"comments": [{"owner": {"reputation": 431, "user_id": 6846195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ed7997ec520e0f942731bf283ec6f95?s=128&d=identicon&r=PG&f=1", "display_name": "cenkarioz", "link": "https://stackoverflow.com/users/6846195/cenkarioz"}, "reply_to_user": {"reputation": 3591, "user_id": 5539715, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/1057110085/picture?type=large", "display_name": "Nic Scozzaro", "link": "https://stackoverflow.com/users/5539715/nic-scozzaro"}, "edited": false, "score": 0, "creation_date": 1556824372, "post_id": 55721642, "comment_id": 98569337, "body": "can you share your stack trace and what you are trying to achieve?"}, {"owner": {"reputation": 1223, "user_id": 233772, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/78a2d5892877b060c728468379f9994e?s=128&d=identicon&r=PG&f=1", "display_name": "R.J.", "link": "https://stackoverflow.com/users/233772/r-j"}, "edited": false, "score": 1, "creation_date": 1565669884, "post_id": 55721642, "comment_id": 101414525, "body": "Commenting to simply point out that it does work for some users (for me it did)."}], "tags": [], "owner": {"reputation": 431, "user_id": 6846195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ed7997ec520e0f942731bf283ec6f95?s=128&d=identicon&r=PG&f=1", "display_name": "cenkarioz", "link": "https://stackoverflow.com/users/6846195/cenkarioz"}, "is_accepted": false, "score": 5, "last_activity_date": 1555484251, "creation_date": 1555484251, "answer_id": 55721642, "question_id": 38109637, "link": "https://stackoverflow.com/questions/38109637/package-libffi-was-not-found-in-the-pkg-config-search-path-redhat6-5/55721642#55721642", "title": "Package libffi was not found in the pkg-config search path REDHAT6.5", "body": "<p>I had the same issue for MacOS. I assume the solution should be similar. <br></p>\n\n<pre><code>nano ~/.bash_profile\n</code></pre>\n\n<p>Add these two lines below to the end of your bash_profile so that it can be discovered<br></p>\n\n<pre><code>export PKG_CONFIG_PATH=\"/usr/local/opt/libffi/lib/pkgconfig\"\nexport LDFLAGS=\"-L/usr/local/opt/libffi/lib\" \n</code></pre>\n\n<p>Save and quit and restart Terminal</p>\n"}, {"tags": [], "owner": {"reputation": 151, "user_id": 8120585, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-XtTJLvyzPjk/AAAAAAAAAAI/AAAAAAAAAJk/5SkeiQXXOeQ/photo.jpg?sz=128", "display_name": "Syed Faraz Umar", "link": "https://stackoverflow.com/users/8120585/syed-faraz-umar"}, "is_accepted": false, "score": 1, "last_activity_date": 1567403127, "creation_date": 1567403127, "answer_id": 57751935, "question_id": 38109637, "link": "https://stackoverflow.com/questions/38109637/package-libffi-was-not-found-in-the-pkg-config-search-path-redhat6-5/57751935#57751935", "title": "Package libffi was not found in the pkg-config search path REDHAT6.5", "body": "<p>Faced a similar issue while installing paramiko using pip3:</p>\n\n<p>$ pip3 install paramiko</p>\n\n<p>ERROR: </p>\n\n<p>Package libffi was not found in the pkg-config search path.\n    Perhaps you should add the directory containing `libffi.pc'\n    to the PKG_CONFIG_PATH environment variable\n    No package 'libffi' found</p>\n\n<p>No package 'libffi' found\n    c/_cffi_backend.c:15:17: fatal error: ffi.h: No such file or directory\n    compilation terminated.</p>\n\n<p>distutils.errors.DistutilsExecError: command 'x86_64-linux-gnu-gcc' failed with exit status 1</p>\n\n<p>RESOLUTION:</p>\n\n<pre><code>$ sudo apt-get install libffi-dev\n$ pip3 install paramiko\n</code></pre>\n\n<p>Successfully installed asn1crypto bcrypt cffi cryptography-1.2.3 paramiko-1.16.0 pycparser pynacl six-1.10.0</p>\n"}, {"tags": [], "owner": {"reputation": 2197, "user_id": 805417, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/8d78611c72c5192c89019d0c85e1b258?s=128&d=identicon&r=PG", "display_name": "pebox11", "link": "https://stackoverflow.com/users/805417/pebox11"}, "is_accepted": false, "score": 0, "last_activity_date": 1589635865, "creation_date": 1589635865, "answer_id": 61837577, "question_id": 38109637, "link": "https://stackoverflow.com/questions/38109637/package-libffi-was-not-found-in-the-pkg-config-search-path-redhat6-5/61837577#61837577", "title": "Package libffi was not found in the pkg-config search path REDHAT6.5", "body": "<p>I was using python 3.8 and getting the same error while wheel was trying to setup cffi on a conda environment. I tried installing libffi and libffi-dev (and exiting the terminal and reactivating the environment each time was installing something!) but with no luck. I then thought that maybe downgrading python to 3.7 might solve the issue. I did that in my conda environment (just activated the environment and ran conda install python=3.7 and then all of the sudden libffi was found! wheel was able to setup cffi and all were working like a charm!</p>\n"}, {"tags": [], "owner": {"reputation": 393, "user_id": 6013354, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/INdeM.jpg?s=128&g=1", "display_name": "Aleem", "link": "https://stackoverflow.com/users/6013354/aleem"}, "is_accepted": false, "score": 0, "last_activity_date": 1600711511, "creation_date": 1600711511, "answer_id": 63997722, "question_id": 38109637, "link": "https://stackoverflow.com/questions/38109637/package-libffi-was-not-found-in-the-pkg-config-search-path-redhat6-5/63997722#63997722", "title": "Package libffi was not found in the pkg-config search path REDHAT6.5", "body": "<p>try this</p>\n<blockquote>\n<p><code>sudo apt-get install -y python3-cffi</code></p>\n</blockquote>\n"}], "owner": {"reputation": 155, "user_id": 6347875, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83abb041641f1c054909a328f1c9f5dd?s=128&d=identicon&r=PG&f=1", "display_name": "Aprameya NDS", "link": "https://stackoverflow.com/users/6347875/aprameya-nds"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31592, "favorite_count": 4, "answer_count": 6, "score": 13, "last_activity_date": 1600711511, "creation_date": 1467232762, "last_edit_date": 1467233020, "question_id": 38109637, "link": "https://stackoverflow.com/questions/38109637/package-libffi-was-not-found-in-the-pkg-config-search-path-redhat6-5", "title": "Package libffi was not found in the pkg-config search path REDHAT6.5", "body": "<p>I am trying to run setup.py related to a proprietary software installation and it has dependencies on libffi.</p>\n\n<p>Since its Redhat 6.5 the python version was 2.6 and i installed python 2.7.</p>\n\n<p>libffi was already installed and when i create a virtualenv and try installing the software by running the setup.py i get the following error:</p>\n\n<pre><code>No package 'libffi' found\nPackage libffi was not found in the pkg-config search path.\nPerhaps you should add the directory containing `libffi.pc'\nto the PKG_CONFIG_PATH environment variable\nNo package 'libffi' found\nc/_cffi_backend.c:15:17: error: ffi.h: No such file or directory\nIn file included from c/_cffi_backend.c:63:\n\nyum list libffi\nLoaded plugins: product-id, refresh-packagekit, security, subscription-manager\nThis system is not registered to Red Hat Subscription Management. You can use subscription-manager to register.\nInstalled Packages\nlibffi.x86_64                  3.0.5-3.2.el6                   @anaconda-RedHatEnterpriseLinux-201311111358.x86_64/6.5\nAvailable Packages\nlibffi.i686                    3.0.5-3.2.el6                   rhel-local   \n</code></pre>\n\n<p>My query is how do we modify the pkg-config search path.\nto point to libffi.pc?</p>\n"}, {"tags": ["python", "argparse"], "comments": [{"owner": {"reputation": 8538, "user_id": 3059812, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/UaU9b.jpg?s=128&g=1", "display_name": "Morgan Thrapp", "link": "https://stackoverflow.com/users/3059812/morgan-thrapp"}, "edited": false, "score": 0, "creation_date": 1467232852, "post_id": 38109570, "comment_id": 63652824, "body": "I don&#39;t get that <code>None</code> when I run it and fix the invalid syntax. What version of Python are you using? I&#39;ve tried both 3.5.1 and 2.7.11 and it works in both versions. You need a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 8538, "user_id": 3059812, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/UaU9b.jpg?s=128&g=1", "display_name": "Morgan Thrapp", "link": "https://stackoverflow.com/users/3059812/morgan-thrapp"}, "edited": false, "score": 1, "creation_date": 1467233039, "post_id": 38109570, "comment_id": 63652924, "body": "Also, I don&#39;t think <code>len(args.dos) &gt; 1</code> does what you think it does. It checks if you&#39;ve entered a number with more than 1 digit."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 2, "creation_date": 1467233741, "post_id": 38109570, "comment_id": 63653284, "body": "Did you try <code>print(args)</code> to see directly what was parsed?"}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1467235009, "post_id": 38109570, "comment_id": 63653897, "body": "You now need a test that can handle the string &#39;12&#39;, not a list or number.  A string."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1467235377, "post_id": 38109570, "comment_id": 63654062, "body": "What is is supposed to do with just <code>--dos</code> and without it at all?"}, {"owner": {"reputation": 2557, "user_id": 2005559, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/bc7f2b8ef12c422ea79863dfafd3c647?s=128&d=identicon&r=PG", "display_name": "BaRud", "link": "https://stackoverflow.com/users/2005559/barud"}, "reply_to_user": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1467235843, "post_id": 38109570, "comment_id": 63654253, "body": "@hpaulj, from the minimal example at the top, it should print the values. So, without any argument of --dos, i should have <code>chosen=None</code>, and <code>str DOSY</code> printed. With a argument, say, <code>--dos 111</code>, i should have <code>chosen=111</code>, and str <code>DOSY</code>.  The argument od --dos is an integer, and I dont want to split it."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1467247583, "post_id": 38109570, "comment_id": 63658085, "body": "Does my last edit produce the kind of values that you want?"}], "answers": [{"comments": [{"owner": {"reputation": 2557, "user_id": 2005559, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/bc7f2b8ef12c422ea79863dfafd3c647?s=128&d=identicon&r=PG", "display_name": "BaRud", "link": "https://stackoverflow.com/users/2005559/barud"}, "edited": false, "score": 0, "creation_date": 1467234315, "post_id": 38109758, "comment_id": 63653578, "body": "I have already tried nargs = &quot;*&quot;. Have you checked the code? its giving same problem."}], "tags": [], "owner": {"reputation": 2032, "user_id": 4317531, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6dpdH.jpg?s=128&g=1", "display_name": "bpachev", "link": "https://stackoverflow.com/users/4317531/bpachev"}, "is_accepted": false, "score": 0, "last_activity_date": 1467233257, "creation_date": 1467233257, "answer_id": 38109758, "question_id": 38109570, "link": "https://stackoverflow.com/questions/38109570/optional-nargs-variable-in-argparse/38109758#38109758", "title": "optional nargs variable in argparse", "body": "<p>You need to replace nargs = \"?\" with nargs = \"*\". Setting nargs to \"?\" means there will be 1 optional argument. What you want is a list of optional arguments, which is \"*\". Like so.</p>\n\n<pre><code>import argparse\nparser = argparse.ArgumentParser(description=\"output parser\")\ngroup = parser.add_mutually_exclusive_group()\ngroup.add_argument(\"--dos\", help=\"get DOSCAR for plot\",\n               nargs=\"*\", metavar=(\"int\"))\nargs = parser.parse_args()\n\nif args.dos:    \n    if len(args.dos) &gt; 1:\n        chosen = int(args.dos[0])\n        chdos = \"at_dos\"+args.dos[0]+\".dat\"\n    else:\n        chosen = None\n\n    inpt = \"DOSY\"\n    print(chosen)\n    print(inpt)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2557, "user_id": 2005559, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/bc7f2b8ef12c422ea79863dfafd3c647?s=128&d=identicon&r=PG", "display_name": "BaRud", "link": "https://stackoverflow.com/users/2005559/barud"}, "edited": false, "score": 0, "creation_date": 1467273435, "post_id": 38110119, "comment_id": 63666747, "body": "Hi, Thanks for your reply. While this is working, I am struggling to get the parsers part out of the def (--dos is may of other options). Byt thanks"}], "tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": false, "score": 4, "last_activity_date": 1467247545, "last_edit_date": 1467247545, "creation_date": 1467234698, "answer_id": 38110119, "question_id": 38109570, "link": "https://stackoverflow.com/questions/38109570/optional-nargs-variable-in-argparse/38110119#38110119", "title": "optional nargs variable in argparse", "body": "<p>Simplifying your parser in a Ipython session:</p>\n\n<pre><code>In [1004]: parser=argparse.ArgumentParser()    \nIn [1005]: parser.add_argument('--dos', nargs='?')\n\nIn [1007]: parser.parse_args('--dos 111'.split())\nOut[1007]: Namespace(dos='111')\n</code></pre>\n\n<p>In this case <code>args.dos</code> will be the string '111', with <code>len</code> 3, and <code>int(args.dos[0])</code> the number 1.  The same happens in you leave <code>nargs</code> blank (default None).</p>\n\n<p>With <code>nargs='?'</code> I can also use the flag without an argument, in which case the value is the default <code>None</code>.</p>\n\n<pre><code>In [1013]: parser.parse_args('--dos'.split())\nOut[1013]: Namespace(dos=None)\n</code></pre>\n\n<p><code>nargs=</code>?<code>is most useful with a</code>const<code>, which gives a convenient 3 way action.  I can add</code>type=int` to convert the string, if any to integer.</p>\n\n<pre><code>In [1015]: parser.add_argument('--dos', nargs='?', type=int,\n   default=None, const=123)\n\nIn [1016]: parser.parse_args([]) # not used\nOut[1016]: Namespace(dos=None)\n\nIn [1017]: parser.parse_args('--dos'.split())  # without argument\nOut[1017]: Namespace(dos=123)\n\nIn [1018]: parser.parse_args('--dos 456'.split())  # with argument\nOut[1018]: Namespace(dos=456)\n</code></pre>\n\n<p>Other <code>nargs</code>, like 1, '*' and '+' give you a list, which you can check for length etc.</p>\n\n<p>====================</p>\n\n<p>In your <code>argv</code> testing</p>\n\n<pre><code>if len(sys.argv) &gt; 2:\n    chosen = int(sys.argv[2])\n    chdos = \"at_dos\"+sys.argv[2]+\".dat\"\n</code></pre>\n\n<p><code>sys.argv</code> is a list, so the len counts if there are enough elements to apply the <code>sys.argv[2]</code> step.</p>\n\n<p>This does not work because <code>args.dos</code> is a single string, not a list.</p>\n\n<pre><code>if len(args.dos) &gt; 1:\n    chosen = int(args.dos[0])\n    chdos = \"at_dos\"+args.dos[0]+\".dat\"\n</code></pre>\n\n<p><code>len(args.dos)</code> is then the number of characters in the string, and <code>args.dos[0]</code> is the first character.</p>\n\n<p>============</p>\n\n<p>If I define:</p>\n\n<pre><code>def get_dos(argv=None):\n    parser=argparse.ArgumentParser()\n    parser.add_argument('--dos', type=int, nargs='?')\n    args = parser.parse_args(argv)\n    chosen = args.dos\n    if chosen is not None:\n        chdos = 'at_dos%s.dat'%chosen\n    else:\n        chdos = ''\n    return chosen, chdos\n</code></pre>\n\n<p>these tests produce values which I think match your needs: </p>\n\n<pre><code>In [1042]: get_dos([])\nOut[1042]: (None, '')\n\nIn [1043]: get_dos(['--dos'])\nOut[1043]: (None, '')\n\nIn [1044]: get_dos(['--dos','123'])\nOut[1044]: (123, 'at_dos123.dat')\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2557, "user_id": 2005559, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/bc7f2b8ef12c422ea79863dfafd3c647?s=128&d=identicon&r=PG", "display_name": "BaRud", "link": "https://stackoverflow.com/users/2005559/barud"}, "is_accepted": true, "score": 0, "last_activity_date": 1467282936, "creation_date": 1467282936, "answer_id": 38120639, "question_id": 38109570, "link": "https://stackoverflow.com/questions/38109570/optional-nargs-variable-in-argparse/38120639#38120639", "title": "optional nargs variable in argparse", "body": "<p>thanks to all the people who replied, and specially @hpaulj. But none of them really solve my problem. So, I took other way. I am posting this here for completeness.</p>\n\n<pre><code>#!/usr/bin/python3\nimport argparse\n\nparser = argparse.ArgumentParser(description=\"output parser\")\ngroup = parser.add_mutually_exclusive_group()\ngroup.add_argument(\"--dos\", help=\"get DOSCAR for plot\",action='store_true')\nparser.add_argument(\"-n\", help=\"Showing last n line\",\n                    metavar='integer', type=int)\n\nargs = parser.parse_args()\nif args.dos:\n    if args.n:\n        chosen = int(args.n)\n        chdos = \"at_dos\"+str(args.n)+\".dat\"\n    else:\n        chosen = None\n    inpt = \"DOSY\"\n    print(inpt)\n    print(chosen)\n</code></pre>\n\n<p>which yields expected results properly:</p>\n\n<pre><code>$python3 tt.py --dos\nDOSY\nNone\n\n$python3 tt.py --dos -n 222\nDOSY\n222\n</code></pre>\n"}], "owner": {"reputation": 2557, "user_id": 2005559, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/bc7f2b8ef12c422ea79863dfafd3c647?s=128&d=identicon&r=PG", "display_name": "BaRud", "link": "https://stackoverflow.com/users/2005559/barud"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3021, "favorite_count": 2, "accepted_answer_id": 38120639, "answer_count": 3, "score": 4, "last_activity_date": 1467282936, "creation_date": 1467232499, "last_edit_date": 1467235548, "question_id": 38109570, "link": "https://stackoverflow.com/questions/38109570/optional-nargs-variable-in-argparse", "title": "optional nargs variable in argparse", "body": "<p>How I can do conditional loop with argparse with variable nargs? So, basically, it should run with or without argument.\nI am trying:</p>\n\n<pre><code>parser = argparse.ArgumentParser(description=\"output parser\")\ngroup = parser.add_mutually_exclusive_group()\ngroup.add_argument(\"--dos\", help=\"get DOSCAR for plot\",\n                   nargs=\"?\", metavar=(\"int\"))\nargs = parser.parse_args()\n\nif args.dos:    \n    if len(args.dos) &gt; 1:\n        chosen = int(args.dos[0])\n        chdos = \"at_dos\"+args.dos[0]+\".dat\"\n    else:\n        chosen = None\n\n    inpt = \"DOSY\"\n    print(chosen)\n    print(inpt)\n</code></pre>\n\n<p>Now, if I have variable, then its printing some value, wrong but some value:</p>\n\n<pre><code>$python3 vasp.py --dos 111\n111\nNone   # IT SHOULDN'T BE NONE\nDOSY\n</code></pre>\n\n<p>but nothing without argument.</p>\n\n<p>I have also tried with the normal sys.argv, as:</p>\n\n<pre><code>def get_dos():\n    if len(sys.argv) &gt; 2:\n        chosen = int(sys.argv[2])\n        chdos = \"at_dos\"+sys.argv[2]+\".dat\"\n    else:\n        chosen = None\n    inpt = \"DOSCAR\"\n    print(sys.argv)\n\n    print(args.dos)\n    print(chosen)\n    print(inpt)\n</code></pre>\n\n<p>in this case, when option is present, its giving correct result:</p>\n\n<pre><code>python3 vasp.py --dos 12\n['vasp.py', '--dos', '12']\n12\n12\nDOSCAR\n</code></pre>\n\n<p>but again, nothing without option:</p>\n\n<pre><code>$python3 vasp.py --dos\n</code></pre>\n\n<p>I have tried with hpaulj's suggestion. It gives:</p>\n\n<pre><code>$python3 tt.py --dos 12\nNamespace(dos='12')\n1\nDOSY\n</code></pre>\n\n<p>and without argument, its still not printing anything.</p>\n"}, {"tags": ["python", "freeze"], "comments": [{"owner": {"reputation": 1331, "user_id": 2860951, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xn9kj.jpg?s=128&g=1", "display_name": "Jordan Bonitatis", "link": "https://stackoverflow.com/users/2860951/jordan-bonitatis"}, "edited": false, "score": 0, "creation_date": 1467233300, "post_id": 38109506, "comment_id": 63653052, "body": "You have a lot of duplicated code; you can extract the rudundant code into helper methods (small functions) that you can pass in arguments"}, {"owner": {"reputation": 5109, "user_id": 2373748, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/moadr.png?s=128&g=1", "display_name": "galaxyan", "link": "https://stackoverflow.com/users/2373748/galaxyan"}, "edited": false, "score": 0, "creation_date": 1467233302, "post_id": 38109506, "comment_id": 63653055, "body": "if your code have no bug, try to disable gc and manually collect the garbage (if you are using 2.6)."}, {"owner": {"reputation": 3903, "user_id": 1434070, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/7uABI.jpg?s=128&g=1", "display_name": "fips", "link": "https://stackoverflow.com/users/1434070/fips"}, "edited": false, "score": 0, "creation_date": 1467233308, "post_id": 38109506, "comment_id": 63653062, "body": "Maybe try to break down the code to be able to isolate problem. Separate all those sections in different functions and add a decorator responsible for tracing, e.g. <code>timestamp - func name started - parameters</code> and <code>timestamp - func name ended - duration</code>. There could be an issue with the service you are calling that you are not handling gracefully, but it&#39;s hard to tell in a 500 line program!"}, {"owner": {"reputation": 21, "user_id": 6442217, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153696602823946/picture?type=large", "display_name": "Alex", "link": "https://stackoverflow.com/users/6442217/alex"}, "edited": false, "score": 0, "creation_date": 1467335219, "post_id": 38109506, "comment_id": 63702079, "body": "Hey guys,  thanks for the suggestions, I&#39;ll try them out and report back with what happens. Sorry about the messiness of the code, I know there&#39;s a ton of redundancy in there, I was going more for time than cleanliness. Clearly a bad in hind sight, lol"}], "answers": [{"tags": [], "owner": {"reputation": 8071, "user_id": 5230735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97305d39e366bd0cf7e0e9bf5b19c179?s=128&d=identicon&r=PG&f=1", "display_name": "ralf htp", "link": "https://stackoverflow.com/users/5230735/ralf-htp"}, "is_accepted": false, "score": 1, "last_activity_date": 1483869563, "last_edit_date": 1495540427, "creation_date": 1483869082, "answer_id": 41531407, "question_id": 38109506, "link": "https://stackoverflow.com/questions/38109506/python-program-freezes-when-running-for-a-few-days/41531407#41531407", "title": "python program freezes when running for a few days", "body": "<p>in the program is consumed too much RAM when  it collects a too large of feeds or if there are other active processes on your system (this is why the time to freeze differs), see <a href=\"https://ubuntuforums.org/showthread.php?t=2060615\" rel=\"nofollow noreferrer\">Why does a simple python script crash my system</a> </p>\n\n<p>The process in that your program runs stores the arrays and variables for the calculations in <em>process memory</em> which is ram</p>\n\n<p>you can fix this by forcing the program to use hard disk memory. </p>\n\n<p>For workarounds (<code>shelve</code>, <strong>periodically saving the collected feeds to a textfile</strong> (moves information from ram to rom and frees ram), ...) see the following links</p>\n\n<p><a href=\"https://stackoverflow.com/questions/10781741/memory-usage-how-to-free-memory\">memory usage, how to free memory</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/2670005/python-large-variable-ram-usage\">Python large variable RAM usage</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/3392663/i-need-to-free-up-ram-by-storing-a-python-dictionary-on-the-hard-drive-not-in-r\">I need to free up RAM by storing a Python dictionary on the hard drive, not in RAM. Is it possible?</a></p>\n"}], "owner": {"reputation": 21, "user_id": 6442217, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153696602823946/picture?type=large", "display_name": "Alex", "link": "https://stackoverflow.com/users/6442217/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 355, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1483869563, "creation_date": 1467232247, "question_id": 38109506, "link": "https://stackoverflow.com/questions/38109506/python-program-freezes-when-running-for-a-few-days", "title": "python program freezes when running for a few days", "body": "<p>Here's the Problem:</p>\n\n<p>I'm writing a python program that's purpose is to continuously collect news from RSS feeds. I want the program to collect the data for 1 week. The problem is that the program never makes it to the end of the week. Sometimes it freezes after running for several days, sometimes several hours and even just a few minutes. It always freezes, no errors. When I say freezing I mean the interpreter seems to still be running, in that I can't give it any additional commands. How can I solve this problem? </p>\n\n<p>I'll post the code below. Thanks guys!!</p>\n\n<pre><code>from goose import Goose\nfrom requests import get\nimport urllib2\nimport feedparser\nfrom urllib2 import urlopen\nimport pandas as pd\nimport numpy as np\nfrom bs4 import BeautifulSoup\nimport re\nimport datetime as dt\nimport time\nimport os\nSymbols=['AAPL','T','BA','XOM','GOOG','JPM','PG','WMT']\nurl='http://finance.yahoo.com/rss/headline?s='\n\nfor t in xrange(7):\n    AAPL=pd.DataFrame()\n    AAPL['Published']=\"\"\n    AAPL['Title']=\"\"\n    AAPL['link']=\"\"\n    AAPL['ID']=\"\"\n    AAPL['News']=\"\"\n\n    T=pd.DataFrame()\n    T['Published']=\"\"\n    T['Title']=\"\"\n    T['link']=\"\"\n    T['ID']=\"\"\n    T['News']=\"\"\n\n    BA=pd.DataFrame()\n    BA['Published']=\"\"\n    BA['Title']=\"\"\n    BA['link']=\"\"\n    BA['ID']=\"\"\n    BA['News']=\"\"\n\n    XOM=pd.DataFrame()\n    XOM['Published']=\"\"\n    XOM['Title']=\"\"\n    XOM['link']=\"\"\n    XOM['ID']=\"\"\n    XOM['News']=\"\"\n\n    GOOG=pd.DataFrame()\n    GOOG['Published']=\"\"\n    GOOG['Title']=\"\"\n    GOOG['link']=\"\"\n    GOOG['ID']=\"\"\n    GOOG['News']=\"\"\n\n    JPM=pd.DataFrame()\n    JPM['Published']=\"\"\n    JPM['Title']=\"\"\n    JPM['link']=\"\"\n    JPM['ID']=\"\"\n    JPM['News']=\"\"\n\n    PG=pd.DataFrame()\n    PG['Published']=\"\"\n    PG['Title']=\"\"\n    PG['link']=\"\"\n    PG['ID']=\"\"\n    PG['News']=\"\"\n\n    WMT=pd.DataFrame()\n    WMT['Published']=\"\"\n    WMT['Title']=\"\"\n    WMT['link']=\"\"\n    WMT['ID']=\"\"\n    WMT['News']=\"\"\n\n\n\n\n    DaysIDsAAPL=[]\n    DaysIDsT=[]\n    DaysIDsBA=[]\n    DaysIDsXOM=[]\n    DaysIDsGOOG=[]\n    DaysIDsJPM=[]\n    DaysIDsPG=[]\n    DaysIDsWMT=[]\n\n\n\n    count=0\n\n    AAPLCount=0\n    TCount=0\n    BACount=0\n    XOMCount=0\n    GOOGCount=0\n    JPMCount=0\n    PGCount=0\n    WMTCount=0\n\n    date=dt.date.today()\n\n    newpathAAPL = r'D:\\News Data\\AAPL\\\\'+str(t)\n    newpathT = r'D:\\News Data\\T\\\\'+str(t)\n    newpathBA = r'D:\\News Data\\BA\\\\'+str(t)\n    newpathXOM = r'D:\\News Data\\XOM\\\\'+str(t)\n    newpathGOOG = r'D:\\News Data\\GOOG\\\\'+str(t)\n    newpathJPM = r'D:\\News Data\\JPM\\\\'+str(t)\n    newpathPG = r'D:\\News Data\\PG\\\\'+str(t)\n    newpathWMT = r'D:\\News Data\\WMT\\\\'+str(t)\n    os.makedirs(newpathAAPL)\n    os.makedirs(newpathT)\n    os.makedirs(newpathBA)\n    os.makedirs(newpathXOM)\n    os.makedirs(newpathGOOG)\n    os.makedirs(newpathJPM)\n    os.makedirs(newpathPG)\n    os.makedirs(newpathWMT)\n    while dt.date.today()==date:\n        print \"Loop\"\n        try:\n        #AAPL inner most loop\n            d1=feedparser.parse(url+Symbols[0])  \n            for x in xrange(len(d1['entries'])):\n                if int(d1.entries[x]['id'][14:]) not in DaysIDsAAPL:\n                    DaysIDsAAPL.append(int(d1.entries[x]['id'][14:]))\n                    y = len(AAPL.index.tolist())\n                    m=re.search(r'\\*(.*)',d1.entries[x]['link'])\n                    z=re.search(r'\\?ru=yahoo\\?mod=yahoo_itp',m.group(1))\n                    if type(z) is not None:\n                        m=re.sub(r'\\?ru=yahoo\\?mod=yahoo_itp', '', m.group(1))\n                    AAPL.loc[y,'Title'] =d1.entries[x]['title'].encode('utf8')\n                    AAPL.loc[y,'link'] =m.encode('utf8')\n                    AAPL.loc[y,'Published'] =d1.entries[x]['published'].encode('utf8')\n                    AAPL.loc[y,'ID'] =int(d1.entries[x]['id'][14:])\n                    hdr = {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/39.0.2171.95 Safari/537.36'}\n                    page = get(m,headers=hdr)\n                    extractor = Goose()\n                    article = extractor.extract(raw_html=page.text)\n                    text = article.cleaned_text.encode('utf8')\n                    if text == '':\n                        try:\n                            url2 = m\n                            req = urllib2.Request(url2, None, hdr)\n                            html2 = urlopen(req).read().decode('utf8')\n                            raw = BeautifulSoup(html2,\"lxml\").get_text().encode('utf8')\n                            Text_file = open(newpathAAPL+r\"\\\\\"+str(AAPLCount)+\".txt\", \"w\")\n                            Text_file.write(raw)\n                            Text_file.close()\n                            AAPL.loc[y,'News'] = AAPLCount\n                            AAPLCount+=1\n                            AAPL=AAPL.fillna(\"\")\n                            AAPL.to_csv(newpathAAPL+r'\\Key.csv')\n                        except:\n                            print m\n                            print \"AAPL\"\n                    else:\n                        Text_file = open(newpathAAPL+r\"\\\\\"+str(AAPLCount)+\".txt\", \"w\")\n                        Text_file.write(text)\n                        Text_file.close()\n                        AAPL.loc[y,'News'] =AAPLCount\n                        AAPLCount+=1\n                        AAPL=AAPL.fillna(\"\")\n                        AAPL.to_csv(newpathAAPL+r'\\Key.csv')\n                    print \"AAPL\"\n\n            #T inner most loop\n            d2=feedparser.parse(url+Symbols[1])\n\n            for x in xrange(len(d2['entries'])):\n                if int(d2.entries[x]['id'][14:]) not in DaysIDsT:\n                    DaysIDsT.append(int(d2.entries[x]['id'][14:]))\n                    y = len(T.index.tolist())\n                    m=re.search(r'\\*(.*)',d2.entries[x]['link'])\n                    z=re.search(r'\\?ru=yahoo\\?mod=yahoo_itp',m.group(1))\n                    if type(z) is not None:\n                        m=re.sub(r'\\?ru=yahoo\\?mod=yahoo_itp', '', m.group(1))\n                    T.loc[y,'Title'] =d2.entries[x]['title'].encode('utf8')\n                    T.loc[y,'link'] =m.encode('utf8')\n                    T.loc[y,'Published'] =d2.entries[x]['published'].encode('utf8')\n                    T.loc[y,'ID'] =int(d2.entries[x]['id'][14:])\n                    hdr = {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/39.0.2171.95 Safari/537.36'}\n                    page = get(m,headers=hdr)\n                    extractor = Goose()\n                    article = extractor.extract(raw_html=page.text)\n                    text = article.cleaned_text.encode('utf8')\n                    if text == '':\n                        try:\n                            url2 = m\n                            req = urllib2.Request(url2, None, hdr)\n                            html2 = urlopen(req).read().decode('utf8')\n                            raw = BeautifulSoup(html2,\"lxml\").get_text().encode('utf8')\n                            Text_file = open(newpathT+r\"\\\\\"+str(TCount)+\".txt\", \"w\")\n                            Text_file.write(raw)\n                            Text_file.close()\n                            T.loc[y,'News'] = TCount\n                            TCount+=1\n                            T=T.fillna(\"\")\n                            T.to_csv(newpathT+r'\\Key.csv')\n                        except:\n                            print m\n                            print \"T\"\n                    else:\n                        Text_file = open(newpathT+r\"\\\\\"+str(TCount)+\".txt\", \"w\")\n                        Text_file.write(text)\n                        Text_file.close()\n                        T.loc[y,'News'] =TCount\n                        TCount+=1\n                        T=T.fillna(\"\")\n                        T.to_csv(newpathT+r'\\Key.csv')\n                    print \"T\"\n\n            #BA inner most loop\n            d3=feedparser.parse(url+Symbols[2])\n\n            for x in xrange(len(d3['entries'])):\n                if int(d3.entries[x]['id'][14:]) not in DaysIDsBA:\n                    DaysIDsBA.append(int(d3.entries[x]['id'][14:]))\n                    y = len(BA.index.tolist())\n                    m=re.search(r'\\*(.*)',d3.entries[x]['link'])\n                    z=re.search(r'\\?ru=yahoo\\?mod=yahoo_itp',m.group(1))\n                    if type(z) is not None:\n                        m=re.sub(r'\\?ru=yahoo\\?mod=yahoo_itp', '', m.group(1))\n                    BA.loc[y,'Title'] =d3.entries[x]['title'].encode('utf8')\n                    BA.loc[y,'link'] =m.encode('utf8')\n                    BA.loc[y,'Published'] =d3.entries[x]['published'].encode('utf8')\n                    BA.loc[y,'ID'] =int(d3.entries[x]['id'][14:])\n                    hdr = {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/39.0.2171.95 Safari/537.36'}\n                    page = get(m,headers=hdr)\n                    extractor = Goose()\n                    article = extractor.extract(raw_html=page.text)\n                    text = article.cleaned_text.encode('utf8')\n                    if text == '':\n                        try:\n                            url2 = m\n                            req = urllib2.Request(url2, None, hdr)\n                            html2 = urlopen(req).read().decode('utf8')\n                            raw = BeautifulSoup(html2,\"lxml\").get_text().encode('utf8')\n                            Text_file = open(newpathBA+r\"\\\\\"+str(BACount)+\".txt\", \"w\")\n                            Text_file.write(raw)\n                            Text_file.close()\n                            BA.loc[y,'News'] = BACount\n                            BACount+=1\n                            BA=BA.fillna(\"\")\n                            BA.to_csv(newpathBA+r'\\Key.csv')\n                        except:\n                            print m\n                            print \"BA\"\n                    else:\n                        Text_file = open(newpathBA+r\"\\\\\"+str(BACount)+\".txt\", \"w\")\n                        Text_file.write(text)\n                        Text_file.close()\n                        BA.loc[y,'News'] =BACount\n                        BACount+=1\n                        BA=BA.fillna(\"\")\n                        BA.to_csv(newpathBA+r'\\Key.csv')\n                    print \"BA\"\n\n            #XOM inner most loop\n            d4=feedparser.parse(url+Symbols[3])\n\n            for x in xrange(len(d4['entries'])):\n                if int(d4.entries[x]['id'][14:]) not in DaysIDsXOM:\n                    DaysIDsXOM.append(int(d4.entries[x]['id'][14:]))\n                    y = len(XOM.index.tolist())\n                    m=re.search(r'\\*(.*)',d4.entries[x]['link'])\n                    z=re.search(r'\\?ru=yahoo\\?mod=yahoo_itp',m.group(1))\n                    if type(z) is not None:\n                        m=re.sub(r'\\?ru=yahoo\\?mod=yahoo_itp', '', m.group(1))\n                    XOM.loc[y,'Title'] =d4.entries[x]['title'].encode('utf8')\n                    XOM.loc[y,'link'] =m.encode('utf8')\n                    XOM.loc[y,'Published'] =d4.entries[x]['published'].encode('utf8')\n                    XOM.loc[y,'ID'] =int(d4.entries[x]['id'][14:])\n                    hdr = {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/39.0.2171.95 Safari/537.36'}\n                    page = get(m,headers=hdr)\n                    extractor = Goose()\n                    article = extractor.extract(raw_html=page.text)\n                    text = article.cleaned_text.encode('utf8')\n                    if text == '':\n                        try:\n                            url2 = m\n                            req = urllib2.Request(url2, None, hdr)\n                            html2 = urlopen(req).read().decode('utf8')\n                            raw = BeautifulSoup(html2,\"lxml\").get_text().encode('utf8')\n                            Text_file = open(newpathXOM+r\"\\\\\"+str(XOMCount)+\".txt\", \"w\")\n                            Text_file.write(raw)\n                            Text_file.close()\n                            XOM.loc[y,'News'] = XOMCount\n                            XOMCount+=1\n                            XOM=XOM.fillna(\"\")\n                            XOM.to_csv(newpathXOM+r'\\Key.csv')\n                        except:\n                            print m\n                            print \"XOM\"\n                    else:\n                        Text_file = open(newpathXOM+r\"\\\\\"+str(XOMCount)+\".txt\", \"w\")\n                        Text_file.write(text)\n                        Text_file.close()\n                        XOM.loc[y,'News'] =XOMCount\n                        XOMCount+=1\n                        XOM=XOM.fillna(\"\")\n                        XOM.to_csv(newpathXOM+r'\\Key.csv')\n\n            #GOOG inner most loop\n            d5=feedparser.parse(url+Symbols[4])\n\n            for x in xrange(len(d5['entries'])):\n                if int(d5.entries[x]['id'][14:]) not in DaysIDsGOOG:\n                    DaysIDsGOOG.append(int(d5.entries[x]['id'][14:]))\n                    y = len(GOOG.index.tolist())\n                    m=re.search(r'\\*(.*)',d5.entries[x]['link'])\n                    z=re.search(r'\\?ru=yahoo\\?mod=yahoo_itp',m.group(1))\n                    if type(z) is not None:\n                        m=re.sub(r'\\?ru=yahoo\\?mod=yahoo_itp', '', m.group(1))\n                    GOOG.loc[y,'Title'] =d5.entries[x]['title'].encode('utf8')\n                    GOOG.loc[y,'link'] =m.encode('utf8')\n                    GOOG.loc[y,'Published'] =d5.entries[x]['published'].encode('utf8')\n                    GOOG.loc[y,'ID'] =int(d5.entries[x]['id'][14:])\n                    hdr = {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/39.0.2171.95 Safari/537.36'}\n                    page = get(m,headers=hdr)\n                    extractor = Goose()\n                    article = extractor.extract(raw_html=page.text)\n                    text = article.cleaned_text.encode('utf8')\n                    if text == '':\n                        try:\n                            url2 = m\n                            req = urllib2.Request(url2, None, hdr)\n                            html2 = urlopen(req).read().decode('utf8')\n                            raw = BeautifulSoup(html2,\"lxml\").get_text().encode('utf8')\n                            Text_file = open(newpathGOOG+r\"\\\\\"+str(GOOGCount)+\".txt\", \"w\")\n                            Text_file.write(raw)\n                            Text_file.close()\n                            GOOG.loc[y,'News'] = GOOGCount\n                            GOOGCount+=1\n                            GOOG=GOOG.fillna(\"\")\n                            GOOG.to_csv(newpathGOOG+r'\\Key.csv')\n                        except:\n                            print m\n                            print \"GOOG\"\n                    else:\n                        Text_file = open(newpathGOOG+r\"\\\\\"+str(GOOGCount)+\".txt\", \"w\")\n                        Text_file.write(text)\n                        Text_file.close()\n                        GOOG.loc[y,'News'] =GOOGCount\n                        GOOGCount+=1\n                        GOOG=GOOG.fillna(\"\")\n                        GOOG.to_csv(newpathGOOG+r'\\Key.csv')\n                    print \"GOOG\"\n\n            #JPM inner most loop\n            d6=feedparser.parse(url+Symbols[5])\n\n            for x in xrange(len(d6['entries'])):\n                if int(d6.entries[x]['id'][14:]) not in DaysIDsJPM:\n                    DaysIDsJPM.append(int(d6.entries[x]['id'][14:]))\n                    y = len(JPM.index.tolist())\n                    m=re.search(r'\\*(.*)',d6.entries[x]['link'])\n                    z=re.search(r'\\?ru=yahoo\\?mod=yahoo_itp',m.group(1))\n                    if type(z) is not None:\n                        m=re.sub(r'\\?ru=yahoo\\?mod=yahoo_itp', '', m.group(1))\n                    JPM.loc[y,'Title'] =d6.entries[x]['title'].encode('utf8')\n                    JPM.loc[y,'link'] =m.encode('utf8')\n                    JPM.loc[y,'Published'] =d6.entries[x]['published'].encode('utf8')\n                    JPM.loc[y,'ID'] =int(d6.entries[x]['id'][14:])\n                    hdr = {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/39.0.2171.95 Safari/537.36'}\n                    page = get(m,headers=hdr)\n                    extractor = Goose()\n                    article = extractor.extract(raw_html=page.text)\n                    text = article.cleaned_text.encode('utf8')\n                    if text == '':\n                        try:\n                            url2 = m\n                            req = urllib2.Request(url2, None, hdr)\n                            html2 = urlopen(req).read().decode('utf8')\n                            raw = BeautifulSoup(html2,\"lxml\").get_text().encode('utf8')\n                            Text_file = open(newpathJPM+r\"\\\\\"+str(JPMCount)+\".txt\", \"w\")\n                            Text_file.write(raw)\n                            Text_file.close()\n                            JPM.loc[y,'News'] = JPMCount\n                            JPMCount+=1\n                            JPM=JPM.fillna(\"\")\n                            JPM.to_csv(newpathJPM+r'\\Key.csv')\n                        except:\n                            print m\n                            print \"JPM\"\n                    else:\n                        Text_file = open(newpathJPM+r\"\\\\\"+str(JPMCount)+\".txt\", \"w\")\n                        Text_file.write(text)\n                        Text_file.close()\n                        JPM.loc[y,'News'] =JPMCount\n                        JPMCount+=1\n                        JPM=JPM.fillna(\"\")\n                        JPM.to_csv(newpathJPM+r'\\Key.csv')\n                    print \"JPM\"\n\n\n            #PG inner most loop\n            d7=feedparser.parse(url+Symbols[6])\n\n            for x in xrange(len(d7['entries'])):\n                if int(d7.entries[x]['id'][14:]) not in DaysIDsPG:\n                    DaysIDsPG.append(int(d7.entries[x]['id'][14:]))\n                    y = len(PG.index.tolist())\n                    m=re.search(r'\\*(.*)',d7.entries[x]['link'])\n                    z=re.search(r'\\?ru=yahoo\\?mod=yahoo_itp',m.group(1))\n                    if type(z) is not None:\n                        m=re.sub(r'\\?ru=yahoo\\?mod=yahoo_itp', '', m.group(1))\n                    PG.loc[y,'Title'] =d7.entries[x]['title'].encode('utf8')\n                    PG.loc[y,'link'] =m.encode('utf8')\n                    PG.loc[y,'Published'] =d7.entries[x]['published'].encode('utf8')\n                    PG.loc[y,'ID'] =int(d7.entries[x]['id'][14:])\n                    hdr = {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/39.0.2171.95 Safari/537.36'}\n                    page = get(m,headers=hdr)\n                    extractor = Goose()\n                    article = extractor.extract(raw_html=page.text)\n                    text = article.cleaned_text.encode('utf8')\n                    if text == \"\":\n                        try:\n                            url2 = m\n                            req = urllib2.Request(url2, None, hdr)\n                            html2 = urlopen(req).read().decode('utf8')\n                            raw = BeautifulSoup(html2,\"lxml\").get_text().encode('utf8')\n                            Text_file = open(newpathPG+r\"\\\\\"+str(PGCount)+\".txt\", \"w\")\n                            Text_file.write(raw)\n                            Text_file.close()\n                            PG.loc[y,'News'] = PGCount\n                            PGCount+=1\n                            PG=PG.fillna(\"\")\n                            PG.to_csv(newpathPG+r'\\Key.csv')\n                        except:\n                            print m\n                            print \"PG\"\n                    else:\n                        Text_file = open(newpathPG+r\"\\\\\"+str(PGCount)+\".txt\", \"w\")\n                        Text_file.write(text)\n                        Text_file.close()\n                        PG.loc[y,'News'] =PGCount\n                        PGCount+=1\n                        PG=PG.fillna(\"\")\n                        PG.to_csv(newpathPG+r'\\Key.csv')\n                    print \"PG\"\n\n\n            #WMT inner most loop\n            d8=feedparser.parse(url+Symbols[7])\n\n            for x in xrange(len(d8['entries'])):\n                if int(d8.entries[x]['id'][14:]) not in DaysIDsWMT:\n                    DaysIDsWMT.append(int(d8.entries[x]['id'][14:]))\n                    y = len(WMT.index.tolist())\n                    m=re.search(r'\\*(.*)',d8.entries[x]['link'])\n                    z=re.search(r'\\?ru=yahoo\\?mod=yahoo_itp',m.group(1))\n                    if type(z) is not None:\n                        m=re.sub(r'\\?ru=yahoo\\?mod=yahoo_itp', '', m.group(1))\n                    WMT.loc[y,'Title'] =d8.entries[x]['title'].encode('utf8')\n                    WMT.loc[y,'link'] =m.encode('utf8')\n                    WMT.loc[y,'Published'] =d8.entries[x]['published'].encode('utf8')\n                    WMT.loc[y,'ID'] =int(d8.entries[x]['id'][14:])\n                    hdr = {'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/39.0.2171.95 Safari/537.36'}\n                    page = get(m,headers=hdr)\n                    extractor = Goose()\n                    article = extractor.extract(raw_html=page.text)\n                    text = article.cleaned_text.encode('utf8')\n                    if text == \"\":\n                        try:\n                            url2 = m\n                            req = urllib2.Request(url2, None, hdr)\n                            html2 = urlopen(req).read().decode('utf8')\n                            raw = BeautifulSoup(html2,\"lxml\").get_text().encode('utf8')\n                            Text_file = open(newpathWMT+r\"\\\\\"+str(WMTCount)+\".txt\", \"w\")\n                            Text_file.write(raw)\n                            Text_file.close()\n                            WMT.loc[y,'News'] = WMTCount\n                            WMTCount+=1\n                            WMT=WMT.fillna(\"\")\n                            WMT.to_csv(newpathWMT+r'\\Key.csv')\n                        except:\n                            print m\n                            print \"WMT\"\n                    else:\n                        Text_file = open(newpathWMT+r\"\\\\\"+str(WMTCount)+\".txt\", \"w\")\n                        Text_file.write(text)\n                        Text_file.close()\n                        WMT.loc[y,'News'] =WMTCount\n                        WMTCount+=1\n                        WMT=WMT.fillna(\"\")\n                        WMT.to_csv(newpathWMT+r'\\Key.csv')\n                    print \"WMT\"       \n            count+=1\n            print count\n            time.sleep(1)\n        except:\n            print \"Error\"\n    AAPL=AAPL.fillna(\"\")\n    AAPL.to_csv(newpathAAPL+r'\\Key.csv')\n    T=T.fillna(\"\")\n    T.to_csv(newpathT+r'\\Key.csv')\n    BA=BA.fillna(\"\")\n    BA.to_csv(newpathBA+r'\\Key.csv')\n    XOM=XOM.fillna(\"\")\n    XOM.to_csv(newpathXOM+r'\\Key.csv')\n    GOOG=GOOG.fillna(\"\")\n    GOOG.to_csv(newpathGOOG+r'\\Key.csv')\n    JPM=JPM.fillna(\"\")\n    JPM.to_csv(newpathJPM+r'\\Key.csv')\n    PG=PG.fillna(\"\")\n    PG.to_csv(newpathPG+r'\\Key.csv')\n    WMT=WMT.fillna(\"\")\n    WMT.to_csv(newpathWMT+r'\\Key.csv')\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 8538, "user_id": 3059812, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/UaU9b.jpg?s=128&g=1", "display_name": "Morgan Thrapp", "link": "https://stackoverflow.com/users/3059812/morgan-thrapp"}, "edited": false, "score": 0, "creation_date": 1467232358, "post_id": 38109499, "comment_id": 63652562, "body": "<code>any(word in start_question for word in (&#39;D:\\Program Files (x86)\\PythonProgramming\\python.txt&#39;))</code> That does not do what you think it does. You&#39;re checking if any of the letters in the literal string <code>&#39;D:\\Program Files (x86)\\PythonProgramming\\python.txt&#39;</code> are in <code>start_question</code>. I think you need to reread the docs on how to use <code>with</code>."}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 6454566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abfc26d99f1dabaeddd21c06e33b07f7?s=128&d=identicon&r=PG&f=1", "display_name": "Callum", "link": "https://stackoverflow.com/users/6454566/callum"}, "edited": false, "score": 0, "creation_date": 1467233305, "post_id": 38109548, "comment_id": 63653058, "body": "hello, i now cant find a way to give a yes response.I have reformatted my .txt and still nothing. Also when you edited my program did you just give my file a variable name. As you added a F1 at the end of my code after a as."}, {"owner": {"reputation": 71821, "user_id": 57191, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1186a46e65dbea4c8900d524c613f926?s=128&d=identicon&r=PG", "display_name": "cwallenpoole", "link": "https://stackoverflow.com/users/57191/cwallenpoole"}, "reply_to_user": {"reputation": 9, "user_id": 6454566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abfc26d99f1dabaeddd21c06e33b07f7?s=128&d=identicon&r=PG&f=1", "display_name": "Callum", "link": "https://stackoverflow.com/users/6454566/callum"}, "edited": false, "score": 0, "creation_date": 1467293991, "post_id": 38109548, "comment_id": 63680816, "body": "@Callum Look again. <code>with open(&lt;str&gt;) as fl:</code> assigns the file pointer to fl."}], "tags": [], "owner": {"reputation": 71821, "user_id": 57191, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1186a46e65dbea4c8900d524c613f926?s=128&d=identicon&r=PG", "display_name": "cwallenpoole", "link": "https://stackoverflow.com/users/57191/cwallenpoole"}, "is_accepted": false, "score": 1, "last_activity_date": 1467232407, "creation_date": 1467232407, "answer_id": 38109548, "question_id": 38109499, "link": "https://stackoverflow.com/questions/38109499/python-txt-file-is-identifying-one-letter-at-a-time-instead-of-a-word-in-a-txt/38109548#38109548", "title": "python .txt file is identifying one letter at a time instead of a word in a .txt", "body": "<p>You're looking through the string of the file path, not the contents.</p>\n\n<p>To loop through the file, you'd want to do something like this:</p>\n\n<pre><code>with open('D:\\Program Files (x86)\\Python Programming\\python.txt') as fl:\n  if any(word in start_question for word in fl):\n      print(\"yes\")\n  else:\n      print(\"no\")\n</code></pre>\n\n<p>But there is another problem, too. If your file is:</p>\n\n<pre><code>cat,dog,pig\n</code></pre>\n\n<p>And your input is <code>cat</code>, then you'll always get <code>no</code>.</p>\n\n<p>Why?</p>\n\n<p>Because you're looking for contents of lines in a file. This means you're seeing </p>\n\n<pre><code>if any('cat,dog,pig' in 'cat')\n</code></pre>\n\n<p>That doesn't work.</p>\n\n<p>You'll need to format your file:</p>\n\n<pre><code>cat\ndog\npig\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 6454566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abfc26d99f1dabaeddd21c06e33b07f7?s=128&d=identicon&r=PG&f=1", "display_name": "Callum", "link": "https://stackoverflow.com/users/6454566/callum"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1467232407, "creation_date": 1467232226, "question_id": 38109499, "link": "https://stackoverflow.com/questions/38109499/python-txt-file-is-identifying-one-letter-at-a-time-instead-of-a-word-in-a-txt", "title": "python .txt file is identifying one letter at a time instead of a word in a .txt", "body": "<p>first i wold like to say im a very basic programmer so if you can please try not to be complicated however anything is helpful.</p>\n\n<p>I have a .txt file to define a keyword list eg:</p>\n\n<pre><code>pig,dog,cat\n</code></pre>\n\n<p>My real list is much bigger but has the same format.</p>\n\n<p>I want the user to input something and if the program detects one of the words which the user imputed and what the .txt file has it common it will give a response. If it doesn't find one of the words if gives a different response.</p>\n\n<pre><code>start_question = str(input(\"keywords are pig , cat , dog \"))\n\n\nwith open('D:\\Program Files (x86)\\Python Programming\\python.txt'):\n   if any(word in start_question for word in ('D:\\Program Files (x86)\\PythonProgramming\\python.txt')):\n   print (\"yes\")\n\n\nelse:\n    print (\"no\")\n</code></pre>\n\n<p>Now the file successfully opens but instead of finding words in comomon it finds letters in common. So if i input 'p' it will still say 'yes' however i want it to say no.</p>\n\n<p>Thankyou.</p>\n"}, {"tags": ["python", "tensorflow"], "answers": [{"comments": [{"owner": {"reputation": 3689, "user_id": 1123905, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a6759dcef8e5aad4e77509e5479b9823?s=128&d=identicon&r=PG", "display_name": "BigBoy1337", "link": "https://stackoverflow.com/users/1123905/bigboy1337"}, "edited": false, "score": 0, "creation_date": 1467235684, "post_id": 38110031, "comment_id": 63654182, "body": "Ill remove that print statement because its probably confusing. Can you put your answer in code form? Im not entirely sure what you mean"}, {"owner": {"reputation": 216, "user_id": 6504341, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/9150d96d910bb2d671574762fe71b88a?s=128&d=identicon&r=PG&f=1", "display_name": "flobotics robotics", "link": "https://stackoverflow.com/users/6504341/flobotics-robotics"}, "reply_to_user": {"reputation": 3689, "user_id": 1123905, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a6759dcef8e5aad4e77509e5479b9823?s=128&d=identicon&r=PG", "display_name": "BigBoy1337", "link": "https://stackoverflow.com/users/1123905/bigboy1337"}, "edited": false, "score": 0, "creation_date": 1467236467, "post_id": 38110031, "comment_id": 63654541, "body": "print (sess.run(train_step,feed_dict={x:x y_:some-value}))"}, {"owner": {"reputation": 3689, "user_id": 1123905, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a6759dcef8e5aad4e77509e5479b9823?s=128&d=identicon&r=PG", "display_name": "BigBoy1337", "link": "https://stackoverflow.com/users/1123905/bigboy1337"}, "edited": false, "score": 0, "creation_date": 1467240149, "post_id": 38110031, "comment_id": 63655981, "body": "what would some-value be in this case? This is what I am trying to get it to predict."}, {"owner": {"reputation": 216, "user_id": 6504341, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/9150d96d910bb2d671574762fe71b88a?s=128&d=identicon&r=PG&f=1", "display_name": "flobotics robotics", "link": "https://stackoverflow.com/users/6504341/flobotics-robotics"}, "reply_to_user": {"reputation": 3689, "user_id": 1123905, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a6759dcef8e5aad4e77509e5479b9823?s=128&d=identicon&r=PG", "display_name": "BigBoy1337", "link": "https://stackoverflow.com/users/1123905/bigboy1337"}, "edited": false, "score": 0, "creation_date": 1467286076, "post_id": 38110031, "comment_id": 63675139, "body": "it needs to be a value of:    y_ = tf.placeholder(tf.float32, [None, 10])"}], "tags": [], "owner": {"reputation": 216, "user_id": 6504341, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/9150d96d910bb2d671574762fe71b88a?s=128&d=identicon&r=PG&f=1", "display_name": "flobotics robotics", "link": "https://stackoverflow.com/users/6504341/flobotics-robotics"}, "is_accepted": false, "score": 0, "last_activity_date": 1467234374, "last_edit_date": 1592644375, "creation_date": 1467234374, "answer_id": 38110031, "question_id": 38109489, "link": "https://stackoverflow.com/questions/38109489/how-to-test-a-model-in-tensor-flow/38110031#38110031", "title": "How to test a model in tensor flow?", "body": "<p>your tf.Session.run op needs a fetches\ntf.Session.run(fetches, feed_dict=None, options=None, run_metadata=None)</p>\n<p><a href=\"https://www.tensorflow.org/versions/r0.9/api_docs/python/client.html#session-management\" rel=\"nofollow noreferrer\">https://www.tensorflow.org/versions/r0.9/api_docs/python/client.html#session-management</a></p>\n<p>print (sess.run(train_step,feed_dict={x:x}))   but it also needs a feed_dict for y_</p>\n<p>what do you mean with:</p>\n<h1>print the random values that we sample</h1>\n"}, {"tags": [], "owner": {"reputation": 432, "user_id": 3075902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63da4a062fc2ee1303b8b1215fa29f1b?s=128&d=identicon&r=PG&f=1", "display_name": "chillinger", "link": "https://stackoverflow.com/users/3075902/chillinger"}, "is_accepted": false, "score": 3, "last_activity_date": 1471983747, "creation_date": 1471983747, "answer_id": 39110059, "question_id": 38109489, "link": "https://stackoverflow.com/questions/38109489/how-to-test-a-model-in-tensor-flow/39110059#39110059", "title": "How to test a model in tensor flow?", "body": "<p>You're getting the <code>TypeError</code> because you are using a (mutable) <code>numpy.ndarray</code> as a key for your dictionary but the key should be a <code>tf.placeholder</code> and the value a <code>numpy</code> array. </p>\n\n<p>The following adjustment fixes this problem:</p>\n\n<pre><code>x_placeholder = tf.placeholder(tf.float32, [None, 784])\n# ...\nx = np.reshape(greyscale_expanded,(1,784))\n# ...\nprint(sess.run([inference_step], feed_dict={x_placeholder:x})) \n</code></pre>\n\n<p>If you just want to perform inference on your model, this will print a <code>numpy</code> array with the predictions.</p>\n\n<p>If you want to evaluate your model (for example compute the accuracy) you also need to feed in the corresponding ground truth labels <code>y</code> as in:</p>\n\n<pre><code>accuracy = sess.run([accuracy_op], feed_dict={x_placeholder:x, y_placeholder:y}\n</code></pre>\n\n<p>In your case, the <code>accuracy_op</code> could be defined as follows:</p>\n\n<pre><code>correct_predictions = tf.equal(tf.argmax(predictions, 1), tf.cast(labels, tf.int64))\naccuracy_op = tf.reduce_mean(tf.cast(correct_predictions, tf.float32))\n</code></pre>\n\n<p>Here, <code>predictions</code> is the output tensor of your model.</p>\n"}], "owner": {"reputation": 3689, "user_id": 1123905, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a6759dcef8e5aad4e77509e5479b9823?s=128&d=identicon&r=PG", "display_name": "BigBoy1337", "link": "https://stackoverflow.com/users/1123905/bigboy1337"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10688, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1471983747, "creation_date": 1467232191, "last_edit_date": 1467235707, "question_id": 38109489, "link": "https://stackoverflow.com/questions/38109489/how-to-test-a-model-in-tensor-flow", "title": "How to test a model in tensor flow?", "body": "<p>I'm following this tutorial: </p>\n\n<p><a href=\"https://www.tensorflow.org/versions/r0.9/tutorials/mnist/beginners/index.html#mnist-for-ml-beginners\" rel=\"nofollow\">https://www.tensorflow.org/versions/r0.9/tutorials/mnist/beginners/index.html#mnist-for-ml-beginners</a></p>\n\n<p>What I want to be able to do is pass in a test image x - as a numpy array, and see the resulting softmax classification values - perhaps as another numpy array. Everything I can find online about testing tensor flow models works by passing in test values and test labels and the outputting the accuracy. In my case, I want to output the model labels just based on the test values. </p>\n\n<p>This is what Im trying: \n    import tensorflow as tf\n    import numpy as np\n    from skimage import color,io</p>\n\n<pre><code>from tensorflow.examples.tutorials.mnist import input_data\nmnist = input_data.read_data_sets(\"MNIST_data/\", one_hot=True)\n\nx = tf.placeholder(tf.float32, [None, 784])\nW = tf.Variable(tf.zeros([784, 10]))\nb = tf.Variable(tf.zeros([10]))\ny = tf.nn.softmax(tf.matmul(x, W) + b)\ny_ = tf.placeholder(tf.float32, [None, 10])\ncross_entropy = tf.reduce_mean(-tf.reduce_sum(y_ * tf.log(y), reduction_indices=[1]))\ntrain_step = tf.train.GradientDescentOptimizer(0.5).minimize(cross_entropy)\ninit = tf.initialize_all_variables()\nsess = tf.Session()\nsess.run(init)\n\nfor i in range(1000):\n  batch_xs, batch_ys = mnist.train.next_batch(100)\n  sess.run(train_step, feed_dict={x: batch_xs, y_: batch_ys})\n\n#so now its trained successfully, and W and b should be the stored \"model\" \n\n#now to load in a test image\n\ngreyscale_test = color.rgb2gray(io.imread('4.jpeg'))\ngreyscale_expanded = np.expand_dims(greyscale_test,axis=0)    #now shape (1,28,28)\nx = np.reshape(greyscale_expanded,(1,784))     #now same dimensions as mnist.train.images\n\n#initialize the variable\ninit_op = tf.initialize_all_variables()\n\n#run the graph\nwith tf.Session() as sess:\n    sess.run(init_op) #execute init_op\n    print (sess.run(feed_dict={x:x}))    #this is pretty much just a shot in the dark. What would go here?\n</code></pre>\n\n<p>Right now it results in this: </p>\n\n<pre><code>TypeError                                 Traceback (most recent call last)\n&lt;ipython-input-116-f232a17507fb&gt; in &lt;module&gt;()\n     36     sess.run(init_op) #execute init_op\n---&gt; 37     print (sess.run(feed_dict={x:x}))    #this is pretty much just a shot in the dark. What would go here?\n\nTypeError: unhashable type: 'numpy.ndarray'\n</code></pre>\n\n<p>So when training, the sess.run is passed a train_step and a feed_dict. When I am trying to evaluate a tensor x, would this go in the feed dict? Would I even use sess.run?(seems I have to), but what would the train_step be? Is there a \"test_step\" or \"evaluate_step\"? </p>\n"}, {"tags": ["python", "emacs", "module", "installation"], "comments": [{"owner": {"reputation": 26589, "user_id": 1032785, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/30816b3d787c2bd9d6f036318304f225?s=128&d=identicon&r=PG", "display_name": "jordanm", "link": "https://stackoverflow.com/users/1032785/jordanm"}, "edited": false, "score": 1, "creation_date": 1467232048, "post_id": 38109391, "comment_id": 63652414, "body": "Killed indicates that something sent it <code>SIGKILL</code>. This is usually the kernel due to machine running out of memory. You can verify by inspecting the output of <code>dmesg</code>."}, {"owner": {"reputation": 1096, "user_id": 6061947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99f89bd4c6b19d14dc3d682c08242cc4?s=128&d=identicon&r=PG&f=1", "display_name": "Cory Shay", "link": "https://stackoverflow.com/users/6061947/cory-shay"}, "edited": false, "score": 1, "creation_date": 1467232140, "post_id": 38109391, "comment_id": 63652464, "body": "Do you have the following dependencies installed?  <code>scipy &gt;= 0.11.0 cython &gt;= 0.20.x matplotlib &gt;= 1.3.x</code> Taken from <a href=\"http://despotic.readthedocs.io/en/latest/installation.html#requirements-and-dependencies\" rel=\"nofollow noreferrer\">despotic.readthedocs.io</a>"}, {"owner": {"reputation": 1, "user_id": 6530313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5v72l.jpg?s=128&g=1", "display_name": "Jenny Calahan", "link": "https://stackoverflow.com/users/6530313/jenny-calahan"}, "edited": false, "score": 0, "creation_date": 1467232801, "post_id": 38109391, "comment_id": 63652789, "body": "Everything is updated to the newest version, and after &#39;dmesg&#39; it says that I am out of memory. Is there an easy way to increase my storage, or do I need to create a new virtual machine? (I&#39;m using Ubuntu on a virtual machine)"}, {"owner": {"reputation": 1096, "user_id": 6061947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99f89bd4c6b19d14dc3d682c08242cc4?s=128&d=identicon&r=PG&f=1", "display_name": "Cory Shay", "link": "https://stackoverflow.com/users/6061947/cory-shay"}, "edited": false, "score": 0, "creation_date": 1467233708, "post_id": 38109391, "comment_id": 63653268, "body": "What virtual machine software are you using? Virtualbox, VmWare Workstation/ESX, etc. You should be able to expand the memory of the machine within the settings for the virtual machine. The vm will usually need to be shut down in order for the settings to take affect."}], "owner": {"reputation": 1, "user_id": 6530313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5v72l.jpg?s=128&g=1", "display_name": "Jenny Calahan", "link": "https://stackoverflow.com/users/6530313/jenny-calahan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1467231804, "creation_date": 1467231804, "question_id": 38109391, "link": "https://stackoverflow.com/questions/38109391/installing-file-with-pyx-files-replaced-with-c-then-is-killed", "title": "Installing file with .pyx files replaced with .c then is killed", "body": "<p>I am trying to set up the module Despotic: <a href=\"https://bitbucket.org/krumholz/despotic\" rel=\"nofollow\">https://bitbucket.org/krumholz/despotic</a> and I have reached the point where I downloaded the repository and am trying to run the command: python setup.py install, and at first, it gave the error .pyx file type not known. That file had a .c file with the same name, so I went into the setup.py file and changed teh .pyx to .c and now when I try to install it, it spits out this:</p>\n\n<p>install\n<em>several seconds pass</em></p>\n\n<p>[3]+   Done            emacs setup.py</p>\n\n<p>Killed</p>\n\n<p>And that is it. I just need to install this module and I feel like I am so close. I just downloaded a virtual machine, so I've been downloading various programs as they become needed (numpy, scipy, matplotlib, for example), so maybe I am missing a program that is keeping despotic from working? I installed cython and pyrex hoping it would fix the fact that it didn't understand .pyx files, but that didn't work. What is going wrong and how can I fix it? Thanks for any help!</p>\n"}, {"tags": ["python", "sqlalchemy"], "owner": {"reputation": 2956, "user_id": 272689, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d765f09f68f08a92a904571e7244fa87?s=128&d=identicon&r=PG", "display_name": "vimalloc", "link": "https://stackoverflow.com/users/272689/vimalloc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 194, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1467240783, "creation_date": 1467231754, "last_edit_date": 1467240783, "question_id": 38109375, "link": "https://stackoverflow.com/questions/38109375/sqlalchemy-association-proxy-and-no-autoflush", "title": "Sqlalchemy association proxy and no_autoflush", "body": "<p>I'm trying to figure out why I need to use a no_autoflush block when inserting data into an association proxy if the association proxy data has been accessed first. An example of this is bellow (using MySQL):</p>\n\n<pre><code>from sqlalchemy import create_engine, Integer, Column, String, ForeignKey, UniqueConstraint\nfrom sqlalchemy.ext.associationproxy import association_proxy\nfrom sqlalchemy.ext.declarative import declarative_base\nfrom sqlalchemy.orm import sessionmaker, relationship, scoped_session\n\nBase = declarative_base()\nengine = create_engine('{}://{}:{}@{}/{}'.format(...))\nsession_factory = sessionmaker(bind=engine)\nSession = scoped_session(session_factory)\n\nclass DomainModel(Base):\n    __tablename__ = 'domains'\n    id = Column(Integer, primary_key=True)\n    name = Column(String(255), nullable=False, unique=True)\n    domains_to_servers = relationship(\"DomainServerModel\", back_populates=\"domain\")\n    servers = association_proxy('domains_to_servers', 'server',\n                                creator=lambda s: DomainServerModel(server=s))\n\n\nclass ServerModel(Base):\n    __tablename__ = 'servers'\n    id = Column(Integer, primary_key=True)\n    name = Column(String(128), nullable=False, unique=True, index=True)\n    domains_to_servers = relationship(\"DomainServerModel\", back_populates=\"server\")\n    domains = association_proxy('domains_to_servers', 'domain',\n                                creator=lambda d: DomainServerModel(domain=d))\n\n\nclass DomainServerModel(Base):\n    __tablename__ = 'domains_to_servers'\n    id = Column(Integer, primary_key=True)\n    domain_id = Column(Integer, ForeignKey('domains.id'), nullable=False)\n    server_id = Column(Integer, ForeignKey('servers.id'), nullable=False)\n    server = relationship('ServerModel', back_populates=\"domains_to_servers\")\n    domain = relationship('DomainModel', back_populates=\"domains_to_servers\")\n\n\ndef test():\n     session = Session()\n     with session.no_autoflush:\n        s = session.query(ServerModel).filter_by(name='test.com').one()\n        print(s.domains)\n        d = DomainModel(name='test1.com')\n        session.add(d)\n        session.commit()\n        s.domains.append(d)\n        session.commit()\n\nif __name__ == '__main__':\n    Base.metadata.drop_all(engine)\n    Base.metadata.create_all(engine)\n    session = Session()\n    session.add(ServerModel(name='test.com'))\n    session.commit()\n    test()\n</code></pre>\n\n<p>I'm trying to add a new domain_to_server mapping via the server/domain association proxy. If I don't access the association proxy first, ie remove the print statement in test(), then I can add the domain without needing the session.no_autoflush block. But with the print statement in there, it will fail without the session.no_autoflush block with an IntegrityError, saying that server_id cannot be null in the domains to servers table.</p>\n\n<p>I'm trying to figure out why the no_autoflush block is needed here. I don't see any mention of it in the association_proxy docs. Is this simply the way it is, and all inserts into an association_proxy should to happen in a no_autoflush bock in case it has been accessed prior to the insert?</p>\n"}, {"tags": ["python", "os.walk"], "comments": [{"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 1, "creation_date": 1467232112, "post_id": 38109351, "comment_id": 63652448, "body": "Why are you walking each directory <i>twice</i>? You call <code>walk()</code> again."}, {"owner": {"reputation": 18703, "user_id": 2912340, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/ddQ02.jpg?s=128&g=1", "display_name": "\u0141ukasz Rogalski", "link": "https://stackoverflow.com/users/2912340/%c5%81ukasz-rogalski"}, "edited": false, "score": 1, "creation_date": 1467232146, "post_id": 38109351, "comment_id": 63652469, "body": "Do you understand a difference between <code>os.listdir</code> and <code>os.walk</code>? Second one does recursion for you. Nested <code>walk()</code> calls looks very suspicious."}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1467232545, "post_id": 38109351, "comment_id": 63652648, "body": "Also, please post actual code; the code you posted is not valid Python; the path is not a quoted string for example. With errors like that it is hard to make out what other errors you put into your post that are not in your real code. I am assuming <code>os.walk()</code> and <code>walk()</code> are the same function, but can&#39;t be sure."}, {"owner": {"reputation": 4676, "user_id": 30105, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/a1dc4bddf38de8351ae70e98845242e9?s=128&d=identicon&r=PG", "display_name": "PyNEwbie", "link": "https://stackoverflow.com/users/30105/pynewbie"}, "edited": false, "score": 0, "creation_date": 1467232745, "post_id": 38109351, "comment_id": 63652757, "body": "Give me a minute, it is the code, you are correct os.walk() and walk() are the same - done I imported the path in my original code (it was a variable) and just forgot to quote here."}], "answers": [{"comments": [{"owner": {"reputation": 4676, "user_id": 30105, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/a1dc4bddf38de8351ae70e98845242e9?s=128&d=identicon&r=PG", "display_name": "PyNEwbie", "link": "https://stackoverflow.com/users/30105/pynewbie"}, "edited": false, "score": 0, "creation_date": 1467234374, "post_id": 38109720, "comment_id": 63653596, "body": "You are saying that when it throws off a resource_id directory that then automatically gets walked - forgive my language so all of the YYYY directories are then walked . . .  this helps me understand why wild cards are not built into os.walk - they are not needed, instead you test the output"}, {"owner": {"reputation": 4676, "user_id": 30105, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/a1dc4bddf38de8351ae70e98845242e9?s=128&d=identicon&r=PG", "display_name": "PyNEwbie", "link": "https://stackoverflow.com/users/30105/pynewbie"}, "edited": false, "score": 0, "creation_date": 1467234910, "post_id": 38109720, "comment_id": 63653835, "body": "@MartijinPieters - can you edit this to explain why I had exactly the 4 dupes in that particular order?"}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "reply_to_user": {"reputation": 4676, "user_id": 30105, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/a1dc4bddf38de8351ae70e98845242e9?s=128&d=identicon&r=PG", "display_name": "PyNEwbie", "link": "https://stackoverflow.com/users/30105/pynewbie"}, "edited": false, "score": 1, "creation_date": 1467235311, "post_id": 38109720, "comment_id": 63654029, "body": "@PyNEwbie: <code>os.walk()</code> walks your tree depth-first and it depends on how deep your tree is how often you kick off another <code>os.walk()</code> for a given parent directory that leads to the same nested subdirectory. But given that there are 4 levels of nesting, you&#39;d kick of <code>os.walk()</code> for each of the 4 parent directories for each match."}, {"owner": {"reputation": 4676, "user_id": 30105, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/a1dc4bddf38de8351ae70e98845242e9?s=128&d=identicon&r=PG", "display_name": "PyNEwbie", "link": "https://stackoverflow.com/users/30105/pynewbie"}, "edited": false, "score": 0, "creation_date": 1467241259, "post_id": 38109720, "comment_id": 63656387, "body": "@MartijinPieters I am trying to be better about not making thanks comments but I can&#39;t stop myself - thanks this helped me understand the process."}], "tags": [], "owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "is_accepted": true, "score": 1, "last_activity_date": 1467235308, "last_edit_date": 1467235308, "creation_date": 1467233091, "answer_id": 38109720, "question_id": 38109351, "link": "https://stackoverflow.com/questions/38109351/how-can-i-avoid-getting-duplicate-paths-from-os-walk/38109720#38109720", "title": "How can I avoid getting duplicate paths from os.walk", "body": "<p><code>os.walk()</code> will <em>recursively</em> walk a directory structure. For each directory you encounter, you start <em>another recursive call</em>. So for every directory, you recursively walk that directory plus all nested directories. That includes nested directories. By kicking off a search for <code>/mnt/type/split/v2/doc</code>, <code>/mnt/type/split/v2/doc/100045</code>, <code>/mnt/type/split/v2/doc/100045/2008</code>,  <code>/mnt/type/split/v2/doc/100045/2008</code> and <code>/mnt/type/split/v2/doc/100045/2008/FY</code> paths, you produce 5 matches per document ID.</p>\n\n<p>Call <code>os.walk()</code> just once:</p>\n\n<pre><code>def survey():\n    magic_paths = []\n    for (resource_id, dirnames, filenames) in os.walk('/mnt/type/split/v2/doc'):\n         if len(resource_id.split(os.sep)) == 10:\n              magic_paths.append(resource_id + os.linesep)\n    write_survey(magic_paths)\n    x = len(magic_paths)\n    return x\n</code></pre>\n\n<p>You may want to prune the search after finding a match; there is no point in searching through further subdirectories once you find a <code>DOCUMENT_ID</code> directory:</p>\n\n<pre><code>def survey():\n    magic_paths = []\n    for (resource_id, dirnames, filenames) in os.walk('/mnt/type/split/v2/doc'):\n         if len(resource_id.split(os.sep)) == 10:\n              magic_paths.append(resource_id + os.linesep)\n              dirnames[:] = []  # clear the subdirs list to stop further recursion here\n    write_survey(magic_paths)\n    x = len(magic_paths)\n    return x\n</code></pre>\n"}], "owner": {"reputation": 4676, "user_id": 30105, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/a1dc4bddf38de8351ae70e98845242e9?s=128&d=identicon&r=PG", "display_name": "PyNEwbie", "link": "https://stackoverflow.com/users/30105/pynewbie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 985, "favorite_count": 0, "accepted_answer_id": 38109720, "answer_count": 1, "score": 2, "last_activity_date": 1467235308, "creation_date": 1467231663, "last_edit_date": 1467232663, "question_id": 38109351, "link": "https://stackoverflow.com/questions/38109351/how-can-i-avoid-getting-duplicate-paths-from-os-walk", "title": "How can I avoid getting duplicate paths from os.walk", "body": "<p>I have the following directory structure</p>\n\n<pre><code>/mnt/type/split/v2/doc/RESOURCE_ID/YYYY/FY/DOCUMENT_ID\n</code></pre>\n\n<p>for example, one path might be</p>\n\n<pre><code>/mnt/type/split/v2/doc/100045/2008/FY/28\n</code></pre>\n\n<p>where </p>\n\n<pre><code>RESOURCE_ID = 100045\nYYYY = 2008\nDOCUMENT_ID = 28\n</code></pre>\n\n<p>Note, DOCUMENT_ID is the last directory in the path - there will be files in the DOCUMENT_ID directory</p>\n\n<p>I was trying to take inventory of this structure using the following code</p>\n\n<pre><code>def survey():\n    magic_paths = []\n    for (resource_id, dirname,filename) in os.walk('/mnt/type/split/v2/doc'):\n        if resource_id:\n            for (magic_path, dirname2,filename2) in os.walk(resource_id):\n                 if len(magic_path.split(os.sep)) == 10:\n                      magic_paths.append(magic_path + os.linesep)\n    write_survey(magic_paths)\n    x = len(magic_paths)\n    return x\n</code></pre>\n\n<p>I am getting five copies of each path in my magic_paths list.  I have 1,500,000 paths, so I am getting 7,500,00 items in my list.  </p>\n\n<p>The first 1,500,000 are the unique values.  The next 6,000,000 consist of groups that are rooted on the RESOURCE_ID, repeated 4 times</p>\n\n<pre><code>/mnt/type/split/v2/doc/100045/2008/FY/28 #obs_1\n/mnt/type/split/v2/doc/100045/2008/FY/29 #obs_2\n/mnt/type/split/v2/doc/100045/2008/FY/30 #obs_3\n/mnt/type/split/v2/doc/100045/2008/FY/31 #obs_4\n/mnt/type/split/v2/doc/1028/2008/FY/28   #obs_5 # see the new RESOURCE_ID\n.\n.   1,499,995 more unique values\n.\n/mnt/type/split/v2/doc/100045/2008/FY/28 #begin of first repetition\n/mnt/type/split/v2/doc/100045/2008/FY/29\n/mnt/type/split/v2/doc/100045/2008/FY/30\n/mnt/type/split/v2/doc/100045/2008/FY/31\n/mnt/type/split/v2/doc/100045/2008/FY/28 #begin of second repetition\n/mnt/type/split/v2/doc/100045/2008/FY/29\n/mnt/type/split/v2/doc/100045/2008/FY/30\n/mnt/type/split/v2/doc/100045/2008/FY/31\n/mnt/type/split/v2/doc/100045/2008/FY/28 #begin of third repetition\n/mnt/type/split/v2/doc/100045/2008/FY/29\n/mnt/type/split/v2/doc/100045/2008/FY/30\n/mnt/type/split/v2/doc/100045/2008/FY/31\n/mnt/type/split/v2/doc/100045/2008/FY/28 #begin of fourth repetition\n/mnt/type/split/v2/doc/100045/2008/FY/29\n/mnt/type/split/v2/doc/100045/2008/FY/30\n/mnt/type/split/v2/doc/100045/2008/FY/31\n/mnt/type/split/v2/doc/1028/2008/FY/28     #series of 4 repetitions based on RESOURCE ID 1028 \n</code></pre>\n\n<p>There are various files in the directories and subs at each level, I just need to inventory the paths to the DOCUMENT_IDs.</p>\n\n<p>I do not understand why the results are patterned as they are.  I believed that I was starting at RESOURCE_ID and finding only the directories that were 9 deep since splitting on os.sep gives me a list with ten items.</p>\n\n<pre><code>'/mnt/type/split/v2/doc/100045/2008/FY/31'.split(os.sep) = ['','mnt',type','split','v2','doc','100045','2008','FY','31']\n</code></pre>\n\n<p>In response to the questions in the comments</p>\n\n<ol>\n<li>I believed that I was getting each RESOURCE_ID directory and then walking it. That the other items returned from the first os.walk (dirnames and filenames) would be ignored</li>\n<li>I did not think os.listdir would work, I can make this work with glob but am worried about it eating my memory</li>\n</ol>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 205, "user_id": 6389787, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PlnfC.jpg?s=128&g=1", "display_name": "Ashok Arora", "link": "https://stackoverflow.com/users/6389787/ashok-arora"}, "edited": false, "score": 0, "creation_date": 1467232027, "post_id": 38109286, "comment_id": 63652406, "body": "P.S. : I am asking for the var &quot;press&quot; and not about &quot;num1&quot; or &quot;num2&quot; and it&#39;s not a duplicate. The similar question is way too different from what I&#39;m asking. Please see again and reopen this."}], "answers": [{"comments": [{"owner": {"reputation": 8538, "user_id": 3059812, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/UaU9b.jpg?s=128&g=1", "display_name": "Morgan Thrapp", "link": "https://stackoverflow.com/users/3059812/morgan-thrapp"}, "edited": false, "score": 0, "creation_date": 1467231851, "post_id": 38109344, "comment_id": 63652322, "body": "No, that won&#39;t work because by the time you&#39;d be able to check that, the exception will have been thrown already. Also, naked excepts are super dangerous. You should be using the strictest except possible, <code>ValueError</code> in this case."}, {"owner": {"reputation": 205, "user_id": 6389787, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PlnfC.jpg?s=128&g=1", "display_name": "Ashok Arora", "link": "https://stackoverflow.com/users/6389787/ashok-arora"}, "edited": false, "score": 0, "creation_date": 1467232289, "post_id": 38109344, "comment_id": 63652524, "body": "I am asking for the var &quot;press&quot; and not about &quot;num1&quot; or &quot;num2&quot; and it&#39;s not a duplicate."}, {"owner": {"reputation": 165, "user_id": 6495780, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abbc49c52c3255613e1c47f89190a76a?s=128&d=identicon&r=PG&f=1", "display_name": "mrwyatt", "link": "https://stackoverflow.com/users/6495780/mrwyatt"}, "edited": false, "score": 0, "creation_date": 1467232466, "post_id": 38109344, "comment_id": 63652620, "body": "The same logic can be applied to the press variable."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1467232731, "post_id": 38109344, "comment_id": 63652744, "body": "This isn&#39;t a big deal because this term gets thrown around loosely, but my understanding is that <code>int(num1)</code> isn&#39;t a cast, it is a function that constructs an int from other numbers or strings. You don&#39;t really cast things in Python."}], "tags": [], "owner": {"reputation": 165, "user_id": 6495780, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abbc49c52c3255613e1c47f89190a76a?s=128&d=identicon&r=PG&f=1", "display_name": "mrwyatt", "link": "https://stackoverflow.com/users/6495780/mrwyatt"}, "is_accepted": false, "score": 3, "last_activity_date": 1467232380, "last_edit_date": 1467232380, "creation_date": 1467231647, "answer_id": 38109344, "question_id": 38109286, "link": "https://stackoverflow.com/questions/38109286/python-how-to-take-in-letters/38109344#38109344", "title": "python : How to take in letters?", "body": "<p>You could do:</p>\n\n<pre><code>num1 = None\nwhile num1 is None:\n    try:\n        num1 = int(num1)\n    except ValueError:\n        print \"ERROR: Invalid Input\"        \n</code></pre>\n\n<p>This would attempt to cast the input to an integer.  If it failed to do so, then the code in the \"except\" part will run.</p>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 6525674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cdf25b5dca34af1452dd4b6a3c63cd2?s=128&d=identicon&r=PG&f=1", "display_name": "iciaran", "link": "https://stackoverflow.com/users/6525674/iciaran"}, "is_accepted": false, "score": 0, "last_activity_date": 1467231732, "creation_date": 1467231732, "answer_id": 38109369, "question_id": 38109286, "link": "https://stackoverflow.com/questions/38109286/python-how-to-take-in-letters/38109369#38109369", "title": "python : How to take in letters?", "body": "<p>You can use <code>str.isdigit()</code> to check if the string only contains numbers, it returns true if that is the case and false if the string contains any non number characters.</p>\n"}], "owner": {"reputation": 205, "user_id": 6389787, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PlnfC.jpg?s=128&g=1", "display_name": "Ashok Arora", "link": "https://stackoverflow.com/users/6389787/ashok-arora"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "closed_date": 1467231719, "answer_count": 2, "score": -2, "last_activity_date": 1467232380, "creation_date": 1467231423, "last_edit_date": 1467231918, "question_id": 38109286, "link": "https://stackoverflow.com/questions/38109286/python-how-to-take-in-letters", "closed_reason": "Duplicate", "title": "python : How to take in letters?", "body": "<pre><code>print \"HEllo !!\"\nprint \"Today, I will calculate something for you !!\"#introduces itself \ninp = True\ndef start():\n    print \"type 1 for ADDITION\"\n    print \"type 2 for SUBTRACTION\"\n    print \"type 3 for MULTIPLICATION\"      #asks for the kind of calculation \n    print \"type 4 for DIVISION\"\n    press=int(raw_input())\n    if press &gt;= 5 :\n            print \"Choose a NUMBER which is less than 5 and you will get the answer!!\"\n            print \"-------------------------------\"\n    if press == 1:\n        print \"Enter your first number\"\n        num1 = input()\n        print \"enter your second number\"            #adds \n        num2 = input()\n        result = num1 + num2\n        print \" Your answer is \"+ str(result)\n        print \"-------------------------------\"\n    if press == 2 :\n        print \"Enter your first number\"\n        num1 = input()\n        print \"enter your second number\"            #subtracts      \n        num2 = input()\n        result = num1 - num2\n        print \" Your answer is \"+ str(result)\n        print \"-------------------------------\"\n    if press == 3:\n        print \"Enter your first number\"\n        num1 = input()\n        print \"enter your second number\"\n        num2 = input()                              #multiplies             \n        result = num1 * num2\n        print \" Your answer is \"+ str(result)\n        print \"-------------------------------\"\n    if press == 4:\n        print \"Enter your first number\"\n        num1 = input()                              #divides \n        print \"enter your second number\"\n        num2 = input()\n        result = num1/num2\n        print \" Your answer is \"+ str(result)\n        print \"-------------------------------\"\nwhile inp : \n    start()\n</code></pre>\n\n<p>So I've created this calculator using basic commands, and the only problem is when someone types in a letter, where it asks for a number from 1 to 4, it shows a python error. Instead I want to be able to print a custom made error like \"only number allowed\" or something like that instead of the regular error that python shows. What change can I do so that it takes in numbers and alphabets, but shows a custom-made error when someone enters a letter ?\nP.S. : I am asking for the var \"press\" and not about \"num1\" or \"num2\"</p>\n"}, {"tags": ["python", "python-2.7", "web2py", "web2py-modules"], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 6530255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebf032c09f250f1d00cc2f7822a2256a?s=128&d=identicon&r=PG&f=1", "display_name": "B Welch", "link": "https://stackoverflow.com/users/6530255/b-welch"}, "edited": false, "score": 0, "creation_date": 1467297174, "post_id": 38111397, "comment_id": 63683479, "body": "I tried that and now the error happens in this line: <code>session.connection = ssh(credentials.vars.host_address, credentials.vars.username, credentials.vars.password)</code> and says &quot;<b>&lt;type &#39;exceptions.NameError&#39;&gt; global name &#39;ssh&#39; is not defined</b>&quot;"}, {"owner": {"reputation": 15, "user_id": 6530255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebf032c09f250f1d00cc2f7822a2256a?s=128&d=identicon&r=PG&f=1", "display_name": "B Welch", "link": "https://stackoverflow.com/users/6530255/b-welch"}, "edited": false, "score": 0, "creation_date": 1467297742, "post_id": 38111397, "comment_id": 63683967, "body": "Never mind, I figured out the issue. I didn&#39;t realize that when I copied the script over from my local machine into web2py, I didn&#39;t copy the part where I defined the class &quot;<b>ssh</b>&quot;. Thanks!"}], "tags": [], "owner": {"reputation": 25193, "user_id": 440323, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c524d823f477d9bb60626dc9dcacc95e?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/440323/anthony"}, "is_accepted": true, "score": 4, "last_activity_date": 1467241147, "creation_date": 1467241147, "answer_id": 38111397, "question_id": 38109285, "link": "https://stackoverflow.com/questions/38109285/global-name-paramiko-not-defined-when-using-module-in-web2py/38111397#38111397", "title": "Global name &#39;paramiko&#39; not defined when using module in web2py", "body": "<p>Your import statement is:</p>\n\n<pre><code>from paramiko import client\n</code></pre>\n\n<p>But in your code, you have:</p>\n\n<pre><code>except paramiko.ssh_exception.AuthenticationException\n</code></pre>\n\n<p>In order to reference <code>paramiko</code>, you must import it:</p>\n\n<pre><code>import paramiko\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 6530255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebf032c09f250f1d00cc2f7822a2256a?s=128&d=identicon&r=PG&f=1", "display_name": "B Welch", "link": "https://stackoverflow.com/users/6530255/b-welch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4183, "favorite_count": 0, "accepted_answer_id": 38111397, "answer_count": 1, "score": 0, "last_activity_date": 1467241147, "creation_date": 1467231421, "last_edit_date": 1467233065, "question_id": 38109285, "link": "https://stackoverflow.com/questions/38109285/global-name-paramiko-not-defined-when-using-module-in-web2py", "title": "Global name &#39;paramiko&#39; not defined when using module in web2py", "body": "<p>I am running the source version of web2py from an Ubuntu VM and Python 2.7. I'm trying to use the Paramiko library for SSH functionality, but the following code gives this error:</p>\n\n<p><strong>Code</strong></p>\n\n<p><code>from paramiko import client</code></p>\n\n<p><strong>Error</strong></p>\n\n<pre><code>Traceback (most recent call last):\n  File \"/home/localadmin/scanme/gluon/restricted.py\", line 227, in restricted\n    exec ccode in environment\n  File \"/home/localadmin/scanme/applications/nmap/controllers/default.py\", line 418, in &lt;module&gt;\n  File \"/home/localadmin/scanme/gluon/globals.py\", line 417, in &lt;lambda&gt;\n    self._caller = lambda f: f()\n  File \"/home/localadmin/scanme/applications/nmap/controllers/default.py\", line 50, in login\n    except paramiko.ssh_exception.AuthenticationException:\nNameError: global name 'paramiko' is not defined\n</code></pre>\n\n<p>What is confusing me is that importing and using the paramiko library works perfectly fine on my system when I run Python outside of web2py. </p>\n\n<p>I thought that all modules available in my local Python install were supposed to be available in web2py when using the source version. This is how i launched the web server from the command line:</p>\n\n<p><code>python2.7 web2py.py</code></p>\n\n<p>Does anyone know what may be causing this issue? It's worth noting that I have not found a \"paramiko\" directory on my system after installing the library like I have with other modules that are working in web2py.</p>\n"}, {"tags": ["python", "opencv", "jupyter-notebook"], "answers": [{"comments": [{"owner": {"reputation": 4403, "user_id": 4859971, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/X3pYG.jpg?s=128&g=1", "display_name": "Hiroyuki Nuri", "link": "https://stackoverflow.com/users/4859971/hiroyuki-nuri"}, "edited": false, "score": 0, "creation_date": 1467237026, "post_id": 38110537, "comment_id": 63654778, "body": "Thank you, I installed cv2 in the Anaconda2 file and it works."}, {"owner": {"reputation": 311, "user_id": 7184582, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--oXe4bahL9s/AAAAAAAAAAI/AAAAAAAAAP0/5JxSyd6fQVE/photo.jpg?sz=128", "display_name": "ElMix", "link": "https://stackoverflow.com/users/7184582/elmix"}, "edited": false, "score": 0, "creation_date": 1493329203, "post_id": 38110537, "comment_id": 74383595, "body": "I had the same issue. Had to install Jupyter on the active environment in order to link the jupyter notebook to the envinronment that had opencv2 package installed"}], "tags": [], "owner": {"reputation": 849, "user_id": 4691861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9327d5912a18832e5213fe5b279ed48e?s=128&d=identicon&r=PG&f=1", "display_name": "plfrick", "link": "https://stackoverflow.com/users/4691861/plfrick"}, "is_accepted": true, "score": 12, "last_activity_date": 1467236561, "last_edit_date": 1495542855, "creation_date": 1467236561, "answer_id": 38110537, "question_id": 38109270, "link": "https://stackoverflow.com/questions/38109270/cv2-import-error-on-jupyter-notebook/38110537#38110537", "title": "cv2 import error on Jupyter notebook", "body": "<p>Is your python path looking in the right place? Check where python is looking for the module. Within the notebook try:</p>\n\n<pre><code>import os\nos.sys.path\n</code></pre>\n\n<p>Is the <code>cv2</code> module located in any of those directories? If not your path is looking in the wrong place. If it is overlooking the install location, append it to your python path. You can follow the instructions <a href=\"https://stackoverflow.com/questions/8663076/python-best-way-to-add-to-sys-path-relative-to-the-current-running-script\">here</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 1257, "user_id": 2101117, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Qfw7v.jpg?s=128&g=1", "display_name": "Aleksandar", "link": "https://stackoverflow.com/users/2101117/aleksandar"}, "is_accepted": false, "score": 8, "last_activity_date": 1519407295, "creation_date": 1519407295, "answer_id": 48953351, "question_id": 38109270, "link": "https://stackoverflow.com/questions/38109270/cv2-import-error-on-jupyter-notebook/48953351#48953351", "title": "cv2 import error on Jupyter notebook", "body": "<p>I didn't have the openCV installation in my Python3 kernel, so I installed it by activating the specific environment and running this in the command prompt:</p>\n\n<pre><code>pip install opencv-python\n</code></pre>\n\n<h2>How to find and activate my environment?</h2>\n\n<p>To list all of Your <code>conda</code> environments, run this command:</p>\n\n<pre><code>conda info --envs\n</code></pre>\n\n<p>You will get something like this:</p>\n\n<pre><code>ipykernel_py2            D:\\Anaconda\\envs\\ipykernel_py2\nroot                     D:\\Anaconda\n</code></pre>\n\n<p>After that, activate the environment that is complaining for the missing <code>cv2</code> and run the <strong><code>pip install opencv-python</code></strong> command.</p>\n\n<h2>How to activate an environment?</h2>\n\n<p>Just run the command:</p>\n\n<pre><code>activate env_name\n</code></pre>\n\n<p>where <code>env_name</code> is the wanted environment (for example, You could type <code>activate ipykernel_py2</code> if You wanted to access the first of the two environments listed above).</p>\n\n<p><strong>Note:</strong> If You are on Linux, You need to type <code>source activate env_name</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 10415182, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-TuAkr5sXwKI/AAAAAAAAAAI/AAAAAAAADAQ/hDcZ2AvUjZ4/photo.jpg?sz=128", "display_name": "sandeep dubey", "link": "https://stackoverflow.com/users/10415182/sandeep-dubey"}, "is_accepted": false, "score": 3, "last_activity_date": 1537909263, "last_edit_date": 1537909263, "creation_date": 1537903701, "answer_id": 52505456, "question_id": 38109270, "link": "https://stackoverflow.com/questions/38109270/cv2-import-error-on-jupyter-notebook/52505456#52505456", "title": "cv2 import error on Jupyter notebook", "body": "<p>It is because of opencv library.\nTry running this command in anaconda prompt:</p>\n\n\n\n<pre><code>conda install -c conda-forge opencv\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1280, "user_id": 5433896, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UVdxi.jpg?s=128&g=1", "display_name": "Sander Vanden Hautte", "link": "https://stackoverflow.com/users/5433896/sander-vanden-hautte"}, "is_accepted": false, "score": 0, "last_activity_date": 1539001682, "creation_date": 1539001682, "answer_id": 52702322, "question_id": 38109270, "link": "https://stackoverflow.com/questions/38109270/cv2-import-error-on-jupyter-notebook/52702322#52702322", "title": "cv2 import error on Jupyter notebook", "body": "<p>I had this issue in my Jupyter Notebook after I had \"installed\" the opencv package, using Anaconda Navigator, on my base (root) environment. </p>\n\n<p>However, after \"installing\" the package and its dependencies, <strong>Anaconda Navigator showed a reminder popup to update to the next Anaconda Navigator version</strong>. I ignored this at first, but couldn't use the opencv package in my Jupyter Notebook.</p>\n\n<p>After I <em>did</em> update Anaconda Navigator to the newer version, the opencv package install worked fine.</p>\n"}, {"tags": [], "owner": {"reputation": 747, "user_id": 1739137, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RrWRg.jpg?s=128&g=1", "display_name": "binmosa", "link": "https://stackoverflow.com/users/1739137/binmosa"}, "is_accepted": false, "score": 3, "last_activity_date": 1553590019, "creation_date": 1553590019, "answer_id": 55352980, "question_id": 38109270, "link": "https://stackoverflow.com/questions/38109270/cv2-import-error-on-jupyter-notebook/55352980#55352980", "title": "cv2 import error on Jupyter notebook", "body": "<p>To make this clear for those who are having the same issue:</p>\n\n<p>By default: Anaconda (jupyter notebook) has its own version of Python &amp; packages once it has been installed on your PC. </p>\n\n<p>If you have Python x.x installed on your PC, and you installed OpenCV or -whatever packages- using the package manager of this python version, it does NOT mean your jupyter notebook will get access to these python packages you installed earlier. They are not living in the same folder.</p>\n\n<p>To illustrate this, open your windows CMD and write :</p>\n\n<pre><code>`python` \n</code></pre>\n\n<p>then write:</p>\n\n<pre><code>import os\nos.path\n</code></pre>\n\n<p>you will get the path of your python. in my case (C:\\Python35)</p>\n\n<p>Now open the Anaconda Prompt and write the same commands again:</p>\n\n<pre><code>`python` \n</code></pre>\n\n<p>then write:</p>\n\n<pre><code>import os\nos.path\n</code></pre>\n\n<p>you will get the anaconda's python path. In my case (C:\\Users\\MY_NAME\\Anaconda3).</p>\n\n<p>As you can see, there are two different paths of python, so make sure that your first step in diagnosing such error (No module named x) is to ask yourself whether you installed the package in the right place or not!</p>\n\n<p>N.B: within Anaconda itself you can create environments, each environment may have different packages installed in it, so you also have to make sure you're in the right environment and it is the active one.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 12181250, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe0b6b69916348775c44351d4efc0ac4?s=128&d=identicon&r=PG&f=1", "display_name": "Ag371", "link": "https://stackoverflow.com/users/12181250/ag371"}, "is_accepted": false, "score": 0, "last_activity_date": 1579867772, "last_edit_date": 1579867772, "creation_date": 1579865900, "answer_id": 59895696, "question_id": 38109270, "link": "https://stackoverflow.com/questions/38109270/cv2-import-error-on-jupyter-notebook/59895696#59895696", "title": "cv2 import error on Jupyter notebook", "body": "<pre><code>pip install opencv-python\n</code></pre>\n\n<p>This solved the error for me in MacOS.</p>\n"}, {"comments": [{"owner": {"reputation": 1870, "user_id": 13492561, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sQDYA.jpg?s=128&g=1", "display_name": "Ronald", "link": "https://stackoverflow.com/users/13492561/ronald"}, "edited": false, "score": 2, "creation_date": 1593024273, "post_id": 62561409, "comment_id": 110638023, "body": "Very short answers, trivial answers or in this case a suggestion that might work, can best be placed in a comment."}], "tags": [], "owner": {"reputation": 11, "user_id": 13807827, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/22852887da3add90102c313e5f77de56?s=128&d=identicon&r=PG", "display_name": "user13807827", "link": "https://stackoverflow.com/users/13807827/user13807827"}, "is_accepted": false, "score": 1, "last_activity_date": 1593021921, "creation_date": 1593021921, "answer_id": 62561409, "question_id": 38109270, "link": "https://stackoverflow.com/questions/38109270/cv2-import-error-on-jupyter-notebook/62561409#62561409", "title": "cv2 import error on Jupyter notebook", "body": "<p>I added \\envs\\myenv\\Library\\bin also in the path variable and it got solved.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 9715707, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-nQgLod3yckg/AAAAAAAAAAI/AAAAAAAAAM8/0VJoqJ3WZfQ/photo.jpg?sz=128", "display_name": "Ben Witte", "link": "https://stackoverflow.com/users/9715707/ben-witte"}, "is_accepted": false, "score": 1, "last_activity_date": 1593377459, "creation_date": 1593377459, "answer_id": 62628073, "question_id": 38109270, "link": "https://stackoverflow.com/questions/38109270/cv2-import-error-on-jupyter-notebook/62628073#62628073", "title": "cv2 import error on Jupyter notebook", "body": "<p>Binmosa's explanation is great and to the point. As an alternative (easier, but I'm pretty sure it's just a band-aid fix), if you write:</p>\n<pre><code>    import sys\n    !{sys.executable} -m pip install opencv-python\n</code></pre>\n<p>directly into your notebook, you'll be able to actually install the module in the notebook itself.</p>\n<p>The longer explanation is interesting and informative, though. Link: <a href=\"https://jakevdp.github.io/blog/2017/12/05/installing-python-packages-from-jupyter/\" rel=\"nofollow noreferrer\">https://jakevdp.github.io/blog/2017/12/05/installing-python-packages-from-jupyter/</a></p>\n"}, {"tags": [], "owner": {"reputation": 835, "user_id": 5059902, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/931928860181460/picture?type=large", "display_name": "Shoaib Mohammed", "link": "https://stackoverflow.com/users/5059902/shoaib-mohammed"}, "is_accepted": false, "score": 4, "last_activity_date": 1597146132, "creation_date": 1597146132, "answer_id": 63357408, "question_id": 38109270, "link": "https://stackoverflow.com/questions/38109270/cv2-import-error-on-jupyter-notebook/63357408#63357408", "title": "cv2 import error on Jupyter notebook", "body": "<p>Go to your notebook, in menu section</p>\n<p><code>kernel -&gt; Change kernel -&gt; Python&lt;desired version&gt;</code></p>\n<p>Now in the notebook run following command to install opencv2 in the selected environment kernel</p>\n<p>python2:</p>\n<p><code>!pip install opencv-python</code></p>\n<p>python3:</p>\n<p><code>!pip3 install opencv-python</code></p>\n"}], "owner": {"reputation": 4403, "user_id": 4859971, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/X3pYG.jpg?s=128&g=1", "display_name": "Hiroyuki Nuri", "link": "https://stackoverflow.com/users/4859971/hiroyuki-nuri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82182, "favorite_count": 5, "accepted_answer_id": 38110537, "answer_count": 9, "score": 9, "last_activity_date": 1597146132, "creation_date": 1467231362, "question_id": 38109270, "link": "https://stackoverflow.com/questions/38109270/cv2-import-error-on-jupyter-notebook", "title": "cv2 import error on Jupyter notebook", "body": "<p>I'm trying to import <strong>cv2</strong> on <strong>Jupyter notebook</strong> but I get this error:</p>\n\n<pre><code>ImportError: No module named cv2\n</code></pre>\n\n<p>I am frustrated because I'm working on this simple issue for hours now. it works on Pycharm but not on Jupiter notebook. I've already installed cv2 into Python2.7's site packages, configured Jupyter's kernel to python2, browsed the documentation but I still don't get what I am missing ? </p>\n\n<p><em>(I'm using windows 10 and working with microsoft cognitives api, that's why I need to import this package.)</em></p>\n\n<p>here is the code:</p>\n\n<pre><code> &lt;ipython-input-1-9dee6ed62d2d&gt; in &lt;module&gt;()\n----&gt; 1 import cv2\n      2 cv2.__version__\n</code></pre>\n\n<p>What should I do in order to make this work ?</p>\n"}, {"tags": ["python", "flask"], "answers": [{"tags": [], "owner": {"reputation": 97255, "user_id": 400617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5aa7ef250a486833a8c6c933c523b282?s=128&d=identicon&r=PG", "display_name": "davidism", "link": "https://stackoverflow.com/users/400617/davidism"}, "is_accepted": true, "score": 1, "last_activity_date": 1467231548, "creation_date": 1467231548, "answer_id": 38109318, "question_id": 38109224, "link": "https://stackoverflow.com/questions/38109224/running-flask-with-fcgi/38109318#38109318", "title": "Running flask with fcgi", "body": "<p>You don't. <code>manage.py</code> is for managing the local development.  <code>fcgi.py</code> is for setting up the production app.  <code>fcgi.py</code> already imports the app factory and tells it what environment to use (<code>create_app('production')</code>), so unless there's something wrong with that call you already have everything you need.</p>\n"}], "owner": {"reputation": 26209, "user_id": 1592380, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/1b375c795476432e64d4433a651d2804?s=128&d=identicon&r=PG", "display_name": "user1592380", "link": "https://stackoverflow.com/users/1592380/user1592380"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 168, "favorite_count": 1, "accepted_answer_id": 38109318, "answer_count": 1, "score": 0, "last_activity_date": 1467231548, "creation_date": 1467231152, "question_id": 38109224, "link": "https://stackoverflow.com/questions/38109224/running-flask-with-fcgi", "title": "Running flask with fcgi", "body": "<p>I'm reading through <a href=\"http://fgimian.github.io/blog/2014/02/14/serving-a-python-flask-website-on-hostmonster/\" rel=\"nofollow\">http://fgimian.github.io/blog/2014/02/14/serving-a-python-flask-website-on-hostmonster/</a> , trying to deploy a flask app on shared hosting.</p>\n\n<p>I'm using <a href=\"https://github.com/wdm0006/cookiecutter-flask\" rel=\"nofollow\">https://github.com/wdm0006/cookiecutter-flask</a> as my app , and I'm at the stage where I'm working to modify the fcgi script:</p>\n\n<pre><code>#!/home/fots/.virtualenv/flaskage/bin/python\nimport sys\n\nfrom flup.server.fcgi import WSGIServer\n\nsys.path.insert(0, '/home/fots/flaskage')\nfrom application import create_app\n\nif __name__ == '__main__':\n    app = create_app('production')\n    WSGIServer(app).run()\n</code></pre>\n\n<p>In particular the cookiecutter is run using a manage.py file (<a href=\"https://github.com/wdm0006/cookiecutter-flask/blob/master/%7B%7Bcookiecutter.app_name%7D%7D/manage.py\" rel=\"nofollow\">https://github.com/wdm0006/cookiecutter-flask/blob/master/%7B%7Bcookiecutter.app_name%7D%7D/manage.py</a>) and contains:</p>\n\n<pre><code>if os.environ.get(\"{{cookiecutter.app_name | upper}}_ENV\") == 'prod':\n    app = create_app(ProdConfig)\nelse:\n    app = create_app(DevConfig)\n\nHERE = os.path.abspath(os.path.dirname(__file__))\nTEST_PATH = os.path.join(HERE, 'tests')\n\nmanager = Manager(app)\n\n\n........\n\nif __name__ == '__main__':\nmanager.run()\n</code></pre>\n\n<p>I'm not sure how to modify the manage.py to run it using the fcgi script</p>\n"}, {"tags": ["python", "postgresql", "django-models", "django-manage.py"], "comments": [{"owner": {"reputation": 2572, "user_id": 469111, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/D7E4Z.png?s=128&g=1", "display_name": "ohrstrom", "link": "https://stackoverflow.com/users/469111/ohrstrom"}, "edited": false, "score": 0, "creation_date": 1467232566, "post_id": 38109221, "comment_id": 63652657, "body": "It <i>is</i> a Django app. (with an unconventional layout...) - You&#39;re importing django and calling <code>django.setup()</code>..."}, {"owner": {"reputation": 111, "user_id": 5024557, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8c2e8aee8510215336dfc32925829856?s=128&d=identicon&r=PG&f=1", "display_name": "NJay", "link": "https://stackoverflow.com/users/5024557/njay"}, "reply_to_user": {"reputation": 2572, "user_id": 469111, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/D7E4Z.png?s=128&g=1", "display_name": "ohrstrom", "link": "https://stackoverflow.com/users/469111/ohrstrom"}, "edited": false, "score": 0, "creation_date": 1467233446, "post_id": 38109221, "comment_id": 63653136, "body": "Is that so. :P The point of this was to use Django models in my python standalone script. Would it work if I imported from these apps into my script?"}, {"owner": {"reputation": 2572, "user_id": 469111, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/D7E4Z.png?s=128&g=1", "display_name": "ohrstrom", "link": "https://stackoverflow.com/users/469111/ohrstrom"}, "edited": false, "score": 0, "creation_date": 1467234212, "post_id": 38109221, "comment_id": 63653529, "body": "eventually :) - I dont&#39; know... they are just python modules - so try it out... but if you want to use <code>manage.py</code> and django migrations i&#39;m not sure if this really is an intended use-case :)...  if you just need an ORM library it likely would be better to use something like <a href=\"http://www.sqlalchemy.org/\" rel=\"nofollow noreferrer\">SQLAlchemy</a>"}, {"owner": {"reputation": 111, "user_id": 5024557, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8c2e8aee8510215336dfc32925829856?s=128&d=identicon&r=PG&f=1", "display_name": "NJay", "link": "https://stackoverflow.com/users/5024557/njay"}, "reply_to_user": {"reputation": 2572, "user_id": 469111, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/D7E4Z.png?s=128&g=1", "display_name": "ohrstrom", "link": "https://stackoverflow.com/users/469111/ohrstrom"}, "edited": false, "score": 0, "creation_date": 1467312091, "post_id": 38109221, "comment_id": 63692971, "body": "Alright, I&#39;ll look into that... Thanks! :)"}], "owner": {"reputation": 111, "user_id": 5024557, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8c2e8aee8510215336dfc32925829856?s=128&d=identicon&r=PG&f=1", "display_name": "NJay", "link": "https://stackoverflow.com/users/5024557/njay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 153, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1467231143, "creation_date": 1467231143, "question_id": 38109221, "link": "https://stackoverflow.com/questions/38109221/why-is-python-manage-py-makemigrations-stalling-in-my-python-app", "title": "Why is python manage.py makemigrations stalling in my python app?", "body": "<p>I have a python application that uses Django models for easy storage of data. It is NOT a django app, I'm just attempting to use models from django.db, JSONField from django.contrib.postgres.fields and other useful parts.</p>\n\n<p>When I attempt to run <code>python manage.py makemigrations</code>, the terminal stalls. How do I debug this?</p>\n\n<p>Here are some snippets of my code:</p>\n\n<p>manga_shell/models.py</p>\n\n<pre><code>import os, django\n\nos.environ.setdefault(\"DJANGO_SETTINGS_MODULE\", \"manga_project.settings\")\ndjango.setup()\n\n\nfrom django.db import models\nfrom django.contrib.postgres.fields import JSONField\n\n\nclass Manga(models.Model):\n    # fields\n\nclass Chapter(models.Model):\n    # fields\n\nclass Page(models.Model):\n    # fields\n</code></pre>\n\n<p>manga_project/settings.py</p>\n\n<pre><code>import dj_database_url, os\n\n\nSECRET_KEY = #secret :P\n\nBASE_DIR = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))\n\nINSTALLED_APPS = (\n    'django.contrib.postgres',\n    'manga_shell',\n)\n\nDATABASES = {'default': dj_database_url.config(default='postgres://MyUserName:MyPassword@localhost:5432/manga_project_db')}\n\nTIMEZONE = 'Asia/Kolkata'\n\nMEDIA_ROOT = os.path.join(BASE_DIR, 'media')\n</code></pre>\n\n<p>If more code is required, I'll post it. I'm not entirely clear on what might cause manage.py to stall, so I don't know for sure which snippets of code are needed. Thanks in advance for the help.</p>\n"}, {"tags": ["python", "pandas", "filter", "dataframe"], "comments": [{"owner": {"reputation": 26041, "user_id": 3339965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ac89d084d3bc5dc083bad3ea5518f11?s=128&d=identicon&r=PG&f=1", "display_name": "root", "link": "https://stackoverflow.com/users/3339965/root"}, "edited": false, "score": 0, "creation_date": 1467231346, "post_id": 38109137, "comment_id": 63652069, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/19960077/how-to-implement-in-and-not-in-for-pandas-dataframe\">How to implement &#39;in&#39; and &#39;not in&#39; for Pandas dataframe</a>"}], "answers": [{"tags": [], "owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "is_accepted": true, "score": 9, "last_activity_date": 1494094111, "last_edit_date": 1494094111, "creation_date": 1467231236, "answer_id": 38109241, "question_id": 38109137, "link": "https://stackoverflow.com/questions/38109137/deleting-dataframe-rows-in-pandas-based-on-column-value-multiple-values-to-rem/38109241#38109241", "title": "Deleting DataFrame rows in Pandas based on column value - multiple values to remove", "body": "<p>You can do negative <a href=\"http://pandas.pydata.org/pandas-docs/stable/indexing.html#indexing-with-isin\" rel=\"nofollow noreferrer\">isin()</a> indexing:</p>\n\n<pre><code>In [57]: df\nOut[57]:\n   a  b  c\n0  1  2  2\n1  1  7  0\n2  3  7  1\n3  3  2  7\n4  1  3  1\n5  3  4  2\n6  0  7  1\n7  5  4  3\n8  6  1  0\n9  3  2  0\n\nIn [58]: my_list = [1, 7, 8]\n\nIn [59]: df.loc[~df.b.isin(my_list)]\nOut[59]:\n   a  b  c\n0  1  2  2\n3  3  2  7\n4  1  3  1\n5  3  4  2\n7  5  4  3\n9  3  2  0\n</code></pre>\n\n<p>or using <a href=\"http://pandas.pydata.org/pandas-docs/stable/indexing.html#the-in-and-not-in-operators\" rel=\"nofollow noreferrer\">query()</a> function:</p>\n\n<pre><code>In [60]: df.query('@my_list not in b')\nOut[60]:\n   a  b  c\n0  1  2  2\n3  3  2  7\n4  1  3  1\n5  3  4  2\n7  5  4  3\n9  3  2  0\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 26041, "user_id": 3339965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ac89d084d3bc5dc083bad3ea5518f11?s=128&d=identicon&r=PG&f=1", "display_name": "root", "link": "https://stackoverflow.com/users/3339965/root"}, "edited": false, "score": 2, "creation_date": 1467232701, "post_id": 38109370, "comment_id": 63652733, "body": "Pandas uses <code>np.in1d</code> <a href=\"https://github.com/pydata/pandas/blob/05e734ab171be0fda838c6b12839c38fa588da2c/pandas/core/algorithms.py#L123\" rel=\"nofollow noreferrer\">under the hood</a>.  It looks like they optimized it use <code>np.in1d</code> only when it will generally be beneficial, which is on large datasets.  It&#39;s slightly faster on your small example dataset, but when I tried it on similar data with 6k rows, and excluding 6 letters, <code>isin</code> was nearly twice as fast."}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "reply_to_user": {"reputation": 26041, "user_id": 3339965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ac89d084d3bc5dc083bad3ea5518f11?s=128&d=identicon&r=PG&f=1", "display_name": "root", "link": "https://stackoverflow.com/users/3339965/root"}, "edited": false, "score": 0, "creation_date": 1467232766, "post_id": 38109370, "comment_id": 63652771, "body": "Also, I noticed that <code>ix</code> slows it down a bit.  I&#39;ll rerun over large dataset and excluding <code>ix</code>."}, {"owner": {"reputation": 26041, "user_id": 3339965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ac89d084d3bc5dc083bad3ea5518f11?s=128&d=identicon&r=PG&f=1", "display_name": "root", "link": "https://stackoverflow.com/users/3339965/root"}, "edited": false, "score": 0, "creation_date": 1467232900, "post_id": 38109370, "comment_id": 63652845, "body": "Yeah, it&#39;s still worthwhile to mention <code>np.in1d</code> regardless though, as it&#39;s often useful in other contexts too."}, {"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "edited": false, "score": 0, "creation_date": 1467238504, "post_id": 38109370, "comment_id": 63655404, "body": "I just made <a href=\"http://stackoverflow.com/a/38110564/5741205\">another comparison for different dtypes</a> - <code>np.in1d()</code> is <b>very</b> slow for strings, but it wins for all numeric searches..."}], "tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": false, "score": 4, "last_activity_date": 1467232941, "last_edit_date": 1495541437, "creation_date": 1467231732, "answer_id": 38109370, "question_id": 38109137, "link": "https://stackoverflow.com/questions/38109137/deleting-dataframe-rows-in-pandas-based-on-column-value-multiple-values-to-rem/38109370#38109370", "title": "Deleting DataFrame rows in Pandas based on column value - multiple values to remove", "body": "<p>you could also use <code>np.in1d</code>.  From <a href=\"https://stackoverflow.com/a/38083418/2336654\">https://stackoverflow.com/a/38083418/2336654</a></p>\n\n<p>For your use case:</p>\n\n<pre><code>df[~np.in1d(df.b, my_list)]\n</code></pre>\n\n<h3>Demonstration</h3>\n\n<pre><code>from string import ascii_letters, ascii_lowercase, ascii_uppercase\ndf = pd.DataFrame({'lower': list(ascii_lowercase), 'upper': list(ascii_uppercase)}).head(6)\nexclude = list(ascii_uppercase[:6:2])\n\nprint df\n\n  lower upper\n0     a     A\n1     b     B\n2     c     C\n3     d     D\n4     e     E\n5     f     F\n\nprint exclude\n\n['A', 'C', 'E']\n\nprint df[~np.in1d(df.upper, exclude)]\n\n  lower upper\n1     b     B\n3     d     D\n5     f     F\n</code></pre>\n\n<hr>\n\n<h3>Timing</h3>\n\n<p>Various methods</p>\n\n<p><a href=\"https://i.stack.imgur.com/3nNVP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3nNVP.png\" alt=\"enter image description here\"></a></p>\n\n<h3>With 1.3 Million rows excluding 3 items</h3>\n\n<p><a href=\"https://i.stack.imgur.com/kPMx3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kPMx3.png\" alt=\"enter image description here\"></a></p>\n\n<h3>1.3 Million rows excluding 12 items</h3>\n\n<p><a href=\"https://i.stack.imgur.com/ClSDp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ClSDp.png\" alt=\"enter image description here\"></a></p>\n\n<h3>Conclusion</h3>\n\n<p>Clearly, <code>isin</code> and <code>query</code> scale better in this case.</p>\n"}, {"tags": [], "owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "is_accepted": false, "score": 1, "last_activity_date": 1467240960, "last_edit_date": 1467240960, "creation_date": 1467236672, "answer_id": 38110564, "question_id": 38109137, "link": "https://stackoverflow.com/questions/38109137/deleting-dataframe-rows-in-pandas-based-on-column-value-multiple-values-to-rem/38110564#38110564", "title": "Deleting DataFrame rows in Pandas based on column value - multiple values to remove", "body": "<p>I decided to add another answer with timings for different methods and different dtypes - it would be too long for one answer...</p>\n\n<p><strong>Timings against 1M rows DF for the following dtypes: int32, int64, float64, object (string):</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/NdPNZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NdPNZ.png\" alt=\"enter image description here\"></a></p>\n\n<pre><code>In [207]: result\nOut[207]:\n                              int32  int64  float  string\nmethod\ndf[~np.in1d(df.col, excl)]      249    271    307    2420\ndf[~df.col.isin(excl)]          414    210    514     189\ndf.ix[~df.col.isin(excl)]       399    212    553     189\ndf.query('@excl not in col')    415    228    563     206\n\nIn [208]: result.T\nOut[208]:\nmethod  df[~np.in1d(df.col, excl)]  df[~df.col.isin(excl)]  df.ix[~df.col.isin(excl)]  df.query('@excl not in col')\nint32                          249                     414                        399                           415\nint64                          271                     210                        212                           228\nfloat                          307                     514                        553                           563\nstring                        2420                     189                        189                           206\n</code></pre>\n\n<p><strong>Raw results:</strong></p>\n\n<p><strong>int32:</strong></p>\n\n<pre><code>In [159]: %timeit df[~np.in1d(df.int32, exclude_int32)]\n1 loop, best of 3: 249 ms per loop\n\nIn [160]: %timeit df[~df.int32.isin(exclude_int32)]\n1 loop, best of 3: 414 ms per loop\n\nIn [161]: %timeit df.ix[~df.int32.isin(exclude_int32)]\n1 loop, best of 3: 399 ms per loop\n\nIn [162]: %timeit df.query('@exclude_int32 not in int32')\n1 loop, best of 3: 415 ms per loop\n</code></pre>\n\n<p><strong>int64:</strong></p>\n\n<pre><code>In [163]: %timeit df[~np.in1d(df.int64, exclude_int64)]\n1 loop, best of 3: 271 ms per loop\n\nIn [164]: %timeit df[~df.int64.isin(exclude_int64)]\n1 loop, best of 3: 210 ms per loop\n\nIn [165]: %timeit df.ix[~df.int64.isin(exclude_int64)]\n1 loop, best of 3: 212 ms per loop\n\nIn [166]: %timeit df.query('@exclude_int64 not in int64')\n1 loop, best of 3: 228 ms per loop\n</code></pre>\n\n<p><strong>float64:</strong></p>\n\n<pre><code>In [167]: %timeit df[~np.in1d(df.float, exclude_float)]\n1 loop, best of 3: 307 ms per loop\n\nIn [168]: %timeit df[~df.float.isin(exclude_float)]\n1 loop, best of 3: 514 ms per loop\n\nIn [169]: %timeit df.ix[~df.float.isin(exclude_float)]\n1 loop, best of 3: 553 ms per loop\n\nIn [170]: %timeit df.query('@exclude_float not in float')\n1 loop, best of 3: 563 ms per loop\n</code></pre>\n\n<p><strong>object / string:</strong></p>\n\n<pre><code>In [171]: %timeit df[~np.in1d(df.string, exclude_str)]\n1 loop, best of 3: 2.42 s per loop\n\nIn [172]: %timeit df[~df.string.isin(exclude_str)]\n10 loops, best of 3: 189 ms per loop\n\nIn [173]: %timeit df.ix[~df.string.isin(exclude_str)]\n10 loops, best of 3: 189 ms per loop\n\nIn [174]: %timeit df.query('@exclude_str not in string')\n1 loop, best of 3: 206 ms per loop\n</code></pre>\n\n<p><strong>Conclusion:</strong></p>\n\n<p><code>np.in1d()</code> - wins for (<code>int32</code> and <code>float64</code>) searches, but it's <strong>approx. 10 times</strong> slower (compared to others) when searching strings, so don't use it for <code>object</code> (strings) and for <code>int64</code> dtypes!</p>\n\n<p><strong>Setup:</strong></p>\n\n<pre><code>df = pd.DataFrame({\n    'int32':    np.random.randint(0, 10**6, 10),\n    'int64':    np.random.randint(10**7, 10**9, 10).astype(np.int64)*10,\n    'float':    np.random.rand(10),\n    'string':   np.random.choice([c*10 for c in string.ascii_uppercase], 10),\n    })\n\n\ndf = pd.concat([df] * 10**5, ignore_index=True)\n\nexclude_str = np.random.choice([c*10 for c in string.ascii_uppercase], 100).tolist()\nexclude_int32 = np.random.randint(0, 10**6, 100).tolist()\nexclude_int64 = (np.random.randint(10**7, 10**9, 100).astype(np.int64)*10).tolist()\nexclude_float = np.random.rand(100)\n\n\nIn [146]: df.shape\nOut[146]: (1000000, 4)\n\nIn [147]: df.info()\n&lt;class 'pandas.core.frame.DataFrame'&gt;\nRangeIndex: 1000000 entries, 0 to 999999\nData columns (total 4 columns):\nfloat     1000000 non-null float64\nint32     1000000 non-null int32\nint64     1000000 non-null int64\nstring    1000000 non-null object\ndtypes: float64(1), int32(1), int64(1), object(1)\nmemory usage: 26.7+ MB\n\nIn [148]: df.head()\nOut[148]:\n      float   int32       int64      string\n0  0.221662  283447  6849265910  NNNNNNNNNN\n1  0.276834  455464  8785039710  AAAAAAAAAA\n2  0.517846  618887  8653293710  YYYYYYYYYY\n3  0.318897  363191  2223601320  PPPPPPPPPP\n4  0.323926  777875  5357201380  QQQQQQQQQQ\n</code></pre>\n"}], "owner": {"reputation": 1193, "user_id": 515227, "user_type": "registered", "accept_rate": 63, "profile_image": "https://graph.facebook.com/100000154225609/picture?type=large", "display_name": "GDICommander", "link": "https://stackoverflow.com/users/515227/gdicommander"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2934, "favorite_count": 1, "accepted_answer_id": 38109241, "answer_count": 3, "score": 3, "last_activity_date": 1494094111, "creation_date": 1467230858, "last_edit_date": 1495540942, "question_id": 38109137, "link": "https://stackoverflow.com/questions/38109137/deleting-dataframe-rows-in-pandas-based-on-column-value-multiple-values-to-rem", "title": "Deleting DataFrame rows in Pandas based on column value - multiple values to remove", "body": "<p>I have a list of values (not known in advance, in a Python list) that a column in my Panda DataFrame must not have for all rows.</p>\n\n<p>All recipes on the Web (like <a href=\"https://stackoverflow.com/questions/18172851/deleting-dataframe-row-in-pandas-based-on-column-value\">this one</a>) show how to do it with only one value to exclude, but I have multiple values to exclude. How do I do it?</p>\n\n<p>Please note that I cannot hardcode the values to exclude in my code.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "kivy", "kivy-language"], "answers": [{"comments": [{"owner": {"reputation": 3773, "user_id": 5232122, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/87ae151f27d7e84ac4f08d35f12a9d67?s=128&d=identicon&r=PG&f=1", "display_name": "Velidan", "link": "https://stackoverflow.com/users/5232122/velidan"}, "edited": false, "score": 0, "creation_date": 1467535342, "post_id": 38110500, "comment_id": 63763616, "body": "Thanks zeeMonkeez . You helped me a lot. Sorry for trivial question."}, {"owner": {"reputation": 4807, "user_id": 1893154, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/KvEaT.jpg?s=128&g=1", "display_name": "zeeMonkeez", "link": "https://stackoverflow.com/users/1893154/zeemonkeez"}, "reply_to_user": {"reputation": 3773, "user_id": 5232122, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/87ae151f27d7e84ac4f08d35f12a9d67?s=128&d=identicon&r=PG&f=1", "display_name": "Velidan", "link": "https://stackoverflow.com/users/5232122/velidan"}, "edited": false, "score": 0, "creation_date": 1467537511, "post_id": 38110500, "comment_id": 63764177, "body": "@Velidan it&#39;s a subtlety easy to miss, and therefore actually a useful question. It took me a moment to figure out..."}], "tags": [], "owner": {"reputation": 4807, "user_id": 1893154, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/KvEaT.jpg?s=128&g=1", "display_name": "zeeMonkeez", "link": "https://stackoverflow.com/users/1893154/zeemonkeez"}, "is_accepted": true, "score": 2, "last_activity_date": 1467236384, "creation_date": 1467236384, "answer_id": 38110500, "question_id": 38109126, "link": "https://stackoverflow.com/questions/38109126/kivy-kv-file-is-not-working/38110500#38110500", "title": "Kivy kv file is not working", "body": "<p>In your <code>kv</code> file, you define <code>ScreenManagement</code> to be the root element with its associated screens. But in <code>build</code>, you return a newly created <code>ScreenManagement</code> object, which will not have any children defined.</p>\n\n<p>Solution:\nDefine <code>build</code> as </p>\n\n<pre><code>def build(self):\n    pass\n</code></pre>\n\n<p><em>or</em> change the definition of <code>ScreenManagement</code> in the kv file to</p>\n\n<pre><code>&lt;ScreenManagement&gt;:\n    transition: FadeTransition()\n    MainScreen:\n    AnotherScreen:\n</code></pre>\n\n<p>so this will apply to <em>all</em> new <code>ScreenManagement</code> objects.</p>\n"}, {"tags": [], "owner": {"reputation": 189, "user_id": 7038819, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/175006196285476/picture?type=large", "display_name": "supreme", "link": "https://stackoverflow.com/users/7038819/supreme"}, "is_accepted": false, "score": 0, "last_activity_date": 1497901156, "creation_date": 1497901156, "answer_id": 44638614, "question_id": 38109126, "link": "https://stackoverflow.com/questions/38109126/kivy-kv-file-is-not-working/44638614#44638614", "title": "Kivy kv file is not working", "body": "<p>you can also add:</p>\n\n<pre><code>from kivy.properties import ObjectProperty\n</code></pre>\n\n<p>then change:</p>\n\n<pre><code>class ScreenManagement(ScreenManager):\n    pass\n</code></pre>\n\n<p>to this:</p>\n\n<pre><code>class ScreenManagement(screenManager):\n    mainscreen = ObjectProperty(None)\n    anotherscreen = ObjectProperty(None)\n</code></pre>\n\n<p>then in your .kv file you want to change this:</p>\n\n<pre><code>ScreenManagement:\n    transition: FadeTransition()\n    MainScreen:\n    AnotherScreen:\n</code></pre>\n\n<p>to this:</p>\n\n<pre><code>&lt;ScreenManagement&gt;:\n    transition: FadeTransition()\n    mainscreen: mainscreen\n    anotherscreen: anotherscreen\n</code></pre>\n\n<p>then for your MainScreen add and id like so:</p>\n\n<pre><code>&lt;MainScreen&gt;:\n    id: mainscreen\n</code></pre>\n\n<p>and do the same for you AnotherScreen.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user12424147"}, "is_accepted": false, "score": 0, "last_activity_date": 1586783363, "creation_date": 1586783363, "answer_id": 61188613, "question_id": 38109126, "link": "https://stackoverflow.com/questions/38109126/kivy-kv-file-is-not-working/61188613#61188613", "title": "Kivy kv file is not working", "body": "<p>Check the version of your Python and the version of Pygame you're using. I got that problem and my issue came from the version of Pygame. </p>\n"}], "owner": {"reputation": 3773, "user_id": 5232122, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/87ae151f27d7e84ac4f08d35f12a9d67?s=128&d=identicon&r=PG&f=1", "display_name": "Velidan", "link": "https://stackoverflow.com/users/5232122/velidan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3097, "favorite_count": 1, "accepted_answer_id": 38110500, "answer_count": 3, "score": 3, "last_activity_date": 1586783363, "creation_date": 1467230787, "last_edit_date": 1495541694, "question_id": 38109126, "link": "https://stackoverflow.com/questions/38109126/kivy-kv-file-is-not-working", "title": "Kivy kv file is not working", "body": "<p>I have the same issue like described in this theme <a href=\"https://stackoverflow.com/questions/34748579/kivy-using-a-screenmanager-from-kv-file/38109098#38109098\">kv incorrect</a>. When I use Builder and load the kv file I have normal working app. But when I try to use autoload kv file I have only black screen. Could someone explain me why? Thanks for any help.</p>\n\n<p>My code. main.py</p>\n\n<pre><code>import kivy\nkivy.require('1.9.1') # replace with your current kivy version !\n\nfrom kivy.app import App\nfrom kivy.lang import Builder\nfrom kivy.uix.screenmanager import ScreenManager, Screen, FadeTransition\n\n\nclass MainScreen(Screen):\n    pass\n\n\nclass AnotherScreen(Screen):\n    pass\n\n\nclass ScreenManagement(ScreenManager):\n    pass\n\n\nclass Test(App):\n\n    def build(self):\n        return ScreenManagement()\n\nif __name__ == \"__main__\":\n    Test().run()\n</code></pre>\n\n<p>kv file.    test.kv</p>\n\n<pre><code>#:kivy 1.9.1\n\n#: import FadeTransition kivy.uix.screenmanager.FadeTransition\n\nScreenManagement:\n    transition: FadeTransition()\n    MainScreen:\n    AnotherScreen:\n\n&lt;MainScreen&gt;:\n    name: \"main\"\n    Button:\n        on_release: app.root.current = \"other\"\n        text: \"Next Screen\"\n        font_size: 50\n\n&lt;AnotherScreen&gt;:\n    name: \"other\"\n    Button:\n        on_release: app.root.current = \"main\"\n        text: \"Prev Screen\"\n        font_size: 50\n</code></pre>\n"}, {"tags": ["python", "web-scraping", "beautifulsoup"], "answers": [{"tags": [], "owner": {"reputation": 23517, "user_id": 287976, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/8cf3090cda1c829f3f8df0a3796fc60c?s=128&d=identicon&r=PG", "display_name": "brandizzi", "link": "https://stackoverflow.com/users/287976/brandizzi"}, "is_accepted": true, "score": 0, "last_activity_date": 1467231692, "creation_date": 1467231692, "answer_id": 38109362, "question_id": 38109106, "link": "https://stackoverflow.com/questions/38109106/scraping-a-simple-html-table-returns-u-n-python-with-beautifulsoup/38109362#38109362", "title": "Scraping a simple html table returns u&#39;\\n (Python with BeautifulSoup)", "body": "<p>I am not sure why this is the behavior you get, but you sure do not need to call <code>find()</code> in each cell. You can get the content of the cell from its <code>text</code> attribute. If you replace</p>\n\n<pre><code>    NAM.append(cells[0].find(text=True))\n</code></pre>\n\n<p>with</p>\n\n<pre><code>    NAM.append(cells[0].text)\n</code></pre>\n\n<p>this will be the value of <code>NAM</code>:</p>\n\n<pre><code>[u'\\n\\r\\n\\t\\tUkraine', u'\\n\\r\\n\\t\\tVinnytsia',\n u'\\nVolyn', u'\\n\\r\\n\\t\\tDnipropetrovsk', u'\\nDonetsk',\n u'\\n\\r\\n\\t\\tZhytomyr', u'\\n\\r\\n\\t\\tTranscarpathean',\n u'\\n\\r\\n\\t\\tZaporizhia', ...]\n</code></pre>\n\n<p>(Of course, there is a lot of <code>\\r</code>, <code>\\n</code>, <code>\\t</code> etch that one does not need. We can remove them by calling the <code>strip()</code> string method:</p>\n\n<pre><code>    NAM.append(cells[0].text.strip())\n</code></pre>\n\n<p>Here is the result:</p>\n\n<pre><code>[u'Ukraine', u'Vinnytsia', u'Volyn', u'Dnipropetrovsk', u'Donetsk',\n u'Zhytomyr', u'Transcarpathean', u'Zaporizhia', u'Ivano-Frankivsk',\n u'Kyiv', u'Kirovohrad', u'Luhansk', u'Lviv', u'Mykolaiv', u'Odesa',\n u'Poltava', u'Rivne', u'Sumy', u'Ternopil', u'Kharkiv', u'Kherson',\n u'Khmelnytsk', u'Cherkasy', u'Chernivtsi', u'Chernihiv',\n u'City of \\r\\n\\t\\tKyiv']\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 6530149, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/906de6357aa06d17133262c9d8f695be?s=128&d=identicon&r=PG&f=1", "display_name": "Natasha", "link": "https://stackoverflow.com/users/6530149/natasha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 487, "favorite_count": 0, "accepted_answer_id": 38109362, "answer_count": 1, "score": 1, "last_activity_date": 1467231692, "creation_date": 1467230711, "last_edit_date": 1467231327, "question_id": 38109106, "link": "https://stackoverflow.com/questions/38109106/scraping-a-simple-html-table-returns-u-n-python-with-beautifulsoup", "title": "Scraping a simple html table returns u&#39;\\n (Python with BeautifulSoup)", "body": "<p>I'm trying to scrape a table using <a href=\"http://www.analyticsvidhya.com/blog/2015/10/beginner-guide-web-scraping-beautiful-soup-python/\" rel=\"nofollow\">this</a> tutorial. I'm fairly sure I am getting the right table, but my output is just lists full of <code>u'\\n'</code>. </p>\n\n<p>The line <code>if len(cells) == 10:</code> is supposed to let me only scrape the actual contents, not the header; if I change the number, all of my lists return as <code>None</code>, but with the number <code>10</code> they are filled with the correct number of entries, it's just that those entries are all the same. </p>\n\n<p>What am I doing wrong?</p>\n\n<p>Thank you!</p>\n\n<pre><code># -*- coding: utf-8 -*-\n\"\"\"\nCreated on Wed Jun 29 13:21:36 2016\n\n@author: natasha\n\"\"\"\nimport urllib2\n\nukr = \"http://www.ukrstat.gov.ua/operativ/operativ2013/rp/zn_ed_reg/zn_ed_reg_e/zn_ed_reg_2014k_e.htm\"\n\npage = urllib2.urlopen(ukr)\n\nfrom bs4 import BeautifulSoup\n\nsoup = BeautifulSoup(page)\n\n#scraping just the first table\ntable = soup.find('table', id = \"table2\")\n\n#creating lists for future variables\n\nNAM=[]\nTOT=[]\nAGR=[]\nIND=[]\nCON=[]\nTRA=[]\nSTO=[]\nACC=[]\nINF=[]\nFIN=[]\n\n#looping over rows\n\nfor row in table.findAll(\"tr\"):\n    cells = row.findAll(\"td\")\n    if len(cells) == 10:\n        NAM.append(cells[0].find(text=True))\n        TOT.append(cells[1].find(text=True))\n        AGR.append(cells[2].find(text=True))\n        IND.append(cells[3].find(text=True))\n        CON.append(cells[4].find(text=True))\n        TRA.append(cells[5].find(text=True))\n        STO.append(cells[6].find(text=True))\n        ACC.append(cells[7].find(text=True))\n        INF.append(cells[8].find(text=True))\n        FIN.append(cells[9].find(text=True))\n</code></pre>\n"}, {"tags": ["python", "string", "printing", "numbers", "int"], "comments": [{"owner": {"reputation": 6899, "user_id": 6510497, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/3go0E.png?s=128&g=1", "display_name": "Aguy", "link": "https://stackoverflow.com/users/6510497/aguy"}, "edited": false, "score": 1, "creation_date": 1467230900, "post_id": 38109086, "comment_id": 63651833, "body": "I would consider splitting to &gt;1000 and &lt;1000. Then use same logic for thousands and below thousands,  just adding the word &quot;thousands&quot; o the former."}, {"owner": {"reputation": 28245, "user_id": 1547004, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5255289d0269d550a4e80e6bf6b0f590?s=128&d=identicon&r=PG", "display_name": "Brendan Abel", "link": "https://stackoverflow.com/users/1547004/brendan-abel"}, "edited": false, "score": 0, "creation_date": 1467232788, "post_id": 38109086, "comment_id": 63652784, "body": "You don&#39;t need the line continuation chars (`\\`) when defining the dictionary."}], "answers": [{"tags": [], "owner": {"reputation": 165, "user_id": 6495780, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abbc49c52c3255613e1c47f89190a76a?s=128&d=identicon&r=PG&f=1", "display_name": "mrwyatt", "link": "https://stackoverflow.com/users/6495780/mrwyatt"}, "is_accepted": false, "score": 0, "last_activity_date": 1467231265, "creation_date": 1467231265, "answer_id": 38109251, "question_id": 38109086, "link": "https://stackoverflow.com/questions/38109086/printing-number-names-from-0-999999/38109251#38109251", "title": "Printing number names from 0-999999", "body": "<p>You could handle large numbers by converting them to a string first and then parsing the string one character at a time.  For example:</p>\n\n<pre><code>if n &gt;= 1000:\n    place = {1:'', 2:'', 3:'hundred', 4:'thousand'}\n    return_val = ''\n    n = str(n)\n    while n != '':\n        c = n[0]\n        return_val += numbers[int(c)]\n        return_val += place[len(n)]\n        n = n[1:]\n</code></pre>\n\n<p>Obviously, this answer is not complete, but I think it would be the easiest way to solve this problem.  Additionally, you could make recursive calls to your beta1 function in order to avoid heavily nested if-else statements.</p>\n\n<p>Hope that helps!</p>\n"}, {"tags": [], "owner": {"reputation": 100, "user_id": 6041997, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/a12d47317fb01b18e7939a18f8458eac?s=128&d=identicon&r=PG&f=1", "display_name": "Jason", "link": "https://stackoverflow.com/users/6041997/jason"}, "is_accepted": false, "score": 0, "last_activity_date": 1467241931, "last_edit_date": 1467241931, "creation_date": 1467231301, "answer_id": 38109262, "question_id": 38109086, "link": "https://stackoverflow.com/questions/38109086/printing-number-names-from-0-999999/38109262#38109262", "title": "Printing number names from 0-999999", "body": "<p>You are close! I would start with a top down approach (e.g. start on the 100000 level and work your way down) and use recursive calls. I would also use the <code>%</code> operator which represents <code>mod</code> (basically gives you remainder <code>5%2 = 1</code>). </p>\n\n<p>Here is an idea that will handle for example 5050:    </p>\n\n<pre><code>numbers = {1: 'One', 2: 'Two', 3: 'Three', 4: 'Four', 5: 'Five', \\\n   6: 'Six', 7: 'Seven', 8: 'Eight', 9: 'Nine', 10: 'Ten', \\\n   11: 'Eleven', 12: 'Twelve', 13: 'Thirteen', 14: 'Fourteen', \\\n   15: 'Fifteen', 16: 'Sixteen', 17: 'Seventeen', 18: 'Eighteen', \\\n   19: 'Nineteen', 20: 'Twenty', 30: 'Thirty', 40: 'Forty', \\\n   50: 'Fifty', 60: 'Sixty', 70: 'Seventy', 80: 'Eighty', \\\n   90: 'Ninety', 0: 'Zero'}\n\nmapping = {3:'Hundred', 4:'Thousand', ...}\n\ndef beta1(n):\n    numofdigits = len(n)\n    if not mapping[numofdigits]:\n        use your own code\n    else:\n        divider = (10 ** (numofdigits))\n        word = numbers[n/divider]\n        remainder = n%divider\n        return word + mapping[numofdigits] + beta1(remainder)\n</code></pre>\n\n<p>For example, if I plug in <code>5050</code> into this function. It will do the integer division of <code>5050</code> and <code>10^len(5050)</code>, i.e. <code>5050/1000</code> which gives you five. The remainder from <code>5050%1000</code> is <code>50</code>. Now the function returns <code>word</code>, which in this case would be <code>'Five'</code> and concatenates with <code>mapping[4]</code> which is <code>'Thousand'</code> + a recursive call to your function for parsing <code>50</code> which would return <code>'Fifty'</code>. Therefore your final result would be <code>'Five Thousand Fifty'</code>. </p>\n\n<p>This is a more elegant solution as you don't have to really hard code much. I'll let you handle the other cases! Good luck, let me know if you have any more questions. </p>\n"}, {"tags": [], "owner": {"reputation": 285, "user_id": 5116833, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b4ce5802b57d6f980e717d03e389a292?s=128&d=identicon&r=PG&f=1", "display_name": "yarz-tech", "link": "https://stackoverflow.com/users/5116833/yarz-tech"}, "is_accepted": false, "score": -2, "last_activity_date": 1467238713, "last_edit_date": 1467238713, "creation_date": 1467231582, "answer_id": 38109326, "question_id": 38109086, "link": "https://stackoverflow.com/questions/38109086/printing-number-names-from-0-999999/38109326#38109326", "title": "Printing number names from 0-999999", "body": "<p>This may seem tedious, but convert each place into an individual number then add the strings of the words.  I have done up to 999 in a few minutes.  Continue the same pattern and it should be easy and very basic!</p>\n\n<pre><code>numbers = {1: 'One', 2: 'Two', 3: 'Three', 4: 'Four', 5: 'Five', \\\n   6: 'Six', 7: 'Seven', 8: 'Eight', 9: 'Nine', 10: 'Ten', \\\n   11: 'Eleven', 12: 'Twelve', 13: 'Thirteen', 14: 'Fourteen', \\\n   15: 'Fifteen', 16: 'Sixteen', 17: 'Seventeen', 18: 'Eighteen', \\\n   19: 'Nineteen', 20: 'Twenty', 30: 'Thirty', 40: 'Forty', \\\n   50: 'Fifty', 60: 'Sixty', 70: 'Seventy', 80: 'Eighty', \\\n   90: 'Ninety', 0: ''}\n\n\ndef beta1(n):\n    global numbers\n    if n == 0:\n        pass\n    elif n &lt;= 20:\n        return numbers[n]\n    elif 10 &lt; n &lt; 100:\n        tens = int(str(n)[0]) * 10\n        ones = int(str(n)[1])\n        return numbers[tens] + \" \" + numbers[ones]\n    elif 100 &lt; n &lt; 1000:\n        hundreds = int(str(n)[0])\n        tens = int(str(n)[1]) * 10\n        ones = int(str(n)[2])\n        return numbers[hundreds] + \" Hundred \" + numbers[tens] + \" \"+ numbers[ones]\n\nfor n in range(1000):\n    print beta1(n)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3498, "user_id": 646765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/388c9a8c75261488488345aba7f78d3b?s=128&d=identicon&r=PG", "display_name": "Jerzyk", "link": "https://stackoverflow.com/users/646765/jerzyk"}, "is_accepted": false, "score": 0, "last_activity_date": 1467231778, "creation_date": 1467231778, "answer_id": 38109385, "question_id": 38109086, "link": "https://stackoverflow.com/questions/38109086/printing-number-names-from-0-999999/38109385#38109385", "title": "Printing number names from 0-999999", "body": "<p>I'll not give you a straight answer, but hints.</p>\n\n<p>First of all you need to parse numbers in groups of three digits as it is exactly the same wording for each group of 3, the only difference is suffix that describe \"level\", eg:</p>\n\n<p>505 and 505,000 will be basically the same:\n\"five hundreds and five\"\nwhere on second you just need to add \"thousands\"</p>\n\n<p>this implies, that you need to have one more table:</p>\n\n<pre><code>suffixes = ['', 'thousand', 'million', ...]\n</code></pre>\n\n<p>(first level is empty)</p>\n\n<p>then parsing each triplet is simple:\n- check for hundreds number // 100, get for this digit entry from <code>numbers</code>\n- remainder - if is less than 20 - get from the <code>numbers</code>, otherwise, get first digit (number//10 * 10) fetch from <code>numbers</code> add \"hundred(s)\" and fetch reminder (number%10) from <code>numbers</code>\n- do not forget to add \"s\" to the end of suffixes</p>\n"}, {"tags": [], "owner": {"reputation": 28245, "user_id": 1547004, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5255289d0269d550a4e80e6bf6b0f590?s=128&d=identicon&r=PG", "display_name": "Brendan Abel", "link": "https://stackoverflow.com/users/1547004/brendan-abel"}, "is_accepted": false, "score": 1, "last_activity_date": 1467233071, "last_edit_date": 1467233071, "creation_date": 1467231820, "answer_id": 38109397, "question_id": 38109086, "link": "https://stackoverflow.com/questions/38109086/printing-number-names-from-0-999999/38109397#38109397", "title": "Printing number names from 0-999999", "body": "<p>You'll need to process each named group separately (Ex. <code>Twenty-Four Thousand Four Hundred Fifty-One</code>).  Recursion will be your friend here so you won't have a long chain of <code>if</code>'s</p>\n\n<p>First off, you can short-circuit if the number provided is defined directly in your numbers dictionary, there's no need to check if the number is in a certain range</p>\n\n<pre><code>if num in numbers:\n    return numbers[num]\n</code></pre>\n\n<p>Also, you should special case <code>0</code> and remove it from your numbers dictionary so we don't end up dividing by it later</p>\n\n<pre><code>if num == 0:\n    return 'Zero'\n</code></pre>\n\n<p>I would define the different large quantifiers you're going to process</p>\n\n<pre><code>quantifiers = {\n    10 ** 2: 'Hundred',\n    10 ** 3: 'Thousand',\n    10 ** 6: 'Million',\n}\n</code></pre>\n\n<p>Then split up your number into the parts that will need to be processed separately.</p>\n\n<pre><code>num = 1234567\n\nquantifier_amounts = []\nr = num\nfor div in sorted(quantifiers.keys(), reverse=True):\n    n, r = divmod(r, div)\n    if n:\n        quantifier_amounts.append((n, quantifiers[div]))\n    if not r:\n        break\n</code></pre>\n\n<p>This should give you</p>\n\n<pre><code>quantifier_amounts = [(1, 'Million'), (234, 'Thousand'), (5, 'Hundred')]\nr = 67\n</code></pre>\n\n<p>Then, just process the leftover <code>r</code> value the same way using your numbers dictionary</p>\n\n<pre><code>amounts = []\nif r:\n    for div in sorted(numbers.keys(), reverse=True):\n        n, r = divmod(r, div)\n        if n:\n            amounts.append(numbers[div])\n        if not r:\n            break\n</code></pre>\n\n<p>This should give you</p>\n\n<pre><code>amounts = ['Sixty', 'Seven']\n</code></pre>\n\n<p>Then recursively process each quantifier part and add the text together (the function is called <code>numtext</code>)</p>\n\n<pre><code>text = []\nfor n, name in quantifier_amounts:\n    text.append('{} {}'.format(numtext(n), name))\n\nif amounts:\n    text.append('-'.join(amounts))\n\nreturn ' '.join(text)\n</code></pre>\n\n<p>You should get</p>\n\n<blockquote>\n  <p>One Million Two Hundred Thirty-Four Thousand Five Hundred Sixty-Seven</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 91, "user_id": 6525214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9bd1b3103bed9a71fb72708bdc47efc9?s=128&d=identicon&r=PG&f=1", "display_name": "CrackaJackDev", "link": "https://stackoverflow.com/users/6525214/crackajackdev"}, "is_accepted": false, "score": 0, "last_activity_date": 1467236380, "creation_date": 1467236380, "answer_id": 38110499, "question_id": 38109086, "link": "https://stackoverflow.com/questions/38109086/printing-number-names-from-0-999999/38110499#38110499", "title": "Printing number names from 0-999999", "body": "<p>Brenden Abel's answer above is pretty good, but here's a nice and tight, more self-contained version. As others have pointed out, recursion is your friend here:</p>\n\n<pre><code>def beta1(n, returnZero=True):\n    if n == 0 and not returnZero: return []             # Prevent superfluous final \"zero\", e.g. 2900: \"two thousand nine hundred zero\"\n    if n in numbers: return [numbers[n]]                # Direct mapping from n to text\n    if n &gt;= 1000: return beta1(n // 1000) + ['Thousand'] + beta1(n%1000, False)\n    if n &gt;= 100: return beta1(n // 100) + ['Hundred'] + beta1(n%100, False)\n    if n &gt; 20: return [numbers[n//10*10]] + beta1(n%10, False)\n\n# This function returns the elements as a list, so convert it to a string:\nprint( \" \".join(beta1(12345)) )\n</code></pre>\n\n<p>Of course, this can easily be extended to handle numbers greater than 999,999:</p>\n\n<pre><code>    if n &gt;= 1000000000: return beta1(n // 1000000000) + ['Billion'] + beta1(n%1000000000, False)\n    if n &gt;= 1000000: return beta1(n // 1000000) + ['Million'] + beta1(n%1000000, False)\n</code></pre>\n\n<p>And, a few test cases:</p>\n\n<pre><code># Wrapper function that converts from a list to a string\n# def beta1Text(n): return \" \".join(beta1(n))\ndef beta1Text(n): return \" \".join(beta1(n))\n\n# Your test cases\nprint(beta1Text(5050))      # Five Thousand Fifty\nprint(beta1Text(550))       # Five Hundred Fifty\nprint(beta1Text(515))       # Five Hundred Fifteen\nprint(beta1Text(505))       # Five Hundred Five\n\n# A few more test cases\nprint(beta1Text(290000))    # Two Hundred Ninety Thousand\nprint(beta1Text(123210))    # One Hundred Twenty Three Thousand Two Hundred Ten\nprint(beta1Text(990000))    # Nine Hundred Ninety Thousand\nprint(beta1Text(123456))    # One Hundred Twenty Three Thousand Four Hundred Fifty Six\nfor ii in range(20): print(beta1Text(ii))   # Zero, One, Two...Eighteen, Nineteen\n\n# Test cases &gt; 999,999\nprint(beta1Text(1000000))       # One Million\nprint(beta1Text(1000000000))    # One Billion\nprint(beta1Text(1234567898))    # One Billion Two Hundred Thirty Four Million Five Hundred Sixty Seven Thousand Eight Hundred Ninety Eight\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 6529538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d44fe95033fe20eecaa762402a8c589?s=128&d=identicon&r=PG&f=1", "display_name": "trizz", "link": "https://stackoverflow.com/users/6529538/trizz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 293, "favorite_count": 0, "answer_count": 6, "score": 3, "last_activity_date": 1467241931, "creation_date": 1467230627, "question_id": 38109086, "link": "https://stackoverflow.com/questions/38109086/printing-number-names-from-0-999999", "title": "Printing number names from 0-999999", "body": "<p>So I was given a little task, I had to write a program in Python that prints a number's name from 0-999999.</p>\n\n<p>But I ran into some problems, and I'd love to get your ideas and help.</p>\n\n<p>This is what I have written so far:</p>\n\n<pre><code>numbers = {1: 'One', 2: 'Two', 3: 'Three', 4: 'Four', 5: 'Five', \\\n       6: 'Six', 7: 'Seven', 8: 'Eight', 9: 'Nine', 10: 'Ten', \\\n       11: 'Eleven', 12: 'Twelve', 13: 'Thirteen', 14: 'Fourteen', \\\n       15: 'Fifteen', 16: 'Sixteen', 17: 'Seventeen', 18: 'Eighteen', \\\n       19: 'Nineteen', 20: 'Twenty', 30: 'Thirty', 40: 'Forty', \\\n       50: 'Fifty', 60: 'Sixty', 70: 'Seventy', 80: 'Eighty', \\\n       90: 'Ninety', 0: 'Zero'}\n\n\ndef beta1(n):\n    if n == 0:\n        return numbers[0]\n    elif n &gt;= 1 and n &lt;= 19:\n        return numbers[n]\n    elif n &gt;= 20 and n &lt;= 99:\n        if n % 10 == 0:\n            return numbers[n]\n        else:\n            return numbers[n - n % 10] + \" \" + numbers[n % 10]\n    elif n&gt;=100 and n&lt;=999:\n        if n%10 == 0:\n            return numbers[n/100] + \" Hundred\"\n        else:\n            return numbers[n/100] + \" Hundred\" +\" \"  +numbers[n%100 - n %10] + \" \" + numbers[n % 10]\n    elif n&gt;=1000 and n&lt;=999999:\n        if n&gt;= 1000 and n &lt;=9999:\n            if n%10 == 0:\n                return numbers[n/1000] + \" Thousand\"\n            else:\n                return numbers[n/1000] + \" Thousand\" + \" \" +numbers[(n%1000- n%100)/100] + \" Hundred \" + numbers[n%100- n%10] + \" \" + numbers[n%10]\n</code></pre>\n\n<p>The problem is that I don't handle cases like this here:</p>\n\n<pre><code>beta1(5050):\nFive Thousand\nbeta1(550):\nFive Hundred\nbeta1(515):\nFive Hundred Ten Five\nbeta1(505):\nFive Hundred Zero Five\n</code></pre>\n\n<p>I would love to get some Ideas/help from you on this subject (with no libraries included, I want it to be purely coded.)</p>\n\n<p>I am a fairly new coder so take it easy on me haha.\nThanks in advance!</p>\n"}, {"tags": ["python", "docker", "pip"], "comments": [{"owner": {"reputation": 45741, "user_id": 744178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3193139ea494c45e63752504f5ff1f2?s=128&d=identicon&r=PG", "display_name": "jwodder", "link": "https://stackoverflow.com/users/744178/jwodder"}, "edited": false, "score": 0, "creation_date": 1467231092, "post_id": 38109067, "comment_id": 63651932, "body": "Pip being out of date is not sufficient to cause a fatal error.  Show us more of the output from the <code>docker build</code> command, and ideally also show us your Dockerfile."}, {"owner": {"reputation": 503, "user_id": 4153545, "user_type": "registered", "profile_image": "https://graph.facebook.com/100002105066529/picture?type=large", "display_name": "Dimitrie Mititelu", "link": "https://stackoverflow.com/users/4153545/dimitrie-mititelu"}, "edited": false, "score": 0, "creation_date": 1467272818, "post_id": 38109067, "comment_id": 63666354, "body": "yes, and make sure you apply all these changes into Dockerfile, not on the host. eg. if you have pip 8.1.2 on host doesn&#39;t mean you have pip in the container too."}], "owner": {"reputation": 1, "user_id": 6528820, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2512e34608cf4352fb436865a7a748af?s=128&d=identicon&r=PG&f=1", "display_name": "user6528820", "link": "https://stackoverflow.com/users/6528820/user6528820"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 655, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1467407457, "creation_date": 1467230554, "last_edit_date": 1467407302, "question_id": 38109067, "link": "https://stackoverflow.com/questions/38109067/docker-error-with-pip-version-while-building-new-image", "title": "Docker error with pip version while building new image", "body": "<p>I have an issue with the build of a new image using python on Docker (RHEL7).</p>\n\n<p>I used this code to create the image with a Dockerfile builder:</p>\n\n<pre><code>docker build -t navitia-builder .\n</code></pre>\n\n<p>And the following error appear:</p>\n\n<pre><code>Command \"/usr/bin/python -c \"import setuptools, tokenize;__file__='/tmp/pip-build-uSw6UQ/cffi/setup.py';exec(compile(getattr(tokenize, 'open', open)(__file__).read().replace('\\r\\n', '\\n'), __file__, 'exec'))\" install --record /tmp/pip-FjGJow-record/install-record.txt --single-version-externally-managed --compile\" failed with error code 1 in /tmp/pip-build-uSw6UQ/cffi\nYou are using pip version 7.1.2, however version 8.1.2 is available.\nYou should consider upgrading via the 'pip install --upgrade pip' command.\n</code></pre>\n\n<p>But I already installed pip version 8.1.2 and installed requirements for my image:</p>\n\n<pre><code>docker-compose==1.2.0  \ndocker-py==1.1.0  \npytest==2.7.1  \nrequests==2.5.3 \nfabric==1.10.2  \njinja2==2.8 \nnose==1.3.7\n</code></pre>\n\n<p>I also upgraded the setuptools.</p>\n\n<p>This is my Dockerfile</p>\n\n<pre><code>FROM gliderlabs/alpine:3.3\n\nWORKDIR /usr/local/navitia\n\nRUN apk add --update \\\n    alpine-sdk \\\n    libffi-dev\n    python \\\n    python-dev \\\n    py-pip \\\n    docker \\\n  &amp;&amp; rm -rf /var/cache/apk/*\n\nRUN pip install --upgrade pip\n# Install openrc - see: https://github.com/gliderlabs/docker-alpine/issues/42\nRUN apk update &amp;&amp; apk add openrc &amp;&amp;\\\n# Tell openrc its running inside a container, till now that has meant LXC\n    sed -i 's/#rc_sys=\"\"/rc_sys=\"lxc\"/g' /etc/rc.conf &amp;&amp;\\\n# Tell openrc loopback and net are already there, since docker handles the networking\n    echo 'rc_provide=\"loopback net\"' &gt;&gt; /etc/rc.conf &amp;&amp;\\\n# no need for loggers\n    sed -i 's/^#\\(rc_logger=\"YES\"\\)$/\\1/' /etc/rc.conf &amp;&amp;\\\n# can't get ttys unless you run the container in privileged mode\n    sed -i '/tty/d' /etc/inittab &amp;&amp;\\\n# can't set hostname since docker sets it\n    sed -i 's/hostname $opts/# hostname $opts/g' /etc/init.d/hostname &amp;&amp;\\\n# can't mount tmpfs since not privileged\n    sed -i 's/mount -t tmpfs/# mount -t tmpfs/g' /lib/rc/sh/init.sh &amp;&amp;\\\n# can't do cgroups\n    sed -i 's/cgroup_add_service /# cgroup_add_service /g' /lib/rc/sh/openrc-run.sh\n\nCOPY ./requirements.txt /usr/local/navitia/docker_navitia/requirements.txt\nRUN pip install -r /usr/local/navitia/docker_navitia/requirements.txt\n\nRUN git clone https://github.com/CanalTP/fabric_navitia.git /usr/local/navitia/fabric_navitia\nRUN pip install -r /usr/local/navitia/fabric_navitia/requirements.txt\n\nENV PYTHONPATH /usr/local/navitia:/usr/local/navitia/docker_navitia:/usr/local/navitia/fabric_navitia:/usr/bin/python\n\n# RUN echo -e '#!/bin/bash\\n/sbin/init &amp;&amp; service docker start' &gt; /usr/local/navitia/entrypoint.sh &amp;&amp; chmod +x /usr/local/navitia/entrypoint.sh\n\nCOPY . /usr/local/navitia/docker_navitia\n\nWORKDIR /usr/local/navitia/docker_navitia\n\nENTRYPOINT [\"/sbin/init\"]\n</code></pre>\n\n<p>And now I need you because I have no more ideas.</p>\n"}, {"tags": ["python"], "answers": [{"tags": [], "owner": {"reputation": 42880, "user_id": 982161, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/kutcC.png?s=128&g=1", "display_name": "\u03a6Xoc\u0119 \uc6c3 \u041fepe&#250;pa \u30c4", "link": "https://stackoverflow.com/users/982161/%ce%a6xoc%c4%99-%ec%9b%83-%d0%9fepe%c3%bapa-%e3%83%84"}, "is_accepted": false, "score": 1, "last_activity_date": 1467230523, "creation_date": 1467230523, "answer_id": 38109061, "question_id": 38109009, "link": "https://stackoverflow.com/questions/38109009/why-does-an-unassigned-string-not-cause-a-compilation-error-in-python/38109061#38109061", "title": "Why does an unassigned string not cause a compilation error in Python?", "body": "<p>Because Pyhthon defines and allows that, aka known as <a href=\"https://docs.python.org/2/reference/simple_stmts.html#expression-statements\" rel=\"nofollow\">expression-statements</a></p>\n\n<p>I quote:</p>\n\n<blockquote>\n  <p>Expression statements are used (mostly interactively) to compute and\n  write a value, or (usually) to call a procedure (a function that\n  returns no meaningful result; in Python, procedures return the value\n  None). Other uses of expression statements are allowed and\n  occasionally useful.  </p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "is_accepted": true, "score": 1, "last_activity_date": 1516989082, "last_edit_date": 1516989082, "creation_date": 1467230896, "answer_id": 38109148, "question_id": 38109009, "link": "https://stackoverflow.com/questions/38109009/why-does-an-unassigned-string-not-cause-a-compilation-error-in-python/38109148#38109148", "title": "Why does an unassigned string not cause a compilation error in Python?", "body": "<p>As in many languages, it is perfectly valid to have an expression that is not assigned to a variable.</p>\n\n<pre><code>3.14\n\"Boo!\"\nFalse\n2 + 2\ncallable(func) and func()\n</code></pre>\n\n<p>Python will print the results of such expressions when they are executed interactively, but in a script, these values are simply discarded. </p>\n\n<p>Such expressions may actually have side effects (such as the last one, which calls <code>func</code> if it's callable, and <code>func</code> can do anything at all) so it is not necessarily pointless to write such code.  In fact, a call to a function that does not return anything you need to keep around afterward is exactly the sort of thing you're objecting to, and is obviously useful.</p>\n"}], "owner": {"reputation": 160, "user_id": 6529424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AehrV.png?s=128&g=1", "display_name": "eagle33322", "link": "https://stackoverflow.com/users/6529424/eagle33322"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 38109148, "answer_count": 2, "score": 0, "last_activity_date": 1516989082, "creation_date": 1467230337, "last_edit_date": 1516977990, "question_id": 38109009, "link": "https://stackoverflow.com/questions/38109009/why-does-an-unassigned-string-not-cause-a-compilation-error-in-python", "title": "Why does an unassigned string not cause a compilation error in Python?", "body": "<p>In my workings with python, I have sometimes found that I deleted a variable and just left the string inline in my code. I have noticed you can do this and there is no notification at all from the compiler or any runtime error when this occurs. Can someone tell me why this does not error out?</p>\n\n<pre><code>c = 1\n\"this causes no error or notification to the developer\"\nb = 2\n</code></pre>\n\n<p>This appears to work just like a docstring but there is no triple quotes, just a single set. I could not find any documentation on the subject.</p>\n"}, {"tags": ["python", "django"], "comments": [{"owner": {"reputation": 166, "user_id": 818601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/790c71ff15f39de08719f19464ed2b5c?s=128&d=identicon&r=PG", "display_name": "jeasoft", "link": "https://stackoverflow.com/users/818601/jeasoft"}, "edited": false, "score": 1, "creation_date": 1467231798, "post_id": 38108887, "comment_id": 63652299, "body": "Are you using something like virtualenv to manage this project? Maybe you are trying to run this outsite your virtualenv."}, {"owner": {"reputation": 1708, "user_id": 3569921, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/077N5.jpg?s=128&g=1", "display_name": "marcusshep", "link": "https://stackoverflow.com/users/3569921/marcusshep"}, "edited": false, "score": 1, "creation_date": 1467233735, "post_id": 38108887, "comment_id": 63653278, "body": "probably because you&#39;re running the manage.py as sudo"}, {"owner": {"reputation": 7068, "user_id": 3837778, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/12c217d346b797e1a9b4d34b9aa91dce?s=128&d=identicon&r=PG&f=1", "display_name": "BAE", "link": "https://stackoverflow.com/users/3837778/bae"}, "reply_to_user": {"reputation": 1708, "user_id": 3569921, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/077N5.jpg?s=128&g=1", "display_name": "marcusshep", "link": "https://stackoverflow.com/users/3569921/marcusshep"}, "edited": false, "score": 0, "creation_date": 1467251267, "post_id": 38108887, "comment_id": 63658864, "body": "@marcusshep Thanks. Could you please give more details?"}, {"owner": {"reputation": 7068, "user_id": 3837778, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/12c217d346b797e1a9b4d34b9aa91dce?s=128&d=identicon&r=PG&f=1", "display_name": "BAE", "link": "https://stackoverflow.com/users/3837778/bae"}, "reply_to_user": {"reputation": 1708, "user_id": 3569921, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/077N5.jpg?s=128&g=1", "display_name": "marcusshep", "link": "https://stackoverflow.com/users/3569921/marcusshep"}, "edited": false, "score": 0, "creation_date": 1467296056, "post_id": 38108887, "comment_id": 63682526, "body": "@marcusshep I tried to run the command without sudo, but still the error."}, {"owner": {"reputation": 7068, "user_id": 3837778, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/12c217d346b797e1a9b4d34b9aa91dce?s=128&d=identicon&r=PG&f=1", "display_name": "BAE", "link": "https://stackoverflow.com/users/3837778/bae"}, "reply_to_user": {"reputation": 166, "user_id": 818601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/790c71ff15f39de08719f19464ed2b5c?s=128&d=identicon&r=PG", "display_name": "jeasoft", "link": "https://stackoverflow.com/users/818601/jeasoft"}, "edited": false, "score": 0, "creation_date": 1467296094, "post_id": 38108887, "comment_id": 63682556, "body": "@Jeasoft I didnot use virtualenv for the project now."}, {"owner": {"reputation": 166, "user_id": 818601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/790c71ff15f39de08719f19464ed2b5c?s=128&d=identicon&r=PG", "display_name": "jeasoft", "link": "https://stackoverflow.com/users/818601/jeasoft"}, "edited": false, "score": 0, "creation_date": 1467670984, "post_id": 38108887, "comment_id": 63811215, "body": "You can do this. Download the package and put in the same place of your apps. Ex. manage.py, yourproject_dir, app1_dir, bootstrapform, app3_dir"}, {"owner": {"reputation": 1525, "user_id": 8560167, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/771a1fbc63e1352dda847582c3e7dba2?s=128&d=identicon&r=PG&f=1", "display_name": "sygneto", "link": "https://stackoverflow.com/users/8560167/sygneto"}, "edited": false, "score": 0, "creation_date": 1600952472, "post_id": 38108887, "comment_id": 113256032, "body": "hi, how you solved that problem, i have same issue here. already installer django-bootstrap-form, but not working"}], "owner": {"reputation": 7068, "user_id": 3837778, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/12c217d346b797e1a9b4d34b9aa91dce?s=128&d=identicon&r=PG&f=1", "display_name": "BAE", "link": "https://stackoverflow.com/users/3837778/bae"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 270, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1467229878, "creation_date": 1467229878, "question_id": 38108887, "link": "https://stackoverflow.com/questions/38108887/django-cannot-import-installed-app", "title": "django: cannot import installed app", "body": "<p>My django project cannot find bootstrapform below:</p>\n\n<pre><code>INSTALLED_APPS = (\n     # 3rd party apps\n    'bootstrapform',\n)\n</code></pre>\n\n<p>But the installed bootstrapform egg is in the sys.path (otherprojects is not my django projects):</p>\n\n<pre><code>&gt;&gt;&gt; import sys\n&gt;&gt;&gt; print sys.path\n['','/opt/pkgs/otherprojects/lib/python2.7/site-packages/django_bootstrap_form-3.0-py2.7.egg',]\n&gt;&gt;&gt; \n</code></pre>\n\n<p>but the error:</p>\n\n<pre><code>sudo /usr/bin/python /opt/pkgs/xxx/manage.py myschd\n    ImportError: No module named bootstrapform\n</code></pre>\n\n<p><strong>Any idea? Thanks.</strong></p>\n"}, {"tags": ["python", "scikit-learn", "decision-tree"], "answers": [{"comments": [{"owner": {"reputation": 965, "user_id": 6461850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8db0a28a767bedbb0fb1aafb52903c89?s=128&d=identicon&r=PG&f=1", "display_name": "0xhfff", "link": "https://stackoverflow.com/users/6461850/0xhfff"}, "edited": false, "score": 0, "creation_date": 1467230404, "post_id": 38108946, "comment_id": 63651577, "body": "Yeah, that wat a usually do, but for printing it is not really good."}, {"owner": {"reputation": 165, "user_id": 6495780, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abbc49c52c3255613e1c47f89190a76a?s=128&d=identicon&r=PG&f=1", "display_name": "mrwyatt", "link": "https://stackoverflow.com/users/6495780/mrwyatt"}, "reply_to_user": {"reputation": 965, "user_id": 6461850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8db0a28a767bedbb0fb1aafb52903c89?s=128&d=identicon&r=PG&f=1", "display_name": "0xhfff", "link": "https://stackoverflow.com/users/6461850/0xhfff"}, "edited": false, "score": 0, "creation_date": 1467230474, "post_id": 38108946, "comment_id": 63651619, "body": "If you want to go from integer back to string representation, make a dictionary that holds the mapping between string and integer and use that to &quot;decode&quot; the integer representation."}, {"owner": {"reputation": 2680, "user_id": 1166801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3221554440ad27d4f7df255e333b235?s=128&d=identicon&r=PG", "display_name": "Abhinav Arora", "link": "https://stackoverflow.com/users/1166801/abhinav-arora"}, "edited": false, "score": 1, "creation_date": 1467233216, "post_id": 38108946, "comment_id": 63653000, "body": "The statement is inaccurate. Scikit-learn classifiers don&#39;t implicitly handle label encoding. However, Scikit-learn provides a lot of classes to handle this. I would recommend using scikit learn tools because they can also be fit in a Machine Learning Pipeline with minimal effort."}], "tags": [], "owner": {"reputation": 165, "user_id": 6495780, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abbc49c52c3255613e1c47f89190a76a?s=128&d=identicon&r=PG&f=1", "display_name": "mrwyatt", "link": "https://stackoverflow.com/users/6495780/mrwyatt"}, "is_accepted": false, "score": 2, "last_activity_date": 1467230125, "creation_date": 1467230125, "answer_id": 38108946, "question_id": 38108832, "link": "https://stackoverflow.com/questions/38108832/passing-categorical-data-to-sklearn-decision-tree/38108946#38108946", "title": "Passing categorical data to Sklearn Decision Tree", "body": "<p>Sklearn Decision Trees do not handle conversion of categorical strings to numbers.  I suggest you find a function in Sklearn (maybe <a href=\"http://scikit-learn.org/stable/modules/generated/sklearn.feature_extraction.FeatureHasher.html\" rel=\"nofollow\">this</a>) that does so or manually write some code like:</p>\n\n<pre><code>def cat2int(column):\n    vals = list(set(column))\n    for i, string in enumerate(column):\n        column[i] = vals.index(string)\n    return column\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 6627, "user_id": 2550114, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/R8VYt.png?s=128&g=1", "display_name": "James Owers", "link": "https://stackoverflow.com/users/2550114/james-owers"}, "edited": false, "score": 159, "creation_date": 1475791778, "post_id": 38109663, "comment_id": 67098157, "body": "-1 this is misleading. As it stands, sklearn decision trees do not handle categorical data - <a href=\"https://github.com/scikit-learn/scikit-learn/issues/5442\" rel=\"nofollow noreferrer\">see issue #5442</a>. This approach of using Label Encoding converts to integers which the <code>DecisionTreeClassifier()</code> <b>will treat as numeric</b>. If your categorical data is not ordinal, this is not good - you&#39;ll end up with splits that do not make sense. Using a <code>OneHotEncoder</code> is the only current valid way, but is computationally expensive."}, {"owner": {"reputation": 380, "user_id": 4255910, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/QZGJB.jpg?s=128&g=1", "display_name": "Minu", "link": "https://stackoverflow.com/users/4255910/minu"}, "edited": false, "score": 0, "creation_date": 1493913990, "post_id": 38109663, "comment_id": 74616271, "body": "@Abhinav, Is it possible to apply the <code>LabelEncoder</code> on more than one column of a dataframe at once? For instance, in the dataframe from the question, can we do something like <code>le.fit_transform(data[[&#39;A&#39;,&#39;B&#39;,&#39;C&#39;]])</code> to get  labels for all categorical columns at once? Or should be specify the categorical columns explicitly to convert just the categorical columns."}, {"owner": {"reputation": 380, "user_id": 4255910, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/QZGJB.jpg?s=128&g=1", "display_name": "Minu", "link": "https://stackoverflow.com/users/4255910/minu"}, "reply_to_user": {"reputation": 6627, "user_id": 2550114, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/R8VYt.png?s=128&g=1", "display_name": "James Owers", "link": "https://stackoverflow.com/users/2550114/james-owers"}, "edited": false, "score": 0, "creation_date": 1493914108, "post_id": 38109663, "comment_id": 74616351, "body": "@kungfujam, Also, I would like to <code>One-Hot Encode</code> the categorical columns once I <code>LabelEncode</code> them - to address the issue that @kungfujam pointed out. How can I do that once I get the label encoding done?"}, {"owner": {"reputation": 933, "user_id": 1374228, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/db4cbce4d254722e59037ede98ca51fd?s=128&d=identicon&r=PG", "display_name": "Pradeep Banavara", "link": "https://stackoverflow.com/users/1374228/pradeep-banavara"}, "edited": false, "score": 22, "creation_date": 1516706186, "post_id": 38109663, "comment_id": 83788559, "body": "This is highly misleading. Please don&#39;t convert strings to numbers and use in decision trees. There is no way to handle categorical data in scikit-learn. One option is to use the decision tree classifier in Spark - in which you can explicitly declare the categorical features and their ordinality. Refer here for more details <a href=\"https://github.com/scikit-learn/scikit-learn/pull/4899\" rel=\"nofollow noreferrer\">github.com/scikit-learn/scikit-learn/pull/4899</a>"}, {"owner": {"reputation": 4107, "user_id": 4379026, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ce3b0fac80a2bcf2dd321bedcdbc240?s=128&d=identicon&r=PG&f=1", "display_name": "mattsap", "link": "https://stackoverflow.com/users/4379026/mattsap"}, "edited": false, "score": 0, "creation_date": 1547571688, "post_id": 38109663, "comment_id": 95233929, "body": "The interesting thing is that if you encode categorical data to numerical data, it can be used by any model since <i>I think</i> all models accept numerical data."}, {"owner": {"reputation": 1675, "user_id": 8235224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1991af569ece2f0db434f6004c1157c?s=128&d=identicon&r=PG&f=1", "display_name": "Regi Mathew", "link": "https://stackoverflow.com/users/8235224/regi-mathew"}, "edited": false, "score": 6, "creation_date": 1554467705, "post_id": 38109663, "comment_id": 97774291, "body": "Everybody must learn Scales of Measurement viz Nominal, Ordinal, Interval and Ratio scales. Number doesn&#39;t mean it is numerical in Nominal scale; it is just a flag. For example we may use 1 for Red, 2 for Blue and 3 for Green. Let&#39;s say 10 persons preferred Red and 10 preferred Green. Does it make sense to calculate the mean ((10*1+10*3)/20 = 2) and state that on an average preference is for Blue??"}, {"owner": {"reputation": 2123, "user_id": 4755520, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hLwF0.jpg?s=128&g=1", "display_name": "ayorgo", "link": "https://stackoverflow.com/users/4755520/ayorgo"}, "reply_to_user": {"reputation": 6627, "user_id": 2550114, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/R8VYt.png?s=128&g=1", "display_name": "James Owers", "link": "https://stackoverflow.com/users/2550114/james-owers"}, "edited": false, "score": 0, "creation_date": 1562079430, "post_id": 38109663, "comment_id": 100260510, "body": "@JamesOwers it&#39;s definitely worth turning your comment to an answer."}, {"owner": {"reputation": 6627, "user_id": 2550114, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/R8VYt.png?s=128&g=1", "display_name": "James Owers", "link": "https://stackoverflow.com/users/2550114/james-owers"}, "reply_to_user": {"reputation": 2123, "user_id": 4755520, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hLwF0.jpg?s=128&g=1", "display_name": "ayorgo", "link": "https://stackoverflow.com/users/4755520/ayorgo"}, "edited": false, "score": 2, "creation_date": 1562087418, "post_id": 38109663, "comment_id": 100264498, "body": "Er...I had no idea it had that much attention. Cheers @ayorgo, will do!"}, {"owner": {"reputation": 1357, "user_id": 5260441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-64XbuhmszQs/AAAAAAAAAAI/AAAAAAAAH24/MjM20zgstME/photo.jpg?sz=128", "display_name": "Daniel Severo", "link": "https://stackoverflow.com/users/5260441/daniel-severo"}, "edited": false, "score": 1, "creation_date": 1575923095, "post_id": 38109663, "comment_id": 104721612, "body": "So this is why my intern candidates have no clue on how to treat categorical variables."}], "tags": [], "owner": {"reputation": 2680, "user_id": 1166801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3221554440ad27d4f7df255e333b235?s=128&d=identicon&r=PG", "display_name": "Abhinav Arora", "link": "https://stackoverflow.com/users/1166801/abhinav-arora"}, "is_accepted": true, "score": -4, "last_activity_date": 1550157831, "last_edit_date": 1550157831, "creation_date": 1467232871, "answer_id": 38109663, "question_id": 38108832, "link": "https://stackoverflow.com/questions/38108832/passing-categorical-data-to-sklearn-decision-tree/38109663#38109663", "title": "Passing categorical data to Sklearn Decision Tree", "body": "<p>Contrary to the accepted answer, I would prefer to use tools provided by Scikit-Learn for this purpose. The main reason for doing so is that they can be easily integrated in a <a href=\"http://scikit-learn.org/stable/modules/pipeline.html#pipeline\" rel=\"nofollow noreferrer\">Pipeline</a>.</p>\n\n<p>Scikit-Learn itself provides very good classes to handle categorical data. Instead of writing your custom function, you should use <a href=\"http://scikit-learn.org/stable/modules/generated/sklearn.preprocessing.LabelEncoder.html\" rel=\"nofollow noreferrer\"><code>LabelEncoder</code></a> which is <strong>specially designed for this purpose</strong>.</p>\n\n<p>Refer to the following code from the documentation:</p>\n\n<pre><code>from sklearn import preprocessing\nle = preprocessing.LabelEncoder()\nle.fit([\"paris\", \"paris\", \"tokyo\", \"amsterdam\"])\nle.transform([\"tokyo\", \"tokyo\", \"paris\"]) \n</code></pre>\n\n<p>This automatically encodes them into numbers for your machine learning algorithms. Now this also supports going back to strings from integers. You can do this by simply calling <code>inverse_transform</code> as follows:</p>\n\n<pre><code>list(le.inverse_transform([2, 2, 1]))\n</code></pre>\n\n<p>This would return <code>['tokyo', 'tokyo', 'paris']</code>.</p>\n\n<p>Also note that for many other classifiers, apart from decision trees, such as logistic regression or SVM, you would like to encode your categorical variables using <a href=\"https://en.wikipedia.org/wiki/One-hot\" rel=\"nofollow noreferrer\">One-Hot encoding</a>. Scikit-learn supports this as well through the <a href=\"http://scikit-learn.org/stable/modules/generated/sklearn.preprocessing.OneHotEncoder.html\" rel=\"nofollow noreferrer\"><code>OneHotEncoder</code></a> class.</p>\n\n<p>Hope this helps!</p>\n"}, {"comments": [{"owner": {"reputation": 2012, "user_id": 7127519, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1slUcgYvfqQ/AAAAAAAAAAI/AAAAAAAABC0/_dYlpOFI_K4/photo.jpg?sz=128", "display_name": "Rafael Valero", "link": "https://stackoverflow.com/users/7127519/rafael-valero"}, "edited": false, "score": 2, "creation_date": 1535030246, "post_id": 51624006, "comment_id": 90922919, "body": "You may want to play around &#39;pd.get_dummies&#39; , for example the option &#39;drop_first = True&#39; could help to avoid multicolinearity problems. <a href=\"https://www.youtube.com/watch?v=0s_1IsROgDc\" rel=\"nofollow noreferrer\">Here</a> there is a nice tutorial."}], "tags": [], "owner": {"reputation": 1925, "user_id": 9878876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/677f9b5f1dd05fa8662a7794f90f3eb6?s=128&d=identicon&r=PG&f=1", "display_name": "Guillaume", "link": "https://stackoverflow.com/users/9878876/guillaume"}, "is_accepted": false, "score": 16, "last_activity_date": 1536096644, "last_edit_date": 1592644375, "creation_date": 1533085542, "answer_id": 51624006, "question_id": 38108832, "link": "https://stackoverflow.com/questions/38108832/passing-categorical-data-to-sklearn-decision-tree/51624006#51624006", "title": "Passing categorical data to Sklearn Decision Tree", "body": "<blockquote>\n<p>(..)</p>\n<p>Able to handle both numerical and categorical data.</p>\n</blockquote>\n<p>This only means that you can use</p>\n<ul>\n<li>the DecisionTreeClassifier class for classification problems</li>\n<li>the DecisionTreeRegressor class for regression.</li>\n</ul>\n<p>In any case you need to one-hot encode categorical variables before you fit a tree with sklearn, like so:</p>\n<pre><code>import pandas as pd\nfrom sklearn.tree import DecisionTreeClassifier\n\ndata = pd.DataFrame()\ndata['A'] = ['a','a','b','a']\ndata['B'] = ['b','b','a','b']\ndata['C'] = [0, 0, 1, 0]\ndata['Class'] = ['n','n','y','n']\n\ntree = DecisionTreeClassifier()\n\none_hot_data = pd.get_dummies(data[['A','B','C']],drop_first=True)\ntree.fit(one_hot_data, data['Class'])\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 141, "user_id": 4419426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb32395d23328b190832a45ba58d7513?s=128&d=identicon&r=PG", "display_name": "Arun", "link": "https://stackoverflow.com/users/4419426/arun"}, "edited": false, "score": 3, "creation_date": 1580334559, "post_id": 56857255, "comment_id": 106067940, "body": "OneHotEncoding can deteriorate the performance of decision trees apparently as it leads to extremely sparse features, which can mess up feature importances <a href=\"https://roamanalytics.com/2016/10/28/are-categorical-variables-getting-lost-in-your-random-forests/\" rel=\"nofollow noreferrer\">roamanalytics.com/2016/10/28/&hellip;</a>"}, {"owner": {"reputation": 6627, "user_id": 2550114, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/R8VYt.png?s=128&g=1", "display_name": "James Owers", "link": "https://stackoverflow.com/users/2550114/james-owers"}, "reply_to_user": {"reputation": 141, "user_id": 4419426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb32395d23328b190832a45ba58d7513?s=128&d=identicon&r=PG", "display_name": "Arun", "link": "https://stackoverflow.com/users/4419426/arun"}, "edited": false, "score": 1, "creation_date": 1582562946, "post_id": 56857255, "comment_id": 106811887, "body": "Agreed - I&#39;m not recommending this approach, but it&#39;s the only way to avoid the issue I describe at present."}, {"owner": {"reputation": 3186, "user_id": 10495893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4324cfa200c7187de4c59a8735739628?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Reiniger", "link": "https://stackoverflow.com/users/10495893/ben-reiniger"}, "edited": false, "score": 0, "creation_date": 1595281459, "post_id": 56857255, "comment_id": 111415350, "body": "I suspect there are instances (with features with many small levels) where the &quot;nonsense&quot; splits on an ordinally-encoded categorical feature nevertheless produce better performance than the very limited splits on the one-hot-encoded feature."}, {"owner": {"reputation": 1020, "user_id": 5403632, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-L1_DVj5uYSg/AAAAAAAAAAI/AAAAAAAABMw/LOuPEP17RZM/photo.jpg?sz=128", "display_name": "Modem Rakesh goud", "link": "https://stackoverflow.com/users/5403632/modem-rakesh-goud"}, "edited": false, "score": 0, "creation_date": 1596710158, "post_id": 56857255, "comment_id": 111901017, "body": "is there any other implementation of Decision tree classifier which can handle this?"}, {"owner": {"reputation": 6627, "user_id": 2550114, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/R8VYt.png?s=128&g=1", "display_name": "James Owers", "link": "https://stackoverflow.com/users/2550114/james-owers"}, "edited": false, "score": 1, "creation_date": 1619012567, "post_id": 56857255, "comment_id": 118776463, "body": "To update: this Pull Request (and the discussion within) may be of interest: <a href=\"https://github.com/scikit-learn/scikit-learn/pull/12866\" rel=\"nofollow noreferrer\">github.com/scikit-learn/scikit-learn/pull/12866</a>"}], "tags": [], "owner": {"reputation": 6627, "user_id": 2550114, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/R8VYt.png?s=128&g=1", "display_name": "James Owers", "link": "https://stackoverflow.com/users/2550114/james-owers"}, "is_accepted": false, "score": 74, "last_activity_date": 1563967531, "last_edit_date": 1563967531, "creation_date": 1562087553, "answer_id": 56857255, "question_id": 38108832, "link": "https://stackoverflow.com/questions/38108832/passing-categorical-data-to-sklearn-decision-tree/56857255#56857255", "title": "Passing categorical data to Sklearn Decision Tree", "body": "<p>(This is just a reformat of <a href=\"https://stackoverflow.com/questions/38108832/passing-categorical-data-to-sklearn-decision-tree/56857255#comment67098157_38109663\">my comment above</a> from 2016...it still holds true.)</p>\n\n<p>The accepted answer for this question is misleading.</p>\n\n<p>As it stands, sklearn decision trees do not handle categorical data - <a href=\"https://github.com/scikit-learn/scikit-learn/issues/5442\" rel=\"noreferrer\">see issue #5442</a>.</p>\n\n<p>The recommended approach of using Label Encoding converts to integers which the <code>DecisionTreeClassifier()</code> will treat <strong>as numeric</strong>. If your categorical data is not ordinal, this is not good - you'll end up with splits that do not make sense. </p>\n\n<p>Using a <code>OneHotEncoder</code> is the only current valid way, allowing arbitrary splits not dependent on the label ordering, but is computationally expensive.</p>\n"}, {"tags": [], "owner": {"reputation": 71, "user_id": 12469255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5b2c138ac9a6edf498169c2f8cacc3c?s=128&d=identicon&r=PG&f=1", "display_name": "C&#233;dric Gaudissart", "link": "https://stackoverflow.com/users/12469255/c%c3%a9dric-gaudissart"}, "is_accepted": false, "score": 7, "last_activity_date": 1575309244, "creation_date": 1575309244, "answer_id": 59144284, "question_id": 38108832, "link": "https://stackoverflow.com/questions/38108832/passing-categorical-data-to-sklearn-decision-tree/59144284#59144284", "title": "Passing categorical data to Sklearn Decision Tree", "body": "<p>For nominal categorical variables, I would not use <code>LabelEncoder</code>but  <code>sklearn.preprocessing.OneHotEncoder</code> or <code>pandas.get_dummies</code> instead because there is usually no order in these type of variables.   </p>\n"}, {"comments": [{"owner": {"reputation": 1511, "user_id": 1979665, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/bdb45b0396e6579f551c10aa3d77e6a4?s=128&d=identicon&r=PG", "display_name": "umbe1987", "link": "https://stackoverflow.com/users/1979665/umbe1987"}, "edited": false, "score": 0, "creation_date": 1616509087, "post_id": 66385002, "comment_id": 118020276, "body": "Sorry for the ignorant question, but does it have to do with Decision Trees? If so, can you please provide an example on how can we now use categorical variables with Decision Tree (I am a noob...)?"}, {"owner": {"reputation": 1437, "user_id": 4570466, "user_type": "registered", "profile_image": "https://graph.facebook.com/1628685272/picture?type=large", "display_name": "remykarem", "link": "https://stackoverflow.com/users/4570466/remykarem"}, "edited": false, "score": 0, "creation_date": 1616934277, "post_id": 66385002, "comment_id": 118152382, "body": "This is gradient boosting. OP is asking for decision tree."}], "tags": [], "owner": {"reputation": 2317, "user_id": 4466589, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/uPR5Y.jpg?s=128&g=1", "display_name": "Bora M. Alper", "link": "https://stackoverflow.com/users/4466589/bora-m-alper"}, "is_accepted": false, "score": 0, "last_activity_date": 1614341258, "last_edit_date": 1614341258, "creation_date": 1614338864, "answer_id": 66385002, "question_id": 38108832, "link": "https://stackoverflow.com/questions/38108832/passing-categorical-data-to-sklearn-decision-tree/66385002#66385002", "title": "Passing categorical data to Sklearn Decision Tree", "body": "<p>As of <a href=\"https://scikit-learn.org/stable/auto_examples/release_highlights/plot_release_highlights_0_24_0.html#native-support-for-categorical-features-in-histgradientboosting-estimators\" rel=\"nofollow noreferrer\">v0.24.0</a>, scikit supports the use of categorical features in <code>HistGradientBoostingClassifier</code> and <code>HistGradientBoostingRegressor</code> <em><a href=\"https://scikit-learn.org/stable/modules/generated/sklearn.ensemble.HistGradientBoostingClassifier.html#sklearn.ensemble.HistGradientBoostingClassifier\" rel=\"nofollow noreferrer\">natively</a></em>!</p>\n<blockquote>\n<p>To enable categorical support, a boolean mask can be passed to the categorical_features parameter, indicating which feature is categorical. In the following, the first feature will be treated as categorical and the second feature as numerical:</p>\n<pre class=\"lang-py prettyprint-override\"><code>&gt;&gt;&gt; gbdt = HistGradientBoostingClassifier(categorical_features=[True, False])\n</code></pre>\n<p>Equivalently, one can pass a list of integers indicating the indices of the categorical features:</p>\n<pre class=\"lang-py prettyprint-override\"><code>&gt;&gt;&gt; gbdt = HistGradientBoostingClassifier(categorical_features=[0])\n</code></pre>\n</blockquote>\n<p>You still need to encode your strings, otherwise you will get &quot;could not convert string to float&quot; error. See <a href=\"https://scikit-learn.org/stable/auto_examples/ensemble/plot_gradient_boosting_categorical.html#gradient-boosting-estimator-with-native-categorical-support\" rel=\"nofollow noreferrer\">here</a> for an example on using <code>OrdinalEncoder</code> to convert strings to integers.</p>\n"}], "owner": {"reputation": 965, "user_id": 6461850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8db0a28a767bedbb0fb1aafb52903c89?s=128&d=identicon&r=PG&f=1", "display_name": "0xhfff", "link": "https://stackoverflow.com/users/6461850/0xhfff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92608, "favorite_count": 24, "accepted_answer_id": 38109663, "answer_count": 6, "score": 85, "last_activity_date": 1614341258, "creation_date": 1467229666, "last_edit_date": 1595866455, "question_id": 38108832, "link": "https://stackoverflow.com/questions/38108832/passing-categorical-data-to-sklearn-decision-tree", "title": "Passing categorical data to Sklearn Decision Tree", "body": "<p>There are several posts about how to encode categorical data to Sklearn Decision trees, but from Sklearn documentation, we got these</p>\n<blockquote>\n<p>Some advantages of decision trees are:</p>\n<p>(...)</p>\n<p>Able to handle both numerical and categorical data. Other techniques are usually specialized in analyzing datasets that have only one type of variable. See the algorithms for more information.</p>\n</blockquote>\n<p>But running the following script</p>\n<pre class=\"lang-python prettyprint-override\"><code>import pandas as pd \nfrom sklearn.tree import DecisionTreeClassifier\n\ndata = pd.DataFrame()\ndata['A'] = ['a','a','b','a']\ndata['B'] = ['b','b','a','b']\ndata['C'] = [0, 0, 1, 0]\ndata['Class'] = ['n','n','y','n']\n\ntree = DecisionTreeClassifier()\ntree.fit(data[['A','B','C']], data['Class'])\n</code></pre>\n<p>outputs the following error:</p>\n<pre><code>Traceback (most recent call last):\n  File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;\n  File &quot;/usr/local/lib/python2.7/site-packages/sklearn/tree/tree.py&quot;, line 154, in fit\n    X = check_array(X, dtype=DTYPE, accept_sparse=&quot;csc&quot;)\n  File &quot;/usr/local/lib/python2.7/site-packages/sklearn/utils/validation.py&quot;, line 377, in check_array\n    array = np.array(array, dtype=dtype, order=order, copy=copy)\nValueError: could not convert string to float: b\n</code></pre>\n<p>I know that in R it is possible to pass categorical data, with Sklearn, is it possible?</p>\n"}, {"tags": ["python", "matplotlib", "graph", "pause"], "comments": [{"owner": {"reputation": 623, "user_id": 4618553, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64dbdd775be16db289526044e035ee18?s=128&d=identicon&r=PG&f=1", "display_name": "kirkpatt", "link": "https://stackoverflow.com/users/4618553/kirkpatt"}, "edited": false, "score": 0, "creation_date": 1467229748, "post_id": 38108726, "comment_id": 63651255, "body": "<a href=\"http://stackoverflow.com/questions/11874767/real-time-plotting-in-while-loop-with-matplotlib\">This</a> SO question might assist you. The accepted answer has something about pausing, which you could probably use in your own code with a bit of tweaking."}, {"owner": {"reputation": 11, "user_id": 6500243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/486633ffb3fe93755ca33e33a32255d2?s=128&d=identicon&r=PG&f=1", "display_name": "nezz", "link": "https://stackoverflow.com/users/6500243/nezz"}, "reply_to_user": {"reputation": 623, "user_id": 4618553, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64dbdd775be16db289526044e035ee18?s=128&d=identicon&r=PG&f=1", "display_name": "kirkpatt", "link": "https://stackoverflow.com/users/4618553/kirkpatt"}, "edited": false, "score": 0, "creation_date": 1467230002, "post_id": 38108726, "comment_id": 63651373, "body": "@kirkpatt: I am able to give a pause to my real time stream but I want to pause externally as in by clicking mouse or using keyboard."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 6500243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/486633ffb3fe93755ca33e33a32255d2?s=128&d=identicon&r=PG&f=1", "display_name": "nezz", "link": "https://stackoverflow.com/users/6500243/nezz"}, "edited": false, "score": 0, "creation_date": 1467296528, "post_id": 38120515, "comment_id": 63682928, "body": "Hi @bart : Now, I am able to pause the plots, but the problem I am facing is that my scatter plot gets paused and shows the still figure but the pie chart (another subplot) vanishes. How to overcome this issue. Thanks"}, {"owner": {"reputation": 8028, "user_id": 3581217, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d9103199ae078d2112c1f021a839bea7?s=128&d=identicon&r=PG", "display_name": "Bart", "link": "https://stackoverflow.com/users/3581217/bart"}, "reply_to_user": {"reputation": 11, "user_id": 6500243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/486633ffb3fe93755ca33e33a32255d2?s=128&d=identicon&r=PG&f=1", "display_name": "nezz", "link": "https://stackoverflow.com/users/6500243/nezz"}, "edited": false, "score": 0, "creation_date": 1467300140, "post_id": 38120515, "comment_id": 63685895, "body": "You will have to provide us with more info / code, otherwise we would have to make very wild guesses on what <i>might</i> go wrong."}, {"owner": {"reputation": 11, "user_id": 6500243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/486633ffb3fe93755ca33e33a32255d2?s=128&d=identicon&r=PG&f=1", "display_name": "nezz", "link": "https://stackoverflow.com/users/6500243/nezz"}, "edited": false, "score": 0, "creation_date": 1467301765, "post_id": 38120515, "comment_id": 63687115, "body": "Hi @bart  I edited my post.. Please look into it. I am making two subplots: scatter plot and pie chart. Now I am able to pause the plot but pie chart disappears when I pause and it appears again when I reclick to start the plot. Thanks"}, {"owner": {"reputation": 8028, "user_id": 3581217, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d9103199ae078d2112c1f021a839bea7?s=128&d=identicon&r=PG", "display_name": "Bart", "link": "https://stackoverflow.com/users/3581217/bart"}, "reply_to_user": {"reputation": 11, "user_id": 6500243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/486633ffb3fe93755ca33e33a32255d2?s=128&d=identicon&r=PG&f=1", "display_name": "nezz", "link": "https://stackoverflow.com/users/6500243/nezz"}, "edited": false, "score": 0, "creation_date": 1467302455, "post_id": 38120515, "comment_id": 63687591, "body": "I don&#39;t see why your code won&#39;t work; my reduced version of it (I added it to my answer) works without a problem. So if you need more help, please reproduce the problem with a minimal example, otherwise we really can&#39;t help."}, {"owner": {"reputation": 11, "user_id": 6500243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/486633ffb3fe93755ca33e33a32255d2?s=128&d=identicon&r=PG&f=1", "display_name": "nezz", "link": "https://stackoverflow.com/users/6500243/nezz"}, "edited": false, "score": 0, "creation_date": 1467322027, "post_id": 38120515, "comment_id": 63698208, "body": "Thanks a lot @Bart ! I made a change of ay.cla() instead of plt.cla(). Now it is working fine!"}], "tags": [], "owner": {"reputation": 8028, "user_id": 3581217, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d9103199ae078d2112c1f021a839bea7?s=128&d=identicon&r=PG", "display_name": "Bart", "link": "https://stackoverflow.com/users/3581217/bart"}, "is_accepted": false, "score": 0, "last_activity_date": 1467302386, "last_edit_date": 1495540349, "creation_date": 1467282610, "answer_id": 38120515, "question_id": 38108726, "link": "https://stackoverflow.com/questions/38108726/on-click-pause-the-real-time-plot-of-data/38120515#38120515", "title": "on click pause the real time plot of data", "body": "<p>There are more elegant methods of achieving this (using <code>matplotlib.animation</code>, see e.g. this: <a href=\"https://stackoverflow.com/a/16733373/3581217\">https://stackoverflow.com/a/16733373/3581217</a> answer), but within the spirit of the example that you provided, this functionally works: </p>\n\n<pre><code>import matplotlib.pylab as pl\n\npause = False\n\ndef onClick(event):\n    global pause\n    pause ^= True\n\nfig = pl.figure()\nfig.canvas.mpl_connect('button_press_event', onClick)\n\nnt = 100\nt = 0\nwhile t &lt; nt:\n    if not pause:\n        # do stuff\n        print(\"update plot!\")\n        t += 1\n    else:\n        print(\"paused\")\n    pl.pause(0.1)\n</code></pre>\n\n<p>The trick is to make <code>pause</code> a <code>global</code> variable (you were setting it in your <code>onClick</code> function, but also inside the loop...?), the <code>onClick</code> function toggles (<code>^=</code>) <code>pause</code> between <code>True/False</code>, and based on the state of <code>pause</code> you either <em>\"do stuff\"</em> or not. </p>\n\n<p>But again, it might make more sense to look into <code>matplotlib.animation</code>...</p>\n\n<p><em>EDIT based on comments below</em>\nI don't see where your updated code goes wrong; this minimal example updates both the <code>scatter</code> and <code>pie</code> charts without a problem.</p>\n\n<pre><code>import matplotlib.pylab as plt\nimport numpy as np\n\npause = False\n\ndef onClick(event):\n    global pause\n    pause ^= True\n\nfig = plt.figure()\nfig.canvas.mpl_connect('button_press_event', onClick)\n\nnt = 100\nx = np.random.random(nt+4)\ny = np.random.random(nt+4)\ns = np.random.random(nt+4)\n\nt = 0\nwhile t &lt; nt:\n    if not pause:\n        ax = fig.add_subplot(2,1,1)\n        ay = fig.add_subplot(2,1,2)\n\n        ax.scatter(x[t:t+4], y[t:t+4])\n        ay.pie(s[t:t+4])\n        t += 1\n    plt.pause(0.1)\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 6500243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/486633ffb3fe93755ca33e33a32255d2?s=128&d=identicon&r=PG&f=1", "display_name": "nezz", "link": "https://stackoverflow.com/users/6500243/nezz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 732, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1467302386, "creation_date": 1467229348, "last_edit_date": 1467301676, "question_id": 38108726, "link": "https://stackoverflow.com/questions/38108726/on-click-pause-the-real-time-plot-of-data", "title": "on click pause the real time plot of data", "body": "<p>I simply want to put a pause clause to my plot where I can pause the real time stream voluntarily. \nThis is what I am trying. This is an edited code. It s making two subplots: scatter and pie chart. I am able to pause the scatter plot but when I pause pie chart disappears.</p>\n\n<pre><code>def onClick(event):\n    global pause\n    pause ^= True\nfig = plt.figure()\nfig.canvas.mpl_connect('button_press_event', onClick)\nplt.show()\n\nwhile t&lt;ran2:       \n      if not pause:\n         ax = fig.add_subplot(2,1,1)\n         ay = fig.add_subplot(2,1,2)\n         mdfmt = md.DateFormatter('%H:%M')\n         ax.xaxis.set_major_formatter(mdfmt)\n         cmap=cm.jet\n         g=s[t:t+4]\n         h=[]\n         for i in g:\n             if i == 'Match':\n                 h.append(1)\n             else:\n                 h.append(0)\n         ax.scatter(x[t:t+4],y[t:t+4],c=h,s=150,marker='&lt;',edgecolor='None', cmap = cm.jet)\n         ax.set_xlabel('Time')\n         ax.set_ylabel('Action')\n         mindate = min(data_mat['Date'].ix[t:t+4])\n         ax.set_title('Alarm System for site SPFD02 on date %s'%mindate)\n         yt=[-1,0,1]\n         ax.set_yticks(yt)\n         ax.set_yticklabels(('Closed','Not Ack','Assigned'))\n         ax.set_xlim(x[t],x[t+4])    \n\n# for pie chart\n         l = 'Match','No-Match'\n         colors = ['red','blue']\n         j = s[t:t+4].count('Match')\n         z = z + j\n         k = s[t:t+4].count('No-Match')\n         r = r + k\n         sizes = [z,r]\n         ay.pie(sizes,labels = l, colors = colors, autopct='%1.1f%%', shadow=True, startangle=140)\n         ay.set_aspect('equal')        \n         t=t+1\n   else:\n        print 'paused'\nplt.pause(0.1)\nplt.cla() \n</code></pre>\n"}, {"tags": ["python", "django", "django-rest-framework"], "comments": [{"owner": {"reputation": 1980, "user_id": 455254, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/ISyfI.jpg?s=128&g=1", "display_name": "Guillaume Thomas", "link": "https://stackoverflow.com/users/455254/guillaume-thomas"}, "edited": false, "score": 1, "creation_date": 1467230175, "post_id": 38108688, "comment_id": 63651464, "body": "What&#39;s the difference between the two uris?"}], "answers": [{"tags": [], "owner": {"reputation": 181, "user_id": 5243255, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XPh1M4zWeaY/AAAAAAAAAAI/AAAAAAAAADE/Wi7ar2XtRpw/photo.jpg?sz=128", "display_name": "Danniel Carvalho", "link": "https://stackoverflow.com/users/5243255/danniel-carvalho"}, "is_accepted": false, "score": 0, "last_activity_date": 1467231548, "last_edit_date": 1467231548, "creation_date": 1467229994, "answer_id": 38108911, "question_id": 38108688, "link": "https://stackoverflow.com/questions/38108688/optionally-retrieve-related-items-in-django-rest-framework/38108911#38108911", "title": "Optionally retrieve related items in Django REST framework", "body": "<p>Maybe you can do two serializers, one to the List of houses without showing the books, and another for the individual house, showing the books.</p>\n\n<p>In the views you define the list serializer for the list uri, and the individual serializer for the individual uri.</p>\n"}, {"comments": [{"owner": {"reputation": 645, "user_id": 1582024, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/e15498d3e5d13a9917262e45363cb720?s=128&d=identicon&r=PG", "display_name": "user1582024", "link": "https://stackoverflow.com/users/1582024/user1582024"}, "edited": false, "score": 0, "creation_date": 1467236729, "post_id": 38109613, "comment_id": 63654661, "body": "Thank you, I was unaware of the ListAPIView, still a bit of a beginner with Django."}, {"owner": {"reputation": 645, "user_id": 1582024, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/e15498d3e5d13a9917262e45363cb720?s=128&d=identicon&r=PG", "display_name": "user1582024", "link": "https://stackoverflow.com/users/1582024/user1582024"}, "edited": false, "score": 0, "creation_date": 1467283897, "post_id": 38109613, "comment_id": 63673745, "body": "Is it also possible to use the HouseSerializer you proposed, but not include the bookings by default? (like some parameter, include_bookings=true)"}, {"owner": {"reputation": 1425, "user_id": 357631, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/4961fbcd89536082eb7b2def765388df?s=128&d=identicon&r=PG", "display_name": "Patrick Beeson", "link": "https://stackoverflow.com/users/357631/patrick-beeson"}, "reply_to_user": {"reputation": 645, "user_id": 1582024, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/e15498d3e5d13a9917262e45363cb720?s=128&d=identicon&r=PG", "display_name": "user1582024", "link": "https://stackoverflow.com/users/1582024/user1582024"}, "edited": false, "score": 0, "creation_date": 1467301753, "post_id": 38109613, "comment_id": 63687108, "body": "I would create a another serializer (maybe a child of <code>HouseSerializer</code>), and override <code>get_serializer_class</code> in the view. Also, check this site out for help deciding what methods and attributes are available to you: <a href=\"http://www.cdrf.co/\" rel=\"nofollow noreferrer\">cdrf.co</a>"}], "tags": [], "owner": {"reputation": 1425, "user_id": 357631, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/4961fbcd89536082eb7b2def765388df?s=128&d=identicon&r=PG", "display_name": "Patrick Beeson", "link": "https://stackoverflow.com/users/357631/patrick-beeson"}, "is_accepted": true, "score": 2, "last_activity_date": 1467232643, "creation_date": 1467232643, "answer_id": 38109613, "question_id": 38108688, "link": "https://stackoverflow.com/questions/38108688/optionally-retrieve-related-items-in-django-rest-framework/38109613#38109613", "title": "Optionally retrieve related items in Django REST framework", "body": "<p>First, it makes more sense (to me at least) to have your endpoint for bookings for a given house exist at <code>/house/:houseId/bookings/</code> since the namespace at <code>/house/bookings/</code> will already be looking for an ID.</p>\n\n<p>You can also serialize the relationship between a House and Booking to display bookings for a house at the house detail endpoint. Something like:</p>\n\n<pre><code>class HouseSerializer(serializers.ModelSerializer):\n    bookings = BookingSerializer(many=True)\n\n    class Meta:\n        model = House\n        fields = ('id','name', 'bookings',)\n</code></pre>\n\n<p>But if you want another endpoint, just create a view that takes the <code>BookingSerializer</code> and filters the queryset by the House ID in the kwargs:</p>\n\n<p>(Again, assuming your endpoint is <code>/house/&lt;house_id&gt;/bookings/</code>)</p>\n\n<pre><code>class BookingsForHouseListView(ListAPIView):\n    serializer_class = BookingSerializer\n\n    def get_queryset(self):\n        return Bookings.objects.filter(house__id=self.kwargs['house_id'])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 645, "user_id": 1582024, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/e15498d3e5d13a9917262e45363cb720?s=128&d=identicon&r=PG", "display_name": "user1582024", "link": "https://stackoverflow.com/users/1582024/user1582024"}, "is_accepted": false, "score": 0, "last_activity_date": 1467297178, "last_edit_date": 1495535334, "creation_date": 1467297178, "answer_id": 38126250, "question_id": 38108688, "link": "https://stackoverflow.com/questions/38108688/optionally-retrieve-related-items-in-django-rest-framework/38126250#38126250", "title": "Optionally retrieve related items in Django REST framework", "body": "<p>Turns out, I was trying with too high-level parts of the API that restricted me more than they were helping me, I needed to do some things manually.</p>\n\n<p>This answer <a href=\"https://stackoverflow.com/a/17763864/1582024\">https://stackoverflow.com/a/17763864/1582024</a> shows how to implement a hierarchy of resources.</p>\n"}], "owner": {"reputation": 645, "user_id": 1582024, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/e15498d3e5d13a9917262e45363cb720?s=128&d=identicon&r=PG", "display_name": "user1582024", "link": "https://stackoverflow.com/users/1582024/user1582024"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 248, "favorite_count": 0, "accepted_answer_id": 38109613, "answer_count": 3, "score": 2, "last_activity_date": 1467297178, "creation_date": 1467229213, "question_id": 38108688, "link": "https://stackoverflow.com/questions/38108688/optionally-retrieve-related-items-in-django-rest-framework", "title": "Optionally retrieve related items in Django REST framework", "body": "<p>Suppose I have these models:</p>\n\n<pre><code>class House(models.Model):\n    name = models.CharField(max_length=50)\n    # Other attributes\n\nclass Booking(models.Model):\n    house = models.ForeignKey(House, on_delete=models.CASCADE)\n    arrival_date = models.DateField()\n    departure_date = models.DateField()\n</code></pre>\n\n<p>Serializers:</p>\n\n<pre><code>class HouseSerializer(serializers.ModelSerializer):\n\n    class Meta:\n        model = House\n        fields = ('id','name')\n\nclass BookingSerializer(serializers.ModelSerializer):\n    class Meta:\n        model = Booking\n        fields = ('id',\n                  'arrival_date',\n                  'departure_date',\n                  'house')\n</code></pre>\n\n<p>As you can see, bookings are associated to houses.</p>\n\n<p>Users can request information about a house through \"/house/:houseId\", and bookings through \"/booking/:bookingId\".</p>\n\n<p>I'd like to return all bookings related to a house when a user requests \"/house/bookings\", but these should NOT be returned when simply requesting \"/house/bookings\" as this is a relatively expensive operation and not usually needed.</p>\n\n<p>I know how to make them be returned with the house, but how to make this optional. How do I do that?</p>\n"}, {"tags": ["python", "arrays", "numpy"], "comments": [{"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 1, "creation_date": 1467229189, "post_id": 38108605, "comment_id": 63650982, "body": "As listed in the answers to the linked dup target, both <code>np.add.at</code> and <code>np.bincount</code> work. But for performance I would go with <code>bincount</code>."}, {"owner": {"reputation": 7750, "user_id": 5747944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90aefeb5e2f0ecf9a68bf851a2b61336?s=128&d=identicon&r=PG", "display_name": "sytech", "link": "https://stackoverflow.com/users/5747944/sytech"}, "edited": false, "score": 0, "creation_date": 1467230008, "post_id": 38108605, "comment_id": 63651375, "body": "What version of Python are you running? If you&#39;re on 2.x You should use <code>izip</code> instead of <code>zip</code> which is the generator version of <code>zip</code> from 3.x backported to 2.x -- MUCH more memory efficient"}], "owner": {"reputation": 36288, "user_id": 353337, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/500a1e2e864ae08f386afde2cd21add0?s=128&d=identicon&r=PG", "display_name": "Nico Schl&#246;mer", "link": "https://stackoverflow.com/users/353337/nico-schl%c3%b6mer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 26, "favorite_count": 0, "closed_date": 1467229127, "answer_count": 0, "score": 0, "last_activity_date": 1467228923, "creation_date": 1467228923, "question_id": 38108605, "link": "https://stackoverflow.com/questions/38108605/numpy-sort-and-sum-data-into-target-indices", "closed_reason": "Duplicate", "title": "NumPy: Sort and sum data into target indices", "body": "<p>Another data summation problem. I have a (large) data array and and array with indices of the same length.</p>\n\n\n\n<pre><code>data = [1.0, 10.0, 100.0]\nindices = [0, 2, 0]\n</code></pre>\n\n<p>The goal is to sum the entries of <code>data</code> into a new array such that the entry at index <code>k</code> contributes to <code>out[k]</code>. For the above example, the result would be</p>\n\n\n\n<pre><code>out = [101.0, 0.0, 10.0]\n</code></pre>\n\n<p>The length of <code>out</code> can be specified beforehand, or just taken to be <code>max(indices)</code>.</p>\n\n<p>(The problem is similar to <a href=\"https://stackoverflow.com/questions/38107571/numpy-sort-and-sum-data-into-array/38107667#38107667\">NumPy: Sort and sum data into array</a> with the exception that here, the <em>target</em> indices are given.)</p>\n\n<p>Doing it in a loop works,</p>\n\n\n\n<pre><code>import numpy as np\n\nout = np.zeros(2)\nfor val, k in zip(data, indices):\n    out[k] += val\n</code></pre>\n\n<p>but is slow if <code>data</code> is large.</p>\n\n<p>Any hints on how to speed this up? (Array comprehensions?)</p>\n"}, {"tags": ["python", "openerp", "odoo-8"], "answers": [{"tags": [], "owner": {"reputation": 349, "user_id": 6483386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30e2c1595e62ceedbcc6aaf2f683e10a?s=128&d=identicon&r=PG&f=1", "display_name": "T.V.", "link": "https://stackoverflow.com/users/6483386/t-v"}, "is_accepted": true, "score": 0, "last_activity_date": 1467239466, "creation_date": 1467239466, "answer_id": 38111115, "question_id": 38108568, "link": "https://stackoverflow.com/questions/38108568/write-not-working-odoo-8/38111115#38111115", "title": "Write not working Odoo 8", "body": "<p>Obviously it would not work. In a nutshell reason is that you're raising error from the function and this makes Odoo think that things go wrong in your function and the actual write to database does not happen (what happens instead is a rollback). To make sure that data gets written to the database, you should call <code>commit()</code> function explicitly before raising an error, like so:</p>\n\n<pre><code>class MAJClientsWizard(models.Model):\n    _name = \"maj.clients\"\n\n    @api.one\n    def maj_clients(self):\n        erreur = \"\"\n        clients = self.env[\"res.partner\"].search([['is_company', '=', True], ['customer', '=', True]])\n        for client in clients:\n            retour = maj_coordonnees(client)\n            if retour:\n                erreur += retour + \", \"\n\n        self.env.cr.commit() #NOTE: commit changes to database before raising an error in order to prevent rollback\n\n        if erreur:\n            raise Warning(\"Les d\u00e9taillants qui ont une erreur dans leur code postal sont: \", erreur, \"Tous les autres ont \u00e9t\u00e9 mis \u00e0 jour!\")\n        else:\n            raise Warning(\"Tous les d\u00e9taillants ont \u00e9t\u00e9 mis \u00e0 jour avec succ\u00e8s!\")\n</code></pre>\n\n<p>P.S.<br>\nAlthough it's not related to the issue reported, I would note that in general @api.multi should be used instead of @api.one for performance reasons.</p>\n"}], "owner": {"reputation": 41, "user_id": 6519805, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57543360468b7d45d60c351a7dbf1ac9?s=128&d=identicon&r=PG&f=1", "display_name": "Zada1100", "link": "https://stackoverflow.com/users/6519805/zada1100"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 539, "favorite_count": 1, "accepted_answer_id": 38111115, "answer_count": 1, "score": 0, "last_activity_date": 1467239466, "creation_date": 1467228792, "question_id": 38108568, "link": "https://stackoverflow.com/questions/38108568/write-not-working-odoo-8", "title": "Write not working Odoo 8", "body": "<p>I have a problem when I try to modify informations for a res.partner but only in this file, in my other modules .write is working...</p>\n\n<p>I know it's going into the write and that it brings the informations but it just doesn't save.</p>\n\n<p>Also it was working before but for no obvious reason it's no more working.</p>\n\n<p>Anyone have an idea of what could possibly cause that?</p>\n\n<pre><code># -*- coding: utf-8 -*-\nfrom openerp import models, fields, api, tools, exceptions\nfrom openerp.exceptions import Warning\nimport json, urllib, time\n\n\nclass MAJClientsWizard(models.Model):\n    _name = \"maj.clients\"\n\n    @api.one\n    def maj_clients(self):\n        erreur = \"\"\n        clients = self.env[\"res.partner\"].search([['is_company', '=', True], ['customer', '=', True]])\n        for client in clients:\n            retour = maj_coordonnees(client)\n            if retour:\n                erreur += retour + \", \"\n        if erreur:\n            raise Warning(\"Les d\u00e9taillants qui ont une erreur dans leur code postal sont: \", erreur, \"Tous les autres ont \u00e9t\u00e9 mis \u00e0 jour!\")\n        else:\n            raise Warning(\"Tous les d\u00e9taillants ont \u00e9t\u00e9 mis \u00e0 jour avec succ\u00e8s!\")\n\n\ndef maj_coordonnees(client):\n    if client.date_localization &lt; time.strftime(\"%Y-%m-%d\"):\n        if client.zip:\n            result = geo_find(client.zip)\n\n            if result:\n                client.write({\n                    'partner_latitude': result[0],\n                    'partner_longitude': result[1],\n                    'date_localization': (time.strftime(\"%Y-%m-%d\"))\n               })\n            else:\n                return client.name\n        else:\n            return client.name\n\n\ndef geo_find(addr):\n    url = 'https://maps.googleapis.com/maps/api/geocode/json?sensor=false&amp;key=*****&amp;address='\n    url += urllib.quote(addr.encode('utf8'))\n\n    try:\n        result = json.load(urllib.urlopen(url))\n    except Exception, e:\n        return 'Network error, Cannot contact geolocation servers. Please make sure that your internet connection is up and running (%s).' + e\n    if result['status'] != 'OK':\n        return None\n\n    try:\n        geo = result['results'][0]['geometry']['location']\n        return float(geo['lat']), float(geo['lng'])\n    except (KeyError, ValueError):\n        return None\n</code></pre>\n"}, {"tags": ["python", "html", "selenium", "xpath", "webpage"], "answers": [{"comments": [{"owner": {"reputation": 121, "user_id": 6500653, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/6eac72780cd30a64094d4f68c2817d86?s=128&d=identicon&r=PG&f=1", "display_name": "Lord", "link": "https://stackoverflow.com/users/6500653/lord"}, "edited": false, "score": 0, "creation_date": 1467229402, "post_id": 38108545, "comment_id": 63651089, "body": "Thanks for your answer!!! :) My problem is that i need the index in order to insert the data correctly in my sql database, otherwise i don&#39;t know how to insert them... Sorry but i&#39;m new in python and sql... But if you have a better solution i&#39;m happy to hear it? :D"}, {"owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "reply_to_user": {"reputation": 121, "user_id": 6500653, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/6eac72780cd30a64094d4f68c2817d86?s=128&d=identicon&r=PG&f=1", "display_name": "Lord", "link": "https://stackoverflow.com/users/6500653/lord"}, "edited": false, "score": 0, "creation_date": 1467233254, "post_id": 38108545, "comment_id": 63653020, "body": "@Lord sorry, but is unclear what are you trying to do. Could you may be add more code you have so far and add some details about your end goal? Thanks."}], "tags": [], "owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "is_accepted": true, "score": 0, "last_activity_date": 1467229176, "last_edit_date": 1467229176, "creation_date": 1467228700, "answer_id": 38108545, "question_id": 38108520, "link": "https://stackoverflow.com/questions/38108520/count-numbers-of-tag-name-in-a-webpage-python-selenium/38108545#38108545", "title": "count numbers of tag_name in a webpage (python, selenium)", "body": "<p>Just don't get them by index, use:</p>\n\n<pre><code>cells = each.find_elements_by_tag_name('td')\n</code></pre>\n\n<p>then <code>cells</code> would be a <em>list of elements</em> which you can call <code>len()</code> on:</p>\n\n<pre><code>print(len(cells))\n</code></pre>\n\n<p>Or slice: </p>\n\n<pre><code>cells[:3]  # gives first 3 elements\ncell1, cell2, cell3 = cells[:3]  # unpacking into separate variables\n</code></pre>\n\n<p>Or, you can get the text of every cell:</p>\n\n<pre><code>[cell.text for cell in cells]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7750, "user_id": 5747944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90aefeb5e2f0ecf9a68bf851a2b61336?s=128&d=identicon&r=PG", "display_name": "sytech", "link": "https://stackoverflow.com/users/5747944/sytech"}, "is_accepted": false, "score": 0, "last_activity_date": 1467229070, "creation_date": 1467229070, "answer_id": 38108658, "question_id": 38108520, "link": "https://stackoverflow.com/questions/38108520/count-numbers-of-tag-name-in-a-webpage-python-selenium/38108658#38108658", "title": "count numbers of tag_name in a webpage (python, selenium)", "body": "<p><code>find_elements_by_tag_name</code> returns a list. Use <code>len()</code> on that list to get the number of elements by that tag name. Also, rather than saying <code>for each</code> I'd gently suggest using more descriptive assignments. </p>\n\n<pre><code>table = driver.find_element_by_xpath(\".//*[@id='ip_market\" + market + \"']/table/tbody\")\ntable_rows = table.find_elements_by_tag_name(\"tr\")\nfor row in table_rows:\n    row_cells = row.find_elements_by_tag_name(\"td\")\n    num_of_cells = len(row_cells)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 18006, "user_id": 2386774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dea7da142cb7e85d5d5a8576e2625431?s=128&d=identicon&r=PG", "display_name": "JeffC", "link": "https://stackoverflow.com/users/2386774/jeffc"}, "is_accepted": false, "score": 0, "last_activity_date": 1467251233, "creation_date": 1467251233, "answer_id": 38112697, "question_id": 38108520, "link": "https://stackoverflow.com/questions/38108520/count-numbers-of-tag-name-in-a-webpage-python-selenium/38112697#38112697", "title": "count numbers of tag_name in a webpage (python, selenium)", "body": "<p>From reading your comments, it looks like this is what you are trying to do...</p>\n\n<pre><code>for each in driver.find_elements_by_xpath(\".//*[@id='ip_market\" + market + \"']/table/tbody\")\n    for i in range(0,len(each.find_elements_by_tag_name('td'))\n        // you can now use i as an index into the loop through the TDs\n        print \"do something interesting with i: \" + i\n</code></pre>\n"}], "owner": {"reputation": 121, "user_id": 6500653, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/6eac72780cd30a64094d4f68c2817d86?s=128&d=identicon&r=PG&f=1", "display_name": "Lord", "link": "https://stackoverflow.com/users/6500653/lord"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 535, "favorite_count": 0, "accepted_answer_id": 38108545, "answer_count": 3, "score": -1, "last_activity_date": 1467251233, "creation_date": 1467228619, "last_edit_date": 1467228769, "question_id": 38108520, "link": "https://stackoverflow.com/questions/38108520/count-numbers-of-tag-name-in-a-webpage-python-selenium", "title": "count numbers of tag_name in a webpage (python, selenium)", "body": "<p>Hi have the following code:</p>\n\n<pre><code>for each in driver.find_elements_by_xpath(\".//*[@id='ip_market\" + market + \"']/table/tbody\")\n    cell = each.find_elements_by_tag_name('td')[0]\n    cell2 = each.find_elements_by_tag_name('td')[1]\n    cell3 = each.find_elements_by_tag_name('td')[2]\n</code></pre>\n\n<p>My problem is that I don't know exactly how many <code>td</code>s there are inside every <code>each</code> (sometimes 3, sometimes 15 etc etc...).</p>\n\n<p>Is there a possibility to check the numbers of <code>td</code>s inside the <code>for each</code> in order to make dynamic <code>find_elements_by_tag_name('td')</code>?</p>\n"}, {"tags": ["python", "machine-learning", "speech-recognition", "mfcc"], "answers": [{"comments": [{"owner": {"reputation": 194, "user_id": 1322603, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/afcdbb9287ecbe7c0b104d5ceee9f9f2?s=128&d=identicon&r=PG", "display_name": "Ugur", "link": "https://stackoverflow.com/users/1322603/ugur"}, "edited": false, "score": 0, "creation_date": 1467393924, "post_id": 38116726, "comment_id": 63731368, "body": "Thanks a lot for your suggestion! I&#39;ll check the link as soon as possible after I get meaningful results this particular classification algorithm."}], "tags": [], "owner": {"reputation": 1289, "user_id": 1136895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/491506e1db720f623bb0f4267e7dd64b?s=128&d=identicon&r=PG", "display_name": "Masoud", "link": "https://stackoverflow.com/users/1136895/masoud"}, "is_accepted": false, "score": 0, "last_activity_date": 1467272192, "creation_date": 1467272192, "answer_id": 38116726, "question_id": 38108504, "link": "https://stackoverflow.com/questions/38108504/classifier-predictions-are-unreliable-is-that-because-my-gmm-classifier-is-not/38116726#38116726", "title": "Classifier predictions are unreliable, is that because my GMM classifier is not trained correctly?", "body": "<p>For classification tasks it's important to tune parameter given to the classifier, also a large number of classification algorithm follow chose theory, witch means if you change some parameter of the model briefly, you may get some huge different results. Also it's important to use different algorithms and not just use one algorithm for all classification tasks,</p>\n\n<p>For this problem, you can try different classification algorithm to test that your data is good, and try different parameter with different values for each classifier, then you can determined that where is the problem.</p>\n\n<p>One alternative way is to use Grid Search to explore and tune best parameter for specific classifier, read this: <a href=\"http://scikit-learn.org/stable/modules/grid_search.html\" rel=\"nofollow\">http://scikit-learn.org/stable/modules/grid_search.html</a></p>\n"}, {"comments": [{"owner": {"reputation": 194, "user_id": 1322603, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/afcdbb9287ecbe7c0b104d5ceee9f9f2?s=128&d=identicon&r=PG", "display_name": "Ugur", "link": "https://stackoverflow.com/users/1322603/ugur"}, "edited": false, "score": 0, "creation_date": 1467393808, "post_id": 38125160, "comment_id": 63731311, "body": "concatenating empty dictionary value raises error. Will using label_samples[label] = np.concatenate(sample,label_samples[label]) achieves the same result?"}, {"owner": {"reputation": 194, "user_id": 1322603, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/afcdbb9287ecbe7c0b104d5ceee9f9f2?s=128&d=identicon&r=PG", "display_name": "Ugur", "link": "https://stackoverflow.com/users/1322603/ugur"}, "edited": false, "score": 0, "creation_date": 1467473041, "post_id": 38125160, "comment_id": 63751543, "body": "Edited the question with updated code, still experiencing similar kind of inconsistent results."}], "tags": [], "owner": {"reputation": 23634, "user_id": 432021, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6c16a68dfa5030f9b6df4d4ae4a337a?s=128&d=identicon&r=PG", "display_name": "Nikolay Shmyrev", "link": "https://stackoverflow.com/users/432021/nikolay-shmyrev"}, "is_accepted": false, "score": 0, "last_activity_date": 1467294695, "creation_date": 1467294695, "answer_id": 38125160, "question_id": 38108504, "link": "https://stackoverflow.com/questions/38108504/classifier-predictions-are-unreliable-is-that-because-my-gmm-classifier-is-not/38125160#38125160", "title": "Classifier predictions are unreliable, is that because my GMM classifier is not trained correctly?", "body": "<p>Your code has not much sense, you recreate classifier for every new training sample.</p>\n\n<p>Correct code scheme for training should look about this:</p>\n\n<pre><code>label_samples = {}\nclassifiers = {}\n\n# First we collect all samples per label into array of samples\nfor label, sample in samples:\n     label_samples[label].concatenate(sample)\n\n# Then we train classifier on every label data\nfor label in label_samples:\n     classifiers[label] = mixture.GMM(n_components = n_classes)\n     classifiers[label].fit(label_samples[label])\n</code></pre>\n\n<p>Your decoding code is ok.</p>\n"}], "owner": {"reputation": 194, "user_id": 1322603, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/afcdbb9287ecbe7c0b104d5ceee9f9f2?s=128&d=identicon&r=PG", "display_name": "Ugur", "link": "https://stackoverflow.com/users/1322603/ugur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 207, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1467472967, "creation_date": 1467228553, "last_edit_date": 1495542161, "question_id": 38108504, "link": "https://stackoverflow.com/questions/38108504/classifier-predictions-are-unreliable-is-that-because-my-gmm-classifier-is-not", "title": "Classifier predictions are unreliable, is that because my GMM classifier is not trained correctly?", "body": "<p>I'm training two GMM classifiers, each for one label, with MFCC values.\nI concatenated all the MFCC values of a class and fitted into a classifier.\nAnd for each classifier I sum the probability of its label's probability.</p>\n\n<pre><code>def createGMMClassifiers():\n    label_samples = {}\n    for label, sample in training.iteritems():\n        labelstack = np.empty((50,13))\n        for feature in sample:\n            #debugger.set_trace()\n            labelstack = np.concatenate((labelstack,feature))\n        label_samples[label]=labelstack\n    for label in label_samples:\n        #debugger.set_trace()\n        classifiers[label] = mixture.GMM(n_components = n_classes)\n        classifiers[label].fit(label_samples[label])\n    for sample in testing['happy']:\n        classify(sample)\ndef classify(testMFCC):\n    probability = {'happy':0,'sad':0}\n    for name, classifier in classifiers.iteritems():\n        prediction = classifier.predict_proba(testMFCC)\n        for probforlabel in prediction:\n            probability[name]+=probforlabel[0]\n    print 'happy ',probability['happy'],'sad ',probability['sad']\n\n    if(probability['happy']&gt;probability['sad']):\n        print 'happy'\n    else:\n        print 'sad'\n</code></pre>\n\n<p>But my results does not seems to be consistent and I find it hard to believe it is because of the RandomSeed=None state since all the predictions is often are the same label for all test data, but each run it often gives the exact opposites(See Output 1 and output 2).</p>\n\n<p>So my question is, am I doing something obviously wrong while training my classifier?</p>\n\n<p>Output 1:</p>\n\n<pre><code>happy  123.559202732 sad  122.409167294\nhappy\n\nhappy  120.000879032 sad  119.883786657\nhappy\n\nhappy  124.000069307 sad  123.999928962\nhappy\n\nhappy  118.874574047 sad  118.920941127\nsad\n\nhappy  117.441353421 sad  122.71924156\nsad\n\nhappy  122.210579428 sad  121.997571901\nhappy\n\nhappy  120.981752603 sad  120.325940128\nhappy\n\nhappy  126.013713257 sad  125.885047394\nhappy\n\nhappy  122.776016525 sad  122.12320875\nhappy\n\nhappy  115.064172476 sad  114.999513909\nhappy\n</code></pre>\n\n<p>Output 2:</p>\n\n<pre><code>happy  123.559202732 sad  122.409167294\nhappy\n\nhappy  120.000879032 sad  119.883786657\nhappy\n\nhappy  124.000069307 sad  123.999928962\nhappy\n\nhappy  118.874574047 sad  118.920941127\nsad\n\nhappy  117.441353421 sad  122.71924156\nsad\n\nhappy  122.210579428 sad  121.997571901\nhappy\n\nhappy  120.981752603 sad  120.325940128\nhappy\n\nhappy  126.013713257 sad  125.885047394\nhappy\n\nhappy  122.776016525 sad  122.12320875\nhappy\n\nhappy  115.064172476 sad  114.999513909\nhappy\n</code></pre>\n\n<p>Earlier I asked a relevant question and got a correct answer. I'm providing the link below.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/38032454/having-different-results-every-run-with-gmm-classifier/38057895#38057895\">Having different results every run with GMM Classifier</a></p>\n\n<p>Edit:\nAdded main function which collects the data and splits into training and testing</p>\n\n<pre><code>def main():\n    happyDir = dir+'happy/'\n    sadDir = dir+'sad/'\n    training[\"sad\"]=[]\n    training[\"happy\"]=[]\n    testing[\"happy\"]=[]\n    #TestSet\n    for wavFile in os.listdir(happyDir)[::-1][:10]:\n        #print wavFile\n        fullPath = happyDir+wavFile\n        testing[\"happy\"].append(sf.getFeatures(fullPath))\n    #TrainSet\n    for wavFile in os.listdir(happyDir)[::-1][10:]:\n        #print wavFile\n        fullPath = happyDir+wavFile\n        training[\"happy\"].append(sf.getFeatures(fullPath))\n    for wavFile in os.listdir(sadDir)[::-1][10:]:\n        fullPath = sadDir+wavFile\n        training[\"sad\"].append(sf.getFeatures(fullPath))\n    #Ensure the number of files in set\n    print \"Test(Happy): \", len(testing['happy'])\n    print \"Train(Happy): \", len(training['happy'])\n    createGMMClassifiers()\n</code></pre>\n\n<p>Edit 2:\nChanged the code according to the answer. Still having similar kind of inconsistent results.</p>\n"}, {"tags": ["javascript", "python", "comparison"], "comments": [{"owner": {"reputation": 3115, "user_id": 2887760, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dcfc142aa3e67502448a0f91e40d08df?s=128&d=identicon&r=PG&f=1", "display_name": "Athena", "link": "https://stackoverflow.com/users/2887760/athena"}, "reply_to_user": {"reputation": 2369, "user_id": 1781104, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/35b2db8383ae328b91cda792df4eebf1?s=128&d=identicon&r=PG", "display_name": "Matt The Ninja", "link": "https://stackoverflow.com/users/1781104/matt-the-ninja"}, "edited": false, "score": 1, "creation_date": 1467228837, "post_id": 38108484, "comment_id": 63650799, "body": "How is that the same question? It makes no mention of JS anywhere, and while I know the difference between <code>is</code> and ==, I want to know how it relates to <code>===</code>."}], "answers": [{"comments": [{"owner": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "edited": false, "score": 3, "creation_date": 1467228819, "post_id": 38108540, "comment_id": 63650794, "body": "FWIW, I think that <code>id(a)</code> and <code>id(&#39;foo&#39;)</code> being the same is something that frequently confuses people when they&#39;re trying to understand identity in python.  The fact that <code>&#39;foo&#39;</code> is interned by the interpreter is not really an entry level python topic :-)"}, {"owner": {"reputation": 3115, "user_id": 2887760, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dcfc142aa3e67502448a0f91e40d08df?s=128&d=identicon&r=PG&f=1", "display_name": "Athena", "link": "https://stackoverflow.com/users/2887760/athena"}, "edited": false, "score": 0, "creation_date": 1467228901, "post_id": 38108540, "comment_id": 63650840, "body": "So, is it like a hash of the object? How are <code>id</code> values assigned?"}, {"owner": {"reputation": 19688, "user_id": 3149020, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100001905387968/picture?type=large", "display_name": "Spencer Wieczorek", "link": "https://stackoverflow.com/users/3149020/spencer-wieczorek"}, "reply_to_user": {"reputation": 3115, "user_id": 2887760, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dcfc142aa3e67502448a0f91e40d08df?s=128&d=identicon&r=PG&f=1", "display_name": "Athena", "link": "https://stackoverflow.com/users/2887760/athena"}, "edited": false, "score": 0, "creation_date": 1467228959, "post_id": 38108540, "comment_id": 63650871, "body": "@Ares As in <code>is</code> will only return true if it&#39;s the comparing the exact same object in memory."}, {"owner": {"reputation": 3115, "user_id": 2887760, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dcfc142aa3e67502448a0f91e40d08df?s=128&d=identicon&r=PG&f=1", "display_name": "Athena", "link": "https://stackoverflow.com/users/2887760/athena"}, "edited": false, "score": 0, "creation_date": 1467229009, "post_id": 38108540, "comment_id": 63650896, "body": "Yeah, but <code>&#39;foo&#39;</code> and <code>a</code> are clearly <i>not</i> the same object, so why does their comparison return true?"}, {"owner": {"reputation": 1598, "user_id": 5021530, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/951e7a649ceb85f418634f44c1383b7b?s=128&d=identicon&r=PG&f=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/5021530/brian"}, "reply_to_user": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "edited": false, "score": 0, "creation_date": 1467229016, "post_id": 38108540, "comment_id": 63650899, "body": "@mgilson, I learned that in the textbook that I learned Python from. It <i>should</i> be something people learn, but I do concede that it could be considered a little advanced."}, {"owner": {"reputation": 726, "user_id": 2683155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11f841bcd39df9d1fd08dc29b0e1540f?s=128&d=identicon&r=PG&f=1", "display_name": "andybeli", "link": "https://stackoverflow.com/users/2683155/andybeli"}, "edited": false, "score": 0, "creation_date": 1467229066, "post_id": 38108540, "comment_id": 63650924, "body": "You should also add that the <code>===</code> checks if two variables are the same in value and type in JS."}, {"owner": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "reply_to_user": {"reputation": 3115, "user_id": 2887760, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dcfc142aa3e67502448a0f91e40d08df?s=128&d=identicon&r=PG&f=1", "display_name": "Athena", "link": "https://stackoverflow.com/users/2887760/athena"}, "edited": false, "score": 0, "creation_date": 1467229083, "post_id": 38108540, "comment_id": 63650930, "body": "@Ares -- The id numbers are assigned differently for different python implementations.  Cpython (the reference implementation that most people have) uses the object&#39;s memory address."}, {"owner": {"reputation": 19688, "user_id": 3149020, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100001905387968/picture?type=large", "display_name": "Spencer Wieczorek", "link": "https://stackoverflow.com/users/3149020/spencer-wieczorek"}, "reply_to_user": {"reputation": 726, "user_id": 2683155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11f841bcd39df9d1fd08dc29b0e1540f?s=128&d=identicon&r=PG&f=1", "display_name": "andybeli", "link": "https://stackoverflow.com/users/2683155/andybeli"}, "edited": false, "score": 0, "creation_date": 1467229088, "post_id": 38108540, "comment_id": 63650935, "body": "@andybeli No they should not, that would be noise."}, {"owner": {"reputation": 3115, "user_id": 2887760, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dcfc142aa3e67502448a0f91e40d08df?s=128&d=identicon&r=PG&f=1", "display_name": "Athena", "link": "https://stackoverflow.com/users/2887760/athena"}, "reply_to_user": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "edited": false, "score": 0, "creation_date": 1467229177, "post_id": 38108540, "comment_id": 63650975, "body": "@mgilson which brings me back to my other point of confusion, if they&#39;re by memory address, then why did the check on the string literal return true? They shouldn&#39;t have the same memory address, right?"}, {"owner": {"reputation": 726, "user_id": 2683155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11f841bcd39df9d1fd08dc29b0e1540f?s=128&d=identicon&r=PG&f=1", "display_name": "andybeli", "link": "https://stackoverflow.com/users/2683155/andybeli"}, "reply_to_user": {"reputation": 19688, "user_id": 3149020, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100001905387968/picture?type=large", "display_name": "Spencer Wieczorek", "link": "https://stackoverflow.com/users/3149020/spencer-wieczorek"}, "edited": false, "score": 0, "creation_date": 1467229190, "post_id": 38108540, "comment_id": 63650983, "body": "@SpencerWieczorek it should not what? Could you be more specific... My statement is correct."}, {"owner": {"reputation": 19688, "user_id": 3149020, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100001905387968/picture?type=large", "display_name": "Spencer Wieczorek", "link": "https://stackoverflow.com/users/3149020/spencer-wieczorek"}, "reply_to_user": {"reputation": 726, "user_id": 2683155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11f841bcd39df9d1fd08dc29b0e1540f?s=128&d=identicon&r=PG&f=1", "display_name": "andybeli", "link": "https://stackoverflow.com/users/2683155/andybeli"}, "edited": false, "score": 0, "creation_date": 1467229247, "post_id": 38108540, "comment_id": 63651011, "body": "@andybeli The OP already knows that, they even give a link to the question/answer which states that. There isn&#39;t a reason to include it."}, {"owner": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "reply_to_user": {"reputation": 3115, "user_id": 2887760, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dcfc142aa3e67502448a0f91e40d08df?s=128&d=identicon&r=PG&f=1", "display_name": "Athena", "link": "https://stackoverflow.com/users/2887760/athena"}, "edited": false, "score": 0, "creation_date": 1467229296, "post_id": 38108540, "comment_id": 63651035, "body": "@Ares -- This is what I was pointing out as confusing by my initial comment.  Python holds a cache of strings (as an optimization). Frequently (always?) when you reference a string literal, python will look for it in the cache of interned strings and give you the same one that was previously defined."}, {"owner": {"reputation": 1598, "user_id": 5021530, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/951e7a649ceb85f418634f44c1383b7b?s=128&d=identicon&r=PG&f=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/5021530/brian"}, "reply_to_user": {"reputation": 3115, "user_id": 2887760, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dcfc142aa3e67502448a0f91e40d08df?s=128&d=identicon&r=PG&f=1", "display_name": "Athena", "link": "https://stackoverflow.com/users/2887760/athena"}, "edited": false, "score": 0, "creation_date": 1467229354, "post_id": 38108540, "comment_id": 63651068, "body": "@Ares, see this discussion about the string literals <a href=\"http://stackoverflow.com/questions/24245324/about-the-changing-id-of-a-python-immutable-string\" title=\"about the changing id of a python immutable string\">stackoverflow.com/questions/24245324/&hellip;</a>"}, {"owner": {"reputation": 3115, "user_id": 2887760, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dcfc142aa3e67502448a0f91e40d08df?s=128&d=identicon&r=PG&f=1", "display_name": "Athena", "link": "https://stackoverflow.com/users/2887760/athena"}, "edited": false, "score": 0, "creation_date": 1467229422, "post_id": 38108540, "comment_id": 63651097, "body": "That <code>is</code> tricky...   That seems like undesired behavior. Without being able to tell if the string has been cached, there&#39;s no way to tell if the <code>is</code> operation will actually return true, right?"}, {"owner": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "reply_to_user": {"reputation": 3115, "user_id": 2887760, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dcfc142aa3e67502448a0f91e40d08df?s=128&d=identicon&r=PG&f=1", "display_name": "Athena", "link": "https://stackoverflow.com/users/2887760/athena"}, "edited": false, "score": 1, "creation_date": 1467229606, "post_id": 38108540, "comment_id": 63651180, "body": "@Ares -- Nope, there isn&#39;t a good way to tell what <code>is</code> on two strings which are equivalent will return.  With that said, it&#39;s a pretty niche use-case.  Generally <code>is</code> comparisons aren&#39;t done on strings (or small integers which are the other common objects that can exhibit this strange behavior).  Equality is generally good enough.  If you really need to do reference checking, it&#39;s more common to do that on named sentinel objects (<code>FOO = object()</code> rather than <code>FOO = &#39;foo&#39;</code>)."}], "tags": [], "owner": {"reputation": 1598, "user_id": 5021530, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/951e7a649ceb85f418634f44c1383b7b?s=128&d=identicon&r=PG&f=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/5021530/brian"}, "is_accepted": true, "score": 7, "last_activity_date": 1467228694, "creation_date": 1467228694, "answer_id": 38108540, "question_id": 38108484, "link": "https://stackoverflow.com/questions/38108484/is-the-is-keyword-in-python-the-same-as-the-keyword-in-js/38108540#38108540", "title": "Is the &#39;is&#39; keyword in Python the same as the === keyword in JS?", "body": "<p>No, they are not the same. <code>is</code> in Python checks if two objects have the same <code>id</code> in Python, ie. they are the same, even in memory. Something you can do to check is this:</p>\n\n<pre><code>&gt;&gt;&gt; a='foo'\n&gt;&gt;&gt; a is 'foo'\nTrue\n&gt;&gt;&gt; id(a)\n44434088\n&gt;&gt;&gt; id('foo')\n44434088\n&gt;&gt;&gt; a=[1]\n&gt;&gt;&gt; a is [1]\nFalse\n&gt;&gt;&gt; id(a)\n45789792\n&gt;&gt;&gt; id([1])\n4469824\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 164, "user_id": 5574172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fa159224bdd7aca4bec26d7dc510bc3?s=128&d=identicon&r=PG&f=1", "display_name": "Blue_vision", "link": "https://stackoverflow.com/users/5574172/blue-vision"}, "is_accepted": false, "score": 2, "last_activity_date": 1467229435, "last_edit_date": 1467229435, "creation_date": 1467229027, "answer_id": 38108641, "question_id": 38108484, "link": "https://stackoverflow.com/questions/38108484/is-the-is-keyword-in-python-the-same-as-the-keyword-in-js/38108641#38108641", "title": "Is the &#39;is&#39; keyword in Python the same as the === keyword in JS?", "body": "<p>In Javascript, the <code>==</code> operator will do implicit type conversion when comparing for equality so, for instance, <code>[] == \"\"</code> will return <code>true</code>.  The <code>===</code> operator is used to check equality without type conversion (<code>[] === \"\"</code> returns false.)</p>\n\n<p>In Python, the <code>is</code> keyword checks reference equality.  So <code>x is y</code> will only return true if <code>x</code> and <code>y</code> both point to the same object in memory.  For instance:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>x = [1, 2, 3]\ny = [1, 2, 3]\nz = x\nx is y # False\nx is z # True\n</code></pre>\n\n<p>Some gotchas that may result from this are the suggested check for null, <code>x is None</code>. <code>None</code> always points to the same space in memory, so you can be assured that <code>x is None</code> will always return <code>True</code> if <code>x</code> has a None value (and <code>False</code> otherwise).</p>\n\n<p>You may also come across some quirks, like the following:</p>\n\n<pre><code>x = 1\ny = 1\nx is y # True\n</code></pre>\n\n<p>The above is a result of a non-standard behaviour in CPython (the Python interpreter you're probably using) where small integers are all assigned to specific objects when the program starts up.  You can check that this doesn't work for larger numbers:</p>\n\n<pre><code>x = 1000\ny = 1000\nx is y # False\n</code></pre>\n\n<p>Unless you're checking for <code>None</code> or if you specifically want to make sure two variables are pointing to the same location in memory, you should use <code>==</code> instead of <code>is</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 71409, "user_id": 3125566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QcWOt.jpg?s=128&g=1", "display_name": "Moses Koledoye", "link": "https://stackoverflow.com/users/3125566/moses-koledoye"}, "is_accepted": false, "score": 1, "last_activity_date": 1467229899, "last_edit_date": 1467229899, "creation_date": 1467229223, "answer_id": 38108691, "question_id": 38108484, "link": "https://stackoverflow.com/questions/38108484/is-the-is-keyword-in-python-the-same-as-the-keyword-in-js/38108691#38108691", "title": "Is the &#39;is&#39; keyword in Python the same as the === keyword in JS?", "body": "<p>No. <code>is</code> in Python is seemingly much <em>stricter</em> than <code>===</code> in JS.</p>\n\n<p>In JS:</p>\n\n<blockquote>\n  <p>For value types (numbers): <code>a === b</code> returns true if a and b have the\n  same value and are of the same type</p>\n  \n  <p>For reference types: <code>a === b</code> returns true if a and b reference the\n  exact same object</p>\n  \n  <p>For strings: <code>a === b</code> returns true if a and b are both strings and\n  contain the exact same characters</p>\n</blockquote>\n\n<hr>\n\n<p>In Python:</p>\n\n<p>Without contradiction, except <code>id(obj1)</code> is the same as <code>id(obj2)</code>, both objects are not identical, and <code>obj1 is obj2</code> will evaluate to <code>False</code>.</p>\n"}], "owner": {"reputation": 3115, "user_id": 2887760, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dcfc142aa3e67502448a0f91e40d08df?s=128&d=identicon&r=PG&f=1", "display_name": "Athena", "link": "https://stackoverflow.com/users/2887760/athena"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 144, "favorite_count": 0, "accepted_answer_id": 38108540, "answer_count": 3, "score": 3, "last_activity_date": 1467229899, "creation_date": 1467228498, "last_edit_date": 1495542722, "question_id": 38108484, "link": "https://stackoverflow.com/questions/38108484/is-the-is-keyword-in-python-the-same-as-the-keyword-in-js", "title": "Is the &#39;is&#39; keyword in Python the same as the === keyword in JS?", "body": "<p>I saw this question <a href=\"https://stackoverflow.com/questions/359494/does-it-matter-which-equals-operator-vs-i-use-in-javascript-comparisons?rq=1\">here</a> and now I'm curious. How does the <code>is</code> operator behave in python in comparison to the === sign in JS?</p>\n"}, {"tags": ["python", "django"], "answers": [{"comments": [{"owner": {"reputation": 5378, "user_id": 817978, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/NX1dl.jpg?s=128&g=1", "display_name": "TorelTwiddler", "link": "https://stackoverflow.com/users/817978/toreltwiddler"}, "edited": false, "score": 0, "creation_date": 1467233960, "post_id": 38109534, "comment_id": 63653396, "body": "Unfortunately this isn&#39;t really an option. A <code>Product</code> can have 30+ different <code>ProductAttribute</code>s, none of which are guaranteed to exist. In our case <code>Product</code> is the parent, and <code>ProductAttribute</code> is the child."}, {"owner": {"reputation": 47988, "user_id": 267540, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2v58W.jpg?s=128&g=1", "display_name": "e4c5", "link": "https://stackoverflow.com/users/267540/e4c5"}, "reply_to_user": {"reputation": 5378, "user_id": 817978, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/NX1dl.jpg?s=128&g=1", "display_name": "TorelTwiddler", "link": "https://stackoverflow.com/users/817978/toreltwiddler"}, "edited": false, "score": 0, "creation_date": 1467284079, "post_id": 38109534, "comment_id": 63673873, "body": "Your question is not very clear @TorelTwiddler this seems a legit answer based on my understanding of your question"}, {"owner": {"reputation": 5378, "user_id": 817978, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/NX1dl.jpg?s=128&g=1", "display_name": "TorelTwiddler", "link": "https://stackoverflow.com/users/817978/toreltwiddler"}, "reply_to_user": {"reputation": 47988, "user_id": 267540, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2v58W.jpg?s=128&g=1", "display_name": "e4c5", "link": "https://stackoverflow.com/users/267540/e4c5"}, "edited": false, "score": 1, "creation_date": 1467300815, "post_id": 38109534, "comment_id": 63686437, "body": "@e4c5 I&#39;m not sure how I can make it more clear. This isn&#39;t an acceptable answer because I would need to make a very significant number of changes (weeks of work) to make this change. I don&#39;t feel that saying &quot;change your premise&quot; is a good answer to a problem."}], "tags": [], "owner": {"reputation": 575, "user_id": 6519019, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/461127ba6aea886155559406923004ce?s=128&d=identicon&r=PG&f=1", "display_name": "Written", "link": "https://stackoverflow.com/users/6519019/written"}, "is_accepted": false, "score": 1, "last_activity_date": 1467232363, "creation_date": 1467232363, "answer_id": 38109534, "question_id": 38108446, "link": "https://stackoverflow.com/questions/38108446/django-order-by-multiple-filtered-foreign-key-values/38109534#38109534", "title": "Django order by multiple filtered foreign key values", "body": "<p>I'm not sure if this is the kind of answer you're looking for, but I would suggest adding rating and score into your Product table as foreign keys to the product attribute as opposed to the other way around. To me, this makes more sense as a model.</p>\n\n<pre><code>class Product(Model):\n    name = CharField()\n    score = ForeignKey(ProductAttribute)\n    rating = ForeignKey(ProductAttribute)\n\n\nclass ProductAttribute(Model):\n    key = CharField()\n    value = FloatField()\n</code></pre>\n\n<p>This you can then order easily using:</p>\n\n<pre><code>order_by(score__value, rating__value)\n</code></pre>\n\n<p>The other way I think creates too much unnecessary work, especially if you don't have too many additional product attributes.</p>\n"}], "owner": {"reputation": 5378, "user_id": 817978, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/NX1dl.jpg?s=128&g=1", "display_name": "TorelTwiddler", "link": "https://stackoverflow.com/users/817978/toreltwiddler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 239, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1467232363, "creation_date": 1467228362, "question_id": 38108446, "link": "https://stackoverflow.com/questions/38108446/django-order-by-multiple-filtered-foreign-key-values", "title": "Django order by multiple filtered foreign key values", "body": "<p>I am attempting to sort by multiple values on related fields, filtered by a key, but running the second <code>order_by</code> is ordering by the <em>first</em> filter, not the most recent.</p>\n\n<pre><code>class Product(Model):\n    name = CharField()\n\n\nclass ProductAttribute(Model):\n    product = ForeignKey(Product)\n    key = CharField()\n    value = FloatField()\n\n\n# This line sorts products as expected over the `ProductAttribute`s with a key of 'score'\nproducts = Product.objects.filter(productattribute_set__key='score')\\\n                          .order_by('productattribute_set__value')\n\n# This line sorts products as expected over the `ProductAttribute`s with a key of 'rating'\nproducts = Product.objects.filter(productattribute_set__key='rating')\\\n                          .order_by('productattribute_set__value')\n\n# This line sorts products based on score only, not on rating, then score (or vise versa)\nproducts = Product.objects.filter(productattribute_set__key='score')\\\n                          .order_by('productattribute_set__value')\\\n                          .filter(productattribute_set__key='rating')\\\n                          .order_by('productattribute_set__value')\n</code></pre>\n\n<p>Is there a way to order by <code>score</code>'s value, and then <code>rating</code>'s value?</p>\n"}, {"tags": ["python", "hadoop", "hdfs", "signal-processing", "sensors"], "answers": [{"comments": [{"owner": {"reputation": 4474, "user_id": 1739297, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/PG6Q6.png?s=128&g=1", "display_name": "Matthias", "link": "https://stackoverflow.com/users/1739297/matthias"}, "edited": false, "score": 0, "creation_date": 1467265907, "post_id": 38114740, "comment_id": 63662852, "body": "Thanks. That&#39;s our current approach as well."}, {"owner": {"reputation": 4307, "user_id": 2015518, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/0ZKml.jpg?s=128&g=1", "display_name": "Rockie Yang", "link": "https://stackoverflow.com/users/2015518/rockie-yang"}, "reply_to_user": {"reputation": 4474, "user_id": 1739297, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/PG6Q6.png?s=128&g=1", "display_name": "Matthias", "link": "https://stackoverflow.com/users/1739297/matthias"}, "edited": false, "score": 0, "creation_date": 1467266356, "post_id": 38114740, "comment_id": 63663028, "body": "Have you tried to save in Avro format to see the performance difference?"}, {"owner": {"reputation": 4474, "user_id": 1739297, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/PG6Q6.png?s=128&g=1", "display_name": "Matthias", "link": "https://stackoverflow.com/users/1739297/matthias"}, "edited": false, "score": 0, "creation_date": 1467266967, "post_id": 38114740, "comment_id": 63663263, "body": "Yes, we tried that in different other projects and feels like Parquet is better in terms of performance."}, {"owner": {"reputation": 4307, "user_id": 2015518, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/0ZKml.jpg?s=128&g=1", "display_name": "Rockie Yang", "link": "https://stackoverflow.com/users/2015518/rockie-yang"}, "reply_to_user": {"reputation": 4474, "user_id": 1739297, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/PG6Q6.png?s=128&g=1", "display_name": "Matthias", "link": "https://stackoverflow.com/users/1739297/matthias"}, "edited": false, "score": 0, "creation_date": 1467274152, "post_id": 38114740, "comment_id": 63667131, "body": "I think Parquet is suitable for most use case except, data in the same column varies a lot, and always analysed on almost all columns. Also find a good <a href=\"http://stackoverflow.com/questions/28957291/avro-v-s-parquet\">SO answer</a>"}, {"owner": {"reputation": 194, "user_id": 3616059, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/100000016899853/picture?type=large", "display_name": "Amin Mohebi", "link": "https://stackoverflow.com/users/3616059/amin-mohebi"}, "edited": false, "score": 0, "creation_date": 1525929962, "post_id": 38114740, "comment_id": 87549936, "body": "I have the same situation here, not sure how to handle it. So, is it reasonable to save the data as Parquet and load /analysis with sparksql or df/ds API? since it is time series data, shouldn&#39;t we store the data in any kind of nosql database as we have frequent random access to the data?"}], "tags": [], "owner": {"reputation": 4307, "user_id": 2015518, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/0ZKml.jpg?s=128&g=1", "display_name": "Rockie Yang", "link": "https://stackoverflow.com/users/2015518/rockie-yang"}, "is_accepted": true, "score": 1, "last_activity_date": 1467265808, "last_edit_date": 1467265808, "creation_date": 1467265118, "answer_id": 38114740, "question_id": 38108432, "link": "https://stackoverflow.com/questions/38108432/how-to-store-sensor-data-into-apache-hadoop-hdfs-hive-hbase-or-other/38114740#38114740", "title": "How to store sensor data into Apache Hadoop HDFS, Hive, HBase or other", "body": "<p>I would consider to use.</p>\n\n<ul>\n<li>Load data from CSV file with <a href=\"https://github.com/databricks/spark-csv\" rel=\"nofollow\">databricks csv</a></li>\n<li>Cleaning the data</li>\n<li><p>Write to qarquet file (to save space and time)</p></li>\n<li><p>Load data from parquet file</p></li>\n<li>Analyse it</li>\n<li>Perhaps save as intermediate result</li>\n</ul>\n"}], "owner": {"reputation": 4474, "user_id": 1739297, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/PG6Q6.png?s=128&g=1", "display_name": "Matthias", "link": "https://stackoverflow.com/users/1739297/matthias"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 727, "favorite_count": 0, "accepted_answer_id": 38114740, "answer_count": 1, "score": 1, "last_activity_date": 1467265808, "creation_date": 1467228303, "question_id": 38108432, "link": "https://stackoverflow.com/questions/38108432/how-to-store-sensor-data-into-apache-hadoop-hdfs-hive-hbase-or-other", "title": "How to store sensor data into Apache Hadoop HDFS, Hive, HBase or other", "body": "<p>Imagine you are reading millions of data rows from a CSV file. Each line shows the sensor-name, the current sensor-value and the timestamp when that value was observed. </p>\n\n<pre><code>key, value, timestamp\ntemp_x, 8\u00b0C, 10:52am\ntemp_x, 25\u00b0C, 11:02am\ntemp_x, 30\u00b0C, 11:12am\n</code></pre>\n\n<p>This relates to a signal like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/4IWoP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4IWoP.png\" alt=\"real world signal observations\"></a></p>\n\n<p>So I wonder what's the best and most efficient way to store that into Apache Hadoop HDFS. First idea is using BigTable aka HBase. Here the signal name is the row-key while the value is a column-group that saves the values over time. One could add more column-groups (as for instance statistics) to that row-key.</p>\n\n<p><a href=\"https://i.stack.imgur.com/j2ztY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/j2ztY.png\" alt=\"stored in HBase\"></a></p>\n\n<p>Another idea is using a tabular (or SQL like) structure. But then you replicate the key in each row. And you have to calculate statistics on demand and store them separately (here into a second table).</p>\n\n<p><a href=\"https://i.stack.imgur.com/aoCRU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/aoCRU.png\" alt=\"SQL like storage\"></a></p>\n\n<p>I wonder if there is any better idea. Once stored, I want to read that data in Python/PySpark and do data analytics and machine learning. Therefore the data should be easily accessible using a schema (Spark RDD).</p>\n"}, {"tags": ["python", "google-app-engine", "blobstore", "webapp2"], "comments": [{"owner": {"reputation": 27241, "user_id": 5320906, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NOdNo.jpg?s=128&g=1", "display_name": "snakecharmerb", "link": "https://stackoverflow.com/users/5320906/snakecharmerb"}, "edited": false, "score": 1, "creation_date": 1467228799, "post_id": 38108388, "comment_id": 63650783, "body": "Can you show the code for <code>self.get_uploads</code>?"}, {"owner": {"reputation": 166, "user_id": 3503861, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fc91fa6d0a5bc03af7b3ece12917e3bd?s=128&d=identicon&r=PG&f=1", "display_name": "Shahzeb Akram", "link": "https://stackoverflow.com/users/3503861/shahzeb-akram"}, "reply_to_user": {"reputation": 27241, "user_id": 5320906, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NOdNo.jpg?s=128&g=1", "display_name": "snakecharmerb", "link": "https://stackoverflow.com/users/5320906/snakecharmerb"}, "edited": false, "score": 1, "creation_date": 1467229047, "post_id": 38108388, "comment_id": 63650919, "body": "Its a built in function to upload the file."}], "answers": [{"tags": [], "owner": {"reputation": 166, "user_id": 3503861, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fc91fa6d0a5bc03af7b3ece12917e3bd?s=128&d=identicon&r=PG&f=1", "display_name": "Shahzeb Akram", "link": "https://stackoverflow.com/users/3503861/shahzeb-akram"}, "is_accepted": true, "score": 1, "last_activity_date": 1467229662, "creation_date": 1467229662, "answer_id": 38108830, "question_id": 38108388, "link": "https://stackoverflow.com/questions/38108388/gae-python-webapp2-image-upload-error/38108830#38108830", "title": "GAE Python webapp2 image upload error", "body": "<p>Actually i have to set the action to Upload url.</p>\n\n<pre><code>&lt;form id=\"signup\" method=\"post\" action=\"/post/signup\" enctype=\"multipart/form-data\"&gt;\n\n &lt;label&gt;Change image:&lt;/label&gt;\n        &lt;input type=\"file\" name=\"pict\" &gt;&lt;br&gt;\n&lt;/form&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 22041, "user_id": 108207, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/dd8608b8b423bdcbda3fe5c0cf8b6230?s=128&d=identicon&r=PG&f=1", "display_name": "Niklas R.", "link": "https://stackoverflow.com/users/108207/niklas-r"}, "is_accepted": false, "score": 0, "last_activity_date": 1467286642, "creation_date": 1467286642, "answer_id": 38121988, "question_id": 38108388, "link": "https://stackoverflow.com/questions/38108388/gae-python-webapp2-image-upload-error/38121988#38121988", "title": "GAE Python webapp2 image upload error", "body": "<p>I think you have to use a <code>form_url</code> variable:</p>\n\n<pre><code>`   &lt;form method=\"post\" action=\"{{ form_url }}\" accept-charset=\"UTF-8\"\n                  enctype=\"multipart/form-data\"&gt;`\n</code></pre>\n\n<p>You get this variable from the appengine with your backend code:</p>\n\n<pre><code>class UploadPage(BaseRequestHandler):\n    def get(self):\n        form = UploadForm()\n        self.render('upload.html', {\n                'form': form,\n                'form_url': blobstore.create_upload_url('/upload_form'),\n            })\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 5000706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd2598f1d535555f4469c50a0475c5d2?s=128&d=identicon&r=PG&f=1", "display_name": "Gabriel O", "link": "https://stackoverflow.com/users/5000706/gabriel-o"}, "is_accepted": false, "score": 0, "last_activity_date": 1467318508, "last_edit_date": 1495541239, "creation_date": 1467318508, "answer_id": 38132680, "question_id": 38108388, "link": "https://stackoverflow.com/questions/38108388/gae-python-webapp2-image-upload-error/38132680#38132680", "title": "GAE Python webapp2 image upload error", "body": "<p>In my case, with multi-part forms, I am getting file data as follows:</p>\n\n<pre><code>self.request.get('&lt;name_in_form&gt;')\n</code></pre>\n\n<p>For your case, it should be:</p>\n\n<pre><code>self.request.get('pict')\n</code></pre>\n\n<p>In any case, if possible, try to avoid using blobstore, as Google recommends using Cloud Storage, as blobstore looks like will be deprecated in the future, couple of references:</p>\n\n<p><a href=\"https://cloud.google.com/appengine/docs/python/blobstore/\" rel=\"nofollow noreferrer\">https://cloud.google.com/appengine/docs/python/blobstore/</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/9671182/google-blobstore-versus-google-cloud-storage\">Google Blobstore versus Google cloud storage</a></p>\n\n<p>Regards.</p>\n"}], "owner": {"reputation": 166, "user_id": 3503861, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fc91fa6d0a5bc03af7b3ece12917e3bd?s=128&d=identicon&r=PG&f=1", "display_name": "Shahzeb Akram", "link": "https://stackoverflow.com/users/3503861/shahzeb-akram"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 38108830, "answer_count": 3, "score": 1, "last_activity_date": 1467318508, "creation_date": 1467228159, "question_id": 38108388, "link": "https://stackoverflow.com/questions/38108388/gae-python-webapp2-image-upload-error", "title": "GAE Python webapp2 image upload error", "body": "<p>I am working on a project in which i am trying to upload a image on blob store. But i am getting this error</p>\n\n<blockquote>\n  <p>File \"C:\\Users\\shaizi\\PycharmProjects\\simpletestapp\\Update.py\", line \n  51, in post</p>\n  \n  <p>blob_info = upload_files[0]<br>\n  IndexError: list index out of range</p>\n</blockquote>\n\n<p>My html form code is</p>\n\n<pre><code>&lt;form id=\"signup\" method=\"post\" action=\"/update\" enctype=\"multipart/form-data\"&gt;\n\n &lt;label&gt;Change image:&lt;/label&gt;\n        &lt;input type=\"file\" name=\"pict\" &gt;&lt;br&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>Python Code for uploading image to Blob store:</p>\n\n<pre><code>def post(self):\n\n    blobstore.create_upload_url('/post/signup')\n\n    upload_files = self.get_uploads('pict')\n\n    blob_info = upload_files[0]\n</code></pre>\n"}, {"tags": ["python", "pip", "enthought", "canopy"], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 5030287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d685b3aefe38c0cfcffd7696b9aa3289?s=128&d=identicon&r=PG&f=1", "display_name": "meJayu", "link": "https://stackoverflow.com/users/5030287/mejayu"}, "edited": false, "score": 0, "creation_date": 1467229214, "post_id": 38108654, "comment_id": 63650993, "body": "Thanks @J.Corson I am using Windows environment."}, {"owner": {"reputation": 428, "user_id": 5278032, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hVdHl.jpg?s=128&g=1", "display_name": "J. Corson", "link": "https://stackoverflow.com/users/5278032/j-corson"}, "reply_to_user": {"reputation": 85, "user_id": 5030287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d685b3aefe38c0cfcffd7696b9aa3289?s=128&d=identicon&r=PG&f=1", "display_name": "meJayu", "link": "https://stackoverflow.com/users/5030287/mejayu"}, "edited": false, "score": 0, "creation_date": 1467229712, "post_id": 38108654, "comment_id": 63651238, "body": "@meJayu Looks like getting it to work on Windows will require using Docker or maybe Windows 10 insiders preview with bash support. See <a href=\"http://www.hanselman.com/blog/PlayingWithTensorFlowOnWindows.aspx\" rel=\"nofollow noreferrer\">hanselman.com/blog/PlayingWithTensorFlowOnWindows.aspx</a> and <a href=\"https://github.com/tensorflow/tensorflow/issues/17\" rel=\"nofollow noreferrer\">github.com/tensorflow/tensorflow/issues/17</a>"}], "tags": [], "owner": {"reputation": 428, "user_id": 5278032, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hVdHl.jpg?s=128&g=1", "display_name": "J. Corson", "link": "https://stackoverflow.com/users/5278032/j-corson"}, "is_accepted": true, "score": 1, "last_activity_date": 1467229059, "creation_date": 1467229059, "answer_id": 38108654, "question_id": 38108352, "link": "https://stackoverflow.com/questions/38108352/how-can-i-install-tensorflow-in-canopy-windows-environment/38108654#38108654", "title": "How can I install Tensorflow in Canopy ( Windows Environment)?", "body": "<p>You should be able to install tensorflow into Canopy following the instructions here (without using <code>sudo</code>): <a href=\"https://www.tensorflow.org/versions/r0.9/get_started/os_setup.html#pip-installation\" rel=\"nofollow\">https://www.tensorflow.org/versions/r0.9/get_started/os_setup.html#pip-installation</a></p>\n\n<p>In a Canopy Terminal (accessible from the Tools menu) you can run:</p>\n\n<p><strong>OSX</strong></p>\n\n<p><code>export TF_BINARY_URL=https://storage.googleapis.com/tensorflow/mac/tensorflow-0.9.0-py2-none-any.whl</code></p>\n\n<p><code>pip install --upgrade $TF_BINARY_URL</code></p>\n\n<p><strong>Linux</strong></p>\n\n<p><code>export TF_BINARY_URL=https://storage.googleapis.com/tensorflow/linux/cpu/tensorflow-0.9.0-cp27-none-linux_x86_64.whl</code></p>\n\n<p><code>pip install --upgrade $TF_BINARY_URL</code></p>\n"}], "owner": {"reputation": 85, "user_id": 5030287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d685b3aefe38c0cfcffd7696b9aa3289?s=128&d=identicon&r=PG&f=1", "display_name": "meJayu", "link": "https://stackoverflow.com/users/5030287/mejayu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3778, "favorite_count": 1, "closed_date": 1467269654, "accepted_answer_id": 38108654, "answer_count": 1, "score": 0, "last_activity_date": 1467231868, "creation_date": 1467228003, "last_edit_date": 1467231868, "question_id": 38108352, "link": "https://stackoverflow.com/questions/38108352/how-can-i-install-tensorflow-in-canopy-windows-environment", "closed_reason": "Not suitable for this site", "title": "How can I install Tensorflow in Canopy ( Windows Environment)?", "body": "<p>I see so many libraries in Enthought Canopy, but couldn't find TensorFlow by google to train the CNN. If it is not there, how could I use TensorFlow Framework in Canopy. </p>\n\n<p>I really don't want to change the platform. Is there any way I can use pip installation to use it in my canopy?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "list"], "answers": [{"comments": [{"owner": {"reputation": 2325, "user_id": 2272638, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4c4d7d86231ea02341f3a868d9d3f8c5?s=128&d=identicon&r=PG", "display_name": "dwanderson", "link": "https://stackoverflow.com/users/2272638/dwanderson"}, "edited": false, "score": 2, "creation_date": 1467228943, "post_id": 38108413, "comment_id": 63650861, "body": "In that first loop, you could also use <code>dates = collections.defaultdict(int)</code> and then just <code>dates[date] += day</code>, instead of the <code>if-else</code>"}, {"owner": {"reputation": 9683, "user_id": 4076764, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/c214b9830295015777d8c6cbc8462b4f?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Hughes", "link": "https://stackoverflow.com/users/4076764/adam-hughes"}, "reply_to_user": {"reputation": 2325, "user_id": 2272638, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4c4d7d86231ea02341f3a868d9d3f8c5?s=128&d=identicon&r=PG", "display_name": "dwanderson", "link": "https://stackoverflow.com/users/2272638/dwanderson"}, "edited": false, "score": 0, "creation_date": 1467229106, "post_id": 38108413, "comment_id": 63650943, "body": "How&#39;d I never know about this?"}, {"owner": {"reputation": 8233, "user_id": 2247550, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/zrSSY.jpg?s=128&g=1", "display_name": "Jared Goguen", "link": "https://stackoverflow.com/users/2247550/jared-goguen"}, "edited": false, "score": 0, "creation_date": 1467229172, "post_id": 38108413, "comment_id": 63650973, "body": "For the second block of code, maybe <code>outlist = list(dates.items())</code> for Python 3.X or <code>outlist = dates.items()</code> for Python 2.X?"}, {"owner": {"reputation": 11305, "user_id": 6160119, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JlM4b.jpg?s=128&g=1", "display_name": "Tonechas", "link": "https://stackoverflow.com/users/6160119/tonechas"}, "edited": false, "score": 0, "creation_date": 1467229495, "post_id": 38108413, "comment_id": 63651132, "body": "You could also get rid of the <code>if-else</code> sentence through the <code>dict.get()</code> method by setting a default value to <code>0</code>. <code>dates[date] = day + dates.get(date, 0)</code>"}, {"owner": {"reputation": 9683, "user_id": 4076764, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/c214b9830295015777d8c6cbc8462b4f?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Hughes", "link": "https://stackoverflow.com/users/4076764/adam-hughes"}, "edited": false, "score": 0, "creation_date": 1467229825, "post_id": 38108413, "comment_id": 63651292, "body": "These are good suggestions, but I&#39;m going to keep the answer as is so that OP can try the if/else way, then make it more succinct with these more advanced concepts.  Then he/she can come to comments and implement these nice tips"}, {"owner": {"reputation": 2325, "user_id": 2272638, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4c4d7d86231ea02341f3a868d9d3f8c5?s=128&d=identicon&r=PG", "display_name": "dwanderson", "link": "https://stackoverflow.com/users/2272638/dwanderson"}, "edited": false, "score": 0, "creation_date": 1467304296, "post_id": 38108413, "comment_id": 63688755, "body": "@AdamHughes - exactly why I mention it :). So many things I&#39;ve stumbled across in SO answers/comments that now I couldn&#39;t live without, so I&#39;m always happy to pass along! Might be overkill/mismatch for this case, but another convenience class I like is <code>collections.Counter()</code>"}], "tags": [], "owner": {"reputation": 9683, "user_id": 4076764, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/c214b9830295015777d8c6cbc8462b4f?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Hughes", "link": "https://stackoverflow.com/users/4076764/adam-hughes"}, "is_accepted": false, "score": 2, "last_activity_date": 1467228249, "creation_date": 1467228249, "answer_id": 38108413, "question_id": 38108345, "link": "https://stackoverflow.com/questions/38108345/how-to-add-up-specific-parts-of-a-list/38108413#38108413", "title": "How to add up specific parts of a list?", "body": "<p>Use a dictionary to keep the unique dates:</p>\n\n<pre><code>dates = {}\nfor (date, month, day) in your_list:\n    if date not in dates:\n        dates[date] = day\n    else\n        dates[date] += day\n</code></pre>\n\n<p>You'd then have to go back to a list if you wanted the output as you've specified:</p>\n\n<pre><code>outlist = []\nfor (date, daycount) in dates.items():\n    outlist.append( (date, daycount) )\n</code></pre>\n\n<p>That being said, whenever you're using dates, it's usually useful to store them as datetime objects and then operations like adding dates are more straightforward.</p>\n"}, {"comments": [{"owner": {"reputation": 9833, "user_id": 4407666, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/AqwYj.jpg?s=128&g=1", "display_name": "Rahul K P", "link": "https://stackoverflow.com/users/4407666/rahul-k-p"}, "edited": false, "score": 0, "creation_date": 1467228826, "post_id": 38108551, "comment_id": 63650796, "body": "Your input is different."}, {"owner": {"reputation": 8233, "user_id": 2247550, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/zrSSY.jpg?s=128&g=1", "display_name": "Jared Goguen", "link": "https://stackoverflow.com/users/2247550/jared-goguen"}, "reply_to_user": {"reputation": 9833, "user_id": 4407666, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/AqwYj.jpg?s=128&g=1", "display_name": "Rahul K P", "link": "https://stackoverflow.com/users/4407666/rahul-k-p"}, "edited": false, "score": 2, "creation_date": 1467228913, "post_id": 38108551, "comment_id": 63650845, "body": "@RahulKP The given input doesn&#39;t parse"}, {"owner": {"reputation": 9833, "user_id": 4407666, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/AqwYj.jpg?s=128&g=1", "display_name": "Rahul K P", "link": "https://stackoverflow.com/users/4407666/rahul-k-p"}, "reply_to_user": {"reputation": 8233, "user_id": 2247550, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/zrSSY.jpg?s=128&g=1", "display_name": "Jared Goguen", "link": "https://stackoverflow.com/users/2247550/jared-goguen"}, "edited": false, "score": 0, "creation_date": 1467229007, "post_id": 38108551, "comment_id": 63650895, "body": "@JaredGoguen check the input with question and the answer."}, {"owner": {"reputation": 1289, "user_id": 5719759, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ME0hZ.jpg?s=128&g=1", "display_name": "Alec", "link": "https://stackoverflow.com/users/5719759/alec"}, "reply_to_user": {"reputation": 9833, "user_id": 4407666, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/AqwYj.jpg?s=128&g=1", "display_name": "Rahul K P", "link": "https://stackoverflow.com/users/4407666/rahul-k-p"}, "edited": false, "score": 0, "creation_date": 1467230288, "post_id": 38108551, "comment_id": 63651510, "body": "@RahulKP it should still work regardless of the way the dates are formatted (unless it&#39;s a datetime object with date and time data, that is). As filifunk has it, the list will give back a NameError, and trying to assign a variable named 1/1/2011 would give a SyntaxError since / is an operator."}], "tags": [], "owner": {"reputation": 1289, "user_id": 5719759, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ME0hZ.jpg?s=128&g=1", "display_name": "Alec", "link": "https://stackoverflow.com/users/5719759/alec"}, "is_accepted": false, "score": 1, "last_activity_date": 1467229438, "last_edit_date": 1467229438, "creation_date": 1467228721, "answer_id": 38108551, "question_id": 38108345, "link": "https://stackoverflow.com/questions/38108345/how-to-add-up-specific-parts-of-a-list/38108551#38108551", "title": "How to add up specific parts of a list?", "body": "<p>Find all the dates in the list and then you can count each one:</p>\n\n<pre><code>dates = [('1/1/2011', 'August', 5), ('1/1/2011', 'July', 4),\n         ('1/1/2011', 'June', 1), ('1/6/2011', 'December', 5)]\n\neach_date = set(d[0] for d in dates)\n\ncount_dates = [(d, sum(i[2] for i in dates if i[0] == d)) for d in each_date]\n\nprint(count_dates)\n# -&gt; [('1/6/2011', 5), ('1/1/2011', 10)]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11305, "user_id": 6160119, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JlM4b.jpg?s=128&g=1", "display_name": "Tonechas", "link": "https://stackoverflow.com/users/6160119/tonechas"}, "is_accepted": false, "score": 1, "last_activity_date": 1467232715, "creation_date": 1467232715, "answer_id": 38109627, "question_id": 38108345, "link": "https://stackoverflow.com/questions/38108345/how-to-add-up-specific-parts-of-a-list/38109627#38109627", "title": "How to add up specific parts of a list?", "body": "<p>Here is a one-liner based on <a href=\"https://docs.python.org/2/library/itertools.html#itertools.groupby\" rel=\"nofollow\"><code>itertools.groupby()</code></a>:</p>\n\n<pre><code>&gt;&gt;&gt; from itertools import groupby\n&gt;&gt;&gt; from operator import itemgetter\n&gt;&gt;&gt; dates = [('1/1/2011', 'August', 5), ('1/1/2011', 'July', 4), \n             ('1/1/2011', 'June', 1), ('1/6/2011', 'December', 5)]\n&gt;&gt;&gt; [(date, sum(map(itemgetter(-1), group))) for (date, group) in groupby(dates, key=itemgetter(0))]\n[('1/1/2011', 10), ('1/6/2011', 5)]\n</code></pre>\n\n<p>Notice that for this demo I used the same <code>dates</code> as in @alecrasmussen's answer as the data provided by the OP cannot be interpreted by Python.</p>\n"}], "owner": {"reputation": 57, "user_id": 6115999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a717594be76d28e1431f692cbeadb24c?s=128&d=identicon&r=PG&f=1", "display_name": "filifunk", "link": "https://stackoverflow.com/users/6115999/filifunk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1467232715, "creation_date": 1467227991, "last_edit_date": 1467228056, "question_id": 38108345, "link": "https://stackoverflow.com/questions/38108345/how-to-add-up-specific-parts-of-a-list", "title": "How to add up specific parts of a list?", "body": "<p>I have a list with a bunch of data in the format of: <code>date, month, data</code></p>\n\n<p>I would like all of the entries with the same date to sum up all of their data and the output be simply date, data.  In other words, the data looks something like this</p>\n\n<pre><code>[(1/1/2011, August, 5), (1/1/2011, July, 4), (1,1,2011, June, 1), (1/6/2011, December, 5)]\n</code></pre>\n\n<p>For this example I would want the output to be like this:</p>\n\n<pre><code>[(1/1/2011, 10), (1/6/2011, 5)]\n</code></pre>\n\n<p>How would I go about doing this?  I know this would involve a for loop and if a date is similar it would sum up the data.  But I'm stumped on how to go about this.</p>\n"}, {"tags": ["python", "numpy"], "comments": [{"owner": {"reputation": 6485, "user_id": 9067615, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vkgqA.jpg?s=128&g=1", "display_name": "iacob", "link": "https://stackoverflow.com/users/9067615/iacob"}, "edited": false, "score": 0, "creation_date": 1616576116, "post_id": 38108335, "comment_id": 118042653, "body": "Does this answer your question? <a href=\"https://stackoverflow.com/questions/31469692/better-way-to-create-block-matrices-out-of-individual-blocks-in-numpy\">Better way to create block matrices out of individual blocks in numpy?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 705380, "user_id": 190597, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aabc98d5c6482ca0e1405ec97710f30a?s=128&d=identicon&r=PG&f=1", "display_name": "unutbu", "link": "https://stackoverflow.com/users/190597/unutbu"}, "edited": false, "score": 3, "creation_date": 1467228294, "post_id": 38108383, "comment_id": 63650530, "body": "Might be good to note <code>np.bmat</code> returns a <code>matrix</code>, not an <code>array</code>. <code>np.asarray</code> could  be used to convert the matrix to an array."}, {"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "reply_to_user": {"reputation": 705380, "user_id": 190597, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aabc98d5c6482ca0e1405ec97710f30a?s=128&d=identicon&r=PG&f=1", "display_name": "unutbu", "link": "https://stackoverflow.com/users/190597/unutbu"}, "edited": false, "score": 0, "creation_date": 1467228395, "post_id": 38108383, "comment_id": 63650590, "body": "@unutbu Ah yes! Let me add that info."}, {"owner": {"reputation": 1372, "user_id": 5547104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa825caa06a43d1a5eb804a99d73cc18?s=128&d=identicon&r=PG&f=1", "display_name": "lballes", "link": "https://stackoverflow.com/users/5547104/lballes"}, "edited": false, "score": 0, "creation_date": 1467228436, "post_id": 38108383, "comment_id": 63650605, "body": "Thanks! I somehow overlooked <code>np.bmat</code>. I was thinking about using numpy matrices for my problem, anyway."}, {"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "reply_to_user": {"reputation": 1372, "user_id": 5547104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa825caa06a43d1a5eb804a99d73cc18?s=128&d=identicon&r=PG&f=1", "display_name": "lballes", "link": "https://stackoverflow.com/users/5547104/lballes"}, "edited": false, "score": 0, "creation_date": 1467228583, "post_id": 38108383, "comment_id": 63650676, "body": "@lballes Ah so no conversion needed then, awesome!"}, {"owner": {"reputation": 1372, "user_id": 5547104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa825caa06a43d1a5eb804a99d73cc18?s=128&d=identicon&r=PG&f=1", "display_name": "lballes", "link": "https://stackoverflow.com/users/5547104/lballes"}, "edited": false, "score": 1, "creation_date": 1467228659, "post_id": 38108383, "comment_id": 63650719, "body": "Might be a useful piece of information for someone else, anyway."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1467235919, "post_id": 38108383, "comment_id": 63654293, "body": "Internally <code>bmat</code> is doing the same 3 <code>concatenate</code> actions."}], "tags": [], "owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "is_accepted": true, "score": 6, "last_activity_date": 1517950143, "last_edit_date": 1517950143, "creation_date": 1467228144, "answer_id": 38108383, "question_id": 38108335, "link": "https://stackoverflow.com/questions/38108335/arranging-numpy-arrays-in-a-block-matrix/38108383#38108383", "title": "Arranging numpy arrays in a block matrix", "body": "<p>As of NumPy 1.13, there's <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.block.html\" rel=\"nofollow noreferrer\"><code>np.block</code></a>. This builds matrices out of nested lists of blocks, but it's also more general, handling higher-dimensional arrays and certain not-quite-grid cases. It also produces an ndarray, unlike <code>bmat</code>.</p>\n\n<pre><code>np.block([[A, B], [B.T, C]])\n</code></pre>\n\n<hr>\n\n<p>For previous versions, you can use the NumPy built-in <a href=\"http://docs.scipy.org/doc/numpy/reference/generated/numpy.bmat.html\" rel=\"nofollow noreferrer\"><code>np.bmat</code></a> that's perfectly suited for such a task, like so -</p>\n\n<pre><code>np.bmat([[A, B], [B.T, C]])\n</code></pre>\n\n<p>As mentioned in the <a href=\"https://stackoverflow.com/questions/38108335/arranging-numpy-arrays-in-a-block-matrix#comment63650530_38108383\"><code>comments by @unutbu</code></a>, please note that the output would be a NumPy matrix. If the intended output is an array instead, we need to convert it, like so -</p>\n\n<pre><code>np.asarray(np.bmat([[A, B], [B.T, C]]))\n</code></pre>\n\n<p>or</p>\n\n<pre><code>np.bmat([[A, B], [B.T, C]]).A\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": false, "score": 0, "last_activity_date": 1467236359, "creation_date": 1467236359, "answer_id": 38110489, "question_id": 38108335, "link": "https://stackoverflow.com/questions/38108335/arranging-numpy-arrays-in-a-block-matrix/38110489#38110489", "title": "Arranging numpy arrays in a block matrix", "body": "<p>Stripped of some bells and whisles, <code>np.bmat</code> does this:</p>\n\n<pre><code>def foo(alist):\n    rowlist=[]\n    for row in alist:\n        rowlist.append(np.concatenate(row,axis=1))\n    return np.concatenate(rowlist, axis=0)\n</code></pre>\n\n<p>So for example:</p>\n\n<pre><code>In [1026]: A=np.arange(4).reshape(2,2);B=np.arange(2).reshape(2,1);C=np.array([0]).reshape(1,1)\n\nIn [1027]: foo([[A,B],[B.T,C]])\nOut[1027]: \narray([[0, 1, 0],\n       [2, 3, 1],\n       [0, 1, 0]])\n</code></pre>\n\n<p>Making the inputs matrices simplifies the <code>reshape</code> preparation.</p>\n"}], "owner": {"reputation": 1372, "user_id": 5547104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa825caa06a43d1a5eb804a99d73cc18?s=128&d=identicon&r=PG&f=1", "display_name": "lballes", "link": "https://stackoverflow.com/users/5547104/lballes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1746, "favorite_count": 0, "accepted_answer_id": 38108383, "answer_count": 2, "score": 4, "last_activity_date": 1517950143, "creation_date": 1467227965, "question_id": 38108335, "link": "https://stackoverflow.com/questions/38108335/arranging-numpy-arrays-in-a-block-matrix", "title": "Arranging numpy arrays in a block matrix", "body": "<p>I have 3 numpy arrays <code>A</code>, <code>B</code> and <code>C</code>. For simplicity, let's assume that they are all of shape <code>[n, n]</code>. I want to arrange them as a block matrix</p>\n\n<pre><code>A    B\nB^t  C\n</code></pre>\n\n<p>where <code>B^t</code> shall denote the transpose of <code>B</code>. Of course, I could do this via a series of concatenations</p>\n\n<pre><code>top_row = np.concatenate([A, B], axis=1)\nbottom_row = np.concatenate([B.transpose(), C], axis=1)\nresult = np.concatenate([top_row, bottom_row], axis=0)\n</code></pre>\n\n<p>Is there a simpler, more readable way?</p>\n"}]